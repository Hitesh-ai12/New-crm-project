import{a as y}from"./axios-CdtiCRuU.js";import{_ as A,l as u,j as s,k as p,P as g,bP as T,n as r,F as U,Y as V,X as m,aG as C,L as o,d6 as i,d3 as b,h as c,g as L,bA as I,o as a}from"./main-vIJe2q0H.js";const w={data(){return{activeTab:"timeline",activeMenuItem:"all",leadId:null,contact:{first_name:"",last_name:"",email:"",phone:"",stage:"",source:"",customTag:""},user:{name:"",email:"",phone:"",stage:"",tags:"",city:"",background:"",house_number:"",street:"",province:"",zip_code:""}}},methods:{setActiveTab(n){this.activeTab=n},async fetchLead(n){var e;console.log("Fetching lead for ID:",n);try{const d=localStorage.getItem("auth_token");if(!d)throw new Error("No authentication token found.");const t=(await y.get(`http://127.0.0.1:8000/api/leads/${n}`,{headers:{Authorization:`Bearer ${d}`,Accept:"application/json"}})).data;if(!t||!t.id)throw new Error("Invalid lead data received");this.contact={first_name:t.first_name||"",last_name:t.last_name||"",email:t.email||"",phone:t.phone||"",stage:t.stage||"",source:t.source||"",customTag:t.tag||""},this.user={name:`${t.first_name||""} ${t.last_name||""}`.trim(),email:t.email||"",phone:t.phone||"",stage:t.stage||"",tags:t.tag||"",city:t.city||"",background:t.background||"",house_number:t.house_number||"",street:t.street||"",province:t.province||"",zip_code:t.zip_code||""},this.leadId=t.id}catch(d){console.error("Error fetching lead:",((e=d.response)==null?void 0:e.data)||d.message)}},async updateLead(){var n;if(!this.leadId){alert("Lead ID is missing!");return}try{const e=localStorage.getItem("auth_token");if(!e)throw new Error("No authentication token found.");const d=this.user.name.trim().split(" "),f=d[0]||"",t=d.slice(1).join(" ")||"",v=await y.put(`http://127.0.0.1:8000/api/leads/${this.leadId}`,{first_name:f,last_name:t,email:this.user.email,phone:this.user.phone,stage:this.user.stage,tag:this.user.tags,city:this.user.city,background:this.user.background,house_number:this.user.house_number,street:this.user.street,province:this.user.province,zip_code:this.user.zip_code},{headers:{Authorization:`Bearer ${e}`,Accept:"application/json"}});console.log("Lead updated successfully:",v.data),alert("Lead updated successfully!")}catch(e){console.error("Update failed:",((n=e.response)==null?void 0:n.data)||e.message),alert("Failed to update lead.")}}},mounted(){const n=this.$route.params.id;n?this.fetchLead(n):console.error("Lead ID is missing in route!")}},S={class:"lead-management"},M={class:"header"},N={class:"contact-info"},x={class:"avatar"},P={class:"details"},E={class:"tags"},z={class:"tag stage"},D={class:"tag source"},F={class:"tag custom"},q={class:"navigation"},B={key:0,class:"container"},j={class:"sidebar"},H={class:"main-content"},O={class:"activities"},R={class:"activity-details"},G={class:"activity-time"},W={key:1,class:"container"},X={class:"main-content"},Y={class:"form-grid"},Z={class:"form-group"},J={class:"form-group"},K={class:"form-group"},Q={class:"form-group"},h={class:"form-group"},_={class:"form-group"},$={class:"form-group"},ee={class:"form-group"},se={class:"form-group"},te={class:"form-group"},le={class:"form-group"},oe={class:"form-group"},ne={class:"form-group"},ie={class:"form-group"},ue={class:"form-group"},re={class:"form-group"},ae={class:"form-group"},de={class:"form-group"},pe={class:"form-group"},me={class:"form-group"},ve={class:"form-group"},be={class:"form-group"},fe={class:"form-group"},ge={class:"form-group"},ye={class:"form-group"},ke={class:"form-group"},Ae={class:"form-group"},Te={class:"form-group"},Ue={class:"form-group"},Ve={class:"form-group"},Ce={class:"form-group"},ce={class:"form-group"},Le={class:"form-group"},Ie={class:"form-group"},we={key:2,class:"analytics-container"},Se={class:"sidebar"},Me={class:"main-content"},Ne={class:"analytics-content"},xe={key:0},Pe={key:1},Ee={key:2},ze={key:3},De={key:4},Fe={class:"fab"},qe={key:0,class:"fas fa-times"},Be={key:1,class:"fas fa-plus"},je={class:"fab-actions",key:"actions"};function He(n,e,d,f,t,v){return a(),u("div",S,[s("div",M,[s("div",N,[s("div",x,p(n.firstLetter),1),s("div",P,[s("h2",null,p(t.contact.first_name),1),s("div",E,[s("span",z,[e[52]||(e[52]=s("i",{class:"fas fa-chart-line"},null,-1)),g(" "+p(t.contact.stage),1)]),s("span",D,[e[53]||(e[53]=s("i",{class:"fas fa-globe"},null,-1)),g(" "+p(t.contact.source),1)]),s("span",F,[e[54]||(e[54]=s("i",{class:"fas fa-tag"},null,-1)),g(" "+p(t.contact.customTag),1)])])])]),e[55]||(e[55]=T('<div class="actions" data-v-7a3cf225><button class="btn danger" data-v-7a3cf225><i class="fas fa-microphone" data-v-7a3cf225></i></button><button class="btn danger" data-v-7a3cf225><i class="fas fa-times" data-v-7a3cf225></i></button></div>',1))]),s("div",q,[s("button",{class:r(["nav-btn",t.activeTab==="timeline"?"active":""]),onClick:e[0]||(e[0]=l=>t.activeTab="timeline")},"Timeline",2),s("button",{class:r(["nav-btn",t.activeTab==="profile"?"active":""]),onClick:e[1]||(e[1]=l=>t.activeTab="profile")},"Profile",2),s("button",{class:r(["nav-btn",t.activeTab==="analytics"?"active":""]),onClick:e[2]||(e[2]=l=>t.activeTab="analytics")},"Analytics",2)]),t.activeTab==="timeline"?(a(),u("div",B,[s("div",j,[s("div",{class:r(["menu-item",{active:t.activeMenuItem==="all"}]),onClick:e[3]||(e[3]=l=>t.activeMenuItem="all")},e[56]||(e[56]=[s("div",{class:"icon"},[s("i",{class:"fas fa-headset"})],-1),s("div",{class:"label"},"ALL",-1)]),2),s("div",{class:r(["menu-item",{active:t.activeMenuItem==="sms"}]),onClick:e[4]||(e[4]=l=>t.activeMenuItem="sms")},e[57]||(e[57]=[s("div",{class:"icon"},[s("i",{class:"fas fa-comment"})],-1),s("div",{class:"label"},"SMS",-1)]),2),s("div",{class:r(["menu-item",{active:t.activeMenuItem==="email"}]),onClick:e[5]||(e[5]=l=>t.activeMenuItem="email")},e[58]||(e[58]=[s("div",{class:"icon"},[s("i",{class:"fas fa-envelope"})],-1),s("div",{class:"label"},"Email",-1)]),2),s("div",{class:r(["menu-item",{active:t.activeMenuItem==="notes"}]),onClick:e[6]||(e[6]=l=>t.activeMenuItem="notes")},e[59]||(e[59]=[s("div",{class:"icon"},[s("i",{class:"fas fa-sticky-note"})],-1),s("div",{class:"label"},"Notes",-1)]),2),s("div",{class:r(["menu-item",{active:t.activeMenuItem==="callLog"}]),onClick:e[7]||(e[7]=l=>t.activeMenuItem="callLog")},e[60]||(e[60]=[s("div",{class:"icon"},[s("i",{class:"fas fa-phone"})],-1),s("div",{class:"label"},"Call Log",-1)]),2),s("div",{class:r(["menu-item",{active:t.activeMenuItem==="webActivity"}]),onClick:e[8]||(e[8]=l=>t.activeMenuItem="webActivity")},e[61]||(e[61]=[s("div",{class:"icon"},[s("i",{class:"fas fa-globe"})],-1),s("div",{class:"label"},"WEB Activity",-1)]),2)]),s("div",H,[e[63]||(e[63]=s("div",{class:"content-header"},[s("h3",null,"Timeline")],-1)),s("div",O,[(a(!0),u(U,null,V(n.activities,(l,k)=>(a(),u("div",{key:k,class:"activity-item"},[e[62]||(e[62]=s("div",{class:"activity-icon"},[s("i",{class:"fas fa-globe"})],-1)),s("div",R,[s("h4",null,p(l.title),1),s("p",null,p(l.description),1),s("div",G,p(l.date)+" "+p(l.time),1)])]))),128))])])])):m("",!0),t.activeTab==="profile"?(a(),u("div",W,[s("div",X,[e[98]||(e[98]=s("h3",null,"Profile",-1)),s("form",{onSubmit:e[45]||(e[45]=C((...l)=>n.updateUser&&n.updateUser(...l),["prevent"]))},[s("div",Y,[o(s("input",{type:"hidden","onUpdate:modelValue":e[9]||(e[9]=l=>t.leadId=l)},null,512),[[i,t.leadId]]),s("div",Z,[e[64]||(e[64]=s("label",null,"Name:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=l=>t.user.name=l),required:""},null,512),[[i,t.user.name]])]),s("div",J,[e[65]||(e[65]=s("label",null,"Email:",-1)),o(s("input",{type:"email","onUpdate:modelValue":e[11]||(e[11]=l=>t.user.email=l),required:""},null,512),[[i,t.user.email]])]),s("div",K,[e[66]||(e[66]=s("label",null,"Phone:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=l=>t.user.phone=l),required:""},null,512),[[i,t.user.phone]])]),s("div",Q,[e[67]||(e[67]=s("label",null,"Latest Activity:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[13]||(e[13]=l=>t.user.latestActivity=l)},null,512),[[i,t.user.latestActivity]])]),s("div",h,[e[68]||(e[68]=s("label",null,"Activity At:",-1)),o(s("input",{type:"date","onUpdate:modelValue":e[14]||(e[14]=l=>t.user.activityAt=l)},null,512),[[i,t.user.activityAt]])]),s("div",_,[e[69]||(e[69]=s("label",null,"Created On:",-1)),o(s("input",{type:"date","onUpdate:modelValue":e[15]||(e[15]=l=>t.user.createdOn=l)},null,512),[[i,t.user.createdOn]])]),s("div",$,[e[70]||(e[70]=s("label",null,"Tags:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=l=>t.user.tags=l)},null,512),[[i,t.user.tags]])]),s("div",ee,[e[71]||(e[71]=s("label",null,"Stage:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[17]||(e[17]=l=>t.user.stage=l)},null,512),[[i,t.user.stage]])]),s("div",se,[e[72]||(e[72]=s("label",null,"Latest Source:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[18]||(e[18]=l=>t.user.latestSource=l)},null,512),[[i,t.user.latestSource]])]),s("div",te,[e[73]||(e[73]=s("label",null,"Latest SMS:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[19]||(e[19]=l=>t.user.latestSMS=l)},null,512),[[i,t.user.latestSMS]])]),s("div",le,[e[74]||(e[74]=s("label",null,"Latest Email:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[20]||(e[20]=l=>t.user.latestEmail=l)},null,512),[[i,t.user.latestEmail]])]),s("div",oe,[e[75]||(e[75]=s("label",null,"Next Task:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[21]||(e[21]=l=>t.user.nextTask=l)},null,512),[[i,t.user.nextTask]])]),s("div",ne,[e[76]||(e[76]=s("label",null,"Next Appointment:",-1)),o(s("input",{type:"date","onUpdate:modelValue":e[22]||(e[22]=l=>t.user.nextAppointment=l)},null,512),[[i,t.user.nextAppointment]])]),s("div",ie,[e[77]||(e[77]=s("label",null,"New Listing Alerts:",-1)),o(s("input",{type:"checkbox","onUpdate:modelValue":e[23]||(e[23]=l=>t.user.newListingAlerts=l)},null,512),[[b,t.user.newListingAlerts]])]),s("div",ue,[e[78]||(e[78]=s("label",null,"Neighbourhood Alerts:",-1)),o(s("input",{type:"checkbox","onUpdate:modelValue":e[24]||(e[24]=l=>t.user.neighbourhoodAlerts=l)},null,512),[[b,t.user.neighbourhoodAlerts]])]),s("div",re,[e[79]||(e[79]=s("label",null,"Open House Alerts:",-1)),o(s("input",{type:"checkbox","onUpdate:modelValue":e[25]||(e[25]=l=>t.user.openHouseAlerts=l)},null,512),[[b,t.user.openHouseAlerts]])]),s("div",ae,[e[80]||(e[80]=s("label",null,"Price Drop Alerts:",-1)),o(s("input",{type:"checkbox","onUpdate:modelValue":e[26]||(e[26]=l=>t.user.priceDropAlerts=l)},null,512),[[b,t.user.priceDropAlerts]])]),s("div",de,[e[81]||(e[81]=s("label",null,"Active Action Plans:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[27]||(e[27]=l=>t.user.activeActionPlans=l)},null,512),[[i,t.user.activeActionPlans]])]),s("div",pe,[e[82]||(e[82]=s("label",null,"Assigned Market Updates:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[28]||(e[28]=l=>t.user.assignedMarketUpdates=l)},null,512),[[i,t.user.assignedMarketUpdates]])]),s("div",me,[e[83]||(e[83]=s("label",null,"Assigned Newsletters:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[29]||(e[29]=l=>t.user.assignedNewsletters=l)},null,512),[[i,t.user.assignedNewsletters]])]),s("div",ve,[e[84]||(e[84]=s("label",null,"Notes:",-1)),o(s("textarea",{"onUpdate:modelValue":e[30]||(e[30]=l=>t.user.notes=l)},null,512),[[i,t.user.notes]])]),s("div",be,[e[85]||(e[85]=s("label",null,"Date of Birth:",-1)),o(s("input",{type:"date","onUpdate:modelValue":e[31]||(e[31]=l=>t.user.dob=l)},null,512),[[i,t.user.dob]])]),s("div",fe,[e[86]||(e[86]=s("label",null,"Background:",-1)),o(s("textarea",{"onUpdate:modelValue":e[32]||(e[32]=l=>t.user.background=l)},null,512),[[i,t.user.background]])]),s("div",ge,[e[87]||(e[87]=s("label",null,"City:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[33]||(e[33]=l=>t.user.city=l)},null,512),[[i,t.user.city]])]),s("div",ye,[e[88]||(e[88]=s("label",null,"Facebook:",-1)),o(s("input",{type:"url","onUpdate:modelValue":e[34]||(e[34]=l=>t.user.facebook=l)},null,512),[[i,t.user.facebook]])]),s("div",ke,[e[89]||(e[89]=s("label",null,"Instagram:",-1)),o(s("input",{type:"url","onUpdate:modelValue":e[35]||(e[35]=l=>t.user.instagram=l)},null,512),[[i,t.user.instagram]])]),s("div",Ae,[e[90]||(e[90]=s("label",null,"LinkedIn:",-1)),o(s("input",{type:"url","onUpdate:modelValue":e[36]||(e[36]=l=>t.user.linkedin=l)},null,512),[[i,t.user.linkedin]])]),s("div",Te,[e[91]||(e[91]=s("label",null,"WhatsApp:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[37]||(e[37]=l=>t.user.whatsapp=l)},null,512),[[i,t.user.whatsapp]])]),s("div",Ue,[e[92]||(e[92]=s("label",null,"Twitter:",-1)),o(s("input",{type:"url","onUpdate:modelValue":e[38]||(e[38]=l=>t.user.twitter=l)},null,512),[[i,t.user.twitter]])]),s("div",Ve,[e[93]||(e[93]=s("label",null,"House Number:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[39]||(e[39]=l=>t.user.house_number=l),required:""},null,512),[[i,t.user.house_number]])]),s("div",Ce,[e[94]||(e[94]=s("label",null,"Street:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[40]||(e[40]=l=>t.user.street=l),required:""},null,512),[[i,t.user.street]])]),s("div",ce,[e[95]||(e[95]=s("label",null,"City:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[41]||(e[41]=l=>t.user.city=l),required:""},null,512),[[i,t.user.city]])]),s("div",Le,[e[96]||(e[96]=s("label",null,"Province:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[42]||(e[42]=l=>t.user.province=l),required:""},null,512),[[i,t.user.province]])]),s("div",Ie,[e[97]||(e[97]=s("label",null,"Zip Code:",-1)),o(s("input",{type:"text","onUpdate:modelValue":e[43]||(e[43]=l=>t.user.zip_code=l),required:""},null,512),[[i,t.user.zip_code]])])]),s("button",{type:"submit",class:"btn-submit",onClick:e[44]||(e[44]=(...l)=>v.updateLead&&v.updateLead(...l))},"Update")],32)])])):m("",!0),t.activeTab==="analytics"?(a(),u("div",we,[s("div",Se,[s("ul",null,[s("li",{class:r({active:n.selectedTab==="for-sale"}),onClick:e[46]||(e[46]=l=>n.selectedTab="for-sale")},"For Sale",2),s("li",{class:r({active:n.selectedTab==="sold"}),onClick:e[47]||(e[47]=l=>n.selectedTab="sold")},"Sold",2),s("li",{class:r({active:n.selectedTab==="rent"}),onClick:e[48]||(e[48]=l=>n.selectedTab="rent")},"Rent",2),s("li",{class:r({active:n.selectedTab==="leased"}),onClick:e[49]||(e[49]=l=>n.selectedTab="leased")},"Leased",2),s("li",{class:r({active:n.selectedTab==="pre-construction"}),onClick:e[50]||(e[50]=l=>n.selectedTab="pre-construction")},"Pre-Construction",2)])]),s("div",Me,[s("div",Ne,[n.selectedTab==="for-sale"?(a(),u("div",xe,e[99]||(e[99]=[s("h4",null,"For Sale Analytics Content",-1)]))):m("",!0),n.selectedTab==="sold"?(a(),u("div",Pe,e[100]||(e[100]=[s("h4",null,"Sold Analytics Content",-1)]))):m("",!0),n.selectedTab==="rent"?(a(),u("div",Ee,e[101]||(e[101]=[s("h4",null,"Rent Analytics Content",-1)]))):m("",!0),n.selectedTab==="leased"?(a(),u("div",ze,e[102]||(e[102]=[s("h4",null,"Leased Analytics Content",-1)]))):m("",!0),n.selectedTab==="pre-construction"?(a(),u("div",De,e[103]||(e[103]=[s("h4",null,"Pre-Construction Analytics Content",-1)]))):m("",!0)])])])):m("",!0),e[105]||(e[105]=s("div",{class:"fab"},[s("button",{class:"fab-btn"},[s("i",{class:"fas fa-plus"})])],-1)),s("div",Fe,[s("button",{class:"fab-btn",onClick:e[51]||(e[51]=(...l)=>n.toggleActions&&n.toggleActions(...l))},[n.showActions?(a(),u("i",qe)):(a(),u("i",Be))]),c(I,{name:"fade",tag:"div"},{default:L(()=>[n.showActions?(a(),u("div",je,e[104]||(e[104]=[s("button",{class:"fab-action",title:"Call Log"},[s("i",{class:"fas fa-phone"})],-1),s("button",{class:"fab-action",title:"SMS From Smart Number"},[s("i",{class:"fas fa-comment-dots"})],-1),s("button",{class:"fab-action",title:"Send Email"},[s("i",{class:"fas fa-envelope"})],-1),s("button",{class:"fab-action",title:"Add Note"},[s("i",{class:"fas fa-clipboard"})],-1),s("button",{class:"fab-action",title:"Add Action Plan"},[s("i",{class:"fas fa-project-diagram"})],-1),s("button",{class:"fab-action",title:"Add Task"},[s("i",{class:"fas fa-tasks"})],-1),s("button",{class:"fab-action",title:"Lead Transfer"},[s("i",{class:"fas fa-random"})],-1)]))):m("",!0)]),_:1})])])}const Ge=A(w,[["render",He],["__scopeId","data-v-7a3cf225"]]);export{Ge as default};
