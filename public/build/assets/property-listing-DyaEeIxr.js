import{dh as ne,_ as z,r as k,b as V,w as U,o as l,l as o,j as e,L as I,bo as B,ct as Y,F as _,Z as w,k as r,P as $,$ as M,Y as G,u as c,n as T,X as A,R as de,cB as re,bp as ce,h as q}from"./main-FZfz1PmL.js";import{M as R}from"./bootstrap.min-DQoSNxk7.js";import{a as j}from"./axios-CdtiCRuU.js";const H=ne("property",{state:()=>({properties:[],loadingInitial:!1,loadingMore:!1,selectedPropertyDetails:null,detailsLoading:!1,availableFilters:[],appliedFilters:{},filters:{page:1,sortBy:0,search:"",listingType:"sale",nh:["Brampton"]},hasMorePages:!0,error:null}),actions:{mapProperty(d){let p="https://placehold.co/100x100";return d.images&&d.images.directory&&(p=`${d.images.directory}Photo${d.ml_num}-1.jpeg`),{label:d.sale_lease,labelColor:d.sale_lease==="For Sale"?"#1F7B4A":"#FE043C",title:d.addr,address:d.city+", "+d.province,price:`$${d.listed_price.toLocaleString()}`,beds:d.bed,baths:d.bath,size:d.sqft?d.sqft+" Sqft":"N/A",type:d.building_type,mainImage:p,images:[p],status:d.sale_lease,addedDate:new Date(d.added_ts).toLocaleDateString(),listedPrice:`$${d.listed_price.toLocaleString()}`,mlsNumber:d.ml_num,propertyType:d.prop_type,buildingStyle:d.building_type,sizeSqft:d.sqft,lotDepth:"N/A",listedBy:d.brokerage,source:"VOW",age:"N/A",area:d.area,community:d.community,bedrooms:d.bed,bathrooms:d.bath,slug:d.slug}},async fetchProperties(d=!1){d||(this.loadingInitial=!0),this.error=null;try{const p=new URLSearchParams({page:this.filters.page,sort_by:this.filters.sortBy,search:this.filters.search,listing_type:this.filters.listingType,nh:JSON.stringify(this.filters.nh),...this.appliedFilters}),i=await j.get(`https://api.vow.v1.agentroof.ca/api/get-filter-properties?${p.toString()}`),v=i.data.data.data.map(this.mapProperty);d?this.properties=[...this.properties,...v]:this.properties=v;const f=i.data.data.current_page,x=i.data.data.last_page;this.hasMorePages=f<x}catch(p){this.error="Failed to fetch properties.",console.error("Error fetching property data:",p)}finally{this.loadingInitial=!1}},async loadMoreProperties(){if(!(!this.hasMorePages||this.loadingMore)){this.loadingMore=!0,this.filters.page++;try{await this.fetchProperties(!0)}catch(d){console.error("Error loading more properties:",d)}finally{this.loadingMore=!1}}},async fetchFilterOptions(){try{const d=await j.get(`https://api.vow.v1.agentroof.ca/api/get-crm-filters?from=listing&listing=${this.filters.listingType}`);this.availableFilters=d.data.data}catch(d){console.error("Error fetching filter options:",d)}},async applyFilters(d){this.appliedFilters=d,this.filters.page=1,this.hasMorePages=!0,await this.fetchProperties(!1)},async handleListingTypeChange(){this.filters.page=1,this.hasMorePages=!0,this.appliedFilters={},await this.fetchFilterOptions(),await this.fetchProperties(!1)},async clearAllFilters(){this.filters.search="",this.filters.page=1,this.appliedFilters={},this.hasMorePages=!0,await this.fetchProperties(!1)},async fetchPropertyDetails(d){this.detailsLoading=!0,this.selectedPropertyDetails=null;try{const p={value:d,view_type:"crm"},i=await j.post("https://api.vow.v1.agentroof.ca/api/get-property-details",p);this.selectedPropertyDetails=i.data.data}catch(p){console.error("Error fetching property details:",p),this.selectedPropertyDetails=null}finally{this.detailsLoading=!1}}}}),ue={class:"modal fade modal-right",id:"filterModal",tabindex:"-1","aria-labelledby":"filterModalLabel","aria-hidden":"true"},pe={class:"modal-dialog"},me={class:"modal-content"},ve={class:"modal-body"},be={class:"filter-section mb-4 price-range-container"},fe={class:"d-flex justify-content-between gap-3 mb-2"},ge={class:"form-group flex-grow-1"},he={class:"form-group flex-grow-1"},ye={class:"dual-range-slider-wrap"},_e={key:0},we={class:"d-flex justify-content-between align-items-center mb-2"},xe={class:"form-label fw-bold mb-0"},Pe={class:"selected-tags d-flex flex-wrap gap-1 mb-2"},$e=["onClick"],ke={class:"dropdown border rounded p-2"},Se=["onClick"],De={key:0,class:"dropdown-menu show w-100 mt-2 p-2",style:{"max-block-size":"200px","overflow-y":"auto"}},Me=["onClick"],Le={key:1},Fe={class:"form-label fw-bold d-block"},Ce=["onUpdate:modelValue","id"],Ie={value:"",disabled:""},Ee=["value"],Be={class:"filter-section mb-4"},Ae={class:"d-flex flex-wrap gap-2"},Ve=["onClick"],Te={class:"filter-section mb-4"},Ne={class:"d-flex flex-wrap gap-2"},Oe=["onClick"],Ue={__name:"FilterModal",setup(d,{expose:p}){const i=H(),v=k({min:0,max:100}),f=k({min:null,max:5e6}),x=[0,2e5,55e4,95e4,2e6,4e6,5e6],L=s=>{const t=x.length-1,a=100/t,b=Math.floor(s/a),P=x[b],E=x[Math.min(b+1,t)],O=s%a/a;return Math.round(P+(E-P)*O)},F=s=>{const t=x.length-1,a=100/t;for(let b=0;b<t;b++){const P=x[b],E=x[b+1];if(s>=P&&s<=E){if(P===E)return b*a;const O=s-P,oe=E-P,ie=O/oe;return b*a+ie*a}}return s<=x[0]?0:100},S=V({get:()=>f.value.min?`$${f.value.min.toLocaleString()}`:"",set:s=>{const t=s.replace(/[$,]/g,"");f.value.min=t?parseInt(t):null}}),n=V({get:()=>f.value.max?`$${f.value.max.toLocaleString()}`:"",set:s=>{const t=s.replace(/[$,]/g,"");f.value.max=t?parseInt(t):null}});U(v,s=>{f.value.min=L(s.min),f.value.max=L(s.max)},{deep:!0});const u=()=>{if(f.value.min>f.value.max){const s=f.value.min;f.value.min=f.value.max,f.value.max=s}v.value.min=F(f.value.min),v.value.max=F(f.value.max)},m=()=>{v.value.min>v.value.max&&(v.value.min=v.value.max)},g=()=>{v.value.max<v.value.min&&(v.value.max=v.value.min)},h=V(()=>{const s=v.value.min,t=v.value.max;return{left:`${s}%`,width:`${t-s}%`}}),y=k({}),D=k(null),C=k(null),N=k({}),J=k([{value:"1",label:"1+"},{value:"2",label:"2+"},{value:"3",label:"3+"},{value:"4",label:"4+"},{value:"5",label:"5+"},{value:"6",label:"6+"}]),W=k([{value:"1",label:"1+"},{value:"2",label:"2+"},{value:"3",label:"3+"},{value:"4",label:"4+"},{value:"5",label:"5+"},{value:"6",label:"6+"}]);U(()=>i.availableFilters,s=>{y.value={},s.forEach(t=>{["property_type","building_type","building_style"].includes(t.name)&&(y.value[t.name]=[])})},{deep:!0,immediate:!0}),U(()=>i.appliedFilters,s=>{y.value={},D.value=null,C.value=null;for(const t in s)["bed","bath"].includes(t)?(t==="bed"&&(D.value=s[t]),t==="bath"&&(C.value=s[t])):y.value[t]=s[t]},{deep:!0,immediate:!0});const X=()=>{const s=document.getElementById("filterModal");s&&new R(s).show()},K=()=>{const s=document.getElementById("filterModal");if(s){const t=R.getInstance(s);t&&t.hide()}},Z=async()=>{const s={...y.value};f.value.min!==null&&(s.min_price=f.value.min),f.value.max!==null&&(s.max_price=f.value.max),D.value&&(s.bed=D.value),C.value&&(s.bath=C.value),await i.applyFilters(s),K()},Q=()=>{y.value={},D.value=null,C.value=null,f.value.min=null,f.value.max=5e6,v.value.min=0,v.value.max=100,i.clearAllFilters(),K()},ee=(s,t)=>{const a=i.availableFilters.find(P=>P.name===s),b=a==null?void 0:a.options.find(P=>P.value===t);return(b==null?void 0:b.label)||t},te=s=>{N.value[s]=!N.value[s]},se=s=>s.options.filter(t=>{var a;return!((a=y.value[s.name])!=null&&a.includes(t.value))}),ae=(s,t)=>{y.value[s]||(y.value[s]=[]),y.value[s].push(t)},le=(s,t)=>{y.value[s]=y.value[s].filter(a=>a!==t)};return p({show:X}),(s,t)=>(l(),o("div",ue,[e("div",pe,[e("div",me,[t[9]||(t[9]=e("div",{class:"modal-header"},[e("button",{type:"button",class:"btn btn-link p-0","data-bs-dismiss":"modal","aria-label":"Close"},[e("i",{class:"fa-solid fa-arrow-left fs-4"})]),e("h2",{class:"modal-title ms-2",id:"filterModalLabel"},"Filter")],-1)),e("div",ve,[e("div",be,[t[5]||(t[5]=e("label",{class:"form-label fw-bold d-block"},"Price Range",-1)),e("div",fe,[e("div",ge,[I(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=a=>S.value=a),onBlur:u},null,544),[[B,S.value]])]),e("div",he,[I(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=a=>n.value=a),onBlur:u},null,544),[[B,n.value]])])]),e("div",ye,[I(e("input",{type:"range",min:"0",max:"100",step:"1","onUpdate:modelValue":t[2]||(t[2]=a=>v.value.min=a),onInput:m},null,544),[[B,v.value.min,void 0,{number:!0}]]),I(e("input",{type:"range",min:"0",max:"100",step:"1","onUpdate:modelValue":t[3]||(t[3]=a=>v.value.max=a),onInput:g},null,544),[[B,v.value.max,void 0,{number:!0}]]),t[4]||(t[4]=e("div",{class:"slider-track"},null,-1)),e("div",{class:"range-fill",style:Y(h.value)},null,4)]),t[6]||(t[6]=e("div",{class:"d-flex justify-content-between small text-muted mt-2"},[e("span",null,"Min"),e("span",null,"200K"),e("span",null,"550K"),e("span",null,"950K"),e("span",null,"2M"),e("span",null,"4M"),e("span",null,"Max")],-1))]),(l(!0),o(_,null,w(c(i).availableFilters,a=>(l(),o("div",{key:a.name,class:"filter-section mb-4"},[["property_type","building_type","building_style"].includes(a.name)?(l(),o("div",_e,[e("div",we,[e("label",xe,r(a.label),1)]),e("div",Pe,[(l(!0),o(_,null,w(y.value[a.name],(b,P)=>(l(),o("span",{key:P,class:"badge bg-primary d-flex align-items-center"},[$(r(ee(a.name,b))+" ",1),e("button",{type:"button",class:"btn-close btn-close-white ms-1",onClick:E=>le(a.name,b)},null,8,$e)]))),128))]),e("div",ke,[e("div",{class:"dropdown-toggle w-100 text-muted small cursor-pointer",onClick:b=>te(a.name)}," Select "+r(a.label),9,Se),N.value[a.name]?(l(),o("div",De,[(l(!0),o(_,null,w(se(a),b=>(l(),o("div",{key:b.value,class:"dropdown-item",onClick:P=>ae(a.name,b.value)},r(b.label),9,Me))),128))])):M("",!0)])])):a.type==="single-select"?(l(),o("div",Le,[e("label",Fe,r(a.label),1),I(e("select",{class:"form-select","onUpdate:modelValue":b=>y.value[a.name]=b,id:a.name},[e("option",Ie,"Select "+r(a.label),1),(l(!0),o(_,null,w(a.options,b=>(l(),o("option",{key:b.value,value:b.value},r(b.label),9,Ee))),128))],8,Ce),[[G,y.value[a.name]]])])):M("",!0)]))),128)),e("div",Be,[t[7]||(t[7]=e("label",{class:"form-label fw-bold d-block"},"Bedrooms",-1)),e("div",Ae,[(l(!0),o(_,null,w(J.value,a=>(l(),o("button",{key:a.value,type:"button",class:T(["btn btn-outline-secondary",{"active-filter":D.value===a.value}]),onClick:b=>D.value=a.value},r(a.label),11,Ve))),128))])]),e("div",Te,[t[8]||(t[8]=e("label",{class:"form-label fw-bold d-block"},"Bathrooms",-1)),e("div",Ne,[(l(!0),o(_,null,w(W.value,a=>(l(),o("button",{key:a.value,type:"button",class:T(["btn btn-outline-secondary",{"active-filter":C.value===a.value}]),onClick:b=>C.value=a.value},r(a.label),11,Oe))),128))])])]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary",onClick:Q},"Reset"),e("button",{type:"button",class:"btn btn-primary",onClick:Z},"Apply")])])])]))}},je=z(Ue,[["__scopeId","data-v-05d8b31f"]]),Re={class:"modal fade",id:"propertyDetailsModal",tabindex:"-1","aria-labelledby":"propertyDetailsModalLabel","aria-hidden":"true"},ze={class:"modal-dialog modal-xl"},He={class:"modal-content"},Ke={class:"modal-body"},qe={key:0,class:"text-center py-5"},Ye={key:1,class:"text-center py-5"},Ge={key:2},Je={id:"propertySlider",class:"carousel slide mb-4","data-bs-ride":"carousel"},We={class:"carousel-indicators"},Xe=["data-bs-slide-to","aria-current","aria-label"],Ze={class:"carousel-inner rounded-3"},Qe=["src"],et={class:"property-overview mb-4"},tt={class:"d-flex justify-content-between align-items-center mb-3"},st={class:"d-flex align-items-center gap-2"},at={class:"badge bg-success"},lt={class:"text-muted small"},ot={class:"text-muted small"},it={class:"text-end"},nt={class:"mb-0 text-primary fw-bold"},dt={class:"fw-bold"},rt={class:"d-flex align-items-center gap-3 text-muted mb-3"},ct={class:"row details-section mb-4"},ut={class:"col-md-6 mb-3"},pt={class:"card p-3 h-100"},mt={class:"row"},vt={class:"mb-0 small text-muted"},bt={class:"mb-0 fw-bold"},ft={class:"col-md-6 mb-3"},gt={class:"card p-3 h-100"},ht={class:"row details-section mb-4"},yt={class:"card p-3 h-100"},_t={class:"fw-bold mb-3"},wt={class:"text-muted small"},xt={class:"fw-bold"},Pt={key:0,class:"card p-3 mb-4"},$t={class:"mb-1 fw-bold"},kt={class:"text-muted small"},St={class:"mb-0 small"},Dt={class:"badge bg-light text-dark"},Mt={key:0,class:"text-center mt-3"},Lt={key:0},Ft={key:1},Ct={key:1,class:"card p-3 mb-4"},It={class:"mb-0 fw-bold"},Et={class:"badge bg-secondary"},Bt={class:"mb-0 small text-muted"},At={class:"mb-0 small text-muted"},Vt={key:2,class:"similar-properties-section"},Tt={class:"similar-properties-slider"},Nt={class:"d-flex overflow-auto gap-3 pb-3"},Ot=["src"],Ut={class:"card-body"},jt={class:"card-title"},Rt={class:"card-text small text-muted"},zt={class:"fw-bold text-primary"},Ht={__name:"PropertyDetailsModal",setup(d,{expose:p}){const i=H(),v=k(!1);p({show:()=>{const u=document.getElementById("propertyDetailsModal");u&&new R(u).show()}});const x=(u,m)=>u&&u.directory&&u.ml_num?`${u.directory}Photo${u.ml_num}-${m}.jpeg`:"https://placehold.co/100x100",L=u=>u?`$${u.toLocaleString()}`:"N/A",F=u=>u?new Date(u).toLocaleDateString():"N/A",S=()=>{v.value=!v.value},n=V(()=>!i.selectedPropertyDetails||!i.selectedPropertyDetails.rooms?[]:v.value?i.selectedPropertyDetails.rooms:i.selectedPropertyDetails.rooms.slice(0,2));return(u,m)=>(l(),o("div",Re,[e("div",ze,[e("div",He,[m[12]||(m[12]=A('<div class="modal-header" data-v-1ed585de><div class="d-flex w-100 justify-content-between align-items-center" data-v-1ed585de><h5 class="modal-title" id="propertyDetailsModalLabel" data-v-1ed585de>Property Details</h5><div class="header-actions" data-v-1ed585de><button class="btn btn-sm btn-primary" data-v-1ed585de><i class="fa-solid fa-plus" data-v-1ed585de></i> Add to Selection</button><button class="btn btn-sm btn-outline-primary" data-v-1ed585de><i class="fa-solid fa-envelope" data-v-1ed585de></i> Email to</button><button class="btn btn-sm btn-outline-primary" data-v-1ed585de><i class="fa-solid fa-comment-sms" data-v-1ed585de></i> SMS to</button></div><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-v-1ed585de></button></div></div>',1)),e("div",Ke,[c(i).detailsLoading?(l(),o("div",qe,m[0]||(m[0]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)]))):c(i).selectedPropertyDetails?(l(),o("div",Ge,[e("div",Je,[e("div",We,[(l(!0),o(_,null,w(c(i).selectedPropertyDetails.images.images,(g,h)=>(l(),o("button",{key:h,type:"button","data-bs-target":"#propertySlider","data-bs-slide-to":h,class:T({active:h===0}),"aria-current":h===0?"true":null,"aria-label":"Slide "+(h+1)},null,10,Xe))),128))]),e("div",Ze,[(l(!0),o(_,null,w(c(i).selectedPropertyDetails.images.images,(g,h)=>(l(),o("div",{key:h,class:T(["carousel-item",{active:h===0}])},[e("img",{src:x(c(i).selectedPropertyDetails.images,g),class:"d-block w-100",alt:"Property Image"},null,8,Qe)],2))),128))]),m[2]||(m[2]=A('<button class="carousel-control-prev" type="button" data-bs-target="#propertySlider" data-bs-slide="prev" data-v-1ed585de><span class="carousel-control-prev-icon" aria-hidden="true" data-v-1ed585de></span><span class="visually-hidden" data-v-1ed585de>Previous</span></button><button class="carousel-control-next" type="button" data-bs-target="#propertySlider" data-bs-slide="next" data-v-1ed585de><span class="carousel-control-next-icon" aria-hidden="true" data-v-1ed585de></span><span class="visually-hidden" data-v-1ed585de>Next</span></button>',2))]),e("div",et,[e("div",tt,[e("div",st,[e("span",at,r(c(i).selectedPropertyDetails.common.sale_lease),1),e("span",lt,"Added "+r(c(i).selectedPropertyDetails.common.added_ts),1),e("span",ot,r(c(i).selectedPropertyDetails.common.property_type),1)]),e("div",it,[e("h4",nt,r(L(c(i).selectedPropertyDetails.common.listed_price)),1)])]),e("h3",dt,r(c(i).selectedPropertyDetails.common.address.addr),1),e("div",rt,[e("span",null,[m[3]||(m[3]=e("i",{class:"fa-solid fa-bed me-1"},null,-1)),$(" "+r(c(i).selectedPropertyDetails.common.bed)+"+"+r(c(i).selectedPropertyDetails.common.bed_plus)+" Beds",1)]),e("span",null,[m[4]||(m[4]=e("i",{class:"fa-solid fa-bath me-1"},null,-1)),$(" "+r(c(i).selectedPropertyDetails.common.bath)+" Baths",1)]),e("span",null,[m[5]||(m[5]=e("i",{class:"fa-solid fa-car me-1"},null,-1)),$(" "+r(c(i).selectedPropertyDetails.common.garage_space||"N/A")+" Garages",1)])]),m[6]||(m[6]=e("hr",null,null,-1))]),e("div",ct,[e("div",ut,[e("div",pt,[m[7]||(m[7]=e("h5",{class:"fw-bold mb-3"},"Key Facts",-1)),e("div",mt,[(l(!0),o(_,null,w(c(i).selectedPropertyDetails.facts,(g,h)=>(l(),o("div",{key:h,class:"col-sm-6 mb-2"},[e("p",vt,r(g.key),1),e("p",bt,r(g.value),1)]))),128))])])]),e("div",ft,[e("div",gt,[m[8]||(m[8]=e("h5",{class:"fw-bold mb-3"},"Description",-1)),e("p",null,r(c(i).selectedPropertyDetails.description[0].value),1)])])]),e("div",ht,[(l(!0),o(_,null,w(c(i).selectedPropertyDetails.details,(g,h)=>(l(),o("div",{class:"col-md-4 mb-3",key:h},[e("div",yt,[e("h5",_t,r(g.key),1),(l(!0),o(_,null,w(g.value,(y,D)=>(l(),o("div",{key:D,class:"d-flex justify-content-between mb-1"},[e("span",wt,r(y.key)+":",1),e("span",xt,r(y.value),1)]))),128))])]))),128))]),c(i).selectedPropertyDetails.rooms&&c(i).selectedPropertyDetails.rooms.length>0?(l(),o("div",Pt,[m[9]||(m[9]=e("h5",{class:"fw-bold mb-3"},"Rooms",-1)),(l(!0),o(_,null,w(n.value,(g,h)=>(l(),o("div",{key:h,class:"room-item p-2 mb-2 border rounded"},[e("p",$t,[$(r(g.type)+" ",1),e("span",kt,"("+r(g.dimension)+")",1)]),e("p",St,r(g.description),1),e("span",Dt,r(g.level),1)]))),128)),c(i).selectedPropertyDetails.rooms.length>2?(l(),o("div",Mt,[e("button",{onClick:S,class:"btn btn-link"},[v.value?(l(),o("span",Ft,"View less")):(l(),o("span",Lt,"View more"))])])):M("",!0)])):M("",!0),c(i).selectedPropertyDetails.histories&&c(i).selectedPropertyDetails.histories.length>0?(l(),o("div",Ct,[m[10]||(m[10]=e("h5",{class:"fw-bold mb-3"},"Listing History",-1)),(l(!0),o(_,null,w(c(i).selectedPropertyDetails.histories,(g,h)=>(l(),o("div",{key:h,class:"history-item p-2 mb-2 border rounded"},[e("p",It,[$(r(L(g.price))+" ",1),e("span",Et,r(g.status),1)]),e("p",Bt,"List: "+r(F(g.date)),1),e("p",At,"Listed Brokerage: "+r(g.brokerage),1)]))),128))])):M("",!0),c(i).selectedPropertyDetails.similar_properties&&c(i).selectedPropertyDetails.similar_properties.length>0?(l(),o("div",Vt,[m[11]||(m[11]=e("h5",{class:"fw-bold mb-3"},"Similar Properties",-1)),e("div",Tt,[e("div",Nt,[(l(!0),o(_,null,w(c(i).selectedPropertyDetails.similar_properties,(g,h)=>(l(),o("div",{key:h,class:"similar-card card flex-shrink-0",style:{"inline-size":"250px"}},[e("img",{src:x(g.images,g.images.images),class:"card-img-top",alt:"Similar Property"},null,8,Ot),e("div",Ut,[e("h6",jt,r(g.addr),1),e("p",Rt,r(g.city),1),e("span",zt,r(L(g.listed_price)),1)])]))),128))])])])):M("",!0)])):(l(),o("div",Ye,m[1]||(m[1]=[e("p",{class:"text-muted"},"Property details not available.",-1)])))])])])]))}},Kt=z(Ht,[["__scopeId","data-v-1ed585de"]]),qt={class:"page-flex"},Yt={class:"main-wrapper"},Gt={class:"main-content-area"},Jt={class:"container-fluid"},Wt={class:"header-section"},Xt={class:"header-filters p-3 rounded d-flex align-items-center flex-wrap gap-3"},Zt={class:"filter-group d-flex align-items-center flex-grow-1 gap-2"},Qt={class:"dropdown-select-container"},es={class:"search-input-container flex-grow-1 position-relative"},ts={key:0,class:"text-center my-4"},ss={key:1,class:"alert alert-danger text-center my-4"},as={key:2,class:"text-center my-5"},ls={key:3,class:"row property-cards-area g-3 mt-3"},os=["onClick"],is={class:"list-cart-label"},ns={class:"list-card-body-cnt"},ds={class:"property-img"},rs=["src"],cs={class:"property-details"},us={class:"text-muted"},ps={class:"property-features-list list-unstyled d-flex gap-3"},ms={key:0,class:"col-12 text-center text-muted my-5"},vs={key:1,class:"col-12 text-center my-4"},bs={__name:"property-listing",setup(d){const p=H(),i=k(null),v=k(null),f=k(null),x=async S=>{const n=S.slug;await p.fetchPropertyDetails(n),p.selectedPropertyDetails?i.value&&i.value.show():alert("Property details not available.")},L=()=>{v.value&&v.value.show()},F=()=>{const S=window.innerHeight+window.scrollY,n=document.documentElement.offsetHeight;S>=n-200&&p.loadMoreProperties()};return de(()=>{p.handleListingTypeChange(),window.addEventListener("scroll",F)}),re(()=>{window.removeEventListener("scroll",F)}),(S,n)=>(l(),o("div",qt,[e("div",Yt,[e("main",Gt,[e("div",Jt,[e("div",Wt,[n[8]||(n[8]=A('<div class="header-top d-flex justify-content-between align-items-center mb-3" data-v-1e824996><div class="d-flex align-items-center gap-2" data-v-1e824996><a href="#" class="property-settings text-secondary fs-5" data-v-1e824996><i class="fa-solid fa-gear" data-v-1e824996></i></a><h2 class="mb-0" data-v-1e824996>Property Listings</h2></div><div class="header-actions d-flex align-items-center gap-2" data-v-1e824996><button class="btn clear-btn text-danger fw-bold" data-v-1e824996><i class="fa-solid fa-xmark" data-v-1e824996></i> Clear All </button><div class="dropdown" data-v-1e824996><button class="btn btn-action dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" data-v-1e824996><i class="fa-solid fa-envelope me-1" data-v-1e824996></i> Email to </button><ul class="dropdown-menu" data-v-1e824996><li data-v-1e824996><a class="dropdown-item" href="#" data-v-1e824996><i class="fa-solid fa-user me-2" data-v-1e824996></i> Email to Lead</a></li><li data-v-1e824996><a class="dropdown-item" href="#" data-v-1e824996><i class="fa-solid fa-tags me-2" data-v-1e824996></i> Email to Tag</a></li><li data-v-1e824996><a class="dropdown-item" href="#" data-v-1e824996><i class="fa-solid fa-calendar-alt me-2" data-v-1e824996></i> Email to Stage</a></li><li data-v-1e824996><a class="dropdown-item" href="#" data-v-1e824996><i class="fa-solid fa-globe me-2" data-v-1e824996></i> Email to Source</a></li></ul></div><div class="dropdown" data-v-1e824996><button class="btn btn-action dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" data-v-1e824996><i class="fa-solid fa-comment-sms me-1" data-v-1e824996></i> SMS to </button><ul class="dropdown-menu" data-v-1e824996><li data-v-1e824996><a class="dropdown-item" href="#" data-v-1e824996><i class="fa-solid fa-user me-2" data-v-1e824996></i> SMS to Lead</a></li><li data-v-1e824996><a class="dropdown-item" href="#" data-v-1e824996><i class="fa-solid fa-tags me-2" data-v-1e824996></i> SMS to Tag</a></li><li data-v-1e824996><a class="dropdown-item" href="#" data-v-1e824996><i class="fa-solid fa-calendar-alt me-2" data-v-1e824996></i> SMS to Stage</a></li><li data-v-1e824996><a class="dropdown-item" href="#" data-v-1e824996><i class="fa-solid fa-globe me-2" data-v-1e824996></i> SMS to Source</a></li></ul></div><button class="btn btn-danger selected-properties-btn" data-v-1e824996> Selected properties </button></div></div>',1)),e("div",Xt,[e("div",Zt,[e("div",Qt,[I(e("select",{class:"form-select","onUpdate:modelValue":n[0]||(n[0]=u=>c(p).filters.listingType=u),onChange:n[1]||(n[1]=(...u)=>c(p).handleListingTypeChange&&c(p).handleListingTypeChange(...u))},n[4]||(n[4]=[A('<option value="sale" data-v-1e824996>For Sale</option><option value="rent" data-v-1e824996>For Rent</option><option value="sold" data-v-1e824996>Recently Sold</option><option value="open-house" data-v-1e824996>Open House</option><option value="leased" data-v-1e824996>Leased</option>',5)]),544),[[G,c(p).filters.listingType]])]),e("div",es,[I(e("input",{type:"text",class:"form-control",placeholder:"Address | MLS Num | City | Neighbourhood","onUpdate:modelValue":n[2]||(n[2]=u=>c(p).filters.search=u),onKeyup:n[3]||(n[3]=ce(u=>c(p).applyFilters(c(p).filters.search),["enter"]))},null,544),[[B,c(p).filters.search]]),n[5]||(n[5]=e("span",{class:"search-icon"},[e("i",{class:"fa-solid fa-magnifying-glass"})],-1))])]),e("div",{class:"filter-sort-group d-flex align-items-center gap-2"},[e("button",{class:"btn btn-light-blue filter-btn",onClick:L},n[6]||(n[6]=[e("i",{class:"fa-solid fa-sliders me-1"},null,-1),$(" Filters ")])),n[7]||(n[7]=A('<div class="dropdown" data-v-1e824996><button class="btn btn-light-blue dropdown-toggle short-btn" type="button" data-bs-toggle="dropdown" aria-expanded="false" data-v-1e824996><i class="fa-solid fa-arrow-down-short-wide me-1" data-v-1e824996></i> Short </button><ul class="dropdown-menu" data-v-1e824996><li data-v-1e824996><a class="dropdown-item" href="#" data-v-1e824996>Price: High to Low</a></li><li data-v-1e824996><a class="dropdown-item" href="#" data-v-1e824996>Price: Low to High</a></li><li data-v-1e824996><a class="dropdown-item" href="#" data-v-1e824996>Date: Newest</a></li></ul></div>',1))])])]),c(p).loading?(l(),o("div",ts,n[9]||(n[9]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)]))):c(p).error?(l(),o("div",ss,r(c(p).error),1)):M("",!0),c(p).loadingInitial?(l(),o("div",as,n[10]||(n[10]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)]))):(l(),o("div",ls,[(l(!0),o(_,null,w(c(p).properties,(u,m)=>(l(),o("div",{key:u.ar_uid||m,class:"col-xl-4 col-lg-6 col-md-6 col-sm-6"},[e("div",{class:"property-list-card",onClick:g=>x(u)},[e("div",is,[e("span",{style:Y({background:u.labelColor})},r(u.label),5)]),e("div",ns,[e("div",ds,[e("img",{src:u.mainImage,alt:"Property Image"},null,8,rs)]),e("div",cs,[e("h4",null,r(u.title),1),e("h6",us,[n[11]||(n[11]=e("i",{class:"fa-solid fa-location-dot"},null,-1)),$(" "+r(u.address),1)]),e("h5",null,[n[12]||(n[12]=$("From ")),e("em",null,r(u.price),1)])])]),e("ul",ps,[e("li",null,[n[13]||(n[13]=e("i",{class:"fa-solid fa-bed text-primary"},null,-1)),$(" "+r(u.beds),1)]),e("li",null,[n[14]||(n[14]=e("i",{class:"fa-solid fa-bath text-info"},null,-1)),$(" "+r(u.baths),1)]),e("li",null,[n[15]||(n[15]=e("i",{class:"fa-solid fa-ruler-combined text-success"},null,-1)),$(" "+r(u.size),1)]),e("li",null,[n[16]||(n[16]=e("i",{class:"fa-solid fa-building text-secondary"},null,-1)),$(" "+r(u.type),1)])])],8,os)]))),128)),c(p).properties.length===0&&!c(p).loading?(l(),o("div",ms," No properties found matching your criteria. ")):M("",!0),c(p).loadingMore?(l(),o("div",vs,n[17]||(n[17]=[e("div",{class:"spinner-border text-secondary",role:"status"},[e("span",{class:"visually-hidden"},"Loading more...")],-1)]))):M("",!0)]))])])]),q(Kt,{property:f.value,ref_key:"propertyDetailsModal",ref:i},null,8,["property"]),q(je,{ref_key:"filterModal",ref:v},null,512)]))}},ys=z(bs,[["__scopeId","data-v-1e824996"]]);export{ys as default};
