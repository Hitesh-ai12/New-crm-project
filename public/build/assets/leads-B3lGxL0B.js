/* empty css              */import{a as ti}from"./axios-CdtiCRuU.js";import{S as $a}from"./sweetalert2.all-DpgyaJOg.js";import{bo as aQ,bp as iQ,bq as lQ,br as cQ,bs as uQ,bt as dQ,bu as fQ,F as Ha,bv as mQ,bw as gQ,bx as hQ,by as pQ,bi as lJ,bz as vQ,bA as bQ,aZ as yQ,bB as CQ,bC as SQ,bD as xQ,bE as wQ,bF as EQ,bG as TQ,bH as AQ,aP as OQ,bI as kQ,bJ as DQ,b as SB,bK as MQ,f as OK,Y as jo,m as mn,k as he,bL as RQ,bM as PQ,bN as NQ,bO as IQ,bP as BQ,bQ as cJ,Q as Hi,j as uJ,c as LQ,bR as FQ,R as _Q,bS as $Q,bT as HQ,bU as VQ,bV as zQ,bW as UQ,bX as ZQ,bY as WQ,bZ as jQ,b_ as GQ,b$ as KQ,bd as YQ,c0 as XQ,c1 as JQ,c2 as QQ,c3 as qQ,c4 as eq,X as tq,c5 as nq,c6 as oq,c7 as sq,c8 as rq,c9 as aq,ca as iq,cb as lq,cc as cq,cd as uq,aN as dq,ce as fq,cf as mq,cg as gq,ch as hq,i as pq,ci as vq,cj as bq,ck as yq,cl as Cq,cm as Sq,cn as xq,O as wq,av as ZA,n as Ur,co as Eq,cp as Tq,cq as Aq,cr as Oq,T as kq,aI as Dq,cs as Mq,ct as Rq,S as dJ,cu as Pq,cv as Nq,as as Iq,cw as Bq,cx as Lq,cy as Fq,cz as _q,o as ln,cA as $q,aM as Hq,cB as Vq,cC as zq,cD as Uq,bg as Zq,a as Wq,r as In,cE as jq,cF as Gq,Z as vi,p as Kq,e as kK,an as Yq,q as Xq,cG as Jq,cH as Qq,cI as qq,cJ as eee,cK as tee,cL as nee,cM as oee,s as see,cN as ree,cO as aee,cP as iee,l as Go,cQ as lee,cR as cee,a_ as uee,t as dee,aY as fee,cS as mee,cT as gee,cU as hee,u as pee,cV as vee,cW as bee,cX as yee,cY as Cee,cZ as See,c_ as xee,c$ as wee,d0 as Eee,d1 as Tee,d2 as Aee,d3 as Oee,d4 as DK,d5 as kee,d6 as fJ,$ as Qg,d7 as ud,N as Dee,d8 as Mee,d9 as Ree,w as WA,ar as Pee,da as Nee,db as Iee,dc as Bee,h as MK,dd as Lee,M as Zr,de as Fee,df as _ee,aH as mJ,dg as $ee,g as gJ,dh as hJ,di as Hee,_ as Vee}from"./main-Cg-I-99I.js";/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const zee=()=>{},Uee=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:aQ,BaseTransitionPropsValidators:iQ,Comment:lQ,DeprecationTypes:cQ,EffectScope:uQ,ErrorCodes:dQ,ErrorTypeStrings:fQ,Fragment:Ha,KeepAlive:mQ,ReactiveEffect:gQ,Static:hQ,Suspense:pQ,Teleport:lJ,Text:vQ,TrackOpTypes:bQ,Transition:yQ,TransitionGroup:CQ,TriggerOpTypes:SQ,VueElement:xQ,assertNumber:wQ,callWithAsyncErrorHandling:EQ,callWithErrorHandling:TQ,camelize:AQ,capitalize:OQ,cloneVNode:kQ,compatUtils:DQ,compile:zee,computed:SB,createApp:MQ,createBlock:OK,createCommentVNode:jo,createElementBlock:mn,createElementVNode:he,createHydrationRenderer:RQ,createPropsRestProxy:PQ,createRenderer:NQ,createSSRApp:IQ,createSlots:BQ,createStaticVNode:cJ,createTextVNode:Hi,createVNode:uJ,customRef:LQ,defineAsyncComponent:FQ,defineComponent:_Q,defineCustomElement:$Q,defineEmits:HQ,defineExpose:VQ,defineModel:zQ,defineOptions:UQ,defineProps:ZQ,defineSSRCustomElement:WQ,defineSlots:jQ,devtools:GQ,effect:KQ,effectScope:YQ,getCurrentInstance:XQ,getCurrentScope:JQ,getCurrentWatcher:QQ,getTransitionRawChildren:qQ,guardReactiveProps:eq,h:tq,handleError:nq,hasInjectionContext:oq,hydrate:sq,hydrateOnIdle:rq,hydrateOnInteraction:aq,hydrateOnMediaQuery:iq,hydrateOnVisible:lq,initCustomFormatter:cq,initDirectivesForSSR:uq,inject:dq,isMemoSame:fq,isProxy:mq,isReactive:gq,isReadonly:hq,isRef:pq,isRuntimeOnly:vq,isShallow:bq,isVNode:yq,markRaw:Cq,mergeDefaults:Sq,mergeModels:xq,mergeProps:wq,nextTick:ZA,normalizeClass:Ur,normalizeProps:Eq,normalizeStyle:Tq,onActivated:Aq,onBeforeMount:Oq,onBeforeUnmount:kq,onBeforeUpdate:Dq,onDeactivated:Mq,onErrorCaptured:Rq,onMounted:dJ,onRenderTracked:Pq,onRenderTriggered:Nq,onScopeDispose:Iq,onServerPrefetch:Bq,onUnmounted:Lq,onUpdated:Fq,onWatcherCleanup:_q,openBlock:ln,popScopeId:$q,provide:Hq,proxyRefs:Vq,pushScopeId:zq,queuePostFlushCb:Uq,reactive:Zq,readonly:Wq,ref:In,registerRuntimeCompiler:jq,render:Gq,renderList:vi,renderSlot:Kq,resolveComponent:kK,resolveDirective:Yq,resolveDynamicComponent:Xq,resolveFilter:Jq,resolveTransitionHooks:Qq,setBlockTracking:qq,setDevtoolsHook:eee,setTransitionHooks:tee,shallowReactive:nee,shallowReadonly:oee,shallowRef:see,ssrContextKey:ree,ssrUtils:aee,stop:iee,toDisplayString:Go,toHandlerKey:lee,toHandlers:cee,toRaw:uee,toRef:dee,toRefs:fee,toValue:mee,transformVNodeArgs:gee,triggerRef:hee,unref:pee,useAttrs:vee,useCssModule:bee,useCssVars:yee,useHost:Cee,useId:See,useModel:xee,useSSRContext:wee,useShadowRoot:Eee,useSlots:Tee,useTemplateRef:Aee,useTransitionState:Oee,vModelCheckbox:DK,vModelDynamic:kee,vModelRadio:fJ,vModelSelect:Qg,vModelText:ud,vShow:Dee,version:Mee,warn:Ree,watch:WA,watchEffect:Pee,watchPostEffect:Nee,watchSyncEffect:Iee,withAsyncContext:Bee,withCtx:MK,withDefaults:Lee,withDirectives:Zr,withKeys:Fee,withMemo:_ee,withModifiers:mJ,withScopeId:$ee},Symbol.toStringTag,{value:"Module"}));var pJ={exports:{}};(function(U){(function(){var w=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},F=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},T=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},P=function(e,n){return j(function(o,r){return e.eq(n(o),n(r))})},j=function(e){return{eq:e}},S=j(function(e,n){return e===n}),B=S,O=function(e){return j(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,i=0;i<r;i++)if(!e.eq(n[i],o[i]))return!1;return!0})},z=function(e,n){return P(O(e),function(o){return T(o,n)})},K=function(e){return j(function(n,o){var r=Object.keys(n),i=Object.keys(o);if(!z(B).eq(r,i))return!1;for(var c=r.length,d=0;d<c;d++){var g=r[d];if(!e.eq(n[g],o[g]))return!1}return!0})},J=j(function(e,n){if(e===n)return!0;var o=w(e),r=w(n);return o!==r?!1:F(o)?e===n:o==="array"?O(J).eq(e,n):o==="object"?K(J).eq(e,n):!1});const re=Object.getPrototypeOf,ce=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},me=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&ce(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},fe=e=>n=>me(n)===e,ye=e=>n=>typeof n===e,Fe=e=>n=>e===n,pe=(e,n)=>we(e)&&ce(e,n,(o,r)=>re(o)===r),ee=fe("string"),we=fe("object"),bt=e=>pe(e,Object),Ke=fe("array"),te=Fe(null),ct=ye("boolean"),Je=Fe(void 0),dt=e=>e==null,Ce=e=>!dt(e),Tt=ye("function"),St=ye("number"),it=(e,n)=>{if(Ke(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},et=()=>{},x=(e,n)=>(...o)=>e(n.apply(null,o)),pn=(e,n)=>o=>e(n(o)),Ye=e=>()=>e,Xn=e=>e,vs=(e,n)=>e===n;function ht(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const An=e=>n=>!e(n),yn=e=>()=>{throw new Error(e)},Oo=e=>e(),Io=e=>{e()},Ie=Ye(!1),Qe=Ye(!0);class N{constructor(n,o){this.tag=n,this.value=o}static some(n){return new N(!0,n)}static none(){return N.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?N.some(n(this.value)):N.none()}bind(n){return this.tag?n(this.value):N.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:N.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Ce(n)?N.some(n):N.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}N.singletonNone=new N(!1);const Os=Array.prototype.slice,eo=Array.prototype.indexOf,as=Array.prototype.push,Bo=(e,n)=>eo.call(e,n),Bs=(e,n)=>{const o=Bo(e,n);return o===-1?N.none():N.some(o)},_t=(e,n)=>Bo(e,n)>-1,to=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return!0}return!1},Ot=(e,n)=>{const o=e.length,r=new Array(o);for(let i=0;i<o;i++){const c=e[i];r[i]=n(c,i)}return r},ke=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];n(i,o)}},ia=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},Sr=(e,n)=>{const o=[],r=[];for(let i=0,c=e.length;i<c;i++){const d=e[i];(n(d,i)?o:r).push(d)}return{pass:o,fail:r}},Ht=(e,n)=>{const o=[];for(let r=0,i=e.length;r<i;r++){const c=e[r];n(c,r)&&o.push(c)}return o},ur=(e,n,o)=>(ia(e,(r,i)=>{o=n(o,r,i)}),o),Ko=(e,n,o)=>(ke(e,(r,i)=>{o=n(o,r,i)}),o),za=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++){const c=e[r];if(n(c,r))return N.some(c);if(o(c,r))break}return N.none()},No=(e,n)=>za(e,n,Ie),bs=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return N.some(o)}return N.none()},jr=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!Ke(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);as.apply(n,e[o])}return n},Rs=(e,n)=>jr(Ot(e,n)),xn=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const i=e[o];if(n(i,o)!==!0)return!1}return!0},Re=e=>{const n=Os.call(e,0);return n.reverse(),n},_e=(e,n)=>Ht(e,o=>!_t(n,o)),ze=(e,n)=>{const o={};for(let r=0,i=e.length;r<i;r++){const c=e[r];o[String(c)]=n(c,r)}return o},ot=(e,n)=>{const o=Os.call(e,0);return o.sort(n),o},en=(e,n)=>n>=0&&n<e.length?N.some(e[n]):N.none(),sn=e=>en(e,0),On=e=>en(e,e.length-1),Vn=Tt(Array.from)?Array.from:e=>Os.call(e),Lo=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return N.none()},wn=(e,n)=>{const o=[],r=Tt(n)?i=>to(o,c=>n(c,i)):i=>_t(o,i);for(let i=0,c=e.length;i<c;i++){const d=e[i];r(d)||o.push(d)}return o},Yt=Object.keys,Dn=Object.hasOwnProperty,$e=(e,n)=>{const o=Yt(e);for(let r=0,i=o.length;r<i;r++){const c=o[r],d=e[c];n(d,c)}},yt=(e,n)=>To(e,(o,r)=>({k:r,v:n(o,r)})),To=(e,n)=>{const o={};return $e(e,(r,i)=>{const c=n(r,i);o[c.k]=c.v}),o},zi=e=>(n,o)=>{e[o]=n},Ir=(e,n,o,r)=>{$e(e,(i,c)=>{(n(i,c)?o:r)(i,c)})},Rt=(e,n)=>{const o={},r={};return Ir(e,n,zi(o),zi(r)),{t:o,f:r}},bi=(e,n)=>{const o={};return Ir(e,n,zi(o),et),o},fd=(e,n)=>{const o=[];return $e(e,(r,i)=>{o.push(n(r,i))}),o},pu=e=>fd(e,Xn),Fo=(e,n)=>nn(e,n)?N.from(e[n]):N.none(),nn=(e,n)=>Dn.call(e,n),Wc=(e,n)=>nn(e,n)&&e[n]!==void 0&&e[n]!==null,th=(e,n,o=J)=>K(o).eq(e,n),xr={generate:e=>{if(!Ke(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return ke(e,(r,i)=>{const c=Yt(r);if(c.length!==1)throw new Error("one and only one name per case");const d=c[0],g=r[d];if(o[d]!==void 0)throw new Error("duplicate key detected:"+d);if(d==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ke(g))throw new Error("case arguments must be an array");n.push(d),o[d]=(...h)=>{const y=h.length;if(y!==g.length)throw new Error("Wrong number of arguments to case "+d+". Expected "+g.length+" ("+g+"), got "+y);return{fold:(...M)=>{if(M.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+M.length);return M[i].apply(null,h)},match:M=>{const R=Yt(M);if(n.length!==R.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+R.join(","));if(!xn(n,Z=>_t(R,Z)))throw new Error("Not all branches were specified when using match. Specified: "+R.join(", ")+`
Required: `+n.join(", "));return M[d].apply(null,h)},log:M=>{console.log(M,{constructors:n,constructor:d,params:h})}}}}),o}},is=e=>{let n=e;return{get:()=>n,set:i=>{n=i}}},md=e=>{const n=c=>c(e),o=Ye(e),r=()=>i,i={tag:!0,inner:e,fold:(c,d)=>d(e),isValue:Qe,isError:Ie,map:c=>wr.value(c(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:c=>{c(e)},toOptional:()=>N.some(e)};return i},Sn=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,i)=>r(e),isValue:Ie,isError:Qe,map:n,mapError:r=>wr.error(r(e)),bind:n,exists:Ie,forall:Qe,getOr:Xn,or:Xn,getOrThunk:Oo,orThunk:Oo,getOrDie:yn(String(e)),each:et,toOptional:N.none};return o},wr={value:md,error:Sn,fromOption:(e,n)=>e.fold(()=>Sn(n),md)},vu=typeof window<"u"?window:Function("return this;")(),nh=(e,n,o)=>Math.min(Math.max(e,n),o),oh=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Za=0;const ni=e=>{const o=new Date().getTime(),r=Math.floor(oh()*1e9);return Za++,e+"_"+r+Za+String(o)},bu=(e,n)=>n,hl=(e,n)=>bt(e)&&bt(n)?Us(e,n):n,yi=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const i=n[r];for(const c in i)nn(i,c)&&(o[c]=e(o[c],i[c]))}return o},Us=yi(hl),yu=yi(bu),Ui=(e,n,o=vs)=>e.exists(r=>o(r,n)),Ct=(e,n,o=vs)=>Zs(e,n,o).getOr(e.isNone()&&n.isNone()),lm=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Zs=(e,n,o)=>e.isSome()&&n.isSome()?N.some(o(e.getOrDie(),n.getOrDie())):N.none(),cm=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?N.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):N.none(),ho=(e,n)=>e?N.some(n):N.none(),cf=(e,n)=>{let o=n??vu;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},Sa=(e,n)=>{const o=e.split(".");return cf(o,n)};xr.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const um=e=>{const n=[],o=[];return ke(e,r=>{r.fold(i=>{n.push(i)},i=>{o.push(i)})}),{errors:n,values:o}},pl=e=>{const n=is(N.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(N.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:g=>{o(),n.set(N.some(g))}}},dm=e=>{const n=is(N.none()),o=()=>n.get().each(g=>clearInterval(g));return{clear:()=>{o(),n.set(N.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:g=>{o(),n.set(N.some(setInterval(g,e)))}}},Gr=()=>{const e=pl(et);return{...e,on:o=>e.get().each(o)}},uf=(e,n)=>e.substring(n),Cu=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Kr=(e,n)=>Ps(e,n)?uf(e,n.length):e,Ws=(e,n,o=0,r)=>{const i=e.indexOf(n,o);return i!==-1?Je(r)?!0:i+n.length<=r:!1},Ps=(e,n)=>Cu(e,n,0),vl=(e,n)=>Cu(e,n,e.length-n.length),jc=e=>n=>n.replace(e,""),Zi=jc(/^\s+|\s+$/g),sh=jc(/^\s+/g),bl=jc(/\s+$/g),dn=e=>e.length>0,oc=e=>!dn(e),Su=(e,n)=>n<=0?"":new Array(n+1).join(e),Ci=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?N.none():N.some(o)},Ns=(e,n)=>{let o=null;return{cancel:()=>{te(o)||(clearTimeout(o),o=null)},throttle:(...c)=>{te(o)&&(o=setTimeout(()=>{o=null,e.apply(null,c)},n))}}},yl=(e,n)=>{let o=null;const r=()=>{te(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...c)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,c)},n)}}},Vo=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},Br="\uFEFF",zo=" ",Er=e=>e===Br,gd=e=>e.replace(/\uFEFF/g,""),Wi=e=>{const n={};return ke(e,o=>{n[o]={}}),Yt(n)},ji=e=>e.length!==void 0,Gc=Array.isArray,fm=e=>{if(Gc(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},xa=(e,n,o)=>{if(!e)return!1;if(o=o||e,ji(e)){for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(nn(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},sc=(e,n)=>{const o=[];return xa(e,(r,i)=>{o.push(n(r,i,e))}),o},Lr=(e,n)=>{const o=[];return xa(e,(r,i)=>{(!n||n(r,i,e))&&o.push(r)}),o},rc=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},Te=(e,n,o,r)=>{let i=Je(o)?e[0]:o;for(let c=0;c<e.length;c++)i=n.call(r,i,e[c],c);return i},Nt=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e))return r;return-1},Kn=e=>e[e.length-1],fs=(e,n,o,r)=>{const i=e.isiOS()&&/ipad/i.test(o)===!0,c=e.isiOS()&&!i,d=e.isiOS()||e.isAndroid(),g=d||r("(pointer:coarse)"),h=i||!c&&d&&r("(min-device-width:768px)"),y=c||d&&!h,A=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,M=!y&&!h&&!A;return{isiPad:Ye(i),isiPhone:Ye(c),isTablet:Ye(h),isPhone:Ye(y),isTouch:Ye(g),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Ye(A),isDesktop:Ye(M)}},Uo=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Qs=(e,n)=>{const o=Uo(e,n);if(!o)return{major:0,minor:0};const r=i=>Number(n.replace(o,"$"+i));return gm(r(1),r(2))},rt=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?mm():Qs(e,o)},mm=()=>gm(0,0),gm=(e,n)=>({major:e,minor:n}),$={nu:gm,detect:rt,unknown:mm},q=(e,n)=>Lo(n.brands,o=>{const r=o.brand.toLowerCase();return No(e,i=>{var c;return r===((c=i.brand)===null||c===void 0?void 0:c.toLowerCase())}).map(i=>({current:i.name,version:$.nu(parseInt(o.version,10),0)}))}),de=(e,n)=>{const o=String(n).toLowerCase();return No(e,r=>r.search(o))},Ve=(e,n)=>de(e,n).map(o=>{const r=$.detect(o.versionRegexes,n);return{current:o.name,version:r}}),ft=(e,n)=>de(e,n).map(o=>{const r=$.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Dt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ln=e=>n=>Ws(n,e),ys=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Ws(e,"edge/")&&Ws(e,"chrome")&&Ws(e,"safari")&&Ws(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Dt],search:e=>Ws(e,"chrome")&&!Ws(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Ws(e,"msie")||Ws(e,"trident")},{name:"Opera",versionRegexes:[Dt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ln("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ln("firefox")},{name:"Safari",versionRegexes:[Dt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Ws(e,"safari")||Ws(e,"mobile/"))&&Ws(e,"applewebkit")}],po=[{name:"Windows",search:Ln("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Ws(e,"iphone")||Ws(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ln("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ln("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ln("linux"),versionRegexes:[]},{name:"Solaris",search:Ln("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ln("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ln("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Cs={browsers:Ye(ys),oses:Ye(po)},ms="Edge",Cl="Chromium",Sl="IE",df="Opera",G0="Firefox",hd="Safari",K0=()=>rh({current:void 0,version:$.unknown()}),rh=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isEdge:r(ms),isChromium:r(Cl),isIE:r(Sl),isOpera:r(df),isFirefox:r(G0),isSafari:r(hd)}},u1={unknown:K0,nu:rh,edge:Ye(ms),chromium:Ye(Cl),ie:Ye(Sl),opera:Ye(df),firefox:Ye(G0),safari:Ye(hd)},vo="Windows",hm="iOS",ff="Android",Y0="Linux",d1="macOS",X0="Solaris",f1="FreeBSD",ah="ChromeOS",pm=()=>mf({current:void 0,version:$.unknown()}),mf=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isWindows:r(vo),isiOS:r(hm),isAndroid:r(ff),isMacOS:r(d1),isLinux:r(Y0),isSolaris:r(X0),isFreeBSD:r(f1),isChromeOS:r(ah)}},ih={unknown:pm,nu:mf,windows:Ye(vo),ios:Ye(hm),android:Ye(ff),linux:Ye(Y0),macos:Ye(d1),solaris:Ye(X0),freebsd:Ye(f1),chromeos:Ye(ah)},_S={detect:(e,n,o)=>{const r=Cs.browsers(),i=Cs.oses(),c=n.bind(h=>q(r,h)).orThunk(()=>Ve(r,e)).fold(u1.unknown,u1.nu),d=ft(i,e).fold(ih.unknown,ih.nu),g=fs(d,c,e,o);return{browser:c,os:d,deviceType:g}}},xu=e=>window.matchMedia(e).matches;let ac=Vo(()=>_S.detect(window.navigator.userAgent,N.from(window.navigator.userAgentData),xu));const la=()=>ac(),vm=(e,n)=>Sa(e,n),J0=(e,n)=>{const o=vm(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},m1=Object.getPrototypeOf,Q0=e=>J0("HTMLElement",e),wu=e=>{const n=Sa("ownerDocument.defaultView",e);return we(e)&&(Q0(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(m1(e).constructor.name))},g1=window.navigator.userAgent,lh=la(),Gi=lh.browser,ic=lh.os,Eu=lh.deviceType,q0=g1.indexOf("Windows Phone")!==-1,no={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Gi.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Gi.isIE(),windowsPhone:q0,browser:{current:Gi.current,version:Gi.version,isChromium:Gi.isChromium,isEdge:Gi.isEdge,isFirefox:Gi.isFirefox,isIE:Gi.isIE,isOpera:Gi.isOpera,isSafari:Gi.isSafari},os:{current:ic.current,version:ic.version,isAndroid:ic.isAndroid,isChromeOS:ic.isChromeOS,isFreeBSD:ic.isFreeBSD,isiOS:ic.isiOS,isLinux:ic.isLinux,isMacOS:ic.isMacOS,isSolaris:ic.isSolaris,isWindows:ic.isWindows},deviceType:{isDesktop:Eu.isDesktop,isiPad:Eu.isiPad,isiPhone:Eu.isiPhone,isPhone:Eu.isPhone,isTablet:Eu.isTablet,isTouch:Eu.isTouch,isWebView:Eu.isWebView}},eb=/^\s*|\s*$/g,h1=e=>dt(e)?"":(""+e).replace(eb,""),tb=(e,n)=>n?n==="array"&&Gc(e)?!0:typeof e===n:e!==void 0,nb=(e,n,o={})=>{const r=ee(e)?e.split(n||","):e||[];let i=r.length;for(;i--;)o[r[i]]={};return o},ob=nn,sb=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const i in r)if(nn(r,i)){const c=r[i];c!==void 0&&(e[i]=c)}}return e},p1=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),xa(e,(i,c)=>n.call(r,i,c,o)===!1?!1:(p1(i,n,o,r),!0)))},ut={trim:h1,isArray:Gc,is:tb,toArray:fm,makeMap:nb,each:xa,map:sc,grep:Lr,inArray:rc,hasOwn:ob,extend:sb,walk:p1,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,i=o.length;r<i&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>Ke(e)?e:e===""?[]:sc(e.split(n||","),h1),_addCacheSuffix:e=>{const n=no.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},HS=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const i="HTML does not have a single root node";throw console.error(i,e),new Error(i)}return Wa(r.childNodes[0])},VS=(e,n)=>{const r=(n||document).createElement(e);return Wa(r)},zS=(e,n)=>{const r=(n||document).createTextNode(e);return Wa(r)},Wa=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ne={fromHtml:HS,fromTag:VS,fromText:zS,fromDom:Wa,fromPoint:(e,n,o)=>N.from(e.dom.elementFromPoint(n,o)).map(Wa)},ZS=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},ch=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},ab=(e,n,o)=>{const r=e.document.createRange();return ZS(r,n),ch(r,o),r},xl=(e,n,o,r,i)=>{const c=e.document.createRange();return c.setStart(n.dom,o),c.setEnd(r.dom,i),c},bm=xr.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ym=(e,n,o)=>n(ne.fromDom(o.startContainer),o.startOffset,ne.fromDom(o.endContainer),o.endOffset),ib=(e,n)=>n.match({domRange:o=>({ltr:Ye(o),rtl:N.none}),relative:(o,r)=>({ltr:Vo(()=>ab(e,o,r)),rtl:Vo(()=>N.some(ab(e,r,o)))}),exact:(o,r,i,c)=>({ltr:Vo(()=>xl(e,o,r,i,c)),rtl:Vo(()=>N.some(xl(e,i,c,o,r)))})}),oi=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(i=>i.collapsed===!1).map(i=>bm.rtl(ne.fromDom(i.endContainer),i.endOffset,ne.fromDom(i.startContainer),i.startOffset)).getOrThunk(()=>ym(e,bm.ltr,o)):ym(e,bm.ltr,o)},pd=(e,n)=>{const o=ib(e,n);return oi(e,o)};bm.ltr,bm.rtl;const uh=8,dh=9,fh=11,ca=1,vd=3,Si=(e,n)=>{const o=e.dom;if(o.nodeType!==ca)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},wl=e=>e.nodeType!==ca&&e.nodeType!==dh&&e.nodeType!==fh||e.childElementCount===0,wa=(e,n)=>{const o=n===void 0?document:n.dom;return wl(o)?[]:Ot(o.querySelectorAll(e),ne.fromDom)},gf=(e,n)=>{const o=n===void 0?document:n.dom;return wl(o)?N.none():N.from(o.querySelector(e)).map(ne.fromDom)},Un=(e,n)=>e.dom===n.dom,El=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},mh=(e,n)=>{const o=[],r=c=>(o.push(c),n(c));let i=n(e);do i=i.bind(r);while(i.isSome());return o},ao=e=>e.dom.nodeName.toLowerCase(),ua=e=>e.dom.nodeType,lc=e=>n=>ua(n)===e,hf=e=>ua(e)===uh||ao(e)==="#comment",Tu=e=>ja(e)&&wu(e.dom),ja=lc(ca),Ea=lc(vd),WS=lc(dh),Cm=lc(fh),dr=e=>n=>ja(n)&&ao(n)===e,bd=e=>ne.fromDom(e.dom.ownerDocument),Au=e=>WS(e)?e:bd(e),gh=e=>ne.fromDom(Au(e).dom.documentElement),Ou=e=>ne.fromDom(Au(e).dom.defaultView),cc=e=>N.from(e.dom.parentNode).map(ne.fromDom),Sm=e=>N.from(e.dom.parentElement).map(ne.fromDom),lb=(e,n)=>{const o=Tt(n)?n:Ie;let r=e.dom;const i=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const c=r.parentNode,d=ne.fromDom(c);if(i.push(d),o(d)===!0)break;r=c}return i},v1=e=>{const n=o=>Ht(o,r=>!Un(e,r));return cc(e).map(Fr).map(n).getOr([])},ku=e=>N.from(e.dom.previousSibling).map(ne.fromDom),Du=e=>N.from(e.dom.nextSibling).map(ne.fromDom),b1=e=>Re(mh(e,ku)),cb=e=>mh(e,Du),Fr=e=>Ot(e.dom.childNodes,ne.fromDom),Mu=(e,n)=>{const o=e.dom.childNodes;return N.from(o[n]).map(ne.fromDom)},Tr=e=>Mu(e,0),xm=e=>Mu(e,e.dom.childNodes.length-1),hh=e=>e.dom.childNodes.length,ph=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return ne.fromDom(n)},Ls=e=>Cm(e)&&Ce(e.dom.host),Tl=e=>ne.fromDom(e.dom.getRootNode()),Ru=e=>Ls(e)?e:ph(Au(e)),uc=e=>Ls(e)?e:ne.fromDom(Au(e).dom.body),Yr=e=>{const n=Tl(e);return Ls(n)?N.some(n):N.none()},wm=e=>ne.fromDom(e.dom.host),ub=e=>{if(Ce(e.target)){const n=ne.fromDom(e.target);if(ja(n)&&jS(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return sn(o)}}return N.from(e.target)},jS=e=>Ce(e.dom.shadowRoot),si=(e,n,o,r,i,c,d)=>({target:e,x:n,y:o,stop:r,prevent:i,kill:c,raw:d}),GS=e=>{const n=ne.fromDom(ub(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),i=x(r,o);return si(n,e.clientX,e.clientY,o,r,i,e)},vh=(e,n)=>o=>{e(o)&&n(GS(o))},db=(e,n,o,r,i)=>{const c=vh(o,r);return e.dom.addEventListener(n,c,i),{unbind:ht(fb,e,n,c,i)}},an=(e,n,o,r)=>db(e,n,o,r,!1),fb=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},qs=Qe,er=(e,n,o)=>an(e,n,qs,o),y1=()=>ne.fromDom(document),ls=(e,n=!1)=>e.dom.focus({preventScroll:n}),mb=e=>{const n=Tl(e).dom;return e.dom===n.activeElement},Em=(e=y1())=>N.from(e.dom.activeElement).map(ne.fromDom),dc=e=>Em(Tl(e)).filter(n=>e.dom.contains(n.dom)),Ta=(e,n)=>{cc(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Kc=(e,n)=>{Du(e).fold(()=>{cc(e).each(i=>{Fs(i,n)})},r=>{Ta(r,n)})},Tm=(e,n)=>{Tr(e).fold(()=>{Fs(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Fs=(e,n)=>{e.dom.appendChild(n.dom)},bh=(e,n)=>{Ta(e,n),Fs(n,e)},pf=(e,n)=>{ke(n,(o,r)=>{const i=r===0?e:n[r-1];Kc(i,o)})},Pu=(e,n)=>{ke(n,o=>{Fs(e,o)})},C1=(e,n,o)=>{if(ee(o)||ct(o)||St(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},fr=(e,n,o)=>{C1(e.dom,n,o)},xi=(e,n)=>{const o=e.dom;$e(n,(r,i)=>{C1(o,i,r)})},ks=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Aa=(e,n)=>N.from(ks(e,n)),vf=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},tr=(e,n)=>{e.dom.removeAttribute(n)},gb=e=>{const n=e.dom.attributes;return n==null||n.length===0},gn=e=>Ko(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Ki=e=>{e.dom.textContent="",ke(Fr(e),n=>{b(n)})},b=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},k=e=>{const n=Fr(e);n.length>0&&pf(e,n),b(e)},L=(e,n)=>ne.fromDom(e.dom.cloneNode(n)),Y=e=>L(e,!1),ae=e=>L(e,!0),Xe=(e,n)=>{const o=ne.fromTag(n),r=gn(e);return xi(o,r),o},mt=(e,n)=>{const o=Xe(e,n);Kc(e,o);const r=Fr(e);return Pu(o,r),b(e),o},En=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Fr(ne.fromDom(r))},Cn=e=>Ot(e,ne.fromDom),Xt=e=>e.dom.innerHTML,zn=(e,n)=>{const r=bd(e).dom,i=ne.fromDom(r.createDocumentFragment()),c=En(n,r);Pu(i,c),Ki(e),Fs(e,i)},os=e=>{const n=ne.fromTag("div"),o=ne.fromDom(e.dom.cloneNode(!0));return Fs(n,o),Xt(n)},Yi=e=>e.style!==void 0&&Tt(e.style.getPropertyValue),Xr=e=>{const n=Ea(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Yr(ne.fromDom(n)).fold(()=>o.body.contains(n),pn(Xr,wm))},KS=(e,n,o)=>{if(!ee(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Yi(e)&&e.style.setProperty(n,o)},hb=(e,n)=>{Yi(e)&&e.style.removeProperty(n)},sO=(e,n,o)=>{const r=e.dom;KS(r,n,o)},pb=(e,n)=>{const o=e.dom;$e(n,(r,i)=>{KS(o,i,r)})},nr=(e,n)=>{const o=e.dom,i=window.getComputedStyle(o).getPropertyValue(n);return i===""&&!Xr(e)?yh(o,n):i},yh=(e,n)=>Yi(e)?e.style.getPropertyValue(n):"",vb=(e,n)=>{const o=e.dom,r=yh(o,n);return N.from(r).filter(i=>i.length>0)},YS=e=>{const n={},o=e.dom;if(Yi(o))for(let r=0;r<o.style.length;r++){const i=o.style.item(r);n[i]=o.style[i]}return n},XS=(e,n)=>{const o=e.dom;hb(o,n),Ui(Aa(e,"style").map(Zi),"")&&tr(e,"style")},Ss=e=>e.dom.offsetWidth,bb=((e,n)=>{const o=(g,h)=>{if(!St(h)&&!h.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+h);const y=g.dom;Yi(y)&&(y.style[e]=h+"px")},r=g=>{const h=n(g);if(h<=0||h===null){const y=nr(g,e);return parseFloat(y)||0}return h},i=r,c=(g,h)=>Ko(h,(y,A)=>{const M=nr(g,A),R=M===void 0?0:parseInt(M,10);return isNaN(R)?y:y+R},0);return{set:o,get:r,getOuter:i,aggregate:c,max:(g,h,y)=>{const A=c(g,y);return h>A?h-A:0}}})("height",e=>{const n=e.dom;return Xr(e)?n.getBoundingClientRect().height:n.offsetHeight}),fc=e=>bb.get(e),S1=(e,n)=>({left:e,top:n,translate:(r,i)=>S1(e+r,n+i)}),da=S1,JS=e=>{const n=e.getBoundingClientRect();return da(n.left,n.top)},QS=(e,n)=>e!==void 0?e:n!==void 0?n:0,NB=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,i=n.documentElement;if(o===e.dom)return da(o.offsetLeft,o.offsetTop);const c=QS(r==null?void 0:r.pageYOffset,i.scrollTop),d=QS(r==null?void 0:r.pageXOffset,i.scrollLeft),g=QS(i.clientTop,o.clientTop),h=QS(i.clientLeft,o.clientLeft);return qS(e).translate(d-h,c-g)},qS=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?da(r.offsetLeft,r.offsetTop):Xr(e)?JS(n):da(0,0)},x1=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return da(o,r)},rO=(e,n,o)=>{const i=(o!==void 0?o.dom:document).defaultView;i&&i.scrollTo(e,n)},yb=(e,n)=>{la().browser.isSafari()&&Tt(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},IB=(e,n)=>{const o=c=>{if(!e(c))throw new Error("Can only get "+n+" value of a "+n+" node");return r(c).getOr("")},r=c=>e(c)?N.from(c.dom.nodeValue):N.none();return{get:o,getOption:r,set:(c,d)=>{if(!e(c))throw new Error("Can only set raw "+n+" value of a "+n+" node");c.dom.nodeValue=d}}},ex=(e,n)=>{const r=document.createDocumentFragment();return ke(e,i=>{r.appendChild(i.dom)}),ne.fromDom(r)},Cb=IB(Ea,"text"),Ch=e=>Cb.get(e),aO=e=>Cb.getOption(e),iO=(e,n)=>Cb.set(e,n),Sb=(e,n)=>{const o=ks(e,n);return o===void 0||o===""?[]:o.split(" ")},BB=(e,n,o)=>{const i=Sb(e,n).concat([o]);return fr(e,n,i.join(" ")),!0},LB=(e,n,o)=>{const r=Ht(Sb(e,n),i=>i!==o);return r.length>0?fr(e,n,r.join(" ")):tr(e,n),!1};var mc=(e,n,o,r,i)=>e(o,r)?N.some(o):Tt(i)&&i(o)?N.none():n(o,r,i);const yd=(e,n,o)=>{let r=e.dom;const i=Tt(o)?o:Ie;for(;r.parentNode;){r=r.parentNode;const c=ne.fromDom(r);if(n(c))return N.some(c);if(i(c))break}return N.none()},Nu=(e,n,o)=>mc((i,c)=>c(i),yd,e,n,o),ko=(e,n)=>{const o=e.dom;return o.parentNode?Iu(ne.fromDom(o.parentNode),r=>!Un(e,r)&&n(r)):N.none()},Iu=(e,n)=>{const o=i=>n(ne.fromDom(i));return No(e.dom.childNodes,o).map(ne.fromDom)},tx=(e,n)=>{const o=r=>{for(let i=0;i<r.childNodes.length;i++){const c=ne.fromDom(r.childNodes[i]);if(n(c))return N.some(c);const d=o(r.childNodes[i]);if(d.isSome())return d}return N.none()};return o(e.dom)},w1=(e,n,o)=>yd(e,r=>Si(r,n),o),Cd=(e,n)=>gf(n,e),bf=(e,n,o)=>mc((i,c)=>Si(i,c),w1,e,n,o),Sh=e=>e.dom.classList!==void 0,nx=e=>Sb(e,"class"),lO=(e,n)=>BB(e,"class",n),xs=(e,n)=>LB(e,"class",n),cO=(e,n)=>_t(nx(e),n)?xs(e,n):lO(e,n),Yo=(e,n)=>{Sh(e)?e.dom.classList.add(n):lO(e,n)},uO=e=>{(Sh(e)?e.dom.classList:nx(e)).length===0&&tr(e,"class")},Jr=(e,n)=>{Sh(e)?e.dom.classList.remove(n):xs(e,n),uO(e)},Am=(e,n)=>{const o=Sh(e)?e.dom.classList.toggle(n):cO(e,n);return uO(e),o},Xi=(e,n)=>Sh(e)&&e.dom.classList.contains(n),FB=(e,n)=>{ke(n,o=>{Yo(e,o)})},_B=(e,n)=>{ke(n,o=>{Jr(e,o)})},$B=e=>bf(e,"[contenteditable]"),Sd=(e,n=!1)=>Xr(e)?e.dom.isContentEditable:$B(e).fold(Ye(n),o=>HB(o)==="true"),HB=e=>e.dom.contentEditable,gc=(e,n)=>{e.dom.contentEditable=n?"true":"false"},Om=(e,n)=>Ht(Fr(e),n),ox=(e,n)=>{let o=[];return ke(Fr(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(ox(r,n))}),o},Xo=(e,n)=>wa(n,e),sx=(e,n,o)=>yd(e,n,o).isSome(),E1=(e,n)=>ko(e,n).isSome(),xb=(e,n)=>tx(e,n).isSome(),dO=(e,n,o)=>w1(e,n,o).isSome(),T1=e=>Tt(e)?e:Ie,VK=(e,n,o)=>{let r=e.dom;const i=T1(o);for(;r.parentNode;){r=r.parentNode;const c=ne.fromDom(r),d=n(c);if(d.isSome())return d;if(i(c))break}return N.none()},xh=(e,n,o)=>{const r=n(e),i=T1(o);return r.orThunk(()=>i(e)?N.none():VK(e,n,i))},rx=e=>aO(e).filter(n=>n.trim().length!==0||n.indexOf(zo)>-1).isSome(),VB=e=>Tu(e)&&ks(e,"contenteditable")==="false",zB=["img","br"],UB=e=>rx(e)||_t(zB,ao(e))||VB(e),ZB=e=>tx(e,UB),fO={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},wh=xr.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),WB=(e,n,o,r)=>e.fold(n,o,r),jB=e=>e.fold(Xn,Xn,Xn),GB=wh.before,KB=wh.on,YB=wh.after,xd={before:GB,on:KB,after:YB,cata:WB,getStart:jB},wb=xr.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),A1=e=>wb.exact(e.start,e.soffset,e.finish,e.foffset),XB=e=>e.match({domRange:n=>ne.fromDom(n.startContainer),relative:(n,o)=>xd.getStart(n),exact:(n,o,r,i)=>n}),mO=wb.domRange,JB=wb.relative,QB=wb.exact,gO=e=>{const n=XB(e);return Ou(n)},qB=fO.create,Eh={domRange:mO,relative:JB,exact:QB,exactFromRange:A1,getWin:gO,range:qB},e7=(e,n,o)=>{var r;return N.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(i=>{if(i.offsetNode===null)return N.none();const c=e.createRange();return c.setStart(i.offsetNode,i.offset),c.collapse(),N.some(c)})},t7=(e,n,o)=>{var r;return N.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},Eb=(e,n,o)=>e.caretPositionFromPoint?e7(e,n,o):e.caretRangeFromPoint?t7(e,n,o):N.none(),n7=(e,n,o)=>{const r=e.document;return Eb(r,n,o).map(i=>fO.create(ne.fromDom(i.startContainer),i.startOffset,ne.fromDom(i.endContainer),i.endOffset))},Tb=(e,n)=>{const o=ao(e);return o==="input"?xd.after(e):_t(["br","img"],o)?n===0?xd.before(e):xd.after(e):xd.on(e,n)},hO=(e,n)=>{const o=e.fold(xd.before,Tb,xd.after),r=n.fold(xd.before,Tb,xd.after);return Eh.relative(o,r)},Ab=(e,n,o,r)=>{const i=Tb(e,n),c=Tb(o,r);return Eh.relative(i,c)},pO=e=>e.match({domRange:n=>{const o=ne.fromDom(n.startContainer),r=ne.fromDom(n.endContainer);return Ab(o,n.startOffset,r,n.endOffset)},relative:hO,exact:Ab}),o7=e=>{const n=Eh.getWin(e).dom,o=(i,c,d,g)=>xl(n,i,c,d,g),r=pO(e);return pd(n,r).match({ltr:o,rtl:o})},UK=(e,n,o)=>n7(e,n,o),ZK=e=>{const n=e===void 0?window:e;return la().browser.isFirefox()?N.none():N.from(n.visualViewport)},vO=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),O1=e=>{const n=e===void 0?window:e,o=n.document,r=x1(ne.fromDom(o));return ZK(n).fold(()=>{const i=n.document.documentElement,c=i.clientWidth,d=i.clientHeight;return vO(r.left,r.top,c,d)},i=>vO(Math.max(i.pageLeft,r.left),Math.max(i.pageTop,r.top),i.width,i.height))};class _r{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,i){if(n){if(!i&&n[o])return n[o];if(n!==this.rootNode){let c=n[r];if(c)return c;for(let d=n.parentNode;d&&d!==this.rootNode;d=d.parentNode)if(c=d[r],c)return c}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let c=r.lastChild;c;c=c.lastChild)if(!c.lastChild)return c}return r}const i=n.parentNode;if(i&&i!==this.rootNode)return i}}}const s7=/^[ \t\r\n]*$/,_s=e=>s7.test(e),$r=e=>{for(const n of e)if(!Er(n))return!1;return!0},km=e=>" \f	\v".indexOf(e)!==-1,Ob=e=>e===`
`||e==="\r",r7=(e,n)=>n<e.length&&n>=0?Ob(e[n]):!1,fa=(e,n=4,o=!0,r=!0)=>{const i=Su(" ",n),c=e.replace(/\t/g,i);return Ko(c,(g,h)=>km(h)||h===zo?g.pcIsSpace||g.str===""&&o||g.str.length===c.length-1&&r||r7(c,g.str.length+1)?{pcIsSpace:!1,str:g.str+zo}:{pcIsSpace:!0,str:g.str+" "}:{pcIsSpace:Ob(h),str:g.str+h},{pcIsSpace:!1,str:""}).str},yf=e=>n=>!!n&&n.nodeType===e,Th=e=>!!e&&!Object.getPrototypeOf(e),Bt=yf(1),Bu=e=>Bt(e)&&Tu(ne.fromDom(e)),a7=e=>Bt(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Oa=e=>{const n=e.toLowerCase();return o=>Ce(o)&&o.nodeName.toLowerCase()===n},Al=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return _t(n,r)}return!1}},kb=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Bt(r)){const i=r.ownerDocument.defaultView;if(i)for(let c=0;c<o.length;c++){const d=i.getComputedStyle(r,null);if((d?d.getPropertyValue(e):null)===o[c])return!0}}return!1}},i7=e=>n=>Bt(n)&&n.hasAttribute(e),Dm=e=>Bt(e)&&e.hasAttribute("data-mce-bogus"),l7=e=>Bt(e)&&e.getAttribute("data-mce-bogus")==="all",Lu=e=>Bt(e)&&e.tagName==="TABLE",ax=e=>n=>!!(Bu(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),Db=Al(["textarea","input"]),at=yf(3),WK=yf(4),js=yf(7),Fu=yf(8),k1=yf(9),Mm=yf(11),ws=Oa("br"),bO=Oa("img"),c7=Oa("a"),hc=ax("true"),ss=ax("false"),Cf=e=>Bu(e)&&e.isContentEditable&&Ce(e.parentElement)&&!e.parentElement.isContentEditable,D1=Al(["td","th"]),pc=Al(["td","th","caption"]),Ol=Al(["video","audio","object","embed"]),Mb=Oa("li"),Gs=Oa("details"),Rb=Oa("summary"),Pb={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},yO=(e,n,o)=>{const r=ne.fromDom(n),i=ne.fromDom(e),c=o.getWhitespaceElements();return sx(i,g=>nn(c,ao(g)),ht(Un,r))},u7=e=>Bt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Yc=(e,n)=>Bt(e)&&nn(n.getNonEmptyElements(),e.nodeName),Nb=i7("data-mce-bookmark"),Ib=e=>Sm(ne.fromDom(e)).exists(n=>!Sd(n)),ix=(e,n,o)=>_s(e.data)&&!yO(e,n,o),lx=(e,n,o,r)=>at(e)&&!ix(e,n,o)&&(!r.includeZwsp||!$r(e.data)),cx=(e,n,o,r)=>Tt(r.isContent)&&r.isContent(n)||Yc(n,e)||Nb(n)||u7(n)||lx(n,o,e,r)||ss(n)||hc(n)&&Ib(n),_u=(e,n,o)=>{const r={...Pb,...o};if(r.checkRootAsContent&&cx(e,n,n,r))return!1;let i=n.firstChild,c=0;if(!i)return!0;const d=new _r(i,n);do{if(r.skipBogus&&Bt(i)){const g=i.getAttribute("data-mce-bogus");if(g){i=d.next(g==="all");continue}}if(Fu(i)){i=d.next(!0);continue}if(ws(i)){c++,i=d.next();continue}if(cx(e,i,n,r))return!1;i=d.next()}while(i);return c<=1},ka=(e,n,o)=>_u(e,n.dom,{checkRootAsContent:!0,...o}),Bb=(e,n,o)=>cx(e,n,n,{includeZwsp:Pb.includeZwsp,...o}),CO=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},Sf=e=>CO(e)!=="html",SO=e=>Sf(e.nodeName),d7=e=>CO(e.nodeName),xO=["svg","math"],f7=()=>{const e=Gr(),n=()=>e.get().map(d7).getOr("html");return{track:i=>(SO(i)?e.set(i):e.get().exists(c=>!c.contains(i))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},M1="data-mce-block",m7=e=>Ht(Yt(e),n=>!/[A-Z]/.test(n)),ux=e=>Ot(m7(e),n=>{const o=CSS.escape(n);return`${o}:`+Ot(xO,r=>`not(${r} ${o})`).join(":")}).join(","),wO=(e,n)=>Ce(n.querySelector(e))?(n.setAttribute(M1,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(M1),!1),EO=(e,n)=>{const o=ux(e.getTransparentElements()),r=ux(e.getBlockElements());return Ht(n.querySelectorAll(o),i=>wO(r,i))},dx=(e,n,o)=>{var r;const i=o?"lastChild":"firstChild";for(let c=n[i];c;c=c[i])if(_u(e,c,{checkRootAsContent:!0})){(r=c.parentNode)===null||r===void 0||r.removeChild(c);return}},g7=(e,n,o)=>{const r=document.createRange(),i=n.parentNode;if(i){r.setStartBefore(n),r.setEndBefore(o);const c=r.extractContents();dx(e,c,!0),r.setStartAfter(o),r.setEndAfter(n);const d=r.extractContents();dx(e,d,!1),_u(e,c,{checkRootAsContent:!0})||i.insertBefore(c,n),_u(e,o,{checkRootAsContent:!0})||i.insertBefore(o,n),_u(e,d,{checkRootAsContent:!0})||i.insertBefore(d,n),i.removeChild(n)}},Ji=(e,n,o)=>{const r=e.getBlockElements(),i=ne.fromDom(n),c=g=>ao(g)in r,d=g=>Un(g,i);ke(Cn(o),g=>{yd(g,c,d).each(h=>{const y=Om(g,A=>c(A)&&!e.isValidChild(ao(h),ao(A)));if(y.length>0){const A=Sm(h);ke(y,M=>{yd(M,c,d).each(R=>{g7(e,R.dom,M.dom)})}),A.each(M=>EO(e,M.dom))}})})},on=(e,n,o)=>{ke([...o,...vc(e,n)?[n]:[]],r=>ke(Xo(ne.fromDom(r),r.nodeName.toLowerCase()),i=>{p7(e,i.dom)&&k(i)}))},$u=(e,n)=>{const o=EO(e,n);Ji(e,n,o),on(e,n,o)},Lb=(e,n)=>{if(mx(e,n)){const o=ux(e.getBlockElements());wO(o,n)}},h7=(e,n,o)=>{const r=c=>Un(c,ne.fromDom(n)),i=lb(ne.fromDom(o),r);en(i,i.length-2).filter(ja).fold(()=>$u(e,n),c=>$u(e,c.dom))},fx=e=>e.hasAttribute(M1),Ah=(e,n)=>nn(e.getTransparentElements(),n),mx=(e,n)=>Bt(n)&&Ah(e,n.nodeName),vc=(e,n)=>mx(e,n)&&fx(n),p7=(e,n)=>mx(e,n)&&!fx(n),Rm=(e,n)=>n.type===1&&Ah(e,n.name)&&ee(n.attr(M1)),TO=la().browser,AO=e=>No(e,ja),gs=e=>TO.isFirefox()&&ao(e)==="table"?AO(Fr(e)).filter(n=>ao(n)==="caption").bind(n=>AO(cb(n)).map(o=>{const r=o.dom.offsetTop,i=n.dom.offsetTop,c=n.dom.offsetHeight;return r<=i?-c:0})).getOr(0):0,kl=(e,n)=>e.children&&_t(e.children,n),ri=(e,n,o)=>{let r=0,i=0;const c=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&nr(ne.fromDom(e),"position")==="static"){const g=n.getBoundingClientRect();return r=g.left+(c.documentElement.scrollLeft||e.scrollLeft)-c.documentElement.clientLeft,i=g.top+(c.documentElement.scrollTop||e.scrollTop)-c.documentElement.clientTop,{x:r,y:i}}let d=n;for(;d&&d!==o&&d.nodeType&&!kl(d,o);){const g=d;r+=g.offsetLeft||0,i+=g.offsetTop||0,d=g.offsetParent}for(d=n.parentNode;d&&d!==o&&d.nodeType&&!kl(d,o);)r-=d.scrollLeft||0,i-=d.scrollTop||0,d=d.parentNode;i+=gs(ne.fromDom(n))}return{x:r,y:i}},Pm=(e,n={})=>{let o=0;const r={},i=ne.fromDom(e),c=Au(i),d=oe=>{n.referrerPolicy=oe},g=oe=>{n.contentCssCors=oe},h=oe=>{Fs(Ru(i),oe)},y=oe=>{const ue=Ru(i);Cd(ue,"#"+oe).each(b)},A=oe=>Fo(r,oe).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),M=oe=>new Promise((ue,ge)=>{let Se;const Ue=ut._addCacheSuffix(oe),tt=A(Ue);r[Ue]=tt,tt.count++;const At=(Et,zt)=>{ke(Et,Io),tt.status=zt,tt.passed=[],tt.failed=[],Se&&(Se.onload=null,Se.onerror=null,Se=null)},Ne=()=>At(tt.passed,2),Ae=()=>At(tt.failed,3);if(ue&&tt.passed.push(ue),ge&&tt.failed.push(ge),tt.status===1)return;if(tt.status===2){Ne();return}if(tt.status===3){Ae();return}tt.status=1;const je=ne.fromTag("link",c.dom);xi(je,{rel:"stylesheet",type:"text/css",id:tt.id}),n.contentCssCors&&fr(je,"crossOrigin","anonymous"),n.referrerPolicy&&fr(je,"referrerpolicy",n.referrerPolicy),Se=je.dom,Se.onload=Ne,Se.onerror=Ae,h(je),fr(je,"href",Ue)}),R=(oe,ue)=>{const ge=A(oe);r[oe]=ge,ge.count++;const Se=ne.fromTag("style",c.dom);xi(Se,{rel:"stylesheet",type:"text/css",id:ge.id,"data-mce-key":oe}),Se.dom.innerHTML=ue,h(Se)},_=oe=>Promise.allSettled(Ot(oe,ge=>M(ge).then(Ye(ge)))).then(ge=>{const Se=Sr(ge,Ue=>Ue.status==="fulfilled");return Se.fail.length>0?Promise.reject(Ot(Se.fail,Ue=>Ue.reason)):Ot(Se.pass,Ue=>Ue.value)}),Z=oe=>{const ue=ut._addCacheSuffix(oe);Fo(r,ue).each(ge=>{--ge.count===0&&(delete r[ue],y(ge.id))})};return{load:M,loadRawCss:R,loadAll:_,unload:Z,unloadRawCss:oe=>{Fo(r,oe).each(ue=>{--ue.count===0&&(delete r[oe],y(ue.id))})},unloadAll:oe=>{ke(oe,ue=>{Z(ue)})},_setReferrerPolicy:d,_setContentCssCors:g}},gx=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const c=Tl(o).dom;return N.from(e.get(c)).getOrThunk(()=>{const d=Pm(c,r);return e.set(c,d),d})}}})(),Qr=e=>e.nodeName.toLowerCase()==="span",Da=(e,n)=>Ce(e)&&(Bb(n,e)||n.isInline(e.nodeName.toLowerCase())),hx=(e,n,o)=>{const r=new _r(e,n).prev(!1),i=new _r(e,n).next(!1),c=Je(r)||Da(r,o),d=Je(i)||Da(i,o);return c&&d},We=e=>Qr(e)&&e.getAttribute("data-mce-type")==="bookmark",Qi=(e,n,o)=>at(e)&&e.data.length>0&&hx(e,n,o),OO=e=>Bt(e)?e.childNodes.length>0:!1,mr=e=>Mm(e)||k1(e),qi=(e,n,o,r)=>{var i;const c=r||n;if(Bt(n)&&We(n))return n;const d=n.childNodes;for(let g=d.length-1;g>=0;g--)qi(e,d[g],o,c);if(Bt(n)){const g=n.childNodes;g.length===1&&We(g[0])&&((i=n.parentNode)===null||i===void 0||i.insertBefore(g[0],n))}return!mr(n)&&!Bb(o,n)&&!OO(n)&&!Qi(n,c,o)&&e.remove(n),n},bc=ut.makeMap,Fb=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,yc=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,kO=/[<>&\"\']/g,Ei=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,mo={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},ai={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},R1={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},$s=e=>{const n=ne.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},px=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let i=0;i<r.length;i+=2){const c=String.fromCharCode(parseInt(r[i],n));if(!ai[c]){const d="&"+r[i+1]+";";o[c]=d,o[d]=c}}return o}else return},Xc=px("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),vx=(e,n)=>e.replace(n?Fb:yc,o=>ai[o]||o),Ti=e=>(""+e).replace(kO,n=>ai[n]||n),DO=(e,n)=>e.replace(n?Fb:yc,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":ai[o]||"&#"+o.charCodeAt(0)+";"),ve=(e,n,o)=>{const r=o||Xc;return e.replace(n?Fb:yc,i=>ai[i]||r[i]||i)},_o={encodeRaw:vx,encodeAllRaw:Ti,encodeNumeric:DO,encodeNamed:ve,getEncodeFunc:(e,n)=>{const o=px(n)||Xc,r=(d,g)=>d.replace(g?Fb:yc,h=>ai[h]!==void 0?ai[h]:o[h]!==void 0?o[h]:h.length>1?"&#"+((h.charCodeAt(0)-55296)*1024+(h.charCodeAt(1)-56320)+65536)+";":"&#"+h.charCodeAt(0)+";"),i=(d,g)=>ve(d,g,o),c=bc(e.replace(/\+/g,","));return c.named&&c.numeric?r:c.named?n?i:ve:c.numeric?DO:vx},decode:e=>e.replace(Ei,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):mo[o]||String.fromCharCode(o)):R1[n]||Xc[n]||$s(n))},Es=(e,n)=>(e=ut.trim(e),e?e.split(n||" "):[]),qr=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Zo=e=>we(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",v7=e=>{const n=o=>Ke(o)?Ot(o,n):Zo(o)?new RegExp(o.source,o.flags):we(o)?yt(o,n):o;return n(e)},xf=e=>{const n=/^(~)?(.+)$/;return Rs(Es(e,","),o=>{const r=n.exec(o);if(r){const c=r[1]==="~"?"span":"div",d=r[2];return[{cloneName:c,name:d}]}else return[]})},_b=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),RO=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},bx=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=RO(e),i=c=>Object.freeze(c.split(" "));return Object.freeze({blockContent:i(n),phrasingContent:i(o),flowContent:i(r)})},b7={html4:Vo(()=>bx("html4")),html5:Vo(()=>bx("html5")),"html5-strict":Vo(()=>bx("html5-strict"))},PO=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:i}=b7[e]();return n==="blocks"?N.some(o):n==="phrasing"?N.some(r):n==="flow"?N.some(i):N.none()},Nm=e=>{const n=_b(e),{phrasingContent:o,flowContent:r}=RO(e),i={},c=(h,y,A)=>{i[h]={attributes:ze(y,Ye({})),attributesOrder:y,children:ze(A,Ye({}))}},d=(h,y="",A="")=>{const M=Es(A),R=Es(h);let _=R.length;const Z=[...n,...Es(y)];for(;_--;)c(R[_],Z.slice(),M)},g=(h,y)=>{const A=Es(h),M=Es(y);let R=A.length;for(;R--;){const _=i[A[R]];for(let Z=0,V=M.length;Z<V;Z++)_.attributes[M[Z]]={},_.attributesOrder.push(M[Z])}};return e!=="html5-strict"&&(ke(Es("acronym applet basefont big font strike tt"),A=>{d(A,"",o)}),ke(Es("center dir isindex noframes"),A=>{d(A,"",r)})),d("html","manifest","head body"),d("head","","base command link meta noscript script style title"),d("title hr noscript br"),d("base","href target"),d("link","href rel media hreflang type sizes hreflang"),d("meta","name http-equiv content charset"),d("style","media type scoped"),d("script","src async defer type charset"),d("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),d("dd div","",r),d("address dt caption","",e==="html4"?o:r),d("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),d("blockquote","cite",r),d("ol","reversed start type","li"),d("ul","","li"),d("li","value",r),d("dl","","dt dd"),d("a","href target rel media hreflang type",e==="html4"?o:r),d("q","cite",o),d("ins del","cite datetime",r),d("img","src sizes srcset alt usemap ismap width height"),d("iframe","src name width height",r),d("embed","src type width height"),d("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),d("param","name value"),d("map","name",[r,"area"].join(" ")),d("area","alt coords shape href target rel media hreflang type"),d("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),d("colgroup","span","col"),d("col","span"),d("tbody thead tfoot","","tr"),d("tr","","td th"),d("td","colspan rowspan headers",r),d("th","colspan rowspan headers scope abbr",r),d("form","accept-charset action autocomplete enctype method name novalidate target",r),d("fieldset","disabled form name",[r,"legend"].join(" ")),d("label","form for",o),d("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),d("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),d("select","disabled form multiple name required size","option optgroup"),d("optgroup","disabled label","option"),d("option","disabled label selected value"),d("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),d("menu","type label",[r,"li"].join(" ")),d("noscript","",r),e!=="html4"&&(d("wbr"),d("ruby","",[o,"rt rp"].join(" ")),d("figcaption","",r),d("mark rt rp bdi","",o),d("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),d("canvas","width height",r),d("data","value",o),d("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),d("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),d("picture","","img source"),d("source","src srcset type media sizes"),d("track","kind src srclang label default"),d("datalist","",[o,"option"].join(" ")),d("article section nav aside main header footer","",r),d("hgroup","","h1 h2 h3 h4 h5 h6"),d("figure","",[r,"figcaption"].join(" ")),d("time","datetime",o),d("dialog","open",r),d("command","type label icon disabled checked radiogroup command"),d("output","for form name",o),d("progress","value max",o),d("meter","value min max low high optimum",o),d("details","open",[r,"summary"].join(" ")),d("keygen","autofocus challenge disabled form keytype name"),c("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(g("script","language xml:space"),g("style","xml:space"),g("object","declare classid code codebase codetype archive standby align border hspace vspace"),g("embed","align name hspace vspace"),g("param","valuetype type"),g("a","charset name rev shape coords"),g("br","clear"),g("applet","codebase archive code object alt name width height align hspace vspace"),g("img","name longdesc align border hspace vspace"),g("iframe","longdesc frameborder marginwidth marginheight scrolling align"),g("font basefont","size color face"),g("input","usemap align"),g("select"),g("textarea"),g("h1 h2 h3 h4 h5 h6 div p legend caption","align"),g("ul","type compact"),g("li","type"),g("ol dl menu dir","compact"),g("pre","width xml:space"),g("hr","align noshade size width"),g("isindex","prompt"),g("table","summary width frame rules cellspacing cellpadding align bgcolor"),g("col","width align char charoff valign"),g("colgroup","width align char charoff valign"),g("thead","align char charoff valign"),g("tr","align char charoff valign bgcolor"),g("th","axis align char charoff valign nowrap bgcolor width height"),g("form","accept"),g("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),g("tfoot","align char charoff valign"),g("tbody","align char charoff valign"),g("area","nohref"),g("body","background bgcolor text link vlink alink")),e!=="html4"&&(g("input button select textarea","autofocus"),g("input textarea","placeholder"),g("a","download"),g("link script img","crossorigin"),g("img","loading"),g("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&ke([i.video,i.audio],h=>{delete h.children.audio,delete h.children.video}),ke(Es("a form meter progress dfn"),h=>{i[h]&&delete i[h].children[h]}),delete i.caption.children.table,delete i.script,i},Oh=e=>e==="-"?"remove":"add",yx=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return N.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},y7=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Rs(Es(e,","),o=>{const r=n.exec(o);if(r){const i=r[1],c=i?Oh(i):"replace",d=r[2],g=Rs(Es(r[3],"|"),h=>yx(h).toArray());return[{operation:c,name:d,validChildren:g}]}else return[]})},C7=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:i,attributesOrder:c}=n;return ke(Es(e,"|"),d=>{const g=o.exec(d);if(g){const h={},y=g[1],A=g[2].replace(/[\\:]:/g,":"),M=g[3],R=g[4];if(y==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(A),h.required=!0),y==="-"){delete i[A],c.splice(ut.inArray(c,A),1);return}if(M&&(M==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:A,value:R}),h.defaultValue=R):M==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:A,value:R}),h.forcedValue=R):M==="<"&&(h.validValues=ut.makeMap(R,"?"))),r.test(A)){const _=h;n.attributePatterns=n.attributePatterns||[],_.pattern=qr(A),n.attributePatterns.push(_)}else i[A]||c.push(A),i[A]=h}})},ea=(e,n)=>{$e(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},wd=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Rs(Es(n,","),r=>{const i=o.exec(r);if(i){const c=i[1],d=i[2],g=i[3],h=i[4],y=i[5],A={attributes:{},attributesOrder:[]};if(e.each(M=>ea(M,A)),c==="#"?A.paddEmpty=!0:c==="-"&&(A.removeEmpty=!0),h==="!"&&(A.removeEmptyAttrs=!0),y&&C7(y,A),g&&(A.outputName=d),d==="@")if(e.isNone())e=N.some(A);else return[];return[g?{name:d,element:A,aliasName:g}:{name:d,element:A}]}else return[]})},wf={},Jc=ut.makeMap,Sc=ut.each,Ai=ut.extend,P1=ut.explode,N1=(e,n={})=>{const o=Jc(e," ",Jc(e.toUpperCase()," "));return Ai(o,n)},$b=e=>N1("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),xc=(e,n)=>{if(e){const o={};return ee(e)&&(e={"*":e}),Sc(e,(r,i)=>{o[i]=o[i.toUpperCase()]=n==="map"?Jc(r,/[, ]/):P1(r,/[, ]/)}),o}else return},ma=(e={})=>{var n;const o={},r={};let i=[];const c={},d={},g=(jt,Yn,Ts)=>{const Xs=e[jt];if(Xs)return Jc(Xs,/[, ]/,Jc(Xs.toUpperCase(),/[, ]/));{let Cr=wf[jt];return Cr||(Cr=N1(Yn,Ts),wf[jt]=Cr),Cr}},h=(n=e.schema)!==null&&n!==void 0?n:"html5",y=Nm(h);e.verify_html===!1&&(e.valid_elements="*[*]");const A=xc(e.valid_styles),M=xc(e.invalid_styles,"map"),R=xc(e.valid_classes,"map"),_=g("whitespace_elements","pre script noscript style textarea video audio iframe object code"),Z=g("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),V=g("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),G=g("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),oe="td th iframe video audio object script code",ue=g("non_empty_elements",oe+" pre svg textarea summary",V),ge=g("move_caret_before_on_enter_elements",oe+" table",V),Se="h1 h2 h3 h4 h5 h6",Ue=g("text_block_elements",Se+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),tt=g("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",Ue),At=g("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Ne=g("transparent_elements","a ins del canvas map"),Ae=g("wrap_block_elements","pre "+Se);Sc("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),jt=>{d[jt]=new RegExp("</"+jt+"[^>]*>","gi")});const je=jt=>{const Yn=N.from(o["@"]),Ts=/[*?+]/;ke(wd(Yn,jt??""),({name:Xs,element:Cr,aliasName:Js})=>{if(Js&&(o[Js]=Cr),Ts.test(Xs)){const us=Cr;us.pattern=qr(Xs),i.push(us)}else o[Xs]=Cr})},Et=jt=>{i=[],ke(Yt(o),Yn=>{delete o[Yn]}),je(jt)},zt=(jt,Yn)=>{var Ts,Xs;delete wf.text_block_elements,delete wf.block_elements;const Cr=Yn.extends?!ya(Yn.extends):!1,Js=Yn.extends;if(r[jt]=Js?r[Js]:{},c[jt]=Js??jt,ue[jt.toUpperCase()]={},ue[jt]={},Cr||(tt[jt.toUpperCase()]={},tt[jt]={}),Js&&!o[jt]&&o[Js]){const us=v7(o[Js]);delete us.removeEmptyAttrs,delete us.removeEmpty,o[jt]=us}else o[jt]={attributesOrder:[],attributes:{}};if(Ke(Yn.attributes)){const us=ei=>{ds.attributesOrder.push(ei),ds.attributes[ei]={}},ds=(Ts=o[jt])!==null&&Ts!==void 0?Ts:{};delete ds.attributesDefault,delete ds.attributesForced,delete ds.attributePatterns,delete ds.attributesRequired,ds.attributesOrder=[],ds.attributes={},ke(Yn.attributes,ei=>{const $c=_b(h);yx(ei).each(({preset:ad,name:du})=>{ad?du==="global"&&ke($c,us):us(du)})}),o[jt]=ds}if(ct(Yn.padEmpty)){const us=(Xs=o[jt])!==null&&Xs!==void 0?Xs:{};us.paddEmpty=Yn.padEmpty,o[jt]=us}if(Ke(Yn.children)){const us={},ds=$c=>{us[$c]={}},ei=$c=>{PO(h,$c).each(ad=>{ke(ad,ds)})};ke(Yn.children,$c=>{yx($c).each(({preset:ad,name:du})=>{ad?ei(du):ds(du)})}),r[jt]=us}Js&&$e(r,(us,ds)=>{us[Js]&&(r[ds]=us=Ai({},r[ds]),us[jt]=us[Js])})},Rn=jt=>{ke(xf(jt??""),({name:Yn,cloneName:Ts})=>{zt(Yn,{extends:Ts})})},Nn=jt=>{we(jt)?$e(jt,(Yn,Ts)=>zt(Ts,Yn)):ee(jt)&&Rn(jt)},co=jt=>{ke(y7(jt??""),({operation:Yn,name:Ts,validChildren:Xs})=>{const Cr=Yn==="replace"?{"#comment":{}}:r[Ts],Js=ds=>{Yn==="remove"?delete Cr[ds]:Cr[ds]={}},us=ds=>{PO(h,ds).each(ei=>{ke(ei,Js)})};ke(Xs,({preset:ds,name:ei})=>{ds?us(ei):Js(ei)}),r[Ts]=Cr})},So=jt=>{const Yn=o[jt];if(Yn)return Yn;let Ts=i.length;for(;Ts--;){const Xs=i[Ts];if(Xs.pattern.test(jt))return Xs}},cs=()=>{e.valid_elements?(Et(e.valid_elements),Sc(y,(jt,Yn)=>{r[Yn]=jt.children})):(Sc(y,(jt,Yn)=>{o[Yn]={attributes:jt.attributes,attributesOrder:jt.attributesOrder},r[Yn]=jt.children}),Sc(Es("strong/b em/i"),jt=>{const Yn=Es(jt,"/");o[Yn[1]].outputName=Yn[0]}),Sc(At,(jt,Yn)=>{o[Yn]&&(e.padd_empty_block_inline_children&&(o[Yn].paddInEmptyBlock=!0),o[Yn].removeEmpty=!0)}),Sc(Es("ol ul blockquote a table tbody"),jt=>{o[jt]&&(o[jt].removeEmpty=!0)}),Sc(Es("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),jt=>{o[jt]&&(o[jt].paddEmpty=!0)}),Sc(Es("span"),jt=>{o[jt].removeEmptyAttrs=!0})),delete o.svg,Nn(e.custom_elements),co(e.valid_children),je(e.extended_valid_elements),co("+ol[ul|ol],+ul[ul|ol]"),Sc({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(jt,Yn)=>{o[Yn]&&(o[Yn].parentsRequired=Es(jt))}),e.invalid_elements&&Sc(P1(e.invalid_elements),jt=>{o[jt]&&delete o[jt]}),So("span")||je("span[!data-mce-type|*]")},lr=Ye(A),yr=Ye(M),pt=Ye(R),Vt=Ye(G),ro=Ye(tt),uo=Ye(Ue),He=Ye(At),nt=Ye(Object.seal(V)),$t=Ye(Z),Pn=Ye(ue),Hn=Ye(ge),go=Ye(_),ql=Ye(Ne),rd=Ye(Ae),Ba=Ye(Object.seal(d)),mi=(jt,Yn)=>{const Ts=r[jt.toLowerCase()];return!!(Ts&&Ts[Yn.toLowerCase()])},ll=(jt,Yn)=>{const Ts=So(jt);if(Ts)if(Yn){if(Ts.attributes[Yn])return!0;const Xs=Ts.attributePatterns;if(Xs){let Cr=Xs.length;for(;Cr--;)if(Xs[Cr].pattern.test(Yn))return!0}}else return!0;return!1},ya=jt=>nn(ro(),jt),qa=jt=>!Ps(jt,"#")&&ll(jt)&&!ya(jt),ec=jt=>nn(rd(),jt)||qa(jt),om=Ye(c);return cs(),{type:h,children:r,elements:o,getValidStyles:lr,getValidClasses:pt,getBlockElements:ro,getInvalidStyles:yr,getVoidElements:nt,getTextBlockElements:uo,getTextInlineElements:He,getBoolAttrs:Vt,getElementRule:So,getSelfClosingElements:$t,getNonEmptyElements:Pn,getMoveCaretBeforeOnEnterElements:Hn,getWhitespaceElements:go,getTransparentElements:ql,getSpecialElements:Ba,isValidChild:mi,isValid:ll,isBlock:ya,isInline:qa,isWrapper:ec,getCustomElements:om,addValidElements:je,setValidElements:Et,addCustomElements:Nn,addValidChildren:co}},NO=e=>({value:Qc(e)}),Qc=e=>Kr(e,"#").toUpperCase(),Cx=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Ed=e=>{const n=Cx(e.red)+Cx(e.green)+Cx(e.blue);return NO(n)},Im=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Ef=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,S7=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),kh=(e,n,o,r)=>{const i=parseInt(e,10),c=parseInt(n,10),d=parseInt(o,10),g=parseFloat(r);return S7(i,c,d,g)},x7=e=>Im.test(e)?"rgb":Ef.test(e)?"rgba":"other",IO=e=>{const n=Im.exec(e);if(n!==null)return N.some(kh(n[1],n[2],n[3],"1"));const o=Ef.exec(e);return o!==null?N.some(kh(o[1],o[2],o[3],o[4])):N.none()},Hs=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,I1=e=>IO(e).map(Ed).map(n=>"#"+n.value).getOr(e),Hu=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,c={};let d,g;const h=Br;n&&(d=n.getValidStyles(),g=n.getInvalidStyles());const y=(`\\" \\' \\; \\: ; : `+h).split(" ");for(let M=0;M<y.length;M++)c[y[M]]=h+M,c[h+M]=y[M];const A={parse:M=>{const R={};let _=!1;const Z=e.url_converter,V=e.url_converter_scope||A,G=(Ne,Ae,je)=>{const Et=R[Ne+"-top"+Ae];if(!Et)return;const zt=R[Ne+"-right"+Ae];if(!zt)return;const Rn=R[Ne+"-bottom"+Ae];if(!Rn)return;const Nn=R[Ne+"-left"+Ae];if(!Nn)return;const co=[Et,zt,Rn,Nn];let So=co.length-1;for(;So--&&co[So]===co[So+1];);So>-1&&je||(R[Ne+Ae]=So===-1?co[0]:co.join(" "),delete R[Ne+"-top"+Ae],delete R[Ne+"-right"+Ae],delete R[Ne+"-bottom"+Ae],delete R[Ne+"-left"+Ae])},oe=Ne=>{const Ae=R[Ne];if(!Ae)return;const je=Ae.indexOf(",")>-1?[Ae]:Ae.split(" ");let Et=je.length;for(;Et--;)if(je[Et]!==je[0])return!1;return R[Ne]=je[0],!0},ue=(Ne,Ae,je,Et)=>{oe(Ae)&&oe(je)&&oe(Et)&&(R[Ne]=R[Ae]+" "+R[je]+" "+R[Et],delete R[Ae],delete R[je],delete R[Et])},ge=Ne=>(_=!0,c[Ne]),Se=(Ne,Ae)=>(_&&(Ne=Ne.replace(/\uFEFF[0-9]/g,je=>c[je])),Ae||(Ne=Ne.replace(/\\([\'\";:])/g,"$1")),Ne),Ue=Ne=>String.fromCharCode(parseInt(Ne.slice(1),16)),tt=Ne=>Ne.replace(/\\[0-9a-f]+/gi,Ue),At=(Ne,Ae,je,Et,zt,Rn)=>{if(zt=zt||Rn,zt)return zt=Se(zt),"'"+zt.replace(/\'/g,"\\'")+"'";if(Ae=Se(Ae||je||Et||""),!e.allow_script_urls){const Nn=Ae.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Nn)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Nn))return""}return Z&&(Ae=Z.call(V,Ae,"style")),"url('"+Ae.replace(/\'/g,"\\'")+"')"};if(M){M=M.replace(/[\u0000-\u001F]/g,""),M=M.replace(/\\[\"\';:\uFEFF]/g,ge).replace(/\"[^\"]+\"|\'[^\']+\'/g,Ae=>Ae.replace(/[;:]/g,ge));let Ne;for(;Ne=r.exec(M);){r.lastIndex=Ne.index+Ne[0].length;let Ae=Ne[1].replace(i,"").toLowerCase(),je=Ne[2].replace(i,"");if(Ae&&je){if(Ae=tt(Ae),je=tt(je),Ae.indexOf(h)!==-1||Ae.indexOf('"')!==-1||!e.allow_script_urls&&(Ae==="behavior"||/expression\s*\(|\/\*|\*\//.test(je)))continue;Ae==="font-weight"&&je==="700"?je="bold":(Ae==="color"||Ae==="background-color")&&(je=je.toLowerCase()),x7(je)==="rgb"&&IO(je).each(Et=>{je=I1(Hs(Et)).toLowerCase()}),je=je.replace(o,At),R[Ae]=_?Se(je,!0):je}}G("border","",!0),G("border","-width"),G("border","-color"),G("border","-style"),G("padding",""),G("margin",""),ue("border","border-width","border-style","border-color"),R.border==="medium none"&&delete R.border,R["border-image"]==="none"&&delete R["border-image"]}return R},serialize:(M,R)=>{let _="";const Z=(G,oe)=>{const ue=oe[G];if(ue)for(let ge=0,Se=ue.length;ge<Se;ge++){const Ue=ue[ge],tt=M[Ue];tt&&(_+=(_.length>0?" ":"")+Ue+": "+tt+";")}},V=(G,oe)=>{if(!g||!oe)return!0;let ue=g["*"];return ue&&ue[G]?!1:(ue=g[oe],!(ue&&ue[G]))};return R&&d?(Z("*",d),Z(R,d)):$e(M,(G,oe)=>{G&&V(oe,R)&&(_+=(_.length>0?" ":"")+oe+": "+G+";")}),_}};return A},B1={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Sx=e=>e instanceof Event||Tt(e.initEvent),Bm=e=>e.isDefaultPrevented===Qe||e.isDefaultPrevented===Ie,el=e=>dt(e.preventDefault)||Sx(e),Dh=(e,n)=>{const o=n??{};for(const r in e)nn(B1,r)||(o[r]=e[r]);return Ce(e.composedPath)&&(o.composedPath=()=>e.composedPath()),Ce(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),Ce(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},Lm=(e,n,o,r)=>{var i;const c=Dh(n,r);return c.type=e,dt(c.target)&&(c.target=(i=c.srcElement)!==null&&i!==void 0?i:o),el(n)&&(c.preventDefault=()=>{c.defaultPrevented=!0,c.isDefaultPrevented=Qe,Tt(n.preventDefault)&&n.preventDefault()},c.stopPropagation=()=>{c.cancelBubble=!0,c.isPropagationStopped=Qe,Tt(n.stopPropagation)&&n.stopPropagation()},c.stopImmediatePropagation=()=>{c.isImmediatePropagationStopped=Qe,c.stopPropagation()},Bm(c)||(c.isDefaultPrevented=c.defaultPrevented===!0?Qe:Ie,c.isPropagationStopped=c.cancelBubble===!0?Qe:Ie,c.isImmediatePropagationStopped=Ie)),c},w7="mce-data-",Hb=/^(?:mouse|contextmenu)|click/,L1=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},Fm=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},E7=e=>Ce(e)&&Hb.test(e.type),F1=(e,n)=>{const o=Lm(e.type,e,document,n);if(E7(e)&&Je(e.pageX)&&!Je(e.clientX)){const r=o.target.ownerDocument||document,i=r.documentElement,c=r.body,d=o;d.pageX=e.clientX+(i&&i.scrollLeft||c&&c.scrollLeft||0)-(i&&i.clientLeft||c&&c.clientLeft||0),d.pageY=e.clientY+(i&&i.scrollTop||c&&c.scrollTop||0)-(i&&i.clientTop||c&&c.clientTop||0)}return o},xx=(e,n,o)=>{const r=e.document,i={type:"ready"};if(o.domLoaded){n(i);return}const c=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,d=()=>{Fm(e,"DOMContentLoaded",d),Fm(e,"load",d),o.domLoaded||(o.domLoaded=!0,n(i)),e=null};c()?d():L1(e,"DOMContentLoaded",d),o.domLoaded||L1(e,"load",d)};class qc{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=w7+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,i){const c=this;let d;const g=window,h=R=>{c.executeHandlers(F1(R||g.event),y)};if(!n||at(n)||Fu(n))return r;let y;n[c.expando]?y=n[c.expando]:(y=c.count++,n[c.expando]=y,c.events[y]={}),i=i||n;const A=o.split(" ");let M=A.length;for(;M--;){let R=A[M],_=h,Z=!1,V=!1;if(R==="DOMContentLoaded"&&(R="ready"),c.domLoaded&&R==="ready"&&n.readyState==="complete"){r.call(i,F1({type:R}));continue}!c.hasFocusIn&&(R==="focusin"||R==="focusout")&&(Z=!0,V=R==="focusin"?"focus":"blur",_=G=>{const oe=F1(G||g.event);oe.type=oe.type==="focus"?"focusin":"focusout",c.executeHandlers(oe,y)}),d=c.events[y][R],d?R==="ready"&&c.domLoaded?r(F1({type:R})):d.push({func:r,scope:i}):(c.events[y][R]=d=[{func:r,scope:i}],d.fakeName=V,d.capture=Z,d.nativeHandler=_,R==="ready"?xx(n,_,c):L1(n,V||R,_,Z))}return n=d=null,r}unbind(n,o,r){if(!n||at(n)||Fu(n))return this;const i=n[this.expando];if(i){let c=this.events[i];if(o){const d=o.split(" ");let g=d.length;for(;g--;){const h=d[g],y=c[h];if(y){if(r){let A=y.length;for(;A--;)if(y[A].func===r){const M=y.nativeHandler,R=y.fakeName,_=y.capture,Z=y.slice(0,A).concat(y.slice(A+1));Z.nativeHandler=M,Z.fakeName=R,Z.capture=_,c[h]=Z}}(!r||y.length===0)&&(delete c[h],Fm(n,y.fakeName||h,y.nativeHandler,y.capture))}}}else $e(c,(d,g)=>{Fm(n,d.fakeName||g,d.nativeHandler,d.capture)}),c={};for(const d in c)if(nn(c,d))return this;delete this.events[i];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||at(n)||Fu(n))return this;const i=F1({type:o,target:n},r);do{const c=n[this.expando];c&&this.executeHandlers(i,c),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!i.isPropagationStopped());return this}clean(n){if(!n||at(n)||Fu(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],i=r&&r[n.type];if(i)for(let c=0,d=i.length;c<d;c++){const g=i[c];if(g&&g.func.call(g.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}qc.Event=new qc;const Dl=ut.each,Vu=ut.grep,Td="data-mce-style",BO=ut.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Tf=(e,n,o)=>{dt(o)||o===""?tr(e,n):fr(e,n,o)},Vb=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),_m=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,i=e.previousSibling;i;i=i.previousSibling){const c=i.nodeType;n&&at(i)&&(c===r||!i.data.length)||(o++,r=c)}return o},wx=(e,n)=>{const o=ks(n,"style"),r=e.serialize(e.parse(o),ao(n));Tf(n,Td,r)},LO=(e,n)=>St(e)?nn(BO,n)?e+"":e+"px":e,zb=(e,n,o)=>{const r=Vb(n);dt(o)||o===""?XS(e,r):sO(e,r,LO(o,r))},Ex=(e,n,o)=>{const r=n.keep_values,i={set:(d,g,h)=>{const y=ne.fromDom(d);Tt(n.url_converter)&&Ce(g)&&(g=n.url_converter.call(n.url_converter_scope||o(),String(g),h,d));const A="data-mce-"+h;Tf(y,A,g),Tf(y,h,g)},get:(d,g)=>{const h=ne.fromDom(d);return ks(h,"data-mce-"+g)||ks(h,g)}},c={style:{set:(d,g)=>{const h=ne.fromDom(d);r&&Tf(h,Td,g),tr(h,"style"),ee(g)&&pb(h,e.parse(g))},get:d=>{const g=ne.fromDom(d),h=ks(g,Td)||ks(g,"style");return e.serialize(e.parse(h),ao(g))}}};return r&&(c.href=c.src=i),c},Co=(e,n={})=>{const o={},r=window,i={};let c=0;const d=!0,g=!0,h=gx.forElement(ne.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),y=[],A=n.schema?n.schema:ma({}),M=Hu({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),R=n.ownEvents?new qc:qc.Event,_=A.getBlockElements(),Z=be=>ee(be)?nn(_,be):Bt(be)&&(nn(_,be.nodeName)||vc(A,be)),V=be=>be&&e&&ee(be)?e.getElementById(be):be,G=be=>{const Ee=V(be);return Ce(Ee)?ne.fromDom(Ee):null},oe=(be,Ee,gt="")=>{let st;const Qt=G(be);if(Ce(Qt)&&ja(Qt)){const qn=Kg[Ee];qn&&qn.get?st=qn.get(Qt.dom,Ee):st=ks(Qt,Ee)}return Ce(st)?st:gt},ue=be=>{const Ee=V(be);return dt(Ee)?[]:Ee.attributes},ge=(be,Ee,gt)=>{Vt(be,st=>{if(Bt(st)){const Qt=ne.fromDom(st),qn=gt===""?null:gt,As=ks(Qt,Ee),Ca=Kg[Ee];Ca&&Ca.set?Ca.set(Qt.dom,qn,Ee):Tf(Qt,Ee,qn),As!==qn&&n.onSetAttrib&&n.onSetAttrib({attrElm:Qt.dom,attrName:Ee,attrValue:qn})}})},Se=(be,Ee)=>be.cloneNode(Ee),Ue=()=>n.root_element||e.body,tt=be=>{const Ee=O1(be);return{x:Ee.x,y:Ee.y,w:Ee.width,h:Ee.height}},At=(be,Ee)=>ri(e.body,V(be),Ee),Ne=(be,Ee,gt)=>{Vt(be,st=>{const Qt=ne.fromDom(st);zb(Qt,Ee,gt),n.update_styles&&wx(M,Qt)})},Ae=(be,Ee)=>{Vt(be,gt=>{const st=ne.fromDom(gt);$e(Ee,(Qt,qn)=>{zb(st,qn,Qt)}),n.update_styles&&wx(M,st)})},je=(be,Ee,gt)=>{const st=V(be);if(!(dt(st)||!Bu(st)&&!a7(st)))return gt?nr(ne.fromDom(st),Vb(Ee)):(Ee=Ee.replace(/-(\D)/g,(Qt,qn)=>qn.toUpperCase()),Ee==="float"&&(Ee="cssFloat"),st.style?st.style[Ee]:void 0)},Et=be=>{const Ee=V(be);if(!Ee)return{w:0,h:0};let gt=je(Ee,"width"),st=je(Ee,"height");return(!gt||gt.indexOf("px")===-1)&&(gt="0"),(!st||st.indexOf("px")===-1)&&(st="0"),{w:parseInt(gt,10)||Ee.offsetWidth||Ee.clientWidth,h:parseInt(st,10)||Ee.offsetHeight||Ee.clientHeight}},zt=be=>{const Ee=V(be),gt=At(Ee),st=Et(Ee);return{x:gt.x,y:gt.y,w:st.w,h:st.h}},Rn=(be,Ee)=>{if(!be)return!1;const gt=Ke(be)?be:[be];return to(gt,st=>Si(ne.fromDom(st),Ee))},Nn=(be,Ee,gt,st)=>{const Qt=[];let qn=V(be);st=st===void 0;const As=gt||(Ue().nodeName!=="BODY"?Ue().parentNode:null);if(ee(Ee))if(Ee==="*")Ee=Bt;else{const Ca=Ee;Ee=Hc=>Rn(Hc,Ca)}for(;qn&&!(qn===As||dt(qn.nodeType)||k1(qn)||Mm(qn));){if(!Ee||Ee(qn))if(st)Qt.push(qn);else return[qn];qn=qn.parentNode}return st?Qt:null},co=(be,Ee,gt)=>{const st=Nn(be,Ee,gt,!1);return st&&st.length>0?st[0]:null},So=(be,Ee,gt)=>{let st=Ee;if(be){ee(Ee)&&(st=Qt=>Rn(Qt,Ee));for(let Qt=be[gt];Qt;Qt=Qt[gt])if(Tt(st)&&st(Qt))return Qt}return null},cs=(be,Ee)=>So(be,Ee,"nextSibling"),lr=(be,Ee)=>So(be,Ee,"previousSibling"),yr=be=>Tt(be.querySelectorAll),pt=(be,Ee)=>{var gt,st;const Qt=(st=(gt=V(Ee))!==null&&gt!==void 0?gt:n.root_element)!==null&&st!==void 0?st:e;return yr(Qt)?Vn(Qt.querySelectorAll(be)):[]},Vt=function(be,Ee,gt){const st=gt??this;if(Ke(be)){const Qt=[];return Dl(be,(qn,As)=>{const Ca=V(qn);Ca&&Qt.push(Ee.call(st,Ca,As))}),Qt}else{const Qt=V(be);return Qt?Ee.call(st,Qt):!1}},ro=(be,Ee)=>{Vt(be,gt=>{$e(Ee,(st,Qt)=>{ge(gt,Qt,st)})})},uo=(be,Ee)=>{Vt(be,gt=>{const st=ne.fromDom(gt);zn(st,Ee)})},He=(be,Ee,gt,st,Qt)=>Vt(be,qn=>{const As=ee(Ee)?e.createElement(Ee):Ee;return Ce(gt)&&ro(As,gt),st&&(!ee(st)&&st.nodeType?As.appendChild(st):ee(st)&&uo(As,st)),Qt?As:qn.appendChild(As)}),nt=(be,Ee,gt)=>He(e.createElement(be),be,Ee,gt,!0),$t=_o.decode,Pn=_o.encodeAllRaw,Hn=(be,Ee,gt="")=>{let st="<"+be;for(const Qt in Ee)Wc(Ee,Qt)&&(st+=" "+Qt+'="'+Pn(Ee[Qt])+'"');return oc(gt)&&nn(A.getVoidElements(),be)?st+" />":st+">"+gt+"</"+be+">"},go=be=>{const Ee=e.createElement("div"),gt=e.createDocumentFragment();gt.appendChild(Ee),be&&(Ee.innerHTML=be);let st;for(;st=Ee.firstChild;)gt.appendChild(st);return gt.removeChild(Ee),gt},ql=(be,Ee)=>Vt(be,gt=>{const st=ne.fromDom(gt);return Ee&&ke(Fr(st),Qt=>{Ea(Qt)&&Qt.dom.length===0?b(Qt):Ta(st,Qt)}),b(st),st.dom}),rd=be=>Vt(be,Ee=>{const gt=Ee.attributes;for(let st=gt.length-1;st>=0;st--)Ee.removeAttributeNode(gt.item(st))}),Ba=be=>M.parse(be),mi=(be,Ee)=>M.serialize(be,Ee),ll=be=>{if(id!==Co.DOM&&e===document){if(o[be])return;o[be]=!0}let Ee=e.getElementById("mceDefaultStyles");if(!Ee){Ee=e.createElement("style"),Ee.id="mceDefaultStyles",Ee.type="text/css";const gt=e.head;gt.firstChild?gt.insertBefore(Ee,gt.firstChild):gt.appendChild(Ee)}Ee.styleSheet?Ee.styleSheet.cssText+=be:Ee.appendChild(e.createTextNode(be))},ya=be=>{be||(be=""),ke(be.split(","),Ee=>{i[Ee]=!0,h.load(Ee).catch(et)})},qa=(be,Ee,gt)=>{Vt(be,st=>{if(Bt(st)){const Qt=ne.fromDom(st),qn=Ee.split(" ");ke(qn,As=>{Ce(gt)?(gt?Yo:Jr)(Qt,As):Am(Qt,As)})}})},ec=(be,Ee)=>{qa(be,Ee,!0)},om=(be,Ee)=>{qa(be,Ee,!1)},jt=(be,Ee)=>{const gt=G(be),st=Ee.split(" ");return Ce(gt)&&xn(st,Qt=>Xi(gt,Qt))},Yn=be=>{Vt(be,Ee=>XS(ne.fromDom(Ee),"display"))},Ts=be=>{Vt(be,Ee=>sO(ne.fromDom(Ee),"display","none"))},Xs=be=>{const Ee=G(be);return Ce(Ee)&&Ui(vb(Ee,"display"),"none")},Cr=be=>(be||"mce_")+c++,Js=be=>{const Ee=G(be);return Ce(Ee)?Bt(Ee.dom)?Ee.dom.outerHTML:os(Ee):""},us=(be,Ee)=>{Vt(be,gt=>{Bt(gt)&&(gt.outerHTML=Ee)})},ds=(be,Ee)=>{const gt=V(Ee);return Vt(be,st=>{const Qt=gt==null?void 0:gt.parentNode,qn=gt==null?void 0:gt.nextSibling;return Qt&&(qn?Qt.insertBefore(st,qn):Qt.appendChild(st)),st})},ei=(be,Ee,gt)=>Vt(Ee,st=>{var Qt;const qn=Ke(Ee)?be.cloneNode(!0):be;return gt&&Dl(Vu(st.childNodes),As=>{qn.appendChild(As)}),(Qt=st.parentNode)===null||Qt===void 0||Qt.replaceChild(qn,st),st}),$c=(be,Ee)=>{if(be.nodeName!==Ee.toUpperCase()){const gt=nt(Ee);return Dl(ue(be),st=>{ge(gt,st.nodeName,oe(be,st.nodeName))}),ei(gt,be,!0),gt}else return be},ad=(be,Ee)=>{let gt=be;for(;gt;){let st=Ee;for(;st&&gt!==st;)st=st.parentNode;if(gt===st)break;gt=gt.parentNode}return!gt&&be.ownerDocument?be.ownerDocument.documentElement:gt},du=(be,Ee,gt)=>bt(Ee)?_u(A,be,{...gt,isContent:Qt=>{const qn=Qt.nodeName.toLowerCase();return!!Ee[qn]}}):_u(A,be,gt),t1=()=>e.createRange(),Gg=(be,Ee,gt)=>{let st=t1(),Qt,qn;if(be&&Ee&&be.parentNode&&Ee.parentNode){const As=be.parentNode;return st.setStart(As,_m(be)),st.setEnd(Ee.parentNode,_m(Ee)),Qt=st.extractContents(),st=t1(),st.setStart(Ee.parentNode,_m(Ee)+1),st.setEnd(As,_m(be)+1),qn=st.extractContents(),As.insertBefore(qi(id,Qt,A),be),gt?As.insertBefore(gt,be):As.insertBefore(Ee,be),As.insertBefore(qi(id,qn,A),be),ql(be),gt||Ee}else return},nf=(be,Ee,gt,st)=>{if(Ke(be)){let Qt=be.length;const qn=[];for(;Qt--;)qn[Qt]=nf(be[Qt],Ee,gt,st);return qn}else return n.collect&&(be===e||be===r)&&y.push([be,Ee,gt,st]),R.bind(be,Ee,gt,st||id)},tc=(be,Ee,gt)=>{if(Ke(be)){let st=be.length;const Qt=[];for(;st--;)Qt[st]=tc(be[st],Ee,gt);return Qt}else{if(y.length>0&&(be===e||be===r)){let st=y.length;for(;st--;){const[Qt,qn,As]=y[st];be===Qt&&(!Ee||Ee===qn)&&(!gt||gt===As)&&R.unbind(Qt,qn,As)}}return R.unbind(be,Ee,gt)}},of=(be,Ee,gt)=>R.dispatch(be,Ee,gt),$0=(be,Ee,gt)=>R.dispatch(be,Ee,gt),n1=be=>{if(be&&Bu(be)){const Ee=be.getAttribute("data-mce-contenteditable");return Ee&&Ee!=="inherit"?Ee:be.contentEditable!=="inherit"?be.contentEditable:null}else return null},id={doc:e,settings:n,win:r,files:i,stdMode:d,boxModel:g,styleSheetLoader:h,boundEvents:y,styles:M,schema:A,events:R,isBlock:Z,root:null,clone:Se,getRoot:Ue,getViewPort:tt,getRect:zt,getSize:Et,getParent:co,getParents:Nn,get:V,getNext:cs,getPrev:lr,select:pt,is:Rn,add:He,create:nt,createHTML:Hn,createFragment:go,remove:ql,setStyle:Ne,getStyle:je,setStyles:Ae,removeAllAttribs:rd,setAttrib:ge,setAttribs:ro,getAttrib:oe,getPos:At,parseStyle:Ba,serializeStyle:mi,addStyle:ll,loadCSS:ya,addClass:ec,removeClass:om,hasClass:jt,toggleClass:qa,show:Yn,hide:Ts,isHidden:Xs,uniqueId:Cr,setHTML:uo,getOuterHTML:Js,setOuterHTML:us,decode:$t,encode:Pn,insertAfter:ds,replace:ei,rename:$c,findCommonAncestor:ad,run:Vt,getAttribs:ue,isEmpty:du,createRng:t1,nodeIndex:_m,split:Gg,bind:nf,unbind:tc,fire:$0,dispatch:of,getContentEditable:n1,getContentEditableParent:be=>{const Ee=Ue();let gt=null;for(let st=be;st&&st!==Ee&&(gt=n1(st),gt===null);st=st.parentNode);return gt},isEditable:be=>{if(Ce(be)){const Ee=Bt(be)?be:be.parentElement;return Ce(Ee)&&Bu(Ee)&&Sd(ne.fromDom(Ee))}else return!1},destroy:()=>{if(y.length>0){let be=y.length;for(;be--;){const[Ee,gt,st]=y[be];R.unbind(Ee,gt,st)}}$e(i,(be,Ee)=>{h.unload(Ee),delete i[Ee]})},isChildOf:(be,Ee)=>be===Ee||Ee.contains(be),dumpRng:be=>"startContainer: "+be.startContainer.nodeName+", startOffset: "+be.startOffset+", endContainer: "+be.endContainer.nodeName+", endOffset: "+be.endOffset},Kg=Ex(M,n,Ye(id));return id};Co.DOM=Co(document),Co.nodeIndex=_m;const FO=Co.DOM,Mh=0,Tx=1,Ub=2,_O=3;class Ad{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const i=FO;let c;const d=()=>{i.remove(y),c&&(c.onerror=c.onload=c=null)},g=()=>{d(),o()},h=()=>{d(),r("Failed to load script: "+n)},y=i.uniqueId();c=document.createElement("script"),c.id=y,c.type="text/javascript",c.src=ut._addCacheSuffix(n),this.settings.referrerPolicy&&i.setAttrib(c,"referrerpolicy",this.settings.referrerPolicy),c.onload=g,c.onerror=h,(document.getElementsByTagName("head")[0]||document.body).appendChild(c)})}isDone(n){return this.states[n]===Ub}markDone(n){this.states[n]=Ub}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=Mh),new Promise((i,c)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:i,reject:c})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(h,y)=>{Fo(o.scriptLoadedCallbacks,y).each(A=>{ke(A,M=>M[h](y))}),delete o.scriptLoadedCallbacks[y]},i=h=>{const y=Ht(h,A=>A.status==="rejected");return y.length>0?Promise.reject(Rs(y,({reason:A})=>Ke(A)?A:[A])):Promise.resolve()},c=h=>Promise.allSettled(Ot(h,y=>o.states[y]===Ub?(r("resolve",y),Promise.resolve()):o.states[y]===_O?(r("reject",y),Promise.reject(y)):(o.states[y]=Tx,o.loadScript(y).then(()=>{o.states[y]=Ub,r("resolve",y);const A=o.queue;return A.length>0?(o.queue=[],c(A).then(i)):Promise.resolve()},()=>(o.states[y]=_O,r("reject",y),Promise.reject(y)))))),d=h=>(o.loading=!0,c(h).then(y=>{o.loading=!1;const A=o.queueLoadedCallbacks.shift();return N.from(A).each(Io),i(y)})),g=Wi(n);return o.loading?new Promise((h,y)=>{o.queueLoadedCallbacks.push(()=>{d(g).then(h,y)})}):d(g)}}Ad.ScriptLoader=new Ad;const T7=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},A7=e=>we(e)&&nn(e,"raw"),Ax=e=>Ke(e)&&e.length>1,_1={},Zb=is("en"),Wb=()=>Fo(_1,Zb.get()),Ks={getData:()=>yt(_1,e=>({...e})),setCode:e=>{e&&Zb.set(e)},getCode:()=>Zb.get(),add:(e,n)=>{let o=_1[e];o||(_1[e]=o={});const r=Ot(Yt(n),i=>i.toLowerCase());$e(n,(i,c)=>{const d=c.toLowerCase();d!==c&&T7(r,d)?(nn(n,d)||(o[d]=i),o[c]=i):o[d]=i})},translate:e=>{const n=Wb().getOr({}),o=d=>Tt(d)?Object.prototype.toString.call(d):r(d)?"":""+d,r=d=>d===""||d===null||d===void 0,i=d=>{const g=o(d);return nn(n,g)?o(n[g]):Fo(n,g.toLowerCase()).map(o).getOr(g)},c=d=>d.replace(/{context:\w+}$/,"");if(r(e))return"";if(A7(e))return o(e.raw);if(Ax(e)){const d=e.slice(1),g=i(e[0]).replace(/\{([0-9]+)\}/g,(h,y)=>nn(d,y)?o(d[y]):h);return c(g)}return c(i(e))},isRtl:()=>Wb().bind(e=>Fo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>nn(_1,e)},gr=()=>{const e=[],n={},o={},r=[],i=(V,G)=>{const oe=Ht(r,ue=>ue.name===V&&ue.state===G);ke(oe,ue=>ue.resolve())},c=V=>nn(n,V),d=V=>nn(o,V),g=V=>{if(o[V])return o[V].instance},h=(V,G)=>{const oe=Ks.getCode(),ue=","+(G||"")+",";!oe||G&&ue.indexOf(","+oe+",")===-1||Ad.ScriptLoader.add(n[V]+"/langs/"+oe+".js")},y=(V,G)=>{gr.languageLoad!==!1&&(c(V)?h(V,G):Z(V,"loaded").then(()=>h(V,G)))},A=(V,G)=>(e.push(G),o[V]={instance:G},i(V,"added"),G),M=V=>{delete n[V],delete o[V]},R=(V,G)=>ee(G)?ee(V)?{prefix:"",resource:G,suffix:""}:{prefix:V.prefix,resource:G,suffix:V.suffix}:G,_=(V,G)=>{if(n[V])return Promise.resolve();let oe=ee(G)?G:G.prefix+G.resource+G.suffix;oe.indexOf("/")!==0&&oe.indexOf("://")===-1&&(oe=gr.baseURL+"/"+oe),n[V]=oe.substring(0,oe.lastIndexOf("/"));const ue=()=>(i(V,"loaded"),Promise.resolve());return o[V]?ue():Ad.ScriptLoader.add(oe).then(ue)},Z=(V,G="added")=>G==="added"&&d(V)||G==="loaded"&&c(V)?Promise.resolve():new Promise(oe=>{r.push({name:V,state:G,resolve:oe})});return{items:e,urls:n,lookup:o,get:g,requireLangPack:y,add:A,remove:M,createUrl:R,load:_,waitFor:Z}};gr.languageLoad=!0,gr.baseURL="",gr.PluginManager=gr(),gr.ThemeManager=gr(),gr.ModelManager=gr();const $m=Ye("mce-annotation"),Ao=Ye("data-mce-annotation"),Hm=Ye("data-mce-annotation-uid"),Ph=Ye("data-mce-annotation-active"),$1=Ye("data-mce-annotation-classes"),Vm=Ye("data-mce-annotation-attrs"),jb=e=>n=>Un(n,e),$O=(e,n)=>{const o=e.selection.getRng(),r=ne.fromDom(o.startContainer),i=ne.fromDom(e.getBody()),c=n.fold(()=>"."+$m(),h=>`[${Ao()}="${h}"]`),d=Mu(r,o.startOffset).getOr(r);return bf(d,c,jb(i)).bind(h=>Aa(h,`${Hm()}`).bind(y=>Aa(h,`${Ao()}`).map(A=>{const M=VO(e,y);return{uid:y,name:A,elements:M}})))},HO=e=>ja(e)&&Xi(e,$m()),Dx=(e,n)=>vf(e,"data-mce-bogus")||dO(e,'[data-mce-bogus="all"]',jb(n)),VO=(e,n)=>{const o=ne.fromDom(e.getBody()),r=Xo(o,`[${Hm()}="${n}"]`);return Ht(r,i=>!Dx(i,o))},Mx=(e,n)=>{const o=ne.fromDom(e.getBody()),r=Xo(o,`[${Ao()}="${n}"]`),i={};return ke(r,c=>{if(!Dx(c,o)){const d=ks(c,Hm()),g=Fo(i,d).getOr([]);i[d]=g.concat([c])}}),i},O7=(e,n)=>{const o=is({}),r=()=>({listeners:[],previous:Gr()}),i=(M,R)=>{c(M,_=>(R(_),_))},c=(M,R)=>{const _=o.get(),Z=Fo(_,M).getOrThunk(r),V=R(Z);_[M]=V,o.set(_)},d=(M,R,_)=>{i(M,Z=>{ke(Z.listeners,V=>V(!0,M,{uid:R,nodes:Ot(_,G=>G.dom)}))})},g=M=>{i(M,R=>{ke(R.listeners,_=>_(!1,M))})},h=(M,R)=>{ke(VO(e,M),_=>{R?fr(_,Ph(),"true"):tr(_,Ph())})},y=yl(()=>{const M=ot(n.getNames());ke(M,R=>{c(R,_=>{const Z=_.previous.get();return $O(e,N.some(R)).fold(()=>{Z.each(V=>{g(R),_.previous.clear(),h(V,!1)})},({uid:V,name:G,elements:oe})=>{Ui(Z,V)||(Z.each(ue=>h(ue,!1)),d(G,V,oe),_.previous.set(V),h(V,!0))}),{previous:_.previous,listeners:_.listeners}})})},30);return e.on("remove",()=>{y.cancel()}),e.on("NodeChange",()=>{y.throttle()}),{addListener:(M,R)=>{c(M,_=>({previous:_.previous,listeners:_.listeners.concat([R])}))}}},k7=(e,n)=>{const o=Ao(),r=c=>N.from(c.attr(o)).bind(n.lookup),i=c=>{var d,g;c.attr(Hm(),null),c.attr(Ao(),null),c.attr(Ph(),null);const h=N.from(c.attr(Vm())).map(R=>R.split(",")).getOr([]),y=N.from(c.attr($1())).map(R=>R.split(",")).getOr([]);ke(h,R=>c.attr(R,null));const A=(g=(d=c.attr("class"))===null||d===void 0?void 0:d.split(" "))!==null&&g!==void 0?g:[],M=_e(A,[$m()].concat(y));c.attr("class",M.length>0?M.join(" "):null),c.attr($1(),null),c.attr(Vm(),null)};e.serializer.addTempAttr(Ph()),e.serializer.addAttributeFilter(o,c=>{for(const d of c)r(d).each(g=>{g.persistent===!1&&(d.name==="span"?d.unwrap():i(d))})})},Af=()=>{const e={};return{register:(i,c)=>{e[i]={name:i,settings:c}},lookup:i=>Fo(e,i).map(c=>c.settings),getNames:()=>Yt(e)}},Rx=(e,n,o=Ie)=>{const r=new _r(e,n),i=c=>{let d;do d=r[c]();while(d&&!at(d)&&!o(d));return N.from(d).filter(at)};return{current:()=>N.from(r.current()).filter(at),next:()=>i("next"),prev:()=>i("prev"),prev2:()=>i("prev2")}},zu=(e,n)=>{const o=n||(d=>e.isBlock(d)||ws(d)||ss(d)),r=(d,g,h,y)=>{if(at(d)){const A=y(d,g,d.data);if(A!==-1)return N.some({container:d,offset:A})}return h().bind(A=>r(A.container,A.offset,h,y))};return{backwards:(d,g,h,y)=>{const A=Rx(d,y??e.getRoot(),o);return r(d,g,()=>A.prev().map(M=>({container:M,offset:M.length})),h).getOrNull()},forwards:(d,g,h,y)=>{const A=Rx(d,y??e.getRoot(),o);return r(d,g,()=>A.next().map(M=>({container:M,offset:0})),h).getOrNull()}}},Px=["td","th"],D7=["thead","tbody","tfoot"],M7=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],zO=["li","dd","dt"],R7=["ul","ol","dl"],P7=["pre","script","textarea","style"],Nh=e=>{let n;return o=>(n=n||ze(e,Qe),nn(n,ao(o)))},UO=e=>ao(e)==="table",zm=e=>ja(e)&&ao(e)==="br",Nx=Nh(M7),Ih=Nh(R7),Od=Nh(zO),Ix=Nh(D7),Of=Nh(Px),Bh=Nh(P7),N7=e=>{const n=[];let o=e.dom;for(;o;)n.push(ne.fromDom(o)),o=o.lastChild;return n},Gb=e=>{const n=Xo(e,"br"),o=Ht(N7(e).slice(-1),zm);n.length===o.length&&ke(o,b)},kd=()=>{const e=ne.fromTag("br");return fr(e,"data-mce-bogus","1"),e},kf=e=>{Ki(e),Fs(e,kd())},I7=(e,n)=>{xm(e).each(o=>{ku(o).each(r=>{n.isBlock(ao(e))&&zm(o)&&n.isBlock(ao(r))&&b(o)})})},Ar=Br,Kb=Er,Oi=gd,ZO=e=>e.insertContent(Ar,{preserve_zwsp:!0}),B7=Bt,Dd=at,or=e=>(Dd(e)&&(e=e.parentNode),B7(e)&&e.hasAttribute("data-mce-caret")),ga=e=>Dd(e)&&Kb(e.data),Ys=e=>or(e)||ga(e),H1=e=>e.firstChild!==e.lastChild||!ws(e.firstChild),Bx=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Ar),c=e.parentNode;if(n){const d=e.previousSibling;if(Dd(d)){if(Ys(d))return d;if(Yb(d))return d.splitText(d.data.length-1)}c==null||c.insertBefore(i,e)}else{const d=e.nextSibling;if(Dd(d)){if(Ys(d))return d;if(Lh(d))return d.splitText(1),d}e.nextSibling?c==null||c.insertBefore(i,e.nextSibling):c==null||c.appendChild(i)}return i},Lx=e=>{const n=e.container();return at(n)?n.data.charAt(e.offset())===Ar||e.isAtStart()&&ga(n.previousSibling):!1},V1=e=>{const n=e.container();return at(n)?n.data.charAt(e.offset()-1)===Ar||e.isAtEnd()&&ga(n.nextSibling):!1},L7=(e,n,o)=>{var r;const c=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);c.setAttribute("data-mce-caret",o?"before":"after"),c.setAttribute("data-mce-bogus","all"),c.appendChild(kd().dom);const d=n.parentNode;return o?d==null||d.insertBefore(c,n):n.nextSibling?d==null||d.insertBefore(c,n.nextSibling):d==null||d.appendChild(c),c},Lh=e=>Dd(e)&&e.data[0]===Ar,Yb=e=>Dd(e)&&e.data[e.data.length-1]===Ar,Fx=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Dm(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},Xb=e=>e&&e.hasAttribute("data-mce-caret")?(Fx(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,_x=e=>or(e.startContainer),Df=Math.round,Md=e=>e?{left:Df(e.left),top:Df(e.top),bottom:Df(e.bottom),right:Df(e.right),width:Df(e.width),height:Df(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Do=(e,n)=>(e=Md(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Mf=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,$x=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,Fh=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:$x(n.top-e.bottom,e,n)},_h=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:$x(n.bottom-e.top,e,n),Hx=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,WO=e=>Ko(e,(n,o)=>n.fold(()=>N.some(o),r=>{const i=Math.min(o.left,r.left),c=Math.min(o.top,r.top),d=Math.max(o.right,r.right),g=Math.max(o.bottom,r.bottom);return N.some({top:c,right:d,bottom:g,left:i,width:d-i,height:g-c})}),N.none()),Jb=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),i=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-i)*(o-i))},F7=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Qb=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},ha=(e,n)=>{if(Bt(e)&&e.hasChildNodes()){const o=e.childNodes,r=nh(n,0,o.length-1);return o[r]}else return e},qb=(e,n)=>{if(!(n<0&&Bt(e)&&e.hasChildNodes()))return ha(e,n)},ta=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Rd=e=>ee(e)&&e.charCodeAt(0)>=768&&ta.test(e),_7=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},$7=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},jO=hc,ey=ss,Vx=ws,zx=at,Ux=Al(["script","style","textarea"]),Zx=Al(["img","input","textarea","hr","iframe","video","audio","object","embed"]),GO=Al(["table"]),KO=Ys,wc=e=>KO(e)?!1:zx(e)?!Ux(e.parentNode):Zx(e)||Vx(e)||GO(e)||Or(e),H7=e=>Bt(e)&&e.getAttribute("unselectable")==="true",Or=e=>!H7(e)&&ey(e),V7=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Or(o))return!1;if(jO(o))return!0}return!0},Rf=e=>Or(e)?!Ko(Vn(e.getElementsByTagName("*")),(n,o)=>n||jO(o),!1):!1,YO=e=>Zx(e)||Rf(e),Wx=(e,n)=>wc(e)&&V7(e,n),jx=Bt,Gx=wc,ty=kb("display","block table"),XO=kb("float","left right"),z1=$7(jx,Gx,An(XO)),z7=An(kb("white-space","pre pre-line pre-wrap")),Ds=at,Vs=ws,Hr=Co.nodeIndex,hr=qb,sr=e=>e?e.createRange():Co.DOM.createRng(),zs=e=>ee(e)&&/[\r\n\t ]/.test(e),ny=e=>!!e.setStart&&!!e.setEnd,U1=e=>{const n=e.startContainer,o=e.startOffset;if(zs(e.toString())&&z7(n.parentNode)&&at(n)){const r=n.data;if(zs(r[o-1])||zs(r[o+1]))return!0}return!1},JO=e=>{const n=e.ownerDocument,o=sr(n),r=n.createTextNode(zo),i=e.parentNode;i.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const c=Md(o.getBoundingClientRect());return i.removeChild(r),c},QO=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,i=e.endOffset;if(n===o&&at(o)&&r===0&&i===1){const c=e.cloneRange();return c.setEndAfter(o),Pd(c)}else return null},Kx=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Pd=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Md(r[0]):o=Md(e.getBoundingClientRect()),!ny(e)&&Vs(e)&&Kx(o)?JO(e):Kx(o)&&ny(e)&&(n=QO(e))!==null&&n!==void 0?n:o},Nd=(e,n)=>{const o=Do(e,n);return o.width=1,o.right=o.left+1,o},Yx=e=>{const n=[],o=d=>{d.height!==0&&(n.length>0&&Mf(d,n[n.length-1])||n.push(d))},r=(d,g)=>{const h=sr(d.ownerDocument);if(g<d.data.length){if(Rd(d.data[g]))return;if(Rd(d.data[g-1])&&(h.setStart(d,g),h.setEnd(d,g+1),!U1(h))){o(Nd(Pd(h),!1));return}}g>0&&(h.setStart(d,g-1),h.setEnd(d,g),U1(h)||o(Nd(Pd(h),!1))),g<d.data.length&&(h.setStart(d,g),h.setEnd(d,g+1),U1(h)||o(Nd(Pd(h),!0)))},i=e.container(),c=e.offset();if(Ds(i))return r(i,c),n;if(jx(i))if(e.isAtEnd()){const d=hr(i,c);Ds(d)&&r(d,d.data.length),z1(d)&&!Vs(d)&&o(Nd(Pd(d),!1))}else{const d=hr(i,c);if(Ds(d)&&r(d,0),z1(d)&&e.isAtEnd())return o(Nd(Pd(d),!1)),n;const g=hr(e.container(),e.offset()-1);z1(g)&&!Vs(g)&&(ty(g)||ty(d)||!z1(d))&&o(Nd(Pd(g),!1)),z1(d)&&o(Nd(Pd(d),!0))}return n},Be=(e,n,o)=>{const r=()=>(Ds(e),n===0),i=()=>Ds(e)?n>=e.data.length:n>=e.childNodes.length,c=()=>{const A=sr(e.ownerDocument);return A.setStart(e,n),A.setEnd(e,n),A},d=()=>(o||(o=Yx(Be(e,n))),o),g=()=>d().length>0,h=A=>A&&e===A.container()&&n===A.offset(),y=A=>hr(e,A?n-1:n);return{container:Ye(e),offset:Ye(n),toRange:c,getClientRects:d,isVisible:g,isAtStart:r,isAtEnd:i,isEqual:h,getNode:y}};Be.fromRangeStart=e=>Be(e.startContainer,e.startOffset),Be.fromRangeEnd=e=>Be(e.endContainer,e.endOffset),Be.after=e=>Be(e.parentNode,Hr(e)+1),Be.before=e=>Be(e.parentNode,Hr(e)),Be.isAbove=(e,n)=>Zs(sn(n.getClientRects()),On(e.getClientRects()),Fh).getOr(!1),Be.isBelow=(e,n)=>Zs(On(n.getClientRects()),sn(e.getClientRects()),_h).getOr(!1),Be.isAtStart=e=>e?e.isAtStart():!1,Be.isAtEnd=e=>e?e.isAtEnd():!1,Be.isTextPosition=e=>e?at(e.container()):!1,Be.isElementPosition=e=>!Be.isTextPosition(e);const oy=(e,n)=>{at(n)&&n.data.length===0&&e.remove(n)},qO=(e,n,o)=>{n.insertNode(o),oy(e,o.previousSibling),oy(e,o.nextSibling)},U7=(e,n,o)=>{const r=N.from(o.firstChild),i=N.from(o.lastChild);n.insertNode(o),r.each(c=>oy(e,c.previousSibling)),i.each(c=>oy(e,c.nextSibling))},Uu=(e,n,o)=>{Mm(o)?U7(e,n,o):qO(e,n,o)},Ml=at,Xx=Dm,sy=Co.nodeIndex,ry=e=>{const n=e.parentNode;return Xx(n)?ry(n):n},Z1=e=>e?Te(e.childNodes,(n,o)=>(Xx(o)&&o.nodeName!=="BR"?n=n.concat(Z1(o)):n.push(o),n),[]):[],ek=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&Ml(o);)n+=o.data.length;return n},W1=e=>n=>e===n,ay=e=>{let n,o;n=Z1(ry(e)),o=Nt(n,W1(e),e),n=n.slice(0,o+1);const r=Te(n,(i,c,d)=>(Ml(c)&&Ml(n[d-1])&&i++,i),0);return n=Lr(n,Al([e.nodeName])),o=Nt(n,W1(e),e),o-r},$h=e=>(Ml(e)?"text()":e.nodeName.toLowerCase())+"["+ay(e)+"]",j1=(e,n,o)=>{const r=[];for(let i=n.parentNode;i&&i!==e;i=i.parentNode)r.push(i);return r},Rl=(e,n)=>{let o=[],r=n.container(),i=n.offset(),c;if(Ml(r))c=ek(r,i);else{const g=r.childNodes;i>=g.length?(c="after",i=g.length-1):c="before",r=g[i]}o.push($h(r));let d=j1(e,r);return d=Lr(d,An(Dm)),o=o.concat(sc(d,g=>$h(g))),o.reverse().join("/")+","+c},G1=(e,n,o)=>{let r=Z1(e);return r=Lr(r,(i,c)=>!Ml(i)||!Ml(r[c-1])),r=Lr(r,Al([n])),r[o]},tk=(e,n)=>{let o=e,r=0;for(;Ml(o);){const i=o.data.length;if(n>=r&&n<=r+i){e=o,n=n-r;break}if(!Ml(o.nextSibling)){e=o,n=i;break}r+=i,o=o.nextSibling}return Ml(e)&&n>e.data.length&&(n=e.data.length),Be(e,n)},Jx=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),i=o.length>1?o[1]:"before",c=Te(r,(d,g)=>{const h=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(g);return h?(h[1]==="text()"&&(h[1]="#text"),G1(d,h[1],parseInt(h[2],10))):null},e);if(!c)return null;if(!Ml(c)&&c.parentNode){let d;return i==="after"?d=sy(c)+1:d=sy(c),Be(c.parentNode,d)}return tk(c,parseInt(i,10))},iy=ss,nk=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let i=n.previousSibling;i&&at(i);i=i.previousSibling)r+=e(i.data).length;return r},ok=(e,n,o,r,i)=>{const c=i?r.startContainer:r.endContainer;let d=i?r.startOffset:r.endOffset;const g=[],h=e.getRoot();if(at(c))g.push(o?nk(n,c,d):d);else{let y=0;const A=c.childNodes;d>=A.length&&A.length&&(y=1,d=Math.max(0,A.length-1)),g.push(e.nodeIndex(A[d],o)+y)}for(let y=c;y&&y!==h;y=y.parentNode)g.push(e.nodeIndex(y,o));return g},Z7=(e,n,o,r)=>{const i=n.dom,c=ok(i,e,o,r,!0),d=n.isForward(),g=_x(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:c,forward:d,...g};{const h=ok(i,e,o,r,!1);return{start:c,end:h,forward:d,...g}}},ly=(e,n,o)=>{let r=0;return ut.each(e.select(n),i=>{if(i.getAttribute("data-mce-bogus")!=="all"){if(i===o)return!1;r++;return}}),r},Qx=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Bt(o)&&o.nodeName==="TR"){const i=o.childNodes;o=i[Math.min(n?r:r-1,i.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},Um=e=>(Qx(e,!0),Qx(e,!1),e),cy=(e,n)=>{if(Bt(e)&&(e=ha(e,n),iy(e)))return e;if(Ys(e)){at(e)&&or(e)&&(e=e.parentNode);let o=e.previousSibling;if(iy(o)||(o=e.nextSibling,iy(o)))return o}},Id=e=>cy(e.startContainer,e.startOffset)||cy(e.endContainer,e.endOffset),uy=(e,n,o)=>{const r=o.getNode(),i=o.getRng();if(r.nodeName==="IMG"||iy(r)){const d=r.nodeName;return{name:d,index:ly(o.dom,d,r)}}const c=Id(i);if(c){const d=c.tagName;return{name:d,index:ly(o.dom,d,c)}}return Z7(e,o,n,i)},W7=e=>{const n=e.getRng();return{start:Rl(e.dom.getRoot(),Be.fromRangeStart(n)),end:Rl(e.dom.getRoot(),Be.fromRangeEnd(n)),forward:e.isForward()}},Ga=e=>({rng:e.getRng(),forward:e.isForward()}),Ec=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},ki=(e,n)=>{const o=e.dom;let r=e.getRng();const i=o.uniqueId(),c=e.isCollapsed(),d=e.getNode(),g=d.nodeName,h=e.isForward();if(g==="IMG")return{name:g,index:ly(o,g,d)};const y=Um(r.cloneRange());if(!c){y.collapse(!1);const M=Ec(o,i+"_end",n);Uu(o,y,M)}r=Um(r),r.collapse(!0);const A=Ec(o,i+"_start",n);return Uu(o,r,A),e.moveToBookmark({id:i,keep:!0,forward:h}),{id:i,forward:h}},j7=(e,n,o=!1)=>n===2?uy(Oi,o,e):n===3?W7(e):n?Ga(e):ki(e,!1),Pf=ht(uy,Xn,!0),G7=e=>e.type==="inline-command"||e.type==="inline-format",K7=e=>e.type==="block-command"||e.type==="block-format",Y7=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,X7=e=>{var n;const o=i=>wr.error({message:i,pattern:e}),r=(i,c,d)=>{if(e.format!==void 0){let g;if(Ke(e.format)){if(!xn(e.format,ee))return o(i+" pattern has non-string items in the `format` array");g=e.format}else if(ee(e.format))g=[e.format];else return o(i+" pattern has non-string `format` parameter");return wr.value(c(g))}else return e.cmd!==void 0?ee(e.cmd)?wr.value(d(e.cmd,e.value)):o(i+" pattern has non-string `cmd` parameter"):o(i+" pattern is missing both `format` and `cmd` parameters")};if(!we(e))return o("Raw pattern is not an object");if(!ee(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ee(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let i=e.start,c=e.end;return c.length===0&&(c=i,i=""),r("Inline",d=>({type:"inline-format",start:i,end:c,format:d}),(d,g)=>({type:"inline-command",start:i,end:c,cmd:d,value:g}))}else{if(e.replacement!==void 0)return ee(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):wr.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const i=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",c=>({type:"block-format",start:e.start,format:c[0],trigger:i}),(c,d)=>({type:"block-command",start:e.start,cmd:c,value:d,trigger:i}))}}},Zn=e=>Ht(e,K7),Wt=e=>Ht(e,G7),Zm=(e,n)=>({inlinePatterns:Wt(e),blockPatterns:Zn(e),dynamicPatternsLookup:n}),K1=(e,n)=>({...e,blockPatterns:Ht(e.blockPatterns,o=>Y7(o,n))}),dy=e=>{const n=um(Ot(e,X7));return ke(n.errors,o=>console.error(o.message,o.pattern)),n.values},J7=e=>n=>{const o=e(n);return dy(o)},sk=(e,n)=>e.dispatch("PreProcess",n),Jo=(e,n)=>e.dispatch("PostProcess",n),rk=e=>{e.dispatch("remove")},Q7=e=>{e.dispatch("detach")},q7=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},Le=(e,n,o,r,i)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:i})},qx=(e,n,o,r,i)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:i})},eL=e=>{e.dispatch("PreInit")},fy=e=>{e.dispatch("PostRender")},tL=e=>{e.dispatch("Init")},Hh=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},my=(e,n,o)=>{e.dispatch(n,o)},Nf=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},ak=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},Vh=(e,n)=>e.dispatch("BeforeSetContent",n),$o=(e,n)=>e.dispatch("SetContent",n),eu=(e,n)=>e.dispatch("BeforeGetContent",n),ew=(e,n)=>e.dispatch("GetContent",n),Bd=(e,n)=>{e.dispatch("AutocompleterStart",n)},Tc=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},tw=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},nL=e=>{e.dispatch("AutocompleterEnd")},nw=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),oL=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),ik=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),sL=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),rL=(e,n)=>e.dispatch("DisabledStateChange",{state:n}),gy=la().deviceType,qe=gy.isTouch(),aL=Co.DOM,Vr=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Ko(n,(o,r)=>{const i=r.split("="),c=i[0],d=i.length>1?i[1]:c;return o[Zi(c)]=Zi(d),o},{})},lk=e=>pe(e,RegExp),kt=e=>n=>n.options.get(e),hy=e=>ee(e)||we(e),ck=(e,n="")=>o=>{const r=ee(o);if(r)if(o.indexOf("=")!==-1){const i=Vr(o);return{value:Fo(i,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},cn=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:ck(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:ck(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=ee(o)&&dn(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=_t(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>ct(o)?{valid:!0,value:o}:ee(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||ee(o)||it(o,ee);return r?ee(o)?{value:Ot(o.split(","),Zi),valid:r}:Ke(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:io(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=ee(o)||it(o,ee);return r?{value:Ke(o)?o:Ot(o.split(","),Zi),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("extended_mathml_attributes",{processor:"string[]"}),n("extended_mathml_elements",{processor:"string[]"}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=ct(o)||ee(o);return r?o===!1||gy.isiPhone()||gy.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!qe}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("onboarding",{processor:"boolean",default:!0}),n("tiny_cloud_entry_url",{processor:"string"}),n("theme",{processor:o=>o===!1||ee(o)||Tt(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||ee(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("disabled",{processor:o=>ct(o)?(e.initialized&&Kh(e)!==o&&Promise.resolve().then(()=>{rL(e,o)}),{valid:!0,value:o}):{valid:!1,message:"The value must be a boolean."},default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(e.hasPlugin("help")?". Press ALT-0 for help.":"")}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:o=>{const r=it(o,ee);return r?{value:o,valid:r}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:hy}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:hy}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:hy}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:hy}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>ee(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>it(o,we)||o===!1?{value:dy(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>Tt(o)?{value:J7(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>it(o,lk)?{value:o,valid:!0}:lk(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=_t(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=_t(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Ks.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:aL.getAttrib(e.getElement(),"placeholder")})})},iL=kt("iframe_attrs"),uk=kt("doctype"),lL=kt("document_base_url"),YK=kt("body_id"),cL=kt("body_class"),uL=kt("content_security_policy"),XK=kt("br_in_pre"),Ma=kt("forced_root_block"),Y1=kt("forced_root_block_attrs"),tn=kt("newline_behavior"),dL=kt("br_newline_selector"),Ld=kt("no_newline_selector"),Zu=kt("keep_styles"),py=kt("end_container_on_empty_block"),ii=kt("automatic_uploads"),X1=kt("images_reuse_filename"),J1=kt("images_replace_blob_uris"),Q1=kt("icons"),zh=kt("icons_url"),fL=kt("images_upload_url"),mL=kt("images_upload_base_path"),gL=kt("images_upload_credentials"),hL=kt("images_upload_handler"),Jn=kt("content_css_cors"),Pl=kt("referrer_policy"),If=kt("language"),pL=kt("language_url"),Uh=kt("indent_use_margin"),so=kt("indentation"),vL=kt("content_css"),dk=kt("content_style"),fk=kt("font_css"),bL=kt("directionality"),q1=kt("inline_boundaries_selector"),mk=kt("object_resizing"),yL=kt("resize_img_proportional"),CL=kt("placeholder"),gk=kt("event_root"),ow=kt("service_message"),Zh=kt("theme"),SL=kt("theme_url"),vy=kt("model"),hk=kt("model_url"),Wh=kt("inline_boundaries"),xL=kt("formats"),wL=kt("preview_styles"),pk=kt("format_empty_lines"),EL=kt("format_noneditable_selector"),TL=kt("custom_ui_selector"),io=kt("inline"),vk=kt("hidden_input"),sw=kt("submit_patch"),AL=kt("add_form_submit_trigger"),Wm=kt("add_unload_trigger"),bk=kt("custom_undo_redo_levels"),OL=kt("disable_nodechange"),yk=kt("readonly"),jh=kt("editable_root"),Ck=kt("content_css_cors"),Bf=kt("plugins"),Gh=kt("external_plugins"),kL=kt("block_unsupported_drop"),Sk=kt("visual"),DL=kt("visual_table_class"),xk=kt("visual_anchor_class"),wk=kt("iframe_aria_text"),Ek=kt("setup"),JK=kt("init_instance_callback"),ML=kt("urlconverter_callback"),Tk=kt("auto_focus"),rw=kt("browser_spellcheck"),aw=kt("protect"),iw=kt("paste_block_drop"),ev=kt("paste_data_images"),Ak=kt("paste_preprocess"),Ok=kt("paste_postprocess"),by=kt("newdocument_content"),RL=kt("paste_webkit_styles"),kk=kt("paste_remove_styles_if_webkit"),Dk=kt("paste_merge_formats"),Mk=kt("smart_paste"),Rk=kt("paste_as_text"),Pk=kt("paste_tab_spaces"),PL=kt("allow_html_data_urls"),NL=kt("text_patterns"),IL=kt("text_patterns_lookup"),Nk=kt("noneditable_class"),BL=kt("editable_class"),LL=kt("noneditable_regexp"),FL=kt("preserve_cdata"),_L=kt("highlight_on_focus"),tv=kt("xss_sanitization"),Ik=kt("init_content_sync"),$L=e=>e.options.isSet("text_patterns_lookup"),Bk=e=>ut.explode(e.options.get("font_size_style_values")),Lk=e=>ut.explode(e.options.get("font_size_classes")),HL=e=>e.options.get("encoding")==="xml",Fk=e=>ut.explode(e.options.get("images_file_types")),VL=kt("table_tab_navigation"),zL=kt("details_initial_state"),UL=kt("details_serialized_state"),lw=kt("sandbox_iframes"),yy=e=>e.options.get("sandbox_iframes_exclusions"),Cy=kt("convert_unsafe_embeds"),ZL=kt("license_key"),WL=kt("api_key"),Kh=kt("disabled"),jL=Bt,cw=at,uw=e=>{const n=e.parentNode;n&&n.removeChild(e)},dw=e=>{const n=Oi(e);return{count:e.length-n.length,text:n}},_k=e=>{let n;for(;(n=e.data.lastIndexOf(Ar))!==-1;)e.deleteData(n,1)},$k=(e,n)=>(Lf(e),n),GL=(e,n)=>{const o=dw(e.data.substr(0,n.offset())),r=dw(e.data.substr(n.offset()));return(o.text+r.text).length>0?(_k(e),Be(e,n.offset()-o.count)):n},KL=(e,n)=>{const o=n.container(),r=Bs(Vn(o.childNodes),e).map(i=>i<n.offset()?Be(o,n.offset()-1):n).getOr(n);return Lf(e),r},Sy=(e,n)=>cw(e)&&n.container()===e?GL(e,n):$k(e,n),Hk=(e,n)=>n.container()===e.parentNode?KL(e,n):$k(e,n),Vk=(e,n)=>Be.isTextPosition(n)?Sy(e,n):Hk(e,n),Lf=e=>{jL(e)&&Ys(e)&&(H1(e)?e.removeAttribute("data-mce-caret"):uw(e)),cw(e)&&(_k(e),e.data.length===0&&uw(e))},zk=ss,YL=Ol,XL=D1,JL="*[contentEditable=false],video,audio,embed,object",Uk=(e,n,o)=>{const r=Do(n.getBoundingClientRect(),o);let i,c;if(e.tagName==="BODY"){const g=e.ownerDocument.documentElement;i=e.scrollLeft||g.scrollLeft,c=e.scrollTop||g.scrollTop}else{const g=e.getBoundingClientRect();i=e.scrollLeft-g.left,c=e.scrollTop-g.top}r.left+=i,r.right+=i,r.top+=c,r.bottom+=c,r.width=1;let d=n.offsetWidth-n.clientWidth;return d>0&&(o&&(d*=-1),r.left+=d,r.right+=d),r},QL=e=>{var n,o;const r=Xo(ne.fromDom(e),JL);for(let i=0;i<r.length;i++){const c=r[i].dom;let d=c.previousSibling;if(Yb(d)){const g=d.data;g.length===1?(n=d.parentNode)===null||n===void 0||n.removeChild(d):d.deleteData(g.length-1,1)}d=c.nextSibling,Lh(d)&&(d.data.length===1?(o=d.parentNode)===null||o===void 0||o.removeChild(d):d.deleteData(0,1))}},qL=(e,n,o,r)=>{const i=Gr();let c,d;const g=Ma(e),h=e.dom,y=(V,G)=>{let oe;if(A(),XL(G))return null;if(o(G)){const ue=L7(g,G,V),ge=Uk(n,G,V);h.setStyle(ue,"top",ge.top),h.setStyle(ue,"caret-color","transparent"),d=ue;const Se=h.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});h.setStyles(Se,{...ge}),h.add(n,Se),i.set({caret:Se,element:G,before:V}),V&&h.addClass(Se,"mce-visual-caret-before"),M(),oe=G.ownerDocument.createRange(),oe.setStart(ue,0),oe.setEnd(ue,0)}else return d=Bx(G,V),oe=G.ownerDocument.createRange(),nv(d.nextSibling)?(oe.setStart(d,0),oe.setEnd(d,0)):(oe.setStart(d,1),oe.setEnd(d,1)),oe;return oe},A=()=>{QL(n),d&&(Lf(d),d=null),i.on(V=>{h.remove(V.caret),i.clear()}),c&&(clearInterval(c),c=void 0)},M=()=>{c=window.setInterval(()=>{i.on(V=>{r()?h.toggleClass(V.caret,"mce-visual-caret-hidden"):h.addClass(V.caret,"mce-visual-caret-hidden")})},500)},R=()=>{i.on(V=>{const G=Uk(n,V.element,V.before);h.setStyles(V.caret,{...G})})},_=()=>clearInterval(c),Z=()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}";return{isShowing:i.isSet,show:y,hide:A,getCss:Z,reposition:R,destroy:_}},Zk=()=>no.browser.isFirefox(),nv=e=>zk(e)||YL(e),ov=e=>(nv(e)||Lu(e)&&Zk())&&Sm(ne.fromDom(e)).exists(Sd),eF=hc,fw=ss,tF=Ol,sv=kb("display","block table table-cell table-row table-caption list-item"),mw=Ys,gw=or,nF=Bt,oF=at,sF=wc,Yh=e=>e===1,jm=e=>e===-1,xy=(e,n)=>{let o;for(;o=e(n);)if(!gw(o))return o;return null},Xh=(e,n,o,r,i)=>{const c=new _r(e,r),d=fw(e)||gw(e);let g;if(jm(n)){if(d&&(g=xy(c.prev.bind(c),!0),o(g)))return g;for(;g=xy(c.prev.bind(c),i);)if(o(g))return g}if(Yh(n)){if(d&&(g=xy(c.next.bind(c),!0),o(g)))return g;for(;g=xy(c.next.bind(c),i);)if(o(g))return g}return null},rF=(e,n)=>{const o=i=>eF(i.dom),r=i=>i.dom===n;return yd(ne.fromDom(e),o,r).map(i=>i.dom).getOr(n)},Fd=(e,n)=>{for(;e&&e!==n;){if(sv(e))return e;e=e.parentNode}return null},tu=(e,n,o)=>Fd(e.container(),o)===Fd(n.container(),o),hw=(e,n)=>{if(!n)return N.none();const o=n.container(),r=n.offset();return nF(o)?N.from(o.childNodes[r+e]):N.none()},Wk=(e,n)=>{var o;const i=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),i},aF=(e,n,o)=>Fd(n,e)===Fd(o,e),jk=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let i=o;for(;i&&i!==n;){let c=i[r];if(c&&mw(c)&&(c=c[r]),fw(c)||tF(c)){if(aF(n,c,i))return c;break}if(sF(c))break;i=i.parentNode}return null},rv=ht(Wk,!0),av=ht(Wk,!1),pw=(e,n,o)=>{let r;const i=ht(jk,!0,n),c=ht(jk,!1,n),d=o.startContainer,g=o.startOffset;if(or(d)){const h=oF(d)?d.parentNode:d,y=h.getAttribute("data-mce-caret");if(y==="before"&&(r=h.nextSibling,ov(r)))return rv(r);if(y==="after"&&(r=h.previousSibling,ov(r)))return av(r)}if(!o.collapsed)return o;if(at(d)){if(mw(d)){if(e===1){if(r=c(d),r)return rv(r);if(r=i(d),r)return av(r)}if(e===-1){if(r=i(d),r)return av(r);if(r=c(d),r)return rv(r)}return o}if(Yb(d)&&g>=d.data.length-1)return e===1&&(r=c(d),r)?rv(r):o;if(Lh(d)&&g<=1)return e===-1&&(r=i(d),r)?av(r):o;if(g===d.data.length)return r=c(d),r?rv(r):o;if(g===0)return r=i(d),r?av(r):o}return o},Gk=(e,n)=>hw(e?0:-1,n).filter(fw),iv=(e,n,o)=>{const r=pw(e,n,o);return e===-1?Be.fromRangeStart(r):Be.fromRangeEnd(r)},wy=e=>N.from(e.getNode()).map(ne.fromDom),iF=e=>N.from(e.getNode(!0)).map(ne.fromDom),vw=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},Ey=(e,n)=>{const o=tu(e,n);return!o&&ws(e.getNode())?!0:o},lF=ss,Wu=at,Kk=Bt,bw=ws,Jh=wc,Yk=YO,It=Wx,Ty=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},yw=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Xk=(e,n)=>{if(Yh(e)){if(Jh(n.previousSibling)&&!Wu(n.previousSibling))return Be.before(n);if(Wu(n))return Be(n,0)}if(jm(e)){if(Jh(n.nextSibling)&&!Wu(n.nextSibling))return Be.after(n);if(Wu(n))return Be(n,n.data.length)}return jm(e)?bw(n)?Be.before(n):Be.after(n):Be.before(n)},Jk=(e,n)=>{const o=n.nextSibling;return o&&Jh(o)?Wu(o)?Be(o,0):Be.before(o):Qh(1,Be.after(n),e)},Qh=(e,n,o)=>{let r,i,c,d;if(!Kk(o)||!n)return null;if(n.isEqual(Be.after(o))&&o.lastChild){if(d=Be.after(o.lastChild),jm(e)&&Jh(o.lastChild)&&Kk(o.lastChild))return bw(o.lastChild)?Be.before(o.lastChild):d}else d=n;const g=d.container();let h=d.offset();if(Wu(g)){if(jm(e)&&h>0)return Be(g,--h);if(Yh(e)&&h<g.length)return Be(g,++h);r=g}else{if(jm(e)&&h>0&&(i=yw(g,h-1),Jh(i)))return!Yk(i)&&(c=Xh(i,e,It,i),c)?Wu(c)?Be(c,c.data.length):Be.after(c):Wu(i)?Be(i,i.data.length):Be.before(i);if(Yh(e)&&h<g.childNodes.length&&(i=yw(g,h),Jh(i)))return bw(i)?Jk(o,i):!Yk(i)&&(c=Xh(i,e,It,i),c)?Wu(c)?Be(c,0):Be.before(c):Wu(i)?Be(i,0):Be.after(i);r=i||d.getNode()}if(r&&(Yh(e)&&d.isAtEnd()||jm(e)&&d.isAtStart())&&(r=Xh(r,e,Qe,o,!0),It(r,o)))return Xk(e,r);i=r&&Xh(r,e,It,o);const y=Kn(Ht(Ty(g,o),lF));return y&&(!i||!y.contains(i))?(Yh(e)?d=Be.after(y):d=Be.before(y),d):i?Xk(e,i):null},Ac=e=>({next:n=>Qh(1,n,e),prev:n=>Qh(-1,n,e)}),lv=(e,n,o)=>{const r=e?Be.before(o):Be.after(o);return Nl(e,n,r)},cv=e=>ws(e)?Be.before(e):Be.after(e),Cw=e=>Be.isTextPosition(e)?e.offset()===0:wc(e.getNode()),Ay=e=>{if(Be.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return wc(e.getNode(!0))},Sw=(e,n)=>!Be.isTextPosition(e)&&!Be.isTextPosition(n)&&e.getNode()===n.getNode(!0),cF=e=>!Be.isTextPosition(e)&&ws(e.getNode()),uF=(e,n,o)=>e?!Sw(n,o)&&!cF(n)&&Ay(n)&&Cw(o):!Sw(o,n)&&Cw(n)&&Ay(o),Nl=(e,n,o)=>{const r=Ac(n);return N.from(e?r.next(o):r.prev(o))},Oc=(e,n,o)=>Nl(e,n,o).bind(r=>tu(o,r,n)&&uF(e,o,r)?Nl(e,n,r):N.some(r)),xw=(e,n,o,r)=>Oc(e,n,o).bind(i=>r(i)?xw(e,n,i,r):N.some(i)),Gm=(e,n)=>{const o=e?n.firstChild:n.lastChild;return at(o)?N.some(Be(o,e?0:o.data.length)):o?wc(o)?N.some(e?Be.before(o):cv(o)):lv(e,n,o):N.none()},rr=ht(Nl,!0),li=ht(Nl,!1),na=ht(Gm,!0),Di=ht(Gm,!1),Oy="_mce_caret",Il=e=>Bt(e)&&e.id===Oy,Km=(e,n)=>{let o=n;for(;o&&o!==e;){if(Il(o))return o;o=o.parentNode}return null},Qk=e=>ee(e.start),qk=e=>nn(e,"rng"),eD=e=>nn(e,"id"),tD=e=>nn(e,"name"),nD=e=>ut.isArray(e.start),qh=e=>!tD(e)&&ct(e.forward)?e.forward:!0,ww=(e,n)=>(Bt(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),oD=(e,n)=>{const o=N.from(Jx(e.getRoot(),n.start)),r=N.from(Jx(e.getRoot(),n.end));return Zs(o,r,(i,c)=>{const d=e.createRng();return d.setStart(i.container(),i.offset()),d.setEnd(c.container(),c.offset()),{range:d,forward:qh(n)}})},dF=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Ar);e.appendChild(i),n.setStart(i,0),n.setEnd(i,0)},Ew=e=>!e.hasChildNodes(),fF=(e,n)=>Di(e).fold(Ie,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),sD=(e,n,o)=>Ew(n)&&Km(e,n)?(dF(n,o),!0):!1,rD=(e,n,o,r)=>{const i=o[n?"start":"end"],c=e.getRoot();if(i){let d=c,g=i[0];for(let h=i.length-1;d&&h>=1;h--){const y=d.childNodes;if(sD(c,d,r))return!0;if(i[h]>y.length-1)return sD(c,d,r)?!0:fF(d,r);d=y[i[h]]}at(d)&&(g=Math.min(i[0],d.data.length)),Bt(d)&&(g=Math.min(i[0],d.childNodes.length)),n?r.setStart(d,g):r.setEnd(d,g)}return!0},Tw=e=>at(e)&&e.data.length>0,aD=(e,n,o)=>{const r=e.get(o.id+"_"+n),i=r==null?void 0:r.parentNode,c=o.keep;if(r&&i){let d,g;if(n==="start"?c?r.hasChildNodes()?(d=r.firstChild,g=1):Tw(r.nextSibling)?(d=r.nextSibling,g=0):Tw(r.previousSibling)?(d=r.previousSibling,g=r.previousSibling.data.length):(d=i,g=e.nodeIndex(r)+1):(d=i,g=e.nodeIndex(r)):c?r.hasChildNodes()?(d=r.firstChild,g=1):Tw(r.previousSibling)?(d=r.previousSibling,g=r.previousSibling.data.length):(d=i,g=e.nodeIndex(r)):(d=i,g=e.nodeIndex(r)),!c){const h=r.previousSibling,y=r.nextSibling;ut.each(ut.grep(r.childNodes),M=>{at(M)&&(M.data=M.data.replace(/\uFEFF/g,""))});let A;for(;A=e.get(o.id+"_"+n);)e.remove(A,!0);if(at(y)&&at(h)&&!no.browser.isOpera()){const M=h.data.length;h.appendData(y.data),e.remove(y),d=h,g=M}}return N.some(Be(d,g))}else return N.none()},ky=(e,n)=>{const o=e.createRng();return rD(e,!0,n,o)&&rD(e,!1,n,o)?N.some({range:o,forward:qh(n)}):N.none()},iD=(e,n)=>{const o=aD(e,"start",n),r=aD(e,"end",n);return Zs(o,r.or(o),(i,c)=>{const d=e.createRng();return d.setStart(ww(e,i.container()),i.offset()),d.setEnd(ww(e,c.container()),c.offset()),{range:d,forward:qh(n)}})},QK=(e,n)=>N.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),mF=(e,n)=>{const o=e.dom;if(n){if(nD(n))return ky(o,n);if(Qk(n))return oD(o,n);if(eD(n))return iD(o,n);if(tD(n))return QK(o,n);if(qk(n))return N.some({range:n.rng,forward:qh(n)})}return N.none()},fn=(e,n,o)=>j7(e,n,o),gF=(e,n)=>{mF(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},Bl=e=>Bt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Dy=(e=>n=>e===n)(zo),Ym=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Aw=e=>!Ym(e)&&!Dy(e)&&!Er(e),My=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},hF=e=>Rs(e,n=>{const o=Qb(n);return o?[ne.fromDom(o)]:[]}),Ow=e=>My(e).length>1,uv=e=>Ht(hF(e),Of),ep=e=>Xo(e,"td[data-mce-selected],th[data-mce-selected]"),lD=(e,n)=>{const o=ep(n);return o.length>0?o:uv(e)},_d=e=>lD(My(e.selection.getSel()),ne.fromDom(e.getBody())),dv=(e,n)=>w1(e,"table",n),pF=e=>{const n=e.startContainer,o=e.startOffset;return at(n)?o===0?N.some(ne.fromDom(n)):N.none():N.from(n.childNodes[o]).map(ne.fromDom)},vF=e=>{const n=e.endContainer,o=e.endOffset;return at(n)?o===n.data.length?N.some(ne.fromDom(n)):N.none():N.from(n.childNodes[o-1]).map(ne.fromDom)},cD=e=>Tr(e).fold(Ye([e]),n=>[e].concat(cD(n))),Ry=e=>xm(e).fold(Ye([e]),n=>ao(n)==="br"?ku(n).map(o=>[e].concat(Ry(o))).getOr([]):[e].concat(Ry(n))),kw=(e,n)=>Zs(pF(n),vF(n),(o,r)=>{const i=No(cD(e),ht(Un,o)),c=No(Ry(e),ht(Un,r));return i.isSome()&&c.isSome()}).getOr(!1),Dw=(e,n,o,r)=>{const i=o,c=new _r(o,i),d=bi(e.schema.getMoveCaretBeforeOnEnterElements(),(h,y)=>!_t(["td","th","table"],y.toLowerCase()));let g=o;do{if(at(g)&&ut.trim(g.data).length!==0){r?n.setStart(g,0):n.setEnd(g,g.data.length);return}if(d[g.nodeName]){r?n.setStartBefore(g):g.nodeName==="BR"?n.setEndBefore(g):n.setEndAfter(g);return}}while(g=r?c.next():c.prev());i.nodeName==="BODY"&&(r?n.setStart(i,0):n.setEnd(i,i.childNodes.length))},Py=e=>{const n=e.selection.getSel();return Ce(n)&&n.rangeCount>0},Mw=(e,n)=>{const o=_d(e);o.length>0?ke(o,r=>{const i=r.dom,c=e.dom.createRng();c.setStartBefore(i),c.setEndAfter(i),n(c,!0)}):n(e.selection.getRng(),!1)},uD=(e,n,o)=>{const r=ki(e,n);o(r),e.moveToBookmark(r)},Xm=e=>St(e==null?void 0:e.nodeType),Rw=e=>Bt(e)&&!Bl(e)&&!Il(e)&&!Dm(e),bF=(e,n)=>{if(Rw(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},dD=(e,n,o)=>{const{selection:r,dom:i}=e,c=r.getNode(),d=ss(c);uD(r,!0,()=>{n()}),d&&ss(c)&&i.isChildOf(c,e.getBody())?e.selection.select(c):o(r.getStart())&&yF(i,r)},yF=(e,n)=>{var o,r;const i=n.getRng(),{startContainer:c,startOffset:d}=i,g=n.getNode();if(!bF(e,g)&&Bt(c)){const h=c.childNodes,y=e.getRoot();let A;if(d<h.length){const M=h[d];A=new _r(M,(o=e.getParent(M,e.isBlock))!==null&&o!==void 0?o:y)}else{const M=h[h.length-1];A=new _r(M,(r=e.getParent(M,e.isBlock))!==null&&r!==void 0?r:y),A.next(!0)}for(let M=A.current();M;M=A.next()){if(e.getContentEditable(M)==="false")return;if(at(M)&&!Nw(M)){i.setStart(M,0),n.setRng(i);return}}}},fD=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(Bt(e)||!Nw(e))return e}},Pw=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||vc(e,n),tp=(e,n,o)=>e.schema.isValidChild(n,o),Nw=(e,n=!1)=>{if(Ce(e)&&at(e)){const o=n?e.data.replace(/ /g," "):e.data;return _s(o)}else return!1},Jm=e=>Ce(e)&&at(e)&&e.length===0,CF=(e,n)=>{const o="[data-mce-cef-wrappable]",r=EL(e),i=oc(r)?o:`${o},${r}`;return Si(ne.fromDom(n),i)},mD=(e,n)=>{const o=e.dom;return Rw(n)&&o.getContentEditable(n)==="false"&&CF(e,n)&&o.select('[contenteditable="true"]',n).length===0},Ff=(e,n)=>Tt(e)?e(n):(Ce(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),Iw=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),Bw=(e,n)=>{if(dt(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=I1(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},fv=(e,n,o)=>{const r=e.getStyle(n,o);return Bw(r,o)},gD=(e,n)=>{let o;return e.getParent(n,r=>Bt(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},Ny=(e,n,o)=>e.getParents(n,o,e.getRoot()),Lw=(e,n,o)=>{const r=e.formatter.get(n);return Ce(r)&&to(r,o)},SF=(e,n)=>Lw(e,n,r=>{const i=c=>Tt(c)||c.length>1&&c.charAt(0)==="%";return to(["styles","attributes"],c=>Fo(r,c).exists(d=>{const g=Ke(d)?d:pu(d);return to(g,i)}))}),xF=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],i=c=>bi(c,(d,g)=>to(r,h=>h===g));return Lw(e,n,c=>{const d=i(c);return Lw(e,o,g=>{const h=i(g);return th(d,h)})})},ju=e=>Wc(e,"block"),wF=e=>ju(e)&&e.wrapper===!0,EF=e=>ju(e)&&e.wrapper!==!0,Ll=e=>Wc(e,"selector"),kr=e=>Wc(e,"inline"),TF=e=>Ll(e)&&kr(e)&&Ui(Fo(e,"mixed"),!0),Fw=e=>Ll(e)&&e.expand!==!1&&!kr(e),AF=e=>{const n=[];let o=e;for(;o;){if(at(o)&&o.data!==Ar||o.childNodes.length>1)return[];Bt(o)&&n.push(o),o=o.firstChild}return n},Wo=e=>AF(e).length>0,Iy=e=>Il(e.dom)&&Wo(e.dom),np=Bl,hD=Ny,By=Nw,pa=Pw,tl=e=>ws(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,OF=(e,n)=>{let o=n;for(;o;){if(Bt(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},kF=(e,n,o,r)=>{const i=n.data;if(e){for(let c=o;c>0;c--)if(r(i.charAt(c-1)))return c}else for(let c=o;c<i.length;c++)if(r(i.charAt(c)))return c;return-1},eY=(e,n,o)=>kF(e,n,o,r=>Dy(r)||Ym(r)),DF=(e,n,o)=>kF(e,n,o,Aw),pD=(e,n,o,r,i,c)=>{let d;const g=e.getParent(o,M=>Cf(M)||e.isBlock(M)),h=Ce(g)?g:n,y=(M,R,_)=>{const Z=zu(e),V=i?Z.backwards:Z.forwards;return N.from(V(M,R,(G,oe)=>np(G.parentNode)?-1:(d=G,_(i,G,oe)),h))};return y(o,r,eY).bind(M=>c?y(M.container,M.offset+(i?-1:0),DF):N.some(M)).orThunk(()=>d?N.some({container:d,offset:i?0:d.length}):N.none())},MF=(e,n,o,r,i)=>{const c=r[i];at(r)&&oc(r.data)&&c&&(r=c);const d=hD(e,r);for(let g=0;g<d.length;g++)for(let h=0;h<n.length;h++){const y=n[h];if(!(Ce(y.collapsed)&&y.collapsed!==o.collapsed)&&Ll(y)&&e.is(d[g],y.selector))return d[g]}return r},vD=(e,n,o,r)=>{var i;let c=o;const d=e.getRoot(),g=n[0];if(ju(g)&&(c=g.wrapper?null:e.getParent(o,g.block,d)),!c){const h=(i=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&i!==void 0?i:d;c=e.getParent(at(o)?o.parentNode:o,y=>y!==d&&pa(e.schema,y),h)}if(c&&ju(g)&&g.wrapper&&(c=hD(e,c,"ul,ol").reverse()[0]||c),!c)for(c=o;c&&c[r]&&!e.isBlock(c[r])&&(c=c[r],!Iw(c,"br")););return c||o},kc=(e,n,o,r)=>{const i=o.parentNode;return Ce(o[r])?!1:i===n||dt(i)||e.isBlock(i)?!0:kc(e,n,i,r)},_w=(e,n,o,r,i,c)=>{let d=o;const g=i?"previousSibling":"nextSibling",h=e.getRoot();if(at(o)&&!By(o)&&(i?r>0:r<o.data.length))return o;for(;d;){if(Cf(d))return o;if(!n[0].block_expand&&e.isBlock(d))return c?d:o;for(let y=d[g];y;y=y[g]){const A=at(y)&&!kc(e,h,y,g);if(!np(y)&&!tl(y)&&!By(y,A))return d}if(d===h||d.parentNode===h){o=d;break}d=d.parentNode}return o},bD=e=>np(e.parentNode)||np(e),Qm=(e,n,o,r={})=>{const{includeTrailingSpace:i=!1,expandToBlock:c=!0}=r,d=e.getParent(n.commonAncestorContainer,_=>Cf(_)),g=Ce(d)?d:e.getRoot();let{startContainer:h,startOffset:y,endContainer:A,endOffset:M}=n;const R=o[0];return Bt(h)&&h.hasChildNodes()&&(h=ha(h,y),at(h)&&(y=0)),Bt(A)&&A.hasChildNodes()&&(A=ha(A,n.collapsed?M:M-1),at(A)&&(M=A.data.length)),h=OF(e,h),A=OF(e,A),bD(h)&&(h=np(h)?h:h.parentNode,n.collapsed?h=h.previousSibling||h:h=h.nextSibling||h,at(h)&&(y=n.collapsed?h.length:0)),bD(A)&&(A=np(A)?A:A.parentNode,n.collapsed?A=A.nextSibling||A:A=A.previousSibling||A,at(A)&&(M=n.collapsed?0:A.length)),n.collapsed&&(pD(e,g,h,y,!0,i).each(({container:V,offset:G})=>{h=V,y=G}),pD(e,g,A,M,!1,i).each(({container:V,offset:G})=>{A=V,M=G})),(kr(R)||R.block_expand)&&((!kr(R)||!at(h)||y===0)&&(h=_w(e,o,h,y,!0,c)),(!kr(R)||!at(A)||M===A.data.length)&&(A=_w(e,o,A,M,!1,c))),Fw(R)&&(h=MF(e,o,n,h,"previousSibling"),A=MF(e,o,n,A,"nextSibling")),(ju(R)||Ll(R))&&(h=vD(e,o,h,"previousSibling"),A=vD(e,o,A,"nextSibling"),ju(R)&&(e.isBlock(h)||(h=_w(e,o,h,y,!0,c),at(h)&&(y=0)),e.isBlock(A)||(A=_w(e,o,A,M,!1,c),at(A)&&(M=A.data.length)))),Bt(h)&&h.parentNode&&(y=e.nodeIndex(h),h=h.parentNode),Bt(A)&&A.parentNode&&(M=e.nodeIndex(A)+1,A=A.parentNode),{startContainer:h,startOffset:y,endContainer:A,endOffset:M}},Wn=(e,n,o)=>{var r;const i=n.startOffset,c=ha(n.startContainer,i),d=n.endOffset,g=ha(n.endContainer,d-1),h=G=>{const oe=G[0];at(oe)&&oe===c&&i>=oe.data.length&&G.splice(0,1);const ue=G[G.length-1];return d===0&&G.length>0&&ue===g&&at(ue)&&G.splice(G.length-1,1),G},y=(G,oe,ue)=>{const ge=[];for(;G&&G!==ue;G=G[oe])ge.push(G);return ge},A=(G,oe)=>e.getParent(G,ue=>ue.parentNode===oe,oe),M=(G,oe,ue)=>{const ge=ue?"nextSibling":"previousSibling";for(let Se=G,Ue=Se.parentNode;Se&&Se!==oe;Se=Ue){Ue=Se.parentNode;const tt=y(Se===G?Se:Se[ge],ge);tt.length&&(ue||tt.reverse(),o(h(tt)))}};if(c===g)return o(h([c]));const R=(r=e.findCommonAncestor(c,g))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(c,g))return M(c,R,!0);if(e.isChildOf(g,c))return M(g,R);const _=A(c,R)||c,Z=A(g,R)||g;M(c,_,!0);const V=y(_===c?_:_.nextSibling,"nextSibling",Z===g?Z.nextSibling:Z);V.length&&o(h(V)),M(g,Z)},tY=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],nY=e=>Ea(e)&&Ch(e)===Ar,RF=(e,n,o,r)=>Sm(n).fold(()=>"skipping",i=>r==="br"||nY(n)?"valid":HO(n)?"existing":Il(n.dom)?"caret":to(tY,c=>Si(n,c))?"valid-block":!tp(e,o,r)||!tp(e,ao(i),o)?"invalid-child":"valid"),PF=(e,n)=>{const o=Qm(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},NF=(e,n,o,r,i,c)=>{const{uid:d=n,...g}=o;Yo(e,$m()),fr(e,`${Hm()}`,d),fr(e,`${Ao()}`,r);const{attributes:h={},classes:y=[]}=i(d,g);if(xi(e,h),FB(e,y),c){y.length>0&&fr(e,`${$1()}`,y.join(","));const A=Yt(h);A.length>0&&fr(e,`${Vm()}`,A.join(","))}},IF=e=>{Jr(e,$m()),tr(e,`${Hm()}`),tr(e,`${Ao()}`),tr(e,`${Ph()}`);const n=Aa(e,`${Vm()}`).map(r=>r.split(",")).getOr([]),o=Aa(e,`${$1()}`).map(r=>r.split(",")).getOr([]);ke(n,r=>tr(e,r)),_B(e,o),tr(e,`${$1()}`),tr(e,`${Vm()}`)},hs=(e,n,o,r,i)=>{const c=ne.fromTag("span",e);return NF(c,n,o,r,i,!1),c},BF=(e,n,o,r,i,c)=>{const d=[],g=hs(e.getDoc(),o,c,r,i),h=Gr(),y=()=>{h.clear()},A=()=>h.get().getOrThunk(()=>{const Z=Y(g);return d.push(Z),h.set(Z),Z}),M=Z=>{ke(Z,R)},R=Z=>{switch(RF(e,Z,"span",ao(Z))){case"invalid-child":{y();const G=Fr(Z);M(G),y();break}case"valid-block":{y(),NF(Z,o,c,r,i,!0);break}case"valid":{const G=A();bh(Z,G);break}}},_=Z=>{const V=Ot(Z,ne.fromDom);M(V)};return Wn(e.dom,n,Z=>{y(),_(Z)}),d},yD=(e,n,o,r)=>{e.undoManager.transact(()=>{const i=e.selection,c=i.getRng(),d=_d(e).length>0,g=ni("mce-annotation");if(c.collapsed&&!d&&PF(e,c),i.getRng().collapsed&&!d){const h=hs(e.getDoc(),g,r,n,o.decorate);zn(h,zo),i.getRng().insertNode(h.dom),i.select(h.dom)}else uD(i,!1,()=>{Mw(e,h=>{BF(e,h,g,n,o.decorate,r)})})})},Ly=e=>{const n=Af();k7(e,n);const o=O7(e,n),r=dr("span"),i=c=>{ke(c,d=>{r(d)?k(d):IF(d)})};return{register:(c,d)=>{n.register(c,d)},annotate:(c,d)=>{n.lookup(c).each(g=>{yD(e,c,g,d)})},annotationChanged:(c,d)=>{o.addListener(c,d)},remove:c=>{$O(e,N.some(c)).each(({elements:d})=>{const g=e.selection.getBookmark();i(d),e.selection.moveToBookmark(g)})},removeAll:c=>{const d=e.selection.getBookmark();$e(Mx(e,c),(g,h)=>{i(g)}),e.selection.moveToBookmark(d)},getAll:c=>{const d=Mx(e,c);return yt(d,g=>Ot(g,h=>h.dom))}}},mv=e=>({getBookmark:ht(fn,e),moveToBookmark:ht(gF,e)});mv.isBookmarkNode=Bl;const CD=(e,n,o)=>o.collapsed?!1:to(o.getClientRects(),r=>Hx(r,e,n)),SD=(e,n)=>{const o=Ea(n)?Ch(n).length:Fr(n).length+1;return e>o?o:e<0?0:e},LF=e=>Eh.range(e.start,SD(e.soffset,e.start),e.finish,SD(e.foffset,e.finish)),xD=(e,n)=>!Th(n.dom)&&(El(e,n)||Un(e,n)),wD=e=>n=>xD(e,n.start)&&xD(e,n.finish),$w=e=>e.inline||no.browser.isFirefox(),Hw=e=>Eh.range(ne.fromDom(e.startContainer),e.startOffset,ne.fromDom(e.endContainer),e.endOffset),ED=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?N.none():N.from(n.getRangeAt(0))).map(Hw)},oY=e=>{const n=Ou(e);return ED(n.dom).filter(wD(e))},FF=(e,n)=>N.from(n).filter(wD(e)).map(LF),sY=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),N.some(n)}catch{return N.none()}},Vw=e=>{const n=$w(e)?oY(ne.fromDom(e.getBody())):N.none();e.bookmark=n.isSome()?n:e.bookmark},zw=e=>(e.bookmark?e.bookmark:N.none()).bind(o=>FF(ne.fromDom(e.getBody()),o)).bind(sY),_F=e=>{zw(e).each(n=>e.selection.setRng(n))},Fl={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},$F=(e,n)=>(St(n)||(n=0),window.setTimeout(e,n)),TD=(e,n)=>(St(n)||(n=0),window.setInterval(e,n)),_l={setEditorTimeout:(e,n,o)=>$F(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=TD(()=>{e.removed?window.clearInterval(r):n()},o);return r}},AD=(e,n)=>e.view(n).fold(Ye([]),r=>{const i=e.owner(r),c=AD(e,i);return[r].concat(c)}),HF=(e,n)=>{const o=n.owner(e);return AD(n,o)};var Uw=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?N.none():N.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(ne.fromDom)},owner:e=>Au(e)});const Fy=e=>{const n=y1(),o=x1(n),r=HF(e,Uw),i=qS(e),c=ur(r,(d,g)=>{const h=qS(g);return{left:d.left+h.left,top:d.top+h.top}},{left:0,top:0});return da(c.left+i.left+o.left,c.top+i.top+o.top)},Zw=e=>e.type==="nodechange"&&e.selectionChange,UF=(e,n)=>{const o=()=>{n.throttle()};Co.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Co.DOM.unbind(document,"mouseup",o)})},ZF=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},WF=(e,n)=>{ZF(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{Zw(o)||Vw(e)})},jF=e=>{const n=Ns(()=>{Vw(e)},0);e.on("init",()=>{e.inline&&UF(e,n),WF(e,n)}),e.on("remove",()=>{n.cancel()})};let _f;const _y=Co.DOM,GF=e=>Bt(e)&&Fl.isEditorUIElement(e),$y=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},Hy=(e,n)=>{const o=TL(e);return _y.getParent(n,i=>GF(i)||(o?e.dom.is(i,o):!1))!==null},gv=e=>{try{const n=Tl(ne.fromDom(e.getElement()));return Em(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},KF=(e,n)=>{const o=n.editor;jF(o);const r=(c,d)=>{if(_L(c)&&c.inline!==!0){const g=ne.fromDom(c.getContainer());d(g,"tox-edit-focus")}},i=c=>{if(!c.iframeElement)return;const g=ne.fromDom(c.iframeElement),h=Fy(g),y=O1(window);(h.top<y.y||h.top>y.bottom-25)&&g.dom.scrollIntoView({block:"center"})};o.on("focusin",()=>{const c=e.focusedEditor;if($y(gv(o))&&r(o,Yo),c!==o){c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0);const d=la().browser;o.inline!==!0&&(d.isSafari()||d.isChromium())&&i(o)}}),o.on("focusout",()=>{_l.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!$y(gv(o))||c!==o)&&r(o,Jr),!Hy(o,gv(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),_f||(_f=c=>{const d=e.activeEditor;d&&ub(c).each(g=>{const h=g;h.ownerDocument===document&&h!==document.body&&!Hy(d,h)&&e.focusedEditor===d&&(d.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},_y.bind(document,"focusin",_f))},YF=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&_f&&(_y.unbind(document,"focusin",_f),_f=null)},XF=e=>{e.on("AddEditor",ht(KF,e)),e.on("RemoveEditor",ht(YF,e))},JF=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),QF=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,OD=e=>e.collapsed?N.from(ha(e.startContainer,e.startOffset)).map(ne.fromDom):N.none(),Ww=(e,n)=>OD(n).bind(o=>Ix(o)?N.some(o):El(e,o)?N.none():N.some(e)),jw=(e,n)=>{Ww(ne.fromDom(e.getBody()),n).bind(o=>na(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},hv=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},qF=e=>mb(e)||dc(e).isSome(),e_=e=>Ce(e.iframeElement)&&mb(ne.fromDom(e.iframeElement)),t_=e=>{const n=e.getBody();return n&&qF(ne.fromDom(n))},Vy=e=>{const n=Tl(ne.fromDom(e.getElement()));return Em(n).filter(o=>!$y(o.dom)&&Hy(e,o.dom)).isSome()},qm=e=>e.inline?t_(e):e_(e),zy=e=>qm(e)||Vy(e),n_=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const i=d=>{zw(d).each(g=>{d.selection.setRng(g),r=g})};!qm(e)&&e.hasEditableRoot()&&i(e);const c=JF(e,n.getNode());if(c&&e.dom.isChildOf(c,o)){QF(e,c)||hv(o),hv(c),e.hasEditableRoot()||i(e),jw(e,r),Gw(e);return}e.inline||(no.browser.isOpera()||hv(o),e.getWin().focus()),(no.browser.isFirefox()||e.inline)&&(hv(o),jw(e,r)),Gw(e)},Gw=e=>e.editorManager.setActive(e),rY=(e,n)=>{e.removed||(n?Gw(e):n_(e))},Mt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Mt.metaKeyPressed(e),metaKeyPressed:e=>no.os.isMacOS()||no.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},op="data-mce-selected",o_="table,img,figure.image,hr,video,span.mce-preview-object,details",s_=Math.abs,Uy=Math.round,Kw={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},aY=e=>e.type==="longpress"||e.type.indexOf("touch")===0,kD=(e,n)=>{const o=n.dom,r=n.getDoc(),i=document,c=n.getBody();let d,g,h,y,A,M,R,_,Z,V,G,oe,ue,ge,Se;const Ue=He=>Ce(He)&&(bO(He)||o.is(He,"figure.image")),tt=He=>Ol(He)||o.hasClass(He,"mce-preview-object"),At=(He,nt)=>{if(aY(He)){const $t=He.touches[0];return Ue(He.target)&&!CD($t.clientX,$t.clientY,nt)}else return Ue(He.target)&&!CD(He.clientX,He.clientY,nt)},Ne=He=>{const nt=He.target;At(He,n.selection.getRng())&&!He.isDefaultPrevented()&&n.selection.select(nt)},Ae=He=>o.hasClass(He,"mce-preview-object")&&Ce(He.firstElementChild)?[He,He.firstElementChild]:o.is(He,"figure.image")?[He.querySelector("img")]:[He],je=He=>{const nt=mk(n);return!nt||n.mode.isReadOnly()||He.getAttribute("data-mce-resize")==="false"||He===n.getBody()?!1:o.hasClass(He,"mce-preview-object")&&Ce(He.firstElementChild)?Si(ne.fromDom(He.firstElementChild),nt):Si(ne.fromDom(He),nt)},Et=(He,nt)=>{if(tt(nt))return He.create("img",{src:no.transparentSrc});if(Lu(nt)){const Pn=Ps(y.name,"n")?sn:On,Hn=nt.cloneNode(!0);return Pn(He.select("tr",Hn)).each(go=>{const ql=He.select("td,th",go);He.setStyle(go,"height",null),ke(ql,rd=>He.setStyle(rd,"height",null))}),Hn}else return nt.cloneNode(!0)},zt=(He,nt,$t)=>{if(Ce($t)){const Pn=Ae(He);ke(Pn,Hn=>{Hn.style[nt]||!n.schema.isValid(Hn.nodeName.toLowerCase(),nt)?o.setStyle(Hn,nt,$t):o.setAttrib(Hn,nt,""+$t)})}},Rn=(He,nt,$t)=>{zt(He,"width",nt),zt(He,"height",$t)},Nn=He=>{let nt,$t,Pn,Hn,go;nt=He.screenX-M,$t=He.screenY-R,oe=nt*y[2]+_,ue=$t*y[3]+Z,oe=oe<5?5:oe,ue=ue<5?5:ue,(Ue(d)||tt(d))&&yL(n)!==!1?Pn=!Mt.modifierPressed(He):Pn=Mt.modifierPressed(He),Pn&&(s_(nt)>s_($t)?(ue=Uy(oe*V),oe=Uy(ue/V)):(oe=Uy(ue/V),ue=Uy(oe*V))),Rn(g,oe,ue),Hn=y.startPos.x+nt,go=y.startPos.y+$t,Hn=Hn>0?Hn:0,go=go>0?go:0,o.setStyles(h,{left:Hn,top:go,display:"block"}),h.innerHTML=oe+" &times; "+ue,nt=c.scrollWidth-ge,$t=c.scrollHeight-Se,nt+$t!==0&&o.setStyles(h,{left:Hn-nt,top:go-$t}),G||(Le(n,d,_,Z,"corner-"+y.name),G=!0)},co=()=>{const He=G;G=!1,He&&(zt(d,"width",oe),zt(d,"height",ue)),o.unbind(r,"mousemove",Nn),o.unbind(r,"mouseup",co),i!==r&&(o.unbind(i,"mousemove",Nn),o.unbind(i,"mouseup",co)),o.remove(g),o.remove(h),o.remove(A),So(d),He&&(qx(n,d,oe,ue,"corner-"+y.name),o.setAttrib(d,"style",o.getAttrib(d,"style"))),n.nodeChanged()},So=He=>{Vt();const nt=o.getPos(He,c),$t=nt.x,Pn=nt.y,Hn=He.getBoundingClientRect(),go=Hn.width||Hn.right-Hn.left,ql=Hn.height||Hn.bottom-Hn.top;d!==He&&(lr(),d=He,oe=ue=0);const rd=n.dispatch("ObjectSelected",{target:He});je(He)&&!rd.isDefaultPrevented()?$e(Kw,(Ba,mi)=>{const ll=qa=>{const ec=Ae(d)[0];M=qa.screenX,R=qa.screenY,_=ec.clientWidth,Z=ec.clientHeight,V=Z/_,y=Ba,y.name=mi,y.startPos={x:go*Ba[0]+$t,y:ql*Ba[1]+Pn},ge=c.scrollWidth,Se=c.scrollHeight,A=o.add(c,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(A,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),g=Et(o,d),o.addClass(g,"mce-clonedresizable"),o.setAttrib(g,"data-mce-bogus","all"),g.contentEditable="false",o.setStyles(g,{left:$t,top:Pn,margin:0}),Rn(g,go,ql),g.removeAttribute(op),c.appendChild(g),o.bind(r,"mousemove",Nn),o.bind(r,"mouseup",co),i!==r&&(o.bind(i,"mousemove",Nn),o.bind(i,"mouseup",co)),h=o.add(c,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},_+" &times; "+Z)};let ya=o.get("mceResizeHandle"+mi);ya&&o.remove(ya),ya=o.add(c,"div",{id:"mceResizeHandle"+mi,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+mi+"-resize; margin:0; padding:0"}),o.bind(ya,"mousedown",qa=>{qa.stopImmediatePropagation(),qa.preventDefault(),ll(qa)}),Ba.elm=ya,o.setStyles(ya,{left:go*Ba[0]+$t-ya.offsetWidth/2,top:ql*Ba[1]+Pn-ya.offsetHeight/2})}):lr(!1)},cs=Ns(So,0),lr=(He=!0)=>{cs.cancel(),Vt(),d&&He&&d.removeAttribute(op),$e(Kw,(nt,$t)=>{const Pn=o.get("mceResizeHandle"+$t);Pn&&(o.unbind(Pn),o.remove(Pn))})},yr=(He,nt)=>o.isChildOf(He,nt),pt=He=>{if(G||n.removed||n.composing)return;const nt=He.type==="mousedown"?He.target:e.getNode(),$t=bf(ne.fromDom(nt),o_).map(Hn=>Hn.dom).filter(Hn=>o.isEditable(Hn.parentElement)||Hn.nodeName==="IMG"&&o.isEditable(Hn)).getOrUndefined(),Pn=Ce($t)?o.getAttrib($t,op,"1"):"1";if(ke(o.select(`img[${op}],hr[${op}]`),Hn=>{Hn.removeAttribute(op)}),Ce($t)&&yr($t,c)&&zy(n)){ro();const Hn=e.getStart(!0);if(yr(Hn,$t)&&yr(e.getEnd(!0),$t)){o.setAttrib($t,op,Pn),cs.throttle($t);return}}lr()},Vt=()=>{$e(Kw,He=>{He.elm&&(o.unbind(He.elm),delete He.elm)})},ro=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{ro(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",pt),n.on("keyup compositionend",He=>{d&&d.nodeName==="TABLE"&&pt(He)}),n.on("hide blur",lr),n.on("contextmenu longpress",Ne,!0)}),n.on("remove",Vt),{isResizable:je,showResizeRect:So,hideResizeRect:lr,updateResizeRect:pt,destroy:()=>{cs.cancel(),d=g=A=null}}},Qo=(e,n,o)=>{const r=Ou(ne.fromDom(o));return UK(r.dom,e,n).map(i=>{const c=o.createRange();return c.setStart(i.start.dom,i.soffset),c.setEnd(i.finish.dom,i.foffset),c}).getOrUndefined()},pv=(e,n)=>Ce(e)&&Ce(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,Zy=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},vv=(e,n,o)=>Zy(e,n,o)!==null,$d=(e,n,o)=>vv(e,n,r=>r.nodeName===o),Wy=(e,n)=>Ys(e)&&!vv(e,n,Il),eg=(e,n,o)=>{const r=n.parentNode;if(r){const i=new _r(n,e.getParent(r,e.isBlock)||e.getRoot());let c;for(;c=i[o?"prev":"next"]();)if(ws(c))return!0}return!1},DD=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},r_=(e,n)=>{let o=n;for(;o&&o!==e;){if(ss(o))return!0;o=o.parentNode}return!1},Yw=(e,n,o,r,i)=>{const c=e.getRoot(),d=e.schema.getNonEmptyElements(),g=i.parentNode;let h,y;if(!g)return N.none();const A=e.getParent(g,e.isBlock)||c;if(r&&ws(i)&&n&&e.isEmpty(A))return N.some(Be(g,e.nodeIndex(i)));const M=new _r(i,A);for(;y=M[r?"prev":"next"]();){if(e.getContentEditableParent(y)==="false"||Wy(y,c))return N.none();if(at(y)&&y.data.length>0)return $d(y,c,"A")?N.none():N.some(Be(y,r?y.data.length:0));if(e.isBlock(y)||d[y.nodeName.toLowerCase()])return N.none();h=y}return Fu(h)?N.none():o&&h?N.some(Be(h,0)):N.none()},Xw=(e,n,o,r)=>{const i=e.getRoot();let c,d=!1,g=o?r.startContainer:r.endContainer,h=o?r.startOffset:r.endOffset;const y=Bt(g)&&h===g.childNodes.length,A=e.schema.getNonEmptyElements();let M=o;if(Ys(g))return N.none();if(Bt(g)&&h>g.childNodes.length-1&&(M=!1),k1(g)&&(g=i,h=0),g===i){if(M&&(c=g.childNodes[h>0?h-1:0],c&&(Ys(c)||A[c.nodeName]||Lu(c))))return N.none();if(g.hasChildNodes()){if(h=Math.min(!M&&h>0?h-1:h,g.childNodes.length-1),g=g.childNodes[h],h=at(g)&&y?g.data.length:0,!n&&g===i.lastChild&&Lu(g)||r_(i,g)||Ys(g)||Gs(g))return N.none();if(g.hasChildNodes()&&!Lu(g)){c=g;const R=new _r(g,i);do{if(ss(c)||Ys(c)){d=!1;break}if(at(c)&&c.data.length>0){h=M?0:c.data.length,g=c,d=!0;break}if(A[c.nodeName.toLowerCase()]&&!pc(c)){h=e.nodeIndex(c),g=c.parentNode,M||h++,d=!0;break}}while(c=M?R.next():R.prev())}}}return n&&(at(g)&&h===0&&Yw(e,y,n,!0,g).each(R=>{g=R.container(),h=R.offset(),d=!0}),Bt(g)&&(c=g.childNodes[h],c||(c=g.childNodes[h-1]),c&&ws(c)&&!DD(c,"A")&&!eg(e,c,!1)&&!eg(e,c,!0)&&Yw(e,y,n,!0,c).each(R=>{g=R.container(),h=R.offset(),d=!0}))),M&&!n&&at(g)&&h===g.data.length&&Yw(e,y,n,!1,g).each(R=>{g=R.container(),h=R.offset(),d=!0}),d&&g?N.some(Be(g,h)):N.none()},jy=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),i=Be.fromRangeStart(n);return Xw(e,o,!0,r).each(c=>{(!o||!Be.isAbove(i,c))&&r.setStart(c.container(),c.offset())}),o||Xw(e,o,!1,r).each(c=>{r.setEnd(c.container(),c.offset())}),o&&r.collapse(!0),pv(n,r)?N.none():N.some(r)},sp=(e,n)=>e.splitText(n),tg=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,i=e.endOffset;if(n===r&&at(n)){if(o>0&&o<n.data.length)if(r=sp(n,o),n=r.previousSibling,i>o){i=i-o;const c=sp(r,i).previousSibling;n=r=c,i=c.data.length,o=0}else i=0}else if(at(n)&&o>0&&o<n.data.length&&(n=sp(n,o),o=0),at(r)&&i>0&&i<r.data.length){const c=sp(r,i).previousSibling;r=c,i=c.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:i}},nl=e=>({walk:(c,d)=>Wn(e,c,d),split:tg,expand:(c,d={type:"word"})=>{if(d.type==="word"){const g=Qm(e,c,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),h=e.createRng();return h.setStart(g.startContainer,g.startOffset),h.setEnd(g.endContainer,g.endOffset),h}return c},normalize:c=>jy(e,c).fold(Ie,d=>(c.setStart(d.startContainer,d.startOffset),c.setEnd(d.endContainer,d.endOffset),!0))});nl.compareRanges=pv,nl.getCaretRangeFromPoint=Qo,nl.getSelectedNode=Qb,nl.getNode=ha;const Hd=e=>ao(e)==="textarea",MD=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),a_=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},i_=(e,n)=>{const o=Fr(e);if(o.length===0||Hd(e))return{element:e,offset:n};if(n<o.length&&!Hd(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return Hd(r)?{element:e,offset:n}:ao(r)==="img"?{element:r,offset:1}:Ea(r)?{element:r,offset:Ch(r).length}:{element:r,offset:Fr(r).length}}},RD=(e,n)=>{const o=NB(e),r=fc(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},l_=(e,n)=>{const o=i_(e,n),r=ne.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Ar+"</span>");return Ta(o.element,r),RD(r,()=>b(r))},c_=e=>RD(ne.fromDom(e),et),PD=(e,n,o,r)=>{d_(e,(i,c)=>u_(e,n,o,r),o)},Jw=(e,n,o,r,i)=>{const c={elm:r.element.dom,alignToTop:i};if(MD(e,c))return;const d=x1(n).top;o(e,n,d,r,i),a_(e,c)},u_=(e,n,o,r)=>{const i=ne.fromDom(e.getBody()),c=ne.fromDom(e.getDoc());Ss(i);const d=l_(ne.fromDom(o.startContainer),o.startOffset);Jw(e,c,n,d,r),d.cleanup()},ND=(e,n,o,r)=>{const i=ne.fromDom(e.getDoc());Jw(e,i,o,c_(n),r)},d_=(e,n,o)=>{const r=o.startContainer,i=o.startOffset,c=o.endContainer,d=o.endOffset;n(ne.fromDom(r),ne.fromDom(c));const g=e.dom.createRng();g.setStart(r,i),g.setEnd(c,d),e.selection.setRng(o)},ID=(e,n,o,r,i)=>{const c=n.pos,d=30;if(r)rO(c.left,Math.max(0,c.top-d),i);else{const g=c.top-o+n.height+d;rO(-e.getBody().getBoundingClientRect().left,g,i)}},BD=(e,n,o,r,i,c)=>{const d=r+o,g=i.pos.top,h=i.bottom,y=h-g>=r;g<o?ID(e,i,r,c!==!1,n):g>d?ID(e,i,r,y?c!==!1:c===!0,n):h>d&&!y&&ID(e,i,r,c===!0,n)},pr=(e,n,o,r,i)=>{const c=Ou(n).dom.innerHeight;BD(e,n,o,c,r,i)},bv=(e,n,o,r,i)=>{const c=Ou(n).dom.innerHeight;BD(e,n,o,c,r,i);const d=Fy(r.element),g=O1(window);d.top<g.y?yb(r.element,i!==!1):d.top>g.bottom&&yb(r.element,i===!0)},zr=(e,n,o)=>PD(e,pr,n,o),Dc=(e,n,o)=>ND(e,n,pr,o),f_=(e,n,o)=>PD(e,bv,n,o),LD=(e,n,o)=>ND(e,n,bv,o),m_=(e,n,o)=>{(e.inline?Dc:LD)(e,n,o)},ng=(e,n,o)=>{(e.inline?zr:f_)(e,n,o)},FD=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),Qw=(e,n,o,r,i)=>{const c=o?n.startContainer:n.endContainer,d=o?n.startOffset:n.endOffset;return N.from(c).map(ne.fromDom).map(g=>!r||!n.collapsed?Mu(g,i(g,d)).getOr(g):g).bind(g=>ja(g)?N.some(g):cc(g).filter(ja)).map(g=>g.dom).getOr(e)},_D=(e,n,o=!1)=>Qw(e,n,!0,o,(r,i)=>Math.min(hh(r),i)),$D=(e,n,o=!1)=>Qw(e,n,!1,o,(r,i)=>i>0?i-1:i),HD=(e,n)=>{const o=e;for(;e&&at(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},ol=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const i=n.startOffset,c=n.endOffset;let d=n.commonAncestorContainer;n.collapsed||(o===r&&c-i<2&&o.hasChildNodes()&&(d=o.childNodes[i]),at(o)&&at(r)&&(o.length===i?o=HD(o.nextSibling,!0):o=o.parentNode,c===0?r=HD(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(d=o)));const g=at(d)?d.parentNode:d;return Bu(g)?g:e},Ra=(e,n,o,r)=>{const i=[],c=e.getRoot(),d=e.getParent(o||_D(c,n,n.collapsed),e.isBlock),g=e.getParent(r||$D(c,n,n.collapsed),e.isBlock);if(d&&d!==c&&i.push(d),d&&g&&d!==g){let h;const y=new _r(d,c);for(;(h=y.next())&&h!==g;)e.isBlock(h)&&i.push(h)}return g&&d!==g&&g!==c&&i.push(g),i},iY=(e,n,o)=>N.from(n).bind(r=>N.from(r.parentNode).map(i=>{const c=e.nodeIndex(r),d=e.createRng();return d.setStart(i,c),d.setEnd(i,c+1),o&&(Dw(e,d,r,!0),Dw(e,d,r,!1)),d})),$l=(e,n)=>Ot(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),qw={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Gy=(e,n,o)=>{const r=o?"lastChild":"firstChild",i=o?"prev":"next";if(e[r])return e[r];if(e!==n){let c=e[i];if(c)return c;for(let d=e.parent;d&&d!==n;d=d.parent)if(c=d[i],c)return c}},g_=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!_s(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},eE=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Ka{static create(n,o){const r=new Ka(n,qw[n]||1);return o&&$e(o,(i,c)=>{r.attr(c,i)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!ee(n))return Ce(n)&&$e(n,(c,d)=>{r.attr(d,c)}),r;const i=r.attributes;if(i){if(o!==void 0){if(o===null){if(n in i.map){delete i.map[n];let c=i.length;for(;c--;)if(i[c].name===n)return i.splice(c,1),r}return r}if(n in i.map){let c=i.length;for(;c--;)if(i[c].name===n){i[c].value=o;break}}else i.push({name:n,value:o});return i.map[n]=o,r}return i.map[n]}}clone(){const n=this,o=new Ka(n.name,n.type),r=n.attributes;if(r){const i=[];i.map={};for(let c=0,d=r.length;c<d;c++){const g=r[c];g.name!=="id"&&(i[i.length]={name:g.name,value:g.value},i.map[g.name]=g.value)}o.attributes=i}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,i=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):i&&(i.next=r),o.lastChild===n?(o.lastChild=i,i&&(i.next=null)):r&&(r.prev=i),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const i=o.parent||this;return r?(o===i.firstChild?i.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===i.lastChild?i.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=i,n}getAll(n){const o=this,r=[];for(let i=o.firstChild;i;i=Gy(i,o))i.name===n&&r.push(i);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let i=n.firstChild;i;i=Gy(i,n))o.push(i);let r=o.length;for(;r--;){const i=o[r];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var i;const c=this;let d=c.firstChild;if(eE(c))return!1;if(d)do{if(d.type===1){if(d.attr("data-mce-bogus"))continue;if(n[d.name]||eE(d))return!1}if(d.type===8||d.type===3&&!g_(d)||d.type===3&&d.parent&&o[d.parent.name]&&_s((i=d.value)!==null&&i!==void 0?i:"")||r&&r(d))return!1}while(d=Gy(d,c));return!0}walk(n){return Gy(this,null,n)}}const VD=ut.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),zD=e=>ee(e.nodeValue)&&e.nodeValue.includes(Ar),Ky=e=>`${e.length===0?"":`${Ot(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,h_=(e,n)=>n.querySelectorAll(Ky(e)),UD=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>zD(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),ZD=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(zD(n)){const o=n.parentNode;return o&&nn(VD,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),p_=e=>UD(e).nextNode()!==null,WD=e=>ZD(e).nextNode()!==null,tE=(e,n)=>n.querySelector(Ky(e))!==null,jD=(e,n)=>{ke(h_(e,n),o=>{const r=ne.fromDom(o);ks(r,"data-mce-bogus")==="all"?b(r):ke(e,i=>{vf(r,i)&&tr(r,i)})})},Yy=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},v_=x(Yy,UD),lY=x(Yy,ZD),b_=(e,n)=>{const o=[{condition:ht(tE,n),action:ht(jD,n)},{condition:p_,action:v_},{condition:WD,action:lY}];let r=e,i=!1;return ke(o,({condition:c,action:d})=>{c(r)&&(i||(r=e.cloneNode(!0),i=!0),d(r))}),r},GD=e=>{const n=Xo(e,"[data-mce-bogus]");ke(n,o=>{ks(o,"data-mce-bogus")==="all"?b(o):zm(o)?(Ta(o,ne.fromText(Br)),b(o)):k(o)})},nE=e=>{const n=Xo(e,"input");ke(n,o=>{tr(o,"name")})},y_=(e,n)=>{const o=Ma(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},C_=(e,n)=>{const o=e.getDoc(),r=Tl(ne.fromDom(e.getBody())),i=ne.fromTag("div",o);fr(i,"data-mce-bogus","all"),pb(i,{position:"fixed",left:"-9999999px",top:"0"}),zn(i,n.innerHTML),GD(i),nE(i);const c=uc(r);Fs(c,i);const d=Oi(i.dom.innerText);return b(i),d},S_=(e,n,o)=>{let r;return n.format==="raw"?r=ut.trim(Oi(b_(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=C_(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=y_(e,e.serializer.serialize(o,n)),n.format!=="text"&&!Bh(ne.fromDom(o))&&ee(r)?ut.trim(r):r},cY=(e,n)=>N.from(e.getBody()).fold(Ye(n.format==="tree"?new Ka("body",11):""),o=>S_(e,n,o)),x_=ut.makeMap,oE=e=>{const n=[];e=e||{};const o=e.indent,r=x_(e.indent_before||""),i=x_(e.indent_after||""),c=_o.getEncodeFunc(e.entity_encoding||"raw",e.entities),d=e.element_format!=="xhtml";return{start:(g,h,y)=>{if(o&&r[g]&&n.length>0){const A=n[n.length-1];A.length>0&&A!==`
`&&n.push(`
`)}if(n.push("<",g),h)for(let A=0,M=h.length;A<M;A++){const R=h[A];n.push(" ",R.name,'="',c(R.value,!0),'"')}if(!y||d?n[n.length]=">":n[n.length]=" />",y&&o&&i[g]&&n.length>0){const A=n[n.length-1];A.length>0&&A!==`
`&&n.push(`
`)}},end:g=>{let h;n.push("</",g,">"),o&&i[g]&&n.length>0&&(h=n[n.length-1],h.length>0&&h!==`
`&&n.push(`
`))},text:(g,h)=>{g.length>0&&(n[n.length]=h?g:c(g))},cdata:g=>{n.push("<![CDATA[",g,"]]>")},comment:g=>{n.push("<!--",g,"-->")},pi:(g,h)=>{h?n.push("<?",g," ",c(h),"?>"):n.push("<?",g,"?>"),o&&n.push(`
`)},doctype:g=>{n.push("<!DOCTYPE",g,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Vd=(e={},n=ma())=>{const o=oE(e);return e.validate="validate"in e?e.validate:!0,{serialize:i=>{const c=e.validate,d={3:h=>{var y;o.text((y=h.value)!==null&&y!==void 0?y:"",h.raw)},8:h=>{var y;o.comment((y=h.value)!==null&&y!==void 0?y:"")},7:h=>{o.pi(h.name,h.value)},10:h=>{var y;o.doctype((y=h.value)!==null&&y!==void 0?y:"")},4:h=>{var y;o.cdata((y=h.value)!==null&&y!==void 0?y:"")},11:h=>{let y=h;if(y=y.firstChild)do g(y);while(y=y.next)}};o.reset();const g=h=>{var y;const A=d[h.type];if(A)A(h);else{const M=h.name,R=M in n.getVoidElements();let _=h.attributes;if(c&&_&&_.length>1){const Z=[];Z.map={};const V=n.getElementRule(h.name);if(V){for(let G=0,oe=V.attributesOrder.length;G<oe;G++){const ue=V.attributesOrder[G];if(ue in _.map){const ge=_.map[ue];Z.map[ue]=ge,Z.push({name:ue,value:ge})}}for(let G=0,oe=_.length;G<oe;G++){const ue=_[G].name;if(!(ue in Z.map)){const ge=_.map[ue];Z.map[ue]=ge,Z.push({name:ue,value:ge})}}_=Z}}if(o.start(M,_,R),Sf(M))ee(h.value)&&o.text(h.value,!0),o.end(M);else if(!R){let Z=h.firstChild;if(Z){(M==="pre"||M==="textarea")&&Z.type===3&&((y=Z.value)===null||y===void 0?void 0:y[0])===`
`&&o.text(`
`,!0);do g(Z);while(Z=Z.next)}o.end(M)}}};return i.type===1&&!e.inner?g(i):i.type===3?d[3](i):d[11](i),o.getContent()}}},KD=new Set;ke(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{KD.add(n)});const YD=new Set;ke(["background-color"],n=>{YD.add(n)});const XD=["font","text-decoration","text-emphasis"],uY=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),yv=(e,n)=>Yt(uY(e,n)),dY=e=>KD.has(e),w_=e=>YD.has(e),E_=(e,n)=>to(yv(e,n),o=>dY(o)),T_=(e,n)=>E_(e,n)&&to(yv(e,n),o=>w_(o)),og=e=>Ht(e,n=>to(XD,o=>Ps(n,o))),A_=(e,n,o)=>{const r=yv(e,n),i=yv(e,o),c=d=>{var g,h;const y=(g=e.getStyle(n,d))!==null&&g!==void 0?g:"",A=(h=e.getStyle(o,d))!==null&&h!==void 0?h:"";return dn(y)&&dn(A)&&y!==A};return to(r,d=>{const g=h=>to(h,y=>y===d);if(!g(i)&&g(XD)){const h=og(i);return to(h,c)}else return c(d)})},sE=(e,n,o)=>N.from(o.container()).filter(at).exists(r=>{const i=e?0:-1;return n(r.data.charAt(o.offset()+i))}),Xy=ht(sE,!0,Ym),Jy=ht(sE,!1,Ym),JD=e=>{const n=e.container();return at(n)&&(n.data.length===0||Kb(n.data)&&mv.isBookmarkNode(n.parentNode))},Gu=(e,n)=>o=>hw(e?0:-1,o).filter(n).isSome(),O_=e=>bO(e)&&nr(ne.fromDom(e),"display")==="block",QD=e=>ss(e)&&!l7(e),fY=Gu(!0,O_),k_=Gu(!1,O_),Cv=Gu(!0,Ol),sg=Gu(!1,Ol),rE=Gu(!0,Lu),qD=Gu(!1,Lu),rg=Gu(!0,QD),ag=Gu(!1,QD),D_=e=>e.slice(0,-1),mY=(e,n,o)=>El(n,e)?D_(lb(e,r=>o(r)||Un(r,n))):[],e5=(e,n)=>mY(e,n,Ie),Ku=(e,n)=>[e].concat(e5(e,n)),aE=(e,n,o)=>xw(e,n,o,JD),t5=e=>n=>e.isBlock(ao(n)),M_=(e,n,o)=>No(Ku(ne.fromDom(n.container()),e),t5(o)),n5=(e,n,o,r)=>aE(e,n.dom,o).forall(i=>M_(n,o,r).fold(()=>!tu(i,o,n.dom),c=>!tu(i,o,n.dom)&&El(c,ne.fromDom(i.container())))),iE=(e,n,o,r)=>M_(n,o,r).fold(()=>aE(e,n.dom,o).forall(i=>!tu(i,o,n.dom)),i=>aE(e,i.dom,o).isNone()),lE=ht(iE,!1),o5=ht(iE,!0),R_=ht(n5,!1),P_=ht(n5,!0),N_=e=>wy(e).exists(zm),Qy=(e,n,o,r)=>{const i=Ht(Ku(ne.fromDom(o.container()),n),d=>r.isBlock(ao(d))),c=sn(i).getOr(n);return Nl(e,c.dom,o).filter(N_)},cE=(e,n,o)=>wy(n).exists(zm)||Qy(!0,e,n,o).isSome(),qy=(e,n,o)=>iF(n).exists(zm)||Qy(!1,e,n,o).isSome(),s5=ht(Qy,!1),I_=ht(Qy,!0),r5=e=>Be.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),a5=(e,n,o)=>{const r=Ht(Ku(ne.fromDom(n.container()),e),i=>o.isBlock(ao(i)));return sn(r).getOr(e)},i5=(e,n,o)=>r5(n)?Jy(n):Jy(n)||li(a5(e,n,o).dom,n).exists(Jy),l5=(e,n,o)=>r5(n)?Xy(n):Xy(n)||rr(a5(e,n,o).dom,n).exists(Xy),xt=e=>_t(["pre","pre-wrap"],e),Mc=e=>wy(e).bind(n=>Nu(n,ja)).exists(n=>xt(nr(n,"white-space"))),gY=(e,n)=>li(e.dom,n).isNone(),B_=(e,n)=>rr(e.dom,n).isNone(),uE=(e,n,o)=>gY(e,n)||B_(e,n)||lE(e,n,o)||o5(e,n,o)||qy(e,n,o)||cE(e,n,o),c5=e=>Ce(e)&&ss(e)&&sv(e),dE=(e,n)=>o=>c5(new _r(o,e)[n]()),fE=(e,n)=>{const o=rr(e.dom,n).getOr(n),r=dE(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},L_=(e,n)=>{const o=li(e.dom,n).getOr(n),r=dE(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},mE=(e,n,o)=>Mc(n)?!1:uE(e,n,o)||i5(e,n,o)||l5(e,n,o),Sv=(e,n,o)=>Mc(n)?!1:lE(e,n,o)||R_(e,n,o)||qy(e,n,o)||i5(e,n,o)||L_(e,n),F_=e=>{const n=e.container(),o=e.offset();return at(n)&&o<n.data.length?Be(n,o+1):e},xv=(e,n,o)=>Mc(n)?!1:o5(e,n,o)||P_(e,n,o)||cE(e,n,o)||l5(e,n,o)||fE(e,n),gE=(e,n,o)=>Sv(e,n,o)||xv(e,F_(n),o),u5=(e,n)=>Dy(e.charAt(n)),wv=(e,n)=>Ym(e.charAt(n)),__=e=>{const n=e.container();return at(n)&&Ws(n.data,zo)},$_=e=>{const n=e.split("");return Ot(n,(o,r)=>Dy(o)&&r>0&&r<n.length-1&&Aw(n[r-1])&&Aw(n[r+1])?" ":o).join("")},d5=(e,n,o,r)=>{const i=n.data,c=Be(n,0);return!o&&u5(i,0)&&!gE(e,c,r)?(n.data=" "+i.slice(1),!0):o&&wv(i,0)&&Sv(e,c,r)?(n.data=zo+i.slice(1),!0):!1},H_=e=>{const n=e.data,o=$_(n);return o!==n?(e.data=o,!0):!1},f5=(e,n,o,r)=>{const i=n.data,c=Be(n,i.length-1);return!o&&u5(i,i.length-1)&&!gE(e,c,r)?(n.data=i.slice(0,-1)+" ",!0):o&&wv(i,i.length-1)&&xv(e,c,r)?(n.data=i.slice(0,-1)+zo,!0):!1},m5=(e,n,o)=>{const r=n.container();if(!at(r))return N.none();if(__(n)){const i=d5(e,r,!1,o)||H_(r)||f5(e,r,!1,o);return ho(i,n)}else if(gE(e,n,o)){const i=d5(e,r,!0,o)||f5(e,r,!0,o);return ho(i,n)}else return N.none()},e2=e=>{const n=ne.fromDom(e.getBody());e.selection.isCollapsed()&&m5(n,Be.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},g5=(e,n,o,r)=>{if(o===0)return;const i=ne.fromDom(e),c=yd(i,y=>r.isBlock(ao(y))).getOr(i),d=e.data.slice(n,n+o),g=n+o>=e.data.length&&xv(c,Be(e,e.data.length),r),h=n===0&&Sv(c,Be(e,0),r);e.replaceData(n,o,fa(d,4,h,g))},t2=(e,n,o)=>{const r=e.data.slice(n),i=r.length-sh(r).length;g5(e,n,i,o)},hE=(e,n,o)=>{const r=e.data.slice(0,n),i=r.length-bl(r).length;g5(e,n-i,i,o)},pE=(e,n,o,r,i=!0)=>{const c=bl(e.data).length,d=i?e:n,g=i?n:e;return i?d.appendData(g.data):d.insertData(0,g.data),b(ne.fromDom(g)),r&&t2(d,c,o),d},V_=(e,n)=>{const o=e.container(),r=e.offset();return!Be.isTextPosition(e)&&o===n.parentNode&&r>Be.before(n).offset()},z_=(e,n)=>V_(n,e)?Be(n.container(),n.offset()-1):n,U_=e=>at(e)?Be(e,0):Be.before(e),Z_=e=>at(e)?Be(e,e.data.length):Be.after(e),h5=e=>wc(e.previousSibling)?N.some(Z_(e.previousSibling)):e.previousSibling?Di(e.previousSibling):N.none(),p5=e=>wc(e.nextSibling)?N.some(U_(e.nextSibling)):e.nextSibling?na(e.nextSibling):N.none(),W_=(e,n)=>N.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>li(e,Be.before(o))).orThunk(()=>rr(e,Be.after(n))),j_=(e,n)=>rr(e,Be.after(n)).orThunk(()=>li(e,Be.before(n))),G_=(e,n)=>h5(n).orThunk(()=>p5(n)).orThunk(()=>W_(e,n)),K_=(e,n)=>p5(n).orThunk(()=>h5(n)).orThunk(()=>j_(e,n)),v5=(e,n,o)=>e?K_(n,o):G_(n,o),Y_=(e,n,o)=>v5(e,n,o).map(ht(z_,o)),b5=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},n2=e=>n=>n.dom===e,$f=(e,n)=>n&&nn(e.schema.getBlockElements(),ao(n)),o2=(e,n,o)=>{if(ka(e,n)){const r=ne.fromHtml('<br data-mce-bogus="1">');return o?ke(Fr(n),i=>{Iy(i)||b(i)}):Ki(n),Fs(n,r),N.some(Be.before(r.dom))}else return N.none()},X_=(e,n,o,r)=>{const i=ku(e).filter(Ea),c=Du(e).filter(Ea);return b(e),cm(i,c,n,(d,g,h)=>{const y=d.dom,A=g.dom,M=y.data.length;return pE(y,A,o,r),h.container()===A?Be(y,M):h}).orThunk(()=>(r&&(i.each(d=>hE(d.dom,d.dom.length,o)),c.each(d=>t2(d.dom,0,o))),n))},J_=(e,n)=>nn(e.schema.getTextInlineElements(),ao(n)),ig=(e,n,o,r=!0,i=!1)=>{const c=Y_(n,e.getBody(),o.dom),d=yd(o,ht($f,e),n2(e.getBody())),g=X_(o,c,e.schema,J_(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):d.bind(h=>o2(e.schema,h,i)).fold(()=>{r&&b5(e,n,g)},h=>{r&&b5(e,n,N.some(h))})},Q_=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,y5=e=>Q_.test(e),lg=(e,n)=>Si(ne.fromDom(n),q1(e))&&!vc(e.schema,n)&&e.dom.isEditable(n),C5=e=>{var n;return Co.DOM.getStyle(e,"direction",!0)==="rtl"||y5((n=e.textContent)!==null&&n!==void 0?n:"")},S5=(e,n,o)=>Ht(Co.DOM.getParents(o.container(),"*",n),e),Hf=(e,n,o)=>{const r=S5(e,n,o);return N.from(r[r.length-1])},x5=(e,n,o)=>{const r=Fd(n,e),i=Fd(o,e);return Ce(r)&&r===i},q_=e=>Lx(e)||V1(e),Hl=(e,n)=>{const o=n.container(),r=n.offset();return e?ga(o)?at(o.nextSibling)?Be(o.nextSibling,0):Be.after(o):Lx(n)?Be(o,r+1):n:ga(o)?at(o.previousSibling)?Be(o.previousSibling,o.previousSibling.data.length):Be.before(o):V1(n)?Be(o,r-1):n},w5=ht(Hl,!0),vE=ht(Hl,!1),s2=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},E5=e=>{e.execCommand("delete")},r2=e=>s2(e,"Delete"),T5=e=>s2(e,"ForwardDelete"),a2=e=>n=>Ui(cc(n),e,Un),e$=e=>Nx(e)||Od(e),Ev=(e,n)=>El(e,n)?Nu(n,e$,a2(e)):N.none(),Tv=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},bE=(e,n,o)=>Zs(na(o),Di(o),(r,i)=>{const c=Hl(!0,r),d=Hl(!1,i),g=Hl(!1,n);return e?rr(o,g).exists(h=>h.isEqual(d)&&n.isEqual(c)):li(o,g).exists(h=>h.isEqual(c)&&n.isEqual(d))}).getOr(!0),A5=e=>(hf(e)?ku(e):xm(e)).bind(A5).orThunk(()=>N.some(e)),O5=(e,n,o,r=!0)=>{var i;n.deleteContents();const c=A5(o).getOr(o),d=ne.fromDom((i=e.dom.getParent(c.dom,e.dom.isBlock))!==null&&i!==void 0?i:o.dom);if(d.dom===e.getBody()?Tv(e,r):ka(e.schema,d,{checkRootAsContent:!1})&&(kf(d),r&&e.selection.setCursorLocation(d.dom,0)),!Un(o,d)){const g=Ui(cc(d),o)?[]:v1(d);ke(g.concat(Fr(o)),h=>{!Un(h,d)&&!El(h,d)&&ka(e.schema,h)&&b(h)})}},i2=e=>n=>Un(e,n),l2=e=>Xo(e,"td,th"),yE=(e,n)=>dv(ne.fromDom(e),n),k5=e=>Zs(e.startTable,e.endTable,(n,o)=>{const r=xb(n,c=>Un(c,o)),i=xb(o,c=>Un(c,n));return!r&&!i?e:{...e,startTable:r?N.none():e.startTable,endTable:i?N.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),D5=e=>k5(e),M5=(e,n)=>{const o=yE(e.startContainer,n),r=yE(e.endContainer,n),i=o.isSome(),c=r.isSome(),d=Zs(o,r,Un).getOr(!1);return D5({startTable:o,endTable:r,isStartInTable:i,isEndInTable:c,isSameTable:d,isMultiTable:!d&&i&&c})},c2=(e,n)=>({start:e,end:n}),R5=(e,n,o)=>({rng:e,table:n,cells:o}),rp=xr.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Av=(e,n)=>bf(ne.fromDom(e),"td,th",n),CE=e=>!Un(e.start,e.end),P5=(e,n)=>dv(e.start,n).bind(o=>dv(e.end,n).bind(r=>ho(Un(o,r),o))),t$=(e,n)=>!CE(e)&&P5(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),n$=(e,n)=>{const o=Av(e.startContainer,n),r=Av(e.endContainer,n);return Zs(o,r,c2)},o$=e=>n=>dv(n,e).bind(o=>On(l2(o)).map(r=>c2(n,r))),s$=e=>n=>dv(n,e).bind(o=>sn(l2(o)).map(r=>c2(r,n))),SE=e=>n=>P5(n,e).map(o=>R5(n,o,l2(o))),N5=(e,n,o,r)=>{if(o.collapsed||!e.forall(CE))return N.none();if(n.isSameTable){const i=e.bind(SE(r));return N.some({start:i,end:i})}else{const i=Av(o.startContainer,r),c=Av(o.endContainer,r),d=i.bind(o$(r)).bind(SE(r)),g=c.bind(s$(r)).bind(SE(r));return N.some({start:d,end:g})}},I5=(e,n)=>bs(e,o=>Un(o,n)),xE=e=>Zs(I5(e.cells,e.rng.start),I5(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),r$=(e,n,o)=>e.exists(r=>t$(r,o)&&kw(r.start,n)),wE=(e,n)=>{const{startTable:o,endTable:r}=n,i=e.cloneRange();return o.each(c=>i.setStartAfter(c.dom)),r.each(c=>i.setEndBefore(c.dom)),i},hY=(e,n,o,r)=>N5(e,n,o,r).bind(({start:i,end:c})=>i.or(c)).bind(i=>{const{isSameTable:c}=n,d=xE(i).getOr([]);if(c&&i.cells.length===d.length)return N.some(rp.fullTable(i.table));if(d.length>0){if(c)return N.some(rp.partialTable(d,N.none()));{const g=wE(o,n);return N.some(rp.partialTable(d,N.some({...n,rng:g})))}}else return N.none()}),pY=(e,n,o,r)=>N5(e,n,o,r).bind(({start:i,end:c})=>{const d=i.bind(xE).getOr([]),g=c.bind(xE).getOr([]);if(d.length>0&&g.length>0){const h=wE(o,n);return N.some(rp.multiTable(d,g,h))}else return N.none()}),a$=(e,n)=>{const o=i2(e),r=n$(n,o),i=M5(n,o);return r$(r,n,o)?r.map(c=>rp.singleCellTable(n,c.start)):i.isMultiTable?pY(r,i,n,o):hY(r,i,n,o)},i$=e=>ke(e,n=>{tr(n,"contenteditable"),kf(n)}),l$=(e,n)=>N.from(e.dom.getParent(n,e.dom.isBlock)).map(ne.fromDom),va=(e,n,o)=>{o.each(r=>{n?b(r):(kf(r),e.selection.setCursorLocation(r.dom,0))})},EE=(e,n,o,r)=>{const i=o.cloneRange();r?(i.setStart(o.startContainer,o.startOffset),i.setEndAfter(n.dom.lastChild)):(i.setStartBefore(n.dom.firstChild),i.setEnd(o.endContainer,o.endOffset)),Ya(e,i,n,!1).each(c=>c())},c$=e=>{const n=_d(e),o=ne.fromDom(e.selection.getNode());D1(o.dom)&&ka(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&to(n,r=>Un(r,o))&&fr(o,"data-mce-selected","1")},B5=(e,n,o)=>N.some(()=>{const r=e.selection.getRng(),i=o.bind(({rng:c,isStartInTable:d})=>{const g=l$(e,d?c.endContainer:c.startContainer);c.deleteContents(),va(e,d,g.filter(ht(ka,e.schema)));const h=d?n[0]:n[n.length-1];return EE(e,h,r,d),ka(e.schema,h)?N.none():N.some(d?n.slice(1):n.slice(0,-1))}).getOr(n);i$(i),c$(e)}),u$=(e,n,o,r)=>N.some(()=>{const i=e.selection.getRng(),c=n[0],d=o[o.length-1];EE(e,c,i,!0),EE(e,d,i,!1);const g=ka(e.schema,c)?n:n.slice(1),h=ka(e.schema,d)?o:o.slice(0,-1);i$(g.concat(h)),r.deleteContents(),c$(e)}),Ya=(e,n,o,r=!0)=>N.some(()=>{O5(e,n,o,r)}),vY=(e,n)=>N.some(()=>ig(e,!1,n)),d$=(e,n,o)=>a$(n,o).bind(r=>r.fold(ht(Ya,e),ht(vY,e),ht(B5,e),ht(u$,e))),bY=(e,n)=>Ov(e,n),f$=(e,n,o,r)=>TE(n,r).fold(()=>d$(e,n,o),i=>bY(e,i)),m$=(e,n,o)=>{const r=ne.fromDom(e.getBody()),i=e.selection.getRng();return o.length!==0?B5(e,o,N.none()):f$(e,r,i,n)},g$=(e,n)=>No(Ku(n,e),Of),TE=(e,n)=>No(Ku(n,e),dr("caption")),Mi=(e,n,o,r,i)=>Oc(o,e.getBody(),i).bind(c=>g$(n,ne.fromDom(c.getNode())).bind(d=>Un(d,r)?N.none():N.some(et))),Ov=(e,n)=>N.some(()=>{kf(n),e.selection.setCursorLocation(n.dom,0)}),L5=(e,n,o,r)=>na(e.dom).bind(i=>Di(e.dom).map(c=>n?o.isEqual(i)&&r.isEqual(c):o.isEqual(c)&&r.isEqual(i))).getOr(!0),h$=(e,n)=>Ov(e,n),p$=(e,n,o)=>TE(e,ne.fromDom(o.getNode())).fold(()=>N.some(et),r=>ho(!Un(r,n),et)),F5=(e,n,o,r,i)=>Oc(o,e.getBody(),i).fold(()=>N.some(et),c=>L5(r,o,i,c)?h$(e,r):p$(n,r,c)),_5=(e,n,o,r)=>{const i=Be.fromRangeStart(e.selection.getRng());return g$(o,r).bind(c=>ka(e.schema,c,{checkRootAsContent:!1})?Ov(e,c):Mi(e,o,n,c,i))},v$=(e,n,o,r)=>{const i=Be.fromRangeStart(e.selection.getRng());return ka(e.schema,r)?Ov(e,r):F5(e,o,n,r,i)},$5=(e,n)=>e?rE(n):qD(n),b$=(e,n)=>{const o=Be.fromRangeStart(e.selection.getRng());return $5(n,o)||Nl(n,e.getBody(),o).exists(r=>$5(n,r))},y$=(e,n,o)=>{const r=ne.fromDom(e.getBody());return TE(r,o).fold(()=>_5(e,n,r,o).orThunk(()=>ho(b$(e,n),et)),i=>v$(e,n,r,i))},u2=(e,n)=>{const o=ne.fromDom(e.selection.getStart(!0)),r=_d(e);return e.selection.isCollapsed()&&r.length===0?y$(e,n,o):m$(e,o,r)},cg=(e,n)=>{let o=n;for(;o&&o!==e;){if(hc(o)||ss(o))return o;o=o.parentNode}return null},H5=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],C$=ut.each,V5=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(c,d)=>{if(c.nodeName!==d.nodeName||c.nodeType!==d.nodeType)return!1;const g=y=>{const A={};return C$(n.getAttribs(y),M=>{const R=M.nodeName.toLowerCase();R!=="style"&&!i(R)&&(A[R]=n.getAttrib(y,R))}),A},h=(y,A)=>{for(const M in y)if(nn(y,M)){const R=A[M];if(Je(R)||y[M]!==R)return!1;delete A[M]}for(const M in A)if(nn(A,M))return!1;return!0};return Bt(c)&&Bt(d)&&(!h(g(c),g(d))||!h(n.parseStyle(n.getAttrib(c,"style")),n.parseStyle(n.getAttrib(d,"style"))))?!1:!Bl(c)&&!Bl(d)},i=c=>to(H5,d=>Ps(c,d))||o.has(c);return{compare:r,isAttributeInternal:i}},z5=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),S$=e=>e.name==="summary",yY=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},U5=(e,n,o,r)=>{const i=o.name;for(let c=0,d=e.length;c<d;c++){const g=e[c];if(g.name===i){const h=r.nodes[i];h?h.nodes.push(o):r.nodes[i]={filter:g,nodes:[o]}}}if(o.attributes)for(let c=0,d=n.length;c<d;c++){const g=n[c],h=g.name;if(h in o.attributes.map){const y=r.attributes[h];y?y.nodes.push(o):r.attributes[h]={filter:g,nodes:[o]}}}},Qn=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&yY(o,i=>{U5(e,n,i,r)}),r},ap=(e,n)=>{const o=(r,i)=>{$e(r,c=>{const d=Vn(c.nodes);ke(c.filter.callbacks,g=>{for(let h=d.length-1;h>=0;h--){const y=d[h];(!(i?y.attr(c.filter.name)!==void 0:y.name===c.filter.name)||dt(y.parent))&&d.splice(h,1)}d.length>0&&g(d,c.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},Yu=(e,n,o,r={})=>{const i=Qn(e,n,o);ap(i,r)},zd=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const c=new Ka("br",1);n.insert&&c.attr("data-mce-bogus","1"),r.empty().append(c)}else r.empty().append(new Ka("#text",3)).value=zo},d2=e=>{var n;return f2(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===zo},f2=(e,n)=>{const o=e==null?void 0:e.firstChild;return Ce(o)&&o===e.lastChild&&o.name===n},AE=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},ip=(e,n,o,r)=>r.isEmpty(n,o,i=>AE(e,i)),x$=(e,n)=>Ce(e)&&(n(e)||e.name==="br"),Z5=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return N.from(n)},m2=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const i of r)o&&!n.isValidChild(o.name,i.name)&&m2(i,n,o);e.unwrap()}},OE=(e,n,o,r=et)=>{const i=n.getTextBlockElements(),c=n.getNonEmptyElements(),d=n.getWhitespaceElements(),g=ut.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),h=new Set,y=A=>A!==o&&!g[A.name];for(let A=0;A<e.length;A++){const M=e[A];let R,_,Z;if(!M.parent||h.has(M))continue;if(i[M.name]&&M.parent.name==="li"){let G=M.next;for(;G&&i[G.name];){G.name="li",h.add(G),M.parent.insert(G,M.parent);G=G.next}M.unwrap();continue}const V=[M];for(R=M.parent;R&&!n.isValidChild(R.name,M.name)&&y(R);R=R.parent)V.push(R);if(R&&V.length>1)if(kE(n,M,R))m2(M,n);else{V.reverse(),_=V[0].clone(),r(_);let G=_;for(let oe=0;oe<V.length-1;oe++){n.isValidChild(G.name,V[oe].name)&&oe>0?(Z=V[oe].clone(),r(Z),G.append(Z)):Z=G;for(let ue=V[oe].firstChild;ue&&ue!==V[oe+1];){const ge=ue.next;Z.append(ue),ue=ge}G=Z}ip(n,c,d,_)?R.insert(M,V[0],!0):(R.insert(_,V[0],!0),R.insert(M,_)),R=V[0],(ip(n,c,d,R)||f2(R,"br"))&&R.empty().remove()}else if(M.parent){if(M.name==="li"){let G=M.prev;if(G&&(G.name==="ul"||G.name==="ol")){G.append(M);continue}if(G=M.next,G&&(G.name==="ul"||G.name==="ol")&&G.firstChild){G.insert(M,G.firstChild,!0);continue}const oe=new Ka("ul",1);r(oe),M.wrap(oe);continue}if(n.isValidChild(M.parent.name,"div")&&n.isValidChild("div",M.name)){const G=new Ka("div",1);r(G),M.wrap(G)}else m2(M,n)}}},w$=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},kE=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&w$(o,"a")?!0:S$(o)&&z5(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,E$=(e,n,o,r)=>{const i=document.createRange();return i.setStart(e,n),i.setEnd(o,r),i},T$=e=>{const n=Be.fromRangeStart(e),o=Be.fromRangeEnd(e),r=e.commonAncestorContainer;return Nl(!1,r,o).map(i=>!tu(n,o,r)&&tu(n,i,r)?E$(n.container(),n.offset(),i.container(),i.offset()):e).getOr(e)},DE=e=>e.collapsed?e:T$(e),W5=e=>Ce(e.firstChild)&&e.firstChild===e.lastChild,j5=e=>e.name==="br"||e.value===zo,CY=(e,n)=>e.getBlockElements()[n.name]&&W5(n)&&j5(n.firstChild),SY=(e,n)=>{const o=e.getNonEmptyElements();return Ce(n)&&(n.isEmpty(o)||CY(e,n))},xY=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),SY(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},A$=e=>{var n,o;const r=e.firstChild,i=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),i&&i.id==="mce_marker"&&((o=i.parentNode)===null||o===void 0||o.removeChild(i)),e},wY=(e,n,o)=>{const r=n.serialize(o),i=e.createFragment(r);return A$(i)},EY=e=>{var n;return Ht((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},O$=e=>e.data===zo||ws(e),k$=e=>Ce(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&O$(e.firstChild),TY=e=>!e.firstChild||k$(e),D$=e=>e.length>0&&TY(e[e.length-1])?e.slice(0,-1):e,Pa=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},AY=(e,n)=>!!Pa(e,n),M$=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},G5=(e,n)=>{const o=Be.before(e),i=Ac(n).next(o);return i?i.toRange():null},R$=(e,n)=>{const o=Be.after(e),i=Ac(n).prev(o);return i?i.toRange():null},P$=(e,n,o,r)=>{const i=M$(e,r),c=e.parentNode;return c&&(c.insertBefore(i[0],e),ut.each(n,d=>{c.insertBefore(d,e)}),c.insertBefore(i[1],e),c.removeChild(e)),R$(n[n.length-1],o)},N$=(e,n,o)=>{const r=e.parentNode;return r&&ut.each(n,i=>{r.insertBefore(i,e)}),G5(e,o)},I$=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),R$(n[0],o)),ME=(e,n,o,r)=>{const i=wY(n,e,r),c=Pa(n,o.startContainer),d=D$(EY(i.firstChild)),g=1,h=2,y=n.getRoot(),A=M=>{const R=Be.fromRangeStart(o),_=Ac(n.getRoot()),Z=M===g?_.prev(R):_.next(R),V=Z==null?void 0:Z.getNode();return V?Pa(n,V)!==c:!0};return c?A(g)?N$(c,d,y):A(h)?I$(c,d,y,n):P$(c,d,y,o):null},OY=["pre"],B$=(e,n,o,r)=>{var i;const c=n.firstChild,d=n.lastChild,g=d.attr("data-mce-type")==="bookmark"?d.prev:d,h=c===g,y=_t(OY,c.name);if(h&&y){const A=c.attr("contenteditable")!=="false",M=((i=e.getParent(o,e.isBlock))===null||i===void 0?void 0:i.nodeName.toLowerCase())===c.name,R=N.from(cg(r,o)).forall(hc);return A&&M&&R}else return!1},RE=D1,Mo=(e,n,o)=>{if(Ce(o)){const r=e.getParent(n.endContainer,RE);return o===r&&kw(ne.fromDom(o),n)}else return!1},L$=(e,n)=>{if(e.isBlock(n)&&e.isEditable(n)){const o=n.childNodes;return o.length===1&&ws(o[0])||o.length===0}else return!1},F$=(e,n,o)=>{var r;o.getAttribute("data-mce-bogus")==="all"?(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o):L$(e.dom,o)?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})},kv=(e,n,o)=>{N.from(e.getParent(n,"td,th")).map(ne.fromDom).each(r=>I7(r,o))},K5=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const i=e.getBody(),c=V5(e),d="*[data-mce-fragment]",g=r.select(d);ut.each(g,h=>{const y=R=>Ce(o[R.nodeName.toLowerCase()]),A=R=>R.childNodes.length===1;if((R=>!(E_(r,R)||T_(r,R)))(h)&&y(h)&&A(h)){const R=yv(r,h),_=(oe,ue)=>xn(oe,ge=>_t(ue,ge)),Z=oe=>A(h)&&r.is(oe,d)&&y(oe)&&(oe.nodeName===h.nodeName&&_(R,yv(r,oe))||Z(oe.children[0])),V=oe=>Ce(oe)&&oe!==i&&(c.compare(h,oe)||V(oe.parentElement)),G=oe=>Ce(oe)&&oe!==i&&r.is(oe,d)&&(A_(r,h,oe)||G(oe.parentElement));(Z(h.children[0])||V(h.parentElement)&&!G(h.parentElement))&&r.remove(h,!0)}})}},_$=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},$$=e=>{ut.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},H$=e=>!!e.getAttribute("data-mce-fragment"),Y5=(e,n)=>Ce(n)&&!e.schema.getVoidElements()[n.nodeName],V$=(e,n)=>{var o,r,i;let c;const d=e.dom,g=e.selection;if(!n)return;g.scrollIntoView(n);const h=cg(e.getBody(),n);if(h&&d.getContentEditable(h)==="false"){d.remove(n),g.select(h);return}let y=d.createRng();const A=n.previousSibling;if(at(A)){y.setStart(A,(r=(o=A.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const _=n.nextSibling;at(_)&&(A.appendData(_.data),(i=_.parentNode)===null||i===void 0||i.removeChild(_))}else y.setStartBefore(n),y.setEndBefore(n);const M=_=>{let Z=Be.fromRangeStart(_);return Z=Ac(e.getBody()).next(Z),Z==null?void 0:Z.toRange()},R=d.getParent(n,d.isBlock);if(d.remove(n),R&&d.isEmpty(R)){const _=RE(R);Ki(ne.fromDom(R)),y.setStart(R,0),y.setEnd(R,0),!_&&!H$(R)&&(c=M(y))?(y=c,d.remove(R)):d.add(R,d.create("br",_?{}:{"data-mce-bogus":"1"}))}g.setRng(y)},kY=e=>{const n=e.dom,o=DE(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,RE);Mo(n,o,r)?Ya(e,o,ne.fromDom(r)):z$(o)||DY(o)?o.deleteContents():e.getDoc().execCommand("Delete",!1)},DY=e=>X5(e,at),z$=e=>X5(e,c7),X5=(e,n)=>e.startContainer===e.endContainer&&e.endOffset-e.startOffset===1&&n(e.startContainer.childNodes[e.startOffset]),U$=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return N.some(n);return N.none()},Z$=(e,n,o)=>{var r;return to(o.children(),z5)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},J5=(e,n,o)=>{var r,i;const c=e.selection,d=e.dom,g=e.parser,h=o.merge,y=Vd({validate:!0},e.schema),A='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=Oi(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,A);let M=c.getRng();const R=M.startContainer,_=e.getBody();R===_&&c.isCollapsed()&&d.isBlock(_.firstChild)&&Y5(e,_.firstChild)&&d.isEmpty(_.firstChild)&&(M=d.createRng(),M.setStart(_.firstChild,0),M.setEnd(_.firstChild,0),c.setRng(M)),c.isCollapsed()||kY(e);const Z=c.getNode(),V={context:Z.nodeName.toLowerCase(),data:o.data,insert:!0},G=g.parse(n,V);if(o.paste===!0&&xY(e.schema,G)&&AY(d,Z))return M=ME(y,d,c.getRng(),G),M&&c.setRng(M),n;o.paste===!0&&B$(d,G,Z,e.getBody())&&((r=G.firstChild)===null||r===void 0||r.unwrap()),_$(G);let oe=G.lastChild;if(oe&&oe.attr("id")==="mce_marker"){const ue=oe;for(oe=oe.prev;oe&&oe.name!=="table";oe=oe.walk(!0))if(oe.type===3||!d.isBlock(oe.name)){oe.parent&&e.schema.isValidChild(oe.parent.name,"span")&&oe.parent.insert(ue,oe,oe.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(Z),!V.invalid&&!Z$(d,Z,G))n=y.serialize(G),F$(e,n,Z);else{e.selection.setContent(A);let ue=c.getNode(),ge;const Se=e.getBody();for(k1(ue)?ue=ge=Se:ge=ue;ge&&ge!==Se;)ue=ge,ge=ge.parentNode;n=ue===Se?Se.innerHTML:d.getOuterHTML(ue);const Ue=g.parse(n),tt=U$(Ue),At=tt.bind(Z5).getOr(Ue);tt.each(Et=>Et.replace(G));const Ne=G.children(),Ae=(i=G.parent)!==null&&i!==void 0?i:Ue;G.unwrap();const je=Ht(Ne,Et=>kE(e.schema,Et,Ae));OE(je,e.schema,At),Yu(g.getNodeFilters(),g.getAttributeFilters(),Ue),n=y.serialize(Ue),ue===Se?d.setHTML(Se,n):d.setOuterHTML(ue,n)}return K5(e,h),V$(e,d.get("mce_marker")),$$(e.getBody()),kv(d,c.getStart(),e.schema),h7(e.schema,e.getBody(),c.getStart()),n},g2=e=>e instanceof Ka,kn=e=>{qm(e)&&na(e.getBody()).each(n=>{const o=n.getNode(),r=Lu(o)?na(o).getOr(n):n;e.selection.setRng(r.toRange())})},h2=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&kn(e)},Dv=(e,n,o,r)=>{if(o=Oi(o),o.length===0||/^\s+$/.test(o)){const i='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+i+"</li>");const c=Ma(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),c.toLowerCase())?(o=i,o=e.dom.createHTML(c,Y1(e),o)):o||(o=i),h2(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Vd({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const i=Bh(ne.fromDom(n))?o:ut.trim(o);return h2(e,i,r.no_selection),{content:i,html:i}}},Mv=(e,n,o,r)=>{Yu(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const i=Vd({validate:!1},e.schema).serialize(o),c=Oi(Bh(ne.fromDom(n))?i:ut.trim(i));return h2(e,c,r.no_selection),{content:o,html:c}},Rv=(e,n,o)=>N.from(e.getBody()).map(r=>g2(n)?Mv(e,r,n,o):Dv(e,r,n,o)).getOr({content:n,html:g2(o.content)?"":o.content}),ug=Iw,PE=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let i=0;i<r.length;i++){const c=r[i];if(Ll(c)&&c.inherit===!1&&e.dom.is(n,c.selector))return!0}return!1},Q5=(e,n,o,r,i)=>{const c=e.dom.getRoot();if(n===c)return!1;const d=e.dom.getParent(n,g=>PE(e,g,o)?!0:g.parentNode===c||!!Ud(e,g,o,r,!0));return!!Ud(e,d,o,r,i)},NE=(e,n,o)=>kr(o)&&ug(n,o.inline)||ju(o)&&ug(n,o.block)?!0:Ll(o)?Bt(n)&&e.is(n,o.selector):!1,W$=(e,n,o,r,i,c)=>{const d=o[r],g=r==="attributes";if(Tt(o.onmatch))return o.onmatch(n,o,r);if(d){if(ji(d)){for(let h=0;h<d.length;h++)if(g?e.getAttrib(n,d[h]):fv(e,n,d[h]))return!0}else for(const h in d)if(nn(d,h)){const y=g?e.getAttrib(n,h):fv(e,n,h),A=Ff(d[h],c),M=dt(y)||oc(y);if(M&&dt(A))continue;if(i&&M&&!o.exact||(!i||o.exact)&&!ug(y,Bw(A,h)))return!1}}return!0},Ud=(e,n,o,r,i)=>{const c=e.formatter.get(o),d=e.dom;if(c&&Bt(n))for(let g=0;g<c.length;g++){const h=c[g];if(NE(e.dom,n,h)&&W$(d,n,h,"attributes",i,r)&&W$(d,n,h,"styles",i,r)){const y=h.classes;if(y){for(let A=0;A<y.length;A++)if(!e.dom.hasClass(n,Ff(y[A],r)))return}return h}}},IE=(e,n,o,r,i)=>{if(r)return Q5(e,r,n,o,i);if(r=e.selection.getNode(),Q5(e,r,n,o,i))return!0;const c=e.selection.getStart();return!!(c!==r&&Q5(e,c,n,o,i))},MY=(e,n,o)=>{const r=[],i={},c=e.selection.getStart();return e.dom.getParent(c,d=>{for(let g=0;g<n.length;g++){const h=n[g];!i[h]&&Ud(e,d,h,o)&&(i[h]=!0,r.push(h))}},e.dom.getRoot()),r},j$=(e,n)=>{const o=i=>Un(i,ne.fromDom(e.getBody())),r=(i,c)=>Ud(e,i.dom,c)?N.some(c):N.none();return N.from(e.selection.getStart(!0)).bind(i=>xh(ne.fromDom(i),c=>Lo(n,d=>r(c,d)),o)).getOrNull()},G$=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const i=e.selection.getStart(),c=Ny(r,i);for(let d=o.length-1;d>=0;d--){const g=o[d];if(!Ll(g))return!0;for(let h=c.length-1;h>=0;h--)if(r.is(c[h],g.selector))return!0}}return!1},RY=(e,n,o)=>Ko(o,(r,i)=>{const c=SF(e,i);return e.formatter.matchNode(n,i,{},c)?r.concat([i]):r},[]),Pv=Ar,qo=(e,n)=>e.importNode(n,!0),K$=e=>{if(e){const n=new _r(e,e);for(let o=n.current();o;o=n.next())if(at(o))return o}return null},q5=e=>{const n=ne.fromTag("span");return xi(n,{id:Oy,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Fs(n,ne.fromText(Pv)),n},Y$=e=>{const n=K$(e);return n&&n.data.charAt(0)===Pv&&n.deleteData(0,1),n},dg=(e,n,o)=>{const r=e.dom,i=e.selection;if(Wo(n))ig(e,!1,ne.fromDom(n),o,!0);else{const c=i.getRng(),d=r.getParent(n,r.isBlock),g=c.startContainer,h=c.startOffset,y=c.endContainer,A=c.endOffset,M=Y$(n);r.remove(n,!0),g===M&&h>0&&c.setStart(M,h-1),y===M&&A>0&&c.setEnd(M,A-1),d&&r.isEmpty(d)&&kf(ne.fromDom(d)),i.setRng(c)}},BE=(e,n,o)=>{const r=e.dom,i=e.selection;if(n)dg(e,n,o);else if(n=Km(e.getBody(),i.getStart()),!n)for(;n=r.get(Oy);)dg(e,n,o)},X$=(e,n,o)=>{var r,i;const c=e.dom,d=c.getParent(o,ht(Pw,e.schema));d&&c.isEmpty(d)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(Gb(ne.fromDom(o)),c.isEmpty(o)?(i=o.parentNode)===null||i===void 0||i.replaceChild(n,o):c.insertAfter(n,o))},Xu=(e,n)=>(e.appendChild(n),n),lo=(e,n)=>{var o;const r=ur(e,(c,d)=>Xu(c,d.cloneNode(!1)),n),i=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return Xu(r,i.createTextNode(Pv))},vr=(e,n,o,r,i,c)=>{const d=e.formatter,g=e.dom,h=Ht(Yt(d.get()),M=>M!==r&&!Ws(M,"removeformat")),y=RY(e,o,h);if(Ht(y,M=>!xF(e,M,r)).length>0){const M=o.cloneNode(!1);return g.add(n,M),d.remove(r,i,M,c),g.remove(M),N.some(M)}else return N.none()},nu=e=>iO(e,Ch(e).replace(new RegExp(`${zo}$`)," ")),Ju=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&ku(ne.fromDom(n)).each(r=>{Ea(r)?nu(r):tx(r,i=>Ea(i)).each(i=>{Ea(i)&&nu(i)})})};e.once("input",r=>{r.data&&!Ym(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},Vf=(e,n,o)=>{let r;const i=e.selection,c=e.formatter.get(n);if(!c)return;const d=i.getRng();let g=d.startOffset;const y=d.startContainer.nodeValue;r=Km(e.getBody(),i.getStart());const A=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(y&&g>0&&g<y.length&&A.test(y.charAt(g))&&A.test(y.charAt(g-1))){const M=i.getBookmark();d.collapse(!0);let R=Qm(e.dom,d,c);R=tg(R),e.formatter.apply(n,o,R),i.moveToBookmark(M)}else{let M=r?K$(r):null;(!r||(M==null?void 0:M.data)!==Pv)&&(r=qo(e.getDoc(),q5(!0).dom),M=r.firstChild,d.insertNode(r),g=1,Ju(e,r)),e.formatter.apply(n,o,r),i.setCursorLocation(M,g)}},LE=(e,n,o,r)=>{const i=e.dom,c=e.selection;let d=!1;const g=e.formatter.get(n);if(!g)return;const h=c.getRng(),y=h.startContainer,A=h.startOffset;let M=y;at(y)&&(A!==y.data.length&&(d=!0),M=M.parentNode);const R=[];let _;for(;M;){if(Ud(e,M,n,o,r)){_=M;break}M.nextSibling&&(d=!0),R.push(M),M=M.parentNode}if(_)if(d){const Z=c.getBookmark();h.collapse(!0);let V=Qm(i,h,g,{includeTrailingSpace:!0});V=tg(V),e.formatter.remove(n,o,V,r),c.moveToBookmark(Z)}else{const Z=Km(e.getBody(),_),V=Ce(Z)?i.getParents(_.parentNode,Qe,Z):[],G=q5(!1).dom;X$(e,G,Z??_);const oe=vr(e,G,_,n,o,r),ue=lo([...R,...oe.toArray(),...V],G);Z&&dg(e,Z,Ce(Z)),c.setCursorLocation(ue,1),Ju(e,G),i.isEmpty(_)&&i.remove(_)}},J$=(e,n,o)=>{const r=e.selection,i=e.getBody();BE(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===Pv&&BE(e,Km(i,r.getStart()),!0),(n===37||n===39)&&BE(e,Km(i,r.getStart()),!0)},Q$=e=>at(e)&&vl(e.data,zo),q$=e=>{e.on("mouseup keydown",n=>{J$(e,n.keyCode,Q$(e.selection.getRng().endContainer))})},eM=e=>{const n=q5(!1),o=lo(e,n.dom);return{caretContainer:n,caretPosition:Be(o,0)}},FE=(e,n)=>{const{caretContainer:o,caretPosition:r}=eM(n);return Ta(ne.fromDom(e),o),b(ne.fromDom(e)),r},Nv=(e,n)=>{const{caretContainer:o,caretPosition:r}=eM(n);return e.insertNode(o.dom),r},_E=(e,n)=>{if(Il(n.dom))return!1;const o=e.schema.getTextInlineElements();return nn(o,ao(n))&&!Il(n.dom)&&!Dm(n.dom)},lp={},tM=Al(["pre"]),eH=(e,n)=>{lp[e]||(lp[e]=[]),lp[e].push(n)},tH=(e,n)=>{nn(lp,e)&&ke(lp[e],o=>{o(n)})};eH("pre",e=>{const n=e.selection.getRng(),o=i=>c=>{const d=c.previousSibling;return tM(d)&&_t(i,d)},r=(i,c)=>{const d=ne.fromDom(c),g=Au(d).dom;b(d),Pu(ne.fromDom(i),[ne.fromTag("br",g),ne.fromTag("br",g),...Fr(d)])};if(!n.collapsed){const i=e.selection.getSelectedBlocks(),c=Ht(Ht(i,tM),o(i));ke(c,d=>{r(d.previousSibling,d)})}});const $E=["fontWeight","fontStyle","color","fontSize","fontFamily"],nH=e=>we(e.styles)&&to(Yt(e.styles),n=>_t($E,n)),oH=e=>No(e,n=>kr(n)&&n.inline==="span"&&nH(n)),nM=(e,n)=>{const o=e.get(n);return Ke(o)?oH(o):N.none()},oM=(e,n)=>li(n,Be.fromRangeStart(e)).isNone(),p2=(e,n)=>rr(n,Be.fromRangeEnd(e)).exists(o=>!ws(o.getNode())||rr(n,o).isSome())===!1,HE=e=>n=>Mb(n)&&e.isEditable(n),v2=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return oM(o,n[0])&&p2(o,n[0])?n:[];{const r=sn(n).filter(d=>oM(o,d)).toArray(),i=On(n).filter(d=>p2(o,d)).toArray(),c=n.slice(1,-1);return r.concat(c).concat(i)}},PY=e=>Ht(v2(e),HE(e.dom)),Dr=e=>Ht(e.getSelectedBlocks(),HE(e.dom)),VE=ut.each,sM=e=>Bt(e)&&!Bl(e)&&!Il(e)&&!Dm(e),rM=(e,n)=>{for(let o=e;o;o=o[n]){if(at(o)&&dn(o.data))return e;if(Bt(o)&&!Bl(o))return o}return e},aM=(e,n,o)=>{const r=V5(e),i=Bu(n)&&e.dom.isEditable(n),c=Bu(o)&&e.dom.isEditable(o);if(i&&c){const d=rM(n,"previousSibling"),g=rM(o,"nextSibling");if(r.compare(d,g)){for(let h=d.nextSibling;h&&h!==g;){const y=h;h=h.nextSibling,d.appendChild(y)}return e.dom.remove(g),ut.each(ut.grep(g.childNodes),h=>{d.appendChild(h)}),d}}return o},iM=(e,n,o,r)=>{var i;if(r&&n.merge_siblings!==!1){const c=(i=aM(e,fD(r),r))!==null&&i!==void 0?i:r;aM(e,c,fD(c,!0))}},sH=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";VE(e.select(r,o),i=>{sM(i)&&e.isEditable(i)&&VE(n.styles,(c,d)=>{e.setStyle(i,d,"")})})}},b2=(e,n,o)=>{VE(e.childNodes,r=>{sM(r)&&(n(r)&&o(r),r.hasChildNodes()&&b2(r,n,o))})},Iv=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},lM=(e,n)=>o=>!!(o&&fv(e,o,n)),zE=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),Iv(e,r)},fg=xr.generate([{keep:[]},{rename:["name"]},{removed:[]}]),mg=/^(src|href|style)$/,y2=ut.each,Bv=Iw,cM=e=>/^(TR|TH|TD)$/.test(e.nodeName),UE=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),ZE=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],i=n[o?"startOffset":"endOffset"];if(Bt(r)){const c=r.childNodes.length-1;!o&&i&&i--,r=r.childNodes[i>c?c:i]}return at(r)&&o&&i>=r.data.length&&(r=new _r(r,e.getBody()).next()||r),at(r)&&!o&&i===0&&(r=new _r(r,e.getBody()).prev()||r),r},uM=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return cM(e)&&r?e.nodeName==="TR"&&r[o]||r:e},C2=(e,n,o,r)=>{var i;const c=e.create(o,r);return(i=n.parentNode)===null||i===void 0||i.insertBefore(c,n),c.appendChild(n),c},dM=(e,n,o,r,i)=>{const c=ne.fromDom(n),d=ne.fromDom(e.create(r,i)),g=o?cb(c):b1(c);return Pu(d,g),o?(Ta(c,d),Tm(d,c)):(Kc(c,d),Fs(d,c)),d.dom},rH=(e,n)=>n.links&&e.nodeName==="A",fM=(e,n,o)=>{const r=n.parentNode;let i;const c=e.dom,d=Ma(e);ju(o)&&r===c.getRoot()&&(!o.list_block||!Bv(n,o.list_block))&&ke(Vn(n.childNodes),g=>{tp(e,d,g.nodeName.toLowerCase())?i?i.appendChild(g):(i=C2(c,g,d),c.setAttribs(i,Y1(e))):i=null}),!(TF(o)&&!Bv(o.inline,n))&&c.remove(n,!0)},mM=(e,n,o)=>St(e)?{name:n,value:null}:{name:e,value:Ff(n,o)},gM=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},aH=(e,n,o,r,i)=>{let c=!1;y2(o.styles,(d,g)=>{const{name:h,value:y}=mM(g,d,r),A=Bw(y,h);(o.remove_similar||te(y)||!Bt(i)||Bv(fv(e,i,h),A))&&e.setStyle(n,h,""),c=!0}),c&&gM(e,n)},iH=(e,n,o)=>{n==="removeformat"?ke(Dr(e.selection),r=>{ke($E,i=>e.dom.setStyle(r,i,"")),gM(e.dom,r)}):nM(e.formatter,n).each(r=>{ke(Dr(e.selection),i=>aH(e.dom,i,r,o,null))})},hM=(e,n,o,r,i)=>{const c=e.dom,d=V5(e),g=e.schema;if(kr(n)&&Ah(g,n.inline)&&vc(g,r)&&r.parentElement===e.getBody())return fM(e,r,n),fg.removed();if(!n.ceFalseOverride&&r&&c.getContentEditableParent(r)==="false"||r&&!NE(c,r,n)&&!rH(r,n))return fg.keep();const h=r,y=n.preserve_attributes;if(kr(n)&&n.remove==="all"&&Ke(y)){const A=Ht(c.getAttribs(h),M=>_t(y,M.name.toLowerCase()));if(c.removeAllAttribs(h),ke(A,M=>c.setAttrib(h,M.name,M.value)),A.length>0)return fg.rename("span")}if(n.remove!=="all"){aH(c,h,n,o,i),y2(n.attributes,(M,R)=>{const{name:_,value:Z}=mM(R,M,o);if(n.remove_similar||te(Z)||!Bt(i)||Bv(c.getAttrib(i,_),Z)){if(_==="class"){const V=c.getAttrib(h,_);if(V){let G="";if(ke(V.split(/\s+/),oe=>{/mce\-\w+/.test(oe)&&(G+=(G?" ":"")+oe)}),G){c.setAttrib(h,_,G);return}}}if(mg.test(_)&&h.removeAttribute("data-mce-"+_),_==="style"&&Al(["li"])(h)&&c.getStyle(h,"list-style-type")==="none"){h.removeAttribute(_),c.setStyle(h,"list-style-type","none");return}_==="class"&&h.removeAttribute("className"),h.removeAttribute(_)}}),y2(n.classes,M=>{M=Ff(M,o),(!Bt(i)||c.hasClass(i,M))&&c.removeClass(h,M)});const A=c.getAttribs(h);for(let M=0;M<A.length;M++){const R=A[M].nodeName;if(!d.isAttributeInternal(R))return fg.keep()}}return n.remove!=="none"?(fM(e,h,n),fg.removed()):fg.keep()},NY=(e,n,o,r,i)=>{let c;return n.parentNode&&ke(Ny(e.dom,n.parentNode).reverse(),d=>{if(!c&&Bt(d)&&d.id!=="_start"&&d.id!=="_end"){const g=Ud(e,d,o,r,i);g&&g.split!==!1&&(c=d)}}),c},lH=(e,n,o,r)=>hM(e,n,o,r,r).fold(Ye(r),i=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,i)),Ye(null)),WE=(e,n,o,r,i,c,d,g)=>{var h,y;let A,M;const R=e.dom;if(o){const _=o.parentNode;for(let Z=r.parentNode;Z&&Z!==_;Z=Z.parentNode){let V=R.clone(Z,!1);for(let G=0;G<n.length&&(V=lH(e,n[G],g,V),V!==null);G++);V&&(A&&V.appendChild(A),M||(M=V),A=V)}(!d.mixed||!R.isBlock(o))&&(r=(h=R.split(o,r))!==null&&h!==void 0?h:r),A&&M&&((y=i.parentNode)===null||y===void 0||y.insertBefore(A,i),M.appendChild(i),kr(d)&&iM(e,d,g,A))}return r},jE=(e,n,o,r,i)=>{const c=e.formatter.get(n),d=c[0],g=e.dom,h=e.selection,y=V=>{const G=NY(e,V,n,o,i);return WE(e,c,G,V,V,!0,d,o)},A=V=>Bl(V)&&Bt(V)&&(V.id==="_start"||V.id==="_end"),M=V=>to(c,G=>S2(e,G,o,V,V)),R=V=>{const G=Vn(V.childNodes),ue=M(V)||to(c,Ue=>NE(g,V,Ue)),ge=V.parentNode;if(!ue&&Ce(ge)&&Fw(d)&&M(ge),d.deep&&G.length)for(let Ue=0;Ue<G.length;Ue++)R(G[Ue]);ke(["underline","line-through","overline"],Ue=>{Bt(V)&&e.dom.getStyle(V,"text-decoration")===Ue&&V.parentNode&&gD(g,V.parentNode)===Ue&&S2(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Ue}},void 0,V)})},_=V=>{const G=g.get(V?"_start":"_end");if(G){let oe=G[V?"firstChild":"lastChild"];return A(oe)&&(oe=oe[V?"firstChild":"lastChild"]),at(oe)&&oe.data.length===0&&(oe=V?G.previousSibling||G.nextSibling:G.nextSibling||G.previousSibling),g.remove(G,!0),oe}else return null},Z=V=>{let G,oe,ue=Qm(g,V,c,{includeTrailingSpace:V.collapsed});if(d.split){if(ue=tg(ue),G=ZE(e,ue,!0),oe=ZE(e,ue),G!==oe){if(G=uM(G,!0),oe=uM(oe,!1),UE(g,G,oe)){const Se=N.from(G.firstChild).getOr(G);y(dM(g,Se,!0,"span",{id:"_start","data-mce-type":"bookmark"})),_(!0);return}if(UE(g,oe,G)){const Se=N.from(oe.lastChild).getOr(oe);y(dM(g,Se,!1,"span",{id:"_end","data-mce-type":"bookmark"})),_(!1);return}G=C2(g,G,"span",{id:"_start","data-mce-type":"bookmark"}),oe=C2(g,oe,"span",{id:"_end","data-mce-type":"bookmark"});const ge=g.createRng();ge.setStartAfter(G),ge.setEndBefore(oe),Wn(g,ge,Se=>{ke(Se,Ue=>{!Bl(Ue)&&!Bl(Ue.parentNode)&&y(Ue)})}),y(G),y(oe),G=_(!0),oe=_()}else G=oe=y(G);ue.startContainer=G.parentNode?G.parentNode:G,ue.startOffset=g.nodeIndex(G),ue.endContainer=oe.parentNode?oe.parentNode:oe,ue.endOffset=g.nodeIndex(oe)+1}Wn(g,ue,ge=>{ke(ge,R)})};if(r){if(Xm(r)){const V=g.createRng();V.setStartBefore(r),V.setEndAfter(r),Z(V)}else Z(r);ak(e,n,r,o);return}!h.isCollapsed()||!kr(d)||_d(e).length?(dD(e,()=>Mw(e,Z),V=>kr(d)&&IE(e,n,o,V)),e.nodeChanged()):LE(e,n,o,i),iH(e,n,o),ak(e,n,r,o)},pM=(e,n,o,r,i)=>{(r||e.selection.isEditable())&&jE(e,n,o,r,i)},S2=(e,n,o,r,i)=>hM(e,n,o,r,i).fold(Ie,c=>(e.dom.rename(r,c),!0),Qe),vM=ut.each,cH=(e,n,o,r)=>{const i=c=>{if(Bu(c)&&Bt(c.parentNode)&&e.isEditable(c)){const d=gD(e,c.parentNode);e.getStyle(c,"color")&&d?e.setStyle(c,"text-decoration",d):e.getStyle(c,"text-decoration")===d&&e.setStyle(c,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(ut.walk(r,i,"childNodes"),i(r))},uH=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const i=lM(e,"fontSize");b2(r,c=>i(c)&&e.isEditable(c),zE(e,"backgroundColor",Ff(n.styles.backgroundColor,o)))}},dH=(e,n,o,r)=>{if(kr(n)&&(n.inline==="sub"||n.inline==="sup")){const i=lM(e,"fontSize");b2(r,d=>i(d)&&e.isEditable(d),zE(e,"fontSize",""));const c=Ht(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(c,!0)}},fH=(e,n,o,r)=>{vM(n,i=>{kr(i)&&vM(e.dom.select(i.inline,r),c=>{sM(c)&&S2(e,i,o,c,i.exact?c:null)}),sH(e.dom,i,r)})},mH=(e,n,o,r,i)=>{const c=i.parentNode;Ud(e,c,o,r)&&S2(e,n,r,i)||n.merge_with_parents&&c&&e.dom.getParent(c,d=>Ud(e,d,o,r)?(S2(e,n,r,i),!0):!1)},x2=ut.each,bM=(e,n,o,r)=>{if(pk(e)&&kr(n)&&o.parentNode){const i=$b(e.schema),c=E1(ne.fromDom(o),d=>Il(d.dom));return Wc(i,r)&&_u(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!c}else return!1},yM=(e,n,o,r)=>{if(x2(o.styles,(i,c)=>{e.setStyle(n,c,Ff(i,r))}),o.styles){const i=e.getAttrib(n,"style");i&&e.setAttrib(n,"data-mce-style",i)}},gH=(e,n,o,r)=>{const i=e.formatter.get(n),c=i[0],d=!r&&e.selection.isCollapsed(),g=e.dom,h=e.selection,y=(Z,V=c)=>{Tt(V.onformat)&&V.onformat(Z,V,o,r),yM(g,Z,V,o),x2(V.attributes,(G,oe)=>{g.setAttrib(Z,oe,Ff(G,o))}),x2(V.classes,G=>{const oe=Ff(G,o);g.hasClass(Z,oe)||g.addClass(Z,oe)})},A=(Z,V)=>{let G=!1;return x2(Z,oe=>Ll(oe)?g.getContentEditable(V)==="false"&&!oe.ceFalseOverride||Ce(oe.collapsed)&&oe.collapsed!==d?!0:g.is(V,oe.selector)&&!Il(V)?(y(V,oe),G=!0,!1):!0:!1),G},M=Z=>{if(ee(Z)){const V=g.create(Z);return y(V),V}else return null},R=(Z,V,G)=>{const oe=[];let ue=!0;const ge=c.inline||c.block,Se=M(ge),Ue=Ne=>wF(c)&&Ud(e,Ne,n,o),tt=(Ne,Ae,je)=>{const Et=EF(c)&&Pw(e.schema,Ne)&&tp(e,Ae,ge);return je&&Et},At=(Ne,Ae,je,Et)=>{const zt=Ne.nodeName.toLowerCase(),Rn=tp(e,ge,zt)&&tp(e,Ae,ge),Nn=!G&&at(Ne)&&Kb(Ne.data),co=Il(Ne),So=!kr(c)||!Z.isBlock(Ne);return(je||Et)&&Rn&&!Nn&&!co&&So};Wn(Z,V,Ne=>{let Ae;const je=Et=>{let zt=!1,Rn=ue,Nn=!1;const co=Et.parentNode,So=co.nodeName.toLowerCase(),cs=Z.getContentEditable(Et);Ce(cs)&&(Rn=ue,ue=cs==="true",zt=!0,Nn=mD(e,Et));const lr=ue&&!zt;if(ws(Et)&&!bM(e,c,Et,So)){Ae=null,ju(c)&&Z.remove(Et);return}if(Ue(Et)){Ae=null;return}if(tt(Et,So,lr)){const yr=Z.rename(Et,ge);y(yr),oe.push(yr),Ae=null;return}if(Ll(c)){let yr=A(i,Et);if(!yr&&Ce(co)&&Fw(c)&&(yr=A(i,co)),!kr(c)||yr){Ae=null;return}}Ce(Se)&&At(Et,So,lr,Nn)?(Ae||(Ae=Z.clone(Se,!1),co.insertBefore(Ae,Et),oe.push(Ae)),Nn&&zt&&(ue=Rn),Ae.appendChild(Et)):(Ae=null,ke(Vn(Et.childNodes),je),zt&&(ue=Rn),Ae=null)};ke(Ne,je)}),c.links===!0&&ke(oe,Ne=>{const Ae=je=>{je.nodeName==="A"&&y(je,c),ke(Vn(je.childNodes),Ae)};Ae(Ne)}),ke(oe,Ne=>{const Ae=zt=>{let Rn=0;return ke(zt.childNodes,Nn=>{!Jm(Nn)&&!Bl(Nn)&&Rn++}),Rn},je=zt=>No(zt.childNodes,Rw).filter(Nn=>Z.getContentEditable(Nn)!=="false"&&NE(Z,Nn,c)).map(Nn=>{const co=Z.clone(Nn,!1);return y(co),Z.replace(co,zt,!0),Z.remove(Nn,!0),co}).getOr(zt),Et=Ae(Ne);if((oe.length>1||!Z.isBlock(Ne))&&Et===0){Z.remove(Ne,!0);return}(kr(c)||ju(c)&&c.wrapper)&&(!c.exact&&Et===1&&(Ne=je(Ne)),fH(e,i,o,Ne),mH(e,c,n,o,Ne),uH(Z,c,o,Ne),cH(Z,c,o,Ne),dH(Z,c,o,Ne),iM(e,c,o,Ne))})},_=Xm(r)?r:h.getNode();if(g.getContentEditable(_)==="false"&&!mD(e,_)){r=_,A(i,r),Nf(e,n,r,o);return}if(c){if(r)if(Xm(r)){if(!A(i,r)){const Z=g.createRng();Z.setStartBefore(r),Z.setEndAfter(r),R(g,Qm(g,Z,i),!0)}}else R(g,r,!0);else!d||!kr(c)||_d(e).length?(h.setRng(DE(h.getRng())),dD(e,()=>{Mw(e,(Z,V)=>{const G=V?Z:Qm(g,Z,i);R(g,G,!1)})},Qe),e.nodeChanged()):Vf(e,n,o),nM(e.formatter,n).each(Z=>{ke(PY(e.selection),V=>yM(g,V,Z,o))});tH(n,e)}Nf(e,n,r,o)},Qu=(e,n,o,r)=>{(r||e.selection.isEditable())&&gH(e,n,o,r)},CM=e=>nn(e,"vars"),SM=(e,n)=>{e.set({}),n.on("NodeChange",o=>{KE(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=N.from(o.node).map(i=>Xm(i)?i:i.startContainer).bind(i=>Bt(i)?N.some(i):N.from(i.parentElement)).getOrThunk(()=>xM(n));KE(n,r,e.get())})},xM=e=>e.selection.getStart(),wM=(e,n,o,r,i)=>za(n,g=>{const h=e.formatter.matchNode(g,o,i??{},r);return!Je(h)},g=>PE(e,g,o)?!0:r?!1:Ce(e.formatter.matchNode(g,o,i,!0))),GE=(e,n)=>{const o=n??xM(e);return Ht(Ny(e.dom,o),r=>Bt(r)&&!Dm(r))},KE=(e,n,o)=>{const r=GE(e,n);$e(o,(i,c)=>{const d=g=>{const h=wM(e,r,c,g.similar,CM(g)?g.vars:void 0),y=h.isSome();if(g.state.get()!==y){g.state.set(y);const A=h.getOr(n);CM(g)?g.callback(y,{node:A,format:c,parents:r}):ke(g.callbacks,M=>M(y,{node:A,format:c,parents:r}))}};ke([i.withSimilar,i.withoutSimilar],d),ke(i.withVars,d)})},EM=(e,n,o,r,i,c)=>{const d=n.get();ke(o.split(","),g=>{const h=Fo(d,g).getOrThunk(()=>{const A={withSimilar:{state:is(!1),similar:!0,callbacks:[]},withoutSimilar:{state:is(!1),similar:!1,callbacks:[]},withVars:[]};return d[g]=A,A}),y=()=>{const A=GE(e);return wM(e,A,g,i,c).isSome()};if(Je(c)){const A=i?h.withSimilar:h.withoutSimilar;A.callbacks.push(r),A.callbacks.length===1&&A.state.set(y())}else h.withVars.push({state:is(y()),similar:i,vars:c,callback:r})}),n.set(d)},TM=(e,n,o)=>{const r=e.get();ke(n.split(","),i=>Fo(r,i).each(c=>{r[i]={withSimilar:{...c.withSimilar,callbacks:Ht(c.withSimilar.callbacks,d=>d!==o)},withoutSimilar:{...c.withoutSimilar,callbacks:Ht(c.withoutSimilar.callbacks,d=>d!==o)},withVars:Ht(c.withVars,d=>d.callback!==o)}})),e.set(r)},hH=(e,n,o,r,i,c)=>(EM(e,n,o,r,i,c),{unbind:()=>TM(n,o,r)}),pH=(e,n,o,r)=>{const i=e.formatter.get(n);i&&(IE(e,n,o,r)&&(!("toggle"in i[0])||i[0].toggle)?pM(e,n,o,r):Qu(e,n,o,r))},AM=ut.explode,OM=()=>{const e={};return{addFilter:(i,c)=>{ke(AM(i),d=>{nn(e,d)||(e[d]={name:d,callbacks:[]}),e[d].callbacks.push(c)})},getFilters:()=>pu(e),removeFilter:(i,c)=>{ke(AM(i),d=>{if(nn(e,d))if(Ce(c)){const g=e[d],h=Ht(g.callbacks,y=>y!==c);h.length>0?g.callbacks=h:delete e[d]}else delete e[d]})}}},vH=(e,n)=>{ke(n,o=>{e.attr(o,null)})},gg=(e,n,o)=>{e.addNodeFilter("font",r=>{ke(r,i=>{const c=n.parse(i.attr("style")),d=i.attr("color"),g=i.attr("face"),h=i.attr("size");d&&(c.color=d),g&&(c["font-family"]=g),h&&Ci(h).each(y=>{c["font-size"]=o[y-1]}),i.name="span",i.attr("style",n.serialize(c)),vH(i,["color","face","size"])})})},kM=(e,n,o)=>{e.addNodeFilter("strike",r=>{const i=n.type!=="html4";ke(r,c=>{if(i)c.name="s";else{const d=o.parse(c.attr("style"));d["text-decoration"]="line-through",c.name="span",c.attr("style",o.serialize(d))}})})},DM=(e,n,o)=>{var r;const i=Hu();n.convert_fonts_to_spans&&gg(e,i,ut.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),kM(e,o,i)},bH=(e,n,o)=>{n.inline_styles&&DM(e,n,o)},YE=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),yH=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},XE=e=>{try{return decodeURIComponent(e)}catch{return e}},w2=e=>{const[n,...o]=e.split(","),r=o.join(","),i=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(i){const c=i[2]===";base64",d=XE(r),g=c?yH(d):d;return N.some({type:i[1],data:g,base64Encoded:c})}else return N.none()},MM=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return N.none()}const i=new Uint8Array(r.length);for(let c=0;c<i.length;c++)i[c]=r.charCodeAt(c);return N.some(new Blob([i],{type:e}))},CH=e=>new Promise((n,o)=>{w2(e).bind(({type:r,data:i,base64Encoded:c})=>MM(r,i,c)).fold(()=>o("Invalid data URI"),n)}),E2=e=>Ps(e,"blob:")?YE(e):Ps(e,"data:")?CH(e):Promise.reject("Unknown URI format"),RM=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var i;o((i=r.error)===null||i===void 0?void 0:i.message)},r.readAsDataURL(e)});let JE=0;const SH=e=>"blobid"+JE++,QE=(e,n,o)=>w2(e).bind(({data:r,type:i,base64Encoded:c})=>{if(n&&!c)return N.none();{const d=c?r:btoa(r);return o(d,i)}}),qE=(e,n,o)=>{const r=e.create(SH(),n,o);return e.add(r),r},T2=(e,n,o=!1)=>QE(n,o,(r,i)=>N.from(e.getByData(r,i)).orThunk(()=>MM(i,r).map(c=>qE(e,c,r)))),PM=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(Ps(n,"blob:")){const r=e.getByUri(n);return Ce(r)?Promise.resolve(r):E2(n).then(i=>RM(i).then(c=>QE(c,!1,d=>N.some(qE(e,i,d))).getOrThunk(o)))}else return Ps(n,"data:")?T2(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},e4=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,xH=e=>N.from(e.match(e4)).bind(n=>en(n,1)).map(n=>Ps(n,"www.")?n.substring(4):n),NM=(e,n)=>{N.from(e.attr("src")).bind(xH).forall(o=>!_t(n,o))&&e.attr("sandbox","")},t4=(e,n)=>Ps(e,`${n}/`),sl=e=>Je(e)?"iframe":t4(e,"image")?"img":t4(e,"video")?"video":t4(e,"audio")?"audio":"iframe",IM=({type:e,src:n,width:o,height:r}={},i,c)=>{const d=sl(e),g=new Ka(d,1);return g.attr(d==="audio"?{src:n}:{src:n,width:o,height:r}),(d==="audio"||d==="video")&&g.attr("controls",""),d==="iframe"&&i&&NM(g,c),g},wH=e=>Ce(e.attr("data-mce-bogus")),BM=e=>e.attr("src")===no.transparentSrc||Ce(e.attr("data-mce-placeholder")),EH=(e,n)=>{const{blob_cache:o}=n;if(o){const r=i=>{const c=i.attr("src");BM(i)||wH(i)||dt(c)||T2(o,c,!0).each(d=>{i.attr("src",d.blobUri())})};e.addAttributeFilter("src",i=>ke(i,r))}},TH=(e,n)=>{var o,r;const i=e.schema;e.addAttributeFilter("href",h=>{let y=h.length;const A=R=>R.split(" ").filter(Z=>Z.length>0).concat(["noopener"]).sort().join(" "),M=R=>{const _=R?ut.trim(R):"";return/\b(noopener)\b/g.test(_)?_:A(_)};if(!n.allow_unsafe_link_target)for(;y--;){const R=h[y];R.name==="a"&&R.attr("target")==="_blank"&&R.attr("rel",M(R.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",h=>{let y=h.length,A,M,R,_;for(;y--;)if(_=h[y],_.name==="a"&&_.firstChild&&!_.attr("href"))for(R=_.parent,A=_.lastChild;A&&R;)M=A.prev,R.insert(A,_),A=M}),n.fix_list_elements&&e.addNodeFilter("ul,ol",h=>{let y=h.length,A,M;for(;y--;)if(A=h[y],M=A.parent,M&&(M.name==="ul"||M.name==="ol"))if(A.prev&&A.prev.name==="li")A.prev.append(A);else{const R=new Ka("li",1);R.attr("style","list-style-type: none"),A.wrap(R)}});const c=i.getValidClasses();n.validate&&c&&e.addAttributeFilter("class",h=>{var y;let A=h.length;for(;A--;){const M=h[A],R=(y=M.attr("class"))!==null&&y!==void 0?y:"",_=ut.explode(R," ");let Z="";for(let V=0;V<_.length;V++){const G=_[V];let oe=!1,ue=c["*"];ue&&ue[G]&&(oe=!0),ue=c[M.name],!oe&&ue&&ue[G]&&(oe=!0),oe&&(Z&&(Z+=" "),Z+=G)}Z.length||(Z=null),M.attr("class",Z)}}),EH(e,n);const d=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,g=wn((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",h=>ke(h,y=>{y.replace(IM({type:y.attr("type"),src:y.name==="object"?y.attr("data"):y.attr("src"),width:y.attr("width"),height:y.attr("height")},d,g))})),d&&e.addNodeFilter("iframe",h=>ke(h,y=>NM(y,g)))};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:LM,setPrototypeOf:hg,isFrozen:cp,getPrototypeOf:IY,getOwnPropertyDescriptor:AH}=Object;let{freeze:Ri,seal:Mr,create:FM}=Object,{apply:n4,construct:up}=typeof Reflect<"u"&&Reflect;Ri||(Ri=function(n){return n}),Mr||(Mr=function(n){return n}),n4||(n4=function(n,o,r){return n.apply(o,r)}),up||(up=function(n,o){return new n(...o)});const A2=Ni(Array.prototype.forEach),o4=Ni(Array.prototype.lastIndexOf),O2=Ni(Array.prototype.pop),dp=Ni(Array.prototype.push),OH=Ni(Array.prototype.splice),s4=Ni(String.prototype.toLowerCase),qu=Ni(String.prototype.toString),_M=Ni(String.prototype.match),Lv=Ni(String.prototype.replace),kH=Ni(String.prototype.indexOf),Fn=Ni(String.prototype.trim),ou=Ni(Object.prototype.hasOwnProperty),Pi=Ni(RegExp.prototype.test),fp=DH(TypeError);function Ni(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return n4(e,n,r)}}function DH(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return up(e,o)}}function Tn(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s4;hg&&hg(e,null);let r=n.length;for(;r--;){let i=n[r];if(typeof i=="string"){const c=o(i);c!==i&&(cp(n)||(n[r]=c),i=c)}e[i]=!0}return e}function MH(e){for(let n=0;n<e.length;n++)ou(e,n)||(e[n]=null);return e}function pg(e){const n=FM(null);for(const[o,r]of LM(e))ou(e,o)&&(Array.isArray(r)?n[o]=MH(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=pg(r):n[o]=r);return n}function Fv(e,n){for(;e!==null;){const r=AH(e,n);if(r){if(r.get)return Ni(r.get);if(typeof r.value=="function")return Ni(r.value)}e=IY(e)}function o(){return null}return o}const $M=Ri(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),es=Ri(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),k2=Ri(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),HM=Ri(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),r4=Ri(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),VM=Ri(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),zM=Ri(["#text"]),ed=Ri(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),_v=Ri(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),UM=Ri(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),D2=Ri(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),a4=Mr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),RH=Mr(/<%[\w\W]*|[\w\W]*%>/gm),PH=Mr(/\$\{[\w\W]*/gm),ar=Mr(/^data-[\-\w.\u00B7-\uFFFF]+$/),NH=Mr(/^aria-[\-\w]+$/),Zd=Mr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IH=Mr(/^(?:\w+script|data):/i),BH=Mr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ZM=Mr(/^html$/i),LH=Mr(/^[a-z][.\w]*(-[.\w]+)+$/i);var WM=Object.freeze({__proto__:null,ARIA_ATTR:NH,ATTR_WHITESPACE:BH,CUSTOM_ELEMENT:LH,DATA_ATTR:ar,DOCTYPE_NAME:ZM,ERB_EXPR:RH,IS_ALLOWED_URI:Zd,IS_SCRIPT_OR_DATA:IH,MUSTACHE_EXPR:a4,TMPLIT_EXPR:PH});const $v={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},FH=function(){return typeof window>"u"?null:window},_H=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";o&&o.hasAttribute(i)&&(r=o.getAttribute(i));const c="dompurify"+(r?"#"+r:"");try{return n.createPolicy(c,{createHTML(d){return d},createScriptURL(d){return d}})}catch{return console.warn("TrustedTypes policy "+c+" could not be created."),null}},jM=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Hv(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:FH();const n=jn=>Hv(jn);if(n.version="3.2.4",n.removed=[],!e||!e.document||e.document.nodeType!==$v.document||!e.Element)return n.isSupported=!1,n;let{document:o}=e;const r=o,i=r.currentScript,{DocumentFragment:c,HTMLTemplateElement:d,Node:g,Element:h,NodeFilter:y,NamedNodeMap:A=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:M,DOMParser:R,trustedTypes:_}=e,Z=h.prototype,V=Fv(Z,"cloneNode"),G=Fv(Z,"remove"),oe=Fv(Z,"nextSibling"),ue=Fv(Z,"childNodes"),ge=Fv(Z,"parentNode");if(typeof d=="function"){const jn=o.createElement("template");jn.content&&jn.content.ownerDocument&&(o=jn.content.ownerDocument)}let Se,Ue="";const{implementation:tt,createNodeIterator:At,createDocumentFragment:Ne,getElementsByTagName:Ae}=o,{importNode:je}=r;let Et=jM();n.isSupported=typeof LM=="function"&&typeof ge=="function"&&tt&&tt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:zt,ERB_EXPR:Rn,TMPLIT_EXPR:Nn,DATA_ATTR:co,ARIA_ATTR:So,IS_SCRIPT_OR_DATA:cs,ATTR_WHITESPACE:lr,CUSTOM_ELEMENT:yr}=WM;let{IS_ALLOWED_URI:pt}=WM,Vt=null;const ro=Tn({},[...$M,...es,...k2,...r4,...zM]);let uo=null;const He=Tn({},[...ed,..._v,...UM,...D2]);let nt=Object.seal(FM(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$t=null,Pn=null,Hn=!0,go=!0,ql=!1,rd=!0,Ba=!1,mi=!0,ll=!1,ya=!1,qa=!1,ec=!1,om=!1,jt=!1,Yn=!0,Ts=!1;const Xs="user-content-";let Cr=!0,Js=!1,us={},ds=null;const ei=Tn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let $c=null;const ad=Tn({},["audio","video","img","source","image","track"]);let du=null;const t1=Tn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Gg="http://www.w3.org/1998/Math/MathML",nf="http://www.w3.org/2000/svg",tc="http://www.w3.org/1999/xhtml";let of=tc,$0=!1,n1=null;const qI=Tn({},[Gg,nf,tc],qu);let o1=Tn({},["mi","mo","mn","ms","mtext"]),s1=Tn({},["annotation-xml"]);const eB=Tn({},["title","style","font","a","script"]);let r1=null;const id=["application/xhtml+xml","text/html"],Kg="text/html";let be=null,Ee=null;const gt=o.createElement("form"),st=function(Oe){return Oe instanceof RegExp||Oe instanceof Function},Qt=function(){let Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ee&&Ee===Oe)){if((!Oe||typeof Oe!="object")&&(Oe={}),Oe=pg(Oe),r1=id.indexOf(Oe.PARSER_MEDIA_TYPE)===-1?Kg:Oe.PARSER_MEDIA_TYPE,be=r1==="application/xhtml+xml"?qu:s4,Vt=ou(Oe,"ALLOWED_TAGS")?Tn({},Oe.ALLOWED_TAGS,be):ro,uo=ou(Oe,"ALLOWED_ATTR")?Tn({},Oe.ALLOWED_ATTR,be):He,n1=ou(Oe,"ALLOWED_NAMESPACES")?Tn({},Oe.ALLOWED_NAMESPACES,qu):qI,du=ou(Oe,"ADD_URI_SAFE_ATTR")?Tn(pg(t1),Oe.ADD_URI_SAFE_ATTR,be):t1,$c=ou(Oe,"ADD_DATA_URI_TAGS")?Tn(pg(ad),Oe.ADD_DATA_URI_TAGS,be):ad,ds=ou(Oe,"FORBID_CONTENTS")?Tn({},Oe.FORBID_CONTENTS,be):ei,$t=ou(Oe,"FORBID_TAGS")?Tn({},Oe.FORBID_TAGS,be):{},Pn=ou(Oe,"FORBID_ATTR")?Tn({},Oe.FORBID_ATTR,be):{},us=ou(Oe,"USE_PROFILES")?Oe.USE_PROFILES:!1,Hn=Oe.ALLOW_ARIA_ATTR!==!1,go=Oe.ALLOW_DATA_ATTR!==!1,ql=Oe.ALLOW_UNKNOWN_PROTOCOLS||!1,rd=Oe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ba=Oe.SAFE_FOR_TEMPLATES||!1,mi=Oe.SAFE_FOR_XML!==!1,ll=Oe.WHOLE_DOCUMENT||!1,ec=Oe.RETURN_DOM||!1,om=Oe.RETURN_DOM_FRAGMENT||!1,jt=Oe.RETURN_TRUSTED_TYPE||!1,qa=Oe.FORCE_BODY||!1,Yn=Oe.SANITIZE_DOM!==!1,Ts=Oe.SANITIZE_NAMED_PROPS||!1,Cr=Oe.KEEP_CONTENT!==!1,Js=Oe.IN_PLACE||!1,pt=Oe.ALLOWED_URI_REGEXP||Zd,of=Oe.NAMESPACE||tc,o1=Oe.MATHML_TEXT_INTEGRATION_POINTS||o1,s1=Oe.HTML_INTEGRATION_POINTS||s1,nt=Oe.CUSTOM_ELEMENT_HANDLING||{},Oe.CUSTOM_ELEMENT_HANDLING&&st(Oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(nt.tagNameCheck=Oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Oe.CUSTOM_ELEMENT_HANDLING&&st(Oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(nt.attributeNameCheck=Oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Oe.CUSTOM_ELEMENT_HANDLING&&typeof Oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(nt.allowCustomizedBuiltInElements=Oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ba&&(go=!1),om&&(ec=!0),us&&(Vt=Tn({},zM),uo=[],us.html===!0&&(Tn(Vt,$M),Tn(uo,ed)),us.svg===!0&&(Tn(Vt,es),Tn(uo,_v),Tn(uo,D2)),us.svgFilters===!0&&(Tn(Vt,k2),Tn(uo,_v),Tn(uo,D2)),us.mathMl===!0&&(Tn(Vt,r4),Tn(uo,UM),Tn(uo,D2))),Oe.ADD_TAGS&&(Vt===ro&&(Vt=pg(Vt)),Tn(Vt,Oe.ADD_TAGS,be)),Oe.ADD_ATTR&&(uo===He&&(uo=pg(uo)),Tn(uo,Oe.ADD_ATTR,be)),Oe.ADD_URI_SAFE_ATTR&&Tn(du,Oe.ADD_URI_SAFE_ATTR,be),Oe.FORBID_CONTENTS&&(ds===ei&&(ds=pg(ds)),Tn(ds,Oe.FORBID_CONTENTS,be)),Cr&&(Vt["#text"]=!0),ll&&Tn(Vt,["html","head","body"]),Vt.table&&(Tn(Vt,["tbody"]),delete $t.tbody),Oe.TRUSTED_TYPES_POLICY){if(typeof Oe.TRUSTED_TYPES_POLICY.createHTML!="function")throw fp('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Oe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw fp('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Se=Oe.TRUSTED_TYPES_POLICY,Ue=Se.createHTML("")}else Se===void 0&&(Se=_H(_,i)),Se!==null&&typeof Ue=="string"&&(Ue=Se.createHTML(""));Ri&&Ri(Oe),Ee=Oe}},qn=Tn({},[...es,...k2,...HM]),As=Tn({},[...r4,...VM]),Ca=function(Oe){let Ut=ge(Oe);(!Ut||!Ut.tagName)&&(Ut={namespaceURI:of,tagName:"template"});const Mn=s4(Oe.tagName),Is=s4(Ut.tagName);return n1[Oe.namespaceURI]?Oe.namespaceURI===nf?Ut.namespaceURI===tc?Mn==="svg":Ut.namespaceURI===Gg?Mn==="svg"&&(Is==="annotation-xml"||o1[Is]):!!qn[Mn]:Oe.namespaceURI===Gg?Ut.namespaceURI===tc?Mn==="math":Ut.namespaceURI===nf?Mn==="math"&&s1[Is]:!!As[Mn]:Oe.namespaceURI===tc?Ut.namespaceURI===nf&&!s1[Is]||Ut.namespaceURI===Gg&&!o1[Is]?!1:!As[Mn]&&(eB[Mn]||!qn[Mn]):!!(r1==="application/xhtml+xml"&&n1[Oe.namespaceURI]):!1},Hc=function(Oe){dp(n.removed,{element:Oe});try{ge(Oe).removeChild(Oe)}catch{G(Oe)}},a1=function(Oe,Ut){try{dp(n.removed,{attribute:Ut.getAttributeNode(Oe),from:Ut})}catch{dp(n.removed,{attribute:null,from:Ut})}if(Ut.removeAttribute(Oe),Oe==="is")if(ec||om)try{Hc(Ut)}catch{}else try{Ut.setAttribute(Oe,"")}catch{}},tB=function(Oe){let Ut=null,Mn=null;if(qa)Oe="<remove></remove>"+Oe;else{const Fa=_M(Oe,/^[\r\n\t ]+/);Mn=Fa&&Fa[0]}r1==="application/xhtml+xml"&&of===tc&&(Oe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Oe+"</body></html>");const Is=Se?Se.createHTML(Oe):Oe;if(of===tc)try{Ut=new R().parseFromString(Is,r1)}catch{}if(!Ut||!Ut.documentElement){Ut=tt.createDocument(of,"template",null);try{Ut.documentElement.innerHTML=$0?Ue:Is}catch{}}const La=Ut.body||Ut.documentElement;return Oe&&Mn&&La.insertBefore(o.createTextNode(Mn),La.childNodes[0]||null),of===tc?Ae.call(Ut,ll?"html":"body")[0]:ll?Ut.documentElement:La},H0=function(Oe){return At.call(Oe.ownerDocument||Oe,Oe,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT|y.SHOW_PROCESSING_INSTRUCTION|y.SHOW_CDATA_SECTION,null)},PA=function(Oe){return Oe instanceof M&&(typeof Oe.nodeName!="string"||typeof Oe.textContent!="string"||typeof Oe.removeChild!="function"||!(Oe.attributes instanceof A)||typeof Oe.removeAttribute!="function"||typeof Oe.setAttribute!="function"||typeof Oe.namespaceURI!="string"||typeof Oe.insertBefore!="function"||typeof Oe.hasChildNodes!="function")},nB=function(Oe){return typeof g=="function"&&Oe instanceof g};function sf(jn,Oe,Ut){A2(jn,Mn=>{Mn.call(n,Oe,Ut,Ee)})}const NA=function(Oe){let Ut=null;if(sf(Et.beforeSanitizeElements,Oe,null),PA(Oe))return Hc(Oe),!0;const Mn=be(Oe.nodeName);if(sf(Et.uponSanitizeElement,Oe,{tagName:Mn,allowedTags:Vt}),Oe.hasChildNodes()&&!nB(Oe.firstElementChild)&&Pi(/<[/\w]/g,Oe.innerHTML)&&Pi(/<[/\w]/g,Oe.textContent)||Oe.nodeType===$v.progressingInstruction||mi&&Oe.nodeType===$v.comment&&Pi(/<[/\w]/g,Oe.data))return Hc(Oe),!0;if(!Vt[Mn]||$t[Mn]){if(!$t[Mn]&&IA(Mn)&&(nt.tagNameCheck instanceof RegExp&&Pi(nt.tagNameCheck,Mn)||nt.tagNameCheck instanceof Function&&nt.tagNameCheck(Mn)))return!1;if(Cr&&!ds[Mn]){const Is=ge(Oe)||Oe.parentNode,La=ue(Oe)||Oe.childNodes;if(La&&Is){const Fa=La.length;for(let _i=Fa-1;_i>=0;--_i){const fu=V(La[_i],!0);fu.__removalCount=(Oe.__removalCount||0)+1,Is.insertBefore(fu,oe(Oe))}}}return Hc(Oe),!0}return Oe instanceof h&&!Ca(Oe)||(Mn==="noscript"||Mn==="noembed"||Mn==="noframes")&&Pi(/<\/no(script|embed|frames)/i,Oe.innerHTML)?(Hc(Oe),!0):(Ba&&Oe.nodeType===$v.text&&(Ut=Oe.textContent,A2([zt,Rn,Nn],Is=>{Ut=Lv(Ut,Is," ")}),Oe.textContent!==Ut&&(dp(n.removed,{element:Oe.cloneNode()}),Oe.textContent=Ut)),sf(Et.afterSanitizeElements,Oe,null),!1)},oB=function(Oe,Ut,Mn){if(Yn&&(Ut==="id"||Ut==="name")&&(Mn in o||Mn in gt))return!1;if(!(go&&!Pn[Ut]&&Pi(co,Ut))){if(!(Hn&&Pi(So,Ut))){if(!uo[Ut]||Pn[Ut]){if(!(IA(Oe)&&(nt.tagNameCheck instanceof RegExp&&Pi(nt.tagNameCheck,Oe)||nt.tagNameCheck instanceof Function&&nt.tagNameCheck(Oe))&&(nt.attributeNameCheck instanceof RegExp&&Pi(nt.attributeNameCheck,Ut)||nt.attributeNameCheck instanceof Function&&nt.attributeNameCheck(Ut))||Ut==="is"&&nt.allowCustomizedBuiltInElements&&(nt.tagNameCheck instanceof RegExp&&Pi(nt.tagNameCheck,Mn)||nt.tagNameCheck instanceof Function&&nt.tagNameCheck(Mn))))return!1}else if(!du[Ut]){if(!Pi(pt,Lv(Mn,lr,""))){if(!((Ut==="src"||Ut==="xlink:href"||Ut==="href")&&Oe!=="script"&&kH(Mn,"data:")===0&&$c[Oe])){if(!(ql&&!Pi(cs,Lv(Mn,lr,"")))){if(Mn)return!1}}}}}}return!0},IA=function(Oe){return Oe!=="annotation-xml"&&_M(Oe,yr)},sB=function(Oe){sf(Et.beforeSanitizeAttributes,Oe,null);const{attributes:Ut}=Oe;if(!Ut||PA(Oe))return;const Mn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:uo,forceKeepAttr:void 0};let Is=Ut.length;for(;Is--;){const La=Ut[Is],{name:Fa,namespaceURI:_i,value:fu}=La,V0=be(Fa);let _a=Fa==="value"?fu:Fn(fu);const sK=_a;if(Mn.attrName=V0,Mn.attrValue=_a,Mn.keepAttr=!0,Mn.forceKeepAttr=void 0,sf(Et.uponSanitizeAttribute,Oe,Mn),_a=Mn.attrValue,Ts&&(V0==="id"||V0==="name")&&(a1(Fa,Oe),_a=Xs+_a),mi&&Pi(/((--!?|])>)|<\/(style|title)/i,_a)){a1(Fa,Oe);continue}if(Mn.forceKeepAttr)continue;if(!Mn.keepAttr){a1(Fa,Oe);continue}if(!rd&&Pi(/\/>/i,_a)){a1(Fa,Oe);continue}Ba&&A2([zt,Rn,Nn],aB=>{_a=Lv(_a,aB," ")});const rB=be(Oe.nodeName);if(!oB(rB,V0,_a)){a1(Fa,Oe);continue}if(Se&&typeof _=="object"&&typeof _.getAttributeType=="function"&&!_i)switch(_.getAttributeType(rB,V0)){case"TrustedHTML":{_a=Se.createHTML(_a);break}case"TrustedScriptURL":{_a=Se.createScriptURL(_a);break}}if(_a!==sK)try{_i?Oe.setAttributeNS(_i,Fa,_a):Oe.setAttribute(Fa,_a),PA(Oe)?Hc(Oe):O2(n.removed)}catch{}}sf(Et.afterSanitizeAttributes,Oe,null)},oK=function jn(Oe){let Ut=null;const Mn=H0(Oe);for(sf(Et.beforeSanitizeShadowDOM,Oe,null);Ut=Mn.nextNode();)sf(Et.uponSanitizeShadowNode,Ut,null),NA(Ut),sB(Ut),Ut.content instanceof c&&jn(Ut.content);sf(Et.afterSanitizeShadowDOM,Oe,null)};return n.sanitize=function(jn){let Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ut=null,Mn=null,Is=null,La=null;if($0=!jn,$0&&(jn="<!-->"),typeof jn!="string"&&!nB(jn))if(typeof jn.toString=="function"){if(jn=jn.toString(),typeof jn!="string")throw fp("dirty is not a string, aborting")}else throw fp("toString is not a function");if(!n.isSupported)return jn;if(ya||Qt(Oe),n.removed=[],typeof jn=="string"&&(Js=!1),Js){if(jn.nodeName){const fu=be(jn.nodeName);if(!Vt[fu]||$t[fu])throw fp("root node is forbidden and cannot be sanitized in-place")}}else if(jn instanceof g)Ut=tB("<!---->"),Mn=Ut.ownerDocument.importNode(jn,!0),Mn.nodeType===$v.element&&Mn.nodeName==="BODY"||Mn.nodeName==="HTML"?Ut=Mn:Ut.appendChild(Mn);else{if(!ec&&!Ba&&!ll&&jn.indexOf("<")===-1)return Se&&jt?Se.createHTML(jn):jn;if(Ut=tB(jn),!Ut)return ec?null:jt?Ue:""}Ut&&qa&&Hc(Ut.firstChild);const Fa=H0(Js?jn:Ut);for(;Is=Fa.nextNode();)NA(Is),sB(Is),Is.content instanceof c&&oK(Is.content);if(Js)return jn;if(ec){if(om)for(La=Ne.call(Ut.ownerDocument);Ut.firstChild;)La.appendChild(Ut.firstChild);else La=Ut;return(uo.shadowroot||uo.shadowrootmode)&&(La=je.call(r,La,!0)),La}let _i=ll?Ut.outerHTML:Ut.innerHTML;return ll&&Vt["!doctype"]&&Ut.ownerDocument&&Ut.ownerDocument.doctype&&Ut.ownerDocument.doctype.name&&Pi(ZM,Ut.ownerDocument.doctype.name)&&(_i="<!DOCTYPE "+Ut.ownerDocument.doctype.name+`>
`+_i),Ba&&A2([zt,Rn,Nn],fu=>{_i=Lv(_i,fu," ")}),Se&&jt?Se.createHTML(_i):_i},n.setConfig=function(){let jn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Qt(jn),ya=!0},n.clearConfig=function(){Ee=null,ya=!1},n.isValidAttribute=function(jn,Oe,Ut){Ee||Qt({});const Mn=be(jn),Is=be(Oe);return oB(Mn,Is,Ut)},n.addHook=function(jn,Oe){typeof Oe=="function"&&dp(Et[jn],Oe)},n.removeHook=function(jn,Oe){if(Oe!==void 0){const Ut=o4(Et[jn],Oe);return Ut===-1?void 0:OH(Et[jn],Ut,1)[0]}return O2(Et[jn])},n.removeHooks=function(jn){Et[jn]=[]},n.removeAllHooks=function(){Et=jM()},n}var i4=Hv();const GM=ut.each,BY=ut.trim,Vv=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],$H={ftp:21,http:80,https:443,mailto:25},l4=["img","video"],HH=(e,n)=>Ce(e)?!e:Ce(n)?!_t(l4,n):!0,VH=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},KM=(e,n,o)=>{const r=VH(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?HH(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Rc{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),i=/data:([^;]+)/.exec(r[0]);return i&&(o=i[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const i=_o.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!KM(r,i,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=BY(n),this.settings=o;const r=o.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){i.source=n;return}const c=n.indexOf("//")===0;if(n.indexOf("/")===0&&!c&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const g=r?r.path:new Rc(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+i.toAbsPath(g,n);else{const h=/([^#?]*)([#?]?.*)/.exec(n);h&&(n=(r&&r.protocol||"http")+"://mce_host"+i.toAbsPath(g,h[1])+h[2])}}n=n.replace(/@@/g,"(mce_at)");const d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);d&&GM(Vv,(g,h)=>{let y=d[h];y&&(y=y.replace(/\(mce_at\)/g,"@@")),i[g]=y}),r&&(i.protocol||(i.protocol=r.protocol),i.userInfo||(i.userInfo=r.userInfo),!i.port&&i.host==="mce_host"&&(i.port=r.port),(!i.host||i.host==="mce_host")&&(i.host=r.host),i.source=""),c&&(i.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Rc(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),i=o.getURI();if(r===i||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===i)return r;let c=this.toRelPath(this.path,o.path);return o.query&&(c+="?"+o.query),o.anchor&&(c+="#"+o.anchor),c}toAbsolute(n,o){const r=new Rc(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?$H[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,i="",c,d;const g=n.substring(0,n.lastIndexOf("/")).split("/"),h=o.split("/");if(g.length>=h.length){for(c=0,d=g.length;c<d;c++)if(c>=h.length||g[c]!==h[c]){r=c+1;break}}if(g.length<h.length){for(c=0,d=h.length;c<d;c++)if(c>=g.length||g[c]!==h[c]){r=c+1;break}}if(r===1)return o;for(c=0,d=g.length-(r-1);c<d;c++)i+="../";for(c=r-1,d=h.length;c<d;c++)c!==r-1?i+="/"+h[c]:i+=h[c];return i}toAbsPath(n,o){let r=0;const i=/\/$/.test(o)?"/":"",c=n.split("/"),d=o.split("/"),g=[];GM(c,M=>{M&&g.push(M)});const h=[];for(let M=d.length-1;M>=0;M--)if(!(d[M].length===0||d[M]===".")){if(d[M]===".."){r++;continue}if(r>0){r--;continue}h.push(d[M])}const y=g.length-r;let A;return y<=0?A=Re(h).join("/"):A=g.slice(0,y).join("/")+"/"+Re(h).join("/"),A.indexOf("/")!==0&&(A="/"+A),i&&A.lastIndexOf("/")!==A.length-1&&(A+=i),A}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const vg=ut.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Wd="data-mce-type";let zv=0;const Uv=(e,n,o,r,i)=>{var c,d,g,h;const y=n.validate,A=o.getSpecialElements();e.nodeType===uh&&!n.allow_conditional_comments&&/^\[if/i.test((c=e.nodeValue)!==null&&c!==void 0?c:"")&&(e.nodeValue=" "+e.nodeValue);const M=(d=i==null?void 0:i.tagName)!==null&&d!==void 0?d:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){Ce(i)&&(i.allowedTags[M]=!0);return}if(e.nodeType!==ca||M==="body")return;const R=ne.fromDom(e),_=vf(R,Wd),Z=ks(R,"data-mce-bogus");if(!_&&ee(Z)){Z==="all"?b(R):k(R);return}const V=o.getElementRule(M);if(y&&!V){nn(A,M)?b(R):k(R);return}else Ce(i)&&(i.allowedTags[M]=!0);if(y&&V&&!_){if(ke((g=V.attributesForced)!==null&&g!==void 0?g:[],G=>{fr(R,G.name,G.value==="{$uid}"?`mce_${zv++}`:G.value)}),ke((h=V.attributesDefault)!==null&&h!==void 0?h:[],G=>{vf(R,G.name)||fr(R,G.name,G.value==="{$uid}"?`mce_${zv++}`:G.value)}),V.attributesRequired&&!to(V.attributesRequired,G=>vf(R,G))){k(R);return}if(V.removeEmptyAttrs&&gb(R)){k(R);return}V.outputName&&V.outputName!==M&&mt(R,V.outputName)}},bg=(e,n,o,r,i)=>{const c=e.tagName.toLowerCase(),{attrName:d,attrValue:g}=i;i.keepAttr=zf(n,o,r,c,d,g),i.keepAttr?(i.allowedAttributes[d]=!0,Wv(d,o)&&(i.attrValue=d),n.allow_svg_data_urls&&Ps(g,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):Zv(e,d)&&(i.forceKeepAttr=!0)},zf=(e,n,o,r,i,c)=>o!=="html"&&!Sf(r)?!0:!(i in vg&&KM(e,c,r))&&(!e.validate||n.isValid(r,i)||Ps(i,"data-")||Ps(i,"aria-")),Zv=(e,n)=>e.hasAttribute(Wd)&&(n==="id"||n==="class"||n==="style"),Wv=(e,n)=>e in n.getBoolAttrs(),YM=(e,n,o,r)=>{const{attributes:i}=e;for(let c=i.length-1;c>=0;c--){const d=i[c],g=d.name,h=d.value;!zf(n,o,r,e.tagName.toLowerCase(),g,h)&&!Zv(e,g)?e.removeAttribute(g):Wv(g,o)&&e.setAttribute(g,g)}},c4=(e,n,o)=>{const r=i4();return r.addHook("uponSanitizeElement",(i,c)=>{Uv(i,e,n,o.track(i),c)}),r.addHook("uponSanitizeAttribute",(i,c)=>{bg(i,e,n,o.current(),c)}),r},u4=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},XM=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};i4().sanitize(e,o)},JM=(e,n)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=i4(),i=n.allow_mathml_annotation_encodings,c=Ke(i)&&i.length>0,d=h=>{const y=h.getAttribute("encoding");return c&&ee(y)&&_t(i,y)},g=(h,y)=>c&&y==="semantics"?N.some(!0):y==="annotation"?N.some(Bt(h)&&d(h)):Ke(n.extended_mathml_elements)&&n.extended_mathml_elements.includes(y)?N.from(!0):N.none();r.addHook("uponSanitizeElement",(h,y)=>{var A;const M=(A=y.tagName)!==null&&A!==void 0?A:h.nodeName.toLowerCase();g(h,M).each(_=>{y.allowedTags[M]=_,!_&&n.sanitize&&Bt(h)&&h.remove()})}),r.addHook("uponSanitizeAttribute",(h,y)=>{Ke(n.extended_mathml_attributes)&&n.extended_mathml_attributes.includes(y.attrName)&&(y.forceKeepAttr=!0)}),r.sanitize(e,o)},mp=e=>n=>{const o=d7(n);if(o==="svg")XM(n);else if(o==="math")JM(n,e);else throw new Error("Not a namespace element")},QM=(e,n)=>{const o=f7();if(e.sanitize){const r=c4(e,n,o);return{sanitizeHtmlElement:(c,d)=>{r.sanitize(c,u4(e,d)),r.removed=[],o.reset()},sanitizeNamespaceElement:mp(e)}}else return{sanitizeHtmlElement:(c,d)=>{const g=document.createNodeIterator(c,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let h;for(;h=g.nextNode();){const y=o.track(h);Uv(h,e,n,y),Bt(h)&&YM(h,e,n,y)}o.reset()},sanitizeNamespaceElement:et}},d4=ut.makeMap,f4=ut.extend,jv=(e,n,o,r)=>{const i=e.name,c=i in o&&i!=="title"&&i!=="textarea"&&i!=="noscript",d=n.childNodes;for(let g=0,h=d.length;g<h;g++){const y=d[g],A=new Ka(y.nodeName.toLowerCase(),y.nodeType);if(Bt(y)){const M=y.attributes;for(let R=0,_=M.length;R<_;R++){const Z=M[R];A.attr(Z.name,Z.value)}Sf(A.name)&&(r(y),A.value=y.innerHTML)}else at(y)?(A.value=y.data,c&&(A.raw=!0)):(Fu(y)||WK(y)||js(y))&&(A.value=y.data);Sf(A.name)||jv(A,y,o,r),e.append(A)}},qM=(e,n,o)=>{const r=[];for(let i=e,c=i;i;c=i,i=i.walk()){const d=i;ke(n,g=>g(d)),dt(d.parent)&&d!==e?i=c:r.push(d)}for(let i=r.length-1;i>=0;i--){const c=r[i];ke(o,d=>d(c))}},e6=(e,n,o,r)=>{const i=o.validate,c=n.getNonEmptyElements(),d=n.getWhitespaceElements(),g=f4(d4("script,style,head,html,body,title,meta,param"),n.getBlockElements()),h=$b(n),y=/[ \t\r\n]+/g,A=/^[ \t\r\n]+/,M=/[ \t\r\n]+$/,R=ue=>{let ge=ue.parent;for(;Ce(ge);){if(ge.name in d)return!0;ge=ge.parent}return!1},_=ue=>{let ge=ue;for(;Ce(ge);){if(ge.name in h)return ip(n,c,d,ge);ge=ge.parent}return!1},Z=ue=>ue.name in g||Rm(n,ue)||Sf(ue.name)&&ue.parent===e,V=(ue,ge)=>{const Se=ge?ue.prev:ue.next;return Ce(Se)||dt(ue.parent)?!1:Z(ue.parent)&&(ue.parent!==e||r.isRootContent===!0)};return[ue=>{var ge;if(ue.type===3&&!R(ue)){let Se=(ge=ue.value)!==null&&ge!==void 0?ge:"";Se=Se.replace(y," "),(x$(ue.prev,Z)||V(ue,!0))&&(Se=Se.replace(A,"")),Se.length===0||Se===" "&&ue.prev&&ue.prev.type===uh&&ue.next&&ue.next.type===uh?ue.remove():ue.value=Se}},ue=>{var ge;if(ue.type===1){const Se=n.getElementRule(ue.name);if(i&&Se){const Ue=ip(n,c,d,ue);Se.paddInEmptyBlock&&Ue&&_(ue)?zd(o,r,Z,ue):Se.removeEmpty&&Ue?Z(ue)?ue.remove():ue.unwrap():Se.paddEmpty&&(Ue||d2(ue))&&zd(o,r,Z,ue)}}else if(ue.type===3&&!R(ue)){let Se=(ge=ue.value)!==null&&ge!==void 0?ge:"";(ue.next&&Z(ue.next)||V(ue,!1))&&(Se=Se.replace(M,"")),Se.length===0?ue.remove():ue.value=Se}}]},t6=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},yg=(e={},n=ma())=>{const o=OM(),r=OM(),i={validate:!0,root_name:"body",sanitize:!0,...e},c=new DOMParser,d=QM(i,n),g=(ge,Se,Ue="html")=>{const tt=Ue==="xhtml"?"application/xhtml+xml":"text/html",At=nn(n.getSpecialElements(),Se.toLowerCase()),Ne=At?`<${Se}>${ge}</${Se}>`:ge,Ae=()=>Ue==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Ne}</body></html>`:/^[\s]*<head/i.test(ge)||/^[\s]*<html/i.test(ge)||/^[\s]*<!DOCTYPE/i.test(ge)?`<html>${Ne}</html>`:`<body>${Ne}</body>`,je=c.parseFromString(Ae(),tt).body;return d.sanitizeHtmlElement(je,tt),At?je.firstChild:je},h=o.addFilter,y=o.getFilters,A=o.removeFilter,M=r.addFilter,R=r.getFilters,_=r.removeFilter,Z=(ge,Se)=>{kE(n,ge)&&Se.push(ge)},V=(ge,Se)=>{const Ue=ee(Se.attr(Wd)),tt=Se.type===1&&!nn(ge,Se.name)&&!Rm(n,Se)&&!Sf(Se.name);return Se.type===3||tt&&!Ue},G=(ge,Se)=>{const Ue=f4(d4("script,style,head,html,body,title,meta,param"),n.getBlockElements()),tt=/^[ \t\r\n]+/,At=/[ \t\r\n]+$/;let Ne=ge.firstChild,Ae=null;const je=Et=>{var zt,Rn;Et&&(Ne=Et.firstChild,Ne&&Ne.type===3&&(Ne.value=(zt=Ne.value)===null||zt===void 0?void 0:zt.replace(tt,"")),Ne=Et.lastChild,Ne&&Ne.type===3&&(Ne.value=(Rn=Ne.value)===null||Rn===void 0?void 0:Rn.replace(At,"")))};if(n.isValidChild(ge.name,Se.toLowerCase())){for(;Ne;){const Et=Ne.next;V(Ue,Ne)?(Ae||(Ae=new Ka(Se,1),Ae.attr(i.forced_root_block_attrs),ge.insert(Ae,Ne)),Ae.append(Ne)):(je(Ae),Ae=null),Ne=Et}je(Ae)}},ue={schema:n,addAttributeFilter:M,getAttributeFilters:R,removeAttributeFilter:_,addNodeFilter:h,getNodeFilters:y,removeNodeFilter:A,parse:(ge,Se={})=>{var Ue;const tt=i.validate,At=(Ue=Se.context)!==null&&Ue!==void 0?Ue:i.root_name,Ne=g(ge,At,Se.format);$u(n,Ne);const Ae=new Ka(At,11);jv(Ae,Ne,n.getSpecialElements(),d.sanitizeNamespaceElement),Ne.innerHTML="";const[je,Et]=e6(Ae,n,i,Se),zt=[],Rn=tt?cs=>Z(cs,zt):et,Nn={nodes:{},attributes:{}},co=cs=>U5(y(),R(),cs,Nn);if(qM(Ae,[je,co],[Et,Rn]),zt.reverse(),tt&&zt.length>0)if(Se.context){const{pass:cs,fail:lr}=Sr(zt,yr=>yr.parent===Ae);OE(lr,n,Ae,co),Se.invalid=cs.length>0}else OE(zt,n,Ae,co);const So=t6(i,Se);return So&&(Ae.name==="body"||Se.isRootContent)&&G(Ae,So),Se.invalid||ap(Nn,Se),Ae}};return TH(ue,i),bH(ue,i,n),ue},jd=e=>g2(e)?Vd({validate:!1}).serialize(e):e,Gd=(e,n,o)=>{const r=jd(e),i=n(r);if(i.isDefaultPrevented())return i;if(g2(e))if(i.content!==r){const c=yg({validate:!1,forced_root_block:!1,...o}).parse(i.content,{context:e.name});return{...i,content:c}}else return{...i,content:e};else return i},Vl=e=>({sanitize:tv(e),sandbox_iframes:lw(e),sandbox_iframes_exclusions:yy(e)}),n6=(e,n)=>{if(n.no_events)return wr.value(n);{const o=eu(e,n);return o.isDefaultPrevented()?wr.error(ew(e,{content:"",...o}).content):wr.value(o)}},o6=(e,n,o)=>o.no_events?n:Gd(n,i=>ew(e,{...o,content:i}),Vl(e)).content,m4=(e,n)=>{if(n.no_events)return wr.value(n);{const o=Gd(n.content,r=>Vh(e,{...n,content:r}),Vl(e));return o.isDefaultPrevented()?($o(e,o),wr.error(void 0)):wr.value(o)}},g4=(e,n,o)=>{o.no_events||$o(e,{...o,content:n})},h4=(e,n,o)=>({element:e,width:n,rows:o}),s6=(e,n)=>({element:e,cells:n}),zH=(e,n)=>({x:e,y:n}),r6=(e,n)=>Aa(e,n).bind(Ci).getOr(1),UH=(e,n,o,r,i)=>{const c=r6(i,"rowspan"),d=r6(i,"colspan"),g=e.rows;for(let h=o;h<o+c;h++){g[h]||(g[h]=s6(ae(r),[]));for(let y=n;y<n+d;y++){const A=g[h].cells;A[y]=h===o&&y===n?i:Y(i)}}},ZH=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},WH=(e,n,o)=>{for(;ZH(e,n,o);)n++;return n},a6=e=>Ko(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),M2=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const i=o[r].cells;for(let c=0;c<i.length;c++)if(Un(i[c],n))return N.some(zH(c,r))}return N.none()},R2=(e,n,o,r,i)=>{const c=[],d=e.rows;for(let g=o;g<=i;g++){const h=d[g].cells,y=n<r?h.slice(n,r+1):h.slice(r,n+1);c.push(s6(d[g].element,y))}return c},i6=(e,n,o)=>{const r=n.x,i=n.y,c=o.x,d=o.y,g=i<d?R2(e,r,i,c,d):R2(e,r,d,c,i);return h4(e.element,a6(g),g)},jH=(e,n)=>{const o=Y(e.element),r=ne.fromTag("tbody");return Pu(r,n),Fs(o,r),o},GH=e=>Ot(e.rows,n=>{const o=Ot(n.cells,i=>{const c=ae(i);return tr(c,"colspan"),tr(c,"rowspan"),c}),r=Y(n.element);return Pu(r,o),r}),l6=e=>{const n=h4(Y(e),0,[]);return ke(Xo(e,"tr"),(o,r)=>{ke(Xo(o,"td,th"),(i,c)=>{UH(n,WH(n,c,r),r,o,i)})}),h4(n.element,a6(n.rows),n.rows)},c6=e=>jH(e,GH(e)),p4=(e,n,o)=>M2(e,n).bind(r=>M2(e,o).map(i=>i6(e,r,i))),u6=e=>No(e,n=>ao(n)==="ul"||ao(n)==="ol"),d6=(e,n)=>No(e,o=>ao(o)==="li"&&kw(o,n)).fold(Ye([]),o=>u6(e).map(r=>{const i=ne.fromTag(ao(r)),c=bi(YS(r),(d,g)=>Ps(g,"list-style"));return pb(i,c),[ne.fromTag("li"),i]}).getOr([])),v4=(e,n)=>{const o=Ko(n,(r,i)=>(Fs(i,r),i),e);return n.length>0?ex([o]):o},KH=e=>Od(e)?cc(e).filter(Ih).fold(Ye([]),n=>[e,n]):Ih(e)?[e]:[],YH=(e,n,o)=>{const r=ne.fromDom(n.commonAncestorContainer),i=Ku(r,e),c=Ht(i,h=>o.isWrapper(ao(h))),d=d6(i,n),g=c.concat(d.length?d:KH(r));return Ot(g,Y)},su=()=>ex([]),Pc=(e,n,o)=>v4(ne.fromDom(n.cloneContents()),YH(e,n,o)),P2=(e,n)=>w1(n,"table",ht(Un,e)),f6=(e,n)=>P2(e,n[0]).bind(o=>{const r=n[0],i=n[n.length-1],c=l6(o);return p4(c,r,i).map(d=>ex([c6(d)]))}).getOrThunk(su),N2=(e,n,o)=>n.length>0&&n[0].collapsed?su():Pc(e,n[0],o),m6=(e,n,o)=>{const r=lD(n,e);return r.length>0?f6(e,r):N2(e,n,o)},Gv=(e,n)=>n>=0&&n<e.length&&Ym(e.charAt(n)),b4=e=>Oi(e.innerText),g6=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),h6=e=>N.from(e.selection.getRng()).map(n=>{var o;const r=N.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),i=e.getBody(),c=g6(r),d=ne.fromDom(n.cloneContents());GD(d),nE(d);const g=e.dom.add(i,c,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},d.dom),h=b4(g),y=Oi((o=g.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(g),Gv(y,0)||Gv(y,y.length-1)){const A=r.getOr(i),M=b4(A),R=M.indexOf(h);if(R===-1)return h;{const _=Gv(M,R-1),Z=Gv(M,R+h.length);return(_?" ":"")+h+(Z?" ":"")}}else return h}).getOr(""),p6=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),i=e.selection.getSel(),c=$l(e,My(i)),d=n.contextual?m6(ne.fromDom(e.getBody()),c,e.schema).dom:o.cloneContents();return d&&r.appendChild(d),e.selection.serializer.serialize(r,n)},I2=(e,n)=>{if(n.format==="text")return h6(e);{const o=p6(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},y4=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),XH=(e,n,o={})=>{const r=y4(o,n);return n6(e,r).fold(Xn,i=>{const c=I2(e,i);return o6(e,c,i)})},C4=0,v6=1,b6=2,y6=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),i=new Array(o),c=(A,M,R)=>({start:A,end:M,diag:R}),d=(A,M,R,_,Z)=>{const V=h(A,M,R,_);if(V===null||V.start===M&&V.diag===M-_||V.end===A&&V.diag===A-R){let G=A,oe=R;for(;G<M||oe<_;)G<M&&oe<_&&e[G]===n[oe]?(Z.push([C4,e[G]]),++G,++oe):M-A>_-R?(Z.push([b6,e[G]]),++G):(Z.push([v6,n[oe]]),++oe)}else{d(A,V.start,R,V.start-V.diag,Z);for(let G=V.start;G<V.end;++G)Z.push([C4,e[G]]);d(V.end,M,V.end-V.diag,_,Z)}},g=(A,M,R,_)=>{let Z=A;for(;Z-M<_&&Z<R&&e[Z]===n[Z-M];)++Z;return c(A,Z,M)},h=(A,M,R,_)=>{const Z=M-A,V=_-R;if(Z===0||V===0)return null;const G=Z-V,oe=V+Z,ue=(oe%2===0?oe:oe+1)/2;r[1+ue]=A,i[1+ue]=M+1;let ge,Se,Ue,tt,At;for(ge=0;ge<=ue;++ge){for(Se=-ge;Se<=ge;Se+=2){for(Ue=Se+ue,Se===-ge||Se!==ge&&r[Ue-1]<r[Ue+1]?r[Ue]=r[Ue+1]:r[Ue]=r[Ue-1]+1,tt=r[Ue],At=tt-A+R-Se;tt<M&&At<_&&e[tt]===n[At];)r[Ue]=++tt,++At;if(G%2!==0&&G-ge<=Se&&Se<=G+ge&&i[Ue-G]<=r[Ue])return g(i[Ue-G],Se+A-R,M,_)}for(Se=G-ge;Se<=G+ge;Se+=2){for(Ue=Se+ue-G,Se===G-ge||Se!==G+ge&&i[Ue+1]<=i[Ue-1]?i[Ue]=i[Ue+1]-1:i[Ue]=i[Ue-1],tt=i[Ue]-1,At=tt-A+R-Se;tt>=A&&At>=R&&e[tt]===n[At];)i[Ue]=tt--,At--;if(G%2===0&&-ge<=Se&&Se<=ge&&i[Ue]<=r[Ue+G])return g(i[Ue],Se+A-R,M,_)}}return null},y=[];return d(0,e.length,0,n.length,y),y},C6=e=>Bt(e)?e.outerHTML:at(e)?_o.encodeRaw(e.data,!1):Fu(e)?"<!--"+e.data+"-->":"",JH=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},S4=(e,n,o)=>{const r=JH(n);if(e.hasChildNodes()&&o<e.childNodes.length){const i=e.childNodes[o];e.insertBefore(r,i)}else e.appendChild(r)},QH=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},qH=(e,n)=>{let o=0;ke(e,r=>{r[0]===C4?o++:r[0]===v6?(S4(n,r[1],o),o++):r[0]===b6&&QH(n,o)})},e9=(e,n)=>Ht(Ot(Vn(e.childNodes),x(Oi,C6)),o=>o.length>0),t9=(e,n)=>{const o=Ot(Vn(n.childNodes),C6);return qH(y6(o,e),n),n},n9=Vo(()=>document.implementation.createHTMLDocument("undo")),o9=e=>e.querySelector("iframe")!==null,s9=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),B2=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),gp=e=>{const n=e.serializer.getTempAttrs(),o=b_(e.getBody(),n);return o9(o)?s9(e9(o)):B2(Oi(o.innerHTML))},x4=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?t9(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Ce(r)&&nD(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},w4=e=>e.type==="fragmented"?e.fragments.join(""):e.content,S6=e=>{const n=ne.fromTag("body",n9());return zn(n,w4(e)),ke(Xo(n,"*[data-mce-bogus]"),k),Xt(n)},r9=(e,n)=>w4(e)===w4(n),x6=(e,n)=>S6(e)===S6(n),E4=(e,n)=>!e||!n?!1:r9(e,n)?!0:x6(e,n),T4=e=>e.get()===0,hp=(e,n,o)=>{T4(o)&&(e.typing=n)},w6=(e,n)=>{e.typing&&(hp(e,!1,n),e.add())},a9=e=>{e.typing&&(e.typing=!1,e.add())},i9=(e,n,o)=>{T4(n)&&o.set(Pf(e.selection))},l9=(e,n,o,r,i,c,d)=>{const g=gp(e),h=ut.extend(c||{},g);if(!T4(r)||e.removed)return null;const y=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:h,lastLevel:y,originalEvent:d}).isDefaultPrevented()||y&&E4(y,h))return null;n.data[o.get()]&&i.get().each(R=>{n.data[o.get()].beforeBookmark=R});const A=bk(e);if(A&&n.data.length>A){for(let R=0;R<n.data.length-1;R++)n.data[R]=n.data[R+1];n.data.length--,o.set(n.data.length)}h.bookmark=Pf(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(h),o.set(n.data.length-1);const M={level:h,lastLevel:y,originalEvent:d};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",M),e.dispatch("change",M)):e.dispatch("AddUndo",M),h},c9=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},u9=(e,n,o,r,i)=>{if(n.transact(r)){const c=n.data[o.get()].bookmark,d=n.data[o.get()-1];x4(e,d,!0),n.transact(i)&&(n.data[o.get()-1].beforeBookmark=c)}},d9=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],x4(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},L2=(e,n,o,r)=>{let i;return n.typing&&(n.add(),n.typing=!1,hp(n,!1,o)),r.get()>0&&(r.set(r.get()-1),i=n.data[r.get()],x4(e,i,!0),e.setDirty(!0),e.dispatch("Undo",{level:i})),i},F2=e=>{e.clear(),e.add()},f9=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!E4(gp(e),n.data[0]),m9=(e,n)=>n.get()<e.data.length-1&&!e.typing,_2=(e,n,o)=>(w6(e,n),e.beforeChange(),e.ignore(o),e.add()),g9=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},h9=(e,n)=>{const o=e.dom,r=Ce(n)?n:e.getBody();ke(o.select("table,a",r),i=>{switch(i.nodeName){case"TABLE":const c=DL(e),d=o.getAttrib(i,"border");(!d||d==="0")&&e.hasVisual?o.addClass(i,c):o.removeClass(i,c);break;case"A":if(!o.getAttrib(i,"href")){const g=o.getAttrib(i,"name")||i.id,h=xk(e);g&&e.hasVisual?o.addClass(i,h):o.removeClass(i,h)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},E6=e=>({init:{bindEvents:et},undoManager:{beforeChange:(n,o)=>i9(e,n,o),add:(n,o,r,i,c,d)=>l9(e,n,o,r,i,c,d),undo:(n,o,r)=>L2(e,n,o,r),redo:(n,o)=>d9(e,n,o),clear:(n,o)=>c9(e,n,o),reset:n=>F2(n),hasUndo:(n,o)=>f9(e,n,o),hasRedo:(n,o)=>m9(n,o),transact:(n,o,r)=>_2(n,o,r),ignore:(n,o)=>g9(n,o),extra:(n,o,r,i)=>u9(e,n,o,r,i)},formatter:{match:(n,o,r,i)=>IE(e,n,o,r,i),matchAll:(n,o)=>MY(e,n,o),matchNode:(n,o,r,i)=>Ud(e,n,o,r,i),canApply:n=>G$(e,n),closest:n=>j$(e,n),apply:(n,o,r)=>Qu(e,n,o,r),remove:(n,o,r,i)=>pM(e,n,o,r,i),toggle:(n,o,r)=>pH(e,n,o,r),formatChanged:(n,o,r,i,c)=>hH(e,n,o,r,i,c)},editor:{getContent:n=>cY(e,n),setContent:(n,o)=>Rv(e,n,o),insertContent:(n,o)=>J5(e,n,o),addVisual:n=>h9(e,n)},selection:{getContent:(n,o)=>XH(e,n,o)},autocompleter:{addDecoration:et,removeDecoration:et},raw:{getModel:()=>N.none()}}),p9=e=>{const n=y=>we(y)?y:{},{init:o,undoManager:r,formatter:i,editor:c,selection:d,autocompleter:g,raw:h}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(y,A,M)=>r.transact(M),ignore:(y,A)=>r.ignore(A),extra:(y,A,M,R)=>r.extra(M,R)},formatter:{match:(y,A,M,R)=>i.match(y,n(A),R),matchAll:i.matchAll,matchNode:i.matchNode,canApply:y=>i.canApply(y),closest:y=>i.closest(y),apply:(y,A,M)=>i.apply(y,n(A)),remove:(y,A,M,R)=>i.remove(y,n(A)),toggle:(y,A,M)=>i.toggle(y,n(A)),formatChanged:(y,A,M,R,_)=>i.formatChanged(A,M,R,_)},editor:{getContent:y=>c.getContent(y),setContent:(y,A)=>({content:c.setContent(y,A),html:""}),insertContent:(y,A)=>(c.insertContent(y),""),addVisual:c.addVisual},selection:{getContent:(y,A)=>d.getContent(A)},autocompleter:{addDecoration:g.addDecoration,removeDecoration:g.removeDecoration},raw:{getModel:()=>N.some(h.getRawModel())}}},v9=()=>{const e=Ye(null),n=Ye("");return{init:{bindEvents:et},undoManager:{beforeChange:et,add:e,undo:e,redo:e,clear:et,reset:et,hasUndo:Ie,hasRedo:Ie,transact:e,ignore:et,extra:et},formatter:{match:Ie,matchAll:Ye([]),matchNode:Ye(void 0),canApply:Ie,closest:n,apply:et,remove:et,toggle:et,formatChanged:Ye({unbind:et})},editor:{getContent:n,setContent:Ye({content:"",html:""}),insertContent:Ye(""),addVisual:et},selection:{getContent:n},autocompleter:{addDecoration:et,removeDecoration:et},raw:{getModel:Ye(N.none())}}},td=e=>nn(e.plugins,"rtc"),b9=e=>Fo(e.plugins,"rtc").bind(n=>N.from(n.setup)),y9=e=>{const n=e;return b9(e).fold(()=>(n.rtcInstance=E6(e),N.none()),o=>(n.rtcInstance=v9(),N.some(()=>o().then(r=>(n.rtcInstance=p9(r),r.rtc.isRemote)))))},A4=e=>e.rtcInstance?e.rtcInstance:E6(e),br=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},C9=(e,n,o)=>{br(e).undoManager.beforeChange(n,o)},LY=(e,n,o,r,i,c,d)=>br(e).undoManager.add(n,o,r,i,c,d),Nc=(e,n,o,r)=>br(e).undoManager.undo(n,o,r),T6=(e,n,o)=>br(e).undoManager.redo(n,o),S9=(e,n,o)=>{br(e).undoManager.clear(n,o)},A6=(e,n)=>{br(e).undoManager.reset(n)},x9=(e,n,o)=>br(e).undoManager.hasUndo(n,o),w9=(e,n,o)=>br(e).undoManager.hasRedo(n,o),FY=(e,n,o,r)=>br(e).undoManager.transact(n,o,r),ba=(e,n,o)=>{br(e).undoManager.ignore(n,o)},E9=(e,n,o,r,i)=>{br(e).undoManager.extra(n,o,r,i)},T9=(e,n,o,r,i)=>br(e).formatter.match(n,o,r,i),A9=(e,n,o)=>br(e).formatter.matchAll(n,o),O9=(e,n,o,r,i)=>br(e).formatter.matchNode(n,o,r,i),k9=(e,n)=>br(e).formatter.canApply(n),$2=(e,n)=>br(e).formatter.closest(n),D9=(e,n,o,r)=>{br(e).formatter.apply(n,o,r)},O4=(e,n,o,r,i)=>{br(e).formatter.remove(n,o,r,i)},O6=(e,n,o,r)=>{br(e).formatter.toggle(n,o,r)},H2=(e,n,o,r,i,c)=>br(e).formatter.formatChanged(n,o,r,i,c),M9=(e,n)=>A4(e).editor.getContent(n),R9=(e,n,o)=>A4(e).editor.setContent(n,o),P9=(e,n,o)=>A4(e).editor.insertContent(n,o),N9=(e,n,o)=>br(e).selection.getContent(n,o),I9=(e,n)=>br(e).editor.addVisual(n),k4=e=>br(e).init.bindEvents(),B9=(e,n={})=>{const o=n.format?n.format:"html";return N9(e,o,n)},D4=e=>e.dom.length===0?(b(e),N.none()):N.some(e),k6=(e,n)=>e.filter(o=>mv.isBookmarkNode(o.dom)).bind(n?Du:ku),L9=(e,n,o,r,i)=>{const c=e.dom,d=n.dom,g=r?c.length:d.length;r?(pE(c,d,i,!1,!r),o.setStart(d,g)):(pE(d,c,i,!1,!r),o.setEnd(d,g))},F9=(e,n,o)=>{cc(e).each(r=>{const i=e.dom;n&&Sv(r,Be(i,0),o)?t2(i,0,o):!n&&xv(r,Be(i,i.length),o)&&hE(i,i.length,o)})},D6=(e,n,o,r,i)=>{e.bind(c=>((r?hE:t2)(c.dom,r?c.dom.length:0,i),n.filter(Ea).map(g=>L9(c,g,o,r,i)))).orThunk(()=>k6(n,r).or(n).filter(Ea).map(d=>F9(d,r,i)))},_9=(e,n,o)=>{const r=N.from(n.firstChild).map(ne.fromDom),i=N.from(n.lastChild).map(ne.fromDom);e.deleteContents(),e.insertNode(n);const c=r.bind(ku).filter(Ea).bind(D4),d=i.bind(Du).filter(Ea).bind(D4);D6(c,r,e,!0,o),D6(d,i,e,!1,o),e.collapse(!1)},$9=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),V2=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),i=r?{context:r.nodeName.toLowerCase()}:{},c=e.parser.parse(n.content,{forced_root_block:!1,...i,...n});return Vd({validate:!1},e.schema).serialize(c)}else return n.content},M6=(e,n,o={})=>{const r=$9(o,n);m4(e,r).each(i=>{const c=V2(e,i),d=e.selection.getRng();_9(d,d.createContextualFragment(c),e.schema),e.selection.setRng(d),ng(e,d),g4(e,c,i)})},M4=(e,n,o)=>{if(nn(e,n)){const r=Ht(e[n],i=>i!==o);r.length===0?delete e[n]:e[n]=r}};var H9=(e,n)=>{let o,r;const i=(g,h)=>No(h,y=>e.is(y,g)),c=g=>e.getParents(g,void 0,e.getRoot()),d=()=>{o={},r={},n.on("NodeChange",g=>{const h=g.element,y=c(h),A={};$e(o,(M,R)=>{i(R,y).each(_=>{r[R]||(ke(M,Z=>{Z(!0,{node:_,selector:R,parents:y})}),r[R]=M),A[R]=M})}),$e(r,(M,R)=>{A[R]||(delete r[R],ke(M,_=>{_(!1,{node:h,selector:R,parents:y})}))})})};return{selectorChangedWithUnbind:(g,h)=>(o||d(),o[g]||(o[g]=[]),o[g].push(h),i(g,c(n.selection.getStart())).each(()=>{r[g]=o[g]}),{unbind:()=>{M4(o,g,h),M4(r,g,h)}})}};const R4=e=>!!(e&&e.ownerDocument)&&El(ne.fromDom(e.ownerDocument),ne.fromDom(e)),V9=e=>e?R4(e.startContainer)&&R4(e.endContainer):!1,R6=(e,n,o,r)=>{let i,c;const{selectorChangedWithUnbind:d}=H9(e,r),g=(pt,Vt)=>{const ro=e.createRng();Ce(pt)&&Ce(Vt)?(ro.setStart(pt,Vt),ro.setEnd(pt,Vt),Se(ro),oe(!1)):(Dw(e,ro,r.getBody(),!0),Se(ro))},h=pt=>B9(r,pt),y=(pt,Vt)=>M6(r,pt,Vt),A=pt=>_D(r.getBody(),ge(),pt),M=pt=>$D(r.getBody(),ge(),pt),R=(pt,Vt)=>lr.getBookmark(pt,Vt),_=pt=>lr.moveToBookmark(pt),Z=(pt,Vt)=>(iY(e,pt,Vt).each(Se),pt),V=()=>{const pt=ge(),Vt=ue();return!pt||pt.item?!1:pt.compareEndPoints?pt.compareEndPoints("StartToEnd",pt)===0:!Vt||pt.collapsed},G=()=>{if(r.mode.isReadOnly())return!1;const pt=ge(),Vt=r.getBody().querySelectorAll('[data-mce-selected="1"]');return Vt.length>0?xn(Vt,ro=>e.isEditable(ro.parentElement)):FD(e,pt)},oe=pt=>{const Vt=ge();Vt.collapse(!!pt),Se(Vt)},ue=()=>n.getSelection?n.getSelection():n.document.selection,ge=()=>{let pt;const Vt=(uo,He,nt)=>{try{return He.compareBoundaryPoints(uo,nt)}catch{return-1}},ro=n.document;if(Ce(r.bookmark)&&!qm(r)){const uo=zw(r);if(uo.isSome())return uo.map(He=>$l(r,[He])[0]).getOr(ro.createRange())}try{const uo=ue();uo&&!Th(uo.anchorNode)&&(uo.rangeCount>0?pt=uo.getRangeAt(0):pt=ro.createRange(),pt=$l(r,[pt])[0])}catch{}if(pt||(pt=ro.createRange()),k1(pt.startContainer)&&pt.collapsed){const uo=e.getRoot();pt.setStart(uo,0),pt.setEnd(uo,0)}return i&&c&&(Vt(pt.START_TO_START,pt,i)===0&&Vt(pt.END_TO_END,pt,i)===0?pt=c:(i=null,c=null)),pt},Se=(pt,Vt)=>{if(!V9(pt))return;const ro=ue();if(pt=r.dispatch("SetSelectionRange",{range:pt,forward:Vt}).range,ro){c=pt;try{ro.removeAllRanges(),ro.addRange(pt)}catch{}Vt===!1&&ro.extend&&(ro.collapse(pt.endContainer,pt.endOffset),ro.extend(pt.startContainer,pt.startOffset)),i=ro.rangeCount>0?ro.getRangeAt(0):null}if(!pt.collapsed&&pt.startContainer===pt.endContainer&&(ro!=null&&ro.setBaseAndExtent)&&pt.endOffset-pt.startOffset<2&&pt.startContainer.hasChildNodes()){const He=pt.startContainer.childNodes[pt.startOffset];He&&He.nodeName==="IMG"&&(ro.setBaseAndExtent(pt.startContainer,pt.startOffset,pt.endContainer,pt.endOffset),(ro.anchorNode!==pt.startContainer||ro.focusNode!==pt.endContainer)&&ro.setBaseAndExtent(He,0,He,1))}r.dispatch("AfterSetSelectionRange",{range:pt,forward:Vt})},Ue=pt=>(y(e.getOuterHTML(pt)),pt),tt=()=>ol(r.getBody(),ge()),At=(pt,Vt)=>Ra(e,ge(),pt,Vt),Ne=()=>{const pt=ue(),Vt=pt==null?void 0:pt.anchorNode,ro=pt==null?void 0:pt.focusNode;if(!pt||!Vt||!ro||Th(Vt)||Th(ro))return!0;const uo=e.createRng(),He=e.createRng();try{uo.setStart(Vt,pt.anchorOffset),uo.collapse(!0),He.setStart(ro,pt.focusOffset),He.collapse(!0)}catch{return!0}return uo.compareBoundaryPoints(uo.START_TO_START,He)<=0},cs={dom:e,win:n,serializer:o,editor:r,expand:(pt={type:"word"})=>Se(nl(e).expand(ge(),pt)),collapse:oe,setCursorLocation:g,getContent:h,setContent:y,getBookmark:R,moveToBookmark:_,select:Z,isCollapsed:V,isEditable:G,isForward:Ne,setNode:Ue,getNode:tt,getSel:ue,setRng:Se,getRng:ge,getStart:A,getEnd:M,getSelectedBlocks:At,normalize:()=>{const pt=ge(),Vt=ue();if(!Ow(Vt)&&Py(r)){const ro=jy(e,pt);return ro.each(uo=>{Se(uo,Ne())}),ro.getOr(pt)}return pt},selectorChanged:(pt,Vt)=>(d(pt,Vt),cs),selectorChangedWithUnbind:d,getScrollContainer:()=>{let pt,Vt=e.getRoot();for(;Vt&&Vt.nodeName!=="BODY";){if(Vt.scrollHeight>Vt.clientHeight){pt=Vt;break}Vt=Vt.parentNode}return pt},scrollIntoView:(pt,Vt)=>{Ce(pt)?m_(r,pt,Vt):ng(r,ge(),Vt)},placeCaretAt:(pt,Vt)=>Se(Qo(pt,Vt,r.getDoc())),getBoundingClientRect:()=>{const pt=ge();return pt.collapsed?Be.fromRangeStart(pt).getClientRects()[0]:pt.getBoundingClientRect()},destroy:()=>{n=i=c=null,yr.destroy()}},lr=mv(cs),yr=kD(cs,r);return cs.bookmarkManager=lr,cs.controlSelection=yr,cs},z9=(e,n,o)=>{n.addNodeFilter("br",(r,i,c)=>{const d=ut.extend({},o.getBlockElements()),g=o.getNonEmptyElements(),h=o.getWhitespaceElements();d.body=1;const y=A=>A.name in d||Rm(o,A);for(let A=0,M=r.length;A<M;A++){let R=r[A],_=R.parent;if(_&&y(_)&&R===_.lastChild){let Z=R.prev;for(;Z;){const V=Z.name;if(V!=="span"||Z.attr("data-mce-type")!=="bookmark"){V==="br"&&(R=null);break}Z=Z.prev}if(R&&(R.remove(),ip(o,g,h,_))){const V=o.getElementRule(_.name);V&&(V.removeEmpty?_.remove():V.paddEmpty&&zd(e,c,y,_))}}else{let Z=R;for(;_&&_.firstChild===Z&&_.lastChild===Z&&(Z=_,!d[_.name]);)_=_.parent;if(Z===_){const V=new Ka("#text",3);V.value=zo,R.replace(V)}}}})},P4=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,i)=>{let c=r.length;for(;c--;){const d=r[c];d.attr("tabindex",d.attr("data-mce-tabindex")),d.attr(i,null)}}),e.addAttributeFilter("src,href,style",(r,i)=>{const c="data-mce-"+i,d=n.url_converter,g=n.url_converter_scope;let h=r.length;for(;h--;){const y=r[h];let A=y.attr(c);A!==void 0?(y.attr(i,A.length>0?A:null),y.attr(c,null)):(A=y.attr(i),i==="style"?A=o.serializeStyle(o.parseStyle(A),y.name):d&&(A=d.call(g,A,i,y.name)),y.attr(i,A.length>0?A:null))}}),e.addAttributeFilter("class",r=>{let i=r.length;for(;i--;){const c=r[i];let d=c.attr("class");d&&(d=d.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),c.attr("class",d.length>0?d:null))}}),e.addAttributeFilter("data-mce-type",(r,i,c)=>{let d=r.length;for(;d--;){const g=r[d];g.attr("data-mce-type")==="bookmark"&&!c.cleanup&&(N.from(g.firstChild).exists(y=>{var A;return!Kb((A=y.value)!==null&&A!==void 0?A:"")})?g.unwrap():g.remove())}}),e.addNodeFilter("script,style",(r,i)=>{var c;const d=h=>h.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=r.length;for(;g--;){const h=r[g],y=h.firstChild,A=(c=y==null?void 0:y.value)!==null&&c!==void 0?c:"";if(i==="script"){const M=h.attr("type");M&&h.attr("type",M==="mce-no/type"?null:M.replace(/^mce\-/,"")),n.element_format==="xhtml"&&y&&A.length>0&&(y.value=`// <![CDATA[
`+d(A)+`
// ]]>`)}else n.element_format==="xhtml"&&y&&A.length>0&&(y.value=`<!--
`+d(A)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let i=r.length;for(;i--;){const c=r[i],d=c.value;n.preserve_cdata&&(d==null?void 0:d.indexOf("[CDATA["))===0?(c.name="#cdata",c.type=4,c.value=o.decode(d.replace(/^\[CDATA\[|\]\]$/g,""))):(d==null?void 0:d.indexOf("mce:protected "))===0&&(c.name="#text",c.type=3,c.raw=!0,c.value=unescape(d).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,i)=>{let c=r.length;for(;c--;){const d=r[c];d.type===7?d.remove():d.type===1&&i==="input"&&!d.attr("type")&&d.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{ke(r,i=>{i.attr("data-mce-type")==="format-caret"&&(i.isEmpty(e.schema.getNonEmptyElements())?i.remove():i.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,i)=>{let c=r.length;for(;c--;)r[c].attr(i,null)}),n.remove_trailing_brs&&z9(n,e,e.schema)},N4=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},U9=(e,n,o)=>{let r;const i=e.dom;let c=n.cloneNode(!0);const d=document.implementation;if(d.createHTMLDocument){const g=d.createHTMLDocument("");ut.each(c.nodeName==="BODY"?c.childNodes:[c],h=>{g.body.appendChild(g.importNode(h,!0))}),c.nodeName!=="BODY"?c=g.body.firstChild:c=g.body,r=i.doc,i.doc=g}return sk(e,{...o,node:c}),r&&(i.doc=r),c},I4=(e,n)=>Ce(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,Z9=(e,n,o)=>I4(e,o)?U9(e,n,o):n,W9=(e,n,o)=>{ut.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,i)=>{let c=r.length;for(;c--;)r[c].attr(i,null)}),n.push(o))},j9=(e,n,o)=>!n.no_events&&e?Jo(e,{...n,content:o}).content:o,G9=(e,n,o)=>{const r=Oi(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||Bh(ne.fromDom(n))?r:ut.trim(r)},K9=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,i=e.parse(n,r);return N4(i),i},Y9=(e,n,o)=>Vd(e,n).serialize(o),P6=(e,n,o,r,i)=>{const c=Y9(n,o,r);return j9(e,i,c)},X9=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},i=n&&n.dom?n.dom:Co.DOM,c=n&&n.schema?n.schema:ma(r),d=yg(r,c);P4(d,r,i);const g=(h,y={})=>{const A={format:"html",...y},M=Z9(n,h,A),R=G9(i,M,A),_=K9(d,R,A);return A.format==="tree"?_:P6(n,r,c,_,A)};return{schema:c,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,serialize:g,addRules:c.addValidElements,setRules:c.setValidElements,addTempAttr:ht(W9,d,o),getTempAttrs:Ye(o),getNodeFilters:d.getNodeFilters,getAttributeFilters:d.getAttributeFilters,removeNodeFilter:d.removeNodeFilter,removeAttributeFilter:d.removeAttributeFilter}},N6=(e,n)=>{const o=X9(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},J9="html",Q9=(e,n)=>({...e,format:n,get:!0,getInner:!0}),q9=(e,n={})=>{const o=n.format?n.format:J9,r=Q9(n,o);return n6(e,r).fold(Xn,i=>{const c=M9(e,i);return o6(e,c,i)})},eV="html",tV=(e,n)=>({format:eV,...e,set:!0,content:n}),Uf=(e,n,o={})=>{const r=tV(o,n);return m4(e,r).map(i=>{const c=R9(e,i.content,i);return g4(e,c.html,i),c.content}).getOr(n)},z2="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),I6=[],B6="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),L6=[{name:"export",replacedWith:"Export to PDF"}],F6=(e,n)=>{const o=Ht(n,r=>nn(e,r));return ot(o)},B4=e=>{const n=F6(e,z2),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),ot(n)},nV=e=>F6(e,I6),_6=(e,n)=>{const o=ut.makeMap(e.plugins," "),i=Ht(n,c=>nn(o,c));return ot(i)},oV=e=>_6(e,B6),sV=e=>_6(e,L6.map(n=>n.name)),rV=(e,n)=>{const o=B4(e),r=oV(n),i=r.length>0,c=o.length>0,d=n.theme==="mobile";if(i||c||d){const g=`
- `,h=d?`

Themes:${g}mobile`:"",y=i?`

Plugins:${g}${r.join(g)}`:"",A=c?`

Options:${g}${o.join(g)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+h+y+A)}},U2=e=>No(L6,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),Kv=(e,n)=>{const o=nV(e),r=sV(n),i=r.length>0,c=o.length>0;if(i||c){const d=`
- `,g=i?`

Plugins:${d}${r.map(U2).join(d)}`:"",h=c?`

Options:${d}${o.join(d)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+g+h)}},aV=(e,n)=>{rV(e,n),Kv(e,n)},Kd=Co.DOM,zl=e=>{Kd.setStyle(e.id,"display",e.orgDisplay)},Zf=e=>N.from(e).each(n=>n.destroy()),xo=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},Yv=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),Kd.unbind(n,"submit reset",e.formEventDelegate))},$6=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),i=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Ce(i==null?void 0:i.nextSibling)&&Kd.remove(i.nextSibling),rk(e),e.editorManager.remove(e),!e.inline&&r&&zl(e),Q7(e),Kd.remove(e.getContainer()),Zf(n),Zf(o),e.destroy()}},H6=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Zf(o),Zf(r)),Yv(e),xo(e),e.destroyed=!0}},pp=(()=>{const e={};return{add:(i,c)=>{e[i]=c},get:i=>e[i]?e[i]:{icons:{}},has:i=>nn(e,i)}})(),Wf=gr.ModelManager,Z2=(e,n)=>n.dom[e],W2=(e,n)=>parseInt(nr(n,e),10),j2=ht(Z2,"clientWidth"),F4=ht(Z2,"clientHeight"),V6=ht(W2,"margin-top"),z6=ht(W2,"margin-left"),U6=e=>e.dom.getBoundingClientRect(),Z6=(e,n,o)=>{const r=j2(e),i=F4(e);return n>=0&&o>=0&&n<=r&&o<=i},W6=(e,n,o,r)=>{const i=U6(n),c=e?i.left+n.dom.clientLeft+z6(n):0,d=e?i.top+n.dom.clientTop+V6(n):0,g=o-c,h=r-d;return{x:g,y:h}},vp=(e,n,o)=>{const r=ne.fromDom(e.getBody()),i=e.inline?r:gh(r),c=W6(e.inline,i,n,o);return Z6(i,c.x,c.y)},j6=e=>N.from(e).map(ne.fromDom),_4=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return j6(n).map(Xr).getOr(!1)};var iV=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const G6=e=>{const n=[],o=()=>{const R=e.theme;return R&&R.getNotificationManagerImpl?R.getNotificationManagerImpl():iV()},r=()=>N.from(n[0]),i=(R,_)=>R.type===_.type&&R.text===_.text&&!R.progressBar&&!R.timeout&&!_.progressBar&&!_.timeout,c=()=>{r().each(R=>{R.reposition()})},d=R=>{n.push(R)},g=R=>{bs(n,_=>_===R).each(_=>{n.splice(_,1)})},h=(R,_=!0)=>e.removed||!_4(e)?{}:(_&&e.dispatch("BeforeOpenNotification",{notification:R}),No(n,Z=>i(o().getArgs(Z),R)).getOrThunk(()=>{e.editorManager.setActive(e);const Z=o().open(R,()=>{g(Z)},()=>zy(e));return d(Z),c(),e.dispatch("OpenNotification",{notification:{...Z}}),Z})),y=()=>{r().each(R=>{o().close(R),g(R),c()})},A=Ye(n);return(R=>{R.on("SkinLoaded",()=>{const _=ow(R);_&&h({text:_,type:"warning",timeout:0},!1),c()}),R.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(c)}),R.on("remove",()=>{ke(n.slice(),_=>{o().close(_)})}),R.on("keydown",_=>{var Z;const V=((Z=_.key)===null||Z===void 0?void 0:Z.toLowerCase())==="f12"||_.keyCode===123;_.altKey&&V&&(_.preventDefault(),r().map(G=>ne.fromDom(G.getEl())).each(G=>ls(G)))})})(e),{open:h,close:y,getNotifications:A}},Cg=gr.PluginManager,jf=gr.ThemeManager;var K6=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const Xv=e=>{let n=[];const o=()=>{const V=e.theme;return V&&V.getWindowManagerImpl?V.getWindowManagerImpl():K6()},r=(V,G)=>(...oe)=>G?G.apply(V,oe):void 0,i=V=>{e.dispatch("OpenWindow",{dialog:V})},c=V=>{e.dispatch("CloseWindow",{dialog:V})},d=V=>{n.push(V),i(V)},g=V=>{c(V),n=Ht(n,G=>G!==V),n.length===0&&e.focus()},h=()=>N.from(n[n.length-1]),y=V=>{e.editorManager.setActive(e),Vw(e),e.ui.show();const G=V();return d(G),G},A=(V,G)=>y(()=>o().open(V,G,g)),M=V=>y(()=>o().openUrl(V,g)),R=(V,G,oe)=>{const ue=o();ue.alert(V,r(oe||ue,G))},_=(V,G,oe)=>{const ue=o();ue.confirm(V,r(oe||ue,G))},Z=()=>{h().each(V=>{o().close(V),g(V)})};return e.on("remove",()=>{ke(n,V=>{o().close(V)})}),{open:A,openUrl:M,alert:R,confirm:_,close:Z}},$4=(e,n)=>{e.notificationManager.open({type:"error",text:n})},Jv=(e,n)=>{e._skinLoaded?$4(e,n):e.on("SkinLoaded",()=>{$4(e,n)})},Y6=(e,n)=>{Jv(e,Ks.translate(["Failed to upload image: {0}",n]))},bp=(e,n,o)=>{my(e,n,{message:o}),console.error(o)},yp=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,X6=(e,n,o)=>{bp(e,"PluginLoadError",yp("plugin",n,o))},J6=(e,n,o)=>{bp(e,"IconsLoadError",yp("icons",n,o))},Q6=(e,n,o)=>{bp(e,"LanguageLoadError",yp("language",n,o))},q6=(e,n,o)=>{bp(e,"ThemeLoadError",yp("theme",n,o))},eR=(e,n,o)=>{bp(e,"ModelLoadError",yp("model",n,o))},H4=(e,n,o)=>{const r=Ks.translate(["Failed to initialize plugin: {0}",n]);my(e,"PluginLoadError",{message:r}),Qv(r,o),Jv(e,r)},Qv=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},tR=e=>{N.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},G2=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},nR=(e,n)=>{G2(e,"StyleWithCSS",n),G2(e,"enableInlineTableEditing",n),G2(e,"enableObjectResizing",n)},oR=e=>{e.selection.setRng(e.selection.getRng())},V4=(e,n,o)=>{Xi(e,n)&&!o?Jr(e,n):o&&Yo(e,n)},z4=e=>{const n=ne.fromDom(e.getBody());V4(n,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),tR(e)},K2=e=>{const n=ne.fromDom(e.getBody());V4(n,"mce-content-readonly",!1),e.hasEditableRoot()&&gc(n,!0),nR(e,!1),zy(e)&&e.focus(),oR(e),e.nodeChanged()},Ic=e=>Kh(e),Gf="data-mce-contenteditable",lV=e=>{ke(Xo(e,'*[contenteditable="true"]'),n=>{fr(n,Gf,"true"),gc(n,!1)})},sR=e=>{ke(Xo(e,`*[${Gf}="true"]`),n=>{tr(n,Gf),gc(n,!0)})},qv=(e,n)=>{const o=ne.fromDom(e.getBody());n?(z4(e),gc(o,!1),lV(o)):(sR(o),K2(e))},U4=e=>{e.serializer?Cp(e):e.on("PreInit",()=>{Cp(e)})},Cp=e=>{e.parser.addAttributeFilter("contenteditable",n=>{Ic(e)&&ke(n,o=>{o.attr(Gf,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Gf,n=>{Ic(e)&&ke(n,o=>{o.attr("contenteditable",o.attr(Gf))})}),e.serializer.addTempAttr(Gf)},Z4=e=>e.type==="click",rR=["copy"],Sp=e=>_t(rR,e.type),W4=(e,n)=>bf(n,"a",r=>Un(r,ne.fromDom(e.getBody()))).bind(r=>Aa(r,"href")),j4=(e,n)=>{if(Z4(n)&&!Mt.metaKeyPressed(n)){const o=ne.fromDom(n.target);W4(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const i=e.dom.select(`${r},[name="${Kr(r,"#")}"]`);i.length&&e.selection.scrollIntoView(i[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else Sp(n)&&e.dispatch(n.type,n)},xp=e=>{e.on("ShowCaret ObjectSelected",n=>{Ic(e)&&n.preventDefault()}),e.on("DisabledStateChange",n=>{n.isDefaultPrevented()||qv(e,n.state)})},Kf=e=>{U4(e),xp(e)},aR=e=>/^[a-z0-9\-]+$/i.test(e),G4=e=>"content/"+e+"/content.css",cV=e=>tinymce.Resource.has(G4(e)),iR=e=>K4(e,vL(e)),lR=e=>K4(e,fk(e)),K4=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",i=`content${e.editorManager.suffix}.css`;return Ot(n,c=>cV(c)?c:aR(c)&&!e.inline?`${o}/${c}/${i}`:e.documentBaseURI.toAbsolute(c))},uV=e=>{e.contentCSS=e.contentCSS.concat(iR(e),lR(e))},Yf=e=>e?Vn(e.getElementsByTagName("img")):[],Sg=(e,n)=>{const o={};return{findAll:(i,c=Qe)=>{const d=Ht(Yf(i),h=>{const y=h.src;return h.hasAttribute("data-mce-bogus")||h.hasAttribute("data-mce-placeholder")||!y||y===no.transparentSrc?!1:Ps(y,"blob:")?!e.isUploaded(y)&&c(h):Ps(y,"data:")?c(h):!1}),g=Ot(d,h=>{const y=h.src;if(nn(o,y))return o[y].then(A=>ee(A)?A:{image:h,blobInfo:A.blobInfo});{const A=PM(n,y).then(M=>(delete o[y],{image:h,blobInfo:M})).catch(M=>(delete o[y],M));return o[y]=A,A}});return Promise.all(g)}}},Y4=()=>{let o={};const r=(R,_)=>({status:R,resultUri:_}),i=R=>R in o;return{hasBlobUri:i,getResultUri:R=>{const _=o[R];return _?_.resultUri:null},isPending:R=>i(R)?o[R].status===1:!1,isUploaded:R=>i(R)?o[R].status===2:!1,markPending:R=>{o[R]=r(1,null)},markUploaded:(R,_)=>{o[R]=r(2,_)},removeFailed:R=>{delete o[R]},destroy:()=>{o={}}}};let cR=0;const dV=()=>{const e=()=>Math.round(oh()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},fV=e=>e+cR+++dV(),mV=()=>{let e=[];const n=M=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[M.toLowerCase()]||"dat",o=(M,R,_,Z,V)=>{if(ee(M))return r({id:M,name:Z,filename:V,blob:R,base64:_});if(we(M))return r(M);throw new Error("Unknown input type")},r=M=>{if(!M.blob||!M.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const R=M.id||fV("blobid"),_=M.name||R,Z=M.blob;return{id:Ye(R),name:Ye(_),filename:Ye(M.filename||_+"."+n(Z.type)),blob:Ye(Z),base64:Ye(M.base64),blobUri:Ye(M.blobUri||URL.createObjectURL(Z)),uri:Ye(M.uri)}},i=M=>{d(M.id())||e.push(M)},c=M=>No(e,M).getOrUndefined(),d=M=>c(R=>R.id()===M);return{create:o,add:i,get:d,getByUri:M=>c(R=>R.blobUri()===M),getByData:(M,R)=>c(_=>_.base64()===M&&_.blob().type===R),findFirst:c,removeByUri:M=>{e=Ht(e,R=>R.blobUri()===M?(URL.revokeObjectURL(R.blobUri()),!1):!0)},destroy:()=>{ke(e,M=>{URL.revokeObjectURL(M.blobUri())}),e=[]}}},Ii=(e,n)=>{const o={},r=(V,G)=>V?V.replace(/\/$/,"")+"/"+G.replace(/^\//,""):G,i=(V,G)=>new Promise((oe,ue)=>{const ge=new XMLHttpRequest;ge.open("POST",n.url),ge.withCredentials=n.credentials,ge.upload.onprogress=Ue=>{G(Ue.loaded/Ue.total*100)},ge.onerror=()=>{ue("Image upload failed due to a XHR Transport error. Code: "+ge.status)},ge.onload=()=>{if(ge.status<200||ge.status>=300){ue("HTTP Error: "+ge.status);return}const Ue=JSON.parse(ge.responseText);if(!Ue||!ee(Ue.location)){ue("Invalid JSON: "+ge.responseText);return}oe(r(n.basePath,Ue.location))};const Se=new FormData;Se.append("file",V.blob(),V.filename()),ge.send(Se)}),c=Tt(n.handler)?n.handler:i,d=()=>new Promise(V=>{V([])}),g=(V,G)=>({url:G,blobInfo:V,status:!0}),h=(V,G)=>({url:"",blobInfo:V,status:!1,error:G}),y=(V,G)=>{ut.each(o[V],oe=>{oe(G)}),delete o[V]},A=(V,G,oe)=>(e.markPending(V.blobUri()),new Promise(ue=>{let ge,Se;try{const Ue=()=>{ge&&(ge.close(),Se=et)},tt=Ne=>{Ue(),e.markUploaded(V.blobUri(),Ne),y(V.blobUri(),g(V,Ne)),ue(g(V,Ne))},At=Ne=>{Ue(),e.removeFailed(V.blobUri()),y(V.blobUri(),h(V,Ne)),ue(h(V,Ne))};Se=Ne=>{Ne<0||Ne>100||N.from(ge).orThunk(()=>N.from(oe).map(Oo)).each(Ae=>{ge=Ae,Ae.progressBar.value(Ne)})},G(V,Se).then(tt,Ne=>{At(ee(Ne)?{message:Ne}:Ne)})}catch(Ue){ue(h(V,Ue))}})),M=V=>V===i,R=V=>{const G=V.blobUri();return new Promise(oe=>{o[G]=o[G]||[],o[G].push(oe)})},_=(V,G)=>(V=ut.grep(V,oe=>!e.isUploaded(oe.blobUri())),Promise.all(ut.map(V,oe=>e.isPending(oe.blobUri())?R(oe):A(oe,c,G))));return{upload:(V,G)=>!n.url&&M(c)?d():_(V,G)}},Ul=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),X4=(e,n)=>Ii(n,{url:fL(e),basePath:mL(e),credentials:gL(e),handler:hL(e)}),J4=e=>{const n=Y4(),o=X4(e,n);return{upload:(r,i=!0)=>o.upload(r,i?Ul(e):void 0)}},Q4=(e,n)=>e.dom.isEmpty(n.dom)&&Ce(e.schema.getTextBlockElements()[ao(n)]),Y2=e=>n=>{Q4(e,n)&&Fs(n,ne.fromHtml('<br data-mce-bogus="1" />'))},gV=e=>{const n=mV();let o,r;const i=Y4(),c=[],d=ge=>Se=>e.selection?ge(Se):[],g=ge=>ge+(ge.indexOf("?")===-1?"?":"&")+new Date().getTime(),h=(ge,Se,Ue)=>{let tt=0;do tt=ge.indexOf(Se,tt),tt!==-1&&(ge=ge.substring(0,tt)+Ue+ge.substr(tt+Se.length),tt+=Ue.length-Se.length+1);while(tt!==-1);return ge},y=(ge,Se,Ue)=>{const tt=`src="${Ue}"${Ue===no.transparentSrc?' data-mce-placeholder="1"':""}`;return ge=h(ge,`src="${Se}"`,tt),ge=h(ge,'data-mce-src="'+Se+'"','data-mce-src="'+Ue+'"'),ge},A=(ge,Se)=>{ke(e.undoManager.data,Ue=>{Ue.type==="fragmented"?Ue.fragments=Ot(Ue.fragments,tt=>y(tt,ge,Se)):Ue.content=y(Ue.content,ge,Se)})},M=(ge,Se)=>{const Ue=e.convertURL(Se,"src");A(ge.src,Se),xi(ne.fromDom(ge),{src:X1(e)?g(Se):Se,"data-mce-src":Ue})},R=()=>(o||(o=X4(e,i)),G().then(d(ge=>{const Se=Ot(ge,Ue=>Ue.blobInfo);return o.upload(Se,Ul(e)).then(d(Ue=>{const tt=[];let At=!1;const Ne=Ot(Ue,(Ae,je)=>{const{blobInfo:Et,image:zt}=ge[je];let Rn=!1;return Ae.status&&J1(e)?(Ae.url&&!Ws(zt.src,Ae.url)&&(At=!0),n.removeByUri(zt.src),td(e)||M(zt,Ae.url)):Ae.error&&(Ae.error.remove&&(A(zt.src,no.transparentSrc),tt.push(zt),Rn=!0),Y6(e,Ae.error.message)),{element:zt,status:Ae.status,uploadUri:Ae.url,blobInfo:Et,removed:Rn}});return tt.length>0&&!td(e)?e.undoManager.transact(()=>{ke(Cn(tt),Ae=>{const je=cc(Ae);b(Ae),je.each(Y2(e)),n.removeByUri(Ae.dom.src)})}):At&&e.undoManager.dispatchChange(),Ne}))}))),_=()=>ii(e)?R():Promise.resolve([]),Z=ge=>xn(c,Se=>Se(ge)),V=ge=>{c.push(ge)},G=()=>(r||(r=Sg(i,n)),r.findAll(e.getBody(),Z).then(d(ge=>{const Se=Ht(ge,Ue=>ee(Ue)?(Jv(e,Ue),!1):Ue.uriType!=="blob");return td(e)||ke(Se,Ue=>{A(Ue.image.src,Ue.blobInfo.blobUri()),Ue.image.src=Ue.blobInfo.blobUri(),Ue.image.removeAttribute("data-mce-src")}),Se}))),oe=()=>{n.destroy(),i.destroy(),r=o=null},ue=ge=>ge.replace(/src="(blob:[^"]+)"/g,(Se,Ue)=>{const tt=i.getResultUri(Ue);if(tt)return'src="'+tt+'"';let At=n.getByUri(Ue);return At||(At=Ko(e.editorManager.get(),(Ne,Ae)=>Ne||Ae.editorUpload&&Ae.editorUpload.blobCache.getByUri(Ue),void 0)),At?'src="data:'+At.blob().type+";base64,"+At.base64()+'"':Se});return e.on("SetContent",()=>{ii(e)?_():G()}),e.on("RawSaveContent",ge=>{ge.content=ue(ge.content)}),e.on("GetContent",ge=>{ge.source_view||ge.format==="raw"||ge.format==="tree"||(ge.content=ue(ge.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",ge=>{ke(ge,Se=>{const Ue=Se.attr("src");if(!Ue||n.getByUri(Ue))return;const tt=i.getResultUri(Ue);tt&&Se.attr("src",tt)})})}),{blobCache:n,addFilter:V,uploadImages:R,uploadImagesAuto:_,scanForImages:G,destroy:oe}},uR=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const i={inline:"span",styles:{textDecoration:"line-through"},exact:!0},c={inline:"strike",remove:"all",preserve_attributes:["class","style"]},d={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[d,i,c]:[i,d,c]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(i,c,d)=>Bt(i)&&i.hasAttribute("href"),onformat:(i,c,d)=>{ut.each(d,(g,h)=>{n.setAttrib(i,h,g)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":i=>{var c;return(c=i==null?void 0:i.customValue)!==null&&c!==void 0?c:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return ut.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),i=>{r[i]={block:i,remove:"all"}}),r},wp={remove_similar:!0,inherit:!1},Ep={selector:"td,th",...wp},X2={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Ep},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Ep},tablecellbordercolor:{styles:{borderColor:"%value"},...Ep},tablecellclass:{classes:["%value"],...Ep},tableclass:{selector:"table",classes:["%value"],...wp},tablecellborderstyle:{styles:{borderStyle:"%value"},...Ep},tablecellborderwidth:{styles:{borderWidth:"%value"},...Ep}},q4=Ye(X2),dR=e=>{const n={},o=d=>Ce(d)?n[d]:n,r=d=>nn(n,d),i=(d,g)=>{d&&(ee(d)?(Ke(g)||(g=[g]),ke(g,h=>{Je(h.deep)&&(h.deep=!Ll(h)),Je(h.split)&&(h.split=!Ll(h)||kr(h)),Je(h.remove)&&Ll(h)&&!kr(h)&&(h.remove="none"),Ll(h)&&kr(h)&&(h.mixed=!0,h.block_expand=!0),ee(h.classes)&&(h.classes=h.classes.split(/\s+/))}),n[d]=g):$e(d,(h,y)=>{i(y,h)}))},c=d=>(d&&n[d]&&delete n[d],n);return i(uR(e)),i(q4()),i(xL(e)),{get:o,has:r,register:i,unregister:c}},Xf=ut.each,Zl=Co.DOM,e3=e=>Ce(e)&&we(e),Bc=(e,n)=>{const o=n&&n.schema||ma({}),r=(h,y)=>{y.classes.length>0&&Zl.addClass(h,y.classes.join(" ")),Zl.setAttribs(h,y.attrs)},i=h=>{const y=ee(h)?{name:h,classes:[],attrs:{}}:h,A=Zl.create(y.name);return r(A,y),A},c=(h,y)=>{const A=o.getElementRule(h.nodeName.toLowerCase()),M=A==null?void 0:A.parentsRequired;return M&&M.length?y&&_t(M,y)?y:M[0]:!1},d=(h,y,A)=>{let M;const R=y[0],_=e3(R)?R.name:void 0,Z=c(h,_);if(Z)_===Z?(M=R,y=y.slice(1)):M=Z;else if(R)M=R,y=y.slice(1);else if(!A)return h;const V=M?i(M):Zl.create("div");V.appendChild(h),A&&ut.each(A,oe=>{const ue=i(oe);V.insertBefore(ue,h)});const G=e3(M)?M.siblings:void 0;return d(V,y,G)},g=Zl.create("div");if(e.length>0){const h=e[0],y=i(h),A=e3(h)?h.siblings:void 0;g.appendChild(d(y,e.slice(1),A))}return g},Bi=e=>{e=ut.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,i,c,d,g)=>{switch(i){case"#":o.attrs.id=c;break;case".":o.classes.push(c);break;case":":ut.inArray("checked disabled enabled read-only required".split(" "),c)!==-1&&(o.attrs[c]=c);break}if(d==="["){const h=g.match(/([\w\-]+)(?:\=\"([^\"]+))?/);h&&(o.attrs[h[1]]=h[2])}return""})),o.name=n||"div",o},e0=e=>ee(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),ut.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=ut.map(n.split(/(?:~\+|~|\+)/),Bi),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],Li=(e,n)=>{let o="",r=wL(e);if(r==="")return"";const i=R=>ee(R)?R.replace(/%(\w+)/g,""):"",c=(R,_)=>Zl.getStyle(_??e.getBody(),R,!0);if(ee(n)){const R=e.formatter.get(n);if(!R)return"";n=R[0]}if("preview"in n){const R=n.preview;if(R===!1)return"";r=R||r}let d=n.block||n.inline||"span",g;const h=e0(n.selector);h.length>0?(h[0].name||(h[0].name=d),d=n.selector,g=Bc(h,e)):g=Bc([d],e);const y=Zl.select(d,g)[0]||g.firstChild;Xf(n.styles,(R,_)=>{const Z=i(R);Z&&Zl.setStyle(y,_,Z)}),Xf(n.attributes,(R,_)=>{const Z=i(R);Z&&Zl.setAttrib(y,_,Z)}),Xf(n.classes,R=>{const _=i(R);Zl.hasClass(y,_)||Zl.addClass(y,_)}),e.dispatch("PreviewFormats"),Zl.setStyles(g,{position:"absolute",left:-65535}),e.getBody().appendChild(g);const A=c("fontSize"),M=/px$/.test(A)?parseInt(A,10):0;return Xf(r.split(" "),R=>{let _=c(R,y);if(!(R==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(_)&&(_=c(R),I1(_).toLowerCase()==="#ffffff"))&&!(R==="color"&&I1(_).toLowerCase()==="#000000")){if(R==="font-size"&&/em|%$/.test(_)){if(M===0)return;_=parseFloat(_)/(/%$/.test(_)?100:1)*M+"px"}R==="border"&&_&&(o+="padding:0 2px;"),o+=R+":"+_+";"}}),e.dispatch("AfterPreviewFormats"),Zl.remove(g),o},hV=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},Ro=e=>{const n=dR(e),o=is({});return hV(e),q$(e),td(e)||SM(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,i,c)=>{D9(e,r,i,c)},remove:(r,i,c,d)=>{O4(e,r,i,c,d)},toggle:(r,i,c)=>{O6(e,r,i,c)},match:(r,i,c,d)=>T9(e,r,i,c,d),closest:r=>$2(e,r),matchAll:(r,i)=>A9(e,r,i),matchNode:(r,i,c,d)=>O9(e,r,i,c,d),canApply:r=>k9(e,r),formatChanged:(r,i,c,d)=>H2(e,o,r,i,c,d),getCssText:ht(Li,e)}},fR=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},xg=(e,n,o)=>{const r=is(!1),i=h=>{hp(n,!1,o),n.add({},h)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",h=>{const y=h.command;fR(y)||(w6(n,o),n.beforeChange())}),e.on("ExecCommand",h=>{const y=h.command;fR(y)||i(h)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",i),e.on("dragend",i),e.on("keyup",h=>{const y=h.keyCode;if(h.isDefaultPrevented())return;const A=no.os.isMacOS()&&h.key==="Meta";(y>=33&&y<=36||y>=37&&y<=40||y===45||h.ctrlKey||A)&&(i(),e.nodeChanged()),(y===46||y===8)&&e.nodeChanged(),r.get()&&n.typing&&!E4(gp(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",h=>{const y=h.keyCode;if(h.isDefaultPrevented())return;if(y>=33&&y<=36||y>=37&&y<=40||y===45){n.typing&&i(h);return}const A=h.ctrlKey&&!h.altKey||h.metaKey;if((y<16||y>20)&&y!==224&&y!==91&&!n.typing&&!A){n.beforeChange(),hp(n,!0,o),n.add({},h),r.set(!0);return}(no.os.isMacOS()?h.metaKey:h.ctrlKey&&!h.altKey)&&n.beforeChange()}),e.on("mousedown",h=>{n.typing&&i(h)});const c=h=>h.inputType==="insertReplacementText",d=h=>h.inputType==="insertText"&&h.data===null,g=h=>h.inputType==="insertFromPaste"||h.inputType==="insertFromDrop";e.on("input",h=>{h.inputType&&(c(h)||d(h)||g(h))&&i(h)}),e.on("AddUndo Undo Redo ClearUndos",h=>{h.isDefaultPrevented()||e.nodeChanged()})},t0=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},t3=e=>{const n=Gr(),o=is(0),r=is(0),i={data:[],typing:!1,beforeChange:()=>{C9(e,o,n)},add:(c,d)=>LY(e,i,r,o,n,c,d),dispatchChange:()=>{e.setDirty(!0);const c=gp(e);c.bookmark=Pf(e.selection),e.dispatch("change",{level:c,lastLevel:en(i.data,r.get()).getOrUndefined()})},undo:()=>Nc(e,i,o,r),redo:()=>T6(e,r,i.data),clear:()=>{S9(e,i,r)},reset:()=>{A6(e,i)},hasUndo:()=>x9(e,i,r),hasRedo:()=>w9(e,i,r),transact:c=>FY(e,i,o,c),ignore:c=>{ba(e,o,c)},extra:(c,d)=>{E9(e,i,r,c,d)}};return td(e)||xg(e,i,o),t0(e),i},n3=[9,27,Mt.HOME,Mt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Mt.DOWN,Mt.UP,Mt.LEFT,Mt.RIGHT].concat(no.browser.isFirefox()?[224]:[]),J2="data-mce-placeholder",mR=e=>e.type==="keydown"||e.type==="keyup",Q2=e=>{const n=e.keyCode;return n===Mt.BACKSPACE||n===Mt.DELETE},pV=e=>{if(mR(e)){const n=e.keyCode;return!Q2(e)&&(Mt.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||_t(n3,n))}else return!1},gR=e=>mR(e)&&!(Q2(e)||e.type==="keyup"&&e.keyCode===229),hR=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},o3=e=>{var n;const o=e.dom,r=Ma(e),i=(n=CL(e))!==null&&n!==void 0?n:"",c=(d,g)=>{if(pV(d))return;const h=e.getBody(),y=gR(d)?!1:hR(o,h,r);(o.getAttrib(h,J2)!==""!==y||g)&&(o.setAttrib(h,J2,y?i:null),Hh(e,y),e.on(y?"keydown":"keyup",c),e.off(y?"keyup":"keydown",c))};dn(i)&&e.on("init",d=>{c(d,!0),e.on("change SetContent ExecCommand",c),e.on("paste",g=>_l.setEditorTimeout(e,()=>c(g)))})},pR=(e,n)=>({block:e,position:n}),q2=(e,n)=>({from:e,to:n}),s3=(e,n)=>{const o=ne.fromDom(e),r=ne.fromDom(n.container());return Ev(o,r).map(i=>pR(i,n))},vV=e=>!(El(e.to.block,e.from.block)||El(e.from.block,e.to.block)),bV=e=>!Un(e.from.block,e.to.block),vR=(e,n)=>Nu(n,i=>Of(i)||hc(i.dom),i=>Un(i,e)).filter(ja).getOr(e),yV=(e,n)=>{const o=ne.fromDom(e);return Un(vR(o,n.from.block),vR(o,n.to.block))},bR=e=>ss(e.from.block.dom)===!1&&ss(e.to.block.dom)===!1,CV=e=>{const n=o=>Nx(o)||fx(o.dom)||Od(o);return n(e.from.block)&&n(e.to.block)},SV=(e,n,o,r)=>ws(r.position.getNode())&&!ka(e,r.block)?Gm(!1,r.block.dom).bind(i=>i.isEqual(r.position)?Nl(o,n,i).bind(c=>s3(n,c)):N.some(r)).getOr(r):r,yR=(e,n,o,r)=>{const i=s3(n,Be.fromRangeStart(r)),c=i.bind(d=>Nl(o,n,d.position).bind(g=>s3(n,g).map(h=>SV(e,n,o,h))));return Zs(i,c,q2).filter(d=>bV(d)&&yV(n,d)&&bR(d)&&CV(d)&&vV(d))},xV=(e,n,o,r)=>r.collapsed?yR(e,n,o,r):N.none(),CR=(e,n)=>{const o=Fr(e);return bs(o,r=>n.isBlock(ao(r))).fold(Ye(o),r=>o.slice(0,r))},Tp=(e,n)=>{const o=CR(e,n);return ke(o,b),o},SR=(e,n,o)=>{const r=Ku(o,n);return No(r.reverse(),i=>ka(e,i)).each(b)},wV=(e,n)=>Ht(b1(n),o=>!ka(e,o)).length===0,xR=(e,n,o,r,i)=>{if(ka(r,o))return kf(o),na(o.dom);wV(r,i)&&ka(r,n)&&Ta(i,ne.fromTag("br"));const c=li(o.dom,Be.before(i.dom));return ke(Tp(n,r),d=>{Ta(i,d)}),SR(r,e,n),c},wR=(e,n)=>e.isInline(ao(n)),EV=(e,n,o,r)=>{if(ka(r,o)){if(ka(r,n)){const d=ur((g=>{const h=(y,A)=>Tr(y).fold(()=>A,M=>wR(r,M)?h(M,A.concat(Y(M))):A);return h(g,[])})(o),(g,h)=>(bh(g,h),h),kd());Ki(n),Fs(n,d)}return b(o),na(n.dom)}const i=Di(o.dom);return ke(Tp(n,r),c=>{Fs(o,c)}),SR(r,e,n),i},ER=(e,n)=>{const o=Ku(n,e);return N.from(o[o.length-1])},Wl=(e,n)=>El(n,e)?ER(n,e):N.none(),TR=(e,n)=>{Gm(e,n.dom).bind(o=>N.from(o.getNode())).map(ne.fromDom).filter(zm).each(b)},r3=(e,n,o,r)=>(TR(!0,n),TR(!1,o),Wl(n,o).fold(ht(EV,e,n,o,r),ht(xR,e,n,o,r))),eC=(e,n,o,r,i)=>n?r3(e,r,o,i):r3(e,o,r,i),n0=(e,n)=>{const o=ne.fromDom(e.getBody());return xV(e.schema,o.dom,n,e.selection.getRng()).map(i=>()=>{eC(o,n,i.from.block,i.to.block,e.schema).each(c=>{e.selection.setRng(c.toRange())})})},AR=(e,n,o)=>{const r=n.getRng();return Zs(Ev(e,ne.fromDom(r.startContainer)),Ev(e,ne.fromDom(r.endContainer)),(i,c)=>Un(i,c)?N.none():N.some(()=>{r.deleteContents(),eC(e,!0,i,c,o).each(d=>{n.setRng(d.toRange())})})).getOr(N.none())},a3=(e,n)=>{const o=ne.fromDom(n),r=ht(Un,e);return yd(o,Of,r).isSome()},TV=(e,n)=>a3(e,n.startContainer)||a3(e,n.endContainer),AV=(e,n)=>{const o=li(e.dom,Be.fromRangeStart(n)).isNone(),r=rr(e.dom,Be.fromRangeEnd(n)).isNone();return!TV(e,n)&&o&&r},OR=e=>N.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),kR=e=>{const n=ne.fromDom(e.getBody()),o=e.selection.getRng();return AV(n,o)?OR(e):AR(n,e.selection,e.schema)},ci=(e,n)=>e.selection.isCollapsed()?N.none():kR(e),Yd=(e,n,o,r,i)=>N.from(n._selectionOverrides.showCaret(e,o,r,i)),OV=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},tC=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?N.none():N.some(OV(n)),i3=(e,n,o)=>{const r=pw(1,e.getBody(),n),i=Be.fromRangeStart(r),c=i.getNode();if(nv(c))return Yd(1,e,c,!i.isAtEnd(),!1);const d=i.getNode(!0);if(nv(d))return Yd(1,e,d,!1,!1);const g=cg(e.dom.getRoot(),i.getNode());return nv(g)?Yd(1,e,g,!1,o):N.none()},l3=(e,n,o)=>n.collapsed?i3(e,n,o).getOr(n):n,_Y=e=>rg(e)||Cv(e),kV=e=>ag(e)||sg(e),c3=(e,n)=>{at(n)&&n.data.length===0&&e.remove(n)},jl=(e,n,o,r,i,c)=>{Yd(r,e,c.getNode(!i),i,!0).each(d=>{if(n.collapsed){const g=n.cloneRange();i?g.setEnd(d.startContainer,d.startOffset):g.setStart(d.endContainer,d.endOffset),g.deleteContents()}else n.deleteContents();e.selection.setRng(d)}),c3(e.dom,o)},u3=(e,n)=>{const o=e.selection.getRng();if(!at(o.commonAncestorContainer))return N.none();const r=n?1:-1,i=Ac(e.getBody()),c=ht(vw,n?i.next:i.prev),d=n?_Y:kV,g=iv(r,e.getBody(),o),h=c(g),y=h&&Hl(n,h);if(!y||!Ey(g,y))return N.none();if(d(y))return N.some(()=>jl(e,o,g.getNode(),r,n,y));const A=c(y);return A&&d(A)&&Ey(y,A)?N.some(()=>jl(e,o,g.getNode(),r,n,A)):N.none()},Ap=(e,n)=>u3(e,n),o0=(e,n)=>{const o=e.getBody();return n?na(o).filter(rg):Di(o).filter(ag)},d3=e=>{const n=e.selection.getRng();return!n.collapsed&&(o0(e,!0).exists(o=>o.isEqual(Be.fromRangeStart(n)))||o0(e,!1).exists(o=>o.isEqual(Be.fromRangeEnd(n))))},f3=e=>Ce(e)&&(Of(ne.fromDom(e))||Od(ne.fromDom(e))),rl=xr.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),DR=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Bt(o)&&o.getAttribute("data-mce-caret")===r},DV=(e,n,o,r,i)=>{const c=d=>i.isInline(d.nodeName.toLowerCase())&&!tu(o,r,e);return Gk(!n,o).fold(()=>Gk(n,r).fold(Ie,c),c)},MR=(e,n,o,r,i)=>{const c=i.getNode(!o);return Ev(ne.fromDom(n),ne.fromDom(r.getNode())).map(d=>ka(e,d)?rl.remove(d.dom):rl.moveToElement(c)).orThunk(()=>N.some(rl.moveToElement(c)))},nC=(e,n,o,r)=>Nl(n,e,o).bind(i=>f3(i.getNode())||DV(e,n,o,i,r)?N.none():n&&ss(i.getNode())||!n&&ss(i.getNode(!0))?MR(r,e,n,o,i):n&&ag(o)||!n&&rg(o)?N.some(rl.moveToPosition(i)):N.none()),MV=(e,n)=>dt(n)?N.none():e&&ss(n.nextSibling)?N.some(rl.moveToElement(n.nextSibling)):!e&&ss(n.previousSibling)?N.some(rl.moveToElement(n.previousSibling)):N.none(),RR=(e,n,o)=>o.fold(r=>N.some(rl.remove(r)),r=>N.some(rl.moveToElement(r)),r=>tu(n,r,e)?N.none():N.some(rl.moveToPosition(r))),RV=(e,n,o,r)=>DR(n,o)?MV(n,o.getNode(!n)).orThunk(()=>nC(e,n,o,r)):nC(e,n,o,r).bind(i=>RR(e,o,i)),wg=(e,n,o,r)=>{const i=pw(n?1:-1,e,o),c=Be.fromRangeStart(i),d=ne.fromDom(e);return!n&&ag(c)?N.some(rl.remove(c.getNode(!0))):n&&rg(c)?N.some(rl.remove(c.getNode())):!n&&rg(c)&&qy(d,c,r)?s5(d,c,r).map(g=>rl.remove(g.getNode())):n&&ag(c)&&cE(d,c,r)?I_(d,c,r).map(g=>rl.remove(g.getNode())):RV(e,n,c,r)},PR=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),ig(e,n,ne.fromDom(o)),!0),PV=(e,n)=>o=>{const r=n?Be.before(o):Be.after(o);return e.selection.setRng(r.toRange()),!0},NR=e=>n=>(e.selection.setRng(n.toRange()),!0),IR=(e,n)=>N.from(cg(e.getBody(),n)),NV=(e,n)=>{const o=e.selection.getNode();return IR(e,o).filter(ss).fold(()=>wg(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(PR(e,n),PV(e,n),NR(e))),()=>N.some(et))},IV=e=>{ke(Xo(e,".mce-offscreen-selection"),b)},BV=(e,n)=>{const o=e.selection.getNode();return ss(o)&&!D1(o)?IR(e,o.parentNode).filter(ss).fold(()=>N.some(()=>{IV(ne.fromDom(e.getBody())),ig(e,n,ne.fromDom(e.selection.getNode())),Tv(e)}),()=>N.some(et)):d3(e)?N.some(()=>{O5(e,e.selection.getRng(),ne.fromDom(e.getBody()))}):N.none()},BR=e=>{const n=e.dom,o=e.selection,r=cg(e.getBody(),o.getNode());if(hc(r)&&n.isBlock(r)&&n.isEmpty(r)){const i=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(i),o.setRng(Be.before(i).toRange())}return!0},oC=(e,n)=>e.selection.isCollapsed()?NV(e,n):BV(e,n),LR=e=>e.hasOwnProperty("text"),sC=e=>e.hasOwnProperty("marker"),Xd=(e,n)=>{const o=(c,d)=>{if(at(c))return{text:c,offset:d};{const g=n(),h=c.childNodes;return d<h.length?(c.insertBefore(g,h[d]),{marker:g,before:!0}):(c.appendChild(g),{marker:g,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},FR=e=>{var n,o;const{start:r,end:i}=e,c=new window.Range;return LR(r)?c.setStart(r.text,r.offset):sC(r)&&(r.before?c.setStartBefore(r.marker):c.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),LR(i)?c.setEnd(i.text,i.offset):sC(i)&&(i.before?c.setEndBefore(i.marker):c.setEndAfter(i.marker),(o=i.marker.parentNode)===null||o===void 0||o.removeChild(i.marker)),c},m3=(e,n)=>{var o;const r=e.dom,i=r.getParent(e.selection.getStart(),r.isBlock),c=r.getParent(e.selection.getEnd(),r.isBlock),d=e.getBody();if(((o=i==null?void 0:i.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&i&&c&&i===d.firstChild&&c===d.lastChild&&!r.isEmpty(d)){const h=i.cloneNode(!1),y=()=>{if(n?T5(e):r2(e),d.firstChild!==i){const A=Xd(e.selection.getRng(),()=>document.createElement("span"));Array.from(d.childNodes).forEach(M=>h.appendChild(M)),d.appendChild(h),e.selection.setRng(FR(A))}};return N.some(y)}return N.none()},rC=(e,n)=>{const o=Be.fromRangeStart(e.selection.getRng());return Nl(n,e.getBody(),o).filter(r=>n?fY(r):k_(r)).bind(r=>hw(n?0:-1,r)).map(r=>()=>e.selection.select(r))},aC=(e,n)=>e.selection.isCollapsed()?rC(e,n):N.none(),Eg=at,g3=e=>Eg(e)&&e.data[0]===Ar,s0=e=>Eg(e)&&e.data[e.data.length-1]===Ar,h3=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Ar)},LV=e=>{var n;if(Eg(e.previousSibling))return s0(e.previousSibling)||e.previousSibling.appendData(Ar),e.previousSibling;if(Eg(e))return g3(e)||e.insertData(0,Ar),e;{const o=h3(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},_R=e=>{var n,o;if(Eg(e.nextSibling))return g3(e.nextSibling)||e.nextSibling.insertData(0,Ar),e.nextSibling;if(Eg(e))return s0(e)||e.appendData(Ar),e;{const r=h3(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},iC=(e,n)=>e?LV(n):_R(n),FV=ht(iC,!0),lC=ht(iC,!1),p3=(e,n)=>at(e.container())?iC(n,e.container()):iC(n,e.getNode()),r0=(e,n)=>{const o=n.get();return o&&e.container()===o&&ga(o)},v3=(e,n)=>n.fold(o=>{Lf(e.get());const r=FV(o);return e.set(r),N.some(Be(r,r.length-1))},o=>na(o).map(r=>{if(r0(r,e)){const i=e.get();return Be(i,1)}else{Lf(e.get());const i=p3(r,!0);return e.set(i),Be(i,1)}}),o=>Di(o).map(r=>{if(r0(r,e)){const i=e.get();return Be(i,i.length-1)}else{Lf(e.get());const i=p3(r,!1);return e.set(i),Be(i,i.length-1)}}),o=>{Lf(e.get());const r=lC(o);return e.set(r),N.some(Be(r,1))}),$R=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return N.none()},Xa=xr.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),b3=(e,n)=>{const o=Fd(n,e);return o||e},y3=(e,n,o)=>{const r=w5(o),i=b3(n,r.container());return Hf(e,i,r).fold(()=>rr(i,r).bind(ht(Hf,e,i)).map(c=>Xa.before(c)),N.none)},HR=(e,n)=>Km(e,n)===null,VR=(e,n,o)=>Hf(e,n,o).filter(ht(HR,n)),_V=(e,n,o)=>{const r=vE(o);return VR(e,n,r).bind(i=>li(i,r).isNone()?N.some(Xa.start(i)):N.none())},$V=(e,n,o)=>{const r=w5(o);return VR(e,n,r).bind(i=>rr(i,r).isNone()?N.some(Xa.end(i)):N.none())},a0=(e,n,o)=>{const r=vE(o),i=b3(n,r.container());return Hf(e,i,r).fold(()=>li(i,r).bind(ht(Hf,e,i)).map(c=>Xa.after(c)),N.none)},Lc=e=>!C5(i0(e)),nd=(e,n,o)=>$R([y3,_V,$V,a0],[e,n,o]).filter(Lc),i0=e=>e.fold(Xn,Xn,Xn,Xn),ps=e=>e.fold(Ye("before"),Ye("start"),Ye("end"),Ye("after")),Op=e=>e.fold(Xa.before,Xa.before,Xa.after,Xa.after),kp=e=>e.fold(Xa.start,Xa.start,Xa.end,Xa.end),Jd=(e,n)=>ps(e)===ps(n)&&i0(e)===i0(n),zR=(e,n,o,r,i,c)=>Zs(Hf(n,o,r),Hf(n,o,i),(d,g)=>d!==g&&x5(o,d,g)?Xa.after(e?d:g):c).getOr(c),C3=(e,n)=>e.fold(Qe,o=>!Jd(o,n)),HV=(e,n,o,r,i)=>{const c=Hl(e,i);return Nl(e,o,c).map(ht(Hl,e)).fold(()=>r.map(Op),h=>nd(n,o,h).map(ht(zR,e,n,o,c,h)).filter(ht(C3,r))).filter(Lc)},Dp=(e,n)=>e?n.fold(x(N.some,Xa.start),N.none,x(N.some,Xa.after),N.none):n.fold(N.none,x(N.some,Xa.before),N.none,x(N.some,Xa.end)),VV=(e,n,o,r)=>{const i=Hl(e,r),c=nd(n,o,i);return nd(n,o,i).bind(ht(Dp,e)).orThunk(()=>HV(e,n,o,c,r))},zV=e=>Tt(e.selection.getSel().modify),Tg=(e,n,o)=>{const r=e?1:-1;return n.setRng(Be(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},UV=(e,n)=>{const o=n.selection.getRng(),r=e?Be.fromRangeEnd(o):Be.fromRangeStart(o);return zV(n)?e&&Lx(r)?Tg(!0,n.selection,r):!e&&V1(r)?Tg(!1,n.selection,r):!1:!1};var ui;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(ui||(ui={}));const cC=(e,n)=>e===-1?Re(n):n,Jf=(e,n,o)=>e===1?n.next(o):n.prev(o),ZV=(e,n,o,r)=>ws(r.getNode(n===1))?ui.Br:tu(o,r)===!1?ui.Block:ui.Wrap,al=(e,n,o,r)=>{const i=Ac(o);let c=r;const d=[];for(;c;){const g=Jf(n,i,c);if(!g)break;if(ws(g.getNode(!1)))return n===1?{positions:cC(n,d).concat([g]),breakType:ui.Br,breakAt:N.some(g)}:{positions:cC(n,d),breakType:ui.Br,breakAt:N.some(g)};if(!g.isVisible()){c=g;continue}if(e(c,g)){const h=ZV(o,n,c,g);return{positions:cC(n,d),breakType:h,breakAt:N.some(g)}}d.push(g),c=g}return{positions:cC(n,d),breakType:ui.Eol,breakAt:N.none()}},Qf=(e,n,o,r)=>n(o,r).breakAt.map(i=>{const c=n(o,i).positions;return e===-1?c.concat(i):[i].concat(c)}).getOr([]),Ag=(e,n)=>Ko(e,(o,r)=>o.fold(()=>N.some(r),i=>Zs(sn(i.getClientRects()),sn(r.getClientRects()),(c,d)=>{const g=Math.abs(n-c.left);return Math.abs(n-d.left)<=g?r:i}).or(o)),N.none()),Mp=(e,n)=>sn(n.getClientRects()).bind(o=>Ag(e,o.left)),l0=ht(al,Be.isAbove,-1),od=ht(al,Be.isBelow,1),UR=ht(Qf,-1,l0),Gl=ht(Qf,1,od),c0=(e,n)=>l0(e,n).breakAt.isNone(),S3=(e,n)=>od(e,n).breakAt.isNone(),x3=e=>na(e).map(n=>[n].concat(od(e,n).positions)).getOr([]),w3=e=>Di(e).map(n=>l0(e,n).positions.concat(n)).getOr([]),Og=(e,n)=>Mp(UR(e,n),n),E3=(e,n)=>Mp(Gl(e,n),n),WV=ss,ZR=(e,n)=>Math.abs(e.left-n),WR=(e,n)=>Math.abs(e.right-n),jV=e=>Wc(e,"node"),jR=(e,n)=>Te(e,(o,r)=>{const i=Math.min(ZR(o,n),WR(o,n)),c=Math.min(ZR(r,n),WR(r,n));return c===i&&jV(r)&&WV(r.node)||c<i?r:o}),GV=e=>{const n=o=>Ot(o,r=>{const i=Md(r);return i.node=e,i});if(Bt(e))return n(e.getClientRects());if(at(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},kg=e=>Rs(e,GV);var Ja;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Ja||(Ja={}));const KV=(e,n,o,r)=>{let i=r;for(;i=Xh(i,e,Wx,n);)if(o(i))return},GR=(e,n,o,r,i,c)=>{let d=0;const g=[],h=M=>{let R=kg([M]);e===Ja.Up&&(R=R.reverse());for(let _=0;_<R.length;_++){const Z=R[_];if(!o(Z,y)){if(g.length>0&&n(Z,Kn(g))&&d++,Z.line=d,i(Z))return!0;g.push(Z)}}return!1},y=Kn(c.getClientRects());if(!y)return g;const A=c.getNode();return A&&(h(A),KV(e,r,h,A)),g},YV=(e,n)=>n.line>e,XV=(e,n)=>n.line===e,JV=ht(GR,Ja.Up,Fh,_h),QV=ht(GR,Ja.Down,_h,Fh),KR=e=>Kn(e.getClientRects()),qV=(e,n,o,r)=>{const i=Ac(n);let c,d,g,h;const y=[];let A=0;e===Ja.Down?(c=i.next,d=_h,g=Fh,h=Be.after(r)):(c=i.prev,d=Fh,g=_h,h=Be.before(r));const M=KR(h);do{if(!h.isVisible())continue;const R=KR(h);if(g(R,M))continue;y.length>0&&d(R,Kn(y))&&A++;const _=Md(R);if(_.position=h,_.line=A,o(_))return y;y.push(_)}while(h=c(h));return y},YR=e=>n=>YV(e,n),XR=e=>n=>XV(e,n),Qd=(e,n)=>{e.selection.setRng(n),ng(e,e.selection.getRng())},T3=(e,n,o)=>N.some(l3(e,n,o)),JR=(e,n,o,r,i,c)=>{const d=n===1,g=Ac(e.getBody()),h=ht(vw,d?g.next:g.prev),y=d?r:i;if(!o.collapsed){const Z=Qb(o);if(c(Z))return Yd(n,e,Z,n===-1,!1);if(d3(e)){const V=o.cloneRange();return V.collapse(n===-1),N.from(V)}}const A=iv(n,e.getBody(),o);if(y(A))return tC(e,A.getNode(!d));let M=h(A);const R=_x(o);if(M)M=Hl(d,M);else return R?N.some(o):N.none();if(y(M))return Yd(n,e,M.getNode(!d),d,!1);const _=h(M);return _&&y(_)&&Ey(M,_)?Yd(n,e,_.getNode(!d),d,!1):R?T3(e,M.toRange(),!1):N.none()},QR=(e,n,o,r,i,c)=>{const d=iv(n,e.getBody(),o),g=Kn(d.getClientRects()),h=n===Ja.Down,y=e.getBody();if(!g)return N.none();if(d3(e)){const G=h?Be.fromRangeEnd(o):Be.fromRangeStart(o);return(h?E3:Og)(y,G).orThunk(()=>N.from(G)).map(ue=>ue.toRange())}const M=(h?QV:JV)(y,YR(1),d),R=Ht(M,XR(1)),_=g.left,Z=jR(R,_);if(Z&&c(Z.node)){const G=Math.abs(_-Z.left),oe=Math.abs(_-Z.right);return Yd(n,e,Z.node,G<oe,!1)}let V;if(r(d)?V=d.getNode():i(d)?V=d.getNode(!0):V=Qb(o),V){const G=qV(n,y,YR(1),V);let oe=jR(Ht(G,XR(1)),_);if(oe||(oe=Kn(Ht(G,XR(0))),oe))return T3(e,oe.position.toRange(),!1)}return R.length===0?A3(e,h).filter(h?i:r).map(G=>l3(e,G.toRange(),!1)):N.none()},A3=(e,n)=>{const o=e.selection.getRng(),r=n?Be.fromRangeEnd(o):Be.fromRangeStart(o),i=rF(r.container(),e.getBody());if(n){const c=od(i,r);return On(c.positions)}else{const c=l0(i,r);return sn(c.positions)}},qR=(e,n,o)=>A3(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),ru=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},eP=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},tP=(e,n,o)=>v3(n,o).map(r=>(ru(e,r),o)),O3=(e,n,o)=>{const r=Be.fromRangeStart(e);if(e.collapsed)return r;{const i=Be.fromRangeEnd(e);return o?li(n,i).getOr(i):rr(n,r).getOr(r)}},nP=(e,n,o)=>{const r=e.getBody(),i=O3(e.selection.getRng(),r,o),c=ht(lg,e);return VV(o,c,r,i).bind(g=>tP(e,n,g))},k3=(e,n,o)=>{const r=Ot(Xo(ne.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),d=>d.dom),i=Ht(r,e),c=Ht(o,e);ke(_e(i,c),ht(eP,!1)),ke(_e(c,i),ht(eP,!0))},ez=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Be.fromRangeStart(e.selection.getRng());Be.isTextPosition(r)&&!q_(r)&&(ru(e,Vk(o,r)),n.set(null))}},tz=(e,n,o,r)=>{if(n.selection.isCollapsed()){const i=Ht(r,e);ke(i,c=>{const d=Be.fromRangeStart(n.selection.getRng());nd(e,n.getBody(),d).bind(g=>tP(n,o,g))})}},oP=(e,n,o)=>Wh(e)?nP(e,n,o).isSome():!1,sP=(e,n,o)=>Wh(n)?UV(e,n):!1,nz=e=>{const n=is(null),o=ht(lg,e);return e.on("NodeChange",r=>{Wh(e)&&(k3(o,e.dom,r.parents),ez(e,n),tz(o,e,n,r.parents))}),n},oz=ht(sP,!0),sz=ht(sP,!1),uC=(e,n,o)=>{if(Wh(e)){const r=A3(e,n).getOrThunk(()=>{const i=e.selection.getRng();return n?Be.fromRangeEnd(i):Be.fromRangeStart(i)});return nd(ht(lg,e),e.getBody(),r).exists(i=>{const c=Op(i);return v3(o,c).exists(d=>(ru(e,d),!0))})}else return!1},rz=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},az=e=>Zs(na(e),Di(e),(n,o)=>{const r=Hl(!0,n),i=Hl(!1,o);return rr(e,r).forall(c=>c.isEqual(i))}).getOr(!0),rP=(e,n)=>o=>v3(n,o).map(r=>()=>ru(e,r)),aP=(e,n,o,r)=>{const i=e.getBody(),c=ht(lg,e);e.undoManager.ignore(()=>{e.selection.setRng(rz(o,r)),r2(e),nd(c,i,Be.fromRangeStart(e.selection.getRng())).map(kp).bind(rP(e,n)).each(Io)}),e.nodeChanged()},iz=(e,n)=>{const o=Fd(n,e);return o||e},lz=(e,n,o,r)=>{const i=iz(e.getBody(),r.container()),c=ht(lg,e),d=nd(c,i,r);return d.bind(h=>o?h.fold(Ye(N.some(kp(h))),N.none,Ye(N.some(Op(h))),N.none):h.fold(N.none,Ye(N.some(Op(h))),N.none,Ye(N.some(kp(h))))).map(rP(e,n)).getOrThunk(()=>{const h=Oc(o,i,r),y=h.bind(A=>nd(c,i,A));return Zs(d,y,()=>Hf(c,i,r).bind(A=>az(A)?N.some(()=>{ig(e,o,ne.fromDom(A))}):N.none())).getOrThunk(()=>y.bind(()=>h.map(A=>()=>{o?aP(e,n,r,A):aP(e,n,A,r)})))})},D3=(e,n,o)=>{if(e.selection.isCollapsed()&&Wh(e)){const r=Be.fromRangeStart(e.selection.getRng());return lz(e,n,o,r)}return N.none()},cz=e=>hh(e)>1,iP=(e,n)=>{const o=ne.fromDom(e.getBody()),r=ne.fromDom(e.selection.getStart()),i=Ku(r,o);return bs(i,n).fold(Ye(i),c=>i.slice(0,c))},uz=e=>hh(e)===1,dz=e=>iP(e,n=>e.schema.isBlock(ao(n))||cz(n)),fz=e=>iP(e,n=>e.schema.isBlock(ao(n))),M3=(e,n)=>{const o=ht(_E,e);return Rs(n,r=>o(r)?[r.dom]:[])},lP=e=>{const n=fz(e);return M3(e,n)},mz=(e,n,o,r)=>{const i=M3(n,r);if(i.length===0)ig(n,e,o);else{const c=FE(o.dom,i);n.selection.setRng(c.toRange())}},gz=(e,n)=>{const o=Ht(dz(e),uz);return On(o).bind(r=>{const i=Be.fromRangeStart(e.selection.getRng());return bE(n,i,r.dom)&&!Iy(r)?N.some(()=>mz(n,e,r,o)):N.none()})},hz=(e,n)=>{const o=n.parentElement;return ws(n)&&!te(o)&&e.dom.isEmpty(o)},pz=e=>Iy(ne.fromDom(e)),cP=(e,n)=>{const o=e.selection.getStart(),r=hz(e,o)||pz(o)?FE(o,n):Nv(e.selection.getRng(),n);e.selection.setRng(r.toRange())},vz=(e,n)=>{const o=_e(n,lP(e));o.length>0&&cP(e,o)},uP=e=>at(e.startContainer),dP=e=>e.startOffset===0&&uP(e),bz=(e,n)=>{const o=n.startContainer.parentElement;return!te(o)&&_E(e,ne.fromDom(o))},yz=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!te(n)&&!te(o)&&n.isEqualNode(o)},Cz=e=>{const n=e.endContainer;return e.endOffset===(at(n)?n.length:n.childNodes.length)},Sz=e=>yz(e)&&Cz(e),xz=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),wz=e=>Sz(e)||xz(e),Ez=e=>{const n=e.selection.getRng();return dP(n)&&bz(e,n)&&wz(n)},Tz=e=>{if(Ez(e)){const n=lP(e);return N.some(()=>{r2(e),vz(e,n)})}else return N.none()},R3=(e,n)=>e.selection.isCollapsed()?gz(e,n):Tz(e),fP=(e,n)=>sx(e,o=>Il(o.dom),o=>n.isBlock(ao(o))),mP=e=>fP(ne.fromDom(e.selection.getStart()),e.schema),gP=e=>{const n=e.selection.getRng();return n.collapsed&&(uP(n)||e.dom.isEmpty(n.startContainer))&&!mP(e)},dC=e=>(gP(e)&&cP(e,[]),!0),fC=(e,n,o)=>Ce(o)?N.some(()=>{e._selectionOverrides.hideFakeCaret(),ig(e,n,ne.fromDom(o))}):N.none(),Az=(e,n)=>{const o=n?Cv:sg,i=iv(n?1:-1,e.getBody(),e.selection.getRng());return o(i)?fC(e,n,i.getNode(!n)):N.from(Hl(n,i)).filter(c=>o(c)&&Ey(i,c)).bind(c=>fC(e,n,c.getNode(!n)))},hP=(e,n)=>{const o=e.selection.getNode();return Ol(o)?fC(e,n,o):N.none()},P3=(e,n)=>e.selection.isCollapsed()?Az(e,n):hP(e,n),Oz=e=>Nu(e,n=>hc(n.dom)||ss(n.dom)).exists(n=>hc(n.dom)),N3=e=>Ci(e??"").getOr(0),pP=(e,n)=>{const o=e||UO(n)?"margin":"padding",r=nr(n,"direction")==="rtl"?"-right":"-left";return o+r},kz=(e,n,o,r,i,c)=>{const d=pP(o,ne.fromDom(c)),g=N3(e.getStyle(c,d));if(n==="outdent"){const h=Math.max(0,g-r);e.setStyle(c,d,h?h+i:"")}else{const h=g+r+i;e.setStyle(c,d,h)}},Dz=(e,n)=>xn(n,o=>{const r=pP(Uh(e),o),i=vb(o,r).map(N3).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&i>0}),mC=e=>{const n=I3(e);return!e.mode.isReadOnly()&&(n.length>1||Dz(e,n))},gC=e=>Ih(e)||Od(e),Mz=e=>cc(e).exists(gC),I3=e=>Ht(Cn(e.selection.getSelectedBlocks()),n=>!gC(n)&&!Mz(n)&&Oz(n)),vP=(e,n)=>{var o,r;if(e.mode.isReadOnly())return;const{dom:i}=e,c=so(e),d=(r=(o=/[a-z%]+$/i.exec(c))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",g=N3(c),h=Uh(e);ke(I3(e),y=>{kz(i,n,h,g,d,y.dom)})},Rz=e=>vP(e,"indent"),bP=e=>vP(e,"outdent"),yP=e=>{if(e.selection.isCollapsed()&&mC(e)){const n=e.dom,o=e.selection.getRng(),r=Be.fromRangeStart(o),i=n.getParent(o.startContainer,n.isBlock);if(i!==null&&lE(ne.fromDom(i),r,e.schema))return N.some(()=>bP(e))}return N.none()},CP=(e,n,o)=>Lo([yP,oC,Ap,(r,i)=>D3(r,n,i),n0,u2,aC,P3,ci,R3,m3],r=>r(e,o)).filter(r=>e.selection.isEditable()),Pz=(e,n)=>{CP(e,n,!1).fold(()=>{e.selection.isEditable()&&(r2(e),Tv(e))},Io)},Nz=(e,n)=>{CP(e,n,!0).fold(()=>{e.selection.isEditable()&&T5(e)},Io)},Iz=(e,n)=>{e.addCommand("delete",()=>{Pz(e,n)}),e.addCommand("forwardDelete",()=>{Nz(e,n)})},SP=5,Bz=400,hC=e=>e.touches===void 0||e.touches.length!==1?N.none():N.some(e.touches[0]),Lz=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>SP||r>SP},Fz=e=>{const n=Gr(),o=is(!1),r=yl(i=>{e.dispatch("longpress",{...i,type:"longpress"}),o.set(!0)},Bz);e.on("touchstart",i=>{hC(i).each(c=>{r.cancel();const d={x:c.clientX,y:c.clientY,target:i.target};r.throttle(i),o.set(!1),n.set(d)})},!0),e.on("touchmove",i=>{r.cancel(),hC(i).each(c=>{n.on(d=>{Lz(c,d)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",i=>{r.cancel(),i.type!=="touchcancel"&&n.get().filter(c=>c.target.isEqualNode(i.target)).each(()=>{o.get()?i.preventDefault():e.dispatch("tap",{...i,type:"tap"})})},!0)},B3=(e,n)=>nn(e,n.nodeName),_z=(e,n)=>at(n)?!0:Bt(n)?!B3(e.getBlockElements(),n)&&!Bl(n)&&!vc(e,n)&&!SO(n):!1,$z=(e,n,o)=>to(e5(ne.fromDom(o),ne.fromDom(n)),r=>B3(e,r.dom)),xP=(e,n)=>{if(at(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||B3(e,n.nextSibling)||SO(n.nextSibling)}return!1},qd=e=>e.dom.create(Ma(e),Y1(e)),wP=e=>{const n=e.dom,o=e.selection,r=e.schema,i=r.getBlockElements(),c=o.getStart(),d=e.getBody();let g,h,y=null;const A=Ma(e);if(!c||!Bt(c))return;const M=d.nodeName.toLowerCase();if(!r.isValidChild(M,A.toLowerCase())||$z(i,d,c))return;if(d.firstChild===d.lastChild&&ws(d.firstChild)){g=qd(e),g.appendChild(kd().dom),d.replaceChild(g,d.firstChild),e.selection.setCursorLocation(g,0),e.nodeChanged();return}let R=d.firstChild;for(;R;)if(Bt(R)&&Lb(r,R),_z(r,R)){if(xP(i,R)){h=R,R=R.nextSibling,n.remove(h);continue}if(!g){if(!y&&e.hasFocus()&&(y=Xd(e.selection.getRng(),()=>document.createElement("span"))),!R.parentNode){R=null;break}g=qd(e),d.insertBefore(g,R)}h=R,R=R.nextSibling,g.appendChild(h)}else g=null,R=R.nextSibling;y&&(e.selection.setRng(FR(y)),e.nodeChanged())},EP=(e,n,o)=>{const r=ne.fromDom(qd(e)),i=kd();Fs(r,i),o(n,r);const c=document.createRange();return c.setStartBefore(i.dom),c.setEndBefore(i.dom),c},Hz=e=>{e.on("NodeChange",()=>wP(e))},TP=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,Vz=(e,n,o)=>function(r){const i=arguments,c=i[i.length-2],d=c>0?n.charAt(c-1):"";if(d==='"')return r;if(d===">"){const g=n.lastIndexOf("<",c);if(g!==-1&&n.substring(g,c).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(i[0])+'">'+e.dom.encode(typeof i[1]=="string"?i[1]:i[0])+"</span>"},Rp=(e,n,o)=>{let r=n.length,i=o.content;if(o.format!=="raw"){for(;r--;)i=i.replace(n[r],Vz(e,i,Nk(e)));o.content=i}},zz=(e,n)=>xn(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),L3=e=>{const n="contenteditable",o=" "+ut.trim(BL(e))+" ",r=" "+ut.trim(Nk(e))+" ",i=TP(o),c=TP(r),d=LL(e);d.length>0&&e.on("BeforeSetContent",g=>{Rp(e,d,g)}),e.parser.addAttributeFilter("class",g=>{let h=g.length;for(;h--;){const y=g[h];i(y)?y.attr(n,"true"):c(y)&&y.attr(n,"false")}}),e.serializer.addAttributeFilter(n,g=>{let h=g.length;for(;h--;){const y=g[h];if(!i(y)&&!c(y))continue;const A=y.attr("data-mce-content");d.length>0&&A?zz(d,A)?(y.name="#text",y.type=3,y.raw=!0,y.value=A):y.remove():y.attr(n,null)}})},F3=e=>Cd(ne.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),AP=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Xb(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},OP=(e,n)=>{const o=F3(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),AP(e,o);return}H1(o)&&(AP(e,o),e.undoManager.add())}},pC=e=>{e.on("keyup compositionstart",ht(OP,e))},kP=ss,Uz=(e,n,o)=>JR(n,e,o,rg,ag,kP),Zz=(e,n,o)=>QR(n,e,o,c=>rg(c)||rE(c),c=>ag(c)||qD(c),kP),Wz=e=>{const n=e.dom.create(Ma(e));return n.innerHTML='<br data-mce-bogus="1">',n},DP=(e,n,o)=>{const r=Ac(e.getBody()),i=ht(vw,n===1?r.next:r.prev);if(o.collapsed){const c=e.dom.getParent(o.startContainer,"PRE");if(!c)return;if(!i(Be.fromRangeStart(o))){const g=ne.fromDom(Wz(e));n===1?Kc(ne.fromDom(c),g):Ta(ne.fromDom(c),g),e.selection.select(g.dom,!0),e.selection.collapse()}}},_3=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return Uz(o,e,r).orThunk(()=>(DP(e,o,r),N.none()))},jz=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return Zz(o,e,r).orThunk(()=>(DP(e,o,r),N.none()))},Gz=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return C5(o)?!n:n},MP=(e,n)=>_3(e,Gz(e.selection,n)).exists(o=>(Qd(e,o),!0)),RP=(e,n)=>jz(e,n).exists(o=>(Qd(e,o),!0)),PP=(e,n)=>qR(e,n,n?ag:rg),vC=(e,n)=>o0(e,!n).map(o=>{const r=o.toRange(),i=e.selection.getRng();return n?r.setStart(i.startContainer,i.startOffset):r.setEnd(i.endContainer,i.endOffset),r}).exists(o=>(Qd(e,o),!0)),Kz=e=>_t(["figcaption"],ao(e)),Yz=(e,n,o)=>{const r=ht(Un,n);return Nu(ne.fromDom(e.container()),i=>o.isBlock(ao(i)),r).filter(Kz)},Xz=(e,n,o)=>n?S3(e.dom,o):c0(e.dom,o),Jz=(e,n)=>{const o=ne.fromDom(e.getBody()),r=Be.fromRangeStart(e.selection.getRng());return Yz(r,o,e.schema).exists(()=>{if(Xz(o,n,r)){const c=EP(e,o,n?Fs:Tm);return e.selection.setRng(c),!0}else return!1})},NP=(e,n)=>e.selection.isCollapsed()?Jz(e,n):!1,Qz=(e,n,o)=>{const r=e.selection.getRng(),i=Be.fromRangeStart(r);return e.getBody().firstChild===n&&c0(o,i)?(e.execCommand("InsertNewBlockBefore"),!0):!1},qz=(e,n)=>{const o=e.selection.getRng(),r=Be.fromRangeStart(o);return e.getBody().lastChild===n&&S3(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},eU=(e,n)=>n?N.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>qz(e,o)).getOr(!1):N.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>N.from(e.dom.getParent(o,"details")).map(r=>Qz(e,r,o))).getOr(!1),$3=(e,n)=>eU(e,n),IP={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},tU=e=>Ot(e,n=>({...IP,...n})),nU=e=>Ot(e,n=>({...IP,...n})),BP=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,oU=(e,n)=>Rs(tU(e),o=>BP(o,n)?[o]:[]),H3=(e,n)=>Rs(nU(e),o=>BP(o,n)?[o]:[]),un=(e,...n)=>()=>e.apply(null,n),u0=(e,n)=>No(oU(e,n),o=>o.action()),LP=(e,n)=>Lo(H3(e,n),o=>o.action()),FP=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return JR(e,o,r,Cv,sg,Ol).exists(i=>(Qd(e,i),!0))},_P=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return QR(e,o,r,Cv,sg,Ol).exists(i=>(Qd(e,i),!0))},$P=(e,n)=>qR(e,n,n?sg:Cv),sU=(e,n)=>HP(e,n,Qe),HP=(e,n,o)=>Rs(Fr(e),r=>Si(r,n)?o(r)?[r]:[]:HP(r,n,o)),rU=(e,n,o=Ie)=>{if(o(n))return N.none();if(_t(e,ao(n)))return N.some(n);const r=i=>Si(i,"table")||o(i);return w1(n,e.join(","),r)},aU=(e,n)=>rU(["td","th"],e,n),iU=e=>sU(e,"th,td"),VP=(e,n)=>bf(e,"table",n),zP=xr.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),d0={...zP,none:e=>zP.none(e)},V3=(e,n,o,r,i=Qe)=>{const c=r===1;if(!c&&o<=0)return d0.first(e[0]);if(c&&o>=e.length-1)return d0.last(e[e.length-1]);{const d=o+r,g=e[d];return i(g)?d0.middle(n,g):V3(e,n,d,r,i)}},UP=(e,n)=>VP(e,n).bind(o=>{const r=iU(o);return bs(r,c=>Un(e,c)).map(c=>({index:c,all:r}))}),lU=(e,n,o)=>UP(e,o).fold(()=>d0.none(e),i=>V3(i.all,e,i.index,1,n)),cU=(e,n,o)=>UP(e,o).fold(()=>d0.none(),i=>V3(i.all,e,i.index,-1,n)),ZP=ni("image"),uU=e=>{const n=e;return N.from(n[ZP])},WP=(e,n)=>{const o=e;o[ZP]=n},z3=ni("event"),dU=e=>{const n=e;return N.from(n[z3])},f0=e=>n=>{const o=n;o[z3]=e},fU=(e,n)=>f0(n)(e),jP=f0(0),mU=f0(2),gU=f0(1),KP=(e=>n=>{const o=n;return N.from(o[z3]).exists(r=>r===e)})(0),HY=()=>Object.freeze({length:0,item:e=>null}),Dg=ni("mode"),VY=e=>{const n=e;return N.from(n[Dg])},U3=e=>n=>{const o=n;o[Dg]=e},hU=(e,n)=>U3(n)(e),pU=U3(0),Fi=U3(2),m0=U3(1),Fc=e=>n=>{const o=n;return N.from(o[Dg]).exists(r=>r===e)},Kl=Fc(0),bC=Fc(1),YP=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(Kl(e))if(ee(o)){if(!Je(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{Kl(e)&&n.remove(o)},clear:()=>{Kl(e)&&n.clear()}}),g0=["none","copy","link","move"],vU=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],yC=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(i){_t(g0,i)&&(n=i)},get effectAllowed(){return o},set effectAllowed(i){KP(r)&&_t(vU,i)&&(o=i)},get items(){return YP(r,e.items)},get files(){return bC(r)?HY():e.files},get types(){return e.types},setDragImage:(i,c,d)=>{Kl(r)&&(WP(r,{image:i,x:c,y:d}),e.setDragImage(i,c,d))},getData:i=>bC(r)?"":e.getData(i),setData:(i,c)=>{Kl(r)&&e.setData(i,c)},clearData:i=>{Kl(r)&&e.clearData(i)}};return pU(r),r},zY=e=>{const n=yC(),o=VY(e);return Fi(e),jP(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,uU(e).each(r=>n.setDragImage(r.image,r.x,r.y)),ke(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),ke(e.files,r=>n.items.add(r)),dU(e).each(r=>{fU(n,r)}),o.each(r=>{hU(e,r),hU(n,r)}),n},bU=e=>{const n=e.getData("text/html");return n===""?N.none():N.some(n)},Pp=(e,n)=>e.setData("text/html",n),XP=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),Ms=(e,n)=>Rs(n,o=>{const r=XP(Md(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),yU=(e,n,o)=>Ko(e,(r,i)=>r.fold(()=>N.some(i),c=>{const d=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o)),g=Math.sqrt(Math.abs(i.x-n)+Math.abs(i.y-o));return N.some(g<d?i:c)}),N.none()),JP=(e,n,o,r,i)=>{const c=Xo(ne.fromDom(o),"td,th,caption").map(g=>g.dom),d=Ht(Ms(e,c),g=>n(g,i));return yU(d,r,i).map(g=>g.cell)},Np=e=>e.bottom,Mg=e=>e.top,Rg=(e,n)=>e.y<n,CU=(e,n)=>e.y>n,SU=ht(JP,Np,Rg),Z3=ht(JP,Mg,CU),W3=(e,n)=>sn(n.getClientRects()).bind(o=>SU(e,o.left,o.top)).bind(o=>Mp(w3(o),n)),QP=(e,n)=>On(n.getClientRects()).bind(o=>Z3(e,o.left,o.top)).bind(o=>Mp(x3(o),n)),qP=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),xU=e=>e.breakType===ui.Wrap&&e.positions.length===0,wU=e=>e.breakType===ui.Br&&e.positions.length===1,CC=(e,n,o)=>{const r=e(n,o);return xU(r)||!ws(o.getNode())&&wU(r)?!qP(e,n,r):r.breakAt.isNone()},EU=ht(CC,l0),TU=ht(CC,od),AU=(e,n,o)=>{const r=Be.fromRangeStart(n);return Gm(!e,o).exists(i=>i.isEqual(r))},OU=(e,n,o,r)=>{const i=e.selection.getRng(),c=n?1:-1;return Zk()&&AU(n,i,o)?(Yd(c,e,o,!n,!1).each(d=>{Qd(e,d)}),!0):!1},kU=(e,n,o)=>W3(n,o).orThunk(()=>sn(o.getClientRects()).bind(r=>Ag(UR(e,Be.before(n)),r.left))).getOr(Be.before(n)),j3=(e,n,o)=>QP(n,o).orThunk(()=>sn(o.getClientRects()).bind(r=>Ag(Gl(e,Be.after(n)),r.left))).getOr(Be.after(n)),G3=(e,n)=>{const o=n.getNode(e);return Lu(o)?N.some(o):N.none()},DU=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Kc:Ta,i=EP(n,ne.fromDom(o),r);Qd(n,i)})},eN=(e,n,o)=>{const r=G3(!!n,o),i=n===!1;r.fold(()=>Qd(e,o.toRange()),c=>Gm(i,e.getBody()).filter(d=>d.isEqual(o)).fold(()=>Qd(e,o.toRange()),d=>DU(n,e,c)))},Ip=(e,n,o,r)=>{const i=e.selection.getRng(),c=Be.fromRangeStart(i),d=e.getBody();if(!n&&EU(r,c)){const g=kU(d,o,c);return eN(e,n,g),!0}else if(n&&TU(r,c)){const g=j3(d,o,c);return eN(e,n,g),!0}else return!1},K3=(e,n,o)=>N.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>N.from(e.dom.getParent(r,"table")).map(i=>o(e,n,i,r))).getOr(!1),tN=(e,n)=>K3(e,n,OU),SC=(e,n)=>K3(e,n,Ip),MU=e=>{const n=Eh.exact(e,0,e,0);return o7(n)},Y3=(e,n,o)=>o.fold(N.none,N.none,(r,i)=>ZB(i).map(c=>MU(c)),r=>e.mode.isReadOnly()||!RU(r)?N.none():(e.execCommand("mceTableInsertRowAfter"),X3(e,n,r))),RU=e=>Nu(e,dr("table")).exists(Sd),X3=(e,n,o)=>Y3(e,n,lU(o,J3)),nN=(e,n,o)=>Y3(e,n,cU(o,J3)),J3=e=>Sd(e)||xb(e,oN),oN=e=>Tu(e)&&Sd(e),Q3=(e,n)=>{const o=["table","li","dl"],r=ne.fromDom(e.getBody()),i=g=>{const h=ao(g);return Un(g,r)||_t(o,h)},c=e.selection.getRng(),d=ne.fromDom(n?c.endContainer:c.startContainer);return aU(d,i).map(g=>(VP(g,i).each(A=>{e.model.table.clearSelectedCells(A.dom)}),e.selection.collapse(!n),(n?X3:nN)(e,i,g).each(A=>{e.selection.setRng(A)}),!0)).getOr(!1)},sN=(e,n,o)=>{const r=no.os.isMacOS()||no.os.isiOS();u0([{keyCode:Mt.RIGHT,action:un(MP,e,!0)},{keyCode:Mt.LEFT,action:un(MP,e,!1)},{keyCode:Mt.UP,action:un(RP,e,!1)},{keyCode:Mt.DOWN,action:un(RP,e,!0)},...r?[{keyCode:Mt.UP,action:un(vC,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Mt.DOWN,action:un(vC,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Mt.RIGHT,action:un(tN,e,!0)},{keyCode:Mt.LEFT,action:un(tN,e,!1)},{keyCode:Mt.UP,action:un(SC,e,!1)},{keyCode:Mt.DOWN,action:un(SC,e,!0)},{keyCode:Mt.UP,action:un(SC,e,!1)},{keyCode:Mt.UP,action:un($3,e,!1)},{keyCode:Mt.DOWN,action:un($3,e,!0)},{keyCode:Mt.RIGHT,action:un(FP,e,!0)},{keyCode:Mt.LEFT,action:un(FP,e,!1)},{keyCode:Mt.UP,action:un(_P,e,!1)},{keyCode:Mt.DOWN,action:un(_P,e,!0)},{keyCode:Mt.RIGHT,action:un(oP,e,n,!0)},{keyCode:Mt.LEFT,action:un(oP,e,n,!1)},{keyCode:Mt.RIGHT,ctrlKey:!r,altKey:r,action:un(oz,e,n)},{keyCode:Mt.LEFT,ctrlKey:!r,altKey:r,action:un(sz,e,n)},{keyCode:Mt.UP,action:un(NP,e,!1)},{keyCode:Mt.DOWN,action:un(NP,e,!0)}],o).each(i=>{o.preventDefault()})},PU=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||sN(e,n,o)})},au=(e,n)=>({container:e,offset:n}),xC=Co.DOM,Bp=e=>n=>e===n?-1:0,h0=e=>n=>e.isBlock(n)||_t(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",Pg=(e,n,o)=>{if(at(e)&&n>=0)return N.some(au(e,n));{const r=zu(xC);return N.from(r.backwards(e,n,Bp(e),o)).map(i=>au(i.container,i.container.data.length))}},q3=(e,n,o)=>{if(at(e)&&n>=e.length)return N.some(au(e,n));{const r=zu(xC);return N.from(r.forwards(e,n,Bp(e),o)).map(i=>au(i.container,0))}},wC=(e,n,o)=>{if(!at(e))return N.none();const r=e.data;if(n>=0&&n<=r.length)return N.some(au(e,n));{const i=zu(xC);return N.from(i.backwards(e,n,Bp(e),o)).bind(c=>{const d=c.container.data;return wC(c.container,n+d.length,o)})}},eT=(e,n,o)=>{if(!at(e))return N.none();const r=e.data;if(n<=r.length)return N.some(au(e,n));{const i=zu(xC);return N.from(i.forwards(e,n,Bp(e),o)).bind(c=>eT(c.container,n-r.length,o))}},Lp=(e,n,o,r,i)=>{const c=zu(e,h0(e));return N.from(c.backwards(n,o,r,i))},NU=e=>e.collapsed&&at(e.startContainer),IU=e=>Oi(e.toString().replace(/\u00A0/g," ")),qf=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,tT=(e,n)=>e.substring(n.length),rN=(e,n,o,r=!1)=>{let i;const c=o.charAt(0);for(i=n-1;i>=0;i--){const d=e.charAt(i);if(!r&&qf(d))return N.none();if(c===d&&Ws(e,o,i,n))break}return N.some(i)},Ng=(e,n,o,r=!1)=>{if(!NU(n))return N.none();const i={text:"",offset:0},c=(g,h,y)=>(i.text=y+i.text,i.offset+=h,rN(i.text,i.offset,o,r).getOr(h)),d=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return Lp(e,n.startContainer,n.startOffset,c,d).bind(g=>{const h=n.cloneRange();if(h.setStart(g.container,g.offset),h.setEnd(n.endContainer,n.endOffset),h.collapsed)return N.none();const y=IU(h);return y.lastIndexOf(o)!==0?N.none():N.some({text:tT(y,o),range:h,trigger:o})})},aN=e=>e.nodeType===vd,nT=e=>e.nodeType===ca,oT=e=>{if(aN(e))return au(e,e.data.length);{const n=e.childNodes;return n.length>0?oT(n[n.length-1]):au(e,n.length)}},sT=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?sT(o[n],0):o.length>0&&nT(e)&&o.length===n?oT(o[o.length-1]):au(e,n)},BU=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return Lp(e,n.container,n.offset,(i,c)=>c===0?-1:c,r).filter(i=>{const c=i.container.data.charAt(i.offset-1);return!qf(c)}).isSome()},iN=e=>n=>{const o=sT(n.startContainer,n.startOffset);return!BU(e,o)},LU=(e,n,o)=>Lo(o.triggers,r=>Ng(e,n,r)),FU=(e,n)=>{const o=n(),r=e.selection.getRng();return LU(e.dom,r,o).bind(i=>lN(e,n,i))},lN=(e,n,o,r={})=>{var i;const c=n(),g=(i=e.selection.getRng().startContainer.nodeValue)!==null&&i!==void 0?i:"",h=Ht(c.lookupByTrigger(o.trigger),A=>o.text.length>=A.minChars&&A.matches.getOrThunk(()=>iN(e.dom))(o.range,g,o.text));if(h.length===0)return N.none();const y=Promise.all(Ot(h,A=>A.fetch(o.text,A.maxResults,r).then(R=>({matchText:o.text,items:R,columns:A.columns,onAction:A.onAction,highlightOn:A.highlightOn}))));return N.some({lookupData:y,context:o})};var iu;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(iu||(iu={}));const p0=(e,n,o)=>e.stype===iu.Error?n(e.serror):o(e.svalue),_U=e=>{const n=[],o=[];return ke(e,r=>{p0(r,i=>o.push(i),i=>n.push(i))}),{values:n,errors:o}},cN=(e,n)=>e.stype===iu.Error?{stype:iu.Error,serror:n(e.serror)}:e,$U=(e,n)=>e.stype===iu.Value?{stype:iu.Value,svalue:n(e.svalue)}:e,HU=(e,n)=>e.stype===iu.Value?n(e.svalue):e,VU=(e,n)=>e.stype===iu.Error?n(e.serror):e,uN=e=>({stype:iu.Value,svalue:e}),dN=e=>({stype:iu.Error,serror:e}),Na={fromResult:e=>e.fold(dN,uN),toResult:e=>p0(e,wr.error,wr.value),svalue:uN,partition:_U,serror:dN,bind:HU,bindError:VU,map:$U,mapError:cN,fold:p0},fN=e=>we(e)&&Yt(e).length>100?" removed due to size":JSON.stringify(e,null,2),zU=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Ye("... (only showing first ten failures)")}]):e;return Ot(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},mN=(e,n)=>Na.serror([{path:e,getErrorInfo:n}]),gN=(e,n,o)=>mN(e,()=>'Could not find valid *required* value for "'+n+'" in '+fN(o)),UU=(e,n)=>mN(e,Ye(n)),v0=e=>{const n=(r,i)=>Na.bindError(e(i),c=>UU(r,c)),o=Ye("val");return{extract:n,toString:o}},Ia=v0(Na.svalue),ZU=Ye(Ia),Fp=(e,n)=>v0(o=>{const r=typeof o;return e(o)?Na.svalue(o):Na.serror(`Expected type: ${n} but got: ${r}`)}),Ig=Fp(St,"number"),rT=Fp(ee,"string"),di=Fp(Tt,"function"),Bg=()=>({tag:"required",process:{}}),hN=e=>({tag:"defaultedThunk",process:e}),pN=e=>hN(Ye(e)),vN=()=>({tag:"option",process:{}}),WU=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),aT=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},iT=(e,n)=>e.length>0?Na.svalue(Us(n,yu.apply(void 0,e))):Na.svalue(n),EC=e=>x(Na.serror,jr)(e),bN={consolidateObj:(e,n)=>{const o=Na.partition(e);return o.errors.length>0?EC(o.errors):iT(o.values,n)},consolidateArr:e=>{const n=Na.partition(e);return n.errors.length>0?EC(n.errors):Na.svalue(n.values)}},lu=(e,n,o,r)=>Fo(n,o).fold(()=>gN(e,o,n),r),TC=(e,n,o,r)=>{const i=Fo(e,n).getOrThunk(()=>o(e));return r(i)},jU=(e,n,o)=>o(Fo(e,n)),AC=(e,n,o,r)=>{const i=Fo(e,n).map(c=>c===!0?o(e):c);return r(i)},lT=(e,n,o,r,i)=>{const c=g=>i.extract(n.concat([r]),g),d=g=>g.fold(()=>Na.svalue(N.none()),h=>{const y=i.extract(n.concat([r]),h);return Na.map(y,N.some)});switch(e.tag){case"required":return lu(n,o,r,c);case"defaultedThunk":return TC(o,r,e.process,c);case"option":return jU(o,r,d);case"defaultedOptionThunk":return AC(o,r,e.process,d);case"mergeWithThunk":return TC(o,r,Ye({}),g=>{const h=Us(e.process(o),g);return c(h)})}},yN=(e,n,o)=>{const r={},i=[];for(const c of o)aT(c,(d,g,h,y)=>{const A=lT(h,e,n,d,y);Na.fold(A,M=>{i.push(...M)},M=>{r[g]=M})},(d,g)=>{r[d]=g(n)});return i.length>0?Na.serror(i):Na.svalue(r)},CN=e=>({extract:(r,i)=>yN(r,i,e),toString:()=>`obj{
`+Ot(e,i=>aT(i,(c,d,g,h)=>c+" -> "+h.toString(),(c,d)=>"state("+c+")")).join(`
`)+"}"}),SN=e=>({extract:(r,i)=>{const c=Ot(i,(d,g)=>e.extract(r.concat(["["+g+"]"]),d));return bN.consolidateArr(c)},toString:()=>"array("+e.toString()+")"}),GU=(e,n,o)=>{const r=n.extract([e],o);return Na.mapError(r,i=>({input:o,errors:i}))},KU=(e,n,o)=>Na.toResult(GU(e,n,o)),YU=e=>`Errors: 
`+zU(e.errors).join(`
`)+`

Input object: `+fN(e.input),OC=WU,xN=(e,n)=>OC(e,e,Bg(),n),cT=e=>xN(e,rT),wN=e=>xN(e,di),XU=(e,n)=>OC(e,e,vN(),n),JU=e=>XU(e,di),EN=(e,n)=>OC(e,e,pN(n),ZU()),kC=(e,n,o)=>OC(e,e,pN(n),o),DC=(e,n)=>kC(e,n,Ig),TN=(e,n,o)=>kC(e,n,SN(o)),uT=cT("type"),AN=wN("fetch"),ON=wN("onAction"),dT=e=>EN("columns",e),kN=CN([uT,cT("trigger"),DC("minChars",1),dT(1),DC("maxResults",10),JU("matches"),AN,ON,TN("highlightOn",[],rT)]),DN=e=>KU("Autocompleter",kN,e),MN=()=>{const e={},n={},o={},r={},i={},c={},d={},g={},h={},y=(_,Z)=>(V,G)=>{_[V.toLowerCase()]={...G,type:Z}},A=(_,Z)=>(V,G)=>{_[V.toLowerCase()]={type:Z,...G}},M=(_,Z)=>r[_.toLowerCase()]=Z,R=(_,Z)=>d[_.toLowerCase()]=Z;return{addButton:y(e,"button"),addGroupToolbarButton:y(e,"grouptoolbarbutton"),addToggleButton:y(e,"togglebutton"),addMenuButton:y(e,"menubutton"),addSplitButton:y(e,"splitbutton"),addMenuItem:y(n,"menuitem"),addNestedMenuItem:y(n,"nestedmenuitem"),addToggleMenuItem:y(n,"togglemenuitem"),addAutocompleter:y(o,"autocompleter"),addContextMenu:y(i,"contextmenu"),addContextToolbar:y(c,"contexttoolbar"),addContextForm:A(c,"contextform"),addSidebar:y(g,"sidebar"),addView:y(h,"views"),addIcon:M,addContext:R,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:i,contextToolbars:c,sidebars:g,views:h,contexts:d})}},QU=e=>{const n=e.ui.registry.getAll().popups,o=yt(n,d=>DN(d).fold(g=>{throw new Error(YU(g))},Xn)),r=Wi(fd(o,d=>d.trigger)),i=pu(o);return{dataset:o,triggers:r,lookupByTrigger:d=>Ht(i,g=>g.trigger===d)}},qU=(e,n)=>{const o=yl(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const i=r.which;i===8?o.throttle():i===27?(o.cancel(),n.cancelIfNecessary()):(i===38||i===40)&&o.cancel()},!0),e.on("remove",o.cancel)},MC=e=>{const n=Gr(),o=is(!1),r=n.isSet,i=()=>{r()&&(nL(e),o.set(!1),n.clear())},c=M=>{r()||n.set({trigger:M.trigger,matchLength:M.text.length})},d=Vo(()=>QU(e)),g=M=>n.get().map(R=>Ng(e.dom,e.selection.getRng(),R.trigger,!0).bind(_=>lN(e,d,_,M))).getOrThunk(()=>FU(e,d)),h=M=>{g(M).fold(i,R=>{c(R.context),R.lookupData.then(_=>{n.get().map(Z=>{const V=R.context;Z.trigger===V.trigger&&(n.set({...Z,matchLength:V.text.length}),o.get()?(tw(e,{range:V.range}),Tc(e,{lookupData:_})):(o.set(!0),tw(e,{range:V.range}),Bd(e,{lookupData:_})))})})})},y=(M,R)=>{const _=M.compareBoundaryPoints(window.Range.START_TO_START,R),Z=M.compareBoundaryPoints(window.Range.END_TO_END,R);return _>=0&&Z<=0},A=()=>n.get().bind(({trigger:M})=>{const R=e.selection.getRng();return Ng(e.dom,R,M,o.get()).filter(({range:_})=>y(R,_)).map(({range:_})=>_)});e.addCommand("mceAutocompleterReload",(M,R)=>{const _=we(R)?R.fetchOptions:{};h(_)}),e.addCommand("mceAutocompleterClose",i),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{A().each(M=>{tw(e,{range:M})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>A().isSome()),qU(e,{cancelIfNecessary:i,load:h})},b0=la().browser.isSafari(),RN=e=>kf(ne.fromDom(e)),PN=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},RC=(e,n)=>N.from(e.getParent(n.container(),"details")),NN=(e,n)=>RC(e,n).isSome(),IN=(e,n)=>{const o=N.from(e.getParent(n.startContainer,"details")),r=N.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const i=o.bind(c=>N.from(e.select("summary",c)[0]));return N.some({startSummary:i,startDetails:o,endDetails:r})}else return N.none()},BN=(e,n)=>na(n).exists(o=>o.isEqual(e)),eZ=(e,n)=>Di(n).exists(o=>ws(o.getNode())&&li(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),tZ=(e,n)=>n.startSummary.exists(o=>BN(e,o)),nZ=(e,n)=>n.startSummary.exists(o=>eZ(e,o)),oZ=(e,n)=>n.startDetails.exists(o=>li(o,e).forall(r=>n.startSummary.exists(i=>!i.contains(e.container())&&i.contains(r.container())))),sZ=(e,n,o)=>o.startDetails.exists(r=>rr(e,n).forall(i=>!r.contains(i.container()))),fT=(e,n)=>{const o=n.getNode();Je(o)||e.selection.setCursorLocation(o,n.offset())},rZ=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const i=e.dom.select("summary",r)[0];i&&(o?na(i):Di(i)).each(d=>fT(e,d))}else fT(e,n)},aZ=(e,n)=>{const o=h=>h.contains(e.startContainer),r=h=>h.contains(e.endContainer),i=n.startSummary.exists(o),c=n.startSummary.exists(r),d=n.startDetails.forall(h=>n.endDetails.forall(y=>h!==y));return(i||c)&&!(i&&c)||d},LN=(e,n,o)=>{const{dom:r,selection:i}=e,c=e.getBody();if(o==="character"){const d=Be.fromRangeStart(i.getRng()),g=r.getParent(d.container(),r.isBlock),h=RC(r,d),y=g&&r.isEmpty(g),A=te(g==null?void 0:g.previousSibling),M=te(g==null?void 0:g.nextSibling);return y&&(n?M:A)&&Oc(!n,c,d).exists(Z=>NN(r,Z)&&!Ct(h,RC(r,Z)))?!0:Oc(n,c,d).fold(Ie,R=>{const _=RC(r,R);if(NN(r,R)&&!Ct(h,_)){if(n||rZ(e,R,!1),g&&y){if(n&&A)return!0;if(!n&&M)return!0;rZ(e,R,n),e.dom.remove(g)}return!0}else return!1})}else return!1},iZ=(e,n,o,r)=>{const c=e.selection.getRng(),d=Be.fromRangeStart(c),g=e.getBody();return r==="selection"?aZ(c,n):o?nZ(d,n)||sZ(g,d,n):tZ(d,n)||oZ(d,n)},lZ=(e,n,o)=>IN(e.dom,e.selection.getRng()).fold(()=>LN(e,n,o),r=>iZ(e,r,n,o)||LN(e,n,o)),cZ=(e,n,o)=>{const r=e.selection,i=r.getNode(),c=r.getRng(),d=Be.fromRangeStart(c);return Rb(i)?(o==="selection"&&PN(c,i)||bE(n,d,i)?RN(i):e.undoManager.transact(()=>{const g=r.getSel();let{anchorNode:h,anchorOffset:y,focusNode:A,focusOffset:M}=g??{};const R=()=>{Ce(h)&&Ce(y)&&Ce(A)&&Ce(M)&&(g==null||g.setBaseAndExtent(h,y,A,M))},_=()=>{h=g==null?void 0:g.anchorNode,y=g==null?void 0:g.anchorOffset,A=g==null?void 0:g.focusNode,M=g==null?void 0:g.focusOffset},Z=(G,oe)=>{ke(G.childNodes,ue=>{Xm(ue)&&oe.appendChild(ue)})},V=e.dom.create("span",{"data-mce-bogus":"1"});Z(i,V),i.appendChild(V),R(),(o==="word"||o==="line")&&(g==null||g.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&PN(r.getRng(),V)?RN(i):(e.execCommand(n?"ForwardDelete":"Delete"),_(),Z(V,i),R()),e.dom.remove(V)}),!0):!1},Lg=(e,n,o)=>lZ(e,n,o)||b0&&cZ(e,n,o)?N.some(et):N.none(),FN=e=>(n,o,r={})=>{const i=n.getBody(),c={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:i,currentTarget:i,eventPhase:Event.AT_TARGET,originalTarget:i,explicitOriginalTarget:i,isTrusted:!1,srcElement:i,cancelable:!1,preventDefault:et,inputType:o},d=Dh(new InputEvent(e));return n.dispatch(e,{...d,...c,...r})},_p=FN("input"),PC=FN("beforeinput"),_N=la(),$N=_N.os,HN=$N.isMacOS()||$N.isiOS(),uZ=_N.browser.isFirefox(),dZ=(e,n,o)=>{const r=o.keyCode===Mt.BACKSPACE?"deleteContentBackward":"deleteContentForward",i=e.selection.isCollapsed(),c=i?"character":"selection",d=g=>i?g?"word":"line":"selection";LP([{keyCode:Mt.BACKSPACE,action:un(yP,e)},{keyCode:Mt.BACKSPACE,action:un(oC,e,!1)},{keyCode:Mt.DELETE,action:un(oC,e,!0)},{keyCode:Mt.BACKSPACE,action:un(Ap,e,!1)},{keyCode:Mt.DELETE,action:un(Ap,e,!0)},{keyCode:Mt.BACKSPACE,action:un(D3,e,n,!1)},{keyCode:Mt.DELETE,action:un(D3,e,n,!0)},{keyCode:Mt.BACKSPACE,action:un(u2,e,!1)},{keyCode:Mt.DELETE,action:un(u2,e,!0)},{keyCode:Mt.BACKSPACE,action:un(Lg,e,!1,c)},{keyCode:Mt.DELETE,action:un(Lg,e,!0,c)},...HN?[{keyCode:Mt.BACKSPACE,altKey:!0,action:un(Lg,e,!1,d(!0))},{keyCode:Mt.DELETE,altKey:!0,action:un(Lg,e,!0,d(!0))},{keyCode:Mt.BACKSPACE,metaKey:!0,action:un(Lg,e,!1,d(!1))}]:[{keyCode:Mt.BACKSPACE,ctrlKey:!0,action:un(Lg,e,!1,d(!0))},{keyCode:Mt.DELETE,ctrlKey:!0,action:un(Lg,e,!0,d(!0))}],{keyCode:Mt.BACKSPACE,action:un(aC,e,!1)},{keyCode:Mt.DELETE,action:un(aC,e,!0)},{keyCode:Mt.BACKSPACE,action:un(P3,e,!1)},{keyCode:Mt.DELETE,action:un(P3,e,!0)},{keyCode:Mt.BACKSPACE,action:un(ci,e,!1)},{keyCode:Mt.DELETE,action:un(ci,e,!0)},{keyCode:Mt.BACKSPACE,action:un(n0,e,!1)},{keyCode:Mt.DELETE,action:un(n0,e,!0)},{keyCode:Mt.BACKSPACE,action:un(R3,e,!1)},{keyCode:Mt.DELETE,action:un(R3,e,!0)},{keyCode:Mt.BACKSPACE,action:un(m3,e,!1)},{keyCode:Mt.DELETE,action:un(m3,e,!0)}],o).filter(g=>e.selection.isEditable()).each(g=>{o.preventDefault(),PC(e,r).isDefaultPrevented()||(g(),_p(e,r))})},fZ=(e,n,o)=>u0([{keyCode:Mt.BACKSPACE,action:un(BR,e)},{keyCode:Mt.DELETE,action:un(BR,e)},...HN?[{keyCode:Mt.BACKSPACE,altKey:!0,action:un(dC,e)},{keyCode:Mt.DELETE,altKey:!0,action:un(dC,e)},...o?[{keyCode:uZ?224:91,action:un(dC,e)}]:[]]:[{keyCode:Mt.BACKSPACE,ctrlKey:!0,action:un(dC,e)},{keyCode:Mt.DELETE,ctrlKey:!0,action:un(dC,e)}]],n),mZ=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===Mt.BACKSPACE,r.isDefaultPrevented()||dZ(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||fZ(e,r,o),o=!1})},gZ=e=>{for(;e;){if(Bt(e)||at(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Fg=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const c=gZ(n.firstChild);c&&/^(UL|OL|DL)$/.test(c.nodeName)&&n.insertBefore(o.doc.createTextNode(zo),n.firstChild)}const i=o.createRng();if(n.normalize(),n.hasChildNodes()){const c=new _r(n,n);let d=n,g;for(;g=c.current();){if(at(g)){i.setStart(g,0),i.setEnd(g,0);break}if(r[g.nodeName.toLowerCase()]){i.setStartBefore(g),i.setEndBefore(g);break}d=g,g=c.next()}g||(i.setStart(d,0),i.setEnd(d,0))}else ws(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)):(i.setStart(n,0),i.setEnd(n,0));e.selection.setRng(i),ng(e,i)},y0=(e,n)=>{const o=e.getRoot();let r,i=n;for(;i!==o&&i&&e.getContentEditable(i)!=="false";){if(e.getContentEditable(i)==="true"){r=i;break}i=i.parentNode}return i!==o?r:o},mT=e=>N.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),hZ=e=>mT(e).fold(Ye(""),n=>n.nodeName.toUpperCase()),NC=e=>mT(e).filter(n=>Od(ne.fromDom(n))).isSome(),gT=e=>{e.innerHTML='<br data-mce-bogus="1">'},pZ=(e,n,o)=>{const r=e.dom;N.from(o.style).map(r.parseStyle).each(h=>{const A={...YS(ne.fromDom(n)),...h};r.setStyles(n,A)});const i=N.from(o.class).map(h=>h.split(/\s+/)),c=N.from(n.className).map(h=>Ht(h.split(/\s+/),y=>y!==""));Zs(i,c,(h,y)=>{const A=Ht(y,R=>!_t(h,R)),M=[...h,...A];r.setAttrib(n,"class",M.join(" "))});const d=["style","class"],g=bi(o,(h,y)=>!_t(d,y));r.setAttribs(n,g)},$p=(e,n)=>{if(Ma(e).toLowerCase()===n.tagName.toLowerCase()){const r=Y1(e);pZ(e,n,r)}},IC=(e,n,o,r,i=!0,c,d)=>{const g=e.dom,h=e.schema,y=Ma(e),A=o?o.nodeName.toUpperCase():"";let M=n;const R=h.getTextInlineElements();let _;c||A==="TABLE"||A==="HR"?_=g.create(c||y,d||{}):_=o.cloneNode(!1);let Z=_;if(!i)g.setAttrib(_,"style",null),g.setAttrib(_,"class",null);else do if(R[M.nodeName]){if(Il(M)||Bl(M))continue;const V=M.cloneNode(!1);g.setAttrib(V,"id",""),_.hasChildNodes()?(V.appendChild(_.firstChild),_.appendChild(V)):(Z=V,_.appendChild(V))}while((M=M.parentNode)&&M!==r);return $p(e,_),gT(Z),_},vZ=(e,n)=>e.dom.getParent(n,Gs),bZ=(e,n,o)=>{let r=n;for(;r&&r!==e&&te(r.nextSibling);){const i=r.parentElement;if(!i||!o(i))return Gs(i);r=i}return!1},YY=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Ma(e)&&e.dom.isEmpty(o)&&bZ(e.getBody(),o,r=>nn(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),yZ=(e,n,o)=>{var r,i,c;const d=n(Ma(e)),g=vZ(e,o);g&&(e.dom.insertAfter(d,g),Fg(e,d),((c=(i=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||i===void 0?void 0:i.length)!==null&&c!==void 0?c:0)>1&&e.dom.remove(o))},CZ=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,SZ=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},Hp=(e,n)=>{const o=e==null?void 0:e.parentNode;return Ce(o)&&o.nodeName===n},VN=e=>Ce(e)&&/^(OL|UL|LI)$/.test(e.nodeName),hT=e=>Ce(e)&&/^(LI|DT|DD)$/.test(e.nodeName),xZ=e=>VN(e)&&VN(e.parentNode),C0=e=>{const n=e.parentNode;return hT(n)?n:e},cu=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Bt(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},Qa=e=>Ko(fd(YS(ne.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),zN=(e,n,o,r,i)=>{const c=e.dom,d=e.selection.getRng(),g=o.parentNode;if(o===e.getBody()||!g)return;xZ(o)&&(i="LI");const h=hT(r)?Qa(r):void 0;let y=hT(r)&&h?n(i,{style:Qa(r)}):n(i);if(cu(o,r,!0)&&cu(o,r,!1))if(Hp(o,"LI")){const A=C0(o);c.insertAfter(y,A),SZ(o)?c.remove(A):c.remove(o)}else c.replace(y,o);else if(cu(o,r,!0))Hp(o,"LI")?(c.insertAfter(y,C0(o)),y.appendChild(c.doc.createTextNode(" ")),y.appendChild(o)):g.insertBefore(y,o),c.remove(r);else if(cu(o,r,!1))c.insertAfter(y,C0(o)),c.remove(r);else{o=C0(o);const A=d.cloneRange();A.setStartAfter(r),A.setEndAfter(o);const M=A.extractContents();if(i==="LI"&&CZ(M,"LI")){const R=Ht(Ot(y.children,ne.fromDom),An(dr("br")));y=M.firstChild,c.insertAfter(M,o),ke(R,_=>Tm(ne.fromDom(y),_)),h&&y.setAttribute("style",h)}else c.insertAfter(M,o),c.insertAfter(y,o);c.remove(r)}Fg(e,y)},S0=e=>{ke(ox(ne.fromDom(e),Ea),n=>{const o=n.dom;o.nodeValue=Oi(o.data)})},em=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},sd=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),_g=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,pT=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,x0=(e,n)=>Ce(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",UN=(e,n,o)=>{var r;const i=[];if(!o)return;let c=o;for(;c=c.firstChild;){if(e.isBlock(c))return;Bt(c)&&!n[c.nodeName.toLowerCase()]&&i.push(c)}let d=i.length;for(;d--;)c=i[d],(!c.hasChildNodes()||c.firstChild===c.lastChild&&((r=c.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||sd(e,c))&&e.remove(c)},BC=(e,n,o)=>at(n)?e?o===1&&n.data.charAt(o-1)===Ar?0:o:o===n.data.length-1&&n.data.charAt(o)===Ar?n.data.length:o:o,wZ=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,BC(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,BC(!1,e.endContainer,e.endOffset)),n},EZ=e=>{let n=e;do at(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},ZN=(e,n,o,r,i)=>{var c,d;const g=e.dom,h=(c=y0(g,r))!==null&&c!==void 0?c:g.getRoot();let y=g.getParent(r,g.isBlock);if(!y||!x0(g,y)){if(y=y||h,!y.hasChildNodes()){const _=g.create(n);return $p(e,_),y.appendChild(_),o.setStart(_,0),o.setEnd(_,0),_}let A=r;for(;A&&A.parentNode!==y;)A=A.parentNode;let M;for(;A&&!g.isBlock(A);)M=A,A=A.previousSibling;const R=(d=M==null?void 0:M.parentElement)===null||d===void 0?void 0:d.nodeName;if(M&&R&&e.schema.isValidChild(R,n.toLowerCase())){const _=M.parentNode,Z=g.create(n);for($p(e,Z),_.insertBefore(Z,M),A=M;A&&!g.isBlock(A);){const V=A.nextSibling;Z.appendChild(A),A=V}o.setStart(r,i),o.setEnd(r,i)}}return r},WN=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Bt(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},jN=(e,n)=>{const o=py(e);return dt(n)?!1:ee(o)?_t(ut.explode(o),n.nodeName.toLowerCase()):o},TZ={insert:(e,n)=>{let o,r,i,c,d=!1;const g=e.dom,h=e.schema,y=h.getNonEmptyElements(),A=e.selection.getRng(),M=Ma(e),R=ne.fromDom(A.startContainer),_=Mu(R,A.startOffset),Z=_.exists(je=>Tu(je)&&!Sd(je)),V=A.collapsed&&Z,G=(je,Et)=>IC(e,o,tt,Ue,Zu(e),je,Et),oe=je=>{const Et=BC(je,o,r);if(at(o)&&(je?Et>0:Et<o.data.length))return!1;if((o.parentNode===tt||o===tt)&&d&&!je||je&&Bt(o)&&o===tt.firstChild)return!0;if(_g(o,"TABLE")||_g(o,"HR"))return pT(o,"BR")?!je:d&&!je||!d&&je;const zt=new _r(o,tt);at(o)&&(je&&Et===0?zt.prev():!je&&Et===o.data.length&&zt.next());let Rn;for(;Rn=zt.current();){if(Bt(Rn)){if(!Rn.getAttribute("data-mce-bogus")){const Nn=Rn.nodeName.toLowerCase();if(y[Nn]&&Nn!=="br")return!1}}else if(at(Rn)&&!_s(Rn.data))return!1;je?zt.prev():zt.next()}return!0},ue=()=>{let je;return/^(H[1-6]|PRE|FIGURE)$/.test(i)&&At!=="HGROUP"?je=G(M):je=G(),jN(e,c)&&x0(g,c)&&g.isEmpty(tt,void 0,{includeZwsp:!0})?je=g.split(c,tt):g.insertAfter(je,tt),Fg(e,je),je};jy(g,A).each(je=>{A.setStart(je.startContainer,je.startOffset),A.setEnd(je.endContainer,je.endOffset)}),o=A.startContainer,r=A.startOffset;const ge=!!(n&&n.shiftKey),Se=!!(n&&n.ctrlKey);Bt(o)&&o.hasChildNodes()&&!V&&(d=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,d&&at(o)?r=o.data.length:r=0);const Ue=y0(g,o);if(!Ue||em(e,o))return;ge||(o=ZN(e,M,A,o,r));let tt=g.getParent(o,g.isBlock)||g.getRoot();c=Ce(tt==null?void 0:tt.parentNode)?g.getParent(tt.parentNode,g.isBlock):null,i=tt?tt.nodeName.toUpperCase():"";const At=c?c.nodeName.toUpperCase():"";if(At==="LI"&&!Se){const je=c;tt=je,c=je.parentNode,i=At}if(Bt(c)&&YY(e,ge,tt))return yZ(e,G,tt);if(/^(LI|DT|DD)$/.test(i)&&Bt(c)&&g.isEmpty(tt)){zN(e,G,c,tt,M);return}if(!V&&(tt===e.getBody()||!x0(g,tt)))return;const Ne=tt.parentNode;let Ae;if(V)Ae=G(M),_.fold(()=>{Fs(R,ne.fromDom(Ae))},je=>{Ta(je,ne.fromDom(Ae))}),e.selection.setCursorLocation(Ae,0);else if(or(tt))Ae=Xb(tt),g.isEmpty(tt)&&gT(tt),$p(e,Ae),Fg(e,Ae);else if(oe(!1))Ae=ue();else if(oe(!0)&&Ne){const je=Be.fromRangeStart(A),Et=qD(je),zt=ne.fromDom(tt),Nn=qy(zt,je,e.schema)?s5(zt,je,e.schema).bind(So=>N.from(So.getNode())):N.none();Ae=Ne.insertBefore(G(),tt);const co=_g(tt,"HR")||Et?Ae:Nn.getOr(tt);Fg(e,co)}else{const je=wZ(A).cloneRange();je.setEndAfter(tt);const Et=je.extractContents();S0(Et),EZ(Et),Ae=Et.firstChild,g.insertAfter(Et,tt),UN(g,y,Ae),WN(g,tt),g.isEmpty(tt)&&gT(tt),Ae.normalize(),g.isEmpty(Ae)?(g.remove(Ae),ue()):($p(e,Ae),Fg(e,Ae))}g.setAttrib(Ae,"id",""),e.dispatch("NewBlock",{newBlock:Ae})},fakeEventName:"insertParagraph"},JY=(e,n,o)=>{const r=new _r(n,o);let i;const c=e.getNonEmptyElements();for(;i=r.next();)if(c[i.nodeName.toLowerCase()]||at(i)&&i.length>0)return!0;return!1},Yl=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),ng(e,r)},AZ=(e,n)=>{const o=e.selection,r=e.dom,i=o.getRng();let c,d=!1;jy(r,i).each(_=>{i.setStart(_.startContainer,_.startOffset),i.setEnd(_.endContainer,_.endOffset)});let g=i.startOffset,h=i.startContainer;if(Bt(h)&&h.hasChildNodes()){const _=g>h.childNodes.length-1;h=h.childNodes[Math.min(g,h.childNodes.length-1)]||h,_&&at(h)?g=h.data.length:g=0}let y=r.getParent(h,r.isBlock);const A=y&&y.parentNode?r.getParent(y.parentNode,r.isBlock):null,M=A?A.nodeName.toUpperCase():"",R=!!(n&&n.ctrlKey);M==="LI"&&!R&&(y=A),at(h)&&g>=h.data.length&&(JY(e.schema,h,y||r.getRoot())||(c=r.create("br"),i.insertNode(c),i.setStartAfter(c),i.setEndAfter(c),d=!0)),c=r.create("br"),Uu(r,i,c),Yl(e,c,d),e.undoManager.add()},OZ=(e,n)=>{const o=ne.fromTag("br");Ta(ne.fromDom(n),o),e.undoManager.add()},$g=(e,n)=>{kZ(e.getBody(),n)||Kc(ne.fromDom(n),ne.fromTag("br"));const o=ne.fromTag("br");Kc(ne.fromDom(n),o),Yl(e,o.dom,!1),e.undoManager.add()},GN=e=>ws(e.getNode()),kZ=(e,n)=>GN(Be.after(n))?!0:rr(e,Be.after(n)).map(o=>ws(o.getNode())).getOr(!1),w0=e=>e&&e.nodeName==="A"&&"href"in e,vT=e=>e.fold(Ie,w0,w0,Ie),KN=e=>{const n=ht(lg,e),o=Be.fromRangeStart(e.selection.getRng());return nd(n,e.getBody(),o).filter(vT)},YN=(e,n)=>{n.fold(et,ht(OZ,e),ht($g,e),et)},bT={insert:(e,n)=>{const o=KN(e);o.isSome()?o.each(ht(YN,e)):AZ(e,n)},fakeEventName:"insertLineBreak"},yT=(e,n)=>mT(e).filter(o=>n.length>0&&Si(ne.fromDom(o),n)).isSome(),CT=e=>yT(e,dL(e)),MZ=e=>yT(e,Ld(e)),il=xr.generate([{br:[]},{block:[]},{none:[]}]),RZ=(e,n)=>MZ(e),XN=e=>(n,o)=>NC(n)===e,JN=(e,n)=>(o,r)=>hZ(o)===e.toUpperCase()===n,PZ=e=>{const n=y0(e.dom,e.selection.getStart());return dt(n)},E0=e=>JN("pre",e),NZ=()=>JN("summary",!0),T0=e=>(n,o)=>XK(n)===e,IZ=(e,n)=>CT(e),_c=(e,n)=>n,ST=e=>{const n=Ma(e),o=y0(e.dom,e.selection.getStart());return Ce(o)&&e.schema.isValidChild(o.nodeName,n)},BZ=e=>{const n=e.selection.getRng(),o=ne.fromDom(n.startContainer),i=Mu(o,n.startOffset).map(c=>Tu(c)&&!Sd(c));return n.collapsed&&i.getOr(!0)},Xl=(e,n)=>(o,r)=>Ko(e,(c,d)=>c&&d(o,r),!0)?N.some(n):N.none(),LZ=(e,n)=>$R([Xl([RZ],il.none()),Xl([E0(!0),PZ],il.none()),Xl([NZ()],il.br()),Xl([E0(!0),T0(!1),_c],il.br()),Xl([E0(!0),T0(!1)],il.block()),Xl([E0(!0),T0(!0),_c],il.block()),Xl([E0(!0),T0(!0)],il.br()),Xl([XN(!0),_c],il.br()),Xl([XN(!0)],il.block()),Xl([IZ],il.br()),Xl([_c],il.br()),Xl([ST],il.block()),Xl([BZ],il.block())],[e,!!(n&&n.shiftKey)]).getOr(il.none()),Vp=(e,n,o)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||E5(n),!(Ce(o)&&PC(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Ce(o)&&_p(n,e.fakeEventName)))},LC=(e,n)=>{if(e.mode.isReadOnly())return;const o=()=>Vp(bT,e,n),r=()=>Vp(TZ,e,n),i=LZ(e,n);switch(tn(e)){case"linebreak":i.fold(o,o,et);break;case"block":i.fold(r,r,et);break;case"invert":i.fold(r,o,et);break;default:i.fold(o,r,et);break}},xT=la(),QN=xT.os.isiOS()&&xT.browser.isSafari(),wT=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),a9(e.undoManager),e.undoManager.transact(()=>{LC(e,n)}))},FZ=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(at(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},A0=e=>{let n=N.none();const o=i=>{n=N.some(i.selection.getBookmark()),i.undoManager.add()},r=(i,c)=>{i.undoManager.undo(),n.fold(et,d=>i.selection.moveToBookmark(d)),wT(i,c),n=N.none()};e.on("keydown",i=>{i.keyCode===Mt.ENTER&&(QN&&FZ(e.selection.getRng())?o(e):wT(e,i))}),e.on("keyup",i=>{i.keyCode===Mt.ENTER&&n.each(()=>r(e,i))})},FC=(e,n,o)=>{const r=no.os.isMacOS()||no.os.isiOS();u0([{keyCode:Mt.END,action:un(PP,e,!0)},{keyCode:Mt.HOME,action:un(PP,e,!1)},...r?[]:[{keyCode:Mt.HOME,action:un(vC,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Mt.END,action:un(vC,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Mt.END,action:un($P,e,!0)},{keyCode:Mt.HOME,action:un($P,e,!1)},{keyCode:Mt.END,action:un(uC,e,!0,n)},{keyCode:Mt.HOME,action:un(uC,e,!1,n)}],o).each(i=>{o.preventDefault()})},qN=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||FC(e,n,o)})},e8=e=>{e.on("input",n=>{n.isComposing||e2(e)})},t8=la(),n8=(e,n,o)=>{u0([{keyCode:Mt.PAGE_UP,action:un(uC,e,!1,n)},{keyCode:Mt.PAGE_DOWN,action:un(uC,e,!0,n)}],o)},O0=e=>e.stopImmediatePropagation(),_C=e=>e.keyCode===Mt.PAGE_UP||e.keyCode===Mt.PAGE_DOWN,zp=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",O0,!0):!o&&e.get()&&n.off("NodeChange",O0),e.set(o)},_Z=(e,n)=>{if(t8.os.isMacOS())return;const o=is(!1);e.on("keydown",r=>{_C(r)&&zp(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||n8(e,n,r),_C(r)&&o.get()&&(zp(o,e,!1),e.nodeChanged())})},ET=(e,n)=>e===n||e.contains(n),$Z=(e,n)=>!ET(e.getBody(),n.startContainer)||!ET(e.getBody(),n.endContainer)?!0:FD(e.dom,n),HZ=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||to(n.getTargetRanges(),o=>!$Z(e,o)))&&n.preventDefault()})},TT=(e,n)=>{const o=n.container(),r=n.offset();return at(o)?(o.insertData(r,e),N.some(Be(o,r+e.length))):wy(n).map(i=>{const c=ne.fromText(e);return n.isAtEnd()?Kc(i,c):Ta(i,c),Be(c.dom,e.length)})},o8=ht(TT,zo),AT=ht(TT," "),qY=(e,n,o)=>mE(e,n,o)?o8(n):AT(n),VZ=e=>n=>n.fold(o=>li(e.dom,Be.before(o)),o=>na(o),o=>Di(o),o=>rr(e.dom,Be.after(o))),zZ=(e,n,o)=>r=>mE(e,r,o)?o8(n):AT(n),s8=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},UZ=(e,n)=>e.isEditable(e.getParent(n,"summary")),ZZ=e=>{const n=Be.fromRangeStart(e.selection.getRng()),o=ne.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=ht(lg,e),i=Be.fromRangeStart(e.selection.getRng());return nd(r,e.getBody(),i).bind(VZ(o)).map(c=>()=>zZ(o,n,e.schema)(c).each(s8(e)))}else return N.none()},WZ=e=>{const n=()=>{const o=ne.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Be.fromRangeStart(e.selection.getRng());qY(o,r,e.schema).each(s8(e))};return ho(no.browser.isFirefox()&&e.selection.isEditable()&&UZ(e.dom,e.selection.getRng().startContainer),n)},jZ=(e,n)=>{LP([{keyCode:Mt.SPACEBAR,action:un(ZZ,e)},{keyCode:Mt.SPACEBAR,action:un(WZ,e)}],n).each(o=>{n.preventDefault(),PC(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),_p(e,"insertText",{data:" "}))})},OT=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||jZ(e,n)})},GZ=e=>VL(e)?[{keyCode:Mt.TAB,action:un(Q3,e,!0)},{keyCode:Mt.TAB,shiftKey:!0,action:un(Q3,e,!1)}]:[],tm=(e,n)=>{u0([...GZ(e)],n).each(o=>{n.preventDefault()})},r8=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||tm(e,n)})},kT=e=>{if(e.addShortcut("Meta+P","","mcePrint"),MC(e),td(e))return is(null);{const n=nz(e);return HZ(e),pC(e),PU(e,n),mZ(e,n),A0(e),OT(e),e8(e),r8(e),qN(e,n),_Z(e,n),n}};class a8{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",i=>{const c=n.selection.getRng(),d={startContainer:c.startContainer,startOffset:c.startOffset,endContainer:c.endContainer,endOffset:c.endOffset};(i.type==="nodechange"||!pv(d,o))&&n.dispatch("SelectionChange"),o=d}),n.on("contextmenu",()=>{Vw(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const i=n.selection.getStart(!0);i&&Py(n)&&!r.isSameElementPath(i)&&n.dom.isChildOf(i,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",i=>{!i.isDefaultPrevented()&&Py(n)&&(n.selection.getNode().nodeName==="IMG"?_l.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor,r=o.selection;let i;if(o.initialized&&r&&!OL(o)&&!Kh(o)){const c=o.getBody();i=r.getStart(!0)||c,(i.ownerDocument!==o.getDoc()||!o.dom.isChildOf(i,c))&&(i=c);const d=[];o.dom.getParent(i,g=>g===c?!0:(d.push(g),!1)),o.dispatch("NodeChange",{...n,element:i,parents:d})}}isSameElementPath(n){let o;const r=this.editor,i=Re(r.dom.getParents(n,Qe,r.getBody()));if(i.length===this.lastPath.length){for(o=i.length;o>=0&&i[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=i,!0}return this.lastPath=i,!1}}const $C="x-tinymce/html",uu=Ye($C),HC="<!-- "+$C+" -->",Jl=e=>HC+e,Hg=e=>e.replace(HC,""),DT=e=>e.indexOf(HC)!==-1,MT=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),KZ=(e,n)=>{let o="<"+e;const r=fd(n,(i,c)=>c+'="'+_o.encodeAllRaw(i)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},i8=(e,n,o)=>{const r=e.split(/\n\n/),i=KZ(n,o),c="</"+n+">",d=Ot(r,h=>h.split(/\n/).join("<br />")),g=h=>i+h+c;return d.length===1?d[0]:Ot(d,g).join("")},l8="%MCEPASTEBIN%",YZ=(e,n)=>{const{dom:o,selection:r}=e,i=e.getBody();n.set(r.getRng());const c=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},l8);no.browser.isFirefox()&&o.setStyle(c,"left",o.getStyle(i,"direction",!0)==="rtl"?65535:-65535),o.bind(c,"beforedeactivate focusin focusout",d=>{d.stopPropagation()}),c.focus(),r.select(c,!0)},XZ=(e,n)=>{const o=e.dom;if(RT(e)){let r;const i=n.get();for(;r=RT(e);)o.remove(r),o.unbind(r);i&&e.selection.setRng(i)}n.set(null)},RT=e=>e.dom.get("mcepastebin"),JZ=e=>Ce(e)&&e.id==="mcepastebin",c8=e=>{const n=e.dom,o=(d,g)=>{d.appendChild(g),n.remove(g,!0)},[r,...i]=Ht(e.getBody().childNodes,JZ);ke(i,d=>{o(r,d)});const c=n.select("div[id=mcepastebin]",r);for(let d=c.length-1;d>=0;d--){const g=n.create("div");r.insertBefore(g,c[d]),o(g,c[d])}return r?r.innerHTML:""},u8=e=>e===l8,QZ=e=>{const n=is(null);return{create:()=>YZ(e,n),remove:()=>XZ(e,n),getEl:()=>RT(e),getHtml:()=>c8(e),getLastRng:n.get}},Vg=(e,n)=>(ut.each(n,o=>{pe(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),VC=e=>{const n=ma(),o=yg({},n);let r="";const i=n.getVoidElements(),c=ut.makeMap("script noscript style textarea video audio iframe object"," "),d=n.getBlockElements(),g=h=>{const y=h.name,A=h;if(y==="br"){r+=`
`;return}if(y!=="wbr"){if(i[y]&&(r+=" "),c[y]){r+=" ";return}if(h.type===3&&(r+=h.value),!(h.name in n.getVoidElements())){let M=h.firstChild;if(M)do g(M);while(M=M.next)}d[y]&&A.next&&(r+=`
`,y==="p"&&(r+=`
`))}};return e=Vg(e,[/<!\[[^\]]+\]>/g]),g(o.parse(e)),r},PT=e=>(e=Vg(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,i)=>!r&&!i?" ":zo],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),d8=e=>{let n=0;return()=>e+n++},NT=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return ut.hasOwn(o,n)?"image/"+o[n]:"image/"+n},qZ=(e,n)=>{const o=yg({sanitize:tv(e),sandbox_iframes:lw(e),sandbox_iframes_exclusions:yy(e),convert_unsafe_embeds:Cy(e)},e.schema);o.addNodeFilter("meta",i=>{ut.each(i,c=>{c.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Vd({validate:!0},e.schema).serialize(r)},f8=(e,n)=>({content:e,cancelled:n}),eW=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),i=oL(e,r,o);return f8(i.node.innerHTML,i.isDefaultPrevented())},m8=(e,n,o)=>{const r=nw(e,n,o),i=qZ(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?eW(e,i,o):f8(i,r.isDefaultPrevented())},zC=(e,n,o)=>m8(e,n,o),UC=(e,n)=>(e.insertContent(n,{merge:Dk(e),paste:!0}),!0),Up=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),tW=(e,n)=>Up(n)&&to(Fk(e),o=>vl(n.toLowerCase(),`.${o.toLowerCase()}`)),g8=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),nW=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),oW=(e,n,o)=>!e.selection.isCollapsed()&&Up(n)?nW(e,n,o):!1,sW=(e,n,o)=>tW(e,n)?g8(e,n,o):!1,h8=(e,n)=>{ut.each([oW,sW,UC],o=>!o(e,n,UC))},rW=(e,n,o)=>{o||!Mk(e)?UC(e,n):h8(e,n)},aW=d8("mceclip"),p8=e=>{const n=yC();return Pp(n,e),Fi(n),n},Zp=(e,n,o,r,i)=>{const c=zC(e,n,o);if(!c.cancelled){const d=c.content,g=()=>rW(e,d,r);i?PC(e,"insertFromPaste",{dataTransfer:p8(d)}).isDefaultPrevented()||(g(),_p(e,"insertFromPaste")):g()}},ZC=(e,n,o,r)=>{const i=o||DT(n);Zp(e,Hg(n),i,!1,r)},WC=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),i=fa(r,Pk(e)),c=i8(i,Ma(e),Y1(e));Zp(e,c,!1,!0,o)},IT=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},ef=(e,n)=>n in e&&e[n].length>0,jC=e=>ef(e,"text/html")||ef(e,"text/plain"),v8=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Ce(o)?e.dom.encode(o[1]):void 0},iW=(e,n,o,r)=>{const i=aW(),c=X1(e)&&Ce(o.name),d=c?v8(e,o.name):i,g=c?o.name:void 0,h=n.create(i,o,r,d,g);return n.add(h),h},b8=(e,n)=>{w2(n.uri).each(({data:o,type:r,base64Encoded:i})=>{const c=i?o:btoa(o),d=n.file,g=e.editorUpload.blobCache,h=g.getByData(c,r),y=h??iW(e,g,d,c);ZC(e,`<img src="${y.blobUri()}">`,!1,!0)})},lW=e=>e.type==="paste",cW=e=>Promise.all(Ot(e,n=>RM(n).then(o=>({file:n,uri:o})))),uW=e=>{const n=Fk(e);return o=>Ps(o.type,"image/")&&to(n,r=>NT(r)===o.type)},BT=(e,n)=>{const o=n.items?Rs(Vn(n.items),i=>i.kind==="file"?[i.getAsFile()]:[]):[],r=n.files?Vn(n.files):[];return Ht(o.length>0?o:r,uW(e))},y8=(e,n,o)=>{const r=lW(n)?n.clipboardData:n.dataTransfer;if(ev(e)&&r){const i=BT(e,r);if(i.length>0)return n.preventDefault(),cW(i).then(c=>{o&&e.selection.setRng(o),ke(c,d=>{b8(e,d)})}),!0}return!1},dW=e=>{var n,o;return no.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},GC=e=>Mt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,LT=(e,n,o,r,i)=>{let c=PT(o);const d=ef(n,uu())||DT(o),g=!d&&MT(c),h=Up(c);(u8(c)||!c.length||g&&!h)&&(r=!0),(r||h)&&(ef(n,"text/plain")&&g?c=n["text/plain"]:c=VC(c)),!u8(c)&&(r?WC(e,c,i):ZC(e,c,d,i))},FT=(e,n,o)=>{let r;const i=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",c=>{GC(c)&&!c.isDefaultPrevented()&&(r=c.shiftKey&&c.keyCode===86)}),e.on("paste",c=>{if(c.isDefaultPrevented()||dW(c))return;const d=o.get()==="text"||r;r=!1;const g=IT(c.clipboardData);!jC(g)&&y8(e,c,i())||(ef(g,"text/html")?(c.preventDefault(),LT(e,g,g["text/html"],d,!0)):ef(g,"text/plain")&&ef(g,"text/uri-list")?(c.preventDefault(),LT(e,g,g["text/plain"],d,!0)):(n.create(),_l.setEditorTimeout(e,()=>{const h=n.getHtml();n.remove(),LT(e,g,h,d,!1)},0)))})},C8=e=>{const n=i=>Ps(i,"webkit-fake-url"),o=i=>Ps(i,"data:"),r=i=>{var c;return((c=i.data)===null||c===void 0?void 0:c.paste)===!0};e.parser.addNodeFilter("img",(i,c,d)=>{if(!ev(e)&&r(d))for(const g of i){const h=g.attr("src");ee(h)&&!g.attr("data-mce-object")&&h!==no.transparentSrc&&(n(h)||!PL(e)&&o(h))&&g.remove()}})},S8=(e,n,o)=>{FT(e,n,o),C8(e)},x8=(e,n)=>{n.get()==="text"?(n.set("html"),ik(e,!1)):(n.set("text"),ik(e,!0)),e.focus()},fW=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{x8(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&ZC(e,r.html,r.internal,!1),r.text&&WC(e,r.text,!1)})},mW=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(uu(),n),!0}catch{return!1}else return!1},w8=(e,n,o,r)=>{mW(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},E8=e=>(n,o)=>{const{dom:r,selection:i}=e,c=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),d=r.create("div",{contenteditable:"true"},n);r.setStyles(c,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),c.appendChild(d),r.add(e.getBody(),c);const g=i.getRng();d.focus();const h=r.createRng();h.selectNodeContents(d),i.setRng(h),_l.setEditorTimeout(e,()=>{i.setRng(g),r.remove(c),o()},0)},k0=e=>({html:Jl(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),gW=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),T8=e=>!e.selection.isCollapsed()||gW(e),hW=e=>n=>{!n.isDefaultPrevented()&&T8(e)&&e.selection.isEditable()&&w8(n,k0(e),E8(e),()=>{if(no.browser.isChromium()||no.browser.isFirefox()){const o=e.selection.getRng();_l.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},_T=e=>n=>{!n.isDefaultPrevented()&&T8(e)&&w8(n,k0(e),E8(e),et)},pW=e=>{e.on("cut",hW(e)),e.on("copy",_T(e))},A8=(e,n)=>{var o,r;return nl.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},O8=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},k8=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},vW=e=>to(e.files,n=>/^image\//.test(n.type)),bW=(e,n,o,r)=>{const i=e.getParent(o,d=>vc(n,d));if(!te(e.getParent(o,"summary")))return!0;if(i&&nn(r,"text/html")){const d=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!te(d.querySelector(i.nodeName.toLowerCase()))}else return!1},yW=e=>{e.on("input",n=>{const o=r=>te(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Ht(e.dom.select("details"),o);ke(r,i=>{ws(i.firstChild)&&i.firstChild.remove();const c=e.dom.create("summary");c.appendChild(kd().dom),i.prepend(c)})}})},CW=(e,n)=>{iw(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),ev(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&vW(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=A8(e,o);if(dt(r))return;const i=IT(o.dataTransfer),c=ef(i,uu());if((!jC(i)||O8(i))&&y8(e,o,r))return;const d=i[uu()],g=d||i["text/html"]||i["text/plain"],h=bW(e.dom,e.schema,r.startContainer,i),y=n.get();y&&!h||g&&(o.preventDefault(),_l.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(d||y&&h)&&e.execCommand("Delete"),k8(e,r);const A=PT(g);i["text/html"]?ZC(e,A,c,!0):WC(e,A,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{ev(e)&&!n.get()&&(o.preventDefault(),k8(e,A8(e,o))),o.type==="dragend"&&n.set(!1)}),yW(e)},SW=e=>{const n=i=>c=>{i(e,c)},o=Ak(e);Tt(o)&&e.on("PastePreProcess",n(o));const r=Ok(e);Tt(r)&&e.on("PastePostProcess",n(r))},$T=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},xW=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,HT=e=>ut.trim(e).replace(xW,I1).toLowerCase(),wW=(e,n,o)=>{const r=RL(e);if(o||r==="all"||!kk(e))return n;const i=r?r.split(/[, ]/):[];if(i&&r!=="none"){const c=e.dom,d=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(g,h,y,A)=>{const M=c.parseStyle(c.decode(y)),R={};for(let Z=0;Z<i.length;Z++){const V=M[i[Z]];let G=V,oe=c.getStyle(d,i[Z],!0);/color/.test(i[Z])&&(G=HT(G),oe=HT(oe)),oe!==G&&(R[i[Z]]=V)}const _=c.serializeStyle(R,"span");return _?h+' style="'+_+'"'+A:h+A})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(c,d,g,h)=>d+' style="'+g+'"'+h),n},EW=e=>{(no.browser.isChromium()||no.browser.isSafari())&&$T(e,wW)},TW=e=>{const n=is(!1),o=is(Rk(e)?"text":"html"),r=QZ(e);EW(e),fW(e,o),SW(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{pW(e),CW(e,n),S8(e,r,o)})},AW=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},ir=e=>{e.parser.addNodeFilter("details",n=>{const o=zL(e);ke(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=UL(e);ke(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},OW=e=>{AW(e),ir(e)},kW=ws,D8=at,M8=e=>ss(e.dom),VT=e=>hc(e.dom),zT=e=>n=>Un(ne.fromDom(e),n),D0=(e,n,o)=>Nu(ne.fromDom(e),r=>VT(r)||o.isBlock(ao(r)),zT(n)).getOr(ne.fromDom(n)).dom,R8=(e,n)=>Nu(ne.fromDom(e),M8,zT(n)),P8=(e,n,o)=>{const r=new _r(e,n),i=o?r.next.bind(r):r.prev.bind(r);let c=e;for(let d=o?e:i();d&&!kW(d);d=i())wc(d)&&(c=d);return c},DW=(e,n,o)=>{const i=Be.fromRangeStart(e).getNode(),c=D0(i,n,o),d=P8(i,c,!1),g=P8(i,c,!0),h=document.createRange();return R8(d,c).fold(()=>{D8(d)?h.setStart(d,0):h.setStartBefore(d)},y=>h.setStartBefore(y.dom)),R8(g,c).fold(()=>{D8(g)?h.setEnd(g,g.data.length):h.setEndAfter(g)},y=>h.setEndAfter(y.dom)),h},MW=e=>{const n=DW(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(DE(n))},RW=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),MW(e))})};var Wp;(function(e){e.Before="before",e.After="after"})(Wp||(Wp={}));const PW=(e,n)=>Math.abs(e.left-n),NW=(e,n)=>Math.abs(e.right-n),IW=(e,n)=>e>=n.top&&e<=n.bottom,BW=(e,n)=>e.top<n.bottom&&e.bottom>n.top,LW=(e,n)=>{const o=F7(e,n)/Math.min(e.height,n.height);return BW(e,n)&&o>.5},FW=(e,n)=>{const o=Ht(e,r=>IW(n,r));return WO(o).fold(()=>[[],e],r=>{const{pass:i,fail:c}=Sr(e,d=>LW(d,r));return[i,c]})},_W=(e,n)=>({node:e.node,position:PW(e,n)<NW(e,n)?Wp.Before:Wp.After}),$W=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),KC=(e,n,o,r)=>{const i=M=>wc(M.node)?N.some(M):Bt(M.node)?KC(Vn(M.node.childNodes),n,o,!1):N.none(),c=(M,R,_)=>i(R).filter(Z=>Math.abs(_(M,n,o)-_(Z,n,o))<2&&at(Z.node)),d=(M,R)=>{const _=ot(M,(Z,V)=>R(Z,n,o)-R(V,n,o));return Lo(_,i).map(Z=>r&&!at(Z.node)&&_.length>1?c(Z,_[1],R).getOr(Z):Z)},[g,h]=FW(kg(e),o),{pass:y,fail:A}=Sr(h,M=>M.top<o);return d(g,$W).orThunk(()=>d(A,Jb)).orThunk(()=>d(y,Jb))},N8=(e,n,o,r)=>{const i=(c,d)=>{const g=y=>Bt(y)&&y.classList.contains("mce-drag-container"),h=Ht(c.dom.childNodes,An(g));return d.fold(()=>KC(h,o,r,!0),y=>{const A=Ht(h,M=>M!==y.dom);return KC(A,o,r,!0)}).orThunk(()=>(Un(c,e)?N.none():Sm(c)).bind(A=>i(A,N.some(c))))};return i(n,N.none())},I8=(e,n,o)=>{const r=ne.fromDom(e),i=Au(r),d=ne.fromPoint(i,n,o).filter(g=>El(r,g)).getOr(r);return N8(r,d,n,o)},B8=(e,n,o)=>I8(e,n,o).filter(r=>ov(r.node)).map(r=>_W(r,n)),L8=e=>{var n,o;const r=e.getBoundingClientRect(),i=e.ownerDocument,c=i.documentElement,d=i.defaultView;return{top:r.top+((n=d==null?void 0:d.scrollY)!==null&&n!==void 0?n:0)-c.clientTop,left:r.left+((o=d==null?void 0:d.scrollX)!==null&&o!==void 0?o:0)-c.clientLeft}},HW=e=>e.inline?L8(e.getBody()):{left:0,top:0},VW=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},F8=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},i={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:i},zW=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=L8(e.getContentAreaContainer()),r=F8(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},_8=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),UW=(e,n)=>_8(HW(e),VW(e),zW(e,n)),UT=e=>({target:e,srcElement:e}),$8=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...UT(o)}),ZW=(e,n,o)=>{const r=yn("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:et,stopImmediatePropagation:et,stopPropagation:et,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...UT(n)}},WW=(e,n)=>{const o=zY(e);return n==="dragstart"?(jP(o),pU(o)):n==="drop"?(mU(o),Fi(o)):(gU(o),m0(o)),o},jW=(e,n,o,r)=>{const i=WW(o,e);return Je(r)?ZW(e,n,i):$8(e,r,n,i)},H8=32,V8=100,YC=8,XC=16,ZT=ss,GW=_7(ZT,hc),KW=(e,n,o)=>ZT(o)&&o!==n&&e.isEditable(o.parentElement),z8=(e,n,o)=>dt(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),YW=(e,n,o,r)=>{const i=e.dom,c=n.cloneNode(!0);i.setStyles(c,{width:o,height:r}),i.setAttrib(c,"data-mce-selected",null);const d=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(d,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),i.setStyles(c,{margin:0,boxSizing:"border-box"}),d.appendChild(c),d},XW=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},JC=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},WT=JC("left",-32),jT=JC("left",H8),U8=JC("top",-32),Z8=JC("top",H8),JW=(e,n,o,r,i,c,d,g,h,y,A,M)=>{let R=0,_=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>i&&(R=n.pageX+o-i),n.pageY+r>c&&(_=n.pageY+r-c),e.style.width=o-R+"px",e.style.height=r-_+"px";const Z=h.clientHeight,V=h.clientWidth,G=d+h.getBoundingClientRect().top,oe=g+h.getBoundingClientRect().left;A.on(ue=>{ue.intervalId.clear(),ue.dragging&&M&&(d+YC>=Z?ue.intervalId.set(Z8(y)):d-YC<=0?ue.intervalId.set(U8(y)):g+YC>=V?ue.intervalId.set(jT(y)):g-YC<=0?ue.intervalId.set(WT(y)):G+XC>=window.innerHeight?ue.intervalId.set(Z8(window)):G-XC<=0?ue.intervalId.set(U8(window)):oe+XC>=window.innerWidth?ue.intervalId.set(jT(window)):oe-XC<=0&&ue.intervalId.set(WT(window)))})},W8=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},QW=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);W8(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&kf(ne.fromDom(o))},qW=e=>e.button===0,ej=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),tj=(e,n)=>o=>{if(qW(o)){const r=No(n.dom.getParents(o.target),GW).getOr(null);if(Ce(r)&&KW(n.dom,n.getBody(),r)){const i=n.dom.getPos(r),c=n.getBody(),d=n.getDoc().documentElement;e.set({element:r,dataTransfer:yC(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?c.scrollWidth:d.offsetWidth)-2,maxY:(n.inline?c.scrollHeight:d.offsetHeight)-2,relX:o.pageX-i.x,relY:o.pageY-i.y,width:r.offsetWidth,height:r.offsetHeight,ghost:YW(n,r,r.offsetWidth,r.offsetHeight),intervalId:dm(V8)})}}},eX=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),B8(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const i=e._selectionOverrides.showCaret(1,r.node,r.position===Wp.Before,!1);i?e.selection.setRng(i):e.selection.placeCaretAt(n,o)})},M0=(e,n,o,r,i)=>{n==="dragstart"&&Pp(r,e.dom.getOuterHTML(o));const c=jW(n,o,r,i);return e.dispatch(n,c)},QC=(e,n)=>{const o=Ns((i,c)=>eX(n,i,c),0);n.on("remove",o.cancel);const r=e;return i=>e.on(c=>{const d=Math.max(Math.abs(i.screenX-c.screenX),Math.abs(i.screenY-c.screenY));if(!c.dragging&&d>10){const g=M0(n,"dragstart",c.element,c.dataTransfer,i);if(Ce(g.dataTransfer)&&(c.dataTransfer=g.dataTransfer),g.isDefaultPrevented())return;c.dragging=!0,n.focus()}if(c.dragging){const g=i.currentTarget===n.getDoc().documentElement,h=ej(c,UW(n,i));XW(c.ghost,n.getBody()),JW(c.ghost,h,c.width,c.height,c.maxX,c.maxY,i.clientY,i.clientX,n.getContentAreaContainer(),n.getWin(),r,g),o.throttle(i.clientX,i.clientY)}})},j8=e=>{const n=e.getSel();if(Ce(n)){const r=n.getRangeAt(0).startContainer;return at(r)?r.parentNode:r}else return null},G8=(e,n)=>o=>{e.on(r=>{var i;if(r.intervalId.clear(),r.dragging){if(z8(n,j8(n.selection),r.element)){const c=(i=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&i!==void 0?i:n.getBody();M0(n,"drop",c,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{QW(n.dom,r.element),bU(r.dataTransfer).each(g=>n.insertContent(g)),n._selectionOverrides.hideFakeCaret()})}M0(n,"dragend",n.getBody(),r.dataTransfer,o)}}),GT(e)},K8=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>M0(n,"dragend",r.element,r.dataTransfer),i=>M0(n,"dragend",r.element,r.dataTransfer,i))}),GT(e)},Y8=(e,n)=>o=>K8(e,n,N.some(o)),GT=e=>{e.on(n=>{n.intervalId.clear(),W8(n.ghost)}),e.clear()},nj=e=>{const n=Gr(),o=Co.DOM,r=document,i=tj(n,e),c=QC(n,e),d=G8(n,e),g=Y8(n,e);e.on("mousedown",i),e.on("mousemove",c),e.on("mouseup",d),o.bind(r,"mousemove",c),o.bind(r,"mouseup",g),e.on("remove",()=>{o.unbind(r,"mousemove",c),o.unbind(r,"mouseup",g)}),e.on("keydown",h=>{h.keyCode===Mt.ESC&&K8(n,e,N.none())})},oj=e=>{const n=i=>{if(!i.isDefaultPrevented()){const c=i.dataTransfer;c&&(_t(c.types,"Files")||c.files.length>0)&&(i.preventDefault(),i.type==="drop"&&Jv(e,"Dropped file type is not supported"))}},o=i=>{Hy(e,i.target)&&n(i)},r=()=>{const i=Co.DOM,c=e.dom,d=document,g=e.inline?e.getBody():e.getDoc(),h=["drop","dragover"];ke(h,y=>{i.bind(d,y,o),c.bind(g,y,n)}),e.on("remove",()=>{ke(h,y=>{i.unbind(d,y,o),c.unbind(g,y,n)})})};e.on("init",()=>{_l.setEditorTimeout(e,r,0)})},sj=e=>{nj(e),kL(e)&&oj(e)},X8=e=>{const n=Ns(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=l3(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},rj=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Ol(o)){const r=cg(e.getBody(),o),i=ss(r)?r:o;e.selection.getNode()!==i&&tC(e,i).each(c=>e.selection.setRng(c))}})})},zg=ss,J8=(e,n)=>cg(e.getBody(),n),aj=e=>{const n=e.selection,o=e.dom,r=e.getBody(),i=qL(e,r,o.isBlock,()=>qm(e)),c="sel-"+o.uniqueId(),d="data-mce-selected";let g;const h=At=>Ce(At)&&o.hasClass(At,"mce-offscreen-selection"),y=At=>At!==r&&(zg(At)||Ol(At))&&o.isChildOf(At,r)&&o.isEditable(At.parentNode),A=At=>{At&&n.setRng(At)},M=(At,Ne,Ae,je=!0)=>e.dispatch("ShowCaret",{target:Ne,direction:At,before:Ae}).isDefaultPrevented()?null:(je&&n.scrollIntoView(Ne,At===-1),i.show(Ae,Ne)),R=At=>{At.hasAttribute("data-mce-caret")&&(Xb(At),n.scrollIntoView(At))},_=()=>{e.on("click",Ne=>{o.isEditable(Ne.target)||(Ne.preventDefault(),e.focus())}),e.on("blur NewBlock",Se),e.on("ResizeWindow FullscreenStateChanged",i.reposition),e.on("tap",Ne=>{const Ae=Ne.target,je=J8(e,Ae);zg(je)?(Ne.preventDefault(),tC(e,je).each(ge)):y(Ae)&&tC(e,Ae).each(ge)},!0),e.on("mousedown",Ne=>{const Ae=Ne.target;if(Ae!==r&&Ae.nodeName!=="HTML"&&!o.isChildOf(Ae,r)||!vp(e,Ne.clientX,Ne.clientY))return;Se(),tt();const je=J8(e,Ae);zg(je)?(Ne.preventDefault(),tC(e,je).each(ge)):B8(r,Ne.clientX,Ne.clientY).each(Et=>{Ne.preventDefault();const zt=M(1,Et.node,Et.position===Wp.Before,!1);A(zt),Bu(je)?je.focus():e.getBody().focus()})}),e.on("keypress",Ne=>{Mt.modifierPressed(Ne)||zg(n.getNode())&&Ne.preventDefault()}),e.on("GetSelectionRange",Ne=>{let Ae=Ne.range;if(g){if(!g.parentNode){g=null;return}Ae=Ae.cloneRange(),Ae.selectNode(g),Ne.range=Ae}}),e.on("focusin",Ne=>{if(i.isShowing()&&e.getBody().contains(Ne.target)&&Ne.target!==e.getBody()&&!e.dom.isEditable(Ne.target.parentNode)){i.hide(),Ne.target.contains(e.selection.getNode())||(e.selection.select(Ne.target,!0),e.selection.collapse(!0));const Ae=ge(e.selection.getRng(),!0);Ae&&e.selection.setRng(Ae)}}),e.on("SetSelectionRange",Ne=>{Ne.range=G(Ne.range);const Ae=ge(Ne.range,Ne.forward);Ae&&(Ne.range=Ae)});const At=Ne=>Bt(Ne)&&Ne.id==="mcepastebin";e.on("AfterSetSelectionRange",Ne=>{const Ae=Ne.range,je=Ae.startContainer.parentElement;!V(Ae)&&!At(je)&&tt(),h(je)||Se()}),sj(e),X8(e),rj(e)},Z=At=>Ys(At)||Lh(At)||Yb(At),V=At=>Z(At.startContainer)||Z(At.endContainer),G=At=>{const Ne=e.schema.getVoidElements(),Ae=o.createRng(),je=At.startContainer,Et=At.startOffset,zt=At.endContainer,Rn=At.endOffset;return nn(Ne,je.nodeName.toLowerCase())?Et===0?Ae.setStartBefore(je):Ae.setStartAfter(je):Ae.setStart(je,Et),nn(Ne,zt.nodeName.toLowerCase())?Rn===0?Ae.setEndBefore(zt):Ae.setEndAfter(zt):Ae.setEnd(zt,Rn),Ae},oe=(At,Ne)=>{const Ae=ne.fromDom(e.getBody()),je=e.getDoc(),Et=Cd(Ae,"#"+c).getOrThunk(()=>{const Nn=ne.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',je);return fr(Nn,"id",c),Fs(Ae,Nn),Nn}),zt=o.createRng();Ki(Et),Pu(Et,[ne.fromText(zo,je),ne.fromDom(Ne),ne.fromText(zo,je)]),zt.setStart(Et.dom.firstChild,1),zt.setEnd(Et.dom.lastChild,0),pb(Et,{top:o.getPos(At,e.getBody()).y+"px"}),ls(Et);const Rn=n.getSel();return Rn&&(Rn.removeAllRanges(),Rn.addRange(zt)),zt},ue=At=>{const Ne=At.cloneNode(!0),Ae=e.dispatch("ObjectSelected",{target:At,targetClone:Ne});if(Ae.isDefaultPrevented())return null;const je=oe(At,Ae.targetClone),Et=ne.fromDom(At);return ke(Xo(ne.fromDom(e.getBody()),`*[${d}]`),zt=>{Un(Et,zt)||tr(zt,d)}),o.getAttrib(At,d)||At.setAttribute(d,"1"),g=At,tt(),je},ge=(At,Ne)=>{if(!At)return null;if(At.collapsed){if(!V(At)){const zt=Ne?1:-1,Rn=iv(zt,r,At),Nn=Rn.getNode(!Ne);if(Ce(Nn)){if(ov(Nn))return M(zt,Nn,Ne?!Rn.isAtEnd():!1,!1);if(ga(Nn)&&ss(Nn.nextSibling)){const So=o.createRng();return So.setStart(Nn,0),So.setEnd(Nn,0),So}}const co=Rn.getNode(Ne);if(Ce(co)){if(ov(co))return M(zt,co,Ne?!1:!Rn.isAtEnd(),!1);if(ga(co)&&ss(co.previousSibling)){const So=o.createRng();return So.setStart(co,1),So.setEnd(co,1),So}}}return null}let Ae=At.startContainer,je=At.startOffset;const Et=At.endOffset;if(at(Ae)&&je===0&&zg(Ae.parentNode)&&(Ae=Ae.parentNode,je=o.nodeIndex(Ae),Ae=Ae.parentNode),!Bt(Ae))return null;if(Et===je+1&&Ae===At.endContainer){const zt=Ae.childNodes[je];if(y(zt))return ue(zt)}return null},Se=()=>{g&&g.removeAttribute(d),Cd(ne.fromDom(e.getBody()),"#"+c).each(b),g=null},Ue=()=>{i.destroy(),g=null},tt=()=>{i.hide()};return td(e)||_(),{showCaret:M,showBlockCaretContainer:R,hideFakeCaret:tt,destroy:Ue}},ij=(e,n)=>{let o=n;for(let r=e.previousSibling;at(r);r=r.previousSibling)o+=r.data.length;return o},KT=(e,n,o,r,i)=>{if(at(o)&&(r<0||r>o.data.length))return[];const c=i&&at(o)?[ij(o,r)]:[r];let d=o;for(;d!==n&&d.parentNode;)c.push(e.nodeIndex(d,i)),d=d.parentNode;return d===n?c.reverse():[]},YT=(e,n,o,r,i,c,d=!1)=>{const g=KT(e,n,o,r,d),h=KT(e,n,i,c,d);return{start:g,end:h}},Q8=(e,n)=>{const o=n.slice(),r=o.pop();return St(r)?Ko(o,(c,d)=>c.bind(g=>N.from(g.childNodes[d])),N.some(e)).bind(c=>at(c)&&(r<0||r>c.data.length)?N.none():N.some({node:c,offset:r})):N.none()},q8=(e,n)=>Q8(e,n.start).bind(({node:o,offset:r})=>Q8(e,n.end).map(({node:i,offset:c})=>{const d=document.createRange();return d.setStart(o,r),d.setEnd(i,c),d})),lj=(e,n,o,r=!1)=>YT(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),jp=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,at(n.firstChild)&&_s(n.firstChild.data)),jp(e,r,o)}},qC=(e,n,o,r=!0)=>{const i=n.startContainer.parentNode,c=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(at(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),at(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),jp(e,i,o),i!==c&&jp(e,c,o))},eS=(e,n)=>N.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),tS=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Zn(r).concat(e.blockPatterns),inlinePatterns:Wt(r).concat(e.inlinePatterns)}},XT=(e,n,o,r)=>{const i=e.createRng();return i.setStart(n,0),i.setEnd(o,r),i.toString()},nS=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),Ql=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},JT=(e,n,o)=>{const r=q8(e.getRoot(),o).getOrDie("Unable to resolve path range"),i=r.startContainer,c=r.endContainer,d=r.endOffset===0?c:c.splitText(r.endOffset),g=r.startOffset===0?i:i.splitText(r.startOffset),h=g.parentNode,y=d.parentNode;return{prefix:n,end:y.insertBefore(nS(e,n+"-end"),d),start:h.insertBefore(nS(e,n+"-start"),g)}},QT=(e,n,o)=>{jp(e,e.get(n.prefix+"-end"),o),jp(e,e.get(n.prefix+"-start"),o)},qT=e=>e.start.length===0,oS=e=>(n,o)=>{const i=n.data.substring(0,o),c=i.lastIndexOf(e.charAt(e.length-1)),d=i.lastIndexOf(e);return d!==-1?d+e.length:c!==-1?c+1:-1},sS=(e,n,o,r)=>{const i=n.start;return Lp(e,r.container,r.offset,oS(i),o).bind(d=>{var g,h;const y=(h=(g=o.textContent)===null||g===void 0?void 0:g.indexOf(i))!==null&&h!==void 0?h:-1;if(y!==-1&&d.offset>=y+i.length){const M=e.createRng();return M.setStart(d.container,d.offset-i.length),M.setEnd(d.container,d.offset),N.some(M)}else{const M=d.offset-i.length;return wC(d.container,M,o).map(R=>{const _=e.createRng();return _.setStart(R.container,R.offset),_.setEnd(d.container,d.offset),_}).filter(R=>R.toString()===i).orThunk(()=>sS(e,n,o,au(d.container,0)))}})},eI=(e,n,o,r,i,c=!1)=>{if(n.start.length===0&&!c){const d=e.createRng();return d.setStart(o,r),d.setEnd(o,r),N.some(d)}return Pg(o,r,i).bind(d=>sS(e,n,i,d).bind(h=>{var y;if(c){if(h.endContainer===d.container&&h.endOffset===d.offset)return N.none();if(d.offset===0&&((y=h.endContainer.textContent)===null||y===void 0?void 0:y.length)===h.endOffset)return N.none()}return N.some(h)}))},tI=(e,n,o,r)=>{const i=e.dom,c=i.getRoot(),d=o.pattern,g=o.position.container,h=o.position.offset;return wC(g,h-o.pattern.end.length,n).bind(y=>{const A=YT(i,c,y.container,y.offset,g,h,r);if(qT(d))return N.some({matches:[{pattern:d,startRng:A,endRng:A}],position:y});{const M=rS(e,o.remainingPatterns,y.container,y.offset,n,r),R=M.getOr({matches:[],position:y}),_=R.position;return eI(i,d,_.container,_.offset,n,M.isNone()).map(V=>{const G=lj(i,c,V,r);return{matches:R.matches.concat([{pattern:d,startRng:G,endRng:A}]),position:au(V.startContainer,V.startOffset)}})}})},rS=(e,n,o,r,i,c)=>{const d=e.dom;return Pg(o,r,d.getRoot()).bind(g=>{const h=XT(d,i,o,r);for(let y=0;y<n.length;y++){const A=n[y];if(!vl(h,A.end))continue;const M=n.slice();M.splice(y,1);const R=tI(e,i,{pattern:A,remainingPatterns:M,position:g},c);if(R.isNone()&&r>0)return rS(e,n,o,r-1,i,c);if(R.isSome())return R}return N.none()})},nI=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?ke(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},cj=(e,n,o,r)=>{const i=Ql(e.dom,o);qC(e.dom,i,r),nI(e,n,i)},uj=(e,n,o,r,i)=>{const c=e.dom,d=Ql(c,r),g=Ql(c,o);qC(c,g,i),qC(c,d,i);const h={prefix:o.prefix,start:o.end,end:r.start},y=Ql(c,h);nI(e,n,y)},dj=(e,n)=>{const o=ni("mce_textpattern"),r=ur(n,(i,c)=>{const d=JT(e,o+`_end${i.length}`,c.endRng);return i.concat([{...c,endMarker:d}])},[]);return ur(r,(i,c)=>{const d=r.length-i.length-1,g=qT(c.pattern)?c.endMarker:JT(e,o+`_start${d}`,c.startRng);return i.concat([{...c,startMarker:g}])},[])},oI=e=>ot(e,(n,o)=>o.end.length-n.end.length),fj=(e,n)=>{const o=xn(e,r=>to(n,i=>r.pattern.start===i.pattern.start&&r.pattern.end===i.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},sI=(e,n,o,r,i,c)=>{const d=rS(e,i.inlinePatterns,o,r,n,c).fold(()=>[],h=>h.matches),g=rS(e,oI(i.inlinePatterns),o,r,n,c).fold(()=>[],h=>h.matches);return fj(d,g)},mj=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),i=dj(o,n);ke(i,c=>{const d=o.getParent(c.startMarker.start,o.isBlock),g=h=>h===d;qT(c.pattern)?cj(e,c.pattern,c.endMarker,g):uj(e,c.pattern,c.startMarker,c.endMarker,g),QT(o,c.endMarker,g),QT(o,c.startMarker,g)}),e.selection.moveToBookmark(r)},aS=(e,n,o)=>q3(n,0,n).map(r=>{const i=r.container;return eT(i,o.start.length,n).each(c=>{const d=e.createRng();d.setStart(i,0),d.setEnd(c.container,c.offset),qC(e,d,g=>g===n)}),i}),rI=e=>(n,o)=>{const r=n.dom,i=o.pattern,c=q8(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),d=(g,h)=>{const y=h.get(g);return Ke(y)&&sn(y).exists(A=>nn(A,"block"))};return eS(n,c).each(g=>{i.type==="block-format"?d(i.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,g,i),n.formatter.apply(i.format)}):i.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,g,i),n.execCommand(i.cmd,!1,i.value)})}),!0},gj=e=>ot(e,(n,o)=>o.start.length-n.start.length),aI=e=>(n,o)=>{const r=gj(n),i=o.replace(zo," ");return No(r,c=>e(c,o,i))},iI=(e,n)=>(o,r,i,c,d)=>{var g;d===void 0&&(d=(g=r.textContent)!==null&&g!==void 0?g:"");const h=o.dom,y=Ma(o);return h.is(r,y)?e(i.blockPatterns,d).map(A=>n&&ut.trim(d).length===A.start.length?[]:[{pattern:A,range:YT(h,h.getRoot(),r,0,r,0,c)}]).getOr([]):[]},hj=e=>/^\s[^\s]/.test(e),pj=rI((e,n,o)=>{aS(e,n,o).each(r=>{const i=ne.fromDom(r),c=Ch(i);hj(c)&&iO(i,c.slice(1))})}),vj=aI((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),iS=iI(vj,!0),bj=(e,n)=>{const o=e.selection.getRng();return eS(e,o).map(r=>{var i;const c=Math.max(0,o.startOffset),d=tS(n,r,(i=r.textContent)!==null&&i!==void 0?i:""),g=sI(e,r,o.startContainer,c,d,!0),h=iS(e,r,d,!0);return{inlineMatches:g,blockMatches:h}}).filter(({inlineMatches:r,blockMatches:i})=>i.length>0||r.length>0)},yj=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();ke(n,r=>pj(e,r)),e.selection.moveToBookmark(o)},eA=rI(aS),tA=aI((e,n,o)=>n===e.start||o===e.start),Cj=iI(tA,!1),Sj=(e,n)=>{const o=e.selection.getRng();return eS(e,o).map(r=>{const i=Math.max(0,o.startOffset),c=XT(e.dom,r,o.startContainer,i),d=tS(n,r,c);return Cj(e,r,d,!1,c)}).filter(r=>r.length>0)},lI=(e,n)=>{ke(n,o=>eA(e,o))},xj=(e,n)=>bj(e,n).fold(Ie,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{ZO(e),mj(e,o),yj(e,r);const i=e.selection.getRng(),c=Pg(i.startContainer,i.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),c.each(d=>{const g=d.container;g.data.charAt(d.offset-1)===Br&&(g.deleteData(d.offset-1,1),jp(e.dom,g.parentNode,h=>h===e.dom.getRoot()))})}),!0)),wj=(e,n)=>{const o=e.selection.getRng();eS(e,o).map(r=>{const i=Math.max(0,o.startOffset-1),c=XT(e.dom,r,o.startContainer,i),d=tS(n,r,c),g=sI(e,r,o.startContainer,i,d,!1);g.length>0&&e.undoManager.transact(()=>{mj(e,g)})})},Ej=(e,n)=>Sj(e,n).fold(Ie,o=>(e.undoManager.transact(()=>{lI(e,o)}),!0)),cI=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},Tj=(e,n)=>cI(e,n,(o,r)=>o===r.keyCode&&!Mt.modifierPressed(r)),Aj=(e,n)=>cI(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),uI=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>Zm(NL(e).filter(d=>d.type==="inline-command"||d.type==="block-command"?e.queryCommandSupported(d.cmd):!0),IL(e)),i=()=>$L(e);e.on("keydown",d=>{if(d.keyCode===13&&!Mt.modifierPressed(d)&&e.selection.isCollapsed()&&e.selection.isEditable()){const g=K1(r(),"enter");(g.inlinePatterns.length>0||g.blockPatterns.length>0||i())&&xj(e,g)&&d.preventDefault()}},!0),e.on("keydown",d=>{if(d.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const g=K1(r(),"space");(g.blockPatterns.length>0||i())&&Ej(e,g)&&d.preventDefault()}},!0);const c=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const d=K1(r(),"space");(d.inlinePatterns.length>0||i())&&wj(e,d)}};e.on("keyup",d=>{Tj(o,d)&&c()}),e.on("keypress",d=>{Aj(n,d)&&_l.setEditorTimeout(e,c)})},lS=e=>{uI(e)},dI=e=>{const n=ut.each,o=Mt.BACKSPACE,r=Mt.DELETE,i=e.dom,c=e.selection,d=e.parser,g=no.browser,h=g.isFirefox(),y=g.isChromium()||g.isSafari(),A=no.deviceType.isiPhone()||no.deviceType.isiPad(),M=no.os.isMacOS()||no.os.isiOS(),R=(He,nt)=>{try{e.getDoc().execCommand(He,!1,String(nt))}catch{}},_=He=>He.isDefaultPrevented(),Z=()=>{const He=$t=>{const Pn=i.create("body"),Hn=$t.cloneContents();return Pn.appendChild(Hn),c.serializer.serialize(Pn,{format:"html"})},nt=$t=>{const Pn=He($t),Hn=i.createRng();Hn.selectNode(e.getBody());const go=He(Hn);return Pn===go};e.on("keydown",$t=>{const Pn=$t.keyCode;if(!_($t)&&(Pn===r||Pn===o)&&e.selection.isEditable()){const Hn=e.selection.isCollapsed(),go=e.getBody();if(Hn&&!_u(e.schema,go)||!Hn&&!nt(e.selection.getRng()))return;$t.preventDefault(),e.setContent(""),go.firstChild&&i.isBlock(go.firstChild)?e.selection.setCursorLocation(go.firstChild,0):e.selection.setCursorLocation(go,0),e.nodeChanged()}})},V=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},G=()=>{e.inline||i.bind(e.getDoc(),"mousedown mouseup",He=>{let nt;if(He.target===e.getDoc().documentElement)if(nt=c.getRng(),e.getBody().focus(),He.type==="mousedown"){if(Ys(nt.startContainer))return;c.placeCaretAt(He.clientX,He.clientY)}else c.setRng(nt)})},oe=()=>{e.on("keydown",He=>{if(!_(He)&&He.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(c.isCollapsed()&&c.getRng().startOffset===0){const nt=c.getNode(),$t=nt.previousSibling;if(nt.nodeName==="HR"){i.remove(nt),He.preventDefault();return}$t&&$t.nodeName&&$t.nodeName.toLowerCase()==="hr"&&(i.remove($t),He.preventDefault())}}})},ue=()=>{Range.prototype.getClientRects||e.on("mousedown",He=>{if(!_(He)&&He.target.nodeName==="HTML"){const nt=e.getBody();nt.blur(),_l.setEditorTimeout(e,()=>{nt.focus()})}})},ge=()=>{const He=xk(e);e.on("click",nt=>{const $t=nt.target;/^(IMG|HR)$/.test($t.nodeName)&&i.isEditable($t)&&(nt.preventDefault(),e.selection.select($t),e.nodeChanged()),$t.nodeName==="A"&&i.hasClass($t,He)&&$t.childNodes.length===0&&i.isEditable($t.parentNode)&&(nt.preventDefault(),c.select($t))})},Se=()=>{const He=nt=>nt.nodeName==="IMG"&&e.dom.isEditable(nt);e.on("mousedown",nt=>{Zs(N.from(nt.clientX),N.from(nt.clientY),($t,Pn)=>{const Hn=e.getDoc().caretPositionFromPoint($t,Pn);if(Hn&&He(Hn.offsetNode)){const go=Hn.offsetNode.getBoundingClientRect();nt.preventDefault(),e.hasFocus()||e.focus(),e.selection.select(Hn.offsetNode),nt.clientX<go.left||nt.clientY<go.top?e.selection.collapse(!0):(nt.clientX>go.right||nt.clientY>go.bottom)&&e.selection.collapse(!1)}})})},Ue=()=>{const He=()=>{const $t=i.getAttribs(c.getStart().cloneNode(!1));return()=>{const Pn=c.getStart();Pn!==e.getBody()&&(i.setAttrib(Pn,"style",null),n($t,Hn=>{Pn.setAttributeNode(Hn.cloneNode(!0))}))}},nt=()=>!c.isCollapsed()&&i.getParent(c.getStart(),i.isBlock)!==i.getParent(c.getEnd(),i.isBlock);e.on("keypress",$t=>{let Pn;return!_($t)&&($t.keyCode===8||$t.keyCode===46)&&nt()?(Pn=He(),e.getDoc().execCommand("delete",!1),Pn(),$t.preventDefault(),!1):!0}),i.bind(e.getDoc(),"cut",$t=>{if(!_($t)&&nt()){const Pn=He();_l.setEditorTimeout(e,()=>{Pn()})}})},tt=()=>{e.on("keydown",He=>{if(!_(He)&&He.keyCode===o&&c.isCollapsed()&&c.getRng().startOffset===0){const nt=c.getNode().previousSibling;if(nt&&nt.nodeName&&nt.nodeName.toLowerCase()==="table")return He.preventDefault(),!1}return!0})},At=()=>{e.on("keydown",He=>{if(_(He)||He.keyCode!==Mt.BACKSPACE)return;let nt=c.getRng();const $t=nt.startContainer,Pn=nt.startOffset,Hn=i.getRoot();let go=$t;if(!(!nt.collapsed||Pn!==0)){for(;go.parentNode&&go.parentNode.firstChild===go&&go.parentNode!==Hn;)go=go.parentNode;go.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,go),nt=i.createRng(),nt.setStart($t,0),nt.setEnd($t,0),c.setRng(nt))}})},Ne=()=>{const He=()=>{R("StyleWithCSS",!1),R("enableInlineTableEditing",!1),mk(e)||R("enableObjectResizing",!1)};yk(e)||e.on("BeforeExecCommand mousedown",He)},Ae=()=>{const He=()=>{n(i.select("a:not([data-mce-block])"),nt=>{var $t;let Pn=nt.parentNode;const Hn=i.getRoot();if((Pn==null?void 0:Pn.lastChild)===nt){for(;Pn&&!i.isBlock(Pn);){if((($t=Pn.parentNode)===null||$t===void 0?void 0:$t.lastChild)!==Pn||Pn===Hn)return;Pn=Pn.parentNode}i.add(Pn,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",nt=>{(nt.type==="setcontent"||nt.command==="mceInsertLink")&&He()})},je=()=>{e.on("init",()=>{R("DefaultParagraphSeparator",Ma(e))})},Et=He=>{const nt=He.getBody(),$t=He.selection.getRng();return $t.startContainer===$t.endContainer&&$t.startContainer===nt&&$t.startOffset===0&&$t.endOffset===nt.childNodes.length},zt=()=>{e.on("keyup focusin mouseup",He=>{!Mt.modifierPressed(He)&&!Et(e)&&c.normalize()},!0)},Rn=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Nn=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},co=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",He=>{let nt;He.target.nodeName==="HTML"&&(nt=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(nt),e.selection.normalize(),e.nodeChanged())}))},So=()=>{M&&e.on("keydown",He=>{Mt.metaKeyPressed(He)&&!He.shiftKey&&(He.keyCode===37||He.keyCode===39)&&(He.preventDefault(),e.selection.getSel().modify("move",He.keyCode===37?"backward":"forward","lineboundary"))})},cs=()=>{e.on("click",He=>{let nt=He.target;do if(nt.tagName==="A"){He.preventDefault();return}while(nt=nt.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},lr=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",He=>{He.preventDefault()})})},yr=()=>{d.addNodeFilter("br",He=>{let nt=He.length;for(;nt--;)He[nt].attr("class")==="Apple-interchange-newline"&&He[nt].remove()})},pt=et,Vt=()=>{if(!h||e.removed)return!1;const He=e.selection.getSel();return!He||!He.rangeCount||He.rangeCount===0},ro=()=>{y&&(G(),ge(),lr(),V(),A&&(Nn(),co(),cs())),h&&(ue(),Ne(),Rn(),So())},uo=()=>{At(),Z(),no.windowsPhone||zt(),y&&(G(),ge(),je(),lr(),tt(),yr(),A?(Nn(),co(),cs()):V()),h&&(Se(),oe(),ue(),Ue(),Ne(),Ae(),Rn(),So(),tt())};return td(e)?ro():uo(),{refreshContentEditable:pt,isHidden:Vt}},fI=e=>e.toLowerCase()==="gpl",Oj=e=>e.length>=64&&e.length<=255,kj=e=>fI(e)||Oj(e)?"VALID":"INVALID",cS=e=>{const n=ZL(e);!ee(WL(e))&&(Je(n)||kj(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},nA=Co.DOM,mI=(e,n)=>{const o=ne.fromDom(e.getBody()),r=Ru(Tl(o)),i=ne.fromTag("style");fr(i,"type","text/css"),Fs(i,ne.fromText(n)),Fs(r,i),e.on("remove",()=>{b(i)})},Dj=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,uS=e=>bi(e,n=>Je(n)===!1),gI=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return uS({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),extended_mathml_attributes:n("extended_mathml_attributes"),extended_mathml_elements:n("extended_mathml_elements"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:Dj(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:yy(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},hI=e=>{const n=e.options.get;return uS({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},Mj=e=>{const n=e.options.get;return{...gI(e),...hI(e),...uS({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},Rj=e=>{const n=yg(gI(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const i=e.dom,c="data-mce-"+r;let d=o.length;for(;d--;){const g=o[d];let h=g.attr(r);if(h&&!g.attr(c)){if(h.indexOf("data:")===0||h.indexOf("blob:")===0)continue;r==="style"?(h=i.serializeStyle(i.parseStyle(h),g.name),h.length||(h=null),g.attr(c,h),g.attr(r,h)):r==="tabindex"?(g.attr(c,h),g.attr(r,null)):g.attr(c,e.convertURL(h,r,g.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const i=o[r],c=i.attr("type")||"no/type";c.indexOf("mce-")!==0&&i.attr("type","mce-"+c)}}),FL(e)&&n.addNodeFilter("#cdata",o=>{var r;let i=o.length;for(;i--;){const c=o[i];c.type=8,c.name="#comment",c.value="[CDATA["+e.dom.encode((r=c.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const i=e.schema.getNonEmptyElements();for(;r--;){const c=o[r];c.isEmpty(i)&&c.getAll("br").length===0&&c.append(new Ka("br",1))}}),n},Pj=e=>{const n=Tk(e);n&&_l.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},Gp=e=>{const n=e.dom.getRoot();!e.inline&&(!Py(e)||e.selection.getStart(!0)===n)&&na(n).each(o=>{const r=o.getNode(),i=Lu(r)?na(r).getOr(o):o;e.selection.setRng(i.toRange())})},Nj=e=>{e.bindPendingEventDelegates(),e.initialized=!0,tL(e),e.focus(!0),Gp(e),e.nodeChanged({initial:!0});const n=JK(e);Tt(n)&&n.call(e,e),Pj(e),Ic(e)&&qv(e,!0)},oA=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,pI=(e,n,o)=>{const{pass:r,fail:i}=Sr(n,g=>tinymce.Resource.has(G4(g))),d=[...r.map(g=>{const h=tinymce.Resource.get(G4(g));return ee(h)?Promise.resolve(oA(e).loadRawCss(g,h)):Promise.resolve()}),oA(e).loadAll(i)];return e.inline?d:d.concat([e.ui.styleSheetLoader.loadAll(o)])},vI=e=>{const n=oA(e),o=fk(e),r=e.contentCSS,i=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},c=()=>{e.removed?i():e.on("remove",i)};if(e.contentStyles.length>0){let h="";ut.each(e.contentStyles,y=>{h+=y+`\r
`}),e.dom.addStyle(h)}const d=Promise.all(pI(e,r,o)).then(c).catch(c),g=dk(e);return g&&mI(e,g),d},Ij=e=>{const n=e.getDoc(),o=e.getBody();eL(e),rw(e)||(n.body.spellcheck=!1,nA.setAttrib(o,"spellcheck","false")),e.quirks=dI(e),fy(e);const r=bL(e);r!==void 0&&(o.dir=r);const i=aw(e);i&&e.on("BeforeSetContent",c=>{ut.each(i,d=>{c.content=c.content.replace(d,g=>"<!--mce:protected "+escape(g)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",c=>{e.composing=c.type==="compositionstart"})},Bj=e=>{td(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},dS=e=>{e.removed!==!0&&(Bj(e),Nj(e))},Lj=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},bI=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(nA.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=yk(e),e._editableRoot=jh(e),!Kh(e)&&e.hasEditableRoot()&&(e.inline&&nA.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=gV(e),e.schema=ma(hI(e)),e.dom=Co(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Jn(e),referrerPolicy:Pl(e),onSetAttrib:d=>{e.dispatch("SetAttrib",d)}}),e.parser=Rj(e),e.serializer=N6(Mj(e),e),e.selection=R6(e.dom,e.getWin(),e.serializer,e),e.annotator=Ly(e),e.formatter=Ro(e),e.undoManager=t3(e),e._nodeChangeDispatcher=new a8(e),e._selectionOverrides=aj(e),Fz(e),OW(e),L3(e),td(e)||(RW(e),lS(e));const i=kT(e);Iz(e,i),Hz(e),o3(e),TW(e);const c=y9(e);Ij(e),cS(e),c.fold(()=>{const d=Lj(e);vI(e).then(()=>{dS(e),d()})},d=>{e.setProgressState(!0),vI(e).then(()=>{d().then(g=>{e.setProgressState(!1),dS(e),k4(e)},g=>{e.notificationManager.open({type:"error",text:String(g)}),dS(e),k4(e)})})})},yI=Co.DOM,fS=(e,n,o,r)=>{const i=ne.fromTag("iframe");return r.each(c=>fr(i,"tabindex",c)),xi(i,o),xi(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Yo(i,"tox-edit-area__iframe"),i},Fj=e=>{let n=uk(e)+"<html><head>";lL(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=YK(e),r=cL(e),i=e.translate(wk(e));return uL(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+uL(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${i}"><br></body></html>`,n},_j=(e,n)=>{const o=no.browser.isFirefox()?wk(e):"Rich Text Area",r=e.translate(o),i=Aa(ne.fromDom(e.getElement()),"tabindex").bind(Ci),c=fS(e.id,r,iL(e),i).dom;c.onload=()=>{c.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=c,e.iframeHTML=Fj(e),yI.add(n.iframeContainer,c)},$j=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,bI(e)};if(Ik(e)||no.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=er(ne.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},Hj=(e,n)=>{_j(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=yI.isHidden(n.editorContainer)),e.getElement().style.display="none",yI.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,$j(e)},CI=Co.DOM,Vj=(e,n,o)=>{const r=Cg.get(o),i=Cg.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=ut.trim(o),r&&ut.inArray(n,o)===-1){if(e.plugins[o])return;try{const c=r(e,i)||{};e.plugins[o]=c,Tt(c.init)&&(c.init(e,i),n.push(o))}catch(c){H4(e,o,c)}}},zj=e=>e.replace(/^\-/,""),Uj=e=>{const n=[];ke(Bf(e),o=>{Vj(e,n,zj(o))})},Zj=e=>{const n=ut.trim(Q1(e)),o=e.ui.registry.getAll().icons,r={...pp.get("default").icons,...pp.get(n).icons};$e(r,(i,c)=>{nn(o,c)||e.ui.registry.addIcon(c,i)})},Wj=e=>{const n=Zh(e);if(ee(n)){const o=jf.get(n);e.theme=o(e,jf.urls[n])||{},Tt(e.theme.init)&&e.theme.init(e,jf.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},jj=e=>{const n=vy(e),o=Wf.get(n);e.model=o(e,Wf.urls[n])},Gj=e=>{const n=e.theme.renderUI;return n?n():sA(e)},Kj=e=>{const n=e.getElement(),r=Zh(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},Po=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),Yj=e=>{const n=CI.create("div");return CI.insertAfter(n,e),Po(n,n)},sA=e=>{const n=e.getElement();return e.inline?Po(null):Yj(n)},Xj=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,ee(Zh(e))?Gj(e):Tt(Zh(e))?Kj(e):sA(e)},rA=(e,n)=>{const o={show:N.from(n.show).getOr(et),hide:N.from(n.hide).getOr(et),isEnabled:N.from(n.isEnabled).getOr(Qe),setEnabled:r=>{r&&(e.mode.get()==="readonly"||Ic(e))||N.from(n.setEnabled).each(c=>c(r))}};e.ui={...e.ui,...o}},SI=async e=>{e.dispatch("ScriptsLoaded"),Zj(e),Wj(e),jj(e),Uj(e);const n=await Xj(e);rA(e,N.from(n.api).getOr({})),e.editorContainer=n.editorContainer,uV(e),e.inline?bI(e):Hj(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Ug=Co.DOM,xI=e=>e.charAt(0)==="-",Jj=(e,n)=>{const o=If(n),r=pL(n);if(!Ks.hasCode(o)&&o!=="en"){const i=dn(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(i).catch(()=>{Q6(n,i,o)})}},wI=(e,n)=>{const o=Zh(e);if(ee(o)&&!xI(o)&&!nn(jf.urls,o)){const r=SL(e),i=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;jf.load(o,i).catch(()=>{q6(e,i,o)})}},mS=(e,n)=>{const o=vy(e);if(o!=="plugin"&&!nn(Wf.urls,o)){const r=hk(e),i=ee(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;Wf.load(o,i).catch(()=>{eR(e,i,o)})}},Qj=e=>N.from(zh(e)).filter(dn).map(n=>({url:n,name:N.none()})),EI=(e,n,o)=>N.from(n).filter(r=>dn(r)&&!pp.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:N.some(r)})),aA=(e,n,o)=>{const r=EI(n,"default",o),i=Qj(n).orThunk(()=>EI(n,Q1(n),""));ke(lm([r,i]),c=>{e.add(c.url).catch(()=>{J6(n,c.url,c.name.getOrUndefined())})})},qj=(e,n)=>{const o=(r,i)=>{Cg.load(r,i).catch(()=>{X6(e,i,r)})};$e(Gh(e),(r,i)=>{o(i,r),e.options.set("plugins",Bf(e).concat(i))}),ke(Bf(e),r=>{r=ut.trim(r),r&&!Cg.urls[r]&&!xI(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},eG=e=>{const n=Zh(e);return!ee(n)||Ce(jf.get(n))},tG=e=>{const n=vy(e);return Ce(Wf.get(n))},nG=(e,n)=>{const o=Ad.ScriptLoader,r=()=>{!e.removed&&eG(e)&&tG(e)&&SI(e)};wI(e,n),mS(e,n),Jj(o,e),aA(o,e,n),qj(e,n),o.loadQueue().then(r,r)},TI=(e,n)=>gx.forElement(e,{contentCssCors:Ck(n),referrerPolicy:Pl(n)}),oG=e=>{const n=e.id;Ks.setCode(If(e));const o=()=>{Ug.unbind(window,"ready",o),e.render()};if(!qc.Event.domLoaded){Ug.bind(window,"ready",o);return}if(!e.getElement())return;const r=ne.fromDom(e.getElement()),i=gn(r);e.on("remove",()=>{ia(r.dom.attributes,d=>tr(r,d.name)),xi(r,i)}),e.ui.styleSheetLoader=TI(r,e),io(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const c=e.getElement().form||Ug.getParent(n,"form");c&&(e.formElement=c,vk(e)&&!Db(e.getElement())&&(Ug.insertAfter(Ug.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=d=>{e.dispatch(d.type,d)},Ug.bind(c,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),sw(e)&&!c.submit.nodeType&&!c.submit.length&&!c._mceOldSubmit&&(c._mceOldSubmit=c.submit,c.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),c._mceOldSubmit(c)))),e.windowManager=Xv(e),e.notificationManager=G6(e),HL(e)&&e.on("GetContent",d=>{d.save&&(d.content=Ug.encode(d.content))}),AL(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Wm(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),nG(e,e.suffix)},sG=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,Ic(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),sL(e,n))},AI=e=>e._editableRoot,rG=(e,n)=>({sections:Ye(e),options:Ye(n)}),iA=la().deviceType,lA=iA.isPhone(),cA=iA.isTablet(),R0=e=>{if(dt(e))return[];{const n=Ke(e)?e:e.split(/[ ,]/),o=Ot(n,Zi);return Ht(o,dn)}},OI=(e,n)=>{const o=Rt(n,(r,i)=>_t(e,i));return rG(o.t,o.f)},aG=(e,n,o={})=>{const r=e.sections(),i=Fo(r,n).getOr({});return ut.extend({},o,i)},P0=(e,n)=>nn(e.sections(),n),iG=(e,n)=>P0(e,n)?e.sections()[n]:{},kI=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Fo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),lG=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?ut.extend({},e.external_plugins,r):r},cG=(e,n)=>[...R0(e),...R0(n)],uG=(e,n,o,r)=>e&&P0(n,"mobile")?r:o,DI=(e,n,o,r)=>{const i=R0(o.forced_plugins),c=R0(r.plugins),d=iG(n,"mobile"),g=d.plugins?R0(d.plugins):c,h=uG(e,n,c,g),y=cG(i,h);return ut.extend(r,{forced_plugins:i,plugins:y})},dG=(e,n)=>e&&P0(n,"mobile"),MI=(e,n,o,r,i)=>{var c;const d=e?{mobile:kI((c=i.mobile)!==null&&c!==void 0?c:{},n)}:{},g=OI(["mobile"],Us(d,i)),h=ut.extend(o,r,g.options(),dG(e,g)?aG(g,"mobile"):{},{external_plugins:lG(r,g.options())});return DI(e,g,r,h)},gS=(e,n)=>{const o=yu(n);return MI(lA||cA,lA,o,e,o)},uA=(e,n)=>I9(e,n),dA=e=>{const n=(r,i)=>{e.formatter.toggle(r,i),e.nodeChanged()},o=r=>()=>{ke("left,center,right,justify".split(","),i=>{r!==i&&e.formatter.remove("align"+i)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},fG=e=>{const n=o=>()=>{const r=e.selection,i=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return to(i,c=>Ce(e.formatter.matchNode(c,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},mG=e=>{dA(e),fG(e)},Kp=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(no.os.isMacOS()||no.os.isiOS())&&(i=i.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:i,type:"error"})}}})},gG=(e,n,o,r)=>{const i=ne.fromDom(e.getRoot());return Sv(i,Be.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),xv(i,Be.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},Yp=e=>{if(typeof e!="string"){const n=ut.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},N0=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?gG(r,o.getRng(),n,e.schema):n},hS=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=Yp(n);m4(e,{...r,content:N0(e,o),format:"html",set:!1,selection:!0}).each(i=>{const c=P9(e,i.content,r);g4(e,c,i),e.addVisual()})}},hG=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{hS(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{hS(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{hS(e,r)},mceInsertContent:(n,o,r)=>{hS(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(by(e))}})},Xp={"font-size":"size","font-family":"face"},pG=dr("font"),fA=(e,n,o)=>{const r=c=>vb(c,e).orThunk(()=>pG(c)?Fo(Xp,e).bind(d=>Aa(c,d)):N.none()),i=c=>Un(ne.fromDom(n),c);return xh(ne.fromDom(o),c=>r(c),i)},vG=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),RI=(e,n)=>N.from(Co.DOM.getStyle(n,e,!0)),mA=e=>(n,o)=>N.from(o).map(ne.fromDom).filter(ja).bind(r=>fA(e,n,r.dom).or(RI(e,r.dom))).getOr(""),gA=mA("font-size"),PI=x(vG,mA("font-family")),bG=e=>na(e.getBody()).bind(n=>{const o=n.container();return N.from(at(o)?o.parentNode:o)}),yG=e=>N.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?N.none():N.from(e.selection.getStart(!0))}),NI=(e,n)=>yG(e).orThunk(ht(bG,e)).map(ne.fromDom).filter(ja).bind(n),hA=(e,n)=>NI(e,pn(N.some,n)),pA=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=Bk(e),i=Lk(e);return i.length>0?i[o-1]||n:r[o-1]||n}else return n}else return n},vA=e=>{const n=e.split(/\s*,\s*/);return Ot(n,o=>o.indexOf(" ")!==-1&&!(Ps(o,'"')||Ps(o,"'"))?`'${o}'`:o).join(",")},II=(e,n)=>{const o=pA(e,n);e.formatter.toggle("fontname",{value:vA(o)}),e.nodeChanged()},CG=e=>hA(e,n=>PI(e.getBody(),n.dom)).getOr(""),SG=(e,n)=>{e.formatter.toggle("fontsize",{value:pA(e,n)}),e.nodeChanged()},xG=e=>hA(e,n=>gA(e.getBody(),n.dom)).getOr(""),BI=e=>hA(e,n=>{const o=ne.fromDom(e.getBody()),r=xh(n,c=>vb(c,"line-height"),ht(Un,o)),i=()=>{const c=parseFloat(nr(n,"line-height")),d=parseFloat(nr(n,"font-size"));return String(c/d)};return r.getOrThunk(i)}).getOr(""),bA=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},wG=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,i)=>{n(o,{value:i})},BackColor:(o,r,i)=>{n("hilitecolor",{value:i})},FontName:(o,r,i)=>{II(e,i)},FontSize:(o,r,i)=>{SG(e,i)},LineHeight:(o,r,i)=>{bA(e,i)},Lang:(o,r,i)=>{var c;n(o,{value:i.code,customValue:(c=i.customCode)!==null&&c!==void 0?c:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,i)=>{n(ee(i)?i:"p")},mceToggleFormat:(o,r,i)=>{n(i)}})},LI=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>CG(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>xG(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>BI(e))},FI=e=>{wG(e),LI(e)},EG=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},_I=e=>{e.editorCommands.addCommands({Indent:()=>{Rz(e)},Outdent:()=>{bP(e)}}),e.editorCommands.addCommands({Outdent:()=>mC(e)},"state")},TG=e=>{const n=(o,r,i)=>{if(e.mode.isReadOnly())return;const c=ee(i)?{href:i}:i,d=e.dom.getParent(e.selection.getNode(),"a");we(c)&&ee(c.href)&&(c.href=c.href.replace(/ /g,"%20"),(!d||!c.href)&&e.formatter.remove("link"),c.href&&e.formatter.apply("link",c,d))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},AG=(e,n,o,r)=>{const i=e.dom,c=g=>i.isBlock(g)&&g.parentElement===o,d=c(n)?n:i.getParent(r,c,o);return N.from(d).map(ne.fromDom)},I0=(e,n)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),i=n?e.selection.getStart():e.selection.getEnd(),c=n?r.startContainer:r.endContainer,d=y0(o,c);if(!d||!d.isContentEditable)return;const g=n?Ta:Kc,h=Ma(e);AG(e,i,d,c).each(y=>{const A=IC(e,c,y.dom,d,!1,h);g(y,ne.fromDom(A)),e.selection.setCursorLocation(A,0),e.dispatch("NewBlock",{newBlock:A}),_p(e,"insertParagraph")})},OG=e=>I0(e,!0),kG=e=>I0(e,!1),$I=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{OG(e)},InsertNewBlockAfter:()=>{kG(e)}})},HI=e=>{e.editorCommands.addCommands({insertParagraph:()=>{Vp(TZ,e)},mceInsertNewLine:(n,o,r)=>{LC(e,r)},InsertLineBreak:(n,o,r)=>{Vp(bT,e)}})},DG=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let i=0;e.dom.getParent(e.selection.getNode(),c=>Bt(c)&&i++===r?(e.selection.select(c),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),hc);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},MG=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const i=r??e.selection.getNode();if(i!==e.getBody()){const c=e.selection.getBookmark();e.dom.remove(i,!0),e.selection.moveToBookmark(c)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{rY(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},RG=e=>{mG(e),Kp(e),EG(e),DG(e),hG(e),TG(e),_I(e),$I(e),HI(e),FI(e),MG(e)},PG=["toggleview"],VI=e=>_t(PG,e.toLowerCase());class yA{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,i){const c=this.editor,d=n.toLowerCase(),g=i==null?void 0:i.skip_focus;if(c.removed||(d!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(d)&&!g?c.focus():_F(c)),c.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const y=this.commands.exec[d];return Tt(y)?(y(d,o,r),c.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!VI(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return Tt(r)?r(o):!1}queryCommandValue(n){if(!VI(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return Tt(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;$e(n,(i,c)=>{ke(c.toLowerCase().split(","),d=>{r[o][d]=i})})}addCommand(n,o,r){const i=n.toLowerCase();this.commands.exec[i]=(c,d,g)=>o.call(r??this.editor,d,g)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const NG=ut.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class CA{static isNative(n){return!!NG[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ie}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),i=Lm(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);const c=this.bindings[r];if(c)for(let d=0,g=c.length;d<g;d++){const h=c[d];if(!h.removed){if(h.once&&this.off(r,h.func),i.isImmediatePropagationStopped())return i;if(h.func.call(this.scope,i)===!1)return i.preventDefault(),i}}return i}on(n,o,r,i){if(o===!1&&(o=Ie),o){const c={func:o,removed:!1};i&&ut.extend(c,i);const d=n.toLowerCase().split(" ");let g=d.length;for(;g--;){const h=d[g];let y=this.bindings[h];y||(y=[],this.toggleEvent(h,!0)),r?y=[c,...y]:y=[...y,c],this.bindings[h]=y}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let i=r.length;for(;i--;){const c=r[i];let d=this.bindings[c];if(!c)return $e(this.bindings,(g,h)=>{this.toggleEvent(h,!1),delete this.bindings[h]}),this;if(d){if(!o)d.length=0;else{const g=Sr(d,h=>h.func===o);d=g.fail,this.bindings[c]=d,ke(g.pass,h=>{h.removed=!0})}d.length||(this.toggleEvent(n,!1),delete this.bindings[c])}}}else $e(this.bindings,(r,i)=>{this.toggleEvent(i,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const B0=e=>(e._eventDispatcher||(e._eventDispatcher=new CA({scope:e,toggleEvent:(n,o)=>{CA.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),SA={fire(e,n,o){return console.warn('The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',new Error().stack),this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return Lm(e.toLowerCase(),n??{},r);const i=B0(r).dispatch(e,n);if(o!==!1&&r.parent){let c=r.parent();for(;c&&!i.isPropagationStopped();)c.dispatch(e,i,!1),c=c.parent?c.parent():void 0}return i},on(e,n,o){return B0(this).on(e,n,o)},off(e,n){return B0(this).off(e,n)},once(e,n){return B0(this).once(e,n)},hasEventListeners(e){return B0(this).has(e)}},pS=Co.DOM;let Zg;const vS=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=gk(e);return o?(e.eventRoot||(e.eventRoot=pS.select(o)[0]),e.eventRoot):e.getBody()},IG=e=>!e.hidden&&!Ic(e),xA=(e,n,o)=>{IG(e)?e.dispatch(n,o):Ic(e)&&j4(e,o)},wA=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=vS(e,n);if(gk(e)){if(Zg||(Zg={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Zg&&($e(Zg,(i,c)=>{e.dom.unbind(vS(e,c))}),Zg=null)})),Zg[n])return;const r=i=>{const c=i.target,d=e.editorManager.get();let g=d.length;for(;g--;){const h=d[g].getBody();(h===c||pS.isChildOf(c,h))&&xA(d[g],n,i)}};Zg[n]=r,pS.bind(o,n,r)}else{const r=i=>{xA(e,n,i)};pS.bind(o,n,r),e.delegates[n]=r}},zI={...SA,bindPendingEventDelegates(){const e=this;ut.each(e._pendingNativeEvents,n=>{wA(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?wA(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(vS(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&($e(e.delegates,(r,i)=>{e.dom.unbind(vS(e,i),i,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},BG=e=>ee(e)?{value:e.split(/[ ,]/),valid:!0}:it(e,ee)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},LG=e=>{const n=(()=>{switch(e){case"array":return Ke;case"boolean":return ct;case"function":return Tt;case"number":return St;case"object":return we;case"string":return ee;case"string[]":return BG;case"object[]":return o=>it(o,we);case"regexp":return o=>pe(o,RegExp);default:return Qe}})();return o=>bS(o,n,`The value must be a ${e}.`)},L0=e=>ee(e.processor),UI=(e,n)=>{const o=oc(n.message)?"":`. ${n.message}`;return e+o},ZI=e=>e.valid,bS=(e,n,o="")=>{const r=n(e);return ct(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},FG=(e,n,o)=>{if(!Je(n)){const r=bS(n,o);if(ZI(r))return r.value;console.error(UI(`Invalid default value passed for the "${e}" option`,r))}},_G=(e,n,o=n)=>{const r={},i={},c=(_,Z,V)=>{const G=bS(Z,V);return ZI(G)?(i[_]=G.value,!0):(console.warn(UI(`Invalid value passed for the ${_} option`,G)),!1)},d=(_,Z)=>{const V=L0(Z)?LG(Z.processor):Z.processor,G=FG(_,Z.default,V);r[_]={...Z,default:G,processor:V},Fo(i,_).orThunk(()=>Fo(n,_)).each(ue=>c(_,ue,V))},g=_=>nn(r,_);return{register:d,isRegistered:g,get:_=>Fo(i,_).orThunk(()=>Fo(r,_).map(Z=>Z.default)).getOrUndefined(),set:(_,Z)=>{if(g(_)){const V=r[_];return V.immutable?(console.error(`"${_}" is an immutable option and cannot be updated`),!1):c(_,Z,V.processor)}else return console.warn(`"${_}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:_=>{const Z=g(_);return Z&&delete i[_],Z},isSet:_=>nn(i,_),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(_,Z)=>ct(Z)||St(Z)||ee(Z)||te(Z)||Ke(Z)||bt(Z)?Z:Object.prototype.toString.call(Z))))}catch(_){console.error(_)}}}},$G=(e,n)=>{e.dom.contentEditable="true"},HG=(e,n)=>{const o=ne.fromDom(e.getBody());n?(e.readonly=!0,e.hasEditableRoot()&&$G(o),z4(e)):(e.readonly=!1,K2(e))},Jp=e=>e.readonly,yS=e=>{const n=e.undoManager.add();Ce(n)&&(e.undoManager.undo(),e.undoManager.reset())},WI=e=>to(e,n=>n.type==="characterData"||n.type==="childList"),jI=e=>{const n=r=>{Jp(e)&&WI(r)&&yS(e)},o=new MutationObserver(n);e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",r=>{Jp(e)&&r.preventDefault()}),e.on("BeforeExecCommand",r=>{(r.command==="Undo"||r.command==="Redo")&&Jp(e)&&r.preventDefault()}),e.on("compositionstart",()=>{Jp(e)&&o.observe(e.getBody(),{characterData:!0,childList:!0,subtree:!0})}),e.on("compositionend",()=>{if(Jp(e)){const r=o.takeRecords();n(r)}o.disconnect()})},VG=["design","readonly"],GI=(e,n,o,r)=>{const i=o[n.get()],c=o[r];try{c.activate()}catch(d){console.error(`problem while activating editor mode ${r}:`,d);return}i.deactivate(),i.editorReadOnly!==c.editorReadOnly&&HG(e,c.editorReadOnly),n.set(r),q7(e,r)},zG=(e,n,o,r)=>{if(!(r===o.get()||e.initialized&&Ic(e))){if(!nn(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?GI(e,o,n,r):e.on("init",()=>GI(e,o,n,r))}},nX=(e,n,o)=>{if(_t(VG,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},UG=e=>{const n=is("design"),o=is({design:{activate:et,deactivate:et,editorReadOnly:!1},readonly:{activate:et,deactivate:et,editorReadOnly:!0}});return jI(e),Kf(e),{isReadOnly:()=>Jp(e),set:r=>zG(e,o.get(),n,r),get:()=>n.get(),register:(r,i)=>{o.set(nX(o.get(),r,i))}}},EA=ut.each,F0=ut.explode,CS={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},KI=ut.makeMap("alt,ctrl,shift,meta,access"),ZG=e=>e in KI,WG=e=>{const n={},o=no.os.isMacOS()||no.os.isiOS();EA(F0(e.toLowerCase(),"+"),c=>{ZG(c)?n[c]=!0:/^[0-9]{2,}$/.test(c)?n.keyCode=parseInt(c,10):(n.charCode=c.charCodeAt(0),n.keyCode=CS[c]||c.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let i;for(i in KI)n[i]?r.push(i):n[i]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class TA{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(EA(o.shortcuts,i=>{o.matchShortcut(r,i)&&(o.pendingPatterns=i.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(i))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,i){const c=this,d=c.normalizeCommandFunc(r);return EA(F0(ut.trim(n)),g=>{const h=c.createShortcut(g,o,d,i);c.shortcuts[h.id]=h}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:ut.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,i){const c=ut.map(F0(n,">"),WG);return c[c.length-1]=ut.extend(c[c.length-1],{func:r,scope:i||this.editor}),ut.extend(c[0],{desc:this.editor.translate(o),subpatterns:c.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const jG=()=>{const e=MN();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},tf=Co.DOM,AA=ut.extend,GG=ut.each;class SS{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,AA(this,zI);const i=this;this.id=n,this.hidden=!1;const c=gS(r.defaultOptions,o);this.options=_G(i,c,o),cn(i);const d=this.options.get;d("deprecation_warnings")&&aV(o,c);const g=d("suffix");g&&(r.suffix=g),this.suffix=r.suffix;const h=d("base_url");h&&r._setBaseUrl(h),this.baseUri=r.baseURI;const y=Pl(i);y&&(Ad.ScriptLoader._setReferrerPolicy(y),Co.DOM.styleSheetLoader._setReferrerPolicy(y));const A=Ck(i);Ce(A)&&Co.DOM.styleSheetLoader._setContentCssCors(A),gr.languageLoad=d("language_load"),gr.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Rc(lL(i),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=io(i),this.hasVisual=Sk(i),this.shortcuts=new TA(this),this.editorCommands=new yA(this),RG(this);const M=d("cache_suffix");M&&(no.cacheSuffix=M.replace(/^[\?\&]+/,"")),this.ui={registry:jG(),styleSheetLoader:void 0,show:et,hide:et,setEnabled:et,isEnabled:Qe},this.mode=UG(i),r.dispatch("SetupEditor",{editor:this});const R=Ek(i);Tt(R)&&R.call(i,i)}render(){oG(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return qm(this)}translate(n){return Ks.translate(n)}getParam(n,o,r){const i=this.options;return i.isRegistered(n)||(Ce(r)?i.register(n,{processor:r,default:o}):i.register(n,{processor:Qe,default:o})),!i.isSet(n)&&!Je(o)?o:i.get(n)}hasPlugin(n,o){return _t(Bf(this),n)?o?Cg.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,i){this.shortcuts.add(n,o,r,i)}execCommand(n,o,r,i){return this.editorCommands.execCommand(n,o,r,i)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(tf.show(n.getContainer()),tf.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(tf.hide(n.getContainer()),tf.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const i={...n,load:!0},c=Db(r)?r.value:r.innerHTML,d=o.setContent(c,i);return i.no_events||o.dispatch("LoadContent",{...i,element:r}),d}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const i={...n,save:!0,element:r};let c=o.getContent(i);const d={...i,content:c};if(d.no_events||o.dispatch("SaveContent",d),d.format==="raw"&&o.dispatch("RawSaveContent",d),c=d.content,Db(r))r.value=c;else{(n.is_removing||!o.inline)&&(r.innerHTML=c);const g=tf.getParent(o.id,"form");g&&GG(g.elements,h=>h.name===o.id?(h.value=c,!1):!0)}return d.element=i.element=r=null,d.set_dirty!==!1&&o.setDirty(!1),c}setContent(n,o){return Uf(this,n,o)}getContent(n){return q9(this,n)}insertContent(n,o){o&&(n=AA({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?Uf(this,this.startContent,{format:"raw"}):Uf(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||tf.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=tf.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const i=this,c=i.options.get,d=ML(i);if(Tt(d))return d.call(i,n,r,!0,o);if(!c("convert_urls")||r==="link"||we(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const g=new Rc(n);return g.protocol!=="http"&&g.protocol!=="https"&&g.protocol!==""?n:c("relative_urls")?i.documentBaseURI.toRelative(n):(n=i.documentBaseURI.toAbsolute(n,c("remove_script_host")),n)}addVisual(n){uA(this,n)}setEditableRoot(n){sG(this,n)}hasEditableRoot(){return AI(this)}remove(){$6(this)}destroy(n){H6(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Wg=Co.DOM,xS=ut.each;let KG=!1,wS,fi=[];const ES=e=>{const n=e.type;xS(nm.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},OA=e=>{if(e!==KG){const n=Co.DOM;e?(n.bind(window,"resize",ES),n.bind(window,"scroll",ES)):(n.unbind(window,"resize",ES),n.unbind(window,"scroll",ES)),KG=e}},jg=e=>{const n=fi;return fi=Ht(fi,o=>e!==o),nm.activeEditor===e&&(nm.activeEditor=fi.length>0?fi[0]:null),nm.focusedEditor===e&&(nm.focusedEditor=null),n.length!==fi.length},YI=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(jg(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},YG=document.compatMode!=="CSS1Compat",nm={...SA,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"9.0",releaseDate:"2025-05-15",i18n:Ks,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Rc.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const i=window.tinymce||window.tinyMCEPreInit;if(i)n=i.base||i.baseURL,o=i.suffix;else{const c=document.getElementsByTagName("script");for(let d=0;d<c.length;d++){const g=c[d].src||"";if(g==="")continue;const h=g.substring(g.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(g)){h.indexOf(".min")!==-1&&(o=".min"),n=g.substring(0,g.lastIndexOf("/"));break}}if(!n&&document.currentScript){const d=document.currentScript.src;d.indexOf(".min")!==-1&&(o=".min"),n=d.substring(0,d.lastIndexOf("/"))}}e.baseURL=new Rc(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Rc(e.baseURL),e.suffix=o,XF(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&$e(r,(i,c)=>{gr.PluginManager.urls[c]=i})},init(e){const n=this;let o;const r=ut.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),i=(A,M)=>A.inline&&M.tagName.toLowerCase()in r,c=A=>{let M=A.id;return M||(M=Fo(A,"name").filter(R=>!Wg.get(R)).getOrThunk(Wg.uniqueId),A.setAttribute("id",M)),M},d=A=>{const M=e[A];if(M)return M.apply(n,[])},g=A=>no.browser.isIE()||no.browser.isEdge()?(Qv("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):YG?(Qv("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ee(A.selector)?Wg.select(A.selector):Ce(A.target)?[A.target]:[];let h=A=>{o=A};const y=()=>{let A=0;const M=[];let R;const _=(Z,V,G)=>{const oe=new SS(Z,V,n);M.push(oe),oe.on("init",()=>{++A===R.length&&h(M)}),oe.targetElm=oe.targetElm||G,oe.render()};Wg.unbind(window,"ready",y),d("onpageload"),R=wn(g(e)),ut.each(R,Z=>{YI(n.get(Z.id))}),R=ut.grep(R,Z=>!n.get(Z.id)),R.length===0?h([]):xS(R,Z=>{i(e,Z)?Qv("Could not initialize inline editor on invalid inline target element",Z):_(c(Z),e,Z)})};return Wg.bind(window,"ready",y),new Promise(A=>{o?A(o):h=M=>{A(M)}})},get(e){return arguments.length===0?fi.slice(0):ee(e)?No(fi,n=>n.id===e).getOr(null):St(e)&&fi[e]?fi[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&fi.push(e),OA(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),wS||(wS=r=>{const i=n.dispatch("BeforeUnload");if(i.returnValue)return r.preventDefault(),r.returnValue=i.returnValue,i.returnValue},window.addEventListener("beforeunload",wS))),e},createEditor(e,n){return this.add(new SS(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=fi.length-1;r>=0;r--)n.remove(fi[r]);return}if(ee(e)){xS(Wg.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,te(n.get(o.id))?null:(jg(o)&&n.dispatch("RemoveEditor",{editor:o}),fi.length===0&&window.removeEventListener("beforeunload",wS),o.remove(),OA(fi.length>0),o)},execCommand(e,n,o){var r;const i=this,c=we(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!i.get(c)){const d=o.options;new SS(c,d,i).render()}return!0}case"mceRemoveEditor":{const d=i.get(c);return d&&d.remove(),!0}case"mceToggleEditor":{const d=i.get(c);return d?(d.isHidden()?d.show():d.hide(),!0):(i.execCommand("mceAddEditor",!1,o),!0)}}return i.activeEditor?i.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{xS(fi,e=>{e.save()})},addI18n:(e,n)=>{Ks.add(e,n)},translate:e=>Ks.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Rc(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Rc(this.baseURL)}};nm.setup();const XG=(()=>{const e=Gr(),n=c=>({items:c,types:Yt(c),getType:d=>Fo(c,d).getOrUndefined()}),o=c=>{e.set(c)},r=()=>e.get().getOrUndefined(),i=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:i}})(),kA=Math.min,Qp=Math.max,_0=Math.round,XI=(e,n,o)=>{let r=n.x,i=n.y;const c=e.w,d=e.h,g=n.w,h=n.h,y=(o||"").split("");return y[0]==="b"&&(i+=h),y[1]==="r"&&(r+=g),y[0]==="c"&&(i+=_0(h/2)),y[1]==="c"&&(r+=_0(g/2)),y[3]==="b"&&(i-=d),y[4]==="r"&&(r-=c),y[3]==="c"&&(i-=_0(d/2)),y[4]==="c"&&(r-=_0(c/2)),qp(r,i,c,d)},JG=(e,n,o,r)=>{for(let i=0;i<r.length;i++){const c=XI(e,n,r[i]);if(c.x>=o.x&&c.x+c.w<=o.w+o.x&&c.y>=o.y&&c.y+c.h<=o.h+o.y)return r[i]}return null},DA=(e,n,o)=>qp(e.x-n,e.y-o,e.w+n*2,e.h+o*2),JI=(e,n)=>{const o=Qp(e.x,n.x),r=Qp(e.y,n.y),i=kA(e.x+e.w,n.x+n.w),c=kA(e.y+e.h,n.y+n.h);return i-o<0||c-r<0?null:qp(o,r,i-o,c-r)},sX=(e,n,o)=>{let r=e.x,i=e.y,c=e.x+e.w,d=e.y+e.h;const g=n.x+n.w,h=n.y+n.h,y=Qp(0,n.x-r),A=Qp(0,n.y-i),M=Qp(0,c-g),R=Qp(0,d-h);return r+=y,i+=A,o&&(c+=y,d+=A,r-=M,i-=R),c-=M,d-=R,qp(r,i,c-r,d-i)},qp=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),qG={inflate:DA,relativePosition:XI,findBestRelativePosition:JG,intersect:JI,clamp:sX,create:qp,fromClientRect:e=>qp(e.left,e.top,e.width,e.height)},MA=(e,n,o=1e3)=>{let r=!1,i=null;const c=y=>(...A)=>{r||(r=!0,i!==null&&(window.clearTimeout(i),i=null),y.apply(null,A))},d=c(e),g=c(n);return{start:(...y)=>{!r&&i===null&&(i=window.setTimeout(()=>g.apply(null,y),o))},resolve:d,reject:g}},eK=(()=>{const e={},n={},o={};return{load:(h,y)=>{const A=`Script at URL "${y}" failed to load`,M=`Script at URL "${y}" did not call \`tinymce.Resource.add('${h}', data)\` within 1 second`;if(e[h]!==void 0)return e[h];{const R=new Promise((_,Z)=>{const V=MA(_,Z);n[h]=V.resolve,Ad.ScriptLoader.loadScript(y).then(()=>V.start(M),()=>V.reject(A))});return e[h]=R,R}},add:(h,y)=>{n[h]!==void 0&&(n[h](y),delete n[h]),e[h]=Promise.resolve(y),o[h]=y},has:h=>h in o,get:h=>o[h],unload:h=>{delete e[h],delete o[h]}}})(),tK=()=>(()=>{let e={},n=[];const o={getItem:r=>{const i=e[r];return i||null},setItem:(r,i)=>{n.push(r),e[r]=String(i)},key:r=>n[r],removeItem:r=>{n=n.filter(i=>i===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let e1;try{const e="__storage_test__";e1=window.localStorage,e1.setItem(e,e),e1.removeItem(e)}catch{e1=tK()}var TS=e1;const QI={geom:{Rect:qG},util:{Delay:_l,Tools:ut,VK:Mt,URI:Rc,EventDispatcher:CA,Observable:SA,I18n:Ks,LocalStorage:TS,ImageUploader:J4},dom:{EventUtils:qc,TreeWalker:_r,TextSeeker:zu,DOMUtils:Co,ScriptLoader:Ad,RangeUtils:nl,Serializer:N6,StyleSheetLoader:Pm,ControlSelection:kD,BookmarkManager:mv,Selection:R6,Event:qc.Event},html:{Styles:Hu,Entities:_o,Node:Ka,Schema:ma,DomParser:yg,Writer:oE,Serializer:Vd},Env:no,AddOnManager:gr,Annotator:Ly,Formatter:Ro,UndoManager:t3,EditorCommands:yA,WindowManager:Xv,NotificationManager:G6,EditorObservable:zI,Shortcuts:TA,Editor:SS,FocusManager:Fl,EditorManager:nm,DOM:Co.DOM,ScriptLoader:Ad.ScriptLoader,PluginManager:Cg,ThemeManager:jf,ModelManager:Wf,IconManager:pp,Resource:eK,FakeClipboard:XG,trim:ut.trim,isArray:ut.isArray,is:ut.is,toArray:ut.toArray,makeMap:ut.makeMap,each:ut.each,map:ut.map,grep:ut.grep,inArray:ut.inArray,extend:ut.extend,walk:ut.walk,resolve:ut.resolve,explode:ut.explode,_addCacheSuffix:ut._addCacheSuffix},RA=ut.extend(nm,QI),nK=e=>{try{U.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(RA),nK(RA)})()})(pJ);var Zee=pJ.exports;const mu=gJ(Zee);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12.7 18.3a1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7 1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7v-1a1 1 0 0 0-.3-.7ZM11.3 5.7a1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3A1 1 0 0 0 13 5V4a1 1 0 0 0-.3-.7A1 1 0 0 0 12 3a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7Zm9.4 5.6a1 1 0 0 0-.7-.3h-1a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7Zm-15 1.4A1 1 0 0 0 6 12a1 1 0 0 0-.3-.7A1 1 0 0 0 5 11H4a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3Zm13 4.6-.7-.8a1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.8l.7.7a1 1 0 0 0 .7.3 1 1 0 0 0 .8-.3 1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7ZM5.3 6.7l.7.8a1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.8l-.7-.7A1 1 0 0 0 6 5a1 1 0 0 0-.8.3 1 1 0 0 0-.3.8 1 1 0 0 0 .3.6Zm12 1a1 1 0 0 0 .7-.2l.7-.7A1 1 0 0 0 19 6a1 1 0 0 0-.3-.8 1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3l-.7.7a1 1 0 0 0-.3.8 1 1 0 0 0 .3.7 1 1 0 0 0 .7.2ZM6.7 16.4a1 1 0 0 0-.8.2l-.7.7a1 1 0 0 0-.3.7 1 1 0 0 0 .3.8 1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3l.7-.7a1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3Z"/><path fill-rule="evenodd" d="M13.6 8.3A4 4 0 0 0 12 8a4 4 0 0 0-1.6.3A4 4 0 0 0 9 9.5a4 4 0 0 0-.6 1A4 4 0 0 0 8 12c0 .6.1 1 .3 1.6a4 4 0 0 0 2.1 2 4 4 0 0 0 1.6.4 4 4 0 0 0 1.6-.3 4 4 0 0 0 2-2.1A4 4 0 0 0 16 12a4 4 0 0 0-.3-1.6 4 4 0 0 0-2.1-2ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24" class="color-swatch-remove-color"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 0 1 19.4 9c.4 1 .6 2 .6 3.1s-.2 2.1-.6 3.1a8 8 0 0 1-1.7 2.6 8 8 0 0 1-2.6 1.7 7.8 7.8 0 0 1-3.1.6 7.8 7.8 0 0 1-3.1-.6 8 8 0 0 1-2.6-1.7A8 8 0 0 1 4.6 15 7.8 7.8 0 0 1 4 12c0-1.1.2-2.1.6-3.1a8 8 0 0 1 1.7-2.6A8 8 0 0 1 9 4.6 7.8 7.8 0 0 1 12 4Zm-6 8a6 6 0 0 0 1.8 4.2 6 6 0 0 0 1.9 1.3 5.8 5.8 0 0 0 2.3.5V6c-.8 0-1.6.2-2.3.5a6 6 0 0 0-2 1.3 6 6 0 0 0-1.2 1.9A5.8 5.8 0 0 0 6 12Z"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg height="24" width="24"><path d="M11.5 16.3a.7.7 0 1 0 1.4 0V14l2.7-6a.7.7 0 1 0-1.2-.6l-2.2 5-2.3-4.9C9.6 7 8.7 7 8 7.2v1.1c.8-.2.9 0 1.2 1l2.3 4.7z"/><path d="M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2h14v14H5z" fill-rule="evenodd"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg height="24" width="24"><path d="M5 4 3.6 5.4l3.9 4C6.6 10.7 6 12.3 6 14a6 6 0 0 0 10.3 4.2l1.9 1.8 1.4-1.4z" fill-rule="evenodd"/><path d="M13.4 8.4c.9 1 1.6 2.1 2 3.2l2.6 2.6V14c0-5-6-10-6-10s-1 .8-2.1 2l1.4 1.5.7-.7 1.4 1.6z"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg height="48" width="48"><path d="M8 14a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 34a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-default":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M12 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M16 31h6v6h-6z"/><path d="M16 31h6v6h-6z"/><path d="M18 12h22v4H18zm4 10h18v4H22zm4 10h14v4H26z" opacity=".2"/></svg>',"list-bull-disc":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-square":'<svg height="48" width="48"><path d="M8 21h6v6H8zm0 10h6v6H8zm0-20h6v6H8z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path fill-rule="evenodd" d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',"auto-image-enhancement":'<svg width="24" height="24"><path d="M7.7 10.6a5.8 5.8 0 0 0 5.7 5.7A5.8 5.8 0 0 0 7.7 22 5.8 5.8 0 0 0 2 16.3a5.8 5.8 0 0 0 5.7-5.7ZM15.5 2c.3 3 3.3 6 6.5 6.4-3.2.5-6.2 3.4-6.5 6.5-.3-3.4-3-6-6.4-6.5 3.3-.5 6.1-3 6.4-6.4Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><path d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.4 0H19v3.6zm-2.8 0h-2.2l8.6 8.6v-2.2zm-5 0H5l14 14v-2.6z" fill-rule="evenodd"/></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"photo-filter":'<svg height="24" width="24"><path d="M4.4 21c-.3 0-.6-.2-.9-.5-.3-.3-.4-.6-.5-.9L19.6 3c.3 0 .6.3.9.5l.5.9zM3 14.7v-2.8L11.9 3h2.8zM3 7V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h2zm14 14 4-4v2c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm-7.7 0L21 9.3v2.8L12 21z"/></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',vibrance:'<svg height="24" width="24"><path d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var U=tinymce.util.Tools.resolve("tinymce.PluginManager");const w=($,q,de)=>{var Ve;return de($,q.prototype)?!0:((Ve=$.constructor)===null||Ve===void 0?void 0:Ve.name)===q.name},F=$=>{const q=typeof $;return $===null?"null":q==="object"&&Array.isArray($)?"array":q==="object"&&w($,String,(de,Ve)=>Ve.isPrototypeOf(de))?"string":q},T=$=>q=>F(q)===$,P=$=>q=>typeof q===$,j=$=>q=>$===q,S=T("string"),B=T("object"),O=T("array"),z=j(null),K=P("boolean"),J=$=>$==null,re=$=>!J($),ce=P("function"),me=($,q)=>{if(O($)){for(let de=0,Ve=$.length;de<Ve;++de)if(!q($[de]))return!1;return!0}return!1},fe=()=>{},ye=$=>()=>$,Fe=($,q)=>$===q;class pe{constructor(q,de){this.tag=q,this.value=de}static some(q){return new pe(!0,q)}static none(){return pe.singletonNone}fold(q,de){return this.tag?de(this.value):q()}isSome(){return this.tag}isNone(){return!this.tag}map(q){return this.tag?pe.some(q(this.value)):pe.none()}bind(q){return this.tag?q(this.value):pe.none()}exists(q){return this.tag&&q(this.value)}forall(q){return!this.tag||q(this.value)}filter(q){return!this.tag||q(this.value)?this:pe.none()}getOr(q){return this.tag?this.value:q}or(q){return this.tag?this:q}getOrThunk(q){return this.tag?this.value:q()}orThunk(q){return this.tag?this:q()}getOrDie(q){if(this.tag)return this.value;throw new Error(q??"Called getOrDie on None")}static from(q){return re(q)?pe.some(q):pe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(q){this.tag&&q(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}pe.singletonNone=new pe(!1);const ee=Array.prototype.indexOf,we=Array.prototype.push,bt=($,q)=>ee.call($,q),Ke=($,q)=>bt($,q)>-1,te=($,q)=>{const de=$.length,Ve=new Array(de);for(let ft=0;ft<de;ft++){const Dt=$[ft];Ve[ft]=q(Dt,ft)}return Ve},ct=($,q)=>{for(let de=0,Ve=$.length;de<Ve;de++){const ft=$[de];q(ft,de)}},Je=($,q,de)=>(ct($,(Ve,ft)=>{de=q(de,Ve,ft)}),de),dt=$=>{const q=[];for(let de=0,Ve=$.length;de<Ve;++de){if(!O($[de]))throw new Error("Arr.flatten item "+de+" was not an array, input: "+$);we.apply(q,$[de])}return q},Ce=($,q)=>dt(te($,q)),Tt=($,q)=>{for(let de=0;de<$.length;de++){const Ve=q($[de],de);if(Ve.isSome())return Ve}return pe.none()},St=Object.keys,it=Object.hasOwnProperty,et=($,q)=>{const de=St($);for(let Ve=0,ft=de.length;Ve<ft;Ve++){const Dt=de[Ve],Ln=$[Dt];q(Ln,Dt)}},x=$=>(q,de)=>{$[de]=q},pn=($,q,de,Ve)=>{et($,(ft,Dt)=>{(q(ft,Dt)?de:Ve)(ft,Dt)})},Ye=($,q)=>{const de={};return pn($,q,x(de),fe),de},Xn=($,q)=>it.call($,q),vs=($,q)=>Xn($,q)&&$[q]!==void 0&&$[q]!==null,ht=$=>{let q=$;return{get:()=>q,set:ft=>{q=ft}}},An=($,q,de=Fe)=>$.exists(Ve=>de(Ve,q)),yn=$=>{const q=[],de=Ve=>{q.push(Ve)};for(let Ve=0;Ve<$.length;Ve++)$[Ve].each(de);return q},Oo=($,q)=>$?pe.some(q):pe.none(),Io=$=>{const q=ht(pe.none()),de=()=>q.get().each($);return{clear:()=>{de(),q.set(pe.none())},isSet:()=>q.get().isSome(),get:()=>q.get(),set:ys=>{de(),q.set(pe.some(ys))}}},Ie=()=>{const $=Io(fe);return{...$,on:de=>$.get().each(de)}},Qe=($,q)=>$.substring(q),N=($,q,de)=>q===""||$.length>=q.length&&$.substr(de,de+q.length)===q,Os=($,q)=>eo($,q)?Qe($,q.length):$,eo=($,q)=>N($,q,0),as=$=>q=>q.options.get($),Bo=$=>{const q=$.options.register;q("link_assume_external_targets",{processor:de=>{const Ve=S(de)||K(de);return Ve?de===!0?{value:1,valid:Ve}:de==="http"||de==="https"?{value:de,valid:Ve}:{value:0,valid:Ve}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),q("link_context_toolbar",{processor:"boolean",default:!1}),q("link_list",{processor:de=>S(de)||ce(de)||me(de,B)}),q("link_default_target",{processor:"string"}),q("link_default_protocol",{processor:"string",default:"https"}),q("link_target_list",{processor:de=>K(de)||me(de,B),default:!0}),q("link_rel_list",{processor:"object[]",default:[]}),q("link_class_list",{processor:"object[]",default:[]}),q("link_title",{processor:"boolean",default:!0}),q("allow_unsafe_link_target",{processor:"boolean",default:!1}),q("link_quicklink",{processor:"boolean",default:!1}),q("link_attributes_postprocess",{processor:"function"})},Bs=as("link_assume_external_targets"),_t=as("link_context_toolbar"),to=as("link_list"),Ot=as("link_default_target"),ke=as("link_default_protocol"),ia=as("link_target_list"),Sr=as("link_rel_list"),Ht=as("link_class_list"),ur=as("link_title"),Ko=as("allow_unsafe_link_target"),za=as("link_quicklink"),No=as("link_attributes_postprocess");var bs=tinymce.util.Tools.resolve("tinymce.util.URI"),jr=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Rs=tinymce.util.Tools.resolve("tinymce.util.Tools");const xn=$=>re($)&&$.nodeName.toLowerCase()==="a",Re=$=>xn($)&&!!ot($),_e=($,q)=>{if($.collapsed)return[];{const de=$.cloneContents(),Ve=de.firstChild,ft=new jr(Ve,de),Dt=[];let Ln=Ve;do q(Ln)&&Dt.push(Ln);while(Ln=ft.next());return Dt}},ze=$=>/^\w+:/i.test($),ot=$=>{var q,de;return(de=(q=$.getAttribute("data-mce-href"))!==null&&q!==void 0?q:$.getAttribute("href"))!==null&&de!==void 0?de:""},en=($,q)=>{const de=["noopener"],Ve=$?$.split(/\s+/):[],ft=po=>Rs.trim(po.sort().join(" ")),Dt=po=>(po=Ln(po),po.length>0?po.concat(de):de),Ln=po=>po.filter(Cs=>Rs.inArray(de,Cs)===-1),ys=q?Dt(Ve):Ln(Ve);return ys.length>0?ft(ys):""},sn=$=>$.replace(/\uFEFF/g,""),On=($,q)=>(q=q||wn($.selection.getRng())[0]||$.selection.getNode(),To(q)?pe.from($.dom.select("a[href]",q)[0]):pe.from($.dom.getParent(q,"a[href]"))),Vn=($,q)=>On($,q).isSome(),Lo=($,q)=>{const de=q.fold(()=>$.getContent({format:"text"}),Ve=>Ve.innerText||Ve.textContent||"");return sn(de)},wn=$=>_e($,Re),Yt=$=>Rs.grep($,Re),Dn=$=>Yt($).length>0,$e=$=>wn($).length>0,yt=$=>{const q=$.schema.getTextInlineElements(),de=Dt=>Dt.nodeType===1&&!xn(Dt)&&!Xn(q,Dt.nodeName.toLowerCase());if(On($).exists(Dt=>Dt.hasAttribute("data-mce-block")))return!1;const ft=$.selection.getRng();return ft.collapsed?!0:_e(ft,de).length===0},To=$=>re($)&&$.nodeName==="FIGURE"&&/\bimage\b/i.test($.className),zi=$=>Je(["title","rel","class","target"],(de,Ve)=>($[Ve].each(ft=>{de[Ve]=ft.length>0?ft:null}),de),{href:$.href}),Ir=($,q)=>(q==="http"||q==="https")&&!ze($)?q+"://"+$:$,Rt=($,q)=>{const de={...q};if(Sr($).length===0&&!Ko($)){const Ve=en(de.rel,de.target==="_blank");de.rel=Ve||null}return pe.from(de.target).isNone()&&ia($)===!1&&(de.target=Ot($)),de.href=Ir(de.href,Bs($)),de},bi=($,q,de,Ve)=>{de.each(Dt=>{Xn(q,"innerText")?q.innerText=Dt:q.textContent=Dt}),$.dom.setAttribs(q,Ve);const ft=$.dom.createRng();ft.setStartAfter(q),ft.setEndAfter(q),$.selection.setRng(ft)},fd=($,q,de,Ve)=>{const ft=$.dom;To(q)?md(ft,q,Ve):de.fold(()=>{$.execCommand("mceInsertLink",!1,Ve);const Dt=$.selection.getEnd(),Ln=ft.createRng();Ln.setStartAfter(Dt),Ln.setEndAfter(Dt),$.selection.setRng(Ln)},Dt=>{$.insertContent(ft.createHTML("a",Ve,ft.encode(Dt)))})},pu=($,q,de)=>{const Ve=$.selection.getNode(),ft=On($,Ve),Dt=Rt($,zi(de)),Ln=No($);re(Ln)&&Ln(Dt),$.undoManager.transact(()=>{de.href===q.href&&q.attach(),ft.fold(()=>{fd($,Ve,de.text,Dt)},ys=>{$.focus(),bi($,ys,de.text,Dt)})})},Fo=$=>{const q=$.dom,de=$.selection,Ve=de.getBookmark(),ft=de.getRng().cloneRange(),Dt=q.getParent(ft.startContainer,"a[href]",$.getBody()),Ln=q.getParent(ft.endContainer,"a[href]",$.getBody());Dt&&ft.setStartBefore(Dt),Ln&&ft.setEndAfter(Ln),de.setRng(ft),$.execCommand("unlink"),de.moveToBookmark(Ve)},nn=$=>{$.undoManager.transact(()=>{const q=$.selection.getNode();To(q)?is($,q):Fo($),$.focus()})},Wc=$=>{const{class:q,href:de,rel:Ve,target:ft,text:Dt,title:Ln}=$;return Ye({class:q.getOrNull(),href:de,rel:Ve.getOrNull(),target:ft.getOrNull(),text:Dt.getOrNull(),title:Ln.getOrNull()},(ys,po)=>z(ys)===!1)},th=($,q)=>{const de=$.options.get,Ve={allow_html_data_urls:de("allow_html_data_urls"),allow_script_urls:de("allow_script_urls"),allow_svg_data_urls:de("allow_svg_data_urls")},ft=q.href;return{...q,href:bs.isDomSafe(ft,"a",Ve)?ft:""}},ns=($,q,de)=>{const Ve=th($,de);$.hasPlugin("rtc",!0)?$.execCommand("createlink",!1,Wc(Ve)):pu($,q,Ve)},xr=$=>{$.hasPlugin("rtc",!0)?$.execCommand("unlink"):nn($)},is=($,q)=>{var de;const Ve=$.dom.select("img",q)[0];if(Ve){const ft=$.dom.getParents(Ve,"a[href]",q)[0];ft&&((de=ft.parentNode)===null||de===void 0||de.insertBefore(Ve,ft),$.dom.remove(ft))}},md=($,q,de)=>{var Ve;const ft=$.select("img",q)[0];if(ft){const Dt=$.create("a",de);(Ve=ft.parentNode)===null||Ve===void 0||Ve.insertBefore(Dt,ft),Dt.appendChild(ft)}},Sn=$=>S($.value)?$.value:"",Ua=$=>S($.text)?$.text:S($.title)?$.title:"",wr=($,q)=>{const de=[];return Rs.each($,Ve=>{const ft=Ua(Ve);if(Ve.menu!==void 0){const Dt=wr(Ve.menu,q);de.push({text:ft,items:Dt})}else{const Dt=q(Ve);de.push({text:ft,value:Dt})}}),de},vu=($=Sn)=>q=>pe.from(q).map(de=>wr(de,$)),Za={sanitize:$=>vu(Sn)($),sanitizeWith:vu,createUi:($,q)=>de=>({name:$,type:"listbox",label:q,items:de}),getValue:Sn},ni=$=>vs($,"items"),bu=($,q)=>Tt(q,de=>ni(de)?bu($,de.items):Oo(de.value===$,de)),hl=($,q,de,Ve)=>{const ft=Ve[q],Dt=$.length>0;return ft!==void 0?bu(ft,de).map(Ln=>({url:{value:Ln.value,meta:{text:Dt?$:Ln.text,attach:fe}},text:Dt?$:Ln.text})):pe.none()},yi=($,q)=>q==="link"?$.link:q==="anchor"?$.anchor:pe.none(),yu={init:($,q)=>{const de={text:$.text,title:$.title},Ve=po=>{var Cs;return Oo(de.title.length<=0,pe.from((Cs=po.meta)===null||Cs===void 0?void 0:Cs.title).getOr(""))},ft=po=>{var Cs;return Oo(de.text.length<=0,pe.from((Cs=po.meta)===null||Cs===void 0?void 0:Cs.text).getOr(po.value))},Dt=po=>{const Cs=ft(po.url),ms=Ve(po.url);return Cs.isSome()||ms.isSome()?pe.some({...Cs.map(Cl=>({text:Cl})).getOr({}),...ms.map(Cl=>({title:Cl})).getOr({})}):pe.none()},Ln=(po,Cs)=>{const ms=yi(q,Cs).getOr([]);return hl(de.text,Cs,ms,po)};return{onChange:(po,Cs)=>{const ms=Cs.name;return ms==="url"?Dt(po()):Ke(["anchor","link"],ms)?Ln(po(),ms):((ms==="text"||ms==="title")&&(de[ms]=po()[ms]),pe.none())}}},getDelta:hl};var Ui=tinymce.util.Tools.resolve("tinymce.util.Delay");const Ct=($,q,de)=>{const Ve=$.selection.getRng();Ui.setEditorTimeout($,()=>{$.windowManager.confirm(q,ft=>{$.selection.setRng(Ve),de(ft)})})},lm=$=>{const q=$.href;return q.indexOf("@")>0&&q.indexOf("/")===-1&&q.indexOf("mailto:")===-1?pe.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Ve=>({...Ve,href:"mailto:"+q})}):pe.none()},Zs=($,q)=>de=>{const Ve=de.href;return $===1&&!ze(Ve)||$===0&&/^\s*www(\.|\d\.)/i.test(Ve)?pe.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${q}:// prefix?`,preprocess:Dt=>({...Dt,href:q+"://"+Ve})}):pe.none()},ho={preprocess:($,q)=>Tt([lm,Zs(Bs($),ke($))],de=>de(q)).fold(()=>Promise.resolve(q),de=>new Promise(Ve=>{Ct($,de.message,ft=>{Ve(ft?de.preprocess(q):q)})}))},Sa={getAnchors:$=>{const q=$.dom.select("a:not([href])"),de=Ce(q,Ve=>{const ft=Ve.name||Ve.id;return ft?[{text:ft,value:"#"+ft}]:[]});return de.length>0?pe.some([{text:"None",value:""}].concat(de)):pe.none()}},pl={getClasses:$=>{const q=Ht($);return q.length>0?Za.sanitize(q):pe.none()}},dm=$=>{try{return pe.some(JSON.parse($))}catch{return pe.none()}},uf={getLinks:$=>{const q=Ve=>$.convertURL(Ve.value||Ve.url||"","href"),de=to($);return new Promise(Ve=>{S(de)?fetch(de).then(ft=>ft.ok?ft.text().then(dm):Promise.reject()).then(Ve,()=>Ve(pe.none())):ce(de)?de(ft=>Ve(pe.some(ft))):Ve(pe.from(de))}).then(Ve=>Ve.bind(Za.sanitizeWith(q)).map(ft=>ft.length>0?[{text:"None",value:""}].concat(ft):ft))}},Kr={getRels:($,q)=>{const de=Sr($);if(de.length>0){const Ve=An(q,"_blank"),ft=Ko($)===!1,Dt=ys=>en(Za.getValue(ys),Ve);return(ft?Za.sanitizeWith(Dt):Za.sanitize)(de)}return pe.none()}},Ws=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],vl={getTargets:$=>{const q=ia($);return O(q)?Za.sanitize(q).orThunk(()=>pe.some(Ws)):q===!1?pe.none():pe.some(Ws)}},jc=($,q,de)=>{const Ve=$.getAttrib(q,de);return Ve!==null&&Ve.length>0?pe.some(Ve):pe.none()},Zi=($,q)=>{const de=$.dom,ft=yt($)?pe.some(Lo($.selection,q)):pe.none(),Dt=q.bind(ms=>pe.from(de.getAttrib(ms,"href"))),Ln=q.bind(ms=>pe.from(de.getAttrib(ms,"target"))),ys=q.bind(ms=>jc(de,ms,"rel")),po=q.bind(ms=>jc(de,ms,"class")),Cs=q.bind(ms=>jc(de,ms,"title"));return{url:Dt,text:ft,title:Cs,target:Ln,rel:ys,linkClass:po}},bl={collect:($,q)=>uf.getLinks($).then(de=>{const Ve=Zi($,q);return{anchor:Ve,catalogs:{targets:vl.getTargets($),rels:Kr.getRels($,Ve.target),classes:pl.getClasses($),anchor:Sa.getAnchors($),link:de},optNode:q,flags:{titleEnabled:ur($)}}})},dn=($,q)=>de=>{const Ve=de.getData();if(!Ve.url.value){xr($),de.close();return}const ft=ys=>pe.from(Ve[ys]).filter(po=>!An(q.anchor[ys],po)),Dt={href:Ve.url.value,text:ft("text"),target:ft("target"),rel:ft("rel"),class:ft("linkClass"),title:ft("title")},Ln={href:Ve.url.value,attach:Ve.url.meta!==void 0&&Ve.url.meta.attach?Ve.url.meta.attach:fe};ho.preprocess($,Dt).then(ys=>{ns($,Ln,ys)}),de.close()},oc=$=>{const q=On($);return bl.collect($,q)},Su=($,q)=>{const de=$.anchor,Ve=de.url.getOr("");return{url:{value:Ve,meta:{original:{value:Ve}}},text:de.text.getOr(""),title:de.title.getOr(""),anchor:Ve,link:Ve,rel:de.rel.getOr(""),target:de.target.or(q).getOr(""),linkClass:de.linkClass.getOr("")}},Ci=($,q,de)=>{const Ve=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],ft=$.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Dt=$.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Ln=pe.from(Ot(de)),ys=Su($,Ln),po=$.catalogs,Cs=yu.init(ys,po);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:dt([Ve,ft,Dt,yn([po.anchor.map(Za.createUi("anchor","Anchors")),po.rels.map(Za.createUi("rel","Rel")),po.targets.map(Za.createUi("target","Open link in...")),po.link.map(Za.createUi("link","Link list")),po.classes.map(Za.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ys,onChange:(Cl,{name:Sl})=>{Cs.onChange(Cl.getData,{name:Sl}).each(df=>{Cl.setData(df)})},onSubmit:q}},Ns=$=>{oc($).then(de=>{const Ve=dn($,de);return Ci(de,Ve,$)}).then(de=>{$.windowManager.open(de)})},yl=$=>{$.addCommand("mceLink",(q,de)=>{(de==null?void 0:de.dialog)===!0||!za($)?Ns($):$.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},Vo=$=>{$.addShortcut("Meta+K","",()=>{$.execCommand("mceLink")})};var Br=tinymce.util.Tools.resolve("tinymce.util.VK");const zo=($,q)=>{document.body.appendChild($),$.dispatchEvent(q),document.body.removeChild($)},Er=$=>{const q=document.createElement("a");q.target="_blank",q.href=$,q.rel="noreferrer noopener";const de=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(de),zo(q,de)},gd=$=>$.altKey===!0&&$.shiftKey===!1&&$.ctrlKey===!1&&$.metaKey===!1,Wi=($,q)=>{if(q){const de=ot(q);if(/^#/.test(de)){const Ve=$.dom.select(`${de},[name="${Os(de,"#")}"]`);Ve.length&&$.selection.scrollIntoView(Ve[0],!0)}else Er(q.href)}},ji=$=>{const q=$.selection.getRng(),de=q.startContainer;return Re(de)&&q.startContainer===q.endContainer&&$.dom.select("img",de).length===1},Gc=($,q)=>{const de=Yt($.dom.getParents(q));return Oo(de.length===1,de[0])},fm=$=>{const q=wn($.selection.getRng());return Oo(q.length>0,q[0]).or(Gc($,$.selection.getNode()))},xa=$=>$.selection.isCollapsed()||ji($)?Gc($,$.selection.getStart()):fm($),sc=$=>{const q=Ie(),de=()=>q.get().or(xa($)),Ve=()=>de().each(ft=>Wi($,ft));return $.on("contextmenu",ft=>{Gc($,ft.target).each(q.set)}),$.on("SelectionChange",()=>{q.isSet()||xa($).each(q.set)}),$.on("click",ft=>{q.clear();const Dt=Yt($.dom.getParents(ft.target));Dt.length===1&&Br.metaKeyPressed(ft)&&(ft.preventDefault(),Wi($,Dt[0]))}),$.on("keydown",ft=>{q.clear(),!ft.isDefaultPrevented()&&ft.keyCode===13&&gd(ft)&&de().each(Dt=>{ft.preventDefault(),Wi($,Dt)})}),{gotoSelectedLink:Ve}},Lr=$=>()=>{$.execCommand("mceLink",!1,{dialog:!0})},rc=($,q)=>($.on("NodeChange",q),()=>$.off("NodeChange",q)),Te=$=>q=>{const de=()=>{q.setActive(!$.mode.isReadOnly()&&Vn($,$.selection.getNode())),q.setEnabled($.selection.isEditable())};return de(),rc($,de)},Nt=$=>q=>{const de=()=>{q.setEnabled($.selection.isEditable())};return de(),rc($,de)},Kn=$=>q=>{const de=Dt=>Dn(Dt)||$e($.selection.getRng()),Ve=$.dom.getParents($.selection.getStart()),ft=Dt=>{q.setEnabled(de(Dt)&&$.selection.isEditable())};return ft(Ve),rc($,Dt=>ft(Dt.parents))},fs=($,q)=>{$.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:Lr($),onSetup:Te($)}),$.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:q.gotoSelectedLink,onSetup:Kn($)}),$.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>xr($),onSetup:Kn($)})},Uo=($,q)=>{$.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:q.gotoSelectedLink,onSetup:Kn($)}),$.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Lr($),onSetup:Nt($)}),$.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>xr($),onSetup:Kn($)})},Qs=$=>{const q="link unlink openlink",de="link";$.ui.registry.addContextMenu("link",{update:Ve=>$.dom.isEditable(Ve)?Dn($.dom.getParents(Ve,"a"))?q:de:""})},rt=($,q)=>{const de=Dt=>{Dt.selection.collapse(!1)},Ve=Dt=>{const Ln=$.selection.getNode();return Dt.setEnabled(Vn($,Ln)&&$.selection.isEditable()),fe},ft=Dt=>{const Ln=On($),ys=yt($);if(Ln.isNone()&&ys){const po=Lo($.selection,Ln);return Oo(po.length===0,Dt)}else return pe.none()};$.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Te($)},label:"Link",predicate:Dt=>_t($)&&Vn($,Dt),initValue:()=>On($).fold(ye(""),ot),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Dt=>{const Ln=$.selection.getNode();return Dt.setActive(Vn($,Ln)),Te($)(Dt)},onAction:Dt=>{const Ln=Dt.getValue(),ys=ft(Ln);ns($,{href:Ln,attach:fe},{href:Ln,text:ys,title:pe.none(),rel:pe.none(),target:pe.from(Ot($)),class:pe.none()}),de($),Dt.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Ve,onAction:Dt=>{xr($),Dt.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Ve,onAction:Dt=>{q.gotoSelectedLink(),Dt.hide()}}]})},mm=$=>{const q=sc($);fs($,q),Uo($,q),Qs($),rt($,q)};var gm=()=>{U.add("link",$=>{Bo($),yl($),mm($),Vo($)})};gm()})();(function(){var U=tinymce.util.Tools.resolve("tinymce.PluginManager");const w=(b,k,L)=>{var Y;return L(b,k.prototype)?!0:((Y=b.constructor)===null||Y===void 0?void 0:Y.name)===k.name},F=b=>{const k=typeof b;return b===null?"null":k==="object"&&Array.isArray(b)?"array":k==="object"&&w(b,String,(L,Y)=>Y.isPrototypeOf(L))?"string":k},T=b=>k=>F(k)===b,P=b=>k=>typeof k===b,j=T("string"),S=T("object"),B=T("array"),O=P("boolean"),z=b=>b==null,K=b=>!z(b),J=P("function"),re=P("number"),ce=()=>{},me=(b,k)=>L=>b(k(L)),fe=b=>()=>b,ye=(b,k)=>b===k;function Fe(b,...k){return(...L)=>{const Y=k.concat(L);return b.apply(null,Y)}}const pe=b=>k=>!b(k),ee=fe(!1);class we{constructor(k,L){this.tag=k,this.value=L}static some(k){return new we(!0,k)}static none(){return we.singletonNone}fold(k,L){return this.tag?L(this.value):k()}isSome(){return this.tag}isNone(){return!this.tag}map(k){return this.tag?we.some(k(this.value)):we.none()}bind(k){return this.tag?k(this.value):we.none()}exists(k){return this.tag&&k(this.value)}forall(k){return!this.tag||k(this.value)}filter(k){return!this.tag||k(this.value)?this:we.none()}getOr(k){return this.tag?this.value:k}or(k){return this.tag?this:k}getOrThunk(k){return this.tag?this.value:k()}orThunk(k){return this.tag?this:k()}getOrDie(k){if(this.tag)return this.value;throw new Error(k??"Called getOrDie on None")}static from(k){return K(k)?we.some(k):we.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(k){this.tag&&k(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}we.singletonNone=new we(!1);const bt=Array.prototype.slice,Ke=Array.prototype.indexOf,te=Array.prototype.push,ct=(b,k)=>Ke.call(b,k),Je=(b,k)=>ct(b,k)>-1,dt=(b,k)=>{for(let L=0,Y=b.length;L<Y;L++){const ae=b[L];if(k(ae,L))return!0}return!1},Ce=(b,k)=>{const L=b.length,Y=new Array(L);for(let ae=0;ae<L;ae++){const Xe=b[ae];Y[ae]=k(Xe,ae)}return Y},Tt=(b,k)=>{for(let L=0,Y=b.length;L<Y;L++){const ae=b[L];k(ae,L)}},St=(b,k)=>{const L=[];for(let Y=0,ae=b.length;Y<ae;Y++){const Xe=b[Y];k(Xe,Y)&&L.push(Xe)}return L},it=(b,k)=>{if(b.length===0)return[];{let L=k(b[0]);const Y=[];let ae=[];for(let Xe=0,mt=b.length;Xe<mt;Xe++){const En=b[Xe],Cn=k(En);Cn!==L&&(Y.push(ae),ae=[]),L=Cn,ae.push(En)}return ae.length!==0&&Y.push(ae),Y}},et=(b,k,L)=>(Tt(b,(Y,ae)=>{L=k(L,Y,ae)}),L),x=(b,k,L)=>{for(let Y=0,ae=b.length;Y<ae;Y++){const Xe=b[Y];if(k(Xe,Y))return we.some(Xe);if(L(Xe,Y))break}return we.none()},pn=(b,k)=>x(b,k,ee),Ye=b=>{const k=[];for(let L=0,Y=b.length;L<Y;++L){if(!B(b[L]))throw new Error("Arr.flatten item "+L+" was not an array, input: "+b);te.apply(k,b[L])}return k},Xn=(b,k)=>Ye(Ce(b,k)),vs=b=>{const k=bt.call(b,0);return k.reverse(),k},ht=(b,k)=>k>=0&&k<b.length?we.some(b[k]):we.none(),An=b=>ht(b,0),yn=b=>ht(b,b.length-1),Oo=(b,k)=>{const L=[],Y=J(k)?ae=>dt(L,Xe=>k(Xe,ae)):ae=>Je(L,ae);for(let ae=0,Xe=b.length;ae<Xe;ae++){const mt=b[ae];Y(mt)||L.push(mt)}return L},Io=Object.keys,Ie=(b,k)=>{const L=Io(b);for(let Y=0,ae=L.length;Y<ae;Y++){const Xe=L[Y],mt=b[Xe];k(mt,Xe)}},Qe=b=>(k,L)=>{b[L]=k},N=(b,k,L,Y)=>{Ie(b,(ae,Xe)=>{(k(ae,Xe)?L:Y)(ae,Xe)})},Os=(b,k)=>{const L={};return N(b,k,Qe(L),ce),L},eo=b=>{let k=b;return{get:()=>k,set:ae=>{k=ae}}},as=typeof window<"u"?window:Function("return this;")(),Bo=(b,k,L=ye)=>b.exists(Y=>L(Y,k)),Bs=(b,k,L=ye)=>_t(b,k,L).getOr(b.isNone()&&k.isNone()),_t=(b,k,L)=>b.isSome()&&k.isSome()?we.some(L(b.getOrDie(),k.getOrDie())):we.none(),to=(b,k)=>{let L=k??as;for(let Y=0;Y<b.length&&L!==void 0&&L!==null;++Y)L=L[b[Y]];return L},Ot=(b,k)=>{const L=b.split(".");return to(L,k)},ia=(b=>k=>k.replace(b,""))(/^\s+|\s+$/g),Sr=b=>b.length>0,Ht=b=>!Sr(b),ur="\uFEFF",Ko=b=>b===ur,za=(b,k)=>{const Y=(k||document).createElement("div");if(Y.innerHTML=b,!Y.hasChildNodes()||Y.childNodes.length>1){const ae="HTML does not have a single root node";throw console.error(ae,b),new Error(ae)}return jr(Y.childNodes[0])},No=(b,k)=>{const Y=(k||document).createElement(b);return jr(Y)},bs=(b,k)=>{const Y=(k||document).createTextNode(b);return jr(Y)},jr=b=>{if(b==null)throw new Error("Node cannot be null or undefined");return{dom:b}},xn={fromHtml:za,fromTag:No,fromText:bs,fromDom:jr,fromPoint:(b,k,L)=>we.from(b.dom.elementFromPoint(k,L)).map(jr)},Re=8,_e=11,ze=1,ot=3,en=(b,k)=>{const L=b.dom;if(L.nodeType!==ze)return!1;{const Y=L;if(Y.matches!==void 0)return Y.matches(k);if(Y.msMatchesSelector!==void 0)return Y.msMatchesSelector(k);if(Y.webkitMatchesSelector!==void 0)return Y.webkitMatchesSelector(k);if(Y.mozMatchesSelector!==void 0)return Y.mozMatchesSelector(k);throw new Error("Browser lacks native selectors")}},sn=(b,k)=>b.dom===k.dom,On=(b,k)=>{const L=b.dom,Y=k.dom;return L===Y?!1:L.contains(Y)},Vn=en,Lo=(b,k)=>Ot(b,k),wn=(b,k)=>{const L=Lo(b,k);if(L==null)throw new Error(b+" not available on this browser");return L},Yt=Object.getPrototypeOf,Dn=b=>wn("HTMLElement",b),$e=b=>{const k=Ot("ownerDocument.defaultView",b);return S(b)&&(Dn(k).prototype.isPrototypeOf(b)||/^HTML\w*Element$/.test(Yt(b).constructor.name))},yt=b=>b.dom.nodeName.toLowerCase(),To=b=>b.dom.nodeType,zi=b=>k=>To(k)===b,Ir=b=>To(b)===Re||yt(b)==="#comment",Rt=b=>bi(b)&&$e(b.dom),bi=zi(ze),fd=zi(ot),pu=zi(_e),Fo=b=>k=>bi(k)&&yt(k)===b,nn=b=>we.from(b.dom.parentNode).map(xn.fromDom),Wc=b=>we.from(b.dom.parentElement).map(xn.fromDom),th=b=>we.from(b.dom.nextSibling).map(xn.fromDom),ns=b=>Ce(b.dom.childNodes,xn.fromDom),xr=(b,k)=>{const L=b.dom.childNodes;return we.from(L[k]).map(xn.fromDom)},is=b=>xr(b,0),md=b=>xr(b,b.dom.childNodes.length-1),Sn=b=>pu(b)&&K(b.dom.host),Ua=b=>xn.fromDom(b.dom.getRootNode()),wr=b=>{const k=Ua(b);return Sn(k)?we.some(k):we.none()},vu=b=>xn.fromDom(b.dom.host),nh=(b,k)=>{nn(b).each(Y=>{Y.dom.insertBefore(k.dom,b.dom)})},oh=(b,k)=>{th(b).fold(()=>{nn(b).each(ae=>{ni(ae,k)})},Y=>{nh(Y,k)})},Za=(b,k)=>{is(b).fold(()=>{ni(b,k)},Y=>{b.dom.insertBefore(k.dom,Y.dom)})},ni=(b,k)=>{b.dom.appendChild(k.dom)},bu=(b,k)=>{Tt(k,L=>{nh(b,L)})},hl=(b,k)=>{Tt(k,L=>{ni(b,L)})},yi=(b,k,L)=>{if(j(L)||O(L)||re(L))b.setAttribute(k,L+"");else throw console.error("Invalid call to Attribute.set. Key ",k,":: Value ",L,":: Element ",b),new Error("Attribute value was not simple")},Us=(b,k)=>{const L=b.dom;Ie(k,(Y,ae)=>{yi(L,ae,Y)})},yu=b=>et(b.dom.attributes,(k,L)=>(k[L.name]=L.value,k),{}),Ui=b=>{b.dom.textContent="",Tt(ns(b),k=>{Ct(k)})},Ct=b=>{const k=b.dom;k.parentNode!==null&&k.parentNode.removeChild(k)},lm=(b,k)=>xn.fromDom(b.dom.cloneNode(k)),Zs=b=>lm(b,!0),cm=(b,k)=>{const L=xn.fromTag(k),Y=yu(b);return Us(L,Y),L},ho=(b,k)=>{const L=cm(b,k);oh(b,L);const Y=ns(b);return hl(L,Y),Ct(b),L},cf=b=>Ce(b,xn.fromDom),Sa=b=>b.style!==void 0&&J(b.style.getPropertyValue),um=b=>{const k=fd(b)?b.dom.parentNode:b.dom;if(k==null||k.ownerDocument===null)return!1;const L=k.ownerDocument;return wr(xn.fromDom(k)).fold(()=>L.body.contains(k),me(um,vu))},pl=(b,k,L)=>{if(!j(L))throw console.error("Invalid call to CSS.set. Property ",k,":: Value ",L,":: Element ",b),new Error("CSS value must be a string: "+L);Sa(b)&&b.style.setProperty(k,L)},dm=(b,k,L)=>{const Y=b.dom;pl(Y,k,L)},Gr=(b,k)=>{const Y=document.createDocumentFragment();return Tt(b,ae=>{Y.appendChild(ae.dom)}),xn.fromDom(Y)};var uf=(b,k,L,Y,ae)=>b(L,Y)?we.some(L):J(ae)&&ae(L)?we.none():k(L,Y,ae);const Cu=(b,k,L)=>{let Y=b.dom;const ae=J(L)?L:ee;for(;Y.parentNode;){Y=Y.parentNode;const Xe=xn.fromDom(Y);if(k(Xe))return we.some(Xe);if(ae(Xe))break}return we.none()},Kr=(b,k,L)=>uf((ae,Xe)=>Xe(ae),Cu,b,k,L),Ws=(b,k,L)=>Cu(b,Y=>en(Y,k),L),Ps=(b,k,L)=>uf((ae,Xe)=>en(ae,Xe),Ws,b,k,L),vl=b=>Ps(b,"[contenteditable]"),jc=(b,k=!1)=>um(b)?b.dom.isContentEditable:vl(b).fold(fe(k),L=>Zi(L)==="true"),Zi=b=>b.dom.contentEditable,sh=(b,k,L)=>Cu(b,k,L).isSome(),bl=(b,k)=>sh(b,Fe(sn,k));var dn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),oc=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Su=tinymce.util.Tools.resolve("tinymce.util.VK"),Ci=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ns=tinymce.util.Tools.resolve("tinymce.util.Tools");const yl=b=>k=>K(k)&&k.nodeName.toLowerCase()===b,Vo=b=>k=>K(k)&&b.test(k.nodeName),Br=b=>K(b)&&b.nodeType===3,zo=b=>K(b)&&b.nodeType===1,Er=Vo(/^(OL|UL|DL)$/),gd=Vo(/^(OL|UL)$/),Wi=yl("ol"),ji=Vo(/^(LI|DT|DD)$/),Gc=Vo(/^(DT|DD)$/),fm=Vo(/^(TH|TD)$/),xa=yl("br"),sc=b=>{var k;return((k=b.parentNode)===null||k===void 0?void 0:k.firstChild)===b},Lr=(b,k)=>K(k)&&k.nodeName in b.schema.getTextBlockElements(),rc=(b,k)=>K(b)&&b.nodeName in k,Te=(b,k)=>K(k)&&k.nodeName in b.schema.getVoidElements(),Nt=(b,k)=>xa(k)?b.isBlock(k.nextSibling)&&!xa(k.previousSibling):!1,Kn=(b,k,L)=>{const Y=b.isEmpty(k);return L&&b.select("span[data-mce-type=bookmark]",k).length>0?!1:Y},fs=(b,k)=>b.isChildOf(k,b.getRoot()),Uo=b=>k=>k.options.get(b),Qs=b=>{const k=b.options.register;k("lists_indent_on_tab",{processor:"boolean",default:!0})},rt=Uo("lists_indent_on_tab"),mm=Uo("forced_root_block"),gm=Uo("forced_root_block_attrs"),$=(b,k,L={})=>{const Y=b.dom,ae=b.schema.getBlockElements(),Xe=Y.createFragment(),mt=mm(b),En=gm(b);let Cn,Xt,zn=!1;for(Xt=Y.create(mt,{...En,...L.style?{style:L.style}:{}}),rc(k.firstChild,ae)||Xe.appendChild(Xt);Cn=k.firstChild;){const os=Cn.nodeName;!zn&&(os!=="SPAN"||Cn.getAttribute("data-mce-type")!=="bookmark")&&(zn=!0),rc(Cn,ae)?(Xe.appendChild(Cn),Xt=null):(Xt||(Xt=Y.create(mt,En),Xe.appendChild(Xt)),Xt.appendChild(Cn))}return!zn&&Xt&&Xt.appendChild(Y.create("br",{"data-mce-bogus":"1"})),Xe},q=Ci.DOM,de=(b,k,L)=>{const Y=Xt=>{const zn=Xt.parentNode;zn&&Ns.each(ae,os=>{zn.insertBefore(os,L.parentNode)}),q.remove(Xt)},ae=q.select('span[data-mce-type="bookmark"]',k),Xe=$(b,L),mt=q.createRng();mt.setStartAfter(L),mt.setEndAfter(k);const En=mt.extractContents();for(let Xt=En.firstChild;Xt;Xt=Xt.firstChild)if(Xt.nodeName==="LI"&&b.dom.isEmpty(Xt)){q.remove(Xt);break}b.dom.isEmpty(En)||q.insertAfter(En,k),q.insertAfter(Xe,k);const Cn=L.parentElement;Cn&&Kn(b.dom,Cn)&&Y(Cn),q.remove(L),Kn(b.dom,k)&&q.remove(k)},Ve=Fo("dd"),ft=Fo("dt"),Dt=(b,k)=>{Ve(k)?ho(k,"dt"):ft(k)&&Wc(k).each(L=>de(b,L.dom,k.dom))},Ln=b=>{ft(b)&&ho(b,"dd")},ys=(b,k,L)=>{k==="Indent"?Tt(L,Ln):Tt(L,Y=>Dt(b,Y))},po=(b,k)=>{if(Br(b))return{container:b,offset:k};const L=dn.getNode(b,k);return Br(L)?{container:L,offset:k>=b.childNodes.length?L.data.length:0}:L.previousSibling&&Br(L.previousSibling)?{container:L.previousSibling,offset:L.previousSibling.data.length}:L.nextSibling&&Br(L.nextSibling)?{container:L.nextSibling,offset:0}:{container:b,offset:k}},Cs=b=>{const k=b.cloneRange(),L=po(b.startContainer,b.startOffset);k.setStart(L.container,L.offset);const Y=po(b.endContainer,b.endOffset);return k.setEnd(Y.container,Y.offset),k},ms=["OL","UL","DL"],Cl=ms.join(","),Sl=(b,k)=>{const L=k||b.selection.getStart(!0);return b.dom.getParent(L,Cl,ff(b,L))},df=(b,k)=>K(b)&&k.length===1&&k[0]===b,G0=b=>St(b.querySelectorAll(Cl),Er),hd=b=>{const k=Sl(b),L=b.selection.getSelectedBlocks();return df(k,L)?G0(k):St(L,Y=>Er(Y)&&k!==Y)},K0=(b,k)=>{const L=Ns.map(k,Y=>{const ae=b.dom.getParent(Y,"li,dd,dt",ff(b,Y));return ae||Y});return Oo(L)},rh=b=>{const k=b.selection.getSelectedBlocks();return St(K0(b,k),ji)},u1=b=>St(rh(b),Gc),vo=(b,k)=>{const L=b.dom.getParents(k,"TD,TH");return L.length>0?L[0]:b.getBody()},hm=(b,k)=>!Er(k)&&!ji(k)&&dt(ms,L=>b.isValidChild(k.nodeName,L)),ff=(b,k)=>{const L=b.dom.getParents(k,b.dom.isBlock),Y=Xe=>Xe.nodeName.toLowerCase()!==mm(b);return pn(L,Xe=>Y(Xe)&&hm(b.schema,Xe)).getOr(b.getBody())},Y0=b=>nn(b).exists(k=>ji(k.dom)&&is(k).exists(L=>!Er(L.dom))&&md(k).exists(L=>!Er(L.dom))),d1=(b,k)=>{const L=b.dom.getParents(k,"ol,ul",ff(b,k));return yn(L)},X0=b=>{const k=d1(b,b.selection.getStart()),L=St(b.selection.getSelectedBlocks(),gd);return k.toArray().concat(L)},f1=b=>{const k=b.selection.getStart();return b.dom.getParents(k,"ol,ul",ff(b,k))},ah=b=>{const k=X0(b),L=f1(b);return pn(L,Y=>Y0(xn.fromDom(Y))).fold(()=>pm(b,k),Y=>[Y])},pm=(b,k)=>{const L=Ce(k,Y=>d1(b,Y).getOr(Y));return Oo(L)},mf=b=>/\btox\-/.test(b.className),ih=(b,k)=>x(b,Er,fm).exists(L=>L.nodeName===k&&!mf(L)),FS=(b,k)=>k!==null&&!b.dom.isEditable(k),_S=b=>{const k=Sl(b);return FS(b,k)||!b.selection.isEditable()},xu=(b,k)=>{const L=b.dom.getParent(k,"ol,ul,dl");return FS(b,L)||!b.selection.isEditable()},ac=(b,k)=>{const L=b.selection.getNode();return k({parents:b.dom.getParents(L),element:L}),b.on("NodeChange",k),()=>b.off("NodeChange",k)},la=(b,k,L)=>b.dispatch("ListMutation",{action:k,element:L}),vm=b=>Vn(b,"OL,UL"),J0=b=>Vn(b,"LI"),m1=b=>is(b).exists(vm),Q0=b=>md(b).exists(vm),wu=b=>"listAttributes"in b,g1=b=>"isComment"in b,lh=b=>"isFragment"in b,Gi=b=>b.depth>0,ic=b=>b.isSelected,Eu=b=>{const k=ns(b),L=Q0(b)?k.slice(0,-1):k;return Ce(L,Zs)},q0=(b,k,L)=>nn(b).filter(bi).map(Y=>({depth:k,dirty:!1,isSelected:L,content:Eu(b),itemAttributes:yu(b),listAttributes:yu(Y),listType:yt(Y),isInPreviousLi:!1})),no=(b,k)=>{ni(b.item,k.list)},eb=b=>{for(let k=1;k<b.length;k++)no(b[k-1],b[k])},h1=(b,k)=>{_t(yn(b),An(k),no)},tb=(b,k)=>{const L={list:xn.fromTag(k,b),item:xn.fromTag("li",b)};return ni(L.list,L.item),L},nb=(b,k,L)=>{const Y=[];for(let ae=0;ae<L;ae++)Y.push(tb(b,wu(k)?k.listType:k.parentListType));return Y},ob=(b,k)=>{for(let L=0;L<b.length-1;L++)dm(b[L].item,"list-style-type","none");yn(b).each(L=>{wu(k)&&(Us(L.list,k.listAttributes),Us(L.item,k.itemAttributes)),hl(L.item,k.content)})},sb=(b,k)=>{yt(b.list)!==k.listType&&(b.list=ho(b.list,k.listType)),Us(b.list,k.listAttributes)},p1=(b,k,L)=>{const Y=xn.fromTag("li",b);return Us(Y,k),hl(Y,L),Y},oO=(b,k)=>{ni(b.list,k),b.item=k},rb=(b,k,L)=>{const Y=k.slice(0,L.depth);return yn(Y).each(ae=>{if(wu(L)){const Xe=p1(b,L.itemAttributes,L.content);oO(ae,Xe),sb(ae,L)}else if(lh(L))hl(ae.item,L.content);else{const Xe=xn.fromHtml(`<!--${L.content}-->`);ni(ae.list,Xe)}}),Y},$S=(b,k,L)=>{const Y=nb(b,L,L.depth-k.length);return eb(Y),ob(Y,L),h1(k,Y),k.concat(Y)},ut=(b,k)=>{let L=we.none();const Y=et(k,(ae,Xe,mt)=>g1(Xe)?mt===0?(L=we.some(Xe),ae):rb(b,ae,Xe):Xe.depth>ae.length?$S(b,ae,Xe):rb(b,ae,Xe),[]);return L.each(ae=>{const Xe=xn.fromHtml(`<!--${ae.content}-->`);An(Y).each(mt=>{Za(mt.list,Xe)})}),An(Y).map(ae=>ae.list)},HS=(b,k)=>{switch(b){case"Indent":k.depth++;break;case"Outdent":k.depth--;break;case"Flatten":k.depth=0}k.dirty=!0},VS=(b,k)=>{wu(b)&&wu(k)&&(b.listType=k.listType,b.listAttributes={...k.listAttributes})},zS=b=>{b.listAttributes=Os(b.listAttributes,(k,L)=>L!=="start")},Wa=(b,k)=>{const L=b[k].depth,Y=Xe=>Xe.depth===L&&!Xe.dirty,ae=Xe=>Xe.depth<L;return x(vs(b.slice(0,k)),Y,ae).orThunk(()=>x(b.slice(k+1),Y,ae))},US=b=>(Tt(b,(k,L)=>{Wa(b,L).fold(()=>{k.dirty&&wu(k)&&zS(k)},Y=>VS(k,Y))}),b),ne=(b,k,L,Y)=>{var ae;if(Ir(Y))return[{depth:b+1,content:(ae=Y.dom.nodeValue)!==null&&ae!==void 0?ae:"",dirty:!1,isSelected:!1,isComment:!0}];k.each(En=>{sn(En.start,Y)&&L.set(!0)});const Xe=q0(Y,b,L.get());k.each(En=>{sn(En.end,Y)&&L.set(!1)});const mt=md(Y).filter(vm).map(En=>ch(b,k,L,En)).getOr([]);return Xe.toArray().concat(mt)},ZS=(b,k,L,Y)=>is(Y).filter(vm).fold(()=>ne(b,k,L,Y),ae=>{const Xe=et(ns(Y),(mt,En,Cn)=>{if(Cn===0)return mt;if(J0(En))return mt.concat(ne(b,k,L,En));{const Xt={isFragment:!0,depth:b,content:[En],isSelected:!1,dirty:!1,parentListType:yt(ae)};return mt.concat(Xt)}},[]);return ch(b,k,L,ae).concat(Xe)}),ch=(b,k,L,Y)=>Xn(ns(Y),ae=>{const Xe=vm(ae)?ch:ZS,mt=b+1;return Xe(mt,k,L,ae)}),ab=(b,k)=>{const L=eo(!1),Y=0;return Ce(b,ae=>({sourceList:ae,entries:ch(Y,k,L,ae)}))},xl=(b,k)=>{const L=US(k);return Ce(L,Y=>{const ae=g1(Y)?Gr([xn.fromHtml(`<!--${Y.content}-->`)]):Gr(Y.content),Xe=wu(Y)?Y.itemAttributes:{};return xn.fromDom($(b,ae.dom,Xe))})},bm=(b,k)=>{const L=US(k);return ut(b.contentDocument,L).toArray()},ym=(b,k)=>Xn(it(k,Gi),L=>An(L).exists(Gi)?bm(b,L):xl(b,L)),ib=(b,k)=>{Tt(St(b,ic),L=>HS(k,L))},oi=b=>{const k=Ce(rh(b),xn.fromDom);return _t(pn(k,pe(m1)),pn(vs(k),pe(m1)),(L,Y)=>({start:L,end:Y}))},pd=(b,k,L)=>{const Y=ab(k,oi(b));Tt(Y,ae=>{ib(ae.entries,L);const Xe=ym(b,ae.entries);Tt(Xe,mt=>{la(b,L==="Indent"?"IndentList":"OutdentList",mt.dom)}),bu(ae.sourceList,Xe),Ct(ae.sourceList)})},uh=(b,k)=>{const L=cf(ah(b)),Y=cf(u1(b));let ae=!1;if(L.length||Y.length){const Xe=b.selection.getBookmark();pd(b,L,k),ys(b,k,Y),b.selection.moveToBookmark(Xe),b.selection.setRng(Cs(b.selection.getRng())),b.nodeChanged(),ae=!0}return ae},dh=(b,k)=>!_S(b)&&uh(b,k),fh=b=>dh(b,"Indent"),ca=b=>dh(b,"Outdent"),vd=b=>dh(b,"Flatten");var Si=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const wl=Ci.DOM,wa=b=>{const k={},L=Y=>{let ae=b[Y?"startContainer":"endContainer"],Xe=b[Y?"startOffset":"endOffset"];if(zo(ae)){const mt=wl.create("span",{"data-mce-type":"bookmark"});ae.hasChildNodes()?(Xe=Math.min(Xe,ae.childNodes.length-1),Y?ae.insertBefore(mt,ae.childNodes[Xe]):wl.insertAfter(mt,ae.childNodes[Xe])):ae.appendChild(mt),ae=mt,Xe=0}k[Y?"startContainer":"endContainer"]=ae,k[Y?"startOffset":"endOffset"]=Xe};return L(!0),b.collapsed||L(),k},gf=b=>{const k=Y=>{const ae=En=>{var Cn;let Xt=(Cn=En.parentNode)===null||Cn===void 0?void 0:Cn.firstChild,zn=0;for(;Xt;){if(Xt===En)return zn;(!zo(Xt)||Xt.getAttribute("data-mce-type")!=="bookmark")&&zn++,Xt=Xt.nextSibling}return-1};let Xe=b[Y?"startContainer":"endContainer"],mt=b[Y?"startOffset":"endOffset"];if(Xe){if(zo(Xe)&&Xe.parentNode){const En=Xe;mt=ae(Xe),Xe=Xe.parentNode,wl.remove(En),!Xe.hasChildNodes()&&wl.isBlock(Xe)&&Xe.appendChild(wl.create("br"))}b[Y?"startContainer":"endContainer"]=Xe,b[Y?"startOffset":"endOffset"]=mt}};k(!0),k();const L=wl.createRng();return L.setStart(b.startContainer,b.startOffset),b.endContainer&&L.setEnd(b.endContainer,b.endOffset),Cs(L)},Un=b=>{switch(b){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},El=(b,k,L)=>{const Y=L["list-style-type"]?L["list-style-type"]:null;b.setStyle(k,"list-style-type",Y)},mh=(b,k)=>{Ns.each(k,(L,Y)=>{b.setAttribute(Y,L)})},ao=(b,k,L)=>{mh(k,L["list-attributes"]),Ns.each(b.select("li",k),Y=>{mh(Y,L["list-item-attributes"])})},ua=(b,k,L)=>{El(b,k,L),ao(b,k,L)},lc=(b,k,L)=>{Ns.each(L,Y=>b.setStyle(k,Y,""))},hf=(b,k)=>K(k)&&!rc(k,b.schema.getBlockElements()),Tu=(b,k,L,Y)=>{let ae=k[L?"startContainer":"endContainer"];const Xe=k[L?"startOffset":"endOffset"];zo(ae)&&(ae=ae.childNodes[Math.min(Xe,ae.childNodes.length-1)]||ae),!L&&xa(ae.nextSibling)&&(ae=ae.nextSibling);const mt=Cn=>{for(;!b.dom.isBlock(Cn)&&Cn.parentNode&&Y!==Cn;)Cn=Cn.parentNode;return Cn},En=(Cn,Xt)=>{var zn;const os=new oc(Cn,mt(Cn)),Yi=Xt?"next":"prev";let Xr;for(;Xr=os[Yi]();)if(!(Te(b,Xr)||Ko(Xr.textContent)||((zn=Xr.textContent)===null||zn===void 0?void 0:zn.length)===0))return we.some(Xr);return we.none()};if(L&&Br(ae))if(Ko(ae.textContent))ae=En(ae,!1).getOr(ae);else for(ae.parentNode!==null&&hf(b,ae.parentNode)&&(ae=ae.parentNode);ae.previousSibling!==null&&(hf(b,ae.previousSibling)||Br(ae.previousSibling));)ae=ae.previousSibling;if(!L&&Br(ae))if(Ko(ae.textContent))ae=En(ae,!0).getOr(ae);else for(ae.parentNode!==null&&hf(b,ae.parentNode)&&(ae=ae.parentNode);ae.nextSibling!==null&&(hf(b,ae.nextSibling)||Br(ae.nextSibling));)ae=ae.nextSibling;for(;ae.parentNode!==Y;){const Cn=ae.parentNode;if(Lr(b,ae)||/^(TD|TH)$/.test(Cn.nodeName))return ae;ae=Cn}return ae},ja=(b,k,L)=>{const Y=[],ae=b.dom,Xe=Tu(b,k,!0,L),mt=Tu(b,k,!1,L);let En;const Cn=[];for(let Xt=Xe;Xt&&(Cn.push(Xt),Xt!==mt);Xt=Xt.nextSibling);return Ns.each(Cn,Xt=>{var zn;if(Lr(b,Xt)){Y.push(Xt),En=null;return}if(ae.isBlock(Xt)||xa(Xt)){xa(Xt)&&ae.remove(Xt),En=null;return}const os=Xt.nextSibling;if(Si.isBookmarkNode(Xt)&&(Er(os)||Lr(b,os)||!os&&Xt.parentNode===L)){En=null;return}En||(En=ae.create("p"),(zn=Xt.parentNode)===null||zn===void 0||zn.insertBefore(En,Xt),Y.push(En)),En.appendChild(Xt)}),Y},Ea=(b,k,L)=>{const Y=b.getStyle(k,"list-style-type");let ae=L?L["list-style-type"]:"";return ae=ae===null?"":ae,Y===ae},WS=(b,k)=>{const L=b.selection.getStart(!0),Y=Tu(b,k,!0,b.getBody());return bl(xn.fromDom(Y),xn.fromDom(k.commonAncestorContainer))?k.commonAncestorContainer:L},Cm=(b,k,L)=>{const Y=b.selection.getRng();let ae="LI";const Xe=ff(b,WS(b,Y)),mt=b.dom;if(mt.getContentEditable(b.selection.getNode())==="false")return;k=k.toUpperCase(),k==="DL"&&(ae="DT");const En=wa(Y),Cn=St(ja(b,Y,Xe),b.dom.isEditable);Ns.each(Cn,Xt=>{let zn;const os=Xt.previousSibling,Yi=Xt.parentNode;ji(Yi)||(os&&Er(os)&&os.nodeName===k&&Ea(mt,os,L)?(zn=os,Xt=mt.rename(Xt,ae),os.appendChild(Xt)):(zn=mt.create(k),Yi.insertBefore(zn,Xt),zn.appendChild(Xt),Xt=mt.rename(Xt,ae)),lc(mt,Xt,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),ua(mt,zn,L),Ou(b.dom,zn))}),b.selection.setRng(gf(En))},dr=(b,k)=>Er(b)&&b.nodeName===(k==null?void 0:k.nodeName),bd=(b,k,L)=>{const Y=b.getStyle(k,"list-style-type",!0),ae=b.getStyle(L,"list-style-type",!0);return Y===ae},Au=(b,k)=>b.className===k.className,gh=(b,k,L)=>dr(k,L)&&bd(b,k,L)&&Au(k,L),Ou=(b,k)=>{let L,Y=k.nextSibling;if(gh(b,k,Y)){const ae=Y;for(;L=ae.firstChild;)k.appendChild(L);b.remove(ae)}if(Y=k.previousSibling,gh(b,k,Y)){const ae=Y;for(;L=ae.lastChild;)k.insertBefore(L,k.firstChild);b.remove(ae)}},cc=(b,k,L,Y)=>{if(k.nodeName!==L){const ae=b.dom.rename(k,L);ua(b.dom,ae,Y),la(b,Un(L),ae)}else ua(b.dom,k,Y),la(b,Un(L),k)},Sm=(b,k,L,Y)=>{if(k.classList.forEach((ae,Xe,mt)=>{ae.startsWith("tox-")&&(mt.remove(ae),mt.length===0&&k.removeAttribute("class"))}),k.nodeName!==L){const ae=b.dom.rename(k,L);ua(b.dom,ae,Y),la(b,Un(L),ae)}else ua(b.dom,k,Y),la(b,Un(L),k)},lb=(b,k,L,Y,ae)=>{const Xe=Er(k);if(Xe&&k.nodeName===Y&&!v1(ae)&&!mf(k))vd(b);else{Cm(b,Y,ae);const mt=wa(b.selection.getRng()),En=Xe?[k,...L]:L,Cn=Xe&&mf(k)?Sm:cc;Ns.each(En,Xt=>{Cn(b,Xt,Y,ae)}),b.selection.setRng(gf(mt))}},v1=b=>"list-style-type"in b,ku=(b,k,L,Y)=>{if(k!==b.getBody())if(k)if(k.nodeName===L&&!v1(Y)&&!mf(k))vd(b);else{const ae=wa(b.selection.getRng());mf(k)&&k.classList.forEach((mt,En,Cn)=>{mt.startsWith("tox-")&&(Cn.remove(mt),Cn.length===0&&k.removeAttribute("class"))}),ua(b.dom,k,Y);const Xe=b.dom.rename(k,L);Ou(b.dom,Xe),b.selection.setRng(gf(ae)),Cm(b,L,Y),la(b,Un(L),Xe)}else Cm(b,L,Y),la(b,Un(L),k)},Du=(b,k,L)=>{const Y=Sl(b);if(xu(b,Y))return;const ae=hd(b),Xe=S(L)?L:{};ae.length>0?lb(b,Y,ae,k,Xe):ku(b,Y,k,Xe)},b1=Ci.DOM,cb=(b,k)=>{const L=k.parentElement;if(L&&L.nodeName==="LI"&&L.firstChild===k){const Y=L.previousSibling;Y&&Y.nodeName==="LI"?(Y.appendChild(k),Kn(b,L)&&b1.remove(L)):b1.setStyle(L,"listStyleType","none")}if(Er(L)){const Y=L.previousSibling;Y&&Y.nodeName==="LI"&&Y.appendChild(k)}},Fr=(b,k)=>{const L=Ns.grep(b.select("ol,ul",k));Ns.each(L,Y=>{cb(b,Y)})},Mu=(b,k,L,Y)=>{let ae=k.startContainer;const Xe=k.startOffset;if(Br(ae)&&(L?Xe<ae.data.length:Xe>0))return ae;const mt=b.schema.getNonEmptyElements();zo(ae)&&(ae=dn.getNode(ae,Xe));const En=new oc(ae,Y);L&&Nt(b.dom,ae)&&En.next();const Cn=L?En.next.bind(En):En.prev2.bind(En);for(;ae=Cn();)if(ae.nodeName==="LI"&&!ae.hasChildNodes()||mt[ae.nodeName]||Br(ae)&&ae.data.length>0)return ae;return null},Tr=(b,k)=>{const L=k.childNodes;return L.length===1&&!Er(L[0])&&b.isBlock(L[0])},xm=b=>we.from(b).map(xn.fromDom).filter(Rt).exists(k=>jc(k)&&!Je(["details"],yt(k))),hh=(b,k)=>{Tr(b,k)&&xm(k.firstChild)&&b.remove(k.firstChild,!0)},ph=(b,k,L)=>{let Y;const ae=Tr(b,L)?L.firstChild:L;if(hh(b,k),!Kn(b,k,!0))for(;Y=k.firstChild;)ae.appendChild(Y)},Ls=(b,k,L)=>{let Y;const ae=k.parentNode;if(!fs(b,k)||!fs(b,L))return;Er(L.lastChild)&&(Y=L.lastChild),ae===L.lastChild&&xa(ae.previousSibling)&&b.remove(ae.previousSibling);const Xe=L.lastChild;Xe&&xa(Xe)&&k.hasChildNodes()&&b.remove(Xe),Kn(b,L,!0)&&Ui(xn.fromDom(L)),ph(b,k,L),Y&&L.appendChild(Y);const En=On(xn.fromDom(L),xn.fromDom(k))?b.getParents(k,Er,L):[];b.remove(k),Tt(En,Cn=>{Kn(b,Cn)&&Cn!==b.getRoot()&&b.remove(Cn)})},Tl=(b,k,L)=>{Ui(xn.fromDom(L)),Ls(b.dom,k,L),b.selection.setCursorLocation(L,0)},Ru=(b,k,L,Y)=>{const ae=b.dom;if(ae.isEmpty(Y))Tl(b,L,Y);else{const Xe=wa(k);Ls(ae,L,Y),b.selection.setRng(gf(Xe))}},uc=(b,k,L,Y)=>{const ae=wa(k);Ls(b.dom,L,Y);const Xe=gf(ae);b.selection.setRng(Xe)},Yr=(b,k)=>{const L=b.dom,Y=b.selection,ae=Y.getStart(),Xe=vo(b,ae),mt=L.getParent(Y.getStart(),"LI",Xe);if(mt){const En=mt.parentElement;if(En===b.getBody()&&Kn(L,En))return!0;const Cn=Cs(Y.getRng()),Xt=L.getParent(Mu(b,Cn,k,Xe),"LI",Xe),zn=Xt&&(k?L.isChildOf(mt,Xt):L.isChildOf(Xt,mt));if(Xt&&Xt!==mt&&!zn)return b.undoManager.transact(()=>{k?Ru(b,Cn,Xt,mt):sc(mt)?ca(b):uc(b,Cn,mt,Xt)}),!0;if(zn&&!k&&Xt!==mt){const os=Cn.commonAncestorContainer.parentElement;return!os||L.isChildOf(Xt,os)?!1:(b.undoManager.transact(()=>{const Yi=wa(Cn);ph(L,os,Xt),os.remove();const Xr=gf(Yi);b.selection.setRng(Xr)}),!0)}else if(!Xt&&!k&&Cn.startOffset===0&&Cn.endOffset===0)return b.undoManager.transact(()=>{vd(b)}),!0}return!1},wm=(b,k,L)=>{const Y=b.getParent(k.parentNode,b.isBlock,L);b.remove(k),Y&&b.isEmpty(Y)&&b.remove(Y)},ub=(b,k)=>{const L=b.dom,Y=b.selection.getStart(),ae=vo(b,Y),Xe=L.getParent(Y,L.isBlock,ae);if(Xe&&L.isEmpty(Xe,void 0,{checkRootAsContent:!0})){const mt=Cs(b.selection.getRng()),En=Mu(b,mt,k,ae),Cn=L.getParent(En,"LI",ae);if(En&&Cn){const Xt=Xr=>Je(["td","th","caption"],yt(Xr)),zn=Xr=>Xr.dom===ae,os=Kr(xn.fromDom(Cn),Xt,zn),Yi=Kr(xn.fromDom(mt.startContainer),Xt,zn);return Bs(os,Yi,sn)?(b.undoManager.transact(()=>{const Xr=Cn.parentNode;wm(L,Xe,ae),Ou(L,Xr),b.selection.select(En,!0),b.selection.collapse(k)}),!0):!1}}return!1},jS=(b,k)=>Yr(b,k)||ub(b,k),si=b=>{const k=b.selection.getStart(),L=vo(b,k);return b.dom.getParent(k,"LI,DT,DD",L)||rh(b).length>0},GS=b=>si(b)?(b.undoManager.transact(()=>{let k=!0;const L=()=>k=!1;b.on("input",L),b.execCommand("Delete"),b.off("input",L),k&&b.dispatch("input"),Fr(b.dom,b.getBody())}),!0):!1,vh=(b,k)=>{const L=b.selection;return!xu(b,L.getNode())&&(L.isCollapsed()?jS(b,k):GS(b))},db=b=>{b.on("ExecCommand",k=>{const L=k.command.toLowerCase();(L==="delete"||L==="forwarddelete")&&si(b)&&Fr(b.dom,b.getBody())}),b.on("keydown",k=>{k.keyCode===Su.BACKSPACE?vh(b,!1)&&k.preventDefault():k.keyCode===Su.DELETE&&vh(b,!0)&&k.preventDefault()})},an=b=>({backspaceDelete:k=>{vh(b,k)}}),fb=(b,k)=>{const L=Sl(b);L===null||xu(b,L)||b.undoManager.transact(()=>{S(k.styles)&&b.dom.setStyles(L,k.styles),S(k.attrs)&&Ie(k.attrs,(Y,ae)=>b.dom.setAttrib(L,ae,Y))})},qs=b=>{const k=vs(ia(b).split("")),L=Ce(k,(Y,ae)=>{const Xe=Y.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,ae)*Xe});return et(L,(Y,ae)=>Y+ae,0)},er=b=>{if(b--,b<0)return"";{const k=b%26,L=Math.floor(b/26),Y=er(L),ae=String.fromCharCode(65+k);return Y+ae}},y1=b=>/^[A-Z]+$/.test(b),ls=b=>/^[a-z]+$/.test(b),mb=b=>/^[0-9]+$/.test(b),Em=b=>mb(b)?2:y1(b)?0:ls(b)?1:Ht(b)?3:4,dc=b=>{switch(Em(b)){case 2:return we.some({listStyleType:we.none(),start:b});case 0:return we.some({listStyleType:we.some("upper-alpha"),start:qs(b).toString()});case 1:return we.some({listStyleType:we.some("lower-alpha"),start:qs(b).toString()});case 3:return we.some({listStyleType:we.none(),start:""});case 4:return we.none()}},Ta=b=>{const k=parseInt(b.start,10);return Bo(b.listStyleType,"upper-alpha")?er(k):Bo(b.listStyleType,"lower-alpha")?er(k).toLowerCase():b.start},Kc=b=>{const k=Sl(b);!Wi(k)||xu(b,k)||b.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Ta({start:b.dom.getAttrib(k,"start","1"),listStyleType:we.from(b.dom.getStyle(k,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:L=>{const Y=L.getData();dc(Y.start).each(ae=>{b.execCommand("mceListUpdate",!1,{attrs:{start:ae.start==="1"?"":ae.start},styles:{"list-style-type":ae.listStyleType.getOr("")}})}),L.close()}})},Tm=(b,k)=>()=>{const L=Sl(b);return K(L)&&L.nodeName===k},Fs=b=>{b.addCommand("mceListProps",()=>{Kc(b)})},bh=b=>{b.on("BeforeExecCommand",k=>{const L=k.command.toLowerCase();L==="indent"?fh(b):L==="outdent"&&ca(b)}),b.addCommand("InsertUnorderedList",(k,L)=>{Du(b,"UL",L)}),b.addCommand("InsertOrderedList",(k,L)=>{Du(b,"OL",L)}),b.addCommand("InsertDefinitionList",(k,L)=>{Du(b,"DL",L)}),b.addCommand("RemoveList",()=>{vd(b)}),Fs(b),b.addCommand("mceListUpdate",(k,L)=>{S(L)&&fb(b,L)}),b.addQueryStateHandler("InsertUnorderedList",Tm(b,"UL")),b.addQueryStateHandler("InsertOrderedList",Tm(b,"OL")),b.addQueryStateHandler("InsertDefinitionList",Tm(b,"DL"))};var pf=tinymce.util.Tools.resolve("tinymce.html.Node");const Pu=b=>b.type===3,C1=b=>b.length===0,fr=b=>{const k=(ae,Xe)=>{const mt=pf.create("li");Tt(ae,En=>mt.append(En)),Xe?b.insert(mt,Xe,!0):b.append(mt)},L=(ae,Xe)=>Pu(Xe)?[...ae,Xe]:!C1(ae)&&!Pu(Xe)?(k(ae,Xe),[]):ae,Y=et(b.children(),L,[]);C1(Y)||k(Y)},xi=b=>{b.on("PreInit",()=>{const{parser:k}=b;k.addNodeFilter("ul,ol",L=>Tt(L,fr))})},ks=b=>{b.on("keydown",k=>{k.keyCode!==Su.TAB||Su.metaKeyPressed(k)||b.undoManager.transact(()=>{(k.shiftKey?ca(b):fh(b))&&k.preventDefault()})})},Aa=b=>{rt(b)&&ks(b),db(b)},vf=(b,k)=>L=>{const Y=ae=>{L.setActive(ih(ae.parents,k)),L.setEnabled(!xu(b,ae.element)&&b.selection.isEditable())};return L.setEnabled(b.selection.isEditable()),ac(b,Y)},tr=b=>{const k=L=>()=>b.execCommand(L);b.hasPlugin("advlist")||(b.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:k("InsertOrderedList"),onSetup:vf(b,"OL")}),b.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:k("InsertUnorderedList"),onSetup:vf(b,"UL")}))},gb=(b,k)=>L=>ac(b,ae=>L.setEnabled(ih(ae.parents,k)&&!xu(b,ae.element))),gn=b=>{const k={text:"List properties...",icon:"ordered-list",onAction:()=>b.execCommand("mceListProps"),onSetup:gb(b,"OL")};b.ui.registry.addMenuItem("listprops",k),b.ui.registry.addContextMenu("lists",{update:L=>{const Y=Sl(b,L);return Wi(Y)?["listprops"]:[]}})};var Ki=()=>{U.add("lists",b=>(Qs(b),xi(b),b.hasPlugin("rtc",!0)?Fs(b):(Aa(b),bh(b)),tr(b),gn(b),an(b)))};Ki()})();(function(){const U=Object.getPrototypeOf,w=(t,s,a)=>{var l;return a(t,s.prototype)?!0:((l=t.constructor)===null||l===void 0?void 0:l.name)===s.name},F=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&w(t,String,(a,l)=>l.isPrototypeOf(a))?"string":s},T=t=>s=>F(s)===t,P=t=>s=>typeof s===t,j=t=>s=>t===s,S=(t,s)=>O(t)&&w(t,s,(a,l)=>U(a)===l),B=T("string"),O=T("object"),z=t=>S(t,Object),K=T("array"),J=j(null),re=P("boolean"),ce=j(void 0),me=t=>t==null,fe=t=>!me(t),ye=P("function"),Fe=P("number"),pe=(t,s)=>{if(K(t)){for(let a=0,l=t.length;a<l;++a)if(!s(t[a]))return!1;return!0}return!1},ee=()=>{},we=t=>()=>t(),bt=(t,s)=>(...a)=>t(s.apply(null,a)),Ke=(t,s)=>a=>t(s(a)),te=t=>()=>t,ct=t=>t,Je=(t,s)=>t===s;function dt(t,...s){return(...a)=>{const l=s.concat(a);return t.apply(null,l)}}const Ce=t=>s=>!t(s),Tt=t=>()=>{throw new Error(t)},St=t=>t(),it=te(!1),et=te(!0);class x{constructor(s,a){this.tag=s,this.value=a}static some(s){return new x(!0,s)}static none(){return x.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?x.some(s(this.value)):x.none()}bind(s){return this.tag?s(this.value):x.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:x.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return fe(s)?x.some(s):x.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}x.singletonNone=new x(!1);const pn=Array.prototype.slice,Ye=Array.prototype.indexOf,Xn=Array.prototype.push,vs=(t,s)=>Ye.call(t,s),ht=(t,s)=>{const a=vs(t,s);return a===-1?x.none():x.some(a)},An=(t,s)=>vs(t,s)>-1,yn=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const u=t[a];if(s(u,a))return!0}return!1},Oo=(t,s)=>{const a=[];for(let l=0;l<t;l++)a.push(s(l));return a},Io=(t,s)=>{const a=[];for(let l=0;l<t.length;l+=s){const u=pn.call(t,l,l+s);a.push(u)}return a},Ie=(t,s)=>{const a=t.length,l=new Array(a);for(let u=0;u<a;u++){const f=t[u];l[u]=s(f,u)}return l},Qe=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const u=t[a];s(u,a)}},N=(t,s)=>{for(let a=t.length-1;a>=0;a--){const l=t[a];s(l,a)}},Os=(t,s)=>{const a=[],l=[];for(let u=0,f=t.length;u<f;u++){const m=t[u];(s(m,u)?a:l).push(m)}return{pass:a,fail:l}},eo=(t,s)=>{const a=[];for(let l=0,u=t.length;l<u;l++){const f=t[l];s(f,l)&&a.push(f)}return a},as=(t,s,a)=>(N(t,(l,u)=>{a=s(a,l,u)}),a),Bo=(t,s,a)=>(Qe(t,(l,u)=>{a=s(a,l,u)}),a),Bs=(t,s,a)=>{for(let l=0,u=t.length;l<u;l++){const f=t[l];if(s(f,l))return x.some(f);if(a(f,l))break}return x.none()},_t=(t,s)=>Bs(t,s,it),to=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const u=t[a];if(s(u,a))return x.some(a)}return x.none()},Ot=t=>{const s=[];for(let a=0,l=t.length;a<l;++a){if(!K(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Xn.apply(s,t[a])}return s},ke=(t,s)=>Ot(Ie(t,s)),ia=(t,s)=>{for(let a=0,l=t.length;a<l;++a){const u=t[a];if(s(u,a)!==!0)return!1}return!0},Sr=t=>{const s=pn.call(t,0);return s.reverse(),s},Ht=(t,s)=>eo(t,a=>!An(s,a)),ur=(t,s)=>{const a={};for(let l=0,u=t.length;l<u;l++){const f=t[l];a[String(f)]=s(f,l)}return a},Ko=t=>[t],za=(t,s)=>{const a=pn.call(t,0);return a.sort(s),a},No=(t,s)=>s>=0&&s<t.length?x.some(t[s]):x.none(),bs=t=>No(t,0),jr=t=>No(t,t.length-1),Rs=ye(Array.from)?Array.from:t=>pn.call(t),xn=(t,s)=>{for(let a=0;a<t.length;a++){const l=s(t[a],a);if(l.isSome())return l}return x.none()},Re=Object.keys,_e=Object.hasOwnProperty,ze=(t,s)=>{const a=Re(t);for(let l=0,u=a.length;l<u;l++){const f=a[l],m=t[f];s(m,f)}},ot=(t,s)=>en(t,(a,l)=>({k:l,v:s(a,l)})),en=(t,s)=>{const a={};return ze(t,(l,u)=>{const f=s(l,u);a[f.k]=f.v}),a},sn=t=>(s,a)=>{t[a]=s},On=(t,s,a,l)=>{ze(t,(u,f)=>{(s(u,f)?a:l)(u,f)})},Vn=(t,s)=>{const a={},l={};return On(t,s,sn(a),sn(l)),{t:a,f:l}},Lo=(t,s)=>{const a={};return On(t,s,sn(a),ee),a},wn=(t,s)=>{const a=[];return ze(t,(l,u)=>{a.push(s(l,u))}),a},Yt=(t,s)=>{const a=Re(t);for(let l=0,u=a.length;l<u;l++){const f=a[l],m=t[f];if(s(m,f,t))return x.some(m)}return x.none()},Dn=t=>wn(t,ct),$e=(t,s)=>yt(t,s)?x.from(t[s]):x.none(),yt=(t,s)=>_e.call(t,s),To=(t,s)=>yt(t,s)&&t[s]!==void 0&&t[s]!==null,Ir={generate:t=>{if(!K(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return Qe(t,(l,u)=>{const f=Re(l);if(f.length!==1)throw new Error("one and only one name per case");const m=f[0],p=l[m];if(a[m]!==void 0)throw new Error("duplicate key detected:"+m);if(m==="cata")throw new Error("cannot have a case named cata (sorry)");if(!K(p))throw new Error("case arguments must be an array");s.push(m),a[m]=(...v)=>{const C=v.length;if(C!==p.length)throw new Error("Wrong number of arguments to case "+m+". Expected "+p.length+" ("+p+"), got "+C);return{fold:(...D)=>{if(D.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+D.length);return D[u].apply(null,v)},match:D=>{const I=Re(D);if(s.length!==I.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+I.join(","));if(!ia(s,W=>An(I,W)))throw new Error("Not all branches were specified when using match. Specified: "+I.join(", ")+`
Required: `+s.join(", "));return D[m].apply(null,v)},log:D=>{console.log(D,{constructors:s,constructor:m,params:v})}}}}),a}},Rt=t=>{let s=t;return{get:()=>s,set:u=>{s=u}}},bi=t=>{let s=x.none(),a=[];const l=C=>bi(E=>{u(D=>{E(C(D))})}),u=C=>{m()?v(C):a.push(C)},f=C=>{m()||(s=x.some(C),p(a),a=[])},m=()=>s.isSome(),p=C=>{Qe(C,v)},v=C=>{s.each(E=>{setTimeout(()=>{C(E)},0)})};return t(f),{get:u,map:l,isReady:m}},pu={nu:bi,pure:t=>bi(s=>{s(t)})},Fo=t=>{setTimeout(()=>{throw t},0)},nn=t=>{const s=v=>{t().then(v,Fo)};return{map:v=>nn(()=>t().then(v)),bind:v=>nn(()=>t().then(C=>v(C).toPromise())),anonBind:v=>nn(()=>t().then(()=>v.toPromise())),toLazy:()=>pu.nu(s),toCached:()=>{let v=null;return nn(()=>(v===null&&(v=t()),v))},toPromise:t,get:s}},ns={nu:t=>nn(()=>new Promise(t)),pure:t=>nn(()=>Promise.resolve(t))},xr=t=>{const s=f=>f(t),a=te(t),l=()=>u,u={tag:!0,inner:t,fold:(f,m)=>m(t),isValue:et,isError:it,map:f=>Sn.value(f(t)),mapError:l,bind:s,exists:s,forall:s,getOr:a,or:l,getOrThunk:a,orThunk:l,getOrDie:a,each:f=>{f(t)},toOptional:()=>x.some(t)};return u},is=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(l,u)=>l(t),isValue:it,isError:et,map:s,mapError:l=>Sn.error(l(t)),bind:s,exists:it,forall:et,getOr:ct,or:ct,getOrThunk:St,orThunk:St,getOrDie:Tt(String(t)),each:ee,toOptional:x.none};return a},Sn={value:xr,error:is,fromOption:(t,s)=>t.fold(()=>is(s),xr)},Ua=t=>({...t,toCached:()=>Ua(t.toCached()),bindFuture:v=>Ua(t.bind(C=>C.fold(E=>ns.pure(Sn.error(E)),E=>v(E)))),bindResult:v=>Ua(t.map(C=>C.bind(v))),mapResult:v=>Ua(t.map(C=>C.map(v))),mapError:v=>Ua(t.map(C=>C.mapError(v))),foldResult:(v,C)=>t.map(E=>E.fold(v,C)),withTimeout:(v,C)=>Ua(ns.nu(E=>{let D=!1;const I=setTimeout(()=>{D=!0,E(Sn.error(C()))},v);t.get(H=>{D||(clearTimeout(I),E(H))})}))}),wr=t=>Ua(ns.nu(t)),vu=t=>Ua(ns.pure(Sn.value(t))),bu={nu:wr,wrap:Ua,pure:vu,value:vu,error:t=>Ua(ns.pure(Sn.error(t))),fromResult:t=>Ua(ns.pure(t)),fromFuture:t=>Ua(t.map(Sn.value)),fromPromise:t=>wr(s=>{t.then(a=>{s(Sn.value(a))},a=>{s(Sn.error(a))})})},hl=typeof window<"u"?window:Function("return this;")(),yi=(t,s,a,l)=>{const u=t+s;return u>l?a:u<a?l:u},Us=(t,s,a)=>Math.min(Math.max(t,s),a),yu=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Ui=0;const Ct=t=>{const a=new Date().getTime(),l=Math.floor(yu()*1e9);return Ui++,t+"_"+l+Ui+String(a)},lm=(t,s)=>s,Zs=(t,s)=>z(t)&&z(s)?ho(t,s):s,cm=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let l=0;l<s.length;l++){const u=s[l];for(const f in u)yt(u,f)&&(a[f]=t(a[f],u[f]))}return a},ho=cm(Zs),cf=cm(lm),Sa=(t,s,a=Je)=>t.exists(l=>a(l,s)),um=(t,s,a=Je)=>Gr(t,s,a).getOr(t.isNone()&&s.isNone()),pl=t=>{const s=[],a=l=>{s.push(l)};for(let l=0;l<t.length;l++)t[l].each(a);return s},dm=t=>{const s=[];for(let a=0;a<t.length;a++){const l=t[a];if(l.isSome())s.push(l.getOrDie());else return x.none()}return x.some(s)},Gr=(t,s,a)=>t.isSome()&&s.isSome()?x.some(a(t.getOrDie(),s.getOrDie())):x.none(),uf=(t,s,a,l)=>t.isSome()&&s.isSome()&&a.isSome()?x.some(l(t.getOrDie(),s.getOrDie(),a.getOrDie())):x.none(),Cu=(t,s)=>t!=null?x.some(s(t)):x.none(),Kr=(t,s)=>t?x.some(s):x.none(),Ws=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Ps=(t,s)=>{let a=s??hl;for(let l=0;l<t.length&&a!==void 0&&a!==null;++l)a=a[t[l]];return a},vl=(t,s)=>{const a=t.split(".");return Ps(a,s)};Ir.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const jc=t=>{const s=[],a=[];return Qe(t,l=>{l.fold(u=>{s.push(u)},u=>{a.push(u)})}),{errors:s,values:a}},Zi=t=>{const s=Rt(x.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(x.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:p=>{a(),s.set(x.some(p))}}},sh=()=>Zi(t=>t.destroy()),bl=()=>Zi(t=>t.unbind()),dn=()=>{const t=Zi(ee);return{...t,on:a=>t.get().each(a)}},oc=(t,s)=>t+s,Su=(t,s)=>t.substring(s),Ci=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,Ns=(t,s)=>Br(t,s)?Su(t,s.length):t,yl=(t,s)=>zo(t,s)?t:oc(t,s),Vo=(t,s,a=0,l)=>{const u=t.indexOf(s,a);return u!==-1?ce(l)?!0:u+s.length<=l:!1},Br=(t,s)=>Ci(t,s,0),zo=(t,s)=>Ci(t,s,t.length-s.length),gd=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),Wi=t=>t.length>0,ji=t=>!Wi(t),Gc=t=>{const s=parseFloat(t);return isNaN(s)?x.none():x.some(s)},fm=(t,s)=>{let a=null,l=null;return{cancel:()=>{J(a)||(clearTimeout(a),a=null,l=null)},throttle:(...m)=>{l=m,J(a)&&(a=setTimeout(()=>{const p=l;a=null,l=null,t.apply(null,p)},s))}}},xa=(t,s)=>{let a=null;return{cancel:()=>{J(a)||(clearTimeout(a),a=null)},throttle:(...f)=>{J(a)&&(a=setTimeout(()=>{a=null,t.apply(null,f)},s))}}},sc=(t,s)=>{let a=null;const l=()=>{J(a)||(clearTimeout(a),a=null)};return{cancel:l,throttle:(...f)=>{l(),a=setTimeout(()=>{a=null,t.apply(null,f)},s)}}},Lr=t=>{let s=!1,a;return(...l)=>(s||(s=!0,a=t.apply(null,l)),a)},rc="\uFEFF",Te=" ",Nt=(t,s)=>{const l=(s||document).createElement("div");if(l.innerHTML=t,!l.hasChildNodes()||l.childNodes.length>1){const u="HTML does not have a single root node";throw console.error(u,t),new Error(u)}return Uo(l.childNodes[0])},Kn=(t,s)=>{const l=(s||document).createElement(t);return Uo(l)},fs=(t,s)=>{const l=(s||document).createTextNode(t);return Uo(l)},Uo=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},rt={fromHtml:Nt,fromTag:Kn,fromText:fs,fromDom:Uo,fromPoint:(t,s,a)=>x.from(t.dom.elementFromPoint(s,a)).map(Uo)},mm=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,l)=>{t.setStart(a.dom,l)},a=>{t.setStartAfter(a.dom)})},gm=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,l)=>{t.setEnd(a.dom,l)},a=>{t.setEndAfter(a.dom)})},$=(t,s,a)=>{const l=t.document.createRange();return mm(l,s),gm(l,a),l},q=(t,s,a,l,u)=>{const f=t.document.createRange();return f.setStart(s.dom,a),f.setEnd(l.dom,u),f},de=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),Ve=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?x.some(a).map(de):x.none()},ft=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?x.some(s).map(de):x.none()},Dt=Ir.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ln=(t,s,a)=>s(rt.fromDom(a.startContainer),a.startOffset,rt.fromDom(a.endContainer),a.endOffset),ys=(t,s)=>s.match({domRange:a=>({ltr:te(a),rtl:x.none}),relative:(a,l)=>({ltr:Lr(()=>$(t,a,l)),rtl:Lr(()=>x.some($(t,l,a)))}),exact:(a,l,u,f)=>({ltr:Lr(()=>q(t,a,l,u,f)),rtl:Lr(()=>x.some(q(t,u,f,a,l)))})}),po=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(u=>u.collapsed===!1).map(u=>Dt.rtl(rt.fromDom(u.endContainer),u.endOffset,rt.fromDom(u.startContainer),u.startOffset)).getOrThunk(()=>Ln(t,Dt.ltr,a)):Ln(t,Dt.ltr,a)},Cs=(t,s)=>{const a=ys(t,s);return po(t,a)},ms=(t,s)=>Cs(t,s).match({ltr:(l,u,f,m)=>{const p=t.document.createRange();return p.setStart(l.dom,u),p.setEnd(f.dom,m),p},rtl:(l,u,f,m)=>{const p=t.document.createRange();return p.setStart(f.dom,m),p.setEnd(l.dom,u),p}});Dt.ltr,Dt.rtl;const Cl=9,Sl=11,df=1,G0=3,hd=(t,s)=>{const a=t.dom;if(a.nodeType!==df)return!1;{const l=a;if(l.matches!==void 0)return l.matches(s);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(s);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(s);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},K0=t=>t.nodeType!==df&&t.nodeType!==Cl&&t.nodeType!==Sl||t.childElementCount===0,rh=(t,s)=>{const a=s===void 0?document:s.dom;return K0(a)?[]:Ie(a.querySelectorAll(t),rt.fromDom)},u1=(t,s)=>{const a=s===void 0?document:s.dom;return K0(a)?x.none():x.from(a.querySelector(t)).map(rt.fromDom)},vo=(t,s)=>t.dom===s.dom,hm=(t,s)=>{const a=t.dom,l=s.dom;return a===l?!1:a.contains(l)},ff=(t,s,a,l)=>{const u=t.isiOS()&&/ipad/i.test(a)===!0,f=t.isiOS()&&!u,m=t.isiOS()||t.isAndroid(),p=m||l("(pointer:coarse)"),v=u||!f&&m&&l("(min-device-width:768px)"),C=f||m&&!v,E=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,D=!C&&!v&&!E;return{isiPad:te(u),isiPhone:te(f),isTablet:te(v),isPhone:te(C),isTouch:te(p),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:te(E),isDesktop:te(D)}},Y0=(t,s)=>{for(let a=0;a<t.length;a++){const l=t[a];if(l.test(s))return l}},d1=(t,s)=>{const a=Y0(t,s);if(!a)return{major:0,minor:0};const l=u=>Number(s.replace(a,"$"+u));return ah(l(1),l(2))},X0=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?f1():d1(t,a)},f1=()=>ah(0,0),ah=(t,s)=>({major:t,minor:s}),pm={nu:ah,detect:X0,unknown:f1},mf=(t,s)=>xn(s.brands,a=>{const l=a.brand.toLowerCase();return _t(t,u=>{var f;return l===((f=u.brand)===null||f===void 0?void 0:f.toLowerCase())}).map(u=>({current:u.name,version:pm.nu(parseInt(a.version,10),0)}))}),ih=(t,s)=>{const a=String(s).toLowerCase();return _t(t,l=>l.search(a))},FS=(t,s)=>ih(t,s).map(a=>{const l=pm.detect(a.versionRegexes,s);return{current:a.name,version:l}}),_S=(t,s)=>ih(t,s).map(a=>{const l=pm.detect(a.versionRegexes,s);return{current:a.name,version:l}}),xu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ac=t=>s=>Vo(s,t),la=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Vo(t,"edge/")&&Vo(t,"chrome")&&Vo(t,"safari")&&Vo(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,xu],search:t=>Vo(t,"chrome")&&!Vo(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Vo(t,"msie")||Vo(t,"trident")},{name:"Opera",versionRegexes:[xu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ac("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ac("firefox")},{name:"Safari",versionRegexes:[xu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Vo(t,"safari")||Vo(t,"mobile/"))&&Vo(t,"applewebkit")}],vm=[{name:"Windows",search:ac("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Vo(t,"iphone")||Vo(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ac("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ac("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ac("linux"),versionRegexes:[]},{name:"Solaris",search:ac("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ac("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ac("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],J0={browsers:te(la),oses:te(vm)},m1="Edge",Q0="Chromium",wu="IE",g1="Opera",lh="Firefox",Gi="Safari",ic=()=>Eu({current:void 0,version:pm.unknown()}),Eu=t=>{const s=t.current,a=t.version,l=u=>()=>s===u;return{current:s,version:a,isEdge:l(m1),isChromium:l(Q0),isIE:l(wu),isOpera:l(g1),isFirefox:l(lh),isSafari:l(Gi)}},q0={unknown:ic,nu:Eu,edge:te(m1),chromium:te(Q0),ie:te(wu),opera:te(g1),firefox:te(lh),safari:te(Gi)},no="Windows",eb="iOS",h1="Android",tb="Linux",nb="macOS",ob="Solaris",sb="FreeBSD",p1="ChromeOS",oO=()=>rb({current:void 0,version:pm.unknown()}),rb=t=>{const s=t.current,a=t.version,l=u=>()=>s===u;return{current:s,version:a,isWindows:l(no),isiOS:l(eb),isAndroid:l(h1),isMacOS:l(nb),isLinux:l(tb),isSolaris:l(ob),isFreeBSD:l(sb),isChromeOS:l(p1)}},$S={unknown:oO,nu:rb,windows:te(no),ios:te(eb),android:te(h1),linux:te(tb),macos:te(nb),solaris:te(ob),freebsd:te(sb),chromeos:te(p1)},HS={detect:(t,s,a)=>{const l=J0.browsers(),u=J0.oses(),f=s.bind(v=>mf(l,v)).orThunk(()=>FS(l,t)).fold(q0.unknown,q0.nu),m=_S(u,t).fold($S.unknown,$S.nu),p=ff(m,f,t,a);return{browser:f,os:m,deviceType:p}}},VS=t=>window.matchMedia(t).matches;let zS=Lr(()=>HS.detect(window.navigator.userAgent,x.from(window.navigator.userAgentData),VS));const Wa=()=>zS(),US=(t,s)=>vl(t,s),ne=(t,s)=>{const a=US(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},ZS=Object.getPrototypeOf,ch=t=>ne("HTMLElement",t),ab=t=>{const s=vl("ownerDocument.defaultView",t);return O(t)&&(ch(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(ZS(t).constructor.name))},xl=t=>t.dom.nodeName.toLowerCase(),bm=t=>t.dom.nodeType,ym=t=>s=>bm(s)===t,ib=t=>oi(t)&&ab(t.dom),oi=ym(df),pd=ym(G0),uh=ym(Cl),dh=ym(Sl),fh=t=>s=>oi(s)&&xl(s)===t,ca=t=>rt.fromDom(t.dom.ownerDocument),vd=t=>uh(t)?t:ca(t),Si=t=>rt.fromDom(vd(t).dom.documentElement),wl=t=>rt.fromDom(vd(t).dom.defaultView),wa=t=>x.from(t.dom.parentNode).map(rt.fromDom),gf=t=>wa(t),Un=t=>x.from(t.dom.parentElement).map(rt.fromDom),El=(t,s)=>{const a=ye(s)?s:it;let l=t.dom;const u=[];for(;l.parentNode!==null&&l.parentNode!==void 0;){const f=l.parentNode,m=rt.fromDom(f);if(u.push(m),a(m)===!0)break;l=f}return u},mh=t=>x.from(t.dom.offsetParent).map(rt.fromDom),ao=t=>x.from(t.dom.nextSibling).map(rt.fromDom),ua=t=>Ie(t.dom.childNodes,rt.fromDom),lc=(t,s)=>{const a=t.dom.childNodes;return x.from(a[s]).map(rt.fromDom)},hf=t=>lc(t,0),Tu=(t,s)=>({element:t,offset:s}),ja=(t,s)=>{const a=ua(t);return a.length>0&&s<a.length?Tu(a[s],0):Tu(t,s)},Ea=(t,s,a,l)=>{const f=ca(t).dom.createRange();return f.setStart(t.dom,s),f.setEnd(a.dom,l),f},WS=(t,s,a,l)=>{const u=Ea(t,s,a,l),f=vo(t,a)&&s===l;return u.collapsed&&!f},Cm=t=>dh(t)&&fe(t.dom.host),dr=t=>rt.fromDom(t.dom.getRootNode()),bd=t=>Cm(t)?t:rt.fromDom(vd(t).dom.body),Au=t=>gh(t).isSome(),gh=t=>{const s=dr(t);return Cm(s)?x.some(s):x.none()},Ou=t=>rt.fromDom(t.dom.host),cc=t=>{if(fe(t.target)){const s=rt.fromDom(t.target);if(oi(s)&&Sm(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return bs(a)}}return x.from(t.target)},Sm=t=>fe(t.dom.shadowRoot),lb=(t,s,a,l,u,f,m)=>({target:t,x:s,y:a,stop:l,prevent:u,kill:f,raw:m}),v1=t=>{const s=rt.fromDom(cc(t).getOr(t.target)),a=()=>t.stopPropagation(),l=()=>t.preventDefault(),u=bt(l,a);return lb(s,t.clientX,t.clientY,a,l,u,t)},ku=(t,s)=>a=>{t(a)&&s(v1(a))},Du=(t,s,a,l,u)=>{const f=ku(a,l);return t.dom.addEventListener(s,f,u),{unbind:dt(Fr,t,s,f,u)}},b1=(t,s,a,l)=>Du(t,s,a,l,!1),cb=(t,s,a,l)=>Du(t,s,a,l,!0),Fr=(t,s,a,l)=>{t.dom.removeEventListener(s,a,l)},Mu=et,Tr=(t,s,a)=>b1(t,s,Mu,a),xm=(t,s,a)=>cb(t,s,Mu,a),hh=v1,ph=()=>rt.fromDom(document),Ls=(t,s=!1)=>t.dom.focus({preventScroll:s}),Tl=t=>t.dom.blur(),Ru=t=>{const s=dr(t).dom;return t.dom===s.activeElement},uc=(t=ph())=>x.from(t.dom.activeElement).map(rt.fromDom),Yr=t=>uc(dr(t)).filter(s=>t.dom.contains(s.dom)),wm=(t,s)=>{wa(t).each(l=>{l.dom.insertBefore(s.dom,t.dom)})},ub=(t,s)=>{ao(t).fold(()=>{wa(t).each(u=>{si(u,s)})},l=>{wm(l,s)})},jS=(t,s)=>{hf(t).fold(()=>{si(t,s)},l=>{t.dom.insertBefore(s.dom,l.dom)})},si=(t,s)=>{t.dom.appendChild(s.dom)},GS=(t,s,a)=>{lc(t,a).fold(()=>{si(t,s)},l=>{wm(l,s)})},vh=(t,s)=>{Qe(s,a=>{si(t,a)})},db=(t,s,a)=>{if(B(a)||re(a)||Fe(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},an=(t,s,a)=>{db(t.dom,s,a)},fb=(t,s)=>{const a=t.dom;ze(s,(l,u)=>{db(a,u,l)})},qs=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},er=(t,s)=>x.from(qs(t,s)),y1=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},ls=(t,s)=>{t.dom.removeAttribute(s)},mb=t=>Bo(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Em=t=>{t.dom.textContent="",Qe(ua(t),s=>{dc(s)})},dc=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Ta=(t,s)=>rt.fromDom(t.dom.cloneNode(s)),Kc=t=>Ta(t,!1),Tm=t=>Ta(t,!0),Fs=(t,s)=>{const l=(s||document).createElement("div");return l.innerHTML=t,ua(rt.fromDom(l))},bh=t=>t.dom.innerHTML,pf=(t,s)=>{const l=ca(t).dom,u=rt.fromDom(l.createDocumentFragment()),f=Fs(s,l);vh(u,f),Em(t),si(t,u)},Pu=t=>{const s=rt.fromTag("div"),a=rt.fromDom(t.dom.cloneNode(!0));return si(s,a),bh(s)},C1=t=>{if(Cm(t))return"#shadow-root";{const s=Kc(t);return Pu(s)}},fr=t=>new Promise((s,a)=>{const l=()=>{f(),s(t)},u=[Tr(t,"load",l),Tr(t,"error",()=>{f(),a("Unable to load data from image: "+t.dom.src)})],f=()=>Qe(u,m=>m.unbind());t.dom.complete&&l()}),xi=t=>t.style!==void 0&&ye(t.style.getPropertyValue),ks=t=>{const s=pd(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return gh(rt.fromDom(s)).fold(()=>a.body.contains(s),Ke(ks,Ou))},Aa=()=>vf(rt.fromDom(document)),vf=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return rt.fromDom(s)},tr=(t,s,a)=>{if(!B(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);xi(t)&&t.style.setProperty(s,a)},gb=(t,s)=>{xi(t)&&t.style.removeProperty(s)},gn=(t,s,a)=>{const l=t.dom;tr(l,s,a)},Ki=(t,s)=>{const a=t.dom;ze(s,(l,u)=>{tr(a,u,l)})},b=(t,s)=>{const a=t.dom;ze(s,(l,u)=>{l.fold(()=>{gb(a,u)},f=>{tr(a,u,f)})})},k=(t,s)=>{const a=t.dom,u=window.getComputedStyle(a).getPropertyValue(s);return u===""&&!ks(t)?L(a,s):u},L=(t,s)=>xi(t)?t.style.getPropertyValue(s):"",Y=(t,s)=>{const a=t.dom,l=L(a,s);return x.from(l).filter(u=>u.length>0)},ae=t=>{const s={},a=t.dom;if(xi(a))for(let l=0;l<a.style.length;l++){const u=a.style.item(l);s[u]=a.style[u]}return s},Xe=(t,s,a)=>{const l=rt.fromTag(t);return gn(l,s,a),Y(l,s).isSome()},mt=(t,s)=>{const a=t.dom;gb(a,s),Sa(er(t,"style").map(gd),"")&&ls(t,"style")},En=t=>t.dom.offsetWidth,Cn=(t,s)=>{const a=(p,v)=>{if(!Fe(v)&&!v.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+v);const C=p.dom;xi(C)&&(C.style[t]=v+"px")},l=p=>{const v=s(p);if(v<=0||v===null){const C=k(p,t);return parseFloat(C)||0}return v},u=l,f=(p,v)=>Bo(v,(C,E)=>{const D=k(p,E),I=D===void 0?0:parseInt(D,10);return isNaN(I)?C:C+I},0);return{set:a,get:l,getOuter:u,aggregate:f,max:(p,v,C)=>{const E=f(p,C);return v>E?v-E:0}}},Xt=Cn("height",t=>{const s=t.dom;return ks(t)?s.getBoundingClientRect().height:s.offsetHeight}),zn=t=>Xt.get(t),os=t=>Xt.getOuter(t),Yi=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],l=Xt.max(t,s,a);gn(t,"max-height",l+"px")},Xr=t=>t.offsetWidth<=0&&t.offsetHeight<=0,KS=t=>!Xr(t.dom),hb=Cn("width",t=>t.dom.offsetWidth),sO=Cn("width",t=>{const s=t.dom;return ks(t)?s.getBoundingClientRect().width:s.offsetWidth}),pb=(t,s)=>hb.set(t,s),nr=t=>hb.get(t),yh=t=>hb.getOuter(t),vb=t=>sO.getOuter(t),YS=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],l=hb.max(t,s,a);gn(t,"max-width",l+"px")},XS=(t,s)=>({left:t,top:s,translate:(l,u)=>XS(t+l,s+u)}),Ss=XS,HK=t=>{const s=t.getBoundingClientRect();return Ss(s.left,s.top)},bb=(t,s)=>t!==void 0?t:s!==void 0?s:0,fc=t=>{const s=t.dom.ownerDocument,a=s.body,l=s.defaultView,u=s.documentElement;if(a===t.dom)return Ss(a.offsetLeft,a.offsetTop);const f=bb(l==null?void 0:l.pageYOffset,u.scrollTop),m=bb(l==null?void 0:l.pageXOffset,u.scrollLeft),p=bb(u.clientTop,a.clientTop),v=bb(u.clientLeft,a.clientLeft);return S1(t).translate(m-v,f-p)},S1=t=>{const s=t.dom,l=s.ownerDocument.body;return l===s?Ss(l.offsetLeft,l.offsetTop):ks(t)?HK(s):Ss(0,0)},da=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,l=s.body.scrollTop||s.documentElement.scrollTop;return Ss(a,l)},JS=(t,s,a)=>{const u=(a!==void 0?a.dom:document).defaultView;u&&u.scrollTo(t,s)},NB=((t,s)=>{const a=f=>{if(!t(f))throw new Error("Can only get "+s+" value of a "+s+" node");return l(f).getOr("")},l=f=>t(f)?x.from(f.dom.nodeValue):x.none();return{get:a,getOption:l,set:(f,m)=>{if(!t(f))throw new Error("Can only set raw "+s+" value of a "+s+" node");f.dom.nodeValue=m}}})(pd,"text"),qS=t=>NB.get(t),x1=(t,s)=>a=>rO(a)==="rtl"?s:t,rO=t=>k(t,"direction")==="rtl"?"rtl":"ltr",yb=(t,s)=>{const a=qs(t,s);return a===void 0||a===""?[]:a.split(" ")},IB=(t,s,a)=>{const u=yb(t,s).concat([a]);return an(t,s,u.join(" ")),!0},ex=(t,s,a)=>{const l=eo(yb(t,s),u=>u!==a);return l.length>0?an(t,s,l.join(" ")):ls(t,s),!1};var Cb=(t,s,a,l,u)=>t(a,l)?x.some(a):ye(u)&&u(a)?x.none():s(a,l,u);const Ch=(t,s,a)=>{let l=t.dom;const u=ye(a)?a:it;for(;l.parentNode;){l=l.parentNode;const f=rt.fromDom(l);if(s(f))return x.some(f);if(u(f))break}return x.none()},aO=(t,s,a)=>Cb((u,f)=>f(u),Ch,t,s,a),iO=(t,s)=>{const a=t.dom;return a.parentNode?Sb(rt.fromDom(a.parentNode),l=>!vo(t,l)&&s(l)):x.none()},Sb=(t,s)=>{const a=u=>s(rt.fromDom(u));return _t(t.dom.childNodes,a).map(rt.fromDom)},BB=(t,s)=>{const a=l=>{for(let u=0;u<l.childNodes.length;u++){const f=rt.fromDom(l.childNodes[u]);if(s(f))return x.some(f);const m=a(l.childNodes[u]);if(m.isSome())return m}return x.none()};return a(t.dom)},LB=t=>u1(t),mc=(t,s,a)=>Ch(t,l=>hd(l,s),a),yd=(t,s)=>iO(t,a=>hd(a,s)),Nu=(t,s)=>Sb(t,a=>hd(a,s)),ko=(t,s)=>u1(s,t),Iu=(t,s,a)=>Cb((u,f)=>hd(u,f),mc,t,s,a),tx=(t,s)=>{t.dom.checked=s},w1=t=>t.dom.checked,Cd=t=>t.dom.classList!==void 0,bf=t=>yb(t,"class"),Sh=(t,s)=>IB(t,"class",s),nx=(t,s)=>ex(t,"class",s),lO=(t,s)=>An(bf(t),s)?nx(t,s):Sh(t,s),xs=(t,s)=>{Cd(t)?t.dom.classList.add(s):Sh(t,s)},cO=t=>{(Cd(t)?t.dom.classList:bf(t)).length===0&&ls(t,"class")},Yo=(t,s)=>{Cd(t)?t.dom.classList.remove(s):nx(t,s),cO(t)},uO=(t,s)=>{const a=Cd(t)?t.dom.classList.toggle(s):lO(t,s);return cO(t),a},Jr=(t,s)=>Cd(t)&&t.dom.classList.contains(s),Am=(t,s)=>{Qe(s,a=>{xs(t,a)})},Xi=(t,s)=>{Qe(s,a=>{Yo(t,a)})},FB=(t,s)=>{Qe(s,a=>{uO(t,a)})},_B=(t,s)=>ia(s,a=>Jr(t,a)),$B=t=>{const s=t.dom.classList,a=new Array(s.length);for(let l=0;l<s.length;l++){const u=s.item(l);u!==null&&(a[l]=u)}return a},Sd=t=>Cd(t)?$B(t):bf(t),HB=t=>t.dom.textContent,gc=t=>t.dom.value,Om=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},ox=(t,s,a)=>eo(El(t,a),s),Xo=(t,s)=>rh(s,t),sx=(t,s,a)=>aO(t,s,a).isSome(),E1=(t,s,a)=>Iu(t,s,a).isSome(),xb=t=>ye(t)?t:it,dO=(t,s,a)=>{let l=t.dom;const u=xb(a);for(;l.parentNode;){l=l.parentNode;const f=rt.fromDom(l),m=s(f);if(m.isSome())return m;if(u(f))break}return x.none()},T1=(t,s,a)=>{const l=s(t),u=xb(a);return l.orThunk(()=>u(t)?x.none():dO(t,s,u))},xh={create:(t,s,a,l)=>({start:t,soffset:s,finish:a,foffset:l})},rx=Ir.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),VB=(t,s,a,l)=>t.fold(s,a,l),zB=t=>t.fold(ct,ct,ct),UB=rx.before,ZB=rx.on,zK=rx.after,fO={before:UB,on:ZB,after:zK,cata:VB,getStart:zB},wh=Ir.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),WB=t=>wh.exact(t.start,t.soffset,t.finish,t.foffset),jB=t=>t.match({domRange:s=>rt.fromDom(s.startContainer),relative:(s,a)=>fO.getStart(s),exact:(s,a,l,u)=>s}),GB=wh.domRange,KB=wh.relative,YB=wh.exact,xd=t=>{const s=jB(t);return wl(s)},wb=xh.create,A1={domRange:GB,relative:KB,exact:YB,exactFromRange:WB,getWin:xd,range:wb},XB=t=>x.from(t.getSelection()),mO=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return x.some(xh.create(rt.fromDom(s.startContainer),s.startOffset,rt.fromDom(a.endContainer),a.endOffset))}else return x.none()},JB=t=>{if(t.anchorNode===null||t.focusNode===null)return mO(t);{const s=rt.fromDom(t.anchorNode),a=rt.fromDom(t.focusNode);return WS(s,t.anchorOffset,a,t.focusOffset)?x.some(xh.create(s,t.anchorOffset,a,t.focusOffset)):mO(t)}},QB=t=>XB(t).filter(s=>s.rangeCount>0).bind(JB),gO=(t,s)=>{const a=ms(t,s);return Ve(a)},qB=(t,s)=>{const a=ms(t,s);return ft(a)},Eh={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},e7=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),l="\\.",u=p=>`(?:${p})?`,m=`[+-]?(?:${["Infinity",t+l+u(t)+u(a),l+t+u(a),t+u(a)].join("|")})`;return new RegExp(`^(${m})(.*)$`)})(),t7=(t,s)=>yn(s,a=>yn(Eh[a],l=>t===l)),Eb=(t,s)=>x.from(e7.exec(t)).bind(l=>{const u=Number(l[1]),f=l[2];return t7(f,s)?x.some({value:u,unit:f}):x.none()}),n7=(t,s)=>Eb(t,s).map(({value:a,unit:l})=>a+l),Tb=t=>{const s=t===void 0?window:t;return Wa().browser.isFirefox()?x.none():x.from(s.visualViewport)},hO=(t,s,a,l)=>({x:t,y:s,width:a,height:l,right:t+a,bottom:s+l}),Ab=t=>{const s=t===void 0?window:t,a=s.document,l=da(rt.fromDom(a));return Tb(s).fold(()=>{const u=s.document.documentElement,f=u.clientWidth,m=u.clientHeight;return hO(l.left,l.top,f,m)},u=>hO(Math.max(u.pageLeft,l.left),Math.max(u.pageTop,l.top),u.width,u.height))},pO=(t,s)=>t.view(s).fold(te([]),l=>{const u=t.owner(l),f=pO(t,u);return[l].concat(f)}),o7=(t,s)=>{const a=s.owner(t),l=pO(s,a);return x.some(l)};var vO=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?x.none():x.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(rt.fromDom)},owner:t=>ca(t)});const O1=t=>{const s=ph(),a=da(s);return o7(t,vO).fold(dt(fc,t),u=>{const f=S1(t),m=as(u,(p,v)=>{const C=S1(v);return{left:p.left+C.left,top:p.top+C.top}},{left:0,top:0});return Ss(m.left+f.left+a.left,m.top+f.top+a.top)})},_r=(t,s,a)=>({point:t,width:s,height:a}),s7=(t,s,a,l)=>({x:t,y:s,width:a,height:l}),_s=(t,s,a,l)=>({x:t,y:s,width:a,height:l,right:t+a,bottom:s+l}),$r=t=>{const s=fc(t),a=yh(t),l=os(t);return _s(s.left,s.top,a,l)},km=t=>{const s=O1(t),a=yh(t),l=os(t);return _s(s.left,s.top,a,l)},Ob=(t,s)=>{const a=Math.max(t.x,s.x),l=Math.max(t.y,s.y),u=Math.min(t.right,s.right),f=Math.min(t.bottom,s.bottom),m=u-a,p=f-l;return _s(a,l,m,p)},r7=(t,s)=>Bo(s,(a,l)=>Ob(a,l),t),fa=()=>Ab(window),yf=(t,s)=>vo(t.element,s.event.target),Th=t=>(Sa(Y(t,"position"),"fixed")?x.none():mh(t)).orThunk(()=>{const l=rt.fromTag("span");return wa(t).bind(u=>{si(u,l);const f=mh(l);return dc(l),f})}),Bt=t=>Th(t).map(fc).getOrThunk(()=>Ss(0,0)),Bu=(t,s)=>{const a=x.from(qs(t,"id")).getOrThunk(()=>{const l=Ct("aria");return an(s,"id",l),l});an(t,"aria-describedby",a)},a7=t=>{ls(t,"aria-describedby")};var Oa;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Oa||(Oa={}));const Al=(t,s,a)=>t.stype===Oa.Error?s(t.serror):a(t.svalue),kb=t=>{const s=[],a=[];return Qe(t,l=>{Al(l,u=>a.push(u),u=>s.push(u))}),{values:s,errors:a}},i7=(t,s)=>t.stype===Oa.Error?{stype:Oa.Error,serror:s(t.serror)}:t,Dm=(t,s)=>t.stype===Oa.Value?{stype:Oa.Value,svalue:s(t.svalue)}:t,l7=(t,s)=>t.stype===Oa.Value?s(t.svalue):t,Lu=(t,s)=>t.stype===Oa.Error?s(t.serror):t,ax=t=>({stype:Oa.Value,svalue:t}),Db=t=>({stype:Oa.Error,serror:t}),js={fromResult:t=>t.fold(Db,ax),toResult:t=>Al(t,Sn.error,Sn.value),svalue:ax,partition:kb,serror:Db,bind:l7,bindError:Lu,map:Dm,mapError:i7,fold:Al},Fu=t=>O(t)&&Re(t).length>100?" removed due to size":JSON.stringify(t,null,2),k1=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:te("... (only showing first ten failures)")}]):t;return Ie(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Mm=(t,s)=>js.serror([{path:t,getErrorInfo:s}]),ws=(t,s,a)=>Mm(t,()=>'Could not find valid *required* value for "'+s+'" in '+Fu(a)),bO=(t,s)=>Mm(t,()=>'Choice schema did not contain choice key: "'+s+'"'),c7=(t,s,a)=>Mm(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Fu(s)),hc=(t,s)=>Mm(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),ss=(t,s)=>Mm(t,te(s)),Cf=t=>{const s=(l,u)=>js.bindError(t(u),f=>ss(l,f)),a=te("val");return{extract:s,toString:a}},D1=Cf(js.svalue),pc=te(D1),Ol=(t,s)=>Cf(a=>{const l=typeof a;return t(a)?js.svalue(a):js.serror(`Expected type: ${s} but got: ${l}`)}),Mb=Ol(Fe,"number"),Gs=Ol(B,"string"),Rb=Ol(re,"boolean"),Pb=Ol(ye,"function"),yO=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>yO(t[s]));default:return!1}},u7=Cf(t=>yO(t)?js.svalue(t):js.serror("Expected value to be acceptable for sending via postMessage")),Yc=()=>({tag:"required",process:{}}),Nb=t=>({tag:"defaultedThunk",process:t}),Ib=t=>Nb(te(t)),ix=()=>({tag:"option",process:{}}),lx=t=>({tag:"mergeWithThunk",process:t}),cx=t=>lx(te(t)),_u=(t,s,a,l)=>({tag:"field",key:t,newKey:s,presence:a,prop:l}),ka=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Bb=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},CO=(t,s)=>t.length>0?js.svalue(ho(s,cf.apply(void 0,t))):js.svalue(s),Sf=t=>bt(js.serror,Ot)(t),xO={consolidateObj:(t,s)=>{const a=js.partition(t);return a.errors.length>0?Sf(a.errors):CO(a.values,s)},consolidateArr:t=>{const s=js.partition(t);return s.errors.length>0?Sf(s.errors):js.svalue(s.values)}},f7=(t,s,a,l)=>$e(s,a).fold(()=>ws(t,a,s),l),M1=(t,s,a,l)=>{const u=$e(t,s).getOrThunk(()=>a(t));return l(u)},m7=(t,s,a)=>a($e(t,s)),ux=(t,s,a,l)=>{const u=$e(t,s).map(f=>f===!0?a(t):f);return l(u)},wO=(t,s,a,l,u)=>{const f=p=>u.extract(s.concat([l]),p),m=p=>p.fold(()=>js.svalue(x.none()),v=>{const C=u.extract(s.concat([l]),v);return js.map(C,x.some)});switch(t.tag){case"required":return f7(s,a,l,f);case"defaultedThunk":return M1(a,l,t.process,f);case"option":return m7(a,l,m);case"defaultedOptionThunk":return ux(a,l,t.process,m);case"mergeWithThunk":return M1(a,l,te({}),p=>{const v=ho(t.process(a),p);return f(v)})}},EO=(t,s,a)=>{const l={},u=[];for(const f of a)Bb(f,(m,p,v,C)=>{const E=wO(v,t,s,m,C);js.fold(E,D=>{u.push(...D)},D=>{l[p]=D})},(m,p)=>{l[m]=p(s)});return u.length>0?js.serror(u):js.svalue(l)},dx=t=>({extract:(l,u)=>t().extract(l,u),toString:()=>t().toString()}),g7=t=>Re(Lo(t,fe)),Ji=t=>{const s=on(t),a=as(t,(u,f)=>Bb(f,m=>ho(u,{[m]:!0}),te(u)),{});return{extract:(u,f)=>{const m=re(f)?[]:g7(f),p=eo(m,v=>!To(a,v));return p.length===0?s.extract(u,f):hc(u,p)},toString:s.toString}},on=t=>({extract:(l,u)=>EO(l,u,t),toString:()=>`obj{
`+Ie(t,u=>Bb(u,(f,m,p,v)=>f+" -> "+v.toString(),(f,m)=>"state("+f+")")).join(`
`)+"}"}),$u=t=>({extract:(l,u)=>{const f=Ie(u,(m,p)=>t.extract(l.concat(["["+p+"]"]),m));return xO.consolidateArr(f)},toString:()=>"array("+t.toString()+")"}),Lb=(t,s)=>{const a=s!==void 0?s:ct;return{extract:(f,m)=>{const p=[];for(const v of t){const C=v.extract(f,m);if(C.stype===Oa.Value)return{stype:Oa.Value,svalue:a(C.svalue)};p.push(C)}return xO.consolidateArr(p)},toString:()=>"oneOf("+Ie(t,f=>f.toString()).join(", ")+")"}},h7=(t,s)=>{const a=(f,m)=>$u(Cf(t)).extract(f,m);return{extract:(f,m)=>{const p=Re(m),v=a(f,p);return js.bind(v,C=>{const E=Ie(C,D=>_u(D,D,Yc(),s));return on(E).extract(f,m)})},toString:()=>"setOf("+s.toString()+")"}},fx=(t,s)=>{const a=Lr(s);return{extract:(f,m)=>a().extract(f,m),toString:()=>a().toString()}},Ah=bt($u,on),mx=(t,s,a,l)=>$e(a,l).fold(()=>c7(t,a,l),f=>f.extract(t.concat(["branch: "+l]),s)),vc=(t,s)=>({extract:(u,f)=>$e(f,t).fold(()=>bO(u,t),p=>mx(u,f,s,p)),toString:()=>"chooseOn("+t+"). Possible values: "+Re(s)}),p7=()=>$u(D1),Rm=t=>Cf(s=>t(s).fold(js.serror,js.svalue)),TO=(t,s)=>h7(a=>js.fromResult(t(a)),s),AO=(t,s,a)=>{const l=s.extract([t],a);return js.mapError(l,u=>({input:a,errors:u}))},gs=(t,s,a)=>js.toResult(AO(t,s,a)),kl=t=>t.fold(s=>{throw new Error(Pm(s))},ct),ri=(t,s,a)=>kl(gs(t,s,a)),Pm=t=>`Errors: 
`+k1(t.errors).join(`
`)+`

Input object: `+Fu(t.input),wi=(t,s)=>vc(t,ot(s,on)),gx=(t,s)=>fx(t,s),Qr=_u,Da=ka,hx=t=>Rm(s=>An(t,s)?Sn.value(s):Sn.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),We=t=>Qr(t,t,Yc(),pc()),Qi=(t,s)=>Qr(t,t,Yc(),s),OO=t=>Qi(t,Mb),mr=t=>Qi(t,Gs),qi=(t,s)=>Qr(t,t,Yc(),hx(s)),bc=t=>Qi(t,Pb),Fb=(t,s)=>Qr(t,t,ix(),Cf(a=>js.serror("The field: "+t+" is forbidden. "+s))),yc=(t,s)=>Qr(t,t,Yc(),on(s)),kO=(t,s)=>Qr(t,t,Yc(),Ah(s)),Ei=(t,s)=>Qr(t,t,Yc(),$u(s)),mo=t=>Qr(t,t,ix(),pc()),ai=(t,s)=>Qr(t,t,ix(),s),R1=t=>ai(t,Mb),$s=t=>ai(t,Gs),px=(t,s)=>ai(t,hx(s)),Xc=t=>ai(t,Pb),vx=(t,s)=>ai(t,$u(s)),Ti=(t,s)=>ai(t,on(s)),DO=(t,s)=>ai(t,Ji(s)),ve=(t,s)=>Qr(t,t,Ib(s),pc()),Cc=(t,s,a)=>Qr(t,t,Ib(s),a),MO=(t,s)=>Cc(t,s,Mb),_o=(t,s)=>Cc(t,s,Gs),Es=(t,s,a)=>Cc(t,s,hx(a)),qr=(t,s)=>Cc(t,s,Rb),Zo=(t,s)=>Cc(t,s,Pb),v7=(t,s)=>Cc(t,s,u7),xf=(t,s,a)=>Cc(t,s,$u(a)),_b=(t,s,a)=>Cc(t,s,on(a)),RO=(t,s)=>{const a={};return ze(t,(l,u)=>{An(s,u)||(a[u]=l)}),a},bx=(t,s)=>({[t]:s}),b7=t=>{const s={};return Qe(t,a=>{s[a.key]=a.value}),s},PO=(t,s)=>RO(t,s),Nm=(t,s)=>bx(t,s),Oh=t=>b7(t),yx=(t,s)=>t.length===0?Sn.value(s):Sn.value(ho(s,cf.apply(void 0,t))),y7=t=>Sn.error(Ot(t)),C7=(t,s)=>{const a=jc(t);return a.errors.length>0?y7(a.errors):yx(a.values,s)},ea=te,wd=ea("touchstart"),wf=ea("touchmove"),Jc=ea("touchend"),Sc=ea("touchcancel"),Ai=ea("mousedown"),P1=ea("mousemove"),N1=ea("mouseout"),$b=ea("mouseup"),xc=ea("mouseover"),ma=ea("focusin"),NO=ea("focusout"),Qc=ea("keydown"),Cx=ea("keyup"),Ed=ea("input"),Im=ea("change"),Ef=ea("click"),S7=ea("transitioncancel"),kh=ea("transitionend"),x7=ea("transitionstart"),IO=ea("selectstart"),Hs=t=>te("alloy."+t),I1={tap:Hs("tap")},Hu=Hs("focus"),B1=Hs("blur.post"),Sx=Hs("paste.post"),Bm=Hs("receive"),el=Hs("execute"),Dh=Hs("focus.item"),Lm=I1.tap,w7=Hs("longpress"),Hb=Hs("sandbox.close"),L1=Hs("typeahead.cancel"),Fm=Hs("system.init"),E7=Hs("system.touchmove"),F1=Hs("system.touchend"),xx=Hs("system.scroll"),qc=Hs("system.resize"),Dl=Hs("system.attached"),Vu=Hs("system.detached"),Td=Hs("system.dismissRequested"),BO=Hs("system.repositionRequested"),Tf=Hs("focusmanager.shifted"),Vb=Hs("slotcontainer.visibility"),_m=Hs("system.external.element.scroll"),wx=Hs("change.tab"),LO=Hs("dismiss.tab"),zb=Hs("highlight"),Ex=Hs("dehighlight"),Co=t=>C1(t),FO="unknown";var Mh;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Mh||(Mh={}));const Tx=Rt({}),Ub=(t,s)=>{const a=[],l=new Date().getTime();return{logEventCut:(u,f,m)=>{a.push({outcome:"cut",target:f,purpose:m})},logEventStopped:(u,f,m)=>{a.push({outcome:"stopped",target:f,purpose:m})},logNoParent:(u,f,m)=>{a.push({outcome:"no-parent",target:f,purpose:m})},logEventNoHandlers:(u,f)=>{a.push({outcome:"no-handlers-left",target:f})},logEventResponse:(u,f,m)=>{a.push({outcome:"response",purpose:m,target:f})},write:()=>{const u=new Date().getTime();An(["mousemove","mouseover","mouseout",Fm()],t)||console.log(t,{event:t,time:u-l,target:s.dom,sequence:Ie(a,f=>An(["cut","stopped","response"],f.outcome)?"{"+f.purpose+"} "+f.outcome+" at ("+Co(f.target)+")":f.outcome)})}}},_O=(t,s,a)=>{switch($e(Tx.get(),t).orThunk(()=>{const u=Re(Tx.get());return xn(u,f=>t.indexOf(f)>-1?x.some(Tx.get()[f]):x.none())}).getOr(Mh.NORMAL)){case Mh.NORMAL:return a(_1());case Mh.LOGGING:{const u=Ub(t,s),f=a(u);return u.write(),f}case Mh.STOP:return!0}},Ad=["alloy/data/Fields","alloy/debugging/Debugging"],T7=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return _t(s,a=>a.indexOf("alloy")>0&&!yn(Ad,l=>a.indexOf(l)>-1)).getOr(FO)}else return FO},A7={logEventCut:ee,logEventStopped:ee,logNoParent:ee,logEventNoHandlers:ee,logEventResponse:ee,write:ee},Ax=(t,s,a)=>_O(t,s,a),_1=te(A7),Zb=te([We("menu"),We("selectedMenu")]),Wb=te([We("item"),We("selectedItem")]);te(on(Wb().concat(Zb())));const jK=te(on(Wb())),GK=yc("initSize",[We("numColumns"),We("numRows")]),KK=()=>Qi("markers",jK()),Ox=()=>yc("markers",[We("backgroundMenu")].concat(Zb()).concat(Wb())),Rh=t=>yc("markers",Ie(t,We)),kx=(t,s,a)=>(T7(),Qr(s,s,a,Rm(l=>Sn.value((...u)=>l.apply(void 0,u))))),oo=t=>kx("onHandler",t,Ib(ee)),Ks=t=>kx("onKeyboardHandler",t,Ib(x.none)),gr=t=>kx("onHandler",t,Yc()),$m=t=>kx("onKeyboardHandler",t,Yc()),Ao=(t,s)=>Da(t,te(s)),Hm=t=>Da(t,ct),Ph=te(GK),$1=(t,s,a)=>{const l=a.toString(),u=l.indexOf(")")+1,f=l.indexOf("("),m=l.substring(f+1,u-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Vm(m.slice(0,1).concat(m.slice(3)))}),t},Vm=t=>Ie(t,s=>zo(s,"/*")?s.substring(0,s.length-2):s),jb=(t,s)=>{const a=t.toString(),l=a.indexOf(")")+1,u=a.indexOf("("),f=a.substring(u+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Vm(f)}),t},$O=(t,s)=>{const a=s.toString(),l=a.indexOf(")")+1,u=a.indexOf("("),f=a.substring(u+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Vm(f.slice(1))}),t},HO=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...f)=>{a=setTimeout(()=>{t.apply(null,f),a=null},s)}}},Dx=5,VO=400,Mx=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?x.none():x.some(s.touches[0])},O7=(t,s)=>{const a=Math.abs(t.clientX-s.x),l=Math.abs(t.clientY-s.y);return a>Dx||l>Dx},k7=t=>{const s=dn(),a=Rt(!1),l=HO(C=>{t.triggerEvent(w7(),C),a.set(!0)},VO),u=C=>(Mx(C).each(E=>{l.cancel();const D={x:E.clientX,y:E.clientY,target:C.target};l.schedule(C),a.set(!1),s.set(D)}),x.none()),f=C=>(l.cancel(),Mx(C).each(E=>{s.on(D=>{O7(E,D)&&s.clear()})}),x.none()),m=C=>{l.cancel();const E=D=>vo(D.target,C.target);return s.get().filter(E).map(D=>a.get()?(C.prevent(),!1):t.triggerEvent(Lm(),C))},p=Oh([{key:wd(),value:u},{key:wf(),value:f},{key:Jc(),value:m}]);return{fireIfReady:(C,E)=>$e(p,E).bind(D=>D(C))}};var Af;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Af||(Af={}));const Rx="placeholder",zu=Ir.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Px=t=>yt(t,"uiType"),D7=(t,s,a,l)=>t.exists(u=>u!==a.owner)?zu.single(!0,te(a)):$e(l,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+Re(l)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},u=>u.replace()),M7=(t,s,a,l)=>Px(a)&&a.uiType===Rx?D7(t,s,a,l):zu.single(!1,te(a)),zO=(t,s,a,l)=>M7(t,s,a,l).fold((f,m)=>{const p=Px(a)?m(s,a.config,a.validated):m(s),v=$e(p,"components").getOr([]),C=ke(v,E=>zO(t,s,E,l));return[{...p,components:C}]},(f,m)=>{if(Px(a)){const p=m(s,a.config,a.validated);return a.validated.preprocess.getOr(ct)(p)}else return m(s)}),R7=(t,s,a,l)=>ke(a,u=>zO(t,s,u,l)),P7=(t,s)=>{let a=!1;const l=()=>a,u=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},f=()=>s.fold((m,p)=>m,(m,p)=>m);return{name:te(t),required:f,used:l,replace:u}},Nh=(t,s,a,l)=>{const u=ot(l,(m,p)=>P7(p,m)),f=R7(t,s,a,u);return ze(u,m=>{if(m.used()===!1&&m.required())throw new Error("Placeholder: "+m.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),f},UO=zu.single,zm=zu.multiple,Nx=te(Rx),Ih=Ir.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Od=ve("factory",{sketch:ct}),Ix=ve("schema",[]),Of=We("name"),Bh=Qr("pname","pname",Nb(t=>"<alloy."+Ct(t.name)+">"),pc()),N7=Da("schema",()=>[mo("preprocess")]),Gb=ve("defaults",te({})),kd=ve("overrides",te({})),kf=on([Od,Ix,Of,Bh,Gb,kd]),I7=on([Od,Ix,Of,Gb,kd]),Ar=on([Od,Ix,Of,Bh,Gb,kd]),Kb=on([Od,N7,Of,We("unit"),Bh,Gb,kd]),Oi=t=>t.fold(x.some,x.none,x.some,x.some),ZO=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},B7=t=>t.fold(ct,ct,ct,ct),Dd=(t,s)=>a=>{const l=ri("Converting part type",s,a);return t(l)},or=Dd(Ih.required,kf),ga=Dd(Ih.external,I7),Ys=Dd(Ih.optional,Ar),H1=Dd(Ih.group,Kb),Bx=te("entirety");var Lx=Object.freeze({__proto__:null,required:or,external:ga,optional:Ys,group:H1,asNamedPart:Oi,name:ZO,asCommon:B7,original:Bx});const V1=(t,s,a,l)=>ho(s.defaults(t,a,l),a,{uid:t.partUids[s.name]},s.overrides(t,a,l)),L7=(t,s,a)=>{const l={},u={};return Qe(a,f=>{f.fold(m=>{l[m.pname]=UO(!0,(p,v,C)=>m.factory.sketch(V1(p,m,v,C)))},m=>{const p=s.parts[m.name];u[m.name]=te(m.factory.sketch(V1(s,m,p[Bx()]),p))},m=>{l[m.pname]=UO(!1,(p,v,C)=>m.factory.sketch(V1(p,m,v,C)))},m=>{l[m.pname]=zm(!0,(p,v,C)=>{const E=p[m.name];return Ie(E,D=>m.factory.sketch(ho(m.defaults(p,D,C),D,m.overrides(p,D))))})})}),{internals:te(l),externals:te(u)}},Lh=(t,s)=>{const a={};return Qe(s,l=>{Oi(l).each(u=>{const f=Yb(t,u.pname);a[u.name]=m=>{const p=ri("Part: "+u.name+" in "+t,on(u.schema),m);return{...f,config:m,validated:p}}})}),a},Yb=(t,s)=>({uiType:Nx(),owner:t,name:s}),Fx=(t,s,a)=>({uiType:Nx(),owner:t,name:s,config:a,validated:{}}),Xb=t=>ke(t,s=>s.fold(x.none,x.some,x.none,x.none).map(a=>yc(a.name,a.schema.concat([Hm(Bx())]))).toArray()),_x=t=>Ie(t,ZO),Df=(t,s,a)=>L7(t,s,a),Md=(t,s,a)=>Nh(x.some(t),s,s.components,a),Do=(t,s,a)=>{const l=s.partUids[a];return t.getSystem().getByUid(l).toOptional()},Mf=(t,s,a)=>Do(t,s,a).getOrDie("Could not find part: "+a),$x=(t,s,a)=>{const l={},u=s.partUids,f=t.getSystem();return Qe(a,m=>{l[m]=te(f.getByUid(u[m]))}),l},Fh=(t,s)=>{const a=t.getSystem();return ot(s.partUids,(l,u)=>te(a.getByUid(l)))},_h=t=>Re(t.partUids),Hx=(t,s,a)=>{const l={},u=s.partUids,f=t.getSystem();return Qe(a,m=>{l[m]=te(f.getByUid(u[m]).getOrDie())}),l},WO=(t,s)=>{const a=_x(s);return Oh(Ie(a,l=>({key:l,value:t+"-"+l})))},Jb=t=>Qr("partUids","partUids",lx(s=>WO(s.uid,t)),pc());var F7=Object.freeze({__proto__:null,generate:Lh,generateOne:Fx,schemas:Xb,names:_x,substitutes:Df,components:Md,defaultUids:WO,defaultUidsSchema:Jb,getAllParts:Fh,getAllPartNames:_h,getPart:Do,getPartOrDie:Mf,getParts:$x,getPartsOrDie:Hx});const Qb=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],ha=(t,s,a,l=1)=>{const u=t*l,f=s*l,m=v=>$e(a,v).getOr([]),p=(v,C,E)=>{const D=Ht(Qb,E);return{offset:Ss(v,C),classesOn:ke(E,m),classesOff:ke(D,m)}};return{southeast:()=>p(-t,s,["top","alignLeft"]),southwest:()=>p(t,s,["top","alignRight"]),south:()=>p(-t/2,s,["top","alignCentre"]),northeast:()=>p(-t,-s,["bottom","alignLeft"]),northwest:()=>p(t,-s,["bottom","alignRight"]),north:()=>p(-t/2,-s,["bottom","alignCentre"]),east:()=>p(t,-s/2,["valignCentre","left"]),west:()=>p(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>p(u,f,["top","alignLeft","inset"]),insetNorthwest:()=>p(-u,f,["top","alignRight","inset"]),insetNorth:()=>p(-u/2,f,["top","alignCentre","inset"]),insetSoutheast:()=>p(u,-f,["bottom","alignLeft","inset"]),insetSouthwest:()=>p(-u,-f,["bottom","alignRight","inset"]),insetSouth:()=>p(-u/2,-f,["bottom","alignCentre","inset"]),insetEast:()=>p(-u,-f/2,["valignCentre","right","inset"]),insetWest:()=>p(u,-f/2,["valignCentre","left","inset"])}},qb=()=>ha(0,0,{}),ta=(t,s,a,l,u,f,m,p=!1)=>({x:t,y:s,bubble:a,direction:l,placement:u,restriction:f,label:`${m}-${u}`,alwaysFit:p}),Rd=Ir.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),_7=(t,s,a,l,u,f,m,p,v)=>t.fold(s,a,l,u,f,m,p,v),$7=(t,s,a,l)=>t.fold(s,s,l,l,s,l,a,a),jO=(t,s,a,l)=>t.fold(s,l,s,l,a,a,s,l),ey=Rd.southeast,Vx=Rd.southwest,zx=Rd.northeast,Ux=Rd.northwest,Zx=Rd.south,GO=Rd.north,KO=Rd.east,wc=Rd.west,H7=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Or=(t,s)=>ur(["left","right","top","bottom"],a=>$e(s,a).map(l=>H7(t,l))),V7=(t,s,a)=>{const l=(v,C)=>s[v].map(E=>{const D=v==="top"||v==="bottom",I=D?a.top:a.left,W=(v==="left"||v==="top"?Math.max:Math.min)(E,C)+I;return D?Us(W,t.y,t.bottom):Us(W,t.x,t.right)}).getOr(C),u=l("left",t.x),f=l("top",t.y),m=l("right",t.right),p=l("bottom",t.bottom);return _s(u,f,m-u,p-f)},Rf="layout",YO=t=>t.x,Wx=(t,s)=>t.x+t.width/2-s.width/2,jx=(t,s)=>t.x+t.width-s.width,Gx=(t,s)=>t.y-s.height,ty=t=>t.y+t.height,XO=(t,s)=>t.y+t.height/2-s.height/2,z1=t=>t.x+t.width,z7=(t,s)=>t.x-s.width,Ds=(t,s,a)=>ta(YO(t),ty(t),a.southeast(),ey(),"southeast",Or(t,{left:1,top:3}),Rf),Vs=(t,s,a)=>ta(jx(t,s),ty(t),a.southwest(),Vx(),"southwest",Or(t,{right:0,top:3}),Rf),Hr=(t,s,a)=>ta(YO(t),Gx(t,s),a.northeast(),zx(),"northeast",Or(t,{left:1,bottom:2}),Rf),hr=(t,s,a)=>ta(jx(t,s),Gx(t,s),a.northwest(),Ux(),"northwest",Or(t,{right:0,bottom:2}),Rf),sr=(t,s,a)=>ta(Wx(t,s),Gx(t,s),a.north(),GO(),"north",Or(t,{bottom:2}),Rf),zs=(t,s,a)=>ta(Wx(t,s),ty(t),a.south(),Zx(),"south",Or(t,{top:3}),Rf),ny=(t,s,a)=>ta(z1(t),XO(t,s),a.east(),KO(),"east",Or(t,{left:0}),Rf),U1=(t,s,a)=>ta(z7(t,s),XO(t,s),a.west(),wc(),"west",Or(t,{right:1}),Rf),JO=()=>[Ds,Vs,Hr,hr,zs,sr,ny,U1],QO=()=>[Vs,Ds,hr,Hr,zs,sr,ny,U1],Kx=()=>[Hr,hr,Ds,Vs,sr,zs],Pd=()=>[hr,Hr,Vs,Ds,sr,zs],Nd=()=>[Ds,Vs,Hr,hr,zs,sr],Yx=()=>[Vs,Ds,hr,Hr,zs,sr],Be="data-alloy-placement",oy=(t,s)=>{an(t,Be,s)},qO=t=>er(t,Be),U7=t=>ls(t,Be),Uu="layout-inset",Ml=t=>t.x,Xx=(t,s)=>t.x+t.width/2-s.width/2,sy=(t,s)=>t.x+t.width-s.width,ry=t=>t.y,Z1=(t,s)=>t.y+t.height-s.height,ek=(t,s)=>t.y+t.height/2-s.height/2,W1=(t,s,a)=>ta(sy(t,s),Z1(t,s),a.insetSouthwest(),Ux(),"southwest",Or(t,{right:0,bottom:3}),Uu),ay=(t,s,a)=>ta(Ml(t),Z1(t,s),a.insetSoutheast(),zx(),"southeast",Or(t,{left:1,bottom:3}),Uu),$h=(t,s,a)=>ta(sy(t,s),ry(t),a.insetNorthwest(),Vx(),"northwest",Or(t,{right:0,top:2}),Uu),j1=(t,s,a)=>ta(Ml(t),ry(t),a.insetNortheast(),ey(),"northeast",Or(t,{left:1,top:2}),Uu),Rl=(t,s,a)=>ta(Xx(t,s),ry(t),a.insetNorth(),Zx(),"north",Or(t,{top:2}),Uu),G1=(t,s,a)=>ta(Xx(t,s),Z1(t,s),a.insetSouth(),GO(),"south",Or(t,{bottom:3}),Uu),tk=(t,s,a)=>ta(sy(t,s),ek(t,s),a.insetEast(),wc(),"east",Or(t,{right:0}),Uu),Jx=(t,s,a)=>ta(Ml(t),ek(t,s),a.insetWest(),KO(),"west",Or(t,{left:1}),Uu),iy=t=>{switch(t){case"north":return Rl;case"northeast":return j1;case"northwest":return $h;case"south":return G1;case"southeast":return ay;case"southwest":return W1;case"east":return tk;case"west":return Jx}},nk=(t,s,a,l,u)=>qO(l).map(iy).getOr(Rl)(t,s,a,l,u),ok=t=>{switch(t){case"north":return G1;case"northeast":return ay;case"northwest":return W1;case"south":return Rl;case"southeast":return j1;case"southwest":return $h;case"east":return Jx;case"west":return tk}},Z7=(t,s,a,l,u)=>qO(l).map(ok).getOr(Rl)(t,s,a,l,u),ly=(t,s)=>{Yi(t,Math.floor(s))},Qx=te((t,s)=>{ly(t,s),Ki(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Um=te((t,s)=>{ly(t,s)}),cy=te((t,s)=>{YS(t,Math.floor(s))});var Id;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Id||(Id={}));const uy="data-alloy-vertical-dir",W7=t=>sx(t,s=>oi(s)&&qs(s,"data-alloy-vertical-dir")===Id.BottomToTop);var Ga;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(Ga||(Ga={}));const Ec={init:()=>ki({readState:te("No State required")})},ki=t=>t,j7={can:et,abort:it,run:ee},Pf=t=>{if(!To(t,"can")&&!To(t,"abort")&&!To(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...j7,...t}},G7=(t,s)=>(...a)=>Bo(t,(l,u)=>l&&s(u).apply(void 0,a),!0),K7=(t,s)=>(...a)=>Bo(t,(l,u)=>l||s(u).apply(void 0,a),!1),Y7=t=>ye(t)?{can:et,abort:it,run:t}:t,X7=t=>{const s=G7(t,u=>u.can),a=K7(t,u=>u.abort);return{can:s,abort:a,run:(...u)=>{Qe(t,f=>{f.run.apply(void 0,u)})}}},Zn=(t,s)=>{dy(t,t.element,s,{})},Wt=(t,s,a)=>{dy(t,t.element,s,a)},Zm=t=>{Zn(t,el())},K1=(t,s,a)=>{dy(t,s,a,{})},dy=(t,s,a,l)=>{const u={target:s,...l};t.getSystem().triggerEvent(a,s,u)},J7=(t,s,a,l)=>{const u={...l,target:s};t.getSystem().triggerEvent(a,s,u)},sk=(t,s,a,l)=>{t.getSystem().triggerEvent(a,s,l.event)},Jo=t=>Oh(t),rk=(t,s)=>({key:t,value:Pf({abort:s})}),Q7=(t,s)=>({key:t,value:Pf({can:s})}),q7=t=>({key:t,value:Pf({run:(s,a)=>{a.event.prevent()}})}),Le=(t,s)=>({key:t,value:Pf({run:s})}),qx=(t,s,a)=>({key:t,value:Pf({run:(l,u)=>{s.apply(void 0,[l,u].concat(a))}})}),eL=t=>s=>Le(t,s),fy=t=>s=>({key:t,value:Pf({run:(a,l)=>{yf(a,l)&&s(a,l)}})}),tL=(t,s)=>Le(t,(a,l)=>{a.getSystem().getByUid(s).each(u=>{sk(u,u.element,t,l)})}),Hh=(t,s,a)=>{const l=s.partUids[a];return tL(t,l)},my=(t,s)=>Le(t,(a,l)=>{const u=l.event,f=a.getSystem().getByDom(u.target).getOrThunk(()=>T1(u.target,p=>a.getSystem().getByDom(p).toOptional(),it).getOr(a));s(a,f,l)}),Nf=t=>Le(t,(s,a)=>{a.cut()}),ak=t=>Le(t,(s,a)=>{a.stop()}),Vh=(t,s)=>fy(t)(s),$o=fy(Dl()),eu=fy(Vu()),ew=fy(Fm()),Bd=eL(el()),Tc=t=>({classes:ce(t.classes)?[]:t.classes,attributes:ce(t.attributes)?{}:t.attributes,styles:ce(t.styles)?{}:t.styles}),tw=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),nL=(t,s,a)=>Bd(l=>{a(l,t,s)}),nw=(t,s,a)=>ew((l,u)=>{a(l,t,s)}),oL=(t,s,a,l,u,f)=>{const m=Ji(t),p=Ti(s,[DO("config",t)]);return gy(m,p,s,a,l,u,f)},ik=(t,s,a,l,u,f)=>{const m=t,p=Ti(s,[ai("config",t)]);return gy(m,p,s,a,l,u,f)},sL=(t,s,a)=>$1((u,...f)=>{const m=[u].concat(f);return u.config({name:te(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},p=>{const v=Array.prototype.slice.call(m,1);return s.apply(void 0,[u,p.config,p.state].concat(v))})},a,s),rL=t=>({key:t,value:void 0}),gy=(t,s,a,l,u,f,m)=>{const p=D=>To(D,a)?D[a]():x.none(),v=ot(u,(D,I)=>sL(a,D,I)),E={...ot(f,(D,I)=>jb(D,I)),...v,revoke:dt(rL,a),config:D=>{const I=ri(a+"-config",t,D);return{key:a,value:{config:I,me:E,configAsRaw:Lr(()=>ri(a+"-config",t,D)),initialConfig:D,state:m}}},schema:te(s),exhibit:(D,I)=>Gr(p(D),$e(l,"exhibit"),(H,W)=>W(I,H.config,H.state)).getOrThunk(()=>Tc({})),name:te(a),handlers:D=>p(D).map(I=>$e(l,"events").getOr(()=>({}))(I.config,I.state)).getOr({})};return E},qe=t=>Oh(t),aL=Ji([We("fields"),We("name"),ve("active",{}),ve("apis",{}),ve("state",Ec),ve("extra",{})]),Vr=t=>{const s=ri("Creating behaviour: "+t.name,aL,t);return oL(s.fields,s.name,s.active,s.apis,s.extra,s.state)},lk=Ji([We("branchKey"),We("branches"),We("name"),ve("active",{}),ve("apis",{}),ve("state",Ec),ve("extra",{})]),kt=t=>{const s=ri("Creating behaviour: "+t.name,lk,t);return ik(wi(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},hy=te(void 0),ck=(t,s)=>{const a=Jo(s);return Vr({fields:[We("enabled")],name:t,active:{events:te(a)}})},cn=(t,s)=>{const a=ck(t,s);return{key:t,value:{config:{},me:a,configAsRaw:te({}),initialConfig:{},state:Ec}}},iL=t=>({init:()=>{const a=Rt(t);return{get:()=>a.get(),set:p=>a.set(p),clear:()=>a.set(t),readState:()=>a.get()}}}),uk=(t,s)=>{s.ignore||(Ls(t.element),s.onFocus(t))};var cL=Object.freeze({__proto__:null,focus:uk,blur:(t,s)=>{s.ignore||Tl(t.element)},isFocused:t=>Ru(t.element)}),Ma=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return Tc(a)},events:t=>Jo([Le(Hu(),(s,a)=>{uk(s,t),a.stop()})].concat(t.stopMousedown?[Le(Ai(),(s,a)=>{a.event.prevent()})]:[]))}),Y1=[oo("onFocus"),ve("stopMousedown",!1),ve("ignore",!1)];const tn=Vr({fields:Y1,name:"focusing",active:Ma,apis:cL}),dL=[8],Ld=[9],Zu=[13],py=[27],ii=[32],X1=[37],J1=[38],Q1=[39],zh=[40],fL=(t,s,a)=>{const l=Sr(t.slice(0,s)),u=Sr(t.slice(s+1));return _t(l.concat(u),a)},mL=(t,s,a)=>{const l=Sr(t.slice(0,s));return _t(l,a)},gL=(t,s,a)=>{const l=t.slice(0,s),u=t.slice(s+1);return _t(u.concat(l),a)},hL=(t,s,a)=>{const l=t.slice(s+1);return _t(l,a)},Jn=t=>s=>{const a=s.raw;return An(t,a.which)},Pl=t=>s=>ia(t,a=>a(s)),If=t=>t.raw.shiftKey===!0,pL=t=>t.raw.ctrlKey===!0,Uh=Ce(If),so=(t,s)=>({matches:t,classification:s}),vL=(t,s)=>_t(t,l=>l.matches(s)).map(l=>l.classification),dk=(t,s,a,l)=>{const u=Xo(t.element,"."+s.highlightClass);Qe(u,f=>{yn(l,p=>vo(p.element,f))||(Yo(f,s.highlightClass),t.getSystem().getByDom(f).each(p=>{s.onDehighlight(t,p),Zn(p,Ex())}))})},fk=(t,s,a)=>dk(t,s,a,[]),bL=(t,s,a,l)=>{ow(t,s,a,l)&&(Yo(l.element,s.highlightClass),s.onDehighlight(t,l),Zn(l,Ex()))},q1=(t,s,a,l)=>{dk(t,s,a,[l]),ow(t,s,a,l)||(xs(l.element,s.highlightClass),s.onHighlight(t,l),Zn(l,zb()))},mk=(t,s,a)=>{vy(t,s).each(l=>{q1(t,s,a,l)})},yL=(t,s,a)=>{hk(t,s).each(l=>{q1(t,s,a,l)})},CL=(t,s,a,l)=>{SL(t,s,a,l).fold(u=>{throw u},u=>{q1(t,s,a,u)})},gk=(t,s,a,l)=>{const u=pk(t,s);_t(u,l).each(m=>{q1(t,s,a,m)})},ow=(t,s,a,l)=>Jr(l.element,s.highlightClass),Zh=(t,s,a)=>ko(t.element,"."+s.highlightClass).bind(l=>t.getSystem().getByDom(l).toOptional()),SL=(t,s,a,l)=>{const u=Xo(t.element,"."+s.itemClass);return x.from(u[l]).fold(()=>Sn.error(new Error("No element found with index "+l)),t.getSystem().getByDom)},vy=(t,s,a)=>ko(t.element,"."+s.itemClass).bind(l=>t.getSystem().getByDom(l).toOptional()),hk=(t,s,a)=>{const l=Xo(t.element,"."+s.itemClass);return(l.length>0?x.some(l[l.length-1]):x.none()).bind(f=>t.getSystem().getByDom(f).toOptional())},Wh=(t,s,a,l)=>{const u=Xo(t.element,"."+s.itemClass);return to(u,m=>Jr(m,s.highlightClass)).bind(m=>{const p=yi(m,l,0,u.length-1);return t.getSystem().getByDom(u[p]).toOptional()})},xL=(t,s,a)=>Wh(t,s,a,-1),wL=(t,s,a)=>Wh(t,s,a,1),pk=(t,s,a)=>{const l=Xo(t.element,"."+s.itemClass);return pl(Ie(l,u=>t.getSystem().getByDom(u).toOptional()))};var EL=Object.freeze({__proto__:null,dehighlightAll:fk,dehighlight:bL,highlight:q1,highlightFirst:mk,highlightLast:yL,highlightAt:CL,highlightBy:gk,isHighlighted:ow,getHighlighted:Zh,getFirst:vy,getLast:hk,getPrevious:xL,getNext:wL,getCandidates:pk}),TL=[We("highlightClass"),We("itemClass"),oo("onHighlight"),oo("onDehighlight")];const io=Vr({fields:TL,name:"highlighting",apis:EL}),vk=(t,s,a)=>{s.exists(u=>a.exists(f=>vo(f,u)))||Wt(t,Tf(),{prevFocus:s,newFocus:a})},sw=()=>{const t=a=>Yr(a.element);return{get:t,set:(a,l)=>{const u=t(a);a.getSystem().triggerFocus(l,a.element);const f=t(a);vk(a,u,f)}}},AL=()=>{const t=a=>io.getHighlighted(a).map(l=>l.element);return{get:t,set:(a,l)=>{const u=t(a);a.getSystem().getByDom(l).fold(ee,m=>{io.highlight(a,m)});const f=t(a);vk(a,u,f)}}},Wm=(t,s,a,l,u)=>{const f=()=>t.concat([ve("focusManager",sw()),Cc("focusInside","onFocus",Rm(C=>An(["onFocus","onEnterOrSpace","onApi"],C)?Sn.value(C):Sn.error("Invalid value for focusInside"))),Ao("handler",v),Ao("state",s),Ao("sendFocusIn",u)]),m=(C,E,D,I,H)=>{const W=D(C,E,I,H);return vL(W,E.event).bind(Q=>Q(C,E,I,H))},v={schema:f,processKey:m,toEvents:(C,E)=>{const D=C.focusInside!==Af.OnFocusMode?x.none():u(C).map(W=>Le(Hu(),(Q,se)=>{W(Q,C,E),se.stop()})),I=(W,Q)=>{const se=Jn(ii.concat(Zu))(Q.event);C.focusInside===Af.OnEnterOrSpaceMode&&se&&yf(W,Q)&&u(C).each(X=>{X(W,C,E),Q.stop()})},H=[Le(Qc(),(W,Q)=>{m(W,Q,a,C,E).fold(()=>{I(W,Q)},se=>{Q.stop()})}),Le(Cx(),(W,Q)=>{m(W,Q,l,C,E).each(se=>{Q.stop()})})];return Jo(D.toArray().concat(H))}};return v},bk=t=>{const s=[mo("onEscape"),mo("onEnter"),ve("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),ve("firstTabstop",0),ve("useTabstopAt",et),mo("visibilitySelector")].concat([t]),a=(X,ie)=>{const le=X.visibilitySelector.bind(xe=>Iu(ie,xe)).getOr(ie);return zn(le)>0},l=(X,ie)=>{const le=Xo(X.element,ie.selector),xe=eo(le,Me=>a(ie,Me));return x.from(xe[ie.firstTabstop])},u=(X,ie)=>ie.focusManager.get(X).bind(le=>Iu(le,ie.selector)),f=(X,ie)=>a(X,ie)&&X.useTabstopAt(ie),m=(X,ie,le)=>{l(X,ie).each(xe=>{ie.focusManager.set(X,xe)})},p=(X,ie,le,xe,Me)=>Me(ie,le,vt=>f(xe,vt)).fold(()=>xe.cyclic?x.some(!0):x.none(),vt=>(xe.focusManager.set(X,vt),x.some(!0))),v=(X,ie,le,xe)=>{const Me=eo(Xo(X.element,le.selector),vt=>a(le,vt));return u(X,le).bind(vt=>to(Me,dt(vo,vt)).bind(Pe=>p(X,Me,Pe,le,xe)))},C=(X,ie,le)=>{const xe=le.cyclic?fL:mL;return v(X,ie,le,xe)},E=(X,ie,le)=>{const xe=le.cyclic?gL:hL;return v(X,ie,le,xe)},D=X=>gf(X).bind(hf).exists(ie=>vo(ie,X)),I=(X,ie,le)=>u(X,le).filter(xe=>!le.useTabstopAt(xe)).bind(xe=>(D(xe)?C:E)(X,ie,le)),H=(X,ie,le)=>le.onEnter.bind(xe=>xe(X,ie)),W=(X,ie,le)=>le.onEscape.bind(xe=>xe(X,ie)),Q=te([so(Pl([If,Jn(Ld)]),C),so(Jn(Ld),E),so(Pl([Uh,Jn(Zu)]),H)]),se=te([so(Jn(py),W),so(Jn(Ld),I)]);return Wm(s,Ec.init,Q,se,()=>x.some(m))};var OL=bk(Da("cyclic",it)),yk=bk(Da("cyclic",et));const jh=t=>fh("input")(t)&&qs(t,"type")!=="radio"||fh("textarea")(t),Ck=(t,s,a)=>(K1(t,a,el()),x.some(!0)),Bf=(t,s,a)=>jh(a)&&Jn(ii)(s.event)?x.none():Ck(t,s,a),Gh=(t,s)=>x.some(!0),kL=[ve("execute",Bf),ve("useSpace",!1),ve("useEnter",!0),ve("useControlEnter",!1),ve("useDown",!1)],Sk=(t,s,a)=>a.execute(t,s,t.element),DL=(t,s,a,l)=>{const u=a.useSpace&&!jh(t.element)?ii:[],f=a.useEnter?Zu:[],m=a.useDown?zh:[],p=u.concat(f).concat(m);return[so(Jn(p),Sk)].concat(a.useControlEnter?[so(Pl([pL,Jn(Zu)]),Sk)]:[])},xk=(t,s,a,l)=>a.useSpace&&!jh(t.element)?[so(Jn(ii),Gh)]:[];var wk=Wm(kL,Ec.init,DL,xk,()=>x.none());const Ek=()=>{const t=dn();return ki({readState:()=>t.get().map(u=>({numRows:String(u.numRows),numColumns:String(u.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(u,f)=>{t.set({numRows:u,numColumns:f})},getNumRows:()=>t.get().map(u=>u.numRows),getNumColumns:()=>t.get().map(u=>u.numColumns)})};var ML=Object.freeze({__proto__:null,flatgrid:Ek,init:t=>t.state(t)});const Tk=t=>(s,a,l,u)=>{const f=t(s.element);return ev(f,s,a,l,u)},rw=(t,s)=>{const a=x1(t,s);return Tk(a)},aw=(t,s)=>{const a=x1(s,t);return Tk(a)},iw=t=>(s,a,l,u)=>ev(t,s,a,l,u),ev=(t,s,a,l,u)=>l.focusManager.get(s).bind(m=>t(s.element,m,l,u)).map(m=>(l.focusManager.set(s,m),!0)),Ak=iw,Ok=iw,by=iw,RL=(t,s)=>to(t,s).map(a=>({index:a,candidates:t})),kk=(t,s,a)=>{const l=m=>vo(m,s),u=Xo(t,a),f=eo(u,KS);return RL(f,l)},Dk=(t,s)=>to(t,a=>vo(s,a)),Mk=(t,s,a,l)=>{const u=Math.floor(s/a),f=s%a;return l(u,f).bind(m=>{const p=m.row*a+m.column;return p>=0&&p<t.length?x.some(t[p]):x.none()})},Rk=(t,s,a,l,u)=>Mk(t,s,l,(f,m)=>{const v=f===a-1?t.length-f*l:l,C=yi(m,u,0,v-1);return x.some({row:f,column:C})}),Pk=(t,s,a,l,u)=>Mk(t,s,l,(f,m)=>{const p=yi(f,u,0,a-1),C=p===a-1?t.length-p*l:l,E=Us(m,0,C-1);return x.some({row:p,column:E})}),PL=(t,s,a,l)=>Rk(t,s,a,l,1),NL=(t,s,a,l)=>Rk(t,s,a,l,-1),IL=(t,s,a,l)=>Pk(t,s,a,l,-1),Nk=(t,s,a,l)=>Pk(t,s,a,l,1),BL=[We("selector"),ve("execute",Bf),Ks("onEscape"),ve("captureTab",!1),Ph()],LL=(t,s,a)=>{ko(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},FL=(t,s)=>s.focusManager.get(t).bind(a=>Iu(a,s.selector)),_L=(t,s,a,l)=>FL(t,a).bind(u=>a.execute(t,s,u)),tv=t=>(s,a,l,u)=>kk(s,a,l.selector).bind(f=>t(f.candidates,f.index,u.getNumRows().getOr(l.initSize.numRows),u.getNumColumns().getOr(l.initSize.numColumns))),Ik=(t,s,a)=>a.captureTab?x.some(!0):x.none(),$L=(t,s,a)=>a.onEscape(t,s),Bk=tv(NL),Lk=tv(PL),HL=tv(IL),Fk=tv(Nk),VL=te([so(Jn(X1),rw(Bk,Lk)),so(Jn(Q1),aw(Bk,Lk)),so(Jn(J1),Ak(HL)),so(Jn(zh),Ok(Fk)),so(Pl([If,Jn(Ld)]),Ik),so(Pl([Uh,Jn(Ld)]),Ik),so(Jn(ii.concat(Zu)),_L)]),zL=te([so(Jn(py),$L),so(Jn(ii),Gh)]);var UL=Wm(BL,Ek,VL,zL,()=>x.some(LL));const lw=(t,s,a,l,u)=>{const f=p=>xl(p)==="button"&&qs(p,"disabled")==="disabled",m=(p,v,C)=>u(p,v,l,0,C.length-1,C[v],E=>f(C[E])?m(p,E,C):x.from(C[E]));return kk(t,a,s).bind(p=>{const v=p.index,C=p.candidates;return m(v,v,C)})},yy=(t,s,a,l)=>lw(t,s,a,l,(u,f,m,p,v,C,E)=>{const D=Us(f+m,p,v);return D===u?x.from(C):E(D)}),Cy=(t,s,a,l)=>lw(t,s,a,l,(u,f,m,p,v,C,E)=>{const D=yi(f,m,p,v);return D===u?x.none():E(D)}),ZL=[We("selector"),ve("getInitial",x.none),ve("execute",Bf),Ks("onEscape"),ve("executeOnMove",!1),ve("allowVertical",!0),ve("allowHorizontal",!0),ve("cycles",!0)],WL=(t,s)=>s.focusManager.get(t).bind(a=>Iu(a,s.selector)),Kh=(t,s,a)=>WL(t,a).bind(l=>a.execute(t,s,l)),jL=(t,s,a)=>{s.getInitial(t).orThunk(()=>ko(t.element,s.selector)).each(l=>{s.focusManager.set(t,l)})},cw=(t,s,a)=>(a.cycles?Cy:yy)(t,a.selector,s,-1),uw=(t,s,a)=>(a.cycles?Cy:yy)(t,a.selector,s,1),dw=t=>(s,a,l,u)=>t(s,a,l,u).bind(()=>l.executeOnMove?Kh(s,a,l):x.some(!0)),_k=(t,s,a)=>a.onEscape(t,s),$k=(t,s,a,l)=>{const u=[...a.allowHorizontal?X1:[]].concat(a.allowVertical?J1:[]),f=[...a.allowHorizontal?Q1:[]].concat(a.allowVertical?zh:[]);return[so(Jn(u),dw(rw(cw,uw))),so(Jn(f),dw(aw(cw,uw))),so(Jn(Zu),Kh),so(Jn(ii),Kh)]},GL=te([so(Jn(ii),Gh),so(Jn(py),_k)]);var KL=Wm(ZL,Ec.init,$k,GL,()=>x.some(jL));const Sy=(t,s,a)=>x.from(t[s]).bind(l=>x.from(l[a]).map(u=>({rowIndex:s,columnIndex:a,cell:u}))),Hk=(t,s,a,l)=>{const f=t[s].length,m=yi(a,l,0,f-1);return Sy(t,s,m)},Vk=(t,s,a,l)=>{const u=yi(a,l,0,t.length-1),f=t[u].length,m=Us(s,0,f-1);return Sy(t,u,m)},Lf=(t,s,a,l)=>{const f=t[s].length,m=Us(a+l,0,f-1);return Sy(t,s,m)},zk=(t,s,a,l)=>{const u=Us(a+l,0,t.length-1),f=t[u].length,m=Us(s,0,f-1);return Sy(t,u,m)},YL=(t,s,a)=>Hk(t,s,a,1),XL=(t,s,a)=>Hk(t,s,a,-1),JL=(t,s,a)=>Vk(t,a,s,-1),Uk=(t,s,a)=>Vk(t,a,s,1),QL=(t,s,a)=>Lf(t,s,a,-1),qL=(t,s,a)=>Lf(t,s,a,1),Zk=(t,s,a)=>zk(t,a,s,-1),nv=(t,s,a)=>zk(t,a,s,1),ov=[yc("selectors",[We("row"),We("cell")]),ve("cycles",!0),ve("previousSelector",x.none),ve("execute",Bf)],eF=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const u=s.selectors;return ko(t.element,u.cell)}).each(u=>{s.focusManager.set(t,u)})},fw=(t,s,a)=>Yr(t.element).bind(l=>a.execute(t,s,l)),tF=(t,s)=>Ie(t,a=>Xo(a,s.selectors.cell)),sv=(t,s)=>(a,l,u)=>{const f=u.cycles?t:s;return Iu(l,u.selectors.row).bind(m=>{const p=Xo(m,u.selectors.cell);return Dk(p,l).bind(v=>{const C=Xo(a,u.selectors.row);return Dk(C,m).bind(E=>{const D=tF(C,u);return f(D,E,v).map(I=>I.cell)})})})},mw=sv(XL,QL),gw=sv(YL,qL),nF=sv(JL,Zk),oF=sv(Uk,nv),sF=te([so(Jn(X1),rw(mw,gw)),so(Jn(Q1),aw(mw,gw)),so(Jn(J1),Ak(nF)),so(Jn(zh),Ok(oF)),so(Jn(ii.concat(Zu)),fw)]),Yh=te([so(Jn(ii),Gh)]);var jm=Wm(ov,Ec.init,sF,Yh,()=>x.some(eF));const xy=[We("selector"),ve("execute",Bf),ve("moveOnTab",!1)],Xh=(t,s,a)=>a.focusManager.get(t).bind(l=>a.execute(t,s,l)),rF=(t,s,a)=>{ko(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},Fd=(t,s,a)=>Cy(t,a.selector,s,-1),tu=(t,s,a)=>Cy(t,a.selector,s,1),hw=(t,s,a,l)=>a.moveOnTab?by(Fd)(t,s,a,l):x.none(),Wk=(t,s,a,l)=>a.moveOnTab?by(tu)(t,s,a,l):x.none(),aF=te([so(Jn(J1),by(Fd)),so(Jn(zh),by(tu)),so(Pl([If,Jn(Ld)]),hw),so(Pl([Uh,Jn(Ld)]),Wk),so(Jn(Zu),Xh),so(Jn(ii),Xh)]),jk=te([so(Jn(ii),Gh)]);var rv=Wm(xy,Ec.init,aF,jk,()=>x.some(rF));const av=[Ks("onSpace"),Ks("onEnter"),Ks("onShiftEnter"),Ks("onLeft"),Ks("onRight"),Ks("onTab"),Ks("onShiftTab"),Ks("onUp"),Ks("onDown"),Ks("onEscape"),ve("stopSpaceKeyup",!1),mo("focusIn")],pw=(t,s,a)=>[so(Jn(ii),a.onSpace),so(Pl([Uh,Jn(Zu)]),a.onEnter),so(Pl([If,Jn(Zu)]),a.onShiftEnter),so(Pl([If,Jn(Ld)]),a.onShiftTab),so(Pl([Uh,Jn(Ld)]),a.onTab),so(Jn(J1),a.onUp),so(Jn(zh),a.onDown),so(Jn(X1),a.onLeft),so(Jn(Q1),a.onRight),so(Jn(ii),a.onSpace)],Gk=(t,s,a)=>[...a.stopSpaceKeyup?[so(Jn(ii),Gh)]:[],so(Jn(py),a.onEscape)];var iv=Wm(av,Ec.init,pw,Gk,t=>t.focusIn);const wy=OL.schema(),iF=yk.schema(),vw=KL.schema(),Ey=UL.schema(),lF=jm.schema(),Wu=wk.schema(),Kk=rv.schema(),bw=iv.schema();var Jh=Object.freeze({__proto__:null,acyclic:wy,cyclic:iF,flow:vw,flatgrid:Ey,matrix:lF,execution:Wu,menu:Kk,special:bw});const Yk=t=>To(t,"setGridSize"),It=kt({branchKey:"mode",branches:Jh,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},l=>{l(t,s,a)})},setGridSize:(t,s,a,l,u)=>{Yk(a)?a.setGridSize(l,u):console.error("Layout does not support setGridSize")}},state:ML}),Ty=Ct("alloy-premade"),yw=t=>(Object.defineProperty(t.element.dom,Ty,{value:t.uid,writable:!0}),Nm(Ty,t)),Xk=t=>yt(t.dom,Ty),Jk=t=>$e(t,Ty),Qh=t=>$O((s,...a)=>t(s.getApis(),s,...a),t),Ac=t=>t.getSystem().isConnected(),lv=t=>{Zn(t,Vu());const s=t.components();Qe(s,lv)},cv=t=>{const s=t.components();Qe(s,cv),Zn(t,Dl())},Cw=(t,s)=>{t.getSystem().addToWorld(s),ks(t.element)&&cv(s)},Ay=t=>{lv(t),t.getSystem().removeFromWorld(t)},Sw=(t,s)=>{si(t.element,s.element)},cF=t=>{Qe(t.components(),s=>dc(s.element)),Em(t.element),t.syncComponents()},uF=(t,s,a)=>{const l=t.components();cF(t);const u=a(s),f=Ht(l,u);Qe(f,m=>{lv(m),t.getSystem().removeFromWorld(m)}),Qe(u,m=>{Ac(m)?Sw(t,m):(t.getSystem().addToWorld(m),Sw(t,m),ks(t.element)&&cv(m))}),t.syncComponents()},Nl=(t,s,a)=>{const l=t.components(),u=ke(s,p=>Jk(p).toArray());Qe(l,p=>{An(u,p)||Ay(p)});const f=a(s),m=Ht(l,f);Qe(m,p=>{Ac(p)&&Ay(p)}),Qe(f,p=>{Ac(p)||Cw(t,p)}),t.syncComponents()},Oc=(t,s)=>{xw(t,s,si)},xw=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),ks(t.element)&&cv(s),t.syncComponents()},Gm=t=>{lv(t),dc(t.element),t.getSystem().removeFromWorld(t)},rr=t=>{const s=wa(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());Gm(t),s.each(a=>{a.syncComponents()})},li=t=>{const s=t.components();Qe(s,Gm),Em(t.element),t.syncComponents()},na=(t,s)=>{Oy(t,s,si)},Di=(t,s)=>{Oy(t,s,ub)},Oy=(t,s,a)=>{a(t,s.element);const l=ua(s.element);Qe(l,u=>{s.getByDom(u).each(cv)})},Il=t=>{const s=ua(t.element);Qe(s,a=>{t.getByDom(a).each(lv)}),dc(t.element)},Km=(t,s,a)=>lc(t,s).map(u=>{if(a.exists(m=>!vo(m,u))){const m=a.map(xl).getOr("span"),p=rt.fromTag(m);return wm(u,p),p}else return u}),Qk=(t,s,a)=>{a.fold(()=>si(t,s),l=>{vo(l,s)||(wm(l,s),dc(l))})},qk=(t,s,a)=>{const l=Ie(s,a),u=ua(t);return Qe(u.slice(l.length),dc),l},eD=(t,s,a,l)=>{const u=lc(t,s),f=l(a,u),m=Km(t,s,u);return Qk(t,f.element,m),f},tD=(t,s,a)=>qk(t,s,(l,u)=>eD(t,u,l,a)),nD=(t,s)=>qk(t,s,(a,l)=>{const u=lc(t,l);return Qk(t,a,u),a}),qh=(t,s)=>{const a=dr(s),l=uc(a).bind(f=>{const m=p=>vo(f,p);return m(s)?x.some(s):BB(s,m)}),u=t(s);return l.each(f=>{uc(a).filter(m=>vo(m,f)).fold(()=>{Ls(f)},ee)}),u},ww=(t,s)=>{qh(()=>{uF(t,s,()=>Ie(s,t.getSystem().build))},t.element)},oD=(t,s)=>{qh(()=>{Nl(t,s,()=>tD(t.element,s,t.getSystem().buildOrPatch))},t.element)},dF=(t,s,a,l)=>{Ay(s);const u=eD(t.element,a,l,t.getSystem().buildOrPatch);Cw(t,u),t.syncComponents()},Ew=(t,s,a)=>{const l=t.getSystem().build(a);xw(t,l,s)},fF=(t,s,a,l)=>{rr(s),Ew(t,(u,f)=>GS(u,f,a),l)},sD=(t,s,a,l)=>(s.reuseDom?oD:ww)(t,l),rD=(t,s,a,l)=>{Ew(t,si,l)},Tw=(t,s,a,l)=>{Ew(t,jS,l)},aD=(t,s,a,l)=>{const u=ky(t);_t(u,m=>vo(l.element,m.element)).each(rr)},ky=(t,s)=>t.components(),iD=(t,s,a,l,u)=>{const f=ky(t);return x.from(f[l]).map(m=>(u.fold(()=>rr(m),p=>{(s.reuseDom?dF:fF)(t,m,l,p)}),m))};var mF=Object.freeze({__proto__:null,append:rD,prepend:Tw,remove:aD,replaceAt:iD,replaceBy:(t,s,a,l,u)=>{const f=ky(t);return to(f,l).bind(m=>iD(t,s,a,m,u))},set:sD,contents:ky});const fn=Vr({fields:[qr("reuseDom",!0)],name:"replacing",apis:mF}),gF=(t,s,a)=>vo(s,t.element)&&!vo(s,a),Bl=Jo([Q7(Hu(),(t,s)=>{const a=s.event,l=a.originator,u=a.target;return gF(t,l,u)?(console.warn(Hu()+` did not get interpreted by the desired target. 
Originator: `+Co(l)+`
Target: `+Co(u)+`
Check the `+Hu()+" event handlers"),!1):!0})]);var qK=Object.freeze({__proto__:null,events:Bl});const Dy=te("alloy-id-"),Ym=te("data-alloy-id"),Aw=Dy(),My=Ym(),hF=(t,s)=>{const a=Ct(Aw+t);return Ow(s,a),a},Ow=(t,s)=>{Object.defineProperty(t.dom,My,{value:s,writable:!0})},uv=t=>{const s=oi(t)?t.dom[My]:null;return x.from(s)},ep=t=>Ct(t),lD=ct,_d=t=>{const s=u=>`The component must be in a context to execute: ${u}`+(t?`
`+Co(t().element)+" is not in context.":""),a=u=>()=>{throw new Error(s(u))},l=u=>()=>{console.warn(s(u))};return{debugInfo:te("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:it}},dv=_d(),pF=(t,s)=>{const a=Ie(s,u=>Ti(u.name(),[We("config"),ve("state",Ec)])),l=gs("component.behaviours",on(a),t.behaviours).fold(u=>{throw new Error(Pm(u)+`
Complete spec:
`+JSON.stringify(t,null,2))},ct);return{list:s,data:ot(l,u=>{const f=u.map(m=>({config:m.config,state:m.state.init(m.config)}));return te(f)})}},vF=t=>t.list,cD=t=>t.data,Ry=(t,s)=>{const a={};return ze(t,(l,u)=>{ze(l,(f,m)=>{const p=$e(a,m).getOr([]);a[m]=p.concat([s(u,f)])})}),a},kw=(t,s,a,l)=>{const u={...s};Qe(a,E=>{u[E.name()]=E.exhibit(t,l)});const f=Ry(u,(E,D)=>({name:E,modification:D})),m=E=>as(E,(D,I)=>({...I.modification,...D}),{}),p=as(f.classes,(E,D)=>D.modification.concat(E),[]),v=m(f.attributes),C=m(f.styles);return Tc({classes:p,attributes:v,styles:C})},Dw=(t,s,a,l)=>{try{const u=za(a,(f,m)=>{const p=f[s],v=m[s],C=l.indexOf(p),E=l.indexOf(v);if(C===-1)throw new Error("The ordering for "+t+" does not have an entry for "+p+`.
Order specified: `+JSON.stringify(l,null,2));if(E===-1)throw new Error("The ordering for "+t+" does not have an entry for "+v+`.
Order specified: `+JSON.stringify(l,null,2));return C<E?-1:E<C?1:0});return Sn.value(u)}catch(u){return Sn.error([u])}},Py=(t,s)=>({handler:t,purpose:s}),Mw=(t,s)=>({cHandler:t,purpose:s}),uD=(t,s)=>Mw(dt.apply(void 0,[t.handler].concat(s)),t.purpose),Xm=t=>t.cHandler,Rw=(t,s)=>({name:t,handler:s}),bF=(t,s)=>{const a={};return Qe(t,l=>{a[l.name()]=l.handlers(s)}),a},dD=(t,s,a)=>{const l={...a,...bF(s,t)};return Ry(l,Rw)},yF=(t,s,a,l)=>{const u=dD(t,a,l);return Nw(u,s)},fD=t=>{const s=Y7(t);return(a,l,...u)=>{const f=[a,l].concat(u);s.abort.apply(void 0,f)?l.stop():s.can.apply(void 0,f)&&s.run.apply(void 0,f)}},Pw=(t,s)=>Sn.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Ie(s,a=>a.name),null,2)]),tp=(t,s,a)=>{const l=s[a];return l?Dw("Event: "+a,"name",t,l).map(u=>{const f=Ie(u,m=>m.handler);return X7(f)}):Pw(a,t)},Nw=(t,s)=>{const a=wn(t,(l,u)=>(l.length===1?Sn.value(l[0].handler):tp(l,s,u)).map(m=>{const p=fD(m),v=l.length>1?eo(s[u],C=>yn(l,E=>E.name===C)).join(" > "):l[0].name;return Nm(u,Py(p,v))}));return C7(a,{})},Jm="alloy.base.behaviour",CF=on([Qr("dom","dom",Yc(),on([We("tag"),ve("styles",{}),ve("classes",[]),ve("attributes",{}),mo("value"),mo("innerHtml")])),We("components"),We("uid"),ve("events",{}),ve("apis",{}),Qr("eventOrder","eventOrder",cx({[el()]:["disabling",Jm,"toggling","typeaheadevents"],[Hu()]:[Jm,"focusing","keying"],[Fm()]:[Jm,"disabling","toggling","representing","tooltipping"],[Ed()]:[Jm,"representing","streaming","invalidating"],[Vu()]:[Jm,"representing","item-events","toolbar-button-events","tooltipping"],[Ai()]:["focusing",Jm,"item-type-events"],[wd()]:["focusing",Jm,"item-type-events"],[xc()]:["item-type-events","tooltipping"],[Bm()]:["receiving","reflecting","tooltipping"]}),pc()),mo("domModification")]),mD=t=>gs("custom.definition",CF,t),Ff=t=>({...t.dom,uid:t.uid,domChildren:Ie(t.components,s=>s.element)}),Iw=t=>t.domModification.fold(()=>Tc({}),Tc),Bw=t=>t.events,fv=(t,s)=>{const a=Re(t),l=Re(s),u=Ht(l,a),f=Vn(t,(m,p)=>!yt(s,p)||m!==s[p]).t;return{toRemove:u,toSet:f}},gD=(t,s)=>{const{class:a,style:l,...u}=mb(s),{toSet:f,toRemove:m}=fv(t.attributes,u),p=()=>{Qe(m,le=>ls(s,le)),fb(s,f)},v=ae(s),{toSet:C,toRemove:E}=fv(t.styles,v),D=()=>{Qe(E,le=>mt(s,le)),Ki(s,C)},I=Sd(s),H=Ht(I,t.classes),W=Ht(t.classes,I),Q=()=>{Am(s,W),Xi(s,H)},se=le=>{pf(s,le)},X=()=>{const le=t.domChildren;nD(s,le)},ie=()=>{const le=s,xe=t.value.getOrUndefined();xe!==gc(le)&&Om(le,xe??"")};return p(),Q(),D(),t.innerHtml.fold(X,se),ie(),s},Ny=t=>{const s=rt.fromTag(t.tag);fb(s,t.attributes),Am(s,t.classes),Ki(s,t.styles),t.innerHtml.each(l=>pf(s,l));const a=t.domChildren;return vh(s,a),t.value.each(l=>{Om(s,l)}),s},Lw=(t,s)=>{try{const a=gD(t,s);return x.some(a)}catch{return x.none()}},SF=t=>t.innerHtml.isSome()&&t.domChildren.length>0,xF=(t,s)=>{const a=u=>xl(u)===t.tag&&!SF(t)&&!Xk(u),l=s.filter(a).bind(u=>Lw(t,u)).getOrThunk(()=>Ny(t));return Ow(l,t.uid),l},ju=t=>{const s=$e(t,"behaviours").getOr({});return ke(Re(s),a=>{const l=s[a];return fe(l)?[l.me]:[]})},wF=(t,s)=>pF(t,s),EF=t=>{const s=ju(t);return wF(t,s)},Ll=(t,s,a)=>{const l=Ff(t),u=Iw(t),f={"alloy.base.modification":u},m=s.length>0?kw(a,f,s,l):u;return tw(l,m)},kr=(t,s,a)=>{const l={"alloy.base.behaviour":Bw(t)};return yF(a,t.eventOrder,s,l).getOrDie()},TF=(t,s)=>{const a=()=>le,l=Rt(dv),u=kl(mD(t)),f=EF(t),m=vF(f),p=cD(f),v=Ll(u,m,p),C=xF(v,s),E=kr(u,m,p),D=Rt(u.components),I=xe=>{l.set(xe)},H=()=>{l.set(_d(a))},W=()=>{const xe=ua(C),Me=ke(xe,vt=>l.get().getByDom(vt).fold(()=>[],Ko));D.set(Me)},Q=xe=>{const Me=p;return(ye(Me[xe.name()])?Me[xe.name()]:()=>{throw new Error("Could not find "+xe.name()+" in "+JSON.stringify(t,null,2))})()},se=xe=>ye(p[xe.name()]),X=()=>u.apis,ie=xe=>p[xe]().map(Me=>Me.state.readState()).getOr("not enabled"),le={uid:t.uid,getSystem:l.get,config:Q,hasConfigured:se,spec:t,readState:ie,getApis:X,connect:I,disconnect:H,element:C,syncComponents:W,components:D.get,events:E};return le},Fw=(t,s)=>{const a=$e(t,"components").getOr([]);return s.fold(()=>Ie(a,pa),l=>Ie(a,(u,f)=>By(u,lc(l,f))))},AF=(t,s)=>{const{events:a,...l}=lD(t),u=Fw(l,s),f={...l,events:{...qK,...a},components:u};return Sn.value(TF(f,s))},Wo=t=>{const s=rt.fromText(t);return Iy({element:s})},Iy=t=>{const s=ri("external.component",Ji([We("element"),mo("uid")]),t),a=Rt(_d()),l=p=>{a.set(p)},u=()=>{a.set(_d(()=>m))},f=s.uid.getOrThunk(()=>ep("external"));Ow(s.element,f);const m={uid:f,getSystem:a.get,config:x.none,hasConfigured:it,connect:l,disconnect:u,getApis:()=>({}),element:s.element,spec:t,readState:te("No state"),syncComponents:ee,components:te([]),events:{}};return yw(m)},np=ep,hD=t=>yt(t,"uid"),By=(t,s)=>Jk(t).getOrThunk(()=>{const a=hD(t)?t:{uid:np(""),...t};return AF(a,s).getOrDie()}),pa=t=>By(t,x.none()),tl=yw;var DF=Object.freeze({__proto__:null,block:(t,s,a,l)=>{an(t.element,"aria-busy",!0);const u=s.getRoot(t).getOr(t),f=qe([It.config({mode:"special",onTab:()=>x.some(!0),onShiftTab:()=>x.some(!0)}),tn.config({})]),m=l(u,f),p=u.getSystem().build(m);fn.append(u,tl(p)),p.hasConfigured(It)&&s.focus&&It.focusIn(p),a.isBlocked()||s.onBlock(t),a.blockWith(()=>fn.remove(u,p))},unblock:(t,s,a)=>{ls(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),pD=[Zo("getRoot",x.none),qr("focus",!0),oo("onBlock"),oo("onUnblock")],vD=Object.freeze({__proto__:null,init:()=>{const t=sh(),s=a=>{t.set({destroy:a})};return ki({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const kc=Vr({fields:pD,name:"blocking",apis:DF,state:vD});var bD=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const Qm=[We("find")],Wn=Vr({fields:Qm,name:"composing",apis:bD});var RF=Object.freeze({__proto__:null,getCoupled:(t,s,a,l)=>a.getOrCreate(t,s,l),getExistingCoupled:(t,s,a,l)=>a.getExisting(t,s,l)}),PF=[Qi("others",TO(Sn.value,pc()))],IF=Object.freeze({__proto__:null,init:()=>{const t={},s=(f,m)=>{if(Re(f.others).length===0)throw new Error("Cannot find any known coupled components");return $e(t,m)},a=(f,m,p)=>s(m,p).getOrThunk(()=>{const C=$e(m.others,p).getOrDie("No information found for coupled component: "+p)(f),E=f.getSystem().build(C);return t[p]=E,E}),l=(f,m,p)=>s(m,p).orThunk(()=>($e(m.others,p).getOrDie("No information found for coupled component: "+p),x.none())),u=te({});return ki({readState:u,getExisting:l,getOrCreate:a})}});const hs=Vr({fields:PF,name:"coupling",apis:RF,state:IF}),BF=["input","button","textarea","select"],yD=(t,s,a)=>{(s.disabled()?$w:Hw)(t,s)},Ly=(t,s)=>s.useNative===!0&&An(BF,xl(t.element)),mv=t=>y1(t.element,"disabled"),CD=t=>{an(t.element,"disabled","disabled")},SD=t=>{ls(t.element,"disabled")},LF=t=>qs(t.element,"aria-disabled")==="true",xD=t=>{an(t.element,"aria-disabled","true")},wD=t=>{an(t.element,"aria-disabled","false")},$w=(t,s,a)=>{s.disableClass.each(u=>{xs(t.element,u)}),(Ly(t,s)?CD:xD)(t),s.onDisabled(t)},Hw=(t,s,a)=>{s.disableClass.each(u=>{Yo(t.element,u)}),(Ly(t,s)?SD:wD)(t),s.onEnabled(t)},ED=(t,s)=>Ly(t,s)?mv(t):LF(t);var FF=Object.freeze({__proto__:null,enable:Hw,disable:$w,isDisabled:ED,onLoad:yD,set:(t,s,a,l)=>{(l?$w:Hw)(t,s)}}),zw=Object.freeze({__proto__:null,exhibit:(t,s)=>Tc({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Jo([rk(el(),(a,l)=>ED(a,t)),nw(t,s,yD)])}),_F=[Zo("disabled",it),ve("useNative",!0),mo("disableClass"),oo("onDisabled"),oo("onEnabled")];const Lt=Vr({fields:_F,name:"disabling",active:zw,apis:FF}),Fl=(t,s,a,l,u)=>{const f=m=>m+"px";return{position:t,left:s.map(f),top:a.map(f),right:l.map(f),bottom:u.map(f)}},$F=t=>({...t,position:x.some(t.position)}),TD=(t,s)=>{b(t,$F(s))},_l=(t,s)=>{const a=t.element;xs(a,s.transitionClass),Yo(a,s.fadeOutClass),xs(a,s.fadeInClass),s.onShow(t)},AD=(t,s)=>{const a=t.element;xs(a,s.transitionClass),Yo(a,s.fadeInClass),xs(a,s.fadeOutClass),s.onHide(t)},HF=(t,s)=>t.y<s.bottom&&t.bottom>s.y,VF=(t,s)=>t.y>=s.y,zF=(t,s)=>t.bottom<=s.bottom,Uw=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),Fy=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),Zw=t=>t.box.x-t.win.x,UF=(t,s,a)=>{const l=s.win,u=s.box,f=Zw(s);return xn(t,m=>{switch(m){case"bottom":return zF(u,a.bounds)?x.none():x.some(Fy(l,f,a));case"top":return VF(u,a.bounds)?x.none():x.some(Uw(l,f,a));default:return x.none()}}).getOr({location:"no-dock"})},ZF=(t,s,a)=>ia(t,l=>{switch(l){case"bottom":return zF(s,a.bounds);case"top":return VF(s,a.bounds)}}),WF=(t,s)=>{const a=s.optScrollEnv.fold(te(t.bounds.y),l=>l.scrollElmTop+(t.bounds.y-l.currentScrollTop));return Ss(t.bounds.x,a)},jF=(t,s)=>{const a=s.optScrollEnv.fold(te(t.y),l=>t.y+l.currentScrollTop-l.scrollElmTop);return Ss(t.x,a)},_f=(t,s,a)=>a.getInitialPos().map(l=>{const u=WF(l,s);return{box:_s(u.left,u.top,nr(t),zn(t)),location:l.location}}),_y=(t,s,a,l,u)=>{const f=jF(s,a),m=_s(f.left,f.top,s.width,s.height);l.setInitialPos({style:ae(t),position:k(t,"position")||"static",bounds:m,location:u.location})},GF=(t,s,a,l,u)=>{l.getInitialPos().fold(()=>_y(t,s,a,l,u),()=>ee)},$y=(t,s,a)=>a.getInitialPos().bind(l=>{var u;switch(a.clearInitialPos(),l.position){case"static":return x.some({morph:"static"});case"absolute":const f=Th(t).getOr(Aa()),m=$r(f),p=(u=f.dom.scrollTop)!==null&&u!==void 0?u:0;return x.some({morph:"absolute",positionCss:Fl("absolute",$e(l.style,"left").map(v=>s.x-m.x),$e(l.style,"top").map(v=>s.y-m.y+p),$e(l.style,"right").map(v=>m.right-s.right),$e(l.style,"bottom").map(v=>m.bottom-s.bottom))});default:return x.none()}}),Hy=(t,s,a)=>_f(t,s,a).filter(({box:l})=>ZF(a.getModes(),l,s)).bind(({box:l})=>$y(t,l,a)),gv=t=>{switch(t.location){case"top":return x.some({morph:"fixed",positionCss:Fl("fixed",x.some(t.leftX),x.some(t.topY),x.none(),x.none())});case"bottom":return x.some({morph:"fixed",positionCss:Fl("fixed",x.some(t.leftX),x.none(),x.none(),x.some(t.bottomY))});default:return x.none()}},KF=(t,s,a)=>{const l=$r(t),u=fa(),f=UF(a.getModes(),{win:u,box:l},s);return f.location==="top"||f.location==="bottom"?(_y(t,l,s,a,f),gv(f)):x.none()},YF=(t,s,a)=>Hy(t,s,a).orThunk(()=>s.optScrollEnv.bind(l=>_f(t,s,a)).bind(({box:l,location:u})=>{const f=fa(),m=Zw({win:f,box:l}),p=u==="top"?Uw(f,m,s):Fy(f,m,s);return gv(p)})),XF=(t,s,a)=>{const l=t.element;return Sa(Y(l,"position"),"fixed")?YF(l,s,a):KF(l,s,a)},JF=(t,s,a)=>{const l=t.element;return _f(l,s,a).bind(({box:u})=>$y(l,u,a))},QF=(t,s,a,l)=>{const u=$r(t),f=fa(),m=Zw({win:f,box:u}),p=l(f,m,s);return p.location==="bottom"||p.location==="top"?(GF(t,u,s,a,p),gv(p)):x.none()},OD=(t,s,a)=>{a.setDocked(!1),Qe(["left","right","top","bottom","position"],l=>mt(t.element,l)),s.onUndocked(t)},Ww=(t,s,a,l)=>{const u=l.position==="fixed";a.setDocked(u),TD(t.element,l),(u?s.onDocked:s.onUndocked)(t)},jw=(t,s,a,l,u=!1)=>{s.contextual.each(f=>{f.lazyContext(t).each(m=>{const p=HF(m,l.bounds);p!==a.isVisible()&&(a.setVisible(p),u&&!p?(Am(t.element,[f.fadeOutClass]),f.onHide(t)):(p?_l:AD)(t,f))})})},hv=(t,s,a,l,u)=>{jw(t,s,a,l,!0),Ww(t,s,a,u.positionCss)},qF=(t,s,a,l,u)=>{switch(u.morph){case"static":return OD(t,s,a);case"absolute":return Ww(t,s,a,u.positionCss);case"fixed":return hv(t,s,a,l,u)}},e_=(t,s,a)=>{const l=s.lazyViewport(t);jw(t,s,a,l),XF(t,l,a).each(u=>{qF(t,s,a,l,u)})},t_=(t,s,a)=>{const l=t.element;a.setDocked(!1);const u=s.lazyViewport(t);JF(t,u,a).each(f=>{switch(f.morph){case"static":{OD(t,s,a);break}case"absolute":{Ww(t,s,a,f.positionCss);break}}}),a.setVisible(!0),s.contextual.each(f=>{Xi(l,[f.fadeInClass,f.fadeOutClass,f.transitionClass]),f.onShow(t)}),Vy(t,s,a)},Vy=(t,s,a)=>{t.getSystem().isConnected()&&e_(t,s,a)},qm=(t,s,a)=>{a.isDocked()&&t_(t,s,a)},zy=t=>(s,a,l)=>{const u=a.lazyViewport(s);QF(s.element,u,l,t).each(m=>{hv(s,a,l,u,m)})},n_=zy(Uw),Gw=zy(Fy);var o_=Object.freeze({__proto__:null,refresh:Vy,reset:qm,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,l)=>a.setModes(l),forceDockToTop:n_,forceDockToBottom:Gw}),Uy=Object.freeze({__proto__:null,events:(t,s)=>Jo([Vh(kh(),(a,l)=>{t.contextual.each(u=>{Jr(a.element,u.transitionClass)&&(Xi(a.element,[u.transitionClass,u.fadeInClass]),(s.isVisible()?u.onShown:u.onHidden)(a)),l.stop()})}),Le(xx(),(a,l)=>{Vy(a,t,s)}),Le(_m(),(a,l)=>{Vy(a,t,s)}),Le(qc(),(a,l)=>{qm(a,t,s)})])}),Kw=[Ti("contextual",[mr("fadeInClass"),mr("fadeOutClass"),mr("transitionClass"),bc("lazyContext"),oo("onShow"),oo("onShown"),oo("onHide"),oo("onHidden")]),Zo("lazyViewport",()=>({bounds:fa(),optScrollEnv:x.none()})),xf("modes",["top","bottom"],Gs),oo("onDocked"),oo("onUndocked")],kD=Object.freeze({__proto__:null,init:t=>{const s=Rt(!1),a=Rt(!0),l=dn(),u=Rt(t.modes),f=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${u.get().join(",")}`;return ki({isDocked:s.get,setDocked:s.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:a.get,setVisible:a.set,getModes:u.get,setModes:u.set,readState:f})}});const Qo=Vr({fields:Kw,name:"docking",active:Uy,apis:o_,state:kD}),pv=Ir.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),Zy=t=>s=>s.translate(-t.left,-t.top),vv=t=>s=>s.translate(t.left,t.top),$d=t=>(s,a)=>Bo(t,(l,u)=>u(l),Ss(s,a)),Wy=(t,s,a)=>t.fold($d([vv(a),Zy(s)]),$d([Zy(s)]),$d([])),eg=(t,s,a)=>t.fold($d([vv(a)]),$d([]),$d([vv(s)])),DD=(t,s,a)=>t.fold($d([]),$d([Zy(a)]),$d([vv(s),Zy(a)])),r_=(t,s,a,l,u,f)=>{const m=eg(t,u,f),p=eg(s,u,f);return Math.abs(m.left-p.left)<=a&&Math.abs(m.top-p.top)<=l},Yw=(t,s,a,l,u,f)=>{const m=eg(t,u,f),p=eg(s,u,f),v=Math.abs(m.left-p.left),C=Math.abs(m.top-p.top);return Ss(v,C)},Xw=(t,s,a)=>{const l=t.fold((u,f)=>({position:x.some("absolute"),left:x.some(u+"px"),top:x.some(f+"px")}),(u,f)=>({position:x.some("absolute"),left:x.some(u-a.left+"px"),top:x.some(f-a.top+"px")}),(u,f)=>({position:x.some("fixed"),left:x.some(u+"px"),top:x.some(f+"px")}));return{right:x.none(),bottom:x.none(),...l}},jy=(t,s,a)=>t.fold((l,u)=>tg(l+s,u+a),(l,u)=>nl(l+s,u+a),(l,u)=>Hd(l+s,u+a)),sp=(t,s,a,l)=>{const u=(f,m)=>(p,v)=>{const C=f(s,a,l);return m(p.getOr(C.left),v.getOr(C.top))};return t.fold(u(DD,tg),u(eg,nl),u(Wy,Hd))},tg=pv.offset,nl=pv.absolute,Hd=pv.fixed,MD=(t,s)=>{const a=qs(t,s);return ce(a)?NaN:parseInt(a,10)},a_=(t,s)=>{const a=t.element,l=MD(a,s.leftAttr),u=MD(a,s.topAttr);return isNaN(l)||isNaN(u)?x.none():x.some(Ss(l,u))},i_=(t,s,a)=>{const l=t.element;an(l,s.leftAttr,a.left+"px"),an(l,s.topAttr,a.top+"px")},RD=(t,s)=>{const a=t.element;ls(a,s.leftAttr),ls(a,s.topAttr)},l_=(t,s,a,l)=>a_(t,s).fold(()=>a,u=>Hd(u.left+l.left,u.top+l.top)),c_=(t,s,a,l,u,f)=>{const m=l_(t,s,a,l),p=s.mustSnap?u_(t,s,m,u,f):ND(t,s,m,u,f),v=Wy(m,u,f);return i_(t,s,v),p.fold(()=>({coord:Hd(v.left,v.top),extra:x.none()}),C=>({coord:C.output,extra:C.extra}))},PD=(t,s)=>{RD(t,s)},Jw=(t,s,a,l)=>xn(t,u=>{const f=u.sensor;return r_(s,f,u.range.left,u.range.top,a,l)?x.some({output:sp(u.output,s,a,l),extra:u.extra}):x.none()}),u_=(t,s,a,l,u)=>{const f=s.getSnapPoints(t);return Jw(f,a,l,u).orThunk(()=>Bo(f,(v,C)=>{const E=C.sensor,D=Yw(a,E,C.range.left,C.range.top,l,u);return v.deltas.fold(()=>({deltas:x.some(D),snap:x.some(C)}),I=>{const H=(D.left+D.top)/2,W=(I.left+I.top)/2;return H<=W?{deltas:x.some(D),snap:x.some(C)}:v})},{deltas:x.none(),snap:x.none()}).snap.map(v=>({output:sp(v.output,a,l,u),extra:v.extra})))},ND=(t,s,a,l,u)=>{const f=s.getSnapPoints(t);return Jw(f,a,l,u)},d_=(t,s,a)=>({coord:sp(t.output,t.output,s,a),extra:t.extra});var BD=Object.freeze({__proto__:null,snapTo:(t,s,a,l)=>{const u=s.getTarget(t.element);if(s.repositionTarget){const f=ca(t.element),m=da(f),p=Bt(u),v=d_(l,m,p),C=Xw(v.coord,m,p);b(u,C)}}});const pr=(t,s)=>_b(t,{},Ie(s,a=>Fb(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([Da("dump",ct)])),bv=t=>t.dump,zr=(t,s)=>({...qe(s),...t.dump}),Dc={field:pr,augment:zr,get:bv},f_=(t,s)=>(t.length>0?[yc("parts",t)]:[]).concat([We("uid"),ve("dom",{}),ve("components",[]),Hm("originalSpec"),ve("debug.sketcher",{})]).concat(s),LD=(t,s,a,l,u)=>{const f=f_(l,u);return ri(t+" [SpecSchema]",Ji(f.concat(s)),a)},m_=(t,s,a,l)=>{const u=Qw(l),f=LD(t,s,u,[],[]);return a(f,u)},ng=(t,s,a,l,u)=>{const f=Qw(u),m=Xb(a),p=Jb(a),v=LD(t,s,f,m,[p]),C=Df(t,v,a),E=Md(t,v,C.internals());return l(v,E,f,C.externals())},FD=t=>yt(t,"uid"),Qw=t=>FD(t)?t:{...t,uid:ep("uid")},_D=t=>t.uid!==void 0,$D=Ji([We("name"),We("factory"),We("configFields"),ve("apis",{}),ve("extraApis",{})]),HD=Ji([We("name"),We("factory"),We("configFields"),We("partFields"),ve("apis",{}),ve("extraApis",{})]),ol=t=>{const s=ri("Sketcher for "+t.name,$D,t),a=f=>m_(s.name,s.configFields,s.factory,f),l=ot(s.apis,Qh),u=ot(s.extraApis,(f,m)=>jb(f,m));return{name:s.name,configFields:s.configFields,sketch:a,...l,...u}},Ra=t=>{const s=ri("Sketcher for "+t.name,HD,t),a=m=>ng(s.name,s.configFields,s.partFields,s.factory,m),l=Lh(s.name,s.partFields),u=ot(s.apis,Qh),f=ot(s.extraApis,(m,p)=>jb(m,p));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:l,...u,...f}},$l=ol({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:bv(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[ve("components",[]),pr("containerBehaviours",[]),ve("events",{}),ve("domModification",{}),ve("eventOrder",{})]}),qw="data-initial-z-index",Gy=t=>{wa(t.element).filter(oi).each(s=>{er(s,qw).fold(()=>mt(s,"z-index"),a=>gn(s,"z-index",a)),ls(s,qw)})},g_=t=>{wa(t.element).filter(oi).each(s=>{Y(s,"z-index").each(a=>{an(s,qw,a)}),gn(s,"z-index",k(t.element,"z-index"))})},eE=(t,s)=>{t.getSystem().addToGui(s),g_(s)},Ka=t=>{Gy(t),t.getSystem().removeFromGui(t)},VD=(t,s,a)=>t.getSystem().build($l.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var zD=Ti("snaps",[We("getSnapPoints"),oo("onSensor"),We("leftAttr"),We("topAttr"),ve("lazyViewport",fa),ve("mustSnap",!1)]);const Ky=[ve("useFixed",it),We("blockerClass"),ve("getTarget",ct),ve("onDrag",ee),ve("repositionTarget",!0),ve("onDrop",ee),Zo("getBounds",fa),zD],h_=t=>uf(Y(t,"left"),Y(t,"top"),Y(t,"position"),(s,a,l)=>(l==="fixed"?Hd:tg)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=fc(t);return nl(s.left,s.top)}),UD=(t,s,a,l,u)=>{const f=u.bounds,m=eg(s,a,l),p=Us(m.left,f.x,f.x+f.width-u.width),v=Us(m.top,f.y,f.y+f.height-u.height),C=nl(p,v);return s.fold(()=>{const E=DD(C,a,l);return tg(E.left,E.top)},te(C),()=>{const E=Wy(C,a,l);return Hd(E.left,E.top)})},ZD=(t,s,a,l,u,f,m)=>{const p=s.fold(()=>{const v=jy(a,f.left,f.top),C=Wy(v,l,u);return Hd(C.left,C.top)},v=>{const C=c_(t,v,a,f,l,u);return C.extra.each(E=>{v.onSensor(t,E)}),C.coord});return UD(t,p,l,u,m)},p_=(t,s,a,l)=>{const u=s.getTarget(t.element);if(s.repositionTarget){const f=ca(t.element),m=da(f),p=Bt(u),v=h_(u),C=ZD(t,s.snaps,v,m,p,l,a),E=Xw(C,m,p);b(u,E)}s.onDrag(t,u,l)},WD=(t,s)=>({bounds:t.getBounds(),height:os(s.element),width:yh(s.element)}),tE=(t,s,a,l,u)=>{const f=a.update(l,u),m=a.getStartData().getOrThunk(()=>WD(s,t));f.each(p=>{p_(t,s,m,p)})},jD=(t,s,a,l)=>{s.each(Ka),a.snaps.each(f=>{PD(t,f)});const u=a.getTarget(t.element);l.reset(),a.onDrop(t,u)},Yy=t=>(s,a)=>{const l=u=>{a.setStartData(WD(s,u))};return Jo([Le(xx(),u=>{a.getStartData().each(()=>l(u))}),...t(s,a,l)])},v_=t=>Jo([Le(Ai(),t.forceDrop),Le($b(),t.drop),Le(P1(),(s,a)=>{t.move(a.event)}),Le(N1(),t.delayDrop)]);var GD=Object.freeze({__proto__:null,getData:t=>x.from(Ss(t.x,t.y)),getDelta:(t,s)=>Ss(s.left-t.left,s.top-t.top)});const nE=(t,s,a)=>[Le(Ai(),(l,u)=>{if(u.event.raw.button!==0)return;u.stop();const m=()=>jD(l,x.some(C),t,s),p=HO(m,200),v={drop:m,delayDrop:p.schedule,forceDrop:m,move:D=>{p.cancel(),tE(l,t,s,GD,D)}},C=VD(l,t.blockerClass,v_(v));(()=>{a(l),eE(l,C)})()})],y_=[...Ky,Ao("dragger",{handlers:Yy(nE)})],C_=t=>Jo([Le(wd(),t.forceDrop),Le(Jc(),t.drop),Le(Sc(),t.drop),Le(wf(),(s,a)=>{t.move(a.event)})]),S_=t=>{const s=t[0];return x.some(Ss(s.clientX,s.clientY))};var oE=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?S_(a):x.none()},getDelta:(t,s)=>Ss(s.left-t.left,s.top-t.top)});const Vd=(t,s,a)=>{const l=dn(),u=f=>{jD(f,l.get(),t,s),l.clear()};return[Le(wd(),(f,m)=>{m.stop();const p=()=>u(f),v={drop:p,delayDrop:ee,forceDrop:p,move:D=>{tE(f,t,s,oE,D)}},C=VD(f,t.blockerClass,C_(v));l.set(C),(()=>{a(f),eE(f,C)})()}),Le(wf(),(f,m)=>{m.stop(),tE(f,t,s,oE,m.event)}),Le(Jc(),(f,m)=>{m.stop(),u(f)}),Le(Sc(),u)]},KD=[...Ky,Ao("dragger",{handlers:Yy(Vd)})],YD=(t,s,a)=>[...nE(t,s,a),...Vd(t,s,a)],XD=[...Ky,Ao("dragger",{handlers:Yy(YD)})];var w_=Object.freeze({__proto__:null,mouse:y_,touch:KD,mouseOrTouch:XD}),T_=Object.freeze({__proto__:null,init:()=>{let t=x.none(),s=x.none();const a=()=>{t=x.none(),s=x.none()},l=(v,C)=>{const E=t.map(D=>v.getDelta(D,C));return t=x.some(C),E},u=(v,C)=>v.getData(C).bind(E=>l(v,E)),f=v=>{s=x.some(v)},m=()=>s,p=te({});return ki({readState:p,reset:a,update:u,getStartData:m,setStartData:f})}});const og=kt({branchKey:"mode",branches:w_,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:x.from(t.extra)})},state:T_,apis:BD}),A_=["input","textarea"],sE=t=>{const s=xl(t);return An(A_,s)},Xy=(t,s)=>{const a=s.getRoot(t).getOr(t.element);Yo(a,s.invalidClass),s.notify.each(l=>{sE(t.element)&&an(t.element,"aria-invalid",!1),l.getContainer(t).each(u=>{pf(u,l.validHtml)}),l.onValid(t)})},Jy=(t,s,a,l)=>{const u=s.getRoot(t).getOr(t.element);xs(u,s.invalidClass),s.notify.each(f=>{sE(t.element)&&an(t.element,"aria-invalid",!0),f.getContainer(t).each(m=>{pf(m,l)}),f.onInvalid(t,l)})},JD=(t,s,a)=>s.validator.fold(()=>ns.pure(Sn.value(!0)),l=>l.validate(t)),Gu=(t,s,a)=>(s.notify.each(l=>{l.onValidate(t)}),JD(t,s).map(l=>t.getSystem().isConnected()?l.fold(u=>(Jy(t,s,a,u),Sn.error(u)),u=>(Xy(t,s),Sn.value(u))):Sn.error("No longer in system")));var QD=Object.freeze({__proto__:null,markValid:Xy,markInvalid:Jy,query:JD,run:Gu,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Jr(a,s.invalidClass)}}),k_=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>Jo([Le(a.onEvent,l=>{Gu(l,t,s).get(ct)})].concat(a.validateOnLoad?[$o(l=>{Gu(l,t,s).get(ee)})]:[]))).getOr({})}),Cv=[We("invalidClass"),ve("getRoot",x.none),Ti("notify",[ve("aria","alert"),ve("getContainer",x.none),ve("validHtml",""),oo("onValid"),oo("onInvalid"),oo("onValidate")]),Ti("validator",[We("validate"),ve("onEvent","input"),ve("validateOnLoad",!0)])];const sg=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},rE=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var D_=Object.freeze({__proto__:null,onLoad:sg,onUnload:rE,setValue:(t,s,a,l)=>{s.store.manager.setValue(t,s,a,l)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),e5=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[$o((l,u)=>{sg(l,t,s)}),eu((l,u)=>{rE(l,t,s)})]:[nw(t,s,sg)];return Jo(a)}});const Ku=()=>{const t=Rt(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,l=()=>{t.set(null)};return ki({set:t.set,get:t.get,isNotSet:a,clear:l,readState:s})},aE=()=>ki({readState:ee}),t5=()=>{const t=Rt({}),s=Rt({});return ki({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:m=>$e(t.get(),m).orThunk(()=>$e(s.get(),m)),update:m=>{const p=t.get(),v=s.get(),C={},E={};Qe(m,D=>{C[D.value]=D,$e(D,"meta").each(I=>{$e(I,"text").each(H=>{E[H]=D})})}),t.set({...p,...C}),s.set({...v,...E})},clear:()=>{t.set({}),s.set({})}})};var n5=Object.freeze({__proto__:null,memory:Ku,dataset:t5,manual:aE,init:t=>t.store.manager.state(t)});const iE=(t,s,a,l)=>{const u=s.store;a.update([l]),u.setValue(t,l),s.onSetValue(t,l)},lE=(t,s,a)=>{const l=s.store,u=l.getDataKey(t);return a.lookup(u).getOrThunk(()=>l.getFallbackEntry(u))},o5=(t,s,a)=>{s.store.initialValue.each(u=>{iE(t,s,a,u)})},R_=(t,s,a)=>{a.clear()};var P_=[mo("initialValue"),We("getFallbackEntry"),We("getDataKey"),We("setValue"),Ao("manager",{setValue:iE,getValue:lE,onLoad:o5,onUnload:R_,state:t5})];const N_=(t,s,a)=>s.store.getValue(t),Qy=(t,s,a,l)=>{s.store.setValue(t,l),s.onSetValue(t,l)},cE=(t,s,a)=>{s.store.initialValue.each(l=>{s.store.setValue(t,l)})};var qy=[We("getValue"),ve("setValue",ee),mo("initialValue"),Ao("manager",{setValue:Qy,getValue:N_,onLoad:cE,onUnload:ee,state:Ec.init})];const s5=(t,s,a,l)=>{a.set(l),s.onSetValue(t,l)},I_=(t,s,a)=>a.get(),r5=(t,s,a)=>{s.store.initialValue.each(l=>{a.isNotSet()&&a.set(l)})},a5=(t,s,a)=>{a.clear()};var i5=[mo("initialValue"),Ao("manager",{setValue:s5,getValue:I_,onLoad:r5,onUnload:a5,state:Ku})],l5=[Cc("store",{mode:"memory"},wi("mode",{memory:i5,manual:qy,dataset:P_})),oo("onSetValue"),ve("resetOnDom",!1)];const xt=Vr({fields:l5,name:"representing",active:e5,apis:D_,extra:{setValueFrom:(t,s)=>{const a=xt.getValue(s);xt.setValue(t,a)}},state:n5}),Mc=Vr({fields:Cv,name:"invalidating",active:k_,apis:QD,extra:{validation:t=>s=>{const a=xt.getValue(s);return ns.pure(t(a))}}});var B_=Object.freeze({__proto__:null,exhibit:(t,s)=>Tc({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const uE=Ir.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),c5=(t,s,a,l,u,f)=>{const m=s.rect,p=m.x-a,v=m.y-l,C=m.width,E=m.height,D=u-(p+C),I=f-(v+E),H=x.some(p),W=x.some(v),Q=x.some(D),se=x.some(I),X=x.none();return _7(s.direction,()=>Fl(t,H,W,X,X),()=>Fl(t,X,W,Q,X),()=>Fl(t,H,X,X,se),()=>Fl(t,X,X,Q,se),()=>Fl(t,H,W,X,X),()=>Fl(t,H,X,X,se),()=>Fl(t,H,W,X,X),()=>Fl(t,X,W,Q,X))},dE=(t,s)=>t.fold(()=>{const a=s.rect;return Fl("absolute",x.some(a.x),x.some(a.y),x.none(),x.none())},(a,l,u,f)=>c5("absolute",s,a,l,u,f),(a,l,u,f)=>c5("fixed",s,a,l,u,f)),fE=(t,s)=>{const a=dt(O1,s),l=t.fold(a,a,()=>{const m=da();return O1(s).translate(-m.left,-m.top)}),u=yh(s),f=os(s);return _s(l.left,l.top,u,f)},L_=(t,s)=>s.fold(()=>t.fold(fa,fa,_s),a=>t.fold(te(a),te(a),()=>{const l=mE(t,a.x,a.y);return _s(l.left,l.top,a.width,a.height)})),mE=(t,s,a)=>{const l=Ss(s,a),u=()=>{const f=da();return l.translate(-f.left,-f.top)};return t.fold(te(l),te(l),u)},Sv=(t,s,a,l)=>t.fold(s,a,l);uE.none;const F_=uE.relative,xv=uE.fixed,gE=(t,s)=>({anchorBox:t,origin:s}),u5=(t,s)=>gE(t,s),wv=Ir.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),__=(t,s)=>{const{x:a,y:l,right:u,bottom:f}=s,{x:m,y:p,right:v,bottom:C,width:E,height:D}=t,I=m>=a&&m<=u,H=p>=l&&p<=f,W=I&&H,Q=v<=u&&v>=a,se=C<=f&&C>=l,X=Q&&se,ie=Math.min(E,m>=a?u-m:v-a),le=Math.min(D,p>=l?f-p:C-l);return{originInBounds:W,sizeInBounds:X,visibleW:ie,visibleH:le}},$_=(t,s)=>{const{x:a,y:l,right:u,bottom:f}=s,{x:m,y:p,width:v,height:C}=t,E=Math.max(a,u-v),D=Math.max(l,f-C),I=Us(m,a,E),H=Us(p,l,D),W=Math.min(I+v,u)-I,Q=Math.min(H+C,f)-H;return _s(I,H,W,Q)},d5=(t,s,a)=>{const l=te(s.bottom-a.y),u=te(a.bottom-s.y),f=$7(t,u,u,l),m=te(s.right-a.x),p=te(a.right-s.x);return{maxWidth:jO(t,p,p,m),maxHeight:f}},H_=(t,s,a,l)=>{const u=t.bubble,f=u.offset,m=V7(l,t.restriction,f),p=t.x+f.left,v=t.y+f.top,C=_s(p,v,s,a),{originInBounds:E,sizeInBounds:D,visibleW:I,visibleH:H}=__(C,m),W=E&&D,Q=W?C:$_(C,m),se=Q.width>0&&Q.height>0,{maxWidth:X,maxHeight:ie}=d5(t.direction,Q,l),le={rect:Q,maxHeight:ie,maxWidth:X,direction:t.direction,placement:t.placement,classes:{on:u.classesOn,off:u.classesOff},layout:t.label,testY:v};return W||t.alwaysFit?wv.fit(le):wv.nofit(le,I,H,se)},f5=(t,s,a,l,u,f)=>{const m=l.width,p=l.height,v=(E,D,I,H,W)=>{const Q=E(a,l,u,t,f),se=H_(Q,m,p,f);return se.fold(te(se),(X,ie,le,xe)=>(W===xe?le>H||ie>I:!W&&xe)?se:wv.nofit(D,I,H,W))};return Bo(s,(E,D)=>{const I=dt(v,D);return E.fold(te(E),I)},wv.nofit({rect:a,maxHeight:l.height,maxWidth:l.width,direction:ey(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(ct,ct)},m5=["top","bottom","right","left"],e2="data-alloy-transition-timer",g5=(t,s)=>_B(t,s.classes),t2=(t,s,a)=>a.exists(l=>{const u=t.mode;return u==="all"?!0:l[u]!==s[u]}),hE=(t,s)=>{const a=l=>parseFloat(l).toFixed(3);return Yt(s,(l,u)=>{const f=t[u].map(a),m=l.map(a);return!um(f,m)}).isSome()},pE=t=>{const s=f=>{const p=k(t,f).split(/\s*,\s*/);return eo(p,Wi)},a=f=>{if(B(f)&&/^[\d.]+/.test(f)){const m=parseFloat(f);return zo(f,"ms")?m:m*1e3}else return 0},l=s("transition-delay"),u=s("transition-duration");return Bo(u,(f,m,p)=>{const v=a(l[p])+a(m);return Math.max(f,v)},0)},V_=(t,s)=>{const a=bl(),l=bl();let u;const f=C=>{var E;const D=(E=C.raw.pseudoElement)!==null&&E!==void 0?E:"";return vo(C.target,t)&&ji(D)&&An(m5,C.raw.propertyName)},m=C=>{if(me(C)||f(C)){a.clear(),l.clear();const E=C==null?void 0:C.raw.type;(me(E)||E===kh())&&(clearTimeout(u),ls(t,e2),Xi(t,s.classes))}},p=Tr(t,x7(),C=>{f(C)&&(p.unbind(),a.set(Tr(t,kh(),m)),l.set(Tr(t,S7(),m)))}),v=pE(t);requestAnimationFrame(()=>{u=setTimeout(m,v+17),an(t,e2,u)})},z_=(t,s)=>{Am(t,s.classes),er(t,e2).each(a=>{clearTimeout(parseInt(a,10)),ls(t,e2)}),V_(t,s)},U_=(t,s,a,l,u,f)=>{const m=t2(l,u,f);if(m||g5(t,l)){gn(t,"position",a.position);const p=fE(s,t),v=dE(s,{...u,rect:p}),C=ur(m5,E=>v[E]);hE(a,C)&&(b(t,C),m&&z_(t,l),En(t))}else Xi(t,l.classes)},Z_=t=>({width:Math.ceil(vb(t)),height:os(t)}),h5=(t,s,a,l)=>{mt(s,"max-height"),mt(s,"max-width");const u=Z_(s);return f5(s,l.preference,t,u,a,l.bounds)},p5=(t,s)=>{const a=s.classes;Xi(t,a.off),Am(t,a.on)},W_=(t,s,a)=>{const l=a.maxHeightFunction;l(t,s.maxHeight)},j_=(t,s,a)=>{const l=a.maxWidthFunction;l(t,s.maxWidth)},G_=(t,s,a)=>{const l=dE(a.origin,s);a.transition.each(u=>{U_(t,a.origin,l,u,s,a.lastPlacement)}),TD(t,l)},K_=(t,s)=>{oy(t,s.placement)},v5=(t,s,a)=>t[s]===void 0?a:t[s],Y_=(t,s,a,l,u,f,m,p)=>{const v=v5(m,"maxHeightFunction",Qx()),C=v5(m,"maxWidthFunction",ee),E=t.anchorBox,D=t.origin,I={bounds:L_(D,f),origin:D,preference:l,maxHeightFunction:v,maxWidthFunction:C,lastPlacement:u,transition:p};return b5(E,s,a,I)},b5=(t,s,a,l)=>{const u=h5(t,s,a,l);return G_(s,u,l),K_(s,u),p5(s,u),W_(s,u,l),j_(s,u,l),{layout:u.layout,placement:u.placement}},n2=ct,$f=()=>Ti("layouts",[We("onLtr"),We("onRtl"),mo("onBottomLtr"),mo("onBottomRtl")]),o2=(t,s,a,l,u,f,m)=>{const p=m.map(W7).getOr(!1),v=s.layouts.map(H=>H.onLtr(t)),C=s.layouts.map(H=>H.onRtl(t)),E=p?s.layouts.bind(H=>H.onBottomLtr.map(W=>W(t))).or(v).getOr(u):v.getOr(a),D=p?s.layouts.bind(H=>H.onBottomRtl.map(W=>W(t))).or(C).getOr(f):C.getOr(l);return x1(E,D)(t)},X_=(t,s,a)=>{const l=s.hotspot,u=fE(a,l.element),f=o2(t.element,s,Nd(),Yx(),Kx(),Pd(),x.some(s.hotspot.element));return x.some(n2({anchorBox:u,bubble:s.bubble.getOr(qb()),overrides:s.overrides,layouts:f}))};var J_=[We("hotspot"),mo("bubble"),ve("overrides",{}),$f(),Ao("placement",X_)];const ig=(t,s,a)=>{const l=mE(a,s.x,s.y),u=_s(l.left,l.top,s.width,s.height),f=o2(t.element,s,JO(),QO(),JO(),QO(),x.none());return x.some(n2({anchorBox:u,bubble:s.bubble,overrides:s.overrides,layouts:f}))};var Q_=[We("x"),We("y"),ve("height",0),ve("width",0),ve("bubble",qb()),ve("overrides",{}),$f(),Ao("placement",ig)];const y5=Ir.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),lg=t=>t.fold(ct,(s,a,l)=>s.translate(-a,-l)),C5=t=>t.fold(ct,ct),S5=t=>Bo(t,(s,a)=>s.translate(a.left,a.top),Ss(0,0)),Hf=t=>{const s=Ie(t,lg);return S5(s)},x5=t=>{const s=Ie(t,C5);return S5(s)},q_=y5.screen,Hl=y5.absolute,w5=(t,s,a)=>{const l=wl(a.root).dom,u=f=>{const m=ca(f),p=ca(t.element);return vo(m,p)};return x.from(l.frameElement).map(rt.fromDom).filter(u).map(fc)},vE=(t,s,a)=>{const l=ca(t.element),u=da(l),f=w5(t,s,a).getOr(u);return Hl(f,u.left,u.top)},s2=(t,s,a,l)=>{const u=q_(Ss(t,s));return x.some(_r(u,a,l))},E5=(t,s,a,l,u)=>t.map(f=>{const m=[s,f.point],p=Sv(l,()=>x5(m),()=>x5(m),()=>Hf(m)),v=s7(p.left,p.top,f.width,f.height),C=a.showAbove?Kx():Nd(),E=a.showAbove?Pd():Yx(),D=o2(u,a,C,E,C,E,x.none());return n2({anchorBox:v,bubble:a.bubble.getOr(qb()),overrides:a.overrides,layouts:D})}),r2=(t,s,a)=>{const l=vE(t,a,s);return s.node.filter(ks).bind(u=>{const f=u.dom.getBoundingClientRect(),m=s2(f.left,f.top,f.width,f.height),p=s.node.getOr(t.element);return E5(m,l,s,a,p)})};var T5=[We("node"),We("root"),mo("bubble"),$f(),ve("overrides",{}),ve("showAbove",!1),Ao("placement",r2)];const a2=(t,s)=>({element:t,offset:s}),e$=(t,s)=>{const a=ua(t);if(a.length===0)return a2(t,s);if(s<a.length)return a2(a[s],0);{const l=a[a.length-1],u=pd(l)?qS(l).length:ua(l).length;return a2(l,u)}},Ev=(t,s)=>pd(t)?a2(t,s):e$(t,s),Tv=t=>t.foffset!==void 0,bE=(t,s)=>s.getSelection.getOrThunk(()=>()=>QB(t))().map(l=>{if(Tv(l)){const u=Ev(l.start,l.soffset),f=Ev(l.finish,l.foffset);return A1.range(u.element,u.offset,f.element,f.offset)}else return l}),A5=(t,s,a)=>{const l=wl(s.root).dom,u=vE(t,a,s),f=bE(l,s).bind(v=>{if(Tv(v))return qB(l,A1.exactFromRange(v)).orThunk(()=>{const E=rt.fromText(rc);wm(v.start,E);const D=gO(l,A1.exact(E,0,E,1));return dc(E),D}).bind(E=>s2(E.left,E.top,E.width,E.height));{const C=ot(v,D=>D.dom.getBoundingClientRect()),E={left:Math.min(C.firstCell.left,C.lastCell.left),right:Math.max(C.firstCell.right,C.lastCell.right),top:Math.min(C.firstCell.top,C.lastCell.top),bottom:Math.max(C.firstCell.bottom,C.lastCell.bottom)};return s2(E.left,E.top,E.right-E.left,E.bottom-E.top)}}),p=bE(l,s).bind(v=>Tv(v)?oi(v.start)?x.some(v.start):Un(v.start):x.some(v.firstCell)).getOr(t.element);return E5(f,u,s,a,p)};var O5=[mo("getSelection"),We("root"),mo("bubble"),$f(),ve("overrides",{}),ve("showAbove",!1),Ao("placement",A5)];const i2="link-layout",l2=t=>t.x+t.width,yE=(t,s)=>t.x-s.width,k5=(t,s)=>t.y-s.height+t.height,D5=t=>t.y,M5=(t,s,a)=>ta(l2(t),D5(t),a.southeast(),ey(),"southeast",Or(t,{left:0,top:2}),i2),c2=(t,s,a)=>ta(yE(t,s),D5(t),a.southwest(),Vx(),"southwest",Or(t,{right:1,top:2}),i2),R5=(t,s,a)=>ta(l2(t),k5(t,s),a.northeast(),zx(),"northeast",Or(t,{left:0,bottom:3}),i2),rp=(t,s,a)=>ta(yE(t,s),k5(t,s),a.northwest(),Ux(),"northwest",Or(t,{right:1,bottom:3}),i2),Av=()=>[M5,c2,R5,rp],CE=()=>[c2,M5,rp,R5],P5=(t,s,a)=>{const l=fE(a,s.item.element),u=o2(t.element,s,Av(),CE(),Av(),CE(),x.none());return x.some(n2({anchorBox:l,bubble:qb(),overrides:s.overrides,layouts:u}))};var t$=[We("item"),$f(),ve("overrides",{}),Ao("placement",P5)],n$=wi("type",{selection:O5,node:T5,hotspot:J_,submenu:t$,makeshift:Q_});const o$=[Ei("classes",Gs),Es("mode","all",["all","layout","placement"])],s$=[ve("useFixed",it),mo("getBounds")],SE=[Qi("anchor",n$),Ti("transition",o$)],N5=()=>{const t=document.documentElement;return xv(0,0,t.clientWidth,t.clientHeight)},I5=t=>{const s=fc(t.element),a=t.element.dom.getBoundingClientRect();return F_(s.left,s.top,a.width,a.height)},xE=(t,s,a,l,u,f)=>{const m=u5(s.anchorBox,t);return Y_(m,l.element,s.bubble,s.layouts,u,a,s.overrides,f)},r$=(t,s,a,l,u)=>{const f=x.none();wE(t,s,a,l,u,f)},wE=(t,s,a,l,u,f)=>{const m=ri("placement.info",on(SE),u),p=m.anchor,v=l.element,C=a.get(l.uid);qh(()=>{gn(v,"position","fixed");const E=Y(v,"visibility");gn(v,"visibility","hidden");const D=s.useFixed()?N5():I5(t);p.placement(t,p,D).each(I=>{const H=f.orThunk(()=>s.getBounds.map(St)),W=xE(D,I,H,l,C,m.transition);a.set(l.uid,W)}),E.fold(()=>{mt(v,"visibility")},I=>{gn(v,"visibility",I)}),Y(v,"left").isNone()&&Y(v,"top").isNone()&&Y(v,"right").isNone()&&Y(v,"bottom").isNone()&&Sa(Y(v,"position"),"fixed")&&mt(v,"position")},v)};var a$=Object.freeze({__proto__:null,position:r$,positionWithinBounds:wE,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,l)=>{const u=l.element;Qe(["position","left","right","top","bottom"],f=>mt(u,f)),U7(u),a.clear(l.uid)}}),l$=Object.freeze({__proto__:null,init:()=>{let t={};return ki({readState:()=>t,clear:u=>{fe(u)?delete t[u]:t={}},set:(u,f)=>{t[u]=f},get:u=>$e(t,u)})}});const va=Vr({fields:s$,name:"positioning",active:B_,apis:a$,state:l$}),EE=(t,s)=>s.universal?t:eo(t,a=>An(s.channels,a));var B5=Object.freeze({__proto__:null,events:t=>Jo([Le(Bm(),(s,a)=>{const l=t.channels,u=Re(l),f=a,m=EE(u,f);Qe(m,p=>{const v=l[p],C=v.schema,E=ri("channel["+p+`] data
Receiver: `+Co(s.element),C,f.data);v.onReceive(s,E)})})])}),u$=[Qi("channels",TO(Sn.value,Ji([gr("onReceive"),ve("schema",pc())])))];const Ya=Vr({fields:u$,name:"receiving",active:B5});var d$=Object.freeze({__proto__:null,events:(t,s)=>{const a=(l,u)=>{t.updateState.each(f=>{const m=f(l,u);s.set(m)}),t.renderComponents.each(f=>{const m=f(u,s.get());(t.reuseDom?oD:ww)(l,m)})};return Jo([Le(Bm(),(l,u)=>{const f=u;if(!f.universal){const m=t.channel;An(f.channels,m)&&a(l,f.data)}}),$o((l,u)=>{t.initialData.each(f=>{a(l,f)})})])}}),f$=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),m$=[We("channel"),mo("renderComponents"),mo("updateState"),mo("initialData"),qr("reuseDom",!0)],TE=Object.freeze({__proto__:null,init:()=>{const t=Rt(x.none()),s=()=>t.set(x.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Mi=Vr({fields:m$,name:"reflecting",active:d$,apis:f$,state:TE}),Ov=(t,s,a,l)=>{a.get().each(m=>{li(t)});const u=s.getAttachPoint(t);Oc(u,t);const f=t.getSystem().build(l);return Oc(t,f),a.set(f),f},L5=(t,s,a,l)=>{const u=Ov(t,s,a,l);return s.onOpen(t,u),u},h$=(t,s,a,l)=>a.get().map(()=>Ov(t,s,a,l)),p$=(t,s,a,l,u)=>{u2(t,s),L5(t,s,a,l),u(),H5(t,s)},F5=(t,s,a)=>{a.get().each(l=>{li(t),rr(t),s.onClose(t,l),a.clear()})},_5=(t,s,a)=>a.isOpen(),v$=(t,s,a,l)=>_5(t,s,a)&&a.get().exists(u=>s.isPartOf(t,u,l)),$5=(t,s,a)=>a.get(),b$=(t,s,a,l)=>{Y(t.element,s).fold(()=>{ls(t.element,a)},u=>{an(t.element,a,u)}),gn(t.element,s,l)},y$=(t,s,a)=>{er(t.element,a).fold(()=>mt(t.element,s),l=>gn(t.element,s,l))},u2=(t,s,a)=>{const l=s.getAttachPoint(t);gn(t.element,"position",va.getMode(l)),b$(t,"visibility",s.cloakVisibilityAttr,"hidden")},cg=t=>yn(["top","left","right","bottom"],s=>Y(t,s).isSome()),H5=(t,s,a)=>{cg(t.element)||mt(t.element,"position"),y$(t,"visibility",s.cloakVisibilityAttr)};var C$=Object.freeze({__proto__:null,cloak:u2,decloak:H5,open:L5,openWhileCloaked:p$,close:F5,isOpen:_5,isPartOf:v$,getState:$5,setContent:h$}),z5=Object.freeze({__proto__:null,events:(t,s)=>Jo([Le(Hb(),(a,l)=>{F5(a,t,s)})])}),S$=[oo("onOpen"),oo("onClose"),We("isPartOf"),We("getAttachPoint"),ve("cloakVisibilityAttr","data-precloak-visibility")],U5=Object.freeze({__proto__:null,init:()=>{const t=dn(),s=te("not-implemented");return ki({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Qn=Vr({fields:S$,name:"sandboxing",active:z5,apis:C$,state:U5}),ap=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),Yu=t=>t.dimension.property,zd=(t,s)=>t.dimension.getDimension(s),d2=(t,s)=>{const a=ap(t,s);Xi(a,[s.shrinkingClass,s.growingClass])},f2=(t,s)=>{Yo(t.element,s.openClass),xs(t.element,s.closedClass),gn(t.element,Yu(s),"0px"),En(t.element)},AE=(t,s)=>{Yo(t.element,s.closedClass),xs(t.element,s.openClass),mt(t.element,Yu(s))},ip=(t,s,a,l)=>{a.setCollapsed(),gn(t.element,Yu(s),zd(s,t.element)),d2(t,s),f2(t,s),s.onStartShrink(t),s.onShrunk(t)},x$=(t,s,a,l)=>{const u=l.getOrThunk(()=>zd(s,t.element));a.setCollapsed(),gn(t.element,Yu(s),u),En(t.element);const f=ap(t,s);Yo(f,s.growingClass),xs(f,s.shrinkingClass),f2(t,s),s.onStartShrink(t)},Z5=(t,s,a)=>{const l=zd(s,t.element);(l==="0px"?ip:x$)(t,s,a,x.some(l))},m2=(t,s,a)=>{const l=ap(t,s),u=Jr(l,s.shrinkingClass),f=zd(s,t.element);AE(t,s);const m=zd(s,t.element);(u?()=>{gn(t.element,Yu(s),f),En(t.element)}:()=>{f2(t,s)})(),Yo(l,s.shrinkingClass),xs(l,s.growingClass),AE(t,s),gn(t.element,Yu(s),m),a.setExpanded(),s.onStartGrow(t)},OE=(t,s,a)=>{if(a.isExpanded()){mt(t.element,Yu(s));const l=zd(s,t.element);gn(t.element,Yu(s),l)}},w$=(t,s,a)=>{a.isExpanded()||m2(t,s,a)},kE=(t,s,a)=>{a.isExpanded()&&Z5(t,s,a)},E$=(t,s,a)=>{a.isExpanded()&&ip(t,s,a)},T$=(t,s,a)=>a.isExpanded(),DE=(t,s,a)=>a.isCollapsed(),W5=(t,s,a)=>{const l=ap(t,s);return Jr(l,s.growingClass)===!0},j5=(t,s,a)=>{const l=ap(t,s);return Jr(l,s.shrinkingClass)===!0};var A$=Object.freeze({__proto__:null,refresh:OE,grow:w$,shrink:kE,immediateShrink:E$,hasGrown:T$,hasShrunk:DE,isGrowing:W5,isShrinking:j5,isTransitioning:(t,s,a)=>W5(t,s)||j5(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?Z5:m2)(t,s,a)},disableTransitions:d2,immediateGrow:(t,s,a)=>{a.isExpanded()||(AE(t,s),gn(t.element,Yu(s),zd(s,t.element)),d2(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),O$=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const l=s.expanded;return Tc(l?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Nm(s.dimension.property,"0px")})},events:(t,s)=>Jo([Vh(kh(),(a,l)=>{l.event.raw.propertyName===t.dimension.property&&(d2(a,t),s.isExpanded()&&mt(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),k$=[We("closedClass"),We("openClass"),We("shrinkingClass"),We("growingClass"),mo("getAnimationRoot"),oo("onShrunk"),oo("onStartShrink"),oo("onGrown"),oo("onStartGrow"),ve("expanded",!1),Qi("dimension",wi("property",{width:[Ao("property","width"),Ao("getDimension",t=>nr(t)+"px")],height:[Ao("property","height"),Ao("getDimension",t=>zn(t)+"px")]}))],D$=Object.freeze({__proto__:null,init:t=>{const s=Rt(t.expanded),a=()=>"expanded: "+s.get();return ki({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:dt(s.set,!1),setExpanded:dt(s.set,!0),readState:a})}});const Pa=Vr({fields:k$,name:"sliding",active:O$,apis:A$,state:D$});var M$=Object.freeze({__proto__:null,events:(t,s)=>{const l=t.stream.streams.setup(t,s);return Jo([Le(t.event,l),eu(()=>s.cancel())].concat(t.cancelEvent.map(u=>[Le(u,()=>s.cancel())]).getOr([])))}});const G5=t=>{const s=Rt(null);return ki({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:f=>{s.set(f)},cancel:()=>{const f=s.get();f!==null&&f.cancel()}})};var P$=Object.freeze({__proto__:null,throttle:G5,init:t=>t.stream.streams.state(t)});const N$=(t,s)=>{const a=t.stream,l=sc(t.onStream,a.delay);return s.setTimer(l),(u,f)=>{l.throttle(u,f),a.stopEvent&&f.stop()}};var I$=[Qi("stream",wi("mode",{throttle:[We("delay"),ve("stopEvent",!0),Ao("streams",{setup:N$,state:G5})]})),ve("event","input"),mo("cancelEvent"),gr("onStream")];const ME=Vr({fields:I$,name:"streaming",active:M$,state:P$});var B$=Object.freeze({__proto__:null,exhibit:(t,s)=>Tc({attributes:Oh([{key:s.tabAttr,value:"true"}])})}),RE=[ve("tabAttr","data-alloy-tabstop")];const Mo=Vr({fields:RE,name:"tabstopping",active:B$}),L$=(t,s,a)=>{const l=s.aria;l.update(t,l,a.get())},F$=(t,s,a)=>{s.toggleClass.each(l=>{a.get()?xs(t.element,l):Yo(t.element,l)})},kv=(t,s,a,l)=>{const u=a.get();a.set(l),F$(t,s,a),L$(t,s,a),u!==l&&s.onToggled(t,l)},K5=(t,s,a)=>{kv(t,s,a,!a.get())},_$=(t,s,a)=>{kv(t,s,a,!0)},$$=(t,s,a)=>{kv(t,s,a,!1)},H$=(t,s,a)=>a.get(),Y5=(t,s,a)=>{kv(t,s,a,s.selected)};var V$=Object.freeze({__proto__:null,onLoad:Y5,toggle:K5,isOn:H$,on:_$,off:$$,set:kv}),z$=Object.freeze({__proto__:null,exhibit:()=>Tc({}),events:(t,s)=>{const a=nL(t,s,K5),l=nw(t,s,Y5);return Jo(Ot([t.toggleOnExecute?[a]:[],[l]]))}});const X5=(t,s,a)=>{an(t.element,"aria-pressed",a),s.syncWithExpanded&&J5(t,s,a)},U$=(t,s,a)=>{an(t.element,"aria-selected",a)},Z$=(t,s,a)=>{an(t.element,"aria-checked",a)},J5=(t,s,a)=>{an(t.element,"aria-expanded",a)};var g2=[ve("selected",!1),mo("toggleClass"),ve("toggleOnExecute",!0),oo("onToggled"),Cc("aria",{mode:"none"},wi("mode",{pressed:[ve("syncWithExpanded",!1),Ao("update",X5)],checked:[Ao("update",Z$)],expanded:[Ao("update",J5)],selected:[Ao("update",U$)],none:[Ao("update",ee)]}))];const kn=Vr({fields:g2,name:"toggling",active:z$,apis:V$,state:iL(!1)}),h2=Ct("tooltip.exclusive"),Dv=Ct("tooltip.show"),Mv=Ct("tooltip.hide"),Rv=Ct("tooltip.immediateHide"),ug=Ct("tooltip.immediateShow"),PE=(t,s,a)=>{t.getSystem().broadcastOn([h2],{})};var IE=Object.freeze({__proto__:null,hideAllExclusive:PE,immediateOpenClose:(t,s,a,l)=>Zn(t,l?ug:Rv),isEnabled:(t,s,a)=>a.isEnabled(),setComponents:(t,s,a,l)=>{a.getTooltip().each(u=>{u.getSystem().isConnected()&&fn.set(u,l)})},setEnabled:(t,s,a,l)=>a.setEnabled(l)}),j$=Object.freeze({__proto__:null,events:(t,s)=>{const a=m=>{s.getTooltip().each(p=>{p.getSystem().isConnected()&&(rr(p),t.onHide(m,p),s.clearTooltip())}),s.clearTimer()},l=m=>{if(!s.isShowing()&&s.isEnabled()){PE(m);const p=t.lazySink(m).getOrDie(),v=m.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Jo(t.mode==="normal"?[Le(xc(),C=>{Zn(m,Dv)}),Le(N1(),C=>{Zn(m,Mv)})]:[]),behaviours:qe([fn.config({})])});s.setTooltip(v),Oc(p,v),t.onShow(m,v),va.position(p,v,{anchor:t.anchor(m)})}},u=m=>{s.getTooltip().each(p=>{const v=t.lazySink(m).getOrDie();va.position(v,p,{anchor:t.anchor(m)})})},f=()=>{switch(t.mode){case"normal":return[Le(ma(),m=>{Zn(m,ug)}),Le(B1(),m=>{Zn(m,Rv)}),Le(xc(),m=>{Zn(m,Dv)}),Le(N1(),m=>{Zn(m,Mv)})];case"follow-highlight":return[Le(zb(),(m,p)=>{Zn(m,Dv)}),Le(Ex(),m=>{Zn(m,Mv)})];case"children-normal":return[Le(ma(),(m,p)=>{Yr(m.element).each(v=>{hd(p.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Zn(m,ug)},C=>{s.isShowing()&&(t.onShow(m,C),u(m))})})}),Le(B1(),m=>{Yr(m.element).fold(()=>{Zn(m,Rv)},ee)}),Le(xc(),m=>{ko(m.element,"[data-mce-tooltip]:hover").each(p=>{s.getTooltip().fold(()=>{Zn(m,Dv)},v=>{s.isShowing()&&(t.onShow(m,v),u(m))})})}),Le(N1(),m=>{ko(m.element,"[data-mce-tooltip]:hover").fold(()=>{Zn(m,Mv)},ee)})];default:return[Le(ma(),(m,p)=>{Yr(m.element).each(v=>{hd(p.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Zn(m,ug)},C=>{s.isShowing()&&(t.onShow(m,C),u(m))})})}),Le(B1(),m=>{Yr(m.element).fold(()=>{Zn(m,Rv)},ee)})]}};return Jo(Ot([[ew(m=>{t.onSetup(m)}),Le(Dv,m=>{s.resetTimer(()=>{l(m)},t.delayForShow())}),Le(Mv,m=>{s.resetTimer(()=>{a(m)},t.delayForHide())}),Le(ug,m=>{s.resetTimer(()=>{l(m)},0)}),Le(Rv,m=>{s.resetTimer(()=>{a(m)},0)}),Le(Bm(),(m,p)=>{const v=p;v.universal||An(v.channels,h2)&&a(m)}),eu(m=>{a(m)})],f()]))}}),G$=[We("lazySink"),We("tooltipDom"),ve("exclusive",!0),ve("tooltipComponents",[]),Zo("delayForShow",te(300)),Zo("delayForHide",te(100)),Zo("onSetup",ee),Es("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),ve("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:te([zs,sr,Ds,Hr,Vs,hr]),onRtl:te([zs,sr,Ds,Hr,Vs,hr])},bubble:ha(0,-2,{})})),oo("onHide"),oo("onShow")],Pv=Object.freeze({__proto__:null,init:()=>{const t=Rt(!0),s=dn(),a=dn(),l=()=>{s.on(clearTimeout)},u=(m,p)=>{l(),s.set(setTimeout(m,p))},f=te("not-implemented");return ki({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:l,resetTimer:u,readState:f,isEnabled:()=>t.get(),setEnabled:m=>t.set(m)})}});const qo=Vr({fields:G$,name:"tooltipping",active:j$,state:Pv,apis:IE});var Y$=Object.freeze({__proto__:null,events:()=>Jo([rk(IO(),et)]),exhibit:()=>Tc({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const dg=Vr({fields:[],name:"unselecting",active:Y$}),BE=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return Bo(s,(a,l)=>l.name==="class"?a:{...a,[l.name]:l.value},{})},X$=t=>Array.prototype.slice.call(t.dom.classList,0),Xu=t=>{const s=rt.fromHtml(t),a=ua(s),l=BE(s),u=X$(s),f=a.length===0?{}:{innerHtml:bh(s)};return{tag:xl(s),classes:u,attributes:l,...f}},lo=t=>{const s=_D(t)&&To(t,"uid")?t.uid:ep("memento");return{get:f=>f.getSystem().getByUid(s).getOrDie(),getOpt:f=>f.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}},vr=F7,nu=Lx,Ju=te("dismiss.popups"),Vf=te("reposition.popups"),LE=te("mouse.released"),J$=(t,s)=>{const a=Rt(!1),l=Rt(!1);return{stop:()=>{a.set(!0)},cut:()=>{l.set(!0)},isStopped:a.get,isCut:l.get,event:t,setSource:s.set,getSource:s.get}},Q$=t=>{const s=Rt(!1);return{stop:()=>{s.set(!0)},cut:ee,isStopped:s.get,isCut:it,event:t,setSource:Tt("Cannot set source of a broadcasted event"),getSource:Tt("Cannot get source of a broadcasted event")}},q$=t=>t.raw.which===dL[0]&&!An(["input","textarea"],xl(t.target))&&!E1(t.target,'[contenteditable="true"]'),eM=(t,s)=>{const a={stopBackspace:!0,...s},l=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],u=k7(a),f=Ie(l.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),H=>Tr(t,H,W=>{u.fireIfReady(W,H).each(se=>{se&&W.kill()}),a.triggerEvent(H,W)&&W.kill()})),m=dn(),p=Tr(t,"paste",H=>{u.fireIfReady(H,"paste").each(Q=>{Q&&H.kill()}),a.triggerEvent("paste",H)&&H.kill(),m.set(setTimeout(()=>{a.triggerEvent(Sx(),H)},0))}),v=Tr(t,"keydown",H=>{a.triggerEvent("keydown",H)?H.kill():a.stopBackspace&&q$(H)&&H.prevent()}),C=Tr(t,"focusin",H=>{a.triggerEvent("focusin",H)&&H.kill()}),E=dn(),D=Tr(t,"focusout",H=>{a.triggerEvent("focusout",H)&&H.kill(),E.set(setTimeout(()=>{a.triggerEvent(B1(),H)},0))});return{unbind:()=>{Qe(f,H=>{H.unbind()}),v.unbind(),C.unbind(),D.unbind(),p.unbind(),m.on(clearTimeout),E.on(clearTimeout)}}},FE=(t,s)=>{const a=$e(t,"target").getOr(s);return Rt(a)},Nv=Ir.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),_E=(t,s,a,l,u,f)=>{const m=t(s,l),p=J$(a,u);return m.fold(()=>(f.logEventNoHandlers(s,l),Nv.complete()),v=>{const C=v.descHandler;return Xm(C)(p),p.isStopped()?(f.logEventStopped(s,v.element,C.purpose),Nv.stopped()):p.isCut()?(f.logEventCut(s,v.element,C.purpose),Nv.complete()):wa(v.element).fold(()=>(f.logNoParent(s,v.element,C.purpose),Nv.complete()),D=>(f.logEventResponse(s,v.element,C.purpose),Nv.resume(D)))})},lp=(t,s,a,l,u,f)=>_E(t,s,a,l,u,f).fold(et,m=>lp(t,s,a,m,u,f),it),tM=(t,s,a,l,u)=>{const f=FE(a,l);return _E(t,s,a,l,f,u)},eH=(t,s,a)=>{const l=Q$(s);return Qe(t,u=>{const f=u.descHandler;Xm(f)(l)}),l.isStopped()},tH=(t,s,a,l)=>$E(t,s,a,a.target,l),$E=(t,s,a,l,u)=>{const f=FE(a,l);return lp(t,s,a,l,f,u)},nH=(t,s)=>({element:t,descHandler:s}),oH=(t,s)=>({id:t,descHandler:s}),nM=()=>{const t={},s=(m,p,v)=>{ze(v,(C,E)=>{const D=t[E]!==void 0?t[E]:{};D[p]=uD(C,m),t[E]=D})},a=(m,p)=>uv(p).bind(v=>$e(m,v)).map(v=>nH(p,v));return{registerId:s,unregisterId:m=>{ze(t,(p,v)=>{yt(p,m)&&delete p[m]})},filterByType:m=>$e(t,m).map(p=>wn(p,(v,C)=>oH(C,v))).getOr([]),find:(m,p,v)=>$e(t,p).bind(C=>T1(v,E=>a(C,E),m))}},oM=()=>{const t=nM(),s={},a=C=>{const E=C.element;return uv(E).getOrThunk(()=>hF("uid-",C.element))},l=(C,E)=>{const D=s[E];if(D===C)f(C);else throw new Error('The tagId "'+E+'" is already used by: '+Co(D.element)+`
Cannot use it for: `+Co(C.element)+`
The conflicting element is`+(ks(D.element)?" ":" not ")+"already in the DOM")},u=C=>{const E=a(C);To(s,E)&&l(C,E);const D=[C];t.registerId(D,E,C.events),s[E]=C},f=C=>{uv(C.element).each(E=>{delete s[E],t.unregisterId(E)})};return{find:(C,E,D)=>t.find(C,E,D),filter:C=>t.filterByType(C),register:u,unregister:f,getById:C=>$e(s,C)}},p2=t=>{const s=X=>wa(t.element).fold(et,ie=>vo(X,ie)),a=oM(),l=(X,ie)=>a.find(s,X,ie),u=eM(t.element,{triggerEvent:(X,ie)=>Ax(X,ie.target,le=>tH(l,X,ie,le))}),f={debugInfo:te("real"),triggerEvent:(X,ie,le)=>{Ax(X,ie,xe=>$E(l,X,le,ie,xe))},triggerFocus:(X,ie)=>{uv(X).fold(()=>{Ls(X)},le=>{Ax(Hu(),X,xe=>(tM(l,Hu(),{originator:ie,kill:ee,prevent:ee,target:X},X,xe),!1))})},triggerEscape:(X,ie)=>{f.triggerEvent("keydown",X.element,ie.event)},getByUid:X=>Q(X),getByDom:X=>se(X),build:pa,buildOrPatch:By,addToGui:X=>{v(X)},removeFromGui:X=>{C(X)},addToWorld:X=>{m(X)},removeFromWorld:X=>{p(X)},broadcast:X=>{I(X)},broadcastOn:(X,ie)=>{H(X,ie)},broadcastEvent:(X,ie)=>{W(X,ie)},isConnected:et},m=X=>{X.connect(f),pd(X.element)||(a.register(X),Qe(X.components(),m),f.triggerEvent(Fm(),X.element,{target:X.element}))},p=X=>{pd(X.element)||(Qe(X.components(),p),a.unregister(X)),X.disconnect()},v=X=>{Oc(t,X)},C=X=>{rr(X)},E=()=>{u.unbind(),dc(t.element)},D=X=>{const ie=a.filter(Bm());Qe(ie,le=>{const xe=le.descHandler;Xm(xe)(X)})},I=X=>{D({universal:!0,data:X})},H=(X,ie)=>{D({universal:!1,channels:X,data:ie})},W=(X,ie)=>{const le=a.filter(X);return eH(le,ie)},Q=X=>a.getById(X).fold(()=>Sn.error(new Error('Could not find component with uid: "'+X+'" in system.')),Sn.value),se=X=>{const ie=uv(X).getOr("not found");return Q(ie)};return m(t),{root:t,element:t.element,destroy:E,add:v,remove:C,getByUid:Q,getByDom:se,addToWorld:m,removeFromWorld:p,broadcast:I,broadcastOn:H,broadcastEvent:W}},HE=()=>{const t=(s,a)=>{a.stop(),Zm(s)};return[Le(Ef(),t),Le(Lm(),t),Nf(wd()),Nf(Ai())]},v2=t=>{const s=a=>Bd((l,u)=>{a(l),u.stop()});return Jo(Ot([t.map(s).toArray(),HE()]))},Dr=ol({name:"Button",factory:t=>{const s=v2(t.action),a=t.dom.tag,l=f=>$e(t.dom,"attributes").bind(m=>$e(m,f)),u=()=>{if(a==="button"){const f=l("type").getOr("button"),m=l("role").map(p=>({role:p})).getOr({});return{type:f,...m}}else return{role:t.role.getOr(l("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:Dc.augment(t.buttonBehaviours,[tn.config({}),It.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:u()},eventOrder:t.eventOrder}},configFields:[ve("uid",void 0),We("dom"),ve("components",[]),Dc.field("buttonBehaviours",[tn,It]),mo("action"),mo("role"),ve("eventOrder",{})]}),VE=te([ve("shell",!1),We("makeItem"),ve("setupItem",ee),Dc.field("listBehaviours",[fn])]),rM=Ys({name:"items",overrides:()=>({behaviours:qe([fn.config({})])})}),aM=te([rM]),iM=te("CustomList"),sH=(t,s,a,l)=>{const u=(p,v)=>{m(p).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},C=>{const E=fn.contents(C),D=v.length,I=D-E.length,H=I>0?Oo(I,()=>t.makeItem()):[],W=E.slice(D);Qe(W,se=>fn.remove(C,se)),Qe(H,se=>fn.append(C,se));const Q=fn.contents(C);Qe(Q,(se,X)=>{t.setupItem(p,se,v[X],X)})})},f=t.shell?{behaviours:[fn.config({})],components:[]}:{behaviours:[],components:s},m=p=>t.shell?x.some(p):Do(p,t,"items");return{uid:t.uid,dom:t.dom,components:f.components,behaviours:zr(t.listBehaviours,f.behaviours),apis:{setItems:u}}},b2=Ra({name:iM(),configFields:VE(),partFields:aM(),factory:sH,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),Iv="aria-controls",lM=t=>aO(t,a=>{if(!oi(a))return!1;const l=qs(a,"id");return l!==void 0&&l.indexOf(Iv)>-1}).bind(a=>{const l=qs(a,"id"),u=dr(a);return ko(u,`[${Iv}="${l}"]`)}),zE=()=>{const t=Ct(Iv);return{id:t,link:l=>{an(l,Iv,t)},unlink:l=>{ls(l,Iv)}}},fg=(t,s)=>lM(s).exists(a=>mg(t,a)),mg=(t,s)=>sx(s,a=>vo(a,t.element),it)||fg(t,s),y2="alloy.item-hover",Bv="alloy.item-focus",cM="alloy.item-toggled",UE=t=>{(Yr(t.element).isNone()||tn.isFocused(t))&&(tn.isFocused(t)||tn.focus(t),Wt(t,y2,{item:t}))},ZE=t=>{Wt(t,Bv,{item:t})},uM=(t,s)=>{Wt(t,cM,{item:t,state:s})},C2=te(y2),dM=te(Bv),rH=te(cM),fM=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),ct),mM=(t,s)=>({aria:{mode:s?"selected":"checked"},...Lo(t,(a,l)=>l!=="exclusive"),onToggled:(a,l)=>{ye(t.onToggled)&&t.onToggled(a,l),uM(a,l)}}),gM=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:fM(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Dc.augment(t.itemBehaviours,[t.toggling.fold(kn.revoke,s=>kn.config(mM(s,t.role.exists(a=>a==="option")))),tn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{ZE(s)}}),It.config({mode:"execution"}),xt.config({store:{mode:"memory",initialValue:t.data}}),cn("item-type-events",[...HE(),Le(xc(),UE),Le(Dh(),tn.focus)])]),components:t.components,eventOrder:t.eventOrder});var iH=[We("data"),We("components"),We("dom"),ve("hasSubmenu",!1),mo("toggling"),mo("role"),Dc.field("itemBehaviours",[kn,tn,It,xt]),ve("ignoreFocus",!1),ve("domModification",{}),Ao("builder",gM),ve("eventOrder",{})];const hM=t=>({dom:t.dom,components:t.components,events:Jo([ak(Dh())])});var lH=[We("dom"),We("components"),Ao("builder",hM)];const WE=te("item-widget"),jE=te([or({name:"widget",overrides:t=>({behaviours:qe([xt.config({store:{mode:"manual",getValue:s=>t.data,setValue:ee}})])})})]),pM=t=>{const s=Df(WE(),t,jE()),a=Md(WE(),t,s.internals()),l=f=>Do(f,t,"widget").map(m=>(It.focusIn(m),m)),u=(f,m)=>jh(m.event.target)?x.none():(t.autofocus&&m.setSource(f.element),x.none());return{dom:t.dom,components:a,domModification:t.domModification,events:Jo([Bd((f,m)=>{l(f).each(p=>{m.stop()})}),Le(xc(),UE),Le(Dh(),(f,m)=>{t.autofocus?l(f):tn.focus(f)})]),behaviours:Dc.augment(t.widgetBehaviours,[xt.config({store:{mode:"memory",initialValue:t.data}}),tn.config({ignore:t.ignoreFocus,onFocus:f=>{ZE(f)}}),It.config({mode:"special",focusIn:t.autofocus?f=>{l(f)}:hy(),onLeft:u,onRight:u,onEscape:(f,m)=>!tn.isFocused(f)&&!t.autofocus?(tn.focus(f),x.some(!0)):(t.autofocus&&m.setSource(f.element),x.none())})])}};var vM=[We("uid"),We("data"),We("components"),We("dom"),ve("autofocus",!1),ve("ignoreFocus",!1),Dc.field("widgetBehaviours",[xt,tn,It]),ve("domModification",{}),Jb(jE()),Ao("builder",pM)];const cH=wi("type",{widget:vM,item:iH,separator:lH}),uH=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),dH=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),fH=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),mH=te([H1({factory:{sketch:t=>{const s=ri("menu.spec item",cH,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>yt(s,"uid")?s:{...s,uid:ep("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),x2=te([$s("role"),We("value"),We("items"),We("dom"),We("components"),ve("eventOrder",{}),pr("menuBehaviours",[io,xt,Wn,It]),Cc("movement",{mode:"menu",moveOnTab:!0},wi("mode",{grid:[Ph(),Ao("config",uH)],matrix:[Ao("config",dH),We("rowSelector"),ve("previousSelector",x.none)],menu:[ve("moveOnTab",!0),Ao("config",fH)]})),KK(),ve("fakeFocus",!1),ve("focusManager",sw()),oo("onHighlight"),oo("onDehighlight"),ve("showMenuRole",!0)]),bM=te("alloy.menu-focus"),yM=(t,s)=>{const a=Xo(t.element,'[role="menuitemradio"][aria-checked="true"]');Qe(a,l=>{vo(l,s.element)||t.getSystem().getByDom(l).each(u=>{kn.off(u)})})},gH=(t,s,a,l)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:zr(t.menuBehaviours,[io.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),xt.config({store:{mode:"memory",initialValue:t.value}}),Wn.config({find:x.some}),It.config(t.movement.config(t,t.movement))]),events:Jo([Le(dM(),(u,f)=>{const m=f.event;u.getSystem().getByDom(m.target).each(p=>{io.highlight(u,p),f.stop(),Wt(u,bM(),{menu:u,item:p})})}),Le(C2(),(u,f)=>{const m=f.event.item;io.highlight(u,m)}),Le(rH(),(u,f)=>{const{item:m,state:p}=f.event;p&&qs(m.element,"role")==="menuitemradio"&&yM(u,m)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),Qu=Ra({name:"Menu",configFields:x2(),partFields:mH(),factory:gH}),CM=t=>en(t,(s,a)=>({k:s,v:a})),SM=(t,s,a,l)=>$e(a,l).bind(u=>$e(t,u).bind(f=>{const m=SM(t,s,a,f);return x.some([f].concat(m))})).getOr([]),xM=(t,s)=>{const a={};ze(t,(m,p)=>{Qe(m,v=>{a[v]=p})});const l=s,u=CM(s),f=ot(u,(m,p)=>[p].concat(SM(a,l,u,p)));return ot(a,m=>$e(f,m).getOr([m]))},wM=()=>{const t=Rt({}),s=Rt({}),a=Rt({}),l=dn(),u=Rt({}),f=()=>{t.set({}),s.set({}),a.set({}),l.clear()},m=()=>l.get().isNone(),p=(Me,vt)=>{s.set({...s.get(),[Me]:{type:"prepared",menu:vt}})},v=(Me,vt,Ge,Pe)=>{l.set(Me),t.set(Ge),s.set(vt),u.set(Pe);const wt=xM(Pe,Ge);a.set(wt)},C=Me=>Yt(t.get(),(vt,Ge)=>vt===Me),E=(Me,vt,Ge)=>Q(Me).bind(Pe=>C(Me).bind(wt=>vt(wt).map(Kt=>({triggeredMenu:Pe,triggeringItem:Kt,triggeringPath:Ge})))),D=(Me,vt)=>{const Ge=eo(X(Me).toArray(),Pe=>Q(Pe).isSome());return $e(a.get(),Me).bind(Pe=>{const wt=Sr(Ge.concat(Pe)),Kt=ke(wt,(Ft,_n)=>E(Ft,vt,wt.slice(0,_n+1)).fold(()=>Sa(l.get(),Ft)?[]:[x.none()],rn=>[x.some(rn)]));return dm(Kt)})},I=Me=>$e(t.get(),Me).map(vt=>{const Ge=$e(a.get(),Me).getOr([]);return[vt].concat(Ge)}),H=Me=>$e(a.get(),Me).bind(vt=>vt.length>1?x.some(vt.slice(1)):x.none()),W=Me=>$e(a.get(),Me),Q=Me=>se(Me).bind(GE),se=Me=>$e(s.get(),Me),X=Me=>$e(t.get(),Me);return{setMenuBuilt:p,setContents:v,expand:I,refresh:W,collapse:H,lookupMenu:se,lookupItem:X,otherMenus:Me=>{const vt=u.get();return Ht(Re(vt),Me)},getPrimary:()=>l.get().bind(Q),getMenus:()=>s.get(),clear:f,isClear:m,getTriggeringPath:D}},GE=t=>t.type==="prepared"?x.some(t.menu):x.none(),KE={init:wM,extractPreparedMenu:GE},EM=Ct("tiered-menu-item-highlight"),TM=Ct("tiered-menu-item-dehighlight"),hH=(t,s)=>{const a=dn(),l=(Ze,lt,Jt)=>ot(Jt,(bn,Zt)=>{const hn=()=>Qu.sketch({...bn,value:Zt,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(wo,bo)=>{Wt(wo,EM,{menuComp:wo,itemComp:bo})},onDehighlight:(wo,bo)=>{Wt(wo,TM,{menuComp:wo,itemComp:bo})},focusManager:t.fakeFocus?AL():sw()});return Zt===lt?{type:"prepared",menu:Ze.getSystem().build(hn())}:{type:"notbuilt",nbMenu:hn}}),u=KE.init(),f=Ze=>{const lt=l(Ze,t.data.primary,t.data.menus),Jt=v();return u.setContents(t.data.primary,lt,t.data.expansions,Jt),u.getPrimary()},m=Ze=>xt.getValue(Ze).value,p=(Ze,lt,Jt)=>xn(lt,bn=>{if(!bn.getSystem().isConnected())return x.none();const Zt=io.getCandidates(bn);return _t(Zt,hn=>m(hn)===Jt)}),v=Ze=>ot(t.data.menus,(lt,Jt)=>ke(lt.items,bn=>bn.type==="separator"?[]:[bn.data.value])),C=io.highlight,E=(Ze,lt)=>{C(Ze,lt),io.getHighlighted(lt).orThunk(()=>io.getFirst(lt)).each(Jt=>{t.fakeFocus?io.highlight(lt,Jt):K1(Ze,Jt.element,Dh())})},D=(Ze,lt)=>pl(Ie(lt,Jt=>Ze.lookupMenu(Jt).bind(bn=>bn.type==="prepared"?x.some(bn.menu):x.none()))),I=(Ze,lt,Jt)=>{const bn=D(lt,lt.otherMenus(Jt));Qe(bn,Zt=>{Xi(Zt.element,[t.markers.backgroundMenu]),t.stayInDom||fn.remove(Ze,Zt)})},H=Ze=>a.get().getOrThunk(()=>{const lt={},Jt=Xo(Ze.element,`.${t.markers.item}`),bn=eo(Jt,Zt=>qs(Zt,"aria-haspopup")==="true");return Qe(bn,Zt=>{Ze.getSystem().getByDom(Zt).each(hn=>{const wo=m(hn);lt[wo]=hn})}),a.set(lt),lt}),W=(Ze,lt)=>{const Jt=H(Ze);ze(Jt,(bn,Zt)=>{const hn=An(lt,Zt);an(bn.element,"aria-expanded",hn)})},Q=(Ze,lt,Jt)=>x.from(Jt[0]).bind(bn=>lt.lookupMenu(bn).bind(Zt=>{if(Zt.type==="notbuilt")return x.none();{const hn=Zt.menu,wo=D(lt,Jt.slice(1));return Qe(wo,bo=>{xs(bo.element,t.markers.backgroundMenu)}),ks(hn.element)||fn.append(Ze,tl(hn)),Xi(hn.element,[t.markers.backgroundMenu]),E(Ze,hn),I(Ze,lt,Jt),x.some(hn)}}));let se;(function(Ze){Ze[Ze.HighlightSubmenu=0]="HighlightSubmenu",Ze[Ze.HighlightParent=1]="HighlightParent"})(se||(se={}));const X=(Ze,lt,Jt)=>{if(Jt.type==="notbuilt"){const bn=Ze.getSystem().build(Jt.nbMenu());return u.setMenuBuilt(lt,bn),bn}else return Jt.menu},ie=(Ze,lt,Jt=se.HighlightSubmenu)=>{if(lt.hasConfigured(Lt)&&Lt.isDisabled(lt))return x.some(lt);{const bn=m(lt);return u.expand(bn).bind(Zt=>(W(Ze,Zt),x.from(Zt[0]).bind(hn=>u.lookupMenu(hn).bind(wo=>{const bo=X(Ze,hn,wo);return ks(bo.element)||fn.append(Ze,tl(bo)),t.onOpenSubmenu(Ze,lt,bo,Sr(Zt)),Jt===se.HighlightSubmenu?(io.highlightFirst(bo),Q(Ze,u,Zt)):(io.dehighlightAll(bo),x.some(lt))}))))}},le=(Ze,lt)=>{const Jt=m(lt);return u.collapse(Jt).bind(bn=>(W(Ze,bn),Q(Ze,u,bn).map(Zt=>(t.onCollapseMenu(Ze,lt,Zt),Zt))))},xe=(Ze,lt)=>{const Jt=m(lt);return u.refresh(Jt).bind(bn=>(W(Ze,bn),Q(Ze,u,bn)))},Me=(Ze,lt)=>jh(lt.element)?x.none():ie(Ze,lt,se.HighlightSubmenu),vt=(Ze,lt)=>jh(lt.element)?x.none():le(Ze,lt),Ge=(Ze,lt)=>le(Ze,lt).orThunk(()=>t.onEscape(Ze,lt).map(()=>Ze)),Pe=Ze=>(lt,Jt)=>Iu(Jt.getSource(),`.${t.markers.item}`).bind(bn=>lt.getSystem().getByDom(bn).toOptional().bind(Zt=>Ze(lt,Zt).map(et))),wt=Jo([Le(bM(),(Ze,lt)=>{const Jt=lt.event.item;u.lookupItem(m(Jt)).each(()=>{const bn=lt.event.menu;io.highlight(Ze,bn);const Zt=m(lt.event.item);u.refresh(Zt).each(hn=>I(Ze,u,hn))})}),Bd((Ze,lt)=>{const Jt=lt.event.target;Ze.getSystem().getByDom(Jt).each(bn=>{m(bn).indexOf("collapse-item")===0&&le(Ze,bn),ie(Ze,bn,se.HighlightSubmenu).fold(()=>{t.onExecute(Ze,bn)},ee)})}),$o((Ze,lt)=>{f(Ze).each(Jt=>{fn.append(Ze,tl(Jt)),t.onOpenMenu(Ze,Jt),t.highlightOnOpen===Ga.HighlightMenuAndItem?E(Ze,Jt):t.highlightOnOpen===Ga.HighlightJustMenu&&C(Ze,Jt)})}),Le(EM,(Ze,lt)=>{t.onHighlightItem(Ze,lt.event.menuComp,lt.event.itemComp)}),Le(TM,(Ze,lt)=>{t.onDehighlightItem(Ze,lt.event.menuComp,lt.event.itemComp)}),...t.navigateOnHover?[Le(C2(),(Ze,lt)=>{const Jt=lt.event.item;xe(Ze,Jt),ie(Ze,Jt,se.HighlightParent),t.onHover(Ze,Jt)})]:[]]),Kt=Ze=>io.getHighlighted(Ze).bind(io.getHighlighted),Ft=Ze=>{Kt(Ze).each(lt=>{le(Ze,lt)})},_n=Ze=>{u.getPrimary().each(lt=>{E(Ze,lt)})},rn=Ze=>x.from(Ze.components()[0]).filter(lt=>qs(lt.element,"role")==="menu"),Pt={collapseMenu:Ft,highlightPrimary:_n,repositionMenus:Ze=>{u.getPrimary().bind(Jt=>Kt(Ze).bind(bn=>{const Zt=m(bn),hn=Dn(u.getMenus()),wo=pl(Ie(hn,KE.extractPreparedMenu));return u.getTriggeringPath(Zt,bo=>p(Ze,wo,bo))}).map(bn=>({primary:Jt,triggeringPath:bn}))).fold(()=>{rn(Ze).each(Jt=>{t.onRepositionMenu(Ze,Jt,[])})},({primary:Jt,triggeringPath:bn})=>{t.onRepositionMenu(Ze,Jt,bn)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:zr(t.tmenuBehaviours,[It.config({mode:"special",onRight:Pe(Me),onLeft:Pe(vt),onEscape:Pe(Ge),focusIn:(Ze,lt)=>{u.getPrimary().each(Jt=>{K1(Ze,Jt.element,Dh())})}}),io.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Wn.config({find:Ze=>io.getHighlighted(Ze)}),fn.config({})]),eventOrder:t.eventOrder,apis:Pt,events:wt}},pH=te("collapse-item"),AM=(t,s,a)=>({primary:t,menus:s,expansions:a}),OM=(t,s)=>({primary:t,menus:Nm(t,s),expansions:{}}),vH=t=>({value:Ct(pH()),meta:{text:t}}),gg=ol({name:"TieredMenu",configFields:[$m("onExecute"),$m("onEscape"),gr("onOpenMenu"),gr("onOpenSubmenu"),oo("onRepositionMenu"),oo("onCollapseMenu"),ve("highlightOnOpen",Ga.HighlightMenuAndItem),yc("data",[We("primary"),We("menus"),We("expansions")]),ve("fakeFocus",!1),oo("onHighlightItem"),oo("onDehighlightItem"),oo("onHover"),Ox(),We("dom"),ve("navigateOnHover",!0),ve("stayInDom",!1),pr("tmenuBehaviours",[It,io,Wn,fn]),ve("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:hH,extraApis:{tieredData:AM,singleData:OM,collapseItem:vH}}),kM=te("sink"),DM=te(Ys({name:kM(),overrides:te({dom:{tag:"div"},behaviours:qe([va.config({useFixed:et})]),events:Jo([Nf(Qc()),Nf(Ai()),Nf(Ef())])})})),bH=Ji([ve("isExtraPart",it),Ti("fireEventInstead",[ve("event",Td())])]),YE=t=>{const s=ri("Dismissal",bH,t);return{[Ju()]:{schema:Ji([We("target")]),onReceive:(a,l)=>{Qn.isOpen(a)&&(Qn.isPartOf(a,l.target)||s.isExtraPart(a,l.target)||s.fireEventInstead.fold(()=>Qn.close(a),f=>Zn(a,f.event)))}}}},yH=Ji([Ti("fireEventInstead",[ve("event",BO())]),bc("doReposition")]),XE=t=>{const s=ri("Reposition",yH,t);return{[Vf()]:{onReceive:a=>{Qn.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),l=>Zn(a,l.event))}}}},w2=(t,s)=>{const a=t.getHotspot(s).getOr(s),l="hotspot",u=t.getAnchorOverrides();return t.layouts.fold(()=>({type:l,hotspot:a,overrides:u}),f=>({type:l,hotspot:a,overrides:u,layouts:f}))},MM=(t,s,a)=>{const l=t.fetch;return l(a).map(s)},CH=(t,s,a,l,u,f,m)=>{const p=MM(t,s,l),v=QE(l,t);return p.map(C=>C.bind(E=>{const D=E.menus[E.primary];return x.from(D).each(I=>{t.listRole.each(H=>{I.role=H})}),x.from(gg.sketch({...f.menu(),uid:ep(""),data:E,highlightOnOpen:m,onOpenMenu:(I,H)=>{const W=v().getOrDie();va.position(W,H,{anchor:a}),Qn.decloak(u)},onOpenSubmenu:(I,H,W)=>{const Q=v().getOrDie();va.position(Q,W,{anchor:{type:"submenu",item:H}}),Qn.decloak(u)},onRepositionMenu:(I,H,W)=>{const Q=v().getOrDie();va.position(Q,H,{anchor:a}),Qe(W,se=>{va.position(Q,se.triggeredMenu,{anchor:{type:"submenu",item:se.triggeringItem}})})},onEscape:()=>(tn.focus(l),Qn.close(u),x.some(!0))}))}))},E2=(t,s,a,l,u,f,m)=>{const p=w2(t,a);return CH(t,s,p,a,l,u,m).map(C=>(C.fold(()=>{Qn.isOpen(l)&&Qn.close(l)},E=>{Qn.cloak(l),Qn.open(l,E),f(l)}),l))},RM=(t,s,a,l,u,f,m)=>(Qn.close(l),ns.pure(l)),JE=(t,s,a,l,u,f)=>{const m=hs.getCoupled(a,"sandbox");return(Qn.isOpen(m)?RM:E2)(t,s,a,m,l,u,f)},SH=(t,s,a)=>{const l=Wn.getCurrent(s).getOr(s),u=nr(t.element);a?gn(l.element,"min-width",u+"px"):pb(l.element,u)},QE=(t,s)=>t.getSystem().getByUid(s.uid+"-"+kM()).map(a=>()=>Sn.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Sn.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),qE=t=>{Qn.getState(t).each(s=>{gg.repositionMenus(s)})},T2=(t,s,a)=>{const l=zE(),u=(p,v)=>{const C=w2(t,s);l.link(s.element),t.matchWidth&&SH(C.hotspot,v,t.useMinWidth),t.onOpen(C,p,v),a!==void 0&&a.onOpen!==void 0&&a.onOpen(p,v)},f=(p,v)=>{l.unlink(s.element),m().getOr(v).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(p,v)},m=QE(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:l.id}},behaviours:Dc.augment(t.sandboxBehaviours,[xt.config({store:{mode:"memory",initialValue:s}}),Qn.config({onOpen:u,onClose:f,isPartOf:(p,v,C)=>mg(v,C)||mg(s,C),getAttachPoint:()=>m().getOrDie()}),Wn.config({find:p=>Qn.getState(p).bind(v=>Wn.getCurrent(v))}),Ya.config({channels:{...YE({isExtraPart:it}),...XE({doReposition:qE})}})])}},PM=t=>{const s=hs.getCoupled(t,"sandbox");qE(s)},e4=()=>[ve("sandboxClasses",[]),Dc.field("sandboxBehaviours",[Wn,Ya,Qn,xt])],xH=te([We("dom"),We("fetch"),oo("onOpen"),Ks("onExecute"),ve("getHotspot",x.some),ve("getAnchorOverrides",te({})),$f(),pr("dropdownBehaviours",[kn,hs,It,tn]),We("toggleClass"),ve("eventOrder",{}),mo("lazySink"),ve("matchWidth",!1),ve("useMinWidth",!1),mo("role"),mo("listRole")].concat(e4())),NM=te([ga({schema:[Ox(),ve("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),DM()]),t4=(t,s,a,l)=>{const u=E=>$e(t.dom,"attributes").bind(D=>$e(D,E)),f=E=>{Qn.getState(E).each(D=>{gg.highlightPrimary(D)})},m=(E,D,I)=>JE(t,ct,E,l,D,I),p=E=>{m(E,f,Ga.HighlightMenuAndItem).get(ee)},v={expand:E=>{kn.isOn(E)||m(E,ee,Ga.HighlightNone).get(ee)},open:E=>{kn.isOn(E)||m(E,ee,Ga.HighlightMenuAndItem).get(ee)},refetch:E=>hs.getExistingCoupled(E,"sandbox").fold(()=>m(E,ee,Ga.HighlightMenuAndItem).map(ee),I=>E2(t,ct,E,I,l,ee,Ga.HighlightMenuAndItem).map(ee)),isOpen:kn.isOn,close:E=>{kn.isOn(E)&&m(E,ee,Ga.HighlightMenuAndItem).get(ee)},repositionMenus:E=>{kn.isOn(E)&&PM(E)}},C=(E,D)=>(Zm(E),x.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:zr(t.dropdownBehaviours,[kn.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),hs.config({others:{sandbox:E=>T2(t,E,{onOpen:()=>kn.on(E),onClose:()=>kn.off(E)})}}),It.config({mode:"special",onSpace:C,onEnter:C,onDown:(E,D)=>{if(sl.isOpen(E)){const I=hs.getCoupled(E,"sandbox");f(I)}else sl.open(E);return x.some(!0)},onEscape:(E,D)=>sl.isOpen(E)?(sl.close(E),x.some(!0)):x.none()}),tn.config({})]),events:v2(x.some(p)),eventOrder:{...t.eventOrder,[el()]:["disabling","toggling","alloy.base.behaviour"]},apis:v,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),E=>({role:E})),...t.dom.tag==="button"?{type:u("type").getOr("button")}:{}}}}},sl=Ra({name:"Dropdown",configFields:xH(),partFields:NM(),factory:t4,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),IM="form",wH=[pr("formBehaviours",[xt])],BM=t=>"<alloy.field."+t+">",EH=t=>{const s=(()=>{const f=[];return{field:(p,v)=>(f.push(p),Fx(IM,BM(p),v)),record:te(f)}})(),a=t(s),l=s.record(),u=Ie(l,f=>or({name:f,pname:BM(f)}));return ng(IM,wH,u,LM,a)},TH=(t,s)=>t.fold(()=>Sn.error(s),Sn.value),LM=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:zr(t.formBehaviours,[xt.config({store:{mode:"manual",getValue:a=>{const l=Fh(a,t);return ot(l,(u,f)=>u().bind(m=>{const p=Wn.getCurrent(m);return TH(p,new Error(`Cannot find a current component to extract the value from for form part '${f}': `+Co(m.element)))}).map(xt.getValue))},setValue:(a,l)=>{ze(l,(u,f)=>{Do(a,t,f).each(m=>{Wn.getCurrent(m).each(p=>{xt.setValue(p,u)})})})}}})]),apis:{getField:(a,l)=>Do(a,t,l).bind(Wn.getCurrent)}}),hg={getField:Qh((t,s,a)=>t.getField(s,a)),sketch:EH},cp=te([We("dom"),ve("shell",!0),pr("toolbarBehaviours",[fn])]),AH=te([Ys({name:"groups",overrides:()=>({behaviours:qe([fn.config({})])})})]),Ri=(t,s,a,l)=>{const u=(p,v)=>{f(p).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},C=>{fn.set(C,v)})},f=p=>t.shell?x.some(p):Do(p,t,"groups"),m=t.shell?{behaviours:[fn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:m.components,behaviours:zr(t.toolbarBehaviours,m.behaviours),apis:{setGroups:u,refresh:ee},domModification:{attributes:{role:"group"}}}},Mr=Ra({name:"Toolbar",configFields:cp(),partFields:AH(),factory:Ri,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),FM=te([Rh(["toggledClass"]),We("lazySink"),bc("fetch"),Xc("getBounds"),Ti("fireDismissalEventInstead",[ve("event",Td())]),$f(),oo("onToggled")]),n4=te([ga({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:qe([kn.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),ga({factory:Mr,schema:cp(),name:"toolbar",overrides:t=>({toolbarBehaviours:qe([It.config({mode:"cyclic",onEscape:s=>(Do(s,t,"button").each(tn.focus),x.none())})])})})]),up=dn(),A2=(t,s)=>{up.set(!0),o4(t,s),up.clear()},o4=(t,s)=>{const a=hs.getCoupled(t,"toolbarSandbox");Qn.isOpen(a)?Qn.close(a):Qn.open(a,s.toolbar())},O2=(t,s,a,l)=>{const u=a.getBounds.map(m=>m()),f=a.lazySink(t).getOrDie();va.positionWithinBounds(f,s,{anchor:{type:"hotspot",hotspot:t,layouts:l,overrides:{maxWidthFunction:cy()}}},u)},dp=(t,s,a,l,u)=>{Mr.setGroups(s,u),O2(t,s,a,l),kn.on(t)},OH=(t,s,a)=>{const l=zE(),u=(m,p)=>{const v=up.get().getOr(!1);a.fetch().get(C=>{dp(t,p,a,s.layouts,C),l.link(t.element),v||It.focusIn(p)})},f=()=>{kn.off(t),up.get().getOr(!1)||tn.focus(t),l.unlink(t.element)};return{dom:{tag:"div",attributes:{id:l.id}},behaviours:qe([It.config({mode:"special",onEscape:m=>(Qn.close(m),x.some(!0))}),Qn.config({onOpen:u,onClose:f,isPartOf:(m,p,v)=>mg(p,v)||mg(t,v),getAttachPoint:()=>a.lazySink(t).getOrDie()}),Ya.config({channels:{...YE({isExtraPart:it,...a.fireDismissalEventInstead.map(m=>({fireEventInstead:{event:m.event}})).getOr({})}),...XE({doReposition:()=>{Qn.getState(hs.getCoupled(t,"toolbarSandbox")).each(m=>{O2(t,m,a,s.layouts)})}})}})])}},qu=Ra({name:"FloatingToolbarButton",factory:(t,s,a,l)=>({...Dr.sketch({...l.button(),action:u=>{o4(u,l)},buttonBehaviours:Dc.augment({dump:l.button().buttonBehaviours},[hs.config({others:{toolbarSandbox:u=>OH(u,a,t)}})])}),apis:{setGroups:(u,f)=>{Qn.getState(hs.getCoupled(u,"toolbarSandbox")).each(m=>{dp(u,m,t,a.layouts,f)})},reposition:u=>{Qn.getState(hs.getCoupled(u,"toolbarSandbox")).each(f=>{O2(u,f,t,a.layouts)})},toggle:u=>{o4(u,l)},toggleWithoutFocusing:u=>{A2(u,l)},getToolbar:u=>Qn.getState(hs.getCoupled(u,"toolbarSandbox")),isOpen:u=>Qn.isOpen(hs.getCoupled(u,"toolbarSandbox"))}}),configFields:FM(),partFields:n4(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),_M=te([ve("prefix","form-field"),pr("fieldBehaviours",[Wn,xt])]),Lv=te([Ys({schema:[We("dom")],name:"label"}),Ys({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[We("text")],name:"aria-descriptor"}),or({factory:{sketch:t=>{const s=PO(t,["factory"]);return t.factory.sketch(s)}},schema:[We("factory")],name:"field"})]),kH=(t,s,a,l)=>{const u=zr(t.fieldBehaviours,[Wn.config({find:p=>Do(p,t,"field")}),xt.config({store:{mode:"manual",getValue:p=>Wn.getCurrent(p).bind(xt.getValue),setValue:(p,v)=>{Wn.getCurrent(p).each(C=>{xt.setValue(C,v)})}}})]),f=Jo([$o((p,v)=>{const C=$x(p,t,["label","field","aria-descriptor"]);C.field().each(E=>{const D=Ct(t.prefix);C.label().each(I=>{an(I.element,"for",D),an(E.element,"id",D)}),C["aria-descriptor"]().each(I=>{const H=Ct(t.prefix);an(I.element,"id",H),an(E.element,"aria-describedby",H)})})})]),m={getField:p=>Do(p,t,"field"),getLabel:p=>Do(p,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:u,events:f,apis:m}},Fn=Ra({name:"FormField",configFields:_M(),partFields:Lv(),factory:kH,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}}),ou=te([ve("field1Name","field1"),ve("field2Name","field2"),gr("onLockedChange"),Rh(["lockClass"]),ve("locked",!1),Dc.field("coupledFieldBehaviours",[Wn,xt]),Zo("onInput",ee)]),Pi=(t,s,a)=>Do(t,s,a).bind(Wn.getCurrent),fp=(t,s)=>or({factory:Fn,name:t,overrides:a=>({fieldBehaviours:qe([cn("coupled-input-behaviour",[Le(Ed(),l=>{Pi(l,a,s).each(u=>{Do(l,a,"lock").each(f=>{kn.isOn(f)&&a.onLockedChange(l,u,f),a.onInput(l)})})})])])})}),Ni=te([fp("field1","field2"),fp("field2","field1"),or({factory:Dr,schema:[We("dom")],name:"lock",overrides:t=>({buttonBehaviours:qe([kn.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),DH=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Dc.augment(t.coupledFieldBehaviours,[Wn.config({find:x.some}),xt.config({store:{mode:"manual",getValue:u=>{const f=Hx(u,t,["field1","field2"]);return{[t.field1Name]:xt.getValue(f.field1()),[t.field2Name]:xt.getValue(f.field2())}},setValue:(u,f)=>{const m=Hx(u,t,["field1","field2"]);To(f,t.field1Name)&&xt.setValue(m.field1(),f[t.field1Name]),To(f,t.field2Name)&&xt.setValue(m.field2(),f[t.field2Name])}}})]),apis:{getField1:u=>Do(u,t,"field1"),getField2:u=>Do(u,t,"field2"),getLock:u=>Do(u,t,"lock")}}),Tn=Ra({name:"FormCoupledInputs",configFields:ou(),partFields:Ni(),factory:DH,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),MH=(t,s)=>{const a=Ie(t.options,u=>({dom:{tag:"option",value:u.value,innerHtml:u.text}})),l=t.data.map(u=>Nm("initialValue",u)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:zr(t.selectBehaviours,[tn.config({}),xt.config({store:{mode:"manual",getValue:u=>gc(u.element),setValue:(u,f)=>{const m=bs(t.options);_t(t.options,v=>v.value===f).isSome()?Om(u.element,f):u.element.dom.selectedIndex===-1&&f===""&&m.each(v=>Om(u.element,v.value))},...l}})])}},pg=ol({name:"HtmlSelect",configFields:[We("options"),pr("selectBehaviours",[tn,xt]),ve("selectClasses",[]),ve("selectAttributes",{}),mo("data")],factory:MH}),Fv=(t,s,a,l,u)=>{const f=()=>t.lazySink(s),m=l.type==="horizontal"?{layouts:{onLtr:()=>Nd(),onRtl:()=>Yx()}}:{},p=C=>C.length===2,v=C=>p(C)?m:{};return gg.sketch({dom:{tag:"div"},data:l.data,markers:l.menu.markers,highlightOnOpen:l.menu.highlightOnOpen,fakeFocus:l.menu.fakeFocus,onEscape:()=>(Qn.close(s),t.onEscape.map(C=>C(s)),x.some(!0)),onExecute:()=>x.some(!0),onOpenMenu:(C,E)=>{va.positionWithinBounds(f().getOrDie(),E,a,u())},onOpenSubmenu:(C,E,D,I)=>{const H=f().getOrDie();va.position(H,D,{anchor:{type:"submenu",item:E,...v(I)}})},onRepositionMenu:(C,E,D)=>{const I=f().getOrDie();va.positionWithinBounds(I,E,a,u()),Qe(D,H=>{const W=v(H.triggeringPath);va.position(I,H.triggeredMenu,{anchor:{type:"submenu",item:H.triggeringItem,...W}})})}})},$M=(t,s)=>{const a=(I,H)=>t.getRelated(I).exists(Q=>mg(Q,H)),l=(I,H)=>{Qn.setContent(I,H)},u=(I,H,W)=>{const Q=x.none;f(I,H,W,Q)},f=(I,H,W,Q)=>{const se=t.lazySink(I).getOrDie();Qn.openWhileCloaked(I,H,()=>va.positionWithinBounds(se,I,W,Q())),xt.setValue(I,x.some({mode:"position",config:W,getBounds:Q}))},m=(I,H,W)=>{p(I,H,W,x.none)},p=(I,H,W,Q)=>{const se=Fv(t,I,H,W,Q);Qn.open(I,se),xt.setValue(I,x.some({mode:"menu",menu:se}))},v=I=>{Qn.isOpen(I)&&(xt.setValue(I,x.none()),Qn.close(I))},C=I=>Qn.getState(I),E=I=>{Qn.isOpen(I)&&xt.getValue(I).each(H=>{switch(H.mode){case"menu":Qn.getState(I).each(gg.repositionMenus);break;case"position":const W=t.lazySink(I).getOrDie();va.positionWithinBounds(W,I,H.config,H.getBounds());break}})},D={setContent:l,showAt:u,showWithinBounds:f,showMenuAt:m,showMenuWithinBounds:p,hide:v,getContent:C,reposition:E,isOpen:Qn.isOpen};return{uid:t.uid,dom:t.dom,behaviours:zr(t.inlineBehaviours,[Qn.config({isPartOf:(I,H,W)=>mg(H,W)||a(I,W),getAttachPoint:I=>t.lazySink(I).getOrDie(),onOpen:I=>{t.onShow(I)},onClose:I=>{t.onHide(I)}}),xt.config({store:{mode:"memory",initialValue:x.none()}}),Ya.config({channels:{...YE({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(I=>({fireEventInstead:{event:I.event}})).getOr({})}),...XE({...t.fireRepositionEventInstead.map(I=>({fireEventInstead:{event:I.event}})).getOr({}),doReposition:E})}})]),eventOrder:t.eventOrder,apis:D}},es=ol({name:"InlineView",configFields:[We("lazySink"),oo("onShow"),oo("onHide"),Xc("onEscape"),pr("inlineBehaviours",[Qn,xt,Ya]),Ti("fireDismissalEventInstead",[ve("event",Td())]),Ti("fireRepositionEventInstead",[ve("event",BO())]),ve("getRelated",x.none),ve("isExtraPart",it),ve("eventOrder",x.none)],factory:$M,apis:{showAt:(t,s,a,l)=>{t.showAt(s,a,l)},showWithinBounds:(t,s,a,l,u)=>{t.showWithinBounds(s,a,l,u)},showMenuAt:(t,s,a,l)=>{t.showMenuAt(s,a,l)},showMenuWithinBounds:(t,s,a,l,u)=>{t.showMenuWithinBounds(s,a,l,u)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}}),k2=te([_o("type","text"),mo("data"),ve("inputAttributes",{}),ve("inputStyles",{}),ve("tag","input"),ve("inputClasses",[]),oo("onSetValue"),Zo("fromInputValue",ct),Zo("toInputValue",ct),ve("styles",{}),ve("eventOrder",{}),pr("inputBehaviours",[xt,tn]),ve("selectOnFocus",!0)]),HM=t=>qe([tn.config({onFocus:t.selectOnFocus?s=>{const a=s.element,l=gc(a);t.type!=="range"&&a.dom.setSelectionRange(0,l.length)}:ee})]),r4=t=>({...HM(t),...zr(t.inputBehaviours,[xt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>t.fromInputValue(gc(s.element)),setValue:(s,a)=>{gc(s.element)!==a&&Om(s.element,t.toInputValue(a))}},onSetValue:t.onSetValue})])}),VM=t=>({tag:t.tag,attributes:{type:t.type,...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),zM=(t,s)=>({uid:t.uid,dom:VM(t),components:[],behaviours:r4(t),eventOrder:t.eventOrder}),ed=ol({name:"Input",configFields:k2(),factory:zM}),_v=Lh(WE(),jE()),UM=(t,s)=>{const a=er(t,"id").fold(()=>{const l=Ct("dialog-label");return an(s,"id",l),l},ct);an(t,"aria-labelledby",a)},D2=te([We("lazySink"),mo("dragBlockClass"),Zo("getBounds",fa),ve("useTabstopAt",et),ve("firstTabstop",0),ve("eventOrder",{}),pr("modalBehaviours",[It]),Ks("onExecute"),$m("onEscape")]),a4={sketch:ct},RH=te([Ys({name:"draghandle",overrides:(t,s)=>({behaviours:qe([og.config({mode:"mouse",getTarget:a=>mc(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),or({schema:[We("dom")],name:"title"}),or({factory:a4,schema:[We("dom")],name:"close"}),or({factory:a4,schema:[We("dom")],name:"body"}),Ys({factory:a4,schema:[We("dom")],name:"footer"}),ga({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[ve("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),ve("components",[])],name:"blocker"})]),PH=(t,s,a,l)=>{const u=dn(),f=W=>{u.set(W);const Q=t.lazySink(W).getOrDie(),se=l.blocker(),X=Q.getSystem().build({...se,components:se.components.concat([tl(W)]),behaviours:qe([tn.config({}),cn("dialog-blocker-events",[Vh(ma(),()=>{kc.isBlocked(W)?ee():It.focusIn(W)})])])});Oc(Q,X),It.focusIn(W)},m=W=>{u.clear(),wa(W.element).each(Q=>{W.getSystem().getByDom(Q).each(se=>{rr(se)})})},p=W=>Mf(W,t,"body"),v=W=>Do(W,t,"footer"),C=(W,Q)=>{kc.block(W,Q)},E=W=>{kc.unblock(W)},D=Ct("modal-events"),I={...t.eventOrder,[Dl()]:[D].concat(t.eventOrder["alloy.system.attached"]||[])},H=Wa();return{uid:t.uid,dom:t.dom,components:s,apis:{show:f,hide:m,getBody:p,getFooter:v,setIdle:E,setBusy:C},eventOrder:I,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:zr(t.modalBehaviours,[fn.config({}),It.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),kc.config({getRoot:u.get}),cn(D,[$o(W=>{const Q=Mf(W,t,"title").element,se=HB(Q);H.os.isMacOS()&&fe(se)?an(W.element,"aria-label",se):UM(W.element,Q)})])])}},ar=Ra({name:"ModalDialog",configFields:D2(),partFields:RH(),factory:PH,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),NH=Ys({schema:[We("dom")],name:"label"}),Zd=t=>Ys({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),l=>({events:Jo([qx(wd(),(u,f,m)=>l(u,m),[s]),qx(Ai(),(u,f,m)=>l(u,m),[s]),qx(P1(),(u,f,m)=>{m.mouseIsDown.get()&&l(u,m)},[s])])}))}),IH=Zd("top-left"),BH=Zd("top"),ZM=Zd("top-right"),LH=Zd("right"),WM=Zd("bottom-right"),$v=Zd("bottom"),FH=Zd("bottom-left"),_H=Zd("left"),jM=or({name:"thumb",defaults:te({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Jo([Hh(wd(),t,"spectrum"),Hh(wf(),t,"spectrum"),Hh(Jc(),t,"spectrum"),Hh(Ai(),t,"spectrum"),Hh(P1(),t,"spectrum"),Hh($b(),t,"spectrum")])})}),Hv=t=>If(t.event),i4=or({schema:[Da("mouseIsDown",()=>Rt(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,l=(u,f)=>a.getValueFromEvent(f).map(m=>a.setValueFrom(u,t,m));return{behaviours:qe([It.config({mode:"special",onLeft:(u,f)=>a.onLeft(u,t,Hv(f)),onRight:(u,f)=>a.onRight(u,t,Hv(f)),onUp:(u,f)=>a.onUp(u,t,Hv(f)),onDown:(u,f)=>a.onDown(u,t,Hv(f))}),Mo.config({}),tn.config({})]),events:Jo([Le(wd(),l),Le(wf(),l),Le(Ai(),l),Le(P1(),(u,f)=>{t.mouseIsDown.get()&&l(u,f)})])}}});var GM=[NH,_H,LH,BH,$v,IH,ZM,FH,WM,jM,i4];const Vv=te("slider.change.value"),$H=t=>t.type.indexOf("touch")!==-1,l4=t=>{const s=t.event.raw;if($H(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?x.some(a.touches[0]).map(l=>Ss(l.clientX,l.clientY)):x.none()}else{const a=s;return a.clientX!==void 0?x.some(a).map(l=>Ss(l.clientX,l.clientY)):x.none()}},HH="top",VH="right",KM="bottom",Rc="left",vg=t=>t.model.minX,Wd=t=>t.model.minY,zv=t=>t.model.minX-1,Uv=t=>t.model.minY-1,bg=t=>t.model.maxX,zf=t=>t.model.maxY,Zv=t=>t.model.maxX+1,Wv=t=>t.model.maxY+1,YM=(t,s,a)=>s(t)-a(t),c4=t=>YM(t,bg,vg),u4=t=>YM(t,zf,Wd),XM=t=>c4(t)/2,JM=t=>u4(t)/2,mp=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,QM=t=>t.snapToGrid,d4=t=>t.snapStart,f4=t=>t.rounded,jv=(t,s)=>t[s+"-edge"]!==void 0,qM=t=>jv(t,Rc),e6=t=>jv(t,VH),t6=t=>jv(t,HH),yg=t=>jv(t,KM),jd=t=>t.model.value.get(),Gd=(t,s)=>({x:t,y:s}),Vl=(t,s)=>{Wt(t,Vv(),{value:s})},n6=(t,s)=>{Vl(t,Gd(zv(s),Uv(s)))},o6=(t,s)=>{Vl(t,Uv(s))},m4=(t,s)=>{Vl(t,Gd(XM(s),Uv(s)))},g4=(t,s)=>{Vl(t,Gd(Zv(s),Uv(s)))},h4=(t,s)=>{Vl(t,Zv(s))},s6=(t,s)=>{Vl(t,Gd(Zv(s),JM(s)))},zH=(t,s)=>{Vl(t,Gd(Zv(s),Wv(s)))},r6=(t,s)=>{Vl(t,Wv(s))},UH=(t,s)=>{Vl(t,Gd(XM(s),Wv(s)))},ZH=(t,s)=>{Vl(t,Gd(zv(s),Wv(s)))},WH=(t,s)=>{Vl(t,zv(s))},a6=(t,s)=>{Vl(t,Gd(zv(s),JM(s)))},M2=(t,s,a,l)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-l),R2=(t,s,a,l)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+l),i6=(t,s,a)=>Math.max(s,Math.min(a,t)),jH=(t,s,a,l,u)=>u.fold(()=>{const f=t-s,m=Math.round(f/l)*l;return i6(s+m,s-1,a+1)},f=>{const m=(t-f)%l,p=Math.round(m/l),v=Math.floor((t-f)/l),C=Math.floor((a-f)/l),E=Math.min(C,v+p),D=f+E*l;return Math.max(f,D)}),GH=(t,s,a)=>Math.min(a,Math.max(t,s))-s,l6=t=>{const{min:s,max:a,range:l,value:u,step:f,snap:m,snapStart:p,rounded:v,hasMinEdge:C,hasMaxEdge:E,minBound:D,maxBound:I,screenRange:H}=t,W=C?s-1:s,Q=E?a+1:a;if(u<D)return W;if(u>I)return Q;{const se=GH(u,D,I),X=i6(se/H*l+s,W,Q);return m&&X>=s&&X<=a?jH(X,s,a,f,p):v?Math.round(X):X}},c6=t=>{const{min:s,max:a,range:l,value:u,hasMinEdge:f,hasMaxEdge:m,maxBound:p,maxOffset:v,centerMinEdge:C,centerMaxEdge:E}=t;return u<s?f?0:C:u>a?m?p:E:(u-s)/l*v},p4="top",u6="right",d6="bottom",v4="left",KH="width",YH="height",su=t=>t.element.dom.getBoundingClientRect(),Pc=(t,s)=>t[s],P2=t=>{const s=su(t);return Pc(s,v4)},f6=t=>{const s=su(t);return Pc(s,u6)},N2=t=>{const s=su(t);return Pc(s,p4)},m6=t=>{const s=su(t);return Pc(s,d6)},Gv=t=>{const s=su(t);return Pc(s,KH)},b4=t=>{const s=su(t);return Pc(s,YH)},g6=(t,s,a)=>(t+s)/2-a,h6=(t,s)=>{const a=su(t),l=su(s),u=Pc(a,v4),f=Pc(a,u6),m=Pc(l,v4);return g6(u,f,m)},p6=(t,s)=>{const a=su(t),l=su(s),u=Pc(a,p4),f=Pc(a,d6),m=Pc(l,p4);return g6(u,f,m)},I2=(t,s)=>{Wt(t,Vv(),{value:s})},y4=(t,s,a)=>{const l={min:vg(s),max:bg(s),range:c4(s),value:a,step:mp(s),snap:QM(s),snapStart:d4(s),rounded:f4(s),hasMinEdge:qM(s),hasMaxEdge:e6(s),minBound:P2(t),maxBound:f6(t),screenRange:Gv(t)};return l6(l)},XH=(t,s,a)=>{const l=y4(t,s,a);return I2(t,l),l},C4=(t,s)=>{const a=vg(s);I2(t,a)},v6=(t,s)=>{const a=bg(s);I2(t,a)},b6=(t,s,a,l)=>{const f=(t>0?R2:M2)(jd(a),vg(a),bg(a),mp(a,l));return I2(s,f),x.some(f)},y6=t=>(s,a,l)=>b6(t,s,a,l).map(et),C6=t=>l4(t).map(a=>a.left),JH=(t,s,a,l,u)=>{const m=Gv(t),p=l.bind(E=>x.some(h6(E,t))).getOr(0),v=u.bind(E=>x.some(h6(E,t))).getOr(m),C={min:vg(s),max:bg(s),range:c4(s),value:a,hasMinEdge:qM(s),hasMaxEdge:e6(s),minBound:P2(t),minOffset:0,maxBound:f6(t),maxOffset:m,centerMinEdge:p,centerMaxEdge:v};return c6(C)},S4=(t,s,a,l,u,f)=>{const m=JH(s,f,a,l,u);return P2(s)-P2(t)+m},QH=(t,s,a,l)=>{const u=jd(a),f=S4(t,l.getSpectrum(t),u,l.getLeftEdge(t),l.getRightEdge(t),a),m=nr(s.element)/2;gn(s.element,"left",f-m+"px")},qH=y6(-1),e9=y6(1),t9=x.none,n9=x.none,o9={"top-left":x.none(),top:x.none(),"top-right":x.none(),right:x.some(h4),"bottom-right":x.none(),bottom:x.none(),"bottom-left":x.none(),left:x.some(WH)};var s9=Object.freeze({__proto__:null,setValueFrom:XH,setToMin:C4,setToMax:v6,findValueOfOffset:y4,getValueFromEvent:C6,findPositionOfValue:S4,setPositionFromValue:QH,onLeft:qH,onRight:e9,onUp:t9,onDown:n9,edgeActions:o9});const B2=(t,s)=>{Wt(t,Vv(),{value:s})},gp=(t,s,a)=>{const l={min:Wd(s),max:zf(s),range:u4(s),value:a,step:mp(s),snap:QM(s),snapStart:d4(s),rounded:f4(s),hasMinEdge:t6(s),hasMaxEdge:yg(s),minBound:N2(t),maxBound:m6(t),screenRange:b4(t)};return l6(l)},x4=(t,s,a)=>{const l=gp(t,s,a);return B2(t,l),l},w4=(t,s)=>{const a=Wd(s);B2(t,a)},S6=(t,s)=>{const a=zf(s);B2(t,a)},r9=(t,s,a,l)=>{const f=(t>0?R2:M2)(jd(a),Wd(a),zf(a),mp(a,l));return B2(s,f),x.some(f)},x6=t=>(s,a,l)=>r9(t,s,a,l).map(et),E4=t=>l4(t).map(a=>a.top),T4=(t,s,a,l,u)=>{const m=b4(t),p=l.bind(E=>x.some(p6(E,t))).getOr(0),v=u.bind(E=>x.some(p6(E,t))).getOr(m),C={min:Wd(s),max:zf(s),range:u4(s),value:a,hasMinEdge:t6(s),hasMaxEdge:yg(s),minBound:N2(t),minOffset:0,maxBound:m6(t),maxOffset:m,centerMinEdge:p,centerMaxEdge:v};return c6(C)},hp=(t,s,a,l,u,f)=>{const m=T4(s,f,a,l,u);return N2(s)-N2(t)+m},w6=(t,s,a,l)=>{const u=jd(a),f=hp(t,l.getSpectrum(t),u,l.getTopEdge(t),l.getBottomEdge(t),a),m=zn(s.element)/2;gn(s.element,"top",f-m+"px")},a9=x.none,i9=x.none,l9=x6(-1),c9=x6(1),u9={"top-left":x.none(),top:x.some(o6),"top-right":x.none(),right:x.none(),"bottom-right":x.none(),bottom:x.some(r6),"bottom-left":x.none(),left:x.none()};var d9=Object.freeze({__proto__:null,setValueFrom:x4,setToMin:w4,setToMax:S6,findValueOfOffset:gp,getValueFromEvent:E4,findPositionOfValue:hp,setPositionFromValue:w6,onLeft:a9,onRight:i9,onUp:l9,onDown:c9,edgeActions:u9});const L2=(t,s)=>{Wt(t,Vv(),{value:s})},F2=(t,s)=>({x:t,y:s}),f9=(t,s,a)=>{const l=y4(t,s,a.left),u=gp(t,s,a.top),f=F2(l,u);return L2(t,f),f},m9=(t,s,a,l,u)=>{const f=t>0?R2:M2,m=s?jd(l).x:f(jd(l).x,vg(l),bg(l),mp(l,u)),p=s?f(jd(l).y,Wd(l),zf(l),mp(l,u)):jd(l).y;return L2(a,F2(m,p)),x.some(m)},_2=(t,s)=>(a,l,u)=>m9(t,s,a,l,u).map(et),g9=(t,s)=>{const a=vg(s),l=Wd(s);L2(t,F2(a,l))},h9=(t,s)=>{const a=bg(s),l=zf(s);L2(t,F2(a,l))},E6=t=>l4(t),p9=(t,s,a,l)=>{const u=jd(a),f=S4(t,l.getSpectrum(t),u.x,l.getLeftEdge(t),l.getRightEdge(t),a),m=hp(t,l.getSpectrum(t),u.y,l.getTopEdge(t),l.getBottomEdge(t),a),p=nr(s.element)/2,v=zn(s.element)/2;gn(s.element,"left",f-p+"px"),gn(s.element,"top",m-v+"px")},v9=_2(-1,!1),td=_2(1,!1),b9=_2(-1,!0),y9=_2(1,!0),A4={"top-left":x.some(n6),top:x.some(m4),"top-right":x.some(g4),right:x.some(s6),"bottom-right":x.some(zH),bottom:x.some(UH),"bottom-left":x.some(ZH),left:x.some(a6)};var br=Object.freeze({__proto__:null,setValueFrom:f9,setToMin:g9,setToMax:h9,getValueFromEvent:E6,setPositionFromValue:p9,onLeft:v9,onRight:td,onUp:b9,onDown:y9,edgeActions:A4});const C9=[ve("stepSize",1),ve("speedMultiplier",10),ve("onChange",ee),ve("onChoose",ee),ve("onInit",ee),ve("onDragStart",ee),ve("onDragEnd",ee),ve("snapToGrid",!1),ve("rounded",!0),mo("snapStart"),Qi("model",wi("mode",{x:[ve("minX",0),ve("maxX",100),Da("value",t=>Rt(t.mode.minX)),We("getInitialValue"),Ao("manager",s9)],y:[ve("minY",0),ve("maxY",100),Da("value",t=>Rt(t.mode.minY)),We("getInitialValue"),Ao("manager",d9)],xy:[ve("minX",0),ve("maxX",100),ve("minY",0),ve("maxY",100),Da("value",t=>Rt({x:t.mode.minX,y:t.mode.minY})),We("getInitialValue"),Ao("manager",br)]})),pr("sliderBehaviours",[It,xt]),Da("mouseIsDown",()=>Rt(!1))],Nc=Ra({name:"Slider",configFields:C9,partFields:GM,factory:(t,s,a,l)=>{const u=Me=>Mf(Me,t,"thumb"),f=Me=>Mf(Me,t,"spectrum"),m=Me=>Do(Me,t,"left-edge"),p=Me=>Do(Me,t,"right-edge"),v=Me=>Do(Me,t,"top-edge"),C=Me=>Do(Me,t,"bottom-edge"),E=t.model,D=E.manager,I=(Me,vt)=>{D.setPositionFromValue(Me,vt,t,{getLeftEdge:m,getRightEdge:p,getTopEdge:v,getBottomEdge:C,getSpectrum:f})},H=(Me,vt)=>{E.value.set(vt);const Ge=u(Me);I(Me,Ge)},W=(Me,vt)=>{H(Me,vt);const Ge=u(Me);return t.onChange(Me,Ge,vt),x.some(!0)},Q=Me=>{D.setToMin(Me,t)},se=Me=>{D.setToMax(Me,t)},X=Me=>{const vt=()=>{Do(Me,t,"thumb").each(Pe=>{const wt=E.value.get();t.onChoose(Me,Pe,wt)})},Ge=t.mouseIsDown.get();t.mouseIsDown.set(!1),Ge&&vt()},ie=(Me,vt)=>{vt.stop(),t.mouseIsDown.set(!0),t.onDragStart(Me,u(Me))},le=(Me,vt)=>{vt.stop(),t.onDragEnd(Me,u(Me)),X(Me)},xe=Me=>{Do(Me,t,"spectrum").map(It.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:zr(t.sliderBehaviours,[It.config({mode:"special",focusIn:xe}),xt.config({store:{mode:"manual",getValue:Me=>E.value.get(),setValue:H}}),Ya.config({channels:{[LE()]:{onReceive:X}}})]),events:Jo([Le(Vv(),(Me,vt)=>{W(Me,vt.event.value)}),$o((Me,vt)=>{const Ge=E.getInitialValue();E.value.set(Ge);const Pe=u(Me);I(Me,Pe);const wt=f(Me);t.onInit(Me,Pe,wt,E.value.get())}),Le(wd(),ie),Le(Jc(),le),Le(Ai(),(Me,vt)=>{xe(Me),ie(Me,vt)}),Le($b(),le)]),apis:{resetToMin:Q,resetToMax:se,setValue:H,refresh:I},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),T6="container",S9=[pr("slotBehaviours",[])],A6=t=>"<alloy.field."+t+">",x9=t=>{const s=(()=>{const f=[];return{slot:(p,v)=>(f.push(p),Fx(T6,A6(p),v)),record:te(f)}})(),a=t(s),l=s.record(),u=Ie(l,f=>or({name:f,pname:A6(f)}));return ng(T6,S9,u,w9,a)},w9=(t,s)=>{const a=Q=>_h(t),l=(Q,se)=>Do(Q,t,se),u=(Q,se)=>(X,ie)=>Do(X,t,ie).map(le=>Q(le,ie)).getOr(se),f=Q=>(se,X)=>{Qe(X,ie=>Q(se,ie))},m=(Q,se)=>qs(Q.element,"aria-hidden")!=="true",p=(Q,se)=>{if(!m(Q)){const X=Q.element;mt(X,"display"),ls(X,"aria-hidden"),Wt(Q,Vb(),{name:se,visible:!0})}},v=(Q,se)=>{if(m(Q)){const X=Q.element;gn(X,"display","none"),an(X,"aria-hidden","true"),Wt(Q,Vb(),{name:se,visible:!1})}},C=u(m,!1),E=u(v),D=f(E),I=Q=>D(Q,a()),H=u(p),W={getSlotNames:a,getSlot:l,isShowing:C,hideSlot:E,hideAllSlots:I,showSlot:H};return{uid:t.uid,dom:t.dom,components:s,behaviours:bv(t.slotBehaviours),apis:W}},ba={...ot({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>Qh(t)),sketch:x9},E9=te([We("toggleClass"),We("fetch"),gr("onExecute"),ve("getHotspot",x.some),ve("getAnchorOverrides",te({})),$f(),gr("onItemExecute"),mo("lazySink"),We("dom"),oo("onOpen"),pr("splitDropdownBehaviours",[hs,It,tn]),ve("matchWidth",!1),ve("useMinWidth",!1),ve("eventOrder",{}),mo("role"),mo("listRole")].concat(e4())),T9=or({factory:Dr,schema:[We("dom")],name:"arrow",defaults:()=>({buttonBehaviours:qe([tn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Zm)},buttonBehaviours:qe([kn.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),A9=or({factory:Dr,schema:[We("dom")],name:"button",defaults:()=>({buttonBehaviours:qe([tn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),O9=te([T9,A9,Ys({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[We("text")],name:"aria-descriptor"}),ga({schema:[Ox()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(l=>{t.onItemExecute(l,s,a)})}})}),DM()]),k9=(t,s,a,l)=>{const u=E=>{Wn.getCurrent(E).each(D=>{io.highlightFirst(D),It.focusIn(D)})},f=E=>{JE(t,ct,E,l,u,Ga.HighlightMenuAndItem).get(ee)},m=E=>(f(E),x.some(!0)),p=E=>{const D=Mf(E,t,"button");return Zm(D),x.some(!0)},v={...Jo([$o((E,D)=>{Do(E,t,"aria-descriptor").each(H=>{const W=Ct("aria");an(H.element,"id",W),an(E.element,"aria-describedby",W)})})]),...v2(x.some(f))},C={repositionMenus:E=>{kn.isOn(E)&&PM(E)}};return{uid:t.uid,dom:t.dom,components:s,apis:C,eventOrder:{...t.eventOrder,[el()]:["disabling","toggling","alloy.base.behaviour"]},events:v,behaviours:zr(t.splitDropdownBehaviours,[hs.config({others:{sandbox:E=>{const D=Mf(E,t,"arrow");return T2(t,E,{onOpen:()=>{kn.on(D),kn.on(E)},onClose:()=>{kn.off(D),kn.off(E)}})}}}),It.config({mode:"special",onSpace:p,onEnter:p,onDown:m}),tn.config({}),kn.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},$2=Ra({name:"SplitDropdown",configFields:E9(),partFields:O9(),factory:k9,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),D9=(t,s)=>Bo(t,(u,f)=>s(f,u.len).fold(te(u),p=>({len:p.finish,list:u.list.concat([p])})),{len:0,list:[]}).list,O4=(t,s,a)=>({within:t,extra:s,withinWidth:a}),O6=(t,s,a)=>{const l=D9(t,(p,v)=>{const C=a(p);return x.some({element:p,start:v,finish:v+C,width:C})}),u=eo(l,p=>p.finish<=s),f=as(u,(p,v)=>p+v.width,0),m=l.slice(u.length);return{within:u,extra:m,withinWidth:f}},H2=t=>Ie(t,s=>s.element),M9=(t,s,a)=>{const l=H2(t.concat(s));return O4(l,[],a)},R9=(t,s,a,l)=>{const u=H2(t).concat([a]);return O4(u,H2(s),l)},P9=(t,s,a)=>O4(H2(t),[],a),N9=(t,s,a)=>{const l=O6(s,t,a);return l.extra.length===0?x.some(l):x.none()},I9=(t,s,a,l)=>{const u=N9(t,s,a).getOrThunk(()=>O6(s,t-a(l),a)),f=u.within,m=u.extra,p=u.withinWidth;return m.length===1&&m[0].width<=a(l)?M9(f,m,p):m.length>=1?R9(f,m,l,p):P9(f,m,p)},k4=(t,s)=>{const a=Ie(s,l=>tl(l));Mr.setGroups(t,a)},B9=t=>xn(t,s=>Yr(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),D4=(t,s,a)=>{const l=s.builtGroups.get();if(l.length===0)return;const u=Mf(t,s,"primary"),f=hs.getCoupled(t,"overflowGroup");gn(u.element,"visibility","hidden");const m=l.concat([f]),p=B9(m);a([]),k4(u,m);const v=nr(u.element),C=I9(v,s.builtGroups.get(),E=>Math.ceil(E.element.dom.getBoundingClientRect().width),f);C.extra.length===0?(fn.remove(u,f),a([])):(k4(u,C.within),a(C.extra)),mt(u.element,"visibility"),En(u.element),p.each(tn.focus)},k6=te([pr("splitToolbarBehaviours",[hs]),Da("builtGroups",()=>Rt([]))]),L9=te([Rh(["overflowToggledClass"]),Xc("getOverflowBounds"),We("lazySink"),Da("overflowGroups",()=>Rt([])),oo("onOpened"),oo("onClosed")].concat(k6())),F9=te([or({factory:Mr,schema:cp(),name:"primary"}),ga({schema:cp(),name:"overflow"}),ga({name:"overflow-button"}),ga({name:"overflow-group"})]),D6=te([We("items"),Rh(["itemSelector"]),pr("tgroupBehaviours",[It])]),_9=te([H1({name:"items",unit:"item"})]),$9=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:zr(t.tgroupBehaviours,[It.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),V2=Ra({name:"ToolbarGroup",configFields:D6(),partFields:_9(),factory:$9}),M6=t=>Ie(t,s=>tl(s)),M4=(t,s,a)=>{D4(t,a,l=>{a.overflowGroups.set(l),s.getOpt(t).each(u=>{qu.setGroups(u,M6(l))})})},H9=(t,s,a,l)=>{const u=lo(qu.sketch({fetch:()=>ns.nu(f=>{f(M6(t.overflowGroups.get()))}),layouts:{onLtr:()=>[Vs,Ds],onRtl:()=>[Ds,Vs],onBottomLtr:()=>[hr,Hr],onBottomRtl:()=>[Hr,hr]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(f,m)=>t[m?"onOpened":"onClosed"](f)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:zr(t.splitToolbarBehaviours,[hs.config({others:{overflowGroup:()=>V2.sketch({...l["overflow-group"](),items:[u.asSpec()]})}})]),apis:{setGroups:(f,m)=>{t.builtGroups.set(Ie(m,f.getSystem().build)),M4(f,u,t)},refresh:f=>M4(f,u,t),toggle:f=>{u.getOpt(f).each(m=>{qu.toggle(m)})},toggleWithoutFocusing:f=>{u.getOpt(f).each(qu.toggleWithoutFocusing)},isOpen:f=>u.getOpt(f).map(qu.isOpen).getOr(!1),reposition:f=>{u.getOpt(f).each(m=>{qu.reposition(m)})},getOverflow:f=>u.getOpt(f).bind(qu.getToolbar)},domModification:{attributes:{role:"group"}}}},R4=Ra({name:"SplitFloatingToolbar",configFields:L9(),partFields:F9(),factory:H9,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),V9=te([Rh(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),oo("onOpened"),oo("onClosed")].concat(k6())),R6=te([or({factory:Mr,schema:cp(),name:"primary"}),or({factory:Mr,schema:cp(),name:"overflow",overrides:t=>({toolbarBehaviours:qe([Pa.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Do(s,t,"overflow-button").each(a=>{kn.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{Do(s,t,"overflow-button").each(kn.on)}}),It.config({mode:"acyclic",onEscape:s=>(Do(s,t,"overflow-button").each(tn.focus),x.some(!0))})])})}),ga({name:"overflow-button",overrides:t=>({buttonBehaviours:qe([kn.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),ga({name:"overflow-group"})]),z9=(t,s)=>Do(t,s,"overflow").map(Pa.hasGrown).getOr(!1),P4=(t,s,a)=>{Do(t,s,"overflow-button").each(l=>{Do(t,s,"overflow").each(u=>{if(N4(t,s),Pa.hasShrunk(u)){const f=s.onOpened;s.onOpened=m=>{a||It.focusIn(u),f(m),s.onOpened=f}}else{const f=s.onClosed;s.onClosed=m=>{a||tn.focus(l),f(m),s.onClosed=f}}Pa.toggleGrow(u)})})},N4=(t,s)=>{Do(t,s,"overflow").each(a=>{D4(t,s,l=>{const u=Ie(l,f=>tl(f));Mr.setGroups(a,u)}),Do(t,s,"overflow-button").each(l=>{Pa.hasGrown(a)&&kn.on(l)}),Pa.refresh(a)})},U9=(t,s,a,l)=>{const u="alloy.toolbar.toggle",f=(m,p)=>{const v=Ie(p,m.getSystem().build);t.builtGroups.set(v)};return{uid:t.uid,dom:t.dom,components:s,behaviours:zr(t.splitToolbarBehaviours,[hs.config({others:{overflowGroup:m=>V2.sketch({...l["overflow-group"](),items:[Dr.sketch({...l["overflow-button"](),action:p=>{Zn(m,u)}})]})}}),cn("toolbar-toggle-events",[Le(u,m=>{P4(m,t,!1)})])]),apis:{setGroups:(m,p)=>{f(m,p),N4(m,t)},refresh:m=>N4(m,t),toggle:m=>{P4(m,t,!1)},toggleWithoutFocusing:m=>{P4(m,t,!0)},isOpen:m=>z9(m,t)},domModification:{attributes:{role:"group"}}}},I4=Ra({name:"SplitSlidingToolbar",configFields:V9(),partFields:R6(),factory:U9,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),Z9=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:v2(t.action),behaviours:zr(t.tabButtonBehaviours,[tn.config({}),It.config({mode:"execution",useSpace:!0,useEnter:!0}),xt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),W9=ol({name:"TabButton",configFields:[ve("uid",void 0),We("value"),Qr("dom","dom",lx(()=>({attributes:{role:"tab",id:Ct("aria"),"aria-selected":"false"}})),pc()),mo("action"),ve("domModification",{}),pr("tabButtonBehaviours",[tn,It,xt]),We("view")],factory:Z9}),j9=te([We("tabs"),We("dom"),ve("clickToDismiss",!1),pr("tabbarBehaviours",[io,It]),Rh(["tabClass","selectedClass"])]),G9=H1({factory:W9,name:"tabs",unit:"tab",overrides:t=>{const s=(l,u)=>{io.dehighlight(l,u),Wt(l,LO(),{tabbar:l,button:u})},a=(l,u)=>{io.highlight(l,u),Wt(l,wx(),{tabbar:l,button:u})};return{action:l=>{const u=l.getSystem().getByUid(t.uid).getOrDie(),f=io.isHighlighted(u,l);(f&&t.clickToDismiss?s:f?ee:a)(u,l)},domModification:{classes:[t.markers.tabClass]}}}}),K9=te([G9]),Y9=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:zr(t.tabbarBehaviours,[io.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(u,f)=>{an(f.element,"aria-selected","true")},onDehighlight:(u,f)=>{an(f.element,"aria-selected","false")}}),It.config({mode:"flow",getInitial:u=>io.getHighlighted(u).map(f=>f.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),P6=Ra({name:"Tabbar",configFields:j9(),partFields:K9(),factory:Y9}),X9=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:zr(t.tabviewBehaviours,[fn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),N6=ol({name:"Tabview",configFields:[pr("tabviewBehaviours",[fn])],factory:X9}),J9=te([ve("selectFirst",!0),oo("onChangeTab"),oo("onDismissTab"),ve("tabs",[]),pr("tabSectionBehaviours",[])]),Q9=or({factory:P6,schema:[We("dom"),yc("markers",[We("tabClass"),We("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),q9=or({factory:N6,name:"tabview"}),eV=te([Q9,q9]),tV=(t,s,a,l)=>{const u=m=>{const p=xt.getValue(m);Do(m,t,"tabview").each(v=>{_t(t.tabs,E=>E.value===p).each(E=>{const D=E.view();er(m.element,"id").each(I=>{an(v.element,"aria-labelledby",I)}),fn.set(v,D),t.onChangeTab(v,m,D)})})},f=(m,p)=>{Do(m,t,"tabbar").each(v=>{p(v).each(Zm)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:bv(t.tabSectionBehaviours),events:Jo(Ot([t.selectFirst?[$o((m,p)=>{f(m,io.getFirst)})]:[],[Le(wx(),(m,p)=>{const v=p.event.button;u(v)}),Le(LO(),(m,p)=>{const v=p.event.button;t.onDismissTab(m,v)})]])),apis:{getViewItems:m=>Do(m,t,"tabview").map(p=>fn.contents(p)).getOr([]),showTab:(m,p)=>{f(m,C=>{const E=io.getCandidates(C);return _t(E,I=>xt.getValue(I)===p).filter(I=>!io.isHighlighted(C,I))})}}}},Uf=Ra({name:"TabSection",configFields:J9(),partFields:eV(),factory:tV,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),z2=(t,s,a)=>{const l=xt.getValue(a);xt.setValue(s,l),B6(s)},I6=(t,s)=>{const a=t.element,l=gc(a),u=a.dom;qs(a,"type")!=="number"&&s(u,l)},B6=t=>{I6(t,(s,a)=>s.setSelectionRange(a.length,a.length))},L6=(t,s)=>{I6(t,(a,l)=>a.setSelectionRange(s,l.length))},F6=(t,s,a)=>{if(t.selectsOver){const l=xt.getValue(s),u=t.getDisplayText(l),f=xt.getValue(a);return t.getDisplayText(f).indexOf(u)===0?x.some(()=>{z2(t,s,a),L6(s,u.length)}):x.none()}else return x.none()},B4=te("alloy.typeahead.itemexecute"),nV=(t,s,a,l)=>{const u=(D,I,H)=>{t.previewing.set(!1);const W=hs.getCoupled(D,"sandbox");if(Qn.isOpen(W))Wn.getCurrent(W).each(Q=>{io.getHighlighted(Q).fold(()=>{H(Q)},()=>{sk(W,Q.element,"keydown",I)})});else{const Q=se=>{Wn.getCurrent(se).each(H)};E2(t,m(D),D,W,l,Q,Ga.HighlightMenuAndItem).get(ee)}},f=HM(t),m=D=>I=>I.map(H=>{const W=Dn(H.menus),Q=ke(W,X=>eo(X.items,ie=>ie.type==="item"));return xt.getState(D).update(Ie(Q,X=>X.data)),H}),p=D=>Wn.getCurrent(D),v="typeaheadevents",C=[tn.config({}),xt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:D=>gc(D.element),getFallbackEntry:D=>({value:D,meta:{}}),setValue:(D,I)=>{Om(D.element,t.model.getDisplayText(I))},...t.initialData.map(D=>Nm("initialValue",D)).getOr({})}}),ME.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(D,I)=>{const H=hs.getCoupled(D,"sandbox");if(tn.isFocused(D)&&gc(D.element).length>=t.minChars){const Q=p(H).bind(X=>io.getHighlighted(X).map(xt.getValue));t.previewing.set(!0);const se=X=>{p(H).each(ie=>{Q.fold(()=>{t.model.selectsOver&&io.highlightFirst(ie)},le=>{io.highlightBy(ie,xe=>xt.getValue(xe).value===le.value),io.getHighlighted(ie).orThunk(()=>(io.highlightFirst(ie),x.none()))})})};E2(t,m(D),D,H,l,se,Ga.HighlightJustMenu).get(ee)}},cancelEvent:L1()}),It.config({mode:"special",onDown:(D,I)=>(u(D,I,io.highlightFirst),x.some(!0)),onEscape:D=>{const I=hs.getCoupled(D,"sandbox");return Qn.isOpen(I)?(Qn.close(I),x.some(!0)):x.none()},onUp:(D,I)=>(u(D,I,io.highlightLast),x.some(!0)),onEnter:D=>{const I=hs.getCoupled(D,"sandbox"),H=Qn.isOpen(I);if(H&&!t.previewing.get())return p(I).bind(W=>io.getHighlighted(W)).map(W=>(Wt(D,B4(),{item:W}),!0));{const W=xt.getValue(D);return Zn(D,L1()),t.onExecute(I,D,W),H&&Qn.close(I),x.some(!0)}}}),kn.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),hs.config({others:{sandbox:D=>T2(t,D,{onOpen:()=>kn.on(D),onClose:()=>{t.lazyTypeaheadComp.get().each(I=>ls(I.element,"aria-activedescendant")),kn.off(D)}})}}),cn(v,[$o(D=>{t.lazyTypeaheadComp.set(x.some(D))}),eu(D=>{t.lazyTypeaheadComp.set(x.none())}),Bd(D=>{const I=ee;JE(t,m(D),D,l,I,Ga.HighlightMenuAndItem).get(ee)}),Le(B4(),(D,I)=>{const H=hs.getCoupled(D,"sandbox");z2(t.model,D,I.event.item),Zn(D,L1()),t.onItemExecute(D,H,I.event.item,xt.getValue(D)),Qn.close(H),B6(D)})].concat(t.dismissOnBlur?[Le(B1(),D=>{const I=hs.getCoupled(D,"sandbox");Yr(I.element).isNone()&&Qn.close(I)})]:[]))],E={[Vu()]:[xt.name(),ME.name(),v],...t.eventOrder};return{uid:t.uid,dom:VM(ho(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...f,...zr(t.typeaheadBehaviours,C)},eventOrder:E}},_6=te([mo("lazySink"),We("fetch"),ve("minChars",5),ve("responseTime",1e3),oo("onOpen"),ve("getHotspot",x.some),ve("getAnchorOverrides",te({})),ve("layouts",x.none()),ve("eventOrder",{}),_b("model",{},[ve("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),ve("selectsOver",!0),ve("populateFromBrowse",!0)]),oo("onSetValue"),Ks("onExecute"),oo("onItemExecute"),ve("inputClasses",[]),ve("inputAttributes",{}),ve("inputStyles",{}),ve("matchWidth",!0),ve("useMinWidth",!1),ve("dismissOnBlur",!0),Rh(["openClass"]),mo("initialData"),mo("listRole"),pr("typeaheadBehaviours",[tn,xt,ME,It,kn,hs]),Da("lazyTypeaheadComp",()=>Rt(x.none)),Da("previewing",()=>Rt(!0))].concat(k2()).concat(e4())),oV=te([ga({schema:[Ox()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,l)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(u=>{F6(t.model,u,l).fold(()=>{t.model.selectsOver?(io.dehighlight(a,l),t.previewing.set(!0)):t.previewing.set(!1)},f=>{f(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(u=>{t.model.populateFromBrowse&&z2(t.model,u,l),er(l.element,"id").each(f=>an(u.element,"aria-activedescendant",f))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(l=>(Wt(l,B4(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(l=>{t.model.populateFromBrowse&&z2(t.model,l,a)})}})})]),sV=Ra({name:"Typeahead",configFields:_6(),partFields:oV(),factory:nV});var rV=tinymce.util.Tools.resolve("tinymce.ThemeManager"),U2=tinymce.util.Tools.resolve("tinymce.util.Delay"),Kv=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),aV=tinymce.util.Tools.resolve("tinymce.EditorManager"),Kd=tinymce.util.Tools.resolve("tinymce.Env"),zl;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(zl||(zl={}));var Zf;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Zf||(Zf={}));const xo=t=>s=>s.options.get(t),Yv=t=>s=>x.from(t(s)),$6=t=>{const s=Kd.deviceType.isPhone(),a=Kd.deviceType.isTablet()||s,l=t.options.register,u=m=>B(m)||m===!1,f=m=>B(m)||Fe(m);l("skin",{processor:m=>B(m)||m===!1,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:f,default:Math.max(t.getElement().offsetHeight,400)}),l("width",{processor:f,default:Kv.DOM.getStyle(t.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:m=>B(m)||re(m),default:!s}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:m=>re(m)||B(m)||K(m)?{value:m,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Oo(9,m=>{l("toolbar"+(m+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:Zf.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:t.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:u,default:"#top"}),l("anchor_bottom",{processor:u,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:m=>m==="both"||re(m),default:!Kd.deviceType.isTouch()}),l("sidebar_show",{processor:"string"}),l("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),l("default_font_stack",{processor:"string[]",default:[]})},H6=xo("readonly"),L4=xo("disabled"),pp=xo("height"),Wf=xo("width"),Z2=Yv(xo("min_width")),W2=Yv(xo("min_height")),j2=Yv(xo("max_width")),F4=Yv(xo("max_height")),V6=Yv(xo("style_formats")),z6=xo("style_formats_merge"),U6=xo("style_formats_autohide"),Z6=xo("content_langs"),W6=xo("removed_menuitems"),vp=xo("toolbar_mode"),j6=xo("toolbar_groups"),_4=xo("toolbar_location"),iV=xo("fixed_toolbar_container"),G6=xo("fixed_toolbar_container_target"),Cg=xo("toolbar_persist"),jf=xo("toolbar_sticky_offset"),K6=xo("menubar"),Xv=xo("toolbar"),$4=xo("file_picker_callback"),Jv=xo("file_picker_validator_handler"),Y6=xo("font_size_input_default_unit"),bp=xo("file_picker_types"),yp=xo("typeahead_urls"),X6=xo("anchor_top"),J6=xo("anchor_bottom"),Q6=xo("draggable_modal"),q6=xo("statusbar"),eR=xo("elementpath"),H4=xo("branding"),Qv=xo("resize"),tR=xo("paste_as_text"),G2=xo("sidebar_show"),nR=xo("promotion"),oR=xo("help_accessibility"),V4=xo("default_font_stack"),z4=xo("skin"),K2=t=>t.options.get("skin")===!1,Ic=t=>t.options.get("menubar")!==!1,Gf=t=>{const s=t.options.get("skin_url");if(K2(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return aV.baseURL+"/skins/ui/"+a}},lV=t=>x.from(t.options.get("skin_url")),sR=t=>t.options.get("line_height_formats").split(" "),qv=t=>{const s=Xv(t),a=B(s),l=K(s)&&s.length>0;return!Cp(t)&&(l||a||s===!0)},U4=t=>{const s=Oo(9,l=>t.options.get("toolbar"+(l+1))),a=eo(s,B);return Kr(a.length>0,a)},Cp=t=>U4(t).fold(()=>{const s=Xv(t);return pe(s,B)&&s.length>0},et),Z4=t=>_4(t)===Zf.bottom,rR=t=>{var s;if(!t.inline)return x.none();const a=(s=iV(t))!==null&&s!==void 0?s:"";if(a.length>0)return ko(Aa(),a);const l=G6(t);return fe(l)?x.some(rt.fromDom(l)):x.none()},Sp=t=>t.inline&&rR(t).isSome(),W4=t=>rR(t).getOrThunk(()=>bd(dr(rt.fromDom(t.getElement())))),j4=t=>t.inline&&!Ic(t)&&!qv(t)&&!Cp(t),xp=t=>(t.options.get("toolbar_sticky")||t.inline)&&!Sp(t)&&!j4(t),Kf=t=>!Sp(t)&&t.options.get("ui_mode")==="split",aR=t=>{const s=t.options.get("menu");return ot(s,a=>({...a,items:a.items}))};var G4=Object.freeze({__proto__:null,get ToolbarMode(){return zl},get ToolbarLocation(){return Zf},register:$6,getSkinUrl:Gf,getSkinUrlOption:lV,isReadOnly:H6,isDisabled:L4,getSkin:z4,isSkinDisabled:K2,getHeightOption:pp,getWidthOption:Wf,getMinWidthOption:Z2,getMinHeightOption:W2,getMaxWidthOption:j2,getMaxHeightOption:F4,getUserStyleFormats:V6,shouldMergeStyleFormats:z6,shouldAutoHideStyleFormats:U6,getLineHeightFormats:sR,getContentLanguages:Z6,getRemovedMenuItems:W6,isMenubarEnabled:Ic,isMultipleToolbars:Cp,isToolbarEnabled:qv,isToolbarPersist:Cg,getMultipleToolbarsOption:U4,getUiContainer:W4,useFixedContainer:Sp,isSplitUiMode:Kf,getToolbarMode:vp,isDraggableModal:Q6,isDistractionFree:j4,isStickyToolbar:xp,getStickyToolbarOffset:jf,getToolbarLocation:_4,isToolbarLocationBottom:Z4,getToolbarGroups:j6,getMenus:aR,getMenubar:K6,getToolbar:Xv,getFilePickerCallback:$4,getFilePickerTypes:bp,useTypeaheadUrls:yp,getAnchorTop:X6,getAnchorBottom:J6,getFilePickerValidatorHandler:Jv,getFontSizeInputDefaultUnit:Y6,useStatusBar:q6,useElementPath:eR,promotionEnabled:nR,useBranding:H4,getResize:Qv,getPasteAsText:tR,getSidebarShow:G2,useHelpAccessibility:oR,getDefaultFontStack:V4});const cV=["visible","hidden","clip"],iR=t=>gd(t).length>0&&!An(cV,t),lR=t=>{if(ib(t)){const s=k(t,"overflow-x"),a=k(t,"overflow-y");return iR(s)||iR(a)}else return!1},K4=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),uV=(t,s)=>{const a=ox(s,lR),l=a.length===0?gh(s).map(Ou).map(u=>ox(u,lR)).getOr([]):a;return bs(l).map(u=>({element:u,others:l.slice(1),isFullscreen:()=>K4(t)}))},Yf=(t,s)=>Kf(t)?uV(t,s):x.none(),Sg=t=>{const s=[...Ie(t.others,$r),fa()];return t.isFullscreen()?fa():r7($r(t.element),s)};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:Y4,setPrototypeOf:cR,isFrozen:dV,getPrototypeOf:fV,getOwnPropertyDescriptor:mV}=Object;let{freeze:Ii,seal:Ul,create:X4}=Object,{apply:J4,construct:Q4}=typeof Reflect<"u"&&Reflect;Ii||(Ii=function(s){return s}),Ul||(Ul=function(s){return s}),J4||(J4=function(s,a,l){return s.apply(a,l)}),Q4||(Q4=function(s,a){return new s(...a)});const Y2=Li(Array.prototype.forEach),gV=Li(Array.prototype.lastIndexOf),uR=Li(Array.prototype.pop),wp=Li(Array.prototype.push),Ep=Li(Array.prototype.splice),X2=Li(String.prototype.toLowerCase),q4=Li(String.prototype.toString),dR=Li(String.prototype.match),Xf=Li(String.prototype.replace),Zl=Li(String.prototype.indexOf),e3=Li(String.prototype.trim),Bc=Li(Object.prototype.hasOwnProperty),Bi=Li(RegExp.prototype.test),e0=hV(TypeError);function Li(t){return function(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];return J4(t,s,l)}}function hV(t){return function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return Q4(t,a)}}function Ro(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:X2;cR&&cR(t,null);let l=s.length;for(;l--;){let u=s[l];if(typeof u=="string"){const f=a(u);f!==u&&(dV(s)||(s[l]=f),u=f)}t[u]=!0}return t}function fR(t){for(let s=0;s<t.length;s++)Bc(t,s)||(t[s]=null);return t}function xg(t){const s=X4(null);for(const[a,l]of Y4(t))Bc(t,a)&&(Array.isArray(l)?s[a]=fR(l):l&&typeof l=="object"&&l.constructor===Object?s[a]=xg(l):s[a]=l);return s}function t0(t,s){for(;t!==null;){const l=mV(t,s);if(l){if(l.get)return Li(l.get);if(typeof l.value=="function")return Li(l.value)}t=fV(t)}function a(){return null}return a}const t3=Ii(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),n3=Ii(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),J2=Ii(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),mR=Ii(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Q2=Ii(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),pV=Ii(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),gR=Ii(["#text"]),hR=Ii(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),o3=Ii(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),pR=Ii(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),q2=Ii(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),s3=Ul(/\{\{[\w\W]*|[\w\W]*\}\}/gm),vV=Ul(/<%[\w\W]*|[\w\W]*%>/gm),bV=Ul(/\$\{[\w\W]*/gm),vR=Ul(/^data-[\-\w.\u00B7-\uFFFF]+$/),yV=Ul(/^aria-[\-\w]+$/),bR=Ul(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),CV=Ul(/^(?:\w+script|data):/i),SV=Ul(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),yR=Ul(/^html$/i),xV=Ul(/^[a-z][.\w]*(-[.\w]+)+$/i);var CR=Object.freeze({__proto__:null,ARIA_ATTR:yV,ATTR_WHITESPACE:SV,CUSTOM_ELEMENT:xV,DATA_ATTR:vR,DOCTYPE_NAME:yR,ERB_EXPR:vV,IS_ALLOWED_URI:bR,IS_SCRIPT_OR_DATA:CV,MUSTACHE_EXPR:s3,TMPLIT_EXPR:bV});const Tp={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},SR=function(){return typeof window>"u"?null:window},wV=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let l=null;const u="data-tt-policy-suffix";a&&a.hasAttribute(u)&&(l=a.getAttribute(u));const f="dompurify"+(l?"#"+l:"");try{return s.createPolicy(f,{createHTML(m){return m},createScriptURL(m){return m}})}catch{return console.warn("TrustedTypes policy "+f+" could not be created."),null}},xR=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function wR(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:SR();const s=Gn=>wR(Gn);if(s.version="3.2.4",s.removed=[],!t||!t.document||t.document.nodeType!==Tp.document||!t.Element)return s.isSupported=!1,s;let{document:a}=t;const l=a,u=l.currentScript,{DocumentFragment:f,HTMLTemplateElement:m,Node:p,Element:v,NodeFilter:C,NamedNodeMap:E=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:D,DOMParser:I,trustedTypes:H}=t,W=v.prototype,Q=t0(W,"cloneNode"),se=t0(W,"remove"),X=t0(W,"nextSibling"),ie=t0(W,"childNodes"),le=t0(W,"parentNode");if(typeof m=="function"){const Gn=a.createElement("template");Gn.content&&Gn.content.ownerDocument&&(a=Gn.content.ownerDocument)}let xe,Me="";const{implementation:vt,createNodeIterator:Ge,createDocumentFragment:Pe,getElementsByTagName:wt}=a,{importNode:Kt}=l;let Ft=xR();s.isSupported=typeof Y4=="function"&&typeof le=="function"&&vt&&vt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:_n,ERB_EXPR:rn,TMPLIT_EXPR:vn,DATA_ATTR:Pt,ARIA_ATTR:Ze,IS_SCRIPT_OR_DATA:lt,ATTR_WHITESPACE:Jt,CUSTOM_ELEMENT:bn}=CR;let{IS_ALLOWED_URI:Zt}=CR,hn=null;const wo=Ro({},[...t3,...n3,...J2,...Q2,...gR]);let bo=null;const gi=Ro({},[...hR,...o3,...pR,...q2]);let rs=Object.seal(X4(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),cl=null,oa=null,ul=!0,dl=!0,Vc=!1,z0=!0,ld=!1,BA=!0,Yg=!1,LA=!1,uK=!1,AS=!1,cB=!1,uB=!1,NX=!0,IX=!1;const JJ="user-content-";let dK=!0,FA=!1,OS={},kS=null;const BX=Ro({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let LX=null;const FX=Ro({},["audio","video","img","source","image","track"]);let fK=null;const _X=Ro({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),dB="http://www.w3.org/1998/Math/MathML",fB="http://www.w3.org/2000/svg",Xg="http://www.w3.org/1999/xhtml";let DS=Xg,mK=!1,gK=null;const QJ=Ro({},[dB,fB,Xg],q4);let mB=Ro({},["mi","mo","mn","ms","mtext"]),gB=Ro({},["annotation-xml"]);const qJ=Ro({},["title","style","font","a","script"]);let _A=null;const eQ=["application/xhtml+xml","text/html"],tQ="text/html";let hi=null,MS=null;const nQ=a.createElement("form"),$X=function(De){return De instanceof RegExp||De instanceof Function},hK=function(){let De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(MS&&MS===De)){if((!De||typeof De!="object")&&(De={}),De=xg(De),_A=eQ.indexOf(De.PARSER_MEDIA_TYPE)===-1?tQ:De.PARSER_MEDIA_TYPE,hi=_A==="application/xhtml+xml"?q4:X2,hn=Bc(De,"ALLOWED_TAGS")?Ro({},De.ALLOWED_TAGS,hi):wo,bo=Bc(De,"ALLOWED_ATTR")?Ro({},De.ALLOWED_ATTR,hi):gi,gK=Bc(De,"ALLOWED_NAMESPACES")?Ro({},De.ALLOWED_NAMESPACES,q4):QJ,fK=Bc(De,"ADD_URI_SAFE_ATTR")?Ro(xg(_X),De.ADD_URI_SAFE_ATTR,hi):_X,LX=Bc(De,"ADD_DATA_URI_TAGS")?Ro(xg(FX),De.ADD_DATA_URI_TAGS,hi):FX,kS=Bc(De,"FORBID_CONTENTS")?Ro({},De.FORBID_CONTENTS,hi):BX,cl=Bc(De,"FORBID_TAGS")?Ro({},De.FORBID_TAGS,hi):{},oa=Bc(De,"FORBID_ATTR")?Ro({},De.FORBID_ATTR,hi):{},OS=Bc(De,"USE_PROFILES")?De.USE_PROFILES:!1,ul=De.ALLOW_ARIA_ATTR!==!1,dl=De.ALLOW_DATA_ATTR!==!1,Vc=De.ALLOW_UNKNOWN_PROTOCOLS||!1,z0=De.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ld=De.SAFE_FOR_TEMPLATES||!1,BA=De.SAFE_FOR_XML!==!1,Yg=De.WHOLE_DOCUMENT||!1,AS=De.RETURN_DOM||!1,cB=De.RETURN_DOM_FRAGMENT||!1,uB=De.RETURN_TRUSTED_TYPE||!1,uK=De.FORCE_BODY||!1,NX=De.SANITIZE_DOM!==!1,IX=De.SANITIZE_NAMED_PROPS||!1,dK=De.KEEP_CONTENT!==!1,FA=De.IN_PLACE||!1,Zt=De.ALLOWED_URI_REGEXP||bR,DS=De.NAMESPACE||Xg,mB=De.MATHML_TEXT_INTEGRATION_POINTS||mB,gB=De.HTML_INTEGRATION_POINTS||gB,rs=De.CUSTOM_ELEMENT_HANDLING||{},De.CUSTOM_ELEMENT_HANDLING&&$X(De.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(rs.tagNameCheck=De.CUSTOM_ELEMENT_HANDLING.tagNameCheck),De.CUSTOM_ELEMENT_HANDLING&&$X(De.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(rs.attributeNameCheck=De.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),De.CUSTOM_ELEMENT_HANDLING&&typeof De.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(rs.allowCustomizedBuiltInElements=De.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ld&&(dl=!1),cB&&(AS=!0),OS&&(hn=Ro({},gR),bo=[],OS.html===!0&&(Ro(hn,t3),Ro(bo,hR)),OS.svg===!0&&(Ro(hn,n3),Ro(bo,o3),Ro(bo,q2)),OS.svgFilters===!0&&(Ro(hn,J2),Ro(bo,o3),Ro(bo,q2)),OS.mathMl===!0&&(Ro(hn,Q2),Ro(bo,pR),Ro(bo,q2))),De.ADD_TAGS&&(hn===wo&&(hn=xg(hn)),Ro(hn,De.ADD_TAGS,hi)),De.ADD_ATTR&&(bo===gi&&(bo=xg(bo)),Ro(bo,De.ADD_ATTR,hi)),De.ADD_URI_SAFE_ATTR&&Ro(fK,De.ADD_URI_SAFE_ATTR,hi),De.FORBID_CONTENTS&&(kS===BX&&(kS=xg(kS)),Ro(kS,De.FORBID_CONTENTS,hi)),dK&&(hn["#text"]=!0),Yg&&Ro(hn,["html","head","body"]),hn.table&&(Ro(hn,["tbody"]),delete cl.tbody),De.TRUSTED_TYPES_POLICY){if(typeof De.TRUSTED_TYPES_POLICY.createHTML!="function")throw e0('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof De.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw e0('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');xe=De.TRUSTED_TYPES_POLICY,Me=xe.createHTML("")}else xe===void 0&&(xe=wV(H,u)),xe!==null&&typeof Me=="string"&&(Me=xe.createHTML(""));Ii&&Ii(De),MS=De}},HX=Ro({},[...n3,...J2,...mR]),VX=Ro({},[...Q2,...pV]),oQ=function(De){let Gt=le(De);(!Gt||!Gt.tagName)&&(Gt={namespaceURI:DS,tagName:"template"});const $n=X2(De.tagName),Rr=X2(Gt.tagName);return gK[De.namespaceURI]?De.namespaceURI===fB?Gt.namespaceURI===Xg?$n==="svg":Gt.namespaceURI===dB?$n==="svg"&&(Rr==="annotation-xml"||mB[Rr]):!!HX[$n]:De.namespaceURI===dB?Gt.namespaceURI===Xg?$n==="math":Gt.namespaceURI===fB?$n==="math"&&gB[Rr]:!!VX[$n]:De.namespaceURI===Xg?Gt.namespaceURI===fB&&!gB[Rr]||Gt.namespaceURI===dB&&!mB[Rr]?!1:!VX[$n]&&(qJ[$n]||!HX[$n]):!!(_A==="application/xhtml+xml"&&gK[De.namespaceURI]):!1},sm=function(De){wp(s.removed,{element:De});try{le(De).removeChild(De)}catch{se(De)}},$A=function(De,Gt){try{wp(s.removed,{attribute:Gt.getAttributeNode(De),from:Gt})}catch{wp(s.removed,{attribute:null,from:Gt})}if(Gt.removeAttribute(De),De==="is")if(AS||cB)try{sm(Gt)}catch{}else try{Gt.setAttribute(De,"")}catch{}},zX=function(De){let Gt=null,$n=null;if(uK)De="<remove></remove>"+De;else{const pi=dR(De,/^[\r\n\t ]+/);$n=pi&&pi[0]}_A==="application/xhtml+xml"&&DS===Xg&&(De='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+De+"</body></html>");const Rr=xe?xe.createHTML(De):De;if(DS===Xg)try{Gt=new I().parseFromString(Rr,_A)}catch{}if(!Gt||!Gt.documentElement){Gt=vt.createDocument(DS,"template",null);try{Gt.documentElement.innerHTML=mK?Me:Rr}catch{}}const fl=Gt.body||Gt.documentElement;return De&&$n&&fl.insertBefore(a.createTextNode($n),fl.childNodes[0]||null),DS===Xg?wt.call(Gt,Yg?"html":"body")[0]:Yg?Gt.documentElement:fl},UX=function(De){return Ge.call(De.ownerDocument||De,De,C.SHOW_ELEMENT|C.SHOW_COMMENT|C.SHOW_TEXT|C.SHOW_PROCESSING_INSTRUCTION|C.SHOW_CDATA_SECTION,null)},pK=function(De){return De instanceof D&&(typeof De.nodeName!="string"||typeof De.textContent!="string"||typeof De.removeChild!="function"||!(De.attributes instanceof E)||typeof De.removeAttribute!="function"||typeof De.setAttribute!="function"||typeof De.namespaceURI!="string"||typeof De.insertBefore!="function"||typeof De.hasChildNodes!="function")},ZX=function(De){return typeof p=="function"&&De instanceof p};function Jg(Gn,De,Gt){Y2(Gn,$n=>{$n.call(s,De,Gt,MS)})}const WX=function(De){let Gt=null;if(Jg(Ft.beforeSanitizeElements,De,null),pK(De))return sm(De),!0;const $n=hi(De.nodeName);if(Jg(Ft.uponSanitizeElement,De,{tagName:$n,allowedTags:hn}),De.hasChildNodes()&&!ZX(De.firstElementChild)&&Bi(/<[/\w]/g,De.innerHTML)&&Bi(/<[/\w]/g,De.textContent)||De.nodeType===Tp.progressingInstruction||BA&&De.nodeType===Tp.comment&&Bi(/<[/\w]/g,De.data))return sm(De),!0;if(!hn[$n]||cl[$n]){if(!cl[$n]&&GX($n)&&(rs.tagNameCheck instanceof RegExp&&Bi(rs.tagNameCheck,$n)||rs.tagNameCheck instanceof Function&&rs.tagNameCheck($n)))return!1;if(dK&&!kS[$n]){const Rr=le(De)||De.parentNode,fl=ie(De)||De.childNodes;if(fl&&Rr){const pi=fl.length;for(let zc=pi-1;zc>=0;--zc){const rm=Q(fl[zc],!0);rm.__removalCount=(De.__removalCount||0)+1,Rr.insertBefore(rm,X(De))}}}return sm(De),!0}return De instanceof v&&!oQ(De)||($n==="noscript"||$n==="noembed"||$n==="noframes")&&Bi(/<\/no(script|embed|frames)/i,De.innerHTML)?(sm(De),!0):(ld&&De.nodeType===Tp.text&&(Gt=De.textContent,Y2([_n,rn,vn],Rr=>{Gt=Xf(Gt,Rr," ")}),De.textContent!==Gt&&(wp(s.removed,{element:De.cloneNode()}),De.textContent=Gt)),Jg(Ft.afterSanitizeElements,De,null),!1)},jX=function(De,Gt,$n){if(NX&&(Gt==="id"||Gt==="name")&&($n in a||$n in nQ))return!1;if(!(dl&&!oa[Gt]&&Bi(Pt,Gt))){if(!(ul&&Bi(Ze,Gt))){if(!bo[Gt]||oa[Gt]){if(!(GX(De)&&(rs.tagNameCheck instanceof RegExp&&Bi(rs.tagNameCheck,De)||rs.tagNameCheck instanceof Function&&rs.tagNameCheck(De))&&(rs.attributeNameCheck instanceof RegExp&&Bi(rs.attributeNameCheck,Gt)||rs.attributeNameCheck instanceof Function&&rs.attributeNameCheck(Gt))||Gt==="is"&&rs.allowCustomizedBuiltInElements&&(rs.tagNameCheck instanceof RegExp&&Bi(rs.tagNameCheck,$n)||rs.tagNameCheck instanceof Function&&rs.tagNameCheck($n))))return!1}else if(!fK[Gt]){if(!Bi(Zt,Xf($n,Jt,""))){if(!((Gt==="src"||Gt==="xlink:href"||Gt==="href")&&De!=="script"&&Zl($n,"data:")===0&&LX[De])){if(!(Vc&&!Bi(lt,Xf($n,Jt,"")))){if($n)return!1}}}}}}return!0},GX=function(De){return De!=="annotation-xml"&&dR(De,bn)},KX=function(De){Jg(Ft.beforeSanitizeAttributes,De,null);const{attributes:Gt}=De;if(!Gt||pK(De))return;const $n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:bo,forceKeepAttr:void 0};let Rr=Gt.length;for(;Rr--;){const fl=Gt[Rr],{name:pi,namespaceURI:zc,value:rm}=fl,HA=hi(pi);let $i=pi==="value"?rm:e3(rm);const rQ=$i;if($n.attrName=HA,$n.attrValue=$i,$n.keepAttr=!0,$n.forceKeepAttr=void 0,Jg(Ft.uponSanitizeAttribute,De,$n),$i=$n.attrValue,IX&&(HA==="id"||HA==="name")&&($A(pi,De),$i=JJ+$i),BA&&Bi(/((--!?|])>)|<\/(style|title)/i,$i)){$A(pi,De);continue}if($n.forceKeepAttr)continue;if(!$n.keepAttr){$A(pi,De);continue}if(!z0&&Bi(/\/>/i,$i)){$A(pi,De);continue}ld&&Y2([_n,rn,vn],XX=>{$i=Xf($i,XX," ")});const YX=hi(De.nodeName);if(!jX(YX,HA,$i)){$A(pi,De);continue}if(xe&&typeof H=="object"&&typeof H.getAttributeType=="function"&&!zc)switch(H.getAttributeType(YX,HA)){case"TrustedHTML":{$i=xe.createHTML($i);break}case"TrustedScriptURL":{$i=xe.createScriptURL($i);break}}if($i!==rQ)try{zc?De.setAttributeNS(zc,pi,$i):De.setAttribute(pi,$i),pK(De)?sm(De):uR(s.removed)}catch{}}Jg(Ft.afterSanitizeAttributes,De,null)},sQ=function Gn(De){let Gt=null;const $n=UX(De);for(Jg(Ft.beforeSanitizeShadowDOM,De,null);Gt=$n.nextNode();)Jg(Ft.uponSanitizeShadowNode,Gt,null),WX(Gt),KX(Gt),Gt.content instanceof f&&Gn(Gt.content);Jg(Ft.afterSanitizeShadowDOM,De,null)};return s.sanitize=function(Gn){let De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Gt=null,$n=null,Rr=null,fl=null;if(mK=!Gn,mK&&(Gn="<!-->"),typeof Gn!="string"&&!ZX(Gn))if(typeof Gn.toString=="function"){if(Gn=Gn.toString(),typeof Gn!="string")throw e0("dirty is not a string, aborting")}else throw e0("toString is not a function");if(!s.isSupported)return Gn;if(LA||hK(De),s.removed=[],typeof Gn=="string"&&(FA=!1),FA){if(Gn.nodeName){const rm=hi(Gn.nodeName);if(!hn[rm]||cl[rm])throw e0("root node is forbidden and cannot be sanitized in-place")}}else if(Gn instanceof p)Gt=zX("<!---->"),$n=Gt.ownerDocument.importNode(Gn,!0),$n.nodeType===Tp.element&&$n.nodeName==="BODY"||$n.nodeName==="HTML"?Gt=$n:Gt.appendChild($n);else{if(!AS&&!ld&&!Yg&&Gn.indexOf("<")===-1)return xe&&uB?xe.createHTML(Gn):Gn;if(Gt=zX(Gn),!Gt)return AS?null:uB?Me:""}Gt&&uK&&sm(Gt.firstChild);const pi=UX(FA?Gn:Gt);for(;Rr=pi.nextNode();)WX(Rr),KX(Rr),Rr.content instanceof f&&sQ(Rr.content);if(FA)return Gn;if(AS){if(cB)for(fl=Pe.call(Gt.ownerDocument);Gt.firstChild;)fl.appendChild(Gt.firstChild);else fl=Gt;return(bo.shadowroot||bo.shadowrootmode)&&(fl=Kt.call(l,fl,!0)),fl}let zc=Yg?Gt.outerHTML:Gt.innerHTML;return Yg&&hn["!doctype"]&&Gt.ownerDocument&&Gt.ownerDocument.doctype&&Gt.ownerDocument.doctype.name&&Bi(yR,Gt.ownerDocument.doctype.name)&&(zc="<!DOCTYPE "+Gt.ownerDocument.doctype.name+`>
`+zc),ld&&Y2([_n,rn,vn],rm=>{zc=Xf(zc,rm," ")}),xe&&uB?xe.createHTML(zc):zc},s.setConfig=function(){let Gn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};hK(Gn),LA=!0},s.clearConfig=function(){MS=null,LA=!1},s.isValidAttribute=function(Gn,De,Gt){MS||hK({});const $n=hi(Gn),Rr=hi(De);return jX($n,Rr,Gt)},s.addHook=function(Gn,De){typeof De=="function"&&wp(Ft[Gn],De)},s.removeHook=function(Gn,De){if(De!==void 0){const Gt=gV(Ft[Gn],De);return Gt===-1?void 0:Ep(Ft[Gn],Gt,1)[0]}return uR(Ft[Gn])},s.removeHooks=function(Gn){Ft[Gn]=[]},s.removeAllHooks=function(){Ft=xR()},s}var EV=wR();const ER=t=>EV().sanitize(t);var Wl=tinymce.util.Tools.resolve("tinymce.util.I18n");const TR={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-disc":!0,"list-bull-default":!0,"list-bull-square":!0},r3="temporary-placeholder",eC=t=>()=>$e(t,r3).getOr("!not found!"),n0=(t,s)=>{const a=t.toLowerCase();if(Wl.isRtl()){const l=yl(a,"-rtl");return yt(s,l)?l:a}else return a},AR=(t,s)=>$e(s,n0(t,s)),a3=(t,s)=>{const a=s();return AR(t,a).getOrThunk(eC(a))},TV=(t,s,a)=>{const l=s();return AR(t,l).or(a).getOrThunk(eC(l))},AV=t=>Wl.isRtl()?yt(TR,t):!1,OR=()=>cn("add-focusable",[$o(t=>{Nu(t.element,"svg").each(s=>an(s,"focusable","false"))})]),kR=(t,s,a,l)=>{var u,f;const m=AV(s)?["tox-icon--flip"]:[],p=$e(a,n0(s,a)).or(l).getOrThunk(eC(a));return{dom:{tag:t.tag,attributes:(u=t.attributes)!==null&&u!==void 0?u:{},classes:t.classes.concat(m),innerHtml:p},behaviours:qe([...(f=t.behaviours)!==null&&f!==void 0?f:[],OR()])}},ci=(t,s,a,l=x.none())=>kR(s,t,a(),l),Yd=(t,s,a)=>{const l=a(),u=_t(t,f=>yt(l,n0(f,l)));return kR(s,u.getOr(r3),l,x.none())},OV={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},i3=ol({name:"Notification",factory:t=>{const s=Ct("notification-text"),a=lo({dom:Xu(`<p id=${s}>${ER(t.backstageProvider.translate(t.text))}</p>`),behaviours:qe([fn.config({})])}),l=W=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${W}%`}}}),u=W=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${W}%`}}),f=lo({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(0)]},u(0)],behaviours:qe([fn.config({})])}),v={updateProgress:(W,Q)=>{W.getSystem().isConnected()&&f.getOpt(W).each(se=>{fn.set(se,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(Q)]},u(Q)])})},updateText:(W,Q)=>{if(W.getSystem().isConnected()){const se=a.get(W);fn.set(se,[Wo(Q)])}}},C=Ot([t.icon.toArray(),[t.level],x.from(OV[t.level]).toArray()]),E=lo(Dr.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[ci("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:qe([Mo.config({}),qo.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:W=>{t.onAction(W)}})),D=Yd(C,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),I={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:qe([fn.config({})])},H=[D,I];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},behaviours:qe([Mo.config({}),tn.config({}),It.config({mode:"special",onEscape:W=>(t.onAction(W),x.some(!0))})]),components:H.concat(t.progress?[f.asSpec()]:[]).concat([E.asSpec()]),apis:v}},configFields:[Es("level","info",["success","error","warning","warn","info"]),We("progress"),mo("icon"),We("onAction"),We("text"),We("iconProvider"),We("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var l3=(t,s,a,l)=>{const u=s.backstage.shared,f=()=>rt.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),m=()=>{const D=$r(f());return x.some(D)},p=D=>{m().each(I=>{Qe(D,H=>{mt(H.element,"width"),nr(H.element)>I.width&&gn(H.element,"width",I.width+"px")})})};return{open:(D,I,H)=>{const W=()=>{const le=Ge=>{fn.remove(Ge,se),X()},xe=(Ge,Pe)=>{ua(Ge.element).length===0?Me(Ge,Pe):vt(Ge,Pe)},Me=(Ge,Pe)=>{es.hide(Ge),l.clear(),Pe&&t.focus()},vt=(Ge,Pe)=>{Pe&&It.focusIn(Ge)};l.on(Ge=>{I();const Pe=H();le(Ge),xe(Ge,Pe)})},Q=()=>!xp(t)||!u.header.isPositionedAtTop(),se=pa(i3.sketch({text:D.text,level:An(["success","error","warning","warn","info"],D.type)?D.type:void 0,progress:D.progressBar===!0,icon:D.icon,onAction:W,iconProvider:u.providers.icons,backstageProvider:u.providers}));if(l.isSet()){const le=tl(se);l.on(xe=>{fn.append(xe,le),es.reposition(xe),se.hasConfigured(Qo)&&Qo.refresh(xe),p(xe.components())})}else{const le=pa(es.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:u.getSink,fireDismissalEventInstead:{},...u.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:qe([It.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),fn.config({}),...Q()?[Qo.config({contextual:{lazyContext:()=>x.some($r(f())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Ge=>Yf(t,Ge.element).map(wt=>({bounds:Sg(wt),optScrollEnv:x.some({currentScrollTop:wt.element.dom.scrollTop,scrollElmTop:fc(wt.element).top})})).getOrThunk(()=>({bounds:fa(),optScrollEnv:x.none()}))})]:[]])})),xe=tl(se),Me={maxHeightFunction:Um()},vt={...u.anchors.banner(),overrides:Me};l.set(le),a.add(le),es.showWithinBounds(le,xe,{anchor:vt},m)}Fe(D.timeout)&&D.timeout>0&&U2.setEditorTimeout(t,()=>{W()},D.timeout);const X=()=>{l.on(le=>{es.reposition(le),le.hasConfigured(Qo)&&Qo.refresh(le),p(le.components())})};return{close:W,reposition:X,text:le=>{i3.updateText(se,le)},settings:D,getEl:()=>se.element.dom,progressBar:{value:le=>{i3.updateProgress(se,le)}}}},close:D=>{D.close()},getArgs:D=>D.settings}};const kV={setup:(t,s)=>{const a=(u,f)=>{Wt(u,Qc(),{raw:f})},l=()=>t.getMenu().bind(io.getHighlighted);s.on("keydown",u=>{const f=u.which;t.isActive()&&(t.isMenuOpen()?f===13?(l().each(Zm),u.preventDefault()):f===40?(l().fold(()=>{t.getMenu().each(io.highlightFirst)},m=>{a(m,u)}),u.preventDefault(),u.stopImmediatePropagation()):(f===37||f===38||f===39)&&l().each(m=>{a(m,u),u.preventDefault(),u.stopImmediatePropagation()}):(f===13||f===38||f===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var c3;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(c3||(c3={}));var jl=c3;const u3="tox-menu-nav__js",Ap="tox-collection__item",o0="tox-swatch",d3={normal:u3,color:o0},f3="tox-collection__item--enabled",rl="tox-collection__group-heading",DR="tox-collection__item-icon",DV="tox-collection__item-image",MR="tox-collection__item-image-selector",nC="tox-collection__item-label",MV="tox-collection__item-accessory",RR="tox-collection__item-caret",RV="tox-collection__item-checkmark",wg="tox-collection__item--active",PR="tox-collection__item-container",PV="tox-collection__item-container--column",NR="tox-collection__item-container--row",IR="tox-collection__item-container--align-right",NV="tox-collection__item-container--align-left",IV="tox-collection__item-container--valign-top",BV="tox-collection__item-container--valign-middle",BR="tox-collection__item-container--valign-bottom",oC=t=>$e(d3,t).getOr(u3),LR=t=>t==="color"?"tox-swatches":"tox-menu",sC=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:LR(t),tieredMenu:"tox-tiered-menu"}),Xd=t=>{const s=sC(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:oC(t)}},FR=(t,s,a)=>{const l=sC(a);return{tag:"div",classes:Ot([[l.menu,`tox-menu-${s}-column`],t?[l.hasIcons]:[]])}},m3=[Qu.parts.items({})],rC=(t,s,a)=>{const l=sC(a);return{dom:{tag:"div",classes:Ot([[l.tieredMenu]])},markers:Xd(a)}},aC=Ct("refetch-trigger-event"),Eg=Ct("redirect-menu-item-interaction"),g3="tox-menu__searcher",s0=t=>ko(t.element,`.${g3}`).bind(s=>t.getSystem().getByDom(s).toOptional()),h3=s0,LV=(t,s)=>{xt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},_R=t=>{const s=xt.getValue(t),a=t.element.dom.selectionStart,l=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:l}},iC=(t,s)=>{er(s.element,"id").each(a=>an(t.element,"aria-activedescendant",a))},FV=t=>{const s=(u,f)=>(f.cut(),x.none()),a=(u,f)=>{const m={interactionEvent:f.event,eventType:f.event.raw.type};return Wt(u,Eg,m),x.some(!0)},l="searcher-events";return{dom:{tag:"div",classes:[Ap]},components:[ed.sketch({inputClasses:[g3,"tox-textfield"],inputAttributes:{...t.placeholder.map(u=>({placeholder:t.i18n(u)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:qe([cn(l,[Le(Ed(),u=>{Zn(u,aC)}),Le(Qc(),(u,f)=>{f.event.raw.key==="Escape"&&f.stop()})]),It.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[l,It.name()]}})]}},lC="tox-collection--results__js",p3=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Ct("aria-item-search-result-id"),"aria-selected":"false"}}}:t},r0=(t,s)=>a=>{const l=Io(a,s);return Ie(l,u=>({dom:t,components:u}))},v3=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Qu.parts.items({preprocess:t!=="auto"?r0({tag:"div",classes:["tox-swatches__row"]},t):ct})]}]}),$R=t=>({dom:{tag:"div",classes:["tox-menu","tox-image-selector-menu"]},components:[{dom:{tag:"div",classes:["tox-image-selector"]},components:[Qu.parts.items({preprocess:t!=="auto"?r0({tag:"div",classes:["tox-image-selector__row"]},t):ct})]}]}),Xa=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Qu.parts.items({preprocess:r0({tag:"div",classes:["tox-collection__group"]},t)})]}),b3=(t,s)=>{const a=[];let l=[];return Qe(t,(u,f)=>{s(u,f)?(l.length>0&&a.push(l),l=[],(yt(u.dom,"innerHtml")||u.components&&u.components.length>0)&&l.push(u)):l.push(u)}),l.length>0&&a.push(l),Ie(a,u=>({dom:{tag:"div",classes:["tox-collection__group"]},components:u}))},y3=(t,s,a)=>Qu.parts.items({preprocess:l=>{const u=Ie(l,a);return t!=="auto"&&t>1?r0({tag:"div",classes:["tox-collection__group"]},t)(u):b3(u,(f,m)=>s[m].type==="separator")}}),HR=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[y3(t,s,ct)]}),VR=(t,s,a=!0)=>{const l=Ct("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",lC].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:l}},components:[y3(t,s,p3)]}},_V=(t,s,a)=>{const l=Ct("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[FV({i18n:Wl.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],lC],attributes:{id:l}},components:[y3(t,s,p3)]}]}},$V=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Qu.parts.items({preprocess:a=>b3(a,(l,u)=>t[u].type==="separator")})]}),a0=t=>yn(t,s=>"icon"in s&&s.icon!==void 0),Lc=t=>(console.error(Pm(t)),console.log(t),x.none()),nd=(t,s,a,l,u)=>{const f=$V(a);return{value:t,dom:f.dom,components:f.components,items:a}},i0=(t,s,a,l,u)=>{const f=()=>u.menuType!=="searchable"?HR(l,a):u.searchMode.searchMode==="search-with-field"?_V(l,a,u.searchMode):VR(l,a);if(u.menuType==="color"){const m=v3(l);return{value:t,dom:m.dom,components:m.components,items:a}}else if(u.menuType==="imageselector"&&l!=="auto"){const m=$R(l);return{value:t,dom:m.dom,components:m.components,items:a}}else if(u.menuType==="normal"&&l==="auto"){const m=HR(l,a);return{value:t,dom:m.dom,components:m.components,items:a}}else if(u.menuType==="normal"||u.menuType==="searchable"){const m=f();return{value:t,dom:m.dom,components:m.components,items:a}}else if(u.menuType==="listpreview"&&l!=="auto"){const m=Xa(l);return{value:t,dom:m.dom,components:m.components,items:a}}else return{value:t,dom:FR(s,l,u.menuType),components:m3,items:a}},ps=mr("type"),Op=mr("name"),kp=mr("label"),Jd=mr("text"),zR=mr("title"),C3=mr("icon"),HV=mr("url"),Dp=mr("value"),VV=bc("fetch"),zV=bc("getSubmenuItems"),Tg=bc("onAction"),UV=bc("onItemAction"),ui=Zo("onSetup",()=>ee),cC=$s("name"),Jf=$s("text"),ZV=$s("role"),al=$s("icon"),Qf=$s("tooltip"),Ag=$s("label"),Mp=$s("shortcut"),l0=Xc("select"),od=qr("active",!1),UR=qr("borderless",!1),Gl=qr("enabled",!0),c0=qr("primary",!1),S3=t=>ve("columns",t),x3=ve("meta",{}),w3=Zo("onAction",ee),Og=t=>_o("type",t),E3=t=>Qr("name","name",Nb(()=>Ct(`${t}-name`)),Gs),WV=t=>Qr("value","value",Nb(()=>Ct(`${t}-value`)),pc()),ZR=[ps,Jd,qi("level",["info","warn","error","success"]),C3,ve("url","")],WR=on(ZR),jV=t=>[ps,t],jR=[ps,Jd,Gl,E3("button"),al,UR,px("buttonType",["primary","secondary","toolbar"]),c0,_o("context","mode:design")],GV=on(jR),kg=[ps,Op],Ja=kg.concat([Ag]),KV=kg.concat([kp,Gl,_o("context","mode:design")]),GR=on(KV),YV=Rb,XV=Ja.concat([S3("auto"),_o("context","mode:design")]),JV=on(XV),QV=Ah([Dp,Jd,C3]),KR=Ja.concat([_o("storageKey","default"),_o("context","mode:design")]),qV=on(KR),YR=Gs,Qd=on(Ja),T3=Gs,JR=kg.concat([_o("tag","textarea"),mr("scriptId"),mr("scriptUrl"),Xc("onFocus"),v7("settings",void 0)]),QR=kg.concat([_o("tag","textarea"),bc("init")]),A3=Rm(t=>gs("customeditor.old",Ji(QR),t).orThunk(()=>gs("customeditor.new",Ji(JR),t))),qR=Gs,ru=[Gl,Jf,ZV,Mp,WV("menuitem"),x3,_o("context","mode:design")],eP=on([ps,Op].concat(ru)),tP=Rb,O3=[E3("button"),al,Es("align","end",["start","end"]),c0,Gl,px("buttonType",["primary","secondary"]),_o("context","mode:design")],nP=[...O3,Jd],k3=[qi("type",["submit","cancel","custom"]),...nP],ez=[qi("type",["menu"]),Jf,Qf,al,Ei("items",eP),...O3],tz=[...O3,qi("type",["togglebutton"]),Qf,al,Jf,qr("active",!1)],oP=wi("type",{submit:k3,cancel:k3,custom:k3,menu:ez,togglebutton:tz}),sP=Ja.concat([_o("context","mode:design")]),nz=on(sP),oz=p7(),sz=t=>[ps,OO("columns"),t],uC=[ps,mr("html"),Es("presets","presentation",["presentation","document"]),Zo("onInit",ee),qr("stretched",!1)],rz=on(uC),az=Ja.concat([qr("border",!1),qr("sandboxed",!0),qr("streamContent",!1),qr("transparent",!0)]),rP=on(az),aP=Gs,iz=on(kg.concat([$s("height")])),lz=on([mr("url"),R1("zoom"),R1("cachedWidth"),R1("cachedHeight")]),D3=Ja.concat([$s("inputMode"),$s("placeholder"),qr("maximized",!1),Gl,_o("context","mode:design")]),cz=on(D3),iP=Gs,uz=t=>[ps,kp,t,Es("align","start",["start","center","end"]),$s("for")],dz=[Jd,Dp],fz=[Jd,Ei("items",gx("items",()=>M3))],M3=Lb([on(dz),on(fz)]),lP=Ja.concat([Ei("items",M3),Gl,_o("context","mode:design")]),mz=on(lP),gz=Gs,hz=Ja.concat([kO("items",[Jd,Dp]),MO("size",1),Gl,_o("context","mode:design")]),pz=on(hz),cP=Gs,vz=Ja.concat([qr("constrain",!0),Gl,_o("context","mode:design")]),uP=on(vz),dP=on([mr("width"),mr("height")]),bz=kg.concat([kp,MO("min",0),MO("max",0)]),yz=on(bz),Cz=Mb,Sz=[ps,Ei("header",Gs),Ei("cells",$u(Gs))],xz=on(Sz),wz=Ja.concat([$s("placeholder"),qr("maximized",!1),Gl,_o("context","mode:design")]),Ez=on(wz),Tz=Gs,R3=[_o("buttonType","default"),$s("text"),$s("tooltip"),$s("icon"),Cc("search",!1,Lb([Rb,on([$s("placeholder")])],t=>re(t)?t?x.some({placeholder:x.none()}):x.none():x.some(t))),bc("fetch"),Zo("onSetup",()=>ee),_o("context","mode:design")],fP=on([ps,...R3]),mP=t=>gs("menubutton",fP,t),gP=[qi("type",["directory","leaf"]),zR,mr("id"),ai("menu",fP),$s("customStateIcon"),$s("customStateIconTooltip")],fC=on(gP),Az=gP.concat([Ei("children",gx("children",()=>vc("type",{directory:hP,leaf:fC})))]),hP=on(Az),P3=vc("type",{directory:hP,leaf:fC}),Oz=[ps,Ei("items",P3),Xc("onLeafAction"),Xc("onToggleExpand"),xf("defaultExpandedIds",[],Gs),$s("defaultSelectedId")],N3=on(Oz),pP=Ja.concat([Es("filetype","file",["image","media","file"]),Gl,$s("picker_text"),_o("context","mode:design")]),kz=on(pP),Dz=on([Dp,x3]),mC=t=>Qr("items","items",Yc(),$u(Rm(s=>gs(`Checking item of ${t}`,gC,s).fold(a=>Sn.error(Pm(a)),a=>Sn.value(a))))),gC=dx(()=>vc("type",{alertbanner:WR,bar:on(jV(mC("bar"))),button:GV,checkbox:GR,colorinput:qV,colorpicker:Qd,dropzone:nz,grid:on(sz(mC("grid"))),iframe:rP,input:cz,listbox:mz,selectbox:pz,sizeinput:uP,slider:yz,textarea:Ez,urlinput:kz,customeditor:A3,htmlpanel:rz,imagepreview:iz,collection:JV,label:on(uz(mC("label"))),table:xz,tree:N3,panel:I3})),Mz=[ps,ve("classes",[]),Ei("items",gC)],I3=on(Mz),vP=[E3("tab"),zR,Ei("items",gC)],Rz=[ps,kO("tabs",vP)],bP=on(Rz),yP=nP,CP=oP,Pz=on([mr("title"),Qi("body",vc("type",{panel:I3,tabpanel:bP})),_o("size","normal"),xf("buttons",[],CP),ve("initialData",{}),Zo("onAction",ee),Zo("onChange",ee),Zo("onSubmit",ee),Zo("onClose",ee),Zo("onCancel",ee),Zo("onTabChange",ee)]),Nz=t=>gs("dialog",Pz,t),Iz=on([qi("type",["cancel","custom"]),...yP]),SP=on([mr("title"),mr("url"),R1("height"),R1("width"),vx("buttons",Iz),Zo("onAction",ee),Zo("onCancel",ee),Zo("onClose",ee),Zo("onMessage",ee)]),Bz=t=>gs("dialog",SP,t),hC=t=>O(t)?[t].concat(ke(Dn(t),hC)):K(t)?ke(t,hC):[],Lz=t=>B(t.type)&&B(t.name),Fz={checkbox:YV,colorinput:YR,colorpicker:T3,dropzone:oz,input:iP,iframe:aP,imagepreview:lz,selectbox:cP,sizeinput:dP,slider:Cz,listbox:gz,size:dP,textarea:Tz,urlinput:Dz,customeditor:qR,collection:QV,togglemenuitem:tP},B3=t=>x.from(Fz[t.type]),_z=t=>eo(hC(t),Lz),$z=t=>{const s=_z(t),a=ke(s,l=>B3(l).fold(()=>[],u=>[Qi(l.name,u)]));return on(a)},xP=t=>{var s;const a=kl(Nz(t)),l=$z(t),u=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:l,initialData:u}},qd={open:(t,s)=>{const a=xP(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=kl(Bz(s));return t(a)},redial:t=>xP(t)},wP=on([ps,Jf]),EP=t=>gs("separatormenuitem",wP,t),Hz=on([Og("autocompleteitem"),od,Gl,x3,Dp,Jf,al]),TP=t=>gs("Autocompleter.Separator",wP,t),Vz=t=>gs("Autocompleter.Item",Hz,t),Rp=[Gl,Qf,al,Jf,ui,_o("context","mode:design")],zz=on([ps,Tg,Mp].concat(Rp)),L3=t=>gs("toolbarbutton",zz,t),F3=[od].concat(Rp),AP=on(F3.concat([ps,Tg,Mp])),OP=t=>gs("ToggleButton",AP,t),pC=[Zo("predicate",it),Es("scope","node",["node","editor"]),Es("position","selection",["node","selection","line"])],kP=Rp.concat([Og("contextformbutton"),_o("align","end"),c0,Tg,Da("original",ct)]),Uz=F3.concat([Og("contextformbutton"),_o("align","end"),c0,Tg,Da("original",ct)]),Zz=Rp.concat([Og("contextformbutton")]),Wz=F3.concat([Og("contextformtogglebutton")]),DP=wi("type",{contextformbutton:kP,contextformtogglebutton:Uz}),_3=[Ag,Ei("commands",DP),ai("launch",wi("type",{contextformbutton:Zz,contextformtogglebutton:Wz})),Zo("onInput",ee),Zo("onSetup",ee)],jz=[...pC,..._3,qi("type",["contextform"]),Zo("initValue",te("")),$s("placeholder")],Gz=[...pC,..._3,qi("type",["contextsliderform"]),Zo("initValue",te(0)),Zo("min",te(0)),Zo("max",te(100))],MP=[...pC,..._3,qi("type",["contextsizeinputform"]),Zo("initValue",te({width:"",height:""}))],RP=wi("type",{contextform:jz,contextsliderform:Gz,contextsizeinputform:MP}),PP=t=>gs("ContextForm",RP,t),vC=Rp.concat([Og("contexttoolbarbutton")]),Kz=on([Og("contexttoolbar"),Ti("launch",vC),Qi("items",Lb([Gs,Ah([$s("name"),$s("label"),Ei("items",Gs)])]))].concat(pC)),Yz=t=>({name:t.name.getOrUndefined(),label:t.label.getOrUndefined(),items:t.items}),Xz=t=>({...t,launch:t.launch.getOrUndefined(),items:B(t.items)?t.items:Ie(t.items,Yz)}),Jz=t=>gs("ContextToolbar",Kz,t),NP=[ps,mr("src"),$s("alt"),xf("classes",[],Gs)],Qz=on(NP),qz=[ps,Jd,cC,xf("classes",["tox-collection__item-label"],Gs)],eU=on(qz),$3=dx(()=>vc("type",{cardimage:Qz,cardtext:eU,cardcontainer:IP})),IP=on([ps,_o("direction","horizontal"),_o("align","left"),_o("valign","middle"),Ei("items",$3)]),tU=on([ps,Ag,Ei("items",$3),ui,w3].concat(ru)),nU=t=>gs("cardmenuitem",tU,t),BP=on([ps,od,al,Ag].concat(ru)),oU=t=>gs("choicemenuitem",BP,t),H3=[ps,mr("fancytype"),w3],un=[ve("initData",{})].concat(H3),u0=[Xc("select"),_b("initData",{},[qr("allowCustomColors",!0),_o("storageKey","default"),vx("colors",pc())])].concat(H3),LP=[Xc("select"),yc("initData",[OO("columns"),xf("items",[],pc())])].concat(H3),FP=wi("fancytype",{inserttable:un,colorswatch:u0,imageselect:LP}),_P=t=>gs("fancymenuitem",FP,t),$P=on([ps,od,HV,Ag,Qf].concat(ru)),sU=on([ps,od,C3,kp,Qf,Dp].concat(ru)),HP=t=>gs("imagemenuitem",$P,t),rU=t=>gs("resetimageitem",sU,t),aU=on([ps,ui,w3,al].concat(ru)),iU=t=>gs("menuitem",aU,t),VP=on([ps,zV,ui,al].concat(ru)),zP=t=>gs("nestedmenuitem",VP,t),$Y=on([ps,al,od,ui,Tg].concat(ru)),d0=t=>gs("togglemenuitem",$Y,t),V3=on([al,Qf,Zo("onShow",ee),Zo("onHide",ee),ui]),UP=t=>gs("sidebar",V3,t),lU=on([ps,Qi("items",Lb([Ah([Op,Ei("items",Gs)]),Gs]))].concat(Rp)),cU=t=>gs("GroupToolbarButton",lU,t),ZP=on([ps,Qf,al,Jf,l0,VV,ui,Es("presets","normal",["normal","color","listpreview"]),S3(1),Tg,UV,_o("context","mode:design")]),uU=t=>gs("SplitButton",ZP,t),WP=[Jf,al,$s("tooltip"),Es("buttonType","secondary",["primary","secondary"]),qr("borderless",!1),bc("onAction"),_o("context","mode:design")],z3=[...WP,Jd,qi("type",["button"])],dU=[...WP,qr("active",!1),qi("type",["togglebutton"])],f0={button:z3,togglebutton:dU},fU=[qi("type",["group"]),xf("buttons",[],wi("type",f0))],jP=wi("type",{...f0,group:fU}),mU=on([xf("buttons",[],jP),bc("onShow"),bc("onHide")]),gU=t=>gs("view",mU,t),GP=(t,s,a)=>{const l=Xo(t.element,"."+a);if(l.length>0){const u=to(l,f=>{const m=f.dom.getBoundingClientRect().top,p=l[0].dom.getBoundingClientRect().top;return Math.abs(m-p)>s}).getOr(l.length);return x.some({numColumns:u,numRows:Math.ceil(l.length/u)})}else return x.none()},KP=(t,s)=>qe([cn(t,s)]),Dg={namedEvents:KP,unnamedEvents:t=>KP(Ct("unnamed-events"),t)},Fi={item:t=>Lt.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Lt.config({disabled:t}),splitButton:t=>Lt.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Lt.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},m0=(t,s)=>{const a=t.getApi(s);return l=>{l(a)}},Fc=(t,s)=>$o(a=>{ye(t.onBeforeSetup)&&t.onBeforeSetup(a),m0(t,a)(u=>{const f=t.onSetup(u);ye(f)&&s.set(f)})}),Kl=(t,s)=>eu(a=>m0(t,a)(s.get())),bC=(t,s,a)=>eu(l=>(a.set(xt.getValue(l)),m0(t,l)(s.get()))),YP="silver.uistate",g0="setDisabled",vU="setEnabled",yC="init",bU=["switchmode",yC],Pp=(t,s)=>{const a=t.mainUi.outerContainer,l=[t.mainUi.mothership,...t.uiMotherships];s===g0&&Qe(l,u=>{u.broadcastOn([Ju()],{target:a.element})}),Qe(l,u=>{u.broadcastOn([YP],s)})},XP=(t,s)=>{t.on("init SwitchMode",a=>{Pp(s,a.type)}),t.on("DisabledStateChange",a=>{if(!a.isDefaultPrevented()){const l=a.state?g0:yC;Pp(s,l),a.state||t.nodeChanged()}}),t.on("NodeChange",a=>{const l=t.ui.isEnabled()?a.type:g0;Pp(s,l)}),H6(t)&&t.mode.set("readonly")},Ms=t=>Ya.config({channels:{[YP]:{onReceive:(s,a)=>{if(a===g0||a===vU){Lt.set(s,a===g0);return}const{contextType:l,shouldDisable:u}=t();l==="mode"&&!An(bU,a)||Lt.set(s,u)}}}}),yU=(t,s)=>Bd((a,l)=>{m0(t,a)(t.onAction),!t.triggersSubmenu&&s===jl.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&Zn(a,Hb()),l.stop())}),JP={[el()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Np=pl,Mg=(t,s,a,l)=>{const u=Rt(ee);return{type:"item",dom:s.dom,components:Np(s.optComponents),data:t.data,eventOrder:JP,hasSubmenu:t.triggersSubmenu,itemBehaviours:qe([cn("item-events",[yU(t,a),Fc(t,u),Kl(t,u)]),Fi.item(()=>!t.enabled||l.checkUiComponentContext(t.context).shouldDisable),Ms(()=>l.checkUiComponentContext(t.context)),fn.config({})].concat(t.itemBehaviours))}},Rg=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),CU=(t,s)=>{var a,l;const u=rt.fromTag("div");xs(u,"tox-image-selector-loading-spinner");const f=p=>{xs(p,"tox-image-selector-loading-spinner-wrapper"),si(p,u)},m=p=>{Yo(p,"tox-image-selector-loading-spinner-wrapper"),dc(u)};return{dom:{tag:t.tag,attributes:(a=t.attributes)!==null&&a!==void 0?a:{},classes:t.classes},components:[{dom:{tag:"div",classes:["tox-image-selector-image-wrapper"]},components:[{dom:{tag:"img",attributes:{src:s},classes:["tox-image-selector-image-img"]}}]},...t.checkMark.toArray()],behaviours:qe([...(l=t.behaviours)!==null&&l!==void 0?l:[],cn("render-image-events",[$o(p=>{f(p.element),ko(p.element,"img").each(v=>{fr(v).catch(C=>{console.error(C)}).finally(()=>{m(p.element)})})})])])}},SU=(t,s)=>CU(s,t),Z3=t=>{const s=Kd.os.isMacOS()||Kd.os.isiOS(),u=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},f=t.split("+"),m=Ie(f,p=>{const v=p.toLowerCase().trim();return yt(u,v)?u[v]:p});return s?m.join(""):m.join("+")},W3=(t,s,a=[DR])=>ci(t,{tag:"div",classes:a},s),QP=t=>({dom:{tag:"div",classes:[nC]},components:[Wo(Wl.translate(t))]}),qP=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),xU=(t,s)=>({dom:{tag:"div",classes:[nC]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Wo(Wl.translate(s))]}]}),wU=t=>({dom:{tag:"div",classes:[MV]},components:[Wo(Z3(t))]}),CC=t=>W3("checkmark",t,[RV]),EU=t=>W3("chevron-right",t,[RR]),TU=t=>W3("chevron-down",t,[RR]),AU=(t,s)=>{const a=t.direction==="vertical"?PV:NR,l=t.align==="left"?NV:IR;return{dom:{tag:"div",classes:[PR,a,l,(()=>{switch(t.valign){case"top":return IV;case"middle":return BV;case"bottom":return BR}})()]},components:s}},OU=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),kU=(t,s,a)=>{const l="custom",u="remove",f=t.value,m=t.iconContent.map(C=>TV(C,s.icons,a)),p=t.ariaLabel.map(C=>({"aria-label":s.translate(C),"data-mce-name":C})).getOr({});return{dom:(()=>{const C=o0,E=m.getOr(""),D={tag:"div",attributes:p,classes:[C]};return f===l?{...D,tag:"button",classes:[...D.classes,"tox-swatches__picker-btn"],innerHtml:E}:f===u?{...D,classes:[...D.classes,"tox-swatch--remove"],innerHtml:E}:fe(f)?{...D,attributes:{...D.attributes,"data-mce-color":f},styles:{"background-color":f},innerHtml:E}:D})(),optComponents:[]}},j3=(t,s)=>{const a=t.map(l=>({attributes:{id:Ct("menu-item"),"aria-label":Wl.translate(l)}})).getOr({});return{tag:"div",classes:[u3,Ap].concat(s),...a}},G3=t=>({dom:{tag:"label"},components:[Wo(t)]}),DU=(t,s,a,l)=>{const u={tag:"div",classes:[DR]},f=I=>ci(I,u,s.icons,l),m=()=>x.some({dom:u}),p=a?t.iconContent.map(f).orThunk(m):x.none(),v=t.checkMark,C=x.from(t.meta).fold(()=>QP,I=>yt(I,"style")?dt(xU,I.style):QP),E=t.htmlContent.fold(()=>t.textContent.map(C),I=>x.some(qP(I,[nC])));return{dom:j3(t.ariaLabel,[]),optComponents:[p,E,t.shortcutContent.map(wU),v,t.caret,t.labelContent.map(G3)]}},eN=t=>({dom:j3(t.ariaLabel,[MR]),optComponents:[x.some(SU(t.iconContent.getOrDie(),{tag:"div",classes:[DV],checkMark:t.checkMark})),t.labelContent.map(G3)]}),Ip=(t,s,a,l=x.none())=>t.presets==="color"?kU(t,s,l):t.presets==="img"?eN(t):DU(t,s,a,l),K3=(t,s,a)=>$e(t,"tooltipWorker").map(l=>[qo.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:u=>({type:"submenu",item:u,overrides:{maxHeightFunction:Um}}),mode:"follow-highlight",onShow:(u,f)=>{l(m=>{qo.setComponents(u,[Iy({element:rt.fromDom(m)})])})}})]).getOrThunk(()=>a.map(l=>[qo.config({...s.providers.tooltips.getConfig({tooltipText:l}),mode:"follow-highlight"})]).getOr([])),tN=t=>Kv.DOM.encode(t),SC=(t,s)=>{const a=Wl.translate(t),l=tN(a);if(s.length>0){const u=new RegExp(Ws(s),"gi");return l.replace(u,f=>`<span class="tox-autocompleter-highlight">${f}</span>`)}else return l},MU=(t,s,a,l,u,f,m,p=!0)=>{const v=Ip({presets:l,textContent:x.none(),htmlContent:a?t.text.map(E=>SC(E,s)):x.none(),ariaLabel:t.text,labelContent:x.none(),iconContent:t.icon,shortcutContent:x.none(),checkMark:x.none(),caret:x.none(),value:t.value},m.providers,p,t.icon),C=t.text.filter(E=>!a&&E!=="");return Mg({context:"mode:design",data:Rg(t),enabled:t.enabled,getApi:te({}),onAction:E=>u(t.value,t.meta),onSetup:te(ee),triggersSubmenu:!1,itemBehaviours:K3(t,m,C)},v,f,m.providers)},Y3=(t,s)=>Ie(t,a=>{switch(a.type){case"cardcontainer":return AU(a,Y3(a.items,s));case"cardimage":return OU(a.src,a.classes,a.alt);case"cardtext":const u=a.name.exists(f=>An(s.cardText.highlightOn,f))?x.from(s.cardText.matchText).getOr(""):"";return qP(SC(a.text,u),a.classes)}}),RU=(t,s,a,l)=>{const u=m=>({isEnabled:()=>!Lt.isDisabled(m),setEnabled:p=>{Lt.set(m,!p),Qe(Xo(m.element,"*"),v=>{m.getSystem().getByDom(v).each(C=>{C.hasConfigured(Lt)&&Lt.set(C,!p)})})}}),f={dom:j3(t.label,[]),optComponents:[x.some({dom:{tag:"div",classes:[PR,NR]},components:Y3(t.items,l)})]};return Mg({context:"mode:design",data:Rg({text:x.none(),...t}),enabled:t.enabled,getApi:u,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:x.from(l.itemBehaviours).getOr([])},f,s,a.providers)},X3=(t,s,a,l,u,f,m,p=!0)=>{const v=D=>({setActive:I=>{kn.set(D,I)},isActive:()=>kn.isOn(D),isEnabled:()=>!Lt.isDisabled(D),setEnabled:I=>Lt.set(D,!I)}),C=Ip({presets:a,textContent:s?t.text:x.none(),htmlContent:x.none(),labelContent:t.label,ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:x.none(),checkMark:s?x.some(CC(m.icons)):x.none(),caret:x.none(),value:t.value},m,p),E=t.text.filter(te(!s)).map(D=>qo.config(m.tooltips.getConfig({tooltipText:m.translate(D)})));return ho(Mg({context:t.context,data:Rg(t),enabled:t.enabled,getApi:v,onAction:D=>l(t.value),onSetup:D=>(D.setActive(u),ee),triggersSubmenu:!1,itemBehaviours:[...E.toArray()]},C,f,m),{toggling:{toggleClass:f3,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},nN=t=>({value:sN(t)}),J3=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,oN=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Q3=t=>J3.test(t)||oN.test(t),sN=t=>Ns(t,"#").toUpperCase(),PU=t=>Q3(t)?x.some({value:sN(t)}):x.none(),au=t=>({value:t.value.replace(J3,(a,l,u,f)=>l+l+u+u+f+f)}),xC=t=>{const s=au(t),a=oN.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},Bp=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},h0=t=>{const s=Bp(t.red)+Bp(t.green)+Bp(t.blue);return nN(s)},Pg=(t,s,a)=>({hue:t,saturation:s,value:a}),q3=t=>{let s=0,a=0,l=0;const u=t.red/255,f=t.green/255,m=t.blue/255,p=Math.min(u,Math.min(f,m)),v=Math.max(u,Math.max(f,m));if(p===v)return l=p,Pg(0,0,l*100);const C=u===p?f-m:m===p?u-f:m-u;return s=u===p?3:m===p?1:5,s=60*(s-C/(v-p)),a=(v-p)/v,l=v,Pg(Math.round(s),Math.round(a*100),Math.round(l*100))},wC=Math.min,eT=Math.max,Lp=Math.round,NU=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,IU=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,qf=(t,s,a,l)=>({red:t,green:s,blue:a,alpha:l}),tT=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},rN=t=>{let s,a,l;const u=(t.hue||0)%360;let f=t.saturation/100,m=t.value/100;if(f=eT(0,wC(f,1)),m=eT(0,wC(m,1)),f===0)return s=a=l=Lp(255*m),qf(s,a,l,1);const p=u/60,v=m*f,C=v*(1-Math.abs(p%2-1)),E=m-v;switch(Math.floor(p)){case 0:s=v,a=C,l=0;break;case 1:s=C,a=v,l=0;break;case 2:s=0,a=v,l=C;break;case 3:s=0,a=C,l=v;break;case 4:s=C,a=0,l=v;break;case 5:s=v,a=0,l=C;break;default:s=a=l=0}return s=Lp(255*(s+E)),a=Lp(255*(a+E)),l=Lp(255*(l+E)),qf(s,a,l,1)},Ng=t=>{const s=xC(t),a=parseInt(s[1],16),l=parseInt(s[2],16),u=parseInt(s[3],16);return qf(a,l,u,1)},aN=(t,s,a,l)=>{const u=parseInt(t,10),f=parseInt(s,10),m=parseInt(a,10),p=parseFloat(l);return qf(u,f,m,p)},nT=t=>{const s=NU.exec(t);if(s!==null)return x.some(aN(s[1],s[2],s[3],"1"));const a=IU.exec(t);return a!==null?x.some(aN(a[1],a[2],a[3],a[4])):x.none()},oT=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,sT=qf(255,0,0,1),BU=t=>q3(Ng(t)),iN=t=>h0(rN(t)),LU=t=>PU(t).orThunk(()=>nT(t).map(h0)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const l=a.getImageData(0,0,1,1).data,u=l[0],f=l[1],m=l[2],p=l[3];return h0(qf(u,f,m,p))}),FU=t=>{t.dispatch("SkinLoaded")},lN=(t,s)=>{t.dispatch("SkinLoadError",s)},iu=t=>{t.dispatch("ResizeEditor")},p0=(t,s)=>{t.dispatch("ResizeContent",s)},_U=(t,s)=>{t.dispatch("ScrollContent",s)},cN=(t,s)=>{t.dispatch("TextColorChange",s)},$U=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},HU=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),VU=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},uN=(t,s)=>{t.dispatch("StylesTextUpdate",s)},dN=(t,s)=>{t.dispatch("AlignTextUpdate",s)},UY=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},ZY=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},Na=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},fN=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},zU=t=>{t.dispatch("ToggleSidebar")},mN=t=>{t.dispatch("ToggleView")},gN=t=>{t.dispatch("ContextToolbarClose")},UU=t=>{t.dispatch("ContextFormSlideBack")},v0=(t,s)=>()=>{t(),s()},Ia=(t,s=et)=>Ig(t,"NodeChange",a=>{a.setEnabled(t.selection.isEditable()&&s())}),ZU=(t,s)=>a=>{const l=bl(),u=()=>{a.setActive(t.formatter.match(s));const f=t.formatter.formatChanged(s,a.setActive);l.set(f)};return t.initialized?u():t.once("init",u),()=>{t.off("init",u),l.clear()}},Fp=(t,s)=>a=>{const l=Ia(t)(a),u=ZU(t,s)(a);return()=>{l(),u()}},Ig=(t,s,a)=>l=>{const u=()=>a(l),f=()=>{a(l),t.on(s,u)};return t.initialized?f():t.once("init",f),()=>{t.off("init",f),t.off(s,u)}},rT=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},di=(t,s)=>()=>t.execCommand(s);var Bg=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const hN={},pN=(t,s=10)=>{const a=Bg.getItem(t),l=B(a)?JSON.parse(a):[],f=(C=>s-C.length<0?C.slice(0,s):C)(l),m=C=>{ht(f,C).each(p),f.unshift(C),f.length>s&&f.pop(),Bg.setItem(t,JSON.stringify(f))},p=C=>{f.splice(C,1)};return{add:m,state:()=>f.slice(0)}},vN=t=>$e(hN,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=Bg.getItem(s);if(me(a)){const u=Bg.getItem("tinymce-custom-colors");Bg.setItem(s,fe(u)?u:"[]")}const l=pN(s,10);return hN[t]=l,l}),WU=t=>Ie(vN(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),aT=(t,s)=>{vN(t).add(s)},iT="forecolor",EC="hilitecolor",WY=5,jY=t=>bN(t.map((s,a)=>a%2===0?"#"+LU(s).value:s)),bN=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:t[a],icon:"checkmark",type:"choiceitem"});return s},lu=t=>s=>s.options.get(t),TC="#000000",jU=t=>{const s=t.options.register,a=f=>pe(f,B)?{value:jY(f),valid:!0}:{valid:!1,message:"Must be an array of strings."},l=f=>pe(f,B)?{value:bN(f),valid:!0}:{valid:!1,message:"Must be an array of strings."},u=f=>Fe(f)&&f>0?{value:f,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:l}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:u,default:lT(t)}),s("color_cols_foreground",{processor:u,default:yN(t,iT)}),s("color_cols_background",{processor:u,default:yN(t,EC)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:TC}),s("color_default_background",{processor:"string",default:TC})},AC=(t,s)=>s===iT&&t.options.isSet("color_map_foreground")?lu("color_map_foreground")(t):s===EC&&t.options.isSet("color_map_background")?lu("color_map_background")(t):t.options.isSet("color_map_raw")?lu("color_map_raw")(t):lu("color_map")(t),lT=(t,s="default")=>Math.max(WY,Math.ceil(Math.sqrt(AC(t,s).length))),yN=(t,s)=>{const a=lu("color_cols")(t),l=lT(t,s);return a===lT(t)?l:a},CN=(t,s="default")=>Math.round(s===iT?lu("color_cols_foreground")(t):s===EC?lu("color_cols_background")(t):lu("color_cols")(t)),SN=lu("custom_colors"),GU=lu("color_default_foreground"),KU=lu("color_default_background"),YU="rgba(0, 0, 0, 0)",OC=t=>nT(t).exists(s=>s.alpha!==0),xN=t=>T1(t,s=>{if(oi(s)){const a=k(s,"background-color");return Kr(OC(a),a)}else return x.none()}).getOr(YU),cT=(t,s)=>{const a=rt.fromDom(t.selection.getStart()),l=s==="hilitecolor"?xN(a):k(a,"color");return nT(l).map(u=>"#"+h0(u).value)},wN=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},XU=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},JU=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{wN(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{XU(t,s)})},EN=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},kC=(t,s,a,l)=>{a==="custom"?MN(t)(f=>{f.each(m=>{aT(s,m),t.execCommand("mceApplyTextcolor",s,m),l(m)})},cT(t,s).getOr(TC)):a==="remove"?(l(""),t.execCommand("mceRemoveTextcolor",s)):(l(a),t.execCommand("mceApplyTextcolor",s,a))},DC=(t,s,a)=>t.concat(WU(s).concat(EN(a))),TN=(t,s,a)=>l=>{l(DC(t,s,a))},uT=(t,s,a)=>{const l=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(l,a)},AN=(t,s)=>{t.setTooltip(s)},ON=(t,s)=>a=>{const l=cT(t,s);return Sa(l,a.toUpperCase())},dT=(t,s,a)=>{if(ji(a))return s==="forecolor"?"Text color":"Background color";const l=s==="forecolor"?"Text color {0}":"Background color {0}",u=DC(AC(t,s),s,!1),f=_t(u,m=>m.value===a).getOr({text:""}).text;return t.translate([l,t.translate(f)])},kN=(t,s,a,l)=>{t.ui.registry.addSplitButton(s,{tooltip:dT(t,a,l.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:ON(t,a),columns:CN(t,a),fetch:TN(AC(t,a),a,SN(t)),onAction:u=>{kC(t,a,l.get(),ee)},onItemAction:(u,f)=>{kC(t,a,f,m=>{l.set(m),cN(t,{name:s,color:m})})},onSetup:u=>{uT(u,s,l.get());const f=m=>{m.name===s&&(uT(u,m.name,m.color),AN(u,dT(t,a,m.color)))};return t.on("TextColorChange",f),v0(Ia(t)(u),()=>{t.off("TextColorChange",f)})}})},DN=(t,s,a,l,u)=>{t.ui.registry.addNestedMenuItem(s,{text:l,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:f=>(AN(f,dT(t,a,u.get())),uT(f,s,u.get()),Ia(t)(f)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:ON(t,a),initData:{storageKey:a},onAction:f=>{kC(t,a,f.value,m=>{u.set(m),cN(t,{name:s,color:m})})}}]})},MN=t=>(s,a)=>{let l=!1;const u=p=>{const C=p.getData().colorpicker;l?(s(x.from(C)),p.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",C]))},f=(p,v)=>{v.name==="hex-valid"&&(l=v.value)},m={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:m,onAction:f,onSubmit:u,onClose:ee,onCancel:()=>{s(x.none())}})},QU=t=>{JU(t);const s=GU(t),a=KU(t),l=Rt(s),u=Rt(a);kN(t,"forecolor","forecolor",l),kN(t,"backcolor","hilitecolor",u),DN(t,"forecolor","forecolor","Text color",l),DN(t,"backcolor","hilitecolor","Background color",u)},qU=(t,s,a,l,u)=>{const f=v=>({setActive:C=>{kn.set(v,C)},isActive:()=>kn.isOn(v),isEnabled:()=>!Lt.isDisabled(v),setEnabled:C=>Lt.set(v,!C)}),m=Ip({presets:"img",textContent:x.none(),htmlContent:x.none(),ariaLabel:t.tooltip,iconContent:x.some(t.url),labelContent:t.label,shortcutContent:x.none(),checkMark:x.some(CC(u.icons)),caret:x.none(),value:t.value},u,!0),p=t.tooltip.map(v=>qo.config(u.tooltips.getConfig({tooltipText:u.translate(v)})));return ho(Mg({context:t.context,data:Rg(t),enabled:t.enabled,getApi:f,onAction:v=>{s(t.value),v.setActive(!0)},onSetup:v=>(v.setActive(a),ee),triggersSubmenu:!1,itemBehaviours:[...p.toArray()]},m,l,u),{toggling:{toggleClass:f3,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},MC=(t,s,a,l,u,f,m,p)=>{const v=a0(s),E=GY(s,a,l,u!=="color"?"normal":"color",f,m,p);return i0(t,v,E,l,{menuType:u})},GY=(t,s,a,l,u,f,m)=>pl(Ie(t,p=>p.type==="choiceitem"?oU(p).fold(Lc,v=>x.some(X3(v,a===1,l,s,f(v.value),u,m,a0(t)))):p.type==="imageitem"?HP(p).fold(Lc,v=>x.some(qU(v,s,f(v.value),u,m))):p.type==="resetimage"?rU(p).fold(Lc,v=>x.some(X3({...v,type:"choiceitem",text:v.tooltip,icon:x.some(v.icon),label:x.some(v.label)},a===1,l,s,f(v.value),u,m,a0(t)))):x.none())),b0=(t,s)=>{const a=Xd(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+{color:"tox-swatches__row",imageselector:"tox-image-selector__row",listpreview:"tox-collection__group",normal:"tox-collection__group"}[s],previousSelector:u=>s==="color"?ko(u.element,"[aria-checked=true]"):x.none()}},RN=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${o0}`:`.${Ap}`}},PN=(t,s)=>{const a=RC(t,s),l=s.colorinput.getColorCols(t.initData.storageKey),u="color",m={...MC(Ct("menu-value"),a,p=>{t.onAction({value:p})},l,u,jl.CLOSE_ON_EXECUTE,t.select.getOr(it),s.shared.providers),markers:Xd(u),movement:b0(l,u),showMenuRole:!1};return{type:"widget",data:{value:Ct("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[_v.widget(Qu.sketch(m))]}},RC=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>DC(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),l=>l.concat(EN(a)))},NN=(t,s)=>{const a="imageselector",l=t.initData.columns,f={...MC(Ct("menu-value"),t.initData.items,m=>{t.onAction({value:m})},l,a,jl.CLOSE_ON_EXECUTE,t.select.getOr(it),s.shared.providers),markers:Xd(a),movement:b0(l,a),showMenuRole:!1};return{type:"widget",data:{value:Ct("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem","tox-collection--toolbar"]},autofocus:!0,components:[_v.widget(Qu.sketch(f))]}},IN=Ct("cell-over"),BN=Ct("cell-execute"),eZ=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),tZ=(t,s,a)=>{const l=m=>Wt(m,IN,{row:t,col:s}),u=m=>Wt(m,BN,{row:t,col:s}),f=(m,p)=>{p.stop(),u(m)};return pa({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:qe([cn("insert-table-picker-cell",[Le(xc(),tn.focus),Le(el(),u),Le(Ef(),f),Le(Lm(),f)]),kn.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),tn.config({onFocus:l})])})},nZ=(t,s,a)=>{const l=[];for(let u=0;u<s;u++){const f=[];for(let m=0;m<a;m++){const p=t(u+1,m+1);f.push(tZ(u,m,p))}l.push(f)}return l},oZ=(t,s,a,l,u)=>{for(let f=0;f<l;f++)for(let m=0;m<u;m++)kn.set(t[f][m],f<=s&&m<=a)},sZ=t=>ke(t,s=>Ie(s,tl)),fT=(t,s)=>Wo(`${s}x${t}`),aZ={inserttable:(t,s)=>{const u=eZ(s),f=nZ(u,10,10),m=fT(0,0),p=lo({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[m],behaviours:qe([fn.config({})])});return{type:"widget",data:{value:Ct("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[_v.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:sZ(f).concat(p.asSpec()),behaviours:qe([cn("insert-table-picker",[$o(v=>{fn.set(p.get(v),[m])}),my(IN,(v,C,E)=>{const{row:D,col:I}=E.event;oZ(f,D,I,10,10),fn.set(p.get(v),[fT(D+1,I+1)])}),my(BN,(v,C,E)=>{const{row:D,col:I}=E.event;Zn(v,Hb()),t.onAction({numRows:D+1,numColumns:I+1})})]),It.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:PN,imageselect:NN},LN=(t,s)=>$e(aZ,t.fancytype).map(a=>a(t,s)),iZ=(t,s,a,l=!0,u=!1)=>{const f=u?TU(a.icons):EU(a.icons),m=v=>({isEnabled:()=>!Lt.isDisabled(v),setEnabled:C=>Lt.set(v,!C),setIconFill:(C,E)=>{ko(v.element,`svg path[class="${C}"], rect[class="${C}"]`).each(D=>{an(D,"fill",E)})},setTooltip:C=>{const E=a.translate(C);an(v.element,"aria-label",E)}}),p=Ip({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:x.none(),ariaLabel:t.text,labelContent:x.none(),caret:x.some(f),checkMark:x.none(),shortcutContent:t.shortcut},a,l);return Mg({context:t.context,data:Rg(t),getApi:m,enabled:t.enabled,onAction:ee,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},p,s,a)},lZ=(t,s,a,l=!0)=>{const u=m=>({isEnabled:()=>!Lt.isDisabled(m),setEnabled:p=>Lt.set(m,!p)}),f=Ip({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:x.none(),labelContent:x.none(),ariaLabel:t.text,caret:x.none(),checkMark:x.none(),shortcutContent:t.shortcut},a,l);return Mg({context:t.context,data:Rg(t),getApi:u,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},f,s,a)},cZ=t=>({type:"separator",dom:{tag:"div",classes:[Ap,rl]},components:t.text.map(Wo).toArray()}),Lg=(t,s,a,l=!0)=>{const u=m=>({setActive:p=>{kn.set(m,p)},isActive:()=>kn.isOn(m),isEnabled:()=>!Lt.isDisabled(m),setEnabled:p=>Lt.set(m,!p)}),f=Ip({iconContent:t.icon,textContent:t.text,htmlContent:x.none(),labelContent:x.none(),ariaLabel:t.text,checkMark:x.some(CC(a.icons)),caret:x.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,l);return ho(Mg({context:t.context,data:Rg(t),enabled:t.enabled,getApi:u,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},f,s,a),{toggling:{toggleClass:f3,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},FN=MU,_p=cZ,PC=lZ,_N=iZ,$N=Lg,HN=LN,KY=RU,uZ=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},dZ=t=>{const s=xt.getValue(t),a=s0(t).map(_R);sl.refetch(s).get(()=>{const l=hs.getCoupled(s,"sandbox");a.each(u=>s0(l).each(f=>LV(f,u)))})},fZ=(t,s)=>{mZ(t).each(a=>{J7(t,a.element,s.event.eventType,s.event.interactionEvent)})},mZ=t=>Qn.getState(t).bind(io.getHighlighted).bind(io.getHighlighted),gZ=t=>Jr(t.element,lC)?x.some(t.element):ko(t.element,"."+lC),Fg=(t,s,a)=>{h3(t).each(l=>{iC(l,a),gZ(s).each(f=>{er(f,"id").each(m=>an(l.element,"aria-controls",m))})}),an(a.element,"aria-selected","true")},y0=(t,s,a)=>{an(a.element,"aria-selected","false")},mT=t=>{h3(t).each(s=>tn.focus(s))},hZ=t=>hs.getExistingCoupled(t,"sandbox").bind(s0).map(_R).map(a=>a.fetchPattern).getOr("");var NC;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(NC||(NC={}));const gT=(t,s,a,l,u)=>{const f=a.shared.providers,m=p=>u?{...p,shortcut:x.none(),icon:p.text.isSome()?x.none():p.icon}:p;switch(t.type){case"menuitem":return iU(t).fold(Lc,p=>x.some(PC(m(p),s,f,l)));case"nestedmenuitem":return zP(t).fold(Lc,p=>x.some(_N(m(p),s,f,l,u)));case"togglemenuitem":return d0(t).fold(Lc,p=>x.some($N(m(p),s,f,l)));case"separator":return EP(t).fold(Lc,p=>x.some(_p(p)));case"fancymenuitem":return _P(t).fold(Lc,p=>HN(p,a));default:return console.error("Unknown item in general menu",t),x.none()}},pZ=(t,s,a,l,u,f,m)=>{const p=l===1,v=!p||a0(t);return pl(Ie(t,C=>{switch(C.type){case"separator":return TP(C).fold(Lc,E=>x.some(_p(E)));case"cardmenuitem":return nU(C).fold(Lc,E=>x.some(KY({...E,onAction:D=>{E.onAction(D),a(E.value,E.meta)}},u,f,{itemBehaviours:K3(E.meta,f,x.none()),cardText:{matchText:s,highlightOn:m}})));case"autocompleteitem":default:return Vz(C).fold(Lc,E=>x.some(FN(E,s,p,"normal",a,u,f,v)))}}))},$p=(t,s,a,l,u,f)=>{const m=a0(s),p=pl(Ie(s,E=>{const D=H=>u?!yt(H,"text"):m,I=H=>gT(H,a,l,D(H),u);return E.type==="nestedmenuitem"&&E.getSubmenuItems().length<=0?I({...E,enabled:!1}):I(E)})),v=uZ(f);return(u?nd:i0)(t,m,p,1,v)},IC=t=>gg.singleData(t.value,t),vZ=(t,s,a,l)=>{const u=b0(s,l),f=Xd(l);return{data:IC({...t,movement:u,menuBehaviours:Dg.unnamedEvents(s!=="auto"?[]:[$o((m,p)=>{GP(m,4,f.item).each(({numColumns:v,numRows:C})=>{It.setGridSize(m,C,v)})})])}),menu:{markers:Xd(l),fakeFocus:a===NC.ContentFocus}}},bZ=t=>xh.create(rt.fromDom(t.startContainer),t.startOffset,rt.fromDom(t.endContainer),t.endOffset),yZ={register:(t,s)=>{const a=Ct("autocompleter"),l=Rt(!1),u=Rt(!1),f=dn(),m=pa(es.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:qe([cn("dismissAutocompleter",[Le(Td(),()=>D()),Le(zb(),(X,ie)=>{er(ie.event.target,"id").each(le=>an(rt.fromDom(t.getBody()),"aria-activedescendant",le))})])]),lazySink:s.getSink})),p=()=>es.isOpen(m),v=u.get,C=()=>{if(p()){es.hide(m),t.dom.remove(a,!1);const X=rt.fromDom(t.getBody());er(X,"aria-owns").filter(ie=>ie===a).each(()=>{ls(X,"aria-owns"),ls(X,"aria-activedescendant")})}},E=()=>es.getContent(m).bind(X=>No(X.components(),0)),D=()=>t.execCommand("mceAutocompleterClose"),I=X=>{const ie=xn(X,le=>x.from(le.columns)).getOr(1);return ke(X,le=>{const xe=le.items;return pZ(xe,le.matchText,(Me,vt)=>{const Ge={hide:()=>D(),reload:Pe=>{C(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Pe})}};t.execCommand("mceAutocompleterRefreshActiveRange"),f.get().each(Pe=>{l.set(!0),le.onAction(Ge,Pe,Me,vt),l.set(!1)})},ie,jl.BUBBLE_TO_SANDBOX,s,le.highlightOn)})},H=(X,ie)=>{const le=xn(X,xe=>x.from(xe.columns)).getOr(1);es.showMenuAt(m,{anchor:{type:"selection",getSelection:()=>f.get().map(bZ),root:rt.fromDom(t.getBody())}},vZ(i0("autocompleter-value",!0,ie,le,{menuType:"normal"}),le,NC.ContentFocus,"normal")),E().each(io.highlightFirst)},W=X=>{const ie=I(X);ie.length>0?(H(X,ie),an(rt.fromDom(t.getBody()),"aria-owns",a),t.inline||Q()):C()},Q=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const X=t.getDoc().documentElement,ie=t.selection.getNode(),le=Tm(m.element);Ki(le,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${ie.offsetTop}px`,left:`${ie.offsetLeft}px`}),t.dom.add(X,le.dom),ko(le,'[role="menu"]').each(xe=>{mt(xe,"position"),mt(xe,"max-height")})};t.on("AutocompleterStart",({lookupData:X})=>{u.set(!0),l.set(!1),W(X)}),t.on("AutocompleterUpdate",({lookupData:X})=>W(X)),t.on("AutocompleterUpdateActiveRange",({range:X})=>f.set(X)),t.on("AutocompleterEnd",()=>{C(),u.set(!1),l.set(!1),f.clear()});const se={cancelIfNecessary:D,isMenuOpen:p,isActive:v,isProcessingAction:l.get,getMenu:E};kV.setup(se,t)}},CZ=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ie(t.items,s.interpreter)});var SZ=tinymce.util.Tools.resolve("tinymce.html.Entities");const Hp=(t,s,a,l)=>{const u=hT(t,s,a,l);return Fn.sketch(u)},VN=(t,s)=>Hp(t,s,[],[]),hT=(t,s,a,l)=>({dom:C0(a),components:t.toArray().concat([s]),fieldBehaviours:qe(l)}),xZ=()=>C0([]),C0=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),cu=(t,s)=>Fn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Wo(s.translate(t))]}),Qa=Ct("form-component-change"),zN=Ct("form-component-input"),S0=Ct("form-close"),em=Ct("form-cancel"),sd=Ct("form-action"),_g=Ct("form-submit"),pT=Ct("form-block"),x0=Ct("form-unblock"),UN=Ct("form-tabchange"),BC=Ct("form-resize"),wZ=(t,s,a)=>{const l=t.label.map(H=>cu(H,s)),u=s.icons(),f=H=>{var W;return(W=u[H])!==null&&W!==void 0?W:H},m=H=>(W,Q)=>{Iu(Q.event.target,"[data-collection-item-value]").each(se=>{H(W,Q,se,qs(se,"data-collection-item-value"))})},p=(H,W)=>{const se=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",X=Ie(W,xe=>{const Me=Wl.translate(xe.text),vt=t.columns===1?`<div class="tox-collection__item-label">${Me}</div>`:"",Ge=`<div class="tox-collection__item-icon">${f(xe.icon)}</div>`,Pe={_:" "," - ":" ","-":" "},wt=Me.replace(/\_| \- |\-/g,Kt=>Pe[Kt]);return`<div data-mce-tooltip="${wt}" class="tox-collection__item${se}" tabindex="-1" data-collection-item-value="${SZ.encodeAllRaw(xe.value)}" aria-label="${wt}">${Ge}${vt}</div>`}),ie=t.columns!=="auto"&&t.columns>1?Io(X,t.columns):[X],le=Ie(ie,xe=>`<div class="tox-collection__group">${xe.join("")}</div>`);pf(H.element,le.join(""))},v=m((H,W,Q,se)=>{W.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||Wt(H,sd,{name:t.name,value:se})}),C=[Le(xc(),m((H,W,Q)=>{Ls(Q,!0)})),Le(Ef(),v),Le(Lm(),v),Le(ma(),m((H,W,Q)=>{ko(H.element,"."+wg).each(se=>{Yo(se,wg)}),xs(Q,wg)})),Le(NO(),m(H=>{ko(H.element,"."+wg).each(W=>{Yo(W,wg),Tl(W)})})),Bd(m((H,W,Q,se)=>{Wt(H,sd,{name:t.name,value:se})}))],E=(H,W)=>Ie(Xo(H.element,".tox-collection__item"),W),D=Fn.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:ct},behaviours:qe([Lt.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable,onDisabled:H=>{E(H,W=>{xs(W,"tox-collection__item--state-disabled"),an(W,"aria-disabled",!0)})},onEnabled:H=>{E(H,W=>{Yo(W,"tox-collection__item--state-disabled"),ls(W,"aria-disabled")})}}),Ms(()=>s.checkUiComponentContext(t.context)),fn.config({}),qo.config({...s.tooltips.getConfig({tooltipText:"",onShow:H=>{ko(H.element,"."+wg+"[data-mce-tooltip]").each(W=>{er(W,"data-mce-tooltip").each(Q=>{qo.setComponents(H,s.tooltips.getComponents({tooltipText:Q}))})})}}),mode:"children-keyboard-focus",anchor:H=>({type:"node",node:ko(H.element,"."+wg).orThunk(()=>LB(".tox-collection__item")),root:H.element,layouts:{onLtr:te([zs,sr,Ds,Hr,Vs,hr]),onRtl:te([zs,sr,Ds,Hr,Vs,hr])},bubble:ha(0,-2,{})})}),xt.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(H,W)=>{p(H,W),t.columns==="auto"&&GP(H,5,"tox-collection__item").each(({numRows:Q,numColumns:se})=>{It.setGridSize(H,Q,se)}),Zn(H,BC)}}),Mo.config({}),It.config(RN(t.columns,"normal")),cn("collection-events",C)]),eventOrder:{[el()]:["disabling","alloy.base.behaviour","collection-events"],[ma()]:["collection-events","tooltipping"]}});return Hp(l,D,["tox-form__group--collection"],[])},EZ=(t,s)=>sl.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:qe([Fi.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),Ms(()=>s.providers.checkUiComponentContext(t.context)),dg.config({}),Mo.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>ns.nu(l=>t.fetch(l)).map(l=>x.from(IC(ho(MC(Ct("menu-value"),l,u=>{t.onItemAction(a,u)},t.columns,t.presets,jl.CLOSE_ON_EXECUTE,it,s.providers),{movement:b0(t.columns,t.presets)})))),parts:{menu:rC(!1,1,t.presets)}}),ZN=Ct("color-input-change"),WN=Ct("color-swatch-change"),jN=Ct("color-picker-cancel"),XY=(t,s,a,l)=>{const u=Fn.parts.field({factory:ed,inputClasses:["tox-textfield"],data:l,onSetValue:C=>Mc.run(C).get(ee),inputBehaviours:qe([Lt.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable}),Ms(()=>s.providers.checkUiComponentContext(t.context)),Mo.config({}),Mc.config({invalidClass:"tox-textbox-field-invalid",getRoot:C=>Un(C.element),notify:{onValid:C=>{const E=xt.getValue(C);Wt(C,ZN,{color:E})}},validator:{validateOnLoad:!1,validate:C=>{const E=xt.getValue(C);if(E.length===0)return ns.pure(Sn.value(!0));{const D=rt.fromTag("span");gn(D,"background-color",E);const I=Y(D,"background-color").fold(()=>Sn.error("blah"),H=>Sn.value(E));return ns.pure(I)}}}})]),selectOnFocus:!1}),f=t.label.map(C=>cu(C,s.providers)),m=(C,E)=>{Wt(C,WN,{value:E})},p=(C,E)=>{v.getOpt(C).each(D=>{E==="custom"?a.colorPicker(I=>{I.fold(()=>Zn(D,jN),H=>{m(D,H),aT(t.storageKey,H)})},"#ffffff"):E==="remove"?m(D,""):m(D,E)})},v=lo(EZ({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Vs,Ds,zs],onLtr:()=>[Ds,Vs,zs]},components:[],fetch:TN(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:p,context:t.context},s));return Fn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:f.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[u,v.asSpec()]}]),fieldBehaviours:qe([cn("form-field-events",[Le(ZN,(C,E)=>{v.getOpt(C).each(D=>{gn(D.element,"background-color",E.event.color)}),Wt(C,Qa,{name:t.name})}),Le(WN,(C,E)=>{Fn.getField(C).each(D=>{xt.setValue(D,E.event.value),Wn.getCurrent(C).each(tn.focus)})}),Le(jN,(C,E)=>{Fn.getField(C).each(D=>{Wn.getCurrent(C).each(tn.focus)})})])])})},Yl={self:()=>Wn.config({find:x.some}),memento:t=>Wn.config({find:t.getOpt}),childAt:t=>Wn.config({find:s=>lc(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},AZ=on([ve("preprocess",ct),ve("postprocess",ct)]),OZ=(t,s)=>{const a=ri("RepresentingConfigs.memento processors",AZ,s);return xt.config({store:{mode:"manual",getValue:l=>{const u=t.get(l),f=xt.getValue(u);return a.postprocess(f)},setValue:(l,u)=>{const f=a.preprocess(u),m=t.get(l);xt.setValue(m,f)}}})},$g=(t,s,a)=>xt.config({store:{mode:"manual",...t.map(l=>({initialValue:l})).getOr({}),getValue:s,setValue:a}}),GN=(t,s,a)=>$g(t,l=>s(l.element),(l,u)=>a(l.element,u)),kZ=t=>GN(t,bh,pf),w0=t=>xt.config({store:{mode:"memory",initialValue:t}}),vT=Ct("rgb-hex-update"),KN=Ct("slider-update"),YN=Ct("palette-update"),QY=(t,s)=>{const a=Nc.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=Nc.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Nc.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:te(0)},components:[a,l],sliderBehaviours:qe([tn.config({})]),onChange:(u,f,m)=>{an(u.element,"aria-valuenow",Math.floor(360-m*3.6)),Wt(u,KN,{value:m})}})},DZ=Ct("valid-input"),bT=Ct("invalid-input"),yT=Ct("validating-input"),CT="colorcustom.rgb.",MZ={isEnabled:et,setEnabled:ee,immediatelyShow:ee,immediatelyHide:ee},il=(t,s,a,l,u,f)=>{const m=(Q,se)=>{const X=se.get();Q!==X.isEnabled()&&(X.setEnabled(Q),Q?X.immediatelyShow():X.immediatelyHide())},p=(Q,se,X)=>Mc.config({invalidClass:s("invalid"),notify:{onValidate:ie=>{Wt(ie,yT,{type:Q})},onValid:ie=>{m(!1,X),Wt(ie,DZ,{type:Q,value:xt.getValue(ie)})},onInvalid:ie=>{m(!0,X),Wt(ie,bT,{type:Q,value:xt.getValue(ie)})}},validator:{validate:ie=>{const le=xt.getValue(ie),xe=se(le)?Sn.value(!0):Sn.error(t("aria.input.invalid"));return ns.pure(xe)},validateOnLoad:!1}}),v=(Q,se,X,ie,le)=>{const xe=Rt(MZ),Me=t(CT+"range"),vt=Fn.parts.label({dom:{tag:"label"},components:[Wo(X)]}),Ge=Fn.parts.field({data:le,factory:ed,inputAttributes:{type:"text","aria-label":ie,...se==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:qe([p(se,Q,xe),Mo.config({}),qo.config({...u({tooltipText:"",onSetup:vn=>{xe.set({isEnabled:()=>qo.isEnabled(vn),setEnabled:Pt=>qo.setEnabled(vn,Pt),immediatelyShow:()=>qo.immediateOpenClose(vn,!0),immediatelyHide:()=>qo.immediateOpenClose(vn,!1)}),qo.setEnabled(vn,!1)},onShow:(vn,Pt)=>{qo.setComponents(vn,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[Wo(t(se==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:vn=>{Mc.isInvalid(vn)&&Mc.run(vn).get(ee)}}),Pe=Ct("aria-invalid"),wt=lo(f("invalid",x.some(Pe),"warning")),Kt=lo({dom:{tag:"div",classes:[s("invalid-icon")]},components:[wt.asSpec()]}),Ft=[vt,Ge,Kt.asSpec()],_n=se!=="hex"?[Fn.parts["aria-descriptor"]({text:Me})]:[],rn=Ft.concat(_n);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:rn}},C=(Q,se)=>{const X=h0(se);return hg.getField(Q,"hex").each(ie=>{tn.isFocused(ie)||xt.setValue(Q,{hex:X.value})}),X},E=(Q,se)=>{const X=se.red,ie=se.green,le=se.blue;xt.setValue(Q,{red:X,green:ie,blue:le})},D=lo({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),I=(Q,se)=>{D.getOpt(Q).each(X=>{gn(X.element,"background-color","#"+se.value)})};return ol({factory:()=>{const Q={red:Rt(x.some(255)),green:Rt(x.some(255)),blue:Rt(x.some(255)),hex:Rt(x.some("ffffff"))},se=(Pt,Ze)=>{const lt=Ng(Ze);E(Pt,lt),xe(lt)},X=Pt=>Q[Pt].get(),ie=(Pt,Ze)=>{Q[Pt].set(Ze)},le=()=>X("red").bind(Pt=>X("green").bind(Ze=>X("blue").map(lt=>qf(Pt,Ze,lt,1)))),xe=Pt=>{const Ze=Pt.red,lt=Pt.green,Jt=Pt.blue;ie("red",x.some(Ze)),ie("green",x.some(lt)),ie("blue",x.some(Jt))},Me=(Pt,Ze)=>{const lt=Ze.event;lt.type!=="hex"?ie(lt.type,x.none()):l(Pt)},vt=(Pt,Ze)=>{a(Pt);const lt=nN(Ze);ie("hex",x.some(lt.value));const Jt=Ng(lt);E(Pt,Jt),xe(Jt),Wt(Pt,vT,{hex:lt}),I(Pt,lt)},Ge=(Pt,Ze,lt)=>{const Jt=parseInt(lt,10);ie(Ze,x.some(Jt)),le().each(bn=>{const Zt=C(Pt,bn);Wt(Pt,vT,{hex:Zt}),I(Pt,Zt)})},Pe=Pt=>Pt.type==="hex",wt=(Pt,Ze)=>{const lt=Ze.event;Pe(lt)?vt(Pt,lt.value):Ge(Pt,lt.type,lt.value)},Kt=Pt=>({label:t(CT+Pt+".label"),description:t(CT+Pt+".description")}),Ft=Kt("red"),_n=Kt("green"),rn=Kt("blue"),vn=Kt("hex");return ho(hg.sketch(Pt=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Pt.field("red",Fn.sketch(v(tT,"red",Ft.label,Ft.description,255))),Pt.field("green",Fn.sketch(v(tT,"green",_n.label,_n.description,255))),Pt.field("blue",Fn.sketch(v(tT,"blue",rn.label,rn.description,255))),Pt.field("hex",Fn.sketch(v(Q3,"hex",vn.label,vn.description,"ffffff"))),D.asSpec()],formBehaviours:qe([Mc.config({invalidClass:s("form-invalid")}),cn("rgb-form-events",[Le(DZ,wt),Le(bT,Me),Le(yT,Me)])])})),{apis:{updateHex:(Pt,Ze)=>{xt.setValue(Pt,{hex:Ze.value}),se(Pt,Ze),I(Pt,Ze)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(Q,se,X)=>{Q.updateHex(se,X)}},extraApis:{}})},RZ=(t,s)=>{const a=Nc.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),l=Nc.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),u=(C,E)=>{const{width:D,height:I}=C,H=C.getContext("2d");if(H===null)return;H.fillStyle=E,H.fillRect(0,0,D,I);const W=H.createLinearGradient(0,0,D,0);W.addColorStop(0,"rgba(255,255,255,1)"),W.addColorStop(1,"rgba(255,255,255,0)"),H.fillStyle=W,H.fillRect(0,0,D,I);const Q=H.createLinearGradient(0,0,0,I);Q.addColorStop(0,"rgba(0,0,0,0)"),Q.addColorStop(1,"rgba(0,0,0,1)"),H.fillStyle=Q,H.fillRect(0,0,D,I)},f=(C,E)=>{const D=C.components()[0].element.dom,I=Pg(E,100,100),H=rN(I);u(D,oT(H))},m=(C,E)=>{const D=q3(Ng(E));Nc.setValue(C,{x:D.saturation,y:100-D.value}),an(C.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",D.saturation,D.value]))};return ol({factory:C=>{const E=te({x:0,y:0}),D=(W,Q,se)=>{Fe(se)||an(W.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(se.x),Math.floor(100-se.y)])),Wt(W,YN,{value:se})},I=(W,Q,se,X)=>{u(se.element.dom,oT(sT))},H=qe([Wn.config({find:x.some}),tn.config({})]);return Nc.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:E},rounded:!1,components:[a,l],onChange:D,onInit:I,sliderBehaviours:H})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(C,E,D)=>{f(E,D)},setThumb:(C,E,D)=>{m(E,D)}},extraApis:{}})},XN=(t,s,a,l)=>{const u=m=>{const p=il(t,s,m.onValidHex,m.onInvalidHex,a,l),v=RZ(t,s),C=Pe=>(100-Pe)/100*360,E=Pe=>100-Pe/360*100,D={paletteRgba:Rt(sT),paletteHue:Rt(0)},I=lo(QY(t,s)),H=lo(v.sketch({})),W=lo(p.sketch({})),Q=(Pe,wt,Kt)=>{H.getOpt(Pe).each(Ft=>{v.setHue(Ft,Kt)})},se=(Pe,wt)=>{W.getOpt(Pe).each(Kt=>{p.updateHex(Kt,wt)})},X=(Pe,wt,Kt)=>{I.getOpt(Pe).each(Ft=>{Nc.setValue(Ft,E(Kt))})},ie=(Pe,wt)=>{H.getOpt(Pe).each(Kt=>{v.setThumb(Kt,wt)})},le=(Pe,wt)=>{const Kt=Ng(Pe);D.paletteRgba.set(Kt),D.paletteHue.set(wt)},xe=(Pe,wt,Kt,Ft)=>{le(wt,Kt),Qe(Ft,_n=>{_n(Pe,wt,Kt)})},Me=()=>{const Pe=[se];return(wt,Kt)=>{const Ft=Kt.event.value,_n=D.paletteHue.get(),rn=Pg(_n,Ft.x,100-Ft.y),vn=iN(rn);xe(wt,vn,_n,Pe)}},vt=()=>{const Pe=[Q,se];return(wt,Kt)=>{const Ft=C(Kt.event.value),_n=D.paletteRgba.get(),rn=q3(_n),vn=Pg(Ft,rn.saturation,rn.value),Pt=iN(vn);xe(wt,Pt,Ft,Pe)}},Ge=()=>{const Pe=[Q,X,ie];return(wt,Kt)=>{const Ft=Kt.event.hex,_n=BU(Ft);xe(wt,Ft,_n.hue,Pe)}};return{uid:m.uid,dom:m.dom,components:[H.asSpec(),I.asSpec(),W.asSpec()],behaviours:qe([cn("colour-picker-events",[Le(vT,Ge()),Le(YN,Me()),Le(KN,vt())]),Wn.config({find:Pe=>W.getOpt(Pe)}),It.config({mode:"acyclic"})])}};return ol({name:"ColourPicker",configFields:[We("dom"),ve("onValidHex",ee),ve("onInvalidHex",ee)],factory:u})},JN={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},PZ=t=>s=>B(s)?t.translate(JN[s]):t.translate(s),E0=(t,s,a)=>{const l=C=>"tox-"+C,u=(C,E,D=C,I=C)=>ci(D,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+C],attributes:{title:s.translate(I),"aria-live":"polite",...E.fold(()=>({}),H=>({id:H}))}},s.icons),f=XN(PZ(s),l,s.tooltips.getConfig,u),m=C=>{Wt(C,sd,{name:"hex-valid",value:!0})},p=C=>{Wt(C,sd,{name:"hex-valid",value:!1})},v=lo(f.sketch({dom:{tag:"div",classes:[l("color-picker-container")],attributes:{role:"presentation"}},onValidHex:m,onInvalidHex:p}));return{dom:{tag:"div"},components:[v.asSpec()],behaviours:qe([$g(a,C=>{const E=v.get(C);return Wn.getCurrent(E).bind(H=>xt.getValue(H).hex).map(H=>"#"+Ns(H,"#")).getOr("")},(C,E)=>{const D=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,I=x.from(D.exec(E)).bind(Q=>No(Q,1)),H=v.get(C);Wn.getCurrent(H).fold(()=>{console.log("Can not find form")},Q=>{xt.setValue(Q,{hex:I.getOr("")}),hg.getField(Q,"hex").each(se=>{Zn(se,Ed())})})}),Yl.self()])}};var NZ=tinymce.util.Tools.resolve("tinymce.Resource");const T0=t=>yt(t,"init"),IZ=t=>{const s=dn(),a=lo({dom:{tag:t.tag}}),l=dn(),u=!T0(t)&&t.onFocus.isSome()?[tn.config({onFocus:f=>{t.onFocus.each(m=>{m(f.element.dom)})}}),Mo.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:qe([cn("custom-editor-events",[$o(f=>{a.getOpt(f).each(m=>{(T0(t)?t.init(m.element.dom):NZ.load(t.scriptId,t.scriptUrl).then(p=>p(m.element.dom,t.settings))).then(p=>{l.on(v=>{p.setValue(v)}),l.clear(),s.set(p)})})})]),$g(x.none(),()=>s.get().fold(()=>l.get().getOr(""),f=>f.getValue()),(f,m)=>{s.get().fold(()=>l.set(m),p=>p.setValue(m))}),Yl.self()].concat(u)),components:[a.asSpec()]}};var _c=tinymce.util.Tools.resolve("tinymce.util.Tools");const ST=Ct("browse.files.event"),BZ=(t,s)=>{const a=_c.explode(s.getOption("images_file_types")),l=u=>yn(a,f=>zo(u.name.toLowerCase(),`.${f.toLowerCase()}`));return eo(Rs(t),l)},Xl=(t,s,a)=>{const l=(I,H)=>{H.stop()},u=I=>(H,W)=>{Qe(I,Q=>{Q(H,W)})},f=(I,H)=>{var W;if(!Lt.isDisabled(I)){const Q=H.event.raw;Wt(I,ST,{files:(W=Q.dataTransfer)===null||W===void 0?void 0:W.files})}},m=(I,H)=>{const W=H.event.raw.target;Wt(I,ST,{files:W.files})},p=(I,H)=>{H&&(xt.setValue(I,BZ(H,s)),Wt(I,Qa,{name:t.name}))},v=lo({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:qe([cn("input-file-events",[Nf(Ef()),Nf(Lm())])])}),C=t.label.map(I=>cu(I,s)),E=Fn.parts.field({factory:Dr,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Wo(s.translate("Browse for an image")),v.asSpec()],action:I=>{v.get(I).element.dom.click()},buttonBehaviours:qe([Yl.self(),w0(a.getOr([])),Mo.config({}),Fi.button(()=>s.checkUiComponentContext(t.context).shouldDisable),Ms(()=>s.checkUiComponentContext(t.context))])}),D={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:qe([Lt.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable}),Ms(()=>s.checkUiComponentContext(t.context)),kn.config({toggleClass:"dragenter",toggleOnExecute:!1}),cn("dropzone-events",[Le("dragenter",u([l,kn.toggle])),Le("dragleave",u([l,kn.toggle])),Le("dragover",l),Le("drop",u([l,f])),Le(Im(),m)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Wo(s.translate("Drop an image here"))]},E]}]};return Hp(C,D,["tox-form__group--stretched"],[cn("handle-files",[Le(ST,(I,H)=>{Fn.getField(I).each(W=>{p(W,H.event.files)})})])])},LZ=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Ie(t.items,s.interpreter)}),Vp=Ct("alloy-fake-before-tabstop"),LC=Ct("alloy-fake-after-tabstop"),xT=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:qe([tn.config({ignore:!0}),Mo.config({})])}),QN=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[xT([Vp]),s,xT([LC])],behaviours:qe([Yl.childAt(1)])}),wT=(t,s)=>{Wt(t,Qc(),{raw:{which:9,shiftKey:s}})},FZ=(t,s)=>{const a=s.element;Jr(a,Vp)?wT(t,!0):Jr(a,LC)&&wT(t,!1)},A0=t=>E1(t,["."+Vp,"."+LC].join(","),it),FC=Ct("update-dialog"),qN=Ct("update-title"),e8=Ct("update-body"),t8=Ct("update-footer"),n8=Ct("body-send-message"),O0=Ct("dialog-focus-shifted"),_C=Wa().browser,zp=_C.isSafari(),_Z=_C.isFirefox(),ET=zp||_Z,$Z=_C.isChromium(),HZ=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,TT=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),o8=(t,s)=>{const a=t.body;return x.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!$Z&&!zp||fe(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},AT=(t,s,a)=>{const l=t.dom;x.from(l.contentDocument).fold(a,u=>{let f=0;const m=o8(u,s).map(v=>(f=v.scrollTop,v)).forall(HZ),p=()=>{const v=l.contentWindow;fe(v)&&(m?TT(v,"bottom"):!m&&ET&&f!==0&&TT(v,f))};zp&&l.addEventListener("load",p,{once:!0}),u.open(),u.write(s),u.close(),zp||p()})},VZ=Kr(ET,zp?500:200).map(t=>fm(AT,t)),zZ=(t,s)=>{const a=Rt(t.getOr(""));return{getValue:l=>a.get(),setValue:(l,u)=>{if(a.get()!==u){const f=l.element,m=()=>an(f,"srcdoc",u);s?VZ.fold(te(AT),p=>p.throttle)(f,u,m):m()}a.set(u)}}},s8=(t,s,a)=>{const l="tox-dialog__iframe",u=t.transparent?[]:[`${l}--opaque`],f=t.border?["tox-navobj-bordered"]:[],m={...t.label.map(D=>({title:D})).getOr({}),...a.map(D=>({srcdoc:D})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},p=zZ(a,t.streamContent),v=t.label.map(D=>cu(D,s)),C=D=>QN(x.from(f),{uid:D.uid,dom:{tag:"iframe",attributes:m,classes:[l,...u]},behaviours:qe([Mo.config({}),tn.config({}),$g(a,p.getValue,p.setValue),Ya.config({channels:{[O0]:{onReceive:(I,H)=>{H.newFocus.each(W=>{Un(I.element).each(Q=>{(vo(I.element,W)?xs:Yo)(Q,"tox-navobj-bordered-focus")})})}}}})])}),E=Fn.parts.field({factory:{sketch:C}});return Hp(v,E,["tox-form__group--stretched"],[])},UZ=(t,s,a,l,u)=>{const f=a*u,m=l*u,p=Math.max(0,t/2-f/2),v=Math.max(0,s/2-m/2);return{left:p.toString()+"px",top:v.toString()+"px",width:f.toString()+"px",height:m.toString()+"px"}},ZZ=(t,s,a)=>{const l=nr(t),u=zn(t);return Math.min(l/s,u/a,1)},WZ=(t,s)=>{const a=Rt(s.getOr({url:""})),l=lo({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(v=>({src:v.url})).getOr({})}}),u=lo({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[l.asSpec()]}),f=(v,C)=>{const E={url:C.url};C.zoom.each(I=>E.zoom=I),C.cachedWidth.each(I=>E.cachedWidth=I),C.cachedHeight.each(I=>E.cachedHeight=I),a.set(E);const D=()=>{const{cachedWidth:I,cachedHeight:H,zoom:W}=E;if(!ce(I)&&!ce(H)){if(ce(W)){const se=ZZ(v.element,I,H);E.zoom=se}const Q=UZ(nr(v.element),zn(v.element),I,H,E.zoom);u.getOpt(v).each(se=>{Ki(se.element,Q)})}};l.getOpt(v).each(I=>{const H=I.element;C.url!==qs(H,"src")&&(an(H,"src",C.url),Yo(v.element,"tox-imagepreview__loaded")),D(),fr(H).then(W=>{v.getSystem().isConnected()&&(xs(v.element,"tox-imagepreview__loaded"),E.cachedWidth=W.dom.naturalWidth,E.cachedHeight=W.dom.naturalHeight,D())})})},m={};t.height.each(v=>m.height=v);const p=s.map(v=>({url:v.url,zoom:x.from(v.zoom),cachedWidth:x.from(v.cachedWidth),cachedHeight:x.from(v.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:m,attributes:{role:"presentation"}},components:[u.asSpec()],behaviours:qe([Yl.self(),$g(p,()=>a.get(),f)])}},jZ=(t,s,a)=>{const l="tox-label",u=t.align==="center"?[`${l}--center`]:[],f=t.align==="end"?[`${l}--end`]:[],m=lo({dom:{tag:"label",classes:[l,...u,...f]},components:[Wo(s.providers.translate(t.label))]}),p=Ie(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[m.asSpec(),...p],behaviours:qe([Yl.self(),fn.config({}),kZ(x.none()),It.config({mode:"acyclic"}),cn("label",[$o(v=>{t.for.each(C=>{a(C).each(E=>{m.getOpt(v).each(D=>{var I;const H=(I=qs(E.element,"id"))!==null&&I!==void 0?I:Ct("form-field");an(E.element,"id",H),an(D.element,"for",H)})})})})])])}},OT=Ct("toolbar.button.execute"),GZ=t=>Bd((s,a)=>{m0(t,s)(l=>{Wt(s,OT,{buttonApi:l}),t.onAction(l)})}),tm=Ct("common-button-display-events"),r8={[el()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Dl()]:["toolbar-button-events",tm],[Vu()]:["toolbar-button-events","dropdown-events","tooltipping"],[Ai()]:["focusing","alloy.base.behaviour",tm]},kT=t=>gn(t.element,"width",k(t.element,"width")),a8=(t,s,a)=>ci(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),$C=(t,s)=>a8(t,s,[]),uu=(t,s)=>a8(t,s,[fn.config({})]),HC=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Wo(a.translate(t))],behaviours:qe([fn.config({})])}),Jl=Ct("update-menu-text"),Hg=Ct("update-menu-icon"),DT=Ct("update-tooltip-text"),MT=(t,s,a,l)=>{const u=Rt(ee),f=Rt(t.tooltip),m=t.text.map(se=>lo(HC(se,s,a.providers))),p=t.icon.map(se=>lo(uu(se,a.providers.icons))),v=(se,X)=>{const ie=xt.getValue(se);return tn.focus(ie),Wt(ie,"keydown",{raw:X.event.raw}),sl.close(ie),x.some(!0)},C=t.role.fold(()=>({}),se=>({role:se})),E=x.from(t.listRole).map(se=>({listRole:se})).getOr({}),D=t.ariaLabel.fold(()=>({}),se=>({"aria-label":a.providers.translate(se)})),I=ci("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),H=Ct("common-button-display-events"),W="dropdown-events";return lo(sl.sketch({...t.uid?{uid:t.uid}:{},...C,...E,dom:{tag:"button",classes:[s,`${s}--select`].concat(Ie(t.classes,se=>`${s}--${se}`)),attributes:{...D,...fe(l)?{"data-mce-name":l}:{}}},components:Np([p.map(se=>se.asSpec()),m.map(se=>se.asSpec()),x.some(I)]),matchWidth:!0,useMinWidth:!0,onOpen:(se,X,ie)=>{t.searchable&&mT(ie)},dropdownBehaviours:qe([...t.dropdownBehaviours,Fi.button(()=>t.disabled||a.providers.checkUiComponentContext(t.context).shouldDisable),Ms(()=>a.providers.checkUiComponentContext(t.context)),dg.config({}),fn.config({}),...t.tooltip.map(se=>qo.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(se),onShow:X=>{if(Gr(f.get(),t.tooltip,(ie,le)=>le!==ie).getOr(!1)){const ie=a.providers.translate(f.get().getOr(""));qo.setComponents(X,a.providers.tooltips.getComponents({tooltipText:ie}))}}}))).toArray(),cn(W,[Fc(t,u),Kl(t,u)]),cn(H,[$o((se,X)=>{t.listRole!=="listbox"&&kT(se)})]),cn("update-dropdown-width-variable",[Le(qc(),(se,X)=>sl.close(se))]),cn("menubutton-update-display-text",[Le(Jl,(se,X)=>{m.bind(ie=>ie.getOpt(se)).each(ie=>{fn.set(ie,[Wo(a.providers.translate(X.event.text))])})}),Le(Hg,(se,X)=>{p.bind(ie=>ie.getOpt(se)).each(ie=>{fn.set(ie,[uu(X.event.icon,a.providers.icons)])})}),Le(DT,(se,X)=>{const ie=a.providers.translate(X.event.text);an(se.element,"aria-label",ie),f.set(x.some(X.event.text))})])]),eventOrder:ho(r8,{[Ai()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Dl()]:["toolbar-button-events",qo.name(),W,H]}),sandboxBehaviours:qe([It.config({mode:"special",onLeft:v,onRight:v}),cn("dropdown-sandbox-events",[Le(aC,(se,X)=>{dZ(se),X.stop()}),Le(Eg,(se,X)=>{fZ(se,X),X.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...rC(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:Fg,onCollapseMenu:(se,X,ie)=>{io.getHighlighted(ie).each(le=>{Fg(se,ie,le)})},onDehighlightItem:y0}}},getAnchorOverrides:()=>({maxHeightFunction:(se,X)=>{Qx()(se,X-10)}}),fetch:se=>ns.nu(dt(t.fetch,se))})).asSpec()},KZ=t=>B(t),i8=t=>t.type==="separator",l8=t=>yt(t,"getSubmenuItems"),YZ={type:"separator"},XZ=(t,s)=>{const a=Bo(t,(l,u)=>KZ(u)?u===""?l:u==="|"?l.length>0&&!i8(l[l.length-1])?l.concat([YZ]):l:yt(s,u.toLowerCase())?l.concat([s[u.toLowerCase()]]):l:l.concat([u]),[]);return a.length>0&&i8(a[a.length-1])&&a.pop(),a},RT=(t,s)=>{const a=t.getSubmenuItems(),l=c8(a,s),u=ho(l.menus,{[t.value]:l.items}),f=ho(l.expansions,{[t.value]:t.value});return{item:t,menus:u,expansions:f}},JZ=t=>{const s=$e(t,"value").getOrThunk(()=>Ct("generated-menu-item"));return ho({value:s},t)},c8=(t,s)=>{const a=XZ(B(t)?t.split(" "):t,s);return as(a,(l,u)=>{if(l8(u)){const f=JZ(u),m=RT(f,s);return{menus:ho(l.menus,m.menus),items:[m.item,...l.items],expansions:ho(l.expansions,m.expansions)}}else return{...l,items:[u,...l.items]}},{menus:{},expansions:{},items:[]})},u8=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),QZ=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),Vg=(t,s,a,l)=>{const u=Ct("primary-menu"),f=c8(t,a.shared.providers.menuItems());if(f.items.length===0)return x.none();const m=u8(l),p=$p(u,f.items,s,a,l.isHorizontalMenu,m),v=QZ(l),C=ot(f.menus,(D,I)=>$p(I,D,s,a,!1,v)),E=ho(C,Nm(u,p));return x.from(gg.tieredData(u,E,f.expansions))},VC=t=>!yt(t,"items"),PT="data-value",d8=(t,s,a,l,u)=>Ie(a,f=>VC(f)?{type:"togglemenuitem",...u?{}:{role:"option"},text:f.text,value:f.value,active:f.value===l,onAction:()=>{xt.setValue(t,f.value),Wt(t,Qa,{name:s}),tn.focus(t)}}:{type:"nestedmenuitem",text:f.text,getSubmenuItems:()=>d8(t,s,f.items,l,u)}),NT=(t,s)=>xn(t,a=>VC(a)?Kr(a.value===s,a):NT(a.items,s)),qZ=(t,s,a)=>{const l=yn(t.items,C=>!VC(C)),u=s.shared.providers,f=a.bind(C=>NT(t.items,C)).orThunk(()=>bs(t.items).filter(VC)),m=t.label.map(C=>cu(C,u)),p=Fn.parts.field({dom:{},factory:{sketch:C=>MT({context:t.context,uid:C.uid,text:f.map(E=>E.text),icon:x.none(),tooltip:x.none(),role:Kr(!l,"combobox"),...l?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(E,D)=>{const I=d8(E,t.name,t.items,xt.getValue(E),l);D(Vg(I,jl.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:x.none()}))},onSetup:te(ee),getApi:te({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Mo.config({}),$g(f.map(E=>E.value),E=>qs(E.element,PT),(E,D)=>{NT(t.items,D).each(I=>{an(E.element,PT,I.value),Wt(E,Jl,{text:I.text})})})]},"tox-listbox",s.shared)}}),v={dom:{tag:"div",classes:["tox-listboxfield"]},components:[p]};return Fn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Ot([m.toArray(),[v]]),fieldBehaviours:qe([Lt.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable,onDisabled:C=>{Fn.getField(C).each(Lt.disable)},onEnabled:C=>{Fn.getField(C).each(Lt.enable)}})])})},f8=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Ie(t.items,s.shared.interpreter)}),eW=(t,s,a)=>{const l=Ie(t.items,v=>({text:s.translate(v.text),value:v.value})),u=t.label.map(v=>cu(v,s)),f=Fn.parts.field({dom:{},...a.map(v=>({data:v})).getOr({}),selectAttributes:{size:t.size},options:l,factory:pg,selectBehaviours:qe([Lt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),Mo.config({}),cn("selectbox-change",[Le(Im(),(v,C)=>{Wt(v,Qa,{name:t.name})})])])}),m=t.size>1?x.none():x.some(ci("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),p={dom:{tag:"div",classes:["tox-selectfield"]},components:Ot([[f],m.toArray()])};return Fn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Ot([u.toArray(),[p]]),fieldBehaviours:qe([Lt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:v=>{Fn.getField(v).each(Lt.disable)},onEnabled:v=>{Fn.getField(v).each(Lt.enable)}}),Ms(()=>s.checkUiComponentContext(t.context))])})},m8=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=u=>u in s?s[u]:1;let l=t.value.toFixed(a(t.unit));return l.indexOf(".")!==-1&&(l=l.replace(/\.?0*$/,"")),l+t.unit},zC=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const l=parseFloat(a[1]),u=a[2];return Sn.value({value:l,unit:u})}else return Sn.error(t)},UC=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=u=>yt(a,u);return t.unit===s?x.some(t.value):l(t.unit)&&l(s)?a[t.unit]===a[s]?x.some(t.value):x.some(t.value/a[t.unit]*a[s]):x.none()},Up=t=>x.none(),tW=(t,s)=>a=>UC(a,s).map(l=>({value:l*t,unit:s})),g8=(t,s)=>{const a=zC(t).toOptional(),l=zC(s).toOptional();return Gr(a,l,(u,f)=>UC(u,f.unit).map(m=>f.value/m).map(m=>tW(m,f.unit)).getOr(Up)).getOr(Up)},nW=(t,s)=>{let a=Up;const l=Ct("ratio-event"),u=Q=>ci(Q,{tag:"span",classes:["tox-icon","tox-lock-icon__"+Q]},s.icons),f=()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,m=Ms(()=>s.checkUiComponentContext(t.context)),p=t.label.getOr("Constrain proportions"),v=s.translate(p),C=Tn.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":v,"data-mce-name":p}},components:[u("lock"),u("unlock")],buttonBehaviours:qe([Lt.config({disabled:f}),m,Mo.config({}),qo.config(s.tooltips.getConfig({tooltipText:v}))])}),E=Q=>({dom:{tag:"div",classes:["tox-form__group"]},components:Q}),D=Q=>Fn.parts.field({factory:ed,inputClasses:["tox-textfield"],inputBehaviours:qe([Lt.config({disabled:f}),m,Mo.config({}),cn("size-input-events",[Le(ma(),(se,X)=>{Wt(se,l,{isField1:Q})}),Le(Im(),(se,X)=>{Wt(se,Qa,{name:t.name})})])]),selectOnFocus:!1}),I=Q=>({dom:{tag:"label",classes:["tox-label"]},components:[Wo(s.translate(Q))]}),H=Tn.parts.field1(E([Fn.parts.label(I("Width")),D(!0)])),W=Tn.parts.field2(E([Fn.parts.label(I("Height")),D(!1)]));return Tn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[H,W,E([I(Te),C])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(Q,se,X)=>{zC(xt.getValue(Q)).each(ie=>{a(ie).each(le=>{xt.setValue(se,m8(le))})})},coupledFieldBehaviours:qe([Lt.config({disabled:f,onDisabled:Q=>{Tn.getField1(Q).bind(Fn.getField).each(Lt.disable),Tn.getField2(Q).bind(Fn.getField).each(Lt.disable),Tn.getLock(Q).each(Lt.disable)},onEnabled:Q=>{Tn.getField1(Q).bind(Fn.getField).each(Lt.enable),Tn.getField2(Q).bind(Fn.getField).each(Lt.enable),Tn.getLock(Q).each(Lt.enable)}}),Ms(()=>s.checkUiComponentContext("mode:design")),cn("size-input-events2",[Le(l,(Q,se)=>{const X=se.event.isField1,ie=X?Tn.getField1(Q):Tn.getField2(Q),le=X?Tn.getField2(Q):Tn.getField1(Q),xe=ie.map(xt.getValue).getOr(""),Me=le.map(xt.getValue).getOr("");a=g8(xe,Me)})])])})},oW=(t,s,a)=>{const l=Nc.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Wo(s.translate(t.label))]}),u=Nc.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),f=Nc.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Nc.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:te(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[l,u,f],sliderBehaviours:qe([Yl.self(),tn.config({})]),onChoose:(m,p,v)=>{Wt(m,Qa,{name:t.name,value:v})},onChange:(m,p,v)=>{Wt(m,Qa,{name:t.name,value:v})}})},sW=(t,s)=>{const a=p=>({dom:{tag:"th",innerHtml:s.translate(p)}}),l=p=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ie(p,a)}]}),u=p=>({dom:{tag:"td",innerHtml:s.translate(p)}}),f=p=>({dom:{tag:"tr"},components:Ie(p,u)}),m=p=>({dom:{tag:"tbody"},components:Ie(p,f)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[l(t.header),m(t.cells)],behaviours:qe([Mo.config({}),tn.config({})])}},h8=(t,s)=>{const a=t.label.map(H=>cu(H,s)),l=[Lt.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable}),Ms(()=>s.checkUiComponentContext(t.context)),It.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:H=>(Zn(H,_g),x.some(!0))}),cn("textfield-change",[Le(Ed(),(H,W)=>{Wt(H,Qa,{name:t.name})}),Le(Sx(),(H,W)=>{Wt(H,Qa,{name:t.name})})]),Mo.config({})],u=t.validation.map(H=>Mc.config({getRoot:W=>Un(W.element),invalidClass:"tox-invalid",validator:{validate:W=>{const Q=xt.getValue(W),se=H.validator(Q);return ns.pure(se===!0?Sn.value(Q):Sn.error(se))},validateOnLoad:H.validateOnLoad}})).toArray(),f=t.placeholder.fold(te({}),H=>({placeholder:s.translate(H)})),m=t.inputMode.fold(te({}),H=>({inputmode:H})),p={...f,...m,"data-mce-name":t.name},v=Fn.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(H=>({data:H})).getOr({}),inputAttributes:p,inputClasses:[t.classname],inputBehaviours:qe(Ot([l,u])),selectOnFocus:!1,factory:ed}),C=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[v]}:v,D=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),I=[Lt.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:H=>{Fn.getField(H).each(Lt.disable)},onEnabled:H=>{Fn.getField(H).each(Lt.enable)}}),Ms(()=>s.checkUiComponentContext(t.context))];return Hp(a,C,D,I)},rW=(t,s,a)=>h8({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:x.none(),maximized:t.maximized,data:a,context:t.context},s),aW=(t,s,a)=>h8({name:t.name,multiline:!0,label:t.label,inputMode:x.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:x.none(),maximized:t.maximized,data:a,context:t.context},s),p8=t=>({isEnabled:()=>!Lt.isDisabled(t),setEnabled:s=>Lt.set(t,!s),setActive:s=>{const a=t.element;s?(xs(a,"tox-tbtn--enabled"),an(a,"aria-pressed",!0)):(Yo(a,"tox-tbtn--enabled"),ls(a,"aria-pressed"))},isActive:()=>Jr(t.element,"tox-tbtn--enabled"),setTooltip:s=>{Wt(t,DT,{text:s})},setText:s=>{Wt(t,Jl,{text:s})},setIcon:s=>Wt(t,Hg,{icon:s})}),Zp=(t,s,a,l,u=!0,f)=>{const m=t.buttonType==="bordered"?["bordered"]:[];return MT({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:l,fetch:(p,v)=>{const C={pattern:t.search.isSome()?hZ(p):""};t.fetch(E=>{v(Vg(E,jl.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},C,p8(p))},onSetup:t.onSetup,getApi:p=>p8(p),columns:1,presets:"normal",classes:m,dropdownBehaviours:[...u?[Mo.config({})]:[]],context:t.context},s,a.shared,f)},ZC=(t,s,a)=>{const l=f=>m=>{const p=!m.isActive();m.setActive(p),f.storage.set(p),a.shared.getSink().each(v=>{s().getOpt(v).each(C=>{Ls(C.element),Wt(C,sd,{name:f.name,value:f.storage.get()})})})},u=f=>m=>{m.setActive(f.storage.get())};return f=>{f(Ie(t,m=>{const p=m.text.fold(()=>({}),v=>({text:v}));return{type:m.type,active:!1,...p,context:m.context,onAction:l(m),onSetup:u(m)}}))}},WC=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[Wo(t)]}),IT=(t,s,a)=>{t.customStateIcon.each(l=>s.push(v8(l,a.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],u=>[qo.config(a.shared.providers.tooltips.getConfig({tooltipText:u}))]),["tox-icon-custom-state"])))},ef=Ct("leaf-label-event-id"),jC=({leaf:t,onLeafAction:s,visible:a,treeId:l,selectedId:u,backstage:f})=>{const m=t.menu.map(v=>Zp(v,"tox-mbtn",f,x.none(),a)),p=[WC(t.title)];return IT(t,p,f),m.each(v=>p.push(v)),Dr.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:p,role:"treeitem",action:v=>{s(t.id),v.getSystem().broadcastOn([`update-active-item-${l}`],{value:t.id})},eventOrder:{[Qc()]:[ef,"keying"]},buttonBehaviours:qe([...a?[Mo.config({})]:[],kn.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Ya.config({channels:{[`update-active-item-${l}`]:{onReceive:(v,C)=>{(C.value===t.id?kn.on:kn.off)(v)}}}}),cn(ef,[$o((v,C)=>{u.each(E=>{(E===t.id?kn.on:kn.off)(v)})}),Le(Qc(),(v,C)=>{const E=C.event.raw.code==="ArrowLeft",D=C.event.raw.code==="ArrowRight";E?(mc(v.element,".tox-tree--directory").each(I=>{v.getSystem().getByDom(I).each(H=>{Nu(I,".tox-tree--directory__label").each(W=>{H.getSystem().getByDom(W).each(tn.focus)})})}),C.stop()):D&&C.stop()})])])})},v8=(t,s,a,l,u)=>ci(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(l||[]),behaviours:a,attributes:u},s),iW=(t,s)=>v8(t,s,[]),b8=Ct("directory-label-event-id"),lW=({directory:t,visible:s,noChildren:a,backstage:l})=>{const u=t.menu.map(p=>Zp(p,"tox-mbtn",l,x.none())),f=[{dom:{tag:"div",classes:["tox-chevron"]},components:[iW("chevron-right",l.shared.providers.icons)]},WC(t.title)];IT(t,f,l),u.each(p=>{f.push(p)});const m=p=>{mc(p.element,".tox-tree--directory").each(v=>{p.getSystem().getByDom(v).each(C=>{const E=!kn.isOn(C);kn.toggle(C),Wt(p,"expand-tree-node",{expanded:E,node:t.id})})})};return Dr.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:f,action:m,eventOrder:{[Qc()]:[b8,"keying"]},buttonBehaviours:qe([...s?[Mo.config({})]:[],cn(b8,[Le(Qc(),(p,v)=>{const C=v.event.raw.code==="ArrowRight",E=v.event.raw.code==="ArrowLeft";C&&a&&v.stop(),(C||E)&&mc(p.element,".tox-tree--directory").each(D=>{p.getSystem().getByDom(D).each(I=>{!kn.isOn(I)&&C||kn.isOn(I)&&E?(m(p),v.stop()):E&&!kn.isOn(I)&&(mc(I.element,".tox-tree--directory").each(H=>{Nu(H,".tox-tree--directory__label").each(W=>{I.getSystem().getByDom(W).each(tn.focus)})}),v.stop())})})})])])})},cW=({children:t,onLeafAction:s,visible:a,treeId:l,expandedIds:u,selectedId:f,backstage:m})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(p=>p.type==="leaf"?jC({leaf:p,selectedId:f,onLeafAction:s,visible:a,treeId:l,backstage:m}):BT({directory:p,expandedIds:u,selectedId:f,onLeafAction:s,labelTabstopping:a,treeId:l,backstage:m})),behaviours:qe([Pa.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),fn.config({})])}),uW=Ct("directory-event-id"),BT=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:l,backstage:u,expandedIds:f,selectedId:m})=>{const{children:p}=t,v=Rt(f),C=D=>p.map(I=>I.type==="leaf"?jC({leaf:I,selectedId:m,onLeafAction:s,visible:D,treeId:l,backstage:u}):BT({directory:I,expandedIds:v.get(),selectedId:m,onLeafAction:s,labelTabstopping:D,treeId:l,backstage:u})),E=f.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[lW({directory:t,visible:a,noChildren:t.children.length===0,backstage:u}),cW({children:p,expandedIds:f,selectedId:m,onLeafAction:s,visible:E,treeId:l,backstage:u})],behaviours:qe([cn(uW,[$o((D,I)=>{kn.set(D,E)}),Le("expand-tree-node",(D,I)=>{const{expanded:H,node:W}=I.event;v.set(H?[...v.get(),W]:v.get().filter(Q=>Q!==W))})]),kn.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(D,I)=>{const H=D.components()[1],W=C(I);I?Pa.grow(H):Pa.shrink(H),fn.set(H,W)}})])}},y8=Ct("tree-event-id"),dW=(t,s)=>{const a=t.onLeafAction.getOr(ee),l=t.onToggleExpand.getOr(ee),u=t.defaultExpandedIds,f=Rt(u),m=Rt(t.defaultSelectedId),p=Ct("tree-id"),v=(C,E)=>t.items.map(D=>D.type==="leaf"?jC({leaf:D,selectedId:C,onLeafAction:a,visible:!0,treeId:p,backstage:s}):BT({directory:D,selectedId:C,onLeafAction:a,expandedIds:E,labelTabstopping:!0,treeId:p,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:v(m.get(),f.get()),behaviours:qe([It.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),cn(y8,[Le("expand-tree-node",(C,E)=>{const{expanded:D,node:I}=E.event;f.set(D?[...f.get(),I]:f.get().filter(H=>H!==I)),l(f.get(),{expanded:D,node:I})})]),Ya.config({channels:{[`update-active-item-${p}`]:{onReceive:(C,E)=>{m.set(x.some(E.value)),fn.set(C,v(x.some(E.value),f.get()))}}}}),fn.config({})])}},GC=(t,s,a=[],l,u,f,m)=>{const p=s.fold(()=>({}),E=>({action:E})),v={buttonBehaviours:qe([Fi.item(()=>!t.enabled||m.checkUiComponentContext(t.context).shouldDisable),Ms(()=>m.checkUiComponentContext(t.context)),Mo.config({}),...f.map(E=>qo.config(m.tooltips.getConfig({tooltipText:m.translate(E)}))).toArray(),cn("button press",[q7("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...p},C=ho(v,{dom:l});return ho(C,{components:u})},LT=(t,s,a,l=[],u)=>{const f=t.tooltip.map(C=>({"aria-label":a.translate(C)})).getOr({}),m={tag:"button",classes:["tox-tbtn"],attributes:{...f,"data-mce-name":u}},p=t.icon.map(C=>$C(C,a.icons)),v=Np([p]);return GC(t,s,l,m,v,t.tooltip,a)},FT=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},C8=(t,s,a,l=[],u=[])=>{const f=a.translate(t.text),m=t.icon.map(H=>$C(H,a.icons)),p=[m.getOrThunk(()=>Wo(f))],v=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),D={tag:"button",classes:[...FT(v),...m.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...u],attributes:{"aria-label":f,"data-mce-name":t.text}},I=t.icon.map(te(f));return GC(t,s,l,D,p,I,a)},S8=(t,s,a,l=[],u=[])=>{const f=C8(t,x.some(s),a,l,u);return Dr.sketch(f)},x8=(t,s)=>a=>{s==="custom"?Wt(a,sd,{name:t,value:{}}):s==="submit"?Zn(a,_g):s==="cancel"?Zn(a,em):console.error("Unknown button type: ",s)},fW=(t,s)=>s==="menu",mW=(t,s)=>s==="custom"||s==="cancel"||s==="submit",w8=(t,s)=>s==="togglebutton",E8=(t,s,a)=>{var l,u;const f=t.icon.map(le=>uu(le,s.icons)).map(lo),m=le=>{Wt(le,sd,{name:t.name,value:{setIcon:xe=>{f.map(Me=>Me.getOpt(le).each(vt=>{fn.set(vt,[uu(xe,s.icons)])}))}}})},p=t.buttonType.getOr(t.primary?"primary":"secondary"),v={...t,name:(l=t.name)!==null&&l!==void 0?l:"",primary:p==="primary",tooltip:t.tooltip,enabled:(u=t.enabled)!==null&&u!==void 0?u:!1,borderless:!1},C=v.tooltip.or(t.text).map(le=>({"aria-label":s.translate(le)})).getOr({}),E=FT(p??"secondary"),D=t.icon.isSome()&&t.text.isSome(),I={tag:"button",classes:[...E.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...D?["tox-button--icon-and-text"]:[]],attributes:{...C,...fe(a)?{"data-mce-name":a}:{}}},H=[],W=s.translate(t.text.getOr("")),Q=Wo(W),X=[...Np([f.map(le=>le.asSpec())]),...t.text.isSome()?[Q]:[]],ie=GC(v,x.some(m),H,I,X,t.tooltip,s);return Dr.sketch(ie)},k0=(t,s,a)=>{if(fW(t,s)){const l=()=>m,u=t,f={...t,buttonType:"default",type:"menubutton",search:x.none(),onSetup:p=>(p.setEnabled(t.enabled),ee),fetch:ZC(u.items,l,a)},m=lo(Zp(f,"tox-tbtn",a,x.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return m.asSpec()}else if(mW(t,s)){const l=x8(t.name,s),u={...t,context:s==="cancel"?"any":t.context,borderless:!1};return S8(u,l,a.shared.providers,[])}else{if(w8(t,s))return E8(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},gW=(t,s)=>{const a=x8(t.name,"custom");return VN(x.none(),Fn.parts.field({factory:Dr,...C8(t,x.some(a),s,[w0(""),Yl.self()])}))},T8={type:"separator"},hW=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ee}),_T=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:ee}),pW=t=>Ie(t,hW),A8=(t,s)=>eo(s,a=>a.type===t),O8=(t,s)=>pW(A8(t,s)),k8=t=>O8("header",t.targets),vW=t=>O8("anchor",t.targets),bW=t=>x.from(t.anchorTop).map(s=>_T("<top>",s)).toArray(),yW=t=>x.from(t.anchorBottom).map(s=>_T("<bottom>",s)).toArray(),CW=t=>Ie(t,s=>_T(s,s)),SW=t=>Bo(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(T8,a),[]),$T=(t,s)=>{const a=t.toLowerCase();return eo(s,l=>{var u;const f=l.meta!==void 0&&l.meta.text!==void 0?l.meta.text:l.text,m=(u=l.value)!==null&&u!==void 0?u:"";return Vo(f.toLowerCase(),a)||Vo(m.toLowerCase(),a)})},xW=(t,s,a)=>{var l,u;const f=xt.getValue(s),m=(u=(l=f==null?void 0:f.meta)===null||l===void 0?void 0:l.text)!==null&&u!==void 0?u:f.value;return a.getLinkInformation().fold(()=>[],v=>{const C=$T(m,CW(a.getHistory(t)));return t==="file"?SW([C,$T(m,k8(v)),$T(m,Ot([bW(v),vW(v),yW(v)]))]):C})},HT=Ct("aria-invalid"),wW=(t,s,a,l)=>{const u=s.shared.providers,f=ie=>{const le=xt.getValue(ie);a.addToHistory(le.value,t.filetype)},m={...l.map(ie=>({initialData:ie})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":HT,type:"url"},minChars:0,responseTime:0,fetch:ie=>{const le=xW(t.filetype,ie,a),xe=Vg(le,jl.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:x.none()});return ns.pure(xe)},getHotspot:ie=>W.getOpt(ie),onSetValue:(ie,le)=>{ie.hasConfigured(Mc)&&Mc.run(ie).get(ee)},typeaheadBehaviours:qe([...a.getValidationHandler().map(ie=>Mc.config({getRoot:le=>Un(le.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(le,xe)=>{E.getOpt(le).each(Me=>{an(Me.element,"title",u.translate(xe))})}},validator:{validate:le=>{const xe=xt.getValue(le);return bu.nu(Me=>{ie({type:t.filetype,url:xe.value},vt=>{if(vt.status==="invalid"){const Ge=Sn.error(vt.message);Me(Ge)}else{const Ge=Sn.value(vt.message);Me(Ge)}})})},validateOnLoad:!1}})).toArray(),Lt.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable}),Mo.config({}),cn("urlinput-events",[Le(Ed(),ie=>{const le=gc(ie.element),xe=le.trim();xe!==le&&Om(ie.element,xe),t.filetype==="file"&&Wt(ie,Qa,{name:t.name})}),Le(Im(),ie=>{Wt(ie,Qa,{name:t.name}),f(ie)}),Le(Sx(),ie=>{Wt(ie,Qa,{name:t.name}),f(ie)})])]),eventOrder:{[Ed()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ie=>ie.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:rC(!1,1,"normal")},onExecute:(ie,le,xe)=>{Wt(le,_g,{})},onItemExecute:(ie,le,xe,Me)=>{f(ie),Wt(ie,Qa,{name:t.name})}},p=Fn.parts.field({...m,factory:sV}),v=t.label.map(ie=>cu(ie,u)),E=lo(((ie,le,xe=ie,Me=ie)=>ci(xe,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ie],attributes:{title:u.translate(Me),"aria-live":"polite",...le.fold(()=>({}),vt=>({id:vt}))}},u.icons))("invalid",x.some(HT),"warning")),D=lo({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[E.asSpec()]}),I=a.getUrlPicker(t.filetype),H=Ct("browser.url.event"),W=lo({dom:{tag:"div",classes:["tox-control-wrap"]},components:[p,D.asSpec()],behaviours:qe([Lt.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable})])}),Q=lo(S8({context:t.context,name:t.name,icon:x.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:x.none(),borderless:!0},ie=>Zn(ie,H),u,[],["tox-browse-url"])),se=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Ot([[W.asSpec()],I.map(()=>Q.asSpec()).toArray()])}),X=ie=>{Wn.getCurrent(ie).each(le=>{const xe=xt.getValue(le),Me={fieldname:t.name,...xe};I.each(vt=>{vt(Me).get(Ge=>{xt.setValue(le,Ge),Wt(ie,Qa,{name:t.name})})})})};return Fn.sketch({dom:xZ(),components:v.toArray().concat([se()]),fieldBehaviours:qe([Lt.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable,onDisabled:ie=>{Fn.getField(ie).each(Lt.disable),Q.getOpt(ie).each(Lt.disable)},onEnabled:ie=>{Fn.getField(ie).each(Lt.enable),Q.getOpt(ie).each(Lt.enable)}}),Ms(()=>u.checkUiComponentContext(t.context)),cn("url-input-events",[Le(H,X)])])})},EW=(t,s)=>{const a=a3(t.icon,s.icons);return $l.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[Dr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:l=>Wt(l,sd,{name:"alert-banner",value:t.url}),buttonBehaviours:qe([OR()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},TW=(t,s,a)=>{const l=v=>(v.element.dom.click(),x.some(!0)),u=Fn.parts.field({factory:{sketch:ct},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:qe([Yl.self(),Lt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:v=>{Un(v.element).each(C=>xs(C,"tox-checkbox--disabled"))},onEnabled:v=>{Un(v.element).each(C=>Yo(C,"tox-checkbox--disabled"))}}),Mo.config({}),tn.config({}),GN(a,w1,tx),It.config({mode:"special",onEnter:l,onSpace:l,stopSpaceKeyup:!0}),cn("checkbox-events",[Le(Im(),(v,C)=>{Wt(v,Qa,{name:t.name})})])])}),f=Fn.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Wo(s.translate(t.label))],behaviours:qe([dg.config({})])}),m=v=>ci(v==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+v]},s.icons),p=lo({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[m("checked"),m("unchecked")]});return Fn.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[u,p.asSpec(),f],fieldBehaviours:qe([Lt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),Ms(()=>s.checkUiComponentContext(t.context))])})},AW=(t,s)=>{const a=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],l=cn("htmlpanel",[$o(u=>{t.onInit(u.element.dom)})]);return t.presets==="presentation"?$l.sketch({dom:{tag:"div",classes:a,innerHtml:t.html},containerBehaviours:qe([qo.config({...s.tooltips.getConfig({tooltipText:"",onShow:u=>{ko(u.element,"[data-mce-tooltip]:hover").orThunk(()=>Yr(u.element)).each(f=>{er(f,"data-mce-tooltip").each(m=>{qo.setComponents(u,s.tooltips.getComponents({tooltipText:m}))})})}}),mode:"children-normal",anchor:u=>({type:"node",node:ko(u.element,"[data-mce-tooltip]:hover").orThunk(()=>Yr(u.element).filter(f=>er(f,"data-mce-tooltip").isSome())),root:u.element,layouts:{onLtr:te([zs,sr,Ds,Hr,Vs,hr]),onRtl:te([zs,sr,Ds,Hr,Vs,hr])},bubble:ha(0,-2,{})})}),l])}):$l.sketch({dom:{tag:"div",classes:a,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:qe([Mo.config({}),tn.config({}),l])})},ir=t=>(s,a,l,u,f)=>$e(a,"name").fold(()=>t(a,u,x.none(),f),m=>s.field(m,t(a,u,$e(l,m),f))),OW=t=>(s,a,l,u,f)=>{const m=ho(a,{source:"dynamic"});return ir(t)(s,m,l,u,f)},kW={bar:ir((t,s)=>CZ(t,s.shared)),collection:ir((t,s,a)=>wZ(t,s.shared.providers,a)),alertbanner:ir((t,s)=>EW(t,s.shared.providers)),input:ir((t,s,a)=>rW(t,s.shared.providers,a)),textarea:ir((t,s,a)=>aW(t,s.shared.providers,a)),label:ir((t,s,a,l)=>jZ(t,s.shared,l)),iframe:OW((t,s,a)=>s8(t,s.shared.providers,a)),button:ir((t,s)=>gW(t,s.shared.providers)),checkbox:ir((t,s,a)=>TW(t,s.shared.providers,a)),colorinput:ir((t,s,a)=>XY(t,s.shared,s.colorinput,a)),colorpicker:ir((t,s,a)=>E0(t,s.shared.providers,a)),dropzone:ir((t,s,a)=>Xl(t,s.shared.providers,a)),grid:ir((t,s)=>LZ(t,s.shared)),listbox:ir((t,s,a)=>qZ(t,s,a)),selectbox:ir((t,s,a)=>eW(t,s.shared.providers,a)),sizeinput:ir((t,s)=>nW(t,s.shared.providers)),slider:ir((t,s,a)=>oW(t,s.shared.providers,a)),urlinput:ir((t,s,a)=>wW(t,s,s.urlinput,a)),customeditor:ir(IZ),htmlpanel:ir((t,s)=>AW(t,s.shared.providers)),imagepreview:ir((t,s,a)=>WZ(t,a)),table:ir((t,s)=>sW(t,s.shared.providers)),tree:ir((t,s)=>dW(t,s)),panel:ir((t,s)=>f8(t,s))},D8={field:(t,s)=>s,record:te([])},M8=(t,s,a,l,u)=>{const f=ho(l,{shared:{interpreter:m=>VT(t,m,a,f,u)}});return VT(t,s,a,f,u)},VT=(t,s,a,l,u)=>$e(kW,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),f=>f(t,s,a,l,u)),zT=(t,s,a,l)=>VT(D8,t,s,a,l),D0={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},R8=(t,s,a)=>{const u={maxHeightFunction:Um()},f=()=>({type:"node",root:bd(dr(t())),node:x.from(t()),bubble:ha(12,12,D0),layouts:{onRtl:()=>[j1],onLtr:()=>[$h]},overrides:u}),m=()=>({type:"hotspot",hotspot:s(),bubble:ha(-12,12,D0),layouts:{onRtl:()=>[Ds,Vs,zs],onLtr:()=>[Vs,Ds,zs]},overrides:u});return()=>a()?f():m()},P8=(t,s,a,l)=>{const f={maxHeightFunction:Um()},m=()=>({type:"node",root:bd(dr(s())),node:x.from(s()),bubble:ha(12,12,D0),layouts:{onRtl:()=>[Rl],onLtr:()=>[Rl]},overrides:f}),p=()=>t?{type:"node",root:bd(dr(s())),node:x.from(s()),bubble:ha(0,-os(s()),D0),layouts:{onRtl:()=>[sr],onLtr:()=>[sr]},overrides:f}:{type:"hotspot",hotspot:a(),bubble:ha(0,0,D0),layouts:{onRtl:()=>[sr],onLtr:()=>[sr]},overrides:f};return()=>l()?m():p()},DW=(t,s,a)=>{const l=()=>({type:"node",root:bd(dr(t())),node:x.from(t()),layouts:{onRtl:()=>[Rl],onLtr:()=>[Rl]}}),u=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[zs],onLtr:()=>[zs]}});return()=>a()?l():u()},MW=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),l=t.model.table.getSelectedCells();if(l.length>1){const u=l[0],f=l[l.length-1],m={firstCell:rt.fromDom(u),lastCell:rt.fromDom(f)};return x.some(m)}return x.some(A1.range(rt.fromDom(a.startContainer),a.startOffset,rt.fromDom(a.endContainer),a.endOffset))}}),RW=t=>s=>({type:"node",root:t(),node:s}),Wp=(t,s,a,l)=>{const u=Sp(t),f=()=>rt.fromDom(t.getBody()),m=()=>rt.fromDom(t.getContentAreaContainer()),p=()=>u||!l();return{inlineDialog:R8(m,s,p),inlineBottomDialog:P8(t.inline,m,a,p),banner:DW(m,s,p),cursor:MW(t,f),node:RW(f)}},PW=t=>(s,a)=>{MN(t)(s,a)},NW=t=>()=>SN(t),IW=t=>s=>AC(t,s),BW=t=>s=>CN(t,s),LW=t=>({colorPicker:PW(t),hasCustomColors:NW(t),getColors:IW(t),getColorCols:BW(t)}),FW=t=>()=>Q6(t),_W=t=>({isDraggableModal:FW(t)}),$W=t=>{const s=Rt(Z4(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},KC=t=>To(t,"items"),N8=t=>To(t,"format"),I8=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],B8=t=>yt(t,"items"),L8=t=>yt(t,"block"),HW=t=>yt(t,"inline"),VW=t=>yt(t,"selector"),F8=t=>Bo(t,(s,a)=>{if(B8(a)){const l=F8(a.items);return{customFormats:s.customFormats.concat(l.customFormats),formats:s.formats.concat([{title:a.title,items:l.formats}])}}else if(HW(a)||L8(a)||VW(a)){const u=`custom-${B(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:u,format:a}]),formats:s.formats.concat([{title:a.title,format:u,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),zW=(t,s)=>{const a=F8(s),l=u=>{Qe(u,f=>{t.formatter.has(f.name)||t.formatter.register(f.name,f.format)})};return t.formatter?l(a.customFormats):t.on("init",()=>{l(a.customFormats)}),a.formats},_8=t=>V6(t).map(s=>{const a=zW(t,s);return z6(t)?I8.concat(a):a}).getOr(I8),UW=t=>{const s=Re(t);return s.length===1&&An(s,"title")},UT=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),$8=(t,s,a,l)=>{const u=v=>UT(v,a,l),f=v=>{const C=p(v.items);return{...v,type:"submenu",getStyleItems:te(C)}},m=v=>{const C=B(v.name)?v.name:Ct(v.title),E=`custom-${C}`,D={...v,type:"formatter",format:E,isSelected:a(E),getStylePreview:l(E)};return t.formatter.register(C,D),D},p=v=>Ie(v,C=>KC(C)?f(C):N8(C)?u(C):UW(C)?{...C,type:"separator"}:m(C));return p(s)},ZW=t=>{const s=p=>()=>t.formatter.match(p),a=p=>()=>{const v=t.formatter.get(p);return v!==void 0?x.some({tag:v.length>0&&(v[0].inline||v[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):x.none()},l=Rt([]),u=Rt([]),f=Rt(!1);return t.on("PreInit",p=>{const v=_8(t),C=$8(t,v,s,a);l.set(C)}),t.on("addStyleModifications",p=>{const v=$8(t,p.items,s,a);u.set(v),f.set(p.replace)}),{getData:()=>{const p=f.get()?[]:l.get(),v=u.get();return p.concat(v)}}},WW=t=>{let l=0;const u=()=>l>0,f=p=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[Wo(p.tooltipText)]}];return{getConfig:p=>({delayForShow:()=>u()?60:300,delayForHide:te(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:f(p),onShow:(v,C)=>{l++,p.onShow&&p.onShow(v,C)},onHide:(v,C)=>{l--,p.onHide&&p.onHide(v,C)},onSetup:p.onSetup}),getComponents:f}},jW=t=>fe(t)&&t.nodeType===1,H8=_c.trim,V8=t=>s=>!!(jW(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),YC=V8("true"),XC=V8("false"),ZT=(t,s,a,l,u)=>({type:t,title:s,url:a,level:l,attach:u}),GW=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return YC(s)}return!1},KW=(t,s)=>Ie(Xo(rt.fromDom(s),t),a=>a.dom),z8=t=>t.innerText||t.textContent,YW=t=>t.id?t.id:Ct("h"),XW=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,JC=t=>XW(t)&&jT(t),WT=t=>t&&/^(H[1-6])$/.test(t.nodeName),jT=t=>GW(t)&&!XC(t),U8=t=>WT(t)&&jT(t),Z8=t=>WT(t)?parseInt(t.nodeName.substr(1),10):0,JW=t=>{var s;const a=YW(t),l=()=>{t.id=a};return ZT("header",(s=z8(t))!==null&&s!==void 0?s:"","#"+a,Z8(t),l)},W8=t=>{const s=t.id||t.name,a=z8(t);return ZT("anchor",a||"#"+s,"#"+s,0,ee)},QW=t=>Ie(eo(t,U8),JW),qW=t=>Ie(eo(t,JC),W8),ej=t=>KW("h1,h2,h3,h4,h5,h6,a:not([href])",t),tj=t=>H8(t.title).length>0,M0={find:t=>{const s=ej(t);return eo(QW(s).concat(qW(s)),tj)}},QC="tinymce-url-history",j8=5,G8=t=>B(t)&&/^https?/.test(t),K8=t=>K(t)&&t.length<=j8&&ia(t,G8),Y8=t=>O(t)&&Yt(t,s=>!K8(s)).isNone(),GT=()=>{const t=Bg.getItem(QC);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+QC+" was not valid JSON",a),{};throw a}return Y8(s)?s:(console.log("Local storage "+QC+" was not valid format",s),{})},nj=t=>{if(!Y8(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Bg.setItem(QC,JSON.stringify(t))},oj=t=>{const s=GT();return $e(s,t).getOr([])},sj=(t,s)=>{if(!G8(t))return;const a=GT(),l=$e(a,s).getOr([]),u=eo(l,f=>f!==t);a[s]=[t].concat(u).slice(0,j8),nj(a)},X8=t=>!!t,rj=t=>ot(_c.makeMap(t,/[, ]/),X8),zg=t=>x.from($4(t)),J8=t=>{const s=x.from(bp(t)).filter(X8).map(rj);return zg(t).fold(it,a=>s.fold(et,l=>Re(l).length>0?l:!1))},aj=(t,s)=>{const a=J8(t);return re(a)?a?zg(t):x.none():a[s]?zg(t):x.none()},ij=(t,s)=>aj(t,s).map(a=>l=>ns.nu(u=>{const f=(p,v)=>{if(!B(p))throw new Error("Expected value to be string");if(v!==void 0&&!O(v))throw new Error("Expected meta to be a object");u({value:p,meta:v})},m={filetype:s,fieldname:l.fieldname,...x.from(l.meta).getOr({})};a.call(t,f,l.value,m)})),KT=t=>x.from(t).filter(B).getOrUndefined(),YT=t=>yp(t)?x.some({targets:M0.find(t.getBody()),anchorTop:KT(X6(t)),anchorBottom:KT(J6(t))}):x.none(),Q8=t=>x.from(Jv(t)),q8=t=>({getHistory:oj,addToHistory:sj,getLinkInformation:()=>YT(t),getValidationHandler:()=>Q8(t),getUrlPicker:s=>ij(t,s)}),lj=(t,s,a,l)=>{const u=Rt(!1),f=$W(s),m={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Wl.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:WW(t.dialog),checkUiComponentContext:X=>{if(L4(s))return{contextType:"disabled",shouldDisable:!0};const[ie,le=""]=X.split(":"),xe=s.ui.registry.getAll().contexts,Me=$e(xe,ie).fold(()=>$e(xe,"mode").map(vt=>vt("design")).getOr(!1),vt=>le.charAt(0)==="!"?!vt(le.slice(1)):vt(le));return{contextType:ie,shouldDisable:!Me}}},p=q8(s),v=ZW(s),C=LW(s),E=_W(s),D=()=>u.get(),I=X=>u.set(X),H={shared:{providers:m,anchors:Wp(s,a,l,f.isPositionedAtTop),header:f},urlinput:p,styles:v,colorinput:C,dialog:E,isContextMenuOpen:D,setContextMenuState:I},W=X=>x.none(),Q={...H,shared:{...H.shared,interpreter:X=>zT(X,{},Q,W),getSink:t.popup}},se={...H,shared:{...H.shared,interpreter:X=>zT(X,{},se,W),getSink:t.dialog}};return{popup:Q,dialog:se}},jp=(t,s,a)=>{const l=(Pe,wt)=>{Qe([s,...a],Kt=>{Kt.broadcastEvent(Pe,wt)})},u=(Pe,wt)=>{Qe([s,...a],Kt=>{Kt.broadcastOn([Pe],wt)})},f=Pe=>u(Ju(),{target:Pe.target}),m=ph(),p=Tr(m,"touchstart",f),v=Tr(m,"touchmove",Pe=>l(E7(),Pe)),C=Tr(m,"touchend",Pe=>l(F1(),Pe)),E=Tr(m,"mousedown",f),D=Tr(m,"mouseup",Pe=>{Pe.raw.button===0&&u(LE(),{target:Pe.target})}),I=Pe=>u(Ju(),{target:rt.fromDom(Pe.target)}),H=Pe=>{Pe.button===0&&u(LE(),{target:rt.fromDom(Pe.target)})},W=()=>{Qe(t.editorManager.get(),Pe=>{t!==Pe&&Pe.dispatch("DismissPopups",{relatedTarget:t})})},Q=Pe=>l(xx(),hh(Pe)),se=Pe=>{u(Vf(),{}),l(qc(),hh(Pe))},X=dr(rt.fromDom(t.getElement())),ie=xm(X,"scroll",Pe=>{requestAnimationFrame(()=>{const wt=t.getContainer();if(wt!=null){const Ft=Yf(t,s.element).map(_n=>[_n.element,..._n.others]).getOr([]);yn(Ft,_n=>vo(_n,Pe.target))&&(t.dispatch("ElementScroll",{target:Pe.target.dom}),l(_m(),Pe))}})}),le=()=>u(Vf(),{}),xe=Pe=>{Pe.state&&u(Ju(),{target:rt.fromDom(t.getContainer())})},Me=Pe=>{u(Ju(),{target:rt.fromDom(Pe.relatedTarget.getContainer())})},vt=Pe=>t.dispatch("focusin",Pe),Ge=Pe=>t.dispatch("focusout",Pe);t.on("PostRender",()=>{t.on("click",I),t.on("tap",I),t.on("mouseup",H),t.on("mousedown",W),t.on("ScrollWindow",Q),t.on("ResizeWindow",se),t.on("ResizeEditor",le),t.on("AfterProgressState",xe),t.on("DismissPopups",Me),Qe([s,...a],Pe=>{Pe.element.dom.addEventListener("focusin",vt),Pe.element.dom.addEventListener("focusout",Ge)})}),t.on("remove",()=>{t.off("click",I),t.off("tap",I),t.off("mouseup",H),t.off("mousedown",W),t.off("ScrollWindow",Q),t.off("ResizeWindow",se),t.off("ResizeEditor",le),t.off("AfterProgressState",xe),t.off("DismissPopups",Me),Qe([s,...a],Pe=>{Pe.element.dom.removeEventListener("focusin",vt),Pe.element.dom.removeEventListener("focusout",Ge)}),E.unbind(),p.unbind(),v.unbind(),C.unbind(),D.unbind(),ie.unbind()}),t.on("detach",()=>{Qe([s,...a],Il),Qe([s,...a],Pe=>Pe.destroy())})},qC=ee,eS=it,tS=te([]);var XT=Object.freeze({__proto__:null,setup:qC,isDocked:eS,getBehaviours:tS});const nS=te(Ct("toolbar-height-change")),Ql={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},JT="tox-tinymce--toolbar-sticky-on",QT="tox-tinymce--toolbar-sticky-off",qT=(t,s)=>{const a=ca(s),u=wl(s).dom.innerHeight,f=da(a),m=rt.fromDom(t.elm),p=km(m),v=zn(m),C=p.y,E=C+v,D=fc(s),I=zn(s),H=D.top,W=H+I,Q=Math.abs(H-f.top)<2,se=Math.abs(W-(f.top+u))<2;if(Q&&C<W)JS(f.left,C-I,a);else if(se&&E>H){const X=C-u+v+I;JS(f.left,X,a)}},oS=(t,s)=>An(Qo.getModes(t),s),sS=t=>{const s=l=>os(l)+(parseInt(k(l,"margin-top"),10)||0)+(parseInt(k(l,"margin-bottom"),10)||0),a=t.element;Un(a).each(l=>{const u="padding-"+Qo.getModes(t)[0];if(Qo.isDocked(t)){const f=nr(l);gn(a,"width",f+"px"),gn(l,u,s(a)+"px")}else mt(a,"width"),mt(l,u)})},eI=(t,s)=>{s?(Yo(t,Ql.fadeOutClass),Am(t,[Ql.transitionClass,Ql.fadeInClass])):(Yo(t,Ql.fadeInClass),Am(t,[Ql.fadeOutClass,Ql.transitionClass]))},tI=(t,s)=>{const a=rt.fromDom(t.getContainer());s?(xs(a,JT),Yo(a,QT)):(xs(a,QT),Yo(a,JT))},rS=(t,s)=>{const a=ca(s);uc(a).filter(l=>!vo(s,l)).filter(l=>vo(l,rt.fromDom(a.dom.body))||hm(t,l)).each(()=>Ls(s))},nI=(t,s)=>Yr(t).orThunk(()=>s().toOptional().bind(a=>Yr(a.element))),cj=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(Qo.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(sS)}),t.on("SkinLoaded",()=>{a().each(l=>{Qo.isDocked(l)?Qo.reset(l):Qo.refresh(l)})}),t.on("FullscreenStateChanged",()=>{a().each(Qo.reset)})),t.on("AfterScrollIntoView",l=>{a().each(u=>{Qo.refresh(u);const f=u.element;KS(f)&&qT(l,f)})}),t.on("PostRender",()=>{tI(t,!1)})},uj=t=>t().map(Qo.isDocked).getOr(!1),dj=()=>[Ya.config({channels:{[nS()]:{onReceive:sS}}})],oI=(t,s)=>{const a=dn(),l=s.getSink,u=p=>{l().each(v=>p(v.element))},f=p=>{t.inline||sS(p),tI(t,Qo.isDocked(p)),p.getSystem().broadcastOn([Vf()],{}),l().each(v=>v.getSystem().broadcastOn([Vf()],{}))},m=t.inline?[]:dj();return[tn.config({}),Qo.config({contextual:{lazyContext:p=>{const v=os(p.element),C=t.inline?t.getContentAreaContainer():t.getContainer();return x.from(C).map(E=>{const D=$r(rt.fromDom(E));return Yf(t,p.element).fold(()=>{const H=D.height-v,W=D.y+(oS(p,"top")?0:v);return _s(D.x,W,D.width,H)},H=>{const W=Ob(D,Sg(H)),Q=oS(p,"top")?W.y:W.y+v;return _s(W.x,Q,W.width,W.height-v)})})},onShow:()=>{u(p=>eI(p,!0))},onShown:p=>{u(v=>Xi(v,[Ql.transitionClass,Ql.fadeInClass])),a.get().each(v=>{rS(p.element,v),a.clear()})},onHide:p=>{nI(p.element,l).fold(a.clear,a.set),u(v=>eI(v,!1))},onHidden:()=>{u(p=>Xi(p,[Ql.transitionClass]))},...Ql},lazyViewport:p=>Yf(t,p.element).fold(()=>{const C=fa(),E=jf(t),D=C.y+(oS(p,"top")&&!K4(t)?E:0),I=C.height-(oS(p,"bottom")?E:0);return{bounds:_s(C.x,D,C.width,I),optScrollEnv:x.none()}},C=>({bounds:Sg(C),optScrollEnv:x.some({currentScrollTop:C.element.dom.scrollTop,scrollElmTop:fc(C.element).top})})),modes:[s.header.getDockingMode()],onDocked:f,onUndocked:f}),...m]};var fj=Object.freeze({__proto__:null,setup:cj,isDocked:uj,getBehaviours:oI});const sI=t=>{const s=t.editor,a=t.sticky?oI:tS;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:qe(a(s,t.sharedBackstage))}};var aS=ol({factory:(t,s)=>{const a=(u,f)=>{const m=Ie(f,p=>{const v={type:"menubutton",text:p.text,fetch:E=>{E(p.getItems())},context:"any"},C=mP(v).mapError(E=>Pm(E)).getOrDie();return Zp(C,"tox-mbtn",s.backstage,x.some("menuitem"))});fn.set(u,m)},l={focus:It.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:qe([fn.config({}),cn("menubar-events",[$o(u=>{t.onSetup(u)}),Le(xc(),(u,f)=>{ko(u.element,".tox-mbtn--active").each(m=>{Iu(f.event.target,".tox-mbtn").each(p=>{vo(m,p)||u.getSystem().getByDom(m).each(v=>{u.getSystem().getByDom(p).each(C=>{sl.expand(C),sl.close(v),tn.focus(C)})})})})}),Le(Tf(),(u,f)=>{f.event.prevFocus.bind(m=>u.getSystem().getByDom(m).toOptional()).each(m=>{f.event.newFocus.bind(p=>u.getSystem().getByDom(p).toOptional()).each(p=>{sl.isOpen(m)&&(sl.expand(p),sl.close(m))})})})]),It.config({mode:"flow",selector:".tox-mbtn",onEscape:u=>(t.onEscape(u),x.some(!0))}),Mo.config({})]),apis:l,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[We("dom"),We("uid"),We("onEscape"),We("backstage"),ve("onSetup",ee)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const rI="💝Get all features",gj="https://www.tiny.cloud/tinymce-upgrade-to-cloud/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",aI=t=>{const s=t.promotionLink?[{dom:{tag:"a",attributes:{href:gj,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:rI}}]:[];return{uid:t.uid,dom:t.dom,components:s}},iI=t=>{const{sidebars:s}=t.ui.registry.getAll();Qe(Re(s),a=>{const l=s[a],u=()=>Sa(x.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:l.icon,tooltip:l.tooltip,onAction:f=>{t.execCommand("ToggleSidebar",!1,a),f.setActive(u())},onSetup:f=>{f.setActive(u());const m=()=>f.setActive(u());return t.on("ToggleSidebar",m),()=>{t.off("ToggleSidebar",m)}},context:"any"})})},hj=t=>({element:()=>t.element.dom}),tX=(t,s)=>{const a=Ie(Re(s),l=>{const u=s[l],f=kl(UP(u));return{name:l,getApi:hj,onSetup:f.onSetup,onShow:f.onShow,onHide:f.onHide}});return Ie(a,l=>{const u=Rt(ee);return t.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Dg.unnamedEvents([Fc(l,u),Kl(l,u),Le(Vb(),(f,m)=>{const p=m.event;_t(a,C=>C.name===p.name).each(C=>{(p.visible?C.onShow:C.onHide)(C.getApi(f))})})])})})},pj=t=>ba.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:tX(s,t),slotBehaviours:Dg.unnamedEvents([$o(a=>ba.hideAllSlots(a))])})),vj=(t,s,a)=>{Wn.getCurrent(t).each(u=>{fn.set(u,[pj(s)]);const f=a==null?void 0:a.toLowerCase();B(f)&&yt(s,f)&&Wn.getCurrent(u).each(m=>{ba.showSlot(m,f),Pa.immediateGrow(u),mt(u.element,"width"),iS(t.element,"region")})})},iS=(t,s)=>{an(t,"role",s)},bj=(t,s)=>{Wn.getCurrent(t).each(l=>{Wn.getCurrent(l).each(f=>{Pa.hasGrown(l)?ba.isShowing(f,s)?(Pa.shrink(l),iS(t.element,"presentation")):(ba.hideAllSlots(f),ba.showSlot(f,s),iS(t.element,"region")):(ba.hideAllSlots(f),ba.showSlot(f,s),Pa.grow(l),iS(t.element,"region"))})})},yj=t=>Wn.getCurrent(t).bind(a=>Pa.isGrowing(a)||Pa.hasGrown(a)?Wn.getCurrent(a).bind(f=>_t(ba.getSlotNames(f),m=>ba.isShowing(f,m))):x.none()),eA=Ct("FixSizeEvent"),tA=Ct("AutoSizeEvent"),Cj=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:qe([Mo.config({}),tn.config({}),Pa.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Wn.getCurrent(s).each(ba.hideAllSlots),Zn(s,tA)},onGrown:s=>{Zn(s,tA)},onStartGrow:s=>{Wt(s,eA,{width:Y(s.element,"width").getOr("")})},onStartShrink:s=>{Wt(s,eA,{width:nr(s.element)+"px"})}}),fn.config({}),Wn.config({find:s=>{const a=fn.contents(s);return bs(a)}})])}],behaviours:qe([Yl.childAt(0),cn("sidebar-sliding-events",[Le(eA,(s,a)=>{gn(s.element,"width",a.event.width)}),Le(tA,(s,a)=>{mt(s.element,"width")})])])}),Sj=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Xu('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),lI=t=>Wn.getCurrent(t).each(s=>Ls(s.element,!0)),xj=(t,s)=>{const a="tabindex",l=`data-mce-${a}`;x.from(t.iframeElement).map(rt.fromDom).each(u=>{s?(er(u,a).each(f=>an(u,l,f)),an(u,a,-1)):(ls(u,a),er(u,l).each(f=>{an(u,a,f),ls(u,l)}))})},wj=(t,s,a,l)=>{const u=s.element;if(xj(t,a),a)kc.block(s,Sj(l)),mt(u,"display"),ls(u,"aria-hidden"),t.hasFocus()&&lI(s);else{const f=Wn.getCurrent(s).exists(m=>Ru(m.element));kc.unblock(s),gn(u,"display","none"),an(u,"aria-hidden","true"),f&&t.focus()}},Ej=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:qe([fn.config({}),kc.config({focus:!1}),Wn.config({find:s=>bs(s.components())})]),components:[]}),cI=t=>t.type==="focusin",Tj=t=>cI(t)?(t.composed?bs(t.composedPath()):x.from(t.target)).map(rt.fromDom).filter(oi).exists(a=>Jr(a,"mce-pastebin")):!1,Aj=(t,s,a)=>{const l=Rt(!1),u=dn(),f=p=>{l.get()&&!Tj(p)&&(p.preventDefault(),lI(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",f),t.on("BeforeExecCommand",p=>{p.command.toLowerCase()==="mcefocus"&&p.value!==!0&&f(p)})});const m=p=>{p!==l.get()&&(l.set(p),wj(t,s(),p,a.providers),$U(t,p))};t.on("ProgressState",p=>{if(u.on(clearTimeout),Fe(p.time)){const v=U2.setEditorTimeout(t,()=>m(p.state),p.time);u.set(v)}else m(p.state),u.clear()})},uI=t=>{const s=t.label.isNone()?t.title.fold(()=>({}),a=>({attributes:{"aria-label":a}})):t.label.fold(()=>({}),a=>({attributes:{"aria-label":a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(t.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...t.label.map(a=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[Wo(a)]})).toArray(),V2.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:qe([Mo.config({}),tn.config({ignore:!0})])}},lS=t=>V2.sketch(uI(t)),dI=(t,s)=>{const a=$o(l=>{const u=Ie(t.initGroups,lS);Mr.setGroups(l,u)});return qe([Fi.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),Ms(()=>t.providers.checkUiComponentContext("any")),It.config({mode:s,onEscape:t.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),cn("toolbar-events",[a])])},fI=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":uI({title:x.none(),label:x.none(),items:[]}),"overflow-button":LT({context:"any",name:"more",icon:x.some("more-drawer"),enabled:!0,tooltip:x.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:x.none(),borderless:!1},x.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:dI(t,s)}},Oj=t=>{const s=fI(t),a=4,l=R4.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return R4.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const u=t.moreDrawerData.lazyHeader().element,f=km(u),m=Si(u),p=km(m),v=Math.max(m.dom.scrollHeight,p.height);return _s(f.x+a,p.y,f.width-a*2,v)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[l],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:u=>t.onToggled(u,!0),onClosed:u=>t.onToggled(u,!1)})},kj=t=>{const s=I4.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=I4.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=fI(t);return I4.sketch({...l,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:u=>{u.getSystem().broadcastOn([nS()],{type:"opened"}),t.onToggled(u,!0)},onClosed:u=>{u.getSystem().broadcastOn([nS()],{type:"closed"}),t.onToggled(u,!1)}})},cS=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Mr.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===zl.scrolling?["tox-toolbar--scrolling"]:[])},components:[Mr.parts.groups({})],toolbarBehaviours:dI(t,s)})},nA=(t,s)=>{var a,l;const u=t.type==="togglebutton",f=t.icon.map(le=>uu(le,s.icons)).map(lo),p=le=>{const xe=Pe=>{f.map(wt=>wt.getOpt(le).each(Kt=>{fn.set(Kt,[uu(Pe,s.icons)])}))},Me=Pe=>{const wt=le.element;Pe?(xs(wt,"tox-button--enabled"),an(wt,"aria-pressed",!0)):(Yo(wt,"tox-button--enabled"),ls(wt,"aria-pressed"))},vt=()=>Jr(le.element,"tox-button--enabled"),Ge=()=>Ls(le.element);if(u)return t.onAction({setIcon:xe,setActive:Me,isActive:vt,focus:Ge});if(t.type==="button")return t.onAction({setIcon:xe})},v={...t,name:u?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:x.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},C=FT((l=t.buttonType)!==null&&l!==void 0?l:"secondary"),E=u?t.text.map(s.translate):x.some(s.translate(t.text)),D=E.map(Wo),I=v.tooltip.or(E).map(le=>({"aria-label":s.translate(le)})).getOr({}),H=f.map(le=>le.asSpec()),W=Np([H,D]),Q=t.icon.isSome()&&D.isSome(),se={tag:"button",classes:C.concat(...t.icon.isSome()&&!Q?["tox-button--icon"]:[]).concat(...Q?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:I},X=[],ie=GC(v,x.some(p),X,se,W,t.tooltip,s);return Dr.sketch(ie)},mI=(t,s)=>nA(t,s),Dj=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Ie(t.buttons,a=>mI(a,s))}),uS=Wa().deviceType,gI=uS.isPhone(),hI=uS.isTablet(),Mj=t=>{let s=!1;const a=Ie(t.buttons,l=>l.type==="group"?(s=!0,Dj(l,t.providers)):mI(l,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...gI||hI?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:qe([tn.config({}),It.config({mode:"flow",selector:"button, .tox-button",focusInside:Af.OnEnterOrSpaceMode})]),components:s?a:[$l.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),$l.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},Rj=t=>({uid:t.uid,behaviours:qe([tn.config({}),Mo.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),Pj=(t,s,a,l)=>{const u={getPane:f=>vr.getPart(f,t,"pane"),getOnShow:f=>t.viewConfig.onShow,getOnHide:f=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:qe([tn.config({}),It.config({mode:"cyclic",focusInside:Af.OnEnterOrSpaceMode})]),apis:u}};var Gp=Ra({name:"silver.View",configFields:[We("viewConfig")],partFields:[Ys({factory:{sketch:Mj},schema:[We("buttons"),We("providers")],name:"header"}),Ys({factory:{sketch:Rj},schema:[],name:"pane"})],factory:Pj,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const Nj=(t,s,a)=>wn(s,(l,u)=>{const f=kl(gU(l));return t.slot(u,Gp.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:f,components:[...f.buttons.length>0?[Gp.parts.header({buttons:f.buttons,providers:a})]:[],Gp.parts.pane({})]}))}),oA=(t,s)=>ba.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:Nj(a,t,s),slotBehaviours:Dg.unnamedEvents([$o(l=>ba.hideAllSlots(l))])})),pI=t=>_t(ba.getSlotNames(t),s=>ba.isShowing(t,s)),vI=t=>{const s=t.element;gn(s,"display","none"),an(s,"aria-hidden","true")},Ij=t=>{const s=t.element;mt(s,"display"),ls(s,"aria-hidden")},Bj=t=>({getContainer:te(t)}),dS=(t,s,a)=>{ba.getSlot(t,s).each(l=>{Gp.getPane(l).each(u=>{a(l)(Bj(u.element.dom))})})},Lj=(t,s)=>dS(t,s,Gp.getOnShow),bI=(t,s)=>dS(t,s,Gp.getOnHide);var fS=ol({factory:(t,s)=>{const f={setViews:(m,p)=>{fn.set(m,[oA(p,s.backstage.shared.providers)])},whichView:m=>Wn.getCurrent(m).bind(pI),toggleView:(m,p,v,C)=>Wn.getCurrent(m).exists(E=>{const D=pI(E),I=D.exists(W=>C===W),H=ba.getSlot(E,C).isSome();return H&&(ba.hideAllSlots(E),I?(vI(m),p()):(v(),Ij(m),ba.showSlot(E,C),Lj(E,C)),D.each(W=>bI(E,W))),H})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:qe([fn.config({}),Wn.config({find:m=>{const p=fn.contents(m);return bs(p)}})]),apis:f}},name:"silver.ViewWrapper",configFields:[We("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,l,u)=>t.toggleView(s,a,l,u),whichView:(t,s)=>t.whichView(s)}});const Fj=(t,s,a)=>{let l=!1;const u=m=>{yd(m,".tox-statusbar").each(p=>{k(p,"display")==="none"&&qs(p,"aria-hidden")==="true"?(mt(p,"display"),ls(p,"aria-hidden")):(gn(p,"display","none"),an(p,"aria-hidden","true"))})},f={getSocket:m=>vr.getPart(m,t,"socket"),setSidebar:(m,p,v)=>{vr.getPart(m,t,"sidebar").each(C=>vj(C,p,v))},toggleSidebar:(m,p)=>{vr.getPart(m,t,"sidebar").each(v=>bj(v,p))},whichSidebar:m=>vr.getPart(m,t,"sidebar").bind(yj).getOrNull(),getHeader:m=>vr.getPart(m,t,"header"),getToolbar:m=>vr.getPart(m,t,"toolbar"),setToolbar:(m,p)=>{vr.getPart(m,t,"toolbar").each(v=>{const C=Ie(p,lS);v.getApis().setGroups(v,C)})},setToolbars:(m,p)=>{vr.getPart(m,t,"multiple-toolbar").each(v=>{const C=Ie(p,E=>Ie(E,lS));b2.setItems(v,C)})},refreshToolbar:m=>{vr.getPart(m,t,"toolbar").each(v=>v.getApis().refresh(v))},toggleToolbarDrawer:m=>{vr.getPart(m,t,"toolbar").each(p=>{Cu(p.getApis().toggle,v=>v(p))})},toggleToolbarDrawerWithoutFocusing:m=>{vr.getPart(m,t,"toolbar").each(p=>{Cu(p.getApis().toggleWithoutFocusing,v=>v(p))})},isToolbarDrawerToggled:m=>vr.getPart(m,t,"toolbar").bind(p=>x.from(p.getApis().isOpen).map(v=>v(p))).getOr(!1),getThrobber:m=>vr.getPart(m,t,"throbber"),focusToolbar:m=>{vr.getPart(m,t,"toolbar").orThunk(()=>vr.getPart(m,t,"multiple-toolbar")).each(v=>{It.focusIn(v)})},setMenubar:(m,p)=>{vr.getPart(m,t,"menubar").each(v=>{aS.setMenus(v,p)})},focusMenubar:m=>{vr.getPart(m,t,"menubar").each(p=>{aS.focus(p)})},setViews:(m,p)=>{vr.getPart(m,t,"viewWrapper").each(v=>{fS.setViews(v,p)})},toggleView:(m,p)=>vr.getPart(m,t,"viewWrapper").exists(v=>fS.toggleView(v,()=>f.showMainView(m),()=>f.hideMainView(m),p)),whichView:m=>vr.getPart(m,t,"viewWrapper").bind(fS.whichView).getOrNull(),hideMainView:m=>{l=f.isToolbarDrawerToggled(m),l&&f.toggleToolbarDrawer(m),vr.getPart(m,t,"editorContainer").each(p=>{const v=p.element;u(v),gn(v,"display","none"),an(v,"aria-hidden","true")})},showMainView:m=>{l&&f.toggleToolbarDrawer(m),vr.getPart(m,t,"editorContainer").each(p=>{const v=p.element;u(v),mt(v,"display"),ls(v,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:f,behaviours:t.behaviours}},_j=nu.optional({factory:aS,name:"menubar",schema:[We("backstage")]}),$j=t=>t.type===zl.sliding?kj:t.type===zl.floating?Oj:cS,Hj=nu.optional({factory:{sketch:t=>b2.sketch({uid:t.uid,dom:t.dom,listBehaviours:qe([It.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>cS({type:t.type,uid:Ct("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),x.some(!0))}),setupItem:(s,a,l,u)=>{Mr.setGroups(a,l)},shell:!0})},name:"multiple-toolbar",schema:[We("dom"),We("onEscape")]}),CI=nu.optional({factory:{sketch:t=>{const s=$j(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),x.some(!0)),onToggled:(l,u)=>t.onToolbarToggled(u),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[We("dom"),We("onEscape"),We("getSink")]}),Vj=nu.optional({factory:{sketch:sI},name:"header",schema:[We("dom")]}),zj=nu.optional({factory:{sketch:aI},name:"promotion",schema:[We("dom"),We("promotionLink")]}),Uj=nu.optional({name:"socket",schema:[We("dom")]}),Zj=nu.optional({factory:{sketch:Cj},name:"sidebar",schema:[We("dom")]}),Wj=nu.optional({factory:{sketch:Ej},name:"throbber",schema:[We("dom")]}),jj=nu.optional({factory:fS,name:"viewWrapper",schema:[We("backstage")]}),Gj=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),Kj=nu.optional({factory:{sketch:Gj},name:"editorContainer",schema:[]});var Po=Ra({name:"OuterContainer",factory:Fj,configFields:[We("dom"),We("behaviours")],partFields:[Vj,_j,CI,Hj,Uj,Zj,zj,Wj,jj,Kj],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,l)=>{t.setSidebar(s,a,l)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const Yj="file edit view insert format tools table help",sA={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},Xj=(t,s,a)=>{const l=W6(a).split(/[ ,]/);return{text:t.title,getItems:()=>ke(t.items,u=>{const f=u.toLowerCase();return f.trim().length===0?[]:yn(l,m=>m===f)?[]:f==="separator"||f==="|"?[{type:"separator"}]:s.menuItems[f]?[s.menuItems[f]]:[]})}},rA=t=>t.split(" "),SI=(t,s)=>{const a={...sA,...s.menus},l=Re(s.menus).length>0,u=s.menubar===void 0||s.menubar===!0?rA(Yj):rA(s.menubar===!1?"":s.menubar),f=eo(u,p=>{const v=yt(sA,p);return l?v||$e(s.menus,p).exists(C=>yt(C,"items")):v}),m=Ie(f,p=>{const v=a[p];return Xj({title:v.title,items:rA(v.items)},s,t)});return eo(m,p=>{const v=C=>B(C)||C.type!=="separator";return p.getItems().length>0&&yn(p.getItems(),v)})},Ug=t=>{const s=()=>{t._skinLoaded=!0,FU(t)};return()=>{t.initialized?s():t.on("init",s)}},xI=(t,s)=>()=>lN(t,{message:s}),Jj=t=>{const s=z4(t);return s?x.from(s):x.none()},wI=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),mS=(t,s,a,l)=>(t.on("remove",()=>l.unloadRawCss(s)),l.loadRawCss(s,a)),Qj=(t,s)=>"ui/"+t+"/"+s,EI=t=>x.from(tinymce.Resource.get(t)).filter(B),aA=(t,s,a="")=>{const l=Jj(t).map(f=>Qj(f,`${s}.css`)),u=l.bind(EI);return Gr(l,u,(f,m)=>({_kind:"load-raw",key:f,css:m})).getOrThunk(()=>{const f=t.editorManager.suffix;return{_kind:"load-stylesheet",url:a+`/${s}${f}.css`}})},qj=(t,s)=>{const a=t.ui.styleSheetLoader,l=aA(t,"skin",s);switch(l._kind){case"load-raw":const{key:u,css:f}=l;return mS(t,u,f,a),Promise.resolve();case"load-stylesheet":const{url:m}=l;return wI(t,m,a);default:return Promise.resolve()}},eG=(t,s)=>{if(Au(rt.fromDom(t.getElement()))){const l=Kv.DOM.styleSheetLoader,u=aA(t,"skin.shadowdom",s);switch(u._kind){case"load-raw":const{key:f,css:m}=u;return mS(t,f,m,l),Promise.resolve();case"load-stylesheet":const{url:p}=u;return wI(t,p,l);default:return Promise.resolve()}}else return Promise.resolve()},tG=(t,s,a)=>{const u=aA(t,s?"content.inline":"content",a);switch(u._kind){case"load-raw":const{key:f,css:m}=u;return s?mS(t,f,m,t.ui.styleSheetLoader):t.on("PostRender",()=>{mS(t,f,m,t.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:p}=u;return a&&t.contentCSS.push(p),Promise.resolve();default:return Promise.resolve()}},nG=async(t,s)=>{const a=Gf(s);if(await tG(s,t,a),!K2(s)&&B(a))return Promise.all([qj(s,a),eG(s,a)]).then()},TI=(t,s)=>nG(t,s).then(Ug(s),xI(s,"Skin could not be loaded")),oG=dt(TI,!1),sG=dt(TI,!0),AI=t=>({isEnabled:()=>!Lt.isDisabled(t),setEnabled:s=>Lt.set(t,!s),setText:s=>Wt(t,Jl,{text:s}),setIcon:s=>Wt(t,Hg,{icon:s})}),rG=t=>({setActive:s=>{kn.set(t,s)},isActive:()=>kn.isOn(t),isEnabled:()=>!Lt.isDisabled(t),setEnabled:s=>Lt.set(t,!s),setText:s=>Wt(t,Jl,{text:s}),setIcon:s=>Wt(t,Hg,{icon:s})}),iA=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),lA=Ct("focus-button"),cA=(t,s,a,l,u,f,m)=>{const p=s.map(C=>lo(HC(C,"tox-tbtn",u))),v=t.map(C=>lo(uu(C,u.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...iA(a,u),...fe(m)?{"data-mce-name":m}:{}}},components:Np([v.map(C=>C.asSpec()),p.map(C=>C.asSpec())]),eventOrder:{[Ai()]:["focusing","alloy.base.behaviour",tm],[Dl()]:[tm,"toolbar-group-button-events"],[Vu()]:[tm,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:qe([Fi.toolbarButton(()=>u.checkUiComponentContext(f).shouldDisable),Ms(()=>u.checkUiComponentContext(f)),cn(tm,[$o((C,E)=>kT(C)),Le(Jl,(C,E)=>{p.bind(D=>D.getOpt(C)).each(D=>{fn.set(D,[Wo(u.translate(E.event.text))])})}),Le(Hg,(C,E)=>{v.bind(D=>D.getOpt(C)).each(D=>{fn.set(D,[uu(E.event.icon,u.icons)])})}),Le(Ai(),(C,E)=>{E.event.prevent(),Zn(C,lA)})])].concat(l.getOr([])))}},R0=(t,s,a,l,u)=>{const f=s.shared,m=Rt(ee),p={toolbarButtonBehaviours:[],getApi:AI,onSetup:t.onSetup},v=[cn("toolbar-group-button-events",[Fc(p,m),Kl(p,m)]),...t.tooltip.map(C=>qo.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(C)}))).toArray()];return qu.sketch({lazySink:f.getSink,fetch:()=>ns.nu(C=>{C(Ie(a(t.items),lS))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:cA(t.icon,t.text,t.tooltip,x.some(v),f.providers,t.context,u),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:l}}}})},OI=(t,s,a,l)=>{var u;const f=Rt(ee),m=cA(t.icon,t.text,t.tooltip,x.none(),a,t.context,l);return Dr.sketch({dom:m.dom,components:m.components,eventOrder:r8,buttonBehaviours:{...qe([cn("toolbar-button-events",[GZ({onAction:t.onAction,getApi:s.getApi}),Fc(s,f),Kl(s,f)]),...t.tooltip.map(p=>qo.config(a.tooltips.getConfig({tooltipText:a.translate(p)+t.shortcut.map(v=>` (${Z3(v)})`).getOr("")}))).toArray(),Fi.toolbarButton(()=>!t.enabled||a.checkUiComponentContext(t.context).shouldDisable),Ms(()=>a.checkUiComponentContext(t.context))].concat(s.toolbarButtonBehaviours)),[tm]:(u=m.buttonBehaviours)===null||u===void 0?void 0:u[tm]}})},aG=(t,s,a)=>P0(t,s,[],a),P0=(t,s,a,l)=>OI(t,{toolbarButtonBehaviours:a.length>0?[cn("toolbarButtonWith",a)]:[],getApi:AI,onSetup:t.onSetup},s,l),iG=(t,s,a)=>kI(t,s,[],a),kI=(t,s,a,l)=>OI(t,{toolbarButtonBehaviours:[fn.config({}),kn.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[cn("toolbarToggleButtonWith",a)]:[]),getApi:rG,onSetup:t.onSetup},s,l),lG=(t,s,a)=>l=>ns.nu(u=>s.fetch(u)).map(u=>x.from(IC(ho(MC(Ct("menu-value"),u,f=>{s.onItemAction(t(l),f)},s.columns,s.presets,jl.CLOSE_ON_EXECUTE,s.select.getOr(it),a),{movement:b0(s.columns,s.presets),menuBehaviours:Dg.unnamedEvents(s.columns!=="auto"?[]:[$o((f,m)=>{GP(f,4,oC(s.presets)).each(({numRows:p,numColumns:v})=>{It.setGridSize(f,p,v)})})])})))),cG=(t,s,a)=>{const l=Rt(t.tooltip.getOr("")),u=p=>({isEnabled:()=>!Lt.isDisabled(p),setEnabled:v=>Lt.set(p,!v),setIconFill:(v,C)=>{ko(p.element,`svg path[class="${v}"], rect[class="${v}"]`).each(E=>{an(E,"fill",C)})},setActive:v=>{an(p.element,"aria-pressed",v),ko(p.element,"span").each(C=>{p.getSystem().getByDom(C).each(E=>kn.set(E,v))})},isActive:()=>ko(p.element,"span").exists(v=>p.getSystem().getByDom(v).exists(kn.isOn)),setText:v=>ko(p.element,"span").each(C=>p.getSystem().getByDom(C).each(E=>Wt(E,Jl,{text:v}))),setIcon:v=>ko(p.element,"span").each(C=>p.getSystem().getByDom(C).each(E=>Wt(E,Hg,{icon:v}))),setTooltip:v=>{const C=s.providers.translate(v);an(p.element,"aria-label",C),l.set(v)}}),f=Rt(ee),m={getApi:u,onSetup:t.onSetup};return $2.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...iA(t.tooltip,s.providers),...fe(a)?{"data-mce-name":a}:{}}},onExecute:p=>{const v=u(p);v.isEnabled()&&t.onAction(v)},onItemExecute:(p,v,C)=>{},splitDropdownBehaviours:qe([cn("split-dropdown-events",[$o((p,v)=>kT(p)),Le(lA,tn.focus),Fc(m,f),Kl(m,f)]),Fi.splitButton(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),Ms(()=>s.providers.checkUiComponentContext(t.context)),dg.config({}),...t.tooltip.map(p=>qo.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(p),onShow:v=>{if(l.get()!==p){const C=s.providers.translate(l.get());qo.setComponents(v,s.providers.tooltips.getComponents({tooltipText:C}))}}})})).toArray()]),eventOrder:{[Dl()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Vu()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:lG(u,t,s.providers),parts:{menu:rC(!1,t.columns,t.presets)},components:[$2.parts.button(cA(t.icon,t.text,x.none(),x.some([kn.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),Fi.toolbarButton(it),Ms(te({contextType:"any",shouldDisable:!1}))]),s.providers,t.context)),$2.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:a3("chevron-down",s.providers.icons)},buttonBehaviours:qe([Fi.splitButton(it),Ms(te({contextType:"any",shouldDisable:!1}))])}),$2.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},uG=".tox-toolbar-slider__input,.tox-toolbar-textfield",DI=t=>{es.getContent(t).each(s=>{ko(s.element,uG).fold(()=>It.focusIn(s),Ls)})},dG=t=>Yr(t.element).each(s=>{mc(s,'[tabindex="-1"]').each(a=>{Ls(a)})}),MI=Ct("forward-slide"),gS=Ct("backward-slide"),uA=Ct("change-slide-event"),dA="tox-pop--resizing",fG=t=>{const s=Rt([]);return{sketch:es.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:l=>{s.set([]),es.getContent(l).each(u=>{mt(u.element,"visibility")}),Yo(l.element,dA),mt(l.element,"width")},onHide:()=>{s.set([]),t.onHide()},inlineBehaviours:qe([cn("context-toolbar-events",[Vh(kh(),(l,u)=>{u.event.raw.propertyName==="width"&&(Yo(l.element,dA),mt(l.element,"width"))}),Le(uA,(l,u)=>{const f=l.element;mt(f,"width");const m=nr(f),p=Yr(l.element).isSome();mt(f,"left"),mt(f,"right"),mt(f,"max-width"),es.setContent(l,u.event.contents),xs(f,dA);const v=nr(f);gn(f,"transition","none"),es.reposition(l),mt(f,"transition"),gn(f,"width",m+"px"),u.event.focus.fold(()=>{p&&DI(l)},C=>{uc(dr(l.element)).fold(()=>Ls(C),E=>{vo(E,C)||Ls(C)})}),setTimeout(()=>{gn(l.element,"width",v+"px")},0)}),Le(MI,(l,u)=>{es.getContent(l).each(f=>{s.set(s.get().concat([{bar:f,focus:uc(dr(l.element))}]))}),Wt(l,uA,{contents:u.event.forwardContents,focus:x.none()})}),Le(gS,(l,u)=>{t.onBack(),jr(s.get()).each(f=>{s.set(s.get().slice(0,s.get().length-1)),Wt(l,uA,{contents:tl(f.bar),focus:f.focus})})})]),It.config({mode:"special",onEscape:l=>jr(s.get()).fold(()=>t.onEscape(),u=>(Zn(l,gS),x.some(!0)))})]),lazySink:()=>Sn.value(t.sink)}),inSubtoolbar:()=>s.get().length>0}},mG=(t,s)=>{const a=kl(L3({type:"button",icon:"chevron-left",tooltip:"Back",onAction:ee}));return P0(a,s.shared.providers,[Le(OT,l=>{Zn(l,gS)})])},Kp=(t,s,a)=>ji(a)?t.translate(s):t.translate([s,t.translate(a)]),gG=(t,s)=>{const a=(m,p,v,C)=>{const E=t.shared.providers.translate(m.title);if(m.type==="separator")return x.some({type:"separator",text:E});if(m.type==="submenu"){const D=ke(m.getStyleItems(),I=>l(I,p,C));return p===0&&D.length<=0?x.none():x.some({type:"nestedmenuitem",text:E,enabled:D.length>0,getSubmenuItems:()=>ke(m.getStyleItems(),I=>l(I,p,C))})}else return x.some({type:"togglemenuitem",text:E,icon:m.icon,active:m.isSelected(C),enabled:!v,onAction:s.onAction(m),...m.getStylePreview().fold(()=>({}),D=>({meta:{style:D}}))})},l=(m,p,v)=>{const C=m.type==="formatter"&&s.isInvalid(m);return p===0?C?[]:a(m,p,!1,v).toArray():a(m,p,C,v).toArray()},u=m=>{const p=s.getCurrentValue(),v=s.shouldHide?0:1;return ke(m,C=>l(C,v,p))};return{validateItems:u,getFetch:(m,p)=>(v,C)=>{const E=p(),D=u(E),I=Vg(D,jl.CLOSE_ON_EXECUTE,m,{isHorizontalMenu:!1,search:x.none()});C(I)}}},Yp=(t,s)=>{const a=s.dataset,l=a.type==="basic"?()=>Ie(a.data,u=>UT(u,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:gG(t,s),getStyleItems:l}},N0=(t,s,a,l,u,f)=>{const{items:m,getStyleItems:p}=Yp(s,a),v=Rt(a.tooltip),C=D=>({getComponent:te(D),setTooltip:I=>{const H=s.shared.providers.translate(I);an(D.element,"aria-label",H),v.set(I)}}),E=D=>{const I=H=>D.setTooltip(Kp(t,l(H.value),H.value));return t.on(u,I),v0(Ig(t,"NodeChange",H=>{const W=H.getComponent();a.updateText(W),Lt.set(H.getComponent(),!t.selection.isEditable()||p().length===0)})(D),()=>t.off(u,I))};return MT({context:"mode:design",text:a.icon.isSome()?x.none():a.text,icon:a.icon,ariaLabel:x.some(a.tooltip),tooltip:x.none(),role:x.none(),fetch:m.getFetch(s,p),onSetup:E,getApi:C,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[qo.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:D=>{if(a.tooltip!==v.get()){const I=s.shared.providers.translate(v.get());qo.setComponents(D,s.shared.providers.tooltips.getComponents({tooltipText:I}))}}})})]},"tox-tbtn",s.shared,f)},hS=t=>Ie(t,s=>{let a=s,l=s;const u=s.split("=");return u.length>1&&(a=u[0],l=u[1]),{title:a,format:l}}),hG=t=>({type:"basic",data:t});var Xp;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(Xp||(Xp={}));const pG=(t,s)=>s===Xp.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),fA=(t,s,a)=>{const l=t.options.get(s);return{type:"basic",data:hS(pG(l,a))}},vG="Align",RI=te("Alignment {0}"),mA="left",gA=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],PI=t=>{const s=()=>_t(gA,p=>t.formatter.match(p.format)),a=p=>()=>t.formatter.match(p),l=p=>x.none,u=p=>{const C=s().fold(te(mA),E=>E.title.toLowerCase());Wt(p,Hg,{icon:`align-${C}`}),dN(t,{value:C})},f=hG(gA),m=p=>()=>_t(gA,v=>v.format===p.format).each(v=>t.execCommand(v.command));return{tooltip:Kp(t,RI(),mA),text:x.none(),icon:x.some("align-left"),isSelectedFor:a,getCurrentValue:x.none,getPreviewFor:l,onAction:m,updateText:u,dataset:f,shouldHide:!1,isInvalid:p=>!t.formatter.canApply(p.format)}},bG=(t,s)=>N0(t,s,PI(t),RI,"AlignTextUpdate","align"),yG=(t,s)=>{const a=Yp(s,PI(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(vG),onSetup:Ia(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},NI=(t,s)=>{const a=s(),l=Ie(a,u=>u.format);return x.from(t.formatter.closest(l)).bind(u=>_t(a,f=>f.format===u))},hA="Blocks",pA=te("Block {0}"),vA="Paragraph",II=t=>{const s=f=>()=>t.formatter.match(f),a=f=>()=>{const m=t.formatter.get(f);return m?x.some({tag:m.length>0&&(m[0].inline||m[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(f))}):x.none()},l=f=>{const p=NI(t,()=>u.data).fold(te(vA),v=>v.title);Wt(f,Jl,{text:p}),Na(t,{value:p})},u=fA(t,"block_formats",Xp.SemiColon);return{tooltip:Kp(t,pA(),vA),text:x.some(vA),icon:x.none(),isSelectedFor:s,getCurrentValue:x.none,getPreviewFor:a,onAction:rT(t),updateText:l,dataset:u,shouldHide:!1,isInvalid:f=>!t.formatter.canApply(f.format)}},CG=(t,s)=>N0(t,s,II(t),pA,"BlocksTextUpdate","blocks"),SG=(t,s)=>{const a=Yp(s,II(t));t.ui.registry.addNestedMenuItem("blocks",{text:hA,onSetup:Ia(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},xG="Fonts",BI=te("Font {0}"),bA="System Font",wG=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],LI=t=>{const s=t.split(/\s*,\s*/);return Ie(s,a=>a.replace(/^['"]+|['"]+$/g,""))},FI=(t,s)=>s.length>0&&ia(s,a=>t.indexOf(a.toLowerCase())>-1),EG=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=LI(t.toLowerCase());return FI(a,wG)||FI(a,s)}else return!1},_I=t=>{const s=()=>{const v=W=>W?LI(W)[0]:"",C=t.queryCommandValue("FontName"),E=p.data,D=C?C.toLowerCase():"",I=V4(t);return{matchOpt:_t(E,W=>{const Q=W.format;return Q.toLowerCase()===D||v(Q).toLowerCase()===v(D).toLowerCase()}).orThunk(()=>Kr(EG(D,I),{title:bA,format:D})),font:C}},a=v=>C=>C.exists(E=>E.format===v),l=()=>{const{matchOpt:v}=s();return v},u=v=>()=>x.some({tag:"div",styles:v.indexOf("dings")===-1?{"font-family":v}:{}}),f=v=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,v.format)})},m=v=>{const{matchOpt:C,font:E}=s(),D=C.fold(te(E),I=>I.title);Wt(v,Jl,{text:D}),fN(t,{value:D})},p=fA(t,"font_family_formats",Xp.SemiColon);return{tooltip:Kp(t,BI(),bA),text:x.some(bA),icon:x.none(),isSelectedFor:a,getCurrentValue:l,getPreviewFor:u,onAction:f,updateText:m,dataset:p,shouldHide:!1,isInvalid:it}},TG=(t,s)=>N0(t,s,_I(t),BI,"FontFamilyTextUpdate","fontfamily"),AG=(t,s)=>{const a=Yp(s,_I(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(xG),onSetup:Ia(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})};var I0=tinymce.util.Tools.resolve("tinymce.util.VK");const OG=(t,s,a,l)=>{let u=x.none();const f=le=>le.map(xe=>xt.getValue(xe)).getOr(""),m=Ig(t,"NodeChange SwitchMode DisabledStateChange",le=>{const xe=le.getComponent();u=x.some(xe),a.updateInputValue(xe),Lt.set(xe,!t.selection.isEditable()||L4(t))}),p=le=>({getComponent:te(le)}),v=Rt(ee),C=Ct("custom-number-input-events"),E=(le,xe,Me)=>{const vt=f(u),Ge=a.getNewValue(vt,le),Pe=vt.length-`${Ge}`.length,wt=u.map(Ft=>Ft.element.dom.selectionStart-Pe),Kt=u.map(Ft=>Ft.element.dom.selectionEnd-Pe);a.onAction(Ge,Me),u.each(Ft=>{xt.setValue(Ft,Ge),xe&&(wt.each(_n=>Ft.element.dom.selectionStart=_n),Kt.each(_n=>Ft.element.dom.selectionEnd=_n))})},D=(le,xe)=>E((Me,vt)=>Me-vt,le,xe),I=(le,xe)=>E((Me,vt)=>Me+vt,le,xe),H=le=>Un(le.element).fold(x.none,xe=>(Ls(xe),x.some(!0))),W=le=>Ru(le.element)?(hf(le.element).each(xe=>Ls(xe)),x.some(!0)):x.none(),Q=(le,xe,Me,vt)=>{const Ge=Rt(ee),Pe=s.shared.providers.translate(Me),wt=Ct("altExecuting"),Kt=Ig(t,"NodeChange SwitchMode DisabledStateChange",_n=>{Lt.set(_n.getComponent(),!t.selection.isEditable()||L4(t))}),Ft=_n=>{Lt.isDisabled(_n)||le(!0)};return Dr.sketch({dom:{tag:"button",attributes:{"aria-label":Pe,"data-mce-name":xe},classes:vt.concat(xe)},components:[$C(xe,s.shared.providers.icons)],buttonBehaviours:qe([Lt.config({}),qo.config(s.shared.providers.tooltips.getConfig({tooltipText:Pe})),cn(wt,[Fc({onSetup:Kt,getApi:p},Ge),Kl({getApi:p},Ge),Le(Qc(),(_n,rn)=>{(rn.event.raw.keyCode===I0.SPACEBAR||rn.event.raw.keyCode===I0.ENTER)&&(Lt.isDisabled(_n)||le(!1))}),Le(Ef(),Ft),Le(Jc(),Ft)])]),eventOrder:{[Qc()]:[wt,"keying"],[Ef()]:[wt,"alloy.base.behaviour"],[Jc()]:[wt,"alloy.base.behaviour"],[Dl()]:["alloy.base.behaviour",wt,"tooltipping"],[Vu()]:[wt,"tooltipping"]}})},se=lo(Q(le=>D(!1,le),"minus","Decrease font size",[])),X=lo(Q(le=>I(!1,le),"plus","Increase font size",[])),ie=lo({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[ed.sketch({inputBehaviours:qe([Lt.config({}),cn(C,[Fc({onSetup:m,getApi:p},v),Kl({getApi:p},v)]),cn("input-update-display-text",[Le(Jl,(le,xe)=>{xt.setValue(le,xe.event.text)}),Le(NO(),le=>{a.onAction(xt.getValue(le))}),Le(Im(),le=>{a.onAction(xt.getValue(le))})]),It.config({mode:"special",onEnter:le=>(E(ct,!0,!0),x.some(!0)),onEscape:H,onUp:le=>(I(!0,!1),x.some(!0)),onDown:le=>(D(!0,!1),x.some(!0)),onLeft:(le,xe)=>(xe.cut(),x.none()),onRight:(le,xe)=>(xe.cut(),x.none())})])})],behaviours:qe([tn.config({}),It.config({mode:"special",onEnter:W,onSpace:W,onEscape:H}),cn("input-wrapper-events",[Le(xc(),le=>{Qe([se,X],xe=>{const Me=rt.fromDom(xe.get(le).element.dom);Ru(Me)&&Tl(Me)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...fe(l)?{"data-mce-name":l}:{}}},components:[se.asSpec(),ie.asSpec(),X.asSpec()],behaviours:qe([tn.config({}),It.config({mode:"flow",focusInside:Af.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:le=>Ru(le.element)?x.none():(Ls(le.element),x.some(!0))})])}},kG="Font sizes",$I=te("Font size {0}"),HI="12pt",DG={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},MG={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},RG=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},PG=(t,s)=>/[0-9.]+px$/.test(t)?RG(parseInt(t,10)*72/96,s||0)+"pt":$e(MG,t).getOr(t),VI=t=>$e(DG,t).getOr(""),yA=t=>{const s=()=>{let v=x.none();const C=p.data,E=t.queryCommandValue("FontSize");if(E)for(let D=3;v.isNone()&&D>=0;D--){const I=PG(E,D),H=VI(I);v=_t(C,W=>W.format===E||W.format===I||W.format===H)}return{matchOpt:v,size:E}},a=v=>C=>C.exists(E=>E.format===v),l=()=>{const{matchOpt:v}=s();return v},u=te(x.none),f=v=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,v.format)})},m=v=>{const{matchOpt:C,size:E}=s(),D=C.fold(te(E),I=>I.title);Wt(v,Jl,{text:D}),UY(t,{value:D})},p=fA(t,"font_size_formats",Xp.Space);return{tooltip:Kp(t,$I(),HI),text:x.some(HI),icon:x.none(),isSelectedFor:a,getPreviewFor:u,getCurrentValue:l,onAction:f,updateText:m,dataset:p,shouldHide:!1,isInvalid:it}},NG=(t,s)=>N0(t,s,yA(t),$I,"FontSizeTextUpdate","fontsize"),CA=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},B0=16,SA=t=>t>=0,pS=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:l=>Wt(l,Jl,{text:s()}),onAction:(l,u)=>t.execCommand("FontSize",!1,l,{skip_focus:!u}),getNewValue:(l,u)=>{Eb(l,["unsupportedLength","empty"]);const f=s(),m=Eb(l,["unsupportedLength","empty"]).or(Eb(f,["unsupportedLength","empty"])),p=m.map(I=>I.value).getOr(B0),v=Y6(t),C=m.map(I=>I.unit).filter(I=>I!=="").getOr(v),E=u(p,CA(C).step),D=`${SA(E)?E:p}${C}`;return D!==f&&ZY(t,{value:D}),D}}},Zg=(t,s)=>OG(t,s,pS(t),"fontsizeinput"),vS=(t,s)=>{const a=Yp(s,yA(t));t.ui.registry.addNestedMenuItem("fontsize",{text:kG,onSetup:Ia(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},IG="Formats",xA=t=>ji(t)?"Formats":"Format {0}",wA=(t,s)=>{const a="Formats",l=m=>()=>t.formatter.match(m),u=m=>()=>{const p=t.formatter.get(m);return p!==void 0?x.some({tag:p.length>0&&(p[0].inline||p[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(m))}):x.none()},f=m=>{const p=D=>KC(D)?ke(D.items,p):N8(D)?[{title:D.title,format:D.format}]:[],v=ke(_8(t),p),E=NI(t,te(v)).fold(te({title:a,tooltipLabel:""}),D=>({title:D.title,tooltipLabel:D.title}));Wt(m,Jl,{text:E.title}),uN(t,{value:E.tooltipLabel})};return{tooltip:Kp(t,xA(""),""),text:x.some(a),icon:x.none(),isSelectedFor:l,getCurrentValue:x.none,getPreviewFor:u,onAction:rT(t),updateText:f,shouldHide:U6(t),isInvalid:m=>!t.formatter.canApply(m.format),dataset:s}},zI=(t,s)=>{const a={type:"advanced",...s.styles};return N0(t,s,wA(t,a),xA,"StylesTextUpdate","styles")},BG=(t,s)=>{const a={type:"advanced",...s.styles},l=Yp(s,wA(t,a));t.ui.registry.addNestedMenuItem("styles",{text:IG,onSetup:Ia(t,()=>l.getStyleItems().length>0),getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},LG=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],L0=(t,s)=>(a,l,u,f)=>{const m=t(a).mapError(p=>Pm(p)).getOrDie();return s(m,l,u,f)},UI={button:L0(L3,(t,s,a,l)=>aG(t,s.shared.providers,l)),togglebutton:L0(OP,(t,s,a,l)=>iG(t,s.shared.providers,l)),menubutton:L0(mP,(t,s,a,l)=>Zp(t,"tox-tbtn",s,x.none(),!1,l)),splitbutton:L0(uU,(t,s,a,l)=>cG(t,s.shared,l)),grouptoolbarbutton:L0(cU,(t,s,a,l)=>{const u=a.ui.registry.getAll().buttons,f=p=>yS(a,{buttons:u,toolbar:p,allowToolbarGroups:!1},s,x.none()),m={[uy]:s.shared.header.isPositionedAtTop()?Id.TopToBottom:Id.BottomToTop};switch(vp(a)){case zl.floating:return R0(t,s,f,m,l);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},ZI=(t,s,a,l)=>$e(UI,t.type).fold(()=>(console.error("skipping button defined by",t),x.none()),u=>x.some(u(t,s,a,l))),bS={styles:zI,fontsize:NG,fontsizeinput:Zg,fontfamily:TG,blocks:CG,align:bG,navigateback:mG},FG=t=>{const s=Ie(LG,a=>{const l=eo(a.items,u=>yt(t,u)||yt(bS,u));return{name:a.name,items:l}});return eo(s,a=>a.items.length>0)},_G=t=>{const s=t.split("|");return Ie(s,a=>({items:a.trim().split(" ")}))},$G=t=>pe(t,s=>(yt(s,"name")||yt(s,"label"))&&yt(s,"items")),HG=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?FG(a):B(s)?_G(s):$G(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},Jp=(t,s,a,l,u,f)=>$e(s,a.toLowerCase()).orThunk(()=>f.bind(m=>xn(m,p=>$e(s,p+a.toLowerCase())))).fold(()=>$e(bS,a.toLowerCase()).map(m=>m(t,u)),m=>m.type==="grouptoolbarbutton"&&!l?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),x.none()):ZI(m,u,t,a.toLowerCase())),yS=(t,s,a,l)=>{const u=HG(s),f=Ie(u,m=>{const p=ke(m.items,v=>v.trim().length===0?[]:Jp(t,s.buttons,v,s.allowToolbarGroups,a,l).toArray());return{title:x.from(t.translate(m.name)),label:Kr(m.label!==void 0,t.translate(m.label)),items:p}});return eo(f,m=>m.items.length>0)},WI=(t,s,a,l)=>{const u=s.mainUi.outerContainer,f=a.toolbar,m=a.buttons;if(pe(f,B)){const p=f.map(v=>{const C={toolbar:v,buttons:m,allowToolbarGroups:a.allowToolbarGroups};return yS(t,C,l,x.none())});Po.setToolbars(u,p)}else Po.setToolbar(u,yS(t,a,l,x.none()))},jI=Wa(),VG=jI.os.isiOS()&&jI.os.version.major<=12,GI=(t,s)=>{const{uiMotherships:a}=s,l=t.dom;let u=t.getWin();const f=t.getDoc().documentElement,m=Rt(Ss(u.innerWidth,u.innerHeight)),p=Rt(Ss(f.offsetWidth,f.offsetHeight)),v=()=>{const I=m.get();(I.left!==u.innerWidth||I.top!==u.innerHeight)&&(m.set(Ss(u.innerWidth,u.innerHeight)),p0(t))},C=()=>{const I=t.getDoc().documentElement,H=p.get();(H.left!==I.offsetWidth||H.top!==I.offsetHeight)&&(p.set(Ss(I.offsetWidth,I.offsetHeight)),p0(t))},E=I=>{_U(t,I)};l.bind(u,"resize",v),l.bind(u,"scroll",E);const D=xm(rt.fromDom(t.getBody()),"load",C);t.on("hide",()=>{Qe(a,I=>{gn(I.element,"display","none")})}),t.on("show",()=>{Qe(a,I=>{mt(I.element,"display")})}),t.on("NodeChange",C),t.on("remove",()=>{D.unbind(),l.unbind(u,"resize",v),l.unbind(u,"scroll",E),u=null})},zG=(t,s,a)=>{Kf(t)&&Di(a.mainUi.mothership.element,a.popupUi.mothership),na(s,a.dialogUi.mothership)};var UG=Object.freeze({__proto__:null,render:(t,s,a,l,u)=>{const{mainUi:f,uiMotherships:m}=s,p=Rt(0),v=f.outerContainer;oG(t);const C=rt.fromDom(u.targetNode),E=bd(dr(C));Di(C,f.mothership),zG(t,E,s),t.on("PostRender",()=>{Po.setSidebar(v,a.sidebar,G2(t))}),t.on("SkinLoaded",()=>{WI(t,s,a,l),p.set(t.getWin().innerWidth),Po.setMenubar(v,SI(t,a)),Po.setViews(v,a.views),GI(t,s)});const D=Po.getSocket(v).getOrDie("Could not find expected socket element");if(VG){Ki(D.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const Q=xa(()=>{t.dispatch("ScrollContent")},20),se=Tr(D.element,"scroll",Q.throttle);t.on("remove",se.unbind)}XP(t,s),t.addCommand("ToggleSidebar",(Q,se)=>{Po.toggleSidebar(v,se),zU(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var Q;return(Q=Po.whichSidebar(v))!==null&&Q!==void 0?Q:""}),t.addCommand("ToggleView",(Q,se)=>{if(Po.toggleView(v,se)){const X=v.element;f.mothership.broadcastOn([Ju()],{target:X}),Qe(m,ie=>{ie.broadcastOn([Ju()],{target:X})}),J(Po.whichView(v))&&(t.focus(),t.nodeChanged(),Po.refreshToolbar(v)),mN(t)}}),t.addQueryValueHandler("ToggleView",()=>{var Q;return(Q=Po.whichView(v))!==null&&Q!==void 0?Q:""});const I=vp(t),H=()=>{Po.refreshToolbar(s.mainUi.outerContainer)};(I===zl.sliding||I===zl.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const Q=t.getWin().innerWidth;Q!==p.get()&&(H(),p.set(Q))});const W={setEnabled:Q=>{Pp(s,Q?"setEnabled":"setDisabled")},isEnabled:()=>!Lt.isDisabled(v)};return{iframeContainer:D.element.dom,editorContainer:v.element.dom,api:W}}});const EA=t=>/^[0-9\.]+(|px)$/i.test(""+t)?x.some(parseInt(""+t,10)):x.none(),F0=t=>Fe(t)?t+"px":t,CS=(t,s,a)=>{const l=s.filter(f=>t<f),u=a.filter(f=>t>f);return l.or(u).getOr(t)},KI=(t,s)=>{if(typeof s=="number")return x.from(s);const a=/^([0-9.]+)(pt|em|px)$/.exec(s.trim());if(a){const l=a[2],u=Number.parseFloat(a[1]);if(Number.isNaN(u)||u<0)return x.none();if(l==="em")return x.from(u*Number.parseFloat(window.getComputedStyle(t.dom).fontSize));if(l==="pt")return x.from(u*(72/96));if(l==="px")return x.from(u)}return x.none()},ZG=t=>{const s=KI(rt.fromDom(t.targetElm),pp(t)),a=W2(t),l=F4(t);return s.map(u=>CS(u,a,l))},WG=t=>ZG(t).getOr(pp(t)),TA=t=>{const s=Wf(t),a=Z2(t),l=j2(t);return EA(s).map(u=>CS(u,a,l))},jG=t=>TA(t).getOr(Wf(t)),{ToolbarLocation:tf,ToolbarMode:AA}=G4,GG=40,SS=(t,s,a,l,u)=>{const{mainUi:f,uiMotherships:m}=a,p=Kv.DOM,v=Sp(t),C=xp(t),E=j2(t).or(TA(t)),D=l.shared.header,I=D.isPositionedAtTop,H=150,W=vp(t),Q=W===AA.sliding||W===AA.floating,se=Rt(!1),X=()=>se.get()&&!t.removed,ie=Pt=>Q?Pt.fold(te(0),Ze=>Ze.components().length>1?zn(Ze.components()[1].element):0):0,le=Pt=>{switch(_4(t)){case tf.auto:const Ze=Po.getToolbar(f.outerContainer),lt=ie(Ze),Jt=zn(Pt.element)-lt,bn=$r(s);if(bn.y>Jt)return"top";{const hn=Si(s),wo=Math.max(hn.dom.scrollHeight,zn(hn));return bn.bottom<wo-Jt||fa().bottom<bn.bottom-Jt?"bottom":"top"}case tf.bottom:return"bottom";case tf.top:default:return"top"}},xe=Pt=>{u.on(Ze=>{Qo.setModes(Ze,[Pt]),D.setDockingMode(Pt);const lt=I()?Id.TopToBottom:Id.BottomToTop;an(Ze.element,uy,lt)})},Me=()=>{u.on(Pt=>{const Ze=E.getOrThunk(()=>Ab().width-S1(s).left-10);gn(Pt.element,"max-width",Ze+"px")})},vt=(Pt,Ze)=>{u.on(lt=>{const Jt=Po.getToolbar(f.outerContainer),bn=ie(Jt),Zt=$r(s),hn=Ge(t,f.outerContainer.element),wo=()=>hn.fold(()=>Zt.x,oa=>{const ul=$r(oa);return vo(oa,Aa())?Zt.x:Zt.x-ul.x}),bo=()=>hn.fold(()=>I()?Math.max(Zt.y-zn(lt.element)+bn,0):Zt.bottom,oa=>{var ul;const dl=$r(oa),Vc=(ul=oa.dom.scrollTop)!==null&&ul!==void 0?ul:0,ld=vo(oa,Aa())?Math.max(Zt.y-zn(lt.element)+bn,0):Zt.y-dl.y+Vc-zn(lt.element)+bn;return I()?ld:Zt.bottom}),gi=wo(),rs=Kr(Pt,Math.ceil(f.outerContainer.element.dom.getBoundingClientRect().width)).filter(oa=>oa>H).map(oa=>{const ul=Ze.getOr(da()),dl=window.innerWidth-(gi-ul.left),Vc=Math.max(Math.min(oa,dl),H);return dl<oa&&gn(f.outerContainer.element,"width",Vc+"px"),{width:Vc+"px"}}).getOr({width:"max-content"}),cl={position:"absolute",left:Math.round(gi)+"px",top:bo()+"px"};Ki(f.outerContainer.element,{...cl,...rs})})},Ge=(Pt,Ze)=>Kf(Pt)?Th(Ze):x.none(),Pe=()=>{Qe(m,Pt=>{Pt.broadcastOn([Vf()],{})})},wt=()=>!v&&(fc(f.outerContainer.element).left+yh(f.outerContainer.element)>=window.innerWidth-GG||Y(f.outerContainer.element,"width").isSome())?(gn(f.outerContainer.element,"position","absolute"),gn(f.outerContainer.element,"left","0px"),mt(f.outerContainer.element,"width"),!0):!1,Kt=Pt=>{if(!X())return;v||Me();const Ze=da(),lt=v?!1:wt();if(Q&&Po.refreshToolbar(f.outerContainer),!v){const Jt=da(),bn=Kr(Ze.left!==Jt.left,Ze);vt(lt,bn),bn.each(Zt=>{JS(Zt.left,Jt.top)})}C&&u.on(Pt),Pe()},Ft=()=>v||!C||!X()?!1:u.get().exists(Pt=>{const Ze=D.getDockingMode(),lt=le(Pt);return lt!==Ze?(xe(lt),!0):!1});return{isVisible:X,isPositionedAtTop:I,show:()=>{se.set(!0),gn(f.outerContainer.element,"display","flex"),p.addClass(t.getBody(),"mce-edit-focus"),Qe(m,Pt=>{mt(Pt.element,"display")}),Ft(),Kf(t)?Kt(Pt=>Qo.isDocked(Pt)?Qo.reset(Pt):Qo.refresh(Pt)):Kt(Qo.refresh)},hide:()=>{se.set(!1),gn(f.outerContainer.element,"display","none"),p.removeClass(t.getBody(),"mce-edit-focus"),Qe(m,Pt=>{gn(Pt.element,"display","none")})},update:Kt,updateMode:()=>{Ft()&&Kt(Qo.reset)},repositionPopups:Pe}},Wg=(t,s)=>{const a=$r(t);return{pos:s?a.y:a.bottom,bounds:a}},xS=(t,s,a,l)=>{const u=Rt(Wg(s,a.isPositionedAtTop())),f=C=>{const{pos:E,bounds:D}=Wg(s,a.isPositionedAtTop()),{pos:I,bounds:H}=u.get(),W=D.height!==H.height||D.width!==H.width;u.set({pos:E,bounds:D}),W&&p0(t,C),a.isVisible()&&(I!==E?a.update(Qo.reset):W&&(a.updateMode(),a.repositionPopups()))};l||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(Qo.reset)),t.on("NodeChange keydown",C=>{requestAnimationFrame(()=>f(C))});let m=0;const p=sc(()=>a.update(Qo.refresh),33);t.on("ScrollWindow",()=>{const C=da().left;C!==m&&(m=C,p.throttle()),a.updateMode()}),Kf(t)&&t.on("ElementScroll",C=>{a.update(Qo.refresh)});const v=bl();v.set(xm(rt.fromDom(t.getBody()),"load",C=>f(C.raw))),t.on("remove",()=>{v.clear()})};var wS=Object.freeze({__proto__:null,render:(t,s,a,l,u)=>{const{mainUi:f}=s,m=dn(),p=rt.fromDom(u.targetNode),v=SS(t,p,s,l,m),C=Cg(t);sG(t);const E=()=>{if(m.isSet()){v.show();return}m.set(Po.getHeader(f.outerContainer).getOrDie());const I=W4(t);Kf(t)?(Di(p,f.mothership),Di(p,s.popupUi.mothership)):na(I,f.mothership),na(I,s.dialogUi.mothership);const H=()=>{WI(t,s,a,l),Po.setMenubar(f.outerContainer,SI(t,a)),v.show(),xS(t,p,v,C),t.nodeChanged()};C?t.once("SkinLoaded",H):H()};t.on("show",E),t.on("hide",v.hide),C||(t.on("focus",E),t.on("blur",v.hide)),t.on("init",()=>{(t.hasFocus()||C)&&E()}),XP(t,s);const D={show:E,hide:v.hide,setEnabled:I=>{Pp(s,I?"setEnabled":"setDisabled")},isEnabled:()=>!Lt.isDisabled(f.outerContainer)};return{editorContainer:f.outerContainer.element.dom,api:D}}});const fi=()=>{const t=dn(),s=dn(),a=dn();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const f=t.get().map(p=>p.mothership),m=s.get().map(p=>p.mothership);return f.fold(()=>m.toArray(),p=>m.fold(()=>[p],v=>vo(p.element,v.element)?[p]:[p,v]))},lazyGetInOuterOrDie:(f,m)=>()=>a.get().bind(p=>m(p.outerContainer)).getOrDie(`Could not find ${f} element in OuterContainer`)}},ES="contexttoolbar-show",OA="contexttoolbar-hide",jg=(t,s,a)=>({setInputEnabled:l=>{!l&&a&&Ls(a),Lt.set(t,!l)},isInputEnabled:()=>!Lt.isDisabled(t),hide:()=>{Zn(t,Hb())},back:()=>{Zn(t,gS)},getValue:()=>s.get().getOrThunk(()=>xt.getValue(t)),setValue:l=>{t.getSystem().isConnected()?xt.setValue(t,l):s.set(l)}}),YI=(t,s,a)=>Le(OT,(l,u)=>{const f=t.get(l),m=jg(f,a,l.element);s.onAction(m,u.event.buttonApi)}),YG=(t,s,a,l)=>{const{primary:u,...f}=s.original,m=kl(L3({...f,type:"button",onAction:ee}));return P0(m,a,[YI(t,s,l)])},nm=(t,s,a,l)=>{const{primary:u,...f}=s.original,m=kl(OP({...f,type:"togglebutton",onAction:ee}));return kI(m,a,[YI(t,s,l)])},oX=t=>t.type==="contextformtogglebutton",XG=(t,s,a,l)=>oX(s)?nm(t,s,a,l):YG(t,s,a,l),kA=(t,s,a,l)=>{const u=Ie(s,p=>lo(XG(t,p,a,l)));return{asSpecs:()=>Ie(u,p=>p.asSpec()),findPrimary:p=>xn(s,(v,C)=>v.primary?x.from(u[C]).bind(E=>E.getOpt(p)).filter(Ce(Lt.isDisabled)):x.none())}},Qp=(t,s,a,l)=>{const{width:u,height:f}=t.initValue();let m=Up;const p=Ct("ratio-event"),v=Ge=>jg(Ge,l),C=Ge=>ci(Ge,{tag:"span",classes:["tox-icon","tox-lock-icon__"+Ge]},s.icons),E=()=>!1,D=t.label.getOr("Constrain proportions"),I=s.translate(D),H=Tn.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-lock-context-form-size-input","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":I,"data-mce-name":D}},components:[C("lock"),C("unlock")],buttonBehaviours:qe([Lt.config({disabled:E}),Mo.config({}),qo.config(s.tooltips.getConfig({tooltipText:I}))])}),W=Ge=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:Ge}),Q=Ge=>mc(Ge.element,"div.tox-focusable-wrapper").fold(x.none,wt=>(Ls(wt),x.some(!0))),se=Ge=>Fn.parts.field({factory:ed,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:Ge?u:f,inputBehaviours:qe([Lt.config({disabled:E}),Mo.config({}),cn("size-input-toolbar-events",[Le(ma(),(Pe,wt)=>{Wt(Pe,p,{isField1:Ge})})]),It.config({mode:"special",onEnter:a,onEscape:Q})]),selectOnFocus:!1}),X=Ge=>({dom:{tag:"label",classes:["tox-label"]},components:[Wo(s.translate(Ge))]}),ie=Ge=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[Ge],behaviours:qe([Mo.config({}),tn.config({}),It.config({mode:"special",onEnter:Pe=>ko(Pe.element,"input").fold(x.none,Kt=>(Ls(Kt),x.some(!0)))})])}),le=ie(Tn.parts.field1(W([Fn.parts.label(X("Width:")),se(!0)]))),xe=ie(Tn.parts.field2(W([Fn.parts.label(X("Height:")),se(!1)]))),Me=Rt(ee),vt=[Fc({onBeforeSetup:Ge=>ko(Ge.element,"input").each(Ls),onSetup:t.onSetup,getApi:v},Me),bC({getApi:v},Me,l)];return Tn.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[le,W([H]),xe],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(Ge,Pe,wt)=>{zC(xt.getValue(Ge)).each(Kt=>{m(Kt).each(Ft=>{xt.setValue(Pe,m8(Ft))})})},onInput:Ge=>Zn(Ge,zN),coupledFieldBehaviours:qe([tn.config({}),It.config({mode:"flow",focusInside:Af.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),Lt.config({disabled:E,onDisabled:Ge=>{Tn.getField1(Ge).bind(Fn.getField).each(Lt.disable),Tn.getField2(Ge).bind(Fn.getField).each(Lt.disable),Tn.getLock(Ge).each(Lt.disable)},onEnabled:Ge=>{Tn.getField1(Ge).bind(Fn.getField).each(Lt.enable),Tn.getField2(Ge).bind(Fn.getField).each(Lt.enable),Tn.getLock(Ge).each(Lt.enable)}}),Ms(()=>s.checkUiComponentContext("mode:design")),cn("size-input-toolbar-events2",[Le(p,(Ge,Pe)=>{const wt=Pe.event.isField1,Kt=wt?Tn.getField1(Ge):Tn.getField2(Ge),Ft=wt?Tn.getField2(Ge):Tn.getField1(Ge),_n=Kt.map(xt.getValue).getOr(""),rn=Ft.map(xt.getValue).getOr("");m=g8(_n,rn)}),Le(zN,Ge=>t.onInput(v(Ge))),...vt])])})},_0=(t,s,a)=>Fn.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...t.toArray(),s],fieldBehaviours:qe([Lt.config({disabled:()=>a.checkUiComponentContext("mode:design").shouldDisable,onDisabled:l=>{dG(l),Fn.getField(l).each(Lt.disable)},onEnabled:l=>{Fn.getField(l).each(Lt.enable)}})])}),XI=(t,s,a,l)=>{const u=Rt(ee),f=v=>jg(v,l),m=t.label.map(v=>Fn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Wo(s.translate(v))]})),p=Fn.parts.field({factory:ed,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(t.min()),max:String(t.max())},data:t.initValue().toString(),fromInputValue:v=>Gc(v).getOr(t.min()),toInputValue:v=>String(v),inputBehaviours:qe([Lt.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),Ms(()=>s.checkUiComponentContext("mode:design")),It.config({mode:"special",onEnter:a,onLeft:(v,C)=>(C.cut(),x.none()),onRight:(v,C)=>(C.cut(),x.none())}),cn("slider-events",[Fc({onSetup:t.onSetup,getApi:f,onBeforeSetup:It.focusIn},u),bC({getApi:f},u,l),Le(Ed(),v=>{t.onInput(f(v))})])])});return _0(m,p,s)},JG=(t,s,a,l)=>{const u=Rt(ee),f=E=>jg(E,l),m=t.label.map(E=>Fn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Wo(s.translate(E))]})),v={...t.placeholder.map(E=>({placeholder:s.translate(E)})).getOr({})},C=Fn.parts.field({factory:ed,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:v,data:t.initValue(),selectOnFocus:!0,inputBehaviours:qe([Lt.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),Ms(()=>s.checkUiComponentContext("mode:design")),It.config({mode:"special",onEnter:a,onLeft:(E,D)=>(D.cut(),x.none()),onRight:(E,D)=>(D.cut(),x.none())}),cn("input-events",[Fc({onSetup:t.onSetup,getApi:E=>mc(E.element,".tox-toolbar").bind(I=>ko(I,"button:enabled")).fold(()=>jg(E,l),I=>jg(E,l,I)),onBeforeSetup:It.focusIn},u),bC({getApi:f},u,l),Le(Ed(),E=>{t.onInput(f(E))})])])});return _0(m,C,s)},DA=(t,s,a)=>{const l=dn(),f=lo(t(a,C=>p.findPrimary(C).orThunk(()=>v.findPrimary(C)).map(E=>(Zm(E),!0)),l)),m=Os(s.commands,C=>C.align==="start"),p=kA(f,m.pass,a,l),v=kA(f,m.fail,a,l);return eo([{title:x.none(),label:x.none(),items:p.asSpecs()},{title:x.none(),label:x.none(),items:[f.asSpec()]},{title:x.none(),label:x.none(),items:v.asSpecs()}],C=>C.items.length>0)},JI=(t,s)=>{switch(t.type){case"contextform":return DA(dt(JG,t),t,s);case"contextsliderform":return DA(dt(XI,t),t,s);case"contextsizeinputform":return DA(dt(Qp,t),t,s)}},qp={renderContextForm:(t,s,a)=>cS({type:t,uid:Ct("context-toolbar"),initGroups:JI(s,a),onEscape:x.none,cyclicKeying:!0,providers:a}),buildInitGroups:JI},QG=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,qG=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=ja(rt.fromDom(t.startContainer),t.startOffset).element;return(pd(a)?wa(a):x.some(a)).filter(oi).map(u=>u.dom.getBoundingClientRect()).getOr(s)}else return s},MA=t=>{const s=t.selection.getRng(),a=qG(s);if(t.inline){const l=da();return _s(l.left+a.left,l.top+a.top,a.width,a.height)}else{const l=km(rt.fromDom(t.getBody()));return _s(l.x+a.left,l.y+a.top,a.width,a.height)}},rX=(t,s)=>s.filter(a=>ks(a)&&ib(a)).map(km).getOrThunk(()=>MA(t)),eK=(t,s,a)=>{const l=Math.max(t.x+a,s.x),u=Math.min(t.right-a,s.right);return{x:l,width:u-l}},tK=(t,s,a,l,u,f)=>{const m=rt.fromDom(t.getContainer()),p=ko(m,".tox-editor-header").getOr(m),v=$r(p),C=v.y>=s.bottom,E=l&&!C;if(t.inline&&E)return{y:Math.max(v.bottom+f,a.y),bottom:a.bottom};if(t.inline&&!E)return{y:a.y,bottom:Math.min(v.y-f,a.bottom)};const D=u==="line"?$r(m):s;return E?{y:Math.max(v.bottom+f,a.y),bottom:Math.min(D.bottom-f,a.bottom)}:{y:Math.max(D.y+f,a.y),bottom:Math.min(v.y-f,a.bottom)}},e1=(t,s,a,l=0)=>{const u=Ab(window),f=$r(rt.fromDom(t.getContentAreaContainer())),m=Ic(t)||qv(t)||Cp(t),{x:p,width:v}=eK(f,u,l);if(t.inline&&!m)return _s(p,u.y,v,u.height);{const C=s.header.isPositionedAtTop(),{y:E,bottom:D}=tK(t,f,u,C,a,l);return _s(p,E,v,D-E)}},TS=12,QI={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},RA={maxHeightFunction:Um(),maxWidthFunction:cy()},nK=(t,s)=>{const a=t.selection.getRng(),l=ja(rt.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&vo(l.element,s)},aX=(t,s,a)=>{const l=Y(t,"position");gn(t,"position",s);const u=a(t);return l.each(f=>gn(t,"position",f)),u},e=t=>t==="node",n=(t,s,a,l,u)=>{const f=MA(t),m=l.lastElement().exists(p=>vo(a,p));if(nK(t,a))return m?nk:Rl;if(m)return aX(s,l.getMode(),()=>QG(f,$r(s),-20)&&!l.isReposition()?Z7:nk);{const p=l.getMode()==="fixed"?u.y+da().top:u.y,v=zn(s)+TS;return p+v<=f.y?Rl:G1}},o=(t,s,a,l)=>{const u=v=>(C,E,D,I,H)=>{const W=n(t,I,v,a,H),Q={...C,y:H.y,height:H.height};return{...W(Q,E,D,I,H),alwaysFit:!0}},f=v=>e(l)?[u(v)]:[];return s?{onLtr:v=>[zs,Ds,Vs,Hr,hr,sr].concat(f(v)),onRtl:v=>[zs,Vs,Ds,hr,Hr,sr].concat(f(v))}:{onLtr:v=>[sr,zs,Hr,Ds,hr,Vs].concat(f(v)),onRtl:v=>[sr,zs,hr,Vs,Hr,Ds].concat(f(v))}},r=(t,s,a,l)=>s==="line"?{bubble:ha(TS,0,QI),layouts:{onLtr:()=>[ny],onRtl:()=>[U1]},overrides:RA}:{bubble:ha(0,TS,QI,1/TS),layouts:o(t,a,l,s),overrides:RA},i=(t,s)=>{const a=eo(s,f=>f.predicate(t.dom)),{pass:l,fail:u}=Os(a,f=>f.type==="contexttoolbar");return{contextToolbars:l,contextForms:u}},c=t=>{if(t.length<=1)return t;{const s=f=>yn(t,m=>m.position===f),a=f=>eo(t,m=>m.position===f),l=s("selection"),u=s("node");if(l||u)if(u&&l){const f=a("node"),m=Ie(a("selection"),p=>({...p,position:"node"}));return f.concat(m)}else return a(l?"selection":"node");else return a("line")}},d=t=>{if(t.length<=1)return t;{const s=l=>_t(t,u=>u.position===l);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(l=>l.position).fold(()=>[],l=>eo(t,u=>u.position===l))}},g=(t,s,a)=>{const l=i(t,s);if(l.contextForms.length>0)return x.some({elem:t,toolbars:[l.contextForms[0]]});{const u=i(t,a);if(u.contextForms.length>0)return x.some({elem:t,toolbars:[u.contextForms[0]]});if(l.contextToolbars.length>0||u.contextToolbars.length>0){const f=c(l.contextToolbars.concat(u.contextToolbars));return x.some({elem:t,toolbars:f})}else return x.none()}},h=(t,s,a)=>t(s)?x.none():dO(s,l=>{if(oi(l)){const{contextToolbars:u,contextForms:f}=i(l,a.inNodeScope),m=f.length>0?f:d(u);return m.length>0?x.some({elem:l,toolbars:m}):x.none()}else return x.none()},t),y=(t,s)=>{const a=rt.fromDom(s.getBody()),l=m=>vo(m,a),u=m=>!l(m)&&!hm(a,m),f=rt.fromDom(s.selection.getNode());return u(f)?x.none():g(f,t.inNodeScope,t.inEditorScope).orThunk(()=>h(l,f,t))},A=(t,s)=>{const a={},l=[],u=[],f={},m={},p=(E,D)=>{const I=kl(PP(D));a[E]=I,I.launch.map(H=>{f["form:"+E]={...D.launch,type:H.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(I)}}}),I.scope==="editor"?u.push(I):l.push(I),m[E]=I},v=(E,D)=>{Jz(D).each(I=>{I.launch.isSome()&&(f["toolbar:"+E]={...D.launch,type:"button",onAction:()=>{s(I)}}),D.scope==="editor"?u.push(I):l.push(I),m[E]=I})},C=Re(t);return Qe(C,E=>{const D=t[E];D.type==="contextform"||D.type==="contextsliderform"||D.type==="contextsizeinputform"?p(E,D):D.type==="contexttoolbar"&&v(E,D)}),{forms:a,inNodeScope:l,inEditorScope:u,lookupTable:m,formNavigators:f}},M="tox-pop--transition",R=t=>t===I0.ENTER||t===I0.SPACEBAR,_=(t,s,a,l)=>{const u=l.backstage,f=u.shared,m=Wa().deviceType.isTouch,p=dn(),v=dn(),C=dn(),E=fG({sink:a,onEscape:()=>(t.focus(),gN(t),x.some(!0)),onHide:()=>{gN(t)},onBack:()=>{UU(t)}}),D=pa(E.sketch),I=()=>{const rn=C.get().getOr("node"),vn=e(rn)?1:0;return e1(t,f,rn,vn)},H=()=>!t.removed&&!(m()&&u.isContextMenuOpen()),W=rn=>Sa(Gr(rn,p.get(),vo),!0),Q=()=>{if(H()){const rn=I(),vn=Sa(C.get(),"node")?rX(t,p.get()):MA(t);return rn.height<=0||!QG(vn,rn,.01)}else return!0},se=()=>{p.clear(),v.clear(),C.clear(),es.hide(D)},X=()=>{if(es.isOpen(D)){const rn=D.element;mt(rn,"display"),Q()?gn(rn,"display","none"):(v.set(0),es.reposition(D))}},ie=rn=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[rn],behaviours:qe([It.config({mode:"acyclic"}),cn("pop-dialog-wrap-events",[$o(vn=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>It.focusIn(vn))}),eu(vn=>{t.shortcuts.remove("ctrl+F9")})])])}),le=rn=>{const vn=Ge([rn]);Wt(D,MI,{forwardContents:ie(vn)})},xe=Lr(()=>A(s,le)),Me=(rn,vn)=>yS(t,{buttons:rn,toolbar:vn.items,allowToolbarGroups:!1},l.backstage,x.some(["form:","toolbar:"])),vt=(rn,vn)=>qp.buildInitGroups(rn,vn),Ge=rn=>{const{buttons:vn}=t.ui.registry.getAll(),Pt=xe(),Ze={...vn,...Pt.formNavigators},lt=vp(t)===zl.scrolling?zl.scrolling:zl.default,Jt=Ot(Ie(rn,bn=>bn.type==="contexttoolbar"?Me(Ze,Xz(bn)):vt(bn,f.providers)));return cS({type:lt,uid:Ct("context-toolbar"),initGroups:Jt,onEscape:x.none,cyclicKeying:!0,providers:f.providers})},Pe=(rn,vn)=>{const Pt=rn==="node"?f.anchors.node(vn):f.anchors.cursor(),Ze=r(t,rn,m(),{lastElement:p.get,isReposition:()=>Sa(v.get(),0),getMode:()=>va.getMode(a)});return ho(Pt,Ze)},wt=(rn,vn)=>{if(_n.cancel(),!H())return;const Pt=Ge(rn),Ze=rn[0].position,lt=Pe(Ze,vn);C.set(Ze),v.set(1);const Jt=D.element;mt(Jt,"display"),W(vn)||(Yo(Jt,M),va.reset(a,D)),es.showWithinBounds(D,ie(Pt),{anchor:lt,transition:{classes:[M],mode:"placement"}},()=>x.some(I())),vn.fold(p.clear,p.set),Q()&&gn(Jt,"display","none")},Kt=()=>{gn(D.element,"transition","none"),X(),mt(D.element,"transition")};let Ft=!1;const _n=sc(()=>{if(!(!t.hasFocus()||t.removed||Ft))if(Jr(D.element,M))_n.throttle();else{const rn=xe();y(rn,t).fold(se,vn=>{wt(vn.toolbars,x.some(vn.elem))})}},17);t.on("init",()=>{t.on("remove",se),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",X),t.on("click focus SetContent",_n.throttle),t.on("keyup",rn=>{(!R(rn.keyCode)||!E.inSubtoolbar())&&_n.throttle()}),t.on(OA,se),t.on(ES,rn=>{const vn=xe();$e(vn.lookupTable,rn.toolbarKey).each(Pt=>{wt([Pt],Kr(rn.target!==t,rn.target)),DI(D)})}),t.on("focusout",rn=>{U2.setEditorTimeout(t,()=>{Yr(a.element).isNone()&&Yr(D.element).isNone()&&!t.hasFocus()&&se()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&se()}),t.on("DisabledStateChange",rn=>{rn.state&&se()}),t.on("ExecCommand",({command:rn})=>{rn.toLowerCase()==="toggleview"&&se()}),t.on("AfterProgressState",rn=>{rn.state?se():t.hasFocus()&&_n.throttle()}),t.on("dragstart",()=>{Ft=!0}),t.on("dragend drop",()=>{Ft=!1}),t.on("NodeChange",rn=>{E.inSubtoolbar()?Kt():Yr(D.element).fold(_n.throttle,ee)})})},Z=t=>{Qe([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:di(t,a.cmd),onSetup:Fp(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Ia(t),onAction:di(t,"JustifyNone")})},V=(t,s)=>{const a=()=>{const l=s.getOptions(t),u=s.getCurrent(t).map(s.hash),f=dn();return Ie(l,m=>({type:"togglemenuitem",text:s.display(m),onSetup:p=>{const v=E=>{E&&(f.on(D=>D.setActive(!1)),f.set(p)),p.setActive(E)};v(Sa(u,s.hash(m)));const C=s.watcher(t,m,v);return()=>{f.clear(),C()}},onAction:()=>s.setCurrent(t,m)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:l=>l(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},G=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:sR,hash:s=>n7(s,["fixed","relative","empty"]).getOr(s),display:ct,watcher:(s,a,l)=>s.formatter.formatChanged("lineheight",l,!1,{value:a}).unbind,getCurrent:s=>x.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:Ia(t),onMenuSetup:Ia(t)}),oe=t=>x.from(Z6(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:te(a),hash:l=>ce(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,u,f)=>{var m;return l.formatter.formatChanged("lang",f,!1,{value:u.code,customValue:(m=u.customCode)!==null&&m!==void 0?m:null}).unbind},getCurrent:l=>{const u=rt.fromDom(l.selection.getNode());return T1(u,f=>x.some(f).filter(oi).bind(m=>er(m,"lang").map(v=>{const C=er(m,"data-mce-lang").getOrUndefined();return{code:v,customCode:C,title:""}})))},setCurrent:(l,u)=>l.execCommand("Lang",!1,u),onToolbarSetup:l=>{const u=bl();return l.setActive(t.formatter.match("lang",{},void 0,!0)),u.set(t.formatter.formatChanged("lang",l.setActive,!0)),v0(u.clear,Ia(t)(l))},onMenuSetup:Ia(t)})),ue=t=>{V(t,G(t)),oe(t).each(s=>V(t,s))},ge=(t,s)=>{yG(t,s),AG(t,s),BG(t,s),SG(t,s),vS(t,s)},Se=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",s=>t.mode.get()===s),t.ui.registry.addContext("any",et),t.ui.registry.addContext("formatting",s=>t.formatter.canApply(s)),t.ui.registry.addContext("insert",s=>t.schema.isValidChild(t.selection.getNode().tagName,s))},Ue=t=>Ig(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),tt=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:Ue(t),onAction:di(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Ia(t),onAction:di(t,"indent")})},At=t=>{tt(t)},Ne=(t,s)=>a=>{a.setActive(s.get());const l=u=>{s.set(u.state),a.setActive(u.state)};return t.on("PastePlainTextToggle",l),v0(()=>t.off("PastePlainTextToggle",l),Ia(t)(a))},Ae=t=>{const s=Rt(tR(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:Ne(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:Ne(t,s)})},je=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},Et=t=>{_c.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Fp(t,s.name),onAction:je(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,l=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:Fp(t,a),onAction:je(t,a),shortcut:l})}},zt=t=>{_c.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:di(t,s.action),shortcut:s.shortcut,context:s.context})}),_c.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Ia(t),onAction:di(t,s.action)})})},Rn=t=>{_c.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:di(t,s.action),onSetup:Fp(t,s.name)})})},Nn=t=>{Et(t),zt(t),Rn(t)},co=t=>{_c.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:di(t,s.action),context:s.context})}),_c.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Ia(t),onAction:di(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Ia(t),onAction:je(t,"code")})},So=t=>{Nn(t),co(t)},cs=(t,s)=>Ig(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),lr=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:cs(t,"hasUndo"),onAction:di(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:cs(t,"hasRedo"),onAction:di(t,"redo")})},yr=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:cs(t,"hasUndo"),onAction:di(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:cs(t,"hasRedo"),onAction:di(t,"redo"),shortcut:"Meta+Y"})},pt=t=>{lr(t),yr(t)},Vt=t=>Ig(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),ro=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:Vt(t),onAction:di(t,"mceToggleVisualAid"),context:"any"})},uo=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:di(t,"mceToggleVisualAid"),context:"any"})},He=t=>{uo(t),ro(t)},nt=(t,s)=>{Z(t),So(t),ge(t,s),pt(t),QU(t),He(t),At(t),ue(t),Ae(t),Se(t)},$t=t=>B(t)?t.split(/[ ,]/):t,Pn=t=>s=>s.options.get(t),Hn=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:B(a)||pe(a,B)?{value:$t(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},go=Pn("contextmenu_never_use_native"),ql=Pn("contextmenu_avoid_overlap"),rd=t=>Ba(t).length===0,Ba=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:eo(a,l=>yt(s,l))},mi=(t,s)=>({type:"makeshift",x:t,y:s}),ll=(t,s,a)=>mi(t.x+s,t.y+a),ya=t=>t.type==="longpress"||t.type.indexOf("touch")===0,qa=t=>{if(ya(t)){const s=t.touches[0];return mi(s.pageX,s.pageY)}else return mi(t.pageX,t.pageY)},ec=t=>{if(ya(t)){const s=t.touches[0];return mi(s.clientX,s.clientY)}else return mi(t.clientX,t.clientY)},om=(t,s)=>{const a=Kv.DOM.getPos(t);return ll(s,a.x,a.y)},jt=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?qa(s):om(t.getContentAreaContainer(),ec(s)):Yn(t),Yn=t=>({type:"selection",root:rt.fromDom(t.selection.getNode())}),Ts=t=>({type:"node",node:x.some(rt.fromDom(t.selection.getNode())),root:rt.fromDom(t.getBody())}),Xs=(t,s,a)=>{switch(a){case"node":return Ts(t);case"point":return jt(t,s);case"selection":return Yn(t)}},Cr=(t,s,a,l,u,f)=>{const m=a(),p=Xs(t,s,f);Vg(m,jl.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:x.none()}).map(v=>{s.preventDefault(),es.showMenuAt(u,{anchor:p},{menu:{markers:Xd("normal")},data:v})})},Js={onLtr:()=>[zs,Ds,Vs,Hr,hr,sr,Rl,G1,j1,ay,$h,W1],onRtl:()=>[zs,Vs,Ds,hr,Hr,sr,Rl,G1,$h,W1,j1,ay]},us=12,ds={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},ei=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const l=s.touches[0],u=a.getRng();return gO(t.getWin(),A1.domRange(u)).exists(m=>m.left<=l.clientX&&m.right>=l.clientX&&m.top<=l.clientY&&m.bottom>=l.clientY)}},$c=t=>{const s=t.selection.getRng(),a=()=>{U2.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),f()};t.once("touchend",a);const l=m=>{m.preventDefault(),m.stopImmediatePropagation()};t.on("mousedown",l,!0);const u=()=>f();t.once("longpresscancel",u);const f=()=>{t.off("touchend",a),t.off("longpresscancel",u),t.off("mousedown",l)}},ad=(t,s,a)=>{const l=Xs(t,s,a);return{bubble:ha(0,a==="point"?us:0,ds),layouts:Js,overrides:{maxWidthFunction:cy(),maxHeightFunction:Um()},...l}},du=(t,s,a,l,u,f,m)=>{const p=ad(t,s,f);Vg(a,jl.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!0,search:x.none()}).map(v=>{s.preventDefault();const C=m?Ga.HighlightMenuAndItem:Ga.HighlightNone;es.showMenuWithinBounds(u,{anchor:p},{menu:{markers:Xd("normal"),highlightOnOpen:C},data:v,type:"horizontal"},()=>x.some(e1(t,l.shared,f==="node"?"node":"selection"))),t.dispatch(OA)})},t1=(t,s,a,l,u,f)=>{const m=Wa(),p=m.os.isiOS(),v=m.os.isMacOS(),C=m.os.isAndroid(),E=m.deviceType.isTouch(),D=()=>!(C||p||v&&E),I=()=>{const H=a();du(t,s,H,l,u,f,D())};if((v||p)&&f!=="node"){const H=()=>{$c(t),I()};ei(t,s)?H():(t.once("selectionchange",H),t.once("touchend",()=>t.off("selectionchange",H)))}else I()},Gg=t=>B(t)?t==="|":t.type==="separator",nf={type:"separator"},tc=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(B(t))return t;switch(t.type){case"separator":return nf;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const l=t.getSubmenuItems();return B(l)?l:Ie(l,tc)}};default:const a=t;return{type:"menuitem",...s(a),onAction:we(a.onAction)}}},of=(t,s)=>{if(s.length===0)return t;const l=jr(t).filter(u=>!Gg(u)).fold(()=>[],u=>[nf]);return t.concat(l).concat(s).concat([nf])},$0=(t,s,a)=>{const l=Bo(s,(u,f)=>$e(t,f.toLowerCase()).map(m=>{const p=m.update(a);if(B(p)&&Wi(gd(p)))return of(u,p.split(" "));if(K(p)&&p.length>0){const v=Ie(p,tc);return of(u,v)}else return u}).getOrThunk(()=>u.concat([f])),[]);return l.length>0&&Gg(l[l.length-1])&&l.pop(),l},n1=(t,s)=>s.ctrlKey&&!go(t),qI=t=>t.type==="longpress"||yt(t,"touches"),o1=(t,s)=>!qI(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),s1=(t,s)=>o1(t,s)?t.selection.getStart(!0):s.target,eB=(t,s)=>{const a=ql(t),l=o1(t,s)?"selection":"point";if(Wi(a)){const u=s1(t,s);return E1(rt.fromDom(u),a)?"node":l}else return l},r1=(t,s,a)=>{const u=Wa().deviceType.isTouch,f=pa(es.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:qe([cn("dismissContextMenu",[Le(Td(),(v,C)=>{Qn.close(v),t.focus()})])])})),m=()=>es.hide(f),p=v=>{if(go(t)&&v.preventDefault(),n1(t,v)||rd(t))return;const C=eB(t,v),E=()=>{const I=s1(t,v),H=t.ui.registry.getAll(),W=Ba(t);return $0(H.contextMenus,W,I)};(u()?t1:Cr)(t,v,E,a,f,C)};t.on("init",()=>{const v="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(u()?"":" ResizeWindow");t.on(v,m),t.on("longpress contextmenu",p)})},id=40,Kg=id/2,be=(t,s,a,l,u,f)=>t.fold(()=>og.snap({sensor:nl(a-Kg,l-Kg),range:Ss(u,f),output:nl(x.some(a),x.some(l)),extra:{td:s}}),m=>{const p=a-Kg,v=l-Kg,C=id,E=id,D=m.element.dom.getBoundingClientRect();return og.snap({sensor:nl(p,v),range:Ss(C,E),output:nl(x.some(a-D.width/2),x.some(l-D.height/2)),extra:{td:s}})}),Ee=(t,s,a)=>{const l=(u,f)=>u.exists(m=>vo(m,f));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(u,f)=>{const m=f.td;l(s.get(),m)||(s.set(m),a(m))},mustSnap:!0}},gt=t=>lo(Dr.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:qe([og.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),dg.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),st=(t,s)=>{const a=Rt([]),l=Rt([]),u=Rt(!1),f=dn(),m=dn(),p=Ge=>{const Pe=km(Ge);return be(H.getOpt(s),Ge,Pe.x,Pe.y,Pe.width,Pe.height)},v=()=>Ie(a.get(),Ge=>p(Ge)),C=Ge=>{const Pe=km(Ge);return be(W.getOpt(s),Ge,Pe.right,Pe.bottom,Pe.width,Pe.height)},E=()=>Ie(l.get(),Ge=>C(Ge)),D=Ee(v,f,Ge=>{m.get().each(Pe=>{t.dispatch("TableSelectorChange",{start:Ge,finish:Pe})})}),I=Ee(E,m,Ge=>{f.get().each(Pe=>{t.dispatch("TableSelectorChange",{start:Pe,finish:Ge})})}),H=gt(D),W=gt(I),Q=pa(H.asSpec()),se=pa(W.asSpec()),X=(Ge,Pe,wt,Kt)=>{const Ft=Pe.dom.getBoundingClientRect();mt(Ge.element,"display");const _n=wl(rt.fromDom(t.getBody())).dom.innerHeight,rn=wt(Ft),vn=Kt(Ft,_n);(rn||vn)&&gn(Ge.element,"display","none")},ie=(Ge,Pe,wt,Kt)=>{const Ft=wt(Pe);og.snapTo(Ge,Ft),X(Ge,Pe,vn=>vn[Kt]<0,(vn,Pt)=>vn[Kt]>Pt)},le=Ge=>ie(Q,Ge,p,"top"),xe=()=>f.get().each(le),Me=Ge=>ie(se,Ge,C,"bottom"),vt=()=>m.get().each(Me);if(Wa().deviceType.isTouch()){const Ge=Pe=>Ie(Pe,rt.fromDom);t.on("TableSelectionChange",Pe=>{u.get()||(Oc(s,Q),Oc(s,se),u.set(!0));const wt=rt.fromDom(Pe.start),Kt=rt.fromDom(Pe.finish);f.set(wt),m.set(Kt),x.from(Pe.otherCells).each(Ft=>{a.set(Ge(Ft.upOrLeftCells)),l.set(Ge(Ft.downOrRightCells)),le(wt),Me(Kt)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{xe(),vt()}),t.on("TableSelectionClear",()=>{u.get()&&(rr(Q),rr(se),u.set(!1)),f.clear(),m.clear()})}};var Qt=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const qn=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",As=(t,s,a)=>{var l;const u=(l=s.delimiter)!==null&&l!==void 0?l:"›",f=(C,E,D)=>Dr.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":D}},components:[Wo(C)],action:I=>{t.focus(),t.selection.select(E),t.nodeChanged()},buttonBehaviours:qe([qo.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",E.nodeName.toLowerCase()]),onShow:(I,H)=>{Bu(I.element,H.element)},onHide:I=>{a7(I.element)}})}),Fi.button(a.isDisabled),Ms(()=>a.checkUiComponentContext("any"))])}),m=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Wo(` ${u} `)]}),p=C=>Bo(C,(E,D,I)=>{const H=f(D.name,D.element,I);return I===0?E.concat([H]):E.concat([m(),H])},[]),v=C=>{const E=[];let D=C.length;for(;D-- >0;){const I=C[D];if(I.nodeType===1&&!qn(I)){const H=HU(t,I);if(H.isDefaultPrevented()||E.push({name:H.name,element:I}),H.isPropagationStopped())break}}return E};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:qe([It.config({mode:"flow",selector:"div[role=button]"}),Lt.config({disabled:a.isDisabled}),Ms(()=>a.checkUiComponentContext("any")),Mo.config({}),fn.config({}),cn("elementPathEvents",[$o((C,E)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>It.focusIn(C)),t.on("NodeChange",D=>{const I=v(D.parents),H=I.length>0?p(I):[];fn.set(C,H)})})])]),components:[]}};var Ca;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(Ca||(Ca={}));const Hc=(t,s,a,l,u)=>{const f={height:CS(l+s.top,W2(t),F4(t))};return a===Ca.Both&&(f.width=CS(u+s.left,Z2(t),j2(t))),f},a1=(t,s,a)=>{const l=rt.fromDom(t.getContainer()),u=Hc(t,s,a,zn(l),nr(l));ze(u,(f,m)=>{Fe(f)&&gn(l,m,F0(f))}),iu(t)},tB=t=>{const s=Qv(t);return s===!1?Ca.None:s==="both"?Ca.Both:Ca.Vertical},H0=(t,s,a,l)=>{const f=Ss(a*20,l*20);return a1(t,f,s),x.some(!0)},PA=(t,s)=>{const a=tB(t);if(a===Ca.None)return x.none();const l=a===Ca.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.",u=a===Ca.Both?"tox-statusbar__resize-cursor-both":"tox-statusbar__resize-cursor-default";return x.some(ci("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle",u],attributes:{"aria-label":s.translate(l),"data-mce-name":"resize-handle"},behaviours:[og.config({mode:"mouse",repositionTarget:!1,onDrag:(f,m,p)=>a1(t,p,a),blockerClass:"tox-blocker"}),It.config({mode:"special",onLeft:()=>H0(t,a,-1,0),onRight:()=>H0(t,a,1,0),onUp:()=>H0(t,a,0,-1),onDown:()=>H0(t,a,0,1)}),Mo.config({}),tn.config({}),qo.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},nB=(t,s)=>{const a=(l,u,f)=>fn.set(l,[Wo(s.translate(["{0} "+f,u[f]]))]);return Dr.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:qe([Fi.button(s.isDisabled),Ms(()=>s.checkUiComponentContext("any")),Mo.config({}),fn.config({}),xt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),cn("wordcount-events",[Bd(l=>{const u=xt.getValue(l),f=u.mode==="words"?"characters":"words";xt.setValue(l,{mode:f,count:u.count}),a(l,u.count,f)}),$o(l=>{t.on("wordCountUpdate",u=>{const{mode:f}=xt.getValue(l);xt.setValue(l,{mode:f,count:u.wordCount}),a(l,u.wordCount,f)})})])]),eventOrder:{[el()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},sf=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",Qt.trim()])},behaviours:qe([tn.config({})])}]}),l=()=>{const p=Z3("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Wo(Wl.translate(["Press {0} for help",p]))]}},u=()=>{const p=[];return t.hasPlugin("wordcount")&&p.push(nB(t,s)),H4(t)&&p.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:p}},f=()=>{const p=[],v=oR(t),C=eR(t),E=H4(t)||t.hasPlugin("wordcount"),D=()=>{const I="tox-statusbar__text-container--flex-start",H="tox-statusbar__text-container--flex-end",W="tox-statusbar__text-container--space-around";if(v){const Q="tox-statusbar__text-container-3-cols";return!E&&!C?[Q,W]:E&&!C?[Q,H]:[Q,I]}return[E&&!C?H:I]};return C&&p.push(As(t,{},s)),v&&p.push(l()),E&&p.push(u()),p.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...D()]},components:p}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const p=f(),v=PA(t,s);return p.concat(v.toArray())})()}},NA=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),oB=(t,s)=>{const a=t.inline,l=a?wS:UG,u=xp(t)?fj:XT,f=fi(),m=dn(),p=dn(),v=dn(),I=Wa().deviceType.isTouch()?["tox-platform-touch"]:[],H=Z4(t),W=vp(t),Q=lo({dom:{tag:"div",classes:["tox-anchorbar"]}}),se=lo({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),X=()=>f.mainUi.get().map(Zt=>Zt.outerContainer).bind(Po.getHeader),ie=()=>Sn.fromOption(f.dialogUi.get().map(Zt=>Zt.sink),"UI has not been rendered"),le=()=>Sn.fromOption(f.popupUi.get().map(Zt=>Zt.sink),"(popup) UI has not been rendered"),xe=f.lazyGetInOuterOrDie("anchor bar",Q.getOpt),Me=f.lazyGetInOuterOrDie("bottom anchor bar",se.getOpt),vt=f.lazyGetInOuterOrDie("toolbar",Po.getToolbar),Ge=f.lazyGetInOuterOrDie("throbber",Po.getThrobber),Pe=lj({popup:le,dialog:ie},t,xe,Me),wt=()=>{const Zt={attributes:{[uy]:H?Id.BottomToTop:Id.TopToBottom}},hn=Po.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Pe.popup,onEscape:()=>{t.focus()}}),wo=Po.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Pe.popup.shared.getSink,providers:Pe.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:ld=>{VU(t,ld)},type:W,lazyToolbar:vt,lazyHeader:()=>X().getOrDie("Could not find header element"),...Zt}),bo=Po.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Pe.popup.shared.providers,onEscape:()=>{t.focus()},type:W}),gi=Cp(t),rs=qv(t),cl=Ic(t),oa=nR(t),ul=Kt(oa),dl=gi||rs||cl,Vc=()=>gi?[bo]:rs?[wo]:[],z0=[ul,hn];return Po.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(dl?[]:["tox-editor-header--empty"]),...Zt},components:Ot([cl?z0:[],Vc(),Sp(t)?[]:[Q.asSpec()]]),sticky:xp(t),editor:t,sharedBackstage:Pe.popup.shared})},Kt=Zt=>Po.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]},promotionLink:Zt}),Ft=()=>{const Zt=Po.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),hn=Po.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Zt,hn]}},_n=()=>{const Zt=W4(t),hn=vo(Aa(),Zt)&&k(Zt,"display")==="grid",wo={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(I),attributes:{...Wl.isRtl()?{dir:"rtl"}:{}}},behaviours:qe([va.config({useFixed:()=>u.isDocked(X)})])},bo={dom:{styles:{width:document.body.clientWidth+"px"}},events:Jo([Le(qc(),cl=>{gn(cl.element,"width",document.body.clientWidth+"px")})])},gi=pa(ho(wo,hn?bo:{})),rs=p2(gi);return p.set(rs),{sink:gi,mothership:rs}},rn=()=>{const Zt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(I),attributes:{...Wl.isRtl()?{dir:"rtl"}:{}}},behaviours:qe([va.config({useFixed:()=>u.isDocked(X),getBounds:()=>s.getPopupSinkBounds()})])},hn=pa(Zt),wo=p2(hn);return v.set(wo),{sink:hn,mothership:wo}},vn=()=>{const Zt=wt(),hn=Ft(),wo=Po.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Pe.popup}),bo=Po.parts.viewWrapper({backstage:Pe.popup}),gi=q6(t)&&!a?x.some(sf(t,Pe.popup.shared.providers)):x.none(),rs=Ot([H?[]:[Zt],a?[]:[hn],H?[Zt]:[]]),cl=Po.parts.editorContainer({components:Ot([rs,a?[]:[se.asSpec()]])}),oa=j4(t),ul={role:"application",...Wl.isRtl()?{dir:"rtl"}:{},...oa?{"aria-hidden":"true"}:{}},dl=pa(Po.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(H?["tox-tinymce--toolbar-bottom"]:[]).concat(I),styles:{visibility:"hidden",...oa?{opacity:"0",border:"0"}:{}},attributes:ul},components:[cl,...a?[]:[bo,...gi.toArray()],wo],behaviours:qe([Ms(()=>Pe.popup.shared.providers.checkUiComponentContext("any")),Lt.config({disableClass:"tox-tinymce--disabled"}),It.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Vc=p2(dl);return m.set(Vc),{mothership:Vc,outerContainer:dl}},Pt=Zt=>{const hn=F0(WG(t)),wo=F0(jG(t));return t.inline||(Xe("div","width",wo)&&gn(Zt.element,"width",wo),Xe("div","height",hn)?gn(Zt.element,"height",hn):gn(Zt.element,"height","400px")),hn},Ze=Zt=>{t.addShortcut("alt+F9","focus menubar",()=>{Po.focusMenubar(Zt)}),t.addShortcut("alt+F10","focus toolbar",()=>{Po.focusToolbar(Zt)}),t.addCommand("ToggleToolbarDrawer",(hn,wo)=>{wo!=null&&wo.skipFocus?Po.toggleToolbarDrawerWithoutFocusing(Zt):Po.toggleToolbarDrawer(Zt)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Po.isToolbarDrawerToggled(Zt))},lt=Zt=>{const{mainUi:hn,popupUi:wo,uiMotherships:bo}=Zt;ot(j6(t),(Yg,LA)=>{t.ui.registry.addGroupToolbarButton(LA,Yg)});const{buttons:gi,menuItems:rs,contextToolbars:cl,sidebars:oa,views:ul}=t.ui.registry.getAll(),dl=U4(t),Vc={menuItems:rs,menus:aR(t),menubar:K6(t),toolbar:dl.getOrThunk(()=>Xv(t)),allowToolbarGroups:W===zl.floating,buttons:gi,sidebar:oa,views:ul};Ze(hn.outerContainer),jp(t,hn.mothership,bo),u.setup(t,Pe.popup.shared,X),nt(t,Pe.popup),r1(t,Pe.popup.shared.getSink,Pe.popup),iI(t),Aj(t,Ge,Pe.popup.shared),_(t,cl,wo.sink,{backstage:Pe.popup}),st(t,wo.sink);const z0=t.getElement(),ld=Pt(hn.outerContainer),BA={targetNode:z0,height:ld};return l.render(t,Zt,Vc,Pe.popup,BA)},Jt=Zt=>(v.set(Zt.mothership),Zt),bn=()=>{const Zt=vn(),hn=_n(),wo=Kf(t)?rn():Jt(hn);f.dialogUi.set(hn),f.popupUi.set(wo),f.mainUi.set(Zt);const bo={popupUi:wo,dialogUi:hn,mainUi:Zt,uiMotherships:f.getUiMotherships()};return lt(bo)};return{popups:{backstage:Pe.popup,getMothership:()=>NA("popups",v)},dialogs:{backstage:Pe.dialog,getMothership:()=>NA("dialogs",p)},renderUI:bn}},IA=t=>{const s=[],a={};return ze(t,(l,u)=>{l.fold(()=>{s.push(u)},f=>{a[u]=f})}),s.length>0?Sn.error(s):Sn.value(a)},sB=(t,s,a,l)=>{const u=lo(hg.sketch(f=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Ie(t.items,m=>M8(f,m,s,a,l))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[u.asSpec()]}],behaviours:qe([It.config({mode:"acyclic",useTabstopAt:Ce(A0)}),Yl.memento(u),OZ(u,{postprocess:f=>IA(f).fold(m=>(console.error(m),{}),ct)}),cn("dialog-body-panel",[Le(ma(),(f,m)=>{f.getSystem().broadcastOn([O0],{newFocus:x.some(m.event.target)})})])])}},oK=(t,s,a)=>Ie(t,(l,u)=>{fn.set(a,t[u].view());const f=s.dom.getBoundingClientRect();return fn.set(a,[]),f.height}),jn=t=>bs(za(t,(s,a)=>s>a?-1:s<a?1:0)),Oe=(t,s,a)=>{const l=Si(t).dom,u=mc(t,".tox-dialog-wrap").getOr(t),f=k(u,"position")==="fixed";let m;f?m=Math.max(l.clientHeight,window.innerHeight):m=Math.max(l.offsetHeight,l.scrollHeight);const p=zn(s),C=s.dom.offsetLeft>=a.dom.offsetLeft+nr(a)?Math.max(zn(a),p):p,E=parseInt(k(t,"margin-top"),10)||0,D=parseInt(k(t,"margin-bottom"),10)||0,H=zn(t)+E+D-C;return m-H},Ut=(t,s)=>{bs(t).each(a=>Uf.showTab(s,a.value))},Mn=(t,s)=>{gn(t,"height",s+"px"),gn(t,"flex-basis",s+"px")},Is=(t,s,a)=>{mc(t,'[role="dialog"]').each(l=>{ko(l,'[role="tablist"]').each(u=>{a.get().map(f=>(gn(s,"height","0"),gn(s,"flex-basis","0"),Math.min(f,Oe(l,s,u)))).each(f=>{Mn(s,f)})})})},La=t=>ko(t,'[role="tabpanel"]'),Fa=t=>{const s=dn();return{extraEvents:[$o(u=>{const f=u.element;La(f).each(m=>{gn(m,"visibility","hidden"),u.getSystem().getByDom(m).toOptional().each(p=>{const v=oK(t,m,p);jn(v).fold(s.clear,s.set)}),Is(f,m,s),mt(m,"visibility"),Ut(t,u),requestAnimationFrame(()=>{Is(f,m,s)})})}),Le(qc(),u=>{const f=u.element;La(f).each(m=>{Is(f,m,s)})}),Le(BC,(u,f)=>{const m=u.element;La(m).each(p=>{const v=uc(dr(p));gn(p,"visibility","hidden");const C=Y(p,"height").map(I=>parseInt(I,10));mt(p,"height"),mt(p,"flex-basis");const E=p.dom.getBoundingClientRect().height;C.forall(I=>E>I)?(s.set(E),Is(m,p,s)):C.each(I=>{Mn(p,I)}),mt(p,"visibility"),v.each(Ls)})})],selectFirst:!1}},_i="send-data-to-section",fu="send-data-to-view",V0=(t,s,a,l)=>{const u=Rt({}),f=E=>{const D=xt.getValue(E),I=IA(D).getOr({}),H=u.get(),W=ho(H,I);u.set(W)},m=E=>{const D=u.get();xt.setValue(E,D)},p=Rt(null),v=Ie(t.tabs,E=>({value:E.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Wo(a.shared.providers.translate(E.title))],view:()=>[hg.sketch(D=>({dom:{tag:"div",classes:["tox-form"]},components:Ie(E.items,I=>M8(D,I,s,a,l)),formBehaviours:qe([It.config({mode:"acyclic",useTabstopAt:Ce(A0)}),cn("TabView.form.events",[$o(m),eu(f)]),Ya.config({channels:Oh([{key:_i,value:{onReceive:f}},{key:fu,value:{onReceive:m}}])})])}))]})),C=Fa(v);return Uf.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(E,D,I)=>{const H=xt.getValue(D);Wt(E,UN,{name:H,oldName:p.get()}),p.set(H)},tabs:v,components:[Uf.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[P6.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:qe([Mo.config({})])}),Uf.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:C.selectFirst,tabSectionBehaviours:qe([cn("tabpanel",C.extraEvents),It.config({mode:"acyclic"}),Wn.config({find:E=>bs(Uf.getViewItems(E))}),$g(x.none(),E=>(E.getSystem().broadcastOn([_i],{}),u.get()),(E,D)=>{u.set(D),E.getSystem().broadcastOn([fu],{})})])})},_a=(t,s,a,l,u,f)=>{const m=C=>{const E=C.body;switch(E.type){case"tabpanel":return[V0(E,C.initialData,l,f)];default:return[sB(E,C.initialData,l,f)]}},p=(C,E)=>x.some({isTabPanel:()=>E.body.type==="tabpanel"}),v={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(C=>({id:C})).getOr({}),...u?v:{}}},components:[],behaviours:qe([Yl.childAt(0),Mi.config({channel:`${e8}-${s}`,updateState:p,renderComponents:m,initialData:t})])}},sK=(t,s,a,l,u,f)=>_a(t,s,x.some(a),l,u,f),rB=(t,s,a,l)=>{const u=_a(t,s,x.none(),a,!1,l);return ar.parts.body(u)},aB=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[QN(x.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:qe([Mo.config({}),tn.config({})])})]}],behaviours:qe([It.config({mode:"acyclic",useTabstopAt:Ce(A0)})])};return ar.parts.body(s)},MJ=Kd.deviceType.isTouch(),iX=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),lX=(t,s)=>ar.parts.close(Dr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:qe([Mo.config({})])})),cX=()=>ar.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),uX=(t,s)=>ar.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Xu(`<p>${ER(s.translate(t))}</p>`)}]}]}),dX=t=>ar.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),fX=(t,s)=>[$l.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),$l.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],rK=t=>{const s="tox-dialog",a=s+"-wrap",l=a+"__backdrop",u=s+"__disable-scroll";return ar.sketch({lazySink:t.lazySink,onEscape:f=>(t.onEscape(f),x.some(!0)),useTabstopAt:f=>!A0(f),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:Xu(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:MJ?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:a,modalBehaviours:qe([tn.config({}),cn("dialog-events",t.dialogEvents.concat([Vh(ma(),(f,m)=>{kc.isBlocked(f)?ee():It.focusIn(f)}),Le(Tf(),(f,m)=>{f.getSystem().broadcastOn([O0],{newFocus:m.event.newFocus})})])),cn("scroll-lock",[$o(()=>{xs(Aa(),u)}),eu(()=>{Yo(Aa(),u)})]),...t.extraBehaviours]),eventOrder:{[el()]:["dialog-events"],[Dl()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Vu()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},mX=t=>Dr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:qe([Mo.config({}),qo.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[ci("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{Zn(s,em)}}),gX=(t,s,a,l)=>{const u=f=>[Wo(l.translate(f.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(f=>({id:f})).getOr({})}},components:[],behaviours:qe([Mi.config({channel:`${qN}-${s}`,initialData:t,renderComponents:u})])}},hX=()=>({dom:Xu('<div class="tox-dialog__draghandle"></div>')}),RJ=(t,s,a,l)=>$l.sketch({dom:Xu('<div class="tox-dialog__header"></div>'),components:[gX(t,s,x.some(a),l),hX(),mX(l)],containerBehaviours:qe([og.config({mode:"mouse",blockerClass:"blocker",getTarget:u=>Iu(u,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"},onDrag:(u,f)=>{u.getSystem().broadcastOn([Vf()],{target:f})}})])}),PJ=(t,s,a)=>{const l=ar.parts.title(gX(t,s,x.none(),a)),u=ar.parts.draghandle(hX()),f=ar.parts.close(mX(a)),m=[l].concat(t.draggable?[u]:[]).concat([f]);return $l.sketch({dom:Xu('<div class="tox-dialog__header"></div>'),components:m})},pX=(t,s,a)=>PJ({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),vX=(t,s,a,l)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${l.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:Xu('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),bX=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:l=>{const u=ko(t().element,".tox-dialog__header").map(f=>zn(f));ar.setBusy(t(),(f,m)=>vX(l.message,m,s,u))},onUnblock:()=>{ar.setIdle(t())}}),yX="tox-dialog--fullscreen",aK="tox-dialog--width-lg",iK="tox-dialog--width-md",iB=t=>{switch(t){case"large":return x.some(aK);case"medium":return x.some(iK);default:return x.none()}},CX=(t,s)=>{const a=rt.fromDom(s.element.dom);Jr(a,yX)||(Xi(a,[aK,iK]),iB(t).each(l=>xs(a,l)))},SX=(t,s)=>{const a=rt.fromDom(t.element.dom),l=Sd(a),u=_t(l,f=>f===aK||f===iK).or(iB(s));FB(a,[yX,...u.toArray()])},xX=(t,s,a)=>pa(rK({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[w0({}),...t.extraBehaviours],onEscape:l=>{Zn(l,em)},dialogEvents:s,eventOrder:{[Bm()]:[Mi.name(),Ya.name()],[Dl()]:["scroll-lock",Mi.name(),"messages","dialog-events","alloy.base.behaviour"],[Vu()]:["alloy.base.behaviour","dialog-events","messages",Mi.name(),"scroll-lock"]}})),lK=(t,s={})=>{const a=l=>{const u=Ie(l.items,f=>{const m=$e(s,f.name).getOr(Rt(!1));return{...f,storage:m}});return{...l,items:u}};return Ie(t,l=>l.type==="menu"?a(l):l)},wX=t=>Bo(t,(s,a)=>a.type==="menu"?Bo(a.items,(u,f)=>(u[f.name]=f.storage,u),s):s,{}),EX=(t,s)=>[my(ma(),FZ),t(S0,(a,l,u,f)=>{Ru(f.element)&&uc(dr(f.element)).each(Tl),s.onClose(),l.onClose()}),t(em,(a,l,u,f)=>{l.onCancel(a),Zn(f,S0)}),Le(x0,(a,l)=>s.onUnblock()),Le(pT,(a,l)=>s.onBlock(l.event))],NJ=(t,s)=>{const a=(u,f)=>Le(u,(m,p)=>{l(m,(v,C)=>{f(t(),v,p.event,m)})}),l=(u,f)=>{Mi.getState(u).get().each(m=>{f(m,u)})};return[...EX(a,s),a(sd,(u,f,m)=>{f.onAction(u,{name:m.name})})]},TX=(t,s,a)=>{const l=(f,m)=>Le(f,(p,v)=>{u(p,(C,E)=>{m(t(),C,v.event,p)})}),u=(f,m)=>{Mi.getState(f).get().each(p=>{m(p.internalDialog,f)})};return[...EX(l,s),l(_g,(f,m)=>m.onSubmit(f)),l(Qa,(f,m,p)=>{m.onChange(f,{name:p.name})}),l(sd,(f,m,p,v)=>{const C=()=>v.getSystem().isConnected()?It.focusIn(v):void 0,E=H=>y1(H,"disabled")||er(H,"aria-disabled").exists(W=>W==="true"),D=dr(v.element),I=uc(D);m.onAction(f,{name:p.name,value:p.value}),uc(D).fold(C,H=>{E(H)||I.exists(W=>hm(H,W)&&E(W))?C():a().toOptional().filter(W=>!hm(W.element,H)).each(C)})}),l(UN,(f,m,p)=>{m.onTabChange(f,{newTabName:p.name,oldTabName:p.oldName})}),eu(f=>{const m=t();xt.setValue(f,m.getData())})]},IJ=(t,s)=>k0(t,t.type,s),BJ=(t,s,a)=>_t(s,l=>l.name===a).bind(l=>l.memento.getOpt(t)),LJ=(t,s)=>{const a=s.map(p=>p.footerButtons).getOr([]),l=Os(a,p=>p.align==="start"),u=(p,v)=>$l.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${p}`]},components:Ie(v,C=>C.memento.asSpec())}),f=u("start",l.pass),m=u("end",l.fail);return[f,m]},AX=(t,s,a)=>{const l=(u,f)=>{const m=Ie(f.buttons,v=>{const C=lo(IJ(v,a));return{name:v.name,align:v.align,memento:C}}),p=v=>BJ(u,m,v);return x.some({lookupByName:p,footerButtons:m})};return{dom:Xu('<div class="tox-dialog__footer"></div>'),components:[],behaviours:qe([Mi.config({channel:`${t8}-${s}`,initialData:t,updateState:l,renderComponents:LJ})])}},FJ=(t,s,a)=>AX(t,s,a),OX=(t,s,a)=>ar.parts.footer(AX(t,s,a)),lB=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const l=Wn.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return hg.getField(l,s).orThunk(()=>t.getFooter().bind(m=>Mi.getState(m).get()).bind(m=>m.lookupByName(s)))}else return x.none()},_J=(t,s)=>{const a=t.getRoot();return Mi.getState(a).get().map(l=>kl(gs("data",l.dataValidator,s))).getOr(s)},kX=(t,s,a)=>{const l=W=>{const Q=t.getRoot();Q.getSystem().isConnected()&&W(Q)},H={getData:()=>{const W=t.getRoot(),Q=W.getSystem().isConnected()?t.getFormWrapper():W,se=xt.getValue(Q),X=ot(a,ie=>ie.get());return{...se,...X}},setData:W=>{l(Q=>{const se=H.getData(),X=ho(se,W),ie=_J(t,X),le=t.getFormWrapper();xt.setValue(le,ie),ze(a,(xe,Me)=>{yt(X,Me)&&xe.set(X[Me])})})},setEnabled:(W,Q)=>{lB(t,W).each(Q?Lt.enable:Lt.disable)},focus:W=>{lB(t,W).each(tn.focus)},block:W=>{if(!B(W))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(Q=>{Wt(Q,pT,{message:W})})},unblock:()=>{l(W=>{Zn(W,x0)})},showTab:W=>{l(Q=>{const se=t.getBody();Mi.getState(se).get().exists(ie=>ie.isTabPanel())&&Wn.getCurrent(se).each(ie=>{Uf.showTab(ie,W)})})},redial:W=>{l(Q=>{const se=t.getId(),X=s(W),ie=lK(X.internalDialog.buttons,a);Q.getSystem().broadcastOn([`${FC}-${se}`],X),Q.getSystem().broadcastOn([`${qN}-${se}`],X.internalDialog),Q.getSystem().broadcastOn([`${e8}-${se}`],X.internalDialog),Q.getSystem().broadcastOn([`${t8}-${se}`],{...X.internalDialog,buttons:ie}),H.setData(X.initialData)})},close:()=>{l(W=>{Zn(W,S0)})},toggleFullscreen:t.toggleFullscreen};return H},$J=(t,s,a)=>{const l=Ct("dialog"),u=t.internalDialog,f=pX(u.title,l,a),m=Rt(u.size),p=le=>lB(X,le),v=iB(m.get()).toArray(),C=(le,xe)=>(m.set(xe.internalDialog.size),CX(xe.internalDialog.size,le),x.some(xe)),E=rB({body:u.body,initialData:u.initialData},l,a,p),D=lK(u.buttons),I=wX(D),H=Kr(D.length!==0,OX({buttons:D},l,a)),W=TX(()=>ie,bX(()=>se,a.shared.providers,s),a.shared.getSink),Q={id:l,header:f,body:E,footer:H,extraClasses:v,extraBehaviours:[Mi.config({channel:`${FC}-${l}`,updateState:C,initialData:t})],extraStyles:{}},se=xX(Q,W,a),X=(()=>{const le=()=>{const Me=ar.getBody(se);return Wn.getCurrent(Me).getOr(Me)},xe=()=>{SX(se,m.get())};return{getId:te(l),getRoot:te(se),getBody:()=>ar.getBody(se),getFooter:()=>ar.getFooter(se),getFormWrapper:le,toggleFullscreen:xe}})(),ie=kX(X,s.redial,I);return{dialog:se,instanceApi:ie}},DX=(t,s,a,l=!1,u)=>{const f=Ct("dialog"),m=Ct("dialog-label"),p=Ct("dialog-content"),v=t.internalDialog,C=wt=>lB(Ge,wt),E=Rt(v.size),D=iB(E.get()).toArray(),I=(wt,Kt)=>(E.set(Kt.internalDialog.size),CX(Kt.internalDialog.size,wt),u(),x.some(Kt)),H=lo(RJ({title:v.title,draggable:!0},f,m,a.shared.providers)),W=lo(sK({body:v.body,initialData:v.initialData},f,p,a,l,C)),Q=lK(v.buttons),se=wX(Q),X=Kr(Q.length!==0,lo(FJ({buttons:Q},f,a))),ie=TX(()=>Pe,{onBlock:wt=>{kc.block(Me,(Kt,Ft)=>{const _n=H.getOpt(Me).map(rn=>zn(rn.element));return vX(wt.message,Ft,a.shared.providers,_n)})},onUnblock:()=>{kc.unblock(Me)},onClose:()=>s.closeWindow()},a.shared.getSink),le="tox-dialog-inline",xe=Wa().os,Me=pa({dom:{tag:"div",classes:["tox-dialog",le,...D],attributes:{role:"dialog",...xe.isMacOS()?{"aria-label":v.title}:{"aria-labelledby":m}}},eventOrder:{[Bm()]:[Mi.name(),Ya.name()],[el()]:["execute-on-form"],[Dl()]:["reflecting","execute-on-form"]},behaviours:qe([It.config({mode:"cyclic",onEscape:wt=>(Zn(wt,S0),x.some(!0)),useTabstopAt:wt=>!A0(wt)&&(xl(wt)!=="button"||qs(wt,"disabled")!=="disabled"),firstTabstop:1}),Mi.config({channel:`${FC}-${f}`,updateState:I,initialData:t}),tn.config({}),cn("execute-on-form",ie.concat([Vh(ma(),(wt,Kt)=>{It.focusIn(wt)}),Le(Tf(),(wt,Kt)=>{wt.getSystem().broadcastOn([O0],{newFocus:Kt.event.newFocus})})])),kc.config({getRoot:()=>x.some(Me)}),fn.config({}),w0({})]),components:[H.asSpec(),W.asSpec(),...X.map(wt=>wt.asSpec()).toArray()]}),vt=()=>{SX(Me,E.get())},Ge={getId:te(f),getRoot:te(Me),getFooter:()=>X.map(wt=>wt.get(Me)),getBody:()=>W.get(Me),getFormWrapper:()=>{const wt=W.get(Me);return Wn.getCurrent(wt).getOr(wt)},toggleFullscreen:vt},Pe=kX(Ge,s.redial,se);return{dialog:Me,instanceApi:Pe}};var cK=tinymce.util.Tools.resolve("tinymce.util.URI");const HJ=t=>{const s=m=>{t.getSystem().isConnected()&&m(t)};return{block:m=>{if(!B(m))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(p=>{Wt(p,pT,{message:m})})},unblock:()=>{s(m=>{Zn(m,x0)})},close:()=>{s(m=>{Zn(m,S0)})},sendMessage:m=>{s(p=>{p.getSystem().broadcastOn([n8],m)})}}},VJ=["insertContent","setContent","execCommand","close","block","unblock"],MX=t=>O(t)&&VJ.indexOf(t.mceAction)!==-1,zJ=t=>!MX(t)&&O(t)&&yt(t,"mceAction"),UJ=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const l=re(a.ui)?a.ui:!1;t.execCommand(a.cmd,l,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},ZJ=(t,s,a,l)=>{const u=Ct("dialog"),f=pX(t.title,u,l),m=aB(t),p=t.buttons.bind(le=>le.length===0?x.none():x.some(OX({buttons:le},u,l))),v=NJ(()=>ie,bX(()=>X,l.shared.providers,s)),C={...t.height.fold(()=>({}),le=>({height:le+"px","max-height":le+"px"})),...t.width.fold(()=>({}),le=>({width:le+"px","max-width":le+"px"}))},E=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],D=new cK(t.url,{base_uri:new cK(window.location.href)}),I=`${D.protocol}://${D.host}${D.port?":"+D.port:""}`,H=bl(),W=(le,xe)=>x.some(xe),Q=[Mi.config({channel:`${FC}-${u}`,updateState:W,initialData:t}),cn("messages",[$o(()=>{const le=Tr(rt.fromDom(window),"message",xe=>{if(D.isSameOrigin(new cK(xe.raw.origin))){const Me=xe.raw.data;MX(Me)?UJ(a,ie,Me):zJ(Me)&&t.onMessage(ie,Me)}});H.set(le)}),eu(H.clear)]),Ya.config({channels:{[n8]:{onReceive:(le,xe)=>{ko(le.element,"iframe").each(Me=>{const vt=Me.dom.contentWindow;fe(vt)&&vt.postMessage(xe,I)})}}}})],X=xX({id:u,header:f,body:m,footer:p,extraClasses:E,extraBehaviours:Q,extraStyles:C},v,l),ie=HJ(X);return{dialog:X,instanceApi:ie}},WJ=t=>{const s=t.shared;return{open:(l,u)=>{const f=()=>{ar.hide(C),u()},m=lo(k0({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:x.some("primary"),align:"end",enabled:!0,icon:x.none()},"cancel",t)),p=cX(),v=lX(f,s.providers),C=pa(rK({lazySink:()=>s.getSink(),header:iX(p,v),body:uX(l,s.providers),footer:x.some(dX(fX([],[m.asSpec()]))),onEscape:f,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Le(em,f)],eventOrder:{}}));ar.show(C);const E=m.get(C);tn.focus(E)}}},jJ=t=>{const s=t.shared;return{open:(l,u)=>{const f=I=>{ar.hide(E),u(I)},m=lo(k0({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:x.some("primary"),align:"end",enabled:!0,icon:x.none()},"submit",t)),p=k0({context:"any",name:"no",text:"No",primary:!1,buttonType:x.some("secondary"),align:"end",enabled:!0,icon:x.none()},"cancel",t),v=cX(),C=lX(()=>f(!1),s.providers),E=pa(rK({lazySink:()=>s.getSink(),header:iX(v,C),body:uX(l,s.providers),footer:x.some(dX(fX([],[p,m.asSpec()]))),onEscape:()=>f(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Le(em,()=>f(!1)),Le(_g,()=>f(!0))],eventOrder:{}}));ar.show(E);const D=m.get(E);tn.focus(D)}}},RX=(t,s)=>kl(gs("data",s,t)),PX=t=>E1(t,".tox-alert-dialog")||E1(t,".tox-confirm-dialog"),GJ=(t,s,a,l)=>s&&a?[]:[Qo.config({contextual:{lazyContext:()=>x.some($r(rt.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition",onHide:l},modes:["top"],lazyViewport:u=>Yf(t,u.element).map(m=>({bounds:Sg(m),optScrollEnv:x.some({currentScrollTop:m.element.dom.scrollTop,scrollElmTop:fc(m.element).top})})).getOrThunk(()=>({bounds:fa(),optScrollEnv:x.none()}))})],KJ=t=>{const s=t.editor,a=xp(s),l=WJ(t.backstages.dialog),u=jJ(t.backstages.dialog),f=(W,Q,se)=>{if(!ce(Q)){if(Q.inline==="toolbar")return C(W,t.backstages.popup.shared.anchors.inlineDialog(),se,Q);if(Q.inline==="bottom")return E(W,t.backstages.popup.shared.anchors.inlineBottomDialog(),se,Q);if(Q.inline==="cursor")return C(W,t.backstages.popup.shared.anchors.cursor(),se,Q)}return v(W,se)},m=(W,Q)=>p(W,Q),p=(W,Q)=>{const se=X=>{const ie=ZJ(X,{closeWindow:()=>{ar.hide(ie.dialog),Q(ie.instanceApi)}},s,t.backstages.dialog);return ar.show(ie.dialog),ie.instanceApi};return qd.openUrl(se,W)},v=(W,Q)=>{const se=(X,ie,le)=>{const xe=ie,vt=$J({dataValidator:le,initialData:xe,internalDialog:X},{redial:qd.redial,closeWindow:()=>{ar.hide(vt.dialog),Q(vt.instanceApi)}},t.backstages.dialog);return ar.show(vt.dialog),vt.instanceApi.setData(xe),vt.instanceApi};return qd.open(se,W)},C=(W,Q,se,X)=>{const ie=(le,xe,Me)=>{const vt=RX(xe,Me),Ge=dn(),Pe=t.backstages.popup.shared.header.isPositionedAtTop(),wt={dataValidator:Me,initialData:vt,internalDialog:le},Kt=()=>Ge.on(Ze=>{es.reposition(Ze),(!a||!Pe)&&Qo.refresh(Ze)}),Ft=DX(wt,{redial:qd.redial,closeWindow:()=>{Ge.on(es.hide),s.off("ResizeEditor",Kt),s.off("ScrollWindow",_n),Ge.clear(),se(Ft.instanceApi)}},t.backstages.popup,X.ariaAttrs,Kt),_n=()=>Ft.dialog.getSystem().broadcastOn([Vf()],{target:Ft.dialog.element}),rn=()=>Ft.dialog.getSystem().broadcastOn([Ju()],{target:Ft.dialog.element}),vn=pa(es.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:X.persistent?{event:"doNotDismissYet"}:{},...Pe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:qe([cn("window-manager-inline-events",[Le(Td(),(Ze,lt)=>{Zn(Ft.dialog,em)})]),...GJ(s,a,Pe,rn)]),isExtraPart:(Ze,lt)=>PX(lt)}));Ge.set(vn);const Pt=()=>{const Ze=s.inline?Aa():rt.fromDom(s.getContainer()),lt=$r(Ze);return x.some(lt)};return es.showWithinBounds(vn,tl(Ft.dialog),{anchor:Q},Pt),(!a||!Pe)&&(Qo.refresh(vn),s.on("ResizeEditor",Kt)),s.on("ScrollWindow",_n),Ft.instanceApi.setData(vt),It.focusIn(Ft.dialog),Ft.instanceApi};return qd.open(ie,W)},E=(W,Q,se,X)=>{const ie=(le,xe,Me)=>{const vt=RX(xe,Me),Ge=dn(),Pe=t.backstages.popup.shared.header.isPositionedAtTop(),wt={dataValidator:Me,initialData:vt,internalDialog:le},Kt=()=>Ge.on(vn=>{es.reposition(vn),Qo.refresh(vn)}),Ft=DX(wt,{redial:qd.redial,closeWindow:()=>{Ge.on(es.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Kt),Ge.clear(),se(Ft.instanceApi)}},t.backstages.popup,X.ariaAttrs,Kt),_n=pa(es.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:X.persistent?{event:"doNotDismissYet"}:{},...Pe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:qe([cn("window-manager-inline-events",[Le(Td(),(vn,Pt)=>{Zn(Ft.dialog,em)})]),Qo.config({contextual:{lazyContext:()=>x.some($r(rt.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:vn=>Yf(s,vn.element).map(Ze=>({bounds:Sg(Ze),optScrollEnv:x.some({currentScrollTop:Ze.element.dom.scrollTop,scrollElmTop:fc(Ze.element).top})})).getOrThunk(()=>({bounds:fa(),optScrollEnv:x.none()}))})]),isExtraPart:(vn,Pt)=>PX(Pt)}));Ge.set(_n);const rn=()=>t.backstages.popup.shared.getSink().toOptional().bind(vn=>{const Pt=Yf(s,vn.element),Ze=15,lt=Pt.map(Zt=>Sg(Zt)).getOr(fa()),Jt=$r(rt.fromDom(s.getContentAreaContainer())),bn=Ob(Jt,lt);return x.some(_s(bn.x,bn.y,bn.width,bn.height-Ze))});return es.showWithinBounds(_n,tl(Ft.dialog),{anchor:Q},rn),Qo.refresh(_n),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Kt),Ft.instanceApi.setData(vt),It.focusIn(Ft.dialog),Ft.instanceApi};return qd.open(ie,W)};return{open:f,openUrl:m,alert:(W,Q)=>{l.open(W,Q)},close:W=>{W.close()},confirm:(W,Q)=>{u.open(W,Q)}}},YJ=t=>{$6(t),jU(t),Hn(t)};var XJ=()=>{rV.add("silver",t=>{YJ(t);let s=()=>fa();const{dialogs:a,popups:l,renderUI:u}=oB(t,{getPopupSinkBounds:()=>s()}),f=()=>{const E=u();return Yf(t,l.getMothership().element).each(I=>{s=()=>Sg(I)}),E};yZ.register(t,l.backstage.shared);const m=KJ({editor:t,backstages:{popup:l.backstage,dialog:a.backstage}}),p=dn(),v=()=>l3(t,{backstage:l.backstage},l.getMothership(),p),C=()=>ko(rt.fromDom(t.getContainer()),".tox-promotion").map(E=>E.dom).getOrNull();return{renderUI:f,getWindowManagerImpl:te(m),getNotificationManagerImpl:v,getPromotionElement:C}})};XJ()})();var vJ={exports:{}};const Wee=hJ(Uee);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function JX(U,w){var F=Object.keys(U);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(U);w&&(T=T.filter(function(P){return Object.getOwnPropertyDescriptor(U,P).enumerable})),F.push.apply(F,T)}return F}function im(U){for(var w=1;w<arguments.length;w++){var F=arguments[w]!=null?arguments[w]:{};w%2?JX(Object(F),!0).forEach(function(T){jee(U,T,F[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(F)):JX(Object(F)).forEach(function(T){Object.defineProperty(U,T,Object.getOwnPropertyDescriptor(F,T))})}return U}function xB(U){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xB=function(w){return typeof w}:xB=function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},xB(U)}function jee(U,w,F){return w in U?Object.defineProperty(U,w,{value:F,enumerable:!0,configurable:!0,writable:!0}):U[w]=F,U}function dd(){return dd=Object.assign||function(U){for(var w=1;w<arguments.length;w++){var F=arguments[w];for(var T in F)Object.prototype.hasOwnProperty.call(F,T)&&(U[T]=F[T])}return U},dd.apply(this,arguments)}function Gee(U,w){if(U==null)return{};var F={},T=Object.keys(U),P,j;for(j=0;j<T.length;j++)P=T[j],!(w.indexOf(P)>=0)&&(F[P]=U[P]);return F}function Kee(U,w){if(U==null)return{};var F=Gee(U,w),T,P;if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(U);for(P=0;P<j.length;P++)T=j[P],!(w.indexOf(T)>=0)&&Object.prototype.propertyIsEnumerable.call(U,T)&&(F[T]=U[T])}return F}function Yee(U){return Xee(U)||Jee(U)||Qee(U)||qee()}function Xee(U){if(Array.isArray(U))return RK(U)}function Jee(U){if(typeof Symbol<"u"&&U[Symbol.iterator]!=null||U["@@iterator"]!=null)return Array.from(U)}function Qee(U,w){if(U){if(typeof U=="string")return RK(U,w);var F=Object.prototype.toString.call(U).slice(8,-1);if(F==="Object"&&U.constructor&&(F=U.constructor.name),F==="Map"||F==="Set")return Array.from(U);if(F==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(F))return RK(U,w)}}function RK(U,w){(w==null||w>U.length)&&(w=U.length);for(var F=0,T=new Array(w);F<w;F++)T[F]=U[F];return T}function qee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ete="1.14.0";function qg(U){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(U)}var eh=qg(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),tO=qg(/Edge/i),QX=qg(/firefox/i),XA=qg(/safari/i)&&!qg(/chrome/i)&&!qg(/android/i),bJ=qg(/iP(ad|od|hone)/i),tte=qg(/chrome/i)&&qg(/android/i),yJ={capture:!1,passive:!1};function ts(U,w,F){U.addEventListener(w,F,!eh&&yJ)}function Ho(U,w,F){U.removeEventListener(w,F,!eh&&yJ)}function OB(U,w){if(w){if(w[0]===">"&&(w=w.substring(1)),U)try{if(U.matches)return U.matches(w);if(U.msMatchesSelector)return U.msMatchesSelector(w);if(U.webkitMatchesSelector)return U.webkitMatchesSelector(w)}catch{return!1}return!1}}function nte(U){return U.host&&U!==document&&U.host.nodeType?U.host:U.parentNode}function lf(U,w,F,T){if(U){F=F||document;do{if(w!=null&&(w[0]===">"?U.parentNode===F&&OB(U,w):OB(U,w))||T&&U===F)return U;if(U===F)break}while(U=nte(U))}return null}var qX=/\s+/g;function Wr(U,w,F){if(U&&w)if(U.classList)U.classList[F?"add":"remove"](w);else{var T=(" "+U.className+" ").replace(qX," ").replace(" "+w+" "," ");U.className=(T+(F?" "+w:"")).replace(qX," ")}}function Bn(U,w,F){var T=U&&U.style;if(T){if(F===void 0)return document.defaultView&&document.defaultView.getComputedStyle?F=document.defaultView.getComputedStyle(U,""):U.currentStyle&&(F=U.currentStyle),w===void 0?F:F[w];!(w in T)&&w.indexOf("webkit")===-1&&(w="-webkit-"+w),T[w]=F+(typeof F=="string"?"":"px")}}function j0(U,w){var F="";if(typeof U=="string")F=U;else do{var T=Bn(U,"transform");T&&T!=="none"&&(F=T+" "+F)}while(!w&&(U=U.parentNode));var P=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return P&&new P(F)}function CJ(U,w,F){if(U){var T=U.getElementsByTagName(w),P=0,j=T.length;if(F)for(;P<j;P++)F(T[P],P);return T}return[]}function am(){var U=document.scrollingElement;return U||document.documentElement}function Nr(U,w,F,T,P){if(!(!U.getBoundingClientRect&&U!==window)){var j,S,B,O,z,K,J;if(U!==window&&U.parentNode&&U!==am()?(j=U.getBoundingClientRect(),S=j.top,B=j.left,O=j.bottom,z=j.right,K=j.height,J=j.width):(S=0,B=0,O=window.innerHeight,z=window.innerWidth,K=window.innerHeight,J=window.innerWidth),(w||F)&&U!==window&&(P=P||U.parentNode,!eh))do if(P&&P.getBoundingClientRect&&(Bn(P,"transform")!=="none"||F&&Bn(P,"position")!=="static")){var re=P.getBoundingClientRect();S-=re.top+parseInt(Bn(P,"border-top-width")),B-=re.left+parseInt(Bn(P,"border-left-width")),O=S+j.height,z=B+j.width;break}while(P=P.parentNode);if(T&&U!==window){var ce=j0(P||U),me=ce&&ce.a,fe=ce&&ce.d;ce&&(S/=fe,B/=me,J/=me,K/=fe,O=S+K,z=B+J)}return{top:S,left:B,bottom:O,right:z,width:J,height:K}}}function eJ(U,w,F){for(var T=c1(U,!0),P=Nr(U)[w];T;){var j=Nr(T)[F],S=void 0;if(S=P>=j,!S)return T;if(T===am())break;T=c1(T,!1)}return!1}function LS(U,w,F,T){for(var P=0,j=0,S=U.children;j<S.length;){if(S[j].style.display!=="none"&&S[j]!==fo.ghost&&(T||S[j]!==fo.dragged)&&lf(S[j],F.draggable,U,!1)){if(P===w)return S[j];P++}j++}return null}function LK(U,w){for(var F=U.lastElementChild;F&&(F===fo.ghost||Bn(F,"display")==="none"||w&&!OB(F,w));)F=F.previousElementSibling;return F||null}function aa(U,w){var F=0;if(!U||!U.parentNode)return-1;for(;U=U.previousElementSibling;)U.nodeName.toUpperCase()!=="TEMPLATE"&&U!==fo.clone&&(!w||OB(U,w))&&F++;return F}function tJ(U){var w=0,F=0,T=am();if(U)do{var P=j0(U),j=P.a,S=P.d;w+=U.scrollLeft*j,F+=U.scrollTop*S}while(U!==T&&(U=U.parentNode));return[w,F]}function ote(U,w){for(var F in U)if(U.hasOwnProperty(F)){for(var T in w)if(w.hasOwnProperty(T)&&w[T]===U[F][T])return Number(F)}return-1}function c1(U,w){if(!U||!U.getBoundingClientRect)return am();var F=U,T=!1;do if(F.clientWidth<F.scrollWidth||F.clientHeight<F.scrollHeight){var P=Bn(F);if(F.clientWidth<F.scrollWidth&&(P.overflowX=="auto"||P.overflowX=="scroll")||F.clientHeight<F.scrollHeight&&(P.overflowY=="auto"||P.overflowY=="scroll")){if(!F.getBoundingClientRect||F===document.body)return am();if(T||w)return F;T=!0}}while(F=F.parentNode);return am()}function ste(U,w){if(U&&w)for(var F in w)w.hasOwnProperty(F)&&(U[F]=w[F]);return U}function vK(U,w){return Math.round(U.top)===Math.round(w.top)&&Math.round(U.left)===Math.round(w.left)&&Math.round(U.height)===Math.round(w.height)&&Math.round(U.width)===Math.round(w.width)}var JA;function SJ(U,w){return function(){if(!JA){var F=arguments,T=this;F.length===1?U.call(T,F[0]):U.apply(T,F),JA=setTimeout(function(){JA=void 0},w)}}}function rte(){clearTimeout(JA),JA=void 0}function xJ(U,w,F){U.scrollLeft+=w,U.scrollTop+=F}function FK(U){var w=window.Polymer,F=window.jQuery||window.Zepto;return w&&w.dom?w.dom(U).cloneNode(!0):F?F(U).clone(!0)[0]:U.cloneNode(!0)}function nJ(U,w){Bn(U,"position","absolute"),Bn(U,"top",w.top),Bn(U,"left",w.left),Bn(U,"width",w.width),Bn(U,"height",w.height)}function bK(U){Bn(U,"position",""),Bn(U,"top",""),Bn(U,"left",""),Bn(U,"width",""),Bn(U,"height","")}var gl="Sortable"+new Date().getTime();function ate(){var U=[],w;return{captureAnimationState:function(){if(U=[],!!this.options.animation){var T=[].slice.call(this.el.children);T.forEach(function(P){if(!(Bn(P,"display")==="none"||P===fo.ghost)){U.push({target:P,rect:Nr(P)});var j=im({},U[U.length-1].rect);if(P.thisAnimationDuration){var S=j0(P,!0);S&&(j.top-=S.f,j.left-=S.e)}P.fromRect=j}})}},addAnimationState:function(T){U.push(T)},removeAnimationState:function(T){U.splice(ote(U,{target:T}),1)},animateAll:function(T){var P=this;if(!this.options.animation){clearTimeout(w),typeof T=="function"&&T();return}var j=!1,S=0;U.forEach(function(B){var O=0,z=B.target,K=z.fromRect,J=Nr(z),re=z.prevFromRect,ce=z.prevToRect,me=B.rect,fe=j0(z,!0);fe&&(J.top-=fe.f,J.left-=fe.e),z.toRect=J,z.thisAnimationDuration&&vK(re,J)&&!vK(K,J)&&(me.top-J.top)/(me.left-J.left)===(K.top-J.top)/(K.left-J.left)&&(O=lte(me,re,ce,P.options)),vK(J,K)||(z.prevFromRect=K,z.prevToRect=J,O||(O=P.options.animation),P.animate(z,me,J,O)),O&&(j=!0,S=Math.max(S,O),clearTimeout(z.animationResetTimer),z.animationResetTimer=setTimeout(function(){z.animationTime=0,z.prevFromRect=null,z.fromRect=null,z.prevToRect=null,z.thisAnimationDuration=null},O),z.thisAnimationDuration=O)}),clearTimeout(w),j?w=setTimeout(function(){typeof T=="function"&&T()},S):typeof T=="function"&&T(),U=[]},animate:function(T,P,j,S){if(S){Bn(T,"transition",""),Bn(T,"transform","");var B=j0(this.el),O=B&&B.a,z=B&&B.d,K=(P.left-j.left)/(O||1),J=(P.top-j.top)/(z||1);T.animatingX=!!K,T.animatingY=!!J,Bn(T,"transform","translate3d("+K+"px,"+J+"px,0)"),this.forRepaintDummy=ite(T),Bn(T,"transition","transform "+S+"ms"+(this.options.easing?" "+this.options.easing:"")),Bn(T,"transform","translate3d(0,0,0)"),typeof T.animated=="number"&&clearTimeout(T.animated),T.animated=setTimeout(function(){Bn(T,"transition",""),Bn(T,"transform",""),T.animated=!1,T.animatingX=!1,T.animatingY=!1},S)}}}}function ite(U){return U.offsetWidth}function lte(U,w,F,T){return Math.sqrt(Math.pow(w.top-U.top,2)+Math.pow(w.left-U.left,2))/Math.sqrt(Math.pow(w.top-F.top,2)+Math.pow(w.left-F.left,2))*T.animation}var RS=[],yK={initializeByDefault:!0},nO={mount:function(w){for(var F in yK)yK.hasOwnProperty(F)&&!(F in w)&&(w[F]=yK[F]);RS.forEach(function(T){if(T.pluginName===w.pluginName)throw"Sortable: Cannot mount plugin ".concat(w.pluginName," more than once")}),RS.push(w)},pluginEvent:function(w,F,T){var P=this;this.eventCanceled=!1,T.cancel=function(){P.eventCanceled=!0};var j=w+"Global";RS.forEach(function(S){F[S.pluginName]&&(F[S.pluginName][j]&&F[S.pluginName][j](im({sortable:F},T)),F.options[S.pluginName]&&F[S.pluginName][w]&&F[S.pluginName][w](im({sortable:F},T)))})},initializePlugins:function(w,F,T,P){RS.forEach(function(B){var O=B.pluginName;if(!(!w.options[O]&&!B.initializeByDefault)){var z=new B(w,F,w.options);z.sortable=w,z.options=w.options,w[O]=z,dd(T,z.defaults)}});for(var j in w.options)if(w.options.hasOwnProperty(j)){var S=this.modifyOption(w,j,w.options[j]);typeof S<"u"&&(w.options[j]=S)}},getEventProperties:function(w,F){var T={};return RS.forEach(function(P){typeof P.eventProperties=="function"&&dd(T,P.eventProperties.call(F[P.pluginName],w))}),T},modifyOption:function(w,F,T){var P;return RS.forEach(function(j){w[j.pluginName]&&j.optionListeners&&typeof j.optionListeners[F]=="function"&&(P=j.optionListeners[F].call(w[j.pluginName],T))}),P}};function jA(U){var w=U.sortable,F=U.rootEl,T=U.name,P=U.targetEl,j=U.cloneEl,S=U.toEl,B=U.fromEl,O=U.oldIndex,z=U.newIndex,K=U.oldDraggableIndex,J=U.newDraggableIndex,re=U.originalEvent,ce=U.putSortable,me=U.extraEventProperties;if(w=w||F&&F[gl],!!w){var fe,ye=w.options,Fe="on"+T.charAt(0).toUpperCase()+T.substr(1);window.CustomEvent&&!eh&&!tO?fe=new CustomEvent(T,{bubbles:!0,cancelable:!0}):(fe=document.createEvent("Event"),fe.initEvent(T,!0,!0)),fe.to=S||F,fe.from=B||F,fe.item=P||F,fe.clone=j,fe.oldIndex=O,fe.newIndex=z,fe.oldDraggableIndex=K,fe.newDraggableIndex=J,fe.originalEvent=re,fe.pullMode=ce?ce.lastPutMode:void 0;var pe=im(im({},me),nO.getEventProperties(T,w));for(var ee in pe)fe[ee]=pe[ee];F&&F.dispatchEvent(fe),ye[Fe]&&ye[Fe].call(w,fe)}}var cte=["evt"],Uc=function(w,F){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},P=T.evt,j=Kee(T,cte);nO.pluginEvent.bind(fo)(w,F,im({dragEl:qt,parentEl:sa,ghostEl:Eo,rootEl:Pr,nextEl:W0,lastDownEl:wB,cloneEl:ra,cloneHidden:l1,dragStarted:GA,putSortable:Vi,activeSortable:fo.active,originalEvent:P,oldIndex:BS,oldDraggableIndex:QA,newIndex:hu,newDraggableIndex:i1,hideGhostForTarget:AJ,unhideGhostForTarget:OJ,cloneNowHidden:function(){l1=!0},cloneNowShown:function(){l1=!1},dispatchSortableEvent:function(B){nc({sortable:F,name:B,originalEvent:P})}},j))};function nc(U){jA(im({putSortable:Vi,cloneEl:ra,targetEl:qt,rootEl:Pr,oldIndex:BS,oldDraggableIndex:QA,newIndex:hu,newDraggableIndex:i1},U))}var qt,sa,Eo,Pr,W0,wB,ra,l1,BS,hu,QA,i1,hB,Vi,IS=!1,kB=!1,DB=[],U0,rf,CK,SK,oJ,sJ,GA,PS,qA,eO=!1,pB=!1,EB,ml,xK=[],PK=!1,MB=[],PB=typeof document<"u",vB=bJ,rJ=tO||eh?"cssFloat":"float",ute=PB&&!tte&&!bJ&&"draggable"in document.createElement("div"),wJ=function(){if(PB){if(eh)return!1;var U=document.createElement("x");return U.style.cssText="pointer-events:auto",U.style.pointerEvents==="auto"}}(),EJ=function(w,F){var T=Bn(w),P=parseInt(T.width)-parseInt(T.paddingLeft)-parseInt(T.paddingRight)-parseInt(T.borderLeftWidth)-parseInt(T.borderRightWidth),j=LS(w,0,F),S=LS(w,1,F),B=j&&Bn(j),O=S&&Bn(S),z=B&&parseInt(B.marginLeft)+parseInt(B.marginRight)+Nr(j).width,K=O&&parseInt(O.marginLeft)+parseInt(O.marginRight)+Nr(S).width;if(T.display==="flex")return T.flexDirection==="column"||T.flexDirection==="column-reverse"?"vertical":"horizontal";if(T.display==="grid")return T.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(j&&B.float&&B.float!=="none"){var J=B.float==="left"?"left":"right";return S&&(O.clear==="both"||O.clear===J)?"vertical":"horizontal"}return j&&(B.display==="block"||B.display==="flex"||B.display==="table"||B.display==="grid"||z>=P&&T[rJ]==="none"||S&&T[rJ]==="none"&&z+K>P)?"vertical":"horizontal"},dte=function(w,F,T){var P=T?w.left:w.top,j=T?w.right:w.bottom,S=T?w.width:w.height,B=T?F.left:F.top,O=T?F.right:F.bottom,z=T?F.width:F.height;return P===B||j===O||P+S/2===B+z/2},fte=function(w,F){var T;return DB.some(function(P){var j=P[gl].options.emptyInsertThreshold;if(!(!j||LK(P))){var S=Nr(P),B=w>=S.left-j&&w<=S.right+j,O=F>=S.top-j&&F<=S.bottom+j;if(B&&O)return T=P}}),T},TJ=function(w){function F(j,S){return function(B,O,z,K){var J=B.options.group.name&&O.options.group.name&&B.options.group.name===O.options.group.name;if(j==null&&(S||J))return!0;if(j==null||j===!1)return!1;if(S&&j==="clone")return j;if(typeof j=="function")return F(j(B,O,z,K),S)(B,O,z,K);var re=(S?B:O).options.group.name;return j===!0||typeof j=="string"&&j===re||j.join&&j.indexOf(re)>-1}}var T={},P=w.group;(!P||xB(P)!="object")&&(P={name:P}),T.name=P.name,T.checkPull=F(P.pull,!0),T.checkPut=F(P.put),T.revertClone=P.revertClone,w.group=T},AJ=function(){!wJ&&Eo&&Bn(Eo,"display","none")},OJ=function(){!wJ&&Eo&&Bn(Eo,"display","")};PB&&document.addEventListener("click",function(U){if(kB)return U.preventDefault(),U.stopPropagation&&U.stopPropagation(),U.stopImmediatePropagation&&U.stopImmediatePropagation(),kB=!1,!1},!0);var Z0=function(w){if(qt){w=w.touches?w.touches[0]:w;var F=fte(w.clientX,w.clientY);if(F){var T={};for(var P in w)w.hasOwnProperty(P)&&(T[P]=w[P]);T.target=T.rootEl=F,T.preventDefault=void 0,T.stopPropagation=void 0,F[gl]._onDragOver(T)}}},mte=function(w){qt&&qt.parentNode[gl]._isOutsideThisEl(w.target)};function fo(U,w){if(!(U&&U.nodeType&&U.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(U));this.el=U,this.options=w=dd({},w),U[gl]=this;var F={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(U.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return EJ(U,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(S,B){S.setData("Text",B.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:fo.supportPointer!==!1&&"PointerEvent"in window&&!XA,emptyInsertThreshold:5};nO.initializePlugins(this,U,F);for(var T in F)!(T in w)&&(w[T]=F[T]);TJ(w);for(var P in this)P.charAt(0)==="_"&&typeof this[P]=="function"&&(this[P]=this[P].bind(this));this.nativeDraggable=w.forceFallback?!1:ute,this.nativeDraggable&&(this.options.touchStartThreshold=1),w.supportPointer?ts(U,"pointerdown",this._onTapStart):(ts(U,"mousedown",this._onTapStart),ts(U,"touchstart",this._onTapStart)),this.nativeDraggable&&(ts(U,"dragover",this),ts(U,"dragenter",this)),DB.push(this.el),w.store&&w.store.get&&this.sort(w.store.get(this)||[]),dd(this,ate())}fo.prototype={constructor:fo,_isOutsideThisEl:function(w){!this.el.contains(w)&&w!==this.el&&(PS=null)},_getDirection:function(w,F){return typeof this.options.direction=="function"?this.options.direction.call(this,w,F,qt):this.options.direction},_onTapStart:function(w){if(w.cancelable){var F=this,T=this.el,P=this.options,j=P.preventOnFilter,S=w.type,B=w.touches&&w.touches[0]||w.pointerType&&w.pointerType==="touch"&&w,O=(B||w).target,z=w.target.shadowRoot&&(w.path&&w.path[0]||w.composedPath&&w.composedPath()[0])||O,K=P.filter;if(Ste(T),!qt&&!(/mousedown|pointerdown/.test(S)&&w.button!==0||P.disabled)&&!z.isContentEditable&&!(!this.nativeDraggable&&XA&&O&&O.tagName.toUpperCase()==="SELECT")&&(O=lf(O,P.draggable,T,!1),!(O&&O.animated)&&wB!==O)){if(BS=aa(O),QA=aa(O,P.draggable),typeof K=="function"){if(K.call(this,w,O,this)){nc({sortable:F,rootEl:z,name:"filter",targetEl:O,toEl:T,fromEl:T}),Uc("filter",F,{evt:w}),j&&w.cancelable&&w.preventDefault();return}}else if(K&&(K=K.split(",").some(function(J){if(J=lf(z,J.trim(),T,!1),J)return nc({sortable:F,rootEl:J,name:"filter",targetEl:O,fromEl:T,toEl:T}),Uc("filter",F,{evt:w}),!0}),K)){j&&w.cancelable&&w.preventDefault();return}P.handle&&!lf(z,P.handle,T,!1)||this._prepareDragStart(w,B,O)}}},_prepareDragStart:function(w,F,T){var P=this,j=P.el,S=P.options,B=j.ownerDocument,O;if(T&&!qt&&T.parentNode===j){var z=Nr(T);if(Pr=j,qt=T,sa=qt.parentNode,W0=qt.nextSibling,wB=T,hB=S.group,fo.dragged=qt,U0={target:qt,clientX:(F||w).clientX,clientY:(F||w).clientY},oJ=U0.clientX-z.left,sJ=U0.clientY-z.top,this._lastX=(F||w).clientX,this._lastY=(F||w).clientY,qt.style["will-change"]="all",O=function(){if(Uc("delayEnded",P,{evt:w}),fo.eventCanceled){P._onDrop();return}P._disableDelayedDragEvents(),!QX&&P.nativeDraggable&&(qt.draggable=!0),P._triggerDragStart(w,F),nc({sortable:P,name:"choose",originalEvent:w}),Wr(qt,S.chosenClass,!0)},S.ignore.split(",").forEach(function(K){CJ(qt,K.trim(),wK)}),ts(B,"dragover",Z0),ts(B,"mousemove",Z0),ts(B,"touchmove",Z0),ts(B,"mouseup",P._onDrop),ts(B,"touchend",P._onDrop),ts(B,"touchcancel",P._onDrop),QX&&this.nativeDraggable&&(this.options.touchStartThreshold=4,qt.draggable=!0),Uc("delayStart",this,{evt:w}),S.delay&&(!S.delayOnTouchOnly||F)&&(!this.nativeDraggable||!(tO||eh))){if(fo.eventCanceled){this._onDrop();return}ts(B,"mouseup",P._disableDelayedDrag),ts(B,"touchend",P._disableDelayedDrag),ts(B,"touchcancel",P._disableDelayedDrag),ts(B,"mousemove",P._delayedDragTouchMoveHandler),ts(B,"touchmove",P._delayedDragTouchMoveHandler),S.supportPointer&&ts(B,"pointermove",P._delayedDragTouchMoveHandler),P._dragStartTimer=setTimeout(O,S.delay)}else O()}},_delayedDragTouchMoveHandler:function(w){var F=w.touches?w.touches[0]:w;Math.max(Math.abs(F.clientX-this._lastX),Math.abs(F.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){qt&&wK(qt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var w=this.el.ownerDocument;Ho(w,"mouseup",this._disableDelayedDrag),Ho(w,"touchend",this._disableDelayedDrag),Ho(w,"touchcancel",this._disableDelayedDrag),Ho(w,"mousemove",this._delayedDragTouchMoveHandler),Ho(w,"touchmove",this._delayedDragTouchMoveHandler),Ho(w,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(w,F){F=F||w.pointerType=="touch"&&w,!this.nativeDraggable||F?this.options.supportPointer?ts(document,"pointermove",this._onTouchMove):F?ts(document,"touchmove",this._onTouchMove):ts(document,"mousemove",this._onTouchMove):(ts(qt,"dragend",this),ts(Pr,"dragstart",this._onDragStart));try{document.selection?TB(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(w,F){if(IS=!1,Pr&&qt){Uc("dragStarted",this,{evt:F}),this.nativeDraggable&&ts(document,"dragover",mte);var T=this.options;!w&&Wr(qt,T.dragClass,!1),Wr(qt,T.ghostClass,!0),fo.active=this,w&&this._appendGhost(),nc({sortable:this,name:"start",originalEvent:F})}else this._nulling()},_emulateDragOver:function(){if(rf){this._lastX=rf.clientX,this._lastY=rf.clientY,AJ();for(var w=document.elementFromPoint(rf.clientX,rf.clientY),F=w;w&&w.shadowRoot&&(w=w.shadowRoot.elementFromPoint(rf.clientX,rf.clientY),w!==F);)F=w;if(qt.parentNode[gl]._isOutsideThisEl(w),F)do{if(F[gl]){var T=void 0;if(T=F[gl]._onDragOver({clientX:rf.clientX,clientY:rf.clientY,target:w,rootEl:F}),T&&!this.options.dragoverBubble)break}w=F}while(F=F.parentNode);OJ()}},_onTouchMove:function(w){if(U0){var F=this.options,T=F.fallbackTolerance,P=F.fallbackOffset,j=w.touches?w.touches[0]:w,S=Eo&&j0(Eo,!0),B=Eo&&S&&S.a,O=Eo&&S&&S.d,z=vB&&ml&&tJ(ml),K=(j.clientX-U0.clientX+P.x)/(B||1)+(z?z[0]-xK[0]:0)/(B||1),J=(j.clientY-U0.clientY+P.y)/(O||1)+(z?z[1]-xK[1]:0)/(O||1);if(!fo.active&&!IS){if(T&&Math.max(Math.abs(j.clientX-this._lastX),Math.abs(j.clientY-this._lastY))<T)return;this._onDragStart(w,!0)}if(Eo){S?(S.e+=K-(CK||0),S.f+=J-(SK||0)):S={a:1,b:0,c:0,d:1,e:K,f:J};var re="matrix(".concat(S.a,",").concat(S.b,",").concat(S.c,",").concat(S.d,",").concat(S.e,",").concat(S.f,")");Bn(Eo,"webkitTransform",re),Bn(Eo,"mozTransform",re),Bn(Eo,"msTransform",re),Bn(Eo,"transform",re),CK=K,SK=J,rf=j}w.cancelable&&w.preventDefault()}},_appendGhost:function(){if(!Eo){var w=this.options.fallbackOnBody?document.body:Pr,F=Nr(qt,!0,vB,!0,w),T=this.options;if(vB){for(ml=w;Bn(ml,"position")==="static"&&Bn(ml,"transform")==="none"&&ml!==document;)ml=ml.parentNode;ml!==document.body&&ml!==document.documentElement?(ml===document&&(ml=am()),F.top+=ml.scrollTop,F.left+=ml.scrollLeft):ml=am(),xK=tJ(ml)}Eo=qt.cloneNode(!0),Wr(Eo,T.ghostClass,!1),Wr(Eo,T.fallbackClass,!0),Wr(Eo,T.dragClass,!0),Bn(Eo,"transition",""),Bn(Eo,"transform",""),Bn(Eo,"box-sizing","border-box"),Bn(Eo,"margin",0),Bn(Eo,"top",F.top),Bn(Eo,"left",F.left),Bn(Eo,"width",F.width),Bn(Eo,"height",F.height),Bn(Eo,"opacity","0.8"),Bn(Eo,"position",vB?"absolute":"fixed"),Bn(Eo,"zIndex","100000"),Bn(Eo,"pointerEvents","none"),fo.ghost=Eo,w.appendChild(Eo),Bn(Eo,"transform-origin",oJ/parseInt(Eo.style.width)*100+"% "+sJ/parseInt(Eo.style.height)*100+"%")}},_onDragStart:function(w,F){var T=this,P=w.dataTransfer,j=T.options;if(Uc("dragStart",this,{evt:w}),fo.eventCanceled){this._onDrop();return}Uc("setupClone",this),fo.eventCanceled||(ra=FK(qt),ra.draggable=!1,ra.style["will-change"]="",this._hideClone(),Wr(ra,this.options.chosenClass,!1),fo.clone=ra),T.cloneId=TB(function(){Uc("clone",T),!fo.eventCanceled&&(T.options.removeCloneOnHide||Pr.insertBefore(ra,qt),T._hideClone(),nc({sortable:T,name:"clone"}))}),!F&&Wr(qt,j.dragClass,!0),F?(kB=!0,T._loopId=setInterval(T._emulateDragOver,50)):(Ho(document,"mouseup",T._onDrop),Ho(document,"touchend",T._onDrop),Ho(document,"touchcancel",T._onDrop),P&&(P.effectAllowed="move",j.setData&&j.setData.call(T,P,qt)),ts(document,"drop",T),Bn(qt,"transform","translateZ(0)")),IS=!0,T._dragStartId=TB(T._dragStarted.bind(T,F,w)),ts(document,"selectstart",T),GA=!0,XA&&Bn(document.body,"user-select","none")},_onDragOver:function(w){var F=this.el,T=w.target,P,j,S,B=this.options,O=B.group,z=fo.active,K=hB===O,J=B.sort,re=Vi||z,ce,me=this,fe=!1;if(PK)return;function ye(Ye,Xn){Uc(Ye,me,im({evt:w,isOwner:K,axis:ce?"vertical":"horizontal",revert:S,dragRect:P,targetRect:j,canSort:J,fromSortable:re,target:T,completed:pe,onMove:function(ht,An){return bB(Pr,F,qt,P,ht,Nr(ht),w,An)},changed:ee},Xn))}function Fe(){ye("dragOverAnimationCapture"),me.captureAnimationState(),me!==re&&re.captureAnimationState()}function pe(Ye){return ye("dragOverCompleted",{insertion:Ye}),Ye&&(K?z._hideClone():z._showClone(me),me!==re&&(Wr(qt,Vi?Vi.options.ghostClass:z.options.ghostClass,!1),Wr(qt,B.ghostClass,!0)),Vi!==me&&me!==fo.active?Vi=me:me===fo.active&&Vi&&(Vi=null),re===me&&(me._ignoreWhileAnimating=T),me.animateAll(function(){ye("dragOverAnimationComplete"),me._ignoreWhileAnimating=null}),me!==re&&(re.animateAll(),re._ignoreWhileAnimating=null)),(T===qt&&!qt.animated||T===F&&!T.animated)&&(PS=null),!B.dragoverBubble&&!w.rootEl&&T!==document&&(qt.parentNode[gl]._isOutsideThisEl(w.target),!Ye&&Z0(w)),!B.dragoverBubble&&w.stopPropagation&&w.stopPropagation(),fe=!0}function ee(){hu=aa(qt),i1=aa(qt,B.draggable),nc({sortable:me,name:"change",toEl:F,newIndex:hu,newDraggableIndex:i1,originalEvent:w})}if(w.preventDefault!==void 0&&w.cancelable&&w.preventDefault(),T=lf(T,B.draggable,F,!0),ye("dragOver"),fo.eventCanceled)return fe;if(qt.contains(w.target)||T.animated&&T.animatingX&&T.animatingY||me._ignoreWhileAnimating===T)return pe(!1);if(kB=!1,z&&!B.disabled&&(K?J||(S=sa!==Pr):Vi===this||(this.lastPutMode=hB.checkPull(this,z,qt,w))&&O.checkPut(this,z,qt,w))){if(ce=this._getDirection(w,T)==="vertical",P=Nr(qt),ye("dragOverValid"),fo.eventCanceled)return fe;if(S)return sa=Pr,Fe(),this._hideClone(),ye("revert"),fo.eventCanceled||(W0?Pr.insertBefore(qt,W0):Pr.appendChild(qt)),pe(!0);var we=LK(F,B.draggable);if(!we||vte(w,ce,this)&&!we.animated){if(we===qt)return pe(!1);if(we&&F===w.target&&(T=we),T&&(j=Nr(T)),bB(Pr,F,qt,P,T,j,w,!!T)!==!1)return Fe(),F.appendChild(qt),sa=F,ee(),pe(!0)}else if(we&&pte(w,ce,this)){var bt=LS(F,0,B,!0);if(bt===qt)return pe(!1);if(T=bt,j=Nr(T),bB(Pr,F,qt,P,T,j,w,!1)!==!1)return Fe(),F.insertBefore(qt,bt),sa=F,ee(),pe(!0)}else if(T.parentNode===F){j=Nr(T);var Ke=0,te,ct=qt.parentNode!==F,Je=!dte(qt.animated&&qt.toRect||P,T.animated&&T.toRect||j,ce),dt=ce?"top":"left",Ce=eJ(T,"top","top")||eJ(qt,"top","top"),Tt=Ce?Ce.scrollTop:void 0;PS!==T&&(te=j[dt],eO=!1,pB=!Je&&B.invertSwap||ct),Ke=bte(w,T,j,ce,Je?1:B.swapThreshold,B.invertedSwapThreshold==null?B.swapThreshold:B.invertedSwapThreshold,pB,PS===T);var St;if(Ke!==0){var it=aa(qt);do it-=Ke,St=sa.children[it];while(St&&(Bn(St,"display")==="none"||St===Eo))}if(Ke===0||St===T)return pe(!1);PS=T,qA=Ke;var et=T.nextElementSibling,x=!1;x=Ke===1;var pn=bB(Pr,F,qt,P,T,j,w,x);if(pn!==!1)return(pn===1||pn===-1)&&(x=pn===1),PK=!0,setTimeout(hte,30),Fe(),x&&!et?F.appendChild(qt):T.parentNode.insertBefore(qt,x?et:T),Ce&&xJ(Ce,0,Tt-Ce.scrollTop),sa=qt.parentNode,te!==void 0&&!pB&&(EB=Math.abs(te-Nr(T)[dt])),ee(),pe(!0)}if(F.contains(qt))return pe(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Ho(document,"mousemove",this._onTouchMove),Ho(document,"touchmove",this._onTouchMove),Ho(document,"pointermove",this._onTouchMove),Ho(document,"dragover",Z0),Ho(document,"mousemove",Z0),Ho(document,"touchmove",Z0)},_offUpEvents:function(){var w=this.el.ownerDocument;Ho(w,"mouseup",this._onDrop),Ho(w,"touchend",this._onDrop),Ho(w,"pointerup",this._onDrop),Ho(w,"touchcancel",this._onDrop),Ho(document,"selectstart",this)},_onDrop:function(w){var F=this.el,T=this.options;if(hu=aa(qt),i1=aa(qt,T.draggable),Uc("drop",this,{evt:w}),sa=qt&&qt.parentNode,hu=aa(qt),i1=aa(qt,T.draggable),fo.eventCanceled){this._nulling();return}IS=!1,pB=!1,eO=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),NK(this.cloneId),NK(this._dragStartId),this.nativeDraggable&&(Ho(document,"drop",this),Ho(F,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),XA&&Bn(document.body,"user-select",""),Bn(qt,"transform",""),w&&(GA&&(w.cancelable&&w.preventDefault(),!T.dropBubble&&w.stopPropagation()),Eo&&Eo.parentNode&&Eo.parentNode.removeChild(Eo),(Pr===sa||Vi&&Vi.lastPutMode!=="clone")&&ra&&ra.parentNode&&ra.parentNode.removeChild(ra),qt&&(this.nativeDraggable&&Ho(qt,"dragend",this),wK(qt),qt.style["will-change"]="",GA&&!IS&&Wr(qt,Vi?Vi.options.ghostClass:this.options.ghostClass,!1),Wr(qt,this.options.chosenClass,!1),nc({sortable:this,name:"unchoose",toEl:sa,newIndex:null,newDraggableIndex:null,originalEvent:w}),Pr!==sa?(hu>=0&&(nc({rootEl:sa,name:"add",toEl:sa,fromEl:Pr,originalEvent:w}),nc({sortable:this,name:"remove",toEl:sa,originalEvent:w}),nc({rootEl:sa,name:"sort",toEl:sa,fromEl:Pr,originalEvent:w}),nc({sortable:this,name:"sort",toEl:sa,originalEvent:w})),Vi&&Vi.save()):hu!==BS&&hu>=0&&(nc({sortable:this,name:"update",toEl:sa,originalEvent:w}),nc({sortable:this,name:"sort",toEl:sa,originalEvent:w})),fo.active&&((hu==null||hu===-1)&&(hu=BS,i1=QA),nc({sortable:this,name:"end",toEl:sa,originalEvent:w}),this.save()))),this._nulling()},_nulling:function(){Uc("nulling",this),Pr=qt=sa=Eo=W0=ra=wB=l1=U0=rf=GA=hu=i1=BS=QA=PS=qA=Vi=hB=fo.dragged=fo.ghost=fo.clone=fo.active=null,MB.forEach(function(w){w.checked=!0}),MB.length=CK=SK=0},handleEvent:function(w){switch(w.type){case"drop":case"dragend":this._onDrop(w);break;case"dragenter":case"dragover":qt&&(this._onDragOver(w),gte(w));break;case"selectstart":w.preventDefault();break}},toArray:function(){for(var w=[],F,T=this.el.children,P=0,j=T.length,S=this.options;P<j;P++)F=T[P],lf(F,S.draggable,this.el,!1)&&w.push(F.getAttribute(S.dataIdAttr)||Cte(F));return w},sort:function(w,F){var T={},P=this.el;this.toArray().forEach(function(j,S){var B=P.children[S];lf(B,this.options.draggable,P,!1)&&(T[j]=B)},this),F&&this.captureAnimationState(),w.forEach(function(j){T[j]&&(P.removeChild(T[j]),P.appendChild(T[j]))}),F&&this.animateAll()},save:function(){var w=this.options.store;w&&w.set&&w.set(this)},closest:function(w,F){return lf(w,F||this.options.draggable,this.el,!1)},option:function(w,F){var T=this.options;if(F===void 0)return T[w];var P=nO.modifyOption(this,w,F);typeof P<"u"?T[w]=P:T[w]=F,w==="group"&&TJ(T)},destroy:function(){Uc("destroy",this);var w=this.el;w[gl]=null,Ho(w,"mousedown",this._onTapStart),Ho(w,"touchstart",this._onTapStart),Ho(w,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ho(w,"dragover",this),Ho(w,"dragenter",this)),Array.prototype.forEach.call(w.querySelectorAll("[draggable]"),function(F){F.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),DB.splice(DB.indexOf(this.el),1),this.el=w=null},_hideClone:function(){if(!l1){if(Uc("hideClone",this),fo.eventCanceled)return;Bn(ra,"display","none"),this.options.removeCloneOnHide&&ra.parentNode&&ra.parentNode.removeChild(ra),l1=!0}},_showClone:function(w){if(w.lastPutMode!=="clone"){this._hideClone();return}if(l1){if(Uc("showClone",this),fo.eventCanceled)return;qt.parentNode==Pr&&!this.options.group.revertClone?Pr.insertBefore(ra,qt):W0?Pr.insertBefore(ra,W0):Pr.appendChild(ra),this.options.group.revertClone&&this.animate(qt,ra),Bn(ra,"display",""),l1=!1}}};function gte(U){U.dataTransfer&&(U.dataTransfer.dropEffect="move"),U.cancelable&&U.preventDefault()}function bB(U,w,F,T,P,j,S,B){var O,z=U[gl],K=z.options.onMove,J;return window.CustomEvent&&!eh&&!tO?O=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(O=document.createEvent("Event"),O.initEvent("move",!0,!0)),O.to=w,O.from=U,O.dragged=F,O.draggedRect=T,O.related=P||w,O.relatedRect=j||Nr(w),O.willInsertAfter=B,O.originalEvent=S,U.dispatchEvent(O),K&&(J=K.call(z,O,S)),J}function wK(U){U.draggable=!1}function hte(){PK=!1}function pte(U,w,F){var T=Nr(LS(F.el,0,F.options,!0)),P=10;return w?U.clientX<T.left-P||U.clientY<T.top&&U.clientX<T.right:U.clientY<T.top-P||U.clientY<T.bottom&&U.clientX<T.left}function vte(U,w,F){var T=Nr(LK(F.el,F.options.draggable)),P=10;return w?U.clientX>T.right+P||U.clientX<=T.right&&U.clientY>T.bottom&&U.clientX>=T.left:U.clientX>T.right&&U.clientY>T.top||U.clientX<=T.right&&U.clientY>T.bottom+P}function bte(U,w,F,T,P,j,S,B){var O=T?U.clientY:U.clientX,z=T?F.height:F.width,K=T?F.top:F.left,J=T?F.bottom:F.right,re=!1;if(!S){if(B&&EB<z*P){if(!eO&&(qA===1?O>K+z*j/2:O<J-z*j/2)&&(eO=!0),eO)re=!0;else if(qA===1?O<K+EB:O>J-EB)return-qA}else if(O>K+z*(1-P)/2&&O<J-z*(1-P)/2)return yte(w)}return re=re||S,re&&(O<K+z*j/2||O>J-z*j/2)?O>K+z/2?1:-1:0}function yte(U){return aa(qt)<aa(U)?1:-1}function Cte(U){for(var w=U.tagName+U.className+U.src+U.href+U.textContent,F=w.length,T=0;F--;)T+=w.charCodeAt(F);return T.toString(36)}function Ste(U){MB.length=0;for(var w=U.getElementsByTagName("input"),F=w.length;F--;){var T=w[F];T.checked&&MB.push(T)}}function TB(U){return setTimeout(U,0)}function NK(U){return clearTimeout(U)}PB&&ts(document,"touchmove",function(U){(fo.active||IS)&&U.cancelable&&U.preventDefault()});fo.utils={on:ts,off:Ho,css:Bn,find:CJ,is:function(w,F){return!!lf(w,F,w,!1)},extend:ste,throttle:SJ,closest:lf,toggleClass:Wr,clone:FK,index:aa,nextTick:TB,cancelNextTick:NK,detectDirection:EJ,getChild:LS};fo.get=function(U){return U[gl]};fo.mount=function(){for(var U=arguments.length,w=new Array(U),F=0;F<U;F++)w[F]=arguments[F];w[0].constructor===Array&&(w=w[0]),w.forEach(function(T){if(!T.prototype||!T.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(T));T.utils&&(fo.utils=im(im({},fo.utils),T.utils)),nO.mount(T)})};fo.create=function(U,w){return new fo(U,w)};fo.version=ete;var Va=[],KA,IK,BK=!1,EK,TK,RB,YA;function xte(){function U(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var w in this)w.charAt(0)==="_"&&typeof this[w]=="function"&&(this[w]=this[w].bind(this))}return U.prototype={dragStarted:function(F){var T=F.originalEvent;this.sortable.nativeDraggable?ts(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ts(document,"pointermove",this._handleFallbackAutoScroll):T.touches?ts(document,"touchmove",this._handleFallbackAutoScroll):ts(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(F){var T=F.originalEvent;!this.options.dragOverBubble&&!T.rootEl&&this._handleAutoScroll(T)},drop:function(){this.sortable.nativeDraggable?Ho(document,"dragover",this._handleAutoScroll):(Ho(document,"pointermove",this._handleFallbackAutoScroll),Ho(document,"touchmove",this._handleFallbackAutoScroll),Ho(document,"mousemove",this._handleFallbackAutoScroll)),aJ(),AB(),rte()},nulling:function(){RB=IK=KA=BK=YA=EK=TK=null,Va.length=0},_handleFallbackAutoScroll:function(F){this._handleAutoScroll(F,!0)},_handleAutoScroll:function(F,T){var P=this,j=(F.touches?F.touches[0]:F).clientX,S=(F.touches?F.touches[0]:F).clientY,B=document.elementFromPoint(j,S);if(RB=F,T||this.options.forceAutoScrollFallback||tO||eh||XA){AK(F,this.options,B,T);var O=c1(B,!0);BK&&(!YA||j!==EK||S!==TK)&&(YA&&aJ(),YA=setInterval(function(){var z=c1(document.elementFromPoint(j,S),!0);z!==O&&(O=z,AB()),AK(F,P.options,z,T)},10),EK=j,TK=S)}else{if(!this.options.bubbleScroll||c1(B,!0)===am()){AB();return}AK(F,this.options,c1(B,!1),!1)}}},dd(U,{pluginName:"scroll",initializeByDefault:!0})}function AB(){Va.forEach(function(U){clearInterval(U.pid)}),Va=[]}function aJ(){clearInterval(YA)}var AK=SJ(function(U,w,F,T){if(w.scroll){var P=(U.touches?U.touches[0]:U).clientX,j=(U.touches?U.touches[0]:U).clientY,S=w.scrollSensitivity,B=w.scrollSpeed,O=am(),z=!1,K;IK!==F&&(IK=F,AB(),KA=w.scroll,K=w.scrollFn,KA===!0&&(KA=c1(F,!0)));var J=0,re=KA;do{var ce=re,me=Nr(ce),fe=me.top,ye=me.bottom,Fe=me.left,pe=me.right,ee=me.width,we=me.height,bt=void 0,Ke=void 0,te=ce.scrollWidth,ct=ce.scrollHeight,Je=Bn(ce),dt=ce.scrollLeft,Ce=ce.scrollTop;ce===O?(bt=ee<te&&(Je.overflowX==="auto"||Je.overflowX==="scroll"||Je.overflowX==="visible"),Ke=we<ct&&(Je.overflowY==="auto"||Je.overflowY==="scroll"||Je.overflowY==="visible")):(bt=ee<te&&(Je.overflowX==="auto"||Je.overflowX==="scroll"),Ke=we<ct&&(Je.overflowY==="auto"||Je.overflowY==="scroll"));var Tt=bt&&(Math.abs(pe-P)<=S&&dt+ee<te)-(Math.abs(Fe-P)<=S&&!!dt),St=Ke&&(Math.abs(ye-j)<=S&&Ce+we<ct)-(Math.abs(fe-j)<=S&&!!Ce);if(!Va[J])for(var it=0;it<=J;it++)Va[it]||(Va[it]={});(Va[J].vx!=Tt||Va[J].vy!=St||Va[J].el!==ce)&&(Va[J].el=ce,Va[J].vx=Tt,Va[J].vy=St,clearInterval(Va[J].pid),(Tt!=0||St!=0)&&(z=!0,Va[J].pid=setInterval((function(){T&&this.layer===0&&fo.active._onTouchMove(RB);var et=Va[this.layer].vy?Va[this.layer].vy*B:0,x=Va[this.layer].vx?Va[this.layer].vx*B:0;typeof K=="function"&&K.call(fo.dragged.parentNode[gl],x,et,U,RB,Va[this.layer].el)!=="continue"||xJ(Va[this.layer].el,x,et)}).bind({layer:J}),24))),J++}while(w.bubbleScroll&&re!==O&&(re=c1(re,!1)));BK=z}},30),kJ=function(w){var F=w.originalEvent,T=w.putSortable,P=w.dragEl,j=w.activeSortable,S=w.dispatchSortableEvent,B=w.hideGhostForTarget,O=w.unhideGhostForTarget;if(F){var z=T||j;B();var K=F.changedTouches&&F.changedTouches.length?F.changedTouches[0]:F,J=document.elementFromPoint(K.clientX,K.clientY);O(),z&&!z.el.contains(J)&&(S("spill"),this.onSpill({dragEl:P,putSortable:T}))}};function _K(){}_K.prototype={startIndex:null,dragStart:function(w){var F=w.oldDraggableIndex;this.startIndex=F},onSpill:function(w){var F=w.dragEl,T=w.putSortable;this.sortable.captureAnimationState(),T&&T.captureAnimationState();var P=LS(this.sortable.el,this.startIndex,this.options);P?this.sortable.el.insertBefore(F,P):this.sortable.el.appendChild(F),this.sortable.animateAll(),T&&T.animateAll()},drop:kJ};dd(_K,{pluginName:"revertOnSpill"});function $K(){}$K.prototype={onSpill:function(w){var F=w.dragEl,T=w.putSortable,P=T||this.sortable;P.captureAnimationState(),F.parentNode&&F.parentNode.removeChild(F),P.animateAll()},drop:kJ};dd($K,{pluginName:"removeOnSpill"});var cd;function wte(){function U(){this.defaults={swapClass:"sortable-swap-highlight"}}return U.prototype={dragStart:function(F){var T=F.dragEl;cd=T},dragOverValid:function(F){var T=F.completed,P=F.target,j=F.onMove,S=F.activeSortable,B=F.changed,O=F.cancel;if(S.options.swap){var z=this.sortable.el,K=this.options;if(P&&P!==z){var J=cd;j(P)!==!1?(Wr(P,K.swapClass,!0),cd=P):cd=null,J&&J!==cd&&Wr(J,K.swapClass,!1)}B(),T(!0),O()}},drop:function(F){var T=F.activeSortable,P=F.putSortable,j=F.dragEl,S=P||this.sortable,B=this.options;cd&&Wr(cd,B.swapClass,!1),cd&&(B.swap||P&&P.options.swap)&&j!==cd&&(S.captureAnimationState(),S!==T&&T.captureAnimationState(),Ete(j,cd),S.animateAll(),S!==T&&T.animateAll())},nulling:function(){cd=null}},dd(U,{pluginName:"swap",eventProperties:function(){return{swapItem:cd}}})}function Ete(U,w){var F=U.parentNode,T=w.parentNode,P,j;!F||!T||F.isEqualNode(w)||T.isEqualNode(U)||(P=aa(U),j=aa(w),F.isEqualNode(T)&&P<j&&j++,F.insertBefore(w,F.children[P]),T.insertBefore(U,T.children[j]))}var yo=[],gu=[],VA,af,zA=!1,Zc=!1,NS=!1,cr,UA,yB;function Tte(){function U(w){for(var F in this)F.charAt(0)==="_"&&typeof this[F]=="function"&&(this[F]=this[F].bind(this));w.options.supportPointer?ts(document,"pointerup",this._deselectMultiDrag):(ts(document,"mouseup",this._deselectMultiDrag),ts(document,"touchend",this._deselectMultiDrag)),ts(document,"keydown",this._checkKeyDown),ts(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(P,j){var S="";yo.length&&af===w?yo.forEach(function(B,O){S+=(O?", ":"")+B.textContent}):S=j.textContent,P.setData("Text",S)}}}return U.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(F){var T=F.dragEl;cr=T},delayEnded:function(){this.isMultiDrag=~yo.indexOf(cr)},setupClone:function(F){var T=F.sortable,P=F.cancel;if(this.isMultiDrag){for(var j=0;j<yo.length;j++)gu.push(FK(yo[j])),gu[j].sortableIndex=yo[j].sortableIndex,gu[j].draggable=!1,gu[j].style["will-change"]="",Wr(gu[j],this.options.selectedClass,!1),yo[j]===cr&&Wr(gu[j],this.options.chosenClass,!1);T._hideClone(),P()}},clone:function(F){var T=F.sortable,P=F.rootEl,j=F.dispatchSortableEvent,S=F.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||yo.length&&af===T&&(iJ(!0,P),j("clone"),S()))},showClone:function(F){var T=F.cloneNowShown,P=F.rootEl,j=F.cancel;this.isMultiDrag&&(iJ(!1,P),gu.forEach(function(S){Bn(S,"display","")}),T(),yB=!1,j())},hideClone:function(F){var T=this;F.sortable;var P=F.cloneNowHidden,j=F.cancel;this.isMultiDrag&&(gu.forEach(function(S){Bn(S,"display","none"),T.options.removeCloneOnHide&&S.parentNode&&S.parentNode.removeChild(S)}),P(),yB=!0,j())},dragStartGlobal:function(F){F.sortable,!this.isMultiDrag&&af&&af.multiDrag._deselectMultiDrag(),yo.forEach(function(T){T.sortableIndex=aa(T)}),yo=yo.sort(function(T,P){return T.sortableIndex-P.sortableIndex}),NS=!0},dragStarted:function(F){var T=this,P=F.sortable;if(this.isMultiDrag){if(this.options.sort&&(P.captureAnimationState(),this.options.animation)){yo.forEach(function(S){S!==cr&&Bn(S,"position","absolute")});var j=Nr(cr,!1,!0,!0);yo.forEach(function(S){S!==cr&&nJ(S,j)}),Zc=!0,zA=!0}P.animateAll(function(){Zc=!1,zA=!1,T.options.animation&&yo.forEach(function(S){bK(S)}),T.options.sort&&CB()})}},dragOver:function(F){var T=F.target,P=F.completed,j=F.cancel;Zc&&~yo.indexOf(T)&&(P(!1),j())},revert:function(F){var T=F.fromSortable,P=F.rootEl,j=F.sortable,S=F.dragRect;yo.length>1&&(yo.forEach(function(B){j.addAnimationState({target:B,rect:Zc?Nr(B):S}),bK(B),B.fromRect=S,T.removeAnimationState(B)}),Zc=!1,Ate(!this.options.removeCloneOnHide,P))},dragOverCompleted:function(F){var T=F.sortable,P=F.isOwner,j=F.insertion,S=F.activeSortable,B=F.parentEl,O=F.putSortable,z=this.options;if(j){if(P&&S._hideClone(),zA=!1,z.animation&&yo.length>1&&(Zc||!P&&!S.options.sort&&!O)){var K=Nr(cr,!1,!0,!0);yo.forEach(function(re){re!==cr&&(nJ(re,K),B.appendChild(re))}),Zc=!0}if(!P)if(Zc||CB(),yo.length>1){var J=yB;S._showClone(T),S.options.animation&&!yB&&J&&gu.forEach(function(re){S.addAnimationState({target:re,rect:UA}),re.fromRect=UA,re.thisAnimationDuration=null})}else S._showClone(T)}},dragOverAnimationCapture:function(F){var T=F.dragRect,P=F.isOwner,j=F.activeSortable;if(yo.forEach(function(B){B.thisAnimationDuration=null}),j.options.animation&&!P&&j.multiDrag.isMultiDrag){UA=dd({},T);var S=j0(cr,!0);UA.top-=S.f,UA.left-=S.e}},dragOverAnimationComplete:function(){Zc&&(Zc=!1,CB())},drop:function(F){var T=F.originalEvent,P=F.rootEl,j=F.parentEl,S=F.sortable,B=F.dispatchSortableEvent,O=F.oldIndex,z=F.putSortable,K=z||this.sortable;if(T){var J=this.options,re=j.children;if(!NS)if(J.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Wr(cr,J.selectedClass,!~yo.indexOf(cr)),~yo.indexOf(cr))yo.splice(yo.indexOf(cr),1),VA=null,jA({sortable:S,rootEl:P,name:"deselect",targetEl:cr,originalEvt:T});else{if(yo.push(cr),jA({sortable:S,rootEl:P,name:"select",targetEl:cr,originalEvt:T}),T.shiftKey&&VA&&S.el.contains(VA)){var ce=aa(VA),me=aa(cr);if(~ce&&~me&&ce!==me){var fe,ye;for(me>ce?(ye=ce,fe=me):(ye=me,fe=ce+1);ye<fe;ye++)~yo.indexOf(re[ye])||(Wr(re[ye],J.selectedClass,!0),yo.push(re[ye]),jA({sortable:S,rootEl:P,name:"select",targetEl:re[ye],originalEvt:T}))}}else VA=cr;af=K}if(NS&&this.isMultiDrag){if(Zc=!1,(j[gl].options.sort||j!==P)&&yo.length>1){var Fe=Nr(cr),pe=aa(cr,":not(."+this.options.selectedClass+")");if(!zA&&J.animation&&(cr.thisAnimationDuration=null),K.captureAnimationState(),!zA&&(J.animation&&(cr.fromRect=Fe,yo.forEach(function(we){if(we.thisAnimationDuration=null,we!==cr){var bt=Zc?Nr(we):Fe;we.fromRect=bt,K.addAnimationState({target:we,rect:bt})}})),CB(),yo.forEach(function(we){re[pe]?j.insertBefore(we,re[pe]):j.appendChild(we),pe++}),O===aa(cr))){var ee=!1;yo.forEach(function(we){if(we.sortableIndex!==aa(we)){ee=!0;return}}),ee&&B("update")}yo.forEach(function(we){bK(we)}),K.animateAll()}af=K}(P===j||z&&z.lastPutMode!=="clone")&&gu.forEach(function(we){we.parentNode&&we.parentNode.removeChild(we)})}},nullingGlobal:function(){this.isMultiDrag=NS=!1,gu.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Ho(document,"pointerup",this._deselectMultiDrag),Ho(document,"mouseup",this._deselectMultiDrag),Ho(document,"touchend",this._deselectMultiDrag),Ho(document,"keydown",this._checkKeyDown),Ho(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(F){if(!(typeof NS<"u"&&NS)&&af===this.sortable&&!(F&&lf(F.target,this.options.draggable,this.sortable.el,!1))&&!(F&&F.button!==0))for(;yo.length;){var T=yo[0];Wr(T,this.options.selectedClass,!1),yo.shift(),jA({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:T,originalEvt:F})}},_checkKeyDown:function(F){F.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(F){F.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},dd(U,{pluginName:"multiDrag",utils:{select:function(F){var T=F.parentNode[gl];!T||!T.options.multiDrag||~yo.indexOf(F)||(af&&af!==T&&(af.multiDrag._deselectMultiDrag(),af=T),Wr(F,T.options.selectedClass,!0),yo.push(F))},deselect:function(F){var T=F.parentNode[gl],P=yo.indexOf(F);!T||!T.options.multiDrag||!~P||(Wr(F,T.options.selectedClass,!1),yo.splice(P,1))}},eventProperties:function(){var F=this,T=[],P=[];return yo.forEach(function(j){T.push({multiDragElement:j,index:j.sortableIndex});var S;Zc&&j!==cr?S=-1:Zc?S=aa(j,":not(."+F.options.selectedClass+")"):S=aa(j),P.push({multiDragElement:j,index:S})}),{items:Yee(yo),clones:[].concat(gu),oldIndicies:T,newIndicies:P}},optionListeners:{multiDragKey:function(F){return F=F.toLowerCase(),F==="ctrl"?F="Control":F.length>1&&(F=F.charAt(0).toUpperCase()+F.substr(1)),F}}})}function Ate(U,w){yo.forEach(function(F,T){var P=w.children[F.sortableIndex+(U?Number(T):0)];P?w.insertBefore(F,P):w.appendChild(F)})}function iJ(U,w){gu.forEach(function(F,T){var P=w.children[F.sortableIndex+(U?Number(T):0)];P?w.insertBefore(F,P):w.appendChild(F)})}function CB(){yo.forEach(function(U){U!==cr&&U.parentNode&&U.parentNode.removeChild(U)})}fo.mount(new xte);fo.mount($K,_K);const Ote=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:Tte,Sortable:fo,Swap:wte,default:fo},Symbol.toStringTag,{value:"Module"})),kte=hJ(Ote);(function(U,w){(function(T,P){U.exports=P(Wee,kte)})(typeof self<"u"?self:Hee,function(F,T){return function(P){var j={};function S(B){if(j[B])return j[B].exports;var O=j[B]={i:B,l:!1,exports:{}};return P[B].call(O.exports,O,O.exports,S),O.l=!0,O.exports}return S.m=P,S.c=j,S.d=function(B,O,z){S.o(B,O)||Object.defineProperty(B,O,{enumerable:!0,get:z})},S.r=function(B){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(B,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(B,"__esModule",{value:!0})},S.t=function(B,O){if(O&1&&(B=S(B)),O&8||O&4&&typeof B=="object"&&B&&B.__esModule)return B;var z=Object.create(null);if(S.r(z),Object.defineProperty(z,"default",{enumerable:!0,value:B}),O&2&&typeof B!="string")for(var K in B)S.d(z,K,(function(J){return B[J]}).bind(null,K));return z},S.n=function(B){var O=B&&B.__esModule?function(){return B.default}:function(){return B};return S.d(O,"a",O),O},S.o=function(B,O){return Object.prototype.hasOwnProperty.call(B,O)},S.p="",S(S.s="fb15")}({"00ee":function(P,j,S){var B=S("b622"),O=B("toStringTag"),z={};z[O]="z",P.exports=String(z)==="[object z]"},"0366":function(P,j,S){var B=S("1c0b");P.exports=function(O,z,K){if(B(O),z===void 0)return O;switch(K){case 0:return function(){return O.call(z)};case 1:return function(J){return O.call(z,J)};case 2:return function(J,re){return O.call(z,J,re)};case 3:return function(J,re,ce){return O.call(z,J,re,ce)}}return function(){return O.apply(z,arguments)}}},"057f":function(P,j,S){var B=S("fc6a"),O=S("241c").f,z={}.toString,K=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],J=function(re){try{return O(re)}catch{return K.slice()}};P.exports.f=function(ce){return K&&z.call(ce)=="[object Window]"?J(ce):O(B(ce))}},"06cf":function(P,j,S){var B=S("83ab"),O=S("d1e7"),z=S("5c6c"),K=S("fc6a"),J=S("c04e"),re=S("5135"),ce=S("0cfb"),me=Object.getOwnPropertyDescriptor;j.f=B?me:function(ye,Fe){if(ye=K(ye),Fe=J(Fe,!0),ce)try{return me(ye,Fe)}catch{}if(re(ye,Fe))return z(!O.f.call(ye,Fe),ye[Fe])}},"0cfb":function(P,j,S){var B=S("83ab"),O=S("d039"),z=S("cc12");P.exports=!B&&!O(function(){return Object.defineProperty(z("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(P,j,S){var B=S("23e7"),O=S("d58f").left,z=S("a640"),K=S("ae40"),J=z("reduce"),re=K("reduce",{1:0});B({target:"Array",proto:!0,forced:!J||!re},{reduce:function(me){return O(this,me,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(P,j,S){var B=S("c6b6"),O=S("9263");P.exports=function(z,K){var J=z.exec;if(typeof J=="function"){var re=J.call(z,K);if(typeof re!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return re}if(B(z)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return O.call(z,K)}},"159b":function(P,j,S){var B=S("da84"),O=S("fdbc"),z=S("17c2"),K=S("9112");for(var J in O){var re=B[J],ce=re&&re.prototype;if(ce&&ce.forEach!==z)try{K(ce,"forEach",z)}catch{ce.forEach=z}}},"17c2":function(P,j,S){var B=S("b727").forEach,O=S("a640"),z=S("ae40"),K=O("forEach"),J=z("forEach");P.exports=!K||!J?function(ce){return B(this,ce,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(P,j,S){var B=S("d066");P.exports=B("document","documentElement")},"1c0b":function(P,j){P.exports=function(S){if(typeof S!="function")throw TypeError(String(S)+" is not a function");return S}},"1c7e":function(P,j,S){var B=S("b622"),O=B("iterator"),z=!1;try{var K=0,J={next:function(){return{done:!!K++}},return:function(){z=!0}};J[O]=function(){return this},Array.from(J,function(){throw 2})}catch{}P.exports=function(re,ce){if(!ce&&!z)return!1;var me=!1;try{var fe={};fe[O]=function(){return{next:function(){return{done:me=!0}}}},re(fe)}catch{}return me}},"1d80":function(P,j){P.exports=function(S){if(S==null)throw TypeError("Can't call method on "+S);return S}},"1dde":function(P,j,S){var B=S("d039"),O=S("b622"),z=S("2d00"),K=O("species");P.exports=function(J){return z>=51||!B(function(){var re=[],ce=re.constructor={};return ce[K]=function(){return{foo:1}},re[J](Boolean).foo!==1})}},"23cb":function(P,j,S){var B=S("a691"),O=Math.max,z=Math.min;P.exports=function(K,J){var re=B(K);return re<0?O(re+J,0):z(re,J)}},"23e7":function(P,j,S){var B=S("da84"),O=S("06cf").f,z=S("9112"),K=S("6eeb"),J=S("ce4e"),re=S("e893"),ce=S("94ca");P.exports=function(me,fe){var ye=me.target,Fe=me.global,pe=me.stat,ee,we,bt,Ke,te,ct;if(Fe?we=B:pe?we=B[ye]||J(ye,{}):we=(B[ye]||{}).prototype,we)for(bt in fe){if(te=fe[bt],me.noTargetGet?(ct=O(we,bt),Ke=ct&&ct.value):Ke=we[bt],ee=ce(Fe?bt:ye+(pe?".":"#")+bt,me.forced),!ee&&Ke!==void 0){if(typeof te==typeof Ke)continue;re(te,Ke)}(me.sham||Ke&&Ke.sham)&&z(te,"sham",!0),K(we,bt,te,me)}}},"241c":function(P,j,S){var B=S("ca84"),O=S("7839"),z=O.concat("length","prototype");j.f=Object.getOwnPropertyNames||function(J){return B(J,z)}},"25f0":function(P,j,S){var B=S("6eeb"),O=S("825a"),z=S("d039"),K=S("ad6d"),J="toString",re=RegExp.prototype,ce=re[J],me=z(function(){return ce.call({source:"a",flags:"b"})!="/a/b"}),fe=ce.name!=J;(me||fe)&&B(RegExp.prototype,J,function(){var Fe=O(this),pe=String(Fe.source),ee=Fe.flags,we=String(ee===void 0&&Fe instanceof RegExp&&!("flags"in re)?K.call(Fe):ee);return"/"+pe+"/"+we},{unsafe:!0})},"2ca0":function(P,j,S){var B=S("23e7"),O=S("06cf").f,z=S("50c4"),K=S("5a34"),J=S("1d80"),re=S("ab13"),ce=S("c430"),me="".startsWith,fe=Math.min,ye=re("startsWith"),Fe=!ce&&!ye&&!!function(){var pe=O(String.prototype,"startsWith");return pe&&!pe.writable}();B({target:"String",proto:!0,forced:!Fe&&!ye},{startsWith:function(ee){var we=String(J(this));K(ee);var bt=z(fe(arguments.length>1?arguments[1]:void 0,we.length)),Ke=String(ee);return me?me.call(we,Ke,bt):we.slice(bt,bt+Ke.length)===Ke}})},"2d00":function(P,j,S){var B=S("da84"),O=S("342f"),z=B.process,K=z&&z.versions,J=K&&K.v8,re,ce;J?(re=J.split("."),ce=re[0]+re[1]):O&&(re=O.match(/Edge\/(\d+)/),(!re||re[1]>=74)&&(re=O.match(/Chrome\/(\d+)/),re&&(ce=re[1]))),P.exports=ce&&+ce},"342f":function(P,j,S){var B=S("d066");P.exports=B("navigator","userAgent")||""},"35a1":function(P,j,S){var B=S("f5df"),O=S("3f8c"),z=S("b622"),K=z("iterator");P.exports=function(J){if(J!=null)return J[K]||J["@@iterator"]||O[B(J)]}},"37e8":function(P,j,S){var B=S("83ab"),O=S("9bf2"),z=S("825a"),K=S("df75");P.exports=B?Object.defineProperties:function(re,ce){z(re);for(var me=K(ce),fe=me.length,ye=0,Fe;fe>ye;)O.f(re,Fe=me[ye++],ce[Fe]);return re}},"3bbe":function(P,j,S){var B=S("861d");P.exports=function(O){if(!B(O)&&O!==null)throw TypeError("Can't set "+String(O)+" as a prototype");return O}},"3ca3":function(P,j,S){var B=S("6547").charAt,O=S("69f3"),z=S("7dd0"),K="String Iterator",J=O.set,re=O.getterFor(K);z(String,"String",function(ce){J(this,{type:K,string:String(ce),index:0})},function(){var me=re(this),fe=me.string,ye=me.index,Fe;return ye>=fe.length?{value:void 0,done:!0}:(Fe=B(fe,ye),me.index+=Fe.length,{value:Fe,done:!1})})},"3f8c":function(P,j){P.exports={}},4160:function(P,j,S){var B=S("23e7"),O=S("17c2");B({target:"Array",proto:!0,forced:[].forEach!=O},{forEach:O})},"428f":function(P,j,S){var B=S("da84");P.exports=B},"44ad":function(P,j,S){var B=S("d039"),O=S("c6b6"),z="".split;P.exports=B(function(){return!Object("z").propertyIsEnumerable(0)})?function(K){return O(K)=="String"?z.call(K,""):Object(K)}:Object},"44d2":function(P,j,S){var B=S("b622"),O=S("7c73"),z=S("9bf2"),K=B("unscopables"),J=Array.prototype;J[K]==null&&z.f(J,K,{configurable:!0,value:O(null)}),P.exports=function(re){J[K][re]=!0}},"44e7":function(P,j,S){var B=S("861d"),O=S("c6b6"),z=S("b622"),K=z("match");P.exports=function(J){var re;return B(J)&&((re=J[K])!==void 0?!!re:O(J)=="RegExp")}},4930:function(P,j,S){var B=S("d039");P.exports=!!Object.getOwnPropertySymbols&&!B(function(){return!String(Symbol())})},"4d64":function(P,j,S){var B=S("fc6a"),O=S("50c4"),z=S("23cb"),K=function(J){return function(re,ce,me){var fe=B(re),ye=O(fe.length),Fe=z(me,ye),pe;if(J&&ce!=ce){for(;ye>Fe;)if(pe=fe[Fe++],pe!=pe)return!0}else for(;ye>Fe;Fe++)if((J||Fe in fe)&&fe[Fe]===ce)return J||Fe||0;return!J&&-1}};P.exports={includes:K(!0),indexOf:K(!1)}},"4de4":function(P,j,S){var B=S("23e7"),O=S("b727").filter,z=S("1dde"),K=S("ae40"),J=z("filter"),re=K("filter");B({target:"Array",proto:!0,forced:!J||!re},{filter:function(me){return O(this,me,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(P,j,S){var B=S("0366"),O=S("7b0b"),z=S("9bdd"),K=S("e95a"),J=S("50c4"),re=S("8418"),ce=S("35a1");P.exports=function(fe){var ye=O(fe),Fe=typeof this=="function"?this:Array,pe=arguments.length,ee=pe>1?arguments[1]:void 0,we=ee!==void 0,bt=ce(ye),Ke=0,te,ct,Je,dt,Ce,Tt;if(we&&(ee=B(ee,pe>2?arguments[2]:void 0,2)),bt!=null&&!(Fe==Array&&K(bt)))for(dt=bt.call(ye),Ce=dt.next,ct=new Fe;!(Je=Ce.call(dt)).done;Ke++)Tt=we?z(dt,ee,[Je.value,Ke],!0):Je.value,re(ct,Ke,Tt);else for(te=J(ye.length),ct=new Fe(te);te>Ke;Ke++)Tt=we?ee(ye[Ke],Ke):ye[Ke],re(ct,Ke,Tt);return ct.length=Ke,ct}},"4fad":function(P,j,S){var B=S("23e7"),O=S("6f53").entries;B({target:"Object",stat:!0},{entries:function(K){return O(K)}})},"50c4":function(P,j,S){var B=S("a691"),O=Math.min;P.exports=function(z){return z>0?O(B(z),9007199254740991):0}},5135:function(P,j){var S={}.hasOwnProperty;P.exports=function(B,O){return S.call(B,O)}},5319:function(P,j,S){var B=S("d784"),O=S("825a"),z=S("7b0b"),K=S("50c4"),J=S("a691"),re=S("1d80"),ce=S("8aa5"),me=S("14c3"),fe=Math.max,ye=Math.min,Fe=Math.floor,pe=/\$([$&'`]|\d\d?|<[^>]*>)/g,ee=/\$([$&'`]|\d\d?)/g,we=function(bt){return bt===void 0?bt:String(bt)};B("replace",2,function(bt,Ke,te,ct){var Je=ct.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,dt=ct.REPLACE_KEEPS_$0,Ce=Je?"$":"$0";return[function(it,et){var x=re(this),pn=it==null?void 0:it[bt];return pn!==void 0?pn.call(it,x,et):Ke.call(String(x),it,et)},function(St,it){if(!Je&&dt||typeof it=="string"&&it.indexOf(Ce)===-1){var et=te(Ke,St,this,it);if(et.done)return et.value}var x=O(St),pn=String(this),Ye=typeof it=="function";Ye||(it=String(it));var Xn=x.global;if(Xn){var vs=x.unicode;x.lastIndex=0}for(var ht=[];;){var An=me(x,pn);if(An===null||(ht.push(An),!Xn))break;var yn=String(An[0]);yn===""&&(x.lastIndex=ce(pn,K(x.lastIndex),vs))}for(var Oo="",Io=0,Ie=0;Ie<ht.length;Ie++){An=ht[Ie];for(var Qe=String(An[0]),N=fe(ye(J(An.index),pn.length),0),Os=[],eo=1;eo<An.length;eo++)Os.push(we(An[eo]));var as=An.groups;if(Ye){var Bo=[Qe].concat(Os,N,pn);as!==void 0&&Bo.push(as);var Bs=String(it.apply(void 0,Bo))}else Bs=Tt(Qe,pn,N,Os,as,it);N>=Io&&(Oo+=pn.slice(Io,N)+Bs,Io=N+Qe.length)}return Oo+pn.slice(Io)}];function Tt(St,it,et,x,pn,Ye){var Xn=et+St.length,vs=x.length,ht=ee;return pn!==void 0&&(pn=z(pn),ht=pe),Ke.call(Ye,ht,function(An,yn){var Oo;switch(yn.charAt(0)){case"$":return"$";case"&":return St;case"`":return it.slice(0,et);case"'":return it.slice(Xn);case"<":Oo=pn[yn.slice(1,-1)];break;default:var Io=+yn;if(Io===0)return An;if(Io>vs){var Ie=Fe(Io/10);return Ie===0?An:Ie<=vs?x[Ie-1]===void 0?yn.charAt(1):x[Ie-1]+yn.charAt(1):An}Oo=x[Io-1]}return Oo===void 0?"":Oo})}})},5692:function(P,j,S){var B=S("c430"),O=S("c6cd");(P.exports=function(z,K){return O[z]||(O[z]=K!==void 0?K:{})})("versions",[]).push({version:"3.6.5",mode:B?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(P,j,S){var B=S("d066"),O=S("241c"),z=S("7418"),K=S("825a");P.exports=B("Reflect","ownKeys")||function(re){var ce=O.f(K(re)),me=z.f;return me?ce.concat(me(re)):ce}},"5a34":function(P,j,S){var B=S("44e7");P.exports=function(O){if(B(O))throw TypeError("The method doesn't accept regular expressions");return O}},"5c6c":function(P,j){P.exports=function(S,B){return{enumerable:!(S&1),configurable:!(S&2),writable:!(S&4),value:B}}},"5db7":function(P,j,S){var B=S("23e7"),O=S("a2bf"),z=S("7b0b"),K=S("50c4"),J=S("1c0b"),re=S("65f0");B({target:"Array",proto:!0},{flatMap:function(me){var fe=z(this),ye=K(fe.length),Fe;return J(me),Fe=re(fe,0),Fe.length=O(Fe,fe,fe,ye,0,1,me,arguments.length>1?arguments[1]:void 0),Fe}})},6547:function(P,j,S){var B=S("a691"),O=S("1d80"),z=function(K){return function(J,re){var ce=String(O(J)),me=B(re),fe=ce.length,ye,Fe;return me<0||me>=fe?K?"":void 0:(ye=ce.charCodeAt(me),ye<55296||ye>56319||me+1===fe||(Fe=ce.charCodeAt(me+1))<56320||Fe>57343?K?ce.charAt(me):ye:K?ce.slice(me,me+2):(ye-55296<<10)+(Fe-56320)+65536)}};P.exports={codeAt:z(!1),charAt:z(!0)}},"65f0":function(P,j,S){var B=S("861d"),O=S("e8b5"),z=S("b622"),K=z("species");P.exports=function(J,re){var ce;return O(J)&&(ce=J.constructor,typeof ce=="function"&&(ce===Array||O(ce.prototype))?ce=void 0:B(ce)&&(ce=ce[K],ce===null&&(ce=void 0))),new(ce===void 0?Array:ce)(re===0?0:re)}},"69f3":function(P,j,S){var B=S("7f9a"),O=S("da84"),z=S("861d"),K=S("9112"),J=S("5135"),re=S("f772"),ce=S("d012"),me=O.WeakMap,fe,ye,Fe,pe=function(Je){return Fe(Je)?ye(Je):fe(Je,{})},ee=function(Je){return function(dt){var Ce;if(!z(dt)||(Ce=ye(dt)).type!==Je)throw TypeError("Incompatible receiver, "+Je+" required");return Ce}};if(B){var we=new me,bt=we.get,Ke=we.has,te=we.set;fe=function(Je,dt){return te.call(we,Je,dt),dt},ye=function(Je){return bt.call(we,Je)||{}},Fe=function(Je){return Ke.call(we,Je)}}else{var ct=re("state");ce[ct]=!0,fe=function(Je,dt){return K(Je,ct,dt),dt},ye=function(Je){return J(Je,ct)?Je[ct]:{}},Fe=function(Je){return J(Je,ct)}}P.exports={set:fe,get:ye,has:Fe,enforce:pe,getterFor:ee}},"6eeb":function(P,j,S){var B=S("da84"),O=S("9112"),z=S("5135"),K=S("ce4e"),J=S("8925"),re=S("69f3"),ce=re.get,me=re.enforce,fe=String(String).split("String");(P.exports=function(ye,Fe,pe,ee){var we=ee?!!ee.unsafe:!1,bt=ee?!!ee.enumerable:!1,Ke=ee?!!ee.noTargetGet:!1;if(typeof pe=="function"&&(typeof Fe=="string"&&!z(pe,"name")&&O(pe,"name",Fe),me(pe).source=fe.join(typeof Fe=="string"?Fe:"")),ye===B){bt?ye[Fe]=pe:K(Fe,pe);return}else we?!Ke&&ye[Fe]&&(bt=!0):delete ye[Fe];bt?ye[Fe]=pe:O(ye,Fe,pe)})(Function.prototype,"toString",function(){return typeof this=="function"&&ce(this).source||J(this)})},"6f53":function(P,j,S){var B=S("83ab"),O=S("df75"),z=S("fc6a"),K=S("d1e7").f,J=function(re){return function(ce){for(var me=z(ce),fe=O(me),ye=fe.length,Fe=0,pe=[],ee;ye>Fe;)ee=fe[Fe++],(!B||K.call(me,ee))&&pe.push(re?[ee,me[ee]]:me[ee]);return pe}};P.exports={entries:J(!0),values:J(!1)}},"73d9":function(P,j,S){var B=S("44d2");B("flatMap")},7418:function(P,j){j.f=Object.getOwnPropertySymbols},"746f":function(P,j,S){var B=S("428f"),O=S("5135"),z=S("e538"),K=S("9bf2").f;P.exports=function(J){var re=B.Symbol||(B.Symbol={});O(re,J)||K(re,J,{value:z.f(J)})}},7839:function(P,j){P.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(P,j,S){var B=S("1d80");P.exports=function(O){return Object(B(O))}},"7c73":function(P,j,S){var B=S("825a"),O=S("37e8"),z=S("7839"),K=S("d012"),J=S("1be4"),re=S("cc12"),ce=S("f772"),me=">",fe="<",ye="prototype",Fe="script",pe=ce("IE_PROTO"),ee=function(){},we=function(Je){return fe+Fe+me+Je+fe+"/"+Fe+me},bt=function(Je){Je.write(we("")),Je.close();var dt=Je.parentWindow.Object;return Je=null,dt},Ke=function(){var Je=re("iframe"),dt="java"+Fe+":",Ce;return Je.style.display="none",J.appendChild(Je),Je.src=String(dt),Ce=Je.contentWindow.document,Ce.open(),Ce.write(we("document.F=Object")),Ce.close(),Ce.F},te,ct=function(){try{te=document.domain&&new ActiveXObject("htmlfile")}catch{}ct=te?bt(te):Ke();for(var Je=z.length;Je--;)delete ct[ye][z[Je]];return ct()};K[pe]=!0,P.exports=Object.create||function(dt,Ce){var Tt;return dt!==null?(ee[ye]=B(dt),Tt=new ee,ee[ye]=null,Tt[pe]=dt):Tt=ct(),Ce===void 0?Tt:O(Tt,Ce)}},"7dd0":function(P,j,S){var B=S("23e7"),O=S("9ed3"),z=S("e163"),K=S("d2bb"),J=S("d44e"),re=S("9112"),ce=S("6eeb"),me=S("b622"),fe=S("c430"),ye=S("3f8c"),Fe=S("ae93"),pe=Fe.IteratorPrototype,ee=Fe.BUGGY_SAFARI_ITERATORS,we=me("iterator"),bt="keys",Ke="values",te="entries",ct=function(){return this};P.exports=function(Je,dt,Ce,Tt,St,it,et){O(Ce,dt,Tt);var x=function(Ie){if(Ie===St&&ht)return ht;if(!ee&&Ie in Xn)return Xn[Ie];switch(Ie){case bt:return function(){return new Ce(this,Ie)};case Ke:return function(){return new Ce(this,Ie)};case te:return function(){return new Ce(this,Ie)}}return function(){return new Ce(this)}},pn=dt+" Iterator",Ye=!1,Xn=Je.prototype,vs=Xn[we]||Xn["@@iterator"]||St&&Xn[St],ht=!ee&&vs||x(St),An=dt=="Array"&&Xn.entries||vs,yn,Oo,Io;if(An&&(yn=z(An.call(new Je)),pe!==Object.prototype&&yn.next&&(!fe&&z(yn)!==pe&&(K?K(yn,pe):typeof yn[we]!="function"&&re(yn,we,ct)),J(yn,pn,!0,!0),fe&&(ye[pn]=ct))),St==Ke&&vs&&vs.name!==Ke&&(Ye=!0,ht=function(){return vs.call(this)}),(!fe||et)&&Xn[we]!==ht&&re(Xn,we,ht),ye[dt]=ht,St)if(Oo={values:x(Ke),keys:it?ht:x(bt),entries:x(te)},et)for(Io in Oo)(ee||Ye||!(Io in Xn))&&ce(Xn,Io,Oo[Io]);else B({target:dt,proto:!0,forced:ee||Ye},Oo);return Oo}},"7f9a":function(P,j,S){var B=S("da84"),O=S("8925"),z=B.WeakMap;P.exports=typeof z=="function"&&/native code/.test(O(z))},"825a":function(P,j,S){var B=S("861d");P.exports=function(O){if(!B(O))throw TypeError(String(O)+" is not an object");return O}},"83ab":function(P,j,S){var B=S("d039");P.exports=!B(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(P,j,S){var B=S("c04e"),O=S("9bf2"),z=S("5c6c");P.exports=function(K,J,re){var ce=B(J);ce in K?O.f(K,ce,z(0,re)):K[ce]=re}},"861d":function(P,j){P.exports=function(S){return typeof S=="object"?S!==null:typeof S=="function"}},8875:function(P,j,S){var B,O,z;(function(K,J){O=[],B=J,z=typeof B=="function"?B.apply(j,O):B,z!==void 0&&(P.exports=z)})(typeof self<"u"?self:this,function(){function K(){var J=Object.getOwnPropertyDescriptor(document,"currentScript");if(!J&&"currentScript"in document&&document.currentScript||J&&J.get!==K&&document.currentScript)return document.currentScript;try{throw new Error}catch(te){var re=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,ce=/@([^@]*):(\d+):(\d+)\s*$/ig,me=re.exec(te.stack)||ce.exec(te.stack),fe=me&&me[1]||!1,ye=me&&me[2]||!1,Fe=document.location.href.replace(document.location.hash,""),pe,ee,we,bt=document.getElementsByTagName("script");fe===Fe&&(pe=document.documentElement.outerHTML,ee=new RegExp("(?:[^\\n]+?\\n){0,"+(ye-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),we=pe.replace(ee,"$1").trim());for(var Ke=0;Ke<bt.length;Ke++)if(bt[Ke].readyState==="interactive"||bt[Ke].src===fe||fe===Fe&&bt[Ke].innerHTML&&bt[Ke].innerHTML.trim()===we)return bt[Ke];return null}}return K})},8925:function(P,j,S){var B=S("c6cd"),O=Function.toString;typeof B.inspectSource!="function"&&(B.inspectSource=function(z){return O.call(z)}),P.exports=B.inspectSource},"8aa5":function(P,j,S){var B=S("6547").charAt;P.exports=function(O,z,K){return z+(K?B(O,z).length:1)}},"8bbf":function(P,j){P.exports=F},"90e3":function(P,j){var S=0,B=Math.random();P.exports=function(O){return"Symbol("+String(O===void 0?"":O)+")_"+(++S+B).toString(36)}},9112:function(P,j,S){var B=S("83ab"),O=S("9bf2"),z=S("5c6c");P.exports=B?function(K,J,re){return O.f(K,J,z(1,re))}:function(K,J,re){return K[J]=re,K}},9263:function(P,j,S){var B=S("ad6d"),O=S("9f7f"),z=RegExp.prototype.exec,K=String.prototype.replace,J=z,re=function(){var ye=/a/,Fe=/b*/g;return z.call(ye,"a"),z.call(Fe,"a"),ye.lastIndex!==0||Fe.lastIndex!==0}(),ce=O.UNSUPPORTED_Y||O.BROKEN_CARET,me=/()??/.exec("")[1]!==void 0,fe=re||me||ce;fe&&(J=function(Fe){var pe=this,ee,we,bt,Ke,te=ce&&pe.sticky,ct=B.call(pe),Je=pe.source,dt=0,Ce=Fe;return te&&(ct=ct.replace("y",""),ct.indexOf("g")===-1&&(ct+="g"),Ce=String(Fe).slice(pe.lastIndex),pe.lastIndex>0&&(!pe.multiline||pe.multiline&&Fe[pe.lastIndex-1]!==`
`)&&(Je="(?: "+Je+")",Ce=" "+Ce,dt++),we=new RegExp("^(?:"+Je+")",ct)),me&&(we=new RegExp("^"+Je+"$(?!\\s)",ct)),re&&(ee=pe.lastIndex),bt=z.call(te?we:pe,Ce),te?bt?(bt.input=bt.input.slice(dt),bt[0]=bt[0].slice(dt),bt.index=pe.lastIndex,pe.lastIndex+=bt[0].length):pe.lastIndex=0:re&&bt&&(pe.lastIndex=pe.global?bt.index+bt[0].length:ee),me&&bt&&bt.length>1&&K.call(bt[0],we,function(){for(Ke=1;Ke<arguments.length-2;Ke++)arguments[Ke]===void 0&&(bt[Ke]=void 0)}),bt}),P.exports=J},"94ca":function(P,j,S){var B=S("d039"),O=/#|\.prototype\./,z=function(me,fe){var ye=J[K(me)];return ye==ce?!0:ye==re?!1:typeof fe=="function"?B(fe):!!fe},K=z.normalize=function(me){return String(me).replace(O,".").toLowerCase()},J=z.data={},re=z.NATIVE="N",ce=z.POLYFILL="P";P.exports=z},"99af":function(P,j,S){var B=S("23e7"),O=S("d039"),z=S("e8b5"),K=S("861d"),J=S("7b0b"),re=S("50c4"),ce=S("8418"),me=S("65f0"),fe=S("1dde"),ye=S("b622"),Fe=S("2d00"),pe=ye("isConcatSpreadable"),ee=9007199254740991,we="Maximum allowed index exceeded",bt=Fe>=51||!O(function(){var Je=[];return Je[pe]=!1,Je.concat()[0]!==Je}),Ke=fe("concat"),te=function(Je){if(!K(Je))return!1;var dt=Je[pe];return dt!==void 0?!!dt:z(Je)},ct=!bt||!Ke;B({target:"Array",proto:!0,forced:ct},{concat:function(dt){var Ce=J(this),Tt=me(Ce,0),St=0,it,et,x,pn,Ye;for(it=-1,x=arguments.length;it<x;it++)if(Ye=it===-1?Ce:arguments[it],te(Ye)){if(pn=re(Ye.length),St+pn>ee)throw TypeError(we);for(et=0;et<pn;et++,St++)et in Ye&&ce(Tt,St,Ye[et])}else{if(St>=ee)throw TypeError(we);ce(Tt,St++,Ye)}return Tt.length=St,Tt}})},"9bdd":function(P,j,S){var B=S("825a");P.exports=function(O,z,K,J){try{return J?z(B(K)[0],K[1]):z(K)}catch(ce){var re=O.return;throw re!==void 0&&B(re.call(O)),ce}}},"9bf2":function(P,j,S){var B=S("83ab"),O=S("0cfb"),z=S("825a"),K=S("c04e"),J=Object.defineProperty;j.f=B?J:function(ce,me,fe){if(z(ce),me=K(me,!0),z(fe),O)try{return J(ce,me,fe)}catch{}if("get"in fe||"set"in fe)throw TypeError("Accessors not supported");return"value"in fe&&(ce[me]=fe.value),ce}},"9ed3":function(P,j,S){var B=S("ae93").IteratorPrototype,O=S("7c73"),z=S("5c6c"),K=S("d44e"),J=S("3f8c"),re=function(){return this};P.exports=function(ce,me,fe){var ye=me+" Iterator";return ce.prototype=O(B,{next:z(1,fe)}),K(ce,ye,!1,!0),J[ye]=re,ce}},"9f7f":function(P,j,S){var B=S("d039");function O(z,K){return RegExp(z,K)}j.UNSUPPORTED_Y=B(function(){var z=O("a","y");return z.lastIndex=2,z.exec("abcd")!=null}),j.BROKEN_CARET=B(function(){var z=O("^r","gy");return z.lastIndex=2,z.exec("str")!=null})},a2bf:function(P,j,S){var B=S("e8b5"),O=S("50c4"),z=S("0366"),K=function(J,re,ce,me,fe,ye,Fe,pe){for(var ee=fe,we=0,bt=Fe?z(Fe,pe,3):!1,Ke;we<me;){if(we in ce){if(Ke=bt?bt(ce[we],we,re):ce[we],ye>0&&B(Ke))ee=K(J,re,Ke,O(Ke.length),ee,ye-1)-1;else{if(ee>=9007199254740991)throw TypeError("Exceed the acceptable array length");J[ee]=Ke}ee++}we++}return ee};P.exports=K},a352:function(P,j){P.exports=T},a434:function(P,j,S){var B=S("23e7"),O=S("23cb"),z=S("a691"),K=S("50c4"),J=S("7b0b"),re=S("65f0"),ce=S("8418"),me=S("1dde"),fe=S("ae40"),ye=me("splice"),Fe=fe("splice",{ACCESSORS:!0,0:0,1:2}),pe=Math.max,ee=Math.min,we=9007199254740991,bt="Maximum allowed length exceeded";B({target:"Array",proto:!0,forced:!ye||!Fe},{splice:function(te,ct){var Je=J(this),dt=K(Je.length),Ce=O(te,dt),Tt=arguments.length,St,it,et,x,pn,Ye;if(Tt===0?St=it=0:Tt===1?(St=0,it=dt-Ce):(St=Tt-2,it=ee(pe(z(ct),0),dt-Ce)),dt+St-it>we)throw TypeError(bt);for(et=re(Je,it),x=0;x<it;x++)pn=Ce+x,pn in Je&&ce(et,x,Je[pn]);if(et.length=it,St<it){for(x=Ce;x<dt-it;x++)pn=x+it,Ye=x+St,pn in Je?Je[Ye]=Je[pn]:delete Je[Ye];for(x=dt;x>dt-it+St;x--)delete Je[x-1]}else if(St>it)for(x=dt-it;x>Ce;x--)pn=x+it-1,Ye=x+St-1,pn in Je?Je[Ye]=Je[pn]:delete Je[Ye];for(x=0;x<St;x++)Je[x+Ce]=arguments[x+2];return Je.length=dt-it+St,et}})},a4d3:function(P,j,S){var B=S("23e7"),O=S("da84"),z=S("d066"),K=S("c430"),J=S("83ab"),re=S("4930"),ce=S("fdbf"),me=S("d039"),fe=S("5135"),ye=S("e8b5"),Fe=S("861d"),pe=S("825a"),ee=S("7b0b"),we=S("fc6a"),bt=S("c04e"),Ke=S("5c6c"),te=S("7c73"),ct=S("df75"),Je=S("241c"),dt=S("057f"),Ce=S("7418"),Tt=S("06cf"),St=S("9bf2"),it=S("d1e7"),et=S("9112"),x=S("6eeb"),pn=S("5692"),Ye=S("f772"),Xn=S("d012"),vs=S("90e3"),ht=S("b622"),An=S("e538"),yn=S("746f"),Oo=S("d44e"),Io=S("69f3"),Ie=S("b727").forEach,Qe=Ye("hidden"),N="Symbol",Os="prototype",eo=ht("toPrimitive"),as=Io.set,Bo=Io.getterFor(N),Bs=Object[Os],_t=O.Symbol,to=z("JSON","stringify"),Ot=Tt.f,ke=St.f,ia=dt.f,Sr=it.f,Ht=pn("symbols"),ur=pn("op-symbols"),Ko=pn("string-to-symbol-registry"),za=pn("symbol-to-string-registry"),No=pn("wks"),bs=O.QObject,jr=!bs||!bs[Os]||!bs[Os].findChild,Rs=J&&me(function(){return te(ke({},"a",{get:function(){return ke(this,"a",{value:7}).a}})).a!=7})?function(wn,Yt,Dn){var $e=Ot(Bs,Yt);$e&&delete Bs[Yt],ke(wn,Yt,Dn),$e&&wn!==Bs&&ke(Bs,Yt,$e)}:ke,xn=function(wn,Yt){var Dn=Ht[wn]=te(_t[Os]);return as(Dn,{type:N,tag:wn,description:Yt}),J||(Dn.description=Yt),Dn},Re=ce?function(wn){return typeof wn=="symbol"}:function(wn){return Object(wn)instanceof _t},_e=function(Yt,Dn,$e){Yt===Bs&&_e(ur,Dn,$e),pe(Yt);var yt=bt(Dn,!0);return pe($e),fe(Ht,yt)?($e.enumerable?(fe(Yt,Qe)&&Yt[Qe][yt]&&(Yt[Qe][yt]=!1),$e=te($e,{enumerable:Ke(0,!1)})):(fe(Yt,Qe)||ke(Yt,Qe,Ke(1,{})),Yt[Qe][yt]=!0),Rs(Yt,yt,$e)):ke(Yt,yt,$e)},ze=function(Yt,Dn){pe(Yt);var $e=we(Dn),yt=ct($e).concat(Vn($e));return Ie(yt,function(To){(!J||en.call($e,To))&&_e(Yt,To,$e[To])}),Yt},ot=function(Yt,Dn){return Dn===void 0?te(Yt):ze(te(Yt),Dn)},en=function(Yt){var Dn=bt(Yt,!0),$e=Sr.call(this,Dn);return this===Bs&&fe(Ht,Dn)&&!fe(ur,Dn)?!1:$e||!fe(this,Dn)||!fe(Ht,Dn)||fe(this,Qe)&&this[Qe][Dn]?$e:!0},sn=function(Yt,Dn){var $e=we(Yt),yt=bt(Dn,!0);if(!($e===Bs&&fe(Ht,yt)&&!fe(ur,yt))){var To=Ot($e,yt);return To&&fe(Ht,yt)&&!(fe($e,Qe)&&$e[Qe][yt])&&(To.enumerable=!0),To}},On=function(Yt){var Dn=ia(we(Yt)),$e=[];return Ie(Dn,function(yt){!fe(Ht,yt)&&!fe(Xn,yt)&&$e.push(yt)}),$e},Vn=function(Yt){var Dn=Yt===Bs,$e=ia(Dn?ur:we(Yt)),yt=[];return Ie($e,function(To){fe(Ht,To)&&(!Dn||fe(Bs,To))&&yt.push(Ht[To])}),yt};if(re||(_t=function(){if(this instanceof _t)throw TypeError("Symbol is not a constructor");var Yt=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Dn=vs(Yt),$e=function(yt){this===Bs&&$e.call(ur,yt),fe(this,Qe)&&fe(this[Qe],Dn)&&(this[Qe][Dn]=!1),Rs(this,Dn,Ke(1,yt))};return J&&jr&&Rs(Bs,Dn,{configurable:!0,set:$e}),xn(Dn,Yt)},x(_t[Os],"toString",function(){return Bo(this).tag}),x(_t,"withoutSetter",function(wn){return xn(vs(wn),wn)}),it.f=en,St.f=_e,Tt.f=sn,Je.f=dt.f=On,Ce.f=Vn,An.f=function(wn){return xn(ht(wn),wn)},J&&(ke(_t[Os],"description",{configurable:!0,get:function(){return Bo(this).description}}),K||x(Bs,"propertyIsEnumerable",en,{unsafe:!0}))),B({global:!0,wrap:!0,forced:!re,sham:!re},{Symbol:_t}),Ie(ct(No),function(wn){yn(wn)}),B({target:N,stat:!0,forced:!re},{for:function(wn){var Yt=String(wn);if(fe(Ko,Yt))return Ko[Yt];var Dn=_t(Yt);return Ko[Yt]=Dn,za[Dn]=Yt,Dn},keyFor:function(Yt){if(!Re(Yt))throw TypeError(Yt+" is not a symbol");if(fe(za,Yt))return za[Yt]},useSetter:function(){jr=!0},useSimple:function(){jr=!1}}),B({target:"Object",stat:!0,forced:!re,sham:!J},{create:ot,defineProperty:_e,defineProperties:ze,getOwnPropertyDescriptor:sn}),B({target:"Object",stat:!0,forced:!re},{getOwnPropertyNames:On,getOwnPropertySymbols:Vn}),B({target:"Object",stat:!0,forced:me(function(){Ce.f(1)})},{getOwnPropertySymbols:function(Yt){return Ce.f(ee(Yt))}}),to){var Lo=!re||me(function(){var wn=_t();return to([wn])!="[null]"||to({a:wn})!="{}"||to(Object(wn))!="{}"});B({target:"JSON",stat:!0,forced:Lo},{stringify:function(Yt,Dn,$e){for(var yt=[Yt],To=1,zi;arguments.length>To;)yt.push(arguments[To++]);if(zi=Dn,!(!Fe(Dn)&&Yt===void 0||Re(Yt)))return ye(Dn)||(Dn=function(Ir,Rt){if(typeof zi=="function"&&(Rt=zi.call(this,Ir,Rt)),!Re(Rt))return Rt}),yt[1]=Dn,to.apply(null,yt)}})}_t[Os][eo]||et(_t[Os],eo,_t[Os].valueOf),Oo(_t,N),Xn[Qe]=!0},a630:function(P,j,S){var B=S("23e7"),O=S("4df4"),z=S("1c7e"),K=!z(function(J){Array.from(J)});B({target:"Array",stat:!0,forced:K},{from:O})},a640:function(P,j,S){var B=S("d039");P.exports=function(O,z){var K=[][O];return!!K&&B(function(){K.call(null,z||function(){throw 1},1)})}},a691:function(P,j){var S=Math.ceil,B=Math.floor;P.exports=function(O){return isNaN(O=+O)?0:(O>0?B:S)(O)}},ab13:function(P,j,S){var B=S("b622"),O=B("match");P.exports=function(z){var K=/./;try{"/./"[z](K)}catch{try{return K[O]=!1,"/./"[z](K)}catch{}}return!1}},ac1f:function(P,j,S){var B=S("23e7"),O=S("9263");B({target:"RegExp",proto:!0,forced:/./.exec!==O},{exec:O})},ad6d:function(P,j,S){var B=S("825a");P.exports=function(){var O=B(this),z="";return O.global&&(z+="g"),O.ignoreCase&&(z+="i"),O.multiline&&(z+="m"),O.dotAll&&(z+="s"),O.unicode&&(z+="u"),O.sticky&&(z+="y"),z}},ae40:function(P,j,S){var B=S("83ab"),O=S("d039"),z=S("5135"),K=Object.defineProperty,J={},re=function(ce){throw ce};P.exports=function(ce,me){if(z(J,ce))return J[ce];me||(me={});var fe=[][ce],ye=z(me,"ACCESSORS")?me.ACCESSORS:!1,Fe=z(me,0)?me[0]:re,pe=z(me,1)?me[1]:void 0;return J[ce]=!!fe&&!O(function(){if(ye&&!B)return!0;var ee={length:-1};ye?K(ee,1,{enumerable:!0,get:re}):ee[1]=1,fe.call(ee,Fe,pe)})}},ae93:function(P,j,S){var B=S("e163"),O=S("9112"),z=S("5135"),K=S("b622"),J=S("c430"),re=K("iterator"),ce=!1,me=function(){return this},fe,ye,Fe;[].keys&&(Fe=[].keys(),"next"in Fe?(ye=B(B(Fe)),ye!==Object.prototype&&(fe=ye)):ce=!0),fe==null&&(fe={}),!J&&!z(fe,re)&&O(fe,re,me),P.exports={IteratorPrototype:fe,BUGGY_SAFARI_ITERATORS:ce}},b041:function(P,j,S){var B=S("00ee"),O=S("f5df");P.exports=B?{}.toString:function(){return"[object "+O(this)+"]"}},b0c0:function(P,j,S){var B=S("83ab"),O=S("9bf2").f,z=Function.prototype,K=z.toString,J=/^\s*function ([^ (]*)/,re="name";B&&!(re in z)&&O(z,re,{configurable:!0,get:function(){try{return K.call(this).match(J)[1]}catch{return""}}})},b622:function(P,j,S){var B=S("da84"),O=S("5692"),z=S("5135"),K=S("90e3"),J=S("4930"),re=S("fdbf"),ce=O("wks"),me=B.Symbol,fe=re?me:me&&me.withoutSetter||K;P.exports=function(ye){return z(ce,ye)||(J&&z(me,ye)?ce[ye]=me[ye]:ce[ye]=fe("Symbol."+ye)),ce[ye]}},b64b:function(P,j,S){var B=S("23e7"),O=S("7b0b"),z=S("df75"),K=S("d039"),J=K(function(){z(1)});B({target:"Object",stat:!0,forced:J},{keys:function(ce){return z(O(ce))}})},b727:function(P,j,S){var B=S("0366"),O=S("44ad"),z=S("7b0b"),K=S("50c4"),J=S("65f0"),re=[].push,ce=function(me){var fe=me==1,ye=me==2,Fe=me==3,pe=me==4,ee=me==6,we=me==5||ee;return function(bt,Ke,te,ct){for(var Je=z(bt),dt=O(Je),Ce=B(Ke,te,3),Tt=K(dt.length),St=0,it=ct||J,et=fe?it(bt,Tt):ye?it(bt,0):void 0,x,pn;Tt>St;St++)if((we||St in dt)&&(x=dt[St],pn=Ce(x,St,Je),me)){if(fe)et[St]=pn;else if(pn)switch(me){case 3:return!0;case 5:return x;case 6:return St;case 2:re.call(et,x)}else if(pe)return!1}return ee?-1:Fe||pe?pe:et}};P.exports={forEach:ce(0),map:ce(1),filter:ce(2),some:ce(3),every:ce(4),find:ce(5),findIndex:ce(6)}},c04e:function(P,j,S){var B=S("861d");P.exports=function(O,z){if(!B(O))return O;var K,J;if(z&&typeof(K=O.toString)=="function"&&!B(J=K.call(O))||typeof(K=O.valueOf)=="function"&&!B(J=K.call(O))||!z&&typeof(K=O.toString)=="function"&&!B(J=K.call(O)))return J;throw TypeError("Can't convert object to primitive value")}},c430:function(P,j){P.exports=!1},c6b6:function(P,j){var S={}.toString;P.exports=function(B){return S.call(B).slice(8,-1)}},c6cd:function(P,j,S){var B=S("da84"),O=S("ce4e"),z="__core-js_shared__",K=B[z]||O(z,{});P.exports=K},c740:function(P,j,S){var B=S("23e7"),O=S("b727").findIndex,z=S("44d2"),K=S("ae40"),J="findIndex",re=!0,ce=K(J);J in[]&&Array(1)[J](function(){re=!1}),B({target:"Array",proto:!0,forced:re||!ce},{findIndex:function(fe){return O(this,fe,arguments.length>1?arguments[1]:void 0)}}),z(J)},c8ba:function(P,j){var S;S=function(){return this}();try{S=S||new Function("return this")()}catch{typeof window=="object"&&(S=window)}P.exports=S},c975:function(P,j,S){var B=S("23e7"),O=S("4d64").indexOf,z=S("a640"),K=S("ae40"),J=[].indexOf,re=!!J&&1/[1].indexOf(1,-0)<0,ce=z("indexOf"),me=K("indexOf",{ACCESSORS:!0,1:0});B({target:"Array",proto:!0,forced:re||!ce||!me},{indexOf:function(ye){return re?J.apply(this,arguments)||0:O(this,ye,arguments.length>1?arguments[1]:void 0)}})},ca84:function(P,j,S){var B=S("5135"),O=S("fc6a"),z=S("4d64").indexOf,K=S("d012");P.exports=function(J,re){var ce=O(J),me=0,fe=[],ye;for(ye in ce)!B(K,ye)&&B(ce,ye)&&fe.push(ye);for(;re.length>me;)B(ce,ye=re[me++])&&(~z(fe,ye)||fe.push(ye));return fe}},caad:function(P,j,S){var B=S("23e7"),O=S("4d64").includes,z=S("44d2"),K=S("ae40"),J=K("indexOf",{ACCESSORS:!0,1:0});B({target:"Array",proto:!0,forced:!J},{includes:function(ce){return O(this,ce,arguments.length>1?arguments[1]:void 0)}}),z("includes")},cc12:function(P,j,S){var B=S("da84"),O=S("861d"),z=B.document,K=O(z)&&O(z.createElement);P.exports=function(J){return K?z.createElement(J):{}}},ce4e:function(P,j,S){var B=S("da84"),O=S("9112");P.exports=function(z,K){try{O(B,z,K)}catch{B[z]=K}return K}},d012:function(P,j){P.exports={}},d039:function(P,j){P.exports=function(S){try{return!!S()}catch{return!0}}},d066:function(P,j,S){var B=S("428f"),O=S("da84"),z=function(K){return typeof K=="function"?K:void 0};P.exports=function(K,J){return arguments.length<2?z(B[K])||z(O[K]):B[K]&&B[K][J]||O[K]&&O[K][J]}},d1e7:function(P,j,S){var B={}.propertyIsEnumerable,O=Object.getOwnPropertyDescriptor,z=O&&!B.call({1:2},1);j.f=z?function(J){var re=O(this,J);return!!re&&re.enumerable}:B},d28b:function(P,j,S){var B=S("746f");B("iterator")},d2bb:function(P,j,S){var B=S("825a"),O=S("3bbe");P.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var z=!1,K={},J;try{J=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,J.call(K,[]),z=K instanceof Array}catch{}return function(ce,me){return B(ce),O(me),z?J.call(ce,me):ce.__proto__=me,ce}}():void 0)},d3b7:function(P,j,S){var B=S("00ee"),O=S("6eeb"),z=S("b041");B||O(Object.prototype,"toString",z,{unsafe:!0})},d44e:function(P,j,S){var B=S("9bf2").f,O=S("5135"),z=S("b622"),K=z("toStringTag");P.exports=function(J,re,ce){J&&!O(J=ce?J:J.prototype,K)&&B(J,K,{configurable:!0,value:re})}},d58f:function(P,j,S){var B=S("1c0b"),O=S("7b0b"),z=S("44ad"),K=S("50c4"),J=function(re){return function(ce,me,fe,ye){B(me);var Fe=O(ce),pe=z(Fe),ee=K(Fe.length),we=re?ee-1:0,bt=re?-1:1;if(fe<2)for(;;){if(we in pe){ye=pe[we],we+=bt;break}if(we+=bt,re?we<0:ee<=we)throw TypeError("Reduce of empty array with no initial value")}for(;re?we>=0:ee>we;we+=bt)we in pe&&(ye=me(ye,pe[we],we,Fe));return ye}};P.exports={left:J(!1),right:J(!0)}},d784:function(P,j,S){S("ac1f");var B=S("6eeb"),O=S("d039"),z=S("b622"),K=S("9263"),J=S("9112"),re=z("species"),ce=!O(function(){var pe=/./;return pe.exec=function(){var ee=[];return ee.groups={a:"7"},ee},"".replace(pe,"$<a>")!=="7"}),me=function(){return"a".replace(/./,"$0")==="$0"}(),fe=z("replace"),ye=function(){return/./[fe]?/./[fe]("a","$0")==="":!1}(),Fe=!O(function(){var pe=/(?:)/,ee=pe.exec;pe.exec=function(){return ee.apply(this,arguments)};var we="ab".split(pe);return we.length!==2||we[0]!=="a"||we[1]!=="b"});P.exports=function(pe,ee,we,bt){var Ke=z(pe),te=!O(function(){var St={};return St[Ke]=function(){return 7},""[pe](St)!=7}),ct=te&&!O(function(){var St=!1,it=/a/;return pe==="split"&&(it={},it.constructor={},it.constructor[re]=function(){return it},it.flags="",it[Ke]=/./[Ke]),it.exec=function(){return St=!0,null},it[Ke](""),!St});if(!te||!ct||pe==="replace"&&!(ce&&me&&!ye)||pe==="split"&&!Fe){var Je=/./[Ke],dt=we(Ke,""[pe],function(St,it,et,x,pn){return it.exec===K?te&&!pn?{done:!0,value:Je.call(it,et,x)}:{done:!0,value:St.call(et,it,x)}:{done:!1}},{REPLACE_KEEPS_$0:me,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:ye}),Ce=dt[0],Tt=dt[1];B(String.prototype,pe,Ce),B(RegExp.prototype,Ke,ee==2?function(St,it){return Tt.call(St,this,it)}:function(St){return Tt.call(St,this)})}bt&&J(RegExp.prototype[Ke],"sham",!0)}},d81d:function(P,j,S){var B=S("23e7"),O=S("b727").map,z=S("1dde"),K=S("ae40"),J=z("map"),re=K("map");B({target:"Array",proto:!0,forced:!J||!re},{map:function(me){return O(this,me,arguments.length>1?arguments[1]:void 0)}})},da84:function(P,j,S){(function(B){var O=function(z){return z&&z.Math==Math&&z};P.exports=O(typeof globalThis=="object"&&globalThis)||O(typeof window=="object"&&window)||O(typeof self=="object"&&self)||O(typeof B=="object"&&B)||Function("return this")()}).call(this,S("c8ba"))},dbb4:function(P,j,S){var B=S("23e7"),O=S("83ab"),z=S("56ef"),K=S("fc6a"),J=S("06cf"),re=S("8418");B({target:"Object",stat:!0,sham:!O},{getOwnPropertyDescriptors:function(me){for(var fe=K(me),ye=J.f,Fe=z(fe),pe={},ee=0,we,bt;Fe.length>ee;)bt=ye(fe,we=Fe[ee++]),bt!==void 0&&re(pe,we,bt);return pe}})},dbf1:function(P,j,S){(function(B){S.d(j,"a",function(){return z});function O(){return typeof window<"u"?window.console:B.console}var z=O()}).call(this,S("c8ba"))},ddb0:function(P,j,S){var B=S("da84"),O=S("fdbc"),z=S("e260"),K=S("9112"),J=S("b622"),re=J("iterator"),ce=J("toStringTag"),me=z.values;for(var fe in O){var ye=B[fe],Fe=ye&&ye.prototype;if(Fe){if(Fe[re]!==me)try{K(Fe,re,me)}catch{Fe[re]=me}if(Fe[ce]||K(Fe,ce,fe),O[fe]){for(var pe in z)if(Fe[pe]!==z[pe])try{K(Fe,pe,z[pe])}catch{Fe[pe]=z[pe]}}}}},df75:function(P,j,S){var B=S("ca84"),O=S("7839");P.exports=Object.keys||function(K){return B(K,O)}},e01a:function(P,j,S){var B=S("23e7"),O=S("83ab"),z=S("da84"),K=S("5135"),J=S("861d"),re=S("9bf2").f,ce=S("e893"),me=z.Symbol;if(O&&typeof me=="function"&&(!("description"in me.prototype)||me().description!==void 0)){var fe={},ye=function(){var Ke=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),te=this instanceof ye?new me(Ke):Ke===void 0?me():me(Ke);return Ke===""&&(fe[te]=!0),te};ce(ye,me);var Fe=ye.prototype=me.prototype;Fe.constructor=ye;var pe=Fe.toString,ee=String(me("test"))=="Symbol(test)",we=/^Symbol\((.*)\)[^)]+$/;re(Fe,"description",{configurable:!0,get:function(){var Ke=J(this)?this.valueOf():this,te=pe.call(Ke);if(K(fe,Ke))return"";var ct=ee?te.slice(7,-1):te.replace(we,"$1");return ct===""?void 0:ct}}),B({global:!0,forced:!0},{Symbol:ye})}},e163:function(P,j,S){var B=S("5135"),O=S("7b0b"),z=S("f772"),K=S("e177"),J=z("IE_PROTO"),re=Object.prototype;P.exports=K?Object.getPrototypeOf:function(ce){return ce=O(ce),B(ce,J)?ce[J]:typeof ce.constructor=="function"&&ce instanceof ce.constructor?ce.constructor.prototype:ce instanceof Object?re:null}},e177:function(P,j,S){var B=S("d039");P.exports=!B(function(){function O(){}return O.prototype.constructor=null,Object.getPrototypeOf(new O)!==O.prototype})},e260:function(P,j,S){var B=S("fc6a"),O=S("44d2"),z=S("3f8c"),K=S("69f3"),J=S("7dd0"),re="Array Iterator",ce=K.set,me=K.getterFor(re);P.exports=J(Array,"Array",function(fe,ye){ce(this,{type:re,target:B(fe),index:0,kind:ye})},function(){var fe=me(this),ye=fe.target,Fe=fe.kind,pe=fe.index++;return!ye||pe>=ye.length?(fe.target=void 0,{value:void 0,done:!0}):Fe=="keys"?{value:pe,done:!1}:Fe=="values"?{value:ye[pe],done:!1}:{value:[pe,ye[pe]],done:!1}},"values"),z.Arguments=z.Array,O("keys"),O("values"),O("entries")},e439:function(P,j,S){var B=S("23e7"),O=S("d039"),z=S("fc6a"),K=S("06cf").f,J=S("83ab"),re=O(function(){K(1)}),ce=!J||re;B({target:"Object",stat:!0,forced:ce,sham:!J},{getOwnPropertyDescriptor:function(fe,ye){return K(z(fe),ye)}})},e538:function(P,j,S){var B=S("b622");j.f=B},e893:function(P,j,S){var B=S("5135"),O=S("56ef"),z=S("06cf"),K=S("9bf2");P.exports=function(J,re){for(var ce=O(re),me=K.f,fe=z.f,ye=0;ye<ce.length;ye++){var Fe=ce[ye];B(J,Fe)||me(J,Fe,fe(re,Fe))}}},e8b5:function(P,j,S){var B=S("c6b6");P.exports=Array.isArray||function(z){return B(z)=="Array"}},e95a:function(P,j,S){var B=S("b622"),O=S("3f8c"),z=B("iterator"),K=Array.prototype;P.exports=function(J){return J!==void 0&&(O.Array===J||K[z]===J)}},f5df:function(P,j,S){var B=S("00ee"),O=S("c6b6"),z=S("b622"),K=z("toStringTag"),J=O(function(){return arguments}())=="Arguments",re=function(ce,me){try{return ce[me]}catch{}};P.exports=B?O:function(ce){var me,fe,ye;return ce===void 0?"Undefined":ce===null?"Null":typeof(fe=re(me=Object(ce),K))=="string"?fe:J?O(me):(ye=O(me))=="Object"&&typeof me.callee=="function"?"Arguments":ye}},f772:function(P,j,S){var B=S("5692"),O=S("90e3"),z=B("keys");P.exports=function(K){return z[K]||(z[K]=O(K))}},fb15:function(P,j,S){if(S.r(j),typeof window<"u"){var B=window.document.currentScript;{var O=S("8875");B=O(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:O})}var z=B&&B.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);z&&(S.p=z[1])}S("99af"),S("4de4"),S("4160"),S("c975"),S("d81d"),S("a434"),S("159b"),S("a4d3"),S("e439"),S("dbb4"),S("b64b");function K(Re,_e,ze){return _e in Re?Object.defineProperty(Re,_e,{value:ze,enumerable:!0,configurable:!0,writable:!0}):Re[_e]=ze,Re}function J(Re,_e){var ze=Object.keys(Re);if(Object.getOwnPropertySymbols){var ot=Object.getOwnPropertySymbols(Re);_e&&(ot=ot.filter(function(en){return Object.getOwnPropertyDescriptor(Re,en).enumerable})),ze.push.apply(ze,ot)}return ze}function re(Re){for(var _e=1;_e<arguments.length;_e++){var ze=arguments[_e]!=null?arguments[_e]:{};_e%2?J(Object(ze),!0).forEach(function(ot){K(Re,ot,ze[ot])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Re,Object.getOwnPropertyDescriptors(ze)):J(Object(ze)).forEach(function(ot){Object.defineProperty(Re,ot,Object.getOwnPropertyDescriptor(ze,ot))})}return Re}function ce(Re){if(Array.isArray(Re))return Re}S("e01a"),S("d28b"),S("e260"),S("d3b7"),S("3ca3"),S("ddb0");function me(Re,_e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Re)))){var ze=[],ot=!0,en=!1,sn=void 0;try{for(var On=Re[Symbol.iterator](),Vn;!(ot=(Vn=On.next()).done)&&(ze.push(Vn.value),!(_e&&ze.length===_e));ot=!0);}catch(Lo){en=!0,sn=Lo}finally{try{!ot&&On.return!=null&&On.return()}finally{if(en)throw sn}}return ze}}S("a630"),S("fb6a"),S("b0c0"),S("25f0");function fe(Re,_e){(_e==null||_e>Re.length)&&(_e=Re.length);for(var ze=0,ot=new Array(_e);ze<_e;ze++)ot[ze]=Re[ze];return ot}function ye(Re,_e){if(Re){if(typeof Re=="string")return fe(Re,_e);var ze=Object.prototype.toString.call(Re).slice(8,-1);if(ze==="Object"&&Re.constructor&&(ze=Re.constructor.name),ze==="Map"||ze==="Set")return Array.from(Re);if(ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ze))return fe(Re,_e)}}function Fe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pe(Re,_e){return ce(Re)||me(Re,_e)||ye(Re,_e)||Fe()}function ee(Re){if(Array.isArray(Re))return fe(Re)}function we(Re){if(typeof Symbol<"u"&&Symbol.iterator in Object(Re))return Array.from(Re)}function bt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ke(Re){return ee(Re)||we(Re)||ye(Re)||bt()}var te=S("a352"),ct=S.n(te);function Je(Re){Re.parentElement!==null&&Re.parentElement.removeChild(Re)}function dt(Re,_e,ze){var ot=ze===0?Re.children[0]:Re.children[ze-1].nextSibling;Re.insertBefore(_e,ot)}var Ce=S("dbf1");S("13d5"),S("4fad"),S("ac1f"),S("5319");function Tt(Re){var _e=Object.create(null);return function(ot){var en=_e[ot];return en||(_e[ot]=Re(ot))}}var St=/-(\w)/g,it=Tt(function(Re){return Re.replace(St,function(_e,ze){return ze.toUpperCase()})});S("5db7"),S("73d9");var et=["Start","Add","Remove","Update","End"],x=["Choose","Unchoose","Sort","Filter","Clone"],pn=["Move"],Ye=[pn,et,x].flatMap(function(Re){return Re}).map(function(Re){return"on".concat(Re)}),Xn={manage:pn,manageAndEmit:et,emit:x};function vs(Re){return Ye.indexOf(Re)!==-1}S("caad"),S("2ca0");var ht=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function An(Re){return ht.includes(Re)}function yn(Re){return["transition-group","TransitionGroup"].includes(Re)}function Oo(Re){return["id","class","role","style"].includes(Re)||Re.startsWith("data-")||Re.startsWith("aria-")||Re.startsWith("on")}function Io(Re){return Re.reduce(function(_e,ze){var ot=pe(ze,2),en=ot[0],sn=ot[1];return _e[en]=sn,_e},{})}function Ie(Re){var _e=Re.$attrs,ze=Re.componentData,ot=ze===void 0?{}:ze,en=Io(Object.entries(_e).filter(function(sn){var On=pe(sn,2),Vn=On[0];return On[1],Oo(Vn)}));return re(re({},en),ot)}function Qe(Re){var _e=Re.$attrs,ze=Re.callBackBuilder,ot=Io(N(_e));Object.entries(ze).forEach(function(sn){var On=pe(sn,2),Vn=On[0],Lo=On[1];Xn[Vn].forEach(function(wn){ot["on".concat(wn)]=Lo(wn)})});var en="[data-draggable]".concat(ot.draggable||"");return re(re({},ot),{},{draggable:en})}function N(Re){return Object.entries(Re).filter(function(_e){var ze=pe(_e,2),ot=ze[0];return ze[1],!Oo(ot)}).map(function(_e){var ze=pe(_e,2),ot=ze[0],en=ze[1];return[it(ot),en]}).filter(function(_e){var ze=pe(_e,2),ot=ze[0];return ze[1],!vs(ot)})}S("c740");function Os(Re,_e){if(!(Re instanceof _e))throw new TypeError("Cannot call a class as a function")}function eo(Re,_e){for(var ze=0;ze<_e.length;ze++){var ot=_e[ze];ot.enumerable=ot.enumerable||!1,ot.configurable=!0,"value"in ot&&(ot.writable=!0),Object.defineProperty(Re,ot.key,ot)}}function as(Re,_e,ze){return eo(Re.prototype,_e),Re}var Bo=function(_e){var ze=_e.el;return ze},Bs=function(_e,ze){return _e.__draggable_context=ze},_t=function(_e){return _e.__draggable_context},to=function(){function Re(_e){var ze=_e.nodes,ot=ze.header,en=ze.default,sn=ze.footer,On=_e.root,Vn=_e.realList;Os(this,Re),this.defaultNodes=en,this.children=[].concat(Ke(ot),Ke(en),Ke(sn)),this.externalComponent=On.externalComponent,this.rootTransition=On.transition,this.tag=On.tag,this.realList=Vn}return as(Re,[{key:"render",value:function(ze,ot){var en=this.tag,sn=this.children,On=this._isRootComponent,Vn=On?{default:function(){return sn}}:sn;return ze(en,ot,Vn)}},{key:"updated",value:function(){var ze=this.defaultNodes,ot=this.realList;ze.forEach(function(en,sn){Bs(Bo(en),{element:ot[sn],index:sn})})}},{key:"getUnderlyingVm",value:function(ze){return _t(ze)}},{key:"getVmIndexFromDomIndex",value:function(ze,ot){var en=this.defaultNodes,sn=en.length,On=ot.children,Vn=On.item(ze);if(Vn===null)return sn;var Lo=_t(Vn);if(Lo)return Lo.index;if(sn===0)return 0;var wn=Bo(en[0]),Yt=Ke(On).findIndex(function(Dn){return Dn===wn});return ze<Yt?0:sn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Re}(),Ot=S("8bbf");function ke(Re,_e){var ze=Re[_e];return ze?ze():[]}function ia(Re){var _e=Re.$slots,ze=Re.realList,ot=Re.getKey,en=ze||[],sn=["header","footer"].map(function(Dn){return ke(_e,Dn)}),On=pe(sn,2),Vn=On[0],Lo=On[1],wn=_e.item;if(!wn)throw new Error("draggable element must have an item slot");var Yt=en.flatMap(function(Dn,$e){return wn({element:Dn,index:$e}).map(function(yt){return yt.key=ot(Dn),yt.props=re(re({},yt.props||{}),{},{"data-draggable":!0}),yt})});if(Yt.length!==en.length)throw new Error("Item slot must have only one child");return{header:Vn,footer:Lo,default:Yt}}function Sr(Re){var _e=yn(Re),ze=!An(Re)&&!_e;return{transition:_e,externalComponent:ze,tag:ze?Object(Ot.resolveComponent)(Re):_e?Ot.TransitionGroup:Re}}function Ht(Re){var _e=Re.$slots,ze=Re.tag,ot=Re.realList,en=Re.getKey,sn=ia({$slots:_e,realList:ot,getKey:en}),On=Sr(ze);return new to({nodes:sn,root:On,realList:ot})}function ur(Re,_e){var ze=this;Object(Ot.nextTick)(function(){return ze.$emit(Re.toLowerCase(),_e)})}function Ko(Re){var _e=this;return function(ze,ot){if(_e.realList!==null)return _e["onDrag".concat(Re)](ze,ot)}}function za(Re){var _e=this,ze=Ko.call(this,Re);return function(ot,en){ze.call(_e,ot,en),ur.call(_e,Re,ot)}}var No=null,bs={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(_e){return _e}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},jr=["update:modelValue","change"].concat(Ke([].concat(Ke(Xn.manageAndEmit),Ke(Xn.emit)).map(function(Re){return Re.toLowerCase()}))),Rs=Object(Ot.defineComponent)({name:"draggable",inheritAttrs:!1,props:bs,emits:jr,data:function(){return{error:!1}},render:function(){try{this.error=!1;var _e=this.$slots,ze=this.$attrs,ot=this.tag,en=this.componentData,sn=this.realList,On=this.getKey,Vn=Ht({$slots:_e,tag:ot,realList:sn,getKey:On});this.componentStructure=Vn;var Lo=Ie({$attrs:ze,componentData:en});return Vn.render(Ot.h,Lo)}catch(wn){return this.error=!0,Object(Ot.h)("pre",{style:{color:"red"}},wn.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&Ce.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var _e=this;if(!this.error){var ze=this.$attrs,ot=this.$el,en=this.componentStructure;en.updated();var sn=Qe({$attrs:ze,callBackBuilder:{manageAndEmit:function(Lo){return za.call(_e,Lo)},emit:function(Lo){return ur.bind(_e,Lo)},manage:function(Lo){return Ko.call(_e,Lo)}}}),On=ot.nodeType===1?ot:ot.parentElement;this._sortable=new ct.a(On,sn),this.targetDomElement=On,On.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var _e=this.list;return _e||this.modelValue},getKey:function(){var _e=this.itemKey;return typeof _e=="function"?_e:function(ze){return ze[_e]}}},watch:{$attrs:{handler:function(_e){var ze=this._sortable;ze&&N(_e).forEach(function(ot){var en=pe(ot,2),sn=en[0],On=en[1];ze.option(sn,On)})},deep:!0}},methods:{getUnderlyingVm:function(_e){return this.componentStructure.getUnderlyingVm(_e)||null},getUnderlyingPotencialDraggableComponent:function(_e){return _e.__draggable_component__},emitChanges:function(_e){var ze=this;Object(Ot.nextTick)(function(){return ze.$emit("change",_e)})},alterList:function(_e){if(this.list){_e(this.list);return}var ze=Ke(this.modelValue);_e(ze),this.$emit("update:modelValue",ze)},spliceList:function(){var _e=arguments,ze=function(en){return en.splice.apply(en,Ke(_e))};this.alterList(ze)},updatePosition:function(_e,ze){var ot=function(sn){return sn.splice(ze,0,sn.splice(_e,1)[0])};this.alterList(ot)},getRelatedContextFromMoveEvent:function(_e){var ze=_e.to,ot=_e.related,en=this.getUnderlyingPotencialDraggableComponent(ze);if(!en)return{component:en};var sn=en.realList,On={list:sn,component:en};if(ze!==ot&&sn){var Vn=en.getUnderlyingVm(ot)||{};return re(re({},Vn),On)}return On},getVmIndexFromDomIndex:function(_e){return this.componentStructure.getVmIndexFromDomIndex(_e,this.targetDomElement)},onDragStart:function(_e){this.context=this.getUnderlyingVm(_e.item),_e.item._underlying_vm_=this.clone(this.context.element),No=_e.item},onDragAdd:function(_e){var ze=_e.item._underlying_vm_;if(ze!==void 0){Je(_e.item);var ot=this.getVmIndexFromDomIndex(_e.newIndex);this.spliceList(ot,0,ze);var en={element:ze,newIndex:ot};this.emitChanges({added:en})}},onDragRemove:function(_e){if(dt(this.$el,_e.item,_e.oldIndex),_e.pullMode==="clone"){Je(_e.clone);return}var ze=this.context,ot=ze.index,en=ze.element;this.spliceList(ot,1);var sn={element:en,oldIndex:ot};this.emitChanges({removed:sn})},onDragUpdate:function(_e){Je(_e.item),dt(_e.from,_e.item,_e.oldIndex);var ze=this.context.index,ot=this.getVmIndexFromDomIndex(_e.newIndex);this.updatePosition(ze,ot);var en={element:this.context.element,oldIndex:ze,newIndex:ot};this.emitChanges({moved:en})},computeFutureIndex:function(_e,ze){if(!_e.element)return 0;var ot=Ke(ze.to.children).filter(function(Vn){return Vn.style.display!=="none"}),en=ot.indexOf(ze.related),sn=_e.component.getVmIndexFromDomIndex(en),On=ot.indexOf(No)!==-1;return On||!ze.willInsertAfter?sn:sn+1},onDragMove:function(_e,ze){var ot=this.move,en=this.realList;if(!ot||!en)return!0;var sn=this.getRelatedContextFromMoveEvent(_e),On=this.computeFutureIndex(sn,_e),Vn=re(re({},this.context),{},{futureIndex:On}),Lo=re(re({},_e),{},{relatedContext:sn,draggedContext:Vn});return ot(Lo,ze)},onDragEnd:function(){No=null}}}),xn=Rs;j.default=xn},fb6a:function(P,j,S){var B=S("23e7"),O=S("861d"),z=S("e8b5"),K=S("23cb"),J=S("50c4"),re=S("fc6a"),ce=S("8418"),me=S("b622"),fe=S("1dde"),ye=S("ae40"),Fe=fe("slice"),pe=ye("slice",{ACCESSORS:!0,0:0,1:2}),ee=me("species"),we=[].slice,bt=Math.max;B({target:"Array",proto:!0,forced:!Fe||!pe},{slice:function(te,ct){var Je=re(this),dt=J(Je.length),Ce=K(te,dt),Tt=K(ct===void 0?dt:ct,dt),St,it,et;if(z(Je)&&(St=Je.constructor,typeof St=="function"&&(St===Array||z(St.prototype))?St=void 0:O(St)&&(St=St[ee],St===null&&(St=void 0)),St===Array||St===void 0))return we.call(Je,Ce,Tt);for(it=new(St===void 0?Array:St)(bt(Tt-Ce,0)),et=0;Ce<Tt;Ce++,et++)Ce in Je&&ce(it,et,Je[Ce]);return it.length=et,it}})},fc6a:function(P,j,S){var B=S("44ad"),O=S("1d80");P.exports=function(z){return B(O(z))}},fdbc:function(P,j){P.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(P,j,S){var B=S("4930");P.exports=B&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(vJ);var Dte=vJ.exports;const Mte=gJ(Dte),Rte={name:"LeadsPage",components:{draggable:Mte},setup(){const U=In("all"),w=In([]),F=In(!0),T=In(""),P=In(""),j=In(!1),S=In({id:0,first_name:"",last_name:"",email:"",phone:"",country_code:"",tag:"",stage:""}),B=In({}),O=In({message:"",type:""}),z=In([]),K=In([]),J=In([]),re=In([]),ce=In(!1),me=In("default"),fe=In(!1),ye=In(""),Fe=In([]),pe=In(null),ee=In(""),we=In(new Set),bt=In(!1),Ke=In(!1),te=In(null),ct=In(""),Je=In(1),dt=In(10),Ce=SB(()=>Math.ceil(w.value.length/dt.value)),Tt=In(""),St=In(""),it=In(!1),et=In(!1),x=In(!1),pn=In(!1),Ye=In(!1),Xn=In(null),vs=In(null),ht=In(""),An=In(!1),yn=In([]),Oo=In(!1),Io=In(!1),Ie=In([]),Qe=localStorage.getItem("auth_token"),N=Te=>{ee.value=Te,ye.value=Bs(Te),Fe.value=_t(Te),fe.value=!0},Os=()=>{fe.value=!1},eo=Te=>we.value.has(Te),as=Te=>{we.value.has(Te)?we.value.delete(Te):we.value.add(Te),S.value.tag=Array.from(we.value)},Bo=()=>{Os()},Bs=Te=>({listingAlert:"New Listing Alert",neighbourhoodAlert:"Neighbourhood Alert",openHouseAlert:"Open House Alert",actionPlan:"Action Plan",marketUpdates:"Market Updates",newsletter:"Real Estate Newsletter"})[Te]||"Unknown Modal",_t=Te=>({listingAlert:[{value:"alert1",text:"Alert 1"},{value:"alert2",text:"Alert 2"}],neighbourhoodAlert:[{value:"neigh1",text:"Neighbourhood 1"},{value:"neigh2",text:"Neighbourhood 2"}],openHouseAlert:[{value:"house1",text:"House 1"},{value:"house2",text:"House 2"}],actionPlan:[{value:"plan1",text:"Plan 1"},{value:"plan2",text:"Plan 2"}],marketUpdates:[{value:"update1",text:"Update 1"},{value:"update2",text:"Update 2"}],newsletter:[{value:"news1",text:"Newsletter 1"},{value:"news2",text:"Newsletter 2"}]})[Te]||[],to=()=>{Io.value=!1},Ot=In({from:"hiteshpandey732195@gmail.com",to:"",subject:"",message:"",template:"",attachments:[]}),ke=Te=>{Ie.value.splice(Te,1),Ot.value.to=Ie.value.join(", ")};WA(yn,Te=>{Ie.value=w.value.filter(Nt=>Te.includes(Nt.id)).map(Nt=>Nt.email),Ot.value.to=Ie.value.join(", ")}),WA(Ie,Te=>{Ot.value.to=Te.join(", ")});const ia=async()=>{Io.value=!0,await yi()},Sr=()=>{Io.value=!1},Ht=Te=>{Ie.value.includes(Te)?Ie.value=Ie.value.filter(Nt=>Nt!==Te):Ie.value.push(Te)},ur=In(""),Ko=In(""),za=In(["{{first_name}}","{{last_name}}","{{email}}","{{city}}","{{phone}}"]),No=()=>{ur.value&&(Ot.value.subject+=" "+ur.value)},bs=In([]),jr=async()=>{try{const Te=await ti.get("/api/templates",{headers:{Authorization:`Bearer ${Qe}`}});bs.value=Te.data.data??Te.data}catch(Te){Te.response&&Te.response.status===401&&alert("Session expired. Please log in again.")}},Rs=()=>{ZA(()=>{mu.get("email-editor")||mu.init({selector:"#email-editor",license_key:"gpl",plugins:"link lists image code",toolbar:"undo redo | bold italic underline | alignleft aligncenter alignright alignjustify | link image media | mergeFieldButton | preview fullscreen",menubar:"file edit view insert format tools table help",height:500,setup:Te=>{Xn.value=Te,Te.ui.registry.addMenuButton("mergeFieldButton",{text:"Merge Fields",fetch:Nt=>{const Kn=za.value.map(fs=>({type:"menuitem",text:fs,onAction:()=>{Te.insertContent(fs)}}));Nt(Kn)}})},image_title:!0,automatic_uploads:!0,file_picker_types:"image",file_picker_callback:(Te,Nt,Kn)=>{const fs=document.createElement("input");fs.setAttribute("type","file"),fs.setAttribute("accept","image/*"),fs.onchange=function(){const Uo=this.files[0],Qs=new FileReader;Qs.onload=function(){const rt=Qs.result;Te(rt,{title:Uo.name})},Qs.readAsDataURL(Uo)},fs.click()}})})},xn=()=>{mu.get("email-editor")&&mu.get("email-editor").remove()},Re=()=>{if(yn.value.length===0){$a.fire({icon:"warning",title:"No Leads Selected",text:"Please select at least one lead before sending an email."});return}Ye.value=!0,ZA(()=>{xn(),Rs()})},_e=()=>{Ye.value=!1,xn()},ze=()=>{const Te=bs.value.find(Nt=>Nt.id===Ot.value.template);if(Te){let Nt=Te.content;mu.get("email-editor").setContent(Nt),Ot.value.subject=Te.subject,Te.attachment_path?Ot.value.attachments=[Te.attachment_path]:Ot.value.attachments=[],Ko.value&&rc()}},ot=Te=>{Ot.value.attachments.splice(Te,1)},en=Te=>{Ot.value.attachments=Array.from(Te.target.files)},sn=()=>{const Te=Xn.value.getContent();alert(`Preview:
From: ${Ot.value.from}
To: ${Ot.value.to}
Subject: ${Ot.value.subject}
Message:
${Te}`)},On=()=>{alert("Feature not implemented yet. Add scheduling logic here!")},Vn=async()=>{const Te=parseInt(localStorage.getItem("user_id"));if(!Te||isNaN(Te)){$a.fire({icon:"error",title:"Missing User ID",text:"Please log in again. User ID is missing or invalid."});return}const Nt=w.value.filter(Uo=>yn.value.includes(Uo.id)).map(Uo=>Uo.email),Kn=w.value.filter(Uo=>yn.value.includes(Uo.id)).map(Uo=>Uo.id);if(!Nt.length){$a.fire({icon:"error",title:"No Recipients",text:"Please select at least one lead."});return}Ot.value.to=Nt.join(",");const fs=Xn.value.getContent();$a.fire({title:"Are you sure?",text:"Do you want to send this email?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, send it!",cancelButtonText:"Cancel"}).then(async Uo=>{if(Uo.isConfirmed)try{const Qs=new FormData;Qs.append("from",Ot.value.from),Qs.append("subject",Ot.value.subject),Qs.append("message",fs),Qs.append("template_id",Ot.value.template),Qs.append("user_id",Te),Kn.forEach(rt=>{Qs.append("lead_ids[]",rt)}),Nt.forEach(rt=>{Qs.append("to[]",rt)}),Ot.value.attachments.forEach(rt=>{Qs.append("attachments[]",rt)}),await ti.post("/api/send-email",Qs,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),$a.fire({icon:"success",title:"Email Sent!",text:"Your email has been successfully sent."}),_e()}catch(Qs){console.error("Email Send Error:",Qs),$a.fire({icon:"error",title:"Failed to Send",text:"Something went wrong. Please try again later."})}})},Lo=In(!1),wn=In(!1),Yt=In([]),Dn=In([]),$e=In([]),yt=In({from:"",to:"",toName:"",subject:"",message:"",template:"",schedule:""}),To=()=>{yt.value.to=$e.value.map(Te=>Te.phone).join(", "),yt.value.toName=$e.value.map(Te=>Te.first_name).join(", ")},zi=Te=>{const Nt=yn.value.indexOf(Te.id);Nt===-1?(yn.value.push(Te.id),$e.value.push({id:Te.id,first_name:Te.first_name,phone:Te.phone})):(yn.value.splice(Nt,1),$e.value=$e.value.filter(Kn=>Kn.id!==Te.id)),To()},Ir=()=>{ZA(()=>{mu.get("sms-editor")||mu.init({selector:"#sms-editor",license_key:"gpl",plugins:"link lists image code",toolbar:"undo redo | aligncenter alignright alignjustify | mergeFieldButton",menubar:"file edit view insert format tools table help",height:500,setup:Te=>{vs.value=Te,Te.ui.registry.addMenuButton("mergeFieldButton",{text:"Merge Fields",fetch:Nt=>{const Kn=za.value.map(fs=>({type:"menuitem",text:fs,onAction:()=>{Te.insertContent(fs)}}));Nt(Kn)}})},image_title:!0,automatic_uploads:!0,file_picker_types:"image",file_picker_callback:(Te,Nt,Kn)=>{const fs=document.createElement("input");fs.setAttribute("type","file"),fs.setAttribute("accept","image/*"),fs.onchange=function(){const Uo=this.files[0],Qs=new FileReader;Qs.onload=function(){const rt=Qs.result;Te(rt,{title:Uo.name})},Qs.readAsDataURL(Uo)},fs.click()}})})},Rt=()=>{mu.get("sms-editor")&&mu.get("sms-editor").remove()},bi=Te=>yn.value.includes(Te.id),fd=Te=>{const Nt=$e.value[Te];$e.value.splice(Te,1),yn.value=yn.value.filter(Kn=>Kn!==Nt.id),To()};WA(yn,Te=>{yt.value.to=$e.value.map(Nt=>Nt.phone).join(", "),yt.value.toName=$e.value.map(Nt=>Nt.first_name).join(", ")});const pu=()=>{wn.value=!1},Fo=()=>{wn.value=!0},nn=()=>{wn.value=!1},Wc=Te=>{yt.value.toName=Te.first_name,yt.value.to=Te.phone,wn.value=!1};WA(yn,()=>{$e.value=w.value.filter(Te=>yn.value.includes(Te.id)),yt.value.to=$e.value.map(Te=>Te.phone).join(", "),yt.value.toName=$e.value.map(Te=>Te.first_name).join(", ")});const th=()=>{yt.value.message.length>300&&(yt.value.message=yt.value.message.slice(0,300))},ns=In([]),xr=In(!1),is=async()=>{xr.value=!0;try{const Te=await ti.get("/api/sms-templates");ns.value=Te.data.templates}catch{$a.fire("Error","Could not load SMS templates.","error")}finally{xr.value=!1}},md=Te=>{yt.value.to=Te.phone,Sr()},Sn=Te=>{Te.target.checked?(yn.value=w.value.map(Nt=>Nt.id),$e.value=w.value.map(Nt=>({id:Nt.id,first_name:Nt.first_name,phone:Nt.phone}))):(yn.value=[],$e.value=[]),To()},Ua=()=>{if(yn.value.length===0){$a.fire("No leads selected!","Please select leads before sending an SMS.","warning");return}An.value=!0,ZA(()=>{Rt(),Ir()})},wr=()=>{Oo.value=!Oo.value},vu=()=>{An.value=!1,yt.value={from:"",to:"",subject:"",message:"",template:"",schedule:""}},nh=()=>{if(!Array.isArray(ns.value))return;const Te=ns.value.find(Nt=>Nt.id===yt.value.template);Te&&(yt.value.message=Te.content,mu.get("sms-editor")&&mu.get("sms-editor").setContent(Te.content))},oh=Te=>{const Nt=Te.target.value;Nt&&(yt.value.message+=` ${Nt}`,yt.value.subject+=` ${Nt}`,Te.target.value="")},Za=()=>{$a.fire({title:"SMS Preview",html:`<strong>From:</strong> ${yt.value.from}<br>
              <strong>To:</strong> ${yt.value.to}<br>
              <strong>Subject:</strong> ${yt.value.subject}<br>
              <strong>Message:</strong><br> ${yt.value.message}`,icon:"info"})},ni=async()=>{var Nt;const Te=parseInt(localStorage.getItem("user_id"));if(!Te||isNaN(Te)){$a.fire("Missing User ID","Please log in again.","error");return}if(!yt.value.from||$e.value.length===0||!yt.value.message.trim()){$a.fire("Missing Information","Sender, recipient, and message cannot be empty.","error");return}try{const Kn=$e.value.map(Uo=>Uo.phone),fs=w.value.filter(Uo=>yn.value.includes(Uo.id)).map(Uo=>Uo.id);await ti.post("/api/send-sms",{lead_ids:fs,user_id:Te,from:yt.value.from,to:Kn.join(", "),subject:yt.value.subject,message:((Nt=mu.get("sms-editor"))==null?void 0:Nt.getContent({format:"text"}))||yt.value.message,schedule:yt.value.schedule||null}),$a.fire("Success","SMS sent successfully.","success"),vu()}catch(Kn){console.error("SMS Send Error:",Kn),$a.fire("Error","Failed to send SMS.","error")}},bu=async Te=>{U.value=Te,F.value=!0,Te==="all"?await hl():Te==="my"&&await yi()},hl=async()=>{F.value=!0,T.value=null;try{const Te=localStorage.getItem("auth_token"),Nt=await ti.get("/api/leads",{headers:{Authorization:`Bearer ${Te}`}});w.value=Array.isArray(Nt.data)?Nt.data:[]}catch(Te){console.error("Error fetching all leads:",Te),T.value="Failed to fetch leads."}finally{F.value=!1}},yi=async()=>{F.value=!0,T.value=null;try{const Te=localStorage.getItem("auth_token"),Nt=await ti.get("/api/leads",{headers:{Authorization:`Bearer ${Te}`}});w.value=Array.isArray(Nt.data)?Nt.data:[]}catch(Te){console.error("Error fetching my leads:",Te),T.value="Failed to fetch my leads."}finally{F.value=!1}},Us=async()=>{try{const Te=await ti.get("/api/items");z.value=Te.data.tags,K.value=Te.data.stages,J.value=Te.data.sources}catch{}},yu=()=>{it.value=!0},Ui=()=>{it.value=!1,Tt.value=""},Ct=()=>{et.value=!0},lm=()=>{et.value=!1,St.value=""},Zs=async()=>{if(Tt.value.trim())try{const Te=await ti.post("/api/items",{name:Tt.value,type:"tag"});z.value.push(Te.data.item),Tt.value="",x.value=!1,$a.fire("Success","Tag added successfully","success")}catch{$a.fire("Error","Failed to add tag","error")}},cm=async()=>{if(St.value.trim())try{const Te=await ti.post("/api/items",{name:St.value,type:"stage"});K.value.push(Te.data.item),St.value="",pn.value=!1,$a.fire("Success","Stage added successfully","success")}catch{$a.fire("Error","Failed to add stage","error")}},ho=SB(()=>w.value.filter(Te=>Te.first_name&&Te.first_name.toLowerCase().includes(P.value.toLowerCase()))),cf=Te=>{const Nt=z.value.find(Kn=>Kn.id===Te);return Nt?Nt.name:"N/A"},Sa=Te=>{const Nt=K.value.find(Kn=>Kn.id===Te);return Nt?Nt.name:"N/A"},um=()=>(B.value={first_name:S.value.first_name?"":"First name is required.",last_name:S.value.last_name?"":"Last name is required.",email:S.value.email&&/^\S+@\S+\.\S+$/.test(S.value.email)?"":"Valid email is required.",phone:S.value.phone&&/^\d{10}$/.test(S.value.phone)?"":"Valid phone number is required.",tag:S.value.tag?"":"Tag is required.",stage:S.value.stage?"":"Stage is required."},!Object.values(B.value).some(Te=>Te)),pl=async()=>{if(yn.value.length===0){dn("No leads selected.","error");return}if((await $a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{const Nt=localStorage.getItem("auth_token");await ti.post("/api/leads/delete",{lead_ids:yn.value},{headers:{Authorization:`Bearer ${Nt}`,"Content-Type":"application/json"}}),w.value=w.value.filter(Kn=>!yn.value.includes(Kn.id)),yn.value=[],$a.fire("Deleted!","Selected leads have been deleted.","success")}catch(Nt){console.error("Delete error:",Nt),$a.fire("Error!","Failed to delete leads.","error")}},dm=Te=>{Te>=1&&Te<=Ce.value&&(Je.value=Te)},Gr=Te=>{dt.value=Te,Je.value=1},uf=SB(()=>{const Te=(Je.value-1)*dt.value,Nt=Te+dt.value;return w.value.slice(Te,Nt)}),Cu=async()=>{if(yn.value.length===0){dn("No leads selected.","error");return}try{const Te=await ti.post("/leads/export",{lead_ids:yn.value},{responseType:"blob"}),Nt=window.URL.createObjectURL(new Blob([Te.data])),Kn=document.createElement("a");Kn.href=Nt,Kn.setAttribute("download","leads.csv"),document.body.appendChild(Kn),Kn.click(),document.body.removeChild(Kn),dn("Leads exported successfully!","success")}catch{dn("Failed to export leads.","error")}},Kr=async Te=>{const Nt=Te.target.files[0];if(!Nt){dn("No file selected.","error");return}const Kn=new FormData;Kn.append("file",Nt);try{const fs=document.querySelector('meta[name="csrf-token"]'),Uo=fs?fs.getAttribute("content"):"";await ti.post("/leads/import",Kn,{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":Uo}}),await bu(),dn("Leads imported successfully!","success")}catch{dn("Failed to import leads.","error")}},Ws=()=>{vl(),alert("Indirect File Import option selected")},Ps=()=>{bt.value=!0},vl=()=>{bt.value=!1,Ke.value=!1,te.value=null,ct.value=""},jc=()=>{Ke.value=!0},Zi=Te=>{const Nt=Te.target.files[0];Nt&&Nt.type==="text/csv"?(te.value=Nt,ct.value=""):(te.value=null,ct.value="Please select a valid CSV file.")},sh=()=>{if(!te.value){ct.value="No file selected or invalid file type.";return}vl()},bl=()=>{vl()},dn=(Te,Nt)=>{O.value={message:Te,type:Nt},setTimeout(()=>{O.value.message=""},5e3)},oc=async()=>{try{const Te=localStorage.getItem("auth_token"),Nt=await ti.get("/api/countries",{headers:{Authorization:`Bearer ${Te}`}});re.value=Nt.data}catch(Te){console.error("Error fetching countries:",Te)}},Su=async()=>{if(um())try{const Te=localStorage.getItem("auth_token"),Nt=`+${S.value.country_code}${S.value.phone}`,Kn=await ti.post("/api/leads",{first_name:S.value.first_name,last_name:S.value.last_name,email:S.value.email,phone:Nt,country_code:S.value.country_code,tag:String(S.value.tag),stage:String(S.value.stage)},{headers:{Authorization:`Bearer ${Te}`,"Content-Type":"application/json"}});S.value={id:0,first_name:"",last_name:"",email:"",phone:"",country_code:"",tag:"",stage:""},j.value=!1,Je.value=1,await hl(),dn("Lead created successfully!","success")}catch(Te){console.error("Error creating lead:",Te),dn("Failed to create lead.","error")}},Ci=In(!1),Ns=In(["first_name","email","phone"]),yl=In({first_name:{label:"Name",disabled:!0},email:{label:"Email",disabled:!0},phone:{label:"Phone",disabled:!0},latest_activity:{label:"Latest Activity"},activity_at:{label:"Activity At"},created_on:{label:"Created On"},tags:{label:"Tags"},stage:{label:"Stage"},latest_source:{label:"Latest Source"},latest_sms:{label:"Latest SMS"},latest_email:{label:"Latest Email"},next_task:{label:"Next Task"},next_appointment:{label:"Next Appointment"},new_listing_alert:{label:"New Listing Alerts"},neighbourhood_alert:{label:"Neighbourhood Alerts"},open_house_alert:{label:"Open House Alerts"},price_drop_alert:{label:"Price Drop Alerts"},action_plans:{label:"Active Action Plans"},market_updates:{label:"Assigned Market Updates"},real_estate_newsletter:{label:"Assigned Newsletters"},notes:{label:"Notes"},dob:{label:"DOB"},background:{label:"Background"},city:{label:"City"},facebook:{label:"Facebook"},instagram:{label:"Instagram"},linkedin:{label:"LinkedIn"},whatsapp:{label:"WhatsApp"},twitter:{label:"Twitter"}}),Vo=()=>{Ci.value=!0},Br=()=>{Ci.value=!1},zo=async()=>{await ji(),Br()},Er=async()=>{try{const Te=await ti.get("/api/columns-settings",{headers:{Authorization:`Bearer ${Qe}`}});Ns.value=Array.isArray(Te.data.selectedColumns)?Te.data.selectedColumns:["first_name","email","phone"]}catch{dn("Failed to fetch column settings!")}},gd=async()=>{try{await ti.post("/api/columns-settings",{selectedColumns:Ns.value},{headers:{Authorization:`Bearer ${Qe}`}}),dn("Column settings saved successfully!")}catch{dn("Failed to save column settings!")}},Wi=Te=>{if(!yl.value[Te].disabled){const Nt=Ns.value.indexOf(Te);Nt===-1?(Ns.value.push(Te),dn(`Column "${yl.value[Te].label}" added`)):(Ns.value.splice(Nt,1),dn(`Column "${yl.value[Te].label}" removed`))}},ji=async()=>{try{await ti.post("/api/columns-settings",{selectedColumns:Ns.value},{headers:{Authorization:`Bearer ${Qe}`}}),dn("Column visibility settings saved successfully!")}catch{dn("Failed to save column visibility settings!")}},Gc=async()=>{try{await ti.post("/api/columns-order",{selectedColumns:Ns.value},{headers:{Authorization:`Bearer ${Qe}`}}),dn("Column order saved successfully!")}catch{dn("Failed to save column order.")}},fm=async()=>{try{await Gc()}catch{dn("Failed to save column order.")}},xa=In([]),sc=In(!1),Lr=async()=>{var Te;if(!sc.value)try{const Nt=await ti.get("/api/signatures",{headers:{Authorization:`Bearer ${Qe}`}});xa.value=Nt.data,sc.value=!0}catch(Nt){((Te=Nt.response)==null?void 0:Te.status)===401&&alert("Session expired. Please log in again.")}},rc=()=>{if(Ko.value){const Te=mu.get("email-editor"),Nt=Te.getContent();Te.setContent(Nt+"<br><br>"+Ko.value)}};return dJ(async()=>{await bu(U.value),await Us();try{await xn()}catch{}is(),await jr(),await Er(),await oc()}),{isFullscreen:Oo,countries:re,activeColomType:me,allSelected:ce,removeAttachment:ot,fetchSignatures:Lr,removeEmail:ke,saveColumnSettings:gd,toggleLeadSelection:Ht,toggleSelectAll:Sn,showLeadModal:Io,selectedEmails:Ie,addSelectedEmails:to,closeLeadModal:Sr,openLeadModal:ia,expandSmsModal:wr,showSmsModal:An,selectedLeads:yn,smsData:yt,smsTemplates:ns,openSmsModal:Ua,closeSmsModal:vu,loadSmsTemplate:nh,insertMergeTag:oh,previewSms:Za,sendSms:ni,emailData:Ot,templates:bs,loadTemplate:ze,handleAttachments:en,previewEmail:sn,scheduleEmail:On,emailMessage:ht,showEmailModal:Ye,openEmailModal:Re,closeEmailModal:_e,sendEmail:Vn,getAllLeads:hl,getMyLeads:yi,fetchLeads:bu,activeLeadType:U,leads:w,loading:F,error:T,searchQuery:P,filteredLeads:ho,showForm:j,newLead:S,errors:B,submitForm:Su,toggleSelectAll:Sn,toast:O,getTagValue:cf,getStageValue:Sa,tags:z,stages:K,sources:J,fetchItems:Us,showImportModal:bt,openImportModal:Ps,closeImportModal:vl,importDirectFile:bl,importIndirectFile:Ws,showFileInput:Ke,showFileUploadField:jc,handleFileUpload:Zi,submitCsvFile:sh,fileError:ct,deleteLeads:pl,exportLeads:Cu,importLeads:Kr,currentPage:Je,pageSize:dt,totalPages:Ce,changePage:dm,setPageSize:Gr,paginatedLeads:uf,showToast:dn,newTag:Tt,newStage:St,showTagModal:it,showStageModal:et,showAddTagInput:x,showAddStageInput:pn,openTagModal:yu,closeTagModal:Ui,openStageModal:Ct,closeStageModal:lm,addTag:Zs,addStage:cm,openModal:N,submitAction:Bo,showModal:fe,modalTitle:ye,modalOptions:Fe,selectedOption:pe,isTagSelected:eo,toggleTagSelection:as,closeModal:Os,selectedMergeField:ur,addMergeFieldToSubject:No,mergeFields:za,signatures:xa,addSignatureToBody:rc,selectedSignature:Ko,selectLead:md,countCharacters:th,showEmailLeadModal:Lo,openSmsLeadModal:Fo,selectSmsLead:Wc,closeSmsLeadModal:nn,showSmsLeadModal:wn,addSelectedPhones:pu,selectedPhones:Yt,selectedNames:Dn,selectedLeadsList:$e,isLeadSelected:bi,removeSelectedLead:fd,addSelectedPhones:pu,toggleSmsLeadSelection:zi,updateSmsToField:To,showColumnsModal:Ci,openColumnsModal:Vo,closeColumnsModal:Br,selectedColumns:Ns,availableColumns:yl,updateColumns:zo,toggleColumnSelection:Wi,fetchColumnSettings:Er,onColumnReorder:fm}}},Pte={class:"leads-container"},Nte={class:"leads-header"},Ite={class:"leads-section"},Bte={class:"lead-buttons"},Lte={class:"icon-section"},Fte={class:"selected-count total-leads"},_te=["disabled"],$te={key:0,class:"modal"},Hte={class:"modal-header"},Vte={class:"modal-body"},zte={class:"form-group"},Ute={class:"form-group"},Zte={class:"email-input-container"},Wte={class:"email-tags"},jte=["onClick"],Gte={class:"form-group"},Kte={class:"form-group"},Yte=["value"],Xte={class:"form-group"},Jte=["value"],Qte={class:"form-group"},qte={key:0,class:"attachment-list mt-2"},ene=["onClick"],tne={class:"form-actions"},nne=["disabled"],one={key:0,class:"integrte_LeadModal"},sne={class:"modal_LeadContent"},rne={class:"modal-header"},ane={class:"modal_LeadBody"},ine=["value","checked","onChange"],lne={class:"modal-footer"},cne={class:"modal-header"},une={class:"modal-body"},dne={class:"form-group"},fne={class:"form-group"},mne={class:"input-group"},gne={class:"selected-leads"},hne=["onClick"],pne={class:"form-group"},vne=["value"],bne={class:"form-group"},yne=["value"],Cne={class:"form-group"},Sne={class:"form-actions"},xne=["disabled"],wne=["disabled"],Ene=["disabled"],Tne=["disabled"],Ane=["disabled"],One=["disabled"],kne=["disabled"],Dne=["disabled"],Mne=["disabled"],Rne=["disabled"],Pne=["disabled"],Nne=["disabled"],Ine={key:0,class:"modal-overlay"},Bne={class:"modal-container"},Lne={key:0,class:"import-options"},Fne={key:1,class:"file-upload-container"},_ne={key:0,class:"error-message"},$ne={key:1,class:"tag-modal-overlay"},Hne={class:"tag-modal-container"},Vne={class:"modal_tags"},zne=["onClick"],Une=["value","checked"],Zne={key:0},Wne={key:2,class:"stage-modal-overlay"},jne={class:"stage-modal-container"},Gne={class:"modal_stages"},Kne=["onClick"],Yne=["value","onUpdate:modelValue"],Xne={key:0,class:"new-stage-input"},Jne={key:3,class:"modal-overlay"},Qne={class:"modal-container"},qne=["value"],eoe={class:"modal-buttons"},toe={class:"header"},noe={class:"total-leads"},ooe={key:4,class:"form-overlay"},soe={class:"form-container"},roe={key:0,class:"error"},aoe={key:0,class:"error"},ioe={key:0,class:"error"},loe=["value"],coe={style:{display:"flex"}},uoe={style:{padding:"0.5rem",border:"1px solid #ccc",background:"#eee","border-inline-end":"none"}},doe={key:0,class:"error"},foe=["value"],moe={key:0,class:"error"},goe=["value"],hoe={key:0,class:"error"},poe={class:"table-container"},voe={class:"table-wrapper"},boe={class:"lead_Table"},yoe={class:"checkbox-col"},Coe={class:"custom-checkbox-label"},Soe={class:"checkbox-col"},xoe=["value"],woe={key:0,class:"no-leads"},Eoe={class:"pagination"},Toe=["disabled"],Aoe=["disabled"],Ooe={key:0,class:"columns-modal-overlay"},koe={class:"columns-modal-container"},Doe={class:"columns-modal-list"},Moe=["checked","onChange","disabled"],Roe={key:0,class:"columns-modal-warning"};function Poe(U,w,F,T,P,j){const S=kK("draggable"),B=kK("router-link");return ln(),mn(Ha,null,[he("div",Pte,[he("div",Nte,[he("div",Ite,[he("div",Bte,[he("button",{class:Ur(["btn",{active:T.activeLeadType==="all"}]),onClick:w[0]||(w[0]=O=>T.fetchLeads("all"))}," All Leads ",2),he("button",{class:Ur(["btn",{active:T.activeLeadType==="my"}]),onClick:w[1]||(w[1]=O=>T.fetchLeads("my"))}," My Leads ",2)])]),he("div",Lte,[he("ul",null,[he("li",Fte," Selected Leads: "+Go(T.selectedLeads.length),1),w[120]||(w[120]=he("li",{class:"total-leads"},[he("i",{class:"fa-solid fa-plus"})],-1)),he("li",{class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),onClick:w[2]||(w[2]=(...O)=>T.deleteLeads&&T.deleteLeads(...O)),disabled:T.selectedLeads.length===0},w[83]||(w[83]=[he("span",null,"Delete",-1),he("i",{class:"fa-solid fa-trash-can-arrow-up"},null,-1)]),10,_te),T.showEmailModal?(ln(),mn("div",$te,[he("div",Hte,[w[84]||(w[84]=he("h2",null,"Compose Email",-1)),he("button",{onClick:w[3]||(w[3]=(...O)=>T.closeEmailModal&&T.closeEmailModal(...O))},"×")]),he("div",Vte,[he("div",zte,[w[85]||(w[85]=he("label",{for:"from"},"From:",-1)),Zr(he("input",{type:"email",id:"from","onUpdate:modelValue":w[4]||(w[4]=O=>T.emailData.from=O),placeholder:"Enter sender email"},null,512),[[ud,T.emailData.from]])]),he("div",Ute,[w[86]||(w[86]=he("label",{for:"to"},"To:",-1)),he("div",Zte,[he("div",Wte,[(ln(!0),mn(Ha,null,vi(T.selectedLeadsList,(O,z)=>(ln(),mn("span",{key:O.id,class:"email-tag"},[Hi(Go(O.first_name)+" ("+Go(O.email)+") ",1),he("button",{onClick:K=>T.removeSelectedLead(z),class:"remove-email"},"×",8,jte)]))),128))]),he("button",{onClick:w[5]||(w[5]=(...O)=>T.openSmsLeadModal&&T.openSmsLeadModal(...O))},"+")])]),he("div",Gte,[w[87]||(w[87]=he("label",{for:"subject"},"Subject:",-1)),Zr(he("input",{type:"text",id:"subject","onUpdate:modelValue":w[6]||(w[6]=O=>T.emailData.subject=O),placeholder:"Enter subject"},null,512),[[ud,T.emailData.subject]])]),he("div",Kte,[w[89]||(w[89]=he("label",{for:"mergeFields"},"Merge Fields:",-1)),Zr(he("select",{id:"mergeFields","onUpdate:modelValue":w[7]||(w[7]=O=>T.selectedMergeField=O),onChange:w[8]||(w[8]=(...O)=>T.addMergeFieldToSubject&&T.addMergeFieldToSubject(...O))},[w[88]||(w[88]=he("option",{value:""},"Select Merge Field",-1)),(ln(!0),mn(Ha,null,vi(T.mergeFields,O=>(ln(),mn("option",{key:O,value:O},Go(O),9,Yte))),128))],544),[[Qg,T.selectedMergeField]])]),he("div",Xte,[w[91]||(w[91]=he("label",{for:"template"},"Template:",-1)),Zr(he("select",{id:"template","onUpdate:modelValue":w[9]||(w[9]=O=>T.emailData.template=O),onChange:w[10]||(w[10]=(...O)=>T.loadTemplate&&T.loadTemplate(...O))},[w[90]||(w[90]=he("option",{value:""},"Select Template",-1)),(ln(!0),mn(Ha,null,vi(T.templates,O=>(ln(),mn("option",{key:O.id,value:O.id},Go(O.title),9,Jte))),128))],544),[[Qg,T.emailData.template]])]),w[93]||(w[93]=he("textarea",{id:"email-editor"},null,-1)),he("div",Qte,[w[92]||(w[92]=he("label",{for:"attachments"},"Attachments:",-1)),he("input",{type:"file",id:"attachments",onChange:w[11]||(w[11]=(...O)=>T.handleAttachments&&T.handleAttachments(...O))},null,32),T.emailData.attachments.length?(ln(),mn("div",qte,[(ln(!0),mn(Ha,null,vi(T.emailData.attachments,(O,z)=>(ln(),mn("div",{key:z,class:"attachment-item"},[he("span",null,Go(O.split("/").pop()),1),he("button",{type:"button",class:"btn btn-sm btn-danger ml-2",onClick:K=>T.removeAttachment(z)}," Remove ",8,ene)]))),128))])):jo("",!0)]),he("div",tne,[he("button",{onClick:w[12]||(w[12]=(...O)=>T.previewEmail&&T.previewEmail(...O))},"Preview"),he("button",{onClick:w[13]||(w[13]=(...O)=>T.scheduleEmail&&T.scheduleEmail(...O))},"Schedule"),he("button",{onClick:w[14]||(w[14]=(...O)=>T.sendEmail&&T.sendEmail(...O))},"Send Email")])])])):jo("",!0),T.activeLeadType==="my"?(ln(),mn("li",{key:1,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),onClick:w[15]||(w[15]=(...O)=>T.openEmailModal&&T.openEmailModal(...O)),disabled:T.selectedLeads.length===0},w[94]||(w[94]=[he("span",null,"Email",-1),he("i",{class:"fa-solid fa-envelope"},null,-1)]),10,nne)):jo("",!0),(ln(),OK(lJ,{to:"body"},[T.showSmsLeadModal?(ln(),mn("div",one,[he("div",sne,[he("div",rne,[w[95]||(w[95]=he("h2",null,"Select Leads",-1)),he("button",{onClick:w[16]||(w[16]=O=>T.showSmsLeadModal=!1)},"×")]),he("div",ane,[he("table",null,[w[96]||(w[96]=he("thead",null,[he("tr",null,[he("th",null,"Select"),he("th",null,"Name"),he("th",null,"Phone")])],-1)),he("tbody",null,[(ln(!0),mn(Ha,null,vi(T.leads,O=>(ln(),mn("tr",{key:O.id},[he("td",null,[he("input",{type:"checkbox",value:O.phone,checked:T.isLeadSelected(O),onChange:z=>T.toggleSmsLeadSelection(O)},null,40,ine)]),he("td",null,Go(O.first_name)+" "+Go(O.last_name),1),he("td",null,Go(O.phone),1)]))),128))])])]),he("div",lne,[he("button",{onClick:w[17]||(w[17]=(...O)=>T.addSelectedPhones&&T.addSelectedPhones(...O))},"Add Selected")])])])):jo("",!0)])),T.showSmsModal?(ln(),mn("div",{key:2,class:Ur(["modal",{"modal-fullscreen":T.isFullscreen}])},[he("div",cne,[w[97]||(w[97]=he("h2",null,"Compose SMS",-1)),he("i",{class:"fas fa-expand-alt",onClick:w[18]||(w[18]=(...O)=>T.expandSmsModal&&T.expandSmsModal(...O)),title:"Expand"}),he("button",{onClick:w[19]||(w[19]=(...O)=>T.closeSmsModal&&T.closeSmsModal(...O))},"×")]),he("div",une,[he("div",dne,[w[98]||(w[98]=he("label",{for:"sms-from"},"From:",-1)),Zr(he("input",{type:"text",id:"sms-from","onUpdate:modelValue":w[20]||(w[20]=O=>T.smsData.from=O),placeholder:"Enter sender's name or phone number"},null,512),[[ud,T.smsData.from]])]),he("div",fne,[w[99]||(w[99]=he("label",{for:"sms-to"},"To:",-1)),he("div",mne,[he("div",gne,[(ln(!0),mn(Ha,null,vi(T.selectedLeadsList,(O,z)=>(ln(),mn("span",{key:O.id,class:"selected-tag"},[Hi(Go(O.first_name)+" ",1),he("button",{onClick:K=>T.removeSelectedLead(z)},"×",8,hne)]))),128)),he("button",{onClick:w[21]||(w[21]=(...O)=>T.openSmsLeadModal&&T.openSmsLeadModal(...O))},"+")])])]),he("div",pne,[w[101]||(w[101]=he("label",{for:"sms-template"},"Template:",-1)),Zr(he("select",{"onUpdate:modelValue":w[22]||(w[22]=O=>T.smsData.template=O),onChange:w[23]||(w[23]=(...O)=>T.loadSmsTemplate&&T.loadSmsTemplate(...O))},[w[100]||(w[100]=he("option",{value:"",disabled:""},"Select a Template",-1)),(ln(!0),mn(Ha,null,vi(T.smsTemplates,O=>(ln(),mn("option",{key:O.id,value:O.id},Go(O.name),9,vne))),128))],544),[[Qg,T.smsData.template]])]),he("div",bne,[w[103]||(w[103]=he("label",{for:"merge-tags"},"Merge Field",-1)),he("select",{id:"merge-tags",onChange:w[24]||(w[24]=O=>T.insertMergeTag(O))},[w[102]||(w[102]=he("option",{value:""},"Select Tag",-1)),(ln(!0),mn(Ha,null,vi(T.mergeFields,O=>(ln(),mn("option",{key:O,value:O},Go(O),9,yne))),128))],32)]),w[105]||(w[105]=he("textarea",{id:"sms-editor"},null,-1)),he("div",Cne,[w[104]||(w[104]=he("label",{for:"sms-schedule"},"Schedule SMS:",-1)),Zr(he("input",{type:"datetime-local",id:"sms-schedule","onUpdate:modelValue":w[25]||(w[25]=O=>T.smsData.schedule=O)},null,512),[[ud,T.smsData.schedule]])]),he("div",Sne,[he("button",{onClick:w[26]||(w[26]=(...O)=>T.previewSms&&T.previewSms(...O))},"Preview"),he("button",{onClick:w[27]||(w[27]=(...O)=>T.sendSms&&T.sendSms(...O))},"Send SMS")])])],2)):jo("",!0),T.activeLeadType==="my"?(ln(),mn("li",{key:3,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),onClick:w[28]||(w[28]=(...O)=>T.openSmsModal&&T.openSmsModal(...O)),disabled:T.selectedLeads.length===0},w[106]||(w[106]=[he("span",null,"Smart SMS",-1),he("i",{class:"fa-solid fa-comment-dots"},null,-1)]),10,xne)):jo("",!0),T.activeLeadType==="my"?(ln(),mn("li",{key:4,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),disabled:T.selectedLeads.length===0,onClick:w[29]||(w[29]=(...O)=>T.openTagModal&&T.openTagModal(...O))},w[107]||(w[107]=[he("span",null,"Tags",-1),he("i",{class:"fa-solid fa-tags"},null,-1)]),10,wne)):jo("",!0),T.activeLeadType==="my"?(ln(),mn("li",{key:5,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),disabled:T.selectedLeads.length===0,onClick:w[30]||(w[30]=(...O)=>T.openStageModal&&T.openStageModal(...O))},w[108]||(w[108]=[he("span",null,"Stage",-1),he("i",{class:"fa-solid fa-table-cells"},null,-1)]),10,Ene)):jo("",!0),T.activeLeadType==="my"?(ln(),mn("li",{key:6,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),disabled:T.selectedLeads.length===0,onClick:w[31]||(w[31]=O=>T.openModal("listingAlert"))},w[109]||(w[109]=[he("span",null,"New Listing Alert",-1),he("i",{class:"fa-solid fa-bell"},null,-1)]),10,Tne)):jo("",!0),T.activeLeadType==="my"?(ln(),mn("li",{key:7,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),disabled:T.selectedLeads.length===0,onClick:w[32]||(w[32]=O=>T.openModal("neighbourhoodAlert"))},w[110]||(w[110]=[he("span",null,"Neighbourhood Alert",-1),he("i",{class:"fa-solid fa-map-location-dot"},null,-1)]),10,Ane)):jo("",!0),T.activeLeadType==="my"?(ln(),mn("li",{key:8,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),disabled:T.selectedLeads.length===0,onClick:w[33]||(w[33]=O=>T.openModal("openHouseAlert"))},w[111]||(w[111]=[he("span",null,"Open House Alert",-1),he("i",{class:"fa-solid fa-circle-exclamation"},null,-1)]),10,One)):jo("",!0),T.activeLeadType==="my"?(ln(),mn("li",{key:9,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),disabled:T.selectedLeads.length===0,onClick:w[34]||(w[34]=O=>T.openModal("actionPlan"))},w[112]||(w[112]=[he("span",null,"Action Plan",-1),he("i",{class:"fa-solid fa-plus"},null,-1)]),10,kne)):jo("",!0),T.activeLeadType==="my"?(ln(),mn("li",{key:10,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),disabled:T.selectedLeads.length===0,onClick:w[35]||(w[35]=O=>T.openModal("marketUpdates"))},w[113]||(w[113]=[he("span",null,"Market Updates",-1),he("i",{class:"fa fa-bar-chart","aria-hidden":"true"},null,-1)]),10,Dne)):jo("",!0),T.activeLeadType==="my"?(ln(),mn("li",{key:11,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),disabled:T.selectedLeads.length===0,onClick:w[36]||(w[36]=O=>T.openModal("newsletter"))},w[114]||(w[114]=[he("span",null,"Real Estate Newsletter",-1),he("i",{class:"fa-solid fa-envelope-open-text"},null,-1)]),10,Mne)):jo("",!0),he("li",{class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),disabled:T.selectedLeads.length===0},w[115]||(w[115]=[he("span",null,"Lead Transfer",-1),he("i",{class:"fa-solid fa-right-left"},null,-1)]),10,Rne),he("li",{class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),onClick:w[37]||(w[37]=(...O)=>T.exportLeads&&T.exportLeads(...O)),disabled:T.selectedLeads.length===0},w[116]||(w[116]=[he("span",null,"Export Lead",-1),he("i",{class:"fa-solid fa-file-export"},null,-1)]),10,Pne),he("li",{class:"total-leads",onClick:w[38]||(w[38]=(...O)=>T.openImportModal&&T.openImportModal(...O))},w[117]||(w[117]=[he("span",null,"Import",-1),he("i",{class:"fa-solid fa-file-import"},null,-1)])),T.activeColomType==="my"?(ln(),mn("li",{key:12,class:Ur(["total-leads_colom",{disabled:U.selectedcoloms.length===0}]),disabled:U.selectedcoloms.length===0,onClick:w[39]||(w[39]=(...O)=>U.opencolomsModal&&U.opencolomsModal(...O))},w[118]||(w[118]=[he("span",null,"Lead",-1),he("i",{class:"fa-solid fa-table-cells"},null,-1)]),10,Nne)):jo("",!0),T.activeLeadType==="my"?(ln(),mn("li",{key:13,class:"total-leads",onClick:w[40]||(w[40]=(...O)=>T.openColumnsModal&&T.openColumnsModal(...O))},w[119]||(w[119]=[he("span",null,"Settings",-1),he("i",{class:"fa-solid fa-gear"},null,-1)]))):jo("",!0)])])]),T.showImportModal?(ln(),mn("div",Ine,[he("div",Bne,[he("button",{type:"button",onClick:w[41]||(w[41]=(...O)=>T.closeImportModal&&T.closeImportModal(...O)),class:"close-button"},"X"),w[121]||(w[121]=he("h2",null,"Select Import Type",-1)),T.showFileInput?jo("",!0):(ln(),mn("div",Lne,[he("button",{onClick:w[42]||(w[42]=(...O)=>T.importDirectFile&&T.importDirectFile(...O)),class:"import-button"},"Direct File Import"),he("button",{onClick:w[43]||(w[43]=(...O)=>T.showFileUploadField&&T.showFileUploadField(...O)),class:"import-button"},"Indirect File Import")])),T.showFileInput?(ln(),mn("div",Fne,[he("input",{type:"file",onChange:w[44]||(w[44]=(...O)=>T.handleFileUpload&&T.handleFileUpload(...O)),accept:".csv"},null,32),he("button",{onClick:w[45]||(w[45]=(...O)=>T.submitCsvFile&&T.submitCsvFile(...O)),class:"submit-button"},"Submit CSV"),T.fileError?(ln(),mn("p",_ne,Go(T.fileError),1)):jo("",!0)])):jo("",!0)])])):jo("",!0),T.showTagModal?(ln(),mn("div",$ne,[he("div",Hne,[he("button",{type:"button",onClick:w[46]||(w[46]=(...O)=>T.closeTagModal&&T.closeTagModal(...O)),class:"close-button"},"X"),w[122]||(w[122]=he("h3",null,"Select Tags",-1)),he("div",Vne,[(ln(!0),mn(Ha,null,vi(T.tags,O=>(ln(),mn("div",{key:O.id,class:Ur(["modal_tag",{selected:T.isTagSelected(O.id)}]),onClick:z=>T.toggleTagSelection(O.id)},[he("input",{type:"checkbox",value:O.id,checked:T.isTagSelected(O.id),readonly:""},null,8,Une),Hi(" "+Go(O.name),1)],10,zne))),128))]),he("button",{onClick:w[47]||(w[47]=O=>T.showAddTagInput=!T.showAddTagInput),class:"add-button"},"Add Tag"),T.showAddTagInput?(ln(),mn("div",Zne,[Zr(he("input",{"onUpdate:modelValue":w[48]||(w[48]=O=>T.newTag=O),placeholder:"Enter new tag"},null,512),[[ud,T.newTag]]),he("button",{onClick:w[49]||(w[49]=(...O)=>T.addTag&&T.addTag(...O)),class:"submit-button"},"Add")])):jo("",!0),he("button",{onClick:w[50]||(w[50]=(...O)=>T.closeTagModal&&T.closeTagModal(...O)),class:"submit-button"},"Close")])])):jo("",!0),T.showStageModal?(ln(),mn("div",Wne,[he("div",jne,[he("button",{type:"button",onClick:w[51]||(w[51]=(...O)=>T.closeStageModal&&T.closeStageModal(...O)),class:"close-button"},"X"),w[123]||(w[123]=he("h3",null,"Select Stage",-1)),he("div",Gne,[(ln(!0),mn(Ha,null,vi(T.stages,O=>(ln(),mn("div",{key:O.id,class:Ur(["modal_stage",{selected:T.newLead.stage===O.id}]),onClick:z=>U.selectStage(O.id)},[Zr(he("input",{type:"radio",value:O.id,"onUpdate:modelValue":z=>T.newLead.stage=z,readonly:""},null,8,Yne),[[fJ,T.newLead.stage]]),Hi(" "+Go(O.name),1)],10,Kne))),128))]),he("button",{onClick:w[52]||(w[52]=O=>T.showAddStageInput=!T.showAddStageInput),class:"add-button"},"Add Stage"),T.showAddStageInput?(ln(),mn("div",Xne,[Zr(he("input",{"onUpdate:modelValue":w[53]||(w[53]=O=>T.newStage=O),placeholder:"Enter new stage",id:"m_add_stage",class:"m_add_stage"},null,512),[[ud,T.newStage]]),he("button",{onClick:w[54]||(w[54]=(...O)=>T.addStage&&T.addStage(...O)),class:"submit-button"},"Add")])):jo("",!0),he("button",{onClick:w[55]||(w[55]=(...O)=>T.closeStageModal&&T.closeStageModal(...O)),class:"submit-button"},"Close")])])):jo("",!0),T.showModal?(ln(),mn("div",Jne,[he("div",Qne,[he("button",{type:"button",onClick:w[56]||(w[56]=(...O)=>T.closeModal&&T.closeModal(...O)),class:"close-button"},"X"),he("h2",null,Go(T.modalTitle),1),Zr(he("select",{"onUpdate:modelValue":w[57]||(w[57]=O=>T.selectedOption=O),class:"open_modal_drop-box"},[(ln(!0),mn(Ha,null,vi(T.modalOptions,O=>(ln(),mn("option",{key:O.value,value:O.value},Go(O.text),9,qne))),128))],512),[[Qg,T.selectedOption]]),he("div",eoe,[he("button",{onClick:w[58]||(w[58]=(...O)=>T.submitAction&&T.submitAction(...O)),class:"submit-button"},"Submit"),he("button",{onClick:w[59]||(w[59]=(...O)=>T.closeModal&&T.closeModal(...O)),class:"cancel-button"},"Cancel")])])])):jo("",!0),he("div",null,[he("div",toe,[Zr(he("input",{"onUpdate:modelValue":w[60]||(w[60]=O=>T.searchQuery=O),type:"text",placeholder:"Search leads by name...",class:"search-bar"},null,512),[[ud,T.searchQuery]]),he("div",noe,"Total Leads: "+Go(T.filteredLeads.length),1),w[124]||(w[124]=cJ('<div class="total-leads">Last 7 Days</div><div class="total-leads">Hot</div><div class="total-leads">Buyer</div><div class="total-leads">Seller</div><div class="total-leads">Closed</div>',5)),he("button",{onClick:w[61]||(w[61]=O=>T.showForm=!0),class:"create-new-button"},"+ Create New")])]),T.showForm?(ln(),mn("div",ooe,[he("div",soe,[he("button",{type:"button",onClick:w[62]||(w[62]=O=>T.showForm=!1),id:"cancel_button"},"X"),w[134]||(w[134]=he("h2",null,"Create New Lead",-1)),he("form",{onSubmit:w[70]||(w[70]=mJ((...O)=>T.submitForm&&T.submitForm(...O),["prevent"]))},[he("label",null,[w[125]||(w[125]=Hi(" First Name: ")),Zr(he("input",{"onUpdate:modelValue":w[63]||(w[63]=O=>T.newLead.first_name=O),type:"text",required:""},null,512),[[ud,T.newLead.first_name]]),T.errors.first_name?(ln(),mn("span",roe,Go(T.errors.first_name),1)):jo("",!0)]),he("label",null,[w[126]||(w[126]=Hi(" Last Name: ")),Zr(he("input",{"onUpdate:modelValue":w[64]||(w[64]=O=>T.newLead.last_name=O),type:"text",required:""},null,512),[[ud,T.newLead.last_name]]),T.errors.last_name?(ln(),mn("span",aoe,Go(T.errors.last_name),1)):jo("",!0)]),he("label",null,[w[127]||(w[127]=Hi(" Email: ")),Zr(he("input",{"onUpdate:modelValue":w[65]||(w[65]=O=>T.newLead.email=O),type:"email",required:""},null,512),[[ud,T.newLead.email]]),T.errors.email?(ln(),mn("span",ioe,Go(T.errors.email),1)):jo("",!0)]),he("label",null,[w[129]||(w[129]=Hi(" Country: ")),Zr(he("select",{"onUpdate:modelValue":w[66]||(w[66]=O=>T.newLead.country_code=O),required:""},[w[128]||(w[128]=he("option",{value:"",disabled:""},"Select Country",-1)),(ln(!0),mn(Ha,null,vi(T.countries,O=>(ln(),mn("option",{key:O.id,value:O.phone_code},Go(O.name)+" (+"+Go(O.phone_code)+") ",9,loe))),128))],512),[[Qg,T.newLead.country_code]])]),he("label",null,[w[130]||(w[130]=Hi(" Phone: ")),he("div",coe,[he("span",uoe," +"+Go(T.newLead.country_code||"Code"),1),Zr(he("input",{"onUpdate:modelValue":w[67]||(w[67]=O=>T.newLead.phone=O),type:"tel",required:"",style:{flex:"1",border:"1px solid #ccc","border-inline-start":"none"},placeholder:"Enter phone number"},null,512),[[ud,T.newLead.phone]])]),T.errors.phone?(ln(),mn("span",doe,Go(T.errors.phone),1)):jo("",!0)]),he("label",null,[w[131]||(w[131]=Hi(" Tag: ")),Zr(he("select",{"onUpdate:modelValue":w[68]||(w[68]=O=>T.newLead.tag=O),required:""},[(ln(!0),mn(Ha,null,vi(T.tags,O=>(ln(),mn("option",{key:O.id,value:O.id},Go(O.name),9,foe))),128))],512),[[Qg,T.newLead.tag]]),T.errors.tag?(ln(),mn("span",moe,Go(T.errors.tag),1)):jo("",!0)]),he("label",null,[w[132]||(w[132]=Hi(" Stage: ")),Zr(he("select",{"onUpdate:modelValue":w[69]||(w[69]=O=>T.newLead.stage=O),required:""},[(ln(!0),mn(Ha,null,vi(T.stages,O=>(ln(),mn("option",{key:O.id,value:O.id},Go(O.name),9,goe))),128))],512),[[Qg,T.newLead.stage]]),T.errors.stage?(ln(),mn("span",hoe,Go(T.errors.stage),1)):jo("",!0)]),w[133]||(w[133]=he("button",{type:"submit",id:"submit_button"},"Submit",-1))],32)])])):jo("",!0),he("div",null,[he("div",null,[w[136]||(w[136]=he("label",{for:"pageSize"},"Rows per page:",-1)),Zr(he("select",{"onUpdate:modelValue":w[71]||(w[71]=O=>T.pageSize=O),onChange:w[72]||(w[72]=O=>T.setPageSize(Number(O.target.value)))},w[135]||(w[135]=[he("option",{value:"5"},"5",-1),he("option",{value:"10"},"10",-1),he("option",{value:"25"},"25",-1),he("option",{value:"50"},"50",-1)]),544),[[Qg,T.pageSize]])]),he("div",poe,[he("div",voe,[he("table",boe,[he("thead",null,[he("tr",null,[he("th",yoe,[he("label",Coe,[Zr(he("input",{type:"checkbox",onChange:w[73]||(w[73]=(...O)=>T.toggleSelectAll&&T.toggleSelectAll(...O)),"onUpdate:modelValue":w[74]||(w[74]=O=>T.allSelected=O),class:"custom-checkbox"},null,544),[[DK,T.allSelected]]),w[137]||(w[137]=he("span",{class:"custom-checkbox-span"},null,-1))])]),uJ(S,{modelValue:T.selectedColumns,"onUpdate:modelValue":w[75]||(w[75]=O=>T.selectedColumns=O),tag:"tr","item-key":"col",handle:".drag-handle",onEnd:T.onColumnReorder},{item:MK(({element:O,index:z})=>{var K;return[he("th",{class:Ur(["lead_TableHead",{"scroll-column":z>=6}])},[w[138]||(w[138]=he("span",{class:"drag-handle"},"☰",-1)),Hi(" "+Go(((K=T.availableColumns[O])==null?void 0:K.label)||O),1)],2)]}),_:1},8,["modelValue","onEnd"])])]),he("tbody",null,[(ln(!0),mn(Ha,null,vi(T.leads,(O,z)=>(ln(),mn("tr",{key:z},[he("td",Soe,[Zr(he("input",{type:"checkbox","onUpdate:modelValue":w[76]||(w[76]=K=>T.selectedLeads=K),value:O.id},null,8,xoe),[[DK,T.selectedLeads]])]),(ln(!0),mn(Ha,null,vi(T.selectedColumns,(K,J)=>(ln(),mn("td",{key:K,class:Ur({"scroll-column":J>=6})},[K==="first_name"?(ln(),OK(B,{key:0,to:"/update-profile/"+O.id,class:"lead-name-link"},{default:MK(()=>[Hi(Go(O[K]||"N/A"),1)]),_:2},1032,["to"])):(ln(),mn(Ha,{key:1},[Hi(Go(O[K]||"N/A"),1)],64))],2))),128))]))),128))])])])]),T.filteredLeads.length===0?(ln(),mn("div",woe,"No leads available.")):jo("",!0),T.toast.message?(ln(),mn("div",{key:1,class:Ur(`toast ${T.toast.type}`)},[Hi(Go(T.toast.message)+" ",1),he("button",{onClick:w[77]||(w[77]=O=>T.toast.message=""),class:"toast-close-button"},"X")],2)):jo("",!0),he("div",Eoe,[he("button",{onClick:w[78]||(w[78]=O=>T.changePage(T.currentPage-1)),disabled:T.currentPage===1},"Previous",8,Toe),he("span",null,"Page "+Go(T.currentPage)+" of "+Go(T.totalPages),1),he("button",{onClick:w[79]||(w[79]=O=>T.changePage(T.currentPage+1)),disabled:T.currentPage===T.totalPages},"Next",8,Aoe)])])]),T.showColumnsModal?(ln(),mn("div",Ooe,[he("div",koe,[he("span",{class:"columns-modal-close",onClick:w[80]||(w[80]=(...O)=>T.closeColumnsModal&&T.closeColumnsModal(...O))},"×"),w[139]||(w[139]=he("h3",null,"Select and Arrange Columns",-1)),he("ul",Doe,[(ln(!0),mn(Ha,null,vi(T.availableColumns,(O,z)=>(ln(),mn("li",{key:z,class:"columns-modal-item"},[he("input",{type:"checkbox",checked:T.selectedColumns.includes(z),onChange:K=>T.toggleColumnSelection(z),disabled:O.disabled},null,40,Moe),Hi(" "+Go(O.label),1)]))),128))]),T.selectedColumns.length===0?(ln(),mn("p",Roe," ⚠️ Please select at least one column! ")):jo("",!0),he("button",{class:"columns-modal-update-btn",onClick:w[81]||(w[81]=(...O)=>T.updateColumns&&T.updateColumns(...O))},"Save"),he("button",{class:"columns-modal-update-btn cancel-btn",onClick:w[82]||(w[82]=(...O)=>T.closeColumnsModal&&T.closeColumnsModal(...O))},"Cancel")])])):jo("",!0)],64)}const Foe=Vee(Rte,[["render",Poe]]);export{Foe as default};
