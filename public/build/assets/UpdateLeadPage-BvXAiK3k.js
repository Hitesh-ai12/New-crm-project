import"./bootstrap.min-KxrJAQL6.js";import{o as d,l as m,j as l,_ as E,r as g,bf as H,L as a,d6 as i,d3 as w,aG as q,U as O,R as j,b as z,n as y,Z as _,X as f,F as L,Y as M,k as u,P as V,f as S}from"./main-C7aftqr6.js";import{a as N}from"./axios-CdtiCRuU.js";const W={__name:"AnalyticsTab",setup(T){return(b,s)=>(d(),m("div",null,s[0]||(s[0]=[l("h4",{class:"mb-3"},"Analytics",-1),l("p",null,"No analytics data available yet.",-1)])))}},Y={class:"row g-3"},Z={class:"col-md-6"},G={class:"col-md-6"},J={class:"col-md-6"},X={class:"col-md-6"},K={class:"col-md-6"},Q={class:"col-md-6"},h={class:"col-md-6"},ll={class:"col-md-6"},tl={class:"col-md-6"},el={class:"col-md-6"},sl={class:"col-md-6"},ol={class:"col-md-6"},nl={class:"col-md-6"},al={class:"col-md-6 form-check"},il={class:"col-md-6 form-check"},dl={class:"col-md-6 form-check"},rl={class:"col-md-6 form-check"},ul={class:"col-md-6"},ml={class:"col-md-6"},pl={class:"col-md-6"},vl={class:"col-md-6"},bl={class:"col-md-6"},cl={class:"col-md-6"},fl={class:"col-md-6"},gl={class:"col-md-6"},kl={class:"col-md-6"},yl={class:"col-md-6"},$l={class:"col-md-6"},xl={class:"col-md-6"},Al={class:"col-md-6"},Ul={class:"col-md-6"},Vl={class:"col-md-6"},wl={class:"col-md-6"},Tl={__name:"ProfileTab",setup(T){const b=g("123"),s=H({name:"",email:"",phone:"",latestActivity:"",activityAt:"",createdOn:"",tags:"",stage:"",latestSource:"",latestSMS:"",latestEmail:"",nextTask:"",nextAppointment:"",newListingAlerts:!1,neighbourhoodAlerts:!1,openHouseAlerts:!1,priceDropAlerts:!1,activeActionPlans:"",assignedMarketUpdates:"",assignedNewsletters:"",notes:"",dob:"",background:"",city:"",facebook:"",instagram:"",linkedin:"",whatsapp:"",twitter:"",house_number:"",street:"",province:"",zip_code:""});function x(){console.log("Lead data:",s),alert("Lead Updated Successfully!")}return(p,t)=>(d(),m("form",{onSubmit:q(x,["prevent"])},[a(l("input",{type:"hidden","onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e)},null,512),[[i,b.value]]),t[68]||(t[68]=l("h4",{class:"mb-3"},"Profile",-1)),l("div",Y,[l("div",Z,[t[34]||(t[34]=l("label",{class:"form-label"},"Name",-1)),a(l("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.name=e),class:"form-control",required:""},null,512),[[i,s.name]])]),l("div",G,[t[35]||(t[35]=l("label",{class:"form-label"},"Email",-1)),a(l("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=e=>s.email=e),class:"form-control",required:""},null,512),[[i,s.email]])]),l("div",J,[t[36]||(t[36]=l("label",{class:"form-label"},"Phone",-1)),a(l("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>s.phone=e),class:"form-control",required:""},null,512),[[i,s.phone]])]),l("div",X,[t[37]||(t[37]=l("label",{class:"form-label"},"Latest Activity",-1)),a(l("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>s.latestActivity=e),class:"form-control"},null,512),[[i,s.latestActivity]])]),l("div",K,[t[38]||(t[38]=l("label",{class:"form-label"},"Activity At",-1)),a(l("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=e=>s.activityAt=e),class:"form-control"},null,512),[[i,s.activityAt]])]),l("div",Q,[t[39]||(t[39]=l("label",{class:"form-label"},"Created On",-1)),a(l("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=e=>s.createdOn=e),class:"form-control"},null,512),[[i,s.createdOn]])]),l("div",h,[t[40]||(t[40]=l("label",{class:"form-label"},"Tags",-1)),a(l("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>s.tags=e),class:"form-control"},null,512),[[i,s.tags]])]),l("div",ll,[t[41]||(t[41]=l("label",{class:"form-label"},"Stage",-1)),a(l("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>s.stage=e),class:"form-control"},null,512),[[i,s.stage]])]),l("div",tl,[t[42]||(t[42]=l("label",{class:"form-label"},"Latest Source",-1)),a(l("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>s.latestSource=e),class:"form-control"},null,512),[[i,s.latestSource]])]),l("div",el,[t[43]||(t[43]=l("label",{class:"form-label"},"Latest SMS",-1)),a(l("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=e=>s.latestSMS=e),class:"form-control"},null,512),[[i,s.latestSMS]])]),l("div",sl,[t[44]||(t[44]=l("label",{class:"form-label"},"Latest Email",-1)),a(l("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>s.latestEmail=e),class:"form-control"},null,512),[[i,s.latestEmail]])]),l("div",ol,[t[45]||(t[45]=l("label",{class:"form-label"},"Next Task",-1)),a(l("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=e=>s.nextTask=e),class:"form-control"},null,512),[[i,s.nextTask]])]),l("div",nl,[t[46]||(t[46]=l("label",{class:"form-label"},"Next Appointment",-1)),a(l("input",{type:"date","onUpdate:modelValue":t[13]||(t[13]=e=>s.nextAppointment=e),class:"form-control"},null,512),[[i,s.nextAppointment]])]),l("div",al,[a(l("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=e=>s.newListingAlerts=e),class:"form-check-input"},null,512),[[w,s.newListingAlerts]]),t[47]||(t[47]=l("label",{class:"form-check-label"},"New Listing Alerts",-1))]),l("div",il,[a(l("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=e=>s.neighbourhoodAlerts=e),class:"form-check-input"},null,512),[[w,s.neighbourhoodAlerts]]),t[48]||(t[48]=l("label",{class:"form-check-label"},"Neighbourhood Alerts",-1))]),l("div",dl,[a(l("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=e=>s.openHouseAlerts=e),class:"form-check-input"},null,512),[[w,s.openHouseAlerts]]),t[49]||(t[49]=l("label",{class:"form-check-label"},"Open House Alerts",-1))]),l("div",rl,[a(l("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=e=>s.priceDropAlerts=e),class:"form-check-input"},null,512),[[w,s.priceDropAlerts]]),t[50]||(t[50]=l("label",{class:"form-check-label"},"Price Drop Alerts",-1))]),l("div",ul,[t[51]||(t[51]=l("label",{class:"form-label"},"Active Action Plans",-1)),a(l("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=e=>s.activeActionPlans=e),class:"form-control"},null,512),[[i,s.activeActionPlans]])]),l("div",ml,[t[52]||(t[52]=l("label",{class:"form-label"},"Assigned Market Updates",-1)),a(l("input",{type:"text","onUpdate:modelValue":t[19]||(t[19]=e=>s.assignedMarketUpdates=e),class:"form-control"},null,512),[[i,s.assignedMarketUpdates]])]),l("div",pl,[t[53]||(t[53]=l("label",{class:"form-label"},"Assigned Newsletters",-1)),a(l("input",{type:"text","onUpdate:modelValue":t[20]||(t[20]=e=>s.assignedNewsletters=e),class:"form-control"},null,512),[[i,s.assignedNewsletters]])]),l("div",vl,[t[54]||(t[54]=l("label",{class:"form-label"},"Notes",-1)),a(l("textarea",{"onUpdate:modelValue":t[21]||(t[21]=e=>s.notes=e),class:"form-control"},null,512),[[i,s.notes]])]),l("div",bl,[t[55]||(t[55]=l("label",{class:"form-label"},"Background",-1)),a(l("textarea",{"onUpdate:modelValue":t[22]||(t[22]=e=>s.background=e),class:"form-control"},null,512),[[i,s.background]])]),l("div",cl,[t[56]||(t[56]=l("label",{class:"form-label"},"Date of Birth",-1)),a(l("input",{type:"date","onUpdate:modelValue":t[23]||(t[23]=e=>s.dob=e),class:"form-control"},null,512),[[i,s.dob]])]),l("div",fl,[t[57]||(t[57]=l("label",{class:"form-label"},"House Number",-1)),a(l("input",{type:"text","onUpdate:modelValue":t[24]||(t[24]=e=>s.house_number=e),class:"form-control",required:""},null,512),[[i,s.house_number]])]),l("div",gl,[t[58]||(t[58]=l("label",{class:"form-label"},"Street",-1)),a(l("input",{type:"text","onUpdate:modelValue":t[25]||(t[25]=e=>s.street=e),class:"form-control",required:""},null,512),[[i,s.street]])]),l("div",kl,[t[59]||(t[59]=l("label",{class:"form-label"},"City",-1)),a(l("input",{type:"text","onUpdate:modelValue":t[26]||(t[26]=e=>s.city=e),class:"form-control",required:""},null,512),[[i,s.city]])]),l("div",yl,[t[60]||(t[60]=l("label",{class:"form-label"},"Province",-1)),a(l("input",{type:"text","onUpdate:modelValue":t[27]||(t[27]=e=>s.province=e),class:"form-control",required:""},null,512),[[i,s.province]])]),l("div",$l,[t[61]||(t[61]=l("label",{class:"form-label"},"Zip Code",-1)),a(l("input",{type:"text","onUpdate:modelValue":t[28]||(t[28]=e=>s.zip_code=e),class:"form-control",required:""},null,512),[[i,s.zip_code]])]),l("div",xl,[t[62]||(t[62]=l("label",{class:"form-label"},"Facebook",-1)),a(l("input",{type:"url","onUpdate:modelValue":t[29]||(t[29]=e=>s.facebook=e),class:"form-control"},null,512),[[i,s.facebook]])]),l("div",Al,[t[63]||(t[63]=l("label",{class:"form-label"},"Instagram",-1)),a(l("input",{type:"url","onUpdate:modelValue":t[30]||(t[30]=e=>s.instagram=e),class:"form-control"},null,512),[[i,s.instagram]])]),l("div",Ul,[t[64]||(t[64]=l("label",{class:"form-label"},"LinkedIn",-1)),a(l("input",{type:"url","onUpdate:modelValue":t[31]||(t[31]=e=>s.linkedin=e),class:"form-control"},null,512),[[i,s.linkedin]])]),l("div",Vl,[t[65]||(t[65]=l("label",{class:"form-label"},"WhatsApp",-1)),a(l("input",{type:"text","onUpdate:modelValue":t[32]||(t[32]=e=>s.whatsapp=e),class:"form-control"},null,512),[[i,s.whatsapp]])]),l("div",wl,[t[66]||(t[66]=l("label",{class:"form-label"},"Twitter",-1)),a(l("input",{type:"url","onUpdate:modelValue":t[33]||(t[33]=e=>s.twitter=e),class:"form-control"},null,512),[[i,s.twitter]])]),t[67]||(t[67]=l("div",{class:"col-12"},[l("button",{type:"submit",class:"btn btn-primary mt-3"},"Update")],-1))])],32))}},Sl=E(Tl,[["__scopeId","data-v-e44d76b3"]]),Cl={class:"container d-flex"},Ll={class:"sidebar me-4"},Ml={class:"main-content flex-grow-1"},Nl={key:0,class:"mb-3"},El={class:"card-body"},Pl={class:"card-title"},Dl={class:"card-text"},Fl={key:0},Il={key:1},Bl={key:2},Rl={key:3},Hl=["innerHTML"],ql={class:"text-muted small"},Ol=["onClick"],jl=["onClick"],zl=["onClick"],_l={key:1,class:"modal fade show d-block",tabindex:"-1",role:"dialog",style:{"background-color":"rgba(0, 0, 0, 50%)"}},Wl={class:"modal-dialog modal-lg",role:"document"},Yl={class:"modal-content"},Zl={class:"modal-header"},Gl={class:"modal-title"},Jl={class:"modal-body"},Xl={key:0},Kl=["innerHTML"],Ql={key:1},hl=["href"],lt={class:"modal-footer"},tt={key:2,class:"modal fade show d-block",tabindex:"-1",role:"dialog",style:{"background-color":"rgba(0, 0, 0, 50%)"}},et={class:"modal-dialog",role:"document"},st={class:"modal-content"},ot={class:"modal-header"},nt={class:"modal-title"},at={class:"modal-body"},it={class:"border p-2 rounded bg-light"},dt={class:"text-muted mt-2 small"},rt={class:"modal-footer"},ut={__name:"TimelineTab",setup(T){const b=O(),s=g(b.params.id),x=g(!1),p=g({}),t=g(!1),e=g({}),v=g("all"),k=g("all"),U=g([]);j(async()=>{const o={Authorization:`Bearer ${localStorage.getItem("auth_token")}`};try{const A=(await N.get(`/api/lead/${s.value}/sms`,{headers:o})).data.map(r=>{const $=new Date(`${r.date} ${r.time}`);return{id:r.id,type:"sms",direction:r.direction,phone:r.phone,title:r.title,description:r.description,leadId:r.leadId,date:$.toLocaleDateString(),time:$.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}});U.value.push(...A);const B=(await N.get(`/api/email/lead/${s.value}`)).data.map(r=>{const $=new Date(`${r.date} ${r.time}`);return{id:`${r.direction}-${Math.random().toString(36).substr(2,9)}`,type:"email",direction:r.direction,title:r.direction==="sent"?"Sent Email":"Reply Received",description:r.subject,date:$.toLocaleDateString(),time:$.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),from:r.from,to:r.to,body_plain:r.description,body_html:r.body_html||null,attachments:r.attachments||[]}});U.value.push(...B),U.value.sort((r,$)=>{const R=new Date(`${r.date} ${r.time}`);return new Date(`${$.date} ${$.time}`).getTime()-R.getTime()})}catch(n){console.error("Failed to load timeline data:",n)}});const P=z(()=>v.value==="all"?U.value:U.value.filter(c=>c.type!==v.value?!1:k.value==="all"?!0:c.direction===k.value)),D=c=>{p.value=c,x.value=!0},F=c=>{e.value=c,t.value=!0},C=c=>{alert(`Replying to: ${c.title} from ${c.from}. Full subject: ${c.description}`)},I=c=>c.substring(c.lastIndexOf("/")+1);return(c,o)=>(d(),m("div",Cl,[l("div",Ll,[l("div",{class:y(["menu-item",{active:v.value==="all"}]),onClick:o[0]||(o[0]=n=>{v.value="all",k.value="all"})},o[12]||(o[12]=[l("div",{class:"icon"},[l("i",{class:"fas fa-headset"})],-1),l("div",{class:"label"},"ALL",-1)]),2),l("div",{class:y(["menu-item",{active:v.value==="sms"}]),onClick:o[1]||(o[1]=n=>{v.value="sms",k.value="all"})},o[13]||(o[13]=[l("div",{class:"icon"},[l("i",{class:"fas fa-comment"})],-1),l("div",{class:"label"},"SMS",-1)]),2),l("div",{class:y(["menu-item",{active:v.value==="email"}]),onClick:o[2]||(o[2]=n=>v.value="email")},o[14]||(o[14]=[l("div",{class:"icon"},[l("i",{class:"fas fa-envelope"})],-1),l("div",{class:"label"},"Email",-1)]),2),l("div",{class:y(["menu-item",{active:v.value==="notes"}]),onClick:o[3]||(o[3]=n=>{v.value="notes",k.value="all"})},o[15]||(o[15]=[l("div",{class:"icon"},[l("i",{class:"fas fa-sticky-note"})],-1),l("div",{class:"label"},"Notes",-1)]),2),l("div",{class:y(["menu-item",{active:v.value==="callLog"}]),onClick:o[4]||(o[4]=n=>{v.value="callLog",k.value="all"})},o[16]||(o[16]=[l("div",{class:"icon"},[l("i",{class:"fas fa-phone"})],-1),l("div",{class:"label"},"Call Log",-1)]),2),l("div",{class:y(["menu-item",{active:v.value==="webActivity"}]),onClick:o[5]||(o[5]=n=>{v.value="webActivity",k.value="all"})},o[17]||(o[17]=[l("div",{class:"icon"},[l("i",{class:"fas fa-globe"})],-1),l("div",{class:"label"},"WEB Activity",-1)]),2)]),l("div",Ml,[o[29]||(o[29]=l("h4",{class:"mb-3"},"Timeline",-1)),v.value==="email"||v.value==="sms"?(d(),m("div",Nl,[o[19]||(o[19]=l("label",{class:"me-2 fw-bold"},"Filter:",-1)),a(l("select",{"onUpdate:modelValue":o[6]||(o[6]=n=>k.value=n),class:"form-select w-auto d-inline-block"},o[18]||(o[18]=[l("option",{value:"all"},"All",-1),l("option",{value:"sent"},"Sent",-1),l("option",{value:"received"},"Received",-1)]),512),[[_,k.value]])])):f("",!0),(d(!0),m(L,null,M(P.value,n=>(d(),m("div",{key:n.id,class:"card mb-2"},[l("div",El,[l("h5",Pl,u(n.title),1),l("p",Dl,[n.type==="email"&&n.direction==="received"?(d(),m("span",Fl," From: "+u(n.from),1)):n.type==="email"&&n.direction==="sent"?(d(),m("span",Il," To: "+u(n.to),1)):n.type==="sms"&&n.direction==="received"?(d(),m("span",Bl," From: "+u(n.phone),1)):n.type==="sms"&&n.direction==="sent"?(d(),m("span",Rl," To: "+u(n.phone),1)):f("",!0),o[20]||(o[20]=l("br",null,null,-1)),l("span",{innerHTML:n.description},null,8,Hl)]),l("p",ql,u(n.date)+" "+u(n.time),1),n.type==="email"&&n.direction==="received"?(d(),m("button",{key:0,class:"btn btn-sm btn-primary",onClick:A=>C(n)}," Reply ",8,Ol)):f("",!0),n.type==="email"?(d(),m("button",{key:1,class:"btn btn-sm btn-info ms-2",onClick:A=>F(n)}," View ",8,jl)):f("",!0),n.type==="sms"?(d(),m("button",{key:2,class:"btn btn-sm btn-info ms-2",onClick:A=>D(n)}," View ",8,zl)):f("",!0)])]))),128)),t.value?(d(),m("div",_l,[l("div",Wl,[l("div",Yl,[l("div",Zl,[l("h5",Gl,u(e.value.title),1),l("button",{type:"button",class:"btn-close",onClick:o[7]||(o[7]=n=>t.value=!1)})]),l("div",Jl,[l("p",null,[o[21]||(o[21]=l("strong",null,"From:",-1)),V(" "+u(e.value.from),1)]),e.value.to?(d(),m("p",Xl,[o[22]||(o[22]=l("strong",null,"To:",-1)),V(" "+u(e.value.to),1)])):f("",!0),l("p",null,[o[23]||(o[23]=l("strong",null,"Subject:",-1)),V(" "+u(e.value.description),1)]),o[25]||(o[25]=l("hr",null,null,-1)),l("div",{innerHTML:e.value.body_html||e.value.body_plain},null,8,Kl),e.value.attachments&&e.value.attachments.length?(d(),m("div",Ql,[o[24]||(o[24]=l("h6",null,"Attachments:",-1)),l("ul",null,[(d(!0),m(L,null,M(e.value.attachments,(n,A)=>(d(),m("li",{key:A},[l("a",{href:n,target:"_blank"},u(I(n)),9,hl)]))),128))])])):f("",!0)]),l("div",lt,[l("button",{type:"button",class:"btn btn-secondary",onClick:o[8]||(o[8]=n=>t.value=!1)},"Close"),e.value.type==="email"&&e.value.direction==="received"?(d(),m("button",{key:0,class:"btn btn-primary",onClick:o[9]||(o[9]=n=>{C(e.value),t.value=!1})}," Reply ")):f("",!0)])])])])):f("",!0),x.value?(d(),m("div",tt,[l("div",et,[l("div",st,[l("div",ot,[l("h5",nt,u(p.value.title),1),l("button",{type:"button",class:"btn-close",onClick:o[10]||(o[10]=n=>x.value=!1)})]),l("div",at,[l("p",null,[o[26]||(o[26]=l("strong",null,"From:",-1)),V(" "+u(p.value.direction==="received"?p.value.phone:"You"),1)]),l("p",null,[o[27]||(o[27]=l("strong",null,"To:",-1)),V(" "+u(p.value.direction==="sent"?p.value.phone:"You"),1)]),o[28]||(o[28]=l("p",null,[l("strong",null,"Message:")],-1)),l("div",it,u(p.value.description),1),l("p",dt,u(p.value.date)+" "+u(p.value.time),1)]),l("div",rt,[l("button",{type:"button",class:"btn btn-secondary",onClick:o[11]||(o[11]=n=>x.value=!1)},"Close")])])])])):f("",!0)])]))}},mt=E(ut,[["__scopeId","data-v-018d21b5"]]),pt={class:"lead-management container mt-4"},vt={class:"d-flex justify-content-between align-items-center mb-3"},bt={class:"badge bg-primary me-2"},ct={class:"badge bg-secondary me-2"},ft={class:"badge bg-info"},gt={class:"nav nav-tabs mb-3"},kt={class:"nav-item"},yt={class:"nav-item"},$t={class:"nav-item"},St={__name:"UpdateLeadPage",setup(T){const b=g("timeline"),s={first_name:"John",stage:"Prospect",source:"Website",customTag:"VIP"};return(x,p)=>(d(),m("div",pt,[l("div",vt,[l("div",null,[l("h2",null,u(s.first_name),1),l("span",bt,u(s.stage),1),l("span",ct,u(s.source),1),l("span",ft,u(s.customTag),1)]),p[3]||(p[3]=l("div",null,[l("button",{class:"btn btn-danger me-2"},[l("i",{class:"fas fa-microphone"})]),l("button",{class:"btn btn-danger"},[l("i",{class:"fas fa-times"})])],-1))]),l("ul",gt,[l("li",kt,[l("a",{class:y(["nav-link",{active:b.value==="timeline"}]),onClick:p[0]||(p[0]=t=>b.value="timeline")},"Timeline",2)]),l("li",yt,[l("a",{class:y(["nav-link",{active:b.value==="profile"}]),onClick:p[1]||(p[1]=t=>b.value="profile")},"Profile",2)]),l("li",$t,[l("a",{class:y(["nav-link",{active:b.value==="analytics"}]),onClick:p[2]||(p[2]=t=>b.value="analytics")},"Analytics",2)])]),b.value==="timeline"?(d(),S(mt,{key:0})):f("",!0),b.value==="profile"?(d(),S(Sl,{key:1})):f("",!0),b.value==="analytics"?(d(),S(W,{key:2})):f("",!0)]))}};export{St as default};
