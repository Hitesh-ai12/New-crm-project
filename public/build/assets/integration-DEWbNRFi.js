import{_ as A,l as c,j as t,X as p,F as h,Y as g,o as i,P as k,k as l}from"./main-DEwZK6_v.js";const w={name:"IntegrationPage",data(){return{showDropdown:!1,connectedAccounts:[],cards:[{id:1,title:"Facebook Integration",description:"Lead Ads Integration for Facebook."},{id:2,title:"Google Integration",description:"Lead Ads Integration for Google Ads."}]}},mounted(){this.loadConnectedAccounts()},methods:{toggleDropdown(){this.showDropdown=!this.showDropdown},handleIntegration(o){this.showDropdown=!1;const e={"Facebook Ads":"https://www.facebook.com/v18.0/dialog/oauth?client_id=983501733459311&redirect_uri=https://jsithub.com/test&response_type=token&scope=public_profile,email&display=popup","Google Ads":"https://accounts.google.com/o/oauth2/auth?client_id=932644499351-u8hu1a2885v7277npsisd0u31mopjulc.apps.googleusercontent.com&redirect_uri=http://127.0.0.1:8000/&response_type=token&scope=https://www.googleapis.com/auth/adwords&state=google_ads"};e[o]?this.openOAuthPopup(o,e[o]):alert(`Integration for ${o} is under development.`)},openOAuthPopup(o,e){const d=window.open(e,`${o} Login`,"width=600,height=700"),a=setInterval(()=>{try{if(d&&d.location.href.includes("access_token")){const s=this.extractAccessToken(d.location.href);s&&(this.connectedAccounts.push({platform:o,token:s}),this.saveConnectedAccounts(),d.close(),clearInterval(a))}}catch{}},1e3)},extractAccessToken(o){const e=o.match(/access_token=([^&]+)/);return e?e[1]:null},saveConnectedAccounts(){localStorage.setItem("connectedAccounts",JSON.stringify(this.connectedAccounts))},loadConnectedAccounts(){const o=localStorage.getItem("connectedAccounts");o&&(this.connectedAccounts=JSON.parse(o))},removeAccount(o){this.connectedAccounts.splice(o,1),this.saveConnectedAccounts()}}},_={class:"container"},m={class:"header"},v={key:0,class:"dropdown"},f={key:0,class:"connected-accounts"},I=["onClick"],C={class:"cards-container"};function b(o,e,d,a,s,r){return i(),c("div",_,[t("div",m,[e[3]||(e[3]=t("h1",null,"Integration",-1)),t("button",{onClick:e[0]||(e[0]=(...n)=>r.toggleDropdown&&r.toggleDropdown(...n))},"+ Add New"),s.showDropdown?(i(),c("div",v,[t("ul",null,[t("li",{onClick:e[1]||(e[1]=n=>r.handleIntegration("Facebook Ads"))},"Facebook Ads"),t("li",{onClick:e[2]||(e[2]=n=>r.handleIntegration("Google Ads"))},"Google Ads")])])):p("",!0)]),s.connectedAccounts.length?(i(),c("div",f,[e[4]||(e[4]=t("h2",null,"Connected Accounts",-1)),t("ul",null,[(i(!0),c(h,null,g(s.connectedAccounts,(n,u)=>(i(),c("li",{key:u},[k(l(n.platform)+" - "+l(n.token.substring(0,15))+"... ",1),t("button",{onClick:y=>r.removeAccount(u)},"Remove",8,I)]))),128))])])):p("",!0),t("div",C,[(i(!0),c(h,null,g(s.cards,n=>(i(),c("div",{class:"card",key:n.id},[t("h2",null,l(n.title),1),t("p",null,l(n.description),1)]))),128))])])}const F=A(w,[["render",b],["__scopeId","data-v-e9018867"]]);export{F as default};
