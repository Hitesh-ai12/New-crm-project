import{g as Y9}from"./_commonjsHelpers-Cpj98o6Y.js";var oN={exports:{}};(function(rN){(function(){var cg=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},aN=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},iN=function(e,t){var n=Array.prototype.slice.call(e);return n.sort(t)},cN=function(e,t){return wr(function(n,s){return e.eq(t(n),t(s))})},wr=function(e){return{eq:e}},lN=wr(function(e,t){return e===t}),uN=lN,lg=function(e){return wr(function(t,n){if(t.length!==n.length)return!1;for(var s=t.length,o=0;o<s;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},fN=function(e,t){return cN(lg(e),function(n){return iN(n,t)})},ug=function(e){return wr(function(t,n){var s=Object.keys(t),o=Object.keys(n);if(!fN(uN).eq(s,o))return!1;for(var r=s.length,a=0;a<r;a++){var i=s[a];if(!e.eq(t[i],n[i]))return!1}return!0})},wl=wr(function(e,t){if(e===t)return!0;var n=cg(e),s=cg(t);return n!==s?!1:aN(n)?e===t:n==="array"?lg(wl).eq(e,t):n==="object"?ug(wl).eq(e,t):!1});const dN=Object.getPrototypeOf,fg=(e,t,n)=>{var s;return n(e,t.prototype)?!0:((s=e.constructor)===null||s===void 0?void 0:s.name)===t.name},mN=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&fg(e,String,(n,s)=>s.isPrototypeOf(n))?"string":t},kl=e=>t=>mN(t)===e,xl=e=>t=>typeof t===e,dg=e=>t=>e===t,ai=(e,t)=>ot(e)&&fg(e,t,(n,s)=>dN(n)===s),Q=kl("string"),ot=kl("object"),ii=e=>ai(e,Object),Fe=kl("array"),St=dg(null),Bn=xl("boolean"),rt=dg(void 0),Ve=e=>e==null,M=e=>!Ve(e),we=xl("function"),fn=xl("number"),Fs=(e,t)=>{if(Fe(e)){for(let n=0,s=e.length;n<s;++n)if(!t(e[n]))return!1;return!0}return!1},le=()=>{},vn=(e,t)=>(...n)=>e(t.apply(null,n)),mg=(e,t)=>n=>e(t(n)),H=e=>()=>e,wt=e=>e,gg=(e,t)=>e===t;function q(e,...t){return(...n)=>{const s=t.concat(n);return e.apply(null,s)}}const kr=e=>t=>!e(t),pg=e=>()=>{throw new Error(e)},_l=e=>e(),xr=e=>{e()},De=H(!1),He=H(!0);class m{constructor(t,n){this.tag=t,this.value=n}static some(t){return new m(!0,t)}static none(){return m.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?m.some(t(this.value)):m.none()}bind(t){return this.tag?t(this.value):m.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:m.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return M(t)?m.some(t):m.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}m.singletonNone=new m(!1);const Nl=Array.prototype.slice,gN=Array.prototype.indexOf,pN=Array.prototype.push,hg=(e,t)=>gN.call(e,t),hN=(e,t)=>{const n=hg(e,t);return n===-1?m.none():m.some(n)},Ee=(e,t)=>hg(e,t)>-1,Le=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return!0}return!1},pe=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const r=e[o];s[o]=t(r,o)}return s},T=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];t(o,n)}},bg=(e,t)=>{for(let n=e.length-1;n>=0;n--){const s=e[n];t(s,n)}},xo=(e,t)=>{const n=[],s=[];for(let o=0,r=e.length;o<r;o++){const a=e[o];(t(a,o)?n:s).push(a)}return{pass:n,fail:s}},se=(e,t)=>{const n=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];t(r,s)&&n.push(r)}return n},_r=(e,t,n)=>(bg(e,(s,o)=>{n=t(n,s,o)}),n),Lt=(e,t,n)=>(T(e,(s,o)=>{n=t(n,s,o)}),n),Cg=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++){const r=e[s];if(t(r,s))return m.some(r);if(n(r,s))break}return m.none()},Ye=(e,t)=>Cg(e,t,De),Nr=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return m.some(n)}return m.none()},yg=e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!Fe(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);pN.apply(t,e[n])}return t},Zt=(e,t)=>yg(pe(e,t)),es=(e,t)=>{for(let n=0,s=e.length;n<s;++n){const o=e[n];if(t(o,n)!==!0)return!1}return!0},Ar=e=>{const t=Nl.call(e,0);return t.reverse(),t},ci=(e,t)=>se(e,n=>!Ee(t,n)),Al=(e,t)=>{const n={};for(let s=0,o=e.length;s<o;s++){const r=e[s];n[String(r)]=t(r,s)}return n},Ms=(e,t)=>{const n=Nl.call(e,0);return n.sort(t),n},Rr=(e,t)=>t>=0&&t<e.length?m.some(e[t]):m.none(),Rt=e=>Rr(e,0),bs=e=>Rr(e,e.length-1),Wt=we(Array.from)?Array.from:e=>Nl.call(e),_o=(e,t)=>{for(let n=0;n<e.length;n++){const s=t(e[n],n);if(s.isSome())return s}return m.none()},vg=(e,t)=>{const n=[],s=we(t)?o=>Le(n,r=>t(r,o)):o=>Ee(n,o);for(let o=0,r=e.length;o<r;o++){const a=e[o];s(a)||n.push(a)}return n},$t=Object.keys,bN=Object.hasOwnProperty,_e=(e,t)=>{const n=$t(e);for(let s=0,o=n.length;s<o;s++){const r=n[s],a=e[r];t(a,r)}},Tr=(e,t)=>CN(e,(n,s)=>({k:s,v:t(n,s)})),CN=(e,t)=>{const n={};return _e(e,(s,o)=>{const r=t(s,o);n[r.k]=r.v}),n},Rl=e=>(t,n)=>{e[n]=t},Eg=(e,t,n,s)=>{_e(e,(o,r)=>{(t(o,r)?n:s)(o,r)})},yN=(e,t)=>{const n={},s={};return Eg(e,t,Rl(n),Rl(s)),{t:n,f:s}},Pr=(e,t)=>{const n={};return Eg(e,t,Rl(n),le),n},li=(e,t)=>{const n=[];return _e(e,(s,o)=>{n.push(t(s,o))}),n},Tl=e=>li(e,wt),Ae=(e,t)=>oe(e,t)?m.from(e[t]):m.none(),oe=(e,t)=>bN.call(e,t),No=(e,t)=>oe(e,t)&&e[t]!==void 0&&e[t]!==null,vN=(e,t,n=wl)=>ug(n).eq(e,t),Sg=e=>{const t={};return T(e,n=>{t[n]={}}),$t(t)},wg=e=>e.length!==void 0,Pl=Array.isArray,EN=e=>{if(Pl(e))return e;{const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=e[n];return t}},ui=(e,t,n)=>{if(!e)return!1;if(n=n||e,wg(e)){for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e)===!1)return!1}else for(const s in e)if(oe(e,s)&&t.call(n,e[s],s,e)===!1)return!1;return!0},Dl=(e,t)=>{const n=[];return ui(e,(s,o)=>{n.push(t(s,o,e))}),n},Dr=(e,t)=>{const n=[];return ui(e,(s,o)=>{(!t||t(s,o,e))&&n.push(s)}),n},SN=(e,t)=>{if(e){for(let n=0,s=e.length;n<s;n++)if(e[n]===t)return n}return-1},fi=(e,t,n,s)=>{let o=rt(n)?e[0]:n;for(let r=0;r<e.length;r++)o=t.call(s,o,e[r],r);return o},kg=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e))return s;return-1},Us=e=>e[e.length-1],In=e=>{let t=!1,n;return(...s)=>(t||(t=!0,n=e.apply(null,s)),n)},wN=(e,t,n,s)=>{const o=e.isiOS()&&/ipad/i.test(n)===!0,r=e.isiOS()&&!o,a=e.isiOS()||e.isAndroid(),i=a||s("(pointer:coarse)"),c=o||!r&&a&&s("(min-device-width:768px)"),l=r||a&&!c,u=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,f=!l&&!c&&!u;return{isiPad:H(o),isiPhone:H(r),isTablet:H(c),isPhone:H(l),isTouch:H(i),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:H(u),isDesktop:H(f)}},kN=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(t))return s}},xN=(e,t)=>{const n=kN(e,t);if(!n)return{major:0,minor:0};const s=o=>Number(t.replace(n,"$"+o));return Ol(s(1),s(2))},_N=(e,t)=>{const n=String(t).toLowerCase();return e.length===0?xg():xN(e,n)},xg=()=>Ol(0,0),Ol=(e,t)=>({major:e,minor:t}),Or={nu:Ol,detect:_N,unknown:xg},NN=(e,t)=>_o(t.brands,n=>{const s=n.brand.toLowerCase();return Ye(e,o=>{var r;return s===((r=o.brand)===null||r===void 0?void 0:r.toLowerCase())}).map(o=>({current:o.name,version:Or.nu(parseInt(n.version,10),0)}))}),_g=(e,t)=>{const n=String(t).toLowerCase();return Ye(e,s=>s.search(n))},AN=(e,t)=>_g(e,t).map(n=>{const s=Or.detect(n.versionRegexes,t);return{current:n.name,version:s}}),RN=(e,t)=>_g(e,t).map(n=>{const s=Or.detect(n.versionRegexes,t);return{current:n.name,version:s}}),TN=(e,t)=>e.substring(t),Ng=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,Ag=(e,t)=>Xe(e,t)?TN(e,t.length):e,gt=(e,t,n=0,s)=>{const o=e.indexOf(t,n);return o!==-1?rt(s)?!0:o+t.length<=s:!1},Xe=(e,t)=>Ng(e,t,0),Bl=(e,t)=>Ng(e,t,e.length-t.length),Il=e=>t=>t.replace(e,""),Ao=Il(/^\s+|\s+$/g),PN=Il(/^\s+/g),Rg=Il(/\s+$/g),Ln=e=>e.length>0,Br=e=>!Ln(e),DN=(e,t)=>t<=0?"":new Array(t+1).join(e),di=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?m.none():m.some(n)},Ll=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ts=e=>t=>gt(t,e),ON=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>gt(e,"edge/")&&gt(e,"chrome")&&gt(e,"safari")&&gt(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ll],search:e=>gt(e,"chrome")&&!gt(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>gt(e,"msie")||gt(e,"trident")},{name:"Opera",versionRegexes:[Ll,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ts("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ts("firefox")},{name:"Safari",versionRegexes:[Ll,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(gt(e,"safari")||gt(e,"mobile/"))&&gt(e,"applewebkit")}],BN=[{name:"Windows",search:ts("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>gt(e,"iphone")||gt(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ts("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ts("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ts("linux"),versionRegexes:[]},{name:"Solaris",search:ts("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ts("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ts("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Tg={browsers:H(ON),oses:H(BN)},Pg="Edge",Dg="Chromium",Og="IE",Bg="Opera",Ig="Firefox",Lg="Safari",IN=()=>$g({current:void 0,version:Or.unknown()}),$g=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isEdge:s(Pg),isChromium:s(Dg),isIE:s(Og),isOpera:s(Bg),isFirefox:s(Ig),isSafari:s(Lg)}},Fg={unknown:IN,nu:$g,edge:H(Pg),chromium:H(Dg),ie:H(Og),opera:H(Bg),firefox:H(Ig),safari:H(Lg)},Mg="Windows",Ug="iOS",zg="Android",Hg="Linux",Wg="macOS",Vg="Solaris",jg="FreeBSD",qg="ChromeOS",LN=()=>Kg({current:void 0,version:Or.unknown()}),Kg=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isWindows:s(Mg),isiOS:s(Ug),isAndroid:s(zg),isMacOS:s(Wg),isLinux:s(Hg),isSolaris:s(Vg),isFreeBSD:s(jg),isChromeOS:s(qg)}},Gg={unknown:LN,nu:Kg,windows:H(Mg),ios:H(Ug),android:H(zg),linux:H(Hg),macos:H(Wg),solaris:H(Vg),freebsd:H(jg),chromeos:H(qg)},$N={detect:(e,t,n)=>{const s=Tg.browsers(),o=Tg.oses(),r=t.bind(c=>NN(s,c)).orThunk(()=>AN(s,e)).fold(Fg.unknown,Fg.nu),a=RN(o,e).fold(Gg.unknown,Gg.nu),i=wN(a,r,e,n);return{browser:r,os:a,deviceType:i}}},FN=e=>window.matchMedia(e).matches;let MN=In(()=>$N.detect(window.navigator.userAgent,m.from(window.navigator.userAgentData),FN));const $n=()=>MN(),UN=window.navigator.userAgent,$l=$n(),Fn=$l.browser,Mn=$l.os,zs=$l.deviceType,zN=UN.indexOf("Windows Phone")!==-1,Ce={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Fn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Fn.isIE(),windowsPhone:zN,browser:{current:Fn.current,version:Fn.version,isChromium:Fn.isChromium,isEdge:Fn.isEdge,isFirefox:Fn.isFirefox,isIE:Fn.isIE,isOpera:Fn.isOpera,isSafari:Fn.isSafari},os:{current:Mn.current,version:Mn.version,isAndroid:Mn.isAndroid,isChromeOS:Mn.isChromeOS,isFreeBSD:Mn.isFreeBSD,isiOS:Mn.isiOS,isLinux:Mn.isLinux,isMacOS:Mn.isMacOS,isSolaris:Mn.isSolaris,isWindows:Mn.isWindows},deviceType:{isDesktop:zs.isDesktop,isiPad:zs.isiPad,isiPhone:zs.isiPhone,isPhone:zs.isPhone,isTablet:zs.isTablet,isTouch:zs.isTouch,isWebView:zs.isWebView}},HN=/^\s*|\s*$/g,Yg=e=>Ve(e)?"":(""+e).replace(HN,""),WN=(e,t)=>t?t==="array"&&Pl(e)?!0:typeof e===t:e!==void 0,VN=(e,t,n={})=>{const s=Q(e)?e.split(t||","):e||[];let o=s.length;for(;o--;)n[s[o]]={};return n},jN=oe,qN=(e,...t)=>{for(let n=0;n<t.length;n++){const s=t[n];for(const o in s)if(oe(s,o)){const r=s[o];r!==void 0&&(e[o]=r)}}return e},Xg=function(e,t,n,s){s=s||this,e&&(n&&(e=e[n]),ui(e,(o,r)=>t.call(s,o,r,n)===!1?!1:(Xg(o,t,n,s),!0)))},I={trim:Yg,isArray:Pl,is:WN,toArray:EN,makeMap:VN,each:ui,map:Dl,grep:Dr,inArray:SN,hasOwn:jN,extend:qN,walk:Xg,resolve:(e,t=window)=>{const n=e.split(".");for(let s=0,o=n.length;s<o&&(t=t[n[s]],!!t);s++);return t},explode:(e,t)=>Fe(e)?e:e===""?[]:Dl(e.split(t||","),Yg),_addCacheSuffix:e=>{const t=Ce.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},Ro=(e,t,n=gg)=>e.exists(s=>n(s,t)),Zg=(e,t,n=gg)=>pt(e,t,n).getOr(e.isNone()&&t.isNone()),KN=e=>{const t=[],n=s=>{t.push(s)};for(let s=0;s<e.length;s++)e[s].each(n);return t},pt=(e,t,n)=>e.isSome()&&t.isSome()?m.some(n(e.getOrDie(),t.getOrDie())):m.none(),GN=(e,t,n,s)=>e.isSome()&&t.isSome()&&n.isSome()?m.some(s(e.getOrDie(),t.getOrDie(),n.getOrDie())):m.none(),To=(e,t)=>e?m.some(t):m.none(),YN=typeof window<"u"?window:Function("return this;")(),XN=(e,t)=>{let n=t??YN;for(let s=0;s<e.length&&n!==void 0&&n!==null;++s)n=n[e[s]];return n},Qg=(e,t)=>{const n=e.split(".");return XN(n,t)},ZN=(e,t)=>Qg(e,t),QN=(e,t)=>{const n=ZN(e,t);if(n==null)throw new Error(e+" not available on this browser");return n},JN=Object.getPrototypeOf,e0=e=>QN("HTMLElement",e),t0=e=>{const t=Qg("ownerDocument.defaultView",e);return ot(e)&&(e0(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(JN(e).constructor.name))},mi=8,Jg=9,ep=11,Ir=1,tp=3,he=e=>e.dom.nodeName.toLowerCase(),np=e=>e.dom.nodeType,gi=e=>t=>np(t)===e,n0=e=>np(e)===mi||he(e)==="#comment",pi=e=>Vt(e)&&t0(e.dom),Vt=gi(Ir),Tt=gi(tp),s0=gi(Jg),o0=gi(ep),hi=e=>t=>Vt(t)&&he(t)===e,sp=(e,t,n)=>{if(Q(n)||Bn(n)||fn(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},at=(e,t,n)=>{sp(e.dom,t,n)},ns=(e,t)=>{const n=e.dom;_e(t,(s,o)=>{sp(n,o,s)})},jt=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},ss=(e,t)=>m.from(jt(e,t)),Lr=(e,t)=>{const n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):!1},it=(e,t)=>{e.dom.removeAttribute(t)},r0=e=>{const t=e.dom.attributes;return t==null||t.length===0},op=e=>Lt(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),Fl=(e,t)=>{const n=jt(e,t);return n===void 0||n===""?[]:n.split(" ")},a0=(e,t,n)=>{const o=Fl(e,t).concat([n]);return at(e,t,o.join(" ")),!0},i0=(e,t,n)=>{const s=se(Fl(e,t),o=>o!==n);return s.length>0?at(e,t,s.join(" ")):it(e,t),!1},$r=e=>e.dom.classList!==void 0,rp=e=>Fl(e,"class"),ap=(e,t)=>a0(e,"class",t),ip=(e,t)=>i0(e,"class",t),c0=(e,t)=>Ee(rp(e),t)?ip(e,t):ap(e,t),Po=(e,t)=>{$r(e)?e.dom.classList.add(t):ap(e,t)},cp=e=>{($r(e)?e.dom.classList:rp(e)).length===0&&it(e,"class")},Fr=(e,t)=>{$r(e)?e.dom.classList.remove(t):ip(e,t),cp(e)},l0=(e,t)=>{const n=$r(e)?e.dom.classList.toggle(t):c0(e,t);return cp(e),n},Ml=(e,t)=>$r(e)&&e.dom.classList.contains(t),u0=(e,t)=>{const s=(t||document).createElement("div");if(s.innerHTML=e,!s.hasChildNodes()||s.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return Mr(s.childNodes[0])},f0=(e,t)=>{const s=(t||document).createElement(e);return Mr(s)},d0=(e,t)=>{const s=(t||document).createTextNode(e);return Mr(s)},Mr=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},C={fromHtml:u0,fromTag:f0,fromText:d0,fromDom:Mr,fromPoint:(e,t,n)=>m.from(e.dom.elementFromPoint(t,n)).map(Mr)},lp=(e,t)=>{const n=[],s=r=>(n.push(r),t(r));let o=t(e);do o=o.bind(s);while(o.isSome());return n},En=(e,t)=>{const n=e.dom;if(n.nodeType!==Ir)return!1;{const s=n;if(s.matches!==void 0)return s.matches(t);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(t);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(t);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},up=e=>e.nodeType!==Ir&&e.nodeType!==Jg&&e.nodeType!==ep||e.childElementCount===0,m0=(e,t)=>{const n=t===void 0?document:t.dom;return up(n)?[]:pe(n.querySelectorAll(e),C.fromDom)},g0=(e,t)=>{const n=t===void 0?document:t.dom;return up(n)?m.none():m.from(n.querySelector(e)).map(C.fromDom)},ve=(e,t)=>e.dom===t.dom,Sn=(e,t)=>{const n=e.dom,s=t.dom;return n===s?!1:n.contains(s)},fp=e=>C.fromDom(e.dom.ownerDocument),Cs=e=>s0(e)?e:fp(e),p0=e=>C.fromDom(Cs(e).dom.documentElement),Ur=e=>C.fromDom(Cs(e).dom.defaultView),wn=e=>m.from(e.dom.parentNode).map(C.fromDom),bi=e=>m.from(e.dom.parentElement).map(C.fromDom),dp=(e,t)=>{const n=we(t)?t:De;let s=e.dom;const o=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){const r=s.parentNode,a=C.fromDom(r);if(o.push(a),n(a)===!0)break;s=r}return o},h0=e=>{const t=n=>se(n,s=>!ve(e,s));return wn(e).map(ht).map(t).getOr([])},ys=e=>m.from(e.dom.previousSibling).map(C.fromDom),zr=e=>m.from(e.dom.nextSibling).map(C.fromDom),mp=e=>Ar(lp(e,ys)),gp=e=>lp(e,zr),ht=e=>pe(e.dom.childNodes,C.fromDom),Do=(e,t)=>{const n=e.dom.childNodes;return m.from(n[t]).map(C.fromDom)},Ul=e=>Do(e,0),zl=e=>Do(e,e.dom.childNodes.length-1),Hl=e=>e.dom.childNodes.length,b0=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return C.fromDom(t)},Wl=e=>o0(e)&&M(e.dom.host),vs=e=>C.fromDom(e.dom.getRootNode()),Vl=e=>Wl(e)?e:b0(Cs(e)),C0=e=>Wl(e)?e:C.fromDom(Cs(e).dom.body),y0=e=>{const t=vs(e);return Wl(t)?m.some(t):m.none()},v0=e=>C.fromDom(e.dom.host),pp=e=>{if(M(e.target)){const t=C.fromDom(e.target);if(Vt(t)&&E0(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return Rt(n)}}return m.from(e.target)},E0=e=>M(e.dom.shadowRoot),Oo=e=>{const t=Tt(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return y0(C.fromDom(t)).fold(()=>n.body.contains(t),mg(Oo,v0))};var hp=(e,t,n,s,o)=>e(n,s)?m.some(n):we(o)&&o(n)?m.none():t(n,s,o);const os=(e,t,n)=>{let s=e.dom;const o=we(n)?n:De;for(;s.parentNode;){s=s.parentNode;const r=C.fromDom(s);if(t(r))return m.some(r);if(o(r))break}return m.none()},Hs=(e,t,n)=>hp((o,r)=>r(o),os,e,t,n),S0=(e,t)=>{const n=e.dom;return n.parentNode?w0(C.fromDom(n.parentNode),s=>!ve(e,s)&&t(s)):m.none()},w0=(e,t)=>{const n=o=>t(C.fromDom(o));return Ye(e.dom.childNodes,n).map(C.fromDom)},jl=(e,t)=>{const n=s=>{for(let o=0;o<s.childNodes.length;o++){const r=C.fromDom(s.childNodes[o]);if(t(r))return m.some(r);const a=n(s.childNodes[o]);if(a.isSome())return a}return m.none()};return n(e.dom)},Hr=(e,t,n)=>os(e,s=>En(s,t),n),Ci=(e,t)=>g0(t,e),Bo=(e,t,n)=>hp((o,r)=>En(o,r),Hr,e,t,n),k0=e=>Bo(e,"[contenteditable]"),Ws=(e,t=!1)=>Oo(e)?e.dom.isContentEditable:k0(e).fold(H(t),n=>x0(n)==="true"),x0=e=>e.dom.contentEditable,yi=(e,t)=>{e.dom.contentEditable=t?"true":"false"},Wr=e=>e.style!==void 0&&we(e.style.getPropertyValue),bp=(e,t,n)=>{if(!Q(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Wr(e)&&e.style.setProperty(t,n)},_0=(e,t)=>{Wr(e)&&e.style.removeProperty(t)},Cp=(e,t,n)=>{const s=e.dom;bp(s,t,n)},vi=(e,t)=>{const n=e.dom;_e(t,(s,o)=>{bp(n,o,s)})},Un=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o===""&&!Oo(e)?yp(n,t):o},yp=(e,t)=>Wr(e)?e.style.getPropertyValue(t):"",Ei=(e,t)=>{const n=e.dom,s=yp(n,t);return m.from(s).filter(o=>o.length>0)},ql=e=>{const t={},n=e.dom;if(Wr(n))for(let s=0;s<n.style.length;s++){const o=n.style.item(s);t[o]=n.style[o]}return t},vp=(e,t)=>{const n=e.dom;_0(n,t),Ro(ss(e,"style").map(Ao),"")&&it(e,"style")},N0=e=>e.dom.offsetWidth,Ft=(e,t)=>{wn(e).each(s=>{s.dom.insertBefore(t.dom,e.dom)})},rs=(e,t)=>{zr(e).fold(()=>{wn(e).each(o=>{je(o,t)})},s=>{Ft(s,t)})},Kl=(e,t)=>{Ul(e).fold(()=>{je(e,t)},s=>{e.dom.insertBefore(t.dom,s.dom)})},je=(e,t)=>{e.dom.appendChild(t.dom)},Ep=(e,t)=>{Ft(e,t),je(t,e)},A0=(e,t)=>{T(t,(n,s)=>{const o=s===0?e:t[s-1];rs(o,n)})},Vs=(e,t)=>{T(t,n=>{je(e,n)})},Io=e=>{e.dom.textContent="",T(ht(e),t=>{Re(t)})},Re=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},Es=e=>{const t=ht(e);t.length>0&&A0(e,t),Re(e)},R0=(e,t)=>{const s=(t||document).createElement("div");return s.innerHTML=e,ht(C.fromDom(s))},Gl=e=>pe(e,C.fromDom),Sp=e=>e.dom.innerHTML,Si=(e,t)=>{const s=fp(e).dom,o=C.fromDom(s.createDocumentFragment()),r=R0(t,s);Vs(o,r),Io(e),je(e,o)},T0=e=>{const t=C.fromTag("div"),n=C.fromDom(e.dom.cloneNode(!0));return je(t,n),Sp(t)},P0=(e,t,n,s,o,r,a)=>({target:e,x:t,y:n,stop:s,prevent:o,kill:r,raw:a}),D0=e=>{const t=C.fromDom(pp(e).getOr(e.target)),n=()=>e.stopPropagation(),s=()=>e.preventDefault(),o=vn(s,n);return P0(t,e.clientX,e.clientY,n,s,o,e)},O0=(e,t)=>n=>{e(n)&&t(D0(n))},B0=(e,t,n,s,o)=>{const r=O0(n,s);return e.dom.addEventListener(t,r,o),{unbind:q(L0,e,t,r,o)}},I0=(e,t,n,s)=>B0(e,t,n,s,!1),L0=(e,t,n,s)=>{e.dom.removeEventListener(t,n,s)},wp=(e,t)=>({left:e,top:t,translate:(s,o)=>wp(e+s,t+o)}),Lo=wp,$0=e=>{const t=e.getBoundingClientRect();return Lo(t.left,t.top)},wi=(e,t)=>e!==void 0?e:t!==void 0?t:0,F0=e=>{const t=e.dom.ownerDocument,n=t.body,s=t.defaultView,o=t.documentElement;if(n===e.dom)return Lo(n.offsetLeft,n.offsetTop);const r=wi(s==null?void 0:s.pageYOffset,o.scrollTop),a=wi(s==null?void 0:s.pageXOffset,o.scrollLeft),i=wi(o.clientTop,n.clientTop),c=wi(o.clientLeft,n.clientLeft);return Yl(e).translate(a-c,r-i)},Yl=e=>{const t=e.dom,s=t.ownerDocument.body;return s===t?Lo(s.offsetLeft,s.offsetTop):Oo(e)?$0(t):Lo(0,0)},Xl=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return Lo(n,s)},kp=(e,t,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(e,t)},xp=(e,t)=>{$n().browser.isSafari()&&we(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},M0=e=>{const t=e===void 0?window:e;return $n().browser.isFirefox()?m.none():m.from(t.visualViewport)},_p=(e,t,n,s)=>({x:e,y:t,width:n,height:s,right:e+n,bottom:t+s}),Np=e=>{const t=e===void 0?window:e,n=t.document,s=Xl(C.fromDom(n));return M0(t).fold(()=>{const o=t.document.documentElement,r=o.clientWidth,a=o.clientHeight;return _p(s.left,s.top,r,a)},o=>_p(Math.max(o.pageLeft,s.left),Math.max(o.pageTop,s.top),o.width,o.height))},U0=(e,t)=>se(ht(e),t),Ap=(e,t)=>{let n=[];return T(ht(e),s=>{t(s)&&(n=n.concat([s])),n=n.concat(Ap(s,t))}),n},bt=(e,t)=>m0(t,e),Rp=(e,t,n)=>os(e,t,n).isSome(),z0=(e,t)=>S0(e,t).isSome(),Tp=(e,t)=>jl(e,t).isSome();class et{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,s,o){if(t){if(!o&&t[n])return t[n];if(t!==this.rootNode){let r=t[s];if(r)return r;for(let a=t.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(r=a[s],r)return r}}}findPreviousNode(t,n){if(t){const s=t.previousSibling;if(this.rootNode&&s===this.rootNode)return;if(s){if(!n){for(let r=s.lastChild;r;r=r.lastChild)if(!r.lastChild)return r}return s}const o=t.parentNode;if(o&&o!==this.rootNode)return o}}}const Vr="\uFEFF",Ze=" ",Zl=e=>e===Vr,H0=e=>e.replace(/\uFEFF/g,""),W0=/^[ \t\r\n]*$/,$o=e=>W0.test(e),V0=e=>{for(const t of e)if(!Zl(t))return!1;return!0},j0=e=>" \f	\v".indexOf(e)!==-1,Pp=e=>e===`
`||e==="\r",q0=(e,t)=>t<e.length&&t>=0?Pp(e[t]):!1,Dp=(e,t=4,n=!0,s=!0)=>{const o=DN(" ",t),r=e.replace(/\t/g,o);return Lt(r,(i,c)=>j0(c)||c===Ze?i.pcIsSpace||i.str===""&&n||i.str.length===r.length-1&&s||q0(r,i.str.length+1)?{pcIsSpace:!1,str:i.str+Ze}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:Pp(c),str:i.str+c},{pcIsSpace:!1,str:""}).str},js=e=>t=>!!t&&t.nodeType===e,ki=e=>!!e&&!Object.getPrototypeOf(e),Y=js(1),as=e=>Y(e)&&pi(C.fromDom(e)),K0=e=>Y(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",jr=e=>{const t=e.toLowerCase();return n=>M(n)&&n.nodeName.toLowerCase()===t},kn=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return Ee(t,s)}return!1}},xi=(e,t)=>{const n=t.toLowerCase().split(" ");return s=>{if(Y(s)){const o=s.ownerDocument.defaultView;if(o)for(let r=0;r<n.length;r++){const a=o.getComputedStyle(s,null);if((a?a.getPropertyValue(e):null)===n[r])return!0}}return!1}},G0=e=>t=>Y(t)&&t.hasAttribute(e),qs=e=>Y(e)&&e.hasAttribute("data-mce-bogus"),Y0=e=>Y(e)&&e.getAttribute("data-mce-bogus")==="all",zn=e=>Y(e)&&e.tagName==="TABLE",Op=e=>t=>!!(as(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),Ql=kn(["textarea","input"]),O=js(3),X0=js(4),Z0=js(7),Ss=js(8),qr=js(9),Jl=js(11),$e=jr("br"),Bp=jr("img"),dn=Op("true"),Ne=Op("false"),_i=kn(["td","th"]),Q0=kn(["td","th","caption"]),Hn=kn(["video","audio","object","embed"]),J0=jr("li"),eu=jr("details"),eA=jr("summary"),Ip={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},tA=(e,t,n)=>{const s=C.fromDom(t),o=C.fromDom(e),r=n.getWhitespaceElements();return Rp(o,i=>oe(r,he(i)),q(ve,s))},nA=e=>Y(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),sA=(e,t)=>Y(e)&&oe(t.getNonEmptyElements(),e.nodeName),oA=G0("data-mce-bookmark"),rA=e=>bi(C.fromDom(e)).exists(t=>!Ws(t)),aA=(e,t,n)=>$o(e.data)&&!tA(e,t,n),iA=(e,t,n,s)=>O(e)&&!aA(e,t,n)&&(!s.includeZwsp||!V0(e.data)),tu=(e,t,n,s)=>we(s.isContent)&&s.isContent(t)||sA(t,e)||oA(t)||nA(t)||iA(t,n,e,s)||Ne(t)||dn(t)&&rA(t),is=(e,t,n)=>{const s={...Ip,...n};if(s.checkRootAsContent&&tu(e,t,t,s))return!1;let o=t.firstChild,r=0;if(!o)return!0;const a=new et(o,t);do{if(s.skipBogus&&Y(o)){const i=o.getAttribute("data-mce-bogus");if(i){o=a.next(i==="all");continue}}if(Ss(o)){o=a.next(!0);continue}if($e(o)){r++,o=a.next();continue}if(tu(e,o,t,s))return!1;o=a.next()}while(o);return r<=1},Ct=(e,t,n)=>is(e,t.dom,{checkRootAsContent:!0,...n}),Lp=(e,t,n)=>tu(e,t,t,{includeZwsp:Ip.includeZwsp,...n}),tt=e=>{let t=e;return{get:()=>t,set:o=>{t=o}}},cA=e=>{const t=tt(m.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(m.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:i=>{n(),t.set(m.some(i))}}},lA=e=>{const t=tt(m.none()),n=()=>t.get().each(i=>clearInterval(i));return{clear:()=>{n(),t.set(m.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:i=>{n(),t.set(m.some(setInterval(i,e)))}}},cs=()=>{const e=cA(le);return{...e,on:n=>e.get().each(n)}},$p=e=>{const t=e.toLowerCase();return t==="svg"?"svg":t==="math"?"math":"html"},Ks=e=>$p(e)!=="html",nu=e=>Ks(e.nodeName),Fp=e=>$p(e.nodeName),uA=["svg","math"],fA=()=>{const e=cs(),t=()=>e.get().map(Fp).getOr("html");return{track:o=>(nu(o)?e.set(o):e.get().exists(r=>!r.contains(o))&&e.clear(),t()),current:t,reset:()=>{e.clear()}}},Ni="data-mce-block",dA=e=>se($t(e),t=>!/[A-Z]/.test(t)),su=e=>pe(dA(e),t=>{const n=CSS.escape(t);return`${n}:`+pe(uA,s=>`not(${s} ${n})`).join(":")}).join(","),Mp=(e,t)=>M(t.querySelector(e))?(t.setAttribute(Ni,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Ni),!1),Up=(e,t)=>{const n=su(e.getTransparentElements()),s=su(e.getBlockElements());return se(t.querySelectorAll(n),o=>Mp(s,o))},zp=(e,t,n)=>{var s;const o=n?"lastChild":"firstChild";for(let r=t[o];r;r=r[o])if(is(e,r,{checkRootAsContent:!0})){(s=r.parentNode)===null||s===void 0||s.removeChild(r);return}},mA=(e,t,n)=>{const s=document.createRange(),o=t.parentNode;if(o){s.setStartBefore(t),s.setEndBefore(n);const r=s.extractContents();zp(e,r,!0),s.setStartAfter(n),s.setEndAfter(t);const a=s.extractContents();zp(e,a,!1),is(e,r,{checkRootAsContent:!0})||o.insertBefore(r,t),is(e,n,{checkRootAsContent:!0})||o.insertBefore(n,t),is(e,a,{checkRootAsContent:!0})||o.insertBefore(a,t),o.removeChild(t)}},gA=(e,t,n)=>{const s=e.getBlockElements(),o=C.fromDom(t),r=i=>he(i)in s,a=i=>ve(i,o);T(Gl(n),i=>{os(i,r,a).each(c=>{const l=U0(i,u=>r(u)&&!e.isValidChild(he(c),he(u)));if(l.length>0){const u=bi(c);T(l,f=>{os(f,r,a).each(d=>{mA(e,d.dom,f.dom)})}),u.each(f=>Up(e,f.dom))}})})},pA=(e,t,n)=>{T([...n,...Gs(e,t)?[t]:[]],s=>T(bt(C.fromDom(s),s.nodeName.toLowerCase()),o=>{CA(e,o.dom)&&Es(o)}))},ou=(e,t)=>{const n=Up(e,t);gA(e,t,n),pA(e,t,n)},hA=(e,t)=>{if(iu(e,t)){const n=su(e.getBlockElements());Mp(n,t)}},bA=(e,t,n)=>{const s=r=>ve(r,C.fromDom(t)),o=dp(C.fromDom(n),s);Rr(o,o.length-2).filter(Vt).fold(()=>ou(e,t),r=>ou(e,r.dom))},ru=e=>e.hasAttribute(Ni),au=(e,t)=>oe(e.getTransparentElements(),t),iu=(e,t)=>Y(t)&&au(e,t.nodeName),Gs=(e,t)=>iu(e,t)&&ru(t),CA=(e,t)=>iu(e,t)&&!ru(t),cu=(e,t)=>t.type===1&&au(e,t.name)&&Q(t.attr(Ni)),yA=$n().browser,Hp=e=>Ye(e,Vt),vA=e=>yA.isFirefox()&&he(e)==="table"?Hp(ht(e)).filter(t=>he(t)==="caption").bind(t=>Hp(gp(t)).map(n=>{const s=n.dom.offsetTop,o=t.dom.offsetTop,r=t.dom.offsetHeight;return s<=o?-r:0})).getOr(0):0,Wp=(e,t)=>e.children&&Ee(e.children,t),EA=(e,t,n)=>{let s=0,o=0;const r=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&Un(C.fromDom(e),"position")==="static"){const i=t.getBoundingClientRect();return s=i.left+(r.documentElement.scrollLeft||e.scrollLeft)-r.documentElement.clientLeft,o=i.top+(r.documentElement.scrollTop||e.scrollTop)-r.documentElement.clientTop,{x:s,y:o}}let a=t;for(;a&&a!==n&&a.nodeType&&!Wp(a,n);){const i=a;s+=i.offsetLeft||0,o+=i.offsetTop||0,a=i.offsetParent}for(a=t.parentNode;a&&a!==n&&a.nodeType&&!Wp(a,n);)s-=a.scrollLeft||0,o-=a.scrollTop||0,a=a.parentNode;o+=vA(C.fromDom(t))}return{x:s,y:o}},Vp=(e,t={})=>{let n=0;const s={},o=C.fromDom(e),r=Cs(o),a=y=>{t.referrerPolicy=y},i=y=>{t.contentCssCors=y},c=y=>{je(Vl(o),y)},l=y=>{const v=Vl(o);Ci(v,"#"+y).each(Re)},u=y=>Ae(s,y).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),f=y=>new Promise((v,E)=>{let S;const R=I._addCacheSuffix(y),D=u(R);s[R]=D,D.count++;const z=(W,X)=>{T(W,xr),D.status=X,D.passed=[],D.failed=[],S&&(S.onload=null,S.onerror=null,S=null)},A=()=>z(D.passed,2),x=()=>z(D.failed,3);if(v&&D.passed.push(v),E&&D.failed.push(E),D.status===1)return;if(D.status===2){A();return}if(D.status===3){x();return}D.status=1;const P=C.fromTag("link",r.dom);ns(P,{rel:"stylesheet",type:"text/css",id:D.id}),t.contentCssCors&&at(P,"crossOrigin","anonymous"),t.referrerPolicy&&at(P,"referrerpolicy",t.referrerPolicy),S=P.dom,S.onload=A,S.onerror=x,c(P),at(P,"href",R)}),d=(y,v)=>{const E=u(y);s[y]=E,E.count++;const S=C.fromTag("style",r.dom);ns(S,{rel:"stylesheet",type:"text/css",id:E.id,"data-mce-key":y}),S.dom.innerHTML=v,c(S)},g=y=>Promise.allSettled(pe(y,E=>f(E).then(H(E)))).then(E=>{const S=xo(E,R=>R.status==="fulfilled");return S.fail.length>0?Promise.reject(pe(S.fail,R=>R.reason)):pe(S.pass,R=>R.value)}),h=y=>{const v=I._addCacheSuffix(y);Ae(s,v).each(E=>{--E.count===0&&(delete s[v],l(E.id))})};return{load:f,loadRawCss:d,loadAll:g,unload:h,unloadRawCss:y=>{Ae(s,y).each(v=>{--v.count===0&&(delete s[y],l(v.id))})},unloadAll:y=>{T(y,v=>{h(v)})},_setReferrerPolicy:a,_setContentCssCors:i}},jp=(()=>{const e=new WeakMap;return{forElement:(n,s)=>{const r=vs(n).dom;return m.from(e.get(r)).getOrThunk(()=>{const a=Vp(r,s);return e.set(r,a),a})}}})(),SA=e=>e.nodeName.toLowerCase()==="span",qp=(e,t)=>M(e)&&(Lp(t,e)||t.isInline(e.nodeName.toLowerCase())),wA=(e,t,n)=>{const s=new et(e,t).prev(!1),o=new et(e,t).next(!1),r=rt(s)||qp(s,n),a=rt(o)||qp(o,n);return r&&a},Kp=e=>SA(e)&&e.getAttribute("data-mce-type")==="bookmark",kA=(e,t,n)=>O(e)&&e.data.length>0&&wA(e,t,n),xA=e=>Y(e)?e.childNodes.length>0:!1,_A=e=>Jl(e)||qr(e),lu=(e,t,n,s)=>{var o;const r=s||t;if(Y(t)&&Kp(t))return t;const a=t.childNodes;for(let i=a.length-1;i>=0;i--)lu(e,a[i],n,r);if(Y(t)){const i=t.childNodes;i.length===1&&Kp(i[0])&&((o=t.parentNode)===null||o===void 0||o.insertBefore(i[0],t))}return!_A(t)&&!Lp(n,t)&&!xA(t)&&!kA(t,r,n)&&e.remove(t),t},NA=I.makeMap,Ai=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ri=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,AA=/[<>&\"\']/g,RA=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,TA={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Ys={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},PA={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},DA=e=>{const t=C.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},Gp=(e,t)=>{const n={};if(e){const s=e.split(",");t=t||10;for(let o=0;o<s.length;o+=2){const r=String.fromCharCode(parseInt(s[o],t));if(!Ys[r]){const a="&"+s[o+1]+";";n[r]=a,n[a]=r}}return n}else return},uu=Gp("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Yp=(e,t)=>e.replace(t?Ai:Ri,n=>Ys[n]||n),OA=e=>(""+e).replace(AA,t=>Ys[t]||t),Xp=(e,t)=>e.replace(t?Ai:Ri,n=>n.length>1?"&#"+((n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320)+65536)+";":Ys[n]||"&#"+n.charCodeAt(0)+";"),fu=(e,t,n)=>{const s=n||uu;return e.replace(t?Ai:Ri,o=>Ys[o]||s[o]||o)},Xs={encodeRaw:Yp,encodeAllRaw:OA,encodeNumeric:Xp,encodeNamed:fu,getEncodeFunc:(e,t)=>{const n=Gp(t)||uu,s=(a,i)=>a.replace(i?Ai:Ri,c=>Ys[c]!==void 0?Ys[c]:n[c]!==void 0?n[c]:c.length>1?"&#"+((c.charCodeAt(0)-55296)*1024+(c.charCodeAt(1)-56320)+65536)+";":"&#"+c.charCodeAt(0)+";"),o=(a,i)=>fu(a,i,n),r=NA(e.replace(/\+/g,","));return r.named&&r.numeric?s:r.named?t?o:fu:r.numeric?Xp:Yp},decode:e=>e.replace(RA,(t,n)=>n?(n.charAt(0).toLowerCase()==="x"?n=parseInt(n.substr(1),16):n=parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(n&1023))):TA[n]||String.fromCharCode(n)):PA[t]||uu[t]||DA(t))},ut=(e,t)=>(e=I.trim(e),e?e.split(t||" "):[]),Zp=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),BA=e=>ot(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",IA=e=>{const t=n=>Fe(n)?pe(n,t):BA(n)?new RegExp(n.source,n.flags):ot(n)?Tr(n,t):n;return t(e)},LA=e=>{const t=/^(~)?(.+)$/;return Zt(ut(e,","),n=>{const s=t.exec(n);if(s){const r=s[1]==="~"?"span":"div",a=s[2];return[{cloneName:r,name:a}]}else return[]})},Qp=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),Jp=e=>{let t,n;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(t+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));const s=[t,n].join(" ");return{blockContent:t,phrasingContent:n,flowContent:s}},du=e=>{const{blockContent:t,phrasingContent:n,flowContent:s}=Jp(e),o=r=>Object.freeze(r.split(" "));return Object.freeze({blockContent:o(t),phrasingContent:o(n),flowContent:o(s)})},$A={html4:In(()=>du("html4")),html5:In(()=>du("html5")),"html5-strict":In(()=>du("html5-strict"))},eh=(e,t)=>{const{blockContent:n,phrasingContent:s,flowContent:o}=$A[e]();return t==="blocks"?m.some(n):t==="phrasing"?m.some(s):t==="flow"?m.some(o):m.none()},FA=e=>{const t=Qp(e),{phrasingContent:n,flowContent:s}=Jp(e),o={},r=(c,l,u)=>{o[c]={attributes:Al(l,H({})),attributesOrder:l,children:Al(u,H({}))}},a=(c,l="",u="")=>{const f=ut(u),d=ut(c);let g=d.length;const h=[...t,...ut(l)];for(;g--;)r(d[g],h.slice(),f)},i=(c,l)=>{const u=ut(c),f=ut(l);let d=u.length;for(;d--;){const g=o[u[d]];for(let h=0,p=f.length;h<p;h++)g.attributes[f[h]]={},g.attributesOrder.push(f[h])}};return e!=="html5-strict"&&(T(ut("acronym applet basefont big font strike tt"),u=>{a(u,"",n)}),T(ut("center dir isindex noframes"),u=>{a(u,"",s)})),a("html","manifest","head body"),a("head","","base command link meta noscript script style title"),a("title hr noscript br"),a("base","href target"),a("link","href rel media hreflang type sizes hreflang"),a("meta","name http-equiv content charset"),a("style","media type scoped"),a("script","src async defer type charset"),a("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",s),a("dd div","",s),a("address dt caption","",e==="html4"?n:s),a("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),a("blockquote","cite",s),a("ol","reversed start type","li"),a("ul","","li"),a("li","value",s),a("dl","","dt dd"),a("a","href target rel media hreflang type",e==="html4"?n:s),a("q","cite",n),a("ins del","cite datetime",s),a("img","src sizes srcset alt usemap ismap width height"),a("iframe","src name width height",s),a("embed","src type width height"),a("object","data type typemustmatch name usemap form width height",[s,"param"].join(" ")),a("param","name value"),a("map","name",[s,"area"].join(" ")),a("area","alt coords shape href target rel media hreflang type"),a("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),a("colgroup","span","col"),a("col","span"),a("tbody thead tfoot","","tr"),a("tr","","td th"),a("td","colspan rowspan headers",s),a("th","colspan rowspan headers scope abbr",s),a("form","accept-charset action autocomplete enctype method name novalidate target",s),a("fieldset","disabled form name",[s,"legend"].join(" ")),a("label","form for",n),a("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),a("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?s:n),a("select","disabled form multiple name required size","option optgroup"),a("optgroup","disabled label","option"),a("option","disabled label selected value"),a("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),a("menu","type label",[s,"li"].join(" ")),a("noscript","",s),e!=="html4"&&(a("wbr"),a("ruby","",[n,"rt rp"].join(" ")),a("figcaption","",s),a("mark rt rp bdi","",n),a("summary","",[n,"h1 h2 h3 h4 h5 h6"].join(" ")),a("canvas","width height",s),a("data","value",n),a("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[s,"track source"].join(" ")),a("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[s,"track source"].join(" ")),a("picture","","img source"),a("source","src srcset type media sizes"),a("track","kind src srclang label default"),a("datalist","",[n,"option"].join(" ")),a("article section nav aside main header footer","",s),a("hgroup","","h1 h2 h3 h4 h5 h6"),a("figure","",[s,"figcaption"].join(" ")),a("time","datetime",n),a("dialog","open",s),a("command","type label icon disabled checked radiogroup command"),a("output","for form name",n),a("progress","value max",n),a("meter","value min max low high optimum",n),a("details","open",[s,"summary"].join(" ")),a("keygen","autofocus challenge disabled form keytype name"),r("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),e!=="html4"&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("img","loading"),i("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&T([o.video,o.audio],c=>{delete c.children.audio,delete c.children.video}),T(ut("a form meter progress dfn"),c=>{o[c]&&delete o[c].children[c]}),delete o.caption.children.table,delete o.script,o},MA=e=>e==="-"?"remove":"add",mu=e=>{const t=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return m.from(t.exec(e)).map(n=>({preset:n[1]==="@",name:n[2]}))},UA=e=>{const t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Zt(ut(e,","),n=>{const s=t.exec(n);if(s){const o=s[1],r=o?MA(o):"replace",a=s[2],i=Zt(ut(s[3],"|"),c=>mu(c).toArray());return[{operation:r,name:a,validChildren:i}]}else return[]})},zA=(e,t)=>{const n=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,s=/[*?+]/,{attributes:o,attributesOrder:r}=t;return T(ut(e,"|"),a=>{const i=n.exec(a);if(i){const c={},l=i[1],u=i[2].replace(/[\\:]:/g,":"),f=i[3],d=i[4];if(l==="!"&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(u),c.required=!0),l==="-"){delete o[u],r.splice(I.inArray(r,u),1);return}if(f&&(f==="="?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:u,value:d}),c.defaultValue=d):f==="~"?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:u,value:d}),c.forcedValue=d):f==="<"&&(c.validValues=I.makeMap(d,"?"))),s.test(u)){const g=c;t.attributePatterns=t.attributePatterns||[],g.pattern=Zp(u),t.attributePatterns.push(g)}else o[u]||r.push(u),o[u]=c}})},HA=(e,t)=>{_e(e.attributes,(n,s)=>{t.attributes[s]=n}),t.attributesOrder.push(...e.attributesOrder)},WA=(e,t)=>{const n=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Zt(ut(t,","),s=>{const o=n.exec(s);if(o){const r=o[1],a=o[2],i=o[3],c=o[4],l=o[5],u={attributes:{},attributesOrder:[]};if(e.each(f=>HA(f,u)),r==="#"?u.paddEmpty=!0:r==="-"&&(u.removeEmpty=!0),c==="!"&&(u.removeEmptyAttrs=!0),l&&zA(l,u),i&&(u.outputName=a),a==="@")if(e.isNone())e=m.some(u);else return[];return[i?{name:a,element:u,aliasName:i}:{name:a,element:u}]}else return[]})},Ti={},Kr=I.makeMap,xn=I.each,th=I.extend,nh=I.explode,sh=(e,t={})=>{const n=Kr(e," ",Kr(e.toUpperCase()," "));return th(n,t)},oh=e=>sh("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),gu=(e,t)=>{if(e){const n={};return Q(e)&&(e={"*":e}),xn(e,(s,o)=>{n[o]=n[o.toUpperCase()]=t==="map"?Kr(s,/[, ]/):nh(s,/[, ]/)}),n}else return},ws=(e={})=>{var t;const n={},s={};let o=[];const r={},a={},i=(G,de,Be)=>{const We=e[G];if(We)return Kr(We,/[, ]/,Kr(We.toUpperCase(),/[, ]/));{let Ge=Ti[G];return Ge||(Ge=sh(de,Be),Ti[G]=Ge),Ge}},c=(t=e.schema)!==null&&t!==void 0?t:"html5",l=FA(c);e.verify_html===!1&&(e.valid_elements="*[*]");const u=gu(e.valid_styles),f=gu(e.invalid_styles,"map"),d=gu(e.valid_classes,"map"),g=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),h=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),p=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),b=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),y="td th iframe video audio object script code",v=i("non_empty_elements",y+" pre svg textarea summary",p),E=i("move_caret_before_on_enter_elements",y+" table",p),S="h1 h2 h3 h4 h5 h6",R=i("text_block_elements",S+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),D=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",R),z=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),A=i("transparent_elements","a ins del canvas map"),x=i("wrap_block_elements","pre "+S);xn("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),G=>{a[G]=new RegExp("</"+G+"[^>]*>","gi")});const P=G=>{const de=m.from(n["@"]),Be=/[*?+]/;T(WA(de,G??""),({name:We,element:Ge,aliasName:ze})=>{if(ze&&(n[ze]=Ge),Be.test(We)){const Te=Ge;Te.pattern=Zp(We),o.push(Te)}else n[We]=Ge})},W=G=>{o=[],T($t(n),de=>{delete n[de]}),P(G)},X=(G,de)=>{var Be,We;delete Ti.text_block_elements,delete Ti.block_elements;const Ge=de.extends?!Yt(de.extends):!1,ze=de.extends;if(s[G]=ze?s[ze]:{},r[G]=ze??G,v[G.toUpperCase()]={},v[G]={},Ge||(D[G.toUpperCase()]={},D[G]={}),ze&&!n[G]&&n[ze]){const Te=IA(n[ze]);delete Te.removeEmptyAttrs,delete Te.removeEmpty,n[G]=Te}else n[G]={attributesOrder:[],attributes:{}};if(Fe(de.attributes)){const Te=Nt=>{Pe.attributesOrder.push(Nt),Pe.attributes[Nt]={}},Pe=(Be=n[G])!==null&&Be!==void 0?Be:{};delete Pe.attributesDefault,delete Pe.attributesForced,delete Pe.attributePatterns,delete Pe.attributesRequired,Pe.attributesOrder=[],Pe.attributes={},T(de.attributes,Nt=>{const bn=Qp(c);mu(Nt).each(({preset:Qn,name:Dn})=>{Qn?Dn==="global"&&T(bn,Te):Te(Dn)})}),n[G]=Pe}if(Bn(de.padEmpty)){const Te=(We=n[G])!==null&&We!==void 0?We:{};Te.paddEmpty=de.padEmpty,n[G]=Te}if(Fe(de.children)){const Te={},Pe=bn=>{Te[bn]={}},Nt=bn=>{eh(c,bn).each(Qn=>{T(Qn,Pe)})};T(de.children,bn=>{mu(bn).each(({preset:Qn,name:Dn})=>{Qn?Nt(Dn):Pe(Dn)})}),s[G]=Te}ze&&_e(s,(Te,Pe)=>{Te[ze]&&(s[Pe]=Te=th({},s[Pe]),Te[G]=Te[ze])})},ae=G=>{T(LA(G??""),({name:de,cloneName:Be})=>{X(de,{extends:Be})})},ie=G=>{ot(G)?_e(G,(de,Be)=>X(Be,de)):Q(G)&&ae(G)},be=G=>{T(UA(G??""),({operation:de,name:Be,validChildren:We})=>{const Ge=de==="replace"?{"#comment":{}}:s[Be],ze=Pe=>{de==="remove"?delete Ge[Pe]:Ge[Pe]={}},Te=Pe=>{eh(c,Pe).each(Nt=>{T(Nt,ze)})};T(We,({preset:Pe,name:Nt})=>{Pe?Te(Nt):ze(Nt)}),s[Be]=Ge})},ye=G=>{const de=n[G];if(de)return de;let Be=o.length;for(;Be--;){const We=o[Be];if(We.pattern.test(G))return We}},Oe=()=>{e.valid_elements?(W(e.valid_elements),xn(l,(G,de)=>{s[de]=G.children})):(xn(l,(G,de)=>{n[de]={attributes:G.attributes,attributesOrder:G.attributesOrder},s[de]=G.children}),xn(ut("strong/b em/i"),G=>{const de=ut(G,"/");n[de[1]].outputName=de[0]}),xn(z,(G,de)=>{n[de]&&(e.padd_empty_block_inline_children&&(n[de].paddInEmptyBlock=!0),n[de].removeEmpty=!0)}),xn(ut("ol ul blockquote a table tbody"),G=>{n[G]&&(n[G].removeEmpty=!0)}),xn(ut("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),G=>{n[G]&&(n[G].paddEmpty=!0)}),xn(ut("span"),G=>{n[G].removeEmptyAttrs=!0})),delete n.svg,ie(e.custom_elements),be(e.valid_children),P(e.extended_valid_elements),be("+ol[ul|ol],+ul[ul|ol]"),xn({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(G,de)=>{n[de]&&(n[de].parentsRequired=ut(G))}),e.invalid_elements&&xn(nh(e.invalid_elements),G=>{n[G]&&delete n[G]}),ye("span")||P("span[!data-mce-type|*]")},st=H(u),Ke=H(f),L=H(d),K=H(b),me=H(D),U=H(R),J=H(z),te=H(Object.seal(p)),F=H(h),ce=H(v),ue=H(E),Ue=H(g),Se=H(A),lt=H(x),Bt=H(Object.seal(a)),Pn=(G,de)=>{const Be=s[G.toLowerCase()];return!!(Be&&Be[de.toLowerCase()])},ft=(G,de)=>{const Be=ye(G);if(Be)if(de){if(Be.attributes[de])return!0;const We=Be.attributePatterns;if(We){let Ge=We.length;for(;Ge--;)if(We[Ge].pattern.test(de))return!0}}else return!0;return!1},Yt=G=>oe(me(),G),hn=G=>!Xe(G,"#")&&ft(G)&&!Yt(G),dt=G=>oe(lt(),G)||hn(G),Ht=H(r);return Oe(),{type:c,children:s,elements:n,getValidStyles:st,getValidClasses:L,getBlockElements:me,getInvalidStyles:Ke,getVoidElements:te,getTextBlockElements:U,getTextInlineElements:J,getBoolAttrs:K,getElementRule:ye,getSelfClosingElements:F,getNonEmptyElements:ce,getMoveCaretBeforeOnEnterElements:ue,getWhitespaceElements:Ue,getTransparentElements:Se,getSpecialElements:Bt,isValidChild:Pn,isValid:ft,isBlock:Yt,isInline:hn,isWrapper:dt,getCustomElements:Ht,addValidElements:P,setValidElements:W,addCustomElements:ie,addValidChildren:be}},VA=e=>({value:jA(e)}),jA=e=>Ag(e,"#").toUpperCase(),pu=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},qA=e=>{const t=pu(e.red)+pu(e.green)+pu(e.blue);return VA(t)},rh=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,ah=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,KA=(e,t,n,s)=>({red:e,green:t,blue:n,alpha:s}),ih=(e,t,n,s)=>{const o=parseInt(e,10),r=parseInt(t,10),a=parseInt(n,10),i=parseFloat(s);return KA(o,r,a,i)},GA=e=>rh.test(e)?"rgb":ah.test(e)?"rgba":"other",ch=e=>{const t=rh.exec(e);if(t!==null)return m.some(ih(t[1],t[2],t[3],"1"));const n=ah.exec(e);return n!==null?m.some(ih(n[1],n[2],n[3],n[4])):m.none()},YA=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Gr=e=>ch(e).map(qA).map(t=>"#"+t.value).getOr(e),hu=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,r={};let a,i;const c=Vr;t&&(a=t.getValidStyles(),i=t.getInvalidStyles());const l=(`\\" \\' \\; \\: ; : `+c).split(" ");for(let f=0;f<l.length;f++)r[l[f]]=c+f,r[c+f]=l[f];const u={parse:f=>{const d={};let g=!1;const h=e.url_converter,p=e.url_converter_scope||u,b=(A,x,P)=>{const W=d[A+"-top"+x];if(!W)return;const X=d[A+"-right"+x];if(!X)return;const ae=d[A+"-bottom"+x];if(!ae)return;const ie=d[A+"-left"+x];if(!ie)return;const be=[W,X,ae,ie];let ye=be.length-1;for(;ye--&&be[ye]===be[ye+1];);ye>-1&&P||(d[A+x]=ye===-1?be[0]:be.join(" "),delete d[A+"-top"+x],delete d[A+"-right"+x],delete d[A+"-bottom"+x],delete d[A+"-left"+x])},y=A=>{const x=d[A];if(!x)return;const P=x.indexOf(",")>-1?[x]:x.split(" ");let W=P.length;for(;W--;)if(P[W]!==P[0])return!1;return d[A]=P[0],!0},v=(A,x,P,W)=>{y(x)&&y(P)&&y(W)&&(d[A]=d[x]+" "+d[P]+" "+d[W],delete d[x],delete d[P],delete d[W])},E=A=>(g=!0,r[A]),S=(A,x)=>(g&&(A=A.replace(/\uFEFF[0-9]/g,P=>r[P])),x||(A=A.replace(/\\([\'\";:])/g,"$1")),A),R=A=>String.fromCharCode(parseInt(A.slice(1),16)),D=A=>A.replace(/\\[0-9a-f]+/gi,R),z=(A,x,P,W,X,ae)=>{if(X=X||ae,X)return X=S(X),"'"+X.replace(/\'/g,"\\'")+"'";if(x=S(x||P||W||""),!e.allow_script_urls){const ie=x.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(ie)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(ie))return""}return h&&(x=h.call(p,x,"style")),"url('"+x.replace(/\'/g,"\\'")+"')"};if(f){f=f.replace(/[\u0000-\u001F]/g,""),f=f.replace(/\\[\"\';:\uFEFF]/g,E).replace(/\"[^\"]+\"|\'[^\']+\'/g,x=>x.replace(/[;:]/g,E));let A;for(;A=s.exec(f);){s.lastIndex=A.index+A[0].length;let x=A[1].replace(o,"").toLowerCase(),P=A[2].replace(o,"");if(x&&P){if(x=D(x),P=D(P),x.indexOf(c)!==-1||x.indexOf('"')!==-1||!e.allow_script_urls&&(x==="behavior"||/expression\s*\(|\/\*|\*\//.test(P)))continue;x==="font-weight"&&P==="700"?P="bold":(x==="color"||x==="background-color")&&(P=P.toLowerCase()),GA(P)==="rgb"&&ch(P).each(W=>{P=Gr(YA(W)).toLowerCase()}),P=P.replace(n,z),d[x]=g?S(P,!0):P}}b("border","",!0),b("border","-width"),b("border","-color"),b("border","-style"),b("padding",""),b("margin",""),v("border","border-width","border-style","border-color"),d.border==="medium none"&&delete d.border,d["border-image"]==="none"&&delete d["border-image"]}return d},serialize:(f,d)=>{let g="";const h=(b,y)=>{const v=y[b];if(v)for(let E=0,S=v.length;E<S;E++){const R=v[E],D=f[R];D&&(g+=(g.length>0?" ":"")+R+": "+D+";")}},p=(b,y)=>{if(!i||!y)return!0;let v=i["*"];return v&&v[b]?!1:(v=i[y],!(v&&v[b]))};return d&&a?(h("*",a),h(d,a)):_e(f,(b,y)=>{b&&p(y,d)&&(g+=(g.length>0?" ":"")+y+": "+b+";")}),g}};return u},XA={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},ZA=e=>e instanceof Event||we(e.initEvent),QA=e=>e.isDefaultPrevented===He||e.isDefaultPrevented===De,JA=e=>Ve(e.preventDefault)||ZA(e),lh=(e,t)=>{const n=t??{};for(const s in e)oe(XA,s)||(n[s]=e[s]);return M(e.composedPath)&&(n.composedPath=()=>e.composedPath()),M(e.getModifierState)&&(n.getModifierState=s=>e.getModifierState(s)),M(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},bu=(e,t,n,s)=>{var o;const r=lh(t,s);return r.type=e,Ve(r.target)&&(r.target=(o=r.srcElement)!==null&&o!==void 0?o:n),JA(t)&&(r.preventDefault=()=>{r.defaultPrevented=!0,r.isDefaultPrevented=He,we(t.preventDefault)&&t.preventDefault()},r.stopPropagation=()=>{r.cancelBubble=!0,r.isPropagationStopped=He,we(t.stopPropagation)&&t.stopPropagation()},r.stopImmediatePropagation=()=>{r.isImmediatePropagationStopped=He,r.stopPropagation()},QA(r)||(r.isDefaultPrevented=r.defaultPrevented===!0?He:De,r.isPropagationStopped=r.cancelBubble===!0?He:De,r.isImmediatePropagationStopped=De)),r},eR="mce-data-",tR=/^(?:mouse|contextmenu)|click/,Cu=(e,t,n,s)=>{e.addEventListener(t,n,s||!1)},Pi=(e,t,n,s)=>{e.removeEventListener(t,n,s||!1)},nR=e=>M(e)&&tR.test(e.type),Yr=(e,t)=>{const n=bu(e.type,e,document,t);if(nR(e)&&rt(e.pageX)&&!rt(e.clientX)){const s=n.target.ownerDocument||document,o=s.documentElement,r=s.body,a=n;a.pageX=e.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),a.pageY=e.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)}return n},sR=(e,t,n)=>{const s=e.document,o={type:"ready"};if(n.domLoaded){t(o);return}const r=()=>s.readyState==="complete"||s.readyState==="interactive"&&s.body,a=()=>{Pi(e,"DOMContentLoaded",a),Pi(e,"load",a),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};r()?a():Cu(e,"DOMContentLoaded",a),n.domLoaded||Cu(e,"load",a)};class Zs{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=eR+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,s,o){const r=this;let a;const i=window,c=d=>{r.executeHandlers(Yr(d||i.event),l)};if(!t||O(t)||Ss(t))return s;let l;t[r.expando]?l=t[r.expando]:(l=r.count++,t[r.expando]=l,r.events[l]={}),o=o||t;const u=n.split(" ");let f=u.length;for(;f--;){let d=u[f],g=c,h=!1,p=!1;if(d==="DOMContentLoaded"&&(d="ready"),r.domLoaded&&d==="ready"&&t.readyState==="complete"){s.call(o,Yr({type:d}));continue}!r.hasFocusIn&&(d==="focusin"||d==="focusout")&&(h=!0,p=d==="focusin"?"focus":"blur",g=b=>{const y=Yr(b||i.event);y.type=y.type==="focus"?"focusin":"focusout",r.executeHandlers(y,l)}),a=r.events[l][d],a?d==="ready"&&r.domLoaded?s(Yr({type:d})):a.push({func:s,scope:o}):(r.events[l][d]=a=[{func:s,scope:o}],a.fakeName=p,a.capture=h,a.nativeHandler=g,d==="ready"?sR(t,g,r):Cu(t,p||d,g,h))}return t=a=null,s}unbind(t,n,s){if(!t||O(t)||Ss(t))return this;const o=t[this.expando];if(o){let r=this.events[o];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const c=a[i],l=r[c];if(l){if(s){let u=l.length;for(;u--;)if(l[u].func===s){const f=l.nativeHandler,d=l.fakeName,g=l.capture,h=l.slice(0,u).concat(l.slice(u+1));h.nativeHandler=f,h.fakeName=d,h.capture=g,r[c]=h}}(!s||l.length===0)&&(delete r[c],Pi(t,l.fakeName||c,l.nativeHandler,l.capture))}}}else _e(r,(a,i)=>{Pi(t,a.fakeName||i,a.nativeHandler,a.capture)}),r={};for(const a in r)if(oe(r,a))return this;delete this.events[o];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,s){return this.dispatch(t,n,s)}dispatch(t,n,s){if(!t||O(t)||Ss(t))return this;const o=Yr({type:n,target:t},s);do{const r=t[this.expando];r&&this.executeHandlers(o,r),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!o.isPropagationStopped());return this}clean(t){if(!t||O(t)||Ss(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let s=n.length;for(;s--;)t=n[s],t[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const s=this.events[n],o=s&&s[t.type];if(o)for(let r=0,a=o.length;r<a;r++){const i=o[r];if(i&&i.func.call(i.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}Zs.Event=new Zs;const yu=I.each,oR=I.grep,vu="data-mce-style",rR=I.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Xr=(e,t,n)=>{Ve(n)||n===""?it(e,t):at(e,t,n)},uh=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),Fo=(e,t)=>{let n=0;if(e)for(let s=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){const r=o.nodeType;t&&O(o)&&(r===s||!o.data.length)||(n++,s=r)}return n},fh=(e,t)=>{const n=jt(t,"style"),s=e.serialize(e.parse(n),he(t));Xr(t,vu,s)},aR=(e,t)=>fn(e)?oe(rR,t)?e+"":e+"px":e,dh=(e,t,n)=>{const s=uh(t);Ve(n)||n===""?vp(e,s):Cp(e,s,aR(n,s))},iR=(e,t,n)=>{const s=t.keep_values,o={set:(a,i,c)=>{const l=C.fromDom(a);we(t.url_converter)&&M(i)&&(i=t.url_converter.call(t.url_converter_scope||n(),String(i),c,a));const u="data-mce-"+c;Xr(l,u,i),Xr(l,c,i)},get:(a,i)=>{const c=C.fromDom(a);return jt(c,"data-mce-"+i)||jt(c,i)}},r={style:{set:(a,i)=>{const c=C.fromDom(a);s&&Xr(c,vu,i),it(c,"style"),Q(i)&&vi(c,e.parse(i))},get:a=>{const i=C.fromDom(a),c=jt(i,vu)||jt(i,"style");return e.serialize(e.parse(c),he(i))}}};return s&&(r.href=r.src=o),r},xe=(e,t={})=>{const n={},s=window,o={};let r=0;const a=!0,i=!0,c=jp.forElement(C.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),l=[],u=t.schema?t.schema:ws({}),f=hu({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),d=t.ownEvents?new Zs:Zs.Event,g=u.getBlockElements(),h=w=>Q(w)?oe(g,w):Y(w)&&(oe(g,w.nodeName)||Gs(u,w)),p=w=>w&&e&&Q(w)?e.getElementById(w):w,b=w=>{const k=p(w);return M(k)?C.fromDom(k):null},y=(w,k,$="")=>{let B;const ee=b(w);if(M(ee)&&Vt(ee)){const ge=Sl[k];ge&&ge.get?B=ge.get(ee.dom,k):B=jt(ee,k)}return M(B)?B:$},v=w=>{const k=p(w);return Ve(k)?[]:k.attributes},E=(w,k,$)=>{K(w,B=>{if(Y(B)){const ee=C.fromDom(B),ge=$===""?null:$,Ie=jt(ee,k),On=Sl[k];On&&On.set?On.set(ee.dom,ge,k):Xr(ee,k,ge),Ie!==ge&&t.onSetAttrib&&t.onSetAttrib({attrElm:ee.dom,attrName:k,attrValue:ge})}})},S=(w,k)=>w.cloneNode(k),R=()=>t.root_element||e.body,D=w=>{const k=Np(w);return{x:k.x,y:k.y,w:k.width,h:k.height}},z=(w,k)=>EA(e.body,p(w),k),A=(w,k,$)=>{K(w,B=>{const ee=C.fromDom(B);dh(ee,k,$),t.update_styles&&fh(f,ee)})},x=(w,k)=>{K(w,$=>{const B=C.fromDom($);_e(k,(ee,ge)=>{dh(B,ge,ee)}),t.update_styles&&fh(f,B)})},P=(w,k,$)=>{const B=p(w);if(!(Ve(B)||!as(B)&&!K0(B)))return $?Un(C.fromDom(B),uh(k)):(k=k.replace(/-(\D)/g,(ee,ge)=>ge.toUpperCase()),k==="float"&&(k="cssFloat"),B.style?B.style[k]:void 0)},W=w=>{const k=p(w);if(!k)return{w:0,h:0};let $=P(k,"width"),B=P(k,"height");return(!$||$.indexOf("px")===-1)&&($="0"),(!B||B.indexOf("px")===-1)&&(B="0"),{w:parseInt($,10)||k.offsetWidth||k.clientWidth,h:parseInt(B,10)||k.offsetHeight||k.clientHeight}},X=w=>{const k=p(w),$=z(k),B=W(k);return{x:$.x,y:$.y,w:B.w,h:B.h}},ae=(w,k)=>{if(!w)return!1;const $=Fe(w)?w:[w];return Le($,B=>En(C.fromDom(B),k))},ie=(w,k,$,B)=>{const ee=[];let ge=p(w);B=B===void 0;const Ie=$||(R().nodeName!=="BODY"?R().parentNode:null);if(Q(k))if(k==="*")k=Y;else{const On=k;k=yn=>ae(yn,On)}for(;ge&&!(ge===Ie||Ve(ge.nodeType)||qr(ge)||Jl(ge));){if(!k||k(ge))if(B)ee.push(ge);else return[ge];ge=ge.parentNode}return B?ee:null},be=(w,k,$)=>{const B=ie(w,k,$,!1);return B&&B.length>0?B[0]:null},ye=(w,k,$)=>{let B=k;if(w){Q(k)&&(B=ee=>ae(ee,k));for(let ee=w[$];ee;ee=ee[$])if(we(B)&&B(ee))return ee}return null},Oe=(w,k)=>ye(w,k,"nextSibling"),st=(w,k)=>ye(w,k,"previousSibling"),Ke=w=>we(w.querySelectorAll),L=(w,k)=>{var $,B;const ee=(B=($=p(k))!==null&&$!==void 0?$:t.root_element)!==null&&B!==void 0?B:e;return Ke(ee)?Wt(ee.querySelectorAll(w)):[]},K=function(w,k,$){const B=$??this;if(Fe(w)){const ee=[];return yu(w,(ge,Ie)=>{const On=p(ge);On&&ee.push(k.call(B,On,Ie))}),ee}else{const ee=p(w);return ee?k.call(B,ee):!1}},me=(w,k)=>{K(w,$=>{_e(k,(B,ee)=>{E($,ee,B)})})},U=(w,k)=>{K(w,$=>{const B=C.fromDom($);Si(B,k)})},J=(w,k,$,B,ee)=>K(w,ge=>{const Ie=Q(k)?e.createElement(k):k;return M($)&&me(Ie,$),B&&(!Q(B)&&B.nodeType?Ie.appendChild(B):Q(B)&&U(Ie,B)),ee?Ie:ge.appendChild(Ie)}),te=(w,k,$)=>J(e.createElement(w),w,k,$,!0),F=Xs.decode,ce=Xs.encodeAllRaw,ue=(w,k,$="")=>{let B="<"+w;for(const ee in k)No(k,ee)&&(B+=" "+ee+'="'+ce(k[ee])+'"');return Br($)&&oe(u.getVoidElements(),w)?B+" />":B+">"+$+"</"+w+">"},Ue=w=>{const k=e.createElement("div"),$=e.createDocumentFragment();$.appendChild(k),w&&(k.innerHTML=w);let B;for(;B=k.firstChild;)$.appendChild(B);return $.removeChild(k),$},Se=(w,k)=>K(w,$=>{const B=C.fromDom($);return k&&T(ht(B),ee=>{Tt(ee)&&ee.dom.length===0?Re(ee):Ft(B,ee)}),Re(B),B.dom}),lt=w=>K(w,k=>{const $=k.attributes;for(let B=$.length-1;B>=0;B--)k.removeAttributeNode($.item(B))}),Bt=w=>f.parse(w),Pn=(w,k)=>f.serialize(w,k),ft=w=>{if(un!==xe.DOM&&e===document){if(n[w])return;n[w]=!0}let k=e.getElementById("mceDefaultStyles");if(!k){k=e.createElement("style"),k.id="mceDefaultStyles",k.type="text/css";const $=e.head;$.firstChild?$.insertBefore(k,$.firstChild):$.appendChild(k)}k.styleSheet?k.styleSheet.cssText+=w:k.appendChild(e.createTextNode(w))},Yt=w=>{w||(w=""),T(w.split(","),k=>{o[k]=!0,c.load(k).catch(le)})},hn=(w,k,$)=>{K(w,B=>{if(Y(B)){const ee=C.fromDom(B),ge=k.split(" ");T(ge,Ie=>{M($)?($?Po:Fr)(ee,Ie):l0(ee,Ie)})}})},dt=(w,k)=>{hn(w,k,!0)},Ht=(w,k)=>{hn(w,k,!1)},G=(w,k)=>{const $=b(w),B=k.split(" ");return M($)&&es(B,ee=>Ml($,ee))},de=w=>{K(w,k=>vp(C.fromDom(k),"display"))},Be=w=>{K(w,k=>Cp(C.fromDom(k),"display","none"))},We=w=>{const k=b(w);return M(k)&&Ro(Ei(k,"display"),"none")},Ge=w=>(w||"mce_")+r++,ze=w=>{const k=b(w);return M(k)?Y(k.dom)?k.dom.outerHTML:T0(k):""},Te=(w,k)=>{K(w,$=>{Y($)&&($.outerHTML=k)})},Pe=(w,k)=>{const $=p(k);return K(w,B=>{const ee=$==null?void 0:$.parentNode,ge=$==null?void 0:$.nextSibling;return ee&&(ge?ee.insertBefore(B,ge):ee.appendChild(B)),B})},Nt=(w,k,$)=>K(k,B=>{var ee;const ge=Fe(k)?w.cloneNode(!0):w;return $&&yu(oR(B.childNodes),Ie=>{ge.appendChild(Ie)}),(ee=B.parentNode)===null||ee===void 0||ee.replaceChild(ge,B),B}),bn=(w,k)=>{if(w.nodeName!==k.toUpperCase()){const $=te(k);return yu(v(w),B=>{E($,B.nodeName,y(w,B.nodeName))}),Nt($,w,!0),$}else return w},Qn=(w,k)=>{let $=w;for(;$;){let B=k;for(;B&&$!==B;)B=B.parentNode;if($===B)break;$=$.parentNode}return!$&&w.ownerDocument?w.ownerDocument.documentElement:$},Dn=(w,k,$)=>ii(k)?is(u,w,{...$,isContent:ee=>{const ge=ee.nodeName.toLowerCase();return!!k[ge]}}):is(u,w,$),yr=()=>e.createRange(),vr=(w,k,$)=>{let B=yr(),ee,ge;if(w&&k&&w.parentNode&&k.parentNode){const Ie=w.parentNode;return B.setStart(Ie,Fo(w)),B.setEnd(k.parentNode,Fo(k)),ee=B.extractContents(),B=yr(),B.setStart(k.parentNode,Fo(k)+1),B.setEnd(Ie,Fo(w)+1),ge=B.extractContents(),Ie.insertBefore(lu(un,ee,u),w),$?Ie.insertBefore($,w):Ie.insertBefore(k,w),Ie.insertBefore(lu(un,ge,u),w),Se(w),$||k}else return},ko=(w,k,$,B)=>{if(Fe(w)){let ee=w.length;const ge=[];for(;ee--;)ge[ee]=ko(w[ee],k,$,B);return ge}else return t.collect&&(w===e||w===s)&&l.push([w,k,$,B]),d.bind(w,k,$,B||un)},Cn=(w,k,$)=>{if(Fe(w)){let B=w.length;const ee=[];for(;B--;)ee[B]=Cn(w[B],k,$);return ee}else{if(l.length>0&&(w===e||w===s)){let B=l.length;for(;B--;){const[ee,ge,Ie]=l[B];w===ee&&(!k||k===ge)&&(!$||$===Ie)&&d.unbind(ee,ge,Ie)}}return d.unbind(w,k,$)}},$s=(w,k,$)=>d.dispatch(w,k,$),si=(w,k,$)=>d.dispatch(w,k,$),Er=w=>{if(w&&as(w)){const k=w.getAttribute("data-mce-contenteditable");return k&&k!=="inherit"?k:w.contentEditable!=="inherit"?w.contentEditable:null}else return null},un={doc:e,settings:t,win:s,files:o,stdMode:a,boxModel:i,styleSheetLoader:c,boundEvents:l,styles:f,schema:u,events:d,isBlock:h,root:null,clone:S,getRoot:R,getViewPort:D,getRect:X,getSize:W,getParent:be,getParents:ie,get:p,getNext:Oe,getPrev:st,select:L,is:ae,add:J,create:te,createHTML:ue,createFragment:Ue,remove:Se,setStyle:A,getStyle:P,setStyles:x,removeAllAttribs:lt,setAttrib:E,setAttribs:me,getAttrib:y,getPos:z,parseStyle:Bt,serializeStyle:Pn,addStyle:ft,loadCSS:Yt,addClass:dt,removeClass:Ht,hasClass:G,toggleClass:hn,show:de,hide:Be,isHidden:We,uniqueId:Ge,setHTML:U,getOuterHTML:ze,setOuterHTML:Te,decode:F,encode:ce,insertAfter:Pe,replace:Nt,rename:bn,findCommonAncestor:Qn,run:K,getAttribs:v,isEmpty:Dn,createRng:yr,nodeIndex:Fo,split:vr,bind:ko,unbind:Cn,fire:si,dispatch:$s,getContentEditable:Er,getContentEditableParent:w=>{const k=R();let $=null;for(let B=w;B&&B!==k&&($=Er(B),$===null);B=B.parentNode);return $},isEditable:w=>{if(M(w)){const k=Y(w)?w:w.parentElement;return M(k)&&as(k)&&Ws(C.fromDom(k))}else return!1},destroy:()=>{if(l.length>0){let w=l.length;for(;w--;){const[k,$,B]=l[w];d.unbind(k,$,B)}}_e(o,(w,k)=>{c.unload(k),delete o[k]})},isChildOf:(w,k)=>w===k||k.contains(w),dumpRng:w=>"startContainer: "+w.startContainer.nodeName+", startOffset: "+w.startOffset+", endContainer: "+w.endContainer.nodeName+", endOffset: "+w.endOffset},Sl=iR(f,t,H(un));return un};xe.DOM=xe(document),xe.nodeIndex=Fo;const cR=xe.DOM,lR=0,uR=1,Di=2,mh=3;class ls{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,s)=>{const o=cR;let r;const a=()=>{o.remove(l),r&&(r.onerror=r.onload=r=null)},i=()=>{a(),n()},c=()=>{a(),s("Failed to load script: "+t)},l=o.uniqueId();r=document.createElement("script"),r.id=l,r.type="text/javascript",r.src=I._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=i,r.onerror=c,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)})}isDone(t){return this.states[t]===Di}markDone(t){this.states[t]=Di}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=lR),new Promise((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,s=(c,l)=>{Ae(n.scriptLoadedCallbacks,l).each(u=>{T(u,f=>f[c](l))}),delete n.scriptLoadedCallbacks[l]},o=c=>{const l=se(c,u=>u.status==="rejected");return l.length>0?Promise.reject(Zt(l,({reason:u})=>Fe(u)?u:[u])):Promise.resolve()},r=c=>Promise.allSettled(pe(c,l=>n.states[l]===Di?(s("resolve",l),Promise.resolve()):n.states[l]===mh?(s("reject",l),Promise.reject(l)):(n.states[l]=uR,n.loadScript(l).then(()=>{n.states[l]=Di,s("resolve",l);const u=n.queue;return u.length>0?(n.queue=[],r(u).then(o)):Promise.resolve()},()=>(n.states[l]=mh,s("reject",l),Promise.reject(l)))))),a=c=>(n.loading=!0,r(c).then(l=>{n.loading=!1;const u=n.queueLoadedCallbacks.shift();return m.from(u).each(xr),o(l)})),i=Sg(t);return n.loading?new Promise((c,l)=>{n.queueLoadedCallbacks.push(()=>{a(i).then(c,l)})}):a(i)}}ls.ScriptLoader=new ls;const fR=(e,t)=>{const n=e.indexOf(t);return n!==-1&&e.indexOf(t,n+1)>n},dR=e=>ot(e)&&oe(e,"raw"),mR=e=>Fe(e)&&e.length>1,Zr={},Eu=tt("en"),gh=()=>Ae(Zr,Eu.get()),_n={getData:()=>Tr(Zr,e=>({...e})),setCode:e=>{e&&Eu.set(e)},getCode:()=>Eu.get(),add:(e,t)=>{let n=Zr[e];n||(Zr[e]=n={});const s=pe($t(t),o=>o.toLowerCase());_e(t,(o,r)=>{const a=r.toLowerCase();a!==r&&fR(s,a)?(oe(t,a)||(n[a]=o),n[r]=o):n[a]=o})},translate:e=>{const t=gh().getOr({}),n=a=>we(a)?Object.prototype.toString.call(a):s(a)?"":""+a,s=a=>a===""||a===null||a===void 0,o=a=>{const i=n(a);return oe(t,i)?n(t[i]):Ae(t,i.toLowerCase()).map(n).getOr(i)},r=a=>a.replace(/{context:\w+}$/,"");if(s(e))return"";if(dR(e))return n(e.raw);if(mR(e)){const a=e.slice(1),i=o(e[0]).replace(/\{([0-9]+)\}/g,(c,l)=>oe(a,l)?n(a[l]):c);return r(i)}return r(o(e))},isRtl:()=>gh().bind(e=>Ae(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>oe(Zr,e)},kt=()=>{const e=[],t={},n={},s=[],o=(p,b)=>{const y=se(s,v=>v.name===p&&v.state===b);T(y,v=>v.resolve())},r=p=>oe(t,p),a=p=>oe(n,p),i=p=>{if(n[p])return n[p].instance},c=(p,b)=>{const y=_n.getCode(),v=","+(b||"")+",";!y||b&&v.indexOf(","+y+",")===-1||ls.ScriptLoader.add(t[p]+"/langs/"+y+".js")},l=(p,b)=>{kt.languageLoad!==!1&&(r(p)?c(p,b):h(p,"loaded").then(()=>c(p,b)))},u=(p,b)=>(e.push(b),n[p]={instance:b},o(p,"added"),b),f=p=>{delete t[p],delete n[p]},d=(p,b)=>Q(b)?Q(p)?{prefix:"",resource:b,suffix:""}:{prefix:p.prefix,resource:b,suffix:p.suffix}:b,g=(p,b)=>{if(t[p])return Promise.resolve();let y=Q(b)?b:b.prefix+b.resource+b.suffix;y.indexOf("/")!==0&&y.indexOf("://")===-1&&(y=kt.baseURL+"/"+y),t[p]=y.substring(0,y.lastIndexOf("/"));const v=()=>(o(p,"loaded"),Promise.resolve());return n[p]?v():ls.ScriptLoader.add(y).then(v)},h=(p,b="added")=>b==="added"&&a(p)||b==="loaded"&&r(p)?Promise.resolve():new Promise(y=>{s.push({name:p,state:b,resolve:y})});return{items:e,urls:t,lookup:n,get:i,requireLangPack:l,add:u,remove:f,createUrl:d,load:g,waitFor:h}};kt.languageLoad=!0,kt.baseURL="",kt.PluginManager=kt(),kt.ThemeManager=kt(),kt.ModelManager=kt();const Oi=(e,t)=>{let n=null;return{cancel:()=>{St(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{St(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},Su=(e,t)=>{let n=null;const s=()=>{St(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...r)=>{s(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},gR=(e,t,n)=>Hr(e,t,n).isSome(),Qr=H("mce-annotation"),Qs=H("data-mce-annotation"),Mo=H("data-mce-annotation-uid"),Jr=H("data-mce-annotation-active"),ea=H("data-mce-annotation-classes"),ta=H("data-mce-annotation-attrs"),ph=e=>t=>ve(t,e),hh=(e,t)=>{const n=e.selection.getRng(),s=C.fromDom(n.startContainer),o=C.fromDom(e.getBody()),r=t.fold(()=>"."+Qr(),c=>`[${Qs()}="${c}"]`),a=Do(s,n.startOffset).getOr(s);return Bo(a,r,ph(o)).bind(c=>ss(c,`${Mo()}`).bind(l=>ss(c,`${Qs()}`).map(u=>{const f=Ch(e,l);return{uid:l,name:u,elements:f}})))},pR=e=>Vt(e)&&Ml(e,Qr()),bh=(e,t)=>Lr(e,"data-mce-bogus")||gR(e,'[data-mce-bogus="all"]',ph(t)),Ch=(e,t)=>{const n=C.fromDom(e.getBody()),s=bt(n,`[${Mo()}="${t}"]`);return se(s,o=>!bh(o,n))},yh=(e,t)=>{const n=C.fromDom(e.getBody()),s=bt(n,`[${Qs()}="${t}"]`),o={};return T(s,r=>{if(!bh(r,n)){const a=jt(r,Mo()),i=Ae(o,a).getOr([]);o[a]=i.concat([r])}}),o},hR=(e,t)=>{const n=tt({}),s=()=>({listeners:[],previous:cs()}),o=(f,d)=>{r(f,g=>(d(g),g))},r=(f,d)=>{const g=n.get(),h=Ae(g,f).getOrThunk(s),p=d(h);g[f]=p,n.set(g)},a=(f,d,g)=>{o(f,h=>{T(h.listeners,p=>p(!0,f,{uid:d,nodes:pe(g,b=>b.dom)}))})},i=f=>{o(f,d=>{T(d.listeners,g=>g(!1,f))})},c=(f,d)=>{T(Ch(e,f),g=>{d?at(g,Jr(),"true"):it(g,Jr())})},l=Su(()=>{const f=Ms(t.getNames());T(f,d=>{r(d,g=>{const h=g.previous.get();return hh(e,m.some(d)).fold(()=>{h.each(p=>{i(d),g.previous.clear(),c(p,!1)})},({uid:p,name:b,elements:y})=>{Ro(h,p)||(h.each(v=>c(v,!1)),a(b,p,y),g.previous.set(p),c(p,!0))}),{previous:g.previous,listeners:g.listeners}})})},30);return e.on("remove",()=>{l.cancel()}),e.on("NodeChange",()=>{l.throttle()}),{addListener:(f,d)=>{r(f,g=>({previous:g.previous,listeners:g.listeners.concat([d])}))}}},bR=(e,t)=>{const n=Qs(),s=r=>m.from(r.attr(n)).bind(t.lookup),o=r=>{var a,i;r.attr(Mo(),null),r.attr(Qs(),null),r.attr(Jr(),null);const c=m.from(r.attr(ta())).map(d=>d.split(",")).getOr([]),l=m.from(r.attr(ea())).map(d=>d.split(",")).getOr([]);T(c,d=>r.attr(d,null));const u=(i=(a=r.attr("class"))===null||a===void 0?void 0:a.split(" "))!==null&&i!==void 0?i:[],f=ci(u,[Qr()].concat(l));r.attr("class",f.length>0?f.join(" "):null),r.attr(ea(),null),r.attr(ta(),null)};e.serializer.addTempAttr(Jr()),e.serializer.addAttributeFilter(n,r=>{for(const a of r)s(a).each(i=>{i.persistent===!1&&(a.name==="span"?a.unwrap():o(a))})})},CR=()=>{const e={};return{register:(o,r)=>{e[o]={name:o,settings:r}},lookup:o=>Ae(e,o).map(r=>r.settings),getNames:()=>$t(e)}},yR=(e,t,n)=>Math.min(Math.max(e,t),n),vh=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Eh=0;const na=e=>{const n=new Date().getTime(),s=Math.floor(vh()*1e9);return Eh++,e+"_"+s+Eh+String(n)},vR=(e,t)=>{T(t,n=>{Po(e,n)})},ER=(e,t)=>{T(t,n=>{Fr(e,n)})},Sh=(e,t)=>C.fromDom(e.dom.cloneNode(t)),Js=e=>Sh(e,!1),wh=e=>Sh(e,!0),SR=(e,t)=>{const n=C.fromTag(t),s=op(e);return ns(n,s),n},wR=(e,t)=>{const n=SR(e,t);rs(e,n);const s=ht(e);return Vs(n,s),Re(e),n},kh=(e,t,n=De)=>{const s=new et(e,t),o=r=>{let a;do a=s[r]();while(a&&!O(a)&&!n(a));return m.from(a).filter(O)};return{current:()=>m.from(s.current()).filter(O),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},eo=(e,t)=>{const n=t||(a=>e.isBlock(a)||$e(a)||Ne(a)),s=(a,i,c,l)=>{if(O(a)){const u=l(a,i,a.data);if(u!==-1)return m.some({container:a,offset:u})}return c().bind(u=>s(u.container,u.offset,c,l))};return{backwards:(a,i,c,l)=>{const u=kh(a,l??e.getRoot(),n);return s(a,i,()=>u.prev().map(f=>({container:f,offset:f.length})),c).getOrNull()},forwards:(a,i,c,l)=>{const u=kh(a,l??e.getRoot(),n);return s(a,i,()=>u.next().map(f=>({container:f,offset:0})),c).getOrNull()}}},wu=((e,t)=>{const n=r=>{if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return s(r).getOr("")},s=r=>e(r)?m.from(r.dom.nodeValue):m.none();return{get:n,getOption:s,set:(r,a)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=a}}})(Tt,"text"),sa=e=>wu.get(e),kR=e=>wu.getOption(e),xh=(e,t)=>wu.set(e,t),xR=["td","th"],_R=["thead","tbody","tfoot"],NR=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],AR=["li","dd","dt"],RR=["ul","ol","dl"],TR=["pre","script","textarea","style"],Uo=e=>{let t;return n=>(t=t||Al(e,He),oe(t,he(n)))},PR=e=>he(e)==="table",to=e=>Vt(e)&&he(e)==="br",_h=Uo(NR),ku=Uo(RR),zo=Uo(AR),DR=Uo(_R),oa=Uo(xR),Bi=Uo(TR),OR=e=>{const t=[];let n=e.dom;for(;n;)t.push(C.fromDom(n)),n=n.lastChild;return t},BR=e=>{const t=bt(e,"br"),n=se(OR(e).slice(-1),to);t.length===n.length&&T(n,Re)},Ho=()=>{const e=C.fromTag("br");return at(e,"data-mce-bogus","1"),e},ks=e=>{Io(e),je(e,Ho())},IR=(e,t)=>{zl(e).each(n=>{ys(n).each(s=>{t.isBlock(he(e))&&to(n)&&t.isBlock(he(s))&&Re(n)})})},Qe=Vr,Ii=Zl,qt=H0,LR=e=>e.insertContent(Qe,{preserve_zwsp:!0}),$R=Y,Wo=O,Vo=e=>(Wo(e)&&(e=e.parentNode),$R(e)&&e.hasAttribute("data-mce-caret")),xs=e=>Wo(e)&&Ii(e.data),Qt=e=>Vo(e)||xs(e),Nh=e=>e.firstChild!==e.lastChild||!$e(e.firstChild),FR=(e,t)=>{var n;const o=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Qe),r=e.parentNode;if(t){const a=e.previousSibling;if(Wo(a)){if(Qt(a))return a;if($i(a))return a.splitText(a.data.length-1)}r==null||r.insertBefore(o,e)}else{const a=e.nextSibling;if(Wo(a)){if(Qt(a))return a;if(Li(a))return a.splitText(1),a}e.nextSibling?r==null||r.insertBefore(o,e.nextSibling):r==null||r.appendChild(o)}return o},xu=e=>{const t=e.container();return O(t)?t.data.charAt(e.offset())===Qe||e.isAtStart()&&xs(t.previousSibling):!1},_u=e=>{const t=e.container();return O(t)?t.data.charAt(e.offset()-1)===Qe||e.isAtEnd()&&xs(t.nextSibling):!1},MR=(e,t,n)=>{var s;const r=((s=t.ownerDocument)!==null&&s!==void 0?s:document).createElement(e);r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(Ho().dom);const a=t.parentNode;return n?a==null||a.insertBefore(r,t):t.nextSibling?a==null||a.insertBefore(r,t.nextSibling):a==null||a.appendChild(r),r},Li=e=>Wo(e)&&e.data[0]===Qe,$i=e=>Wo(e)&&e.data[e.data.length-1]===Qe,UR=e=>{var t;const n=e.getElementsByTagName("br"),s=n[n.length-1];qs(s)&&((t=s.parentNode)===null||t===void 0||t.removeChild(s))},Nu=e=>e&&e.hasAttribute("data-mce-caret")?(UR(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Ah=e=>Vo(e.startContainer),jo=Math.round,no=e=>e?{left:jo(e.left),top:jo(e.top),bottom:jo(e.bottom),right:jo(e.right),width:jo(e.width),height:jo(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Rh=(e,t)=>(e=no(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),zR=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,Th=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,ra=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top?!0:e.top>t.bottom?!1:Th(t.top-e.bottom,e,t)},aa=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:Th(t.bottom-e.top,e,t),HR=(e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom,WR=e=>Lt(e,(t,n)=>t.fold(()=>m.some(n),s=>{const o=Math.min(n.left,s.left),r=Math.min(n.top,s.top),a=Math.max(n.right,s.right),i=Math.max(n.bottom,s.bottom);return m.some({top:r,right:a,bottom:i,left:o,width:a-o,height:i-r})}),m.none()),Ph=(e,t,n)=>{const s=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-s)*(t-s)+(n-o)*(n-o))},VR=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),Fi=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},_s=(e,t)=>{if(Y(e)&&e.hasChildNodes()){const n=e.childNodes,s=yR(t,0,n.length-1);return n[s]}else return e},jR=(e,t)=>{if(!(t<0&&Y(e)&&e.hasChildNodes()))return _s(e,t)},qR=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Dh=e=>Q(e)&&e.charCodeAt(0)>=768&&qR.test(e),KR=(...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1},GR=(...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0},Oh=dn,YR=Ne,XR=$e,ZR=O,QR=kn(["script","style","textarea"]),Bh=kn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),JR=kn(["table"]),eT=Qt,Nn=e=>eT(e)?!1:ZR(e)?!QR(e.parentNode):Bh(e)||XR(e)||JR(e)||Au(e),tT=e=>Y(e)&&e.getAttribute("unselectable")==="true",Au=e=>!tT(e)&&YR(e),nT=(e,t)=>{for(let n=e.parentNode;n&&n!==t;n=n.parentNode){if(Au(n))return!1;if(Oh(n))return!0}return!0},sT=e=>Au(e)?!Lt(Wt(e.getElementsByTagName("*")),(t,n)=>t||Oh(n),!1):!1,oT=e=>Bh(e)||sT(e),Ih=(e,t)=>Nn(e)&&nT(e,t),Lh=Y,rT=Nn,$h=xi("display","block table"),aT=xi("float","left right"),ia=GR(Lh,rT,kr(aT)),iT=kr(xi("white-space","pre pre-line pre-wrap")),ca=O,Ru=$e,Fh=xe.nodeIndex,Mi=jR,Tu=e=>e?e.createRange():xe.DOM.createRng(),Pu=e=>Q(e)&&/[\r\n\t ]/.test(e),Mh=e=>!!e.setStart&&!!e.setEnd,Du=e=>{const t=e.startContainer,n=e.startOffset;if(Pu(e.toString())&&iT(t.parentNode)&&O(t)){const s=t.data;if(Pu(s[n-1])||Pu(s[n+1]))return!0}return!1},cT=e=>{const t=e.ownerDocument,n=Tu(t),s=t.createTextNode(Ze),o=e.parentNode;o.insertBefore(s,e),n.setStart(s,0),n.setEnd(s,1);const r=no(n.getBoundingClientRect());return o.removeChild(s),r},lT=e=>{const t=e.startContainer,n=e.endContainer,s=e.startOffset,o=e.endOffset;if(t===n&&O(n)&&s===0&&o===1){const r=e.cloneRange();return r.setEndAfter(n),Ns(r)}else return null},Uh=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Ns=e=>{var t;let n;const s=e.getClientRects();return s.length>0?n=no(s[0]):n=no(e.getBoundingClientRect()),!Mh(e)&&Ru(e)&&Uh(n)?cT(e):Uh(n)&&Mh(e)&&(t=lT(e))!==null&&t!==void 0?t:n},so=(e,t)=>{const n=Rh(e,t);return n.width=1,n.right=n.left+1,n},uT=e=>{const t=[],n=a=>{a.height!==0&&(t.length>0&&zR(a,t[t.length-1])||t.push(a))},s=(a,i)=>{const c=Tu(a.ownerDocument);if(i<a.data.length){if(Dh(a.data[i]))return;if(Dh(a.data[i-1])&&(c.setStart(a,i),c.setEnd(a,i+1),!Du(c))){n(so(Ns(c),!1));return}}i>0&&(c.setStart(a,i-1),c.setEnd(a,i),Du(c)||n(so(Ns(c),!1))),i<a.data.length&&(c.setStart(a,i),c.setEnd(a,i+1),Du(c)||n(so(Ns(c),!0)))},o=e.container(),r=e.offset();if(ca(o))return s(o,r),t;if(Lh(o))if(e.isAtEnd()){const a=Mi(o,r);ca(a)&&s(a,a.data.length),ia(a)&&!Ru(a)&&n(so(Ns(a),!1))}else{const a=Mi(o,r);if(ca(a)&&s(a,0),ia(a)&&e.isAtEnd())return n(so(Ns(a),!1)),t;const i=Mi(e.container(),e.offset()-1);ia(i)&&!Ru(i)&&($h(i)||$h(a)||!ia(a))&&n(so(Ns(i),!1)),ia(a)&&n(so(Ns(a),!0))}return t},N=(e,t,n)=>{const s=()=>(ca(e),t===0),o=()=>ca(e)?t>=e.data.length:t>=e.childNodes.length,r=()=>{const u=Tu(e.ownerDocument);return u.setStart(e,t),u.setEnd(e,t),u},a=()=>(n||(n=uT(N(e,t))),n),i=()=>a().length>0,c=u=>u&&e===u.container()&&t===u.offset(),l=u=>Mi(e,u?t-1:t);return{container:H(e),offset:H(t),toRange:r,getClientRects:a,isVisible:i,isAtStart:s,isAtEnd:o,isEqual:c,getNode:l}};N.fromRangeStart=e=>N(e.startContainer,e.startOffset),N.fromRangeEnd=e=>N(e.endContainer,e.endOffset),N.after=e=>N(e.parentNode,Fh(e)+1),N.before=e=>N(e.parentNode,Fh(e)),N.isAbove=(e,t)=>pt(Rt(t.getClientRects()),bs(e.getClientRects()),ra).getOr(!1),N.isBelow=(e,t)=>pt(bs(t.getClientRects()),Rt(e.getClientRects()),aa).getOr(!1),N.isAtStart=e=>e?e.isAtStart():!1,N.isAtEnd=e=>e?e.isAtEnd():!1,N.isTextPosition=e=>e?O(e.container()):!1,N.isElementPosition=e=>!N.isTextPosition(e);const Ui=(e,t)=>{O(t)&&t.data.length===0&&e.remove(t)},fT=(e,t,n)=>{t.insertNode(n),Ui(e,n.previousSibling),Ui(e,n.nextSibling)},dT=(e,t,n)=>{const s=m.from(n.firstChild),o=m.from(n.lastChild);t.insertNode(n),s.each(r=>Ui(e,r.previousSibling)),o.each(r=>Ui(e,r.nextSibling))},Ou=(e,t,n)=>{Jl(n)?dT(e,t,n):fT(e,t,n)},An=O,zh=qs,Hh=xe.nodeIndex,Wh=e=>{const t=e.parentNode;return zh(t)?Wh(t):t},Bu=e=>e?fi(e.childNodes,(t,n)=>(zh(n)&&n.nodeName!=="BR"?t=t.concat(Bu(n)):t.push(n),t),[]):[],mT=(e,t)=>{let n=e;for(;(n=n.previousSibling)&&An(n);)t+=n.data.length;return t},Vh=e=>t=>e===t,gT=e=>{let t,n;t=Bu(Wh(e)),n=kg(t,Vh(e),e),t=t.slice(0,n+1);const s=fi(t,(o,r,a)=>(An(r)&&An(t[a-1])&&o++,o),0);return t=Dr(t,kn([e.nodeName])),n=kg(t,Vh(e),e),n-s},jh=e=>(An(e)?"text()":e.nodeName.toLowerCase())+"["+gT(e)+"]",pT=(e,t,n)=>{const s=[];for(let o=t.parentNode;o&&o!==e;o=o.parentNode)s.push(o);return s},qh=(e,t)=>{let n=[],s=t.container(),o=t.offset(),r;if(An(s))r=mT(s,o);else{const i=s.childNodes;o>=i.length?(r="after",o=i.length-1):r="before",s=i[o]}n.push(jh(s));let a=pT(e,s);return a=Dr(a,kr(qs)),n=n.concat(Dl(a,i=>jh(i))),n.reverse().join("/")+","+r},hT=(e,t,n)=>{let s=Bu(e);return s=Dr(s,(o,r)=>!An(o)||!An(s[r-1])),s=Dr(s,kn([t])),s[n]},bT=(e,t)=>{let n=e,s=0;for(;An(n);){const o=n.data.length;if(t>=s&&t<=s+o){e=n,t=t-s;break}if(!An(n.nextSibling)){e=n,t=o;break}s+=o,n=n.nextSibling}return An(e)&&t>e.data.length&&(t=e.data.length),N(e,t)},Kh=(e,t)=>{if(!t)return null;const n=t.split(","),s=n[0].split("/"),o=n.length>1?n[1]:"before",r=fi(s,(a,i)=>{const c=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return c?(c[1]==="text()"&&(c[1]="#text"),hT(a,c[1],parseInt(c[2],10))):null},e);if(!r)return null;if(!An(r)&&r.parentNode){let a;return o==="after"?a=Hh(r)+1:a=Hh(r),N(r.parentNode,a)}return bT(r,parseInt(o,10))},zi=Ne,CT=(e,t,n)=>{let s=e(t.data.slice(0,n)).length;for(let o=t.previousSibling;o&&O(o);o=o.previousSibling)s+=e(o.data).length;return s},Gh=(e,t,n,s,o)=>{const r=o?s.startContainer:s.endContainer;let a=o?s.startOffset:s.endOffset;const i=[],c=e.getRoot();if(O(r))i.push(n?CT(t,r,a):a);else{let l=0;const u=r.childNodes;a>=u.length&&u.length&&(l=1,a=Math.max(0,u.length-1)),i.push(e.nodeIndex(u[a],n)+l)}for(let l=r;l&&l!==c;l=l.parentNode)i.push(e.nodeIndex(l,n));return i},yT=(e,t,n,s)=>{const o=t.dom,r=Gh(o,e,n,s,!0),a=t.isForward(),i=Ah(s)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:r,forward:a,...i};{const c=Gh(o,e,n,s,!1);return{start:r,end:c,forward:a,...i}}},Iu=(e,t,n)=>{let s=0;return I.each(e.select(t),o=>{if(o.getAttribute("data-mce-bogus")!=="all"){if(o===n)return!1;s++;return}}),s},Yh=(e,t)=>{let n=t?e.startContainer:e.endContainer,s=t?e.startOffset:e.endOffset;if(Y(n)&&n.nodeName==="TR"){const o=n.childNodes;n=o[Math.min(t?s:s-1,o.length-1)],n&&(s=t?0:n.childNodes.length,t?e.setStart(n,s):e.setEnd(n,s))}},Xh=e=>(Yh(e,!0),Yh(e,!1),e),Zh=(e,t)=>{if(Y(e)&&(e=_s(e,t),zi(e)))return e;if(Qt(e)){O(e)&&Vo(e)&&(e=e.parentNode);let n=e.previousSibling;if(zi(n)||(n=e.nextSibling,zi(n)))return n}},vT=e=>Zh(e.startContainer,e.startOffset)||Zh(e.endContainer,e.endOffset),Qh=(e,t,n)=>{const s=n.getNode(),o=n.getRng();if(s.nodeName==="IMG"||zi(s)){const a=s.nodeName;return{name:a,index:Iu(n.dom,a,s)}}const r=vT(o);if(r){const a=r.tagName;return{name:a,index:Iu(n.dom,a,r)}}return yT(e,n,t,o)},ET=e=>{const t=e.getRng();return{start:qh(e.dom.getRoot(),N.fromRangeStart(t)),end:qh(e.dom.getRoot(),N.fromRangeEnd(t)),forward:e.isForward()}},ST=e=>({rng:e.getRng(),forward:e.isForward()}),Jh=(e,t,n)=>{const s={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",s,"&#xFEFF;"):e.create("span",s)},eb=(e,t)=>{const n=e.dom;let s=e.getRng();const o=n.uniqueId(),r=e.isCollapsed(),a=e.getNode(),i=a.nodeName,c=e.isForward();if(i==="IMG")return{name:i,index:Iu(n,i,a)};const l=Xh(s.cloneRange());if(!r){l.collapse(!1);const f=Jh(n,o+"_end",t);Ou(n,l,f)}s=Xh(s),s.collapse(!0);const u=Jh(n,o+"_start",t);return Ou(n,s,u),e.moveToBookmark({id:o,keep:!0,forward:c}),{id:o,forward:c}},wT=(e,t,n=!1)=>t===2?Qh(qt,n,e):t===3?ET(e):t?ST(e):eb(e,!1),Lu=q(Qh,wt,!0),tb=e=>{const t=r=>r(e),n=H(e),s=()=>o,o={tag:!0,inner:e,fold:(r,a)=>a(e),isValue:He,isError:De,map:r=>Pt.value(r(e)),mapError:s,bind:t,exists:t,forall:t,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:r=>{r(e)},toOptional:()=>m.some(e)};return o},nb=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(s,o)=>s(e),isValue:De,isError:He,map:t,mapError:s=>Pt.error(s(e)),bind:t,exists:De,forall:He,getOr:wt,or:wt,getOrThunk:_l,orThunk:_l,getOrDie:pg(String(e)),each:le,toOptional:m.none};return n},Pt={value:tb,error:nb,fromOption:(e,t)=>e.fold(()=>nb(t),tb)},Wn={generate:e=>{if(!Fe(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return T(e,(s,o)=>{const r=$t(s);if(r.length!==1)throw new Error("one and only one name per case");const a=r[0],i=s[a];if(n[a]!==void 0)throw new Error("duplicate key detected:"+a);if(a==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Fe(i))throw new Error("case arguments must be an array");t.push(a),n[a]=(...c)=>{const l=c.length;if(l!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+l);return{fold:(...f)=>{if(f.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+f.length);return f[o].apply(null,c)},match:f=>{const d=$t(f);if(t.length!==d.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+d.join(","));if(!es(t,h=>Ee(d,h)))throw new Error("Not all branches were specified when using match. Specified: "+d.join(", ")+`
Required: `+t.join(", "));return f[a].apply(null,c)},log:f=>{console.log(f,{constructors:t,constructor:a,params:c})}}}}),n}};Wn.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const kT=e=>{const t=[],n=[];return T(e,s=>{s.fold(o=>{t.push(o)},o=>{n.push(o)})}),{errors:t,values:n}},xT=e=>e.type==="inline-command"||e.type==="inline-format",_T=e=>e.type==="block-command"||e.type==="block-format",NT=(e,t)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===t,AT=e=>{var t;const n=o=>Pt.error({message:o,pattern:e}),s=(o,r,a)=>{if(e.format!==void 0){let i;if(Fe(e.format)){if(!es(e.format,Q))return n(o+" pattern has non-string items in the `format` array");i=e.format}else if(Q(e.format))i=[e.format];else return n(o+" pattern has non-string `format` parameter");return Pt.value(r(i))}else return e.cmd!==void 0?Q(e.cmd)?Pt.value(a(e.cmd,e.value)):n(o+" pattern has non-string `cmd` parameter"):n(o+" pattern is missing both `format` and `cmd` parameters")};if(!ot(e))return n("Raw pattern is not an object");if(!Q(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!Q(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let o=e.start,r=e.end;return r.length===0&&(r=o,o=""),s("Inline",a=>({type:"inline-format",start:o,end:r,format:a}),(a,i)=>({type:"inline-command",start:o,end:r,cmd:a,value:i}))}else{if(e.replacement!==void 0)return Q(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):Pt.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter");{const o=(t=e.trigger)!==null&&t!==void 0?t:"space";return e.start.length===0?n("Block pattern has empty `start` parameter"):s("Block",r=>({type:"block-format",start:e.start,format:r[0],trigger:o}),(r,a)=>({type:"block-command",start:e.start,cmd:r,value:a,trigger:o}))}}},sb=e=>se(e,_T),ob=e=>se(e,xT),RT=(e,t)=>({inlinePatterns:ob(e),blockPatterns:sb(e),dynamicPatternsLookup:t}),$u=(e,t)=>({...e,blockPatterns:se(e.blockPatterns,n=>NT(n,t))}),rb=e=>{const t=kT(pe(e,AT));return T(t.errors,n=>console.error(n.message,n.pattern)),t.values},TT=e=>t=>{const n=e(t);return rb(n)},PT=(e,t)=>e.dispatch("PreProcess",t),DT=(e,t)=>e.dispatch("PostProcess",t),OT=e=>{e.dispatch("remove")},BT=e=>{e.dispatch("detach")},IT=(e,t)=>{e.dispatch("SwitchMode",{mode:t})},LT=(e,t,n,s,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:s,origin:o})},$T=(e,t,n,s,o)=>{e.dispatch("ObjectResized",{target:t,width:n,height:s,origin:o})},FT=e=>{e.dispatch("PreInit")},MT=e=>{e.dispatch("PostRender")},UT=e=>{e.dispatch("Init")},zT=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})},ab=(e,t,n)=>{e.dispatch(t,n)},ib=(e,t,n,s)=>{e.dispatch("FormatApply",{format:t,node:n,vars:s})},cb=(e,t,n,s)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:s})},HT=(e,t)=>e.dispatch("BeforeSetContent",t),lb=(e,t)=>e.dispatch("SetContent",t),WT=(e,t)=>e.dispatch("BeforeGetContent",t),ub=(e,t)=>e.dispatch("GetContent",t),VT=(e,t)=>{e.dispatch("AutocompleterStart",t)},jT=(e,t)=>{e.dispatch("AutocompleterUpdate",t)},Fu=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},qT=e=>{e.dispatch("AutocompleterEnd")},KT=(e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}),GT=(e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}),fb=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),YT=(e,t)=>e.dispatch("EditableRootStateChange",{state:t}),XT=(e,t)=>e.dispatch("DisabledStateChange",{state:t}),Mu=$n().deviceType,ZT=Mu.isTouch(),QT=xe.DOM,JT=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Lt(t,(n,s)=>{const o=s.split("="),r=o[0],a=o.length>1?o[1]:r;return n[Ao(r)]=Ao(a),n},{})},db=e=>ai(e,RegExp),V=e=>t=>t.options.get(e),Hi=e=>Q(e)||ot(e),mb=(e,t="")=>n=>{const s=Q(n);if(s)if(n.indexOf("=")!==-1){const o=JT(n);return{value:Ae(o,e.id).getOr(t),valid:s}}else return{value:n,valid:s};else return{valid:!1,message:"Must be a string."}},eP=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:mb(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:mb(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:n=>{const s=Q(n)&&Ln(n);return s?{value:n,valid:s}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:n=>{const s=Ee(["block","linebreak","invert","default"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:n=>Bn(n)?{valid:!0,value:n}:Q(n)?{valid:!0,value:n}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:n=>{const s=n===!1||Q(n)||Fs(n,Q);return s?Q(n)?{value:pe(n.split(","),Ao),valid:s}:Fe(n)?{value:n,valid:s}:n===!1?{value:[],valid:s}:{value:n,valid:s}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Hu(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:n=>{const s=Q(n)||Fs(n,Q);return s?{value:Fe(n)?n:pe(n.split(","),Ao),valid:s}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:n=>{const s=Bn(n)||Q(n);return s?n===!1||Mu.isiPhone()||Mu.isiPad()?{value:"",valid:s}:{value:n===!0?"table,img,figure.image,div,video,iframe":n,valid:s}:{valid:!1,message:"Must be boolean or a string"}},default:!ZT}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"string"}),t("service_message",{processor:"string"}),t("theme",{processor:n=>n===!1||Q(n)||we(n),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:n=>{const s=n===!1||Q(n);return s?{value:n===!1?"":n,valid:s}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("disabled",{processor:n=>Bn(n)?(e.initialized&&ji(e)!==n&&Promise.resolve().then(()=>{XT(e,n)}),{valid:!0,value:n}):{valid:!1,message:"The value must be a boolean."},default:!1}),t("readonly",{processor:"boolean",default:!1}),t("editable_root",{processor:"boolean",default:!0}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("allow_mathml_annotation_encodings",{processor:n=>{const s=Fs(n,Q);return s?{value:n,valid:s}:{valid:!1,message:"Must be an array of strings."}},default:[]}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean",default:!0}),t("pad_empty_with_br",{processor:"boolean",default:!1}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:Hi}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Hi}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Hi}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Hi}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:n=>Q(n)||n===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("license_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:n=>Fs(n,ot)||n===!1?{value:rb(n===!1?[]:n),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),t("text_patterns_lookup",{processor:n=>we(n)?{value:TT(n),valid:!0}:{valid:!1,message:"Must be a single function"},default:n=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:n=>Fs(n,db)?{value:n,valid:!0}:db(n)?{value:[n],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!0}),t("xss_sanitization",{processor:"boolean",default:!0}),t("details_initial_state",{processor:n=>{const s=Ee(["inherited","collapsed","expanded"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("details_serialized_state",{processor:n=>{const s=Ee(["inherited","collapsed","expanded"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("init_content_sync",{processor:"boolean",default:!1}),t("newdocument_content",{processor:"string",default:""}),t("sandbox_iframes",{processor:"boolean",default:!0}),t("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),t("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:_n.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:QT.getAttrib(e.getElement(),"placeholder")})})},tP=V("iframe_attrs"),nP=V("doctype"),gb=V("document_base_url"),sP=V("body_id"),oP=V("body_class"),pb=V("content_security_policy"),rP=V("br_in_pre"),yt=V("forced_root_block"),la=V("forced_root_block_attrs"),aP=V("newline_behavior"),iP=V("br_newline_selector"),cP=V("no_newline_selector"),lP=V("keep_styles"),uP=V("end_container_on_empty_block"),hb=V("automatic_uploads"),bb=V("images_reuse_filename"),fP=V("images_replace_blob_uris"),Cb=V("icons"),dP=V("icons_url"),mP=V("images_upload_url"),gP=V("images_upload_base_path"),pP=V("images_upload_credentials"),hP=V("images_upload_handler"),bP=V("content_css_cors"),Uu=V("referrer_policy"),yb=V("language"),CP=V("language_url"),vb=V("indent_use_margin"),yP=V("indentation"),vP=V("content_css"),EP=V("content_style"),Eb=V("font_css"),SP=V("directionality"),wP=V("inline_boundaries_selector"),Sb=V("object_resizing"),kP=V("resize_img_proportional"),xP=V("placeholder"),wb=V("event_root"),_P=V("service_message"),qo=V("theme"),NP=V("theme_url"),zu=V("model"),AP=V("model_url"),ua=V("inline_boundaries"),RP=V("formats"),TP=V("preview_styles"),PP=V("format_empty_lines"),DP=V("format_noneditable_selector"),OP=V("custom_ui_selector"),Hu=V("inline"),BP=V("hidden_input"),IP=V("submit_patch"),LP=V("add_form_submit_trigger"),$P=V("add_unload_trigger"),FP=V("custom_undo_redo_levels"),MP=V("disable_nodechange"),kb=V("readonly"),UP=V("editable_root"),xb=V("content_css_cors"),Wi=V("plugins"),zP=V("external_plugins"),HP=V("block_unsupported_drop"),WP=V("visual"),VP=V("visual_table_class"),_b=V("visual_anchor_class"),Nb=V("iframe_aria_text"),jP=V("setup"),qP=V("init_instance_callback"),KP=V("urlconverter_callback"),GP=V("auto_focus"),YP=V("browser_spellcheck"),XP=V("protect"),ZP=V("paste_block_drop"),Vi=V("paste_data_images"),QP=V("paste_preprocess"),JP=V("paste_postprocess"),eD=V("newdocument_content"),tD=V("paste_webkit_styles"),nD=V("paste_remove_styles_if_webkit"),sD=V("paste_merge_formats"),oD=V("smart_paste"),rD=V("paste_as_text"),aD=V("paste_tab_spaces"),iD=V("allow_html_data_urls"),cD=V("text_patterns"),lD=V("text_patterns_lookup"),Ab=V("noneditable_class"),uD=V("editable_class"),fD=V("noneditable_regexp"),dD=V("preserve_cdata"),mD=V("highlight_on_focus"),Rb=V("xss_sanitization"),gD=V("init_content_sync"),pD=e=>e.options.isSet("text_patterns_lookup"),hD=e=>I.explode(e.options.get("font_size_style_values")),bD=e=>I.explode(e.options.get("font_size_classes")),CD=e=>e.options.get("encoding")==="xml",Tb=e=>I.explode(e.options.get("images_file_types")),yD=V("table_tab_navigation"),vD=V("details_initial_state"),ED=V("details_serialized_state"),Pb=V("sandbox_iframes"),Wu=e=>e.options.get("sandbox_iframes_exclusions"),SD=V("convert_unsafe_embeds"),wD=V("license_key"),kD=V("api_key"),ji=V("disabled"),xD=Y,Db=O,Ob=e=>{const t=e.parentNode;t&&t.removeChild(e)},Bb=e=>{const t=qt(e);return{count:e.length-t.length,text:t}},Ib=e=>{let t;for(;(t=e.data.lastIndexOf(Qe))!==-1;)e.deleteData(t,1)},Lb=(e,t)=>(oo(e),t),_D=(e,t)=>{const n=Bb(e.data.substr(0,t.offset())),s=Bb(e.data.substr(t.offset()));return(n.text+s.text).length>0?(Ib(e),N(e,t.offset()-n.count)):t},ND=(e,t)=>{const n=t.container(),s=hN(Wt(n.childNodes),e).map(o=>o<t.offset()?N(n,t.offset()-1):t).getOr(t);return oo(e),s},AD=(e,t)=>Db(e)&&t.container()===e?_D(e,t):Lb(e,t),RD=(e,t)=>t.container()===e.parentNode?ND(e,t):Lb(e,t),TD=(e,t)=>N.isTextPosition(t)?AD(e,t):RD(e,t),oo=e=>{xD(e)&&Qt(e)&&(Nh(e)?e.removeAttribute("data-mce-caret"):Ob(e)),Db(e)&&(Ib(e),e.data.length===0&&Ob(e))},PD=Ne,DD=Hn,OD=_i,BD="*[contentEditable=false],video,audio,embed,object",$b=(e,t,n)=>{const s=Rh(t.getBoundingClientRect(),n);let o,r;if(e.tagName==="BODY"){const i=e.ownerDocument.documentElement;o=e.scrollLeft||i.scrollLeft,r=e.scrollTop||i.scrollTop}else{const i=e.getBoundingClientRect();o=e.scrollLeft-i.left,r=e.scrollTop-i.top}s.left+=o,s.right+=o,s.top+=r,s.bottom+=r,s.width=1;let a=t.offsetWidth-t.clientWidth;return a>0&&(n&&(a*=-1),s.left+=a,s.right+=a),s},ID=e=>{var t,n;const s=bt(C.fromDom(e),BD);for(let o=0;o<s.length;o++){const r=s[o].dom;let a=r.previousSibling;if($i(a)){const i=a.data;i.length===1?(t=a.parentNode)===null||t===void 0||t.removeChild(a):a.deleteData(i.length-1,1)}a=r.nextSibling,Li(a)&&(a.data.length===1?(n=a.parentNode)===null||n===void 0||n.removeChild(a):a.deleteData(0,1))}},LD=(e,t,n,s)=>{const o=cs();let r,a;const i=yt(e),c=e.dom,l=(p,b)=>{let y;if(u(),OD(b))return null;if(n(b)){const v=MR(i,b,p),E=$b(t,b,p);c.setStyle(v,"top",E.top),c.setStyle(v,"caret-color","transparent"),a=v;const S=c.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});c.setStyles(S,{...E}),c.add(t,S),o.set({caret:S,element:b,before:p}),p&&c.addClass(S,"mce-visual-caret-before"),f(),y=b.ownerDocument.createRange(),y.setStart(v,0),y.setEnd(v,0)}else return a=FR(b,p),y=b.ownerDocument.createRange(),fa(a.nextSibling)?(y.setStart(a,0),y.setEnd(a,0)):(y.setStart(a,1),y.setEnd(a,1)),y;return y},u=()=>{ID(t),a&&(oo(a),a=null),o.on(p=>{c.remove(p.caret),o.clear()}),r&&(clearInterval(r),r=void 0)},f=()=>{r=setInterval(()=>{o.on(p=>{s()?c.toggleClass(p.caret,"mce-visual-caret-hidden"):c.addClass(p.caret,"mce-visual-caret-hidden")})},500)};return{show:l,hide:u,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(p=>{const b=$b(t,p.element,p.before);c.setStyles(p.caret,{...b})})},destroy:()=>clearInterval(r)}},Fb=()=>Ce.browser.isFirefox(),fa=e=>PD(e)||DD(e),da=e=>(fa(e)||zn(e)&&Fb())&&bi(C.fromDom(e)).exists(Ws),$D=dn,Vu=Ne,FD=Hn,Mb=xi("display","block table table-cell table-row table-caption list-item"),Ub=Qt,zb=Vo,MD=Y,UD=O,zD=Nn,Ko=e=>e>0,ro=e=>e<0,qi=(e,t)=>{let n;for(;n=e(t);)if(!zb(n))return n;return null},ma=(e,t,n,s,o)=>{const r=new et(e,s),a=Vu(e)||zb(e);let i;if(ro(t)){if(a&&(i=qi(r.prev.bind(r),!0),n(i)))return i;for(;i=qi(r.prev.bind(r),o);)if(n(i))return i}if(Ko(t)){if(a&&(i=qi(r.next.bind(r),!0),n(i)))return i;for(;i=qi(r.next.bind(r),o);)if(n(i))return i}return null},HD=(e,t)=>{const n=o=>$D(o.dom),s=o=>o.dom===t;return os(C.fromDom(e),n,s).map(o=>o.dom).getOr(t)},As=(e,t)=>{for(;e&&e!==t;){if(Mb(e))return e;e=e.parentNode}return null},Vn=(e,t,n)=>As(e.container(),n)===As(t.container(),n),ju=(e,t)=>{if(!t)return m.none();const n=t.container(),s=t.offset();return MD(n)?m.from(n.childNodes[s+e]):m.none()},Hb=(e,t)=>{var n;const o=((n=t.ownerDocument)!==null&&n!==void 0?n:document).createRange();return e?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),o},WD=(e,t,n)=>As(t,e)===As(n,e),Wb=(e,t,n)=>{const s=e?"previousSibling":"nextSibling";let o=n;for(;o&&o!==t;){let r=o[s];if(r&&Ub(r)&&(r=r[s]),Vu(r)||FD(r)){if(WD(t,r,o))return r;break}if(zD(r))break;o=o.parentNode}return null},ga=q(Hb,!0),pa=q(Hb,!1),qu=(e,t,n)=>{let s;const o=q(Wb,!0,t),r=q(Wb,!1,t),a=n.startContainer,i=n.startOffset;if(Vo(a)){const c=UD(a)?a.parentNode:a,l=c.getAttribute("data-mce-caret");if(l==="before"&&(s=c.nextSibling,da(s)))return ga(s);if(l==="after"&&(s=c.previousSibling,da(s)))return pa(s)}if(!n.collapsed)return n;if(O(a)){if(Ub(a)){if(e===1){if(s=r(a),s)return ga(s);if(s=o(a),s)return pa(s)}if(e===-1){if(s=o(a),s)return pa(s);if(s=r(a),s)return ga(s)}return n}if($i(a)&&i>=a.data.length-1)return e===1&&(s=r(a),s)?ga(s):n;if(Li(a)&&i<=1)return e===-1&&(s=o(a),s)?pa(s):n;if(i===a.data.length)return s=r(a),s?ga(s):n;if(i===0)return s=o(a),s?pa(s):n}return n},Vb=(e,t)=>ju(e?0:-1,t).filter(Vu),ha=(e,t,n)=>{const s=qu(e,t,n);return e===-1?N.fromRangeStart(s):N.fromRangeEnd(s)},Ki=e=>m.from(e.getNode()).map(C.fromDom),VD=e=>m.from(e.getNode(!0)).map(C.fromDom),Ku=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},Gi=(e,t)=>{const n=Vn(e,t);return!n&&$e(e.getNode())?!0:n};var nt;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(nt||(nt={}));const jD=Ne,jn=O,jb=Y,Gu=$e,Go=Nn,qb=oT,Yi=Ih,qD=(e,t)=>{const n=[];let s=e;for(;s&&s!==t;)n.push(s),s=s.parentNode;return n},Kb=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,Gb=(e,t)=>{if(Ko(e)){if(Go(t.previousSibling)&&!jn(t.previousSibling))return N.before(t);if(jn(t))return N(t,0)}if(ro(e)){if(Go(t.nextSibling)&&!jn(t.nextSibling))return N.after(t);if(jn(t))return N(t,t.data.length)}return ro(e)?Gu(t)?N.before(t):N.after(t):N.before(t)},KD=(e,t)=>{const n=t.nextSibling;return n&&Go(n)?jn(n)?N(n,0):N.before(n):Yu(nt.Forwards,N.after(t),e)},Yu=(e,t,n)=>{let s,o,r,a;if(!jb(n)||!t)return null;if(t.isEqual(N.after(n))&&n.lastChild){if(a=N.after(n.lastChild),ro(e)&&Go(n.lastChild)&&jb(n.lastChild))return Gu(n.lastChild)?N.before(n.lastChild):a}else a=t;const i=a.container();let c=a.offset();if(jn(i)){if(ro(e)&&c>0)return N(i,--c);if(Ko(e)&&c<i.length)return N(i,++c);s=i}else{if(ro(e)&&c>0&&(o=Kb(i,c-1),Go(o)))return!qb(o)&&(r=ma(o,e,Yi,o),r)?jn(r)?N(r,r.data.length):N.after(r):jn(o)?N(o,o.data.length):N.before(o);if(Ko(e)&&c<i.childNodes.length&&(o=Kb(i,c),Go(o)))return Gu(o)?KD(n,o):!qb(o)&&(r=ma(o,e,Yi,o),r)?jn(r)?N(r,0):N.before(r):jn(o)?N(o,0):N.after(o);s=o||a.getNode()}if(s&&(Ko(e)&&a.isAtEnd()||ro(e)&&a.isAtStart())&&(s=ma(s,e,He,n,!0),Yi(s,n)))return Gb(e,s);o=s&&ma(s,e,Yi,n);const l=Us(se(qD(i,n),jD));return l&&(!o||!l.contains(o))?(Ko(e)?a=N.after(l):a=N.before(l),a):o?Gb(e,o):null},qn=e=>({next:t=>Yu(nt.Forwards,t,e),prev:t=>Yu(nt.Backwards,t,e)}),GD=(e,t,n)=>{const s=e?N.before(n):N.after(n);return Jt(e,t,s)},YD=e=>$e(e)?N.before(e):N.after(e),Yb=e=>N.isTextPosition(e)?e.offset()===0:Nn(e.getNode()),Xb=e=>{if(N.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return Nn(e.getNode(!0))},Zb=(e,t)=>!N.isTextPosition(e)&&!N.isTextPosition(t)&&e.getNode()===t.getNode(!0),XD=e=>!N.isTextPosition(e)&&$e(e.getNode()),ZD=(e,t,n)=>e?!Zb(t,n)&&!XD(t)&&Xb(t)&&Yb(n):!Zb(n,t)&&Yb(t)&&Xb(n),Jt=(e,t,n)=>{const s=qn(t);return m.from(e?s.next(n):s.prev(n))},Yo=(e,t,n)=>Jt(e,t,n).bind(s=>Vn(n,s,t)&&ZD(e,n,s)?Jt(e,t,s):m.some(s)),Qb=(e,t,n,s)=>Yo(e,t,n).bind(o=>s(o)?Qb(e,t,o,s):m.some(o)),Xo=(e,t)=>{const n=e?t.firstChild:t.lastChild;return O(n)?m.some(N(n,e?0:n.data.length)):n?Nn(n)?m.some(e?N.before(n):YD(n)):GD(e,t,n):m.none()},Dt=q(Jt,!0),Mt=q(Jt,!1),vt=q(Xo,!0),mn=q(Xo,!1),Xu="_mce_caret",en=e=>Y(e)&&e.id===Xu,ao=(e,t)=>{let n=t;for(;n&&n!==e;){if(en(n))return n;n=n.parentNode}return null},QD=e=>Q(e.start),JD=e=>oe(e,"rng"),e1=e=>oe(e,"id"),Jb=e=>oe(e,"name"),eC=e=>I.isArray(e.start),Xi=e=>!Jb(e)&&Bn(e.forward)?e.forward:!0,tC=(e,t)=>(Y(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),t1=(e,t)=>{const n=m.from(Kh(e.getRoot(),t.start)),s=m.from(Kh(e.getRoot(),t.end));return pt(n,s,(o,r)=>{const a=e.createRng();return a.setStart(o.container(),o.offset()),a.setEnd(r.container(),r.offset()),{range:a,forward:Xi(t)}})},n1=(e,t)=>{var n;const o=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Qe);e.appendChild(o),t.setStart(o,0),t.setEnd(o,0)},s1=e=>!e.hasChildNodes(),o1=(e,t)=>mn(e).fold(De,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),nC=(e,t,n)=>s1(t)&&ao(e,t)?(n1(t,n),!0):!1,sC=(e,t,n,s)=>{const o=n[t?"start":"end"],r=e.getRoot();if(o){let a=r,i=o[0];for(let c=o.length-1;a&&c>=1;c--){const l=a.childNodes;if(nC(r,a,s))return!0;if(o[c]>l.length-1)return nC(r,a,s)?!0:o1(a,s);a=l[o[c]]}O(a)&&(i=Math.min(o[0],a.data.length)),Y(a)&&(i=Math.min(o[0],a.childNodes.length)),t?s.setStart(a,i):s.setEnd(a,i)}return!0},Zu=e=>O(e)&&e.data.length>0,oC=(e,t,n)=>{const s=e.get(n.id+"_"+t),o=s==null?void 0:s.parentNode,r=n.keep;if(s&&o){let a,i;if(t==="start"?r?s.hasChildNodes()?(a=s.firstChild,i=1):Zu(s.nextSibling)?(a=s.nextSibling,i=0):Zu(s.previousSibling)?(a=s.previousSibling,i=s.previousSibling.data.length):(a=o,i=e.nodeIndex(s)+1):(a=o,i=e.nodeIndex(s)):r?s.hasChildNodes()?(a=s.firstChild,i=1):Zu(s.previousSibling)?(a=s.previousSibling,i=s.previousSibling.data.length):(a=o,i=e.nodeIndex(s)):(a=o,i=e.nodeIndex(s)),!r){const c=s.previousSibling,l=s.nextSibling;I.each(I.grep(s.childNodes),f=>{O(f)&&(f.data=f.data.replace(/\uFEFF/g,""))});let u;for(;u=e.get(n.id+"_"+t);)e.remove(u,!0);if(O(l)&&O(c)&&!Ce.browser.isOpera()){const f=c.data.length;c.appendData(l.data),e.remove(l),a=c,i=f}}return m.some(N(a,i))}else return m.none()},r1=(e,t)=>{const n=e.createRng();return sC(e,!0,t,n)&&sC(e,!1,t,n)?m.some({range:n,forward:Xi(t)}):m.none()},a1=(e,t)=>{const n=oC(e,"start",t),s=oC(e,"end",t);return pt(n,s.or(n),(o,r)=>{const a=e.createRng();return a.setStart(tC(e,o.container()),o.offset()),a.setEnd(tC(e,r.container()),r.offset()),{range:a,forward:Xi(t)}})},i1=(e,t)=>m.from(e.select(t.name)[t.index]).map(n=>{const s=e.createRng();return s.selectNode(n),{range:s,forward:!0}}),c1=(e,t)=>{const n=e.dom;if(t){if(eC(t))return r1(n,t);if(QD(t))return t1(n,t);if(e1(t))return a1(n,t);if(Jb(t))return i1(n,t);if(JD(t))return m.some({range:t.rng,forward:Xi(t)})}return m.none()},l1=(e,t,n)=>wT(e,t,n),u1=(e,t)=>{c1(e,t).each(({range:n,forward:s})=>{e.setRng(n,s)})},tn=e=>Y(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Zi=(e=>t=>e===t)(Ze),io=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Qu=e=>!io(e)&&!Zi(e)&&!Zl(e),Ju=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},f1=e=>Zt(e,t=>{const n=Fi(t);return n?[C.fromDom(n)]:[]}),d1=e=>Ju(e).length>1,m1=e=>se(f1(e),oa),g1=e=>bt(e,"td[data-mce-selected],th[data-mce-selected]"),rC=(e,t)=>{const n=g1(t);return n.length>0?n:m1(e)},Zo=e=>rC(Ju(e.selection.getSel()),C.fromDom(e.getBody())),ba=(e,t)=>Hr(e,"table",t),p1=e=>{const t=e.startContainer,n=e.startOffset;return O(t)?n===0?m.some(C.fromDom(t)):m.none():m.from(t.childNodes[n]).map(C.fromDom)},h1=e=>{const t=e.endContainer,n=e.endOffset;return O(t)?n===t.data.length?m.some(C.fromDom(t)):m.none():m.from(t.childNodes[n-1]).map(C.fromDom)},aC=e=>Ul(e).fold(H([e]),t=>[e].concat(aC(t))),ef=e=>zl(e).fold(H([e]),t=>he(t)==="br"?ys(t).map(n=>[e].concat(ef(n))).getOr([]):[e].concat(ef(t))),tf=(e,t)=>pt(p1(t),h1(t),(n,s)=>{const o=Ye(aC(e),q(ve,n)),r=Ye(ef(e),q(ve,s));return o.isSome()&&r.isSome()}).getOr(!1),nf=(e,t,n,s)=>{const o=n,r=new et(n,o),a=Pr(e.schema.getMoveCaretBeforeOnEnterElements(),(c,l)=>!Ee(["td","th","table"],l.toLowerCase()));let i=n;do{if(O(i)&&I.trim(i.data).length!==0){s?t.setStart(i,0):t.setEnd(i,i.data.length);return}if(a[i.nodeName]){s?t.setStartBefore(i):i.nodeName==="BR"?t.setEndBefore(i):t.setEndAfter(i);return}}while(i=s?r.next():r.prev());o.nodeName==="BODY"&&(s?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Qi=e=>{const t=e.selection.getSel();return M(t)&&t.rangeCount>0},sf=(e,t)=>{const n=Zo(e);n.length>0?T(n,s=>{const o=s.dom,r=e.dom.createRng();r.setStartBefore(o),r.setEndAfter(o),t(r,!0)}):t(e.selection.getRng(),!1)},iC=(e,t,n)=>{const s=eb(e,t);n(s),e.moveToBookmark(s)},Ca=e=>fn(e==null?void 0:e.nodeType),of=e=>Y(e)&&!tn(e)&&!en(e)&&!qs(e),b1=(e,t)=>{if(of(t)&&!/^(TD|TH)$/.test(t.nodeName)){const n=e.getAttrib(t,"data-mce-selected"),s=parseInt(n,10);return!isNaN(s)&&s>0}else return!1},cC=(e,t,n)=>{const{selection:s,dom:o}=e,r=s.getNode(),a=Ne(r);iC(s,!0,()=>{t()}),a&&Ne(r)&&o.isChildOf(r,e.getBody())?e.selection.select(r):n(s.getStart())&&C1(o,s)},C1=(e,t)=>{var n,s;const o=t.getRng(),{startContainer:r,startOffset:a}=o,i=t.getNode();if(!b1(e,i)&&Y(r)){const c=r.childNodes,l=e.getRoot();let u;if(a<c.length){const f=c[a];u=new et(f,(n=e.getParent(f,e.isBlock))!==null&&n!==void 0?n:l)}else{const f=c[c.length-1];u=new et(f,(s=e.getParent(f,e.isBlock))!==null&&s!==void 0?s:l),u.next(!0)}for(let f=u.current();f;f=u.next()){if(e.getContentEditable(f)==="false")return;if(O(f)&&!af(f)){o.setStart(f,0),t.setRng(o);return}}}},lC=(e,t,n)=>{if(e){const s=t?"nextSibling":"previousSibling";for(e=e[s];e;e=e[s])if(Y(e)||!af(e))return e}},rf=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Gs(e,t),Qo=(e,t,n)=>e.schema.isValidChild(t,n),af=(e,t=!1)=>{if(M(e)&&O(e)){const n=t?e.data.replace(/ /g," "):e.data;return $o(n)}else return!1},y1=e=>M(e)&&O(e)&&e.length===0,v1=(e,t)=>{const n="[data-mce-cef-wrappable]",s=DP(e),o=Br(s)?n:`${n},${s}`;return En(C.fromDom(t),o)},uC=(e,t)=>{const n=e.dom;return of(t)&&n.getContentEditable(t)==="false"&&v1(e,t)&&n.select('[contenteditable="true"]',t).length===0},Rs=(e,t)=>we(e)?e(t):(M(t)&&(e=e.replace(/%(\w+)/g,(n,s)=>t[s]||n)),e),cf=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),lf=(e,t)=>{if(Ve(e))return null;{let n=String(e);return(t==="color"||t==="backgroundColor")&&(n=Gr(n)),t==="fontWeight"&&e===700&&(n="bold"),t==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Ji=(e,t,n)=>{const s=e.getStyle(t,n);return lf(s,n)},fC=(e,t)=>{let n;return e.getParent(t,s=>Y(s)?(n=e.getStyle(s,"text-decoration"),!!n&&n!=="none"):!1),n},ec=(e,t,n)=>e.getParents(t,n,e.getRoot()),uf=(e,t,n)=>{const s=e.formatter.get(t);return M(s)&&Le(s,n)},E1=(e,t)=>uf(e,t,s=>{const o=r=>we(r)||r.length>1&&r.charAt(0)==="%";return Le(["styles","attributes"],r=>Ae(s,r).exists(a=>{const i=Fe(a)?a:Tl(a);return Le(i,o)}))}),S1=(e,t,n)=>{const s=["inline","block","selector","attributes","styles","classes"],o=r=>Pr(r,(a,i)=>Le(s,c=>c===i));return uf(e,t,r=>{const a=o(r);return uf(e,n,i=>{const c=o(i);return vN(a,c)})})},Kn=e=>No(e,"block"),w1=e=>Kn(e)&&e.wrapper===!0,k1=e=>Kn(e)&&e.wrapper!==!0,nn=e=>No(e,"selector"),Je=e=>No(e,"inline"),x1=e=>nn(e)&&Je(e)&&Ro(Ae(e,"mixed"),!0),ff=e=>nn(e)&&e.expand!==!1&&!Je(e),_1=e=>{const t=[];let n=e;for(;n;){if(O(n)&&n.data!==Qe||n.childNodes.length>1)return[];Y(n)&&t.push(n),n=n.firstChild}return t},dC=e=>_1(e).length>0,df=e=>en(e.dom)&&dC(e.dom),Jo=tn,mC=ec,gC=af,N1=rf,A1=e=>$e(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,pC=(e,t)=>{let n=t;for(;n;){if(Y(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},hC=(e,t,n,s)=>{const o=t.data;if(e){for(let r=n;r>0;r--)if(s(o.charAt(r-1)))return r}else for(let r=n;r<o.length;r++)if(s(o.charAt(r)))return r;return-1},R1=(e,t,n)=>hC(e,t,n,s=>Zi(s)||io(s)),T1=(e,t,n)=>hC(e,t,n,Qu),bC=(e,t,n,s,o,r)=>{let a;const i=e.getParent(n,e.isBlock)||t,c=(u,f,d)=>{const g=eo(e),h=o?g.backwards:g.forwards;return m.from(h(u,f,(p,b)=>Jo(p.parentNode)?-1:(a=p,d(o,p,b)),i))};return c(n,s,R1).bind(u=>r?c(u.container,u.offset+(o?-1:0),T1):m.some(u)).orThunk(()=>a?m.some({container:a,offset:o?0:a.length}):m.none())},CC=(e,t,n,s,o)=>{const r=s[o];O(s)&&Br(s.data)&&r&&(s=r);const a=mC(e,s);for(let i=0;i<a.length;i++)for(let c=0;c<t.length;c++){const l=t[c];if(!(M(l.collapsed)&&l.collapsed!==n.collapsed)&&nn(l)&&e.is(a[i],l.selector))return a[i]}return s},yC=(e,t,n,s)=>{var o;let r=n;const a=e.getRoot(),i=t[0];if(Kn(i)&&(r=i.wrapper?null:e.getParent(n,i.block,a)),!r){const c=(o=e.getParent(n,"LI,TD,TH,SUMMARY"))!==null&&o!==void 0?o:a;r=e.getParent(O(n)?n.parentNode:n,l=>l!==a&&N1(e.schema,l),c)}if(r&&Kn(i)&&i.wrapper&&(r=mC(e,r,"ul,ol").reverse()[0]||r),!r)for(r=n;r&&r[s]&&!e.isBlock(r[s])&&(r=r[s],!cf(r,"br")););return r||n},vC=(e,t,n,s)=>{const o=n.parentNode;return M(n[s])?!1:o===t||Ve(o)||e.isBlock(o)?!0:vC(e,t,o,s)},tc=(e,t,n,s,o)=>{let r=n;const a=o?"previousSibling":"nextSibling",i=e.getRoot();if(O(n)&&!gC(n)&&(o?s>0:s<n.data.length))return n;for(;r;){if(!t[0].block_expand&&e.isBlock(r))return r;for(let c=r[a];c;c=c[a]){const l=O(c)&&!vC(e,i,c,a);if(!Jo(c)&&!A1(c)&&!gC(c,l))return r}if(r===i||r.parentNode===i){n=r;break}r=r.parentNode}return n},EC=e=>Jo(e.parentNode)||Jo(e),co=(e,t,n,s=!1)=>{let{startContainer:o,startOffset:r,endContainer:a,endOffset:i}=t;const c=n[0];return Y(o)&&o.hasChildNodes()&&(o=_s(o,r),O(o)&&(r=0)),Y(a)&&a.hasChildNodes()&&(a=_s(a,t.collapsed?i:i-1),O(a)&&(i=a.data.length)),o=pC(e,o),a=pC(e,a),EC(o)&&(o=Jo(o)?o:o.parentNode,t.collapsed?o=o.previousSibling||o:o=o.nextSibling||o,O(o)&&(r=t.collapsed?o.length:0)),EC(a)&&(a=Jo(a)?a:a.parentNode,t.collapsed?a=a.nextSibling||a:a=a.previousSibling||a,O(a)&&(i=t.collapsed?0:a.length)),t.collapsed&&(bC(e,e.getRoot(),o,r,!0,s).each(({container:f,offset:d})=>{o=f,r=d}),bC(e,e.getRoot(),a,i,!1,s).each(({container:f,offset:d})=>{a=f,i=d})),(Je(c)||c.block_expand)&&((!Je(c)||!O(o)||r===0)&&(o=tc(e,n,o,r,!0)),(!Je(c)||!O(a)||i===a.data.length)&&(a=tc(e,n,a,i,!1))),ff(c)&&(o=CC(e,n,t,o,"previousSibling"),a=CC(e,n,t,a,"nextSibling")),(Kn(c)||nn(c))&&(o=yC(e,n,o,"previousSibling"),a=yC(e,n,a,"nextSibling"),Kn(c)&&(e.isBlock(o)||(o=tc(e,n,o,r,!0),O(o)&&(r=0)),e.isBlock(a)||(a=tc(e,n,a,i,!1),O(a)&&(i=a.data.length)))),Y(o)&&o.parentNode&&(r=e.nodeIndex(o),o=o.parentNode),Y(a)&&a.parentNode&&(i=e.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:r,endContainer:a,endOffset:i}},ya=(e,t,n)=>{var s;const o=t.startOffset,r=_s(t.startContainer,o),a=t.endOffset,i=_s(t.endContainer,a-1),c=b=>{const y=b[0];O(y)&&y===r&&o>=y.data.length&&b.splice(0,1);const v=b[b.length-1];return a===0&&b.length>0&&v===i&&O(v)&&b.splice(b.length-1,1),b},l=(b,y,v)=>{const E=[];for(;b&&b!==v;b=b[y])E.push(b);return E},u=(b,y)=>e.getParent(b,v=>v.parentNode===y,y),f=(b,y,v)=>{const E=v?"nextSibling":"previousSibling";for(let S=b,R=S.parentNode;S&&S!==y;S=R){R=S.parentNode;const D=l(S===b?S:S[E],E);D.length&&(v||D.reverse(),n(c(D)))}};if(r===i)return n(c([r]));const d=(s=e.findCommonAncestor(r,i))!==null&&s!==void 0?s:e.getRoot();if(e.isChildOf(r,i))return f(r,d,!0);if(e.isChildOf(i,r))return f(i,d);const g=u(r,d)||r,h=u(i,d)||i;f(r,g,!0);const p=l(g===r?g:g.nextSibling,"nextSibling",h===i?h.nextSibling:h);p.length&&n(c(p)),f(i,h)},P1=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],D1=e=>Tt(e)&&sa(e)===Qe,O1=(e,t,n,s)=>wn(t).fold(()=>"skipping",o=>s==="br"||D1(t)?"valid":pR(t)?"existing":en(t.dom)?"caret":Le(P1,r=>En(t,r))?"valid-block":!Qo(e,n,s)||!Qo(e,he(o),n)?"invalid-child":"valid"),B1=(e,t)=>{const n=co(e.dom,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},SC=(e,t,n,s,o,r)=>{const{uid:a=t,...i}=n;Po(e,Qr()),at(e,`${Mo()}`,a),at(e,`${Qs()}`,s);const{attributes:c={},classes:l=[]}=o(a,i);if(ns(e,c),vR(e,l),r){l.length>0&&at(e,`${ea()}`,l.join(","));const u=$t(c);u.length>0&&at(e,`${ta()}`,u.join(","))}},I1=e=>{Fr(e,Qr()),it(e,`${Mo()}`),it(e,`${Qs()}`),it(e,`${Jr()}`);const t=ss(e,`${ta()}`).map(s=>s.split(",")).getOr([]),n=ss(e,`${ea()}`).map(s=>s.split(",")).getOr([]);T(t,s=>it(e,s)),ER(e,n),it(e,`${ea()}`),it(e,`${ta()}`)},wC=(e,t,n,s,o)=>{const r=C.fromTag("span",e);return SC(r,t,n,s,o,!1),r},L1=(e,t,n,s,o,r)=>{const a=[],i=wC(e.getDoc(),n,r,s,o),c=cs(),l=()=>{c.clear()},u=()=>c.get().getOrThunk(()=>{const h=Js(i);return a.push(h),c.set(h),h}),f=h=>{T(h,d)},d=h=>{switch(O1(e,h,"span",he(h))){case"invalid-child":{l();const b=ht(h);f(b),l();break}case"valid-block":{l(),SC(h,n,r,s,o,!0);break}case"valid":{const b=u();Ep(h,b);break}}},g=h=>{const p=pe(h,C.fromDom);f(p)};return ya(e.dom,t,h=>{l(),g(h)}),a},$1=(e,t,n,s)=>{e.undoManager.transact(()=>{const o=e.selection,r=o.getRng(),a=Zo(e).length>0,i=na("mce-annotation");if(r.collapsed&&!a&&B1(e,r),o.getRng().collapsed&&!a){const c=wC(e.getDoc(),i,s,t,n.decorate);Si(c,Ze),o.getRng().insertNode(c.dom),o.select(c.dom)}else iC(o,!1,()=>{sf(e,c=>{L1(e,c,i,t,n.decorate,s)})})})},kC=e=>{const t=CR();bR(e,t);const n=hR(e,t),s=hi("span"),o=r=>{T(r,a=>{s(a)?Es(a):I1(a)})};return{register:(r,a)=>{t.register(r,a)},annotate:(r,a)=>{t.lookup(r).each(i=>{$1(e,r,i,a)})},annotationChanged:(r,a)=>{n.addListener(r,a)},remove:r=>{hh(e,m.some(r)).each(({elements:a})=>{const i=e.selection.getBookmark();o(a),e.selection.moveToBookmark(i)})},removeAll:r=>{const a=e.selection.getBookmark();_e(yh(e,r),(i,c)=>{o(i)}),e.selection.moveToBookmark(a)},getAll:r=>{const a=yh(e,r);return Tr(a,i=>pe(i,c=>c.dom))}}},va=e=>({getBookmark:q(l1,e),moveToBookmark:q(u1,e)});va.isBookmarkNode=tn;const xC=(e,t,n)=>n.collapsed?!1:Le(n.getClientRects(),s=>HR(s,e,t)),_C=()=>C.fromDom(document),NC=(e,t=!1)=>e.dom.focus({preventScroll:t}),AC=e=>{const t=vs(e).dom;return e.dom===t.activeElement},mf=(e=_C())=>m.from(e.dom.activeElement).map(C.fromDom),F1=e=>mf(vs(e)).filter(t=>e.dom.contains(t.dom)),RC={create:(e,t,n,s)=>({start:e,soffset:t,finish:n,foffset:s})},gf=Wn.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),M1=(e,t,n,s)=>e.fold(t,n,s),U1=e=>e.fold(wt,wt,wt),z1=gf.before,H1=gf.on,W1=gf.after,us={before:z1,on:H1,after:W1,cata:M1,getStart:U1},nc=Wn.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),V1=e=>nc.exact(e.start,e.soffset,e.finish,e.foffset),j1=e=>e.match({domRange:t=>C.fromDom(t.startContainer),relative:(t,n)=>us.getStart(t),exact:(t,n,s,o)=>t}),q1=nc.domRange,K1=nc.relative,G1=nc.exact,Y1=e=>{const t=j1(e);return Ur(t)},X1=RC.create,er={domRange:q1,relative:K1,exact:G1,exactFromRange:V1,getWin:Y1,range:X1},TC=(e,t)=>{const n=Tt(t)?sa(t).length:ht(t).length+1;return e>n?n:e<0?0:e},Z1=e=>er.range(e.start,TC(e.soffset,e.start),e.finish,TC(e.foffset,e.finish)),PC=(e,t)=>!ki(t.dom)&&(Sn(e,t)||ve(e,t)),DC=e=>t=>PC(e,t.start)&&PC(e,t.finish),Q1=e=>e.inline||Ce.browser.isFirefox(),J1=e=>er.range(C.fromDom(e.startContainer),e.startOffset,C.fromDom(e.endContainer),e.endOffset),eO=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?m.none():m.from(t.getRangeAt(0))).map(J1)},tO=e=>{const t=Ur(e);return eO(t.dom).filter(DC(e))},nO=(e,t)=>m.from(t).filter(DC(e)).map(Z1),sO=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),m.some(t)}catch{return m.none()}},sc=e=>{const t=Q1(e)?tO(C.fromDom(e.getBody())):m.none();e.bookmark=t.isSome()?t:e.bookmark},pf=e=>(e.bookmark?e.bookmark:m.none()).bind(n=>nO(C.fromDom(e.getBody()),n)).bind(sO),oO=e=>{pf(e).each(t=>e.selection.setRng(t))},OC={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},rO=(e,t)=>(fn(t)||(t=0),setTimeout(e,t)),aO=(e,t)=>(fn(t)||(t=0),setInterval(e,t)),sn={setEditorTimeout:(e,t,n)=>rO(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const s=aO(()=>{e.removed?clearInterval(s):t()},n);return s}},iO=e=>e.type==="nodechange"&&e.selectionChange,cO=(e,t)=>{const n=()=>{t.throttle()};xe.DOM.bind(document,"mouseup",n),e.on("remove",()=>{xe.DOM.unbind(document,"mouseup",n)})},lO=(e,t)=>{e.on("mouseup touchend",n=>{t.throttle()})},uO=(e,t)=>{lO(e,t),e.on("keyup NodeChange AfterSetSelectionRange",n=>{iO(n)||sc(e)})},fO=e=>{const t=Oi(()=>{sc(e)},0);e.on("init",()=>{e.inline&&cO(e,t),uO(e,t)}),e.on("remove",()=>{t.cancel()})};let tr;const hf=xe.DOM,dO=e=>Y(e)&&OC.isEditorUIElement(e),bf=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},oc=(e,t)=>{const n=OP(e);return hf.getParent(t,o=>dO(o)||(n?e.dom.is(o,n):!1))!==null},Cf=e=>{try{const t=vs(C.fromDom(e.getElement()));return mf(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},mO=(e,t)=>{const n=t.editor;fO(n);const s=(o,r)=>{if(mD(o)&&o.inline!==!0){const a=C.fromDom(o.getContainer());r(a,"tox-edit-focus")}};n.on("focusin",()=>{const o=e.focusedEditor;bf(Cf(n))&&s(n,Po),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{sn.setEditorTimeout(n,()=>{const o=e.focusedEditor;(!bf(Cf(n))||o!==n)&&s(n,Fr),!oc(n,Cf(n))&&o===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),tr||(tr=o=>{const r=e.activeEditor;r&&pp(o).each(a=>{const i=a;i.ownerDocument===document&&i!==document.body&&!oc(r,i)&&e.focusedEditor===r&&(r.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},hf.bind(document,"focusin",tr))},gO=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&tr&&(hf.unbind(document,"focusin",tr),tr=null)},pO=e=>{e.on("AddEditor",q(mO,e)),e.on("RemoveEditor",q(gO,e))},hO=(e,t)=>e.dom.getParent(t,n=>e.dom.getContentEditable(n)==="true"),bO=(e,t)=>e.dom.getParent(t,n=>e.dom.getContentEditable(n)==="false")!==null,CO=e=>e.collapsed?m.from(_s(e.startContainer,e.startOffset)).map(C.fromDom):m.none(),yO=(e,t)=>CO(t).bind(n=>DR(n)?m.some(n):Sn(e,n)?m.none():m.some(e)),BC=(e,t)=>{yO(C.fromDom(e.getBody()),t).bind(n=>vt(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},rc=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},vO=e=>AC(e)||F1(e).isSome(),EO=e=>M(e.iframeElement)&&AC(C.fromDom(e.iframeElement)),SO=e=>{const t=e.getBody();return t&&vO(C.fromDom(t))},wO=e=>{const t=vs(C.fromDom(e.getElement()));return mf(t).filter(n=>!bf(n.dom)&&oc(e,n.dom)).isSome()},nr=e=>e.inline?SO(e):EO(e),yf=e=>nr(e)||wO(e),kO=e=>{const t=e.selection,n=e.getBody();let s=t.getRng();e.quirks.refreshContentEditable();const o=a=>{pf(a).each(i=>{a.selection.setRng(i),s=i})};!nr(e)&&e.hasEditableRoot()&&o(e);const r=hO(e,t.getNode());if(r&&e.dom.isChildOf(r,n)){bO(e,r)||rc(n),rc(r),e.hasEditableRoot()||o(e),BC(e,s),vf(e);return}e.inline||(Ce.browser.isOpera()||rc(n),e.getWin().focus()),(Ce.browser.isFirefox()||e.inline)&&(rc(n),BC(e,s)),vf(e)},vf=e=>e.editorManager.setActive(e),xO=(e,t)=>{e.removed||(t?vf(e):kO(e))},j={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||j.metaKeyPressed(e),metaKeyPressed:e=>Ce.os.isMacOS()||Ce.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},lo="data-mce-selected",_O="table,img,figure.image,hr,video,span.mce-preview-object,details",IC=Math.abs,ac=Math.round,Ef={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},NO=e=>e.type==="longpress"||e.type.indexOf("touch")===0,LC=(e,t)=>{const n=t.dom,s=t.getDoc(),o=document,r=t.getBody();let a,i,c,l,u,f,d,g,h,p,b,y,v,E,S,R,D;const z=F=>M(F)&&(Bp(F)||n.is(F,"figure.image")),A=F=>Hn(F)||n.hasClass(F,"mce-preview-object"),x=(F,ce)=>{if(NO(F)){const ue=F.touches[0];return z(F.target)&&!xC(ue.clientX,ue.clientY,ce)}else return z(F.target)&&!xC(F.clientX,F.clientY,ce)},P=F=>{const ce=F.target;x(F,t.selection.getRng())&&!F.isDefaultPrevented()&&t.selection.select(ce)},W=F=>n.hasClass(F,"mce-preview-object")&&M(F.firstElementChild)?[F,F.firstElementChild]:n.is(F,"figure.image")?[F.querySelector("img")]:[F],X=F=>{const ce=Sb(t);return!ce||t.mode.isReadOnly()||F.getAttribute("data-mce-resize")==="false"||F===t.getBody()?!1:n.hasClass(F,"mce-preview-object")&&M(F.firstElementChild)?En(C.fromDom(F.firstElementChild),ce):En(C.fromDom(F),ce)},ae=(F,ce)=>{if(A(ce))return F.create("img",{src:Ce.transparentSrc});if(zn(ce)){const Ue=Xe(l.name,"n")?Rt:bs,Se=ce.cloneNode(!0);return Ue(F.select("tr",Se)).each(lt=>{const Bt=F.select("td,th",lt);F.setStyle(lt,"height",null),T(Bt,Pn=>F.setStyle(Pn,"height",null))}),Se}else return ce.cloneNode(!0)},ie=(F,ce,ue)=>{if(M(ue)){const Ue=W(F);T(Ue,Se=>{Se.style[ce]||!t.schema.isValid(Se.nodeName.toLowerCase(),ce)?n.setStyle(Se,ce,ue):n.setAttrib(Se,ce,""+ue)})}},be=(F,ce,ue)=>{ie(F,"width",ce),ie(F,"height",ue)},ye=F=>{let ce,ue,Ue,Se,lt;ce=F.screenX-f,ue=F.screenY-d,E=ce*l[2]+p,S=ue*l[3]+b,E=E<5?5:E,S=S<5?5:S,(z(a)||A(a))&&kP(t)!==!1?Ue=!j.modifierPressed(F):Ue=j.modifierPressed(F),Ue&&(IC(ce)>IC(ue)?(S=ac(E*y),E=ac(S/y)):(E=ac(S/y),S=ac(E*y))),be(i,E,S),Se=l.startPos.x+ce,lt=l.startPos.y+ue,Se=Se>0?Se:0,lt=lt>0?lt:0,n.setStyles(c,{left:Se,top:lt,display:"block"}),c.innerHTML=E+" &times; "+S,l[2]<0&&i.clientWidth<=E&&n.setStyle(i,"left",g+(p-E)),l[3]<0&&i.clientHeight<=S&&n.setStyle(i,"top",h+(b-S)),ce=r.scrollWidth-R,ue=r.scrollHeight-D,ce+ue!==0&&n.setStyles(c,{left:Se-ce,top:lt-ue}),v||(LT(t,a,p,b,"corner-"+l.name),v=!0)},Oe=()=>{const F=v;v=!1,F&&(ie(a,"width",E),ie(a,"height",S)),n.unbind(s,"mousemove",ye),n.unbind(s,"mouseup",Oe),o!==s&&(n.unbind(o,"mousemove",ye),n.unbind(o,"mouseup",Oe)),n.remove(i),n.remove(c),n.remove(u),st(a),F&&($T(t,a,E,S,"corner-"+l.name),n.setAttrib(a,"style",n.getAttrib(a,"style"))),t.nodeChanged()},st=F=>{U();const ce=n.getPos(F,r),ue=ce.x,Ue=ce.y,Se=F.getBoundingClientRect(),lt=Se.width||Se.right-Se.left,Bt=Se.height||Se.bottom-Se.top;a!==F&&(L(),a=F,E=S=0);const Pn=t.dispatch("ObjectSelected",{target:F});X(F)&&!Pn.isDefaultPrevented()?_e(Ef,(ft,Yt)=>{const hn=Ht=>{const G=W(a)[0];f=Ht.screenX,d=Ht.screenY,p=G.clientWidth,b=G.clientHeight,y=b/p,l=ft,l.name=Yt,l.startPos={x:lt*ft[0]+ue,y:Bt*ft[1]+Ue},R=r.scrollWidth,D=r.scrollHeight,u=n.add(r,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(u,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=ae(n,a),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:ue,top:Ue,margin:0}),be(i,lt,Bt),i.removeAttribute(lo),r.appendChild(i),n.bind(s,"mousemove",ye),n.bind(s,"mouseup",Oe),o!==s&&(n.bind(o,"mousemove",ye),n.bind(o,"mouseup",Oe)),c=n.add(r,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},p+" &times; "+b)};let dt=n.get("mceResizeHandle"+Yt);dt&&n.remove(dt),dt=n.add(r,"div",{id:"mceResizeHandle"+Yt,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Yt+"-resize; margin:0; padding:0"}),n.bind(dt,"mousedown",Ht=>{Ht.stopImmediatePropagation(),Ht.preventDefault(),hn(Ht)}),ft.elm=dt,n.setStyles(dt,{left:lt*ft[0]+ue-dt.offsetWidth/2,top:Bt*ft[1]+Ue-dt.offsetHeight/2})}):L(!1)},Ke=Oi(st,0),L=(F=!0)=>{Ke.cancel(),U(),a&&F&&a.removeAttribute(lo),_e(Ef,(ce,ue)=>{const Ue=n.get("mceResizeHandle"+ue);Ue&&(n.unbind(Ue),n.remove(Ue))})},K=(F,ce)=>n.isChildOf(F,ce),me=F=>{if(v||t.removed||t.composing)return;const ce=F.type==="mousedown"?F.target:e.getNode(),ue=Bo(C.fromDom(ce),_O).map(Se=>Se.dom).filter(Se=>n.isEditable(Se.parentElement)||Se.nodeName==="IMG"&&n.isEditable(Se)).getOrUndefined(),Ue=M(ue)?n.getAttrib(ue,lo,"1"):"1";if(T(n.select(`img[${lo}],hr[${lo}]`),Se=>{Se.removeAttribute(lo)}),M(ue)&&K(ue,r)&&yf(t)){J();const Se=e.getStart(!0);if(K(Se,ue)&&K(e.getEnd(!0),ue)){n.setAttrib(ue,lo,Ue),Ke.throttle(ue);return}}L()},U=()=>{_e(Ef,F=>{F.elm&&(n.unbind(F.elm),delete F.elm)})},J=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{J(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",me),t.on("keyup compositionend",F=>{a&&a.nodeName==="TABLE"&&me(F)}),t.on("hide blur",L),t.on("contextmenu longpress",P,!0)}),t.on("remove",U),{isResizable:X,showResizeRect:st,hideResizeRect:L,updateResizeRect:me,destroy:()=>{Ke.cancel(),a=i=u=null}}},AO=(e,t)=>{t.fold(n=>{e.setStartBefore(n.dom)},(n,s)=>{e.setStart(n.dom,s)},n=>{e.setStartAfter(n.dom)})},RO=(e,t)=>{t.fold(n=>{e.setEndBefore(n.dom)},(n,s)=>{e.setEnd(n.dom,s)},n=>{e.setEndAfter(n.dom)})},$C=(e,t,n)=>{const s=e.document.createRange();return AO(s,t),RO(s,n),s},Sf=(e,t,n,s,o)=>{const r=e.document.createRange();return r.setStart(t.dom,n),r.setEnd(s.dom,o),r},Ea=Wn.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),FC=(e,t,n)=>t(C.fromDom(n.startContainer),n.startOffset,C.fromDom(n.endContainer),n.endOffset),TO=(e,t)=>t.match({domRange:n=>({ltr:H(n),rtl:m.none}),relative:(n,s)=>({ltr:In(()=>$C(e,n,s)),rtl:In(()=>m.some($C(e,s,n)))}),exact:(n,s,o,r)=>({ltr:In(()=>Sf(e,n,s,o,r)),rtl:In(()=>m.some(Sf(e,o,r,n,s)))})}),PO=(e,t)=>{const n=t.ltr();return n.collapsed?t.rtl().filter(o=>o.collapsed===!1).map(o=>Ea.rtl(C.fromDom(o.endContainer),o.endOffset,C.fromDom(o.startContainer),o.startOffset)).getOrThunk(()=>FC(e,Ea.ltr,n)):FC(e,Ea.ltr,n)},DO=(e,t)=>{const n=TO(e,t);return PO(e,n)};Ea.ltr,Ea.rtl;const OO=(e,t,n)=>{var s;return m.from((s=e.caretPositionFromPoint)===null||s===void 0?void 0:s.call(e,t,n)).bind(o=>{if(o.offsetNode===null)return m.none();const r=e.createRange();return r.setStart(o.offsetNode,o.offset),r.collapse(),m.some(r)})},BO=(e,t,n)=>{var s;return m.from((s=e.caretRangeFromPoint)===null||s===void 0?void 0:s.call(e,t,n))},IO=(e,t,n)=>e.caretPositionFromPoint?OO(e,t,n):e.caretRangeFromPoint?BO(e,t,n):m.none(),LO=(e,t,n)=>{const s=e.document;return IO(s,t,n).map(o=>RC.create(C.fromDom(o.startContainer),o.startOffset,C.fromDom(o.endContainer),o.endOffset))},ic=(e,t)=>{const n=he(e);return n==="input"?us.after(e):Ee(["br","img"],n)?t===0?us.before(e):us.after(e):us.on(e,t)},$O=(e,t)=>{const n=e.fold(us.before,ic,us.after),s=t.fold(us.before,ic,us.after);return er.relative(n,s)},MC=(e,t,n,s)=>{const o=ic(e,t),r=ic(n,s);return er.relative(o,r)},FO=e=>e.match({domRange:t=>{const n=C.fromDom(t.startContainer),s=C.fromDom(t.endContainer);return MC(n,t.startOffset,s,t.endOffset)},relative:$O,exact:MC}),wf=(e,t)=>{const s=document.createDocumentFragment();return T(e,o=>{s.appendChild(o.dom)}),C.fromDom(s)},MO=e=>{const t=er.getWin(e).dom,n=(o,r,a,i)=>Sf(t,o,r,a,i),s=FO(e);return DO(t,s).match({ltr:n,rtl:n})},UO=(e,t,n)=>LO(e,t,n),UC=(e,t,n)=>{const s=Ur(C.fromDom(n));return UO(s.dom,e,t).map(o=>{const r=n.createRange();return r.setStart(o.start.dom,o.soffset),r.setEnd(o.finish.dom,o.foffset),r}).getOrUndefined()},kf=(e,t)=>M(e)&&M(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,zO=(e,t,n)=>{let s=e;for(;s&&s!==t;){if(n(s))return s;s=s.parentNode}return null},zC=(e,t,n)=>zO(e,t,n)!==null,HO=(e,t,n)=>zC(e,t,s=>s.nodeName===n),WO=(e,t)=>Qt(e)&&!zC(e,t,en),HC=(e,t,n)=>{const s=t.parentNode;if(s){const o=new et(t,e.getParent(s,e.isBlock)||e.getRoot());let r;for(;r=o[n?"prev":"next"]();)if($e(r))return!0}return!1},VO=(e,t)=>{var n;return((n=e.previousSibling)===null||n===void 0?void 0:n.nodeName)===t},jO=(e,t)=>{let n=t;for(;n&&n!==e;){if(Ne(n))return!0;n=n.parentNode}return!1},xf=(e,t,n,s,o)=>{const r=e.getRoot(),a=e.schema.getNonEmptyElements(),i=o.parentNode;let c,l;if(!i)return m.none();const u=e.getParent(i,e.isBlock)||r;if(s&&$e(o)&&t&&e.isEmpty(u))return m.some(N(i,e.nodeIndex(o)));const f=new et(o,u);for(;l=f[s?"prev":"next"]();){if(e.getContentEditableParent(l)==="false"||WO(l,r))return m.none();if(O(l)&&l.data.length>0)return HO(l,r,"A")?m.none():m.some(N(l,s?l.data.length:0));if(e.isBlock(l)||a[l.nodeName.toLowerCase()])return m.none();c=l}return Ss(c)?m.none():n&&c?m.some(N(c,0)):m.none()},WC=(e,t,n,s)=>{const o=e.getRoot();let r,a=!1,i=n?s.startContainer:s.endContainer,c=n?s.startOffset:s.endOffset;const l=Y(i)&&c===i.childNodes.length,u=e.schema.getNonEmptyElements();let f=n;if(Qt(i))return m.none();if(Y(i)&&c>i.childNodes.length-1&&(f=!1),qr(i)&&(i=o,c=0),i===o){if(f&&(r=i.childNodes[c>0?c-1:0],r&&(Qt(r)||u[r.nodeName]||zn(r))))return m.none();if(i.hasChildNodes()){if(c=Math.min(!f&&c>0?c-1:c,i.childNodes.length-1),i=i.childNodes[c],c=O(i)&&l?i.data.length:0,!t&&i===o.lastChild&&zn(i)||jO(o,i)||Qt(i)||eu(i))return m.none();if(i.hasChildNodes()&&!zn(i)){r=i;const d=new et(i,o);do{if(Ne(r)||Qt(r)){a=!1;break}if(O(r)&&r.data.length>0){c=f?0:r.data.length,i=r,a=!0;break}if(u[r.nodeName.toLowerCase()]&&!Q0(r)){c=e.nodeIndex(r),i=r.parentNode,f||c++,a=!0;break}}while(r=f?d.next():d.prev())}}}return t&&(O(i)&&c===0&&xf(e,l,t,!0,i).each(d=>{i=d.container(),c=d.offset(),a=!0}),Y(i)&&(r=i.childNodes[c],r||(r=i.childNodes[c-1]),r&&$e(r)&&!VO(r,"A")&&!HC(e,r,!1)&&!HC(e,r,!0)&&xf(e,l,t,!0,r).each(d=>{i=d.container(),c=d.offset(),a=!0}))),f&&!t&&O(i)&&c===i.data.length&&xf(e,l,t,!1,i).each(d=>{i=d.container(),c=d.offset(),a=!0}),a&&i?m.some(N(i,c)):m.none()},cc=(e,t)=>{const n=t.collapsed,s=t.cloneRange(),o=N.fromRangeStart(t);return WC(e,n,!0,s).each(r=>{(!n||!N.isAbove(o,r))&&s.setStart(r.container(),r.offset())}),n||WC(e,n,!1,s).each(r=>{s.setEnd(r.container(),r.offset())}),n&&s.collapse(!0),kf(t,s)?m.none():m.some(s)},lc=(e,t)=>e.splitText(t),uc=e=>{let t=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset;if(t===s&&O(t)){if(n>0&&n<t.data.length)if(s=lc(t,n),t=s.previousSibling,o>n){o=o-n;const r=lc(s,o).previousSibling;t=s=r,o=r.data.length,n=0}else o=0}else if(O(t)&&n>0&&n<t.data.length&&(t=lc(t,n),n=0),O(s)&&o>0&&o<s.data.length){const r=lc(s,o).previousSibling;s=r,o=r.data.length}return{startContainer:t,startOffset:n,endContainer:s,endOffset:o}},uo=e=>({walk:(r,a)=>ya(e,r,a),split:uc,expand:(r,a={type:"word"})=>{if(a.type==="word"){const i=co(e,r,[{inline:"span"}]),c=e.createRng();return c.setStart(i.startContainer,i.startOffset),c.setEnd(i.endContainer,i.endOffset),c}return r},normalize:r=>cc(e,r).fold(De,a=>(r.setStart(a.startContainer,a.startOffset),r.setEnd(a.endContainer,a.endOffset),!0))});uo.compareRanges=kf,uo.getCaretRangeFromPoint=UC,uo.getSelectedNode=Fi,uo.getNode=_s;const qO=((e,t)=>{const n=(i,c)=>{if(!fn(c)&&!c.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+c);const l=i.dom;Wr(l)&&(l.style[e]=c+"px")},s=i=>{const c=t(i);if(c<=0||c===null){const l=Un(i,e);return parseFloat(l)||0}return c},o=s,r=(i,c)=>Lt(c,(l,u)=>{const f=Un(i,u),d=f===void 0?0:parseInt(f,10);return isNaN(d)?l:l+d},0);return{set:n,get:s,getOuter:o,aggregate:r,max:(i,c,l)=>{const u=r(i,l);return c>u?c-u:0}}})("height",e=>{const t=e.dom;return Oo(e)?t.getBoundingClientRect().height:t.offsetHeight}),KO=e=>qO.get(e),VC=(e,t)=>e.view(t).fold(H([]),s=>{const o=e.owner(s),r=VC(e,o);return[s].concat(r)}),GO=(e,t)=>{const n=t.owner(e);return VC(t,n)};var YO=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?m.none():m.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(C.fromDom)},owner:e=>Cs(e)});const XO=e=>{const t=_C(),n=Xl(t),s=GO(e,YO),o=Yl(e),r=_r(s,(a,i)=>{const c=Yl(i);return{left:a.left+c.left,top:a.top+c.top}},{left:0,top:0});return Lo(r.left+o.left+n.left,r.top+o.top+n.top)},_f=e=>he(e)==="textarea",ZO=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),QO=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},JO=(e,t)=>{const n=ht(e);if(n.length===0||_f(e))return{element:e,offset:t};if(t<n.length&&!_f(n[t]))return{element:n[t],offset:0};{const s=n[n.length-1];return _f(s)?{element:e,offset:t}:he(s)==="img"?{element:s,offset:1}:Tt(s)?{element:s,offset:sa(s).length}:{element:s,offset:ht(s).length}}},jC=(e,t)=>{const n=F0(e),s=KO(e);return{element:e,bottom:n.top+s,height:s,pos:n,cleanup:t}},eB=(e,t)=>{const n=JO(e,t),s=C.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Qe+"</span>");return Ft(n.element,s),jC(s,()=>Re(s))},tB=e=>jC(C.fromDom(e),le),qC=(e,t,n,s)=>{sB(e,(o,r)=>nB(e,t,n,s),n)},KC=(e,t,n,s,o)=>{const r={elm:s.element.dom,alignToTop:o};if(ZO(e,r))return;const a=Xl(t).top;n(e,t,a,s,o),QO(e,r)},nB=(e,t,n,s)=>{const o=C.fromDom(e.getBody()),r=C.fromDom(e.getDoc());N0(o);const a=eB(C.fromDom(n.startContainer),n.startOffset);KC(e,r,t,a,s),a.cleanup()},GC=(e,t,n,s)=>{const o=C.fromDom(e.getDoc());KC(e,o,n,tB(t),s)},sB=(e,t,n)=>{const s=n.startContainer,o=n.startOffset,r=n.endContainer,a=n.endOffset;t(C.fromDom(s),C.fromDom(r));const i=e.dom.createRng();i.setStart(s,o),i.setEnd(r,a),e.selection.setRng(n)},Nf=(e,t,n,s,o)=>{const r=t.pos;if(s)kp(r.left,r.top,o);else{const a=r.top-n+t.height;kp(-e.getBody().getBoundingClientRect().left,a,o)}},YC=(e,t,n,s,o,r)=>{const a=s+n,i=o.pos.top,c=o.bottom,l=c-i>=s;i<n?Nf(e,o,s,r!==!1,t):i>a?Nf(e,o,s,l?r!==!1:r===!0,t):c>a&&!l&&Nf(e,o,s,r===!0,t)},XC=(e,t,n,s,o)=>{const r=Ur(t).dom.innerHeight;YC(e,t,n,r,s,o)},ZC=(e,t,n,s,o)=>{const r=Ur(t).dom.innerHeight;YC(e,t,n,r,s,o);const a=XO(s.element),i=Np(window);a.top<i.y?xp(s.element,o!==!1):a.top>i.bottom&&xp(s.element,o===!0)},oB=(e,t,n)=>qC(e,XC,t,n),rB=(e,t,n)=>GC(e,t,XC,n),aB=(e,t,n)=>qC(e,ZC,t,n),iB=(e,t,n)=>GC(e,t,ZC,n),cB=(e,t,n)=>{(e.inline?rB:iB)(e,t,n)},Sa=(e,t,n)=>{(e.inline?oB:aB)(e,t,n)},QC=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),JC=(e,t,n,s,o)=>{const r=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return m.from(r).map(C.fromDom).map(i=>!s||!t.collapsed?Do(i,o(i,a)).getOr(i):i).bind(i=>Vt(i)?m.some(i):wn(i).filter(Vt)).map(i=>i.dom).getOr(e)},ey=(e,t,n=!1)=>JC(e,t,!0,n,(s,o)=>Math.min(Hl(s),o)),ty=(e,t,n=!1)=>JC(e,t,!1,n,(s,o)=>o>0?o-1:o),ny=(e,t)=>{const n=e;for(;e&&O(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},lB=(e,t)=>{if(!t)return e;let n=t.startContainer,s=t.endContainer;const o=t.startOffset,r=t.endOffset;let a=t.commonAncestorContainer;t.collapsed||(n===s&&r-o<2&&n.hasChildNodes()&&(a=n.childNodes[o]),O(n)&&O(s)&&(n.length===o?n=ny(n.nextSibling,!0):n=n.parentNode,r===0?s=ny(s.previousSibling,!1):s=s.parentNode,n&&n===s&&(a=n)));const i=O(a)?a.parentNode:a;return as(i)?i:e},uB=(e,t,n,s)=>{const o=[],r=e.getRoot(),a=e.getParent(n||ey(r,t,t.collapsed),e.isBlock),i=e.getParent(s||ty(r,t,t.collapsed),e.isBlock);if(a&&a!==r&&o.push(a),a&&i&&a!==i){let c;const l=new et(a,r);for(;(c=l.next())&&c!==i;)e.isBlock(c)&&o.push(c)}return i&&a!==i&&i!==r&&o.push(i),o},fB=(e,t,n)=>m.from(t).bind(s=>m.from(s.parentNode).map(o=>{const r=e.nodeIndex(s),a=e.createRng();return a.setStart(o,r),a.setEnd(o,r+1),n&&(nf(e,a,s,!0),nf(e,a,s,!1)),a})),Af=(e,t)=>pe(t,n=>{const s=e.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),dB={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},fc=(e,t,n)=>{const s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){let r=e[o];if(r)return r;for(let a=e.parent;a&&a!==t;a=a.parent)if(r=a[o],r)return r}},mB=e=>{var t;const n=(t=e.value)!==null&&t!==void 0?t:"";if(!$o(n))return!1;const s=e.parent;return!(s&&(s.name!=="span"||s.attr("style"))&&/^[ ]+$/.test(n))},sy=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class xt{static create(t,n){const s=new xt(t,dB[t]||1);return n&&_e(n,(o,r)=>{s.attr(r,o)}),s}constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const s=this;if(!Q(t))return M(t)&&_e(t,(r,a)=>{s.attr(a,r)}),s;const o=s.attributes;if(o){if(n!==void 0){if(n===null){if(t in o.map){delete o.map[t];let r=o.length;for(;r--;)if(o[r].name===t)return o.splice(r,1),s}return s}if(t in o.map){let r=o.length;for(;r--;)if(o[r].name===t){o[r].value=n;break}}else o.push({name:t,value:n});return o.map[t]=n,s}return o.map[t]}}clone(){const t=this,n=new xt(t.name,t.type),s=t.attributes;if(s){const o=[];o.map={};for(let r=0,a=s.length;r<a;r++){const i=s[r];i.name!=="id"&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value)}n.attributes=o}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const s=n.next;t.insert(n,t,!0),n=s}t.remove()}remove(){const t=this,n=t.parent,s=t.next,o=t.prev;return n&&(n.firstChild===t?(n.firstChild=s,s&&(s.prev=null)):o&&(o.next=s),n.lastChild===t?(n.lastChild=o,o&&(o.next=null)):s&&(s.prev=o),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const s=n.lastChild;return s?(s.next=t,t.prev=s,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,s){t.parent&&t.remove();const o=n.parent||this;return s?(n===o.firstChild?o.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===o.lastChild?o.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=o,t}getAll(t){const n=this,s=[];for(let o=n.firstChild;o;o=fc(o,n))o.name===t&&s.push(o);return s}children(){const t=this,n=[];for(let s=t.firstChild;s;s=s.next)n.push(s);return n}empty(){const t=this;if(t.firstChild){const n=[];for(let o=t.firstChild;o;o=fc(o,t))n.push(o);let s=n.length;for(;s--;){const o=n[s];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},s){var o;const r=this;let a=r.firstChild;if(sy(r))return!1;if(a)do{if(a.type===1){if(a.attr("data-mce-bogus"))continue;if(t[a.name]||sy(a))return!1}if(a.type===8||a.type===3&&!mB(a)||a.type===3&&a.parent&&n[a.parent.name]&&$o((o=a.value)!==null&&o!==void 0?o:"")||s&&s(a))return!1}while(a=fc(a,r));return!0}walk(t){return fc(this,null,t)}}const gB=I.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),oy=e=>Q(e.nodeValue)&&e.nodeValue.includes(Qe),ry=e=>`${e.length===0?"":`${pe(e,t=>`[${t}]`).join(",")},`}[data-mce-bogus="all"]`,pB=(e,t)=>t.querySelectorAll(ry(e)),ay=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>oy(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),iy=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(oy(t)){const n=t.parentNode;return n&&oe(gB,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),hB=e=>ay(e).nextNode()!==null,bB=e=>iy(e).nextNode()!==null,CB=(e,t)=>t.querySelector(ry(e))!==null,yB=(e,t)=>{T(pB(e,t),n=>{const s=C.fromDom(n);jt(s,"data-mce-bogus")==="all"?Re(s):T(e,o=>{Lr(s,o)&&it(s,o)})})},cy=e=>{let t=e.nextNode();for(;t!==null;)t.nodeValue=null,t=e.nextNode()},vB=vn(cy,ay),EB=vn(cy,iy),ly=(e,t)=>{const n=[{condition:q(CB,t),action:q(yB,t)},{condition:hB,action:vB},{condition:bB,action:EB}];let s=e,o=!1;return T(n,({condition:r,action:a})=>{r(s)&&(o||(s=e.cloneNode(!0),o=!0),a(s))}),s},uy=e=>{const t=bt(e,"[data-mce-bogus]");T(t,n=>{jt(n,"data-mce-bogus")==="all"?Re(n):to(n)?(Ft(n,C.fromText(Vr)),Re(n)):Es(n)})},fy=e=>{const t=bt(e,"input");T(t,n=>{it(n,"name")})},SB=(e,t)=>{const n=yt(e),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(s,"")},wB=(e,t)=>{const n=e.getDoc(),s=vs(C.fromDom(e.getBody())),o=C.fromTag("div",n);at(o,"data-mce-bogus","all"),vi(o,{position:"fixed",left:"-9999999px",top:"0"}),Si(o,t.innerHTML),uy(o),fy(o);const r=C0(s);je(r,o);const a=qt(o.dom.innerText);return Re(o),a},kB=(e,t,n)=>{let s;return t.format==="raw"?s=I.trim(qt(ly(n,e.serializer.getTempAttrs()).innerHTML)):t.format==="text"?s=wB(e,n):t.format==="tree"?s=e.serializer.serialize(n,t):s=SB(e,e.serializer.serialize(n,t)),t.format!=="text"&&!Bi(C.fromDom(n))&&Q(s)?I.trim(s):s},xB=(e,t)=>m.from(e.getBody()).fold(H(t.format==="tree"?new xt("body",11):""),n=>kB(e,t,n)),dy=I.makeMap,my=e=>{const t=[];e=e||{};const n=e.indent,s=dy(e.indent_before||""),o=dy(e.indent_after||""),r=Xs.getEncodeFunc(e.entity_encoding||"raw",e.entities),a=e.element_format!=="xhtml";return{start:(i,c,l)=>{if(n&&s[i]&&t.length>0){const u=t[t.length-1];u.length>0&&u!==`
`&&t.push(`
`)}if(t.push("<",i),c)for(let u=0,f=c.length;u<f;u++){const d=c[u];t.push(" ",d.name,'="',r(d.value,!0),'"')}if(!l||a?t[t.length]=">":t[t.length]=" />",l&&n&&o[i]&&t.length>0){const u=t[t.length-1];u.length>0&&u!==`
`&&t.push(`
`)}},end:i=>{let c;t.push("</",i,">"),n&&o[i]&&t.length>0&&(c=t[t.length-1],c.length>0&&c!==`
`&&t.push(`
`))},text:(i,c)=>{i.length>0&&(t[t.length]=c?i:r(i))},cdata:i=>{t.push("<![CDATA[",i,"]]>")},comment:i=>{t.push("<!--",i,"-->")},pi:(i,c)=>{c?t.push("<?",i," ",r(c),"?>"):t.push("<?",i,"?>"),n&&t.push(`
`)},doctype:i=>{t.push("<!DOCTYPE",i,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Ts=(e={},t=ws())=>{const n=my(e);return e.validate="validate"in e?e.validate:!0,{serialize:o=>{const r=e.validate,a={3:c=>{var l;n.text((l=c.value)!==null&&l!==void 0?l:"",c.raw)},8:c=>{var l;n.comment((l=c.value)!==null&&l!==void 0?l:"")},7:c=>{n.pi(c.name,c.value)},10:c=>{var l;n.doctype((l=c.value)!==null&&l!==void 0?l:"")},4:c=>{var l;n.cdata((l=c.value)!==null&&l!==void 0?l:"")},11:c=>{let l=c;if(l=l.firstChild)do i(l);while(l=l.next)}};n.reset();const i=c=>{var l;const u=a[c.type];if(u)u(c);else{const f=c.name,d=f in t.getVoidElements();let g=c.attributes;if(r&&g&&g.length>1){const h=[];h.map={};const p=t.getElementRule(c.name);if(p){for(let b=0,y=p.attributesOrder.length;b<y;b++){const v=p.attributesOrder[b];if(v in g.map){const E=g.map[v];h.map[v]=E,h.push({name:v,value:E})}}for(let b=0,y=g.length;b<y;b++){const v=g[b].name;if(!(v in h.map)){const E=g.map[v];h.map[v]=E,h.push({name:v,value:E})}}g=h}}if(n.start(f,g,d),Ks(f))Q(c.value)&&n.text(c.value,!0),n.end(f);else if(!d){let h=c.firstChild;if(h){(f==="pre"||f==="textarea")&&h.type===3&&((l=h.value)===null||l===void 0?void 0:l[0])===`
`&&n.text(`
`,!0);do i(h);while(h=h.next)}n.end(f)}}};return o.type===1&&!e.inner?i(o):o.type===3?a[3](o):a[11](o),n.getContent()}}},gy=new Set;T(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{gy.add(t)});const py=new Set;T(["background-color"],t=>{py.add(t)});const hy=["font","text-decoration","text-emphasis"],_B=(e,t)=>e.parseStyle(e.getAttrib(t,"style")),sr=(e,t)=>$t(_B(e,t)),NB=e=>gy.has(e),AB=e=>py.has(e),by=(e,t)=>Le(sr(e,t),n=>NB(n)),RB=(e,t)=>by(e,t)&&Le(sr(e,t),n=>AB(n)),TB=e=>se(e,t=>Le(hy,n=>Xe(t,n))),PB=(e,t,n)=>{const s=sr(e,t),o=sr(e,n),r=a=>{var i,c;const l=(i=e.getStyle(t,a))!==null&&i!==void 0?i:"",u=(c=e.getStyle(n,a))!==null&&c!==void 0?c:"";return Ln(l)&&Ln(u)&&l!==u};return Le(s,a=>{const i=c=>Le(c,l=>l===a);if(!i(o)&&i(hy)){const c=TB(o);return Le(c,r)}else return r(a)})},Cy=(e,t,n)=>m.from(n.container()).filter(O).exists(s=>{const o=e?0:-1;return t(s.data.charAt(n.offset()+o))}),Rf=q(Cy,!0,io),Tf=q(Cy,!1,io),DB=e=>{const t=e.container();return O(t)&&(t.data.length===0||Ii(t.data)&&va.isBookmarkNode(t.parentNode))},Ps=(e,t)=>n=>ju(e?0:-1,n).filter(t).isSome(),yy=e=>Bp(e)&&Un(C.fromDom(e),"display")==="block",vy=e=>Ne(e)&&!Y0(e),OB=Ps(!0,yy),BB=Ps(!1,yy),wa=Ps(!0,Hn),ka=Ps(!1,Hn),Ey=Ps(!0,zn),Pf=Ps(!1,zn),Ds=Ps(!0,vy),Os=Ps(!1,vy),IB=e=>e.slice(0,-1),LB=(e,t,n)=>Sn(t,e)?IB(dp(e,s=>n(s)||ve(s,t))):[],Sy=(e,t)=>LB(e,t,De),fs=(e,t)=>[e].concat(Sy(e,t)),Df=(e,t,n)=>Qb(e,t,n,DB),$B=e=>t=>e.isBlock(he(t)),wy=(e,t,n)=>Ye(fs(C.fromDom(t.container()),e),$B(n)),ky=(e,t,n,s)=>Df(e,t.dom,n).forall(o=>wy(t,n,s).fold(()=>!Vn(o,n,t.dom),r=>!Vn(o,n,t.dom)&&Sn(r,C.fromDom(o.container())))),xy=(e,t,n,s)=>wy(t,n,s).fold(()=>Df(e,t.dom,n).forall(o=>!Vn(o,n,t.dom)),o=>Df(e,o.dom,n).isNone()),Of=q(xy,!1),_y=q(xy,!0),FB=q(ky,!1),MB=q(ky,!0),UB=e=>Ki(e).exists(to),dc=(e,t,n,s)=>{const o=se(fs(C.fromDom(n.container()),t),a=>s.isBlock(he(a))),r=Rt(o).getOr(t);return Jt(e,r.dom,n).filter(UB)},Bf=(e,t,n)=>Ki(t).exists(to)||dc(!0,e,t,n).isSome(),mc=(e,t,n)=>VD(t).exists(to)||dc(!1,e,t,n).isSome(),Ny=q(dc,!1),zB=q(dc,!0),Ay=e=>N.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Ry=(e,t,n)=>{const s=se(fs(C.fromDom(t.container()),e),o=>n.isBlock(he(o)));return Rt(s).getOr(e)},Ty=(e,t,n)=>Ay(t)?Tf(t):Tf(t)||Mt(Ry(e,t,n).dom,t).exists(Tf),Py=(e,t,n)=>Ay(t)?Rf(t):Rf(t)||Dt(Ry(e,t,n).dom,t).exists(Rf),HB=e=>Ee(["pre","pre-wrap"],e),If=e=>Ki(e).bind(t=>Hs(t,Vt)).exists(t=>HB(Un(t,"white-space"))),WB=(e,t)=>Mt(e.dom,t).isNone(),VB=(e,t)=>Dt(e.dom,t).isNone(),jB=(e,t,n)=>WB(e,t)||VB(e,t)||Of(e,t,n)||_y(e,t,n)||mc(e,t,n)||Bf(e,t,n),qB=e=>M(e)&&Ne(e)&&Mb(e),Dy=(e,t)=>n=>qB(new et(n,e)[t]()),KB=(e,t)=>{const n=Dt(e.dom,t).getOr(t),s=Dy(e.dom,"next");return t.isAtEnd()&&(s(t.container())||s(n.container()))},GB=(e,t)=>{const n=Mt(e.dom,t).getOr(t),s=Dy(e.dom,"prev");return t.isAtStart()&&(s(t.container())||s(n.container()))},Oy=(e,t,n)=>If(t)?!1:jB(e,t,n)||Ty(e,t,n)||Py(e,t,n),xa=(e,t,n)=>If(t)?!1:Of(e,t,n)||FB(e,t,n)||mc(e,t,n)||Ty(e,t,n)||GB(e,t),YB=e=>{const t=e.container(),n=e.offset();return O(t)&&n<t.data.length?N(t,n+1):e},_a=(e,t,n)=>If(t)?!1:_y(e,t,n)||MB(e,t,n)||Bf(e,t,n)||Py(e,t,n)||KB(e,t),Lf=(e,t,n)=>xa(e,t,n)||_a(e,YB(t),n),By=(e,t)=>Zi(e.charAt(t)),Iy=(e,t)=>io(e.charAt(t)),XB=e=>{const t=e.container();return O(t)&&gt(t.data,Ze)},ZB=e=>{const t=e.split("");return pe(t,(n,s)=>Zi(n)&&s>0&&s<t.length-1&&Qu(t[s-1])&&Qu(t[s+1])?" ":n).join("")},Ly=(e,t,n,s)=>{const o=t.data,r=N(t,0);return!n&&By(o,0)&&!Lf(e,r,s)?(t.data=" "+o.slice(1),!0):n&&Iy(o,0)&&xa(e,r,s)?(t.data=Ze+o.slice(1),!0):!1},QB=e=>{const t=e.data,n=ZB(t);return n!==t?(e.data=n,!0):!1},$y=(e,t,n,s)=>{const o=t.data,r=N(t,o.length-1);return!n&&By(o,o.length-1)&&!Lf(e,r,s)?(t.data=o.slice(0,-1)+" ",!0):n&&Iy(o,o.length-1)&&_a(e,r,s)?(t.data=o.slice(0,-1)+Ze,!0):!1},JB=(e,t,n)=>{const s=t.container();if(!O(s))return m.none();if(XB(t)){const o=Ly(e,s,!1,n)||QB(s)||$y(e,s,!1,n);return To(o,t)}else if(Lf(e,t,n)){const o=Ly(e,s,!0,n)||$y(e,s,!0,n);return To(o,t)}else return m.none()},eI=e=>{const t=C.fromDom(e.getBody());e.selection.isCollapsed()&&JB(t,N.fromRangeStart(e.selection.getRng()),e.schema).each(n=>{e.selection.setRng(n.toRange())})},Fy=(e,t,n,s)=>{if(n===0)return;const o=C.fromDom(e),r=os(o,l=>s.isBlock(he(l))).getOr(o),a=e.data.slice(t,t+n),i=t+n>=e.data.length&&_a(r,N(e,e.data.length),s),c=t===0&&xa(r,N(e,0),s);e.replaceData(t,n,Dp(a,4,c,i))},gc=(e,t,n)=>{const s=e.data.slice(t),o=s.length-PN(s).length;Fy(e,t,o,n)},$f=(e,t,n)=>{const s=e.data.slice(0,t),o=s.length-Rg(s).length;Fy(e,t-o,o,n)},Ff=(e,t,n,s,o=!0)=>{const r=Rg(e.data).length,a=o?e:t,i=o?t:e;return o?a.appendData(i.data):a.insertData(0,i.data),Re(C.fromDom(i)),s&&gc(a,r,n),a},tI=(e,t)=>{const n=e.container(),s=e.offset();return!N.isTextPosition(e)&&n===t.parentNode&&s>N.before(t).offset()},nI=(e,t)=>tI(t,e)?N(t.container(),t.offset()-1):t,sI=e=>O(e)?N(e,0):N.before(e),oI=e=>O(e)?N(e,e.data.length):N.after(e),My=e=>Nn(e.previousSibling)?m.some(oI(e.previousSibling)):e.previousSibling?mn(e.previousSibling):m.none(),Uy=e=>Nn(e.nextSibling)?m.some(sI(e.nextSibling)):e.nextSibling?vt(e.nextSibling):m.none(),rI=(e,t)=>m.from(t.previousSibling?t.previousSibling:t.parentNode).bind(n=>Mt(e,N.before(n))).orThunk(()=>Dt(e,N.after(t))),aI=(e,t)=>Dt(e,N.after(t)).orThunk(()=>Mt(e,N.before(t))),iI=(e,t)=>My(t).orThunk(()=>Uy(t)).orThunk(()=>rI(e,t)),cI=(e,t)=>Uy(t).orThunk(()=>My(t)).orThunk(()=>aI(e,t)),lI=(e,t,n)=>e?cI(t,n):iI(t,n),uI=(e,t,n)=>lI(e,t,n).map(q(nI,n)),zy=(e,t,n)=>{n.fold(()=>{e.focus()},s=>{e.selection.setRng(s.toRange(),t)})},fI=e=>t=>t.dom===e,dI=(e,t)=>t&&oe(e.schema.getBlockElements(),he(t)),mI=(e,t,n)=>{if(Ct(e,t)){const s=C.fromHtml('<br data-mce-bogus="1">');return n?T(ht(t),o=>{df(o)||Re(o)}):Io(t),je(t,s),m.some(N.before(s.dom))}else return m.none()},gI=(e,t,n,s)=>{const o=ys(e).filter(Tt),r=zr(e).filter(Tt);return Re(e),GN(o,r,t,(a,i,c)=>{const l=a.dom,u=i.dom,f=l.data.length;return Ff(l,u,n,s),c.container()===u?N(l,f):c}).orThunk(()=>(s&&(o.each(a=>$f(a.dom,a.dom.length,n)),r.each(a=>gc(a.dom,0,n))),t))},pI=(e,t)=>oe(e.schema.getTextInlineElements(),he(t)),fo=(e,t,n,s=!0,o=!1)=>{const r=uI(t,e.getBody(),n.dom),a=os(n,q(dI,e),fI(e.getBody())),i=gI(n,r,e.schema,pI(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):a.bind(c=>mI(e.schema,c,o)).fold(()=>{s&&zy(e,t,i)},c=>{s&&zy(e,t,m.some(c))})},hI=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,bI=e=>hI.test(e),mo=(e,t)=>En(C.fromDom(t),wP(e))&&!Gs(e.schema,t)&&e.dom.isEditable(t),Hy=e=>{var t;return xe.DOM.getStyle(e,"direction",!0)==="rtl"||bI((t=e.textContent)!==null&&t!==void 0?t:"")},CI=(e,t,n)=>se(xe.DOM.getParents(n.container(),"*",t),e),Bs=(e,t,n)=>{const s=CI(e,t,n);return m.from(s[s.length-1])},yI=(e,t,n)=>{const s=As(t,e),o=As(n,e);return M(s)&&s===o},vI=e=>xu(e)||_u(e),on=(e,t)=>{const n=t.container(),s=t.offset();return e?xs(n)?O(n.nextSibling)?N(n.nextSibling,0):N.after(n):xu(t)?N(n,s+1):t:xs(n)?O(n.previousSibling)?N(n.previousSibling,n.previousSibling.data.length):N.before(n):_u(t)?N(n,s-1):t},Wy=q(on,!0),Vy=q(on,!1),jy=(e,t)=>{const n=s=>s.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},EI=e=>{e.execCommand("delete")},pc=e=>jy(e,"Delete"),qy=e=>jy(e,"ForwardDelete"),SI=e=>t=>Ro(wn(t),e,ve),wI=e=>_h(e)||zo(e),hc=(e,t)=>Sn(e,t)?Hs(t,wI,SI(e)):m.none(),Mf=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},Ky=(e,t,n)=>pt(vt(n),mn(n),(s,o)=>{const r=on(!0,s),a=on(!1,o),i=on(!1,t);return e?Dt(n,i).exists(c=>c.isEqual(a)&&t.isEqual(r)):Mt(n,i).exists(c=>c.isEqual(r)&&t.isEqual(a))}).getOr(!0),Gy=e=>(n0(e)?ys(e):zl(e)).bind(Gy).orThunk(()=>m.some(e)),Yy=(e,t,n,s=!0)=>{var o;t.deleteContents();const r=Gy(n).getOr(n),a=C.fromDom((o=e.dom.getParent(r.dom,e.dom.isBlock))!==null&&o!==void 0?o:n.dom);if(a.dom===e.getBody()?Mf(e,s):Ct(e.schema,a,{checkRootAsContent:!1})&&(ks(a),s&&e.selection.setCursorLocation(a.dom,0)),!ve(n,a)){const i=Ro(wn(a),n)?[]:h0(a);T(i.concat(ht(n)),c=>{!ve(c,a)&&!Sn(c,a)&&Ct(e.schema,c)&&Re(c)})}},kI=e=>t=>ve(e,t),Uf=e=>bt(e,"td,th"),Xy=(e,t)=>ba(C.fromDom(e),t),xI=e=>pt(e.startTable,e.endTable,(t,n)=>{const s=Tp(t,r=>ve(r,n)),o=Tp(n,r=>ve(r,t));return!s&&!o?e:{...e,startTable:s?m.none():e.startTable,endTable:o?m.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),_I=e=>xI(e),NI=(e,t)=>{const n=Xy(e.startContainer,t),s=Xy(e.endContainer,t),o=n.isSome(),r=s.isSome(),a=pt(n,s,ve).getOr(!1);return _I({startTable:n,endTable:s,isStartInTable:o,isEndInTable:r,isSameTable:a,isMultiTable:!a&&o&&r})},zf=(e,t)=>({start:e,end:t}),AI=(e,t,n)=>({rng:e,table:t,cells:n}),Na=Wn.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),bc=(e,t)=>Bo(C.fromDom(e),"td,th",t),Zy=e=>!ve(e.start,e.end),Qy=(e,t)=>ba(e.start,t).bind(n=>ba(e.end,t).bind(s=>To(ve(n,s),n))),RI=(e,t)=>!Zy(e)&&Qy(e,t).exists(n=>{const s=n.dom.rows;return s.length===1&&s[0].cells.length===1}),TI=(e,t)=>{const n=bc(e.startContainer,t),s=bc(e.endContainer,t);return pt(n,s,zf)},PI=e=>t=>ba(t,e).bind(n=>bs(Uf(n)).map(s=>zf(t,s))),DI=e=>t=>ba(t,e).bind(n=>Rt(Uf(n)).map(s=>zf(s,t))),Hf=e=>t=>Qy(t,e).map(n=>AI(t,n,Uf(n))),Jy=(e,t,n,s)=>{if(n.collapsed||!e.forall(Zy))return m.none();if(t.isSameTable){const o=e.bind(Hf(s));return m.some({start:o,end:o})}else{const o=bc(n.startContainer,s),r=bc(n.endContainer,s),a=o.bind(PI(s)).bind(Hf(s)),i=r.bind(DI(s)).bind(Hf(s));return m.some({start:a,end:i})}},ev=(e,t)=>Nr(e,n=>ve(n,t)),Wf=e=>pt(ev(e.cells,e.rng.start),ev(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),OI=(e,t,n)=>e.exists(s=>RI(s,n)&&tf(s.start,t)),tv=(e,t)=>{const{startTable:n,endTable:s}=t,o=e.cloneRange();return n.each(r=>o.setStartAfter(r.dom)),s.each(r=>o.setEndBefore(r.dom)),o},BI=(e,t,n,s)=>Jy(e,t,n,s).bind(({start:o,end:r})=>o.or(r)).bind(o=>{const{isSameTable:r}=t,a=Wf(o).getOr([]);if(r&&o.cells.length===a.length)return m.some(Na.fullTable(o.table));if(a.length>0){if(r)return m.some(Na.partialTable(a,m.none()));{const i=tv(n,t);return m.some(Na.partialTable(a,m.some({...t,rng:i})))}}else return m.none()}),II=(e,t,n,s)=>Jy(e,t,n,s).bind(({start:o,end:r})=>{const a=o.bind(Wf).getOr([]),i=r.bind(Wf).getOr([]);if(a.length>0&&i.length>0){const c=tv(n,t);return m.some(Na.multiTable(a,i,c))}else return m.none()}),LI=(e,t)=>{const n=kI(e),s=TI(t,n),o=NI(t,n);return OI(s,t,n)?s.map(r=>Na.singleCellTable(t,r.start)):o.isMultiTable?II(s,o,t,n):BI(s,o,t,n)},nv=e=>T(e,t=>{it(t,"contenteditable"),ks(t)}),$I=(e,t)=>m.from(e.dom.getParent(t,e.dom.isBlock)).map(C.fromDom),FI=(e,t,n)=>{n.each(s=>{t?Re(s):(ks(s),e.selection.setCursorLocation(s.dom,0))})},Vf=(e,t,n,s)=>{const o=n.cloneRange();s?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),jf(e,o,t,!1).each(r=>r())},sv=e=>{const t=Zo(e),n=C.fromDom(e.selection.getNode());_i(n.dom)&&Ct(e.schema,n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&Le(t,s=>ve(s,n))&&at(n,"data-mce-selected","1")},ov=(e,t,n)=>m.some(()=>{const s=e.selection.getRng(),o=n.bind(({rng:r,isStartInTable:a})=>{const i=$I(e,a?r.endContainer:r.startContainer);r.deleteContents(),FI(e,a,i.filter(q(Ct,e.schema)));const c=a?t[0]:t[t.length-1];return Vf(e,c,s,a),Ct(e.schema,c)?m.none():m.some(a?t.slice(1):t.slice(0,-1))}).getOr(t);nv(o),sv(e)}),MI=(e,t,n,s)=>m.some(()=>{const o=e.selection.getRng(),r=t[0],a=n[n.length-1];Vf(e,r,o,!0),Vf(e,a,o,!1);const i=Ct(e.schema,r)?t:t.slice(1),c=Ct(e.schema,a)?n:n.slice(0,-1);nv(i.concat(c)),s.deleteContents(),sv(e)}),jf=(e,t,n,s=!0)=>m.some(()=>{Yy(e,t,n,s)}),UI=(e,t)=>m.some(()=>fo(e,!1,t)),zI=(e,t,n)=>LI(t,n).bind(s=>s.fold(q(jf,e),q(UI,e),q(ov,e),q(MI,e))),HI=(e,t)=>Cc(e,t),WI=(e,t,n,s)=>qf(t,s).fold(()=>zI(e,t,n),o=>HI(e,o)),VI=(e,t,n)=>{const s=C.fromDom(e.getBody()),o=e.selection.getRng();return n.length!==0?ov(e,n,m.none()):WI(e,s,o,t)},rv=(e,t)=>Ye(fs(t,e),oa),qf=(e,t)=>Ye(fs(t,e),hi("caption")),jI=(e,t,n,s,o)=>Yo(n,e.getBody(),o).bind(r=>rv(t,C.fromDom(r.getNode())).bind(a=>ve(a,s)?m.none():m.some(le))),Cc=(e,t)=>m.some(()=>{ks(t),e.selection.setCursorLocation(t.dom,0)}),qI=(e,t,n,s)=>vt(e.dom).bind(o=>mn(e.dom).map(r=>t?n.isEqual(o)&&s.isEqual(r):n.isEqual(r)&&s.isEqual(o))).getOr(!0),KI=(e,t)=>Cc(e,t),GI=(e,t,n)=>qf(e,C.fromDom(n.getNode())).fold(()=>m.some(le),s=>To(!ve(s,t),le)),YI=(e,t,n,s,o)=>Yo(n,e.getBody(),o).fold(()=>m.some(le),r=>qI(s,n,o,r)?KI(e,s):GI(t,s,r)),XI=(e,t,n,s)=>{const o=N.fromRangeStart(e.selection.getRng());return rv(n,s).bind(r=>Ct(e.schema,r,{checkRootAsContent:!1})?Cc(e,r):jI(e,n,t,r,o))},ZI=(e,t,n,s)=>{const o=N.fromRangeStart(e.selection.getRng());return Ct(e.schema,s)?Cc(e,s):YI(e,n,t,s,o)},av=(e,t)=>e?Ey(t):Pf(t),QI=(e,t)=>{const n=N.fromRangeStart(e.selection.getRng());return av(t,n)||Jt(t,e.getBody(),n).exists(s=>av(t,s))},JI=(e,t,n)=>{const s=C.fromDom(e.getBody());return qf(s,n).fold(()=>XI(e,t,s,n).orThunk(()=>To(QI(e,t),le)),o=>ZI(e,t,s,o))},Kf=(e,t)=>{const n=C.fromDom(e.selection.getStart(!0)),s=Zo(e);return e.selection.isCollapsed()&&s.length===0?JI(e,t,n):VI(e,n,s)},go=(e,t)=>{let n=t;for(;n&&n!==e;){if(dn(n)||Ne(n))return n;n=n.parentNode}return null},eL=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],tL=I.each,Gf=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),s=(r,a)=>{if(r.nodeName!==a.nodeName||r.nodeType!==a.nodeType)return!1;const i=l=>{const u={};return tL(t.getAttribs(l),f=>{const d=f.nodeName.toLowerCase();d!=="style"&&!o(d)&&(u[d]=t.getAttrib(l,d))}),u},c=(l,u)=>{for(const f in l)if(oe(l,f)){const d=u[f];if(rt(d)||l[f]!==d)return!1;delete u[f]}for(const f in u)if(oe(u,f))return!1;return!0};return Y(r)&&Y(a)&&(!c(i(r),i(a))||!c(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(a,"style"))))?!1:!tn(r)&&!tn(a)},o=r=>Le(eL,a=>Xe(r,a))||n.has(r);return{compare:s,isAttributeInternal:o}},iv=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),nL=e=>e.name==="summary",sL=(e,t)=>{let n=e;for(;n=n.walk();)t(n)},cv=(e,t,n,s)=>{const o=n.name;for(let r=0,a=e.length;r<a;r++){const i=e[r];if(i.name===o){const c=s.nodes[o];c?c.nodes.push(n):s.nodes[o]={filter:i,nodes:[n]}}}if(n.attributes)for(let r=0,a=t.length;r<a;r++){const i=t[r],c=i.name;if(c in n.attributes.map){const l=s.attributes[c];l?l.nodes.push(n):s.attributes[c]={filter:i,nodes:[n]}}}},oL=(e,t,n)=>{const s={nodes:{},attributes:{}};return n.firstChild&&sL(n,o=>{cv(e,t,o,s)}),s},lv=(e,t)=>{const n=(s,o)=>{_e(s,r=>{const a=Wt(r.nodes);T(r.filter.callbacks,i=>{for(let c=a.length-1;c>=0;c--){const l=a[c];(!(o?l.attr(r.filter.name)!==void 0:l.name===r.filter.name)||Ve(l.parent))&&a.splice(c,1)}a.length>0&&i(a,r.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},uv=(e,t,n,s={})=>{const o=oL(e,t,n);lv(o,s)},Yf=(e,t,n,s)=>{if((e.pad_empty_with_br||t.insert)&&n(s)){const r=new xt("br",1);t.insert&&r.attr("data-mce-bogus","1"),s.empty().append(r)}else s.empty().append(new xt("#text",3)).value=Ze},rL=e=>{var t;return fv(e,"#text")&&((t=e==null?void 0:e.firstChild)===null||t===void 0?void 0:t.value)===Ze},fv=(e,t)=>{const n=e==null?void 0:e.firstChild;return M(n)&&n===e.lastChild&&n.name===t},aL=(e,t)=>{const n=e.getElementRule(t.name);return(n==null?void 0:n.paddEmpty)===!0},Aa=(e,t,n,s)=>s.isEmpty(t,n,o=>aL(e,o)),iL=(e,t)=>M(e)&&(t(e)||e.name==="br"),cL=e=>{let t;for(let n=e;n;n=n.parent){const s=n.attr("contenteditable");if(s==="false")break;s==="true"&&(t=n)}return m.from(t)},Xf=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const s=e.children();for(const o of s)n&&!t.isValidChild(n.name,o.name)&&Xf(o,t,n);e.unwrap()}},Zf=(e,t,n,s=le)=>{const o=t.getTextBlockElements(),r=t.getNonEmptyElements(),a=t.getWhitespaceElements(),i=I.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),c=new Set,l=u=>u!==n&&!i[u.name];for(let u=0;u<e.length;u++){const f=e[u];let d,g,h;if(!f.parent||c.has(f))continue;if(o[f.name]&&f.parent.name==="li"){let b=f.next;for(;b&&o[b.name];){b.name="li",c.add(b),f.parent.insert(b,f.parent);b=b.next}f.unwrap();continue}const p=[f];for(d=f.parent;d&&!t.isValidChild(d.name,f.name)&&l(d);d=d.parent)p.push(d);if(d&&p.length>1)if(Qf(t,f,d))Xf(f,t);else{p.reverse(),g=p[0].clone(),s(g);let b=g;for(let y=0;y<p.length-1;y++){t.isValidChild(b.name,p[y].name)&&y>0?(h=p[y].clone(),s(h),b.append(h)):h=b;for(let v=p[y].firstChild;v&&v!==p[y+1];){const E=v.next;h.append(v),v=E}b=h}Aa(t,r,a,g)?d.insert(f,p[0],!0):(d.insert(g,p[0],!0),d.insert(f,g)),d=p[0],(Aa(t,r,a,d)||fv(d,"br"))&&d.empty().remove()}else if(f.parent){if(f.name==="li"){let b=f.prev;if(b&&(b.name==="ul"||b.name==="ol")){b.append(f);continue}if(b=f.next,b&&(b.name==="ul"||b.name==="ol")&&b.firstChild){b.insert(f,b.firstChild,!0);continue}const y=new xt("ul",1);s(y),f.wrap(y);continue}if(t.isValidChild(f.parent.name,"div")&&t.isValidChild("div",f.name)){const b=new xt("div",1);s(b),f.wrap(b)}else Xf(f,t)}}},lL=(e,t)=>{let n=e;for(;n;){if(n.name===t)return!0;n=n.parent}return!1},Qf=(e,t,n=t.parent)=>n?e.children[t.name]&&!e.isValidChild(n.name,t.name)||t.name==="a"&&lL(n,"a")?!0:nL(n)&&iv(t)?!((n==null?void 0:n.firstChild)===t&&(n==null?void 0:n.lastChild)===t):!1:!1,uL=(e,t,n,s)=>{const o=document.createRange();return o.setStart(e,t),o.setEnd(n,s),o},fL=e=>{const t=N.fromRangeStart(e),n=N.fromRangeEnd(e),s=e.commonAncestorContainer;return Jt(!1,s,n).map(o=>!Vn(t,n,s)&&Vn(t,o,s)?uL(t.container(),t.offset(),o.container(),o.offset()):e).getOr(e)},Jf=e=>e.collapsed?e:fL(e),dL=e=>M(e.firstChild)&&e.firstChild===e.lastChild,mL=e=>e.name==="br"||e.value===Ze,gL=(e,t)=>e.getBlockElements()[t.name]&&dL(t)&&mL(t.firstChild),pL=(e,t)=>{const n=e.getNonEmptyElements();return M(t)&&(t.isEmpty(n)||gL(e,t))},hL=(e,t)=>{let n=t.firstChild,s=t.lastChild;return n&&n.name==="meta"&&(n=n.next),s&&s.attr("id")==="mce_marker"&&(s=s.prev),pL(e,s)&&(s=s==null?void 0:s.prev),!n||n!==s?!1:n.name==="ul"||n.name==="ol"},bL=e=>{var t,n;const s=e.firstChild,o=e.lastChild;return s&&s.nodeName==="META"&&((t=s.parentNode)===null||t===void 0||t.removeChild(s)),o&&o.id==="mce_marker"&&((n=o.parentNode)===null||n===void 0||n.removeChild(o)),e},CL=(e,t,n)=>{const s=t.serialize(n),o=e.createFragment(s);return bL(o)},yL=e=>{var t;return se((t=e==null?void 0:e.childNodes)!==null&&t!==void 0?t:[],n=>n.nodeName==="LI")},vL=e=>e.data===Ze||$e(e),EL=e=>M(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&vL(e.firstChild),SL=e=>!e.firstChild||EL(e),wL=e=>e.length>0&&SL(e[e.length-1])?e.slice(0,-1):e,ed=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},kL=(e,t)=>!!ed(e,t),xL=(e,t)=>{const n=t.cloneRange(),s=t.cloneRange();return n.setStartBefore(e),s.setEndAfter(e),[n.cloneContents(),s.cloneContents()]},_L=(e,t)=>{const n=N.before(e),o=qn(t).next(n);return o?o.toRange():null},dv=(e,t)=>{const n=N.after(e),o=qn(t).prev(n);return o?o.toRange():null},NL=(e,t,n,s)=>{const o=xL(e,s),r=e.parentNode;return r&&(r.insertBefore(o[0],e),I.each(t,a=>{r.insertBefore(a,e)}),r.insertBefore(o[1],e),r.removeChild(e)),dv(t[t.length-1],n)},AL=(e,t,n)=>{const s=e.parentNode;return s&&I.each(t,o=>{s.insertBefore(o,e)}),_L(e,n)},RL=(e,t,n,s)=>(s.insertAfter(t.reverse(),e),dv(t[0],n)),TL=(e,t,n,s)=>{const o=CL(t,e,s),r=ed(t,n.startContainer),a=wL(yL(o.firstChild)),i=1,c=2,l=t.getRoot(),u=f=>{const d=N.fromRangeStart(n),g=qn(t.getRoot()),h=f===i?g.prev(d):g.next(d),p=h==null?void 0:h.getNode();return p?ed(t,p)!==r:!0};return r?u(i)?AL(r,a,l):u(c)?RL(r,a,l,t):NL(r,a,l,n):null},PL=["pre"],DL=(e,t,n,s)=>{var o;const r=t.firstChild,a=t.lastChild,i=a.attr("data-mce-type")==="bookmark"?a.prev:a,c=r===i,l=Ee(PL,r.name);if(c&&l){const u=r.attr("contenteditable")!=="false",f=((o=e.getParent(n,e.isBlock))===null||o===void 0?void 0:o.nodeName.toLowerCase())===r.name,d=m.from(go(s,n)).forall(dn);return u&&f&&d}else return!1},td=_i,OL=(e,t,n)=>{if(M(n)){const s=e.getParent(t.endContainer,td);return n===s&&tf(C.fromDom(n),t)}else return!1},BL=(e,t,n)=>{var s;if(n.getAttribute("data-mce-bogus")==="all")(s=n.parentNode)===null||s===void 0||s.insertBefore(e.dom.createFragment(t),n);else{const o=n.firstChild,r=n.lastChild;!o||o===r&&o.nodeName==="BR"?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}},IL=(e,t,n)=>{m.from(e.getParent(t,"td,th")).map(C.fromDom).each(s=>IR(s,n))},LL=(e,t)=>{const n=e.schema.getTextInlineElements(),s=e.dom;if(t){const o=e.getBody(),r=Gf(e),a="*[data-mce-fragment]",i=s.select(a);I.each(i,c=>{const l=d=>M(n[d.nodeName.toLowerCase()]),u=d=>d.childNodes.length===1;if((d=>!(by(s,d)||RB(s,d)))(c)&&l(c)&&u(c)){const d=sr(s,c),g=(y,v)=>es(y,E=>Ee(v,E)),h=y=>u(c)&&s.is(y,a)&&l(y)&&(y.nodeName===c.nodeName&&g(d,sr(s,y))||h(y.children[0])),p=y=>M(y)&&y!==o&&(r.compare(c,y)||p(y.parentElement)),b=y=>M(y)&&y!==o&&s.is(y,a)&&(PB(s,c,y)||b(y.parentElement));(h(c.children[0])||p(c.parentElement)&&!b(c.parentElement))&&s.remove(c,!0)}})}},$L=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},FL=e=>{I.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},ML=e=>!!e.getAttribute("data-mce-fragment"),UL=(e,t)=>M(t)&&!e.schema.getVoidElements()[t.nodeName],zL=(e,t)=>{var n,s,o;let r;const a=e.dom,i=e.selection;if(!t)return;i.scrollIntoView(t);const c=go(e.getBody(),t);if(c&&a.getContentEditable(c)==="false"){a.remove(t),i.select(c);return}let l=a.createRng();const u=t.previousSibling;if(O(u)){l.setStart(u,(s=(n=u.nodeValue)===null||n===void 0?void 0:n.length)!==null&&s!==void 0?s:0);const g=t.nextSibling;O(g)&&(u.appendData(g.data),(o=g.parentNode)===null||o===void 0||o.removeChild(g))}else l.setStartBefore(t),l.setEndBefore(t);const f=g=>{let h=N.fromRangeStart(g);return h=qn(e.getBody()).next(h),h==null?void 0:h.toRange()},d=a.getParent(t,a.isBlock);if(a.remove(t),d&&a.isEmpty(d)){const g=td(d);Io(C.fromDom(d)),l.setStart(d,0),l.setEnd(d,0),!g&&!ML(d)&&(r=f(l))?(l=r,a.remove(d)):a.add(d,a.create("br",g?{}:{"data-mce-bogus":"1"}))}i.setRng(l)},HL=e=>{const t=e.dom,n=Jf(e.selection.getRng());e.selection.setRng(n);const s=t.getParent(n.startContainer,td);OL(t,n,s)?jf(e,n,C.fromDom(s)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset===1&&O(n.startContainer.childNodes[n.startOffset])?n.deleteContents():e.getDoc().execCommand("Delete",!1)},WL=e=>{for(let t=e;t;t=t.walk())if(t.attr("id")==="mce_marker")return m.some(t);return m.none()},VL=(e,t,n)=>{var s;return Le(n.children(),iv)&&((s=e.getParent(t,e.isBlock))===null||s===void 0?void 0:s.nodeName)==="SUMMARY"},jL=(e,t,n)=>{var s,o;const r=e.selection,a=e.dom,i=e.parser,c=n.merge,l=Ts({validate:!0},e.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=qt(t)),t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,u);let f=r.getRng();const d=f.startContainer,g=e.getBody();d===g&&r.isCollapsed()&&a.isBlock(g.firstChild)&&UL(e,g.firstChild)&&a.isEmpty(g.firstChild)&&(f=a.createRng(),f.setStart(g.firstChild,0),f.setEnd(g.firstChild,0),r.setRng(f)),r.isCollapsed()||HL(e);const h=r.getNode(),p={context:h.nodeName.toLowerCase(),data:n.data,insert:!0},b=i.parse(t,p);if(n.paste===!0&&hL(e.schema,b)&&kL(a,h))return f=TL(l,a,r.getRng(),b),f&&r.setRng(f),t;n.paste===!0&&DL(a,b,h,e.getBody())&&((s=b.firstChild)===null||s===void 0||s.unwrap()),$L(b);let y=b.lastChild;if(y&&y.attr("id")==="mce_marker"){const v=y;for(y=y.prev;y&&y.name!=="table";y=y.walk(!0))if(y.type===3||!a.isBlock(y.name)){y.parent&&e.schema.isValidChild(y.parent.name,"span")&&y.parent.insert(v,y,y.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(h),!p.invalid&&!VL(a,h,b))t=l.serialize(b),BL(e,t,h);else{e.selection.setContent(u);let v=r.getNode(),E;const S=e.getBody();for(qr(v)?v=E=S:E=v;E&&E!==S;)v=E,E=E.parentNode;t=v===S?S.innerHTML:a.getOuterHTML(v);const R=i.parse(t),D=WL(R),z=D.bind(cL).getOr(R);D.each(W=>W.replace(b));const A=b.children(),x=(o=b.parent)!==null&&o!==void 0?o:R;b.unwrap();const P=se(A,W=>Qf(e.schema,W,x));Zf(P,e.schema,z),uv(i.getNodeFilters(),i.getAttributeFilters(),R),t=l.serialize(R),v===S?a.setHTML(S,t):a.setOuterHTML(v,t)}return LL(e,c),zL(e,a.get("mce_marker")),FL(e.getBody()),IL(a,r.getStart(),e.schema),bA(e.schema,e.getBody(),r.getStart()),t},yc=e=>e instanceof xt,qL=e=>{nr(e)&&vt(e.getBody()).each(t=>{const n=t.getNode(),s=zn(n)?vt(n).getOr(t):t;e.selection.setRng(s.toRange())})},nd=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&qL(e)},KL=(e,t,n,s)=>{if(n=qt(n),n.length===0||/^\s+$/.test(n)){const o='<br data-mce-bogus="1">';t.nodeName==="TABLE"?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>");const r=yt(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),r.toLowerCase())?(n=o,n=e.dom.createHTML(r,la(e),n)):n||(n=o),nd(e,n,s.no_selection),{content:n,html:n}}else{s.format!=="raw"&&(n=Ts({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const o=Bi(C.fromDom(t))?n:I.trim(n);return nd(e,o,s.no_selection),{content:o,html:o}}},GL=(e,t,n,s)=>{uv(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const o=Ts({validate:!1},e.schema).serialize(n),r=qt(Bi(C.fromDom(t))?o:I.trim(o));return nd(e,r,s.no_selection),{content:n,html:r}},YL=(e,t,n)=>m.from(e.getBody()).map(s=>yc(t)?GL(e,s,t,n):KL(e,s,t,n)).getOr({content:t,html:yc(n.content)?"":n.content}),mv=e=>we(e)?e:De,XL=(e,t,n)=>{let s=e.dom;const o=mv(n);for(;s.parentNode;){s=s.parentNode;const r=C.fromDom(s),a=t(r);if(a.isSome())return a;if(o(r))break}return m.none()},sd=(e,t,n)=>{const s=t(e),o=mv(n);return s.orThunk(()=>o(e)?m.none():XL(e,t,o))},od=cf,gv=(e,t,n)=>{const s=e.formatter.get(n);if(s)for(let o=0;o<s.length;o++){const r=s[o];if(nn(r)&&r.inherit===!1&&e.dom.is(t,r.selector))return!0}return!1},rd=(e,t,n,s,o)=>{const r=e.dom.getRoot();if(t===r)return!1;const a=e.dom.getParent(t,i=>gv(e,i,n)?!0:i.parentNode===r||!!Gn(e,i,n,s,!0));return!!Gn(e,a,n,s,o)},vc=(e,t,n)=>Je(n)&&od(t,n.inline)||Kn(n)&&od(t,n.block)?!0:nn(n)?Y(t)&&e.is(t,n.selector):!1,pv=(e,t,n,s,o,r)=>{const a=n[s],i=s==="attributes";if(we(n.onmatch))return n.onmatch(t,n,s);if(a){if(wg(a)){for(let c=0;c<a.length;c++)if(i?e.getAttrib(t,a[c]):Ji(e,t,a[c]))return!0}else for(const c in a)if(oe(a,c)){const l=i?e.getAttrib(t,c):Ji(e,t,c),u=Rs(a[c],r),f=Ve(l)||Br(l);if(f&&Ve(u))continue;if(o&&f&&!n.exact||(!o||n.exact)&&!od(l,lf(u,c)))return!1}}return!0},Gn=(e,t,n,s,o)=>{const r=e.formatter.get(n),a=e.dom;if(r&&Y(t))for(let i=0;i<r.length;i++){const c=r[i];if(vc(e.dom,t,c)&&pv(a,t,c,"attributes",o,s)&&pv(a,t,c,"styles",o,s)){const l=c.classes;if(l){for(let u=0;u<l.length;u++)if(!e.dom.hasClass(t,Rs(l[u],s)))return}return c}}},ad=(e,t,n,s,o)=>{if(s)return rd(e,s,t,n,o);if(s=e.selection.getNode(),rd(e,s,t,n,o))return!0;const r=e.selection.getStart();return!!(r!==s&&rd(e,r,t,n,o))},ZL=(e,t,n)=>{const s=[],o={},r=e.selection.getStart();return e.dom.getParent(r,a=>{for(let i=0;i<t.length;i++){const c=t[i];!o[c]&&Gn(e,a,c,n)&&(o[c]=!0,s.push(c))}},e.dom.getRoot()),s},QL=(e,t)=>{const n=o=>ve(o,C.fromDom(e.getBody())),s=(o,r)=>Gn(e,o.dom,r)?m.some(r):m.none();return m.from(e.selection.getStart(!0)).bind(o=>sd(C.fromDom(o),r=>_o(t,a=>s(r,a)),n)).getOrNull()},JL=(e,t)=>{const n=e.formatter.get(t),s=e.dom;if(n&&e.selection.isEditable()){const o=e.selection.getStart(),r=ec(s,o);for(let a=n.length-1;a>=0;a--){const i=n[a];if(!nn(i))return!0;for(let c=r.length-1;c>=0;c--)if(s.is(r[c],i.selector))return!0}}return!1},e$=(e,t,n)=>Lt(n,(s,o)=>{const r=E1(e,o);return e.formatter.matchNode(t,o,{},r)?s.concat([o]):s},[]),Ra=Qe,t$=(e,t)=>e.importNode(t,!0),hv=e=>{if(e){const t=new et(e,e);for(let n=t.current();n;n=t.next())if(O(n))return n}return null},id=e=>{const t=C.fromTag("span");return ns(t,{id:Xu,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&je(t,C.fromText(Ra)),t},n$=e=>{const t=hv(e);return t&&t.data.charAt(0)===Ra&&t.deleteData(0,1),t},cd=(e,t,n)=>{const s=e.dom,o=e.selection;if(dC(t))fo(e,!1,C.fromDom(t),n,!0);else{const r=o.getRng(),a=s.getParent(t,s.isBlock),i=r.startContainer,c=r.startOffset,l=r.endContainer,u=r.endOffset,f=n$(t);s.remove(t,!0),i===f&&c>0&&r.setStart(f,c-1),l===f&&u>0&&r.setEnd(f,u-1),a&&s.isEmpty(a)&&ks(C.fromDom(a)),o.setRng(r)}},ld=(e,t,n)=>{const s=e.dom,o=e.selection;if(t)cd(e,t,n);else if(t=ao(e.getBody(),o.getStart()),!t)for(;t=s.get(Xu);)cd(e,t,n)},s$=(e,t,n)=>{var s,o;const r=e.dom,a=r.getParent(n,q(rf,e.schema));a&&r.isEmpty(a)?(s=n.parentNode)===null||s===void 0||s.replaceChild(t,n):(BR(C.fromDom(n)),r.isEmpty(n)?(o=n.parentNode)===null||o===void 0||o.replaceChild(t,n):r.insertAfter(t,n))},bv=(e,t)=>(e.appendChild(t),t),Cv=(e,t)=>{var n;const s=_r(e,(r,a)=>bv(r,a.cloneNode(!1)),t),o=(n=s.ownerDocument)!==null&&n!==void 0?n:document;return bv(s,o.createTextNode(Ra))},o$=(e,t,n,s,o,r)=>{const a=e.formatter,i=e.dom,c=se($t(a.get()),f=>f!==s&&!gt(f,"removeformat")),l=e$(e,n,c);if(se(l,f=>!S1(e,f,s)).length>0){const f=n.cloneNode(!1);return i.add(t,f),a.remove(s,o,f,r),i.remove(f),m.some(f)}else return m.none()},yv=e=>xh(e,sa(e).replace(new RegExp(`${Ze}$`)," ")),vv=(e,t)=>{const n=()=>{t!==null&&!e.dom.isEmpty(t)&&ys(C.fromDom(t)).each(s=>{Tt(s)?yv(s):jl(s,o=>Tt(o)).each(o=>{Tt(o)&&yv(o)})})};e.once("input",s=>{s.data&&!io(s.data)&&(s.isComposing?e.once("compositionend",()=>{n()}):n())})},r$=(e,t,n)=>{let s;const o=e.selection,r=e.formatter.get(t);if(!r)return;const a=o.getRng();let i=a.startOffset;const l=a.startContainer.nodeValue;s=ao(e.getBody(),o.getStart());const u=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(l&&i>0&&i<l.length&&u.test(l.charAt(i))&&u.test(l.charAt(i-1))){const f=o.getBookmark();a.collapse(!0);let d=co(e.dom,a,r);d=uc(d),e.formatter.apply(t,n,d),o.moveToBookmark(f)}else{let f=s?hv(s):null;(!s||(f==null?void 0:f.data)!==Ra)&&(s=t$(e.getDoc(),id(!0).dom),f=s.firstChild,a.insertNode(s),i=1,vv(e,s)),e.formatter.apply(t,n,s),o.setCursorLocation(f,i)}},a$=(e,t,n,s)=>{const o=e.dom,r=e.selection;let a=!1;const i=e.formatter.get(t);if(!i)return;const c=r.getRng(),l=c.startContainer,u=c.startOffset;let f=l;O(l)&&(u!==l.data.length&&(a=!0),f=f.parentNode);const d=[];let g;for(;f;){if(Gn(e,f,t,n,s)){g=f;break}f.nextSibling&&(a=!0),d.push(f),f=f.parentNode}if(g)if(a){const h=r.getBookmark();c.collapse(!0);let p=co(o,c,i,!0);p=uc(p),e.formatter.remove(t,n,p,s),r.moveToBookmark(h)}else{const h=ao(e.getBody(),g),p=M(h)?o.getParents(g.parentNode,He,h):[],b=id(!1).dom;s$(e,b,h??g);const y=o$(e,b,g,t,n,s),v=Cv([...d,...y.toArray(),...p],b);h&&cd(e,h,M(h)),r.setCursorLocation(v,1),vv(e,b),o.isEmpty(g)&&o.remove(g)}},i$=(e,t,n)=>{const s=e.selection,o=e.getBody();ld(e,null,n),(t===8||t===46)&&s.isCollapsed()&&s.getStart().innerHTML===Ra&&ld(e,ao(o,s.getStart()),!0),(t===37||t===39)&&ld(e,ao(o,s.getStart()),!0)},c$=e=>O(e)&&Bl(e.data,Ze),l$=e=>{e.on("mouseup keydown",t=>{i$(e,t.keyCode,c$(e.selection.getRng().endContainer))})},Ev=e=>{const t=id(!1),n=Cv(e,t.dom);return{caretContainer:t,caretPosition:N(n,0)}},Sv=(e,t)=>{const{caretContainer:n,caretPosition:s}=Ev(t);return Ft(C.fromDom(e),n),Re(C.fromDom(e)),s},u$=(e,t)=>{const{caretContainer:n,caretPosition:s}=Ev(t);return e.insertNode(n.dom),s},wv=(e,t)=>{if(en(t.dom))return!1;const n=e.schema.getTextInlineElements();return oe(n,he(t))&&!en(t.dom)&&!qs(t.dom)},Ta={},kv=kn(["pre"]),f$=(e,t)=>{Ta[e]||(Ta[e]=[]),Ta[e].push(t)},d$=(e,t)=>{oe(Ta,e)&&T(Ta[e],n=>{n(t)})};f$("pre",e=>{const t=e.selection.getRng(),n=o=>r=>{const a=r.previousSibling;return kv(a)&&Ee(o,a)},s=(o,r)=>{const a=C.fromDom(r),i=Cs(a).dom;Re(a),Vs(C.fromDom(o),[C.fromTag("br",i),C.fromTag("br",i),...ht(a)])};if(!t.collapsed){const o=e.selection.getSelectedBlocks(),r=se(se(o,kv),n(o));T(r,a=>{s(a.previousSibling,a)})}});const xv=["fontWeight","fontStyle","color","fontSize","fontFamily"],m$=e=>ot(e.styles)&&Le($t(e.styles),t=>Ee(xv,t)),g$=e=>Ye(e,t=>Je(t)&&t.inline==="span"&&m$(t)),_v=(e,t)=>{const n=e.get(t);return Fe(n)?g$(n):m.none()},Nv=(e,t)=>Mt(t,N.fromRangeStart(e)).isNone(),Av=(e,t)=>Dt(t,N.fromRangeEnd(e)).exists(n=>!$e(n.getNode())||Dt(t,n).isSome())===!1,Rv=e=>t=>J0(t)&&e.isEditable(t),p$=e=>{const t=e.getSelectedBlocks(),n=e.getRng();if(e.isCollapsed())return[];if(t.length===1)return Nv(n,t[0])&&Av(n,t[0])?t:[];{const s=Rt(t).filter(a=>Nv(n,a)).toArray(),o=bs(t).filter(a=>Av(n,a)).toArray(),r=t.slice(1,-1);return s.concat(r).concat(o)}},h$=e=>se(p$(e),Rv(e.dom)),Tv=e=>se(e.getSelectedBlocks(),Rv(e.dom)),ud=I.each,fd=e=>Y(e)&&!tn(e)&&!en(e)&&!qs(e),Pv=(e,t)=>{for(let n=e;n;n=n[t]){if(O(n)&&Ln(n.data))return e;if(Y(n)&&!tn(n))return n}return e},Dv=(e,t,n)=>{const s=Gf(e),o=as(t)&&e.dom.isEditable(t),r=as(n)&&e.dom.isEditable(n);if(o&&r){const a=Pv(t,"previousSibling"),i=Pv(n,"nextSibling");if(s.compare(a,i)){for(let c=a.nextSibling;c&&c!==i;){const l=c;c=c.nextSibling,a.appendChild(l)}return e.dom.remove(i),I.each(I.grep(i.childNodes),c=>{a.appendChild(c)}),a}}return n},Ov=(e,t,n,s)=>{var o;if(s&&t.merge_siblings!==!1){const r=(o=Dv(e,lC(s),s))!==null&&o!==void 0?o:s;Dv(e,r,lC(r,!0))}},b$=(e,t,n)=>{if(t.clear_child_styles){const s=t.links?"*:not(a)":"*";ud(e.select(s,n),o=>{fd(o)&&e.isEditable(o)&&ud(t.styles,(r,a)=>{e.setStyle(o,a,"")})})}},dd=(e,t,n)=>{ud(e.childNodes,s=>{fd(s)&&(t(s)&&n(s),s.hasChildNodes()&&dd(s,t,n))})},C$=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},Bv=(e,t)=>n=>!!(n&&Ji(e,n,t)),Iv=(e,t,n)=>s=>{e.setStyle(s,t,n),s.getAttribute("style")===""&&s.removeAttribute("style"),C$(e,s)},po=Wn.generate([{keep:[]},{rename:["name"]},{removed:[]}]),y$=/^(src|href|style)$/,md=I.each,Ec=cf,v$=e=>/^(TR|TH|TD)$/.test(e.nodeName),Lv=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),$v=(e,t,n)=>{let s=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(Y(s)){const r=s.childNodes.length-1;!n&&o&&o--,s=s.childNodes[o>r?r:o]}return O(s)&&n&&o>=s.data.length&&(s=new et(s,e.getBody()).next()||s),O(s)&&!n&&o===0&&(s=new et(s,e.getBody()).prev()||s),s},Fv=(e,t)=>{const n=t?"firstChild":"lastChild",s=e[n];return v$(e)&&s?e.nodeName==="TR"&&s[n]||s:e},gd=(e,t,n,s)=>{var o;const r=e.create(n,s);return(o=t.parentNode)===null||o===void 0||o.insertBefore(r,t),r.appendChild(t),r},Mv=(e,t,n,s,o)=>{const r=C.fromDom(t),a=C.fromDom(e.create(s,o)),i=n?gp(r):mp(r);return Vs(a,i),n?(Ft(r,a),Kl(a,r)):(rs(r,a),je(a,r)),a.dom},E$=(e,t)=>t.links&&e.nodeName==="A",Uv=(e,t,n)=>{const s=t.parentNode;let o;const r=e.dom,a=yt(e);Kn(n)&&s===r.getRoot()&&(!n.list_block||!Ec(t,n.list_block))&&T(Wt(t.childNodes),i=>{Qo(e,a,i.nodeName.toLowerCase())?o?o.appendChild(i):(o=gd(r,i,a),r.setAttribs(o,la(e))):o=null}),!(x1(n)&&!Ec(n.inline,t))&&r.remove(t,!0)},zv=(e,t,n)=>fn(e)?{name:t,value:null}:{name:e,value:Rs(t,n)},Hv=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},Wv=(e,t,n,s,o)=>{let r=!1;md(n.styles,(a,i)=>{const{name:c,value:l}=zv(i,a,s),u=lf(l,c);(n.remove_similar||St(l)||!Y(o)||Ec(Ji(e,o,c),u))&&e.setStyle(t,c,""),r=!0}),r&&Hv(e,t)},S$=(e,t,n)=>{t==="removeformat"?T(Tv(e.selection),s=>{T(xv,o=>e.dom.setStyle(s,o,"")),Hv(e.dom,s)}):_v(e.formatter,t).each(s=>{T(Tv(e.selection),o=>Wv(e.dom,o,s,n,null))})},Vv=(e,t,n,s,o)=>{const r=e.dom,a=Gf(e),i=e.schema;if(Je(t)&&au(i,t.inline)&&Gs(i,s)&&s.parentElement===e.getBody())return Uv(e,s,t),po.removed();if(!t.ceFalseOverride&&s&&r.getContentEditableParent(s)==="false"||s&&!vc(r,s,t)&&!E$(s,t))return po.keep();const c=s,l=t.preserve_attributes;if(Je(t)&&t.remove==="all"&&Fe(l)){const u=se(r.getAttribs(c),f=>Ee(l,f.name.toLowerCase()));if(r.removeAllAttribs(c),T(u,f=>r.setAttrib(c,f.name,f.value)),u.length>0)return po.rename("span")}if(t.remove!=="all"){Wv(r,c,t,n,o),md(t.attributes,(f,d)=>{const{name:g,value:h}=zv(d,f,n);if(t.remove_similar||St(h)||!Y(o)||Ec(r.getAttrib(o,g),h)){if(g==="class"){const p=r.getAttrib(c,g);if(p){let b="";if(T(p.split(/\s+/),y=>{/mce\-\w+/.test(y)&&(b+=(b?" ":"")+y)}),b){r.setAttrib(c,g,b);return}}}if(y$.test(g)&&c.removeAttribute("data-mce-"+g),g==="style"&&kn(["li"])(c)&&r.getStyle(c,"list-style-type")==="none"){c.removeAttribute(g),r.setStyle(c,"list-style-type","none");return}g==="class"&&c.removeAttribute("className"),c.removeAttribute(g)}}),md(t.classes,f=>{f=Rs(f,n),(!Y(o)||r.hasClass(o,f))&&r.removeClass(c,f)});const u=r.getAttribs(c);for(let f=0;f<u.length;f++){const d=u[f].nodeName;if(!a.isAttributeInternal(d))return po.keep()}}return t.remove!=="none"?(Uv(e,c,t),po.removed()):po.keep()},w$=(e,t,n,s,o)=>{let r;return t.parentNode&&T(ec(e.dom,t.parentNode).reverse(),a=>{if(!r&&Y(a)&&a.id!=="_start"&&a.id!=="_end"){const i=Gn(e,a,n,s,o);i&&i.split!==!1&&(r=a)}}),r},k$=(e,t,n,s)=>Vv(e,t,n,s,s).fold(H(s),o=>(e.dom.createFragment().appendChild(s),e.dom.rename(s,o)),H(null)),x$=(e,t,n,s,o,r,a,i)=>{var c,l;let u,f;const d=e.dom;if(n){const g=n.parentNode;for(let h=s.parentNode;h&&h!==g;h=h.parentNode){let p=d.clone(h,!1);for(let b=0;b<t.length&&(p=k$(e,t[b],i,p),p!==null);b++);p&&(u&&p.appendChild(u),f||(f=p),u=p)}(!a.mixed||!d.isBlock(n))&&(s=(c=d.split(n,s))!==null&&c!==void 0?c:s),u&&f&&((l=o.parentNode)===null||l===void 0||l.insertBefore(u,o),f.appendChild(o),Je(a)&&Ov(e,a,i,u))}return s},_$=(e,t,n,s,o)=>{const r=e.formatter.get(t),a=r[0],i=e.dom,c=e.selection,l=p=>{const b=w$(e,p,t,n,o);return x$(e,r,b,p,p,!0,a,n)},u=p=>tn(p)&&Y(p)&&(p.id==="_start"||p.id==="_end"),f=p=>Le(r,b=>Pa(e,b,n,p,p)),d=p=>{const b=Wt(p.childNodes),v=f(p)||Le(r,R=>vc(i,p,R)),E=p.parentNode;if(!v&&M(E)&&ff(a)&&f(E),a.deep&&b.length)for(let R=0;R<b.length;R++)d(b[R]);T(["underline","line-through","overline"],R=>{Y(p)&&e.dom.getStyle(p,"text-decoration")===R&&p.parentNode&&fC(i,p.parentNode)===R&&Pa(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:R}},void 0,p)})},g=p=>{const b=i.get(p?"_start":"_end");if(b){let y=b[p?"firstChild":"lastChild"];return u(y)&&(y=y[p?"firstChild":"lastChild"]),O(y)&&y.data.length===0&&(y=p?b.previousSibling||b.nextSibling:b.nextSibling||b.previousSibling),i.remove(b,!0),y}else return null},h=p=>{let b,y,v=co(i,p,r,p.collapsed);if(a.split){if(v=uc(v),b=$v(e,v,!0),y=$v(e,v),b!==y){if(b=Fv(b,!0),y=Fv(y,!1),Lv(i,b,y)){const S=m.from(b.firstChild).getOr(b);l(Mv(i,S,!0,"span",{id:"_start","data-mce-type":"bookmark"})),g(!0);return}if(Lv(i,y,b)){const S=m.from(y.lastChild).getOr(y);l(Mv(i,S,!1,"span",{id:"_end","data-mce-type":"bookmark"})),g(!1);return}b=gd(i,b,"span",{id:"_start","data-mce-type":"bookmark"}),y=gd(i,y,"span",{id:"_end","data-mce-type":"bookmark"});const E=i.createRng();E.setStartAfter(b),E.setEndBefore(y),ya(i,E,S=>{T(S,R=>{!tn(R)&&!tn(R.parentNode)&&l(R)})}),l(b),l(y),b=g(!0),y=g()}else b=y=l(b);v.startContainer=b.parentNode?b.parentNode:b,v.startOffset=i.nodeIndex(b),v.endContainer=y.parentNode?y.parentNode:y,v.endOffset=i.nodeIndex(y)+1}ya(i,v,E=>{T(E,d)})};if(s){if(Ca(s)){const p=i.createRng();p.setStartBefore(s),p.setEndAfter(s),h(p)}else h(s);cb(e,t,s,n);return}!c.isCollapsed()||!Je(a)||Zo(e).length?(cC(e,()=>sf(e,h),p=>Je(a)&&ad(e,t,n,p)),e.nodeChanged()):a$(e,t,n,o),S$(e,t,n),cb(e,t,s,n)},jv=(e,t,n,s,o)=>{(s||e.selection.isEditable())&&_$(e,t,n,s,o)},Pa=(e,t,n,s,o)=>Vv(e,t,n,s,o).fold(De,r=>(e.dom.rename(s,r),!0),He),qv=I.each,N$=(e,t,n,s)=>{const o=r=>{if(as(r)&&Y(r.parentNode)&&e.isEditable(r)){const a=fC(e,r.parentNode);e.getStyle(r,"color")&&a?e.setStyle(r,"text-decoration",a):e.getStyle(r,"text-decoration")===a&&e.setStyle(r,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(I.walk(s,o,"childNodes"),o(s))},A$=(e,t,n,s)=>{if(t.styles&&t.styles.backgroundColor){const o=Bv(e,"fontSize");dd(s,r=>o(r)&&e.isEditable(r),Iv(e,"backgroundColor",Rs(t.styles.backgroundColor,n)))}},R$=(e,t,n,s)=>{if(Je(t)&&(t.inline==="sub"||t.inline==="sup")){const o=Bv(e,"fontSize");dd(s,a=>o(a)&&e.isEditable(a),Iv(e,"fontSize",""));const r=se(e.select(t.inline==="sup"?"sub":"sup",s),e.isEditable);e.remove(r,!0)}},T$=(e,t,n,s)=>{qv(t,o=>{Je(o)&&qv(e.dom.select(o.inline,s),r=>{fd(r)&&Pa(e,o,n,r,o.exact?r:null)}),b$(e.dom,o,s)})},P$=(e,t,n,s,o)=>{const r=o.parentNode;Gn(e,r,n,s)&&Pa(e,t,s,o)||t.merge_with_parents&&r&&e.dom.getParent(r,a=>Gn(e,a,n,s)?(Pa(e,t,s,o),!0):!1)},Sc=I.each,D$=(e,t,n,s)=>{if(PP(e)&&Je(t)&&n.parentNode){const o=oh(e.schema),r=z0(C.fromDom(n),a=>en(a.dom));return No(o,s)&&is(e.schema,n.parentNode,{skipBogus:!1,includeZwsp:!0})&&!r}else return!1},Kv=(e,t,n,s)=>{if(Sc(n.styles,(o,r)=>{e.setStyle(t,r,Rs(o,s))}),n.styles){const o=e.getAttrib(t,"style");o&&e.setAttrib(t,"data-mce-style",o)}},O$=(e,t,n,s)=>{const o=e.formatter.get(t),r=o[0],a=!s&&e.selection.isCollapsed(),i=e.dom,c=e.selection,l=(h,p=r)=>{we(p.onformat)&&p.onformat(h,p,n,s),Kv(i,h,p,n),Sc(p.attributes,(b,y)=>{i.setAttrib(h,y,Rs(b,n))}),Sc(p.classes,b=>{const y=Rs(b,n);i.hasClass(h,y)||i.addClass(h,y)})},u=(h,p)=>{let b=!1;return Sc(h,y=>nn(y)?i.getContentEditable(p)==="false"&&!y.ceFalseOverride||M(y.collapsed)&&y.collapsed!==a?!0:i.is(p,y.selector)&&!en(p)?(l(p,y),b=!0,!1):!0:!1),b},f=h=>{if(Q(h)){const p=i.create(h);return l(p),p}else return null},d=(h,p,b)=>{const y=[];let v=!0;const E=r.inline||r.block,S=f(E),R=A=>w1(r)&&Gn(e,A,t,n),D=(A,x,P)=>{const W=k1(r)&&rf(e.schema,A)&&Qo(e,x,E);return P&&W},z=(A,x,P,W)=>{const X=A.nodeName.toLowerCase(),ae=Qo(e,E,X)&&Qo(e,x,E),ie=!b&&O(A)&&Ii(A.data),be=en(A),ye=!Je(r)||!h.isBlock(A);return(P||W)&&ae&&!ie&&!be&&ye};ya(h,p,A=>{let x;const P=W=>{let X=!1,ae=v,ie=!1;const be=W.parentNode,ye=be.nodeName.toLowerCase(),Oe=h.getContentEditable(W);M(Oe)&&(ae=v,v=Oe==="true",X=!0,ie=uC(e,W));const st=v&&!X;if($e(W)&&!D$(e,r,W,ye)){x=null,Kn(r)&&h.remove(W);return}if(R(W)){x=null;return}if(D(W,ye,st)){const Ke=h.rename(W,E);l(Ke),y.push(Ke),x=null;return}if(nn(r)){let Ke=u(o,W);if(!Ke&&M(be)&&ff(r)&&(Ke=u(o,be)),!Je(r)||Ke){x=null;return}}M(S)&&z(W,ye,st,ie)?(x||(x=h.clone(S,!1),be.insertBefore(x,W),y.push(x)),ie&&X&&(v=ae),x.appendChild(W)):(x=null,T(Wt(W.childNodes),P),X&&(v=ae),x=null)};T(A,P)}),r.links===!0&&T(y,A=>{const x=P=>{P.nodeName==="A"&&l(P,r),T(Wt(P.childNodes),x)};x(A)}),T(y,A=>{const x=X=>{let ae=0;return T(X.childNodes,ie=>{!y1(ie)&&!tn(ie)&&ae++}),ae},P=X=>Ye(X.childNodes,of).filter(ie=>h.getContentEditable(ie)!=="false"&&vc(h,ie,r)).map(ie=>{const be=h.clone(ie,!1);return l(be),h.replace(be,X,!0),h.remove(ie,!0),be}).getOr(X),W=x(A);if((y.length>1||!h.isBlock(A))&&W===0){h.remove(A,!0);return}(Je(r)||Kn(r)&&r.wrapper)&&(!r.exact&&W===1&&(A=P(A)),T$(e,o,n,A),P$(e,r,t,n,A),A$(h,r,n,A),N$(h,r,n,A),R$(h,r,n,A),Ov(e,r,n,A))})},g=Ca(s)?s:c.getNode();if(i.getContentEditable(g)==="false"&&!uC(e,g)){s=g,u(o,s),ib(e,t,s,n);return}if(r){if(s)if(Ca(s)){if(!u(o,s)){const h=i.createRng();h.setStartBefore(s),h.setEndAfter(s),d(i,co(i,h,o),!0)}}else d(i,s,!0);else!a||!Je(r)||Zo(e).length?(c.setRng(Jf(c.getRng())),cC(e,()=>{sf(e,(h,p)=>{const b=p?h:co(i,h,o);d(i,b,!1)})},He),e.nodeChanged()):r$(e,t,n),_v(e.formatter,t).each(h=>{T(h$(e.selection),p=>Kv(i,p,h,n))});d$(t,e)}ib(e,t,s,n)},Gv=(e,t,n,s)=>{(s||e.selection.isEditable())&&O$(e,t,n,s)},Yv=e=>oe(e,"vars"),B$=(e,t)=>{e.set({}),t.on("NodeChange",n=>{Jv(t,n.element,e.get())}),t.on("FormatApply FormatRemove",n=>{const s=m.from(n.node).map(o=>Ca(o)?o:o.startContainer).bind(o=>Y(o)?m.some(o):m.from(o.parentElement)).getOrThunk(()=>Xv(t));Jv(t,s,e.get())})},Xv=e=>e.selection.getStart(),Zv=(e,t,n,s,o)=>Cg(t,i=>{const c=e.formatter.matchNode(i,n,o??{},s);return!rt(c)},i=>gv(e,i,n)?!0:s?!1:M(e.formatter.matchNode(i,n,o,!0))),Qv=(e,t)=>{const n=t??Xv(e);return se(ec(e.dom,n),s=>Y(s)&&!qs(s))},Jv=(e,t,n)=>{const s=Qv(e,t);_e(n,(o,r)=>{const a=i=>{const c=Zv(e,s,r,i.similar,Yv(i)?i.vars:void 0),l=c.isSome();if(i.state.get()!==l){i.state.set(l);const u=c.getOr(t);Yv(i)?i.callback(l,{node:u,format:r,parents:s}):T(i.callbacks,f=>f(l,{node:u,format:r,parents:s}))}};T([o.withSimilar,o.withoutSimilar],a),T(o.withVars,a)})},I$=(e,t,n,s,o,r)=>{const a=t.get();T(n.split(","),i=>{const c=Ae(a,i).getOrThunk(()=>{const u={withSimilar:{state:tt(!1),similar:!0,callbacks:[]},withoutSimilar:{state:tt(!1),similar:!1,callbacks:[]},withVars:[]};return a[i]=u,u}),l=()=>{const u=Qv(e);return Zv(e,u,i,o,r).isSome()};if(rt(r)){const u=o?c.withSimilar:c.withoutSimilar;u.callbacks.push(s),u.callbacks.length===1&&u.state.set(l())}else c.withVars.push({state:tt(l()),similar:o,vars:r,callback:s})}),t.set(a)},L$=(e,t,n)=>{const s=e.get();T(t.split(","),o=>Ae(s,o).each(r=>{s[o]={withSimilar:{...r.withSimilar,callbacks:se(r.withSimilar.callbacks,a=>a!==n)},withoutSimilar:{...r.withoutSimilar,callbacks:se(r.withoutSimilar.callbacks,a=>a!==n)},withVars:se(r.withVars,a=>a.callback!==n)}})),e.set(s)},$$=(e,t,n,s,o,r)=>(I$(e,t,n,s,o,r),{unbind:()=>L$(t,n,s)}),F$=(e,t,n,s)=>{const o=e.formatter.get(t);o&&(ad(e,t,n,s)&&(!("toggle"in o[0])||o[0].toggle)?jv(e,t,n,s):Gv(e,t,n,s))},eE=I.explode,tE=()=>{const e={};return{addFilter:(o,r)=>{T(eE(o),a=>{oe(e,a)||(e[a]={name:a,callbacks:[]}),e[a].callbacks.push(r)})},getFilters:()=>Tl(e),removeFilter:(o,r)=>{T(eE(o),a=>{if(oe(e,a))if(M(r)){const i=e[a],c=se(i.callbacks,l=>l!==r);c.length>0?i.callbacks=c:delete e[a]}else delete e[a]})}}},M$=(e,t)=>{T(t,n=>{e.attr(n,null)})},U$=(e,t,n)=>{e.addNodeFilter("font",s=>{T(s,o=>{const r=t.parse(o.attr("style")),a=o.attr("color"),i=o.attr("face"),c=o.attr("size");a&&(r.color=a),i&&(r["font-family"]=i),c&&di(c).each(l=>{r["font-size"]=n[l-1]}),o.name="span",o.attr("style",t.serialize(r)),M$(o,["color","face","size"])})})},z$=(e,t,n)=>{e.addNodeFilter("strike",s=>{const o=t.type!=="html4";T(s,r=>{if(o)r.name="s";else{const a=n.parse(r.attr("style"));a["text-decoration"]="line-through",r.name="span",r.attr("style",n.serialize(a))}})})},H$=(e,t,n)=>{var s;const o=hu();t.convert_fonts_to_spans&&U$(e,o,I.explode((s=t.font_size_legacy_values)!==null&&s!==void 0?s:"")),z$(e,n,o)},W$=(e,t,n)=>{t.inline_styles&&H$(e,t,n)},V$=e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),j$=e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},q$=e=>{try{return decodeURIComponent(e)}catch{return e}},pd=e=>{const[t,...n]=e.split(","),s=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const r=o[2]===";base64",a=q$(s),i=r?j$(a):a;return m.some({type:o[1],data:i,base64Encoded:r})}else return m.none()},nE=(e,t,n=!0)=>{let s=t;if(n)try{s=atob(t)}catch{return m.none()}const o=new Uint8Array(s.length);for(let r=0;r<o.length;r++)o[r]=s.charCodeAt(r);return m.some(new Blob([o],{type:e}))},K$=e=>new Promise((t,n)=>{pd(e).bind(({type:s,data:o,base64Encoded:r})=>nE(s,o,r)).fold(()=>n("Invalid data URI"),t)}),G$=e=>Xe(e,"blob:")?V$(e):Xe(e,"data:")?K$(e):Promise.reject("Unknown URI format"),sE=e=>new Promise((t,n)=>{const s=new FileReader;s.onloadend=()=>{t(s.result)},s.onerror=()=>{var o;n((o=s.error)===null||o===void 0?void 0:o.message)},s.readAsDataURL(e)});let Y$=0;const X$=e=>"blobid"+Y$++,oE=(e,t,n)=>pd(e).bind(({data:s,type:o,base64Encoded:r})=>{if(t&&!r)return m.none();{const a=r?s:btoa(s);return n(a,o)}}),rE=(e,t,n)=>{const s=e.create(X$(),t,n);return e.add(s),s},aE=(e,t,n=!1)=>oE(t,n,(s,o)=>m.from(e.getByData(s,o)).orThunk(()=>nE(o,s).map(r=>rE(e,r,s)))),Z$=(e,t)=>{const n=()=>Promise.reject("Invalid data URI");if(Xe(t,"blob:")){const s=e.getByUri(t);return M(s)?Promise.resolve(s):G$(t).then(o=>sE(o).then(r=>oE(r,!1,a=>m.some(rE(e,o,a))).getOrThunk(n)))}else return Xe(t,"data:")?aE(e,t).fold(n,s=>Promise.resolve(s)):Promise.reject("Unknown image data format")},Q$=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,J$=e=>m.from(e.match(Q$)).bind(t=>Rr(t,1)).map(t=>Xe(t,"www.")?t.substring(4):t),iE=(e,t)=>{m.from(e.attr("src")).bind(J$).forall(n=>!Ee(t,n))&&e.attr("sandbox","")},hd=(e,t)=>Xe(e,`${t}/`),eF=e=>rt(e)?"iframe":hd(e,"image")?"img":hd(e,"video")?"video":hd(e,"audio")?"audio":"iframe",tF=({type:e,src:t,width:n,height:s}={},o,r)=>{const a=eF(e),i=new xt(a,1);return i.attr(a==="audio"?{src:t}:{src:t,width:n,height:s}),(a==="audio"||a==="video")&&i.attr("controls",""),a==="iframe"&&o&&iE(i,r),i},nF=e=>M(e.attr("data-mce-bogus")),sF=e=>e.attr("src")===Ce.transparentSrc||M(e.attr("data-mce-placeholder")),oF=(e,t)=>{const{blob_cache:n}=t;if(n){const s=o=>{const r=o.attr("src");sF(o)||nF(o)||Ve(r)||aE(n,r,!0).each(a=>{o.attr("src",a.blobUri())})};e.addAttributeFilter("src",o=>T(o,s))}},rF=(e,t)=>{var n,s;const o=e.schema;e.addAttributeFilter("href",c=>{let l=c.length;const u=d=>d.split(" ").filter(h=>h.length>0).concat(["noopener"]).sort().join(" "),f=d=>{const g=d?I.trim(d):"";return/\b(noopener)\b/g.test(g)?g:u(g)};if(!t.allow_unsafe_link_target)for(;l--;){const d=c[l];d.name==="a"&&d.attr("target")==="_blank"&&d.attr("rel",f(d.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",c=>{let l=c.length,u,f,d,g;for(;l--;)if(g=c[l],g.name==="a"&&g.firstChild&&!g.attr("href"))for(d=g.parent,u=g.lastChild;u&&d;)f=u.prev,d.insert(u,g),u=f}),t.fix_list_elements&&e.addNodeFilter("ul,ol",c=>{let l=c.length,u,f;for(;l--;)if(u=c[l],f=u.parent,f&&(f.name==="ul"||f.name==="ol"))if(u.prev&&u.prev.name==="li")u.prev.append(u);else{const d=new xt("li",1);d.attr("style","list-style-type: none"),u.wrap(d)}});const r=o.getValidClasses();t.validate&&r&&e.addAttributeFilter("class",c=>{var l;let u=c.length;for(;u--;){const f=c[u],d=(l=f.attr("class"))!==null&&l!==void 0?l:"",g=I.explode(d," ");let h="";for(let p=0;p<g.length;p++){const b=g[p];let y=!1,v=r["*"];v&&v[b]&&(y=!0),v=r[f.name],!y&&v&&v[b]&&(y=!0),y&&(h&&(h+=" "),h+=b)}h.length||(h=null),f.attr("class",h)}}),oF(e,t);const a=(n=t.sandbox_iframes)!==null&&n!==void 0?n:!1,i=vg((s=t.sandbox_iframes_exclusions)!==null&&s!==void 0?s:[]);t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",c=>T(c,l=>{l.replace(tF({type:l.attr("type"),src:l.name==="object"?l.attr("data"):l.attr("src"),width:l.attr("width"),height:l.attr("height")},a,i))})),a&&e.addNodeFilter("iframe",c=>T(c,l=>iE(l,i)))};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:cE,setPrototypeOf:lE,isFrozen:aF,getPrototypeOf:iF,getOwnPropertyDescriptor:cF}=Object;let{freeze:Ut,seal:gn,create:uE}=Object,{apply:bd,construct:Cd}=typeof Reflect<"u"&&Reflect;Ut||(Ut=function(t){return t}),gn||(gn=function(t){return t}),bd||(bd=function(t,n,s){return t.apply(n,s)}),Cd||(Cd=function(t,n){return new t(...n)});const wc=rn(Array.prototype.forEach),fE=rn(Array.prototype.pop),Da=rn(Array.prototype.push),kc=rn(String.prototype.toLowerCase),yd=rn(String.prototype.toString),dE=rn(String.prototype.match),Oa=rn(String.prototype.replace),lF=rn(String.prototype.indexOf),uF=rn(String.prototype.trim),Rn=rn(Object.prototype.hasOwnProperty),zt=rn(RegExp.prototype.test),Ba=fF(TypeError);function rn(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return bd(e,t,s)}}function fF(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return Cd(e,n)}}function ke(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kc;lE&&lE(e,null);let s=t.length;for(;s--;){let o=t[s];if(typeof o=="string"){const r=n(o);r!==o&&(aF(t)||(t[s]=r),o=r)}e[o]=!0}return e}function dF(e){for(let t=0;t<e.length;t++)Rn(e,t)||(e[t]=null);return e}function ho(e){const t=uE(null);for(const[n,s]of cE(e))Rn(e,n)&&(Array.isArray(s)?t[n]=dF(s):s&&typeof s=="object"&&s.constructor===Object?t[n]=ho(s):t[n]=s);return t}function Ia(e,t){for(;e!==null;){const s=cF(e,t);if(s){if(s.get)return rn(s.get);if(typeof s.value=="function")return rn(s.value)}e=iF(e)}function n(){return null}return n}const mE=Ut(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),vd=Ut(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ed=Ut(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),mF=Ut(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Sd=Ut(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),gF=Ut(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),gE=Ut(["#text"]),pE=Ut(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),wd=Ut(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),hE=Ut(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xc=Ut(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),pF=gn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),hF=gn(/<%[\w\W]*|[\w\W]*%>/gm),bF=gn(/\${[\w\W]*}/gm),CF=gn(/^data-[\-\w.\u00B7-\uFFFF]/),yF=gn(/^aria-[\-\w]+$/),bE=gn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),vF=gn(/^(?:\w+script|data):/i),EF=gn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),CE=gn(/^html$/i),SF=gn(/^[a-z][.\w]*(-[.\w]+)+$/i);var yE=Object.freeze({__proto__:null,MUSTACHE_EXPR:pF,ERB_EXPR:hF,TMPLIT_EXPR:bF,DATA_ATTR:CF,ARIA_ATTR:yF,IS_ALLOWED_URI:bE,IS_SCRIPT_OR_DATA:vF,ATTR_WHITESPACE:EF,DOCTYPE_NAME:CE,CUSTOM_ELEMENT:SF});const La={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},wF=function(){return typeof window>"u"?null:window},kF=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let s=null;const o="data-tt-policy-suffix";n&&n.hasAttribute(o)&&(s=n.getAttribute(o));const r="dompurify"+(s?"#"+s:"");try{return t.createPolicy(r,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function vE(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wF();const t=fe=>vE(fe);if(t.version="3.1.7",t.removed=[],!e||!e.document||e.document.nodeType!==La.document)return t.isSupported=!1,t;let{document:n}=e;const s=n,o=s.currentScript,{DocumentFragment:r,HTMLTemplateElement:a,Node:i,Element:c,NodeFilter:l,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:d,trustedTypes:g}=e,h=c.prototype,p=Ia(h,"cloneNode"),b=Ia(h,"remove"),y=Ia(h,"nextSibling"),v=Ia(h,"childNodes"),E=Ia(h,"parentNode");if(typeof a=="function"){const fe=n.createElement("template");fe.content&&fe.content.ownerDocument&&(n=fe.content.ownerDocument)}let S,R="";const{implementation:D,createNodeIterator:z,createDocumentFragment:A,getElementsByTagName:x}=n,{importNode:P}=s;let W={};t.isSupported=typeof cE=="function"&&typeof E=="function"&&D&&D.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:X,ERB_EXPR:ae,TMPLIT_EXPR:ie,DATA_ATTR:be,ARIA_ATTR:ye,IS_SCRIPT_OR_DATA:Oe,ATTR_WHITESPACE:st,CUSTOM_ELEMENT:Ke}=yE;let{IS_ALLOWED_URI:L}=yE,K=null;const me=ke({},[...mE,...vd,...Ed,...Sd,...gE]);let U=null;const J=ke({},[...pE,...wd,...hE,...xc]);let te=Object.seal(uE(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),F=null,ce=null,ue=!0,Ue=!0,Se=!1,lt=!0,Bt=!1,Pn=!0,ft=!1,Yt=!1,hn=!1,dt=!1,Ht=!1,G=!1,de=!0,Be=!1;const We="user-content-";let Ge=!0,ze=!1,Te={},Pe=null;const Nt=ke({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let bn=null;const Qn=ke({},["audio","video","img","source","image","track"]);let Dn=null;const yr=ke({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vr="http://www.w3.org/1998/Math/MathML",ko="http://www.w3.org/2000/svg",Cn="http://www.w3.org/1999/xhtml";let $s=Cn,si=!1,Er=null;const j_=ke({},[vr,ko,Cn],yd);let Sr=null;const q_=["application/xhtml+xml","text/html"],K_="text/html";let mt=null,un=null;const Sl=n.createElement("form"),w=function(_){return _ instanceof RegExp||_ instanceof Function},k=function(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(un&&un===_)){if((!_||typeof _!="object")&&(_={}),_=ho(_),Sr=q_.indexOf(_.PARSER_MEDIA_TYPE)===-1?K_:_.PARSER_MEDIA_TYPE,mt=Sr==="application/xhtml+xml"?yd:kc,K=Rn(_,"ALLOWED_TAGS")?ke({},_.ALLOWED_TAGS,mt):me,U=Rn(_,"ALLOWED_ATTR")?ke({},_.ALLOWED_ATTR,mt):J,Er=Rn(_,"ALLOWED_NAMESPACES")?ke({},_.ALLOWED_NAMESPACES,yd):j_,Dn=Rn(_,"ADD_URI_SAFE_ATTR")?ke(ho(yr),_.ADD_URI_SAFE_ATTR,mt):yr,bn=Rn(_,"ADD_DATA_URI_TAGS")?ke(ho(Qn),_.ADD_DATA_URI_TAGS,mt):Qn,Pe=Rn(_,"FORBID_CONTENTS")?ke({},_.FORBID_CONTENTS,mt):Nt,F=Rn(_,"FORBID_TAGS")?ke({},_.FORBID_TAGS,mt):{},ce=Rn(_,"FORBID_ATTR")?ke({},_.FORBID_ATTR,mt):{},Te=Rn(_,"USE_PROFILES")?_.USE_PROFILES:!1,ue=_.ALLOW_ARIA_ATTR!==!1,Ue=_.ALLOW_DATA_ATTR!==!1,Se=_.ALLOW_UNKNOWN_PROTOCOLS||!1,lt=_.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Bt=_.SAFE_FOR_TEMPLATES||!1,Pn=_.SAFE_FOR_XML!==!1,ft=_.WHOLE_DOCUMENT||!1,dt=_.RETURN_DOM||!1,Ht=_.RETURN_DOM_FRAGMENT||!1,G=_.RETURN_TRUSTED_TYPE||!1,hn=_.FORCE_BODY||!1,de=_.SANITIZE_DOM!==!1,Be=_.SANITIZE_NAMED_PROPS||!1,Ge=_.KEEP_CONTENT!==!1,ze=_.IN_PLACE||!1,L=_.ALLOWED_URI_REGEXP||bE,$s=_.NAMESPACE||Cn,te=_.CUSTOM_ELEMENT_HANDLING||{},_.CUSTOM_ELEMENT_HANDLING&&w(_.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(te.tagNameCheck=_.CUSTOM_ELEMENT_HANDLING.tagNameCheck),_.CUSTOM_ELEMENT_HANDLING&&w(_.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(te.attributeNameCheck=_.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),_.CUSTOM_ELEMENT_HANDLING&&typeof _.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(te.allowCustomizedBuiltInElements=_.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Bt&&(Ue=!1),Ht&&(dt=!0),Te&&(K=ke({},gE),U=[],Te.html===!0&&(ke(K,mE),ke(U,pE)),Te.svg===!0&&(ke(K,vd),ke(U,wd),ke(U,xc)),Te.svgFilters===!0&&(ke(K,Ed),ke(U,wd),ke(U,xc)),Te.mathMl===!0&&(ke(K,Sd),ke(U,hE),ke(U,xc))),_.ADD_TAGS&&(K===me&&(K=ho(K)),ke(K,_.ADD_TAGS,mt)),_.ADD_ATTR&&(U===J&&(U=ho(U)),ke(U,_.ADD_ATTR,mt)),_.ADD_URI_SAFE_ATTR&&ke(Dn,_.ADD_URI_SAFE_ATTR,mt),_.FORBID_CONTENTS&&(Pe===Nt&&(Pe=ho(Pe)),ke(Pe,_.FORBID_CONTENTS,mt)),Ge&&(K["#text"]=!0),ft&&ke(K,["html","head","body"]),K.table&&(ke(K,["tbody"]),delete F.tbody),_.TRUSTED_TYPES_POLICY){if(typeof _.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ba('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof _.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ba('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=_.TRUSTED_TYPES_POLICY,R=S.createHTML("")}else S===void 0&&(S=kF(g,o)),S!==null&&typeof R=="string"&&(R=S.createHTML(""));Ut&&Ut(_),un=_}},$=ke({},["mi","mo","mn","ms","mtext"]),B=ke({},["annotation-xml"]),ee=ke({},["title","style","font","a","script"]),ge=ke({},[...vd,...Ed,...mF]),Ie=ke({},[...Sd,...gF]),On=function(_){let Z=E(_);(!Z||!Z.tagName)&&(Z={namespaceURI:$s,tagName:"template"});const re=kc(_.tagName),Me=kc(Z.tagName);return Er[_.namespaceURI]?_.namespaceURI===ko?Z.namespaceURI===Cn?re==="svg":Z.namespaceURI===vr?re==="svg"&&(Me==="annotation-xml"||$[Me]):!!ge[re]:_.namespaceURI===vr?Z.namespaceURI===Cn?re==="math":Z.namespaceURI===ko?re==="math"&&B[Me]:!!Ie[re]:_.namespaceURI===Cn?Z.namespaceURI===ko&&!B[Me]||Z.namespaceURI===vr&&!$[Me]?!1:!Ie[re]&&(ee[re]||!ge[re]):!!(Sr==="application/xhtml+xml"&&Er[_.namespaceURI]):!1},yn=function(_){Da(t.removed,{element:_});try{E(_).removeChild(_)}catch{b(_)}},oi=function(_,Z){try{Da(t.removed,{attribute:Z.getAttributeNode(_),from:Z})}catch{Da(t.removed,{attribute:null,from:Z})}if(Z.removeAttribute(_),_==="is"&&!U[_])if(dt||Ht)try{yn(Z)}catch{}else try{Z.setAttribute(_,"")}catch{}},G_=function(_){let Z=null,re=null;if(hn)_="<remove></remove>"+_;else{const Et=dE(_,/^[\r\n\t ]+/);re=Et&&Et[0]}Sr==="application/xhtml+xml"&&$s===Cn&&(_='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+_+"</body></html>");const Me=S?S.createHTML(_):_;if($s===Cn)try{Z=new d().parseFromString(Me,Sr)}catch{}if(!Z||!Z.documentElement){Z=D.createDocument($s,"template",null);try{Z.documentElement.innerHTML=si?R:Me}catch{}}const It=Z.body||Z.documentElement;return _&&re&&It.insertBefore(n.createTextNode(re),It.childNodes[0]||null),$s===Cn?x.call(Z,ft?"html":"body")[0]:ft?Z.documentElement:It},Y_=function(_){return z.call(_.ownerDocument||_,_,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null)},X_=function(_){return _ instanceof f&&(typeof _.nodeName!="string"||typeof _.textContent!="string"||typeof _.removeChild!="function"||!(_.attributes instanceof u)||typeof _.removeAttribute!="function"||typeof _.setAttribute!="function"||typeof _.namespaceURI!="string"||typeof _.insertBefore!="function"||typeof _.hasChildNodes!="function")},Z_=function(_){return typeof i=="function"&&_ instanceof i},hs=function(_,Z,re){W[_]&&wc(W[_],Me=>{Me.call(t,Z,re,un)})},Q_=function(_){let Z=null;if(hs("beforeSanitizeElements",_,null),X_(_))return yn(_),!0;const re=mt(_.nodeName);if(hs("uponSanitizeElement",_,{tagName:re,allowedTags:K}),_.hasChildNodes()&&!Z_(_.firstElementChild)&&zt(/<[/\w]/g,_.innerHTML)&&zt(/<[/\w]/g,_.textContent)||_.nodeType===La.progressingInstruction||Pn&&_.nodeType===La.comment&&zt(/<[/\w]/g,_.data))return yn(_),!0;if(!K[re]||F[re]){if(!F[re]&&eN(re)&&(te.tagNameCheck instanceof RegExp&&zt(te.tagNameCheck,re)||te.tagNameCheck instanceof Function&&te.tagNameCheck(re)))return!1;if(Ge&&!Pe[re]){const Me=E(_)||_.parentNode,It=v(_)||_.childNodes;if(It&&Me){const Et=It.length;for(let Xt=Et-1;Xt>=0;--Xt){const Jn=p(It[Xt],!0);Jn.__removalCount=(_.__removalCount||0)+1,Me.insertBefore(Jn,y(_))}}}return yn(_),!0}return _ instanceof c&&!On(_)||(re==="noscript"||re==="noembed"||re==="noframes")&&zt(/<\/no(script|embed|frames)/i,_.innerHTML)?(yn(_),!0):(Bt&&_.nodeType===La.text&&(Z=_.textContent,wc([X,ae,ie],Me=>{Z=Oa(Z,Me," ")}),_.textContent!==Z&&(Da(t.removed,{element:_.cloneNode()}),_.textContent=Z)),hs("afterSanitizeElements",_,null),!1)},J_=function(_,Z,re){if(de&&(Z==="id"||Z==="name")&&(re in n||re in Sl))return!1;if(!(Ue&&!ce[Z]&&zt(be,Z))){if(!(ue&&zt(ye,Z))){if(!U[Z]||ce[Z]){if(!(eN(_)&&(te.tagNameCheck instanceof RegExp&&zt(te.tagNameCheck,_)||te.tagNameCheck instanceof Function&&te.tagNameCheck(_))&&(te.attributeNameCheck instanceof RegExp&&zt(te.attributeNameCheck,Z)||te.attributeNameCheck instanceof Function&&te.attributeNameCheck(Z))||Z==="is"&&te.allowCustomizedBuiltInElements&&(te.tagNameCheck instanceof RegExp&&zt(te.tagNameCheck,re)||te.tagNameCheck instanceof Function&&te.tagNameCheck(re))))return!1}else if(!Dn[Z]){if(!zt(L,Oa(re,st,""))){if(!((Z==="src"||Z==="xlink:href"||Z==="href")&&_!=="script"&&lF(re,"data:")===0&&bn[_])){if(!(Se&&!zt(Oe,Oa(re,st,"")))){if(re)return!1}}}}}}return!0},eN=function(_){return _!=="annotation-xml"&&dE(_,Ke)},tN=function(_){hs("beforeSanitizeAttributes",_,null);const{attributes:Z}=_;if(!Z)return;const re={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U};let Me=Z.length;for(;Me--;){const It=Z[Me],{name:Et,namespaceURI:Xt,value:Jn}=It,ri=mt(Et);let At=Et==="value"?Jn:uF(Jn);const G9=At;if(re.attrName=ri,re.attrValue=At,re.keepAttr=!0,re.forceKeepAttr=void 0,hs("uponSanitizeAttribute",_,re),At=re.attrValue,re.forceKeepAttr)continue;if(!re.keepAttr){oi(Et,_);continue}if(!lt&&zt(/\/>/i,At)){oi(Et,_);continue}Bt&&wc([X,ae,ie],sN=>{At=Oa(At,sN," ")});const nN=mt(_.nodeName);if(!J_(nN,ri,At)){oi(Et,_);continue}if(Be&&(ri==="id"||ri==="name")&&(oi(Et,_),At=We+At),Pn&&zt(/((--!?|])>)|<\/(style|title)/i,At)){oi(Et,_);continue}if(S&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!Xt)switch(g.getAttributeType(nN,ri)){case"TrustedHTML":{At=S.createHTML(At);break}case"TrustedScriptURL":{At=S.createScriptURL(At);break}}if(At!==G9)try{Xt?_.setAttributeNS(Xt,Et,At):_.setAttribute(Et,At),X_(_)?yn(_):fE(t.removed)}catch{}}hs("afterSanitizeAttributes",_,null)},K9=function fe(_){let Z=null;const re=Y_(_);for(hs("beforeSanitizeShadowDOM",_,null);Z=re.nextNode();)hs("uponSanitizeShadowNode",Z,null),!Q_(Z)&&(Z.content instanceof r&&fe(Z.content),tN(Z));hs("afterSanitizeShadowDOM",_,null)};return t.sanitize=function(fe){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=null,re=null,Me=null,It=null;if(si=!fe,si&&(fe="<!-->"),typeof fe!="string"&&!Z_(fe))if(typeof fe.toString=="function"){if(fe=fe.toString(),typeof fe!="string")throw Ba("dirty is not a string, aborting")}else throw Ba("toString is not a function");if(!t.isSupported)return fe;if(Yt||k(_),t.removed=[],typeof fe=="string"&&(ze=!1),ze){if(fe.nodeName){const Jn=mt(fe.nodeName);if(!K[Jn]||F[Jn])throw Ba("root node is forbidden and cannot be sanitized in-place")}}else if(fe instanceof i)Z=G_("<!---->"),re=Z.ownerDocument.importNode(fe,!0),re.nodeType===La.element&&re.nodeName==="BODY"||re.nodeName==="HTML"?Z=re:Z.appendChild(re);else{if(!dt&&!Bt&&!ft&&fe.indexOf("<")===-1)return S&&G?S.createHTML(fe):fe;if(Z=G_(fe),!Z)return dt?null:G?R:""}Z&&hn&&yn(Z.firstChild);const Et=Y_(ze?fe:Z);for(;Me=Et.nextNode();)Q_(Me)||(Me.content instanceof r&&K9(Me.content),tN(Me));if(ze)return fe;if(dt){if(Ht)for(It=A.call(Z.ownerDocument);Z.firstChild;)It.appendChild(Z.firstChild);else It=Z;return(U.shadowroot||U.shadowrootmode)&&(It=P.call(s,It,!0)),It}let Xt=ft?Z.outerHTML:Z.innerHTML;return ft&&K["!doctype"]&&Z.ownerDocument&&Z.ownerDocument.doctype&&Z.ownerDocument.doctype.name&&zt(CE,Z.ownerDocument.doctype.name)&&(Xt="<!DOCTYPE "+Z.ownerDocument.doctype.name+`>
`+Xt),Bt&&wc([X,ae,ie],Jn=>{Xt=Oa(Xt,Jn," ")}),S&&G?S.createHTML(Xt):Xt},t.setConfig=function(){let fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};k(fe),Yt=!0},t.clearConfig=function(){un=null,Yt=!1},t.isValidAttribute=function(fe,_,Z){un||k({});const re=mt(fe),Me=mt(_);return J_(re,Me,Z)},t.addHook=function(fe,_){typeof _=="function"&&(W[fe]=W[fe]||[],Da(W[fe],_))},t.removeHook=function(fe){if(W[fe])return fE(W[fe])},t.removeHooks=function(fe){W[fe]&&(W[fe]=[])},t.removeAllHooks=function(){W={}},t}var kd=vE();const EE=I.each,xF=I.trim,_F=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],NF={ftp:21,http:80,https:443,mailto:25},AF=["img","video"],RF=(e,t)=>M(e)?!e:M(t)?!Ee(AF,t):!0,TF=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},SE=(e,t,n)=>{const s=TF(t).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(s)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(s)?RF(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)};class pn{static parseDataUri(t){let n;const s=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(s[0]);return o&&(n=o[1]),{type:n,data:s[1]}}static isDomSafe(t,n,s={}){if(s.allow_script_urls)return!0;{const o=Xs.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!SE(s,o,n)}}static getDocumentBaseUrl(t){var n;let s;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?s=(n=t.href)!==null&&n!==void 0?n:"":s=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/")),s}constructor(t,n={}){this.path="",this.directory="",t=xF(t),this.settings=n;const s=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){o.source=t;return}const r=t.indexOf("//")===0;if(t.indexOf("/")===0&&!r&&(t=(s&&s.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const i=s?s.path:new pn(document.location.href).directory;if((s==null?void 0:s.protocol)==="")t="//mce_host"+o.toAbsPath(i,t);else{const c=/([^#?]*)([#?]?.*)/.exec(t);c&&(t=(s&&s.protocol||"http")+"://mce_host"+o.toAbsPath(i,c[1])+c[2])}}t=t.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);a&&EE(_F,(i,c)=>{let l=a[c];l&&(l=l.replace(/\(mce_at\)/g,"@@")),o[i]=l}),s&&(o.protocol||(o.protocol=s.protocol),o.userInfo||(o.userInfo=s.userInfo),!o.port&&o.host==="mce_host"&&(o.port=s.port),(!o.host||o.host==="mce_host")&&(o.host=s.host),o.source=""),r&&(o.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const n=new pn(t,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();const s=this.getURI(),o=n.getURI();if(s===o||s.charAt(s.length-1)==="/"&&s.substr(0,s.length-1)===o)return s;let r=this.toRelPath(this.path,n.path);return n.query&&(r+="?"+n.query),n.anchor&&(r+="#"+n.anchor),r}toAbsolute(t,n){const s=new pn(t,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?NF[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let s=0,o="",r,a;const i=t.substring(0,t.lastIndexOf("/")).split("/"),c=n.split("/");if(i.length>=c.length){for(r=0,a=i.length;r<a;r++)if(r>=c.length||i[r]!==c[r]){s=r+1;break}}if(i.length<c.length){for(r=0,a=c.length;r<a;r++)if(r>=i.length||i[r]!==c[r]){s=r+1;break}}if(s===1)return n;for(r=0,a=i.length-(s-1);r<a;r++)o+="../";for(r=s-1,a=c.length;r<a;r++)r!==s-1?o+="/"+c[r]:o+=c[r];return o}toAbsPath(t,n){let s=0;const o=/\/$/.test(n)?"/":"",r=t.split("/"),a=n.split("/"),i=[];EE(r,f=>{f&&i.push(f)});const c=[];for(let f=a.length-1;f>=0;f--)if(!(a[f].length===0||a[f]===".")){if(a[f]===".."){s++;continue}if(s>0){s--;continue}c.push(a[f])}const l=i.length-s;let u;return l<=0?u=Ar(c).join("/"):u=i.slice(0,l).join("/")+"/"+Ar(c).join("/"),u.indexOf("/")!==0&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u}getURI(t=!1){let n;return(!this.source||t)&&(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const PF=I.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),xd="data-mce-type";let wE=0;const kE=(e,t,n,s,o)=>{var r,a,i,c;const l=t.validate,u=n.getSpecialElements();e.nodeType===mi&&!t.allow_conditional_comments&&/^\[if/i.test((r=e.nodeValue)!==null&&r!==void 0?r:"")&&(e.nodeValue=" "+e.nodeValue);const f=(a=o==null?void 0:o.tagName)!==null&&a!==void 0?a:e.nodeName.toLowerCase();if(s!=="html"&&n.isValid(s)){M(o)&&(o.allowedTags[f]=!0);return}if(e.nodeType!==Ir||f==="body")return;const d=C.fromDom(e),g=Lr(d,xd),h=jt(d,"data-mce-bogus");if(!g&&Q(h)){h==="all"?Re(d):Es(d);return}const p=n.getElementRule(f);if(l&&!p){oe(u,f)?Re(d):Es(d);return}else M(o)&&(o.allowedTags[f]=!0);if(l&&p&&!g){if(T((i=p.attributesForced)!==null&&i!==void 0?i:[],b=>{at(d,b.name,b.value==="{$uid}"?`mce_${wE++}`:b.value)}),T((c=p.attributesDefault)!==null&&c!==void 0?c:[],b=>{Lr(d,b.name)||at(d,b.name,b.value==="{$uid}"?`mce_${wE++}`:b.value)}),p.attributesRequired&&!Le(p.attributesRequired,b=>Lr(d,b))){Es(d);return}if(p.removeEmptyAttrs&&r0(d)){Es(d);return}p.outputName&&p.outputName!==f&&wR(d,p.outputName)}},DF=(e,t,n,s,o)=>{const r=e.tagName.toLowerCase(),{attrName:a,attrValue:i}=o;o.keepAttr=xE(t,n,s,r,a,i),o.keepAttr?(o.allowedAttributes[a]=!0,NE(a,n)&&(o.attrValue=a),t.allow_svg_data_urls&&Xe(i,"data:image/svg+xml")&&(o.forceKeepAttr=!0)):_E(e,a)&&(o.forceKeepAttr=!0)},xE=(e,t,n,s,o,r)=>n!=="html"&&!Ks(s)?!0:!(o in PF&&SE(e,r,s))&&(!e.validate||t.isValid(s,o)||Xe(o,"data-")||Xe(o,"aria-")),_E=(e,t)=>e.hasAttribute(xd)&&(t==="id"||t==="class"||t==="style"),NE=(e,t)=>e in t.getBoolAttrs(),OF=(e,t,n,s)=>{const{attributes:o}=e;for(let r=o.length-1;r>=0;r--){const a=o[r],i=a.name,c=a.value;!xE(t,n,s,e.tagName.toLowerCase(),i,c)&&!_E(e,i)?e.removeAttribute(i):NE(i,n)&&e.setAttribute(i,i)}},BF=(e,t,n)=>{const s=kd();return s.addHook("uponSanitizeElement",(o,r)=>{kE(o,e,t,n.track(o),r)}),s.addHook("uponSanitizeAttribute",(o,r)=>{DF(o,e,t,n.current(),r)}),s},IF=(e,t)=>{const s={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return s.PARSER_MEDIA_TYPE=t,e.allow_script_urls?s.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(s.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),s},LF=e=>{const t=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(s=>`xlink:${s}`),n={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:t};kd().sanitize(e,n)},$F=(e,t)=>{const n={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},s=kd();s.addHook("uponSanitizeElement",(o,r)=>{var a;const i=(a=r.tagName)!==null&&a!==void 0?a:o.nodeName.toLowerCase(),c=t.allow_mathml_annotation_encodings;if(i==="annotation"&&Fe(c)&&c.length>0){const l=o.getAttribute("encoding");Q(l)&&Ee(c,l)&&(r.allowedTags[i]=!0)}}),s.sanitize(e,n)},FF=e=>t=>{const n=Fp(t);if(n==="svg")LF(t);else if(n==="math")$F(t,e);else throw new Error("Not a namespace element")},MF=(e,t)=>{const n=fA();if(e.sanitize){const s=BF(e,t,n);return{sanitizeHtmlElement:(r,a)=>{s.sanitize(r,IF(e,a)),s.removed=[],n.reset()},sanitizeNamespaceElement:FF(e)}}else return{sanitizeHtmlElement:(r,a)=>{const i=document.createNodeIterator(r,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let c;for(;c=i.nextNode();){const l=n.track(c);kE(c,e,t,l),Y(c)&&OF(c,e,t,l)}n.reset()},sanitizeNamespaceElement:le}},AE=I.makeMap,RE=I.extend,TE=(e,t,n,s)=>{const o=e.name,r=o in n&&o!=="title"&&o!=="textarea"&&o!=="noscript",a=t.childNodes;for(let i=0,c=a.length;i<c;i++){const l=a[i],u=new xt(l.nodeName.toLowerCase(),l.nodeType);if(Y(l)){const f=l.attributes;for(let d=0,g=f.length;d<g;d++){const h=f[d];u.attr(h.name,h.value)}Ks(u.name)&&(s(l),u.value=l.innerHTML)}else O(l)?(u.value=l.data,r&&(u.raw=!0)):(Ss(l)||X0(l)||Z0(l))&&(u.value=l.data);Ks(u.name)||TE(u,l,n,s),e.append(u)}},UF=(e,t,n)=>{const s=[];for(let o=e,r=o;o;r=o,o=o.walk()){const a=o;T(t,i=>i(a)),Ve(a.parent)&&a!==e?o=r:s.push(a)}for(let o=s.length-1;o>=0;o--){const r=s[o];T(n,a=>a(r))}},zF=(e,t,n,s)=>{const o=n.validate,r=t.getNonEmptyElements(),a=t.getWhitespaceElements(),i=RE(AE("script,style,head,html,body,title,meta,param"),t.getBlockElements()),c=oh(t),l=/[ \t\r\n]+/g,u=/^[ \t\r\n]+/,f=/[ \t\r\n]+$/,d=v=>{let E=v.parent;for(;M(E);){if(E.name in a)return!0;E=E.parent}return!1},g=v=>{let E=v;for(;M(E);){if(E.name in c)return Aa(t,r,a,E);E=E.parent}return!1},h=v=>v.name in i||cu(t,v)||Ks(v.name)&&v.parent===e,p=(v,E)=>{const S=E?v.prev:v.next;return M(S)||Ve(v.parent)?!1:h(v.parent)&&(v.parent!==e||s.isRootContent===!0)};return[v=>{var E;if(v.type===3&&!d(v)){let S=(E=v.value)!==null&&E!==void 0?E:"";S=S.replace(l," "),(iL(v.prev,h)||p(v,!0))&&(S=S.replace(u,"")),S.length===0||S===" "&&v.prev&&v.prev.type===mi&&v.next&&v.next.type===mi?v.remove():v.value=S}},v=>{var E;if(v.type===1){const S=t.getElementRule(v.name);if(o&&S){const R=Aa(t,r,a,v);S.paddInEmptyBlock&&R&&g(v)?Yf(n,s,h,v):S.removeEmpty&&R?h(v)?v.remove():v.unwrap():S.paddEmpty&&(R||rL(v))&&Yf(n,s,h,v)}}else if(v.type===3&&!d(v)){let S=(E=v.value)!==null&&E!==void 0?E:"";(v.next&&h(v.next)||p(v,!1))&&(S=S.replace(f,"")),S.length===0?v.remove():v.value=S}}]},HF=(e,t)=>{var n;const s=(n=t.forced_root_block)!==null&&n!==void 0?n:e.forced_root_block;return s===!1?"":s===!0?"p":s},or=(e={},t=ws())=>{const n=tE(),s=tE(),o={validate:!0,root_name:"body",sanitize:!0,...e},r=new DOMParser,a=MF(o,t),i=(E,S,R="html")=>{const D=R==="xhtml"?"application/xhtml+xml":"text/html",z=oe(t.getSpecialElements(),S.toLowerCase()),A=z?`<${S}>${E}</${S}>`:E,x=()=>R==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${A}</body></html>`:/^[\s]*<head/i.test(E)||/^[\s]*<html/i.test(E)||/^[\s]*<!DOCTYPE/i.test(E)?`<html>${A}</html>`:`<body>${A}</body>`,P=r.parseFromString(x(),D).body;return a.sanitizeHtmlElement(P,D),z?P.firstChild:P},c=n.addFilter,l=n.getFilters,u=n.removeFilter,f=s.addFilter,d=s.getFilters,g=s.removeFilter,h=(E,S)=>{Qf(t,E)&&S.push(E)},p=(E,S)=>{const R=Q(S.attr(xd)),D=S.type===1&&!oe(E,S.name)&&!cu(t,S)&&!Ks(S.name);return S.type===3||D&&!R},b=(E,S)=>{const R=RE(AE("script,style,head,html,body,title,meta,param"),t.getBlockElements()),D=/^[ \t\r\n]+/,z=/[ \t\r\n]+$/;let A=E.firstChild,x=null;const P=W=>{var X,ae;W&&(A=W.firstChild,A&&A.type===3&&(A.value=(X=A.value)===null||X===void 0?void 0:X.replace(D,"")),A=W.lastChild,A&&A.type===3&&(A.value=(ae=A.value)===null||ae===void 0?void 0:ae.replace(z,"")))};if(t.isValidChild(E.name,S.toLowerCase())){for(;A;){const W=A.next;p(R,A)?(x||(x=new xt(S,1),x.attr(o.forced_root_block_attrs),E.insert(x,A)),x.append(A)):(P(x),x=null),A=W}P(x)}},v={schema:t,addAttributeFilter:f,getAttributeFilters:d,removeAttributeFilter:g,addNodeFilter:c,getNodeFilters:l,removeNodeFilter:u,parse:(E,S={})=>{var R;const D=o.validate,z=(R=S.context)!==null&&R!==void 0?R:o.root_name,A=i(E,z,S.format);ou(t,A);const x=new xt(z,11);TE(x,A,t.getSpecialElements(),a.sanitizeNamespaceElement),A.innerHTML="";const[P,W]=zF(x,t,o,S),X=[],ae=D?Oe=>h(Oe,X):le,ie={nodes:{},attributes:{}},be=Oe=>cv(l(),d(),Oe,ie);if(UF(x,[P,be],[W,ae]),X.reverse(),D&&X.length>0)if(S.context){const{pass:Oe,fail:st}=xo(X,Ke=>Ke.parent===x);Zf(st,t,x,be),S.invalid=Oe.length>0}else Zf(X,t,x,be);const ye=HF(o,S);return ye&&(x.name==="body"||S.isRootContent)&&b(x,ye),S.invalid||lv(ie,S),x}};return rF(v,o),W$(v,o,t),v},WF=e=>yc(e)?Ts({validate:!1}).serialize(e):e,PE=(e,t,n)=>{const s=WF(e),o=t(s);if(o.isDefaultPrevented())return o;if(yc(e))if(o.content!==s){const r=or({validate:!1,forced_root_block:!1,...n}).parse(o.content,{context:e.name});return{...o,content:r}}else return{...o,content:e};else return o},DE=e=>({sanitize:Rb(e),sandbox_iframes:Pb(e),sandbox_iframes_exclusions:Wu(e)}),OE=(e,t)=>{if(t.no_events)return Pt.value(t);{const n=WT(e,t);return n.isDefaultPrevented()?Pt.error(ub(e,{content:"",...n}).content):Pt.value(n)}},BE=(e,t,n)=>n.no_events?t:PE(t,o=>ub(e,{...n,content:o}),DE(e)).content,_d=(e,t)=>{if(t.no_events)return Pt.value(t);{const n=PE(t.content,s=>HT(e,{...t,content:s}),DE(e));return n.isDefaultPrevented()?(lb(e,n),Pt.error(void 0)):Pt.value(n)}},Nd=(e,t,n)=>{n.no_events||lb(e,{...n,content:t})},Ad=(e,t,n)=>({element:e,width:t,rows:n}),IE=(e,t)=>({element:e,cells:t}),VF=(e,t)=>({x:e,y:t}),LE=(e,t)=>ss(e,t).bind(di).getOr(1),jF=(e,t,n,s,o)=>{const r=LE(o,"rowspan"),a=LE(o,"colspan"),i=e.rows;for(let c=n;c<n+r;c++){i[c]||(i[c]=IE(wh(s),[]));for(let l=t;l<t+a;l++){const u=i[c].cells;u[l]=c===n&&l===t?o:Js(o)}}},qF=(e,t,n)=>{const s=e.rows;return!!(s[n]?s[n].cells:[])[t]},KF=(e,t,n)=>{for(;qF(e,t,n);)t++;return t},$E=e=>Lt(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),FE=(e,t)=>{const n=e.rows;for(let s=0;s<n.length;s++){const o=n[s].cells;for(let r=0;r<o.length;r++)if(ve(o[r],t))return m.some(VF(r,s))}return m.none()},ME=(e,t,n,s,o)=>{const r=[],a=e.rows;for(let i=n;i<=o;i++){const c=a[i].cells,l=t<s?c.slice(t,s+1):c.slice(s,t+1);r.push(IE(a[i].element,l))}return r},GF=(e,t,n)=>{const s=t.x,o=t.y,r=n.x,a=n.y,i=o<a?ME(e,s,o,r,a):ME(e,s,a,r,o);return Ad(e.element,$E(i),i)},YF=(e,t)=>{const n=Js(e.element),s=C.fromTag("tbody");return Vs(s,t),je(n,s),n},XF=e=>pe(e.rows,t=>{const n=pe(t.cells,o=>{const r=wh(o);return it(r,"colspan"),it(r,"rowspan"),r}),s=Js(t.element);return Vs(s,n),s}),ZF=e=>{const t=Ad(Js(e),0,[]);return T(bt(e,"tr"),(n,s)=>{T(bt(n,"td,th"),(o,r)=>{jF(t,KF(t,r,s),s,n,o)})}),Ad(t.element,$E(t.rows),t.rows)},QF=e=>YF(e,XF(e)),JF=(e,t,n)=>FE(e,t).bind(s=>FE(e,n).map(o=>GF(e,s,o))),eM=e=>Ye(e,t=>he(t)==="ul"||he(t)==="ol"),tM=(e,t)=>Ye(e,n=>he(n)==="li"&&tf(n,t)).fold(H([]),n=>eM(e).map(s=>{const o=C.fromTag(he(s)),r=Pr(ql(s),(a,i)=>Xe(i,"list-style"));return vi(o,r),[C.fromTag("li"),o]}).getOr([])),nM=(e,t)=>{const n=Lt(t,(s,o)=>(je(o,s),o),e);return t.length>0?wf([n]):n},sM=e=>zo(e)?wn(e).filter(ku).fold(H([]),t=>[e,t]):ku(e)?[e]:[],oM=(e,t,n)=>{const s=C.fromDom(t.commonAncestorContainer),o=fs(s,e),r=se(o,c=>n.isWrapper(he(c))),a=tM(o,t),i=r.concat(a.length?a:sM(s));return pe(i,Js)},UE=()=>wf([]),rM=(e,t,n)=>nM(C.fromDom(t.cloneContents()),oM(e,t,n)),aM=(e,t)=>Hr(t,"table",q(ve,e)),iM=(e,t)=>aM(e,t[0]).bind(n=>{const s=t[0],o=t[t.length-1],r=ZF(n);return JF(r,s,o).map(a=>wf([QF(a)]))}).getOrThunk(UE),cM=(e,t,n)=>t.length>0&&t[0].collapsed?UE():rM(e,t[0],n),lM=(e,t,n)=>{const s=rC(t,e);return s.length>0?iM(e,s):cM(e,t,n)},_c=(e,t)=>t>=0&&t<e.length&&io(e.charAt(t)),zE=e=>qt(e.innerText),uM=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),fM=e=>m.from(e.selection.getRng()).map(t=>{var n;const s=m.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),o=e.getBody(),r=uM(s),a=C.fromDom(t.cloneContents());uy(a),fy(a);const i=e.dom.add(o,r,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},a.dom),c=zE(i),l=qt((n=i.textContent)!==null&&n!==void 0?n:"");if(e.dom.remove(i),_c(l,0)||_c(l,l.length-1)){const u=s.getOr(o),f=zE(u),d=f.indexOf(c);if(d===-1)return c;{const g=_c(f,d-1),h=_c(f,d+c.length);return(g?" ":"")+c+(h?" ":"")}}else return c}).getOr(""),dM=(e,t)=>{const n=e.selection.getRng(),s=e.dom.create("body"),o=e.selection.getSel(),r=Af(e,Ju(o)),a=t.contextual?lM(C.fromDom(e.getBody()),r,e.schema).dom:n.cloneContents();return a&&s.appendChild(a),e.selection.serializer.serialize(s,t)},mM=(e,t)=>{if(t.format==="text")return fM(e);{const n=dM(e,t);return t.format==="tree"?n:e.selection.isCollapsed()?"":n}},gM=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),pM=(e,t,n={})=>{const s=gM(n,t);return OE(e,s).fold(wt,o=>{const r=mM(e,o);return BE(e,r,o)})},Rd=0,HE=1,WE=2,hM=(e,t)=>{const n=e.length+t.length+2,s=new Array(n),o=new Array(n),r=(u,f,d)=>({start:u,end:f,diag:d}),a=(u,f,d,g,h)=>{const p=c(u,f,d,g);if(p===null||p.start===f&&p.diag===f-g||p.end===u&&p.diag===u-d){let b=u,y=d;for(;b<f||y<g;)b<f&&y<g&&e[b]===t[y]?(h.push([Rd,e[b]]),++b,++y):f-u>g-d?(h.push([WE,e[b]]),++b):(h.push([HE,t[y]]),++y)}else{a(u,p.start,d,p.start-p.diag,h);for(let b=p.start;b<p.end;++b)h.push([Rd,e[b]]);a(p.end,f,p.end-p.diag,g,h)}},i=(u,f,d,g)=>{let h=u;for(;h-f<g&&h<d&&e[h]===t[h-f];)++h;return r(u,h,f)},c=(u,f,d,g)=>{const h=f-u,p=g-d;if(h===0||p===0)return null;const b=h-p,y=p+h,v=(y%2===0?y:y+1)/2;s[1+v]=u,o[1+v]=f+1;let E,S,R,D,z;for(E=0;E<=v;++E){for(S=-E;S<=E;S+=2){for(R=S+v,S===-E||S!==E&&s[R-1]<s[R+1]?s[R]=s[R+1]:s[R]=s[R-1]+1,D=s[R],z=D-u+d-S;D<f&&z<g&&e[D]===t[z];)s[R]=++D,++z;if(b%2!==0&&b-E<=S&&S<=b+E&&o[R-b]<=s[R])return i(o[R-b],S+u-d,f,g)}for(S=b-E;S<=b+E;S+=2){for(R=S+v-b,S===b-E||S!==b+E&&o[R+1]<=o[R-1]?o[R]=o[R+1]-1:o[R]=o[R-1],D=o[R]-1,z=D-u+d-S;D>=u&&z>=d&&e[D]===t[z];)o[R]=D--,z--;if(b%2===0&&-E<=S&&S<=E&&o[R]<=s[R+b])return i(o[R],S+u-d,f,g)}}return null},l=[];return a(0,e.length,0,t.length,l),l},VE=e=>Y(e)?e.outerHTML:O(e)?Xs.encodeRaw(e.data,!1):Ss(e)?"<!--"+e.data+"-->":"",bM=e=>{let t;const n=document.createElement("div"),s=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)s.appendChild(t);return s},CM=(e,t,n)=>{const s=bM(t);if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.insertBefore(s,o)}else e.appendChild(s)},yM=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];e.removeChild(n)}},vM=(e,t)=>{let n=0;T(e,s=>{s[0]===Rd?n++:s[0]===HE?(CM(t,s[1],n),n++):s[0]===WE&&yM(t,n)})},EM=(e,t)=>se(pe(Wt(e.childNodes),vn(qt,VE)),n=>n.length>0),SM=(e,t)=>{const n=pe(Wt(t.childNodes),VE);return vM(hM(n,e),t),t},wM=In(()=>document.implementation.createHTMLDocument("undo")),kM=e=>e.querySelector("iframe")!==null,xM=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),_M=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Nc=e=>{const t=e.serializer.getTempAttrs(),n=ly(e.getBody(),t);return kM(n)?xM(EM(n)):_M(qt(n.innerHTML))},Td=(e,t,n)=>{const s=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?SM(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:M(s)&&eC(s)?!s.isFakeCaret:!0}),s&&(e.selection.moveToBookmark(s),e.selection.scrollIntoView())},Pd=e=>e.type==="fragmented"?e.fragments.join(""):e.content,jE=e=>{const t=C.fromTag("body",wM());return Si(t,Pd(e)),T(bt(t,"*[data-mce-bogus]"),Es),Sp(t)},NM=(e,t)=>Pd(e)===Pd(t),AM=(e,t)=>jE(e)===jE(t),Dd=(e,t)=>!e||!t?!1:NM(e,t)?!0:AM(e,t),Od=e=>e.get()===0,Ac=(e,t,n)=>{Od(n)&&(e.typing=t)},qE=(e,t)=>{e.typing&&(Ac(e,!1,t),e.add())},RM=e=>{e.typing&&(e.typing=!1,e.add())},TM=(e,t,n)=>{Od(t)&&n.set(Lu(e.selection))},PM=(e,t,n,s,o,r,a)=>{const i=Nc(e),c=I.extend(r||{},i);if(!Od(s)||e.removed)return null;const l=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:c,lastLevel:l,originalEvent:a}).isDefaultPrevented()||l&&Dd(l,c))return null;t.data[n.get()]&&o.get().each(d=>{t.data[n.get()].beforeBookmark=d});const u=FP(e);if(u&&t.data.length>u){for(let d=0;d<t.data.length-1;d++)t.data[d]=t.data[d+1];t.data.length--,n.set(t.data.length)}c.bookmark=Lu(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(c),n.set(t.data.length-1);const f={level:c,lastLevel:l,originalEvent:a};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",f),e.dispatch("change",f)):e.dispatch("AddUndo",f),c},DM=(e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")},OM=(e,t,n,s,o)=>{if(t.transact(s)){const r=t.data[n.get()].bookmark,a=t.data[n.get()-1];Td(e,a,!0),t.transact(o)&&(t.data[n.get()-1].beforeBookmark=r)}},BM=(e,t,n)=>{let s;return t.get()<n.length-1&&(t.set(t.get()+1),s=n[t.get()],Td(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s},IM=(e,t,n,s)=>{let o;return t.typing&&(t.add(),t.typing=!1,Ac(t,!1,n)),s.get()>0&&(s.set(s.get()-1),o=t.data[s.get()],Td(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o},LM=e=>{e.clear(),e.add()},$M=(e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!Dd(Nc(e),t.data[0]),FM=(e,t)=>t.get()<e.data.length-1&&!e.typing,MM=(e,t,n)=>(qE(e,t),e.beforeChange(),e.ignore(n),e.add()),UM=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},zM=(e,t)=>{const n=e.dom,s=M(t)?t:e.getBody();T(n.select("table,a",s),o=>{switch(o.nodeName){case"TABLE":const r=VP(e),a=n.getAttrib(o,"border");(!a||a==="0")&&e.hasVisual?n.addClass(o,r):n.removeClass(o,r);break;case"A":if(!n.getAttrib(o,"href")){const i=n.getAttrib(o,"name")||o.id,c=_b(e);i&&e.hasVisual?n.addClass(o,c):n.removeClass(o,c)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},KE=e=>({init:{bindEvents:le},undoManager:{beforeChange:(t,n)=>TM(e,t,n),add:(t,n,s,o,r,a)=>PM(e,t,n,s,o,r,a),undo:(t,n,s)=>IM(e,t,n,s),redo:(t,n)=>BM(e,t,n),clear:(t,n)=>DM(e,t,n),reset:t=>LM(t),hasUndo:(t,n)=>$M(e,t,n),hasRedo:(t,n)=>FM(t,n),transact:(t,n,s)=>MM(t,n,s),ignore:(t,n)=>UM(t,n),extra:(t,n,s,o)=>OM(e,t,n,s,o)},formatter:{match:(t,n,s,o)=>ad(e,t,n,s,o),matchAll:(t,n)=>ZL(e,t,n),matchNode:(t,n,s,o)=>Gn(e,t,n,s,o),canApply:t=>JL(e,t),closest:t=>QL(e,t),apply:(t,n,s)=>Gv(e,t,n,s),remove:(t,n,s,o)=>jv(e,t,n,s,o),toggle:(t,n,s)=>F$(e,t,n,s),formatChanged:(t,n,s,o,r)=>$$(e,t,n,s,o,r)},editor:{getContent:t=>xB(e,t),setContent:(t,n)=>YL(e,t,n),insertContent:(t,n)=>jL(e,t,n),addVisual:t=>zM(e,t)},selection:{getContent:(t,n)=>pM(e,t,n)},autocompleter:{addDecoration:le,removeDecoration:le},raw:{getModel:()=>m.none()}}),HM=e=>{const t=l=>ot(l)?l:{},{init:n,undoManager:s,formatter:o,editor:r,selection:a,autocompleter:i,raw:c}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:s.beforeChange,add:s.add,undo:s.undo,redo:s.redo,clear:s.clear,reset:s.reset,hasUndo:s.hasUndo,hasRedo:s.hasRedo,transact:(l,u,f)=>s.transact(f),ignore:(l,u)=>s.ignore(u),extra:(l,u,f,d)=>s.extra(f,d)},formatter:{match:(l,u,f,d)=>o.match(l,t(u),d),matchAll:o.matchAll,matchNode:o.matchNode,canApply:l=>o.canApply(l),closest:l=>o.closest(l),apply:(l,u,f)=>o.apply(l,t(u)),remove:(l,u,f,d)=>o.remove(l,t(u)),toggle:(l,u,f)=>o.toggle(l,t(u)),formatChanged:(l,u,f,d,g)=>o.formatChanged(u,f,d,g)},editor:{getContent:l=>r.getContent(l),setContent:(l,u)=>({content:r.setContent(l,u),html:""}),insertContent:(l,u)=>(r.insertContent(l),""),addVisual:r.addVisual},selection:{getContent:(l,u)=>a.getContent(u)},autocompleter:{addDecoration:i.addDecoration,removeDecoration:i.removeDecoration},raw:{getModel:()=>m.some(c.getRawModel())}}},WM=()=>{const e=H(null),t=H("");return{init:{bindEvents:le},undoManager:{beforeChange:le,add:e,undo:e,redo:e,clear:le,reset:le,hasUndo:De,hasRedo:De,transact:e,ignore:le,extra:le},formatter:{match:De,matchAll:H([]),matchNode:H(void 0),canApply:De,closest:t,apply:le,remove:le,toggle:le,formatChanged:H({unbind:le})},editor:{getContent:t,setContent:H({content:"",html:""}),insertContent:H(""),addVisual:le},selection:{getContent:t},autocompleter:{addDecoration:le,removeDecoration:le},raw:{getModel:H(m.none())}}},Yn=e=>oe(e.plugins,"rtc"),VM=e=>Ae(e.plugins,"rtc").bind(t=>m.from(t.setup)),jM=e=>{const t=e;return VM(e).fold(()=>(t.rtcInstance=KE(e),m.none()),n=>(t.rtcInstance=WM(),m.some(()=>n().then(s=>(t.rtcInstance=HM(s),s.rtc.isRemote)))))},Bd=e=>e.rtcInstance?e.rtcInstance:KE(e),qe=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},qM=(e,t,n)=>{qe(e).undoManager.beforeChange(t,n)},KM=(e,t,n,s,o,r,a)=>qe(e).undoManager.add(t,n,s,o,r,a),GM=(e,t,n,s)=>qe(e).undoManager.undo(t,n,s),YM=(e,t,n)=>qe(e).undoManager.redo(t,n),XM=(e,t,n)=>{qe(e).undoManager.clear(t,n)},ZM=(e,t)=>{qe(e).undoManager.reset(t)},QM=(e,t,n)=>qe(e).undoManager.hasUndo(t,n),JM=(e,t,n)=>qe(e).undoManager.hasRedo(t,n),eU=(e,t,n,s)=>qe(e).undoManager.transact(t,n,s),tU=(e,t,n)=>{qe(e).undoManager.ignore(t,n)},nU=(e,t,n,s,o)=>{qe(e).undoManager.extra(t,n,s,o)},sU=(e,t,n,s,o)=>qe(e).formatter.match(t,n,s,o),oU=(e,t,n)=>qe(e).formatter.matchAll(t,n),rU=(e,t,n,s,o)=>qe(e).formatter.matchNode(t,n,s,o),aU=(e,t)=>qe(e).formatter.canApply(t),iU=(e,t)=>qe(e).formatter.closest(t),cU=(e,t,n,s)=>{qe(e).formatter.apply(t,n,s)},lU=(e,t,n,s,o)=>{qe(e).formatter.remove(t,n,s,o)},uU=(e,t,n,s)=>{qe(e).formatter.toggle(t,n,s)},fU=(e,t,n,s,o,r)=>qe(e).formatter.formatChanged(t,n,s,o,r),dU=(e,t)=>Bd(e).editor.getContent(t),mU=(e,t,n)=>Bd(e).editor.setContent(t,n),gU=(e,t,n)=>Bd(e).editor.insertContent(t,n),pU=(e,t,n)=>qe(e).selection.getContent(t,n),hU=(e,t)=>qe(e).editor.addVisual(t),GE=e=>qe(e).init.bindEvents(),bU=(e,t={})=>{const n=t.format?t.format:"html";return pU(e,n,t)},YE=e=>e.dom.length===0?(Re(e),m.none()):m.some(e),CU=(e,t)=>e.filter(n=>va.isBookmarkNode(n.dom)).bind(t?zr:ys),yU=(e,t,n,s,o)=>{const r=e.dom,a=t.dom,i=s?r.length:a.length;s?(Ff(r,a,o,!1,!s),n.setStart(a,i)):(Ff(a,r,o,!1,!s),n.setEnd(a,i))},vU=(e,t,n)=>{wn(e).each(s=>{const o=e.dom;t&&xa(s,N(o,0),n)?gc(o,0,n):!t&&_a(s,N(o,o.length),n)&&$f(o,o.length,n)})},XE=(e,t,n,s,o)=>{e.bind(r=>((s?$f:gc)(r.dom,s?r.dom.length:0,o),t.filter(Tt).map(i=>yU(r,i,n,s,o)))).orThunk(()=>CU(t,s).or(t).filter(Tt).map(a=>vU(a,s,o)))},EU=(e,t,n)=>{const s=m.from(t.firstChild).map(C.fromDom),o=m.from(t.lastChild).map(C.fromDom);e.deleteContents(),e.insertNode(t);const r=s.bind(ys).filter(Tt).bind(YE),a=o.bind(zr).filter(Tt).bind(YE);XE(r,s,e,!0,n),XE(a,o,e,!1,n),e.collapse(!1)},SU=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),wU=(e,t)=>{if(t.format!=="raw"){const n=e.selection.getRng(),s=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),o=s?{context:s.nodeName.toLowerCase()}:{},r=e.parser.parse(t.content,{forced_root_block:!1,...o,...t});return Ts({validate:!1},e.schema).serialize(r)}else return t.content},kU=(e,t,n={})=>{const s=SU(n,t);_d(e,s).each(o=>{const r=wU(e,o),a=e.selection.getRng();EU(a,a.createContextualFragment(r),e.schema),e.selection.setRng(a),Sa(e,a),Nd(e,r,o)})},ZE=(e,t,n)=>{if(oe(e,t)){const s=se(e[t],o=>o!==n);s.length===0?delete e[t]:e[t]=s}};var xU=(e,t)=>{let n,s;const o=(i,c)=>Ye(c,l=>e.is(l,i)),r=i=>e.getParents(i,void 0,e.getRoot()),a=()=>{n={},s={},t.on("NodeChange",i=>{const c=i.element,l=r(c),u={};_e(n,(f,d)=>{o(d,l).each(g=>{s[d]||(T(f,h=>{h(!0,{node:g,selector:d,parents:l})}),s[d]=f),u[d]=f})}),_e(s,(f,d)=>{u[d]||(delete s[d],T(f,g=>{g(!1,{node:c,selector:d,parents:l})}))})})};return{selectorChangedWithUnbind:(i,c)=>(n||a(),n[i]||(n[i]=[]),n[i].push(c),o(i,r(t.selection.getStart())).each(()=>{s[i]=n[i]}),{unbind:()=>{ZE(n,i,c),ZE(s,i,c)}})}};const QE=e=>!!(e&&e.ownerDocument)&&Sn(C.fromDom(e.ownerDocument),C.fromDom(e)),_U=e=>e?QE(e.startContainer)&&QE(e.endContainer):!1,JE=(e,t,n,s)=>{let o,r;const{selectorChangedWithUnbind:a}=xU(e,s),i=(L,K)=>{const me=e.createRng();M(L)&&M(K)?(me.setStart(L,K),me.setEnd(L,K),S(me),y(!1)):(nf(e,me,s.getBody(),!0),S(me))},c=L=>bU(s,L),l=(L,K)=>kU(s,L,K),u=L=>ey(s.getBody(),E(),L),f=L=>ty(s.getBody(),E(),L),d=(L,K)=>st.getBookmark(L,K),g=L=>st.moveToBookmark(L),h=(L,K)=>(fB(e,L,K).each(S),L),p=()=>{const L=E(),K=v();return!L||L.item?!1:L.compareEndPoints?L.compareEndPoints("StartToEnd",L)===0:!K||L.collapsed},b=()=>{if(s.mode.isReadOnly())return!1;const L=E(),K=s.getBody().querySelectorAll('[data-mce-selected="1"]');return K.length>0?es(K,me=>e.isEditable(me.parentElement)):QC(e,L)},y=L=>{const K=E();K.collapse(!!L),S(K)},v=()=>t.getSelection?t.getSelection():t.document.selection,E=()=>{let L;const K=(U,J,te)=>{try{return J.compareBoundaryPoints(U,te)}catch{return-1}},me=t.document;if(M(s.bookmark)&&!nr(s)){const U=pf(s);if(U.isSome())return U.map(J=>Af(s,[J])[0]).getOr(me.createRange())}try{const U=v();U&&!ki(U.anchorNode)&&(U.rangeCount>0?L=U.getRangeAt(0):L=me.createRange(),L=Af(s,[L])[0])}catch{}if(L||(L=me.createRange()),qr(L.startContainer)&&L.collapsed){const U=e.getRoot();L.setStart(U,0),L.setEnd(U,0)}return o&&r&&(K(L.START_TO_START,L,o)===0&&K(L.END_TO_END,L,o)===0?L=r:(o=null,r=null)),L},S=(L,K)=>{if(!_U(L))return;const me=v();if(L=s.dispatch("SetSelectionRange",{range:L,forward:K}).range,me){r=L;try{me.removeAllRanges(),me.addRange(L)}catch{}K===!1&&me.extend&&(me.collapse(L.endContainer,L.endOffset),me.extend(L.startContainer,L.startOffset)),o=me.rangeCount>0?me.getRangeAt(0):null}if(!L.collapsed&&L.startContainer===L.endContainer&&(me!=null&&me.setBaseAndExtent)&&L.endOffset-L.startOffset<2&&L.startContainer.hasChildNodes()){const J=L.startContainer.childNodes[L.startOffset];J&&J.nodeName==="IMG"&&(me.setBaseAndExtent(L.startContainer,L.startOffset,L.endContainer,L.endOffset),(me.anchorNode!==L.startContainer||me.focusNode!==L.endContainer)&&me.setBaseAndExtent(J,0,J,1))}s.dispatch("AfterSetSelectionRange",{range:L,forward:K})},R=L=>(l(e.getOuterHTML(L)),L),D=()=>lB(s.getBody(),E()),z=(L,K)=>uB(e,E(),L,K),A=()=>{const L=v(),K=L==null?void 0:L.anchorNode,me=L==null?void 0:L.focusNode;if(!L||!K||!me||ki(K)||ki(me))return!0;const U=e.createRng(),J=e.createRng();try{U.setStart(K,L.anchorOffset),U.collapse(!0),J.setStart(me,L.focusOffset),J.collapse(!0)}catch{return!0}return U.compareBoundaryPoints(U.START_TO_START,J)<=0},Oe={dom:e,win:t,serializer:n,editor:s,expand:(L={type:"word"})=>S(uo(e).expand(E(),L)),collapse:y,setCursorLocation:i,getContent:c,setContent:l,getBookmark:d,moveToBookmark:g,select:h,isCollapsed:p,isEditable:b,isForward:A,setNode:R,getNode:D,getSel:v,setRng:S,getRng:E,getStart:u,getEnd:f,getSelectedBlocks:z,normalize:()=>{const L=E(),K=v();if(!d1(K)&&Qi(s)){const me=cc(e,L);return me.each(U=>{S(U,A())}),me.getOr(L)}return L},selectorChanged:(L,K)=>(a(L,K),Oe),selectorChangedWithUnbind:a,getScrollContainer:()=>{let L,K=e.getRoot();for(;K&&K.nodeName!=="BODY";){if(K.scrollHeight>K.clientHeight){L=K;break}K=K.parentNode}return L},scrollIntoView:(L,K)=>{M(L)?cB(s,L,K):Sa(s,E(),K)},placeCaretAt:(L,K)=>S(UC(L,K,s.getDoc())),getBoundingClientRect:()=>{const L=E();return L.collapsed?N.fromRangeStart(L).getClientRects()[0]:L.getBoundingClientRect()},destroy:()=>{t=o=r=null,Ke.destroy()}},st=va(Oe),Ke=LC(Oe,s);return Oe.bookmarkManager=st,Oe.controlSelection=Ke,Oe},NU=(e,t,n)=>{t.addNodeFilter("br",(s,o,r)=>{const a=I.extend({},n.getBlockElements()),i=n.getNonEmptyElements(),c=n.getWhitespaceElements();a.body=1;const l=u=>u.name in a||cu(n,u);for(let u=0,f=s.length;u<f;u++){let d=s[u],g=d.parent;if(g&&l(g)&&d===g.lastChild){let h=d.prev;for(;h;){const p=h.name;if(p!=="span"||h.attr("data-mce-type")!=="bookmark"){p==="br"&&(d=null);break}h=h.prev}if(d&&(d.remove(),Aa(n,i,c,g))){const p=n.getElementRule(g.name);p&&(p.removeEmpty?g.remove():p.paddEmpty&&Yf(e,r,l,g))}}else{let h=d;for(;g&&g.firstChild===h&&g.lastChild===h&&(h=g,!a[g.name]);)g=g.parent;if(h===g){const p=new xt("#text",3);p.value=Ze,d.replace(p)}}}})},AU=(e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",(s,o)=>{let r=s.length;for(;r--;){const a=s[r];a.attr("tabindex",a.attr("data-mce-tabindex")),a.attr(o,null)}}),e.addAttributeFilter("src,href,style",(s,o)=>{const r="data-mce-"+o,a=t.url_converter,i=t.url_converter_scope;let c=s.length;for(;c--;){const l=s[c];let u=l.attr(r);u!==void 0?(l.attr(o,u.length>0?u:null),l.attr(r,null)):(u=l.attr(o),o==="style"?u=n.serializeStyle(n.parseStyle(u),l.name):a&&(u=a.call(i,u,o,l.name)),l.attr(o,u.length>0?u:null))}}),e.addAttributeFilter("class",s=>{let o=s.length;for(;o--;){const r=s[o];let a=r.attr("class");a&&(a=a.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",a.length>0?a:null))}}),e.addAttributeFilter("data-mce-type",(s,o,r)=>{let a=s.length;for(;a--;){const i=s[a];i.attr("data-mce-type")==="bookmark"&&!r.cleanup&&(m.from(i.firstChild).exists(l=>{var u;return!Ii((u=l.value)!==null&&u!==void 0?u:"")})?i.unwrap():i.remove())}}),e.addNodeFilter("script,style",(s,o)=>{var r;const a=c=>c.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let i=s.length;for(;i--;){const c=s[i],l=c.firstChild,u=(r=l==null?void 0:l.value)!==null&&r!==void 0?r:"";if(o==="script"){const f=c.attr("type");f&&c.attr("type",f==="mce-no/type"?null:f.replace(/^mce\-/,"")),t.element_format==="xhtml"&&l&&u.length>0&&(l.value=`// <![CDATA[
`+a(u)+`
// ]]>`)}else t.element_format==="xhtml"&&l&&u.length>0&&(l.value=`<!--
`+a(u)+`
-->`)}}),e.addNodeFilter("#comment",s=>{let o=s.length;for(;o--;){const r=s[o],a=r.value;t.preserve_cdata&&(a==null?void 0:a.indexOf("[CDATA["))===0?(r.name="#cdata",r.type=4,r.value=n.decode(a.replace(/^\[CDATA\[|\]\]$/g,""))):(a==null?void 0:a.indexOf("mce:protected "))===0&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(a).substr(14))}}),e.addNodeFilter("xml:namespace,input",(s,o)=>{let r=s.length;for(;r--;){const a=s[r];a.type===7?a.remove():a.type===1&&o==="input"&&!a.attr("type")&&a.attr("type","text")}}),e.addAttributeFilter("data-mce-type",s=>{T(s,o=>{o.attr("data-mce-type")==="format-caret"&&(o.isEmpty(e.schema.getNonEmptyElements())?o.remove():o.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)}),t.remove_trailing_brs&&NU(t,e,e.schema)},RU=e=>{const t=s=>(s==null?void 0:s.name)==="br",n=e.lastChild;if(t(n)){const s=n.prev;t(s)&&(n.remove(),s.remove())}},TU=(e,t,n)=>{let s;const o=e.dom;let r=t.cloneNode(!0);const a=document.implementation;if(a.createHTMLDocument){const i=a.createHTMLDocument("");I.each(r.nodeName==="BODY"?r.childNodes:[r],c=>{i.body.appendChild(i.importNode(c,!0))}),r.nodeName!=="BODY"?r=i.body.firstChild:r=i.body,s=o.doc,o.doc=i}return PT(e,{...n,node:r}),s&&(o.doc=s),r},PU=(e,t)=>M(e)&&e.hasEventListeners("PreProcess")&&!t.no_events,DU=(e,t,n)=>PU(e,n)?TU(e,t,n):t,OU=(e,t,n)=>{I.inArray(t,n)===-1&&(e.addAttributeFilter(n,(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)}),t.push(n))},BU=(e,t,n)=>!t.no_events&&e?DT(e,{...t,content:n}).content:n,IU=(e,t,n)=>{const s=qt(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||Bi(C.fromDom(t))?s:I.trim(s)},LU=(e,t,n)=>{const s=n.selection?{forced_root_block:!1,...n}:n,o=e.parse(t,s);return RU(o),o},$U=(e,t,n)=>Ts(e,t).serialize(n),FU=(e,t,n,s,o)=>{const r=$U(t,n,s);return BU(e,o,r)},MU=(e,t)=>{const n=["data-mce-selected"],s={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},o=t&&t.dom?t.dom:xe.DOM,r=t&&t.schema?t.schema:ws(s),a=or(s,r);AU(a,s,o);const i=(c,l={})=>{const u={format:"html",...l},f=DU(t,c,u),d=IU(o,f,u),g=LU(a,d,u);return u.format==="tree"?g:FU(t,s,r,g,u)};return{schema:r,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:i,addRules:r.addValidElements,setRules:r.setValidElements,addTempAttr:q(OU,a,n),getTempAttrs:H(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter}},eS=(e,t)=>{const n=MU(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},UU="html",zU=(e,t)=>({...e,format:t,get:!0,getInner:!0}),HU=(e,t={})=>{const n=t.format?t.format:UU,s=zU(t,n);return OE(e,s).fold(wt,o=>{const r=dU(e,o);return BE(e,r,o)})},WU="html",VU=(e,t)=>({format:WU,...e,set:!0,content:t}),Id=(e,t,n={})=>{const s=VU(n,t);return _d(e,s).map(o=>{const r=mU(e,o.content,o);return Nd(e,r.html,o),r.content}).getOr(t)},jU="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),qU=[],KU="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),tS=[],nS=(e,t)=>{const n=se(t,s=>oe(e,s));return Ms(n)},GU=e=>{const t=nS(e,jU),n=e.forced_root_block;return(n===!1||n==="")&&t.push("forced_root_block (false only)"),Ms(t)},YU=e=>nS(e,qU),sS=(e,t)=>{const n=I.makeMap(e.plugins," "),o=se(t,r=>oe(n,r));return Ms(o)},XU=e=>sS(e,KU),ZU=e=>sS(e,tS.map(t=>t.name)),QU=(e,t)=>{const n=GU(e),s=XU(t),o=s.length>0,r=n.length>0,a=t.theme==="mobile";if(o||r||a){const i=`
- `,c=a?`

Themes:${i}mobile`:"",l=o?`

Plugins:${i}${s.join(i)}`:"",u=r?`

Options:${i}${n.join(i)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+c+l+u)}},JU=e=>Ye(tS,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),ez=(e,t)=>{const n=YU(e),s=ZU(t),o=s.length>0,r=n.length>0;if(o||r){const a=`
- `,i=o?`

Plugins:${a}${s.map(JU).join(a)}`:"",c=r?`

Options:${a}${n.join(a)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+i+c)}},tz=(e,t)=>{QU(e,t),ez(e,t)},Rc=xe.DOM,nz=e=>{Rc.setStyle(e.id,"display",e.orgDisplay)},Tc=e=>m.from(e).each(t=>t.destroy()),sz=e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const n=e.selection;if(n){const s=n.dom;t.selection=n.win=n.dom=s.doc=null}},oz=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),Rc.unbind(t,"submit reset",e.formEventDelegate))},rz=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,s=e.getBody(),o=e.getElement();s&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&M(o==null?void 0:o.nextSibling)&&Rc.remove(o.nextSibling),OT(e),e.editorManager.remove(e),!e.inline&&s&&nz(e),BT(e),Rc.remove(e.getContainer()),Tc(t),Tc(n),e.destroy()}},az=(e,t)=>{const{selection:n,dom:s}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Tc(n),Tc(s)),oz(e),sz(e),e.destroyed=!0}},Pc=(()=>{const e={};return{add:(o,r)=>{e[o]=r},get:o=>e[o]?e[o]:{icons:{}},has:o=>oe(e,o)}})(),rr=kt.ModelManager,oS=(e,t)=>t.dom[e],rS=(e,t)=>parseInt(Un(t,e),10),iz=q(oS,"clientWidth"),cz=q(oS,"clientHeight"),lz=q(rS,"margin-top"),uz=q(rS,"margin-left"),fz=e=>e.dom.getBoundingClientRect(),dz=(e,t,n)=>{const s=iz(e),o=cz(e);return t>=0&&n>=0&&t<=s&&n<=o},mz=(e,t,n,s)=>{const o=fz(t),r=e?o.left+t.dom.clientLeft+uz(t):0,a=e?o.top+t.dom.clientTop+lz(t):0,i=n-r,c=s-a;return{x:i,y:c}},gz=(e,t,n)=>{const s=C.fromDom(e.getBody()),o=e.inline?s:p0(s),r=mz(e.inline,o,t,n);return dz(o,r.x,r.y)},pz=e=>m.from(e).map(C.fromDom),hz=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return pz(t).map(Oo).getOr(!1)};var bz=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const aS=e=>{const t=[],n=()=>{const d=e.theme;return d&&d.getNotificationManagerImpl?d.getNotificationManagerImpl():bz()},s=()=>m.from(t[0]),o=(d,g)=>d.type===g.type&&d.text===g.text&&!d.progressBar&&!d.timeout&&!g.progressBar&&!g.timeout,r=()=>{s().each(d=>{d.reposition()})},a=d=>{t.push(d)},i=d=>{Nr(t,g=>g===d).each(g=>{t.splice(g,1)})},c=(d,g=!0)=>e.removed||!hz(e)?{}:(g&&e.dispatch("BeforeOpenNotification",{notification:d}),Ye(t,h=>o(n().getArgs(h),d)).getOrThunk(()=>{e.editorManager.setActive(e);const h=n().open(d,()=>{i(h)},()=>yf(e));return a(h),r(),e.dispatch("OpenNotification",{notification:{...h}}),h})),l=()=>{s().each(d=>{n().close(d),i(d),r()})},u=H(t);return(d=>{d.on("SkinLoaded",()=>{const g=_P(d);g&&c({text:g,type:"warning",timeout:0},!1),r()}),d.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(r)}),d.on("remove",()=>{T(t.slice(),g=>{n().close(g)})}),d.on("keydown",g=>{var h;const p=((h=g.key)===null||h===void 0?void 0:h.toLowerCase())==="f12"||g.keyCode===123;g.altKey&&p&&(g.preventDefault(),s().map(b=>C.fromDom(b.getEl())).each(b=>NC(b)))})})(e),{open:c,close:l,getNotifications:u}},ar=kt.PluginManager,bo=kt.ThemeManager;var Cz=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const iS=e=>{let t=[];const n=()=>{const p=e.theme;return p&&p.getWindowManagerImpl?p.getWindowManagerImpl():Cz()},s=(p,b)=>(...y)=>b?b.apply(p,y):void 0,o=p=>{e.dispatch("OpenWindow",{dialog:p})},r=p=>{e.dispatch("CloseWindow",{dialog:p})},a=p=>{t.push(p),o(p)},i=p=>{r(p),t=se(t,b=>b!==p),t.length===0&&e.focus()},c=()=>m.from(t[t.length-1]),l=p=>{e.editorManager.setActive(e),sc(e),e.ui.show();const b=p();return a(b),b},u=(p,b)=>l(()=>n().open(p,b,i)),f=p=>l(()=>n().openUrl(p,i)),d=(p,b,y)=>{const v=n();v.alert(p,s(y||v,b))},g=(p,b,y)=>{const v=n();v.confirm(p,s(y||v,b))},h=()=>{c().each(p=>{n().close(p),i(p)})};return e.on("remove",()=>{T(t,p=>{n().close(p)})}),{open:u,openUrl:f,alert:d,confirm:g,close:h}},cS=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Dc=(e,t)=>{e._skinLoaded?cS(e,t):e.on("SkinLoaded",()=>{cS(e,t)})},yz=(e,t)=>{Dc(e,_n.translate(["Failed to upload image: {0}",t]))},$a=(e,t,n)=>{ab(e,t,{message:n}),console.error(n)},Fa=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,vz=(e,t,n)=>{$a(e,"PluginLoadError",Fa("plugin",t,n))},Ez=(e,t,n)=>{$a(e,"IconsLoadError",Fa("icons",t,n))},Sz=(e,t,n)=>{$a(e,"LanguageLoadError",Fa("language",t,n))},wz=(e,t,n)=>{$a(e,"ThemeLoadError",Fa("theme",t,n))},kz=(e,t,n)=>{$a(e,"ModelLoadError",Fa("model",t,n))},xz=(e,t,n)=>{const s=_n.translate(["Failed to initialize plugin: {0}",t]);ab(e,"PluginLoadError",{message:s}),Oc(s,n),Dc(e,s)},Oc=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},_z=e=>{m.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},Ld=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},Nz=(e,t)=>{Ld(e,"StyleWithCSS",t),Ld(e,"enableInlineTableEditing",t),Ld(e,"enableObjectResizing",t)},Az=e=>{e.selection.setRng(e.selection.getRng())},lS=(e,t,n)=>{Ml(e,t)&&!n?Fr(e,t):n&&Po(e,t)},uS=e=>{const t=C.fromDom(e.getBody());lS(t,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),_z(e)},fS=e=>{const t=C.fromDom(e.getBody());lS(t,"mce-content-readonly",!1),e.hasEditableRoot()&&yi(t,!0),Nz(e,!1),yf(e)&&e.focus(),Az(e),e.nodeChanged()},ds=e=>ji(e),Co="data-mce-contenteditable",Rz=e=>{T(bt(e,'*[contenteditable="true"]'),t=>{at(t,Co,"true"),yi(t,!1)})},Tz=e=>{T(bt(e,`*[${Co}="true"]`),t=>{it(t,Co),yi(t,!0)})},dS=(e,t)=>{const n=C.fromDom(e.getBody());t?(uS(e),yi(n,!1),Rz(n)):(Tz(n),fS(e))},Pz=e=>{e.serializer?mS(e):e.on("PreInit",()=>{mS(e)})},mS=e=>{e.parser.addAttributeFilter("contenteditable",t=>{ds(e)&&T(t,n=>{n.attr(Co,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Co,t=>{ds(e)&&T(t,n=>{n.attr("contenteditable",n.attr(Co))})}),e.serializer.addTempAttr(Co)},Dz=e=>e.type==="click",Oz=["copy"],Bz=e=>Ee(Oz,e.type),Iz=(e,t)=>Bo(t,"a",s=>ve(s,C.fromDom(e.getBody()))).bind(s=>ss(s,"href")),Lz=(e,t)=>{if(Dz(t)&&!j.metaKeyPressed(t)){const n=C.fromDom(t.target);Iz(e,n).each(s=>{if(t.preventDefault(),/^#/.test(s)){const o=e.dom.select(`${s},[name="${Ag(s,"#")}"]`);o.length&&e.selection.scrollIntoView(o[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else Bz(t)&&e.dispatch(t.type,t)},$z=e=>{e.on("ShowCaret ObjectSelected",t=>{ds(e)&&t.preventDefault()}),e.on("DisabledStateChange",t=>{t.isDefaultPrevented()||dS(e,t.state)})},Fz=e=>{Pz(e),$z(e)},Mz=e=>/^[a-z0-9\-]+$/i.test(e),$d=e=>"content/"+e+"/content.css",Uz=e=>tinymce.Resource.has($d(e)),zz=e=>gS(e,vP(e)),Hz=e=>gS(e,Eb(e)),gS=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`;return pe(t,r=>Uz(r)?r:Mz(r)&&!e.inline?`${n}/${r}/${o}`:e.documentBaseURI.toAbsolute(r))},Wz=e=>{e.contentCSS=e.contentCSS.concat(zz(e),Hz(e))},Vz=e=>e?Wt(e.getElementsByTagName("img")):[],jz=(e,t)=>{const n={};return{findAll:(o,r=He)=>{const a=se(Vz(o),c=>{const l=c.src;return c.hasAttribute("data-mce-bogus")||c.hasAttribute("data-mce-placeholder")||!l||l===Ce.transparentSrc?!1:Xe(l,"blob:")?!e.isUploaded(l)&&r(c):Xe(l,"data:")?r(c):!1}),i=pe(a,c=>{const l=c.src;if(oe(n,l))return n[l].then(u=>Q(u)?u:{image:c,blobInfo:u.blobInfo});{const u=Z$(t,l).then(f=>(delete n[l],{image:c,blobInfo:f})).catch(f=>(delete n[l],f));return n[l]=u,u}});return Promise.all(i)}}},pS=()=>{let n={};const s=(d,g)=>({status:d,resultUri:g}),o=d=>d in n;return{hasBlobUri:o,getResultUri:d=>{const g=n[d];return g?g.resultUri:null},isPending:d=>o(d)?n[d].status===1:!1,isUploaded:d=>o(d)?n[d].status===2:!1,markPending:d=>{n[d]=s(1,null)},markUploaded:(d,g)=>{n[d]=s(2,g)},removeFailed:d=>{delete n[d]},destroy:()=>{n={}}}};let qz=0;const Kz=()=>{const e=()=>Math.round(vh()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},Gz=e=>e+qz+++Kz(),Yz=()=>{let e=[];const t=f=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[f.toLowerCase()]||"dat",n=(f,d,g,h,p)=>{if(Q(f))return s({id:f,name:h,filename:p,blob:d,base64:g});if(ot(f))return s(f);throw new Error("Unknown input type")},s=f=>{if(!f.blob||!f.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const d=f.id||Gz("blobid"),g=f.name||d,h=f.blob;return{id:H(d),name:H(g),filename:H(f.filename||g+"."+t(h.type)),blob:H(h),base64:H(f.base64),blobUri:H(f.blobUri||URL.createObjectURL(h)),uri:H(f.uri)}},o=f=>{a(f.id())||e.push(f)},r=f=>Ye(e,f).getOrUndefined(),a=f=>r(d=>d.id()===f);return{create:n,add:o,get:a,getByUri:f=>r(d=>d.blobUri()===f),getByData:(f,d)=>r(g=>g.base64()===f&&g.blob().type===d),findFirst:r,removeByUri:f=>{e=se(e,d=>d.blobUri()===f?(URL.revokeObjectURL(d.blobUri()),!1):!0)},destroy:()=>{T(e,f=>{URL.revokeObjectURL(f.blobUri())}),e=[]}}},Xz=(e,t)=>{const n={},s=(p,b)=>p?p.replace(/\/$/,"")+"/"+b.replace(/^\//,""):b,o=(p,b)=>new Promise((y,v)=>{const E=new XMLHttpRequest;E.open("POST",t.url),E.withCredentials=t.credentials,E.upload.onprogress=R=>{b(R.loaded/R.total*100)},E.onerror=()=>{v("Image upload failed due to a XHR Transport error. Code: "+E.status)},E.onload=()=>{if(E.status<200||E.status>=300){v("HTTP Error: "+E.status);return}const R=JSON.parse(E.responseText);if(!R||!Q(R.location)){v("Invalid JSON: "+E.responseText);return}y(s(t.basePath,R.location))};const S=new FormData;S.append("file",p.blob(),p.filename()),E.send(S)}),r=we(t.handler)?t.handler:o,a=()=>new Promise(p=>{p([])}),i=(p,b)=>({url:b,blobInfo:p,status:!0}),c=(p,b)=>({url:"",blobInfo:p,status:!1,error:b}),l=(p,b)=>{I.each(n[p],y=>{y(b)}),delete n[p]},u=(p,b,y)=>(e.markPending(p.blobUri()),new Promise(v=>{let E,S;try{const R=()=>{E&&(E.close(),S=le)},D=A=>{R(),e.markUploaded(p.blobUri(),A),l(p.blobUri(),i(p,A)),v(i(p,A))},z=A=>{R(),e.removeFailed(p.blobUri()),l(p.blobUri(),c(p,A)),v(c(p,A))};S=A=>{A<0||A>100||m.from(E).orThunk(()=>m.from(y).map(_l)).each(x=>{E=x,x.progressBar.value(A)})},b(p,S).then(D,A=>{z(Q(A)?{message:A}:A)})}catch(R){v(c(p,R))}})),f=p=>p===o,d=p=>{const b=p.blobUri();return new Promise(y=>{n[b]=n[b]||[],n[b].push(y)})},g=(p,b)=>(p=I.grep(p,y=>!e.isUploaded(y.blobUri())),Promise.all(I.map(p,y=>e.isPending(y.blobUri())?d(y):u(y,r,b))));return{upload:(p,b)=>!t.url&&f(r)?a():g(p,b)}},hS=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),bS=(e,t)=>Xz(t,{url:mP(e),basePath:gP(e),credentials:pP(e),handler:hP(e)}),Zz=e=>{const t=pS(),n=bS(e,t);return{upload:(s,o=!0)=>n.upload(s,o?hS(e):void 0)}},Qz=(e,t)=>e.dom.isEmpty(t.dom)&&M(e.schema.getTextBlockElements()[he(t)]),Jz=e=>t=>{Qz(e,t)&&je(t,C.fromHtml('<br data-mce-bogus="1" />'))},e2=e=>{const t=Yz();let n,s;const o=pS(),r=[],a=E=>S=>e.selection?E(S):[],i=E=>E+(E.indexOf("?")===-1?"?":"&")+new Date().getTime(),c=(E,S,R)=>{let D=0;do D=E.indexOf(S,D),D!==-1&&(E=E.substring(0,D)+R+E.substr(D+S.length),D+=R.length-S.length+1);while(D!==-1);return E},l=(E,S,R)=>{const D=`src="${R}"${R===Ce.transparentSrc?' data-mce-placeholder="1"':""}`;return E=c(E,`src="${S}"`,D),E=c(E,'data-mce-src="'+S+'"','data-mce-src="'+R+'"'),E},u=(E,S)=>{T(e.undoManager.data,R=>{R.type==="fragmented"?R.fragments=pe(R.fragments,D=>l(D,E,S)):R.content=l(R.content,E,S)})},f=(E,S)=>{const R=e.convertURL(S,"src");u(E.src,S),ns(C.fromDom(E),{src:bb(e)?i(S):S,"data-mce-src":R})},d=()=>(n||(n=bS(e,o)),b().then(a(E=>{const S=pe(E,R=>R.blobInfo);return n.upload(S,hS(e)).then(a(R=>{const D=[];let z=!1;const A=pe(R,(x,P)=>{const{blobInfo:W,image:X}=E[P];let ae=!1;return x.status&&fP(e)?(x.url&&!gt(X.src,x.url)&&(z=!0),t.removeByUri(X.src),Yn(e)||f(X,x.url)):x.error&&(x.error.remove&&(u(X.src,Ce.transparentSrc),D.push(X),ae=!0),yz(e,x.error.message)),{element:X,status:x.status,uploadUri:x.url,blobInfo:W,removed:ae}});return D.length>0&&!Yn(e)?e.undoManager.transact(()=>{T(Gl(D),x=>{const P=wn(x);Re(x),P.each(Jz(e)),t.removeByUri(x.dom.src)})}):z&&e.undoManager.dispatchChange(),A}))}))),g=()=>hb(e)?d():Promise.resolve([]),h=E=>es(r,S=>S(E)),p=E=>{r.push(E)},b=()=>(s||(s=jz(o,t)),s.findAll(e.getBody(),h).then(a(E=>{const S=se(E,R=>Q(R)?(Dc(e,R),!1):R.uriType!=="blob");return Yn(e)||T(S,R=>{u(R.image.src,R.blobInfo.blobUri()),R.image.src=R.blobInfo.blobUri(),R.image.removeAttribute("data-mce-src")}),S}))),y=()=>{t.destroy(),o.destroy(),s=n=null},v=E=>E.replace(/src="(blob:[^"]+)"/g,(S,R)=>{const D=o.getResultUri(R);if(D)return'src="'+D+'"';let z=t.getByUri(R);return z||(z=Lt(e.editorManager.get(),(A,x)=>A||x.editorUpload&&x.editorUpload.blobCache.getByUri(R),void 0)),z?'src="data:'+z.blob().type+";base64,"+z.base64()+'"':S});return e.on("SetContent",()=>{hb(e)?g():b()}),e.on("RawSaveContent",E=>{E.content=v(E.content)}),e.on("GetContent",E=>{E.source_view||E.format==="raw"||E.format==="tree"||(E.content=v(E.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",E=>{T(E,S=>{const R=S.attr("src");if(!R||t.getByUri(R))return;const D=o.getResultUri(R);D&&S.attr("src",D)})})}),{blobCache:t,addFilter:p,uploadImages:d,uploadImagesAuto:g,scanForImages:b,destroy:y}},t2=e=>{const t=e.dom,n=e.schema.type,s={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const o={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},a={inline:"s",remove:"all",preserve_attributes:["class","style"]};return n!=="html4"?[a,o,r]:[o,a,r]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(o,r,a)=>Y(o)&&o.hasAttribute("href"),onformat:(o,r,a)=>{I.each(a,(i,c)=>{t.setAttrib(o,c,i)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":o=>{var r;return(r=o==null?void 0:o.customValue)!==null&&r!==void 0?r:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return I.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),o=>{s[o]={block:o,remove:"all"}}),s},CS={remove_similar:!0,inherit:!1},ir={selector:"td,th",...CS},n2={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...ir},tablecellverticalalign:{styles:{"vertical-align":"%value"},...ir},tablecellbordercolor:{styles:{borderColor:"%value"},...ir},tablecellclass:{classes:["%value"],...ir},tableclass:{selector:"table",classes:["%value"],...CS},tablecellborderstyle:{styles:{borderStyle:"%value"},...ir},tablecellborderwidth:{styles:{borderWidth:"%value"},...ir}},s2=H(n2),o2=e=>{const t={},n=a=>M(a)?t[a]:t,s=a=>oe(t,a),o=(a,i)=>{a&&(Q(a)?(Fe(i)||(i=[i]),T(i,c=>{rt(c.deep)&&(c.deep=!nn(c)),rt(c.split)&&(c.split=!nn(c)||Je(c)),rt(c.remove)&&nn(c)&&!Je(c)&&(c.remove="none"),nn(c)&&Je(c)&&(c.mixed=!0,c.block_expand=!0),Q(c.classes)&&(c.classes=c.classes.split(/\s+/))}),t[a]=i):_e(a,(c,l)=>{o(l,c)}))},r=a=>(a&&t[a]&&delete t[a],t);return o(t2(e)),o(s2()),o(RP(e)),{get:n,has:s,register:o,unregister:r}},Bc=I.each,an=xe.DOM,Fd=e=>M(e)&&ot(e),yS=(e,t)=>{const n=t&&t.schema||ws({}),s=(c,l)=>{l.classes.length>0&&an.addClass(c,l.classes.join(" ")),an.setAttribs(c,l.attrs)},o=c=>{const l=Q(c)?{name:c,classes:[],attrs:{}}:c,u=an.create(l.name);return s(u,l),u},r=(c,l)=>{const u=n.getElementRule(c.nodeName.toLowerCase()),f=u==null?void 0:u.parentsRequired;return f&&f.length?l&&Ee(f,l)?l:f[0]:!1},a=(c,l,u)=>{let f;const d=l[0],g=Fd(d)?d.name:void 0,h=r(c,g);if(h)g===h?(f=d,l=l.slice(1)):f=h;else if(d)f=d,l=l.slice(1);else if(!u)return c;const p=f?o(f):an.create("div");p.appendChild(c),u&&I.each(u,y=>{const v=o(y);p.insertBefore(v,c)});const b=Fd(f)?f.siblings:void 0;return a(p,l,b)},i=an.create("div");if(e.length>0){const c=e[0],l=o(c),u=Fd(c)?c.siblings:void 0;i.appendChild(a(l,e.slice(1),u))}return i},r2=e=>{e=I.trim(e);let t="div";const n={name:t,classes:[],attrs:{},selector:e};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,o,r,a,i)=>{switch(o){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":I.inArray("checked disabled enabled read-only required".split(" "),r)!==-1&&(n.attrs[r]=r);break}if(a==="["){const c=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);c&&(n.attrs[c[1]]=c[2])}return""})),n.name=t||"div",n},a2=e=>Q(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),I.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const n=I.map(t.split(/(?:~\+|~|\+)/),r2),s=n.pop();return n.length&&(s.siblings=n),s}).reverse()):[],i2=(e,t)=>{let n="",s=TP(e);if(s==="")return"";const o=d=>Q(d)?d.replace(/%(\w+)/g,""):"",r=(d,g)=>an.getStyle(g??e.getBody(),d,!0);if(Q(t)){const d=e.formatter.get(t);if(!d)return"";t=d[0]}if("preview"in t){const d=t.preview;if(d===!1)return"";s=d||s}let a=t.block||t.inline||"span",i;const c=a2(t.selector);c.length>0?(c[0].name||(c[0].name=a),a=t.selector,i=yS(c,e)):i=yS([a],e);const l=an.select(a,i)[0]||i.firstChild;Bc(t.styles,(d,g)=>{const h=o(d);h&&an.setStyle(l,g,h)}),Bc(t.attributes,(d,g)=>{const h=o(d);h&&an.setAttrib(l,g,h)}),Bc(t.classes,d=>{const g=o(d);an.hasClass(l,g)||an.addClass(l,g)}),e.dispatch("PreviewFormats"),an.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i);const u=r("fontSize"),f=/px$/.test(u)?parseInt(u,10):0;return Bc(s.split(" "),d=>{let g=r(d,l);if(!(d==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=r(d),Gr(g).toLowerCase()==="#ffffff"))&&!(d==="color"&&Gr(g).toLowerCase()==="#000000")){if(d==="font-size"&&/em|%$/.test(g)){if(f===0)return;g=parseFloat(g)/(/%$/.test(g)?100:1)*f+"px"}d==="border"&&g&&(n+="padding:0 2px;"),n+=d+":"+g+";"}}),e.dispatch("AfterPreviewFormats"),an.remove(i),n},c2=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},vS=e=>{const t=o2(e),n=tt({});return c2(e),l$(e),Yn(e)||B$(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(s,o,r)=>{cU(e,s,o,r)},remove:(s,o,r,a)=>{lU(e,s,o,r,a)},toggle:(s,o,r)=>{uU(e,s,o,r)},match:(s,o,r,a)=>sU(e,s,o,r,a),closest:s=>iU(e,s),matchAll:(s,o)=>oU(e,s,o),matchNode:(s,o,r,a)=>rU(e,s,o,r,a),canApply:s=>aU(e,s),formatChanged:(s,o,r,a)=>fU(e,n,s,o,r,a),getCssText:q(i2,e)}},ES=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},l2=(e,t,n)=>{const s=tt(!1),o=c=>{Ac(t,!1,n),t.add({},c)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",c=>{const l=c.command;ES(l)||(qE(t,n),t.beforeChange())}),e.on("ExecCommand",c=>{const l=c.command;ES(l)||o(c)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",c=>{const l=c.keyCode;if(c.isDefaultPrevented())return;const u=Ce.os.isMacOS()&&c.key==="Meta";(l>=33&&l<=36||l>=37&&l<=40||l===45||c.ctrlKey||u)&&(o(),e.nodeChanged()),(l===46||l===8)&&e.nodeChanged(),s.get()&&t.typing&&!Dd(Nc(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),s.set(!1),e.nodeChanged())}),e.on("keydown",c=>{const l=c.keyCode;if(c.isDefaultPrevented())return;if(l>=33&&l<=36||l>=37&&l<=40||l===45){t.typing&&o(c);return}const u=c.ctrlKey&&!c.altKey||c.metaKey;if((l<16||l>20)&&l!==224&&l!==91&&!t.typing&&!u){t.beforeChange(),Ac(t,!0,n),t.add({},c),s.set(!0);return}(Ce.os.isMacOS()?c.metaKey:c.ctrlKey&&!c.altKey)&&t.beforeChange()}),e.on("mousedown",c=>{t.typing&&o(c)});const r=c=>c.inputType==="insertReplacementText",a=c=>c.inputType==="insertText"&&c.data===null,i=c=>c.inputType==="insertFromPaste"||c.inputType==="insertFromDrop";e.on("input",c=>{c.inputType&&(r(c)||a(c)||i(c))&&o(c)}),e.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||e.nodeChanged()})},u2=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},SS=e=>{const t=cs(),n=tt(0),s=tt(0),o={data:[],typing:!1,beforeChange:()=>{qM(e,n,t)},add:(r,a)=>KM(e,o,s,n,t,r,a),dispatchChange:()=>{e.setDirty(!0);const r=Nc(e);r.bookmark=Lu(e.selection),e.dispatch("change",{level:r,lastLevel:Rr(o.data,s.get()).getOrUndefined()})},undo:()=>GM(e,o,n,s),redo:()=>YM(e,s,o.data),clear:()=>{XM(e,o,s)},reset:()=>{ZM(e,o)},hasUndo:()=>QM(e,o,s),hasRedo:()=>JM(e,o,s),transact:r=>eU(e,o,n,r),ignore:r=>{tU(e,n,r)},extra:(r,a)=>{nU(e,o,s,r,a)}};return Yn(e)||l2(e,o,n),u2(e),o},f2=[9,27,j.HOME,j.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,j.DOWN,j.UP,j.LEFT,j.RIGHT].concat(Ce.browser.isFirefox()?[224]:[]),wS="data-mce-placeholder",kS=e=>e.type==="keydown"||e.type==="keyup",xS=e=>{const t=e.keyCode;return t===j.BACKSPACE||t===j.DELETE},d2=e=>{if(kS(e)){const t=e.keyCode;return!xS(e)&&(j.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||Ee(f2,t))}else return!1},m2=e=>kS(e)&&!(xS(e)||e.type==="keyup"&&e.keyCode===229),g2=(e,t,n)=>{if(e.isEmpty(t,void 0,{skipBogus:!1,includeZwsp:!0})){const s=t.firstElementChild;return s?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:n===s.nodeName.toLowerCase():!0}else return!1},p2=e=>{var t;const n=e.dom,s=yt(e),o=(t=xP(e))!==null&&t!==void 0?t:"",r=(a,i)=>{if(d2(a))return;const c=e.getBody(),l=m2(a)?!1:g2(n,c,s);(n.getAttrib(c,wS)!==""!==l||i)&&(n.setAttrib(c,wS,l?o:null),zT(e,l),e.on(l?"keydown":"keyup",r),e.off(l?"keyup":"keydown",r))};Ln(o)&&e.on("init",a=>{r(a,!0),e.on("change SetContent ExecCommand",r),e.on("paste",i=>sn.setEditorTimeout(e,()=>r(i)))})},h2=(e,t)=>({block:e,position:t}),b2=(e,t)=>({from:e,to:t}),Md=(e,t)=>{const n=C.fromDom(e),s=C.fromDom(t.container());return hc(n,s).map(o=>h2(o,t))},C2=e=>!(Sn(e.to.block,e.from.block)||Sn(e.from.block,e.to.block)),y2=e=>!ve(e.from.block,e.to.block),_S=(e,t)=>Hs(t,o=>oa(o)||dn(o.dom),o=>ve(o,e)).filter(Vt).getOr(e),v2=(e,t)=>{const n=C.fromDom(e);return ve(_S(n,t.from.block),_S(n,t.to.block))},E2=e=>Ne(e.from.block.dom)===!1&&Ne(e.to.block.dom)===!1,S2=e=>{const t=n=>_h(n)||ru(n.dom)||zo(n);return t(e.from.block)&&t(e.to.block)},w2=(e,t,n,s)=>$e(s.position.getNode())&&!Ct(e,s.block)?Xo(!1,s.block.dom).bind(o=>o.isEqual(s.position)?Jt(n,t,o).bind(r=>Md(t,r)):m.some(s)).getOr(s):s,k2=(e,t,n,s)=>{const o=Md(t,N.fromRangeStart(s)),r=o.bind(a=>Jt(n,t,a.position).bind(i=>Md(t,i).map(c=>w2(e,t,n,c))));return pt(o,r,b2).filter(a=>y2(a)&&v2(t,a)&&E2(a)&&S2(a)&&C2(a))},x2=(e,t,n,s)=>s.collapsed?k2(e,t,n,s):m.none(),_2=(e,t)=>{const n=ht(e);return Nr(n,s=>t.isBlock(he(s))).fold(H(n),s=>n.slice(0,s))},NS=(e,t)=>{const n=_2(e,t);return T(n,Re),n},AS=(e,t,n)=>{const s=fs(n,t);return Ye(s.reverse(),o=>Ct(e,o)).each(Re)},N2=(e,t)=>se(mp(t),n=>!Ct(e,n)).length===0,A2=(e,t,n,s,o)=>{if(Ct(s,n))return ks(n),vt(n.dom);N2(s,o)&&Ct(s,t)&&Ft(o,C.fromTag("br"));const r=Mt(n.dom,N.before(o.dom));return T(NS(t,s),a=>{Ft(o,a)}),AS(s,e,t),r},R2=(e,t)=>e.isInline(he(t)),T2=(e,t,n,s)=>{if(Ct(s,n)){if(Ct(s,t)){const a=_r((i=>{const c=(l,u)=>Ul(l).fold(()=>u,f=>R2(s,f)?c(f,u.concat(Js(f))):u);return c(i,[])})(n),(i,c)=>(Ep(i,c),c),Ho());Io(t),je(t,a)}return Re(n),vt(t.dom)}const o=mn(n.dom);return T(NS(t,s),r=>{je(n,r)}),AS(s,e,t),o},P2=(e,t)=>{const n=fs(t,e);return m.from(n[n.length-1])},D2=(e,t)=>Sn(t,e)?P2(t,e):m.none(),RS=(e,t)=>{Xo(e,t.dom).bind(n=>m.from(n.getNode())).map(C.fromDom).filter(to).each(Re)},TS=(e,t,n,s)=>(RS(!0,t),RS(!1,n),D2(t,n).fold(q(T2,e,t,n,s),q(A2,e,t,n,s))),PS=(e,t,n,s,o)=>t?TS(e,s,n,o):TS(e,n,s,o),Ud=(e,t)=>{const n=C.fromDom(e.getBody());return x2(e.schema,n.dom,t,e.selection.getRng()).map(o=>()=>{PS(n,t,o.from.block,o.to.block,e.schema).each(r=>{e.selection.setRng(r.toRange())})})},O2=(e,t,n)=>{const s=t.getRng();return pt(hc(e,C.fromDom(s.startContainer)),hc(e,C.fromDom(s.endContainer)),(o,r)=>ve(o,r)?m.none():m.some(()=>{s.deleteContents(),PS(e,!0,o,r,n).each(a=>{t.setRng(a.toRange())})})).getOr(m.none())},DS=(e,t)=>{const n=C.fromDom(t),s=q(ve,e);return os(n,oa,s).isSome()},B2=(e,t)=>DS(e,t.startContainer)||DS(e,t.endContainer),I2=(e,t)=>{const n=Mt(e.dom,N.fromRangeStart(t)).isNone(),s=Dt(e.dom,N.fromRangeEnd(t)).isNone();return!B2(e,t)&&n&&s},L2=e=>m.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),$2=e=>{const t=C.fromDom(e.getBody()),n=e.selection.getRng();return I2(t,n)?L2(e):O2(t,e.selection,e.schema)},zd=(e,t)=>e.selection.isCollapsed()?m.none():$2(e),ms=(e,t,n,s,o)=>m.from(t._selectionOverrides.showCaret(e,n,s,o)),F2=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},Ma=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?m.none():m.some(F2(t)),M2=(e,t,n)=>{const s=qu(1,e.getBody(),t),o=N.fromRangeStart(s),r=o.getNode();if(fa(r))return ms(1,e,r,!o.isAtEnd(),!1);const a=o.getNode(!0);if(fa(a))return ms(1,e,a,!1,!1);const i=go(e.dom.getRoot(),o.getNode());return fa(i)?ms(1,e,i,!1,n):m.none()},Hd=(e,t,n)=>t.collapsed?M2(e,t,n).getOr(t):t,U2=e=>Ds(e)||wa(e),z2=e=>Os(e)||ka(e),H2=(e,t)=>{O(t)&&t.data.length===0&&e.remove(t)},OS=(e,t,n,s,o,r)=>{ms(s,e,r.getNode(!o),o,!0).each(a=>{if(t.collapsed){const i=t.cloneRange();o?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else t.deleteContents();e.selection.setRng(a)}),H2(e.dom,n)},W2=(e,t)=>{const n=e.selection.getRng();if(!O(n.commonAncestorContainer))return m.none();const s=t?nt.Forwards:nt.Backwards,o=qn(e.getBody()),r=q(Ku,t?o.next:o.prev),a=t?U2:z2,i=ha(s,e.getBody(),n),c=r(i),l=c&&on(t,c);if(!l||!Gi(i,l))return m.none();if(a(l))return m.some(()=>OS(e,n,i.getNode(),s,t,l));const u=r(l);return u&&a(u)&&Gi(l,u)?m.some(()=>OS(e,n,i.getNode(),s,t,u)):m.none()},Wd=(e,t)=>W2(e,t),Vd=(e,t)=>{const n=e.getBody();return t?vt(n).filter(Ds):mn(n).filter(Os)},jd=e=>{const t=e.selection.getRng();return!t.collapsed&&(Vd(e,!0).exists(n=>n.isEqual(N.fromRangeStart(t)))||Vd(e,!1).exists(n=>n.isEqual(N.fromRangeEnd(t))))},V2=e=>M(e)&&(oa(C.fromDom(e))||zo(C.fromDom(e))),Kt=Wn.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),j2=(e,t)=>{const n=t.getNode(!e),s=e?"after":"before";return Y(n)&&n.getAttribute("data-mce-caret")===s},q2=(e,t,n,s,o)=>{const r=a=>o.isInline(a.nodeName.toLowerCase())&&!Vn(n,s,e);return Vb(!t,n).fold(()=>Vb(t,s).fold(De,r),r)},BS=(e,t,n,s,o)=>{const r=o.getNode(!n);return hc(C.fromDom(t),C.fromDom(s.getNode())).map(a=>Ct(e,a)?Kt.remove(a.dom):Kt.moveToElement(r)).orThunk(()=>m.some(Kt.moveToElement(r)))},IS=(e,t,n,s)=>Jt(t,e,n).bind(o=>V2(o.getNode())||q2(e,t,n,o,s)?m.none():t&&Ne(o.getNode())||!t&&Ne(o.getNode(!0))?BS(s,e,t,n,o):t&&Os(n)||!t&&Ds(n)?m.some(Kt.moveToPosition(o)):m.none()),K2=(e,t)=>Ve(t)?m.none():e&&Ne(t.nextSibling)?m.some(Kt.moveToElement(t.nextSibling)):!e&&Ne(t.previousSibling)?m.some(Kt.moveToElement(t.previousSibling)):m.none(),G2=(e,t,n)=>n.fold(s=>m.some(Kt.remove(s)),s=>m.some(Kt.moveToElement(s)),s=>Vn(t,s,e)?m.none():m.some(Kt.moveToPosition(s))),Y2=(e,t,n,s)=>j2(t,n)?K2(t,n.getNode(!t)).orThunk(()=>IS(e,t,n,s)):IS(e,t,n,s).bind(o=>G2(e,n,o)),X2=(e,t,n,s)=>{const o=qu(t?1:-1,e,n),r=N.fromRangeStart(o),a=C.fromDom(e);return!t&&Os(r)?m.some(Kt.remove(r.getNode(!0))):t&&Ds(r)?m.some(Kt.remove(r.getNode())):!t&&Ds(r)&&mc(a,r,s)?Ny(a,r,s).map(i=>Kt.remove(i.getNode())):t&&Os(r)&&Bf(a,r,s)?zB(a,r,s).map(i=>Kt.remove(i.getNode())):Y2(e,t,r,s)},Z2=(e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),fo(e,t,C.fromDom(n)),!0),Q2=(e,t)=>n=>{const s=t?N.before(n):N.after(n);return e.selection.setRng(s.toRange()),!0},J2=e=>t=>(e.selection.setRng(t.toRange()),!0),LS=(e,t)=>m.from(go(e.getBody(),t)),eH=(e,t)=>{const n=e.selection.getNode();return LS(e,n).filter(Ne).fold(()=>X2(e.getBody(),t,e.selection.getRng(),e.schema).map(s=>()=>s.fold(Z2(e,t),Q2(e,t),J2(e))),()=>m.some(le))},tH=e=>{T(bt(e,".mce-offscreen-selection"),Re)},nH=(e,t)=>{const n=e.selection.getNode();return Ne(n)&&!_i(n)?LS(e,n.parentNode).filter(Ne).fold(()=>m.some(()=>{tH(C.fromDom(e.getBody())),fo(e,t,C.fromDom(e.selection.getNode())),Mf(e)}),()=>m.some(le)):jd(e)?m.some(()=>{Yy(e,e.selection.getRng(),C.fromDom(e.getBody()))}):m.none()},$S=e=>{const t=e.dom,n=e.selection,s=go(e.getBody(),n.getNode());if(dn(s)&&t.isBlock(s)&&t.isEmpty(s)){const o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(s,""),s.appendChild(o),n.setRng(N.before(o).toRange())}return!0},qd=(e,t)=>e.selection.isCollapsed()?eH(e,t):nH(e,t),FS=e=>e.hasOwnProperty("text"),MS=e=>e.hasOwnProperty("marker"),US=(e,t)=>{const n=(r,a)=>{if(O(r))return{text:r,offset:a};{const i=t(),c=r.childNodes;return a<c.length?(r.insertBefore(i,c[a]),{marker:i,before:!0}):(r.appendChild(i),{marker:i,before:!1})}},s=n(e.endContainer,e.endOffset);return{start:n(e.startContainer,e.startOffset),end:s}},zS=e=>{var t,n;const{start:s,end:o}=e,r=new window.Range;return FS(s)?r.setStart(s.text,s.offset):MS(s)&&(s.before?r.setStartBefore(s.marker):r.setStartAfter(s.marker),(t=s.marker.parentNode)===null||t===void 0||t.removeChild(s.marker)),FS(o)?r.setEnd(o.text,o.offset):MS(o)&&(o.before?r.setEndBefore(o.marker):r.setEndAfter(o.marker),(n=o.marker.parentNode)===null||n===void 0||n.removeChild(o.marker)),r},Kd=(e,t)=>{var n;const s=e.dom,o=s.getParent(e.selection.getStart(),s.isBlock),r=s.getParent(e.selection.getEnd(),s.isBlock),a=e.getBody();if(((n=o==null?void 0:o.nodeName)===null||n===void 0?void 0:n.toLowerCase())==="div"&&o&&r&&o===a.firstChild&&r===a.lastChild&&!s.isEmpty(a)){const c=o.cloneNode(!1),l=()=>{if(t?qy(e):pc(e),a.firstChild!==o){const u=US(e.selection.getRng(),()=>document.createElement("span"));Array.from(a.childNodes).forEach(f=>c.appendChild(f)),a.appendChild(c),e.selection.setRng(zS(u))}};return m.some(l)}return m.none()},sH=(e,t)=>{const n=N.fromRangeStart(e.selection.getRng());return Jt(t,e.getBody(),n).filter(s=>t?OB(s):BB(s)).bind(s=>ju(t?0:-1,s)).map(s=>()=>e.selection.select(s))},Gd=(e,t)=>e.selection.isCollapsed()?sH(e,t):m.none(),cr=O,HS=e=>cr(e)&&e.data[0]===Qe,WS=e=>cr(e)&&e.data[e.data.length-1]===Qe,VS=e=>{var t;return((t=e.ownerDocument)!==null&&t!==void 0?t:document).createTextNode(Qe)},oH=e=>{var t;if(cr(e.previousSibling))return WS(e.previousSibling)||e.previousSibling.appendData(Qe),e.previousSibling;if(cr(e))return HS(e)||e.insertData(0,Qe),e;{const n=VS(e);return(t=e.parentNode)===null||t===void 0||t.insertBefore(n,e),n}},rH=e=>{var t,n;if(cr(e.nextSibling))return HS(e.nextSibling)||e.nextSibling.insertData(0,Qe),e.nextSibling;if(cr(e))return WS(e)||e.appendData(Qe),e;{const s=VS(e);return e.nextSibling?(t=e.parentNode)===null||t===void 0||t.insertBefore(s,e.nextSibling):(n=e.parentNode)===null||n===void 0||n.appendChild(s),s}},Ic=(e,t)=>e?oH(t):rH(t),aH=q(Ic,!0),iH=q(Ic,!1),jS=(e,t)=>O(e.container())?Ic(t,e.container()):Ic(t,e.getNode()),qS=(e,t)=>{const n=t.get();return n&&e.container()===n&&xs(n)},Yd=(e,t)=>t.fold(n=>{oo(e.get());const s=aH(n);return e.set(s),m.some(N(s,s.length-1))},n=>vt(n).map(s=>{if(qS(s,e)){const o=e.get();return N(o,1)}else{oo(e.get());const o=jS(s,!0);return e.set(o),N(o,1)}}),n=>mn(n).map(s=>{if(qS(s,e)){const o=e.get();return N(o,o.length-1)}else{oo(e.get());const o=jS(s,!1);return e.set(o),N(o,o.length-1)}}),n=>{oo(e.get());const s=iH(n);return e.set(s),m.some(N(s,1))}),KS=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n].apply(null,t);if(s.isSome())return s}return m.none()},_t=Wn.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),GS=(e,t)=>{const n=As(t,e);return n||e},cH=(e,t,n)=>{const s=Wy(n),o=GS(t,s.container());return Bs(e,o,s).fold(()=>Dt(o,s).bind(q(Bs,e,o)).map(r=>_t.before(r)),m.none)},lH=(e,t)=>ao(e,t)===null,YS=(e,t,n)=>Bs(e,t,n).filter(q(lH,t)),uH=(e,t,n)=>{const s=Vy(n);return YS(e,t,s).bind(o=>Mt(o,s).isNone()?m.some(_t.start(o)):m.none())},fH=(e,t,n)=>{const s=Wy(n);return YS(e,t,s).bind(o=>Dt(o,s).isNone()?m.some(_t.end(o)):m.none())},dH=(e,t,n)=>{const s=Vy(n),o=GS(t,s.container());return Bs(e,o,s).fold(()=>Mt(o,s).bind(q(Bs,e,o)).map(r=>_t.after(r)),m.none)},XS=e=>!Hy(Xd(e)),Xn=(e,t,n)=>KS([cH,uH,fH,dH],[e,t,n]).filter(XS),Xd=e=>e.fold(wt,wt,wt,wt),ZS=e=>e.fold(H("before"),H("start"),H("end"),H("after")),Lc=e=>e.fold(_t.before,_t.before,_t.after,_t.after),Zd=e=>e.fold(_t.start,_t.start,_t.end,_t.end),mH=(e,t)=>ZS(e)===ZS(t)&&Xd(e)===Xd(t),gH=(e,t,n,s,o,r)=>pt(Bs(t,n,s),Bs(t,n,o),(a,i)=>a!==i&&yI(n,a,i)?_t.after(e?a:i):r).getOr(r),pH=(e,t)=>e.fold(He,n=>!mH(n,t)),hH=(e,t,n,s,o)=>{const r=on(e,o);return Jt(e,n,r).map(q(on,e)).fold(()=>s.map(Lc),c=>Xn(t,n,c).map(q(gH,e,t,n,r,c)).filter(q(pH,s))).filter(XS)},bH=(e,t)=>e?t.fold(vn(m.some,_t.start),m.none,vn(m.some,_t.after),m.none):t.fold(m.none,vn(m.some,_t.before),m.none,vn(m.some,_t.end)),CH=(e,t,n,s)=>{const o=on(e,s),r=Xn(t,n,o);return Xn(t,n,o).bind(q(bH,e)).orThunk(()=>hH(e,t,n,r,s))},yH=e=>we(e.selection.getSel().modify),QS=(e,t,n)=>{const s=e?1:-1;return t.setRng(N(n.container(),n.offset()+s).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},vH=(e,t)=>{const n=t.selection.getRng(),s=e?N.fromRangeEnd(n):N.fromRangeStart(n);return yH(t)?e&&xu(s)?QS(!0,t.selection,s):!e&&_u(s)?QS(!1,t.selection,s):!1:!1};var Zn;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Zn||(Zn={}));const $c=(e,t)=>e===nt.Backwards?Ar(t):t,EH=(e,t,n)=>e===nt.Forwards?t.next(n):t.prev(n),SH=(e,t,n,s)=>$e(s.getNode(t===nt.Forwards))?Zn.Br:Vn(n,s)===!1?Zn.Block:Zn.Wrap,JS=(e,t,n,s)=>{const o=qn(n);let r=s;const a=[];for(;r;){const i=EH(t,o,r);if(!i)break;if($e(i.getNode(!1)))return t===nt.Forwards?{positions:$c(t,a).concat([i]),breakType:Zn.Br,breakAt:m.some(i)}:{positions:$c(t,a),breakType:Zn.Br,breakAt:m.some(i)};if(!i.isVisible()){r=i;continue}if(e(r,i)){const c=SH(n,t,r,i);return{positions:$c(t,a),breakType:c,breakAt:m.some(i)}}a.push(i),r=i}return{positions:$c(t,a),breakType:Zn.Eol,breakAt:m.none()}},ew=(e,t,n,s)=>t(n,s).breakAt.map(o=>{const r=t(n,o).positions;return e===nt.Backwards?r.concat(o):[o].concat(r)}).getOr([]),Qd=(e,t)=>Lt(e,(n,s)=>n.fold(()=>m.some(s),o=>pt(Rt(o.getClientRects()),Rt(s.getClientRects()),(r,a)=>{const i=Math.abs(t-r.left);return Math.abs(t-a.left)<=i?s:o}).or(n)),m.none()),Fc=(e,t)=>Rt(t.getClientRects()).bind(n=>Qd(e,n.left)),Ua=q(JS,N.isAbove,-1),za=q(JS,N.isBelow,1),tw=q(ew,-1,Ua),nw=q(ew,1,za),sw=(e,t)=>Ua(e,t).breakAt.isNone(),ow=(e,t)=>za(e,t).breakAt.isNone(),wH=e=>vt(e).map(t=>[t].concat(za(e,t).positions)).getOr([]),kH=e=>mn(e).map(t=>Ua(e,t).positions.concat(t)).getOr([]),xH=(e,t)=>Fc(tw(e,t),t),_H=(e,t)=>Fc(nw(e,t),t),NH=Ne,rw=(e,t)=>Math.abs(e.left-t),aw=(e,t)=>Math.abs(e.right-t),AH=e=>No(e,"node"),iw=(e,t)=>fi(e,(n,s)=>{const o=Math.min(rw(n,t),aw(n,t)),r=Math.min(rw(s,t),aw(s,t));return r===o&&AH(s)&&NH(s.node)||r<o?s:n}),RH=e=>{const t=n=>pe(n,s=>{const o=no(s);return o.node=e,o});if(Y(e))return t(e.getClientRects());if(O(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}else return[]},cw=e=>Zt(e,RH);var Ha;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Ha||(Ha={}));const TH=(e,t,n,s)=>{let o=s;for(;o=ma(o,e,Ih,t);)if(n(o))return},lw=(e,t,n,s,o,r)=>{let a=0;const i=[],c=f=>{let d=cw([f]);e===-1&&(d=d.reverse());for(let g=0;g<d.length;g++){const h=d[g];if(!n(h,l)){if(i.length>0&&t(h,Us(i))&&a++,h.line=a,o(h))return!0;i.push(h)}}return!1},l=Us(r.getClientRects());if(!l)return i;const u=r.getNode();return u&&(c(u),TH(e,s,c,u)),i},PH=(e,t)=>t.line>e,DH=(e,t)=>t.line===e,OH=q(lw,Ha.Up,ra,aa),BH=q(lw,Ha.Down,aa,ra),uw=e=>Us(e.getClientRects()),IH=(e,t,n,s)=>{const o=qn(t);let r,a,i,c;const l=[];let u=0;e===1?(r=o.next,a=aa,i=ra,c=N.after(s)):(r=o.prev,a=ra,i=aa,c=N.before(s));const f=uw(c);do{if(!c.isVisible())continue;const d=uw(c);if(i(d,f))continue;l.length>0&&a(d,Us(l))&&u++;const g=no(d);if(g.position=c,g.line=u,n(g))return l;l.push(g)}while(c=r(c));return l},fw=e=>t=>PH(e,t),Jd=e=>t=>DH(e,t),gs=(e,t)=>{e.selection.setRng(t),Sa(e,e.selection.getRng())},em=(e,t,n)=>m.some(Hd(e,t,n)),dw=(e,t,n,s,o,r)=>{const a=t===nt.Forwards,i=qn(e.getBody()),c=q(Ku,a?i.next:i.prev),l=a?s:o;if(!n.collapsed){const h=Fi(n);if(r(h))return ms(t,e,h,t===nt.Backwards,!1);if(jd(e)){const p=n.cloneRange();return p.collapse(t===nt.Backwards),m.from(p)}}const u=ha(t,e.getBody(),n);if(l(u))return Ma(e,u.getNode(!a));let f=c(u);const d=Ah(n);if(f)f=on(a,f);else return d?m.some(n):m.none();if(l(f))return ms(t,e,f.getNode(!a),a,!1);const g=c(f);return g&&l(g)&&Gi(f,g)?ms(t,e,g.getNode(!a),a,!1):d?em(e,f.toRange(),!1):m.none()},mw=(e,t,n,s,o,r)=>{const a=ha(t,e.getBody(),n),i=Us(a.getClientRects()),c=t===Ha.Down,l=e.getBody();if(!i)return m.none();if(jd(e)){const b=c?N.fromRangeEnd(n):N.fromRangeStart(n);return(c?_H:xH)(l,b).orThunk(()=>m.from(b)).map(v=>v.toRange())}const f=(c?BH:OH)(l,fw(1),a),d=se(f,Jd(1)),g=i.left,h=iw(d,g);if(h&&r(h.node)){const b=Math.abs(g-h.left),y=Math.abs(g-h.right);return ms(t,e,h.node,b<y,!1)}let p;if(s(a)?p=a.getNode():o(a)?p=a.getNode(!0):p=Fi(n),p){const b=IH(t,l,fw(1),p);let y=iw(se(b,Jd(1)),g);if(y||(y=Us(se(b,Jd(0))),y))return em(e,y.position.toRange(),!1)}return d.length===0?tm(e,c).filter(c?o:s).map(b=>Hd(e,b.toRange(),!1)):m.none()},tm=(e,t)=>{const n=e.selection.getRng(),s=t?N.fromRangeEnd(n):N.fromRangeStart(n),o=HD(s.container(),e.getBody());if(t){const r=za(o,s);return bs(r.positions)}else{const r=Ua(o,s);return Rt(r.positions)}},gw=(e,t,n)=>tm(e,t).filter(n).exists(s=>(e.selection.setRng(s.toRange()),!0)),Mc=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},pw=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},hw=(e,t,n)=>Yd(t,n).map(s=>(Mc(e,s),n)),LH=(e,t,n)=>{const s=N.fromRangeStart(e);if(e.collapsed)return s;{const o=N.fromRangeEnd(e);return n?Mt(t,o).getOr(o):Dt(t,s).getOr(s)}},$H=(e,t,n)=>{const s=e.getBody(),o=LH(e.selection.getRng(),s,n),r=q(mo,e);return CH(n,r,s,o).bind(i=>hw(e,t,i))},FH=(e,t,n)=>{const s=pe(bt(C.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),a=>a.dom),o=se(s,e),r=se(n,e);T(ci(o,r),q(pw,!1)),T(ci(r,o),q(pw,!0))},MH=(e,t)=>{const n=t.get();if(e.selection.isCollapsed()&&!e.composing&&n){const s=N.fromRangeStart(e.selection.getRng());N.isTextPosition(s)&&!vI(s)&&(Mc(e,TD(n,s)),t.set(null))}},UH=(e,t,n,s)=>{if(t.selection.isCollapsed()){const o=se(s,e);T(o,r=>{const a=N.fromRangeStart(t.selection.getRng());Xn(e,t.getBody(),a).bind(i=>hw(t,n,i))})}},bw=(e,t,n)=>ua(e)?$H(e,t,n).isSome():!1,Cw=(e,t,n)=>ua(t)?vH(e,t):!1,zH=e=>{const t=tt(null),n=q(mo,e);return e.on("NodeChange",s=>{ua(e)&&(FH(n,e.dom,s.parents),MH(e,t),UH(n,e,t,s.parents))}),t},HH=q(Cw,!0),WH=q(Cw,!1),Uc=(e,t,n)=>{if(ua(e)){const s=tm(e,t).getOrThunk(()=>{const o=e.selection.getRng();return t?N.fromRangeEnd(o):N.fromRangeStart(o)});return Xn(q(mo,e),e.getBody(),s).exists(o=>{const r=Lc(o);return Yd(n,r).exists(a=>(Mc(e,a),!0))})}else return!1},VH=(e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},jH=e=>pt(vt(e),mn(e),(t,n)=>{const s=on(!0,t),o=on(!1,n);return Dt(e,s).forall(r=>r.isEqual(o))}).getOr(!0),yw=(e,t)=>n=>Yd(t,n).map(s=>()=>Mc(e,s)),vw=(e,t,n,s)=>{const o=e.getBody(),r=q(mo,e);e.undoManager.ignore(()=>{e.selection.setRng(VH(n,s)),pc(e),Xn(r,o,N.fromRangeStart(e.selection.getRng())).map(Zd).bind(yw(e,t)).each(xr)}),e.nodeChanged()},qH=(e,t)=>{const n=As(t,e);return n||e},KH=(e,t,n,s)=>{const o=qH(e.getBody(),s.container()),r=q(mo,e),a=Xn(r,o,s);return a.bind(c=>n?c.fold(H(m.some(Zd(c))),m.none,H(m.some(Lc(c))),m.none):c.fold(m.none,H(m.some(Lc(c))),m.none,H(m.some(Zd(c))))).map(yw(e,t)).getOrThunk(()=>{const c=Yo(n,o,s),l=c.bind(u=>Xn(r,o,u));return pt(a,l,()=>Bs(r,o,s).bind(u=>jH(u)?m.some(()=>{fo(e,n,C.fromDom(u))}):m.none())).getOrThunk(()=>l.bind(()=>c.map(u=>()=>{n?vw(e,t,s,u):vw(e,t,u,s)})))})},nm=(e,t,n)=>{if(e.selection.isCollapsed()&&ua(e)){const s=N.fromRangeStart(e.selection.getRng());return KH(e,t,n,s)}return m.none()},GH=e=>Hl(e)>1,Ew=(e,t)=>{const n=C.fromDom(e.getBody()),s=C.fromDom(e.selection.getStart()),o=fs(s,n);return Nr(o,t).fold(H(o),r=>o.slice(0,r))},YH=e=>Hl(e)===1,XH=e=>Ew(e,t=>e.schema.isBlock(he(t))||GH(t)),ZH=e=>Ew(e,t=>e.schema.isBlock(he(t))),Sw=(e,t)=>{const n=q(wv,e);return Zt(t,s=>n(s)?[s.dom]:[])},ww=e=>{const t=ZH(e);return Sw(e,t)},QH=(e,t,n,s)=>{const o=Sw(t,s);if(o.length===0)fo(t,e,n);else{const r=Sv(n.dom,o);t.selection.setRng(r.toRange())}},JH=(e,t)=>{const n=se(XH(e),YH);return bs(n).bind(s=>{const o=N.fromRangeStart(e.selection.getRng());return Ky(t,o,s.dom)&&!df(s)?m.some(()=>QH(t,e,s,n)):m.none()})},eW=(e,t)=>{const n=t.parentElement;return $e(t)&&!St(n)&&e.dom.isEmpty(n)},tW=e=>df(C.fromDom(e)),kw=(e,t)=>{const n=e.selection.getStart(),s=eW(e,n)||tW(n)?Sv(n,t):u$(e.selection.getRng(),t);e.selection.setRng(s.toRange())},nW=(e,t)=>{const n=ci(t,ww(e));n.length>0&&kw(e,n)},xw=e=>O(e.startContainer),sW=e=>e.startOffset===0&&xw(e),oW=(e,t)=>{const n=t.startContainer.parentElement;return!St(n)&&wv(e,C.fromDom(n))},rW=e=>{const t=e.startContainer.parentNode,n=e.endContainer.parentNode;return!St(t)&&!St(n)&&t.isEqualNode(n)},aW=e=>{const t=e.endContainer;return e.endOffset===(O(t)?t.length:t.childNodes.length)},iW=e=>rW(e)&&aW(e),cW=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),lW=e=>iW(e)||cW(e),uW=e=>{const t=e.selection.getRng();return sW(t)&&oW(e,t)&&lW(t)},fW=e=>{if(uW(e)){const t=ww(e);return m.some(()=>{pc(e),nW(e,t)})}else return m.none()},sm=(e,t)=>e.selection.isCollapsed()?JH(e,t):fW(e),dW=(e,t)=>Rp(e,n=>en(n.dom),n=>t.isBlock(he(n))),mW=e=>dW(C.fromDom(e.selection.getStart()),e.schema),gW=e=>{const t=e.selection.getRng();return t.collapsed&&(xw(t)||e.dom.isEmpty(t.startContainer))&&!mW(e)},Wa=e=>(gW(e)&&kw(e,[]),!0),om=(e,t,n)=>M(n)?m.some(()=>{e._selectionOverrides.hideFakeCaret(),fo(e,t,C.fromDom(n))}):m.none(),pW=(e,t)=>{const n=t?wa:ka,s=t?nt.Forwards:nt.Backwards,o=ha(s,e.getBody(),e.selection.getRng());return n(o)?om(e,t,o.getNode(!t)):m.from(on(t,o)).filter(r=>n(r)&&Gi(o,r)).bind(r=>om(e,t,r.getNode(!t)))},hW=(e,t)=>{const n=e.selection.getNode();return Hn(n)?om(e,t,n):m.none()},rm=(e,t)=>e.selection.isCollapsed()?pW(e,t):hW(e,t),bW=e=>Hs(e,t=>dn(t.dom)||Ne(t.dom)).exists(t=>dn(t.dom)),am=e=>di(e??"").getOr(0),_w=(e,t)=>{const n=e||PR(t)?"margin":"padding",s=Un(t,"direction")==="rtl"?"-right":"-left";return n+s},CW=(e,t,n,s,o,r)=>{const a=_w(n,C.fromDom(r)),i=am(e.getStyle(r,a));if(t==="outdent"){const c=Math.max(0,i-s);e.setStyle(r,a,c?c+o:"")}else{const c=i+s+o;e.setStyle(r,a,c)}},yW=(e,t)=>es(t,n=>{const s=_w(vb(e),n),o=Ei(n,s).map(am).getOr(0);return e.dom.getContentEditable(n.dom)!=="false"&&o>0}),Nw=e=>{const t=Rw(e);return!e.mode.isReadOnly()&&(t.length>1||yW(e,t))},Aw=e=>ku(e)||zo(e),vW=e=>wn(e).exists(Aw),Rw=e=>se(Gl(e.selection.getSelectedBlocks()),t=>!Aw(t)&&!vW(t)&&bW(t)),Tw=(e,t)=>{var n,s;if(e.mode.isReadOnly())return;const{dom:o}=e,r=yP(e),a=(s=(n=/[a-z%]+$/i.exec(r))===null||n===void 0?void 0:n[0])!==null&&s!==void 0?s:"px",i=am(r),c=vb(e);T(Rw(e),l=>{CW(o,t,c,i,a,l.dom)})},EW=e=>Tw(e,"indent"),Pw=e=>Tw(e,"outdent"),Dw=e=>{if(e.selection.isCollapsed()&&Nw(e)){const t=e.dom,n=e.selection.getRng(),s=N.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(o!==null&&Of(C.fromDom(o),s,e.schema))return m.some(()=>Pw(e))}return m.none()},Ow=(e,t,n)=>_o([Dw,qd,Wd,(s,o)=>nm(s,t,o),Ud,Kf,Gd,rm,zd,sm,Kd],s=>s(e,n)).filter(s=>e.selection.isEditable()),SW=(e,t)=>{Ow(e,t,!1).fold(()=>{e.selection.isEditable()&&(pc(e),Mf(e))},xr)},wW=(e,t)=>{Ow(e,t,!0).fold(()=>{e.selection.isEditable()&&qy(e)},xr)},kW=(e,t)=>{e.addCommand("delete",()=>{SW(e,t)}),e.addCommand("forwardDelete",()=>{wW(e,t)})},Bw=5,xW=400,Iw=e=>e.touches===void 0||e.touches.length!==1?m.none():m.some(e.touches[0]),_W=(e,t)=>{const n=Math.abs(e.clientX-t.x),s=Math.abs(e.clientY-t.y);return n>Bw||s>Bw},NW=e=>{const t=cs(),n=tt(!1),s=Su(o=>{e.dispatch("longpress",{...o,type:"longpress"}),n.set(!0)},xW);e.on("touchstart",o=>{Iw(o).each(r=>{s.cancel();const a={x:r.clientX,y:r.clientY,target:o.target};s.throttle(o),n.set(!1),t.set(a)})},!0),e.on("touchmove",o=>{s.cancel(),Iw(o).each(r=>{t.on(a=>{_W(r,a)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{s.cancel(),o.type!=="touchcancel"&&t.get().filter(r=>r.target.isEqualNode(o.target)).each(()=>{n.get()?o.preventDefault():e.dispatch("tap",{...o,type:"tap"})})},!0)},im=(e,t)=>oe(e,t.nodeName),AW=(e,t)=>O(t)?!0:Y(t)?!im(e.getBlockElements(),t)&&!tn(t)&&!Gs(e,t)&&!nu(t):!1,RW=(e,t,n)=>Le(Sy(C.fromDom(n),C.fromDom(t)),s=>im(e,s.dom)),TW=(e,t)=>{if(O(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||im(e,t.nextSibling)||nu(t.nextSibling)}return!1},cm=e=>e.dom.create(yt(e),la(e)),PW=e=>{const t=e.dom,n=e.selection,s=e.schema,o=s.getBlockElements(),r=n.getStart(),a=e.getBody();let i,c,l=null;const u=yt(e);if(!r||!Y(r))return;const f=a.nodeName.toLowerCase();if(!s.isValidChild(f,u.toLowerCase())||RW(o,a,r))return;if(a.firstChild===a.lastChild&&$e(a.firstChild)){i=cm(e),i.appendChild(Ho().dom),a.replaceChild(i,a.firstChild),e.selection.setCursorLocation(i,0),e.nodeChanged();return}let d=a.firstChild;for(;d;)if(Y(d)&&hA(s,d),AW(s,d)){if(TW(o,d)){c=d,d=d.nextSibling,t.remove(c);continue}if(!i){if(!l&&e.hasFocus()&&(l=US(e.selection.getRng(),()=>document.createElement("span"))),!d.parentNode){d=null;break}i=cm(e),a.insertBefore(i,d)}c=d,d=d.nextSibling,i.appendChild(c)}else i=null,d=d.nextSibling;l&&(e.selection.setRng(zS(l)),e.nodeChanged())},Lw=(e,t,n)=>{const s=C.fromDom(cm(e)),o=Ho();je(s,o),n(t,s);const r=document.createRange();return r.setStartBefore(o.dom),r.setEndBefore(o.dom),r},DW=e=>{e.on("NodeChange",()=>PW(e))},$w=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,OW=(e,t,n)=>function(s){const o=arguments,r=o[o.length-2],a=r>0?t.charAt(r-1):"";if(a==='"')return s;if(a===">"){const i=t.lastIndexOf("<",r);if(i!==-1&&t.substring(i,r).indexOf('contenteditable="false"')!==-1)return s}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode(typeof o[1]=="string"?o[1]:o[0])+"</span>"},BW=(e,t,n)=>{let s=t.length,o=n.content;if(n.format!=="raw"){for(;s--;)o=o.replace(t[s],OW(e,o,Ab(e)));n.content=o}},IW=(e,t)=>es(e,n=>{const s=t.match(n);return s!==null&&s[0].length===t.length}),LW=e=>{const t="contenteditable",n=" "+I.trim(uD(e))+" ",s=" "+I.trim(Ab(e))+" ",o=$w(n),r=$w(s),a=fD(e);a.length>0&&e.on("BeforeSetContent",i=>{BW(e,a,i)}),e.parser.addAttributeFilter("class",i=>{let c=i.length;for(;c--;){const l=i[c];o(l)?l.attr(t,"true"):r(l)&&l.attr(t,"false")}}),e.serializer.addAttributeFilter(t,i=>{let c=i.length;for(;c--;){const l=i[c];if(!o(l)&&!r(l))continue;const u=l.attr("data-mce-content");a.length>0&&u?IW(a,u)?(l.name="#text",l.type=3,l.raw=!0,l.value=u):l.remove():l.attr(t,null)}})},$W=e=>Ci(C.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),Fw=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Nu(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},FW=(e,t)=>{const n=$W(e);if(n){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),Fw(e,n);return}Nh(n)&&(Fw(e,n),e.undoManager.add())}},MW=e=>{e.on("keyup compositionstart",q(FW,e))},Mw=Ne,UW=(e,t,n)=>dw(t,e,n,Ds,Os,Mw),zW=(e,t,n)=>mw(t,e,n,r=>Ds(r)||Ey(r),r=>Os(r)||Pf(r),Mw),HW=e=>{const t=e.dom.create(yt(e));return t.innerHTML='<br data-mce-bogus="1">',t},Uw=(e,t,n)=>{const s=qn(e.getBody()),o=q(Ku,t===1?s.next:s.prev);if(n.collapsed){const r=e.dom.getParent(n.startContainer,"PRE");if(!r)return;if(!o(N.fromRangeStart(n))){const i=C.fromDom(HW(e));t===1?rs(C.fromDom(r),i):Ft(C.fromDom(r),i),e.selection.select(i.dom,!0),e.selection.collapse()}}},WW=(e,t)=>{const n=t?nt.Forwards:nt.Backwards,s=e.selection.getRng();return UW(n,e,s).orThunk(()=>(Uw(e,n,s),m.none()))},VW=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return zW(n,e,s).orThunk(()=>(Uw(e,n,s),m.none()))},jW=(e,t)=>{const n=t?e.getEnd(!0):e.getStart(!0);return Hy(n)?!t:t},zw=(e,t)=>WW(e,jW(e.selection,t)).exists(n=>(gs(e,n),!0)),Hw=(e,t)=>VW(e,t).exists(n=>(gs(e,n),!0)),Ww=(e,t)=>gw(e,t,t?Os:Ds),zc=(e,t)=>Vd(e,!t).map(n=>{const s=n.toRange(),o=e.selection.getRng();return t?s.setStart(o.startContainer,o.startOffset):s.setEnd(o.endContainer,o.endOffset),s}).exists(n=>(gs(e,n),!0)),qW=e=>Ee(["figcaption"],he(e)),KW=(e,t,n)=>{const s=q(ve,t);return Hs(C.fromDom(e.container()),o=>n.isBlock(he(o)),s).filter(qW)},GW=(e,t,n)=>t?ow(e.dom,n):sw(e.dom,n),YW=(e,t)=>{const n=C.fromDom(e.getBody()),s=N.fromRangeStart(e.selection.getRng());return KW(s,n,e.schema).exists(()=>{if(GW(n,t,s)){const r=Lw(e,n,t?je:Kl);return e.selection.setRng(r),!0}else return!1})},Vw=(e,t)=>e.selection.isCollapsed()?YW(e,t):!1,XW=(e,t,n)=>{const s=e.selection.getRng(),o=N.fromRangeStart(s);return e.getBody().firstChild===t&&sw(n,o)?(e.execCommand("InsertNewBlockBefore"),!0):!1},ZW=(e,t)=>{const n=e.selection.getRng(),s=N.fromRangeStart(n);return e.getBody().lastChild===t&&ow(t,s)?(e.execCommand("InsertNewBlockAfter"),!0):!1},QW=(e,t)=>t?m.from(e.dom.getParent(e.selection.getNode(),"details")).map(n=>ZW(e,n)).getOr(!1):m.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(n=>m.from(e.dom.getParent(n,"details")).map(s=>XW(e,s,n))).getOr(!1),jw=(e,t)=>QW(e,t),qw={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},JW=e=>pe(e,t=>({...qw,...t})),eV=e=>pe(e,t=>({...qw,...t})),Kw=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,tV=(e,t)=>Zt(JW(e),n=>Kw(n,t)?[n]:[]),nV=(e,t)=>Zt(eV(e),n=>Kw(n,t)?[n]:[]),ne=(e,...t)=>()=>e.apply(null,t),Va=(e,t)=>Ye(tV(e,t),n=>n.action()),Gw=(e,t)=>_o(nV(e,t),n=>n.action()),Yw=(e,t)=>{const n=t?nt.Forwards:nt.Backwards,s=e.selection.getRng();return dw(e,n,s,wa,ka,Hn).exists(o=>(gs(e,o),!0))},Xw=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return mw(e,n,s,wa,ka,Hn).exists(o=>(gs(e,o),!0))},Zw=(e,t)=>gw(e,t,t?ka:wa),Qw=Wn.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),ja={...Qw,none:e=>Qw.none(e)},sV=(e,t)=>Jw(e,t,He),Jw=(e,t,n)=>Zt(ht(e),s=>En(s,t)?n(s)?[s]:[]:Jw(s,t,n)),oV=(e,t,n=De)=>{if(n(t))return m.none();if(Ee(e,he(t)))return m.some(t);const s=o=>En(o,"table")||n(o);return Hr(t,e.join(","),s)},rV=(e,t)=>oV(["td","th"],e,t),aV=e=>sV(e,"th,td"),ek=(e,t)=>Bo(e,"table",t),lm=(e,t,n,s,o=He)=>{const r=s===1;if(!r&&n<=0)return ja.first(e[0]);if(r&&n>=e.length-1)return ja.last(e[e.length-1]);{const a=n+s,i=e[a];return o(i)?ja.middle(t,i):lm(e,t,a,s,o)}},tk=(e,t)=>ek(e,t).bind(n=>{const s=aV(n);return Nr(s,r=>ve(e,r)).map(r=>({index:r,all:s}))}),iV=(e,t,n)=>tk(e,n).fold(()=>ja.none(e),o=>lm(o.all,e,o.index,1,t)),cV=(e,t,n)=>tk(e,n).fold(()=>ja.none(),o=>lm(o.all,e,o.index,-1,t)),lV=e=>kR(e).filter(t=>t.trim().length!==0||t.indexOf(Ze)>-1).isSome(),uV=e=>pi(e)&&jt(e,"contenteditable")==="false",fV=["img","br"],dV=e=>lV(e)||Ee(fV,he(e))||uV(e),mV=e=>jl(e,dV),gV=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),pV=(e,t)=>Zt(t,n=>{const s=gV(no(n.getBoundingClientRect()),-1);return[{x:s.left,y:e(s),cell:n},{x:s.right,y:e(s),cell:n}]}),hV=(e,t,n)=>Lt(e,(s,o)=>s.fold(()=>m.some(o),r=>{const a=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n)),i=Math.sqrt(Math.abs(o.x-t)+Math.abs(o.y-n));return m.some(i<a?o:r)}),m.none()),nk=(e,t,n,s,o)=>{const r=bt(C.fromDom(n),"td,th,caption").map(i=>i.dom),a=se(pV(e,r),i=>t(i,o));return hV(a,s,o).map(i=>i.cell)},bV=e=>e.bottom,CV=e=>e.top,yV=(e,t)=>e.y<t,vV=(e,t)=>e.y>t,EV=q(nk,bV,yV),SV=q(nk,CV,vV),wV=(e,t)=>Rt(t.getClientRects()).bind(n=>EV(e,n.left,n.top)).bind(n=>Fc(kH(n),t)),kV=(e,t)=>bs(t.getClientRects()).bind(n=>SV(e,n.left,n.top)).bind(n=>Fc(wH(n),t)),xV=(e,t,n)=>n.breakAt.exists(s=>e(t,s).breakAt.isSome()),_V=e=>e.breakType===Zn.Wrap&&e.positions.length===0,NV=e=>e.breakType===Zn.Br&&e.positions.length===1,sk=(e,t,n)=>{const s=e(t,n);return _V(s)||!$e(n.getNode())&&NV(s)?!xV(e,t,s):s.breakAt.isNone()},AV=q(sk,Ua),RV=q(sk,za),TV=(e,t,n)=>{const s=N.fromRangeStart(t);return Xo(!e,n).exists(o=>o.isEqual(s))},PV=(e,t,n,s)=>{const o=e.selection.getRng(),r=t?1:-1;return Fb()&&TV(t,o,n)?(ms(r,e,n,!t,!1).each(a=>{gs(e,a)}),!0):!1},DV=(e,t,n)=>wV(t,n).orThunk(()=>Rt(n.getClientRects()).bind(s=>Qd(tw(e,N.before(t)),s.left))).getOr(N.before(t)),OV=(e,t,n)=>kV(t,n).orThunk(()=>Rt(n.getClientRects()).bind(s=>Qd(nw(e,N.after(t)),s.left))).getOr(N.after(t)),ok=(e,t)=>{const n=t.getNode(e);return zn(n)?m.some(n):m.none()},BV=(e,t,n)=>{t.undoManager.transact(()=>{const s=e?rs:Ft,o=Lw(t,C.fromDom(n),s);gs(t,o)})},rk=(e,t,n)=>{const s=ok(!!t,n),o=t===!1;s.fold(()=>gs(e,n.toRange()),r=>Xo(o,e.getBody()).filter(a=>a.isEqual(n)).fold(()=>gs(e,n.toRange()),a=>BV(t,e,r)))},IV=(e,t,n,s)=>{const o=e.selection.getRng(),r=N.fromRangeStart(o),a=e.getBody();if(!t&&AV(s,r)){const i=DV(a,n,r);return rk(e,t,i),!0}else if(t&&RV(s,r)){const i=OV(a,n,r);return rk(e,t,i),!0}else return!1},ak=(e,t,n)=>m.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(s=>m.from(e.dom.getParent(s,"table")).map(o=>n(e,t,o,s))).getOr(!1),ik=(e,t)=>ak(e,t,PV),um=(e,t)=>ak(e,t,IV),LV=e=>{const t=er.exact(e,0,e,0);return MO(t)},ck=(e,t,n)=>n.fold(m.none,m.none,(s,o)=>mV(o).map(r=>LV(r)),s=>e.mode.isReadOnly()?m.none():(e.execCommand("mceTableInsertRowAfter"),lk(e,t,s))),lk=(e,t,n)=>ck(e,t,iV(n,Ws)),$V=(e,t,n)=>ck(e,t,cV(n,Ws)),uk=(e,t)=>{const n=["table","li","dl"],s=C.fromDom(e.getBody()),o=i=>{const c=he(i);return ve(i,s)||Ee(n,c)},r=e.selection.getRng(),a=C.fromDom(t?r.endContainer:r.startContainer);return rV(a,o).map(i=>(ek(i,o).each(u=>{e.model.table.clearSelectedCells(u.dom)}),e.selection.collapse(!t),(t?lk:$V)(e,o,i).each(u=>{e.selection.setRng(u)}),!0)).getOr(!1)},FV=(e,t,n)=>{const s=Ce.os.isMacOS()||Ce.os.isiOS();Va([{keyCode:j.RIGHT,action:ne(zw,e,!0)},{keyCode:j.LEFT,action:ne(zw,e,!1)},{keyCode:j.UP,action:ne(Hw,e,!1)},{keyCode:j.DOWN,action:ne(Hw,e,!0)},...s?[{keyCode:j.UP,action:ne(zc,e,!1),metaKey:!0,shiftKey:!0},{keyCode:j.DOWN,action:ne(zc,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:j.RIGHT,action:ne(ik,e,!0)},{keyCode:j.LEFT,action:ne(ik,e,!1)},{keyCode:j.UP,action:ne(um,e,!1)},{keyCode:j.DOWN,action:ne(um,e,!0)},{keyCode:j.UP,action:ne(um,e,!1)},{keyCode:j.UP,action:ne(jw,e,!1)},{keyCode:j.DOWN,action:ne(jw,e,!0)},{keyCode:j.RIGHT,action:ne(Yw,e,!0)},{keyCode:j.LEFT,action:ne(Yw,e,!1)},{keyCode:j.UP,action:ne(Xw,e,!1)},{keyCode:j.DOWN,action:ne(Xw,e,!0)},{keyCode:j.RIGHT,action:ne(bw,e,t,!0)},{keyCode:j.LEFT,action:ne(bw,e,t,!1)},{keyCode:j.RIGHT,ctrlKey:!s,altKey:s,action:ne(HH,e,t)},{keyCode:j.LEFT,ctrlKey:!s,altKey:s,action:ne(WH,e,t)},{keyCode:j.UP,action:ne(Vw,e,!1)},{keyCode:j.DOWN,action:ne(Vw,e,!0)}],n).each(o=>{n.preventDefault()})},MV=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||FV(e,t,n)})},Tn=(e,t)=>({container:e,offset:t}),Hc=xe.DOM,Wc=e=>t=>e===t?-1:0,UV=e=>t=>e.isBlock(t)||Ee(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",fm=(e,t,n)=>{if(O(e)&&t>=0)return m.some(Tn(e,t));{const s=eo(Hc);return m.from(s.backwards(e,t,Wc(e),n)).map(o=>Tn(o.container,o.container.data.length))}},zV=(e,t,n)=>{if(O(e)&&t>=e.length)return m.some(Tn(e,t));{const s=eo(Hc);return m.from(s.forwards(e,t,Wc(e),n)).map(o=>Tn(o.container,0))}},dm=(e,t,n)=>{if(!O(e))return m.none();const s=e.data;if(t>=0&&t<=s.length)return m.some(Tn(e,t));{const o=eo(Hc);return m.from(o.backwards(e,t,Wc(e),n)).bind(r=>{const a=r.container.data;return dm(r.container,t+a.length,n)})}},fk=(e,t,n)=>{if(!O(e))return m.none();const s=e.data;if(t<=s.length)return m.some(Tn(e,t));{const o=eo(Hc);return m.from(o.forwards(e,t,Wc(e),n)).bind(r=>fk(r.container,t-s.length,n))}},mm=(e,t,n,s,o)=>{const r=eo(e,UV(e));return m.from(r.backwards(t,n,s,o))},HV=e=>e.collapsed&&O(e.startContainer),WV=e=>qt(e.toString().replace(/\u00A0/g," ")),dk=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,VV=(e,t)=>e.substring(t.length),jV=(e,t,n,s=!1)=>{let o;const r=n.charAt(0);for(o=t-1;o>=0;o--){const a=e.charAt(o);if(!s&&dk(a))return m.none();if(r===a&&gt(e,n,o,t))break}return m.some(o)},gm=(e,t,n,s=!1)=>{if(!HV(t))return m.none();const o={text:"",offset:0},r=(i,c,l)=>(o.text=l+o.text,o.offset+=c,jV(o.text,o.offset,n,s).getOr(c)),a=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return mm(e,t.startContainer,t.startOffset,r,a).bind(i=>{const c=t.cloneRange();if(c.setStart(i.container,i.offset),c.setEnd(t.endContainer,t.endOffset),c.collapsed)return m.none();const l=WV(c);return l.lastIndexOf(n)!==0?m.none():m.some({text:VV(l,n),range:c,trigger:n})})},qV=e=>e.nodeType===tp,KV=e=>e.nodeType===Ir,mk=e=>{if(qV(e))return Tn(e,e.data.length);{const t=e.childNodes;return t.length>0?mk(t[t.length-1]):Tn(e,t.length)}},gk=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?gk(n[t],0):n.length>0&&KV(e)&&n.length===t?mk(n[n.length-1]):Tn(e,t)},GV=(e,t)=>{var n;const s=(n=e.getParent(t.container,e.isBlock))!==null&&n!==void 0?n:e.getRoot();return mm(e,t.container,t.offset,(o,r)=>r===0?-1:r,s).filter(o=>{const r=o.container.data.charAt(o.offset-1);return!dk(r)}).isSome()},YV=e=>t=>{const n=gk(t.startContainer,t.startOffset);return!GV(e,n)},XV=(e,t,n)=>_o(n.triggers,s=>gm(e,t,s)),ZV=(e,t)=>{const n=t(),s=e.selection.getRng();return XV(e.dom,s,n).bind(o=>pk(e,t,o))},pk=(e,t,n,s={})=>{var o;const r=t(),i=(o=e.selection.getRng().startContainer.nodeValue)!==null&&o!==void 0?o:"",c=se(r.lookupByTrigger(n.trigger),u=>n.text.length>=u.minChars&&u.matches.getOrThunk(()=>YV(e.dom))(n.range,i,n.text));if(c.length===0)return m.none();const l=Promise.all(pe(c,u=>u.fetch(n.text,u.maxResults,s).then(d=>({matchText:n.text,items:d,columns:u.columns,onAction:u.onAction,highlightOn:u.highlightOn}))));return m.some({lookupData:l,context:n})};var cn;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(cn||(cn={}));const pm=(e,t,n)=>e.stype===cn.Error?t(e.serror):n(e.svalue),QV=e=>{const t=[],n=[];return T(e,s=>{pm(s,o=>n.push(o),o=>t.push(o))}),{values:t,errors:n}},JV=(e,t)=>e.stype===cn.Error?{stype:cn.Error,serror:t(e.serror)}:e,e3=(e,t)=>e.stype===cn.Value?{stype:cn.Value,svalue:t(e.svalue)}:e,t3=(e,t)=>e.stype===cn.Value?t(e.svalue):e,n3=(e,t)=>e.stype===cn.Error?t(e.serror):e,hk=e=>({stype:cn.Value,svalue:e}),bk=e=>({stype:cn.Error,serror:e}),ct={fromResult:e=>e.fold(bk,hk),toResult:e=>pm(e,Pt.error,Pt.value),svalue:hk,partition:QV,serror:bk,bind:t3,bindError:n3,map:e3,mapError:JV,fold:pm},hm=e=>ot(e)&&$t(e).length>100?" removed due to size":JSON.stringify(e,null,2),s3=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:H("... (only showing first ten failures)")}]):e;return pe(t,n=>"Failed path: ("+n.path.join(" > ")+`)
`+n.getErrorInfo())},Vc=(e,t)=>ct.serror([{path:e,getErrorInfo:t}]),o3=(e,t,n)=>Vc(e,()=>'Could not find valid *required* value for "'+t+'" in '+hm(n)),r3=(e,t)=>Vc(e,()=>'Choice schema did not contain choice key: "'+t+'"'),a3=(e,t,n)=>Vc(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+hm(t)),i3=(e,t)=>Vc(e,H(t)),c3=(e,t,n,s)=>Ae(n,s).fold(()=>a3(e,n,s),r=>r.extract(e.concat(["branch: "+s]),t)),l3=(e,t)=>({extract:(o,r)=>Ae(r,e).fold(()=>r3(o,e),i=>c3(o,r,t,i)),toString:()=>"chooseOn("+e+"). Possible values: "+$t(t)}),u3=(e,t)=>t,f3=(e,t)=>ii(e)&&ii(t)?jc(e,t):t,Ck=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<t.length;s++){const o=t[s];for(const r in o)oe(o,r)&&(n[r]=e(n[r],o[r]))}return n},jc=Ck(f3),yk=Ck(u3),bm=()=>({tag:"required",process:{}}),d3=e=>({tag:"defaultedThunk",process:e}),vk=e=>d3(H(e)),m3=()=>({tag:"option",process:{}}),g3=(e,t)=>e.length>0?ct.svalue(jc(t,yk.apply(void 0,e))):ct.svalue(t),Ek=e=>vn(ct.serror,yg)(e),Sk={consolidateObj:(e,t)=>{const n=ct.partition(e);return n.errors.length>0?Ek(n.errors):g3(n.values,t)},consolidateArr:e=>{const t=ct.partition(e);return t.errors.length>0?Ek(t.errors):ct.svalue(t.values)}},p3=(e,t,n,s)=>({tag:"field",key:e,newKey:t,presence:n,prop:s}),h3=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),wk=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},Cm=e=>{const t=(s,o)=>ct.bindError(e(o),r=>i3(s,r)),n=H("val");return{extract:t,toString:n}},b3=Cm(ct.svalue),C3=(e,t,n,s)=>Ae(t,n).fold(()=>o3(e,n,t),s),kk=(e,t,n,s)=>{const o=Ae(e,t).getOrThunk(()=>n(e));return s(o)},y3=(e,t,n)=>n(Ae(e,t)),v3=(e,t,n,s)=>{const o=Ae(e,t).map(r=>r===!0?n(e):r);return s(o)},E3=(e,t,n,s,o)=>{const r=i=>o.extract(t.concat([s]),i),a=i=>i.fold(()=>ct.svalue(m.none()),c=>{const l=o.extract(t.concat([s]),c);return ct.map(l,m.some)});switch(e.tag){case"required":return C3(t,n,s,r);case"defaultedThunk":return kk(n,s,e.process,r);case"option":return y3(n,s,a);case"defaultedOptionThunk":return v3(n,s,e.process,a);case"mergeWithThunk":return kk(n,s,H({}),i=>{const c=jc(e.process(n),i);return r(c)})}},S3=(e,t,n)=>{const s={},o=[];for(const r of n)wk(r,(a,i,c,l)=>{const u=E3(c,e,t,a,l);ct.fold(u,f=>{o.push(...f)},f=>{s[i]=f})},(a,i)=>{s[a]=i(t)});return o.length>0?ct.serror(o):ct.svalue(s)},qc=e=>({extract:(s,o)=>S3(s,o,e),toString:()=>`obj{
`+pe(e,o=>wk(o,(r,a,i,c)=>r+" -> "+c.toString(),(r,a)=>"state("+r+")")).join(`
`)+"}"}),ym=e=>({extract:(s,o)=>{const r=pe(o,(a,i)=>e.extract(s.concat(["["+i+"]"]),a));return Sk.consolidateArr(r)},toString:()=>"array("+e.toString()+")"}),w3=(e,t)=>{const n=wt;return{extract:(r,a)=>{const i=[];for(const c of e){const l=c.extract(r,a);if(l.stype===cn.Value)return{stype:cn.Value,svalue:n(l.svalue)};i.push(l)}return Sk.consolidateArr(i)},toString:()=>"oneOf("+pe(e,r=>r.toString()).join(", ")+")"}},k3=vn(ym,qc),x3=e=>Cm(t=>e(t).fold(ct.serror,ct.svalue)),_3=(e,t,n)=>{const s=t.extract([e],n);return ct.mapError(s,o=>({input:n,errors:o}))},N3=(e,t,n)=>ct.toResult(_3(e,t,n)),A3=e=>`Errors: 
`+s3(e.errors).join(`
`)+`

Input object: `+hm(e.input),vm=(e,t)=>l3(e,Tr(t,qc)),R3=H(b3),Kc=(e,t)=>Cm(n=>{const s=typeof n;return e(n)?ct.svalue(n):ct.serror(`Expected type: ${t} but got: ${s}`)}),T3=Kc(fn,"number"),lr=Kc(Q,"string"),P3=Kc(Bn,"boolean"),Em=Kc(we,"function"),ur=p3,xk=h3,_k=e=>x3(t=>Ee(e,t)?Pt.value(t):Pt.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),Sm=(e,t)=>ur(e,e,bm(),t),Nk=e=>Sm(e,lr),wm=(e,t)=>ur(e,e,bm(),_k(t)),Ak=e=>Sm(e,Em),Rk=(e,t)=>ur(e,e,bm(),ym(t)),km=(e,t)=>ur(e,e,m3(),t),yo=e=>km(e,lr),D3=e=>km(e,Em),O3=(e,t)=>ur(e,e,vk(t),R3()),fr=(e,t,n)=>ur(e,e,vk(t),n),Tk=(e,t)=>fr(e,t,T3),Gc=(e,t)=>fr(e,t,lr),Pk=(e,t,n)=>fr(e,t,_k(n)),xm=(e,t)=>fr(e,t,P3),ps=(e,t)=>fr(e,t,Em),B3=(e,t,n)=>fr(e,t,ym(n)),I3=Nk("type"),L3=Ak("fetch"),_m=Ak("onAction"),$3=ps("onSetup",()=>le),F3=yo("text"),M3=yo("icon"),U3=yo("tooltip"),z3=yo("label"),H3=xm("active",!1),W3=xm("enabled",!0),Dk=xm("primary",!1),V3=e=>O3("columns",e),qa=e=>Gc("type",e),j3=qc([I3,Nk("trigger"),Tk("minChars",1),V3(1),Tk("maxResults",10),D3("matches"),L3,_m,B3("highlightOn",[],lr)]),q3=e=>N3("Autocompleter",j3,e),Nm=[W3,U3,M3,F3,$3,Gc("context","mode:design")],Ok=[H3].concat(Nm),Yc=[ps("predicate",De),Pk("scope","node",["node","editor"]),Pk("position","selection",["node","selection","line"])],K3=Nm.concat([qa("contextformbutton"),Gc("align","end"),Dk,_m,xk("original",wt)]),G3=Ok.concat([qa("contextformbutton"),Gc("align","end"),Dk,_m,xk("original",wt)]),Y3=Nm.concat([qa("contextformbutton")]),X3=Ok.concat([qa("contextformtogglebutton")]),Z3=vm("type",{contextformbutton:K3,contextformtogglebutton:G3}),Am=[z3,Rk("commands",Z3),km("launch",vm("type",{contextformbutton:Y3,contextformtogglebutton:X3})),ps("onInput",le),ps("onSetup",le)],Q3=[...Yc,...Am,wm("type",["contextform"]),ps("initValue",H("")),yo("placeholder")],J3=[...Yc,...Am,wm("type",["contextsliderform"]),ps("initValue",H(0)),ps("min",H(0)),ps("max",H(100))],e8=[...Yc,...Am,wm("type",["contextsizeinputform"]),ps("initValue",H({width:"",height:""}))];vm("type",{contextform:Q3,contextsliderform:J3,contextsizeinputform:e8}),qc([qa("contexttoolbar"),Sm("items",w3([lr,k3([yo("name"),yo("label"),Rk("items",lr)])]))].concat(Yc));const t8=e=>{const t=e.ui.registry.getAll().popups,n=Tr(t,a=>q3(a).fold(i=>{throw new Error(A3(i))},wt)),s=Sg(li(n,a=>a.trigger)),o=Tl(n);return{dataset:n,triggers:s,lookupByTrigger:a=>se(o,i=>i.trigger===a)}},n8=(e,t)=>{const n=Su(t.load,50);e.on("input",s=>{s.inputType==="insertCompositionText"&&!e.composing||n.throttle()}),e.on("keydown",s=>{const o=s.which;o===8?n.throttle():o===27?(n.cancel(),t.cancelIfNecessary()):(o===38||o===40)&&n.cancel()},!0),e.on("remove",n.cancel)},s8=e=>{const t=cs(),n=tt(!1),s=t.isSet,o=()=>{s()&&(qT(e),n.set(!1),t.clear())},r=f=>{s()||t.set({trigger:f.trigger,matchLength:f.text.length})},a=In(()=>t8(e)),i=f=>t.get().map(d=>gm(e.dom,e.selection.getRng(),d.trigger,!0).bind(g=>pk(e,a,g,f))).getOrThunk(()=>ZV(e,a)),c=f=>{i(f).fold(o,d=>{r(d.context),d.lookupData.then(g=>{t.get().map(h=>{const p=d.context;h.trigger===p.trigger&&(t.set({...h,matchLength:p.text.length}),n.get()?(Fu(e,{range:p.range}),jT(e,{lookupData:g})):(n.set(!0),Fu(e,{range:p.range}),VT(e,{lookupData:g})))})})})},l=(f,d)=>{const g=f.compareBoundaryPoints(window.Range.START_TO_START,d),h=f.compareBoundaryPoints(window.Range.END_TO_END,d);return g>=0&&h<=0},u=()=>t.get().bind(({trigger:f})=>{const d=e.selection.getRng();return gm(e.dom,d,f,n.get()).filter(({range:g})=>l(d,g)).map(({range:g})=>g)});e.addCommand("mceAutocompleterReload",(f,d)=>{const g=ot(d)?d.fetchOptions:{};c(g)}),e.addCommand("mceAutocompleterClose",o),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{u().each(f=>{Fu(e,{range:f})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>u().isSome()),n8(e,{cancelIfNecessary:o,load:c})},o8=$n().browser.isSafari(),Bk=e=>ks(C.fromDom(e)),Ik=(e,t)=>{var n;return e.startOffset===0&&e.endOffset===((n=t.textContent)===null||n===void 0?void 0:n.length)},Xc=(e,t)=>m.from(e.getParent(t.container(),"details")),Lk=(e,t)=>Xc(e,t).isSome(),r8=(e,t)=>{const n=m.from(e.getParent(t.startContainer,"details")),s=m.from(e.getParent(t.endContainer,"details"));if(n.isSome()||s.isSome()){const o=n.bind(r=>m.from(e.select("summary",r)[0]));return m.some({startSummary:o,startDetails:n,endDetails:s})}else return m.none()},a8=(e,t)=>vt(t).exists(n=>n.isEqual(e)),i8=(e,t)=>mn(t).exists(n=>$e(n.getNode())&&Mt(t,n).exists(s=>s.isEqual(e))||n.isEqual(e)),c8=(e,t)=>t.startSummary.exists(n=>a8(e,n)),l8=(e,t)=>t.startSummary.exists(n=>i8(e,n)),u8=(e,t)=>t.startDetails.exists(n=>Mt(n,e).forall(s=>t.startSummary.exists(o=>!o.contains(e.container())&&o.contains(s.container())))),f8=(e,t,n)=>n.startDetails.exists(s=>Dt(e,t).forall(o=>!s.contains(o.container()))),$k=(e,t)=>{const n=t.getNode();rt(n)||e.selection.setCursorLocation(n,t.offset())},Fk=(e,t,n)=>{const s=e.dom.getParent(t.container(),"details");if(s&&!s.open){const o=e.dom.select("summary",s)[0];o&&(n?vt(o):mn(o)).each(a=>$k(e,a))}else $k(e,t)},d8=(e,t)=>{const n=c=>c.contains(e.startContainer),s=c=>c.contains(e.endContainer),o=t.startSummary.exists(n),r=t.startSummary.exists(s),a=t.startDetails.forall(c=>t.endDetails.forall(l=>c!==l));return(o||r)&&!(o&&r)||a},Mk=(e,t,n)=>{const{dom:s,selection:o}=e,r=e.getBody();if(n==="character"){const a=N.fromRangeStart(o.getRng()),i=s.getParent(a.container(),s.isBlock),c=Xc(s,a),l=i&&s.isEmpty(i),u=St(i==null?void 0:i.previousSibling),f=St(i==null?void 0:i.nextSibling);return l&&(t?f:u)&&Yo(!t,r,a).exists(h=>Lk(s,h)&&!Zg(c,Xc(s,h)))?!0:Yo(t,r,a).fold(De,d=>{const g=Xc(s,d);if(Lk(s,d)&&!Zg(c,g)){if(t||Fk(e,d,!1),i&&l){if(t&&u)return!0;if(!t&&f)return!0;Fk(e,d,t),e.dom.remove(i)}return!0}else return!1})}else return!1},m8=(e,t,n,s)=>{const r=e.selection.getRng(),a=N.fromRangeStart(r),i=e.getBody();return s==="selection"?d8(r,t):n?l8(a,t)||f8(i,a,t):c8(a,t)||u8(a,t)},g8=(e,t,n)=>r8(e.dom,e.selection.getRng()).fold(()=>Mk(e,t,n),s=>m8(e,s,t,n)||Mk(e,t,n)),p8=(e,t,n)=>{const s=e.selection,o=s.getNode(),r=s.getRng(),a=N.fromRangeStart(r);return eA(o)?(n==="selection"&&Ik(r,o)||Ky(t,a,o)?Bk(o):e.undoManager.transact(()=>{const i=s.getSel();let{anchorNode:c,anchorOffset:l,focusNode:u,focusOffset:f}=i??{};const d=()=>{M(c)&&M(l)&&M(u)&&M(f)&&(i==null||i.setBaseAndExtent(c,l,u,f))},g=()=>{c=i==null?void 0:i.anchorNode,l=i==null?void 0:i.anchorOffset,u=i==null?void 0:i.focusNode,f=i==null?void 0:i.focusOffset},h=(b,y)=>{T(b.childNodes,v=>{Ca(v)&&y.appendChild(v)})},p=e.dom.create("span",{"data-mce-bogus":"1"});h(o,p),o.appendChild(p),d(),(n==="word"||n==="line")&&(i==null||i.modify("extend",t?"right":"left",n)),!s.isCollapsed()&&Ik(s.getRng(),p)?Bk(o):(e.execCommand(t?"ForwardDelete":"Delete"),g(),h(p,o),d()),e.dom.remove(p)}),!0):!1},vo=(e,t,n)=>g8(e,t,n)||o8&&p8(e,t,n)?m.some(le):m.none(),Uk=e=>(t,n,s={})=>{const o=t.getBody(),r={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:le,inputType:n},a=lh(new InputEvent(e));return t.dispatch(e,{...a,...r,...s})},Ka=Uk("input"),Zc=Uk("beforeinput"),zk=$n(),Hk=zk.os,Wk=Hk.isMacOS()||Hk.isiOS(),h8=zk.browser.isFirefox(),b8=(e,t,n)=>{const s=n.keyCode===j.BACKSPACE?"deleteContentBackward":"deleteContentForward",o=e.selection.isCollapsed(),r=o?"character":"selection",a=i=>o?i?"word":"line":"selection";Gw([{keyCode:j.BACKSPACE,action:ne(Dw,e)},{keyCode:j.BACKSPACE,action:ne(qd,e,!1)},{keyCode:j.DELETE,action:ne(qd,e,!0)},{keyCode:j.BACKSPACE,action:ne(Wd,e,!1)},{keyCode:j.DELETE,action:ne(Wd,e,!0)},{keyCode:j.BACKSPACE,action:ne(nm,e,t,!1)},{keyCode:j.DELETE,action:ne(nm,e,t,!0)},{keyCode:j.BACKSPACE,action:ne(Kf,e,!1)},{keyCode:j.DELETE,action:ne(Kf,e,!0)},{keyCode:j.BACKSPACE,action:ne(vo,e,!1,r)},{keyCode:j.DELETE,action:ne(vo,e,!0,r)},...Wk?[{keyCode:j.BACKSPACE,altKey:!0,action:ne(vo,e,!1,a(!0))},{keyCode:j.DELETE,altKey:!0,action:ne(vo,e,!0,a(!0))},{keyCode:j.BACKSPACE,metaKey:!0,action:ne(vo,e,!1,a(!1))}]:[{keyCode:j.BACKSPACE,ctrlKey:!0,action:ne(vo,e,!1,a(!0))},{keyCode:j.DELETE,ctrlKey:!0,action:ne(vo,e,!0,a(!0))}],{keyCode:j.BACKSPACE,action:ne(Gd,e,!1)},{keyCode:j.DELETE,action:ne(Gd,e,!0)},{keyCode:j.BACKSPACE,action:ne(rm,e,!1)},{keyCode:j.DELETE,action:ne(rm,e,!0)},{keyCode:j.BACKSPACE,action:ne(zd,e,!1)},{keyCode:j.DELETE,action:ne(zd,e,!0)},{keyCode:j.BACKSPACE,action:ne(Ud,e,!1)},{keyCode:j.DELETE,action:ne(Ud,e,!0)},{keyCode:j.BACKSPACE,action:ne(sm,e,!1)},{keyCode:j.DELETE,action:ne(sm,e,!0)},{keyCode:j.BACKSPACE,action:ne(Kd,e,!1)},{keyCode:j.DELETE,action:ne(Kd,e,!0)}],n).filter(i=>e.selection.isEditable()).each(i=>{n.preventDefault(),Zc(e,s).isDefaultPrevented()||(i(),Ka(e,s))})},C8=(e,t,n)=>Va([{keyCode:j.BACKSPACE,action:ne($S,e)},{keyCode:j.DELETE,action:ne($S,e)},...Wk?[{keyCode:j.BACKSPACE,altKey:!0,action:ne(Wa,e)},{keyCode:j.DELETE,altKey:!0,action:ne(Wa,e)},...n?[{keyCode:h8?224:91,action:ne(Wa,e)}]:[]]:[{keyCode:j.BACKSPACE,ctrlKey:!0,action:ne(Wa,e)},{keyCode:j.DELETE,ctrlKey:!0,action:ne(Wa,e)}]],t),y8=(e,t)=>{let n=!1;e.on("keydown",s=>{n=s.keyCode===j.BACKSPACE,s.isDefaultPrevented()||b8(e,t,s)}),e.on("keyup",s=>{s.isDefaultPrevented()||C8(e,s,n),n=!1})},v8=e=>{for(;e;){if(Y(e)||O(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},dr=(e,t)=>{const n=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const r=v8(t.firstChild);r&&/^(UL|OL|DL)$/.test(r.nodeName)&&t.insertBefore(n.doc.createTextNode(Ze),t.firstChild)}const o=n.createRng();if(t.normalize(),t.hasChildNodes()){const r=new et(t,t);let a=t,i;for(;i=r.current();){if(O(i)){o.setStart(i,0),o.setEnd(i,0);break}if(s[i.nodeName.toLowerCase()]){o.setStartBefore(i),o.setEndBefore(i);break}a=i,i=r.next()}i||(o.setStart(a,0),o.setEnd(a,0))}else $e(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),Sa(e,o)},Ga=(e,t)=>{const n=e.getRoot();let s,o=t;for(;o!==n&&o&&e.getContentEditable(o)!=="false";){if(e.getContentEditable(o)==="true"){s=o;break}o=o.parentNode}return o!==n?s:n},Rm=e=>m.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),E8=e=>Rm(e).fold(H(""),t=>t.nodeName.toUpperCase()),S8=e=>Rm(e).filter(t=>zo(C.fromDom(t))).isSome(),Tm=e=>{e.innerHTML='<br data-mce-bogus="1">'},w8=(e,t,n)=>{const s=e.dom;m.from(n.style).map(s.parseStyle).each(c=>{const u={...ql(C.fromDom(t)),...c};s.setStyles(t,u)});const o=m.from(n.class).map(c=>c.split(/\s+/)),r=m.from(t.className).map(c=>se(c.split(/\s+/),l=>l!==""));pt(o,r,(c,l)=>{const u=se(l,d=>!Ee(c,d)),f=[...c,...u];s.setAttrib(t,"class",f.join(" "))});const a=["style","class"],i=Pr(n,(c,l)=>!Ee(a,l));s.setAttribs(t,i)},Ya=(e,t)=>{if(yt(e).toLowerCase()===t.tagName.toLowerCase()){const s=la(e);w8(e,t,s)}},Vk=(e,t,n,s,o=!0,r,a)=>{const i=e.dom,c=e.schema,l=yt(e),u=n?n.nodeName.toUpperCase():"";let f=t;const d=c.getTextInlineElements();let g;r||u==="TABLE"||u==="HR"?g=i.create(r||l,a||{}):g=n.cloneNode(!1);let h=g;if(!o)i.setAttrib(g,"style",null),i.setAttrib(g,"class",null);else do if(d[f.nodeName]){if(en(f)||tn(f))continue;const p=f.cloneNode(!1);i.setAttrib(p,"id",""),g.hasChildNodes()?(p.appendChild(g.firstChild),g.appendChild(p)):(h=p,g.appendChild(p))}while((f=f.parentNode)&&f!==s);return Ya(e,g),Tm(h),g},k8=(e,t)=>e.dom.getParent(t,eu),x8=(e,t,n)=>{let s=t;for(;s&&s!==e&&St(s.nextSibling);){const o=s.parentElement;if(!o||!n(o))return eu(o);s=o}return!1},_8=(e,t,n)=>!t&&n.nodeName.toLowerCase()===yt(e)&&e.dom.isEmpty(n)&&x8(e.getBody(),n,s=>oe(e.schema.getTextBlockElements(),s.nodeName.toLowerCase())),N8=(e,t,n)=>{var s,o,r;const a=t(yt(e)),i=k8(e,n);i&&(e.dom.insertAfter(a,i),dr(e,a),((r=(o=(s=n.parentElement)===null||s===void 0?void 0:s.childNodes)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0)>1&&e.dom.remove(n))},A8=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,R8=e=>{var t;return((t=e.parentNode)===null||t===void 0?void 0:t.firstChild)===e},jk=(e,t)=>{const n=e==null?void 0:e.parentNode;return M(n)&&n.nodeName===t},qk=e=>M(e)&&/^(OL|UL|LI)$/.test(e.nodeName),Pm=e=>M(e)&&/^(LI|DT|DD)$/.test(e.nodeName),T8=e=>qk(e)&&qk(e.parentNode),Qc=e=>{const t=e.parentNode;return Pm(t)?t:e},Jc=(e,t,n)=>{let s=e[n?"firstChild":"lastChild"];for(;s&&!Y(s);)s=s[n?"nextSibling":"previousSibling"];return s===t},Kk=e=>Lt(li(ql(C.fromDom(e)),(t,n)=>`${n}: ${t};`),(t,n)=>t+n,""),P8=(e,t,n,s,o)=>{const r=e.dom,a=e.selection.getRng(),i=n.parentNode;if(n===e.getBody()||!i)return;T8(n)&&(o="LI");const c=Pm(s)?Kk(s):void 0;let l=Pm(s)&&c?t(o,{style:Kk(s)}):t(o);if(Jc(n,s,!0)&&Jc(n,s,!1))if(jk(n,"LI")){const u=Qc(n);r.insertAfter(l,u),R8(n)?r.remove(u):r.remove(n)}else r.replace(l,n);else if(Jc(n,s,!0))jk(n,"LI")?(r.insertAfter(l,Qc(n)),l.appendChild(r.doc.createTextNode(" ")),l.appendChild(n)):i.insertBefore(l,n),r.remove(s);else if(Jc(n,s,!1))r.insertAfter(l,Qc(n)),r.remove(s);else{n=Qc(n);const u=a.cloneRange();u.setStartAfter(s),u.setEndAfter(n);const f=u.extractContents();if(o==="LI"&&A8(f,"LI")){const d=se(pe(l.children,C.fromDom),kr(hi("br")));l=f.firstChild,r.insertAfter(f,n),T(d,g=>Kl(C.fromDom(l),g)),c&&l.setAttribute("style",c)}else r.insertAfter(f,n),r.insertAfter(l,n);r.remove(s)}dr(e,l)},D8=e=>{T(Ap(C.fromDom(e),Tt),t=>{const n=t.dom;n.nodeValue=qt(n.data)})},O8=(e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return n!==null&&e.dom.getContentEditableParent(n)==="false"},B8=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),Dm=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,I8=(e,t)=>e.nodeName===t||e.nextSibling&&e.nextSibling.nodeName===t,Om=(e,t)=>M(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",L8=(e,t,n)=>{var s;const o=[];if(!n)return;let r=n;for(;r=r.firstChild;){if(e.isBlock(r))return;Y(r)&&!t[r.nodeName.toLowerCase()]&&o.push(r)}let a=o.length;for(;a--;)r=o[a],(!r.hasChildNodes()||r.firstChild===r.lastChild&&((s=r.firstChild)===null||s===void 0?void 0:s.nodeValue)===""||B8(e,r))&&e.remove(r)},Bm=(e,t,n)=>O(t)?e?n===1&&t.data.charAt(n-1)===Qe?0:n:n===t.data.length-1&&t.data.charAt(n)===Qe?t.data.length:n:n,$8=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,Bm(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,Bm(!1,e.endContainer,e.endOffset)),t},F8=e=>{let t=e;do O(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)},M8=(e,t,n,s,o)=>{var r,a;const i=e.dom,c=(r=Ga(i,s))!==null&&r!==void 0?r:i.getRoot();let l=i.getParent(s,i.isBlock);if(!l||!Om(i,l)){if(l=l||c,!l.hasChildNodes()){const g=i.create(t);return Ya(e,g),l.appendChild(g),n.setStart(g,0),n.setEnd(g,0),g}let u=s;for(;u&&u.parentNode!==l;)u=u.parentNode;let f;for(;u&&!i.isBlock(u);)f=u,u=u.previousSibling;const d=(a=f==null?void 0:f.parentElement)===null||a===void 0?void 0:a.nodeName;if(f&&d&&e.schema.isValidChild(d,t.toLowerCase())){const g=f.parentNode,h=i.create(t);for(Ya(e,h),g.insertBefore(h,f),u=f;u&&!i.isBlock(u);){const p=u.nextSibling;h.appendChild(u),u=p}n.setStart(s,o),n.setEnd(s,o)}}return s},U8=(e,t)=>{t.normalize();const n=t.lastChild;(!n||Y(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")},z8=(e,t)=>{const n=uP(e);return Ve(t)?!1:Q(n)?Ee(I.explode(n),t.nodeName.toLowerCase()):n},Gk={insert:(e,t)=>{let n,s,o,r,a=!1;const i=e.dom,c=e.schema,l=c.getNonEmptyElements(),u=e.selection.getRng(),f=yt(e),d=C.fromDom(u.startContainer),g=Do(d,u.startOffset),h=g.exists(P=>pi(P)&&!Ws(P)),p=u.collapsed&&h,b=(P,W)=>Vk(e,n,D,R,lP(e),P,W),y=P=>{const W=Bm(P,n,s);if(O(n)&&(P?W>0:W<n.data.length))return!1;if((n.parentNode===D||n===D)&&a&&!P||P&&Y(n)&&n===D.firstChild)return!0;if(Dm(n,"TABLE")||Dm(n,"HR"))return I8(n,"BR")?!P:a&&!P||!a&&P;const X=new et(n,D);O(n)&&(P&&W===0?X.prev():!P&&W===n.data.length&&X.next());let ae;for(;ae=X.current();){if(Y(ae)){if(!ae.getAttribute("data-mce-bogus")){const ie=ae.nodeName.toLowerCase();if(l[ie]&&ie!=="br")return!1}}else if(O(ae)&&!$o(ae.data))return!1;P?X.prev():X.next()}return!0},v=()=>{let P;return/^(H[1-6]|PRE|FIGURE)$/.test(o)&&z!=="HGROUP"?P=b(f):P=b(),z8(e,r)&&Om(i,r)&&i.isEmpty(D,void 0,{includeZwsp:!0})?P=i.split(r,D):i.insertAfter(P,D),dr(e,P),P};cc(i,u).each(P=>{u.setStart(P.startContainer,P.startOffset),u.setEnd(P.endContainer,P.endOffset)}),n=u.startContainer,s=u.startOffset;const E=!!(t&&t.shiftKey),S=!!(t&&t.ctrlKey);Y(n)&&n.hasChildNodes()&&!p&&(a=s>n.childNodes.length-1,n=n.childNodes[Math.min(s,n.childNodes.length-1)]||n,a&&O(n)?s=n.data.length:s=0);const R=Ga(i,n);if(!R||O8(e,n))return;E||(n=M8(e,f,u,n,s));let D=i.getParent(n,i.isBlock)||i.getRoot();r=M(D==null?void 0:D.parentNode)?i.getParent(D.parentNode,i.isBlock):null,o=D?D.nodeName.toUpperCase():"";const z=r?r.nodeName.toUpperCase():"";if(z==="LI"&&!S){const P=r;D=P,r=P.parentNode,o=z}if(Y(r)&&_8(e,E,D))return N8(e,b,D);if(/^(LI|DT|DD)$/.test(o)&&Y(r)&&i.isEmpty(D)){P8(e,b,r,D,f);return}if(!p&&(D===e.getBody()||!Om(i,D)))return;const A=D.parentNode;let x;if(p)x=b(f),g.fold(()=>{je(d,C.fromDom(x))},P=>{Ft(P,C.fromDom(x))}),e.selection.setCursorLocation(x,0);else if(Vo(D))x=Nu(D),i.isEmpty(D)&&Tm(D),Ya(e,x),dr(e,x);else if(y(!1))x=v();else if(y(!0)&&A){const P=N.fromRangeStart(u),W=Pf(P),X=C.fromDom(D),ie=mc(X,P,e.schema)?Ny(X,P,e.schema).bind(ye=>m.from(ye.getNode())):m.none();x=A.insertBefore(b(),D);const be=Dm(D,"HR")||W?x:ie.getOr(D);dr(e,be)}else{const P=$8(u).cloneRange();P.setEndAfter(D);const W=P.extractContents();D8(W),F8(W),x=W.firstChild,i.insertAfter(W,D),L8(i,l,x),U8(i,D),i.isEmpty(D)&&Tm(D),x.normalize(),i.isEmpty(x)?(i.remove(x),v()):(Ya(e,x),dr(e,x))}i.setAttrib(x,"id",""),e.dispatch("NewBlock",{newBlock:x})},fakeEventName:"insertParagraph"},H8=(e,t,n)=>{const s=new et(t,n);let o;const r=e.getNonEmptyElements();for(;o=s.next();)if(r[o.nodeName.toLowerCase()]||O(o)&&o.length>0)return!0;return!1},Yk=(e,t,n)=>{const s=e.dom.createRng();n?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),e.selection.setRng(s),Sa(e,s)},W8=(e,t)=>{const n=e.selection,s=e.dom,o=n.getRng();let r,a=!1;cc(s,o).each(g=>{o.setStart(g.startContainer,g.startOffset),o.setEnd(g.endContainer,g.endOffset)});let i=o.startOffset,c=o.startContainer;if(Y(c)&&c.hasChildNodes()){const g=i>c.childNodes.length-1;c=c.childNodes[Math.min(i,c.childNodes.length-1)]||c,g&&O(c)?i=c.data.length:i=0}let l=s.getParent(c,s.isBlock);const u=l&&l.parentNode?s.getParent(l.parentNode,s.isBlock):null,f=u?u.nodeName.toUpperCase():"",d=!!(t&&t.ctrlKey);f==="LI"&&!d&&(l=u),O(c)&&i>=c.data.length&&(H8(e.schema,c,l||s.getRoot())||(r=s.create("br"),o.insertNode(r),o.setStartAfter(r),o.setEndAfter(r),a=!0)),r=s.create("br"),Ou(s,o,r),Yk(e,r,a),e.undoManager.add()},V8=(e,t)=>{const n=C.fromTag("br");Ft(C.fromDom(t),n),e.undoManager.add()},j8=(e,t)=>{K8(e.getBody(),t)||rs(C.fromDom(t),C.fromTag("br"));const n=C.fromTag("br");rs(C.fromDom(t),n),Yk(e,n.dom,!1),e.undoManager.add()},q8=e=>$e(e.getNode()),K8=(e,t)=>q8(N.after(t))?!0:Dt(e,N.after(t)).map(n=>$e(n.getNode())).getOr(!1),Xk=e=>e&&e.nodeName==="A"&&"href"in e,G8=e=>e.fold(De,Xk,Xk,De),Y8=e=>{const t=q(mo,e),n=N.fromRangeStart(e.selection.getRng());return Xn(t,e.getBody(),n).filter(G8)},X8=(e,t)=>{t.fold(le,q(V8,e),q(j8,e),le)},Zk={insert:(e,t)=>{const n=Y8(e);n.isSome()?n.each(q(X8,e)):W8(e,t)},fakeEventName:"insertLineBreak"},Qk=(e,t)=>Rm(e).filter(n=>t.length>0&&En(C.fromDom(n),t)).isSome(),Z8=e=>Qk(e,iP(e)),Q8=e=>Qk(e,cP(e)),Gt=Wn.generate([{br:[]},{block:[]},{none:[]}]),J8=(e,t)=>Q8(e),Jk=e=>(t,n)=>S8(t)===e,ex=(e,t)=>(n,s)=>E8(n)===e.toUpperCase()===t,ej=e=>{const t=Ga(e.dom,e.selection.getStart());return Ve(t)},Xa=e=>ex("pre",e),tj=()=>ex("summary",!0),el=e=>(t,n)=>rP(t)===e,nj=(e,t)=>Z8(e),tl=(e,t)=>t,sj=e=>{const t=yt(e),n=Ga(e.dom,e.selection.getStart());return M(n)&&e.schema.isValidChild(n.nodeName,t)},oj=e=>{const t=e.selection.getRng(),n=C.fromDom(t.startContainer),o=Do(n,t.startOffset).map(r=>pi(r)&&!Ws(r));return t.collapsed&&o.getOr(!0)},ln=(e,t)=>(n,s)=>Lt(e,(r,a)=>r&&a(n,s),!0)?m.some(t):m.none(),rj=(e,t)=>KS([ln([J8],Gt.none()),ln([Xa(!0),ej],Gt.none()),ln([tj()],Gt.br()),ln([Xa(!0),el(!1),tl],Gt.br()),ln([Xa(!0),el(!1)],Gt.block()),ln([Xa(!0),el(!0),tl],Gt.block()),ln([Xa(!0),el(!0)],Gt.br()),ln([Jk(!0),tl],Gt.br()),ln([Jk(!0)],Gt.block()),ln([nj],Gt.br()),ln([tl],Gt.br()),ln([sj],Gt.block()),ln([oj],Gt.block())],[e,!!(t&&t.shiftKey)]).getOr(Gt.none()),nl=(e,t,n)=>{t.mode.isReadOnly()||(t.selection.isCollapsed()||EI(t),!(M(n)&&Zc(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,n),M(n)&&Ka(t,e.fakeEventName)))},tx=(e,t)=>{if(e.mode.isReadOnly())return;const n=()=>nl(Zk,e,t),s=()=>nl(Gk,e,t),o=rj(e,t);switch(aP(e)){case"linebreak":o.fold(n,n,le);break;case"block":o.fold(s,s,le);break;case"invert":o.fold(s,n,le);break;default:o.fold(n,s,le);break}},nx=$n(),aj=nx.os.isiOS()&&nx.browser.isSafari(),sx=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),RM(e.undoManager),e.undoManager.transact(()=>{tx(e,t)}))},ij=e=>{if(!e.collapsed)return!1;const t=e.startContainer;if(O(t)){const n=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,s=t.data.charAt(e.startOffset-1);return n.test(s)}else return!1},cj=e=>{let t=m.none();const n=o=>{t=m.some(o.selection.getBookmark()),o.undoManager.add()},s=(o,r)=>{o.undoManager.undo(),t.fold(le,a=>o.selection.moveToBookmark(a)),sx(o,r),t=m.none()};e.on("keydown",o=>{o.keyCode===j.ENTER&&(aj&&ij(e.selection.getRng())?n(e):sx(e,o))}),e.on("keyup",o=>{o.keyCode===j.ENTER&&t.each(()=>s(e,o))})},lj=(e,t,n)=>{const s=Ce.os.isMacOS()||Ce.os.isiOS();Va([{keyCode:j.END,action:ne(Ww,e,!0)},{keyCode:j.HOME,action:ne(Ww,e,!1)},...s?[]:[{keyCode:j.HOME,action:ne(zc,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:j.END,action:ne(zc,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:j.END,action:ne(Zw,e,!0)},{keyCode:j.HOME,action:ne(Zw,e,!1)},{keyCode:j.END,action:ne(Uc,e,!0,t)},{keyCode:j.HOME,action:ne(Uc,e,!1,t)}],n).each(o=>{n.preventDefault()})},uj=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||lj(e,t,n)})},fj=e=>{e.on("input",t=>{t.isComposing||eI(e)})},dj=$n(),mj=(e,t,n)=>{Va([{keyCode:j.PAGE_UP,action:ne(Uc,e,!1,t)},{keyCode:j.PAGE_DOWN,action:ne(Uc,e,!0,t)}],n)},ox=e=>e.stopImmediatePropagation(),rx=e=>e.keyCode===j.PAGE_UP||e.keyCode===j.PAGE_DOWN,ax=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",ox,!0):!n&&e.get()&&t.off("NodeChange",ox),e.set(n)},gj=(e,t)=>{if(dj.os.isMacOS())return;const n=tt(!1);e.on("keydown",s=>{rx(s)&&ax(n,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()||mj(e,t,s),rx(s)&&n.get()&&(ax(n,e,!1),e.nodeChanged())})},pj=e=>{e.on("beforeinput",t=>{(!e.selection.isEditable()||Le(t.getTargetRanges(),n=>!QC(e.dom,n)))&&t.preventDefault()})},ix=(e,t)=>{const n=t.container(),s=t.offset();return O(n)?(n.insertData(s,e),m.some(N(n,s+e.length))):Ki(t).map(o=>{const r=C.fromText(e);return t.isAtEnd()?rs(o,r):Ft(o,r),N(r.dom,e.length)})},cx=q(ix,Ze),lx=q(ix," "),hj=(e,t,n)=>Oy(e,t,n)?cx(t):lx(t),bj=e=>t=>t.fold(n=>Mt(e.dom,N.before(n)),n=>vt(n),n=>mn(n),n=>Dt(e.dom,N.after(n))),Cj=(e,t,n)=>s=>Oy(e,s,n)?cx(t):lx(t),ux=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},yj=(e,t)=>e.isEditable(e.getParent(t,"summary")),vj=e=>{const t=N.fromRangeStart(e.selection.getRng()),n=C.fromDom(e.getBody());if(e.selection.isCollapsed()){const s=q(mo,e),o=N.fromRangeStart(e.selection.getRng());return Xn(s,e.getBody(),o).bind(bj(n)).map(r=>()=>Cj(n,t,e.schema)(r).each(ux(e)))}else return m.none()},Ej=e=>{const t=()=>{const n=C.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const s=N.fromRangeStart(e.selection.getRng());hj(n,s,e.schema).each(ux(e))};return To(Ce.browser.isFirefox()&&e.selection.isEditable()&&yj(e.dom,e.selection.getRng().startContainer),t)},Sj=(e,t)=>{Gw([{keyCode:j.SPACEBAR,action:ne(vj,e)},{keyCode:j.SPACEBAR,action:ne(Ej,e)}],t).each(n=>{t.preventDefault(),Zc(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),Ka(e,"insertText",{data:" "}))})},wj=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||Sj(e,t)})},kj=e=>yD(e)?[{keyCode:j.TAB,action:ne(uk,e,!0)},{keyCode:j.TAB,shiftKey:!0,action:ne(uk,e,!1)}]:[],xj=(e,t)=>{Va([...kj(e)],t).each(n=>{t.preventDefault()})},_j=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||xj(e,t)})},Nj=e=>{if(e.addShortcut("Meta+P","","mcePrint"),s8(e),Yn(e))return tt(null);{const t=zH(e);return pj(e),MW(e),MV(e,t),y8(e,t),cj(e),wj(e),fj(e),_j(e),uj(e,t),gj(e,t),t}};class Aj{constructor(t){this.lastPath=[],this.editor=t;let n;const s=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",o=>{const r=t.selection.getRng(),a={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};(o.type==="nodechange"||!kf(a,n))&&t.dispatch("SelectionChange"),n=a}),t.on("contextmenu",()=>{sc(t),t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const o=t.selection.getStart(!0);o&&Qi(t)&&!s.isSameElementPath(o)&&t.dom.isChildOf(o,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",o=>{!o.isDefaultPrevented()&&Qi(t)&&(t.selection.getNode().nodeName==="IMG"?sn.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor,s=n.selection;let o;if(n.initialized&&s&&!MP(n)&&!ji(n)){const r=n.getBody();o=s.getStart(!0)||r,(o.ownerDocument!==n.getDoc()||!n.dom.isChildOf(o,r))&&(o=r);const a=[];n.dom.getParent(o,i=>i===r?!0:(a.push(i),!1)),n.dispatch("NodeChange",{...t,element:o,parents:a})}}isSameElementPath(t){let n;const s=this.editor,o=Ar(s.dom.getParents(t,He,s.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=o,!0}return this.lastPath=o,!1}}const fx=na("image"),Rj=e=>{const t=e;return m.from(t[fx])},Tj=(e,t)=>{const n=e;n[fx]=t},Im=na("event"),Pj=e=>{const t=e;return m.from(t[Im])},sl=e=>t=>{const n=t;n[Im]=e},Dj=(e,t)=>sl(t)(e),dx=sl(0),Oj=sl(2),Bj=sl(1),Ij=(e=>t=>{const n=t;return m.from(n[Im]).exists(s=>s===e)})(0),Lj=()=>Object.freeze({length:0,item:e=>null}),Lm=na("mode"),$j=e=>{const t=e;return m.from(t[Lm])},ol=e=>t=>{const n=t;n[Lm]=e},mx=(e,t)=>ol(t)(e),gx=ol(0),$m=ol(2),Fj=ol(1),px=e=>t=>{const n=t;return m.from(n[Lm]).exists(s=>s===e)},mr=px(0),hx=px(1),Mj=(e,t)=>({...t,get length(){return t.length},add:(n,s)=>{if(mr(e))if(Q(n)){if(!rt(s))return t.add(n,s)}else return t.add(n);return null},remove:n=>{mr(e)&&t.remove(n)},clear:()=>{mr(e)&&t.clear()}}),Uj=["none","copy","link","move"],zj=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Fm=()=>{const e=new window.DataTransfer;let t="move",n="all";const s={get dropEffect(){return t},set dropEffect(o){Ee(Uj,o)&&(t=o)},get effectAllowed(){return n},set effectAllowed(o){Ij(s)&&Ee(zj,o)&&(n=o)},get items(){return Mj(s,e.items)},get files(){return hx(s)?Lj():e.files},get types(){return e.types},setDragImage:(o,r,a)=>{mr(s)&&(Tj(s,{image:o,x:r,y:a}),e.setDragImage(o,r,a))},getData:o=>hx(s)?"":e.getData(o),setData:(o,r)=>{mr(s)&&e.setData(o,r)},clearData:o=>{mr(s)&&e.clearData(o)}};return gx(s),s},Hj=e=>{const t=Fm(),n=$j(e);return $m(e),dx(t),t.dropEffect=e.dropEffect,t.effectAllowed=e.effectAllowed,Rj(e).each(s=>t.setDragImage(s.image,s.x,s.y)),T(e.types,s=>{s!=="Files"&&t.setData(s,e.getData(s))}),T(e.files,s=>t.items.add(s)),Pj(e).each(s=>{Dj(t,s)}),n.each(s=>{mx(e,s),mx(t,s)}),t},Wj=e=>{const t=e.getData("text/html");return t===""?m.none():m.some(t)},bx=(e,t)=>e.setData("text/html",t),Cx="x-tinymce/html",rl=H(Cx),Mm="<!-- "+Cx+" -->",Vj=e=>Mm+e,jj=e=>e.replace(Mm,""),yx=e=>e.indexOf(Mm)!==-1,qj=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),Kj=(e,t)=>{let n="<"+e;const s=li(t,(o,r)=>r+'="'+Xs.encodeAllRaw(o)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"},Gj=(e,t,n)=>{const s=e.split(/\n\n/),o=Kj(t,n),r="</"+t+">",a=pe(s,c=>c.split(/\n/).join("<br />")),i=c=>o+c+r;return a.length===1?a[0]:pe(a,i).join("")},vx="%MCEPASTEBIN%",Yj=(e,t)=>{const{dom:n,selection:s}=e,o=e.getBody();t.set(s.getRng());const r=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},vx);Ce.browser.isFirefox()&&n.setStyle(r,"left",n.getStyle(o,"direction",!0)==="rtl"?65535:-65535),n.bind(r,"beforedeactivate focusin focusout",a=>{a.stopPropagation()}),r.focus(),s.select(r,!0)},Xj=(e,t)=>{const n=e.dom;if(Um(e)){let s;const o=t.get();for(;s=Um(e);)n.remove(s),n.unbind(s);o&&e.selection.setRng(o)}t.set(null)},Um=e=>e.dom.get("mcepastebin"),Zj=e=>M(e)&&e.id==="mcepastebin",Qj=e=>{const t=e.dom,n=(a,i)=>{a.appendChild(i),t.remove(i,!0)},[s,...o]=se(e.getBody().childNodes,Zj);T(o,a=>{n(s,a)});const r=t.select("div[id=mcepastebin]",s);for(let a=r.length-1;a>=0;a--){const i=t.create("div");s.insertBefore(i,r[a]),n(i,r[a])}return s?s.innerHTML:""},Ex=e=>e===vx,Jj=e=>{const t=tt(null);return{create:()=>Yj(e,t),remove:()=>Xj(e,t),getEl:()=>Um(e),getHtml:()=>Qj(e),getLastRng:t.get}},Sx=(e,t)=>(I.each(t,n=>{ai(n,RegExp)?e=e.replace(n,""):e=e.replace(n[0],n[1])}),e),e4=e=>{const t=ws(),n=or({},t);let s="";const o=t.getVoidElements(),r=I.makeMap("script noscript style textarea video audio iframe object"," "),a=t.getBlockElements(),i=c=>{const l=c.name,u=c;if(l==="br"){s+=`
`;return}if(l!=="wbr"){if(o[l]&&(s+=" "),r[l]){s+=" ";return}if(c.type===3&&(s+=c.value),!(c.name in t.getVoidElements())){let f=c.firstChild;if(f)do i(f);while(f=f.next)}a[l]&&u.next&&(s+=`
`,l==="p"&&(s+=`
`))}};return e=Sx(e,[/<!\[[^\]]+\]>/g]),i(n.parse(e)),s},wx=e=>(e=Sx(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(n,s,o)=>!s&&!o?" ":Ze],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),t4=e=>{let t=0;return()=>e+t++},n4=e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return I.hasOwn(n,t)?"image/"+n[t]:"image/"+t},s4=(e,t)=>{const n=or({sanitize:Rb(e),sandbox_iframes:Pb(e),sandbox_iframes_exclusions:Wu(e),convert_unsafe_embeds:SD(e)},e.schema);n.addNodeFilter("meta",o=>{I.each(o,r=>{r.remove()})});const s=n.parse(t,{forced_root_block:!1,isRootContent:!0});return Ts({validate:!0},e.schema).serialize(s)},kx=(e,t)=>({content:e,cancelled:t}),o4=(e,t,n)=>{const s=e.dom.create("div",{style:"display:none"},t),o=GT(e,s,n);return kx(o.node.innerHTML,o.isDefaultPrevented())},r4=(e,t,n)=>{const s=KT(e,t,n),o=s4(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?o4(e,o,n):kx(o,s.isDefaultPrevented())},a4=(e,t,n)=>r4(e,t,n),zm=(e,t)=>(e.insertContent(t,{merge:sD(e),paste:!0}),!0),Hm=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),i4=(e,t)=>Hm(t)&&Le(Tb(e),n=>Bl(t.toLowerCase(),`.${n.toLowerCase()}`)),c4=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),l4=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),u4=(e,t,n)=>!e.selection.isCollapsed()&&Hm(t)?l4(e,t,n):!1,f4=(e,t,n)=>i4(e,t)?c4(e,t,n):!1,d4=(e,t)=>{I.each([u4,f4,zm],n=>!n(e,t,zm))},m4=(e,t,n)=>{n||!oD(e)?zm(e,t):d4(e,t)},g4=t4("mceclip"),p4=e=>{const t=Fm();return bx(t,e),$m(t),t},xx=(e,t,n,s,o)=>{const r=a4(e,t,n);if(!r.cancelled){const a=r.content,i=()=>m4(e,a,s);o?Zc(e,"insertFromPaste",{dataTransfer:p4(a)}).isDefaultPrevented()||(i(),Ka(e,"insertFromPaste")):i()}},al=(e,t,n,s)=>{const o=n||yx(t);xx(e,jj(t),o,!1,s)},Wm=(e,t,n)=>{const s=e.dom.encode(t).replace(/\r\n/g,`
`),o=Dp(s,aD(e)),r=Gj(o,yt(e),la(e));xx(e,r,!1,!0,n)},_x=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const s=e.types[n];try{t[s]=e.getData(s)}catch{t[s]=""}}return t},Is=(e,t)=>t in e&&e[t].length>0,Nx=e=>Is(e,"text/html")||Is(e,"text/plain"),h4=(e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return M(n)?e.dom.encode(n[1]):void 0},b4=(e,t,n,s)=>{const o=g4(),r=bb(e)&&M(n.name),a=r?h4(e,n.name):o,i=r?n.name:void 0,c=t.create(o,n,s,a,i);return t.add(c),c},C4=(e,t)=>{pd(t.uri).each(({data:n,type:s,base64Encoded:o})=>{const r=o?n:btoa(n),a=t.file,i=e.editorUpload.blobCache,c=i.getByData(r,s),l=c??b4(e,i,a,r);al(e,`<img src="${l.blobUri()}">`,!1,!0)})},y4=e=>e.type==="paste",v4=e=>Promise.all(pe(e,t=>sE(t).then(n=>({file:t,uri:n})))),E4=e=>{const t=Tb(e);return n=>Xe(n.type,"image/")&&Le(t,s=>n4(s)===n.type)},S4=(e,t)=>{const n=t.items?Zt(Wt(t.items),o=>o.kind==="file"?[o.getAsFile()]:[]):[],s=t.files?Wt(t.files):[];return se(n.length>0?n:s,E4(e))},Ax=(e,t,n)=>{const s=y4(t)?t.clipboardData:t.dataTransfer;if(Vi(e)&&s){const o=S4(e,s);if(o.length>0)return t.preventDefault(),v4(o).then(r=>{n&&e.selection.setRng(n),T(r,a=>{C4(e,a)})}),!0}return!1},w4=e=>{var t,n;return Ce.os.isAndroid()&&((n=(t=e.clipboardData)===null||t===void 0?void 0:t.items)===null||n===void 0?void 0:n.length)===0},k4=e=>j.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,Vm=(e,t,n,s,o)=>{let r=wx(n);const a=Is(t,rl())||yx(n),i=!a&&qj(r),c=Hm(r);(Ex(r)||!r.length||i&&!c)&&(s=!0),(s||c)&&(Is(t,"text/plain")&&i?r=t["text/plain"]:r=e4(r)),!Ex(r)&&(s?Wm(e,r,o):al(e,r,a,o))},x4=(e,t,n)=>{let s;const o=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",r=>{k4(r)&&!r.isDefaultPrevented()&&(s=r.shiftKey&&r.keyCode===86)}),e.on("paste",r=>{if(r.isDefaultPrevented()||w4(r))return;const a=n.get()==="text"||s;s=!1;const i=_x(r.clipboardData);!Nx(i)&&Ax(e,r,o())||(Is(i,"text/html")?(r.preventDefault(),Vm(e,i,i["text/html"],a,!0)):Is(i,"text/plain")&&Is(i,"text/uri-list")?(r.preventDefault(),Vm(e,i,i["text/plain"],a,!0)):(t.create(),sn.setEditorTimeout(e,()=>{const c=t.getHtml();t.remove(),Vm(e,i,c,a,!1)},0)))})},_4=e=>{const t=o=>Xe(o,"webkit-fake-url"),n=o=>Xe(o,"data:"),s=o=>{var r;return((r=o.data)===null||r===void 0?void 0:r.paste)===!0};e.parser.addNodeFilter("img",(o,r,a)=>{if(!Vi(e)&&s(a))for(const i of o){const c=i.attr("src");Q(c)&&!i.attr("data-mce-object")&&c!==Ce.transparentSrc&&(t(c)||!iD(e)&&n(c))&&i.remove()}})},N4=(e,t,n)=>{x4(e,t,n),_4(e)},A4=(e,t)=>{t.get()==="text"?(t.set("html"),fb(e,!1)):(t.set("text"),fb(e,!0)),e.focus()},R4=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{A4(e,t)}),e.addCommand("mceInsertClipboardContent",(n,s)=>{s.html&&al(e,s.html,s.internal,!1),s.text&&Wm(e,s.text,!1)})},T4=(e,t,n)=>{if(e)try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(rl(),t),!0}catch{return!1}else return!1},Rx=(e,t,n,s)=>{T4(e.clipboardData,t.html,t.text)?(e.preventDefault(),s()):n(t.html,s)},Tx=e=>(t,n)=>{const{dom:s,selection:o}=e,r=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=s.create("div",{contenteditable:"true"},t);s.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(a),s.add(e.getBody(),r);const i=o.getRng();a.focus();const c=s.createRng();c.selectNodeContents(a),o.setRng(c),sn.setEditorTimeout(e,()=>{o.setRng(i),s.remove(r),n()},0)},Px=e=>({html:Vj(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),P4=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),Dx=e=>!e.selection.isCollapsed()||P4(e),D4=e=>t=>{!t.isDefaultPrevented()&&Dx(e)&&e.selection.isEditable()&&Rx(t,Px(e),Tx(e),()=>{if(Ce.browser.isChromium()||Ce.browser.isFirefox()){const n=e.selection.getRng();sn.setEditorTimeout(e,()=>{e.selection.setRng(n),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},O4=e=>t=>{!t.isDefaultPrevented()&&Dx(e)&&Rx(t,Px(e),Tx(e),le)},B4=e=>{e.on("cut",D4(e)),e.on("copy",O4(e))},Ox=(e,t)=>{var n,s;return uo.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(s=t.clientY)!==null&&s!==void 0?s:0,e.getDoc())},I4=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},Bx=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},L4=e=>Le(e.files,t=>/^image\//.test(t.type)),$4=(e,t,n,s)=>{const o=e.getParent(n,a=>Gs(t,a));if(!St(e.getParent(n,"summary")))return!0;if(o&&oe(s,"text/html")){const a=new DOMParser().parseFromString(s["text/html"],"text/html").body;return!St(a.querySelector(o.nodeName.toLowerCase()))}else return!1},F4=e=>{e.on("input",t=>{const n=s=>St(s.querySelector("summary"));if(t.inputType==="deleteByDrag"){const s=se(e.dom.select("details"),n);T(s,o=>{$e(o.firstChild)&&o.firstChild.remove();const r=e.dom.create("summary");r.appendChild(Ho().dom),o.prepend(r)})}})},M4=(e,t)=>{ZP(e)&&e.on("dragend dragover draggesture dragdrop drop drag",n=>{n.preventDefault(),n.stopPropagation()}),Vi(e)||e.on("drop",n=>{const s=n.dataTransfer;s&&L4(s)&&n.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented())return;const s=Ox(e,n);if(Ve(s))return;const o=_x(n.dataTransfer),r=Is(o,rl());if((!Nx(o)||I4(o))&&Ax(e,n,s))return;const a=o[rl()],i=a||o["text/html"]||o["text/plain"],c=$4(e.dom,e.schema,s.startContainer,o),l=t.get();l&&!c||i&&(n.preventDefault(),sn.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(a||l&&c)&&e.execCommand("Delete"),Bx(e,s);const u=wx(i);o["text/html"]?al(e,u,r,!0):Wm(e,u,!0)})}))}),e.on("dragstart",n=>{t.set(!0)}),e.on("dragover dragend",n=>{Vi(e)&&!t.get()&&(n.preventDefault(),Bx(e,Ox(e,n))),n.type==="dragend"&&t.set(!1)}),F4(e)},U4=e=>{const t=o=>r=>{o(e,r)},n=QP(e);we(n)&&e.on("PastePreProcess",t(n));const s=JP(e);we(s)&&e.on("PastePostProcess",t(s))},z4=(e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})},H4=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,Ix=e=>I.trim(e).replace(H4,Gr).toLowerCase(),W4=(e,t,n)=>{const s=tD(e);if(n||s==="all"||!nD(e))return t;const o=s?s.split(/[, ]/):[];if(o&&s!=="none"){const r=e.dom,a=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,c,l,u)=>{const f=r.parseStyle(r.decode(l)),d={};for(let h=0;h<o.length;h++){const p=f[o[h]];let b=p,y=r.getStyle(a,o[h],!0);/color/.test(o[h])&&(b=Ix(b),y=Ix(y)),y!==b&&(d[o[h]]=p)}const g=r.serializeStyle(d,"span");return g?c+' style="'+g+'"'+u:c+u})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(r,a,i,c)=>a+' style="'+i+'"'+c),t},V4=e=>{(Ce.browser.isChromium()||Ce.browser.isSafari())&&z4(e,W4)},j4=e=>{const t=tt(!1),n=tt(rD(e)?"text":"html"),s=Jj(e);V4(e),R4(e,n),U4(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>n.get()==="text"),e.on("PreInit",()=>{B4(e),M4(e,t),N4(e,s,n)})},q4=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},K4=e=>{e.parser.addNodeFilter("details",t=>{const n=vD(e);T(t,s=>{n==="expanded"?s.attr("open","open"):n==="collapsed"&&s.attr("open",null)})}),e.serializer.addNodeFilter("details",t=>{const n=ED(e);T(t,s=>{n==="expanded"?s.attr("open","open"):n==="collapsed"&&s.attr("open",null)})})},G4=e=>{q4(e),K4(e)},Y4=$e,Lx=O,X4=e=>Ne(e.dom),Z4=e=>dn(e.dom),$x=e=>t=>ve(C.fromDom(e),t),Q4=(e,t,n)=>Hs(C.fromDom(e),s=>Z4(s)||n.isBlock(he(s)),$x(t)).getOr(C.fromDom(t)).dom,Fx=(e,t)=>Hs(C.fromDom(e),X4,$x(t)),Mx=(e,t,n)=>{const s=new et(e,t),o=n?s.next.bind(s):s.prev.bind(s);let r=e;for(let a=n?e:o();a&&!Y4(a);a=o())Nn(a)&&(r=a);return r},J4=(e,t,n)=>{const o=N.fromRangeStart(e).getNode(),r=Q4(o,t,n),a=Mx(o,r,!1),i=Mx(o,r,!0),c=document.createRange();return Fx(a,r).fold(()=>{Lx(a)?c.setStart(a,0):c.setStartBefore(a)},l=>c.setStartBefore(l.dom)),Fx(i,r).fold(()=>{Lx(i)?c.setEnd(i,i.data.length):c.setEndAfter(i)},l=>c.setEndAfter(l.dom)),c},eq=e=>{const t=J4(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Jf(t))},tq=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),eq(e))})};var gr;(function(e){e.Before="before",e.After="after"})(gr||(gr={}));const nq=(e,t)=>Math.abs(e.left-t),sq=(e,t)=>Math.abs(e.right-t),oq=(e,t)=>e>=t.top&&e<=t.bottom,rq=(e,t)=>e.top<t.bottom&&e.bottom>t.top,aq=(e,t)=>{const n=VR(e,t)/Math.min(e.height,t.height);return rq(e,t)&&n>.5},iq=(e,t)=>{const n=se(e,s=>oq(t,s));return WR(n).fold(()=>[[],e],s=>{const{pass:o,fail:r}=xo(e,a=>aq(a,s));return[o,r]})},cq=(e,t)=>({node:e.node,position:nq(e,t)<sq(e,t)?gr.Before:gr.After}),lq=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),jm=(e,t,n,s)=>{const o=f=>Nn(f.node)?m.some(f):Y(f.node)?jm(Wt(f.node.childNodes),t,n,!1):m.none(),r=(f,d,g)=>o(d).filter(h=>Math.abs(g(f,t,n)-g(h,t,n))<2&&O(h.node)),a=(f,d)=>{const g=Ms(f,(h,p)=>d(h,t,n)-d(p,t,n));return _o(g,o).map(h=>s&&!O(h.node)&&g.length>1?r(h,g[1],d).getOr(h):h)},[i,c]=iq(cw(e),n),{pass:l,fail:u}=xo(c,f=>f.top<n);return a(i,lq).orThunk(()=>a(u,Ph)).orThunk(()=>a(l,Ph))},uq=(e,t,n,s)=>{const o=(r,a)=>{const i=l=>Y(l)&&l.classList.contains("mce-drag-container"),c=se(r.dom.childNodes,kr(i));return a.fold(()=>jm(c,n,s,!0),l=>{const u=se(c,f=>f!==l.dom);return jm(u,n,s,!0)}).orThunk(()=>(ve(r,e)?m.none():bi(r)).bind(u=>o(u,m.some(r))))};return o(t,m.none())},fq=(e,t,n)=>{const s=C.fromDom(e),o=Cs(s),a=C.fromPoint(o,t,n).filter(i=>Sn(s,i)).getOr(s);return uq(s,a,t,n)},Ux=(e,t,n)=>fq(e,t,n).filter(s=>da(s.node)).map(s=>cq(s,t)),zx=e=>{var t,n;const s=e.getBoundingClientRect(),o=e.ownerDocument,r=o.documentElement,a=o.defaultView;return{top:s.top+((t=a==null?void 0:a.scrollY)!==null&&t!==void 0?t:0)-r.clientTop,left:s.left+((n=a==null?void 0:a.scrollX)!==null&&n!==void 0?n:0)-r.clientLeft}},dq=e=>e.inline?zx(e.getBody()):{left:0,top:0},mq=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},gq=e=>{const t=e.getBody(),n=e.getDoc().documentElement,s={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?s:o},pq=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=zx(e.getContentAreaContainer()),s=gq(e);return{left:t.pageX-n.left+s.left,top:t.pageY-n.top+s.top}}return{left:t.pageX,top:t.pageY}},hq=(e,t,n)=>({pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}),bq=(e,t)=>hq(dq(e),mq(e),pq(e,t)),Hx=e=>({target:e,srcElement:e}),Cq=(e,t,n,s)=>({...t,dataTransfer:s,type:e,...Hx(n)}),yq=(e,t,n)=>{const s=pg("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:s,initEvent:s,preventDefault:le,stopImmediatePropagation:le,stopPropagation:le,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:s,initMouseEvent:s,getModifierState:s,dataTransfer:n,...Hx(t)}},vq=(e,t)=>{const n=Hj(e);return t==="dragstart"?(dx(n),gx(n)):t==="drop"?(Oj(n),$m(n)):(Bj(n),Fj(n)),n},Eq=(e,t,n,s)=>{const o=vq(n,e);return rt(s)?yq(e,t,o):Cq(e,s,t,o)},Wx=32,Sq=100,il=8,cl=16,Vx=Ne,wq=KR(Vx,dn),kq=(e,t,n)=>Vx(n)&&n!==t&&e.isEditable(n.parentElement),xq=(e,t,n)=>Ve(t)||t===n||e.dom.isChildOf(t,n)?!1:e.dom.isEditable(t),_q=(e,t,n,s)=>{const o=e.dom,r=t.cloneNode(!0);o.setStyles(r,{width:n,height:s}),o.setAttrib(r,"data-mce-selected",null);const a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),o.setStyles(r,{margin:0,boxSizing:"border-box"}),a.appendChild(r),a},Nq=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},ll=(e,t)=>n=>()=>{const s=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:s+t,behavior:"smooth"})},jx=ll("left",-32),qx=ll("left",Wx),Kx=ll("top",-32),Gx=ll("top",Wx),Aq=(e,t,n,s,o,r,a,i,c,l,u,f)=>{let d=0,g=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(d=t.pageX+n-o),t.pageY+s>r&&(g=t.pageY+s-r),e.style.width=n-d+"px",e.style.height=s-g+"px";const h=c.clientHeight,p=c.clientWidth,b=a+c.getBoundingClientRect().top,y=i+c.getBoundingClientRect().left;u.on(v=>{v.intervalId.clear(),v.dragging&&f&&(a+il>=h?v.intervalId.set(Gx(l)):a-il<=0?v.intervalId.set(Kx(l)):i+il>=p?v.intervalId.set(qx(l)):i-il<=0?v.intervalId.set(jx(l)):b+cl>=window.innerHeight?v.intervalId.set(Gx(window)):b-cl<=0?v.intervalId.set(Kx(window)):y+cl>=window.innerWidth?v.intervalId.set(qx(window)):y-cl<=0&&v.intervalId.set(jx(window)))})},Yx=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Rq=(e,t)=>{const n=e.getParent(t.parentNode,e.isBlock);Yx(t),n&&n!==e.getRoot()&&e.isEmpty(n)&&ks(C.fromDom(n))},Tq=e=>e.button===0,Pq=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),Dq=(e,t)=>n=>{if(Tq(n)){const s=Ye(t.dom.getParents(n.target),wq).getOr(null);if(M(s)&&kq(t.dom,t.getBody(),s)){const o=t.dom.getPos(s),r=t.getBody(),a=t.getDoc().documentElement;e.set({element:s,dataTransfer:Fm(),dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?r.scrollWidth:a.offsetWidth)-2,maxY:(t.inline?r.scrollHeight:a.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:s.offsetWidth,height:s.offsetHeight,ghost:_q(t,s,s.offsetWidth,s.offsetHeight),intervalId:lA(Sq)})}}},Oq=(e,t,n)=>{e._selectionOverrides.hideFakeCaret(),Ux(e.getBody(),t,n).fold(()=>e.selection.placeCaretAt(t,n),s=>{const o=e._selectionOverrides.showCaret(1,s.node,s.position===gr.Before,!1);o?e.selection.setRng(o):e.selection.placeCaretAt(t,n)})},Za=(e,t,n,s,o)=>{t==="dragstart"&&bx(s,e.dom.getOuterHTML(n));const r=Eq(t,n,s,o);return e.dispatch(t,r)},Bq=(e,t)=>{const n=Oi((o,r)=>Oq(t,o,r),0);t.on("remove",n.cancel);const s=e;return o=>e.on(r=>{const a=Math.max(Math.abs(o.screenX-r.screenX),Math.abs(o.screenY-r.screenY));if(!r.dragging&&a>10){const i=Za(t,"dragstart",r.element,r.dataTransfer,o);if(M(i.dataTransfer)&&(r.dataTransfer=i.dataTransfer),i.isDefaultPrevented())return;r.dragging=!0,t.focus()}if(r.dragging){const i=o.currentTarget===t.getDoc().documentElement,c=Pq(r,bq(t,o));Nq(r.ghost,t.getBody()),Aq(r.ghost,c,r.width,r.height,r.maxX,r.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),s,i),n.throttle(o.clientX,o.clientY)}})},Iq=e=>{const t=e.getSel();if(M(t)){const s=t.getRangeAt(0).startContainer;return O(s)?s.parentNode:s}else return null},Lq=(e,t)=>n=>{e.on(s=>{var o;if(s.intervalId.clear(),s.dragging){if(xq(t,Iq(t.selection),s.element)){const r=(o=t.getDoc().elementFromPoint(n.clientX,n.clientY))!==null&&o!==void 0?o:t.getBody();Za(t,"drop",r,s.dataTransfer,n).isDefaultPrevented()||t.undoManager.transact(()=>{Rq(t.dom,s.element),Wj(s.dataTransfer).each(i=>t.insertContent(i)),t._selectionOverrides.hideFakeCaret()})}Za(t,"dragend",t.getBody(),s.dataTransfer,n)}}),Zx(e)},Xx=(e,t,n)=>{e.on(s=>{s.intervalId.clear(),s.dragging&&n.fold(()=>Za(t,"dragend",s.element,s.dataTransfer),o=>Za(t,"dragend",s.element,s.dataTransfer,o))}),Zx(e)},$q=(e,t)=>n=>Xx(e,t,m.some(n)),Zx=e=>{e.on(t=>{t.intervalId.clear(),Yx(t.ghost)}),e.clear()},Fq=e=>{const t=cs(),n=xe.DOM,s=document,o=Dq(t,e),r=Bq(t,e),a=Lq(t,e),i=$q(t,e);e.on("mousedown",o),e.on("mousemove",r),e.on("mouseup",a),n.bind(s,"mousemove",r),n.bind(s,"mouseup",i),e.on("remove",()=>{n.unbind(s,"mousemove",r),n.unbind(s,"mouseup",i)}),e.on("keydown",c=>{c.keyCode===j.ESC&&Xx(t,e,m.none())})},Mq=e=>{const t=o=>{if(!o.isDefaultPrevented()){const r=o.dataTransfer;r&&(Ee(r.types,"Files")||r.files.length>0)&&(o.preventDefault(),o.type==="drop"&&Dc(e,"Dropped file type is not supported"))}},n=o=>{oc(e,o.target)&&t(o)},s=()=>{const o=xe.DOM,r=e.dom,a=document,i=e.inline?e.getBody():e.getDoc(),c=["drop","dragover"];T(c,l=>{o.bind(a,l,n),r.bind(i,l,t)}),e.on("remove",()=>{T(c,l=>{o.unbind(a,l,n),r.unbind(i,l,t)})})};e.on("init",()=>{sn.setEditorTimeout(e,s,0)})},Uq=e=>{Fq(e),HP(e)&&Mq(e)},zq=e=>{const t=Oi(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const n=e.selection.getRng();if(n.collapsed){const s=Hd(e,n,!1);e.selection.setRng(s)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},Hq=e=>{e.on("init",()=>{e.on("focusin",t=>{const n=t.target;if(Hn(n)){const s=go(e.getBody(),n),o=Ne(s)?s:n;e.selection.getNode()!==o&&Ma(e,o).each(r=>e.selection.setRng(r))}})})},Qa=Ne,Qx=(e,t)=>go(e.getBody(),t),Wq=e=>{const t=e.selection,n=e.dom,s=e.getBody(),o=LD(e,s,n.isBlock,()=>nr(e)),r="sel-"+n.uniqueId(),a="data-mce-selected";let i;const c=z=>M(z)&&n.hasClass(z,"mce-offscreen-selection"),l=z=>z!==s&&(Qa(z)||Hn(z))&&n.isChildOf(z,s)&&n.isEditable(z.parentNode),u=z=>{z&&t.setRng(z)},f=(z,A,x,P=!0)=>e.dispatch("ShowCaret",{target:A,direction:z,before:x}).isDefaultPrevented()?null:(P&&t.scrollIntoView(A,z===-1),o.show(x,A)),d=z=>{z.hasAttribute("data-mce-caret")&&(Nu(z),t.scrollIntoView(z))},g=()=>{e.on("click",A=>{n.isEditable(A.target)||(A.preventDefault(),e.focus())}),e.on("blur NewBlock",S),e.on("ResizeWindow FullscreenStateChanged",o.reposition),e.on("tap",A=>{const x=A.target,P=Qx(e,x);Qa(P)?(A.preventDefault(),Ma(e,P).each(E)):l(x)&&Ma(e,x).each(E)},!0),e.on("mousedown",A=>{const x=A.target;if(x!==s&&x.nodeName!=="HTML"&&!n.isChildOf(x,s)||!gz(e,A.clientX,A.clientY))return;S(),D();const P=Qx(e,x);Qa(P)?(A.preventDefault(),Ma(e,P).each(E)):Ux(s,A.clientX,A.clientY).each(W=>{A.preventDefault();const X=f(1,W.node,W.position===gr.Before,!1);u(X),as(P)?P.focus():e.getBody().focus()})}),e.on("keypress",A=>{j.modifierPressed(A)||Qa(t.getNode())&&A.preventDefault()}),e.on("GetSelectionRange",A=>{let x=A.range;if(i){if(!i.parentNode){i=null;return}x=x.cloneRange(),x.selectNode(i),A.range=x}}),e.on("SetSelectionRange",A=>{A.range=b(A.range);const x=E(A.range,A.forward);x&&(A.range=x)});const z=A=>Y(A)&&A.id==="mcepastebin";e.on("AfterSetSelectionRange",A=>{const x=A.range,P=x.startContainer.parentElement;!p(x)&&!z(P)&&D(),c(P)||S()}),Uq(e),zq(e),Hq(e)},h=z=>Qt(z)||Li(z)||$i(z),p=z=>h(z.startContainer)||h(z.endContainer),b=z=>{const A=e.schema.getVoidElements(),x=n.createRng(),P=z.startContainer,W=z.startOffset,X=z.endContainer,ae=z.endOffset;return oe(A,P.nodeName.toLowerCase())?W===0?x.setStartBefore(P):x.setStartAfter(P):x.setStart(P,W),oe(A,X.nodeName.toLowerCase())?ae===0?x.setEndBefore(X):x.setEndAfter(X):x.setEnd(X,ae),x},y=(z,A)=>{const x=C.fromDom(e.getBody()),P=e.getDoc(),W=Ci(x,"#"+r).getOrThunk(()=>{const ie=C.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',P);return at(ie,"id",r),je(x,ie),ie}),X=n.createRng();Io(W),Vs(W,[C.fromText(Ze,P),C.fromDom(A),C.fromText(Ze,P)]),X.setStart(W.dom.firstChild,1),X.setEnd(W.dom.lastChild,0),vi(W,{top:n.getPos(z,e.getBody()).y+"px"}),NC(W);const ae=t.getSel();return ae&&(ae.removeAllRanges(),ae.addRange(X)),X},v=z=>{const A=z.cloneNode(!0),x=e.dispatch("ObjectSelected",{target:z,targetClone:A});if(x.isDefaultPrevented())return null;const P=y(z,x.targetClone),W=C.fromDom(z);return T(bt(C.fromDom(e.getBody()),`*[${a}]`),X=>{ve(W,X)||it(X,a)}),n.getAttrib(z,a)||z.setAttribute(a,"1"),i=z,D(),P},E=(z,A)=>{if(!z)return null;if(z.collapsed){if(!p(z)){const X=A?1:-1,ae=ha(X,s,z),ie=ae.getNode(!A);if(M(ie)){if(da(ie))return f(X,ie,A?!ae.isAtEnd():!1,!1);if(xs(ie)&&Ne(ie.nextSibling)){const ye=n.createRng();return ye.setStart(ie,0),ye.setEnd(ie,0),ye}}const be=ae.getNode(A);if(M(be)){if(da(be))return f(X,be,A?!1:!ae.isAtEnd(),!1);if(xs(be)&&Ne(be.previousSibling)){const ye=n.createRng();return ye.setStart(be,1),ye.setEnd(be,1),ye}}}return null}let x=z.startContainer,P=z.startOffset;const W=z.endOffset;if(O(x)&&P===0&&Qa(x.parentNode)&&(x=x.parentNode,P=n.nodeIndex(x),x=x.parentNode),!Y(x))return null;if(W===P+1&&x===z.endContainer){const X=x.childNodes[P];if(l(X))return v(X)}return null},S=()=>{i&&i.removeAttribute(a),Ci(C.fromDom(e.getBody()),"#"+r).each(Re),i=null},R=()=>{o.destroy(),i=null},D=()=>{o.hide()};return Yn(e)||g(),{showCaret:f,showBlockCaretContainer:d,hideFakeCaret:D,destroy:R}},Vq=(e,t)=>{let n=t;for(let s=e.previousSibling;O(s);s=s.previousSibling)n+=s.data.length;return n},Jx=(e,t,n,s,o)=>{if(O(n)&&(s<0||s>n.data.length))return[];const r=o&&O(n)?[Vq(n,s)]:[s];let a=n;for(;a!==t&&a.parentNode;)r.push(e.nodeIndex(a,o)),a=a.parentNode;return a===t?r.reverse():[]},qm=(e,t,n,s,o,r,a=!1)=>{const i=Jx(e,t,n,s,a),c=Jx(e,t,o,r,a);return{start:i,end:c}},e_=(e,t)=>{const n=t.slice(),s=n.pop();return fn(s)?Lt(n,(r,a)=>r.bind(i=>m.from(i.childNodes[a])),m.some(e)).bind(r=>O(r)&&(s<0||s>r.data.length)?m.none():m.some({node:r,offset:s})):m.none()},t_=(e,t)=>e_(e,t.start).bind(({node:n,offset:s})=>e_(e,t.end).map(({node:o,offset:r})=>{const a=document.createRange();return a.setStart(n,s),a.setEnd(o,r),a})),jq=(e,t,n,s=!1)=>qm(e,t,n.startContainer,n.startOffset,n.endContainer,n.endOffset,s),pr=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const s=t.parentNode;e.remove(t,O(t.firstChild)&&$o(t.firstChild.data)),pr(e,s,n)}},ul=(e,t,n,s=!0)=>{const o=t.startContainer.parentNode,r=t.endContainer.parentNode;t.deleteContents(),s&&!n(t.startContainer)&&(O(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),O(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),pr(e,o,n),o!==r&&pr(e,r,n))},fl=(e,t)=>m.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),Km=(e,t,n)=>{const s=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:sb(s).concat(e.blockPatterns),inlinePatterns:ob(s).concat(e.inlinePatterns)}},Gm=(e,t,n,s)=>{const o=e.createRng();return o.setStart(t,0),o.setEnd(n,s),o.toString()},n_=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),dl=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},s_=(e,t,n)=>{const s=t_(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=s.startContainer,r=s.endContainer,a=s.endOffset===0?r:r.splitText(s.endOffset),i=s.startOffset===0?o:o.splitText(s.startOffset),c=i.parentNode,l=a.parentNode;return{prefix:t,end:l.insertBefore(n_(e,t+"-end"),a),start:c.insertBefore(n_(e,t+"-start"),i)}},o_=(e,t,n)=>{pr(e,e.get(t.prefix+"-end"),n),pr(e,e.get(t.prefix+"-start"),n)},Ym=e=>e.start.length===0,qq=e=>(t,n)=>{const o=t.data.substring(0,n),r=o.lastIndexOf(e.charAt(e.length-1)),a=o.lastIndexOf(e);return a!==-1?a+e.length:r!==-1?r+1:-1},r_=(e,t,n,s)=>{const o=t.start;return mm(e,s.container,s.offset,qq(o),n).bind(a=>{var i,c;const l=(c=(i=n.textContent)===null||i===void 0?void 0:i.indexOf(o))!==null&&c!==void 0?c:-1;if(l!==-1&&a.offset>=l+o.length){const f=e.createRng();return f.setStart(a.container,a.offset-o.length),f.setEnd(a.container,a.offset),m.some(f)}else{const f=a.offset-o.length;return dm(a.container,f,n).map(d=>{const g=e.createRng();return g.setStart(d.container,d.offset),g.setEnd(a.container,a.offset),g}).filter(d=>d.toString()===o).orThunk(()=>r_(e,t,n,Tn(a.container,0)))}})},Kq=(e,t,n,s,o,r=!1)=>{if(t.start.length===0&&!r){const a=e.createRng();return a.setStart(n,s),a.setEnd(n,s),m.some(a)}return fm(n,s,o).bind(a=>r_(e,t,o,a).bind(c=>{var l;if(r){if(c.endContainer===a.container&&c.endOffset===a.offset)return m.none();if(a.offset===0&&((l=c.endContainer.textContent)===null||l===void 0?void 0:l.length)===c.endOffset)return m.none()}return m.some(c)}))},Gq=(e,t,n,s)=>{const o=e.dom,r=o.getRoot(),a=n.pattern,i=n.position.container,c=n.position.offset;return dm(i,c-n.pattern.end.length,t).bind(l=>{const u=qm(o,r,l.container,l.offset,i,c,s);if(Ym(a))return m.some({matches:[{pattern:a,startRng:u,endRng:u}],position:l});{const f=ml(e,n.remainingPatterns,l.container,l.offset,t,s),d=f.getOr({matches:[],position:l}),g=d.position;return Kq(o,a,g.container,g.offset,t,f.isNone()).map(p=>{const b=jq(o,r,p,s);return{matches:d.matches.concat([{pattern:a,startRng:b,endRng:u}]),position:Tn(p.startContainer,p.startOffset)}})}})},ml=(e,t,n,s,o,r)=>{const a=e.dom;return fm(n,s,a.getRoot()).bind(i=>{const c=Gm(a,o,n,s);for(let l=0;l<t.length;l++){const u=t[l];if(!Bl(c,u.end))continue;const f=t.slice();f.splice(l,1);const d=Gq(e,o,{pattern:u,remainingPatterns:f,position:i},r);if(d.isNone()&&s>0)return ml(e,t,n,s-1,o,r);if(d.isSome())return d}return m.none()})},a_=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?T(t.format,s=>{e.formatter.apply(s)}):e.execCommand(t.cmd,!1,t.value)},Yq=(e,t,n,s)=>{const o=dl(e.dom,n);ul(e.dom,o,s),a_(e,t,o)},Xq=(e,t,n,s,o)=>{const r=e.dom,a=dl(r,s),i=dl(r,n);ul(r,i,o),ul(r,a,o);const c={prefix:n.prefix,start:n.end,end:s.start},l=dl(r,c);a_(e,t,l)},Zq=(e,t)=>{const n=na("mce_textpattern"),s=_r(t,(o,r)=>{const a=s_(e,n+`_end${o.length}`,r.endRng);return o.concat([{...r,endMarker:a}])},[]);return _r(s,(o,r)=>{const a=s.length-o.length-1,i=Ym(r.pattern)?r.endMarker:s_(e,n+`_start${a}`,r.startRng);return o.concat([{...r,startMarker:i}])},[])},Qq=e=>Ms(e,(t,n)=>n.end.length-t.end.length),Jq=(e,t)=>{const n=es(e,s=>Le(t,o=>s.pattern.start===o.pattern.start&&s.pattern.end===o.pattern.end));return e.length===t.length?n?e:t:e.length>t.length?e:t},i_=(e,t,n,s,o,r)=>{const a=ml(e,o.inlinePatterns,n,s,t,r).fold(()=>[],c=>c.matches),i=ml(e,Qq(o.inlinePatterns),n,s,t,r).fold(()=>[],c=>c.matches);return Jq(a,i)},c_=(e,t)=>{if(t.length===0)return;const n=e.dom,s=e.selection.getBookmark(),o=Zq(n,t);T(o,r=>{const a=n.getParent(r.startMarker.start,n.isBlock),i=c=>c===a;Ym(r.pattern)?Yq(e,r.pattern,r.endMarker,i):Xq(e,r.pattern,r.startMarker,r.endMarker,i),o_(n,r.endMarker,i),o_(n,r.startMarker,i)}),e.selection.moveToBookmark(s)},l_=(e,t,n)=>zV(t,0,t).map(s=>{const o=s.container;return fk(o,n.start.length,t).each(r=>{const a=e.createRng();a.setStart(o,0),a.setEnd(r.container,r.offset),ul(e,a,i=>i===t)}),o}),u_=e=>(t,n)=>{const s=t.dom,o=n.pattern,r=t_(s.getRoot(),n.range).getOrDie("Unable to resolve path range"),a=(i,c)=>{const l=c.get(i);return Fe(l)&&Rt(l).exists(u=>oe(u,"block"))};return fl(t,r).each(i=>{o.type==="block-format"?a(o.format,t.formatter)&&t.undoManager.transact(()=>{e(t.dom,i,o),t.formatter.apply(o.format)}):o.type==="block-command"&&t.undoManager.transact(()=>{e(t.dom,i,o),t.execCommand(o.cmd,!1,o.value)})}),!0},e5=e=>Ms(e,(t,n)=>n.start.length-t.start.length),f_=e=>(t,n)=>{const s=e5(t),o=n.replace(Ze," ");return Ye(s,r=>e(r,n,o))},d_=(e,t)=>(n,s,o,r,a)=>{var i;a===void 0&&(a=(i=s.textContent)!==null&&i!==void 0?i:"");const c=n.dom,l=yt(n);return c.is(s,l)?e(o.blockPatterns,a).map(u=>t&&I.trim(a).length===u.start.length?[]:[{pattern:u,range:qm(c,c.getRoot(),s,0,s,0,r)}]).getOr([]):[]},t5=e=>/^\s[^\s]/.test(e),n5=u_((e,t,n)=>{l_(e,t,n).each(s=>{const o=C.fromDom(s),r=sa(o);t5(r)&&xh(o,r.slice(1))})}),s5=f_((e,t,n)=>t.indexOf(e.start)===0||n.indexOf(e.start)===0),o5=d_(s5,!0),r5=(e,t)=>{const n=e.selection.getRng();return fl(e,n).map(s=>{var o;const r=Math.max(0,n.startOffset),a=Km(t,s,(o=s.textContent)!==null&&o!==void 0?o:""),i=i_(e,s,n.startContainer,r,a,!0),c=o5(e,s,a,!0);return{inlineMatches:i,blockMatches:c}}).filter(({inlineMatches:s,blockMatches:o})=>o.length>0||s.length>0)},a5=(e,t)=>{if(t.length===0)return;const n=e.selection.getBookmark();T(t,s=>n5(e,s)),e.selection.moveToBookmark(n)},i5=u_(l_),c5=f_((e,t,n)=>t===e.start||n===e.start),l5=d_(c5,!1),u5=(e,t)=>{const n=e.selection.getRng();return fl(e,n).map(s=>{const o=Math.max(0,n.startOffset),r=Gm(e.dom,s,n.startContainer,o),a=Km(t,s,r);return l5(e,s,a,!1,r)}).filter(s=>s.length>0)},f5=(e,t)=>{T(t,n=>i5(e,n))},d5=(e,t)=>r5(e,t).fold(De,({inlineMatches:n,blockMatches:s})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{LR(e),c_(e,n),a5(e,s);const o=e.selection.getRng(),r=fm(o.startContainer,o.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),r.each(a=>{const i=a.container;i.data.charAt(a.offset-1)===Vr&&(i.deleteData(a.offset-1,1),pr(e.dom,i.parentNode,c=>c===e.dom.getRoot()))})}),!0)),m5=(e,t)=>{const n=e.selection.getRng();fl(e,n).map(s=>{const o=Math.max(0,n.startOffset-1),r=Gm(e.dom,s,n.startContainer,o),a=Km(t,s,r),i=i_(e,s,n.startContainer,o,a,!1);i.length>0&&e.undoManager.transact(()=>{c_(e,i)})})},g5=(e,t)=>u5(e,t).fold(De,n=>(e.undoManager.transact(()=>{f5(e,n)}),!0)),m_=(e,t,n)=>{for(let s=0;s<e.length;s++)if(n(e[s],t))return!0;return!1},p5=(e,t)=>m_(e,t,(n,s)=>n===s.keyCode&&!j.modifierPressed(s)),h5=(e,t)=>m_(e,t,(n,s)=>n.charCodeAt(0)===s.charCode),b5=e=>{const t=[",",".",";",":","!","?"],n=[32],s=()=>RT(cD(e).filter(a=>a.type==="inline-command"||a.type==="block-command"?e.queryCommandSupported(a.cmd):!0),lD(e)),o=()=>pD(e);e.on("keydown",a=>{if(a.keyCode===13&&!j.modifierPressed(a)&&e.selection.isCollapsed()&&e.selection.isEditable()){const i=$u(s(),"enter");(i.inlinePatterns.length>0||i.blockPatterns.length>0||o())&&d5(e,i)&&a.preventDefault()}},!0),e.on("keydown",a=>{if(a.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const i=$u(s(),"space");(i.blockPatterns.length>0||o())&&g5(e,i)&&a.preventDefault()}},!0);const r=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const a=$u(s(),"space");(a.inlinePatterns.length>0||o())&&m5(e,a)}};e.on("keyup",a=>{p5(n,a)&&r()}),e.on("keypress",a=>{h5(t,a)&&sn.setEditorTimeout(e,r)})},C5=e=>{b5(e)},y5=e=>{const t=I.each,n=j.BACKSPACE,s=j.DELETE,o=e.dom,r=e.selection,a=e.parser,i=Ce.browser,c=i.isFirefox(),l=i.isChromium()||i.isSafari(),u=Ce.deviceType.isiPhone()||Ce.deviceType.isiPad(),f=Ce.os.isMacOS()||Ce.os.isiOS(),d=(U,J)=>{try{e.getDoc().execCommand(U,!1,String(J))}catch{}},g=U=>U.isDefaultPrevented(),h=()=>{const U=te=>{const F=o.create("body"),ce=te.cloneContents();return F.appendChild(ce),r.serializer.serialize(F,{format:"html"})},J=te=>{const F=U(te),ce=o.createRng();ce.selectNode(e.getBody());const ue=U(ce);return F===ue};e.on("keydown",te=>{const F=te.keyCode;if(!g(te)&&(F===s||F===n)&&e.selection.isEditable()){const ce=e.selection.isCollapsed(),ue=e.getBody();if(ce&&!is(e.schema,ue)||!ce&&!J(e.selection.getRng()))return;te.preventDefault(),e.setContent(""),ue.firstChild&&o.isBlock(ue.firstChild)?e.selection.setCursorLocation(ue.firstChild,0):e.selection.setCursorLocation(ue,0),e.nodeChanged()}})},p=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},b=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",U=>{let J;if(U.target===e.getDoc().documentElement)if(J=r.getRng(),e.getBody().focus(),U.type==="mousedown"){if(Qt(J.startContainer))return;r.placeCaretAt(U.clientX,U.clientY)}else r.setRng(J)})},y=()=>{e.on("keydown",U=>{if(!g(U)&&U.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(r.isCollapsed()&&r.getRng().startOffset===0){const J=r.getNode(),te=J.previousSibling;if(J.nodeName==="HR"){o.remove(J),U.preventDefault();return}te&&te.nodeName&&te.nodeName.toLowerCase()==="hr"&&(o.remove(te),U.preventDefault())}}})},v=()=>{Range.prototype.getClientRects||e.on("mousedown",U=>{if(!g(U)&&U.target.nodeName==="HTML"){const J=e.getBody();J.blur(),sn.setEditorTimeout(e,()=>{J.focus()})}})},E=()=>{const U=_b(e);e.on("click",J=>{const te=J.target;/^(IMG|HR)$/.test(te.nodeName)&&o.isEditable(te)&&(J.preventDefault(),e.selection.select(te),e.nodeChanged()),te.nodeName==="A"&&o.hasClass(te,U)&&te.childNodes.length===0&&o.isEditable(te.parentNode)&&(J.preventDefault(),r.select(te))})},S=()=>{const U=()=>{const te=o.getAttribs(r.getStart().cloneNode(!1));return()=>{const F=r.getStart();F!==e.getBody()&&(o.setAttrib(F,"style",null),t(te,ce=>{F.setAttributeNode(ce.cloneNode(!0))}))}},J=()=>!r.isCollapsed()&&o.getParent(r.getStart(),o.isBlock)!==o.getParent(r.getEnd(),o.isBlock);e.on("keypress",te=>{let F;return!g(te)&&(te.keyCode===8||te.keyCode===46)&&J()?(F=U(),e.getDoc().execCommand("delete",!1),F(),te.preventDefault(),!1):!0}),o.bind(e.getDoc(),"cut",te=>{if(!g(te)&&J()){const F=U();sn.setEditorTimeout(e,()=>{F()})}})},R=()=>{e.on("keydown",U=>{if(!g(U)&&U.keyCode===n&&r.isCollapsed()&&r.getRng().startOffset===0){const J=r.getNode().previousSibling;if(J&&J.nodeName&&J.nodeName.toLowerCase()==="table")return U.preventDefault(),!1}return!0})},D=()=>{e.on("keydown",U=>{if(g(U)||U.keyCode!==j.BACKSPACE)return;let J=r.getRng();const te=J.startContainer,F=J.startOffset,ce=o.getRoot();let ue=te;if(!(!J.collapsed||F!==0)){for(;ue.parentNode&&ue.parentNode.firstChild===ue&&ue.parentNode!==ce;)ue=ue.parentNode;ue.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,ue),J=o.createRng(),J.setStart(te,0),J.setEnd(te,0),r.setRng(J))}})},z=()=>{const U=()=>{d("StyleWithCSS",!1),d("enableInlineTableEditing",!1),Sb(e)||d("enableObjectResizing",!1)};kb(e)||e.on("BeforeExecCommand mousedown",U)},A=()=>{const U=()=>{t(o.select("a:not([data-mce-block])"),J=>{var te;let F=J.parentNode;const ce=o.getRoot();if((F==null?void 0:F.lastChild)===J){for(;F&&!o.isBlock(F);){if(((te=F.parentNode)===null||te===void 0?void 0:te.lastChild)!==F||F===ce)return;F=F.parentNode}o.add(F,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",J=>{(J.type==="setcontent"||J.command==="mceInsertLink")&&U()})},x=()=>{e.on("init",()=>{d("DefaultParagraphSeparator",yt(e))})},P=U=>{const J=U.getBody(),te=U.selection.getRng();return te.startContainer===te.endContainer&&te.startContainer===J&&te.startOffset===0&&te.endOffset===J.childNodes.length},W=()=>{e.on("keyup focusin mouseup",U=>{!j.modifierPressed(U)&&!P(e)&&r.normalize()},!0)},X=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},ae=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},ie=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",U=>{let J;U.target.nodeName==="HTML"&&(J=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(J),e.selection.normalize(),e.nodeChanged())}))},be=()=>{f&&e.on("keydown",U=>{j.metaKeyPressed(U)&&!U.shiftKey&&(U.keyCode===37||U.keyCode===39)&&(U.preventDefault(),e.selection.getSel().modify("move",U.keyCode===37?"backward":"forward","lineboundary"))})},ye=()=>{e.on("click",U=>{let J=U.target;do if(J.tagName==="A"){U.preventDefault();return}while(J=J.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Oe=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",U=>{U.preventDefault()})})},st=()=>{a.addNodeFilter("br",U=>{let J=U.length;for(;J--;)U[J].attr("class")==="Apple-interchange-newline"&&U[J].remove()})},Ke=le,L=()=>{if(!c||e.removed)return!1;const U=e.selection.getSel();return!U||!U.rangeCount||U.rangeCount===0},K=()=>{l&&(b(),E(),Oe(),p(),u&&(ae(),ie(),ye())),c&&(v(),z(),X(),be())},me=()=>{D(),h(),Ce.windowsPhone||W(),l&&(b(),E(),x(),Oe(),R(),st(),u?(ae(),ie(),ye()):p()),c&&(y(),v(),S(),z(),A(),X(),be(),R())};return Yn(e)?K():me(),{refreshContentEditable:Ke,isHidden:L}},v5=e=>e.toLowerCase()==="gpl",E5=e=>e.length>=64&&e.length<=255,S5=e=>v5(e)||E5(e)?"VALID":"INVALID",w5=e=>{const t=wD(e);!Q(kD(e))&&(rt(t)||S5(t)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},Xm=xe.DOM,k5=(e,t)=>{const n=C.fromDom(e.getBody()),s=Vl(vs(n)),o=C.fromTag("style");at(o,"type","text/css"),je(o,C.fromText(t)),je(s,o),e.on("remove",()=>{Re(o)})},x5=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Zm=e=>Pr(e,t=>rt(t)===!1),g_=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Zm({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_mathml_annotation_encodings:t("allow_mathml_annotation_encodings"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:x5(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:Wu(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},p_=e=>{const t=e.options.get;return Zm({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},_5=e=>{const t=e.options.get;return{...g_(e),...p_(e),...Zm({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},N5=e=>{const t=or(g_(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(n,s)=>{const o=e.dom,r="data-mce-"+s;let a=n.length;for(;a--;){const i=n[a];let c=i.attr(s);if(c&&!i.attr(r)){if(c.indexOf("data:")===0||c.indexOf("blob:")===0)continue;s==="style"?(c=o.serializeStyle(o.parseStyle(c),i.name),c.length||(c=null),i.attr(r,c),i.attr(s,c)):s==="tabindex"?(i.attr(r,c),i.attr(s,null)):i.attr(r,e.convertURL(c,s,i.name))}}}),t.addNodeFilter("script",n=>{let s=n.length;for(;s--;){const o=n[s],r=o.attr("type")||"no/type";r.indexOf("mce-")!==0&&o.attr("type","mce-"+r)}}),dD(e)&&t.addNodeFilter("#cdata",n=>{var s;let o=n.length;for(;o--;){const r=n[o];r.type=8,r.name="#comment",r.value="[CDATA["+e.dom.encode((s=r.value)!==null&&s!==void 0?s:"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",n=>{let s=n.length;const o=e.schema.getNonEmptyElements();for(;s--;){const r=n[s];r.isEmpty(o)&&r.getAll("br").length===0&&r.append(new xt("br",1))}}),t},A5=e=>{const t=GP(e);t&&sn.setEditorTimeout(e,()=>{let n;t===!0?n=e:n=e.editorManager.get(t),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)},R5=e=>{const t=e.dom.getRoot();!e.inline&&(!Qi(e)||e.selection.getStart(!0)===t)&&vt(t).each(n=>{const s=n.getNode(),o=zn(s)?vt(s).getOr(n):n;e.selection.setRng(o.toRange())})},T5=e=>{e.bindPendingEventDelegates(),e.initialized=!0,UT(e),e.focus(!0),R5(e),e.nodeChanged({initial:!0});const t=qP(e);we(t)&&t.call(e,e),A5(e),ds(e)&&dS(e,!0)},Qm=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,P5=(e,t,n)=>{const{pass:s,fail:o}=xo(t,i=>tinymce.Resource.has($d(i))),a=[...s.map(i=>{const c=tinymce.Resource.get($d(i));return Q(c)?Promise.resolve(Qm(e).loadRawCss(i,c)):Promise.resolve()}),Qm(e).loadAll(o)];return e.inline?a:a.concat([e.ui.styleSheetLoader.loadAll(n)])},h_=e=>{const t=Qm(e),n=Eb(e),s=e.contentCSS,o=()=>{t.unloadAll(s),e.inline||e.ui.styleSheetLoader.unloadAll(n)},r=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let c="";I.each(e.contentStyles,l=>{c+=l+`\r
`}),e.dom.addStyle(c)}const a=Promise.all(P5(e,s,n)).then(r).catch(r),i=EP(e);return i&&k5(e,i),a},D5=e=>{const t=e.getDoc(),n=e.getBody();FT(e),YP(e)||(t.body.spellcheck=!1,Xm.setAttrib(n,"spellcheck","false")),e.quirks=y5(e),MT(e);const s=SP(e);s!==void 0&&(n.dir=s);const o=XP(e);o&&e.on("BeforeSetContent",r=>{I.each(o,a=>{r.content=r.content.replace(a,i=>"<!--mce:protected "+escape(i)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",r=>{e.composing=r.type==="compositionstart"})},O5=e=>{Yn(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},Jm=e=>{e.removed!==!0&&(O5(e),T5(e))},B5=e=>{let t=!1;const n=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(n),t=!0,e.setProgressState(!1)}},b_=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(Xm.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const s=e.getBody();s.disabled=!0,e.readonly=kb(e),e._editableRoot=UP(e),!ji(e)&&e.hasEditableRoot()&&(e.inline&&Xm.getStyle(s,"position",!0)==="static"&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,e.editorUpload=e2(e),e.schema=ws(p_(e)),e.dom=xe(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:bP(e),referrerPolicy:Uu(e),onSetAttrib:a=>{e.dispatch("SetAttrib",a)}}),e.parser=N5(e),e.serializer=eS(_5(e),e),e.selection=JE(e.dom,e.getWin(),e.serializer,e),e.annotator=kC(e),e.formatter=vS(e),e.undoManager=SS(e),e._nodeChangeDispatcher=new Aj(e),e._selectionOverrides=Wq(e),NW(e),G4(e),LW(e),Yn(e)||(tq(e),C5(e));const o=Nj(e);kW(e,o),DW(e),p2(e),j4(e);const r=jM(e);D5(e),w5(e),r.fold(()=>{const a=B5(e);h_(e).then(()=>{Jm(e),a()})},a=>{e.setProgressState(!0),h_(e).then(()=>{a().then(i=>{e.setProgressState(!1),Jm(e),GE(e)},i=>{e.notificationManager.open({type:"error",text:String(i)}),Jm(e),GE(e)})})})},I5=He,L5=(e,t,n)=>I0(e,t,I5,n),eg=xe.DOM,$5=(e,t,n,s)=>{const o=C.fromTag("iframe");return s.each(r=>at(o,"tabindex",r)),ns(o,n),ns(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Po(o,"tox-edit-area__iframe"),o},F5=e=>{let t=nP(e)+"<html><head>";gb(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=sP(e),s=oP(e),o=e.translate(Nb(e));return pb(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+pb(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${s}" data-id="${e.id}" aria-label="${o}"><br></body></html>`,t},M5=(e,t)=>{const n=Ce.browser.isFirefox()?Nb(e):"Rich Text Area",s=e.translate(n),o=ss(C.fromDom(e.getElement()),"tabindex").bind(di),r=$5(e.id,s,tP(e),o).dom;r.onload=()=>{r.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=r,e.iframeHTML=F5(e),eg.add(t.iframeContainer,r)},U5=e=>{const t=e.iframeElement,n=()=>{e.contentDocument=t.contentDocument,b_(e)};if(gD(e)||Ce.browser.isFirefox()){const s=e.getDoc();s.open(),s.write(e.iframeHTML),s.close(),n()}else{const s=L5(C.fromDom(t),"load",()=>{s.unbind(),n()});t.srcdoc=e.iframeHTML}},z5=(e,t)=>{M5(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=eg.isHidden(t.editorContainer)),e.getElement().style.display="none",eg.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,U5(e)},C_=xe.DOM,H5=(e,t,n)=>{const s=ar.get(n),o=ar.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=I.trim(n),s&&I.inArray(t,n)===-1){if(e.plugins[n])return;try{const r=s(e,o)||{};e.plugins[n]=r,we(r.init)&&(r.init(e,o),t.push(n))}catch(r){xz(e,n,r)}}},W5=e=>e.replace(/^\-/,""),V5=e=>{const t=[];T(Wi(e),n=>{H5(e,t,W5(n))})},j5=e=>{const t=I.trim(Cb(e)),n=e.ui.registry.getAll().icons,s={...Pc.get("default").icons,...Pc.get(t).icons};_e(s,(o,r)=>{oe(n,r)||e.ui.registry.addIcon(r,o)})},q5=e=>{const t=qo(e);if(Q(t)){const n=bo.get(t);e.theme=n(e,bo.urls[t])||{},we(e.theme.init)&&e.theme.init(e,bo.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},K5=e=>{const t=zu(e),n=rr.get(t);e.model=n(e,rr.urls[t])},G5=e=>{const t=e.theme.renderUI;return t?t():v_(e)},Y5=e=>{const t=e.getElement(),s=qo(e)(e,t);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||e.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||e.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:t.offsetHeight,s},y_=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),X5=e=>{const t=C_.create("div");return C_.insertAfter(t,e),y_(t,t)},v_=e=>{const t=e.getElement();return e.inline?y_(null):X5(t)},Z5=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,Q(qo(e))?G5(e):we(qo(e))?Y5(e):v_(e)},Q5=(e,t)=>{const n={show:m.from(t.show).getOr(le),hide:m.from(t.hide).getOr(le),isEnabled:m.from(t.isEnabled).getOr(He),setEnabled:s=>{s&&(e.mode.get()==="readonly"||ds(e))||m.from(t.setEnabled).each(r=>r(s))}};e.ui={...e.ui,...n}},J5=async e=>{e.dispatch("ScriptsLoaded"),j5(e),q5(e),K5(e),V5(e);const t=await Z5(e);Q5(e,m.from(t.api).getOr({})),e.editorContainer=t.editorContainer,Wz(e),e.inline?b_(e):z5(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},Eo=xe.DOM,E_=e=>e.charAt(0)==="-",e6=(e,t)=>{const n=yb(t),s=CP(t);if(!_n.hasCode(n)&&n!=="en"){const o=Ln(s)?s:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(o).catch(()=>{Sz(t,o,n)})}},t6=(e,t)=>{const n=qo(e);if(Q(n)&&!E_(n)&&!oe(bo.urls,n)){const s=NP(e),o=s?e.documentBaseURI.toAbsolute(s):`themes/${n}/theme${t}.js`;bo.load(n,o).catch(()=>{wz(e,o,n)})}},n6=(e,t)=>{const n=zu(e);if(n!=="plugin"&&!oe(rr.urls,n)){const s=AP(e),o=Q(s)?e.documentBaseURI.toAbsolute(s):`models/${n}/model${t}.js`;rr.load(n,o).catch(()=>{kz(e,o,n)})}},s6=e=>m.from(dP(e)).filter(Ln).map(t=>({url:t,name:m.none()})),S_=(e,t,n)=>m.from(t).filter(s=>Ln(s)&&!Pc.has(s)).map(s=>({url:`${e.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:m.some(s)})),o6=(e,t,n)=>{const s=S_(t,"default",n),o=s6(t).orThunk(()=>S_(t,Cb(t),""));T(KN([s,o]),r=>{e.add(r.url).catch(()=>{Ez(t,r.url,r.name.getOrUndefined())})})},r6=(e,t)=>{const n=(s,o)=>{ar.load(s,o).catch(()=>{vz(e,o,s)})};_e(zP(e),(s,o)=>{n(o,s),e.options.set("plugins",Wi(e).concat(o))}),T(Wi(e),s=>{s=I.trim(s),s&&!ar.urls[s]&&!E_(s)&&n(s,`plugins/${s}/plugin${t}.js`)})},a6=e=>{const t=qo(e);return!Q(t)||M(bo.get(t))},i6=e=>{const t=zu(e);return M(rr.get(t))},c6=(e,t)=>{const n=ls.ScriptLoader,s=()=>{!e.removed&&a6(e)&&i6(e)&&J5(e)};t6(e,t),n6(e,t),e6(n,e),o6(n,e,t),r6(e,t),n.loadQueue().then(s,s)},l6=(e,t)=>jp.forElement(e,{contentCssCors:xb(t),referrerPolicy:Uu(t)}),u6=e=>{const t=e.id;_n.setCode(yb(e));const n=()=>{Eo.unbind(window,"ready",n),e.render()};if(!Zs.Event.domLoaded){Eo.bind(window,"ready",n);return}if(!e.getElement())return;const s=C.fromDom(e.getElement()),o=op(s);e.on("remove",()=>{bg(s.dom.attributes,a=>it(s,a.name)),ns(s,o)}),e.ui.styleSheetLoader=l6(s,e),Hu(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const r=e.getElement().form||Eo.getParent(t,"form");r&&(e.formElement=r,BP(e)&&!Ql(e.getElement())&&(Eo.insertAfter(Eo.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=a=>{e.dispatch(a.type,a)},Eo.bind(r,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),IP(e)&&!r.submit.nodeType&&!r.submit.length&&!r._mceOldSubmit&&(r._mceOldSubmit=r.submit,r.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),r._mceOldSubmit(r)))),e.windowManager=iS(e),e.notificationManager=aS(e),CD(e)&&e.on("GetContent",a=>{a.save&&(a.content=Eo.encode(a.content))}),LP(e)&&e.on("submit",()=>{e.initialized&&e.save()}),$P(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),c6(e,e.suffix)},f6=(e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,ds(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),YT(e,t))},d6=e=>e._editableRoot,m6=(e,t)=>({sections:H(e),options:H(t)}),w_=$n().deviceType,k_=w_.isPhone(),g6=w_.isTablet(),Ja=e=>{if(Ve(e))return[];{const t=Fe(e)?e:e.split(/[ ,]/),n=pe(t,Ao);return se(n,Ln)}},p6=(e,t)=>{const n=yN(t,(s,o)=>Ee(e,o));return m6(n.t,n.f)},h6=(e,t,n={})=>{const s=e.sections(),o=Ae(s,t).getOr({});return I.extend({},n,o)},tg=(e,t)=>oe(e.sections(),t),b6=(e,t)=>tg(e,t)?e.sections()[t]:{},C6=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Ae(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),y6=(e,t)=>{var n;const s=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?I.extend({},e.external_plugins,s):s},v6=(e,t)=>[...Ja(e),...Ja(t)],E6=(e,t,n,s)=>e&&tg(t,"mobile")?s:n,S6=(e,t,n,s)=>{const o=Ja(n.forced_plugins),r=Ja(s.plugins),a=b6(t,"mobile"),i=a.plugins?Ja(a.plugins):r,c=E6(e,t,r,i),l=v6(o,c);return I.extend(s,{forced_plugins:o,plugins:l})},w6=(e,t)=>e&&tg(t,"mobile"),k6=(e,t,n,s,o)=>{var r;const a=e?{mobile:C6((r=o.mobile)!==null&&r!==void 0?r:{},t)}:{},i=p6(["mobile"],jc(a,o)),c=I.extend(n,s,i.options(),w6(e,i)?h6(i,"mobile"):{},{external_plugins:y6(s,i.options())});return S6(e,i,s,c)},x6=(e,t)=>{const n=yk(t);return k6(k_||g6,k_,n,e,n)},_6=(e,t)=>hU(e,t),N6=e=>{const t=(s,o)=>{e.formatter.toggle(s,o),e.nodeChanged()},n=s=>()=>{T("left,center,right,justify".split(","),o=>{s!==o&&e.formatter.remove("align"+o)}),s!=="none"&&t("align"+s)};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})},A6=e=>{const t=n=>()=>{const s=e.selection,o=s.isCollapsed()?[e.dom.getParent(s.getNode(),e.dom.isBlock)]:s.getSelectedBlocks();return Le(o,r=>M(e.formatter.matchNode(r,n)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},R6=e=>{N6(e),A6(e)},T6=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let s;try{n.execCommand(t)}catch{s=!0}if(t==="paste"&&!n.queryCommandEnabled(t)&&(s=!0),s||!n.queryCommandSupported(t)){let o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Ce.os.isMacOS()||Ce.os.isiOS())&&(o=o.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:o,type:"error"})}}})},P6=(e,t,n,s)=>{const o=C.fromDom(e.getRoot());return xa(o,N.fromRangeStart(t),s)?n=n.replace(/^ /,"&nbsp;"):n=n.replace(/^&nbsp;/," "),_a(o,N.fromRangeEnd(t),s)?n=n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n=n.replace(/&nbsp;(<br( \/)?>)?$/," "),n},D6=e=>{if(typeof e!="string"){const t=I.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},O6=(e,t)=>{const n=e.selection,s=e.dom;return/^ | $/.test(t)?P6(s,n.getRng(),t,e.schema):t},gl=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:s}=D6(t);_d(e,{...s,content:O6(e,n),format:"html",set:!1,selection:!0}).each(o=>{const r=gU(e,o.content,s);Nd(e,r,o),e.addVisual()})}},B6=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,s)=>{gl(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,s)=>{gl(e,e.dom.encode(s))},insertHTML:(t,n,s)=>{gl(e,s)},mceInsertContent:(t,n,s)=>{gl(e,s)},mceSetContent:(t,n,s)=>{e.setContent(s)},mceReplaceContent:(t,n,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(eD(e))}})},I6={"font-size":"size","font-family":"face"},L6=hi("font"),$6=(e,t,n)=>{const s=r=>Ei(r,e).orThunk(()=>L6(r)?Ae(I6,e).bind(a=>ss(r,a)):m.none()),o=r=>ve(C.fromDom(t),r);return sd(C.fromDom(n),r=>s(r),o)},F6=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),M6=(e,t)=>m.from(xe.DOM.getStyle(t,e,!0)),x_=e=>(t,n)=>m.from(n).map(C.fromDom).filter(Vt).bind(s=>$6(e,t,s.dom).or(M6(e,s.dom))).getOr(""),U6=x_("font-size"),z6=vn(F6,x_("font-family")),H6=e=>vt(e.getBody()).bind(t=>{const n=t.container();return m.from(O(n)?n.parentNode:n)}),W6=e=>m.from(e.selection.getRng()).bind(t=>{const n=e.getBody();return t.startContainer===n&&t.startOffset===0?m.none():m.from(e.selection.getStart(!0))}),V6=(e,t)=>W6(e).orThunk(q(H6,e)).map(C.fromDom).filter(Vt).bind(t),ng=(e,t)=>V6(e,mg(m.some,t)),__=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const s=hD(e),o=bD(e);return o.length>0?o[n-1]||t:s[n-1]||t}else return t}else return t},j6=e=>{const t=e.split(/\s*,\s*/);return pe(t,n=>n.indexOf(" ")!==-1&&!(Xe(n,'"')||Xe(n,"'"))?`'${n}'`:n).join(",")},q6=(e,t)=>{const n=__(e,t);e.formatter.toggle("fontname",{value:j6(n)}),e.nodeChanged()},K6=e=>ng(e,t=>z6(e.getBody(),t.dom)).getOr(""),G6=(e,t)=>{e.formatter.toggle("fontsize",{value:__(e,t)}),e.nodeChanged()},Y6=e=>ng(e,t=>U6(e.getBody(),t.dom)).getOr(""),X6=e=>ng(e,t=>{const n=C.fromDom(e.getBody()),s=sd(t,r=>Ei(r,"line-height"),q(ve,n)),o=()=>{const r=parseFloat(Un(t,"line-height")),a=parseFloat(Un(t,"font-size"));return String(r/a)};return s.getOrThunk(o)}).getOr(""),Z6=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},Q6=e=>{const t=(n,s)=>{e.formatter.toggle(n,s),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>{t(n)},"ForeColor,HiliteColor":(n,s,o)=>{t(n,{value:o})},BackColor:(n,s,o)=>{t("hilitecolor",{value:o})},FontName:(n,s,o)=>{q6(e,o)},FontSize:(n,s,o)=>{G6(e,o)},LineHeight:(n,s,o)=>{Z6(e,o)},Lang:(n,s,o)=>{var r;t(n,{value:o.code,customValue:(r=o.customCode)!==null&&r!==void 0?r:null})},RemoveFormat:n=>{e.formatter.remove(n)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(n,s,o)=>{t(Q(o)?o:"p")},mceToggleFormat:(n,s,o)=>{t(o)}})},J6=e=>{const t=n=>e.formatter.match(n);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>t(n),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>K6(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>Y6(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>X6(e))},e9=e=>{Q6(e),J6(e)},t9=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},n9=e=>{e.editorCommands.addCommands({Indent:()=>{EW(e)},Outdent:()=>{Pw(e)}}),e.editorCommands.addCommands({Outdent:()=>Nw(e)},"state")},s9=e=>{const t=(n,s,o)=>{if(e.mode.isReadOnly())return;const r=Q(o)?{href:o}:o,a=e.dom.getParent(e.selection.getNode(),"a");ot(r)&&Q(r.href)&&(r.href=r.href.replace(/ /g,"%20"),(!a||!r.href)&&e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,a))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const n=e.dom.getParent(e.selection.getStart(),"a");n&&e.dom.remove(n,!0);return}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})},o9=(e,t,n,s)=>{const o=e.dom,r=i=>o.isBlock(i)&&i.parentElement===n,a=r(t)?t:o.getParent(s,r,n);return m.from(a).map(C.fromDom)},N_=(e,t)=>{if(e.mode.isReadOnly())return;const n=e.dom,s=e.selection.getRng(),o=t?e.selection.getStart():e.selection.getEnd(),r=t?s.startContainer:s.endContainer,a=Ga(n,r);if(!a||!a.isContentEditable)return;const i=t?Ft:rs,c=yt(e);o9(e,o,a,r).each(l=>{const u=Vk(e,r,l.dom,a,!1,c);i(l,C.fromDom(u)),e.selection.setCursorLocation(u,0),e.dispatch("NewBlock",{newBlock:u}),Ka(e,"insertParagraph")})},r9=e=>N_(e,!0),a9=e=>N_(e,!1),i9=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{r9(e)},InsertNewBlockAfter:()=>{a9(e)}})},c9=e=>{e.editorCommands.addCommands({insertParagraph:()=>{nl(Gk,e)},mceInsertNewLine:(t,n,s)=>{tx(e,s)},InsertLineBreak:(t,n,s)=>{nl(Zk,e)}})},l9=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,s)=>{let o=0;e.dom.getParent(e.selection.getNode(),r=>Y(r)&&o++===s?(e.selection.select(r),!1):!0,e.getBody())},mceSelectNode:(t,n,s)=>{e.selection.select(s)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),dn);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})},u9=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,s)=>{const o=s??e.selection.getNode();if(o!==e.getBody()){const r=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(r)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,s)=>{xO(e,s===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},f9=e=>{R6(e),T6(e),t9(e),l9(e),B6(e),s9(e),n9(e),i9(e),c9(e),e9(e),u9(e)},d9=["toggleview"],A_=e=>Ee(d9,e.toLowerCase());class R_{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,s,o){const r=this.editor,a=t.toLowerCase(),i=o==null?void 0:o.skip_focus;if(r.removed||(a!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)&&!i?r.focus():oO(r)),r.dispatch("BeforeExecCommand",{command:t,ui:n,value:s}).isDefaultPrevented()))return!1;const l=this.commands.exec[a];return we(l)?(l(a,n,s),r.dispatch("ExecCommand",{command:t,ui:n,value:s}),!0):!1}queryCommandState(t){if(!A_(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),s=this.commands.state[n];return we(s)?s(n):!1}queryCommandValue(t){if(!A_(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),s=this.commands.value[n];return we(s)?s(n):""}addCommands(t,n="exec"){const s=this.commands;_e(t,(o,r)=>{T(r.toLowerCase().split(","),a=>{s[n][a]=o})})}addCommand(t,n,s){const o=t.toLowerCase();this.commands.exec[o]=(r,a,i)=>n.call(s??this.editor,a,i)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,s){this.commands.state[t.toLowerCase()]=()=>n.call(s??this.editor)}addQueryValueHandler(t,n,s){this.commands.value[t.toLowerCase()]=()=>n.call(s??this.editor)}}const m9=I.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class sg{static isNative(t){return!!m9[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||De}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const s=t.toLowerCase(),o=bu(s,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const r=this.bindings[s];if(r)for(let a=0,i=r.length;a<i;a++){const c=r[a];if(!c.removed){if(c.once&&this.off(s,c.func),o.isImmediatePropagationStopped())return o;if(c.func.call(this.scope,o)===!1)return o.preventDefault(),o}}return o}on(t,n,s,o){if(n===!1&&(n=De),n){const r={func:n,removed:!1};o&&I.extend(r,o);const a=t.toLowerCase().split(" ");let i=a.length;for(;i--;){const c=a[i];let l=this.bindings[c];l||(l=[],this.toggleEvent(c,!0)),s?l=[r,...l]:l=[...l,r],this.bindings[c]=l}}return this}off(t,n){if(t){const s=t.toLowerCase().split(" ");let o=s.length;for(;o--;){const r=s[o];let a=this.bindings[r];if(!r)return _e(this.bindings,(i,c)=>{this.toggleEvent(c,!1),delete this.bindings[c]}),this;if(a){if(!n)a.length=0;else{const i=xo(a,c=>c.func===n);a=i.fail,this.bindings[r]=a,T(i.pass,c=>{c.removed=!0})}a.length||(this.toggleEvent(t,!1),delete this.bindings[r])}}}else _e(this.bindings,(s,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(t,n,s){return this.on(t,n,s,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||n.length===0)}}const ei=e=>(e._eventDispatcher||(e._eventDispatcher=new sg({scope:e,toggleEvent:(t,n)=>{sg.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),og={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const s=this;if(s.removed&&e!=="remove"&&e!=="detach")return bu(e.toLowerCase(),t??{},s);const o=ei(s).dispatch(e,t);if(n!==!1&&s.parent){let r=s.parent();for(;r&&!o.isPropagationStopped();)r.dispatch(e,o,!1),r=r.parent?r.parent():void 0}return o},on(e,t,n){return ei(this).on(e,t,n)},off(e,t){return ei(this).off(e,t)},once(e,t){return ei(this).once(e,t)},hasEventListeners(e){return ei(this).has(e)}},pl=xe.DOM;let So;const hl=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=wb(e);return n?(e.eventRoot||(e.eventRoot=pl.select(n)[0]),e.eventRoot):e.getBody()},g9=e=>!e.hidden&&!ds(e),T_=(e,t,n)=>{g9(e)?e.dispatch(t,n):ds(e)&&Lz(e,n)},P_=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=hl(e,t);if(wb(e)){if(So||(So={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||So&&(_e(So,(o,r)=>{e.dom.unbind(hl(e,r))}),So=null)})),So[t])return;const s=o=>{const r=o.target,a=e.editorManager.get();let i=a.length;for(;i--;){const c=a[i].getBody();(c===r||pl.isChildOf(r,c))&&T_(a[i],t,o)}};So[t]=s,pl.bind(n,t,s)}else{const s=o=>{T_(e,t,o)};pl.bind(n,t,s),e.delegates[t]=s}},D_={...og,bindPendingEventDelegates(){const e=this;I.each(e._pendingNativeEvents,t=>{P_(e,t)})},toggleNativeEvent(e,t){const n=this;e==="focus"||e==="blur"||n.removed||(t?n.initialized?P_(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(hl(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(_e(e.delegates,(s,o)=>{e.dom.unbind(hl(e,o),o,s)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},p9=e=>Q(e)?{value:e.split(/[ ,]/),valid:!0}:Fs(e,Q)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},h9=e=>{const t=(()=>{switch(e){case"array":return Fe;case"boolean":return Bn;case"function":return we;case"number":return fn;case"object":return ot;case"string":return Q;case"string[]":return p9;case"object[]":return n=>Fs(n,ot);case"regexp":return n=>ai(n,RegExp);default:return He}})();return n=>rg(n,t,`The value must be a ${e}.`)},b9=e=>Q(e.processor),O_=(e,t)=>{const n=Br(t.message)?"":`. ${t.message}`;return e+n},B_=e=>e.valid,rg=(e,t,n="")=>{const s=t(e);return Bn(s)?s?{value:e,valid:!0}:{valid:!1,message:n}:s},C9=(e,t,n)=>{if(!rt(t)){const s=rg(t,n);if(B_(s))return s.value;console.error(O_(`Invalid default value passed for the "${e}" option`,s))}},y9=(e,t,n=t)=>{const s={},o={},r=(g,h,p)=>{const b=rg(h,p);return B_(b)?(o[g]=b.value,!0):(console.warn(O_(`Invalid value passed for the ${g} option`,b)),!1)},a=(g,h)=>{const p=b9(h)?h9(h.processor):h.processor,b=C9(g,h.default,p);s[g]={...h,default:b,processor:p},Ae(o,g).orThunk(()=>Ae(t,g)).each(v=>r(g,v,p))},i=g=>oe(s,g);return{register:a,isRegistered:i,get:g=>Ae(o,g).orThunk(()=>Ae(s,g).map(h=>h.default)).getOrUndefined(),set:(g,h)=>{if(i(g)){const p=s[g];return p.immutable?(console.error(`"${g}" is an immutable option and cannot be updated`),!1):r(g,h,p.processor)}else return console.warn(`"${g}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:g=>{const h=i(g);return h&&delete o[g],h},isSet:g=>oe(o,g),debug:()=>{try{console.log(JSON.parse(JSON.stringify(n,(g,h)=>Bn(h)||fn(h)||Q(h)||St(h)||Fe(h)||ii(h)?h:Object.prototype.toString.call(h))))}catch(g){console.error(g)}}}},v9=(e,t)=>{e.dom.contentEditable="true"},E9=(e,t)=>{const n=C.fromDom(e.getBody());t?(e.readonly=!0,e.hasEditableRoot()&&v9(n),uS(e)):(e.readonly=!1,fS(e))},ti=e=>e.readonly,S9=e=>{e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",t=>{ti(e)&&t.preventDefault()}),e.on("BeforeExecCommand",t=>{(t.command==="Undo"||t.command==="Redo")&&ti(e)&&t.preventDefault()}),e.on("input",t=>{if(!t.isComposing&&ti(e)){const n=e.undoManager.add();M(n)&&e.undoManager.undo()}}),e.on("compositionend",()=>{if(ti(e)){const t=e.undoManager.add();M(t)&&e.undoManager.undo()}})},w9=["design","readonly"],I_=(e,t,n,s)=>{const o=n[t.get()],r=n[s];try{r.activate()}catch(a){console.error(`problem while activating editor mode ${s}:`,a);return}o.deactivate(),o.editorReadOnly!==r.editorReadOnly&&E9(e,r.editorReadOnly),t.set(s),IT(e,s)},k9=(e,t,n,s)=>{if(!(s===n.get()||e.initialized&&ds(e))){if(!oe(t,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?I_(e,n,t,s):e.on("init",()=>I_(e,n,t,s))}},x9=(e,t,n)=>{if(Ee(w9,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(s){console.error(`problem while deactivating editor mode ${t}:`,s)}}}}},_9=e=>{const t=tt("design"),n=tt({design:{activate:le,deactivate:le,editorReadOnly:!1},readonly:{activate:le,deactivate:le,editorReadOnly:!0}});return S9(e),Fz(e),{isReadOnly:()=>ti(e),set:s=>k9(e,n.get(),t,s),get:()=>t.get(),register:(s,o)=>{n.set(x9(n.get(),s,o))}}},ag=I.each,ig=I.explode,N9={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},L_=I.makeMap("alt,ctrl,shift,meta,access"),A9=e=>e in L_,R9=e=>{const t={},n=Ce.os.isMacOS()||Ce.os.isiOS();ag(ig(e.toLowerCase(),"+"),r=>{A9(r)?t[r]=!0:/^[0-9]{2,}$/.test(r)?t.keyCode=parseInt(r,10):(t.charCode=r.charCodeAt(0),t.keyCode=N9[r]||r.toUpperCase().charCodeAt(0))});const s=[t.keyCode];let o;for(o in L_)t[o]?s.push(o):t[o]=!1;return t.id=s.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class $_{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",s=>{(n.hasModifier(s)||n.isFunctionKey(s))&&!s.isDefaultPrevented()&&(ag(n.shortcuts,o=>{n.matchShortcut(s,o)&&(n.pendingPatterns=o.subpatterns.slice(0),s.type==="keydown"&&n.executeShortcutAction(o))}),n.matchShortcut(s,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&s.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,s,o){const r=this,a=r.normalizeCommandFunc(s);return ag(ig(I.trim(t)),i=>{const c=r.createShortcut(i,n,a,o);r.shortcuts[c.id]=c}),!0}remove(t){const n=this.createShortcut(t);return this.shortcuts[n.id]?(delete this.shortcuts[n.id],!0):!1}normalizeCommandFunc(t){const n=this,s=t;return typeof s=="string"?()=>{n.editor.execCommand(s,!1,null)}:I.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(t,n,s,o){const r=I.map(ig(t,">"),R9);return r[r.length-1]=I.extend(r[r.length-1],{func:s,scope:o||this.editor}),I.extend(r[0],{desc:this.editor.translate(n),subpatterns:r.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!n||n.ctrl!==t.ctrlKey||n.meta!==t.metaKey||n.alt!==t.altKey||n.shift!==t.shiftKey?!1:t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const T9=()=>{const e={},t={},n={},s={},o={},r={},a={},i={},c={},l=(g,h)=>(p,b)=>{g[p.toLowerCase()]={...b,type:h}},u=(g,h)=>(p,b)=>{g[p.toLowerCase()]={type:h,...b}},f=(g,h)=>s[g.toLowerCase()]=h,d=(g,h)=>a[g.toLowerCase()]=h;return{addButton:l(e,"button"),addGroupToolbarButton:l(e,"grouptoolbarbutton"),addToggleButton:l(e,"togglebutton"),addMenuButton:l(e,"menubutton"),addSplitButton:l(e,"splitbutton"),addMenuItem:l(t,"menuitem"),addNestedMenuItem:l(t,"nestedmenuitem"),addToggleMenuItem:l(t,"togglemenuitem"),addAutocompleter:l(n,"autocompleter"),addContextMenu:l(o,"contextmenu"),addContextToolbar:l(r,"contexttoolbar"),addContextForm:u(r,"contextform"),addSidebar:l(i,"sidebar"),addView:l(c,"views"),addIcon:f,addContext:d,getAll:()=>({buttons:e,menuItems:t,icons:s,popups:n,contextMenus:o,contextToolbars:r,sidebars:i,views:c,contexts:a})}},P9=()=>{const e=T9();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},wo=xe.DOM,F_=I.extend,D9=I.each;class bl{constructor(t,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,F_(this,D_);const o=this;this.id=t,this.hidden=!1;const r=x6(s.defaultOptions,n);this.options=y9(o,r,n),eP(o);const a=this.options.get;a("deprecation_warnings")&&tz(n,r);const i=a("suffix");i&&(s.suffix=i),this.suffix=s.suffix;const c=a("base_url");c&&s._setBaseUrl(c),this.baseUri=s.baseURI;const l=Uu(o);l&&(ls.ScriptLoader._setReferrerPolicy(l),xe.DOM.styleSheetLoader._setReferrerPolicy(l));const u=xb(o);M(u)&&xe.DOM.styleSheetLoader._setContentCssCors(u),kt.languageLoad=a("language_load"),kt.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new pn(gb(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Hu(o),this.hasVisual=WP(o),this.shortcuts=new $_(this),this.editorCommands=new R_(this),f9(this);const f=a("cache_suffix");f&&(Ce.cacheSuffix=f.replace(/^[\?\&]+/,"")),this.ui={registry:P9(),styleSheetLoader:void 0,show:le,hide:le,setEnabled:le,isEnabled:He},this.mode=_9(o),s.dispatch("SetupEditor",{editor:this});const d=jP(o);we(d)&&d.call(o,o)}render(){u6(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return nr(this)}translate(t){return _n.translate(t)}getParam(t,n,s){const o=this.options;return o.isRegistered(t)||(M(s)?o.register(t,{processor:s,default:n}):o.register(t,{processor:He,default:n})),!o.isSet(t)&&!rt(n)?n:o.get(t)}hasPlugin(t,n){return Ee(Wi(this),t)?n?ar.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,s){this.editorCommands.addCommand(t,n,s)}addQueryStateHandler(t,n,s){this.editorCommands.addQueryStateHandler(t,n,s)}addQueryValueHandler(t,n,s){this.editorCommands.addQueryValueHandler(t,n,s)}addShortcut(t,n,s,o){this.shortcuts.add(t,n,s,o)}execCommand(t,n,s,o){return this.editorCommands.execCommand(t,n,s,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(wo.show(t.getContainer()),wo.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(wo.hide(t.getContainer()),wo.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,s=n.getElement();if(n.removed)return"";if(s){const o={...t,load:!0},r=Ql(s)?s.value:s.innerHTML,a=n.setContent(r,o);return o.no_events||n.dispatch("LoadContent",{...o,element:s}),a}else return""}save(t={}){const n=this;let s=n.getElement();if(!s||!n.initialized||n.removed)return"";const o={...t,save:!0,element:s};let r=n.getContent(o);const a={...o,content:r};if(a.no_events||n.dispatch("SaveContent",a),a.format==="raw"&&n.dispatch("RawSaveContent",a),r=a.content,Ql(s))s.value=r;else{(t.is_removing||!n.inline)&&(s.innerHTML=r);const i=wo.getParent(n.id,"form");i&&D9(i.elements,c=>c.name===n.id?(c.value=r,!1):!0)}return a.element=o.element=s=null,a.set_dirty!==!1&&n.setDirty(!1),r}setContent(t,n){return Id(this,t,n)}getContent(t){return HU(this,t)}insertContent(t,n){n&&(t=F_({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?Id(this,this.startContent,{format:"raw"}):Id(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||wo.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=wo.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const s=this.getDoc();return(n=(t=this.bodyElement)!==null&&t!==void 0?t:s==null?void 0:s.body)!==null&&n!==void 0?n:null}convertURL(t,n,s){const o=this,r=o.options.get,a=KP(o);if(we(a))return a.call(o,t,s,!0,n);if(!r("convert_urls")||s==="link"||ot(s)&&s.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0)return t;const i=new pn(t);return i.protocol!=="http"&&i.protocol!=="https"&&i.protocol!==""?t:r("relative_urls")?o.documentBaseURI.toRelative(t):(t=o.documentBaseURI.toAbsolute(t,r("remove_script_host")),t)}addVisual(t){_6(this,t)}setEditableRoot(t){f6(this,t)}hasEditableRoot(){return d6(this)}remove(){rz(this)}destroy(t){az(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const hr=xe.DOM,Cl=I.each;let M_=!1,yl,Ot=[];const vl=e=>{const t=e.type;Cl(Ls.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e);break}})},U_=e=>{if(e!==M_){const t=xe.DOM;e?(t.bind(window,"resize",vl),t.bind(window,"scroll",vl)):(t.unbind(window,"resize",vl),t.unbind(window,"scroll",vl)),M_=e}},z_=e=>{const t=Ot;return Ot=se(Ot,n=>e!==n),Ls.activeEditor===e&&(Ls.activeEditor=Ot.length>0?Ot[0]:null),Ls.focusedEditor===e&&(Ls.focusedEditor=null),t.length!==Ot.length},O9=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(z_(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},B9=document.compatMode!=="CSS1Compat",Ls={...og,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"6.0",releaseDate:"2024-12-11",i18n:_n,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",s=pn.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,n=o.suffix;else{const r=document.getElementsByTagName("script");for(let a=0;a<r.length;a++){const i=r[a].src||"";if(i==="")continue;const c=i.substring(i.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(i)){c.indexOf(".min")!==-1&&(n=".min"),t=i.substring(0,i.lastIndexOf("/"));break}}if(!t&&document.currentScript){const a=document.currentScript.src;a.indexOf(".min")!==-1&&(n=".min"),t=a.substring(0,a.lastIndexOf("/"))}}e.baseURL=new pn(s).toAbsolute(t),e.documentBaseURL=s,e.baseURI=new pn(e.baseURL),e.suffix=n,pO(e)},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const s=e.plugin_base_urls;s!==void 0&&_e(s,(o,r)=>{kt.PluginManager.urls[r]=o})},init(e){const t=this;let n;const s=I.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=(u,f)=>u.inline&&f.tagName.toLowerCase()in s,r=u=>{let f=u.id;return f||(f=Ae(u,"name").filter(d=>!hr.get(d)).getOrThunk(hr.uniqueId),u.setAttribute("id",f)),f},a=u=>{const f=e[u];if(f)return f.apply(t,[])},i=u=>Ce.browser.isIE()||Ce.browser.isEdge()?(Oc("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):B9?(Oc("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Q(u.selector)?hr.select(u.selector):M(u.target)?[u.target]:[];let c=u=>{n=u};const l=()=>{let u=0;const f=[];let d;const g=(h,p,b)=>{const y=new bl(h,p,t);f.push(y),y.on("init",()=>{++u===d.length&&c(f)}),y.targetElm=y.targetElm||b,y.render()};hr.unbind(window,"ready",l),a("onpageload"),d=vg(i(e)),I.each(d,h=>{O9(t.get(h.id))}),d=I.grep(d,h=>!t.get(h.id)),d.length===0?c([]):Cl(d,h=>{o(e,h)?Oc("Could not initialize inline editor on invalid inline target element",h):g(r(h),e,h)})};return hr.bind(window,"ready",l),new Promise(u=>{n?u(n):c=f=>{u(f)}})},get(e){return arguments.length===0?Ot.slice(0):Q(e)?Ye(Ot,t=>t.id===e).getOr(null):fn(e)&&Ot[e]?Ot[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&Ot.push(e),U_(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),yl||(yl=s=>{const o=t.dispatch("BeforeUnload");if(o.returnValue)return s.preventDefault(),s.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",yl))),e},createEditor(e,t){return this.add(new bl(e,t,this))},remove(e){const t=this;let n;if(!e){for(let s=Ot.length-1;s>=0;s--)t.remove(Ot[s]);return}if(Q(e)){Cl(hr.select(e),s=>{n=t.get(s.id),n&&t.remove(n)});return}return n=e,St(t.get(n.id))?null:(z_(n)&&t.dispatch("RemoveEditor",{editor:n}),Ot.length===0&&window.removeEventListener("beforeunload",yl),n.remove(),U_(Ot.length>0),n)},execCommand(e,t,n){var s;const o=this,r=ot(n)?(s=n.id)!==null&&s!==void 0?s:n.index:n;switch(e){case"mceAddEditor":{if(!o.get(r)){const a=n.options;new bl(r,a,o).render()}return!0}case"mceRemoveEditor":{const a=o.get(r);return a&&a.remove(),!0}case"mceToggleEditor":{const a=o.get(r);return a?(a.isHidden()?a.show():a.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return o.activeEditor?o.activeEditor.execCommand(e,t,n):!1},triggerSave:()=>{Cl(Ot,e=>{e.save()})},addI18n:(e,t)=>{_n.add(e,t)},translate:e=>_n.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new pn(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new pn(this.baseURL)}};Ls.setup();const I9=(()=>{const e=cs(),t=r=>({items:r,types:$t(r),getType:a=>Ae(r,a).getOrUndefined()}),n=r=>{e.set(r)},s=()=>e.get().getOrUndefined(),o=e.clear;return{FakeClipboardItem:t,write:n,read:s,clear:o}})(),H_=Math.min,br=Math.max,El=Math.round,W_=(e,t,n)=>{let s=t.x,o=t.y;const r=e.w,a=e.h,i=t.w,c=t.h,l=(n||"").split("");return l[0]==="b"&&(o+=c),l[1]==="r"&&(s+=i),l[0]==="c"&&(o+=El(c/2)),l[1]==="c"&&(s+=El(i/2)),l[3]==="b"&&(o-=a),l[4]==="r"&&(s-=r),l[3]==="c"&&(o-=El(a/2)),l[4]==="c"&&(s-=El(r/2)),Cr(s,o,r,a)},L9=(e,t,n,s)=>{for(let o=0;o<s.length;o++){const r=W_(e,t,s[o]);if(r.x>=n.x&&r.x+r.w<=n.w+n.x&&r.y>=n.y&&r.y+r.h<=n.h+n.y)return s[o]}return null},$9=(e,t,n)=>Cr(e.x-t,e.y-n,e.w+t*2,e.h+n*2),F9=(e,t)=>{const n=br(e.x,t.x),s=br(e.y,t.y),o=H_(e.x+e.w,t.x+t.w),r=H_(e.y+e.h,t.y+t.h);return o-n<0||r-s<0?null:Cr(n,s,o-n,r-s)},M9=(e,t,n)=>{let s=e.x,o=e.y,r=e.x+e.w,a=e.y+e.h;const i=t.x+t.w,c=t.y+t.h,l=br(0,t.x-s),u=br(0,t.y-o),f=br(0,r-i),d=br(0,a-c);return s+=l,o+=u,n&&(r+=l,a+=u,s-=f,o-=d),r-=f,a-=d,Cr(s,o,r-s,a-o)},Cr=(e,t,n,s)=>({x:e,y:t,w:n,h:s}),U9={inflate:$9,relativePosition:W_,findBestRelativePosition:L9,intersect:F9,clamp:M9,create:Cr,fromClientRect:e=>Cr(e.left,e.top,e.width,e.height)},z9=(e,t,n=1e3)=>{let s=!1,o=null;const r=l=>(...u)=>{s||(s=!0,o!==null&&(clearTimeout(o),o=null),l.apply(null,u))},a=r(e),i=r(t);return{start:(...l)=>{!s&&o===null&&(o=setTimeout(()=>i.apply(null,l),n))},resolve:a,reject:i}},H9=(()=>{const e={},t={},n={};return{load:(c,l)=>{const u=`Script at URL "${l}" failed to load`,f=`Script at URL "${l}" did not call \`tinymce.Resource.add('${c}', data)\` within 1 second`;if(e[c]!==void 0)return e[c];{const d=new Promise((g,h)=>{const p=z9(g,h);t[c]=p.resolve,ls.ScriptLoader.loadScript(l).then(()=>p.start(f),()=>p.reject(u))});return e[c]=d,d}},add:(c,l)=>{t[c]!==void 0&&(t[c](l),delete t[c]),e[c]=Promise.resolve(l),n[c]=l},has:c=>c in n,get:c=>n[c],unload:c=>{delete e[c],delete n[c]}}})(),W9=()=>(()=>{let e={},t=[];const n={getItem:s=>{const o=e[s];return o||null},setItem:(s,o)=>{t.push(s),e[s]=String(o)},key:s=>t[s],removeItem:s=>{t=t.filter(o=>o===s),delete e[s]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})();let ni;try{const e="__storage_test__";ni=window.localStorage,ni.setItem(e,e),ni.removeItem(e)}catch{ni=W9()}var V9=ni;const j9={geom:{Rect:U9},util:{Delay:sn,Tools:I,VK:j,URI:pn,EventDispatcher:sg,Observable:og,I18n:_n,LocalStorage:V9,ImageUploader:Zz},dom:{EventUtils:Zs,TreeWalker:et,TextSeeker:eo,DOMUtils:xe,ScriptLoader:ls,RangeUtils:uo,Serializer:eS,StyleSheetLoader:Vp,ControlSelection:LC,BookmarkManager:va,Selection:JE,Event:Zs.Event},html:{Styles:hu,Entities:Xs,Node:xt,Schema:ws,DomParser:or,Writer:my,Serializer:Ts},Env:Ce,AddOnManager:kt,Annotator:kC,Formatter:vS,UndoManager:SS,EditorCommands:R_,WindowManager:iS,NotificationManager:aS,EditorObservable:D_,Shortcuts:$_,Editor:bl,FocusManager:OC,EditorManager:Ls,DOM:xe.DOM,ScriptLoader:ls.ScriptLoader,PluginManager:ar,ThemeManager:bo,ModelManager:rr,IconManager:Pc,Resource:H9,FakeClipboard:I9,trim:I.trim,isArray:I.isArray,is:I.is,toArray:I.toArray,makeMap:I.makeMap,each:I.each,map:I.map,grep:I.grep,inArray:I.inArray,extend:I.extend,walk:I.walk,resolve:I.resolve,explode:I.explode,_addCacheSuffix:I._addCacheSuffix},V_=I.extend(Ls,j9),q9=e=>{try{rN.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(V_),q9(V_)})()})(oN);var X9=oN.exports;const UK=Y9(X9);export{UK as t};
