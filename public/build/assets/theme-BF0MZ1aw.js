import{g as yK}from"./_commonjsHelpers-BosuxZz1.js";var Vq={exports:{}};(function(tp){(function(){var Qd=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},np=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Mi=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},sl=function(e,n){return Ri(function(o,r){return e.eq(n(o),n(r))})},Ri=function(e){return{eq:e}},Ba=Ri(function(e,n){return e===n}),hn=Ba,ca=function(e){return Ri(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},jf=function(e,n){return sl(ca(e),function(o){return Mi(o,n)})},Ao=function(e){return Ri(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!jf(hn).eq(r,c))return!1;for(var l=r.length,d=0;d<l;d++){var g=r[d];if(!e.eq(n[g],o[g]))return!1}return!0})},ia=Ri(function(e,n){if(e===n)return!0;var o=Qd(e),r=Qd(n);return o!==r?!1:np(o)?e===n:o==="array"?ca(ia).eq(e,n):o==="object"?Ao(ia).eq(e,n):!1});const Zr=Object.getPrototypeOf,Wr=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Xl=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Wr(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},Qn=e=>n=>Xl(n)===e,Ps=e=>n=>typeof n===e,la=e=>n=>e===n,xt=(e,n)=>Ot(e)&&Wr(e,n,(o,r)=>Zr(o)===r),ee=Qn("string"),Ot=Qn("object"),rl=e=>xt(e,Object),Kn=Qn("array"),Y=la(null),Lt=Ps("boolean"),To=la(void 0),vn=e=>e==null,_e=e=>!vn(e),Zt=Ps("function"),jo=Ps("number"),pn=(e,n)=>{if(Kn(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},it=()=>{},x=(e,n)=>(...o)=>e(n.apply(null,o)),Hc=(e,n)=>o=>e(n(o)),Ve=e=>()=>e,Ts=e=>e,Jl=(e,n)=>e===n;function qe(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const In=e=>n=>!e(n),ks=e=>()=>{throw new Error(e)},ua=e=>e(),al=e=>{e()},Ce=Ve(!1),ze=Ve(!0);class D{constructor(n,o){this.tag=n,this.value=o}static some(n){return new D(!0,n)}static none(){return D.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?D.some(n(this.value)):D.none()}bind(n){return this.tag?n(this.value):D.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:D.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return _e(n)?D.some(n):D.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}D.singletonNone=new D(!1);const Ql=Array.prototype.slice,Pn=Array.prototype.indexOf,As=Array.prototype.push,Fo=(e,n)=>Pn.call(e,n),Gf=(e,n)=>{const o=Fo(e,n);return o===-1?D.none():D.some(o)},St=(e,n)=>Fo(e,n)>-1,On=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},wt=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const l=e[c];r[c]=n(l,c)}return r},de=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},Vc=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},da=(e,n)=>{const o=[],r=[];for(let c=0,l=e.length;c<l;c++){const d=e[c];(n(d,c)?o:r).push(d)}return{pass:o,fail:r}},gt=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const l=e[r];n(l,r)&&o.push(l)}return o},cl=(e,n,o)=>(Vc(e,(r,c)=>{o=n(o,r,c)}),o),hs=(e,n,o)=>(de(e,(r,c)=>{o=n(o,r,c)}),o),em=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const l=e[r];if(n(l,r))return D.some(l);if(o(l,r))break}return D.none()},mo=(e,n)=>em(e,n,Ce),Gs=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return D.some(o)}return D.none()},zc=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!Kn(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);As.apply(n,e[o])}return n},qs=(e,n)=>zc(wt(e,n)),Xt=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},Yn=e=>{const n=Ql.call(e,0);return n.reverse(),n},eu=(e,n)=>gt(e,o=>!St(n,o)),Oo=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const l=e[r];o[String(l)]=n(l,r)}return o},Vn=(e,n)=>{const o=Ql.call(e,0);return o.sort(n),o},nc=(e,n)=>n>=0&&n<e.length?D.some(e[n]):D.none(),$o=e=>nc(e,0),mr=e=>nc(e,e.length-1),ps=Zt(Array.from)?Array.from:e=>Ql.call(e),Uc=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return D.none()},Ni=(e,n)=>{const o=[],r=Zt(n)?c=>On(o,l=>n(l,c)):c=>St(o,c);for(let c=0,l=e.length;c<l;c++){const d=e[c];r(d)||o.push(d)}return o},bs=Object.keys,Xu=Object.hasOwnProperty,Le=(e,n)=>{const o=bs(e);for(let r=0,c=o.length;r<c;r++){const l=o[r],d=e[l];n(d,l)}},Qt=(e,n)=>Ks(e,(o,r)=>({k:r,v:n(o,r)})),Ks=(e,n)=>{const o={};return Le(e,(r,c)=>{const l=n(r,c);o[l.k]=l.v}),o},Ju=e=>(n,o)=>{e[o]=n},Nr=(e,n,o,r)=>{Le(e,(c,l)=>{(n(c,l)?o:r)(c,l)})},tt=(e,n)=>{const o={},r={};return Nr(e,n,Ju(o),Ju(r)),{t:o,f:r}},oc=(e,n)=>{const o={};return Nr(e,n,Ju(o),it),o},tm=(e,n)=>{const o=[];return Le(e,(r,c)=>{o.push(n(r,c))}),o},nm=e=>tm(e,Ts),zn=(e,n)=>bt(e,n)?D.from(e[n]):D.none(),bt=(e,n)=>Xu.call(e,n),tu=(e,n)=>bt(e,n)&&e[n]!==void 0&&e[n]!==null,V0=(e,n,o=ia)=>Ao(o).eq(e,n),Ys={generate:e=>{if(!Kn(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return de(e,(r,c)=>{const l=bs(r);if(l.length!==1)throw new Error("one and only one name per case");const d=l[0],g=r[d];if(o[d]!==void 0)throw new Error("duplicate key detected:"+d);if(d==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Kn(g))throw new Error("case arguments must be an array");n.push(d),o[d]=(...h)=>{const y=h.length;if(y!==g.length)throw new Error("Wrong number of arguments to case "+d+". Expected "+g.length+" ("+g+"), got "+y);return{fold:(...T)=>{if(T.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+T.length);return T[c].apply(null,h)},match:T=>{const k=bs(T);if(n.length!==k.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+k.join(","));if(!Xt(n,P=>St(k,P)))throw new Error("Not all branches were specified when using match. Specified: "+k.join(", ")+`
Required: `+n.join(", "));return T[d].apply(null,h)},log:T=>{console.log(T,{constructors:n,constructor:d,params:h})}}}}),o}},fo=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},om=e=>{const n=l=>l(e),o=Ve(e),r=()=>c,c={tag:!0,inner:e,fold:(l,d)=>d(e),isValue:ze,isError:Ce,map:l=>Is.value(l(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:l=>{l(e)},toOptional:()=>D.some(e)};return c},Nt=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:Ce,isError:ze,map:n,mapError:r=>Is.error(r(e)),bind:n,exists:Ce,forall:ze,getOr:Ts,or:Ts,getOrThunk:ua,orThunk:ua,getOrDie:ks(String(e)),each:it,toOptional:D.none};return o},Is={value:om,error:Nt,fromOption:(e,n)=>e.fold(()=>Nt(n),om)},sm=typeof window<"u"?window:Function("return this;")(),z0=(e,n,o)=>Math.min(Math.max(e,n),o),U0=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let fa=0;const Pa=e=>{const o=new Date().getTime(),r=Math.floor(U0()*1e9);return fa++,e+"_"+r+fa+String(o)},qf=(e,n)=>n,nu=(e,n)=>rl(e)&&rl(n)?vs(e,n):n,Bi=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const l in c)bt(c,l)&&(o[l]=e(o[l],c[l]))}return o},vs=Bi(nu),Qu=Bi(qf),Zc=(e,n,o=Jl)=>e.exists(r=>o(r,n)),Ie=(e,n,o=Jl)=>os(e,n,o).getOr(e.isNone()&&n.isNone()),op=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},os=(e,n,o)=>e.isSome()&&n.isSome()?D.some(o(e.getOrDie(),n.getOrDie())):D.none(),sp=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?D.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):D.none(),_n=(e,n)=>e?D.some(n):D.none(),Kf=(e,n)=>{let o=n??sm;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},jr=(e,n)=>{const o=e.split(".");return Kf(o,n)};Ys.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const rp=e=>{const n=[],o=[];return de(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},Pi=e=>{const n=fo(D.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(D.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:g=>{o(),n.set(D.some(g))}}},ap=e=>{const n=fo(D.none()),o=()=>n.get().each(g=>clearInterval(g));return{clear:()=>{o(),n.set(D.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:g=>{o(),n.set(D.some(setInterval(g,e)))}}},fr=()=>{const e=Pi(it);return{...e,on:o=>e.get().each(o)}},Yf=(e,n)=>e.substring(n),ed=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,gr=(e,n)=>Lo(e,n)?Yf(e,n.length):e,ss=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?To(r)?!0:c+n.length<=r:!1},Lo=(e,n)=>ed(e,n,0),td=(e,n)=>ed(e,n,e.length-n.length),ou=e=>n=>n.replace(e,""),Wc=ou(/^\s+|\s+$/g),Z0=ou(/^\s+/g),Ii=ou(/\s+$/g),tn=e=>e.length>0,il=e=>!tn(e),nd=(e,n)=>n<=0?"":new Array(n+1).join(e),Fi=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?D.none():D.some(o)},hr=(e,n)=>{let o=null;return{cancel:()=>{Y(o)||(clearTimeout(o),o=null)},throttle:(...l)=>{Y(o)&&(o=setTimeout(()=>{o=null,e.apply(null,l)},n))}}},od=(e,n)=>{let o=null;const r=()=>{Y(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...l)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,l)},n)}}},Xn=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},pr="\uFEFF",Jn=" ",Xs=e=>e===pr,rm=e=>e.replace(/\uFEFF/g,""),jc=e=>{const n={};return de(e,o=>{n[o]={}}),bs(n)},Gc=e=>e.length!==void 0,su=Array.isArray,cp=e=>{if(su(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},ga=(e,n,o)=>{if(!e)return!1;if(o=o||e,Gc(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(bt(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},ru=(e,n)=>{const o=[];return ga(e,(r,c)=>{o.push(n(r,c,e))}),o},Js=(e,n)=>{const o=[];return ga(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},au=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},ll=(e,n,o,r)=>{let c=To(o)?e[0]:o;for(let l=0;l<e.length;l++)c=n.call(r,c,e[l],l);return c},Xf=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},Fs=e=>e[e.length-1],Jf=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,l=e.isiOS()&&!c,d=e.isiOS()||e.isAndroid(),g=d||r("(pointer:coarse)"),h=c||!l&&d&&r("(min-device-width:768px)"),y=l||d&&!h,w=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,T=!y&&!h&&!w;return{isiPad:Ve(c),isiPhone:Ve(l),isTablet:Ve(h),isPhone:Ve(y),isTouch:Ve(g),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Ve(w),isDesktop:Ve(T)}},$i=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},W0=(e,n)=>{const o=$i(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return cm(r(1),r(2))},Ne=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?am():W0(e,o)},am=()=>cm(0,0),cm=(e,n)=>({major:e,minor:n}),R={nu:cm,detect:Ne,unknown:am},V=(e,n)=>Uc(n.brands,o=>{const r=o.brand.toLowerCase();return mo(e,c=>{var l;return r===((l=c.brand)===null||l===void 0?void 0:l.toLowerCase())}).map(c=>({current:c.name,version:R.nu(parseInt(o.version,10),0)}))}),K=(e,n)=>{const o=String(n).toLowerCase();return mo(e,r=>r.search(o))},ge=(e,n)=>K(e,n).map(o=>{const r=R.detect(o.versionRegexes,n);return{current:o.name,version:r}}),De=(e,n)=>K(e,n).map(o=>{const r=R.detect(o.versionRegexes,n);return{current:o.name,version:r}}),We=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ht=e=>n=>ss(n,e),go=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>ss(e,"edge/")&&ss(e,"chrome")&&ss(e,"safari")&&ss(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,We],search:e=>ss(e,"chrome")&&!ss(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>ss(e,"msie")||ss(e,"trident")},{name:"Opera",versionRegexes:[We,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ht("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ht("firefox")},{name:"Safari",versionRegexes:[We,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(ss(e,"safari")||ss(e,"mobile/"))&&ss(e,"applewebkit")}],Cn=[{name:"Windows",search:Ht("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>ss(e,"iphone")||ss(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ht("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ht("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ht("linux"),versionRegexes:[]},{name:"Solaris",search:Ht("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ht("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ht("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ho={browsers:Ve(go),oses:Ve(Cn)},co="Edge",sc="Chromium",rc="IE",sd="Opera",j0="Firefox",cu="Safari",G0=()=>Qf({current:void 0,version:R.unknown()}),Qf=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(co),isChromium:r(sc),isIE:r(rc),isOpera:r(sd),isFirefox:r(j0),isSafari:r(cu)}},ip={unknown:G0,nu:Qf,edge:Ve(co),chromium:Ve(sc),ie:Ve(rc),opera:Ve(sd),firefox:Ve(j0),safari:Ve(cu)},xn="Windows",im="iOS",rd="Android",q0="Linux",lp="macOS",K0="Solaris",up="FreeBSD",eg="ChromeOS",lm=()=>ad({current:void 0,version:R.unknown()}),ad=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(xn),isiOS:r(im),isAndroid:r(rd),isMacOS:r(lp),isLinux:r(q0),isSolaris:r(K0),isFreeBSD:r(up),isChromeOS:r(eg)}},tg={unknown:lm,nu:ad,windows:Ve(xn),ios:Ve(im),android:Ve(rd),linux:Ve(q0),macos:Ve(lp),solaris:Ve(K0),freebsd:Ve(up),chromeos:Ve(eg)},MC={detect:(e,n,o)=>{const r=ho.browsers(),c=ho.oses(),l=n.bind(h=>V(r,h)).orThunk(()=>ge(r,e)).fold(ip.unknown,ip.nu),d=De(c,e).fold(tg.unknown,tg.nu),g=Jf(d,l,e,o);return{browser:l,os:d,deviceType:g}}},ul=e=>window.matchMedia(e).matches;let qc=Xn(()=>MC.detect(window.navigator.userAgent,D.from(window.navigator.userAgentData),ul));const Qs=()=>qc(),um=(e,n)=>jr(e,n),Y0=(e,n)=>{const o=um(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},dp=Object.getPrototypeOf,X0=e=>Y0("HTMLElement",e),dl=e=>{const n=jr("ownerDocument.defaultView",e);return Ot(e)&&(X0(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(dp(e).constructor.name))},mp=window.navigator.userAgent,ng=Qs(),Ia=ng.browser,Kc=ng.os,ml=ng.deviceType,J0=mp.indexOf("Windows Phone")!==-1,rn={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ia.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ia.isIE(),windowsPhone:J0,browser:{current:Ia.current,version:Ia.version,isChromium:Ia.isChromium,isEdge:Ia.isEdge,isFirefox:Ia.isFirefox,isIE:Ia.isIE,isOpera:Ia.isOpera,isSafari:Ia.isSafari},os:{current:Kc.current,version:Kc.version,isAndroid:Kc.isAndroid,isChromeOS:Kc.isChromeOS,isFreeBSD:Kc.isFreeBSD,isiOS:Kc.isiOS,isLinux:Kc.isLinux,isMacOS:Kc.isMacOS,isSolaris:Kc.isSolaris,isWindows:Kc.isWindows},deviceType:{isDesktop:ml.isDesktop,isiPad:ml.isiPad,isiPhone:ml.isiPhone,isPhone:ml.isPhone,isTablet:ml.isTablet,isTouch:ml.isTouch,isWebView:ml.isWebView}},Q0=/^\s*|\s*$/g,fp=e=>vn(e)?"":(""+e).replace(Q0,""),eb=(e,n)=>n?n==="array"&&su(e)?!0:typeof e===n:e!==void 0,tb=(e,n,o={})=>{const r=ee(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},nb=bt,ob=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(bt(r,c)){const l=r[c];l!==void 0&&(e[c]=l)}}return e},gp=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),ga(e,(c,l)=>n.call(r,c,l,o)===!1?!1:(gp(c,n,o,r),!0)))},Oe={trim:fp,isArray:su,is:eb,toArray:cp,makeMap:tb,each:ga,map:ru,grep:Js,inArray:au,hasOwn:nb,extend:ob,walk:gp,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>Kn(e)?e:e===""?[]:ru(e.split(n||","),fp),_addCacheSuffix:e=>{const n=rn.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},NC=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return Br(r.childNodes[0])},BC=(e,n)=>{const r=(n||document).createElement(e);return Br(r)},PC=(e,n)=>{const r=(n||document).createTextNode(e);return Br(r)},Br=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},z={fromHtml:NC,fromTag:BC,fromText:PC,fromDom:Br,fromPoint:(e,n,o)=>D.from(e.dom.elementFromPoint(n,o)).map(Br)},FC=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},og=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},rb=(e,n,o)=>{const r=e.document.createRange();return FC(r,n),og(r,o),r},ac=(e,n,o,r,c)=>{const l=e.document.createRange();return l.setStart(n.dom,o),l.setEnd(r.dom,c),l},dm=Ys.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),mm=(e,n,o)=>n(z.fromDom(o.startContainer),o.startOffset,z.fromDom(o.endContainer),o.endOffset),ab=(e,n)=>n.match({domRange:o=>({ltr:Ve(o),rtl:D.none}),relative:(o,r)=>({ltr:Xn(()=>rb(e,o,r)),rtl:Xn(()=>D.some(rb(e,r,o)))}),exact:(o,r,c,l)=>({ltr:Xn(()=>ac(e,o,r,c,l)),rtl:Xn(()=>D.some(ac(e,c,l,o,r)))})}),Gr=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>dm.rtl(z.fromDom(c.endContainer),c.endOffset,z.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>mm(e,dm.ltr,o)):mm(e,dm.ltr,o)},iu=(e,n)=>{const o=ab(e,n);return Gr(e,o)};dm.ltr,dm.rtl;const sg=8,rg=9,ag=11,er=1,lu=3,ha=(e,n)=>{const o=e.dom;if(o.nodeType!==er)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},cc=e=>e.nodeType!==er&&e.nodeType!==rg&&e.nodeType!==ag||e.childElementCount===0,br=(e,n)=>{const o=n===void 0?document:n.dom;return cc(o)?[]:wt(o.querySelectorAll(e),z.fromDom)},cd=(e,n)=>{const o=n===void 0?document:n.dom;return cc(o)?D.none():D.from(o.querySelector(e)).map(z.fromDom)},Gt=(e,n)=>e.dom===n.dom,ic=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},cg=(e,n)=>{const o=[],r=l=>(o.push(l),n(l));let c=n(e);do c=c.bind(r);while(c.isSome());return o},un=e=>e.dom.nodeName.toLowerCase(),tr=e=>e.dom.nodeType,Yc=e=>n=>tr(n)===e,id=e=>tr(e)===sg||un(e)==="#comment",fl=e=>Pr(e)&&dl(e.dom),Pr=Yc(er),vr=Yc(lu),$C=Yc(rg),fm=Yc(ag),rs=e=>n=>Pr(n)&&un(n)===e,uu=e=>z.fromDom(e.dom.ownerDocument),gl=e=>$C(e)?e:uu(e),ig=e=>z.fromDom(gl(e).dom.documentElement),hl=e=>z.fromDom(gl(e).dom.defaultView),Xc=e=>D.from(e.dom.parentNode).map(z.fromDom),gm=e=>D.from(e.dom.parentElement).map(z.fromDom),cb=(e,n)=>{const o=Zt(n)?n:Ce;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const l=r.parentNode,d=z.fromDom(l);if(c.push(d),o(d)===!0)break;r=l}return c},hp=e=>{const n=o=>gt(o,r=>!Gt(e,r));return Xc(e).map(Os).map(n).getOr([])},pl=e=>D.from(e.dom.previousSibling).map(z.fromDom),bl=e=>D.from(e.dom.nextSibling).map(z.fromDom),pp=e=>Yn(cg(e,pl)),ib=e=>cg(e,bl),Os=e=>wt(e.dom.childNodes,z.fromDom),vl=(e,n)=>{const o=e.dom.childNodes;return D.from(o[n]).map(z.fromDom)},ys=e=>vl(e,0),hm=e=>vl(e,e.dom.childNodes.length-1),lg=e=>e.dom.childNodes.length,ug=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return z.fromDom(n)},Do=e=>fm(e)&&_e(e.dom.host),lc=e=>z.fromDom(e.dom.getRootNode()),yl=e=>Do(e)?e:ug(gl(e)),Jc=e=>Do(e)?e:z.fromDom(gl(e).dom.body),$s=e=>{const n=lc(e);return Do(n)?D.some(n):D.none()},pm=e=>z.fromDom(e.dom.host),lb=e=>{if(_e(e.target)){const n=z.fromDom(e.target);if(Pr(n)&&LC(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return $o(o)}}return D.from(e.target)},LC=e=>_e(e.dom.shadowRoot),qr=(e,n,o,r,c,l,d)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:l,raw:d}),HC=e=>{const n=z.fromDom(lb(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=x(r,o);return qr(n,e.clientX,e.clientY,o,r,c,e)},dg=(e,n)=>o=>{e(o)&&n(HC(o))},ub=(e,n,o,r,c)=>{const l=dg(o,r);return e.dom.addEventListener(n,l,c),{unbind:qe(db,e,n,l,c)}},vt=(e,n,o,r)=>ub(e,n,o,r,!1),db=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},Go=ze,qo=(e,n,o)=>vt(e,n,Go,o),bp=()=>z.fromDom(document),oo=(e,n=!1)=>e.dom.focus({preventScroll:n}),mb=e=>{const n=lc(e).dom;return e.dom===n.activeElement},bm=(e=bp())=>D.from(e.dom.activeElement).map(z.fromDom),Qc=e=>bm(lc(e)).filter(n=>e.dom.contains(n.dom)),yr=(e,n)=>{Xc(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Li=(e,n)=>{bl(e).fold(()=>{Xc(e).each(c=>{Mo(c,n)})},r=>{yr(r,n)})},vm=(e,n)=>{ys(e).fold(()=>{Mo(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Mo=(e,n)=>{e.dom.appendChild(n.dom)},mg=(e,n)=>{yr(e,n),Mo(n,e)},ld=(e,n)=>{de(n,(o,r)=>{const c=r===0?e:n[r-1];Li(c,o)})},Cl=(e,n)=>{de(n,o=>{Mo(e,o)})},vp=(e,n,o)=>{if(ee(o)||Lt(o)||jo(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},as=(e,n,o)=>{vp(e.dom,n,o)},pa=(e,n)=>{const o=e.dom;Le(n,(r,c)=>{vp(o,c,r)})},wo=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Cr=(e,n)=>D.from(wo(e,n)),ud=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Ko=(e,n)=>{e.dom.removeAttribute(n)},fb=e=>{const n=e.dom.attributes;return n==null||n.length===0},_t=e=>hs(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Fa=e=>{e.dom.textContent="",de(Os(e),n=>{v(n)})},v=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},E=e=>{const n=Os(e);n.length>0&&ld(e,n),v(e)},O=(e,n)=>z.fromDom(e.dom.cloneNode(n)),$=e=>O(e,!1),W=e=>O(e,!0),xe=(e,n)=>{const o=z.fromTag(n),r=_t(e);return pa(o,r),o},Me=(e,n)=>{const o=xe(e,n);Li(e,o);const r=Os(e);return Cl(o,r),v(e),o},Mt=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Os(z.fromDom(r))},Dt=e=>wt(e,z.fromDom),ut=e=>e.dom.innerHTML,jt=(e,n)=>{const r=uu(e).dom,c=z.fromDom(r.createDocumentFragment()),l=Mt(n,r);Cl(c,l),Fa(e),Mo(e,c)},eo=e=>{const n=z.fromTag("div"),o=z.fromDom(e.dom.cloneNode(!0));return Mo(n,o),ut(n)},$a=e=>e.style!==void 0&&Zt(e.style.getPropertyValue),Ls=e=>{const n=vr(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return $s(z.fromDom(n)).fold(()=>o.body.contains(n),Hc(Ls,pm))},VC=(e,n,o)=>{if(!ee(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);$a(e)&&e.style.setProperty(n,o)},gb=(e,n)=>{$a(e)&&e.style.removeProperty(n)},P_=(e,n,o)=>{const r=e.dom;VC(r,n,o)},hb=(e,n)=>{const o=e.dom;Le(n,(r,c)=>{VC(o,c,r)})},Yo=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!Ls(e)?fg(o,n):c},fg=(e,n)=>$a(e)?e.style.getPropertyValue(n):"",pb=(e,n)=>{const o=e.dom,r=fg(o,n);return D.from(r).filter(c=>c.length>0)},zC=e=>{const n={},o=e.dom;if($a(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},UC=(e,n)=>{const o=e.dom;gb(o,n),Zc(Cr(e,"style").map(Wc),"")&&Ko(e,"style")},po=e=>e.dom.offsetWidth,bb=((e,n)=>{const o=(g,h)=>{if(!jo(h)&&!h.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+h);const y=g.dom;$a(y)&&(y.style[e]=h+"px")},r=g=>{const h=n(g);if(h<=0||h===null){const y=Yo(g,e);return parseFloat(y)||0}return h},c=r,l=(g,h)=>hs(h,(y,w)=>{const T=Yo(g,w),k=T===void 0?0:parseInt(T,10);return isNaN(k)?y:y+k},0);return{set:o,get:r,getOuter:c,aggregate:l,max:(g,h,y)=>{const w=l(g,y);return h>w?h-w:0}}})("height",e=>{const n=e.dom;return Ls(e)?n.getBoundingClientRect().height:n.offsetHeight}),ei=e=>bb.get(e),yp=(e,n)=>({left:e,top:n,translate:(r,c)=>yp(e+r,n+c)}),nr=yp,ZC=e=>{const n=e.getBoundingClientRect();return nr(n.left,n.top)},WC=(e,n)=>e!==void 0?e:n!==void 0?n:0,jB=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return nr(o.offsetLeft,o.offsetTop);const l=WC(r==null?void 0:r.pageYOffset,c.scrollTop),d=WC(r==null?void 0:r.pageXOffset,c.scrollLeft),g=WC(c.clientTop,o.clientTop),h=WC(c.clientLeft,o.clientLeft);return jC(e).translate(d-h,l-g)},jC=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?nr(r.offsetLeft,r.offsetTop):Ls(e)?ZC(n):nr(0,0)},Cp=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return nr(o,r)},I_=(e,n,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,n)},vb=(e,n)=>{Qs().browser.isSafari()&&Zt(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},GB=(e,n)=>{const o=l=>{if(!e(l))throw new Error("Can only get "+n+" value of a "+n+" node");return r(l).getOr("")},r=l=>e(l)?D.from(l.dom.nodeValue):D.none();return{get:o,getOption:r,set:(l,d)=>{if(!e(l))throw new Error("Can only set raw "+n+" value of a "+n+" node");l.dom.nodeValue=d}}},GC=(e,n)=>{const r=document.createDocumentFragment();return de(e,c=>{r.appendChild(c.dom)}),z.fromDom(r)},yb=GB(vr,"text"),gg=e=>yb.get(e),F_=e=>yb.getOption(e),$_=(e,n)=>yb.set(e,n),Cb=(e,n)=>{const o=wo(e,n);return o===void 0||o===""?[]:o.split(" ")},qB=(e,n,o)=>{const c=Cb(e,n).concat([o]);return as(e,n,c.join(" ")),!0},KB=(e,n,o)=>{const r=gt(Cb(e,n),c=>c!==o);return r.length>0?as(e,n,r.join(" ")):Ko(e,n),!1};var ti=(e,n,o,r,c)=>e(o,r)?D.some(o):Zt(c)&&c(o)?D.none():n(o,r,c);const du=(e,n,o)=>{let r=e.dom;const c=Zt(o)?o:Ce;for(;r.parentNode;){r=r.parentNode;const l=z.fromDom(r);if(n(l))return D.some(l);if(c(l))break}return D.none()},xl=(e,n,o)=>ti((c,l)=>l(c),du,e,n,o),Dn=(e,n)=>{const o=e.dom;return o.parentNode?Sl(z.fromDom(o.parentNode),r=>!Gt(e,r)&&n(r)):D.none()},Sl=(e,n)=>{const o=c=>n(z.fromDom(c));return mo(e.dom.childNodes,o).map(z.fromDom)},qC=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const l=z.fromDom(r.childNodes[c]);if(n(l))return D.some(l);const d=o(r.childNodes[c]);if(d.isSome())return d}return D.none()};return o(e.dom)},xp=(e,n,o)=>du(e,r=>ha(r,n),o),mu=(e,n)=>cd(n,e),dd=(e,n,o)=>ti((c,l)=>ha(c,l),xp,e,n,o),hg=e=>e.dom.classList!==void 0,KC=e=>Cb(e,"class"),L_=(e,n)=>qB(e,"class",n),bo=(e,n)=>KB(e,"class",n),H_=(e,n)=>St(KC(e),n)?bo(e,n):L_(e,n),Un=(e,n)=>{hg(e)?e.dom.classList.add(n):L_(e,n)},V_=e=>{(hg(e)?e.dom.classList:KC(e)).length===0&&Ko(e,"class")},Hs=(e,n)=>{hg(e)?e.dom.classList.remove(n):bo(e,n),V_(e)},ym=(e,n)=>{const o=hg(e)?e.dom.classList.toggle(n):H_(e,n);return V_(e),o},La=(e,n)=>hg(e)&&e.dom.classList.contains(n),YB=(e,n)=>{de(n,o=>{Un(e,o)})},XB=(e,n)=>{de(n,o=>{Hs(e,o)})},JB=e=>dd(e,"[contenteditable]"),fu=(e,n=!1)=>Ls(e)?e.dom.isContentEditable:JB(e).fold(Ve(n),o=>QB(o)==="true"),QB=e=>e.dom.contentEditable,ni=(e,n)=>{e.dom.contentEditable=n?"true":"false"},Cm=(e,n)=>gt(Os(e),n),YC=(e,n)=>{let o=[];return de(Os(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(YC(r,n))}),o},Zn=(e,n)=>br(n,e),XC=(e,n,o)=>du(e,n,o).isSome(),Sp=(e,n)=>Dn(e,n).isSome(),xb=(e,n)=>qC(e,n).isSome(),z_=(e,n,o)=>xp(e,n,o).isSome(),wp=e=>Zt(e)?e:Ce,Mj=(e,n,o)=>{let r=e.dom;const c=wp(o);for(;r.parentNode;){r=r.parentNode;const l=z.fromDom(r),d=n(l);if(d.isSome())return d;if(c(l))break}return D.none()},pg=(e,n,o)=>{const r=n(e),c=wp(o);return r.orThunk(()=>c(e)?D.none():Mj(e,n,c))},JC=e=>F_(e).filter(n=>n.trim().length!==0||n.indexOf(Jn)>-1).isSome(),e8=e=>fl(e)&&wo(e,"contenteditable")==="false",t8=["img","br"],n8=e=>JC(e)||St(t8,un(e))||e8(e),o8=e=>qC(e,n8),U_={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},bg=Ys.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),s8=(e,n,o,r)=>e.fold(n,o,r),r8=e=>e.fold(Ts,Ts,Ts),a8=bg.before,c8=bg.on,i8=bg.after,gu={before:a8,on:c8,after:i8,cata:s8,getStart:r8},Sb=Ys.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ep=e=>Sb.exact(e.start,e.soffset,e.finish,e.foffset),l8=e=>e.match({domRange:n=>z.fromDom(n.startContainer),relative:(n,o)=>gu.getStart(n),exact:(n,o,r,c)=>n}),Z_=Sb.domRange,u8=Sb.relative,d8=Sb.exact,W_=e=>{const n=l8(e);return hl(n)},m8=U_.create,vg={domRange:Z_,relative:u8,exact:d8,exactFromRange:Ep,getWin:W_,range:m8},f8=(e,n,o)=>{var r;return D.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(c=>{if(c.offsetNode===null)return D.none();const l=e.createRange();return l.setStart(c.offsetNode,c.offset),l.collapse(),D.some(l)})},g8=(e,n,o)=>{var r;return D.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},wb=(e,n,o)=>e.caretPositionFromPoint?f8(e,n,o):e.caretRangeFromPoint?g8(e,n,o):D.none(),h8=(e,n,o)=>{const r=e.document;return wb(r,n,o).map(c=>U_.create(z.fromDom(c.startContainer),c.startOffset,z.fromDom(c.endContainer),c.endOffset))},Eb=(e,n)=>{const o=un(e);return o==="input"?gu.after(e):St(["br","img"],o)?n===0?gu.before(e):gu.after(e):gu.on(e,n)},j_=(e,n)=>{const o=e.fold(gu.before,Eb,gu.after),r=n.fold(gu.before,Eb,gu.after);return vg.relative(o,r)},_b=(e,n,o,r)=>{const c=Eb(e,n),l=Eb(o,r);return vg.relative(c,l)},G_=e=>e.match({domRange:n=>{const o=z.fromDom(n.startContainer),r=z.fromDom(n.endContainer);return _b(o,n.startOffset,r,n.endOffset)},relative:j_,exact:_b}),p8=e=>{const n=vg.getWin(e).dom,o=(c,l,d,g)=>ac(n,c,l,d,g),r=G_(e);return iu(n,r).match({ltr:o,rtl:o})},Nj=(e,n,o)=>h8(e,n,o),Bj=e=>{const n=e===void 0?window:e;return Qs().browser.isFirefox()?D.none():D.from(n.visualViewport)},q_=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),_p=e=>{const n=e===void 0?window:e,o=n.document,r=Cp(z.fromDom(o));return Bj(n).fold(()=>{const c=n.document.documentElement,l=c.clientWidth,d=c.clientHeight;return q_(r.left,r.top,l,d)},c=>q_(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))};class Ds{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let l=n[r];if(l)return l;for(let d=n.parentNode;d&&d!==this.rootNode;d=d.parentNode)if(l=d[r],l)return l}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let l=r.lastChild;l;l=l.lastChild)if(!l.lastChild)return l}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const b8=/^[ \t\r\n]*$/,Ro=e=>b8.test(e),Ms=e=>{for(const n of e)if(!Xs(n))return!1;return!0},xm=e=>" \f	\v".indexOf(e)!==-1,Tb=e=>e===`
`||e==="\r",v8=(e,n)=>n<e.length&&n>=0?Tb(e[n]):!1,or=(e,n=4,o=!0,r=!0)=>{const c=nd(" ",n),l=e.replace(/\t/g,c);return hs(l,(g,h)=>xm(h)||h===Jn?g.pcIsSpace||g.str===""&&o||g.str.length===l.length-1&&r||v8(l,g.str.length+1)?{pcIsSpace:!1,str:g.str+Jn}:{pcIsSpace:!0,str:g.str+" "}:{pcIsSpace:Tb(h),str:g.str+h},{pcIsSpace:!1,str:""}).str},md=e=>n=>!!n&&n.nodeType===e,yg=e=>!!e&&!Object.getPrototypeOf(e),Ye=md(1),wl=e=>Ye(e)&&fl(z.fromDom(e)),y8=e=>Ye(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",xr=e=>{const n=e.toLowerCase();return o=>_e(o)&&o.nodeName.toLowerCase()===n},uc=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return St(n,r)}return!1}},kb=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Ye(r)){const c=r.ownerDocument.defaultView;if(c)for(let l=0;l<o.length;l++){const d=c.getComputedStyle(r,null);if((d?d.getPropertyValue(e):null)===o[l])return!0}}return!1}},C8=e=>n=>Ye(n)&&n.hasAttribute(e),Sm=e=>Ye(e)&&e.hasAttribute("data-mce-bogus"),x8=e=>Ye(e)&&e.getAttribute("data-mce-bogus")==="all",El=e=>Ye(e)&&e.tagName==="TABLE",QC=e=>n=>!!(wl(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),Ab=uc(["textarea","input"]),ke=md(3),Pj=md(4),Ho=md(7),_l=md(8),Tp=md(9),wm=md(11),vo=xr("br"),K_=xr("img"),S8=xr("a"),oi=QC("true"),to=QC("false"),fd=e=>wl(e)&&e.isContentEditable&&_e(e.parentElement)&&!e.parentElement.isContentEditable,kp=uc(["td","th"]),si=uc(["td","th","caption"]),dc=uc(["video","audio","object","embed"]),Ob=xr("li"),Vo=xr("details"),Db=xr("summary"),Mb={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},Y_=(e,n,o)=>{const r=z.fromDom(n),c=z.fromDom(e),l=o.getWhitespaceElements();return XC(c,g=>bt(l,un(g)),qe(Gt,r))},w8=e=>Ye(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Hi=(e,n)=>Ye(e)&&bt(n.getNonEmptyElements(),e.nodeName),Rb=C8("data-mce-bookmark"),Nb=e=>gm(z.fromDom(e)).exists(n=>!fu(n)),ex=(e,n,o)=>Ro(e.data)&&!Y_(e,n,o),tx=(e,n,o,r)=>ke(e)&&!ex(e,n,o)&&(!r.includeZwsp||!Ms(e.data)),nx=(e,n,o,r)=>Zt(r.isContent)&&r.isContent(n)||Hi(n,e)||Rb(n)||w8(n)||tx(n,o,e,r)||to(n)||oi(n)&&Nb(n),Tl=(e,n,o)=>{const r={...Mb,...o};if(r.checkRootAsContent&&nx(e,n,n,r))return!1;let c=n.firstChild,l=0;if(!c)return!0;const d=new Ds(c,n);do{if(r.skipBogus&&Ye(c)){const g=c.getAttribute("data-mce-bogus");if(g){c=d.next(g==="all");continue}}if(_l(c)){c=d.next(!0);continue}if(vo(c)){l++,c=d.next();continue}if(nx(e,c,n,r))return!1;c=d.next()}while(c);return l<=1},Sr=(e,n,o)=>Tl(e,n.dom,{checkRootAsContent:!0,...o}),Bb=(e,n,o)=>nx(e,n,n,{includeZwsp:Mb.includeZwsp,...o}),X_=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},gd=e=>X_(e)!=="html",J_=e=>gd(e.nodeName),E8=e=>X_(e.nodeName),Q_=["svg","math"],_8=()=>{const e=fr(),n=()=>e.get().map(E8).getOr("html");return{track:c=>(J_(c)?e.set(c):e.get().exists(l=>!l.contains(c))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},Ap="data-mce-block",T8=e=>gt(bs(e),n=>!/[A-Z]/.test(n)),ox=e=>wt(T8(e),n=>{const o=CSS.escape(n);return`${o}:`+wt(Q_,r=>`not(${r} ${o})`).join(":")}).join(","),eT=(e,n)=>_e(n.querySelector(e))?(n.setAttribute(Ap,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Ap),!1),tT=(e,n)=>{const o=ox(e.getTransparentElements()),r=ox(e.getBlockElements());return gt(n.querySelectorAll(o),c=>eT(r,c))},sx=(e,n,o)=>{var r;const c=o?"lastChild":"firstChild";for(let l=n[c];l;l=l[c])if(Tl(e,l,{checkRootAsContent:!0})){(r=l.parentNode)===null||r===void 0||r.removeChild(l);return}},k8=(e,n,o)=>{const r=document.createRange(),c=n.parentNode;if(c){r.setStartBefore(n),r.setEndBefore(o);const l=r.extractContents();sx(e,l,!0),r.setStartAfter(o),r.setEndAfter(n);const d=r.extractContents();sx(e,d,!1),Tl(e,l,{checkRootAsContent:!0})||c.insertBefore(l,n),Tl(e,o,{checkRootAsContent:!0})||c.insertBefore(o,n),Tl(e,d,{checkRootAsContent:!0})||c.insertBefore(d,n),c.removeChild(n)}},Ha=(e,n,o)=>{const r=e.getBlockElements(),c=z.fromDom(n),l=g=>un(g)in r,d=g=>Gt(g,c);de(Dt(o),g=>{du(g,l,d).each(h=>{const y=Cm(g,w=>l(w)&&!e.isValidChild(un(h),un(w)));if(y.length>0){const w=gm(h);de(y,T=>{du(T,l,d).each(k=>{k8(e,k.dom,T.dom)})}),w.each(T=>tT(e,T.dom))}})})},ht=(e,n,o)=>{de([...o,...ri(e,n)?[n]:[]],r=>de(Zn(z.fromDom(r),r.nodeName.toLowerCase()),c=>{O8(e,c.dom)&&E(c)}))},kl=(e,n)=>{const o=tT(e,n);Ha(e,n,o),ht(e,n,o)},Pb=(e,n)=>{if(ax(e,n)){const o=ox(e.getBlockElements());eT(o,n)}},A8=(e,n,o)=>{const r=l=>Gt(l,z.fromDom(n)),c=cb(z.fromDom(o),r);nc(c,c.length-2).filter(Pr).fold(()=>kl(e,n),l=>kl(e,l.dom))},rx=e=>e.hasAttribute(Ap),Cg=(e,n)=>bt(e.getTransparentElements(),n),ax=(e,n)=>Ye(n)&&Cg(e,n.nodeName),ri=(e,n)=>ax(e,n)&&rx(n),O8=(e,n)=>ax(e,n)&&!rx(n),Em=(e,n)=>n.type===1&&Cg(e,n.name)&&ee(n.attr(Ap)),nT=Qs().browser,oT=e=>mo(e,Pr),io=e=>nT.isFirefox()&&un(e)==="table"?oT(Os(e)).filter(n=>un(n)==="caption").bind(n=>oT(ib(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,l=n.dom.offsetHeight;return r<=c?-l:0})).getOr(0):0,mc=(e,n)=>e.children&&St(e.children,n),Kr=(e,n,o)=>{let r=0,c=0;const l=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Yo(z.fromDom(e),"position")==="static"){const g=n.getBoundingClientRect();return r=g.left+(l.documentElement.scrollLeft||e.scrollLeft)-l.documentElement.clientLeft,c=g.top+(l.documentElement.scrollTop||e.scrollTop)-l.documentElement.clientTop,{x:r,y:c}}let d=n;for(;d&&d!==o&&d.nodeType&&!mc(d,o);){const g=d;r+=g.offsetLeft||0,c+=g.offsetTop||0,d=g.offsetParent}for(d=n.parentNode;d&&d!==o&&d.nodeType&&!mc(d,o);)r-=d.scrollLeft||0,c-=d.scrollTop||0,d=d.parentNode;c+=io(z.fromDom(n))}return{x:r,y:c}},_m=(e,n={})=>{let o=0;const r={},c=z.fromDom(e),l=gl(c),d=U=>{n.referrerPolicy=U},g=U=>{n.contentCssCors=U},h=U=>{Mo(yl(c),U)},y=U=>{const q=yl(c);mu(q,"#"+U).each(v)},w=U=>zn(r,U).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),T=U=>new Promise((q,X)=>{let te;const he=Oe._addCacheSuffix(U),we=w(he);r[he]=we,we.count++;const Ue=(He,nt)=>{de(He,al),we.status=nt,we.passed=[],we.failed=[],te&&(te.onload=null,te.onerror=null,te=null)},le=()=>Ue(we.passed,2),se=()=>Ue(we.failed,3);if(q&&we.passed.push(q),X&&we.failed.push(X),we.status===1)return;if(we.status===2){le();return}if(we.status===3){se();return}we.status=1;const ve=z.fromTag("link",l.dom);pa(ve,{rel:"stylesheet",type:"text/css",id:we.id}),n.contentCssCors&&as(ve,"crossOrigin","anonymous"),n.referrerPolicy&&as(ve,"referrerpolicy",n.referrerPolicy),te=ve.dom,te.onload=le,te.onerror=se,h(ve),as(ve,"href",he)}),k=(U,q)=>{const X=w(U);r[U]=X,X.count++;const te=z.fromTag("style",l.dom);pa(te,{rel:"stylesheet",type:"text/css",id:X.id,"data-mce-key":U}),te.dom.innerHTML=q,h(te)},M=U=>Promise.allSettled(wt(U,X=>T(X).then(Ve(X)))).then(X=>{const te=da(X,he=>he.status==="fulfilled");return te.fail.length>0?Promise.reject(wt(te.fail,he=>he.reason)):wt(te.pass,he=>he.value)}),P=U=>{const q=Oe._addCacheSuffix(U);zn(r,q).each(X=>{--X.count===0&&(delete r[q],y(X.id))})};return{load:T,loadRawCss:k,loadAll:M,unload:P,unloadRawCss:U=>{zn(r,U).each(q=>{--q.count===0&&(delete r[U],y(q.id))})},unloadAll:U=>{de(U,q=>{P(q)})},_setReferrerPolicy:d,_setContentCssCors:g}},cx=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const l=lc(o).dom;return D.from(e.get(l)).getOrThunk(()=>{const d=_m(l,r);return e.set(l,d),d})}}})(),Vs=e=>e.nodeName.toLowerCase()==="span",wr=(e,n)=>_e(e)&&(Bb(n,e)||n.isInline(e.nodeName.toLowerCase())),ix=(e,n,o)=>{const r=new Ds(e,n).prev(!1),c=new Ds(e,n).next(!1),l=To(r)||wr(r,o),d=To(c)||wr(c,o);return l&&d},be=e=>Vs(e)&&e.getAttribute("data-mce-type")==="bookmark",Va=(e,n,o)=>ke(e)&&e.data.length>0&&ix(e,n,o),sT=e=>Ye(e)?e.childNodes.length>0:!1,cs=e=>wm(e)||Tp(e),za=(e,n,o,r)=>{var c;const l=r||n;if(Ye(n)&&be(n))return n;const d=n.childNodes;for(let g=d.length-1;g>=0;g--)za(e,d[g],o,l);if(Ye(n)){const g=n.childNodes;g.length===1&&be(g[0])&&((c=n.parentNode)===null||c===void 0||c.insertBefore(g[0],n))}return!cs(n)&&!Bb(o,n)&&!sT(n)&&!Va(n,l,o)&&e.remove(n),n},ai=Oe.makeMap,Ib=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ci=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rT=/[<>&\"\']/g,va=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,bn={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Yr={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Op={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},No=e=>{const n=z.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},lx=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const l=String.fromCharCode(parseInt(r[c],n));if(!Yr[l]){const d="&"+r[c+1]+";";o[l]=d,o[d]=l}}return o}else return},Vi=lx("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),ux=(e,n)=>e.replace(n?Ib:ci,o=>Yr[o]||o),ya=e=>(""+e).replace(rT,n=>Yr[n]||n),aT=(e,n)=>e.replace(n?Ib:ci,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Yr[o]||"&#"+o.charCodeAt(0)+";"),J=(e,n,o)=>{const r=o||Vi;return e.replace(n?Ib:ci,c=>Yr[c]||r[c]||c)},Fn={encodeRaw:ux,encodeAllRaw:ya,encodeNumeric:aT,encodeNamed:J,getEncodeFunc:(e,n)=>{const o=lx(n)||Vi,r=(d,g)=>d.replace(g?Ib:ci,h=>Yr[h]!==void 0?Yr[h]:o[h]!==void 0?o[h]:h.length>1?"&#"+((h.charCodeAt(0)-55296)*1024+(h.charCodeAt(1)-56320)+65536)+";":"&#"+h.charCodeAt(0)+";"),c=(d,g)=>J(d,g,o),l=ai(e.replace(/\+/g,","));return l.named&&l.numeric?r:l.named?n?c:J:l.numeric?aT:ux},decode:e=>e.replace(va,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):bn[o]||String.fromCharCode(o)):Op[n]||Vi[n]||No(n))},yo=(e,n)=>(e=Oe.trim(e),e?e.split(n||" "):[]),zs=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Ln=e=>Ot(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",D8=e=>{const n=o=>Kn(o)?wt(o,n):Ln(o)?new RegExp(o.source,o.flags):Ot(o)?Qt(o,n):o;return n(e)},hd=e=>{const n=/^(~)?(.+)$/;return qs(yo(e,","),o=>{const r=n.exec(o);if(r){const l=r[1]==="~"?"span":"div",d=r[2];return[{cloneName:l,name:d}]}else return[]})},Fb=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),iT=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},dx=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=iT(e),c=l=>Object.freeze(l.split(" "));return Object.freeze({blockContent:c(n),phrasingContent:c(o),flowContent:c(r)})},M8={html4:Xn(()=>dx("html4")),html5:Xn(()=>dx("html5")),"html5-strict":Xn(()=>dx("html5-strict"))},lT=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:c}=M8[e]();return n==="blocks"?D.some(o):n==="phrasing"?D.some(r):n==="flow"?D.some(c):D.none()},Tm=e=>{const n=Fb(e),{phrasingContent:o,flowContent:r}=iT(e),c={},l=(h,y,w)=>{c[h]={attributes:Oo(y,Ve({})),attributesOrder:y,children:Oo(w,Ve({}))}},d=(h,y="",w="")=>{const T=yo(w),k=yo(h);let M=k.length;const P=[...n,...yo(y)];for(;M--;)l(k[M],P.slice(),T)},g=(h,y)=>{const w=yo(h),T=yo(y);let k=w.length;for(;k--;){const M=c[w[k]];for(let P=0,B=T.length;P<B;P++)M.attributes[T[P]]={},M.attributesOrder.push(T[P])}};return e!=="html5-strict"&&(de(yo("acronym applet basefont big font strike tt"),w=>{d(w,"",o)}),de(yo("center dir isindex noframes"),w=>{d(w,"",r)})),d("html","manifest","head body"),d("head","","base command link meta noscript script style title"),d("title hr noscript br"),d("base","href target"),d("link","href rel media hreflang type sizes hreflang"),d("meta","name http-equiv content charset"),d("style","media type scoped"),d("script","src async defer type charset"),d("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),d("dd div","",r),d("address dt caption","",e==="html4"?o:r),d("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),d("blockquote","cite",r),d("ol","reversed start type","li"),d("ul","","li"),d("li","value",r),d("dl","","dt dd"),d("a","href target rel media hreflang type",e==="html4"?o:r),d("q","cite",o),d("ins del","cite datetime",r),d("img","src sizes srcset alt usemap ismap width height"),d("iframe","src name width height",r),d("embed","src type width height"),d("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),d("param","name value"),d("map","name",[r,"area"].join(" ")),d("area","alt coords shape href target rel media hreflang type"),d("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),d("colgroup","span","col"),d("col","span"),d("tbody thead tfoot","","tr"),d("tr","","td th"),d("td","colspan rowspan headers",r),d("th","colspan rowspan headers scope abbr",r),d("form","accept-charset action autocomplete enctype method name novalidate target",r),d("fieldset","disabled form name",[r,"legend"].join(" ")),d("label","form for",o),d("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),d("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),d("select","disabled form multiple name required size","option optgroup"),d("optgroup","disabled label","option"),d("option","disabled label selected value"),d("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),d("menu","type label",[r,"li"].join(" ")),d("noscript","",r),e!=="html4"&&(d("wbr"),d("ruby","",[o,"rt rp"].join(" ")),d("figcaption","",r),d("mark rt rp bdi","",o),d("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),d("canvas","width height",r),d("data","value",o),d("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),d("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),d("picture","","img source"),d("source","src srcset type media sizes"),d("track","kind src srclang label default"),d("datalist","",[o,"option"].join(" ")),d("article section nav aside main header footer","",r),d("hgroup","","h1 h2 h3 h4 h5 h6"),d("figure","",[r,"figcaption"].join(" ")),d("time","datetime",o),d("dialog","open",r),d("command","type label icon disabled checked radiogroup command"),d("output","for form name",o),d("progress","value max",o),d("meter","value min max low high optimum",o),d("details","open",[r,"summary"].join(" ")),d("keygen","autofocus challenge disabled form keytype name"),l("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(g("script","language xml:space"),g("style","xml:space"),g("object","declare classid code codebase codetype archive standby align border hspace vspace"),g("embed","align name hspace vspace"),g("param","valuetype type"),g("a","charset name rev shape coords"),g("br","clear"),g("applet","codebase archive code object alt name width height align hspace vspace"),g("img","name longdesc align border hspace vspace"),g("iframe","longdesc frameborder marginwidth marginheight scrolling align"),g("font basefont","size color face"),g("input","usemap align"),g("select"),g("textarea"),g("h1 h2 h3 h4 h5 h6 div p legend caption","align"),g("ul","type compact"),g("li","type"),g("ol dl menu dir","compact"),g("pre","width xml:space"),g("hr","align noshade size width"),g("isindex","prompt"),g("table","summary width frame rules cellspacing cellpadding align bgcolor"),g("col","width align char charoff valign"),g("colgroup","width align char charoff valign"),g("thead","align char charoff valign"),g("tr","align char charoff valign bgcolor"),g("th","axis align char charoff valign nowrap bgcolor width height"),g("form","accept"),g("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),g("tfoot","align char charoff valign"),g("tbody","align char charoff valign"),g("area","nohref"),g("body","background bgcolor text link vlink alink")),e!=="html4"&&(g("input button select textarea","autofocus"),g("input textarea","placeholder"),g("a","download"),g("link script img","crossorigin"),g("img","loading"),g("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&de([c.video,c.audio],h=>{delete h.children.audio,delete h.children.video}),de(yo("a form meter progress dfn"),h=>{c[h]&&delete c[h].children[h]}),delete c.caption.children.table,delete c.script,c},xg=e=>e==="-"?"remove":"add",mx=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return D.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},R8=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return qs(yo(e,","),o=>{const r=n.exec(o);if(r){const c=r[1],l=c?xg(c):"replace",d=r[2],g=qs(yo(r[3],"|"),h=>mx(h).toArray());return[{operation:l,name:d,validChildren:g}]}else return[]})},N8=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:c,attributesOrder:l}=n;return de(yo(e,"|"),d=>{const g=o.exec(d);if(g){const h={},y=g[1],w=g[2].replace(/[\\:]:/g,":"),T=g[3],k=g[4];if(y==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(w),h.required=!0),y==="-"){delete c[w],l.splice(Oe.inArray(l,w),1);return}if(T&&(T==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:w,value:k}),h.defaultValue=k):T==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:w,value:k}),h.forcedValue=k):T==="<"&&(h.validValues=Oe.makeMap(k,"?"))),r.test(w)){const M=h;n.attributePatterns=n.attributePatterns||[],M.pattern=zs(w),n.attributePatterns.push(M)}else c[w]||l.push(w),c[w]=h}})},Us=(e,n)=>{Le(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},hu=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return qs(yo(n,","),r=>{const c=o.exec(r);if(c){const l=c[1],d=c[2],g=c[3],h=c[4],y=c[5],w={attributes:{},attributesOrder:[]};if(e.each(T=>Us(T,w)),l==="#"?w.paddEmpty=!0:l==="-"&&(w.removeEmpty=!0),h==="!"&&(w.removeEmptyAttrs=!0),y&&N8(y,w),g&&(w.outputName=d),d==="@")if(e.isNone())e=D.some(w);else return[];return[g?{name:d,element:w,aliasName:g}:{name:d,element:w}]}else return[]})},pd={},zi=Oe.makeMap,li=Oe.each,Ca=Oe.extend,Dp=Oe.explode,Mp=(e,n={})=>{const o=zi(e," ",zi(e.toUpperCase()," "));return Ca(o,n)},$b=e=>Mp("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),ui=(e,n)=>{if(e){const o={};return ee(e)&&(e={"*":e}),li(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?zi(r,/[, ]/):Dp(r,/[, ]/)}),o}else return},sr=(e={})=>{var n;const o={},r={};let c=[];const l={},d={},g=(at,en,Co)=>{const Zo=e[at];if(Zo)return zi(Zo,/[, ]/,zi(Zo.toUpperCase(),/[, ]/));{let gs=pd[at];return gs||(gs=Mp(en,Co),pd[at]=gs),gs}},h=(n=e.schema)!==null&&n!==void 0?n:"html5",y=Tm(h);e.verify_html===!1&&(e.valid_elements="*[*]");const w=ui(e.valid_styles),T=ui(e.invalid_styles,"map"),k=ui(e.valid_classes,"map"),M=g("whitespace_elements","pre script noscript style textarea video audio iframe object code"),P=g("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),B=g("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),F=g("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),U="td th iframe video audio object script code",q=g("non_empty_elements",U+" pre svg textarea summary",B),X=g("move_caret_before_on_enter_elements",U+" table",B),te="h1 h2 h3 h4 h5 h6",he=g("text_block_elements",te+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),we=g("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",he),Ue=g("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),le=g("transparent_elements","a ins del canvas map"),se=g("wrap_block_elements","pre "+te);li("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),at=>{d[at]=new RegExp("</"+at+"[^>]*>","gi")});const ve=at=>{const en=D.from(o["@"]),Co=/[*?+]/;de(hu(en,at??""),({name:Zo,element:gs,aliasName:Wo})=>{if(Wo&&(o[Wo]=gs),Co.test(Zo)){const ro=gs;ro.pattern=zs(Zo),c.push(ro)}else o[Zo]=gs})},He=at=>{c=[],de(bs(o),en=>{delete o[en]}),ve(at)},nt=(at,en)=>{var Co,Zo;delete pd.text_block_elements,delete pd.block_elements;const gs=en.extends?!ur(en.extends):!1,Wo=en.extends;if(r[at]=Wo?r[Wo]:{},l[at]=Wo??at,q[at.toUpperCase()]={},q[at]={},gs||(we[at.toUpperCase()]={},we[at]={}),Wo&&!o[at]&&o[Wo]){const ro=D8(o[Wo]);delete ro.removeEmptyAttrs,delete ro.removeEmpty,o[at]=ro}else o[at]={attributesOrder:[],attributes:{}};if(Kn(en.attributes)){const ro=Ur=>{ao.attributesOrder.push(Ur),ao.attributes[Ur]={}},ao=(Co=o[at])!==null&&Co!==void 0?Co:{};delete ao.attributesDefault,delete ao.attributesForced,delete ao.attributePatterns,delete ao.attributesRequired,ao.attributesOrder=[],ao.attributes={},de(en.attributes,Ur=>{const ki=Fb(h);mx(Ur).each(({preset:ql,name:nl})=>{ql?nl==="global"&&de(ki,ro):ro(nl)})}),o[at]=ao}if(Lt(en.padEmpty)){const ro=(Zo=o[at])!==null&&Zo!==void 0?Zo:{};ro.paddEmpty=en.padEmpty,o[at]=ro}if(Kn(en.children)){const ro={},ao=ki=>{ro[ki]={}},Ur=ki=>{lT(h,ki).each(ql=>{de(ql,ao)})};de(en.children,ki=>{mx(ki).each(({preset:ql,name:nl})=>{ql?Ur(nl):ao(nl)})}),r[at]=ro}Wo&&Le(r,(ro,ao)=>{ro[Wo]&&(r[ao]=ro=Ca({},r[ao]),ro[at]=ro[Wo])})},It=at=>{de(hd(at??""),({name:en,cloneName:Co})=>{nt(en,{extends:Co})})},$t=at=>{Ot(at)?Le(at,(en,Co)=>nt(Co,en)):ee(at)&&It(at)},fn=at=>{de(R8(at??""),({operation:en,name:Co,validChildren:Zo})=>{const gs=en==="replace"?{"#comment":{}}:r[Co],Wo=ao=>{en==="remove"?delete gs[ao]:gs[ao]={}},ro=ao=>{lT(h,ao).each(Ur=>{de(Ur,Wo)})};de(Zo,({preset:ao,name:Ur})=>{ao?ro(Ur):Wo(Ur)}),r[Co]=gs})},En=at=>{const en=o[at];if(en)return en;let Co=c.length;for(;Co--;){const Zo=c[Co];if(Zo.pattern.test(at))return Zo}},so=()=>{e.valid_elements?(He(e.valid_elements),li(y,(at,en)=>{r[en]=at.children})):(li(y,(at,en)=>{o[en]={attributes:at.attributes,attributesOrder:at.attributesOrder},r[en]=at.children}),li(yo("strong/b em/i"),at=>{const en=yo(at,"/");o[en[1]].outputName=en[0]}),li(Ue,(at,en)=>{o[en]&&(e.padd_empty_block_inline_children&&(o[en].paddInEmptyBlock=!0),o[en].removeEmpty=!0)}),li(yo("ol ul blockquote a table tbody"),at=>{o[at]&&(o[at].removeEmpty=!0)}),li(yo("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),at=>{o[at]&&(o[at].paddEmpty=!0)}),li(yo("span"),at=>{o[at].removeEmptyAttrs=!0})),delete o.svg,$t(e.custom_elements),fn(e.valid_children),ve(e.extended_valid_elements),fn("+ol[ul|ol],+ul[ul|ol]"),li({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(at,en)=>{o[en]&&(o[en].parentsRequired=yo(at))}),e.invalid_elements&&li(Dp(e.invalid_elements),at=>{o[at]&&delete o[at]}),En("span")||ve("span[!data-mce-type|*]")},ns=Ve(w),fs=Ve(T),Be=Ve(k),et=Ve(F),ln=Ve(we),gn=Ve(he),fe=Ve(Ue),Ee=Ve(Object.seal(B)),Qe=Ve(P),Ft=Ve(q),Wt=Ve(X),yn=Ve(M),Fc=Ve(le),Gl=Ve(se),Or=Ve(Object.seal(d)),oa=(at,en)=>{const Co=r[at.toLowerCase()];return!!(Co&&Co[en.toLowerCase()])},Xa=(at,en)=>{const Co=En(at);if(Co)if(en){if(Co.attributes[en])return!0;const Zo=Co.attributePatterns;if(Zo){let gs=Zo.length;for(;gs--;)if(Zo[gs].pattern.test(en))return!0}}else return!0;return!1},ur=at=>bt(ln(),at),zr=at=>!Lo(at,"#")&&Xa(at)&&!ur(at),$c=at=>bt(Gl(),at)||zr(at),Yd=Ve(l);return so(),{type:h,children:r,elements:o,getValidStyles:ns,getValidClasses:Be,getBlockElements:ln,getInvalidStyles:fs,getVoidElements:Ee,getTextBlockElements:gn,getTextInlineElements:fe,getBoolAttrs:et,getElementRule:En,getSelfClosingElements:Qe,getNonEmptyElements:Ft,getMoveCaretBeforeOnEnterElements:Wt,getWhitespaceElements:yn,getTransparentElements:Fc,getSpecialElements:Or,isValidChild:oa,isValid:Xa,isBlock:ur,isInline:zr,isWrapper:$c,getCustomElements:Yd,addValidElements:ve,setValidElements:He,addCustomElements:$t,addValidChildren:fn}},uT=e=>({value:Ui(e)}),Ui=e=>gr(e,"#").toUpperCase(),fx=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},pu=e=>{const n=fx(e.red)+fx(e.green)+fx(e.blue);return uT(n)},km=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,bd=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,B8=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Sg=(e,n,o,r)=>{const c=parseInt(e,10),l=parseInt(n,10),d=parseInt(o,10),g=parseFloat(r);return B8(c,l,d,g)},P8=e=>km.test(e)?"rgb":bd.test(e)?"rgba":"other",dT=e=>{const n=km.exec(e);if(n!==null)return D.some(Sg(n[1],n[2],n[3],"1"));const o=bd.exec(e);return o!==null?D.some(Sg(o[1],o[2],o[3],o[4])):D.none()},Bo=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Rp=e=>dT(e).map(pu).map(n=>"#"+n.value).getOr(e),Al=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,l={};let d,g;const h=pr;n&&(d=n.getValidStyles(),g=n.getInvalidStyles());const y=(`\\" \\' \\; \\: ; : `+h).split(" ");for(let T=0;T<y.length;T++)l[y[T]]=h+T,l[h+T]=y[T];const w={parse:T=>{const k={};let M=!1;const P=e.url_converter,B=e.url_converter_scope||w,F=(le,se,ve)=>{const He=k[le+"-top"+se];if(!He)return;const nt=k[le+"-right"+se];if(!nt)return;const It=k[le+"-bottom"+se];if(!It)return;const $t=k[le+"-left"+se];if(!$t)return;const fn=[He,nt,It,$t];let En=fn.length-1;for(;En--&&fn[En]===fn[En+1];);En>-1&&ve||(k[le+se]=En===-1?fn[0]:fn.join(" "),delete k[le+"-top"+se],delete k[le+"-right"+se],delete k[le+"-bottom"+se],delete k[le+"-left"+se])},U=le=>{const se=k[le];if(!se)return;const ve=se.indexOf(",")>-1?[se]:se.split(" ");let He=ve.length;for(;He--;)if(ve[He]!==ve[0])return!1;return k[le]=ve[0],!0},q=(le,se,ve,He)=>{U(se)&&U(ve)&&U(He)&&(k[le]=k[se]+" "+k[ve]+" "+k[He],delete k[se],delete k[ve],delete k[He])},X=le=>(M=!0,l[le]),te=(le,se)=>(M&&(le=le.replace(/\uFEFF[0-9]/g,ve=>l[ve])),se||(le=le.replace(/\\([\'\";:])/g,"$1")),le),he=le=>String.fromCharCode(parseInt(le.slice(1),16)),we=le=>le.replace(/\\[0-9a-f]+/gi,he),Ue=(le,se,ve,He,nt,It)=>{if(nt=nt||It,nt)return nt=te(nt),"'"+nt.replace(/\'/g,"\\'")+"'";if(se=te(se||ve||He||""),!e.allow_script_urls){const $t=se.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test($t)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test($t))return""}return P&&(se=P.call(B,se,"style")),"url('"+se.replace(/\'/g,"\\'")+"')"};if(T){T=T.replace(/[\u0000-\u001F]/g,""),T=T.replace(/\\[\"\';:\uFEFF]/g,X).replace(/\"[^\"]+\"|\'[^\']+\'/g,se=>se.replace(/[;:]/g,X));let le;for(;le=r.exec(T);){r.lastIndex=le.index+le[0].length;let se=le[1].replace(c,"").toLowerCase(),ve=le[2].replace(c,"");if(se&&ve){if(se=we(se),ve=we(ve),se.indexOf(h)!==-1||se.indexOf('"')!==-1||!e.allow_script_urls&&(se==="behavior"||/expression\s*\(|\/\*|\*\//.test(ve)))continue;se==="font-weight"&&ve==="700"?ve="bold":(se==="color"||se==="background-color")&&(ve=ve.toLowerCase()),P8(ve)==="rgb"&&dT(ve).each(He=>{ve=Rp(Bo(He)).toLowerCase()}),ve=ve.replace(o,Ue),k[se]=M?te(ve,!0):ve}}F("border","",!0),F("border","-width"),F("border","-color"),F("border","-style"),F("padding",""),F("margin",""),q("border","border-width","border-style","border-color"),k.border==="medium none"&&delete k.border,k["border-image"]==="none"&&delete k["border-image"]}return k},serialize:(T,k)=>{let M="";const P=(F,U)=>{const q=U[F];if(q)for(let X=0,te=q.length;X<te;X++){const he=q[X],we=T[he];we&&(M+=(M.length>0?" ":"")+he+": "+we+";")}},B=(F,U)=>{if(!g||!U)return!0;let q=g["*"];return q&&q[F]?!1:(q=g[U],!(q&&q[F]))};return k&&d?(P("*",d),P(k,d)):Le(T,(F,U)=>{F&&B(U,k)&&(M+=(M.length>0?" ":"")+U+": "+F+";")}),M}};return w},Np={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},gx=e=>e instanceof Event||Zt(e.initEvent),Am=e=>e.isDefaultPrevented===ze||e.isDefaultPrevented===Ce,Ua=e=>vn(e.preventDefault)||gx(e),wg=(e,n)=>{const o=n??{};for(const r in e)bt(Np,r)||(o[r]=e[r]);return _e(e.composedPath)&&(o.composedPath=()=>e.composedPath()),_e(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),_e(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},Om=(e,n,o,r)=>{var c;const l=wg(n,r);return l.type=e,vn(l.target)&&(l.target=(c=l.srcElement)!==null&&c!==void 0?c:o),Ua(n)&&(l.preventDefault=()=>{l.defaultPrevented=!0,l.isDefaultPrevented=ze,Zt(n.preventDefault)&&n.preventDefault()},l.stopPropagation=()=>{l.cancelBubble=!0,l.isPropagationStopped=ze,Zt(n.stopPropagation)&&n.stopPropagation()},l.stopImmediatePropagation=()=>{l.isImmediatePropagationStopped=ze,l.stopPropagation()},Am(l)||(l.isDefaultPrevented=l.defaultPrevented===!0?ze:Ce,l.isPropagationStopped=l.cancelBubble===!0?ze:Ce,l.isImmediatePropagationStopped=Ce)),l},I8="mce-data-",Lb=/^(?:mouse|contextmenu)|click/,Bp=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},Dm=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},F8=e=>_e(e)&&Lb.test(e.type),Pp=(e,n)=>{const o=Om(e.type,e,document,n);if(F8(e)&&To(e.pageX)&&!To(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,l=r.body,d=o;d.pageX=e.clientX+(c&&c.scrollLeft||l&&l.scrollLeft||0)-(c&&c.clientLeft||l&&l.clientLeft||0),d.pageY=e.clientY+(c&&c.scrollTop||l&&l.scrollTop||0)-(c&&c.clientTop||l&&l.clientTop||0)}return o},hx=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const l=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,d=()=>{Dm(e,"DOMContentLoaded",d),Dm(e,"load",d),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};l()?d():Bp(e,"DOMContentLoaded",d),o.domLoaded||Bp(e,"load",d)};class Zi{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=I8+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const l=this;let d;const g=window,h=k=>{l.executeHandlers(Pp(k||g.event),y)};if(!n||ke(n)||_l(n))return r;let y;n[l.expando]?y=n[l.expando]:(y=l.count++,n[l.expando]=y,l.events[y]={}),c=c||n;const w=o.split(" ");let T=w.length;for(;T--;){let k=w[T],M=h,P=!1,B=!1;if(k==="DOMContentLoaded"&&(k="ready"),l.domLoaded&&k==="ready"&&n.readyState==="complete"){r.call(c,Pp({type:k}));continue}!l.hasFocusIn&&(k==="focusin"||k==="focusout")&&(P=!0,B=k==="focusin"?"focus":"blur",M=F=>{const U=Pp(F||g.event);U.type=U.type==="focus"?"focusin":"focusout",l.executeHandlers(U,y)}),d=l.events[y][k],d?k==="ready"&&l.domLoaded?r(Pp({type:k})):d.push({func:r,scope:c}):(l.events[y][k]=d=[{func:r,scope:c}],d.fakeName=B,d.capture=P,d.nativeHandler=M,k==="ready"?hx(n,M,l):Bp(n,B||k,M,P))}return n=d=null,r}unbind(n,o,r){if(!n||ke(n)||_l(n))return this;const c=n[this.expando];if(c){let l=this.events[c];if(o){const d=o.split(" ");let g=d.length;for(;g--;){const h=d[g],y=l[h];if(y){if(r){let w=y.length;for(;w--;)if(y[w].func===r){const T=y.nativeHandler,k=y.fakeName,M=y.capture,P=y.slice(0,w).concat(y.slice(w+1));P.nativeHandler=T,P.fakeName=k,P.capture=M,l[h]=P}}(!r||y.length===0)&&(delete l[h],Dm(n,y.fakeName||h,y.nativeHandler,y.capture))}}}else Le(l,(d,g)=>{Dm(n,d.fakeName||g,d.nativeHandler,d.capture)}),l={};for(const d in l)if(bt(l,d))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||ke(n)||_l(n))return this;const c=Pp({type:o,target:n},r);do{const l=n[this.expando];l&&this.executeHandlers(c,l),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||ke(n)||_l(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let l=0,d=c.length;l<d;l++){const g=c[l];if(g&&g.func.call(g.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Zi.Event=new Zi;const fc=Oe.each,Ol=Oe.grep,bu="data-mce-style",mT=Oe.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),vd=(e,n,o)=>{vn(o)||o===""?Ko(e,n):as(e,n,o)},Hb=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Mm=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const l=c.nodeType;n&&ke(c)&&(l===r||!c.data.length)||(o++,r=l)}return o},px=(e,n)=>{const o=wo(n,"style"),r=e.serialize(e.parse(o),un(n));vd(n,bu,r)},fT=(e,n)=>jo(e)?bt(mT,n)?e+"":e+"px":e,Vb=(e,n,o)=>{const r=Hb(n);vn(o)||o===""?UC(e,r):P_(e,r,fT(o,r))},bx=(e,n,o)=>{const r=n.keep_values,c={set:(d,g,h)=>{const y=z.fromDom(d);Zt(n.url_converter)&&_e(g)&&(g=n.url_converter.call(n.url_converter_scope||o(),String(g),h,d));const w="data-mce-"+h;vd(y,w,g),vd(y,h,g)},get:(d,g)=>{const h=z.fromDom(d);return wo(h,"data-mce-"+g)||wo(h,g)}},l={style:{set:(d,g)=>{const h=z.fromDom(d);r&&vd(h,bu,g),Ko(h,"style"),ee(g)&&hb(h,e.parse(g))},get:d=>{const g=z.fromDom(d),h=wo(g,bu)||wo(g,"style");return e.serialize(e.parse(h),un(g))}}};return r&&(l.href=l.src=c),l},wn=(e,n={})=>{const o={},r=window,c={};let l=0;const d=!0,g=!0,h=cx.forElement(z.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),y=[],w=n.schema?n.schema:sr({}),T=Al({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),k=n.ownEvents?new Zi:Zi.Event,M=w.getBlockElements(),P=Q=>ee(Q)?bt(M,Q):Ye(Q)&&(bt(M,Q.nodeName)||ri(w,Q)),B=Q=>Q&&e&&ee(Q)?e.getElementById(Q):Q,F=Q=>{const oe=B(Q);return _e(oe)?z.fromDom(oe):null},U=(Q,oe,Re="")=>{let Te;const mt=F(Q);if(_e(mt)&&Pr(mt)){const sn=zf[oe];sn&&sn.get?Te=sn.get(mt.dom,oe):Te=wo(mt,oe)}return _e(Te)?Te:Re},q=Q=>{const oe=B(Q);return vn(oe)?[]:oe.attributes},X=(Q,oe,Re)=>{et(Q,Te=>{if(Ye(Te)){const mt=z.fromDom(Te),sn=Re===""?null:Re,xo=wo(mt,oe),dr=zf[oe];dr&&dr.set?dr.set(mt.dom,sn,oe):vd(mt,oe,sn),xo!==sn&&n.onSetAttrib&&n.onSetAttrib({attrElm:mt.dom,attrName:oe,attrValue:sn})}})},te=(Q,oe)=>Q.cloneNode(oe),he=()=>n.root_element||e.body,we=Q=>{const oe=_p(Q);return{x:oe.x,y:oe.y,w:oe.width,h:oe.height}},Ue=(Q,oe)=>Kr(e.body,B(Q),oe),le=(Q,oe,Re)=>{et(Q,Te=>{const mt=z.fromDom(Te);Vb(mt,oe,Re),n.update_styles&&px(T,mt)})},se=(Q,oe)=>{et(Q,Re=>{const Te=z.fromDom(Re);Le(oe,(mt,sn)=>{Vb(Te,sn,mt)}),n.update_styles&&px(T,Te)})},ve=(Q,oe,Re)=>{const Te=B(Q);if(!(vn(Te)||!wl(Te)&&!y8(Te)))return Re?Yo(z.fromDom(Te),Hb(oe)):(oe=oe.replace(/-(\D)/g,(mt,sn)=>sn.toUpperCase()),oe==="float"&&(oe="cssFloat"),Te.style?Te.style[oe]:void 0)},He=Q=>{const oe=B(Q);if(!oe)return{w:0,h:0};let Re=ve(oe,"width"),Te=ve(oe,"height");return(!Re||Re.indexOf("px")===-1)&&(Re="0"),(!Te||Te.indexOf("px")===-1)&&(Te="0"),{w:parseInt(Re,10)||oe.offsetWidth||oe.clientWidth,h:parseInt(Te,10)||oe.offsetHeight||oe.clientHeight}},nt=Q=>{const oe=B(Q),Re=Ue(oe),Te=He(oe);return{x:Re.x,y:Re.y,w:Te.w,h:Te.h}},It=(Q,oe)=>{if(!Q)return!1;const Re=Kn(Q)?Q:[Q];return On(Re,Te=>ha(z.fromDom(Te),oe))},$t=(Q,oe,Re,Te)=>{const mt=[];let sn=B(Q);Te=Te===void 0;const xo=Re||(he().nodeName!=="BODY"?he().parentNode:null);if(ee(oe))if(oe==="*")oe=Ye;else{const dr=oe;oe=Ai=>It(Ai,dr)}for(;sn&&!(sn===xo||vn(sn.nodeType)||Tp(sn)||wm(sn));){if(!oe||oe(sn))if(Te)mt.push(sn);else return[sn];sn=sn.parentNode}return Te?mt:null},fn=(Q,oe,Re)=>{const Te=$t(Q,oe,Re,!1);return Te&&Te.length>0?Te[0]:null},En=(Q,oe,Re)=>{let Te=oe;if(Q){ee(oe)&&(Te=mt=>It(mt,oe));for(let mt=Q[Re];mt;mt=mt[Re])if(Zt(Te)&&Te(mt))return mt}return null},so=(Q,oe)=>En(Q,oe,"nextSibling"),ns=(Q,oe)=>En(Q,oe,"previousSibling"),fs=Q=>Zt(Q.querySelectorAll),Be=(Q,oe)=>{var Re,Te;const mt=(Te=(Re=B(oe))!==null&&Re!==void 0?Re:n.root_element)!==null&&Te!==void 0?Te:e;return fs(mt)?ps(mt.querySelectorAll(Q)):[]},et=function(Q,oe,Re){const Te=Re??this;if(Kn(Q)){const mt=[];return fc(Q,(sn,xo)=>{const dr=B(sn);dr&&mt.push(oe.call(Te,dr,xo))}),mt}else{const mt=B(Q);return mt?oe.call(Te,mt):!1}},ln=(Q,oe)=>{et(Q,Re=>{Le(oe,(Te,mt)=>{X(Re,mt,Te)})})},gn=(Q,oe)=>{et(Q,Re=>{const Te=z.fromDom(Re);jt(Te,oe)})},fe=(Q,oe,Re,Te,mt)=>et(Q,sn=>{const xo=ee(oe)?e.createElement(oe):oe;return _e(Re)&&ln(xo,Re),Te&&(!ee(Te)&&Te.nodeType?xo.appendChild(Te):ee(Te)&&gn(xo,Te)),mt?xo:sn.appendChild(xo)}),Ee=(Q,oe,Re)=>fe(e.createElement(Q),Q,oe,Re,!0),Qe=Fn.decode,Ft=Fn.encodeAllRaw,Wt=(Q,oe,Re="")=>{let Te="<"+Q;for(const mt in oe)tu(oe,mt)&&(Te+=" "+mt+'="'+Ft(oe[mt])+'"');return il(Re)&&bt(w.getVoidElements(),Q)?Te+" />":Te+">"+Re+"</"+Q+">"},yn=Q=>{const oe=e.createElement("div"),Re=e.createDocumentFragment();Re.appendChild(oe),Q&&(oe.innerHTML=Q);let Te;for(;Te=oe.firstChild;)Re.appendChild(Te);return Re.removeChild(oe),Re},Fc=(Q,oe)=>et(Q,Re=>{const Te=z.fromDom(Re);return oe&&de(Os(Te),mt=>{vr(mt)&&mt.dom.length===0?v(mt):yr(Te,mt)}),v(Te),Te.dom}),Gl=Q=>et(Q,oe=>{const Re=oe.attributes;for(let Te=Re.length-1;Te>=0;Te--)oe.removeAttributeNode(Re.item(Te))}),Or=Q=>T.parse(Q),oa=(Q,oe)=>T.serialize(Q,oe),Xa=Q=>{if(Kl!==wn.DOM&&e===document){if(o[Q])return;o[Q]=!0}let oe=e.getElementById("mceDefaultStyles");if(!oe){oe=e.createElement("style"),oe.id="mceDefaultStyles",oe.type="text/css";const Re=e.head;Re.firstChild?Re.insertBefore(oe,Re.firstChild):Re.appendChild(oe)}oe.styleSheet?oe.styleSheet.cssText+=Q:oe.appendChild(e.createTextNode(Q))},ur=Q=>{Q||(Q=""),de(Q.split(","),oe=>{c[oe]=!0,h.load(oe).catch(it)})},zr=(Q,oe,Re)=>{et(Q,Te=>{if(Ye(Te)){const mt=z.fromDom(Te),sn=oe.split(" ");de(sn,xo=>{_e(Re)?(Re?Un:Hs)(mt,xo):ym(mt,xo)})}})},$c=(Q,oe)=>{zr(Q,oe,!0)},Yd=(Q,oe)=>{zr(Q,oe,!1)},at=(Q,oe)=>{const Re=F(Q),Te=oe.split(" ");return _e(Re)&&Xt(Te,mt=>La(Re,mt))},en=Q=>{et(Q,oe=>UC(z.fromDom(oe),"display"))},Co=Q=>{et(Q,oe=>P_(z.fromDom(oe),"display","none"))},Zo=Q=>{const oe=F(Q);return _e(oe)&&Zc(pb(oe,"display"),"none")},gs=Q=>(Q||"mce_")+l++,Wo=Q=>{const oe=F(Q);return _e(oe)?Ye(oe.dom)?oe.dom.outerHTML:eo(oe):""},ro=(Q,oe)=>{et(Q,Re=>{Ye(Re)&&(Re.outerHTML=oe)})},ao=(Q,oe)=>{const Re=B(oe);return et(Q,Te=>{const mt=Re==null?void 0:Re.parentNode,sn=Re==null?void 0:Re.nextSibling;return mt&&(sn?mt.insertBefore(Te,sn):mt.appendChild(Te)),Te})},Ur=(Q,oe,Re)=>et(oe,Te=>{var mt;const sn=Kn(oe)?Q.cloneNode(!0):Q;return Re&&fc(Ol(Te.childNodes),xo=>{sn.appendChild(xo)}),(mt=Te.parentNode)===null||mt===void 0||mt.replaceChild(sn,Te),Te}),ki=(Q,oe)=>{if(Q.nodeName!==oe.toUpperCase()){const Re=Ee(oe);return fc(q(Q),Te=>{X(Re,Te.nodeName,U(Q,Te.nodeName))}),Ur(Re,Q,!0),Re}else return Q},ql=(Q,oe)=>{let Re=Q;for(;Re;){let Te=oe;for(;Te&&Re!==Te;)Te=Te.parentNode;if(Re===Te)break;Re=Re.parentNode}return!Re&&Q.ownerDocument?Q.ownerDocument.documentElement:Re},nl=(Q,oe,Re)=>rl(oe)?Tl(w,Q,{...Re,isContent:mt=>{const sn=mt.nodeName.toLowerCase();return!!oe[sn]}}):Tl(w,Q,Re),Kh=()=>e.createRange(),Vf=(Q,oe,Re)=>{let Te=Kh(),mt,sn;if(Q&&oe&&Q.parentNode&&oe.parentNode){const xo=Q.parentNode;return Te.setStart(xo,Mm(Q)),Te.setEnd(oe.parentNode,Mm(oe)),mt=Te.extractContents(),Te=Kh(),Te.setStart(oe.parentNode,Mm(oe)+1),Te.setEnd(xo,Mm(Q)+1),sn=Te.extractContents(),xo.insertBefore(za(Kl,mt,w),Q),Re?xo.insertBefore(Re,Q):xo.insertBefore(oe,Q),xo.insertBefore(za(Kl,sn,w),Q),Fc(Q),Re||oe}else return},qu=(Q,oe,Re,Te)=>{if(Kn(Q)){let mt=Q.length;const sn=[];for(;mt--;)sn[mt]=qu(Q[mt],oe,Re,Te);return sn}else return n.collect&&(Q===e||Q===r)&&y.push([Q,oe,Re,Te]),k.bind(Q,oe,Re,Te||Kl)},Lc=(Q,oe,Re)=>{if(Kn(Q)){let Te=Q.length;const mt=[];for(;Te--;)mt[Te]=Lc(Q[Te],oe,Re);return mt}else{if(y.length>0&&(Q===e||Q===r)){let Te=y.length;for(;Te--;){const[mt,sn,xo]=y[Te];Q===mt&&(!oe||oe===sn)&&(!Re||Re===xo)&&k.unbind(mt,sn,xo)}}return k.unbind(Q,oe,Re)}},Ku=(Q,oe,Re)=>k.dispatch(Q,oe,Re),F0=(Q,oe,Re)=>k.dispatch(Q,oe,Re),Yh=Q=>{if(Q&&wl(Q)){const oe=Q.getAttribute("data-mce-contenteditable");return oe&&oe!=="inherit"?oe:Q.contentEditable!=="inherit"?Q.contentEditable:null}else return null},Kl={doc:e,settings:n,win:r,files:c,stdMode:d,boxModel:g,styleSheetLoader:h,boundEvents:y,styles:T,schema:w,events:k,isBlock:P,root:null,clone:te,getRoot:he,getViewPort:we,getRect:nt,getSize:He,getParent:fn,getParents:$t,get:B,getNext:so,getPrev:ns,select:Be,is:It,add:fe,create:Ee,createHTML:Wt,createFragment:yn,remove:Fc,setStyle:le,getStyle:ve,setStyles:se,removeAllAttribs:Gl,setAttrib:X,setAttribs:ln,getAttrib:U,getPos:Ue,parseStyle:Or,serializeStyle:oa,addStyle:Xa,loadCSS:ur,addClass:$c,removeClass:Yd,hasClass:at,toggleClass:zr,show:en,hide:Co,isHidden:Zo,uniqueId:gs,setHTML:gn,getOuterHTML:Wo,setOuterHTML:ro,decode:Qe,encode:Ft,insertAfter:ao,replace:Ur,rename:ki,findCommonAncestor:ql,run:et,getAttribs:q,isEmpty:nl,createRng:Kh,nodeIndex:Mm,split:Vf,bind:qu,unbind:Lc,fire:F0,dispatch:Ku,getContentEditable:Yh,getContentEditableParent:Q=>{const oe=he();let Re=null;for(let Te=Q;Te&&Te!==oe&&(Re=Yh(Te),Re===null);Te=Te.parentNode);return Re},isEditable:Q=>{if(_e(Q)){const oe=Ye(Q)?Q:Q.parentElement;return _e(oe)&&wl(oe)&&fu(z.fromDom(oe))}else return!1},destroy:()=>{if(y.length>0){let Q=y.length;for(;Q--;){const[oe,Re,Te]=y[Q];k.unbind(oe,Re,Te)}}Le(c,(Q,oe)=>{h.unload(oe),delete c[oe]})},isChildOf:(Q,oe)=>Q===oe||oe.contains(Q),dumpRng:Q=>"startContainer: "+Q.startContainer.nodeName+", startOffset: "+Q.startOffset+", endContainer: "+Q.endContainer.nodeName+", endOffset: "+Q.endOffset},zf=bx(T,n,Ve(Kl));return Kl};wn.DOM=wn(document),wn.nodeIndex=Mm;const gT=wn.DOM,Eg=0,vx=1,zb=2,hT=3;class vu{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=gT;let l;const d=()=>{c.remove(y),l&&(l.onerror=l.onload=l=null)},g=()=>{d(),o()},h=()=>{d(),r("Failed to load script: "+n)},y=c.uniqueId();l=document.createElement("script"),l.id=y,l.type="text/javascript",l.src=Oe._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(l,"referrerpolicy",this.settings.referrerPolicy),l.onload=g,l.onerror=h,(document.getElementsByTagName("head")[0]||document.body).appendChild(l)})}isDone(n){return this.states[n]===zb}markDone(n){this.states[n]=zb}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=Eg),new Promise((c,l)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:l})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(h,y)=>{zn(o.scriptLoadedCallbacks,y).each(w=>{de(w,T=>T[h](y))}),delete o.scriptLoadedCallbacks[y]},c=h=>{const y=gt(h,w=>w.status==="rejected");return y.length>0?Promise.reject(qs(y,({reason:w})=>Kn(w)?w:[w])):Promise.resolve()},l=h=>Promise.allSettled(wt(h,y=>o.states[y]===zb?(r("resolve",y),Promise.resolve()):o.states[y]===hT?(r("reject",y),Promise.reject(y)):(o.states[y]=vx,o.loadScript(y).then(()=>{o.states[y]=zb,r("resolve",y);const w=o.queue;return w.length>0?(o.queue=[],l(w).then(c)):Promise.resolve()},()=>(o.states[y]=hT,r("reject",y),Promise.reject(y)))))),d=h=>(o.loading=!0,l(h).then(y=>{o.loading=!1;const w=o.queueLoadedCallbacks.shift();return D.from(w).each(al),c(y)})),g=jc(n);return o.loading?new Promise((h,y)=>{o.queueLoadedCallbacks.push(()=>{d(g).then(h,y)})}):d(g)}}vu.ScriptLoader=new vu;const $8=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},L8=e=>Ot(e)&&bt(e,"raw"),yx=e=>Kn(e)&&e.length>1,Ip={},Ub=fo("en"),Zb=()=>zn(Ip,Ub.get()),zo={getData:()=>Qt(Ip,e=>({...e})),setCode:e=>{e&&Ub.set(e)},getCode:()=>Ub.get(),add:(e,n)=>{let o=Ip[e];o||(Ip[e]=o={});const r=wt(bs(n),c=>c.toLowerCase());Le(n,(c,l)=>{const d=l.toLowerCase();d!==l&&$8(r,d)?(bt(n,d)||(o[d]=c),o[l]=c):o[d]=c})},translate:e=>{const n=Zb().getOr({}),o=d=>Zt(d)?Object.prototype.toString.call(d):r(d)?"":""+d,r=d=>d===""||d===null||d===void 0,c=d=>{const g=o(d);return bt(n,g)?o(n[g]):zn(n,g.toLowerCase()).map(o).getOr(g)},l=d=>d.replace(/{context:\w+}$/,"");if(r(e))return"";if(L8(e))return o(e.raw);if(yx(e)){const d=e.slice(1),g=c(e[0]).replace(/\{([0-9]+)\}/g,(h,y)=>bt(d,y)?o(d[y]):h);return l(g)}return l(c(e))},isRtl:()=>Zb().bind(e=>zn(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>bt(Ip,e)},is=()=>{const e=[],n={},o={},r=[],c=(B,F)=>{const U=gt(r,q=>q.name===B&&q.state===F);de(U,q=>q.resolve())},l=B=>bt(n,B),d=B=>bt(o,B),g=B=>{if(o[B])return o[B].instance},h=(B,F)=>{const U=zo.getCode(),q=","+(F||"")+",";!U||F&&q.indexOf(","+U+",")===-1||vu.ScriptLoader.add(n[B]+"/langs/"+U+".js")},y=(B,F)=>{is.languageLoad!==!1&&(l(B)?h(B,F):P(B,"loaded").then(()=>h(B,F)))},w=(B,F)=>(e.push(F),o[B]={instance:F},c(B,"added"),F),T=B=>{delete n[B],delete o[B]},k=(B,F)=>ee(F)?ee(B)?{prefix:"",resource:F,suffix:""}:{prefix:B.prefix,resource:F,suffix:B.suffix}:F,M=(B,F)=>{if(n[B])return Promise.resolve();let U=ee(F)?F:F.prefix+F.resource+F.suffix;U.indexOf("/")!==0&&U.indexOf("://")===-1&&(U=is.baseURL+"/"+U),n[B]=U.substring(0,U.lastIndexOf("/"));const q=()=>(c(B,"loaded"),Promise.resolve());return o[B]?q():vu.ScriptLoader.add(U).then(q)},P=(B,F="added")=>F==="added"&&d(B)||F==="loaded"&&l(B)?Promise.resolve():new Promise(U=>{r.push({name:B,state:F,resolve:U})});return{items:e,urls:n,lookup:o,get:g,requireLangPack:y,add:w,remove:T,createUrl:k,load:M,waitFor:P}};is.languageLoad=!0,is.baseURL="",is.PluginManager=is(),is.ThemeManager=is(),is.ModelManager=is();const Rm=Ve("mce-annotation"),An=Ve("data-mce-annotation"),Nm=Ve("data-mce-annotation-uid"),Tg=Ve("data-mce-annotation-active"),Fp=Ve("data-mce-annotation-classes"),Bm=Ve("data-mce-annotation-attrs"),Wb=e=>n=>Gt(n,e),pT=(e,n)=>{const o=e.selection.getRng(),r=z.fromDom(o.startContainer),c=z.fromDom(e.getBody()),l=n.fold(()=>"."+Rm(),h=>`[${An()}="${h}"]`),d=vl(r,o.startOffset).getOr(r);return dd(d,l,Wb(c)).bind(h=>Cr(h,`${Nm()}`).bind(y=>Cr(h,`${An()}`).map(w=>{const T=vT(e,y);return{uid:y,name:w,elements:T}})))},bT=e=>Pr(e)&&La(e,Rm()),Sx=(e,n)=>ud(e,"data-mce-bogus")||z_(e,'[data-mce-bogus="all"]',Wb(n)),vT=(e,n)=>{const o=z.fromDom(e.getBody()),r=Zn(o,`[${Nm()}="${n}"]`);return gt(r,c=>!Sx(c,o))},wx=(e,n)=>{const o=z.fromDom(e.getBody()),r=Zn(o,`[${An()}="${n}"]`),c={};return de(r,l=>{if(!Sx(l,o)){const d=wo(l,Nm()),g=zn(c,d).getOr([]);c[d]=g.concat([l])}}),c},H8=(e,n)=>{const o=fo({}),r=()=>({listeners:[],previous:fr()}),c=(T,k)=>{l(T,M=>(k(M),M))},l=(T,k)=>{const M=o.get(),P=zn(M,T).getOrThunk(r),B=k(P);M[T]=B,o.set(M)},d=(T,k,M)=>{c(T,P=>{de(P.listeners,B=>B(!0,T,{uid:k,nodes:wt(M,F=>F.dom)}))})},g=T=>{c(T,k=>{de(k.listeners,M=>M(!1,T))})},h=(T,k)=>{de(vT(e,T),M=>{k?as(M,Tg(),"true"):Ko(M,Tg())})},y=od(()=>{const T=Vn(n.getNames());de(T,k=>{l(k,M=>{const P=M.previous.get();return pT(e,D.some(k)).fold(()=>{P.each(B=>{g(k),M.previous.clear(),h(B,!1)})},({uid:B,name:F,elements:U})=>{Zc(P,B)||(P.each(q=>h(q,!1)),d(F,B,U),M.previous.set(B),h(B,!0))}),{previous:M.previous,listeners:M.listeners}})})},30);return e.on("remove",()=>{y.cancel()}),e.on("NodeChange",()=>{y.throttle()}),{addListener:(T,k)=>{l(T,M=>({previous:M.previous,listeners:M.listeners.concat([k])}))}}},V8=(e,n)=>{const o=An(),r=l=>D.from(l.attr(o)).bind(n.lookup),c=l=>{var d,g;l.attr(Nm(),null),l.attr(An(),null),l.attr(Tg(),null);const h=D.from(l.attr(Bm())).map(k=>k.split(",")).getOr([]),y=D.from(l.attr(Fp())).map(k=>k.split(",")).getOr([]);de(h,k=>l.attr(k,null));const w=(g=(d=l.attr("class"))===null||d===void 0?void 0:d.split(" "))!==null&&g!==void 0?g:[],T=eu(w,[Rm()].concat(y));l.attr("class",T.length>0?T.join(" "):null),l.attr(Fp(),null),l.attr(Bm(),null)};e.serializer.addTempAttr(Tg()),e.serializer.addAttributeFilter(o,l=>{for(const d of l)r(d).each(g=>{g.persistent===!1&&(d.name==="span"?d.unwrap():c(d))})})},yd=()=>{const e={};return{register:(c,l)=>{e[c]={name:c,settings:l}},lookup:c=>zn(e,c).map(l=>l.settings),getNames:()=>bs(e)}},Ex=(e,n,o=Ce)=>{const r=new Ds(e,n),c=l=>{let d;do d=r[l]();while(d&&!ke(d)&&!o(d));return D.from(d).filter(ke)};return{current:()=>D.from(r.current()).filter(ke),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},Dl=(e,n)=>{const o=n||(d=>e.isBlock(d)||vo(d)||to(d)),r=(d,g,h,y)=>{if(ke(d)){const w=y(d,g,d.data);if(w!==-1)return D.some({container:d,offset:w})}return h().bind(w=>r(w.container,w.offset,h,y))};return{backwards:(d,g,h,y)=>{const w=Ex(d,y??e.getRoot(),o);return r(d,g,()=>w.prev().map(T=>({container:T,offset:T.length})),h).getOrNull()},forwards:(d,g,h,y)=>{const w=Ex(d,y??e.getRoot(),o);return r(d,g,()=>w.next().map(T=>({container:T,offset:0})),h).getOrNull()}}},_x=["td","th"],z8=["thead","tbody","tfoot"],U8=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],yT=["li","dd","dt"],Z8=["ul","ol","dl"],W8=["pre","script","textarea","style"],kg=e=>{let n;return o=>(n=n||Oo(e,ze),bt(n,un(o)))},CT=e=>un(e)==="table",Pm=e=>Pr(e)&&un(e)==="br",Tx=kg(U8),Ag=kg(Z8),yu=kg(yT),kx=kg(z8),Cd=kg(_x),Og=kg(W8),j8=e=>{const n=[];let o=e.dom;for(;o;)n.push(z.fromDom(o)),o=o.lastChild;return n},jb=e=>{const n=Zn(e,"br"),o=gt(j8(e).slice(-1),Pm);n.length===o.length&&de(o,v)},Cu=()=>{const e=z.fromTag("br");return as(e,"data-mce-bogus","1"),e},xd=e=>{Fa(e),Mo(e,Cu())},G8=(e,n)=>{hm(e).each(o=>{pl(o).each(r=>{n.isBlock(un(e))&&Pm(o)&&n.isBlock(un(r))&&v(o)})})},Cs=pr,Gb=Xs,xa=rm,xT=e=>e.insertContent(Cs,{preserve_zwsp:!0}),q8=Ye,xu=ke,Xo=e=>(xu(e)&&(e=e.parentNode),q8(e)&&e.hasAttribute("data-mce-caret")),rr=e=>xu(e)&&Gb(e.data),Uo=e=>Xo(e)||rr(e),$p=e=>e.firstChild!==e.lastChild||!vo(e.firstChild),Ax=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Cs),l=e.parentNode;if(n){const d=e.previousSibling;if(xu(d)){if(Uo(d))return d;if(qb(d))return d.splitText(d.data.length-1)}l==null||l.insertBefore(c,e)}else{const d=e.nextSibling;if(xu(d)){if(Uo(d))return d;if(Dg(d))return d.splitText(1),d}e.nextSibling?l==null||l.insertBefore(c,e.nextSibling):l==null||l.appendChild(c)}return c},Ox=e=>{const n=e.container();return ke(n)?n.data.charAt(e.offset())===Cs||e.isAtStart()&&rr(n.previousSibling):!1},Lp=e=>{const n=e.container();return ke(n)?n.data.charAt(e.offset()-1)===Cs||e.isAtEnd()&&rr(n.nextSibling):!1},K8=(e,n,o)=>{var r;const l=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);l.setAttribute("data-mce-caret",o?"before":"after"),l.setAttribute("data-mce-bogus","all"),l.appendChild(Cu().dom);const d=n.parentNode;return o?d==null||d.insertBefore(l,n):n.nextSibling?d==null||d.insertBefore(l,n.nextSibling):d==null||d.appendChild(l),l},Dg=e=>xu(e)&&e.data[0]===Cs,qb=e=>xu(e)&&e.data[e.data.length-1]===Cs,Dx=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Sm(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},Kb=e=>e&&e.hasAttribute("data-mce-caret")?(Dx(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Mx=e=>Xo(e.startContainer),Sd=Math.round,Su=e=>e?{left:Sd(e.left),top:Sd(e.top),bottom:Sd(e.bottom),right:Sd(e.right),width:Sd(e.width),height:Sd(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Mn=(e,n)=>(e=Su(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),wd=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,Rx=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,Mg=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:Rx(n.top-e.bottom,e,n)},Rg=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Rx(n.bottom-e.top,e,n),Nx=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,ST=e=>hs(e,(n,o)=>n.fold(()=>D.some(o),r=>{const c=Math.min(o.left,r.left),l=Math.min(o.top,r.top),d=Math.max(o.right,r.right),g=Math.max(o.bottom,r.bottom);return D.some({top:l,right:d,bottom:g,left:c,width:d-c,height:g-l})}),D.none()),Yb=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},Y8=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Xb=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},ar=(e,n)=>{if(Ye(e)&&e.hasChildNodes()){const o=e.childNodes,r=z0(n,0,o.length-1);return o[r]}else return e},Jb=(e,n)=>{if(!(n<0&&Ye(e)&&e.hasChildNodes()))return ar(e,n)},Zs=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),wu=e=>ee(e)&&e.charCodeAt(0)>=768&&Zs.test(e),X8=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},J8=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},wT=oi,Qb=to,Bx=vo,Px=ke,Ix=uc(["script","style","textarea"]),Fx=uc(["img","input","textarea","hr","iframe","video","audio","object","embed"]),ET=uc(["table"]),_T=Uo,di=e=>_T(e)?!1:Px(e)?!Ix(e.parentNode):Fx(e)||Bx(e)||ET(e)||xs(e),Q8=e=>Ye(e)&&e.getAttribute("unselectable")==="true",xs=e=>!Q8(e)&&Qb(e),eP=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(xs(o))return!1;if(wT(o))return!0}return!0},Ed=e=>xs(e)?!hs(ps(e.getElementsByTagName("*")),(n,o)=>n||wT(o),!1):!1,TT=e=>Fx(e)||Ed(e),$x=(e,n)=>di(e)&&eP(e,n),Lx=Ye,Hx=di,ev=kb("display","block table"),kT=kb("float","left right"),Hp=J8(Lx,Hx,In(kT)),tP=In(kb("white-space","pre pre-line pre-wrap")),Eo=ke,Po=vo,Rs=wn.nodeIndex,ls=Jb,Jo=e=>e?e.createRange():wn.DOM.createRng(),Io=e=>ee(e)&&/[\r\n\t ]/.test(e),tv=e=>!!e.setStart&&!!e.setEnd,Vp=e=>{const n=e.startContainer,o=e.startOffset;if(Io(e.toString())&&tP(n.parentNode)&&ke(n)){const r=n.data;if(Io(r[o-1])||Io(r[o+1]))return!0}return!1},AT=e=>{const n=e.ownerDocument,o=Jo(n),r=n.createTextNode(Jn),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const l=Su(o.getBoundingClientRect());return c.removeChild(r),l},OT=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&ke(o)&&r===0&&c===1){const l=e.cloneRange();return l.setEndAfter(o),Eu(l)}else return null},Vx=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Eu=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Su(r[0]):o=Su(e.getBoundingClientRect()),!tv(e)&&Po(e)&&Vx(o)?AT(e):Vx(o)&&tv(e)&&(n=OT(e))!==null&&n!==void 0?n:o},_u=(e,n)=>{const o=Mn(e,n);return o.width=1,o.right=o.left+1,o},zx=e=>{const n=[],o=d=>{d.height!==0&&(n.length>0&&wd(d,n[n.length-1])||n.push(d))},r=(d,g)=>{const h=Jo(d.ownerDocument);if(g<d.data.length){if(wu(d.data[g]))return;if(wu(d.data[g-1])&&(h.setStart(d,g),h.setEnd(d,g+1),!Vp(h))){o(_u(Eu(h),!1));return}}g>0&&(h.setStart(d,g-1),h.setEnd(d,g),Vp(h)||o(_u(Eu(h),!1))),g<d.data.length&&(h.setStart(d,g),h.setEnd(d,g+1),Vp(h)||o(_u(Eu(h),!0)))},c=e.container(),l=e.offset();if(Eo(c))return r(c,l),n;if(Lx(c))if(e.isAtEnd()){const d=ls(c,l);Eo(d)&&r(d,d.data.length),Hp(d)&&!Po(d)&&o(_u(Eu(d),!1))}else{const d=ls(c,l);if(Eo(d)&&r(d,0),Hp(d)&&e.isAtEnd())return o(_u(Eu(d),!1)),n;const g=ls(e.container(),e.offset()-1);Hp(g)&&!Po(g)&&(ev(g)||ev(d)||!Hp(d))&&o(_u(Eu(g),!1)),Hp(d)&&o(_u(Eu(d),!0))}return n},ue=(e,n,o)=>{const r=()=>(Eo(e),n===0),c=()=>Eo(e)?n>=e.data.length:n>=e.childNodes.length,l=()=>{const w=Jo(e.ownerDocument);return w.setStart(e,n),w.setEnd(e,n),w},d=()=>(o||(o=zx(ue(e,n))),o),g=()=>d().length>0,h=w=>w&&e===w.container()&&n===w.offset(),y=w=>ls(e,w?n-1:n);return{container:Ve(e),offset:Ve(n),toRange:l,getClientRects:d,isVisible:g,isAtStart:r,isAtEnd:c,isEqual:h,getNode:y}};ue.fromRangeStart=e=>ue(e.startContainer,e.startOffset),ue.fromRangeEnd=e=>ue(e.endContainer,e.endOffset),ue.after=e=>ue(e.parentNode,Rs(e)+1),ue.before=e=>ue(e.parentNode,Rs(e)),ue.isAbove=(e,n)=>os($o(n.getClientRects()),mr(e.getClientRects()),Mg).getOr(!1),ue.isBelow=(e,n)=>os(mr(n.getClientRects()),$o(e.getClientRects()),Rg).getOr(!1),ue.isAtStart=e=>e?e.isAtStart():!1,ue.isAtEnd=e=>e?e.isAtEnd():!1,ue.isTextPosition=e=>e?ke(e.container()):!1,ue.isElementPosition=e=>!ue.isTextPosition(e);const nv=(e,n)=>{ke(n)&&n.data.length===0&&e.remove(n)},DT=(e,n,o)=>{n.insertNode(o),nv(e,o.previousSibling),nv(e,o.nextSibling)},nP=(e,n,o)=>{const r=D.from(o.firstChild),c=D.from(o.lastChild);n.insertNode(o),r.each(l=>nv(e,l.previousSibling)),c.each(l=>nv(e,l.nextSibling))},Ml=(e,n,o)=>{wm(o)?nP(e,n,o):DT(e,n,o)},gc=ke,Ux=Sm,ov=wn.nodeIndex,sv=e=>{const n=e.parentNode;return Ux(n)?sv(n):n},zp=e=>e?ll(e.childNodes,(n,o)=>(Ux(o)&&o.nodeName!=="BR"?n=n.concat(zp(o)):n.push(o),n),[]):[],MT=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&gc(o);)n+=o.data.length;return n},Up=e=>n=>e===n,rv=e=>{let n,o;n=zp(sv(e)),o=Xf(n,Up(e),e),n=n.slice(0,o+1);const r=ll(n,(c,l,d)=>(gc(l)&&gc(n[d-1])&&c++,c),0);return n=Js(n,uc([e.nodeName])),o=Xf(n,Up(e),e),o-r},Ng=e=>(gc(e)?"text()":e.nodeName.toLowerCase())+"["+rv(e)+"]",Zp=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e;c=c.parentNode)r.push(c);return r},hc=(e,n)=>{let o=[],r=n.container(),c=n.offset(),l;if(gc(r))l=MT(r,c);else{const g=r.childNodes;c>=g.length?(l="after",c=g.length-1):l="before",r=g[c]}o.push(Ng(r));let d=Zp(e,r);return d=Js(d,In(Sm)),o=o.concat(ru(d,g=>Ng(g))),o.reverse().join("/")+","+l},Wp=(e,n,o)=>{let r=zp(e);return r=Js(r,(c,l)=>!gc(c)||!gc(r[l-1])),r=Js(r,uc([n])),r[o]},RT=(e,n)=>{let o=e,r=0;for(;gc(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!gc(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return gc(e)&&n>e.data.length&&(n=e.data.length),ue(e,n)},Zx=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",l=ll(r,(d,g)=>{const h=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(g);return h?(h[1]==="text()"&&(h[1]="#text"),Wp(d,h[1],parseInt(h[2],10))):null},e);if(!l)return null;if(!gc(l)&&l.parentNode){let d;return c==="after"?d=ov(l)+1:d=ov(l),ue(l.parentNode,d)}return RT(l,parseInt(c,10))},av=to,NT=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&ke(c);c=c.previousSibling)r+=e(c.data).length;return r},BT=(e,n,o,r,c)=>{const l=c?r.startContainer:r.endContainer;let d=c?r.startOffset:r.endOffset;const g=[],h=e.getRoot();if(ke(l))g.push(o?NT(n,l,d):d);else{let y=0;const w=l.childNodes;d>=w.length&&w.length&&(y=1,d=Math.max(0,w.length-1)),g.push(e.nodeIndex(w[d],o)+y)}for(let y=l;y&&y!==h;y=y.parentNode)g.push(e.nodeIndex(y,o));return g},oP=(e,n,o,r)=>{const c=n.dom,l=BT(c,e,o,r,!0),d=n.isForward(),g=Mx(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:l,forward:d,...g};{const h=BT(c,e,o,r,!1);return{start:l,end:h,forward:d,...g}}},cv=(e,n,o)=>{let r=0;return Oe.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},Wx=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Ye(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},Im=e=>(Wx(e,!0),Wx(e,!1),e),iv=(e,n)=>{if(Ye(e)&&(e=ar(e,n),av(e)))return e;if(Uo(e)){ke(e)&&Xo(e)&&(e=e.parentNode);let o=e.previousSibling;if(av(o)||(o=e.nextSibling,av(o)))return o}},Tu=e=>iv(e.startContainer,e.startOffset)||iv(e.endContainer,e.endOffset),lv=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||av(r)){const d=r.nodeName;return{name:d,index:cv(o.dom,d,r)}}const l=Tu(c);if(l){const d=l.tagName;return{name:d,index:cv(o.dom,d,l)}}return oP(e,o,n,c)},sP=e=>{const n=e.getRng();return{start:hc(e.dom.getRoot(),ue.fromRangeStart(n)),end:hc(e.dom.getRoot(),ue.fromRangeEnd(n)),forward:e.isForward()}},Ir=e=>({rng:e.getRng(),forward:e.isForward()}),mi=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Sa=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),l=e.isCollapsed(),d=e.getNode(),g=d.nodeName,h=e.isForward();if(g==="IMG")return{name:g,index:cv(o,g,d)};const y=Im(r.cloneRange());if(!l){y.collapse(!1);const T=mi(o,c+"_end",n);Ml(o,y,T)}r=Im(r),r.collapse(!0);const w=mi(o,c+"_start",n);return Ml(o,r,w),e.moveToBookmark({id:c,keep:!0,forward:h}),{id:c,forward:h}},rP=(e,n,o=!1)=>n===2?lv(xa,o,e):n===3?sP(e):n?Ir(e):Sa(e,!1),_d=qe(lv,Ts,!0),aP=e=>e.type==="inline-command"||e.type==="inline-format",cP=e=>e.type==="block-command"||e.type==="block-format",iP=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,lP=e=>{var n;const o=c=>Is.error({message:c,pattern:e}),r=(c,l,d)=>{if(e.format!==void 0){let g;if(Kn(e.format)){if(!Xt(e.format,ee))return o(c+" pattern has non-string items in the `format` array");g=e.format}else if(ee(e.format))g=[e.format];else return o(c+" pattern has non-string `format` parameter");return Is.value(l(g))}else return e.cmd!==void 0?ee(e.cmd)?Is.value(d(e.cmd,e.value)):o(c+" pattern has non-string `cmd` parameter"):o(c+" pattern is missing both `format` and `cmd` parameters")};if(!Ot(e))return o("Raw pattern is not an object");if(!ee(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ee(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let c=e.start,l=e.end;return l.length===0&&(l=c,c=""),r("Inline",d=>({type:"inline-format",start:c,end:l,format:d}),(d,g)=>({type:"inline-command",start:c,end:l,cmd:d,value:g}))}else{if(e.replacement!==void 0)return ee(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):Is.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const c=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",l=>({type:"block-format",start:e.start,format:l[0],trigger:c}),(l,d)=>({type:"block-command",start:e.start,cmd:l,value:d,trigger:c}))}}},qt=e=>gt(e,cP),rt=e=>gt(e,aP),Fm=(e,n)=>({inlinePatterns:rt(e),blockPatterns:qt(e),dynamicPatternsLookup:n}),jp=(e,n)=>({...e,blockPatterns:gt(e.blockPatterns,o=>iP(o,n))}),uv=e=>{const n=rp(wt(e,lP));return de(n.errors,o=>console.error(o.message,o.pattern)),n.values},uP=e=>n=>{const o=e(n);return uv(o)},PT=(e,n)=>e.dispatch("PreProcess",n),Wn=(e,n)=>e.dispatch("PostProcess",n),IT=e=>{e.dispatch("remove")},dP=e=>{e.dispatch("detach")},mP=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},me=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},jx=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},fP=e=>{e.dispatch("PreInit")},dv=e=>{e.dispatch("PostRender")},gP=e=>{e.dispatch("Init")},Bg=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},mv=(e,n,o)=>{e.dispatch(n,o)},Td=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},FT=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},Pg=(e,n)=>e.dispatch("BeforeSetContent",n),$n=(e,n)=>e.dispatch("SetContent",n),Wi=(e,n)=>e.dispatch("BeforeGetContent",n),Gx=(e,n)=>e.dispatch("GetContent",n),ku=(e,n)=>{e.dispatch("AutocompleterStart",n)},fi=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},qx=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},hP=e=>{e.dispatch("AutocompleterEnd")},Kx=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),pP=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),$T=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),bP=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),vP=(e,n)=>e.dispatch("DisabledStateChange",{state:n}),fv=Qs().deviceType,Se=fv.isTouch(),yP=wn.DOM,Ns=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return hs(n,(o,r)=>{const c=r.split("="),l=c[0],d=c.length>1?c[1]:l;return o[Wc(l)]=Wc(d),o},{})},LT=e=>xt(e,RegExp),Ze=e=>n=>n.options.get(e),gv=e=>ee(e)||Ot(e),HT=(e,n="")=>o=>{const r=ee(o);if(r)if(o.indexOf("=")!==-1){const c=Ns(o);return{value:zn(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},yt=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:HT(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:HT(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=ee(o)&&tn(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=St(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>Lt(o)?{valid:!0,value:o}:ee(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||ee(o)||pn(o,ee);return r?ee(o)?{value:wt(o.split(","),Wc),valid:r}:Kn(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:dn(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=ee(o)||pn(o,ee);return r?{value:Kn(o)?o:wt(o.split(","),Wc),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("extended_mathml_attributes",{processor:"string[]"}),n("extended_mathml_elements",{processor:"string[]"}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=Lt(o)||ee(o);return r?o===!1||fv.isiPhone()||fv.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!Se}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("onboarding",{processor:"boolean",default:!0}),n("tiny_cloud_entry_url",{processor:"string"}),n("theme",{processor:o=>o===!1||ee(o)||Zt(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||ee(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("disabled",{processor:o=>Lt(o)?(e.initialized&&zg(e)!==o&&Promise.resolve().then(()=>{vP(e,o)}),{valid:!0,value:o}):{valid:!1,message:"The value must be a boolean."},default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(e.hasPlugin("help")?". Press ALT-0 for help.":"")}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:o=>{const r=pn(o,ee);return r?{value:o,valid:r}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:gv}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:gv}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:gv}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:gv}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>ee(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>pn(o,Ot)||o===!1?{value:uv(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>Zt(o)?{value:uP(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>pn(o,LT)?{value:o,valid:!0}:LT(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=St(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=St(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:zo.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:yP.getAttrib(e.getElement(),"placeholder")})})},CP=Ze("iframe_attrs"),VT=Ze("doctype"),xP=Ze("document_base_url"),Lj=Ze("body_id"),SP=Ze("body_class"),wP=Ze("content_security_policy"),Hj=Ze("br_in_pre"),Er=Ze("forced_root_block"),Gp=Ze("forced_root_block_attrs"),ft=Ze("newline_behavior"),EP=Ze("br_newline_selector"),Au=Ze("no_newline_selector"),Rl=Ze("keep_styles"),hv=Ze("end_container_on_empty_block"),Xr=Ze("automatic_uploads"),qp=Ze("images_reuse_filename"),Kp=Ze("images_replace_blob_uris"),Yp=Ze("icons"),Ig=Ze("icons_url"),_P=Ze("images_upload_url"),TP=Ze("images_upload_base_path"),kP=Ze("images_upload_credentials"),AP=Ze("images_upload_handler"),nn=Ze("content_css_cors"),pc=Ze("referrer_policy"),kd=Ze("language"),OP=Ze("language_url"),Fg=Ze("indent_use_margin"),cn=Ze("indentation"),DP=Ze("content_css"),zT=Ze("content_style"),UT=Ze("font_css"),MP=Ze("directionality"),Xp=Ze("inline_boundaries_selector"),ZT=Ze("object_resizing"),RP=Ze("resize_img_proportional"),NP=Ze("placeholder"),WT=Ze("event_root"),Yx=Ze("service_message"),$g=Ze("theme"),BP=Ze("theme_url"),pv=Ze("model"),jT=Ze("model_url"),Lg=Ze("inline_boundaries"),PP=Ze("formats"),IP=Ze("preview_styles"),GT=Ze("format_empty_lines"),FP=Ze("format_noneditable_selector"),$P=Ze("custom_ui_selector"),dn=Ze("inline"),qT=Ze("hidden_input"),Xx=Ze("submit_patch"),LP=Ze("add_form_submit_trigger"),$m=Ze("add_unload_trigger"),KT=Ze("custom_undo_redo_levels"),HP=Ze("disable_nodechange"),YT=Ze("readonly"),Hg=Ze("editable_root"),XT=Ze("content_css_cors"),Ad=Ze("plugins"),Vg=Ze("external_plugins"),VP=Ze("block_unsupported_drop"),JT=Ze("visual"),zP=Ze("visual_table_class"),QT=Ze("visual_anchor_class"),ek=Ze("iframe_aria_text"),tk=Ze("setup"),Vj=Ze("init_instance_callback"),UP=Ze("urlconverter_callback"),nk=Ze("auto_focus"),Jx=Ze("browser_spellcheck"),Qx=Ze("protect"),eS=Ze("paste_block_drop"),Jp=Ze("paste_data_images"),ok=Ze("paste_preprocess"),sk=Ze("paste_postprocess"),bv=Ze("newdocument_content"),ZP=Ze("paste_webkit_styles"),rk=Ze("paste_remove_styles_if_webkit"),ak=Ze("paste_merge_formats"),ck=Ze("smart_paste"),ik=Ze("paste_as_text"),lk=Ze("paste_tab_spaces"),WP=Ze("allow_html_data_urls"),jP=Ze("text_patterns"),GP=Ze("text_patterns_lookup"),uk=Ze("noneditable_class"),qP=Ze("editable_class"),KP=Ze("noneditable_regexp"),YP=Ze("preserve_cdata"),XP=Ze("highlight_on_focus"),Qp=Ze("xss_sanitization"),dk=Ze("init_content_sync"),JP=e=>e.options.isSet("text_patterns_lookup"),mk=e=>Oe.explode(e.options.get("font_size_style_values")),fk=e=>Oe.explode(e.options.get("font_size_classes")),QP=e=>e.options.get("encoding")==="xml",gk=e=>Oe.explode(e.options.get("images_file_types")),e7=Ze("table_tab_navigation"),t7=Ze("details_initial_state"),n7=Ze("details_serialized_state"),tS=Ze("sandbox_iframes"),vv=e=>e.options.get("sandbox_iframes_exclusions"),yv=Ze("convert_unsafe_embeds"),o7=Ze("license_key"),s7=Ze("api_key"),zg=Ze("disabled"),r7=Ye,nS=ke,oS=e=>{const n=e.parentNode;n&&n.removeChild(e)},sS=e=>{const n=xa(e);return{count:e.length-n.length,text:n}},hk=e=>{let n;for(;(n=e.data.lastIndexOf(Cs))!==-1;)e.deleteData(n,1)},pk=(e,n)=>(Od(e),n),a7=(e,n)=>{const o=sS(e.data.substr(0,n.offset())),r=sS(e.data.substr(n.offset()));return(o.text+r.text).length>0?(hk(e),ue(e,n.offset()-o.count)):n},c7=(e,n)=>{const o=n.container(),r=Gf(ps(o.childNodes),e).map(c=>c<n.offset()?ue(o,n.offset()-1):n).getOr(n);return Od(e),r},Cv=(e,n)=>nS(e)&&n.container()===e?a7(e,n):pk(e,n),bk=(e,n)=>n.container()===e.parentNode?c7(e,n):pk(e,n),vk=(e,n)=>ue.isTextPosition(n)?Cv(e,n):bk(e,n),Od=e=>{r7(e)&&Uo(e)&&($p(e)?e.removeAttribute("data-mce-caret"):oS(e)),nS(e)&&(hk(e),e.data.length===0&&oS(e))},yk=to,i7=dc,l7=kp,u7="*[contentEditable=false],video,audio,embed,object",Ck=(e,n,o)=>{const r=Mn(n.getBoundingClientRect(),o);let c,l;if(e.tagName==="BODY"){const g=e.ownerDocument.documentElement;c=e.scrollLeft||g.scrollLeft,l=e.scrollTop||g.scrollTop}else{const g=e.getBoundingClientRect();c=e.scrollLeft-g.left,l=e.scrollTop-g.top}r.left+=c,r.right+=c,r.top+=l,r.bottom+=l,r.width=1;let d=n.offsetWidth-n.clientWidth;return d>0&&(o&&(d*=-1),r.left+=d,r.right+=d),r},d7=e=>{var n,o;const r=Zn(z.fromDom(e),u7);for(let c=0;c<r.length;c++){const l=r[c].dom;let d=l.previousSibling;if(qb(d)){const g=d.data;g.length===1?(n=d.parentNode)===null||n===void 0||n.removeChild(d):d.deleteData(g.length-1,1)}d=l.nextSibling,Dg(d)&&(d.data.length===1?(o=d.parentNode)===null||o===void 0||o.removeChild(d):d.deleteData(0,1))}},m7=(e,n,o,r)=>{const c=fr();let l,d;const g=Er(e),h=e.dom,y=(B,F)=>{let U;if(w(),l7(F))return null;if(o(F)){const q=K8(g,F,B),X=Ck(n,F,B);h.setStyle(q,"top",X.top),h.setStyle(q,"caret-color","transparent"),d=q;const te=h.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});h.setStyles(te,{...X}),h.add(n,te),c.set({caret:te,element:F,before:B}),B&&h.addClass(te,"mce-visual-caret-before"),T(),U=F.ownerDocument.createRange(),U.setStart(q,0),U.setEnd(q,0)}else return d=Ax(F,B),U=F.ownerDocument.createRange(),e1(d.nextSibling)?(U.setStart(d,0),U.setEnd(d,0)):(U.setStart(d,1),U.setEnd(d,1)),U;return U},w=()=>{d7(n),d&&(Od(d),d=null),c.on(B=>{h.remove(B.caret),c.clear()}),l&&(clearInterval(l),l=void 0)},T=()=>{l=window.setInterval(()=>{c.on(B=>{r()?h.toggleClass(B.caret,"mce-visual-caret-hidden"):h.addClass(B.caret,"mce-visual-caret-hidden")})},500)},k=()=>{c.on(B=>{const F=Ck(n,B.element,B.before);h.setStyles(B.caret,{...F})})},M=()=>clearInterval(l),P=()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}";return{isShowing:c.isSet,show:y,hide:w,getCss:P,reposition:k,destroy:M}},xk=()=>rn.browser.isFirefox(),e1=e=>yk(e)||i7(e),t1=e=>(e1(e)||El(e)&&xk())&&gm(z.fromDom(e)).exists(fu),f7=oi,rS=to,g7=dc,n1=kb("display","block table table-cell table-row table-caption list-item"),aS=Uo,cS=Xo,h7=Ye,p7=ke,b7=di,Ug=e=>e===1,Lm=e=>e===-1,xv=(e,n)=>{let o;for(;o=e(n);)if(!cS(o))return o;return null},Zg=(e,n,o,r,c)=>{const l=new Ds(e,r),d=rS(e)||cS(e);let g;if(Lm(n)){if(d&&(g=xv(l.prev.bind(l),!0),o(g)))return g;for(;g=xv(l.prev.bind(l),c);)if(o(g))return g}if(Ug(n)){if(d&&(g=xv(l.next.bind(l),!0),o(g)))return g;for(;g=xv(l.next.bind(l),c);)if(o(g))return g}return null},v7=(e,n)=>{const o=c=>f7(c.dom),r=c=>c.dom===n;return du(z.fromDom(e),o,r).map(c=>c.dom).getOr(n)},Ou=(e,n)=>{for(;e&&e!==n;){if(n1(e))return e;e=e.parentNode}return null},ji=(e,n,o)=>Ou(e.container(),o)===Ou(n.container(),o),iS=(e,n)=>{if(!n)return D.none();const o=n.container(),r=n.offset();return h7(o)?D.from(o.childNodes[r+e]):D.none()},Sk=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},y7=(e,n,o)=>Ou(n,e)===Ou(o,e),wk=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let l=c[r];if(l&&aS(l)&&(l=l[r]),rS(l)||g7(l)){if(y7(n,l,c))return l;break}if(b7(l))break;c=c.parentNode}return null},o1=qe(Sk,!0),s1=qe(Sk,!1),lS=(e,n,o)=>{let r;const c=qe(wk,!0,n),l=qe(wk,!1,n),d=o.startContainer,g=o.startOffset;if(Xo(d)){const h=p7(d)?d.parentNode:d,y=h.getAttribute("data-mce-caret");if(y==="before"&&(r=h.nextSibling,t1(r)))return o1(r);if(y==="after"&&(r=h.previousSibling,t1(r)))return s1(r)}if(!o.collapsed)return o;if(ke(d)){if(aS(d)){if(e===1){if(r=l(d),r)return o1(r);if(r=c(d),r)return s1(r)}if(e===-1){if(r=c(d),r)return s1(r);if(r=l(d),r)return o1(r)}return o}if(qb(d)&&g>=d.data.length-1)return e===1&&(r=l(d),r)?o1(r):o;if(Dg(d)&&g<=1)return e===-1&&(r=c(d),r)?s1(r):o;if(g===d.data.length)return r=l(d),r?o1(r):o;if(g===0)return r=c(d),r?s1(r):o}return o},Ek=(e,n)=>iS(e?0:-1,n).filter(rS),r1=(e,n,o)=>{const r=lS(e,n,o);return e===-1?ue.fromRangeStart(r):ue.fromRangeEnd(r)},Sv=e=>D.from(e.getNode()).map(z.fromDom),C7=e=>D.from(e.getNode(!0)).map(z.fromDom),uS=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},wv=(e,n)=>{const o=ji(e,n);return!o&&vo(e.getNode())?!0:o},x7=to,Nl=ke,_k=Ye,dS=vo,Wg=di,Tk=TT,Ke=$x,Ev=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},mS=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,kk=(e,n)=>{if(Ug(e)){if(Wg(n.previousSibling)&&!Nl(n.previousSibling))return ue.before(n);if(Nl(n))return ue(n,0)}if(Lm(e)){if(Wg(n.nextSibling)&&!Nl(n.nextSibling))return ue.after(n);if(Nl(n))return ue(n,n.data.length)}return Lm(e)?dS(n)?ue.before(n):ue.after(n):ue.before(n)},Ak=(e,n)=>{const o=n.nextSibling;return o&&Wg(o)?Nl(o)?ue(o,0):ue.before(o):jg(1,ue.after(n),e)},jg=(e,n,o)=>{let r,c,l,d;if(!_k(o)||!n)return null;if(n.isEqual(ue.after(o))&&o.lastChild){if(d=ue.after(o.lastChild),Lm(e)&&Wg(o.lastChild)&&_k(o.lastChild))return dS(o.lastChild)?ue.before(o.lastChild):d}else d=n;const g=d.container();let h=d.offset();if(Nl(g)){if(Lm(e)&&h>0)return ue(g,--h);if(Ug(e)&&h<g.length)return ue(g,++h);r=g}else{if(Lm(e)&&h>0&&(c=mS(g,h-1),Wg(c)))return!Tk(c)&&(l=Zg(c,e,Ke,c),l)?Nl(l)?ue(l,l.data.length):ue.after(l):Nl(c)?ue(c,c.data.length):ue.before(c);if(Ug(e)&&h<g.childNodes.length&&(c=mS(g,h),Wg(c)))return dS(c)?Ak(o,c):!Tk(c)&&(l=Zg(c,e,Ke,c),l)?Nl(l)?ue(l,0):ue.before(l):Nl(c)?ue(c,0):ue.after(c);r=c||d.getNode()}if(r&&(Ug(e)&&d.isAtEnd()||Lm(e)&&d.isAtStart())&&(r=Zg(r,e,ze,o,!0),Ke(r,o)))return kk(e,r);c=r&&Zg(r,e,Ke,o);const y=Fs(gt(Ev(g,o),x7));return y&&(!c||!y.contains(c))?(Ug(e)?d=ue.after(y):d=ue.before(y),d):c?kk(e,c):null},gi=e=>({next:n=>jg(1,n,e),prev:n=>jg(-1,n,e)}),a1=(e,n,o)=>{const r=e?ue.before(o):ue.after(o);return bc(e,n,r)},c1=e=>vo(e)?ue.before(e):ue.after(e),fS=e=>ue.isTextPosition(e)?e.offset()===0:di(e.getNode()),_v=e=>{if(ue.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return di(e.getNode(!0))},gS=(e,n)=>!ue.isTextPosition(e)&&!ue.isTextPosition(n)&&e.getNode()===n.getNode(!0),S7=e=>!ue.isTextPosition(e)&&vo(e.getNode()),w7=(e,n,o)=>e?!gS(n,o)&&!S7(n)&&_v(n)&&fS(o):!gS(o,n)&&fS(n)&&_v(o),bc=(e,n,o)=>{const r=gi(n);return D.from(e?r.next(o):r.prev(o))},hi=(e,n,o)=>bc(e,n,o).bind(r=>ji(o,r,n)&&w7(e,o,r)?bc(e,n,r):D.some(r)),hS=(e,n,o,r)=>hi(e,n,o).bind(c=>r(c)?hS(e,n,c,r):D.some(c)),Hm=(e,n)=>{const o=e?n.firstChild:n.lastChild;return ke(o)?D.some(ue(o,e?0:o.data.length)):o?di(o)?D.some(e?ue.before(o):c1(o)):a1(e,n,o):D.none()},Qo=qe(bc,!0),Jr=qe(bc,!1),Ws=qe(Hm,!0),wa=qe(Hm,!1),Tv="_mce_caret",vc=e=>Ye(e)&&e.id===Tv,Vm=(e,n)=>{let o=n;for(;o&&o!==e;){if(vc(o))return o;o=o.parentNode}return null},Ok=e=>ee(e.start),Dk=e=>bt(e,"rng"),Mk=e=>bt(e,"id"),Rk=e=>bt(e,"name"),Nk=e=>Oe.isArray(e.start),Gg=e=>!Rk(e)&&Lt(e.forward)?e.forward:!0,pS=(e,n)=>(Ye(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),Bk=(e,n)=>{const o=D.from(Zx(e.getRoot(),n.start)),r=D.from(Zx(e.getRoot(),n.end));return os(o,r,(c,l)=>{const d=e.createRng();return d.setStart(c.container(),c.offset()),d.setEnd(l.container(),l.offset()),{range:d,forward:Gg(n)}})},E7=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Cs);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},bS=e=>!e.hasChildNodes(),_7=(e,n)=>wa(e).fold(Ce,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),Pk=(e,n,o)=>bS(n)&&Vm(e,n)?(E7(n,o),!0):!1,Ik=(e,n,o,r)=>{const c=o[n?"start":"end"],l=e.getRoot();if(c){let d=l,g=c[0];for(let h=c.length-1;d&&h>=1;h--){const y=d.childNodes;if(Pk(l,d,r))return!0;if(c[h]>y.length-1)return Pk(l,d,r)?!0:_7(d,r);d=y[c[h]]}ke(d)&&(g=Math.min(c[0],d.data.length)),Ye(d)&&(g=Math.min(c[0],d.childNodes.length)),n?r.setStart(d,g):r.setEnd(d,g)}return!0},vS=e=>ke(e)&&e.data.length>0,Fk=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,l=o.keep;if(r&&c){let d,g;if(n==="start"?l?r.hasChildNodes()?(d=r.firstChild,g=1):vS(r.nextSibling)?(d=r.nextSibling,g=0):vS(r.previousSibling)?(d=r.previousSibling,g=r.previousSibling.data.length):(d=c,g=e.nodeIndex(r)+1):(d=c,g=e.nodeIndex(r)):l?r.hasChildNodes()?(d=r.firstChild,g=1):vS(r.previousSibling)?(d=r.previousSibling,g=r.previousSibling.data.length):(d=c,g=e.nodeIndex(r)):(d=c,g=e.nodeIndex(r)),!l){const h=r.previousSibling,y=r.nextSibling;Oe.each(Oe.grep(r.childNodes),T=>{ke(T)&&(T.data=T.data.replace(/\uFEFF/g,""))});let w;for(;w=e.get(o.id+"_"+n);)e.remove(w,!0);if(ke(y)&&ke(h)&&!rn.browser.isOpera()){const T=h.data.length;h.appendData(y.data),e.remove(y),d=h,g=T}}return D.some(ue(d,g))}else return D.none()},kv=(e,n)=>{const o=e.createRng();return Ik(e,!0,n,o)&&Ik(e,!1,n,o)?D.some({range:o,forward:Gg(n)}):D.none()},$k=(e,n)=>{const o=Fk(e,"start",n),r=Fk(e,"end",n);return os(o,r.or(o),(c,l)=>{const d=e.createRng();return d.setStart(pS(e,c.container()),c.offset()),d.setEnd(pS(e,l.container()),l.offset()),{range:d,forward:Gg(n)}})},zj=(e,n)=>D.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),T7=(e,n)=>{const o=e.dom;if(n){if(Nk(n))return kv(o,n);if(Ok(n))return Bk(o,n);if(Mk(n))return $k(o,n);if(Rk(n))return zj(o,n);if(Dk(n))return D.some({range:n.rng,forward:Gg(n)})}return D.none()},Et=(e,n,o)=>rP(e,n,o),k7=(e,n)=>{T7(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},yc=e=>Ye(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Av=(e=>n=>e===n)(Jn),zm=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,yS=e=>!zm(e)&&!Av(e)&&!Xs(e),Ov=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},A7=e=>qs(e,n=>{const o=Xb(n);return o?[z.fromDom(o)]:[]}),CS=e=>Ov(e).length>1,i1=e=>gt(A7(e),Cd),qg=e=>Zn(e,"td[data-mce-selected],th[data-mce-selected]"),Lk=(e,n)=>{const o=qg(n);return o.length>0?o:i1(e)},Du=e=>Lk(Ov(e.selection.getSel()),z.fromDom(e.getBody())),l1=(e,n)=>xp(e,"table",n),O7=e=>{const n=e.startContainer,o=e.startOffset;return ke(n)?o===0?D.some(z.fromDom(n)):D.none():D.from(n.childNodes[o]).map(z.fromDom)},D7=e=>{const n=e.endContainer,o=e.endOffset;return ke(n)?o===n.data.length?D.some(z.fromDom(n)):D.none():D.from(n.childNodes[o-1]).map(z.fromDom)},Hk=e=>ys(e).fold(Ve([e]),n=>[e].concat(Hk(n))),Dv=e=>hm(e).fold(Ve([e]),n=>un(n)==="br"?pl(n).map(o=>[e].concat(Dv(o))).getOr([]):[e].concat(Dv(n))),xS=(e,n)=>os(O7(n),D7(n),(o,r)=>{const c=mo(Hk(e),qe(Gt,o)),l=mo(Dv(e),qe(Gt,r));return c.isSome()&&l.isSome()}).getOr(!1),SS=(e,n,o,r)=>{const c=o,l=new Ds(o,c),d=oc(e.schema.getMoveCaretBeforeOnEnterElements(),(h,y)=>!St(["td","th","table"],y.toLowerCase()));let g=o;do{if(ke(g)&&Oe.trim(g.data).length!==0){r?n.setStart(g,0):n.setEnd(g,g.data.length);return}if(d[g.nodeName]){r?n.setStartBefore(g):g.nodeName==="BR"?n.setEndBefore(g):n.setEndAfter(g);return}}while(g=r?l.next():l.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},Mv=e=>{const n=e.selection.getSel();return _e(n)&&n.rangeCount>0},wS=(e,n)=>{const o=Du(e);o.length>0?de(o,r=>{const c=r.dom,l=e.dom.createRng();l.setStartBefore(c),l.setEndAfter(c),n(l,!0)}):n(e.selection.getRng(),!1)},Vk=(e,n,o)=>{const r=Sa(e,n);o(r),e.moveToBookmark(r)},Um=e=>jo(e==null?void 0:e.nodeType),ES=e=>Ye(e)&&!yc(e)&&!vc(e)&&!Sm(e),M7=(e,n)=>{if(ES(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},zk=(e,n,o)=>{const{selection:r,dom:c}=e,l=r.getNode(),d=to(l);Vk(r,!0,()=>{n()}),d&&to(l)&&c.isChildOf(l,e.getBody())?e.selection.select(l):o(r.getStart())&&R7(c,r)},R7=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:l,startOffset:d}=c,g=n.getNode();if(!M7(e,g)&&Ye(l)){const h=l.childNodes,y=e.getRoot();let w;if(d<h.length){const T=h[d];w=new Ds(T,(o=e.getParent(T,e.isBlock))!==null&&o!==void 0?o:y)}else{const T=h[h.length-1];w=new Ds(T,(r=e.getParent(T,e.isBlock))!==null&&r!==void 0?r:y),w.next(!0)}for(let T=w.current();T;T=w.next()){if(e.getContentEditable(T)==="false")return;if(ke(T)&&!TS(T)){c.setStart(T,0),n.setRng(c);return}}}},Uk=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(Ye(e)||!TS(e))return e}},_S=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||ri(e,n),Kg=(e,n,o)=>e.schema.isValidChild(n,o),TS=(e,n=!1)=>{if(_e(e)&&ke(e)){const o=n?e.data.replace(/ /g," "):e.data;return Ro(o)}else return!1},Zm=e=>_e(e)&&ke(e)&&e.length===0,N7=(e,n)=>{const o="[data-mce-cef-wrappable]",r=FP(e),c=il(r)?o:`${o},${r}`;return ha(z.fromDom(n),c)},Zk=(e,n)=>{const o=e.dom;return ES(n)&&o.getContentEditable(n)==="false"&&N7(e,n)&&o.select('[contenteditable="true"]',n).length===0},Dd=(e,n)=>Zt(e)?e(n):(_e(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),kS=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),AS=(e,n)=>{if(vn(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=Rp(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},u1=(e,n,o)=>{const r=e.getStyle(n,o);return AS(r,o)},Wk=(e,n)=>{let o;return e.getParent(n,r=>Ye(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},Rv=(e,n,o)=>e.getParents(n,o,e.getRoot()),OS=(e,n,o)=>{const r=e.formatter.get(n);return _e(r)&&On(r,o)},B7=(e,n)=>OS(e,n,r=>{const c=l=>Zt(l)||l.length>1&&l.charAt(0)==="%";return On(["styles","attributes"],l=>zn(r,l).exists(d=>{const g=Kn(d)?d:nm(d);return On(g,c)}))}),P7=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=l=>oc(l,(d,g)=>On(r,h=>h===g));return OS(e,n,l=>{const d=c(l);return OS(e,o,g=>{const h=c(g);return V0(d,h)})})},Bl=e=>tu(e,"block"),I7=e=>Bl(e)&&e.wrapper===!0,F7=e=>Bl(e)&&e.wrapper!==!0,Cc=e=>tu(e,"selector"),Ss=e=>tu(e,"inline"),$7=e=>Cc(e)&&Ss(e)&&Zc(zn(e,"mixed"),!0),DS=e=>Cc(e)&&e.expand!==!1&&!Ss(e),L7=e=>{const n=[];let o=e;for(;o;){if(ke(o)&&o.data!==Cs||o.childNodes.length>1)return[];Ye(o)&&n.push(o),o=o.firstChild}return n},Hn=e=>L7(e).length>0,Nv=e=>vc(e.dom)&&Hn(e.dom),Yg=yc,jk=Rv,Bv=TS,cr=_S,Za=e=>vo(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,H7=(e,n)=>{let o=n;for(;o;){if(Ye(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},V7=(e,n,o,r)=>{const c=n.data;if(e){for(let l=o;l>0;l--)if(r(c.charAt(l-1)))return l}else for(let l=o;l<c.length;l++)if(r(c.charAt(l)))return l;return-1},Zj=(e,n,o)=>V7(e,n,o,r=>Av(r)||zm(r)),z7=(e,n,o)=>V7(e,n,o,yS),Gk=(e,n,o,r,c,l)=>{let d;const g=e.getParent(o,T=>fd(T)||e.isBlock(T)),h=_e(g)?g:n,y=(T,k,M)=>{const P=Dl(e),B=c?P.backwards:P.forwards;return D.from(B(T,k,(F,U)=>Yg(F.parentNode)?-1:(d=F,M(c,F,U)),h))};return y(o,r,Zj).bind(T=>l?y(T.container,T.offset+(c?-1:0),z7):D.some(T)).orThunk(()=>d?D.some({container:d,offset:c?0:d.length}):D.none())},U7=(e,n,o,r,c)=>{const l=r[c];ke(r)&&il(r.data)&&l&&(r=l);const d=jk(e,r);for(let g=0;g<d.length;g++)for(let h=0;h<n.length;h++){const y=n[h];if(!(_e(y.collapsed)&&y.collapsed!==o.collapsed)&&Cc(y)&&e.is(d[g],y.selector))return d[g]}return r},qk=(e,n,o,r)=>{var c;let l=o;const d=e.getRoot(),g=n[0];if(Bl(g)&&(l=g.wrapper?null:e.getParent(o,g.block,d)),!l){const h=(c=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&c!==void 0?c:d;l=e.getParent(ke(o)?o.parentNode:o,y=>y!==d&&cr(e.schema,y),h)}if(l&&Bl(g)&&g.wrapper&&(l=jk(e,l,"ul,ol").reverse()[0]||l),!l)for(l=o;l&&l[r]&&!e.isBlock(l[r])&&(l=l[r],!kS(l,"br")););return l||o},pi=(e,n,o,r)=>{const c=o.parentNode;return _e(o[r])?!1:c===n||vn(c)||e.isBlock(c)?!0:pi(e,n,c,r)},MS=(e,n,o,r,c,l)=>{let d=o;const g=c?"previousSibling":"nextSibling",h=e.getRoot();if(ke(o)&&!Bv(o)&&(c?r>0:r<o.data.length))return o;for(;d;){if(fd(d))return o;if(!n[0].block_expand&&e.isBlock(d))return l?d:o;for(let y=d[g];y;y=y[g]){const w=ke(y)&&!pi(e,h,y,g);if(!Yg(y)&&!Za(y)&&!Bv(y,w))return d}if(d===h||d.parentNode===h){o=d;break}d=d.parentNode}return o},Kk=e=>Yg(e.parentNode)||Yg(e),Wm=(e,n,o,r={})=>{const{includeTrailingSpace:c=!1,expandToBlock:l=!0}=r,d=e.getParent(n.commonAncestorContainer,M=>fd(M)),g=_e(d)?d:e.getRoot();let{startContainer:h,startOffset:y,endContainer:w,endOffset:T}=n;const k=o[0];return Ye(h)&&h.hasChildNodes()&&(h=ar(h,y),ke(h)&&(y=0)),Ye(w)&&w.hasChildNodes()&&(w=ar(w,n.collapsed?T:T-1),ke(w)&&(T=w.data.length)),h=H7(e,h),w=H7(e,w),Kk(h)&&(h=Yg(h)?h:h.parentNode,n.collapsed?h=h.previousSibling||h:h=h.nextSibling||h,ke(h)&&(y=n.collapsed?h.length:0)),Kk(w)&&(w=Yg(w)?w:w.parentNode,n.collapsed?w=w.nextSibling||w:w=w.previousSibling||w,ke(w)&&(T=n.collapsed?0:w.length)),n.collapsed&&(Gk(e,g,h,y,!0,c).each(({container:B,offset:F})=>{h=B,y=F}),Gk(e,g,w,T,!1,c).each(({container:B,offset:F})=>{w=B,T=F})),(Ss(k)||k.block_expand)&&((!Ss(k)||!ke(h)||y===0)&&(h=MS(e,o,h,y,!0,l)),(!Ss(k)||!ke(w)||T===w.data.length)&&(w=MS(e,o,w,T,!1,l))),DS(k)&&(h=U7(e,o,n,h,"previousSibling"),w=U7(e,o,n,w,"nextSibling")),(Bl(k)||Cc(k))&&(h=qk(e,o,h,"previousSibling"),w=qk(e,o,w,"nextSibling"),Bl(k)&&(e.isBlock(h)||(h=MS(e,o,h,y,!0,l),ke(h)&&(y=0)),e.isBlock(w)||(w=MS(e,o,w,T,!1,l),ke(w)&&(T=w.data.length)))),Ye(h)&&h.parentNode&&(y=e.nodeIndex(h),h=h.parentNode),Ye(w)&&w.parentNode&&(T=e.nodeIndex(w)+1,w=w.parentNode),{startContainer:h,startOffset:y,endContainer:w,endOffset:T}},Kt=(e,n,o)=>{var r;const c=n.startOffset,l=ar(n.startContainer,c),d=n.endOffset,g=ar(n.endContainer,d-1),h=F=>{const U=F[0];ke(U)&&U===l&&c>=U.data.length&&F.splice(0,1);const q=F[F.length-1];return d===0&&F.length>0&&q===g&&ke(q)&&F.splice(F.length-1,1),F},y=(F,U,q)=>{const X=[];for(;F&&F!==q;F=F[U])X.push(F);return X},w=(F,U)=>e.getParent(F,q=>q.parentNode===U,U),T=(F,U,q)=>{const X=q?"nextSibling":"previousSibling";for(let te=F,he=te.parentNode;te&&te!==U;te=he){he=te.parentNode;const we=y(te===F?te:te[X],X);we.length&&(q||we.reverse(),o(h(we)))}};if(l===g)return o(h([l]));const k=(r=e.findCommonAncestor(l,g))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(l,g))return T(l,k,!0);if(e.isChildOf(g,l))return T(g,k);const M=w(l,k)||l,P=w(g,k)||g;T(l,M,!0);const B=y(M===l?M:M.nextSibling,"nextSibling",P===g?P.nextSibling:P);B.length&&o(h(B)),T(g,P)},Wj=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],jj=e=>vr(e)&&gg(e)===Cs,Z7=(e,n,o,r)=>gm(n).fold(()=>"skipping",c=>r==="br"||jj(n)?"valid":bT(n)?"existing":vc(n.dom)?"caret":On(Wj,l=>ha(n,l))?"valid-block":!Kg(e,o,r)||!Kg(e,un(c),o)?"invalid-child":"valid"),W7=(e,n)=>{const o=Wm(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},j7=(e,n,o,r,c,l)=>{const{uid:d=n,...g}=o;Un(e,Rm()),as(e,`${Nm()}`,d),as(e,`${An()}`,r);const{attributes:h={},classes:y=[]}=c(d,g);if(pa(e,h),YB(e,y),l){y.length>0&&as(e,`${Fp()}`,y.join(","));const w=bs(h);w.length>0&&as(e,`${Bm()}`,w.join(","))}},G7=e=>{Hs(e,Rm()),Ko(e,`${Nm()}`),Ko(e,`${An()}`),Ko(e,`${Tg()}`);const n=Cr(e,`${Bm()}`).map(r=>r.split(",")).getOr([]),o=Cr(e,`${Fp()}`).map(r=>r.split(",")).getOr([]);de(n,r=>Ko(e,r)),XB(e,o),Ko(e,`${Fp()}`),Ko(e,`${Bm()}`)},lo=(e,n,o,r,c)=>{const l=z.fromTag("span",e);return j7(l,n,o,r,c,!1),l},q7=(e,n,o,r,c,l)=>{const d=[],g=lo(e.getDoc(),o,l,r,c),h=fr(),y=()=>{h.clear()},w=()=>h.get().getOrThunk(()=>{const P=$(g);return d.push(P),h.set(P),P}),T=P=>{de(P,k)},k=P=>{switch(Z7(e,P,"span",un(P))){case"invalid-child":{y();const F=Os(P);T(F),y();break}case"valid-block":{y(),j7(P,o,l,r,c,!0);break}case"valid":{const F=w();mg(P,F);break}}},M=P=>{const B=wt(P,z.fromDom);T(B)};return Kt(e.dom,n,P=>{y(),M(P)}),d},Yk=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,l=c.getRng(),d=Du(e).length>0,g=Pa("mce-annotation");if(l.collapsed&&!d&&W7(e,l),c.getRng().collapsed&&!d){const h=lo(e.getDoc(),g,r,n,o.decorate);jt(h,Jn),c.getRng().insertNode(h.dom),c.select(h.dom)}else Vk(c,!1,()=>{wS(e,h=>{q7(e,h,g,n,o.decorate,r)})})})},Pv=e=>{const n=yd();V8(e,n);const o=H8(e,n),r=rs("span"),c=l=>{de(l,d=>{r(d)?E(d):G7(d)})};return{register:(l,d)=>{n.register(l,d)},annotate:(l,d)=>{n.lookup(l).each(g=>{Yk(e,l,g,d)})},annotationChanged:(l,d)=>{o.addListener(l,d)},remove:l=>{pT(e,D.some(l)).each(({elements:d})=>{const g=e.selection.getBookmark();c(d),e.selection.moveToBookmark(g)})},removeAll:l=>{const d=e.selection.getBookmark();Le(wx(e,l),(g,h)=>{c(g)}),e.selection.moveToBookmark(d)},getAll:l=>{const d=wx(e,l);return Qt(d,g=>wt(g,h=>h.dom))}}},d1=e=>({getBookmark:qe(Et,e),moveToBookmark:qe(k7,e)});d1.isBookmarkNode=yc;const Xk=(e,n,o)=>o.collapsed?!1:On(o.getClientRects(),r=>Nx(r,e,n)),Jk=(e,n)=>{const o=vr(n)?gg(n).length:Os(n).length+1;return e>o?o:e<0?0:e},K7=e=>vg.range(e.start,Jk(e.soffset,e.start),e.finish,Jk(e.foffset,e.finish)),Qk=(e,n)=>!yg(n.dom)&&(ic(e,n)||Gt(e,n)),eA=e=>n=>Qk(e,n.start)&&Qk(e,n.finish),RS=e=>e.inline||rn.browser.isFirefox(),NS=e=>vg.range(z.fromDom(e.startContainer),e.startOffset,z.fromDom(e.endContainer),e.endOffset),tA=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?D.none():D.from(n.getRangeAt(0))).map(NS)},Gj=e=>{const n=hl(e);return tA(n.dom).filter(eA(e))},Y7=(e,n)=>D.from(n).filter(eA(e)).map(K7),qj=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),D.some(n)}catch{return D.none()}},BS=e=>{const n=RS(e)?Gj(z.fromDom(e.getBody())):D.none();e.bookmark=n.isSome()?n:e.bookmark},PS=e=>(e.bookmark?e.bookmark:D.none()).bind(o=>Y7(z.fromDom(e.getBody()),o)).bind(qj),X7=e=>{PS(e).each(n=>e.selection.setRng(n))},xc={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},J7=(e,n)=>(jo(n)||(n=0),window.setTimeout(e,n)),nA=(e,n)=>(jo(n)||(n=0),window.setInterval(e,n)),Sc={setEditorTimeout:(e,n,o)=>J7(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=nA(()=>{e.removed?window.clearInterval(r):n()},o);return r}},oA=(e,n)=>e.view(n).fold(Ve([]),r=>{const c=e.owner(r),l=oA(e,c);return[r].concat(l)}),Q7=(e,n)=>{const o=n.owner(e);return oA(n,o)};var IS=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?D.none():D.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(z.fromDom)},owner:e=>gl(e)});const Iv=e=>{const n=bp(),o=Cp(n),r=Q7(e,IS),c=jC(e),l=cl(r,(d,g)=>{const h=jC(g);return{left:d.left+h.left,top:d.top+h.top}},{left:0,top:0});return nr(l.left+c.left+o.left,l.top+c.top+o.top)},FS=e=>e.type==="nodechange"&&e.selectionChange,nI=(e,n)=>{const o=()=>{n.throttle()};wn.DOM.bind(document,"mouseup",o),e.on("remove",()=>{wn.DOM.unbind(document,"mouseup",o)})},oI=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},sI=(e,n)=>{oI(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{FS(o)||BS(e)})},rI=e=>{const n=hr(()=>{BS(e)},0);e.on("init",()=>{e.inline&&nI(e,n),sI(e,n)}),e.on("remove",()=>{n.cancel()})};let Md;const Fv=wn.DOM,aI=e=>Ye(e)&&xc.isEditorUIElement(e),$v=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},Lv=(e,n)=>{const o=$P(e);return Fv.getParent(n,c=>aI(c)||(o?e.dom.is(c,o):!1))!==null},m1=e=>{try{const n=lc(z.fromDom(e.getElement()));return bm(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},cI=(e,n)=>{const o=n.editor;rI(o);const r=(l,d)=>{if(XP(l)&&l.inline!==!0){const g=z.fromDom(l.getContainer());d(g,"tox-edit-focus")}},c=l=>{if(!l.iframeElement)return;const g=z.fromDom(l.iframeElement),h=Iv(g),y=_p(window);(h.top<y.y||h.top>y.bottom-25)&&g.dom.scrollIntoView({block:"center"})};o.on("focusin",()=>{const l=e.focusedEditor;if($v(m1(o))&&r(o,Un),l!==o){l&&l.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:l}),o.focus(!0);const d=Qs().browser;o.inline!==!0&&(d.isSafari()||d.isChromium())&&c(o)}}),o.on("focusout",()=>{Sc.setEditorTimeout(o,()=>{const l=e.focusedEditor;(!$v(m1(o))||l!==o)&&r(o,Hs),!Lv(o,m1(o))&&l===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Md||(Md=l=>{const d=e.activeEditor;d&&lb(l).each(g=>{const h=g;h.ownerDocument===document&&h!==document.body&&!Lv(d,h)&&e.focusedEditor===d&&(d.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},Fv.bind(document,"focusin",Md))},iI=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&Md&&(Fv.unbind(document,"focusin",Md),Md=null)},lI=e=>{e.on("AddEditor",qe(cI,e)),e.on("RemoveEditor",qe(iI,e))},uI=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),dI=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,sA=e=>e.collapsed?D.from(ar(e.startContainer,e.startOffset)).map(z.fromDom):D.none(),$S=(e,n)=>sA(n).bind(o=>kx(o)?D.some(o):ic(e,o)?D.none():D.some(e)),LS=(e,n)=>{$S(z.fromDom(e.getBody()),n).bind(o=>Ws(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},f1=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},mI=e=>mb(e)||Qc(e).isSome(),fI=e=>_e(e.iframeElement)&&mb(z.fromDom(e.iframeElement)),gI=e=>{const n=e.getBody();return n&&mI(z.fromDom(n))},Hv=e=>{const n=lc(z.fromDom(e.getElement()));return bm(n).filter(o=>!$v(o.dom)&&Lv(e,o.dom)).isSome()},jm=e=>e.inline?gI(e):fI(e),Vv=e=>jm(e)||Hv(e),hI=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const c=d=>{PS(d).each(g=>{d.selection.setRng(g),r=g})};!jm(e)&&e.hasEditableRoot()&&c(e);const l=uI(e,n.getNode());if(l&&e.dom.isChildOf(l,o)){dI(e,l)||f1(o),f1(l),e.hasEditableRoot()||c(e),LS(e,r),HS(e);return}e.inline||(rn.browser.isOpera()||f1(o),e.getWin().focus()),(rn.browser.isFirefox()||e.inline)&&(f1(o),LS(e,r)),HS(e)},HS=e=>e.editorManager.setActive(e),Kj=(e,n)=>{e.removed||(n?HS(e):hI(e))},je={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||je.metaKeyPressed(e),metaKeyPressed:e=>rn.os.isMacOS()||rn.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Xg="data-mce-selected",pI="table,img,figure.image,hr,video,span.mce-preview-object,details",bI=Math.abs,zv=Math.round,VS={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Yj=e=>e.type==="longpress"||e.type.indexOf("touch")===0,rA=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,l=n.getBody();let d,g,h,y,w,T,k,M,P,B,F,U,q,X,te;const he=fe=>_e(fe)&&(K_(fe)||o.is(fe,"figure.image")),we=fe=>dc(fe)||o.hasClass(fe,"mce-preview-object"),Ue=(fe,Ee)=>{if(Yj(fe)){const Qe=fe.touches[0];return he(fe.target)&&!Xk(Qe.clientX,Qe.clientY,Ee)}else return he(fe.target)&&!Xk(fe.clientX,fe.clientY,Ee)},le=fe=>{const Ee=fe.target;Ue(fe,n.selection.getRng())&&!fe.isDefaultPrevented()&&n.selection.select(Ee)},se=fe=>o.hasClass(fe,"mce-preview-object")&&_e(fe.firstElementChild)?[fe,fe.firstElementChild]:o.is(fe,"figure.image")?[fe.querySelector("img")]:[fe],ve=fe=>{const Ee=ZT(n);return!Ee||n.mode.isReadOnly()||fe.getAttribute("data-mce-resize")==="false"||fe===n.getBody()?!1:o.hasClass(fe,"mce-preview-object")&&_e(fe.firstElementChild)?ha(z.fromDom(fe.firstElementChild),Ee):ha(z.fromDom(fe),Ee)},He=(fe,Ee)=>{if(we(Ee))return fe.create("img",{src:rn.transparentSrc});if(El(Ee)){const Ft=Lo(y.name,"n")?$o:mr,Wt=Ee.cloneNode(!0);return Ft(fe.select("tr",Wt)).each(yn=>{const Fc=fe.select("td,th",yn);fe.setStyle(yn,"height",null),de(Fc,Gl=>fe.setStyle(Gl,"height",null))}),Wt}else return Ee.cloneNode(!0)},nt=(fe,Ee,Qe)=>{if(_e(Qe)){const Ft=se(fe);de(Ft,Wt=>{Wt.style[Ee]||!n.schema.isValid(Wt.nodeName.toLowerCase(),Ee)?o.setStyle(Wt,Ee,Qe):o.setAttrib(Wt,Ee,""+Qe)})}},It=(fe,Ee,Qe)=>{nt(fe,"width",Ee),nt(fe,"height",Qe)},$t=fe=>{let Ee,Qe,Ft,Wt,yn;Ee=fe.screenX-T,Qe=fe.screenY-k,U=Ee*y[2]+M,q=Qe*y[3]+P,U=U<5?5:U,q=q<5?5:q,(he(d)||we(d))&&RP(n)!==!1?Ft=!je.modifierPressed(fe):Ft=je.modifierPressed(fe),Ft&&(bI(Ee)>bI(Qe)?(q=zv(U*B),U=zv(q/B)):(U=zv(q/B),q=zv(U*B))),It(g,U,q),Wt=y.startPos.x+Ee,yn=y.startPos.y+Qe,Wt=Wt>0?Wt:0,yn=yn>0?yn:0,o.setStyles(h,{left:Wt,top:yn,display:"block"}),h.innerHTML=U+" &times; "+q,Ee=l.scrollWidth-X,Qe=l.scrollHeight-te,Ee+Qe!==0&&o.setStyles(h,{left:Wt-Ee,top:yn-Qe}),F||(me(n,d,M,P,"corner-"+y.name),F=!0)},fn=()=>{const fe=F;F=!1,fe&&(nt(d,"width",U),nt(d,"height",q)),o.unbind(r,"mousemove",$t),o.unbind(r,"mouseup",fn),c!==r&&(o.unbind(c,"mousemove",$t),o.unbind(c,"mouseup",fn)),o.remove(g),o.remove(h),o.remove(w),En(d),fe&&(jx(n,d,U,q,"corner-"+y.name),o.setAttrib(d,"style",o.getAttrib(d,"style"))),n.nodeChanged()},En=fe=>{et();const Ee=o.getPos(fe,l),Qe=Ee.x,Ft=Ee.y,Wt=fe.getBoundingClientRect(),yn=Wt.width||Wt.right-Wt.left,Fc=Wt.height||Wt.bottom-Wt.top;d!==fe&&(ns(),d=fe,U=q=0);const Gl=n.dispatch("ObjectSelected",{target:fe});ve(fe)&&!Gl.isDefaultPrevented()?Le(VS,(Or,oa)=>{const Xa=zr=>{const $c=se(d)[0];T=zr.screenX,k=zr.screenY,M=$c.clientWidth,P=$c.clientHeight,B=P/M,y=Or,y.name=oa,y.startPos={x:yn*Or[0]+Qe,y:Fc*Or[1]+Ft},X=l.scrollWidth,te=l.scrollHeight,w=o.add(l,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(w,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),g=He(o,d),o.addClass(g,"mce-clonedresizable"),o.setAttrib(g,"data-mce-bogus","all"),g.contentEditable="false",o.setStyles(g,{left:Qe,top:Ft,margin:0}),It(g,yn,Fc),g.removeAttribute(Xg),l.appendChild(g),o.bind(r,"mousemove",$t),o.bind(r,"mouseup",fn),c!==r&&(o.bind(c,"mousemove",$t),o.bind(c,"mouseup",fn)),h=o.add(l,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},M+" &times; "+P)};let ur=o.get("mceResizeHandle"+oa);ur&&o.remove(ur),ur=o.add(l,"div",{id:"mceResizeHandle"+oa,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+oa+"-resize; margin:0; padding:0"}),o.bind(ur,"mousedown",zr=>{zr.stopImmediatePropagation(),zr.preventDefault(),Xa(zr)}),Or.elm=ur,o.setStyles(ur,{left:yn*Or[0]+Qe-ur.offsetWidth/2,top:Fc*Or[1]+Ft-ur.offsetHeight/2})}):ns(!1)},so=hr(En,0),ns=(fe=!0)=>{so.cancel(),et(),d&&fe&&d.removeAttribute(Xg),Le(VS,(Ee,Qe)=>{const Ft=o.get("mceResizeHandle"+Qe);Ft&&(o.unbind(Ft),o.remove(Ft))})},fs=(fe,Ee)=>o.isChildOf(fe,Ee),Be=fe=>{if(F||n.removed||n.composing)return;const Ee=fe.type==="mousedown"?fe.target:e.getNode(),Qe=dd(z.fromDom(Ee),pI).map(Wt=>Wt.dom).filter(Wt=>o.isEditable(Wt.parentElement)||Wt.nodeName==="IMG"&&o.isEditable(Wt)).getOrUndefined(),Ft=_e(Qe)?o.getAttrib(Qe,Xg,"1"):"1";if(de(o.select(`img[${Xg}],hr[${Xg}]`),Wt=>{Wt.removeAttribute(Xg)}),_e(Qe)&&fs(Qe,l)&&Vv(n)){ln();const Wt=e.getStart(!0);if(fs(Wt,Qe)&&fs(e.getEnd(!0),Qe)){o.setAttrib(Qe,Xg,Ft),so.throttle(Qe);return}}ns()},et=()=>{Le(VS,fe=>{fe.elm&&(o.unbind(fe.elm),delete fe.elm)})},ln=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{ln(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Be),n.on("keyup compositionend",fe=>{d&&d.nodeName==="TABLE"&&Be(fe)}),n.on("hide blur",ns),n.on("contextmenu longpress",le,!0)}),n.on("remove",et),{isResizable:ve,showResizeRect:En,hideResizeRect:ns,updateResizeRect:Be,destroy:()=>{so.cancel(),d=g=w=null}}},jn=(e,n,o)=>{const r=hl(z.fromDom(o));return Nj(r.dom,e,n).map(c=>{const l=o.createRange();return l.setStart(c.start.dom,c.soffset),l.setEnd(c.finish.dom,c.foffset),l}).getOrUndefined()},g1=(e,n)=>_e(e)&&_e(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,Uv=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},h1=(e,n,o)=>Uv(e,n,o)!==null,Mu=(e,n,o)=>h1(e,n,r=>r.nodeName===o),Zv=(e,n)=>Uo(e)&&!h1(e,n,vc),Gm=(e,n,o)=>{const r=n.parentNode;if(r){const c=new Ds(n,e.getParent(r,e.isBlock)||e.getRoot());let l;for(;l=c[o?"prev":"next"]();)if(vo(l))return!0}return!1},aA=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},vI=(e,n)=>{let o=n;for(;o&&o!==e;){if(to(o))return!0;o=o.parentNode}return!1},zS=(e,n,o,r,c)=>{const l=e.getRoot(),d=e.schema.getNonEmptyElements(),g=c.parentNode;let h,y;if(!g)return D.none();const w=e.getParent(g,e.isBlock)||l;if(r&&vo(c)&&n&&e.isEmpty(w))return D.some(ue(g,e.nodeIndex(c)));const T=new Ds(c,w);for(;y=T[r?"prev":"next"]();){if(e.getContentEditableParent(y)==="false"||Zv(y,l))return D.none();if(ke(y)&&y.data.length>0)return Mu(y,l,"A")?D.none():D.some(ue(y,r?y.data.length:0));if(e.isBlock(y)||d[y.nodeName.toLowerCase()])return D.none();h=y}return _l(h)?D.none():o&&h?D.some(ue(h,0)):D.none()},US=(e,n,o,r)=>{const c=e.getRoot();let l,d=!1,g=o?r.startContainer:r.endContainer,h=o?r.startOffset:r.endOffset;const y=Ye(g)&&h===g.childNodes.length,w=e.schema.getNonEmptyElements();let T=o;if(Uo(g))return D.none();if(Ye(g)&&h>g.childNodes.length-1&&(T=!1),Tp(g)&&(g=c,h=0),g===c){if(T&&(l=g.childNodes[h>0?h-1:0],l&&(Uo(l)||w[l.nodeName]||El(l))))return D.none();if(g.hasChildNodes()){if(h=Math.min(!T&&h>0?h-1:h,g.childNodes.length-1),g=g.childNodes[h],h=ke(g)&&y?g.data.length:0,!n&&g===c.lastChild&&El(g)||vI(c,g)||Uo(g)||Vo(g))return D.none();if(g.hasChildNodes()&&!El(g)){l=g;const k=new Ds(g,c);do{if(to(l)||Uo(l)){d=!1;break}if(ke(l)&&l.data.length>0){h=T?0:l.data.length,g=l,d=!0;break}if(w[l.nodeName.toLowerCase()]&&!si(l)){h=e.nodeIndex(l),g=l.parentNode,T||h++,d=!0;break}}while(l=T?k.next():k.prev())}}}return n&&(ke(g)&&h===0&&zS(e,y,n,!0,g).each(k=>{g=k.container(),h=k.offset(),d=!0}),Ye(g)&&(l=g.childNodes[h],l||(l=g.childNodes[h-1]),l&&vo(l)&&!aA(l,"A")&&!Gm(e,l,!1)&&!Gm(e,l,!0)&&zS(e,y,n,!0,l).each(k=>{g=k.container(),h=k.offset(),d=!0}))),T&&!n&&ke(g)&&h===g.data.length&&zS(e,y,n,!1,g).each(k=>{g=k.container(),h=k.offset(),d=!0}),d&&g?D.some(ue(g,h)):D.none()},Wv=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=ue.fromRangeStart(n);return US(e,o,!0,r).each(l=>{(!o||!ue.isAbove(c,l))&&r.setStart(l.container(),l.offset())}),o||US(e,o,!1,r).each(l=>{r.setEnd(l.container(),l.offset())}),o&&r.collapse(!0),g1(n,r)?D.none():D.some(r)},Jg=(e,n)=>e.splitText(n),qm=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&ke(n)){if(o>0&&o<n.data.length)if(r=Jg(n,o),n=r.previousSibling,c>o){c=c-o;const l=Jg(r,c).previousSibling;n=r=l,c=l.data.length,o=0}else c=0}else if(ke(n)&&o>0&&o<n.data.length&&(n=Jg(n,o),o=0),ke(r)&&c>0&&c<r.data.length){const l=Jg(r,c).previousSibling;r=l,c=l.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},Wa=e=>({walk:(l,d)=>Kt(e,l,d),split:qm,expand:(l,d={type:"word"})=>{if(d.type==="word"){const g=Wm(e,l,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),h=e.createRng();return h.setStart(g.startContainer,g.startOffset),h.setEnd(g.endContainer,g.endOffset),h}return l},normalize:l=>Wv(e,l).fold(Ce,d=>(l.setStart(d.startContainer,d.startOffset),l.setEnd(d.endContainer,d.endOffset),!0))});Wa.compareRanges=g1,Wa.getCaretRangeFromPoint=jn,Wa.getSelectedNode=Xb,Wa.getNode=ar;const Ru=e=>un(e)==="textarea",cA=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),yI=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},CI=(e,n)=>{const o=Os(e);if(o.length===0||Ru(e))return{element:e,offset:n};if(n<o.length&&!Ru(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return Ru(r)?{element:e,offset:n}:un(r)==="img"?{element:r,offset:1}:vr(r)?{element:r,offset:gg(r).length}:{element:r,offset:Os(r).length}}},iA=(e,n)=>{const o=jB(e),r=ei(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},xI=(e,n)=>{const o=CI(e,n),r=z.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Cs+"</span>");return yr(o.element,r),iA(r,()=>v(r))},SI=e=>iA(z.fromDom(e),it),lA=(e,n,o,r)=>{EI(e,(c,l)=>wI(e,n,o,r),o)},ZS=(e,n,o,r,c)=>{const l={elm:r.element.dom,alignToTop:c};if(cA(e,l))return;const d=Cp(n).top;o(e,n,d,r,c),yI(e,l)},wI=(e,n,o,r)=>{const c=z.fromDom(e.getBody()),l=z.fromDom(e.getDoc());po(c);const d=xI(z.fromDom(o.startContainer),o.startOffset);ZS(e,l,n,d,r),d.cleanup()},uA=(e,n,o,r)=>{const c=z.fromDom(e.getDoc());ZS(e,c,o,SI(n),r)},EI=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,l=o.endContainer,d=o.endOffset;n(z.fromDom(r),z.fromDom(l));const g=e.dom.createRng();g.setStart(r,c),g.setEnd(l,d),e.selection.setRng(o)},dA=(e,n,o,r,c)=>{const l=n.pos,d=30;if(r)I_(l.left,Math.max(0,l.top-d),c);else{const g=l.top-o+n.height+d;I_(-e.getBody().getBoundingClientRect().left,g,c)}},mA=(e,n,o,r,c,l)=>{const d=r+o,g=c.pos.top,h=c.bottom,y=h-g>=r;g<o?dA(e,c,r,l!==!1,n):g>d?dA(e,c,r,y?l!==!1:l===!0,n):h>d&&!y&&dA(e,c,r,l===!0,n)},us=(e,n,o,r,c)=>{const l=hl(n).dom.innerHeight;mA(e,n,o,l,r,c)},p1=(e,n,o,r,c)=>{const l=hl(n).dom.innerHeight;mA(e,n,o,l,r,c);const d=Iv(r.element),g=_p(window);d.top<g.y?vb(r.element,c!==!1):d.top>g.bottom&&vb(r.element,c===!0)},Bs=(e,n,o)=>lA(e,us,n,o),bi=(e,n,o)=>uA(e,n,us,o),_I=(e,n,o)=>lA(e,p1,n,o),fA=(e,n,o)=>uA(e,n,p1,o),TI=(e,n,o)=>{(e.inline?bi:fA)(e,n,o)},Km=(e,n,o)=>{(e.inline?Bs:_I)(e,n,o)},gA=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),WS=(e,n,o,r,c)=>{const l=o?n.startContainer:n.endContainer,d=o?n.startOffset:n.endOffset;return D.from(l).map(z.fromDom).map(g=>!r||!n.collapsed?vl(g,c(g,d)).getOr(g):g).bind(g=>Pr(g)?D.some(g):Xc(g).filter(Pr)).map(g=>g.dom).getOr(e)},hA=(e,n,o=!1)=>WS(e,n,!0,o,(r,c)=>Math.min(lg(r),c)),pA=(e,n,o=!1)=>WS(e,n,!1,o,(r,c)=>c>0?c-1:c),bA=(e,n)=>{const o=e;for(;e&&ke(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},ja=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,l=n.endOffset;let d=n.commonAncestorContainer;n.collapsed||(o===r&&l-c<2&&o.hasChildNodes()&&(d=o.childNodes[c]),ke(o)&&ke(r)&&(o.length===c?o=bA(o.nextSibling,!0):o=o.parentNode,l===0?r=bA(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(d=o)));const g=ke(d)?d.parentNode:d;return wl(g)?g:e},_r=(e,n,o,r)=>{const c=[],l=e.getRoot(),d=e.getParent(o||hA(l,n,n.collapsed),e.isBlock),g=e.getParent(r||pA(l,n,n.collapsed),e.isBlock);if(d&&d!==l&&c.push(d),d&&g&&d!==g){let h;const y=new Ds(d,l);for(;(h=y.next())&&h!==g;)e.isBlock(h)&&c.push(h)}return g&&d!==g&&g!==l&&c.push(g),c},Xj=(e,n,o)=>D.from(n).bind(r=>D.from(r.parentNode).map(c=>{const l=e.nodeIndex(r),d=e.createRng();return d.setStart(c,l),d.setEnd(c,l+1),o&&(SS(e,d,r,!0),SS(e,d,r,!1)),d})),wc=(e,n)=>wt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),jS={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},jv=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let l=e[c];if(l)return l;for(let d=e.parent;d&&d!==n;d=d.parent)if(l=d[c],l)return l}},kI=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Ro(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},GS=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Fr{static create(n,o){const r=new Fr(n,jS[n]||1);return o&&Le(o,(c,l)=>{r.attr(l,c)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!ee(n))return _e(n)&&Le(n,(l,d)=>{r.attr(d,l)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let l=c.length;for(;l--;)if(c[l].name===n)return c.splice(l,1),r}return r}if(n in c.map){let l=c.length;for(;l--;)if(c[l].name===n){c[l].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new Fr(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let l=0,d=r.length;l<d;l++){const g=r[l];g.name!=="id"&&(c[c.length]={name:g.name,value:g.value},c.map[g.name]=g.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=jv(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=jv(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const l=this;let d=l.firstChild;if(GS(l))return!1;if(d)do{if(d.type===1){if(d.attr("data-mce-bogus"))continue;if(n[d.name]||GS(d))return!1}if(d.type===8||d.type===3&&!kI(d)||d.type===3&&d.parent&&o[d.parent.name]&&Ro((c=d.value)!==null&&c!==void 0?c:"")||r&&r(d))return!1}while(d=jv(d,l));return!0}walk(n){return jv(this,null,n)}}const vA=Oe.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),yA=e=>ee(e.nodeValue)&&e.nodeValue.includes(Cs),Gv=e=>`${e.length===0?"":`${wt(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,AI=(e,n)=>n.querySelectorAll(Gv(e)),CA=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>yA(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),xA=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(yA(n)){const o=n.parentNode;return o&&bt(vA,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),OI=e=>CA(e).nextNode()!==null,SA=e=>xA(e).nextNode()!==null,qS=(e,n)=>n.querySelector(Gv(e))!==null,wA=(e,n)=>{de(AI(e,n),o=>{const r=z.fromDom(o);wo(r,"data-mce-bogus")==="all"?v(r):de(e,c=>{ud(r,c)&&Ko(r,c)})})},qv=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},DI=x(qv,CA),Jj=x(qv,xA),MI=(e,n)=>{const o=[{condition:qe(qS,n),action:qe(wA,n)},{condition:OI,action:DI},{condition:SA,action:Jj}];let r=e,c=!1;return de(o,({condition:l,action:d})=>{l(r)&&(c||(r=e.cloneNode(!0),c=!0),d(r))}),r},EA=e=>{const n=Zn(e,"[data-mce-bogus]");de(n,o=>{wo(o,"data-mce-bogus")==="all"?v(o):Pm(o)?(yr(o,z.fromText(pr)),v(o)):E(o)})},KS=e=>{const n=Zn(e,"input");de(n,o=>{Ko(o,"name")})},RI=(e,n)=>{const o=Er(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},NI=(e,n)=>{const o=e.getDoc(),r=lc(z.fromDom(e.getBody())),c=z.fromTag("div",o);as(c,"data-mce-bogus","all"),hb(c,{position:"fixed",left:"-9999999px",top:"0"}),jt(c,n.innerHTML),EA(c),KS(c);const l=Jc(r);Mo(l,c);const d=xa(c.dom.innerText);return v(c),d},BI=(e,n,o)=>{let r;return n.format==="raw"?r=Oe.trim(xa(MI(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=NI(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=RI(e,e.serializer.serialize(o,n)),n.format!=="text"&&!Og(z.fromDom(o))&&ee(r)?Oe.trim(r):r},Qj=(e,n)=>D.from(e.getBody()).fold(Ve(n.format==="tree"?new Fr("body",11):""),o=>BI(e,n,o)),PI=Oe.makeMap,YS=e=>{const n=[];e=e||{};const o=e.indent,r=PI(e.indent_before||""),c=PI(e.indent_after||""),l=Fn.getEncodeFunc(e.entity_encoding||"raw",e.entities),d=e.element_format!=="xhtml";return{start:(g,h,y)=>{if(o&&r[g]&&n.length>0){const w=n[n.length-1];w.length>0&&w!==`
`&&n.push(`
`)}if(n.push("<",g),h)for(let w=0,T=h.length;w<T;w++){const k=h[w];n.push(" ",k.name,'="',l(k.value,!0),'"')}if(!y||d?n[n.length]=">":n[n.length]=" />",y&&o&&c[g]&&n.length>0){const w=n[n.length-1];w.length>0&&w!==`
`&&n.push(`
`)}},end:g=>{let h;n.push("</",g,">"),o&&c[g]&&n.length>0&&(h=n[n.length-1],h.length>0&&h!==`
`&&n.push(`
`))},text:(g,h)=>{g.length>0&&(n[n.length]=h?g:l(g))},cdata:g=>{n.push("<![CDATA[",g,"]]>")},comment:g=>{n.push("<!--",g,"-->")},pi:(g,h)=>{h?n.push("<?",g," ",l(h),"?>"):n.push("<?",g,"?>"),o&&n.push(`
`)},doctype:g=>{n.push("<!DOCTYPE",g,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Nu=(e={},n=sr())=>{const o=YS(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const l=e.validate,d={3:h=>{var y;o.text((y=h.value)!==null&&y!==void 0?y:"",h.raw)},8:h=>{var y;o.comment((y=h.value)!==null&&y!==void 0?y:"")},7:h=>{o.pi(h.name,h.value)},10:h=>{var y;o.doctype((y=h.value)!==null&&y!==void 0?y:"")},4:h=>{var y;o.cdata((y=h.value)!==null&&y!==void 0?y:"")},11:h=>{let y=h;if(y=y.firstChild)do g(y);while(y=y.next)}};o.reset();const g=h=>{var y;const w=d[h.type];if(w)w(h);else{const T=h.name,k=T in n.getVoidElements();let M=h.attributes;if(l&&M&&M.length>1){const P=[];P.map={};const B=n.getElementRule(h.name);if(B){for(let F=0,U=B.attributesOrder.length;F<U;F++){const q=B.attributesOrder[F];if(q in M.map){const X=M.map[q];P.map[q]=X,P.push({name:q,value:X})}}for(let F=0,U=M.length;F<U;F++){const q=M[F].name;if(!(q in P.map)){const X=M.map[q];P.map[q]=X,P.push({name:q,value:X})}}M=P}}if(o.start(T,M,k),gd(T))ee(h.value)&&o.text(h.value,!0),o.end(T);else if(!k){let P=h.firstChild;if(P){(T==="pre"||T==="textarea")&&P.type===3&&((y=P.value)===null||y===void 0?void 0:y[0])===`
`&&o.text(`
`,!0);do g(P);while(P=P.next)}o.end(T)}}};return c.type===1&&!e.inner?g(c):c.type===3?d[3](c):d[11](c),o.getContent()}}},_A=new Set;de(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{_A.add(n)});const TA=new Set;de(["background-color"],n=>{TA.add(n)});const kA=["font","text-decoration","text-emphasis"],eG=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),b1=(e,n)=>bs(eG(e,n)),tG=e=>_A.has(e),II=e=>TA.has(e),FI=(e,n)=>On(b1(e,n),o=>tG(o)),$I=(e,n)=>FI(e,n)&&On(b1(e,n),o=>II(o)),Ym=e=>gt(e,n=>On(kA,o=>Lo(n,o))),LI=(e,n,o)=>{const r=b1(e,n),c=b1(e,o),l=d=>{var g,h;const y=(g=e.getStyle(n,d))!==null&&g!==void 0?g:"",w=(h=e.getStyle(o,d))!==null&&h!==void 0?h:"";return tn(y)&&tn(w)&&y!==w};return On(r,d=>{const g=h=>On(h,y=>y===d);if(!g(c)&&g(kA)){const h=Ym(c);return On(h,l)}else return l(d)})},XS=(e,n,o)=>D.from(o.container()).filter(ke).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),Kv=qe(XS,!0,zm),Yv=qe(XS,!1,zm),AA=e=>{const n=e.container();return ke(n)&&(n.data.length===0||Gb(n.data)&&d1.isBookmarkNode(n.parentNode))},Pl=(e,n)=>o=>iS(e?0:-1,o).filter(n).isSome(),HI=e=>K_(e)&&Yo(z.fromDom(e),"display")==="block",OA=e=>to(e)&&!x8(e),nG=Pl(!0,HI),VI=Pl(!1,HI),v1=Pl(!0,dc),Xm=Pl(!1,dc),JS=Pl(!0,El),DA=Pl(!1,El),Jm=Pl(!0,OA),Qm=Pl(!1,OA),zI=e=>e.slice(0,-1),oG=(e,n,o)=>ic(n,e)?zI(cb(e,r=>o(r)||Gt(r,n))):[],MA=(e,n)=>oG(e,n,Ce),Il=(e,n)=>[e].concat(MA(e,n)),QS=(e,n,o)=>hS(e,n,o,AA),RA=e=>n=>e.isBlock(un(n)),UI=(e,n,o)=>mo(Il(z.fromDom(n.container()),e),RA(o)),NA=(e,n,o,r)=>QS(e,n.dom,o).forall(c=>UI(n,o,r).fold(()=>!ji(c,o,n.dom),l=>!ji(c,o,n.dom)&&ic(l,z.fromDom(c.container())))),ew=(e,n,o,r)=>UI(n,o,r).fold(()=>QS(e,n.dom,o).forall(c=>!ji(c,o,n.dom)),c=>QS(e,c.dom,o).isNone()),tw=qe(ew,!1),BA=qe(ew,!0),ZI=qe(NA,!1),WI=qe(NA,!0),jI=e=>Sv(e).exists(Pm),Xv=(e,n,o,r)=>{const c=gt(Il(z.fromDom(o.container()),n),d=>r.isBlock(un(d))),l=$o(c).getOr(n);return bc(e,l.dom,o).filter(jI)},nw=(e,n,o)=>Sv(n).exists(Pm)||Xv(!0,e,n,o).isSome(),Jv=(e,n,o)=>C7(n).exists(Pm)||Xv(!1,e,n,o).isSome(),PA=qe(Xv,!1),GI=qe(Xv,!0),IA=e=>ue.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),FA=(e,n,o)=>{const r=gt(Il(z.fromDom(n.container()),e),c=>o.isBlock(un(c)));return $o(r).getOr(e)},$A=(e,n,o)=>IA(n)?Yv(n):Yv(n)||Jr(FA(e,n,o).dom,n).exists(Yv),LA=(e,n,o)=>IA(n)?Kv(n):Kv(n)||Qo(FA(e,n,o).dom,n).exists(Kv),Fe=e=>St(["pre","pre-wrap"],e),vi=e=>Sv(e).bind(n=>xl(n,Pr)).exists(n=>Fe(Yo(n,"white-space"))),sG=(e,n)=>Jr(e.dom,n).isNone(),qI=(e,n)=>Qo(e.dom,n).isNone(),ow=(e,n,o)=>sG(e,n)||qI(e,n)||tw(e,n,o)||BA(e,n,o)||Jv(e,n,o)||nw(e,n,o),HA=e=>_e(e)&&to(e)&&n1(e),sw=(e,n)=>o=>HA(new Ds(o,e)[n]()),rw=(e,n)=>{const o=Qo(e.dom,n).getOr(n),r=sw(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},KI=(e,n)=>{const o=Jr(e.dom,n).getOr(n),r=sw(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},aw=(e,n,o)=>vi(n)?!1:ow(e,n,o)||$A(e,n,o)||LA(e,n,o),y1=(e,n,o)=>vi(n)?!1:tw(e,n,o)||ZI(e,n,o)||Jv(e,n,o)||$A(e,n,o)||KI(e,n),YI=e=>{const n=e.container(),o=e.offset();return ke(n)&&o<n.data.length?ue(n,o+1):e},C1=(e,n,o)=>vi(n)?!1:BA(e,n,o)||WI(e,n,o)||nw(e,n,o)||LA(e,n,o)||rw(e,n),cw=(e,n,o)=>y1(e,n,o)||C1(e,YI(n),o),VA=(e,n)=>Av(e.charAt(n)),x1=(e,n)=>zm(e.charAt(n)),XI=e=>{const n=e.container();return ke(n)&&ss(n.data,Jn)},JI=e=>{const n=e.split("");return wt(n,(o,r)=>Av(o)&&r>0&&r<n.length-1&&yS(n[r-1])&&yS(n[r+1])?" ":o).join("")},zA=(e,n,o,r)=>{const c=n.data,l=ue(n,0);return!o&&VA(c,0)&&!cw(e,l,r)?(n.data=" "+c.slice(1),!0):o&&x1(c,0)&&y1(e,l,r)?(n.data=Jn+c.slice(1),!0):!1},QI=e=>{const n=e.data,o=JI(n);return o!==n?(e.data=o,!0):!1},UA=(e,n,o,r)=>{const c=n.data,l=ue(n,c.length-1);return!o&&VA(c,c.length-1)&&!cw(e,l,r)?(n.data=c.slice(0,-1)+" ",!0):o&&x1(c,c.length-1)&&C1(e,l,r)?(n.data=c.slice(0,-1)+Jn,!0):!1},ZA=(e,n,o)=>{const r=n.container();if(!ke(r))return D.none();if(XI(n)){const c=zA(e,r,!1,o)||QI(r)||UA(e,r,!1,o);return _n(c,n)}else if(cw(e,n,o)){const c=zA(e,r,!0,o)||UA(e,r,!0,o);return _n(c,n)}else return D.none()},Qv=e=>{const n=z.fromDom(e.getBody());e.selection.isCollapsed()&&ZA(n,ue.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},WA=(e,n,o,r)=>{if(o===0)return;const c=z.fromDom(e),l=du(c,y=>r.isBlock(un(y))).getOr(c),d=e.data.slice(n,n+o),g=n+o>=e.data.length&&C1(l,ue(e,e.data.length),r),h=n===0&&y1(l,ue(e,0),r);e.replaceData(n,o,or(d,4,h,g))},e2=(e,n,o)=>{const r=e.data.slice(n),c=r.length-Z0(r).length;WA(e,n,c,o)},iw=(e,n,o)=>{const r=e.data.slice(0,n),c=r.length-Ii(r).length;WA(e,n-c,c,o)},lw=(e,n,o,r,c=!0)=>{const l=Ii(e.data).length,d=c?e:n,g=c?n:e;return c?d.appendData(g.data):d.insertData(0,g.data),v(z.fromDom(g)),r&&e2(d,l,o),d},eF=(e,n)=>{const o=e.container(),r=e.offset();return!ue.isTextPosition(e)&&o===n.parentNode&&r>ue.before(n).offset()},tF=(e,n)=>eF(n,e)?ue(n.container(),n.offset()-1):n,nF=e=>ke(e)?ue(e,0):ue.before(e),oF=e=>ke(e)?ue(e,e.data.length):ue.after(e),jA=e=>di(e.previousSibling)?D.some(oF(e.previousSibling)):e.previousSibling?wa(e.previousSibling):D.none(),GA=e=>di(e.nextSibling)?D.some(nF(e.nextSibling)):e.nextSibling?Ws(e.nextSibling):D.none(),sF=(e,n)=>D.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>Jr(e,ue.before(o))).orThunk(()=>Qo(e,ue.after(n))),rF=(e,n)=>Qo(e,ue.after(n)).orThunk(()=>Jr(e,ue.before(n))),aF=(e,n)=>jA(n).orThunk(()=>GA(n)).orThunk(()=>sF(e,n)),cF=(e,n)=>GA(n).orThunk(()=>jA(n)).orThunk(()=>rF(e,n)),qA=(e,n,o)=>e?cF(n,o):aF(n,o),iF=(e,n,o)=>qA(e,n,o).map(qe(tF,o)),KA=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},t2=e=>n=>n.dom===e,Rd=(e,n)=>n&&bt(e.schema.getBlockElements(),un(n)),n2=(e,n,o)=>{if(Sr(e,n)){const r=z.fromHtml('<br data-mce-bogus="1">');return o?de(Os(n),c=>{Nv(c)||v(c)}):Fa(n),Mo(n,r),D.some(ue.before(r.dom))}else return D.none()},lF=(e,n,o,r)=>{const c=pl(e).filter(vr),l=bl(e).filter(vr);return v(e),sp(c,l,n,(d,g,h)=>{const y=d.dom,w=g.dom,T=y.data.length;return lw(y,w,o,r),h.container()===w?ue(y,T):h}).orThunk(()=>(r&&(c.each(d=>iw(d.dom,d.dom.length,o)),l.each(d=>e2(d.dom,0,o))),n))},uF=(e,n)=>bt(e.schema.getTextInlineElements(),un(n)),ef=(e,n,o,r=!0,c=!1)=>{const l=iF(n,e.getBody(),o.dom),d=du(o,qe(Rd,e),t2(e.getBody())),g=lF(o,l,e.schema,uF(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):d.bind(h=>n2(e.schema,h,c)).fold(()=>{r&&KA(e,n,g)},h=>{r&&KA(e,n,D.some(h))})},dF=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,YA=e=>dF.test(e),tf=(e,n)=>ha(z.fromDom(n),Xp(e))&&!ri(e.schema,n)&&e.dom.isEditable(n),XA=e=>{var n;return wn.DOM.getStyle(e,"direction",!0)==="rtl"||YA((n=e.textContent)!==null&&n!==void 0?n:"")},JA=(e,n,o)=>gt(wn.DOM.getParents(o.container(),"*",n),e),Nd=(e,n,o)=>{const r=JA(e,n,o);return D.from(r[r.length-1])},QA=(e,n,o)=>{const r=Ou(n,e),c=Ou(o,e);return _e(r)&&r===c},mF=e=>Ox(e)||Lp(e),Ec=(e,n)=>{const o=n.container(),r=n.offset();return e?rr(o)?ke(o.nextSibling)?ue(o.nextSibling,0):ue.after(o):Ox(n)?ue(o,r+1):n:rr(o)?ke(o.previousSibling)?ue(o.previousSibling,o.previousSibling.data.length):ue.before(o):Lp(n)?ue(o,r-1):n},eO=qe(Ec,!0),uw=qe(Ec,!1),o2=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},tO=e=>{e.execCommand("delete")},s2=e=>o2(e,"Delete"),nO=e=>o2(e,"ForwardDelete"),r2=e=>n=>Zc(Xc(n),e,Gt),fF=e=>Tx(e)||yu(e),S1=(e,n)=>ic(e,n)?xl(n,fF,r2(e)):D.none(),w1=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},dw=(e,n,o)=>os(Ws(o),wa(o),(r,c)=>{const l=Ec(!0,r),d=Ec(!1,c),g=Ec(!1,n);return e?Qo(o,g).exists(h=>h.isEqual(d)&&n.isEqual(l)):Jr(o,g).exists(h=>h.isEqual(l)&&n.isEqual(d))}).getOr(!0),oO=e=>(id(e)?pl(e):hm(e)).bind(oO).orThunk(()=>D.some(e)),sO=(e,n,o,r=!0)=>{var c;n.deleteContents();const l=oO(o).getOr(o),d=z.fromDom((c=e.dom.getParent(l.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(d.dom===e.getBody()?w1(e,r):Sr(e.schema,d,{checkRootAsContent:!1})&&(xd(d),r&&e.selection.setCursorLocation(d.dom,0)),!Gt(o,d)){const g=Zc(Xc(d),o)?[]:hp(d);de(g.concat(Os(o)),h=>{!Gt(h,d)&&!ic(h,d)&&Sr(e.schema,h)&&v(h)})}},a2=e=>n=>Gt(e,n),c2=e=>Zn(e,"td,th"),mw=(e,n)=>l1(z.fromDom(e),n),rO=e=>os(e.startTable,e.endTable,(n,o)=>{const r=xb(n,l=>Gt(l,o)),c=xb(o,l=>Gt(l,n));return!r&&!c?e:{...e,startTable:r?D.none():e.startTable,endTable:c?D.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),aO=e=>rO(e),cO=(e,n)=>{const o=mw(e.startContainer,n),r=mw(e.endContainer,n),c=o.isSome(),l=r.isSome(),d=os(o,r,Gt).getOr(!1);return aO({startTable:o,endTable:r,isStartInTable:c,isEndInTable:l,isSameTable:d,isMultiTable:!d&&c&&l})},i2=(e,n)=>({start:e,end:n}),iO=(e,n,o)=>({rng:e,table:n,cells:o}),Qg=Ys.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),E1=(e,n)=>dd(z.fromDom(e),"td,th",n),fw=e=>!Gt(e.start,e.end),lO=(e,n)=>l1(e.start,n).bind(o=>l1(e.end,n).bind(r=>_n(Gt(o,r),o))),gF=(e,n)=>!fw(e)&&lO(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),hF=(e,n)=>{const o=E1(e.startContainer,n),r=E1(e.endContainer,n);return os(o,r,i2)},pF=e=>n=>l1(n,e).bind(o=>mr(c2(o)).map(r=>i2(n,r))),bF=e=>n=>l1(n,e).bind(o=>$o(c2(o)).map(r=>i2(r,n))),gw=e=>n=>lO(n,e).map(o=>iO(n,o,c2(o))),uO=(e,n,o,r)=>{if(o.collapsed||!e.forall(fw))return D.none();if(n.isSameTable){const c=e.bind(gw(r));return D.some({start:c,end:c})}else{const c=E1(o.startContainer,r),l=E1(o.endContainer,r),d=c.bind(pF(r)).bind(gw(r)),g=l.bind(bF(r)).bind(gw(r));return D.some({start:d,end:g})}},dO=(e,n)=>Gs(e,o=>Gt(o,n)),hw=e=>os(dO(e.cells,e.rng.start),dO(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),vF=(e,n,o)=>e.exists(r=>gF(r,o)&&xS(r.start,n)),pw=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(l=>c.setStartAfter(l.dom)),r.each(l=>c.setEndBefore(l.dom)),c},rG=(e,n,o,r)=>uO(e,n,o,r).bind(({start:c,end:l})=>c.or(l)).bind(c=>{const{isSameTable:l}=n,d=hw(c).getOr([]);if(l&&c.cells.length===d.length)return D.some(Qg.fullTable(c.table));if(d.length>0){if(l)return D.some(Qg.partialTable(d,D.none()));{const g=pw(o,n);return D.some(Qg.partialTable(d,D.some({...n,rng:g})))}}else return D.none()}),aG=(e,n,o,r)=>uO(e,n,o,r).bind(({start:c,end:l})=>{const d=c.bind(hw).getOr([]),g=l.bind(hw).getOr([]);if(d.length>0&&g.length>0){const h=pw(o,n);return D.some(Qg.multiTable(d,g,h))}else return D.none()}),yF=(e,n)=>{const o=a2(e),r=hF(n,o),c=cO(n,o);return vF(r,n,o)?r.map(l=>Qg.singleCellTable(n,l.start)):c.isMultiTable?aG(r,c,n,o):rG(r,c,n,o)},CF=e=>de(e,n=>{Ko(n,"contenteditable"),xd(n)}),xF=(e,n)=>D.from(e.dom.getParent(n,e.dom.isBlock)).map(z.fromDom),ir=(e,n,o)=>{o.each(r=>{n?v(r):(xd(r),e.selection.setCursorLocation(r.dom,0))})},bw=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),$r(e,c,n,!1).each(l=>l())},SF=e=>{const n=Du(e),o=z.fromDom(e.selection.getNode());kp(o.dom)&&Sr(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&On(n,r=>Gt(r,o))&&as(o,"data-mce-selected","1")},mO=(e,n,o)=>D.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:l,isStartInTable:d})=>{const g=xF(e,d?l.endContainer:l.startContainer);l.deleteContents(),ir(e,d,g.filter(qe(Sr,e.schema)));const h=d?n[0]:n[n.length-1];return bw(e,h,r,d),Sr(e.schema,h)?D.none():D.some(d?n.slice(1):n.slice(0,-1))}).getOr(n);CF(c),SF(e)}),wF=(e,n,o,r)=>D.some(()=>{const c=e.selection.getRng(),l=n[0],d=o[o.length-1];bw(e,l,c,!0),bw(e,d,c,!1);const g=Sr(e.schema,l)?n:n.slice(1),h=Sr(e.schema,d)?o:o.slice(0,-1);CF(g.concat(h)),r.deleteContents(),SF(e)}),$r=(e,n,o,r=!0)=>D.some(()=>{sO(e,n,o,r)}),cG=(e,n)=>D.some(()=>ef(e,!1,n)),EF=(e,n,o)=>yF(n,o).bind(r=>r.fold(qe($r,e),qe(cG,e),qe(mO,e),qe(wF,e))),iG=(e,n)=>_1(e,n),_F=(e,n,o,r)=>vw(n,r).fold(()=>EF(e,n,o),c=>iG(e,c)),TF=(e,n,o)=>{const r=z.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?mO(e,o,D.none()):_F(e,r,c,n)},kF=(e,n)=>mo(Il(n,e),Cd),vw=(e,n)=>mo(Il(n,e),rs("caption")),Ea=(e,n,o,r,c)=>hi(o,e.getBody(),c).bind(l=>kF(n,z.fromDom(l.getNode())).bind(d=>Gt(d,r)?D.none():D.some(it))),_1=(e,n)=>D.some(()=>{xd(n),e.selection.setCursorLocation(n.dom,0)}),fO=(e,n,o,r)=>Ws(e.dom).bind(c=>wa(e.dom).map(l=>n?o.isEqual(c)&&r.isEqual(l):o.isEqual(l)&&r.isEqual(c))).getOr(!0),AF=(e,n)=>_1(e,n),OF=(e,n,o)=>vw(e,z.fromDom(o.getNode())).fold(()=>D.some(it),r=>_n(!Gt(r,n),it)),gO=(e,n,o,r,c)=>hi(o,e.getBody(),c).fold(()=>D.some(it),l=>fO(r,o,c,l)?AF(e,r):OF(n,r,l)),hO=(e,n,o,r)=>{const c=ue.fromRangeStart(e.selection.getRng());return kF(o,r).bind(l=>Sr(e.schema,l,{checkRootAsContent:!1})?_1(e,l):Ea(e,o,n,l,c))},DF=(e,n,o,r)=>{const c=ue.fromRangeStart(e.selection.getRng());return Sr(e.schema,r)?_1(e,r):gO(e,o,n,r,c)},pO=(e,n)=>e?JS(n):DA(n),MF=(e,n)=>{const o=ue.fromRangeStart(e.selection.getRng());return pO(n,o)||bc(n,e.getBody(),o).exists(r=>pO(n,r))},RF=(e,n,o)=>{const r=z.fromDom(e.getBody());return vw(r,o).fold(()=>hO(e,n,r,o).orThunk(()=>_n(MF(e,n),it)),c=>DF(e,n,r,c))},l2=(e,n)=>{const o=z.fromDom(e.selection.getStart(!0)),r=Du(e);return e.selection.isCollapsed()&&r.length===0?RF(e,n,o):TF(e,o,r)},nf=(e,n)=>{let o=n;for(;o&&o!==e;){if(oi(o)||to(o))return o;o=o.parentNode}return null},bO=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],NF=Oe.each,vO=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(l,d)=>{if(l.nodeName!==d.nodeName||l.nodeType!==d.nodeType)return!1;const g=y=>{const w={};return NF(n.getAttribs(y),T=>{const k=T.nodeName.toLowerCase();k!=="style"&&!c(k)&&(w[k]=n.getAttrib(y,k))}),w},h=(y,w)=>{for(const T in y)if(bt(y,T)){const k=w[T];if(To(k)||y[T]!==k)return!1;delete w[T]}for(const T in w)if(bt(w,T))return!1;return!0};return Ye(l)&&Ye(d)&&(!h(g(l),g(d))||!h(n.parseStyle(n.getAttrib(l,"style")),n.parseStyle(n.getAttrib(d,"style"))))?!1:!yc(l)&&!yc(d)},c=l=>On(bO,d=>Lo(l,d))||o.has(l);return{compare:r,isAttributeInternal:c}},yO=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),BF=e=>e.name==="summary",lG=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},CO=(e,n,o,r)=>{const c=o.name;for(let l=0,d=e.length;l<d;l++){const g=e[l];if(g.name===c){const h=r.nodes[c];h?h.nodes.push(o):r.nodes[c]={filter:g,nodes:[o]}}}if(o.attributes)for(let l=0,d=n.length;l<d;l++){const g=n[l],h=g.name;if(h in o.attributes.map){const y=r.attributes[h];y?y.nodes.push(o):r.attributes[h]={filter:g,nodes:[o]}}}},on=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&lG(o,c=>{CO(e,n,c,r)}),r},eh=(e,n)=>{const o=(r,c)=>{Le(r,l=>{const d=ps(l.nodes);de(l.filter.callbacks,g=>{for(let h=d.length-1;h>=0;h--){const y=d[h];(!(c?y.attr(l.filter.name)!==void 0:y.name===l.filter.name)||vn(y.parent))&&d.splice(h,1)}d.length>0&&g(d,l.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},Fl=(e,n,o,r={})=>{const c=on(e,n,o);eh(c,r)},Bu=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const l=new Fr("br",1);n.insert&&l.attr("data-mce-bogus","1"),r.empty().append(l)}else r.empty().append(new Fr("#text",3)).value=Jn},u2=e=>{var n;return d2(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===Jn},d2=(e,n)=>{const o=e==null?void 0:e.firstChild;return _e(o)&&o===e.lastChild&&o.name===n},yw=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},th=(e,n,o,r)=>r.isEmpty(n,o,c=>yw(e,c)),PF=(e,n)=>_e(e)&&(n(e)||e.name==="br"),xO=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return D.from(n)},m2=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&m2(c,n,o);e.unwrap()}},Cw=(e,n,o,r=it)=>{const c=n.getTextBlockElements(),l=n.getNonEmptyElements(),d=n.getWhitespaceElements(),g=Oe.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),h=new Set,y=w=>w!==o&&!g[w.name];for(let w=0;w<e.length;w++){const T=e[w];let k,M,P;if(!T.parent||h.has(T))continue;if(c[T.name]&&T.parent.name==="li"){let F=T.next;for(;F&&c[F.name];){F.name="li",h.add(F),T.parent.insert(F,T.parent);F=F.next}T.unwrap();continue}const B=[T];for(k=T.parent;k&&!n.isValidChild(k.name,T.name)&&y(k);k=k.parent)B.push(k);if(k&&B.length>1)if(xw(n,T,k))m2(T,n);else{B.reverse(),M=B[0].clone(),r(M);let F=M;for(let U=0;U<B.length-1;U++){n.isValidChild(F.name,B[U].name)&&U>0?(P=B[U].clone(),r(P),F.append(P)):P=F;for(let q=B[U].firstChild;q&&q!==B[U+1];){const X=q.next;P.append(q),q=X}F=P}th(n,l,d,M)?k.insert(T,B[0],!0):(k.insert(M,B[0],!0),k.insert(T,M)),k=B[0],(th(n,l,d,k)||d2(k,"br"))&&k.empty().remove()}else if(T.parent){if(T.name==="li"){let F=T.prev;if(F&&(F.name==="ul"||F.name==="ol")){F.append(T);continue}if(F=T.next,F&&(F.name==="ul"||F.name==="ol")&&F.firstChild){F.insert(T,F.firstChild,!0);continue}const U=new Fr("ul",1);r(U),T.wrap(U);continue}if(n.isValidChild(T.parent.name,"div")&&n.isValidChild("div",T.name)){const F=new Fr("div",1);r(F),T.wrap(F)}else m2(T,n)}}},IF=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},xw=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&IF(o,"a")?!0:BF(o)&&yO(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,FF=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},$F=e=>{const n=ue.fromRangeStart(e),o=ue.fromRangeEnd(e),r=e.commonAncestorContainer;return bc(!1,r,o).map(c=>!ji(n,o,r)&&ji(n,c,r)?FF(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},Sw=e=>e.collapsed?e:$F(e),SO=e=>_e(e.firstChild)&&e.firstChild===e.lastChild,wO=e=>e.name==="br"||e.value===Jn,uG=(e,n)=>e.getBlockElements()[n.name]&&SO(n)&&wO(n.firstChild),dG=(e,n)=>{const o=e.getNonEmptyElements();return _e(n)&&(n.isEmpty(o)||uG(e,n))},mG=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),dG(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},LF=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},fG=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return LF(c)},gG=e=>{var n;return gt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},HF=e=>e.data===Jn||vo(e),VF=e=>_e(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&HF(e.firstChild),hG=e=>!e.firstChild||VF(e),zF=e=>e.length>0&&hG(e[e.length-1])?e.slice(0,-1):e,Tr=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},pG=(e,n)=>!!Tr(e,n),UF=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},EO=(e,n)=>{const o=ue.before(e),c=gi(n).next(o);return c?c.toRange():null},ZF=(e,n)=>{const o=ue.after(e),c=gi(n).prev(o);return c?c.toRange():null},WF=(e,n,o,r)=>{const c=UF(e,r),l=e.parentNode;return l&&(l.insertBefore(c[0],e),Oe.each(n,d=>{l.insertBefore(d,e)}),l.insertBefore(c[1],e),l.removeChild(e)),ZF(n[n.length-1],o)},jF=(e,n,o)=>{const r=e.parentNode;return r&&Oe.each(n,c=>{r.insertBefore(c,e)}),EO(e,o)},GF=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),ZF(n[0],o)),ww=(e,n,o,r)=>{const c=fG(n,e,r),l=Tr(n,o.startContainer),d=zF(gG(c.firstChild)),g=1,h=2,y=n.getRoot(),w=T=>{const k=ue.fromRangeStart(o),M=gi(n.getRoot()),P=T===g?M.prev(k):M.next(k),B=P==null?void 0:P.getNode();return B?Tr(n,B)!==l:!0};return l?w(g)?jF(l,d,y):w(h)?GF(l,d,y,n):WF(l,d,y,o):null},bG=["pre"],qF=(e,n,o,r)=>{var c;const l=n.firstChild,d=n.lastChild,g=d.attr("data-mce-type")==="bookmark"?d.prev:d,h=l===g,y=St(bG,l.name);if(h&&y){const w=l.attr("contenteditable")!=="false",T=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===l.name,k=D.from(nf(r,o)).forall(oi);return w&&T&&k}else return!1},Ew=kp,Rn=(e,n,o)=>{if(_e(o)){const r=e.getParent(n.endContainer,Ew);return o===r&&xS(z.fromDom(o),n)}else return!1},KF=(e,n)=>{if(e.isBlock(n)&&e.isEditable(n)){const o=n.childNodes;return o.length===1&&vo(o[0])||o.length===0}else return!1},YF=(e,n,o)=>{var r;o.getAttribute("data-mce-bogus")==="all"?(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o):KF(e.dom,o)?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})},T1=(e,n,o)=>{D.from(e.getParent(n,"td,th")).map(z.fromDom).each(r=>G8(r,o))},_O=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),l=vO(e),d="*[data-mce-fragment]",g=r.select(d);Oe.each(g,h=>{const y=k=>_e(o[k.nodeName.toLowerCase()]),w=k=>k.childNodes.length===1;if((k=>!(FI(r,k)||$I(r,k)))(h)&&y(h)&&w(h)){const k=b1(r,h),M=(U,q)=>Xt(U,X=>St(q,X)),P=U=>w(h)&&r.is(U,d)&&y(U)&&(U.nodeName===h.nodeName&&M(k,b1(r,U))||P(U.children[0])),B=U=>_e(U)&&U!==c&&(l.compare(h,U)||B(U.parentElement)),F=U=>_e(U)&&U!==c&&r.is(U,d)&&(LI(r,h,U)||F(U.parentElement));(P(h.children[0])||B(h.parentElement)&&!F(h.parentElement))&&r.remove(h,!0)}})}},XF=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},JF=e=>{Oe.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},QF=e=>!!e.getAttribute("data-mce-fragment"),TO=(e,n)=>_e(n)&&!e.schema.getVoidElements()[n.nodeName],e$=(e,n)=>{var o,r,c;let l;const d=e.dom,g=e.selection;if(!n)return;g.scrollIntoView(n);const h=nf(e.getBody(),n);if(h&&d.getContentEditable(h)==="false"){d.remove(n),g.select(h);return}let y=d.createRng();const w=n.previousSibling;if(ke(w)){y.setStart(w,(r=(o=w.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const M=n.nextSibling;ke(M)&&(w.appendData(M.data),(c=M.parentNode)===null||c===void 0||c.removeChild(M))}else y.setStartBefore(n),y.setEndBefore(n);const T=M=>{let P=ue.fromRangeStart(M);return P=gi(e.getBody()).next(P),P==null?void 0:P.toRange()},k=d.getParent(n,d.isBlock);if(d.remove(n),k&&d.isEmpty(k)){const M=Ew(k);Fa(z.fromDom(k)),y.setStart(k,0),y.setEnd(k,0),!M&&!QF(k)&&(l=T(y))?(y=l,d.remove(k)):d.add(k,d.create("br",M?{}:{"data-mce-bogus":"1"}))}g.setRng(y)},vG=e=>{const n=e.dom,o=Sw(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,Ew);Rn(n,o,r)?$r(e,o,z.fromDom(r)):t$(o)||yG(o)?o.deleteContents():e.getDoc().execCommand("Delete",!1)},yG=e=>kO(e,ke),t$=e=>kO(e,S8),kO=(e,n)=>e.startContainer===e.endContainer&&e.endOffset-e.startOffset===1&&n(e.startContainer.childNodes[e.startOffset]),n$=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return D.some(n);return D.none()},o$=(e,n,o)=>{var r;return On(o.children(),yO)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},AO=(e,n,o)=>{var r,c;const l=e.selection,d=e.dom,g=e.parser,h=o.merge,y=Nu({validate:!0},e.schema),w='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=xa(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,w);let T=l.getRng();const k=T.startContainer,M=e.getBody();k===M&&l.isCollapsed()&&d.isBlock(M.firstChild)&&TO(e,M.firstChild)&&d.isEmpty(M.firstChild)&&(T=d.createRng(),T.setStart(M.firstChild,0),T.setEnd(M.firstChild,0),l.setRng(T)),l.isCollapsed()||vG(e);const P=l.getNode(),B={context:P.nodeName.toLowerCase(),data:o.data,insert:!0},F=g.parse(n,B);if(o.paste===!0&&mG(e.schema,F)&&pG(d,P))return T=ww(y,d,l.getRng(),F),T&&l.setRng(T),n;o.paste===!0&&qF(d,F,P,e.getBody())&&((r=F.firstChild)===null||r===void 0||r.unwrap()),XF(F);let U=F.lastChild;if(U&&U.attr("id")==="mce_marker"){const q=U;for(U=U.prev;U&&U.name!=="table";U=U.walk(!0))if(U.type===3||!d.isBlock(U.name)){U.parent&&e.schema.isValidChild(U.parent.name,"span")&&U.parent.insert(q,U,U.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(P),!B.invalid&&!o$(d,P,F))n=y.serialize(F),YF(e,n,P);else{e.selection.setContent(w);let q=l.getNode(),X;const te=e.getBody();for(Tp(q)?q=X=te:X=q;X&&X!==te;)q=X,X=X.parentNode;n=q===te?te.innerHTML:d.getOuterHTML(q);const he=g.parse(n),we=n$(he),Ue=we.bind(xO).getOr(he);we.each(He=>He.replace(F));const le=F.children(),se=(c=F.parent)!==null&&c!==void 0?c:he;F.unwrap();const ve=gt(le,He=>xw(e.schema,He,se));Cw(ve,e.schema,Ue),Fl(g.getNodeFilters(),g.getAttributeFilters(),he),n=y.serialize(he),q===te?d.setHTML(te,n):d.setOuterHTML(q,n)}return _O(e,h),e$(e,d.get("mce_marker")),JF(e.getBody()),T1(d,l.getStart(),e.schema),A8(e.schema,e.getBody(),l.getStart()),n},f2=e=>e instanceof Fr,Bt=e=>{jm(e)&&Ws(e.getBody()).each(n=>{const o=n.getNode(),r=El(o)?Ws(o).getOr(n):n;e.selection.setRng(r.toRange())})},g2=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&Bt(e)},k1=(e,n,o,r)=>{if(o=xa(o),o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const l=Er(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),l.toLowerCase())?(o=c,o=e.dom.createHTML(l,Gp(e),o)):o||(o=c),g2(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Nu({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=Og(z.fromDom(n))?o:Oe.trim(o);return g2(e,c,r.no_selection),{content:c,html:c}}},A1=(e,n,o,r)=>{Fl(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=Nu({validate:!1},e.schema).serialize(o),l=xa(Og(z.fromDom(n))?c:Oe.trim(c));return g2(e,l,r.no_selection),{content:o,html:l}},O1=(e,n,o)=>D.from(e.getBody()).map(r=>f2(n)?A1(e,r,n,o):k1(e,r,n,o)).getOr({content:n,html:f2(o.content)?"":o.content}),of=kS,_w=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const l=r[c];if(Cc(l)&&l.inherit===!1&&e.dom.is(n,l.selector))return!0}return!1},OO=(e,n,o,r,c)=>{const l=e.dom.getRoot();if(n===l)return!1;const d=e.dom.getParent(n,g=>_w(e,g,o)?!0:g.parentNode===l||!!Pu(e,g,o,r,!0));return!!Pu(e,d,o,r,c)},Tw=(e,n,o)=>Ss(o)&&of(n,o.inline)||Bl(o)&&of(n,o.block)?!0:Cc(o)?Ye(n)&&e.is(n,o.selector):!1,s$=(e,n,o,r,c,l)=>{const d=o[r],g=r==="attributes";if(Zt(o.onmatch))return o.onmatch(n,o,r);if(d){if(Gc(d)){for(let h=0;h<d.length;h++)if(g?e.getAttrib(n,d[h]):u1(e,n,d[h]))return!0}else for(const h in d)if(bt(d,h)){const y=g?e.getAttrib(n,h):u1(e,n,h),w=Dd(d[h],l),T=vn(y)||il(y);if(T&&vn(w))continue;if(c&&T&&!o.exact||(!c||o.exact)&&!of(y,AS(w,h)))return!1}}return!0},Pu=(e,n,o,r,c)=>{const l=e.formatter.get(o),d=e.dom;if(l&&Ye(n))for(let g=0;g<l.length;g++){const h=l[g];if(Tw(e.dom,n,h)&&s$(d,n,h,"attributes",c,r)&&s$(d,n,h,"styles",c,r)){const y=h.classes;if(y){for(let w=0;w<y.length;w++)if(!e.dom.hasClass(n,Dd(y[w],r)))return}return h}}},kw=(e,n,o,r,c)=>{if(r)return OO(e,r,n,o,c);if(r=e.selection.getNode(),OO(e,r,n,o,c))return!0;const l=e.selection.getStart();return!!(l!==r&&OO(e,l,n,o,c))},CG=(e,n,o)=>{const r=[],c={},l=e.selection.getStart();return e.dom.getParent(l,d=>{for(let g=0;g<n.length;g++){const h=n[g];!c[h]&&Pu(e,d,h,o)&&(c[h]=!0,r.push(h))}},e.dom.getRoot()),r},r$=(e,n)=>{const o=c=>Gt(c,z.fromDom(e.getBody())),r=(c,l)=>Pu(e,c.dom,l)?D.some(l):D.none();return D.from(e.selection.getStart(!0)).bind(c=>pg(z.fromDom(c),l=>Uc(n,d=>r(l,d)),o)).getOrNull()},a$=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),l=Rv(r,c);for(let d=o.length-1;d>=0;d--){const g=o[d];if(!Cc(g))return!0;for(let h=l.length-1;h>=0;h--)if(r.is(l[h],g.selector))return!0}}return!1},xG=(e,n,o)=>hs(o,(r,c)=>{const l=B7(e,c);return e.formatter.matchNode(n,c,{},l)?r.concat([c]):r},[]),D1=Cs,Gn=(e,n)=>e.importNode(n,!0),c$=e=>{if(e){const n=new Ds(e,e);for(let o=n.current();o;o=n.next())if(ke(o))return o}return null},DO=e=>{const n=z.fromTag("span");return pa(n,{id:Tv,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Mo(n,z.fromText(D1)),n},i$=e=>{const n=c$(e);return n&&n.data.charAt(0)===D1&&n.deleteData(0,1),n},sf=(e,n,o)=>{const r=e.dom,c=e.selection;if(Hn(n))ef(e,!1,z.fromDom(n),o,!0);else{const l=c.getRng(),d=r.getParent(n,r.isBlock),g=l.startContainer,h=l.startOffset,y=l.endContainer,w=l.endOffset,T=i$(n);r.remove(n,!0),g===T&&h>0&&l.setStart(T,h-1),y===T&&w>0&&l.setEnd(T,w-1),d&&r.isEmpty(d)&&xd(z.fromDom(d)),c.setRng(l)}},Aw=(e,n,o)=>{const r=e.dom,c=e.selection;if(n)sf(e,n,o);else if(n=Vm(e.getBody(),c.getStart()),!n)for(;n=r.get(Tv);)sf(e,n,o)},l$=(e,n,o)=>{var r,c;const l=e.dom,d=l.getParent(o,qe(_S,e.schema));d&&l.isEmpty(d)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(jb(z.fromDom(o)),l.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):l.insertAfter(n,o))},$l=(e,n)=>(e.appendChild(n),n),mn=(e,n)=>{var o;const r=cl(e,(l,d)=>$l(l,d.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return $l(r,c.createTextNode(D1))},ds=(e,n,o,r,c,l)=>{const d=e.formatter,g=e.dom,h=gt(bs(d.get()),T=>T!==r&&!ss(T,"removeformat")),y=xG(e,o,h);if(gt(y,T=>!P7(e,T,r)).length>0){const T=o.cloneNode(!1);return g.add(n,T),d.remove(r,c,T,l),g.remove(T),D.some(T)}else return D.none()},Gi=e=>$_(e,gg(e).replace(new RegExp(`${Jn}$`)," ")),Ll=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&pl(z.fromDom(n)).each(r=>{vr(r)?Gi(r):qC(r,c=>vr(c)).each(c=>{vr(c)&&Gi(c)})})};e.once("input",r=>{r.data&&!zm(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},Bd=(e,n,o)=>{let r;const c=e.selection,l=e.formatter.get(n);if(!l)return;const d=c.getRng();let g=d.startOffset;const y=d.startContainer.nodeValue;r=Vm(e.getBody(),c.getStart());const w=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(y&&g>0&&g<y.length&&w.test(y.charAt(g))&&w.test(y.charAt(g-1))){const T=c.getBookmark();d.collapse(!0);let k=Wm(e.dom,d,l);k=qm(k),e.formatter.apply(n,o,k),c.moveToBookmark(T)}else{let T=r?c$(r):null;(!r||(T==null?void 0:T.data)!==D1)&&(r=Gn(e.getDoc(),DO(!0).dom),T=r.firstChild,d.insertNode(r),g=1,Ll(e,r)),e.formatter.apply(n,o,r),c.setCursorLocation(T,g)}},Ow=(e,n,o,r)=>{const c=e.dom,l=e.selection;let d=!1;const g=e.formatter.get(n);if(!g)return;const h=l.getRng(),y=h.startContainer,w=h.startOffset;let T=y;ke(y)&&(w!==y.data.length&&(d=!0),T=T.parentNode);const k=[];let M;for(;T;){if(Pu(e,T,n,o,r)){M=T;break}T.nextSibling&&(d=!0),k.push(T),T=T.parentNode}if(M)if(d){const P=l.getBookmark();h.collapse(!0);let B=Wm(c,h,g,{includeTrailingSpace:!0});B=qm(B),e.formatter.remove(n,o,B,r),l.moveToBookmark(P)}else{const P=Vm(e.getBody(),M),B=_e(P)?c.getParents(M.parentNode,ze,P):[],F=DO(!1).dom;l$(e,F,P??M);const U=ds(e,F,M,n,o,r),q=mn([...k,...U.toArray(),...B],F);P&&sf(e,P,_e(P)),l.setCursorLocation(q,1),Ll(e,F),c.isEmpty(M)&&c.remove(M)}},u$=(e,n,o)=>{const r=e.selection,c=e.getBody();Aw(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===D1&&Aw(e,Vm(c,r.getStart()),!0),(n===37||n===39)&&Aw(e,Vm(c,r.getStart()),!0)},d$=e=>ke(e)&&td(e.data,Jn),m$=e=>{e.on("mouseup keydown",n=>{u$(e,n.keyCode,d$(e.selection.getRng().endContainer))})},MO=e=>{const n=DO(!1),o=mn(e,n.dom);return{caretContainer:n,caretPosition:ue(o,0)}},Dw=(e,n)=>{const{caretContainer:o,caretPosition:r}=MO(n);return yr(z.fromDom(e),o),v(z.fromDom(e)),r},M1=(e,n)=>{const{caretContainer:o,caretPosition:r}=MO(n);return e.insertNode(o.dom),r},Mw=(e,n)=>{if(vc(n.dom))return!1;const o=e.schema.getTextInlineElements();return bt(o,un(n))&&!vc(n.dom)&&!Sm(n.dom)},nh={},RO=uc(["pre"]),f$=(e,n)=>{nh[e]||(nh[e]=[]),nh[e].push(n)},g$=(e,n)=>{bt(nh,e)&&de(nh[e],o=>{o(n)})};f$("pre",e=>{const n=e.selection.getRng(),o=c=>l=>{const d=l.previousSibling;return RO(d)&&St(c,d)},r=(c,l)=>{const d=z.fromDom(l),g=gl(d).dom;v(d),Cl(z.fromDom(c),[z.fromTag("br",g),z.fromTag("br",g),...Os(d)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),l=gt(gt(c,RO),o(c));de(l,d=>{r(d.previousSibling,d)})}});const Rw=["fontWeight","fontStyle","color","fontSize","fontFamily"],h$=e=>Ot(e.styles)&&On(bs(e.styles),n=>St(Rw,n)),p$=e=>mo(e,n=>Ss(n)&&n.inline==="span"&&h$(n)),NO=(e,n)=>{const o=e.get(n);return Kn(o)?p$(o):D.none()},BO=(e,n)=>Jr(n,ue.fromRangeStart(e)).isNone(),h2=(e,n)=>Qo(n,ue.fromRangeEnd(e)).exists(o=>!vo(o.getNode())||Qo(n,o).isSome())===!1,Nw=e=>n=>Ob(n)&&e.isEditable(n),p2=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return BO(o,n[0])&&h2(o,n[0])?n:[];{const r=$o(n).filter(d=>BO(o,d)).toArray(),c=mr(n).filter(d=>h2(o,d)).toArray(),l=n.slice(1,-1);return r.concat(l).concat(c)}},SG=e=>gt(p2(e),Nw(e.dom)),ws=e=>gt(e.getSelectedBlocks(),Nw(e.dom)),Bw=Oe.each,PO=e=>Ye(e)&&!yc(e)&&!vc(e)&&!Sm(e),IO=(e,n)=>{for(let o=e;o;o=o[n]){if(ke(o)&&tn(o.data))return e;if(Ye(o)&&!yc(o))return o}return e},FO=(e,n,o)=>{const r=vO(e),c=wl(n)&&e.dom.isEditable(n),l=wl(o)&&e.dom.isEditable(o);if(c&&l){const d=IO(n,"previousSibling"),g=IO(o,"nextSibling");if(r.compare(d,g)){for(let h=d.nextSibling;h&&h!==g;){const y=h;h=h.nextSibling,d.appendChild(y)}return e.dom.remove(g),Oe.each(Oe.grep(g.childNodes),h=>{d.appendChild(h)}),d}}return o},$O=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const l=(c=FO(e,Uk(r),r))!==null&&c!==void 0?c:r;FO(e,l,Uk(l,!0))}},b$=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";Bw(e.select(r,o),c=>{PO(c)&&e.isEditable(c)&&Bw(n.styles,(l,d)=>{e.setStyle(c,d,"")})})}},b2=(e,n,o)=>{Bw(e.childNodes,r=>{PO(r)&&(n(r)&&o(r),r.hasChildNodes()&&b2(r,n,o))})},R1=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},LO=(e,n)=>o=>!!(o&&u1(e,o,n)),Pw=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),R1(e,r)},rf=Ys.generate([{keep:[]},{rename:["name"]},{removed:[]}]),af=/^(src|href|style)$/,v2=Oe.each,N1=kS,HO=e=>/^(TR|TH|TD)$/.test(e.nodeName),Iw=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),Fw=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(Ye(r)){const l=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>l?l:c]}return ke(r)&&o&&c>=r.data.length&&(r=new Ds(r,e.getBody()).next()||r),ke(r)&&!o&&c===0&&(r=new Ds(r,e.getBody()).prev()||r),r},VO=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return HO(e)&&r?e.nodeName==="TR"&&r[o]||r:e},y2=(e,n,o,r)=>{var c;const l=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(l,n),l.appendChild(n),l},zO=(e,n,o,r,c)=>{const l=z.fromDom(n),d=z.fromDom(e.create(r,c)),g=o?ib(l):pp(l);return Cl(d,g),o?(yr(l,d),vm(d,l)):(Li(l,d),Mo(d,l)),d.dom},v$=(e,n)=>n.links&&e.nodeName==="A",UO=(e,n,o)=>{const r=n.parentNode;let c;const l=e.dom,d=Er(e);Bl(o)&&r===l.getRoot()&&(!o.list_block||!N1(n,o.list_block))&&de(ps(n.childNodes),g=>{Kg(e,d,g.nodeName.toLowerCase())?c?c.appendChild(g):(c=y2(l,g,d),l.setAttribs(c,Gp(e))):c=null}),!($7(o)&&!N1(o.inline,n))&&l.remove(n,!0)},ZO=(e,n,o)=>jo(e)?{name:n,value:null}:{name:e,value:Dd(n,o)},WO=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},y$=(e,n,o,r,c)=>{let l=!1;v2(o.styles,(d,g)=>{const{name:h,value:y}=ZO(g,d,r),w=AS(y,h);(o.remove_similar||Y(y)||!Ye(c)||N1(u1(e,c,h),w))&&e.setStyle(n,h,""),l=!0}),l&&WO(e,n)},C$=(e,n,o)=>{n==="removeformat"?de(ws(e.selection),r=>{de(Rw,c=>e.dom.setStyle(r,c,"")),WO(e.dom,r)}):NO(e.formatter,n).each(r=>{de(ws(e.selection),c=>y$(e.dom,c,r,o,null))})},jO=(e,n,o,r,c)=>{const l=e.dom,d=vO(e),g=e.schema;if(Ss(n)&&Cg(g,n.inline)&&ri(g,r)&&r.parentElement===e.getBody())return UO(e,r,n),rf.removed();if(!n.ceFalseOverride&&r&&l.getContentEditableParent(r)==="false"||r&&!Tw(l,r,n)&&!v$(r,n))return rf.keep();const h=r,y=n.preserve_attributes;if(Ss(n)&&n.remove==="all"&&Kn(y)){const w=gt(l.getAttribs(h),T=>St(y,T.name.toLowerCase()));if(l.removeAllAttribs(h),de(w,T=>l.setAttrib(h,T.name,T.value)),w.length>0)return rf.rename("span")}if(n.remove!=="all"){y$(l,h,n,o,c),v2(n.attributes,(T,k)=>{const{name:M,value:P}=ZO(k,T,o);if(n.remove_similar||Y(P)||!Ye(c)||N1(l.getAttrib(c,M),P)){if(M==="class"){const B=l.getAttrib(h,M);if(B){let F="";if(de(B.split(/\s+/),U=>{/mce\-\w+/.test(U)&&(F+=(F?" ":"")+U)}),F){l.setAttrib(h,M,F);return}}}if(af.test(M)&&h.removeAttribute("data-mce-"+M),M==="style"&&uc(["li"])(h)&&l.getStyle(h,"list-style-type")==="none"){h.removeAttribute(M),l.setStyle(h,"list-style-type","none");return}M==="class"&&h.removeAttribute("className"),h.removeAttribute(M)}}),v2(n.classes,T=>{T=Dd(T,o),(!Ye(c)||l.hasClass(c,T))&&l.removeClass(h,T)});const w=l.getAttribs(h);for(let T=0;T<w.length;T++){const k=w[T].nodeName;if(!d.isAttributeInternal(k))return rf.keep()}}return n.remove!=="none"?(UO(e,h,n),rf.removed()):rf.keep()},wG=(e,n,o,r,c)=>{let l;return n.parentNode&&de(Rv(e.dom,n.parentNode).reverse(),d=>{if(!l&&Ye(d)&&d.id!=="_start"&&d.id!=="_end"){const g=Pu(e,d,o,r,c);g&&g.split!==!1&&(l=d)}}),l},x$=(e,n,o,r)=>jO(e,n,o,r,r).fold(Ve(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),Ve(null)),$w=(e,n,o,r,c,l,d,g)=>{var h,y;let w,T;const k=e.dom;if(o){const M=o.parentNode;for(let P=r.parentNode;P&&P!==M;P=P.parentNode){let B=k.clone(P,!1);for(let F=0;F<n.length&&(B=x$(e,n[F],g,B),B!==null);F++);B&&(w&&B.appendChild(w),T||(T=B),w=B)}(!d.mixed||!k.isBlock(o))&&(r=(h=k.split(o,r))!==null&&h!==void 0?h:r),w&&T&&((y=c.parentNode)===null||y===void 0||y.insertBefore(w,c),T.appendChild(c),Ss(d)&&$O(e,d,g,w))}return r},Lw=(e,n,o,r,c)=>{const l=e.formatter.get(n),d=l[0],g=e.dom,h=e.selection,y=B=>{const F=wG(e,B,n,o,c);return $w(e,l,F,B,B,!0,d,o)},w=B=>yc(B)&&Ye(B)&&(B.id==="_start"||B.id==="_end"),T=B=>On(l,F=>C2(e,F,o,B,B)),k=B=>{const F=ps(B.childNodes),q=T(B)||On(l,he=>Tw(g,B,he)),X=B.parentNode;if(!q&&_e(X)&&DS(d)&&T(X),d.deep&&F.length)for(let he=0;he<F.length;he++)k(F[he]);de(["underline","line-through","overline"],he=>{Ye(B)&&e.dom.getStyle(B,"text-decoration")===he&&B.parentNode&&Wk(g,B.parentNode)===he&&C2(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:he}},void 0,B)})},M=B=>{const F=g.get(B?"_start":"_end");if(F){let U=F[B?"firstChild":"lastChild"];return w(U)&&(U=U[B?"firstChild":"lastChild"]),ke(U)&&U.data.length===0&&(U=B?F.previousSibling||F.nextSibling:F.nextSibling||F.previousSibling),g.remove(F,!0),U}else return null},P=B=>{let F,U,q=Wm(g,B,l,{includeTrailingSpace:B.collapsed});if(d.split){if(q=qm(q),F=Fw(e,q,!0),U=Fw(e,q),F!==U){if(F=VO(F,!0),U=VO(U,!1),Iw(g,F,U)){const te=D.from(F.firstChild).getOr(F);y(zO(g,te,!0,"span",{id:"_start","data-mce-type":"bookmark"})),M(!0);return}if(Iw(g,U,F)){const te=D.from(U.lastChild).getOr(U);y(zO(g,te,!1,"span",{id:"_end","data-mce-type":"bookmark"})),M(!1);return}F=y2(g,F,"span",{id:"_start","data-mce-type":"bookmark"}),U=y2(g,U,"span",{id:"_end","data-mce-type":"bookmark"});const X=g.createRng();X.setStartAfter(F),X.setEndBefore(U),Kt(g,X,te=>{de(te,he=>{!yc(he)&&!yc(he.parentNode)&&y(he)})}),y(F),y(U),F=M(!0),U=M()}else F=U=y(F);q.startContainer=F.parentNode?F.parentNode:F,q.startOffset=g.nodeIndex(F),q.endContainer=U.parentNode?U.parentNode:U,q.endOffset=g.nodeIndex(U)+1}Kt(g,q,X=>{de(X,k)})};if(r){if(Um(r)){const B=g.createRng();B.setStartBefore(r),B.setEndAfter(r),P(B)}else P(r);FT(e,n,r,o);return}!h.isCollapsed()||!Ss(d)||Du(e).length?(zk(e,()=>wS(e,P),B=>Ss(d)&&kw(e,n,o,B)),e.nodeChanged()):Ow(e,n,o,c),C$(e,n,o),FT(e,n,r,o)},GO=(e,n,o,r,c)=>{(r||e.selection.isEditable())&&Lw(e,n,o,r,c)},C2=(e,n,o,r,c)=>jO(e,n,o,r,c).fold(Ce,l=>(e.dom.rename(r,l),!0),ze),qO=Oe.each,S$=(e,n,o,r)=>{const c=l=>{if(wl(l)&&Ye(l.parentNode)&&e.isEditable(l)){const d=Wk(e,l.parentNode);e.getStyle(l,"color")&&d?e.setStyle(l,"text-decoration",d):e.getStyle(l,"text-decoration")===d&&e.setStyle(l,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Oe.walk(r,c,"childNodes"),c(r))},w$=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=LO(e,"fontSize");b2(r,l=>c(l)&&e.isEditable(l),Pw(e,"backgroundColor",Dd(n.styles.backgroundColor,o)))}},E$=(e,n,o,r)=>{if(Ss(n)&&(n.inline==="sub"||n.inline==="sup")){const c=LO(e,"fontSize");b2(r,d=>c(d)&&e.isEditable(d),Pw(e,"fontSize",""));const l=gt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(l,!0)}},_$=(e,n,o,r)=>{qO(n,c=>{Ss(c)&&qO(e.dom.select(c.inline,r),l=>{PO(l)&&C2(e,c,o,l,c.exact?l:null)}),b$(e.dom,c,r)})},T$=(e,n,o,r,c)=>{const l=c.parentNode;Pu(e,l,o,r)&&C2(e,n,r,c)||n.merge_with_parents&&l&&e.dom.getParent(l,d=>Pu(e,d,o,r)?(C2(e,n,r,c),!0):!1)},x2=Oe.each,KO=(e,n,o,r)=>{if(GT(e)&&Ss(n)&&o.parentNode){const c=$b(e.schema),l=Sp(z.fromDom(o),d=>vc(d.dom));return tu(c,r)&&Tl(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!l}else return!1},YO=(e,n,o,r)=>{if(x2(o.styles,(c,l)=>{e.setStyle(n,l,Dd(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},k$=(e,n,o,r)=>{const c=e.formatter.get(n),l=c[0],d=!r&&e.selection.isCollapsed(),g=e.dom,h=e.selection,y=(P,B=l)=>{Zt(B.onformat)&&B.onformat(P,B,o,r),YO(g,P,B,o),x2(B.attributes,(F,U)=>{g.setAttrib(P,U,Dd(F,o))}),x2(B.classes,F=>{const U=Dd(F,o);g.hasClass(P,U)||g.addClass(P,U)})},w=(P,B)=>{let F=!1;return x2(P,U=>Cc(U)?g.getContentEditable(B)==="false"&&!U.ceFalseOverride||_e(U.collapsed)&&U.collapsed!==d?!0:g.is(B,U.selector)&&!vc(B)?(y(B,U),F=!0,!1):!0:!1),F},T=P=>{if(ee(P)){const B=g.create(P);return y(B),B}else return null},k=(P,B,F)=>{const U=[];let q=!0;const X=l.inline||l.block,te=T(X),he=le=>I7(l)&&Pu(e,le,n,o),we=(le,se,ve)=>{const He=F7(l)&&_S(e.schema,le)&&Kg(e,se,X);return ve&&He},Ue=(le,se,ve,He)=>{const nt=le.nodeName.toLowerCase(),It=Kg(e,X,nt)&&Kg(e,se,X),$t=!F&&ke(le)&&Gb(le.data),fn=vc(le),En=!Ss(l)||!P.isBlock(le);return(ve||He)&&It&&!$t&&!fn&&En};Kt(P,B,le=>{let se;const ve=He=>{let nt=!1,It=q,$t=!1;const fn=He.parentNode,En=fn.nodeName.toLowerCase(),so=P.getContentEditable(He);_e(so)&&(It=q,q=so==="true",nt=!0,$t=Zk(e,He));const ns=q&&!nt;if(vo(He)&&!KO(e,l,He,En)){se=null,Bl(l)&&P.remove(He);return}if(he(He)){se=null;return}if(we(He,En,ns)){const fs=P.rename(He,X);y(fs),U.push(fs),se=null;return}if(Cc(l)){let fs=w(c,He);if(!fs&&_e(fn)&&DS(l)&&(fs=w(c,fn)),!Ss(l)||fs){se=null;return}}_e(te)&&Ue(He,En,ns,$t)?(se||(se=P.clone(te,!1),fn.insertBefore(se,He),U.push(se)),$t&&nt&&(q=It),se.appendChild(He)):(se=null,de(ps(He.childNodes),ve),nt&&(q=It),se=null)};de(le,ve)}),l.links===!0&&de(U,le=>{const se=ve=>{ve.nodeName==="A"&&y(ve,l),de(ps(ve.childNodes),se)};se(le)}),de(U,le=>{const se=nt=>{let It=0;return de(nt.childNodes,$t=>{!Zm($t)&&!yc($t)&&It++}),It},ve=nt=>mo(nt.childNodes,ES).filter($t=>P.getContentEditable($t)!=="false"&&Tw(P,$t,l)).map($t=>{const fn=P.clone($t,!1);return y(fn),P.replace(fn,nt,!0),P.remove($t,!0),fn}).getOr(nt),He=se(le);if((U.length>1||!P.isBlock(le))&&He===0){P.remove(le,!0);return}(Ss(l)||Bl(l)&&l.wrapper)&&(!l.exact&&He===1&&(le=ve(le)),_$(e,c,o,le),T$(e,l,n,o,le),w$(P,l,o,le),S$(P,l,o,le),E$(P,l,o,le),$O(e,l,o,le))})},M=Um(r)?r:h.getNode();if(g.getContentEditable(M)==="false"&&!Zk(e,M)){r=M,w(c,r),Td(e,n,r,o);return}if(l){if(r)if(Um(r)){if(!w(c,r)){const P=g.createRng();P.setStartBefore(r),P.setEndAfter(r),k(g,Wm(g,P,c),!0)}}else k(g,r,!0);else!d||!Ss(l)||Du(e).length?(h.setRng(Sw(h.getRng())),zk(e,()=>{wS(e,(P,B)=>{const F=B?P:Wm(g,P,c);k(g,F,!1)})},ze),e.nodeChanged()):Bd(e,n,o),NO(e.formatter,n).each(P=>{de(SG(e.selection),B=>YO(g,B,P,o))});g$(n,e)}Td(e,n,r,o)},Hl=(e,n,o,r)=>{(r||e.selection.isEditable())&&k$(e,n,o,r)},XO=e=>bt(e,"vars"),JO=(e,n)=>{e.set({}),n.on("NodeChange",o=>{Vw(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=D.from(o.node).map(c=>Um(c)?c:c.startContainer).bind(c=>Ye(c)?D.some(c):D.from(c.parentElement)).getOrThunk(()=>QO(n));Vw(n,r,e.get())})},QO=e=>e.selection.getStart(),e5=(e,n,o,r,c)=>em(n,g=>{const h=e.formatter.matchNode(g,o,c??{},r);return!To(h)},g=>_w(e,g,o)?!0:r?!1:_e(e.formatter.matchNode(g,o,c,!0))),Hw=(e,n)=>{const o=n??QO(e);return gt(Rv(e.dom,o),r=>Ye(r)&&!Sm(r))},Vw=(e,n,o)=>{const r=Hw(e,n);Le(o,(c,l)=>{const d=g=>{const h=e5(e,r,l,g.similar,XO(g)?g.vars:void 0),y=h.isSome();if(g.state.get()!==y){g.state.set(y);const w=h.getOr(n);XO(g)?g.callback(y,{node:w,format:l,parents:r}):de(g.callbacks,T=>T(y,{node:w,format:l,parents:r}))}};de([c.withSimilar,c.withoutSimilar],d),de(c.withVars,d)})},t5=(e,n,o,r,c,l)=>{const d=n.get();de(o.split(","),g=>{const h=zn(d,g).getOrThunk(()=>{const w={withSimilar:{state:fo(!1),similar:!0,callbacks:[]},withoutSimilar:{state:fo(!1),similar:!1,callbacks:[]},withVars:[]};return d[g]=w,w}),y=()=>{const w=Hw(e);return e5(e,w,g,c,l).isSome()};if(To(l)){const w=c?h.withSimilar:h.withoutSimilar;w.callbacks.push(r),w.callbacks.length===1&&w.state.set(y())}else h.withVars.push({state:fo(y()),similar:c,vars:l,callback:r})}),n.set(d)},n5=(e,n,o)=>{const r=e.get();de(n.split(","),c=>zn(r,c).each(l=>{r[c]={withSimilar:{...l.withSimilar,callbacks:gt(l.withSimilar.callbacks,d=>d!==o)},withoutSimilar:{...l.withoutSimilar,callbacks:gt(l.withoutSimilar.callbacks,d=>d!==o)},withVars:gt(l.withVars,d=>d.callback!==o)}})),e.set(r)},A$=(e,n,o,r,c,l)=>(t5(e,n,o,r,c,l),{unbind:()=>n5(n,o,r)}),O$=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(kw(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?GO(e,n,o,r):Hl(e,n,o,r))},o5=Oe.explode,s5=()=>{const e={};return{addFilter:(c,l)=>{de(o5(c),d=>{bt(e,d)||(e[d]={name:d,callbacks:[]}),e[d].callbacks.push(l)})},getFilters:()=>nm(e),removeFilter:(c,l)=>{de(o5(c),d=>{if(bt(e,d))if(_e(l)){const g=e[d],h=gt(g.callbacks,y=>y!==l);h.length>0?g.callbacks=h:delete e[d]}else delete e[d]})}}},D$=(e,n)=>{de(n,o=>{e.attr(o,null)})},cf=(e,n,o)=>{e.addNodeFilter("font",r=>{de(r,c=>{const l=n.parse(c.attr("style")),d=c.attr("color"),g=c.attr("face"),h=c.attr("size");d&&(l.color=d),g&&(l["font-family"]=g),h&&Fi(h).each(y=>{l["font-size"]=o[y-1]}),c.name="span",c.attr("style",n.serialize(l)),D$(c,["color","face","size"])})})},r5=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";de(r,l=>{if(c)l.name="s";else{const d=o.parse(l.attr("style"));d["text-decoration"]="line-through",l.name="span",l.attr("style",o.serialize(d))}})})},a5=(e,n,o)=>{var r;const c=Al();n.convert_fonts_to_spans&&cf(e,c,Oe.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),r5(e,o,c)},M$=(e,n,o)=>{n.inline_styles&&a5(e,n,o)},zw=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),R$=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},Uw=e=>{try{return decodeURIComponent(e)}catch{return e}},S2=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const l=c[2]===";base64",d=Uw(r),g=l?R$(d):d;return D.some({type:c[1],data:g,base64Encoded:l})}else return D.none()},c5=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return D.none()}const c=new Uint8Array(r.length);for(let l=0;l<c.length;l++)c[l]=r.charCodeAt(l);return D.some(new Blob([c],{type:e}))},N$=e=>new Promise((n,o)=>{S2(e).bind(({type:r,data:c,base64Encoded:l})=>c5(r,c,l)).fold(()=>o("Invalid data URI"),n)}),w2=e=>Lo(e,"blob:")?zw(e):Lo(e,"data:")?N$(e):Promise.reject("Unknown URI format"),i5=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let Zw=0;const B$=e=>"blobid"+Zw++,Ww=(e,n,o)=>S2(e).bind(({data:r,type:c,base64Encoded:l})=>{if(n&&!l)return D.none();{const d=l?r:btoa(r);return o(d,c)}}),jw=(e,n,o)=>{const r=e.create(B$(),n,o);return e.add(r),r},E2=(e,n,o=!1)=>Ww(n,o,(r,c)=>D.from(e.getByData(r,c)).orThunk(()=>c5(c,r).map(l=>jw(e,l,r)))),l5=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(Lo(n,"blob:")){const r=e.getByUri(n);return _e(r)?Promise.resolve(r):w2(n).then(c=>i5(c).then(l=>Ww(l,!1,d=>D.some(jw(e,c,d))).getOrThunk(o)))}else return Lo(n,"data:")?E2(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},Gw=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,P$=e=>D.from(e.match(Gw)).bind(n=>nc(n,1)).map(n=>Lo(n,"www.")?n.substring(4):n),u5=(e,n)=>{D.from(e.attr("src")).bind(P$).forall(o=>!St(n,o))&&e.attr("sandbox","")},qw=(e,n)=>Lo(e,`${n}/`),Ga=e=>To(e)?"iframe":qw(e,"image")?"img":qw(e,"video")?"video":qw(e,"audio")?"audio":"iframe",d5=({type:e,src:n,width:o,height:r}={},c,l)=>{const d=Ga(e),g=new Fr(d,1);return g.attr(d==="audio"?{src:n}:{src:n,width:o,height:r}),(d==="audio"||d==="video")&&g.attr("controls",""),d==="iframe"&&c&&u5(g,l),g},I$=e=>_e(e.attr("data-mce-bogus")),m5=e=>e.attr("src")===rn.transparentSrc||_e(e.attr("data-mce-placeholder")),F$=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const l=c.attr("src");m5(c)||I$(c)||vn(l)||E2(o,l,!0).each(d=>{c.attr("src",d.blobUri())})};e.addAttributeFilter("src",c=>de(c,r))}},$$=(e,n)=>{var o,r;const c=e.schema;e.addAttributeFilter("href",h=>{let y=h.length;const w=k=>k.split(" ").filter(P=>P.length>0).concat(["noopener"]).sort().join(" "),T=k=>{const M=k?Oe.trim(k):"";return/\b(noopener)\b/g.test(M)?M:w(M)};if(!n.allow_unsafe_link_target)for(;y--;){const k=h[y];k.name==="a"&&k.attr("target")==="_blank"&&k.attr("rel",T(k.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",h=>{let y=h.length,w,T,k,M;for(;y--;)if(M=h[y],M.name==="a"&&M.firstChild&&!M.attr("href"))for(k=M.parent,w=M.lastChild;w&&k;)T=w.prev,k.insert(w,M),w=T}),n.fix_list_elements&&e.addNodeFilter("ul,ol",h=>{let y=h.length,w,T;for(;y--;)if(w=h[y],T=w.parent,T&&(T.name==="ul"||T.name==="ol"))if(w.prev&&w.prev.name==="li")w.prev.append(w);else{const k=new Fr("li",1);k.attr("style","list-style-type: none"),w.wrap(k)}});const l=c.getValidClasses();n.validate&&l&&e.addAttributeFilter("class",h=>{var y;let w=h.length;for(;w--;){const T=h[w],k=(y=T.attr("class"))!==null&&y!==void 0?y:"",M=Oe.explode(k," ");let P="";for(let B=0;B<M.length;B++){const F=M[B];let U=!1,q=l["*"];q&&q[F]&&(U=!0),q=l[T.name],!U&&q&&q[F]&&(U=!0),U&&(P&&(P+=" "),P+=F)}P.length||(P=null),T.attr("class",P)}}),F$(e,n);const d=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,g=Ni((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",h=>de(h,y=>{y.replace(d5({type:y.attr("type"),src:y.name==="object"?y.attr("data"):y.attr("src"),width:y.attr("width"),height:y.attr("height")},d,g))})),d&&e.addNodeFilter("iframe",h=>de(h,y=>u5(y,g)))};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:f5,setPrototypeOf:lf,isFrozen:oh,getPrototypeOf:EG,getOwnPropertyDescriptor:L$}=Object;let{freeze:_a,seal:Es,create:g5}=Object,{apply:Kw,construct:sh}=typeof Reflect<"u"&&Reflect;_a||(_a=function(n){return n}),Es||(Es=function(n){return n}),Kw||(Kw=function(n,o,r){return n.apply(o,r)}),sh||(sh=function(n,o){return new n(...o)});const _2=ka(Array.prototype.forEach),Yw=ka(Array.prototype.lastIndexOf),T2=ka(Array.prototype.pop),rh=ka(Array.prototype.push),H$=ka(Array.prototype.splice),Xw=ka(String.prototype.toLowerCase),Vl=ka(String.prototype.toString),h5=ka(String.prototype.match),B1=ka(String.prototype.replace),V$=ka(String.prototype.indexOf),Vt=ka(String.prototype.trim),qi=ka(Object.prototype.hasOwnProperty),Ta=ka(RegExp.prototype.test),ah=z$(TypeError);function ka(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return Kw(e,n,r)}}function z$(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return sh(e,o)}}function Rt(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Xw;lf&&lf(e,null);let r=n.length;for(;r--;){let c=n[r];if(typeof c=="string"){const l=o(c);l!==c&&(oh(n)||(n[r]=l),c=l)}e[c]=!0}return e}function U$(e){for(let n=0;n<e.length;n++)qi(e,n)||(e[n]=null);return e}function uf(e){const n=g5(null);for(const[o,r]of f5(e))qi(e,o)&&(Array.isArray(r)?n[o]=U$(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=uf(r):n[o]=r);return n}function P1(e,n){for(;e!==null;){const r=L$(e,n);if(r){if(r.get)return ka(r.get);if(typeof r.value=="function")return ka(r.value)}e=EG(e)}function o(){return null}return o}const p5=_a(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),qn=_a(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),k2=_a(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),b5=_a(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Jw=_a(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),v5=_a(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),y5=_a(["#text"]),zl=_a(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),I1=_a(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),C5=_a(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),A2=_a(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Qw=Es(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Z$=Es(/<%[\w\W]*|[\w\W]*%>/gm),W$=Es(/\$\{[\w\W]*/gm),es=Es(/^data-[\-\w.\u00B7-\uFFFF]+$/),j$=Es(/^aria-[\-\w]+$/),Iu=Es(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G$=Es(/^(?:\w+script|data):/i),q$=Es(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),x5=Es(/^html$/i),K$=Es(/^[a-z][.\w]*(-[.\w]+)+$/i);var S5=Object.freeze({__proto__:null,ARIA_ATTR:j$,ATTR_WHITESPACE:q$,CUSTOM_ELEMENT:K$,DATA_ATTR:es,DOCTYPE_NAME:x5,ERB_EXPR:Z$,IS_ALLOWED_URI:Iu,IS_SCRIPT_OR_DATA:G$,MUSTACHE_EXPR:Qw,TMPLIT_EXPR:W$});const F1={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Y$=function(){return typeof window>"u"?null:window},X$=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const c="data-tt-policy-suffix";o&&o.hasAttribute(c)&&(r=o.getAttribute(c));const l="dompurify"+(r?"#"+r:"");try{return n.createPolicy(l,{createHTML(d){return d},createScriptURL(d){return d}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}},w5=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function $1(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Y$();const n=Yt=>$1(Yt);if(n.version="3.2.4",n.removed=[],!e||!e.document||e.document.nodeType!==F1.document||!e.Element)return n.isSupported=!1,n;let{document:o}=e;const r=o,c=r.currentScript,{DocumentFragment:l,HTMLTemplateElement:d,Node:g,Element:h,NodeFilter:y,NamedNodeMap:w=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:T,DOMParser:k,trustedTypes:M}=e,P=h.prototype,B=P1(P,"cloneNode"),F=P1(P,"remove"),U=P1(P,"nextSibling"),q=P1(P,"childNodes"),X=P1(P,"parentNode");if(typeof d=="function"){const Yt=o.createElement("template");Yt.content&&Yt.content.ownerDocument&&(o=Yt.content.ownerDocument)}let te,he="";const{implementation:we,createNodeIterator:Ue,createDocumentFragment:le,getElementsByTagName:se}=o,{importNode:ve}=r;let He=w5();n.isSupported=typeof f5=="function"&&typeof X=="function"&&we&&we.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:nt,ERB_EXPR:It,TMPLIT_EXPR:$t,DATA_ATTR:fn,ARIA_ATTR:En,IS_SCRIPT_OR_DATA:so,ATTR_WHITESPACE:ns,CUSTOM_ELEMENT:fs}=S5;let{IS_ALLOWED_URI:Be}=S5,et=null;const ln=Rt({},[...p5,...qn,...k2,...Jw,...y5]);let gn=null;const fe=Rt({},[...zl,...I1,...C5,...A2]);let Ee=Object.seal(g5(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Qe=null,Ft=null,Wt=!0,yn=!0,Fc=!1,Gl=!0,Or=!1,oa=!0,Xa=!1,ur=!1,zr=!1,$c=!1,Yd=!1,at=!1,en=!0,Co=!1;const Zo="user-content-";let gs=!0,Wo=!1,ro={},ao=null;const Ur=Rt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ki=null;const ql=Rt({},["audio","video","img","source","image","track"]);let nl=null;const Kh=Rt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Vf="http://www.w3.org/1998/Math/MathML",qu="http://www.w3.org/2000/svg",Lc="http://www.w3.org/1999/xhtml";let Ku=Lc,F0=!1,Yh=null;const DB=Rt({},[Vf,qu,Lc],Vl);let Xh=Rt({},["mi","mo","mn","ms","mtext"]),Jh=Rt({},["annotation-xml"]);const MB=Rt({},["title","style","font","a","script"]);let Qh=null;const Kl=["application/xhtml+xml","text/html"],zf="text/html";let Q=null,oe=null;const Re=o.createElement("form"),Te=function(re){return re instanceof RegExp||re instanceof Function},mt=function(){let re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(oe&&oe===re)){if((!re||typeof re!="object")&&(re={}),re=uf(re),Qh=Kl.indexOf(re.PARSER_MEDIA_TYPE)===-1?zf:re.PARSER_MEDIA_TYPE,Q=Qh==="application/xhtml+xml"?Vl:Xw,et=qi(re,"ALLOWED_TAGS")?Rt({},re.ALLOWED_TAGS,Q):ln,gn=qi(re,"ALLOWED_ATTR")?Rt({},re.ALLOWED_ATTR,Q):fe,Yh=qi(re,"ALLOWED_NAMESPACES")?Rt({},re.ALLOWED_NAMESPACES,Vl):DB,nl=qi(re,"ADD_URI_SAFE_ATTR")?Rt(uf(Kh),re.ADD_URI_SAFE_ATTR,Q):Kh,ki=qi(re,"ADD_DATA_URI_TAGS")?Rt(uf(ql),re.ADD_DATA_URI_TAGS,Q):ql,ao=qi(re,"FORBID_CONTENTS")?Rt({},re.FORBID_CONTENTS,Q):Ur,Qe=qi(re,"FORBID_TAGS")?Rt({},re.FORBID_TAGS,Q):{},Ft=qi(re,"FORBID_ATTR")?Rt({},re.FORBID_ATTR,Q):{},ro=qi(re,"USE_PROFILES")?re.USE_PROFILES:!1,Wt=re.ALLOW_ARIA_ATTR!==!1,yn=re.ALLOW_DATA_ATTR!==!1,Fc=re.ALLOW_UNKNOWN_PROTOCOLS||!1,Gl=re.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Or=re.SAFE_FOR_TEMPLATES||!1,oa=re.SAFE_FOR_XML!==!1,Xa=re.WHOLE_DOCUMENT||!1,$c=re.RETURN_DOM||!1,Yd=re.RETURN_DOM_FRAGMENT||!1,at=re.RETURN_TRUSTED_TYPE||!1,zr=re.FORCE_BODY||!1,en=re.SANITIZE_DOM!==!1,Co=re.SANITIZE_NAMED_PROPS||!1,gs=re.KEEP_CONTENT!==!1,Wo=re.IN_PLACE||!1,Be=re.ALLOWED_URI_REGEXP||Iu,Ku=re.NAMESPACE||Lc,Xh=re.MATHML_TEXT_INTEGRATION_POINTS||Xh,Jh=re.HTML_INTEGRATION_POINTS||Jh,Ee=re.CUSTOM_ELEMENT_HANDLING||{},re.CUSTOM_ELEMENT_HANDLING&&Te(re.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ee.tagNameCheck=re.CUSTOM_ELEMENT_HANDLING.tagNameCheck),re.CUSTOM_ELEMENT_HANDLING&&Te(re.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ee.attributeNameCheck=re.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),re.CUSTOM_ELEMENT_HANDLING&&typeof re.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ee.allowCustomizedBuiltInElements=re.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Or&&(yn=!1),Yd&&($c=!0),ro&&(et=Rt({},y5),gn=[],ro.html===!0&&(Rt(et,p5),Rt(gn,zl)),ro.svg===!0&&(Rt(et,qn),Rt(gn,I1),Rt(gn,A2)),ro.svgFilters===!0&&(Rt(et,k2),Rt(gn,I1),Rt(gn,A2)),ro.mathMl===!0&&(Rt(et,Jw),Rt(gn,C5),Rt(gn,A2))),re.ADD_TAGS&&(et===ln&&(et=uf(et)),Rt(et,re.ADD_TAGS,Q)),re.ADD_ATTR&&(gn===fe&&(gn=uf(gn)),Rt(gn,re.ADD_ATTR,Q)),re.ADD_URI_SAFE_ATTR&&Rt(nl,re.ADD_URI_SAFE_ATTR,Q),re.FORBID_CONTENTS&&(ao===Ur&&(ao=uf(ao)),Rt(ao,re.FORBID_CONTENTS,Q)),gs&&(et["#text"]=!0),Xa&&Rt(et,["html","head","body"]),et.table&&(Rt(et,["tbody"]),delete Qe.tbody),re.TRUSTED_TYPES_POLICY){if(typeof re.TRUSTED_TYPES_POLICY.createHTML!="function")throw ah('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof re.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ah('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');te=re.TRUSTED_TYPES_POLICY,he=te.createHTML("")}else te===void 0&&(te=X$(M,c)),te!==null&&typeof he=="string"&&(he=te.createHTML(""));_a&&_a(re),oe=re}},sn=Rt({},[...qn,...k2,...b5]),xo=Rt({},[...Jw,...v5]),dr=function(re){let ot=X(re);(!ot||!ot.tagName)&&(ot={namespaceURI:Ku,tagName:"template"});const Pt=Xw(re.tagName),ko=Xw(ot.tagName);return Yh[re.namespaceURI]?re.namespaceURI===qu?ot.namespaceURI===Lc?Pt==="svg":ot.namespaceURI===Vf?Pt==="svg"&&(ko==="annotation-xml"||Xh[ko]):!!sn[Pt]:re.namespaceURI===Vf?ot.namespaceURI===Lc?Pt==="math":ot.namespaceURI===qu?Pt==="math"&&Jh[ko]:!!xo[Pt]:re.namespaceURI===Lc?ot.namespaceURI===qu&&!Jh[ko]||ot.namespaceURI===Vf&&!Xh[ko]?!1:!xo[Pt]&&(MB[Pt]||!sn[Pt]):!!(Qh==="application/xhtml+xml"&&Yh[re.namespaceURI]):!1},Ai=function(re){rh(n.removed,{element:re});try{X(re).removeChild(re)}catch{F(re)}},ep=function(re,ot){try{rh(n.removed,{attribute:ot.getAttributeNode(re),from:ot})}catch{rh(n.removed,{attribute:null,from:ot})}if(ot.removeAttribute(re),re==="is")if($c||Yd)try{Ai(ot)}catch{}else try{ot.setAttribute(re,"")}catch{}},RB=function(re){let ot=null,Pt=null;if(zr)re="<remove></remove>"+re;else{const Mr=h5(re,/^[\r\n\t ]+/);Pt=Mr&&Mr[0]}Qh==="application/xhtml+xml"&&Ku===Lc&&(re='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+re+"</body></html>");const ko=te?te.createHTML(re):re;if(Ku===Lc)try{ot=new k().parseFromString(ko,Qh)}catch{}if(!ot||!ot.documentElement){ot=we.createDocument(Ku,"template",null);try{ot.documentElement.innerHTML=F0?he:ko}catch{}}const Dr=ot.body||ot.documentElement;return re&&Pt&&Dr.insertBefore(o.createTextNode(Pt),Dr.childNodes[0]||null),Ku===Lc?se.call(ot,Xa?"html":"body")[0]:Xa?ot.documentElement:Dr},$0=function(re){return Ue.call(re.ownerDocument||re,re,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT|y.SHOW_PROCESSING_INSTRUCTION|y.SHOW_CDATA_SECTION,null)},__=function(re){return re instanceof T&&(typeof re.nodeName!="string"||typeof re.textContent!="string"||typeof re.removeChild!="function"||!(re.attributes instanceof w)||typeof re.removeAttribute!="function"||typeof re.setAttribute!="function"||typeof re.namespaceURI!="string"||typeof re.insertBefore!="function"||typeof re.hasChildNodes!="function")},NB=function(re){return typeof g=="function"&&re instanceof g};function Yu(Yt,re,ot){_2(Yt,Pt=>{Pt.call(n,re,ot,oe)})}const T_=function(re){let ot=null;if(Yu(He.beforeSanitizeElements,re,null),__(re))return Ai(re),!0;const Pt=Q(re.nodeName);if(Yu(He.uponSanitizeElement,re,{tagName:Pt,allowedTags:et}),re.hasChildNodes()&&!NB(re.firstElementChild)&&Ta(/<[/\w]/g,re.innerHTML)&&Ta(/<[/\w]/g,re.textContent)||re.nodeType===F1.progressingInstruction||oa&&re.nodeType===F1.comment&&Ta(/<[/\w]/g,re.data))return Ai(re),!0;if(!et[Pt]||Qe[Pt]){if(!Qe[Pt]&&k_(Pt)&&(Ee.tagNameCheck instanceof RegExp&&Ta(Ee.tagNameCheck,Pt)||Ee.tagNameCheck instanceof Function&&Ee.tagNameCheck(Pt)))return!1;if(gs&&!ao[Pt]){const ko=X(re)||re.parentNode,Dr=q(re)||re.childNodes;if(Dr&&ko){const Mr=Dr.length;for(let Ra=Mr-1;Ra>=0;--Ra){const ol=B(Dr[Ra],!0);ol.__removalCount=(re.__removalCount||0)+1,ko.insertBefore(ol,U(re))}}}return Ai(re),!0}return re instanceof h&&!dr(re)||(Pt==="noscript"||Pt==="noembed"||Pt==="noframes")&&Ta(/<\/no(script|embed|frames)/i,re.innerHTML)?(Ai(re),!0):(Or&&re.nodeType===F1.text&&(ot=re.textContent,_2([nt,It,$t],ko=>{ot=B1(ot,ko," ")}),re.textContent!==ot&&(rh(n.removed,{element:re.cloneNode()}),re.textContent=ot)),Yu(He.afterSanitizeElements,re,null),!1)},BB=function(re,ot,Pt){if(en&&(ot==="id"||ot==="name")&&(Pt in o||Pt in Re))return!1;if(!(yn&&!Ft[ot]&&Ta(fn,ot))){if(!(Wt&&Ta(En,ot))){if(!gn[ot]||Ft[ot]){if(!(k_(re)&&(Ee.tagNameCheck instanceof RegExp&&Ta(Ee.tagNameCheck,re)||Ee.tagNameCheck instanceof Function&&Ee.tagNameCheck(re))&&(Ee.attributeNameCheck instanceof RegExp&&Ta(Ee.attributeNameCheck,ot)||Ee.attributeNameCheck instanceof Function&&Ee.attributeNameCheck(ot))||ot==="is"&&Ee.allowCustomizedBuiltInElements&&(Ee.tagNameCheck instanceof RegExp&&Ta(Ee.tagNameCheck,Pt)||Ee.tagNameCheck instanceof Function&&Ee.tagNameCheck(Pt))))return!1}else if(!nl[ot]){if(!Ta(Be,B1(Pt,ns,""))){if(!((ot==="src"||ot==="xlink:href"||ot==="href")&&re!=="script"&&V$(Pt,"data:")===0&&ki[re])){if(!(Fc&&!Ta(so,B1(Pt,ns,"")))){if(Pt)return!1}}}}}}return!0},k_=function(re){return re!=="annotation-xml"&&h5(re,fs)},PB=function(re){Yu(He.beforeSanitizeAttributes,re,null);const{attributes:ot}=re;if(!ot||__(re))return;const Pt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:gn,forceKeepAttr:void 0};let ko=ot.length;for(;ko--;){const Dr=ot[ko],{name:Mr,namespaceURI:Ra,value:ol}=Dr,L0=Q(Mr);let Rr=Mr==="value"?ol:Vt(ol);const bj=Rr;if(Pt.attrName=L0,Pt.attrValue=Rr,Pt.keepAttr=!0,Pt.forceKeepAttr=void 0,Yu(He.uponSanitizeAttribute,re,Pt),Rr=Pt.attrValue,Co&&(L0==="id"||L0==="name")&&(ep(Mr,re),Rr=Zo+Rr),oa&&Ta(/((--!?|])>)|<\/(style|title)/i,Rr)){ep(Mr,re);continue}if(Pt.forceKeepAttr)continue;if(!Pt.keepAttr){ep(Mr,re);continue}if(!Gl&&Ta(/\/>/i,Rr)){ep(Mr,re);continue}Or&&_2([nt,It,$t],FB=>{Rr=B1(Rr,FB," ")});const IB=Q(re.nodeName);if(!BB(IB,L0,Rr)){ep(Mr,re);continue}if(te&&typeof M=="object"&&typeof M.getAttributeType=="function"&&!Ra)switch(M.getAttributeType(IB,L0)){case"TrustedHTML":{Rr=te.createHTML(Rr);break}case"TrustedScriptURL":{Rr=te.createScriptURL(Rr);break}}if(Rr!==bj)try{Ra?re.setAttributeNS(Ra,Mr,Rr):re.setAttribute(Mr,Rr),__(re)?Ai(re):T2(n.removed)}catch{}}Yu(He.afterSanitizeAttributes,re,null)},pj=function Yt(re){let ot=null;const Pt=$0(re);for(Yu(He.beforeSanitizeShadowDOM,re,null);ot=Pt.nextNode();)Yu(He.uponSanitizeShadowNode,ot,null),T_(ot),PB(ot),ot.content instanceof l&&Yt(ot.content);Yu(He.afterSanitizeShadowDOM,re,null)};return n.sanitize=function(Yt){let re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ot=null,Pt=null,ko=null,Dr=null;if(F0=!Yt,F0&&(Yt="<!-->"),typeof Yt!="string"&&!NB(Yt))if(typeof Yt.toString=="function"){if(Yt=Yt.toString(),typeof Yt!="string")throw ah("dirty is not a string, aborting")}else throw ah("toString is not a function");if(!n.isSupported)return Yt;if(ur||mt(re),n.removed=[],typeof Yt=="string"&&(Wo=!1),Wo){if(Yt.nodeName){const ol=Q(Yt.nodeName);if(!et[ol]||Qe[ol])throw ah("root node is forbidden and cannot be sanitized in-place")}}else if(Yt instanceof g)ot=RB("<!---->"),Pt=ot.ownerDocument.importNode(Yt,!0),Pt.nodeType===F1.element&&Pt.nodeName==="BODY"||Pt.nodeName==="HTML"?ot=Pt:ot.appendChild(Pt);else{if(!$c&&!Or&&!Xa&&Yt.indexOf("<")===-1)return te&&at?te.createHTML(Yt):Yt;if(ot=RB(Yt),!ot)return $c?null:at?he:""}ot&&zr&&Ai(ot.firstChild);const Mr=$0(Wo?Yt:ot);for(;ko=Mr.nextNode();)T_(ko),PB(ko),ko.content instanceof l&&pj(ko.content);if(Wo)return Yt;if($c){if(Yd)for(Dr=le.call(ot.ownerDocument);ot.firstChild;)Dr.appendChild(ot.firstChild);else Dr=ot;return(gn.shadowroot||gn.shadowrootmode)&&(Dr=ve.call(r,Dr,!0)),Dr}let Ra=Xa?ot.outerHTML:ot.innerHTML;return Xa&&et["!doctype"]&&ot.ownerDocument&&ot.ownerDocument.doctype&&ot.ownerDocument.doctype.name&&Ta(x5,ot.ownerDocument.doctype.name)&&(Ra="<!DOCTYPE "+ot.ownerDocument.doctype.name+`>
`+Ra),Or&&_2([nt,It,$t],ol=>{Ra=B1(Ra,ol," ")}),te&&at?te.createHTML(Ra):Ra},n.setConfig=function(){let Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};mt(Yt),ur=!0},n.clearConfig=function(){oe=null,ur=!1},n.isValidAttribute=function(Yt,re,ot){oe||mt({});const Pt=Q(Yt),ko=Q(re);return BB(Pt,ko,ot)},n.addHook=function(Yt,re){typeof re=="function"&&rh(He[Yt],re)},n.removeHook=function(Yt,re){if(re!==void 0){const ot=Yw(He[Yt],re);return ot===-1?void 0:H$(He[Yt],ot,1)[0]}return T2(He[Yt])},n.removeHooks=function(Yt){He[Yt]=[]},n.removeAllHooks=function(){He=w5()},n}var e4=$1();const E5=Oe.each,_G=Oe.trim,L1=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],J$={ftp:21,http:80,https:443,mailto:25},t4=["img","video"],Q$=(e,n)=>_e(e)?!e:_e(n)?!St(t4,n):!0,eL=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},_5=(e,n,o)=>{const r=eL(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?Q$(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class yi{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=Fn.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!_5(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=_G(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const l=n.indexOf("//")===0;if(n.indexOf("/")===0&&!l&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const g=r?r.path:new yi(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(g,n);else{const h=/([^#?]*)([#?]?.*)/.exec(n);h&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(g,h[1])+h[2])}}n=n.replace(/@@/g,"(mce_at)");const d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);d&&E5(L1,(g,h)=>{let y=d[h];y&&(y=y.replace(/\(mce_at\)/g,"@@")),c[g]=y}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),l&&(c.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new yi(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let l=this.toRelPath(this.path,o.path);return o.query&&(l+="?"+o.query),o.anchor&&(l+="#"+o.anchor),l}toAbsolute(n,o){const r=new yi(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?J$[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",l,d;const g=n.substring(0,n.lastIndexOf("/")).split("/"),h=o.split("/");if(g.length>=h.length){for(l=0,d=g.length;l<d;l++)if(l>=h.length||g[l]!==h[l]){r=l+1;break}}if(g.length<h.length){for(l=0,d=h.length;l<d;l++)if(l>=g.length||g[l]!==h[l]){r=l+1;break}}if(r===1)return o;for(l=0,d=g.length-(r-1);l<d;l++)c+="../";for(l=r-1,d=h.length;l<d;l++)l!==r-1?c+="/"+h[l]:c+=h[l];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",l=n.split("/"),d=o.split("/"),g=[];E5(l,T=>{T&&g.push(T)});const h=[];for(let T=d.length-1;T>=0;T--)if(!(d[T].length===0||d[T]===".")){if(d[T]===".."){r++;continue}if(r>0){r--;continue}h.push(d[T])}const y=g.length-r;let w;return y<=0?w=Yn(h).join("/"):w=g.slice(0,y).join("/")+"/"+Yn(h).join("/"),w.indexOf("/")!==0&&(w="/"+w),c&&w.lastIndexOf("/")!==w.length-1&&(w+=c),w}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const df=Oe.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Fu="data-mce-type";let H1=0;const V1=(e,n,o,r,c)=>{var l,d,g,h;const y=n.validate,w=o.getSpecialElements();e.nodeType===sg&&!n.allow_conditional_comments&&/^\[if/i.test((l=e.nodeValue)!==null&&l!==void 0?l:"")&&(e.nodeValue=" "+e.nodeValue);const T=(d=c==null?void 0:c.tagName)!==null&&d!==void 0?d:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){_e(c)&&(c.allowedTags[T]=!0);return}if(e.nodeType!==er||T==="body")return;const k=z.fromDom(e),M=ud(k,Fu),P=wo(k,"data-mce-bogus");if(!M&&ee(P)){P==="all"?v(k):E(k);return}const B=o.getElementRule(T);if(y&&!B){bt(w,T)?v(k):E(k);return}else _e(c)&&(c.allowedTags[T]=!0);if(y&&B&&!M){if(de((g=B.attributesForced)!==null&&g!==void 0?g:[],F=>{as(k,F.name,F.value==="{$uid}"?`mce_${H1++}`:F.value)}),de((h=B.attributesDefault)!==null&&h!==void 0?h:[],F=>{ud(k,F.name)||as(k,F.name,F.value==="{$uid}"?`mce_${H1++}`:F.value)}),B.attributesRequired&&!On(B.attributesRequired,F=>ud(k,F))){E(k);return}if(B.removeEmptyAttrs&&fb(k)){E(k);return}B.outputName&&B.outputName!==T&&Me(k,B.outputName)}},mf=(e,n,o,r,c)=>{const l=e.tagName.toLowerCase(),{attrName:d,attrValue:g}=c;c.keepAttr=Pd(n,o,r,l,d,g),c.keepAttr?(c.allowedAttributes[d]=!0,U1(d,o)&&(c.attrValue=d),n.allow_svg_data_urls&&Lo(g,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):z1(e,d)&&(c.forceKeepAttr=!0)},Pd=(e,n,o,r,c,l)=>o!=="html"&&!gd(r)?!0:!(c in df&&_5(e,l,r))&&(!e.validate||n.isValid(r,c)||Lo(c,"data-")||Lo(c,"aria-")),z1=(e,n)=>e.hasAttribute(Fu)&&(n==="id"||n==="class"||n==="style"),U1=(e,n)=>e in n.getBoolAttrs(),T5=(e,n,o,r)=>{const{attributes:c}=e;for(let l=c.length-1;l>=0;l--){const d=c[l],g=d.name,h=d.value;!Pd(n,o,r,e.tagName.toLowerCase(),g,h)&&!z1(e,g)?e.removeAttribute(g):U1(g,o)&&e.setAttribute(g,g)}},n4=(e,n,o)=>{const r=e4();return r.addHook("uponSanitizeElement",(c,l)=>{V1(c,e,n,o.track(c),l)}),r.addHook("uponSanitizeAttribute",(c,l)=>{mf(c,e,n,o.current(),l)}),r},o4=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},k5=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};e4().sanitize(e,o)},A5=(e,n)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=e4(),c=n.allow_mathml_annotation_encodings,l=Kn(c)&&c.length>0,d=h=>{const y=h.getAttribute("encoding");return l&&ee(y)&&St(c,y)},g=(h,y)=>l&&y==="semantics"?D.some(!0):y==="annotation"?D.some(Ye(h)&&d(h)):Kn(n.extended_mathml_elements)&&n.extended_mathml_elements.includes(y)?D.from(!0):D.none();r.addHook("uponSanitizeElement",(h,y)=>{var w;const T=(w=y.tagName)!==null&&w!==void 0?w:h.nodeName.toLowerCase();g(h,T).each(M=>{y.allowedTags[T]=M,!M&&n.sanitize&&Ye(h)&&h.remove()})}),r.addHook("uponSanitizeAttribute",(h,y)=>{Kn(n.extended_mathml_attributes)&&n.extended_mathml_attributes.includes(y.attrName)&&(y.forceKeepAttr=!0)}),r.sanitize(e,o)},ch=e=>n=>{const o=E8(n);if(o==="svg")k5(n);else if(o==="math")A5(n,e);else throw new Error("Not a namespace element")},O5=(e,n)=>{const o=_8();if(e.sanitize){const r=n4(e,n,o);return{sanitizeHtmlElement:(l,d)=>{r.sanitize(l,o4(e,d)),r.removed=[],o.reset()},sanitizeNamespaceElement:ch(e)}}else return{sanitizeHtmlElement:(l,d)=>{const g=document.createNodeIterator(l,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let h;for(;h=g.nextNode();){const y=o.track(h);V1(h,e,n,y),Ye(h)&&T5(h,e,n,y)}o.reset()},sanitizeNamespaceElement:it}},s4=Oe.makeMap,r4=Oe.extend,Z1=(e,n,o,r)=>{const c=e.name,l=c in o&&c!=="title"&&c!=="textarea"&&c!=="noscript",d=n.childNodes;for(let g=0,h=d.length;g<h;g++){const y=d[g],w=new Fr(y.nodeName.toLowerCase(),y.nodeType);if(Ye(y)){const T=y.attributes;for(let k=0,M=T.length;k<M;k++){const P=T[k];w.attr(P.name,P.value)}gd(w.name)&&(r(y),w.value=y.innerHTML)}else ke(y)?(w.value=y.data,l&&(w.raw=!0)):(_l(y)||Pj(y)||Ho(y))&&(w.value=y.data);gd(w.name)||Z1(w,y,o,r),e.append(w)}},D5=(e,n,o)=>{const r=[];for(let c=e,l=c;c;l=c,c=c.walk()){const d=c;de(n,g=>g(d)),vn(d.parent)&&d!==e?c=l:r.push(d)}for(let c=r.length-1;c>=0;c--){const l=r[c];de(o,d=>d(l))}},M5=(e,n,o,r)=>{const c=o.validate,l=n.getNonEmptyElements(),d=n.getWhitespaceElements(),g=r4(s4("script,style,head,html,body,title,meta,param"),n.getBlockElements()),h=$b(n),y=/[ \t\r\n]+/g,w=/^[ \t\r\n]+/,T=/[ \t\r\n]+$/,k=q=>{let X=q.parent;for(;_e(X);){if(X.name in d)return!0;X=X.parent}return!1},M=q=>{let X=q;for(;_e(X);){if(X.name in h)return th(n,l,d,X);X=X.parent}return!1},P=q=>q.name in g||Em(n,q)||gd(q.name)&&q.parent===e,B=(q,X)=>{const te=X?q.prev:q.next;return _e(te)||vn(q.parent)?!1:P(q.parent)&&(q.parent!==e||r.isRootContent===!0)};return[q=>{var X;if(q.type===3&&!k(q)){let te=(X=q.value)!==null&&X!==void 0?X:"";te=te.replace(y," "),(PF(q.prev,P)||B(q,!0))&&(te=te.replace(w,"")),te.length===0||te===" "&&q.prev&&q.prev.type===sg&&q.next&&q.next.type===sg?q.remove():q.value=te}},q=>{var X;if(q.type===1){const te=n.getElementRule(q.name);if(c&&te){const he=th(n,l,d,q);te.paddInEmptyBlock&&he&&M(q)?Bu(o,r,P,q):te.removeEmpty&&he?P(q)?q.remove():q.unwrap():te.paddEmpty&&(he||u2(q))&&Bu(o,r,P,q)}}else if(q.type===3&&!k(q)){let te=(X=q.value)!==null&&X!==void 0?X:"";(q.next&&P(q.next)||B(q,!1))&&(te=te.replace(T,"")),te.length===0?q.remove():q.value=te}}]},R5=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},ff=(e={},n=sr())=>{const o=s5(),r=s5(),c={validate:!0,root_name:"body",sanitize:!0,...e},l=new DOMParser,d=O5(c,n),g=(X,te,he="html")=>{const we=he==="xhtml"?"application/xhtml+xml":"text/html",Ue=bt(n.getSpecialElements(),te.toLowerCase()),le=Ue?`<${te}>${X}</${te}>`:X,se=()=>he==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${le}</body></html>`:/^[\s]*<head/i.test(X)||/^[\s]*<html/i.test(X)||/^[\s]*<!DOCTYPE/i.test(X)?`<html>${le}</html>`:`<body>${le}</body>`,ve=l.parseFromString(se(),we).body;return d.sanitizeHtmlElement(ve,we),Ue?ve.firstChild:ve},h=o.addFilter,y=o.getFilters,w=o.removeFilter,T=r.addFilter,k=r.getFilters,M=r.removeFilter,P=(X,te)=>{xw(n,X)&&te.push(X)},B=(X,te)=>{const he=ee(te.attr(Fu)),we=te.type===1&&!bt(X,te.name)&&!Em(n,te)&&!gd(te.name);return te.type===3||we&&!he},F=(X,te)=>{const he=r4(s4("script,style,head,html,body,title,meta,param"),n.getBlockElements()),we=/^[ \t\r\n]+/,Ue=/[ \t\r\n]+$/;let le=X.firstChild,se=null;const ve=He=>{var nt,It;He&&(le=He.firstChild,le&&le.type===3&&(le.value=(nt=le.value)===null||nt===void 0?void 0:nt.replace(we,"")),le=He.lastChild,le&&le.type===3&&(le.value=(It=le.value)===null||It===void 0?void 0:It.replace(Ue,"")))};if(n.isValidChild(X.name,te.toLowerCase())){for(;le;){const He=le.next;B(he,le)?(se||(se=new Fr(te,1),se.attr(c.forced_root_block_attrs),X.insert(se,le)),se.append(le)):(ve(se),se=null),le=He}ve(se)}},q={schema:n,addAttributeFilter:T,getAttributeFilters:k,removeAttributeFilter:M,addNodeFilter:h,getNodeFilters:y,removeNodeFilter:w,parse:(X,te={})=>{var he;const we=c.validate,Ue=(he=te.context)!==null&&he!==void 0?he:c.root_name,le=g(X,Ue,te.format);kl(n,le);const se=new Fr(Ue,11);Z1(se,le,n.getSpecialElements(),d.sanitizeNamespaceElement),le.innerHTML="";const[ve,He]=M5(se,n,c,te),nt=[],It=we?so=>P(so,nt):it,$t={nodes:{},attributes:{}},fn=so=>CO(y(),k(),so,$t);if(D5(se,[ve,fn],[He,It]),nt.reverse(),we&&nt.length>0)if(te.context){const{pass:so,fail:ns}=da(nt,fs=>fs.parent===se);Cw(ns,n,se,fn),te.invalid=so.length>0}else Cw(nt,n,se,fn);const En=R5(c,te);return En&&(se.name==="body"||te.isRootContent)&&F(se,En),te.invalid||eh($t,te),se}};return $$(q,c),M$(q,c,n),q},$u=e=>f2(e)?Nu({validate:!1}).serialize(e):e,Lu=(e,n,o)=>{const r=$u(e),c=n(r);if(c.isDefaultPrevented())return c;if(f2(e))if(c.content!==r){const l=ff({validate:!1,forced_root_block:!1,...o}).parse(c.content,{context:e.name});return{...c,content:l}}else return{...c,content:e};else return c},_c=e=>({sanitize:Qp(e),sandbox_iframes:tS(e),sandbox_iframes_exclusions:vv(e)}),N5=(e,n)=>{if(n.no_events)return Is.value(n);{const o=Wi(e,n);return o.isDefaultPrevented()?Is.error(Gx(e,{content:"",...o}).content):Is.value(o)}},B5=(e,n,o)=>o.no_events?n:Lu(n,c=>Gx(e,{...o,content:c}),_c(e)).content,a4=(e,n)=>{if(n.no_events)return Is.value(n);{const o=Lu(n.content,r=>Pg(e,{...n,content:r}),_c(e));return o.isDefaultPrevented()?($n(e,o),Is.error(void 0)):Is.value(o)}},c4=(e,n,o)=>{o.no_events||$n(e,{...o,content:n})},i4=(e,n,o)=>({element:e,width:n,rows:o}),P5=(e,n)=>({element:e,cells:n}),tL=(e,n)=>({x:e,y:n}),I5=(e,n)=>Cr(e,n).bind(Fi).getOr(1),nL=(e,n,o,r,c)=>{const l=I5(c,"rowspan"),d=I5(c,"colspan"),g=e.rows;for(let h=o;h<o+l;h++){g[h]||(g[h]=P5(W(r),[]));for(let y=n;y<n+d;y++){const w=g[h].cells;w[y]=h===o&&y===n?c:$(c)}}},oL=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},sL=(e,n,o)=>{for(;oL(e,n,o);)n++;return n},F5=e=>hs(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),O2=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let l=0;l<c.length;l++)if(Gt(c[l],n))return D.some(tL(l,r))}return D.none()},D2=(e,n,o,r,c)=>{const l=[],d=e.rows;for(let g=o;g<=c;g++){const h=d[g].cells,y=n<r?h.slice(n,r+1):h.slice(r,n+1);l.push(P5(d[g].element,y))}return l},$5=(e,n,o)=>{const r=n.x,c=n.y,l=o.x,d=o.y,g=c<d?D2(e,r,c,l,d):D2(e,r,d,l,c);return i4(e.element,F5(g),g)},rL=(e,n)=>{const o=$(e.element),r=z.fromTag("tbody");return Cl(r,n),Mo(o,r),o},aL=e=>wt(e.rows,n=>{const o=wt(n.cells,c=>{const l=W(c);return Ko(l,"colspan"),Ko(l,"rowspan"),l}),r=$(n.element);return Cl(r,o),r}),L5=e=>{const n=i4($(e),0,[]);return de(Zn(e,"tr"),(o,r)=>{de(Zn(o,"td,th"),(c,l)=>{nL(n,sL(n,l,r),r,o,c)})}),i4(n.element,F5(n.rows),n.rows)},H5=e=>rL(e,aL(e)),l4=(e,n,o)=>O2(e,n).bind(r=>O2(e,o).map(c=>$5(e,r,c))),V5=e=>mo(e,n=>un(n)==="ul"||un(n)==="ol"),z5=(e,n)=>mo(e,o=>un(o)==="li"&&xS(o,n)).fold(Ve([]),o=>V5(e).map(r=>{const c=z.fromTag(un(r)),l=oc(zC(r),(d,g)=>Lo(g,"list-style"));return hb(c,l),[z.fromTag("li"),c]}).getOr([])),u4=(e,n)=>{const o=hs(n,(r,c)=>(Mo(c,r),c),e);return n.length>0?GC([o]):o},cL=e=>yu(e)?Xc(e).filter(Ag).fold(Ve([]),n=>[e,n]):Ag(e)?[e]:[],iL=(e,n,o)=>{const r=z.fromDom(n.commonAncestorContainer),c=Il(r,e),l=gt(c,h=>o.isWrapper(un(h))),d=z5(c,n),g=l.concat(d.length?d:cL(r));return wt(g,$)},Ki=()=>GC([]),Ci=(e,n,o)=>u4(z.fromDom(n.cloneContents()),iL(e,n,o)),M2=(e,n)=>xp(n,"table",qe(Gt,e)),U5=(e,n)=>M2(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],l=L5(o);return l4(l,r,c).map(d=>GC([H5(d)]))}).getOrThunk(Ki),R2=(e,n,o)=>n.length>0&&n[0].collapsed?Ki():Ci(e,n[0],o),Z5=(e,n,o)=>{const r=Lk(n,e);return r.length>0?U5(e,r):R2(e,n,o)},W1=(e,n)=>n>=0&&n<e.length&&zm(e.charAt(n)),d4=e=>xa(e.innerText),W5=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),j5=e=>D.from(e.selection.getRng()).map(n=>{var o;const r=D.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),l=W5(r),d=z.fromDom(n.cloneContents());EA(d),KS(d);const g=e.dom.add(c,l,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},d.dom),h=d4(g),y=xa((o=g.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(g),W1(y,0)||W1(y,y.length-1)){const w=r.getOr(c),T=d4(w),k=T.indexOf(h);if(k===-1)return h;{const M=W1(T,k-1),P=W1(T,k+h.length);return(M?" ":"")+h+(P?" ":"")}}else return h}).getOr(""),G5=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),l=wc(e,Ov(c)),d=n.contextual?Z5(z.fromDom(e.getBody()),l,e.schema).dom:o.cloneContents();return d&&r.appendChild(d),e.selection.serializer.serialize(r,n)},N2=(e,n)=>{if(n.format==="text")return j5(e);{const o=G5(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},m4=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),lL=(e,n,o={})=>{const r=m4(o,n);return N5(e,r).fold(Ts,c=>{const l=N2(e,c);return B5(e,l,c)})},f4=0,q5=1,K5=2,Y5=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),l=(w,T,k)=>({start:w,end:T,diag:k}),d=(w,T,k,M,P)=>{const B=h(w,T,k,M);if(B===null||B.start===T&&B.diag===T-M||B.end===w&&B.diag===w-k){let F=w,U=k;for(;F<T||U<M;)F<T&&U<M&&e[F]===n[U]?(P.push([f4,e[F]]),++F,++U):T-w>M-k?(P.push([K5,e[F]]),++F):(P.push([q5,n[U]]),++U)}else{d(w,B.start,k,B.start-B.diag,P);for(let F=B.start;F<B.end;++F)P.push([f4,e[F]]);d(B.end,T,B.end-B.diag,M,P)}},g=(w,T,k,M)=>{let P=w;for(;P-T<M&&P<k&&e[P]===n[P-T];)++P;return l(w,P,T)},h=(w,T,k,M)=>{const P=T-w,B=M-k;if(P===0||B===0)return null;const F=P-B,U=B+P,q=(U%2===0?U:U+1)/2;r[1+q]=w,c[1+q]=T+1;let X,te,he,we,Ue;for(X=0;X<=q;++X){for(te=-X;te<=X;te+=2){for(he=te+q,te===-X||te!==X&&r[he-1]<r[he+1]?r[he]=r[he+1]:r[he]=r[he-1]+1,we=r[he],Ue=we-w+k-te;we<T&&Ue<M&&e[we]===n[Ue];)r[he]=++we,++Ue;if(F%2!==0&&F-X<=te&&te<=F+X&&c[he-F]<=r[he])return g(c[he-F],te+w-k,T,M)}for(te=F-X;te<=F+X;te+=2){for(he=te+q-F,te===F-X||te!==F+X&&c[he+1]<=c[he-1]?c[he]=c[he+1]-1:c[he]=c[he-1],we=c[he]-1,Ue=we-w+k-te;we>=w&&Ue>=k&&e[we]===n[Ue];)c[he]=we--,Ue--;if(F%2===0&&-X<=te&&te<=X&&c[he]<=r[he+F])return g(c[he],te+w-k,T,M)}}return null},y=[];return d(0,e.length,0,n.length,y),y},X5=e=>Ye(e)?e.outerHTML:ke(e)?Fn.encodeRaw(e.data,!1):_l(e)?"<!--"+e.data+"-->":"",uL=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},g4=(e,n,o)=>{const r=uL(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},dL=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},mL=(e,n)=>{let o=0;de(e,r=>{r[0]===f4?o++:r[0]===q5?(g4(n,r[1],o),o++):r[0]===K5&&dL(n,o)})},fL=(e,n)=>gt(wt(ps(e.childNodes),x(xa,X5)),o=>o.length>0),gL=(e,n)=>{const o=wt(ps(n.childNodes),X5);return mL(Y5(o,e),n),n},hL=Xn(()=>document.implementation.createHTMLDocument("undo")),pL=e=>e.querySelector("iframe")!==null,bL=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),B2=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),ih=e=>{const n=e.serializer.getTempAttrs(),o=MI(e.getBody(),n);return pL(o)?bL(fL(o)):B2(xa(o.innerHTML))},h4=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?gL(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:_e(r)&&Nk(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},p4=e=>e.type==="fragmented"?e.fragments.join(""):e.content,J5=e=>{const n=z.fromTag("body",hL());return jt(n,p4(e)),de(Zn(n,"*[data-mce-bogus]"),E),ut(n)},vL=(e,n)=>p4(e)===p4(n),Q5=(e,n)=>J5(e)===J5(n),b4=(e,n)=>!e||!n?!1:vL(e,n)?!0:Q5(e,n),v4=e=>e.get()===0,lh=(e,n,o)=>{v4(o)&&(e.typing=n)},eD=(e,n)=>{e.typing&&(lh(e,!1,n),e.add())},yL=e=>{e.typing&&(e.typing=!1,e.add())},CL=(e,n,o)=>{v4(n)&&o.set(_d(e.selection))},xL=(e,n,o,r,c,l,d)=>{const g=ih(e),h=Oe.extend(l||{},g);if(!v4(r)||e.removed)return null;const y=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:h,lastLevel:y,originalEvent:d}).isDefaultPrevented()||y&&b4(y,h))return null;n.data[o.get()]&&c.get().each(k=>{n.data[o.get()].beforeBookmark=k});const w=KT(e);if(w&&n.data.length>w){for(let k=0;k<n.data.length-1;k++)n.data[k]=n.data[k+1];n.data.length--,o.set(n.data.length)}h.bookmark=_d(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(h),o.set(n.data.length-1);const T={level:h,lastLevel:y,originalEvent:d};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",T),e.dispatch("change",T)):e.dispatch("AddUndo",T),h},SL=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},wL=(e,n,o,r,c)=>{if(n.transact(r)){const l=n.data[o.get()].bookmark,d=n.data[o.get()-1];h4(e,d,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=l)}},EL=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],h4(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},P2=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,lh(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],h4(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},I2=e=>{e.clear(),e.add()},_L=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!b4(ih(e),n.data[0]),TL=(e,n)=>n.get()<e.data.length-1&&!e.typing,F2=(e,n,o)=>(eD(e,n),e.beforeChange(),e.ignore(o),e.add()),kL=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},AL=(e,n)=>{const o=e.dom,r=_e(n)?n:e.getBody();de(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const l=zP(e),d=o.getAttrib(c,"border");(!d||d==="0")&&e.hasVisual?o.addClass(c,l):o.removeClass(c,l);break;case"A":if(!o.getAttrib(c,"href")){const g=o.getAttrib(c,"name")||c.id,h=QT(e);g&&e.hasVisual?o.addClass(c,h):o.removeClass(c,h)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},tD=e=>({init:{bindEvents:it},undoManager:{beforeChange:(n,o)=>CL(e,n,o),add:(n,o,r,c,l,d)=>xL(e,n,o,r,c,l,d),undo:(n,o,r)=>P2(e,n,o,r),redo:(n,o)=>EL(e,n,o),clear:(n,o)=>SL(e,n,o),reset:n=>I2(n),hasUndo:(n,o)=>_L(e,n,o),hasRedo:(n,o)=>TL(n,o),transact:(n,o,r)=>F2(n,o,r),ignore:(n,o)=>kL(n,o),extra:(n,o,r,c)=>wL(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>kw(e,n,o,r,c),matchAll:(n,o)=>CG(e,n,o),matchNode:(n,o,r,c)=>Pu(e,n,o,r,c),canApply:n=>a$(e,n),closest:n=>r$(e,n),apply:(n,o,r)=>Hl(e,n,o,r),remove:(n,o,r,c)=>GO(e,n,o,r,c),toggle:(n,o,r)=>O$(e,n,o,r),formatChanged:(n,o,r,c,l)=>A$(e,n,o,r,c,l)},editor:{getContent:n=>Qj(e,n),setContent:(n,o)=>O1(e,n,o),insertContent:(n,o)=>AO(e,n,o),addVisual:n=>AL(e,n)},selection:{getContent:(n,o)=>lL(e,n,o)},autocompleter:{addDecoration:it,removeDecoration:it},raw:{getModel:()=>D.none()}}),OL=e=>{const n=y=>Ot(y)?y:{},{init:o,undoManager:r,formatter:c,editor:l,selection:d,autocompleter:g,raw:h}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(y,w,T)=>r.transact(T),ignore:(y,w)=>r.ignore(w),extra:(y,w,T,k)=>r.extra(T,k)},formatter:{match:(y,w,T,k)=>c.match(y,n(w),k),matchAll:c.matchAll,matchNode:c.matchNode,canApply:y=>c.canApply(y),closest:y=>c.closest(y),apply:(y,w,T)=>c.apply(y,n(w)),remove:(y,w,T,k)=>c.remove(y,n(w)),toggle:(y,w,T)=>c.toggle(y,n(w)),formatChanged:(y,w,T,k,M)=>c.formatChanged(w,T,k,M)},editor:{getContent:y=>l.getContent(y),setContent:(y,w)=>({content:l.setContent(y,w),html:""}),insertContent:(y,w)=>(l.insertContent(y),""),addVisual:l.addVisual},selection:{getContent:(y,w)=>d.getContent(w)},autocompleter:{addDecoration:g.addDecoration,removeDecoration:g.removeDecoration},raw:{getModel:()=>D.some(h.getRawModel())}}},DL=()=>{const e=Ve(null),n=Ve("");return{init:{bindEvents:it},undoManager:{beforeChange:it,add:e,undo:e,redo:e,clear:it,reset:it,hasUndo:Ce,hasRedo:Ce,transact:e,ignore:it,extra:it},formatter:{match:Ce,matchAll:Ve([]),matchNode:Ve(void 0),canApply:Ce,closest:n,apply:it,remove:it,toggle:it,formatChanged:Ve({unbind:it})},editor:{getContent:n,setContent:Ve({content:"",html:""}),insertContent:Ve(""),addVisual:it},selection:{getContent:n},autocompleter:{addDecoration:it,removeDecoration:it},raw:{getModel:Ve(D.none())}}},Ul=e=>bt(e.plugins,"rtc"),ML=e=>zn(e.plugins,"rtc").bind(n=>D.from(n.setup)),RL=e=>{const n=e;return ML(e).fold(()=>(n.rtcInstance=tD(e),D.none()),o=>(n.rtcInstance=DL(),D.some(()=>o().then(r=>(n.rtcInstance=OL(r),r.rtc.isRemote)))))},y4=e=>e.rtcInstance?e.rtcInstance:tD(e),ms=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},NL=(e,n,o)=>{ms(e).undoManager.beforeChange(n,o)},TG=(e,n,o,r,c,l,d)=>ms(e).undoManager.add(n,o,r,c,l,d),xi=(e,n,o,r)=>ms(e).undoManager.undo(n,o,r),nD=(e,n,o)=>ms(e).undoManager.redo(n,o),BL=(e,n,o)=>{ms(e).undoManager.clear(n,o)},oD=(e,n)=>{ms(e).undoManager.reset(n)},PL=(e,n,o)=>ms(e).undoManager.hasUndo(n,o),IL=(e,n,o)=>ms(e).undoManager.hasRedo(n,o),kG=(e,n,o,r)=>ms(e).undoManager.transact(n,o,r),lr=(e,n,o)=>{ms(e).undoManager.ignore(n,o)},FL=(e,n,o,r,c)=>{ms(e).undoManager.extra(n,o,r,c)},$L=(e,n,o,r,c)=>ms(e).formatter.match(n,o,r,c),LL=(e,n,o)=>ms(e).formatter.matchAll(n,o),HL=(e,n,o,r,c)=>ms(e).formatter.matchNode(n,o,r,c),VL=(e,n)=>ms(e).formatter.canApply(n),$2=(e,n)=>ms(e).formatter.closest(n),zL=(e,n,o,r)=>{ms(e).formatter.apply(n,o,r)},C4=(e,n,o,r,c)=>{ms(e).formatter.remove(n,o,r,c)},sD=(e,n,o,r)=>{ms(e).formatter.toggle(n,o,r)},L2=(e,n,o,r,c,l)=>ms(e).formatter.formatChanged(n,o,r,c,l),UL=(e,n)=>y4(e).editor.getContent(n),ZL=(e,n,o)=>y4(e).editor.setContent(n,o),WL=(e,n,o)=>y4(e).editor.insertContent(n,o),jL=(e,n,o)=>ms(e).selection.getContent(n,o),GL=(e,n)=>ms(e).editor.addVisual(n),x4=e=>ms(e).init.bindEvents(),qL=(e,n={})=>{const o=n.format?n.format:"html";return jL(e,o,n)},S4=e=>e.dom.length===0?(v(e),D.none()):D.some(e),rD=(e,n)=>e.filter(o=>d1.isBookmarkNode(o.dom)).bind(n?bl:pl),KL=(e,n,o,r,c)=>{const l=e.dom,d=n.dom,g=r?l.length:d.length;r?(lw(l,d,c,!1,!r),o.setStart(d,g)):(lw(d,l,c,!1,!r),o.setEnd(d,g))},YL=(e,n,o)=>{Xc(e).each(r=>{const c=e.dom;n&&y1(r,ue(c,0),o)?e2(c,0,o):!n&&C1(r,ue(c,c.length),o)&&iw(c,c.length,o)})},aD=(e,n,o,r,c)=>{e.bind(l=>((r?iw:e2)(l.dom,r?l.dom.length:0,c),n.filter(vr).map(g=>KL(l,g,o,r,c)))).orThunk(()=>rD(n,r).or(n).filter(vr).map(d=>YL(d,r,c)))},XL=(e,n,o)=>{const r=D.from(n.firstChild).map(z.fromDom),c=D.from(n.lastChild).map(z.fromDom);e.deleteContents(),e.insertNode(n);const l=r.bind(pl).filter(vr).bind(S4),d=c.bind(bl).filter(vr).bind(S4);aD(l,r,e,!0,o),aD(d,c,e,!1,o),e.collapse(!1)},JL=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),H2=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},l=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return Nu({validate:!1},e.schema).serialize(l)}else return n.content},cD=(e,n,o={})=>{const r=JL(o,n);a4(e,r).each(c=>{const l=H2(e,c),d=e.selection.getRng();XL(d,d.createContextualFragment(l),e.schema),e.selection.setRng(d),Km(e,d),c4(e,l,c)})},w4=(e,n,o)=>{if(bt(e,n)){const r=gt(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var QL=(e,n)=>{let o,r;const c=(g,h)=>mo(h,y=>e.is(y,g)),l=g=>e.getParents(g,void 0,e.getRoot()),d=()=>{o={},r={},n.on("NodeChange",g=>{const h=g.element,y=l(h),w={};Le(o,(T,k)=>{c(k,y).each(M=>{r[k]||(de(T,P=>{P(!0,{node:M,selector:k,parents:y})}),r[k]=T),w[k]=T})}),Le(r,(T,k)=>{w[k]||(delete r[k],de(T,M=>{M(!1,{node:h,selector:k,parents:y})}))})})};return{selectorChangedWithUnbind:(g,h)=>(o||d(),o[g]||(o[g]=[]),o[g].push(h),c(g,l(n.selection.getStart())).each(()=>{r[g]=o[g]}),{unbind:()=>{w4(o,g,h),w4(r,g,h)}})}};const E4=e=>!!(e&&e.ownerDocument)&&ic(z.fromDom(e.ownerDocument),z.fromDom(e)),eH=e=>e?E4(e.startContainer)&&E4(e.endContainer):!1,iD=(e,n,o,r)=>{let c,l;const{selectorChangedWithUnbind:d}=QL(e,r),g=(Be,et)=>{const ln=e.createRng();_e(Be)&&_e(et)?(ln.setStart(Be,et),ln.setEnd(Be,et),te(ln),U(!1)):(SS(e,ln,r.getBody(),!0),te(ln))},h=Be=>qL(r,Be),y=(Be,et)=>cD(r,Be,et),w=Be=>hA(r.getBody(),X(),Be),T=Be=>pA(r.getBody(),X(),Be),k=(Be,et)=>ns.getBookmark(Be,et),M=Be=>ns.moveToBookmark(Be),P=(Be,et)=>(Xj(e,Be,et).each(te),Be),B=()=>{const Be=X(),et=q();return!Be||Be.item?!1:Be.compareEndPoints?Be.compareEndPoints("StartToEnd",Be)===0:!et||Be.collapsed},F=()=>{if(r.mode.isReadOnly())return!1;const Be=X(),et=r.getBody().querySelectorAll('[data-mce-selected="1"]');return et.length>0?Xt(et,ln=>e.isEditable(ln.parentElement)):gA(e,Be)},U=Be=>{const et=X();et.collapse(!!Be),te(et)},q=()=>n.getSelection?n.getSelection():n.document.selection,X=()=>{let Be;const et=(gn,fe,Ee)=>{try{return fe.compareBoundaryPoints(gn,Ee)}catch{return-1}},ln=n.document;if(_e(r.bookmark)&&!jm(r)){const gn=PS(r);if(gn.isSome())return gn.map(fe=>wc(r,[fe])[0]).getOr(ln.createRange())}try{const gn=q();gn&&!yg(gn.anchorNode)&&(gn.rangeCount>0?Be=gn.getRangeAt(0):Be=ln.createRange(),Be=wc(r,[Be])[0])}catch{}if(Be||(Be=ln.createRange()),Tp(Be.startContainer)&&Be.collapsed){const gn=e.getRoot();Be.setStart(gn,0),Be.setEnd(gn,0)}return c&&l&&(et(Be.START_TO_START,Be,c)===0&&et(Be.END_TO_END,Be,c)===0?Be=l:(c=null,l=null)),Be},te=(Be,et)=>{if(!eH(Be))return;const ln=q();if(Be=r.dispatch("SetSelectionRange",{range:Be,forward:et}).range,ln){l=Be;try{ln.removeAllRanges(),ln.addRange(Be)}catch{}et===!1&&ln.extend&&(ln.collapse(Be.endContainer,Be.endOffset),ln.extend(Be.startContainer,Be.startOffset)),c=ln.rangeCount>0?ln.getRangeAt(0):null}if(!Be.collapsed&&Be.startContainer===Be.endContainer&&(ln!=null&&ln.setBaseAndExtent)&&Be.endOffset-Be.startOffset<2&&Be.startContainer.hasChildNodes()){const fe=Be.startContainer.childNodes[Be.startOffset];fe&&fe.nodeName==="IMG"&&(ln.setBaseAndExtent(Be.startContainer,Be.startOffset,Be.endContainer,Be.endOffset),(ln.anchorNode!==Be.startContainer||ln.focusNode!==Be.endContainer)&&ln.setBaseAndExtent(fe,0,fe,1))}r.dispatch("AfterSetSelectionRange",{range:Be,forward:et})},he=Be=>(y(e.getOuterHTML(Be)),Be),we=()=>ja(r.getBody(),X()),Ue=(Be,et)=>_r(e,X(),Be,et),le=()=>{const Be=q(),et=Be==null?void 0:Be.anchorNode,ln=Be==null?void 0:Be.focusNode;if(!Be||!et||!ln||yg(et)||yg(ln))return!0;const gn=e.createRng(),fe=e.createRng();try{gn.setStart(et,Be.anchorOffset),gn.collapse(!0),fe.setStart(ln,Be.focusOffset),fe.collapse(!0)}catch{return!0}return gn.compareBoundaryPoints(gn.START_TO_START,fe)<=0},so={dom:e,win:n,serializer:o,editor:r,expand:(Be={type:"word"})=>te(Wa(e).expand(X(),Be)),collapse:U,setCursorLocation:g,getContent:h,setContent:y,getBookmark:k,moveToBookmark:M,select:P,isCollapsed:B,isEditable:F,isForward:le,setNode:he,getNode:we,getSel:q,setRng:te,getRng:X,getStart:w,getEnd:T,getSelectedBlocks:Ue,normalize:()=>{const Be=X(),et=q();if(!CS(et)&&Mv(r)){const ln=Wv(e,Be);return ln.each(gn=>{te(gn,le())}),ln.getOr(Be)}return Be},selectorChanged:(Be,et)=>(d(Be,et),so),selectorChangedWithUnbind:d,getScrollContainer:()=>{let Be,et=e.getRoot();for(;et&&et.nodeName!=="BODY";){if(et.scrollHeight>et.clientHeight){Be=et;break}et=et.parentNode}return Be},scrollIntoView:(Be,et)=>{_e(Be)?TI(r,Be,et):Km(r,X(),et)},placeCaretAt:(Be,et)=>te(jn(Be,et,r.getDoc())),getBoundingClientRect:()=>{const Be=X();return Be.collapsed?ue.fromRangeStart(Be).getClientRects()[0]:Be.getBoundingClientRect()},destroy:()=>{n=c=l=null,fs.destroy()}},ns=d1(so),fs=rA(so,r);return so.bookmarkManager=ns,so.controlSelection=fs,so},tH=(e,n,o)=>{n.addNodeFilter("br",(r,c,l)=>{const d=Oe.extend({},o.getBlockElements()),g=o.getNonEmptyElements(),h=o.getWhitespaceElements();d.body=1;const y=w=>w.name in d||Em(o,w);for(let w=0,T=r.length;w<T;w++){let k=r[w],M=k.parent;if(M&&y(M)&&k===M.lastChild){let P=k.prev;for(;P;){const B=P.name;if(B!=="span"||P.attr("data-mce-type")!=="bookmark"){B==="br"&&(k=null);break}P=P.prev}if(k&&(k.remove(),th(o,g,h,M))){const B=o.getElementRule(M.name);B&&(B.removeEmpty?M.remove():B.paddEmpty&&Bu(e,l,y,M))}}else{let P=k;for(;M&&M.firstChild===P&&M.lastChild===P&&(P=M,!d[M.name]);)M=M.parent;if(P===M){const B=new Fr("#text",3);B.value=Jn,k.replace(B)}}}})},_4=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let l=r.length;for(;l--;){const d=r[l];d.attr("tabindex",d.attr("data-mce-tabindex")),d.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const l="data-mce-"+c,d=n.url_converter,g=n.url_converter_scope;let h=r.length;for(;h--;){const y=r[h];let w=y.attr(l);w!==void 0?(y.attr(c,w.length>0?w:null),y.attr(l,null)):(w=y.attr(c),c==="style"?w=o.serializeStyle(o.parseStyle(w),y.name):d&&(w=d.call(g,w,c,y.name)),y.attr(c,w.length>0?w:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const l=r[c];let d=l.attr("class");d&&(d=d.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),l.attr("class",d.length>0?d:null))}}),e.addAttributeFilter("data-mce-type",(r,c,l)=>{let d=r.length;for(;d--;){const g=r[d];g.attr("data-mce-type")==="bookmark"&&!l.cleanup&&(D.from(g.firstChild).exists(y=>{var w;return!Gb((w=y.value)!==null&&w!==void 0?w:"")})?g.unwrap():g.remove())}}),e.addNodeFilter("script,style",(r,c)=>{var l;const d=h=>h.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=r.length;for(;g--;){const h=r[g],y=h.firstChild,w=(l=y==null?void 0:y.value)!==null&&l!==void 0?l:"";if(c==="script"){const T=h.attr("type");T&&h.attr("type",T==="mce-no/type"?null:T.replace(/^mce\-/,"")),n.element_format==="xhtml"&&y&&w.length>0&&(y.value=`// <![CDATA[
`+d(w)+`
// ]]>`)}else n.element_format==="xhtml"&&y&&w.length>0&&(y.value=`<!--
`+d(w)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const l=r[c],d=l.value;n.preserve_cdata&&(d==null?void 0:d.indexOf("[CDATA["))===0?(l.name="#cdata",l.type=4,l.value=o.decode(d.replace(/^\[CDATA\[|\]\]$/g,""))):(d==null?void 0:d.indexOf("mce:protected "))===0&&(l.name="#text",l.type=3,l.raw=!0,l.value=unescape(d).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let l=r.length;for(;l--;){const d=r[l];d.type===7?d.remove():d.type===1&&c==="input"&&!d.attr("type")&&d.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{de(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let l=r.length;for(;l--;)r[l].attr(c,null)}),n.remove_trailing_brs&&tH(n,e,e.schema)},T4=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},nH=(e,n,o)=>{let r;const c=e.dom;let l=n.cloneNode(!0);const d=document.implementation;if(d.createHTMLDocument){const g=d.createHTMLDocument("");Oe.each(l.nodeName==="BODY"?l.childNodes:[l],h=>{g.body.appendChild(g.importNode(h,!0))}),l.nodeName!=="BODY"?l=g.body.firstChild:l=g.body,r=c.doc,c.doc=g}return PT(e,{...o,node:l}),r&&(c.doc=r),l},k4=(e,n)=>_e(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,oH=(e,n,o)=>k4(e,o)?nH(e,n,o):n,sH=(e,n,o)=>{Oe.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let l=r.length;for(;l--;)r[l].attr(c,null)}),n.push(o))},rH=(e,n,o)=>!n.no_events&&e?Wn(e,{...n,content:o}).content:o,aH=(e,n,o)=>{const r=xa(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||Og(z.fromDom(n))?r:Oe.trim(r)},cH=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return T4(c),c},iH=(e,n,o)=>Nu(e,n).serialize(o),lD=(e,n,o,r,c)=>{const l=iH(n,o,r);return rH(e,c,l)},lH=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},c=n&&n.dom?n.dom:wn.DOM,l=n&&n.schema?n.schema:sr(r),d=ff(r,l);_4(d,r,c);const g=(h,y={})=>{const w={format:"html",...y},T=oH(n,h,w),k=aH(c,T,w),M=cH(d,k,w);return w.format==="tree"?M:lD(n,r,l,M,w)};return{schema:l,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,serialize:g,addRules:l.addValidElements,setRules:l.setValidElements,addTempAttr:qe(sH,d,o),getTempAttrs:Ve(o),getNodeFilters:d.getNodeFilters,getAttributeFilters:d.getAttributeFilters,removeNodeFilter:d.removeNodeFilter,removeAttributeFilter:d.removeAttributeFilter}},uD=(e,n)=>{const o=lH(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},uH="html",dH=(e,n)=>({...e,format:n,get:!0,getInner:!0}),mH=(e,n={})=>{const o=n.format?n.format:uH,r=dH(n,o);return N5(e,r).fold(Ts,c=>{const l=UL(e,c);return B5(e,l,c)})},fH="html",gH=(e,n)=>({format:fH,...e,set:!0,content:n}),Id=(e,n,o={})=>{const r=gH(o,n);return a4(e,r).map(c=>{const l=ZL(e,c.content,c);return c4(e,l.html,c),l.content}).getOr(n)},V2="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),dD=[],mD="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),fD=[{name:"export",replacedWith:"Export to PDF"}],gD=(e,n)=>{const o=gt(n,r=>bt(e,r));return Vn(o)},A4=e=>{const n=gD(e,V2),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Vn(n)},hH=e=>gD(e,dD),hD=(e,n)=>{const o=Oe.makeMap(e.plugins," "),c=gt(n,l=>bt(o,l));return Vn(c)},pH=e=>hD(e,mD),bH=e=>hD(e,fD.map(n=>n.name)),vH=(e,n)=>{const o=A4(e),r=pH(n),c=r.length>0,l=o.length>0,d=n.theme==="mobile";if(c||l||d){const g=`
- `,h=d?`

Themes:${g}mobile`:"",y=c?`

Plugins:${g}${r.join(g)}`:"",w=l?`

Options:${g}${o.join(g)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+h+y+w)}},z2=e=>mo(fD,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),j1=(e,n)=>{const o=hH(e),r=bH(n),c=r.length>0,l=o.length>0;if(c||l){const d=`
- `,g=c?`

Plugins:${d}${r.map(z2).join(d)}`:"",h=l?`

Options:${d}${o.join(d)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+g+h)}},yH=(e,n)=>{vH(e,n),j1(e,n)},Hu=wn.DOM,Tc=e=>{Hu.setStyle(e.id,"display",e.orgDisplay)},Fd=e=>D.from(e).each(n=>n.destroy()),Tn=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},G1=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),Hu.unbind(n,"submit reset",e.formEventDelegate))},pD=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&_e(c==null?void 0:c.nextSibling)&&Hu.remove(c.nextSibling),IT(e),e.editorManager.remove(e),!e.inline&&r&&Tc(e),dP(e),Hu.remove(e.getContainer()),Fd(n),Fd(o),e.destroy()}},bD=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Fd(o),Fd(r)),G1(e),Tn(e),e.destroyed=!0}},uh=(()=>{const e={};return{add:(c,l)=>{e[c]=l},get:c=>e[c]?e[c]:{icons:{}},has:c=>bt(e,c)}})(),$d=is.ModelManager,U2=(e,n)=>n.dom[e],Z2=(e,n)=>parseInt(Yo(n,e),10),W2=qe(U2,"clientWidth"),D4=qe(U2,"clientHeight"),vD=qe(Z2,"margin-top"),yD=qe(Z2,"margin-left"),CD=e=>e.dom.getBoundingClientRect(),xD=(e,n,o)=>{const r=W2(e),c=D4(e);return n>=0&&o>=0&&n<=r&&o<=c},SD=(e,n,o,r)=>{const c=CD(n),l=e?c.left+n.dom.clientLeft+yD(n):0,d=e?c.top+n.dom.clientTop+vD(n):0,g=o-l,h=r-d;return{x:g,y:h}},dh=(e,n,o)=>{const r=z.fromDom(e.getBody()),c=e.inline?r:ig(r),l=SD(e.inline,c,n,o);return xD(c,l.x,l.y)},wD=e=>D.from(e).map(z.fromDom),M4=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return wD(n).map(Ls).getOr(!1)};var CH=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const ED=e=>{const n=[],o=()=>{const k=e.theme;return k&&k.getNotificationManagerImpl?k.getNotificationManagerImpl():CH()},r=()=>D.from(n[0]),c=(k,M)=>k.type===M.type&&k.text===M.text&&!k.progressBar&&!k.timeout&&!M.progressBar&&!M.timeout,l=()=>{r().each(k=>{k.reposition()})},d=k=>{n.push(k)},g=k=>{Gs(n,M=>M===k).each(M=>{n.splice(M,1)})},h=(k,M=!0)=>e.removed||!M4(e)?{}:(M&&e.dispatch("BeforeOpenNotification",{notification:k}),mo(n,P=>c(o().getArgs(P),k)).getOrThunk(()=>{e.editorManager.setActive(e);const P=o().open(k,()=>{g(P)},()=>Vv(e));return d(P),l(),e.dispatch("OpenNotification",{notification:{...P}}),P})),y=()=>{r().each(k=>{o().close(k),g(k),l()})},w=Ve(n);return(k=>{k.on("SkinLoaded",()=>{const M=Yx(k);M&&h({text:M,type:"warning",timeout:0},!1),l()}),k.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(l)}),k.on("remove",()=>{de(n.slice(),M=>{o().close(M)})}),k.on("keydown",M=>{var P;const B=((P=M.key)===null||P===void 0?void 0:P.toLowerCase())==="f12"||M.keyCode===123;M.altKey&&B&&(M.preventDefault(),r().map(F=>z.fromDom(F.getEl())).each(F=>oo(F)))})})(e),{open:h,close:y,getNotifications:w}},gf=is.PluginManager,Ld=is.ThemeManager;var _D=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const q1=e=>{let n=[];const o=()=>{const B=e.theme;return B&&B.getWindowManagerImpl?B.getWindowManagerImpl():_D()},r=(B,F)=>(...U)=>F?F.apply(B,U):void 0,c=B=>{e.dispatch("OpenWindow",{dialog:B})},l=B=>{e.dispatch("CloseWindow",{dialog:B})},d=B=>{n.push(B),c(B)},g=B=>{l(B),n=gt(n,F=>F!==B),n.length===0&&e.focus()},h=()=>D.from(n[n.length-1]),y=B=>{e.editorManager.setActive(e),BS(e),e.ui.show();const F=B();return d(F),F},w=(B,F)=>y(()=>o().open(B,F,g)),T=B=>y(()=>o().openUrl(B,g)),k=(B,F,U)=>{const q=o();q.alert(B,r(U||q,F))},M=(B,F,U)=>{const q=o();q.confirm(B,r(U||q,F))},P=()=>{h().each(B=>{o().close(B),g(B)})};return e.on("remove",()=>{de(n,B=>{o().close(B)})}),{open:w,openUrl:T,alert:k,confirm:M,close:P}},R4=(e,n)=>{e.notificationManager.open({type:"error",text:n})},K1=(e,n)=>{e._skinLoaded?R4(e,n):e.on("SkinLoaded",()=>{R4(e,n)})},TD=(e,n)=>{K1(e,zo.translate(["Failed to upload image: {0}",n]))},mh=(e,n,o)=>{mv(e,n,{message:o}),console.error(o)},fh=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,kD=(e,n,o)=>{mh(e,"PluginLoadError",fh("plugin",n,o))},AD=(e,n,o)=>{mh(e,"IconsLoadError",fh("icons",n,o))},OD=(e,n,o)=>{mh(e,"LanguageLoadError",fh("language",n,o))},DD=(e,n,o)=>{mh(e,"ThemeLoadError",fh("theme",n,o))},MD=(e,n,o)=>{mh(e,"ModelLoadError",fh("model",n,o))},N4=(e,n,o)=>{const r=zo.translate(["Failed to initialize plugin: {0}",n]);mv(e,"PluginLoadError",{message:r}),Y1(r,o),K1(e,r)},Y1=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},RD=e=>{D.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},j2=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},ND=(e,n)=>{j2(e,"StyleWithCSS",n),j2(e,"enableInlineTableEditing",n),j2(e,"enableObjectResizing",n)},BD=e=>{e.selection.setRng(e.selection.getRng())},B4=(e,n,o)=>{La(e,n)&&!o?Hs(e,n):o&&Un(e,n)},P4=e=>{const n=z.fromDom(e.getBody());B4(n,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),RD(e)},G2=e=>{const n=z.fromDom(e.getBody());B4(n,"mce-content-readonly",!1),e.hasEditableRoot()&&ni(n,!0),ND(e,!1),Vv(e)&&e.focus(),BD(e),e.nodeChanged()},Si=e=>zg(e),Hd="data-mce-contenteditable",xH=e=>{de(Zn(e,'*[contenteditable="true"]'),n=>{as(n,Hd,"true"),ni(n,!1)})},PD=e=>{de(Zn(e,`*[${Hd}="true"]`),n=>{Ko(n,Hd),ni(n,!0)})},X1=(e,n)=>{const o=z.fromDom(e.getBody());n?(P4(e),ni(o,!1),xH(o)):(PD(o),G2(e))},I4=e=>{e.serializer?gh(e):e.on("PreInit",()=>{gh(e)})},gh=e=>{e.parser.addAttributeFilter("contenteditable",n=>{Si(e)&&de(n,o=>{o.attr(Hd,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Hd,n=>{Si(e)&&de(n,o=>{o.attr("contenteditable",o.attr(Hd))})}),e.serializer.addTempAttr(Hd)},F4=e=>e.type==="click",ID=["copy"],hh=e=>St(ID,e.type),$4=(e,n)=>dd(n,"a",r=>Gt(r,z.fromDom(e.getBody()))).bind(r=>Cr(r,"href")),L4=(e,n)=>{if(F4(n)&&!je.metaKeyPressed(n)){const o=z.fromDom(n.target);$4(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${gr(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else hh(n)&&e.dispatch(n.type,n)},ph=e=>{e.on("ShowCaret ObjectSelected",n=>{Si(e)&&n.preventDefault()}),e.on("DisabledStateChange",n=>{n.isDefaultPrevented()||X1(e,n.state)})},Vd=e=>{I4(e),ph(e)},FD=e=>/^[a-z0-9\-]+$/i.test(e),H4=e=>"content/"+e+"/content.css",SH=e=>tinymce.Resource.has(H4(e)),$D=e=>V4(e,DP(e)),LD=e=>V4(e,UT(e)),V4=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return wt(n,l=>SH(l)?l:FD(l)&&!e.inline?`${o}/${l}/${c}`:e.documentBaseURI.toAbsolute(l))},wH=e=>{e.contentCSS=e.contentCSS.concat($D(e),LD(e))},zd=e=>e?ps(e.getElementsByTagName("img")):[],hf=(e,n)=>{const o={};return{findAll:(c,l=ze)=>{const d=gt(zd(c),h=>{const y=h.src;return h.hasAttribute("data-mce-bogus")||h.hasAttribute("data-mce-placeholder")||!y||y===rn.transparentSrc?!1:Lo(y,"blob:")?!e.isUploaded(y)&&l(h):Lo(y,"data:")?l(h):!1}),g=wt(d,h=>{const y=h.src;if(bt(o,y))return o[y].then(w=>ee(w)?w:{image:h,blobInfo:w.blobInfo});{const w=l5(n,y).then(T=>(delete o[y],{image:h,blobInfo:T})).catch(T=>(delete o[y],T));return o[y]=w,w}});return Promise.all(g)}}},z4=()=>{let o={};const r=(k,M)=>({status:k,resultUri:M}),c=k=>k in o;return{hasBlobUri:c,getResultUri:k=>{const M=o[k];return M?M.resultUri:null},isPending:k=>c(k)?o[k].status===1:!1,isUploaded:k=>c(k)?o[k].status===2:!1,markPending:k=>{o[k]=r(1,null)},markUploaded:(k,M)=>{o[k]=r(2,M)},removeFailed:k=>{delete o[k]},destroy:()=>{o={}}}};let HD=0;const EH=()=>{const e=()=>Math.round(U0()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},_H=e=>e+HD+++EH(),TH=()=>{let e=[];const n=T=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[T.toLowerCase()]||"dat",o=(T,k,M,P,B)=>{if(ee(T))return r({id:T,name:P,filename:B,blob:k,base64:M});if(Ot(T))return r(T);throw new Error("Unknown input type")},r=T=>{if(!T.blob||!T.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const k=T.id||_H("blobid"),M=T.name||k,P=T.blob;return{id:Ve(k),name:Ve(M),filename:Ve(T.filename||M+"."+n(P.type)),blob:Ve(P),base64:Ve(T.base64),blobUri:Ve(T.blobUri||URL.createObjectURL(P)),uri:Ve(T.uri)}},c=T=>{d(T.id())||e.push(T)},l=T=>mo(e,T).getOrUndefined(),d=T=>l(k=>k.id()===T);return{create:o,add:c,get:d,getByUri:T=>l(k=>k.blobUri()===T),getByData:(T,k)=>l(M=>M.base64()===T&&M.blob().type===k),findFirst:l,removeByUri:T=>{e=gt(e,k=>k.blobUri()===T?(URL.revokeObjectURL(k.blobUri()),!1):!0)},destroy:()=>{de(e,T=>{URL.revokeObjectURL(T.blobUri())}),e=[]}}},Aa=(e,n)=>{const o={},r=(B,F)=>B?B.replace(/\/$/,"")+"/"+F.replace(/^\//,""):F,c=(B,F)=>new Promise((U,q)=>{const X=new XMLHttpRequest;X.open("POST",n.url),X.withCredentials=n.credentials,X.upload.onprogress=he=>{F(he.loaded/he.total*100)},X.onerror=()=>{q("Image upload failed due to a XHR Transport error. Code: "+X.status)},X.onload=()=>{if(X.status<200||X.status>=300){q("HTTP Error: "+X.status);return}const he=JSON.parse(X.responseText);if(!he||!ee(he.location)){q("Invalid JSON: "+X.responseText);return}U(r(n.basePath,he.location))};const te=new FormData;te.append("file",B.blob(),B.filename()),X.send(te)}),l=Zt(n.handler)?n.handler:c,d=()=>new Promise(B=>{B([])}),g=(B,F)=>({url:F,blobInfo:B,status:!0}),h=(B,F)=>({url:"",blobInfo:B,status:!1,error:F}),y=(B,F)=>{Oe.each(o[B],U=>{U(F)}),delete o[B]},w=(B,F,U)=>(e.markPending(B.blobUri()),new Promise(q=>{let X,te;try{const he=()=>{X&&(X.close(),te=it)},we=le=>{he(),e.markUploaded(B.blobUri(),le),y(B.blobUri(),g(B,le)),q(g(B,le))},Ue=le=>{he(),e.removeFailed(B.blobUri()),y(B.blobUri(),h(B,le)),q(h(B,le))};te=le=>{le<0||le>100||D.from(X).orThunk(()=>D.from(U).map(ua)).each(se=>{X=se,se.progressBar.value(le)})},F(B,te).then(we,le=>{Ue(ee(le)?{message:le}:le)})}catch(he){q(h(B,he))}})),T=B=>B===c,k=B=>{const F=B.blobUri();return new Promise(U=>{o[F]=o[F]||[],o[F].push(U)})},M=(B,F)=>(B=Oe.grep(B,U=>!e.isUploaded(U.blobUri())),Promise.all(Oe.map(B,U=>e.isPending(U.blobUri())?k(U):w(U,l,F))));return{upload:(B,F)=>!n.url&&T(l)?d():M(B,F)}},kc=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),U4=(e,n)=>Aa(n,{url:_P(e),basePath:TP(e),credentials:kP(e),handler:AP(e)}),Z4=e=>{const n=z4(),o=U4(e,n);return{upload:(r,c=!0)=>o.upload(r,c?kc(e):void 0)}},W4=(e,n)=>e.dom.isEmpty(n.dom)&&_e(e.schema.getTextBlockElements()[un(n)]),q2=e=>n=>{W4(e,n)&&Mo(n,z.fromHtml('<br data-mce-bogus="1" />'))},kH=e=>{const n=TH();let o,r;const c=z4(),l=[],d=X=>te=>e.selection?X(te):[],g=X=>X+(X.indexOf("?")===-1?"?":"&")+new Date().getTime(),h=(X,te,he)=>{let we=0;do we=X.indexOf(te,we),we!==-1&&(X=X.substring(0,we)+he+X.substr(we+te.length),we+=he.length-te.length+1);while(we!==-1);return X},y=(X,te,he)=>{const we=`src="${he}"${he===rn.transparentSrc?' data-mce-placeholder="1"':""}`;return X=h(X,`src="${te}"`,we),X=h(X,'data-mce-src="'+te+'"','data-mce-src="'+he+'"'),X},w=(X,te)=>{de(e.undoManager.data,he=>{he.type==="fragmented"?he.fragments=wt(he.fragments,we=>y(we,X,te)):he.content=y(he.content,X,te)})},T=(X,te)=>{const he=e.convertURL(te,"src");w(X.src,te),pa(z.fromDom(X),{src:qp(e)?g(te):te,"data-mce-src":he})},k=()=>(o||(o=U4(e,c)),F().then(d(X=>{const te=wt(X,he=>he.blobInfo);return o.upload(te,kc(e)).then(d(he=>{const we=[];let Ue=!1;const le=wt(he,(se,ve)=>{const{blobInfo:He,image:nt}=X[ve];let It=!1;return se.status&&Kp(e)?(se.url&&!ss(nt.src,se.url)&&(Ue=!0),n.removeByUri(nt.src),Ul(e)||T(nt,se.url)):se.error&&(se.error.remove&&(w(nt.src,rn.transparentSrc),we.push(nt),It=!0),TD(e,se.error.message)),{element:nt,status:se.status,uploadUri:se.url,blobInfo:He,removed:It}});return we.length>0&&!Ul(e)?e.undoManager.transact(()=>{de(Dt(we),se=>{const ve=Xc(se);v(se),ve.each(q2(e)),n.removeByUri(se.dom.src)})}):Ue&&e.undoManager.dispatchChange(),le}))}))),M=()=>Xr(e)?k():Promise.resolve([]),P=X=>Xt(l,te=>te(X)),B=X=>{l.push(X)},F=()=>(r||(r=hf(c,n)),r.findAll(e.getBody(),P).then(d(X=>{const te=gt(X,he=>ee(he)?(K1(e,he),!1):he.uriType!=="blob");return Ul(e)||de(te,he=>{w(he.image.src,he.blobInfo.blobUri()),he.image.src=he.blobInfo.blobUri(),he.image.removeAttribute("data-mce-src")}),te}))),U=()=>{n.destroy(),c.destroy(),r=o=null},q=X=>X.replace(/src="(blob:[^"]+)"/g,(te,he)=>{const we=c.getResultUri(he);if(we)return'src="'+we+'"';let Ue=n.getByUri(he);return Ue||(Ue=hs(e.editorManager.get(),(le,se)=>le||se.editorUpload&&se.editorUpload.blobCache.getByUri(he),void 0)),Ue?'src="data:'+Ue.blob().type+";base64,"+Ue.base64()+'"':te});return e.on("SetContent",()=>{Xr(e)?M():F()}),e.on("RawSaveContent",X=>{X.content=q(X.content)}),e.on("GetContent",X=>{X.source_view||X.format==="raw"||X.format==="tree"||(X.content=q(X.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",X=>{de(X,te=>{const he=te.attr("src");if(!he||n.getByUri(he))return;const we=c.getResultUri(he);we&&te.attr("src",we)})})}),{blobCache:n,addFilter:B,uploadImages:k,uploadImagesAuto:M,scanForImages:F,destroy:U}},VD=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},l={inline:"strike",remove:"all",preserve_attributes:["class","style"]},d={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[d,c,l]:[c,d,l]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,l,d)=>Ye(c)&&c.hasAttribute("href"),onformat:(c,l,d)=>{Oe.each(d,(g,h)=>{n.setAttrib(c,h,g)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var l;return(l=c==null?void 0:c.customValue)!==null&&l!==void 0?l:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Oe.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},bh={remove_similar:!0,inherit:!1},vh={selector:"td,th",...bh},K2={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...vh},tablecellverticalalign:{styles:{"vertical-align":"%value"},...vh},tablecellbordercolor:{styles:{borderColor:"%value"},...vh},tablecellclass:{classes:["%value"],...vh},tableclass:{selector:"table",classes:["%value"],...bh},tablecellborderstyle:{styles:{borderStyle:"%value"},...vh},tablecellborderwidth:{styles:{borderWidth:"%value"},...vh}},j4=Ve(K2),zD=e=>{const n={},o=d=>_e(d)?n[d]:n,r=d=>bt(n,d),c=(d,g)=>{d&&(ee(d)?(Kn(g)||(g=[g]),de(g,h=>{To(h.deep)&&(h.deep=!Cc(h)),To(h.split)&&(h.split=!Cc(h)||Ss(h)),To(h.remove)&&Cc(h)&&!Ss(h)&&(h.remove="none"),Cc(h)&&Ss(h)&&(h.mixed=!0,h.block_expand=!0),ee(h.classes)&&(h.classes=h.classes.split(/\s+/))}),n[d]=g):Le(d,(h,y)=>{c(y,h)}))},l=d=>(d&&n[d]&&delete n[d],n);return c(VD(e)),c(j4()),c(PP(e)),{get:o,has:r,register:c,unregister:l}},Ud=Oe.each,Ac=wn.DOM,G4=e=>_e(e)&&Ot(e),wi=(e,n)=>{const o=n&&n.schema||sr({}),r=(h,y)=>{y.classes.length>0&&Ac.addClass(h,y.classes.join(" ")),Ac.setAttribs(h,y.attrs)},c=h=>{const y=ee(h)?{name:h,classes:[],attrs:{}}:h,w=Ac.create(y.name);return r(w,y),w},l=(h,y)=>{const w=o.getElementRule(h.nodeName.toLowerCase()),T=w==null?void 0:w.parentsRequired;return T&&T.length?y&&St(T,y)?y:T[0]:!1},d=(h,y,w)=>{let T;const k=y[0],M=G4(k)?k.name:void 0,P=l(h,M);if(P)M===P?(T=k,y=y.slice(1)):T=P;else if(k)T=k,y=y.slice(1);else if(!w)return h;const B=T?c(T):Ac.create("div");B.appendChild(h),w&&Oe.each(w,U=>{const q=c(U);B.insertBefore(q,h)});const F=G4(T)?T.siblings:void 0;return d(B,y,F)},g=Ac.create("div");if(e.length>0){const h=e[0],y=c(h),w=G4(h)?h.siblings:void 0;g.appendChild(d(y,e.slice(1),w))}return g},Oa=e=>{e=Oe.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,l,d,g)=>{switch(c){case"#":o.attrs.id=l;break;case".":o.classes.push(l);break;case":":Oe.inArray("checked disabled enabled read-only required".split(" "),l)!==-1&&(o.attrs[l]=l);break}if(d==="["){const h=g.match(/([\w\-]+)(?:\=\"([^\"]+))?/);h&&(o.attrs[h[1]]=h[2])}return""})),o.name=n||"div",o},J1=e=>ee(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Oe.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Oe.map(n.split(/(?:~\+|~|\+)/),Oa),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],Da=(e,n)=>{let o="",r=IP(e);if(r==="")return"";const c=k=>ee(k)?k.replace(/%(\w+)/g,""):"",l=(k,M)=>Ac.getStyle(M??e.getBody(),k,!0);if(ee(n)){const k=e.formatter.get(n);if(!k)return"";n=k[0]}if("preview"in n){const k=n.preview;if(k===!1)return"";r=k||r}let d=n.block||n.inline||"span",g;const h=J1(n.selector);h.length>0?(h[0].name||(h[0].name=d),d=n.selector,g=wi(h,e)):g=wi([d],e);const y=Ac.select(d,g)[0]||g.firstChild;Ud(n.styles,(k,M)=>{const P=c(k);P&&Ac.setStyle(y,M,P)}),Ud(n.attributes,(k,M)=>{const P=c(k);P&&Ac.setAttrib(y,M,P)}),Ud(n.classes,k=>{const M=c(k);Ac.hasClass(y,M)||Ac.addClass(y,M)}),e.dispatch("PreviewFormats"),Ac.setStyles(g,{position:"absolute",left:-65535}),e.getBody().appendChild(g);const w=l("fontSize"),T=/px$/.test(w)?parseInt(w,10):0;return Ud(r.split(" "),k=>{let M=l(k,y);if(!(k==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(M)&&(M=l(k),Rp(M).toLowerCase()==="#ffffff"))&&!(k==="color"&&Rp(M).toLowerCase()==="#000000")){if(k==="font-size"&&/em|%$/.test(M)){if(T===0)return;M=parseFloat(M)/(/%$/.test(M)?100:1)*T+"px"}k==="border"&&M&&(o+="padding:0 2px;"),o+=k+":"+M+";"}}),e.dispatch("AfterPreviewFormats"),Ac.remove(g),o},AH=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},Nn=e=>{const n=zD(e),o=fo({});return AH(e),m$(e),Ul(e)||JO(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,l)=>{zL(e,r,c,l)},remove:(r,c,l,d)=>{C4(e,r,c,l,d)},toggle:(r,c,l)=>{sD(e,r,c,l)},match:(r,c,l,d)=>$L(e,r,c,l,d),closest:r=>$2(e,r),matchAll:(r,c)=>LL(e,r,c),matchNode:(r,c,l,d)=>HL(e,r,c,l,d),canApply:r=>VL(e,r),formatChanged:(r,c,l,d)=>L2(e,o,r,c,l,d),getCssText:qe(Da,e)}},UD=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},pf=(e,n,o)=>{const r=fo(!1),c=h=>{lh(n,!1,o),n.add({},h)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",h=>{const y=h.command;UD(y)||(eD(n,o),n.beforeChange())}),e.on("ExecCommand",h=>{const y=h.command;UD(y)||c(h)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",h=>{const y=h.keyCode;if(h.isDefaultPrevented())return;const w=rn.os.isMacOS()&&h.key==="Meta";(y>=33&&y<=36||y>=37&&y<=40||y===45||h.ctrlKey||w)&&(c(),e.nodeChanged()),(y===46||y===8)&&e.nodeChanged(),r.get()&&n.typing&&!b4(ih(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",h=>{const y=h.keyCode;if(h.isDefaultPrevented())return;if(y>=33&&y<=36||y>=37&&y<=40||y===45){n.typing&&c(h);return}const w=h.ctrlKey&&!h.altKey||h.metaKey;if((y<16||y>20)&&y!==224&&y!==91&&!n.typing&&!w){n.beforeChange(),lh(n,!0,o),n.add({},h),r.set(!0);return}(rn.os.isMacOS()?h.metaKey:h.ctrlKey&&!h.altKey)&&n.beforeChange()}),e.on("mousedown",h=>{n.typing&&c(h)});const l=h=>h.inputType==="insertReplacementText",d=h=>h.inputType==="insertText"&&h.data===null,g=h=>h.inputType==="insertFromPaste"||h.inputType==="insertFromDrop";e.on("input",h=>{h.inputType&&(l(h)||d(h)||g(h))&&c(h)}),e.on("AddUndo Undo Redo ClearUndos",h=>{h.isDefaultPrevented()||e.nodeChanged()})},Q1=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},q4=e=>{const n=fr(),o=fo(0),r=fo(0),c={data:[],typing:!1,beforeChange:()=>{NL(e,o,n)},add:(l,d)=>TG(e,c,r,o,n,l,d),dispatchChange:()=>{e.setDirty(!0);const l=ih(e);l.bookmark=_d(e.selection),e.dispatch("change",{level:l,lastLevel:nc(c.data,r.get()).getOrUndefined()})},undo:()=>xi(e,c,o,r),redo:()=>nD(e,r,c.data),clear:()=>{BL(e,c,r)},reset:()=>{oD(e,c)},hasUndo:()=>PL(e,c,r),hasRedo:()=>IL(e,c,r),transact:l=>kG(e,c,o,l),ignore:l=>{lr(e,o,l)},extra:(l,d)=>{FL(e,c,r,l,d)}};return Ul(e)||pf(e,c,o),Q1(e),c},K4=[9,27,je.HOME,je.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,je.DOWN,je.UP,je.LEFT,je.RIGHT].concat(rn.browser.isFirefox()?[224]:[]),Y2="data-mce-placeholder",ZD=e=>e.type==="keydown"||e.type==="keyup",X2=e=>{const n=e.keyCode;return n===je.BACKSPACE||n===je.DELETE},OH=e=>{if(ZD(e)){const n=e.keyCode;return!X2(e)&&(je.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||St(K4,n))}else return!1},WD=e=>ZD(e)&&!(X2(e)||e.type==="keyup"&&e.keyCode===229),jD=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},Y4=e=>{var n;const o=e.dom,r=Er(e),c=(n=NP(e))!==null&&n!==void 0?n:"",l=(d,g)=>{if(OH(d))return;const h=e.getBody(),y=WD(d)?!1:jD(o,h,r);(o.getAttrib(h,Y2)!==""!==y||g)&&(o.setAttrib(h,Y2,y?c:null),Bg(e,y),e.on(y?"keydown":"keyup",l),e.off(y?"keyup":"keydown",l))};tn(c)&&e.on("init",d=>{l(d,!0),e.on("change SetContent ExecCommand",l),e.on("paste",g=>Sc.setEditorTimeout(e,()=>l(g)))})},GD=(e,n)=>({block:e,position:n}),J2=(e,n)=>({from:e,to:n}),X4=(e,n)=>{const o=z.fromDom(e),r=z.fromDom(n.container());return S1(o,r).map(c=>GD(c,n))},DH=e=>!(ic(e.to.block,e.from.block)||ic(e.from.block,e.to.block)),MH=e=>!Gt(e.from.block,e.to.block),qD=(e,n)=>xl(n,c=>Cd(c)||oi(c.dom),c=>Gt(c,e)).filter(Pr).getOr(e),RH=(e,n)=>{const o=z.fromDom(e);return Gt(qD(o,n.from.block),qD(o,n.to.block))},KD=e=>to(e.from.block.dom)===!1&&to(e.to.block.dom)===!1,NH=e=>{const n=o=>Tx(o)||rx(o.dom)||yu(o);return n(e.from.block)&&n(e.to.block)},BH=(e,n,o,r)=>vo(r.position.getNode())&&!Sr(e,r.block)?Hm(!1,r.block.dom).bind(c=>c.isEqual(r.position)?bc(o,n,c).bind(l=>X4(n,l)):D.some(r)).getOr(r):r,YD=(e,n,o,r)=>{const c=X4(n,ue.fromRangeStart(r)),l=c.bind(d=>bc(o,n,d.position).bind(g=>X4(n,g).map(h=>BH(e,n,o,h))));return os(c,l,J2).filter(d=>MH(d)&&RH(n,d)&&KD(d)&&NH(d)&&DH(d))},PH=(e,n,o,r)=>r.collapsed?YD(e,n,o,r):D.none(),XD=(e,n)=>{const o=Os(e);return Gs(o,r=>n.isBlock(un(r))).fold(Ve(o),r=>o.slice(0,r))},yh=(e,n)=>{const o=XD(e,n);return de(o,v),o},JD=(e,n,o)=>{const r=Il(o,n);return mo(r.reverse(),c=>Sr(e,c)).each(v)},IH=(e,n)=>gt(pp(n),o=>!Sr(e,o)).length===0,QD=(e,n,o,r,c)=>{if(Sr(r,o))return xd(o),Ws(o.dom);IH(r,c)&&Sr(r,n)&&yr(c,z.fromTag("br"));const l=Jr(o.dom,ue.before(c.dom));return de(yh(n,r),d=>{yr(c,d)}),JD(r,e,n),l},e6=(e,n)=>e.isInline(un(n)),FH=(e,n,o,r)=>{if(Sr(r,o)){if(Sr(r,n)){const d=cl((g=>{const h=(y,w)=>ys(y).fold(()=>w,T=>e6(r,T)?h(T,w.concat($(T))):w);return h(g,[])})(o),(g,h)=>(mg(g,h),h),Cu());Fa(n),Mo(n,d)}return v(o),Ws(n.dom)}const c=wa(o.dom);return de(yh(n,r),l=>{Mo(o,l)}),JD(r,e,n),c},t6=(e,n)=>{const o=Il(n,e);return D.from(o[o.length-1])},Oc=(e,n)=>ic(n,e)?t6(n,e):D.none(),n6=(e,n)=>{Hm(e,n.dom).bind(o=>D.from(o.getNode())).map(z.fromDom).filter(Pm).each(v)},J4=(e,n,o,r)=>(n6(!0,n),n6(!1,o),Oc(n,o).fold(qe(FH,e,n,o,r),qe(QD,e,n,o,r))),Q2=(e,n,o,r,c)=>n?J4(e,r,o,c):J4(e,o,r,c),e0=(e,n)=>{const o=z.fromDom(e.getBody());return PH(e.schema,o.dom,n,e.selection.getRng()).map(c=>()=>{Q2(o,n,c.from.block,c.to.block,e.schema).each(l=>{e.selection.setRng(l.toRange())})})},o6=(e,n,o)=>{const r=n.getRng();return os(S1(e,z.fromDom(r.startContainer)),S1(e,z.fromDom(r.endContainer)),(c,l)=>Gt(c,l)?D.none():D.some(()=>{r.deleteContents(),Q2(e,!0,c,l,o).each(d=>{n.setRng(d.toRange())})})).getOr(D.none())},Q4=(e,n)=>{const o=z.fromDom(n),r=qe(Gt,e);return du(o,Cd,r).isSome()},$H=(e,n)=>Q4(e,n.startContainer)||Q4(e,n.endContainer),LH=(e,n)=>{const o=Jr(e.dom,ue.fromRangeStart(n)).isNone(),r=Qo(e.dom,ue.fromRangeEnd(n)).isNone();return!$H(e,n)&&o&&r},s6=e=>D.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),r6=e=>{const n=z.fromDom(e.getBody()),o=e.selection.getRng();return LH(n,o)?s6(e):o6(n,e.selection,e.schema)},Qr=(e,n)=>e.selection.isCollapsed()?D.none():r6(e),Vu=(e,n,o,r,c)=>D.from(n._selectionOverrides.showCaret(e,o,r,c)),HH=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},ey=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?D.none():D.some(HH(n)),eE=(e,n,o)=>{const r=lS(1,e.getBody(),n),c=ue.fromRangeStart(r),l=c.getNode();if(e1(l))return Vu(1,e,l,!c.isAtEnd(),!1);const d=c.getNode(!0);if(e1(d))return Vu(1,e,d,!1,!1);const g=nf(e.dom.getRoot(),c.getNode());return e1(g)?Vu(1,e,g,!1,o):D.none()},tE=(e,n,o)=>n.collapsed?eE(e,n,o).getOr(n):n,AG=e=>Jm(e)||v1(e),VH=e=>Qm(e)||Xm(e),nE=(e,n)=>{ke(n)&&n.data.length===0&&e.remove(n)},Dc=(e,n,o,r,c,l)=>{Vu(r,e,l.getNode(!c),c,!0).each(d=>{if(n.collapsed){const g=n.cloneRange();c?g.setEnd(d.startContainer,d.startOffset):g.setStart(d.endContainer,d.endOffset),g.deleteContents()}else n.deleteContents();e.selection.setRng(d)}),nE(e.dom,o)},oE=(e,n)=>{const o=e.selection.getRng();if(!ke(o.commonAncestorContainer))return D.none();const r=n?1:-1,c=gi(e.getBody()),l=qe(uS,n?c.next:c.prev),d=n?AG:VH,g=r1(r,e.getBody(),o),h=l(g),y=h&&Ec(n,h);if(!y||!wv(g,y))return D.none();if(d(y))return D.some(()=>Dc(e,o,g.getNode(),r,n,y));const w=l(y);return w&&d(w)&&wv(y,w)?D.some(()=>Dc(e,o,g.getNode(),r,n,w)):D.none()},Ch=(e,n)=>oE(e,n),t0=(e,n)=>{const o=e.getBody();return n?Ws(o).filter(Jm):wa(o).filter(Qm)},sE=e=>{const n=e.selection.getRng();return!n.collapsed&&(t0(e,!0).exists(o=>o.isEqual(ue.fromRangeStart(n)))||t0(e,!1).exists(o=>o.isEqual(ue.fromRangeEnd(n))))},rE=e=>_e(e)&&(Cd(z.fromDom(e))||yu(z.fromDom(e))),qa=Ys.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),a6=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Ye(o)&&o.getAttribute("data-mce-caret")===r},zH=(e,n,o,r,c)=>{const l=d=>c.isInline(d.nodeName.toLowerCase())&&!ji(o,r,e);return Ek(!n,o).fold(()=>Ek(n,r).fold(Ce,l),l)},c6=(e,n,o,r,c)=>{const l=c.getNode(!o);return S1(z.fromDom(n),z.fromDom(r.getNode())).map(d=>Sr(e,d)?qa.remove(d.dom):qa.moveToElement(l)).orThunk(()=>D.some(qa.moveToElement(l)))},ty=(e,n,o,r)=>bc(n,e,o).bind(c=>rE(c.getNode())||zH(e,n,o,c,r)?D.none():n&&to(c.getNode())||!n&&to(c.getNode(!0))?c6(r,e,n,o,c):n&&Qm(o)||!n&&Jm(o)?D.some(qa.moveToPosition(c)):D.none()),UH=(e,n)=>vn(n)?D.none():e&&to(n.nextSibling)?D.some(qa.moveToElement(n.nextSibling)):!e&&to(n.previousSibling)?D.some(qa.moveToElement(n.previousSibling)):D.none(),i6=(e,n,o)=>o.fold(r=>D.some(qa.remove(r)),r=>D.some(qa.moveToElement(r)),r=>ji(n,r,e)?D.none():D.some(qa.moveToPosition(r))),ZH=(e,n,o,r)=>a6(n,o)?UH(n,o.getNode(!n)).orThunk(()=>ty(e,n,o,r)):ty(e,n,o,r).bind(c=>i6(e,o,c)),bf=(e,n,o,r)=>{const c=lS(n?1:-1,e,o),l=ue.fromRangeStart(c),d=z.fromDom(e);return!n&&Qm(l)?D.some(qa.remove(l.getNode(!0))):n&&Jm(l)?D.some(qa.remove(l.getNode())):!n&&Jm(l)&&Jv(d,l,r)?PA(d,l,r).map(g=>qa.remove(g.getNode())):n&&Qm(l)&&nw(d,l,r)?GI(d,l,r).map(g=>qa.remove(g.getNode())):ZH(e,n,l,r)},l6=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),ef(e,n,z.fromDom(o)),!0),WH=(e,n)=>o=>{const r=n?ue.before(o):ue.after(o);return e.selection.setRng(r.toRange()),!0},u6=e=>n=>(e.selection.setRng(n.toRange()),!0),d6=(e,n)=>D.from(nf(e.getBody(),n)),jH=(e,n)=>{const o=e.selection.getNode();return d6(e,o).filter(to).fold(()=>bf(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(l6(e,n),WH(e,n),u6(e))),()=>D.some(it))},GH=e=>{de(Zn(e,".mce-offscreen-selection"),v)},qH=(e,n)=>{const o=e.selection.getNode();return to(o)&&!kp(o)?d6(e,o.parentNode).filter(to).fold(()=>D.some(()=>{GH(z.fromDom(e.getBody())),ef(e,n,z.fromDom(e.selection.getNode())),w1(e)}),()=>D.some(it)):sE(e)?D.some(()=>{sO(e,e.selection.getRng(),z.fromDom(e.getBody()))}):D.none()},m6=e=>{const n=e.dom,o=e.selection,r=nf(e.getBody(),o.getNode());if(oi(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(ue.before(c).toRange())}return!0},ny=(e,n)=>e.selection.isCollapsed()?jH(e,n):qH(e,n),f6=e=>e.hasOwnProperty("text"),oy=e=>e.hasOwnProperty("marker"),zu=(e,n)=>{const o=(l,d)=>{if(ke(l))return{text:l,offset:d};{const g=n(),h=l.childNodes;return d<h.length?(l.insertBefore(g,h[d]),{marker:g,before:!0}):(l.appendChild(g),{marker:g,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},g6=e=>{var n,o;const{start:r,end:c}=e,l=new window.Range;return f6(r)?l.setStart(r.text,r.offset):oy(r)&&(r.before?l.setStartBefore(r.marker):l.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),f6(c)?l.setEnd(c.text,c.offset):oy(c)&&(c.before?l.setEndBefore(c.marker):l.setEndAfter(c.marker),(o=c.marker.parentNode)===null||o===void 0||o.removeChild(c.marker)),l},aE=(e,n)=>{var o;const r=e.dom,c=r.getParent(e.selection.getStart(),r.isBlock),l=r.getParent(e.selection.getEnd(),r.isBlock),d=e.getBody();if(((o=c==null?void 0:c.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&c&&l&&c===d.firstChild&&l===d.lastChild&&!r.isEmpty(d)){const h=c.cloneNode(!1),y=()=>{if(n?nO(e):s2(e),d.firstChild!==c){const w=zu(e.selection.getRng(),()=>document.createElement("span"));Array.from(d.childNodes).forEach(T=>h.appendChild(T)),d.appendChild(h),e.selection.setRng(g6(w))}};return D.some(y)}return D.none()},sy=(e,n)=>{const o=ue.fromRangeStart(e.selection.getRng());return bc(n,e.getBody(),o).filter(r=>n?nG(r):VI(r)).bind(r=>iS(n?0:-1,r)).map(r=>()=>e.selection.select(r))},ry=(e,n)=>e.selection.isCollapsed()?sy(e,n):D.none(),vf=ke,cE=e=>vf(e)&&e.data[0]===Cs,n0=e=>vf(e)&&e.data[e.data.length-1]===Cs,iE=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Cs)},KH=e=>{var n;if(vf(e.previousSibling))return n0(e.previousSibling)||e.previousSibling.appendData(Cs),e.previousSibling;if(vf(e))return cE(e)||e.insertData(0,Cs),e;{const o=iE(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},h6=e=>{var n,o;if(vf(e.nextSibling))return cE(e.nextSibling)||e.nextSibling.insertData(0,Cs),e.nextSibling;if(vf(e))return n0(e)||e.appendData(Cs),e;{const r=iE(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},ay=(e,n)=>e?KH(n):h6(n),YH=qe(ay,!0),cy=qe(ay,!1),lE=(e,n)=>ke(e.container())?ay(n,e.container()):ay(n,e.getNode()),o0=(e,n)=>{const o=n.get();return o&&e.container()===o&&rr(o)},uE=(e,n)=>n.fold(o=>{Od(e.get());const r=YH(o);return e.set(r),D.some(ue(r,r.length-1))},o=>Ws(o).map(r=>{if(o0(r,e)){const c=e.get();return ue(c,1)}else{Od(e.get());const c=lE(r,!0);return e.set(c),ue(c,1)}}),o=>wa(o).map(r=>{if(o0(r,e)){const c=e.get();return ue(c,c.length-1)}else{Od(e.get());const c=lE(r,!1);return e.set(c),ue(c,c.length-1)}}),o=>{Od(e.get());const r=cy(o);return e.set(r),D.some(ue(r,1))}),p6=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return D.none()},Lr=Ys.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),dE=(e,n)=>{const o=Ou(n,e);return o||e},mE=(e,n,o)=>{const r=eO(o),c=dE(n,r.container());return Nd(e,c,r).fold(()=>Qo(c,r).bind(qe(Nd,e,c)).map(l=>Lr.before(l)),D.none)},b6=(e,n)=>Vm(e,n)===null,v6=(e,n,o)=>Nd(e,n,o).filter(qe(b6,n)),XH=(e,n,o)=>{const r=uw(o);return v6(e,n,r).bind(c=>Jr(c,r).isNone()?D.some(Lr.start(c)):D.none())},JH=(e,n,o)=>{const r=eO(o);return v6(e,n,r).bind(c=>Qo(c,r).isNone()?D.some(Lr.end(c)):D.none())},s0=(e,n,o)=>{const r=uw(o),c=dE(n,r.container());return Nd(e,c,r).fold(()=>Jr(c,r).bind(qe(Nd,e,c)).map(l=>Lr.after(l)),D.none)},Ei=e=>!XA(r0(e)),Zl=(e,n,o)=>p6([mE,XH,JH,s0],[e,n,o]).filter(Ei),r0=e=>e.fold(Ts,Ts,Ts,Ts),uo=e=>e.fold(Ve("before"),Ve("start"),Ve("end"),Ve("after")),xh=e=>e.fold(Lr.before,Lr.before,Lr.after,Lr.after),Sh=e=>e.fold(Lr.start,Lr.start,Lr.end,Lr.end),Uu=(e,n)=>uo(e)===uo(n)&&r0(e)===r0(n),y6=(e,n,o,r,c,l)=>os(Nd(n,o,r),Nd(n,o,c),(d,g)=>d!==g&&QA(o,d,g)?Lr.after(e?d:g):l).getOr(l),fE=(e,n)=>e.fold(ze,o=>!Uu(o,n)),QH=(e,n,o,r,c)=>{const l=Ec(e,c);return bc(e,o,l).map(qe(Ec,e)).fold(()=>r.map(xh),h=>Zl(n,o,h).map(qe(y6,e,n,o,l,h)).filter(qe(fE,r))).filter(Ei)},wh=(e,n)=>e?n.fold(x(D.some,Lr.start),D.none,x(D.some,Lr.after),D.none):n.fold(D.none,x(D.some,Lr.before),D.none,x(D.some,Lr.end)),e9=(e,n,o,r)=>{const c=Ec(e,r),l=Zl(n,o,c);return Zl(n,o,c).bind(qe(wh,e)).orThunk(()=>QH(e,n,o,l,r))},t9=e=>Zt(e.selection.getSel().modify),yf=(e,n,o)=>{const r=e?1:-1;return n.setRng(ue(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},n9=(e,n)=>{const o=n.selection.getRng(),r=e?ue.fromRangeEnd(o):ue.fromRangeStart(o);return t9(n)?e&&Ox(r)?yf(!0,n.selection,r):!e&&Lp(r)?yf(!1,n.selection,r):!1:!1};var ea;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(ea||(ea={}));const iy=(e,n)=>e===-1?Yn(n):n,Zd=(e,n,o)=>e===1?n.next(o):n.prev(o),o9=(e,n,o,r)=>vo(r.getNode(n===1))?ea.Br:ji(o,r)===!1?ea.Block:ea.Wrap,Ka=(e,n,o,r)=>{const c=gi(o);let l=r;const d=[];for(;l;){const g=Zd(n,c,l);if(!g)break;if(vo(g.getNode(!1)))return n===1?{positions:iy(n,d).concat([g]),breakType:ea.Br,breakAt:D.some(g)}:{positions:iy(n,d),breakType:ea.Br,breakAt:D.some(g)};if(!g.isVisible()){l=g;continue}if(e(l,g)){const h=o9(o,n,l,g);return{positions:iy(n,d),breakType:h,breakAt:D.some(g)}}d.push(g),l=g}return{positions:iy(n,d),breakType:ea.Eol,breakAt:D.none()}},Wd=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const l=n(o,c).positions;return e===-1?l.concat(c):[c].concat(l)}).getOr([]),Cf=(e,n)=>hs(e,(o,r)=>o.fold(()=>D.some(r),c=>os($o(c.getClientRects()),$o(r.getClientRects()),(l,d)=>{const g=Math.abs(n-l.left);return Math.abs(n-d.left)<=g?r:c}).or(o)),D.none()),Eh=(e,n)=>$o(n.getClientRects()).bind(o=>Cf(e,o.left)),a0=qe(Ka,ue.isAbove,-1),Wl=qe(Ka,ue.isBelow,1),C6=qe(Wd,-1,a0),Mc=qe(Wd,1,Wl),c0=(e,n)=>a0(e,n).breakAt.isNone(),gE=(e,n)=>Wl(e,n).breakAt.isNone(),hE=e=>Ws(e).map(n=>[n].concat(Wl(e,n).positions)).getOr([]),pE=e=>wa(e).map(n=>a0(e,n).positions.concat(n)).getOr([]),xf=(e,n)=>Eh(C6(e,n),n),bE=(e,n)=>Eh(Mc(e,n),n),s9=to,x6=(e,n)=>Math.abs(e.left-n),S6=(e,n)=>Math.abs(e.right-n),r9=e=>tu(e,"node"),w6=(e,n)=>ll(e,(o,r)=>{const c=Math.min(x6(o,n),S6(o,n)),l=Math.min(x6(r,n),S6(r,n));return l===c&&r9(r)&&s9(r.node)||l<c?r:o}),a9=e=>{const n=o=>wt(o,r=>{const c=Su(r);return c.node=e,c});if(Ye(e))return n(e.getClientRects());if(ke(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},Sf=e=>qs(e,a9);var Hr;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Hr||(Hr={}));const c9=(e,n,o,r)=>{let c=r;for(;c=Zg(c,e,$x,n);)if(o(c))return},E6=(e,n,o,r,c,l)=>{let d=0;const g=[],h=T=>{let k=Sf([T]);e===Hr.Up&&(k=k.reverse());for(let M=0;M<k.length;M++){const P=k[M];if(!o(P,y)){if(g.length>0&&n(P,Fs(g))&&d++,P.line=d,c(P))return!0;g.push(P)}}return!1},y=Fs(l.getClientRects());if(!y)return g;const w=l.getNode();return w&&(h(w),c9(e,r,h,w)),g},i9=(e,n)=>n.line>e,l9=(e,n)=>n.line===e,u9=qe(E6,Hr.Up,Mg,Rg),d9=qe(E6,Hr.Down,Rg,Mg),_6=e=>Fs(e.getClientRects()),m9=(e,n,o,r)=>{const c=gi(n);let l,d,g,h;const y=[];let w=0;e===Hr.Down?(l=c.next,d=Rg,g=Mg,h=ue.after(r)):(l=c.prev,d=Mg,g=Rg,h=ue.before(r));const T=_6(h);do{if(!h.isVisible())continue;const k=_6(h);if(g(k,T))continue;y.length>0&&d(k,Fs(y))&&w++;const M=Su(k);if(M.position=h,M.line=w,o(M))return y;y.push(M)}while(h=l(h));return y},T6=e=>n=>i9(e,n),k6=e=>n=>l9(e,n),Zu=(e,n)=>{e.selection.setRng(n),Km(e,e.selection.getRng())},vE=(e,n,o)=>D.some(tE(e,n,o)),A6=(e,n,o,r,c,l)=>{const d=n===1,g=gi(e.getBody()),h=qe(uS,d?g.next:g.prev),y=d?r:c;if(!o.collapsed){const P=Xb(o);if(l(P))return Vu(n,e,P,n===-1,!1);if(sE(e)){const B=o.cloneRange();return B.collapse(n===-1),D.from(B)}}const w=r1(n,e.getBody(),o);if(y(w))return ey(e,w.getNode(!d));let T=h(w);const k=Mx(o);if(T)T=Ec(d,T);else return k?D.some(o):D.none();if(y(T))return Vu(n,e,T.getNode(!d),d,!1);const M=h(T);return M&&y(M)&&wv(T,M)?Vu(n,e,M.getNode(!d),d,!1):k?vE(e,T.toRange(),!1):D.none()},O6=(e,n,o,r,c,l)=>{const d=r1(n,e.getBody(),o),g=Fs(d.getClientRects()),h=n===Hr.Down,y=e.getBody();if(!g)return D.none();if(sE(e)){const F=h?ue.fromRangeEnd(o):ue.fromRangeStart(o);return(h?bE:xf)(y,F).orThunk(()=>D.from(F)).map(q=>q.toRange())}const T=(h?d9:u9)(y,T6(1),d),k=gt(T,k6(1)),M=g.left,P=w6(k,M);if(P&&l(P.node)){const F=Math.abs(M-P.left),U=Math.abs(M-P.right);return Vu(n,e,P.node,F<U,!1)}let B;if(r(d)?B=d.getNode():c(d)?B=d.getNode(!0):B=Xb(o),B){const F=m9(n,y,T6(1),B);let U=w6(gt(F,k6(1)),M);if(U||(U=Fs(gt(F,k6(0))),U))return vE(e,U.position.toRange(),!1)}return k.length===0?yE(e,h).filter(h?c:r).map(F=>tE(e,F.toRange(),!1)):D.none()},yE=(e,n)=>{const o=e.selection.getRng(),r=n?ue.fromRangeEnd(o):ue.fromRangeStart(o),c=v7(r.container(),e.getBody());if(n){const l=Wl(c,r);return mr(l.positions)}else{const l=a0(c,r);return $o(l.positions)}},D6=(e,n,o)=>yE(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),Yi=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},M6=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},R6=(e,n,o)=>uE(n,o).map(r=>(Yi(e,r),o)),CE=(e,n,o)=>{const r=ue.fromRangeStart(e);if(e.collapsed)return r;{const c=ue.fromRangeEnd(e);return o?Jr(n,c).getOr(c):Qo(n,r).getOr(r)}},N6=(e,n,o)=>{const r=e.getBody(),c=CE(e.selection.getRng(),r,o),l=qe(tf,e);return e9(o,l,r,c).bind(g=>R6(e,n,g))},xE=(e,n,o)=>{const r=wt(Zn(z.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),d=>d.dom),c=gt(r,e),l=gt(o,e);de(eu(c,l),qe(M6,!1)),de(eu(l,c),qe(M6,!0))},f9=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=ue.fromRangeStart(e.selection.getRng());ue.isTextPosition(r)&&!mF(r)&&(Yi(e,vk(o,r)),n.set(null))}},g9=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=gt(r,e);de(c,l=>{const d=ue.fromRangeStart(n.selection.getRng());Zl(e,n.getBody(),d).bind(g=>R6(n,o,g))})}},B6=(e,n,o)=>Lg(e)?N6(e,n,o).isSome():!1,P6=(e,n,o)=>Lg(n)?n9(e,n):!1,h9=e=>{const n=fo(null),o=qe(tf,e);return e.on("NodeChange",r=>{Lg(e)&&(xE(o,e.dom,r.parents),f9(e,n),g9(o,e,n,r.parents))}),n},p9=qe(P6,!0),b9=qe(P6,!1),ly=(e,n,o)=>{if(Lg(e)){const r=yE(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?ue.fromRangeEnd(c):ue.fromRangeStart(c)});return Zl(qe(tf,e),e.getBody(),r).exists(c=>{const l=xh(c);return uE(o,l).exists(d=>(Yi(e,d),!0))})}else return!1},v9=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},y9=e=>os(Ws(e),wa(e),(n,o)=>{const r=Ec(!0,n),c=Ec(!1,o);return Qo(e,r).forall(l=>l.isEqual(c))}).getOr(!0),I6=(e,n)=>o=>uE(n,o).map(r=>()=>Yi(e,r)),F6=(e,n,o,r)=>{const c=e.getBody(),l=qe(tf,e);e.undoManager.ignore(()=>{e.selection.setRng(v9(o,r)),s2(e),Zl(l,c,ue.fromRangeStart(e.selection.getRng())).map(Sh).bind(I6(e,n)).each(al)}),e.nodeChanged()},C9=(e,n)=>{const o=Ou(n,e);return o||e},x9=(e,n,o,r)=>{const c=C9(e.getBody(),r.container()),l=qe(tf,e),d=Zl(l,c,r);return d.bind(h=>o?h.fold(Ve(D.some(Sh(h))),D.none,Ve(D.some(xh(h))),D.none):h.fold(D.none,Ve(D.some(xh(h))),D.none,Ve(D.some(Sh(h))))).map(I6(e,n)).getOrThunk(()=>{const h=hi(o,c,r),y=h.bind(w=>Zl(l,c,w));return os(d,y,()=>Nd(l,c,r).bind(w=>y9(w)?D.some(()=>{ef(e,o,z.fromDom(w))}):D.none())).getOrThunk(()=>y.bind(()=>h.map(w=>()=>{o?F6(e,n,r,w):F6(e,n,w,r)})))})},SE=(e,n,o)=>{if(e.selection.isCollapsed()&&Lg(e)){const r=ue.fromRangeStart(e.selection.getRng());return x9(e,n,o,r)}return D.none()},S9=e=>lg(e)>1,$6=(e,n)=>{const o=z.fromDom(e.getBody()),r=z.fromDom(e.selection.getStart()),c=Il(r,o);return Gs(c,n).fold(Ve(c),l=>c.slice(0,l))},w9=e=>lg(e)===1,E9=e=>$6(e,n=>e.schema.isBlock(un(n))||S9(n)),_9=e=>$6(e,n=>e.schema.isBlock(un(n))),wE=(e,n)=>{const o=qe(Mw,e);return qs(n,r=>o(r)?[r.dom]:[])},L6=e=>{const n=_9(e);return wE(e,n)},T9=(e,n,o,r)=>{const c=wE(n,r);if(c.length===0)ef(n,e,o);else{const l=Dw(o.dom,c);n.selection.setRng(l.toRange())}},k9=(e,n)=>{const o=gt(E9(e),w9);return mr(o).bind(r=>{const c=ue.fromRangeStart(e.selection.getRng());return dw(n,c,r.dom)&&!Nv(r)?D.some(()=>T9(n,e,r,o)):D.none()})},A9=(e,n)=>{const o=n.parentElement;return vo(n)&&!Y(o)&&e.dom.isEmpty(o)},O9=e=>Nv(z.fromDom(e)),H6=(e,n)=>{const o=e.selection.getStart(),r=A9(e,o)||O9(o)?Dw(o,n):M1(e.selection.getRng(),n);e.selection.setRng(r.toRange())},D9=(e,n)=>{const o=eu(n,L6(e));o.length>0&&H6(e,o)},V6=e=>ke(e.startContainer),z6=e=>e.startOffset===0&&V6(e),M9=(e,n)=>{const o=n.startContainer.parentElement;return!Y(o)&&Mw(e,z.fromDom(o))},R9=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!Y(n)&&!Y(o)&&n.isEqualNode(o)},N9=e=>{const n=e.endContainer;return e.endOffset===(ke(n)?n.length:n.childNodes.length)},B9=e=>R9(e)&&N9(e),P9=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),I9=e=>B9(e)||P9(e),F9=e=>{const n=e.selection.getRng();return z6(n)&&M9(e,n)&&I9(n)},$9=e=>{if(F9(e)){const n=L6(e);return D.some(()=>{s2(e),D9(e,n)})}else return D.none()},EE=(e,n)=>e.selection.isCollapsed()?k9(e,n):$9(e),U6=(e,n)=>XC(e,o=>vc(o.dom),o=>n.isBlock(un(o))),Z6=e=>U6(z.fromDom(e.selection.getStart()),e.schema),W6=e=>{const n=e.selection.getRng();return n.collapsed&&(V6(n)||e.dom.isEmpty(n.startContainer))&&!Z6(e)},uy=e=>(W6(e)&&H6(e,[]),!0),dy=(e,n,o)=>_e(o)?D.some(()=>{e._selectionOverrides.hideFakeCaret(),ef(e,n,z.fromDom(o))}):D.none(),L9=(e,n)=>{const o=n?v1:Xm,c=r1(n?1:-1,e.getBody(),e.selection.getRng());return o(c)?dy(e,n,c.getNode(!n)):D.from(Ec(n,c)).filter(l=>o(l)&&wv(c,l)).bind(l=>dy(e,n,l.getNode(!n)))},j6=(e,n)=>{const o=e.selection.getNode();return dc(o)?dy(e,n,o):D.none()},_E=(e,n)=>e.selection.isCollapsed()?L9(e,n):j6(e,n),H9=e=>xl(e,n=>oi(n.dom)||to(n.dom)).exists(n=>oi(n.dom)),TE=e=>Fi(e??"").getOr(0),G6=(e,n)=>{const o=e||CT(n)?"margin":"padding",r=Yo(n,"direction")==="rtl"?"-right":"-left";return o+r},V9=(e,n,o,r,c,l)=>{const d=G6(o,z.fromDom(l)),g=TE(e.getStyle(l,d));if(n==="outdent"){const h=Math.max(0,g-r);e.setStyle(l,d,h?h+c:"")}else{const h=g+r+c;e.setStyle(l,d,h)}},z9=(e,n)=>Xt(n,o=>{const r=G6(Fg(e),o),c=pb(o,r).map(TE).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),my=e=>{const n=kE(e);return!e.mode.isReadOnly()&&(n.length>1||z9(e,n))},fy=e=>Ag(e)||yu(e),U9=e=>Xc(e).exists(fy),kE=e=>gt(Dt(e.selection.getSelectedBlocks()),n=>!fy(n)&&!U9(n)&&H9(n)),q6=(e,n)=>{var o,r;if(e.mode.isReadOnly())return;const{dom:c}=e,l=cn(e),d=(r=(o=/[a-z%]+$/i.exec(l))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",g=TE(l),h=Fg(e);de(kE(e),y=>{V9(c,n,h,g,d,y.dom)})},Z9=e=>q6(e,"indent"),K6=e=>q6(e,"outdent"),Y6=e=>{if(e.selection.isCollapsed()&&my(e)){const n=e.dom,o=e.selection.getRng(),r=ue.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&tw(z.fromDom(c),r,e.schema))return D.some(()=>K6(e))}return D.none()},X6=(e,n,o)=>Uc([Y6,ny,Ch,(r,c)=>SE(r,n,c),e0,l2,ry,_E,Qr,EE,aE],r=>r(e,o)).filter(r=>e.selection.isEditable()),W9=(e,n)=>{X6(e,n,!1).fold(()=>{e.selection.isEditable()&&(s2(e),w1(e))},al)},j9=(e,n)=>{X6(e,n,!0).fold(()=>{e.selection.isEditable()&&nO(e)},al)},G9=(e,n)=>{e.addCommand("delete",()=>{W9(e,n)}),e.addCommand("forwardDelete",()=>{j9(e,n)})},J6=5,q9=400,gy=e=>e.touches===void 0||e.touches.length!==1?D.none():D.some(e.touches[0]),K9=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>J6||r>J6},Y9=e=>{const n=fr(),o=fo(!1),r=od(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},q9);e.on("touchstart",c=>{gy(c).each(l=>{r.cancel();const d={x:l.clientX,y:l.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(d)})},!0),e.on("touchmove",c=>{r.cancel(),gy(c).each(l=>{n.on(d=>{K9(l,d)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(l=>l.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},AE=(e,n)=>bt(e,n.nodeName),X9=(e,n)=>ke(n)?!0:Ye(n)?!AE(e.getBlockElements(),n)&&!yc(n)&&!ri(e,n)&&!J_(n):!1,J9=(e,n,o)=>On(MA(z.fromDom(o),z.fromDom(n)),r=>AE(e,r.dom)),Q6=(e,n)=>{if(ke(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||AE(e,n.nextSibling)||J_(n.nextSibling)}return!1},Wu=e=>e.dom.create(Er(e),Gp(e)),eM=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),l=o.getStart(),d=e.getBody();let g,h,y=null;const w=Er(e);if(!l||!Ye(l))return;const T=d.nodeName.toLowerCase();if(!r.isValidChild(T,w.toLowerCase())||J9(c,d,l))return;if(d.firstChild===d.lastChild&&vo(d.firstChild)){g=Wu(e),g.appendChild(Cu().dom),d.replaceChild(g,d.firstChild),e.selection.setCursorLocation(g,0),e.nodeChanged();return}let k=d.firstChild;for(;k;)if(Ye(k)&&Pb(r,k),X9(r,k)){if(Q6(c,k)){h=k,k=k.nextSibling,n.remove(h);continue}if(!g){if(!y&&e.hasFocus()&&(y=zu(e.selection.getRng(),()=>document.createElement("span"))),!k.parentNode){k=null;break}g=Wu(e),d.insertBefore(g,k)}h=k,k=k.nextSibling,g.appendChild(h)}else g=null,k=k.nextSibling;y&&(e.selection.setRng(g6(y)),e.nodeChanged())},tM=(e,n,o)=>{const r=z.fromDom(Wu(e)),c=Cu();Mo(r,c),o(n,r);const l=document.createRange();return l.setStartBefore(c.dom),l.setEndBefore(c.dom),l},Q9=e=>{e.on("NodeChange",()=>eM(e))},nM=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,eV=(e,n,o)=>function(r){const c=arguments,l=c[c.length-2],d=l>0?n.charAt(l-1):"";if(d==='"')return r;if(d===">"){const g=n.lastIndexOf("<",l);if(g!==-1&&n.substring(g,l).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},_h=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],eV(e,c,uk(e)));o.content=c}},tV=(e,n)=>Xt(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),OE=e=>{const n="contenteditable",o=" "+Oe.trim(qP(e))+" ",r=" "+Oe.trim(uk(e))+" ",c=nM(o),l=nM(r),d=KP(e);d.length>0&&e.on("BeforeSetContent",g=>{_h(e,d,g)}),e.parser.addAttributeFilter("class",g=>{let h=g.length;for(;h--;){const y=g[h];c(y)?y.attr(n,"true"):l(y)&&y.attr(n,"false")}}),e.serializer.addAttributeFilter(n,g=>{let h=g.length;for(;h--;){const y=g[h];if(!c(y)&&!l(y))continue;const w=y.attr("data-mce-content");d.length>0&&w?tV(d,w)?(y.name="#text",y.type=3,y.raw=!0,y.value=w):y.remove():y.attr(n,null)}})},DE=e=>mu(z.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),oM=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Kb(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},sM=(e,n)=>{const o=DE(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),oM(e,o);return}$p(o)&&(oM(e,o),e.undoManager.add())}},hy=e=>{e.on("keyup compositionstart",qe(sM,e))},rM=to,nV=(e,n,o)=>A6(n,e,o,Jm,Qm,rM),oV=(e,n,o)=>O6(n,e,o,l=>Jm(l)||JS(l),l=>Qm(l)||DA(l),rM),sV=e=>{const n=e.dom.create(Er(e));return n.innerHTML='<br data-mce-bogus="1">',n},aM=(e,n,o)=>{const r=gi(e.getBody()),c=qe(uS,n===1?r.next:r.prev);if(o.collapsed){const l=e.dom.getParent(o.startContainer,"PRE");if(!l)return;if(!c(ue.fromRangeStart(o))){const g=z.fromDom(sV(e));n===1?Li(z.fromDom(l),g):yr(z.fromDom(l),g),e.selection.select(g.dom,!0),e.selection.collapse()}}},ME=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return nV(o,e,r).orThunk(()=>(aM(e,o,r),D.none()))},rV=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return oV(o,e,r).orThunk(()=>(aM(e,o,r),D.none()))},aV=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return XA(o)?!n:n},cM=(e,n)=>ME(e,aV(e.selection,n)).exists(o=>(Zu(e,o),!0)),iM=(e,n)=>rV(e,n).exists(o=>(Zu(e,o),!0)),lM=(e,n)=>D6(e,n,n?Qm:Jm),py=(e,n)=>t0(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(Zu(e,o),!0)),cV=e=>St(["figcaption"],un(e)),iV=(e,n,o)=>{const r=qe(Gt,n);return xl(z.fromDom(e.container()),c=>o.isBlock(un(c)),r).filter(cV)},lV=(e,n,o)=>n?gE(e.dom,o):c0(e.dom,o),uV=(e,n)=>{const o=z.fromDom(e.getBody()),r=ue.fromRangeStart(e.selection.getRng());return iV(r,o,e.schema).exists(()=>{if(lV(o,n,r)){const l=tM(e,o,n?Mo:vm);return e.selection.setRng(l),!0}else return!1})},uM=(e,n)=>e.selection.isCollapsed()?uV(e,n):!1,dV=(e,n,o)=>{const r=e.selection.getRng(),c=ue.fromRangeStart(r);return e.getBody().firstChild===n&&c0(o,c)?(e.execCommand("InsertNewBlockBefore"),!0):!1},mV=(e,n)=>{const o=e.selection.getRng(),r=ue.fromRangeStart(o);return e.getBody().lastChild===n&&gE(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},fV=(e,n)=>n?D.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>mV(e,o)).getOr(!1):D.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>D.from(e.dom.getParent(o,"details")).map(r=>dV(e,r,o))).getOr(!1),RE=(e,n)=>fV(e,n),dM={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},gV=e=>wt(e,n=>({...dM,...n})),hV=e=>wt(e,n=>({...dM,...n})),mM=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,pV=(e,n)=>qs(gV(e),o=>mM(o,n)?[o]:[]),NE=(e,n)=>qs(hV(e),o=>mM(o,n)?[o]:[]),Ct=(e,...n)=>()=>e.apply(null,n),i0=(e,n)=>mo(pV(e,n),o=>o.action()),fM=(e,n)=>Uc(NE(e,n),o=>o.action()),gM=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return A6(e,o,r,v1,Xm,dc).exists(c=>(Zu(e,c),!0))},hM=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return O6(e,o,r,v1,Xm,dc).exists(c=>(Zu(e,c),!0))},pM=(e,n)=>D6(e,n,n?Xm:v1),bV=(e,n)=>bM(e,n,ze),bM=(e,n,o)=>qs(Os(e),r=>ha(r,n)?o(r)?[r]:[]:bM(r,n,o)),vV=(e,n,o=Ce)=>{if(o(n))return D.none();if(St(e,un(n)))return D.some(n);const r=c=>ha(c,"table")||o(c);return xp(n,e.join(","),r)},yV=(e,n)=>vV(["td","th"],e,n),CV=e=>bV(e,"th,td"),vM=(e,n)=>dd(e,"table",n),yM=Ys.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),l0={...yM,none:e=>yM.none(e)},BE=(e,n,o,r,c=ze)=>{const l=r===1;if(!l&&o<=0)return l0.first(e[0]);if(l&&o>=e.length-1)return l0.last(e[e.length-1]);{const d=o+r,g=e[d];return c(g)?l0.middle(n,g):BE(e,n,d,r,c)}},CM=(e,n)=>vM(e,n).bind(o=>{const r=CV(o);return Gs(r,l=>Gt(e,l)).map(l=>({index:l,all:r}))}),xV=(e,n,o)=>CM(e,o).fold(()=>l0.none(e),c=>BE(c.all,e,c.index,1,n)),SV=(e,n,o)=>CM(e,o).fold(()=>l0.none(),c=>BE(c.all,e,c.index,-1,n)),xM=Pa("image"),wV=e=>{const n=e;return D.from(n[xM])},SM=(e,n)=>{const o=e;o[xM]=n},PE=Pa("event"),EV=e=>{const n=e;return D.from(n[PE])},u0=e=>n=>{const o=n;o[PE]=e},_V=(e,n)=>u0(n)(e),wM=u0(0),TV=u0(2),kV=u0(1),_M=(e=>n=>{const o=n;return D.from(o[PE]).exists(r=>r===e)})(0),DG=()=>Object.freeze({length:0,item:e=>null}),wf=Pa("mode"),MG=e=>{const n=e;return D.from(n[wf])},IE=e=>n=>{const o=n;o[wf]=e},AV=(e,n)=>IE(n)(e),OV=IE(0),Ma=IE(2),d0=IE(1),_i=e=>n=>{const o=n;return D.from(o[wf]).exists(r=>r===e)},Rc=_i(0),by=_i(1),TM=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(Rc(e))if(ee(o)){if(!To(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{Rc(e)&&n.remove(o)},clear:()=>{Rc(e)&&n.clear()}}),m0=["none","copy","link","move"],DV=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],vy=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(c){St(m0,c)&&(n=c)},get effectAllowed(){return o},set effectAllowed(c){_M(r)&&St(DV,c)&&(o=c)},get items(){return TM(r,e.items)},get files(){return by(r)?DG():e.files},get types(){return e.types},setDragImage:(c,l,d)=>{Rc(r)&&(SM(r,{image:c,x:l,y:d}),e.setDragImage(c,l,d))},getData:c=>by(r)?"":e.getData(c),setData:(c,l)=>{Rc(r)&&e.setData(c,l)},clearData:c=>{Rc(r)&&e.clearData(c)}};return OV(r),r},RG=e=>{const n=vy(),o=MG(e);return Ma(e),wM(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,wV(e).each(r=>n.setDragImage(r.image,r.x,r.y)),de(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),de(e.files,r=>n.items.add(r)),EV(e).each(r=>{_V(n,r)}),o.each(r=>{AV(e,r),AV(n,r)}),n},MV=e=>{const n=e.getData("text/html");return n===""?D.none():D.some(n)},Th=(e,n)=>e.setData("text/html",n),kM=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),_o=(e,n)=>qs(n,o=>{const r=kM(Su(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),RV=(e,n,o)=>hs(e,(r,c)=>r.fold(()=>D.some(c),l=>{const d=Math.sqrt(Math.abs(l.x-n)+Math.abs(l.y-o)),g=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return D.some(g<d?c:l)}),D.none()),AM=(e,n,o,r,c)=>{const l=Zn(z.fromDom(o),"td,th,caption").map(g=>g.dom),d=gt(_o(e,l),g=>n(g,c));return RV(d,r,c).map(g=>g.cell)},kh=e=>e.bottom,Ef=e=>e.top,_f=(e,n)=>e.y<n,NV=(e,n)=>e.y>n,BV=qe(AM,kh,_f),FE=qe(AM,Ef,NV),$E=(e,n)=>$o(n.getClientRects()).bind(o=>BV(e,o.left,o.top)).bind(o=>Eh(pE(o),n)),OM=(e,n)=>mr(n.getClientRects()).bind(o=>FE(e,o.left,o.top)).bind(o=>Eh(hE(o),n)),DM=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),PV=e=>e.breakType===ea.Wrap&&e.positions.length===0,IV=e=>e.breakType===ea.Br&&e.positions.length===1,yy=(e,n,o)=>{const r=e(n,o);return PV(r)||!vo(o.getNode())&&IV(r)?!DM(e,n,r):r.breakAt.isNone()},FV=qe(yy,a0),$V=qe(yy,Wl),LV=(e,n,o)=>{const r=ue.fromRangeStart(n);return Hm(!e,o).exists(c=>c.isEqual(r))},HV=(e,n,o,r)=>{const c=e.selection.getRng(),l=n?1:-1;return xk()&&LV(n,c,o)?(Vu(l,e,o,!n,!1).each(d=>{Zu(e,d)}),!0):!1},VV=(e,n,o)=>$E(n,o).orThunk(()=>$o(o.getClientRects()).bind(r=>Cf(C6(e,ue.before(n)),r.left))).getOr(ue.before(n)),LE=(e,n,o)=>OM(n,o).orThunk(()=>$o(o.getClientRects()).bind(r=>Cf(Mc(e,ue.after(n)),r.left))).getOr(ue.after(n)),HE=(e,n)=>{const o=n.getNode(e);return El(o)?D.some(o):D.none()},zV=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Li:yr,c=tM(n,z.fromDom(o),r);Zu(n,c)})},MM=(e,n,o)=>{const r=HE(!!n,o),c=n===!1;r.fold(()=>Zu(e,o.toRange()),l=>Hm(c,e.getBody()).filter(d=>d.isEqual(o)).fold(()=>Zu(e,o.toRange()),d=>zV(n,e,l)))},Ah=(e,n,o,r)=>{const c=e.selection.getRng(),l=ue.fromRangeStart(c),d=e.getBody();if(!n&&FV(r,l)){const g=VV(d,o,l);return MM(e,n,g),!0}else if(n&&$V(r,l)){const g=LE(d,o,l);return MM(e,n,g),!0}else return!1},VE=(e,n,o)=>D.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>D.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),RM=(e,n)=>VE(e,n,HV),Cy=(e,n)=>VE(e,n,Ah),UV=e=>{const n=vg.exact(e,0,e,0);return p8(n)},zE=(e,n,o)=>o.fold(D.none,D.none,(r,c)=>o8(c).map(l=>UV(l)),r=>e.mode.isReadOnly()||!ZV(r)?D.none():(e.execCommand("mceTableInsertRowAfter"),UE(e,n,r))),ZV=e=>xl(e,rs("table")).exists(fu),UE=(e,n,o)=>zE(e,n,xV(o,ZE)),NM=(e,n,o)=>zE(e,n,SV(o,ZE)),ZE=e=>fu(e)||xb(e,BM),BM=e=>fl(e)&&fu(e),WE=(e,n)=>{const o=["table","li","dl"],r=z.fromDom(e.getBody()),c=g=>{const h=un(g);return Gt(g,r)||St(o,h)},l=e.selection.getRng(),d=z.fromDom(n?l.endContainer:l.startContainer);return yV(d,c).map(g=>(vM(g,c).each(w=>{e.model.table.clearSelectedCells(w.dom)}),e.selection.collapse(!n),(n?UE:NM)(e,c,g).each(w=>{e.selection.setRng(w)}),!0)).getOr(!1)},PM=(e,n,o)=>{const r=rn.os.isMacOS()||rn.os.isiOS();i0([{keyCode:je.RIGHT,action:Ct(cM,e,!0)},{keyCode:je.LEFT,action:Ct(cM,e,!1)},{keyCode:je.UP,action:Ct(iM,e,!1)},{keyCode:je.DOWN,action:Ct(iM,e,!0)},...r?[{keyCode:je.UP,action:Ct(py,e,!1),metaKey:!0,shiftKey:!0},{keyCode:je.DOWN,action:Ct(py,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:je.RIGHT,action:Ct(RM,e,!0)},{keyCode:je.LEFT,action:Ct(RM,e,!1)},{keyCode:je.UP,action:Ct(Cy,e,!1)},{keyCode:je.DOWN,action:Ct(Cy,e,!0)},{keyCode:je.UP,action:Ct(Cy,e,!1)},{keyCode:je.UP,action:Ct(RE,e,!1)},{keyCode:je.DOWN,action:Ct(RE,e,!0)},{keyCode:je.RIGHT,action:Ct(gM,e,!0)},{keyCode:je.LEFT,action:Ct(gM,e,!1)},{keyCode:je.UP,action:Ct(hM,e,!1)},{keyCode:je.DOWN,action:Ct(hM,e,!0)},{keyCode:je.RIGHT,action:Ct(B6,e,n,!0)},{keyCode:je.LEFT,action:Ct(B6,e,n,!1)},{keyCode:je.RIGHT,ctrlKey:!r,altKey:r,action:Ct(p9,e,n)},{keyCode:je.LEFT,ctrlKey:!r,altKey:r,action:Ct(b9,e,n)},{keyCode:je.UP,action:Ct(uM,e,!1)},{keyCode:je.DOWN,action:Ct(uM,e,!0)}],o).each(c=>{o.preventDefault()})},WV=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||PM(e,n,o)})},Xi=(e,n)=>({container:e,offset:n}),xy=wn.DOM,Oh=e=>n=>e===n?-1:0,f0=e=>n=>e.isBlock(n)||St(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",Tf=(e,n,o)=>{if(ke(e)&&n>=0)return D.some(Xi(e,n));{const r=Dl(xy);return D.from(r.backwards(e,n,Oh(e),o)).map(c=>Xi(c.container,c.container.data.length))}},jE=(e,n,o)=>{if(ke(e)&&n>=e.length)return D.some(Xi(e,n));{const r=Dl(xy);return D.from(r.forwards(e,n,Oh(e),o)).map(c=>Xi(c.container,0))}},Sy=(e,n,o)=>{if(!ke(e))return D.none();const r=e.data;if(n>=0&&n<=r.length)return D.some(Xi(e,n));{const c=Dl(xy);return D.from(c.backwards(e,n,Oh(e),o)).bind(l=>{const d=l.container.data;return Sy(l.container,n+d.length,o)})}},GE=(e,n,o)=>{if(!ke(e))return D.none();const r=e.data;if(n<=r.length)return D.some(Xi(e,n));{const c=Dl(xy);return D.from(c.forwards(e,n,Oh(e),o)).bind(l=>GE(l.container,n-r.length,o))}},Dh=(e,n,o,r,c)=>{const l=Dl(e,f0(e));return D.from(l.backwards(n,o,r,c))},jV=e=>e.collapsed&&ke(e.startContainer),GV=e=>xa(e.toString().replace(/\u00A0/g," ")),jd=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,qE=(e,n)=>e.substring(n.length),IM=(e,n,o,r=!1)=>{let c;const l=o.charAt(0);for(c=n-1;c>=0;c--){const d=e.charAt(c);if(!r&&jd(d))return D.none();if(l===d&&ss(e,o,c,n))break}return D.some(c)},kf=(e,n,o,r=!1)=>{if(!jV(n))return D.none();const c={text:"",offset:0},l=(g,h,y)=>(c.text=y+c.text,c.offset+=h,IM(c.text,c.offset,o,r).getOr(h)),d=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return Dh(e,n.startContainer,n.startOffset,l,d).bind(g=>{const h=n.cloneRange();if(h.setStart(g.container,g.offset),h.setEnd(n.endContainer,n.endOffset),h.collapsed)return D.none();const y=GV(h);return y.lastIndexOf(o)!==0?D.none():D.some({text:qE(y,o),range:h,trigger:o})})},FM=e=>e.nodeType===lu,KE=e=>e.nodeType===er,YE=e=>{if(FM(e))return Xi(e,e.data.length);{const n=e.childNodes;return n.length>0?YE(n[n.length-1]):Xi(e,n.length)}},XE=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?XE(o[n],0):o.length>0&&KE(e)&&o.length===n?YE(o[o.length-1]):Xi(e,n)},qV=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return Dh(e,n.container,n.offset,(c,l)=>l===0?-1:l,r).filter(c=>{const l=c.container.data.charAt(c.offset-1);return!jd(l)}).isSome()},$M=e=>n=>{const o=XE(n.startContainer,n.startOffset);return!qV(e,o)},KV=(e,n,o)=>Uc(o.triggers,r=>kf(e,n,r)),YV=(e,n)=>{const o=n(),r=e.selection.getRng();return KV(e.dom,r,o).bind(c=>LM(e,n,c))},LM=(e,n,o,r={})=>{var c;const l=n(),g=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",h=gt(l.lookupByTrigger(o.trigger),w=>o.text.length>=w.minChars&&w.matches.getOrThunk(()=>$M(e.dom))(o.range,g,o.text));if(h.length===0)return D.none();const y=Promise.all(wt(h,w=>w.fetch(o.text,w.maxResults,r).then(k=>({matchText:o.text,items:k,columns:w.columns,onAction:w.onAction,highlightOn:w.highlightOn}))));return D.some({lookupData:y,context:o})};var Ji;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Ji||(Ji={}));const g0=(e,n,o)=>e.stype===Ji.Error?n(e.serror):o(e.svalue),XV=e=>{const n=[],o=[];return de(e,r=>{g0(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},HM=(e,n)=>e.stype===Ji.Error?{stype:Ji.Error,serror:n(e.serror)}:e,JV=(e,n)=>e.stype===Ji.Value?{stype:Ji.Value,svalue:n(e.svalue)}:e,QV=(e,n)=>e.stype===Ji.Value?n(e.svalue):e,ez=(e,n)=>e.stype===Ji.Error?n(e.serror):e,VM=e=>({stype:Ji.Value,svalue:e}),zM=e=>({stype:Ji.Error,serror:e}),kr={fromResult:e=>e.fold(zM,VM),toResult:e=>g0(e,Is.error,Is.value),svalue:VM,partition:XV,serror:zM,bind:QV,bindError:ez,map:JV,mapError:HM,fold:g0},UM=e=>Ot(e)&&bs(e).length>100?" removed due to size":JSON.stringify(e,null,2),tz=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Ve("... (only showing first ten failures)")}]):e;return wt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},ZM=(e,n)=>kr.serror([{path:e,getErrorInfo:n}]),WM=(e,n,o)=>ZM(e,()=>'Could not find valid *required* value for "'+n+'" in '+UM(o)),nz=(e,n)=>ZM(e,Ve(n)),h0=e=>{const n=(r,c)=>kr.bindError(e(c),l=>nz(r,l)),o=Ve("val");return{extract:n,toString:o}},Ar=h0(kr.svalue),oz=Ve(Ar),Mh=(e,n)=>h0(o=>{const r=typeof o;return e(o)?kr.svalue(o):kr.serror(`Expected type: ${n} but got: ${r}`)}),Af=Mh(jo,"number"),JE=Mh(ee,"string"),ta=Mh(Zt,"function"),Of=()=>({tag:"required",process:{}}),jM=e=>({tag:"defaultedThunk",process:e}),GM=e=>jM(Ve(e)),qM=()=>({tag:"option",process:{}}),sz=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),QE=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},e3=(e,n)=>e.length>0?kr.svalue(vs(n,Qu.apply(void 0,e))):kr.svalue(n),wy=e=>x(kr.serror,zc)(e),KM={consolidateObj:(e,n)=>{const o=kr.partition(e);return o.errors.length>0?wy(o.errors):e3(o.values,n)},consolidateArr:e=>{const n=kr.partition(e);return n.errors.length>0?wy(n.errors):kr.svalue(n.values)}},Qi=(e,n,o,r)=>zn(n,o).fold(()=>WM(e,o,n),r),Ey=(e,n,o,r)=>{const c=zn(e,n).getOrThunk(()=>o(e));return r(c)},rz=(e,n,o)=>o(zn(e,n)),_y=(e,n,o,r)=>{const c=zn(e,n).map(l=>l===!0?o(e):l);return r(c)},t3=(e,n,o,r,c)=>{const l=g=>c.extract(n.concat([r]),g),d=g=>g.fold(()=>kr.svalue(D.none()),h=>{const y=c.extract(n.concat([r]),h);return kr.map(y,D.some)});switch(e.tag){case"required":return Qi(n,o,r,l);case"defaultedThunk":return Ey(o,r,e.process,l);case"option":return rz(o,r,d);case"defaultedOptionThunk":return _y(o,r,e.process,d);case"mergeWithThunk":return Ey(o,r,Ve({}),g=>{const h=vs(e.process(o),g);return l(h)})}},YM=(e,n,o)=>{const r={},c=[];for(const l of o)QE(l,(d,g,h,y)=>{const w=t3(h,e,n,d,y);kr.fold(w,T=>{c.push(...T)},T=>{r[g]=T})},(d,g)=>{r[d]=g(n)});return c.length>0?kr.serror(c):kr.svalue(r)},XM=e=>({extract:(r,c)=>YM(r,c,e),toString:()=>`obj{
`+wt(e,c=>QE(c,(l,d,g,h)=>l+" -> "+h.toString(),(l,d)=>"state("+l+")")).join(`
`)+"}"}),JM=e=>({extract:(r,c)=>{const l=wt(c,(d,g)=>e.extract(r.concat(["["+g+"]"]),d));return KM.consolidateArr(l)},toString:()=>"array("+e.toString()+")"}),az=(e,n,o)=>{const r=n.extract([e],o);return kr.mapError(r,c=>({input:o,errors:c}))},cz=(e,n,o)=>kr.toResult(az(e,n,o)),iz=e=>`Errors: 
`+tz(e.errors).join(`
`)+`

Input object: `+UM(e.input),Ty=sz,QM=(e,n)=>Ty(e,e,Of(),n),n3=e=>QM(e,JE),eR=e=>QM(e,ta),lz=(e,n)=>Ty(e,e,qM(),n),uz=e=>lz(e,ta),tR=(e,n)=>Ty(e,e,GM(n),oz()),ky=(e,n,o)=>Ty(e,e,GM(n),o),Ay=(e,n)=>ky(e,n,Af),nR=(e,n,o)=>ky(e,n,JM(o)),o3=n3("type"),oR=eR("fetch"),sR=eR("onAction"),s3=e=>tR("columns",e),rR=XM([o3,n3("trigger"),Ay("minChars",1),s3(1),Ay("maxResults",10),uz("matches"),oR,sR,nR("highlightOn",[],JE)]),aR=e=>cz("Autocompleter",rR,e),cR=()=>{const e={},n={},o={},r={},c={},l={},d={},g={},h={},y=(M,P)=>(B,F)=>{M[B.toLowerCase()]={...F,type:P}},w=(M,P)=>(B,F)=>{M[B.toLowerCase()]={type:P,...F}},T=(M,P)=>r[M.toLowerCase()]=P,k=(M,P)=>d[M.toLowerCase()]=P;return{addButton:y(e,"button"),addGroupToolbarButton:y(e,"grouptoolbarbutton"),addToggleButton:y(e,"togglebutton"),addMenuButton:y(e,"menubutton"),addSplitButton:y(e,"splitbutton"),addMenuItem:y(n,"menuitem"),addNestedMenuItem:y(n,"nestedmenuitem"),addToggleMenuItem:y(n,"togglemenuitem"),addAutocompleter:y(o,"autocompleter"),addContextMenu:y(c,"contextmenu"),addContextToolbar:y(l,"contexttoolbar"),addContextForm:w(l,"contextform"),addSidebar:y(g,"sidebar"),addView:y(h,"views"),addIcon:T,addContext:k,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:l,sidebars:g,views:h,contexts:d})}},dz=e=>{const n=e.ui.registry.getAll().popups,o=Qt(n,d=>aR(d).fold(g=>{throw new Error(iz(g))},Ts)),r=jc(tm(o,d=>d.trigger)),c=nm(o);return{dataset:o,triggers:r,lookupByTrigger:d=>gt(c,g=>g.trigger===d)}},mz=(e,n)=>{const o=od(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27?(o.cancel(),n.cancelIfNecessary()):(c===38||c===40)&&o.cancel()},!0),e.on("remove",o.cancel)},Oy=e=>{const n=fr(),o=fo(!1),r=n.isSet,c=()=>{r()&&(hP(e),o.set(!1),n.clear())},l=T=>{r()||n.set({trigger:T.trigger,matchLength:T.text.length})},d=Xn(()=>dz(e)),g=T=>n.get().map(k=>kf(e.dom,e.selection.getRng(),k.trigger,!0).bind(M=>LM(e,d,M,T))).getOrThunk(()=>YV(e,d)),h=T=>{g(T).fold(c,k=>{l(k.context),k.lookupData.then(M=>{n.get().map(P=>{const B=k.context;P.trigger===B.trigger&&(n.set({...P,matchLength:B.text.length}),o.get()?(qx(e,{range:B.range}),fi(e,{lookupData:M})):(o.set(!0),qx(e,{range:B.range}),ku(e,{lookupData:M})))})})})},y=(T,k)=>{const M=T.compareBoundaryPoints(window.Range.START_TO_START,k),P=T.compareBoundaryPoints(window.Range.END_TO_END,k);return M>=0&&P<=0},w=()=>n.get().bind(({trigger:T})=>{const k=e.selection.getRng();return kf(e.dom,k,T,o.get()).filter(({range:M})=>y(k,M)).map(({range:M})=>M)});e.addCommand("mceAutocompleterReload",(T,k)=>{const M=Ot(k)?k.fetchOptions:{};h(M)}),e.addCommand("mceAutocompleterClose",c),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{w().each(T=>{qx(e,{range:T})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>w().isSome()),mz(e,{cancelIfNecessary:c,load:h})},p0=Qs().browser.isSafari(),iR=e=>xd(z.fromDom(e)),lR=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},Dy=(e,n)=>D.from(e.getParent(n.container(),"details")),uR=(e,n)=>Dy(e,n).isSome(),dR=(e,n)=>{const o=D.from(e.getParent(n.startContainer,"details")),r=D.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(l=>D.from(e.select("summary",l)[0]));return D.some({startSummary:c,startDetails:o,endDetails:r})}else return D.none()},mR=(e,n)=>Ws(n).exists(o=>o.isEqual(e)),fz=(e,n)=>wa(n).exists(o=>vo(o.getNode())&&Jr(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),gz=(e,n)=>n.startSummary.exists(o=>mR(e,o)),hz=(e,n)=>n.startSummary.exists(o=>fz(e,o)),pz=(e,n)=>n.startDetails.exists(o=>Jr(o,e).forall(r=>n.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),bz=(e,n,o)=>o.startDetails.exists(r=>Qo(e,n).forall(c=>!r.contains(c.container()))),r3=(e,n)=>{const o=n.getNode();To(o)||e.selection.setCursorLocation(o,n.offset())},vz=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const c=e.dom.select("summary",r)[0];c&&(o?Ws(c):wa(c)).each(d=>r3(e,d))}else r3(e,n)},yz=(e,n)=>{const o=h=>h.contains(e.startContainer),r=h=>h.contains(e.endContainer),c=n.startSummary.exists(o),l=n.startSummary.exists(r),d=n.startDetails.forall(h=>n.endDetails.forall(y=>h!==y));return(c||l)&&!(c&&l)||d},fR=(e,n,o)=>{const{dom:r,selection:c}=e,l=e.getBody();if(o==="character"){const d=ue.fromRangeStart(c.getRng()),g=r.getParent(d.container(),r.isBlock),h=Dy(r,d),y=g&&r.isEmpty(g),w=Y(g==null?void 0:g.previousSibling),T=Y(g==null?void 0:g.nextSibling);return y&&(n?T:w)&&hi(!n,l,d).exists(P=>uR(r,P)&&!Ie(h,Dy(r,P)))?!0:hi(n,l,d).fold(Ce,k=>{const M=Dy(r,k);if(uR(r,k)&&!Ie(h,M)){if(n||vz(e,k,!1),g&&y){if(n&&w)return!0;if(!n&&T)return!0;vz(e,k,n),e.dom.remove(g)}return!0}else return!1})}else return!1},Cz=(e,n,o,r)=>{const l=e.selection.getRng(),d=ue.fromRangeStart(l),g=e.getBody();return r==="selection"?yz(l,n):o?hz(d,n)||bz(g,d,n):gz(d,n)||pz(d,n)},xz=(e,n,o)=>dR(e.dom,e.selection.getRng()).fold(()=>fR(e,n,o),r=>Cz(e,r,n,o)||fR(e,n,o)),Sz=(e,n,o)=>{const r=e.selection,c=r.getNode(),l=r.getRng(),d=ue.fromRangeStart(l);return Db(c)?(o==="selection"&&lR(l,c)||dw(n,d,c)?iR(c):e.undoManager.transact(()=>{const g=r.getSel();let{anchorNode:h,anchorOffset:y,focusNode:w,focusOffset:T}=g??{};const k=()=>{_e(h)&&_e(y)&&_e(w)&&_e(T)&&(g==null||g.setBaseAndExtent(h,y,w,T))},M=()=>{h=g==null?void 0:g.anchorNode,y=g==null?void 0:g.anchorOffset,w=g==null?void 0:g.focusNode,T=g==null?void 0:g.focusOffset},P=(F,U)=>{de(F.childNodes,q=>{Um(q)&&U.appendChild(q)})},B=e.dom.create("span",{"data-mce-bogus":"1"});P(c,B),c.appendChild(B),k(),(o==="word"||o==="line")&&(g==null||g.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&lR(r.getRng(),B)?iR(c):(e.execCommand(n?"ForwardDelete":"Delete"),M(),P(B,c),k()),e.dom.remove(B)}),!0):!1},Df=(e,n,o)=>xz(e,n,o)||p0&&Sz(e,n,o)?D.some(it):D.none(),gR=e=>(n,o,r={})=>{const c=n.getBody(),l={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:it,inputType:o},d=wg(new InputEvent(e));return n.dispatch(e,{...d,...l,...r})},Rh=gR("input"),My=gR("beforeinput"),hR=Qs(),pR=hR.os,bR=pR.isMacOS()||pR.isiOS(),wz=hR.browser.isFirefox(),Ez=(e,n,o)=>{const r=o.keyCode===je.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=e.selection.isCollapsed(),l=c?"character":"selection",d=g=>c?g?"word":"line":"selection";fM([{keyCode:je.BACKSPACE,action:Ct(Y6,e)},{keyCode:je.BACKSPACE,action:Ct(ny,e,!1)},{keyCode:je.DELETE,action:Ct(ny,e,!0)},{keyCode:je.BACKSPACE,action:Ct(Ch,e,!1)},{keyCode:je.DELETE,action:Ct(Ch,e,!0)},{keyCode:je.BACKSPACE,action:Ct(SE,e,n,!1)},{keyCode:je.DELETE,action:Ct(SE,e,n,!0)},{keyCode:je.BACKSPACE,action:Ct(l2,e,!1)},{keyCode:je.DELETE,action:Ct(l2,e,!0)},{keyCode:je.BACKSPACE,action:Ct(Df,e,!1,l)},{keyCode:je.DELETE,action:Ct(Df,e,!0,l)},...bR?[{keyCode:je.BACKSPACE,altKey:!0,action:Ct(Df,e,!1,d(!0))},{keyCode:je.DELETE,altKey:!0,action:Ct(Df,e,!0,d(!0))},{keyCode:je.BACKSPACE,metaKey:!0,action:Ct(Df,e,!1,d(!1))}]:[{keyCode:je.BACKSPACE,ctrlKey:!0,action:Ct(Df,e,!1,d(!0))},{keyCode:je.DELETE,ctrlKey:!0,action:Ct(Df,e,!0,d(!0))}],{keyCode:je.BACKSPACE,action:Ct(ry,e,!1)},{keyCode:je.DELETE,action:Ct(ry,e,!0)},{keyCode:je.BACKSPACE,action:Ct(_E,e,!1)},{keyCode:je.DELETE,action:Ct(_E,e,!0)},{keyCode:je.BACKSPACE,action:Ct(Qr,e,!1)},{keyCode:je.DELETE,action:Ct(Qr,e,!0)},{keyCode:je.BACKSPACE,action:Ct(e0,e,!1)},{keyCode:je.DELETE,action:Ct(e0,e,!0)},{keyCode:je.BACKSPACE,action:Ct(EE,e,!1)},{keyCode:je.DELETE,action:Ct(EE,e,!0)},{keyCode:je.BACKSPACE,action:Ct(aE,e,!1)},{keyCode:je.DELETE,action:Ct(aE,e,!0)}],o).filter(g=>e.selection.isEditable()).each(g=>{o.preventDefault(),My(e,r).isDefaultPrevented()||(g(),Rh(e,r))})},_z=(e,n,o)=>i0([{keyCode:je.BACKSPACE,action:Ct(m6,e)},{keyCode:je.DELETE,action:Ct(m6,e)},...bR?[{keyCode:je.BACKSPACE,altKey:!0,action:Ct(uy,e)},{keyCode:je.DELETE,altKey:!0,action:Ct(uy,e)},...o?[{keyCode:wz?224:91,action:Ct(uy,e)}]:[]]:[{keyCode:je.BACKSPACE,ctrlKey:!0,action:Ct(uy,e)},{keyCode:je.DELETE,ctrlKey:!0,action:Ct(uy,e)}]],n),Tz=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===je.BACKSPACE,r.isDefaultPrevented()||Ez(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||_z(e,r,o),o=!1})},kz=e=>{for(;e;){if(Ye(e)||ke(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Mf=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const l=kz(n.firstChild);l&&/^(UL|OL|DL)$/.test(l.nodeName)&&n.insertBefore(o.doc.createTextNode(Jn),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const l=new Ds(n,n);let d=n,g;for(;g=l.current();){if(ke(g)){c.setStart(g,0),c.setEnd(g,0);break}if(r[g.nodeName.toLowerCase()]){c.setStartBefore(g),c.setEndBefore(g);break}d=g,g=l.next()}g||(c.setStart(d,0),c.setEnd(d,0))}else vo(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),Km(e,c)},b0=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";){if(e.getContentEditable(c)==="true"){r=c;break}c=c.parentNode}return c!==o?r:o},a3=e=>D.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),Az=e=>a3(e).fold(Ve(""),n=>n.nodeName.toUpperCase()),Ry=e=>a3(e).filter(n=>yu(z.fromDom(n))).isSome(),c3=e=>{e.innerHTML='<br data-mce-bogus="1">'},Oz=(e,n,o)=>{const r=e.dom;D.from(o.style).map(r.parseStyle).each(h=>{const w={...zC(z.fromDom(n)),...h};r.setStyles(n,w)});const c=D.from(o.class).map(h=>h.split(/\s+/)),l=D.from(n.className).map(h=>gt(h.split(/\s+/),y=>y!==""));os(c,l,(h,y)=>{const w=gt(y,k=>!St(h,k)),T=[...h,...w];r.setAttrib(n,"class",T.join(" "))});const d=["style","class"],g=oc(o,(h,y)=>!St(d,y));r.setAttribs(n,g)},Nh=(e,n)=>{if(Er(e).toLowerCase()===n.tagName.toLowerCase()){const r=Gp(e);Oz(e,n,r)}},Ny=(e,n,o,r,c=!0,l,d)=>{const g=e.dom,h=e.schema,y=Er(e),w=o?o.nodeName.toUpperCase():"";let T=n;const k=h.getTextInlineElements();let M;l||w==="TABLE"||w==="HR"?M=g.create(l||y,d||{}):M=o.cloneNode(!1);let P=M;if(!c)g.setAttrib(M,"style",null),g.setAttrib(M,"class",null);else do if(k[T.nodeName]){if(vc(T)||yc(T))continue;const B=T.cloneNode(!1);g.setAttrib(B,"id",""),M.hasChildNodes()?(B.appendChild(M.firstChild),M.appendChild(B)):(P=B,M.appendChild(B))}while((T=T.parentNode)&&T!==r);return Nh(e,M),c3(P),M},Dz=(e,n)=>e.dom.getParent(n,Vo),Mz=(e,n,o)=>{let r=n;for(;r&&r!==e&&Y(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return Vo(c);r=c}return!1},LG=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Er(e)&&e.dom.isEmpty(o)&&Mz(e.getBody(),o,r=>bt(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),Rz=(e,n,o)=>{var r,c,l;const d=n(Er(e)),g=Dz(e,o);g&&(e.dom.insertAfter(d,g),Mf(e,d),((l=(c=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||c===void 0?void 0:c.length)!==null&&l!==void 0?l:0)>1&&e.dom.remove(o))},Nz=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,Bz=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},Bh=(e,n)=>{const o=e==null?void 0:e.parentNode;return _e(o)&&o.nodeName===n},vR=e=>_e(e)&&/^(OL|UL|LI)$/.test(e.nodeName),i3=e=>_e(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Pz=e=>vR(e)&&vR(e.parentNode),v0=e=>{const n=e.parentNode;return i3(n)?n:e},el=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Ye(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},Vr=e=>hs(tm(zC(z.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),yR=(e,n,o,r,c)=>{const l=e.dom,d=e.selection.getRng(),g=o.parentNode;if(o===e.getBody()||!g)return;Pz(o)&&(c="LI");const h=i3(r)?Vr(r):void 0;let y=i3(r)&&h?n(c,{style:Vr(r)}):n(c);if(el(o,r,!0)&&el(o,r,!1))if(Bh(o,"LI")){const w=v0(o);l.insertAfter(y,w),Bz(o)?l.remove(w):l.remove(o)}else l.replace(y,o);else if(el(o,r,!0))Bh(o,"LI")?(l.insertAfter(y,v0(o)),y.appendChild(l.doc.createTextNode(" ")),y.appendChild(o)):g.insertBefore(y,o),l.remove(r);else if(el(o,r,!1))l.insertAfter(y,v0(o)),l.remove(r);else{o=v0(o);const w=d.cloneRange();w.setStartAfter(r),w.setEndAfter(o);const T=w.extractContents();if(c==="LI"&&Nz(T,"LI")){const k=gt(wt(y.children,z.fromDom),In(rs("br")));y=T.firstChild,l.insertAfter(T,o),de(k,M=>vm(z.fromDom(y),M)),h&&y.setAttribute("style",h)}else l.insertAfter(T,o),l.insertAfter(y,o);l.remove(r)}Mf(e,y)},y0=e=>{de(YC(z.fromDom(e),vr),n=>{const o=n.dom;o.nodeValue=xa(o.data)})},Gd=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},jl=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),Rf=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,l3=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,C0=(e,n)=>_e(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",CR=(e,n,o)=>{var r;const c=[];if(!o)return;let l=o;for(;l=l.firstChild;){if(e.isBlock(l))return;Ye(l)&&!n[l.nodeName.toLowerCase()]&&c.push(l)}let d=c.length;for(;d--;)l=c[d],(!l.hasChildNodes()||l.firstChild===l.lastChild&&((r=l.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||jl(e,l))&&e.remove(l)},By=(e,n,o)=>ke(n)?e?o===1&&n.data.charAt(o-1)===Cs?0:o:o===n.data.length-1&&n.data.charAt(o)===Cs?n.data.length:o:o,Iz=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,By(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,By(!1,e.endContainer,e.endOffset)),n},Fz=e=>{let n=e;do ke(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},xR=(e,n,o,r,c)=>{var l,d;const g=e.dom,h=(l=b0(g,r))!==null&&l!==void 0?l:g.getRoot();let y=g.getParent(r,g.isBlock);if(!y||!C0(g,y)){if(y=y||h,!y.hasChildNodes()){const M=g.create(n);return Nh(e,M),y.appendChild(M),o.setStart(M,0),o.setEnd(M,0),M}let w=r;for(;w&&w.parentNode!==y;)w=w.parentNode;let T;for(;w&&!g.isBlock(w);)T=w,w=w.previousSibling;const k=(d=T==null?void 0:T.parentElement)===null||d===void 0?void 0:d.nodeName;if(T&&k&&e.schema.isValidChild(k,n.toLowerCase())){const M=T.parentNode,P=g.create(n);for(Nh(e,P),M.insertBefore(P,T),w=T;w&&!g.isBlock(w);){const B=w.nextSibling;P.appendChild(w),w=B}o.setStart(r,c),o.setEnd(r,c)}}return r},SR=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Ye(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},wR=(e,n)=>{const o=hv(e);return vn(n)?!1:ee(o)?St(Oe.explode(o),n.nodeName.toLowerCase()):o},$z={insert:(e,n)=>{let o,r,c,l,d=!1;const g=e.dom,h=e.schema,y=h.getNonEmptyElements(),w=e.selection.getRng(),T=Er(e),k=z.fromDom(w.startContainer),M=vl(k,w.startOffset),P=M.exists(ve=>fl(ve)&&!fu(ve)),B=w.collapsed&&P,F=(ve,He)=>Ny(e,o,we,he,Rl(e),ve,He),U=ve=>{const He=By(ve,o,r);if(ke(o)&&(ve?He>0:He<o.data.length))return!1;if((o.parentNode===we||o===we)&&d&&!ve||ve&&Ye(o)&&o===we.firstChild)return!0;if(Rf(o,"TABLE")||Rf(o,"HR"))return l3(o,"BR")?!ve:d&&!ve||!d&&ve;const nt=new Ds(o,we);ke(o)&&(ve&&He===0?nt.prev():!ve&&He===o.data.length&&nt.next());let It;for(;It=nt.current();){if(Ye(It)){if(!It.getAttribute("data-mce-bogus")){const $t=It.nodeName.toLowerCase();if(y[$t]&&$t!=="br")return!1}}else if(ke(It)&&!Ro(It.data))return!1;ve?nt.prev():nt.next()}return!0},q=()=>{let ve;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&Ue!=="HGROUP"?ve=F(T):ve=F(),wR(e,l)&&C0(g,l)&&g.isEmpty(we,void 0,{includeZwsp:!0})?ve=g.split(l,we):g.insertAfter(ve,we),Mf(e,ve),ve};Wv(g,w).each(ve=>{w.setStart(ve.startContainer,ve.startOffset),w.setEnd(ve.endContainer,ve.endOffset)}),o=w.startContainer,r=w.startOffset;const X=!!(n&&n.shiftKey),te=!!(n&&n.ctrlKey);Ye(o)&&o.hasChildNodes()&&!B&&(d=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,d&&ke(o)?r=o.data.length:r=0);const he=b0(g,o);if(!he||Gd(e,o))return;X||(o=xR(e,T,w,o,r));let we=g.getParent(o,g.isBlock)||g.getRoot();l=_e(we==null?void 0:we.parentNode)?g.getParent(we.parentNode,g.isBlock):null,c=we?we.nodeName.toUpperCase():"";const Ue=l?l.nodeName.toUpperCase():"";if(Ue==="LI"&&!te){const ve=l;we=ve,l=ve.parentNode,c=Ue}if(Ye(l)&&LG(e,X,we))return Rz(e,F,we);if(/^(LI|DT|DD)$/.test(c)&&Ye(l)&&g.isEmpty(we)){yR(e,F,l,we,T);return}if(!B&&(we===e.getBody()||!C0(g,we)))return;const le=we.parentNode;let se;if(B)se=F(T),M.fold(()=>{Mo(k,z.fromDom(se))},ve=>{yr(ve,z.fromDom(se))}),e.selection.setCursorLocation(se,0);else if(Xo(we))se=Kb(we),g.isEmpty(we)&&c3(we),Nh(e,se),Mf(e,se);else if(U(!1))se=q();else if(U(!0)&&le){const ve=ue.fromRangeStart(w),He=DA(ve),nt=z.fromDom(we),$t=Jv(nt,ve,e.schema)?PA(nt,ve,e.schema).bind(En=>D.from(En.getNode())):D.none();se=le.insertBefore(F(),we);const fn=Rf(we,"HR")||He?se:$t.getOr(we);Mf(e,fn)}else{const ve=Iz(w).cloneRange();ve.setEndAfter(we);const He=ve.extractContents();y0(He),Fz(He),se=He.firstChild,g.insertAfter(He,we),CR(g,y,se),SR(g,we),g.isEmpty(we)&&c3(we),se.normalize(),g.isEmpty(se)?(g.remove(se),q()):(Nh(e,se),Mf(e,se))}g.setAttrib(se,"id",""),e.dispatch("NewBlock",{newBlock:se})},fakeEventName:"insertParagraph"},VG=(e,n,o)=>{const r=new Ds(n,o);let c;const l=e.getNonEmptyElements();for(;c=r.next();)if(l[c.nodeName.toLowerCase()]||ke(c)&&c.length>0)return!0;return!1},Nc=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),Km(e,r)},Lz=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let l,d=!1;Wv(r,c).each(M=>{c.setStart(M.startContainer,M.startOffset),c.setEnd(M.endContainer,M.endOffset)});let g=c.startOffset,h=c.startContainer;if(Ye(h)&&h.hasChildNodes()){const M=g>h.childNodes.length-1;h=h.childNodes[Math.min(g,h.childNodes.length-1)]||h,M&&ke(h)?g=h.data.length:g=0}let y=r.getParent(h,r.isBlock);const w=y&&y.parentNode?r.getParent(y.parentNode,r.isBlock):null,T=w?w.nodeName.toUpperCase():"",k=!!(n&&n.ctrlKey);T==="LI"&&!k&&(y=w),ke(h)&&g>=h.data.length&&(VG(e.schema,h,y||r.getRoot())||(l=r.create("br"),c.insertNode(l),c.setStartAfter(l),c.setEndAfter(l),d=!0)),l=r.create("br"),Ml(r,c,l),Nc(e,l,d),e.undoManager.add()},Hz=(e,n)=>{const o=z.fromTag("br");yr(z.fromDom(n),o),e.undoManager.add()},Nf=(e,n)=>{Vz(e.getBody(),n)||Li(z.fromDom(n),z.fromTag("br"));const o=z.fromTag("br");Li(z.fromDom(n),o),Nc(e,o.dom,!1),e.undoManager.add()},ER=e=>vo(e.getNode()),Vz=(e,n)=>ER(ue.after(n))?!0:Qo(e,ue.after(n)).map(o=>vo(o.getNode())).getOr(!1),x0=e=>e&&e.nodeName==="A"&&"href"in e,u3=e=>e.fold(Ce,x0,x0,Ce),_R=e=>{const n=qe(tf,e),o=ue.fromRangeStart(e.selection.getRng());return Zl(n,e.getBody(),o).filter(u3)},TR=(e,n)=>{n.fold(it,qe(Hz,e),qe(Nf,e),it)},d3={insert:(e,n)=>{const o=_R(e);o.isSome()?o.each(qe(TR,e)):Lz(e,n)},fakeEventName:"insertLineBreak"},m3=(e,n)=>a3(e).filter(o=>n.length>0&&ha(z.fromDom(o),n)).isSome(),f3=e=>m3(e,EP(e)),Uz=e=>m3(e,Au(e)),Ya=Ys.generate([{br:[]},{block:[]},{none:[]}]),Zz=(e,n)=>Uz(e),kR=e=>(n,o)=>Ry(n)===e,AR=(e,n)=>(o,r)=>Az(o)===e.toUpperCase()===n,Wz=e=>{const n=b0(e.dom,e.selection.getStart());return vn(n)},S0=e=>AR("pre",e),jz=()=>AR("summary",!0),w0=e=>(n,o)=>Hj(n)===e,Gz=(e,n)=>f3(e),Ti=(e,n)=>n,g3=e=>{const n=Er(e),o=b0(e.dom,e.selection.getStart());return _e(o)&&e.schema.isValidChild(o.nodeName,n)},qz=e=>{const n=e.selection.getRng(),o=z.fromDom(n.startContainer),c=vl(o,n.startOffset).map(l=>fl(l)&&!fu(l));return n.collapsed&&c.getOr(!0)},Bc=(e,n)=>(o,r)=>hs(e,(l,d)=>l&&d(o,r),!0)?D.some(n):D.none(),Kz=(e,n)=>p6([Bc([Zz],Ya.none()),Bc([S0(!0),Wz],Ya.none()),Bc([jz()],Ya.br()),Bc([S0(!0),w0(!1),Ti],Ya.br()),Bc([S0(!0),w0(!1)],Ya.block()),Bc([S0(!0),w0(!0),Ti],Ya.block()),Bc([S0(!0),w0(!0)],Ya.br()),Bc([kR(!0),Ti],Ya.br()),Bc([kR(!0)],Ya.block()),Bc([Gz],Ya.br()),Bc([Ti],Ya.br()),Bc([g3],Ya.block()),Bc([qz],Ya.block())],[e,!!(n&&n.shiftKey)]).getOr(Ya.none()),Ph=(e,n,o)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||tO(n),!(_e(o)&&My(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),_e(o)&&Rh(n,e.fakeEventName)))},Py=(e,n)=>{if(e.mode.isReadOnly())return;const o=()=>Ph(d3,e,n),r=()=>Ph($z,e,n),c=Kz(e,n);switch(ft(e)){case"linebreak":c.fold(o,o,it);break;case"block":c.fold(r,r,it);break;case"invert":c.fold(r,o,it);break;default:c.fold(o,r,it);break}},h3=Qs(),OR=h3.os.isiOS()&&h3.browser.isSafari(),p3=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),yL(e.undoManager),e.undoManager.transact(()=>{Py(e,n)}))},Yz=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(ke(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},E0=e=>{let n=D.none();const o=c=>{n=D.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,l)=>{c.undoManager.undo(),n.fold(it,d=>c.selection.moveToBookmark(d)),p3(c,l),n=D.none()};e.on("keydown",c=>{c.keyCode===je.ENTER&&(OR&&Yz(e.selection.getRng())?o(e):p3(e,c))}),e.on("keyup",c=>{c.keyCode===je.ENTER&&n.each(()=>r(e,c))})},Iy=(e,n,o)=>{const r=rn.os.isMacOS()||rn.os.isiOS();i0([{keyCode:je.END,action:Ct(lM,e,!0)},{keyCode:je.HOME,action:Ct(lM,e,!1)},...r?[]:[{keyCode:je.HOME,action:Ct(py,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:je.END,action:Ct(py,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:je.END,action:Ct(pM,e,!0)},{keyCode:je.HOME,action:Ct(pM,e,!1)},{keyCode:je.END,action:Ct(ly,e,!0,n)},{keyCode:je.HOME,action:Ct(ly,e,!1,n)}],o).each(c=>{o.preventDefault()})},DR=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||Iy(e,n,o)})},MR=e=>{e.on("input",n=>{n.isComposing||Qv(e)})},RR=Qs(),NR=(e,n,o)=>{i0([{keyCode:je.PAGE_UP,action:Ct(ly,e,!1,n)},{keyCode:je.PAGE_DOWN,action:Ct(ly,e,!0,n)}],o)},_0=e=>e.stopImmediatePropagation(),Fy=e=>e.keyCode===je.PAGE_UP||e.keyCode===je.PAGE_DOWN,Ih=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",_0,!0):!o&&e.get()&&n.off("NodeChange",_0),e.set(o)},Xz=(e,n)=>{if(RR.os.isMacOS())return;const o=fo(!1);e.on("keydown",r=>{Fy(r)&&Ih(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||NR(e,n,r),Fy(r)&&o.get()&&(Ih(o,e,!1),e.nodeChanged())})},b3=(e,n)=>e===n||e.contains(n),Jz=(e,n)=>!b3(e.getBody(),n.startContainer)||!b3(e.getBody(),n.endContainer)?!0:gA(e.dom,n),Qz=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||On(n.getTargetRanges(),o=>!Jz(e,o)))&&n.preventDefault()})},v3=(e,n)=>{const o=n.container(),r=n.offset();return ke(o)?(o.insertData(r,e),D.some(ue(o,r+e.length))):Sv(n).map(c=>{const l=z.fromText(e);return n.isAtEnd()?Li(c,l):yr(c,l),ue(l.dom,e.length)})},BR=qe(v3,Jn),y3=qe(v3," "),UG=(e,n,o)=>aw(e,n,o)?BR(n):y3(n),eU=e=>n=>n.fold(o=>Jr(e.dom,ue.before(o)),o=>Ws(o),o=>wa(o),o=>Qo(e.dom,ue.after(o))),tU=(e,n,o)=>r=>aw(e,r,o)?BR(n):y3(n),PR=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},nU=(e,n)=>e.isEditable(e.getParent(n,"summary")),oU=e=>{const n=ue.fromRangeStart(e.selection.getRng()),o=z.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=qe(tf,e),c=ue.fromRangeStart(e.selection.getRng());return Zl(r,e.getBody(),c).bind(eU(o)).map(l=>()=>tU(o,n,e.schema)(l).each(PR(e)))}else return D.none()},sU=e=>{const n=()=>{const o=z.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=ue.fromRangeStart(e.selection.getRng());UG(o,r,e.schema).each(PR(e))};return _n(rn.browser.isFirefox()&&e.selection.isEditable()&&nU(e.dom,e.selection.getRng().startContainer),n)},rU=(e,n)=>{fM([{keyCode:je.SPACEBAR,action:Ct(oU,e)},{keyCode:je.SPACEBAR,action:Ct(sU,e)}],n).each(o=>{n.preventDefault(),My(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),Rh(e,"insertText",{data:" "}))})},C3=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||rU(e,n)})},aU=e=>e7(e)?[{keyCode:je.TAB,action:Ct(WE,e,!0)},{keyCode:je.TAB,shiftKey:!0,action:Ct(WE,e,!1)}]:[],qd=(e,n)=>{i0([...aU(e)],n).each(o=>{n.preventDefault()})},IR=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||qd(e,n)})},x3=e=>{if(e.addShortcut("Meta+P","","mcePrint"),Oy(e),Ul(e))return fo(null);{const n=h9(e);return Qz(e),hy(e),WV(e,n),Tz(e,n),E0(e),C3(e),MR(e),IR(e),DR(e,n),Xz(e,n),n}};class FR{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const l=n.selection.getRng(),d={startContainer:l.startContainer,startOffset:l.startOffset,endContainer:l.endContainer,endOffset:l.endOffset};(c.type==="nodechange"||!g1(d,o))&&n.dispatch("SelectionChange"),o=d}),n.on("contextmenu",()=>{BS(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&Mv(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&Mv(n)&&(n.selection.getNode().nodeName==="IMG"?Sc.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor,r=o.selection;let c;if(o.initialized&&r&&!HP(o)&&!zg(o)){const l=o.getBody();c=r.getStart(!0)||l,(c.ownerDocument!==o.getDoc()||!o.dom.isChildOf(c,l))&&(c=l);const d=[];o.dom.getParent(c,g=>g===l?!0:(d.push(g),!1)),o.dispatch("NodeChange",{...n,element:c,parents:d})}}isSameElementPath(n){let o;const r=this.editor,c=Yn(r.dom.getParents(n,ze,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const $y="x-tinymce/html",tl=Ve($y),Ly="<!-- "+$y+" -->",Pc=e=>Ly+e,Bf=e=>e.replace(Ly,""),S3=e=>e.indexOf(Ly)!==-1,w3=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),cU=(e,n)=>{let o="<"+e;const r=tm(n,(c,l)=>l+'="'+Fn.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},$R=(e,n,o)=>{const r=e.split(/\n\n/),c=cU(n,o),l="</"+n+">",d=wt(r,h=>h.split(/\n/).join("<br />")),g=h=>c+h+l;return d.length===1?d[0]:wt(d,g).join("")},LR="%MCEPASTEBIN%",iU=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const l=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},LR);rn.browser.isFirefox()&&o.setStyle(l,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(l,"beforedeactivate focusin focusout",d=>{d.stopPropagation()}),l.focus(),r.select(l,!0)},lU=(e,n)=>{const o=e.dom;if(E3(e)){let r;const c=n.get();for(;r=E3(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},E3=e=>e.dom.get("mcepastebin"),uU=e=>_e(e)&&e.id==="mcepastebin",HR=e=>{const n=e.dom,o=(d,g)=>{d.appendChild(g),n.remove(g,!0)},[r,...c]=gt(e.getBody().childNodes,uU);de(c,d=>{o(r,d)});const l=n.select("div[id=mcepastebin]",r);for(let d=l.length-1;d>=0;d--){const g=n.create("div");r.insertBefore(g,l[d]),o(g,l[d])}return r?r.innerHTML:""},VR=e=>e===LR,dU=e=>{const n=fo(null);return{create:()=>iU(e,n),remove:()=>lU(e,n),getEl:()=>E3(e),getHtml:()=>HR(e),getLastRng:n.get}},Pf=(e,n)=>(Oe.each(n,o=>{xt(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),Hy=e=>{const n=sr(),o=ff({},n);let r="";const c=n.getVoidElements(),l=Oe.makeMap("script noscript style textarea video audio iframe object"," "),d=n.getBlockElements(),g=h=>{const y=h.name,w=h;if(y==="br"){r+=`
`;return}if(y!=="wbr"){if(c[y]&&(r+=" "),l[y]){r+=" ";return}if(h.type===3&&(r+=h.value),!(h.name in n.getVoidElements())){let T=h.firstChild;if(T)do g(T);while(T=T.next)}d[y]&&w.next&&(r+=`
`,y==="p"&&(r+=`
`))}};return e=Pf(e,[/<!\[[^\]]+\]>/g]),g(o.parse(e)),r},_3=e=>(e=Pf(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":Jn],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),zR=e=>{let n=0;return()=>e+n++},T3=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Oe.hasOwn(o,n)?"image/"+o[n]:"image/"+n},mU=(e,n)=>{const o=ff({sanitize:Qp(e),sandbox_iframes:tS(e),sandbox_iframes_exclusions:vv(e),convert_unsafe_embeds:yv(e)},e.schema);o.addNodeFilter("meta",c=>{Oe.each(c,l=>{l.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Nu({validate:!0},e.schema).serialize(r)},UR=(e,n)=>({content:e,cancelled:n}),fU=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=pP(e,r,o);return UR(c.node.innerHTML,c.isDefaultPrevented())},ZR=(e,n,o)=>{const r=Kx(e,n,o),c=mU(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?fU(e,c,o):UR(c,r.isDefaultPrevented())},Vy=(e,n,o)=>ZR(e,n,o),zy=(e,n)=>(e.insertContent(n,{merge:ak(e),paste:!0}),!0),Fh=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),gU=(e,n)=>Fh(n)&&On(gk(e),o=>td(n.toLowerCase(),`.${o.toLowerCase()}`)),WR=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),hU=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),pU=(e,n,o)=>!e.selection.isCollapsed()&&Fh(n)?hU(e,n,o):!1,bU=(e,n,o)=>gU(e,n)?WR(e,n,o):!1,jR=(e,n)=>{Oe.each([pU,bU,zy],o=>!o(e,n,zy))},vU=(e,n,o)=>{o||!ck(e)?zy(e,n):jR(e,n)},yU=zR("mceclip"),GR=e=>{const n=vy();return Th(n,e),Ma(n),n},$h=(e,n,o,r,c)=>{const l=Vy(e,n,o);if(!l.cancelled){const d=l.content,g=()=>vU(e,d,r);c?My(e,"insertFromPaste",{dataTransfer:GR(d)}).isDefaultPrevented()||(g(),Rh(e,"insertFromPaste")):g()}},Uy=(e,n,o,r)=>{const c=o||S3(n);$h(e,Bf(n),c,!1,r)},Zy=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),c=or(r,lk(e)),l=$R(c,Er(e),Gp(e));$h(e,l,!1,!0,o)},k3=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},ju=(e,n)=>n in e&&e[n].length>0,Wy=e=>ju(e,"text/html")||ju(e,"text/plain"),qR=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return _e(o)?e.dom.encode(o[1]):void 0},CU=(e,n,o,r)=>{const c=yU(),l=qp(e)&&_e(o.name),d=l?qR(e,o.name):c,g=l?o.name:void 0,h=n.create(c,o,r,d,g);return n.add(h),h},KR=(e,n)=>{S2(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const l=c?o:btoa(o),d=n.file,g=e.editorUpload.blobCache,h=g.getByData(l,r),y=h??CU(e,g,d,l);Uy(e,`<img src="${y.blobUri()}">`,!1,!0)})},xU=e=>e.type==="paste",SU=e=>Promise.all(wt(e,n=>i5(n).then(o=>({file:n,uri:o})))),wU=e=>{const n=gk(e);return o=>Lo(o.type,"image/")&&On(n,r=>T3(r)===o.type)},A3=(e,n)=>{const o=n.items?qs(ps(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?ps(n.files):[];return gt(o.length>0?o:r,wU(e))},YR=(e,n,o)=>{const r=xU(n)?n.clipboardData:n.dataTransfer;if(Jp(e)&&r){const c=A3(e,r);if(c.length>0)return n.preventDefault(),SU(c).then(l=>{o&&e.selection.setRng(o),de(l,d=>{KR(e,d)})}),!0}return!1},EU=e=>{var n,o;return rn.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},jy=e=>je.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,O3=(e,n,o,r,c)=>{let l=_3(o);const d=ju(n,tl())||S3(o),g=!d&&w3(l),h=Fh(l);(VR(l)||!l.length||g&&!h)&&(r=!0),(r||h)&&(ju(n,"text/plain")&&g?l=n["text/plain"]:l=Hy(l)),!VR(l)&&(r?Zy(e,l,c):Uy(e,l,d,c))},D3=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",l=>{jy(l)&&!l.isDefaultPrevented()&&(r=l.shiftKey&&l.keyCode===86)}),e.on("paste",l=>{if(l.isDefaultPrevented()||EU(l))return;const d=o.get()==="text"||r;r=!1;const g=k3(l.clipboardData);!Wy(g)&&YR(e,l,c())||(ju(g,"text/html")?(l.preventDefault(),O3(e,g,g["text/html"],d,!0)):ju(g,"text/plain")&&ju(g,"text/uri-list")?(l.preventDefault(),O3(e,g,g["text/plain"],d,!0)):(n.create(),Sc.setEditorTimeout(e,()=>{const h=n.getHtml();n.remove(),O3(e,g,h,d,!1)},0)))})},XR=e=>{const n=c=>Lo(c,"webkit-fake-url"),o=c=>Lo(c,"data:"),r=c=>{var l;return((l=c.data)===null||l===void 0?void 0:l.paste)===!0};e.parser.addNodeFilter("img",(c,l,d)=>{if(!Jp(e)&&r(d))for(const g of c){const h=g.attr("src");ee(h)&&!g.attr("data-mce-object")&&h!==rn.transparentSrc&&(n(h)||!WP(e)&&o(h))&&g.remove()}})},JR=(e,n,o)=>{D3(e,n,o),XR(e)},QR=(e,n)=>{n.get()==="text"?(n.set("html"),$T(e,!1)):(n.set("text"),$T(e,!0)),e.focus()},_U=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{QR(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&Uy(e,r.html,r.internal,!1),r.text&&Zy(e,r.text,!1)})},TU=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(tl(),n),!0}catch{return!1}else return!1},eN=(e,n,o,r)=>{TU(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},tN=e=>(n,o)=>{const{dom:r,selection:c}=e,l=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),d=r.create("div",{contenteditable:"true"},n);r.setStyles(l,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),l.appendChild(d),r.add(e.getBody(),l);const g=c.getRng();d.focus();const h=r.createRng();h.selectNodeContents(d),c.setRng(h),Sc.setEditorTimeout(e,()=>{c.setRng(g),r.remove(l),o()},0)},T0=e=>({html:Pc(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),kU=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),nN=e=>!e.selection.isCollapsed()||kU(e),AU=e=>n=>{!n.isDefaultPrevented()&&nN(e)&&e.selection.isEditable()&&eN(n,T0(e),tN(e),()=>{if(rn.browser.isChromium()||rn.browser.isFirefox()){const o=e.selection.getRng();Sc.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},M3=e=>n=>{!n.isDefaultPrevented()&&nN(e)&&eN(n,T0(e),tN(e),it)},OU=e=>{e.on("cut",AU(e)),e.on("copy",M3(e))},oN=(e,n)=>{var o,r;return Wa.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},sN=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},rN=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},DU=e=>On(e.files,n=>/^image\//.test(n.type)),MU=(e,n,o,r)=>{const c=e.getParent(o,d=>ri(n,d));if(!Y(e.getParent(o,"summary")))return!0;if(c&&bt(r,"text/html")){const d=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!Y(d.querySelector(c.nodeName.toLowerCase()))}else return!1},RU=e=>{e.on("input",n=>{const o=r=>Y(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=gt(e.dom.select("details"),o);de(r,c=>{vo(c.firstChild)&&c.firstChild.remove();const l=e.dom.create("summary");l.appendChild(Cu().dom),c.prepend(l)})}})},NU=(e,n)=>{eS(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),Jp(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&DU(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=oN(e,o);if(vn(r))return;const c=k3(o.dataTransfer),l=ju(c,tl());if((!Wy(c)||sN(c))&&YR(e,o,r))return;const d=c[tl()],g=d||c["text/html"]||c["text/plain"],h=MU(e.dom,e.schema,r.startContainer,c),y=n.get();y&&!h||g&&(o.preventDefault(),Sc.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(d||y&&h)&&e.execCommand("Delete"),rN(e,r);const w=_3(g);c["text/html"]?Uy(e,w,l,!0):Zy(e,w,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{Jp(e)&&!n.get()&&(o.preventDefault(),rN(e,oN(e,o))),o.type==="dragend"&&n.set(!1)}),RU(e)},BU=e=>{const n=c=>l=>{c(e,l)},o=ok(e);Zt(o)&&e.on("PastePreProcess",n(o));const r=sk(e);Zt(r)&&e.on("PastePostProcess",n(r))},R3=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},PU=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,N3=e=>Oe.trim(e).replace(PU,Rp).toLowerCase(),IU=(e,n,o)=>{const r=ZP(e);if(o||r==="all"||!rk(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const l=e.dom,d=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(g,h,y,w)=>{const T=l.parseStyle(l.decode(y)),k={};for(let P=0;P<c.length;P++){const B=T[c[P]];let F=B,U=l.getStyle(d,c[P],!0);/color/.test(c[P])&&(F=N3(F),U=N3(U)),U!==F&&(k[c[P]]=B)}const M=l.serializeStyle(k,"span");return M?h+' style="'+M+'"'+w:h+w})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(l,d,g,h)=>d+' style="'+g+'"'+h),n},FU=e=>{(rn.browser.isChromium()||rn.browser.isSafari())&&R3(e,IU)},$U=e=>{const n=fo(!1),o=fo(ik(e)?"text":"html"),r=dU(e);FU(e),_U(e,o),BU(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{OU(e),NU(e,n),JR(e,r,o)})},LU=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},ts=e=>{e.parser.addNodeFilter("details",n=>{const o=t7(e);de(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=n7(e);de(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},HU=e=>{LU(e),ts(e)},VU=vo,aN=ke,cN=e=>to(e.dom),B3=e=>oi(e.dom),P3=e=>n=>Gt(z.fromDom(e),n),k0=(e,n,o)=>xl(z.fromDom(e),r=>B3(r)||o.isBlock(un(r)),P3(n)).getOr(z.fromDom(n)).dom,iN=(e,n)=>xl(z.fromDom(e),cN,P3(n)),lN=(e,n,o)=>{const r=new Ds(e,n),c=o?r.next.bind(r):r.prev.bind(r);let l=e;for(let d=o?e:c();d&&!VU(d);d=c())di(d)&&(l=d);return l},zU=(e,n,o)=>{const c=ue.fromRangeStart(e).getNode(),l=k0(c,n,o),d=lN(c,l,!1),g=lN(c,l,!0),h=document.createRange();return iN(d,l).fold(()=>{aN(d)?h.setStart(d,0):h.setStartBefore(d)},y=>h.setStartBefore(y.dom)),iN(g,l).fold(()=>{aN(g)?h.setEnd(g,g.data.length):h.setEndAfter(g)},y=>h.setEndAfter(y.dom)),h},UU=e=>{const n=zU(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Sw(n))},ZU=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),UU(e))})};var Lh;(function(e){e.Before="before",e.After="after"})(Lh||(Lh={}));const WU=(e,n)=>Math.abs(e.left-n),jU=(e,n)=>Math.abs(e.right-n),GU=(e,n)=>e>=n.top&&e<=n.bottom,qU=(e,n)=>e.top<n.bottom&&e.bottom>n.top,KU=(e,n)=>{const o=Y8(e,n)/Math.min(e.height,n.height);return qU(e,n)&&o>.5},YU=(e,n)=>{const o=gt(e,r=>GU(n,r));return ST(o).fold(()=>[[],e],r=>{const{pass:c,fail:l}=da(e,d=>KU(d,r));return[c,l]})},XU=(e,n)=>({node:e.node,position:WU(e,n)<jU(e,n)?Lh.Before:Lh.After}),JU=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),Gy=(e,n,o,r)=>{const c=T=>di(T.node)?D.some(T):Ye(T.node)?Gy(ps(T.node.childNodes),n,o,!1):D.none(),l=(T,k,M)=>c(k).filter(P=>Math.abs(M(T,n,o)-M(P,n,o))<2&&ke(P.node)),d=(T,k)=>{const M=Vn(T,(P,B)=>k(P,n,o)-k(B,n,o));return Uc(M,c).map(P=>r&&!ke(P.node)&&M.length>1?l(P,M[1],k).getOr(P):P)},[g,h]=YU(Sf(e),o),{pass:y,fail:w}=da(h,T=>T.top<o);return d(g,JU).orThunk(()=>d(w,Yb)).orThunk(()=>d(y,Yb))},uN=(e,n,o,r)=>{const c=(l,d)=>{const g=y=>Ye(y)&&y.classList.contains("mce-drag-container"),h=gt(l.dom.childNodes,In(g));return d.fold(()=>Gy(h,o,r,!0),y=>{const w=gt(h,T=>T!==y.dom);return Gy(w,o,r,!0)}).orThunk(()=>(Gt(l,e)?D.none():gm(l)).bind(w=>c(w,D.some(l))))};return c(n,D.none())},dN=(e,n,o)=>{const r=z.fromDom(e),c=gl(r),d=z.fromPoint(c,n,o).filter(g=>ic(r,g)).getOr(r);return uN(r,d,n,o)},mN=(e,n,o)=>dN(e,n,o).filter(r=>t1(r.node)).map(r=>XU(r,n)),fN=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,l=c.documentElement,d=c.defaultView;return{top:r.top+((n=d==null?void 0:d.scrollY)!==null&&n!==void 0?n:0)-l.clientTop,left:r.left+((o=d==null?void 0:d.scrollX)!==null&&o!==void 0?o:0)-l.clientLeft}},QU=e=>e.inline?fN(e.getBody()):{left:0,top:0},eZ=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},gN=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},tZ=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=fN(e.getContentAreaContainer()),r=gN(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},hN=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),nZ=(e,n)=>hN(QU(e),eZ(e),tZ(e,n)),I3=e=>({target:e,srcElement:e}),pN=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...I3(o)}),oZ=(e,n,o)=>{const r=ks("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:it,stopImmediatePropagation:it,stopPropagation:it,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...I3(n)}},sZ=(e,n)=>{const o=RG(e);return n==="dragstart"?(wM(o),OV(o)):n==="drop"?(TV(o),Ma(o)):(kV(o),d0(o)),o},rZ=(e,n,o,r)=>{const c=sZ(o,e);return To(r)?oZ(e,n,c):pN(e,r,n,c)},bN=32,vN=100,qy=8,Ky=16,F3=to,aZ=X8(F3,oi),cZ=(e,n,o)=>F3(o)&&o!==n&&e.isEditable(o.parentElement),yN=(e,n,o)=>vn(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),iZ=(e,n,o,r)=>{const c=e.dom,l=n.cloneNode(!0);c.setStyles(l,{width:o,height:r}),c.setAttrib(l,"data-mce-selected",null);const d=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(d,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(l,{margin:0,boxSizing:"border-box"}),d.appendChild(l),d},lZ=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},Yy=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},$3=Yy("left",-32),L3=Yy("left",bN),CN=Yy("top",-32),xN=Yy("top",bN),uZ=(e,n,o,r,c,l,d,g,h,y,w,T)=>{let k=0,M=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(k=n.pageX+o-c),n.pageY+r>l&&(M=n.pageY+r-l),e.style.width=o-k+"px",e.style.height=r-M+"px";const P=h.clientHeight,B=h.clientWidth,F=d+h.getBoundingClientRect().top,U=g+h.getBoundingClientRect().left;w.on(q=>{q.intervalId.clear(),q.dragging&&T&&(d+qy>=P?q.intervalId.set(xN(y)):d-qy<=0?q.intervalId.set(CN(y)):g+qy>=B?q.intervalId.set(L3(y)):g-qy<=0?q.intervalId.set($3(y)):F+Ky>=window.innerHeight?q.intervalId.set(xN(window)):F-Ky<=0?q.intervalId.set(CN(window)):U+Ky>=window.innerWidth?q.intervalId.set(L3(window)):U-Ky<=0&&q.intervalId.set($3(window)))})},SN=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},dZ=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);SN(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&xd(z.fromDom(o))},mZ=e=>e.button===0,fZ=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),gZ=(e,n)=>o=>{if(mZ(o)){const r=mo(n.dom.getParents(o.target),aZ).getOr(null);if(_e(r)&&cZ(n.dom,n.getBody(),r)){const c=n.dom.getPos(r),l=n.getBody(),d=n.getDoc().documentElement;e.set({element:r,dataTransfer:vy(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?l.scrollWidth:d.offsetWidth)-2,maxY:(n.inline?l.scrollHeight:d.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:iZ(n,r,r.offsetWidth,r.offsetHeight),intervalId:ap(vN)})}}},ZG=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),mN(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===Lh.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(n,o)})},A0=(e,n,o,r,c)=>{n==="dragstart"&&Th(r,e.dom.getOuterHTML(o));const l=rZ(n,o,r,c);return e.dispatch(n,l)},Xy=(e,n)=>{const o=hr((c,l)=>ZG(n,c,l),0);n.on("remove",o.cancel);const r=e;return c=>e.on(l=>{const d=Math.max(Math.abs(c.screenX-l.screenX),Math.abs(c.screenY-l.screenY));if(!l.dragging&&d>10){const g=A0(n,"dragstart",l.element,l.dataTransfer,c);if(_e(g.dataTransfer)&&(l.dataTransfer=g.dataTransfer),g.isDefaultPrevented())return;l.dragging=!0,n.focus()}if(l.dragging){const g=c.currentTarget===n.getDoc().documentElement,h=fZ(l,nZ(n,c));lZ(l.ghost,n.getBody()),uZ(l.ghost,h,l.width,l.height,l.maxX,l.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,g),o.throttle(c.clientX,c.clientY)}})},wN=e=>{const n=e.getSel();if(_e(n)){const r=n.getRangeAt(0).startContainer;return ke(r)?r.parentNode:r}else return null},EN=(e,n)=>o=>{e.on(r=>{var c;if(r.intervalId.clear(),r.dragging){if(yN(n,wN(n.selection),r.element)){const l=(c=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&c!==void 0?c:n.getBody();A0(n,"drop",l,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{dZ(n.dom,r.element),MV(r.dataTransfer).each(g=>n.insertContent(g)),n._selectionOverrides.hideFakeCaret()})}A0(n,"dragend",n.getBody(),r.dataTransfer,o)}}),H3(e)},_N=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>A0(n,"dragend",r.element,r.dataTransfer),c=>A0(n,"dragend",r.element,r.dataTransfer,c))}),H3(e)},TN=(e,n)=>o=>_N(e,n,D.some(o)),H3=e=>{e.on(n=>{n.intervalId.clear(),SN(n.ghost)}),e.clear()},hZ=e=>{const n=fr(),o=wn.DOM,r=document,c=gZ(n,e),l=Xy(n,e),d=EN(n,e),g=TN(n,e);e.on("mousedown",c),e.on("mousemove",l),e.on("mouseup",d),o.bind(r,"mousemove",l),o.bind(r,"mouseup",g),e.on("remove",()=>{o.unbind(r,"mousemove",l),o.unbind(r,"mouseup",g)}),e.on("keydown",h=>{h.keyCode===je.ESC&&_N(n,e,D.none())})},pZ=e=>{const n=c=>{if(!c.isDefaultPrevented()){const l=c.dataTransfer;l&&(St(l.types,"Files")||l.files.length>0)&&(c.preventDefault(),c.type==="drop"&&K1(e,"Dropped file type is not supported"))}},o=c=>{Lv(e,c.target)&&n(c)},r=()=>{const c=wn.DOM,l=e.dom,d=document,g=e.inline?e.getBody():e.getDoc(),h=["drop","dragover"];de(h,y=>{c.bind(d,y,o),l.bind(g,y,n)}),e.on("remove",()=>{de(h,y=>{c.unbind(d,y,o),l.unbind(g,y,n)})})};e.on("init",()=>{Sc.setEditorTimeout(e,r,0)})},bZ=e=>{hZ(e),VP(e)&&pZ(e)},kN=e=>{const n=hr(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=tE(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},vZ=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(dc(o)){const r=nf(e.getBody(),o),c=to(r)?r:o;e.selection.getNode()!==c&&ey(e,c).each(l=>e.selection.setRng(l))}})})},If=to,AN=(e,n)=>nf(e.getBody(),n),yZ=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=m7(e,r,o.isBlock,()=>jm(e)),l="sel-"+o.uniqueId(),d="data-mce-selected";let g;const h=Ue=>_e(Ue)&&o.hasClass(Ue,"mce-offscreen-selection"),y=Ue=>Ue!==r&&(If(Ue)||dc(Ue))&&o.isChildOf(Ue,r)&&o.isEditable(Ue.parentNode),w=Ue=>{Ue&&n.setRng(Ue)},T=(Ue,le,se,ve=!0)=>e.dispatch("ShowCaret",{target:le,direction:Ue,before:se}).isDefaultPrevented()?null:(ve&&n.scrollIntoView(le,Ue===-1),c.show(se,le)),k=Ue=>{Ue.hasAttribute("data-mce-caret")&&(Kb(Ue),n.scrollIntoView(Ue))},M=()=>{e.on("click",le=>{o.isEditable(le.target)||(le.preventDefault(),e.focus())}),e.on("blur NewBlock",te),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",le=>{const se=le.target,ve=AN(e,se);If(ve)?(le.preventDefault(),ey(e,ve).each(X)):y(se)&&ey(e,se).each(X)},!0),e.on("mousedown",le=>{const se=le.target;if(se!==r&&se.nodeName!=="HTML"&&!o.isChildOf(se,r)||!dh(e,le.clientX,le.clientY))return;te(),we();const ve=AN(e,se);If(ve)?(le.preventDefault(),ey(e,ve).each(X)):mN(r,le.clientX,le.clientY).each(He=>{le.preventDefault();const nt=T(1,He.node,He.position===Lh.Before,!1);w(nt),wl(ve)?ve.focus():e.getBody().focus()})}),e.on("keypress",le=>{je.modifierPressed(le)||If(n.getNode())&&le.preventDefault()}),e.on("GetSelectionRange",le=>{let se=le.range;if(g){if(!g.parentNode){g=null;return}se=se.cloneRange(),se.selectNode(g),le.range=se}}),e.on("focusin",le=>{if(c.isShowing()&&e.getBody().contains(le.target)&&le.target!==e.getBody()&&!e.dom.isEditable(le.target.parentNode)){c.hide(),le.target.contains(e.selection.getNode())||(e.selection.select(le.target,!0),e.selection.collapse(!0));const se=X(e.selection.getRng(),!0);se&&e.selection.setRng(se)}}),e.on("SetSelectionRange",le=>{le.range=F(le.range);const se=X(le.range,le.forward);se&&(le.range=se)});const Ue=le=>Ye(le)&&le.id==="mcepastebin";e.on("AfterSetSelectionRange",le=>{const se=le.range,ve=se.startContainer.parentElement;!B(se)&&!Ue(ve)&&we(),h(ve)||te()}),bZ(e),kN(e),vZ(e)},P=Ue=>Uo(Ue)||Dg(Ue)||qb(Ue),B=Ue=>P(Ue.startContainer)||P(Ue.endContainer),F=Ue=>{const le=e.schema.getVoidElements(),se=o.createRng(),ve=Ue.startContainer,He=Ue.startOffset,nt=Ue.endContainer,It=Ue.endOffset;return bt(le,ve.nodeName.toLowerCase())?He===0?se.setStartBefore(ve):se.setStartAfter(ve):se.setStart(ve,He),bt(le,nt.nodeName.toLowerCase())?It===0?se.setEndBefore(nt):se.setEndAfter(nt):se.setEnd(nt,It),se},U=(Ue,le)=>{const se=z.fromDom(e.getBody()),ve=e.getDoc(),He=mu(se,"#"+l).getOrThunk(()=>{const $t=z.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ve);return as($t,"id",l),Mo(se,$t),$t}),nt=o.createRng();Fa(He),Cl(He,[z.fromText(Jn,ve),z.fromDom(le),z.fromText(Jn,ve)]),nt.setStart(He.dom.firstChild,1),nt.setEnd(He.dom.lastChild,0),hb(He,{top:o.getPos(Ue,e.getBody()).y+"px"}),oo(He);const It=n.getSel();return It&&(It.removeAllRanges(),It.addRange(nt)),nt},q=Ue=>{const le=Ue.cloneNode(!0),se=e.dispatch("ObjectSelected",{target:Ue,targetClone:le});if(se.isDefaultPrevented())return null;const ve=U(Ue,se.targetClone),He=z.fromDom(Ue);return de(Zn(z.fromDom(e.getBody()),`*[${d}]`),nt=>{Gt(He,nt)||Ko(nt,d)}),o.getAttrib(Ue,d)||Ue.setAttribute(d,"1"),g=Ue,we(),ve},X=(Ue,le)=>{if(!Ue)return null;if(Ue.collapsed){if(!B(Ue)){const nt=le?1:-1,It=r1(nt,r,Ue),$t=It.getNode(!le);if(_e($t)){if(t1($t))return T(nt,$t,le?!It.isAtEnd():!1,!1);if(rr($t)&&to($t.nextSibling)){const En=o.createRng();return En.setStart($t,0),En.setEnd($t,0),En}}const fn=It.getNode(le);if(_e(fn)){if(t1(fn))return T(nt,fn,le?!1:!It.isAtEnd(),!1);if(rr(fn)&&to(fn.previousSibling)){const En=o.createRng();return En.setStart(fn,1),En.setEnd(fn,1),En}}}return null}let se=Ue.startContainer,ve=Ue.startOffset;const He=Ue.endOffset;if(ke(se)&&ve===0&&If(se.parentNode)&&(se=se.parentNode,ve=o.nodeIndex(se),se=se.parentNode),!Ye(se))return null;if(He===ve+1&&se===Ue.endContainer){const nt=se.childNodes[ve];if(y(nt))return q(nt)}return null},te=()=>{g&&g.removeAttribute(d),mu(z.fromDom(e.getBody()),"#"+l).each(v),g=null},he=()=>{c.destroy(),g=null},we=()=>{c.hide()};return Ul(e)||M(),{showCaret:T,showBlockCaretContainer:k,hideFakeCaret:we,destroy:he}},CZ=(e,n)=>{let o=n;for(let r=e.previousSibling;ke(r);r=r.previousSibling)o+=r.data.length;return o},V3=(e,n,o,r,c)=>{if(ke(o)&&(r<0||r>o.data.length))return[];const l=c&&ke(o)?[CZ(o,r)]:[r];let d=o;for(;d!==n&&d.parentNode;)l.push(e.nodeIndex(d,c)),d=d.parentNode;return d===n?l.reverse():[]},z3=(e,n,o,r,c,l,d=!1)=>{const g=V3(e,n,o,r,d),h=V3(e,n,c,l,d);return{start:g,end:h}},ON=(e,n)=>{const o=n.slice(),r=o.pop();return jo(r)?hs(o,(l,d)=>l.bind(g=>D.from(g.childNodes[d])),D.some(e)).bind(l=>ke(l)&&(r<0||r>l.data.length)?D.none():D.some({node:l,offset:r})):D.none()},DN=(e,n)=>ON(e,n.start).bind(({node:o,offset:r})=>ON(e,n.end).map(({node:c,offset:l})=>{const d=document.createRange();return d.setStart(o,r),d.setEnd(c,l),d})),xZ=(e,n,o,r=!1)=>z3(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),Hh=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,ke(n.firstChild)&&Ro(n.firstChild.data)),Hh(e,r,o)}},Jy=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,l=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(ke(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),ke(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),Hh(e,c,o),c!==l&&Hh(e,l,o))},Qy=(e,n)=>D.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),eC=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:qt(r).concat(e.blockPatterns),inlinePatterns:rt(r).concat(e.inlinePatterns)}},U3=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},tC=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),Ic=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},Z3=(e,n,o)=>{const r=DN(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,l=r.endContainer,d=r.endOffset===0?l:l.splitText(r.endOffset),g=r.startOffset===0?c:c.splitText(r.startOffset),h=g.parentNode,y=d.parentNode;return{prefix:n,end:y.insertBefore(tC(e,n+"-end"),d),start:h.insertBefore(tC(e,n+"-start"),g)}},W3=(e,n,o)=>{Hh(e,e.get(n.prefix+"-end"),o),Hh(e,e.get(n.prefix+"-start"),o)},j3=e=>e.start.length===0,nC=e=>(n,o)=>{const c=n.data.substring(0,o),l=c.lastIndexOf(e.charAt(e.length-1)),d=c.lastIndexOf(e);return d!==-1?d+e.length:l!==-1?l+1:-1},oC=(e,n,o,r)=>{const c=n.start;return Dh(e,r.container,r.offset,nC(c),o).bind(d=>{var g,h;const y=(h=(g=o.textContent)===null||g===void 0?void 0:g.indexOf(c))!==null&&h!==void 0?h:-1;if(y!==-1&&d.offset>=y+c.length){const T=e.createRng();return T.setStart(d.container,d.offset-c.length),T.setEnd(d.container,d.offset),D.some(T)}else{const T=d.offset-c.length;return Sy(d.container,T,o).map(k=>{const M=e.createRng();return M.setStart(k.container,k.offset),M.setEnd(d.container,d.offset),M}).filter(k=>k.toString()===c).orThunk(()=>oC(e,n,o,Xi(d.container,0)))}})},MN=(e,n,o,r,c,l=!1)=>{if(n.start.length===0&&!l){const d=e.createRng();return d.setStart(o,r),d.setEnd(o,r),D.some(d)}return Tf(o,r,c).bind(d=>oC(e,n,c,d).bind(h=>{var y;if(l){if(h.endContainer===d.container&&h.endOffset===d.offset)return D.none();if(d.offset===0&&((y=h.endContainer.textContent)===null||y===void 0?void 0:y.length)===h.endOffset)return D.none()}return D.some(h)}))},RN=(e,n,o,r)=>{const c=e.dom,l=c.getRoot(),d=o.pattern,g=o.position.container,h=o.position.offset;return Sy(g,h-o.pattern.end.length,n).bind(y=>{const w=z3(c,l,y.container,y.offset,g,h,r);if(j3(d))return D.some({matches:[{pattern:d,startRng:w,endRng:w}],position:y});{const T=sC(e,o.remainingPatterns,y.container,y.offset,n,r),k=T.getOr({matches:[],position:y}),M=k.position;return MN(c,d,M.container,M.offset,n,T.isNone()).map(B=>{const F=xZ(c,l,B,r);return{matches:k.matches.concat([{pattern:d,startRng:F,endRng:w}]),position:Xi(B.startContainer,B.startOffset)}})}})},sC=(e,n,o,r,c,l)=>{const d=e.dom;return Tf(o,r,d.getRoot()).bind(g=>{const h=U3(d,c,o,r);for(let y=0;y<n.length;y++){const w=n[y];if(!td(h,w.end))continue;const T=n.slice();T.splice(y,1);const k=RN(e,c,{pattern:w,remainingPatterns:T,position:g},l);if(k.isNone()&&r>0)return sC(e,n,o,r-1,c,l);if(k.isSome())return k}return D.none()})},NN=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?de(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},SZ=(e,n,o,r)=>{const c=Ic(e.dom,o);Jy(e.dom,c,r),NN(e,n,c)},wZ=(e,n,o,r,c)=>{const l=e.dom,d=Ic(l,r),g=Ic(l,o);Jy(l,g,c),Jy(l,d,c);const h={prefix:o.prefix,start:o.end,end:r.start},y=Ic(l,h);NN(e,n,y)},EZ=(e,n)=>{const o=Pa("mce_textpattern"),r=cl(n,(c,l)=>{const d=Z3(e,o+`_end${c.length}`,l.endRng);return c.concat([{...l,endMarker:d}])},[]);return cl(r,(c,l)=>{const d=r.length-c.length-1,g=j3(l.pattern)?l.endMarker:Z3(e,o+`_start${d}`,l.startRng);return c.concat([{...l,startMarker:g}])},[])},BN=e=>Vn(e,(n,o)=>o.end.length-n.end.length),_Z=(e,n)=>{const o=Xt(e,r=>On(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},PN=(e,n,o,r,c,l)=>{const d=sC(e,c.inlinePatterns,o,r,n,l).fold(()=>[],h=>h.matches),g=sC(e,BN(c.inlinePatterns),o,r,n,l).fold(()=>[],h=>h.matches);return _Z(d,g)},TZ=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=EZ(o,n);de(c,l=>{const d=o.getParent(l.startMarker.start,o.isBlock),g=h=>h===d;j3(l.pattern)?SZ(e,l.pattern,l.endMarker,g):wZ(e,l.pattern,l.startMarker,l.endMarker,g),W3(o,l.endMarker,g),W3(o,l.startMarker,g)}),e.selection.moveToBookmark(r)},rC=(e,n,o)=>jE(n,0,n).map(r=>{const c=r.container;return GE(c,o.start.length,n).each(l=>{const d=e.createRng();d.setStart(c,0),d.setEnd(l.container,l.offset),Jy(e,d,g=>g===n)}),c}),IN=e=>(n,o)=>{const r=n.dom,c=o.pattern,l=DN(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),d=(g,h)=>{const y=h.get(g);return Kn(y)&&$o(y).exists(w=>bt(w,"block"))};return Qy(n,l).each(g=>{c.type==="block-format"?d(c.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,g,c),n.formatter.apply(c.format)}):c.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,g,c),n.execCommand(c.cmd,!1,c.value)})}),!0},kZ=e=>Vn(e,(n,o)=>o.start.length-n.start.length),FN=e=>(n,o)=>{const r=kZ(n),c=o.replace(Jn," ");return mo(r,l=>e(l,o,c))},$N=(e,n)=>(o,r,c,l,d)=>{var g;d===void 0&&(d=(g=r.textContent)!==null&&g!==void 0?g:"");const h=o.dom,y=Er(o);return h.is(r,y)?e(c.blockPatterns,d).map(w=>n&&Oe.trim(d).length===w.start.length?[]:[{pattern:w,range:z3(h,h.getRoot(),r,0,r,0,l)}]).getOr([]):[]},AZ=e=>/^\s[^\s]/.test(e),OZ=IN((e,n,o)=>{rC(e,n,o).each(r=>{const c=z.fromDom(r),l=gg(c);AZ(l)&&$_(c,l.slice(1))})}),DZ=FN((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),aC=$N(DZ,!0),MZ=(e,n)=>{const o=e.selection.getRng();return Qy(e,o).map(r=>{var c;const l=Math.max(0,o.startOffset),d=eC(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),g=PN(e,r,o.startContainer,l,d,!0),h=aC(e,r,d,!0);return{inlineMatches:g,blockMatches:h}}).filter(({inlineMatches:r,blockMatches:c})=>c.length>0||r.length>0)},RZ=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();de(n,r=>OZ(e,r)),e.selection.moveToBookmark(o)},G3=IN(rC),q3=FN((e,n,o)=>n===e.start||o===e.start),NZ=$N(q3,!1),BZ=(e,n)=>{const o=e.selection.getRng();return Qy(e,o).map(r=>{const c=Math.max(0,o.startOffset),l=U3(e.dom,r,o.startContainer,c),d=eC(n,r,l);return NZ(e,r,d,!1,l)}).filter(r=>r.length>0)},LN=(e,n)=>{de(n,o=>G3(e,o))},PZ=(e,n)=>MZ(e,n).fold(Ce,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{xT(e),TZ(e,o),RZ(e,r);const c=e.selection.getRng(),l=Tf(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),l.each(d=>{const g=d.container;g.data.charAt(d.offset-1)===pr&&(g.deleteData(d.offset-1,1),Hh(e.dom,g.parentNode,h=>h===e.dom.getRoot()))})}),!0)),IZ=(e,n)=>{const o=e.selection.getRng();Qy(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),l=U3(e.dom,r,o.startContainer,c),d=eC(n,r,l),g=PN(e,r,o.startContainer,c,d,!1);g.length>0&&e.undoManager.transact(()=>{TZ(e,g)})})},FZ=(e,n)=>BZ(e,n).fold(Ce,o=>(e.undoManager.transact(()=>{LN(e,o)}),!0)),HN=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},$Z=(e,n)=>HN(e,n,(o,r)=>o===r.keyCode&&!je.modifierPressed(r)),LZ=(e,n)=>HN(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),VN=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>Fm(jP(e).filter(d=>d.type==="inline-command"||d.type==="block-command"?e.queryCommandSupported(d.cmd):!0),GP(e)),c=()=>JP(e);e.on("keydown",d=>{if(d.keyCode===13&&!je.modifierPressed(d)&&e.selection.isCollapsed()&&e.selection.isEditable()){const g=jp(r(),"enter");(g.inlinePatterns.length>0||g.blockPatterns.length>0||c())&&PZ(e,g)&&d.preventDefault()}},!0),e.on("keydown",d=>{if(d.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const g=jp(r(),"space");(g.blockPatterns.length>0||c())&&FZ(e,g)&&d.preventDefault()}},!0);const l=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const d=jp(r(),"space");(d.inlinePatterns.length>0||c())&&IZ(e,d)}};e.on("keyup",d=>{$Z(o,d)&&l()}),e.on("keypress",d=>{LZ(n,d)&&Sc.setEditorTimeout(e,l)})},cC=e=>{VN(e)},zN=e=>{const n=Oe.each,o=je.BACKSPACE,r=je.DELETE,c=e.dom,l=e.selection,d=e.parser,g=rn.browser,h=g.isFirefox(),y=g.isChromium()||g.isSafari(),w=rn.deviceType.isiPhone()||rn.deviceType.isiPad(),T=rn.os.isMacOS()||rn.os.isiOS(),k=(fe,Ee)=>{try{e.getDoc().execCommand(fe,!1,String(Ee))}catch{}},M=fe=>fe.isDefaultPrevented(),P=()=>{const fe=Qe=>{const Ft=c.create("body"),Wt=Qe.cloneContents();return Ft.appendChild(Wt),l.serializer.serialize(Ft,{format:"html"})},Ee=Qe=>{const Ft=fe(Qe),Wt=c.createRng();Wt.selectNode(e.getBody());const yn=fe(Wt);return Ft===yn};e.on("keydown",Qe=>{const Ft=Qe.keyCode;if(!M(Qe)&&(Ft===r||Ft===o)&&e.selection.isEditable()){const Wt=e.selection.isCollapsed(),yn=e.getBody();if(Wt&&!Tl(e.schema,yn)||!Wt&&!Ee(e.selection.getRng()))return;Qe.preventDefault(),e.setContent(""),yn.firstChild&&c.isBlock(yn.firstChild)?e.selection.setCursorLocation(yn.firstChild,0):e.selection.setCursorLocation(yn,0),e.nodeChanged()}})},B=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},F=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",fe=>{let Ee;if(fe.target===e.getDoc().documentElement)if(Ee=l.getRng(),e.getBody().focus(),fe.type==="mousedown"){if(Uo(Ee.startContainer))return;l.placeCaretAt(fe.clientX,fe.clientY)}else l.setRng(Ee)})},U=()=>{e.on("keydown",fe=>{if(!M(fe)&&fe.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(l.isCollapsed()&&l.getRng().startOffset===0){const Ee=l.getNode(),Qe=Ee.previousSibling;if(Ee.nodeName==="HR"){c.remove(Ee),fe.preventDefault();return}Qe&&Qe.nodeName&&Qe.nodeName.toLowerCase()==="hr"&&(c.remove(Qe),fe.preventDefault())}}})},q=()=>{Range.prototype.getClientRects||e.on("mousedown",fe=>{if(!M(fe)&&fe.target.nodeName==="HTML"){const Ee=e.getBody();Ee.blur(),Sc.setEditorTimeout(e,()=>{Ee.focus()})}})},X=()=>{const fe=QT(e);e.on("click",Ee=>{const Qe=Ee.target;/^(IMG|HR)$/.test(Qe.nodeName)&&c.isEditable(Qe)&&(Ee.preventDefault(),e.selection.select(Qe),e.nodeChanged()),Qe.nodeName==="A"&&c.hasClass(Qe,fe)&&Qe.childNodes.length===0&&c.isEditable(Qe.parentNode)&&(Ee.preventDefault(),l.select(Qe))})},te=()=>{const fe=Ee=>Ee.nodeName==="IMG"&&e.dom.isEditable(Ee);e.on("mousedown",Ee=>{os(D.from(Ee.clientX),D.from(Ee.clientY),(Qe,Ft)=>{const Wt=e.getDoc().caretPositionFromPoint(Qe,Ft);if(Wt&&fe(Wt.offsetNode)){const yn=Wt.offsetNode.getBoundingClientRect();Ee.preventDefault(),e.hasFocus()||e.focus(),e.selection.select(Wt.offsetNode),Ee.clientX<yn.left||Ee.clientY<yn.top?e.selection.collapse(!0):(Ee.clientX>yn.right||Ee.clientY>yn.bottom)&&e.selection.collapse(!1)}})})},he=()=>{const fe=()=>{const Qe=c.getAttribs(l.getStart().cloneNode(!1));return()=>{const Ft=l.getStart();Ft!==e.getBody()&&(c.setAttrib(Ft,"style",null),n(Qe,Wt=>{Ft.setAttributeNode(Wt.cloneNode(!0))}))}},Ee=()=>!l.isCollapsed()&&c.getParent(l.getStart(),c.isBlock)!==c.getParent(l.getEnd(),c.isBlock);e.on("keypress",Qe=>{let Ft;return!M(Qe)&&(Qe.keyCode===8||Qe.keyCode===46)&&Ee()?(Ft=fe(),e.getDoc().execCommand("delete",!1),Ft(),Qe.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",Qe=>{if(!M(Qe)&&Ee()){const Ft=fe();Sc.setEditorTimeout(e,()=>{Ft()})}})},we=()=>{e.on("keydown",fe=>{if(!M(fe)&&fe.keyCode===o&&l.isCollapsed()&&l.getRng().startOffset===0){const Ee=l.getNode().previousSibling;if(Ee&&Ee.nodeName&&Ee.nodeName.toLowerCase()==="table")return fe.preventDefault(),!1}return!0})},Ue=()=>{e.on("keydown",fe=>{if(M(fe)||fe.keyCode!==je.BACKSPACE)return;let Ee=l.getRng();const Qe=Ee.startContainer,Ft=Ee.startOffset,Wt=c.getRoot();let yn=Qe;if(!(!Ee.collapsed||Ft!==0)){for(;yn.parentNode&&yn.parentNode.firstChild===yn&&yn.parentNode!==Wt;)yn=yn.parentNode;yn.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,yn),Ee=c.createRng(),Ee.setStart(Qe,0),Ee.setEnd(Qe,0),l.setRng(Ee))}})},le=()=>{const fe=()=>{k("StyleWithCSS",!1),k("enableInlineTableEditing",!1),ZT(e)||k("enableObjectResizing",!1)};YT(e)||e.on("BeforeExecCommand mousedown",fe)},se=()=>{const fe=()=>{n(c.select("a:not([data-mce-block])"),Ee=>{var Qe;let Ft=Ee.parentNode;const Wt=c.getRoot();if((Ft==null?void 0:Ft.lastChild)===Ee){for(;Ft&&!c.isBlock(Ft);){if(((Qe=Ft.parentNode)===null||Qe===void 0?void 0:Qe.lastChild)!==Ft||Ft===Wt)return;Ft=Ft.parentNode}c.add(Ft,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Ee=>{(Ee.type==="setcontent"||Ee.command==="mceInsertLink")&&fe()})},ve=()=>{e.on("init",()=>{k("DefaultParagraphSeparator",Er(e))})},He=fe=>{const Ee=fe.getBody(),Qe=fe.selection.getRng();return Qe.startContainer===Qe.endContainer&&Qe.startContainer===Ee&&Qe.startOffset===0&&Qe.endOffset===Ee.childNodes.length},nt=()=>{e.on("keyup focusin mouseup",fe=>{!je.modifierPressed(fe)&&!He(e)&&l.normalize()},!0)},It=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},$t=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},fn=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",fe=>{let Ee;fe.target.nodeName==="HTML"&&(Ee=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Ee),e.selection.normalize(),e.nodeChanged())}))},En=()=>{T&&e.on("keydown",fe=>{je.metaKeyPressed(fe)&&!fe.shiftKey&&(fe.keyCode===37||fe.keyCode===39)&&(fe.preventDefault(),e.selection.getSel().modify("move",fe.keyCode===37?"backward":"forward","lineboundary"))})},so=()=>{e.on("click",fe=>{let Ee=fe.target;do if(Ee.tagName==="A"){fe.preventDefault();return}while(Ee=Ee.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ns=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",fe=>{fe.preventDefault()})})},fs=()=>{d.addNodeFilter("br",fe=>{let Ee=fe.length;for(;Ee--;)fe[Ee].attr("class")==="Apple-interchange-newline"&&fe[Ee].remove()})},Be=it,et=()=>{if(!h||e.removed)return!1;const fe=e.selection.getSel();return!fe||!fe.rangeCount||fe.rangeCount===0},ln=()=>{y&&(F(),X(),ns(),B(),w&&($t(),fn(),so())),h&&(q(),le(),It(),En())},gn=()=>{Ue(),P(),rn.windowsPhone||nt(),y&&(F(),X(),ve(),ns(),we(),fs(),w?($t(),fn(),so()):B()),h&&(te(),U(),q(),he(),le(),se(),It(),En(),we())};return Ul(e)?ln():gn(),{refreshContentEditable:Be,isHidden:et}},UN=e=>e.toLowerCase()==="gpl",HZ=e=>e.length>=64&&e.length<=255,VZ=e=>UN(e)||HZ(e)?"VALID":"INVALID",iC=e=>{const n=o7(e);!ee(s7(e))&&(To(n)||VZ(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},K3=wn.DOM,ZN=(e,n)=>{const o=z.fromDom(e.getBody()),r=yl(lc(o)),c=z.fromTag("style");as(c,"type","text/css"),Mo(c,z.fromText(n)),Mo(r,c),e.on("remove",()=>{v(c)})},zZ=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,lC=e=>oc(e,n=>To(n)===!1),WN=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return lC({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),extended_mathml_attributes:n("extended_mathml_attributes"),extended_mathml_elements:n("extended_mathml_elements"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:zZ(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:vv(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},jN=e=>{const n=e.options.get;return lC({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},UZ=e=>{const n=e.options.get;return{...WN(e),...jN(e),...lC({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},ZZ=e=>{const n=ff(WN(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,l="data-mce-"+r;let d=o.length;for(;d--;){const g=o[d];let h=g.attr(r);if(h&&!g.attr(l)){if(h.indexOf("data:")===0||h.indexOf("blob:")===0)continue;r==="style"?(h=c.serializeStyle(c.parseStyle(h),g.name),h.length||(h=null),g.attr(l,h),g.attr(r,h)):r==="tabindex"?(g.attr(l,h),g.attr(r,null)):g.attr(l,e.convertURL(h,r,g.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],l=c.attr("type")||"no/type";l.indexOf("mce-")!==0&&c.attr("type","mce-"+l)}}),YP(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const l=o[c];l.type=8,l.name="#comment",l.value="[CDATA["+e.dom.encode((r=l.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const l=o[r];l.isEmpty(c)&&l.getAll("br").length===0&&l.append(new Fr("br",1))}}),n},WZ=e=>{const n=nk(e);n&&Sc.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},Vh=e=>{const n=e.dom.getRoot();!e.inline&&(!Mv(e)||e.selection.getStart(!0)===n)&&Ws(n).each(o=>{const r=o.getNode(),c=El(r)?Ws(r).getOr(o):o;e.selection.setRng(c.toRange())})},jZ=e=>{e.bindPendingEventDelegates(),e.initialized=!0,gP(e),e.focus(!0),Vh(e),e.nodeChanged({initial:!0});const n=Vj(e);Zt(n)&&n.call(e,e),WZ(e),Si(e)&&X1(e,!0)},Y3=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,GN=(e,n,o)=>{const{pass:r,fail:c}=da(n,g=>tinymce.Resource.has(H4(g))),d=[...r.map(g=>{const h=tinymce.Resource.get(H4(g));return ee(h)?Promise.resolve(Y3(e).loadRawCss(g,h)):Promise.resolve()}),Y3(e).loadAll(c)];return e.inline?d:d.concat([e.ui.styleSheetLoader.loadAll(o)])},qN=e=>{const n=Y3(e),o=UT(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},l=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let h="";Oe.each(e.contentStyles,y=>{h+=y+`\r
`}),e.dom.addStyle(h)}const d=Promise.all(GN(e,r,o)).then(l).catch(l),g=zT(e);return g&&ZN(e,g),d},GZ=e=>{const n=e.getDoc(),o=e.getBody();fP(e),Jx(e)||(n.body.spellcheck=!1,K3.setAttrib(o,"spellcheck","false")),e.quirks=zN(e),dv(e);const r=MP(e);r!==void 0&&(o.dir=r);const c=Qx(e);c&&e.on("BeforeSetContent",l=>{Oe.each(c,d=>{l.content=l.content.replace(d,g=>"<!--mce:protected "+escape(g)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",l=>{e.composing=l.type==="compositionstart"})},qZ=e=>{Ul(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},uC=e=>{e.removed!==!0&&(qZ(e),jZ(e))},KZ=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},KN=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(K3.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=YT(e),e._editableRoot=Hg(e),!zg(e)&&e.hasEditableRoot()&&(e.inline&&K3.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=kH(e),e.schema=sr(jN(e)),e.dom=wn(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:nn(e),referrerPolicy:pc(e),onSetAttrib:d=>{e.dispatch("SetAttrib",d)}}),e.parser=ZZ(e),e.serializer=uD(UZ(e),e),e.selection=iD(e.dom,e.getWin(),e.serializer,e),e.annotator=Pv(e),e.formatter=Nn(e),e.undoManager=q4(e),e._nodeChangeDispatcher=new FR(e),e._selectionOverrides=yZ(e),Y9(e),HU(e),OE(e),Ul(e)||(ZU(e),cC(e));const c=x3(e);G9(e,c),Q9(e),Y4(e),$U(e);const l=RL(e);GZ(e),iC(e),l.fold(()=>{const d=KZ(e);qN(e).then(()=>{uC(e),d()})},d=>{e.setProgressState(!0),qN(e).then(()=>{d().then(g=>{e.setProgressState(!1),uC(e),x4(e)},g=>{e.notificationManager.open({type:"error",text:String(g)}),uC(e),x4(e)})})})},YN=wn.DOM,dC=(e,n,o,r)=>{const c=z.fromTag("iframe");return r.each(l=>as(c,"tabindex",l)),pa(c,o),pa(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Un(c,"tox-edit-area__iframe"),c},YZ=e=>{let n=VT(e)+"<html><head>";xP(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Lj(e),r=SP(e),c=e.translate(ek(e));return wP(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+wP(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},XZ=(e,n)=>{const o=rn.browser.isFirefox()?ek(e):"Rich Text Area",r=e.translate(o),c=Cr(z.fromDom(e.getElement()),"tabindex").bind(Fi),l=dC(e.id,r,CP(e),c).dom;l.onload=()=>{l.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=l,e.iframeHTML=YZ(e),YN.add(n.iframeContainer,l)},JZ=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,KN(e)};if(dk(e)||rn.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=qo(z.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},QZ=(e,n)=>{XZ(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=YN.isHidden(n.editorContainer)),e.getElement().style.display="none",YN.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,JZ(e)},XN=wn.DOM,eW=(e,n,o)=>{const r=gf.get(o),c=gf.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Oe.trim(o),r&&Oe.inArray(n,o)===-1){if(e.plugins[o])return;try{const l=r(e,c)||{};e.plugins[o]=l,Zt(l.init)&&(l.init(e,c),n.push(o))}catch(l){N4(e,o,l)}}},tW=e=>e.replace(/^\-/,""),nW=e=>{const n=[];de(Ad(e),o=>{eW(e,n,tW(o))})},oW=e=>{const n=Oe.trim(Yp(e)),o=e.ui.registry.getAll().icons,r={...uh.get("default").icons,...uh.get(n).icons};Le(r,(c,l)=>{bt(o,l)||e.ui.registry.addIcon(l,c)})},sW=e=>{const n=$g(e);if(ee(n)){const o=Ld.get(n);e.theme=o(e,Ld.urls[n])||{},Zt(e.theme.init)&&e.theme.init(e,Ld.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},rW=e=>{const n=pv(e),o=$d.get(n);e.model=o(e,$d.urls[n])},aW=e=>{const n=e.theme.renderUI;return n?n():X3(e)},cW=e=>{const n=e.getElement(),r=$g(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},Bn=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),iW=e=>{const n=XN.create("div");return XN.insertAfter(n,e),Bn(n,n)},X3=e=>{const n=e.getElement();return e.inline?Bn(null):iW(n)},lW=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,ee($g(e))?aW(e):Zt($g(e))?cW(e):X3(e)},J3=(e,n)=>{const o={show:D.from(n.show).getOr(it),hide:D.from(n.hide).getOr(it),isEnabled:D.from(n.isEnabled).getOr(ze),setEnabled:r=>{r&&(e.mode.get()==="readonly"||Si(e))||D.from(n.setEnabled).each(l=>l(r))}};e.ui={...e.ui,...o}},JN=async e=>{e.dispatch("ScriptsLoaded"),oW(e),sW(e),rW(e),nW(e);const n=await lW(e);J3(e,D.from(n.api).getOr({})),e.editorContainer=n.editorContainer,wH(e),e.inline?KN(e):QZ(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Ff=wn.DOM,QN=e=>e.charAt(0)==="-",uW=(e,n)=>{const o=kd(n),r=OP(n);if(!zo.hasCode(o)&&o!=="en"){const c=tn(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{OD(n,c,o)})}},eB=(e,n)=>{const o=$g(e);if(ee(o)&&!QN(o)&&!bt(Ld.urls,o)){const r=BP(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Ld.load(o,c).catch(()=>{DD(e,c,o)})}},mC=(e,n)=>{const o=pv(e);if(o!=="plugin"&&!bt($d.urls,o)){const r=jT(e),c=ee(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;$d.load(o,c).catch(()=>{MD(e,c,o)})}},dW=e=>D.from(Ig(e)).filter(tn).map(n=>({url:n,name:D.none()})),tB=(e,n,o)=>D.from(n).filter(r=>tn(r)&&!uh.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:D.some(r)})),Q3=(e,n,o)=>{const r=tB(n,"default",o),c=dW(n).orThunk(()=>tB(n,Yp(n),""));de(op([r,c]),l=>{e.add(l.url).catch(()=>{AD(n,l.url,l.name.getOrUndefined())})})},mW=(e,n)=>{const o=(r,c)=>{gf.load(r,c).catch(()=>{kD(e,c,r)})};Le(Vg(e),(r,c)=>{o(c,r),e.options.set("plugins",Ad(e).concat(c))}),de(Ad(e),r=>{r=Oe.trim(r),r&&!gf.urls[r]&&!QN(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},fW=e=>{const n=$g(e);return!ee(n)||_e(Ld.get(n))},gW=e=>{const n=pv(e);return _e($d.get(n))},hW=(e,n)=>{const o=vu.ScriptLoader,r=()=>{!e.removed&&fW(e)&&gW(e)&&JN(e)};eB(e,n),mC(e,n),uW(o,e),Q3(o,e,n),mW(e,n),o.loadQueue().then(r,r)},nB=(e,n)=>cx.forElement(e,{contentCssCors:XT(n),referrerPolicy:pc(n)}),pW=e=>{const n=e.id;zo.setCode(kd(e));const o=()=>{Ff.unbind(window,"ready",o),e.render()};if(!Zi.Event.domLoaded){Ff.bind(window,"ready",o);return}if(!e.getElement())return;const r=z.fromDom(e.getElement()),c=_t(r);e.on("remove",()=>{Vc(r.dom.attributes,d=>Ko(r,d.name)),pa(r,c)}),e.ui.styleSheetLoader=nB(r,e),dn(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const l=e.getElement().form||Ff.getParent(n,"form");l&&(e.formElement=l,qT(e)&&!Ab(e.getElement())&&(Ff.insertAfter(Ff.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=d=>{e.dispatch(d.type,d)},Ff.bind(l,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),Xx(e)&&!l.submit.nodeType&&!l.submit.length&&!l._mceOldSubmit&&(l._mceOldSubmit=l.submit,l.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),l._mceOldSubmit(l)))),e.windowManager=q1(e),e.notificationManager=ED(e),QP(e)&&e.on("GetContent",d=>{d.save&&(d.content=Ff.encode(d.content))}),LP(e)&&e.on("submit",()=>{e.initialized&&e.save()}),$m(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),hW(e,e.suffix)},bW=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,Si(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),bP(e,n))},oB=e=>e._editableRoot,vW=(e,n)=>({sections:Ve(e),options:Ve(n)}),e_=Qs().deviceType,t_=e_.isPhone(),n_=e_.isTablet(),O0=e=>{if(vn(e))return[];{const n=Kn(e)?e:e.split(/[ ,]/),o=wt(n,Wc);return gt(o,tn)}},sB=(e,n)=>{const o=tt(n,(r,c)=>St(e,c));return vW(o.t,o.f)},yW=(e,n,o={})=>{const r=e.sections(),c=zn(r,n).getOr({});return Oe.extend({},o,c)},D0=(e,n)=>bt(e.sections(),n),CW=(e,n)=>D0(e,n)?e.sections()[n]:{},rB=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:zn(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),xW=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Oe.extend({},e.external_plugins,r):r},SW=(e,n)=>[...O0(e),...O0(n)],wW=(e,n,o,r)=>e&&D0(n,"mobile")?r:o,aB=(e,n,o,r)=>{const c=O0(o.forced_plugins),l=O0(r.plugins),d=CW(n,"mobile"),g=d.plugins?O0(d.plugins):l,h=wW(e,n,l,g),y=SW(c,h);return Oe.extend(r,{forced_plugins:c,plugins:y})},EW=(e,n)=>e&&D0(n,"mobile"),cB=(e,n,o,r,c)=>{var l;const d=e?{mobile:rB((l=c.mobile)!==null&&l!==void 0?l:{},n)}:{},g=sB(["mobile"],vs(d,c)),h=Oe.extend(o,r,g.options(),EW(e,g)?yW(g,"mobile"):{},{external_plugins:xW(r,g.options())});return aB(e,g,r,h)},fC=(e,n)=>{const o=Qu(n);return cB(t_||n_,t_,o,e,o)},o_=(e,n)=>GL(e,n),s_=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{de("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},_W=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return On(c,l=>_e(e.formatter.matchNode(l,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},TW=e=>{s_(e),_W(e)},zh=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(rn.os.isMacOS()||rn.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},kW=(e,n,o,r)=>{const c=z.fromDom(e.getRoot());return y1(c,ue.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),C1(c,ue.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},Uh=e=>{if(typeof e!="string"){const n=Oe.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},M0=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?kW(r,o.getRng(),n,e.schema):n},gC=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=Uh(n);a4(e,{...r,content:M0(e,o),format:"html",set:!1,selection:!0}).each(c=>{const l=WL(e,c.content,r);c4(e,l,c),e.addVisual()})}},AW=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{gC(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{gC(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{gC(e,r)},mceInsertContent:(n,o,r)=>{gC(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(bv(e))}})},Zh={"font-size":"size","font-family":"face"},OW=rs("font"),r_=(e,n,o)=>{const r=l=>pb(l,e).orThunk(()=>OW(l)?zn(Zh,e).bind(d=>Cr(l,d)):D.none()),c=l=>Gt(z.fromDom(n),l);return pg(z.fromDom(o),l=>r(l),c)},DW=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),iB=(e,n)=>D.from(wn.DOM.getStyle(n,e,!0)),a_=e=>(n,o)=>D.from(o).map(z.fromDom).filter(Pr).bind(r=>r_(e,n,r.dom).or(iB(e,r.dom))).getOr(""),c_=a_("font-size"),lB=x(DW,a_("font-family")),MW=e=>Ws(e.getBody()).bind(n=>{const o=n.container();return D.from(ke(o)?o.parentNode:o)}),RW=e=>D.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?D.none():D.from(e.selection.getStart(!0))}),uB=(e,n)=>RW(e).orThunk(qe(MW,e)).map(z.fromDom).filter(Pr).bind(n),i_=(e,n)=>uB(e,Hc(D.some,n)),l_=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=mk(e),c=fk(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},u_=e=>{const n=e.split(/\s*,\s*/);return wt(n,o=>o.indexOf(" ")!==-1&&!(Lo(o,'"')||Lo(o,"'"))?`'${o}'`:o).join(",")},dB=(e,n)=>{const o=l_(e,n);e.formatter.toggle("fontname",{value:u_(o)}),e.nodeChanged()},NW=e=>i_(e,n=>lB(e.getBody(),n.dom)).getOr(""),BW=(e,n)=>{e.formatter.toggle("fontsize",{value:l_(e,n)}),e.nodeChanged()},PW=e=>i_(e,n=>c_(e.getBody(),n.dom)).getOr(""),mB=e=>i_(e,n=>{const o=z.fromDom(e.getBody()),r=pg(n,l=>pb(l,"line-height"),qe(Gt,o)),c=()=>{const l=parseFloat(Yo(n,"line-height")),d=parseFloat(Yo(n,"font-size"));return String(l/d)};return r.getOrThunk(c)}).getOr(""),d_=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},IW=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{dB(e,c)},FontSize:(o,r,c)=>{BW(e,c)},LineHeight:(o,r,c)=>{d_(e,c)},Lang:(o,r,c)=>{var l;n(o,{value:c.code,customValue:(l=c.customCode)!==null&&l!==void 0?l:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(ee(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},fB=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>NW(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>PW(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>mB(e))},gB=e=>{IW(e),fB(e)},FW=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},hB=e=>{e.editorCommands.addCommands({Indent:()=>{Z9(e)},Outdent:()=>{K6(e)}}),e.editorCommands.addCommands({Outdent:()=>my(e)},"state")},$W=e=>{const n=(o,r,c)=>{if(e.mode.isReadOnly())return;const l=ee(c)?{href:c}:c,d=e.dom.getParent(e.selection.getNode(),"a");Ot(l)&&ee(l.href)&&(l.href=l.href.replace(/ /g,"%20"),(!d||!l.href)&&e.formatter.remove("link"),l.href&&e.formatter.apply("link",l,d))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},LW=(e,n,o,r)=>{const c=e.dom,l=g=>c.isBlock(g)&&g.parentElement===o,d=l(n)?n:c.getParent(r,l,o);return D.from(d).map(z.fromDom)},R0=(e,n)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),c=n?e.selection.getStart():e.selection.getEnd(),l=n?r.startContainer:r.endContainer,d=b0(o,l);if(!d||!d.isContentEditable)return;const g=n?yr:Li,h=Er(e);LW(e,c,d,l).each(y=>{const w=Ny(e,l,y.dom,d,!1,h);g(y,z.fromDom(w)),e.selection.setCursorLocation(w,0),e.dispatch("NewBlock",{newBlock:w}),Rh(e,"insertParagraph")})},HW=e=>R0(e,!0),VW=e=>R0(e,!1),pB=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{HW(e)},InsertNewBlockAfter:()=>{VW(e)}})},bB=e=>{e.editorCommands.addCommands({insertParagraph:()=>{Ph($z,e)},mceInsertNewLine:(n,o,r)=>{Py(e,r)},InsertLineBreak:(n,o,r)=>{Ph(d3,e)}})},zW=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),l=>Ye(l)&&c++===r?(e.selection.select(l),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),oi);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},UW=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const l=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(l)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{Kj(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},ZW=e=>{TW(e),zh(e),FW(e),zW(e),AW(e),$W(e),hB(e),pB(e),bB(e),gB(e),UW(e)},WW=["toggleview"],vB=e=>St(WW,e.toLowerCase());class m_{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const l=this.editor,d=n.toLowerCase(),g=c==null?void 0:c.skip_focus;if(l.removed||(d!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(d)&&!g?l.focus():X7(l)),l.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const y=this.commands.exec[d];return Zt(y)?(y(d,o,r),l.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!vB(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return Zt(r)?r(o):!1}queryCommandValue(n){if(!vB(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return Zt(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;Le(n,(c,l)=>{de(l.toLowerCase().split(","),d=>{r[o][d]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(l,d,g)=>o.call(r??this.editor,d,g)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const jW=Oe.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class f_{static isNative(n){return!!jW[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ce}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=Om(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const l=this.bindings[r];if(l)for(let d=0,g=l.length;d<g;d++){const h=l[d];if(!h.removed){if(h.once&&this.off(r,h.func),c.isImmediatePropagationStopped())return c;if(h.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=Ce),o){const l={func:o,removed:!1};c&&Oe.extend(l,c);const d=n.toLowerCase().split(" ");let g=d.length;for(;g--;){const h=d[g];let y=this.bindings[h];y||(y=[],this.toggleEvent(h,!0)),r?y=[l,...y]:y=[...y,l],this.bindings[h]=y}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const l=r[c];let d=this.bindings[l];if(!l)return Le(this.bindings,(g,h)=>{this.toggleEvent(h,!1),delete this.bindings[h]}),this;if(d){if(!o)d.length=0;else{const g=da(d,h=>h.func===o);d=g.fail,this.bindings[l]=d,de(g.pass,h=>{h.removed=!0})}d.length||(this.toggleEvent(n,!1),delete this.bindings[l])}}}else Le(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const N0=e=>(e._eventDispatcher||(e._eventDispatcher=new f_({scope:e,toggleEvent:(n,o)=>{f_.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),g_={fire(e,n,o){return console.warn('The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',new Error().stack),this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return Om(e.toLowerCase(),n??{},r);const c=N0(r).dispatch(e,n);if(o!==!1&&r.parent){let l=r.parent();for(;l&&!c.isPropagationStopped();)l.dispatch(e,c,!1),l=l.parent?l.parent():void 0}return c},on(e,n,o){return N0(this).on(e,n,o)},off(e,n){return N0(this).off(e,n)},once(e,n){return N0(this).once(e,n)},hasEventListeners(e){return N0(this).has(e)}},hC=wn.DOM;let $f;const pC=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=WT(e);return o?(e.eventRoot||(e.eventRoot=hC.select(o)[0]),e.eventRoot):e.getBody()},GW=e=>!e.hidden&&!Si(e),h_=(e,n,o)=>{GW(e)?e.dispatch(n,o):Si(e)&&L4(e,o)},p_=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=pC(e,n);if(WT(e)){if($f||($f={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||$f&&(Le($f,(c,l)=>{e.dom.unbind(pC(e,l))}),$f=null)})),$f[n])return;const r=c=>{const l=c.target,d=e.editorManager.get();let g=d.length;for(;g--;){const h=d[g].getBody();(h===l||hC.isChildOf(l,h))&&h_(d[g],n,c)}};$f[n]=r,hC.bind(o,n,r)}else{const r=c=>{h_(e,n,c)};hC.bind(o,n,r),e.delegates[n]=r}},yB={...g_,bindPendingEventDelegates(){const e=this;Oe.each(e._pendingNativeEvents,n=>{p_(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?p_(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(pC(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(Le(e.delegates,(r,c)=>{e.dom.unbind(pC(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},qW=e=>ee(e)?{value:e.split(/[ ,]/),valid:!0}:pn(e,ee)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},KW=e=>{const n=(()=>{switch(e){case"array":return Kn;case"boolean":return Lt;case"function":return Zt;case"number":return jo;case"object":return Ot;case"string":return ee;case"string[]":return qW;case"object[]":return o=>pn(o,Ot);case"regexp":return o=>xt(o,RegExp);default:return ze}})();return o=>bC(o,n,`The value must be a ${e}.`)},B0=e=>ee(e.processor),CB=(e,n)=>{const o=il(n.message)?"":`. ${n.message}`;return e+o},xB=e=>e.valid,bC=(e,n,o="")=>{const r=n(e);return Lt(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},YW=(e,n,o)=>{if(!To(n)){const r=bC(n,o);if(xB(r))return r.value;console.error(CB(`Invalid default value passed for the "${e}" option`,r))}},XW=(e,n,o=n)=>{const r={},c={},l=(M,P,B)=>{const F=bC(P,B);return xB(F)?(c[M]=F.value,!0):(console.warn(CB(`Invalid value passed for the ${M} option`,F)),!1)},d=(M,P)=>{const B=B0(P)?KW(P.processor):P.processor,F=YW(M,P.default,B);r[M]={...P,default:F,processor:B},zn(c,M).orThunk(()=>zn(n,M)).each(q=>l(M,q,B))},g=M=>bt(r,M);return{register:d,isRegistered:g,get:M=>zn(c,M).orThunk(()=>zn(r,M).map(P=>P.default)).getOrUndefined(),set:(M,P)=>{if(g(M)){const B=r[M];return B.immutable?(console.error(`"${M}" is an immutable option and cannot be updated`),!1):l(M,P,B.processor)}else return console.warn(`"${M}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:M=>{const P=g(M);return P&&delete c[M],P},isSet:M=>bt(c,M),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(M,P)=>Lt(P)||jo(P)||ee(P)||Y(P)||Kn(P)||rl(P)?P:Object.prototype.toString.call(P))))}catch(M){console.error(M)}}}},JW=(e,n)=>{e.dom.contentEditable="true"},QW=(e,n)=>{const o=z.fromDom(e.getBody());n?(e.readonly=!0,e.hasEditableRoot()&&JW(o),P4(e)):(e.readonly=!1,G2(e))},Wh=e=>e.readonly,vC=e=>{const n=e.undoManager.add();_e(n)&&(e.undoManager.undo(),e.undoManager.reset())},SB=e=>On(e,n=>n.type==="characterData"||n.type==="childList"),wB=e=>{const n=r=>{Wh(e)&&SB(r)&&vC(e)},o=new MutationObserver(n);e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",r=>{Wh(e)&&r.preventDefault()}),e.on("BeforeExecCommand",r=>{(r.command==="Undo"||r.command==="Redo")&&Wh(e)&&r.preventDefault()}),e.on("compositionstart",()=>{Wh(e)&&o.observe(e.getBody(),{characterData:!0,childList:!0,subtree:!0})}),e.on("compositionend",()=>{if(Wh(e)){const r=o.takeRecords();n(r)}o.disconnect()})},ej=["design","readonly"],EB=(e,n,o,r)=>{const c=o[n.get()],l=o[r];try{l.activate()}catch(d){console.error(`problem while activating editor mode ${r}:`,d);return}c.deactivate(),c.editorReadOnly!==l.editorReadOnly&&QW(e,l.editorReadOnly),n.set(r),mP(e,r)},tj=(e,n,o,r)=>{if(!(r===o.get()||e.initialized&&Si(e))){if(!bt(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?EB(e,o,n,r):e.on("init",()=>EB(e,o,n,r))}},jG=(e,n,o)=>{if(St(ej,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},nj=e=>{const n=fo("design"),o=fo({design:{activate:it,deactivate:it,editorReadOnly:!1},readonly:{activate:it,deactivate:it,editorReadOnly:!0}});return wB(e),Vd(e),{isReadOnly:()=>Wh(e),set:r=>tj(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(jG(o.get(),r,c))}}},b_=Oe.each,P0=Oe.explode,yC={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},_B=Oe.makeMap("alt,ctrl,shift,meta,access"),oj=e=>e in _B,sj=e=>{const n={},o=rn.os.isMacOS()||rn.os.isiOS();b_(P0(e.toLowerCase(),"+"),l=>{oj(l)?n[l]=!0:/^[0-9]{2,}$/.test(l)?n.keyCode=parseInt(l,10):(n.charCode=l.charCodeAt(0),n.keyCode=yC[l]||l.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in _B)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class v_{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(b_(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const l=this,d=l.normalizeCommandFunc(r);return b_(P0(Oe.trim(n)),g=>{const h=l.createShortcut(g,o,d,c);l.shortcuts[h.id]=h}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Oe.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const l=Oe.map(P0(n,">"),sj);return l[l.length-1]=Oe.extend(l[l.length-1],{func:r,scope:c||this.editor}),Oe.extend(l[0],{desc:this.editor.translate(o),subpatterns:l.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const rj=()=>{const e=cR();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},Gu=wn.DOM,y_=Oe.extend,aj=Oe.each;class CC{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,y_(this,yB);const c=this;this.id=n,this.hidden=!1;const l=fC(r.defaultOptions,o);this.options=XW(c,l,o),yt(c);const d=this.options.get;d("deprecation_warnings")&&yH(o,l);const g=d("suffix");g&&(r.suffix=g),this.suffix=r.suffix;const h=d("base_url");h&&r._setBaseUrl(h),this.baseUri=r.baseURI;const y=pc(c);y&&(vu.ScriptLoader._setReferrerPolicy(y),wn.DOM.styleSheetLoader._setReferrerPolicy(y));const w=XT(c);_e(w)&&wn.DOM.styleSheetLoader._setContentCssCors(w),is.languageLoad=d("language_load"),is.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new yi(xP(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=dn(c),this.hasVisual=JT(c),this.shortcuts=new v_(this),this.editorCommands=new m_(this),ZW(this);const T=d("cache_suffix");T&&(rn.cacheSuffix=T.replace(/^[\?\&]+/,"")),this.ui={registry:rj(),styleSheetLoader:void 0,show:it,hide:it,setEnabled:it,isEnabled:ze},this.mode=nj(c),r.dispatch("SetupEditor",{editor:this});const k=tk(c);Zt(k)&&k.call(c,c)}render(){pW(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return jm(this)}translate(n){return zo.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(_e(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:ze,default:o})),!c.isSet(n)&&!To(o)?o:c.get(n)}hasPlugin(n,o){return St(Ad(this),n)?o?gf.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Gu.show(n.getContainer()),Gu.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Gu.hide(n.getContainer()),Gu.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},l=Ab(r)?r.value:r.innerHTML,d=o.setContent(l,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),d}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let l=o.getContent(c);const d={...c,content:l};if(d.no_events||o.dispatch("SaveContent",d),d.format==="raw"&&o.dispatch("RawSaveContent",d),l=d.content,Ab(r))r.value=l;else{(n.is_removing||!o.inline)&&(r.innerHTML=l);const g=Gu.getParent(o.id,"form");g&&aj(g.elements,h=>h.name===o.id?(h.value=l,!1):!0)}return d.element=c.element=r=null,d.set_dirty!==!1&&o.setDirty(!1),l}setContent(n,o){return Id(this,n,o)}getContent(n){return mH(this,n)}insertContent(n,o){o&&(n=y_({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?Id(this,this.startContent,{format:"raw"}):Id(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||Gu.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Gu.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,l=c.options.get,d=UP(c);if(Zt(d))return d.call(c,n,r,!0,o);if(!l("convert_urls")||r==="link"||Ot(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const g=new yi(n);return g.protocol!=="http"&&g.protocol!=="https"&&g.protocol!==""?n:l("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,l("remove_script_host")),n)}addVisual(n){o_(this,n)}setEditableRoot(n){bW(this,n)}hasEditableRoot(){return oB(this)}remove(){pD(this)}destroy(n){bD(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Lf=wn.DOM,xC=Oe.each;let cj=!1,SC,na=[];const wC=e=>{const n=e.type;xC(Kd.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},C_=e=>{if(e!==cj){const n=wn.DOM;e?(n.bind(window,"resize",wC),n.bind(window,"scroll",wC)):(n.unbind(window,"resize",wC),n.unbind(window,"scroll",wC)),cj=e}},Hf=e=>{const n=na;return na=gt(na,o=>e!==o),Kd.activeEditor===e&&(Kd.activeEditor=na.length>0?na[0]:null),Kd.focusedEditor===e&&(Kd.focusedEditor=null),n.length!==na.length},TB=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Hf(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},ij=document.compatMode!=="CSS1Compat",Kd={...g_,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"9.0",releaseDate:"2025-05-15",i18n:zo,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=yi.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const l=document.getElementsByTagName("script");for(let d=0;d<l.length;d++){const g=l[d].src||"";if(g==="")continue;const h=g.substring(g.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(g)){h.indexOf(".min")!==-1&&(o=".min"),n=g.substring(0,g.lastIndexOf("/"));break}}if(!n&&document.currentScript){const d=document.currentScript.src;d.indexOf(".min")!==-1&&(o=".min"),n=d.substring(0,d.lastIndexOf("/"))}}e.baseURL=new yi(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new yi(e.baseURL),e.suffix=o,lI(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&Le(r,(c,l)=>{is.PluginManager.urls[l]=c})},init(e){const n=this;let o;const r=Oe.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(w,T)=>w.inline&&T.tagName.toLowerCase()in r,l=w=>{let T=w.id;return T||(T=zn(w,"name").filter(k=>!Lf.get(k)).getOrThunk(Lf.uniqueId),w.setAttribute("id",T)),T},d=w=>{const T=e[w];if(T)return T.apply(n,[])},g=w=>rn.browser.isIE()||rn.browser.isEdge()?(Y1("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):ij?(Y1("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ee(w.selector)?Lf.select(w.selector):_e(w.target)?[w.target]:[];let h=w=>{o=w};const y=()=>{let w=0;const T=[];let k;const M=(P,B,F)=>{const U=new CC(P,B,n);T.push(U),U.on("init",()=>{++w===k.length&&h(T)}),U.targetElm=U.targetElm||F,U.render()};Lf.unbind(window,"ready",y),d("onpageload"),k=Ni(g(e)),Oe.each(k,P=>{TB(n.get(P.id))}),k=Oe.grep(k,P=>!n.get(P.id)),k.length===0?h([]):xC(k,P=>{c(e,P)?Y1("Could not initialize inline editor on invalid inline target element",P):M(l(P),e,P)})};return Lf.bind(window,"ready",y),new Promise(w=>{o?w(o):h=T=>{w(T)}})},get(e){return arguments.length===0?na.slice(0):ee(e)?mo(na,n=>n.id===e).getOr(null):jo(e)&&na[e]?na[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&na.push(e),C_(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),SC||(SC=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",SC))),e},createEditor(e,n){return this.add(new CC(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=na.length-1;r>=0;r--)n.remove(na[r]);return}if(ee(e)){xC(Lf.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,Y(n.get(o.id))?null:(Hf(o)&&n.dispatch("RemoveEditor",{editor:o}),na.length===0&&window.removeEventListener("beforeunload",SC),o.remove(),C_(na.length>0),o)},execCommand(e,n,o){var r;const c=this,l=Ot(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(l)){const d=o.options;new CC(l,d,c).render()}return!0}case"mceRemoveEditor":{const d=c.get(l);return d&&d.remove(),!0}case"mceToggleEditor":{const d=c.get(l);return d?(d.isHidden()?d.show():d.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{xC(na,e=>{e.save()})},addI18n:(e,n)=>{zo.add(e,n)},translate:e=>zo.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new yi(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new yi(this.baseURL)}};Kd.setup();const lj=(()=>{const e=fr(),n=l=>({items:l,types:bs(l),getType:d=>zn(l,d).getOrUndefined()}),o=l=>{e.set(l)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),x_=Math.min,jh=Math.max,I0=Math.round,kB=(e,n,o)=>{let r=n.x,c=n.y;const l=e.w,d=e.h,g=n.w,h=n.h,y=(o||"").split("");return y[0]==="b"&&(c+=h),y[1]==="r"&&(r+=g),y[0]==="c"&&(c+=I0(h/2)),y[1]==="c"&&(r+=I0(g/2)),y[3]==="b"&&(c-=d),y[4]==="r"&&(r-=l),y[3]==="c"&&(c-=I0(d/2)),y[4]==="c"&&(r-=I0(l/2)),Gh(r,c,l,d)},uj=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const l=kB(e,n,r[c]);if(l.x>=o.x&&l.x+l.w<=o.w+o.x&&l.y>=o.y&&l.y+l.h<=o.h+o.y)return r[c]}return null},S_=(e,n,o)=>Gh(e.x-n,e.y-o,e.w+n*2,e.h+o*2),AB=(e,n)=>{const o=jh(e.x,n.x),r=jh(e.y,n.y),c=x_(e.x+e.w,n.x+n.w),l=x_(e.y+e.h,n.y+n.h);return c-o<0||l-r<0?null:Gh(o,r,c-o,l-r)},qG=(e,n,o)=>{let r=e.x,c=e.y,l=e.x+e.w,d=e.y+e.h;const g=n.x+n.w,h=n.y+n.h,y=jh(0,n.x-r),w=jh(0,n.y-c),T=jh(0,l-g),k=jh(0,d-h);return r+=y,c+=w,o&&(l+=y,d+=w,r-=T,c-=k),l-=T,d-=k,Gh(r,c,l-r,d-c)},Gh=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),mj={inflate:S_,relativePosition:kB,findBestRelativePosition:uj,intersect:AB,clamp:qG,create:Gh,fromClientRect:e=>Gh(e.left,e.top,e.width,e.height)},w_=(e,n,o=1e3)=>{let r=!1,c=null;const l=y=>(...w)=>{r||(r=!0,c!==null&&(window.clearTimeout(c),c=null),y.apply(null,w))},d=l(e),g=l(n);return{start:(...y)=>{!r&&c===null&&(c=window.setTimeout(()=>g.apply(null,y),o))},resolve:d,reject:g}},fj=(()=>{const e={},n={},o={};return{load:(h,y)=>{const w=`Script at URL "${y}" failed to load`,T=`Script at URL "${y}" did not call \`tinymce.Resource.add('${h}', data)\` within 1 second`;if(e[h]!==void 0)return e[h];{const k=new Promise((M,P)=>{const B=w_(M,P);n[h]=B.resolve,vu.ScriptLoader.loadScript(y).then(()=>B.start(T),()=>B.reject(w))});return e[h]=k,k}},add:(h,y)=>{n[h]!==void 0&&(n[h](y),delete n[h]),e[h]=Promise.resolve(y),o[h]=y},has:h=>h in o,get:h=>o[h],unload:h=>{delete e[h],delete o[h]}}})(),gj=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let qh;try{const e="__storage_test__";qh=window.localStorage,qh.setItem(e,e),qh.removeItem(e)}catch{qh=gj()}var EC=qh;const OB={geom:{Rect:mj},util:{Delay:Sc,Tools:Oe,VK:je,URI:yi,EventDispatcher:f_,Observable:g_,I18n:zo,LocalStorage:EC,ImageUploader:Z4},dom:{EventUtils:Zi,TreeWalker:Ds,TextSeeker:Dl,DOMUtils:wn,ScriptLoader:vu,RangeUtils:Wa,Serializer:uD,StyleSheetLoader:_m,ControlSelection:rA,BookmarkManager:d1,Selection:iD,Event:Zi.Event},html:{Styles:Al,Entities:Fn,Node:Fr,Schema:sr,DomParser:ff,Writer:YS,Serializer:Nu},Env:rn,AddOnManager:is,Annotator:Pv,Formatter:Nn,UndoManager:q4,EditorCommands:m_,WindowManager:q1,NotificationManager:ED,EditorObservable:yB,Shortcuts:v_,Editor:CC,FocusManager:xc,EditorManager:Kd,DOM:wn.DOM,ScriptLoader:vu.ScriptLoader,PluginManager:gf,ThemeManager:Ld,ModelManager:$d,IconManager:uh,Resource:fj,FakeClipboard:lj,trim:Oe.trim,isArray:Oe.isArray,is:Oe.is,toArray:Oe.toArray,makeMap:Oe.makeMap,each:Oe.each,map:Oe.map,grep:Oe.grep,inArray:Oe.inArray,extend:Oe.extend,walk:Oe.walk,resolve:Oe.resolve,explode:Oe.explode,_addCacheSuffix:Oe._addCacheSuffix},E_=Oe.extend(Kd,OB),hj=e=>{try{tp.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(E_),hj(E_)})()})(Vq);var CK=Vq.exports;const SK=yK(CK);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12.7 18.3a1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7 1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7v-1a1 1 0 0 0-.3-.7ZM11.3 5.7a1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3A1 1 0 0 0 13 5V4a1 1 0 0 0-.3-.7A1 1 0 0 0 12 3a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7Zm9.4 5.6a1 1 0 0 0-.7-.3h-1a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7Zm-15 1.4A1 1 0 0 0 6 12a1 1 0 0 0-.3-.7A1 1 0 0 0 5 11H4a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3Zm13 4.6-.7-.8a1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.8l.7.7a1 1 0 0 0 .7.3 1 1 0 0 0 .8-.3 1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7ZM5.3 6.7l.7.8a1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.8l-.7-.7A1 1 0 0 0 6 5a1 1 0 0 0-.8.3 1 1 0 0 0-.3.8 1 1 0 0 0 .3.6Zm12 1a1 1 0 0 0 .7-.2l.7-.7A1 1 0 0 0 19 6a1 1 0 0 0-.3-.8 1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3l-.7.7a1 1 0 0 0-.3.8 1 1 0 0 0 .3.7 1 1 0 0 0 .7.2ZM6.7 16.4a1 1 0 0 0-.8.2l-.7.7a1 1 0 0 0-.3.7 1 1 0 0 0 .3.8 1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3l.7-.7a1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3Z"/><path fill-rule="evenodd" d="M13.6 8.3A4 4 0 0 0 12 8a4 4 0 0 0-1.6.3A4 4 0 0 0 9 9.5a4 4 0 0 0-.6 1A4 4 0 0 0 8 12c0 .6.1 1 .3 1.6a4 4 0 0 0 2.1 2 4 4 0 0 0 1.6.4 4 4 0 0 0 1.6-.3 4 4 0 0 0 2-2.1A4 4 0 0 0 16 12a4 4 0 0 0-.3-1.6 4 4 0 0 0-2.1-2ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24" class="color-swatch-remove-color"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 0 1 19.4 9c.4 1 .6 2 .6 3.1s-.2 2.1-.6 3.1a8 8 0 0 1-1.7 2.6 8 8 0 0 1-2.6 1.7 7.8 7.8 0 0 1-3.1.6 7.8 7.8 0 0 1-3.1-.6 8 8 0 0 1-2.6-1.7A8 8 0 0 1 4.6 15 7.8 7.8 0 0 1 4 12c0-1.1.2-2.1.6-3.1a8 8 0 0 1 1.7-2.6A8 8 0 0 1 9 4.6 7.8 7.8 0 0 1 12 4Zm-6 8a6 6 0 0 0 1.8 4.2 6 6 0 0 0 1.9 1.3 5.8 5.8 0 0 0 2.3.5V6c-.8 0-1.6.2-2.3.5a6 6 0 0 0-2 1.3 6 6 0 0 0-1.2 1.9A5.8 5.8 0 0 0 6 12Z"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg height="24" width="24"><path d="M11.5 16.3a.7.7 0 1 0 1.4 0V14l2.7-6a.7.7 0 1 0-1.2-.6l-2.2 5-2.3-4.9C9.6 7 8.7 7 8 7.2v1.1c.8-.2.9 0 1.2 1l2.3 4.7z"/><path d="M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2h14v14H5z" fill-rule="evenodd"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg height="24" width="24"><path d="M5 4 3.6 5.4l3.9 4C6.6 10.7 6 12.3 6 14a6 6 0 0 0 10.3 4.2l1.9 1.8 1.4-1.4z" fill-rule="evenodd"/><path d="M13.4 8.4c.9 1 1.6 2.1 2 3.2l2.6 2.6V14c0-5-6-10-6-10s-1 .8-2.1 2l1.4 1.5.7-.7 1.4 1.6z"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg height="48" width="48"><path d="M8 14a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 34a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-default":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M12 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M16 31h6v6h-6z"/><path d="M16 31h6v6h-6z"/><path d="M18 12h22v4H18zm4 10h18v4H22zm4 10h14v4H26z" opacity=".2"/></svg>',"list-bull-disc":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-square":'<svg height="48" width="48"><path d="M8 21h6v6H8zm0 10h6v6H8zm0-20h6v6H8z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path fill-rule="evenodd" d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',"auto-image-enhancement":'<svg width="24" height="24"><path d="M7.7 10.6a5.8 5.8 0 0 0 5.7 5.7A5.8 5.8 0 0 0 7.7 22 5.8 5.8 0 0 0 2 16.3a5.8 5.8 0 0 0 5.7-5.7ZM15.5 2c.3 3 3.3 6 6.5 6.4-3.2.5-6.2 3.4-6.5 6.5-.3-3.4-3-6-6.4-6.5 3.3-.5 6.1-3 6.4-6.4Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><path d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.4 0H19v3.6zm-2.8 0h-2.2l8.6 8.6v-2.2zm-5 0H5l14 14v-2.6z" fill-rule="evenodd"/></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"photo-filter":'<svg height="24" width="24"><path d="M4.4 21c-.3 0-.6-.2-.9-.5-.3-.3-.4-.6-.5-.9L19.6 3c.3 0 .6.3.9.5l.5.9zM3 14.7v-2.8L11.9 3h2.8zM3 7V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h2zm14 14 4-4v2c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm-7.7 0L21 9.3v2.8L12 21z"/></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',vibrance:'<svg height="24" width="24"><path d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var tp=tinymce.util.Tools.resolve("tinymce.PluginManager");const Qd=(R,V,K)=>{var ge;return K(R,V.prototype)?!0:((ge=R.constructor)===null||ge===void 0?void 0:ge.name)===V.name},np=R=>{const V=typeof R;return R===null?"null":V==="object"&&Array.isArray(R)?"array":V==="object"&&Qd(R,String,(K,ge)=>ge.isPrototypeOf(K))?"string":V},Mi=R=>V=>np(V)===R,sl=R=>V=>typeof V===R,Ri=R=>V=>R===V,Ba=Mi("string"),hn=Mi("object"),ca=Mi("array"),jf=Ri(null),Ao=sl("boolean"),ia=R=>R==null,Zr=R=>!ia(R),Wr=sl("function"),Xl=(R,V)=>{if(ca(R)){for(let K=0,ge=R.length;K<ge;++K)if(!V(R[K]))return!1;return!0}return!1},Qn=()=>{},Ps=R=>()=>R,la=(R,V)=>R===V;class xt{constructor(V,K){this.tag=V,this.value=K}static some(V){return new xt(!0,V)}static none(){return xt.singletonNone}fold(V,K){return this.tag?K(this.value):V()}isSome(){return this.tag}isNone(){return!this.tag}map(V){return this.tag?xt.some(V(this.value)):xt.none()}bind(V){return this.tag?V(this.value):xt.none()}exists(V){return this.tag&&V(this.value)}forall(V){return!this.tag||V(this.value)}filter(V){return!this.tag||V(this.value)?this:xt.none()}getOr(V){return this.tag?this.value:V}or(V){return this.tag?this:V}getOrThunk(V){return this.tag?this.value:V()}orThunk(V){return this.tag?this:V()}getOrDie(V){if(this.tag)return this.value;throw new Error(V??"Called getOrDie on None")}static from(V){return Zr(V)?xt.some(V):xt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(V){this.tag&&V(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}xt.singletonNone=new xt(!1);const ee=Array.prototype.indexOf,Ot=Array.prototype.push,rl=(R,V)=>ee.call(R,V),Kn=(R,V)=>rl(R,V)>-1,Y=(R,V)=>{const K=R.length,ge=new Array(K);for(let De=0;De<K;De++){const We=R[De];ge[De]=V(We,De)}return ge},Lt=(R,V)=>{for(let K=0,ge=R.length;K<ge;K++){const De=R[K];V(De,K)}},To=(R,V,K)=>(Lt(R,(ge,De)=>{K=V(K,ge,De)}),K),vn=R=>{const V=[];for(let K=0,ge=R.length;K<ge;++K){if(!ca(R[K]))throw new Error("Arr.flatten item "+K+" was not an array, input: "+R);Ot.apply(V,R[K])}return V},_e=(R,V)=>vn(Y(R,V)),Zt=(R,V)=>{for(let K=0;K<R.length;K++){const ge=V(R[K],K);if(ge.isSome())return ge}return xt.none()},jo=Object.keys,pn=Object.hasOwnProperty,it=(R,V)=>{const K=jo(R);for(let ge=0,De=K.length;ge<De;ge++){const We=K[ge],Ht=R[We];V(Ht,We)}},x=R=>(V,K)=>{R[K]=V},Hc=(R,V,K,ge)=>{it(R,(De,We)=>{(V(De,We)?K:ge)(De,We)})},Ve=(R,V)=>{const K={};return Hc(R,V,x(K),Qn),K},Ts=(R,V)=>pn.call(R,V),Jl=(R,V)=>Ts(R,V)&&R[V]!==void 0&&R[V]!==null,qe=R=>{let V=R;return{get:()=>V,set:De=>{V=De}}},In=(R,V,K=la)=>R.exists(ge=>K(ge,V)),ks=R=>{const V=[],K=ge=>{V.push(ge)};for(let ge=0;ge<R.length;ge++)R[ge].each(K);return V},ua=(R,V)=>R?xt.some(V):xt.none(),al=R=>{const V=qe(xt.none()),K=()=>V.get().each(R);return{clear:()=>{K(),V.set(xt.none())},isSet:()=>V.get().isSome(),get:()=>V.get(),set:go=>{K(),V.set(xt.some(go))}}},Ce=()=>{const R=al(Qn);return{...R,on:K=>R.get().each(K)}},ze=(R,V)=>R.substring(V),D=(R,V,K)=>V===""||R.length>=V.length&&R.substr(K,K+V.length)===V,Ql=(R,V)=>Pn(R,V)?ze(R,V.length):R,Pn=(R,V)=>D(R,V,0),As=R=>V=>V.options.get(R),Fo=R=>{const V=R.options.register;V("link_assume_external_targets",{processor:K=>{const ge=Ba(K)||Ao(K);return ge?K===!0?{value:1,valid:ge}:K==="http"||K==="https"?{value:K,valid:ge}:{value:0,valid:ge}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),V("link_context_toolbar",{processor:"boolean",default:!1}),V("link_list",{processor:K=>Ba(K)||Wr(K)||Xl(K,hn)}),V("link_default_target",{processor:"string"}),V("link_default_protocol",{processor:"string",default:"https"}),V("link_target_list",{processor:K=>Ao(K)||Xl(K,hn),default:!0}),V("link_rel_list",{processor:"object[]",default:[]}),V("link_class_list",{processor:"object[]",default:[]}),V("link_title",{processor:"boolean",default:!0}),V("allow_unsafe_link_target",{processor:"boolean",default:!1}),V("link_quicklink",{processor:"boolean",default:!1}),V("link_attributes_postprocess",{processor:"function"})},Gf=As("link_assume_external_targets"),St=As("link_context_toolbar"),On=As("link_list"),wt=As("link_default_target"),de=As("link_default_protocol"),Vc=As("link_target_list"),da=As("link_rel_list"),gt=As("link_class_list"),cl=As("link_title"),hs=As("allow_unsafe_link_target"),em=As("link_quicklink"),mo=As("link_attributes_postprocess");var Gs=tinymce.util.Tools.resolve("tinymce.util.URI"),zc=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),qs=tinymce.util.Tools.resolve("tinymce.util.Tools");const Xt=R=>Zr(R)&&R.nodeName.toLowerCase()==="a",Yn=R=>Xt(R)&&!!Vn(R),eu=(R,V)=>{if(R.collapsed)return[];{const K=R.cloneContents(),ge=K.firstChild,De=new zc(ge,K),We=[];let Ht=ge;do V(Ht)&&We.push(Ht);while(Ht=De.next());return We}},Oo=R=>/^\w+:/i.test(R),Vn=R=>{var V,K;return(K=(V=R.getAttribute("data-mce-href"))!==null&&V!==void 0?V:R.getAttribute("href"))!==null&&K!==void 0?K:""},nc=(R,V)=>{const K=["noopener"],ge=R?R.split(/\s+/):[],De=Cn=>qs.trim(Cn.sort().join(" ")),We=Cn=>(Cn=Ht(Cn),Cn.length>0?Cn.concat(K):K),Ht=Cn=>Cn.filter(ho=>qs.inArray(K,ho)===-1),go=V?We(ge):Ht(ge);return go.length>0?De(go):""},$o=R=>R.replace(/\uFEFF/g,""),mr=(R,V)=>(V=V||Ni(R.selection.getRng())[0]||R.selection.getNode(),Ks(V)?xt.from(R.dom.select("a[href]",V)[0]):xt.from(R.dom.getParent(V,"a[href]"))),ps=(R,V)=>mr(R,V).isSome(),Uc=(R,V)=>{const K=V.fold(()=>R.getContent({format:"text"}),ge=>ge.innerText||ge.textContent||"");return $o(K)},Ni=R=>eu(R,Yn),bs=R=>qs.grep(R,Yn),Xu=R=>bs(R).length>0,Le=R=>Ni(R).length>0,Qt=R=>{const V=R.schema.getTextInlineElements(),K=We=>We.nodeType===1&&!Xt(We)&&!Ts(V,We.nodeName.toLowerCase());if(mr(R).exists(We=>We.hasAttribute("data-mce-block")))return!1;const De=R.selection.getRng();return De.collapsed?!0:eu(De,K).length===0},Ks=R=>Zr(R)&&R.nodeName==="FIGURE"&&/\bimage\b/i.test(R.className),Ju=R=>To(["title","rel","class","target"],(K,ge)=>(R[ge].each(De=>{K[ge]=De.length>0?De:null}),K),{href:R.href}),Nr=(R,V)=>(V==="http"||V==="https")&&!Oo(R)?V+"://"+R:R,tt=(R,V)=>{const K={...V};if(da(R).length===0&&!hs(R)){const ge=nc(K.rel,K.target==="_blank");K.rel=ge||null}return xt.from(K.target).isNone()&&Vc(R)===!1&&(K.target=wt(R)),K.href=Nr(K.href,Gf(R)),K},oc=(R,V,K,ge)=>{K.each(We=>{Ts(V,"innerText")?V.innerText=We:V.textContent=We}),R.dom.setAttribs(V,ge);const De=R.dom.createRng();De.setStartAfter(V),De.setEndAfter(V),R.selection.setRng(De)},tm=(R,V,K,ge)=>{const De=R.dom;Ks(V)?om(De,V,ge):K.fold(()=>{R.execCommand("mceInsertLink",!1,ge);const We=R.selection.getEnd(),Ht=De.createRng();Ht.setStartAfter(We),Ht.setEndAfter(We),R.selection.setRng(Ht)},We=>{R.insertContent(De.createHTML("a",ge,De.encode(We)))})},nm=(R,V,K)=>{const ge=R.selection.getNode(),De=mr(R,ge),We=tt(R,Ju(K)),Ht=mo(R);Zr(Ht)&&Ht(We),R.undoManager.transact(()=>{K.href===V.href&&V.attach(),De.fold(()=>{tm(R,ge,K.text,We)},go=>{R.focus(),oc(R,go,K.text,We)})})},zn=R=>{const V=R.dom,K=R.selection,ge=K.getBookmark(),De=K.getRng().cloneRange(),We=V.getParent(De.startContainer,"a[href]",R.getBody()),Ht=V.getParent(De.endContainer,"a[href]",R.getBody());We&&De.setStartBefore(We),Ht&&De.setEndAfter(Ht),K.setRng(De),R.execCommand("unlink"),K.moveToBookmark(ge)},bt=R=>{R.undoManager.transact(()=>{const V=R.selection.getNode();Ks(V)?fo(R,V):zn(R),R.focus()})},tu=R=>{const{class:V,href:K,rel:ge,target:De,text:We,title:Ht}=R;return Ve({class:V.getOrNull(),href:K,rel:ge.getOrNull(),target:De.getOrNull(),text:We.getOrNull(),title:Ht.getOrNull()},(go,Cn)=>jf(go)===!1)},V0=(R,V)=>{const K=R.options.get,ge={allow_html_data_urls:K("allow_html_data_urls"),allow_script_urls:K("allow_script_urls"),allow_svg_data_urls:K("allow_svg_data_urls")},De=V.href;return{...V,href:Gs.isDomSafe(De,"a",ge)?De:""}},So=(R,V,K)=>{const ge=V0(R,K);R.hasPlugin("rtc",!0)?R.execCommand("createlink",!1,tu(ge)):nm(R,V,ge)},Ys=R=>{R.hasPlugin("rtc",!0)?R.execCommand("unlink"):bt(R)},fo=(R,V)=>{var K;const ge=R.dom.select("img",V)[0];if(ge){const De=R.dom.getParents(ge,"a[href]",V)[0];De&&((K=De.parentNode)===null||K===void 0||K.insertBefore(ge,De),R.dom.remove(De))}},om=(R,V,K)=>{var ge;const De=R.select("img",V)[0];if(De){const We=R.create("a",K);(ge=De.parentNode)===null||ge===void 0||ge.insertBefore(We,De),We.appendChild(De)}},Nt=R=>Ba(R.value)?R.value:"",ma=R=>Ba(R.text)?R.text:Ba(R.title)?R.title:"",Is=(R,V)=>{const K=[];return qs.each(R,ge=>{const De=ma(ge);if(ge.menu!==void 0){const We=Is(ge.menu,V);K.push({text:De,items:We})}else{const We=V(ge);K.push({text:De,value:We})}}),K},sm=(R=Nt)=>V=>xt.from(V).map(K=>Is(K,R)),fa={sanitize:R=>sm(Nt)(R),sanitizeWith:sm,createUi:(R,V)=>K=>({name:R,type:"listbox",label:V,items:K}),getValue:Nt},Pa=R=>Jl(R,"items"),qf=(R,V)=>Zt(V,K=>Pa(K)?qf(R,K.items):ua(K.value===R,K)),nu=(R,V,K,ge)=>{const De=ge[V],We=R.length>0;return De!==void 0?qf(De,K).map(Ht=>({url:{value:Ht.value,meta:{text:We?R:Ht.text,attach:Qn}},text:We?R:Ht.text})):xt.none()},Bi=(R,V)=>V==="link"?R.link:V==="anchor"?R.anchor:xt.none(),Qu={init:(R,V)=>{const K={text:R.text,title:R.title},ge=Cn=>{var ho;return ua(K.title.length<=0,xt.from((ho=Cn.meta)===null||ho===void 0?void 0:ho.title).getOr(""))},De=Cn=>{var ho;return ua(K.text.length<=0,xt.from((ho=Cn.meta)===null||ho===void 0?void 0:ho.text).getOr(Cn.value))},We=Cn=>{const ho=De(Cn.url),co=ge(Cn.url);return ho.isSome()||co.isSome()?xt.some({...ho.map(sc=>({text:sc})).getOr({}),...co.map(sc=>({title:sc})).getOr({})}):xt.none()},Ht=(Cn,ho)=>{const co=Bi(V,ho).getOr([]);return nu(K.text,ho,co,Cn)};return{onChange:(Cn,ho)=>{const co=ho.name;return co==="url"?We(Cn()):Kn(["anchor","link"],co)?Ht(Cn(),co):((co==="text"||co==="title")&&(K[co]=Cn()[co]),xt.none())}}},getDelta:nu};var Zc=tinymce.util.Tools.resolve("tinymce.util.Delay");const Ie=(R,V,K)=>{const ge=R.selection.getRng();Zc.setEditorTimeout(R,()=>{R.windowManager.confirm(V,De=>{R.selection.setRng(ge),K(De)})})},op=R=>{const V=R.href;return V.indexOf("@")>0&&V.indexOf("/")===-1&&V.indexOf("mailto:")===-1?xt.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:ge=>({...ge,href:"mailto:"+V})}):xt.none()},os=(R,V)=>K=>{const ge=K.href;return R===1&&!Oo(ge)||R===0&&/^\s*www(\.|\d\.)/i.test(ge)?xt.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${V}:// prefix?`,preprocess:We=>({...We,href:V+"://"+ge})}):xt.none()},_n={preprocess:(R,V)=>Zt([op,os(Gf(R),de(R))],K=>K(V)).fold(()=>Promise.resolve(V),K=>new Promise(ge=>{Ie(R,K.message,De=>{ge(De?K.preprocess(V):V)})}))},jr={getAnchors:R=>{const V=R.dom.select("a:not([href])"),K=_e(V,ge=>{const De=ge.name||ge.id;return De?[{text:De,value:"#"+De}]:[]});return K.length>0?xt.some([{text:"None",value:""}].concat(K)):xt.none()}},Pi={getClasses:R=>{const V=gt(R);return V.length>0?fa.sanitize(V):xt.none()}},ap=R=>{try{return xt.some(JSON.parse(R))}catch{return xt.none()}},Yf={getLinks:R=>{const V=ge=>R.convertURL(ge.value||ge.url||"","href"),K=On(R);return new Promise(ge=>{Ba(K)?fetch(K).then(De=>De.ok?De.text().then(ap):Promise.reject()).then(ge,()=>ge(xt.none())):Wr(K)?K(De=>ge(xt.some(De))):ge(xt.from(K))}).then(ge=>ge.bind(fa.sanitizeWith(V)).map(De=>De.length>0?[{text:"None",value:""}].concat(De):De))}},gr={getRels:(R,V)=>{const K=da(R);if(K.length>0){const ge=In(V,"_blank"),De=hs(R)===!1,We=go=>nc(fa.getValue(go),ge);return(De?fa.sanitizeWith(We):fa.sanitize)(K)}return xt.none()}},ss=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],td={getTargets:R=>{const V=Vc(R);return ca(V)?fa.sanitize(V).orThunk(()=>xt.some(ss)):V===!1?xt.none():xt.some(ss)}},ou=(R,V,K)=>{const ge=R.getAttrib(V,K);return ge!==null&&ge.length>0?xt.some(ge):xt.none()},Wc=(R,V)=>{const K=R.dom,De=Qt(R)?xt.some(Uc(R.selection,V)):xt.none(),We=V.bind(co=>xt.from(K.getAttrib(co,"href"))),Ht=V.bind(co=>xt.from(K.getAttrib(co,"target"))),go=V.bind(co=>ou(K,co,"rel")),Cn=V.bind(co=>ou(K,co,"class")),ho=V.bind(co=>ou(K,co,"title"));return{url:We,text:De,title:ho,target:Ht,rel:go,linkClass:Cn}},Ii={collect:(R,V)=>Yf.getLinks(R).then(K=>{const ge=Wc(R,V);return{anchor:ge,catalogs:{targets:td.getTargets(R),rels:gr.getRels(R,ge.target),classes:Pi.getClasses(R),anchor:jr.getAnchors(R),link:K},optNode:V,flags:{titleEnabled:cl(R)}}})},tn=(R,V)=>K=>{const ge=K.getData();if(!ge.url.value){Ys(R),K.close();return}const De=go=>xt.from(ge[go]).filter(Cn=>!In(V.anchor[go],Cn)),We={href:ge.url.value,text:De("text"),target:De("target"),rel:De("rel"),class:De("linkClass"),title:De("title")},Ht={href:ge.url.value,attach:ge.url.meta!==void 0&&ge.url.meta.attach?ge.url.meta.attach:Qn};_n.preprocess(R,We).then(go=>{So(R,Ht,go)}),K.close()},il=R=>{const V=mr(R);return Ii.collect(R,V)},nd=(R,V)=>{const K=R.anchor,ge=K.url.getOr("");return{url:{value:ge,meta:{original:{value:ge}}},text:K.text.getOr(""),title:K.title.getOr(""),anchor:ge,link:ge,rel:K.rel.getOr(""),target:K.target.or(V).getOr(""),linkClass:K.linkClass.getOr("")}},Fi=(R,V,K)=>{const ge=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],De=R.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),We=R.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Ht=xt.from(wt(K)),go=nd(R,Ht),Cn=R.catalogs,ho=Qu.init(go,Cn);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:vn([ge,De,We,ks([Cn.anchor.map(fa.createUi("anchor","Anchors")),Cn.rels.map(fa.createUi("rel","Rel")),Cn.targets.map(fa.createUi("target","Open link in...")),Cn.link.map(fa.createUi("link","Link list")),Cn.classes.map(fa.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:go,onChange:(sc,{name:rc})=>{ho.onChange(sc.getData,{name:rc}).each(sd=>{sc.setData(sd)})},onSubmit:V}},hr=R=>{il(R).then(K=>{const ge=tn(R,K);return Fi(K,ge,R)}).then(K=>{R.windowManager.open(K)})},od=R=>{R.addCommand("mceLink",(V,K)=>{(K==null?void 0:K.dialog)===!0||!em(R)?hr(R):R.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},Xn=R=>{R.addShortcut("Meta+K","",()=>{R.execCommand("mceLink")})};var pr=tinymce.util.Tools.resolve("tinymce.util.VK");const Jn=(R,V)=>{document.body.appendChild(R),R.dispatchEvent(V),document.body.removeChild(R)},Xs=R=>{const V=document.createElement("a");V.target="_blank",V.href=R,V.rel="noreferrer noopener";const K=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(K),Jn(V,K)},rm=R=>R.altKey===!0&&R.shiftKey===!1&&R.ctrlKey===!1&&R.metaKey===!1,jc=(R,V)=>{if(V){const K=Vn(V);if(/^#/.test(K)){const ge=R.dom.select(`${K},[name="${Ql(K,"#")}"]`);ge.length&&R.selection.scrollIntoView(ge[0],!0)}else Xs(V.href)}},Gc=R=>{const V=R.selection.getRng(),K=V.startContainer;return Yn(K)&&V.startContainer===V.endContainer&&R.dom.select("img",K).length===1},su=(R,V)=>{const K=bs(R.dom.getParents(V));return ua(K.length===1,K[0])},cp=R=>{const V=Ni(R.selection.getRng());return ua(V.length>0,V[0]).or(su(R,R.selection.getNode()))},ga=R=>R.selection.isCollapsed()||Gc(R)?su(R,R.selection.getStart()):cp(R),ru=R=>{const V=Ce(),K=()=>V.get().or(ga(R)),ge=()=>K().each(De=>jc(R,De));return R.on("contextmenu",De=>{su(R,De.target).each(V.set)}),R.on("SelectionChange",()=>{V.isSet()||ga(R).each(V.set)}),R.on("click",De=>{V.clear();const We=bs(R.dom.getParents(De.target));We.length===1&&pr.metaKeyPressed(De)&&(De.preventDefault(),jc(R,We[0]))}),R.on("keydown",De=>{V.clear(),!De.isDefaultPrevented()&&De.keyCode===13&&rm(De)&&K().each(We=>{De.preventDefault(),jc(R,We)})}),{gotoSelectedLink:ge}},Js=R=>()=>{R.execCommand("mceLink",!1,{dialog:!0})},au=(R,V)=>(R.on("NodeChange",V),()=>R.off("NodeChange",V)),ll=R=>V=>{const K=()=>{V.setActive(!R.mode.isReadOnly()&&ps(R,R.selection.getNode())),V.setEnabled(R.selection.isEditable())};return K(),au(R,K)},Xf=R=>V=>{const K=()=>{V.setEnabled(R.selection.isEditable())};return K(),au(R,K)},Fs=R=>V=>{const K=We=>Xu(We)||Le(R.selection.getRng()),ge=R.dom.getParents(R.selection.getStart()),De=We=>{V.setEnabled(K(We)&&R.selection.isEditable())};return De(ge),au(R,We=>De(We.parents))},Jf=(R,V)=>{R.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:Js(R),onSetup:ll(R)}),R.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:V.gotoSelectedLink,onSetup:Fs(R)}),R.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Ys(R),onSetup:Fs(R)})},$i=(R,V)=>{R.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:V.gotoSelectedLink,onSetup:Fs(R)}),R.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Js(R),onSetup:Xf(R)}),R.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Ys(R),onSetup:Fs(R)})},W0=R=>{const V="link unlink openlink",K="link";R.ui.registry.addContextMenu("link",{update:ge=>R.dom.isEditable(ge)?Xu(R.dom.getParents(ge,"a"))?V:K:""})},Ne=(R,V)=>{const K=We=>{We.selection.collapse(!1)},ge=We=>{const Ht=R.selection.getNode();return We.setEnabled(ps(R,Ht)&&R.selection.isEditable()),Qn},De=We=>{const Ht=mr(R),go=Qt(R);if(Ht.isNone()&&go){const Cn=Uc(R.selection,Ht);return ua(Cn.length===0,We)}else return xt.none()};R.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:ll(R)},label:"Link",predicate:We=>St(R)&&ps(R,We),initValue:()=>mr(R).fold(Ps(""),Vn),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:We=>{const Ht=R.selection.getNode();return We.setActive(ps(R,Ht)),ll(R)(We)},onAction:We=>{const Ht=We.getValue(),go=De(Ht);So(R,{href:Ht,attach:Qn},{href:Ht,text:go,title:xt.none(),rel:xt.none(),target:xt.from(wt(R)),class:xt.none()}),K(R),We.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:ge,onAction:We=>{Ys(R),We.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:ge,onAction:We=>{V.gotoSelectedLink(),We.hide()}}]})},am=R=>{const V=ru(R);Jf(R,V),$i(R,V),W0(R),Ne(R,V)};var cm=()=>{tp.add("link",R=>{Fo(R),od(R),am(R),Xn(R)})};cm()})();(function(){var tp=tinymce.util.Tools.resolve("tinymce.PluginManager");const Qd=(v,E,O)=>{var $;return O(v,E.prototype)?!0:(($=v.constructor)===null||$===void 0?void 0:$.name)===E.name},np=v=>{const E=typeof v;return v===null?"null":E==="object"&&Array.isArray(v)?"array":E==="object"&&Qd(v,String,(O,$)=>$.isPrototypeOf(O))?"string":E},Mi=v=>E=>np(E)===v,sl=v=>E=>typeof E===v,Ri=Mi("string"),Ba=Mi("object"),hn=Mi("array"),ca=sl("boolean"),jf=v=>v==null,Ao=v=>!jf(v),ia=sl("function"),Zr=sl("number"),Wr=()=>{},Xl=(v,E)=>O=>v(E(O)),Qn=v=>()=>v,Ps=(v,E)=>v===E;function la(v,...E){return(...O)=>{const $=E.concat(O);return v.apply(null,$)}}const xt=v=>E=>!v(E),ee=Qn(!1);class Ot{constructor(E,O){this.tag=E,this.value=O}static some(E){return new Ot(!0,E)}static none(){return Ot.singletonNone}fold(E,O){return this.tag?O(this.value):E()}isSome(){return this.tag}isNone(){return!this.tag}map(E){return this.tag?Ot.some(E(this.value)):Ot.none()}bind(E){return this.tag?E(this.value):Ot.none()}exists(E){return this.tag&&E(this.value)}forall(E){return!this.tag||E(this.value)}filter(E){return!this.tag||E(this.value)?this:Ot.none()}getOr(E){return this.tag?this.value:E}or(E){return this.tag?this:E}getOrThunk(E){return this.tag?this.value:E()}orThunk(E){return this.tag?this:E()}getOrDie(E){if(this.tag)return this.value;throw new Error(E??"Called getOrDie on None")}static from(E){return Ao(E)?Ot.some(E):Ot.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(E){this.tag&&E(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ot.singletonNone=new Ot(!1);const rl=Array.prototype.slice,Kn=Array.prototype.indexOf,Y=Array.prototype.push,Lt=(v,E)=>Kn.call(v,E),To=(v,E)=>Lt(v,E)>-1,vn=(v,E)=>{for(let O=0,$=v.length;O<$;O++){const W=v[O];if(E(W,O))return!0}return!1},_e=(v,E)=>{const O=v.length,$=new Array(O);for(let W=0;W<O;W++){const xe=v[W];$[W]=E(xe,W)}return $},Zt=(v,E)=>{for(let O=0,$=v.length;O<$;O++){const W=v[O];E(W,O)}},jo=(v,E)=>{const O=[];for(let $=0,W=v.length;$<W;$++){const xe=v[$];E(xe,$)&&O.push(xe)}return O},pn=(v,E)=>{if(v.length===0)return[];{let O=E(v[0]);const $=[];let W=[];for(let xe=0,Me=v.length;xe<Me;xe++){const Mt=v[xe],Dt=E(Mt);Dt!==O&&($.push(W),W=[]),O=Dt,W.push(Mt)}return W.length!==0&&$.push(W),$}},it=(v,E,O)=>(Zt(v,($,W)=>{O=E(O,$,W)}),O),x=(v,E,O)=>{for(let $=0,W=v.length;$<W;$++){const xe=v[$];if(E(xe,$))return Ot.some(xe);if(O(xe,$))break}return Ot.none()},Hc=(v,E)=>x(v,E,ee),Ve=v=>{const E=[];for(let O=0,$=v.length;O<$;++O){if(!hn(v[O]))throw new Error("Arr.flatten item "+O+" was not an array, input: "+v);Y.apply(E,v[O])}return E},Ts=(v,E)=>Ve(_e(v,E)),Jl=v=>{const E=rl.call(v,0);return E.reverse(),E},qe=(v,E)=>E>=0&&E<v.length?Ot.some(v[E]):Ot.none(),In=v=>qe(v,0),ks=v=>qe(v,v.length-1),ua=(v,E)=>{const O=[],$=ia(E)?W=>vn(O,xe=>E(xe,W)):W=>To(O,W);for(let W=0,xe=v.length;W<xe;W++){const Me=v[W];$(Me)||O.push(Me)}return O},al=Object.keys,Ce=(v,E)=>{const O=al(v);for(let $=0,W=O.length;$<W;$++){const xe=O[$],Me=v[xe];E(Me,xe)}},ze=v=>(E,O)=>{v[O]=E},D=(v,E,O,$)=>{Ce(v,(W,xe)=>{(E(W,xe)?O:$)(W,xe)})},Ql=(v,E)=>{const O={};return D(v,E,ze(O),Wr),O},Pn=v=>{let E=v;return{get:()=>E,set:W=>{E=W}}},As=typeof window<"u"?window:Function("return this;")(),Fo=(v,E,O=Ps)=>v.exists($=>O($,E)),Gf=(v,E,O=Ps)=>St(v,E,O).getOr(v.isNone()&&E.isNone()),St=(v,E,O)=>v.isSome()&&E.isSome()?Ot.some(O(v.getOrDie(),E.getOrDie())):Ot.none(),On=(v,E)=>{let O=E??As;for(let $=0;$<v.length&&O!==void 0&&O!==null;++$)O=O[v[$]];return O},wt=(v,E)=>{const O=v.split(".");return On(O,E)},Vc=(v=>E=>E.replace(v,""))(/^\s+|\s+$/g),da=v=>v.length>0,gt=v=>!da(v),cl="\uFEFF",hs=v=>v===cl,em=(v,E)=>{const $=(E||document).createElement("div");if($.innerHTML=v,!$.hasChildNodes()||$.childNodes.length>1){const W="HTML does not have a single root node";throw console.error(W,v),new Error(W)}return zc($.childNodes[0])},mo=(v,E)=>{const $=(E||document).createElement(v);return zc($)},Gs=(v,E)=>{const $=(E||document).createTextNode(v);return zc($)},zc=v=>{if(v==null)throw new Error("Node cannot be null or undefined");return{dom:v}},Xt={fromHtml:em,fromTag:mo,fromText:Gs,fromDom:zc,fromPoint:(v,E,O)=>Ot.from(v.dom.elementFromPoint(E,O)).map(zc)},Yn=8,eu=11,Oo=1,Vn=3,nc=(v,E)=>{const O=v.dom;if(O.nodeType!==Oo)return!1;{const $=O;if($.matches!==void 0)return $.matches(E);if($.msMatchesSelector!==void 0)return $.msMatchesSelector(E);if($.webkitMatchesSelector!==void 0)return $.webkitMatchesSelector(E);if($.mozMatchesSelector!==void 0)return $.mozMatchesSelector(E);throw new Error("Browser lacks native selectors")}},$o=(v,E)=>v.dom===E.dom,mr=(v,E)=>{const O=v.dom,$=E.dom;return O===$?!1:O.contains($)},ps=nc,Uc=(v,E)=>wt(v,E),Ni=(v,E)=>{const O=Uc(v,E);if(O==null)throw new Error(v+" not available on this browser");return O},bs=Object.getPrototypeOf,Xu=v=>Ni("HTMLElement",v),Le=v=>{const E=wt("ownerDocument.defaultView",v);return Ba(v)&&(Xu(E).prototype.isPrototypeOf(v)||/^HTML\w*Element$/.test(bs(v).constructor.name))},Qt=v=>v.dom.nodeName.toLowerCase(),Ks=v=>v.dom.nodeType,Ju=v=>E=>Ks(E)===v,Nr=v=>Ks(v)===Yn||Qt(v)==="#comment",tt=v=>oc(v)&&Le(v.dom),oc=Ju(Oo),tm=Ju(Vn),nm=Ju(eu),zn=v=>E=>oc(E)&&Qt(E)===v,bt=v=>Ot.from(v.dom.parentNode).map(Xt.fromDom),tu=v=>Ot.from(v.dom.parentElement).map(Xt.fromDom),V0=v=>Ot.from(v.dom.nextSibling).map(Xt.fromDom),So=v=>_e(v.dom.childNodes,Xt.fromDom),Ys=(v,E)=>{const O=v.dom.childNodes;return Ot.from(O[E]).map(Xt.fromDom)},fo=v=>Ys(v,0),om=v=>Ys(v,v.dom.childNodes.length-1),Nt=v=>nm(v)&&Ao(v.dom.host),ma=v=>Xt.fromDom(v.dom.getRootNode()),Is=v=>{const E=ma(v);return Nt(E)?Ot.some(E):Ot.none()},sm=v=>Xt.fromDom(v.dom.host),z0=(v,E)=>{bt(v).each($=>{$.dom.insertBefore(E.dom,v.dom)})},U0=(v,E)=>{V0(v).fold(()=>{bt(v).each(W=>{Pa(W,E)})},$=>{z0($,E)})},fa=(v,E)=>{fo(v).fold(()=>{Pa(v,E)},$=>{v.dom.insertBefore(E.dom,$.dom)})},Pa=(v,E)=>{v.dom.appendChild(E.dom)},qf=(v,E)=>{Zt(E,O=>{z0(v,O)})},nu=(v,E)=>{Zt(E,O=>{Pa(v,O)})},Bi=(v,E,O)=>{if(Ri(O)||ca(O)||Zr(O))v.setAttribute(E,O+"");else throw console.error("Invalid call to Attribute.set. Key ",E,":: Value ",O,":: Element ",v),new Error("Attribute value was not simple")},vs=(v,E)=>{const O=v.dom;Ce(E,($,W)=>{Bi(O,W,$)})},Qu=v=>it(v.dom.attributes,(E,O)=>(E[O.name]=O.value,E),{}),Zc=v=>{v.dom.textContent="",Zt(So(v),E=>{Ie(E)})},Ie=v=>{const E=v.dom;E.parentNode!==null&&E.parentNode.removeChild(E)},op=(v,E)=>Xt.fromDom(v.dom.cloneNode(E)),os=v=>op(v,!0),sp=(v,E)=>{const O=Xt.fromTag(E),$=Qu(v);return vs(O,$),O},_n=(v,E)=>{const O=sp(v,E);U0(v,O);const $=So(v);return nu(O,$),Ie(v),O},Kf=v=>_e(v,Xt.fromDom),jr=v=>v.style!==void 0&&ia(v.style.getPropertyValue),rp=v=>{const E=tm(v)?v.dom.parentNode:v.dom;if(E==null||E.ownerDocument===null)return!1;const O=E.ownerDocument;return Is(Xt.fromDom(E)).fold(()=>O.body.contains(E),Xl(rp,sm))},Pi=(v,E,O)=>{if(!Ri(O))throw console.error("Invalid call to CSS.set. Property ",E,":: Value ",O,":: Element ",v),new Error("CSS value must be a string: "+O);jr(v)&&v.style.setProperty(E,O)},ap=(v,E,O)=>{const $=v.dom;Pi($,E,O)},fr=(v,E)=>{const $=document.createDocumentFragment();return Zt(v,W=>{$.appendChild(W.dom)}),Xt.fromDom($)};var Yf=(v,E,O,$,W)=>v(O,$)?Ot.some(O):ia(W)&&W(O)?Ot.none():E(O,$,W);const ed=(v,E,O)=>{let $=v.dom;const W=ia(O)?O:ee;for(;$.parentNode;){$=$.parentNode;const xe=Xt.fromDom($);if(E(xe))return Ot.some(xe);if(W(xe))break}return Ot.none()},gr=(v,E,O)=>Yf((W,xe)=>xe(W),ed,v,E,O),ss=(v,E,O)=>ed(v,$=>nc($,E),O),Lo=(v,E,O)=>Yf((W,xe)=>nc(W,xe),ss,v,E,O),td=v=>Lo(v,"[contenteditable]"),ou=(v,E=!1)=>rp(v)?v.dom.isContentEditable:td(v).fold(Qn(E),O=>Wc(O)==="true"),Wc=v=>v.dom.contentEditable,Z0=(v,E,O)=>ed(v,E,O).isSome(),Ii=(v,E)=>Z0(v,la($o,E));var tn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),il=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),nd=tinymce.util.Tools.resolve("tinymce.util.VK"),Fi=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),hr=tinymce.util.Tools.resolve("tinymce.util.Tools");const od=v=>E=>Ao(E)&&E.nodeName.toLowerCase()===v,Xn=v=>E=>Ao(E)&&v.test(E.nodeName),pr=v=>Ao(v)&&v.nodeType===3,Jn=v=>Ao(v)&&v.nodeType===1,Xs=Xn(/^(OL|UL|DL)$/),rm=Xn(/^(OL|UL)$/),jc=od("ol"),Gc=Xn(/^(LI|DT|DD)$/),su=Xn(/^(DT|DD)$/),cp=Xn(/^(TH|TD)$/),ga=od("br"),ru=v=>{var E;return((E=v.parentNode)===null||E===void 0?void 0:E.firstChild)===v},Js=(v,E)=>Ao(E)&&E.nodeName in v.schema.getTextBlockElements(),au=(v,E)=>Ao(v)&&v.nodeName in E,ll=(v,E)=>Ao(E)&&E.nodeName in v.schema.getVoidElements(),Xf=(v,E)=>ga(E)?v.isBlock(E.nextSibling)&&!ga(E.previousSibling):!1,Fs=(v,E,O)=>{const $=v.isEmpty(E);return O&&v.select("span[data-mce-type=bookmark]",E).length>0?!1:$},Jf=(v,E)=>v.isChildOf(E,v.getRoot()),$i=v=>E=>E.options.get(v),W0=v=>{const E=v.options.register;E("lists_indent_on_tab",{processor:"boolean",default:!0})},Ne=$i("lists_indent_on_tab"),am=$i("forced_root_block"),cm=$i("forced_root_block_attrs"),R=(v,E,O={})=>{const $=v.dom,W=v.schema.getBlockElements(),xe=$.createFragment(),Me=am(v),Mt=cm(v);let Dt,ut,jt=!1;for(ut=$.create(Me,{...Mt,...O.style?{style:O.style}:{}}),au(E.firstChild,W)||xe.appendChild(ut);Dt=E.firstChild;){const eo=Dt.nodeName;!jt&&(eo!=="SPAN"||Dt.getAttribute("data-mce-type")!=="bookmark")&&(jt=!0),au(Dt,W)?(xe.appendChild(Dt),ut=null):(ut||(ut=$.create(Me,Mt),xe.appendChild(ut)),ut.appendChild(Dt))}return!jt&&ut&&ut.appendChild($.create("br",{"data-mce-bogus":"1"})),xe},V=Fi.DOM,K=(v,E,O)=>{const $=ut=>{const jt=ut.parentNode;jt&&hr.each(W,eo=>{jt.insertBefore(eo,O.parentNode)}),V.remove(ut)},W=V.select('span[data-mce-type="bookmark"]',E),xe=R(v,O),Me=V.createRng();Me.setStartAfter(O),Me.setEndAfter(E);const Mt=Me.extractContents();for(let ut=Mt.firstChild;ut;ut=ut.firstChild)if(ut.nodeName==="LI"&&v.dom.isEmpty(ut)){V.remove(ut);break}v.dom.isEmpty(Mt)||V.insertAfter(Mt,E),V.insertAfter(xe,E);const Dt=O.parentElement;Dt&&Fs(v.dom,Dt)&&$(Dt),V.remove(O),Fs(v.dom,E)&&V.remove(E)},ge=zn("dd"),De=zn("dt"),We=(v,E)=>{ge(E)?_n(E,"dt"):De(E)&&tu(E).each(O=>K(v,O.dom,E.dom))},Ht=v=>{De(v)&&_n(v,"dd")},go=(v,E,O)=>{E==="Indent"?Zt(O,Ht):Zt(O,$=>We(v,$))},Cn=(v,E)=>{if(pr(v))return{container:v,offset:E};const O=tn.getNode(v,E);return pr(O)?{container:O,offset:E>=v.childNodes.length?O.data.length:0}:O.previousSibling&&pr(O.previousSibling)?{container:O.previousSibling,offset:O.previousSibling.data.length}:O.nextSibling&&pr(O.nextSibling)?{container:O.nextSibling,offset:0}:{container:v,offset:E}},ho=v=>{const E=v.cloneRange(),O=Cn(v.startContainer,v.startOffset);E.setStart(O.container,O.offset);const $=Cn(v.endContainer,v.endOffset);return E.setEnd($.container,$.offset),E},co=["OL","UL","DL"],sc=co.join(","),rc=(v,E)=>{const O=E||v.selection.getStart(!0);return v.dom.getParent(O,sc,rd(v,O))},sd=(v,E)=>Ao(v)&&E.length===1&&E[0]===v,j0=v=>jo(v.querySelectorAll(sc),Xs),cu=v=>{const E=rc(v),O=v.selection.getSelectedBlocks();return sd(E,O)?j0(E):jo(O,$=>Xs($)&&E!==$)},G0=(v,E)=>{const O=hr.map(E,$=>{const W=v.dom.getParent($,"li,dd,dt",rd(v,$));return W||$});return ua(O)},Qf=v=>{const E=v.selection.getSelectedBlocks();return jo(G0(v,E),Gc)},ip=v=>jo(Qf(v),su),xn=(v,E)=>{const O=v.dom.getParents(E,"TD,TH");return O.length>0?O[0]:v.getBody()},im=(v,E)=>!Xs(E)&&!Gc(E)&&vn(co,O=>v.isValidChild(E.nodeName,O)),rd=(v,E)=>{const O=v.dom.getParents(E,v.dom.isBlock),$=xe=>xe.nodeName.toLowerCase()!==am(v);return Hc(O,xe=>$(xe)&&im(v.schema,xe)).getOr(v.getBody())},q0=v=>bt(v).exists(E=>Gc(E.dom)&&fo(E).exists(O=>!Xs(O.dom))&&om(E).exists(O=>!Xs(O.dom))),lp=(v,E)=>{const O=v.dom.getParents(E,"ol,ul",rd(v,E));return ks(O)},K0=v=>{const E=lp(v,v.selection.getStart()),O=jo(v.selection.getSelectedBlocks(),rm);return E.toArray().concat(O)},up=v=>{const E=v.selection.getStart();return v.dom.getParents(E,"ol,ul",rd(v,E))},eg=v=>{const E=K0(v),O=up(v);return Hc(O,$=>q0(Xt.fromDom($))).fold(()=>lm(v,E),$=>[$])},lm=(v,E)=>{const O=_e(E,$=>lp(v,$).getOr($));return ua(O)},ad=v=>/\btox\-/.test(v.className),tg=(v,E)=>x(v,Xs,cp).exists(O=>O.nodeName===E&&!ad(O)),DC=(v,E)=>E!==null&&!v.dom.isEditable(E),MC=v=>{const E=rc(v);return DC(v,E)||!v.selection.isEditable()},ul=(v,E)=>{const O=v.dom.getParent(E,"ol,ul,dl");return DC(v,O)||!v.selection.isEditable()},qc=(v,E)=>{const O=v.selection.getNode();return E({parents:v.dom.getParents(O),element:O}),v.on("NodeChange",E),()=>v.off("NodeChange",E)},Qs=(v,E,O)=>v.dispatch("ListMutation",{action:E,element:O}),um=v=>ps(v,"OL,UL"),Y0=v=>ps(v,"LI"),dp=v=>fo(v).exists(um),X0=v=>om(v).exists(um),dl=v=>"listAttributes"in v,mp=v=>"isComment"in v,ng=v=>"isFragment"in v,Ia=v=>v.depth>0,Kc=v=>v.isSelected,ml=v=>{const E=So(v),O=X0(v)?E.slice(0,-1):E;return _e(O,os)},J0=(v,E,O)=>bt(v).filter(oc).map($=>({depth:E,dirty:!1,isSelected:O,content:ml(v),itemAttributes:Qu(v),listAttributes:Qu($),listType:Qt($),isInPreviousLi:!1})),rn=(v,E)=>{Pa(v.item,E.list)},Q0=v=>{for(let E=1;E<v.length;E++)rn(v[E-1],v[E])},fp=(v,E)=>{St(ks(v),In(E),rn)},eb=(v,E)=>{const O={list:Xt.fromTag(E,v),item:Xt.fromTag("li",v)};return Pa(O.list,O.item),O},tb=(v,E,O)=>{const $=[];for(let W=0;W<O;W++)$.push(eb(v,dl(E)?E.listType:E.parentListType));return $},nb=(v,E)=>{for(let O=0;O<v.length-1;O++)ap(v[O].item,"list-style-type","none");ks(v).each(O=>{dl(E)&&(vs(O.list,E.listAttributes),vs(O.item,E.itemAttributes)),nu(O.item,E.content)})},ob=(v,E)=>{Qt(v.list)!==E.listType&&(v.list=_n(v.list,E.listType)),vs(v.list,E.listAttributes)},gp=(v,E,O)=>{const $=Xt.fromTag("li",v);return vs($,E),nu($,O),$},B_=(v,E)=>{Pa(v.list,E),v.item=E},sb=(v,E,O)=>{const $=E.slice(0,O.depth);return ks($).each(W=>{if(dl(O)){const xe=gp(v,O.itemAttributes,O.content);B_(W,xe),ob(W,O)}else if(ng(O))nu(W.item,O.content);else{const xe=Xt.fromHtml(`<!--${O.content}-->`);Pa(W.list,xe)}}),$},RC=(v,E,O)=>{const $=tb(v,O,O.depth-E.length);return Q0($),nb($,O),fp(E,$),E.concat($)},Oe=(v,E)=>{let O=Ot.none();const $=it(E,(W,xe,Me)=>mp(xe)?Me===0?(O=Ot.some(xe),W):sb(v,W,xe):xe.depth>W.length?RC(v,W,xe):sb(v,W,xe),[]);return O.each(W=>{const xe=Xt.fromHtml(`<!--${W.content}-->`);In($).each(Me=>{fa(Me.list,xe)})}),In($).map(W=>W.list)},NC=(v,E)=>{switch(v){case"Indent":E.depth++;break;case"Outdent":E.depth--;break;case"Flatten":E.depth=0}E.dirty=!0},BC=(v,E)=>{dl(v)&&dl(E)&&(v.listType=E.listType,v.listAttributes={...E.listAttributes})},PC=v=>{v.listAttributes=Ql(v.listAttributes,(E,O)=>O!=="start")},Br=(v,E)=>{const O=v[E].depth,$=xe=>xe.depth===O&&!xe.dirty,W=xe=>xe.depth<O;return x(Jl(v.slice(0,E)),$,W).orThunk(()=>x(v.slice(E+1),$,W))},IC=v=>(Zt(v,(E,O)=>{Br(v,O).fold(()=>{E.dirty&&dl(E)&&PC(E)},$=>BC(E,$))}),v),z=(v,E,O,$)=>{var W;if(Nr($))return[{depth:v+1,content:(W=$.dom.nodeValue)!==null&&W!==void 0?W:"",dirty:!1,isSelected:!1,isComment:!0}];E.each(Mt=>{$o(Mt.start,$)&&O.set(!0)});const xe=J0($,v,O.get());E.each(Mt=>{$o(Mt.end,$)&&O.set(!1)});const Me=om($).filter(um).map(Mt=>og(v,E,O,Mt)).getOr([]);return xe.toArray().concat(Me)},FC=(v,E,O,$)=>fo($).filter(um).fold(()=>z(v,E,O,$),W=>{const xe=it(So($),(Me,Mt,Dt)=>{if(Dt===0)return Me;if(Y0(Mt))return Me.concat(z(v,E,O,Mt));{const ut={isFragment:!0,depth:v,content:[Mt],isSelected:!1,dirty:!1,parentListType:Qt(W)};return Me.concat(ut)}},[]);return og(v,E,O,W).concat(xe)}),og=(v,E,O,$)=>Ts(So($),W=>{const xe=um(W)?og:FC,Me=v+1;return xe(Me,E,O,W)}),rb=(v,E)=>{const O=Pn(!1),$=0;return _e(v,W=>({sourceList:W,entries:og($,E,O,W)}))},ac=(v,E)=>{const O=IC(E);return _e(O,$=>{const W=mp($)?fr([Xt.fromHtml(`<!--${$.content}-->`)]):fr($.content),xe=dl($)?$.itemAttributes:{};return Xt.fromDom(R(v,W.dom,xe))})},dm=(v,E)=>{const O=IC(E);return Oe(v.contentDocument,O).toArray()},mm=(v,E)=>Ts(pn(E,Ia),O=>In(O).exists(Ia)?dm(v,O):ac(v,O)),ab=(v,E)=>{Zt(jo(v,Kc),O=>NC(E,O))},Gr=v=>{const E=_e(Qf(v),Xt.fromDom);return St(Hc(E,xt(dp)),Hc(Jl(E),xt(dp)),(O,$)=>({start:O,end:$}))},iu=(v,E,O)=>{const $=rb(E,Gr(v));Zt($,W=>{ab(W.entries,O);const xe=mm(v,W.entries);Zt(xe,Me=>{Qs(v,O==="Indent"?"IndentList":"OutdentList",Me.dom)}),qf(W.sourceList,xe),Ie(W.sourceList)})},sg=(v,E)=>{const O=Kf(eg(v)),$=Kf(ip(v));let W=!1;if(O.length||$.length){const xe=v.selection.getBookmark();iu(v,O,E),go(v,E,$),v.selection.moveToBookmark(xe),v.selection.setRng(ho(v.selection.getRng())),v.nodeChanged(),W=!0}return W},rg=(v,E)=>!MC(v)&&sg(v,E),ag=v=>rg(v,"Indent"),er=v=>rg(v,"Outdent"),lu=v=>rg(v,"Flatten");var ha=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const cc=Fi.DOM,br=v=>{const E={},O=$=>{let W=v[$?"startContainer":"endContainer"],xe=v[$?"startOffset":"endOffset"];if(Jn(W)){const Me=cc.create("span",{"data-mce-type":"bookmark"});W.hasChildNodes()?(xe=Math.min(xe,W.childNodes.length-1),$?W.insertBefore(Me,W.childNodes[xe]):cc.insertAfter(Me,W.childNodes[xe])):W.appendChild(Me),W=Me,xe=0}E[$?"startContainer":"endContainer"]=W,E[$?"startOffset":"endOffset"]=xe};return O(!0),v.collapsed||O(),E},cd=v=>{const E=$=>{const W=Mt=>{var Dt;let ut=(Dt=Mt.parentNode)===null||Dt===void 0?void 0:Dt.firstChild,jt=0;for(;ut;){if(ut===Mt)return jt;(!Jn(ut)||ut.getAttribute("data-mce-type")!=="bookmark")&&jt++,ut=ut.nextSibling}return-1};let xe=v[$?"startContainer":"endContainer"],Me=v[$?"startOffset":"endOffset"];if(xe){if(Jn(xe)&&xe.parentNode){const Mt=xe;Me=W(xe),xe=xe.parentNode,cc.remove(Mt),!xe.hasChildNodes()&&cc.isBlock(xe)&&xe.appendChild(cc.create("br"))}v[$?"startContainer":"endContainer"]=xe,v[$?"startOffset":"endOffset"]=Me}};E(!0),E();const O=cc.createRng();return O.setStart(v.startContainer,v.startOffset),v.endContainer&&O.setEnd(v.endContainer,v.endOffset),ho(O)},Gt=v=>{switch(v){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},ic=(v,E,O)=>{const $=O["list-style-type"]?O["list-style-type"]:null;v.setStyle(E,"list-style-type",$)},cg=(v,E)=>{hr.each(E,(O,$)=>{v.setAttribute($,O)})},un=(v,E,O)=>{cg(E,O["list-attributes"]),hr.each(v.select("li",E),$=>{cg($,O["list-item-attributes"])})},tr=(v,E,O)=>{ic(v,E,O),un(v,E,O)},Yc=(v,E,O)=>{hr.each(O,$=>v.setStyle(E,$,""))},id=(v,E)=>Ao(E)&&!au(E,v.schema.getBlockElements()),fl=(v,E,O,$)=>{let W=E[O?"startContainer":"endContainer"];const xe=E[O?"startOffset":"endOffset"];Jn(W)&&(W=W.childNodes[Math.min(xe,W.childNodes.length-1)]||W),!O&&ga(W.nextSibling)&&(W=W.nextSibling);const Me=Dt=>{for(;!v.dom.isBlock(Dt)&&Dt.parentNode&&$!==Dt;)Dt=Dt.parentNode;return Dt},Mt=(Dt,ut)=>{var jt;const eo=new il(Dt,Me(Dt)),$a=ut?"next":"prev";let Ls;for(;Ls=eo[$a]();)if(!(ll(v,Ls)||hs(Ls.textContent)||((jt=Ls.textContent)===null||jt===void 0?void 0:jt.length)===0))return Ot.some(Ls);return Ot.none()};if(O&&pr(W))if(hs(W.textContent))W=Mt(W,!1).getOr(W);else for(W.parentNode!==null&&id(v,W.parentNode)&&(W=W.parentNode);W.previousSibling!==null&&(id(v,W.previousSibling)||pr(W.previousSibling));)W=W.previousSibling;if(!O&&pr(W))if(hs(W.textContent))W=Mt(W,!0).getOr(W);else for(W.parentNode!==null&&id(v,W.parentNode)&&(W=W.parentNode);W.nextSibling!==null&&(id(v,W.nextSibling)||pr(W.nextSibling));)W=W.nextSibling;for(;W.parentNode!==$;){const Dt=W.parentNode;if(Js(v,W)||/^(TD|TH)$/.test(Dt.nodeName))return W;W=Dt}return W},Pr=(v,E,O)=>{const $=[],W=v.dom,xe=fl(v,E,!0,O),Me=fl(v,E,!1,O);let Mt;const Dt=[];for(let ut=xe;ut&&(Dt.push(ut),ut!==Me);ut=ut.nextSibling);return hr.each(Dt,ut=>{var jt;if(Js(v,ut)){$.push(ut),Mt=null;return}if(W.isBlock(ut)||ga(ut)){ga(ut)&&W.remove(ut),Mt=null;return}const eo=ut.nextSibling;if(ha.isBookmarkNode(ut)&&(Xs(eo)||Js(v,eo)||!eo&&ut.parentNode===O)){Mt=null;return}Mt||(Mt=W.create("p"),(jt=ut.parentNode)===null||jt===void 0||jt.insertBefore(Mt,ut),$.push(Mt)),Mt.appendChild(ut)}),$},vr=(v,E,O)=>{const $=v.getStyle(E,"list-style-type");let W=O?O["list-style-type"]:"";return W=W===null?"":W,$===W},$C=(v,E)=>{const O=v.selection.getStart(!0),$=fl(v,E,!0,v.getBody());return Ii(Xt.fromDom($),Xt.fromDom(E.commonAncestorContainer))?E.commonAncestorContainer:O},fm=(v,E,O)=>{const $=v.selection.getRng();let W="LI";const xe=rd(v,$C(v,$)),Me=v.dom;if(Me.getContentEditable(v.selection.getNode())==="false")return;E=E.toUpperCase(),E==="DL"&&(W="DT");const Mt=br($),Dt=jo(Pr(v,$,xe),v.dom.isEditable);hr.each(Dt,ut=>{let jt;const eo=ut.previousSibling,$a=ut.parentNode;Gc($a)||(eo&&Xs(eo)&&eo.nodeName===E&&vr(Me,eo,O)?(jt=eo,ut=Me.rename(ut,W),eo.appendChild(ut)):(jt=Me.create(E),$a.insertBefore(jt,ut),jt.appendChild(ut),ut=Me.rename(ut,W)),Yc(Me,ut,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),tr(Me,jt,O),hl(v.dom,jt))}),v.selection.setRng(cd(Mt))},rs=(v,E)=>Xs(v)&&v.nodeName===(E==null?void 0:E.nodeName),uu=(v,E,O)=>{const $=v.getStyle(E,"list-style-type",!0),W=v.getStyle(O,"list-style-type",!0);return $===W},gl=(v,E)=>v.className===E.className,ig=(v,E,O)=>rs(E,O)&&uu(v,E,O)&&gl(E,O),hl=(v,E)=>{let O,$=E.nextSibling;if(ig(v,E,$)){const W=$;for(;O=W.firstChild;)E.appendChild(O);v.remove(W)}if($=E.previousSibling,ig(v,E,$)){const W=$;for(;O=W.lastChild;)E.insertBefore(O,E.firstChild);v.remove(W)}},Xc=(v,E,O,$)=>{if(E.nodeName!==O){const W=v.dom.rename(E,O);tr(v.dom,W,$),Qs(v,Gt(O),W)}else tr(v.dom,E,$),Qs(v,Gt(O),E)},gm=(v,E,O,$)=>{if(E.classList.forEach((W,xe,Me)=>{W.startsWith("tox-")&&(Me.remove(W),Me.length===0&&E.removeAttribute("class"))}),E.nodeName!==O){const W=v.dom.rename(E,O);tr(v.dom,W,$),Qs(v,Gt(O),W)}else tr(v.dom,E,$),Qs(v,Gt(O),E)},cb=(v,E,O,$,W)=>{const xe=Xs(E);if(xe&&E.nodeName===$&&!hp(W)&&!ad(E))lu(v);else{fm(v,$,W);const Me=br(v.selection.getRng()),Mt=xe?[E,...O]:O,Dt=xe&&ad(E)?gm:Xc;hr.each(Mt,ut=>{Dt(v,ut,$,W)}),v.selection.setRng(cd(Me))}},hp=v=>"list-style-type"in v,pl=(v,E,O,$)=>{if(E!==v.getBody())if(E)if(E.nodeName===O&&!hp($)&&!ad(E))lu(v);else{const W=br(v.selection.getRng());ad(E)&&E.classList.forEach((Me,Mt,Dt)=>{Me.startsWith("tox-")&&(Dt.remove(Me),Dt.length===0&&E.removeAttribute("class"))}),tr(v.dom,E,$);const xe=v.dom.rename(E,O);hl(v.dom,xe),v.selection.setRng(cd(W)),fm(v,O,$),Qs(v,Gt(O),xe)}else fm(v,O,$),Qs(v,Gt(O),E)},bl=(v,E,O)=>{const $=rc(v);if(ul(v,$))return;const W=cu(v),xe=Ba(O)?O:{};W.length>0?cb(v,$,W,E,xe):pl(v,$,E,xe)},pp=Fi.DOM,ib=(v,E)=>{const O=E.parentElement;if(O&&O.nodeName==="LI"&&O.firstChild===E){const $=O.previousSibling;$&&$.nodeName==="LI"?($.appendChild(E),Fs(v,O)&&pp.remove(O)):pp.setStyle(O,"listStyleType","none")}if(Xs(O)){const $=O.previousSibling;$&&$.nodeName==="LI"&&$.appendChild(E)}},Os=(v,E)=>{const O=hr.grep(v.select("ol,ul",E));hr.each(O,$=>{ib(v,$)})},vl=(v,E,O,$)=>{let W=E.startContainer;const xe=E.startOffset;if(pr(W)&&(O?xe<W.data.length:xe>0))return W;const Me=v.schema.getNonEmptyElements();Jn(W)&&(W=tn.getNode(W,xe));const Mt=new il(W,$);O&&Xf(v.dom,W)&&Mt.next();const Dt=O?Mt.next.bind(Mt):Mt.prev2.bind(Mt);for(;W=Dt();)if(W.nodeName==="LI"&&!W.hasChildNodes()||Me[W.nodeName]||pr(W)&&W.data.length>0)return W;return null},ys=(v,E)=>{const O=E.childNodes;return O.length===1&&!Xs(O[0])&&v.isBlock(O[0])},hm=v=>Ot.from(v).map(Xt.fromDom).filter(tt).exists(E=>ou(E)&&!To(["details"],Qt(E))),lg=(v,E)=>{ys(v,E)&&hm(E.firstChild)&&v.remove(E.firstChild,!0)},ug=(v,E,O)=>{let $;const W=ys(v,O)?O.firstChild:O;if(lg(v,E),!Fs(v,E,!0))for(;$=E.firstChild;)W.appendChild($)},Do=(v,E,O)=>{let $;const W=E.parentNode;if(!Jf(v,E)||!Jf(v,O))return;Xs(O.lastChild)&&($=O.lastChild),W===O.lastChild&&ga(W.previousSibling)&&v.remove(W.previousSibling);const xe=O.lastChild;xe&&ga(xe)&&E.hasChildNodes()&&v.remove(xe),Fs(v,O,!0)&&Zc(Xt.fromDom(O)),ug(v,E,O),$&&O.appendChild($);const Mt=mr(Xt.fromDom(O),Xt.fromDom(E))?v.getParents(E,Xs,O):[];v.remove(E),Zt(Mt,Dt=>{Fs(v,Dt)&&Dt!==v.getRoot()&&v.remove(Dt)})},lc=(v,E,O)=>{Zc(Xt.fromDom(O)),Do(v.dom,E,O),v.selection.setCursorLocation(O,0)},yl=(v,E,O,$)=>{const W=v.dom;if(W.isEmpty($))lc(v,O,$);else{const xe=br(E);Do(W,O,$),v.selection.setRng(cd(xe))}},Jc=(v,E,O,$)=>{const W=br(E);Do(v.dom,O,$);const xe=cd(W);v.selection.setRng(xe)},$s=(v,E)=>{const O=v.dom,$=v.selection,W=$.getStart(),xe=xn(v,W),Me=O.getParent($.getStart(),"LI",xe);if(Me){const Mt=Me.parentElement;if(Mt===v.getBody()&&Fs(O,Mt))return!0;const Dt=ho($.getRng()),ut=O.getParent(vl(v,Dt,E,xe),"LI",xe),jt=ut&&(E?O.isChildOf(Me,ut):O.isChildOf(ut,Me));if(ut&&ut!==Me&&!jt)return v.undoManager.transact(()=>{E?yl(v,Dt,ut,Me):ru(Me)?er(v):Jc(v,Dt,Me,ut)}),!0;if(jt&&!E&&ut!==Me){const eo=Dt.commonAncestorContainer.parentElement;return!eo||O.isChildOf(ut,eo)?!1:(v.undoManager.transact(()=>{const $a=br(Dt);ug(O,eo,ut),eo.remove();const Ls=cd($a);v.selection.setRng(Ls)}),!0)}else if(!ut&&!E&&Dt.startOffset===0&&Dt.endOffset===0)return v.undoManager.transact(()=>{lu(v)}),!0}return!1},pm=(v,E,O)=>{const $=v.getParent(E.parentNode,v.isBlock,O);v.remove(E),$&&v.isEmpty($)&&v.remove($)},lb=(v,E)=>{const O=v.dom,$=v.selection.getStart(),W=xn(v,$),xe=O.getParent($,O.isBlock,W);if(xe&&O.isEmpty(xe,void 0,{checkRootAsContent:!0})){const Me=ho(v.selection.getRng()),Mt=vl(v,Me,E,W),Dt=O.getParent(Mt,"LI",W);if(Mt&&Dt){const ut=Ls=>To(["td","th","caption"],Qt(Ls)),jt=Ls=>Ls.dom===W,eo=gr(Xt.fromDom(Dt),ut,jt),$a=gr(Xt.fromDom(Me.startContainer),ut,jt);return Gf(eo,$a,$o)?(v.undoManager.transact(()=>{const Ls=Dt.parentNode;pm(O,xe,W),hl(O,Ls),v.selection.select(Mt,!0),v.selection.collapse(E)}),!0):!1}}return!1},LC=(v,E)=>$s(v,E)||lb(v,E),qr=v=>{const E=v.selection.getStart(),O=xn(v,E);return v.dom.getParent(E,"LI,DT,DD",O)||Qf(v).length>0},HC=v=>qr(v)?(v.undoManager.transact(()=>{let E=!0;const O=()=>E=!1;v.on("input",O),v.execCommand("Delete"),v.off("input",O),E&&v.dispatch("input"),Os(v.dom,v.getBody())}),!0):!1,dg=(v,E)=>{const O=v.selection;return!ul(v,O.getNode())&&(O.isCollapsed()?LC(v,E):HC(v))},ub=v=>{v.on("ExecCommand",E=>{const O=E.command.toLowerCase();(O==="delete"||O==="forwarddelete")&&qr(v)&&Os(v.dom,v.getBody())}),v.on("keydown",E=>{E.keyCode===nd.BACKSPACE?dg(v,!1)&&E.preventDefault():E.keyCode===nd.DELETE&&dg(v,!0)&&E.preventDefault()})},vt=v=>({backspaceDelete:E=>{dg(v,E)}}),db=(v,E)=>{const O=rc(v);O===null||ul(v,O)||v.undoManager.transact(()=>{Ba(E.styles)&&v.dom.setStyles(O,E.styles),Ba(E.attrs)&&Ce(E.attrs,($,W)=>v.dom.setAttrib(O,W,$))})},Go=v=>{const E=Jl(Vc(v).split("")),O=_e(E,($,W)=>{const xe=$.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,W)*xe});return it(O,($,W)=>$+W,0)},qo=v=>{if(v--,v<0)return"";{const E=v%26,O=Math.floor(v/26),$=qo(O),W=String.fromCharCode(65+E);return $+W}},bp=v=>/^[A-Z]+$/.test(v),oo=v=>/^[a-z]+$/.test(v),mb=v=>/^[0-9]+$/.test(v),bm=v=>mb(v)?2:bp(v)?0:oo(v)?1:gt(v)?3:4,Qc=v=>{switch(bm(v)){case 2:return Ot.some({listStyleType:Ot.none(),start:v});case 0:return Ot.some({listStyleType:Ot.some("upper-alpha"),start:Go(v).toString()});case 1:return Ot.some({listStyleType:Ot.some("lower-alpha"),start:Go(v).toString()});case 3:return Ot.some({listStyleType:Ot.none(),start:""});case 4:return Ot.none()}},yr=v=>{const E=parseInt(v.start,10);return Fo(v.listStyleType,"upper-alpha")?qo(E):Fo(v.listStyleType,"lower-alpha")?qo(E).toLowerCase():v.start},Li=v=>{const E=rc(v);!jc(E)||ul(v,E)||v.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:yr({start:v.dom.getAttrib(E,"start","1"),listStyleType:Ot.from(v.dom.getStyle(E,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:O=>{const $=O.getData();Qc($.start).each(W=>{v.execCommand("mceListUpdate",!1,{attrs:{start:W.start==="1"?"":W.start},styles:{"list-style-type":W.listStyleType.getOr("")}})}),O.close()}})},vm=(v,E)=>()=>{const O=rc(v);return Ao(O)&&O.nodeName===E},Mo=v=>{v.addCommand("mceListProps",()=>{Li(v)})},mg=v=>{v.on("BeforeExecCommand",E=>{const O=E.command.toLowerCase();O==="indent"?ag(v):O==="outdent"&&er(v)}),v.addCommand("InsertUnorderedList",(E,O)=>{bl(v,"UL",O)}),v.addCommand("InsertOrderedList",(E,O)=>{bl(v,"OL",O)}),v.addCommand("InsertDefinitionList",(E,O)=>{bl(v,"DL",O)}),v.addCommand("RemoveList",()=>{lu(v)}),Mo(v),v.addCommand("mceListUpdate",(E,O)=>{Ba(O)&&db(v,O)}),v.addQueryStateHandler("InsertUnorderedList",vm(v,"UL")),v.addQueryStateHandler("InsertOrderedList",vm(v,"OL")),v.addQueryStateHandler("InsertDefinitionList",vm(v,"DL"))};var ld=tinymce.util.Tools.resolve("tinymce.html.Node");const Cl=v=>v.type===3,vp=v=>v.length===0,as=v=>{const E=(W,xe)=>{const Me=ld.create("li");Zt(W,Mt=>Me.append(Mt)),xe?v.insert(Me,xe,!0):v.append(Me)},O=(W,xe)=>Cl(xe)?[...W,xe]:!vp(W)&&!Cl(xe)?(E(W,xe),[]):W,$=it(v.children(),O,[]);vp($)||E($)},pa=v=>{v.on("PreInit",()=>{const{parser:E}=v;E.addNodeFilter("ul,ol",O=>Zt(O,as))})},wo=v=>{v.on("keydown",E=>{E.keyCode!==nd.TAB||nd.metaKeyPressed(E)||v.undoManager.transact(()=>{(E.shiftKey?er(v):ag(v))&&E.preventDefault()})})},Cr=v=>{Ne(v)&&wo(v),ub(v)},ud=(v,E)=>O=>{const $=W=>{O.setActive(tg(W.parents,E)),O.setEnabled(!ul(v,W.element)&&v.selection.isEditable())};return O.setEnabled(v.selection.isEditable()),qc(v,$)},Ko=v=>{const E=O=>()=>v.execCommand(O);v.hasPlugin("advlist")||(v.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:E("InsertOrderedList"),onSetup:ud(v,"OL")}),v.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:E("InsertUnorderedList"),onSetup:ud(v,"UL")}))},fb=(v,E)=>O=>qc(v,W=>O.setEnabled(tg(W.parents,E)&&!ul(v,W.element))),_t=v=>{const E={text:"List properties...",icon:"ordered-list",onAction:()=>v.execCommand("mceListProps"),onSetup:fb(v,"OL")};v.ui.registry.addMenuItem("listprops",E),v.ui.registry.addContextMenu("lists",{update:O=>{const $=rc(v,O);return jc($)?["listprops"]:[]}})};var Fa=()=>{tp.add("lists",v=>(W0(v),pa(v),v.hasPlugin("rtc",!0)?Mo(v):(Cr(v),mg(v)),Ko(v),_t(v),vt(v)))};Fa()})();(function(){const tp=Object.getPrototypeOf,Qd=(t,s,a)=>{var i;return a(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},np=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&Qd(t,String,(a,i)=>i.isPrototypeOf(a))?"string":s},Mi=t=>s=>np(s)===t,sl=t=>s=>typeof s===t,Ri=t=>s=>t===s,Ba=(t,s)=>ca(t)&&Qd(t,s,(a,i)=>tp(a)===i),hn=Mi("string"),ca=Mi("object"),jf=t=>Ba(t,Object),Ao=Mi("array"),ia=Ri(null),Zr=sl("boolean"),Wr=Ri(void 0),Xl=t=>t==null,Qn=t=>!Xl(t),Ps=sl("function"),la=sl("number"),xt=(t,s)=>{if(Ao(t)){for(let a=0,i=t.length;a<i;++a)if(!s(t[a]))return!1;return!0}return!1},ee=()=>{},Ot=t=>()=>t(),rl=(t,s)=>(...a)=>t(s.apply(null,a)),Kn=(t,s)=>a=>t(s(a)),Y=t=>()=>t,Lt=t=>t,To=(t,s)=>t===s;function vn(t,...s){return(...a)=>{const i=s.concat(a);return t.apply(null,i)}}const _e=t=>s=>!t(s),Zt=t=>()=>{throw new Error(t)},jo=t=>t(),pn=Y(!1),it=Y(!0);class x{constructor(s,a){this.tag=s,this.value=a}static some(s){return new x(!0,s)}static none(){return x.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?x.some(s(this.value)):x.none()}bind(s){return this.tag?s(this.value):x.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:x.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return Qn(s)?x.some(s):x.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}x.singletonNone=new x(!1);const Hc=Array.prototype.slice,Ve=Array.prototype.indexOf,Ts=Array.prototype.push,Jl=(t,s)=>Ve.call(t,s),qe=(t,s)=>{const a=Jl(t,s);return a===-1?x.none():x.some(a)},In=(t,s)=>Jl(t,s)>-1,ks=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const u=t[a];if(s(u,a))return!0}return!1},ua=(t,s)=>{const a=[];for(let i=0;i<t;i++)a.push(s(i));return a},al=(t,s)=>{const a=[];for(let i=0;i<t.length;i+=s){const u=Hc.call(t,i,i+s);a.push(u)}return a},Ce=(t,s)=>{const a=t.length,i=new Array(a);for(let u=0;u<a;u++){const m=t[u];i[u]=s(m,u)}return i},ze=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const u=t[a];s(u,a)}},D=(t,s)=>{for(let a=t.length-1;a>=0;a--){const i=t[a];s(i,a)}},Ql=(t,s)=>{const a=[],i=[];for(let u=0,m=t.length;u<m;u++){const f=t[u];(s(f,u)?a:i).push(f)}return{pass:a,fail:i}},Pn=(t,s)=>{const a=[];for(let i=0,u=t.length;i<u;i++){const m=t[i];s(m,i)&&a.push(m)}return a},As=(t,s,a)=>(D(t,(i,u)=>{a=s(a,i,u)}),a),Fo=(t,s,a)=>(ze(t,(i,u)=>{a=s(a,i,u)}),a),Gf=(t,s,a)=>{for(let i=0,u=t.length;i<u;i++){const m=t[i];if(s(m,i))return x.some(m);if(a(m,i))break}return x.none()},St=(t,s)=>Gf(t,s,pn),On=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const u=t[a];if(s(u,a))return x.some(a)}return x.none()},wt=t=>{const s=[];for(let a=0,i=t.length;a<i;++a){if(!Ao(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Ts.apply(s,t[a])}return s},de=(t,s)=>wt(Ce(t,s)),Vc=(t,s)=>{for(let a=0,i=t.length;a<i;++a){const u=t[a];if(s(u,a)!==!0)return!1}return!0},da=t=>{const s=Hc.call(t,0);return s.reverse(),s},gt=(t,s)=>Pn(t,a=>!In(s,a)),cl=(t,s)=>{const a={};for(let i=0,u=t.length;i<u;i++){const m=t[i];a[String(m)]=s(m,i)}return a},hs=t=>[t],em=(t,s)=>{const a=Hc.call(t,0);return a.sort(s),a},mo=(t,s)=>s>=0&&s<t.length?x.some(t[s]):x.none(),Gs=t=>mo(t,0),zc=t=>mo(t,t.length-1),qs=Ps(Array.from)?Array.from:t=>Hc.call(t),Xt=(t,s)=>{for(let a=0;a<t.length;a++){const i=s(t[a],a);if(i.isSome())return i}return x.none()},Yn=Object.keys,eu=Object.hasOwnProperty,Oo=(t,s)=>{const a=Yn(t);for(let i=0,u=a.length;i<u;i++){const m=a[i],f=t[m];s(f,m)}},Vn=(t,s)=>nc(t,(a,i)=>({k:i,v:s(a,i)})),nc=(t,s)=>{const a={};return Oo(t,(i,u)=>{const m=s(i,u);a[m.k]=m.v}),a},$o=t=>(s,a)=>{t[a]=s},mr=(t,s,a,i)=>{Oo(t,(u,m)=>{(s(u,m)?a:i)(u,m)})},ps=(t,s)=>{const a={},i={};return mr(t,s,$o(a),$o(i)),{t:a,f:i}},Uc=(t,s)=>{const a={};return mr(t,s,$o(a),ee),a},Ni=(t,s)=>{const a=[];return Oo(t,(i,u)=>{a.push(s(i,u))}),a},bs=(t,s)=>{const a=Yn(t);for(let i=0,u=a.length;i<u;i++){const m=a[i],f=t[m];if(s(f,m,t))return x.some(f)}return x.none()},Xu=t=>Ni(t,Lt),Le=(t,s)=>Qt(t,s)?x.from(t[s]):x.none(),Qt=(t,s)=>eu.call(t,s),Ks=(t,s)=>Qt(t,s)&&t[s]!==void 0&&t[s]!==null,Nr={generate:t=>{if(!Ao(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return ze(t,(i,u)=>{const m=Yn(i);if(m.length!==1)throw new Error("one and only one name per case");const f=m[0],p=i[f];if(a[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ao(p))throw new Error("case arguments must be an array");s.push(f),a[f]=(...b)=>{const C=b.length;if(C!==p.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+p.length+" ("+p+"), got "+C);return{fold:(..._)=>{if(_.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+_.length);return _[u].apply(null,b)},match:_=>{const A=Yn(_);if(s.length!==A.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+A.join(","));if(!Vc(s,I=>In(A,I)))throw new Error("Not all branches were specified when using match. Specified: "+A.join(", ")+`
Required: `+s.join(", "));return _[f].apply(null,b)},log:_=>{console.log(_,{constructors:s,constructor:f,params:b})}}}}),a}},tt=t=>{let s=t;return{get:()=>s,set:u=>{s=u}}},oc=t=>{let s=x.none(),a=[];const i=C=>oc(S=>{u(_=>{S(C(_))})}),u=C=>{f()?b(C):a.push(C)},m=C=>{f()||(s=x.some(C),p(a),a=[])},f=()=>s.isSome(),p=C=>{ze(C,b)},b=C=>{s.each(S=>{setTimeout(()=>{C(S)},0)})};return t(m),{get:u,map:i,isReady:f}},nm={nu:oc,pure:t=>oc(s=>{s(t)})},zn=t=>{setTimeout(()=>{throw t},0)},bt=t=>{const s=b=>{t().then(b,zn)};return{map:b=>bt(()=>t().then(b)),bind:b=>bt(()=>t().then(C=>b(C).toPromise())),anonBind:b=>bt(()=>t().then(()=>b.toPromise())),toLazy:()=>nm.nu(s),toCached:()=>{let b=null;return bt(()=>(b===null&&(b=t()),b))},toPromise:t,get:s}},So={nu:t=>bt(()=>new Promise(t)),pure:t=>bt(()=>Promise.resolve(t))},Ys=t=>{const s=m=>m(t),a=Y(t),i=()=>u,u={tag:!0,inner:t,fold:(m,f)=>f(t),isValue:it,isError:pn,map:m=>Nt.value(m(t)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:m=>{m(t)},toOptional:()=>x.some(t)};return u},fo=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(i,u)=>i(t),isValue:pn,isError:it,map:s,mapError:i=>Nt.error(i(t)),bind:s,exists:pn,forall:it,getOr:Lt,or:Lt,getOrThunk:jo,orThunk:jo,getOrDie:Zt(String(t)),each:ee,toOptional:x.none};return a},Nt={value:Ys,error:fo,fromOption:(t,s)=>t.fold(()=>fo(s),Ys)},ma=t=>({...t,toCached:()=>ma(t.toCached()),bindFuture:b=>ma(t.bind(C=>C.fold(S=>So.pure(Nt.error(S)),S=>b(S)))),bindResult:b=>ma(t.map(C=>C.bind(b))),mapResult:b=>ma(t.map(C=>C.map(b))),mapError:b=>ma(t.map(C=>C.mapError(b))),foldResult:(b,C)=>t.map(S=>S.fold(b,C)),withTimeout:(b,C)=>ma(So.nu(S=>{let _=!1;const A=setTimeout(()=>{_=!0,S(Nt.error(C()))},b);t.get(N=>{_||(clearTimeout(A),S(N))})}))}),Is=t=>ma(So.nu(t)),sm=t=>ma(So.pure(Nt.value(t))),qf={nu:Is,wrap:ma,pure:sm,value:sm,error:t=>ma(So.pure(Nt.error(t))),fromResult:t=>ma(So.pure(t)),fromFuture:t=>ma(t.map(Nt.value)),fromPromise:t=>Is(s=>{t.then(a=>{s(Nt.value(a))},a=>{s(Nt.error(a))})})},nu=typeof window<"u"?window:Function("return this;")(),Bi=(t,s,a,i)=>{const u=t+s;return u>i?a:u<a?i:u},vs=(t,s,a)=>Math.min(Math.max(t,s),a),Qu=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Zc=0;const Ie=t=>{const a=new Date().getTime(),i=Math.floor(Qu()*1e9);return Zc++,t+"_"+i+Zc+String(a)},op=(t,s)=>s,os=(t,s)=>jf(t)&&jf(s)?_n(t,s):s,sp=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const u=s[i];for(const m in u)Qt(u,m)&&(a[m]=t(a[m],u[m]))}return a},_n=sp(os),Kf=sp(op),jr=(t,s,a=To)=>t.exists(i=>a(i,s)),rp=(t,s,a=To)=>fr(t,s,a).getOr(t.isNone()&&s.isNone()),Pi=t=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(a);return s},ap=t=>{const s=[];for(let a=0;a<t.length;a++){const i=t[a];if(i.isSome())s.push(i.getOrDie());else return x.none()}return x.some(s)},fr=(t,s,a)=>t.isSome()&&s.isSome()?x.some(a(t.getOrDie(),s.getOrDie())):x.none(),Yf=(t,s,a,i)=>t.isSome()&&s.isSome()&&a.isSome()?x.some(i(t.getOrDie(),s.getOrDie(),a.getOrDie())):x.none(),ed=(t,s)=>t!=null?x.some(s(t)):x.none(),gr=(t,s)=>t?x.some(s):x.none(),ss=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Lo=(t,s)=>{let a=s??nu;for(let i=0;i<t.length&&a!==void 0&&a!==null;++i)a=a[t[i]];return a},td=(t,s)=>{const a=t.split(".");return Lo(a,s)};Nr.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ou=t=>{const s=[],a=[];return ze(t,i=>{i.fold(u=>{s.push(u)},u=>{a.push(u)})}),{errors:s,values:a}},Wc=t=>{const s=tt(x.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(x.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:p=>{a(),s.set(x.some(p))}}},Z0=()=>Wc(t=>t.destroy()),Ii=()=>Wc(t=>t.unbind()),tn=()=>{const t=Wc(ee);return{...t,on:a=>t.get().each(a)}},il=(t,s)=>t+s,nd=(t,s)=>t.substring(s),Fi=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,hr=(t,s)=>pr(t,s)?nd(t,s.length):t,od=(t,s)=>Jn(t,s)?t:il(t,s),Xn=(t,s,a=0,i)=>{const u=t.indexOf(s,a);return u!==-1?Wr(i)?!0:u+s.length<=i:!1},pr=(t,s)=>Fi(t,s,0),Jn=(t,s)=>Fi(t,s,t.length-s.length),rm=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),jc=t=>t.length>0,Gc=t=>!jc(t),su=t=>{const s=parseFloat(t);return isNaN(s)?x.none():x.some(s)},cp=(t,s)=>{let a=null,i=null;return{cancel:()=>{ia(a)||(clearTimeout(a),a=null,i=null)},throttle:(...f)=>{i=f,ia(a)&&(a=setTimeout(()=>{const p=i;a=null,i=null,t.apply(null,p)},s))}}},ga=(t,s)=>{let a=null;return{cancel:()=>{ia(a)||(clearTimeout(a),a=null)},throttle:(...m)=>{ia(a)&&(a=setTimeout(()=>{a=null,t.apply(null,m)},s))}}},ru=(t,s)=>{let a=null;const i=()=>{ia(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...m)=>{i(),a=setTimeout(()=>{a=null,t.apply(null,m)},s)}}},Js=t=>{let s=!1,a;return(...i)=>(s||(s=!0,a=t.apply(null,i)),a)},au="\uFEFF",ll=" ",Xf=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const u="HTML does not have a single root node";throw console.error(u,t),new Error(u)}return $i(i.childNodes[0])},Fs=(t,s)=>{const i=(s||document).createElement(t);return $i(i)},Jf=(t,s)=>{const i=(s||document).createTextNode(t);return $i(i)},$i=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Ne={fromHtml:Xf,fromTag:Fs,fromText:Jf,fromDom:$i,fromPoint:(t,s,a)=>x.from(t.dom.elementFromPoint(s,a)).map($i)},am=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,i)=>{t.setStart(a.dom,i)},a=>{t.setStartAfter(a.dom)})},cm=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,i)=>{t.setEnd(a.dom,i)},a=>{t.setEndAfter(a.dom)})},R=(t,s,a)=>{const i=t.document.createRange();return am(i,s),cm(i,a),i},V=(t,s,a,i,u)=>{const m=t.document.createRange();return m.setStart(s.dom,a),m.setEnd(i.dom,u),m},K=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),ge=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?x.some(a).map(K):x.none()},De=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?x.some(s).map(K):x.none()},We=Nr.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ht=(t,s,a)=>s(Ne.fromDom(a.startContainer),a.startOffset,Ne.fromDom(a.endContainer),a.endOffset),go=(t,s)=>s.match({domRange:a=>({ltr:Y(a),rtl:x.none}),relative:(a,i)=>({ltr:Js(()=>R(t,a,i)),rtl:Js(()=>x.some(R(t,i,a)))}),exact:(a,i,u,m)=>({ltr:Js(()=>V(t,a,i,u,m)),rtl:Js(()=>x.some(V(t,u,m,a,i)))})}),Cn=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(u=>u.collapsed===!1).map(u=>We.rtl(Ne.fromDom(u.endContainer),u.endOffset,Ne.fromDom(u.startContainer),u.startOffset)).getOrThunk(()=>Ht(t,We.ltr,a)):Ht(t,We.ltr,a)},ho=(t,s)=>{const a=go(t,s);return Cn(t,a)},co=(t,s)=>ho(t,s).match({ltr:(i,u,m,f)=>{const p=t.document.createRange();return p.setStart(i.dom,u),p.setEnd(m.dom,f),p},rtl:(i,u,m,f)=>{const p=t.document.createRange();return p.setStart(m.dom,f),p.setEnd(i.dom,u),p}});We.ltr,We.rtl;const sc=9,rc=11,sd=1,j0=3,cu=(t,s)=>{const a=t.dom;if(a.nodeType!==sd)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},G0=t=>t.nodeType!==sd&&t.nodeType!==sc&&t.nodeType!==rc||t.childElementCount===0,Qf=(t,s)=>{const a=s===void 0?document:s.dom;return G0(a)?[]:Ce(a.querySelectorAll(t),Ne.fromDom)},ip=(t,s)=>{const a=s===void 0?document:s.dom;return G0(a)?x.none():x.from(a.querySelector(t)).map(Ne.fromDom)},xn=(t,s)=>t.dom===s.dom,im=(t,s)=>{const a=t.dom,i=s.dom;return a===i?!1:a.contains(i)},rd=(t,s,a,i)=>{const u=t.isiOS()&&/ipad/i.test(a)===!0,m=t.isiOS()&&!u,f=t.isiOS()||t.isAndroid(),p=f||i("(pointer:coarse)"),b=u||!m&&f&&i("(min-device-width:768px)"),C=m||f&&!b,S=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,_=!C&&!b&&!S;return{isiPad:Y(u),isiPhone:Y(m),isTablet:Y(b),isPhone:Y(C),isTouch:Y(p),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:Y(S),isDesktop:Y(_)}},q0=(t,s)=>{for(let a=0;a<t.length;a++){const i=t[a];if(i.test(s))return i}},lp=(t,s)=>{const a=q0(t,s);if(!a)return{major:0,minor:0};const i=u=>Number(s.replace(a,"$"+u));return eg(i(1),i(2))},K0=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?up():lp(t,a)},up=()=>eg(0,0),eg=(t,s)=>({major:t,minor:s}),lm={nu:eg,detect:K0,unknown:up},ad=(t,s)=>Xt(s.brands,a=>{const i=a.brand.toLowerCase();return St(t,u=>{var m;return i===((m=u.brand)===null||m===void 0?void 0:m.toLowerCase())}).map(u=>({current:u.name,version:lm.nu(parseInt(a.version,10),0)}))}),tg=(t,s)=>{const a=String(s).toLowerCase();return St(t,i=>i.search(a))},DC=(t,s)=>tg(t,s).map(a=>{const i=lm.detect(a.versionRegexes,s);return{current:a.name,version:i}}),MC=(t,s)=>tg(t,s).map(a=>{const i=lm.detect(a.versionRegexes,s);return{current:a.name,version:i}}),ul=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,qc=t=>s=>Xn(s,t),Qs=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Xn(t,"edge/")&&Xn(t,"chrome")&&Xn(t,"safari")&&Xn(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ul],search:t=>Xn(t,"chrome")&&!Xn(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Xn(t,"msie")||Xn(t,"trident")},{name:"Opera",versionRegexes:[ul,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:qc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:qc("firefox")},{name:"Safari",versionRegexes:[ul,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Xn(t,"safari")||Xn(t,"mobile/"))&&Xn(t,"applewebkit")}],um=[{name:"Windows",search:qc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Xn(t,"iphone")||Xn(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:qc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:qc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:qc("linux"),versionRegexes:[]},{name:"Solaris",search:qc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:qc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:qc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Y0={browsers:Y(Qs),oses:Y(um)},dp="Edge",X0="Chromium",dl="IE",mp="Opera",ng="Firefox",Ia="Safari",Kc=()=>ml({current:void 0,version:lm.unknown()}),ml=t=>{const s=t.current,a=t.version,i=u=>()=>s===u;return{current:s,version:a,isEdge:i(dp),isChromium:i(X0),isIE:i(dl),isOpera:i(mp),isFirefox:i(ng),isSafari:i(Ia)}},J0={unknown:Kc,nu:ml,edge:Y(dp),chromium:Y(X0),ie:Y(dl),opera:Y(mp),firefox:Y(ng),safari:Y(Ia)},rn="Windows",Q0="iOS",fp="Android",eb="Linux",tb="macOS",nb="Solaris",ob="FreeBSD",gp="ChromeOS",B_=()=>sb({current:void 0,version:lm.unknown()}),sb=t=>{const s=t.current,a=t.version,i=u=>()=>s===u;return{current:s,version:a,isWindows:i(rn),isiOS:i(Q0),isAndroid:i(fp),isMacOS:i(tb),isLinux:i(eb),isSolaris:i(nb),isFreeBSD:i(ob),isChromeOS:i(gp)}},RC={unknown:B_,nu:sb,windows:Y(rn),ios:Y(Q0),android:Y(fp),linux:Y(eb),macos:Y(tb),solaris:Y(nb),freebsd:Y(ob),chromeos:Y(gp)},NC={detect:(t,s,a)=>{const i=Y0.browsers(),u=Y0.oses(),m=s.bind(b=>ad(i,b)).orThunk(()=>DC(i,t)).fold(J0.unknown,J0.nu),f=MC(u,t).fold(RC.unknown,RC.nu),p=rd(f,m,t,a);return{browser:m,os:f,deviceType:p}}},BC=t=>window.matchMedia(t).matches;let PC=Js(()=>NC.detect(window.navigator.userAgent,x.from(window.navigator.userAgentData),BC));const Br=()=>PC(),IC=(t,s)=>td(t,s),z=(t,s)=>{const a=IC(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},FC=Object.getPrototypeOf,og=t=>z("HTMLElement",t),rb=t=>{const s=td("ownerDocument.defaultView",t);return ca(t)&&(og(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(FC(t).constructor.name))},ac=t=>t.dom.nodeName.toLowerCase(),dm=t=>t.dom.nodeType,mm=t=>s=>dm(s)===t,ab=t=>Gr(t)&&rb(t.dom),Gr=mm(sd),iu=mm(j0),sg=mm(sc),rg=mm(rc),ag=t=>s=>Gr(s)&&ac(s)===t,er=t=>Ne.fromDom(t.dom.ownerDocument),lu=t=>sg(t)?t:er(t),ha=t=>Ne.fromDom(lu(t).dom.documentElement),cc=t=>Ne.fromDom(lu(t).dom.defaultView),br=t=>x.from(t.dom.parentNode).map(Ne.fromDom),cd=t=>br(t),Gt=t=>x.from(t.dom.parentElement).map(Ne.fromDom),ic=(t,s)=>{const a=Ps(s)?s:pn;let i=t.dom;const u=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const m=i.parentNode,f=Ne.fromDom(m);if(u.push(f),a(f)===!0)break;i=m}return u},cg=t=>x.from(t.dom.offsetParent).map(Ne.fromDom),un=t=>x.from(t.dom.nextSibling).map(Ne.fromDom),tr=t=>Ce(t.dom.childNodes,Ne.fromDom),Yc=(t,s)=>{const a=t.dom.childNodes;return x.from(a[s]).map(Ne.fromDom)},id=t=>Yc(t,0),fl=(t,s)=>({element:t,offset:s}),Pr=(t,s)=>{const a=tr(t);return a.length>0&&s<a.length?fl(a[s],0):fl(t,s)},vr=(t,s,a,i)=>{const m=er(t).dom.createRange();return m.setStart(t.dom,s),m.setEnd(a.dom,i),m},$C=(t,s,a,i)=>{const u=vr(t,s,a,i),m=xn(t,a)&&s===i;return u.collapsed&&!m},fm=t=>rg(t)&&Qn(t.dom.host),rs=t=>Ne.fromDom(t.dom.getRootNode()),uu=t=>fm(t)?t:Ne.fromDom(lu(t).dom.body),gl=t=>ig(t).isSome(),ig=t=>{const s=rs(t);return fm(s)?x.some(s):x.none()},hl=t=>Ne.fromDom(t.dom.host),Xc=t=>{if(Qn(t.target)){const s=Ne.fromDom(t.target);if(Gr(s)&&gm(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Gs(a)}}return x.from(t.target)},gm=t=>Qn(t.dom.shadowRoot),cb=(t,s,a,i,u,m,f)=>({target:t,x:s,y:a,stop:i,prevent:u,kill:m,raw:f}),hp=t=>{const s=Ne.fromDom(Xc(t).getOr(t.target)),a=()=>t.stopPropagation(),i=()=>t.preventDefault(),u=rl(i,a);return cb(s,t.clientX,t.clientY,a,i,u,t)},pl=(t,s)=>a=>{t(a)&&s(hp(a))},bl=(t,s,a,i,u)=>{const m=pl(a,i);return t.dom.addEventListener(s,m,u),{unbind:vn(Os,t,s,m,u)}},pp=(t,s,a,i)=>bl(t,s,a,i,!1),ib=(t,s,a,i)=>bl(t,s,a,i,!0),Os=(t,s,a,i)=>{t.dom.removeEventListener(s,a,i)},vl=it,ys=(t,s,a)=>pp(t,s,vl,a),hm=(t,s,a)=>ib(t,s,vl,a),lg=hp,ug=()=>Ne.fromDom(document),Do=(t,s=!1)=>t.dom.focus({preventScroll:s}),lc=t=>t.dom.blur(),yl=t=>{const s=rs(t).dom;return t.dom===s.activeElement},Jc=(t=ug())=>x.from(t.dom.activeElement).map(Ne.fromDom),$s=t=>Jc(rs(t)).filter(s=>t.dom.contains(s.dom)),pm=(t,s)=>{br(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},lb=(t,s)=>{un(t).fold(()=>{br(t).each(u=>{qr(u,s)})},i=>{pm(i,s)})},LC=(t,s)=>{id(t).fold(()=>{qr(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},qr=(t,s)=>{t.dom.appendChild(s.dom)},HC=(t,s,a)=>{Yc(t,a).fold(()=>{qr(t,s)},i=>{pm(i,s)})},dg=(t,s)=>{ze(s,a=>{qr(t,a)})},ub=(t,s,a)=>{if(hn(a)||Zr(a)||la(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},vt=(t,s,a)=>{ub(t.dom,s,a)},db=(t,s)=>{const a=t.dom;Oo(s,(i,u)=>{ub(a,u,i)})},Go=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},qo=(t,s)=>x.from(Go(t,s)),bp=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},oo=(t,s)=>{t.dom.removeAttribute(s)},mb=t=>Fo(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),bm=t=>{t.dom.textContent="",ze(tr(t),s=>{Qc(s)})},Qc=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},yr=(t,s)=>Ne.fromDom(t.dom.cloneNode(s)),Li=t=>yr(t,!1),vm=t=>yr(t,!0),Mo=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,tr(Ne.fromDom(i))},mg=t=>t.dom.innerHTML,ld=(t,s)=>{const i=er(t).dom,u=Ne.fromDom(i.createDocumentFragment()),m=Mo(s,i);dg(u,m),bm(t),qr(t,u)},Cl=t=>{const s=Ne.fromTag("div"),a=Ne.fromDom(t.dom.cloneNode(!0));return qr(s,a),mg(s)},vp=t=>{if(fm(t))return"#shadow-root";{const s=Li(t);return Cl(s)}},as=t=>new Promise((s,a)=>{const i=()=>{m(),s(t)},u=[ys(t,"load",i),ys(t,"error",()=>{m(),a("Unable to load data from image: "+t.dom.src)})],m=()=>ze(u,f=>f.unbind());t.dom.complete&&i()}),pa=t=>t.style!==void 0&&Ps(t.style.getPropertyValue),wo=t=>{const s=iu(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return ig(Ne.fromDom(s)).fold(()=>a.body.contains(s),Kn(wo,hl))},Cr=()=>ud(Ne.fromDom(document)),ud=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return Ne.fromDom(s)},Ko=(t,s,a)=>{if(!hn(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);pa(t)&&t.style.setProperty(s,a)},fb=(t,s)=>{pa(t)&&t.style.removeProperty(s)},_t=(t,s,a)=>{const i=t.dom;Ko(i,s,a)},Fa=(t,s)=>{const a=t.dom;Oo(s,(i,u)=>{Ko(a,u,i)})},v=(t,s)=>{const a=t.dom;Oo(s,(i,u)=>{i.fold(()=>{fb(a,u)},m=>{Ko(a,u,m)})})},E=(t,s)=>{const a=t.dom,u=window.getComputedStyle(a).getPropertyValue(s);return u===""&&!wo(t)?O(a,s):u},O=(t,s)=>pa(t)?t.style.getPropertyValue(s):"",$=(t,s)=>{const a=t.dom,i=O(a,s);return x.from(i).filter(u=>u.length>0)},W=t=>{const s={},a=t.dom;if(pa(a))for(let i=0;i<a.style.length;i++){const u=a.style.item(i);s[u]=a.style[u]}return s},xe=(t,s,a)=>{const i=Ne.fromTag(t);return _t(i,s,a),$(i,s).isSome()},Me=(t,s)=>{const a=t.dom;fb(a,s),jr(qo(t,"style").map(rm),"")&&oo(t,"style")},Mt=t=>t.dom.offsetWidth,Dt=(t,s)=>{const a=(p,b)=>{if(!la(b)&&!b.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+b);const C=p.dom;pa(C)&&(C.style[t]=b+"px")},i=p=>{const b=s(p);if(b<=0||b===null){const C=E(p,t);return parseFloat(C)||0}return b},u=i,m=(p,b)=>Fo(b,(C,S)=>{const _=E(p,S),A=_===void 0?0:parseInt(_,10);return isNaN(A)?C:C+A},0);return{set:a,get:i,getOuter:u,aggregate:m,max:(p,b,C)=>{const S=m(p,C);return b>S?b-S:0}}},ut=Dt("height",t=>{const s=t.dom;return wo(t)?s.getBoundingClientRect().height:s.offsetHeight}),jt=t=>ut.get(t),eo=t=>ut.getOuter(t),$a=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=ut.max(t,s,a);_t(t,"max-height",i+"px")},Ls=t=>t.offsetWidth<=0&&t.offsetHeight<=0,VC=t=>!Ls(t.dom),gb=Dt("width",t=>t.dom.offsetWidth),P_=Dt("width",t=>{const s=t.dom;return wo(t)?s.getBoundingClientRect().width:s.offsetWidth}),hb=(t,s)=>gb.set(t,s),Yo=t=>gb.get(t),fg=t=>gb.getOuter(t),pb=t=>P_.getOuter(t),zC=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=gb.max(t,s,a);_t(t,"max-width",i+"px")},UC=(t,s)=>({left:t,top:s,translate:(i,u)=>UC(t+i,s+u)}),po=UC,Dj=t=>{const s=t.getBoundingClientRect();return po(s.left,s.top)},bb=(t,s)=>t!==void 0?t:s!==void 0?s:0,ei=t=>{const s=t.dom.ownerDocument,a=s.body,i=s.defaultView,u=s.documentElement;if(a===t.dom)return po(a.offsetLeft,a.offsetTop);const m=bb(i==null?void 0:i.pageYOffset,u.scrollTop),f=bb(i==null?void 0:i.pageXOffset,u.scrollLeft),p=bb(u.clientTop,a.clientTop),b=bb(u.clientLeft,a.clientLeft);return yp(t).translate(f-b,m-p)},yp=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?po(i.offsetLeft,i.offsetTop):wo(t)?Dj(s):po(0,0)},nr=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return po(a,i)},ZC=(t,s,a)=>{const u=(a!==void 0?a.dom:document).defaultView;u&&u.scrollTo(t,s)},jB=((t,s)=>{const a=m=>{if(!t(m))throw new Error("Can only get "+s+" value of a "+s+" node");return i(m).getOr("")},i=m=>t(m)?x.from(m.dom.nodeValue):x.none();return{get:a,getOption:i,set:(m,f)=>{if(!t(m))throw new Error("Can only set raw "+s+" value of a "+s+" node");m.dom.nodeValue=f}}})(iu,"text"),jC=t=>jB.get(t),Cp=(t,s)=>a=>I_(a)==="rtl"?s:t,I_=t=>E(t,"direction")==="rtl"?"rtl":"ltr",vb=(t,s)=>{const a=Go(t,s);return a===void 0||a===""?[]:a.split(" ")},GB=(t,s,a)=>{const u=vb(t,s).concat([a]);return vt(t,s,u.join(" ")),!0},GC=(t,s,a)=>{const i=Pn(vb(t,s),u=>u!==a);return i.length>0?vt(t,s,i.join(" ")):oo(t,s),!1};var yb=(t,s,a,i,u)=>t(a,i)?x.some(a):Ps(u)&&u(a)?x.none():s(a,i,u);const gg=(t,s,a)=>{let i=t.dom;const u=Ps(a)?a:pn;for(;i.parentNode;){i=i.parentNode;const m=Ne.fromDom(i);if(s(m))return x.some(m);if(u(m))break}return x.none()},F_=(t,s,a)=>yb((u,m)=>m(u),gg,t,s,a),$_=(t,s)=>{const a=t.dom;return a.parentNode?Cb(Ne.fromDom(a.parentNode),i=>!xn(t,i)&&s(i)):x.none()},Cb=(t,s)=>{const a=u=>s(Ne.fromDom(u));return St(t.dom.childNodes,a).map(Ne.fromDom)},qB=(t,s)=>{const a=i=>{for(let u=0;u<i.childNodes.length;u++){const m=Ne.fromDom(i.childNodes[u]);if(s(m))return x.some(m);const f=a(i.childNodes[u]);if(f.isSome())return f}return x.none()};return a(t.dom)},KB=t=>ip(t),ti=(t,s,a)=>gg(t,i=>cu(i,s),a),du=(t,s)=>$_(t,a=>cu(a,s)),xl=(t,s)=>Cb(t,a=>cu(a,s)),Dn=(t,s)=>ip(s,t),Sl=(t,s,a)=>yb((u,m)=>cu(u,m),ti,t,s,a),qC=(t,s)=>{t.dom.checked=s},xp=t=>t.dom.checked,mu=t=>t.dom.classList!==void 0,dd=t=>vb(t,"class"),hg=(t,s)=>GB(t,"class",s),KC=(t,s)=>GC(t,"class",s),L_=(t,s)=>In(dd(t),s)?KC(t,s):hg(t,s),bo=(t,s)=>{mu(t)?t.dom.classList.add(s):hg(t,s)},H_=t=>{(mu(t)?t.dom.classList:dd(t)).length===0&&oo(t,"class")},Un=(t,s)=>{mu(t)?t.dom.classList.remove(s):KC(t,s),H_(t)},V_=(t,s)=>{const a=mu(t)?t.dom.classList.toggle(s):L_(t,s);return H_(t),a},Hs=(t,s)=>mu(t)&&t.dom.classList.contains(s),ym=(t,s)=>{ze(s,a=>{bo(t,a)})},La=(t,s)=>{ze(s,a=>{Un(t,a)})},YB=(t,s)=>{ze(s,a=>{V_(t,a)})},XB=(t,s)=>Vc(s,a=>Hs(t,a)),JB=t=>{const s=t.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const u=s.item(i);u!==null&&(a[i]=u)}return a},fu=t=>mu(t)?JB(t):dd(t),QB=t=>t.dom.textContent,ni=t=>t.dom.value,Cm=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},YC=(t,s,a)=>Pn(ic(t,a),s),Zn=(t,s)=>Qf(s,t),XC=(t,s,a)=>F_(t,s,a).isSome(),Sp=(t,s,a)=>Sl(t,s,a).isSome(),xb=t=>Ps(t)?t:pn,z_=(t,s,a)=>{let i=t.dom;const u=xb(a);for(;i.parentNode;){i=i.parentNode;const m=Ne.fromDom(i),f=s(m);if(f.isSome())return f;if(u(m))break}return x.none()},wp=(t,s,a)=>{const i=s(t),u=xb(a);return i.orThunk(()=>u(t)?x.none():z_(t,s,u))},pg={create:(t,s,a,i)=>({start:t,soffset:s,finish:a,foffset:i})},JC=Nr.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),e8=(t,s,a,i)=>t.fold(s,a,i),t8=t=>t.fold(Lt,Lt,Lt),n8=JC.before,o8=JC.on,Rj=JC.after,U_={before:n8,on:o8,after:Rj,cata:e8,getStart:t8},bg=Nr.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),s8=t=>bg.exact(t.start,t.soffset,t.finish,t.foffset),r8=t=>t.match({domRange:s=>Ne.fromDom(s.startContainer),relative:(s,a)=>U_.getStart(s),exact:(s,a,i,u)=>s}),a8=bg.domRange,c8=bg.relative,i8=bg.exact,gu=t=>{const s=r8(t);return cc(s)},Sb=pg.create,Ep={domRange:a8,relative:c8,exact:i8,exactFromRange:s8,getWin:gu,range:Sb},l8=t=>x.from(t.getSelection()),Z_=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return x.some(pg.create(Ne.fromDom(s.startContainer),s.startOffset,Ne.fromDom(a.endContainer),a.endOffset))}else return x.none()},u8=t=>{if(t.anchorNode===null||t.focusNode===null)return Z_(t);{const s=Ne.fromDom(t.anchorNode),a=Ne.fromDom(t.focusNode);return $C(s,t.anchorOffset,a,t.focusOffset)?x.some(pg.create(s,t.anchorOffset,a,t.focusOffset)):Z_(t)}},d8=t=>l8(t).filter(s=>s.rangeCount>0).bind(u8),W_=(t,s)=>{const a=co(t,s);return ge(a)},m8=(t,s)=>{const a=co(t,s);return De(a)},vg={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},f8=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),i="\\.",u=p=>`(?:${p})?`,f=`[+-]?(?:${["Infinity",t+i+u(t)+u(a),i+t+u(a),t+u(a)].join("|")})`;return new RegExp(`^(${f})(.*)$`)})(),g8=(t,s)=>ks(s,a=>ks(vg[a],i=>t===i)),wb=(t,s)=>x.from(f8.exec(t)).bind(i=>{const u=Number(i[1]),m=i[2];return g8(m,s)?x.some({value:u,unit:m}):x.none()}),h8=(t,s)=>wb(t,s).map(({value:a,unit:i})=>a+i),Eb=t=>{const s=t===void 0?window:t;return Br().browser.isFirefox()?x.none():x.from(s.visualViewport)},j_=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),_b=t=>{const s=t===void 0?window:t,a=s.document,i=nr(Ne.fromDom(a));return Eb(s).fold(()=>{const u=s.document.documentElement,m=u.clientWidth,f=u.clientHeight;return j_(i.left,i.top,m,f)},u=>j_(Math.max(u.pageLeft,i.left),Math.max(u.pageTop,i.top),u.width,u.height))},G_=(t,s)=>t.view(s).fold(Y([]),i=>{const u=t.owner(i),m=G_(t,u);return[i].concat(m)}),p8=(t,s)=>{const a=s.owner(t),i=G_(s,a);return x.some(i)};var q_=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?x.none():x.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(Ne.fromDom)},owner:t=>er(t)});const _p=t=>{const s=ug(),a=nr(s);return p8(t,q_).fold(vn(ei,t),u=>{const m=yp(t),f=As(u,(p,b)=>{const C=yp(b);return{left:p.left+C.left,top:p.top+C.top}},{left:0,top:0});return po(f.left+m.left+a.left,f.top+m.top+a.top)})},Ds=(t,s,a)=>({point:t,width:s,height:a}),b8=(t,s,a,i)=>({x:t,y:s,width:a,height:i}),Ro=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),Ms=t=>{const s=ei(t),a=fg(t),i=eo(t);return Ro(s.left,s.top,a,i)},xm=t=>{const s=_p(t),a=fg(t),i=eo(t);return Ro(s.left,s.top,a,i)},Tb=(t,s)=>{const a=Math.max(t.x,s.x),i=Math.max(t.y,s.y),u=Math.min(t.right,s.right),m=Math.min(t.bottom,s.bottom),f=u-a,p=m-i;return Ro(a,i,f,p)},v8=(t,s)=>Fo(s,(a,i)=>Tb(a,i),t),or=()=>_b(window),md=(t,s)=>xn(t.element,s.event.target),yg=t=>(jr($(t,"position"),"fixed")?x.none():cg(t)).orThunk(()=>{const i=Ne.fromTag("span");return br(t).bind(u=>{qr(u,i);const m=cg(i);return Qc(i),m})}),Ye=t=>yg(t).map(ei).getOrThunk(()=>po(0,0)),wl=(t,s)=>{const a=x.from(Go(t,"id")).getOrThunk(()=>{const i=Ie("aria");return vt(s,"id",i),i});vt(t,"aria-describedby",a)},y8=t=>{oo(t,"aria-describedby")};var xr;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(xr||(xr={}));const uc=(t,s,a)=>t.stype===xr.Error?s(t.serror):a(t.svalue),kb=t=>{const s=[],a=[];return ze(t,i=>{uc(i,u=>a.push(u),u=>s.push(u))}),{values:s,errors:a}},C8=(t,s)=>t.stype===xr.Error?{stype:xr.Error,serror:s(t.serror)}:t,Sm=(t,s)=>t.stype===xr.Value?{stype:xr.Value,svalue:s(t.svalue)}:t,x8=(t,s)=>t.stype===xr.Value?s(t.svalue):t,El=(t,s)=>t.stype===xr.Error?s(t.serror):t,QC=t=>({stype:xr.Value,svalue:t}),Ab=t=>({stype:xr.Error,serror:t}),Ho={fromResult:t=>t.fold(Ab,QC),toResult:t=>uc(t,Nt.error,Nt.value),svalue:QC,partition:kb,serror:Ab,bind:x8,bindError:El,map:Sm,mapError:C8,fold:uc},_l=t=>ca(t)&&Yn(t).length>100?" removed due to size":JSON.stringify(t,null,2),Tp=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:Y("... (only showing first ten failures)")}]):t;return Ce(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},wm=(t,s)=>Ho.serror([{path:t,getErrorInfo:s}]),vo=(t,s,a)=>wm(t,()=>'Could not find valid *required* value for "'+s+'" in '+_l(a)),K_=(t,s)=>wm(t,()=>'Choice schema did not contain choice key: "'+s+'"'),S8=(t,s,a)=>wm(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+_l(s)),oi=(t,s)=>wm(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),to=(t,s)=>wm(t,Y(s)),fd=t=>{const s=(i,u)=>Ho.bindError(t(u),m=>to(i,m)),a=Y("val");return{extract:s,toString:a}},kp=fd(Ho.svalue),si=Y(kp),dc=(t,s)=>fd(a=>{const i=typeof a;return t(a)?Ho.svalue(a):Ho.serror(`Expected type: ${s} but got: ${i}`)}),Ob=dc(la,"number"),Vo=dc(hn,"string"),Db=dc(Zr,"boolean"),Mb=dc(Ps,"function"),Y_=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Y_(t[s]));default:return!1}},w8=fd(t=>Y_(t)?Ho.svalue(t):Ho.serror("Expected value to be acceptable for sending via postMessage")),Hi=()=>({tag:"required",process:{}}),Rb=t=>({tag:"defaultedThunk",process:t}),Nb=t=>Rb(Y(t)),ex=()=>({tag:"option",process:{}}),tx=t=>({tag:"mergeWithThunk",process:t}),nx=t=>tx(Y(t)),Tl=(t,s,a,i)=>({tag:"field",key:t,newKey:s,presence:a,prop:i}),Sr=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Bb=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},X_=(t,s)=>t.length>0?Ho.svalue(_n(s,Kf.apply(void 0,t))):Ho.svalue(s),gd=t=>rl(Ho.serror,wt)(t),Q_={consolidateObj:(t,s)=>{const a=Ho.partition(t);return a.errors.length>0?gd(a.errors):X_(a.values,s)},consolidateArr:t=>{const s=Ho.partition(t);return s.errors.length>0?gd(s.errors):Ho.svalue(s.values)}},_8=(t,s,a,i)=>Le(s,a).fold(()=>vo(t,a,s),i),Ap=(t,s,a,i)=>{const u=Le(t,s).getOrThunk(()=>a(t));return i(u)},T8=(t,s,a)=>a(Le(t,s)),ox=(t,s,a,i)=>{const u=Le(t,s).map(m=>m===!0?a(t):m);return i(u)},eT=(t,s,a,i,u)=>{const m=p=>u.extract(s.concat([i]),p),f=p=>p.fold(()=>Ho.svalue(x.none()),b=>{const C=u.extract(s.concat([i]),b);return Ho.map(C,x.some)});switch(t.tag){case"required":return _8(s,a,i,m);case"defaultedThunk":return Ap(a,i,t.process,m);case"option":return T8(a,i,f);case"defaultedOptionThunk":return ox(a,i,t.process,f);case"mergeWithThunk":return Ap(a,i,Y({}),p=>{const b=_n(t.process(a),p);return m(b)})}},tT=(t,s,a)=>{const i={},u=[];for(const m of a)Bb(m,(f,p,b,C)=>{const S=eT(b,t,s,f,C);Ho.fold(S,_=>{u.push(..._)},_=>{i[p]=_})},(f,p)=>{i[f]=p(s)});return u.length>0?Ho.serror(u):Ho.svalue(i)},sx=t=>({extract:(i,u)=>t().extract(i,u),toString:()=>t().toString()}),k8=t=>Yn(Uc(t,Qn)),Ha=t=>{const s=ht(t),a=As(t,(u,m)=>Bb(m,f=>_n(u,{[f]:!0}),Y(u)),{});return{extract:(u,m)=>{const f=Zr(m)?[]:k8(m),p=Pn(f,b=>!Ks(a,b));return p.length===0?s.extract(u,m):oi(u,p)},toString:s.toString}},ht=t=>({extract:(i,u)=>tT(i,u,t),toString:()=>`obj{
`+Ce(t,u=>Bb(u,(m,f,p,b)=>m+" -> "+b.toString(),(m,f)=>"state("+m+")")).join(`
`)+"}"}),kl=t=>({extract:(i,u)=>{const m=Ce(u,(f,p)=>t.extract(i.concat(["["+p+"]"]),f));return Q_.consolidateArr(m)},toString:()=>"array("+t.toString()+")"}),Pb=(t,s)=>{const a=s!==void 0?s:Lt;return{extract:(m,f)=>{const p=[];for(const b of t){const C=b.extract(m,f);if(C.stype===xr.Value)return{stype:xr.Value,svalue:a(C.svalue)};p.push(C)}return Q_.consolidateArr(p)},toString:()=>"oneOf("+Ce(t,m=>m.toString()).join(", ")+")"}},A8=(t,s)=>{const a=(m,f)=>kl(fd(t)).extract(m,f);return{extract:(m,f)=>{const p=Yn(f),b=a(m,p);return Ho.bind(b,C=>{const S=Ce(C,_=>Tl(_,_,Hi(),s));return ht(S).extract(m,f)})},toString:()=>"setOf("+s.toString()+")"}},rx=(t,s)=>{const a=Js(s);return{extract:(m,f)=>a().extract(m,f),toString:()=>a().toString()}},Cg=rl(kl,ht),ax=(t,s,a,i)=>Le(a,i).fold(()=>S8(t,a,i),m=>m.extract(t.concat(["branch: "+i]),s)),ri=(t,s)=>({extract:(u,m)=>Le(m,t).fold(()=>K_(u,t),p=>ax(u,m,s,p)),toString:()=>"chooseOn("+t+"). Possible values: "+Yn(s)}),O8=()=>kl(kp),Em=t=>fd(s=>t(s).fold(Ho.serror,Ho.svalue)),nT=(t,s)=>A8(a=>Ho.fromResult(t(a)),s),oT=(t,s,a)=>{const i=s.extract([t],a);return Ho.mapError(i,u=>({input:a,errors:u}))},io=(t,s,a)=>Ho.toResult(oT(t,s,a)),mc=t=>t.fold(s=>{throw new Error(_m(s))},Lt),Kr=(t,s,a)=>mc(io(t,s,a)),_m=t=>`Errors: 
`+Tp(t.errors).join(`
`)+`

Input object: `+_l(t.input),ba=(t,s)=>ri(t,Vn(s,ht)),cx=(t,s)=>rx(t,s),Vs=Tl,wr=Sr,ix=t=>Em(s=>In(t,s)?Nt.value(s):Nt.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),be=t=>Vs(t,t,Hi(),si()),Va=(t,s)=>Vs(t,t,Hi(),s),sT=t=>Va(t,Ob),cs=t=>Va(t,Vo),za=(t,s)=>Vs(t,t,Hi(),ix(s)),ai=t=>Va(t,Mb),Ib=(t,s)=>Vs(t,t,ex(),fd(a=>Ho.serror("The field: "+t+" is forbidden. "+s))),ci=(t,s)=>Vs(t,t,Hi(),ht(s)),rT=(t,s)=>Vs(t,t,Hi(),Cg(s)),va=(t,s)=>Vs(t,t,Hi(),kl(s)),bn=t=>Vs(t,t,ex(),si()),Yr=(t,s)=>Vs(t,t,ex(),s),Op=t=>Yr(t,Ob),No=t=>Yr(t,Vo),lx=(t,s)=>Yr(t,ix(s)),Vi=t=>Yr(t,Mb),ux=(t,s)=>Yr(t,kl(s)),ya=(t,s)=>Yr(t,ht(s)),aT=(t,s)=>Yr(t,Ha(s)),J=(t,s)=>Vs(t,t,Nb(s),si()),ii=(t,s,a)=>Vs(t,t,Nb(s),a),cT=(t,s)=>ii(t,s,Ob),Fn=(t,s)=>ii(t,s,Vo),yo=(t,s,a)=>ii(t,s,ix(a)),zs=(t,s)=>ii(t,s,Db),Ln=(t,s)=>ii(t,s,Mb),D8=(t,s)=>ii(t,s,w8),hd=(t,s,a)=>ii(t,s,kl(a)),Fb=(t,s,a)=>ii(t,s,ht(a)),iT=(t,s)=>{const a={};return Oo(t,(i,u)=>{In(s,u)||(a[u]=i)}),a},dx=(t,s)=>({[t]:s}),M8=t=>{const s={};return ze(t,a=>{s[a.key]=a.value}),s},lT=(t,s)=>iT(t,s),Tm=(t,s)=>dx(t,s),xg=t=>M8(t),mx=(t,s)=>t.length===0?Nt.value(s):Nt.value(_n(s,Kf.apply(void 0,t))),R8=t=>Nt.error(wt(t)),N8=(t,s)=>{const a=ou(t);return a.errors.length>0?R8(a.errors):mx(a.values,s)},Us=Y,hu=Us("touchstart"),pd=Us("touchmove"),zi=Us("touchend"),li=Us("touchcancel"),Ca=Us("mousedown"),Dp=Us("mousemove"),Mp=Us("mouseout"),$b=Us("mouseup"),ui=Us("mouseover"),sr=Us("focusin"),uT=Us("focusout"),Ui=Us("keydown"),fx=Us("keyup"),pu=Us("input"),km=Us("change"),bd=Us("click"),B8=Us("transitioncancel"),Sg=Us("transitionend"),P8=Us("transitionstart"),dT=Us("selectstart"),Bo=t=>Y("alloy."+t),Rp={tap:Bo("tap")},Al=Bo("focus"),Np=Bo("blur.post"),gx=Bo("paste.post"),Am=Bo("receive"),Ua=Bo("execute"),wg=Bo("focus.item"),Om=Rp.tap,I8=Bo("longpress"),Lb=Bo("sandbox.close"),Bp=Bo("typeahead.cancel"),Dm=Bo("system.init"),F8=Bo("system.touchmove"),Pp=Bo("system.touchend"),hx=Bo("system.scroll"),Zi=Bo("system.resize"),fc=Bo("system.attached"),Ol=Bo("system.detached"),bu=Bo("system.dismissRequested"),mT=Bo("system.repositionRequested"),vd=Bo("focusmanager.shifted"),Hb=Bo("slotcontainer.visibility"),Mm=Bo("system.external.element.scroll"),px=Bo("change.tab"),fT=Bo("dismiss.tab"),Vb=Bo("highlight"),bx=Bo("dehighlight"),wn=t=>vp(t),gT="unknown";var Eg;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Eg||(Eg={}));const vx=tt({}),zb=(t,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(u,m,f)=>{a.push({outcome:"cut",target:m,purpose:f})},logEventStopped:(u,m,f)=>{a.push({outcome:"stopped",target:m,purpose:f})},logNoParent:(u,m,f)=>{a.push({outcome:"no-parent",target:m,purpose:f})},logEventNoHandlers:(u,m)=>{a.push({outcome:"no-handlers-left",target:m})},logEventResponse:(u,m,f)=>{a.push({outcome:"response",purpose:f,target:m})},write:()=>{const u=new Date().getTime();In(["mousemove","mouseover","mouseout",Dm()],t)||console.log(t,{event:t,time:u-i,target:s.dom,sequence:Ce(a,m=>In(["cut","stopped","response"],m.outcome)?"{"+m.purpose+"} "+m.outcome+" at ("+wn(m.target)+")":m.outcome)})}}},hT=(t,s,a)=>{switch(Le(vx.get(),t).orThunk(()=>{const u=Yn(vx.get());return Xt(u,m=>t.indexOf(m)>-1?x.some(vx.get()[m]):x.none())}).getOr(Eg.NORMAL)){case Eg.NORMAL:return a(Ip());case Eg.LOGGING:{const u=zb(t,s),m=a(u);return u.write(),m}case Eg.STOP:return!0}},vu=["alloy/data/Fields","alloy/debugging/Debugging"],$8=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return St(s,a=>a.indexOf("alloy")>0&&!ks(vu,i=>a.indexOf(i)>-1)).getOr(gT)}else return gT},L8={logEventCut:ee,logEventStopped:ee,logNoParent:ee,logEventNoHandlers:ee,logEventResponse:ee,write:ee},yx=(t,s,a)=>hT(t,s,a),Ip=Y(L8),Ub=Y([be("menu"),be("selectedMenu")]),Zb=Y([be("item"),be("selectedItem")]);Y(ht(Zb().concat(Ub())));const Ij=Y(ht(Zb())),Fj=ci("initSize",[be("numColumns"),be("numRows")]),$j=()=>Va("markers",Ij()),Cx=()=>ci("markers",[be("backgroundMenu")].concat(Ub()).concat(Zb())),_g=t=>ci("markers",Ce(t,be)),xx=(t,s,a)=>($8(),Vs(s,s,a,Em(i=>Nt.value((...u)=>i.apply(void 0,u))))),an=t=>xx("onHandler",t,Nb(ee)),zo=t=>xx("onKeyboardHandler",t,Nb(x.none)),is=t=>xx("onHandler",t,Hi()),Rm=t=>xx("onKeyboardHandler",t,Hi()),An=(t,s)=>wr(t,Y(s)),Nm=t=>wr(t,Lt),Tg=Y(Fj),Fp=(t,s,a)=>{const i=a.toString(),u=i.indexOf(")")+1,m=i.indexOf("("),f=i.substring(m+1,u-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Bm(f.slice(0,1).concat(f.slice(3)))}),t},Bm=t=>Ce(t,s=>Jn(s,"/*")?s.substring(0,s.length-2):s),Wb=(t,s)=>{const a=t.toString(),i=a.indexOf(")")+1,u=a.indexOf("("),m=a.substring(u+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Bm(m)}),t},pT=(t,s)=>{const a=s.toString(),i=a.indexOf(")")+1,u=a.indexOf("("),m=a.substring(u+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Bm(m.slice(1))}),t},bT=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...m)=>{a=setTimeout(()=>{t.apply(null,m),a=null},s)}}},Sx=5,vT=400,wx=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?x.none():x.some(s.touches[0])},H8=(t,s)=>{const a=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return a>Sx||i>Sx},V8=t=>{const s=tn(),a=tt(!1),i=bT(C=>{t.triggerEvent(I8(),C),a.set(!0)},vT),u=C=>(wx(C).each(S=>{i.cancel();const _={x:S.clientX,y:S.clientY,target:C.target};i.schedule(C),a.set(!1),s.set(_)}),x.none()),m=C=>(i.cancel(),wx(C).each(S=>{s.on(_=>{H8(S,_)&&s.clear()})}),x.none()),f=C=>{i.cancel();const S=_=>xn(_.target,C.target);return s.get().filter(S).map(_=>a.get()?(C.prevent(),!1):t.triggerEvent(Om(),C))},p=xg([{key:hu(),value:u},{key:pd(),value:m},{key:zi(),value:f}]);return{fireIfReady:(C,S)=>Le(p,S).bind(_=>_(C))}};var yd;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(yd||(yd={}));const Ex="placeholder",Dl=Nr.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),_x=t=>Qt(t,"uiType"),z8=(t,s,a,i)=>t.exists(u=>u!==a.owner)?Dl.single(!0,Y(a)):Le(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+Yn(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},u=>u.replace()),U8=(t,s,a,i)=>_x(a)&&a.uiType===Ex?z8(t,s,a,i):Dl.single(!1,Y(a)),yT=(t,s,a,i)=>U8(t,s,a,i).fold((m,f)=>{const p=_x(a)?f(s,a.config,a.validated):f(s),b=Le(p,"components").getOr([]),C=de(b,S=>yT(t,s,S,i));return[{...p,components:C}]},(m,f)=>{if(_x(a)){const p=f(s,a.config,a.validated);return a.validated.preprocess.getOr(Lt)(p)}else return f(s)}),Z8=(t,s,a,i)=>de(a,u=>yT(t,s,u,i)),W8=(t,s)=>{let a=!1;const i=()=>a,u=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},m=()=>s.fold((f,p)=>f,(f,p)=>f);return{name:Y(t),required:m,used:i,replace:u}},kg=(t,s,a,i)=>{const u=Vn(i,(f,p)=>W8(p,f)),m=Z8(t,s,a,u);return Oo(u,f=>{if(f.used()===!1&&f.required())throw new Error("Placeholder: "+f.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),m},CT=Dl.single,Pm=Dl.multiple,Tx=Y(Ex),Ag=Nr.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),yu=J("factory",{sketch:Lt}),kx=J("schema",[]),Cd=be("name"),Og=Vs("pname","pname",Rb(t=>"<alloy."+Ie(t.name)+">"),si()),j8=wr("schema",()=>[bn("preprocess")]),jb=J("defaults",Y({})),Cu=J("overrides",Y({})),xd=ht([yu,kx,Cd,Og,jb,Cu]),G8=ht([yu,kx,Cd,jb,Cu]),Cs=ht([yu,kx,Cd,Og,jb,Cu]),Gb=ht([yu,j8,Cd,be("unit"),Og,jb,Cu]),xa=t=>t.fold(x.some,x.none,x.some,x.some),xT=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},q8=t=>t.fold(Lt,Lt,Lt,Lt),xu=(t,s)=>a=>{const i=Kr("Converting part type",s,a);return t(i)},Xo=xu(Ag.required,xd),rr=xu(Ag.external,G8),Uo=xu(Ag.optional,Cs),$p=xu(Ag.group,Gb),Ax=Y("entirety");var Ox=Object.freeze({__proto__:null,required:Xo,external:rr,optional:Uo,group:$p,asNamedPart:xa,name:xT,asCommon:q8,original:Ax});const Lp=(t,s,a,i)=>_n(s.defaults(t,a,i),a,{uid:t.partUids[s.name]},s.overrides(t,a,i)),K8=(t,s,a)=>{const i={},u={};return ze(a,m=>{m.fold(f=>{i[f.pname]=CT(!0,(p,b,C)=>f.factory.sketch(Lp(p,f,b,C)))},f=>{const p=s.parts[f.name];u[f.name]=Y(f.factory.sketch(Lp(s,f,p[Ax()]),p))},f=>{i[f.pname]=CT(!1,(p,b,C)=>f.factory.sketch(Lp(p,f,b,C)))},f=>{i[f.pname]=Pm(!0,(p,b,C)=>{const S=p[f.name];return Ce(S,_=>f.factory.sketch(_n(f.defaults(p,_,C),_,f.overrides(p,_))))})})}),{internals:Y(i),externals:Y(u)}},Dg=(t,s)=>{const a={};return ze(s,i=>{xa(i).each(u=>{const m=qb(t,u.pname);a[u.name]=f=>{const p=Kr("Part: "+u.name+" in "+t,ht(u.schema),f);return{...m,config:f,validated:p}}})}),a},qb=(t,s)=>({uiType:Tx(),owner:t,name:s}),Dx=(t,s,a)=>({uiType:Tx(),owner:t,name:s,config:a,validated:{}}),Kb=t=>de(t,s=>s.fold(x.none,x.some,x.none,x.none).map(a=>ci(a.name,a.schema.concat([Nm(Ax())]))).toArray()),Mx=t=>Ce(t,xT),Sd=(t,s,a)=>K8(t,s,a),Su=(t,s,a)=>kg(x.some(t),s,s.components,a),Mn=(t,s,a)=>{const i=s.partUids[a];return t.getSystem().getByUid(i).toOptional()},wd=(t,s,a)=>Mn(t,s,a).getOrDie("Could not find part: "+a),Rx=(t,s,a)=>{const i={},u=s.partUids,m=t.getSystem();return ze(a,f=>{i[f]=Y(m.getByUid(u[f]))}),i},Mg=(t,s)=>{const a=t.getSystem();return Vn(s.partUids,(i,u)=>Y(a.getByUid(i)))},Rg=t=>Yn(t.partUids),Nx=(t,s,a)=>{const i={},u=s.partUids,m=t.getSystem();return ze(a,f=>{i[f]=Y(m.getByUid(u[f]).getOrDie())}),i},ST=(t,s)=>{const a=Mx(s);return xg(Ce(a,i=>({key:i,value:t+"-"+i})))},Yb=t=>Vs("partUids","partUids",tx(s=>ST(s.uid,t)),si());var Y8=Object.freeze({__proto__:null,generate:Dg,generateOne:Dx,schemas:Kb,names:Mx,substitutes:Sd,components:Su,defaultUids:ST,defaultUidsSchema:Yb,getAllParts:Mg,getAllPartNames:Rg,getPart:Mn,getPartOrDie:wd,getParts:Rx,getPartsOrDie:Nx});const Xb=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],ar=(t,s,a,i=1)=>{const u=t*i,m=s*i,f=b=>Le(a,b).getOr([]),p=(b,C,S)=>{const _=gt(Xb,S);return{offset:po(b,C),classesOn:de(S,f),classesOff:de(_,f)}};return{southeast:()=>p(-t,s,["top","alignLeft"]),southwest:()=>p(t,s,["top","alignRight"]),south:()=>p(-t/2,s,["top","alignCentre"]),northeast:()=>p(-t,-s,["bottom","alignLeft"]),northwest:()=>p(t,-s,["bottom","alignRight"]),north:()=>p(-t/2,-s,["bottom","alignCentre"]),east:()=>p(t,-s/2,["valignCentre","left"]),west:()=>p(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>p(u,m,["top","alignLeft","inset"]),insetNorthwest:()=>p(-u,m,["top","alignRight","inset"]),insetNorth:()=>p(-u/2,m,["top","alignCentre","inset"]),insetSoutheast:()=>p(u,-m,["bottom","alignLeft","inset"]),insetSouthwest:()=>p(-u,-m,["bottom","alignRight","inset"]),insetSouth:()=>p(-u/2,-m,["bottom","alignCentre","inset"]),insetEast:()=>p(-u,-m/2,["valignCentre","right","inset"]),insetWest:()=>p(u,-m/2,["valignCentre","left","inset"])}},Jb=()=>ar(0,0,{}),Zs=(t,s,a,i,u,m,f,p=!1)=>({x:t,y:s,bubble:a,direction:i,placement:u,restriction:m,label:`${f}-${u}`,alwaysFit:p}),wu=Nr.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),X8=(t,s,a,i,u,m,f,p,b)=>t.fold(s,a,i,u,m,f,p,b),J8=(t,s,a,i)=>t.fold(s,s,i,i,s,i,a,a),wT=(t,s,a,i)=>t.fold(s,i,s,i,a,a,s,i),Qb=wu.southeast,Bx=wu.southwest,Px=wu.northeast,Ix=wu.northwest,Fx=wu.south,ET=wu.north,_T=wu.east,di=wu.west,Q8=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},xs=(t,s)=>cl(["left","right","top","bottom"],a=>Le(s,a).map(i=>Q8(t,i))),eP=(t,s,a)=>{const i=(b,C)=>s[b].map(S=>{const _=b==="top"||b==="bottom",A=_?a.top:a.left,I=(b==="left"||b==="top"?Math.max:Math.min)(S,C)+A;return _?vs(I,t.y,t.bottom):vs(I,t.x,t.right)}).getOr(C),u=i("left",t.x),m=i("top",t.y),f=i("right",t.right),p=i("bottom",t.bottom);return Ro(u,m,f-u,p-m)},Ed="layout",TT=t=>t.x,$x=(t,s)=>t.x+t.width/2-s.width/2,Lx=(t,s)=>t.x+t.width-s.width,Hx=(t,s)=>t.y-s.height,ev=t=>t.y+t.height,kT=(t,s)=>t.y+t.height/2-s.height/2,Hp=t=>t.x+t.width,tP=(t,s)=>t.x-s.width,Eo=(t,s,a)=>Zs(TT(t),ev(t),a.southeast(),Qb(),"southeast",xs(t,{left:1,top:3}),Ed),Po=(t,s,a)=>Zs(Lx(t,s),ev(t),a.southwest(),Bx(),"southwest",xs(t,{right:0,top:3}),Ed),Rs=(t,s,a)=>Zs(TT(t),Hx(t,s),a.northeast(),Px(),"northeast",xs(t,{left:1,bottom:2}),Ed),ls=(t,s,a)=>Zs(Lx(t,s),Hx(t,s),a.northwest(),Ix(),"northwest",xs(t,{right:0,bottom:2}),Ed),Jo=(t,s,a)=>Zs($x(t,s),Hx(t,s),a.north(),ET(),"north",xs(t,{bottom:2}),Ed),Io=(t,s,a)=>Zs($x(t,s),ev(t),a.south(),Fx(),"south",xs(t,{top:3}),Ed),tv=(t,s,a)=>Zs(Hp(t),kT(t,s),a.east(),_T(),"east",xs(t,{left:0}),Ed),Vp=(t,s,a)=>Zs(tP(t,s),kT(t,s),a.west(),di(),"west",xs(t,{right:1}),Ed),AT=()=>[Eo,Po,Rs,ls,Io,Jo,tv,Vp],OT=()=>[Po,Eo,ls,Rs,Io,Jo,tv,Vp],Vx=()=>[Rs,ls,Eo,Po,Jo,Io],Eu=()=>[ls,Rs,Po,Eo,Jo,Io],_u=()=>[Eo,Po,Rs,ls,Io,Jo],zx=()=>[Po,Eo,ls,Rs,Io,Jo],ue="data-alloy-placement",nv=(t,s)=>{vt(t,ue,s)},DT=t=>qo(t,ue),nP=t=>oo(t,ue),Ml="layout-inset",gc=t=>t.x,Ux=(t,s)=>t.x+t.width/2-s.width/2,ov=(t,s)=>t.x+t.width-s.width,sv=t=>t.y,zp=(t,s)=>t.y+t.height-s.height,MT=(t,s)=>t.y+t.height/2-s.height/2,Up=(t,s,a)=>Zs(ov(t,s),zp(t,s),a.insetSouthwest(),Ix(),"southwest",xs(t,{right:0,bottom:3}),Ml),rv=(t,s,a)=>Zs(gc(t),zp(t,s),a.insetSoutheast(),Px(),"southeast",xs(t,{left:1,bottom:3}),Ml),Ng=(t,s,a)=>Zs(ov(t,s),sv(t),a.insetNorthwest(),Bx(),"northwest",xs(t,{right:0,top:2}),Ml),Zp=(t,s,a)=>Zs(gc(t),sv(t),a.insetNortheast(),Qb(),"northeast",xs(t,{left:1,top:2}),Ml),hc=(t,s,a)=>Zs(Ux(t,s),sv(t),a.insetNorth(),Fx(),"north",xs(t,{top:2}),Ml),Wp=(t,s,a)=>Zs(Ux(t,s),zp(t,s),a.insetSouth(),ET(),"south",xs(t,{bottom:3}),Ml),RT=(t,s,a)=>Zs(ov(t,s),MT(t,s),a.insetEast(),di(),"east",xs(t,{right:0}),Ml),Zx=(t,s,a)=>Zs(gc(t),MT(t,s),a.insetWest(),_T(),"west",xs(t,{left:1}),Ml),av=t=>{switch(t){case"north":return hc;case"northeast":return Zp;case"northwest":return Ng;case"south":return Wp;case"southeast":return rv;case"southwest":return Up;case"east":return RT;case"west":return Zx}},NT=(t,s,a,i,u)=>DT(i).map(av).getOr(hc)(t,s,a,i,u),BT=t=>{switch(t){case"north":return Wp;case"northeast":return rv;case"northwest":return Up;case"south":return hc;case"southeast":return Zp;case"southwest":return Ng;case"east":return Zx;case"west":return RT}},oP=(t,s,a,i,u)=>DT(i).map(BT).getOr(hc)(t,s,a,i,u),cv=(t,s)=>{$a(t,Math.floor(s))},Wx=Y((t,s)=>{cv(t,s),Fa(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Im=Y((t,s)=>{cv(t,s)}),iv=Y((t,s)=>{zC(t,Math.floor(s))});var Tu;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Tu||(Tu={}));const lv="data-alloy-vertical-dir",sP=t=>XC(t,s=>Gr(s)&&Go(s,"data-alloy-vertical-dir")===Tu.BottomToTop);var Ir;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(Ir||(Ir={}));const mi={init:()=>Sa({readState:Y("No State required")})},Sa=t=>t,rP={can:it,abort:pn,run:ee},_d=t=>{if(!Ks(t,"can")&&!Ks(t,"abort")&&!Ks(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...rP,...t}},aP=(t,s)=>(...a)=>Fo(t,(i,u)=>i&&s(u).apply(void 0,a),!0),cP=(t,s)=>(...a)=>Fo(t,(i,u)=>i||s(u).apply(void 0,a),!1),iP=t=>Ps(t)?{can:it,abort:pn,run:t}:t,lP=t=>{const s=aP(t,u=>u.can),a=cP(t,u=>u.abort);return{can:s,abort:a,run:(...u)=>{ze(t,m=>{m.run.apply(void 0,u)})}}},qt=(t,s)=>{uv(t,t.element,s,{})},rt=(t,s,a)=>{uv(t,t.element,s,a)},Fm=t=>{qt(t,Ua())},jp=(t,s,a)=>{uv(t,s,a,{})},uv=(t,s,a,i)=>{const u={target:s,...i};t.getSystem().triggerEvent(a,s,u)},uP=(t,s,a,i)=>{const u={...i,target:s};t.getSystem().triggerEvent(a,s,u)},PT=(t,s,a,i)=>{t.getSystem().triggerEvent(a,s,i.event)},Wn=t=>xg(t),IT=(t,s)=>({key:t,value:_d({abort:s})}),dP=(t,s)=>({key:t,value:_d({can:s})}),mP=t=>({key:t,value:_d({run:(s,a)=>{a.event.prevent()}})}),me=(t,s)=>({key:t,value:_d({run:s})}),jx=(t,s,a)=>({key:t,value:_d({run:(i,u)=>{s.apply(void 0,[i,u].concat(a))}})}),fP=t=>s=>me(t,s),dv=t=>s=>({key:t,value:_d({run:(a,i)=>{md(a,i)&&s(a,i)}})}),gP=(t,s)=>me(t,(a,i)=>{a.getSystem().getByUid(s).each(u=>{PT(u,u.element,t,i)})}),Bg=(t,s,a)=>{const i=s.partUids[a];return gP(t,i)},mv=(t,s)=>me(t,(a,i)=>{const u=i.event,m=a.getSystem().getByDom(u.target).getOrThunk(()=>wp(u.target,p=>a.getSystem().getByDom(p).toOptional(),pn).getOr(a));s(a,m,i)}),Td=t=>me(t,(s,a)=>{a.cut()}),FT=t=>me(t,(s,a)=>{a.stop()}),Pg=(t,s)=>dv(t)(s),$n=dv(fc()),Wi=dv(Ol()),Gx=dv(Dm()),ku=fP(Ua()),fi=t=>({classes:Wr(t.classes)?[]:t.classes,attributes:Wr(t.attributes)?{}:t.attributes,styles:Wr(t.styles)?{}:t.styles}),qx=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),hP=(t,s,a)=>ku(i=>{a(i,t,s)}),Kx=(t,s,a)=>Gx((i,u)=>{a(i,t,s)}),pP=(t,s,a,i,u,m)=>{const f=Ha(t),p=ya(s,[aT("config",t)]);return fv(f,p,s,a,i,u,m)},$T=(t,s,a,i,u,m)=>{const f=t,p=ya(s,[Yr("config",t)]);return fv(f,p,s,a,i,u,m)},bP=(t,s,a)=>Fp((u,...m)=>{const f=[u].concat(m);return u.config({name:Y(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},p=>{const b=Array.prototype.slice.call(f,1);return s.apply(void 0,[u,p.config,p.state].concat(b))})},a,s),vP=t=>({key:t,value:void 0}),fv=(t,s,a,i,u,m,f)=>{const p=_=>Ks(_,a)?_[a]():x.none(),b=Vn(u,(_,A)=>bP(a,_,A)),S={...Vn(m,(_,A)=>Wb(_,A)),...b,revoke:vn(vP,a),config:_=>{const A=Kr(a+"-config",t,_);return{key:a,value:{config:A,me:S,configAsRaw:Js(()=>Kr(a+"-config",t,_)),initialConfig:_,state:f}}},schema:Y(s),exhibit:(_,A)=>fr(p(_),Le(i,"exhibit"),(N,I)=>I(A,N.config,N.state)).getOrThunk(()=>fi({})),name:Y(a),handlers:_=>p(_).map(A=>Le(i,"events").getOr(()=>({}))(A.config,A.state)).getOr({})};return S},Se=t=>xg(t),yP=Ha([be("fields"),be("name"),J("active",{}),J("apis",{}),J("state",mi),J("extra",{})]),Ns=t=>{const s=Kr("Creating behaviour: "+t.name,yP,t);return pP(s.fields,s.name,s.active,s.apis,s.extra,s.state)},LT=Ha([be("branchKey"),be("branches"),be("name"),J("active",{}),J("apis",{}),J("state",mi),J("extra",{})]),Ze=t=>{const s=Kr("Creating behaviour: "+t.name,LT,t);return $T(ba(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},gv=Y(void 0),HT=(t,s)=>{const a=Wn(s);return Ns({fields:[be("enabled")],name:t,active:{events:Y(a)}})},yt=(t,s)=>{const a=HT(t,s);return{key:t,value:{config:{},me:a,configAsRaw:Y({}),initialConfig:{},state:mi}}},CP=t=>({init:()=>{const a=tt(t);return{get:()=>a.get(),set:p=>a.set(p),clear:()=>a.set(t),readState:()=>a.get()}}}),VT=(t,s)=>{s.ignore||(Do(t.element),s.onFocus(t))};var SP=Object.freeze({__proto__:null,focus:VT,blur:(t,s)=>{s.ignore||lc(t.element)},isFocused:t=>yl(t.element)}),Er=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return fi(a)},events:t=>Wn([me(Al(),(s,a)=>{VT(s,t),a.stop()})].concat(t.stopMousedown?[me(Ca(),(s,a)=>{a.event.prevent()})]:[]))}),Gp=[an("onFocus"),J("stopMousedown",!1),J("ignore",!1)];const ft=Ns({fields:Gp,name:"focusing",active:Er,apis:SP}),EP=[8],Au=[9],Rl=[13],hv=[27],Xr=[32],qp=[37],Kp=[38],Yp=[39],Ig=[40],_P=(t,s,a)=>{const i=da(t.slice(0,s)),u=da(t.slice(s+1));return St(i.concat(u),a)},TP=(t,s,a)=>{const i=da(t.slice(0,s));return St(i,a)},kP=(t,s,a)=>{const i=t.slice(0,s),u=t.slice(s+1);return St(u.concat(i),a)},AP=(t,s,a)=>{const i=t.slice(s+1);return St(i,a)},nn=t=>s=>{const a=s.raw;return In(t,a.which)},pc=t=>s=>Vc(t,a=>a(s)),kd=t=>t.raw.shiftKey===!0,OP=t=>t.raw.ctrlKey===!0,Fg=_e(kd),cn=(t,s)=>({matches:t,classification:s}),DP=(t,s)=>St(t,i=>i.matches(s)).map(i=>i.classification),zT=(t,s,a,i)=>{const u=Zn(t.element,"."+s.highlightClass);ze(u,m=>{ks(i,p=>xn(p.element,m))||(Un(m,s.highlightClass),t.getSystem().getByDom(m).each(p=>{s.onDehighlight(t,p),qt(p,bx())}))})},UT=(t,s,a)=>zT(t,s,a,[]),MP=(t,s,a,i)=>{Yx(t,s,a,i)&&(Un(i.element,s.highlightClass),s.onDehighlight(t,i),qt(i,bx()))},Xp=(t,s,a,i)=>{zT(t,s,a,[i]),Yx(t,s,a,i)||(bo(i.element,s.highlightClass),s.onHighlight(t,i),qt(i,Vb()))},ZT=(t,s,a)=>{pv(t,s).each(i=>{Xp(t,s,a,i)})},RP=(t,s,a)=>{jT(t,s).each(i=>{Xp(t,s,a,i)})},NP=(t,s,a,i)=>{BP(t,s,a,i).fold(u=>{throw u},u=>{Xp(t,s,a,u)})},WT=(t,s,a,i)=>{const u=GT(t,s);St(u,i).each(f=>{Xp(t,s,a,f)})},Yx=(t,s,a,i)=>Hs(i.element,s.highlightClass),$g=(t,s,a)=>Dn(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),BP=(t,s,a,i)=>{const u=Zn(t.element,"."+s.itemClass);return x.from(u[i]).fold(()=>Nt.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},pv=(t,s,a)=>Dn(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),jT=(t,s,a)=>{const i=Zn(t.element,"."+s.itemClass);return(i.length>0?x.some(i[i.length-1]):x.none()).bind(m=>t.getSystem().getByDom(m).toOptional())},Lg=(t,s,a,i)=>{const u=Zn(t.element,"."+s.itemClass);return On(u,f=>Hs(f,s.highlightClass)).bind(f=>{const p=Bi(f,i,0,u.length-1);return t.getSystem().getByDom(u[p]).toOptional()})},PP=(t,s,a)=>Lg(t,s,a,-1),IP=(t,s,a)=>Lg(t,s,a,1),GT=(t,s,a)=>{const i=Zn(t.element,"."+s.itemClass);return Pi(Ce(i,u=>t.getSystem().getByDom(u).toOptional()))};var FP=Object.freeze({__proto__:null,dehighlightAll:UT,dehighlight:MP,highlight:Xp,highlightFirst:ZT,highlightLast:RP,highlightAt:NP,highlightBy:WT,isHighlighted:Yx,getHighlighted:$g,getFirst:pv,getLast:jT,getPrevious:PP,getNext:IP,getCandidates:GT}),$P=[be("highlightClass"),be("itemClass"),an("onHighlight"),an("onDehighlight")];const dn=Ns({fields:$P,name:"highlighting",apis:FP}),qT=(t,s,a)=>{s.exists(u=>a.exists(m=>xn(m,u)))||rt(t,vd(),{prevFocus:s,newFocus:a})},Xx=()=>{const t=a=>$s(a.element);return{get:t,set:(a,i)=>{const u=t(a);a.getSystem().triggerFocus(i,a.element);const m=t(a);qT(a,u,m)}}},LP=()=>{const t=a=>dn.getHighlighted(a).map(i=>i.element);return{get:t,set:(a,i)=>{const u=t(a);a.getSystem().getByDom(i).fold(ee,f=>{dn.highlight(a,f)});const m=t(a);qT(a,u,m)}}},$m=(t,s,a,i,u)=>{const m=()=>t.concat([J("focusManager",Xx()),ii("focusInside","onFocus",Em(C=>In(["onFocus","onEnterOrSpace","onApi"],C)?Nt.value(C):Nt.error("Invalid value for focusInside"))),An("handler",b),An("state",s),An("sendFocusIn",u)]),f=(C,S,_,A,N)=>{const I=_(C,S,A,N);return DP(I,S.event).bind(H=>H(C,S,A,N))},b={schema:m,processKey:f,toEvents:(C,S)=>{const _=C.focusInside!==yd.OnFocusMode?x.none():u(C).map(I=>me(Al(),(H,Z)=>{I(H,C,S),Z.stop()})),A=(I,H)=>{const Z=nn(Xr.concat(Rl))(H.event);C.focusInside===yd.OnEnterOrSpaceMode&&Z&&md(I,H)&&u(C).each(L=>{L(I,C,S),H.stop()})},N=[me(Ui(),(I,H)=>{f(I,H,a,C,S).fold(()=>{A(I,H)},Z=>{H.stop()})}),me(fx(),(I,H)=>{f(I,H,i,C,S).each(Z=>{H.stop()})})];return Wn(_.toArray().concat(N))}};return b},KT=t=>{const s=[bn("onEscape"),bn("onEnter"),J("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),J("firstTabstop",0),J("useTabstopAt",it),bn("visibilitySelector")].concat([t]),a=(L,j)=>{const G=L.visibilitySelector.bind(ne=>Sl(j,ne)).getOr(j);return jt(G)>0},i=(L,j)=>{const G=Zn(L.element,j.selector),ne=Pn(G,ce=>a(j,ce));return x.from(ne[j.firstTabstop])},u=(L,j)=>j.focusManager.get(L).bind(G=>Sl(G,j.selector)),m=(L,j)=>a(L,j)&&L.useTabstopAt(j),f=(L,j,G)=>{i(L,j).each(ne=>{j.focusManager.set(L,ne)})},p=(L,j,G,ne,ce)=>ce(j,G,Pe=>m(ne,Pe)).fold(()=>ne.cyclic?x.some(!0):x.none(),Pe=>(ne.focusManager.set(L,Pe),x.some(!0))),b=(L,j,G,ne)=>{const ce=Pn(Zn(L.element,G.selector),Pe=>a(G,Pe));return u(L,G).bind(Pe=>On(ce,vn(xn,Pe)).bind(ie=>p(L,ce,ie,G,ne)))},C=(L,j,G)=>{const ne=G.cyclic?_P:TP;return b(L,j,G,ne)},S=(L,j,G)=>{const ne=G.cyclic?kP:AP;return b(L,j,G,ne)},_=L=>cd(L).bind(id).exists(j=>xn(j,L)),A=(L,j,G)=>u(L,G).filter(ne=>!G.useTabstopAt(ne)).bind(ne=>(_(ne)?C:S)(L,j,G)),N=(L,j,G)=>G.onEnter.bind(ne=>ne(L,j)),I=(L,j,G)=>G.onEscape.bind(ne=>ne(L,j)),H=Y([cn(pc([kd,nn(Au)]),C),cn(nn(Au),S),cn(pc([Fg,nn(Rl)]),N)]),Z=Y([cn(nn(hv),I),cn(nn(Au),A)]);return $m(s,mi.init,H,Z,()=>x.some(f))};var HP=KT(wr("cyclic",pn)),YT=KT(wr("cyclic",it));const Hg=t=>ag("input")(t)&&Go(t,"type")!=="radio"||ag("textarea")(t),XT=(t,s,a)=>(jp(t,a,Ua()),x.some(!0)),Ad=(t,s,a)=>Hg(a)&&nn(Xr)(s.event)?x.none():XT(t,s,a),Vg=(t,s)=>x.some(!0),VP=[J("execute",Ad),J("useSpace",!1),J("useEnter",!0),J("useControlEnter",!1),J("useDown",!1)],JT=(t,s,a)=>a.execute(t,s,t.element),zP=(t,s,a,i)=>{const u=a.useSpace&&!Hg(t.element)?Xr:[],m=a.useEnter?Rl:[],f=a.useDown?Ig:[],p=u.concat(m).concat(f);return[cn(nn(p),JT)].concat(a.useControlEnter?[cn(pc([OP,nn(Rl)]),JT)]:[])},QT=(t,s,a,i)=>a.useSpace&&!Hg(t.element)?[cn(nn(Xr),Vg)]:[];var ek=$m(VP,mi.init,zP,QT,()=>x.none());const tk=()=>{const t=tn();return Sa({readState:()=>t.get().map(u=>({numRows:String(u.numRows),numColumns:String(u.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(u,m)=>{t.set({numRows:u,numColumns:m})},getNumRows:()=>t.get().map(u=>u.numRows),getNumColumns:()=>t.get().map(u=>u.numColumns)})};var UP=Object.freeze({__proto__:null,flatgrid:tk,init:t=>t.state(t)});const nk=t=>(s,a,i,u)=>{const m=t(s.element);return Jp(m,s,a,i,u)},Jx=(t,s)=>{const a=Cp(t,s);return nk(a)},Qx=(t,s)=>{const a=Cp(s,t);return nk(a)},eS=t=>(s,a,i,u)=>Jp(t,s,a,i,u),Jp=(t,s,a,i,u)=>i.focusManager.get(s).bind(f=>t(s.element,f,i,u)).map(f=>(i.focusManager.set(s,f),!0)),ok=eS,sk=eS,bv=eS,ZP=(t,s)=>On(t,s).map(a=>({index:a,candidates:t})),rk=(t,s,a)=>{const i=f=>xn(f,s),u=Zn(t,a),m=Pn(u,VC);return ZP(m,i)},ak=(t,s)=>On(t,a=>xn(s,a)),ck=(t,s,a,i)=>{const u=Math.floor(s/a),m=s%a;return i(u,m).bind(f=>{const p=f.row*a+f.column;return p>=0&&p<t.length?x.some(t[p]):x.none()})},ik=(t,s,a,i,u)=>ck(t,s,i,(m,f)=>{const b=m===a-1?t.length-m*i:i,C=Bi(f,u,0,b-1);return x.some({row:m,column:C})}),lk=(t,s,a,i,u)=>ck(t,s,i,(m,f)=>{const p=Bi(m,u,0,a-1),C=p===a-1?t.length-p*i:i,S=vs(f,0,C-1);return x.some({row:p,column:S})}),WP=(t,s,a,i)=>ik(t,s,a,i,1),jP=(t,s,a,i)=>ik(t,s,a,i,-1),GP=(t,s,a,i)=>lk(t,s,a,i,-1),uk=(t,s,a,i)=>lk(t,s,a,i,1),qP=[be("selector"),J("execute",Ad),zo("onEscape"),J("captureTab",!1),Tg()],KP=(t,s,a)=>{Dn(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},YP=(t,s)=>s.focusManager.get(t).bind(a=>Sl(a,s.selector)),XP=(t,s,a,i)=>YP(t,a).bind(u=>a.execute(t,s,u)),Qp=t=>(s,a,i,u)=>rk(s,a,i.selector).bind(m=>t(m.candidates,m.index,u.getNumRows().getOr(i.initSize.numRows),u.getNumColumns().getOr(i.initSize.numColumns))),dk=(t,s,a)=>a.captureTab?x.some(!0):x.none(),JP=(t,s,a)=>a.onEscape(t,s),mk=Qp(jP),fk=Qp(WP),QP=Qp(GP),gk=Qp(uk),e7=Y([cn(nn(qp),Jx(mk,fk)),cn(nn(Yp),Qx(mk,fk)),cn(nn(Kp),ok(QP)),cn(nn(Ig),sk(gk)),cn(pc([kd,nn(Au)]),dk),cn(pc([Fg,nn(Au)]),dk),cn(nn(Xr.concat(Rl)),XP)]),t7=Y([cn(nn(hv),JP),cn(nn(Xr),Vg)]);var n7=$m(qP,tk,e7,t7,()=>x.some(KP));const tS=(t,s,a,i,u)=>{const m=p=>ac(p)==="button"&&Go(p,"disabled")==="disabled",f=(p,b,C)=>u(p,b,i,0,C.length-1,C[b],S=>m(C[S])?f(p,S,C):x.from(C[S]));return rk(t,a,s).bind(p=>{const b=p.index,C=p.candidates;return f(b,b,C)})},vv=(t,s,a,i)=>tS(t,s,a,i,(u,m,f,p,b,C,S)=>{const _=vs(m+f,p,b);return _===u?x.from(C):S(_)}),yv=(t,s,a,i)=>tS(t,s,a,i,(u,m,f,p,b,C,S)=>{const _=Bi(m,f,p,b);return _===u?x.none():S(_)}),o7=[be("selector"),J("getInitial",x.none),J("execute",Ad),zo("onEscape"),J("executeOnMove",!1),J("allowVertical",!0),J("allowHorizontal",!0),J("cycles",!0)],s7=(t,s)=>s.focusManager.get(t).bind(a=>Sl(a,s.selector)),zg=(t,s,a)=>s7(t,a).bind(i=>a.execute(t,s,i)),r7=(t,s,a)=>{s.getInitial(t).orThunk(()=>Dn(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},nS=(t,s,a)=>(a.cycles?yv:vv)(t,a.selector,s,-1),oS=(t,s,a)=>(a.cycles?yv:vv)(t,a.selector,s,1),sS=t=>(s,a,i,u)=>t(s,a,i,u).bind(()=>i.executeOnMove?zg(s,a,i):x.some(!0)),hk=(t,s,a)=>a.onEscape(t,s),pk=(t,s,a,i)=>{const u=[...a.allowHorizontal?qp:[]].concat(a.allowVertical?Kp:[]),m=[...a.allowHorizontal?Yp:[]].concat(a.allowVertical?Ig:[]);return[cn(nn(u),sS(Jx(nS,oS))),cn(nn(m),sS(Qx(nS,oS))),cn(nn(Rl),zg),cn(nn(Xr),zg)]},a7=Y([cn(nn(Xr),Vg),cn(nn(hv),hk)]);var c7=$m(o7,mi.init,pk,a7,()=>x.some(r7));const Cv=(t,s,a)=>x.from(t[s]).bind(i=>x.from(i[a]).map(u=>({rowIndex:s,columnIndex:a,cell:u}))),bk=(t,s,a,i)=>{const m=t[s].length,f=Bi(a,i,0,m-1);return Cv(t,s,f)},vk=(t,s,a,i)=>{const u=Bi(a,i,0,t.length-1),m=t[u].length,f=vs(s,0,m-1);return Cv(t,u,f)},Od=(t,s,a,i)=>{const m=t[s].length,f=vs(a+i,0,m-1);return Cv(t,s,f)},yk=(t,s,a,i)=>{const u=vs(a+i,0,t.length-1),m=t[u].length,f=vs(s,0,m-1);return Cv(t,u,f)},i7=(t,s,a)=>bk(t,s,a,1),l7=(t,s,a)=>bk(t,s,a,-1),u7=(t,s,a)=>vk(t,a,s,-1),Ck=(t,s,a)=>vk(t,a,s,1),d7=(t,s,a)=>Od(t,s,a,-1),m7=(t,s,a)=>Od(t,s,a,1),xk=(t,s,a)=>yk(t,a,s,-1),e1=(t,s,a)=>yk(t,a,s,1),t1=[ci("selectors",[be("row"),be("cell")]),J("cycles",!0),J("previousSelector",x.none),J("execute",Ad)],f7=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const u=s.selectors;return Dn(t.element,u.cell)}).each(u=>{s.focusManager.set(t,u)})},rS=(t,s,a)=>$s(t.element).bind(i=>a.execute(t,s,i)),g7=(t,s)=>Ce(t,a=>Zn(a,s.selectors.cell)),n1=(t,s)=>(a,i,u)=>{const m=u.cycles?t:s;return Sl(i,u.selectors.row).bind(f=>{const p=Zn(f,u.selectors.cell);return ak(p,i).bind(b=>{const C=Zn(a,u.selectors.row);return ak(C,f).bind(S=>{const _=g7(C,u);return m(_,S,b).map(A=>A.cell)})})})},aS=n1(l7,d7),cS=n1(i7,m7),h7=n1(u7,xk),p7=n1(Ck,e1),b7=Y([cn(nn(qp),Jx(aS,cS)),cn(nn(Yp),Qx(aS,cS)),cn(nn(Kp),ok(h7)),cn(nn(Ig),sk(p7)),cn(nn(Xr.concat(Rl)),rS)]),Ug=Y([cn(nn(Xr),Vg)]);var Lm=$m(t1,mi.init,b7,Ug,()=>x.some(f7));const xv=[be("selector"),J("execute",Ad),J("moveOnTab",!1)],Zg=(t,s,a)=>a.focusManager.get(t).bind(i=>a.execute(t,s,i)),v7=(t,s,a)=>{Dn(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},Ou=(t,s,a)=>yv(t,a.selector,s,-1),ji=(t,s,a)=>yv(t,a.selector,s,1),iS=(t,s,a,i)=>a.moveOnTab?bv(Ou)(t,s,a,i):x.none(),Sk=(t,s,a,i)=>a.moveOnTab?bv(ji)(t,s,a,i):x.none(),y7=Y([cn(nn(Kp),bv(Ou)),cn(nn(Ig),bv(ji)),cn(pc([kd,nn(Au)]),iS),cn(pc([Fg,nn(Au)]),Sk),cn(nn(Rl),Zg),cn(nn(Xr),Zg)]),wk=Y([cn(nn(Xr),Vg)]);var o1=$m(xv,mi.init,y7,wk,()=>x.some(v7));const s1=[zo("onSpace"),zo("onEnter"),zo("onShiftEnter"),zo("onLeft"),zo("onRight"),zo("onTab"),zo("onShiftTab"),zo("onUp"),zo("onDown"),zo("onEscape"),J("stopSpaceKeyup",!1),bn("focusIn")],lS=(t,s,a)=>[cn(nn(Xr),a.onSpace),cn(pc([Fg,nn(Rl)]),a.onEnter),cn(pc([kd,nn(Rl)]),a.onShiftEnter),cn(pc([kd,nn(Au)]),a.onShiftTab),cn(pc([Fg,nn(Au)]),a.onTab),cn(nn(Kp),a.onUp),cn(nn(Ig),a.onDown),cn(nn(qp),a.onLeft),cn(nn(Yp),a.onRight),cn(nn(Xr),a.onSpace)],Ek=(t,s,a)=>[...a.stopSpaceKeyup?[cn(nn(Xr),Vg)]:[],cn(nn(hv),a.onEscape)];var r1=$m(s1,mi.init,lS,Ek,t=>t.focusIn);const Sv=HP.schema(),C7=YT.schema(),uS=c7.schema(),wv=n7.schema(),x7=Lm.schema(),Nl=ek.schema(),_k=o1.schema(),dS=r1.schema();var Wg=Object.freeze({__proto__:null,acyclic:Sv,cyclic:C7,flow:uS,flatgrid:wv,matrix:x7,execution:Nl,menu:_k,special:dS});const Tk=t=>Ks(t,"setGridSize"),Ke=Ze({branchKey:"mode",branches:Wg,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,a)})},setGridSize:(t,s,a,i,u)=>{Tk(a)?a.setGridSize(i,u):console.error("Layout does not support setGridSize")}},state:UP}),Ev=Ie("alloy-premade"),mS=t=>(Object.defineProperty(t.element.dom,Ev,{value:t.uid,writable:!0}),Tm(Ev,t)),kk=t=>Qt(t.dom,Ev),Ak=t=>Le(t,Ev),jg=t=>pT((s,...a)=>t(s.getApis(),s,...a),t),gi=t=>t.getSystem().isConnected(),a1=t=>{qt(t,Ol());const s=t.components();ze(s,a1)},c1=t=>{const s=t.components();ze(s,c1),qt(t,fc())},fS=(t,s)=>{t.getSystem().addToWorld(s),wo(t.element)&&c1(s)},_v=t=>{a1(t),t.getSystem().removeFromWorld(t)},gS=(t,s)=>{qr(t.element,s.element)},S7=t=>{ze(t.components(),s=>Qc(s.element)),bm(t.element),t.syncComponents()},w7=(t,s,a)=>{const i=t.components();S7(t);const u=a(s),m=gt(i,u);ze(m,f=>{a1(f),t.getSystem().removeFromWorld(f)}),ze(u,f=>{gi(f)?gS(t,f):(t.getSystem().addToWorld(f),gS(t,f),wo(t.element)&&c1(f))}),t.syncComponents()},bc=(t,s,a)=>{const i=t.components(),u=de(s,p=>Ak(p).toArray());ze(i,p=>{In(u,p)||_v(p)});const m=a(s),f=gt(i,m);ze(f,p=>{gi(p)&&_v(p)}),ze(m,p=>{gi(p)||fS(t,p)}),t.syncComponents()},hi=(t,s)=>{hS(t,s,qr)},hS=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),wo(t.element)&&c1(s),t.syncComponents()},Hm=t=>{a1(t),Qc(t.element),t.getSystem().removeFromWorld(t)},Qo=t=>{const s=br(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());Hm(t),s.each(a=>{a.syncComponents()})},Jr=t=>{const s=t.components();ze(s,Hm),bm(t.element),t.syncComponents()},Ws=(t,s)=>{Tv(t,s,qr)},wa=(t,s)=>{Tv(t,s,lb)},Tv=(t,s,a)=>{a(t,s.element);const i=tr(s.element);ze(i,u=>{s.getByDom(u).each(c1)})},vc=t=>{const s=tr(t.element);ze(s,a=>{t.getByDom(a).each(a1)}),Qc(t.element)},Vm=(t,s,a)=>Yc(t,s).map(u=>{if(a.exists(f=>!xn(f,u))){const f=a.map(ac).getOr("span"),p=Ne.fromTag(f);return pm(u,p),p}else return u}),Ok=(t,s,a)=>{a.fold(()=>qr(t,s),i=>{xn(i,s)||(pm(i,s),Qc(i))})},Dk=(t,s,a)=>{const i=Ce(s,a),u=tr(t);return ze(u.slice(i.length),Qc),i},Mk=(t,s,a,i)=>{const u=Yc(t,s),m=i(a,u),f=Vm(t,s,u);return Ok(t,m.element,f),m},Rk=(t,s,a)=>Dk(t,s,(i,u)=>Mk(t,u,i,a)),Nk=(t,s)=>Dk(t,s,(a,i)=>{const u=Yc(t,i);return Ok(t,a,u),a}),Gg=(t,s)=>{const a=rs(s),i=Jc(a).bind(m=>{const f=p=>xn(m,p);return f(s)?x.some(s):qB(s,f)}),u=t(s);return i.each(m=>{Jc(a).filter(f=>xn(f,m)).fold(()=>{Do(m)},ee)}),u},pS=(t,s)=>{Gg(()=>{w7(t,s,()=>Ce(s,t.getSystem().build))},t.element)},Bk=(t,s)=>{Gg(()=>{bc(t,s,()=>Rk(t.element,s,t.getSystem().buildOrPatch))},t.element)},E7=(t,s,a,i)=>{_v(s);const u=Mk(t.element,a,i,t.getSystem().buildOrPatch);fS(t,u),t.syncComponents()},bS=(t,s,a)=>{const i=t.getSystem().build(a);hS(t,i,s)},_7=(t,s,a,i)=>{Qo(s),bS(t,(u,m)=>HC(u,m,a),i)},Pk=(t,s,a,i)=>(s.reuseDom?Bk:pS)(t,i),Ik=(t,s,a,i)=>{bS(t,qr,i)},vS=(t,s,a,i)=>{bS(t,LC,i)},Fk=(t,s,a,i)=>{const u=kv(t);St(u,f=>xn(i.element,f.element)).each(Qo)},kv=(t,s)=>t.components(),$k=(t,s,a,i,u)=>{const m=kv(t);return x.from(m[i]).map(f=>(u.fold(()=>Qo(f),p=>{(s.reuseDom?E7:_7)(t,f,i,p)}),f))};var T7=Object.freeze({__proto__:null,append:Ik,prepend:vS,remove:Fk,replaceAt:$k,replaceBy:(t,s,a,i,u)=>{const m=kv(t);return On(m,i).bind(f=>$k(t,s,a,f,u))},set:Pk,contents:kv});const Et=Ns({fields:[zs("reuseDom",!0)],name:"replacing",apis:T7}),k7=(t,s,a)=>xn(s,t.element)&&!xn(s,a),yc=Wn([dP(Al(),(t,s)=>{const a=s.event,i=a.originator,u=a.target;return k7(t,i,u)?(console.warn(Al()+` did not get interpreted by the desired target. 
Originator: `+wn(i)+`
Target: `+wn(u)+`
Check the `+Al()+" event handlers"),!1):!0})]);var Uj=Object.freeze({__proto__:null,events:yc});const Av=Y("alloy-id-"),zm=Y("data-alloy-id"),yS=Av(),Ov=zm(),A7=(t,s)=>{const a=Ie(yS+t);return CS(s,a),a},CS=(t,s)=>{Object.defineProperty(t.dom,Ov,{value:s,writable:!0})},i1=t=>{const s=Gr(t)?t.dom[Ov]:null;return x.from(s)},qg=t=>Ie(t),Lk=Lt,Du=t=>{const s=u=>`The component must be in a context to execute: ${u}`+(t?`
`+wn(t().element)+" is not in context.":""),a=u=>()=>{throw new Error(s(u))},i=u=>()=>{console.warn(s(u))};return{debugInfo:Y("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:pn}},l1=Du(),O7=(t,s)=>{const a=Ce(s,u=>ya(u.name(),[be("config"),J("state",mi)])),i=io("component.behaviours",ht(a),t.behaviours).fold(u=>{throw new Error(_m(u)+`
Complete spec:
`+JSON.stringify(t,null,2))},Lt);return{list:s,data:Vn(i,u=>{const m=u.map(f=>({config:f.config,state:f.state.init(f.config)}));return Y(m)})}},D7=t=>t.list,Hk=t=>t.data,Dv=(t,s)=>{const a={};return Oo(t,(i,u)=>{Oo(i,(m,f)=>{const p=Le(a,f).getOr([]);a[f]=p.concat([s(u,m)])})}),a},xS=(t,s,a,i)=>{const u={...s};ze(a,S=>{u[S.name()]=S.exhibit(t,i)});const m=Dv(u,(S,_)=>({name:S,modification:_})),f=S=>As(S,(_,A)=>({...A.modification,..._}),{}),p=As(m.classes,(S,_)=>_.modification.concat(S),[]),b=f(m.attributes),C=f(m.styles);return fi({classes:p,attributes:b,styles:C})},SS=(t,s,a,i)=>{try{const u=em(a,(m,f)=>{const p=m[s],b=f[s],C=i.indexOf(p),S=i.indexOf(b);if(C===-1)throw new Error("The ordering for "+t+" does not have an entry for "+p+`.
Order specified: `+JSON.stringify(i,null,2));if(S===-1)throw new Error("The ordering for "+t+" does not have an entry for "+b+`.
Order specified: `+JSON.stringify(i,null,2));return C<S?-1:S<C?1:0});return Nt.value(u)}catch(u){return Nt.error([u])}},Mv=(t,s)=>({handler:t,purpose:s}),wS=(t,s)=>({cHandler:t,purpose:s}),Vk=(t,s)=>wS(vn.apply(void 0,[t.handler].concat(s)),t.purpose),Um=t=>t.cHandler,ES=(t,s)=>({name:t,handler:s}),M7=(t,s)=>{const a={};return ze(t,i=>{a[i.name()]=i.handlers(s)}),a},zk=(t,s,a)=>{const i={...a,...M7(s,t)};return Dv(i,ES)},R7=(t,s,a,i)=>{const u=zk(t,a,i);return TS(u,s)},Uk=t=>{const s=iP(t);return(a,i,...u)=>{const m=[a,i].concat(u);s.abort.apply(void 0,m)?i.stop():s.can.apply(void 0,m)&&s.run.apply(void 0,m)}},_S=(t,s)=>Nt.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Ce(s,a=>a.name),null,2)]),Kg=(t,s,a)=>{const i=s[a];return i?SS("Event: "+a,"name",t,i).map(u=>{const m=Ce(u,f=>f.handler);return lP(m)}):_S(a,t)},TS=(t,s)=>{const a=Ni(t,(i,u)=>(i.length===1?Nt.value(i[0].handler):Kg(i,s,u)).map(f=>{const p=Uk(f),b=i.length>1?Pn(s[u],C=>ks(i,S=>S.name===C)).join(" > "):i[0].name;return Tm(u,Mv(p,b))}));return N8(a,{})},Zm="alloy.base.behaviour",N7=ht([Vs("dom","dom",Hi(),ht([be("tag"),J("styles",{}),J("classes",[]),J("attributes",{}),bn("value"),bn("innerHtml")])),be("components"),be("uid"),J("events",{}),J("apis",{}),Vs("eventOrder","eventOrder",nx({[Ua()]:["disabling",Zm,"toggling","typeaheadevents"],[Al()]:[Zm,"focusing","keying"],[Dm()]:[Zm,"disabling","toggling","representing","tooltipping"],[pu()]:[Zm,"representing","streaming","invalidating"],[Ol()]:[Zm,"representing","item-events","toolbar-button-events","tooltipping"],[Ca()]:["focusing",Zm,"item-type-events"],[hu()]:["focusing",Zm,"item-type-events"],[ui()]:["item-type-events","tooltipping"],[Am()]:["receiving","reflecting","tooltipping"]}),si()),bn("domModification")]),Zk=t=>io("custom.definition",N7,t),Dd=t=>({...t.dom,uid:t.uid,domChildren:Ce(t.components,s=>s.element)}),kS=t=>t.domModification.fold(()=>fi({}),fi),AS=t=>t.events,u1=(t,s)=>{const a=Yn(t),i=Yn(s),u=gt(i,a),m=ps(t,(f,p)=>!Qt(s,p)||f!==s[p]).t;return{toRemove:u,toSet:m}},Wk=(t,s)=>{const{class:a,style:i,...u}=mb(s),{toSet:m,toRemove:f}=u1(t.attributes,u),p=()=>{ze(f,G=>oo(s,G)),db(s,m)},b=W(s),{toSet:C,toRemove:S}=u1(t.styles,b),_=()=>{ze(S,G=>Me(s,G)),Fa(s,C)},A=fu(s),N=gt(A,t.classes),I=gt(t.classes,A),H=()=>{ym(s,I),La(s,N)},Z=G=>{ld(s,G)},L=()=>{const G=t.domChildren;Nk(s,G)},j=()=>{const G=s,ne=t.value.getOrUndefined();ne!==ni(G)&&Cm(G,ne??"")};return p(),H(),_(),t.innerHtml.fold(L,Z),j(),s},Rv=t=>{const s=Ne.fromTag(t.tag);db(s,t.attributes),ym(s,t.classes),Fa(s,t.styles),t.innerHtml.each(i=>ld(s,i));const a=t.domChildren;return dg(s,a),t.value.each(i=>{Cm(s,i)}),s},OS=(t,s)=>{try{const a=Wk(t,s);return x.some(a)}catch{return x.none()}},B7=t=>t.innerHtml.isSome()&&t.domChildren.length>0,P7=(t,s)=>{const a=u=>ac(u)===t.tag&&!B7(t)&&!kk(u),i=s.filter(a).bind(u=>OS(t,u)).getOrThunk(()=>Rv(t));return CS(i,t.uid),i},Bl=t=>{const s=Le(t,"behaviours").getOr({});return de(Yn(s),a=>{const i=s[a];return Qn(i)?[i.me]:[]})},I7=(t,s)=>O7(t,s),F7=t=>{const s=Bl(t);return I7(t,s)},Cc=(t,s,a)=>{const i=Dd(t),u=kS(t),m={"alloy.base.modification":u},f=s.length>0?xS(a,m,s,i):u;return qx(i,f)},Ss=(t,s,a)=>{const i={"alloy.base.behaviour":AS(t)};return R7(a,t.eventOrder,s,i).getOrDie()},$7=(t,s)=>{const a=()=>G,i=tt(l1),u=mc(Zk(t)),m=F7(t),f=D7(m),p=Hk(m),b=Cc(u,f,p),C=P7(b,s),S=Ss(u,f,p),_=tt(u.components),A=ne=>{i.set(ne)},N=()=>{i.set(Du(a))},I=()=>{const ne=tr(C),ce=de(ne,Pe=>i.get().getByDom(Pe).fold(()=>[],hs));_.set(ce)},H=ne=>{const ce=p;return(Ps(ce[ne.name()])?ce[ne.name()]:()=>{throw new Error("Could not find "+ne.name()+" in "+JSON.stringify(t,null,2))})()},Z=ne=>Ps(p[ne.name()]),L=()=>u.apis,j=ne=>p[ne]().map(ce=>ce.state.readState()).getOr("not enabled"),G={uid:t.uid,getSystem:i.get,config:H,hasConfigured:Z,spec:t,readState:j,getApis:L,connect:A,disconnect:N,element:C,syncComponents:I,components:_.get,events:S};return G},DS=(t,s)=>{const a=Le(t,"components").getOr([]);return s.fold(()=>Ce(a,cr),i=>Ce(a,(u,m)=>Bv(u,Yc(i,m))))},L7=(t,s)=>{const{events:a,...i}=Lk(t),u=DS(i,s),m={...i,events:{...Uj,...a},components:u};return Nt.value($7(m,s))},Hn=t=>{const s=Ne.fromText(t);return Nv({element:s})},Nv=t=>{const s=Kr("external.component",Ha([be("element"),bn("uid")]),t),a=tt(Du()),i=p=>{a.set(p)},u=()=>{a.set(Du(()=>f))},m=s.uid.getOrThunk(()=>qg("external"));CS(s.element,m);const f={uid:m,getSystem:a.get,config:x.none,hasConfigured:pn,connect:i,disconnect:u,getApis:()=>({}),element:s.element,spec:t,readState:Y("No state"),syncComponents:ee,components:Y([]),events:{}};return mS(f)},Yg=qg,jk=t=>Qt(t,"uid"),Bv=(t,s)=>Ak(t).getOrThunk(()=>{const a=jk(t)?t:{uid:Yg(""),...t};return L7(a,s).getOrDie()}),cr=t=>Bv(t,x.none()),Za=mS;var z7=Object.freeze({__proto__:null,block:(t,s,a,i)=>{vt(t.element,"aria-busy",!0);const u=s.getRoot(t).getOr(t),m=Se([Ke.config({mode:"special",onTab:()=>x.some(!0),onShiftTab:()=>x.some(!0)}),ft.config({})]),f=i(u,m),p=u.getSystem().build(f);Et.append(u,Za(p)),p.hasConfigured(Ke)&&s.focus&&Ke.focusIn(p),a.isBlocked()||s.onBlock(t),a.blockWith(()=>Et.remove(u,p))},unblock:(t,s,a)=>{oo(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),Gk=[Ln("getRoot",x.none),zs("focus",!0),an("onBlock"),an("onUnblock")],qk=Object.freeze({__proto__:null,init:()=>{const t=Z0(),s=a=>{t.set({destroy:a})};return Sa({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const pi=Ns({fields:Gk,name:"blocking",apis:z7,state:qk});var Kk=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const Wm=[be("find")],Kt=Ns({fields:Wm,name:"composing",apis:Kk});var Z7=Object.freeze({__proto__:null,getCoupled:(t,s,a,i)=>a.getOrCreate(t,s,i),getExistingCoupled:(t,s,a,i)=>a.getExisting(t,s,i)}),W7=[Va("others",nT(Nt.value,si()))],G7=Object.freeze({__proto__:null,init:()=>{const t={},s=(m,f)=>{if(Yn(m.others).length===0)throw new Error("Cannot find any known coupled components");return Le(t,f)},a=(m,f,p)=>s(f,p).getOrThunk(()=>{const C=Le(f.others,p).getOrDie("No information found for coupled component: "+p)(m),S=m.getSystem().build(C);return t[p]=S,S}),i=(m,f,p)=>s(f,p).orThunk(()=>(Le(f.others,p).getOrDie("No information found for coupled component: "+p),x.none())),u=Y({});return Sa({readState:u,getExisting:i,getOrCreate:a})}});const lo=Ns({fields:W7,name:"coupling",apis:Z7,state:G7}),q7=["input","button","textarea","select"],Yk=(t,s,a)=>{(s.disabled()?RS:NS)(t,s)},Pv=(t,s)=>s.useNative===!0&&In(q7,ac(t.element)),d1=t=>bp(t.element,"disabled"),Xk=t=>{vt(t.element,"disabled","disabled")},Jk=t=>{oo(t.element,"disabled")},K7=t=>Go(t.element,"aria-disabled")==="true",Qk=t=>{vt(t.element,"aria-disabled","true")},eA=t=>{vt(t.element,"aria-disabled","false")},RS=(t,s,a)=>{s.disableClass.each(u=>{bo(t.element,u)}),(Pv(t,s)?Xk:Qk)(t),s.onDisabled(t)},NS=(t,s,a)=>{s.disableClass.each(u=>{Un(t.element,u)}),(Pv(t,s)?Jk:eA)(t),s.onEnabled(t)},tA=(t,s)=>Pv(t,s)?d1(t):K7(t);var Y7=Object.freeze({__proto__:null,enable:NS,disable:RS,isDisabled:tA,onLoad:Yk,set:(t,s,a,i)=>{(i?RS:NS)(t,s)}}),PS=Object.freeze({__proto__:null,exhibit:(t,s)=>fi({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Wn([IT(Ua(),(a,i)=>tA(a,t)),Kx(t,s,Yk)])}),X7=[Ln("disabled",pn),J("useNative",!0),bn("disableClass"),an("onDisabled"),an("onEnabled")];const Xe=Ns({fields:X7,name:"disabling",active:PS,apis:Y7}),xc=(t,s,a,i,u)=>{const m=f=>f+"px";return{position:t,left:s.map(m),top:a.map(m),right:i.map(m),bottom:u.map(m)}},J7=t=>({...t,position:x.some(t.position)}),nA=(t,s)=>{v(t,J7(s))},Sc=(t,s)=>{const a=t.element;bo(a,s.transitionClass),Un(a,s.fadeOutClass),bo(a,s.fadeInClass),s.onShow(t)},oA=(t,s)=>{const a=t.element;bo(a,s.transitionClass),Un(a,s.fadeInClass),bo(a,s.fadeOutClass),s.onHide(t)},Q7=(t,s)=>t.y<s.bottom&&t.bottom>s.y,eI=(t,s)=>t.y>=s.y,tI=(t,s)=>t.bottom<=s.bottom,IS=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),Iv=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),FS=t=>t.box.x-t.win.x,nI=(t,s,a)=>{const i=s.win,u=s.box,m=FS(s);return Xt(t,f=>{switch(f){case"bottom":return tI(u,a.bounds)?x.none():x.some(Iv(i,m,a));case"top":return eI(u,a.bounds)?x.none():x.some(IS(i,m,a));default:return x.none()}}).getOr({location:"no-dock"})},oI=(t,s,a)=>Vc(t,i=>{switch(i){case"bottom":return tI(s,a.bounds);case"top":return eI(s,a.bounds)}}),sI=(t,s)=>{const a=s.optScrollEnv.fold(Y(t.bounds.y),i=>i.scrollElmTop+(t.bounds.y-i.currentScrollTop));return po(t.bounds.x,a)},rI=(t,s)=>{const a=s.optScrollEnv.fold(Y(t.y),i=>t.y+i.currentScrollTop-i.scrollElmTop);return po(t.x,a)},Md=(t,s,a)=>a.getInitialPos().map(i=>{const u=sI(i,s);return{box:Ro(u.left,u.top,Yo(t),jt(t)),location:i.location}}),Fv=(t,s,a,i,u)=>{const m=rI(s,a),f=Ro(m.left,m.top,s.width,s.height);i.setInitialPos({style:W(t),position:E(t,"position")||"static",bounds:f,location:u.location})},aI=(t,s,a,i,u)=>{i.getInitialPos().fold(()=>Fv(t,s,a,i,u),()=>ee)},$v=(t,s,a)=>a.getInitialPos().bind(i=>{var u;switch(a.clearInitialPos(),i.position){case"static":return x.some({morph:"static"});case"absolute":const m=yg(t).getOr(Cr()),f=Ms(m),p=(u=m.dom.scrollTop)!==null&&u!==void 0?u:0;return x.some({morph:"absolute",positionCss:xc("absolute",Le(i.style,"left").map(b=>s.x-f.x),Le(i.style,"top").map(b=>s.y-f.y+p),Le(i.style,"right").map(b=>f.right-s.right),Le(i.style,"bottom").map(b=>f.bottom-s.bottom))});default:return x.none()}}),Lv=(t,s,a)=>Md(t,s,a).filter(({box:i})=>oI(a.getModes(),i,s)).bind(({box:i})=>$v(t,i,a)),m1=t=>{switch(t.location){case"top":return x.some({morph:"fixed",positionCss:xc("fixed",x.some(t.leftX),x.some(t.topY),x.none(),x.none())});case"bottom":return x.some({morph:"fixed",positionCss:xc("fixed",x.some(t.leftX),x.none(),x.none(),x.some(t.bottomY))});default:return x.none()}},cI=(t,s,a)=>{const i=Ms(t),u=or(),m=nI(a.getModes(),{win:u,box:i},s);return m.location==="top"||m.location==="bottom"?(Fv(t,i,s,a,m),m1(m)):x.none()},iI=(t,s,a)=>Lv(t,s,a).orThunk(()=>s.optScrollEnv.bind(i=>Md(t,s,a)).bind(({box:i,location:u})=>{const m=or(),f=FS({win:m,box:i}),p=u==="top"?IS(m,f,s):Iv(m,f,s);return m1(p)})),lI=(t,s,a)=>{const i=t.element;return jr($(i,"position"),"fixed")?iI(i,s,a):cI(i,s,a)},uI=(t,s,a)=>{const i=t.element;return Md(i,s,a).bind(({box:u})=>$v(i,u,a))},dI=(t,s,a,i)=>{const u=Ms(t),m=or(),f=FS({win:m,box:u}),p=i(m,f,s);return p.location==="bottom"||p.location==="top"?(aI(t,u,s,a,p),m1(p)):x.none()},sA=(t,s,a)=>{a.setDocked(!1),ze(["left","right","top","bottom","position"],i=>Me(t.element,i)),s.onUndocked(t)},$S=(t,s,a,i)=>{const u=i.position==="fixed";a.setDocked(u),nA(t.element,i),(u?s.onDocked:s.onUndocked)(t)},LS=(t,s,a,i,u=!1)=>{s.contextual.each(m=>{m.lazyContext(t).each(f=>{const p=Q7(f,i.bounds);p!==a.isVisible()&&(a.setVisible(p),u&&!p?(ym(t.element,[m.fadeOutClass]),m.onHide(t)):(p?Sc:oA)(t,m))})})},f1=(t,s,a,i,u)=>{LS(t,s,a,i,!0),$S(t,s,a,u.positionCss)},mI=(t,s,a,i,u)=>{switch(u.morph){case"static":return sA(t,s,a);case"absolute":return $S(t,s,a,u.positionCss);case"fixed":return f1(t,s,a,i,u)}},fI=(t,s,a)=>{const i=s.lazyViewport(t);LS(t,s,a,i),lI(t,i,a).each(u=>{mI(t,s,a,i,u)})},gI=(t,s,a)=>{const i=t.element;a.setDocked(!1);const u=s.lazyViewport(t);uI(t,u,a).each(m=>{switch(m.morph){case"static":{sA(t,s,a);break}case"absolute":{$S(t,s,a,m.positionCss);break}}}),a.setVisible(!0),s.contextual.each(m=>{La(i,[m.fadeInClass,m.fadeOutClass,m.transitionClass]),m.onShow(t)}),Hv(t,s,a)},Hv=(t,s,a)=>{t.getSystem().isConnected()&&fI(t,s,a)},jm=(t,s,a)=>{a.isDocked()&&gI(t,s,a)},Vv=t=>(s,a,i)=>{const u=a.lazyViewport(s);dI(s.element,u,i,t).each(f=>{f1(s,a,i,u,f)})},hI=Vv(IS),HS=Vv(Iv);var pI=Object.freeze({__proto__:null,refresh:Hv,reset:jm,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,i)=>a.setModes(i),forceDockToTop:hI,forceDockToBottom:HS}),zv=Object.freeze({__proto__:null,events:(t,s)=>Wn([Pg(Sg(),(a,i)=>{t.contextual.each(u=>{Hs(a.element,u.transitionClass)&&(La(a.element,[u.transitionClass,u.fadeInClass]),(s.isVisible()?u.onShown:u.onHidden)(a)),i.stop()})}),me(hx(),(a,i)=>{Hv(a,t,s)}),me(Mm(),(a,i)=>{Hv(a,t,s)}),me(Zi(),(a,i)=>{jm(a,t,s)})])}),VS=[ya("contextual",[cs("fadeInClass"),cs("fadeOutClass"),cs("transitionClass"),ai("lazyContext"),an("onShow"),an("onShown"),an("onHide"),an("onHidden")]),Ln("lazyViewport",()=>({bounds:or(),optScrollEnv:x.none()})),hd("modes",["top","bottom"],Vo),an("onDocked"),an("onUndocked")],rA=Object.freeze({__proto__:null,init:t=>{const s=tt(!1),a=tt(!0),i=tn(),u=tt(t.modes),m=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${u.get().join(",")}`;return Sa({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:u.get,setModes:u.set,readState:m})}});const jn=Ns({fields:VS,name:"docking",active:zv,apis:pI,state:rA}),g1=Nr.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),Uv=t=>s=>s.translate(-t.left,-t.top),h1=t=>s=>s.translate(t.left,t.top),Mu=t=>(s,a)=>Fo(t,(i,u)=>u(i),po(s,a)),Zv=(t,s,a)=>t.fold(Mu([h1(a),Uv(s)]),Mu([Uv(s)]),Mu([])),Gm=(t,s,a)=>t.fold(Mu([h1(a)]),Mu([]),Mu([h1(s)])),aA=(t,s,a)=>t.fold(Mu([]),Mu([Uv(a)]),Mu([h1(s),Uv(a)])),vI=(t,s,a,i,u,m)=>{const f=Gm(t,u,m),p=Gm(s,u,m);return Math.abs(f.left-p.left)<=a&&Math.abs(f.top-p.top)<=i},zS=(t,s,a,i,u,m)=>{const f=Gm(t,u,m),p=Gm(s,u,m),b=Math.abs(f.left-p.left),C=Math.abs(f.top-p.top);return po(b,C)},US=(t,s,a)=>{const i=t.fold((u,m)=>({position:x.some("absolute"),left:x.some(u+"px"),top:x.some(m+"px")}),(u,m)=>({position:x.some("absolute"),left:x.some(u-a.left+"px"),top:x.some(m-a.top+"px")}),(u,m)=>({position:x.some("fixed"),left:x.some(u+"px"),top:x.some(m+"px")}));return{right:x.none(),bottom:x.none(),...i}},Wv=(t,s,a)=>t.fold((i,u)=>qm(i+s,u+a),(i,u)=>Wa(i+s,u+a),(i,u)=>Ru(i+s,u+a)),Jg=(t,s,a,i)=>{const u=(m,f)=>(p,b)=>{const C=m(s,a,i);return f(p.getOr(C.left),b.getOr(C.top))};return t.fold(u(aA,qm),u(Gm,Wa),u(Zv,Ru))},qm=g1.offset,Wa=g1.absolute,Ru=g1.fixed,cA=(t,s)=>{const a=Go(t,s);return Wr(a)?NaN:parseInt(a,10)},yI=(t,s)=>{const a=t.element,i=cA(a,s.leftAttr),u=cA(a,s.topAttr);return isNaN(i)||isNaN(u)?x.none():x.some(po(i,u))},CI=(t,s,a)=>{const i=t.element;vt(i,s.leftAttr,a.left+"px"),vt(i,s.topAttr,a.top+"px")},iA=(t,s)=>{const a=t.element;oo(a,s.leftAttr),oo(a,s.topAttr)},xI=(t,s,a,i)=>yI(t,s).fold(()=>a,u=>Ru(u.left+i.left,u.top+i.top)),SI=(t,s,a,i,u,m)=>{const f=xI(t,s,a,i),p=s.mustSnap?wI(t,s,f,u,m):uA(t,s,f,u,m),b=Zv(f,u,m);return CI(t,s,b),p.fold(()=>({coord:Ru(b.left,b.top),extra:x.none()}),C=>({coord:C.output,extra:C.extra}))},lA=(t,s)=>{iA(t,s)},ZS=(t,s,a,i)=>Xt(t,u=>{const m=u.sensor;return vI(s,m,u.range.left,u.range.top,a,i)?x.some({output:Jg(u.output,s,a,i),extra:u.extra}):x.none()}),wI=(t,s,a,i,u)=>{const m=s.getSnapPoints(t);return ZS(m,a,i,u).orThunk(()=>Fo(m,(b,C)=>{const S=C.sensor,_=zS(a,S,C.range.left,C.range.top,i,u);return b.deltas.fold(()=>({deltas:x.some(_),snap:x.some(C)}),A=>{const N=(_.left+_.top)/2,I=(A.left+A.top)/2;return N<=I?{deltas:x.some(_),snap:x.some(C)}:b})},{deltas:x.none(),snap:x.none()}).snap.map(b=>({output:Jg(b.output,a,i,u),extra:b.extra})))},uA=(t,s,a,i,u)=>{const m=s.getSnapPoints(t);return ZS(m,a,i,u)},EI=(t,s,a)=>({coord:Jg(t.output,t.output,s,a),extra:t.extra});var mA=Object.freeze({__proto__:null,snapTo:(t,s,a,i)=>{const u=s.getTarget(t.element);if(s.repositionTarget){const m=er(t.element),f=nr(m),p=Ye(u),b=EI(i,f,p),C=US(b.coord,f,p);v(u,C)}}});const us=(t,s)=>Fb(t,{},Ce(s,a=>Ib(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([wr("dump",Lt)])),p1=t=>t.dump,Bs=(t,s)=>({...Se(s),...t.dump}),bi={field:us,augment:Bs,get:p1},_I=(t,s)=>(t.length>0?[ci("parts",t)]:[]).concat([be("uid"),J("dom",{}),J("components",[]),Nm("originalSpec"),J("debug.sketcher",{})]).concat(s),fA=(t,s,a,i,u)=>{const m=_I(i,u);return Kr(t+" [SpecSchema]",Ha(m.concat(s)),a)},TI=(t,s,a,i)=>{const u=WS(i),m=fA(t,s,u,[],[]);return a(m,u)},Km=(t,s,a,i,u)=>{const m=WS(u),f=Kb(a),p=Yb(a),b=fA(t,s,m,f,[p]),C=Sd(t,b,a),S=Su(t,b,C.internals());return i(b,S,m,C.externals())},gA=t=>Qt(t,"uid"),WS=t=>gA(t)?t:{...t,uid:qg("uid")},hA=t=>t.uid!==void 0,pA=Ha([be("name"),be("factory"),be("configFields"),J("apis",{}),J("extraApis",{})]),bA=Ha([be("name"),be("factory"),be("configFields"),be("partFields"),J("apis",{}),J("extraApis",{})]),ja=t=>{const s=Kr("Sketcher for "+t.name,pA,t),a=m=>TI(s.name,s.configFields,s.factory,m),i=Vn(s.apis,jg),u=Vn(s.extraApis,(m,f)=>Wb(m,f));return{name:s.name,configFields:s.configFields,sketch:a,...i,...u}},_r=t=>{const s=Kr("Sketcher for "+t.name,bA,t),a=f=>Km(s.name,s.configFields,s.partFields,s.factory,f),i=Dg(s.name,s.partFields),u=Vn(s.apis,jg),m=Vn(s.extraApis,(f,p)=>Wb(f,p));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...u,...m}},wc=ja({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:p1(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[J("components",[]),us("containerBehaviours",[]),J("events",{}),J("domModification",{}),J("eventOrder",{})]}),jS="data-initial-z-index",jv=t=>{br(t.element).filter(Gr).each(s=>{qo(s,jS).fold(()=>Me(s,"z-index"),a=>_t(s,"z-index",a)),oo(s,jS)})},kI=t=>{br(t.element).filter(Gr).each(s=>{$(s,"z-index").each(a=>{vt(s,jS,a)}),_t(s,"z-index",E(t.element,"z-index"))})},GS=(t,s)=>{t.getSystem().addToGui(s),kI(s)},Fr=t=>{jv(t),t.getSystem().removeFromGui(t)},vA=(t,s,a)=>t.getSystem().build(wc.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var yA=ya("snaps",[be("getSnapPoints"),an("onSensor"),be("leftAttr"),be("topAttr"),J("lazyViewport",or),J("mustSnap",!1)]);const Gv=[J("useFixed",pn),be("blockerClass"),J("getTarget",Lt),J("onDrag",ee),J("repositionTarget",!0),J("onDrop",ee),Ln("getBounds",or),yA],AI=t=>Yf($(t,"left"),$(t,"top"),$(t,"position"),(s,a,i)=>(i==="fixed"?Ru:qm)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=ei(t);return Wa(s.left,s.top)}),CA=(t,s,a,i,u)=>{const m=u.bounds,f=Gm(s,a,i),p=vs(f.left,m.x,m.x+m.width-u.width),b=vs(f.top,m.y,m.y+m.height-u.height),C=Wa(p,b);return s.fold(()=>{const S=aA(C,a,i);return qm(S.left,S.top)},Y(C),()=>{const S=Zv(C,a,i);return Ru(S.left,S.top)})},xA=(t,s,a,i,u,m,f)=>{const p=s.fold(()=>{const b=Wv(a,m.left,m.top),C=Zv(b,i,u);return Ru(C.left,C.top)},b=>{const C=SI(t,b,a,m,i,u);return C.extra.each(S=>{b.onSensor(t,S)}),C.coord});return CA(t,p,i,u,f)},OI=(t,s,a,i)=>{const u=s.getTarget(t.element);if(s.repositionTarget){const m=er(t.element),f=nr(m),p=Ye(u),b=AI(u),C=xA(t,s.snaps,b,f,p,i,a),S=US(C,f,p);v(u,S)}s.onDrag(t,u,i)},SA=(t,s)=>({bounds:t.getBounds(),height:eo(s.element),width:fg(s.element)}),qS=(t,s,a,i,u)=>{const m=a.update(i,u),f=a.getStartData().getOrThunk(()=>SA(s,t));m.each(p=>{OI(t,s,f,p)})},wA=(t,s,a,i)=>{s.each(Fr),a.snaps.each(m=>{lA(t,m)});const u=a.getTarget(t.element);i.reset(),a.onDrop(t,u)},qv=t=>(s,a)=>{const i=u=>{a.setStartData(SA(s,u))};return Wn([me(hx(),u=>{a.getStartData().each(()=>i(u))}),...t(s,a,i)])},DI=t=>Wn([me(Ca(),t.forceDrop),me($b(),t.drop),me(Dp(),(s,a)=>{t.move(a.event)}),me(Mp(),t.delayDrop)]);var EA=Object.freeze({__proto__:null,getData:t=>x.from(po(t.x,t.y)),getDelta:(t,s)=>po(s.left-t.left,s.top-t.top)});const KS=(t,s,a)=>[me(Ca(),(i,u)=>{if(u.event.raw.button!==0)return;u.stop();const f=()=>wA(i,x.some(C),t,s),p=bT(f,200),b={drop:f,delayDrop:p.schedule,forceDrop:f,move:_=>{p.cancel(),qS(i,t,s,EA,_)}},C=vA(i,t.blockerClass,DI(b));(()=>{a(i),GS(i,C)})()})],RI=[...Gv,An("dragger",{handlers:qv(KS)})],NI=t=>Wn([me(hu(),t.forceDrop),me(zi(),t.drop),me(li(),t.drop),me(pd(),(s,a)=>{t.move(a.event)})]),BI=t=>{const s=t[0];return x.some(po(s.clientX,s.clientY))};var YS=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?BI(a):x.none()},getDelta:(t,s)=>po(s.left-t.left,s.top-t.top)});const Nu=(t,s,a)=>{const i=tn(),u=m=>{wA(m,i.get(),t,s),i.clear()};return[me(hu(),(m,f)=>{f.stop();const p=()=>u(m),b={drop:p,delayDrop:ee,forceDrop:p,move:_=>{qS(m,t,s,YS,_)}},C=vA(m,t.blockerClass,NI(b));i.set(C),(()=>{a(m),GS(m,C)})()}),me(pd(),(m,f)=>{f.stop(),qS(m,t,s,YS,f.event)}),me(zi(),(m,f)=>{f.stop(),u(m)}),me(li(),u)]},_A=[...Gv,An("dragger",{handlers:qv(Nu)})],TA=(t,s,a)=>[...KS(t,s,a),...Nu(t,s,a)],kA=[...Gv,An("dragger",{handlers:qv(TA)})];var II=Object.freeze({__proto__:null,mouse:RI,touch:_A,mouseOrTouch:kA}),$I=Object.freeze({__proto__:null,init:()=>{let t=x.none(),s=x.none();const a=()=>{t=x.none(),s=x.none()},i=(b,C)=>{const S=t.map(_=>b.getDelta(_,C));return t=x.some(C),S},u=(b,C)=>b.getData(C).bind(S=>i(b,S)),m=b=>{s=x.some(b)},f=()=>s,p=Y({});return Sa({readState:p,reset:a,update:u,getStartData:f,setStartData:m})}});const Ym=Ze({branchKey:"mode",branches:II,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:x.from(t.extra)})},state:$I,apis:mA}),LI=["input","textarea"],XS=t=>{const s=ac(t);return In(LI,s)},Kv=(t,s)=>{const a=s.getRoot(t).getOr(t.element);Un(a,s.invalidClass),s.notify.each(i=>{XS(t.element)&&vt(t.element,"aria-invalid",!1),i.getContainer(t).each(u=>{ld(u,i.validHtml)}),i.onValid(t)})},Yv=(t,s,a,i)=>{const u=s.getRoot(t).getOr(t.element);bo(u,s.invalidClass),s.notify.each(m=>{XS(t.element)&&vt(t.element,"aria-invalid",!0),m.getContainer(t).each(f=>{ld(f,i)}),m.onInvalid(t,i)})},AA=(t,s,a)=>s.validator.fold(()=>So.pure(Nt.value(!0)),i=>i.validate(t)),Pl=(t,s,a)=>(s.notify.each(i=>{i.onValidate(t)}),AA(t,s).map(i=>t.getSystem().isConnected()?i.fold(u=>(Yv(t,s,a,u),Nt.error(u)),u=>(Kv(t,s),Nt.value(u))):Nt.error("No longer in system")));var OA=Object.freeze({__proto__:null,markValid:Kv,markInvalid:Yv,query:AA,run:Pl,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Hs(a,s.invalidClass)}}),VI=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>Wn([me(a.onEvent,i=>{Pl(i,t,s).get(Lt)})].concat(a.validateOnLoad?[$n(i=>{Pl(i,t,s).get(ee)})]:[]))).getOr({})}),v1=[be("invalidClass"),J("getRoot",x.none),ya("notify",[J("aria","alert"),J("getContainer",x.none),J("validHtml",""),an("onValid"),an("onInvalid"),an("onValidate")]),ya("validator",[be("validate"),J("onEvent","input"),J("validateOnLoad",!0)])];const Xm=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},JS=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var zI=Object.freeze({__proto__:null,onLoad:Xm,onUnload:JS,setValue:(t,s,a,i)=>{s.store.manager.setValue(t,s,a,i)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),MA=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[$n((i,u)=>{Xm(i,t,s)}),Wi((i,u)=>{JS(i,t,s)})]:[Kx(t,s,Xm)];return Wn(a)}});const Il=()=>{const t=tt(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,i=()=>{t.set(null)};return Sa({set:t.set,get:t.get,isNotSet:a,clear:i,readState:s})},QS=()=>Sa({readState:ee}),RA=()=>{const t=tt({}),s=tt({});return Sa({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:f=>Le(t.get(),f).orThunk(()=>Le(s.get(),f)),update:f=>{const p=t.get(),b=s.get(),C={},S={};ze(f,_=>{C[_.value]=_,Le(_,"meta").each(A=>{Le(A,"text").each(N=>{S[N]=_})})}),t.set({...p,...C}),s.set({...b,...S})},clear:()=>{t.set({}),s.set({})}})};var NA=Object.freeze({__proto__:null,memory:Il,dataset:RA,manual:QS,init:t=>t.store.manager.state(t)});const ew=(t,s,a,i)=>{const u=s.store;a.update([i]),u.setValue(t,i),s.onSetValue(t,i)},tw=(t,s,a)=>{const i=s.store,u=i.getDataKey(t);return a.lookup(u).getOrThunk(()=>i.getFallbackEntry(u))},BA=(t,s,a)=>{s.store.initialValue.each(u=>{ew(t,s,a,u)})},ZI=(t,s,a)=>{a.clear()};var WI=[bn("initialValue"),be("getFallbackEntry"),be("getDataKey"),be("setValue"),An("manager",{setValue:ew,getValue:tw,onLoad:BA,onUnload:ZI,state:RA})];const jI=(t,s,a)=>s.store.getValue(t),Xv=(t,s,a,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},nw=(t,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var Jv=[be("getValue"),J("setValue",ee),bn("initialValue"),An("manager",{setValue:Xv,getValue:jI,onLoad:nw,onUnload:ee,state:mi.init})];const PA=(t,s,a,i)=>{a.set(i),s.onSetValue(t,i)},GI=(t,s,a)=>a.get(),IA=(t,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},FA=(t,s,a)=>{a.clear()};var $A=[bn("initialValue"),An("manager",{setValue:PA,getValue:GI,onLoad:IA,onUnload:FA,state:Il})],LA=[ii("store",{mode:"memory"},ba("mode",{memory:$A,manual:Jv,dataset:WI})),an("onSetValue"),J("resetOnDom",!1)];const Fe=Ns({fields:LA,name:"representing",active:MA,apis:zI,extra:{setValueFrom:(t,s)=>{const a=Fe.getValue(s);Fe.setValue(t,a)}},state:NA}),vi=Ns({fields:v1,name:"invalidating",active:VI,apis:OA,extra:{validation:t=>s=>{const a=Fe.getValue(s);return So.pure(t(a))}}});var qI=Object.freeze({__proto__:null,exhibit:(t,s)=>fi({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const ow=Nr.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),HA=(t,s,a,i,u,m)=>{const f=s.rect,p=f.x-a,b=f.y-i,C=f.width,S=f.height,_=u-(p+C),A=m-(b+S),N=x.some(p),I=x.some(b),H=x.some(_),Z=x.some(A),L=x.none();return X8(s.direction,()=>xc(t,N,I,L,L),()=>xc(t,L,I,H,L),()=>xc(t,N,L,L,Z),()=>xc(t,L,L,H,Z),()=>xc(t,N,I,L,L),()=>xc(t,N,L,L,Z),()=>xc(t,N,I,L,L),()=>xc(t,L,I,H,L))},sw=(t,s)=>t.fold(()=>{const a=s.rect;return xc("absolute",x.some(a.x),x.some(a.y),x.none(),x.none())},(a,i,u,m)=>HA("absolute",s,a,i,u,m),(a,i,u,m)=>HA("fixed",s,a,i,u,m)),rw=(t,s)=>{const a=vn(_p,s),i=t.fold(a,a,()=>{const f=nr();return _p(s).translate(-f.left,-f.top)}),u=fg(s),m=eo(s);return Ro(i.left,i.top,u,m)},KI=(t,s)=>s.fold(()=>t.fold(or,or,Ro),a=>t.fold(Y(a),Y(a),()=>{const i=aw(t,a.x,a.y);return Ro(i.left,i.top,a.width,a.height)})),aw=(t,s,a)=>{const i=po(s,a),u=()=>{const m=nr();return i.translate(-m.left,-m.top)};return t.fold(Y(i),Y(i),u)},y1=(t,s,a,i)=>t.fold(s,a,i);ow.none;const YI=ow.relative,C1=ow.fixed,cw=(t,s)=>({anchorBox:t,origin:s}),VA=(t,s)=>cw(t,s),x1=Nr.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),XI=(t,s)=>{const{x:a,y:i,right:u,bottom:m}=s,{x:f,y:p,right:b,bottom:C,width:S,height:_}=t,A=f>=a&&f<=u,N=p>=i&&p<=m,I=A&&N,H=b<=u&&b>=a,Z=C<=m&&C>=i,L=H&&Z,j=Math.min(S,f>=a?u-f:b-a),G=Math.min(_,p>=i?m-p:C-i);return{originInBounds:I,sizeInBounds:L,visibleW:j,visibleH:G}},JI=(t,s)=>{const{x:a,y:i,right:u,bottom:m}=s,{x:f,y:p,width:b,height:C}=t,S=Math.max(a,u-b),_=Math.max(i,m-C),A=vs(f,a,S),N=vs(p,i,_),I=Math.min(A+b,u)-A,H=Math.min(N+C,m)-N;return Ro(A,N,I,H)},zA=(t,s,a)=>{const i=Y(s.bottom-a.y),u=Y(a.bottom-s.y),m=J8(t,u,u,i),f=Y(s.right-a.x),p=Y(a.right-s.x);return{maxWidth:wT(t,p,p,f),maxHeight:m}},QI=(t,s,a,i)=>{const u=t.bubble,m=u.offset,f=eP(i,t.restriction,m),p=t.x+m.left,b=t.y+m.top,C=Ro(p,b,s,a),{originInBounds:S,sizeInBounds:_,visibleW:A,visibleH:N}=XI(C,f),I=S&&_,H=I?C:JI(C,f),Z=H.width>0&&H.height>0,{maxWidth:L,maxHeight:j}=zA(t.direction,H,i),G={rect:H,maxHeight:j,maxWidth:L,direction:t.direction,placement:t.placement,classes:{on:u.classesOn,off:u.classesOff},layout:t.label,testY:b};return I||t.alwaysFit?x1.fit(G):x1.nofit(G,A,N,Z)},UA=(t,s,a,i,u,m)=>{const f=i.width,p=i.height,b=(S,_,A,N,I)=>{const H=S(a,i,u,t,m),Z=QI(H,f,p,m);return Z.fold(Y(Z),(L,j,G,ne)=>(I===ne?G>N||j>A:!I&&ne)?Z:x1.nofit(_,A,N,I))};return Fo(s,(S,_)=>{const A=vn(b,_);return S.fold(Y(S),A)},x1.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:Qb(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(Lt,Lt)},ZA=["top","bottom","right","left"],Qv="data-alloy-transition-timer",WA=(t,s)=>XB(t,s.classes),e2=(t,s,a)=>a.exists(i=>{const u=t.mode;return u==="all"?!0:i[u]!==s[u]}),iw=(t,s)=>{const a=i=>parseFloat(i).toFixed(3);return bs(s,(i,u)=>{const m=t[u].map(a),f=i.map(a);return!rp(m,f)}).isSome()},lw=t=>{const s=m=>{const p=E(t,m).split(/\s*,\s*/);return Pn(p,jc)},a=m=>{if(hn(m)&&/^[\d.]+/.test(m)){const f=parseFloat(m);return Jn(m,"ms")?f:f*1e3}else return 0},i=s("transition-delay"),u=s("transition-duration");return Fo(u,(m,f,p)=>{const b=a(i[p])+a(f);return Math.max(m,b)},0)},eF=(t,s)=>{const a=Ii(),i=Ii();let u;const m=C=>{var S;const _=(S=C.raw.pseudoElement)!==null&&S!==void 0?S:"";return xn(C.target,t)&&Gc(_)&&In(ZA,C.raw.propertyName)},f=C=>{if(Xl(C)||m(C)){a.clear(),i.clear();const S=C==null?void 0:C.raw.type;(Xl(S)||S===Sg())&&(clearTimeout(u),oo(t,Qv),La(t,s.classes))}},p=ys(t,P8(),C=>{m(C)&&(p.unbind(),a.set(ys(t,Sg(),f)),i.set(ys(t,B8(),f)))}),b=lw(t);requestAnimationFrame(()=>{u=setTimeout(f,b+17),vt(t,Qv,u)})},tF=(t,s)=>{ym(t,s.classes),qo(t,Qv).each(a=>{clearTimeout(parseInt(a,10)),oo(t,Qv)}),eF(t,s)},nF=(t,s,a,i,u,m)=>{const f=e2(i,u,m);if(f||WA(t,i)){_t(t,"position",a.position);const p=rw(s,t),b=sw(s,{...u,rect:p}),C=cl(ZA,S=>b[S]);iw(a,C)&&(v(t,C),f&&tF(t,i),Mt(t))}else La(t,i.classes)},oF=t=>({width:Math.ceil(pb(t)),height:eo(t)}),jA=(t,s,a,i)=>{Me(s,"max-height"),Me(s,"max-width");const u=oF(s);return UA(s,i.preference,t,u,a,i.bounds)},GA=(t,s)=>{const a=s.classes;La(t,a.off),ym(t,a.on)},sF=(t,s,a)=>{const i=a.maxHeightFunction;i(t,s.maxHeight)},rF=(t,s,a)=>{const i=a.maxWidthFunction;i(t,s.maxWidth)},aF=(t,s,a)=>{const i=sw(a.origin,s);a.transition.each(u=>{nF(t,a.origin,i,u,s,a.lastPlacement)}),nA(t,i)},cF=(t,s)=>{nv(t,s.placement)},qA=(t,s,a)=>t[s]===void 0?a:t[s],iF=(t,s,a,i,u,m,f,p)=>{const b=qA(f,"maxHeightFunction",Wx()),C=qA(f,"maxWidthFunction",ee),S=t.anchorBox,_=t.origin,A={bounds:KI(_,m),origin:_,preference:i,maxHeightFunction:b,maxWidthFunction:C,lastPlacement:u,transition:p};return KA(S,s,a,A)},KA=(t,s,a,i)=>{const u=jA(t,s,a,i);return aF(s,u,i),cF(s,u),GA(s,u),sF(s,u,i),rF(s,u,i),{layout:u.layout,placement:u.placement}},t2=Lt,Rd=()=>ya("layouts",[be("onLtr"),be("onRtl"),bn("onBottomLtr"),bn("onBottomRtl")]),n2=(t,s,a,i,u,m,f)=>{const p=f.map(sP).getOr(!1),b=s.layouts.map(N=>N.onLtr(t)),C=s.layouts.map(N=>N.onRtl(t)),S=p?s.layouts.bind(N=>N.onBottomLtr.map(I=>I(t))).or(b).getOr(u):b.getOr(a),_=p?s.layouts.bind(N=>N.onBottomRtl.map(I=>I(t))).or(C).getOr(m):C.getOr(i);return Cp(S,_)(t)},lF=(t,s,a)=>{const i=s.hotspot,u=rw(a,i.element),m=n2(t.element,s,_u(),zx(),Vx(),Eu(),x.some(s.hotspot.element));return x.some(t2({anchorBox:u,bubble:s.bubble.getOr(Jb()),overrides:s.overrides,layouts:m}))};var uF=[be("hotspot"),bn("bubble"),J("overrides",{}),Rd(),An("placement",lF)];const ef=(t,s,a)=>{const i=aw(a,s.x,s.y),u=Ro(i.left,i.top,s.width,s.height),m=n2(t.element,s,AT(),OT(),AT(),OT(),x.none());return x.some(t2({anchorBox:u,bubble:s.bubble,overrides:s.overrides,layouts:m}))};var dF=[be("x"),be("y"),J("height",0),J("width",0),J("bubble",Jb()),J("overrides",{}),Rd(),An("placement",ef)];const YA=Nr.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),tf=t=>t.fold(Lt,(s,a,i)=>s.translate(-a,-i)),XA=t=>t.fold(Lt,Lt),JA=t=>Fo(t,(s,a)=>s.translate(a.left,a.top),po(0,0)),Nd=t=>{const s=Ce(t,tf);return JA(s)},QA=t=>{const s=Ce(t,XA);return JA(s)},mF=YA.screen,Ec=YA.absolute,eO=(t,s,a)=>{const i=cc(a.root).dom,u=m=>{const f=er(m),p=er(t.element);return xn(f,p)};return x.from(i.frameElement).map(Ne.fromDom).filter(u).map(ei)},uw=(t,s,a)=>{const i=er(t.element),u=nr(i),m=eO(t,s,a).getOr(u);return Ec(m,u.left,u.top)},o2=(t,s,a,i)=>{const u=mF(po(t,s));return x.some(Ds(u,a,i))},tO=(t,s,a,i,u)=>t.map(m=>{const f=[s,m.point],p=y1(i,()=>QA(f),()=>QA(f),()=>Nd(f)),b=b8(p.left,p.top,m.width,m.height),C=a.showAbove?Vx():_u(),S=a.showAbove?Eu():zx(),_=n2(u,a,C,S,C,S,x.none());return t2({anchorBox:b,bubble:a.bubble.getOr(Jb()),overrides:a.overrides,layouts:_})}),s2=(t,s,a)=>{const i=uw(t,a,s);return s.node.filter(wo).bind(u=>{const m=u.dom.getBoundingClientRect(),f=o2(m.left,m.top,m.width,m.height),p=s.node.getOr(t.element);return tO(f,i,s,a,p)})};var nO=[be("node"),be("root"),bn("bubble"),Rd(),J("overrides",{}),J("showAbove",!1),An("placement",s2)];const r2=(t,s)=>({element:t,offset:s}),fF=(t,s)=>{const a=tr(t);if(a.length===0)return r2(t,s);if(s<a.length)return r2(a[s],0);{const i=a[a.length-1],u=iu(i)?jC(i).length:tr(i).length;return r2(i,u)}},S1=(t,s)=>iu(t)?r2(t,s):fF(t,s),w1=t=>t.foffset!==void 0,dw=(t,s)=>s.getSelection.getOrThunk(()=>()=>d8(t))().map(i=>{if(w1(i)){const u=S1(i.start,i.soffset),m=S1(i.finish,i.foffset);return Ep.range(u.element,u.offset,m.element,m.offset)}else return i}),oO=(t,s,a)=>{const i=cc(s.root).dom,u=uw(t,a,s),m=dw(i,s).bind(b=>{if(w1(b))return m8(i,Ep.exactFromRange(b)).orThunk(()=>{const S=Ne.fromText(au);pm(b.start,S);const _=W_(i,Ep.exact(S,0,S,1));return Qc(S),_}).bind(S=>o2(S.left,S.top,S.width,S.height));{const C=Vn(b,_=>_.dom.getBoundingClientRect()),S={left:Math.min(C.firstCell.left,C.lastCell.left),right:Math.max(C.firstCell.right,C.lastCell.right),top:Math.min(C.firstCell.top,C.lastCell.top),bottom:Math.max(C.firstCell.bottom,C.lastCell.bottom)};return o2(S.left,S.top,S.right-S.left,S.bottom-S.top)}}),p=dw(i,s).bind(b=>w1(b)?Gr(b.start)?x.some(b.start):Gt(b.start):x.some(b.firstCell)).getOr(t.element);return tO(m,u,s,a,p)};var sO=[bn("getSelection"),be("root"),bn("bubble"),Rd(),J("overrides",{}),J("showAbove",!1),An("placement",oO)];const a2="link-layout",c2=t=>t.x+t.width,mw=(t,s)=>t.x-s.width,rO=(t,s)=>t.y-s.height+t.height,aO=t=>t.y,cO=(t,s,a)=>Zs(c2(t),aO(t),a.southeast(),Qb(),"southeast",xs(t,{left:0,top:2}),a2),i2=(t,s,a)=>Zs(mw(t,s),aO(t),a.southwest(),Bx(),"southwest",xs(t,{right:1,top:2}),a2),iO=(t,s,a)=>Zs(c2(t),rO(t,s),a.northeast(),Px(),"northeast",xs(t,{left:0,bottom:3}),a2),Qg=(t,s,a)=>Zs(mw(t,s),rO(t,s),a.northwest(),Ix(),"northwest",xs(t,{right:1,bottom:3}),a2),E1=()=>[cO,i2,iO,Qg],fw=()=>[i2,cO,Qg,iO],lO=(t,s,a)=>{const i=rw(a,s.item.element),u=n2(t.element,s,E1(),fw(),E1(),fw(),x.none());return x.some(t2({anchorBox:i,bubble:Jb(),overrides:s.overrides,layouts:u}))};var gF=[be("item"),Rd(),J("overrides",{}),An("placement",lO)],hF=ba("type",{selection:sO,node:nO,hotspot:uF,submenu:gF,makeshift:dF});const pF=[va("classes",Vo),yo("mode","all",["all","layout","placement"])],bF=[J("useFixed",pn),bn("getBounds")],gw=[Va("anchor",hF),ya("transition",pF)],uO=()=>{const t=document.documentElement;return C1(0,0,t.clientWidth,t.clientHeight)},dO=t=>{const s=ei(t.element),a=t.element.dom.getBoundingClientRect();return YI(s.left,s.top,a.width,a.height)},hw=(t,s,a,i,u,m)=>{const f=VA(s.anchorBox,t);return iF(f,i.element,s.bubble,s.layouts,u,a,s.overrides,m)},vF=(t,s,a,i,u)=>{const m=x.none();pw(t,s,a,i,u,m)},pw=(t,s,a,i,u,m)=>{const f=Kr("placement.info",ht(gw),u),p=f.anchor,b=i.element,C=a.get(i.uid);Gg(()=>{_t(b,"position","fixed");const S=$(b,"visibility");_t(b,"visibility","hidden");const _=s.useFixed()?uO():dO(t);p.placement(t,p,_).each(A=>{const N=m.orThunk(()=>s.getBounds.map(jo)),I=hw(_,A,N,i,C,f.transition);a.set(i.uid,I)}),S.fold(()=>{Me(b,"visibility")},A=>{_t(b,"visibility",A)}),$(b,"left").isNone()&&$(b,"top").isNone()&&$(b,"right").isNone()&&$(b,"bottom").isNone()&&jr($(b,"position"),"fixed")&&Me(b,"position")},b)};var yF=Object.freeze({__proto__:null,position:vF,positionWithinBounds:pw,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,i)=>{const u=i.element;ze(["position","left","right","top","bottom"],m=>Me(u,m)),nP(u),a.clear(i.uid)}}),xF=Object.freeze({__proto__:null,init:()=>{let t={};return Sa({readState:()=>t,clear:u=>{Qn(u)?delete t[u]:t={}},set:(u,m)=>{t[u]=m},get:u=>Le(t,u)})}});const ir=Ns({fields:bF,name:"positioning",active:qI,apis:yF,state:xF}),bw=(t,s)=>s.universal?t:Pn(t,a=>In(s.channels,a));var mO=Object.freeze({__proto__:null,events:t=>Wn([me(Am(),(s,a)=>{const i=t.channels,u=Yn(i),m=a,f=bw(u,m);ze(f,p=>{const b=i[p],C=b.schema,S=Kr("channel["+p+`] data
Receiver: `+wn(s.element),C,m.data);b.onReceive(s,S)})})])}),wF=[Va("channels",nT(Nt.value,Ha([is("onReceive"),J("schema",si())])))];const $r=Ns({fields:wF,name:"receiving",active:mO});var EF=Object.freeze({__proto__:null,events:(t,s)=>{const a=(i,u)=>{t.updateState.each(m=>{const f=m(i,u);s.set(f)}),t.renderComponents.each(m=>{const f=m(u,s.get());(t.reuseDom?Bk:pS)(i,f)})};return Wn([me(Am(),(i,u)=>{const m=u;if(!m.universal){const f=t.channel;In(m.channels,f)&&a(i,m.data)}}),$n((i,u)=>{t.initialData.each(m=>{a(i,m)})})])}}),_F=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),TF=[be("channel"),bn("renderComponents"),bn("updateState"),bn("initialData"),zs("reuseDom",!0)],vw=Object.freeze({__proto__:null,init:()=>{const t=tt(x.none()),s=()=>t.set(x.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Ea=Ns({fields:TF,name:"reflecting",active:EF,apis:_F,state:vw}),_1=(t,s,a,i)=>{a.get().each(f=>{Jr(t)});const u=s.getAttachPoint(t);hi(u,t);const m=t.getSystem().build(i);return hi(t,m),a.set(m),m},fO=(t,s,a,i)=>{const u=_1(t,s,a,i);return s.onOpen(t,u),u},AF=(t,s,a,i)=>a.get().map(()=>_1(t,s,a,i)),OF=(t,s,a,i,u)=>{l2(t,s),fO(t,s,a,i),u(),bO(t,s)},gO=(t,s,a)=>{a.get().each(i=>{Jr(t),Qo(t),s.onClose(t,i),a.clear()})},hO=(t,s,a)=>a.isOpen(),DF=(t,s,a,i)=>hO(t,s,a)&&a.get().exists(u=>s.isPartOf(t,u,i)),pO=(t,s,a)=>a.get(),MF=(t,s,a,i)=>{$(t.element,s).fold(()=>{oo(t.element,a)},u=>{vt(t.element,a,u)}),_t(t.element,s,i)},RF=(t,s,a)=>{qo(t.element,a).fold(()=>Me(t.element,s),i=>_t(t.element,s,i))},l2=(t,s,a)=>{const i=s.getAttachPoint(t);_t(t.element,"position",ir.getMode(i)),MF(t,"visibility",s.cloakVisibilityAttr,"hidden")},nf=t=>ks(["top","left","right","bottom"],s=>$(t,s).isSome()),bO=(t,s,a)=>{nf(t.element)||Me(t.element,"position"),RF(t,"visibility",s.cloakVisibilityAttr)};var NF=Object.freeze({__proto__:null,cloak:l2,decloak:bO,open:fO,openWhileCloaked:OF,close:gO,isOpen:hO,isPartOf:DF,getState:pO,setContent:AF}),yO=Object.freeze({__proto__:null,events:(t,s)=>Wn([me(Lb(),(a,i)=>{gO(a,t,s)})])}),BF=[an("onOpen"),an("onClose"),be("isPartOf"),be("getAttachPoint"),J("cloakVisibilityAttr","data-precloak-visibility")],CO=Object.freeze({__proto__:null,init:()=>{const t=tn(),s=Y("not-implemented");return Sa({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const on=Ns({fields:BF,name:"sandboxing",active:yO,apis:NF,state:CO}),eh=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),Fl=t=>t.dimension.property,Bu=(t,s)=>t.dimension.getDimension(s),u2=(t,s)=>{const a=eh(t,s);La(a,[s.shrinkingClass,s.growingClass])},d2=(t,s)=>{Un(t.element,s.openClass),bo(t.element,s.closedClass),_t(t.element,Fl(s),"0px"),Mt(t.element)},yw=(t,s)=>{Un(t.element,s.closedClass),bo(t.element,s.openClass),Me(t.element,Fl(s))},th=(t,s,a,i)=>{a.setCollapsed(),_t(t.element,Fl(s),Bu(s,t.element)),u2(t,s),d2(t,s),s.onStartShrink(t),s.onShrunk(t)},PF=(t,s,a,i)=>{const u=i.getOrThunk(()=>Bu(s,t.element));a.setCollapsed(),_t(t.element,Fl(s),u),Mt(t.element);const m=eh(t,s);Un(m,s.growingClass),bo(m,s.shrinkingClass),d2(t,s),s.onStartShrink(t)},xO=(t,s,a)=>{const i=Bu(s,t.element);(i==="0px"?th:PF)(t,s,a,x.some(i))},m2=(t,s,a)=>{const i=eh(t,s),u=Hs(i,s.shrinkingClass),m=Bu(s,t.element);yw(t,s);const f=Bu(s,t.element);(u?()=>{_t(t.element,Fl(s),m),Mt(t.element)}:()=>{d2(t,s)})(),Un(i,s.shrinkingClass),bo(i,s.growingClass),yw(t,s),_t(t.element,Fl(s),f),a.setExpanded(),s.onStartGrow(t)},Cw=(t,s,a)=>{if(a.isExpanded()){Me(t.element,Fl(s));const i=Bu(s,t.element);_t(t.element,Fl(s),i)}},IF=(t,s,a)=>{a.isExpanded()||m2(t,s,a)},xw=(t,s,a)=>{a.isExpanded()&&xO(t,s,a)},FF=(t,s,a)=>{a.isExpanded()&&th(t,s,a)},$F=(t,s,a)=>a.isExpanded(),Sw=(t,s,a)=>a.isCollapsed(),SO=(t,s,a)=>{const i=eh(t,s);return Hs(i,s.growingClass)===!0},wO=(t,s,a)=>{const i=eh(t,s);return Hs(i,s.shrinkingClass)===!0};var LF=Object.freeze({__proto__:null,refresh:Cw,grow:IF,shrink:xw,immediateShrink:FF,hasGrown:$F,hasShrunk:Sw,isGrowing:SO,isShrinking:wO,isTransitioning:(t,s,a)=>SO(t,s)||wO(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?xO:m2)(t,s,a)},disableTransitions:u2,immediateGrow:(t,s,a)=>{a.isExpanded()||(yw(t,s),_t(t.element,Fl(s),Bu(s,t.element)),u2(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),HF=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const i=s.expanded;return fi(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Tm(s.dimension.property,"0px")})},events:(t,s)=>Wn([Pg(Sg(),(a,i)=>{i.event.raw.propertyName===t.dimension.property&&(u2(a,t),s.isExpanded()&&Me(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),VF=[be("closedClass"),be("openClass"),be("shrinkingClass"),be("growingClass"),bn("getAnimationRoot"),an("onShrunk"),an("onStartShrink"),an("onGrown"),an("onStartGrow"),J("expanded",!1),Va("dimension",ba("property",{width:[An("property","width"),An("getDimension",t=>Yo(t)+"px")],height:[An("property","height"),An("getDimension",t=>jt(t)+"px")]}))],zF=Object.freeze({__proto__:null,init:t=>{const s=tt(t.expanded),a=()=>"expanded: "+s.get();return Sa({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:vn(s.set,!1),setExpanded:vn(s.set,!0),readState:a})}});const Tr=Ns({fields:VF,name:"sliding",active:HF,apis:LF,state:zF});var UF=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return Wn([me(t.event,i),Wi(()=>s.cancel())].concat(t.cancelEvent.map(u=>[me(u,()=>s.cancel())]).getOr([])))}});const EO=t=>{const s=tt(null);return Sa({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:m=>{s.set(m)},cancel:()=>{const m=s.get();m!==null&&m.cancel()}})};var WF=Object.freeze({__proto__:null,throttle:EO,init:t=>t.stream.streams.state(t)});const jF=(t,s)=>{const a=t.stream,i=ru(t.onStream,a.delay);return s.setTimer(i),(u,m)=>{i.throttle(u,m),a.stopEvent&&m.stop()}};var GF=[Va("stream",ba("mode",{throttle:[be("delay"),J("stopEvent",!0),An("streams",{setup:jF,state:EO})]})),J("event","input"),bn("cancelEvent"),is("onStream")];const ww=Ns({fields:GF,name:"streaming",active:UF,state:WF});var qF=Object.freeze({__proto__:null,exhibit:(t,s)=>fi({attributes:xg([{key:s.tabAttr,value:"true"}])})}),Ew=[J("tabAttr","data-alloy-tabstop")];const Rn=Ns({fields:Ew,name:"tabstopping",active:qF}),KF=(t,s,a)=>{const i=s.aria;i.update(t,i,a.get())},YF=(t,s,a)=>{s.toggleClass.each(i=>{a.get()?bo(t.element,i):Un(t.element,i)})},T1=(t,s,a,i)=>{const u=a.get();a.set(i),YF(t,s,a),KF(t,s,a),u!==i&&s.onToggled(t,i)},_O=(t,s,a)=>{T1(t,s,a,!a.get())},XF=(t,s,a)=>{T1(t,s,a,!0)},JF=(t,s,a)=>{T1(t,s,a,!1)},QF=(t,s,a)=>a.get(),TO=(t,s,a)=>{T1(t,s,a,s.selected)};var e$=Object.freeze({__proto__:null,onLoad:TO,toggle:_O,isOn:QF,on:XF,off:JF,set:T1}),t$=Object.freeze({__proto__:null,exhibit:()=>fi({}),events:(t,s)=>{const a=hP(t,s,_O),i=Kx(t,s,TO);return Wn(wt([t.toggleOnExecute?[a]:[],[i]]))}});const kO=(t,s,a)=>{vt(t.element,"aria-pressed",a),s.syncWithExpanded&&AO(t,s,a)},n$=(t,s,a)=>{vt(t.element,"aria-selected",a)},o$=(t,s,a)=>{vt(t.element,"aria-checked",a)},AO=(t,s,a)=>{vt(t.element,"aria-expanded",a)};var f2=[J("selected",!1),bn("toggleClass"),J("toggleOnExecute",!0),an("onToggled"),ii("aria",{mode:"none"},ba("mode",{pressed:[J("syncWithExpanded",!1),An("update",kO)],checked:[An("update",o$)],expanded:[An("update",AO)],selected:[An("update",n$)],none:[An("update",ee)]}))];const Bt=Ns({fields:f2,name:"toggling",active:t$,apis:e$,state:CP(!1)}),g2=Ie("tooltip.exclusive"),k1=Ie("tooltip.show"),A1=Ie("tooltip.hide"),O1=Ie("tooltip.immediateHide"),of=Ie("tooltip.immediateShow"),_w=(t,s,a)=>{t.getSystem().broadcastOn([g2],{})};var kw=Object.freeze({__proto__:null,hideAllExclusive:_w,immediateOpenClose:(t,s,a,i)=>qt(t,i?of:O1),isEnabled:(t,s,a)=>a.isEnabled(),setComponents:(t,s,a,i)=>{a.getTooltip().each(u=>{u.getSystem().isConnected()&&Et.set(u,i)})},setEnabled:(t,s,a,i)=>a.setEnabled(i)}),r$=Object.freeze({__proto__:null,events:(t,s)=>{const a=f=>{s.getTooltip().each(p=>{p.getSystem().isConnected()&&(Qo(p),t.onHide(f,p),s.clearTooltip())}),s.clearTimer()},i=f=>{if(!s.isShowing()&&s.isEnabled()){_w(f);const p=t.lazySink(f).getOrDie(),b=f.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Wn(t.mode==="normal"?[me(ui(),C=>{qt(f,k1)}),me(Mp(),C=>{qt(f,A1)})]:[]),behaviours:Se([Et.config({})])});s.setTooltip(b),hi(p,b),t.onShow(f,b),ir.position(p,b,{anchor:t.anchor(f)})}},u=f=>{s.getTooltip().each(p=>{const b=t.lazySink(f).getOrDie();ir.position(b,p,{anchor:t.anchor(f)})})},m=()=>{switch(t.mode){case"normal":return[me(sr(),f=>{qt(f,of)}),me(Np(),f=>{qt(f,O1)}),me(ui(),f=>{qt(f,k1)}),me(Mp(),f=>{qt(f,A1)})];case"follow-highlight":return[me(Vb(),(f,p)=>{qt(f,k1)}),me(bx(),f=>{qt(f,A1)})];case"children-normal":return[me(sr(),(f,p)=>{$s(f.element).each(b=>{cu(p.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{qt(f,of)},C=>{s.isShowing()&&(t.onShow(f,C),u(f))})})}),me(Np(),f=>{$s(f.element).fold(()=>{qt(f,O1)},ee)}),me(ui(),f=>{Dn(f.element,"[data-mce-tooltip]:hover").each(p=>{s.getTooltip().fold(()=>{qt(f,k1)},b=>{s.isShowing()&&(t.onShow(f,b),u(f))})})}),me(Mp(),f=>{Dn(f.element,"[data-mce-tooltip]:hover").fold(()=>{qt(f,A1)},ee)})];default:return[me(sr(),(f,p)=>{$s(f.element).each(b=>{cu(p.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{qt(f,of)},C=>{s.isShowing()&&(t.onShow(f,C),u(f))})})}),me(Np(),f=>{$s(f.element).fold(()=>{qt(f,O1)},ee)})]}};return Wn(wt([[Gx(f=>{t.onSetup(f)}),me(k1,f=>{s.resetTimer(()=>{i(f)},t.delayForShow())}),me(A1,f=>{s.resetTimer(()=>{a(f)},t.delayForHide())}),me(of,f=>{s.resetTimer(()=>{i(f)},0)}),me(O1,f=>{s.resetTimer(()=>{a(f)},0)}),me(Am(),(f,p)=>{const b=p;b.universal||In(b.channels,g2)&&a(f)}),Wi(f=>{a(f)})],m()]))}}),a$=[be("lazySink"),be("tooltipDom"),J("exclusive",!0),J("tooltipComponents",[]),Ln("delayForShow",Y(300)),Ln("delayForHide",Y(100)),Ln("onSetup",ee),yo("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),J("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:Y([Io,Jo,Eo,Rs,Po,ls]),onRtl:Y([Io,Jo,Eo,Rs,Po,ls])},bubble:ar(0,-2,{})})),an("onHide"),an("onShow")],D1=Object.freeze({__proto__:null,init:()=>{const t=tt(!0),s=tn(),a=tn(),i=()=>{s.on(clearTimeout)},u=(f,p)=>{i(),s.set(setTimeout(f,p))},m=Y("not-implemented");return Sa({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:i,resetTimer:u,readState:m,isEnabled:()=>t.get(),setEnabled:f=>t.set(f)})}});const Gn=Ns({fields:a$,name:"tooltipping",active:r$,state:D1,apis:kw});var i$=Object.freeze({__proto__:null,events:()=>Wn([IT(dT(),it)]),exhibit:()=>fi({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const sf=Ns({fields:[],name:"unselecting",active:i$}),Aw=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return Fo(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},l$=t=>Array.prototype.slice.call(t.dom.classList,0),$l=t=>{const s=Ne.fromHtml(t),a=tr(s),i=Aw(s),u=l$(s),m=a.length===0?{}:{innerHtml:mg(s)};return{tag:ac(s),classes:u,attributes:i,...m}},mn=t=>{const s=hA(t)&&Ks(t,"uid")?t.uid:qg("memento");return{get:m=>m.getSystem().getByUid(s).getOrDie(),getOpt:m=>m.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}},ds=Y8,Gi=Ox,Ll=Y("dismiss.popups"),Bd=Y("reposition.popups"),Ow=Y("mouse.released"),u$=(t,s)=>{const a=tt(!1),i=tt(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},d$=t=>{const s=tt(!1);return{stop:()=>{s.set(!0)},cut:ee,isStopped:s.get,isCut:pn,event:t,setSource:Zt("Cannot set source of a broadcasted event"),getSource:Zt("Cannot get source of a broadcasted event")}},m$=t=>t.raw.which===EP[0]&&!In(["input","textarea"],ac(t.target))&&!Sp(t.target,'[contenteditable="true"]'),MO=(t,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],u=V8(a),m=Ce(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),N=>ys(t,N,I=>{u.fireIfReady(I,N).each(Z=>{Z&&I.kill()}),a.triggerEvent(N,I)&&I.kill()})),f=tn(),p=ys(t,"paste",N=>{u.fireIfReady(N,"paste").each(H=>{H&&N.kill()}),a.triggerEvent("paste",N)&&N.kill(),f.set(setTimeout(()=>{a.triggerEvent(gx(),N)},0))}),b=ys(t,"keydown",N=>{a.triggerEvent("keydown",N)?N.kill():a.stopBackspace&&m$(N)&&N.prevent()}),C=ys(t,"focusin",N=>{a.triggerEvent("focusin",N)&&N.kill()}),S=tn(),_=ys(t,"focusout",N=>{a.triggerEvent("focusout",N)&&N.kill(),S.set(setTimeout(()=>{a.triggerEvent(Np(),N)},0))});return{unbind:()=>{ze(m,N=>{N.unbind()}),b.unbind(),C.unbind(),_.unbind(),p.unbind(),f.on(clearTimeout),S.on(clearTimeout)}}},Dw=(t,s)=>{const a=Le(t,"target").getOr(s);return tt(a)},M1=Nr.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),Mw=(t,s,a,i,u,m)=>{const f=t(s,i),p=u$(a,u);return f.fold(()=>(m.logEventNoHandlers(s,i),M1.complete()),b=>{const C=b.descHandler;return Um(C)(p),p.isStopped()?(m.logEventStopped(s,b.element,C.purpose),M1.stopped()):p.isCut()?(m.logEventCut(s,b.element,C.purpose),M1.complete()):br(b.element).fold(()=>(m.logNoParent(s,b.element,C.purpose),M1.complete()),_=>(m.logEventResponse(s,b.element,C.purpose),M1.resume(_)))})},nh=(t,s,a,i,u,m)=>Mw(t,s,a,i,u,m).fold(it,f=>nh(t,s,a,f,u,m),pn),RO=(t,s,a,i,u)=>{const m=Dw(a,i);return Mw(t,s,a,i,m,u)},f$=(t,s,a)=>{const i=d$(s);return ze(t,u=>{const m=u.descHandler;Um(m)(i)}),i.isStopped()},g$=(t,s,a,i)=>Rw(t,s,a,a.target,i),Rw=(t,s,a,i,u)=>{const m=Dw(a,i);return nh(t,s,a,i,m,u)},h$=(t,s)=>({element:t,descHandler:s}),p$=(t,s)=>({id:t,descHandler:s}),NO=()=>{const t={},s=(f,p,b)=>{Oo(b,(C,S)=>{const _=t[S]!==void 0?t[S]:{};_[p]=Vk(C,f),t[S]=_})},a=(f,p)=>i1(p).bind(b=>Le(f,b)).map(b=>h$(p,b));return{registerId:s,unregisterId:f=>{Oo(t,(p,b)=>{Qt(p,f)&&delete p[f]})},filterByType:f=>Le(t,f).map(p=>Ni(p,(b,C)=>p$(C,b))).getOr([]),find:(f,p,b)=>Le(t,p).bind(C=>wp(b,S=>a(C,S),f))}},BO=()=>{const t=NO(),s={},a=C=>{const S=C.element;return i1(S).getOrThunk(()=>A7("uid-",C.element))},i=(C,S)=>{const _=s[S];if(_===C)m(C);else throw new Error('The tagId "'+S+'" is already used by: '+wn(_.element)+`
Cannot use it for: `+wn(C.element)+`
The conflicting element is`+(wo(_.element)?" ":" not ")+"already in the DOM")},u=C=>{const S=a(C);Ks(s,S)&&i(C,S);const _=[C];t.registerId(_,S,C.events),s[S]=C},m=C=>{i1(C.element).each(S=>{delete s[S],t.unregisterId(S)})};return{find:(C,S,_)=>t.find(C,S,_),filter:C=>t.filterByType(C),register:u,unregister:m,getById:C=>Le(s,C)}},h2=t=>{const s=L=>br(t.element).fold(it,j=>xn(L,j)),a=BO(),i=(L,j)=>a.find(s,L,j),u=MO(t.element,{triggerEvent:(L,j)=>yx(L,j.target,G=>g$(i,L,j,G))}),m={debugInfo:Y("real"),triggerEvent:(L,j,G)=>{yx(L,j,ne=>Rw(i,L,G,j,ne))},triggerFocus:(L,j)=>{i1(L).fold(()=>{Do(L)},G=>{yx(Al(),L,ne=>(RO(i,Al(),{originator:j,kill:ee,prevent:ee,target:L},L,ne),!1))})},triggerEscape:(L,j)=>{m.triggerEvent("keydown",L.element,j.event)},getByUid:L=>H(L),getByDom:L=>Z(L),build:cr,buildOrPatch:Bv,addToGui:L=>{b(L)},removeFromGui:L=>{C(L)},addToWorld:L=>{f(L)},removeFromWorld:L=>{p(L)},broadcast:L=>{A(L)},broadcastOn:(L,j)=>{N(L,j)},broadcastEvent:(L,j)=>{I(L,j)},isConnected:it},f=L=>{L.connect(m),iu(L.element)||(a.register(L),ze(L.components(),f),m.triggerEvent(Dm(),L.element,{target:L.element}))},p=L=>{iu(L.element)||(ze(L.components(),p),a.unregister(L)),L.disconnect()},b=L=>{hi(t,L)},C=L=>{Qo(L)},S=()=>{u.unbind(),Qc(t.element)},_=L=>{const j=a.filter(Am());ze(j,G=>{const ne=G.descHandler;Um(ne)(L)})},A=L=>{_({universal:!0,data:L})},N=(L,j)=>{_({universal:!1,channels:L,data:j})},I=(L,j)=>{const G=a.filter(L);return f$(G,j)},H=L=>a.getById(L).fold(()=>Nt.error(new Error('Could not find component with uid: "'+L+'" in system.')),Nt.value),Z=L=>{const j=i1(L).getOr("not found");return H(j)};return f(t),{root:t,element:t.element,destroy:S,add:b,remove:C,getByUid:H,getByDom:Z,addToWorld:f,removeFromWorld:p,broadcast:A,broadcastOn:N,broadcastEvent:I}},Nw=()=>{const t=(s,a)=>{a.stop(),Fm(s)};return[me(bd(),t),me(Om(),t),Td(hu()),Td(Ca())]},p2=t=>{const s=a=>ku((i,u)=>{a(i),u.stop()});return Wn(wt([t.map(s).toArray(),Nw()]))},ws=ja({name:"Button",factory:t=>{const s=p2(t.action),a=t.dom.tag,i=m=>Le(t.dom,"attributes").bind(f=>Le(f,m)),u=()=>{if(a==="button"){const m=i("type").getOr("button"),f=i("role").map(p=>({role:p})).getOr({});return{type:m,...f}}else return{role:t.role.getOr(i("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:bi.augment(t.buttonBehaviours,[ft.config({}),Ke.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:u()},eventOrder:t.eventOrder}},configFields:[J("uid",void 0),be("dom"),J("components",[]),bi.field("buttonBehaviours",[ft,Ke]),bn("action"),bn("role"),J("eventOrder",{})]}),Bw=Y([J("shell",!1),be("makeItem"),J("setupItem",ee),bi.field("listBehaviours",[Et])]),IO=Uo({name:"items",overrides:()=>({behaviours:Se([Et.config({})])})}),FO=Y([IO]),$O=Y("CustomList"),b$=(t,s,a,i)=>{const u=(p,b)=>{f(p).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},C=>{const S=Et.contents(C),_=b.length,A=_-S.length,N=A>0?ua(A,()=>t.makeItem()):[],I=S.slice(_);ze(I,Z=>Et.remove(C,Z)),ze(N,Z=>Et.append(C,Z));const H=Et.contents(C);ze(H,(Z,L)=>{t.setupItem(p,Z,b[L],L)})})},m=t.shell?{behaviours:[Et.config({})],components:[]}:{behaviours:[],components:s},f=p=>t.shell?x.some(p):Mn(p,t,"items");return{uid:t.uid,dom:t.dom,components:m.components,behaviours:Bs(t.listBehaviours,m.behaviours),apis:{setItems:u}}},b2=_r({name:$O(),configFields:Bw(),partFields:FO(),factory:b$,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),R1="aria-controls",LO=t=>F_(t,a=>{if(!Gr(a))return!1;const i=Go(a,"id");return i!==void 0&&i.indexOf(R1)>-1}).bind(a=>{const i=Go(a,"id"),u=rs(a);return Dn(u,`[${R1}="${i}"]`)}),Pw=()=>{const t=Ie(R1);return{id:t,link:i=>{vt(i,R1,t)},unlink:i=>{oo(i,R1)}}},rf=(t,s)=>LO(s).exists(a=>af(t,a)),af=(t,s)=>XC(s,a=>xn(a,t.element),pn)||rf(t,s),v2="alloy.item-hover",N1="alloy.item-focus",HO="alloy.item-toggled",Iw=t=>{($s(t.element).isNone()||ft.isFocused(t))&&(ft.isFocused(t)||ft.focus(t),rt(t,v2,{item:t}))},Fw=t=>{rt(t,N1,{item:t})},VO=(t,s)=>{rt(t,HO,{item:t,state:s})},y2=Y(v2),zO=Y(N1),v$=Y(HO),UO=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Lt),ZO=(t,s)=>({aria:{mode:s?"selected":"checked"},...Uc(t,(a,i)=>i!=="exclusive"),onToggled:(a,i)=>{Ps(t.onToggled)&&t.onToggled(a,i),VO(a,i)}}),WO=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:UO(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:bi.augment(t.itemBehaviours,[t.toggling.fold(Bt.revoke,s=>Bt.config(ZO(s,t.role.exists(a=>a==="option")))),ft.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{Fw(s)}}),Ke.config({mode:"execution"}),Fe.config({store:{mode:"memory",initialValue:t.data}}),yt("item-type-events",[...Nw(),me(ui(),Iw),me(wg(),ft.focus)])]),components:t.components,eventOrder:t.eventOrder});var C$=[be("data"),be("components"),be("dom"),J("hasSubmenu",!1),bn("toggling"),bn("role"),bi.field("itemBehaviours",[Bt,ft,Ke,Fe]),J("ignoreFocus",!1),J("domModification",{}),An("builder",WO),J("eventOrder",{})];const jO=t=>({dom:t.dom,components:t.components,events:Wn([FT(wg())])});var x$=[be("dom"),be("components"),An("builder",jO)];const $w=Y("item-widget"),Lw=Y([Xo({name:"widget",overrides:t=>({behaviours:Se([Fe.config({store:{mode:"manual",getValue:s=>t.data,setValue:ee}})])})})]),GO=t=>{const s=Sd($w(),t,Lw()),a=Su($w(),t,s.internals()),i=m=>Mn(m,t,"widget").map(f=>(Ke.focusIn(f),f)),u=(m,f)=>Hg(f.event.target)?x.none():(t.autofocus&&f.setSource(m.element),x.none());return{dom:t.dom,components:a,domModification:t.domModification,events:Wn([ku((m,f)=>{i(m).each(p=>{f.stop()})}),me(ui(),Iw),me(wg(),(m,f)=>{t.autofocus?i(m):ft.focus(m)})]),behaviours:bi.augment(t.widgetBehaviours,[Fe.config({store:{mode:"memory",initialValue:t.data}}),ft.config({ignore:t.ignoreFocus,onFocus:m=>{Fw(m)}}),Ke.config({mode:"special",focusIn:t.autofocus?m=>{i(m)}:gv(),onLeft:u,onRight:u,onEscape:(m,f)=>!ft.isFocused(m)&&!t.autofocus?(ft.focus(m),x.some(!0)):(t.autofocus&&f.setSource(m.element),x.none())})])}};var qO=[be("uid"),be("data"),be("components"),be("dom"),J("autofocus",!1),J("ignoreFocus",!1),bi.field("widgetBehaviours",[Fe,ft,Ke]),J("domModification",{}),Yb(Lw()),An("builder",GO)];const S$=ba("type",{widget:qO,item:C$,separator:x$}),w$=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),E$=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),_$=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),T$=Y([$p({factory:{sketch:t=>{const s=Kr("menu.spec item",S$,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>Qt(s,"uid")?s:{...s,uid:qg("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),x2=Y([No("role"),be("value"),be("items"),be("dom"),be("components"),J("eventOrder",{}),us("menuBehaviours",[dn,Fe,Kt,Ke]),ii("movement",{mode:"menu",moveOnTab:!0},ba("mode",{grid:[Tg(),An("config",w$)],matrix:[An("config",E$),be("rowSelector"),J("previousSelector",x.none)],menu:[J("moveOnTab",!0),An("config",_$)]})),$j(),J("fakeFocus",!1),J("focusManager",Xx()),an("onHighlight"),an("onDehighlight"),J("showMenuRole",!0)]),KO=Y("alloy.menu-focus"),YO=(t,s)=>{const a=Zn(t.element,'[role="menuitemradio"][aria-checked="true"]');ze(a,i=>{xn(i,s.element)||t.getSystem().getByDom(i).each(u=>{Bt.off(u)})})},k$=(t,s,a,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Bs(t.menuBehaviours,[dn.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Fe.config({store:{mode:"memory",initialValue:t.value}}),Kt.config({find:x.some}),Ke.config(t.movement.config(t,t.movement))]),events:Wn([me(zO(),(u,m)=>{const f=m.event;u.getSystem().getByDom(f.target).each(p=>{dn.highlight(u,p),m.stop(),rt(u,KO(),{menu:u,item:p})})}),me(y2(),(u,m)=>{const f=m.event.item;dn.highlight(u,f)}),me(v$(),(u,m)=>{const{item:f,state:p}=m.event;p&&Go(f.element,"role")==="menuitemradio"&&YO(u,f)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),Hl=_r({name:"Menu",configFields:x2(),partFields:T$(),factory:k$}),XO=t=>nc(t,(s,a)=>({k:s,v:a})),JO=(t,s,a,i)=>Le(a,i).bind(u=>Le(t,u).bind(m=>{const f=JO(t,s,a,m);return x.some([m].concat(f))})).getOr([]),QO=(t,s)=>{const a={};Oo(t,(f,p)=>{ze(f,b=>{a[b]=p})});const i=s,u=XO(s),m=Vn(u,(f,p)=>[p].concat(JO(a,i,u,p)));return Vn(a,f=>Le(m,f).getOr([f]))},e5=()=>{const t=tt({}),s=tt({}),a=tt({}),i=tn(),u=tt({}),m=()=>{t.set({}),s.set({}),a.set({}),i.clear()},f=()=>i.get().isNone(),p=(ce,Pe)=>{s.set({...s.get(),[ce]:{type:"prepared",menu:Pe}})},b=(ce,Pe,ye,ie)=>{i.set(ce),t.set(ye),s.set(Pe),u.set(ie);const $e=QO(ie,ye);a.set($e)},C=ce=>bs(t.get(),(Pe,ye)=>Pe===ce),S=(ce,Pe,ye)=>H(ce).bind(ie=>C(ce).bind($e=>Pe($e).map(lt=>({triggeredMenu:ie,triggeringItem:lt,triggeringPath:ye})))),_=(ce,Pe)=>{const ye=Pn(L(ce).toArray(),ie=>H(ie).isSome());return Le(a.get(),ce).bind(ie=>{const $e=da(ye.concat(ie)),lt=de($e,(Je,zt)=>S(Je,Pe,$e.slice(0,zt+1)).fold(()=>jr(i.get(),Je)?[]:[x.none()],pt=>[x.some(pt)]));return ap(lt)})},A=ce=>Le(t.get(),ce).map(Pe=>{const ye=Le(a.get(),ce).getOr([]);return[Pe].concat(ye)}),N=ce=>Le(a.get(),ce).bind(Pe=>Pe.length>1?x.some(Pe.slice(1)):x.none()),I=ce=>Le(a.get(),ce),H=ce=>Z(ce).bind(Hw),Z=ce=>Le(s.get(),ce),L=ce=>Le(t.get(),ce);return{setMenuBuilt:p,setContents:b,expand:A,refresh:I,collapse:N,lookupMenu:Z,lookupItem:L,otherMenus:ce=>{const Pe=u.get();return gt(Yn(Pe),ce)},getPrimary:()=>i.get().bind(H),getMenus:()=>s.get(),clear:m,isClear:f,getTriggeringPath:_}},Hw=t=>t.type==="prepared"?x.some(t.menu):x.none(),Vw={init:e5,extractPreparedMenu:Hw},t5=Ie("tiered-menu-item-highlight"),n5=Ie("tiered-menu-item-dehighlight"),A$=(t,s)=>{const a=tn(),i=(pe,Ae,dt)=>Vn(dt,(At,st)=>{const Tt=()=>Hl.sketch({...At,value:st,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(kn,Sn)=>{rt(kn,t5,{menuComp:kn,itemComp:Sn})},onDehighlight:(kn,Sn)=>{rt(kn,n5,{menuComp:kn,itemComp:Sn})},focusManager:t.fakeFocus?LP():Xx()});return st===Ae?{type:"prepared",menu:pe.getSystem().build(Tt())}:{type:"notbuilt",nbMenu:Tt}}),u=Vw.init(),m=pe=>{const Ae=i(pe,t.data.primary,t.data.menus),dt=b();return u.setContents(t.data.primary,Ae,t.data.expansions,dt),u.getPrimary()},f=pe=>Fe.getValue(pe).value,p=(pe,Ae,dt)=>Xt(Ae,At=>{if(!At.getSystem().isConnected())return x.none();const st=dn.getCandidates(At);return St(st,Tt=>f(Tt)===dt)}),b=pe=>Vn(t.data.menus,(Ae,dt)=>de(Ae.items,At=>At.type==="separator"?[]:[At.data.value])),C=dn.highlight,S=(pe,Ae)=>{C(pe,Ae),dn.getHighlighted(Ae).orThunk(()=>dn.getFirst(Ae)).each(dt=>{t.fakeFocus?dn.highlight(Ae,dt):jp(pe,dt.element,wg())})},_=(pe,Ae)=>Pi(Ce(Ae,dt=>pe.lookupMenu(dt).bind(At=>At.type==="prepared"?x.some(At.menu):x.none()))),A=(pe,Ae,dt)=>{const At=_(Ae,Ae.otherMenus(dt));ze(At,st=>{La(st.element,[t.markers.backgroundMenu]),t.stayInDom||Et.remove(pe,st)})},N=pe=>a.get().getOrThunk(()=>{const Ae={},dt=Zn(pe.element,`.${t.markers.item}`),At=Pn(dt,st=>Go(st,"aria-haspopup")==="true");return ze(At,st=>{pe.getSystem().getByDom(st).each(Tt=>{const kn=f(Tt);Ae[kn]=Tt})}),a.set(Ae),Ae}),I=(pe,Ae)=>{const dt=N(pe);Oo(dt,(At,st)=>{const Tt=In(Ae,st);vt(At.element,"aria-expanded",Tt)})},H=(pe,Ae,dt)=>x.from(dt[0]).bind(At=>Ae.lookupMenu(At).bind(st=>{if(st.type==="notbuilt")return x.none();{const Tt=st.menu,kn=_(Ae,dt.slice(1));return ze(kn,Sn=>{bo(Sn.element,t.markers.backgroundMenu)}),wo(Tt.element)||Et.append(pe,Za(Tt)),La(Tt.element,[t.markers.backgroundMenu]),S(pe,Tt),A(pe,Ae,dt),x.some(Tt)}}));let Z;(function(pe){pe[pe.HighlightSubmenu=0]="HighlightSubmenu",pe[pe.HighlightParent=1]="HighlightParent"})(Z||(Z={}));const L=(pe,Ae,dt)=>{if(dt.type==="notbuilt"){const At=pe.getSystem().build(dt.nbMenu());return u.setMenuBuilt(Ae,At),At}else return dt.menu},j=(pe,Ae,dt=Z.HighlightSubmenu)=>{if(Ae.hasConfigured(Xe)&&Xe.isDisabled(Ae))return x.some(Ae);{const At=f(Ae);return u.expand(At).bind(st=>(I(pe,st),x.from(st[0]).bind(Tt=>u.lookupMenu(Tt).bind(kn=>{const Sn=L(pe,Tt,kn);return wo(Sn.element)||Et.append(pe,Za(Sn)),t.onOpenSubmenu(pe,Ae,Sn,da(st)),dt===Z.HighlightSubmenu?(dn.highlightFirst(Sn),H(pe,u,st)):(dn.dehighlightAll(Sn),x.some(Ae))}))))}},G=(pe,Ae)=>{const dt=f(Ae);return u.collapse(dt).bind(At=>(I(pe,At),H(pe,u,At).map(st=>(t.onCollapseMenu(pe,Ae,st),st))))},ne=(pe,Ae)=>{const dt=f(Ae);return u.refresh(dt).bind(At=>(I(pe,At),H(pe,u,At)))},ce=(pe,Ae)=>Hg(Ae.element)?x.none():j(pe,Ae,Z.HighlightSubmenu),Pe=(pe,Ae)=>Hg(Ae.element)?x.none():G(pe,Ae),ye=(pe,Ae)=>G(pe,Ae).orThunk(()=>t.onEscape(pe,Ae).map(()=>pe)),ie=pe=>(Ae,dt)=>Sl(dt.getSource(),`.${t.markers.item}`).bind(At=>Ae.getSystem().getByDom(At).toOptional().bind(st=>pe(Ae,st).map(it))),$e=Wn([me(KO(),(pe,Ae)=>{const dt=Ae.event.item;u.lookupItem(f(dt)).each(()=>{const At=Ae.event.menu;dn.highlight(pe,At);const st=f(Ae.event.item);u.refresh(st).each(Tt=>A(pe,u,Tt))})}),ku((pe,Ae)=>{const dt=Ae.event.target;pe.getSystem().getByDom(dt).each(At=>{f(At).indexOf("collapse-item")===0&&G(pe,At),j(pe,At,Z.HighlightSubmenu).fold(()=>{t.onExecute(pe,At)},ee)})}),$n((pe,Ae)=>{m(pe).each(dt=>{Et.append(pe,Za(dt)),t.onOpenMenu(pe,dt),t.highlightOnOpen===Ir.HighlightMenuAndItem?S(pe,dt):t.highlightOnOpen===Ir.HighlightJustMenu&&C(pe,dt)})}),me(t5,(pe,Ae)=>{t.onHighlightItem(pe,Ae.event.menuComp,Ae.event.itemComp)}),me(n5,(pe,Ae)=>{t.onDehighlightItem(pe,Ae.event.menuComp,Ae.event.itemComp)}),...t.navigateOnHover?[me(y2(),(pe,Ae)=>{const dt=Ae.event.item;ne(pe,dt),j(pe,dt,Z.HighlightParent),t.onHover(pe,dt)})]:[]]),lt=pe=>dn.getHighlighted(pe).bind(dn.getHighlighted),Je=pe=>{lt(pe).each(Ae=>{G(pe,Ae)})},zt=pe=>{u.getPrimary().each(Ae=>{S(pe,Ae)})},pt=pe=>x.from(pe.components()[0]).filter(Ae=>Go(Ae.element,"role")==="menu"),Ge={collapseMenu:Je,highlightPrimary:zt,repositionMenus:pe=>{u.getPrimary().bind(dt=>lt(pe).bind(At=>{const st=f(At),Tt=Xu(u.getMenus()),kn=Pi(Ce(Tt,Vw.extractPreparedMenu));return u.getTriggeringPath(st,Sn=>p(pe,kn,Sn))}).map(At=>({primary:dt,triggeringPath:At}))).fold(()=>{pt(pe).each(dt=>{t.onRepositionMenu(pe,dt,[])})},({primary:dt,triggeringPath:At})=>{t.onRepositionMenu(pe,dt,At)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Bs(t.tmenuBehaviours,[Ke.config({mode:"special",onRight:ie(ce),onLeft:ie(Pe),onEscape:ie(ye),focusIn:(pe,Ae)=>{u.getPrimary().each(dt=>{jp(pe,dt.element,wg())})}}),dn.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Kt.config({find:pe=>dn.getHighlighted(pe)}),Et.config({})]),eventOrder:t.eventOrder,apis:Ge,events:$e}},O$=Y("collapse-item"),o5=(t,s,a)=>({primary:t,menus:s,expansions:a}),s5=(t,s)=>({primary:t,menus:Tm(t,s),expansions:{}}),D$=t=>({value:Ie(O$()),meta:{text:t}}),cf=ja({name:"TieredMenu",configFields:[Rm("onExecute"),Rm("onEscape"),is("onOpenMenu"),is("onOpenSubmenu"),an("onRepositionMenu"),an("onCollapseMenu"),J("highlightOnOpen",Ir.HighlightMenuAndItem),ci("data",[be("primary"),be("menus"),be("expansions")]),J("fakeFocus",!1),an("onHighlightItem"),an("onDehighlightItem"),an("onHover"),Cx(),be("dom"),J("navigateOnHover",!0),J("stayInDom",!1),us("tmenuBehaviours",[Ke,dn,Kt,Et]),J("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:A$,extraApis:{tieredData:o5,singleData:s5,collapseItem:D$}}),r5=Y("sink"),a5=Y(Uo({name:r5(),overrides:Y({dom:{tag:"div"},behaviours:Se([ir.config({useFixed:it})]),events:Wn([Td(Ui()),Td(Ca()),Td(bd())])})})),M$=Ha([J("isExtraPart",pn),ya("fireEventInstead",[J("event",bu())])]),zw=t=>{const s=Kr("Dismissal",M$,t);return{[Ll()]:{schema:Ha([be("target")]),onReceive:(a,i)=>{on.isOpen(a)&&(on.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>on.close(a),m=>qt(a,m.event)))}}}},R$=Ha([ya("fireEventInstead",[J("event",mT())]),ai("doReposition")]),Uw=t=>{const s=Kr("Reposition",R$,t);return{[Bd()]:{onReceive:a=>{on.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>qt(a,i.event))}}}},S2=(t,s)=>{const a=t.getHotspot(s).getOr(s),i="hotspot",u=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:a,overrides:u}),m=>({type:i,hotspot:a,overrides:u,layouts:m}))},c5=(t,s,a)=>{const i=t.fetch;return i(a).map(s)},N$=(t,s,a,i,u,m,f)=>{const p=c5(t,s,i),b=Ww(i,t);return p.map(C=>C.bind(S=>{const _=S.menus[S.primary];return x.from(_).each(A=>{t.listRole.each(N=>{A.role=N})}),x.from(cf.sketch({...m.menu(),uid:qg(""),data:S,highlightOnOpen:f,onOpenMenu:(A,N)=>{const I=b().getOrDie();ir.position(I,N,{anchor:a}),on.decloak(u)},onOpenSubmenu:(A,N,I)=>{const H=b().getOrDie();ir.position(H,I,{anchor:{type:"submenu",item:N}}),on.decloak(u)},onRepositionMenu:(A,N,I)=>{const H=b().getOrDie();ir.position(H,N,{anchor:a}),ze(I,Z=>{ir.position(H,Z.triggeredMenu,{anchor:{type:"submenu",item:Z.triggeringItem}})})},onEscape:()=>(ft.focus(i),on.close(u),x.some(!0))}))}))},w2=(t,s,a,i,u,m,f)=>{const p=S2(t,a);return N$(t,s,p,a,i,u,f).map(C=>(C.fold(()=>{on.isOpen(i)&&on.close(i)},S=>{on.cloak(i),on.open(i,S),m(i)}),i))},i5=(t,s,a,i,u,m,f)=>(on.close(i),So.pure(i)),Zw=(t,s,a,i,u,m)=>{const f=lo.getCoupled(a,"sandbox");return(on.isOpen(f)?i5:w2)(t,s,a,f,i,u,m)},B$=(t,s,a)=>{const i=Kt.getCurrent(s).getOr(s),u=Yo(t.element);a?_t(i.element,"min-width",u+"px"):hb(i.element,u)},Ww=(t,s)=>t.getSystem().getByUid(s.uid+"-"+r5()).map(a=>()=>Nt.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Nt.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),jw=t=>{on.getState(t).each(s=>{cf.repositionMenus(s)})},E2=(t,s,a)=>{const i=Pw(),u=(p,b)=>{const C=S2(t,s);i.link(s.element),t.matchWidth&&B$(C.hotspot,b,t.useMinWidth),t.onOpen(C,p,b),a!==void 0&&a.onOpen!==void 0&&a.onOpen(p,b)},m=(p,b)=>{i.unlink(s.element),f().getOr(b).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(p,b)},f=Ww(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id}},behaviours:bi.augment(t.sandboxBehaviours,[Fe.config({store:{mode:"memory",initialValue:s}}),on.config({onOpen:u,onClose:m,isPartOf:(p,b,C)=>af(b,C)||af(s,C),getAttachPoint:()=>f().getOrDie()}),Kt.config({find:p=>on.getState(p).bind(b=>Kt.getCurrent(b))}),$r.config({channels:{...zw({isExtraPart:pn}),...Uw({doReposition:jw})}})])}},l5=t=>{const s=lo.getCoupled(t,"sandbox");jw(s)},Gw=()=>[J("sandboxClasses",[]),bi.field("sandboxBehaviours",[Kt,$r,on,Fe])],P$=Y([be("dom"),be("fetch"),an("onOpen"),zo("onExecute"),J("getHotspot",x.some),J("getAnchorOverrides",Y({})),Rd(),us("dropdownBehaviours",[Bt,lo,Ke,ft]),be("toggleClass"),J("eventOrder",{}),bn("lazySink"),J("matchWidth",!1),J("useMinWidth",!1),bn("role"),bn("listRole")].concat(Gw())),u5=Y([rr({schema:[Cx(),J("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),a5()]),qw=(t,s,a,i)=>{const u=S=>Le(t.dom,"attributes").bind(_=>Le(_,S)),m=S=>{on.getState(S).each(_=>{cf.highlightPrimary(_)})},f=(S,_,A)=>Zw(t,Lt,S,i,_,A),p=S=>{f(S,m,Ir.HighlightMenuAndItem).get(ee)},b={expand:S=>{Bt.isOn(S)||f(S,ee,Ir.HighlightNone).get(ee)},open:S=>{Bt.isOn(S)||f(S,ee,Ir.HighlightMenuAndItem).get(ee)},refetch:S=>lo.getExistingCoupled(S,"sandbox").fold(()=>f(S,ee,Ir.HighlightMenuAndItem).map(ee),A=>w2(t,Lt,S,A,i,ee,Ir.HighlightMenuAndItem).map(ee)),isOpen:Bt.isOn,close:S=>{Bt.isOn(S)&&f(S,ee,Ir.HighlightMenuAndItem).get(ee)},repositionMenus:S=>{Bt.isOn(S)&&l5(S)}},C=(S,_)=>(Fm(S),x.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:Bs(t.dropdownBehaviours,[Bt.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),lo.config({others:{sandbox:S=>E2(t,S,{onOpen:()=>Bt.on(S),onClose:()=>Bt.off(S)})}}),Ke.config({mode:"special",onSpace:C,onEnter:C,onDown:(S,_)=>{if(Ga.isOpen(S)){const A=lo.getCoupled(S,"sandbox");m(A)}else Ga.open(S);return x.some(!0)},onEscape:(S,_)=>Ga.isOpen(S)?(Ga.close(S),x.some(!0)):x.none()}),ft.config({})]),events:p2(x.some(p)),eventOrder:{...t.eventOrder,[Ua()]:["disabling","toggling","alloy.base.behaviour"]},apis:b,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),S=>({role:S})),...t.dom.tag==="button"?{type:u("type").getOr("button")}:{}}}}},Ga=_r({name:"Dropdown",configFields:P$(),partFields:u5(),factory:qw,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),d5="form",I$=[us("formBehaviours",[Fe])],m5=t=>"<alloy.field."+t+">",F$=t=>{const s=(()=>{const m=[];return{field:(p,b)=>(m.push(p),Dx(d5,m5(p),b)),record:Y(m)}})(),a=t(s),i=s.record(),u=Ce(i,m=>Xo({name:m,pname:m5(m)}));return Km(d5,I$,u,f5,a)},$$=(t,s)=>t.fold(()=>Nt.error(s),Nt.value),f5=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Bs(t.formBehaviours,[Fe.config({store:{mode:"manual",getValue:a=>{const i=Mg(a,t);return Vn(i,(u,m)=>u().bind(f=>{const p=Kt.getCurrent(f);return $$(p,new Error(`Cannot find a current component to extract the value from for form part '${m}': `+wn(f.element)))}).map(Fe.getValue))},setValue:(a,i)=>{Oo(i,(u,m)=>{Mn(a,t,m).each(f=>{Kt.getCurrent(f).each(p=>{Fe.setValue(p,u)})})})}}})]),apis:{getField:(a,i)=>Mn(a,t,i).bind(Kt.getCurrent)}}),lf={getField:jg((t,s,a)=>t.getField(s,a)),sketch:F$},oh=Y([be("dom"),J("shell",!0),us("toolbarBehaviours",[Et])]),L$=Y([Uo({name:"groups",overrides:()=>({behaviours:Se([Et.config({})])})})]),_a=(t,s,a,i)=>{const u=(p,b)=>{m(p).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},C=>{Et.set(C,b)})},m=p=>t.shell?x.some(p):Mn(p,t,"groups"),f=t.shell?{behaviours:[Et.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:f.components,behaviours:Bs(t.toolbarBehaviours,f.behaviours),apis:{setGroups:u,refresh:ee},domModification:{attributes:{role:"group"}}}},Es=_r({name:"Toolbar",configFields:oh(),partFields:L$(),factory:_a,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),g5=Y([_g(["toggledClass"]),be("lazySink"),ai("fetch"),Vi("getBounds"),ya("fireDismissalEventInstead",[J("event",bu())]),Rd(),an("onToggled")]),Kw=Y([rr({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Se([Bt.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),rr({factory:Es,schema:oh(),name:"toolbar",overrides:t=>({toolbarBehaviours:Se([Ke.config({mode:"cyclic",onEscape:s=>(Mn(s,t,"button").each(ft.focus),x.none())})])})})]),sh=tn(),_2=(t,s)=>{sh.set(!0),Yw(t,s),sh.clear()},Yw=(t,s)=>{const a=lo.getCoupled(t,"toolbarSandbox");on.isOpen(a)?on.close(a):on.open(a,s.toolbar())},T2=(t,s,a,i)=>{const u=a.getBounds.map(f=>f()),m=a.lazySink(t).getOrDie();ir.positionWithinBounds(m,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:iv()}}},u)},rh=(t,s,a,i,u)=>{Es.setGroups(s,u),T2(t,s,a,i),Bt.on(t)},H$=(t,s,a)=>{const i=Pw(),u=(f,p)=>{const b=sh.get().getOr(!1);a.fetch().get(C=>{rh(t,p,a,s.layouts,C),i.link(t.element),b||Ke.focusIn(p)})},m=()=>{Bt.off(t),sh.get().getOr(!1)||ft.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:Se([Ke.config({mode:"special",onEscape:f=>(on.close(f),x.some(!0))}),on.config({onOpen:u,onClose:m,isPartOf:(f,p,b)=>af(p,b)||af(t,b),getAttachPoint:()=>a.lazySink(t).getOrDie()}),$r.config({channels:{...zw({isExtraPart:pn,...a.fireDismissalEventInstead.map(f=>({fireEventInstead:{event:f.event}})).getOr({})}),...Uw({doReposition:()=>{on.getState(lo.getCoupled(t,"toolbarSandbox")).each(f=>{T2(t,f,a,s.layouts)})}})}})])}},Vl=_r({name:"FloatingToolbarButton",factory:(t,s,a,i)=>({...ws.sketch({...i.button(),action:u=>{Yw(u,i)},buttonBehaviours:bi.augment({dump:i.button().buttonBehaviours},[lo.config({others:{toolbarSandbox:u=>H$(u,a,t)}})])}),apis:{setGroups:(u,m)=>{on.getState(lo.getCoupled(u,"toolbarSandbox")).each(f=>{rh(u,f,t,a.layouts,m)})},reposition:u=>{on.getState(lo.getCoupled(u,"toolbarSandbox")).each(m=>{T2(u,m,t,a.layouts)})},toggle:u=>{Yw(u,i)},toggleWithoutFocusing:u=>{_2(u,i)},getToolbar:u=>on.getState(lo.getCoupled(u,"toolbarSandbox")),isOpen:u=>on.isOpen(lo.getCoupled(u,"toolbarSandbox"))}}),configFields:g5(),partFields:Kw(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),h5=Y([J("prefix","form-field"),us("fieldBehaviours",[Kt,Fe])]),B1=Y([Uo({schema:[be("dom")],name:"label"}),Uo({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[be("text")],name:"aria-descriptor"}),Xo({factory:{sketch:t=>{const s=lT(t,["factory"]);return t.factory.sketch(s)}},schema:[be("factory")],name:"field"})]),V$=(t,s,a,i)=>{const u=Bs(t.fieldBehaviours,[Kt.config({find:p=>Mn(p,t,"field")}),Fe.config({store:{mode:"manual",getValue:p=>Kt.getCurrent(p).bind(Fe.getValue),setValue:(p,b)=>{Kt.getCurrent(p).each(C=>{Fe.setValue(C,b)})}}})]),m=Wn([$n((p,b)=>{const C=Rx(p,t,["label","field","aria-descriptor"]);C.field().each(S=>{const _=Ie(t.prefix);C.label().each(A=>{vt(A.element,"for",_),vt(S.element,"id",_)}),C["aria-descriptor"]().each(A=>{const N=Ie(t.prefix);vt(A.element,"id",N),vt(S.element,"aria-describedby",N)})})})]),f={getField:p=>Mn(p,t,"field"),getLabel:p=>Mn(p,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:u,events:m,apis:f}},Vt=_r({name:"FormField",configFields:h5(),partFields:B1(),factory:V$,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}}),qi=Y([J("field1Name","field1"),J("field2Name","field2"),is("onLockedChange"),_g(["lockClass"]),J("locked",!1),bi.field("coupledFieldBehaviours",[Kt,Fe]),Ln("onInput",ee)]),Ta=(t,s,a)=>Mn(t,s,a).bind(Kt.getCurrent),ah=(t,s)=>Xo({factory:Vt,name:t,overrides:a=>({fieldBehaviours:Se([yt("coupled-input-behaviour",[me(pu(),i=>{Ta(i,a,s).each(u=>{Mn(i,a,"lock").each(m=>{Bt.isOn(m)&&a.onLockedChange(i,u,m),a.onInput(i)})})})])])})}),ka=Y([ah("field1","field2"),ah("field2","field1"),Xo({factory:ws,schema:[be("dom")],name:"lock",overrides:t=>({buttonBehaviours:Se([Bt.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),z$=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:bi.augment(t.coupledFieldBehaviours,[Kt.config({find:x.some}),Fe.config({store:{mode:"manual",getValue:u=>{const m=Nx(u,t,["field1","field2"]);return{[t.field1Name]:Fe.getValue(m.field1()),[t.field2Name]:Fe.getValue(m.field2())}},setValue:(u,m)=>{const f=Nx(u,t,["field1","field2"]);Ks(m,t.field1Name)&&Fe.setValue(f.field1(),m[t.field1Name]),Ks(m,t.field2Name)&&Fe.setValue(f.field2(),m[t.field2Name])}}})]),apis:{getField1:u=>Mn(u,t,"field1"),getField2:u=>Mn(u,t,"field2"),getLock:u=>Mn(u,t,"lock")}}),Rt=_r({name:"FormCoupledInputs",configFields:qi(),partFields:ka(),factory:z$,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),U$=(t,s)=>{const a=Ce(t.options,u=>({dom:{tag:"option",value:u.value,innerHtml:u.text}})),i=t.data.map(u=>Tm("initialValue",u)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:Bs(t.selectBehaviours,[ft.config({}),Fe.config({store:{mode:"manual",getValue:u=>ni(u.element),setValue:(u,m)=>{const f=Gs(t.options);St(t.options,b=>b.value===m).isSome()?Cm(u.element,m):u.element.dom.selectedIndex===-1&&m===""&&f.each(b=>Cm(u.element,b.value))},...i}})])}},uf=ja({name:"HtmlSelect",configFields:[be("options"),us("selectBehaviours",[ft,Fe]),J("selectClasses",[]),J("selectAttributes",{}),bn("data")],factory:U$}),P1=(t,s,a,i,u)=>{const m=()=>t.lazySink(s),f=i.type==="horizontal"?{layouts:{onLtr:()=>_u(),onRtl:()=>zx()}}:{},p=C=>C.length===2,b=C=>p(C)?f:{};return cf.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(on.close(s),t.onEscape.map(C=>C(s)),x.some(!0)),onExecute:()=>x.some(!0),onOpenMenu:(C,S)=>{ir.positionWithinBounds(m().getOrDie(),S,a,u())},onOpenSubmenu:(C,S,_,A)=>{const N=m().getOrDie();ir.position(N,_,{anchor:{type:"submenu",item:S,...b(A)}})},onRepositionMenu:(C,S,_)=>{const A=m().getOrDie();ir.positionWithinBounds(A,S,a,u()),ze(_,N=>{const I=b(N.triggeringPath);ir.position(A,N.triggeredMenu,{anchor:{type:"submenu",item:N.triggeringItem,...I}})})}})},p5=(t,s)=>{const a=(A,N)=>t.getRelated(A).exists(H=>af(H,N)),i=(A,N)=>{on.setContent(A,N)},u=(A,N,I)=>{const H=x.none;m(A,N,I,H)},m=(A,N,I,H)=>{const Z=t.lazySink(A).getOrDie();on.openWhileCloaked(A,N,()=>ir.positionWithinBounds(Z,A,I,H())),Fe.setValue(A,x.some({mode:"position",config:I,getBounds:H}))},f=(A,N,I)=>{p(A,N,I,x.none)},p=(A,N,I,H)=>{const Z=P1(t,A,N,I,H);on.open(A,Z),Fe.setValue(A,x.some({mode:"menu",menu:Z}))},b=A=>{on.isOpen(A)&&(Fe.setValue(A,x.none()),on.close(A))},C=A=>on.getState(A),S=A=>{on.isOpen(A)&&Fe.getValue(A).each(N=>{switch(N.mode){case"menu":on.getState(A).each(cf.repositionMenus);break;case"position":const I=t.lazySink(A).getOrDie();ir.positionWithinBounds(I,A,N.config,N.getBounds());break}})},_={setContent:i,showAt:u,showWithinBounds:m,showMenuAt:f,showMenuWithinBounds:p,hide:b,getContent:C,reposition:S,isOpen:on.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Bs(t.inlineBehaviours,[on.config({isPartOf:(A,N,I)=>af(N,I)||a(A,I),getAttachPoint:A=>t.lazySink(A).getOrDie(),onOpen:A=>{t.onShow(A)},onClose:A=>{t.onHide(A)}}),Fe.config({store:{mode:"memory",initialValue:x.none()}}),$r.config({channels:{...zw({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(A=>({fireEventInstead:{event:A.event}})).getOr({})}),...Uw({...t.fireRepositionEventInstead.map(A=>({fireEventInstead:{event:A.event}})).getOr({}),doReposition:S})}})]),eventOrder:t.eventOrder,apis:_}},qn=ja({name:"InlineView",configFields:[be("lazySink"),an("onShow"),an("onHide"),Vi("onEscape"),us("inlineBehaviours",[on,Fe,$r]),ya("fireDismissalEventInstead",[J("event",bu())]),ya("fireRepositionEventInstead",[J("event",mT())]),J("getRelated",x.none),J("isExtraPart",pn),J("eventOrder",x.none)],factory:p5,apis:{showAt:(t,s,a,i)=>{t.showAt(s,a,i)},showWithinBounds:(t,s,a,i,u)=>{t.showWithinBounds(s,a,i,u)},showMenuAt:(t,s,a,i)=>{t.showMenuAt(s,a,i)},showMenuWithinBounds:(t,s,a,i,u)=>{t.showMenuWithinBounds(s,a,i,u)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}}),k2=Y([Fn("type","text"),bn("data"),J("inputAttributes",{}),J("inputStyles",{}),J("tag","input"),J("inputClasses",[]),an("onSetValue"),Ln("fromInputValue",Lt),Ln("toInputValue",Lt),J("styles",{}),J("eventOrder",{}),us("inputBehaviours",[Fe,ft]),J("selectOnFocus",!0)]),b5=t=>Se([ft.config({onFocus:t.selectOnFocus?s=>{const a=s.element,i=ni(a);t.type!=="range"&&a.dom.setSelectionRange(0,i.length)}:ee})]),Jw=t=>({...b5(t),...Bs(t.inputBehaviours,[Fe.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>t.fromInputValue(ni(s.element)),setValue:(s,a)=>{ni(s.element)!==a&&Cm(s.element,t.toInputValue(a))}},onSetValue:t.onSetValue})])}),v5=t=>({tag:t.tag,attributes:{type:t.type,...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),y5=(t,s)=>({uid:t.uid,dom:v5(t),components:[],behaviours:Jw(t),eventOrder:t.eventOrder}),zl=ja({name:"Input",configFields:k2(),factory:y5}),I1=Dg($w(),Lw()),C5=(t,s)=>{const a=qo(t,"id").fold(()=>{const i=Ie("dialog-label");return vt(s,"id",i),i},Lt);vt(t,"aria-labelledby",a)},A2=Y([be("lazySink"),bn("dragBlockClass"),Ln("getBounds",or),J("useTabstopAt",it),J("firstTabstop",0),J("eventOrder",{}),us("modalBehaviours",[Ke]),zo("onExecute"),Rm("onEscape")]),Qw={sketch:Lt},Z$=Y([Uo({name:"draghandle",overrides:(t,s)=>({behaviours:Se([Ym.config({mode:"mouse",getTarget:a=>ti(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Xo({schema:[be("dom")],name:"title"}),Xo({factory:Qw,schema:[be("dom")],name:"close"}),Xo({factory:Qw,schema:[be("dom")],name:"body"}),Uo({factory:Qw,schema:[be("dom")],name:"footer"}),rr({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[J("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),J("components",[])],name:"blocker"})]),W$=(t,s,a,i)=>{const u=tn(),m=I=>{u.set(I);const H=t.lazySink(I).getOrDie(),Z=i.blocker(),L=H.getSystem().build({...Z,components:Z.components.concat([Za(I)]),behaviours:Se([ft.config({}),yt("dialog-blocker-events",[Pg(sr(),()=>{pi.isBlocked(I)?ee():Ke.focusIn(I)})])])});hi(H,L),Ke.focusIn(I)},f=I=>{u.clear(),br(I.element).each(H=>{I.getSystem().getByDom(H).each(Z=>{Qo(Z)})})},p=I=>wd(I,t,"body"),b=I=>Mn(I,t,"footer"),C=(I,H)=>{pi.block(I,H)},S=I=>{pi.unblock(I)},_=Ie("modal-events"),A={...t.eventOrder,[fc()]:[_].concat(t.eventOrder["alloy.system.attached"]||[])},N=Br();return{uid:t.uid,dom:t.dom,components:s,apis:{show:m,hide:f,getBody:p,getFooter:b,setIdle:S,setBusy:C},eventOrder:A,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Bs(t.modalBehaviours,[Et.config({}),Ke.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),pi.config({getRoot:u.get}),yt(_,[$n(I=>{const H=wd(I,t,"title").element,Z=QB(H);N.os.isMacOS()&&Qn(Z)?vt(I.element,"aria-label",Z):C5(I.element,H)})])])}},es=_r({name:"ModalDialog",configFields:A2(),partFields:Z$(),factory:W$,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),j$=Uo({schema:[be("dom")],name:"label"}),Iu=t=>Uo({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:Wn([jx(hu(),(u,m,f)=>i(u,f),[s]),jx(Ca(),(u,m,f)=>i(u,f),[s]),jx(Dp(),(u,m,f)=>{f.mouseIsDown.get()&&i(u,f)},[s])])}))}),G$=Iu("top-left"),q$=Iu("top"),x5=Iu("top-right"),K$=Iu("right"),S5=Iu("bottom-right"),F1=Iu("bottom"),Y$=Iu("bottom-left"),X$=Iu("left"),w5=Xo({name:"thumb",defaults:Y({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Wn([Bg(hu(),t,"spectrum"),Bg(pd(),t,"spectrum"),Bg(zi(),t,"spectrum"),Bg(Ca(),t,"spectrum"),Bg(Dp(),t,"spectrum"),Bg($b(),t,"spectrum")])})}),$1=t=>kd(t.event),e4=Xo({schema:[wr("mouseIsDown",()=>tt(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,i=(u,m)=>a.getValueFromEvent(m).map(f=>a.setValueFrom(u,t,f));return{behaviours:Se([Ke.config({mode:"special",onLeft:(u,m)=>a.onLeft(u,t,$1(m)),onRight:(u,m)=>a.onRight(u,t,$1(m)),onUp:(u,m)=>a.onUp(u,t,$1(m)),onDown:(u,m)=>a.onDown(u,t,$1(m))}),Rn.config({}),ft.config({})]),events:Wn([me(hu(),i),me(pd(),i),me(Ca(),i),me(Dp(),(u,m)=>{t.mouseIsDown.get()&&i(u,m)})])}}});var E5=[j$,X$,K$,q$,F1,G$,x5,Y$,S5,w5,e4];const L1=Y("slider.change.value"),J$=t=>t.type.indexOf("touch")!==-1,t4=t=>{const s=t.event.raw;if(J$(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?x.some(a.touches[0]).map(i=>po(i.clientX,i.clientY)):x.none()}else{const a=s;return a.clientX!==void 0?x.some(a).map(i=>po(i.clientX,i.clientY)):x.none()}},Q$="top",eL="right",_5="bottom",yi="left",df=t=>t.model.minX,Fu=t=>t.model.minY,H1=t=>t.model.minX-1,V1=t=>t.model.minY-1,mf=t=>t.model.maxX,Pd=t=>t.model.maxY,z1=t=>t.model.maxX+1,U1=t=>t.model.maxY+1,T5=(t,s,a)=>s(t)-a(t),n4=t=>T5(t,mf,df),o4=t=>T5(t,Pd,Fu),k5=t=>n4(t)/2,A5=t=>o4(t)/2,ch=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,O5=t=>t.snapToGrid,s4=t=>t.snapStart,r4=t=>t.rounded,Z1=(t,s)=>t[s+"-edge"]!==void 0,D5=t=>Z1(t,yi),M5=t=>Z1(t,eL),R5=t=>Z1(t,Q$),ff=t=>Z1(t,_5),$u=t=>t.model.value.get(),Lu=(t,s)=>({x:t,y:s}),_c=(t,s)=>{rt(t,L1(),{value:s})},N5=(t,s)=>{_c(t,Lu(H1(s),V1(s)))},B5=(t,s)=>{_c(t,V1(s))},a4=(t,s)=>{_c(t,Lu(k5(s),V1(s)))},c4=(t,s)=>{_c(t,Lu(z1(s),V1(s)))},i4=(t,s)=>{_c(t,z1(s))},P5=(t,s)=>{_c(t,Lu(z1(s),A5(s)))},tL=(t,s)=>{_c(t,Lu(z1(s),U1(s)))},I5=(t,s)=>{_c(t,U1(s))},nL=(t,s)=>{_c(t,Lu(k5(s),U1(s)))},oL=(t,s)=>{_c(t,Lu(H1(s),U1(s)))},sL=(t,s)=>{_c(t,H1(s))},F5=(t,s)=>{_c(t,Lu(H1(s),A5(s)))},O2=(t,s,a,i)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-i),D2=(t,s,a,i)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+i),$5=(t,s,a)=>Math.max(s,Math.min(a,t)),rL=(t,s,a,i,u)=>u.fold(()=>{const m=t-s,f=Math.round(m/i)*i;return $5(s+f,s-1,a+1)},m=>{const f=(t-m)%i,p=Math.round(f/i),b=Math.floor((t-m)/i),C=Math.floor((a-m)/i),S=Math.min(C,b+p),_=m+S*i;return Math.max(m,_)}),aL=(t,s,a)=>Math.min(a,Math.max(t,s))-s,L5=t=>{const{min:s,max:a,range:i,value:u,step:m,snap:f,snapStart:p,rounded:b,hasMinEdge:C,hasMaxEdge:S,minBound:_,maxBound:A,screenRange:N}=t,I=C?s-1:s,H=S?a+1:a;if(u<_)return I;if(u>A)return H;{const Z=aL(u,_,A),L=$5(Z/N*i+s,I,H);return f&&L>=s&&L<=a?rL(L,s,a,m,p):b?Math.round(L):L}},H5=t=>{const{min:s,max:a,range:i,value:u,hasMinEdge:m,hasMaxEdge:f,maxBound:p,maxOffset:b,centerMinEdge:C,centerMaxEdge:S}=t;return u<s?m?0:C:u>a?f?p:S:(u-s)/i*b},l4="top",V5="right",z5="bottom",u4="left",cL="width",iL="height",Ki=t=>t.element.dom.getBoundingClientRect(),Ci=(t,s)=>t[s],M2=t=>{const s=Ki(t);return Ci(s,u4)},U5=t=>{const s=Ki(t);return Ci(s,V5)},R2=t=>{const s=Ki(t);return Ci(s,l4)},Z5=t=>{const s=Ki(t);return Ci(s,z5)},W1=t=>{const s=Ki(t);return Ci(s,cL)},d4=t=>{const s=Ki(t);return Ci(s,iL)},W5=(t,s,a)=>(t+s)/2-a,j5=(t,s)=>{const a=Ki(t),i=Ki(s),u=Ci(a,u4),m=Ci(a,V5),f=Ci(i,u4);return W5(u,m,f)},G5=(t,s)=>{const a=Ki(t),i=Ki(s),u=Ci(a,l4),m=Ci(a,z5),f=Ci(i,l4);return W5(u,m,f)},N2=(t,s)=>{rt(t,L1(),{value:s})},m4=(t,s,a)=>{const i={min:df(s),max:mf(s),range:n4(s),value:a,step:ch(s),snap:O5(s),snapStart:s4(s),rounded:r4(s),hasMinEdge:D5(s),hasMaxEdge:M5(s),minBound:M2(t),maxBound:U5(t),screenRange:W1(t)};return L5(i)},lL=(t,s,a)=>{const i=m4(t,s,a);return N2(t,i),i},f4=(t,s)=>{const a=df(s);N2(t,a)},q5=(t,s)=>{const a=mf(s);N2(t,a)},K5=(t,s,a,i)=>{const m=(t>0?D2:O2)($u(a),df(a),mf(a),ch(a,i));return N2(s,m),x.some(m)},Y5=t=>(s,a,i)=>K5(t,s,a,i).map(it),X5=t=>t4(t).map(a=>a.left),uL=(t,s,a,i,u)=>{const f=W1(t),p=i.bind(S=>x.some(j5(S,t))).getOr(0),b=u.bind(S=>x.some(j5(S,t))).getOr(f),C={min:df(s),max:mf(s),range:n4(s),value:a,hasMinEdge:D5(s),hasMaxEdge:M5(s),minBound:M2(t),minOffset:0,maxBound:U5(t),maxOffset:f,centerMinEdge:p,centerMaxEdge:b};return H5(C)},g4=(t,s,a,i,u,m)=>{const f=uL(s,m,a,i,u);return M2(s)-M2(t)+f},dL=(t,s,a,i)=>{const u=$u(a),m=g4(t,i.getSpectrum(t),u,i.getLeftEdge(t),i.getRightEdge(t),a),f=Yo(s.element)/2;_t(s.element,"left",m-f+"px")},mL=Y5(-1),fL=Y5(1),gL=x.none,hL=x.none,pL={"top-left":x.none(),top:x.none(),"top-right":x.none(),right:x.some(i4),"bottom-right":x.none(),bottom:x.none(),"bottom-left":x.none(),left:x.some(sL)};var bL=Object.freeze({__proto__:null,setValueFrom:lL,setToMin:f4,setToMax:q5,findValueOfOffset:m4,getValueFromEvent:X5,findPositionOfValue:g4,setPositionFromValue:dL,onLeft:mL,onRight:fL,onUp:gL,onDown:hL,edgeActions:pL});const B2=(t,s)=>{rt(t,L1(),{value:s})},ih=(t,s,a)=>{const i={min:Fu(s),max:Pd(s),range:o4(s),value:a,step:ch(s),snap:O5(s),snapStart:s4(s),rounded:r4(s),hasMinEdge:R5(s),hasMaxEdge:ff(s),minBound:R2(t),maxBound:Z5(t),screenRange:d4(t)};return L5(i)},h4=(t,s,a)=>{const i=ih(t,s,a);return B2(t,i),i},p4=(t,s)=>{const a=Fu(s);B2(t,a)},J5=(t,s)=>{const a=Pd(s);B2(t,a)},vL=(t,s,a,i)=>{const m=(t>0?D2:O2)($u(a),Fu(a),Pd(a),ch(a,i));return B2(s,m),x.some(m)},Q5=t=>(s,a,i)=>vL(t,s,a,i).map(it),b4=t=>t4(t).map(a=>a.top),v4=(t,s,a,i,u)=>{const f=d4(t),p=i.bind(S=>x.some(G5(S,t))).getOr(0),b=u.bind(S=>x.some(G5(S,t))).getOr(f),C={min:Fu(s),max:Pd(s),range:o4(s),value:a,hasMinEdge:R5(s),hasMaxEdge:ff(s),minBound:R2(t),minOffset:0,maxBound:Z5(t),maxOffset:f,centerMinEdge:p,centerMaxEdge:b};return H5(C)},lh=(t,s,a,i,u,m)=>{const f=v4(s,m,a,i,u);return R2(s)-R2(t)+f},eD=(t,s,a,i)=>{const u=$u(a),m=lh(t,i.getSpectrum(t),u,i.getTopEdge(t),i.getBottomEdge(t),a),f=jt(s.element)/2;_t(s.element,"top",m-f+"px")},yL=x.none,CL=x.none,xL=Q5(-1),SL=Q5(1),wL={"top-left":x.none(),top:x.some(B5),"top-right":x.none(),right:x.none(),"bottom-right":x.none(),bottom:x.some(I5),"bottom-left":x.none(),left:x.none()};var EL=Object.freeze({__proto__:null,setValueFrom:h4,setToMin:p4,setToMax:J5,findValueOfOffset:ih,getValueFromEvent:b4,findPositionOfValue:lh,setPositionFromValue:eD,onLeft:yL,onRight:CL,onUp:xL,onDown:SL,edgeActions:wL});const P2=(t,s)=>{rt(t,L1(),{value:s})},I2=(t,s)=>({x:t,y:s}),_L=(t,s,a)=>{const i=m4(t,s,a.left),u=ih(t,s,a.top),m=I2(i,u);return P2(t,m),m},TL=(t,s,a,i,u)=>{const m=t>0?D2:O2,f=s?$u(i).x:m($u(i).x,df(i),mf(i),ch(i,u)),p=s?m($u(i).y,Fu(i),Pd(i),ch(i,u)):$u(i).y;return P2(a,I2(f,p)),x.some(f)},F2=(t,s)=>(a,i,u)=>TL(t,s,a,i,u).map(it),kL=(t,s)=>{const a=df(s),i=Fu(s);P2(t,I2(a,i))},AL=(t,s)=>{const a=mf(s),i=Pd(s);P2(t,I2(a,i))},tD=t=>t4(t),OL=(t,s,a,i)=>{const u=$u(a),m=g4(t,i.getSpectrum(t),u.x,i.getLeftEdge(t),i.getRightEdge(t),a),f=lh(t,i.getSpectrum(t),u.y,i.getTopEdge(t),i.getBottomEdge(t),a),p=Yo(s.element)/2,b=jt(s.element)/2;_t(s.element,"left",m-p+"px"),_t(s.element,"top",f-b+"px")},DL=F2(-1,!1),Ul=F2(1,!1),ML=F2(-1,!0),RL=F2(1,!0),y4={"top-left":x.some(N5),top:x.some(a4),"top-right":x.some(c4),right:x.some(P5),"bottom-right":x.some(tL),bottom:x.some(nL),"bottom-left":x.some(oL),left:x.some(F5)};var ms=Object.freeze({__proto__:null,setValueFrom:_L,setToMin:kL,setToMax:AL,getValueFromEvent:tD,setPositionFromValue:OL,onLeft:DL,onRight:Ul,onUp:ML,onDown:RL,edgeActions:y4});const NL=[J("stepSize",1),J("speedMultiplier",10),J("onChange",ee),J("onChoose",ee),J("onInit",ee),J("onDragStart",ee),J("onDragEnd",ee),J("snapToGrid",!1),J("rounded",!0),bn("snapStart"),Va("model",ba("mode",{x:[J("minX",0),J("maxX",100),wr("value",t=>tt(t.mode.minX)),be("getInitialValue"),An("manager",bL)],y:[J("minY",0),J("maxY",100),wr("value",t=>tt(t.mode.minY)),be("getInitialValue"),An("manager",EL)],xy:[J("minX",0),J("maxX",100),J("minY",0),J("maxY",100),wr("value",t=>tt({x:t.mode.minX,y:t.mode.minY})),be("getInitialValue"),An("manager",ms)]})),us("sliderBehaviours",[Ke,Fe]),wr("mouseIsDown",()=>tt(!1))],xi=_r({name:"Slider",configFields:NL,partFields:E5,factory:(t,s,a,i)=>{const u=ce=>wd(ce,t,"thumb"),m=ce=>wd(ce,t,"spectrum"),f=ce=>Mn(ce,t,"left-edge"),p=ce=>Mn(ce,t,"right-edge"),b=ce=>Mn(ce,t,"top-edge"),C=ce=>Mn(ce,t,"bottom-edge"),S=t.model,_=S.manager,A=(ce,Pe)=>{_.setPositionFromValue(ce,Pe,t,{getLeftEdge:f,getRightEdge:p,getTopEdge:b,getBottomEdge:C,getSpectrum:m})},N=(ce,Pe)=>{S.value.set(Pe);const ye=u(ce);A(ce,ye)},I=(ce,Pe)=>{N(ce,Pe);const ye=u(ce);return t.onChange(ce,ye,Pe),x.some(!0)},H=ce=>{_.setToMin(ce,t)},Z=ce=>{_.setToMax(ce,t)},L=ce=>{const Pe=()=>{Mn(ce,t,"thumb").each(ie=>{const $e=S.value.get();t.onChoose(ce,ie,$e)})},ye=t.mouseIsDown.get();t.mouseIsDown.set(!1),ye&&Pe()},j=(ce,Pe)=>{Pe.stop(),t.mouseIsDown.set(!0),t.onDragStart(ce,u(ce))},G=(ce,Pe)=>{Pe.stop(),t.onDragEnd(ce,u(ce)),L(ce)},ne=ce=>{Mn(ce,t,"spectrum").map(Ke.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Bs(t.sliderBehaviours,[Ke.config({mode:"special",focusIn:ne}),Fe.config({store:{mode:"manual",getValue:ce=>S.value.get(),setValue:N}}),$r.config({channels:{[Ow()]:{onReceive:L}}})]),events:Wn([me(L1(),(ce,Pe)=>{I(ce,Pe.event.value)}),$n((ce,Pe)=>{const ye=S.getInitialValue();S.value.set(ye);const ie=u(ce);A(ce,ie);const $e=m(ce);t.onInit(ce,ie,$e,S.value.get())}),me(hu(),j),me(zi(),G),me(Ca(),(ce,Pe)=>{ne(ce),j(ce,Pe)}),me($b(),G)]),apis:{resetToMin:H,resetToMax:Z,setValue:N,refresh:A},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),nD="container",BL=[us("slotBehaviours",[])],oD=t=>"<alloy.field."+t+">",PL=t=>{const s=(()=>{const m=[];return{slot:(p,b)=>(m.push(p),Dx(nD,oD(p),b)),record:Y(m)}})(),a=t(s),i=s.record(),u=Ce(i,m=>Xo({name:m,pname:oD(m)}));return Km(nD,BL,u,IL,a)},IL=(t,s)=>{const a=H=>Rg(t),i=(H,Z)=>Mn(H,t,Z),u=(H,Z)=>(L,j)=>Mn(L,t,j).map(G=>H(G,j)).getOr(Z),m=H=>(Z,L)=>{ze(L,j=>H(Z,j))},f=(H,Z)=>Go(H.element,"aria-hidden")!=="true",p=(H,Z)=>{if(!f(H)){const L=H.element;Me(L,"display"),oo(L,"aria-hidden"),rt(H,Hb(),{name:Z,visible:!0})}},b=(H,Z)=>{if(f(H)){const L=H.element;_t(L,"display","none"),vt(L,"aria-hidden","true"),rt(H,Hb(),{name:Z,visible:!1})}},C=u(f,!1),S=u(b),_=m(S),A=H=>_(H,a()),N=u(p),I={getSlotNames:a,getSlot:i,isShowing:C,hideSlot:S,hideAllSlots:A,showSlot:N};return{uid:t.uid,dom:t.dom,components:s,behaviours:p1(t.slotBehaviours),apis:I}},lr={...Vn({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>jg(t)),sketch:PL},FL=Y([be("toggleClass"),be("fetch"),is("onExecute"),J("getHotspot",x.some),J("getAnchorOverrides",Y({})),Rd(),is("onItemExecute"),bn("lazySink"),be("dom"),an("onOpen"),us("splitDropdownBehaviours",[lo,Ke,ft]),J("matchWidth",!1),J("useMinWidth",!1),J("eventOrder",{}),bn("role"),bn("listRole")].concat(Gw())),$L=Xo({factory:ws,schema:[be("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Se([ft.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Fm)},buttonBehaviours:Se([Bt.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),LL=Xo({factory:ws,schema:[be("dom")],name:"button",defaults:()=>({buttonBehaviours:Se([ft.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),HL=Y([$L,LL,Uo({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[be("text")],name:"aria-descriptor"}),rr({schema:[Cx()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(i=>{t.onItemExecute(i,s,a)})}})}),a5()]),VL=(t,s,a,i)=>{const u=S=>{Kt.getCurrent(S).each(_=>{dn.highlightFirst(_),Ke.focusIn(_)})},m=S=>{Zw(t,Lt,S,i,u,Ir.HighlightMenuAndItem).get(ee)},f=S=>(m(S),x.some(!0)),p=S=>{const _=wd(S,t,"button");return Fm(_),x.some(!0)},b={...Wn([$n((S,_)=>{Mn(S,t,"aria-descriptor").each(N=>{const I=Ie("aria");vt(N.element,"id",I),vt(S.element,"aria-describedby",I)})})]),...p2(x.some(m))},C={repositionMenus:S=>{Bt.isOn(S)&&l5(S)}};return{uid:t.uid,dom:t.dom,components:s,apis:C,eventOrder:{...t.eventOrder,[Ua()]:["disabling","toggling","alloy.base.behaviour"]},events:b,behaviours:Bs(t.splitDropdownBehaviours,[lo.config({others:{sandbox:S=>{const _=wd(S,t,"arrow");return E2(t,S,{onOpen:()=>{Bt.on(_),Bt.on(S)},onClose:()=>{Bt.off(_),Bt.off(S)}})}}}),Ke.config({mode:"special",onSpace:p,onEnter:p,onDown:f}),ft.config({}),Bt.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},$2=_r({name:"SplitDropdown",configFields:FL(),partFields:HL(),factory:VL,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),zL=(t,s)=>Fo(t,(u,m)=>s(m,u.len).fold(Y(u),p=>({len:p.finish,list:u.list.concat([p])})),{len:0,list:[]}).list,C4=(t,s,a)=>({within:t,extra:s,withinWidth:a}),sD=(t,s,a)=>{const i=zL(t,(p,b)=>{const C=a(p);return x.some({element:p,start:b,finish:b+C,width:C})}),u=Pn(i,p=>p.finish<=s),m=As(u,(p,b)=>p+b.width,0),f=i.slice(u.length);return{within:u,extra:f,withinWidth:m}},L2=t=>Ce(t,s=>s.element),UL=(t,s,a)=>{const i=L2(t.concat(s));return C4(i,[],a)},ZL=(t,s,a,i)=>{const u=L2(t).concat([a]);return C4(u,L2(s),i)},WL=(t,s,a)=>C4(L2(t),[],a),jL=(t,s,a)=>{const i=sD(s,t,a);return i.extra.length===0?x.some(i):x.none()},GL=(t,s,a,i)=>{const u=jL(t,s,a).getOrThunk(()=>sD(s,t-a(i),a)),m=u.within,f=u.extra,p=u.withinWidth;return f.length===1&&f[0].width<=a(i)?UL(m,f,p):f.length>=1?ZL(m,f,i,p):WL(m,f,p)},x4=(t,s)=>{const a=Ce(s,i=>Za(i));Es.setGroups(t,a)},qL=t=>Xt(t,s=>$s(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),S4=(t,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const u=wd(t,s,"primary"),m=lo.getCoupled(t,"overflowGroup");_t(u.element,"visibility","hidden");const f=i.concat([m]),p=qL(f);a([]),x4(u,f);const b=Yo(u.element),C=GL(b,s.builtGroups.get(),S=>Math.ceil(S.element.dom.getBoundingClientRect().width),m);C.extra.length===0?(Et.remove(u,m),a([])):(x4(u,C.within),a(C.extra)),Me(u.element,"visibility"),Mt(u.element),p.each(ft.focus)},rD=Y([us("splitToolbarBehaviours",[lo]),wr("builtGroups",()=>tt([]))]),KL=Y([_g(["overflowToggledClass"]),Vi("getOverflowBounds"),be("lazySink"),wr("overflowGroups",()=>tt([])),an("onOpened"),an("onClosed")].concat(rD())),YL=Y([Xo({factory:Es,schema:oh(),name:"primary"}),rr({schema:oh(),name:"overflow"}),rr({name:"overflow-button"}),rr({name:"overflow-group"})]),aD=Y([be("items"),_g(["itemSelector"]),us("tgroupBehaviours",[Ke])]),XL=Y([$p({name:"items",unit:"item"})]),JL=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Bs(t.tgroupBehaviours,[Ke.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),H2=_r({name:"ToolbarGroup",configFields:aD(),partFields:XL(),factory:JL}),cD=t=>Ce(t,s=>Za(s)),w4=(t,s,a)=>{S4(t,a,i=>{a.overflowGroups.set(i),s.getOpt(t).each(u=>{Vl.setGroups(u,cD(i))})})},QL=(t,s,a,i)=>{const u=mn(Vl.sketch({fetch:()=>So.nu(m=>{m(cD(t.overflowGroups.get()))}),layouts:{onLtr:()=>[Po,Eo],onRtl:()=>[Eo,Po],onBottomLtr:()=>[ls,Rs],onBottomRtl:()=>[Rs,ls]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(m,f)=>t[f?"onOpened":"onClosed"](m)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:Bs(t.splitToolbarBehaviours,[lo.config({others:{overflowGroup:()=>H2.sketch({...i["overflow-group"](),items:[u.asSpec()]})}})]),apis:{setGroups:(m,f)=>{t.builtGroups.set(Ce(f,m.getSystem().build)),w4(m,u,t)},refresh:m=>w4(m,u,t),toggle:m=>{u.getOpt(m).each(f=>{Vl.toggle(f)})},toggleWithoutFocusing:m=>{u.getOpt(m).each(Vl.toggleWithoutFocusing)},isOpen:m=>u.getOpt(m).map(Vl.isOpen).getOr(!1),reposition:m=>{u.getOpt(m).each(f=>{Vl.reposition(f)})},getOverflow:m=>u.getOpt(m).bind(Vl.getToolbar)},domModification:{attributes:{role:"group"}}}},E4=_r({name:"SplitFloatingToolbar",configFields:KL(),partFields:YL(),factory:QL,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),eH=Y([_g(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),an("onOpened"),an("onClosed")].concat(rD())),iD=Y([Xo({factory:Es,schema:oh(),name:"primary"}),Xo({factory:Es,schema:oh(),name:"overflow",overrides:t=>({toolbarBehaviours:Se([Tr.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Mn(s,t,"overflow-button").each(a=>{Bt.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{Mn(s,t,"overflow-button").each(Bt.on)}}),Ke.config({mode:"acyclic",onEscape:s=>(Mn(s,t,"overflow-button").each(ft.focus),x.some(!0))})])})}),rr({name:"overflow-button",overrides:t=>({buttonBehaviours:Se([Bt.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),rr({name:"overflow-group"})]),tH=(t,s)=>Mn(t,s,"overflow").map(Tr.hasGrown).getOr(!1),_4=(t,s,a)=>{Mn(t,s,"overflow-button").each(i=>{Mn(t,s,"overflow").each(u=>{if(T4(t,s),Tr.hasShrunk(u)){const m=s.onOpened;s.onOpened=f=>{a||Ke.focusIn(u),m(f),s.onOpened=m}}else{const m=s.onClosed;s.onClosed=f=>{a||ft.focus(i),m(f),s.onClosed=m}}Tr.toggleGrow(u)})})},T4=(t,s)=>{Mn(t,s,"overflow").each(a=>{S4(t,s,i=>{const u=Ce(i,m=>Za(m));Es.setGroups(a,u)}),Mn(t,s,"overflow-button").each(i=>{Tr.hasGrown(a)&&Bt.on(i)}),Tr.refresh(a)})},nH=(t,s,a,i)=>{const u="alloy.toolbar.toggle",m=(f,p)=>{const b=Ce(p,f.getSystem().build);t.builtGroups.set(b)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Bs(t.splitToolbarBehaviours,[lo.config({others:{overflowGroup:f=>H2.sketch({...i["overflow-group"](),items:[ws.sketch({...i["overflow-button"](),action:p=>{qt(f,u)}})]})}}),yt("toolbar-toggle-events",[me(u,f=>{_4(f,t,!1)})])]),apis:{setGroups:(f,p)=>{m(f,p),T4(f,t)},refresh:f=>T4(f,t),toggle:f=>{_4(f,t,!1)},toggleWithoutFocusing:f=>{_4(f,t,!0)},isOpen:f=>tH(f,t)},domModification:{attributes:{role:"group"}}}},k4=_r({name:"SplitSlidingToolbar",configFields:eH(),partFields:iD(),factory:nH,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),oH=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:p2(t.action),behaviours:Bs(t.tabButtonBehaviours,[ft.config({}),Ke.config({mode:"execution",useSpace:!0,useEnter:!0}),Fe.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),sH=ja({name:"TabButton",configFields:[J("uid",void 0),be("value"),Vs("dom","dom",tx(()=>({attributes:{role:"tab",id:Ie("aria"),"aria-selected":"false"}})),si()),bn("action"),J("domModification",{}),us("tabButtonBehaviours",[ft,Ke,Fe]),be("view")],factory:oH}),rH=Y([be("tabs"),be("dom"),J("clickToDismiss",!1),us("tabbarBehaviours",[dn,Ke]),_g(["tabClass","selectedClass"])]),aH=$p({factory:sH,name:"tabs",unit:"tab",overrides:t=>{const s=(i,u)=>{dn.dehighlight(i,u),rt(i,fT(),{tabbar:i,button:u})},a=(i,u)=>{dn.highlight(i,u),rt(i,px(),{tabbar:i,button:u})};return{action:i=>{const u=i.getSystem().getByUid(t.uid).getOrDie(),m=dn.isHighlighted(u,i);(m&&t.clickToDismiss?s:m?ee:a)(u,i)},domModification:{classes:[t.markers.tabClass]}}}}),cH=Y([aH]),iH=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Bs(t.tabbarBehaviours,[dn.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(u,m)=>{vt(m.element,"aria-selected","true")},onDehighlight:(u,m)=>{vt(m.element,"aria-selected","false")}}),Ke.config({mode:"flow",getInitial:u=>dn.getHighlighted(u).map(m=>m.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),lD=_r({name:"Tabbar",configFields:rH(),partFields:cH(),factory:iH}),lH=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:Bs(t.tabviewBehaviours,[Et.config({})]),domModification:{attributes:{role:"tabpanel"}}}),uD=ja({name:"Tabview",configFields:[us("tabviewBehaviours",[Et])],factory:lH}),uH=Y([J("selectFirst",!0),an("onChangeTab"),an("onDismissTab"),J("tabs",[]),us("tabSectionBehaviours",[])]),dH=Xo({factory:lD,schema:[be("dom"),ci("markers",[be("tabClass"),be("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),mH=Xo({factory:uD,name:"tabview"}),fH=Y([dH,mH]),gH=(t,s,a,i)=>{const u=f=>{const p=Fe.getValue(f);Mn(f,t,"tabview").each(b=>{St(t.tabs,S=>S.value===p).each(S=>{const _=S.view();qo(f.element,"id").each(A=>{vt(b.element,"aria-labelledby",A)}),Et.set(b,_),t.onChangeTab(b,f,_)})})},m=(f,p)=>{Mn(f,t,"tabbar").each(b=>{p(b).each(Fm)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:p1(t.tabSectionBehaviours),events:Wn(wt([t.selectFirst?[$n((f,p)=>{m(f,dn.getFirst)})]:[],[me(px(),(f,p)=>{const b=p.event.button;u(b)}),me(fT(),(f,p)=>{const b=p.event.button;t.onDismissTab(f,b)})]])),apis:{getViewItems:f=>Mn(f,t,"tabview").map(p=>Et.contents(p)).getOr([]),showTab:(f,p)=>{m(f,C=>{const S=dn.getCandidates(C);return St(S,A=>Fe.getValue(A)===p).filter(A=>!dn.isHighlighted(C,A))})}}}},Id=_r({name:"TabSection",configFields:uH(),partFields:fH(),factory:gH,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),V2=(t,s,a)=>{const i=Fe.getValue(a);Fe.setValue(s,i),mD(s)},dD=(t,s)=>{const a=t.element,i=ni(a),u=a.dom;Go(a,"type")!=="number"&&s(u,i)},mD=t=>{dD(t,(s,a)=>s.setSelectionRange(a.length,a.length))},fD=(t,s)=>{dD(t,(a,i)=>a.setSelectionRange(s,i.length))},gD=(t,s,a)=>{if(t.selectsOver){const i=Fe.getValue(s),u=t.getDisplayText(i),m=Fe.getValue(a);return t.getDisplayText(m).indexOf(u)===0?x.some(()=>{V2(t,s,a),fD(s,u.length)}):x.none()}else return x.none()},A4=Y("alloy.typeahead.itemexecute"),hH=(t,s,a,i)=>{const u=(_,A,N)=>{t.previewing.set(!1);const I=lo.getCoupled(_,"sandbox");if(on.isOpen(I))Kt.getCurrent(I).each(H=>{dn.getHighlighted(H).fold(()=>{N(H)},()=>{PT(I,H.element,"keydown",A)})});else{const H=Z=>{Kt.getCurrent(Z).each(N)};w2(t,f(_),_,I,i,H,Ir.HighlightMenuAndItem).get(ee)}},m=b5(t),f=_=>A=>A.map(N=>{const I=Xu(N.menus),H=de(I,L=>Pn(L.items,j=>j.type==="item"));return Fe.getState(_).update(Ce(H,L=>L.data)),N}),p=_=>Kt.getCurrent(_),b="typeaheadevents",C=[ft.config({}),Fe.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:_=>ni(_.element),getFallbackEntry:_=>({value:_,meta:{}}),setValue:(_,A)=>{Cm(_.element,t.model.getDisplayText(A))},...t.initialData.map(_=>Tm("initialValue",_)).getOr({})}}),ww.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(_,A)=>{const N=lo.getCoupled(_,"sandbox");if(ft.isFocused(_)&&ni(_.element).length>=t.minChars){const H=p(N).bind(L=>dn.getHighlighted(L).map(Fe.getValue));t.previewing.set(!0);const Z=L=>{p(N).each(j=>{H.fold(()=>{t.model.selectsOver&&dn.highlightFirst(j)},G=>{dn.highlightBy(j,ne=>Fe.getValue(ne).value===G.value),dn.getHighlighted(j).orThunk(()=>(dn.highlightFirst(j),x.none()))})})};w2(t,f(_),_,N,i,Z,Ir.HighlightJustMenu).get(ee)}},cancelEvent:Bp()}),Ke.config({mode:"special",onDown:(_,A)=>(u(_,A,dn.highlightFirst),x.some(!0)),onEscape:_=>{const A=lo.getCoupled(_,"sandbox");return on.isOpen(A)?(on.close(A),x.some(!0)):x.none()},onUp:(_,A)=>(u(_,A,dn.highlightLast),x.some(!0)),onEnter:_=>{const A=lo.getCoupled(_,"sandbox"),N=on.isOpen(A);if(N&&!t.previewing.get())return p(A).bind(I=>dn.getHighlighted(I)).map(I=>(rt(_,A4(),{item:I}),!0));{const I=Fe.getValue(_);return qt(_,Bp()),t.onExecute(A,_,I),N&&on.close(A),x.some(!0)}}}),Bt.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),lo.config({others:{sandbox:_=>E2(t,_,{onOpen:()=>Bt.on(_),onClose:()=>{t.lazyTypeaheadComp.get().each(A=>oo(A.element,"aria-activedescendant")),Bt.off(_)}})}}),yt(b,[$n(_=>{t.lazyTypeaheadComp.set(x.some(_))}),Wi(_=>{t.lazyTypeaheadComp.set(x.none())}),ku(_=>{const A=ee;Zw(t,f(_),_,i,A,Ir.HighlightMenuAndItem).get(ee)}),me(A4(),(_,A)=>{const N=lo.getCoupled(_,"sandbox");V2(t.model,_,A.event.item),qt(_,Bp()),t.onItemExecute(_,N,A.event.item,Fe.getValue(_)),on.close(N),mD(_)})].concat(t.dismissOnBlur?[me(Np(),_=>{const A=lo.getCoupled(_,"sandbox");$s(A.element).isNone()&&on.close(A)})]:[]))],S={[Ol()]:[Fe.name(),ww.name(),b],...t.eventOrder};return{uid:t.uid,dom:v5(_n(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...m,...Bs(t.typeaheadBehaviours,C)},eventOrder:S}},hD=Y([bn("lazySink"),be("fetch"),J("minChars",5),J("responseTime",1e3),an("onOpen"),J("getHotspot",x.some),J("getAnchorOverrides",Y({})),J("layouts",x.none()),J("eventOrder",{}),Fb("model",{},[J("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),J("selectsOver",!0),J("populateFromBrowse",!0)]),an("onSetValue"),zo("onExecute"),an("onItemExecute"),J("inputClasses",[]),J("inputAttributes",{}),J("inputStyles",{}),J("matchWidth",!0),J("useMinWidth",!1),J("dismissOnBlur",!0),_g(["openClass"]),bn("initialData"),bn("listRole"),us("typeaheadBehaviours",[ft,Fe,ww,Ke,Bt,lo]),wr("lazyTypeaheadComp",()=>tt(x.none)),wr("previewing",()=>tt(!0))].concat(k2()).concat(Gw())),pH=Y([rr({schema:[Cx()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(u=>{gD(t.model,u,i).fold(()=>{t.model.selectsOver?(dn.dehighlight(a,i),t.previewing.set(!0)):t.previewing.set(!1)},m=>{m(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(u=>{t.model.populateFromBrowse&&V2(t.model,u,i),qo(i.element,"id").each(m=>vt(u.element,"aria-activedescendant",m))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(i=>(rt(i,A4(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&V2(t.model,i,a)})}})})]),bH=_r({name:"Typeahead",configFields:hD(),partFields:pH(),factory:hH});var vH=tinymce.util.Tools.resolve("tinymce.ThemeManager"),z2=tinymce.util.Tools.resolve("tinymce.util.Delay"),j1=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),yH=tinymce.util.Tools.resolve("tinymce.EditorManager"),Hu=tinymce.util.Tools.resolve("tinymce.Env"),Tc;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Tc||(Tc={}));var Fd;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Fd||(Fd={}));const Tn=t=>s=>s.options.get(t),G1=t=>s=>x.from(t(s)),pD=t=>{const s=Hu.deviceType.isPhone(),a=Hu.deviceType.isTablet()||s,i=t.options.register,u=f=>hn(f)||f===!1,m=f=>hn(f)||la(f);i("skin",{processor:f=>hn(f)||f===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:m,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:m,default:j1.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:f=>hn(f)||Zr(f),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:f=>Zr(f)||hn(f)||Ao(f)?{value:f,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),ua(9,f=>{i("toolbar"+(f+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:Fd.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:u,default:"#top"}),i("anchor_bottom",{processor:u,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:f=>f==="both"||Zr(f),default:!Hu.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},bD=Tn("readonly"),O4=Tn("disabled"),uh=Tn("height"),$d=Tn("width"),U2=G1(Tn("min_width")),Z2=G1(Tn("min_height")),W2=G1(Tn("max_width")),D4=G1(Tn("max_height")),vD=G1(Tn("style_formats")),yD=Tn("style_formats_merge"),CD=Tn("style_formats_autohide"),xD=Tn("content_langs"),SD=Tn("removed_menuitems"),dh=Tn("toolbar_mode"),wD=Tn("toolbar_groups"),M4=Tn("toolbar_location"),CH=Tn("fixed_toolbar_container"),ED=Tn("fixed_toolbar_container_target"),gf=Tn("toolbar_persist"),Ld=Tn("toolbar_sticky_offset"),_D=Tn("menubar"),q1=Tn("toolbar"),R4=Tn("file_picker_callback"),K1=Tn("file_picker_validator_handler"),TD=Tn("font_size_input_default_unit"),mh=Tn("file_picker_types"),fh=Tn("typeahead_urls"),kD=Tn("anchor_top"),AD=Tn("anchor_bottom"),OD=Tn("draggable_modal"),DD=Tn("statusbar"),MD=Tn("elementpath"),N4=Tn("branding"),Y1=Tn("resize"),RD=Tn("paste_as_text"),j2=Tn("sidebar_show"),ND=Tn("promotion"),BD=Tn("help_accessibility"),B4=Tn("default_font_stack"),P4=Tn("skin"),G2=t=>t.options.get("skin")===!1,Si=t=>t.options.get("menubar")!==!1,Hd=t=>{const s=t.options.get("skin_url");if(G2(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return yH.baseURL+"/skins/ui/"+a}},xH=t=>x.from(t.options.get("skin_url")),PD=t=>t.options.get("line_height_formats").split(" "),X1=t=>{const s=q1(t),a=hn(s),i=Ao(s)&&s.length>0;return!gh(t)&&(i||a||s===!0)},I4=t=>{const s=ua(9,i=>t.options.get("toolbar"+(i+1))),a=Pn(s,hn);return gr(a.length>0,a)},gh=t=>I4(t).fold(()=>{const s=q1(t);return xt(s,hn)&&s.length>0},it),F4=t=>M4(t)===Fd.bottom,ID=t=>{var s;if(!t.inline)return x.none();const a=(s=CH(t))!==null&&s!==void 0?s:"";if(a.length>0)return Dn(Cr(),a);const i=ED(t);return Qn(i)?x.some(Ne.fromDom(i)):x.none()},hh=t=>t.inline&&ID(t).isSome(),$4=t=>ID(t).getOrThunk(()=>uu(rs(Ne.fromDom(t.getElement())))),L4=t=>t.inline&&!Si(t)&&!X1(t)&&!gh(t),ph=t=>(t.options.get("toolbar_sticky")||t.inline)&&!hh(t)&&!L4(t),Vd=t=>!hh(t)&&t.options.get("ui_mode")==="split",FD=t=>{const s=t.options.get("menu");return Vn(s,a=>({...a,items:a.items}))};var H4=Object.freeze({__proto__:null,get ToolbarMode(){return Tc},get ToolbarLocation(){return Fd},register:pD,getSkinUrl:Hd,getSkinUrlOption:xH,isReadOnly:bD,isDisabled:O4,getSkin:P4,isSkinDisabled:G2,getHeightOption:uh,getWidthOption:$d,getMinWidthOption:U2,getMinHeightOption:Z2,getMaxWidthOption:W2,getMaxHeightOption:D4,getUserStyleFormats:vD,shouldMergeStyleFormats:yD,shouldAutoHideStyleFormats:CD,getLineHeightFormats:PD,getContentLanguages:xD,getRemovedMenuItems:SD,isMenubarEnabled:Si,isMultipleToolbars:gh,isToolbarEnabled:X1,isToolbarPersist:gf,getMultipleToolbarsOption:I4,getUiContainer:$4,useFixedContainer:hh,isSplitUiMode:Vd,getToolbarMode:dh,isDraggableModal:OD,isDistractionFree:L4,isStickyToolbar:ph,getStickyToolbarOffset:Ld,getToolbarLocation:M4,isToolbarLocationBottom:F4,getToolbarGroups:wD,getMenus:FD,getMenubar:_D,getToolbar:q1,getFilePickerCallback:R4,getFilePickerTypes:mh,useTypeaheadUrls:fh,getAnchorTop:kD,getAnchorBottom:AD,getFilePickerValidatorHandler:K1,getFontSizeInputDefaultUnit:TD,useStatusBar:DD,useElementPath:MD,promotionEnabled:ND,useBranding:N4,getResize:Y1,getPasteAsText:RD,getSidebarShow:j2,useHelpAccessibility:BD,getDefaultFontStack:B4});const SH=["visible","hidden","clip"],$D=t=>rm(t).length>0&&!In(SH,t),LD=t=>{if(ab(t)){const s=E(t,"overflow-x"),a=E(t,"overflow-y");return $D(s)||$D(a)}else return!1},V4=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),wH=(t,s)=>{const a=YC(s,LD),i=a.length===0?ig(s).map(hl).map(u=>YC(u,LD)).getOr([]):a;return Gs(i).map(u=>({element:u,others:i.slice(1),isFullscreen:()=>V4(t)}))},zd=(t,s)=>Vd(t)?wH(t,s):x.none(),hf=t=>{const s=[...Ce(t.others,Ms),or()];return t.isFullscreen()?or():v8(Ms(t.element),s)};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:z4,setPrototypeOf:HD,isFrozen:EH,getPrototypeOf:_H,getOwnPropertyDescriptor:TH}=Object;let{freeze:Aa,seal:kc,create:U4}=Object,{apply:Z4,construct:W4}=typeof Reflect<"u"&&Reflect;Aa||(Aa=function(s){return s}),kc||(kc=function(s){return s}),Z4||(Z4=function(s,a,i){return s.apply(a,i)}),W4||(W4=function(s,a){return new s(...a)});const q2=Da(Array.prototype.forEach),kH=Da(Array.prototype.lastIndexOf),VD=Da(Array.prototype.pop),bh=Da(Array.prototype.push),vh=Da(Array.prototype.splice),K2=Da(String.prototype.toLowerCase),j4=Da(String.prototype.toString),zD=Da(String.prototype.match),Ud=Da(String.prototype.replace),Ac=Da(String.prototype.indexOf),G4=Da(String.prototype.trim),wi=Da(Object.prototype.hasOwnProperty),Oa=Da(RegExp.prototype.test),J1=AH(TypeError);function Da(t){return function(s){for(var a=arguments.length,i=new Array(a>1?a-1:0),u=1;u<a;u++)i[u-1]=arguments[u];return Z4(t,s,i)}}function AH(t){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return W4(t,a)}}function Nn(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:K2;HD&&HD(t,null);let i=s.length;for(;i--;){let u=s[i];if(typeof u=="string"){const m=a(u);m!==u&&(EH(s)||(s[i]=m),u=m)}t[u]=!0}return t}function UD(t){for(let s=0;s<t.length;s++)wi(t,s)||(t[s]=null);return t}function pf(t){const s=U4(null);for(const[a,i]of z4(t))wi(t,a)&&(Array.isArray(i)?s[a]=UD(i):i&&typeof i=="object"&&i.constructor===Object?s[a]=pf(i):s[a]=i);return s}function Q1(t,s){for(;t!==null;){const i=TH(t,s);if(i){if(i.get)return Da(i.get);if(typeof i.value=="function")return Da(i.value)}t=_H(t)}function a(){return null}return a}const q4=Aa(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),K4=Aa(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Y2=Aa(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ZD=Aa(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),X2=Aa(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),OH=Aa(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),WD=Aa(["#text"]),jD=Aa(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Y4=Aa(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),GD=Aa(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),J2=Aa(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),X4=kc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),DH=kc(/<%[\w\W]*|[\w\W]*%>/gm),MH=kc(/\$\{[\w\W]*/gm),qD=kc(/^data-[\-\w.\u00B7-\uFFFF]+$/),RH=kc(/^aria-[\-\w]+$/),KD=kc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),NH=kc(/^(?:\w+script|data):/i),BH=kc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),YD=kc(/^html$/i),PH=kc(/^[a-z][.\w]*(-[.\w]+)+$/i);var XD=Object.freeze({__proto__:null,ARIA_ATTR:RH,ATTR_WHITESPACE:BH,CUSTOM_ELEMENT:PH,DATA_ATTR:qD,DOCTYPE_NAME:YD,ERB_EXPR:DH,IS_ALLOWED_URI:KD,IS_SCRIPT_OR_DATA:NH,MUSTACHE_EXPR:X4,TMPLIT_EXPR:MH});const yh={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},JD=function(){return typeof window>"u"?null:window},IH=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const u="data-tt-policy-suffix";a&&a.hasAttribute(u)&&(i=a.getAttribute(u));const m="dompurify"+(i?"#"+i:"");try{return s.createPolicy(m,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+m+" could not be created."),null}},QD=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function e6(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:JD();const s=Jt=>e6(Jt);if(s.version="3.2.4",s.removed=[],!t||!t.document||t.document.nodeType!==yh.document||!t.Element)return s.isSupported=!1,s;let{document:a}=t;const i=a,u=i.currentScript,{DocumentFragment:m,HTMLTemplateElement:f,Node:p,Element:b,NodeFilter:C,NamedNodeMap:S=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:_,DOMParser:A,trustedTypes:N}=t,I=b.prototype,H=Q1(I,"cloneNode"),Z=Q1(I,"remove"),L=Q1(I,"nextSibling"),j=Q1(I,"childNodes"),G=Q1(I,"parentNode");if(typeof f=="function"){const Jt=a.createElement("template");Jt.content&&Jt.content.ownerDocument&&(a=Jt.content.ownerDocument)}let ne,ce="";const{implementation:Pe,createNodeIterator:ye,createDocumentFragment:ie,getElementsByTagName:$e}=a,{importNode:lt}=i;let Je=QD();s.isSupported=typeof z4=="function"&&typeof G=="function"&&Pe&&Pe.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:zt,ERB_EXPR:pt,TMPLIT_EXPR:kt,DATA_ATTR:Ge,ARIA_ATTR:pe,IS_SCRIPT_OR_DATA:Ae,ATTR_WHITESPACE:dt,CUSTOM_ELEMENT:At}=XD;let{IS_ALLOWED_URI:st}=XD,Tt=null;const kn=Nn({},[...q4,...K4,...Y2,...X2,...WD]);let Sn=null;const sa=Nn({},[...jD,...Y4,...GD,...J2]);let no=Object.seal(U4(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ja=null,js=null,Qa=!0,ec=!0,Oi=!1,H0=!0,Yl=!1,A_=!0,Uf=!1,O_=!1,wj=!1,_C=!1,HB=!1,VB=!1,wq=!0,Eq=!1;const uK="user-content-";let Ej=!0,D_=!1,TC={},kC=null;const _q=Nn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Tq=null;const kq=Nn({},["audio","video","img","source","image","track"]);let _j=null;const Aq=Nn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),zB="http://www.w3.org/1998/Math/MathML",UB="http://www.w3.org/2000/svg",Zf="http://www.w3.org/1999/xhtml";let AC=Zf,Tj=!1,kj=null;const dK=Nn({},[zB,UB,Zf],j4);let ZB=Nn({},["mi","mo","mn","ms","mtext"]),WB=Nn({},["annotation-xml"]);const mK=Nn({},["title","style","font","a","script"]);let M_=null;const fK=["application/xhtml+xml","text/html"],gK="text/html";let ra=null,OC=null;const hK=a.createElement("form"),Oq=function(ae){return ae instanceof RegExp||ae instanceof Function},Aj=function(){let ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(OC&&OC===ae)){if((!ae||typeof ae!="object")&&(ae={}),ae=pf(ae),M_=fK.indexOf(ae.PARSER_MEDIA_TYPE)===-1?gK:ae.PARSER_MEDIA_TYPE,ra=M_==="application/xhtml+xml"?j4:K2,Tt=wi(ae,"ALLOWED_TAGS")?Nn({},ae.ALLOWED_TAGS,ra):kn,Sn=wi(ae,"ALLOWED_ATTR")?Nn({},ae.ALLOWED_ATTR,ra):sa,kj=wi(ae,"ALLOWED_NAMESPACES")?Nn({},ae.ALLOWED_NAMESPACES,j4):dK,_j=wi(ae,"ADD_URI_SAFE_ATTR")?Nn(pf(Aq),ae.ADD_URI_SAFE_ATTR,ra):Aq,Tq=wi(ae,"ADD_DATA_URI_TAGS")?Nn(pf(kq),ae.ADD_DATA_URI_TAGS,ra):kq,kC=wi(ae,"FORBID_CONTENTS")?Nn({},ae.FORBID_CONTENTS,ra):_q,Ja=wi(ae,"FORBID_TAGS")?Nn({},ae.FORBID_TAGS,ra):{},js=wi(ae,"FORBID_ATTR")?Nn({},ae.FORBID_ATTR,ra):{},TC=wi(ae,"USE_PROFILES")?ae.USE_PROFILES:!1,Qa=ae.ALLOW_ARIA_ATTR!==!1,ec=ae.ALLOW_DATA_ATTR!==!1,Oi=ae.ALLOW_UNKNOWN_PROTOCOLS||!1,H0=ae.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Yl=ae.SAFE_FOR_TEMPLATES||!1,A_=ae.SAFE_FOR_XML!==!1,Uf=ae.WHOLE_DOCUMENT||!1,_C=ae.RETURN_DOM||!1,HB=ae.RETURN_DOM_FRAGMENT||!1,VB=ae.RETURN_TRUSTED_TYPE||!1,wj=ae.FORCE_BODY||!1,wq=ae.SANITIZE_DOM!==!1,Eq=ae.SANITIZE_NAMED_PROPS||!1,Ej=ae.KEEP_CONTENT!==!1,D_=ae.IN_PLACE||!1,st=ae.ALLOWED_URI_REGEXP||KD,AC=ae.NAMESPACE||Zf,ZB=ae.MATHML_TEXT_INTEGRATION_POINTS||ZB,WB=ae.HTML_INTEGRATION_POINTS||WB,no=ae.CUSTOM_ELEMENT_HANDLING||{},ae.CUSTOM_ELEMENT_HANDLING&&Oq(ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(no.tagNameCheck=ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ae.CUSTOM_ELEMENT_HANDLING&&Oq(ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(no.attributeNameCheck=ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ae.CUSTOM_ELEMENT_HANDLING&&typeof ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(no.allowCustomizedBuiltInElements=ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Yl&&(ec=!1),HB&&(_C=!0),TC&&(Tt=Nn({},WD),Sn=[],TC.html===!0&&(Nn(Tt,q4),Nn(Sn,jD)),TC.svg===!0&&(Nn(Tt,K4),Nn(Sn,Y4),Nn(Sn,J2)),TC.svgFilters===!0&&(Nn(Tt,Y2),Nn(Sn,Y4),Nn(Sn,J2)),TC.mathMl===!0&&(Nn(Tt,X2),Nn(Sn,GD),Nn(Sn,J2))),ae.ADD_TAGS&&(Tt===kn&&(Tt=pf(Tt)),Nn(Tt,ae.ADD_TAGS,ra)),ae.ADD_ATTR&&(Sn===sa&&(Sn=pf(Sn)),Nn(Sn,ae.ADD_ATTR,ra)),ae.ADD_URI_SAFE_ATTR&&Nn(_j,ae.ADD_URI_SAFE_ATTR,ra),ae.FORBID_CONTENTS&&(kC===_q&&(kC=pf(kC)),Nn(kC,ae.FORBID_CONTENTS,ra)),Ej&&(Tt["#text"]=!0),Uf&&Nn(Tt,["html","head","body"]),Tt.table&&(Nn(Tt,["tbody"]),delete Ja.tbody),ae.TRUSTED_TYPES_POLICY){if(typeof ae.TRUSTED_TYPES_POLICY.createHTML!="function")throw J1('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ae.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw J1('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ne=ae.TRUSTED_TYPES_POLICY,ce=ne.createHTML("")}else ne===void 0&&(ne=IH(N,u)),ne!==null&&typeof ce=="string"&&(ce=ne.createHTML(""));Aa&&Aa(ae),OC=ae}},Dq=Nn({},[...K4,...Y2,...ZD]),Mq=Nn({},[...X2,...OH]),pK=function(ae){let ct=G(ae);(!ct||!ct.tagName)&&(ct={namespaceURI:AC,tagName:"template"});const Ut=K2(ae.tagName),_s=K2(ct.tagName);return kj[ae.namespaceURI]?ae.namespaceURI===UB?ct.namespaceURI===Zf?Ut==="svg":ct.namespaceURI===zB?Ut==="svg"&&(_s==="annotation-xml"||ZB[_s]):!!Dq[Ut]:ae.namespaceURI===zB?ct.namespaceURI===Zf?Ut==="math":ct.namespaceURI===UB?Ut==="math"&&WB[_s]:!!Mq[Ut]:ae.namespaceURI===Zf?ct.namespaceURI===UB&&!WB[_s]||ct.namespaceURI===zB&&!ZB[_s]?!1:!Mq[Ut]&&(mK[Ut]||!Dq[Ut]):!!(M_==="application/xhtml+xml"&&kj[ae.namespaceURI]):!1},Xd=function(ae){bh(s.removed,{element:ae});try{G(ae).removeChild(ae)}catch{Z(ae)}},R_=function(ae,ct){try{bh(s.removed,{attribute:ct.getAttributeNode(ae),from:ct})}catch{bh(s.removed,{attribute:null,from:ct})}if(ct.removeAttribute(ae),ae==="is")if(_C||HB)try{Xd(ct)}catch{}else try{ct.setAttribute(ae,"")}catch{}},Rq=function(ae){let ct=null,Ut=null;if(wj)ae="<remove></remove>"+ae;else{const aa=zD(ae,/^[\r\n\t ]+/);Ut=aa&&aa[0]}M_==="application/xhtml+xml"&&AC===Zf&&(ae='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ae+"</body></html>");const _s=ne?ne.createHTML(ae):ae;if(AC===Zf)try{ct=new A().parseFromString(_s,M_)}catch{}if(!ct||!ct.documentElement){ct=Pe.createDocument(AC,"template",null);try{ct.documentElement.innerHTML=Tj?ce:_s}catch{}}const tc=ct.body||ct.documentElement;return ae&&Ut&&tc.insertBefore(a.createTextNode(Ut),tc.childNodes[0]||null),AC===Zf?$e.call(ct,Uf?"html":"body")[0]:Uf?ct.documentElement:tc},Nq=function(ae){return ye.call(ae.ownerDocument||ae,ae,C.SHOW_ELEMENT|C.SHOW_COMMENT|C.SHOW_TEXT|C.SHOW_PROCESSING_INSTRUCTION|C.SHOW_CDATA_SECTION,null)},Oj=function(ae){return ae instanceof _&&(typeof ae.nodeName!="string"||typeof ae.textContent!="string"||typeof ae.removeChild!="function"||!(ae.attributes instanceof S)||typeof ae.removeAttribute!="function"||typeof ae.setAttribute!="function"||typeof ae.namespaceURI!="string"||typeof ae.insertBefore!="function"||typeof ae.hasChildNodes!="function")},Bq=function(ae){return typeof p=="function"&&ae instanceof p};function Wf(Jt,ae,ct){q2(Jt,Ut=>{Ut.call(s,ae,ct,OC)})}const Pq=function(ae){let ct=null;if(Wf(Je.beforeSanitizeElements,ae,null),Oj(ae))return Xd(ae),!0;const Ut=ra(ae.nodeName);if(Wf(Je.uponSanitizeElement,ae,{tagName:Ut,allowedTags:Tt}),ae.hasChildNodes()&&!Bq(ae.firstElementChild)&&Oa(/<[/\w]/g,ae.innerHTML)&&Oa(/<[/\w]/g,ae.textContent)||ae.nodeType===yh.progressingInstruction||A_&&ae.nodeType===yh.comment&&Oa(/<[/\w]/g,ae.data))return Xd(ae),!0;if(!Tt[Ut]||Ja[Ut]){if(!Ja[Ut]&&Fq(Ut)&&(no.tagNameCheck instanceof RegExp&&Oa(no.tagNameCheck,Ut)||no.tagNameCheck instanceof Function&&no.tagNameCheck(Ut)))return!1;if(Ej&&!kC[Ut]){const _s=G(ae)||ae.parentNode,tc=j(ae)||ae.childNodes;if(tc&&_s){const aa=tc.length;for(let Di=aa-1;Di>=0;--Di){const Jd=H(tc[Di],!0);Jd.__removalCount=(ae.__removalCount||0)+1,_s.insertBefore(Jd,L(ae))}}}return Xd(ae),!0}return ae instanceof b&&!pK(ae)||(Ut==="noscript"||Ut==="noembed"||Ut==="noframes")&&Oa(/<\/no(script|embed|frames)/i,ae.innerHTML)?(Xd(ae),!0):(Yl&&ae.nodeType===yh.text&&(ct=ae.textContent,q2([zt,pt,kt],_s=>{ct=Ud(ct,_s," ")}),ae.textContent!==ct&&(bh(s.removed,{element:ae.cloneNode()}),ae.textContent=ct)),Wf(Je.afterSanitizeElements,ae,null),!1)},Iq=function(ae,ct,Ut){if(wq&&(ct==="id"||ct==="name")&&(Ut in a||Ut in hK))return!1;if(!(ec&&!js[ct]&&Oa(Ge,ct))){if(!(Qa&&Oa(pe,ct))){if(!Sn[ct]||js[ct]){if(!(Fq(ae)&&(no.tagNameCheck instanceof RegExp&&Oa(no.tagNameCheck,ae)||no.tagNameCheck instanceof Function&&no.tagNameCheck(ae))&&(no.attributeNameCheck instanceof RegExp&&Oa(no.attributeNameCheck,ct)||no.attributeNameCheck instanceof Function&&no.attributeNameCheck(ct))||ct==="is"&&no.allowCustomizedBuiltInElements&&(no.tagNameCheck instanceof RegExp&&Oa(no.tagNameCheck,Ut)||no.tagNameCheck instanceof Function&&no.tagNameCheck(Ut))))return!1}else if(!_j[ct]){if(!Oa(st,Ud(Ut,dt,""))){if(!((ct==="src"||ct==="xlink:href"||ct==="href")&&ae!=="script"&&Ac(Ut,"data:")===0&&Tq[ae])){if(!(Oi&&!Oa(Ae,Ud(Ut,dt,"")))){if(Ut)return!1}}}}}}return!0},Fq=function(ae){return ae!=="annotation-xml"&&zD(ae,At)},$q=function(ae){Wf(Je.beforeSanitizeAttributes,ae,null);const{attributes:ct}=ae;if(!ct||Oj(ae))return;const Ut={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Sn,forceKeepAttr:void 0};let _s=ct.length;for(;_s--;){const tc=ct[_s],{name:aa,namespaceURI:Di,value:Jd}=tc,N_=ra(aa);let Na=aa==="value"?Jd:G4(Jd);const vK=Na;if(Ut.attrName=N_,Ut.attrValue=Na,Ut.keepAttr=!0,Ut.forceKeepAttr=void 0,Wf(Je.uponSanitizeAttribute,ae,Ut),Na=Ut.attrValue,Eq&&(N_==="id"||N_==="name")&&(R_(aa,ae),Na=uK+Na),A_&&Oa(/((--!?|])>)|<\/(style|title)/i,Na)){R_(aa,ae);continue}if(Ut.forceKeepAttr)continue;if(!Ut.keepAttr){R_(aa,ae);continue}if(!H0&&Oa(/\/>/i,Na)){R_(aa,ae);continue}Yl&&q2([zt,pt,kt],Hq=>{Na=Ud(Na,Hq," ")});const Lq=ra(ae.nodeName);if(!Iq(Lq,N_,Na)){R_(aa,ae);continue}if(ne&&typeof N=="object"&&typeof N.getAttributeType=="function"&&!Di)switch(N.getAttributeType(Lq,N_)){case"TrustedHTML":{Na=ne.createHTML(Na);break}case"TrustedScriptURL":{Na=ne.createScriptURL(Na);break}}if(Na!==vK)try{Di?ae.setAttributeNS(Di,aa,Na):ae.setAttribute(aa,Na),Oj(ae)?Xd(ae):VD(s.removed)}catch{}}Wf(Je.afterSanitizeAttributes,ae,null)},bK=function Jt(ae){let ct=null;const Ut=Nq(ae);for(Wf(Je.beforeSanitizeShadowDOM,ae,null);ct=Ut.nextNode();)Wf(Je.uponSanitizeShadowNode,ct,null),Pq(ct),$q(ct),ct.content instanceof m&&Jt(ct.content);Wf(Je.afterSanitizeShadowDOM,ae,null)};return s.sanitize=function(Jt){let ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ct=null,Ut=null,_s=null,tc=null;if(Tj=!Jt,Tj&&(Jt="<!-->"),typeof Jt!="string"&&!Bq(Jt))if(typeof Jt.toString=="function"){if(Jt=Jt.toString(),typeof Jt!="string")throw J1("dirty is not a string, aborting")}else throw J1("toString is not a function");if(!s.isSupported)return Jt;if(O_||Aj(ae),s.removed=[],typeof Jt=="string"&&(D_=!1),D_){if(Jt.nodeName){const Jd=ra(Jt.nodeName);if(!Tt[Jd]||Ja[Jd])throw J1("root node is forbidden and cannot be sanitized in-place")}}else if(Jt instanceof p)ct=Rq("<!---->"),Ut=ct.ownerDocument.importNode(Jt,!0),Ut.nodeType===yh.element&&Ut.nodeName==="BODY"||Ut.nodeName==="HTML"?ct=Ut:ct.appendChild(Ut);else{if(!_C&&!Yl&&!Uf&&Jt.indexOf("<")===-1)return ne&&VB?ne.createHTML(Jt):Jt;if(ct=Rq(Jt),!ct)return _C?null:VB?ce:""}ct&&wj&&Xd(ct.firstChild);const aa=Nq(D_?Jt:ct);for(;_s=aa.nextNode();)Pq(_s),$q(_s),_s.content instanceof m&&bK(_s.content);if(D_)return Jt;if(_C){if(HB)for(tc=ie.call(ct.ownerDocument);ct.firstChild;)tc.appendChild(ct.firstChild);else tc=ct;return(Sn.shadowroot||Sn.shadowrootmode)&&(tc=lt.call(i,tc,!0)),tc}let Di=Uf?ct.outerHTML:ct.innerHTML;return Uf&&Tt["!doctype"]&&ct.ownerDocument&&ct.ownerDocument.doctype&&ct.ownerDocument.doctype.name&&Oa(YD,ct.ownerDocument.doctype.name)&&(Di="<!DOCTYPE "+ct.ownerDocument.doctype.name+`>
`+Di),Yl&&q2([zt,pt,kt],Jd=>{Di=Ud(Di,Jd," ")}),ne&&VB?ne.createHTML(Di):Di},s.setConfig=function(){let Jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Aj(Jt),O_=!0},s.clearConfig=function(){OC=null,O_=!1},s.isValidAttribute=function(Jt,ae,ct){OC||Aj({});const Ut=ra(Jt),_s=ra(ae);return Iq(Ut,_s,ct)},s.addHook=function(Jt,ae){typeof ae=="function"&&bh(Je[Jt],ae)},s.removeHook=function(Jt,ae){if(ae!==void 0){const ct=kH(Je[Jt],ae);return ct===-1?void 0:vh(Je[Jt],ct,1)[0]}return VD(Je[Jt])},s.removeHooks=function(Jt){Je[Jt]=[]},s.removeAllHooks=function(){Je=QD()},s}var FH=e6();const t6=t=>FH().sanitize(t);var Oc=tinymce.util.Tools.resolve("tinymce.util.I18n");const n6={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-disc":!0,"list-bull-default":!0,"list-bull-square":!0},J4="temporary-placeholder",Q2=t=>()=>Le(t,J4).getOr("!not found!"),e0=(t,s)=>{const a=t.toLowerCase();if(Oc.isRtl()){const i=od(a,"-rtl");return Qt(s,i)?i:a}else return a},o6=(t,s)=>Le(s,e0(t,s)),Q4=(t,s)=>{const a=s();return o6(t,a).getOrThunk(Q2(a))},$H=(t,s,a)=>{const i=s();return o6(t,i).or(a).getOrThunk(Q2(i))},LH=t=>Oc.isRtl()?Qt(n6,t):!1,s6=()=>yt("add-focusable",[$n(t=>{xl(t.element,"svg").each(s=>vt(s,"focusable","false"))})]),r6=(t,s,a,i)=>{var u,m;const f=LH(s)?["tox-icon--flip"]:[],p=Le(a,e0(s,a)).or(i).getOrThunk(Q2(a));return{dom:{tag:t.tag,attributes:(u=t.attributes)!==null&&u!==void 0?u:{},classes:t.classes.concat(f),innerHtml:p},behaviours:Se([...(m=t.behaviours)!==null&&m!==void 0?m:[],s6()])}},Qr=(t,s,a,i=x.none())=>r6(s,t,a(),i),Vu=(t,s,a)=>{const i=a(),u=St(t,m=>Qt(i,e0(m,i)));return r6(s,u.getOr(J4),i,x.none())},HH={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},eE=ja({name:"Notification",factory:t=>{const s=Ie("notification-text"),a=mn({dom:$l(`<p id=${s}>${t6(t.backstageProvider.translate(t.text))}</p>`),behaviours:Se([Et.config({})])}),i=I=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${I}%`}}}),u=I=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${I}%`}}),m=mn({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},u(0)],behaviours:Se([Et.config({})])}),b={updateProgress:(I,H)=>{I.getSystem().isConnected()&&m.getOpt(I).each(Z=>{Et.set(Z,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(H)]},u(H)])})},updateText:(I,H)=>{if(I.getSystem().isConnected()){const Z=a.get(I);Et.set(Z,[Hn(H)])}}},C=wt([t.icon.toArray(),[t.level],x.from(HH[t.level]).toArray()]),S=mn(ws.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[Qr("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:Se([Rn.config({}),Gn.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:I=>{t.onAction(I)}})),_=Vu(C,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),A={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:Se([Et.config({})])},N=[_,A];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},behaviours:Se([Rn.config({}),ft.config({}),Ke.config({mode:"special",onEscape:I=>(t.onAction(I),x.some(!0))})]),components:N.concat(t.progress?[m.asSpec()]:[]).concat([S.asSpec()]),apis:b}},configFields:[yo("level","info",["success","error","warning","warn","info"]),be("progress"),bn("icon"),be("onAction"),be("text"),be("iconProvider"),be("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var tE=(t,s,a,i)=>{const u=s.backstage.shared,m=()=>Ne.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),f=()=>{const _=Ms(m());return x.some(_)},p=_=>{f().each(A=>{ze(_,N=>{Me(N.element,"width"),Yo(N.element)>A.width&&_t(N.element,"width",A.width+"px")})})};return{open:(_,A,N)=>{const I=()=>{const G=ye=>{Et.remove(ye,Z),L()},ne=(ye,ie)=>{tr(ye.element).length===0?ce(ye,ie):Pe(ye,ie)},ce=(ye,ie)=>{qn.hide(ye),i.clear(),ie&&t.focus()},Pe=(ye,ie)=>{ie&&Ke.focusIn(ye)};i.on(ye=>{A();const ie=N();G(ye),ne(ye,ie)})},H=()=>!ph(t)||!u.header.isPositionedAtTop(),Z=cr(eE.sketch({text:_.text,level:In(["success","error","warning","warn","info"],_.type)?_.type:void 0,progress:_.progressBar===!0,icon:_.icon,onAction:I,iconProvider:u.providers.icons,backstageProvider:u.providers}));if(i.isSet()){const G=Za(Z);i.on(ne=>{Et.append(ne,G),qn.reposition(ne),Z.hasConfigured(jn)&&jn.refresh(ne),p(ne.components())})}else{const G=cr(qn.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:u.getSink,fireDismissalEventInstead:{},...u.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Se([Ke.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Et.config({}),...H()?[jn.config({contextual:{lazyContext:()=>x.some(Ms(m())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:ye=>zd(t,ye.element).map($e=>({bounds:hf($e),optScrollEnv:x.some({currentScrollTop:$e.element.dom.scrollTop,scrollElmTop:ei($e.element).top})})).getOrThunk(()=>({bounds:or(),optScrollEnv:x.none()}))})]:[]])})),ne=Za(Z),ce={maxHeightFunction:Im()},Pe={...u.anchors.banner(),overrides:ce};i.set(G),a.add(G),qn.showWithinBounds(G,ne,{anchor:Pe},f)}la(_.timeout)&&_.timeout>0&&z2.setEditorTimeout(t,()=>{I()},_.timeout);const L=()=>{i.on(G=>{qn.reposition(G),G.hasConfigured(jn)&&jn.refresh(G),p(G.components())})};return{close:I,reposition:L,text:G=>{eE.updateText(Z,G)},settings:_,getEl:()=>Z.element.dom,progressBar:{value:G=>{eE.updateProgress(Z,G)}}}},close:_=>{_.close()},getArgs:_=>_.settings}};const VH={setup:(t,s)=>{const a=(u,m)=>{rt(u,Ui(),{raw:m})},i=()=>t.getMenu().bind(dn.getHighlighted);s.on("keydown",u=>{const m=u.which;t.isActive()&&(t.isMenuOpen()?m===13?(i().each(Fm),u.preventDefault()):m===40?(i().fold(()=>{t.getMenu().each(dn.highlightFirst)},f=>{a(f,u)}),u.preventDefault(),u.stopImmediatePropagation()):(m===37||m===38||m===39)&&i().each(f=>{a(f,u),u.preventDefault(),u.stopImmediatePropagation()}):(m===13||m===38||m===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var nE;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(nE||(nE={}));var Dc=nE;const oE="tox-menu-nav__js",Ch="tox-collection__item",t0="tox-swatch",sE={normal:oE,color:t0},rE="tox-collection__item--enabled",qa="tox-collection__group-heading",a6="tox-collection__item-icon",zH="tox-collection__item-image",c6="tox-collection__item-image-selector",ty="tox-collection__item-label",UH="tox-collection__item-accessory",i6="tox-collection__item-caret",ZH="tox-collection__item-checkmark",bf="tox-collection__item--active",l6="tox-collection__item-container",WH="tox-collection__item-container--column",u6="tox-collection__item-container--row",d6="tox-collection__item-container--align-right",jH="tox-collection__item-container--align-left",GH="tox-collection__item-container--valign-top",qH="tox-collection__item-container--valign-middle",m6="tox-collection__item-container--valign-bottom",ny=t=>Le(sE,t).getOr(oE),f6=t=>t==="color"?"tox-swatches":"tox-menu",oy=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:f6(t),tieredMenu:"tox-tiered-menu"}),zu=t=>{const s=oy(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:ny(t)}},g6=(t,s,a)=>{const i=oy(a);return{tag:"div",classes:wt([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},aE=[Hl.parts.items({})],sy=(t,s,a)=>{const i=oy(a);return{dom:{tag:"div",classes:wt([[i.tieredMenu]])},markers:zu(a)}},ry=Ie("refetch-trigger-event"),vf=Ie("redirect-menu-item-interaction"),cE="tox-menu__searcher",n0=t=>Dn(t.element,`.${cE}`).bind(s=>t.getSystem().getByDom(s).toOptional()),iE=n0,KH=(t,s)=>{Fe.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},h6=t=>{const s=Fe.getValue(t),a=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},ay=(t,s)=>{qo(s.element,"id").each(a=>vt(t.element,"aria-activedescendant",a))},YH=t=>{const s=(u,m)=>(m.cut(),x.none()),a=(u,m)=>{const f={interactionEvent:m.event,eventType:m.event.raw.type};return rt(u,vf,f),x.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[Ch]},components:[zl.sketch({inputClasses:[cE,"tox-textfield"],inputAttributes:{...t.placeholder.map(u=>({placeholder:t.i18n(u)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Se([yt(i,[me(pu(),u=>{qt(u,ry)}),me(Ui(),(u,m)=>{m.event.raw.key==="Escape"&&m.stop()})]),Ke.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,Ke.name()]}})]}},cy="tox-collection--results__js",lE=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Ie("aria-item-search-result-id"),"aria-selected":"false"}}}:t},o0=(t,s)=>a=>{const i=al(a,s);return Ce(i,u=>({dom:t,components:u}))},uE=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Hl.parts.items({preprocess:t!=="auto"?o0({tag:"div",classes:["tox-swatches__row"]},t):Lt})]}]}),p6=t=>({dom:{tag:"div",classes:["tox-menu","tox-image-selector-menu"]},components:[{dom:{tag:"div",classes:["tox-image-selector"]},components:[Hl.parts.items({preprocess:t!=="auto"?o0({tag:"div",classes:["tox-image-selector__row"]},t):Lt})]}]}),Lr=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Hl.parts.items({preprocess:o0({tag:"div",classes:["tox-collection__group"]},t)})]}),dE=(t,s)=>{const a=[];let i=[];return ze(t,(u,m)=>{s(u,m)?(i.length>0&&a.push(i),i=[],(Qt(u.dom,"innerHtml")||u.components&&u.components.length>0)&&i.push(u)):i.push(u)}),i.length>0&&a.push(i),Ce(a,u=>({dom:{tag:"div",classes:["tox-collection__group"]},components:u}))},mE=(t,s,a)=>Hl.parts.items({preprocess:i=>{const u=Ce(i,a);return t!=="auto"&&t>1?o0({tag:"div",classes:["tox-collection__group"]},t)(u):dE(u,(m,f)=>s[f].type==="separator")}}),b6=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[mE(t,s,Lt)]}),v6=(t,s,a=!0)=>{const i=Ie("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",cy].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[mE(t,s,lE)]}},XH=(t,s,a)=>{const i=Ie("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[YH({i18n:Oc.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],cy],attributes:{id:i}},components:[mE(t,s,lE)]}]}},JH=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Hl.parts.items({preprocess:a=>dE(a,(i,u)=>t[u].type==="separator")})]}),s0=t=>ks(t,s=>"icon"in s&&s.icon!==void 0),Ei=t=>(console.error(_m(t)),console.log(t),x.none()),Zl=(t,s,a,i,u)=>{const m=JH(a);return{value:t,dom:m.dom,components:m.components,items:a}},r0=(t,s,a,i,u)=>{const m=()=>u.menuType!=="searchable"?b6(i,a):u.searchMode.searchMode==="search-with-field"?XH(i,a,u.searchMode):v6(i,a);if(u.menuType==="color"){const f=uE(i);return{value:t,dom:f.dom,components:f.components,items:a}}else if(u.menuType==="imageselector"&&i!=="auto"){const f=p6(i);return{value:t,dom:f.dom,components:f.components,items:a}}else if(u.menuType==="normal"&&i==="auto"){const f=b6(i,a);return{value:t,dom:f.dom,components:f.components,items:a}}else if(u.menuType==="normal"||u.menuType==="searchable"){const f=m();return{value:t,dom:f.dom,components:f.components,items:a}}else if(u.menuType==="listpreview"&&i!=="auto"){const f=Lr(i);return{value:t,dom:f.dom,components:f.components,items:a}}else return{value:t,dom:g6(s,i,u.menuType),components:aE,items:a}},uo=cs("type"),xh=cs("name"),Sh=cs("label"),Uu=cs("text"),y6=cs("title"),fE=cs("icon"),QH=cs("url"),wh=cs("value"),e9=ai("fetch"),t9=ai("getSubmenuItems"),yf=ai("onAction"),n9=ai("onItemAction"),ea=Ln("onSetup",()=>ee),iy=No("name"),Zd=No("text"),o9=No("role"),Ka=No("icon"),Wd=No("tooltip"),Cf=No("label"),Eh=No("shortcut"),a0=Vi("select"),Wl=zs("active",!1),C6=zs("borderless",!1),Mc=zs("enabled",!0),c0=zs("primary",!1),gE=t=>J("columns",t),hE=J("meta",{}),pE=Ln("onAction",ee),xf=t=>Fn("type",t),bE=t=>Vs("name","name",Rb(()=>Ie(`${t}-name`)),Vo),s9=t=>Vs("value","value",Rb(()=>Ie(`${t}-value`)),si()),x6=[uo,Uu,za("level",["info","warn","error","success"]),fE,J("url","")],S6=ht(x6),r9=t=>[uo,t],w6=[uo,Uu,Mc,bE("button"),Ka,C6,lx("buttonType",["primary","secondary","toolbar"]),c0,Fn("context","mode:design")],a9=ht(w6),Sf=[uo,xh],Hr=Sf.concat([Cf]),c9=Sf.concat([Sh,Mc,Fn("context","mode:design")]),E6=ht(c9),i9=Db,l9=Hr.concat([gE("auto"),Fn("context","mode:design")]),u9=ht(l9),d9=Cg([wh,Uu,fE]),_6=Hr.concat([Fn("storageKey","default"),Fn("context","mode:design")]),m9=ht(_6),T6=Vo,Zu=ht(Hr),vE=Vo,A6=Sf.concat([Fn("tag","textarea"),cs("scriptId"),cs("scriptUrl"),Vi("onFocus"),D8("settings",void 0)]),O6=Sf.concat([Fn("tag","textarea"),ai("init")]),yE=Em(t=>io("customeditor.old",Ha(O6),t).orThunk(()=>io("customeditor.new",Ha(A6),t))),D6=Vo,Yi=[Mc,Zd,o9,Eh,s9("menuitem"),hE,Fn("context","mode:design")],M6=ht([uo,xh].concat(Yi)),R6=Db,CE=[bE("button"),Ka,yo("align","end",["start","end"]),c0,Mc,lx("buttonType",["primary","secondary"]),Fn("context","mode:design")],N6=[...CE,Uu],xE=[za("type",["submit","cancel","custom"]),...N6],f9=[za("type",["menu"]),Zd,Wd,Ka,va("items",M6),...CE],g9=[...CE,za("type",["togglebutton"]),Wd,Ka,Zd,zs("active",!1)],B6=ba("type",{submit:xE,cancel:xE,custom:xE,menu:f9,togglebutton:g9}),P6=Hr.concat([Fn("context","mode:design")]),h9=ht(P6),p9=O8(),b9=t=>[uo,sT("columns"),t],ly=[uo,cs("html"),yo("presets","presentation",["presentation","document"]),Ln("onInit",ee),zs("stretched",!1)],v9=ht(ly),y9=Hr.concat([zs("border",!1),zs("sandboxed",!0),zs("streamContent",!1),zs("transparent",!0)]),I6=ht(y9),F6=Vo,C9=ht(Sf.concat([No("height")])),x9=ht([cs("url"),Op("zoom"),Op("cachedWidth"),Op("cachedHeight")]),SE=Hr.concat([No("inputMode"),No("placeholder"),zs("maximized",!1),Mc,Fn("context","mode:design")]),S9=ht(SE),$6=Vo,w9=t=>[uo,Sh,t,yo("align","start",["start","center","end"]),No("for")],E9=[Uu,wh],_9=[Uu,va("items",cx("items",()=>wE))],wE=Pb([ht(E9),ht(_9)]),L6=Hr.concat([va("items",wE),Mc,Fn("context","mode:design")]),T9=ht(L6),k9=Vo,A9=Hr.concat([rT("items",[Uu,wh]),cT("size",1),Mc,Fn("context","mode:design")]),O9=ht(A9),H6=Vo,D9=Hr.concat([zs("constrain",!0),Mc,Fn("context","mode:design")]),V6=ht(D9),z6=ht([cs("width"),cs("height")]),M9=Sf.concat([Sh,cT("min",0),cT("max",0)]),R9=ht(M9),N9=Ob,B9=[uo,va("header",Vo),va("cells",kl(Vo))],P9=ht(B9),I9=Hr.concat([No("placeholder"),zs("maximized",!1),Mc,Fn("context","mode:design")]),F9=ht(I9),$9=Vo,EE=[Fn("buttonType","default"),No("text"),No("tooltip"),No("icon"),ii("search",!1,Pb([Db,ht([No("placeholder")])],t=>Zr(t)?t?x.some({placeholder:x.none()}):x.none():x.some(t))),ai("fetch"),Ln("onSetup",()=>ee),Fn("context","mode:design")],U6=ht([uo,...EE]),Z6=t=>io("menubutton",U6,t),W6=[za("type",["directory","leaf"]),y6,cs("id"),Yr("menu",U6),No("customStateIcon"),No("customStateIconTooltip")],dy=ht(W6),L9=W6.concat([va("children",cx("children",()=>ri("type",{directory:j6,leaf:dy})))]),j6=ht(L9),_E=ri("type",{directory:j6,leaf:dy}),H9=[uo,va("items",_E),Vi("onLeafAction"),Vi("onToggleExpand"),hd("defaultExpandedIds",[],Vo),No("defaultSelectedId")],TE=ht(H9),G6=Hr.concat([yo("filetype","file",["image","media","file"]),Mc,No("picker_text"),Fn("context","mode:design")]),V9=ht(G6),z9=ht([wh,hE]),my=t=>Vs("items","items",Hi(),kl(Em(s=>io(`Checking item of ${t}`,fy,s).fold(a=>Nt.error(_m(a)),a=>Nt.value(a))))),fy=sx(()=>ri("type",{alertbanner:S6,bar:ht(r9(my("bar"))),button:a9,checkbox:E6,colorinput:m9,colorpicker:Zu,dropzone:h9,grid:ht(b9(my("grid"))),iframe:I6,input:S9,listbox:T9,selectbox:O9,sizeinput:V6,slider:R9,textarea:F9,urlinput:V9,customeditor:yE,htmlpanel:v9,imagepreview:C9,collection:u9,label:ht(w9(my("label"))),table:P9,tree:TE,panel:kE})),U9=[uo,J("classes",[]),va("items",fy)],kE=ht(U9),q6=[bE("tab"),y6,va("items",fy)],Z9=[uo,rT("tabs",q6)],K6=ht(Z9),Y6=N6,X6=B6,W9=ht([cs("title"),Va("body",ri("type",{panel:kE,tabpanel:K6})),Fn("size","normal"),hd("buttons",[],X6),J("initialData",{}),Ln("onAction",ee),Ln("onChange",ee),Ln("onSubmit",ee),Ln("onClose",ee),Ln("onCancel",ee),Ln("onTabChange",ee)]),j9=t=>io("dialog",W9,t),G9=ht([za("type",["cancel","custom"]),...Y6]),J6=ht([cs("title"),cs("url"),Op("height"),Op("width"),ux("buttons",G9),Ln("onAction",ee),Ln("onCancel",ee),Ln("onClose",ee),Ln("onMessage",ee)]),q9=t=>io("dialog",J6,t),gy=t=>ca(t)?[t].concat(de(Xu(t),gy)):Ao(t)?de(t,gy):[],K9=t=>hn(t.type)&&hn(t.name),Y9={checkbox:i9,colorinput:T6,colorpicker:vE,dropzone:p9,input:$6,iframe:F6,imagepreview:x9,selectbox:H6,sizeinput:z6,slider:N9,listbox:k9,size:z6,textarea:$9,urlinput:z9,customeditor:D6,collection:d9,togglemenuitem:R6},AE=t=>x.from(Y9[t.type]),X9=t=>Pn(gy(t),K9),J9=t=>{const s=X9(t),a=de(s,i=>AE(i).fold(()=>[],u=>[Va(i.name,u)]));return ht(a)},Q6=t=>{var s;const a=mc(j9(t)),i=J9(t),u=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:i,initialData:u}},Wu={open:(t,s)=>{const a=Q6(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=mc(q9(s));return t(a)},redial:t=>Q6(t)},eM=ht([uo,Zd]),tM=t=>io("separatormenuitem",eM,t),Q9=ht([xf("autocompleteitem"),Wl,Mc,hE,wh,Zd,Ka]),nM=t=>io("Autocompleter.Separator",eM,t),eV=t=>io("Autocompleter.Item",Q9,t),_h=[Mc,Wd,Ka,Zd,ea,Fn("context","mode:design")],tV=ht([uo,yf,Eh].concat(_h)),OE=t=>io("toolbarbutton",tV,t),DE=[Wl].concat(_h),oM=ht(DE.concat([uo,yf,Eh])),sM=t=>io("ToggleButton",oM,t),hy=[Ln("predicate",pn),yo("scope","node",["node","editor"]),yo("position","selection",["node","selection","line"])],rM=_h.concat([xf("contextformbutton"),Fn("align","end"),c0,yf,wr("original",Lt)]),nV=DE.concat([xf("contextformbutton"),Fn("align","end"),c0,yf,wr("original",Lt)]),oV=_h.concat([xf("contextformbutton")]),sV=DE.concat([xf("contextformtogglebutton")]),aM=ba("type",{contextformbutton:rM,contextformtogglebutton:nV}),ME=[Cf,va("commands",aM),Yr("launch",ba("type",{contextformbutton:oV,contextformtogglebutton:sV})),Ln("onInput",ee),Ln("onSetup",ee)],rV=[...hy,...ME,za("type",["contextform"]),Ln("initValue",Y("")),No("placeholder")],aV=[...hy,...ME,za("type",["contextsliderform"]),Ln("initValue",Y(0)),Ln("min",Y(0)),Ln("max",Y(100))],cM=[...hy,...ME,za("type",["contextsizeinputform"]),Ln("initValue",Y({width:"",height:""}))],iM=ba("type",{contextform:rV,contextsliderform:aV,contextsizeinputform:cM}),lM=t=>io("ContextForm",iM,t),py=_h.concat([xf("contexttoolbarbutton")]),cV=ht([xf("contexttoolbar"),ya("launch",py),Va("items",Pb([Vo,Cg([No("name"),No("label"),va("items",Vo)])]))].concat(hy)),iV=t=>({name:t.name.getOrUndefined(),label:t.label.getOrUndefined(),items:t.items}),lV=t=>({...t,launch:t.launch.getOrUndefined(),items:hn(t.items)?t.items:Ce(t.items,iV)}),uV=t=>io("ContextToolbar",cV,t),uM=[uo,cs("src"),No("alt"),hd("classes",[],Vo)],dV=ht(uM),mV=[uo,Uu,iy,hd("classes",["tox-collection__item-label"],Vo)],fV=ht(mV),RE=sx(()=>ri("type",{cardimage:dV,cardtext:fV,cardcontainer:dM})),dM=ht([uo,Fn("direction","horizontal"),Fn("align","left"),Fn("valign","middle"),va("items",RE)]),gV=ht([uo,Cf,va("items",RE),ea,pE].concat(Yi)),hV=t=>io("cardmenuitem",gV,t),mM=ht([uo,Wl,Ka,Cf].concat(Yi)),pV=t=>io("choicemenuitem",mM,t),NE=[uo,cs("fancytype"),pE],Ct=[J("initData",{})].concat(NE),i0=[Vi("select"),Fb("initData",{},[zs("allowCustomColors",!0),Fn("storageKey","default"),ux("colors",si())])].concat(NE),fM=[Vi("select"),ci("initData",[sT("columns"),hd("items",[],si())])].concat(NE),gM=ba("fancytype",{inserttable:Ct,colorswatch:i0,imageselect:fM}),hM=t=>io("fancymenuitem",gM,t),pM=ht([uo,Wl,QH,Cf,Wd].concat(Yi)),bV=ht([uo,Wl,fE,Sh,Wd,wh].concat(Yi)),bM=t=>io("imagemenuitem",pM,t),vV=t=>io("resetimageitem",bV,t),yV=ht([uo,ea,pE,Ka].concat(Yi)),CV=t=>io("menuitem",yV,t),vM=ht([uo,t9,ea,Ka].concat(Yi)),yM=t=>io("nestedmenuitem",vM,t),OG=ht([uo,Ka,Wl,ea,yf].concat(Yi)),l0=t=>io("togglemenuitem",OG,t),BE=ht([Ka,Wd,Ln("onShow",ee),Ln("onHide",ee),ea]),CM=t=>io("sidebar",BE,t),xV=ht([uo,Va("items",Pb([Cg([xh,va("items",Vo)]),Vo]))].concat(_h)),SV=t=>io("GroupToolbarButton",xV,t),xM=ht([uo,Wd,Ka,Zd,a0,e9,ea,yo("presets","normal",["normal","color","listpreview"]),gE(1),yf,n9,Fn("context","mode:design")]),wV=t=>io("SplitButton",xM,t),SM=[Zd,Ka,No("tooltip"),yo("buttonType","secondary",["primary","secondary"]),zs("borderless",!1),ai("onAction"),Fn("context","mode:design")],PE=[...SM,Uu,za("type",["button"])],EV=[...SM,zs("active",!1),za("type",["togglebutton"])],u0={button:PE,togglebutton:EV},_V=[za("type",["group"]),hd("buttons",[],ba("type",u0))],wM=ba("type",{...u0,group:_V}),TV=ht([hd("buttons",[],wM),ai("onShow"),ai("onHide")]),kV=t=>io("view",TV,t),EM=(t,s,a)=>{const i=Zn(t.element,"."+a);if(i.length>0){const u=On(i,m=>{const f=m.dom.getBoundingClientRect().top,p=i[0].dom.getBoundingClientRect().top;return Math.abs(f-p)>s}).getOr(i.length);return x.some({numColumns:u,numRows:Math.ceil(i.length/u)})}else return x.none()},_M=(t,s)=>Se([yt(t,s)]),wf={namedEvents:_M,unnamedEvents:t=>_M(Ie("unnamed-events"),t)},Ma={item:t=>Xe.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Xe.config({disabled:t}),splitButton:t=>Xe.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Xe.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},d0=(t,s)=>{const a=t.getApi(s);return i=>{i(a)}},_i=(t,s)=>$n(a=>{Ps(t.onBeforeSetup)&&t.onBeforeSetup(a),d0(t,a)(u=>{const m=t.onSetup(u);Ps(m)&&s.set(m)})}),Rc=(t,s)=>Wi(a=>d0(t,a)(s.get())),by=(t,s,a)=>Wi(i=>(a.set(Fe.getValue(i)),d0(t,i)(s.get()))),TM="silver.uistate",m0="setDisabled",DV="setEnabled",vy="init",MV=["switchmode",vy],Th=(t,s)=>{const a=t.mainUi.outerContainer,i=[t.mainUi.mothership,...t.uiMotherships];s===m0&&ze(i,u=>{u.broadcastOn([Ll()],{target:a.element})}),ze(i,u=>{u.broadcastOn([TM],s)})},kM=(t,s)=>{t.on("init SwitchMode",a=>{Th(s,a.type)}),t.on("DisabledStateChange",a=>{if(!a.isDefaultPrevented()){const i=a.state?m0:vy;Th(s,i),a.state||t.nodeChanged()}}),t.on("NodeChange",a=>{const i=t.ui.isEnabled()?a.type:m0;Th(s,i)}),bD(t)&&t.mode.set("readonly")},_o=t=>$r.config({channels:{[TM]:{onReceive:(s,a)=>{if(a===m0||a===DV){Xe.set(s,a===m0);return}const{contextType:i,shouldDisable:u}=t();i==="mode"&&!In(MV,a)||Xe.set(s,u)}}}}),RV=(t,s)=>ku((a,i)=>{d0(t,a)(t.onAction),!t.triggersSubmenu&&s===Dc.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&qt(a,Lb()),i.stop())}),AM={[Ua()]:["disabling","alloy.base.behaviour","toggling","item-events"]},kh=Pi,Ef=(t,s,a,i)=>{const u=tt(ee);return{type:"item",dom:s.dom,components:kh(s.optComponents),data:t.data,eventOrder:AM,hasSubmenu:t.triggersSubmenu,itemBehaviours:Se([yt("item-events",[RV(t,a),_i(t,u),Rc(t,u)]),Ma.item(()=>!t.enabled||i.checkUiComponentContext(t.context).shouldDisable),_o(()=>i.checkUiComponentContext(t.context)),Et.config({})].concat(t.itemBehaviours))}},_f=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),NV=(t,s)=>{var a,i;const u=Ne.fromTag("div");bo(u,"tox-image-selector-loading-spinner");const m=p=>{bo(p,"tox-image-selector-loading-spinner-wrapper"),qr(p,u)},f=p=>{Un(p,"tox-image-selector-loading-spinner-wrapper"),Qc(u)};return{dom:{tag:t.tag,attributes:(a=t.attributes)!==null&&a!==void 0?a:{},classes:t.classes},components:[{dom:{tag:"div",classes:["tox-image-selector-image-wrapper"]},components:[{dom:{tag:"img",attributes:{src:s},classes:["tox-image-selector-image-img"]}}]},...t.checkMark.toArray()],behaviours:Se([...(i=t.behaviours)!==null&&i!==void 0?i:[],yt("render-image-events",[$n(p=>{m(p.element),Dn(p.element,"img").each(b=>{as(b).catch(C=>{console.error(C)}).finally(()=>{f(p.element)})})})])])}},BV=(t,s)=>NV(s,t),FE=t=>{const s=Hu.os.isMacOS()||Hu.os.isiOS(),u=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},m=t.split("+"),f=Ce(m,p=>{const b=p.toLowerCase().trim();return Qt(u,b)?u[b]:p});return s?f.join(""):f.join("+")},$E=(t,s,a=[a6])=>Qr(t,{tag:"div",classes:a},s),OM=t=>({dom:{tag:"div",classes:[ty]},components:[Hn(Oc.translate(t))]}),DM=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),PV=(t,s)=>({dom:{tag:"div",classes:[ty]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Hn(Oc.translate(s))]}]}),IV=t=>({dom:{tag:"div",classes:[UH]},components:[Hn(FE(t))]}),yy=t=>$E("checkmark",t,[ZH]),FV=t=>$E("chevron-right",t,[i6]),$V=t=>$E("chevron-down",t,[i6]),LV=(t,s)=>{const a=t.direction==="vertical"?WH:u6,i=t.align==="left"?jH:d6;return{dom:{tag:"div",classes:[l6,a,i,(()=>{switch(t.valign){case"top":return GH;case"middle":return qH;case"bottom":return m6}})()]},components:s}},HV=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),VV=(t,s,a)=>{const i="custom",u="remove",m=t.value,f=t.iconContent.map(C=>$H(C,s.icons,a)),p=t.ariaLabel.map(C=>({"aria-label":s.translate(C),"data-mce-name":C})).getOr({});return{dom:(()=>{const C=t0,S=f.getOr(""),_={tag:"div",attributes:p,classes:[C]};return m===i?{..._,tag:"button",classes:[..._.classes,"tox-swatches__picker-btn"],innerHtml:S}:m===u?{..._,classes:[..._.classes,"tox-swatch--remove"],innerHtml:S}:Qn(m)?{..._,attributes:{..._.attributes,"data-mce-color":m},styles:{"background-color":m},innerHtml:S}:_})(),optComponents:[]}},LE=(t,s)=>{const a=t.map(i=>({attributes:{id:Ie("menu-item"),"aria-label":Oc.translate(i)}})).getOr({});return{tag:"div",classes:[oE,Ch].concat(s),...a}},HE=t=>({dom:{tag:"label"},components:[Hn(t)]}),zV=(t,s,a,i)=>{const u={tag:"div",classes:[a6]},m=A=>Qr(A,u,s.icons,i),f=()=>x.some({dom:u}),p=a?t.iconContent.map(m).orThunk(f):x.none(),b=t.checkMark,C=x.from(t.meta).fold(()=>OM,A=>Qt(A,"style")?vn(PV,A.style):OM),S=t.htmlContent.fold(()=>t.textContent.map(C),A=>x.some(DM(A,[ty])));return{dom:LE(t.ariaLabel,[]),optComponents:[p,S,t.shortcutContent.map(IV),b,t.caret,t.labelContent.map(HE)]}},MM=t=>({dom:LE(t.ariaLabel,[c6]),optComponents:[x.some(BV(t.iconContent.getOrDie(),{tag:"div",classes:[zH],checkMark:t.checkMark})),t.labelContent.map(HE)]}),Ah=(t,s,a,i=x.none())=>t.presets==="color"?VV(t,s,i):t.presets==="img"?MM(t):zV(t,s,a,i),VE=(t,s,a)=>Le(t,"tooltipWorker").map(i=>[Gn.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:u=>({type:"submenu",item:u,overrides:{maxHeightFunction:Im}}),mode:"follow-highlight",onShow:(u,m)=>{i(f=>{Gn.setComponents(u,[Nv({element:Ne.fromDom(f)})])})}})]).getOrThunk(()=>a.map(i=>[Gn.config({...s.providers.tooltips.getConfig({tooltipText:i}),mode:"follow-highlight"})]).getOr([])),RM=t=>j1.DOM.encode(t),Cy=(t,s)=>{const a=Oc.translate(t),i=RM(a);if(s.length>0){const u=new RegExp(ss(s),"gi");return i.replace(u,m=>`<span class="tox-autocompleter-highlight">${m}</span>`)}else return i},UV=(t,s,a,i,u,m,f,p=!0)=>{const b=Ah({presets:i,textContent:x.none(),htmlContent:a?t.text.map(S=>Cy(S,s)):x.none(),ariaLabel:t.text,labelContent:x.none(),iconContent:t.icon,shortcutContent:x.none(),checkMark:x.none(),caret:x.none(),value:t.value},f.providers,p,t.icon),C=t.text.filter(S=>!a&&S!=="");return Ef({context:"mode:design",data:_f(t),enabled:t.enabled,getApi:Y({}),onAction:S=>u(t.value,t.meta),onSetup:Y(ee),triggersSubmenu:!1,itemBehaviours:VE(t,f,C)},b,m,f.providers)},zE=(t,s)=>Ce(t,a=>{switch(a.type){case"cardcontainer":return LV(a,zE(a.items,s));case"cardimage":return HV(a.src,a.classes,a.alt);case"cardtext":const u=a.name.exists(m=>In(s.cardText.highlightOn,m))?x.from(s.cardText.matchText).getOr(""):"";return DM(Cy(a.text,u),a.classes)}}),ZV=(t,s,a,i)=>{const u=f=>({isEnabled:()=>!Xe.isDisabled(f),setEnabled:p=>{Xe.set(f,!p),ze(Zn(f.element,"*"),b=>{f.getSystem().getByDom(b).each(C=>{C.hasConfigured(Xe)&&Xe.set(C,!p)})})}}),m={dom:LE(t.label,[]),optComponents:[x.some({dom:{tag:"div",classes:[l6,u6]},components:zE(t.items,i)})]};return Ef({context:"mode:design",data:_f({text:x.none(),...t}),enabled:t.enabled,getApi:u,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:x.from(i.itemBehaviours).getOr([])},m,s,a.providers)},UE=(t,s,a,i,u,m,f,p=!0)=>{const b=_=>({setActive:A=>{Bt.set(_,A)},isActive:()=>Bt.isOn(_),isEnabled:()=>!Xe.isDisabled(_),setEnabled:A=>Xe.set(_,!A)}),C=Ah({presets:a,textContent:s?t.text:x.none(),htmlContent:x.none(),labelContent:t.label,ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:x.none(),checkMark:s?x.some(yy(f.icons)):x.none(),caret:x.none(),value:t.value},f,p),S=t.text.filter(Y(!s)).map(_=>Gn.config(f.tooltips.getConfig({tooltipText:f.translate(_)})));return _n(Ef({context:t.context,data:_f(t),enabled:t.enabled,getApi:b,onAction:_=>i(t.value),onSetup:_=>(_.setActive(u),ee),triggersSubmenu:!1,itemBehaviours:[...S.toArray()]},C,m,f),{toggling:{toggleClass:rE,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},NM=t=>({value:PM(t)}),ZE=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,BM=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,WE=t=>ZE.test(t)||BM.test(t),PM=t=>hr(t,"#").toUpperCase(),WV=t=>WE(t)?x.some({value:PM(t)}):x.none(),Xi=t=>({value:t.value.replace(ZE,(a,i,u,m)=>i+i+u+u+m+m)}),xy=t=>{const s=Xi(t),a=BM.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},Oh=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},f0=t=>{const s=Oh(t.red)+Oh(t.green)+Oh(t.blue);return NM(s)},Tf=(t,s,a)=>({hue:t,saturation:s,value:a}),jE=t=>{let s=0,a=0,i=0;const u=t.red/255,m=t.green/255,f=t.blue/255,p=Math.min(u,Math.min(m,f)),b=Math.max(u,Math.max(m,f));if(p===b)return i=p,Tf(0,0,i*100);const C=u===p?m-f:f===p?u-m:f-u;return s=u===p?3:f===p?1:5,s=60*(s-C/(b-p)),a=(b-p)/b,i=b,Tf(Math.round(s),Math.round(a*100),Math.round(i*100))},Sy=Math.min,GE=Math.max,Dh=Math.round,jV=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,GV=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,jd=(t,s,a,i)=>({red:t,green:s,blue:a,alpha:i}),qE=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},IM=t=>{let s,a,i;const u=(t.hue||0)%360;let m=t.saturation/100,f=t.value/100;if(m=GE(0,Sy(m,1)),f=GE(0,Sy(f,1)),m===0)return s=a=i=Dh(255*f),jd(s,a,i,1);const p=u/60,b=f*m,C=b*(1-Math.abs(p%2-1)),S=f-b;switch(Math.floor(p)){case 0:s=b,a=C,i=0;break;case 1:s=C,a=b,i=0;break;case 2:s=0,a=b,i=C;break;case 3:s=0,a=C,i=b;break;case 4:s=C,a=0,i=b;break;case 5:s=b,a=0,i=C;break;default:s=a=i=0}return s=Dh(255*(s+S)),a=Dh(255*(a+S)),i=Dh(255*(i+S)),jd(s,a,i,1)},kf=t=>{const s=xy(t),a=parseInt(s[1],16),i=parseInt(s[2],16),u=parseInt(s[3],16);return jd(a,i,u,1)},FM=(t,s,a,i)=>{const u=parseInt(t,10),m=parseInt(s,10),f=parseInt(a,10),p=parseFloat(i);return jd(u,m,f,p)},KE=t=>{const s=jV.exec(t);if(s!==null)return x.some(FM(s[1],s[2],s[3],"1"));const a=GV.exec(t);return a!==null?x.some(FM(a[1],a[2],a[3],a[4])):x.none()},YE=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,XE=jd(255,0,0,1),qV=t=>jE(kf(t)),$M=t=>f0(IM(t)),KV=t=>WV(t).orThunk(()=>KE(t).map(f0)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,u=i[0],m=i[1],f=i[2],p=i[3];return f0(jd(u,m,f,p))}),YV=t=>{t.dispatch("SkinLoaded")},LM=(t,s)=>{t.dispatch("SkinLoadError",s)},Ji=t=>{t.dispatch("ResizeEditor")},g0=(t,s)=>{t.dispatch("ResizeContent",s)},XV=(t,s)=>{t.dispatch("ScrollContent",s)},HM=(t,s)=>{t.dispatch("TextColorChange",s)},JV=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},QV=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),ez=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},VM=(t,s)=>{t.dispatch("StylesTextUpdate",s)},zM=(t,s)=>{t.dispatch("AlignTextUpdate",s)},NG=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},BG=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},kr=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},UM=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},tz=t=>{t.dispatch("ToggleSidebar")},ZM=t=>{t.dispatch("ToggleView")},WM=t=>{t.dispatch("ContextToolbarClose")},nz=t=>{t.dispatch("ContextFormSlideBack")},h0=(t,s)=>()=>{t(),s()},Ar=(t,s=it)=>Af(t,"NodeChange",a=>{a.setEnabled(t.selection.isEditable()&&s())}),oz=(t,s)=>a=>{const i=Ii(),u=()=>{a.setActive(t.formatter.match(s));const m=t.formatter.formatChanged(s,a.setActive);i.set(m)};return t.initialized?u():t.once("init",u),()=>{t.off("init",u),i.clear()}},Mh=(t,s)=>a=>{const i=Ar(t)(a),u=oz(t,s)(a);return()=>{i(),u()}},Af=(t,s,a)=>i=>{const u=()=>a(i),m=()=>{a(i),t.on(s,u)};return t.initialized?m():t.once("init",m),()=>{t.off("init",m),t.off(s,u)}},JE=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},ta=(t,s)=>()=>t.execCommand(s);var Of=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const jM={},GM=(t,s=10)=>{const a=Of.getItem(t),i=hn(a)?JSON.parse(a):[],m=(C=>s-C.length<0?C.slice(0,s):C)(i),f=C=>{qe(m,C).each(p),m.unshift(C),m.length>s&&m.pop(),Of.setItem(t,JSON.stringify(m))},p=C=>{m.splice(C,1)};return{add:f,state:()=>m.slice(0)}},qM=t=>Le(jM,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=Of.getItem(s);if(Xl(a)){const u=Of.getItem("tinymce-custom-colors");Of.setItem(s,Qn(u)?u:"[]")}const i=GM(s,10);return jM[t]=i,i}),sz=t=>Ce(qM(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),QE=(t,s)=>{qM(t).add(s)},e3="forecolor",wy="hilitecolor",PG=5,IG=t=>KM(t.map((s,a)=>a%2===0?"#"+KV(s).value:s)),KM=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:t[a],icon:"checkmark",type:"choiceitem"});return s},Qi=t=>s=>s.options.get(t),Ey="#000000",rz=t=>{const s=t.options.register,a=m=>xt(m,hn)?{value:IG(m),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=m=>xt(m,hn)?{value:KM(m),valid:!0}:{valid:!1,message:"Must be an array of strings."},u=m=>la(m)&&m>0?{value:m,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:i}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:u,default:t3(t)}),s("color_cols_foreground",{processor:u,default:YM(t,e3)}),s("color_cols_background",{processor:u,default:YM(t,wy)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:Ey}),s("color_default_background",{processor:"string",default:Ey})},_y=(t,s)=>s===e3&&t.options.isSet("color_map_foreground")?Qi("color_map_foreground")(t):s===wy&&t.options.isSet("color_map_background")?Qi("color_map_background")(t):t.options.isSet("color_map_raw")?Qi("color_map_raw")(t):Qi("color_map")(t),t3=(t,s="default")=>Math.max(PG,Math.ceil(Math.sqrt(_y(t,s).length))),YM=(t,s)=>{const a=Qi("color_cols")(t),i=t3(t,s);return a===t3(t)?i:a},XM=(t,s="default")=>Math.round(s===e3?Qi("color_cols_foreground")(t):s===wy?Qi("color_cols_background")(t):Qi("color_cols")(t)),JM=Qi("custom_colors"),az=Qi("color_default_foreground"),cz=Qi("color_default_background"),iz="rgba(0, 0, 0, 0)",Ty=t=>KE(t).exists(s=>s.alpha!==0),QM=t=>wp(t,s=>{if(Gr(s)){const a=E(s,"background-color");return gr(Ty(a),a)}else return x.none()}).getOr(iz),n3=(t,s)=>{const a=Ne.fromDom(t.selection.getStart()),i=s==="hilitecolor"?QM(a):E(a,"color");return KE(i).map(u=>"#"+f0(u).value)},eR=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},lz=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},uz=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{eR(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{lz(t,s)})},tR=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},ky=(t,s,a,i)=>{a==="custom"?cR(t)(m=>{m.each(f=>{QE(s,f),t.execCommand("mceApplyTextcolor",s,f),i(f)})},n3(t,s).getOr(Ey)):a==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(a),t.execCommand("mceApplyTextcolor",s,a))},Ay=(t,s,a)=>t.concat(sz(s).concat(tR(a))),nR=(t,s,a)=>i=>{i(Ay(t,s,a))},o3=(t,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,a)},oR=(t,s)=>{t.setTooltip(s)},sR=(t,s)=>a=>{const i=n3(t,s);return jr(i,a.toUpperCase())},s3=(t,s,a)=>{if(Gc(a))return s==="forecolor"?"Text color":"Background color";const i=s==="forecolor"?"Text color {0}":"Background color {0}",u=Ay(_y(t,s),s,!1),m=St(u,f=>f.value===a).getOr({text:""}).text;return t.translate([i,t.translate(m)])},rR=(t,s,a,i)=>{t.ui.registry.addSplitButton(s,{tooltip:s3(t,a,i.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:sR(t,a),columns:XM(t,a),fetch:nR(_y(t,a),a,JM(t)),onAction:u=>{ky(t,a,i.get(),ee)},onItemAction:(u,m)=>{ky(t,a,m,f=>{i.set(f),HM(t,{name:s,color:f})})},onSetup:u=>{o3(u,s,i.get());const m=f=>{f.name===s&&(o3(u,f.name,f.color),oR(u,s3(t,a,f.color)))};return t.on("TextColorChange",m),h0(Ar(t)(u),()=>{t.off("TextColorChange",m)})}})},aR=(t,s,a,i,u)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:m=>(oR(m,s3(t,a,u.get())),o3(m,s,u.get()),Ar(t)(m)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:sR(t,a),initData:{storageKey:a},onAction:m=>{ky(t,a,m.value,f=>{u.set(f),HM(t,{name:s,color:f})})}}]})},cR=t=>(s,a)=>{let i=!1;const u=p=>{const C=p.getData().colorpicker;i?(s(x.from(C)),p.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",C]))},m=(p,b)=>{b.name==="hex-valid"&&(i=b.value)},f={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:f,onAction:m,onSubmit:u,onClose:ee,onCancel:()=>{s(x.none())}})},dz=t=>{uz(t);const s=az(t),a=cz(t),i=tt(s),u=tt(a);rR(t,"forecolor","forecolor",i),rR(t,"backcolor","hilitecolor",u),aR(t,"forecolor","forecolor","Text color",i),aR(t,"backcolor","hilitecolor","Background color",u)},mz=(t,s,a,i,u)=>{const m=b=>({setActive:C=>{Bt.set(b,C)},isActive:()=>Bt.isOn(b),isEnabled:()=>!Xe.isDisabled(b),setEnabled:C=>Xe.set(b,!C)}),f=Ah({presets:"img",textContent:x.none(),htmlContent:x.none(),ariaLabel:t.tooltip,iconContent:x.some(t.url),labelContent:t.label,shortcutContent:x.none(),checkMark:x.some(yy(u.icons)),caret:x.none(),value:t.value},u,!0),p=t.tooltip.map(b=>Gn.config(u.tooltips.getConfig({tooltipText:u.translate(b)})));return _n(Ef({context:t.context,data:_f(t),enabled:t.enabled,getApi:m,onAction:b=>{s(t.value),b.setActive(!0)},onSetup:b=>(b.setActive(a),ee),triggersSubmenu:!1,itemBehaviours:[...p.toArray()]},f,i,u),{toggling:{toggleClass:rE,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},Oy=(t,s,a,i,u,m,f,p)=>{const b=s0(s),S=FG(s,a,i,u!=="color"?"normal":"color",m,f,p);return r0(t,b,S,i,{menuType:u})},FG=(t,s,a,i,u,m,f)=>Pi(Ce(t,p=>p.type==="choiceitem"?pV(p).fold(Ei,b=>x.some(UE(b,a===1,i,s,m(b.value),u,f,s0(t)))):p.type==="imageitem"?bM(p).fold(Ei,b=>x.some(mz(b,s,m(b.value),u,f))):p.type==="resetimage"?vV(p).fold(Ei,b=>x.some(UE({...b,type:"choiceitem",text:b.tooltip,icon:x.some(b.icon),label:x.some(b.label)},a===1,i,s,m(b.value),u,f,s0(t)))):x.none())),p0=(t,s)=>{const a=zu(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+{color:"tox-swatches__row",imageselector:"tox-image-selector__row",listpreview:"tox-collection__group",normal:"tox-collection__group"}[s],previousSelector:u=>s==="color"?Dn(u.element,"[aria-checked=true]"):x.none()}},iR=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${t0}`:`.${Ch}`}},lR=(t,s)=>{const a=Dy(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),u="color",f={...Oy(Ie("menu-value"),a,p=>{t.onAction({value:p})},i,u,Dc.CLOSE_ON_EXECUTE,t.select.getOr(pn),s.shared.providers),markers:zu(u),movement:p0(i,u),showMenuRole:!1};return{type:"widget",data:{value:Ie("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[I1.widget(Hl.sketch(f))]}},Dy=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>Ay(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),i=>i.concat(tR(a)))},uR=(t,s)=>{const a="imageselector",i=t.initData.columns,m={...Oy(Ie("menu-value"),t.initData.items,f=>{t.onAction({value:f})},i,a,Dc.CLOSE_ON_EXECUTE,t.select.getOr(pn),s.shared.providers),markers:zu(a),movement:p0(i,a),showMenuRole:!1};return{type:"widget",data:{value:Ie("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem","tox-collection--toolbar"]},autofocus:!0,components:[I1.widget(Hl.sketch(m))]}},dR=Ie("cell-over"),mR=Ie("cell-execute"),fz=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),gz=(t,s,a)=>{const i=f=>rt(f,dR,{row:t,col:s}),u=f=>rt(f,mR,{row:t,col:s}),m=(f,p)=>{p.stop(),u(f)};return cr({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:Se([yt("insert-table-picker-cell",[me(ui(),ft.focus),me(Ua(),u),me(bd(),m),me(Om(),m)]),Bt.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),ft.config({onFocus:i})])})},hz=(t,s,a)=>{const i=[];for(let u=0;u<s;u++){const m=[];for(let f=0;f<a;f++){const p=t(u+1,f+1);m.push(gz(u,f,p))}i.push(m)}return i},pz=(t,s,a,i,u)=>{for(let m=0;m<i;m++)for(let f=0;f<u;f++)Bt.set(t[m][f],m<=s&&f<=a)},bz=t=>de(t,s=>Ce(s,Za)),r3=(t,s)=>Hn(`${s}x${t}`),yz={inserttable:(t,s)=>{const u=fz(s),m=hz(u,10,10),f=r3(0,0),p=mn({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[f],behaviours:Se([Et.config({})])});return{type:"widget",data:{value:Ie("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[I1.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:bz(m).concat(p.asSpec()),behaviours:Se([yt("insert-table-picker",[$n(b=>{Et.set(p.get(b),[f])}),mv(dR,(b,C,S)=>{const{row:_,col:A}=S.event;pz(m,_,A,10,10),Et.set(p.get(b),[r3(_+1,A+1)])}),mv(mR,(b,C,S)=>{const{row:_,col:A}=S.event;qt(b,Lb()),t.onAction({numRows:_+1,numColumns:A+1})})]),Ke.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:lR,imageselect:uR},fR=(t,s)=>Le(yz,t.fancytype).map(a=>a(t,s)),Cz=(t,s,a,i=!0,u=!1)=>{const m=u?$V(a.icons):FV(a.icons),f=b=>({isEnabled:()=>!Xe.isDisabled(b),setEnabled:C=>Xe.set(b,!C),setIconFill:(C,S)=>{Dn(b.element,`svg path[class="${C}"], rect[class="${C}"]`).each(_=>{vt(_,"fill",S)})},setTooltip:C=>{const S=a.translate(C);vt(b.element,"aria-label",S)}}),p=Ah({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:x.none(),ariaLabel:t.text,labelContent:x.none(),caret:x.some(m),checkMark:x.none(),shortcutContent:t.shortcut},a,i);return Ef({context:t.context,data:_f(t),getApi:f,enabled:t.enabled,onAction:ee,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},p,s,a)},xz=(t,s,a,i=!0)=>{const u=f=>({isEnabled:()=>!Xe.isDisabled(f),setEnabled:p=>Xe.set(f,!p)}),m=Ah({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:x.none(),labelContent:x.none(),ariaLabel:t.text,caret:x.none(),checkMark:x.none(),shortcutContent:t.shortcut},a,i);return Ef({context:t.context,data:_f(t),getApi:u,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},m,s,a)},Sz=t=>({type:"separator",dom:{tag:"div",classes:[Ch,qa]},components:t.text.map(Hn).toArray()}),Df=(t,s,a,i=!0)=>{const u=f=>({setActive:p=>{Bt.set(f,p)},isActive:()=>Bt.isOn(f),isEnabled:()=>!Xe.isDisabled(f),setEnabled:p=>Xe.set(f,!p)}),m=Ah({iconContent:t.icon,textContent:t.text,htmlContent:x.none(),labelContent:x.none(),ariaLabel:t.text,checkMark:x.some(yy(a.icons)),caret:x.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,i);return _n(Ef({context:t.context,data:_f(t),enabled:t.enabled,getApi:u,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},m,s,a),{toggling:{toggleClass:rE,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},gR=UV,Rh=Sz,My=xz,hR=Cz,pR=Df,bR=fR,$G=ZV,wz=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},Ez=t=>{const s=Fe.getValue(t),a=n0(t).map(h6);Ga.refetch(s).get(()=>{const i=lo.getCoupled(s,"sandbox");a.each(u=>n0(i).each(m=>KH(m,u)))})},_z=(t,s)=>{Tz(t).each(a=>{uP(t,a.element,s.event.eventType,s.event.interactionEvent)})},Tz=t=>on.getState(t).bind(dn.getHighlighted).bind(dn.getHighlighted),kz=t=>Hs(t.element,cy)?x.some(t.element):Dn(t.element,"."+cy),Mf=(t,s,a)=>{iE(t).each(i=>{ay(i,a),kz(s).each(m=>{qo(m,"id").each(f=>vt(i.element,"aria-controls",f))})}),vt(a.element,"aria-selected","true")},b0=(t,s,a)=>{vt(a.element,"aria-selected","false")},a3=t=>{iE(t).each(s=>ft.focus(s))},Az=t=>lo.getExistingCoupled(t,"sandbox").bind(n0).map(h6).map(a=>a.fetchPattern).getOr("");var Ry;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(Ry||(Ry={}));const c3=(t,s,a,i,u)=>{const m=a.shared.providers,f=p=>u?{...p,shortcut:x.none(),icon:p.text.isSome()?x.none():p.icon}:p;switch(t.type){case"menuitem":return CV(t).fold(Ei,p=>x.some(My(f(p),s,m,i)));case"nestedmenuitem":return yM(t).fold(Ei,p=>x.some(hR(f(p),s,m,i,u)));case"togglemenuitem":return l0(t).fold(Ei,p=>x.some(pR(f(p),s,m,i)));case"separator":return tM(t).fold(Ei,p=>x.some(Rh(p)));case"fancymenuitem":return hM(t).fold(Ei,p=>bR(p,a));default:return console.error("Unknown item in general menu",t),x.none()}},Oz=(t,s,a,i,u,m,f)=>{const p=i===1,b=!p||s0(t);return Pi(Ce(t,C=>{switch(C.type){case"separator":return nM(C).fold(Ei,S=>x.some(Rh(S)));case"cardmenuitem":return hV(C).fold(Ei,S=>x.some($G({...S,onAction:_=>{S.onAction(_),a(S.value,S.meta)}},u,m,{itemBehaviours:VE(S.meta,m,x.none()),cardText:{matchText:s,highlightOn:f}})));case"autocompleteitem":default:return eV(C).fold(Ei,S=>x.some(gR(S,s,p,"normal",a,u,m,b)))}}))},Nh=(t,s,a,i,u,m)=>{const f=s0(s),p=Pi(Ce(s,S=>{const _=N=>u?!Qt(N,"text"):f,A=N=>c3(N,a,i,_(N),u);return S.type==="nestedmenuitem"&&S.getSubmenuItems().length<=0?A({...S,enabled:!1}):A(S)})),b=wz(m);return(u?Zl:r0)(t,f,p,1,b)},Ny=t=>cf.singleData(t.value,t),Dz=(t,s,a,i)=>{const u=p0(s,i),m=zu(i);return{data:Ny({...t,movement:u,menuBehaviours:wf.unnamedEvents(s!=="auto"?[]:[$n((f,p)=>{EM(f,4,m.item).each(({numColumns:b,numRows:C})=>{Ke.setGridSize(f,C,b)})})])}),menu:{markers:zu(i),fakeFocus:a===Ry.ContentFocus}}},Mz=t=>pg.create(Ne.fromDom(t.startContainer),t.startOffset,Ne.fromDom(t.endContainer),t.endOffset),Rz={register:(t,s)=>{const a=Ie("autocompleter"),i=tt(!1),u=tt(!1),m=tn(),f=cr(qn.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Se([yt("dismissAutocompleter",[me(bu(),()=>_()),me(Vb(),(L,j)=>{qo(j.event.target,"id").each(G=>vt(Ne.fromDom(t.getBody()),"aria-activedescendant",G))})])]),lazySink:s.getSink})),p=()=>qn.isOpen(f),b=u.get,C=()=>{if(p()){qn.hide(f),t.dom.remove(a,!1);const L=Ne.fromDom(t.getBody());qo(L,"aria-owns").filter(j=>j===a).each(()=>{oo(L,"aria-owns"),oo(L,"aria-activedescendant")})}},S=()=>qn.getContent(f).bind(L=>mo(L.components(),0)),_=()=>t.execCommand("mceAutocompleterClose"),A=L=>{const j=Xt(L,G=>x.from(G.columns)).getOr(1);return de(L,G=>{const ne=G.items;return Oz(ne,G.matchText,(ce,Pe)=>{const ye={hide:()=>_(),reload:ie=>{C(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:ie})}};t.execCommand("mceAutocompleterRefreshActiveRange"),m.get().each(ie=>{i.set(!0),G.onAction(ye,ie,ce,Pe),i.set(!1)})},j,Dc.BUBBLE_TO_SANDBOX,s,G.highlightOn)})},N=(L,j)=>{const G=Xt(L,ne=>x.from(ne.columns)).getOr(1);qn.showMenuAt(f,{anchor:{type:"selection",getSelection:()=>m.get().map(Mz),root:Ne.fromDom(t.getBody())}},Dz(r0("autocompleter-value",!0,j,G,{menuType:"normal"}),G,Ry.ContentFocus,"normal")),S().each(dn.highlightFirst)},I=L=>{const j=A(L);j.length>0?(N(L,j),vt(Ne.fromDom(t.getBody()),"aria-owns",a),t.inline||H()):C()},H=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const L=t.getDoc().documentElement,j=t.selection.getNode(),G=vm(f.element);Fa(G,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${j.offsetTop}px`,left:`${j.offsetLeft}px`}),t.dom.add(L,G.dom),Dn(G,'[role="menu"]').each(ne=>{Me(ne,"position"),Me(ne,"max-height")})};t.on("AutocompleterStart",({lookupData:L})=>{u.set(!0),i.set(!1),I(L)}),t.on("AutocompleterUpdate",({lookupData:L})=>I(L)),t.on("AutocompleterUpdateActiveRange",({range:L})=>m.set(L)),t.on("AutocompleterEnd",()=>{C(),u.set(!1),i.set(!1),m.clear()});const Z={cancelIfNecessary:_,isMenuOpen:p,isActive:b,isProcessingAction:i.get,getMenu:S};VH.setup(Z,t)}},Nz=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ce(t.items,s.interpreter)});var Bz=tinymce.util.Tools.resolve("tinymce.html.Entities");const Bh=(t,s,a,i)=>{const u=i3(t,s,a,i);return Vt.sketch(u)},vR=(t,s)=>Bh(t,s,[],[]),i3=(t,s,a,i)=>({dom:v0(a),components:t.toArray().concat([s]),fieldBehaviours:Se(i)}),Pz=()=>v0([]),v0=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),el=(t,s)=>Vt.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Hn(s.translate(t))]}),Vr=Ie("form-component-change"),yR=Ie("form-component-input"),y0=Ie("form-close"),Gd=Ie("form-cancel"),jl=Ie("form-action"),Rf=Ie("form-submit"),l3=Ie("form-block"),C0=Ie("form-unblock"),CR=Ie("form-tabchange"),By=Ie("form-resize"),Iz=(t,s,a)=>{const i=t.label.map(N=>el(N,s)),u=s.icons(),m=N=>{var I;return(I=u[N])!==null&&I!==void 0?I:N},f=N=>(I,H)=>{Sl(H.event.target,"[data-collection-item-value]").each(Z=>{N(I,H,Z,Go(Z,"data-collection-item-value"))})},p=(N,I)=>{const Z=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",L=Ce(I,ne=>{const ce=Oc.translate(ne.text),Pe=t.columns===1?`<div class="tox-collection__item-label">${ce}</div>`:"",ye=`<div class="tox-collection__item-icon">${m(ne.icon)}</div>`,ie={_:" "," - ":" ","-":" "},$e=ce.replace(/\_| \- |\-/g,lt=>ie[lt]);return`<div data-mce-tooltip="${$e}" class="tox-collection__item${Z}" tabindex="-1" data-collection-item-value="${Bz.encodeAllRaw(ne.value)}" aria-label="${$e}">${ye}${Pe}</div>`}),j=t.columns!=="auto"&&t.columns>1?al(L,t.columns):[L],G=Ce(j,ne=>`<div class="tox-collection__group">${ne.join("")}</div>`);ld(N.element,G.join(""))},b=f((N,I,H,Z)=>{I.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||rt(N,jl,{name:t.name,value:Z})}),C=[me(ui(),f((N,I,H)=>{Do(H,!0)})),me(bd(),b),me(Om(),b),me(sr(),f((N,I,H)=>{Dn(N.element,"."+bf).each(Z=>{Un(Z,bf)}),bo(H,bf)})),me(uT(),f(N=>{Dn(N.element,"."+bf).each(I=>{Un(I,bf),lc(I)})})),ku(f((N,I,H,Z)=>{rt(N,jl,{name:t.name,value:Z})}))],S=(N,I)=>Ce(Zn(N.element,".tox-collection__item"),I),_=Vt.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Lt},behaviours:Se([Xe.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable,onDisabled:N=>{S(N,I=>{bo(I,"tox-collection__item--state-disabled"),vt(I,"aria-disabled",!0)})},onEnabled:N=>{S(N,I=>{Un(I,"tox-collection__item--state-disabled"),oo(I,"aria-disabled")})}}),_o(()=>s.checkUiComponentContext(t.context)),Et.config({}),Gn.config({...s.tooltips.getConfig({tooltipText:"",onShow:N=>{Dn(N.element,"."+bf+"[data-mce-tooltip]").each(I=>{qo(I,"data-mce-tooltip").each(H=>{Gn.setComponents(N,s.tooltips.getComponents({tooltipText:H}))})})}}),mode:"children-keyboard-focus",anchor:N=>({type:"node",node:Dn(N.element,"."+bf).orThunk(()=>KB(".tox-collection__item")),root:N.element,layouts:{onLtr:Y([Io,Jo,Eo,Rs,Po,ls]),onRtl:Y([Io,Jo,Eo,Rs,Po,ls])},bubble:ar(0,-2,{})})}),Fe.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(N,I)=>{p(N,I),t.columns==="auto"&&EM(N,5,"tox-collection__item").each(({numRows:H,numColumns:Z})=>{Ke.setGridSize(N,H,Z)}),qt(N,By)}}),Rn.config({}),Ke.config(iR(t.columns,"normal")),yt("collection-events",C)]),eventOrder:{[Ua()]:["disabling","alloy.base.behaviour","collection-events"],[sr()]:["collection-events","tooltipping"]}});return Bh(i,_,["tox-form__group--collection"],[])},Fz=(t,s)=>Ga.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Se([Ma.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),_o(()=>s.providers.checkUiComponentContext(t.context)),sf.config({}),Rn.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>So.nu(i=>t.fetch(i)).map(i=>x.from(Ny(_n(Oy(Ie("menu-value"),i,u=>{t.onItemAction(a,u)},t.columns,t.presets,Dc.CLOSE_ON_EXECUTE,pn,s.providers),{movement:p0(t.columns,t.presets)})))),parts:{menu:sy(!1,1,t.presets)}}),xR=Ie("color-input-change"),SR=Ie("color-swatch-change"),wR=Ie("color-picker-cancel"),HG=(t,s,a,i)=>{const u=Vt.parts.field({factory:zl,inputClasses:["tox-textfield"],data:i,onSetValue:C=>vi.run(C).get(ee),inputBehaviours:Se([Xe.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable}),_o(()=>s.providers.checkUiComponentContext(t.context)),Rn.config({}),vi.config({invalidClass:"tox-textbox-field-invalid",getRoot:C=>Gt(C.element),notify:{onValid:C=>{const S=Fe.getValue(C);rt(C,xR,{color:S})}},validator:{validateOnLoad:!1,validate:C=>{const S=Fe.getValue(C);if(S.length===0)return So.pure(Nt.value(!0));{const _=Ne.fromTag("span");_t(_,"background-color",S);const A=$(_,"background-color").fold(()=>Nt.error("blah"),N=>Nt.value(S));return So.pure(A)}}}})]),selectOnFocus:!1}),m=t.label.map(C=>el(C,s.providers)),f=(C,S)=>{rt(C,SR,{value:S})},p=(C,S)=>{b.getOpt(C).each(_=>{S==="custom"?a.colorPicker(A=>{A.fold(()=>qt(_,wR),N=>{f(_,N),QE(t.storageKey,N)})},"#ffffff"):S==="remove"?f(_,""):f(_,S)})},b=mn(Fz({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Po,Eo,Io],onLtr:()=>[Eo,Po,Io]},components:[],fetch:nR(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:p,context:t.context},s));return Vt.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:m.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[u,b.asSpec()]}]),fieldBehaviours:Se([yt("form-field-events",[me(xR,(C,S)=>{b.getOpt(C).each(_=>{_t(_.element,"background-color",S.event.color)}),rt(C,Vr,{name:t.name})}),me(SR,(C,S)=>{Vt.getField(C).each(_=>{Fe.setValue(_,S.event.value),Kt.getCurrent(C).each(ft.focus)})}),me(wR,(C,S)=>{Vt.getField(C).each(_=>{Kt.getCurrent(C).each(ft.focus)})})])])})},Nc={self:()=>Kt.config({find:x.some}),memento:t=>Kt.config({find:t.getOpt}),childAt:t=>Kt.config({find:s=>Yc(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},Lz=ht([J("preprocess",Lt),J("postprocess",Lt)]),Hz=(t,s)=>{const a=Kr("RepresentingConfigs.memento processors",Lz,s);return Fe.config({store:{mode:"manual",getValue:i=>{const u=t.get(i),m=Fe.getValue(u);return a.postprocess(m)},setValue:(i,u)=>{const m=a.preprocess(u),f=t.get(i);Fe.setValue(f,m)}}})},Nf=(t,s,a)=>Fe.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),ER=(t,s,a)=>Nf(t,i=>s(i.element),(i,u)=>a(i.element,u)),Vz=t=>ER(t,mg,ld),x0=t=>Fe.config({store:{mode:"memory",initialValue:t}}),u3=Ie("rgb-hex-update"),_R=Ie("slider-update"),TR=Ie("palette-update"),zG=(t,s)=>{const a=xi.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=xi.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return xi.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:Y(0)},components:[a,i],sliderBehaviours:Se([ft.config({})]),onChange:(u,m,f)=>{vt(u.element,"aria-valuenow",Math.floor(360-f*3.6)),rt(u,_R,{value:f})}})},zz=Ie("valid-input"),d3=Ie("invalid-input"),m3=Ie("validating-input"),f3="colorcustom.rgb.",Uz={isEnabled:it,setEnabled:ee,immediatelyShow:ee,immediatelyHide:ee},Ya=(t,s,a,i,u,m)=>{const f=(H,Z)=>{const L=Z.get();H!==L.isEnabled()&&(L.setEnabled(H),H?L.immediatelyShow():L.immediatelyHide())},p=(H,Z,L)=>vi.config({invalidClass:s("invalid"),notify:{onValidate:j=>{rt(j,m3,{type:H})},onValid:j=>{f(!1,L),rt(j,zz,{type:H,value:Fe.getValue(j)})},onInvalid:j=>{f(!0,L),rt(j,d3,{type:H,value:Fe.getValue(j)})}},validator:{validate:j=>{const G=Fe.getValue(j),ne=Z(G)?Nt.value(!0):Nt.error(t("aria.input.invalid"));return So.pure(ne)},validateOnLoad:!1}}),b=(H,Z,L,j,G)=>{const ne=tt(Uz),ce=t(f3+"range"),Pe=Vt.parts.label({dom:{tag:"label"},components:[Hn(L)]}),ye=Vt.parts.field({data:G,factory:zl,inputAttributes:{type:"text","aria-label":j,...Z==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:Se([p(Z,H,ne),Rn.config({}),Gn.config({...u({tooltipText:"",onSetup:kt=>{ne.set({isEnabled:()=>Gn.isEnabled(kt),setEnabled:Ge=>Gn.setEnabled(kt,Ge),immediatelyShow:()=>Gn.immediateOpenClose(kt,!0),immediatelyHide:()=>Gn.immediateOpenClose(kt,!1)}),Gn.setEnabled(kt,!1)},onShow:(kt,Ge)=>{Gn.setComponents(kt,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[Hn(t(Z==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:kt=>{vi.isInvalid(kt)&&vi.run(kt).get(ee)}}),ie=Ie("aria-invalid"),$e=mn(m("invalid",x.some(ie),"warning")),lt=mn({dom:{tag:"div",classes:[s("invalid-icon")]},components:[$e.asSpec()]}),Je=[Pe,ye,lt.asSpec()],zt=Z!=="hex"?[Vt.parts["aria-descriptor"]({text:ce})]:[],pt=Je.concat(zt);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:pt}},C=(H,Z)=>{const L=f0(Z);return lf.getField(H,"hex").each(j=>{ft.isFocused(j)||Fe.setValue(H,{hex:L.value})}),L},S=(H,Z)=>{const L=Z.red,j=Z.green,G=Z.blue;Fe.setValue(H,{red:L,green:j,blue:G})},_=mn({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),A=(H,Z)=>{_.getOpt(H).each(L=>{_t(L.element,"background-color","#"+Z.value)})};return ja({factory:()=>{const H={red:tt(x.some(255)),green:tt(x.some(255)),blue:tt(x.some(255)),hex:tt(x.some("ffffff"))},Z=(Ge,pe)=>{const Ae=kf(pe);S(Ge,Ae),ne(Ae)},L=Ge=>H[Ge].get(),j=(Ge,pe)=>{H[Ge].set(pe)},G=()=>L("red").bind(Ge=>L("green").bind(pe=>L("blue").map(Ae=>jd(Ge,pe,Ae,1)))),ne=Ge=>{const pe=Ge.red,Ae=Ge.green,dt=Ge.blue;j("red",x.some(pe)),j("green",x.some(Ae)),j("blue",x.some(dt))},ce=(Ge,pe)=>{const Ae=pe.event;Ae.type!=="hex"?j(Ae.type,x.none()):i(Ge)},Pe=(Ge,pe)=>{a(Ge);const Ae=NM(pe);j("hex",x.some(Ae.value));const dt=kf(Ae);S(Ge,dt),ne(dt),rt(Ge,u3,{hex:Ae}),A(Ge,Ae)},ye=(Ge,pe,Ae)=>{const dt=parseInt(Ae,10);j(pe,x.some(dt)),G().each(At=>{const st=C(Ge,At);rt(Ge,u3,{hex:st}),A(Ge,st)})},ie=Ge=>Ge.type==="hex",$e=(Ge,pe)=>{const Ae=pe.event;ie(Ae)?Pe(Ge,Ae.value):ye(Ge,Ae.type,Ae.value)},lt=Ge=>({label:t(f3+Ge+".label"),description:t(f3+Ge+".description")}),Je=lt("red"),zt=lt("green"),pt=lt("blue"),kt=lt("hex");return _n(lf.sketch(Ge=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Ge.field("red",Vt.sketch(b(qE,"red",Je.label,Je.description,255))),Ge.field("green",Vt.sketch(b(qE,"green",zt.label,zt.description,255))),Ge.field("blue",Vt.sketch(b(qE,"blue",pt.label,pt.description,255))),Ge.field("hex",Vt.sketch(b(WE,"hex",kt.label,kt.description,"ffffff"))),_.asSpec()],formBehaviours:Se([vi.config({invalidClass:s("form-invalid")}),yt("rgb-form-events",[me(zz,$e),me(d3,ce),me(m3,ce)])])})),{apis:{updateHex:(Ge,pe)=>{Fe.setValue(Ge,{hex:pe.value}),Z(Ge,pe),A(Ge,pe)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(H,Z,L)=>{H.updateHex(Z,L)}},extraApis:{}})},Zz=(t,s)=>{const a=xi.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=xi.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),u=(C,S)=>{const{width:_,height:A}=C,N=C.getContext("2d");if(N===null)return;N.fillStyle=S,N.fillRect(0,0,_,A);const I=N.createLinearGradient(0,0,_,0);I.addColorStop(0,"rgba(255,255,255,1)"),I.addColorStop(1,"rgba(255,255,255,0)"),N.fillStyle=I,N.fillRect(0,0,_,A);const H=N.createLinearGradient(0,0,0,A);H.addColorStop(0,"rgba(0,0,0,0)"),H.addColorStop(1,"rgba(0,0,0,1)"),N.fillStyle=H,N.fillRect(0,0,_,A)},m=(C,S)=>{const _=C.components()[0].element.dom,A=Tf(S,100,100),N=IM(A);u(_,YE(N))},f=(C,S)=>{const _=jE(kf(S));xi.setValue(C,{x:_.saturation,y:100-_.value}),vt(C.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",_.saturation,_.value]))};return ja({factory:C=>{const S=Y({x:0,y:0}),_=(I,H,Z)=>{la(Z)||vt(I.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(Z.x),Math.floor(100-Z.y)])),rt(I,TR,{value:Z})},A=(I,H,Z,L)=>{u(Z.element.dom,YE(XE))},N=Se([Kt.config({find:x.some}),ft.config({})]);return xi.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:S},rounded:!1,components:[a,i],onChange:_,onInit:A,sliderBehaviours:N})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(C,S,_)=>{m(S,_)},setThumb:(C,S,_)=>{f(S,_)}},extraApis:{}})},kR=(t,s,a,i)=>{const u=f=>{const p=Ya(t,s,f.onValidHex,f.onInvalidHex,a,i),b=Zz(t,s),C=ie=>(100-ie)/100*360,S=ie=>100-ie/360*100,_={paletteRgba:tt(XE),paletteHue:tt(0)},A=mn(zG(t,s)),N=mn(b.sketch({})),I=mn(p.sketch({})),H=(ie,$e,lt)=>{N.getOpt(ie).each(Je=>{b.setHue(Je,lt)})},Z=(ie,$e)=>{I.getOpt(ie).each(lt=>{p.updateHex(lt,$e)})},L=(ie,$e,lt)=>{A.getOpt(ie).each(Je=>{xi.setValue(Je,S(lt))})},j=(ie,$e)=>{N.getOpt(ie).each(lt=>{b.setThumb(lt,$e)})},G=(ie,$e)=>{const lt=kf(ie);_.paletteRgba.set(lt),_.paletteHue.set($e)},ne=(ie,$e,lt,Je)=>{G($e,lt),ze(Je,zt=>{zt(ie,$e,lt)})},ce=()=>{const ie=[Z];return($e,lt)=>{const Je=lt.event.value,zt=_.paletteHue.get(),pt=Tf(zt,Je.x,100-Je.y),kt=$M(pt);ne($e,kt,zt,ie)}},Pe=()=>{const ie=[H,Z];return($e,lt)=>{const Je=C(lt.event.value),zt=_.paletteRgba.get(),pt=jE(zt),kt=Tf(Je,pt.saturation,pt.value),Ge=$M(kt);ne($e,Ge,Je,ie)}},ye=()=>{const ie=[H,L,j];return($e,lt)=>{const Je=lt.event.hex,zt=qV(Je);ne($e,Je,zt.hue,ie)}};return{uid:f.uid,dom:f.dom,components:[N.asSpec(),A.asSpec(),I.asSpec()],behaviours:Se([yt("colour-picker-events",[me(u3,ye()),me(TR,ce()),me(_R,Pe())]),Kt.config({find:ie=>I.getOpt(ie)}),Ke.config({mode:"acyclic"})])}};return ja({name:"ColourPicker",configFields:[be("dom"),J("onValidHex",ee),J("onInvalidHex",ee)],factory:u})},AR={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},Wz=t=>s=>hn(s)?t.translate(AR[s]):t.translate(s),S0=(t,s,a)=>{const i=C=>"tox-"+C,u=(C,S,_=C,A=C)=>Qr(_,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+C],attributes:{title:s.translate(A),"aria-live":"polite",...S.fold(()=>({}),N=>({id:N}))}},s.icons),m=kR(Wz(s),i,s.tooltips.getConfig,u),f=C=>{rt(C,jl,{name:"hex-valid",value:!0})},p=C=>{rt(C,jl,{name:"hex-valid",value:!1})},b=mn(m.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:f,onInvalidHex:p}));return{dom:{tag:"div"},components:[b.asSpec()],behaviours:Se([Nf(a,C=>{const S=b.get(C);return Kt.getCurrent(S).bind(N=>Fe.getValue(N).hex).map(N=>"#"+hr(N,"#")).getOr("")},(C,S)=>{const _=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,A=x.from(_.exec(S)).bind(H=>mo(H,1)),N=b.get(C);Kt.getCurrent(N).fold(()=>{console.log("Can not find form")},H=>{Fe.setValue(H,{hex:A.getOr("")}),lf.getField(H,"hex").each(Z=>{qt(Z,pu())})})}),Nc.self()])}};var jz=tinymce.util.Tools.resolve("tinymce.Resource");const w0=t=>Qt(t,"init"),Gz=t=>{const s=tn(),a=mn({dom:{tag:t.tag}}),i=tn(),u=!w0(t)&&t.onFocus.isSome()?[ft.config({onFocus:m=>{t.onFocus.each(f=>{f(m.element.dom)})}}),Rn.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Se([yt("custom-editor-events",[$n(m=>{a.getOpt(m).each(f=>{(w0(t)?t.init(f.element.dom):jz.load(t.scriptId,t.scriptUrl).then(p=>p(f.element.dom,t.settings))).then(p=>{i.on(b=>{p.setValue(b)}),i.clear(),s.set(p)})})})]),Nf(x.none(),()=>s.get().fold(()=>i.get().getOr(""),m=>m.getValue()),(m,f)=>{s.get().fold(()=>i.set(f),p=>p.setValue(f))}),Nc.self()].concat(u)),components:[a.asSpec()]}};var Ti=tinymce.util.Tools.resolve("tinymce.util.Tools");const g3=Ie("browse.files.event"),qz=(t,s)=>{const a=Ti.explode(s.getOption("images_file_types")),i=u=>ks(a,m=>Jn(u.name.toLowerCase(),`.${m.toLowerCase()}`));return Pn(qs(t),i)},Bc=(t,s,a)=>{const i=(A,N)=>{N.stop()},u=A=>(N,I)=>{ze(A,H=>{H(N,I)})},m=(A,N)=>{var I;if(!Xe.isDisabled(A)){const H=N.event.raw;rt(A,g3,{files:(I=H.dataTransfer)===null||I===void 0?void 0:I.files})}},f=(A,N)=>{const I=N.event.raw.target;rt(A,g3,{files:I.files})},p=(A,N)=>{N&&(Fe.setValue(A,qz(N,s)),rt(A,Vr,{name:t.name}))},b=mn({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Se([yt("input-file-events",[Td(bd()),Td(Om())])])}),C=t.label.map(A=>el(A,s)),S=Vt.parts.field({factory:ws,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Hn(s.translate("Browse for an image")),b.asSpec()],action:A=>{b.get(A).element.dom.click()},buttonBehaviours:Se([Nc.self(),x0(a.getOr([])),Rn.config({}),Ma.button(()=>s.checkUiComponentContext(t.context).shouldDisable),_o(()=>s.checkUiComponentContext(t.context))])}),_={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Se([Xe.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable}),_o(()=>s.checkUiComponentContext(t.context)),Bt.config({toggleClass:"dragenter",toggleOnExecute:!1}),yt("dropzone-events",[me("dragenter",u([i,Bt.toggle])),me("dragleave",u([i,Bt.toggle])),me("dragover",i),me("drop",u([i,m])),me(km(),f)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Hn(s.translate("Drop an image here"))]},S]}]};return Bh(C,_,["tox-form__group--stretched"],[yt("handle-files",[me(g3,(A,N)=>{Vt.getField(A).each(I=>{p(I,N.event.files)})})])])},Kz=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Ce(t.items,s.interpreter)}),Ph=Ie("alloy-fake-before-tabstop"),Py=Ie("alloy-fake-after-tabstop"),h3=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Se([ft.config({ignore:!0}),Rn.config({})])}),OR=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[h3([Ph]),s,h3([Py])],behaviours:Se([Nc.childAt(1)])}),p3=(t,s)=>{rt(t,Ui(),{raw:{which:9,shiftKey:s}})},Yz=(t,s)=>{const a=s.element;Hs(a,Ph)?p3(t,!0):Hs(a,Py)&&p3(t,!1)},E0=t=>Sp(t,["."+Ph,"."+Py].join(","),pn),Iy=Ie("update-dialog"),DR=Ie("update-title"),MR=Ie("update-body"),RR=Ie("update-footer"),NR=Ie("body-send-message"),_0=Ie("dialog-focus-shifted"),Fy=Br().browser,Ih=Fy.isSafari(),Xz=Fy.isFirefox(),b3=Ih||Xz,Jz=Fy.isChromium(),Qz=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,v3=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),BR=(t,s)=>{const a=t.body;return x.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!Jz&&!Ih||Qn(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},y3=(t,s,a)=>{const i=t.dom;x.from(i.contentDocument).fold(a,u=>{let m=0;const f=BR(u,s).map(b=>(m=b.scrollTop,b)).forall(Qz),p=()=>{const b=i.contentWindow;Qn(b)&&(f?v3(b,"bottom"):!f&&b3&&m!==0&&v3(b,m))};Ih&&i.addEventListener("load",p,{once:!0}),u.open(),u.write(s),u.close(),Ih||p()})},eU=gr(b3,Ih?500:200).map(t=>cp(y3,t)),tU=(t,s)=>{const a=tt(t.getOr(""));return{getValue:i=>a.get(),setValue:(i,u)=>{if(a.get()!==u){const m=i.element,f=()=>vt(m,"srcdoc",u);s?eU.fold(Y(y3),p=>p.throttle)(m,u,f):f()}a.set(u)}}},PR=(t,s,a)=>{const i="tox-dialog__iframe",u=t.transparent?[]:[`${i}--opaque`],m=t.border?["tox-navobj-bordered"]:[],f={...t.label.map(_=>({title:_})).getOr({}),...a.map(_=>({srcdoc:_})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},p=tU(a,t.streamContent),b=t.label.map(_=>el(_,s)),C=_=>OR(x.from(m),{uid:_.uid,dom:{tag:"iframe",attributes:f,classes:[i,...u]},behaviours:Se([Rn.config({}),ft.config({}),Nf(a,p.getValue,p.setValue),$r.config({channels:{[_0]:{onReceive:(A,N)=>{N.newFocus.each(I=>{Gt(A.element).each(H=>{(xn(A.element,I)?bo:Un)(H,"tox-navobj-bordered-focus")})})}}}})])}),S=Vt.parts.field({factory:{sketch:C}});return Bh(b,S,["tox-form__group--stretched"],[])},nU=(t,s,a,i,u)=>{const m=a*u,f=i*u,p=Math.max(0,t/2-m/2),b=Math.max(0,s/2-f/2);return{left:p.toString()+"px",top:b.toString()+"px",width:m.toString()+"px",height:f.toString()+"px"}},oU=(t,s,a)=>{const i=Yo(t),u=jt(t);return Math.min(i/s,u/a,1)},sU=(t,s)=>{const a=tt(s.getOr({url:""})),i=mn({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(b=>({src:b.url})).getOr({})}}),u=mn({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),m=(b,C)=>{const S={url:C.url};C.zoom.each(A=>S.zoom=A),C.cachedWidth.each(A=>S.cachedWidth=A),C.cachedHeight.each(A=>S.cachedHeight=A),a.set(S);const _=()=>{const{cachedWidth:A,cachedHeight:N,zoom:I}=S;if(!Wr(A)&&!Wr(N)){if(Wr(I)){const Z=oU(b.element,A,N);S.zoom=Z}const H=nU(Yo(b.element),jt(b.element),A,N,S.zoom);u.getOpt(b).each(Z=>{Fa(Z.element,H)})}};i.getOpt(b).each(A=>{const N=A.element;C.url!==Go(N,"src")&&(vt(N,"src",C.url),Un(b.element,"tox-imagepreview__loaded")),_(),as(N).then(I=>{b.getSystem().isConnected()&&(bo(b.element,"tox-imagepreview__loaded"),S.cachedWidth=I.dom.naturalWidth,S.cachedHeight=I.dom.naturalHeight,_())})})},f={};t.height.each(b=>f.height=b);const p=s.map(b=>({url:b.url,zoom:x.from(b.zoom),cachedWidth:x.from(b.cachedWidth),cachedHeight:x.from(b.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:f,attributes:{role:"presentation"}},components:[u.asSpec()],behaviours:Se([Nc.self(),Nf(p,()=>a.get(),m)])}},rU=(t,s,a)=>{const i="tox-label",u=t.align==="center"?[`${i}--center`]:[],m=t.align==="end"?[`${i}--end`]:[],f=mn({dom:{tag:"label",classes:[i,...u,...m]},components:[Hn(s.providers.translate(t.label))]}),p=Ce(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[f.asSpec(),...p],behaviours:Se([Nc.self(),Et.config({}),Vz(x.none()),Ke.config({mode:"acyclic"}),yt("label",[$n(b=>{t.for.each(C=>{a(C).each(S=>{f.getOpt(b).each(_=>{var A;const N=(A=Go(S.element,"id"))!==null&&A!==void 0?A:Ie("form-field");vt(S.element,"id",N),vt(_.element,"for",N)})})})})])])}},C3=Ie("toolbar.button.execute"),aU=t=>ku((s,a)=>{d0(t,s)(i=>{rt(s,C3,{buttonApi:i}),t.onAction(i)})}),qd=Ie("common-button-display-events"),IR={[Ua()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[fc()]:["toolbar-button-events",qd],[Ol()]:["toolbar-button-events","dropdown-events","tooltipping"],[Ca()]:["focusing","alloy.base.behaviour",qd]},x3=t=>_t(t.element,"width",E(t.element,"width")),FR=(t,s,a)=>Qr(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),$y=(t,s)=>FR(t,s,[]),tl=(t,s)=>FR(t,s,[Et.config({})]),Ly=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Hn(a.translate(t))],behaviours:Se([Et.config({})])}),Pc=Ie("update-menu-text"),Bf=Ie("update-menu-icon"),S3=Ie("update-tooltip-text"),w3=(t,s,a,i)=>{const u=tt(ee),m=tt(t.tooltip),f=t.text.map(Z=>mn(Ly(Z,s,a.providers))),p=t.icon.map(Z=>mn(tl(Z,a.providers.icons))),b=(Z,L)=>{const j=Fe.getValue(Z);return ft.focus(j),rt(j,"keydown",{raw:L.event.raw}),Ga.close(j),x.some(!0)},C=t.role.fold(()=>({}),Z=>({role:Z})),S=x.from(t.listRole).map(Z=>({listRole:Z})).getOr({}),_=t.ariaLabel.fold(()=>({}),Z=>({"aria-label":a.providers.translate(Z)})),A=Qr("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),N=Ie("common-button-display-events"),I="dropdown-events";return mn(Ga.sketch({...t.uid?{uid:t.uid}:{},...C,...S,dom:{tag:"button",classes:[s,`${s}--select`].concat(Ce(t.classes,Z=>`${s}--${Z}`)),attributes:{..._,...Qn(i)?{"data-mce-name":i}:{}}},components:kh([p.map(Z=>Z.asSpec()),f.map(Z=>Z.asSpec()),x.some(A)]),matchWidth:!0,useMinWidth:!0,onOpen:(Z,L,j)=>{t.searchable&&a3(j)},dropdownBehaviours:Se([...t.dropdownBehaviours,Ma.button(()=>t.disabled||a.providers.checkUiComponentContext(t.context).shouldDisable),_o(()=>a.providers.checkUiComponentContext(t.context)),sf.config({}),Et.config({}),...t.tooltip.map(Z=>Gn.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(Z),onShow:L=>{if(fr(m.get(),t.tooltip,(j,G)=>G!==j).getOr(!1)){const j=a.providers.translate(m.get().getOr(""));Gn.setComponents(L,a.providers.tooltips.getComponents({tooltipText:j}))}}}))).toArray(),yt(I,[_i(t,u),Rc(t,u)]),yt(N,[$n((Z,L)=>{t.listRole!=="listbox"&&x3(Z)})]),yt("update-dropdown-width-variable",[me(Zi(),(Z,L)=>Ga.close(Z))]),yt("menubutton-update-display-text",[me(Pc,(Z,L)=>{f.bind(j=>j.getOpt(Z)).each(j=>{Et.set(j,[Hn(a.providers.translate(L.event.text))])})}),me(Bf,(Z,L)=>{p.bind(j=>j.getOpt(Z)).each(j=>{Et.set(j,[tl(L.event.icon,a.providers.icons)])})}),me(S3,(Z,L)=>{const j=a.providers.translate(L.event.text);vt(Z.element,"aria-label",j),m.set(x.some(L.event.text))})])]),eventOrder:_n(IR,{[Ca()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[fc()]:["toolbar-button-events",Gn.name(),I,N]}),sandboxBehaviours:Se([Ke.config({mode:"special",onLeft:b,onRight:b}),yt("dropdown-sandbox-events",[me(ry,(Z,L)=>{Ez(Z),L.stop()}),me(vf,(Z,L)=>{_z(Z,L),L.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...sy(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:Mf,onCollapseMenu:(Z,L,j)=>{dn.getHighlighted(j).each(G=>{Mf(Z,j,G)})},onDehighlightItem:b0}}},getAnchorOverrides:()=>({maxHeightFunction:(Z,L)=>{Wx()(Z,L-10)}}),fetch:Z=>So.nu(vn(t.fetch,Z))})).asSpec()},cU=t=>hn(t),$R=t=>t.type==="separator",LR=t=>Qt(t,"getSubmenuItems"),iU={type:"separator"},lU=(t,s)=>{const a=Fo(t,(i,u)=>cU(u)?u===""?i:u==="|"?i.length>0&&!$R(i[i.length-1])?i.concat([iU]):i:Qt(s,u.toLowerCase())?i.concat([s[u.toLowerCase()]]):i:i.concat([u]),[]);return a.length>0&&$R(a[a.length-1])&&a.pop(),a},E3=(t,s)=>{const a=t.getSubmenuItems(),i=HR(a,s),u=_n(i.menus,{[t.value]:i.items}),m=_n(i.expansions,{[t.value]:t.value});return{item:t,menus:u,expansions:m}},uU=t=>{const s=Le(t,"value").getOrThunk(()=>Ie("generated-menu-item"));return _n({value:s},t)},HR=(t,s)=>{const a=lU(hn(t)?t.split(" "):t,s);return As(a,(i,u)=>{if(LR(u)){const m=uU(u),f=E3(m,s);return{menus:_n(i.menus,f.menus),items:[f.item,...i.items],expansions:_n(i.expansions,f.expansions)}}else return{...i,items:[u,...i.items]}},{menus:{},expansions:{},items:[]})},VR=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),dU=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),Pf=(t,s,a,i)=>{const u=Ie("primary-menu"),m=HR(t,a.shared.providers.menuItems());if(m.items.length===0)return x.none();const f=VR(i),p=Nh(u,m.items,s,a,i.isHorizontalMenu,f),b=dU(i),C=Vn(m.menus,(_,A)=>Nh(A,_,s,a,!1,b)),S=_n(C,Tm(u,p));return x.from(cf.tieredData(u,S,m.expansions))},Hy=t=>!Qt(t,"items"),_3="data-value",zR=(t,s,a,i,u)=>Ce(a,m=>Hy(m)?{type:"togglemenuitem",...u?{}:{role:"option"},text:m.text,value:m.value,active:m.value===i,onAction:()=>{Fe.setValue(t,m.value),rt(t,Vr,{name:s}),ft.focus(t)}}:{type:"nestedmenuitem",text:m.text,getSubmenuItems:()=>zR(t,s,m.items,i,u)}),T3=(t,s)=>Xt(t,a=>Hy(a)?gr(a.value===s,a):T3(a.items,s)),mU=(t,s,a)=>{const i=ks(t.items,C=>!Hy(C)),u=s.shared.providers,m=a.bind(C=>T3(t.items,C)).orThunk(()=>Gs(t.items).filter(Hy)),f=t.label.map(C=>el(C,u)),p=Vt.parts.field({dom:{},factory:{sketch:C=>w3({context:t.context,uid:C.uid,text:m.map(S=>S.text),icon:x.none(),tooltip:x.none(),role:gr(!i,"combobox"),...i?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(S,_)=>{const A=zR(S,t.name,t.items,Fe.getValue(S),i);_(Pf(A,Dc.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:x.none()}))},onSetup:Y(ee),getApi:Y({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Rn.config({}),Nf(m.map(S=>S.value),S=>Go(S.element,_3),(S,_)=>{T3(t.items,_).each(A=>{vt(S.element,_3,A.value),rt(S,Pc,{text:A.text})})})]},"tox-listbox",s.shared)}}),b={dom:{tag:"div",classes:["tox-listboxfield"]},components:[p]};return Vt.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:wt([f.toArray(),[b]]),fieldBehaviours:Se([Xe.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable,onDisabled:C=>{Vt.getField(C).each(Xe.disable)},onEnabled:C=>{Vt.getField(C).each(Xe.enable)}})])})},UR=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Ce(t.items,s.shared.interpreter)}),fU=(t,s,a)=>{const i=Ce(t.items,b=>({text:s.translate(b.text),value:b.value})),u=t.label.map(b=>el(b,s)),m=Vt.parts.field({dom:{},...a.map(b=>({data:b})).getOr({}),selectAttributes:{size:t.size},options:i,factory:uf,selectBehaviours:Se([Xe.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),Rn.config({}),yt("selectbox-change",[me(km(),(b,C)=>{rt(b,Vr,{name:t.name})})])])}),f=t.size>1?x.none():x.some(Qr("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),p={dom:{tag:"div",classes:["tox-selectfield"]},components:wt([[m],f.toArray()])};return Vt.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:wt([u.toArray(),[p]]),fieldBehaviours:Se([Xe.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:b=>{Vt.getField(b).each(Xe.disable)},onEnabled:b=>{Vt.getField(b).each(Xe.enable)}}),_o(()=>s.checkUiComponentContext(t.context))])})},ZR=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=u=>u in s?s[u]:1;let i=t.value.toFixed(a(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},Vy=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const i=parseFloat(a[1]),u=a[2];return Nt.value({value:i,unit:u})}else return Nt.error(t)},zy=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=u=>Qt(a,u);return t.unit===s?x.some(t.value):i(t.unit)&&i(s)?a[t.unit]===a[s]?x.some(t.value):x.some(t.value/a[t.unit]*a[s]):x.none()},Fh=t=>x.none(),gU=(t,s)=>a=>zy(a,s).map(i=>({value:i*t,unit:s})),WR=(t,s)=>{const a=Vy(t).toOptional(),i=Vy(s).toOptional();return fr(a,i,(u,m)=>zy(u,m.unit).map(f=>m.value/f).map(f=>gU(f,m.unit)).getOr(Fh)).getOr(Fh)},hU=(t,s)=>{let a=Fh;const i=Ie("ratio-event"),u=H=>Qr(H,{tag:"span",classes:["tox-icon","tox-lock-icon__"+H]},s.icons),m=()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,f=_o(()=>s.checkUiComponentContext(t.context)),p=t.label.getOr("Constrain proportions"),b=s.translate(p),C=Rt.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":b,"data-mce-name":p}},components:[u("lock"),u("unlock")],buttonBehaviours:Se([Xe.config({disabled:m}),f,Rn.config({}),Gn.config(s.tooltips.getConfig({tooltipText:b}))])}),S=H=>({dom:{tag:"div",classes:["tox-form__group"]},components:H}),_=H=>Vt.parts.field({factory:zl,inputClasses:["tox-textfield"],inputBehaviours:Se([Xe.config({disabled:m}),f,Rn.config({}),yt("size-input-events",[me(sr(),(Z,L)=>{rt(Z,i,{isField1:H})}),me(km(),(Z,L)=>{rt(Z,Vr,{name:t.name})})])]),selectOnFocus:!1}),A=H=>({dom:{tag:"label",classes:["tox-label"]},components:[Hn(s.translate(H))]}),N=Rt.parts.field1(S([Vt.parts.label(A("Width")),_(!0)])),I=Rt.parts.field2(S([Vt.parts.label(A("Height")),_(!1)]));return Rt.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[N,I,S([A(ll),C])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(H,Z,L)=>{Vy(Fe.getValue(H)).each(j=>{a(j).each(G=>{Fe.setValue(Z,ZR(G))})})},coupledFieldBehaviours:Se([Xe.config({disabled:m,onDisabled:H=>{Rt.getField1(H).bind(Vt.getField).each(Xe.disable),Rt.getField2(H).bind(Vt.getField).each(Xe.disable),Rt.getLock(H).each(Xe.disable)},onEnabled:H=>{Rt.getField1(H).bind(Vt.getField).each(Xe.enable),Rt.getField2(H).bind(Vt.getField).each(Xe.enable),Rt.getLock(H).each(Xe.enable)}}),_o(()=>s.checkUiComponentContext("mode:design")),yt("size-input-events2",[me(i,(H,Z)=>{const L=Z.event.isField1,j=L?Rt.getField1(H):Rt.getField2(H),G=L?Rt.getField2(H):Rt.getField1(H),ne=j.map(Fe.getValue).getOr(""),ce=G.map(Fe.getValue).getOr("");a=WR(ne,ce)})])])})},pU=(t,s,a)=>{const i=xi.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Hn(s.translate(t.label))]}),u=xi.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),m=xi.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return xi.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:Y(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,u,m],sliderBehaviours:Se([Nc.self(),ft.config({})]),onChoose:(f,p,b)=>{rt(f,Vr,{name:t.name,value:b})},onChange:(f,p,b)=>{rt(f,Vr,{name:t.name,value:b})}})},bU=(t,s)=>{const a=p=>({dom:{tag:"th",innerHtml:s.translate(p)}}),i=p=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ce(p,a)}]}),u=p=>({dom:{tag:"td",innerHtml:s.translate(p)}}),m=p=>({dom:{tag:"tr"},components:Ce(p,u)}),f=p=>({dom:{tag:"tbody"},components:Ce(p,m)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),f(t.cells)],behaviours:Se([Rn.config({}),ft.config({})])}},jR=(t,s)=>{const a=t.label.map(N=>el(N,s)),i=[Xe.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable}),_o(()=>s.checkUiComponentContext(t.context)),Ke.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:N=>(qt(N,Rf),x.some(!0))}),yt("textfield-change",[me(pu(),(N,I)=>{rt(N,Vr,{name:t.name})}),me(gx(),(N,I)=>{rt(N,Vr,{name:t.name})})]),Rn.config({})],u=t.validation.map(N=>vi.config({getRoot:I=>Gt(I.element),invalidClass:"tox-invalid",validator:{validate:I=>{const H=Fe.getValue(I),Z=N.validator(H);return So.pure(Z===!0?Nt.value(H):Nt.error(Z))},validateOnLoad:N.validateOnLoad}})).toArray(),m=t.placeholder.fold(Y({}),N=>({placeholder:s.translate(N)})),f=t.inputMode.fold(Y({}),N=>({inputmode:N})),p={...m,...f,"data-mce-name":t.name},b=Vt.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(N=>({data:N})).getOr({}),inputAttributes:p,inputClasses:[t.classname],inputBehaviours:Se(wt([i,u])),selectOnFocus:!1,factory:zl}),C=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[b]}:b,_=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),A=[Xe.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:N=>{Vt.getField(N).each(Xe.disable)},onEnabled:N=>{Vt.getField(N).each(Xe.enable)}}),_o(()=>s.checkUiComponentContext(t.context))];return Bh(a,C,_,A)},vU=(t,s,a)=>jR({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:x.none(),maximized:t.maximized,data:a,context:t.context},s),yU=(t,s,a)=>jR({name:t.name,multiline:!0,label:t.label,inputMode:x.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:x.none(),maximized:t.maximized,data:a,context:t.context},s),GR=t=>({isEnabled:()=>!Xe.isDisabled(t),setEnabled:s=>Xe.set(t,!s),setActive:s=>{const a=t.element;s?(bo(a,"tox-tbtn--enabled"),vt(a,"aria-pressed",!0)):(Un(a,"tox-tbtn--enabled"),oo(a,"aria-pressed"))},isActive:()=>Hs(t.element,"tox-tbtn--enabled"),setTooltip:s=>{rt(t,S3,{text:s})},setText:s=>{rt(t,Pc,{text:s})},setIcon:s=>rt(t,Bf,{icon:s})}),$h=(t,s,a,i,u=!0,m)=>{const f=t.buttonType==="bordered"?["bordered"]:[];return w3({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(p,b)=>{const C={pattern:t.search.isSome()?Az(p):""};t.fetch(S=>{b(Pf(S,Dc.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},C,GR(p))},onSetup:t.onSetup,getApi:p=>GR(p),columns:1,presets:"normal",classes:f,dropdownBehaviours:[...u?[Rn.config({})]:[]],context:t.context},s,a.shared,m)},Uy=(t,s,a)=>{const i=m=>f=>{const p=!f.isActive();f.setActive(p),m.storage.set(p),a.shared.getSink().each(b=>{s().getOpt(b).each(C=>{Do(C.element),rt(C,jl,{name:m.name,value:m.storage.get()})})})},u=m=>f=>{f.setActive(m.storage.get())};return m=>{m(Ce(t,f=>{const p=f.text.fold(()=>({}),b=>({text:b}));return{type:f.type,active:!1,...p,context:f.context,onAction:i(f),onSetup:u(f)}}))}},Zy=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[Hn(t)]}),k3=(t,s,a)=>{t.customStateIcon.each(i=>s.push(qR(i,a.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],u=>[Gn.config(a.shared.providers.tooltips.getConfig({tooltipText:u}))]),["tox-icon-custom-state"])))},ju=Ie("leaf-label-event-id"),Wy=({leaf:t,onLeafAction:s,visible:a,treeId:i,selectedId:u,backstage:m})=>{const f=t.menu.map(b=>$h(b,"tox-mbtn",m,x.none(),a)),p=[Zy(t.title)];return k3(t,p,m),f.each(b=>p.push(b)),ws.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:p,role:"treeitem",action:b=>{s(t.id),b.getSystem().broadcastOn([`update-active-item-${i}`],{value:t.id})},eventOrder:{[Ui()]:[ju,"keying"]},buttonBehaviours:Se([...a?[Rn.config({})]:[],Bt.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),$r.config({channels:{[`update-active-item-${i}`]:{onReceive:(b,C)=>{(C.value===t.id?Bt.on:Bt.off)(b)}}}}),yt(ju,[$n((b,C)=>{u.each(S=>{(S===t.id?Bt.on:Bt.off)(b)})}),me(Ui(),(b,C)=>{const S=C.event.raw.code==="ArrowLeft",_=C.event.raw.code==="ArrowRight";S?(ti(b.element,".tox-tree--directory").each(A=>{b.getSystem().getByDom(A).each(N=>{xl(A,".tox-tree--directory__label").each(I=>{N.getSystem().getByDom(I).each(ft.focus)})})}),C.stop()):_&&C.stop()})])])})},qR=(t,s,a,i,u)=>Qr(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(i||[]),behaviours:a,attributes:u},s),CU=(t,s)=>qR(t,s,[]),KR=Ie("directory-label-event-id"),xU=({directory:t,visible:s,noChildren:a,backstage:i})=>{const u=t.menu.map(p=>$h(p,"tox-mbtn",i,x.none())),m=[{dom:{tag:"div",classes:["tox-chevron"]},components:[CU("chevron-right",i.shared.providers.icons)]},Zy(t.title)];k3(t,m,i),u.each(p=>{m.push(p)});const f=p=>{ti(p.element,".tox-tree--directory").each(b=>{p.getSystem().getByDom(b).each(C=>{const S=!Bt.isOn(C);Bt.toggle(C),rt(p,"expand-tree-node",{expanded:S,node:t.id})})})};return ws.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:m,action:f,eventOrder:{[Ui()]:[KR,"keying"]},buttonBehaviours:Se([...s?[Rn.config({})]:[],yt(KR,[me(Ui(),(p,b)=>{const C=b.event.raw.code==="ArrowRight",S=b.event.raw.code==="ArrowLeft";C&&a&&b.stop(),(C||S)&&ti(p.element,".tox-tree--directory").each(_=>{p.getSystem().getByDom(_).each(A=>{!Bt.isOn(A)&&C||Bt.isOn(A)&&S?(f(p),b.stop()):S&&!Bt.isOn(A)&&(ti(A.element,".tox-tree--directory").each(N=>{xl(N,".tox-tree--directory__label").each(I=>{A.getSystem().getByDom(I).each(ft.focus)})}),b.stop())})})})])])})},SU=({children:t,onLeafAction:s,visible:a,treeId:i,expandedIds:u,selectedId:m,backstage:f})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(p=>p.type==="leaf"?Wy({leaf:p,selectedId:m,onLeafAction:s,visible:a,treeId:i,backstage:f}):A3({directory:p,expandedIds:u,selectedId:m,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:f})),behaviours:Se([Tr.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),Et.config({})])}),wU=Ie("directory-event-id"),A3=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:u,expandedIds:m,selectedId:f})=>{const{children:p}=t,b=tt(m),C=_=>p.map(A=>A.type==="leaf"?Wy({leaf:A,selectedId:f,onLeafAction:s,visible:_,treeId:i,backstage:u}):A3({directory:A,expandedIds:b.get(),selectedId:f,onLeafAction:s,labelTabstopping:_,treeId:i,backstage:u})),S=m.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[xU({directory:t,visible:a,noChildren:t.children.length===0,backstage:u}),SU({children:p,expandedIds:m,selectedId:f,onLeafAction:s,visible:S,treeId:i,backstage:u})],behaviours:Se([yt(wU,[$n((_,A)=>{Bt.set(_,S)}),me("expand-tree-node",(_,A)=>{const{expanded:N,node:I}=A.event;b.set(N?[...b.get(),I]:b.get().filter(H=>H!==I))})]),Bt.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(_,A)=>{const N=_.components()[1],I=C(A);A?Tr.grow(N):Tr.shrink(N),Et.set(N,I)}})])}},YR=Ie("tree-event-id"),EU=(t,s)=>{const a=t.onLeafAction.getOr(ee),i=t.onToggleExpand.getOr(ee),u=t.defaultExpandedIds,m=tt(u),f=tt(t.defaultSelectedId),p=Ie("tree-id"),b=(C,S)=>t.items.map(_=>_.type==="leaf"?Wy({leaf:_,selectedId:C,onLeafAction:a,visible:!0,treeId:p,backstage:s}):A3({directory:_,selectedId:C,onLeafAction:a,expandedIds:S,labelTabstopping:!0,treeId:p,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:b(f.get(),m.get()),behaviours:Se([Ke.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),yt(YR,[me("expand-tree-node",(C,S)=>{const{expanded:_,node:A}=S.event;m.set(_?[...m.get(),A]:m.get().filter(N=>N!==A)),i(m.get(),{expanded:_,node:A})})]),$r.config({channels:{[`update-active-item-${p}`]:{onReceive:(C,S)=>{f.set(x.some(S.value)),Et.set(C,b(x.some(S.value),m.get()))}}}}),Et.config({})])}},jy=(t,s,a=[],i,u,m,f)=>{const p=s.fold(()=>({}),S=>({action:S})),b={buttonBehaviours:Se([Ma.item(()=>!t.enabled||f.checkUiComponentContext(t.context).shouldDisable),_o(()=>f.checkUiComponentContext(t.context)),Rn.config({}),...m.map(S=>Gn.config(f.tooltips.getConfig({tooltipText:f.translate(S)}))).toArray(),yt("button press",[mP("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...p},C=_n(b,{dom:i});return _n(C,{components:u})},O3=(t,s,a,i=[],u)=>{const m=t.tooltip.map(C=>({"aria-label":a.translate(C)})).getOr({}),f={tag:"button",classes:["tox-tbtn"],attributes:{...m,"data-mce-name":u}},p=t.icon.map(C=>$y(C,a.icons)),b=kh([p]);return jy(t,s,i,f,b,t.tooltip,a)},D3=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},XR=(t,s,a,i=[],u=[])=>{const m=a.translate(t.text),f=t.icon.map(N=>$y(N,a.icons)),p=[f.getOrThunk(()=>Hn(m))],b=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),_={tag:"button",classes:[...D3(b),...f.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...u],attributes:{"aria-label":m,"data-mce-name":t.text}},A=t.icon.map(Y(m));return jy(t,s,i,_,p,A,a)},JR=(t,s,a,i=[],u=[])=>{const m=XR(t,x.some(s),a,i,u);return ws.sketch(m)},QR=(t,s)=>a=>{s==="custom"?rt(a,jl,{name:t,value:{}}):s==="submit"?qt(a,Rf):s==="cancel"?qt(a,Gd):console.error("Unknown button type: ",s)},_U=(t,s)=>s==="menu",TU=(t,s)=>s==="custom"||s==="cancel"||s==="submit",eN=(t,s)=>s==="togglebutton",tN=(t,s,a)=>{var i,u;const m=t.icon.map(G=>tl(G,s.icons)).map(mn),f=G=>{rt(G,jl,{name:t.name,value:{setIcon:ne=>{m.map(ce=>ce.getOpt(G).each(Pe=>{Et.set(Pe,[tl(ne,s.icons)])}))}}})},p=t.buttonType.getOr(t.primary?"primary":"secondary"),b={...t,name:(i=t.name)!==null&&i!==void 0?i:"",primary:p==="primary",tooltip:t.tooltip,enabled:(u=t.enabled)!==null&&u!==void 0?u:!1,borderless:!1},C=b.tooltip.or(t.text).map(G=>({"aria-label":s.translate(G)})).getOr({}),S=D3(p??"secondary"),_=t.icon.isSome()&&t.text.isSome(),A={tag:"button",classes:[...S.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],..._?["tox-button--icon-and-text"]:[]],attributes:{...C,...Qn(a)?{"data-mce-name":a}:{}}},N=[],I=s.translate(t.text.getOr("")),H=Hn(I),L=[...kh([m.map(G=>G.asSpec())]),...t.text.isSome()?[H]:[]],j=jy(b,x.some(f),N,A,L,t.tooltip,s);return ws.sketch(j)},T0=(t,s,a)=>{if(_U(t,s)){const i=()=>f,u=t,m={...t,buttonType:"default",type:"menubutton",search:x.none(),onSetup:p=>(p.setEnabled(t.enabled),ee),fetch:Uy(u.items,i,a)},f=mn($h(m,"tox-tbtn",a,x.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return f.asSpec()}else if(TU(t,s)){const i=QR(t.name,s),u={...t,context:s==="cancel"?"any":t.context,borderless:!1};return JR(u,i,a.shared.providers,[])}else{if(eN(t,s))return tN(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},kU=(t,s)=>{const a=QR(t.name,"custom");return vR(x.none(),Vt.parts.field({factory:ws,...XR(t,x.some(a),s,[x0(""),Nc.self()])}))},nN={type:"separator"},AU=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ee}),M3=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:ee}),OU=t=>Ce(t,AU),oN=(t,s)=>Pn(s,a=>a.type===t),sN=(t,s)=>OU(oN(t,s)),rN=t=>sN("header",t.targets),DU=t=>sN("anchor",t.targets),MU=t=>x.from(t.anchorTop).map(s=>M3("<top>",s)).toArray(),RU=t=>x.from(t.anchorBottom).map(s=>M3("<bottom>",s)).toArray(),NU=t=>Ce(t,s=>M3(s,s)),BU=t=>Fo(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(nN,a),[]),R3=(t,s)=>{const a=t.toLowerCase();return Pn(s,i=>{var u;const m=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,f=(u=i.value)!==null&&u!==void 0?u:"";return Xn(m.toLowerCase(),a)||Xn(f.toLowerCase(),a)})},PU=(t,s,a)=>{var i,u;const m=Fe.getValue(s),f=(u=(i=m==null?void 0:m.meta)===null||i===void 0?void 0:i.text)!==null&&u!==void 0?u:m.value;return a.getLinkInformation().fold(()=>[],b=>{const C=R3(f,NU(a.getHistory(t)));return t==="file"?BU([C,R3(f,rN(b)),R3(f,wt([MU(b),DU(b),RU(b)]))]):C})},N3=Ie("aria-invalid"),IU=(t,s,a,i)=>{const u=s.shared.providers,m=j=>{const G=Fe.getValue(j);a.addToHistory(G.value,t.filetype)},f={...i.map(j=>({initialData:j})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":N3,type:"url"},minChars:0,responseTime:0,fetch:j=>{const G=PU(t.filetype,j,a),ne=Pf(G,Dc.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:x.none()});return So.pure(ne)},getHotspot:j=>I.getOpt(j),onSetValue:(j,G)=>{j.hasConfigured(vi)&&vi.run(j).get(ee)},typeaheadBehaviours:Se([...a.getValidationHandler().map(j=>vi.config({getRoot:G=>Gt(G.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(G,ne)=>{S.getOpt(G).each(ce=>{vt(ce.element,"title",u.translate(ne))})}},validator:{validate:G=>{const ne=Fe.getValue(G);return qf.nu(ce=>{j({type:t.filetype,url:ne.value},Pe=>{if(Pe.status==="invalid"){const ye=Nt.error(Pe.message);ce(ye)}else{const ye=Nt.value(Pe.message);ce(ye)}})})},validateOnLoad:!1}})).toArray(),Xe.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable}),Rn.config({}),yt("urlinput-events",[me(pu(),j=>{const G=ni(j.element),ne=G.trim();ne!==G&&Cm(j.element,ne),t.filetype==="file"&&rt(j,Vr,{name:t.name})}),me(km(),j=>{rt(j,Vr,{name:t.name}),m(j)}),me(gx(),j=>{rt(j,Vr,{name:t.name}),m(j)})])]),eventOrder:{[pu()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:j=>j.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:sy(!1,1,"normal")},onExecute:(j,G,ne)=>{rt(G,Rf,{})},onItemExecute:(j,G,ne,ce)=>{m(j),rt(j,Vr,{name:t.name})}},p=Vt.parts.field({...f,factory:bH}),b=t.label.map(j=>el(j,u)),S=mn(((j,G,ne=j,ce=j)=>Qr(ne,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+j],attributes:{title:u.translate(ce),"aria-live":"polite",...G.fold(()=>({}),Pe=>({id:Pe}))}},u.icons))("invalid",x.some(N3),"warning")),_=mn({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[S.asSpec()]}),A=a.getUrlPicker(t.filetype),N=Ie("browser.url.event"),I=mn({dom:{tag:"div",classes:["tox-control-wrap"]},components:[p,_.asSpec()],behaviours:Se([Xe.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable})])}),H=mn(JR({context:t.context,name:t.name,icon:x.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:x.none(),borderless:!0},j=>qt(j,N),u,[],["tox-browse-url"])),Z=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:wt([[I.asSpec()],A.map(()=>H.asSpec()).toArray()])}),L=j=>{Kt.getCurrent(j).each(G=>{const ne=Fe.getValue(G),ce={fieldname:t.name,...ne};A.each(Pe=>{Pe(ce).get(ye=>{Fe.setValue(G,ye),rt(j,Vr,{name:t.name})})})})};return Vt.sketch({dom:Pz(),components:b.toArray().concat([Z()]),fieldBehaviours:Se([Xe.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable,onDisabled:j=>{Vt.getField(j).each(Xe.disable),H.getOpt(j).each(Xe.disable)},onEnabled:j=>{Vt.getField(j).each(Xe.enable),H.getOpt(j).each(Xe.enable)}}),_o(()=>u.checkUiComponentContext(t.context)),yt("url-input-events",[me(N,L)])])})},FU=(t,s)=>{const a=Q4(t.icon,s.icons);return wc.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[ws.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:i=>rt(i,jl,{name:"alert-banner",value:t.url}),buttonBehaviours:Se([s6()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},$U=(t,s,a)=>{const i=b=>(b.element.dom.click(),x.some(!0)),u=Vt.parts.field({factory:{sketch:Lt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Se([Nc.self(),Xe.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:b=>{Gt(b.element).each(C=>bo(C,"tox-checkbox--disabled"))},onEnabled:b=>{Gt(b.element).each(C=>Un(C,"tox-checkbox--disabled"))}}),Rn.config({}),ft.config({}),ER(a,xp,qC),Ke.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),yt("checkbox-events",[me(km(),(b,C)=>{rt(b,Vr,{name:t.name})})])])}),m=Vt.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Hn(s.translate(t.label))],behaviours:Se([sf.config({})])}),f=b=>Qr(b==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+b]},s.icons),p=mn({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[f("checked"),f("unchecked")]});return Vt.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[u,p.asSpec(),m],fieldBehaviours:Se([Xe.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),_o(()=>s.checkUiComponentContext(t.context))])})},LU=(t,s)=>{const a=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],i=yt("htmlpanel",[$n(u=>{t.onInit(u.element.dom)})]);return t.presets==="presentation"?wc.sketch({dom:{tag:"div",classes:a,innerHtml:t.html},containerBehaviours:Se([Gn.config({...s.tooltips.getConfig({tooltipText:"",onShow:u=>{Dn(u.element,"[data-mce-tooltip]:hover").orThunk(()=>$s(u.element)).each(m=>{qo(m,"data-mce-tooltip").each(f=>{Gn.setComponents(u,s.tooltips.getComponents({tooltipText:f}))})})}}),mode:"children-normal",anchor:u=>({type:"node",node:Dn(u.element,"[data-mce-tooltip]:hover").orThunk(()=>$s(u.element).filter(m=>qo(m,"data-mce-tooltip").isSome())),root:u.element,layouts:{onLtr:Y([Io,Jo,Eo,Rs,Po,ls]),onRtl:Y([Io,Jo,Eo,Rs,Po,ls])},bubble:ar(0,-2,{})})}),i])}):wc.sketch({dom:{tag:"div",classes:a,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Se([Rn.config({}),ft.config({}),i])})},ts=t=>(s,a,i,u,m)=>Le(a,"name").fold(()=>t(a,u,x.none(),m),f=>s.field(f,t(a,u,Le(i,f),m))),HU=t=>(s,a,i,u,m)=>{const f=_n(a,{source:"dynamic"});return ts(t)(s,f,i,u,m)},VU={bar:ts((t,s)=>Nz(t,s.shared)),collection:ts((t,s,a)=>Iz(t,s.shared.providers,a)),alertbanner:ts((t,s)=>FU(t,s.shared.providers)),input:ts((t,s,a)=>vU(t,s.shared.providers,a)),textarea:ts((t,s,a)=>yU(t,s.shared.providers,a)),label:ts((t,s,a,i)=>rU(t,s.shared,i)),iframe:HU((t,s,a)=>PR(t,s.shared.providers,a)),button:ts((t,s)=>kU(t,s.shared.providers)),checkbox:ts((t,s,a)=>$U(t,s.shared.providers,a)),colorinput:ts((t,s,a)=>HG(t,s.shared,s.colorinput,a)),colorpicker:ts((t,s,a)=>S0(t,s.shared.providers,a)),dropzone:ts((t,s,a)=>Bc(t,s.shared.providers,a)),grid:ts((t,s)=>Kz(t,s.shared)),listbox:ts((t,s,a)=>mU(t,s,a)),selectbox:ts((t,s,a)=>fU(t,s.shared.providers,a)),sizeinput:ts((t,s)=>hU(t,s.shared.providers)),slider:ts((t,s,a)=>pU(t,s.shared.providers,a)),urlinput:ts((t,s,a)=>IU(t,s,s.urlinput,a)),customeditor:ts(Gz),htmlpanel:ts((t,s)=>LU(t,s.shared.providers)),imagepreview:ts((t,s,a)=>sU(t,a)),table:ts((t,s)=>bU(t,s.shared.providers)),tree:ts((t,s)=>EU(t,s)),panel:ts((t,s)=>UR(t,s))},aN={field:(t,s)=>s,record:Y([])},cN=(t,s,a,i,u)=>{const m=_n(i,{shared:{interpreter:f=>B3(t,f,a,m,u)}});return B3(t,s,a,m,u)},B3=(t,s,a,i,u)=>Le(VU,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),m=>m(t,s,a,i,u)),P3=(t,s,a,i)=>B3(aN,t,s,a,i),k0={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},iN=(t,s,a)=>{const u={maxHeightFunction:Im()},m=()=>({type:"node",root:uu(rs(t())),node:x.from(t()),bubble:ar(12,12,k0),layouts:{onRtl:()=>[Zp],onLtr:()=>[Ng]},overrides:u}),f=()=>({type:"hotspot",hotspot:s(),bubble:ar(-12,12,k0),layouts:{onRtl:()=>[Eo,Po,Io],onLtr:()=>[Po,Eo,Io]},overrides:u});return()=>a()?m():f()},lN=(t,s,a,i)=>{const m={maxHeightFunction:Im()},f=()=>({type:"node",root:uu(rs(s())),node:x.from(s()),bubble:ar(12,12,k0),layouts:{onRtl:()=>[hc],onLtr:()=>[hc]},overrides:m}),p=()=>t?{type:"node",root:uu(rs(s())),node:x.from(s()),bubble:ar(0,-eo(s()),k0),layouts:{onRtl:()=>[Jo],onLtr:()=>[Jo]},overrides:m}:{type:"hotspot",hotspot:a(),bubble:ar(0,0,k0),layouts:{onRtl:()=>[Jo],onLtr:()=>[Jo]},overrides:m};return()=>i()?f():p()},zU=(t,s,a)=>{const i=()=>({type:"node",root:uu(rs(t())),node:x.from(t()),layouts:{onRtl:()=>[hc],onLtr:()=>[hc]}}),u=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Io],onLtr:()=>[Io]}});return()=>a()?i():u()},UU=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),i=t.model.table.getSelectedCells();if(i.length>1){const u=i[0],m=i[i.length-1],f={firstCell:Ne.fromDom(u),lastCell:Ne.fromDom(m)};return x.some(f)}return x.some(Ep.range(Ne.fromDom(a.startContainer),a.startOffset,Ne.fromDom(a.endContainer),a.endOffset))}}),ZU=t=>s=>({type:"node",root:t(),node:s}),Lh=(t,s,a,i)=>{const u=hh(t),m=()=>Ne.fromDom(t.getBody()),f=()=>Ne.fromDom(t.getContentAreaContainer()),p=()=>u||!i();return{inlineDialog:iN(f,s,p),inlineBottomDialog:lN(t.inline,f,a,p),banner:zU(f,s,p),cursor:UU(t,m),node:ZU(m)}},WU=t=>(s,a)=>{cR(t)(s,a)},jU=t=>()=>JM(t),GU=t=>s=>_y(t,s),qU=t=>s=>XM(t,s),KU=t=>({colorPicker:WU(t),hasCustomColors:jU(t),getColors:GU(t),getColorCols:qU(t)}),YU=t=>()=>OD(t),XU=t=>({isDraggableModal:YU(t)}),JU=t=>{const s=tt(F4(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},Gy=t=>Ks(t,"items"),uN=t=>Ks(t,"format"),dN=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],mN=t=>Qt(t,"items"),fN=t=>Qt(t,"block"),QU=t=>Qt(t,"inline"),eZ=t=>Qt(t,"selector"),gN=t=>Fo(t,(s,a)=>{if(mN(a)){const i=gN(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(QU(a)||fN(a)||eZ(a)){const u=`custom-${hn(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:u,format:a}]),formats:s.formats.concat([{title:a.title,format:u,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),tZ=(t,s)=>{const a=gN(s),i=u=>{ze(u,m=>{t.formatter.has(m.name)||t.formatter.register(m.name,m.format)})};return t.formatter?i(a.customFormats):t.on("init",()=>{i(a.customFormats)}),a.formats},hN=t=>vD(t).map(s=>{const a=tZ(t,s);return yD(t)?dN.concat(a):a}).getOr(dN),nZ=t=>{const s=Yn(t);return s.length===1&&In(s,"title")},I3=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),pN=(t,s,a,i)=>{const u=b=>I3(b,a,i),m=b=>{const C=p(b.items);return{...b,type:"submenu",getStyleItems:Y(C)}},f=b=>{const C=hn(b.name)?b.name:Ie(b.title),S=`custom-${C}`,_={...b,type:"formatter",format:S,isSelected:a(S),getStylePreview:i(S)};return t.formatter.register(C,_),_},p=b=>Ce(b,C=>Gy(C)?m(C):uN(C)?u(C):nZ(C)?{...C,type:"separator"}:f(C));return p(s)},oZ=t=>{const s=p=>()=>t.formatter.match(p),a=p=>()=>{const b=t.formatter.get(p);return b!==void 0?x.some({tag:b.length>0&&(b[0].inline||b[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):x.none()},i=tt([]),u=tt([]),m=tt(!1);return t.on("PreInit",p=>{const b=hN(t),C=pN(t,b,s,a);i.set(C)}),t.on("addStyleModifications",p=>{const b=pN(t,p.items,s,a);u.set(b),m.set(p.replace)}),{getData:()=>{const p=m.get()?[]:i.get(),b=u.get();return p.concat(b)}}},sZ=t=>{let i=0;const u=()=>i>0,m=p=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[Hn(p.tooltipText)]}];return{getConfig:p=>({delayForShow:()=>u()?60:300,delayForHide:Y(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:m(p),onShow:(b,C)=>{i++,p.onShow&&p.onShow(b,C)},onHide:(b,C)=>{i--,p.onHide&&p.onHide(b,C)},onSetup:p.onSetup}),getComponents:m}},rZ=t=>Qn(t)&&t.nodeType===1,bN=Ti.trim,vN=t=>s=>!!(rZ(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),qy=vN("true"),Ky=vN("false"),F3=(t,s,a,i,u)=>({type:t,title:s,url:a,level:i,attach:u}),aZ=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return qy(s)}return!1},cZ=(t,s)=>Ce(Zn(Ne.fromDom(s),t),a=>a.dom),yN=t=>t.innerText||t.textContent,iZ=t=>t.id?t.id:Ie("h"),lZ=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,Yy=t=>lZ(t)&&L3(t),$3=t=>t&&/^(H[1-6])$/.test(t.nodeName),L3=t=>aZ(t)&&!Ky(t),CN=t=>$3(t)&&L3(t),xN=t=>$3(t)?parseInt(t.nodeName.substr(1),10):0,uZ=t=>{var s;const a=iZ(t),i=()=>{t.id=a};return F3("header",(s=yN(t))!==null&&s!==void 0?s:"","#"+a,xN(t),i)},SN=t=>{const s=t.id||t.name,a=yN(t);return F3("anchor",a||"#"+s,"#"+s,0,ee)},dZ=t=>Ce(Pn(t,CN),uZ),mZ=t=>Ce(Pn(t,Yy),SN),fZ=t=>cZ("h1,h2,h3,h4,h5,h6,a:not([href])",t),gZ=t=>bN(t.title).length>0,A0={find:t=>{const s=fZ(t);return Pn(dZ(s).concat(mZ(s)),gZ)}},Xy="tinymce-url-history",wN=5,EN=t=>hn(t)&&/^https?/.test(t),_N=t=>Ao(t)&&t.length<=wN&&Vc(t,EN),TN=t=>ca(t)&&bs(t,s=>!_N(s)).isNone(),H3=()=>{const t=Of.getItem(Xy);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+Xy+" was not valid JSON",a),{};throw a}return TN(s)?s:(console.log("Local storage "+Xy+" was not valid format",s),{})},hZ=t=>{if(!TN(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Of.setItem(Xy,JSON.stringify(t))},pZ=t=>{const s=H3();return Le(s,t).getOr([])},bZ=(t,s)=>{if(!EN(t))return;const a=H3(),i=Le(a,s).getOr([]),u=Pn(i,m=>m!==t);a[s]=[t].concat(u).slice(0,wN),hZ(a)},kN=t=>!!t,vZ=t=>Vn(Ti.makeMap(t,/[, ]/),kN),If=t=>x.from(R4(t)),AN=t=>{const s=x.from(mh(t)).filter(kN).map(vZ);return If(t).fold(pn,a=>s.fold(it,i=>Yn(i).length>0?i:!1))},yZ=(t,s)=>{const a=AN(t);return Zr(a)?a?If(t):x.none():a[s]?If(t):x.none()},CZ=(t,s)=>yZ(t,s).map(a=>i=>So.nu(u=>{const m=(p,b)=>{if(!hn(p))throw new Error("Expected value to be string");if(b!==void 0&&!ca(b))throw new Error("Expected meta to be a object");u({value:p,meta:b})},f={filetype:s,fieldname:i.fieldname,...x.from(i.meta).getOr({})};a.call(t,m,i.value,f)})),V3=t=>x.from(t).filter(hn).getOrUndefined(),z3=t=>fh(t)?x.some({targets:A0.find(t.getBody()),anchorTop:V3(kD(t)),anchorBottom:V3(AD(t))}):x.none(),ON=t=>x.from(K1(t)),DN=t=>({getHistory:pZ,addToHistory:bZ,getLinkInformation:()=>z3(t),getValidationHandler:()=>ON(t),getUrlPicker:s=>CZ(t,s)}),xZ=(t,s,a,i)=>{const u=tt(!1),m=JU(s),f={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Oc.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:sZ(t.dialog),checkUiComponentContext:L=>{if(O4(s))return{contextType:"disabled",shouldDisable:!0};const[j,G=""]=L.split(":"),ne=s.ui.registry.getAll().contexts,ce=Le(ne,j).fold(()=>Le(ne,"mode").map(Pe=>Pe("design")).getOr(!1),Pe=>G.charAt(0)==="!"?!Pe(G.slice(1)):Pe(G));return{contextType:j,shouldDisable:!ce}}},p=DN(s),b=oZ(s),C=KU(s),S=XU(s),_=()=>u.get(),A=L=>u.set(L),N={shared:{providers:f,anchors:Lh(s,a,i,m.isPositionedAtTop),header:m},urlinput:p,styles:b,colorinput:C,dialog:S,isContextMenuOpen:_,setContextMenuState:A},I=L=>x.none(),H={...N,shared:{...N.shared,interpreter:L=>P3(L,{},H,I),getSink:t.popup}},Z={...N,shared:{...N.shared,interpreter:L=>P3(L,{},Z,I),getSink:t.dialog}};return{popup:H,dialog:Z}},Hh=(t,s,a)=>{const i=(ie,$e)=>{ze([s,...a],lt=>{lt.broadcastEvent(ie,$e)})},u=(ie,$e)=>{ze([s,...a],lt=>{lt.broadcastOn([ie],$e)})},m=ie=>u(Ll(),{target:ie.target}),f=ug(),p=ys(f,"touchstart",m),b=ys(f,"touchmove",ie=>i(F8(),ie)),C=ys(f,"touchend",ie=>i(Pp(),ie)),S=ys(f,"mousedown",m),_=ys(f,"mouseup",ie=>{ie.raw.button===0&&u(Ow(),{target:ie.target})}),A=ie=>u(Ll(),{target:Ne.fromDom(ie.target)}),N=ie=>{ie.button===0&&u(Ow(),{target:Ne.fromDom(ie.target)})},I=()=>{ze(t.editorManager.get(),ie=>{t!==ie&&ie.dispatch("DismissPopups",{relatedTarget:t})})},H=ie=>i(hx(),lg(ie)),Z=ie=>{u(Bd(),{}),i(Zi(),lg(ie))},L=rs(Ne.fromDom(t.getElement())),j=hm(L,"scroll",ie=>{requestAnimationFrame(()=>{const $e=t.getContainer();if($e!=null){const Je=zd(t,s.element).map(zt=>[zt.element,...zt.others]).getOr([]);ks(Je,zt=>xn(zt,ie.target))&&(t.dispatch("ElementScroll",{target:ie.target.dom}),i(Mm(),ie))}})}),G=()=>u(Bd(),{}),ne=ie=>{ie.state&&u(Ll(),{target:Ne.fromDom(t.getContainer())})},ce=ie=>{u(Ll(),{target:Ne.fromDom(ie.relatedTarget.getContainer())})},Pe=ie=>t.dispatch("focusin",ie),ye=ie=>t.dispatch("focusout",ie);t.on("PostRender",()=>{t.on("click",A),t.on("tap",A),t.on("mouseup",N),t.on("mousedown",I),t.on("ScrollWindow",H),t.on("ResizeWindow",Z),t.on("ResizeEditor",G),t.on("AfterProgressState",ne),t.on("DismissPopups",ce),ze([s,...a],ie=>{ie.element.dom.addEventListener("focusin",Pe),ie.element.dom.addEventListener("focusout",ye)})}),t.on("remove",()=>{t.off("click",A),t.off("tap",A),t.off("mouseup",N),t.off("mousedown",I),t.off("ScrollWindow",H),t.off("ResizeWindow",Z),t.off("ResizeEditor",G),t.off("AfterProgressState",ne),t.off("DismissPopups",ce),ze([s,...a],ie=>{ie.element.dom.removeEventListener("focusin",Pe),ie.element.dom.removeEventListener("focusout",ye)}),S.unbind(),p.unbind(),b.unbind(),C.unbind(),_.unbind(),j.unbind()}),t.on("detach",()=>{ze([s,...a],vc),ze([s,...a],ie=>ie.destroy())})},Jy=ee,Qy=pn,eC=Y([]);var U3=Object.freeze({__proto__:null,setup:Jy,isDocked:Qy,getBehaviours:eC});const tC=Y(Ie("toolbar-height-change")),Ic={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},Z3="tox-tinymce--toolbar-sticky-on",W3="tox-tinymce--toolbar-sticky-off",j3=(t,s)=>{const a=er(s),u=cc(s).dom.innerHeight,m=nr(a),f=Ne.fromDom(t.elm),p=xm(f),b=jt(f),C=p.y,S=C+b,_=ei(s),A=jt(s),N=_.top,I=N+A,H=Math.abs(N-m.top)<2,Z=Math.abs(I-(m.top+u))<2;if(H&&C<I)ZC(m.left,C-A,a);else if(Z&&S>N){const L=C-u+b+A;ZC(m.left,L,a)}},nC=(t,s)=>In(jn.getModes(t),s),oC=t=>{const s=i=>eo(i)+(parseInt(E(i,"margin-top"),10)||0)+(parseInt(E(i,"margin-bottom"),10)||0),a=t.element;Gt(a).each(i=>{const u="padding-"+jn.getModes(t)[0];if(jn.isDocked(t)){const m=Yo(i);_t(a,"width",m+"px"),_t(i,u,s(a)+"px")}else Me(a,"width"),Me(i,u)})},MN=(t,s)=>{s?(Un(t,Ic.fadeOutClass),ym(t,[Ic.transitionClass,Ic.fadeInClass])):(Un(t,Ic.fadeInClass),ym(t,[Ic.fadeOutClass,Ic.transitionClass]))},RN=(t,s)=>{const a=Ne.fromDom(t.getContainer());s?(bo(a,Z3),Un(a,W3)):(bo(a,W3),Un(a,Z3))},sC=(t,s)=>{const a=er(s);Jc(a).filter(i=>!xn(s,i)).filter(i=>xn(i,Ne.fromDom(a.dom.body))||im(t,i)).each(()=>Do(s))},NN=(t,s)=>$s(t).orThunk(()=>s().toOptional().bind(a=>$s(a.element))),SZ=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(jn.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(oC)}),t.on("SkinLoaded",()=>{a().each(i=>{jn.isDocked(i)?jn.reset(i):jn.refresh(i)})}),t.on("FullscreenStateChanged",()=>{a().each(jn.reset)})),t.on("AfterScrollIntoView",i=>{a().each(u=>{jn.refresh(u);const m=u.element;VC(m)&&j3(i,m)})}),t.on("PostRender",()=>{RN(t,!1)})},wZ=t=>t().map(jn.isDocked).getOr(!1),EZ=()=>[$r.config({channels:{[tC()]:{onReceive:oC}}})],BN=(t,s)=>{const a=tn(),i=s.getSink,u=p=>{i().each(b=>p(b.element))},m=p=>{t.inline||oC(p),RN(t,jn.isDocked(p)),p.getSystem().broadcastOn([Bd()],{}),i().each(b=>b.getSystem().broadcastOn([Bd()],{}))},f=t.inline?[]:EZ();return[ft.config({}),jn.config({contextual:{lazyContext:p=>{const b=eo(p.element),C=t.inline?t.getContentAreaContainer():t.getContainer();return x.from(C).map(S=>{const _=Ms(Ne.fromDom(S));return zd(t,p.element).fold(()=>{const N=_.height-b,I=_.y+(nC(p,"top")?0:b);return Ro(_.x,I,_.width,N)},N=>{const I=Tb(_,hf(N)),H=nC(p,"top")?I.y:I.y+b;return Ro(I.x,H,I.width,I.height-b)})})},onShow:()=>{u(p=>MN(p,!0))},onShown:p=>{u(b=>La(b,[Ic.transitionClass,Ic.fadeInClass])),a.get().each(b=>{sC(p.element,b),a.clear()})},onHide:p=>{NN(p.element,i).fold(a.clear,a.set),u(b=>MN(b,!1))},onHidden:()=>{u(p=>La(p,[Ic.transitionClass]))},...Ic},lazyViewport:p=>zd(t,p.element).fold(()=>{const C=or(),S=Ld(t),_=C.y+(nC(p,"top")&&!V4(t)?S:0),A=C.height-(nC(p,"bottom")?S:0);return{bounds:Ro(C.x,_,C.width,A),optScrollEnv:x.none()}},C=>({bounds:hf(C),optScrollEnv:x.some({currentScrollTop:C.element.dom.scrollTop,scrollElmTop:ei(C.element).top})})),modes:[s.header.getDockingMode()],onDocked:m,onUndocked:m}),...f]};var _Z=Object.freeze({__proto__:null,setup:SZ,isDocked:wZ,getBehaviours:BN});const PN=t=>{const s=t.editor,a=t.sticky?BN:eC;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Se(a(s,t.sharedBackstage))}};var rC=ja({factory:(t,s)=>{const a=(u,m)=>{const f=Ce(m,p=>{const b={type:"menubutton",text:p.text,fetch:S=>{S(p.getItems())},context:"any"},C=Z6(b).mapError(S=>_m(S)).getOrDie();return $h(C,"tox-mbtn",s.backstage,x.some("menuitem"))});Et.set(u,f)},i={focus:Ke.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:Se([Et.config({}),yt("menubar-events",[$n(u=>{t.onSetup(u)}),me(ui(),(u,m)=>{Dn(u.element,".tox-mbtn--active").each(f=>{Sl(m.event.target,".tox-mbtn").each(p=>{xn(f,p)||u.getSystem().getByDom(f).each(b=>{u.getSystem().getByDom(p).each(C=>{Ga.expand(C),Ga.close(b),ft.focus(C)})})})})}),me(vd(),(u,m)=>{m.event.prevFocus.bind(f=>u.getSystem().getByDom(f).toOptional()).each(f=>{m.event.newFocus.bind(p=>u.getSystem().getByDom(p).toOptional()).each(p=>{Ga.isOpen(f)&&(Ga.expand(p),Ga.close(f))})})})]),Ke.config({mode:"flow",selector:".tox-mbtn",onEscape:u=>(t.onEscape(u),x.some(!0))}),Rn.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[be("dom"),be("uid"),be("onEscape"),be("backstage"),J("onSetup",ee)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const IN="💝Get all features",kZ="https://www.tiny.cloud/tinymce-upgrade-to-cloud/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",FN=t=>{const s=t.promotionLink?[{dom:{tag:"a",attributes:{href:kZ,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:IN}}]:[];return{uid:t.uid,dom:t.dom,components:s}},$N=t=>{const{sidebars:s}=t.ui.registry.getAll();ze(Yn(s),a=>{const i=s[a],u=()=>jr(x.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:m=>{t.execCommand("ToggleSidebar",!1,a),m.setActive(u())},onSetup:m=>{m.setActive(u());const f=()=>m.setActive(u());return t.on("ToggleSidebar",f),()=>{t.off("ToggleSidebar",f)}},context:"any"})})},AZ=t=>({element:()=>t.element.dom}),WG=(t,s)=>{const a=Ce(Yn(s),i=>{const u=s[i],m=mc(CM(u));return{name:i,getApi:AZ,onSetup:m.onSetup,onShow:m.onShow,onHide:m.onHide}});return Ce(a,i=>{const u=tt(ee);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:wf.unnamedEvents([_i(i,u),Rc(i,u),me(Hb(),(m,f)=>{const p=f.event;St(a,C=>C.name===p.name).each(C=>{(p.visible?C.onShow:C.onHide)(C.getApi(m))})})])})})},OZ=t=>lr.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:WG(s,t),slotBehaviours:wf.unnamedEvents([$n(a=>lr.hideAllSlots(a))])})),DZ=(t,s,a)=>{Kt.getCurrent(t).each(u=>{Et.set(u,[OZ(s)]);const m=a==null?void 0:a.toLowerCase();hn(m)&&Qt(s,m)&&Kt.getCurrent(u).each(f=>{lr.showSlot(f,m),Tr.immediateGrow(u),Me(u.element,"width"),aC(t.element,"region")})})},aC=(t,s)=>{vt(t,"role",s)},MZ=(t,s)=>{Kt.getCurrent(t).each(i=>{Kt.getCurrent(i).each(m=>{Tr.hasGrown(i)?lr.isShowing(m,s)?(Tr.shrink(i),aC(t.element,"presentation")):(lr.hideAllSlots(m),lr.showSlot(m,s),aC(t.element,"region")):(lr.hideAllSlots(m),lr.showSlot(m,s),Tr.grow(i),aC(t.element,"region"))})})},RZ=t=>Kt.getCurrent(t).bind(a=>Tr.isGrowing(a)||Tr.hasGrown(a)?Kt.getCurrent(a).bind(m=>St(lr.getSlotNames(m),f=>lr.isShowing(m,f))):x.none()),G3=Ie("FixSizeEvent"),q3=Ie("AutoSizeEvent"),NZ=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Se([Rn.config({}),ft.config({}),Tr.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Kt.getCurrent(s).each(lr.hideAllSlots),qt(s,q3)},onGrown:s=>{qt(s,q3)},onStartGrow:s=>{rt(s,G3,{width:$(s.element,"width").getOr("")})},onStartShrink:s=>{rt(s,G3,{width:Yo(s.element)+"px"})}}),Et.config({}),Kt.config({find:s=>{const a=Et.contents(s);return Gs(a)}})])}],behaviours:Se([Nc.childAt(0),yt("sidebar-sliding-events",[me(G3,(s,a)=>{_t(s.element,"width",a.event.width)}),me(q3,(s,a)=>{Me(s.element,"width")})])])}),BZ=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:$l('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),LN=t=>Kt.getCurrent(t).each(s=>Do(s.element,!0)),PZ=(t,s)=>{const a="tabindex",i=`data-mce-${a}`;x.from(t.iframeElement).map(Ne.fromDom).each(u=>{s?(qo(u,a).each(m=>vt(u,i,m)),vt(u,a,-1)):(oo(u,a),qo(u,i).each(m=>{vt(u,a,m),oo(u,i)}))})},IZ=(t,s,a,i)=>{const u=s.element;if(PZ(t,a),a)pi.block(s,BZ(i)),Me(u,"display"),oo(u,"aria-hidden"),t.hasFocus()&&LN(s);else{const m=Kt.getCurrent(s).exists(f=>yl(f.element));pi.unblock(s),_t(u,"display","none"),vt(u,"aria-hidden","true"),m&&t.focus()}},FZ=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Se([Et.config({}),pi.config({focus:!1}),Kt.config({find:s=>Gs(s.components())})]),components:[]}),HN=t=>t.type==="focusin",$Z=t=>HN(t)?(t.composed?Gs(t.composedPath()):x.from(t.target)).map(Ne.fromDom).filter(Gr).exists(a=>Hs(a,"mce-pastebin")):!1,LZ=(t,s,a)=>{const i=tt(!1),u=tn(),m=p=>{i.get()&&!$Z(p)&&(p.preventDefault(),LN(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",m),t.on("BeforeExecCommand",p=>{p.command.toLowerCase()==="mcefocus"&&p.value!==!0&&m(p)})});const f=p=>{p!==i.get()&&(i.set(p),IZ(t,s(),p,a.providers),JV(t,p))};t.on("ProgressState",p=>{if(u.on(clearTimeout),la(p.time)){const b=z2.setEditorTimeout(t,()=>f(p.state),p.time);u.set(b)}else f(p.state),u.clear()})},VN=t=>{const s=t.label.isNone()?t.title.fold(()=>({}),a=>({attributes:{"aria-label":a}})):t.label.fold(()=>({}),a=>({attributes:{"aria-label":a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(t.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...t.label.map(a=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[Hn(a)]})).toArray(),H2.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Se([Rn.config({}),ft.config({ignore:!0})])}},cC=t=>H2.sketch(VN(t)),zN=(t,s)=>{const a=$n(i=>{const u=Ce(t.initGroups,cC);Es.setGroups(i,u)});return Se([Ma.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),_o(()=>t.providers.checkUiComponentContext("any")),Ke.config({mode:s,onEscape:t.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),yt("toolbar-events",[a])])},UN=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":VN({title:x.none(),label:x.none(),items:[]}),"overflow-button":O3({context:"any",name:"more",icon:x.some("more-drawer"),enabled:!0,tooltip:x.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:x.none(),borderless:!1},x.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:zN(t,s)}},HZ=t=>{const s=UN(t),a=4,i=E4.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return E4.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const u=t.moreDrawerData.lazyHeader().element,m=xm(u),f=ha(u),p=xm(f),b=Math.max(f.dom.scrollHeight,p.height);return Ro(m.x+a,p.y,m.width-a*2,b)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:u=>t.onToggled(u,!0),onClosed:u=>t.onToggled(u,!1)})},VZ=t=>{const s=k4.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=k4.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=UN(t);return k4.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:u=>{u.getSystem().broadcastOn([tC()],{type:"opened"}),t.onToggled(u,!0)},onClosed:u=>{u.getSystem().broadcastOn([tC()],{type:"closed"}),t.onToggled(u,!1)}})},iC=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Es.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Tc.scrolling?["tox-toolbar--scrolling"]:[])},components:[Es.parts.groups({})],toolbarBehaviours:zN(t,s)})},K3=(t,s)=>{var a,i;const u=t.type==="togglebutton",m=t.icon.map(G=>tl(G,s.icons)).map(mn),p=G=>{const ne=ie=>{m.map($e=>$e.getOpt(G).each(lt=>{Et.set(lt,[tl(ie,s.icons)])}))},ce=ie=>{const $e=G.element;ie?(bo($e,"tox-button--enabled"),vt($e,"aria-pressed",!0)):(Un($e,"tox-button--enabled"),oo($e,"aria-pressed"))},Pe=()=>Hs(G.element,"tox-button--enabled"),ye=()=>Do(G.element);if(u)return t.onAction({setIcon:ne,setActive:ce,isActive:Pe,focus:ye});if(t.type==="button")return t.onAction({setIcon:ne})},b={...t,name:u?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:x.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},C=D3((i=t.buttonType)!==null&&i!==void 0?i:"secondary"),S=u?t.text.map(s.translate):x.some(s.translate(t.text)),_=S.map(Hn),A=b.tooltip.or(S).map(G=>({"aria-label":s.translate(G)})).getOr({}),N=m.map(G=>G.asSpec()),I=kh([N,_]),H=t.icon.isSome()&&_.isSome(),Z={tag:"button",classes:C.concat(...t.icon.isSome()&&!H?["tox-button--icon"]:[]).concat(...H?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:A},L=[],j=jy(b,x.some(p),L,Z,I,t.tooltip,s);return ws.sketch(j)},ZN=(t,s)=>K3(t,s),zZ=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Ce(t.buttons,a=>ZN(a,s))}),lC=Br().deviceType,WN=lC.isPhone(),jN=lC.isTablet(),UZ=t=>{let s=!1;const a=Ce(t.buttons,i=>i.type==="group"?(s=!0,zZ(i,t.providers)):ZN(i,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...WN||jN?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Se([ft.config({}),Ke.config({mode:"flow",selector:"button, .tox-button",focusInside:yd.OnEnterOrSpaceMode})]),components:s?a:[wc.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),wc.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},ZZ=t=>({uid:t.uid,behaviours:Se([ft.config({}),Rn.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),WZ=(t,s,a,i)=>{const u={getPane:m=>ds.getPart(m,t,"pane"),getOnShow:m=>t.viewConfig.onShow,getOnHide:m=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:Se([ft.config({}),Ke.config({mode:"cyclic",focusInside:yd.OnEnterOrSpaceMode})]),apis:u}};var Vh=_r({name:"silver.View",configFields:[be("viewConfig")],partFields:[Uo({factory:{sketch:UZ},schema:[be("buttons"),be("providers")],name:"header"}),Uo({factory:{sketch:ZZ},schema:[],name:"pane"})],factory:WZ,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const jZ=(t,s,a)=>Ni(s,(i,u)=>{const m=mc(kV(i));return t.slot(u,Vh.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:m,components:[...m.buttons.length>0?[Vh.parts.header({buttons:m.buttons,providers:a})]:[],Vh.parts.pane({})]}))}),Y3=(t,s)=>lr.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:jZ(a,t,s),slotBehaviours:wf.unnamedEvents([$n(i=>lr.hideAllSlots(i))])})),GN=t=>St(lr.getSlotNames(t),s=>lr.isShowing(t,s)),qN=t=>{const s=t.element;_t(s,"display","none"),vt(s,"aria-hidden","true")},GZ=t=>{const s=t.element;Me(s,"display"),oo(s,"aria-hidden")},qZ=t=>({getContainer:Y(t)}),uC=(t,s,a)=>{lr.getSlot(t,s).each(i=>{Vh.getPane(i).each(u=>{a(i)(qZ(u.element.dom))})})},KZ=(t,s)=>uC(t,s,Vh.getOnShow),KN=(t,s)=>uC(t,s,Vh.getOnHide);var dC=ja({factory:(t,s)=>{const m={setViews:(f,p)=>{Et.set(f,[Y3(p,s.backstage.shared.providers)])},whichView:f=>Kt.getCurrent(f).bind(GN),toggleView:(f,p,b,C)=>Kt.getCurrent(f).exists(S=>{const _=GN(S),A=_.exists(I=>C===I),N=lr.getSlot(S,C).isSome();return N&&(lr.hideAllSlots(S),A?(qN(f),p()):(b(),GZ(f),lr.showSlot(S,C),KZ(S,C)),_.each(I=>KN(S,I))),N})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Se([Et.config({}),Kt.config({find:f=>{const p=Et.contents(f);return Gs(p)}})]),apis:m}},name:"silver.ViewWrapper",configFields:[be("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,i,u)=>t.toggleView(s,a,i,u),whichView:(t,s)=>t.whichView(s)}});const YZ=(t,s,a)=>{let i=!1;const u=f=>{du(f,".tox-statusbar").each(p=>{E(p,"display")==="none"&&Go(p,"aria-hidden")==="true"?(Me(p,"display"),oo(p,"aria-hidden")):(_t(p,"display","none"),vt(p,"aria-hidden","true"))})},m={getSocket:f=>ds.getPart(f,t,"socket"),setSidebar:(f,p,b)=>{ds.getPart(f,t,"sidebar").each(C=>DZ(C,p,b))},toggleSidebar:(f,p)=>{ds.getPart(f,t,"sidebar").each(b=>MZ(b,p))},whichSidebar:f=>ds.getPart(f,t,"sidebar").bind(RZ).getOrNull(),getHeader:f=>ds.getPart(f,t,"header"),getToolbar:f=>ds.getPart(f,t,"toolbar"),setToolbar:(f,p)=>{ds.getPart(f,t,"toolbar").each(b=>{const C=Ce(p,cC);b.getApis().setGroups(b,C)})},setToolbars:(f,p)=>{ds.getPart(f,t,"multiple-toolbar").each(b=>{const C=Ce(p,S=>Ce(S,cC));b2.setItems(b,C)})},refreshToolbar:f=>{ds.getPart(f,t,"toolbar").each(b=>b.getApis().refresh(b))},toggleToolbarDrawer:f=>{ds.getPart(f,t,"toolbar").each(p=>{ed(p.getApis().toggle,b=>b(p))})},toggleToolbarDrawerWithoutFocusing:f=>{ds.getPart(f,t,"toolbar").each(p=>{ed(p.getApis().toggleWithoutFocusing,b=>b(p))})},isToolbarDrawerToggled:f=>ds.getPart(f,t,"toolbar").bind(p=>x.from(p.getApis().isOpen).map(b=>b(p))).getOr(!1),getThrobber:f=>ds.getPart(f,t,"throbber"),focusToolbar:f=>{ds.getPart(f,t,"toolbar").orThunk(()=>ds.getPart(f,t,"multiple-toolbar")).each(b=>{Ke.focusIn(b)})},setMenubar:(f,p)=>{ds.getPart(f,t,"menubar").each(b=>{rC.setMenus(b,p)})},focusMenubar:f=>{ds.getPart(f,t,"menubar").each(p=>{rC.focus(p)})},setViews:(f,p)=>{ds.getPart(f,t,"viewWrapper").each(b=>{dC.setViews(b,p)})},toggleView:(f,p)=>ds.getPart(f,t,"viewWrapper").exists(b=>dC.toggleView(b,()=>m.showMainView(f),()=>m.hideMainView(f),p)),whichView:f=>ds.getPart(f,t,"viewWrapper").bind(dC.whichView).getOrNull(),hideMainView:f=>{i=m.isToolbarDrawerToggled(f),i&&m.toggleToolbarDrawer(f),ds.getPart(f,t,"editorContainer").each(p=>{const b=p.element;u(b),_t(b,"display","none"),vt(b,"aria-hidden","true")})},showMainView:f=>{i&&m.toggleToolbarDrawer(f),ds.getPart(f,t,"editorContainer").each(p=>{const b=p.element;u(b),Me(b,"display"),oo(b,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:m,behaviours:t.behaviours}},XZ=Gi.optional({factory:rC,name:"menubar",schema:[be("backstage")]}),JZ=t=>t.type===Tc.sliding?VZ:t.type===Tc.floating?HZ:iC,QZ=Gi.optional({factory:{sketch:t=>b2.sketch({uid:t.uid,dom:t.dom,listBehaviours:Se([Ke.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>iC({type:t.type,uid:Ie("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),x.some(!0))}),setupItem:(s,a,i,u)=>{Es.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[be("dom"),be("onEscape")]}),XN=Gi.optional({factory:{sketch:t=>{const s=JZ(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),x.some(!0)),onToggled:(i,u)=>t.onToolbarToggled(u),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[be("dom"),be("onEscape"),be("getSink")]}),eW=Gi.optional({factory:{sketch:PN},name:"header",schema:[be("dom")]}),tW=Gi.optional({factory:{sketch:FN},name:"promotion",schema:[be("dom"),be("promotionLink")]}),nW=Gi.optional({name:"socket",schema:[be("dom")]}),oW=Gi.optional({factory:{sketch:NZ},name:"sidebar",schema:[be("dom")]}),sW=Gi.optional({factory:{sketch:FZ},name:"throbber",schema:[be("dom")]}),rW=Gi.optional({factory:dC,name:"viewWrapper",schema:[be("backstage")]}),aW=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),cW=Gi.optional({factory:{sketch:aW},name:"editorContainer",schema:[]});var Bn=_r({name:"OuterContainer",factory:YZ,configFields:[be("dom"),be("behaviours")],partFields:[eW,XZ,XN,QZ,nW,oW,tW,sW,rW,cW],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,i)=>{t.setSidebar(s,a,i)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const iW="file edit view insert format tools table help",X3={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},lW=(t,s,a)=>{const i=SD(a).split(/[ ,]/);return{text:t.title,getItems:()=>de(t.items,u=>{const m=u.toLowerCase();return m.trim().length===0?[]:ks(i,f=>f===m)?[]:m==="separator"||m==="|"?[{type:"separator"}]:s.menuItems[m]?[s.menuItems[m]]:[]})}},J3=t=>t.split(" "),JN=(t,s)=>{const a={...X3,...s.menus},i=Yn(s.menus).length>0,u=s.menubar===void 0||s.menubar===!0?J3(iW):J3(s.menubar===!1?"":s.menubar),m=Pn(u,p=>{const b=Qt(X3,p);return i?b||Le(s.menus,p).exists(C=>Qt(C,"items")):b}),f=Ce(m,p=>{const b=a[p];return lW({title:b.title,items:J3(b.items)},s,t)});return Pn(f,p=>{const b=C=>hn(C)||C.type!=="separator";return p.getItems().length>0&&ks(p.getItems(),b)})},Ff=t=>{const s=()=>{t._skinLoaded=!0,YV(t)};return()=>{t.initialized?s():t.on("init",s)}},QN=(t,s)=>()=>LM(t,{message:s}),uW=t=>{const s=P4(t);return s?x.from(s):x.none()},eB=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),mC=(t,s,a,i)=>(t.on("remove",()=>i.unloadRawCss(s)),i.loadRawCss(s,a)),dW=(t,s)=>"ui/"+t+"/"+s,tB=t=>x.from(tinymce.Resource.get(t)).filter(hn),Q3=(t,s,a="")=>{const i=uW(t).map(m=>dW(m,`${s}.css`)),u=i.bind(tB);return fr(i,u,(m,f)=>({_kind:"load-raw",key:m,css:f})).getOrThunk(()=>{const m=t.editorManager.suffix;return{_kind:"load-stylesheet",url:a+`/${s}${m}.css`}})},mW=(t,s)=>{const a=t.ui.styleSheetLoader,i=Q3(t,"skin",s);switch(i._kind){case"load-raw":const{key:u,css:m}=i;return mC(t,u,m,a),Promise.resolve();case"load-stylesheet":const{url:f}=i;return eB(t,f,a);default:return Promise.resolve()}},fW=(t,s)=>{if(gl(Ne.fromDom(t.getElement()))){const i=j1.DOM.styleSheetLoader,u=Q3(t,"skin.shadowdom",s);switch(u._kind){case"load-raw":const{key:m,css:f}=u;return mC(t,m,f,i),Promise.resolve();case"load-stylesheet":const{url:p}=u;return eB(t,p,i);default:return Promise.resolve()}}else return Promise.resolve()},gW=(t,s,a)=>{const u=Q3(t,s?"content.inline":"content",a);switch(u._kind){case"load-raw":const{key:m,css:f}=u;return s?mC(t,m,f,t.ui.styleSheetLoader):t.on("PostRender",()=>{mC(t,m,f,t.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:p}=u;return a&&t.contentCSS.push(p),Promise.resolve();default:return Promise.resolve()}},hW=async(t,s)=>{const a=Hd(s);if(await gW(s,t,a),!G2(s)&&hn(a))return Promise.all([mW(s,a),fW(s,a)]).then()},nB=(t,s)=>hW(t,s).then(Ff(s),QN(s,"Skin could not be loaded")),pW=vn(nB,!1),bW=vn(nB,!0),oB=t=>({isEnabled:()=>!Xe.isDisabled(t),setEnabled:s=>Xe.set(t,!s),setText:s=>rt(t,Pc,{text:s}),setIcon:s=>rt(t,Bf,{icon:s})}),vW=t=>({setActive:s=>{Bt.set(t,s)},isActive:()=>Bt.isOn(t),isEnabled:()=>!Xe.isDisabled(t),setEnabled:s=>Xe.set(t,!s),setText:s=>rt(t,Pc,{text:s}),setIcon:s=>rt(t,Bf,{icon:s})}),e_=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),t_=Ie("focus-button"),n_=(t,s,a,i,u,m,f)=>{const p=s.map(C=>mn(Ly(C,"tox-tbtn",u))),b=t.map(C=>mn(tl(C,u.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...e_(a,u),...Qn(f)?{"data-mce-name":f}:{}}},components:kh([b.map(C=>C.asSpec()),p.map(C=>C.asSpec())]),eventOrder:{[Ca()]:["focusing","alloy.base.behaviour",qd],[fc()]:[qd,"toolbar-group-button-events"],[Ol()]:[qd,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:Se([Ma.toolbarButton(()=>u.checkUiComponentContext(m).shouldDisable),_o(()=>u.checkUiComponentContext(m)),yt(qd,[$n((C,S)=>x3(C)),me(Pc,(C,S)=>{p.bind(_=>_.getOpt(C)).each(_=>{Et.set(_,[Hn(u.translate(S.event.text))])})}),me(Bf,(C,S)=>{b.bind(_=>_.getOpt(C)).each(_=>{Et.set(_,[tl(S.event.icon,u.icons)])})}),me(Ca(),(C,S)=>{S.event.prevent(),qt(C,t_)})])].concat(i.getOr([])))}},O0=(t,s,a,i,u)=>{const m=s.shared,f=tt(ee),p={toolbarButtonBehaviours:[],getApi:oB,onSetup:t.onSetup},b=[yt("toolbar-group-button-events",[_i(p,f),Rc(p,f)]),...t.tooltip.map(C=>Gn.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(C)}))).toArray()];return Vl.sketch({lazySink:m.getSink,fetch:()=>So.nu(C=>{C(Ce(a(t.items),cC))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:n_(t.icon,t.text,t.tooltip,x.some(b),m.providers,t.context,u),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},sB=(t,s,a,i)=>{var u;const m=tt(ee),f=n_(t.icon,t.text,t.tooltip,x.none(),a,t.context,i);return ws.sketch({dom:f.dom,components:f.components,eventOrder:IR,buttonBehaviours:{...Se([yt("toolbar-button-events",[aU({onAction:t.onAction,getApi:s.getApi}),_i(s,m),Rc(s,m)]),...t.tooltip.map(p=>Gn.config(a.tooltips.getConfig({tooltipText:a.translate(p)+t.shortcut.map(b=>` (${FE(b)})`).getOr("")}))).toArray(),Ma.toolbarButton(()=>!t.enabled||a.checkUiComponentContext(t.context).shouldDisable),_o(()=>a.checkUiComponentContext(t.context))].concat(s.toolbarButtonBehaviours)),[qd]:(u=f.buttonBehaviours)===null||u===void 0?void 0:u[qd]}})},yW=(t,s,a)=>D0(t,s,[],a),D0=(t,s,a,i)=>sB(t,{toolbarButtonBehaviours:a.length>0?[yt("toolbarButtonWith",a)]:[],getApi:oB,onSetup:t.onSetup},s,i),CW=(t,s,a)=>rB(t,s,[],a),rB=(t,s,a,i)=>sB(t,{toolbarButtonBehaviours:[Et.config({}),Bt.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[yt("toolbarToggleButtonWith",a)]:[]),getApi:vW,onSetup:t.onSetup},s,i),xW=(t,s,a)=>i=>So.nu(u=>s.fetch(u)).map(u=>x.from(Ny(_n(Oy(Ie("menu-value"),u,m=>{s.onItemAction(t(i),m)},s.columns,s.presets,Dc.CLOSE_ON_EXECUTE,s.select.getOr(pn),a),{movement:p0(s.columns,s.presets),menuBehaviours:wf.unnamedEvents(s.columns!=="auto"?[]:[$n((m,f)=>{EM(m,4,ny(s.presets)).each(({numRows:p,numColumns:b})=>{Ke.setGridSize(m,p,b)})})])})))),SW=(t,s,a)=>{const i=tt(t.tooltip.getOr("")),u=p=>({isEnabled:()=>!Xe.isDisabled(p),setEnabled:b=>Xe.set(p,!b),setIconFill:(b,C)=>{Dn(p.element,`svg path[class="${b}"], rect[class="${b}"]`).each(S=>{vt(S,"fill",C)})},setActive:b=>{vt(p.element,"aria-pressed",b),Dn(p.element,"span").each(C=>{p.getSystem().getByDom(C).each(S=>Bt.set(S,b))})},isActive:()=>Dn(p.element,"span").exists(b=>p.getSystem().getByDom(b).exists(Bt.isOn)),setText:b=>Dn(p.element,"span").each(C=>p.getSystem().getByDom(C).each(S=>rt(S,Pc,{text:b}))),setIcon:b=>Dn(p.element,"span").each(C=>p.getSystem().getByDom(C).each(S=>rt(S,Bf,{icon:b}))),setTooltip:b=>{const C=s.providers.translate(b);vt(p.element,"aria-label",C),i.set(b)}}),m=tt(ee),f={getApi:u,onSetup:t.onSetup};return $2.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...e_(t.tooltip,s.providers),...Qn(a)?{"data-mce-name":a}:{}}},onExecute:p=>{const b=u(p);b.isEnabled()&&t.onAction(b)},onItemExecute:(p,b,C)=>{},splitDropdownBehaviours:Se([yt("split-dropdown-events",[$n((p,b)=>x3(p)),me(t_,ft.focus),_i(f,m),Rc(f,m)]),Ma.splitButton(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),_o(()=>s.providers.checkUiComponentContext(t.context)),sf.config({}),...t.tooltip.map(p=>Gn.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(p),onShow:b=>{if(i.get()!==p){const C=s.providers.translate(i.get());Gn.setComponents(b,s.providers.tooltips.getComponents({tooltipText:C}))}}})})).toArray()]),eventOrder:{[fc()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Ol()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:xW(u,t,s.providers),parts:{menu:sy(!1,t.columns,t.presets)},components:[$2.parts.button(n_(t.icon,t.text,x.none(),x.some([Bt.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),Ma.toolbarButton(pn),_o(Y({contextType:"any",shouldDisable:!1}))]),s.providers,t.context)),$2.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:Q4("chevron-down",s.providers.icons)},buttonBehaviours:Se([Ma.splitButton(pn),_o(Y({contextType:"any",shouldDisable:!1}))])}),$2.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},wW=".tox-toolbar-slider__input,.tox-toolbar-textfield",aB=t=>{qn.getContent(t).each(s=>{Dn(s.element,wW).fold(()=>Ke.focusIn(s),Do)})},EW=t=>$s(t.element).each(s=>{ti(s,'[tabindex="-1"]').each(a=>{Do(a)})}),cB=Ie("forward-slide"),fC=Ie("backward-slide"),o_=Ie("change-slide-event"),s_="tox-pop--resizing",_W=t=>{const s=tt([]);return{sketch:qn.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:i=>{s.set([]),qn.getContent(i).each(u=>{Me(u.element,"visibility")}),Un(i.element,s_),Me(i.element,"width")},onHide:()=>{s.set([]),t.onHide()},inlineBehaviours:Se([yt("context-toolbar-events",[Pg(Sg(),(i,u)=>{u.event.raw.propertyName==="width"&&(Un(i.element,s_),Me(i.element,"width"))}),me(o_,(i,u)=>{const m=i.element;Me(m,"width");const f=Yo(m),p=$s(i.element).isSome();Me(m,"left"),Me(m,"right"),Me(m,"max-width"),qn.setContent(i,u.event.contents),bo(m,s_);const b=Yo(m);_t(m,"transition","none"),qn.reposition(i),Me(m,"transition"),_t(m,"width",f+"px"),u.event.focus.fold(()=>{p&&aB(i)},C=>{Jc(rs(i.element)).fold(()=>Do(C),S=>{xn(S,C)||Do(C)})}),setTimeout(()=>{_t(i.element,"width",b+"px")},0)}),me(cB,(i,u)=>{qn.getContent(i).each(m=>{s.set(s.get().concat([{bar:m,focus:Jc(rs(i.element))}]))}),rt(i,o_,{contents:u.event.forwardContents,focus:x.none()})}),me(fC,(i,u)=>{t.onBack(),zc(s.get()).each(m=>{s.set(s.get().slice(0,s.get().length-1)),rt(i,o_,{contents:Za(m.bar),focus:m.focus})})})]),Ke.config({mode:"special",onEscape:i=>zc(s.get()).fold(()=>t.onEscape(),u=>(qt(i,fC),x.some(!0)))})]),lazySink:()=>Nt.value(t.sink)}),inSubtoolbar:()=>s.get().length>0}},TW=(t,s)=>{const a=mc(OE({type:"button",icon:"chevron-left",tooltip:"Back",onAction:ee}));return D0(a,s.shared.providers,[me(C3,i=>{qt(i,fC)})])},zh=(t,s,a)=>Gc(a)?t.translate(s):t.translate([s,t.translate(a)]),kW=(t,s)=>{const a=(f,p,b,C)=>{const S=t.shared.providers.translate(f.title);if(f.type==="separator")return x.some({type:"separator",text:S});if(f.type==="submenu"){const _=de(f.getStyleItems(),A=>i(A,p,C));return p===0&&_.length<=0?x.none():x.some({type:"nestedmenuitem",text:S,enabled:_.length>0,getSubmenuItems:()=>de(f.getStyleItems(),A=>i(A,p,C))})}else return x.some({type:"togglemenuitem",text:S,icon:f.icon,active:f.isSelected(C),enabled:!b,onAction:s.onAction(f),...f.getStylePreview().fold(()=>({}),_=>({meta:{style:_}}))})},i=(f,p,b)=>{const C=f.type==="formatter"&&s.isInvalid(f);return p===0?C?[]:a(f,p,!1,b).toArray():a(f,p,C,b).toArray()},u=f=>{const p=s.getCurrentValue(),b=s.shouldHide?0:1;return de(f,C=>i(C,b,p))};return{validateItems:u,getFetch:(f,p)=>(b,C)=>{const S=p(),_=u(S),A=Pf(_,Dc.CLOSE_ON_EXECUTE,f,{isHorizontalMenu:!1,search:x.none()});C(A)}}},Uh=(t,s)=>{const a=s.dataset,i=a.type==="basic"?()=>Ce(a.data,u=>I3(u,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:kW(t,s),getStyleItems:i}},M0=(t,s,a,i,u,m)=>{const{items:f,getStyleItems:p}=Uh(s,a),b=tt(a.tooltip),C=_=>({getComponent:Y(_),setTooltip:A=>{const N=s.shared.providers.translate(A);vt(_.element,"aria-label",N),b.set(A)}}),S=_=>{const A=N=>_.setTooltip(zh(t,i(N.value),N.value));return t.on(u,A),h0(Af(t,"NodeChange",N=>{const I=N.getComponent();a.updateText(I),Xe.set(N.getComponent(),!t.selection.isEditable()||p().length===0)})(_),()=>t.off(u,A))};return w3({context:"mode:design",text:a.icon.isSome()?x.none():a.text,icon:a.icon,ariaLabel:x.some(a.tooltip),tooltip:x.none(),role:x.none(),fetch:f.getFetch(s,p),onSetup:S,getApi:C,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Gn.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:_=>{if(a.tooltip!==b.get()){const A=s.shared.providers.translate(b.get());Gn.setComponents(_,s.shared.providers.tooltips.getComponents({tooltipText:A}))}}})})]},"tox-tbtn",s.shared,m)},gC=t=>Ce(t,s=>{let a=s,i=s;const u=s.split("=");return u.length>1&&(a=u[0],i=u[1]),{title:a,format:i}}),AW=t=>({type:"basic",data:t});var Zh;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(Zh||(Zh={}));const OW=(t,s)=>s===Zh.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),r_=(t,s,a)=>{const i=t.options.get(s);return{type:"basic",data:gC(OW(i,a))}},DW="Align",iB=Y("Alignment {0}"),a_="left",c_=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],lB=t=>{const s=()=>St(c_,p=>t.formatter.match(p.format)),a=p=>()=>t.formatter.match(p),i=p=>x.none,u=p=>{const C=s().fold(Y(a_),S=>S.title.toLowerCase());rt(p,Bf,{icon:`align-${C}`}),zM(t,{value:C})},m=AW(c_),f=p=>()=>St(c_,b=>b.format===p.format).each(b=>t.execCommand(b.command));return{tooltip:zh(t,iB(),a_),text:x.none(),icon:x.some("align-left"),isSelectedFor:a,getCurrentValue:x.none,getPreviewFor:i,onAction:f,updateText:u,dataset:m,shouldHide:!1,isInvalid:p=>!t.formatter.canApply(p.format)}},MW=(t,s)=>M0(t,s,lB(t),iB,"AlignTextUpdate","align"),RW=(t,s)=>{const a=Uh(s,lB(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(DW),onSetup:Ar(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},uB=(t,s)=>{const a=s(),i=Ce(a,u=>u.format);return x.from(t.formatter.closest(i)).bind(u=>St(a,m=>m.format===u))},i_="Blocks",l_=Y("Block {0}"),u_="Paragraph",dB=t=>{const s=m=>()=>t.formatter.match(m),a=m=>()=>{const f=t.formatter.get(m);return f?x.some({tag:f.length>0&&(f[0].inline||f[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(m))}):x.none()},i=m=>{const p=uB(t,()=>u.data).fold(Y(u_),b=>b.title);rt(m,Pc,{text:p}),kr(t,{value:p})},u=r_(t,"block_formats",Zh.SemiColon);return{tooltip:zh(t,l_(),u_),text:x.some(u_),icon:x.none(),isSelectedFor:s,getCurrentValue:x.none,getPreviewFor:a,onAction:JE(t),updateText:i,dataset:u,shouldHide:!1,isInvalid:m=>!t.formatter.canApply(m.format)}},NW=(t,s)=>M0(t,s,dB(t),l_,"BlocksTextUpdate","blocks"),BW=(t,s)=>{const a=Uh(s,dB(t));t.ui.registry.addNestedMenuItem("blocks",{text:i_,onSetup:Ar(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},PW="Fonts",mB=Y("Font {0}"),d_="System Font",IW=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],fB=t=>{const s=t.split(/\s*,\s*/);return Ce(s,a=>a.replace(/^['"]+|['"]+$/g,""))},gB=(t,s)=>s.length>0&&Vc(s,a=>t.indexOf(a.toLowerCase())>-1),FW=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=fB(t.toLowerCase());return gB(a,IW)||gB(a,s)}else return!1},hB=t=>{const s=()=>{const b=I=>I?fB(I)[0]:"",C=t.queryCommandValue("FontName"),S=p.data,_=C?C.toLowerCase():"",A=B4(t);return{matchOpt:St(S,I=>{const H=I.format;return H.toLowerCase()===_||b(H).toLowerCase()===b(_).toLowerCase()}).orThunk(()=>gr(FW(_,A),{title:d_,format:_})),font:C}},a=b=>C=>C.exists(S=>S.format===b),i=()=>{const{matchOpt:b}=s();return b},u=b=>()=>x.some({tag:"div",styles:b.indexOf("dings")===-1?{"font-family":b}:{}}),m=b=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,b.format)})},f=b=>{const{matchOpt:C,font:S}=s(),_=C.fold(Y(S),A=>A.title);rt(b,Pc,{text:_}),UM(t,{value:_})},p=r_(t,"font_family_formats",Zh.SemiColon);return{tooltip:zh(t,mB(),d_),text:x.some(d_),icon:x.none(),isSelectedFor:a,getCurrentValue:i,getPreviewFor:u,onAction:m,updateText:f,dataset:p,shouldHide:!1,isInvalid:pn}},$W=(t,s)=>M0(t,s,hB(t),mB,"FontFamilyTextUpdate","fontfamily"),LW=(t,s)=>{const a=Uh(s,hB(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(PW),onSetup:Ar(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})};var R0=tinymce.util.Tools.resolve("tinymce.util.VK");const HW=(t,s,a,i)=>{let u=x.none();const m=G=>G.map(ne=>Fe.getValue(ne)).getOr(""),f=Af(t,"NodeChange SwitchMode DisabledStateChange",G=>{const ne=G.getComponent();u=x.some(ne),a.updateInputValue(ne),Xe.set(ne,!t.selection.isEditable()||O4(t))}),p=G=>({getComponent:Y(G)}),b=tt(ee),C=Ie("custom-number-input-events"),S=(G,ne,ce)=>{const Pe=m(u),ye=a.getNewValue(Pe,G),ie=Pe.length-`${ye}`.length,$e=u.map(Je=>Je.element.dom.selectionStart-ie),lt=u.map(Je=>Je.element.dom.selectionEnd-ie);a.onAction(ye,ce),u.each(Je=>{Fe.setValue(Je,ye),ne&&($e.each(zt=>Je.element.dom.selectionStart=zt),lt.each(zt=>Je.element.dom.selectionEnd=zt))})},_=(G,ne)=>S((ce,Pe)=>ce-Pe,G,ne),A=(G,ne)=>S((ce,Pe)=>ce+Pe,G,ne),N=G=>Gt(G.element).fold(x.none,ne=>(Do(ne),x.some(!0))),I=G=>yl(G.element)?(id(G.element).each(ne=>Do(ne)),x.some(!0)):x.none(),H=(G,ne,ce,Pe)=>{const ye=tt(ee),ie=s.shared.providers.translate(ce),$e=Ie("altExecuting"),lt=Af(t,"NodeChange SwitchMode DisabledStateChange",zt=>{Xe.set(zt.getComponent(),!t.selection.isEditable()||O4(t))}),Je=zt=>{Xe.isDisabled(zt)||G(!0)};return ws.sketch({dom:{tag:"button",attributes:{"aria-label":ie,"data-mce-name":ne},classes:Pe.concat(ne)},components:[$y(ne,s.shared.providers.icons)],buttonBehaviours:Se([Xe.config({}),Gn.config(s.shared.providers.tooltips.getConfig({tooltipText:ie})),yt($e,[_i({onSetup:lt,getApi:p},ye),Rc({getApi:p},ye),me(Ui(),(zt,pt)=>{(pt.event.raw.keyCode===R0.SPACEBAR||pt.event.raw.keyCode===R0.ENTER)&&(Xe.isDisabled(zt)||G(!1))}),me(bd(),Je),me(zi(),Je)])]),eventOrder:{[Ui()]:[$e,"keying"],[bd()]:[$e,"alloy.base.behaviour"],[zi()]:[$e,"alloy.base.behaviour"],[fc()]:["alloy.base.behaviour",$e,"tooltipping"],[Ol()]:[$e,"tooltipping"]}})},Z=mn(H(G=>_(!1,G),"minus","Decrease font size",[])),L=mn(H(G=>A(!1,G),"plus","Increase font size",[])),j=mn({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[zl.sketch({inputBehaviours:Se([Xe.config({}),yt(C,[_i({onSetup:f,getApi:p},b),Rc({getApi:p},b)]),yt("input-update-display-text",[me(Pc,(G,ne)=>{Fe.setValue(G,ne.event.text)}),me(uT(),G=>{a.onAction(Fe.getValue(G))}),me(km(),G=>{a.onAction(Fe.getValue(G))})]),Ke.config({mode:"special",onEnter:G=>(S(Lt,!0,!0),x.some(!0)),onEscape:N,onUp:G=>(A(!0,!1),x.some(!0)),onDown:G=>(_(!0,!1),x.some(!0)),onLeft:(G,ne)=>(ne.cut(),x.none()),onRight:(G,ne)=>(ne.cut(),x.none())})])})],behaviours:Se([ft.config({}),Ke.config({mode:"special",onEnter:I,onSpace:I,onEscape:N}),yt("input-wrapper-events",[me(ui(),G=>{ze([Z,L],ne=>{const ce=Ne.fromDom(ne.get(G).element.dom);yl(ce)&&lc(ce)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...Qn(i)?{"data-mce-name":i}:{}}},components:[Z.asSpec(),j.asSpec(),L.asSpec()],behaviours:Se([ft.config({}),Ke.config({mode:"flow",focusInside:yd.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:G=>yl(G.element)?x.none():(Do(G.element),x.some(!0))})])}},VW="Font sizes",pB=Y("Font size {0}"),bB="12pt",zW={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},UW={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},ZW=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},WW=(t,s)=>/[0-9.]+px$/.test(t)?ZW(parseInt(t,10)*72/96,s||0)+"pt":Le(UW,t).getOr(t),vB=t=>Le(zW,t).getOr(""),m_=t=>{const s=()=>{let b=x.none();const C=p.data,S=t.queryCommandValue("FontSize");if(S)for(let _=3;b.isNone()&&_>=0;_--){const A=WW(S,_),N=vB(A);b=St(C,I=>I.format===S||I.format===A||I.format===N)}return{matchOpt:b,size:S}},a=b=>C=>C.exists(S=>S.format===b),i=()=>{const{matchOpt:b}=s();return b},u=Y(x.none),m=b=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,b.format)})},f=b=>{const{matchOpt:C,size:S}=s(),_=C.fold(Y(S),A=>A.title);rt(b,Pc,{text:_}),NG(t,{value:_})},p=r_(t,"font_size_formats",Zh.Space);return{tooltip:zh(t,pB(),bB),text:x.some(bB),icon:x.none(),isSelectedFor:a,getPreviewFor:u,getCurrentValue:i,onAction:m,updateText:f,dataset:p,shouldHide:!1,isInvalid:pn}},jW=(t,s)=>M0(t,s,m_(t),pB,"FontSizeTextUpdate","fontsize"),f_=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},N0=16,g_=t=>t>=0,hC=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:i=>rt(i,Pc,{text:s()}),onAction:(i,u)=>t.execCommand("FontSize",!1,i,{skip_focus:!u}),getNewValue:(i,u)=>{wb(i,["unsupportedLength","empty"]);const m=s(),f=wb(i,["unsupportedLength","empty"]).or(wb(m,["unsupportedLength","empty"])),p=f.map(A=>A.value).getOr(N0),b=TD(t),C=f.map(A=>A.unit).filter(A=>A!=="").getOr(b),S=u(p,f_(C).step),_=`${g_(S)?S:p}${C}`;return _!==m&&BG(t,{value:_}),_}}},$f=(t,s)=>HW(t,s,hC(t),"fontsizeinput"),pC=(t,s)=>{const a=Uh(s,m_(t));t.ui.registry.addNestedMenuItem("fontsize",{text:VW,onSetup:Ar(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},GW="Formats",h_=t=>Gc(t)?"Formats":"Format {0}",p_=(t,s)=>{const a="Formats",i=f=>()=>t.formatter.match(f),u=f=>()=>{const p=t.formatter.get(f);return p!==void 0?x.some({tag:p.length>0&&(p[0].inline||p[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(f))}):x.none()},m=f=>{const p=_=>Gy(_)?de(_.items,p):uN(_)?[{title:_.title,format:_.format}]:[],b=de(hN(t),p),S=uB(t,Y(b)).fold(Y({title:a,tooltipLabel:""}),_=>({title:_.title,tooltipLabel:_.title}));rt(f,Pc,{text:S.title}),VM(t,{value:S.tooltipLabel})};return{tooltip:zh(t,h_(""),""),text:x.some(a),icon:x.none(),isSelectedFor:i,getCurrentValue:x.none,getPreviewFor:u,onAction:JE(t),updateText:m,shouldHide:CD(t),isInvalid:f=>!t.formatter.canApply(f.format),dataset:s}},yB=(t,s)=>{const a={type:"advanced",...s.styles};return M0(t,s,p_(t,a),h_,"StylesTextUpdate","styles")},qW=(t,s)=>{const a={type:"advanced",...s.styles},i=Uh(s,p_(t,a));t.ui.registry.addNestedMenuItem("styles",{text:GW,onSetup:Ar(t,()=>i.getStyleItems().length>0),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},KW=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],B0=(t,s)=>(a,i,u,m)=>{const f=t(a).mapError(p=>_m(p)).getOrDie();return s(f,i,u,m)},CB={button:B0(OE,(t,s,a,i)=>yW(t,s.shared.providers,i)),togglebutton:B0(sM,(t,s,a,i)=>CW(t,s.shared.providers,i)),menubutton:B0(Z6,(t,s,a,i)=>$h(t,"tox-tbtn",s,x.none(),!1,i)),splitbutton:B0(wV,(t,s,a,i)=>SW(t,s.shared,i)),grouptoolbarbutton:B0(SV,(t,s,a,i)=>{const u=a.ui.registry.getAll().buttons,m=p=>vC(a,{buttons:u,toolbar:p,allowToolbarGroups:!1},s,x.none()),f={[lv]:s.shared.header.isPositionedAtTop()?Tu.TopToBottom:Tu.BottomToTop};switch(dh(a)){case Tc.floating:return O0(t,s,m,f,i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},xB=(t,s,a,i)=>Le(CB,t.type).fold(()=>(console.error("skipping button defined by",t),x.none()),u=>x.some(u(t,s,a,i))),bC={styles:yB,fontsize:jW,fontsizeinput:$f,fontfamily:$W,blocks:NW,align:MW,navigateback:TW},YW=t=>{const s=Ce(KW,a=>{const i=Pn(a.items,u=>Qt(t,u)||Qt(bC,u));return{name:a.name,items:i}});return Pn(s,a=>a.items.length>0)},XW=t=>{const s=t.split("|");return Ce(s,a=>({items:a.trim().split(" ")}))},JW=t=>xt(t,s=>(Qt(s,"name")||Qt(s,"label"))&&Qt(s,"items")),QW=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?YW(a):hn(s)?XW(s):JW(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},Wh=(t,s,a,i,u,m)=>Le(s,a.toLowerCase()).orThunk(()=>m.bind(f=>Xt(f,p=>Le(s,p+a.toLowerCase())))).fold(()=>Le(bC,a.toLowerCase()).map(f=>f(t,u)),f=>f.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),x.none()):xB(f,u,t,a.toLowerCase())),vC=(t,s,a,i)=>{const u=QW(s),m=Ce(u,f=>{const p=de(f.items,b=>b.trim().length===0?[]:Wh(t,s.buttons,b,s.allowToolbarGroups,a,i).toArray());return{title:x.from(t.translate(f.name)),label:gr(f.label!==void 0,t.translate(f.label)),items:p}});return Pn(m,f=>f.items.length>0)},SB=(t,s,a,i)=>{const u=s.mainUi.outerContainer,m=a.toolbar,f=a.buttons;if(xt(m,hn)){const p=m.map(b=>{const C={toolbar:b,buttons:f,allowToolbarGroups:a.allowToolbarGroups};return vC(t,C,i,x.none())});Bn.setToolbars(u,p)}else Bn.setToolbar(u,vC(t,a,i,x.none()))},wB=Br(),ej=wB.os.isiOS()&&wB.os.version.major<=12,EB=(t,s)=>{const{uiMotherships:a}=s,i=t.dom;let u=t.getWin();const m=t.getDoc().documentElement,f=tt(po(u.innerWidth,u.innerHeight)),p=tt(po(m.offsetWidth,m.offsetHeight)),b=()=>{const A=f.get();(A.left!==u.innerWidth||A.top!==u.innerHeight)&&(f.set(po(u.innerWidth,u.innerHeight)),g0(t))},C=()=>{const A=t.getDoc().documentElement,N=p.get();(N.left!==A.offsetWidth||N.top!==A.offsetHeight)&&(p.set(po(A.offsetWidth,A.offsetHeight)),g0(t))},S=A=>{XV(t,A)};i.bind(u,"resize",b),i.bind(u,"scroll",S);const _=hm(Ne.fromDom(t.getBody()),"load",C);t.on("hide",()=>{ze(a,A=>{_t(A.element,"display","none")})}),t.on("show",()=>{ze(a,A=>{Me(A.element,"display")})}),t.on("NodeChange",C),t.on("remove",()=>{_.unbind(),i.unbind(u,"resize",b),i.unbind(u,"scroll",S),u=null})},tj=(t,s,a)=>{Vd(t)&&wa(a.mainUi.mothership.element,a.popupUi.mothership),Ws(s,a.dialogUi.mothership)};var nj=Object.freeze({__proto__:null,render:(t,s,a,i,u)=>{const{mainUi:m,uiMotherships:f}=s,p=tt(0),b=m.outerContainer;pW(t);const C=Ne.fromDom(u.targetNode),S=uu(rs(C));wa(C,m.mothership),tj(t,S,s),t.on("PostRender",()=>{Bn.setSidebar(b,a.sidebar,j2(t))}),t.on("SkinLoaded",()=>{SB(t,s,a,i),p.set(t.getWin().innerWidth),Bn.setMenubar(b,JN(t,a)),Bn.setViews(b,a.views),EB(t,s)});const _=Bn.getSocket(b).getOrDie("Could not find expected socket element");if(ej){Fa(_.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const H=ga(()=>{t.dispatch("ScrollContent")},20),Z=ys(_.element,"scroll",H.throttle);t.on("remove",Z.unbind)}kM(t,s),t.addCommand("ToggleSidebar",(H,Z)=>{Bn.toggleSidebar(b,Z),tz(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var H;return(H=Bn.whichSidebar(b))!==null&&H!==void 0?H:""}),t.addCommand("ToggleView",(H,Z)=>{if(Bn.toggleView(b,Z)){const L=b.element;m.mothership.broadcastOn([Ll()],{target:L}),ze(f,j=>{j.broadcastOn([Ll()],{target:L})}),ia(Bn.whichView(b))&&(t.focus(),t.nodeChanged(),Bn.refreshToolbar(b)),ZM(t)}}),t.addQueryValueHandler("ToggleView",()=>{var H;return(H=Bn.whichView(b))!==null&&H!==void 0?H:""});const A=dh(t),N=()=>{Bn.refreshToolbar(s.mainUi.outerContainer)};(A===Tc.sliding||A===Tc.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const H=t.getWin().innerWidth;H!==p.get()&&(N(),p.set(H))});const I={setEnabled:H=>{Th(s,H?"setEnabled":"setDisabled")},isEnabled:()=>!Xe.isDisabled(b)};return{iframeContainer:_.element.dom,editorContainer:b.element.dom,api:I}}});const b_=t=>/^[0-9\.]+(|px)$/i.test(""+t)?x.some(parseInt(""+t,10)):x.none(),P0=t=>la(t)?t+"px":t,yC=(t,s,a)=>{const i=s.filter(m=>t<m),u=a.filter(m=>t>m);return i.or(u).getOr(t)},_B=(t,s)=>{if(typeof s=="number")return x.from(s);const a=/^([0-9.]+)(pt|em|px)$/.exec(s.trim());if(a){const i=a[2],u=Number.parseFloat(a[1]);if(Number.isNaN(u)||u<0)return x.none();if(i==="em")return x.from(u*Number.parseFloat(window.getComputedStyle(t.dom).fontSize));if(i==="pt")return x.from(u*(72/96));if(i==="px")return x.from(u)}return x.none()},oj=t=>{const s=_B(Ne.fromDom(t.targetElm),uh(t)),a=Z2(t),i=D4(t);return s.map(u=>yC(u,a,i))},sj=t=>oj(t).getOr(uh(t)),v_=t=>{const s=$d(t),a=U2(t),i=W2(t);return b_(s).map(u=>yC(u,a,i))},rj=t=>v_(t).getOr($d(t)),{ToolbarLocation:Gu,ToolbarMode:y_}=H4,aj=40,CC=(t,s,a,i,u)=>{const{mainUi:m,uiMotherships:f}=a,p=j1.DOM,b=hh(t),C=ph(t),S=W2(t).or(v_(t)),_=i.shared.header,A=_.isPositionedAtTop,N=150,I=dh(t),H=I===y_.sliding||I===y_.floating,Z=tt(!1),L=()=>Z.get()&&!t.removed,j=Ge=>H?Ge.fold(Y(0),pe=>pe.components().length>1?jt(pe.components()[1].element):0):0,G=Ge=>{switch(M4(t)){case Gu.auto:const pe=Bn.getToolbar(m.outerContainer),Ae=j(pe),dt=jt(Ge.element)-Ae,At=Ms(s);if(At.y>dt)return"top";{const Tt=ha(s),kn=Math.max(Tt.dom.scrollHeight,jt(Tt));return At.bottom<kn-dt||or().bottom<At.bottom-dt?"bottom":"top"}case Gu.bottom:return"bottom";case Gu.top:default:return"top"}},ne=Ge=>{u.on(pe=>{jn.setModes(pe,[Ge]),_.setDockingMode(Ge);const Ae=A()?Tu.TopToBottom:Tu.BottomToTop;vt(pe.element,lv,Ae)})},ce=()=>{u.on(Ge=>{const pe=S.getOrThunk(()=>_b().width-yp(s).left-10);_t(Ge.element,"max-width",pe+"px")})},Pe=(Ge,pe)=>{u.on(Ae=>{const dt=Bn.getToolbar(m.outerContainer),At=j(dt),st=Ms(s),Tt=ye(t,m.outerContainer.element),kn=()=>Tt.fold(()=>st.x,js=>{const Qa=Ms(js);return xn(js,Cr())?st.x:st.x-Qa.x}),Sn=()=>Tt.fold(()=>A()?Math.max(st.y-jt(Ae.element)+At,0):st.bottom,js=>{var Qa;const ec=Ms(js),Oi=(Qa=js.dom.scrollTop)!==null&&Qa!==void 0?Qa:0,Yl=xn(js,Cr())?Math.max(st.y-jt(Ae.element)+At,0):st.y-ec.y+Oi-jt(Ae.element)+At;return A()?Yl:st.bottom}),sa=kn(),no=gr(Ge,Math.ceil(m.outerContainer.element.dom.getBoundingClientRect().width)).filter(js=>js>N).map(js=>{const Qa=pe.getOr(nr()),ec=window.innerWidth-(sa-Qa.left),Oi=Math.max(Math.min(js,ec),N);return ec<js&&_t(m.outerContainer.element,"width",Oi+"px"),{width:Oi+"px"}}).getOr({width:"max-content"}),Ja={position:"absolute",left:Math.round(sa)+"px",top:Sn()+"px"};Fa(m.outerContainer.element,{...Ja,...no})})},ye=(Ge,pe)=>Vd(Ge)?yg(pe):x.none(),ie=()=>{ze(f,Ge=>{Ge.broadcastOn([Bd()],{})})},$e=()=>!b&&(ei(m.outerContainer.element).left+fg(m.outerContainer.element)>=window.innerWidth-aj||$(m.outerContainer.element,"width").isSome())?(_t(m.outerContainer.element,"position","absolute"),_t(m.outerContainer.element,"left","0px"),Me(m.outerContainer.element,"width"),!0):!1,lt=Ge=>{if(!L())return;b||ce();const pe=nr(),Ae=b?!1:$e();if(H&&Bn.refreshToolbar(m.outerContainer),!b){const dt=nr(),At=gr(pe.left!==dt.left,pe);Pe(Ae,At),At.each(st=>{ZC(st.left,dt.top)})}C&&u.on(Ge),ie()},Je=()=>b||!C||!L()?!1:u.get().exists(Ge=>{const pe=_.getDockingMode(),Ae=G(Ge);return Ae!==pe?(ne(Ae),!0):!1});return{isVisible:L,isPositionedAtTop:A,show:()=>{Z.set(!0),_t(m.outerContainer.element,"display","flex"),p.addClass(t.getBody(),"mce-edit-focus"),ze(f,Ge=>{Me(Ge.element,"display")}),Je(),Vd(t)?lt(Ge=>jn.isDocked(Ge)?jn.reset(Ge):jn.refresh(Ge)):lt(jn.refresh)},hide:()=>{Z.set(!1),_t(m.outerContainer.element,"display","none"),p.removeClass(t.getBody(),"mce-edit-focus"),ze(f,Ge=>{_t(Ge.element,"display","none")})},update:lt,updateMode:()=>{Je()&&lt(jn.reset)},repositionPopups:ie}},Lf=(t,s)=>{const a=Ms(t);return{pos:s?a.y:a.bottom,bounds:a}},xC=(t,s,a,i)=>{const u=tt(Lf(s,a.isPositionedAtTop())),m=C=>{const{pos:S,bounds:_}=Lf(s,a.isPositionedAtTop()),{pos:A,bounds:N}=u.get(),I=_.height!==N.height||_.width!==N.width;u.set({pos:S,bounds:_}),I&&g0(t,C),a.isVisible()&&(A!==S?a.update(jn.reset):I&&(a.updateMode(),a.repositionPopups()))};i||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(jn.reset)),t.on("NodeChange keydown",C=>{requestAnimationFrame(()=>m(C))});let f=0;const p=ru(()=>a.update(jn.refresh),33);t.on("ScrollWindow",()=>{const C=nr().left;C!==f&&(f=C,p.throttle()),a.updateMode()}),Vd(t)&&t.on("ElementScroll",C=>{a.update(jn.refresh)});const b=Ii();b.set(hm(Ne.fromDom(t.getBody()),"load",C=>m(C.raw))),t.on("remove",()=>{b.clear()})};var SC=Object.freeze({__proto__:null,render:(t,s,a,i,u)=>{const{mainUi:m}=s,f=tn(),p=Ne.fromDom(u.targetNode),b=CC(t,p,s,i,f),C=gf(t);bW(t);const S=()=>{if(f.isSet()){b.show();return}f.set(Bn.getHeader(m.outerContainer).getOrDie());const A=$4(t);Vd(t)?(wa(p,m.mothership),wa(p,s.popupUi.mothership)):Ws(A,m.mothership),Ws(A,s.dialogUi.mothership);const N=()=>{SB(t,s,a,i),Bn.setMenubar(m.outerContainer,JN(t,a)),b.show(),xC(t,p,b,C),t.nodeChanged()};C?t.once("SkinLoaded",N):N()};t.on("show",S),t.on("hide",b.hide),C||(t.on("focus",S),t.on("blur",b.hide)),t.on("init",()=>{(t.hasFocus()||C)&&S()}),kM(t,s);const _={show:S,hide:b.hide,setEnabled:A=>{Th(s,A?"setEnabled":"setDisabled")},isEnabled:()=>!Xe.isDisabled(m.outerContainer)};return{editorContainer:m.outerContainer.element.dom,api:_}}});const na=()=>{const t=tn(),s=tn(),a=tn();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const m=t.get().map(p=>p.mothership),f=s.get().map(p=>p.mothership);return m.fold(()=>f.toArray(),p=>f.fold(()=>[p],b=>xn(p.element,b.element)?[p]:[p,b]))},lazyGetInOuterOrDie:(m,f)=>()=>a.get().bind(p=>f(p.outerContainer)).getOrDie(`Could not find ${m} element in OuterContainer`)}},wC="contexttoolbar-show",C_="contexttoolbar-hide",Hf=(t,s,a)=>({setInputEnabled:i=>{!i&&a&&Do(a),Xe.set(t,!i)},isInputEnabled:()=>!Xe.isDisabled(t),hide:()=>{qt(t,Lb())},back:()=>{qt(t,fC)},getValue:()=>s.get().getOrThunk(()=>Fe.getValue(t)),setValue:i=>{t.getSystem().isConnected()?Fe.setValue(t,i):s.set(i)}}),TB=(t,s,a)=>me(C3,(i,u)=>{const m=t.get(i),f=Hf(m,a,i.element);s.onAction(f,u.event.buttonApi)}),ij=(t,s,a,i)=>{const{primary:u,...m}=s.original,f=mc(OE({...m,type:"button",onAction:ee}));return D0(f,a,[TB(t,s,i)])},Kd=(t,s,a,i)=>{const{primary:u,...m}=s.original,f=mc(sM({...m,type:"togglebutton",onAction:ee}));return rB(f,a,[TB(t,s,i)])},GG=t=>t.type==="contextformtogglebutton",lj=(t,s,a,i)=>GG(s)?Kd(t,s,a,i):ij(t,s,a,i),x_=(t,s,a,i)=>{const u=Ce(s,p=>mn(lj(t,p,a,i)));return{asSpecs:()=>Ce(u,p=>p.asSpec()),findPrimary:p=>Xt(s,(b,C)=>b.primary?x.from(u[C]).bind(S=>S.getOpt(p)).filter(_e(Xe.isDisabled)):x.none())}},jh=(t,s,a,i)=>{const{width:u,height:m}=t.initValue();let f=Fh;const p=Ie("ratio-event"),b=ye=>Hf(ye,i),C=ye=>Qr(ye,{tag:"span",classes:["tox-icon","tox-lock-icon__"+ye]},s.icons),S=()=>!1,_=t.label.getOr("Constrain proportions"),A=s.translate(_),N=Rt.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-lock-context-form-size-input","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":A,"data-mce-name":_}},components:[C("lock"),C("unlock")],buttonBehaviours:Se([Xe.config({disabled:S}),Rn.config({}),Gn.config(s.tooltips.getConfig({tooltipText:A}))])}),I=ye=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:ye}),H=ye=>ti(ye.element,"div.tox-focusable-wrapper").fold(x.none,$e=>(Do($e),x.some(!0))),Z=ye=>Vt.parts.field({factory:zl,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:ye?u:m,inputBehaviours:Se([Xe.config({disabled:S}),Rn.config({}),yt("size-input-toolbar-events",[me(sr(),(ie,$e)=>{rt(ie,p,{isField1:ye})})]),Ke.config({mode:"special",onEnter:a,onEscape:H})]),selectOnFocus:!1}),L=ye=>({dom:{tag:"label",classes:["tox-label"]},components:[Hn(s.translate(ye))]}),j=ye=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[ye],behaviours:Se([Rn.config({}),ft.config({}),Ke.config({mode:"special",onEnter:ie=>Dn(ie.element,"input").fold(x.none,lt=>(Do(lt),x.some(!0)))})])}),G=j(Rt.parts.field1(I([Vt.parts.label(L("Width:")),Z(!0)]))),ne=j(Rt.parts.field2(I([Vt.parts.label(L("Height:")),Z(!1)]))),ce=tt(ee),Pe=[_i({onBeforeSetup:ye=>Dn(ye.element,"input").each(Do),onSetup:t.onSetup,getApi:b},ce),by({getApi:b},ce,i)];return Rt.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[G,I([N]),ne],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(ye,ie,$e)=>{Vy(Fe.getValue(ye)).each(lt=>{f(lt).each(Je=>{Fe.setValue(ie,ZR(Je))})})},onInput:ye=>qt(ye,yR),coupledFieldBehaviours:Se([ft.config({}),Ke.config({mode:"flow",focusInside:yd.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),Xe.config({disabled:S,onDisabled:ye=>{Rt.getField1(ye).bind(Vt.getField).each(Xe.disable),Rt.getField2(ye).bind(Vt.getField).each(Xe.disable),Rt.getLock(ye).each(Xe.disable)},onEnabled:ye=>{Rt.getField1(ye).bind(Vt.getField).each(Xe.enable),Rt.getField2(ye).bind(Vt.getField).each(Xe.enable),Rt.getLock(ye).each(Xe.enable)}}),_o(()=>s.checkUiComponentContext("mode:design")),yt("size-input-toolbar-events2",[me(p,(ye,ie)=>{const $e=ie.event.isField1,lt=$e?Rt.getField1(ye):Rt.getField2(ye),Je=$e?Rt.getField2(ye):Rt.getField1(ye),zt=lt.map(Fe.getValue).getOr(""),pt=Je.map(Fe.getValue).getOr("");f=WR(zt,pt)}),me(yR,ye=>t.onInput(b(ye))),...Pe])])})},I0=(t,s,a)=>Vt.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...t.toArray(),s],fieldBehaviours:Se([Xe.config({disabled:()=>a.checkUiComponentContext("mode:design").shouldDisable,onDisabled:i=>{EW(i),Vt.getField(i).each(Xe.disable)},onEnabled:i=>{Vt.getField(i).each(Xe.enable)}})])}),kB=(t,s,a,i)=>{const u=tt(ee),m=b=>Hf(b,i),f=t.label.map(b=>Vt.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Hn(s.translate(b))]})),p=Vt.parts.field({factory:zl,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(t.min()),max:String(t.max())},data:t.initValue().toString(),fromInputValue:b=>su(b).getOr(t.min()),toInputValue:b=>String(b),inputBehaviours:Se([Xe.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),_o(()=>s.checkUiComponentContext("mode:design")),Ke.config({mode:"special",onEnter:a,onLeft:(b,C)=>(C.cut(),x.none()),onRight:(b,C)=>(C.cut(),x.none())}),yt("slider-events",[_i({onSetup:t.onSetup,getApi:m,onBeforeSetup:Ke.focusIn},u),by({getApi:m},u,i),me(pu(),b=>{t.onInput(m(b))})])])});return I0(f,p,s)},uj=(t,s,a,i)=>{const u=tt(ee),m=S=>Hf(S,i),f=t.label.map(S=>Vt.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Hn(s.translate(S))]})),b={...t.placeholder.map(S=>({placeholder:s.translate(S)})).getOr({})},C=Vt.parts.field({factory:zl,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:b,data:t.initValue(),selectOnFocus:!0,inputBehaviours:Se([Xe.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),_o(()=>s.checkUiComponentContext("mode:design")),Ke.config({mode:"special",onEnter:a,onLeft:(S,_)=>(_.cut(),x.none()),onRight:(S,_)=>(_.cut(),x.none())}),yt("input-events",[_i({onSetup:t.onSetup,getApi:S=>ti(S.element,".tox-toolbar").bind(A=>Dn(A,"button:enabled")).fold(()=>Hf(S,i),A=>Hf(S,i,A)),onBeforeSetup:Ke.focusIn},u),by({getApi:m},u,i),me(pu(),S=>{t.onInput(m(S))})])])});return I0(f,C,s)},S_=(t,s,a)=>{const i=tn(),m=mn(t(a,C=>p.findPrimary(C).orThunk(()=>b.findPrimary(C)).map(S=>(Fm(S),!0)),i)),f=Ql(s.commands,C=>C.align==="start"),p=x_(m,f.pass,a,i),b=x_(m,f.fail,a,i);return Pn([{title:x.none(),label:x.none(),items:p.asSpecs()},{title:x.none(),label:x.none(),items:[m.asSpec()]},{title:x.none(),label:x.none(),items:b.asSpecs()}],C=>C.items.length>0)},AB=(t,s)=>{switch(t.type){case"contextform":return S_(vn(uj,t),t,s);case"contextsliderform":return S_(vn(kB,t),t,s);case"contextsizeinputform":return S_(vn(jh,t),t,s)}},Gh={renderContextForm:(t,s,a)=>iC({type:t,uid:Ie("context-toolbar"),initGroups:AB(s,a),onEscape:x.none,cyclicKeying:!0,providers:a}),buildInitGroups:AB},dj=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,mj=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=Pr(Ne.fromDom(t.startContainer),t.startOffset).element;return(iu(a)?br(a):x.some(a)).filter(Gr).map(u=>u.dom.getBoundingClientRect()).getOr(s)}else return s},w_=t=>{const s=t.selection.getRng(),a=mj(s);if(t.inline){const i=nr();return Ro(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=xm(Ne.fromDom(t.getBody()));return Ro(i.x+a.left,i.y+a.top,a.width,a.height)}},KG=(t,s)=>s.filter(a=>wo(a)&&ab(a)).map(xm).getOrThunk(()=>w_(t)),fj=(t,s,a)=>{const i=Math.max(t.x+a,s.x),u=Math.min(t.right-a,s.right);return{x:i,width:u-i}},gj=(t,s,a,i,u,m)=>{const f=Ne.fromDom(t.getContainer()),p=Dn(f,".tox-editor-header").getOr(f),b=Ms(p),C=b.y>=s.bottom,S=i&&!C;if(t.inline&&S)return{y:Math.max(b.bottom+m,a.y),bottom:a.bottom};if(t.inline&&!S)return{y:a.y,bottom:Math.min(b.y-m,a.bottom)};const _=u==="line"?Ms(f):s;return S?{y:Math.max(b.bottom+m,a.y),bottom:Math.min(_.bottom-m,a.bottom)}:{y:Math.max(_.y+m,a.y),bottom:Math.min(b.y-m,a.bottom)}},qh=(t,s,a,i=0)=>{const u=_b(window),m=Ms(Ne.fromDom(t.getContentAreaContainer())),f=Si(t)||X1(t)||gh(t),{x:p,width:b}=fj(m,u,i);if(t.inline&&!f)return Ro(p,u.y,b,u.height);{const C=s.header.isPositionedAtTop(),{y:S,bottom:_}=gj(t,m,u,C,a,i);return Ro(p,S,b,_-S)}},EC=12,OB={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},E_={maxHeightFunction:Im(),maxWidthFunction:iv()},hj=(t,s)=>{const a=t.selection.getRng(),i=Pr(Ne.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&xn(i.element,s)},YG=(t,s,a)=>{const i=$(t,"position");_t(t,"position",s);const u=a(t);return i.each(m=>_t(t,"position",m)),u},e=t=>t==="node",n=(t,s,a,i,u)=>{const m=w_(t),f=i.lastElement().exists(p=>xn(a,p));if(hj(t,a))return f?NT:hc;if(f)return YG(s,i.getMode(),()=>dj(m,Ms(s),-20)&&!i.isReposition()?oP:NT);{const p=i.getMode()==="fixed"?u.y+nr().top:u.y,b=jt(s)+EC;return p+b<=m.y?hc:Wp}},o=(t,s,a,i)=>{const u=b=>(C,S,_,A,N)=>{const I=n(t,A,b,a,N),H={...C,y:N.y,height:N.height};return{...I(H,S,_,A,N),alwaysFit:!0}},m=b=>e(i)?[u(b)]:[];return s?{onLtr:b=>[Io,Eo,Po,Rs,ls,Jo].concat(m(b)),onRtl:b=>[Io,Po,Eo,ls,Rs,Jo].concat(m(b))}:{onLtr:b=>[Jo,Io,Rs,Eo,ls,Po].concat(m(b)),onRtl:b=>[Jo,Io,ls,Po,Rs,Eo].concat(m(b))}},r=(t,s,a,i)=>s==="line"?{bubble:ar(EC,0,OB),layouts:{onLtr:()=>[tv],onRtl:()=>[Vp]},overrides:E_}:{bubble:ar(0,EC,OB,1/EC),layouts:o(t,a,i,s),overrides:E_},c=(t,s)=>{const a=Pn(s,m=>m.predicate(t.dom)),{pass:i,fail:u}=Ql(a,m=>m.type==="contexttoolbar");return{contextToolbars:i,contextForms:u}},l=t=>{if(t.length<=1)return t;{const s=m=>ks(t,f=>f.position===m),a=m=>Pn(t,f=>f.position===m),i=s("selection"),u=s("node");if(i||u)if(u&&i){const m=a("node"),f=Ce(a("selection"),p=>({...p,position:"node"}));return m.concat(f)}else return a(i?"selection":"node");else return a("line")}},d=t=>{if(t.length<=1)return t;{const s=i=>St(t,u=>u.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>Pn(t,u=>u.position===i))}},g=(t,s,a)=>{const i=c(t,s);if(i.contextForms.length>0)return x.some({elem:t,toolbars:[i.contextForms[0]]});{const u=c(t,a);if(u.contextForms.length>0)return x.some({elem:t,toolbars:[u.contextForms[0]]});if(i.contextToolbars.length>0||u.contextToolbars.length>0){const m=l(i.contextToolbars.concat(u.contextToolbars));return x.some({elem:t,toolbars:m})}else return x.none()}},h=(t,s,a)=>t(s)?x.none():z_(s,i=>{if(Gr(i)){const{contextToolbars:u,contextForms:m}=c(i,a.inNodeScope),f=m.length>0?m:d(u);return f.length>0?x.some({elem:i,toolbars:f}):x.none()}else return x.none()},t),y=(t,s)=>{const a=Ne.fromDom(s.getBody()),i=f=>xn(f,a),u=f=>!i(f)&&!im(a,f),m=Ne.fromDom(s.selection.getNode());return u(m)?x.none():g(m,t.inNodeScope,t.inEditorScope).orThunk(()=>h(i,m,t))},w=(t,s)=>{const a={},i=[],u=[],m={},f={},p=(S,_)=>{const A=mc(lM(_));a[S]=A,A.launch.map(N=>{m["form:"+S]={..._.launch,type:N.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(A)}}}),A.scope==="editor"?u.push(A):i.push(A),f[S]=A},b=(S,_)=>{uV(_).each(A=>{A.launch.isSome()&&(m["toolbar:"+S]={..._.launch,type:"button",onAction:()=>{s(A)}}),_.scope==="editor"?u.push(A):i.push(A),f[S]=A})},C=Yn(t);return ze(C,S=>{const _=t[S];_.type==="contextform"||_.type==="contextsliderform"||_.type==="contextsizeinputform"?p(S,_):_.type==="contexttoolbar"&&b(S,_)}),{forms:a,inNodeScope:i,inEditorScope:u,lookupTable:f,formNavigators:m}},T="tox-pop--transition",k=t=>t===R0.ENTER||t===R0.SPACEBAR,M=(t,s,a,i)=>{const u=i.backstage,m=u.shared,f=Br().deviceType.isTouch,p=tn(),b=tn(),C=tn(),S=_W({sink:a,onEscape:()=>(t.focus(),WM(t),x.some(!0)),onHide:()=>{WM(t)},onBack:()=>{nz(t)}}),_=cr(S.sketch),A=()=>{const pt=C.get().getOr("node"),kt=e(pt)?1:0;return qh(t,m,pt,kt)},N=()=>!t.removed&&!(f()&&u.isContextMenuOpen()),I=pt=>jr(fr(pt,p.get(),xn),!0),H=()=>{if(N()){const pt=A(),kt=jr(C.get(),"node")?KG(t,p.get()):w_(t);return pt.height<=0||!dj(kt,pt,.01)}else return!0},Z=()=>{p.clear(),b.clear(),C.clear(),qn.hide(_)},L=()=>{if(qn.isOpen(_)){const pt=_.element;Me(pt,"display"),H()?_t(pt,"display","none"):(b.set(0),qn.reposition(_))}},j=pt=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[pt],behaviours:Se([Ke.config({mode:"acyclic"}),yt("pop-dialog-wrap-events",[$n(kt=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>Ke.focusIn(kt))}),Wi(kt=>{t.shortcuts.remove("ctrl+F9")})])])}),G=pt=>{const kt=ye([pt]);rt(_,cB,{forwardContents:j(kt)})},ne=Js(()=>w(s,G)),ce=(pt,kt)=>vC(t,{buttons:pt,toolbar:kt.items,allowToolbarGroups:!1},i.backstage,x.some(["form:","toolbar:"])),Pe=(pt,kt)=>Gh.buildInitGroups(pt,kt),ye=pt=>{const{buttons:kt}=t.ui.registry.getAll(),Ge=ne(),pe={...kt,...Ge.formNavigators},Ae=dh(t)===Tc.scrolling?Tc.scrolling:Tc.default,dt=wt(Ce(pt,At=>At.type==="contexttoolbar"?ce(pe,lV(At)):Pe(At,m.providers)));return iC({type:Ae,uid:Ie("context-toolbar"),initGroups:dt,onEscape:x.none,cyclicKeying:!0,providers:m.providers})},ie=(pt,kt)=>{const Ge=pt==="node"?m.anchors.node(kt):m.anchors.cursor(),pe=r(t,pt,f(),{lastElement:p.get,isReposition:()=>jr(b.get(),0),getMode:()=>ir.getMode(a)});return _n(Ge,pe)},$e=(pt,kt)=>{if(zt.cancel(),!N())return;const Ge=ye(pt),pe=pt[0].position,Ae=ie(pe,kt);C.set(pe),b.set(1);const dt=_.element;Me(dt,"display"),I(kt)||(Un(dt,T),ir.reset(a,_)),qn.showWithinBounds(_,j(Ge),{anchor:Ae,transition:{classes:[T],mode:"placement"}},()=>x.some(A())),kt.fold(p.clear,p.set),H()&&_t(dt,"display","none")},lt=()=>{_t(_.element,"transition","none"),L(),Me(_.element,"transition")};let Je=!1;const zt=ru(()=>{if(!(!t.hasFocus()||t.removed||Je))if(Hs(_.element,T))zt.throttle();else{const pt=ne();y(pt,t).fold(Z,kt=>{$e(kt.toolbars,x.some(kt.elem))})}},17);t.on("init",()=>{t.on("remove",Z),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",L),t.on("click focus SetContent",zt.throttle),t.on("keyup",pt=>{(!k(pt.keyCode)||!S.inSubtoolbar())&&zt.throttle()}),t.on(C_,Z),t.on(wC,pt=>{const kt=ne();Le(kt.lookupTable,pt.toolbarKey).each(Ge=>{$e([Ge],gr(pt.target!==t,pt.target)),aB(_)})}),t.on("focusout",pt=>{z2.setEditorTimeout(t,()=>{$s(a.element).isNone()&&$s(_.element).isNone()&&!t.hasFocus()&&Z()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&Z()}),t.on("DisabledStateChange",pt=>{pt.state&&Z()}),t.on("ExecCommand",({command:pt})=>{pt.toLowerCase()==="toggleview"&&Z()}),t.on("AfterProgressState",pt=>{pt.state?Z():t.hasFocus()&&zt.throttle()}),t.on("dragstart",()=>{Je=!0}),t.on("dragend drop",()=>{Je=!1}),t.on("NodeChange",pt=>{S.inSubtoolbar()?lt():$s(_.element).fold(zt.throttle,ee)})})},P=t=>{ze([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:ta(t,a.cmd),onSetup:Mh(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Ar(t),onAction:ta(t,"JustifyNone")})},B=(t,s)=>{const a=()=>{const i=s.getOptions(t),u=s.getCurrent(t).map(s.hash),m=tn();return Ce(i,f=>({type:"togglemenuitem",text:s.display(f),onSetup:p=>{const b=S=>{S&&(m.on(_=>_.setActive(!1)),m.set(p)),p.setActive(S)};b(jr(u,s.hash(f)));const C=s.watcher(t,f,b);return()=>{m.clear(),C()}},onAction:()=>s.setCurrent(t,f)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},F=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:PD,hash:s=>h8(s,["fixed","relative","empty"]).getOr(s),display:Lt,watcher:(s,a,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:a}).unbind,getCurrent:s=>x.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:Ar(t),onMenuSetup:Ar(t)}),U=t=>x.from(xD(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:Y(a),hash:i=>Wr(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,u,m)=>{var f;return i.formatter.formatChanged("lang",m,!1,{value:u.code,customValue:(f=u.customCode)!==null&&f!==void 0?f:null}).unbind},getCurrent:i=>{const u=Ne.fromDom(i.selection.getNode());return wp(u,m=>x.some(m).filter(Gr).bind(f=>qo(f,"lang").map(b=>{const C=qo(f,"data-mce-lang").getOrUndefined();return{code:b,customCode:C,title:""}})))},setCurrent:(i,u)=>i.execCommand("Lang",!1,u),onToolbarSetup:i=>{const u=Ii();return i.setActive(t.formatter.match("lang",{},void 0,!0)),u.set(t.formatter.formatChanged("lang",i.setActive,!0)),h0(u.clear,Ar(t)(i))},onMenuSetup:Ar(t)})),q=t=>{B(t,F(t)),U(t).each(s=>B(t,s))},X=(t,s)=>{RW(t,s),LW(t,s),qW(t,s),BW(t,s),pC(t,s)},te=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",s=>t.mode.get()===s),t.ui.registry.addContext("any",it),t.ui.registry.addContext("formatting",s=>t.formatter.canApply(s)),t.ui.registry.addContext("insert",s=>t.schema.isValidChild(t.selection.getNode().tagName,s))},he=t=>Af(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),we=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:he(t),onAction:ta(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Ar(t),onAction:ta(t,"indent")})},Ue=t=>{we(t)},le=(t,s)=>a=>{a.setActive(s.get());const i=u=>{s.set(u.state),a.setActive(u.state)};return t.on("PastePlainTextToggle",i),h0(()=>t.off("PastePlainTextToggle",i),Ar(t)(a))},se=t=>{const s=tt(RD(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:le(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:le(t,s)})},ve=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},He=t=>{Ti.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Mh(t,s.name),onAction:ve(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,i=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:Mh(t,a),onAction:ve(t,a),shortcut:i})}},nt=t=>{Ti.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:ta(t,s.action),shortcut:s.shortcut,context:s.context})}),Ti.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Ar(t),onAction:ta(t,s.action)})})},It=t=>{Ti.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:ta(t,s.action),onSetup:Mh(t,s.name)})})},$t=t=>{He(t),nt(t),It(t)},fn=t=>{Ti.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:ta(t,s.action),context:s.context})}),Ti.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Ar(t),onAction:ta(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Ar(t),onAction:ve(t,"code")})},En=t=>{$t(t),fn(t)},so=(t,s)=>Af(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),ns=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:so(t,"hasUndo"),onAction:ta(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:so(t,"hasRedo"),onAction:ta(t,"redo")})},fs=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:so(t,"hasUndo"),onAction:ta(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:so(t,"hasRedo"),onAction:ta(t,"redo"),shortcut:"Meta+Y"})},Be=t=>{ns(t),fs(t)},et=t=>Af(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),ln=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:et(t),onAction:ta(t,"mceToggleVisualAid"),context:"any"})},gn=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:ta(t,"mceToggleVisualAid"),context:"any"})},fe=t=>{gn(t),ln(t)},Ee=(t,s)=>{P(t),En(t),X(t,s),Be(t),dz(t),fe(t),Ue(t),q(t),se(t),te(t)},Qe=t=>hn(t)?t.split(/[ ,]/):t,Ft=t=>s=>s.options.get(t),Wt=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:hn(a)||xt(a,hn)?{value:Qe(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},yn=Ft("contextmenu_never_use_native"),Fc=Ft("contextmenu_avoid_overlap"),Gl=t=>Or(t).length===0,Or=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:Pn(a,i=>Qt(s,i))},oa=(t,s)=>({type:"makeshift",x:t,y:s}),Xa=(t,s,a)=>oa(t.x+s,t.y+a),ur=t=>t.type==="longpress"||t.type.indexOf("touch")===0,zr=t=>{if(ur(t)){const s=t.touches[0];return oa(s.pageX,s.pageY)}else return oa(t.pageX,t.pageY)},$c=t=>{if(ur(t)){const s=t.touches[0];return oa(s.clientX,s.clientY)}else return oa(t.clientX,t.clientY)},Yd=(t,s)=>{const a=j1.DOM.getPos(t);return Xa(s,a.x,a.y)},at=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?zr(s):Yd(t.getContentAreaContainer(),$c(s)):en(t),en=t=>({type:"selection",root:Ne.fromDom(t.selection.getNode())}),Co=t=>({type:"node",node:x.some(Ne.fromDom(t.selection.getNode())),root:Ne.fromDom(t.getBody())}),Zo=(t,s,a)=>{switch(a){case"node":return Co(t);case"point":return at(t,s);case"selection":return en(t)}},gs=(t,s,a,i,u,m)=>{const f=a(),p=Zo(t,s,m);Pf(f,Dc.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:x.none()}).map(b=>{s.preventDefault(),qn.showMenuAt(u,{anchor:p},{menu:{markers:zu("normal")},data:b})})},Wo={onLtr:()=>[Io,Eo,Po,Rs,ls,Jo,hc,Wp,Zp,rv,Ng,Up],onRtl:()=>[Io,Po,Eo,ls,Rs,Jo,hc,Wp,Ng,Up,Zp,rv]},ro=12,ao={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},Ur=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],u=a.getRng();return W_(t.getWin(),Ep.domRange(u)).exists(f=>f.left<=i.clientX&&f.right>=i.clientX&&f.top<=i.clientY&&f.bottom>=i.clientY)}},ki=t=>{const s=t.selection.getRng(),a=()=>{z2.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),m()};t.once("touchend",a);const i=f=>{f.preventDefault(),f.stopImmediatePropagation()};t.on("mousedown",i,!0);const u=()=>m();t.once("longpresscancel",u);const m=()=>{t.off("touchend",a),t.off("longpresscancel",u),t.off("mousedown",i)}},ql=(t,s,a)=>{const i=Zo(t,s,a);return{bubble:ar(0,a==="point"?ro:0,ao),layouts:Wo,overrides:{maxWidthFunction:iv(),maxHeightFunction:Im()},...i}},nl=(t,s,a,i,u,m,f)=>{const p=ql(t,s,m);Pf(a,Dc.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:x.none()}).map(b=>{s.preventDefault();const C=f?Ir.HighlightMenuAndItem:Ir.HighlightNone;qn.showMenuWithinBounds(u,{anchor:p},{menu:{markers:zu("normal"),highlightOnOpen:C},data:b,type:"horizontal"},()=>x.some(qh(t,i.shared,m==="node"?"node":"selection"))),t.dispatch(C_)})},Kh=(t,s,a,i,u,m)=>{const f=Br(),p=f.os.isiOS(),b=f.os.isMacOS(),C=f.os.isAndroid(),S=f.deviceType.isTouch(),_=()=>!(C||p||b&&S),A=()=>{const N=a();nl(t,s,N,i,u,m,_())};if((b||p)&&m!=="node"){const N=()=>{ki(t),A()};Ur(t,s)?N():(t.once("selectionchange",N),t.once("touchend",()=>t.off("selectionchange",N)))}else A()},Vf=t=>hn(t)?t==="|":t.type==="separator",qu={type:"separator"},Lc=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(hn(t))return t;switch(t.type){case"separator":return qu;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return hn(i)?i:Ce(i,Lc)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Ot(a.onAction)}}},Ku=(t,s)=>{if(s.length===0)return t;const i=zc(t).filter(u=>!Vf(u)).fold(()=>[],u=>[qu]);return t.concat(i).concat(s).concat([qu])},F0=(t,s,a)=>{const i=Fo(s,(u,m)=>Le(t,m.toLowerCase()).map(f=>{const p=f.update(a);if(hn(p)&&jc(rm(p)))return Ku(u,p.split(" "));if(Ao(p)&&p.length>0){const b=Ce(p,Lc);return Ku(u,b)}else return u}).getOrThunk(()=>u.concat([m])),[]);return i.length>0&&Vf(i[i.length-1])&&i.pop(),i},Yh=(t,s)=>s.ctrlKey&&!yn(t),DB=t=>t.type==="longpress"||Qt(t,"touches"),Xh=(t,s)=>!DB(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),Jh=(t,s)=>Xh(t,s)?t.selection.getStart(!0):s.target,MB=(t,s)=>{const a=Fc(t),i=Xh(t,s)?"selection":"point";if(jc(a)){const u=Jh(t,s);return Sp(Ne.fromDom(u),a)?"node":i}else return i},Qh=(t,s,a)=>{const u=Br().deviceType.isTouch,m=cr(qn.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Se([yt("dismissContextMenu",[me(bu(),(b,C)=>{on.close(b),t.focus()})])])})),f=()=>qn.hide(m),p=b=>{if(yn(t)&&b.preventDefault(),Yh(t,b)||Gl(t))return;const C=MB(t,b),S=()=>{const A=Jh(t,b),N=t.ui.registry.getAll(),I=Or(t);return F0(N.contextMenus,I,A)};(u()?Kh:gs)(t,b,S,a,m,C)};t.on("init",()=>{const b="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(u()?"":" ResizeWindow");t.on(b,f),t.on("longpress contextmenu",p)})},Kl=40,zf=Kl/2,Q=(t,s,a,i,u,m)=>t.fold(()=>Ym.snap({sensor:Wa(a-zf,i-zf),range:po(u,m),output:Wa(x.some(a),x.some(i)),extra:{td:s}}),f=>{const p=a-zf,b=i-zf,C=Kl,S=Kl,_=f.element.dom.getBoundingClientRect();return Ym.snap({sensor:Wa(p,b),range:po(C,S),output:Wa(x.some(a-_.width/2),x.some(i-_.height/2)),extra:{td:s}})}),oe=(t,s,a)=>{const i=(u,m)=>u.exists(f=>xn(f,m));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(u,m)=>{const f=m.td;i(s.get(),f)||(s.set(f),a(f))},mustSnap:!0}},Re=t=>mn(ws.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Se([Ym.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),sf.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),Te=(t,s)=>{const a=tt([]),i=tt([]),u=tt(!1),m=tn(),f=tn(),p=ye=>{const ie=xm(ye);return Q(N.getOpt(s),ye,ie.x,ie.y,ie.width,ie.height)},b=()=>Ce(a.get(),ye=>p(ye)),C=ye=>{const ie=xm(ye);return Q(I.getOpt(s),ye,ie.right,ie.bottom,ie.width,ie.height)},S=()=>Ce(i.get(),ye=>C(ye)),_=oe(b,m,ye=>{f.get().each(ie=>{t.dispatch("TableSelectorChange",{start:ye,finish:ie})})}),A=oe(S,f,ye=>{m.get().each(ie=>{t.dispatch("TableSelectorChange",{start:ie,finish:ye})})}),N=Re(_),I=Re(A),H=cr(N.asSpec()),Z=cr(I.asSpec()),L=(ye,ie,$e,lt)=>{const Je=ie.dom.getBoundingClientRect();Me(ye.element,"display");const zt=cc(Ne.fromDom(t.getBody())).dom.innerHeight,pt=$e(Je),kt=lt(Je,zt);(pt||kt)&&_t(ye.element,"display","none")},j=(ye,ie,$e,lt)=>{const Je=$e(ie);Ym.snapTo(ye,Je),L(ye,ie,kt=>kt[lt]<0,(kt,Ge)=>kt[lt]>Ge)},G=ye=>j(H,ye,p,"top"),ne=()=>m.get().each(G),ce=ye=>j(Z,ye,C,"bottom"),Pe=()=>f.get().each(ce);if(Br().deviceType.isTouch()){const ye=ie=>Ce(ie,Ne.fromDom);t.on("TableSelectionChange",ie=>{u.get()||(hi(s,H),hi(s,Z),u.set(!0));const $e=Ne.fromDom(ie.start),lt=Ne.fromDom(ie.finish);m.set($e),f.set(lt),x.from(ie.otherCells).each(Je=>{a.set(ye(Je.upOrLeftCells)),i.set(ye(Je.downOrRightCells)),G($e),ce(lt)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{ne(),Pe()}),t.on("TableSelectionClear",()=>{u.get()&&(Qo(H),Qo(Z),u.set(!1)),m.clear(),f.clear()})}};var mt=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const sn=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",xo=(t,s,a)=>{var i;const u=(i=s.delimiter)!==null&&i!==void 0?i:"›",m=(C,S,_)=>ws.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":_}},components:[Hn(C)],action:A=>{t.focus(),t.selection.select(S),t.nodeChanged()},buttonBehaviours:Se([Gn.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",S.nodeName.toLowerCase()]),onShow:(A,N)=>{wl(A.element,N.element)},onHide:A=>{y8(A.element)}})}),Ma.button(a.isDisabled),_o(()=>a.checkUiComponentContext("any"))])}),f=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Hn(` ${u} `)]}),p=C=>Fo(C,(S,_,A)=>{const N=m(_.name,_.element,A);return A===0?S.concat([N]):S.concat([f(),N])},[]),b=C=>{const S=[];let _=C.length;for(;_-- >0;){const A=C[_];if(A.nodeType===1&&!sn(A)){const N=QV(t,A);if(N.isDefaultPrevented()||S.push({name:N.name,element:A}),N.isPropagationStopped())break}}return S};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Se([Ke.config({mode:"flow",selector:"div[role=button]"}),Xe.config({disabled:a.isDisabled}),_o(()=>a.checkUiComponentContext("any")),Rn.config({}),Et.config({}),yt("elementPathEvents",[$n((C,S)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Ke.focusIn(C)),t.on("NodeChange",_=>{const A=b(_.parents),N=A.length>0?p(A):[];Et.set(C,N)})})])]),components:[]}};var dr;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(dr||(dr={}));const Ai=(t,s,a,i,u)=>{const m={height:yC(i+s.top,Z2(t),D4(t))};return a===dr.Both&&(m.width=yC(u+s.left,U2(t),W2(t))),m},ep=(t,s,a)=>{const i=Ne.fromDom(t.getContainer()),u=Ai(t,s,a,jt(i),Yo(i));Oo(u,(m,f)=>{la(m)&&_t(i,f,P0(m))}),Ji(t)},RB=t=>{const s=Y1(t);return s===!1?dr.None:s==="both"?dr.Both:dr.Vertical},$0=(t,s,a,i)=>{const m=po(a*20,i*20);return ep(t,m,s),x.some(!0)},__=(t,s)=>{const a=RB(t);if(a===dr.None)return x.none();const i=a===dr.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.",u=a===dr.Both?"tox-statusbar__resize-cursor-both":"tox-statusbar__resize-cursor-default";return x.some(Qr("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle",u],attributes:{"aria-label":s.translate(i),"data-mce-name":"resize-handle"},behaviours:[Ym.config({mode:"mouse",repositionTarget:!1,onDrag:(m,f,p)=>ep(t,p,a),blockerClass:"tox-blocker"}),Ke.config({mode:"special",onLeft:()=>$0(t,a,-1,0),onRight:()=>$0(t,a,1,0),onUp:()=>$0(t,a,0,-1),onDown:()=>$0(t,a,0,1)}),Rn.config({}),ft.config({}),Gn.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},NB=(t,s)=>{const a=(i,u,m)=>Et.set(i,[Hn(s.translate(["{0} "+m,u[m]]))]);return ws.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Se([Ma.button(s.isDisabled),_o(()=>s.checkUiComponentContext("any")),Rn.config({}),Et.config({}),Fe.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),yt("wordcount-events",[ku(i=>{const u=Fe.getValue(i),m=u.mode==="words"?"characters":"words";Fe.setValue(i,{mode:m,count:u.count}),a(i,u.count,m)}),$n(i=>{t.on("wordCountUpdate",u=>{const{mode:m}=Fe.getValue(i);Fe.setValue(i,{mode:m,count:u.wordCount}),a(i,u.wordCount,m)})})])]),eventOrder:{[Ua()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},Yu=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",mt.trim()])},behaviours:Se([ft.config({})])}]}),i=()=>{const p=FE("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Hn(Oc.translate(["Press {0} for help",p]))]}},u=()=>{const p=[];return t.hasPlugin("wordcount")&&p.push(NB(t,s)),N4(t)&&p.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:p}},m=()=>{const p=[],b=BD(t),C=MD(t),S=N4(t)||t.hasPlugin("wordcount"),_=()=>{const A="tox-statusbar__text-container--flex-start",N="tox-statusbar__text-container--flex-end",I="tox-statusbar__text-container--space-around";if(b){const H="tox-statusbar__text-container-3-cols";return!S&&!C?[H,I]:S&&!C?[H,N]:[H,A]}return[S&&!C?N:A]};return C&&p.push(xo(t,{},s)),b&&p.push(i()),S&&p.push(u()),p.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",..._()]},components:p}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const p=m(),b=__(t,s);return p.concat(b.toArray())})()}},T_=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),BB=(t,s)=>{const a=t.inline,i=a?SC:nj,u=ph(t)?_Z:U3,m=na(),f=tn(),p=tn(),b=tn(),A=Br().deviceType.isTouch()?["tox-platform-touch"]:[],N=F4(t),I=dh(t),H=mn({dom:{tag:"div",classes:["tox-anchorbar"]}}),Z=mn({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),L=()=>m.mainUi.get().map(st=>st.outerContainer).bind(Bn.getHeader),j=()=>Nt.fromOption(m.dialogUi.get().map(st=>st.sink),"UI has not been rendered"),G=()=>Nt.fromOption(m.popupUi.get().map(st=>st.sink),"(popup) UI has not been rendered"),ne=m.lazyGetInOuterOrDie("anchor bar",H.getOpt),ce=m.lazyGetInOuterOrDie("bottom anchor bar",Z.getOpt),Pe=m.lazyGetInOuterOrDie("toolbar",Bn.getToolbar),ye=m.lazyGetInOuterOrDie("throbber",Bn.getThrobber),ie=xZ({popup:G,dialog:j},t,ne,ce),$e=()=>{const st={attributes:{[lv]:N?Tu.BottomToTop:Tu.TopToBottom}},Tt=Bn.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:ie.popup,onEscape:()=>{t.focus()}}),kn=Bn.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:ie.popup.shared.getSink,providers:ie.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Yl=>{ez(t,Yl)},type:I,lazyToolbar:Pe,lazyHeader:()=>L().getOrDie("Could not find header element"),...st}),Sn=Bn.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:ie.popup.shared.providers,onEscape:()=>{t.focus()},type:I}),sa=gh(t),no=X1(t),Ja=Si(t),js=ND(t),Qa=lt(js),ec=sa||no||Ja,Oi=()=>sa?[Sn]:no?[kn]:[],H0=[Qa,Tt];return Bn.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(ec?[]:["tox-editor-header--empty"]),...st},components:wt([Ja?H0:[],Oi(),hh(t)?[]:[H.asSpec()]]),sticky:ph(t),editor:t,sharedBackstage:ie.popup.shared})},lt=st=>Bn.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]},promotionLink:st}),Je=()=>{const st=Bn.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Tt=Bn.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[st,Tt]}},zt=()=>{const st=$4(t),Tt=xn(Cr(),st)&&E(st,"display")==="grid",kn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(A),attributes:{...Oc.isRtl()?{dir:"rtl"}:{}}},behaviours:Se([ir.config({useFixed:()=>u.isDocked(L)})])},Sn={dom:{styles:{width:document.body.clientWidth+"px"}},events:Wn([me(Zi(),Ja=>{_t(Ja.element,"width",document.body.clientWidth+"px")})])},sa=cr(_n(kn,Tt?Sn:{})),no=h2(sa);return p.set(no),{sink:sa,mothership:no}},pt=()=>{const st={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(A),attributes:{...Oc.isRtl()?{dir:"rtl"}:{}}},behaviours:Se([ir.config({useFixed:()=>u.isDocked(L),getBounds:()=>s.getPopupSinkBounds()})])},Tt=cr(st),kn=h2(Tt);return b.set(kn),{sink:Tt,mothership:kn}},kt=()=>{const st=$e(),Tt=Je(),kn=Bn.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:ie.popup}),Sn=Bn.parts.viewWrapper({backstage:ie.popup}),sa=DD(t)&&!a?x.some(Yu(t,ie.popup.shared.providers)):x.none(),no=wt([N?[]:[st],a?[]:[Tt],N?[st]:[]]),Ja=Bn.parts.editorContainer({components:wt([no,a?[]:[Z.asSpec()]])}),js=L4(t),Qa={role:"application",...Oc.isRtl()?{dir:"rtl"}:{},...js?{"aria-hidden":"true"}:{}},ec=cr(Bn.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(N?["tox-tinymce--toolbar-bottom"]:[]).concat(A),styles:{visibility:"hidden",...js?{opacity:"0",border:"0"}:{}},attributes:Qa},components:[Ja,...a?[]:[Sn,...sa.toArray()],kn],behaviours:Se([_o(()=>ie.popup.shared.providers.checkUiComponentContext("any")),Xe.config({disableClass:"tox-tinymce--disabled"}),Ke.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Oi=h2(ec);return f.set(Oi),{mothership:Oi,outerContainer:ec}},Ge=st=>{const Tt=P0(sj(t)),kn=P0(rj(t));return t.inline||(xe("div","width",kn)&&_t(st.element,"width",kn),xe("div","height",Tt)?_t(st.element,"height",Tt):_t(st.element,"height","400px")),Tt},pe=st=>{t.addShortcut("alt+F9","focus menubar",()=>{Bn.focusMenubar(st)}),t.addShortcut("alt+F10","focus toolbar",()=>{Bn.focusToolbar(st)}),t.addCommand("ToggleToolbarDrawer",(Tt,kn)=>{kn!=null&&kn.skipFocus?Bn.toggleToolbarDrawerWithoutFocusing(st):Bn.toggleToolbarDrawer(st)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Bn.isToolbarDrawerToggled(st))},Ae=st=>{const{mainUi:Tt,popupUi:kn,uiMotherships:Sn}=st;Vn(wD(t),(Uf,O_)=>{t.ui.registry.addGroupToolbarButton(O_,Uf)});const{buttons:sa,menuItems:no,contextToolbars:Ja,sidebars:js,views:Qa}=t.ui.registry.getAll(),ec=I4(t),Oi={menuItems:no,menus:FD(t),menubar:_D(t),toolbar:ec.getOrThunk(()=>q1(t)),allowToolbarGroups:I===Tc.floating,buttons:sa,sidebar:js,views:Qa};pe(Tt.outerContainer),Hh(t,Tt.mothership,Sn),u.setup(t,ie.popup.shared,L),Ee(t,ie.popup),Qh(t,ie.popup.shared.getSink,ie.popup),$N(t),LZ(t,ye,ie.popup.shared),M(t,Ja,kn.sink,{backstage:ie.popup}),Te(t,kn.sink);const H0=t.getElement(),Yl=Ge(Tt.outerContainer),A_={targetNode:H0,height:Yl};return i.render(t,st,Oi,ie.popup,A_)},dt=st=>(b.set(st.mothership),st),At=()=>{const st=kt(),Tt=zt(),kn=Vd(t)?pt():dt(Tt);m.dialogUi.set(Tt),m.popupUi.set(kn),m.mainUi.set(st);const Sn={popupUi:kn,dialogUi:Tt,mainUi:st,uiMotherships:m.getUiMotherships()};return Ae(Sn)};return{popups:{backstage:ie.popup,getMothership:()=>T_("popups",b)},dialogs:{backstage:ie.dialog,getMothership:()=>T_("dialogs",p)},renderUI:At}},k_=t=>{const s=[],a={};return Oo(t,(i,u)=>{i.fold(()=>{s.push(u)},m=>{a[u]=m})}),s.length>0?Nt.error(s):Nt.value(a)},PB=(t,s,a,i)=>{const u=mn(lf.sketch(m=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Ce(t.items,f=>cN(m,f,s,a,i))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[u.asSpec()]}],behaviours:Se([Ke.config({mode:"acyclic",useTabstopAt:_e(E0)}),Nc.memento(u),Hz(u,{postprocess:m=>k_(m).fold(f=>(console.error(f),{}),Lt)}),yt("dialog-body-panel",[me(sr(),(m,f)=>{m.getSystem().broadcastOn([_0],{newFocus:x.some(f.event.target)})})])])}},pj=(t,s,a)=>Ce(t,(i,u)=>{Et.set(a,t[u].view());const m=s.dom.getBoundingClientRect();return Et.set(a,[]),m.height}),Yt=t=>Gs(em(t,(s,a)=>s>a?-1:s<a?1:0)),re=(t,s,a)=>{const i=ha(t).dom,u=ti(t,".tox-dialog-wrap").getOr(t),m=E(u,"position")==="fixed";let f;m?f=Math.max(i.clientHeight,window.innerHeight):f=Math.max(i.offsetHeight,i.scrollHeight);const p=jt(s),C=s.dom.offsetLeft>=a.dom.offsetLeft+Yo(a)?Math.max(jt(a),p):p,S=parseInt(E(t,"margin-top"),10)||0,_=parseInt(E(t,"margin-bottom"),10)||0,N=jt(t)+S+_-C;return f-N},ot=(t,s)=>{Gs(t).each(a=>Id.showTab(s,a.value))},Pt=(t,s)=>{_t(t,"height",s+"px"),_t(t,"flex-basis",s+"px")},ko=(t,s,a)=>{ti(t,'[role="dialog"]').each(i=>{Dn(i,'[role="tablist"]').each(u=>{a.get().map(m=>(_t(s,"height","0"),_t(s,"flex-basis","0"),Math.min(m,re(i,s,u)))).each(m=>{Pt(s,m)})})})},Dr=t=>Dn(t,'[role="tabpanel"]'),Mr=t=>{const s=tn();return{extraEvents:[$n(u=>{const m=u.element;Dr(m).each(f=>{_t(f,"visibility","hidden"),u.getSystem().getByDom(f).toOptional().each(p=>{const b=pj(t,f,p);Yt(b).fold(s.clear,s.set)}),ko(m,f,s),Me(f,"visibility"),ot(t,u),requestAnimationFrame(()=>{ko(m,f,s)})})}),me(Zi(),u=>{const m=u.element;Dr(m).each(f=>{ko(m,f,s)})}),me(By,(u,m)=>{const f=u.element;Dr(f).each(p=>{const b=Jc(rs(p));_t(p,"visibility","hidden");const C=$(p,"height").map(A=>parseInt(A,10));Me(p,"height"),Me(p,"flex-basis");const S=p.dom.getBoundingClientRect().height;C.forall(A=>S>A)?(s.set(S),ko(f,p,s)):C.each(A=>{Pt(p,A)}),Me(p,"visibility"),b.each(Do)})})],selectFirst:!1}},Ra="send-data-to-section",ol="send-data-to-view",L0=(t,s,a,i)=>{const u=tt({}),m=S=>{const _=Fe.getValue(S),A=k_(_).getOr({}),N=u.get(),I=_n(N,A);u.set(I)},f=S=>{const _=u.get();Fe.setValue(S,_)},p=tt(null),b=Ce(t.tabs,S=>({value:S.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Hn(a.shared.providers.translate(S.title))],view:()=>[lf.sketch(_=>({dom:{tag:"div",classes:["tox-form"]},components:Ce(S.items,A=>cN(_,A,s,a,i)),formBehaviours:Se([Ke.config({mode:"acyclic",useTabstopAt:_e(E0)}),yt("TabView.form.events",[$n(f),Wi(m)]),$r.config({channels:xg([{key:Ra,value:{onReceive:m}},{key:ol,value:{onReceive:f}}])})])}))]})),C=Mr(b);return Id.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(S,_,A)=>{const N=Fe.getValue(_);rt(S,CR,{name:N,oldName:p.get()}),p.set(N)},tabs:b,components:[Id.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[lD.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Se([Rn.config({})])}),Id.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:C.selectFirst,tabSectionBehaviours:Se([yt("tabpanel",C.extraEvents),Ke.config({mode:"acyclic"}),Kt.config({find:S=>Gs(Id.getViewItems(S))}),Nf(x.none(),S=>(S.getSystem().broadcastOn([Ra],{}),u.get()),(S,_)=>{u.set(_),S.getSystem().broadcastOn([ol],{})})])})},Rr=(t,s,a,i,u,m)=>{const f=C=>{const S=C.body;switch(S.type){case"tabpanel":return[L0(S,C.initialData,i,m)];default:return[PB(S,C.initialData,i,m)]}},p=(C,S)=>x.some({isTabPanel:()=>S.body.type==="tabpanel"}),b={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(C=>({id:C})).getOr({}),...u?b:{}}},components:[],behaviours:Se([Nc.childAt(0),Ea.config({channel:`${MR}-${s}`,updateState:p,renderComponents:f,initialData:t})])}},bj=(t,s,a,i,u,m)=>Rr(t,s,x.some(a),i,u,m),IB=(t,s,a,i)=>{const u=Rr(t,s,x.none(),a,!1,i);return es.parts.body(u)},FB=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[OR(x.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Se([Rn.config({}),ft.config({})])})]}],behaviours:Se([Ke.config({mode:"acyclic",useTabstopAt:_e(E0)})])};return es.parts.body(s)},Uq=Hu.deviceType.isTouch(),XG=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),JG=(t,s)=>es.parts.close(ws.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:Se([Rn.config({})])})),QG=()=>es.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),eq=(t,s)=>es.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:$l(`<p>${t6(s.translate(t))}</p>`)}]}]}),tq=t=>es.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),nq=(t,s)=>[wc.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),wc.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],vj=t=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",u=s+"__disable-scroll";return es.sketch({lazySink:t.lazySink,onEscape:m=>(t.onEscape(m),x.some(!0)),useTabstopAt:m=>!E0(m),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:$l(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:Uq?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:Se([ft.config({}),yt("dialog-events",t.dialogEvents.concat([Pg(sr(),(m,f)=>{pi.isBlocked(m)?ee():Ke.focusIn(m)}),me(vd(),(m,f)=>{m.getSystem().broadcastOn([_0],{newFocus:f.event.newFocus})})])),yt("scroll-lock",[$n(()=>{bo(Cr(),u)}),Wi(()=>{Un(Cr(),u)})]),...t.extraBehaviours]),eventOrder:{[Ua()]:["dialog-events"],[fc()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Ol()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},oq=t=>ws.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:Se([Rn.config({}),Gn.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[Qr("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{qt(s,Gd)}}),sq=(t,s,a,i)=>{const u=m=>[Hn(i.translate(m.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(m=>({id:m})).getOr({})}},components:[],behaviours:Se([Ea.config({channel:`${DR}-${s}`,initialData:t,renderComponents:u})])}},rq=()=>({dom:$l('<div class="tox-dialog__draghandle"></div>')}),Zq=(t,s,a,i)=>wc.sketch({dom:$l('<div class="tox-dialog__header"></div>'),components:[sq(t,s,x.some(a),i),rq(),oq(i)],containerBehaviours:Se([Ym.config({mode:"mouse",blockerClass:"blocker",getTarget:u=>Sl(u,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"},onDrag:(u,m)=>{u.getSystem().broadcastOn([Bd()],{target:m})}})])}),Wq=(t,s,a)=>{const i=es.parts.title(sq(t,s,x.none(),a)),u=es.parts.draghandle(rq()),m=es.parts.close(oq(a)),f=[i].concat(t.draggable?[u]:[]).concat([m]);return wc.sketch({dom:$l('<div class="tox-dialog__header"></div>'),components:f})},aq=(t,s,a)=>Wq({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),cq=(t,s,a,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:$l('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),iq=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{const u=Dn(t().element,".tox-dialog__header").map(m=>jt(m));es.setBusy(t(),(m,f)=>cq(i.message,f,s,u))},onUnblock:()=>{es.setIdle(t())}}),lq="tox-dialog--fullscreen",yj="tox-dialog--width-lg",Cj="tox-dialog--width-md",$B=t=>{switch(t){case"large":return x.some(yj);case"medium":return x.some(Cj);default:return x.none()}},uq=(t,s)=>{const a=Ne.fromDom(s.element.dom);Hs(a,lq)||(La(a,[yj,Cj]),$B(t).each(i=>bo(a,i)))},dq=(t,s)=>{const a=Ne.fromDom(t.element.dom),i=fu(a),u=St(i,m=>m===yj||m===Cj).or($B(s));YB(a,[lq,...u.toArray()])},mq=(t,s,a)=>cr(vj({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[x0({}),...t.extraBehaviours],onEscape:i=>{qt(i,Gd)},dialogEvents:s,eventOrder:{[Am()]:[Ea.name(),$r.name()],[fc()]:["scroll-lock",Ea.name(),"messages","dialog-events","alloy.base.behaviour"],[Ol()]:["alloy.base.behaviour","dialog-events","messages",Ea.name(),"scroll-lock"]}})),xj=(t,s={})=>{const a=i=>{const u=Ce(i.items,m=>{const f=Le(s,m.name).getOr(tt(!1));return{...m,storage:f}});return{...i,items:u}};return Ce(t,i=>i.type==="menu"?a(i):i)},fq=t=>Fo(t,(s,a)=>a.type==="menu"?Fo(a.items,(u,m)=>(u[m.name]=m.storage,u),s):s,{}),gq=(t,s)=>[mv(sr(),Yz),t(y0,(a,i,u,m)=>{yl(m.element)&&Jc(rs(m.element)).each(lc),s.onClose(),i.onClose()}),t(Gd,(a,i,u,m)=>{i.onCancel(a),qt(m,y0)}),me(C0,(a,i)=>s.onUnblock()),me(l3,(a,i)=>s.onBlock(i.event))],jq=(t,s)=>{const a=(u,m)=>me(u,(f,p)=>{i(f,(b,C)=>{m(t(),b,p.event,f)})}),i=(u,m)=>{Ea.getState(u).get().each(f=>{m(f,u)})};return[...gq(a,s),a(jl,(u,m,f)=>{m.onAction(u,{name:f.name})})]},hq=(t,s,a)=>{const i=(m,f)=>me(m,(p,b)=>{u(p,(C,S)=>{f(t(),C,b.event,p)})}),u=(m,f)=>{Ea.getState(m).get().each(p=>{f(p.internalDialog,m)})};return[...gq(i,s),i(Rf,(m,f)=>f.onSubmit(m)),i(Vr,(m,f,p)=>{f.onChange(m,{name:p.name})}),i(jl,(m,f,p,b)=>{const C=()=>b.getSystem().isConnected()?Ke.focusIn(b):void 0,S=N=>bp(N,"disabled")||qo(N,"aria-disabled").exists(I=>I==="true"),_=rs(b.element),A=Jc(_);f.onAction(m,{name:p.name,value:p.value}),Jc(_).fold(C,N=>{S(N)||A.exists(I=>im(N,I)&&S(I))?C():a().toOptional().filter(I=>!im(I.element,N)).each(C)})}),i(CR,(m,f,p)=>{f.onTabChange(m,{newTabName:p.name,oldTabName:p.oldName})}),Wi(m=>{const f=t();Fe.setValue(m,f.getData())})]},Gq=(t,s)=>T0(t,t.type,s),qq=(t,s,a)=>St(s,i=>i.name===a).bind(i=>i.memento.getOpt(t)),Kq=(t,s)=>{const a=s.map(p=>p.footerButtons).getOr([]),i=Ql(a,p=>p.align==="start"),u=(p,b)=>wc.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${p}`]},components:Ce(b,C=>C.memento.asSpec())}),m=u("start",i.pass),f=u("end",i.fail);return[m,f]},pq=(t,s,a)=>{const i=(u,m)=>{const f=Ce(m.buttons,b=>{const C=mn(Gq(b,a));return{name:b.name,align:b.align,memento:C}}),p=b=>qq(u,f,b);return x.some({lookupByName:p,footerButtons:f})};return{dom:$l('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Se([Ea.config({channel:`${RR}-${s}`,initialData:t,updateState:i,renderComponents:Kq})])}},Yq=(t,s,a)=>pq(t,s,a),bq=(t,s,a)=>es.parts.footer(pq(t,s,a)),LB=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=Kt.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return lf.getField(i,s).orThunk(()=>t.getFooter().bind(f=>Ea.getState(f).get()).bind(f=>f.lookupByName(s)))}else return x.none()},Xq=(t,s)=>{const a=t.getRoot();return Ea.getState(a).get().map(i=>mc(io("data",i.dataValidator,s))).getOr(s)},vq=(t,s,a)=>{const i=I=>{const H=t.getRoot();H.getSystem().isConnected()&&I(H)},N={getData:()=>{const I=t.getRoot(),H=I.getSystem().isConnected()?t.getFormWrapper():I,Z=Fe.getValue(H),L=Vn(a,j=>j.get());return{...Z,...L}},setData:I=>{i(H=>{const Z=N.getData(),L=_n(Z,I),j=Xq(t,L),G=t.getFormWrapper();Fe.setValue(G,j),Oo(a,(ne,ce)=>{Qt(L,ce)&&ne.set(L[ce])})})},setEnabled:(I,H)=>{LB(t,I).each(H?Xe.enable:Xe.disable)},focus:I=>{LB(t,I).each(ft.focus)},block:I=>{if(!hn(I))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(H=>{rt(H,l3,{message:I})})},unblock:()=>{i(I=>{qt(I,C0)})},showTab:I=>{i(H=>{const Z=t.getBody();Ea.getState(Z).get().exists(j=>j.isTabPanel())&&Kt.getCurrent(Z).each(j=>{Id.showTab(j,I)})})},redial:I=>{i(H=>{const Z=t.getId(),L=s(I),j=xj(L.internalDialog.buttons,a);H.getSystem().broadcastOn([`${Iy}-${Z}`],L),H.getSystem().broadcastOn([`${DR}-${Z}`],L.internalDialog),H.getSystem().broadcastOn([`${MR}-${Z}`],L.internalDialog),H.getSystem().broadcastOn([`${RR}-${Z}`],{...L.internalDialog,buttons:j}),N.setData(L.initialData)})},close:()=>{i(I=>{qt(I,y0)})},toggleFullscreen:t.toggleFullscreen};return N},Jq=(t,s,a)=>{const i=Ie("dialog"),u=t.internalDialog,m=aq(u.title,i,a),f=tt(u.size),p=G=>LB(L,G),b=$B(f.get()).toArray(),C=(G,ne)=>(f.set(ne.internalDialog.size),uq(ne.internalDialog.size,G),x.some(ne)),S=IB({body:u.body,initialData:u.initialData},i,a,p),_=xj(u.buttons),A=fq(_),N=gr(_.length!==0,bq({buttons:_},i,a)),I=hq(()=>j,iq(()=>Z,a.shared.providers,s),a.shared.getSink),H={id:i,header:m,body:S,footer:N,extraClasses:b,extraBehaviours:[Ea.config({channel:`${Iy}-${i}`,updateState:C,initialData:t})],extraStyles:{}},Z=mq(H,I,a),L=(()=>{const G=()=>{const ce=es.getBody(Z);return Kt.getCurrent(ce).getOr(ce)},ne=()=>{dq(Z,f.get())};return{getId:Y(i),getRoot:Y(Z),getBody:()=>es.getBody(Z),getFooter:()=>es.getFooter(Z),getFormWrapper:G,toggleFullscreen:ne}})(),j=vq(L,s.redial,A);return{dialog:Z,instanceApi:j}},yq=(t,s,a,i=!1,u)=>{const m=Ie("dialog"),f=Ie("dialog-label"),p=Ie("dialog-content"),b=t.internalDialog,C=$e=>LB(ye,$e),S=tt(b.size),_=$B(S.get()).toArray(),A=($e,lt)=>(S.set(lt.internalDialog.size),uq(lt.internalDialog.size,$e),u(),x.some(lt)),N=mn(Zq({title:b.title,draggable:!0},m,f,a.shared.providers)),I=mn(bj({body:b.body,initialData:b.initialData},m,p,a,i,C)),H=xj(b.buttons),Z=fq(H),L=gr(H.length!==0,mn(Yq({buttons:H},m,a))),j=hq(()=>ie,{onBlock:$e=>{pi.block(ce,(lt,Je)=>{const zt=N.getOpt(ce).map(pt=>jt(pt.element));return cq($e.message,Je,a.shared.providers,zt)})},onUnblock:()=>{pi.unblock(ce)},onClose:()=>s.closeWindow()},a.shared.getSink),G="tox-dialog-inline",ne=Br().os,ce=cr({dom:{tag:"div",classes:["tox-dialog",G,..._],attributes:{role:"dialog",...ne.isMacOS()?{"aria-label":b.title}:{"aria-labelledby":f}}},eventOrder:{[Am()]:[Ea.name(),$r.name()],[Ua()]:["execute-on-form"],[fc()]:["reflecting","execute-on-form"]},behaviours:Se([Ke.config({mode:"cyclic",onEscape:$e=>(qt($e,y0),x.some(!0)),useTabstopAt:$e=>!E0($e)&&(ac($e)!=="button"||Go($e,"disabled")!=="disabled"),firstTabstop:1}),Ea.config({channel:`${Iy}-${m}`,updateState:A,initialData:t}),ft.config({}),yt("execute-on-form",j.concat([Pg(sr(),($e,lt)=>{Ke.focusIn($e)}),me(vd(),($e,lt)=>{$e.getSystem().broadcastOn([_0],{newFocus:lt.event.newFocus})})])),pi.config({getRoot:()=>x.some(ce)}),Et.config({}),x0({})]),components:[N.asSpec(),I.asSpec(),...L.map($e=>$e.asSpec()).toArray()]}),Pe=()=>{dq(ce,S.get())},ye={getId:Y(m),getRoot:Y(ce),getFooter:()=>L.map($e=>$e.get(ce)),getBody:()=>I.get(ce),getFormWrapper:()=>{const $e=I.get(ce);return Kt.getCurrent($e).getOr($e)},toggleFullscreen:Pe},ie=vq(ye,s.redial,Z);return{dialog:ce,instanceApi:ie}};var Sj=tinymce.util.Tools.resolve("tinymce.util.URI");const Qq=t=>{const s=f=>{t.getSystem().isConnected()&&f(t)};return{block:f=>{if(!hn(f))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(p=>{rt(p,l3,{message:f})})},unblock:()=>{s(f=>{qt(f,C0)})},close:()=>{s(f=>{qt(f,y0)})},sendMessage:f=>{s(p=>{p.getSystem().broadcastOn([NR],f)})}}},eK=["insertContent","setContent","execCommand","close","block","unblock"],Cq=t=>ca(t)&&eK.indexOf(t.mceAction)!==-1,tK=t=>!Cq(t)&&ca(t)&&Qt(t,"mceAction"),nK=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const i=Zr(a.ui)?a.ui:!1;t.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},oK=(t,s,a,i)=>{const u=Ie("dialog"),m=aq(t.title,u,i),f=FB(t),p=t.buttons.bind(G=>G.length===0?x.none():x.some(bq({buttons:G},u,i))),b=jq(()=>j,iq(()=>L,i.shared.providers,s)),C={...t.height.fold(()=>({}),G=>({height:G+"px","max-height":G+"px"})),...t.width.fold(()=>({}),G=>({width:G+"px","max-width":G+"px"}))},S=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],_=new Sj(t.url,{base_uri:new Sj(window.location.href)}),A=`${_.protocol}://${_.host}${_.port?":"+_.port:""}`,N=Ii(),I=(G,ne)=>x.some(ne),H=[Ea.config({channel:`${Iy}-${u}`,updateState:I,initialData:t}),yt("messages",[$n(()=>{const G=ys(Ne.fromDom(window),"message",ne=>{if(_.isSameOrigin(new Sj(ne.raw.origin))){const ce=ne.raw.data;Cq(ce)?nK(a,j,ce):tK(ce)&&t.onMessage(j,ce)}});N.set(G)}),Wi(N.clear)]),$r.config({channels:{[NR]:{onReceive:(G,ne)=>{Dn(G.element,"iframe").each(ce=>{const Pe=ce.dom.contentWindow;Qn(Pe)&&Pe.postMessage(ne,A)})}}}})],L=mq({id:u,header:m,body:f,footer:p,extraClasses:S,extraBehaviours:H,extraStyles:C},b,i),j=Qq(L);return{dialog:L,instanceApi:j}},sK=t=>{const s=t.shared;return{open:(i,u)=>{const m=()=>{es.hide(C),u()},f=mn(T0({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:x.some("primary"),align:"end",enabled:!0,icon:x.none()},"cancel",t)),p=QG(),b=JG(m,s.providers),C=cr(vj({lazySink:()=>s.getSink(),header:XG(p,b),body:eq(i,s.providers),footer:x.some(tq(nq([],[f.asSpec()]))),onEscape:m,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[me(Gd,m)],eventOrder:{}}));es.show(C);const S=f.get(C);ft.focus(S)}}},rK=t=>{const s=t.shared;return{open:(i,u)=>{const m=A=>{es.hide(S),u(A)},f=mn(T0({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:x.some("primary"),align:"end",enabled:!0,icon:x.none()},"submit",t)),p=T0({context:"any",name:"no",text:"No",primary:!1,buttonType:x.some("secondary"),align:"end",enabled:!0,icon:x.none()},"cancel",t),b=QG(),C=JG(()=>m(!1),s.providers),S=cr(vj({lazySink:()=>s.getSink(),header:XG(b,C),body:eq(i,s.providers),footer:x.some(tq(nq([],[p,f.asSpec()]))),onEscape:()=>m(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[me(Gd,()=>m(!1)),me(Rf,()=>m(!0))],eventOrder:{}}));es.show(S);const _=f.get(S);ft.focus(_)}}},xq=(t,s)=>mc(io("data",s,t)),Sq=t=>Sp(t,".tox-alert-dialog")||Sp(t,".tox-confirm-dialog"),aK=(t,s,a,i)=>s&&a?[]:[jn.config({contextual:{lazyContext:()=>x.some(Ms(Ne.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition",onHide:i},modes:["top"],lazyViewport:u=>zd(t,u.element).map(f=>({bounds:hf(f),optScrollEnv:x.some({currentScrollTop:f.element.dom.scrollTop,scrollElmTop:ei(f.element).top})})).getOrThunk(()=>({bounds:or(),optScrollEnv:x.none()}))})],cK=t=>{const s=t.editor,a=ph(s),i=sK(t.backstages.dialog),u=rK(t.backstages.dialog),m=(I,H,Z)=>{if(!Wr(H)){if(H.inline==="toolbar")return C(I,t.backstages.popup.shared.anchors.inlineDialog(),Z,H);if(H.inline==="bottom")return S(I,t.backstages.popup.shared.anchors.inlineBottomDialog(),Z,H);if(H.inline==="cursor")return C(I,t.backstages.popup.shared.anchors.cursor(),Z,H)}return b(I,Z)},f=(I,H)=>p(I,H),p=(I,H)=>{const Z=L=>{const j=oK(L,{closeWindow:()=>{es.hide(j.dialog),H(j.instanceApi)}},s,t.backstages.dialog);return es.show(j.dialog),j.instanceApi};return Wu.openUrl(Z,I)},b=(I,H)=>{const Z=(L,j,G)=>{const ne=j,Pe=Jq({dataValidator:G,initialData:ne,internalDialog:L},{redial:Wu.redial,closeWindow:()=>{es.hide(Pe.dialog),H(Pe.instanceApi)}},t.backstages.dialog);return es.show(Pe.dialog),Pe.instanceApi.setData(ne),Pe.instanceApi};return Wu.open(Z,I)},C=(I,H,Z,L)=>{const j=(G,ne,ce)=>{const Pe=xq(ne,ce),ye=tn(),ie=t.backstages.popup.shared.header.isPositionedAtTop(),$e={dataValidator:ce,initialData:Pe,internalDialog:G},lt=()=>ye.on(pe=>{qn.reposition(pe),(!a||!ie)&&jn.refresh(pe)}),Je=yq($e,{redial:Wu.redial,closeWindow:()=>{ye.on(qn.hide),s.off("ResizeEditor",lt),s.off("ScrollWindow",zt),ye.clear(),Z(Je.instanceApi)}},t.backstages.popup,L.ariaAttrs,lt),zt=()=>Je.dialog.getSystem().broadcastOn([Bd()],{target:Je.dialog.element}),pt=()=>Je.dialog.getSystem().broadcastOn([Ll()],{target:Je.dialog.element}),kt=cr(qn.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:L.persistent?{event:"doNotDismissYet"}:{},...ie?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Se([yt("window-manager-inline-events",[me(bu(),(pe,Ae)=>{qt(Je.dialog,Gd)})]),...aK(s,a,ie,pt)]),isExtraPart:(pe,Ae)=>Sq(Ae)}));ye.set(kt);const Ge=()=>{const pe=s.inline?Cr():Ne.fromDom(s.getContainer()),Ae=Ms(pe);return x.some(Ae)};return qn.showWithinBounds(kt,Za(Je.dialog),{anchor:H},Ge),(!a||!ie)&&(jn.refresh(kt),s.on("ResizeEditor",lt)),s.on("ScrollWindow",zt),Je.instanceApi.setData(Pe),Ke.focusIn(Je.dialog),Je.instanceApi};return Wu.open(j,I)},S=(I,H,Z,L)=>{const j=(G,ne,ce)=>{const Pe=xq(ne,ce),ye=tn(),ie=t.backstages.popup.shared.header.isPositionedAtTop(),$e={dataValidator:ce,initialData:Pe,internalDialog:G},lt=()=>ye.on(kt=>{qn.reposition(kt),jn.refresh(kt)}),Je=yq($e,{redial:Wu.redial,closeWindow:()=>{ye.on(qn.hide),s.off("ResizeEditor ScrollWindow ElementScroll",lt),ye.clear(),Z(Je.instanceApi)}},t.backstages.popup,L.ariaAttrs,lt),zt=cr(qn.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:L.persistent?{event:"doNotDismissYet"}:{},...ie?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Se([yt("window-manager-inline-events",[me(bu(),(kt,Ge)=>{qt(Je.dialog,Gd)})]),jn.config({contextual:{lazyContext:()=>x.some(Ms(Ne.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:kt=>zd(s,kt.element).map(pe=>({bounds:hf(pe),optScrollEnv:x.some({currentScrollTop:pe.element.dom.scrollTop,scrollElmTop:ei(pe.element).top})})).getOrThunk(()=>({bounds:or(),optScrollEnv:x.none()}))})]),isExtraPart:(kt,Ge)=>Sq(Ge)}));ye.set(zt);const pt=()=>t.backstages.popup.shared.getSink().toOptional().bind(kt=>{const Ge=zd(s,kt.element),pe=15,Ae=Ge.map(st=>hf(st)).getOr(or()),dt=Ms(Ne.fromDom(s.getContentAreaContainer())),At=Tb(dt,Ae);return x.some(Ro(At.x,At.y,At.width,At.height-pe))});return qn.showWithinBounds(zt,Za(Je.dialog),{anchor:H},pt),jn.refresh(zt),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",lt),Je.instanceApi.setData(Pe),Ke.focusIn(Je.dialog),Je.instanceApi};return Wu.open(j,I)};return{open:m,openUrl:f,alert:(I,H)=>{i.open(I,H)},close:I=>{I.close()},confirm:(I,H)=>{u.open(I,H)}}},iK=t=>{pD(t),rz(t),Wt(t)};var lK=()=>{vH.add("silver",t=>{iK(t);let s=()=>or();const{dialogs:a,popups:i,renderUI:u}=BB(t,{getPopupSinkBounds:()=>s()}),m=()=>{const S=u();return zd(t,i.getMothership().element).each(A=>{s=()=>hf(A)}),S};Rz.register(t,i.backstage.shared);const f=cK({editor:t,backstages:{popup:i.backstage,dialog:a.backstage}}),p=tn(),b=()=>tE(t,{backstage:i.backstage},i.getMothership(),p),C=()=>Dn(Ne.fromDom(t.getContainer()),".tox-promotion").map(S=>S.dom).getOrNull();return{renderUI:m,getWindowManagerImpl:Y(f),getNotificationManagerImpl:b,getPromotionElement:C}})};lK()})();export{SK as t};
