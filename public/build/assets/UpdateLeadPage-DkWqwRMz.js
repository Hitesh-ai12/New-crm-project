import"./bootstrap.min-KxrJAQL6.js";import{o as r,l as m,j as t,_ as P,r as k,bf as q,L as a,d6 as i,d3 as w,aG as _,U as O,R as j,b as z,n as $,Z as W,X as f,F as M,Y as N,k as u,P as V,f as S}from"./main-BaDQntze.js";import{a as C}from"./axios-CdtiCRuU.js";const Y={__name:"AnalyticsTab",setup(T){return(b,s)=>(r(),m("div",null,s[0]||(s[0]=[t("h4",{class:"mb-3"},"Analytics",-1),t("p",null,"No analytics data available yet.",-1)])))}},Z={class:"row g-3"},G={class:"col-md-6"},J={class:"col-md-6"},X={class:"col-md-6"},K={class:"col-md-6"},Q={class:"col-md-6"},h={class:"col-md-6"},tt={class:"col-md-6"},et={class:"col-md-6"},lt={class:"col-md-6"},st={class:"col-md-6"},ot={class:"col-md-6"},nt={class:"col-md-6"},at={class:"col-md-6"},it={class:"col-md-6 form-check"},dt={class:"col-md-6 form-check"},rt={class:"col-md-6 form-check"},ut={class:"col-md-6 form-check"},mt={class:"col-md-6"},pt={class:"col-md-6"},vt={class:"col-md-6"},bt={class:"col-md-6"},ct={class:"col-md-6"},ft={class:"col-md-6"},gt={class:"col-md-6"},kt={class:"col-md-6"},yt={class:"col-md-6"},$t={class:"col-md-6"},xt={class:"col-md-6"},At={class:"col-md-6"},Ut={class:"col-md-6"},Vt={class:"col-md-6"},wt={class:"col-md-6"},Tt={class:"col-md-6"},St={__name:"ProfileTab",setup(T){const b=k("123"),s=q({name:"",email:"",phone:"",latestActivity:"",activityAt:"",createdOn:"",tags:"",stage:"",latestSource:"",latestSMS:"",latestEmail:"",nextTask:"",nextAppointment:"",newListingAlerts:!1,neighbourhoodAlerts:!1,openHouseAlerts:!1,priceDropAlerts:!1,activeActionPlans:"",assignedMarketUpdates:"",assignedNewsletters:"",notes:"",dob:"",background:"",city:"",facebook:"",instagram:"",linkedin:"",whatsapp:"",twitter:"",house_number:"",street:"",province:"",zip_code:""});function x(){console.log("Lead data:",s),alert("Lead Updated Successfully!")}return(p,e)=>(r(),m("form",{onSubmit:_(x,["prevent"])},[a(t("input",{type:"hidden","onUpdate:modelValue":e[0]||(e[0]=l=>b.value=l)},null,512),[[i,b.value]]),e[68]||(e[68]=t("h4",{class:"mb-3"},"Profile",-1)),t("div",Z,[t("div",G,[e[34]||(e[34]=t("label",{class:"form-label"},"Name",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>s.name=l),class:"form-control",required:""},null,512),[[i,s.name]])]),t("div",J,[e[35]||(e[35]=t("label",{class:"form-label"},"Email",-1)),a(t("input",{type:"email","onUpdate:modelValue":e[2]||(e[2]=l=>s.email=l),class:"form-control",required:""},null,512),[[i,s.email]])]),t("div",X,[e[36]||(e[36]=t("label",{class:"form-label"},"Phone",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=l=>s.phone=l),class:"form-control",required:""},null,512),[[i,s.phone]])]),t("div",K,[e[37]||(e[37]=t("label",{class:"form-label"},"Latest Activity",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=l=>s.latestActivity=l),class:"form-control"},null,512),[[i,s.latestActivity]])]),t("div",Q,[e[38]||(e[38]=t("label",{class:"form-label"},"Activity At",-1)),a(t("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=l=>s.activityAt=l),class:"form-control"},null,512),[[i,s.activityAt]])]),t("div",h,[e[39]||(e[39]=t("label",{class:"form-label"},"Created On",-1)),a(t("input",{type:"date","onUpdate:modelValue":e[6]||(e[6]=l=>s.createdOn=l),class:"form-control"},null,512),[[i,s.createdOn]])]),t("div",tt,[e[40]||(e[40]=t("label",{class:"form-label"},"Tags",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=l=>s.tags=l),class:"form-control"},null,512),[[i,s.tags]])]),t("div",et,[e[41]||(e[41]=t("label",{class:"form-label"},"Stage",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=l=>s.stage=l),class:"form-control"},null,512),[[i,s.stage]])]),t("div",lt,[e[42]||(e[42]=t("label",{class:"form-label"},"Latest Source",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=l=>s.latestSource=l),class:"form-control"},null,512),[[i,s.latestSource]])]),t("div",st,[e[43]||(e[43]=t("label",{class:"form-label"},"Latest SMS",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=l=>s.latestSMS=l),class:"form-control"},null,512),[[i,s.latestSMS]])]),t("div",ot,[e[44]||(e[44]=t("label",{class:"form-label"},"Latest Email",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=l=>s.latestEmail=l),class:"form-control"},null,512),[[i,s.latestEmail]])]),t("div",nt,[e[45]||(e[45]=t("label",{class:"form-label"},"Next Task",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=l=>s.nextTask=l),class:"form-control"},null,512),[[i,s.nextTask]])]),t("div",at,[e[46]||(e[46]=t("label",{class:"form-label"},"Next Appointment",-1)),a(t("input",{type:"date","onUpdate:modelValue":e[13]||(e[13]=l=>s.nextAppointment=l),class:"form-control"},null,512),[[i,s.nextAppointment]])]),t("div",it,[a(t("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=l=>s.newListingAlerts=l),class:"form-check-input"},null,512),[[w,s.newListingAlerts]]),e[47]||(e[47]=t("label",{class:"form-check-label"},"New Listing Alerts",-1))]),t("div",dt,[a(t("input",{type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=l=>s.neighbourhoodAlerts=l),class:"form-check-input"},null,512),[[w,s.neighbourhoodAlerts]]),e[48]||(e[48]=t("label",{class:"form-check-label"},"Neighbourhood Alerts",-1))]),t("div",rt,[a(t("input",{type:"checkbox","onUpdate:modelValue":e[16]||(e[16]=l=>s.openHouseAlerts=l),class:"form-check-input"},null,512),[[w,s.openHouseAlerts]]),e[49]||(e[49]=t("label",{class:"form-check-label"},"Open House Alerts",-1))]),t("div",ut,[a(t("input",{type:"checkbox","onUpdate:modelValue":e[17]||(e[17]=l=>s.priceDropAlerts=l),class:"form-check-input"},null,512),[[w,s.priceDropAlerts]]),e[50]||(e[50]=t("label",{class:"form-check-label"},"Price Drop Alerts",-1))]),t("div",mt,[e[51]||(e[51]=t("label",{class:"form-label"},"Active Action Plans",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[18]||(e[18]=l=>s.activeActionPlans=l),class:"form-control"},null,512),[[i,s.activeActionPlans]])]),t("div",pt,[e[52]||(e[52]=t("label",{class:"form-label"},"Assigned Market Updates",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[19]||(e[19]=l=>s.assignedMarketUpdates=l),class:"form-control"},null,512),[[i,s.assignedMarketUpdates]])]),t("div",vt,[e[53]||(e[53]=t("label",{class:"form-label"},"Assigned Newsletters",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[20]||(e[20]=l=>s.assignedNewsletters=l),class:"form-control"},null,512),[[i,s.assignedNewsletters]])]),t("div",bt,[e[54]||(e[54]=t("label",{class:"form-label"},"Notes",-1)),a(t("textarea",{"onUpdate:modelValue":e[21]||(e[21]=l=>s.notes=l),class:"form-control"},null,512),[[i,s.notes]])]),t("div",ct,[e[55]||(e[55]=t("label",{class:"form-label"},"Background",-1)),a(t("textarea",{"onUpdate:modelValue":e[22]||(e[22]=l=>s.background=l),class:"form-control"},null,512),[[i,s.background]])]),t("div",ft,[e[56]||(e[56]=t("label",{class:"form-label"},"Date of Birth",-1)),a(t("input",{type:"date","onUpdate:modelValue":e[23]||(e[23]=l=>s.dob=l),class:"form-control"},null,512),[[i,s.dob]])]),t("div",gt,[e[57]||(e[57]=t("label",{class:"form-label"},"House Number",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[24]||(e[24]=l=>s.house_number=l),class:"form-control",required:""},null,512),[[i,s.house_number]])]),t("div",kt,[e[58]||(e[58]=t("label",{class:"form-label"},"Street",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[25]||(e[25]=l=>s.street=l),class:"form-control",required:""},null,512),[[i,s.street]])]),t("div",yt,[e[59]||(e[59]=t("label",{class:"form-label"},"City",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[26]||(e[26]=l=>s.city=l),class:"form-control",required:""},null,512),[[i,s.city]])]),t("div",$t,[e[60]||(e[60]=t("label",{class:"form-label"},"Province",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[27]||(e[27]=l=>s.province=l),class:"form-control",required:""},null,512),[[i,s.province]])]),t("div",xt,[e[61]||(e[61]=t("label",{class:"form-label"},"Zip Code",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[28]||(e[28]=l=>s.zip_code=l),class:"form-control",required:""},null,512),[[i,s.zip_code]])]),t("div",At,[e[62]||(e[62]=t("label",{class:"form-label"},"Facebook",-1)),a(t("input",{type:"url","onUpdate:modelValue":e[29]||(e[29]=l=>s.facebook=l),class:"form-control"},null,512),[[i,s.facebook]])]),t("div",Ut,[e[63]||(e[63]=t("label",{class:"form-label"},"Instagram",-1)),a(t("input",{type:"url","onUpdate:modelValue":e[30]||(e[30]=l=>s.instagram=l),class:"form-control"},null,512),[[i,s.instagram]])]),t("div",Vt,[e[64]||(e[64]=t("label",{class:"form-label"},"LinkedIn",-1)),a(t("input",{type:"url","onUpdate:modelValue":e[31]||(e[31]=l=>s.linkedin=l),class:"form-control"},null,512),[[i,s.linkedin]])]),t("div",wt,[e[65]||(e[65]=t("label",{class:"form-label"},"WhatsApp",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[32]||(e[32]=l=>s.whatsapp=l),class:"form-control"},null,512),[[i,s.whatsapp]])]),t("div",Tt,[e[66]||(e[66]=t("label",{class:"form-label"},"Twitter",-1)),a(t("input",{type:"url","onUpdate:modelValue":e[33]||(e[33]=l=>s.twitter=l),class:"form-control"},null,512),[[i,s.twitter]])]),e[67]||(e[67]=t("div",{class:"col-12"},[t("button",{type:"submit",class:"btn btn-primary mt-3"},"Update")],-1))])],32))}},Ct=P(St,[["__scopeId","data-v-e44d76b3"]]),Lt={class:"container d-flex"},Mt={class:"sidebar me-4"},Nt={class:"main-content flex-grow-1"},Pt={key:0,class:"mb-3"},Dt={class:"card-body"},Et={class:"card-title"},Ft={class:"card-text"},It={key:0},Rt={key:1},Bt={key:2},Ht={key:3},qt=["innerHTML"],_t={class:"text-muted small"},Ot=["onClick"],jt=["onClick"],zt=["onClick"],Wt={key:1,class:"modal fade show d-block",tabindex:"-1",role:"dialog",style:{"background-color":"rgba(0, 0, 0, 50%)"}},Yt={class:"modal-dialog modal-lg",role:"document"},Zt={class:"modal-content"},Gt={class:"modal-header"},Jt={class:"modal-title"},Xt={class:"modal-body"},Kt={key:0},Qt=["innerHTML"],ht={key:1},te=["href"],ee={class:"modal-footer"},le={key:2,class:"modal fade show d-block",tabindex:"-1",role:"dialog",style:{"background-color":"rgba(0, 0, 0, 50%)"}},se={class:"modal-dialog",role:"document"},oe={class:"modal-content"},ne={class:"modal-header"},ae={class:"modal-title"},ie={class:"modal-body"},de={class:"border p-2 rounded bg-light"},re={class:"text-muted mt-2 small"},ue={class:"modal-footer"},me={__name:"TimelineTab",setup(T){const b=O(),s=k(b.params.id),x=k(!1),p=k({}),e=k(!1),l=k({}),v=k("all"),y=k("all"),A=k([]);j(async()=>{const o={Authorization:`Bearer ${localStorage.getItem("auth_token")}`};try{const U=(await C.get(`/api/lead/${s.value}/sms`,{headers:o})).data.map(d=>{const g=new Date(`${d.date} ${d.time}`);return{id:d.id,type:"sms",direction:d.direction,phone:d.phone,title:d.title,description:d.description,leadId:d.leadId,date:g.toLocaleDateString(),time:g.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}});A.value.push(...U);const R=(await C.get("/api/sent-emails",{headers:o})).data.map(d=>{const g=new Date(d.created_at);return{id:`sent-${d.id}`,type:"email",direction:"sent",title:"Sent Email",description:d.subject,date:g.toLocaleDateString(),time:g.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),to:d.to,body_plain:d.message,body_html:null,attachments:d.attachments}});A.value.push(...R);const B=(await C.get("/api/received-emails",{headers:o})).data.map(d=>{const g=new Date(`${d.date} ${d.time}`);return{id:`received-${d.id}`,type:"email",direction:"received",title:d.title,description:d.description,from:d.from,to:d.to,body_plain:d.body_plain,body_html:d.body_html,attachments:d.attachments,date:g.toLocaleDateString(),time:g.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}});A.value.push(...B),A.value.sort((d,g)=>{const H=new Date(`${d.date} ${d.time}`);return new Date(`${g.date} ${g.time}`).getTime()-H.getTime()})}catch(n){console.error("Failed to load timeline data:",n)}});const D=z(()=>v.value==="all"?A.value:A.value.filter(c=>c.type!==v.value?!1:y.value==="all"?!0:c.direction===y.value)),E=c=>{p.value=c,x.value=!0},F=c=>{l.value=c,e.value=!0},L=c=>{alert(`Replying to: ${c.title} from ${c.from}. Full subject: ${c.description}`)},I=c=>c.substring(c.lastIndexOf("/")+1);return(c,o)=>(r(),m("div",Lt,[t("div",Mt,[t("div",{class:$(["menu-item",{active:v.value==="all"}]),onClick:o[0]||(o[0]=n=>{v.value="all",y.value="all"})},o[12]||(o[12]=[t("div",{class:"icon"},[t("i",{class:"fas fa-headset"})],-1),t("div",{class:"label"},"ALL",-1)]),2),t("div",{class:$(["menu-item",{active:v.value==="sms"}]),onClick:o[1]||(o[1]=n=>{v.value="sms",y.value="all"})},o[13]||(o[13]=[t("div",{class:"icon"},[t("i",{class:"fas fa-comment"})],-1),t("div",{class:"label"},"SMS",-1)]),2),t("div",{class:$(["menu-item",{active:v.value==="email"}]),onClick:o[2]||(o[2]=n=>v.value="email")},o[14]||(o[14]=[t("div",{class:"icon"},[t("i",{class:"fas fa-envelope"})],-1),t("div",{class:"label"},"Email",-1)]),2),t("div",{class:$(["menu-item",{active:v.value==="notes"}]),onClick:o[3]||(o[3]=n=>{v.value="notes",y.value="all"})},o[15]||(o[15]=[t("div",{class:"icon"},[t("i",{class:"fas fa-sticky-note"})],-1),t("div",{class:"label"},"Notes",-1)]),2),t("div",{class:$(["menu-item",{active:v.value==="callLog"}]),onClick:o[4]||(o[4]=n=>{v.value="callLog",y.value="all"})},o[16]||(o[16]=[t("div",{class:"icon"},[t("i",{class:"fas fa-phone"})],-1),t("div",{class:"label"},"Call Log",-1)]),2),t("div",{class:$(["menu-item",{active:v.value==="webActivity"}]),onClick:o[5]||(o[5]=n=>{v.value="webActivity",y.value="all"})},o[17]||(o[17]=[t("div",{class:"icon"},[t("i",{class:"fas fa-globe"})],-1),t("div",{class:"label"},"WEB Activity",-1)]),2)]),t("div",Nt,[o[29]||(o[29]=t("h4",{class:"mb-3"},"Timeline",-1)),v.value==="email"||v.value==="sms"?(r(),m("div",Pt,[o[19]||(o[19]=t("label",{class:"me-2 fw-bold"},"Filter:",-1)),a(t("select",{"onUpdate:modelValue":o[6]||(o[6]=n=>y.value=n),class:"form-select w-auto d-inline-block"},o[18]||(o[18]=[t("option",{value:"all"},"All",-1),t("option",{value:"sent"},"Sent",-1),t("option",{value:"received"},"Received",-1)]),512),[[W,y.value]])])):f("",!0),(r(!0),m(M,null,N(D.value,n=>(r(),m("div",{key:n.id,class:"card mb-2"},[t("div",Dt,[t("h5",Et,u(n.title),1),t("p",Ft,[n.type==="email"&&n.direction==="received"?(r(),m("span",It," From: "+u(n.from),1)):n.type==="email"&&n.direction==="sent"?(r(),m("span",Rt," To: "+u(n.to),1)):n.type==="sms"&&n.direction==="received"?(r(),m("span",Bt," From: "+u(n.phone),1)):n.type==="sms"&&n.direction==="sent"?(r(),m("span",Ht," To: "+u(n.phone),1)):f("",!0),o[20]||(o[20]=t("br",null,null,-1)),t("span",{innerHTML:n.description},null,8,qt)]),t("p",_t,u(n.date)+" "+u(n.time),1),n.type==="email"&&n.direction==="received"?(r(),m("button",{key:0,class:"btn btn-sm btn-primary",onClick:U=>L(n)}," Reply ",8,Ot)):f("",!0),n.type==="email"?(r(),m("button",{key:1,class:"btn btn-sm btn-info ms-2",onClick:U=>F(n)}," View ",8,jt)):f("",!0),n.type==="sms"?(r(),m("button",{key:2,class:"btn btn-sm btn-info ms-2",onClick:U=>E(n)}," View ",8,zt)):f("",!0)])]))),128)),e.value?(r(),m("div",Wt,[t("div",Yt,[t("div",Zt,[t("div",Gt,[t("h5",Jt,u(l.value.title),1),t("button",{type:"button",class:"btn-close",onClick:o[7]||(o[7]=n=>e.value=!1)})]),t("div",Xt,[t("p",null,[o[21]||(o[21]=t("strong",null,"From:",-1)),V(" "+u(l.value.from),1)]),l.value.to?(r(),m("p",Kt,[o[22]||(o[22]=t("strong",null,"To:",-1)),V(" "+u(l.value.to),1)])):f("",!0),t("p",null,[o[23]||(o[23]=t("strong",null,"Subject:",-1)),V(" "+u(l.value.description),1)]),o[25]||(o[25]=t("hr",null,null,-1)),t("div",{innerHTML:l.value.body_html||l.value.body_plain},null,8,Qt),l.value.attachments&&l.value.attachments.length?(r(),m("div",ht,[o[24]||(o[24]=t("h6",null,"Attachments:",-1)),t("ul",null,[(r(!0),m(M,null,N(l.value.attachments,(n,U)=>(r(),m("li",{key:U},[t("a",{href:n,target:"_blank"},u(I(n)),9,te)]))),128))])])):f("",!0)]),t("div",ee,[t("button",{type:"button",class:"btn btn-secondary",onClick:o[8]||(o[8]=n=>e.value=!1)},"Close"),l.value.type==="email"&&l.value.direction==="received"?(r(),m("button",{key:0,class:"btn btn-primary",onClick:o[9]||(o[9]=n=>{L(l.value),e.value=!1})}," Reply ")):f("",!0)])])])])):f("",!0),x.value?(r(),m("div",le,[t("div",se,[t("div",oe,[t("div",ne,[t("h5",ae,u(p.value.title),1),t("button",{type:"button",class:"btn-close",onClick:o[10]||(o[10]=n=>x.value=!1)})]),t("div",ie,[t("p",null,[o[26]||(o[26]=t("strong",null,"From:",-1)),V(" "+u(p.value.direction==="received"?p.value.phone:"You"),1)]),t("p",null,[o[27]||(o[27]=t("strong",null,"To:",-1)),V(" "+u(p.value.direction==="sent"?p.value.phone:"You"),1)]),o[28]||(o[28]=t("p",null,[t("strong",null,"Message:")],-1)),t("div",de,u(p.value.description),1),t("p",re,u(p.value.date)+" "+u(p.value.time),1)]),t("div",ue,[t("button",{type:"button",class:"btn btn-secondary",onClick:o[11]||(o[11]=n=>x.value=!1)},"Close")])])])])):f("",!0)])]))}},pe=P(me,[["__scopeId","data-v-341c0466"]]),ve={class:"lead-management container mt-4"},be={class:"d-flex justify-content-between align-items-center mb-3"},ce={class:"badge bg-primary me-2"},fe={class:"badge bg-secondary me-2"},ge={class:"badge bg-info"},ke={class:"nav nav-tabs mb-3"},ye={class:"nav-item"},$e={class:"nav-item"},xe={class:"nav-item"},Ce={__name:"UpdateLeadPage",setup(T){const b=k("timeline"),s={first_name:"John",stage:"Prospect",source:"Website",customTag:"VIP"};return(x,p)=>(r(),m("div",ve,[t("div",be,[t("div",null,[t("h2",null,u(s.first_name),1),t("span",ce,u(s.stage),1),t("span",fe,u(s.source),1),t("span",ge,u(s.customTag),1)]),p[3]||(p[3]=t("div",null,[t("button",{class:"btn btn-danger me-2"},[t("i",{class:"fas fa-microphone"})]),t("button",{class:"btn btn-danger"},[t("i",{class:"fas fa-times"})])],-1))]),t("ul",ke,[t("li",ye,[t("a",{class:$(["nav-link",{active:b.value==="timeline"}]),onClick:p[0]||(p[0]=e=>b.value="timeline")},"Timeline",2)]),t("li",$e,[t("a",{class:$(["nav-link",{active:b.value==="profile"}]),onClick:p[1]||(p[1]=e=>b.value="profile")},"Profile",2)]),t("li",xe,[t("a",{class:$(["nav-link",{active:b.value==="analytics"}]),onClick:p[2]||(p[2]=e=>b.value="analytics")},"Analytics",2)])]),b.value==="timeline"?(r(),S(pe,{key:0})):f("",!0),b.value==="profile"?(r(),S(Ct,{key:1})):f("",!0),b.value==="analytics"?(r(),S(Y,{key:2})):f("",!0)]))}};export{Ce as default};
