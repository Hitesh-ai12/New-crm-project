import{a as sr}from"./axios-CdtiCRuU.js";import"./bootstrap.min-KxrJAQL6.js";import{_ as Qj,o as ht,m as bt,k as Y,M as qs,bp as Zl,F as Dr,$ as da,n as or,l as Mn,Q as mi,bq as WK,aI as Xj,br as Jj,a0 as no,g as jK,r as Wt,b as cB,w as lB,S as GK,Z as Ap,f as dK,bj as qK,j as Yj,Y as KK,h as mK,aw as uB,e as dB,bs as YK}from"./main-Bq4JhgZc.js";import{S as ua}from"./sweetalert2.all-CaToW68q.js";import{d as XK}from"./vuedraggable.umd-CvshKaY8.js";const JK={name:"WhatsappChatModal",props:{visible:Boolean,selectedLeads:Array},data(){return{searchQuery:"",selectedChat:null,newMessage:"",showLeadModal:!1,leads:[],selectedLeadIds:[],chats:[]}},computed:{filteredChats(){return this.chats.filter(fn=>(fn.name||"").toLowerCase().includes(this.searchQuery.toLowerCase()))}},watch:{visible(fn){var I;fn&&((I=this.selectedLeads)!=null&&I.length)&&this.addSelectedLeadsToChats()}},methods:{scrollToBottom(){this.$nextTick(()=>{const fn=this.$refs.chatContainer;fn&&(fn.scrollTop=fn.scrollHeight)})},addSelectedLeadsToChats(){this.selectedLeads.forEach(fn=>{this.chats.find(Co=>Co.id===fn.id)||this.chats.push({id:fn.id,name:`${fn.first_name} ${fn.last_name}`,phone:fn.phone,lastMessage:"New chat started.",time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),messages:[]})}),!this.selectedChat&&this.selectedLeads.length>0&&(this.selectedChat=this.chats.find(fn=>fn.id===this.selectedLeads[0].id))},async selectChat(fn){const I=localStorage.getItem("auth_token");try{const Co=await sr.get(`/api/whatsapp/messages/${fn.id}`,{headers:{Authorization:`Bearer ${I}`}});this.selectedChat={...fn,messages:Co.data},this.scrollToBottom()}catch(Co){console.error("‚ùå Failed to load messages for chat:",Co)}},async sendMessage(){if(!this.newMessage.trim()||!this.selectedChat)return;const fn=localStorage.getItem("auth_token"),I=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});try{const Co=await sr.post("/api/whatsapp/send",{message:this.newMessage,recipients:[this.selectedChat.phone]},{headers:{Authorization:`Bearer ${fn}`}});if(Co.data&&Co.data.status==="success"){this.selectedChat.messages||this.$set(this.selectedChat,"messages",[]),this.selectedChat.messages.push({from:"me",text:this.newMessage,time:I});const Z=this.chats.find(Fn=>Fn.id===this.selectedChat.id);Z&&(Z.lastMessage=this.newMessage,Z.time=I),this.selectedChat={...this.selectedChat},this.newMessage="",this.scrollToBottom(),this.$nextTick(()=>{const Fn=this.$el.querySelector(".chat-input input");Fn&&Fn.focus()})}else console.error("üö® Message sending failed:",Co.data)}catch(Co){console.error("Failed to send message:",Co)}},async fetchMyLeads(){try{const fn=localStorage.getItem("auth_token"),I=await sr.get("/api/leads",{headers:{Authorization:`Bearer ${fn}`}});this.leads=I.data,this.showLeadModal=!0}catch(fn){console.error("Failed to fetch leads:",fn)}},useSelectedLeads(){const fn=this.leads.filter(Co=>this.selectedLeadIds.includes(Co.id));fn.forEach(Co=>{if(!this.chats.find(Fn=>Fn.id===Co.id)){const Fn={id:Co.id,name:`${Co.first_name||""} ${Co.last_name||""}`.trim(),phone:Co.phone,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),lastMessage:"New chat started.",messages:[]};this.chats.push(Fn)}});const I=fn[0];I&&(this.selectedChat=this.chats.find(Co=>Co.id===I.id)),this.showLeadModal=!1,this.selectedLeadIds=[]},async fetchChats(){try{const fn=localStorage.getItem("auth_token"),I=await sr.get("/api/whatsapp/chats",{headers:{Authorization:`Bearer ${fn}`}});this.chats=I.data}catch(fn){console.error("Failed to load chats:",fn)}}},mounted(){this.fetchChats()}},QK={class:"modal-box whatsapp-chat-modal"},eY={class:"modal-header border-bottom d-flex justify-content-between align-items-center p-3"},tY={class:"whatsapp-ui d-flex",style:{"block-size":"80vh"}},nY={class:"chat-sidebar border-end",style:{"inline-size":"300px"}},oY={class:"p-3 border-bottom d-flex justify-content-between align-items-center"},sY={class:"chat-list overflow-auto"},rY=["onClick"],aY={class:"flex-grow-1"},iY={class:"d-flex justify-content-between"},cY={class:"text-muted text-truncate"},lY={key:0,class:"chat-area d-flex flex-column flex-grow-1"},uY={class:"p-3 border-bottom bg-white d-flex align-items-center"},dY={class:"flex-grow-1"},mY={class:"chat-messages flex-grow-1 overflow-auto p-3 bg-light",ref:"chatContainer"},fY={class:"text-end small mt-1"},gY={class:"chat-input p-3 bg-white border-top d-flex align-items-center"},hY={key:1,class:"chat-area flex-grow-1 d-flex justify-content-center align-items-center text-muted"},pY={class:"modal-dialog modal-lg"},bY={class:"modal-content"},vY={class:"modal-header"},yY={class:"modal-body"},CY={key:0},SY={key:1},xY=["id","value"],wY=["for"],EY={class:"modal-footer"};function kY(fn,I,Co,Z,Fn,ns){return Co.visible?(ht(),bt("div",{key:0,class:"modal-backdrop",onClick:I[10]||(I[10]=Xj(ln=>fn.$emit("close"),["self"]))},[Y("div",QK,[Y("div",eY,[I[11]||(I[11]=Y("h5",{class:"m-0"},"WhatsApp Chat",-1)),Y("button",{class:"btn-close",onClick:I[0]||(I[0]=ln=>fn.$emit("close"))})]),Y("div",tY,[Y("div",nY,[Y("div",oY,[qs(Y("input",{class:"form-control me-2",placeholder:"Search or start a new chat","onUpdate:modelValue":I[1]||(I[1]=ln=>Fn.searchQuery=ln)},null,512),[[Zl,Fn.searchQuery]]),Y("button",{class:"btn btn-sm btn-outline-primary",onClick:I[2]||(I[2]=(...ln)=>ns.fetchMyLeads&&ns.fetchMyLeads(...ln))},"Leads")]),Y("div",sY,[(ht(!0),bt(Dr,null,da(ns.filteredChats,ln=>(ht(),bt("div",{key:ln.id,class:or(["chat-item d-flex p-3 border-bottom align-items-start",{"bg-light":Fn.selectedChat&&Fn.selectedChat.id===ln.id}]),onClick:Tt=>ns.selectChat(ln)},[Y("div",aY,[Y("div",iY,[Y("strong",null,Mn(ln.name),1),Y("small",null,Mn(ln.time),1)]),Y("div",cY,Mn(ln.lastMessage),1)])],10,rY))),128))])]),Fn.selectedChat?(ht(),bt("div",lY,[Y("div",uY,[Y("div",dY,[Y("strong",null,Mn(Fn.selectedChat.name),1),I[12]||(I[12]=Y("div",{class:"text-muted small"},"online",-1))])]),Y("div",mY,[(ht(!0),bt(Dr,null,da(Fn.selectedChat.messages,(ln,Tt)=>(ht(),bt("div",{key:Tt,class:"mb-3"},[Y("div",{class:or(["p-2 rounded",ln.from==="me"?"bg-success text-white ms-auto":"bg-white me-auto"]),style:{"max-inline-size":"75%"}},[mi(Mn(ln.text)+" ",1),Y("div",fY,Mn(ln.time),1)],2)]))),128))],512),Y("div",gY,[qs(Y("input",{"onUpdate:modelValue":I[3]||(I[3]=ln=>Fn.newMessage=ln),onKeyup:I[4]||(I[4]=WK((...ln)=>ns.sendMessage&&ns.sendMessage(...ln),["enter"])),class:"form-control me-2",placeholder:"Type a message"},null,544),[[Zl,Fn.newMessage]]),Y("button",{class:"btn btn-primary",onClick:I[5]||(I[5]=(...ln)=>ns.sendMessage&&ns.sendMessage(...ln))},I[13]||(I[13]=[Y("i",{class:"bi bi-send-fill"},null,-1)]))])])):(ht(),bt("div",hY,I[14]||(I[14]=[Y("p",null,"Select a chat to begin",-1)])))]),Fn.showLeadModal?(ht(),bt("div",{key:0,class:"modal d-block bg-dark bg-opacity-50",onClick:I[9]||(I[9]=Xj(ln=>Fn.showLeadModal=!1,["self"]))},[Y("div",pY,[Y("div",bY,[Y("div",vY,[I[15]||(I[15]=Y("h5",{class:"modal-title"},"Select Leads",-1)),Y("button",{type:"button",class:"btn-close",onClick:I[6]||(I[6]=ln=>Fn.showLeadModal=!1)})]),Y("div",yY,[Fn.leads.length===0?(ht(),bt("div",CY,"No leads found.")):(ht(),bt("div",SY,[(ht(!0),bt(Dr,null,da(Fn.leads,ln=>(ht(),bt("div",{key:ln.id,class:"form-check mb-2"},[qs(Y("input",{class:"form-check-input",type:"checkbox",id:"lead-"+ln.id,"onUpdate:modelValue":I[7]||(I[7]=Tt=>Fn.selectedLeadIds=Tt),value:ln.id},null,8,xY),[[Jj,Fn.selectedLeadIds]]),Y("label",{class:"form-check-label",for:"lead-"+ln.id},Mn(ln.first_name)+" "+Mn(ln.last_name)+" - "+Mn(ln.phone),9,wY)]))),128))]))]),Y("div",EY,[Y("button",{class:"btn btn-primary",onClick:I[8]||(I[8]=(...ln)=>ns.useSelectedLeads&&ns.useSelectedLeads(...ln))},"Use Selected Leads")])])])])):no("",!0)])])):no("",!0)}const TY=Qj(JK,[["render",kY],["__scopeId","data-v-d80a54d8"]]),_Y={},AY={class:"loader"};function OY(fn,I){return ht(),bt("div",AY)}const DY=Qj(_Y,[["render",OY],["__scopeId","data-v-060df2f6"]]);var fK={exports:{}};(function(fn){(function(){var I=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},Co=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Z=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},Fn=function(e,n){return ns(function(o,r){return e.eq(n(o),n(r))})},ns=function(e){return{eq:e}},ln=ns(function(e,n){return e===n}),Tt=ln,rr=function(e){return ns(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,i=0;i<r;i++)if(!e.eq(n[i],o[i]))return!1;return!0})},_c=function(e,n){return Fn(rr(e),function(o){return Z(o,n)})},X=function(e){return ns(function(n,o){var r=Object.keys(n),i=Object.keys(o);if(!_c(Tt).eq(r,i))return!1;for(var l=r.length,d=0;d<l;d++){var g=r[d];if(!e.eq(n[g],o[g]))return!1}return!0})},$n=ns(function(e,n){if(e===n)return!0;var o=I(e),r=I(n);return o!==r?!1:Co(o)?e===n:o==="array"?rr($n).eq(e,n):o==="object"?X($n).eq(e,n):!1});const yo=Object.getPrototypeOf,ar=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},pl=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&ar(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},uo=e=>n=>pl(n)===e,Cs=e=>n=>typeof n===e,Zr=e=>n=>e===n,kt=(e,n)=>Pt(e)&&ar(e,n,(o,r)=>yo(o)===r),re=uo("string"),Pt=uo("object"),Aa=e=>kt(e,Object),Qn=uo("array"),ee=Zr(null),$t=Cs("boolean"),mo=Zr(void 0),hn=e=>e==null,Oe=e=>!hn(e),jt=Cs("function"),No=Cs("number"),gn=(e,n)=>{if(Qn(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},ct=()=>{},S=(e,n)=>(...o)=>e(n.apply(null,o)),Ua=(e,n)=>o=>e(n(o)),qe=e=>()=>e,ds=e=>e,Hi=(e,n)=>e===n;function Qe(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const jn=e=>n=>!e(n),ms=e=>()=>{throw new Error(e)},Hn=e=>e(),fi=e=>{e()},ke=qe(!1),ze=qe(!0);class O{constructor(n,o){this.tag=n,this.value=o}static some(n){return new O(!0,n)}static none(){return O.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?O.some(n(this.value)):O.none()}bind(n){return this.tag?n(this.value):O.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:O.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Oe(n)?O.some(n):O.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}O.singletonNone=new O(!1);const gi=Array.prototype.slice,Zn=Array.prototype.indexOf,Jo=Array.prototype.push,Qo=(e,n)=>Zn.call(e,n),Fu=(e,n)=>{const o=Qo(e,n);return o===-1?O.none():O.some(o)},_t=(e,n)=>Qo(e,n)>-1,Vn=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return!0}return!1},At=(e,n)=>{const o=e.length,r=new Array(o);for(let i=0;i<o;i++){const l=e[i];r[i]=n(l,i)}return r},pe=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];n(i,o)}},hi=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},ma=(e,n)=>{const o=[],r=[];for(let i=0,l=e.length;i<l;i++){const d=e[i];(n(d,i)?o:r).push(d)}return{pass:o,fail:r}},et=(e,n)=>{const o=[];for(let r=0,i=e.length;r<i;r++){const l=e[r];n(l,r)&&o.push(l)}return o},Ac=(e,n,o)=>(hi(e,(r,i)=>{o=n(o,r,i)}),o),Ss=(e,n,o)=>(pe(e,(r,i)=>{o=n(o,r,i)}),o),Wl=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++){const l=e[r];if(n(l,r))return O.some(l);if(o(l,r))break}return O.none()},ko=(e,n)=>Wl(e,n,ke),Ps=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return O.some(o)}return O.none()},fa=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!Qn(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);Jo.apply(n,e[o])}return n},Ls=(e,n)=>fa(At(e,n)),nn=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const i=e[o];if(n(i,o)!==!0)return!1}return!0},eo=e=>{const n=gi.call(e,0);return n.reverse(),n},bl=(e,n)=>et(e,o=>!_t(n,o)),jo=(e,n)=>{const o={};for(let r=0,i=e.length;r<i;r++){const l=e[r];o[String(l)]=n(l,r)}return o},Gn=(e,n)=>{const o=gi.call(e,0);return o.sort(n),o},Za=(e,n)=>n>=0&&n<e.length?O.some(e[n]):O.none(),Go=e=>Za(e,0),pr=e=>Za(e,e.length-1),xs=jt(Array.from)?Array.from:e=>gi.call(e),pi=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return O.none()},Vi=(e,n)=>{const o=[],r=jt(n)?i=>Vn(o,l=>n(l,i)):i=>_t(o,i);for(let i=0,l=e.length;i<l;i++){const d=e[i];r(d)||o.push(d)}return o},ws=Object.keys,jl=Object.hasOwnProperty,Ze=(e,n)=>{const o=ws(e);for(let r=0,i=o.length;r<i;r++){const l=o[r],d=e[l];n(d,l)}},Yt=(e,n)=>ir(e,(o,r)=>({k:r,v:n(o,r)})),ir=(e,n)=>{const o={};return Ze(e,(r,i)=>{const l=n(r,i);o[l.k]=l.v}),o},Gl=e=>(n,o)=>{e[o]=n},ao=(e,n,o,r)=>{Ze(e,(i,l)=>{(n(i,l)?o:r)(i,l)})},Ve=(e,n)=>{const o={},r={};return ao(e,n,Gl(o),Gl(r)),{t:o,f:r}},Wr=(e,n)=>{const o={};return ao(e,n,Gl(o),ct),o},$u=(e,n)=>{const o=[];return Ze(e,(r,i)=>{o.push(n(r,i))}),o},Hu=e=>$u(e,ds),oo=(e,n)=>xt(e,n)?O.from(e[n]):O.none(),xt=(e,n)=>jl.call(e,n),vl=(e,n)=>xt(e,n)&&e[n]!==void 0&&e[n]!==null,Pm=(e,n,o=$n)=>X(o).eq(e,n),cr={generate:e=>{if(!Qn(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return pe(e,(r,i)=>{const l=ws(r);if(l.length!==1)throw new Error("one and only one name per case");const d=l[0],g=r[d];if(o[d]!==void 0)throw new Error("duplicate key detected:"+d);if(d==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Qn(g))throw new Error("case arguments must be an array");n.push(d),o[d]=(...h)=>{const y=h.length;if(y!==g.length)throw new Error("Wrong number of arguments to case "+d+". Expected "+g.length+" ("+g+"), got "+y);return{fold:(...T)=>{if(T.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+T.length);return T[i].apply(null,h)},match:T=>{const _=ws(T);if(n.length!==_.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+_.join(","));if(!nn(n,P=>_t(_,P)))throw new Error("Not all branches were specified when using match. Specified: "+_.join(", ")+`
Required: `+n.join(", "));return T[d].apply(null,h)},log:T=>{console.log(T,{constructors:n,constructor:d,params:h})}}}}),o}},To=e=>{let n=e;return{get:()=>n,set:i=>{n=i}}},Vu=e=>{const n=l=>l(e),o=qe(e),r=()=>i,i={tag:!0,inner:e,fold:(l,d)=>d(e),isValue:ze,isError:ke,map:l=>Ks.value(l(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:l=>{l(e)},toOptional:()=>O.some(e)};return i},Ft=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,i)=>r(e),isValue:ke,isError:ze,map:n,mapError:r=>Ks.error(r(e)),bind:n,exists:ke,forall:ze,getOr:ds,or:ds,getOrThunk:Hn,orThunk:Hn,getOrDie:ms(String(e)),each:ct,toOptional:O.none};return o},Ks={value:Vu,error:Ft,fromOption:(e,n)=>e.fold(()=>Ft(n),Vu)},zu=typeof window<"u"?window:Function("return this;")(),Lm=(e,n,o)=>Math.min(Math.max(e,n),o),Eg=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let ga=0;const ha=e=>{const o=new Date().getTime(),r=Math.floor(Eg()*1e9);return ga++,e+"_"+r+ga+String(o)},Ld=(e,n)=>n,yl=(e,n)=>Aa(e)&&Aa(n)?Es(e,n):n,zi=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const i=n[r];for(const l in i)xt(i,l)&&(o[l]=e(o[l],i[l]))}return o},Es=zi(yl),Oc=zi(Ld),pa=(e,n,o=Hi)=>e.exists(r=>o(r,n)),Ue=(e,n,o=Hi)=>os(e,n,o).getOr(e.isNone()&&n.isNone()),Uu=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},os=(e,n,o)=>e.isSome()&&n.isSome()?O.some(o(e.getOrDie(),n.getOrDie())):O.none(),Im=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?O.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):O.none(),Nn=(e,n)=>e?O.some(n):O.none(),Id=(e,n)=>{let o=n??zu;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},Gr=(e,n)=>{const o=e.split(".");return Id(o,n)};cr.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Fm=e=>{const n=[],o=[];return pe(e,r=>{r.fold(i=>{n.push(i)},i=>{o.push(i)})}),{errors:n,values:o}},Ui=e=>{const n=To(O.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(O.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:g=>{o(),n.set(O.some(g))}}},$m=e=>{const n=To(O.none()),o=()=>n.get().each(g=>clearInterval(g));return{clear:()=>{o(),n.set(O.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:g=>{o(),n.set(O.some(setInterval(g,e)))}}},br=()=>{const e=Ui(ct);return{...e,on:o=>e.get().each(o)}},Fd=(e,n)=>e.substring(n),ql=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,vr=(e,n)=>es(e,n)?Fd(e,n.length):e,fs=(e,n,o=0,r)=>{const i=e.indexOf(n,o);return i!==-1?mo(r)?!0:i+n.length<=r:!1},es=(e,n)=>ql(e,n,0),Kl=(e,n)=>ql(e,n,e.length-n.length),Cl=e=>n=>n.replace(e,""),bi=Cl(/^\s+|\s+$/g),kg=Cl(/^\s+/g),Wa=Cl(/\s+$/g),dn=e=>e.length>0,Dc=e=>!dn(e),Yl=(e,n)=>n<=0?"":new Array(n+1).join(e),Zi=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?O.none():O.some(o)},yr=(e,n)=>{let o=null;return{cancel:()=>{ee(o)||(clearTimeout(o),o=null)},throttle:(...l)=>{ee(o)&&(o=setTimeout(()=>{o=null,e.apply(null,l)},n))}}},_o=(e,n)=>{let o=null;const r=()=>{ee(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...l)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,l)},n)}}},io=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},Cr="\uFEFF",to="¬†",qo=e=>e===Cr,Mc=e=>e.replace(/\uFEFF/g,""),vi=e=>{const n={};return pe(e,o=>{n[o]={}}),ws(n)},ja=e=>e.length!==void 0,Sl=Array.isArray,Zu=e=>{if(Sl(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},ba=(e,n,o)=>{if(!e)return!1;if(o=o||e,ja(e)){for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(xt(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},xl=(e,n)=>{const o=[];return ba(e,(r,i)=>{o.push(n(r,i,e))}),o},lr=(e,n)=>{const o=[];return ba(e,(r,i)=>{(!n||n(r,i,e))&&o.push(r)}),o},wl=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},Nc=(e,n,o,r)=>{let i=mo(o)?e[0]:o;for(let l=0;l<e.length;l++)i=n.call(r,i,e[l],l);return i},Wu=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e))return r;return-1},Is=e=>e[e.length-1],$d=(e,n,o,r)=>{const i=e.isiOS()&&/ipad/i.test(o)===!0,l=e.isiOS()&&!i,d=e.isiOS()||e.isAndroid(),g=d||r("(pointer:coarse)"),h=i||!l&&d&&r("(min-device-width:768px)"),y=l||d&&!h,w=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,T=!y&&!h&&!w;return{isiPad:qe(i),isiPhone:qe(l),isTablet:qe(h),isPhone:qe(y),isTouch:qe(g),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:qe(w),isDesktop:qe(T)}},yi=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},he=(e,n)=>{const o=yi(e,n);if(!o)return{major:0,minor:0};const r=i=>Number(n.replace(o,"$"+i));return So(r(1),r(2))},ne=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?wn():he(e,o)},wn=()=>So(0,0),So=(e,n)=>({major:e,minor:n}),M={nu:So,detect:ne,unknown:wn},$=(e,n)=>pi(n.brands,o=>{const r=o.brand.toLowerCase();return ko(e,i=>{var l;return r===((l=i.brand)===null||l===void 0?void 0:l.toLowerCase())}).map(i=>({current:i.name,version:M.nu(parseInt(o.version,10),0)}))}),J=(e,n)=>{const o=String(n).toLowerCase();return ko(e,r=>r.search(o))},Ce=(e,n)=>J(e,n).map(o=>{const r=M.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Le=(e,n)=>J(e,n).map(o=>{const r=M.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Xe=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Xt=e=>n=>fs(n,e),Fo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>fs(e,"edge/")&&fs(e,"chrome")&&fs(e,"safari")&&fs(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Xe],search:e=>fs(e,"chrome")&&!fs(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>fs(e,"msie")||fs(e,"trident")},{name:"Opera",versionRegexes:[Xe,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Xt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Xt("firefox")},{name:"Safari",versionRegexes:[Xe,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(fs(e,"safari")||fs(e,"mobile/"))&&fs(e,"applewebkit")}],Rn=[{name:"Windows",search:Xt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>fs(e,"iphone")||fs(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Xt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Xt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Xt("linux"),versionRegexes:[]},{name:"Solaris",search:Xt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Xt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Xt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],$o={browsers:qe(Fo),oses:qe(Rn)},Bo="Edge",Wi="Chromium",ji="IE",Hd="Opera",cb="Firefox",ju="Safari",lb=()=>Tg({current:void 0,version:M.unknown()}),Tg=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isEdge:r(Bo),isChromium:r(Wi),isIE:r(ji),isOpera:r(Hd),isFirefox:r(cb),isSafari:r(ju)}},Op={unknown:lb,nu:Tg,edge:qe(Bo),chromium:qe(Wi),ie:qe(ji),opera:qe(Hd),firefox:qe(cb),safari:qe(ju)},Bn="Windows",Hm="iOS",Vd="Android",ub="Linux",Dp="macOS",db="Solaris",Mp="FreeBSD",_g="ChromeOS",Vm=()=>zd({current:void 0,version:M.unknown()}),zd=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isWindows:r(Bn),isiOS:r(Hm),isAndroid:r(Vd),isMacOS:r(Dp),isLinux:r(ub),isSolaris:r(db),isFreeBSD:r(Mp),isChromeOS:r(_g)}},Ag={unknown:Vm,nu:zd,windows:qe(Bn),ios:qe(Hm),android:qe(Vd),linux:qe(ub),macos:qe(Dp),solaris:qe(db),freebsd:qe(Mp),chromeos:qe(_g)},GC={detect:(e,n,o)=>{const r=$o.browsers(),i=$o.oses(),l=n.bind(h=>$(r,h)).orThunk(()=>Ce(r,e)).fold(Op.unknown,Op.nu),d=Le(i,e).fold(Ag.unknown,Ag.nu),g=$d(d,l,e,o);return{browser:l,os:d,deviceType:g}}},Xl=e=>window.matchMedia(e).matches;let Rc=io(()=>GC.detect(window.navigator.userAgent,O.from(window.navigator.userAgentData),Xl));const Mr=()=>Rc(),zm=(e,n)=>Gr(e,n),mb=(e,n)=>{const o=zm(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},Np=Object.getPrototypeOf,fb=e=>mb("HTMLElement",e),Jl=e=>{const n=Gr("ownerDocument.defaultView",e);return Pt(e)&&(fb(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Np(e).constructor.name))},Rp=window.navigator.userAgent,Og=Mr(),Ci=Og.browser,Bc=Og.os,Ql=Og.deviceType,gb=Rp.indexOf("Windows Phone")!==-1,yn={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ci.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ci.isIE(),windowsPhone:gb,browser:{current:Ci.current,version:Ci.version,isChromium:Ci.isChromium,isEdge:Ci.isEdge,isFirefox:Ci.isFirefox,isIE:Ci.isIE,isOpera:Ci.isOpera,isSafari:Ci.isSafari},os:{current:Bc.current,version:Bc.version,isAndroid:Bc.isAndroid,isChromeOS:Bc.isChromeOS,isFreeBSD:Bc.isFreeBSD,isiOS:Bc.isiOS,isLinux:Bc.isLinux,isMacOS:Bc.isMacOS,isSolaris:Bc.isSolaris,isWindows:Bc.isWindows},deviceType:{isDesktop:Ql.isDesktop,isiPad:Ql.isiPad,isiPhone:Ql.isiPhone,isPhone:Ql.isPhone,isTablet:Ql.isTablet,isTouch:Ql.isTouch,isWebView:Ql.isWebView}},hb=/^\s*|\s*$/g,Bp=e=>hn(e)?"":(""+e).replace(hb,""),pb=(e,n)=>n?n==="array"&&Sl(e)?!0:typeof e===n:e!==void 0,bb=(e,n,o={})=>{const r=re(e)?e.split(n||","):e||[];let i=r.length;for(;i--;)o[r[i]]={};return o},vb=xt,yb=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const i in r)if(xt(r,i)){const l=r[i];l!==void 0&&(e[i]=l)}}return e},Pp=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),ba(e,(i,l)=>n.call(r,i,l,o)===!1?!1:(Pp(i,n,o,r),!0)))},Pe={trim:Bp,isArray:Sl,is:pb,toArray:Zu,makeMap:bb,each:ba,map:xl,grep:lr,inArray:wl,hasOwn:vb,extend:yb,walk:Pp,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,i=o.length;r<i&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>Qn(e)?e:e===""?[]:xl(e.split(n||","),Bp),_addCacheSuffix:e=>{const n=yn.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},KC=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const i="HTML does not have a single root node";throw console.error(i,e),new Error(i)}return va(r.childNodes[0])},YC=(e,n)=>{const r=(n||document).createElement(e);return va(r)},XC=(e,n)=>{const r=(n||document).createTextNode(e);return va(r)},va=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},U={fromHtml:KC,fromTag:YC,fromText:XC,fromDom:va,fromPoint:(e,n,o)=>O.from(e.dom.elementFromPoint(n,o)).map(va)},QC=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},Dg=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Sb=(e,n,o)=>{const r=e.document.createRange();return QC(r,n),Dg(r,o),r},Gi=(e,n,o,r,i)=>{const l=e.document.createRange();return l.setStart(n.dom,o),l.setEnd(r.dom,i),l},Um=cr.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Zm=(e,n,o)=>n(U.fromDom(o.startContainer),o.startOffset,U.fromDom(o.endContainer),o.endOffset),xb=(e,n)=>n.match({domRange:o=>({ltr:qe(o),rtl:O.none}),relative:(o,r)=>({ltr:io(()=>Sb(e,o,r)),rtl:io(()=>O.some(Sb(e,r,o)))}),exact:(o,r,i,l)=>({ltr:io(()=>Gi(e,o,r,i,l)),rtl:io(()=>O.some(Gi(e,i,l,o,r)))})}),Oa=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(i=>i.collapsed===!1).map(i=>Um.rtl(U.fromDom(i.endContainer),i.endOffset,U.fromDom(i.startContainer),i.startOffset)).getOrThunk(()=>Zm(e,Um.ltr,o)):Zm(e,Um.ltr,o)},Gu=(e,n)=>{const o=xb(e,n);return Oa(e,o)};Um.ltr,Um.rtl;const Mg=8,Ng=9,Rg=11,Nr=1,qu=3,Ga=(e,n)=>{const o=e.dom;if(o.nodeType!==Nr)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},qi=e=>e.nodeType!==Nr&&e.nodeType!==Ng&&e.nodeType!==Rg||e.childElementCount===0,qr=(e,n)=>{const o=n===void 0?document:n.dom;return qi(o)?[]:At(o.querySelectorAll(e),U.fromDom)},Ud=(e,n)=>{const o=n===void 0?document:n.dom;return qi(o)?O.none():O.from(o.querySelector(e)).map(U.fromDom)},sn=(e,n)=>e.dom===n.dom,Ki=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Bg=(e,n)=>{const o=[],r=l=>(o.push(l),n(l));let i=n(e);do i=i.bind(r);while(i.isSome());return o},En=e=>e.dom.nodeName.toLowerCase(),Rr=e=>e.dom.nodeType,Pc=e=>n=>Rr(n)===e,Zd=e=>Rr(e)===Mg||En(e)==="#comment",eu=e=>ya(e)&&Jl(e.dom),ya=Pc(Nr),Kr=Pc(qu),eS=Pc(Ng),Wm=Pc(Rg),Fs=e=>n=>ya(n)&&En(n)===e,Ku=e=>U.fromDom(e.dom.ownerDocument),tu=e=>eS(e)?e:Ku(e),Pg=e=>U.fromDom(tu(e).dom.documentElement),nu=e=>U.fromDom(tu(e).dom.defaultView),Lc=e=>O.from(e.dom.parentNode).map(U.fromDom),jm=e=>O.from(e.dom.parentElement).map(U.fromDom),wb=(e,n)=>{const o=jt(n)?n:ke;let r=e.dom;const i=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const l=r.parentNode,d=U.fromDom(l);if(i.push(d),o(d)===!0)break;r=l}return i},Lp=e=>{const n=o=>et(o,r=>!sn(e,r));return Lc(e).map(ur).map(n).getOr([])},ou=e=>O.from(e.dom.previousSibling).map(U.fromDom),su=e=>O.from(e.dom.nextSibling).map(U.fromDom),Ip=e=>eo(Bg(e,ou)),Eb=e=>Bg(e,su),ur=e=>At(e.dom.childNodes,U.fromDom),ru=(e,n)=>{const o=e.dom.childNodes;return O.from(o[n]).map(U.fromDom)},Ys=e=>ru(e,0),Gm=e=>ru(e,e.dom.childNodes.length-1),Lg=e=>e.dom.childNodes.length,Ig=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return U.fromDom(n)},ss=e=>Wm(e)&&Oe(e.dom.host),Yi=e=>U.fromDom(e.dom.getRootNode()),au=e=>ss(e)?e:Ig(tu(e)),Ic=e=>ss(e)?e:U.fromDom(tu(e).dom.body),Sr=e=>{const n=Yi(e);return ss(n)?O.some(n):O.none()},qm=e=>U.fromDom(e.dom.host),kb=e=>{if(Oe(e.target)){const n=U.fromDom(e.target);if(ya(n)&&tS(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Go(o)}}return O.from(e.target)},tS=e=>Oe(e.dom.shadowRoot),Da=(e,n,o,r,i,l,d)=>({target:e,x:n,y:o,stop:r,prevent:i,kill:l,raw:d}),nS=e=>{const n=U.fromDom(kb(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),i=S(r,o);return Da(n,e.clientX,e.clientY,o,r,i,e)},Fg=(e,n)=>o=>{e(o)&&n(nS(o))},Tb=(e,n,o,r,i)=>{const l=Fg(o,r);return e.dom.addEventListener(n,l,i),{unbind:Qe(_b,e,n,l,i)}},Ot=(e,n,o,r)=>Tb(e,n,o,r,!1),_b=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},ks=ze,Ts=(e,n,o)=>Ot(e,n,ks,o),Fp=()=>U.fromDom(document),Ao=(e,n=!1)=>e.dom.focus({preventScroll:n}),Ab=e=>{const n=Yi(e).dom;return e.dom===n.activeElement},Km=(e=Fp())=>O.from(e.dom.activeElement).map(U.fromDom),Fc=e=>Km(Yi(e)).filter(n=>e.dom.contains(n.dom)),Yr=(e,n)=>{Lc(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},El=(e,n)=>{su(e).fold(()=>{Lc(e).each(i=>{rs(i,n)})},r=>{Yr(r,n)})},Ym=(e,n)=>{Ys(e).fold(()=>{rs(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},rs=(e,n)=>{e.dom.appendChild(n.dom)},$g=(e,n)=>{Yr(e,n),rs(n,e)},Wd=(e,n)=>{pe(n,(o,r)=>{const i=r===0?e:n[r-1];El(i,o)})},iu=(e,n)=>{pe(n,o=>{rs(e,o)})},$p=(e,n,o)=>{if(re(o)||$t(o)||No(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},$s=(e,n,o)=>{$p(e.dom,n,o)},qa=(e,n)=>{const o=e.dom;Ze(n,(r,i)=>{$p(o,i,r)})},Ko=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Xr=(e,n)=>O.from(Ko(e,n)),jd=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},_s=(e,n)=>{e.dom.removeAttribute(n)},Ob=e=>{const n=e.dom.attributes;return n==null||n.length===0},Rt=e=>Ss(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Si=e=>{e.dom.textContent="",pe(ur(e),n=>{v(n)})},v=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},E=e=>{const n=ur(e);n.length>0&&Wd(e,n),v(e)},D=(e,n)=>U.fromDom(e.dom.cloneNode(n)),H=e=>D(e,!1),G=e=>D(e,!0),_e=(e,n)=>{const o=U.fromTag(n),r=Rt(e);return qa(o,r),o},Ie=(e,n)=>{const o=_e(e,n);El(e,o);const r=ur(e);return iu(o,r),v(e),o},Vt=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,ur(U.fromDom(r))},Ht=e=>At(e,U.fromDom),vt=e=>e.dom.innerHTML,on=(e,n)=>{const r=Ku(e).dom,i=U.fromDom(r.createDocumentFragment()),l=Vt(n,r);iu(i,l),Si(e),rs(e,i)},xo=e=>{const n=U.fromTag("div"),o=U.fromDom(e.dom.cloneNode(!0));return rs(n,o),vt(n)},xi=e=>e.style!==void 0&&jt(e.style.getPropertyValue),xr=e=>{const n=Kr(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Sr(U.fromDom(n)).fold(()=>o.body.contains(n),Ua(xr,qm))},oS=(e,n,o)=>{if(!re(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);xi(e)&&e.style.setProperty(n,o)},Db=(e,n)=>{xi(e)&&e.style.removeProperty(n)},Xk=(e,n,o)=>{const r=e.dom;oS(r,n,o)},Mb=(e,n)=>{const o=e.dom;Ze(n,(r,i)=>{oS(o,i,r)})},As=(e,n)=>{const o=e.dom,i=window.getComputedStyle(o).getPropertyValue(n);return i===""&&!xr(e)?Hg(o,n):i},Hg=(e,n)=>xi(e)?e.style.getPropertyValue(n):"",Nb=(e,n)=>{const o=e.dom,r=Hg(o,n);return O.from(r).filter(i=>i.length>0)},sS=e=>{const n={},o=e.dom;if(xi(o))for(let r=0;r<o.style.length;r++){const i=o.style.item(r);n[i]=o.style[i]}return n},rS=(e,n)=>{const o=e.dom;Db(o,n),pa(Xr(e,"style").map(bi),"")&&_s(e,"style")},Ho=e=>e.dom.offsetWidth,Rb=((e,n)=>{const o=(g,h)=>{if(!No(h)&&!h.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+h);const y=g.dom;xi(y)&&(y.style[e]=h+"px")},r=g=>{const h=n(g);if(h<=0||h===null){const y=As(g,e);return parseFloat(y)||0}return h},i=r,l=(g,h)=>Ss(h,(y,w)=>{const T=As(g,w),_=T===void 0?0:parseInt(T,10);return isNaN(_)?y:y+_},0);return{set:o,get:r,getOuter:i,aggregate:l,max:(g,h,y)=>{const w=l(g,y);return h>w?h-w:0}}})("height",e=>{const n=e.dom;return xr(e)?n.getBoundingClientRect().height:n.offsetHeight}),$c=e=>Rb.get(e),Hp=(e,n)=>({left:e,top:n,translate:(r,i)=>Hp(e+r,n+i)}),Br=Hp,aS=e=>{const n=e.getBoundingClientRect();return Br(n.left,n.top)},iS=(e,n)=>e!==void 0?e:n!==void 0?n:0,mB=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,i=n.documentElement;if(o===e.dom)return Br(o.offsetLeft,o.offsetTop);const l=iS(r==null?void 0:r.pageYOffset,i.scrollTop),d=iS(r==null?void 0:r.pageXOffset,i.scrollLeft),g=iS(i.clientTop,o.clientTop),h=iS(i.clientLeft,o.clientLeft);return cS(e).translate(d-h,l-g)},cS=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?Br(r.offsetLeft,r.offsetTop):xr(e)?aS(n):Br(0,0)},Vp=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Br(o,r)},Jk=(e,n,o)=>{const i=(o!==void 0?o.dom:document).defaultView;i&&i.scrollTo(e,n)},Bb=(e,n)=>{Mr().browser.isSafari()&&jt(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},fB=(e,n)=>{const o=l=>{if(!e(l))throw new Error("Can only get "+n+" value of a "+n+" node");return r(l).getOr("")},r=l=>e(l)?O.from(l.dom.nodeValue):O.none();return{get:o,getOption:r,set:(l,d)=>{if(!e(l))throw new Error("Can only set raw "+n+" value of a "+n+" node");l.dom.nodeValue=d}}},lS=(e,n)=>{const r=document.createDocumentFragment();return pe(e,i=>{r.appendChild(i.dom)}),U.fromDom(r)},Pb=fB(Kr,"text"),Vg=e=>Pb.get(e),Qk=e=>Pb.getOption(e),eT=(e,n)=>Pb.set(e,n),Lb=(e,n)=>{const o=Ko(e,n);return o===void 0||o===""?[]:o.split(" ")},gB=(e,n,o)=>{const i=Lb(e,n).concat([o]);return $s(e,n,i.join(" ")),!0},hB=(e,n,o)=>{const r=et(Lb(e,n),i=>i!==o);return r.length>0?$s(e,n,r.join(" ")):_s(e,n),!1};var Hc=(e,n,o,r,i)=>e(o,r)?O.some(o):jt(i)&&i(o)?O.none():n(o,r,i);const Yu=(e,n,o)=>{let r=e.dom;const i=jt(o)?o:ke;for(;r.parentNode;){r=r.parentNode;const l=U.fromDom(r);if(n(l))return O.some(l);if(i(l))break}return O.none()},cu=(e,n,o)=>Hc((i,l)=>l(i),Yu,e,n,o),qn=(e,n)=>{const o=e.dom;return o.parentNode?lu(U.fromDom(o.parentNode),r=>!sn(e,r)&&n(r)):O.none()},lu=(e,n)=>{const o=i=>n(U.fromDom(i));return ko(e.dom.childNodes,o).map(U.fromDom)},uS=(e,n)=>{const o=r=>{for(let i=0;i<r.childNodes.length;i++){const l=U.fromDom(r.childNodes[i]);if(n(l))return O.some(l);const d=o(r.childNodes[i]);if(d.isSome())return d}return O.none()};return o(e.dom)},zp=(e,n,o)=>Yu(e,r=>Ga(r,n),o),Xu=(e,n)=>Ud(n,e),Gd=(e,n,o)=>Hc((i,l)=>Ga(i,l),zp,e,n,o),zg=e=>e.dom.classList!==void 0,dS=e=>Lb(e,"class"),tT=(e,n)=>gB(e,"class",n),Vo=(e,n)=>hB(e,"class",n),nT=(e,n)=>_t(dS(e),n)?Vo(e,n):tT(e,n),fo=(e,n)=>{zg(e)?e.dom.classList.add(n):tT(e,n)},oT=e=>{(zg(e)?e.dom.classList:dS(e)).length===0&&_s(e,"class")},wr=(e,n)=>{zg(e)?e.dom.classList.remove(n):Vo(e,n),oT(e)},Xm=(e,n)=>{const o=zg(e)?e.dom.classList.toggle(n):nT(e,n);return oT(e),o},wi=(e,n)=>zg(e)&&e.dom.classList.contains(n),pB=(e,n)=>{pe(n,o=>{fo(e,o)})},bB=(e,n)=>{pe(n,o=>{wr(e,o)})},vB=e=>Gd(e,"[contenteditable]"),Ju=(e,n=!1)=>xr(e)?e.dom.isContentEditable:vB(e).fold(qe(n),o=>yB(o)==="true"),yB=e=>e.dom.contentEditable,Vc=(e,n)=>{e.dom.contentEditable=n?"true":"false"},Jm=(e,n)=>et(ur(e),n),mS=(e,n)=>{let o=[];return pe(ur(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(mS(r,n))}),o},go=(e,n)=>qr(n,e),fS=(e,n,o)=>Yu(e,n,o).isSome(),Up=(e,n)=>qn(e,n).isSome(),Ib=(e,n)=>uS(e,n).isSome(),sT=(e,n,o)=>zp(e,n,o).isSome(),Zp=e=>jt(e)?e:ke,tG=(e,n,o)=>{let r=e.dom;const i=Zp(o);for(;r.parentNode;){r=r.parentNode;const l=U.fromDom(r),d=n(l);if(d.isSome())return d;if(i(l))break}return O.none()},Ug=(e,n,o)=>{const r=n(e),i=Zp(o);return r.orThunk(()=>i(e)?O.none():tG(e,n,i))},gS=e=>Qk(e).filter(n=>n.trim().length!==0||n.indexOf(to)>-1).isSome(),CB=e=>eu(e)&&Ko(e,"contenteditable")==="false",SB=["img","br"],xB=e=>gS(e)||_t(SB,En(e))||CB(e),wB=e=>uS(e,xB),rT={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},Zg=cr.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),EB=(e,n,o,r)=>e.fold(n,o,r),kB=e=>e.fold(ds,ds,ds),TB=Zg.before,_B=Zg.on,AB=Zg.after,Qu={before:TB,on:_B,after:AB,cata:EB,getStart:kB},Fb=cr.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Wp=e=>Fb.exact(e.start,e.soffset,e.finish,e.foffset),OB=e=>e.match({domRange:n=>U.fromDom(n.startContainer),relative:(n,o)=>Qu.getStart(n),exact:(n,o,r,i)=>n}),aT=Fb.domRange,DB=Fb.relative,MB=Fb.exact,iT=e=>{const n=OB(e);return nu(n)},NB=rT.create,Wg={domRange:aT,relative:DB,exact:MB,exactFromRange:Wp,getWin:iT,range:NB},RB=(e,n,o)=>{var r;return O.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(i=>{if(i.offsetNode===null)return O.none();const l=e.createRange();return l.setStart(i.offsetNode,i.offset),l.collapse(),O.some(l)})},BB=(e,n,o)=>{var r;return O.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},$b=(e,n,o)=>e.caretPositionFromPoint?RB(e,n,o):e.caretRangeFromPoint?BB(e,n,o):O.none(),PB=(e,n,o)=>{const r=e.document;return $b(r,n,o).map(i=>rT.create(U.fromDom(i.startContainer),i.startOffset,U.fromDom(i.endContainer),i.endOffset))},Hb=(e,n)=>{const o=En(e);return o==="input"?Qu.after(e):_t(["br","img"],o)?n===0?Qu.before(e):Qu.after(e):Qu.on(e,n)},cT=(e,n)=>{const o=e.fold(Qu.before,Hb,Qu.after),r=n.fold(Qu.before,Hb,Qu.after);return Wg.relative(o,r)},Vb=(e,n,o,r)=>{const i=Hb(e,n),l=Hb(o,r);return Wg.relative(i,l)},lT=e=>e.match({domRange:n=>{const o=U.fromDom(n.startContainer),r=U.fromDom(n.endContainer);return Vb(o,n.startOffset,r,n.endOffset)},relative:cT,exact:Vb}),LB=e=>{const n=Wg.getWin(e).dom,o=(i,l,d,g)=>Gi(n,i,l,d,g),r=lT(e);return Gu(n,r).match({ltr:o,rtl:o})},oG=(e,n,o)=>PB(e,n,o),sG=e=>{const n=e===void 0?window:e;return Mr().browser.isFirefox()?O.none():O.from(n.visualViewport)},uT=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),jp=e=>{const n=e===void 0?window:e,o=n.document,r=Vp(U.fromDom(o));return sG(n).fold(()=>{const i=n.document.documentElement,l=i.clientWidth,d=i.clientHeight;return uT(r.left,r.top,l,d)},i=>uT(Math.max(i.pageLeft,r.left),Math.max(i.pageTop,r.top),i.width,i.height))};class dr{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,i){if(n){if(!i&&n[o])return n[o];if(n!==this.rootNode){let l=n[r];if(l)return l;for(let d=n.parentNode;d&&d!==this.rootNode;d=d.parentNode)if(l=d[r],l)return l}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let l=r.lastChild;l;l=l.lastChild)if(!l.lastChild)return l}return r}const i=n.parentNode;if(i&&i!==this.rootNode)return i}}}const IB=/^[ \t\r\n]*$/,as=e=>IB.test(e),mr=e=>{for(const n of e)if(!qo(n))return!1;return!0},Qm=e=>" \f	\v".indexOf(e)!==-1,zb=e=>e===`
`||e==="\r",FB=(e,n)=>n<e.length&&n>=0?zb(e[n]):!1,Pr=(e,n=4,o=!0,r=!0)=>{const i=Yl(" ",n),l=e.replace(/\t/g,i);return Ss(l,(g,h)=>Qm(h)||h===to?g.pcIsSpace||g.str===""&&o||g.str.length===l.length-1&&r||FB(l,g.str.length+1)?{pcIsSpace:!1,str:g.str+to}:{pcIsSpace:!0,str:g.str+" "}:{pcIsSpace:zb(h),str:g.str+h},{pcIsSpace:!1,str:""}).str},qd=e=>n=>!!n&&n.nodeType===e,jg=e=>!!e&&!Object.getPrototypeOf(e),ot=qd(1),uu=e=>ot(e)&&eu(U.fromDom(e)),$B=e=>ot(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Jr=e=>{const n=e.toLowerCase();return o=>Oe(o)&&o.nodeName.toLowerCase()===n},Xi=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return _t(n,r)}return!1}},Ub=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(ot(r)){const i=r.ownerDocument.defaultView;if(i)for(let l=0;l<o.length;l++){const d=i.getComputedStyle(r,null);if((d?d.getPropertyValue(e):null)===o[l])return!0}}return!1}},HB=e=>n=>ot(n)&&n.hasAttribute(e),ef=e=>ot(e)&&e.hasAttribute("data-mce-bogus"),VB=e=>ot(e)&&e.getAttribute("data-mce-bogus")==="all",du=e=>ot(e)&&e.tagName==="TABLE",hS=e=>n=>!!(uu(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),Zb=Xi(["textarea","input"]),Re=qd(3),rG=qd(4),gs=qd(7),mu=qd(8),Gp=qd(9),tf=qd(11),zo=Jr("br"),dT=Jr("img"),zB=Jr("a"),zc=hS("true"),wo=hS("false"),Kd=e=>uu(e)&&e.isContentEditable&&Oe(e.parentElement)&&!e.parentElement.isContentEditable,qp=Xi(["td","th"]),Uc=Xi(["td","th","caption"]),Ji=Xi(["video","audio","object","embed"]),Wb=Jr("li"),hs=Jr("details"),jb=Jr("summary"),Gb={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},mT=(e,n,o)=>{const r=U.fromDom(n),i=U.fromDom(e),l=o.getWhitespaceElements();return fS(i,g=>xt(l,En(g)),Qe(sn,r))},UB=e=>ot(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),kl=(e,n)=>ot(e)&&xt(n.getNonEmptyElements(),e.nodeName),qb=HB("data-mce-bookmark"),Kb=e=>jm(U.fromDom(e)).exists(n=>!Ju(n)),pS=(e,n,o)=>as(e.data)&&!mT(e,n,o),bS=(e,n,o,r)=>Re(e)&&!pS(e,n,o)&&(!r.includeZwsp||!mr(e.data)),vS=(e,n,o,r)=>jt(r.isContent)&&r.isContent(n)||kl(n,e)||qb(n)||UB(n)||bS(n,o,e,r)||wo(n)||zc(n)&&Kb(n),fu=(e,n,o)=>{const r={...Gb,...o};if(r.checkRootAsContent&&vS(e,n,n,r))return!1;let i=n.firstChild,l=0;if(!i)return!0;const d=new dr(i,n);do{if(r.skipBogus&&ot(i)){const g=i.getAttribute("data-mce-bogus");if(g){i=d.next(g==="all");continue}}if(mu(i)){i=d.next(!0);continue}if(zo(i)){l++,i=d.next();continue}if(vS(e,i,n,r))return!1;i=d.next()}while(i);return l<=1},Qr=(e,n,o)=>fu(e,n.dom,{checkRootAsContent:!0,...o}),Yb=(e,n,o)=>vS(e,n,n,{includeZwsp:Gb.includeZwsp,...o}),fT=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},Yd=e=>fT(e)!=="html",gT=e=>Yd(e.nodeName),ZB=e=>fT(e.nodeName),hT=["svg","math"],WB=()=>{const e=br(),n=()=>e.get().map(ZB).getOr("html");return{track:i=>(gT(i)?e.set(i):e.get().exists(l=>!l.contains(i))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},Kp="data-mce-block",jB=e=>et(ws(e),n=>!/[A-Z]/.test(n)),yS=e=>At(jB(e),n=>{const o=CSS.escape(n);return`${o}:`+At(hT,r=>`not(${r} ${o})`).join(":")}).join(","),pT=(e,n)=>Oe(n.querySelector(e))?(n.setAttribute(Kp,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Kp),!1),bT=(e,n)=>{const o=yS(e.getTransparentElements()),r=yS(e.getBlockElements());return et(n.querySelectorAll(o),i=>pT(r,i))},CS=(e,n,o)=>{var r;const i=o?"lastChild":"firstChild";for(let l=n[i];l;l=l[i])if(fu(e,l,{checkRootAsContent:!0})){(r=l.parentNode)===null||r===void 0||r.removeChild(l);return}},GB=(e,n,o)=>{const r=document.createRange(),i=n.parentNode;if(i){r.setStartBefore(n),r.setEndBefore(o);const l=r.extractContents();CS(e,l,!0),r.setStartAfter(o),r.setEndAfter(n);const d=r.extractContents();CS(e,d,!1),fu(e,l,{checkRootAsContent:!0})||i.insertBefore(l,n),fu(e,o,{checkRootAsContent:!0})||i.insertBefore(o,n),fu(e,d,{checkRootAsContent:!0})||i.insertBefore(d,n),i.removeChild(n)}},Ei=(e,n,o)=>{const r=e.getBlockElements(),i=U.fromDom(n),l=g=>En(g)in r,d=g=>sn(g,i);pe(Ht(o),g=>{Yu(g,l,d).each(h=>{const y=Jm(g,w=>l(w)&&!e.isValidChild(En(h),En(w)));if(y.length>0){const w=jm(h);pe(y,T=>{Yu(T,l,d).each(_=>{GB(e,_.dom,T.dom)})}),w.each(T=>bT(e,T.dom))}})})},wt=(e,n,o)=>{pe([...o,...Zc(e,n)?[n]:[]],r=>pe(go(U.fromDom(r),r.nodeName.toLowerCase()),i=>{KB(e,i.dom)&&E(i)}))},gu=(e,n)=>{const o=bT(e,n);Ei(e,n,o),wt(e,n,o)},Xb=(e,n)=>{if(xS(e,n)){const o=yS(e.getBlockElements());pT(o,n)}},qB=(e,n,o)=>{const r=l=>sn(l,U.fromDom(n)),i=wb(U.fromDom(o),r);Za(i,i.length-2).filter(ya).fold(()=>gu(e,n),l=>gu(e,l.dom))},SS=e=>e.hasAttribute(Kp),Gg=(e,n)=>xt(e.getTransparentElements(),n),xS=(e,n)=>ot(n)&&Gg(e,n.nodeName),Zc=(e,n)=>xS(e,n)&&SS(n),KB=(e,n)=>xS(e,n)&&!SS(n),nf=(e,n)=>n.type===1&&Gg(e,n.name)&&re(n.attr(Kp)),vT=Mr().browser,yT=e=>ko(e,ya),Po=e=>vT.isFirefox()&&En(e)==="table"?yT(ur(e)).filter(n=>En(n)==="caption").bind(n=>yT(Eb(n)).map(o=>{const r=o.dom.offsetTop,i=n.dom.offsetTop,l=n.dom.offsetHeight;return r<=i?-l:0})).getOr(0):0,Qi=(e,n)=>e.children&&_t(e.children,n),Ma=(e,n,o)=>{let r=0,i=0;const l=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&As(U.fromDom(e),"position")==="static"){const g=n.getBoundingClientRect();return r=g.left+(l.documentElement.scrollLeft||e.scrollLeft)-l.documentElement.clientLeft,i=g.top+(l.documentElement.scrollTop||e.scrollTop)-l.documentElement.clientTop,{x:r,y:i}}let d=n;for(;d&&d!==o&&d.nodeType&&!Qi(d,o);){const g=d;r+=g.offsetLeft||0,i+=g.offsetTop||0,d=g.offsetParent}for(d=n.parentNode;d&&d!==o&&d.nodeType&&!Qi(d,o);)r-=d.scrollLeft||0,i-=d.scrollTop||0,d=d.parentNode;i+=Po(U.fromDom(n))}return{x:r,y:i}},of=(e,n={})=>{let o=0;const r={},i=U.fromDom(e),l=tu(i),d=W=>{n.referrerPolicy=W},g=W=>{n.contentCssCors=W},h=W=>{rs(au(i),W)},y=W=>{const Q=au(i);Xu(Q,"#"+W).each(v)},w=W=>oo(r,W).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),T=W=>new Promise((Q,te)=>{let ae;const Se=Pe._addCacheSuffix(W),De=w(Se);r[Se]=De,De.count++;const Ke=(Ge,lt)=>{pe(Ge,fi),De.status=lt,De.passed=[],De.failed=[],ae&&(ae.onload=null,ae.onerror=null,ae=null)},ge=()=>Ke(De.passed,2),le=()=>Ke(De.failed,3);if(Q&&De.passed.push(Q),te&&De.failed.push(te),De.status===1)return;if(De.status===2){ge();return}if(De.status===3){le();return}De.status=1;const Ee=U.fromTag("link",l.dom);qa(Ee,{rel:"stylesheet",type:"text/css",id:De.id}),n.contentCssCors&&$s(Ee,"crossOrigin","anonymous"),n.referrerPolicy&&$s(Ee,"referrerpolicy",n.referrerPolicy),ae=Ee.dom,ae.onload=ge,ae.onerror=le,h(Ee),$s(Ee,"href",Se)}),_=(W,Q)=>{const te=w(W);r[W]=te,te.count++;const ae=U.fromTag("style",l.dom);qa(ae,{rel:"stylesheet",type:"text/css",id:te.id,"data-mce-key":W}),ae.dom.innerHTML=Q,h(ae)},N=W=>Promise.allSettled(At(W,te=>T(te).then(qe(te)))).then(te=>{const ae=ma(te,Se=>Se.status==="fulfilled");return ae.fail.length>0?Promise.reject(At(ae.fail,Se=>Se.reason)):At(ae.pass,Se=>Se.value)}),P=W=>{const Q=Pe._addCacheSuffix(W);oo(r,Q).each(te=>{--te.count===0&&(delete r[Q],y(te.id))})};return{load:T,loadRawCss:_,loadAll:N,unload:P,unloadRawCss:W=>{oo(r,W).each(Q=>{--Q.count===0&&(delete r[W],y(Q.id))})},unloadAll:W=>{pe(W,Q=>{P(Q)})},_setReferrerPolicy:d,_setContentCssCors:g}},wS=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const l=Yi(o).dom;return O.from(e.get(l)).getOrThunk(()=>{const d=of(l,r);return e.set(l,d),d})}}})(),Er=e=>e.nodeName.toLowerCase()==="span",ea=(e,n)=>Oe(e)&&(Yb(n,e)||n.isInline(e.nodeName.toLowerCase())),ES=(e,n,o)=>{const r=new dr(e,n).prev(!1),i=new dr(e,n).next(!1),l=mo(r)||ea(r,o),d=mo(i)||ea(i,o);return l&&d},we=e=>Er(e)&&e.getAttribute("data-mce-type")==="bookmark",ki=(e,n,o)=>Re(e)&&e.data.length>0&&ES(e,n,o),CT=e=>ot(e)?e.childNodes.length>0:!1,Hs=e=>tf(e)||Gp(e),Ti=(e,n,o,r)=>{var i;const l=r||n;if(ot(n)&&we(n))return n;const d=n.childNodes;for(let g=d.length-1;g>=0;g--)Ti(e,d[g],o,l);if(ot(n)){const g=n.childNodes;g.length===1&&we(g[0])&&((i=n.parentNode)===null||i===void 0||i.insertBefore(g[0],n))}return!Hs(n)&&!Yb(o,n)&&!CT(n)&&!ki(n,l,o)&&e.remove(n),n},Wc=Pe.makeMap,Jb=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,jc=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ST=/[<>&\"\']/g,Ya=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,On={128:"‚Ç¨",130:"‚Äö",131:"∆í",132:"‚Äû",133:"‚Ä¶",134:"‚Ä†",135:"‚Ä°",136:"ÀÜ",137:"‚Ä∞",138:"≈†",139:"‚Äπ",140:"≈í",142:"≈Ω",145:"‚Äò",146:"‚Äô",147:"‚Äú",148:"‚Äù",149:"‚Ä¢",150:"‚Äì",151:"‚Äî",152:"Àú",153:"‚Ñ¢",154:"≈°",155:"‚Ä∫",156:"≈ì",158:"≈æ",159:"≈∏"},Na={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Yp={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},is=e=>{const n=U.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},kS=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let i=0;i<r.length;i+=2){const l=String.fromCharCode(parseInt(r[i],n));if(!Na[l]){const d="&"+r[i+1]+";";o[l]=d,o[d]=l}}return o}else return},Tl=kS("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),TS=(e,n)=>e.replace(n?Jb:jc,o=>Na[o]||o),Xa=e=>(""+e).replace(ST,n=>Na[n]||n),xT=(e,n)=>e.replace(n?Jb:jc,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Na[o]||"&#"+o.charCodeAt(0)+";"),oe=(e,n,o)=>{const r=o||Tl;return e.replace(n?Jb:jc,i=>Na[i]||r[i]||i)},so={encodeRaw:TS,encodeAllRaw:Xa,encodeNumeric:xT,encodeNamed:oe,getEncodeFunc:(e,n)=>{const o=kS(n)||Tl,r=(d,g)=>d.replace(g?Jb:jc,h=>Na[h]!==void 0?Na[h]:o[h]!==void 0?o[h]:h.length>1?"&#"+((h.charCodeAt(0)-55296)*1024+(h.charCodeAt(1)-56320)+65536)+";":"&#"+h.charCodeAt(0)+";"),i=(d,g)=>oe(d,g,o),l=Wc(e.replace(/\+/g,","));return l.named&&l.numeric?r:l.named?n?i:oe:l.numeric?xT:TS},decode:e=>e.replace(Ya,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):On[o]||String.fromCharCode(o)):Yp[n]||Tl[n]||is(n))},Uo=(e,n)=>(e=Pe.trim(e),e?e.split(n||" "):[]),kr=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),co=e=>Pt(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",YB=e=>{const n=o=>Qn(o)?At(o,n):co(o)?new RegExp(o.source,o.flags):Pt(o)?Yt(o,n):o;return n(e)},Xd=e=>{const n=/^(~)?(.+)$/;return Ls(Uo(e,","),o=>{const r=n.exec(o);if(r){const l=r[1]==="~"?"span":"div",d=r[2];return[{cloneName:l,name:d}]}else return[]})},Qb=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),ET=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},_S=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=ET(e),i=l=>Object.freeze(l.split(" "));return Object.freeze({blockContent:i(n),phrasingContent:i(o),flowContent:i(r)})},XB={html4:io(()=>_S("html4")),html5:io(()=>_S("html5")),"html5-strict":io(()=>_S("html5-strict"))},kT=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:i}=XB[e]();return n==="blocks"?O.some(o):n==="phrasing"?O.some(r):n==="flow"?O.some(i):O.none()},sf=e=>{const n=Qb(e),{phrasingContent:o,flowContent:r}=ET(e),i={},l=(h,y,w)=>{i[h]={attributes:jo(y,qe({})),attributesOrder:y,children:jo(w,qe({}))}},d=(h,y="",w="")=>{const T=Uo(w),_=Uo(h);let N=_.length;const P=[...n,...Uo(y)];for(;N--;)l(_[N],P.slice(),T)},g=(h,y)=>{const w=Uo(h),T=Uo(y);let _=w.length;for(;_--;){const N=i[w[_]];for(let P=0,B=T.length;P<B;P++)N.attributes[T[P]]={},N.attributesOrder.push(T[P])}};return e!=="html5-strict"&&(pe(Uo("acronym applet basefont big font strike tt"),w=>{d(w,"",o)}),pe(Uo("center dir isindex noframes"),w=>{d(w,"",r)})),d("html","manifest","head body"),d("head","","base command link meta noscript script style title"),d("title hr noscript br"),d("base","href target"),d("link","href rel media hreflang type sizes hreflang"),d("meta","name http-equiv content charset"),d("style","media type scoped"),d("script","src async defer type charset"),d("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),d("dd div","",r),d("address dt caption","",e==="html4"?o:r),d("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),d("blockquote","cite",r),d("ol","reversed start type","li"),d("ul","","li"),d("li","value",r),d("dl","","dt dd"),d("a","href target rel media hreflang type",e==="html4"?o:r),d("q","cite",o),d("ins del","cite datetime",r),d("img","src sizes srcset alt usemap ismap width height"),d("iframe","src name width height",r),d("embed","src type width height"),d("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),d("param","name value"),d("map","name",[r,"area"].join(" ")),d("area","alt coords shape href target rel media hreflang type"),d("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),d("colgroup","span","col"),d("col","span"),d("tbody thead tfoot","","tr"),d("tr","","td th"),d("td","colspan rowspan headers",r),d("th","colspan rowspan headers scope abbr",r),d("form","accept-charset action autocomplete enctype method name novalidate target",r),d("fieldset","disabled form name",[r,"legend"].join(" ")),d("label","form for",o),d("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),d("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),d("select","disabled form multiple name required size","option optgroup"),d("optgroup","disabled label","option"),d("option","disabled label selected value"),d("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),d("menu","type label",[r,"li"].join(" ")),d("noscript","",r),e!=="html4"&&(d("wbr"),d("ruby","",[o,"rt rp"].join(" ")),d("figcaption","",r),d("mark rt rp bdi","",o),d("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),d("canvas","width height",r),d("data","value",o),d("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),d("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),d("picture","","img source"),d("source","src srcset type media sizes"),d("track","kind src srclang label default"),d("datalist","",[o,"option"].join(" ")),d("article section nav aside main header footer","",r),d("hgroup","","h1 h2 h3 h4 h5 h6"),d("figure","",[r,"figcaption"].join(" ")),d("time","datetime",o),d("dialog","open",r),d("command","type label icon disabled checked radiogroup command"),d("output","for form name",o),d("progress","value max",o),d("meter","value min max low high optimum",o),d("details","open",[r,"summary"].join(" ")),d("keygen","autofocus challenge disabled form keytype name"),l("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(g("script","language xml:space"),g("style","xml:space"),g("object","declare classid code codebase codetype archive standby align border hspace vspace"),g("embed","align name hspace vspace"),g("param","valuetype type"),g("a","charset name rev shape coords"),g("br","clear"),g("applet","codebase archive code object alt name width height align hspace vspace"),g("img","name longdesc align border hspace vspace"),g("iframe","longdesc frameborder marginwidth marginheight scrolling align"),g("font basefont","size color face"),g("input","usemap align"),g("select"),g("textarea"),g("h1 h2 h3 h4 h5 h6 div p legend caption","align"),g("ul","type compact"),g("li","type"),g("ol dl menu dir","compact"),g("pre","width xml:space"),g("hr","align noshade size width"),g("isindex","prompt"),g("table","summary width frame rules cellspacing cellpadding align bgcolor"),g("col","width align char charoff valign"),g("colgroup","width align char charoff valign"),g("thead","align char charoff valign"),g("tr","align char charoff valign bgcolor"),g("th","axis align char charoff valign nowrap bgcolor width height"),g("form","accept"),g("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),g("tfoot","align char charoff valign"),g("tbody","align char charoff valign"),g("area","nohref"),g("body","background bgcolor text link vlink alink")),e!=="html4"&&(g("input button select textarea","autofocus"),g("input textarea","placeholder"),g("a","download"),g("link script img","crossorigin"),g("img","loading"),g("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&pe([i.video,i.audio],h=>{delete h.children.audio,delete h.children.video}),pe(Uo("a form meter progress dfn"),h=>{i[h]&&delete i[h].children[h]}),delete i.caption.children.table,delete i.script,i},qg=e=>e==="-"?"remove":"add",AS=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return O.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},JB=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Ls(Uo(e,","),o=>{const r=n.exec(o);if(r){const i=r[1],l=i?qg(i):"replace",d=r[2],g=Ls(Uo(r[3],"|"),h=>AS(h).toArray());return[{operation:l,name:d,validChildren:g}]}else return[]})},QB=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:i,attributesOrder:l}=n;return pe(Uo(e,"|"),d=>{const g=o.exec(d);if(g){const h={},y=g[1],w=g[2].replace(/[\\:]:/g,":"),T=g[3],_=g[4];if(y==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(w),h.required=!0),y==="-"){delete i[w],l.splice(Pe.inArray(l,w),1);return}if(T&&(T==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:w,value:_}),h.defaultValue=_):T==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:w,value:_}),h.forcedValue=_):T==="<"&&(h.validValues=Pe.makeMap(_,"?"))),r.test(w)){const N=h;n.attributePatterns=n.attributePatterns||[],N.pattern=kr(w),n.attributePatterns.push(N)}else i[w]||l.push(w),i[w]=h}})},Tr=(e,n)=>{Ze(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},ed=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Ls(Uo(n,","),r=>{const i=o.exec(r);if(i){const l=i[1],d=i[2],g=i[3],h=i[4],y=i[5],w={attributes:{},attributesOrder:[]};if(e.each(T=>Tr(T,w)),l==="#"?w.paddEmpty=!0:l==="-"&&(w.removeEmpty=!0),h==="!"&&(w.removeEmptyAttrs=!0),y&&QB(y,w),g&&(w.outputName=d),d==="@")if(e.isNone())e=O.some(w);else return[];return[g?{name:d,element:w,aliasName:g}:{name:d,element:w}]}else return[]})},Jd={},_l=Pe.makeMap,qc=Pe.each,Ja=Pe.extend,Xp=Pe.explode,Jp=(e,n={})=>{const o=_l(e," ",_l(e.toUpperCase()," "));return Ja(o,n)},ev=e=>Jp("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Kc=(e,n)=>{if(e){const o={};return re(e)&&(e={"*":e}),qc(e,(r,i)=>{o[i]=o[i.toUpperCase()]=n==="map"?_l(r,/[, ]/):Xp(r,/[, ]/)}),o}else return},Lr=(e={})=>{var n;const o={},r={};let i=[];const l={},d={},g=(ft,mn,Zo)=>{const vs=e[ft];if(vs)return _l(vs,/[, ]/,_l(vs.toUpperCase(),/[, ]/));{let Gs=Jd[ft];return Gs||(Gs=Jp(mn,Zo),Jd[ft]=Gs),Gs}},h=(n=e.schema)!==null&&n!==void 0?n:"html5",y=sf(h);e.verify_html===!1&&(e.valid_elements="*[*]");const w=Kc(e.valid_styles),T=Kc(e.invalid_styles,"map"),_=Kc(e.valid_classes,"map"),N=g("whitespace_elements","pre script noscript style textarea video audio iframe object code"),P=g("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),B=g("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),F=g("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),W="td th iframe video audio object script code",Q=g("non_empty_elements",W+" pre svg textarea summary",B),te=g("move_caret_before_on_enter_elements",W+" table",B),ae="h1 h2 h3 h4 h5 h6",Se=g("text_block_elements",ae+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),De=g("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",Se),Ke=g("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),ge=g("transparent_elements","a ins del canvas map"),le=g("wrap_block_elements","pre "+ae);qc("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),ft=>{d[ft]=new RegExp("</"+ft+"[^>]*>","gi")});const Ee=ft=>{const mn=O.from(o["@"]),Zo=/[*?+]/;pe(ed(mn,ft??""),({name:vs,element:Gs,aliasName:ys})=>{if(ys&&(o[ys]=Gs),Zo.test(vs)){const Do=Gs;Do.pattern=kr(vs),i.push(Do)}else o[vs]=Gs})},Ge=ft=>{i=[],pe(ws(o),mn=>{delete o[mn]}),Ee(ft)},lt=(ft,mn)=>{var Zo,vs;delete Jd.text_block_elements,delete Jd.block_elements;const Gs=mn.extends?!zr(mn.extends):!1,ys=mn.extends;if(r[ft]=ys?r[ys]:{},l[ft]=ys??ft,Q[ft.toUpperCase()]={},Q[ft]={},Gs||(De[ft.toUpperCase()]={},De[ft]={}),ys&&!o[ft]&&o[ys]){const Do=YB(o[ys]);delete Do.removeEmptyAttrs,delete Do.removeEmpty,o[ft]=Do}else o[ft]={attributesOrder:[],attributes:{}};if(Qn(mn.attributes)){const Do=_a=>{Mo.attributesOrder.push(_a),Mo.attributes[_a]={}},Mo=(Zo=o[ft])!==null&&Zo!==void 0?Zo:{};delete Mo.attributesDefault,delete Mo.attributesForced,delete Mo.attributePatterns,delete Mo.attributesRequired,Mo.attributesOrder=[],Mo.attributes={},pe(mn.attributes,_a=>{const ml=Qb(h);AS(_a).each(({preset:Pu,name:Vl})=>{Pu?Vl==="global"&&pe(ml,Do):Do(Vl)})}),o[ft]=Mo}if($t(mn.padEmpty)){const Do=(vs=o[ft])!==null&&vs!==void 0?vs:{};Do.paddEmpty=mn.padEmpty,o[ft]=Do}if(Qn(mn.children)){const Do={},Mo=ml=>{Do[ml]={}},_a=ml=>{kT(h,ml).each(Pu=>{pe(Pu,Mo)})};pe(mn.children,ml=>{AS(ml).each(({preset:Pu,name:Vl})=>{Pu?_a(Vl):Mo(Vl)})}),r[ft]=Do}ys&&Ze(r,(Do,Mo)=>{Do[ys]&&(r[Mo]=Do=Ja({},r[Mo]),Do[ft]=Do[ys])})},Gt=ft=>{pe(Xd(ft??""),({name:mn,cloneName:Zo})=>{lt(mn,{extends:Zo})})},Kt=ft=>{Pt(ft)?Ze(ft,(mn,Zo)=>lt(Zo,mn)):re(ft)&&Gt(ft)},_n=ft=>{pe(JB(ft??""),({operation:mn,name:Zo,validChildren:vs})=>{const Gs=mn==="replace"?{"#comment":{}}:r[Zo],ys=Mo=>{mn==="remove"?delete Gs[Mo]:Gs[Mo]={}},Do=Mo=>{kT(h,Mo).each(_a=>{pe(_a,ys)})};pe(vs,({preset:Mo,name:_a})=>{Mo?Do(_a):ys(_a)}),r[Zo]=Gs})},In=ft=>{const mn=o[ft];if(mn)return mn;let Zo=i.length;for(;Zo--;){const vs=i[Zo];if(vs.pattern.test(ft))return vs}},Oo=()=>{e.valid_elements?(Ge(e.valid_elements),qc(y,(ft,mn)=>{r[mn]=ft.children})):(qc(y,(ft,mn)=>{o[mn]={attributes:ft.attributes,attributesOrder:ft.attributesOrder},r[mn]=ft.children}),qc(Uo("strong/b em/i"),ft=>{const mn=Uo(ft,"/");o[mn[1]].outputName=mn[0]}),qc(Ke,(ft,mn)=>{o[mn]&&(e.padd_empty_block_inline_children&&(o[mn].paddInEmptyBlock=!0),o[mn].removeEmpty=!0)}),qc(Uo("ol ul blockquote a table tbody"),ft=>{o[ft]&&(o[ft].removeEmpty=!0)}),qc(Uo("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),ft=>{o[ft]&&(o[ft].paddEmpty=!0)}),qc(Uo("span"),ft=>{o[ft].removeEmptyAttrs=!0})),delete o.svg,Kt(e.custom_elements),_n(e.valid_children),Ee(e.extended_valid_elements),_n("+ol[ul|ol],+ul[ul|ol]"),qc({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(ft,mn)=>{o[mn]&&(o[mn].parentsRequired=Uo(ft))}),e.invalid_elements&&qc(Xp(e.invalid_elements),ft=>{o[ft]&&delete o[ft]}),In("span")||Ee("span[!data-mce-type|*]")},Bs=qe(w),js=qe(T),$e=qe(_),it=qe(F),xn=qe(De),An=qe(Se),ye=qe(Ke),Me=qe(Object.seal(B)),at=qe(P),qt=qe(Q),tn=qe(te),Dn=qe(N),Ec=qe(ge),Bu=qe(le),aa=qe(Object.seal(d)),$a=(ft,mn)=>{const Zo=r[ft.toLowerCase()];return!!(Zo&&Zo[mn.toLowerCase()])},Pi=(ft,mn)=>{const Zo=In(ft);if(Zo)if(mn){if(Zo.attributes[mn])return!0;const vs=Zo.attributePatterns;if(vs){let Gs=vs.length;for(;Gs--;)if(vs[Gs].pattern.test(mn))return!0}}else return!0;return!1},zr=ft=>xt(xn(),ft),Ta=ft=>!es(ft,"#")&&Pi(ft)&&!zr(ft),kc=ft=>xt(Bu(),ft)||Ta(ft),Nm=qe(l);return Oo(),{type:h,children:r,elements:o,getValidStyles:Bs,getValidClasses:$e,getBlockElements:xn,getInvalidStyles:js,getVoidElements:Me,getTextBlockElements:An,getTextInlineElements:ye,getBoolAttrs:it,getElementRule:In,getSelfClosingElements:at,getNonEmptyElements:qt,getMoveCaretBeforeOnEnterElements:tn,getWhitespaceElements:Dn,getTransparentElements:Ec,getSpecialElements:aa,isValidChild:$a,isValid:Pi,isBlock:zr,isInline:Ta,isWrapper:kc,getCustomElements:Nm,addValidElements:Ee,setValidElements:Ge,addCustomElements:Kt,addValidChildren:_n}},TT=e=>({value:Al(e)}),Al=e=>vr(e,"#").toUpperCase(),OS=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},td=e=>{const n=OS(e.red)+OS(e.green)+OS(e.blue);return TT(n)},rf=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Qd=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,eP=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Kg=(e,n,o,r)=>{const i=parseInt(e,10),l=parseInt(n,10),d=parseInt(o,10),g=parseFloat(r);return eP(i,l,d,g)},tP=e=>rf.test(e)?"rgb":Qd.test(e)?"rgba":"other",_T=e=>{const n=rf.exec(e);if(n!==null)return O.some(Kg(n[1],n[2],n[3],"1"));const o=Qd.exec(e);return o!==null?O.some(Kg(o[1],o[2],o[3],o[4])):O.none()},cs=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Qp=e=>_T(e).map(td).map(n=>"#"+n.value).getOr(e),hu=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,l={};let d,g;const h=Cr;n&&(d=n.getValidStyles(),g=n.getInvalidStyles());const y=(`\\" \\' \\; \\: ; : `+h).split(" ");for(let T=0;T<y.length;T++)l[y[T]]=h+T,l[h+T]=y[T];const w={parse:T=>{const _={};let N=!1;const P=e.url_converter,B=e.url_converter_scope||w,F=(ge,le,Ee)=>{const Ge=_[ge+"-top"+le];if(!Ge)return;const lt=_[ge+"-right"+le];if(!lt)return;const Gt=_[ge+"-bottom"+le];if(!Gt)return;const Kt=_[ge+"-left"+le];if(!Kt)return;const _n=[Ge,lt,Gt,Kt];let In=_n.length-1;for(;In--&&_n[In]===_n[In+1];);In>-1&&Ee||(_[ge+le]=In===-1?_n[0]:_n.join(" "),delete _[ge+"-top"+le],delete _[ge+"-right"+le],delete _[ge+"-bottom"+le],delete _[ge+"-left"+le])},W=ge=>{const le=_[ge];if(!le)return;const Ee=le.indexOf(",")>-1?[le]:le.split(" ");let Ge=Ee.length;for(;Ge--;)if(Ee[Ge]!==Ee[0])return!1;return _[ge]=Ee[0],!0},Q=(ge,le,Ee,Ge)=>{W(le)&&W(Ee)&&W(Ge)&&(_[ge]=_[le]+" "+_[Ee]+" "+_[Ge],delete _[le],delete _[Ee],delete _[Ge])},te=ge=>(N=!0,l[ge]),ae=(ge,le)=>(N&&(ge=ge.replace(/\uFEFF[0-9]/g,Ee=>l[Ee])),le||(ge=ge.replace(/\\([\'\";:])/g,"$1")),ge),Se=ge=>String.fromCharCode(parseInt(ge.slice(1),16)),De=ge=>ge.replace(/\\[0-9a-f]+/gi,Se),Ke=(ge,le,Ee,Ge,lt,Gt)=>{if(lt=lt||Gt,lt)return lt=ae(lt),"'"+lt.replace(/\'/g,"\\'")+"'";if(le=ae(le||Ee||Ge||""),!e.allow_script_urls){const Kt=le.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Kt)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Kt))return""}return P&&(le=P.call(B,le,"style")),"url('"+le.replace(/\'/g,"\\'")+"')"};if(T){T=T.replace(/[\u0000-\u001F]/g,""),T=T.replace(/\\[\"\';:\uFEFF]/g,te).replace(/\"[^\"]+\"|\'[^\']+\'/g,le=>le.replace(/[;:]/g,te));let ge;for(;ge=r.exec(T);){r.lastIndex=ge.index+ge[0].length;let le=ge[1].replace(i,"").toLowerCase(),Ee=ge[2].replace(i,"");if(le&&Ee){if(le=De(le),Ee=De(Ee),le.indexOf(h)!==-1||le.indexOf('"')!==-1||!e.allow_script_urls&&(le==="behavior"||/expression\s*\(|\/\*|\*\//.test(Ee)))continue;le==="font-weight"&&Ee==="700"?Ee="bold":(le==="color"||le==="background-color")&&(Ee=Ee.toLowerCase()),tP(Ee)==="rgb"&&_T(Ee).each(Ge=>{Ee=Qp(cs(Ge)).toLowerCase()}),Ee=Ee.replace(o,Ke),_[le]=N?ae(Ee,!0):Ee}}F("border","",!0),F("border","-width"),F("border","-color"),F("border","-style"),F("padding",""),F("margin",""),Q("border","border-width","border-style","border-color"),_.border==="medium none"&&delete _.border,_["border-image"]==="none"&&delete _["border-image"]}return _},serialize:(T,_)=>{let N="";const P=(F,W)=>{const Q=W[F];if(Q)for(let te=0,ae=Q.length;te<ae;te++){const Se=Q[te],De=T[Se];De&&(N+=(N.length>0?" ":"")+Se+": "+De+";")}},B=(F,W)=>{if(!g||!W)return!0;let Q=g["*"];return Q&&Q[F]?!1:(Q=g[W],!(Q&&Q[F]))};return _&&d?(P("*",d),P(_,d)):Ze(T,(F,W)=>{F&&B(W,_)&&(N+=(N.length>0?" ":"")+W+": "+F+";")}),N}};return w},e1={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},DS=e=>e instanceof Event||jt(e.initEvent),af=e=>e.isDefaultPrevented===ze||e.isDefaultPrevented===ke,_i=e=>hn(e.preventDefault)||DS(e),Yg=(e,n)=>{const o=n??{};for(const r in e)xt(e1,r)||(o[r]=e[r]);return Oe(e.composedPath)&&(o.composedPath=()=>e.composedPath()),Oe(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),Oe(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},cf=(e,n,o,r)=>{var i;const l=Yg(n,r);return l.type=e,hn(l.target)&&(l.target=(i=l.srcElement)!==null&&i!==void 0?i:o),_i(n)&&(l.preventDefault=()=>{l.defaultPrevented=!0,l.isDefaultPrevented=ze,jt(n.preventDefault)&&n.preventDefault()},l.stopPropagation=()=>{l.cancelBubble=!0,l.isPropagationStopped=ze,jt(n.stopPropagation)&&n.stopPropagation()},l.stopImmediatePropagation=()=>{l.isImmediatePropagationStopped=ze,l.stopPropagation()},af(l)||(l.isDefaultPrevented=l.defaultPrevented===!0?ze:ke,l.isPropagationStopped=l.cancelBubble===!0?ze:ke,l.isImmediatePropagationStopped=ke)),l},nP="mce-data-",tv=/^(?:mouse|contextmenu)|click/,t1=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},lf=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},oP=e=>Oe(e)&&tv.test(e.type),n1=(e,n)=>{const o=cf(e.type,e,document,n);if(oP(e)&&mo(e.pageX)&&!mo(e.clientX)){const r=o.target.ownerDocument||document,i=r.documentElement,l=r.body,d=o;d.pageX=e.clientX+(i&&i.scrollLeft||l&&l.scrollLeft||0)-(i&&i.clientLeft||l&&l.clientLeft||0),d.pageY=e.clientY+(i&&i.scrollTop||l&&l.scrollTop||0)-(i&&i.clientTop||l&&l.clientTop||0)}return o},MS=(e,n,o)=>{const r=e.document,i={type:"ready"};if(o.domLoaded){n(i);return}const l=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,d=()=>{lf(e,"DOMContentLoaded",d),lf(e,"load",d),o.domLoaded||(o.domLoaded=!0,n(i)),e=null};l()?d():t1(e,"DOMContentLoaded",d),o.domLoaded||t1(e,"load",d)};class Ol{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=nP+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,i){const l=this;let d;const g=window,h=_=>{l.executeHandlers(n1(_||g.event),y)};if(!n||Re(n)||mu(n))return r;let y;n[l.expando]?y=n[l.expando]:(y=l.count++,n[l.expando]=y,l.events[y]={}),i=i||n;const w=o.split(" ");let T=w.length;for(;T--;){let _=w[T],N=h,P=!1,B=!1;if(_==="DOMContentLoaded"&&(_="ready"),l.domLoaded&&_==="ready"&&n.readyState==="complete"){r.call(i,n1({type:_}));continue}!l.hasFocusIn&&(_==="focusin"||_==="focusout")&&(P=!0,B=_==="focusin"?"focus":"blur",N=F=>{const W=n1(F||g.event);W.type=W.type==="focus"?"focusin":"focusout",l.executeHandlers(W,y)}),d=l.events[y][_],d?_==="ready"&&l.domLoaded?r(n1({type:_})):d.push({func:r,scope:i}):(l.events[y][_]=d=[{func:r,scope:i}],d.fakeName=B,d.capture=P,d.nativeHandler=N,_==="ready"?MS(n,N,l):t1(n,B||_,N,P))}return n=d=null,r}unbind(n,o,r){if(!n||Re(n)||mu(n))return this;const i=n[this.expando];if(i){let l=this.events[i];if(o){const d=o.split(" ");let g=d.length;for(;g--;){const h=d[g],y=l[h];if(y){if(r){let w=y.length;for(;w--;)if(y[w].func===r){const T=y.nativeHandler,_=y.fakeName,N=y.capture,P=y.slice(0,w).concat(y.slice(w+1));P.nativeHandler=T,P.fakeName=_,P.capture=N,l[h]=P}}(!r||y.length===0)&&(delete l[h],lf(n,y.fakeName||h,y.nativeHandler,y.capture))}}}else Ze(l,(d,g)=>{lf(n,d.fakeName||g,d.nativeHandler,d.capture)}),l={};for(const d in l)if(xt(l,d))return this;delete this.events[i];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||Re(n)||mu(n))return this;const i=n1({type:o,target:n},r);do{const l=n[this.expando];l&&this.executeHandlers(i,l),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!i.isPropagationStopped());return this}clean(n){if(!n||Re(n)||mu(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],i=r&&r[n.type];if(i)for(let l=0,d=i.length;l<d;l++){const g=i[l];if(g&&g.func.call(g.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Ol.Event=new Ol;const ec=Pe.each,pu=Pe.grep,nd="data-mce-style",AT=Pe.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),em=(e,n,o)=>{hn(o)||o===""?_s(e,n):$s(e,n,o)},nv=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),uf=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,i=e.previousSibling;i;i=i.previousSibling){const l=i.nodeType;n&&Re(i)&&(l===r||!i.data.length)||(o++,r=l)}return o},NS=(e,n)=>{const o=Ko(n,"style"),r=e.serialize(e.parse(o),En(n));em(n,nd,r)},OT=(e,n)=>No(e)?xt(AT,n)?e+"":e+"px":e,ov=(e,n,o)=>{const r=nv(n);hn(o)||o===""?rS(e,r):Xk(e,r,OT(o,r))},RS=(e,n,o)=>{const r=n.keep_values,i={set:(d,g,h)=>{const y=U.fromDom(d);jt(n.url_converter)&&Oe(g)&&(g=n.url_converter.call(n.url_converter_scope||o(),String(g),h,d));const w="data-mce-"+h;em(y,w,g),em(y,h,g)},get:(d,g)=>{const h=U.fromDom(d);return Ko(h,"data-mce-"+g)||Ko(h,g)}},l={style:{set:(d,g)=>{const h=U.fromDom(d);r&&em(h,nd,g),_s(h,"style"),re(g)&&Mb(h,e.parse(g))},get:d=>{const g=U.fromDom(d),h=Ko(g,nd)||Ko(g,"style");return e.serialize(e.parse(h),En(g))}}};return r&&(l.href=l.src=i),l},Ln=(e,n={})=>{const o={},r=window,i={};let l=0;const d=!0,g=!0,h=wS.forElement(U.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),y=[],w=n.schema?n.schema:Lr({}),T=hu({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),_=n.ownEvents?new Ol:Ol.Event,N=w.getBlockElements(),P=se=>re(se)?xt(N,se):ot(se)&&(xt(N,se.nodeName)||Zc(w,se)),B=se=>se&&e&&re(se)?e.getElementById(se):se,F=se=>{const ce=B(se);return Oe(ce)?U.fromDom(ce):null},W=(se,ce,Fe="")=>{let Ne;const Ct=F(se);if(Oe(Ct)&&ya(Ct)){const vn=Cg[ce];vn&&vn.get?Ne=vn.get(Ct.dom,ce):Ne=Ko(Ct,ce)}return Oe(Ne)?Ne:Fe},Q=se=>{const ce=B(se);return hn(ce)?[]:ce.attributes},te=(se,ce,Fe)=>{it(se,Ne=>{if(ot(Ne)){const Ct=U.fromDom(Ne),vn=Fe===""?null:Fe,Wo=Ko(Ct,ce),Ur=Cg[ce];Ur&&Ur.set?Ur.set(Ct.dom,vn,ce):em(Ct,ce,vn),Wo!==vn&&n.onSetAttrib&&n.onSetAttrib({attrElm:Ct.dom,attrName:ce,attrValue:vn})}})},ae=(se,ce)=>se.cloneNode(ce),Se=()=>n.root_element||e.body,De=se=>{const ce=jp(se);return{x:ce.x,y:ce.y,w:ce.width,h:ce.height}},Ke=(se,ce)=>Ma(e.body,B(se),ce),ge=(se,ce,Fe)=>{it(se,Ne=>{const Ct=U.fromDom(Ne);ov(Ct,ce,Fe),n.update_styles&&NS(T,Ct)})},le=(se,ce)=>{it(se,Fe=>{const Ne=U.fromDom(Fe);Ze(ce,(Ct,vn)=>{ov(Ne,vn,Ct)}),n.update_styles&&NS(T,Ne)})},Ee=(se,ce,Fe)=>{const Ne=B(se);if(!(hn(Ne)||!uu(Ne)&&!$B(Ne)))return Fe?As(U.fromDom(Ne),nv(ce)):(ce=ce.replace(/-(\D)/g,(Ct,vn)=>vn.toUpperCase()),ce==="float"&&(ce="cssFloat"),Ne.style?Ne.style[ce]:void 0)},Ge=se=>{const ce=B(se);if(!ce)return{w:0,h:0};let Fe=Ee(ce,"width"),Ne=Ee(ce,"height");return(!Fe||Fe.indexOf("px")===-1)&&(Fe="0"),(!Ne||Ne.indexOf("px")===-1)&&(Ne="0"),{w:parseInt(Fe,10)||ce.offsetWidth||ce.clientWidth,h:parseInt(Ne,10)||ce.offsetHeight||ce.clientHeight}},lt=se=>{const ce=B(se),Fe=Ke(ce),Ne=Ge(ce);return{x:Fe.x,y:Fe.y,w:Ne.w,h:Ne.h}},Gt=(se,ce)=>{if(!se)return!1;const Fe=Qn(se)?se:[se];return Vn(Fe,Ne=>Ga(U.fromDom(Ne),ce))},Kt=(se,ce,Fe,Ne)=>{const Ct=[];let vn=B(se);Ne=Ne===void 0;const Wo=Fe||(Se().nodeName!=="BODY"?Se().parentNode:null);if(re(ce))if(ce==="*")ce=ot;else{const Ur=ce;ce=fl=>Gt(fl,Ur)}for(;vn&&!(vn===Wo||hn(vn.nodeType)||Gp(vn)||tf(vn));){if(!ce||ce(vn))if(Ne)Ct.push(vn);else return[vn];vn=vn.parentNode}return Ne?Ct:null},_n=(se,ce,Fe)=>{const Ne=Kt(se,ce,Fe,!1);return Ne&&Ne.length>0?Ne[0]:null},In=(se,ce,Fe)=>{let Ne=ce;if(se){re(ce)&&(Ne=Ct=>Gt(Ct,ce));for(let Ct=se[Fe];Ct;Ct=Ct[Fe])if(jt(Ne)&&Ne(Ct))return Ct}return null},Oo=(se,ce)=>In(se,ce,"nextSibling"),Bs=(se,ce)=>In(se,ce,"previousSibling"),js=se=>jt(se.querySelectorAll),$e=(se,ce)=>{var Fe,Ne;const Ct=(Ne=(Fe=B(ce))!==null&&Fe!==void 0?Fe:n.root_element)!==null&&Ne!==void 0?Ne:e;return js(Ct)?xs(Ct.querySelectorAll(se)):[]},it=function(se,ce,Fe){const Ne=Fe??this;if(Qn(se)){const Ct=[];return ec(se,(vn,Wo)=>{const Ur=B(vn);Ur&&Ct.push(ce.call(Ne,Ur,Wo))}),Ct}else{const Ct=B(se);return Ct?ce.call(Ne,Ct):!1}},xn=(se,ce)=>{it(se,Fe=>{Ze(ce,(Ne,Ct)=>{te(Fe,Ct,Ne)})})},An=(se,ce)=>{it(se,Fe=>{const Ne=U.fromDom(Fe);on(Ne,ce)})},ye=(se,ce,Fe,Ne,Ct)=>it(se,vn=>{const Wo=re(ce)?e.createElement(ce):ce;return Oe(Fe)&&xn(Wo,Fe),Ne&&(!re(Ne)&&Ne.nodeType?Wo.appendChild(Ne):re(Ne)&&An(Wo,Ne)),Ct?Wo:vn.appendChild(Wo)}),Me=(se,ce,Fe)=>ye(e.createElement(se),se,ce,Fe,!0),at=so.decode,qt=so.encodeAllRaw,tn=(se,ce,Fe="")=>{let Ne="<"+se;for(const Ct in ce)vl(ce,Ct)&&(Ne+=" "+Ct+'="'+qt(ce[Ct])+'"');return Dc(Fe)&&xt(w.getVoidElements(),se)?Ne+" />":Ne+">"+Fe+"</"+se+">"},Dn=se=>{const ce=e.createElement("div"),Fe=e.createDocumentFragment();Fe.appendChild(ce),se&&(ce.innerHTML=se);let Ne;for(;Ne=ce.firstChild;)Fe.appendChild(Ne);return Fe.removeChild(ce),Fe},Ec=(se,ce)=>it(se,Fe=>{const Ne=U.fromDom(Fe);return ce&&pe(ur(Ne),Ct=>{Kr(Ct)&&Ct.dom.length===0?v(Ct):Yr(Ne,Ct)}),v(Ne),Ne.dom}),Bu=se=>it(se,ce=>{const Fe=ce.attributes;for(let Ne=Fe.length-1;Ne>=0;Ne--)ce.removeAttributeNode(Fe.item(Ne))}),aa=se=>T.parse(se),$a=(se,ce)=>T.serialize(se,ce),Pi=se=>{if(Lu!==Ln.DOM&&e===document){if(o[se])return;o[se]=!0}let ce=e.getElementById("mceDefaultStyles");if(!ce){ce=e.createElement("style"),ce.id="mceDefaultStyles",ce.type="text/css";const Fe=e.head;Fe.firstChild?Fe.insertBefore(ce,Fe.firstChild):Fe.appendChild(ce)}ce.styleSheet?ce.styleSheet.cssText+=se:ce.appendChild(e.createTextNode(se))},zr=se=>{se||(se=""),pe(se.split(","),ce=>{i[ce]=!0,h.load(ce).catch(ct)})},Ta=(se,ce,Fe)=>{it(se,Ne=>{if(ot(Ne)){const Ct=U.fromDom(Ne),vn=ce.split(" ");pe(vn,Wo=>{Oe(Fe)?(Fe?fo:wr)(Ct,Wo):Xm(Ct,Wo)})}})},kc=(se,ce)=>{Ta(se,ce,!0)},Nm=(se,ce)=>{Ta(se,ce,!1)},ft=(se,ce)=>{const Fe=F(se),Ne=ce.split(" ");return Oe(Fe)&&nn(Ne,Ct=>wi(Fe,Ct))},mn=se=>{it(se,ce=>rS(U.fromDom(ce),"display"))},Zo=se=>{it(se,ce=>Xk(U.fromDom(ce),"display","none"))},vs=se=>{const ce=F(se);return Oe(ce)&&pa(Nb(ce,"display"),"none")},Gs=se=>(se||"mce_")+l++,ys=se=>{const ce=F(se);return Oe(ce)?ot(ce.dom)?ce.dom.outerHTML:xo(ce):""},Do=(se,ce)=>{it(se,Fe=>{ot(Fe)&&(Fe.outerHTML=ce)})},Mo=(se,ce)=>{const Fe=B(ce);return it(se,Ne=>{const Ct=Fe==null?void 0:Fe.parentNode,vn=Fe==null?void 0:Fe.nextSibling;return Ct&&(vn?Ct.insertBefore(Ne,vn):Ct.appendChild(Ne)),Ne})},_a=(se,ce,Fe)=>it(ce,Ne=>{var Ct;const vn=Qn(ce)?se.cloneNode(!0):se;return Fe&&ec(pu(Ne.childNodes),Wo=>{vn.appendChild(Wo)}),(Ct=Ne.parentNode)===null||Ct===void 0||Ct.replaceChild(vn,Ne),Ne}),ml=(se,ce)=>{if(se.nodeName!==ce.toUpperCase()){const Fe=Me(ce);return ec(Q(se),Ne=>{te(Fe,Ne.nodeName,W(se,Ne.nodeName))}),_a(Fe,se,!0),Fe}else return se},Pu=(se,ce)=>{let Fe=se;for(;Fe;){let Ne=ce;for(;Ne&&Fe!==Ne;)Ne=Ne.parentNode;if(Fe===Ne)break;Fe=Fe.parentNode}return!Fe&&se.ownerDocument?se.ownerDocument.documentElement:Fe},Vl=(se,ce,Fe)=>Aa(ce)?fu(w,se,{...Fe,isContent:Ct=>{const vn=Ct.nodeName.toLowerCase();return!!ce[vn]}}):fu(w,se,Fe),xp=()=>e.createRange(),yg=(se,ce,Fe)=>{let Ne=xp(),Ct,vn;if(se&&ce&&se.parentNode&&ce.parentNode){const Wo=se.parentNode;return Ne.setStart(Wo,uf(se)),Ne.setEnd(ce.parentNode,uf(ce)),Ct=Ne.extractContents(),Ne=xp(),Ne.setStart(ce.parentNode,uf(ce)+1),Ne.setEnd(Wo,uf(se)+1),vn=Ne.extractContents(),Wo.insertBefore(Ti(Lu,Ct,w),se),Fe?Wo.insertBefore(Fe,se):Wo.insertBefore(ce,se),Wo.insertBefore(Ti(Lu,vn,w),se),Ec(se),Fe||ce}else return},Rd=(se,ce,Fe,Ne)=>{if(Qn(se)){let Ct=se.length;const vn=[];for(;Ct--;)vn[Ct]=Rd(se[Ct],ce,Fe,Ne);return vn}else return n.collect&&(se===e||se===r)&&y.push([se,ce,Fe,Ne]),_.bind(se,ce,Fe,Ne||Lu)},Tc=(se,ce,Fe)=>{if(Qn(se)){let Ne=se.length;const Ct=[];for(;Ne--;)Ct[Ne]=Tc(se[Ne],ce,Fe);return Ct}else{if(y.length>0&&(se===e||se===r)){let Ne=y.length;for(;Ne--;){const[Ct,vn,Wo]=y[Ne];se===Ct&&(!ce||ce===vn)&&(!Fe||Fe===Wo)&&_.unbind(Ct,vn,Wo)}}return _.unbind(se,ce,Fe)}},Bd=(se,ce,Fe)=>_.dispatch(se,ce,Fe),sb=(se,ce,Fe)=>_.dispatch(se,ce,Fe),wp=se=>{if(se&&uu(se)){const ce=se.getAttribute("data-mce-contenteditable");return ce&&ce!=="inherit"?ce:se.contentEditable!=="inherit"?se.contentEditable:null}else return null},Lu={doc:e,settings:n,win:r,files:i,stdMode:d,boxModel:g,styleSheetLoader:h,boundEvents:y,styles:T,schema:w,events:_,isBlock:P,root:null,clone:ae,getRoot:Se,getViewPort:De,getRect:lt,getSize:Ge,getParent:_n,getParents:Kt,get:B,getNext:Oo,getPrev:Bs,select:$e,is:Gt,add:ye,create:Me,createHTML:tn,createFragment:Dn,remove:Ec,setStyle:ge,getStyle:Ee,setStyles:le,removeAllAttribs:Bu,setAttrib:te,setAttribs:xn,getAttrib:W,getPos:Ke,parseStyle:aa,serializeStyle:$a,addStyle:Pi,loadCSS:zr,addClass:kc,removeClass:Nm,hasClass:ft,toggleClass:Ta,show:mn,hide:Zo,isHidden:vs,uniqueId:Gs,setHTML:An,getOuterHTML:ys,setOuterHTML:Do,decode:at,encode:qt,insertAfter:Mo,replace:_a,rename:ml,findCommonAncestor:Pu,run:it,getAttribs:Q,isEmpty:Vl,createRng:xp,nodeIndex:uf,split:yg,bind:Rd,unbind:Tc,fire:sb,dispatch:Bd,getContentEditable:wp,getContentEditableParent:se=>{const ce=Se();let Fe=null;for(let Ne=se;Ne&&Ne!==ce&&(Fe=wp(Ne),Fe===null);Ne=Ne.parentNode);return Fe},isEditable:se=>{if(Oe(se)){const ce=ot(se)?se:se.parentElement;return Oe(ce)&&uu(ce)&&Ju(U.fromDom(ce))}else return!1},destroy:()=>{if(y.length>0){let se=y.length;for(;se--;){const[ce,Fe,Ne]=y[se];_.unbind(ce,Fe,Ne)}}Ze(i,(se,ce)=>{h.unload(ce),delete i[ce]})},isChildOf:(se,ce)=>se===ce||ce.contains(se),dumpRng:se=>"startContainer: "+se.startContainer.nodeName+", startOffset: "+se.startOffset+", endContainer: "+se.endContainer.nodeName+", endOffset: "+se.endOffset},Cg=RS(T,n,qe(Lu));return Lu};Ln.DOM=Ln(document),Ln.nodeIndex=uf;const DT=Ln.DOM,Xg=0,BS=1,sv=2,MT=3;class od{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const i=DT;let l;const d=()=>{i.remove(y),l&&(l.onerror=l.onload=l=null)},g=()=>{d(),o()},h=()=>{d(),r("Failed to load script: "+n)},y=i.uniqueId();l=document.createElement("script"),l.id=y,l.type="text/javascript",l.src=Pe._addCacheSuffix(n),this.settings.referrerPolicy&&i.setAttrib(l,"referrerpolicy",this.settings.referrerPolicy),l.onload=g,l.onerror=h,(document.getElementsByTagName("head")[0]||document.body).appendChild(l)})}isDone(n){return this.states[n]===sv}markDone(n){this.states[n]=sv}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=Xg),new Promise((i,l)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:i,reject:l})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(h,y)=>{oo(o.scriptLoadedCallbacks,y).each(w=>{pe(w,T=>T[h](y))}),delete o.scriptLoadedCallbacks[y]},i=h=>{const y=et(h,w=>w.status==="rejected");return y.length>0?Promise.reject(Ls(y,({reason:w})=>Qn(w)?w:[w])):Promise.resolve()},l=h=>Promise.allSettled(At(h,y=>o.states[y]===sv?(r("resolve",y),Promise.resolve()):o.states[y]===MT?(r("reject",y),Promise.reject(y)):(o.states[y]=BS,o.loadScript(y).then(()=>{o.states[y]=sv,r("resolve",y);const w=o.queue;return w.length>0?(o.queue=[],l(w).then(i)):Promise.resolve()},()=>(o.states[y]=MT,r("reject",y),Promise.reject(y)))))),d=h=>(o.loading=!0,l(h).then(y=>{o.loading=!1;const w=o.queueLoadedCallbacks.shift();return O.from(w).each(fi),i(y)})),g=vi(n);return o.loading?new Promise((h,y)=>{o.queueLoadedCallbacks.push(()=>{d(g).then(h,y)})}):d(g)}}od.ScriptLoader=new od;const sP=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},rP=e=>Pt(e)&&xt(e,"raw"),PS=e=>Qn(e)&&e.length>1,o1={},rv=To("en"),av=()=>oo(o1,rv.get()),ps={getData:()=>Yt(o1,e=>({...e})),setCode:e=>{e&&rv.set(e)},getCode:()=>rv.get(),add:(e,n)=>{let o=o1[e];o||(o1[e]=o={});const r=At(ws(n),i=>i.toLowerCase());Ze(n,(i,l)=>{const d=l.toLowerCase();d!==l&&sP(r,d)?(xt(n,d)||(o[d]=i),o[l]=i):o[d]=i})},translate:e=>{const n=av().getOr({}),o=d=>jt(d)?Object.prototype.toString.call(d):r(d)?"":""+d,r=d=>d===""||d===null||d===void 0,i=d=>{const g=o(d);return xt(n,g)?o(n[g]):oo(n,g.toLowerCase()).map(o).getOr(g)},l=d=>d.replace(/{context:\w+}$/,"");if(r(e))return"";if(rP(e))return o(e.raw);if(PS(e)){const d=e.slice(1),g=i(e[0]).replace(/\{([0-9]+)\}/g,(h,y)=>xt(d,y)?o(d[y]):h);return l(g)}return l(i(e))},isRtl:()=>av().bind(e=>oo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>xt(o1,e)},Vs=()=>{const e=[],n={},o={},r=[],i=(B,F)=>{const W=et(r,Q=>Q.name===B&&Q.state===F);pe(W,Q=>Q.resolve())},l=B=>xt(n,B),d=B=>xt(o,B),g=B=>{if(o[B])return o[B].instance},h=(B,F)=>{const W=ps.getCode(),Q=","+(F||"")+",";!W||F&&Q.indexOf(","+W+",")===-1||od.ScriptLoader.add(n[B]+"/langs/"+W+".js")},y=(B,F)=>{Vs.languageLoad!==!1&&(l(B)?h(B,F):P(B,"loaded").then(()=>h(B,F)))},w=(B,F)=>(e.push(F),o[B]={instance:F},i(B,"added"),F),T=B=>{delete n[B],delete o[B]},_=(B,F)=>re(F)?re(B)?{prefix:"",resource:F,suffix:""}:{prefix:B.prefix,resource:F,suffix:B.suffix}:F,N=(B,F)=>{if(n[B])return Promise.resolve();let W=re(F)?F:F.prefix+F.resource+F.suffix;W.indexOf("/")!==0&&W.indexOf("://")===-1&&(W=Vs.baseURL+"/"+W),n[B]=W.substring(0,W.lastIndexOf("/"));const Q=()=>(i(B,"loaded"),Promise.resolve());return o[B]?Q():od.ScriptLoader.add(W).then(Q)},P=(B,F="added")=>F==="added"&&d(B)||F==="loaded"&&l(B)?Promise.resolve():new Promise(W=>{r.push({name:B,state:F,resolve:W})});return{items:e,urls:n,lookup:o,get:g,requireLangPack:y,add:w,remove:T,createUrl:_,load:N,waitFor:P}};Vs.languageLoad=!0,Vs.baseURL="",Vs.PluginManager=Vs(),Vs.ThemeManager=Vs(),Vs.ModelManager=Vs();const df=qe("mce-annotation"),Wn=qe("data-mce-annotation"),mf=qe("data-mce-annotation-uid"),Qg=qe("data-mce-annotation-active"),s1=qe("data-mce-annotation-classes"),ff=qe("data-mce-annotation-attrs"),iv=e=>n=>sn(n,e),NT=(e,n)=>{const o=e.selection.getRng(),r=U.fromDom(o.startContainer),i=U.fromDom(e.getBody()),l=n.fold(()=>"."+df(),h=>`[${Wn()}="${h}"]`),d=ru(r,o.startOffset).getOr(r);return Gd(d,l,iv(i)).bind(h=>Xr(h,`${mf()}`).bind(y=>Xr(h,`${Wn()}`).map(w=>{const T=BT(e,y);return{uid:y,name:w,elements:T}})))},RT=e=>ya(e)&&wi(e,df()),FS=(e,n)=>jd(e,"data-mce-bogus")||sT(e,'[data-mce-bogus="all"]',iv(n)),BT=(e,n)=>{const o=U.fromDom(e.getBody()),r=go(o,`[${mf()}="${n}"]`);return et(r,i=>!FS(i,o))},$S=(e,n)=>{const o=U.fromDom(e.getBody()),r=go(o,`[${Wn()}="${n}"]`),i={};return pe(r,l=>{if(!FS(l,o)){const d=Ko(l,mf()),g=oo(i,d).getOr([]);i[d]=g.concat([l])}}),i},aP=(e,n)=>{const o=To({}),r=()=>({listeners:[],previous:br()}),i=(T,_)=>{l(T,N=>(_(N),N))},l=(T,_)=>{const N=o.get(),P=oo(N,T).getOrThunk(r),B=_(P);N[T]=B,o.set(N)},d=(T,_,N)=>{i(T,P=>{pe(P.listeners,B=>B(!0,T,{uid:_,nodes:At(N,F=>F.dom)}))})},g=T=>{i(T,_=>{pe(_.listeners,N=>N(!1,T))})},h=(T,_)=>{pe(BT(e,T),N=>{_?$s(N,Qg(),"true"):_s(N,Qg())})},y=_o(()=>{const T=Gn(n.getNames());pe(T,_=>{l(_,N=>{const P=N.previous.get();return NT(e,O.some(_)).fold(()=>{P.each(B=>{g(_),N.previous.clear(),h(B,!1)})},({uid:B,name:F,elements:W})=>{pa(P,B)||(P.each(Q=>h(Q,!1)),d(F,B,W),N.previous.set(B),h(B,!0))}),{previous:N.previous,listeners:N.listeners}})})},30);return e.on("remove",()=>{y.cancel()}),e.on("NodeChange",()=>{y.throttle()}),{addListener:(T,_)=>{l(T,N=>({previous:N.previous,listeners:N.listeners.concat([_])}))}}},iP=(e,n)=>{const o=Wn(),r=l=>O.from(l.attr(o)).bind(n.lookup),i=l=>{var d,g;l.attr(mf(),null),l.attr(Wn(),null),l.attr(Qg(),null);const h=O.from(l.attr(ff())).map(_=>_.split(",")).getOr([]),y=O.from(l.attr(s1())).map(_=>_.split(",")).getOr([]);pe(h,_=>l.attr(_,null));const w=(g=(d=l.attr("class"))===null||d===void 0?void 0:d.split(" "))!==null&&g!==void 0?g:[],T=bl(w,[df()].concat(y));l.attr("class",T.length>0?T.join(" "):null),l.attr(s1(),null),l.attr(ff(),null)};e.serializer.addTempAttr(Qg()),e.serializer.addAttributeFilter(o,l=>{for(const d of l)r(d).each(g=>{g.persistent===!1&&(d.name==="span"?d.unwrap():i(d))})})},tm=()=>{const e={};return{register:(i,l)=>{e[i]={name:i,settings:l}},lookup:i=>oo(e,i).map(l=>l.settings),getNames:()=>ws(e)}},HS=(e,n,o=ke)=>{const r=new dr(e,n),i=l=>{let d;do d=r[l]();while(d&&!Re(d)&&!o(d));return O.from(d).filter(Re)};return{current:()=>O.from(r.current()).filter(Re),next:()=>i("next"),prev:()=>i("prev"),prev2:()=>i("prev2")}},bu=(e,n)=>{const o=n||(d=>e.isBlock(d)||zo(d)||wo(d)),r=(d,g,h,y)=>{if(Re(d)){const w=y(d,g,d.data);if(w!==-1)return O.some({container:d,offset:w})}return h().bind(w=>r(w.container,w.offset,h,y))};return{backwards:(d,g,h,y)=>{const w=HS(d,y??e.getRoot(),o);return r(d,g,()=>w.prev().map(T=>({container:T,offset:T.length})),h).getOrNull()},forwards:(d,g,h,y)=>{const w=HS(d,y??e.getRoot(),o);return r(d,g,()=>w.next().map(T=>({container:T,offset:0})),h).getOrNull()}}},VS=["td","th"],cP=["thead","tbody","tfoot"],lP=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],PT=["li","dd","dt"],uP=["ul","ol","dl"],dP=["pre","script","textarea","style"],eh=e=>{let n;return o=>(n=n||jo(e,ze),xt(n,En(o)))},LT=e=>En(e)==="table",gf=e=>ya(e)&&En(e)==="br",zS=eh(lP),th=eh(uP),sd=eh(PT),US=eh(cP),nm=eh(VS),nh=eh(dP),mP=e=>{const n=[];let o=e.dom;for(;o;)n.push(U.fromDom(o)),o=o.lastChild;return n},cv=e=>{const n=go(e,"br"),o=et(mP(e).slice(-1),gf);n.length===o.length&&pe(o,v)},rd=()=>{const e=U.fromTag("br");return $s(e,"data-mce-bogus","1"),e},om=e=>{Si(e),rs(e,rd())},fP=(e,n)=>{Gm(e).each(o=>{ou(o).each(r=>{n.isBlock(En(e))&&gf(o)&&n.isBlock(En(r))&&v(o)})})},Xs=Cr,lv=qo,Qa=Mc,IT=e=>e.insertContent(Xs,{preserve_zwsp:!0}),gP=ot,ad=Re,Os=e=>(ad(e)&&(e=e.parentNode),gP(e)&&e.hasAttribute("data-mce-caret")),Ir=e=>ad(e)&&lv(e.data),bs=e=>Os(e)||Ir(e),r1=e=>e.firstChild!==e.lastChild||!zo(e.firstChild),ZS=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Xs),l=e.parentNode;if(n){const d=e.previousSibling;if(ad(d)){if(bs(d))return d;if(uv(d))return d.splitText(d.data.length-1)}l==null||l.insertBefore(i,e)}else{const d=e.nextSibling;if(ad(d)){if(bs(d))return d;if(oh(d))return d.splitText(1),d}e.nextSibling?l==null||l.insertBefore(i,e.nextSibling):l==null||l.appendChild(i)}return i},WS=e=>{const n=e.container();return Re(n)?n.data.charAt(e.offset())===Xs||e.isAtStart()&&Ir(n.previousSibling):!1},a1=e=>{const n=e.container();return Re(n)?n.data.charAt(e.offset()-1)===Xs||e.isAtEnd()&&Ir(n.nextSibling):!1},hP=(e,n,o)=>{var r;const l=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);l.setAttribute("data-mce-caret",o?"before":"after"),l.setAttribute("data-mce-bogus","all"),l.appendChild(rd().dom);const d=n.parentNode;return o?d==null||d.insertBefore(l,n):n.nextSibling?d==null||d.insertBefore(l,n.nextSibling):d==null||d.appendChild(l),l},oh=e=>ad(e)&&e.data[0]===Xs,uv=e=>ad(e)&&e.data[e.data.length-1]===Xs,jS=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];ef(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},dv=e=>e&&e.hasAttribute("data-mce-caret")?(jS(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,GS=e=>Os(e.startContainer),sm=Math.round,id=e=>e?{left:sm(e.left),top:sm(e.top),bottom:sm(e.bottom),right:sm(e.right),width:sm(e.width),height:sm(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Kn=(e,n)=>(e=id(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),rm=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,qS=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,sh=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:qS(n.top-e.bottom,e,n)},rh=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:qS(n.bottom-e.top,e,n),KS=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,FT=e=>Ss(e,(n,o)=>n.fold(()=>O.some(o),r=>{const i=Math.min(o.left,r.left),l=Math.min(o.top,r.top),d=Math.max(o.right,r.right),g=Math.max(o.bottom,r.bottom);return O.some({top:l,right:d,bottom:g,left:i,width:d-i,height:g-l})}),O.none()),mv=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),i=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-i)*(o-i))},pP=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),fv=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Fr=(e,n)=>{if(ot(e)&&e.hasChildNodes()){const o=e.childNodes,r=Lm(n,0,o.length-1);return o[r]}else return e},gv=(e,n)=>{if(!(n<0&&ot(e)&&e.hasChildNodes()))return Fr(e,n)},_r=new RegExp("[ÃÄ-ÕØ“É-“á“à-“â÷ë-÷Ω÷ø◊Å-◊Ç◊Ñ-◊Ö◊áÿê-ÿöŸã-ŸüŸ∞€ñ-€ú€ü-€§€ß-€®€™-€≠‹ë‹∞-›äﬁ¶-ﬁ∞ﬂ´-ﬂ≥‡†ñ-‡†ô‡†õ-‡†£‡†•-‡†ß‡†©-‡†≠‡°ô-‡°õ‡££-‡§Ç‡§∫‡§º‡•Å-‡•à‡•ç‡•ë-‡•ó‡•¢-‡•£‡¶Å‡¶º‡¶æ‡ßÅ-‡ßÑ‡ßç‡ßó‡ß¢-‡ß£‡®Å-‡®Ç‡®º‡©Å-‡©Ç‡©á-‡©à‡©ã-‡©ç‡©ë‡©∞-‡©±‡©µ‡™Å-‡™Ç‡™º‡´Å-‡´Ö‡´á-‡´à‡´ç‡´¢-‡´£‡¨Å‡¨º‡¨æ‡¨ø‡≠Å-‡≠Ñ‡≠ç‡≠ñ‡≠ó‡≠¢-‡≠£‡ÆÇ‡Ææ‡ØÄ‡Øç‡Øó‡∞Ä‡∞æ-‡±Ä‡±Ü-‡±à‡±ä-‡±ç‡±ï-‡±ñ‡±¢-‡±£‡≤Å‡≤º‡≤ø‡≥Ç‡≥Ü‡≥å-‡≥ç‡≥ï-‡≥ñ‡≥¢-‡≥£‡¥Å‡¥æ‡µÅ-‡µÑ‡µç‡µó‡µ¢-‡µ£‡∑ä‡∑è‡∑í-‡∑î‡∑ñ‡∑ü‡∏±‡∏¥-‡∏∫‡πá-‡πé‡∫±‡∫¥-‡∫π‡∫ª-‡∫º‡ªà-‡ªç‡ºò-‡ºô‡ºµ‡º∑‡ºπ‡Ω±-‡Ωæ‡æÄ-‡æÑ‡æÜ-‡æá‡æç-‡æó‡æô-‡æº‡øÜ·Ä≠-·Ä∞·Ä≤-·Ä∑·Äπ-·Ä∫·ÄΩ-·Äæ·Åò-·Åô·Åû-·Å†·Å±-·Å¥·ÇÇ·ÇÖ-·ÇÜ·Çç·Çù·çù-·çü·úí-·úî·ú≤-·ú¥·ùí-·ùì·ù≤-·ù≥·û¥-·ûµ·û∑-·ûΩ·üÜ·üâ-·üì·üù·†ã-·†ç·¢©·§†-·§¢·§ß-·§®·§≤·§π-·§ª·®ó-·®ò·®õ·©ñ·©ò-·©û·©†·©¢·©•-·©¨·©≥-·©º·©ø·™∞-·™Ω·™æ·¨Ä-·¨É·¨¥·¨∂-·¨∫·¨º·≠Ç·≠´-·≠≥·ÆÄ-·ÆÅ·Æ¢-·Æ•·Æ®-·Æ©·Æ´-·Æ≠·Ø¶·Ø®-·Ø©·Ø≠·ØØ-·Ø±·∞¨-·∞≥·∞∂-·∞∑·≥ê-·≥í·≥î-·≥†·≥¢-·≥®·≥≠·≥¥·≥∏-·≥π·∑Ä-·∑µ·∑º-·∑ø‚Äå-‚Äç‚Éê-‚Éú‚Éù-‚É†‚É°‚É¢-‚É§‚É•-‚É∞‚≥Ø-‚≥±‚µø‚∑†-‚∑ø„Ä™-„Ä≠„ÄÆ-„ÄØ„Çô-„ÇöÍôØÍô∞-Íô≤Íô¥-ÍôΩÍöû-ÍöüÍõ∞-Íõ±Í†ÇÍ†ÜÍ†ãÍ†•-Í†¶Í£ÑÍ£†-Í£±Í§¶-Í§≠Í•á-Í•ëÍ¶Ä-Í¶ÇÍ¶≥Í¶∂-Í¶πÍ¶ºÍß•Í®©-Í®ÆÍ®±-Í®≤Í®µ-Í®∂Í©ÉÍ©åÍ©ºÍ™∞Í™≤-Í™¥Í™∑-Í™∏Í™æ-Í™øÍ´ÅÍ´¨-Í´≠Í´∂ÍØ•ÍØ®ÍØ≠Ô¨ûÔ∏Ä-Ô∏èÔ∏†-Ô∏ØÔæû-Ôæü]"),cd=e=>re(e)&&e.charCodeAt(0)>=768&&_r.test(e),bP=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},vP=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},$T=zc,hv=wo,YS=zo,XS=Re,JS=Xi(["script","style","textarea"]),QS=Xi(["img","input","textarea","hr","iframe","video","audio","object","embed"]),HT=Xi(["table"]),VT=bs,Yc=e=>VT(e)?!1:XS(e)?!JS(e.parentNode):QS(e)||YS(e)||HT(e)||Js(e),yP=e=>ot(e)&&e.getAttribute("unselectable")==="true",Js=e=>!yP(e)&&hv(e),CP=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Js(o))return!1;if($T(o))return!0}return!0},am=e=>Js(e)?!Ss(xs(e.getElementsByTagName("*")),(n,o)=>n||$T(o),!1):!1,zT=e=>QS(e)||am(e),ex=(e,n)=>Yc(e)&&CP(e,n),tx=ot,nx=Yc,pv=Ub("display","block table"),UT=Ub("float","left right"),i1=vP(tx,nx,jn(UT)),SP=jn(Ub("white-space","pre pre-line pre-wrap")),Yo=Re,ls=zo,fr=Ln.nodeIndex,zs=gv,Ds=e=>e?e.createRange():Ln.DOM.createRng(),us=e=>re(e)&&/[\r\n\t ]/.test(e),bv=e=>!!e.setStart&&!!e.setEnd,c1=e=>{const n=e.startContainer,o=e.startOffset;if(us(e.toString())&&SP(n.parentNode)&&Re(n)){const r=n.data;if(us(r[o-1])||us(r[o+1]))return!0}return!1},ZT=e=>{const n=e.ownerDocument,o=Ds(n),r=n.createTextNode(to),i=e.parentNode;i.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const l=id(o.getBoundingClientRect());return i.removeChild(r),l},WT=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,i=e.endOffset;if(n===o&&Re(o)&&r===0&&i===1){const l=e.cloneRange();return l.setEndAfter(o),ld(l)}else return null},ox=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,ld=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=id(r[0]):o=id(e.getBoundingClientRect()),!bv(e)&&ls(e)&&ox(o)?ZT(e):ox(o)&&bv(e)&&(n=WT(e))!==null&&n!==void 0?n:o},ud=(e,n)=>{const o=Kn(e,n);return o.width=1,o.right=o.left+1,o},sx=e=>{const n=[],o=d=>{d.height!==0&&(n.length>0&&rm(d,n[n.length-1])||n.push(d))},r=(d,g)=>{const h=Ds(d.ownerDocument);if(g<d.data.length){if(cd(d.data[g]))return;if(cd(d.data[g-1])&&(h.setStart(d,g),h.setEnd(d,g+1),!c1(h))){o(ud(ld(h),!1));return}}g>0&&(h.setStart(d,g-1),h.setEnd(d,g),c1(h)||o(ud(ld(h),!1))),g<d.data.length&&(h.setStart(d,g),h.setEnd(d,g+1),c1(h)||o(ud(ld(h),!0)))},i=e.container(),l=e.offset();if(Yo(i))return r(i,l),n;if(tx(i))if(e.isAtEnd()){const d=zs(i,l);Yo(d)&&r(d,d.data.length),i1(d)&&!ls(d)&&o(ud(ld(d),!1))}else{const d=zs(i,l);if(Yo(d)&&r(d,0),i1(d)&&e.isAtEnd())return o(ud(ld(d),!1)),n;const g=zs(e.container(),e.offset()-1);i1(g)&&!ls(g)&&(pv(g)||pv(d)||!i1(d))&&o(ud(ld(g),!1)),i1(d)&&o(ud(ld(d),!0))}return n},be=(e,n,o)=>{const r=()=>(Yo(e),n===0),i=()=>Yo(e)?n>=e.data.length:n>=e.childNodes.length,l=()=>{const w=Ds(e.ownerDocument);return w.setStart(e,n),w.setEnd(e,n),w},d=()=>(o||(o=sx(be(e,n))),o),g=()=>d().length>0,h=w=>w&&e===w.container()&&n===w.offset(),y=w=>zs(e,w?n-1:n);return{container:qe(e),offset:qe(n),toRange:l,getClientRects:d,isVisible:g,isAtStart:r,isAtEnd:i,isEqual:h,getNode:y}};be.fromRangeStart=e=>be(e.startContainer,e.startOffset),be.fromRangeEnd=e=>be(e.endContainer,e.endOffset),be.after=e=>be(e.parentNode,fr(e)+1),be.before=e=>be(e.parentNode,fr(e)),be.isAbove=(e,n)=>os(Go(n.getClientRects()),pr(e.getClientRects()),sh).getOr(!1),be.isBelow=(e,n)=>os(pr(n.getClientRects()),Go(e.getClientRects()),rh).getOr(!1),be.isAtStart=e=>e?e.isAtStart():!1,be.isAtEnd=e=>e?e.isAtEnd():!1,be.isTextPosition=e=>e?Re(e.container()):!1,be.isElementPosition=e=>!be.isTextPosition(e);const vv=(e,n)=>{Re(n)&&n.data.length===0&&e.remove(n)},jT=(e,n,o)=>{n.insertNode(o),vv(e,o.previousSibling),vv(e,o.nextSibling)},xP=(e,n,o)=>{const r=O.from(o.firstChild),i=O.from(o.lastChild);n.insertNode(o),r.each(l=>vv(e,l.previousSibling)),i.each(l=>vv(e,l.nextSibling))},vu=(e,n,o)=>{tf(o)?xP(e,n,o):jT(e,n,o)},tc=Re,rx=ef,yv=Ln.nodeIndex,Cv=e=>{const n=e.parentNode;return rx(n)?Cv(n):n},l1=e=>e?Nc(e.childNodes,(n,o)=>(rx(o)&&o.nodeName!=="BR"?n=n.concat(l1(o)):n.push(o),n),[]):[],GT=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&tc(o);)n+=o.data.length;return n},u1=e=>n=>e===n,Sv=e=>{let n,o;n=l1(Cv(e)),o=Wu(n,u1(e),e),n=n.slice(0,o+1);const r=Nc(n,(i,l,d)=>(tc(l)&&tc(n[d-1])&&i++,i),0);return n=lr(n,Xi([e.nodeName])),o=Wu(n,u1(e),e),o-r},ah=e=>(tc(e)?"text()":e.nodeName.toLowerCase())+"["+Sv(e)+"]",d1=(e,n,o)=>{const r=[];for(let i=n.parentNode;i&&i!==e;i=i.parentNode)r.push(i);return r},nc=(e,n)=>{let o=[],r=n.container(),i=n.offset(),l;if(tc(r))l=GT(r,i);else{const g=r.childNodes;i>=g.length?(l="after",i=g.length-1):l="before",r=g[i]}o.push(ah(r));let d=d1(e,r);return d=lr(d,jn(ef)),o=o.concat(xl(d,g=>ah(g))),o.reverse().join("/")+","+l},m1=(e,n,o)=>{let r=l1(e);return r=lr(r,(i,l)=>!tc(i)||!tc(r[l-1])),r=lr(r,Xi([n])),r[o]},qT=(e,n)=>{let o=e,r=0;for(;tc(o);){const i=o.data.length;if(n>=r&&n<=r+i){e=o,n=n-r;break}if(!tc(o.nextSibling)){e=o,n=i;break}r+=i,o=o.nextSibling}return tc(e)&&n>e.data.length&&(n=e.data.length),be(e,n)},ax=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),i=o.length>1?o[1]:"before",l=Nc(r,(d,g)=>{const h=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(g);return h?(h[1]==="text()"&&(h[1]="#text"),m1(d,h[1],parseInt(h[2],10))):null},e);if(!l)return null;if(!tc(l)&&l.parentNode){let d;return i==="after"?d=yv(l)+1:d=yv(l),be(l.parentNode,d)}return qT(l,parseInt(i,10))},xv=wo,KT=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let i=n.previousSibling;i&&Re(i);i=i.previousSibling)r+=e(i.data).length;return r},YT=(e,n,o,r,i)=>{const l=i?r.startContainer:r.endContainer;let d=i?r.startOffset:r.endOffset;const g=[],h=e.getRoot();if(Re(l))g.push(o?KT(n,l,d):d);else{let y=0;const w=l.childNodes;d>=w.length&&w.length&&(y=1,d=Math.max(0,w.length-1)),g.push(e.nodeIndex(w[d],o)+y)}for(let y=l;y&&y!==h;y=y.parentNode)g.push(e.nodeIndex(y,o));return g},wP=(e,n,o,r)=>{const i=n.dom,l=YT(i,e,o,r,!0),d=n.isForward(),g=GS(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:l,forward:d,...g};{const h=YT(i,e,o,r,!1);return{start:l,end:h,forward:d,...g}}},wv=(e,n,o)=>{let r=0;return Pe.each(e.select(n),i=>{if(i.getAttribute("data-mce-bogus")!=="all"){if(i===o)return!1;r++;return}}),r},ix=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(ot(o)&&o.nodeName==="TR"){const i=o.childNodes;o=i[Math.min(n?r:r-1,i.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},hf=e=>(ix(e,!0),ix(e,!1),e),Ev=(e,n)=>{if(ot(e)&&(e=Fr(e,n),xv(e)))return e;if(bs(e)){Re(e)&&Os(e)&&(e=e.parentNode);let o=e.previousSibling;if(xv(o)||(o=e.nextSibling,xv(o)))return o}},dd=e=>Ev(e.startContainer,e.startOffset)||Ev(e.endContainer,e.endOffset),kv=(e,n,o)=>{const r=o.getNode(),i=o.getRng();if(r.nodeName==="IMG"||xv(r)){const d=r.nodeName;return{name:d,index:wv(o.dom,d,r)}}const l=dd(i);if(l){const d=l.tagName;return{name:d,index:wv(o.dom,d,l)}}return wP(e,o,n,i)},EP=e=>{const n=e.getRng();return{start:nc(e.dom.getRoot(),be.fromRangeStart(n)),end:nc(e.dom.getRoot(),be.fromRangeEnd(n)),forward:e.isForward()}},Ca=e=>({rng:e.getRng(),forward:e.isForward()}),Xc=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},ei=(e,n)=>{const o=e.dom;let r=e.getRng();const i=o.uniqueId(),l=e.isCollapsed(),d=e.getNode(),g=d.nodeName,h=e.isForward();if(g==="IMG")return{name:g,index:wv(o,g,d)};const y=hf(r.cloneRange());if(!l){y.collapse(!1);const T=Xc(o,i+"_end",n);vu(o,y,T)}r=hf(r),r.collapse(!0);const w=Xc(o,i+"_start",n);return vu(o,r,w),e.moveToBookmark({id:i,keep:!0,forward:h}),{id:i,forward:h}},kP=(e,n,o=!1)=>n===2?kv(Qa,o,e):n===3?EP(e):n?Ca(e):ei(e,!1),im=Qe(kv,ds,!0),TP=e=>e.type==="inline-command"||e.type==="inline-format",_P=e=>e.type==="block-command"||e.type==="block-format",AP=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,OP=e=>{var n;const o=i=>Ks.error({message:i,pattern:e}),r=(i,l,d)=>{if(e.format!==void 0){let g;if(Qn(e.format)){if(!nn(e.format,re))return o(i+" pattern has non-string items in the `format` array");g=e.format}else if(re(e.format))g=[e.format];else return o(i+" pattern has non-string `format` parameter");return Ks.value(l(g))}else return e.cmd!==void 0?re(e.cmd)?Ks.value(d(e.cmd,e.value)):o(i+" pattern has non-string `cmd` parameter"):o(i+" pattern is missing both `format` and `cmd` parameters")};if(!Pt(e))return o("Raw pattern is not an object");if(!re(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!re(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let i=e.start,l=e.end;return l.length===0&&(l=i,i=""),r("Inline",d=>({type:"inline-format",start:i,end:l,format:d}),(d,g)=>({type:"inline-command",start:i,end:l,cmd:d,value:g}))}else{if(e.replacement!==void 0)return re(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):Ks.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const i=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",l=>({type:"block-format",start:e.start,format:l[0],trigger:i}),(l,d)=>({type:"block-command",start:e.start,cmd:l,value:d,trigger:i}))}}},rn=e=>et(e,_P),mt=e=>et(e,TP),pf=(e,n)=>({inlinePatterns:mt(e),blockPatterns:rn(e),dynamicPatternsLookup:n}),f1=(e,n)=>({...e,blockPatterns:et(e.blockPatterns,o=>AP(o,n))}),Tv=e=>{const n=Fm(At(e,OP));return pe(n.errors,o=>console.error(o.message,o.pattern)),n.values},DP=e=>n=>{const o=e(n);return Tv(o)},XT=(e,n)=>e.dispatch("PreProcess",n),ho=(e,n)=>e.dispatch("PostProcess",n),JT=e=>{e.dispatch("remove")},MP=e=>{e.dispatch("detach")},NP=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},ve=(e,n,o,r,i)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:i})},cx=(e,n,o,r,i)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:i})},RP=e=>{e.dispatch("PreInit")},_v=e=>{e.dispatch("PostRender")},BP=e=>{e.dispatch("Init")},ih=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},Av=(e,n,o)=>{e.dispatch(n,o)},cm=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},QT=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},ch=(e,n)=>e.dispatch("BeforeSetContent",n),ro=(e,n)=>e.dispatch("SetContent",n),Dl=(e,n)=>e.dispatch("BeforeGetContent",n),lx=(e,n)=>e.dispatch("GetContent",n),md=(e,n)=>{e.dispatch("AutocompleterStart",n)},Jc=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},ux=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},PP=e=>{e.dispatch("AutocompleterEnd")},dx=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),LP=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),e_=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),IP=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),FP=(e,n)=>e.dispatch("DisabledStateChange",{state:n}),Ov=Mr().deviceType,Ae=Ov.isTouch(),$P=Ln.DOM,gr=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Ss(n,(o,r)=>{const i=r.split("="),l=i[0],d=i.length>1?i[1]:l;return o[bi(l)]=bi(d),o},{})},t_=e=>kt(e,RegExp),Ye=e=>n=>n.options.get(e),Dv=e=>re(e)||Pt(e),n_=(e,n="")=>o=>{const r=re(o);if(r)if(o.indexOf("=")!==-1){const i=gr(o);return{value:oo(i,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},Dt=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:n_(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:n_(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=re(o)&&dn(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=_t(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>$t(o)?{valid:!0,value:o}:re(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||re(o)||gn(o,re);return r?re(o)?{value:At(o.split(","),bi),valid:r}:Qn(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:kn(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=re(o)||gn(o,re);return r?{value:Qn(o)?o:At(o.split(","),bi),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("extended_mathml_attributes",{processor:"string[]"}),n("extended_mathml_elements",{processor:"string[]"}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=$t(o)||re(o);return r?o===!1||Ov.isiPhone()||Ov.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!Ae}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("onboarding",{processor:"boolean",default:!0}),n("tiny_cloud_entry_url",{processor:"string"}),n("theme",{processor:o=>o===!1||re(o)||jt(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||re(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("disabled",{processor:o=>$t(o)?(e.initialized&&hh(e)!==o&&Promise.resolve().then(()=>{FP(e,o)}),{valid:!0,value:o}):{valid:!1,message:"The value must be a boolean."},default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(e.hasPlugin("help")?". Press ALT-0 for help.":"")}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:o=>{const r=gn(o,re);return r?{value:o,valid:r}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:Dv}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:Dv}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:Dv}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:Dv}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>re(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>gn(o,Pt)||o===!1?{value:Tv(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>jt(o)?{value:DP(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>gn(o,t_)?{value:o,valid:!0}:t_(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=_t(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=_t(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:ps.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:$P.getAttrib(e.getElement(),"placeholder")})})},HP=Ye("iframe_attrs"),o_=Ye("doctype"),VP=Ye("document_base_url"),lG=Ye("body_id"),zP=Ye("body_class"),UP=Ye("content_security_policy"),uG=Ye("br_in_pre"),ta=Ye("forced_root_block"),g1=Ye("forced_root_block_attrs"),St=Ye("newline_behavior"),ZP=Ye("br_newline_selector"),fd=Ye("no_newline_selector"),yu=Ye("keep_styles"),Mv=Ye("end_container_on_empty_block"),Ra=Ye("automatic_uploads"),h1=Ye("images_reuse_filename"),p1=Ye("images_replace_blob_uris"),b1=Ye("icons"),lh=Ye("icons_url"),WP=Ye("images_upload_url"),jP=Ye("images_upload_base_path"),GP=Ye("images_upload_credentials"),qP=Ye("images_upload_handler"),pn=Ye("content_css_cors"),oc=Ye("referrer_policy"),lm=Ye("language"),KP=Ye("language_url"),uh=Ye("indent_use_margin"),Sn=Ye("indentation"),YP=Ye("content_css"),s_=Ye("content_style"),r_=Ye("font_css"),XP=Ye("directionality"),v1=Ye("inline_boundaries_selector"),a_=Ye("object_resizing"),JP=Ye("resize_img_proportional"),QP=Ye("placeholder"),i_=Ye("event_root"),mx=Ye("service_message"),dh=Ye("theme"),e7=Ye("theme_url"),Nv=Ye("model"),c_=Ye("model_url"),mh=Ye("inline_boundaries"),t7=Ye("formats"),n7=Ye("preview_styles"),l_=Ye("format_empty_lines"),o7=Ye("format_noneditable_selector"),s7=Ye("custom_ui_selector"),kn=Ye("inline"),u_=Ye("hidden_input"),fx=Ye("submit_patch"),r7=Ye("add_form_submit_trigger"),bf=Ye("add_unload_trigger"),d_=Ye("custom_undo_redo_levels"),a7=Ye("disable_nodechange"),m_=Ye("readonly"),fh=Ye("editable_root"),f_=Ye("content_css_cors"),um=Ye("plugins"),gh=Ye("external_plugins"),i7=Ye("block_unsupported_drop"),g_=Ye("visual"),c7=Ye("visual_table_class"),h_=Ye("visual_anchor_class"),p_=Ye("iframe_aria_text"),b_=Ye("setup"),dG=Ye("init_instance_callback"),l7=Ye("urlconverter_callback"),v_=Ye("auto_focus"),gx=Ye("browser_spellcheck"),hx=Ye("protect"),px=Ye("paste_block_drop"),y1=Ye("paste_data_images"),y_=Ye("paste_preprocess"),C_=Ye("paste_postprocess"),Rv=Ye("newdocument_content"),u7=Ye("paste_webkit_styles"),S_=Ye("paste_remove_styles_if_webkit"),x_=Ye("paste_merge_formats"),w_=Ye("smart_paste"),E_=Ye("paste_as_text"),k_=Ye("paste_tab_spaces"),d7=Ye("allow_html_data_urls"),m7=Ye("text_patterns"),f7=Ye("text_patterns_lookup"),T_=Ye("noneditable_class"),g7=Ye("editable_class"),h7=Ye("noneditable_regexp"),p7=Ye("preserve_cdata"),b7=Ye("highlight_on_focus"),C1=Ye("xss_sanitization"),__=Ye("init_content_sync"),v7=e=>e.options.isSet("text_patterns_lookup"),A_=e=>Pe.explode(e.options.get("font_size_style_values")),O_=e=>Pe.explode(e.options.get("font_size_classes")),y7=e=>e.options.get("encoding")==="xml",D_=e=>Pe.explode(e.options.get("images_file_types")),C7=Ye("table_tab_navigation"),S7=Ye("details_initial_state"),x7=Ye("details_serialized_state"),bx=Ye("sandbox_iframes"),Bv=e=>e.options.get("sandbox_iframes_exclusions"),Pv=Ye("convert_unsafe_embeds"),w7=Ye("license_key"),E7=Ye("api_key"),hh=Ye("disabled"),k7=ot,vx=Re,yx=e=>{const n=e.parentNode;n&&n.removeChild(e)},Cx=e=>{const n=Qa(e);return{count:e.length-n.length,text:n}},M_=e=>{let n;for(;(n=e.data.lastIndexOf(Xs))!==-1;)e.deleteData(n,1)},N_=(e,n)=>(dm(e),n),T7=(e,n)=>{const o=Cx(e.data.substr(0,n.offset())),r=Cx(e.data.substr(n.offset()));return(o.text+r.text).length>0?(M_(e),be(e,n.offset()-o.count)):n},_7=(e,n)=>{const o=n.container(),r=Fu(xs(o.childNodes),e).map(i=>i<n.offset()?be(o,n.offset()-1):n).getOr(n);return dm(e),r},Lv=(e,n)=>vx(e)&&n.container()===e?T7(e,n):N_(e,n),R_=(e,n)=>n.container()===e.parentNode?_7(e,n):N_(e,n),B_=(e,n)=>be.isTextPosition(n)?Lv(e,n):R_(e,n),dm=e=>{k7(e)&&bs(e)&&(r1(e)?e.removeAttribute("data-mce-caret"):yx(e)),vx(e)&&(M_(e),e.data.length===0&&yx(e))},P_=wo,A7=Ji,O7=qp,D7="*[contentEditable=false],video,audio,embed,object",L_=(e,n,o)=>{const r=Kn(n.getBoundingClientRect(),o);let i,l;if(e.tagName==="BODY"){const g=e.ownerDocument.documentElement;i=e.scrollLeft||g.scrollLeft,l=e.scrollTop||g.scrollTop}else{const g=e.getBoundingClientRect();i=e.scrollLeft-g.left,l=e.scrollTop-g.top}r.left+=i,r.right+=i,r.top+=l,r.bottom+=l,r.width=1;let d=n.offsetWidth-n.clientWidth;return d>0&&(o&&(d*=-1),r.left+=d,r.right+=d),r},M7=e=>{var n,o;const r=go(U.fromDom(e),D7);for(let i=0;i<r.length;i++){const l=r[i].dom;let d=l.previousSibling;if(uv(d)){const g=d.data;g.length===1?(n=d.parentNode)===null||n===void 0||n.removeChild(d):d.deleteData(g.length-1,1)}d=l.nextSibling,oh(d)&&(d.data.length===1?(o=d.parentNode)===null||o===void 0||o.removeChild(d):d.deleteData(0,1))}},N7=(e,n,o,r)=>{const i=br();let l,d;const g=ta(e),h=e.dom,y=(B,F)=>{let W;if(w(),O7(F))return null;if(o(F)){const Q=hP(g,F,B),te=L_(n,F,B);h.setStyle(Q,"top",te.top),h.setStyle(Q,"caret-color","transparent"),d=Q;const ae=h.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});h.setStyles(ae,{...te}),h.add(n,ae),i.set({caret:ae,element:F,before:B}),B&&h.addClass(ae,"mce-visual-caret-before"),T(),W=F.ownerDocument.createRange(),W.setStart(Q,0),W.setEnd(Q,0)}else return d=ZS(F,B),W=F.ownerDocument.createRange(),S1(d.nextSibling)?(W.setStart(d,0),W.setEnd(d,0)):(W.setStart(d,1),W.setEnd(d,1)),W;return W},w=()=>{M7(n),d&&(dm(d),d=null),i.on(B=>{h.remove(B.caret),i.clear()}),l&&(clearInterval(l),l=void 0)},T=()=>{l=window.setInterval(()=>{i.on(B=>{r()?h.toggleClass(B.caret,"mce-visual-caret-hidden"):h.addClass(B.caret,"mce-visual-caret-hidden")})},500)},_=()=>{i.on(B=>{const F=L_(n,B.element,B.before);h.setStyles(B.caret,{...F})})},N=()=>clearInterval(l),P=()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}";return{isShowing:i.isSet,show:y,hide:w,getCss:P,reposition:_,destroy:N}},I_=()=>yn.browser.isFirefox(),S1=e=>P_(e)||A7(e),x1=e=>(S1(e)||du(e)&&I_())&&jm(U.fromDom(e)).exists(Ju),R7=zc,Sx=wo,B7=Ji,w1=Ub("display","block table table-cell table-row table-caption list-item"),xx=bs,wx=Os,P7=ot,L7=Re,I7=Yc,ph=e=>e===1,vf=e=>e===-1,Iv=(e,n)=>{let o;for(;o=e(n);)if(!wx(o))return o;return null},bh=(e,n,o,r,i)=>{const l=new dr(e,r),d=Sx(e)||wx(e);let g;if(vf(n)){if(d&&(g=Iv(l.prev.bind(l),!0),o(g)))return g;for(;g=Iv(l.prev.bind(l),i);)if(o(g))return g}if(ph(n)){if(d&&(g=Iv(l.next.bind(l),!0),o(g)))return g;for(;g=Iv(l.next.bind(l),i);)if(o(g))return g}return null},F7=(e,n)=>{const o=i=>R7(i.dom),r=i=>i.dom===n;return Yu(U.fromDom(e),o,r).map(i=>i.dom).getOr(n)},gd=(e,n)=>{for(;e&&e!==n;){if(w1(e))return e;e=e.parentNode}return null},Ml=(e,n,o)=>gd(e.container(),o)===gd(n.container(),o),Ex=(e,n)=>{if(!n)return O.none();const o=n.container(),r=n.offset();return P7(o)?O.from(o.childNodes[r+e]):O.none()},F_=(e,n)=>{var o;const i=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),i},$7=(e,n,o)=>gd(n,e)===gd(o,e),$_=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let i=o;for(;i&&i!==n;){let l=i[r];if(l&&xx(l)&&(l=l[r]),Sx(l)||B7(l)){if($7(n,l,i))return l;break}if(I7(l))break;i=i.parentNode}return null},E1=Qe(F_,!0),k1=Qe(F_,!1),kx=(e,n,o)=>{let r;const i=Qe($_,!0,n),l=Qe($_,!1,n),d=o.startContainer,g=o.startOffset;if(Os(d)){const h=L7(d)?d.parentNode:d,y=h.getAttribute("data-mce-caret");if(y==="before"&&(r=h.nextSibling,x1(r)))return E1(r);if(y==="after"&&(r=h.previousSibling,x1(r)))return k1(r)}if(!o.collapsed)return o;if(Re(d)){if(xx(d)){if(e===1){if(r=l(d),r)return E1(r);if(r=i(d),r)return k1(r)}if(e===-1){if(r=i(d),r)return k1(r);if(r=l(d),r)return E1(r)}return o}if(uv(d)&&g>=d.data.length-1)return e===1&&(r=l(d),r)?E1(r):o;if(oh(d)&&g<=1)return e===-1&&(r=i(d),r)?k1(r):o;if(g===d.data.length)return r=l(d),r?E1(r):o;if(g===0)return r=i(d),r?k1(r):o}return o},H_=(e,n)=>Ex(e?0:-1,n).filter(Sx),T1=(e,n,o)=>{const r=kx(e,n,o);return e===-1?be.fromRangeStart(r):be.fromRangeEnd(r)},Fv=e=>O.from(e.getNode()).map(U.fromDom),H7=e=>O.from(e.getNode(!0)).map(U.fromDom),Tx=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},$v=(e,n)=>{const o=Ml(e,n);return!o&&zo(e.getNode())?!0:o},V7=wo,Cu=Re,V_=ot,_x=zo,vh=Yc,z_=zT,nt=ex,Hv=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},Ax=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,U_=(e,n)=>{if(ph(e)){if(vh(n.previousSibling)&&!Cu(n.previousSibling))return be.before(n);if(Cu(n))return be(n,0)}if(vf(e)){if(vh(n.nextSibling)&&!Cu(n.nextSibling))return be.after(n);if(Cu(n))return be(n,n.data.length)}return vf(e)?_x(n)?be.before(n):be.after(n):be.before(n)},Z_=(e,n)=>{const o=n.nextSibling;return o&&vh(o)?Cu(o)?be(o,0):be.before(o):yh(1,be.after(n),e)},yh=(e,n,o)=>{let r,i,l,d;if(!V_(o)||!n)return null;if(n.isEqual(be.after(o))&&o.lastChild){if(d=be.after(o.lastChild),vf(e)&&vh(o.lastChild)&&V_(o.lastChild))return _x(o.lastChild)?be.before(o.lastChild):d}else d=n;const g=d.container();let h=d.offset();if(Cu(g)){if(vf(e)&&h>0)return be(g,--h);if(ph(e)&&h<g.length)return be(g,++h);r=g}else{if(vf(e)&&h>0&&(i=Ax(g,h-1),vh(i)))return!z_(i)&&(l=bh(i,e,nt,i),l)?Cu(l)?be(l,l.data.length):be.after(l):Cu(i)?be(i,i.data.length):be.before(i);if(ph(e)&&h<g.childNodes.length&&(i=Ax(g,h),vh(i)))return _x(i)?Z_(o,i):!z_(i)&&(l=bh(i,e,nt,i),l)?Cu(l)?be(l,0):be.before(l):Cu(i)?be(i,0):be.after(i);r=i||d.getNode()}if(r&&(ph(e)&&d.isAtEnd()||vf(e)&&d.isAtStart())&&(r=bh(r,e,ze,o,!0),nt(r,o)))return U_(e,r);i=r&&bh(r,e,nt,o);const y=Is(et(Hv(g,o),V7));return y&&(!i||!y.contains(i))?(ph(e)?d=be.after(y):d=be.before(y),d):i?U_(e,i):null},Qc=e=>({next:n=>yh(1,n,e),prev:n=>yh(-1,n,e)}),_1=(e,n,o)=>{const r=e?be.before(o):be.after(o);return sc(e,n,r)},A1=e=>zo(e)?be.before(e):be.after(e),Ox=e=>be.isTextPosition(e)?e.offset()===0:Yc(e.getNode()),Vv=e=>{if(be.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return Yc(e.getNode(!0))},Dx=(e,n)=>!be.isTextPosition(e)&&!be.isTextPosition(n)&&e.getNode()===n.getNode(!0),z7=e=>!be.isTextPosition(e)&&zo(e.getNode()),U7=(e,n,o)=>e?!Dx(n,o)&&!z7(n)&&Vv(n)&&Ox(o):!Dx(o,n)&&Ox(n)&&Vv(o),sc=(e,n,o)=>{const r=Qc(n);return O.from(e?r.next(o):r.prev(o))},el=(e,n,o)=>sc(e,n,o).bind(r=>Ml(o,r,n)&&U7(e,o,r)?sc(e,n,r):O.some(r)),Mx=(e,n,o,r)=>el(e,n,o).bind(i=>r(i)?Mx(e,n,i,r):O.some(i)),yf=(e,n)=>{const o=e?n.firstChild:n.lastChild;return Re(o)?O.some(be(o,e?0:o.data.length)):o?Yc(o)?O.some(e?be.before(o):A1(o)):_1(e,n,o):O.none()},Ms=Qe(sc,!0),Ba=Qe(sc,!1),Ar=Qe(yf,!0),ti=Qe(yf,!1),zv="_mce_caret",rc=e=>ot(e)&&e.id===zv,Cf=(e,n)=>{let o=n;for(;o&&o!==e;){if(rc(o))return o;o=o.parentNode}return null},W_=e=>re(e.start),j_=e=>xt(e,"rng"),G_=e=>xt(e,"id"),q_=e=>xt(e,"name"),K_=e=>Pe.isArray(e.start),Ch=e=>!q_(e)&&$t(e.forward)?e.forward:!0,Nx=(e,n)=>(ot(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),Y_=(e,n)=>{const o=O.from(ax(e.getRoot(),n.start)),r=O.from(ax(e.getRoot(),n.end));return os(o,r,(i,l)=>{const d=e.createRng();return d.setStart(i.container(),i.offset()),d.setEnd(l.container(),l.offset()),{range:d,forward:Ch(n)}})},Z7=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Xs);e.appendChild(i),n.setStart(i,0),n.setEnd(i,0)},Rx=e=>!e.hasChildNodes(),W7=(e,n)=>ti(e).fold(ke,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),X_=(e,n,o)=>Rx(n)&&Cf(e,n)?(Z7(n,o),!0):!1,J_=(e,n,o,r)=>{const i=o[n?"start":"end"],l=e.getRoot();if(i){let d=l,g=i[0];for(let h=i.length-1;d&&h>=1;h--){const y=d.childNodes;if(X_(l,d,r))return!0;if(i[h]>y.length-1)return X_(l,d,r)?!0:W7(d,r);d=y[i[h]]}Re(d)&&(g=Math.min(i[0],d.data.length)),ot(d)&&(g=Math.min(i[0],d.childNodes.length)),n?r.setStart(d,g):r.setEnd(d,g)}return!0},Bx=e=>Re(e)&&e.data.length>0,Q_=(e,n,o)=>{const r=e.get(o.id+"_"+n),i=r==null?void 0:r.parentNode,l=o.keep;if(r&&i){let d,g;if(n==="start"?l?r.hasChildNodes()?(d=r.firstChild,g=1):Bx(r.nextSibling)?(d=r.nextSibling,g=0):Bx(r.previousSibling)?(d=r.previousSibling,g=r.previousSibling.data.length):(d=i,g=e.nodeIndex(r)+1):(d=i,g=e.nodeIndex(r)):l?r.hasChildNodes()?(d=r.firstChild,g=1):Bx(r.previousSibling)?(d=r.previousSibling,g=r.previousSibling.data.length):(d=i,g=e.nodeIndex(r)):(d=i,g=e.nodeIndex(r)),!l){const h=r.previousSibling,y=r.nextSibling;Pe.each(Pe.grep(r.childNodes),T=>{Re(T)&&(T.data=T.data.replace(/\uFEFF/g,""))});let w;for(;w=e.get(o.id+"_"+n);)e.remove(w,!0);if(Re(y)&&Re(h)&&!yn.browser.isOpera()){const T=h.data.length;h.appendData(y.data),e.remove(y),d=h,g=T}}return O.some(be(d,g))}else return O.none()},Uv=(e,n)=>{const o=e.createRng();return J_(e,!0,n,o)&&J_(e,!1,n,o)?O.some({range:o,forward:Ch(n)}):O.none()},eA=(e,n)=>{const o=Q_(e,"start",n),r=Q_(e,"end",n);return os(o,r.or(o),(i,l)=>{const d=e.createRng();return d.setStart(Nx(e,i.container()),i.offset()),d.setEnd(Nx(e,l.container()),l.offset()),{range:d,forward:Ch(n)}})},mG=(e,n)=>O.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),j7=(e,n)=>{const o=e.dom;if(n){if(K_(n))return Uv(o,n);if(W_(n))return Y_(o,n);if(G_(n))return eA(o,n);if(q_(n))return mG(o,n);if(j_(n))return O.some({range:n.rng,forward:Ch(n)})}return O.none()},Nt=(e,n,o)=>kP(e,n,o),G7=(e,n)=>{j7(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},ac=e=>ot(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Zv=(e=>n=>e===n)(to),Sf=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Px=e=>!Sf(e)&&!Zv(e)&&!qo(e),Wv=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},q7=e=>Ls(e,n=>{const o=fv(n);return o?[U.fromDom(o)]:[]}),Lx=e=>Wv(e).length>1,O1=e=>et(q7(e),nm),Sh=e=>go(e,"td[data-mce-selected],th[data-mce-selected]"),tA=(e,n)=>{const o=Sh(n);return o.length>0?o:O1(e)},hd=e=>tA(Wv(e.selection.getSel()),U.fromDom(e.getBody())),D1=(e,n)=>zp(e,"table",n),K7=e=>{const n=e.startContainer,o=e.startOffset;return Re(n)?o===0?O.some(U.fromDom(n)):O.none():O.from(n.childNodes[o]).map(U.fromDom)},Y7=e=>{const n=e.endContainer,o=e.endOffset;return Re(n)?o===n.data.length?O.some(U.fromDom(n)):O.none():O.from(n.childNodes[o-1]).map(U.fromDom)},nA=e=>Ys(e).fold(qe([e]),n=>[e].concat(nA(n))),jv=e=>Gm(e).fold(qe([e]),n=>En(n)==="br"?ou(n).map(o=>[e].concat(jv(o))).getOr([]):[e].concat(jv(n))),Ix=(e,n)=>os(K7(n),Y7(n),(o,r)=>{const i=ko(nA(e),Qe(sn,o)),l=ko(jv(e),Qe(sn,r));return i.isSome()&&l.isSome()}).getOr(!1),Fx=(e,n,o,r)=>{const i=o,l=new dr(o,i),d=Wr(e.schema.getMoveCaretBeforeOnEnterElements(),(h,y)=>!_t(["td","th","table"],y.toLowerCase()));let g=o;do{if(Re(g)&&Pe.trim(g.data).length!==0){r?n.setStart(g,0):n.setEnd(g,g.data.length);return}if(d[g.nodeName]){r?n.setStartBefore(g):g.nodeName==="BR"?n.setEndBefore(g):n.setEndAfter(g);return}}while(g=r?l.next():l.prev());i.nodeName==="BODY"&&(r?n.setStart(i,0):n.setEnd(i,i.childNodes.length))},Gv=e=>{const n=e.selection.getSel();return Oe(n)&&n.rangeCount>0},$x=(e,n)=>{const o=hd(e);o.length>0?pe(o,r=>{const i=r.dom,l=e.dom.createRng();l.setStartBefore(i),l.setEndAfter(i),n(l,!0)}):n(e.selection.getRng(),!1)},oA=(e,n,o)=>{const r=ei(e,n);o(r),e.moveToBookmark(r)},xf=e=>No(e==null?void 0:e.nodeType),Hx=e=>ot(e)&&!ac(e)&&!rc(e)&&!ef(e),X7=(e,n)=>{if(Hx(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},sA=(e,n,o)=>{const{selection:r,dom:i}=e,l=r.getNode(),d=wo(l);oA(r,!0,()=>{n()}),d&&wo(l)&&i.isChildOf(l,e.getBody())?e.selection.select(l):o(r.getStart())&&J7(i,r)},J7=(e,n)=>{var o,r;const i=n.getRng(),{startContainer:l,startOffset:d}=i,g=n.getNode();if(!X7(e,g)&&ot(l)){const h=l.childNodes,y=e.getRoot();let w;if(d<h.length){const T=h[d];w=new dr(T,(o=e.getParent(T,e.isBlock))!==null&&o!==void 0?o:y)}else{const T=h[h.length-1];w=new dr(T,(r=e.getParent(T,e.isBlock))!==null&&r!==void 0?r:y),w.next(!0)}for(let T=w.current();T;T=w.next()){if(e.getContentEditable(T)==="false")return;if(Re(T)&&!zx(T)){i.setStart(T,0),n.setRng(i);return}}}},rA=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(ot(e)||!zx(e))return e}},Vx=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Zc(e,n),xh=(e,n,o)=>e.schema.isValidChild(n,o),zx=(e,n=!1)=>{if(Oe(e)&&Re(e)){const o=n?e.data.replace(/ /g,"¬†"):e.data;return as(o)}else return!1},wf=e=>Oe(e)&&Re(e)&&e.length===0,Q7=(e,n)=>{const o="[data-mce-cef-wrappable]",r=o7(e),i=Dc(r)?o:`${o},${r}`;return Ga(U.fromDom(n),i)},aA=(e,n)=>{const o=e.dom;return Hx(n)&&o.getContentEditable(n)==="false"&&Q7(e,n)&&o.select('[contenteditable="true"]',n).length===0},mm=(e,n)=>jt(e)?e(n):(Oe(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),Ux=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),Zx=(e,n)=>{if(hn(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=Qp(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},M1=(e,n,o)=>{const r=e.getStyle(n,o);return Zx(r,o)},iA=(e,n)=>{let o;return e.getParent(n,r=>ot(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},qv=(e,n,o)=>e.getParents(n,o,e.getRoot()),Wx=(e,n,o)=>{const r=e.formatter.get(n);return Oe(r)&&Vn(r,o)},eL=(e,n)=>Wx(e,n,r=>{const i=l=>jt(l)||l.length>1&&l.charAt(0)==="%";return Vn(["styles","attributes"],l=>oo(r,l).exists(d=>{const g=Qn(d)?d:Hu(d);return Vn(g,i)}))}),tL=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],i=l=>Wr(l,(d,g)=>Vn(r,h=>h===g));return Wx(e,n,l=>{const d=i(l);return Wx(e,o,g=>{const h=i(g);return Pm(d,h)})})},Su=e=>vl(e,"block"),nL=e=>Su(e)&&e.wrapper===!0,oL=e=>Su(e)&&e.wrapper!==!0,ic=e=>vl(e,"selector"),Qs=e=>vl(e,"inline"),sL=e=>ic(e)&&Qs(e)&&pa(oo(e,"mixed"),!0),jx=e=>ic(e)&&e.expand!==!1&&!Qs(e),rL=e=>{const n=[];let o=e;for(;o;){if(Re(o)&&o.data!==Xs||o.childNodes.length>1)return[];ot(o)&&n.push(o),o=o.firstChild}return n},lo=e=>rL(e).length>0,Kv=e=>rc(e.dom)&&lo(e.dom),wh=ac,cA=qv,Yv=zx,$r=Vx,Ai=e=>zo(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,aL=(e,n)=>{let o=n;for(;o;){if(ot(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},iL=(e,n,o,r)=>{const i=n.data;if(e){for(let l=o;l>0;l--)if(r(i.charAt(l-1)))return l}else for(let l=o;l<i.length;l++)if(r(i.charAt(l)))return l;return-1},gG=(e,n,o)=>iL(e,n,o,r=>Zv(r)||Sf(r)),cL=(e,n,o)=>iL(e,n,o,Px),lA=(e,n,o,r,i,l)=>{let d;const g=e.getParent(o,T=>Kd(T)||e.isBlock(T)),h=Oe(g)?g:n,y=(T,_,N)=>{const P=bu(e),B=i?P.backwards:P.forwards;return O.from(B(T,_,(F,W)=>wh(F.parentNode)?-1:(d=F,N(i,F,W)),h))};return y(o,r,gG).bind(T=>l?y(T.container,T.offset+(i?-1:0),cL):O.some(T)).orThunk(()=>d?O.some({container:d,offset:i?0:d.length}):O.none())},lL=(e,n,o,r,i)=>{const l=r[i];Re(r)&&Dc(r.data)&&l&&(r=l);const d=cA(e,r);for(let g=0;g<d.length;g++)for(let h=0;h<n.length;h++){const y=n[h];if(!(Oe(y.collapsed)&&y.collapsed!==o.collapsed)&&ic(y)&&e.is(d[g],y.selector))return d[g]}return r},uA=(e,n,o,r)=>{var i;let l=o;const d=e.getRoot(),g=n[0];if(Su(g)&&(l=g.wrapper?null:e.getParent(o,g.block,d)),!l){const h=(i=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&i!==void 0?i:d;l=e.getParent(Re(o)?o.parentNode:o,y=>y!==d&&$r(e.schema,y),h)}if(l&&Su(g)&&g.wrapper&&(l=cA(e,l,"ul,ol").reverse()[0]||l),!l)for(l=o;l&&l[r]&&!e.isBlock(l[r])&&(l=l[r],!Ux(l,"br")););return l||o},tl=(e,n,o,r)=>{const i=o.parentNode;return Oe(o[r])?!1:i===n||hn(i)||e.isBlock(i)?!0:tl(e,n,i,r)},Gx=(e,n,o,r,i,l)=>{let d=o;const g=i?"previousSibling":"nextSibling",h=e.getRoot();if(Re(o)&&!Yv(o)&&(i?r>0:r<o.data.length))return o;for(;d;){if(Kd(d))return o;if(!n[0].block_expand&&e.isBlock(d))return l?d:o;for(let y=d[g];y;y=y[g]){const w=Re(y)&&!tl(e,h,y,g);if(!wh(y)&&!Ai(y)&&!Yv(y,w))return d}if(d===h||d.parentNode===h){o=d;break}d=d.parentNode}return o},dA=e=>wh(e.parentNode)||wh(e),Ef=(e,n,o,r={})=>{const{includeTrailingSpace:i=!1,expandToBlock:l=!0}=r,d=e.getParent(n.commonAncestorContainer,N=>Kd(N)),g=Oe(d)?d:e.getRoot();let{startContainer:h,startOffset:y,endContainer:w,endOffset:T}=n;const _=o[0];return ot(h)&&h.hasChildNodes()&&(h=Fr(h,y),Re(h)&&(y=0)),ot(w)&&w.hasChildNodes()&&(w=Fr(w,n.collapsed?T:T-1),Re(w)&&(T=w.data.length)),h=aL(e,h),w=aL(e,w),dA(h)&&(h=wh(h)?h:h.parentNode,n.collapsed?h=h.previousSibling||h:h=h.nextSibling||h,Re(h)&&(y=n.collapsed?h.length:0)),dA(w)&&(w=wh(w)?w:w.parentNode,n.collapsed?w=w.nextSibling||w:w=w.previousSibling||w,Re(w)&&(T=n.collapsed?0:w.length)),n.collapsed&&(lA(e,g,h,y,!0,i).each(({container:B,offset:F})=>{h=B,y=F}),lA(e,g,w,T,!1,i).each(({container:B,offset:F})=>{w=B,T=F})),(Qs(_)||_.block_expand)&&((!Qs(_)||!Re(h)||y===0)&&(h=Gx(e,o,h,y,!0,l)),(!Qs(_)||!Re(w)||T===w.data.length)&&(w=Gx(e,o,w,T,!1,l))),jx(_)&&(h=lL(e,o,n,h,"previousSibling"),w=lL(e,o,n,w,"nextSibling")),(Su(_)||ic(_))&&(h=uA(e,o,h,"previousSibling"),w=uA(e,o,w,"nextSibling"),Su(_)&&(e.isBlock(h)||(h=Gx(e,o,h,y,!0,l),Re(h)&&(y=0)),e.isBlock(w)||(w=Gx(e,o,w,T,!1,l),Re(w)&&(T=w.data.length)))),ot(h)&&h.parentNode&&(y=e.nodeIndex(h),h=h.parentNode),ot(w)&&w.parentNode&&(T=e.nodeIndex(w)+1,w=w.parentNode),{startContainer:h,startOffset:y,endContainer:w,endOffset:T}},an=(e,n,o)=>{var r;const i=n.startOffset,l=Fr(n.startContainer,i),d=n.endOffset,g=Fr(n.endContainer,d-1),h=F=>{const W=F[0];Re(W)&&W===l&&i>=W.data.length&&F.splice(0,1);const Q=F[F.length-1];return d===0&&F.length>0&&Q===g&&Re(Q)&&F.splice(F.length-1,1),F},y=(F,W,Q)=>{const te=[];for(;F&&F!==Q;F=F[W])te.push(F);return te},w=(F,W)=>e.getParent(F,Q=>Q.parentNode===W,W),T=(F,W,Q)=>{const te=Q?"nextSibling":"previousSibling";for(let ae=F,Se=ae.parentNode;ae&&ae!==W;ae=Se){Se=ae.parentNode;const De=y(ae===F?ae:ae[te],te);De.length&&(Q||De.reverse(),o(h(De)))}};if(l===g)return o(h([l]));const _=(r=e.findCommonAncestor(l,g))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(l,g))return T(l,_,!0);if(e.isChildOf(g,l))return T(g,_);const N=w(l,_)||l,P=w(g,_)||g;T(l,N,!0);const B=y(N===l?N:N.nextSibling,"nextSibling",P===g?P.nextSibling:P);B.length&&o(h(B)),T(g,P)},hG=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],pG=e=>Kr(e)&&Vg(e)===Xs,uL=(e,n,o,r)=>jm(n).fold(()=>"skipping",i=>r==="br"||pG(n)?"valid":RT(n)?"existing":rc(n.dom)?"caret":Vn(hG,l=>Ga(n,l))?"valid-block":!xh(e,o,r)||!xh(e,En(i),o)?"invalid-child":"valid"),dL=(e,n)=>{const o=Ef(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},mL=(e,n,o,r,i,l)=>{const{uid:d=n,...g}=o;fo(e,df()),$s(e,`${mf()}`,d),$s(e,`${Wn()}`,r);const{attributes:h={},classes:y=[]}=i(d,g);if(qa(e,h),pB(e,y),l){y.length>0&&$s(e,`${s1()}`,y.join(","));const w=ws(h);w.length>0&&$s(e,`${ff()}`,w.join(","))}},fL=e=>{wr(e,df()),_s(e,`${mf()}`),_s(e,`${Wn()}`),_s(e,`${Qg()}`);const n=Xr(e,`${ff()}`).map(r=>r.split(",")).getOr([]),o=Xr(e,`${s1()}`).map(r=>r.split(",")).getOr([]);pe(n,r=>_s(e,r)),bB(e,o),_s(e,`${s1()}`),_s(e,`${ff()}`)},Lo=(e,n,o,r,i)=>{const l=U.fromTag("span",e);return mL(l,n,o,r,i,!1),l},gL=(e,n,o,r,i,l)=>{const d=[],g=Lo(e.getDoc(),o,l,r,i),h=br(),y=()=>{h.clear()},w=()=>h.get().getOrThunk(()=>{const P=H(g);return d.push(P),h.set(P),P}),T=P=>{pe(P,_)},_=P=>{switch(uL(e,P,"span",En(P))){case"invalid-child":{y();const F=ur(P);T(F),y();break}case"valid-block":{y(),mL(P,o,l,r,i,!0);break}case"valid":{const F=w();$g(P,F);break}}},N=P=>{const B=At(P,U.fromDom);T(B)};return an(e.dom,n,P=>{y(),N(P)}),d},mA=(e,n,o,r)=>{e.undoManager.transact(()=>{const i=e.selection,l=i.getRng(),d=hd(e).length>0,g=ha("mce-annotation");if(l.collapsed&&!d&&dL(e,l),i.getRng().collapsed&&!d){const h=Lo(e.getDoc(),g,r,n,o.decorate);on(h,to),i.getRng().insertNode(h.dom),i.select(h.dom)}else oA(i,!1,()=>{$x(e,h=>{gL(e,h,g,n,o.decorate,r)})})})},Xv=e=>{const n=tm();iP(e,n);const o=aP(e,n),r=Fs("span"),i=l=>{pe(l,d=>{r(d)?E(d):fL(d)})};return{register:(l,d)=>{n.register(l,d)},annotate:(l,d)=>{n.lookup(l).each(g=>{mA(e,l,g,d)})},annotationChanged:(l,d)=>{o.addListener(l,d)},remove:l=>{NT(e,O.some(l)).each(({elements:d})=>{const g=e.selection.getBookmark();i(d),e.selection.moveToBookmark(g)})},removeAll:l=>{const d=e.selection.getBookmark();Ze($S(e,l),(g,h)=>{i(g)}),e.selection.moveToBookmark(d)},getAll:l=>{const d=$S(e,l);return Yt(d,g=>At(g,h=>h.dom))}}},N1=e=>({getBookmark:Qe(Nt,e),moveToBookmark:Qe(G7,e)});N1.isBookmarkNode=ac;const fA=(e,n,o)=>o.collapsed?!1:Vn(o.getClientRects(),r=>KS(r,e,n)),gA=(e,n)=>{const o=Kr(n)?Vg(n).length:ur(n).length+1;return e>o?o:e<0?0:e},hL=e=>Wg.range(e.start,gA(e.soffset,e.start),e.finish,gA(e.foffset,e.finish)),hA=(e,n)=>!jg(n.dom)&&(Ki(e,n)||sn(e,n)),pA=e=>n=>hA(e,n.start)&&hA(e,n.finish),qx=e=>e.inline||yn.browser.isFirefox(),Kx=e=>Wg.range(U.fromDom(e.startContainer),e.startOffset,U.fromDom(e.endContainer),e.endOffset),bA=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?O.none():O.from(n.getRangeAt(0))).map(Kx)},bG=e=>{const n=nu(e);return bA(n.dom).filter(pA(e))},pL=(e,n)=>O.from(n).filter(pA(e)).map(hL),vG=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),O.some(n)}catch{return O.none()}},Yx=e=>{const n=qx(e)?bG(U.fromDom(e.getBody())):O.none();e.bookmark=n.isSome()?n:e.bookmark},Xx=e=>(e.bookmark?e.bookmark:O.none()).bind(o=>pL(U.fromDom(e.getBody()),o)).bind(vG),bL=e=>{Xx(e).each(n=>e.selection.setRng(n))},cc={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},vL=(e,n)=>(No(n)||(n=0),window.setTimeout(e,n)),vA=(e,n)=>(No(n)||(n=0),window.setInterval(e,n)),lc={setEditorTimeout:(e,n,o)=>vL(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=vA(()=>{e.removed?window.clearInterval(r):n()},o);return r}},yA=(e,n)=>e.view(n).fold(qe([]),r=>{const i=e.owner(r),l=yA(e,i);return[r].concat(l)}),yL=(e,n)=>{const o=n.owner(e);return yA(n,o)};var Jx=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?O.none():O.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(U.fromDom)},owner:e=>tu(e)});const Jv=e=>{const n=Fp(),o=Vp(n),r=yL(e,Jx),i=cS(e),l=Ac(r,(d,g)=>{const h=cS(g);return{left:d.left+h.left,top:d.top+h.top}},{left:0,top:0});return Br(l.left+i.left+o.left,l.top+i.top+o.top)},Qx=e=>e.type==="nodechange"&&e.selectionChange,xL=(e,n)=>{const o=()=>{n.throttle()};Ln.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Ln.DOM.unbind(document,"mouseup",o)})},wL=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},EL=(e,n)=>{wL(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{Qx(o)||Yx(e)})},kL=e=>{const n=yr(()=>{Yx(e)},0);e.on("init",()=>{e.inline&&xL(e,n),EL(e,n)}),e.on("remove",()=>{n.cancel()})};let fm;const Qv=Ln.DOM,TL=e=>ot(e)&&cc.isEditorUIElement(e),e2=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},t2=(e,n)=>{const o=s7(e);return Qv.getParent(n,i=>TL(i)||(o?e.dom.is(i,o):!1))!==null},R1=e=>{try{const n=Yi(U.fromDom(e.getElement()));return Km(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},_L=(e,n)=>{const o=n.editor;kL(o);const r=(l,d)=>{if(b7(l)&&l.inline!==!0){const g=U.fromDom(l.getContainer());d(g,"tox-edit-focus")}},i=l=>{if(!l.iframeElement)return;const g=U.fromDom(l.iframeElement),h=Jv(g),y=jp(window);(h.top<y.y||h.top>y.bottom-25)&&g.dom.scrollIntoView({block:"center"})};o.on("focusin",()=>{const l=e.focusedEditor;if(e2(R1(o))&&r(o,fo),l!==o){l&&l.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:l}),o.focus(!0);const d=Mr().browser;o.inline!==!0&&(d.isSafari()||d.isChromium())&&i(o)}}),o.on("focusout",()=>{lc.setEditorTimeout(o,()=>{const l=e.focusedEditor;(!e2(R1(o))||l!==o)&&r(o,wr),!t2(o,R1(o))&&l===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),fm||(fm=l=>{const d=e.activeEditor;d&&kb(l).each(g=>{const h=g;h.ownerDocument===document&&h!==document.body&&!t2(d,h)&&e.focusedEditor===d&&(d.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},Qv.bind(document,"focusin",fm))},AL=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&fm&&(Qv.unbind(document,"focusin",fm),fm=null)},OL=e=>{e.on("AddEditor",Qe(_L,e)),e.on("RemoveEditor",Qe(AL,e))},DL=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),ML=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,CA=e=>e.collapsed?O.from(Fr(e.startContainer,e.startOffset)).map(U.fromDom):O.none(),ew=(e,n)=>CA(n).bind(o=>US(o)?O.some(o):Ki(e,o)?O.none():O.some(e)),tw=(e,n)=>{ew(U.fromDom(e.getBody()),n).bind(o=>Ar(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},B1=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},NL=e=>Ab(e)||Fc(e).isSome(),RL=e=>Oe(e.iframeElement)&&Ab(U.fromDom(e.iframeElement)),BL=e=>{const n=e.getBody();return n&&NL(U.fromDom(n))},n2=e=>{const n=Yi(U.fromDom(e.getElement()));return Km(n).filter(o=>!e2(o.dom)&&t2(e,o.dom)).isSome()},kf=e=>e.inline?BL(e):RL(e),o2=e=>kf(e)||n2(e),PL=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const i=d=>{Xx(d).each(g=>{d.selection.setRng(g),r=g})};!kf(e)&&e.hasEditableRoot()&&i(e);const l=DL(e,n.getNode());if(l&&e.dom.isChildOf(l,o)){ML(e,l)||B1(o),B1(l),e.hasEditableRoot()||i(e),tw(e,r),nw(e);return}e.inline||(yn.browser.isOpera()||B1(o),e.getWin().focus()),(yn.browser.isFirefox()||e.inline)&&(B1(o),tw(e,r)),nw(e)},nw=e=>e.editorManager.setActive(e),yG=(e,n)=>{e.removed||(n?nw(e):PL(e))},Je={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Je.metaKeyPressed(e),metaKeyPressed:e=>yn.os.isMacOS()||yn.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Eh="data-mce-selected",LL="table,img,figure.image,hr,video,span.mce-preview-object,details",IL=Math.abs,s2=Math.round,ow={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},CG=e=>e.type==="longpress"||e.type.indexOf("touch")===0,SA=(e,n)=>{const o=n.dom,r=n.getDoc(),i=document,l=n.getBody();let d,g,h,y,w,T,_,N,P,B,F,W,Q,te,ae;const Se=ye=>Oe(ye)&&(dT(ye)||o.is(ye,"figure.image")),De=ye=>Ji(ye)||o.hasClass(ye,"mce-preview-object"),Ke=(ye,Me)=>{if(CG(ye)){const at=ye.touches[0];return Se(ye.target)&&!fA(at.clientX,at.clientY,Me)}else return Se(ye.target)&&!fA(ye.clientX,ye.clientY,Me)},ge=ye=>{const Me=ye.target;Ke(ye,n.selection.getRng())&&!ye.isDefaultPrevented()&&n.selection.select(Me)},le=ye=>o.hasClass(ye,"mce-preview-object")&&Oe(ye.firstElementChild)?[ye,ye.firstElementChild]:o.is(ye,"figure.image")?[ye.querySelector("img")]:[ye],Ee=ye=>{const Me=a_(n);return!Me||n.mode.isReadOnly()||ye.getAttribute("data-mce-resize")==="false"||ye===n.getBody()?!1:o.hasClass(ye,"mce-preview-object")&&Oe(ye.firstElementChild)?Ga(U.fromDom(ye.firstElementChild),Me):Ga(U.fromDom(ye),Me)},Ge=(ye,Me)=>{if(De(Me))return ye.create("img",{src:yn.transparentSrc});if(du(Me)){const qt=es(y.name,"n")?Go:pr,tn=Me.cloneNode(!0);return qt(ye.select("tr",tn)).each(Dn=>{const Ec=ye.select("td,th",Dn);ye.setStyle(Dn,"height",null),pe(Ec,Bu=>ye.setStyle(Bu,"height",null))}),tn}else return Me.cloneNode(!0)},lt=(ye,Me,at)=>{if(Oe(at)){const qt=le(ye);pe(qt,tn=>{tn.style[Me]||!n.schema.isValid(tn.nodeName.toLowerCase(),Me)?o.setStyle(tn,Me,at):o.setAttrib(tn,Me,""+at)})}},Gt=(ye,Me,at)=>{lt(ye,"width",Me),lt(ye,"height",at)},Kt=ye=>{let Me,at,qt,tn,Dn;Me=ye.screenX-T,at=ye.screenY-_,W=Me*y[2]+N,Q=at*y[3]+P,W=W<5?5:W,Q=Q<5?5:Q,(Se(d)||De(d))&&JP(n)!==!1?qt=!Je.modifierPressed(ye):qt=Je.modifierPressed(ye),qt&&(IL(Me)>IL(at)?(Q=s2(W*B),W=s2(Q/B)):(W=s2(Q/B),Q=s2(W*B))),Gt(g,W,Q),tn=y.startPos.x+Me,Dn=y.startPos.y+at,tn=tn>0?tn:0,Dn=Dn>0?Dn:0,o.setStyles(h,{left:tn,top:Dn,display:"block"}),h.innerHTML=W+" &times; "+Q,Me=l.scrollWidth-te,at=l.scrollHeight-ae,Me+at!==0&&o.setStyles(h,{left:tn-Me,top:Dn-at}),F||(ve(n,d,N,P,"corner-"+y.name),F=!0)},_n=()=>{const ye=F;F=!1,ye&&(lt(d,"width",W),lt(d,"height",Q)),o.unbind(r,"mousemove",Kt),o.unbind(r,"mouseup",_n),i!==r&&(o.unbind(i,"mousemove",Kt),o.unbind(i,"mouseup",_n)),o.remove(g),o.remove(h),o.remove(w),In(d),ye&&(cx(n,d,W,Q,"corner-"+y.name),o.setAttrib(d,"style",o.getAttrib(d,"style"))),n.nodeChanged()},In=ye=>{it();const Me=o.getPos(ye,l),at=Me.x,qt=Me.y,tn=ye.getBoundingClientRect(),Dn=tn.width||tn.right-tn.left,Ec=tn.height||tn.bottom-tn.top;d!==ye&&(Bs(),d=ye,W=Q=0);const Bu=n.dispatch("ObjectSelected",{target:ye});Ee(ye)&&!Bu.isDefaultPrevented()?Ze(ow,(aa,$a)=>{const Pi=Ta=>{const kc=le(d)[0];T=Ta.screenX,_=Ta.screenY,N=kc.clientWidth,P=kc.clientHeight,B=P/N,y=aa,y.name=$a,y.startPos={x:Dn*aa[0]+at,y:Ec*aa[1]+qt},te=l.scrollWidth,ae=l.scrollHeight,w=o.add(l,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(w,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),g=Ge(o,d),o.addClass(g,"mce-clonedresizable"),o.setAttrib(g,"data-mce-bogus","all"),g.contentEditable="false",o.setStyles(g,{left:at,top:qt,margin:0}),Gt(g,Dn,Ec),g.removeAttribute(Eh),l.appendChild(g),o.bind(r,"mousemove",Kt),o.bind(r,"mouseup",_n),i!==r&&(o.bind(i,"mousemove",Kt),o.bind(i,"mouseup",_n)),h=o.add(l,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},N+" &times; "+P)};let zr=o.get("mceResizeHandle"+$a);zr&&o.remove(zr),zr=o.add(l,"div",{id:"mceResizeHandle"+$a,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+$a+"-resize; margin:0; padding:0"}),o.bind(zr,"mousedown",Ta=>{Ta.stopImmediatePropagation(),Ta.preventDefault(),Pi(Ta)}),aa.elm=zr,o.setStyles(zr,{left:Dn*aa[0]+at-zr.offsetWidth/2,top:Ec*aa[1]+qt-zr.offsetHeight/2})}):Bs(!1)},Oo=yr(In,0),Bs=(ye=!0)=>{Oo.cancel(),it(),d&&ye&&d.removeAttribute(Eh),Ze(ow,(Me,at)=>{const qt=o.get("mceResizeHandle"+at);qt&&(o.unbind(qt),o.remove(qt))})},js=(ye,Me)=>o.isChildOf(ye,Me),$e=ye=>{if(F||n.removed||n.composing)return;const Me=ye.type==="mousedown"?ye.target:e.getNode(),at=Gd(U.fromDom(Me),LL).map(tn=>tn.dom).filter(tn=>o.isEditable(tn.parentElement)||tn.nodeName==="IMG"&&o.isEditable(tn)).getOrUndefined(),qt=Oe(at)?o.getAttrib(at,Eh,"1"):"1";if(pe(o.select(`img[${Eh}],hr[${Eh}]`),tn=>{tn.removeAttribute(Eh)}),Oe(at)&&js(at,l)&&o2(n)){xn();const tn=e.getStart(!0);if(js(tn,at)&&js(e.getEnd(!0),at)){o.setAttrib(at,Eh,qt),Oo.throttle(at);return}}Bs()},it=()=>{Ze(ow,ye=>{ye.elm&&(o.unbind(ye.elm),delete ye.elm)})},xn=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{xn(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",$e),n.on("keyup compositionend",ye=>{d&&d.nodeName==="TABLE"&&$e(ye)}),n.on("hide blur",Bs),n.on("contextmenu longpress",ge,!0)}),n.on("remove",it),{isResizable:Ee,showResizeRect:In,hideResizeRect:Bs,updateResizeRect:$e,destroy:()=>{Oo.cancel(),d=g=w=null}}},po=(e,n,o)=>{const r=nu(U.fromDom(o));return oG(r.dom,e,n).map(i=>{const l=o.createRange();return l.setStart(i.start.dom,i.soffset),l.setEnd(i.finish.dom,i.foffset),l}).getOrUndefined()},P1=(e,n)=>Oe(e)&&Oe(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,r2=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},L1=(e,n,o)=>r2(e,n,o)!==null,pd=(e,n,o)=>L1(e,n,r=>r.nodeName===o),a2=(e,n)=>bs(e)&&!L1(e,n,rc),Tf=(e,n,o)=>{const r=n.parentNode;if(r){const i=new dr(n,e.getParent(r,e.isBlock)||e.getRoot());let l;for(;l=i[o?"prev":"next"]();)if(zo(l))return!0}return!1},xA=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},FL=(e,n)=>{let o=n;for(;o&&o!==e;){if(wo(o))return!0;o=o.parentNode}return!1},sw=(e,n,o,r,i)=>{const l=e.getRoot(),d=e.schema.getNonEmptyElements(),g=i.parentNode;let h,y;if(!g)return O.none();const w=e.getParent(g,e.isBlock)||l;if(r&&zo(i)&&n&&e.isEmpty(w))return O.some(be(g,e.nodeIndex(i)));const T=new dr(i,w);for(;y=T[r?"prev":"next"]();){if(e.getContentEditableParent(y)==="false"||a2(y,l))return O.none();if(Re(y)&&y.data.length>0)return pd(y,l,"A")?O.none():O.some(be(y,r?y.data.length:0));if(e.isBlock(y)||d[y.nodeName.toLowerCase()])return O.none();h=y}return mu(h)?O.none():o&&h?O.some(be(h,0)):O.none()},rw=(e,n,o,r)=>{const i=e.getRoot();let l,d=!1,g=o?r.startContainer:r.endContainer,h=o?r.startOffset:r.endOffset;const y=ot(g)&&h===g.childNodes.length,w=e.schema.getNonEmptyElements();let T=o;if(bs(g))return O.none();if(ot(g)&&h>g.childNodes.length-1&&(T=!1),Gp(g)&&(g=i,h=0),g===i){if(T&&(l=g.childNodes[h>0?h-1:0],l&&(bs(l)||w[l.nodeName]||du(l))))return O.none();if(g.hasChildNodes()){if(h=Math.min(!T&&h>0?h-1:h,g.childNodes.length-1),g=g.childNodes[h],h=Re(g)&&y?g.data.length:0,!n&&g===i.lastChild&&du(g)||FL(i,g)||bs(g)||hs(g))return O.none();if(g.hasChildNodes()&&!du(g)){l=g;const _=new dr(g,i);do{if(wo(l)||bs(l)){d=!1;break}if(Re(l)&&l.data.length>0){h=T?0:l.data.length,g=l,d=!0;break}if(w[l.nodeName.toLowerCase()]&&!Uc(l)){h=e.nodeIndex(l),g=l.parentNode,T||h++,d=!0;break}}while(l=T?_.next():_.prev())}}}return n&&(Re(g)&&h===0&&sw(e,y,n,!0,g).each(_=>{g=_.container(),h=_.offset(),d=!0}),ot(g)&&(l=g.childNodes[h],l||(l=g.childNodes[h-1]),l&&zo(l)&&!xA(l,"A")&&!Tf(e,l,!1)&&!Tf(e,l,!0)&&sw(e,y,n,!0,l).each(_=>{g=_.container(),h=_.offset(),d=!0}))),T&&!n&&Re(g)&&h===g.data.length&&sw(e,y,n,!1,g).each(_=>{g=_.container(),h=_.offset(),d=!0}),d&&g?O.some(be(g,h)):O.none()},i2=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),i=be.fromRangeStart(n);return rw(e,o,!0,r).each(l=>{(!o||!be.isAbove(i,l))&&r.setStart(l.container(),l.offset())}),o||rw(e,o,!1,r).each(l=>{r.setEnd(l.container(),l.offset())}),o&&r.collapse(!0),P1(n,r)?O.none():O.some(r)},kh=(e,n)=>e.splitText(n),_f=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,i=e.endOffset;if(n===r&&Re(n)){if(o>0&&o<n.data.length)if(r=kh(n,o),n=r.previousSibling,i>o){i=i-o;const l=kh(r,i).previousSibling;n=r=l,i=l.data.length,o=0}else i=0}else if(Re(n)&&o>0&&o<n.data.length&&(n=kh(n,o),o=0),Re(r)&&i>0&&i<r.data.length){const l=kh(r,i).previousSibling;r=l,i=l.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:i}},Oi=e=>({walk:(l,d)=>an(e,l,d),split:_f,expand:(l,d={type:"word"})=>{if(d.type==="word"){const g=Ef(e,l,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),h=e.createRng();return h.setStart(g.startContainer,g.startOffset),h.setEnd(g.endContainer,g.endOffset),h}return l},normalize:l=>i2(e,l).fold(ke,d=>(l.setStart(d.startContainer,d.startOffset),l.setEnd(d.endContainer,d.endOffset),!0))});Oi.compareRanges=P1,Oi.getCaretRangeFromPoint=po,Oi.getSelectedNode=fv,Oi.getNode=Fr;const bd=e=>En(e)==="textarea",wA=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),$L=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},HL=(e,n)=>{const o=ur(e);if(o.length===0||bd(e))return{element:e,offset:n};if(n<o.length&&!bd(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return bd(r)?{element:e,offset:n}:En(r)==="img"?{element:r,offset:1}:Kr(r)?{element:r,offset:Vg(r).length}:{element:r,offset:ur(r).length}}},EA=(e,n)=>{const o=mB(e),r=$c(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},VL=(e,n)=>{const o=HL(e,n),r=U.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Xs+"</span>");return Yr(o.element,r),EA(r,()=>v(r))},zL=e=>EA(U.fromDom(e),ct),kA=(e,n,o,r)=>{ZL(e,(i,l)=>UL(e,n,o,r),o)},aw=(e,n,o,r,i)=>{const l={elm:r.element.dom,alignToTop:i};if(wA(e,l))return;const d=Vp(n).top;o(e,n,d,r,i),$L(e,l)},UL=(e,n,o,r)=>{const i=U.fromDom(e.getBody()),l=U.fromDom(e.getDoc());Ho(i);const d=VL(U.fromDom(o.startContainer),o.startOffset);aw(e,l,n,d,r),d.cleanup()},TA=(e,n,o,r)=>{const i=U.fromDom(e.getDoc());aw(e,i,o,zL(n),r)},ZL=(e,n,o)=>{const r=o.startContainer,i=o.startOffset,l=o.endContainer,d=o.endOffset;n(U.fromDom(r),U.fromDom(l));const g=e.dom.createRng();g.setStart(r,i),g.setEnd(l,d),e.selection.setRng(o)},_A=(e,n,o,r,i)=>{const l=n.pos,d=30;if(r)Jk(l.left,Math.max(0,l.top-d),i);else{const g=l.top-o+n.height+d;Jk(-e.getBody().getBoundingClientRect().left,g,i)}},AA=(e,n,o,r,i,l)=>{const d=r+o,g=i.pos.top,h=i.bottom,y=h-g>=r;g<o?_A(e,i,r,l!==!1,n):g>d?_A(e,i,r,y?l!==!1:l===!0,n):h>d&&!y&&_A(e,i,r,l===!0,n)},Us=(e,n,o,r,i)=>{const l=nu(n).dom.innerHeight;AA(e,n,o,l,r,i)},I1=(e,n,o,r,i)=>{const l=nu(n).dom.innerHeight;AA(e,n,o,l,r,i);const d=Jv(r.element),g=jp(window);d.top<g.y?Bb(r.element,i!==!1):d.top>g.bottom&&Bb(r.element,i===!0)},hr=(e,n,o)=>kA(e,Us,n,o),nl=(e,n,o)=>TA(e,n,Us,o),WL=(e,n,o)=>kA(e,I1,n,o),OA=(e,n,o)=>TA(e,n,I1,o),jL=(e,n,o)=>{(e.inline?nl:OA)(e,n,o)},Af=(e,n,o)=>{(e.inline?hr:WL)(e,n,o)},DA=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),iw=(e,n,o,r,i)=>{const l=o?n.startContainer:n.endContainer,d=o?n.startOffset:n.endOffset;return O.from(l).map(U.fromDom).map(g=>!r||!n.collapsed?ru(g,i(g,d)).getOr(g):g).bind(g=>ya(g)?O.some(g):Lc(g).filter(ya)).map(g=>g.dom).getOr(e)},MA=(e,n,o=!1)=>iw(e,n,!0,o,(r,i)=>Math.min(Lg(r),i)),NA=(e,n,o=!1)=>iw(e,n,!1,o,(r,i)=>i>0?i-1:i),RA=(e,n)=>{const o=e;for(;e&&Re(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},Di=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const i=n.startOffset,l=n.endOffset;let d=n.commonAncestorContainer;n.collapsed||(o===r&&l-i<2&&o.hasChildNodes()&&(d=o.childNodes[i]),Re(o)&&Re(r)&&(o.length===i?o=RA(o.nextSibling,!0):o=o.parentNode,l===0?r=RA(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(d=o)));const g=Re(d)?d.parentNode:d;return uu(g)?g:e},na=(e,n,o,r)=>{const i=[],l=e.getRoot(),d=e.getParent(o||MA(l,n,n.collapsed),e.isBlock),g=e.getParent(r||NA(l,n,n.collapsed),e.isBlock);if(d&&d!==l&&i.push(d),d&&g&&d!==g){let h;const y=new dr(d,l);for(;(h=y.next())&&h!==g;)e.isBlock(h)&&i.push(h)}return g&&d!==g&&g!==l&&i.push(g),i},SG=(e,n,o)=>O.from(n).bind(r=>O.from(r.parentNode).map(i=>{const l=e.nodeIndex(r),d=e.createRng();return d.setStart(i,l),d.setEnd(i,l+1),o&&(Fx(e,d,r,!0),Fx(e,d,r,!1)),d})),uc=(e,n)=>At(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),cw={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},c2=(e,n,o)=>{const r=o?"lastChild":"firstChild",i=o?"prev":"next";if(e[r])return e[r];if(e!==n){let l=e[i];if(l)return l;for(let d=e.parent;d&&d!==n;d=d.parent)if(l=d[i],l)return l}},GL=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!as(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},lw=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Sa{static create(n,o){const r=new Sa(n,cw[n]||1);return o&&Ze(o,(i,l)=>{r.attr(l,i)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!re(n))return Oe(n)&&Ze(n,(l,d)=>{r.attr(d,l)}),r;const i=r.attributes;if(i){if(o!==void 0){if(o===null){if(n in i.map){delete i.map[n];let l=i.length;for(;l--;)if(i[l].name===n)return i.splice(l,1),r}return r}if(n in i.map){let l=i.length;for(;l--;)if(i[l].name===n){i[l].value=o;break}}else i.push({name:n,value:o});return i.map[n]=o,r}return i.map[n]}}clone(){const n=this,o=new Sa(n.name,n.type),r=n.attributes;if(r){const i=[];i.map={};for(let l=0,d=r.length;l<d;l++){const g=r[l];g.name!=="id"&&(i[i.length]={name:g.name,value:g.value},i.map[g.name]=g.value)}o.attributes=i}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,i=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):i&&(i.next=r),o.lastChild===n?(o.lastChild=i,i&&(i.next=null)):r&&(r.prev=i),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const i=o.parent||this;return r?(o===i.firstChild?i.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===i.lastChild?i.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=i,n}getAll(n){const o=this,r=[];for(let i=o.firstChild;i;i=c2(i,o))i.name===n&&r.push(i);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let i=n.firstChild;i;i=c2(i,n))o.push(i);let r=o.length;for(;r--;){const i=o[r];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var i;const l=this;let d=l.firstChild;if(lw(l))return!1;if(d)do{if(d.type===1){if(d.attr("data-mce-bogus"))continue;if(n[d.name]||lw(d))return!1}if(d.type===8||d.type===3&&!GL(d)||d.type===3&&d.parent&&o[d.parent.name]&&as((i=d.value)!==null&&i!==void 0?i:"")||r&&r(d))return!1}while(d=c2(d,l));return!0}walk(n){return c2(this,null,n)}}const BA=Pe.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),PA=e=>re(e.nodeValue)&&e.nodeValue.includes(Xs),l2=e=>`${e.length===0?"":`${At(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,qL=(e,n)=>n.querySelectorAll(l2(e)),LA=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>PA(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),IA=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(PA(n)){const o=n.parentNode;return o&&xt(BA,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),KL=e=>LA(e).nextNode()!==null,FA=e=>IA(e).nextNode()!==null,uw=(e,n)=>n.querySelector(l2(e))!==null,$A=(e,n)=>{pe(qL(e,n),o=>{const r=U.fromDom(o);Ko(r,"data-mce-bogus")==="all"?v(r):pe(e,i=>{jd(r,i)&&_s(r,i)})})},u2=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},YL=S(u2,LA),xG=S(u2,IA),XL=(e,n)=>{const o=[{condition:Qe(uw,n),action:Qe($A,n)},{condition:KL,action:YL},{condition:FA,action:xG}];let r=e,i=!1;return pe(o,({condition:l,action:d})=>{l(r)&&(i||(r=e.cloneNode(!0),i=!0),d(r))}),r},HA=e=>{const n=go(e,"[data-mce-bogus]");pe(n,o=>{Ko(o,"data-mce-bogus")==="all"?v(o):gf(o)?(Yr(o,U.fromText(Cr)),v(o)):E(o)})},dw=e=>{const n=go(e,"input");pe(n,o=>{_s(o,"name")})},JL=(e,n)=>{const o=ta(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s|¬†|<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},QL=(e,n)=>{const o=e.getDoc(),r=Yi(U.fromDom(e.getBody())),i=U.fromTag("div",o);$s(i,"data-mce-bogus","all"),Mb(i,{position:"fixed",left:"-9999999px",top:"0"}),on(i,n.innerHTML),HA(i),dw(i);const l=Ic(r);rs(l,i);const d=Qa(i.dom.innerText);return v(i),d},eI=(e,n,o)=>{let r;return n.format==="raw"?r=Pe.trim(Qa(XL(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=QL(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=JL(e,e.serializer.serialize(o,n)),n.format!=="text"&&!nh(U.fromDom(o))&&re(r)?Pe.trim(r):r},wG=(e,n)=>O.from(e.getBody()).fold(qe(n.format==="tree"?new Sa("body",11):""),o=>eI(e,n,o)),tI=Pe.makeMap,mw=e=>{const n=[];e=e||{};const o=e.indent,r=tI(e.indent_before||""),i=tI(e.indent_after||""),l=so.getEncodeFunc(e.entity_encoding||"raw",e.entities),d=e.element_format!=="xhtml";return{start:(g,h,y)=>{if(o&&r[g]&&n.length>0){const w=n[n.length-1];w.length>0&&w!==`
`&&n.push(`
`)}if(n.push("<",g),h)for(let w=0,T=h.length;w<T;w++){const _=h[w];n.push(" ",_.name,'="',l(_.value,!0),'"')}if(!y||d?n[n.length]=">":n[n.length]=" />",y&&o&&i[g]&&n.length>0){const w=n[n.length-1];w.length>0&&w!==`
`&&n.push(`
`)}},end:g=>{let h;n.push("</",g,">"),o&&i[g]&&n.length>0&&(h=n[n.length-1],h.length>0&&h!==`
`&&n.push(`
`))},text:(g,h)=>{g.length>0&&(n[n.length]=h?g:l(g))},cdata:g=>{n.push("<![CDATA[",g,"]]>")},comment:g=>{n.push("<!--",g,"-->")},pi:(g,h)=>{h?n.push("<?",g," ",l(h),"?>"):n.push("<?",g,"?>"),o&&n.push(`
`)},doctype:g=>{n.push("<!DOCTYPE",g,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},vd=(e={},n=Lr())=>{const o=mw(e);return e.validate="validate"in e?e.validate:!0,{serialize:i=>{const l=e.validate,d={3:h=>{var y;o.text((y=h.value)!==null&&y!==void 0?y:"",h.raw)},8:h=>{var y;o.comment((y=h.value)!==null&&y!==void 0?y:"")},7:h=>{o.pi(h.name,h.value)},10:h=>{var y;o.doctype((y=h.value)!==null&&y!==void 0?y:"")},4:h=>{var y;o.cdata((y=h.value)!==null&&y!==void 0?y:"")},11:h=>{let y=h;if(y=y.firstChild)do g(y);while(y=y.next)}};o.reset();const g=h=>{var y;const w=d[h.type];if(w)w(h);else{const T=h.name,_=T in n.getVoidElements();let N=h.attributes;if(l&&N&&N.length>1){const P=[];P.map={};const B=n.getElementRule(h.name);if(B){for(let F=0,W=B.attributesOrder.length;F<W;F++){const Q=B.attributesOrder[F];if(Q in N.map){const te=N.map[Q];P.map[Q]=te,P.push({name:Q,value:te})}}for(let F=0,W=N.length;F<W;F++){const Q=N[F].name;if(!(Q in P.map)){const te=N.map[Q];P.map[Q]=te,P.push({name:Q,value:te})}}N=P}}if(o.start(T,N,_),Yd(T))re(h.value)&&o.text(h.value,!0),o.end(T);else if(!_){let P=h.firstChild;if(P){(T==="pre"||T==="textarea")&&P.type===3&&((y=P.value)===null||y===void 0?void 0:y[0])===`
`&&o.text(`
`,!0);do g(P);while(P=P.next)}o.end(T)}}};return i.type===1&&!e.inner?g(i):i.type===3?d[3](i):d[11](i),o.getContent()}}},VA=new Set;pe(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{VA.add(n)});const zA=new Set;pe(["background-color"],n=>{zA.add(n)});const UA=["font","text-decoration","text-emphasis"],EG=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),F1=(e,n)=>ws(EG(e,n)),kG=e=>VA.has(e),nI=e=>zA.has(e),oI=(e,n)=>Vn(F1(e,n),o=>kG(o)),sI=(e,n)=>oI(e,n)&&Vn(F1(e,n),o=>nI(o)),Of=e=>et(e,n=>Vn(UA,o=>es(n,o))),rI=(e,n,o)=>{const r=F1(e,n),i=F1(e,o),l=d=>{var g,h;const y=(g=e.getStyle(n,d))!==null&&g!==void 0?g:"",w=(h=e.getStyle(o,d))!==null&&h!==void 0?h:"";return dn(y)&&dn(w)&&y!==w};return Vn(r,d=>{const g=h=>Vn(h,y=>y===d);if(!g(i)&&g(UA)){const h=Of(i);return Vn(h,l)}else return l(d)})},fw=(e,n,o)=>O.from(o.container()).filter(Re).exists(r=>{const i=e?0:-1;return n(r.data.charAt(o.offset()+i))}),d2=Qe(fw,!0,Sf),m2=Qe(fw,!1,Sf),ZA=e=>{const n=e.container();return Re(n)&&(n.data.length===0||lv(n.data)&&N1.isBookmarkNode(n.parentNode))},xu=(e,n)=>o=>Ex(e?0:-1,o).filter(n).isSome(),aI=e=>dT(e)&&As(U.fromDom(e),"display")==="block",WA=e=>wo(e)&&!VB(e),TG=xu(!0,aI),iI=xu(!1,aI),$1=xu(!0,Ji),Df=xu(!1,Ji),gw=xu(!0,du),jA=xu(!1,du),Mf=xu(!0,WA),Nf=xu(!1,WA),cI=e=>e.slice(0,-1),_G=(e,n,o)=>Ki(n,e)?cI(wb(e,r=>o(r)||sn(r,n))):[],GA=(e,n)=>_G(e,n,ke),wu=(e,n)=>[e].concat(GA(e,n)),hw=(e,n,o)=>Mx(e,n,o,ZA),qA=e=>n=>e.isBlock(En(n)),lI=(e,n,o)=>ko(wu(U.fromDom(n.container()),e),qA(o)),KA=(e,n,o,r)=>hw(e,n.dom,o).forall(i=>lI(n,o,r).fold(()=>!Ml(i,o,n.dom),l=>!Ml(i,o,n.dom)&&Ki(l,U.fromDom(i.container())))),pw=(e,n,o,r)=>lI(n,o,r).fold(()=>hw(e,n.dom,o).forall(i=>!Ml(i,o,n.dom)),i=>hw(e,i.dom,o).isNone()),bw=Qe(pw,!1),YA=Qe(pw,!0),uI=Qe(KA,!1),dI=Qe(KA,!0),mI=e=>Fv(e).exists(gf),f2=(e,n,o,r)=>{const i=et(wu(U.fromDom(o.container()),n),d=>r.isBlock(En(d))),l=Go(i).getOr(n);return sc(e,l.dom,o).filter(mI)},vw=(e,n,o)=>Fv(n).exists(gf)||f2(!0,e,n,o).isSome(),g2=(e,n,o)=>H7(n).exists(gf)||f2(!1,e,n,o).isSome(),XA=Qe(f2,!1),fI=Qe(f2,!0),JA=e=>be.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),QA=(e,n,o)=>{const r=et(wu(U.fromDom(n.container()),e),i=>o.isBlock(En(i)));return Go(r).getOr(e)},eO=(e,n,o)=>JA(n)?m2(n):m2(n)||Ba(QA(e,n,o).dom,n).exists(m2),tO=(e,n,o)=>JA(n)?d2(n):d2(n)||Ms(QA(e,n,o).dom,n).exists(d2),We=e=>_t(["pre","pre-wrap"],e),ol=e=>Fv(e).bind(n=>cu(n,ya)).exists(n=>We(As(n,"white-space"))),AG=(e,n)=>Ba(e.dom,n).isNone(),gI=(e,n)=>Ms(e.dom,n).isNone(),yw=(e,n,o)=>AG(e,n)||gI(e,n)||bw(e,n,o)||YA(e,n,o)||g2(e,n,o)||vw(e,n,o),nO=e=>Oe(e)&&wo(e)&&w1(e),Cw=(e,n)=>o=>nO(new dr(o,e)[n]()),Sw=(e,n)=>{const o=Ms(e.dom,n).getOr(n),r=Cw(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},hI=(e,n)=>{const o=Ba(e.dom,n).getOr(n),r=Cw(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},xw=(e,n,o)=>ol(n)?!1:yw(e,n,o)||eO(e,n,o)||tO(e,n,o),H1=(e,n,o)=>ol(n)?!1:bw(e,n,o)||uI(e,n,o)||g2(e,n,o)||eO(e,n,o)||hI(e,n),pI=e=>{const n=e.container(),o=e.offset();return Re(n)&&o<n.data.length?be(n,o+1):e},V1=(e,n,o)=>ol(n)?!1:YA(e,n,o)||dI(e,n,o)||vw(e,n,o)||tO(e,n,o)||Sw(e,n),ww=(e,n,o)=>H1(e,n,o)||V1(e,pI(n),o),oO=(e,n)=>Zv(e.charAt(n)),z1=(e,n)=>Sf(e.charAt(n)),bI=e=>{const n=e.container();return Re(n)&&fs(n.data,to)},vI=e=>{const n=e.split("");return At(n,(o,r)=>Zv(o)&&r>0&&r<n.length-1&&Px(n[r-1])&&Px(n[r+1])?" ":o).join("")},sO=(e,n,o,r)=>{const i=n.data,l=be(n,0);return!o&&oO(i,0)&&!ww(e,l,r)?(n.data=" "+i.slice(1),!0):o&&z1(i,0)&&H1(e,l,r)?(n.data=to+i.slice(1),!0):!1},yI=e=>{const n=e.data,o=vI(n);return o!==n?(e.data=o,!0):!1},rO=(e,n,o,r)=>{const i=n.data,l=be(n,i.length-1);return!o&&oO(i,i.length-1)&&!ww(e,l,r)?(n.data=i.slice(0,-1)+" ",!0):o&&z1(i,i.length-1)&&V1(e,l,r)?(n.data=i.slice(0,-1)+to,!0):!1},aO=(e,n,o)=>{const r=n.container();if(!Re(r))return O.none();if(bI(n)){const i=sO(e,r,!1,o)||yI(r)||rO(e,r,!1,o);return Nn(i,n)}else if(ww(e,n,o)){const i=sO(e,r,!0,o)||rO(e,r,!0,o);return Nn(i,n)}else return O.none()},h2=e=>{const n=U.fromDom(e.getBody());e.selection.isCollapsed()&&aO(n,be.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},iO=(e,n,o,r)=>{if(o===0)return;const i=U.fromDom(e),l=Yu(i,y=>r.isBlock(En(y))).getOr(i),d=e.data.slice(n,n+o),g=n+o>=e.data.length&&V1(l,be(e,e.data.length),r),h=n===0&&H1(l,be(e,0),r);e.replaceData(n,o,Pr(d,4,h,g))},p2=(e,n,o)=>{const r=e.data.slice(n),i=r.length-kg(r).length;iO(e,n,i,o)},Ew=(e,n,o)=>{const r=e.data.slice(0,n),i=r.length-Wa(r).length;iO(e,n-i,i,o)},kw=(e,n,o,r,i=!0)=>{const l=Wa(e.data).length,d=i?e:n,g=i?n:e;return i?d.appendData(g.data):d.insertData(0,g.data),v(U.fromDom(g)),r&&p2(d,l,o),d},CI=(e,n)=>{const o=e.container(),r=e.offset();return!be.isTextPosition(e)&&o===n.parentNode&&r>be.before(n).offset()},SI=(e,n)=>CI(n,e)?be(n.container(),n.offset()-1):n,xI=e=>Re(e)?be(e,0):be.before(e),wI=e=>Re(e)?be(e,e.data.length):be.after(e),cO=e=>Yc(e.previousSibling)?O.some(wI(e.previousSibling)):e.previousSibling?ti(e.previousSibling):O.none(),lO=e=>Yc(e.nextSibling)?O.some(xI(e.nextSibling)):e.nextSibling?Ar(e.nextSibling):O.none(),EI=(e,n)=>O.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>Ba(e,be.before(o))).orThunk(()=>Ms(e,be.after(n))),kI=(e,n)=>Ms(e,be.after(n)).orThunk(()=>Ba(e,be.before(n))),TI=(e,n)=>cO(n).orThunk(()=>lO(n)).orThunk(()=>EI(e,n)),_I=(e,n)=>lO(n).orThunk(()=>cO(n)).orThunk(()=>kI(e,n)),uO=(e,n,o)=>e?_I(n,o):TI(n,o),AI=(e,n,o)=>uO(e,n,o).map(Qe(SI,o)),dO=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},b2=e=>n=>n.dom===e,gm=(e,n)=>n&&xt(e.schema.getBlockElements(),En(n)),v2=(e,n,o)=>{if(Qr(e,n)){const r=U.fromHtml('<br data-mce-bogus="1">');return o?pe(ur(n),i=>{Kv(i)||v(i)}):Si(n),rs(n,r),O.some(be.before(r.dom))}else return O.none()},OI=(e,n,o,r)=>{const i=ou(e).filter(Kr),l=su(e).filter(Kr);return v(e),Im(i,l,n,(d,g,h)=>{const y=d.dom,w=g.dom,T=y.data.length;return kw(y,w,o,r),h.container()===w?be(y,T):h}).orThunk(()=>(r&&(i.each(d=>Ew(d.dom,d.dom.length,o)),l.each(d=>p2(d.dom,0,o))),n))},DI=(e,n)=>xt(e.schema.getTextInlineElements(),En(n)),Rf=(e,n,o,r=!0,i=!1)=>{const l=AI(n,e.getBody(),o.dom),d=Yu(o,Qe(gm,e),b2(e.getBody())),g=OI(o,l,e.schema,DI(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):d.bind(h=>v2(e.schema,h,i)).fold(()=>{r&&dO(e,n,g)},h=>{r&&dO(e,n,O.some(h))})},MI=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,mO=e=>MI.test(e),Bf=(e,n)=>Ga(U.fromDom(n),v1(e))&&!Zc(e.schema,n)&&e.dom.isEditable(n),fO=e=>{var n;return Ln.DOM.getStyle(e,"direction",!0)==="rtl"||mO((n=e.textContent)!==null&&n!==void 0?n:"")},gO=(e,n,o)=>et(Ln.DOM.getParents(o.container(),"*",n),e),hm=(e,n,o)=>{const r=gO(e,n,o);return O.from(r[r.length-1])},hO=(e,n,o)=>{const r=gd(n,e),i=gd(o,e);return Oe(r)&&r===i},NI=e=>WS(e)||a1(e),dc=(e,n)=>{const o=n.container(),r=n.offset();return e?Ir(o)?Re(o.nextSibling)?be(o.nextSibling,0):be.after(o):WS(n)?be(o,r+1):n:Ir(o)?Re(o.previousSibling)?be(o.previousSibling,o.previousSibling.data.length):be.before(o):a1(n)?be(o,r-1):n},pO=Qe(dc,!0),Tw=Qe(dc,!1),y2=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},bO=e=>{e.execCommand("delete")},C2=e=>y2(e,"Delete"),vO=e=>y2(e,"ForwardDelete"),S2=e=>n=>pa(Lc(n),e,sn),RI=e=>zS(e)||sd(e),U1=(e,n)=>Ki(e,n)?cu(n,RI,S2(e)):O.none(),Z1=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},_w=(e,n,o)=>os(Ar(o),ti(o),(r,i)=>{const l=dc(!0,r),d=dc(!1,i),g=dc(!1,n);return e?Ms(o,g).exists(h=>h.isEqual(d)&&n.isEqual(l)):Ba(o,g).exists(h=>h.isEqual(l)&&n.isEqual(d))}).getOr(!0),yO=e=>(Zd(e)?ou(e):Gm(e)).bind(yO).orThunk(()=>O.some(e)),CO=(e,n,o,r=!0)=>{var i;n.deleteContents();const l=yO(o).getOr(o),d=U.fromDom((i=e.dom.getParent(l.dom,e.dom.isBlock))!==null&&i!==void 0?i:o.dom);if(d.dom===e.getBody()?Z1(e,r):Qr(e.schema,d,{checkRootAsContent:!1})&&(om(d),r&&e.selection.setCursorLocation(d.dom,0)),!sn(o,d)){const g=pa(Lc(d),o)?[]:Lp(d);pe(g.concat(ur(o)),h=>{!sn(h,d)&&!Ki(h,d)&&Qr(e.schema,h)&&v(h)})}},x2=e=>n=>sn(e,n),w2=e=>go(e,"td,th"),Aw=(e,n)=>D1(U.fromDom(e),n),SO=e=>os(e.startTable,e.endTable,(n,o)=>{const r=Ib(n,l=>sn(l,o)),i=Ib(o,l=>sn(l,n));return!r&&!i?e:{...e,startTable:r?O.none():e.startTable,endTable:i?O.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),xO=e=>SO(e),wO=(e,n)=>{const o=Aw(e.startContainer,n),r=Aw(e.endContainer,n),i=o.isSome(),l=r.isSome(),d=os(o,r,sn).getOr(!1);return xO({startTable:o,endTable:r,isStartInTable:i,isEndInTable:l,isSameTable:d,isMultiTable:!d&&i&&l})},E2=(e,n)=>({start:e,end:n}),EO=(e,n,o)=>({rng:e,table:n,cells:o}),Th=cr.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),W1=(e,n)=>Gd(U.fromDom(e),"td,th",n),Ow=e=>!sn(e.start,e.end),kO=(e,n)=>D1(e.start,n).bind(o=>D1(e.end,n).bind(r=>Nn(sn(o,r),o))),BI=(e,n)=>!Ow(e)&&kO(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),PI=(e,n)=>{const o=W1(e.startContainer,n),r=W1(e.endContainer,n);return os(o,r,E2)},LI=e=>n=>D1(n,e).bind(o=>pr(w2(o)).map(r=>E2(n,r))),II=e=>n=>D1(n,e).bind(o=>Go(w2(o)).map(r=>E2(r,n))),Dw=e=>n=>kO(n,e).map(o=>EO(n,o,w2(o))),TO=(e,n,o,r)=>{if(o.collapsed||!e.forall(Ow))return O.none();if(n.isSameTable){const i=e.bind(Dw(r));return O.some({start:i,end:i})}else{const i=W1(o.startContainer,r),l=W1(o.endContainer,r),d=i.bind(LI(r)).bind(Dw(r)),g=l.bind(II(r)).bind(Dw(r));return O.some({start:d,end:g})}},_O=(e,n)=>Ps(e,o=>sn(o,n)),Mw=e=>os(_O(e.cells,e.rng.start),_O(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),FI=(e,n,o)=>e.exists(r=>BI(r,o)&&Ix(r.start,n)),Nw=(e,n)=>{const{startTable:o,endTable:r}=n,i=e.cloneRange();return o.each(l=>i.setStartAfter(l.dom)),r.each(l=>i.setEndBefore(l.dom)),i},OG=(e,n,o,r)=>TO(e,n,o,r).bind(({start:i,end:l})=>i.or(l)).bind(i=>{const{isSameTable:l}=n,d=Mw(i).getOr([]);if(l&&i.cells.length===d.length)return O.some(Th.fullTable(i.table));if(d.length>0){if(l)return O.some(Th.partialTable(d,O.none()));{const g=Nw(o,n);return O.some(Th.partialTable(d,O.some({...n,rng:g})))}}else return O.none()}),DG=(e,n,o,r)=>TO(e,n,o,r).bind(({start:i,end:l})=>{const d=i.bind(Mw).getOr([]),g=l.bind(Mw).getOr([]);if(d.length>0&&g.length>0){const h=Nw(o,n);return O.some(Th.multiTable(d,g,h))}else return O.none()}),$I=(e,n)=>{const o=x2(e),r=PI(n,o),i=wO(n,o);return FI(r,n,o)?r.map(l=>Th.singleCellTable(n,l.start)):i.isMultiTable?DG(r,i,n,o):OG(r,i,n,o)},HI=e=>pe(e,n=>{_s(n,"contenteditable"),om(n)}),VI=(e,n)=>O.from(e.dom.getParent(n,e.dom.isBlock)).map(U.fromDom),Hr=(e,n,o)=>{o.each(r=>{n?v(r):(om(r),e.selection.setCursorLocation(r.dom,0))})},Rw=(e,n,o,r)=>{const i=o.cloneRange();r?(i.setStart(o.startContainer,o.startOffset),i.setEndAfter(n.dom.lastChild)):(i.setStartBefore(n.dom.firstChild),i.setEnd(o.endContainer,o.endOffset)),xa(e,i,n,!1).each(l=>l())},zI=e=>{const n=hd(e),o=U.fromDom(e.selection.getNode());qp(o.dom)&&Qr(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&Vn(n,r=>sn(r,o))&&$s(o,"data-mce-selected","1")},AO=(e,n,o)=>O.some(()=>{const r=e.selection.getRng(),i=o.bind(({rng:l,isStartInTable:d})=>{const g=VI(e,d?l.endContainer:l.startContainer);l.deleteContents(),Hr(e,d,g.filter(Qe(Qr,e.schema)));const h=d?n[0]:n[n.length-1];return Rw(e,h,r,d),Qr(e.schema,h)?O.none():O.some(d?n.slice(1):n.slice(0,-1))}).getOr(n);HI(i),zI(e)}),UI=(e,n,o,r)=>O.some(()=>{const i=e.selection.getRng(),l=n[0],d=o[o.length-1];Rw(e,l,i,!0),Rw(e,d,i,!1);const g=Qr(e.schema,l)?n:n.slice(1),h=Qr(e.schema,d)?o:o.slice(0,-1);HI(g.concat(h)),r.deleteContents(),zI(e)}),xa=(e,n,o,r=!0)=>O.some(()=>{CO(e,n,o,r)}),MG=(e,n)=>O.some(()=>Rf(e,!1,n)),ZI=(e,n,o)=>$I(n,o).bind(r=>r.fold(Qe(xa,e),Qe(MG,e),Qe(AO,e),Qe(UI,e))),NG=(e,n)=>j1(e,n),WI=(e,n,o,r)=>Bw(n,r).fold(()=>ZI(e,n,o),i=>NG(e,i)),jI=(e,n,o)=>{const r=U.fromDom(e.getBody()),i=e.selection.getRng();return o.length!==0?AO(e,o,O.none()):WI(e,r,i,n)},GI=(e,n)=>ko(wu(n,e),nm),Bw=(e,n)=>ko(wu(n,e),Fs("caption")),ni=(e,n,o,r,i)=>el(o,e.getBody(),i).bind(l=>GI(n,U.fromDom(l.getNode())).bind(d=>sn(d,r)?O.none():O.some(ct))),j1=(e,n)=>O.some(()=>{om(n),e.selection.setCursorLocation(n.dom,0)}),OO=(e,n,o,r)=>Ar(e.dom).bind(i=>ti(e.dom).map(l=>n?o.isEqual(i)&&r.isEqual(l):o.isEqual(l)&&r.isEqual(i))).getOr(!0),qI=(e,n)=>j1(e,n),KI=(e,n,o)=>Bw(e,U.fromDom(o.getNode())).fold(()=>O.some(ct),r=>Nn(!sn(r,n),ct)),DO=(e,n,o,r,i)=>el(o,e.getBody(),i).fold(()=>O.some(ct),l=>OO(r,o,i,l)?qI(e,r):KI(n,r,l)),MO=(e,n,o,r)=>{const i=be.fromRangeStart(e.selection.getRng());return GI(o,r).bind(l=>Qr(e.schema,l,{checkRootAsContent:!1})?j1(e,l):ni(e,o,n,l,i))},YI=(e,n,o,r)=>{const i=be.fromRangeStart(e.selection.getRng());return Qr(e.schema,r)?j1(e,r):DO(e,o,n,r,i)},NO=(e,n)=>e?gw(n):jA(n),XI=(e,n)=>{const o=be.fromRangeStart(e.selection.getRng());return NO(n,o)||sc(n,e.getBody(),o).exists(r=>NO(n,r))},JI=(e,n,o)=>{const r=U.fromDom(e.getBody());return Bw(r,o).fold(()=>MO(e,n,r,o).orThunk(()=>Nn(XI(e,n),ct)),i=>YI(e,n,r,i))},k2=(e,n)=>{const o=U.fromDom(e.selection.getStart(!0)),r=hd(e);return e.selection.isCollapsed()&&r.length===0?JI(e,n,o):jI(e,o,r)},Pf=(e,n)=>{let o=n;for(;o&&o!==e;){if(zc(o)||wo(o))return o;o=o.parentNode}return null},RO=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],QI=Pe.each,BO=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(l,d)=>{if(l.nodeName!==d.nodeName||l.nodeType!==d.nodeType)return!1;const g=y=>{const w={};return QI(n.getAttribs(y),T=>{const _=T.nodeName.toLowerCase();_!=="style"&&!i(_)&&(w[_]=n.getAttrib(y,_))}),w},h=(y,w)=>{for(const T in y)if(xt(y,T)){const _=w[T];if(mo(_)||y[T]!==_)return!1;delete w[T]}for(const T in w)if(xt(w,T))return!1;return!0};return ot(l)&&ot(d)&&(!h(g(l),g(d))||!h(n.parseStyle(n.getAttrib(l,"style")),n.parseStyle(n.getAttrib(d,"style"))))?!1:!ac(l)&&!ac(d)},i=l=>Vn(RO,d=>es(l,d))||o.has(l);return{compare:r,isAttributeInternal:i}},PO=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),eF=e=>e.name==="summary",RG=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},LO=(e,n,o,r)=>{const i=o.name;for(let l=0,d=e.length;l<d;l++){const g=e[l];if(g.name===i){const h=r.nodes[i];h?h.nodes.push(o):r.nodes[i]={filter:g,nodes:[o]}}}if(o.attributes)for(let l=0,d=n.length;l<d;l++){const g=n[l],h=g.name;if(h in o.attributes.map){const y=r.attributes[h];y?y.nodes.push(o):r.attributes[h]={filter:g,nodes:[o]}}}},bn=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&RG(o,i=>{LO(e,n,i,r)}),r},_h=(e,n)=>{const o=(r,i)=>{Ze(r,l=>{const d=xs(l.nodes);pe(l.filter.callbacks,g=>{for(let h=d.length-1;h>=0;h--){const y=d[h];(!(i?y.attr(l.filter.name)!==void 0:y.name===l.filter.name)||hn(y.parent))&&d.splice(h,1)}d.length>0&&g(d,l.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},Eu=(e,n,o,r={})=>{const i=bn(e,n,o);_h(i,r)},yd=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const l=new Sa("br",1);n.insert&&l.attr("data-mce-bogus","1"),r.empty().append(l)}else r.empty().append(new Sa("#text",3)).value=to},T2=e=>{var n;return _2(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===to},_2=(e,n)=>{const o=e==null?void 0:e.firstChild;return Oe(o)&&o===e.lastChild&&o.name===n},Pw=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},Ah=(e,n,o,r)=>r.isEmpty(n,o,i=>Pw(e,i)),tF=(e,n)=>Oe(e)&&(n(e)||e.name==="br"),IO=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return O.from(n)},A2=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const i of r)o&&!n.isValidChild(o.name,i.name)&&A2(i,n,o);e.unwrap()}},Lw=(e,n,o,r=ct)=>{const i=n.getTextBlockElements(),l=n.getNonEmptyElements(),d=n.getWhitespaceElements(),g=Pe.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),h=new Set,y=w=>w!==o&&!g[w.name];for(let w=0;w<e.length;w++){const T=e[w];let _,N,P;if(!T.parent||h.has(T))continue;if(i[T.name]&&T.parent.name==="li"){let F=T.next;for(;F&&i[F.name];){F.name="li",h.add(F),T.parent.insert(F,T.parent);F=F.next}T.unwrap();continue}const B=[T];for(_=T.parent;_&&!n.isValidChild(_.name,T.name)&&y(_);_=_.parent)B.push(_);if(_&&B.length>1)if(Iw(n,T,_))A2(T,n);else{B.reverse(),N=B[0].clone(),r(N);let F=N;for(let W=0;W<B.length-1;W++){n.isValidChild(F.name,B[W].name)&&W>0?(P=B[W].clone(),r(P),F.append(P)):P=F;for(let Q=B[W].firstChild;Q&&Q!==B[W+1];){const te=Q.next;P.append(Q),Q=te}F=P}Ah(n,l,d,N)?_.insert(T,B[0],!0):(_.insert(N,B[0],!0),_.insert(T,N)),_=B[0],(Ah(n,l,d,_)||_2(_,"br"))&&_.empty().remove()}else if(T.parent){if(T.name==="li"){let F=T.prev;if(F&&(F.name==="ul"||F.name==="ol")){F.append(T);continue}if(F=T.next,F&&(F.name==="ul"||F.name==="ol")&&F.firstChild){F.insert(T,F.firstChild,!0);continue}const W=new Sa("ul",1);r(W),T.wrap(W);continue}if(n.isValidChild(T.parent.name,"div")&&n.isValidChild("div",T.name)){const F=new Sa("div",1);r(F),T.wrap(F)}else A2(T,n)}}},nF=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},Iw=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&nF(o,"a")?!0:eF(o)&&PO(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,oF=(e,n,o,r)=>{const i=document.createRange();return i.setStart(e,n),i.setEnd(o,r),i},sF=e=>{const n=be.fromRangeStart(e),o=be.fromRangeEnd(e),r=e.commonAncestorContainer;return sc(!1,r,o).map(i=>!Ml(n,o,r)&&Ml(n,i,r)?oF(n.container(),n.offset(),i.container(),i.offset()):e).getOr(e)},Fw=e=>e.collapsed?e:sF(e),FO=e=>Oe(e.firstChild)&&e.firstChild===e.lastChild,$O=e=>e.name==="br"||e.value===to,BG=(e,n)=>e.getBlockElements()[n.name]&&FO(n)&&$O(n.firstChild),PG=(e,n)=>{const o=e.getNonEmptyElements();return Oe(n)&&(n.isEmpty(o)||BG(e,n))},LG=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),PG(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},rF=e=>{var n,o;const r=e.firstChild,i=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),i&&i.id==="mce_marker"&&((o=i.parentNode)===null||o===void 0||o.removeChild(i)),e},IG=(e,n,o)=>{const r=n.serialize(o),i=e.createFragment(r);return rF(i)},FG=e=>{var n;return et((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},aF=e=>e.data===to||zo(e),iF=e=>Oe(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&aF(e.firstChild),$G=e=>!e.firstChild||iF(e),cF=e=>e.length>0&&$G(e[e.length-1])?e.slice(0,-1):e,oa=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},HG=(e,n)=>!!oa(e,n),lF=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},HO=(e,n)=>{const o=be.before(e),i=Qc(n).next(o);return i?i.toRange():null},uF=(e,n)=>{const o=be.after(e),i=Qc(n).prev(o);return i?i.toRange():null},dF=(e,n,o,r)=>{const i=lF(e,r),l=e.parentNode;return l&&(l.insertBefore(i[0],e),Pe.each(n,d=>{l.insertBefore(d,e)}),l.insertBefore(i[1],e),l.removeChild(e)),uF(n[n.length-1],o)},mF=(e,n,o)=>{const r=e.parentNode;return r&&Pe.each(n,i=>{r.insertBefore(i,e)}),HO(e,o)},fF=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),uF(n[0],o)),$w=(e,n,o,r)=>{const i=IG(n,e,r),l=oa(n,o.startContainer),d=cF(FG(i.firstChild)),g=1,h=2,y=n.getRoot(),w=T=>{const _=be.fromRangeStart(o),N=Qc(n.getRoot()),P=T===g?N.prev(_):N.next(_),B=P==null?void 0:P.getNode();return B?oa(n,B)!==l:!0};return l?w(g)?mF(l,d,y):w(h)?fF(l,d,y,n):dF(l,d,y,o):null},VG=["pre"],gF=(e,n,o,r)=>{var i;const l=n.firstChild,d=n.lastChild,g=d.attr("data-mce-type")==="bookmark"?d.prev:d,h=l===g,y=_t(VG,l.name);if(h&&y){const w=l.attr("contenteditable")!=="false",T=((i=e.getParent(o,e.isBlock))===null||i===void 0?void 0:i.nodeName.toLowerCase())===l.name,_=O.from(Pf(r,o)).forall(zc);return w&&T&&_}else return!1},Hw=qp,Yn=(e,n,o)=>{if(Oe(o)){const r=e.getParent(n.endContainer,Hw);return o===r&&Ix(U.fromDom(o),n)}else return!1},hF=(e,n)=>{if(e.isBlock(n)&&e.isEditable(n)){const o=n.childNodes;return o.length===1&&zo(o[0])||o.length===0}else return!1},pF=(e,n,o)=>{var r;o.getAttribute("data-mce-bogus")==="all"?(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o):hF(e.dom,o)?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})},G1=(e,n,o)=>{O.from(e.getParent(n,"td,th")).map(U.fromDom).each(r=>fP(r,o))},VO=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const i=e.getBody(),l=BO(e),d="*[data-mce-fragment]",g=r.select(d);Pe.each(g,h=>{const y=_=>Oe(o[_.nodeName.toLowerCase()]),w=_=>_.childNodes.length===1;if((_=>!(oI(r,_)||sI(r,_)))(h)&&y(h)&&w(h)){const _=F1(r,h),N=(W,Q)=>nn(W,te=>_t(Q,te)),P=W=>w(h)&&r.is(W,d)&&y(W)&&(W.nodeName===h.nodeName&&N(_,F1(r,W))||P(W.children[0])),B=W=>Oe(W)&&W!==i&&(l.compare(h,W)||B(W.parentElement)),F=W=>Oe(W)&&W!==i&&r.is(W,d)&&(rI(r,h,W)||F(W.parentElement));(P(h.children[0])||B(h.parentElement)&&!F(h.parentElement))&&r.remove(h,!0)}})}},bF=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},vF=e=>{Pe.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},yF=e=>!!e.getAttribute("data-mce-fragment"),zO=(e,n)=>Oe(n)&&!e.schema.getVoidElements()[n.nodeName],CF=(e,n)=>{var o,r,i;let l;const d=e.dom,g=e.selection;if(!n)return;g.scrollIntoView(n);const h=Pf(e.getBody(),n);if(h&&d.getContentEditable(h)==="false"){d.remove(n),g.select(h);return}let y=d.createRng();const w=n.previousSibling;if(Re(w)){y.setStart(w,(r=(o=w.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const N=n.nextSibling;Re(N)&&(w.appendData(N.data),(i=N.parentNode)===null||i===void 0||i.removeChild(N))}else y.setStartBefore(n),y.setEndBefore(n);const T=N=>{let P=be.fromRangeStart(N);return P=Qc(e.getBody()).next(P),P==null?void 0:P.toRange()},_=d.getParent(n,d.isBlock);if(d.remove(n),_&&d.isEmpty(_)){const N=Hw(_);Si(U.fromDom(_)),y.setStart(_,0),y.setEnd(_,0),!N&&!yF(_)&&(l=T(y))?(y=l,d.remove(_)):d.add(_,d.create("br",N?{}:{"data-mce-bogus":"1"}))}g.setRng(y)},zG=e=>{const n=e.dom,o=Fw(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,Hw);Yn(n,o,r)?xa(e,o,U.fromDom(r)):SF(o)||UG(o)?o.deleteContents():e.getDoc().execCommand("Delete",!1)},UG=e=>UO(e,Re),SF=e=>UO(e,zB),UO=(e,n)=>e.startContainer===e.endContainer&&e.endOffset-e.startOffset===1&&n(e.startContainer.childNodes[e.startOffset]),xF=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return O.some(n);return O.none()},wF=(e,n,o)=>{var r;return Vn(o.children(),PO)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},ZO=(e,n,o)=>{var r,i;const l=e.selection,d=e.dom,g=e.parser,h=o.merge,y=vd({validate:!0},e.schema),w='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=Qa(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,w);let T=l.getRng();const _=T.startContainer,N=e.getBody();_===N&&l.isCollapsed()&&d.isBlock(N.firstChild)&&zO(e,N.firstChild)&&d.isEmpty(N.firstChild)&&(T=d.createRng(),T.setStart(N.firstChild,0),T.setEnd(N.firstChild,0),l.setRng(T)),l.isCollapsed()||zG(e);const P=l.getNode(),B={context:P.nodeName.toLowerCase(),data:o.data,insert:!0},F=g.parse(n,B);if(o.paste===!0&&LG(e.schema,F)&&HG(d,P))return T=$w(y,d,l.getRng(),F),T&&l.setRng(T),n;o.paste===!0&&gF(d,F,P,e.getBody())&&((r=F.firstChild)===null||r===void 0||r.unwrap()),bF(F);let W=F.lastChild;if(W&&W.attr("id")==="mce_marker"){const Q=W;for(W=W.prev;W&&W.name!=="table";W=W.walk(!0))if(W.type===3||!d.isBlock(W.name)){W.parent&&e.schema.isValidChild(W.parent.name,"span")&&W.parent.insert(Q,W,W.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(P),!B.invalid&&!wF(d,P,F))n=y.serialize(F),pF(e,n,P);else{e.selection.setContent(w);let Q=l.getNode(),te;const ae=e.getBody();for(Gp(Q)?Q=te=ae:te=Q;te&&te!==ae;)Q=te,te=te.parentNode;n=Q===ae?ae.innerHTML:d.getOuterHTML(Q);const Se=g.parse(n),De=xF(Se),Ke=De.bind(IO).getOr(Se);De.each(Ge=>Ge.replace(F));const ge=F.children(),le=(i=F.parent)!==null&&i!==void 0?i:Se;F.unwrap();const Ee=et(ge,Ge=>Iw(e.schema,Ge,le));Lw(Ee,e.schema,Ke),Eu(g.getNodeFilters(),g.getAttributeFilters(),Se),n=y.serialize(Se),Q===ae?d.setHTML(ae,n):d.setOuterHTML(Q,n)}return VO(e,h),CF(e,d.get("mce_marker")),vF(e.getBody()),G1(d,l.getStart(),e.schema),qB(e.schema,e.getBody(),l.getStart()),n},O2=e=>e instanceof Sa,Ut=e=>{kf(e)&&Ar(e.getBody()).each(n=>{const o=n.getNode(),r=du(o)?Ar(o).getOr(n):n;e.selection.setRng(r.toRange())})},D2=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&Ut(e)},q1=(e,n,o,r)=>{if(o=Qa(o),o.length===0||/^\s+$/.test(o)){const i='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+i+"</li>");const l=ta(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),l.toLowerCase())?(o=i,o=e.dom.createHTML(l,g1(e),o)):o||(o=i),D2(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=vd({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const i=nh(U.fromDom(n))?o:Pe.trim(o);return D2(e,i,r.no_selection),{content:i,html:i}}},K1=(e,n,o,r)=>{Eu(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const i=vd({validate:!1},e.schema).serialize(o),l=Qa(nh(U.fromDom(n))?i:Pe.trim(i));return D2(e,l,r.no_selection),{content:o,html:l}},Y1=(e,n,o)=>O.from(e.getBody()).map(r=>O2(n)?K1(e,r,n,o):q1(e,r,n,o)).getOr({content:n,html:O2(o.content)?"":o.content}),Lf=Ux,Vw=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let i=0;i<r.length;i++){const l=r[i];if(ic(l)&&l.inherit===!1&&e.dom.is(n,l.selector))return!0}return!1},WO=(e,n,o,r,i)=>{const l=e.dom.getRoot();if(n===l)return!1;const d=e.dom.getParent(n,g=>Vw(e,g,o)?!0:g.parentNode===l||!!Cd(e,g,o,r,!0));return!!Cd(e,d,o,r,i)},zw=(e,n,o)=>Qs(o)&&Lf(n,o.inline)||Su(o)&&Lf(n,o.block)?!0:ic(o)?ot(n)&&e.is(n,o.selector):!1,EF=(e,n,o,r,i,l)=>{const d=o[r],g=r==="attributes";if(jt(o.onmatch))return o.onmatch(n,o,r);if(d){if(ja(d)){for(let h=0;h<d.length;h++)if(g?e.getAttrib(n,d[h]):M1(e,n,d[h]))return!0}else for(const h in d)if(xt(d,h)){const y=g?e.getAttrib(n,h):M1(e,n,h),w=mm(d[h],l),T=hn(y)||Dc(y);if(T&&hn(w))continue;if(i&&T&&!o.exact||(!i||o.exact)&&!Lf(y,Zx(w,h)))return!1}}return!0},Cd=(e,n,o,r,i)=>{const l=e.formatter.get(o),d=e.dom;if(l&&ot(n))for(let g=0;g<l.length;g++){const h=l[g];if(zw(e.dom,n,h)&&EF(d,n,h,"attributes",i,r)&&EF(d,n,h,"styles",i,r)){const y=h.classes;if(y){for(let w=0;w<y.length;w++)if(!e.dom.hasClass(n,mm(y[w],r)))return}return h}}},Uw=(e,n,o,r,i)=>{if(r)return WO(e,r,n,o,i);if(r=e.selection.getNode(),WO(e,r,n,o,i))return!0;const l=e.selection.getStart();return!!(l!==r&&WO(e,l,n,o,i))},ZG=(e,n,o)=>{const r=[],i={},l=e.selection.getStart();return e.dom.getParent(l,d=>{for(let g=0;g<n.length;g++){const h=n[g];!i[h]&&Cd(e,d,h,o)&&(i[h]=!0,r.push(h))}},e.dom.getRoot()),r},kF=(e,n)=>{const o=i=>sn(i,U.fromDom(e.getBody())),r=(i,l)=>Cd(e,i.dom,l)?O.some(l):O.none();return O.from(e.selection.getStart(!0)).bind(i=>Ug(U.fromDom(i),l=>pi(n,d=>r(l,d)),o)).getOrNull()},TF=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const i=e.selection.getStart(),l=qv(r,i);for(let d=o.length-1;d>=0;d--){const g=o[d];if(!ic(g))return!0;for(let h=l.length-1;h>=0;h--)if(r.is(l[h],g.selector))return!0}}return!1},WG=(e,n,o)=>Ss(o,(r,i)=>{const l=eL(e,i);return e.formatter.matchNode(n,i,{},l)?r.concat([i]):r},[]),X1=Xs,bo=(e,n)=>e.importNode(n,!0),_F=e=>{if(e){const n=new dr(e,e);for(let o=n.current();o;o=n.next())if(Re(o))return o}return null},jO=e=>{const n=U.fromTag("span");return qa(n,{id:zv,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&rs(n,U.fromText(X1)),n},AF=e=>{const n=_F(e);return n&&n.data.charAt(0)===X1&&n.deleteData(0,1),n},If=(e,n,o)=>{const r=e.dom,i=e.selection;if(lo(n))Rf(e,!1,U.fromDom(n),o,!0);else{const l=i.getRng(),d=r.getParent(n,r.isBlock),g=l.startContainer,h=l.startOffset,y=l.endContainer,w=l.endOffset,T=AF(n);r.remove(n,!0),g===T&&h>0&&l.setStart(T,h-1),y===T&&w>0&&l.setEnd(T,w-1),d&&r.isEmpty(d)&&om(U.fromDom(d)),i.setRng(l)}},Zw=(e,n,o)=>{const r=e.dom,i=e.selection;if(n)If(e,n,o);else if(n=Cf(e.getBody(),i.getStart()),!n)for(;n=r.get(zv);)If(e,n,o)},OF=(e,n,o)=>{var r,i;const l=e.dom,d=l.getParent(o,Qe(Vx,e.schema));d&&l.isEmpty(d)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(cv(U.fromDom(o)),l.isEmpty(o)?(i=o.parentNode)===null||i===void 0||i.replaceChild(n,o):l.insertAfter(n,o))},ku=(e,n)=>(e.appendChild(n),n),Tn=(e,n)=>{var o;const r=Ac(e,(l,d)=>ku(l,d.cloneNode(!1)),n),i=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return ku(r,i.createTextNode(X1))},Zs=(e,n,o,r,i,l)=>{const d=e.formatter,g=e.dom,h=et(ws(d.get()),T=>T!==r&&!fs(T,"removeformat")),y=WG(e,o,h);if(et(y,T=>!tL(e,T,r)).length>0){const T=o.cloneNode(!1);return g.add(n,T),d.remove(r,i,T,l),g.remove(T),O.some(T)}else return O.none()},Nl=e=>eT(e,Vg(e).replace(new RegExp(`${to}$`)," ")),Tu=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&ou(U.fromDom(n)).each(r=>{Kr(r)?Nl(r):uS(r,i=>Kr(i)).each(i=>{Kr(i)&&Nl(i)})})};e.once("input",r=>{r.data&&!Sf(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},pm=(e,n,o)=>{let r;const i=e.selection,l=e.formatter.get(n);if(!l)return;const d=i.getRng();let g=d.startOffset;const y=d.startContainer.nodeValue;r=Cf(e.getBody(),i.getStart());const w=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(y&&g>0&&g<y.length&&w.test(y.charAt(g))&&w.test(y.charAt(g-1))){const T=i.getBookmark();d.collapse(!0);let _=Ef(e.dom,d,l);_=_f(_),e.formatter.apply(n,o,_),i.moveToBookmark(T)}else{let T=r?_F(r):null;(!r||(T==null?void 0:T.data)!==X1)&&(r=bo(e.getDoc(),jO(!0).dom),T=r.firstChild,d.insertNode(r),g=1,Tu(e,r)),e.formatter.apply(n,o,r),i.setCursorLocation(T,g)}},Ww=(e,n,o,r)=>{const i=e.dom,l=e.selection;let d=!1;const g=e.formatter.get(n);if(!g)return;const h=l.getRng(),y=h.startContainer,w=h.startOffset;let T=y;Re(y)&&(w!==y.data.length&&(d=!0),T=T.parentNode);const _=[];let N;for(;T;){if(Cd(e,T,n,o,r)){N=T;break}T.nextSibling&&(d=!0),_.push(T),T=T.parentNode}if(N)if(d){const P=l.getBookmark();h.collapse(!0);let B=Ef(i,h,g,{includeTrailingSpace:!0});B=_f(B),e.formatter.remove(n,o,B,r),l.moveToBookmark(P)}else{const P=Cf(e.getBody(),N),B=Oe(P)?i.getParents(N.parentNode,ze,P):[],F=jO(!1).dom;OF(e,F,P??N);const W=Zs(e,F,N,n,o,r),Q=Tn([..._,...W.toArray(),...B],F);P&&If(e,P,Oe(P)),l.setCursorLocation(Q,1),Tu(e,F),i.isEmpty(N)&&i.remove(N)}},DF=(e,n,o)=>{const r=e.selection,i=e.getBody();Zw(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===X1&&Zw(e,Cf(i,r.getStart()),!0),(n===37||n===39)&&Zw(e,Cf(i,r.getStart()),!0)},MF=e=>Re(e)&&Kl(e.data,to),NF=e=>{e.on("mouseup keydown",n=>{DF(e,n.keyCode,MF(e.selection.getRng().endContainer))})},GO=e=>{const n=jO(!1),o=Tn(e,n.dom);return{caretContainer:n,caretPosition:be(o,0)}},jw=(e,n)=>{const{caretContainer:o,caretPosition:r}=GO(n);return Yr(U.fromDom(e),o),v(U.fromDom(e)),r},J1=(e,n)=>{const{caretContainer:o,caretPosition:r}=GO(n);return e.insertNode(o.dom),r},Gw=(e,n)=>{if(rc(n.dom))return!1;const o=e.schema.getTextInlineElements();return xt(o,En(n))&&!rc(n.dom)&&!ef(n.dom)},Oh={},qO=Xi(["pre"]),RF=(e,n)=>{Oh[e]||(Oh[e]=[]),Oh[e].push(n)},BF=(e,n)=>{xt(Oh,e)&&pe(Oh[e],o=>{o(n)})};RF("pre",e=>{const n=e.selection.getRng(),o=i=>l=>{const d=l.previousSibling;return qO(d)&&_t(i,d)},r=(i,l)=>{const d=U.fromDom(l),g=tu(d).dom;v(d),iu(U.fromDom(i),[U.fromTag("br",g),U.fromTag("br",g),...ur(d)])};if(!n.collapsed){const i=e.selection.getSelectedBlocks(),l=et(et(i,qO),o(i));pe(l,d=>{r(d.previousSibling,d)})}});const qw=["fontWeight","fontStyle","color","fontSize","fontFamily"],PF=e=>Pt(e.styles)&&Vn(ws(e.styles),n=>_t(qw,n)),LF=e=>ko(e,n=>Qs(n)&&n.inline==="span"&&PF(n)),KO=(e,n)=>{const o=e.get(n);return Qn(o)?LF(o):O.none()},YO=(e,n)=>Ba(n,be.fromRangeStart(e)).isNone(),M2=(e,n)=>Ms(n,be.fromRangeEnd(e)).exists(o=>!zo(o.getNode())||Ms(n,o).isSome())===!1,Kw=e=>n=>Wb(n)&&e.isEditable(n),N2=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return YO(o,n[0])&&M2(o,n[0])?n:[];{const r=Go(n).filter(d=>YO(o,d)).toArray(),i=pr(n).filter(d=>M2(o,d)).toArray(),l=n.slice(1,-1);return r.concat(l).concat(i)}},jG=e=>et(N2(e),Kw(e.dom)),er=e=>et(e.getSelectedBlocks(),Kw(e.dom)),Yw=Pe.each,XO=e=>ot(e)&&!ac(e)&&!rc(e)&&!ef(e),JO=(e,n)=>{for(let o=e;o;o=o[n]){if(Re(o)&&dn(o.data))return e;if(ot(o)&&!ac(o))return o}return e},QO=(e,n,o)=>{const r=BO(e),i=uu(n)&&e.dom.isEditable(n),l=uu(o)&&e.dom.isEditable(o);if(i&&l){const d=JO(n,"previousSibling"),g=JO(o,"nextSibling");if(r.compare(d,g)){for(let h=d.nextSibling;h&&h!==g;){const y=h;h=h.nextSibling,d.appendChild(y)}return e.dom.remove(g),Pe.each(Pe.grep(g.childNodes),h=>{d.appendChild(h)}),d}}return o},e5=(e,n,o,r)=>{var i;if(r&&n.merge_siblings!==!1){const l=(i=QO(e,rA(r),r))!==null&&i!==void 0?i:r;QO(e,l,rA(l,!0))}},IF=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";Yw(e.select(r,o),i=>{XO(i)&&e.isEditable(i)&&Yw(n.styles,(l,d)=>{e.setStyle(i,d,"")})})}},R2=(e,n,o)=>{Yw(e.childNodes,r=>{XO(r)&&(n(r)&&o(r),r.hasChildNodes()&&R2(r,n,o))})},Q1=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},t5=(e,n)=>o=>!!(o&&M1(e,o,n)),Xw=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),Q1(e,r)},Ff=cr.generate([{keep:[]},{rename:["name"]},{removed:[]}]),$f=/^(src|href|style)$/,B2=Pe.each,e0=Ux,n5=e=>/^(TR|TH|TD)$/.test(e.nodeName),Jw=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),Qw=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],i=n[o?"startOffset":"endOffset"];if(ot(r)){const l=r.childNodes.length-1;!o&&i&&i--,r=r.childNodes[i>l?l:i]}return Re(r)&&o&&i>=r.data.length&&(r=new dr(r,e.getBody()).next()||r),Re(r)&&!o&&i===0&&(r=new dr(r,e.getBody()).prev()||r),r},o5=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return n5(e)&&r?e.nodeName==="TR"&&r[o]||r:e},P2=(e,n,o,r)=>{var i;const l=e.create(o,r);return(i=n.parentNode)===null||i===void 0||i.insertBefore(l,n),l.appendChild(n),l},s5=(e,n,o,r,i)=>{const l=U.fromDom(n),d=U.fromDom(e.create(r,i)),g=o?Eb(l):Ip(l);return iu(d,g),o?(Yr(l,d),Ym(d,l)):(El(l,d),rs(d,l)),d.dom},FF=(e,n)=>n.links&&e.nodeName==="A",r5=(e,n,o)=>{const r=n.parentNode;let i;const l=e.dom,d=ta(e);Su(o)&&r===l.getRoot()&&(!o.list_block||!e0(n,o.list_block))&&pe(xs(n.childNodes),g=>{xh(e,d,g.nodeName.toLowerCase())?i?i.appendChild(g):(i=P2(l,g,d),l.setAttribs(i,g1(e))):i=null}),!(sL(o)&&!e0(o.inline,n))&&l.remove(n,!0)},a5=(e,n,o)=>No(e)?{name:n,value:null}:{name:e,value:mm(n,o)},i5=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},$F=(e,n,o,r,i)=>{let l=!1;B2(o.styles,(d,g)=>{const{name:h,value:y}=a5(g,d,r),w=Zx(y,h);(o.remove_similar||ee(y)||!ot(i)||e0(M1(e,i,h),w))&&e.setStyle(n,h,""),l=!0}),l&&i5(e,n)},HF=(e,n,o)=>{n==="removeformat"?pe(er(e.selection),r=>{pe(qw,i=>e.dom.setStyle(r,i,"")),i5(e.dom,r)}):KO(e.formatter,n).each(r=>{pe(er(e.selection),i=>$F(e.dom,i,r,o,null))})},c5=(e,n,o,r,i)=>{const l=e.dom,d=BO(e),g=e.schema;if(Qs(n)&&Gg(g,n.inline)&&Zc(g,r)&&r.parentElement===e.getBody())return r5(e,r,n),Ff.removed();if(!n.ceFalseOverride&&r&&l.getContentEditableParent(r)==="false"||r&&!zw(l,r,n)&&!FF(r,n))return Ff.keep();const h=r,y=n.preserve_attributes;if(Qs(n)&&n.remove==="all"&&Qn(y)){const w=et(l.getAttribs(h),T=>_t(y,T.name.toLowerCase()));if(l.removeAllAttribs(h),pe(w,T=>l.setAttrib(h,T.name,T.value)),w.length>0)return Ff.rename("span")}if(n.remove!=="all"){$F(l,h,n,o,i),B2(n.attributes,(T,_)=>{const{name:N,value:P}=a5(_,T,o);if(n.remove_similar||ee(P)||!ot(i)||e0(l.getAttrib(i,N),P)){if(N==="class"){const B=l.getAttrib(h,N);if(B){let F="";if(pe(B.split(/\s+/),W=>{/mce\-\w+/.test(W)&&(F+=(F?" ":"")+W)}),F){l.setAttrib(h,N,F);return}}}if($f.test(N)&&h.removeAttribute("data-mce-"+N),N==="style"&&Xi(["li"])(h)&&l.getStyle(h,"list-style-type")==="none"){h.removeAttribute(N),l.setStyle(h,"list-style-type","none");return}N==="class"&&h.removeAttribute("className"),h.removeAttribute(N)}}),B2(n.classes,T=>{T=mm(T,o),(!ot(i)||l.hasClass(i,T))&&l.removeClass(h,T)});const w=l.getAttribs(h);for(let T=0;T<w.length;T++){const _=w[T].nodeName;if(!d.isAttributeInternal(_))return Ff.keep()}}return n.remove!=="none"?(r5(e,h,n),Ff.removed()):Ff.keep()},GG=(e,n,o,r,i)=>{let l;return n.parentNode&&pe(qv(e.dom,n.parentNode).reverse(),d=>{if(!l&&ot(d)&&d.id!=="_start"&&d.id!=="_end"){const g=Cd(e,d,o,r,i);g&&g.split!==!1&&(l=d)}}),l},VF=(e,n,o,r)=>c5(e,n,o,r,r).fold(qe(r),i=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,i)),qe(null)),e4=(e,n,o,r,i,l,d,g)=>{var h,y;let w,T;const _=e.dom;if(o){const N=o.parentNode;for(let P=r.parentNode;P&&P!==N;P=P.parentNode){let B=_.clone(P,!1);for(let F=0;F<n.length&&(B=VF(e,n[F],g,B),B!==null);F++);B&&(w&&B.appendChild(w),T||(T=B),w=B)}(!d.mixed||!_.isBlock(o))&&(r=(h=_.split(o,r))!==null&&h!==void 0?h:r),w&&T&&((y=i.parentNode)===null||y===void 0||y.insertBefore(w,i),T.appendChild(i),Qs(d)&&e5(e,d,g,w))}return r},t4=(e,n,o,r,i)=>{const l=e.formatter.get(n),d=l[0],g=e.dom,h=e.selection,y=B=>{const F=GG(e,B,n,o,i);return e4(e,l,F,B,B,!0,d,o)},w=B=>ac(B)&&ot(B)&&(B.id==="_start"||B.id==="_end"),T=B=>Vn(l,F=>L2(e,F,o,B,B)),_=B=>{const F=xs(B.childNodes),Q=T(B)||Vn(l,Se=>zw(g,B,Se)),te=B.parentNode;if(!Q&&Oe(te)&&jx(d)&&T(te),d.deep&&F.length)for(let Se=0;Se<F.length;Se++)_(F[Se]);pe(["underline","line-through","overline"],Se=>{ot(B)&&e.dom.getStyle(B,"text-decoration")===Se&&B.parentNode&&iA(g,B.parentNode)===Se&&L2(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Se}},void 0,B)})},N=B=>{const F=g.get(B?"_start":"_end");if(F){let W=F[B?"firstChild":"lastChild"];return w(W)&&(W=W[B?"firstChild":"lastChild"]),Re(W)&&W.data.length===0&&(W=B?F.previousSibling||F.nextSibling:F.nextSibling||F.previousSibling),g.remove(F,!0),W}else return null},P=B=>{let F,W,Q=Ef(g,B,l,{includeTrailingSpace:B.collapsed});if(d.split){if(Q=_f(Q),F=Qw(e,Q,!0),W=Qw(e,Q),F!==W){if(F=o5(F,!0),W=o5(W,!1),Jw(g,F,W)){const ae=O.from(F.firstChild).getOr(F);y(s5(g,ae,!0,"span",{id:"_start","data-mce-type":"bookmark"})),N(!0);return}if(Jw(g,W,F)){const ae=O.from(W.lastChild).getOr(W);y(s5(g,ae,!1,"span",{id:"_end","data-mce-type":"bookmark"})),N(!1);return}F=P2(g,F,"span",{id:"_start","data-mce-type":"bookmark"}),W=P2(g,W,"span",{id:"_end","data-mce-type":"bookmark"});const te=g.createRng();te.setStartAfter(F),te.setEndBefore(W),an(g,te,ae=>{pe(ae,Se=>{!ac(Se)&&!ac(Se.parentNode)&&y(Se)})}),y(F),y(W),F=N(!0),W=N()}else F=W=y(F);Q.startContainer=F.parentNode?F.parentNode:F,Q.startOffset=g.nodeIndex(F),Q.endContainer=W.parentNode?W.parentNode:W,Q.endOffset=g.nodeIndex(W)+1}an(g,Q,te=>{pe(te,_)})};if(r){if(xf(r)){const B=g.createRng();B.setStartBefore(r),B.setEndAfter(r),P(B)}else P(r);QT(e,n,r,o);return}!h.isCollapsed()||!Qs(d)||hd(e).length?(sA(e,()=>$x(e,P),B=>Qs(d)&&Uw(e,n,o,B)),e.nodeChanged()):Ww(e,n,o,i),HF(e,n,o),QT(e,n,r,o)},l5=(e,n,o,r,i)=>{(r||e.selection.isEditable())&&t4(e,n,o,r,i)},L2=(e,n,o,r,i)=>c5(e,n,o,r,i).fold(ke,l=>(e.dom.rename(r,l),!0),ze),u5=Pe.each,zF=(e,n,o,r)=>{const i=l=>{if(uu(l)&&ot(l.parentNode)&&e.isEditable(l)){const d=iA(e,l.parentNode);e.getStyle(l,"color")&&d?e.setStyle(l,"text-decoration",d):e.getStyle(l,"text-decoration")===d&&e.setStyle(l,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Pe.walk(r,i,"childNodes"),i(r))},UF=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const i=t5(e,"fontSize");R2(r,l=>i(l)&&e.isEditable(l),Xw(e,"backgroundColor",mm(n.styles.backgroundColor,o)))}},ZF=(e,n,o,r)=>{if(Qs(n)&&(n.inline==="sub"||n.inline==="sup")){const i=t5(e,"fontSize");R2(r,d=>i(d)&&e.isEditable(d),Xw(e,"fontSize",""));const l=et(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(l,!0)}},WF=(e,n,o,r)=>{u5(n,i=>{Qs(i)&&u5(e.dom.select(i.inline,r),l=>{XO(l)&&L2(e,i,o,l,i.exact?l:null)}),IF(e.dom,i,r)})},jF=(e,n,o,r,i)=>{const l=i.parentNode;Cd(e,l,o,r)&&L2(e,n,r,i)||n.merge_with_parents&&l&&e.dom.getParent(l,d=>Cd(e,d,o,r)?(L2(e,n,r,i),!0):!1)},I2=Pe.each,d5=(e,n,o,r)=>{if(l_(e)&&Qs(n)&&o.parentNode){const i=ev(e.schema),l=Up(U.fromDom(o),d=>rc(d.dom));return vl(i,r)&&fu(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!l}else return!1},m5=(e,n,o,r)=>{if(I2(o.styles,(i,l)=>{e.setStyle(n,l,mm(i,r))}),o.styles){const i=e.getAttrib(n,"style");i&&e.setAttrib(n,"data-mce-style",i)}},GF=(e,n,o,r)=>{const i=e.formatter.get(n),l=i[0],d=!r&&e.selection.isCollapsed(),g=e.dom,h=e.selection,y=(P,B=l)=>{jt(B.onformat)&&B.onformat(P,B,o,r),m5(g,P,B,o),I2(B.attributes,(F,W)=>{g.setAttrib(P,W,mm(F,o))}),I2(B.classes,F=>{const W=mm(F,o);g.hasClass(P,W)||g.addClass(P,W)})},w=(P,B)=>{let F=!1;return I2(P,W=>ic(W)?g.getContentEditable(B)==="false"&&!W.ceFalseOverride||Oe(W.collapsed)&&W.collapsed!==d?!0:g.is(B,W.selector)&&!rc(B)?(y(B,W),F=!0,!1):!0:!1),F},T=P=>{if(re(P)){const B=g.create(P);return y(B),B}else return null},_=(P,B,F)=>{const W=[];let Q=!0;const te=l.inline||l.block,ae=T(te),Se=ge=>nL(l)&&Cd(e,ge,n,o),De=(ge,le,Ee)=>{const Ge=oL(l)&&Vx(e.schema,ge)&&xh(e,le,te);return Ee&&Ge},Ke=(ge,le,Ee,Ge)=>{const lt=ge.nodeName.toLowerCase(),Gt=xh(e,te,lt)&&xh(e,le,te),Kt=!F&&Re(ge)&&lv(ge.data),_n=rc(ge),In=!Qs(l)||!P.isBlock(ge);return(Ee||Ge)&&Gt&&!Kt&&!_n&&In};an(P,B,ge=>{let le;const Ee=Ge=>{let lt=!1,Gt=Q,Kt=!1;const _n=Ge.parentNode,In=_n.nodeName.toLowerCase(),Oo=P.getContentEditable(Ge);Oe(Oo)&&(Gt=Q,Q=Oo==="true",lt=!0,Kt=aA(e,Ge));const Bs=Q&&!lt;if(zo(Ge)&&!d5(e,l,Ge,In)){le=null,Su(l)&&P.remove(Ge);return}if(Se(Ge)){le=null;return}if(De(Ge,In,Bs)){const js=P.rename(Ge,te);y(js),W.push(js),le=null;return}if(ic(l)){let js=w(i,Ge);if(!js&&Oe(_n)&&jx(l)&&(js=w(i,_n)),!Qs(l)||js){le=null;return}}Oe(ae)&&Ke(Ge,In,Bs,Kt)?(le||(le=P.clone(ae,!1),_n.insertBefore(le,Ge),W.push(le)),Kt&&lt&&(Q=Gt),le.appendChild(Ge)):(le=null,pe(xs(Ge.childNodes),Ee),lt&&(Q=Gt),le=null)};pe(ge,Ee)}),l.links===!0&&pe(W,ge=>{const le=Ee=>{Ee.nodeName==="A"&&y(Ee,l),pe(xs(Ee.childNodes),le)};le(ge)}),pe(W,ge=>{const le=lt=>{let Gt=0;return pe(lt.childNodes,Kt=>{!wf(Kt)&&!ac(Kt)&&Gt++}),Gt},Ee=lt=>ko(lt.childNodes,Hx).filter(Kt=>P.getContentEditable(Kt)!=="false"&&zw(P,Kt,l)).map(Kt=>{const _n=P.clone(Kt,!1);return y(_n),P.replace(_n,lt,!0),P.remove(Kt,!0),_n}).getOr(lt),Ge=le(ge);if((W.length>1||!P.isBlock(ge))&&Ge===0){P.remove(ge,!0);return}(Qs(l)||Su(l)&&l.wrapper)&&(!l.exact&&Ge===1&&(ge=Ee(ge)),WF(e,i,o,ge),jF(e,l,n,o,ge),UF(P,l,o,ge),zF(P,l,o,ge),ZF(P,l,o,ge),e5(e,l,o,ge))})},N=xf(r)?r:h.getNode();if(g.getContentEditable(N)==="false"&&!aA(e,N)){r=N,w(i,r),cm(e,n,r,o);return}if(l){if(r)if(xf(r)){if(!w(i,r)){const P=g.createRng();P.setStartBefore(r),P.setEndAfter(r),_(g,Ef(g,P,i),!0)}}else _(g,r,!0);else!d||!Qs(l)||hd(e).length?(h.setRng(Fw(h.getRng())),sA(e,()=>{$x(e,(P,B)=>{const F=B?P:Ef(g,P,i);_(g,F,!1)})},ze),e.nodeChanged()):pm(e,n,o),KO(e.formatter,n).each(P=>{pe(jG(e.selection),B=>m5(g,B,P,o))});BF(n,e)}cm(e,n,r,o)},_u=(e,n,o,r)=>{(r||e.selection.isEditable())&&GF(e,n,o,r)},f5=e=>xt(e,"vars"),g5=(e,n)=>{e.set({}),n.on("NodeChange",o=>{o4(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=O.from(o.node).map(i=>xf(i)?i:i.startContainer).bind(i=>ot(i)?O.some(i):O.from(i.parentElement)).getOrThunk(()=>h5(n));o4(n,r,e.get())})},h5=e=>e.selection.getStart(),p5=(e,n,o,r,i)=>Wl(n,g=>{const h=e.formatter.matchNode(g,o,i??{},r);return!mo(h)},g=>Vw(e,g,o)?!0:r?!1:Oe(e.formatter.matchNode(g,o,i,!0))),n4=(e,n)=>{const o=n??h5(e);return et(qv(e.dom,o),r=>ot(r)&&!ef(r))},o4=(e,n,o)=>{const r=n4(e,n);Ze(o,(i,l)=>{const d=g=>{const h=p5(e,r,l,g.similar,f5(g)?g.vars:void 0),y=h.isSome();if(g.state.get()!==y){g.state.set(y);const w=h.getOr(n);f5(g)?g.callback(y,{node:w,format:l,parents:r}):pe(g.callbacks,T=>T(y,{node:w,format:l,parents:r}))}};pe([i.withSimilar,i.withoutSimilar],d),pe(i.withVars,d)})},b5=(e,n,o,r,i,l)=>{const d=n.get();pe(o.split(","),g=>{const h=oo(d,g).getOrThunk(()=>{const w={withSimilar:{state:To(!1),similar:!0,callbacks:[]},withoutSimilar:{state:To(!1),similar:!1,callbacks:[]},withVars:[]};return d[g]=w,w}),y=()=>{const w=n4(e);return p5(e,w,g,i,l).isSome()};if(mo(l)){const w=i?h.withSimilar:h.withoutSimilar;w.callbacks.push(r),w.callbacks.length===1&&w.state.set(y())}else h.withVars.push({state:To(y()),similar:i,vars:l,callback:r})}),n.set(d)},v5=(e,n,o)=>{const r=e.get();pe(n.split(","),i=>oo(r,i).each(l=>{r[i]={withSimilar:{...l.withSimilar,callbacks:et(l.withSimilar.callbacks,d=>d!==o)},withoutSimilar:{...l.withoutSimilar,callbacks:et(l.withoutSimilar.callbacks,d=>d!==o)},withVars:et(l.withVars,d=>d.callback!==o)}})),e.set(r)},qF=(e,n,o,r,i,l)=>(b5(e,n,o,r,i,l),{unbind:()=>v5(n,o,r)}),KF=(e,n,o,r)=>{const i=e.formatter.get(n);i&&(Uw(e,n,o,r)&&(!("toggle"in i[0])||i[0].toggle)?l5(e,n,o,r):_u(e,n,o,r))},y5=Pe.explode,C5=()=>{const e={};return{addFilter:(i,l)=>{pe(y5(i),d=>{xt(e,d)||(e[d]={name:d,callbacks:[]}),e[d].callbacks.push(l)})},getFilters:()=>Hu(e),removeFilter:(i,l)=>{pe(y5(i),d=>{if(xt(e,d))if(Oe(l)){const g=e[d],h=et(g.callbacks,y=>y!==l);h.length>0?g.callbacks=h:delete e[d]}else delete e[d]})}}},YF=(e,n)=>{pe(n,o=>{e.attr(o,null)})},Hf=(e,n,o)=>{e.addNodeFilter("font",r=>{pe(r,i=>{const l=n.parse(i.attr("style")),d=i.attr("color"),g=i.attr("face"),h=i.attr("size");d&&(l.color=d),g&&(l["font-family"]=g),h&&Zi(h).each(y=>{l["font-size"]=o[y-1]}),i.name="span",i.attr("style",n.serialize(l)),YF(i,["color","face","size"])})})},S5=(e,n,o)=>{e.addNodeFilter("strike",r=>{const i=n.type!=="html4";pe(r,l=>{if(i)l.name="s";else{const d=o.parse(l.attr("style"));d["text-decoration"]="line-through",l.name="span",l.attr("style",o.serialize(d))}})})},x5=(e,n,o)=>{var r;const i=hu();n.convert_fonts_to_spans&&Hf(e,i,Pe.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),S5(e,o,i)},XF=(e,n,o)=>{n.inline_styles&&x5(e,n,o)},s4=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),JF=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},r4=e=>{try{return decodeURIComponent(e)}catch{return e}},F2=e=>{const[n,...o]=e.split(","),r=o.join(","),i=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(i){const l=i[2]===";base64",d=r4(r),g=l?JF(d):d;return O.some({type:i[1],data:g,base64Encoded:l})}else return O.none()},w5=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return O.none()}const i=new Uint8Array(r.length);for(let l=0;l<i.length;l++)i[l]=r.charCodeAt(l);return O.some(new Blob([i],{type:e}))},QF=e=>new Promise((n,o)=>{F2(e).bind(({type:r,data:i,base64Encoded:l})=>w5(r,i,l)).fold(()=>o("Invalid data URI"),n)}),$2=e=>es(e,"blob:")?s4(e):es(e,"data:")?QF(e):Promise.reject("Unknown URI format"),E5=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var i;o((i=r.error)===null||i===void 0?void 0:i.message)},r.readAsDataURL(e)});let a4=0;const e$=e=>"blobid"+a4++,i4=(e,n,o)=>F2(e).bind(({data:r,type:i,base64Encoded:l})=>{if(n&&!l)return O.none();{const d=l?r:btoa(r);return o(d,i)}}),c4=(e,n,o)=>{const r=e.create(e$(),n,o);return e.add(r),r},H2=(e,n,o=!1)=>i4(n,o,(r,i)=>O.from(e.getByData(r,i)).orThunk(()=>w5(i,r).map(l=>c4(e,l,r)))),k5=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(es(n,"blob:")){const r=e.getByUri(n);return Oe(r)?Promise.resolve(r):$2(n).then(i=>E5(i).then(l=>i4(l,!1,d=>O.some(c4(e,i,d))).getOrThunk(o)))}else return es(n,"data:")?H2(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},l4=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,t$=e=>O.from(e.match(l4)).bind(n=>Za(n,1)).map(n=>es(n,"www.")?n.substring(4):n),T5=(e,n)=>{O.from(e.attr("src")).bind(t$).forall(o=>!_t(n,o))&&e.attr("sandbox","")},u4=(e,n)=>es(e,`${n}/`),Mi=e=>mo(e)?"iframe":u4(e,"image")?"img":u4(e,"video")?"video":u4(e,"audio")?"audio":"iframe",_5=({type:e,src:n,width:o,height:r}={},i,l)=>{const d=Mi(e),g=new Sa(d,1);return g.attr(d==="audio"?{src:n}:{src:n,width:o,height:r}),(d==="audio"||d==="video")&&g.attr("controls",""),d==="iframe"&&i&&T5(g,l),g},n$=e=>Oe(e.attr("data-mce-bogus")),A5=e=>e.attr("src")===yn.transparentSrc||Oe(e.attr("data-mce-placeholder")),o$=(e,n)=>{const{blob_cache:o}=n;if(o){const r=i=>{const l=i.attr("src");A5(i)||n$(i)||hn(l)||H2(o,l,!0).each(d=>{i.attr("src",d.blobUri())})};e.addAttributeFilter("src",i=>pe(i,r))}},s$=(e,n)=>{var o,r;const i=e.schema;e.addAttributeFilter("href",h=>{let y=h.length;const w=_=>_.split(" ").filter(P=>P.length>0).concat(["noopener"]).sort().join(" "),T=_=>{const N=_?Pe.trim(_):"";return/\b(noopener)\b/g.test(N)?N:w(N)};if(!n.allow_unsafe_link_target)for(;y--;){const _=h[y];_.name==="a"&&_.attr("target")==="_blank"&&_.attr("rel",T(_.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",h=>{let y=h.length,w,T,_,N;for(;y--;)if(N=h[y],N.name==="a"&&N.firstChild&&!N.attr("href"))for(_=N.parent,w=N.lastChild;w&&_;)T=w.prev,_.insert(w,N),w=T}),n.fix_list_elements&&e.addNodeFilter("ul,ol",h=>{let y=h.length,w,T;for(;y--;)if(w=h[y],T=w.parent,T&&(T.name==="ul"||T.name==="ol"))if(w.prev&&w.prev.name==="li")w.prev.append(w);else{const _=new Sa("li",1);_.attr("style","list-style-type: none"),w.wrap(_)}});const l=i.getValidClasses();n.validate&&l&&e.addAttributeFilter("class",h=>{var y;let w=h.length;for(;w--;){const T=h[w],_=(y=T.attr("class"))!==null&&y!==void 0?y:"",N=Pe.explode(_," ");let P="";for(let B=0;B<N.length;B++){const F=N[B];let W=!1,Q=l["*"];Q&&Q[F]&&(W=!0),Q=l[T.name],!W&&Q&&Q[F]&&(W=!0),W&&(P&&(P+=" "),P+=F)}P.length||(P=null),T.attr("class",P)}}),o$(e,n);const d=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,g=Vi((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",h=>pe(h,y=>{y.replace(_5({type:y.attr("type"),src:y.name==="object"?y.attr("data"):y.attr("src"),width:y.attr("width"),height:y.attr("height")},d,g))})),d&&e.addNodeFilter("iframe",h=>pe(h,y=>T5(y,g)))};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:O5,setPrototypeOf:Vf,isFrozen:Dh,getPrototypeOf:qG,getOwnPropertyDescriptor:r$}=Object;let{freeze:oi,seal:tr,create:D5}=Object,{apply:d4,construct:Mh}=typeof Reflect<"u"&&Reflect;oi||(oi=function(n){return n}),tr||(tr=function(n){return n}),d4||(d4=function(n,o,r){return n.apply(o,r)}),Mh||(Mh=function(n,o){return new n(...o)});const V2=ri(Array.prototype.forEach),m4=ri(Array.prototype.lastIndexOf),z2=ri(Array.prototype.pop),Nh=ri(Array.prototype.push),a$=ri(Array.prototype.splice),f4=ri(String.prototype.toLowerCase),Au=ri(String.prototype.toString),M5=ri(String.prototype.match),t0=ri(String.prototype.replace),i$=ri(String.prototype.indexOf),Jt=ri(String.prototype.trim),Rl=ri(Object.prototype.hasOwnProperty),si=ri(RegExp.prototype.test),Rh=c$(TypeError);function ri(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return d4(e,n,r)}}function c$(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return Mh(e,o)}}function zt(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:f4;Vf&&Vf(e,null);let r=n.length;for(;r--;){let i=n[r];if(typeof i=="string"){const l=o(i);l!==i&&(Dh(n)||(n[r]=l),i=l)}e[i]=!0}return e}function l$(e){for(let n=0;n<e.length;n++)Rl(e,n)||(e[n]=null);return e}function zf(e){const n=D5(null);for(const[o,r]of O5(e))Rl(e,o)&&(Array.isArray(r)?n[o]=l$(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=zf(r):n[o]=r);return n}function n0(e,n){for(;e!==null;){const r=r$(e,n);if(r){if(r.get)return ri(r.get);if(typeof r.value=="function")return ri(r.value)}e=qG(e)}function o(){return null}return o}const N5=oi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),vo=oi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),U2=oi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),R5=oi(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),g4=oi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),B5=oi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),P5=oi(["#text"]),Ou=oi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),o0=oi(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),L5=oi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Z2=oi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),h4=tr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),u$=tr(/<%[\w\W]*|[\w\W]*%>/gm),d$=tr(/\$\{[\w\W]*/gm),Ns=tr(/^data-[\-\w.\u00B7-\uFFFF]+$/),m$=tr(/^aria-[\-\w]+$/),Sd=tr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),f$=tr(/^(?:\w+script|data):/i),g$=tr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),I5=tr(/^html$/i),h$=tr(/^[a-z][.\w]*(-[.\w]+)+$/i);var F5=Object.freeze({__proto__:null,ARIA_ATTR:m$,ATTR_WHITESPACE:g$,CUSTOM_ELEMENT:h$,DATA_ATTR:Ns,DOCTYPE_NAME:I5,ERB_EXPR:u$,IS_ALLOWED_URI:Sd,IS_SCRIPT_OR_DATA:f$,MUSTACHE_EXPR:h4,TMPLIT_EXPR:d$});const s0={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},p$=function(){return typeof window>"u"?null:window},b$=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";o&&o.hasAttribute(i)&&(r=o.getAttribute(i));const l="dompurify"+(r?"#"+r:"");try{return n.createPolicy(l,{createHTML(d){return d},createScriptURL(d){return d}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}},$5=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function r0(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p$();const n=cn=>r0(cn);if(n.version="3.2.4",n.removed=[],!e||!e.document||e.document.nodeType!==s0.document||!e.Element)return n.isSupported=!1,n;let{document:o}=e;const r=o,i=r.currentScript,{DocumentFragment:l,HTMLTemplateElement:d,Node:g,Element:h,NodeFilter:y,NamedNodeMap:w=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:T,DOMParser:_,trustedTypes:N}=e,P=h.prototype,B=n0(P,"cloneNode"),F=n0(P,"remove"),W=n0(P,"nextSibling"),Q=n0(P,"childNodes"),te=n0(P,"parentNode");if(typeof d=="function"){const cn=o.createElement("template");cn.content&&cn.content.ownerDocument&&(o=cn.content.ownerDocument)}let ae,Se="";const{implementation:De,createNodeIterator:Ke,createDocumentFragment:ge,getElementsByTagName:le}=o,{importNode:Ee}=r;let Ge=$5();n.isSupported=typeof O5=="function"&&typeof te=="function"&&De&&De.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:lt,ERB_EXPR:Gt,TMPLIT_EXPR:Kt,DATA_ATTR:_n,ARIA_ATTR:In,IS_SCRIPT_OR_DATA:Oo,ATTR_WHITESPACE:Bs,CUSTOM_ELEMENT:js}=F5;let{IS_ALLOWED_URI:$e}=F5,it=null;const xn=zt({},[...N5,...vo,...U2,...g4,...P5]);let An=null;const ye=zt({},[...Ou,...o0,...L5,...Z2]);let Me=Object.seal(D5(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),at=null,qt=null,tn=!0,Dn=!0,Ec=!1,Bu=!0,aa=!1,$a=!0,Pi=!1,zr=!1,Ta=!1,kc=!1,Nm=!1,ft=!1,mn=!0,Zo=!1;const vs="user-content-";let Gs=!0,ys=!1,Do={},Mo=null;const _a=zt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ml=null;const Pu=zt({},["audio","video","img","source","image","track"]);let Vl=null;const xp=zt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),yg="http://www.w3.org/1998/Math/MathML",Rd="http://www.w3.org/2000/svg",Tc="http://www.w3.org/1999/xhtml";let Bd=Tc,sb=!1,wp=null;const j8=zt({},[yg,Rd,Tc],Au);let Ep=zt({},["mi","mo","mn","ms","mtext"]),kp=zt({},["annotation-xml"]);const G8=zt({},["title","style","font","a","script"]);let Tp=null;const Lu=["application/xhtml+xml","text/html"],Cg="text/html";let se=null,ce=null;const Fe=o.createElement("form"),Ne=function(ue){return ue instanceof RegExp||ue instanceof Function},Ct=function(){let ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ce&&ce===ue)){if((!ue||typeof ue!="object")&&(ue={}),ue=zf(ue),Tp=Lu.indexOf(ue.PARSER_MEDIA_TYPE)===-1?Cg:ue.PARSER_MEDIA_TYPE,se=Tp==="application/xhtml+xml"?Au:f4,it=Rl(ue,"ALLOWED_TAGS")?zt({},ue.ALLOWED_TAGS,se):xn,An=Rl(ue,"ALLOWED_ATTR")?zt({},ue.ALLOWED_ATTR,se):ye,wp=Rl(ue,"ALLOWED_NAMESPACES")?zt({},ue.ALLOWED_NAMESPACES,Au):j8,Vl=Rl(ue,"ADD_URI_SAFE_ATTR")?zt(zf(xp),ue.ADD_URI_SAFE_ATTR,se):xp,ml=Rl(ue,"ADD_DATA_URI_TAGS")?zt(zf(Pu),ue.ADD_DATA_URI_TAGS,se):Pu,Mo=Rl(ue,"FORBID_CONTENTS")?zt({},ue.FORBID_CONTENTS,se):_a,at=Rl(ue,"FORBID_TAGS")?zt({},ue.FORBID_TAGS,se):{},qt=Rl(ue,"FORBID_ATTR")?zt({},ue.FORBID_ATTR,se):{},Do=Rl(ue,"USE_PROFILES")?ue.USE_PROFILES:!1,tn=ue.ALLOW_ARIA_ATTR!==!1,Dn=ue.ALLOW_DATA_ATTR!==!1,Ec=ue.ALLOW_UNKNOWN_PROTOCOLS||!1,Bu=ue.ALLOW_SELF_CLOSE_IN_ATTR!==!1,aa=ue.SAFE_FOR_TEMPLATES||!1,$a=ue.SAFE_FOR_XML!==!1,Pi=ue.WHOLE_DOCUMENT||!1,kc=ue.RETURN_DOM||!1,Nm=ue.RETURN_DOM_FRAGMENT||!1,ft=ue.RETURN_TRUSTED_TYPE||!1,Ta=ue.FORCE_BODY||!1,mn=ue.SANITIZE_DOM!==!1,Zo=ue.SANITIZE_NAMED_PROPS||!1,Gs=ue.KEEP_CONTENT!==!1,ys=ue.IN_PLACE||!1,$e=ue.ALLOWED_URI_REGEXP||Sd,Bd=ue.NAMESPACE||Tc,Ep=ue.MATHML_TEXT_INTEGRATION_POINTS||Ep,kp=ue.HTML_INTEGRATION_POINTS||kp,Me=ue.CUSTOM_ELEMENT_HANDLING||{},ue.CUSTOM_ELEMENT_HANDLING&&Ne(ue.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Me.tagNameCheck=ue.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ue.CUSTOM_ELEMENT_HANDLING&&Ne(ue.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Me.attributeNameCheck=ue.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ue.CUSTOM_ELEMENT_HANDLING&&typeof ue.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Me.allowCustomizedBuiltInElements=ue.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),aa&&(Dn=!1),Nm&&(kc=!0),Do&&(it=zt({},P5),An=[],Do.html===!0&&(zt(it,N5),zt(An,Ou)),Do.svg===!0&&(zt(it,vo),zt(An,o0),zt(An,Z2)),Do.svgFilters===!0&&(zt(it,U2),zt(An,o0),zt(An,Z2)),Do.mathMl===!0&&(zt(it,g4),zt(An,L5),zt(An,Z2))),ue.ADD_TAGS&&(it===xn&&(it=zf(it)),zt(it,ue.ADD_TAGS,se)),ue.ADD_ATTR&&(An===ye&&(An=zf(An)),zt(An,ue.ADD_ATTR,se)),ue.ADD_URI_SAFE_ATTR&&zt(Vl,ue.ADD_URI_SAFE_ATTR,se),ue.FORBID_CONTENTS&&(Mo===_a&&(Mo=zf(Mo)),zt(Mo,ue.FORBID_CONTENTS,se)),Gs&&(it["#text"]=!0),Pi&&zt(it,["html","head","body"]),it.table&&(zt(it,["tbody"]),delete at.tbody),ue.TRUSTED_TYPES_POLICY){if(typeof ue.TRUSTED_TYPES_POLICY.createHTML!="function")throw Rh('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ue.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Rh('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ae=ue.TRUSTED_TYPES_POLICY,Se=ae.createHTML("")}else ae===void 0&&(ae=b$(N,i)),ae!==null&&typeof Se=="string"&&(Se=ae.createHTML(""));oi&&oi(ue),ce=ue}},vn=zt({},[...vo,...U2,...R5]),Wo=zt({},[...g4,...B5]),Ur=function(ue){let ut=te(ue);(!ut||!ut.tagName)&&(ut={namespaceURI:Bd,tagName:"template"});const Zt=f4(ue.tagName),ts=f4(ut.tagName);return wp[ue.namespaceURI]?ue.namespaceURI===Rd?ut.namespaceURI===Tc?Zt==="svg":ut.namespaceURI===yg?Zt==="svg"&&(ts==="annotation-xml"||Ep[ts]):!!vn[Zt]:ue.namespaceURI===yg?ut.namespaceURI===Tc?Zt==="math":ut.namespaceURI===Rd?Zt==="math"&&kp[ts]:!!Wo[Zt]:ue.namespaceURI===Tc?ut.namespaceURI===Rd&&!kp[ts]||ut.namespaceURI===yg&&!Ep[ts]?!1:!Wo[Zt]&&(G8[Zt]||!vn[Zt]):!!(Tp==="application/xhtml+xml"&&wp[ue.namespaceURI]):!1},fl=function(ue){Nh(n.removed,{element:ue});try{te(ue).removeChild(ue)}catch{F(ue)}},_p=function(ue,ut){try{Nh(n.removed,{attribute:ut.getAttributeNode(ue),from:ut})}catch{Nh(n.removed,{attribute:null,from:ut})}if(ut.removeAttribute(ue),ue==="is")if(kc||Nm)try{fl(ut)}catch{}else try{ut.setAttribute(ue,"")}catch{}},q8=function(ue){let ut=null,Zt=null;if(Ta)ue="<remove></remove>"+ue;else{const ca=M5(ue,/^[\r\n\t ]+/);Zt=ca&&ca[0]}Tp==="application/xhtml+xml"&&Bd===Tc&&(ue='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ue+"</body></html>");const ts=ae?ae.createHTML(ue):ue;if(Bd===Tc)try{ut=new _().parseFromString(ts,Tp)}catch{}if(!ut||!ut.documentElement){ut=De.createDocument(Bd,"template",null);try{ut.documentElement.innerHTML=sb?Se:ts}catch{}}const ia=ut.body||ut.documentElement;return ue&&Zt&&ia.insertBefore(o.createTextNode(Zt),ia.childNodes[0]||null),Bd===Tc?le.call(ut,Pi?"html":"body")[0]:Pi?ut.documentElement:ia},rb=function(ue){return Ke.call(ue.ownerDocument||ue,ue,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT|y.SHOW_PROCESSING_INSTRUCTION|y.SHOW_CDATA_SECTION,null)},Vk=function(ue){return ue instanceof T&&(typeof ue.nodeName!="string"||typeof ue.textContent!="string"||typeof ue.removeChild!="function"||!(ue.attributes instanceof w)||typeof ue.removeAttribute!="function"||typeof ue.setAttribute!="function"||typeof ue.namespaceURI!="string"||typeof ue.insertBefore!="function"||typeof ue.hasChildNodes!="function")},K8=function(ue){return typeof g=="function"&&ue instanceof g};function Pd(cn,ue,ut){V2(cn,Zt=>{Zt.call(n,ue,ut,ce)})}const zk=function(ue){let ut=null;if(Pd(Ge.beforeSanitizeElements,ue,null),Vk(ue))return fl(ue),!0;const Zt=se(ue.nodeName);if(Pd(Ge.uponSanitizeElement,ue,{tagName:Zt,allowedTags:it}),ue.hasChildNodes()&&!K8(ue.firstElementChild)&&si(/<[/\w]/g,ue.innerHTML)&&si(/<[/\w]/g,ue.textContent)||ue.nodeType===s0.progressingInstruction||$a&&ue.nodeType===s0.comment&&si(/<[/\w]/g,ue.data))return fl(ue),!0;if(!it[Zt]||at[Zt]){if(!at[Zt]&&Uk(Zt)&&(Me.tagNameCheck instanceof RegExp&&si(Me.tagNameCheck,Zt)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(Zt)))return!1;if(Gs&&!Mo[Zt]){const ts=te(ue)||ue.parentNode,ia=Q(ue)||ue.childNodes;if(ia&&ts){const ca=ia.length;for(let ui=ca-1;ui>=0;--ui){const zl=B(ia[ui],!0);zl.__removalCount=(ue.__removalCount||0)+1,ts.insertBefore(zl,W(ue))}}}return fl(ue),!0}return ue instanceof h&&!Ur(ue)||(Zt==="noscript"||Zt==="noembed"||Zt==="noframes")&&si(/<\/no(script|embed|frames)/i,ue.innerHTML)?(fl(ue),!0):(aa&&ue.nodeType===s0.text&&(ut=ue.textContent,V2([lt,Gt,Kt],ts=>{ut=t0(ut,ts," ")}),ue.textContent!==ut&&(Nh(n.removed,{element:ue.cloneNode()}),ue.textContent=ut)),Pd(Ge.afterSanitizeElements,ue,null),!1)},Y8=function(ue,ut,Zt){if(mn&&(ut==="id"||ut==="name")&&(Zt in o||Zt in Fe))return!1;if(!(Dn&&!qt[ut]&&si(_n,ut))){if(!(tn&&si(In,ut))){if(!An[ut]||qt[ut]){if(!(Uk(ue)&&(Me.tagNameCheck instanceof RegExp&&si(Me.tagNameCheck,ue)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(ue))&&(Me.attributeNameCheck instanceof RegExp&&si(Me.attributeNameCheck,ut)||Me.attributeNameCheck instanceof Function&&Me.attributeNameCheck(ut))||ut==="is"&&Me.allowCustomizedBuiltInElements&&(Me.tagNameCheck instanceof RegExp&&si(Me.tagNameCheck,Zt)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(Zt))))return!1}else if(!Vl[ut]){if(!si($e,t0(Zt,Bs,""))){if(!((ut==="src"||ut==="xlink:href"||ut==="href")&&ue!=="script"&&i$(Zt,"data:")===0&&ml[ue])){if(!(Ec&&!si(Oo,t0(Zt,Bs,"")))){if(Zt)return!1}}}}}}return!0},Uk=function(ue){return ue!=="annotation-xml"&&M5(ue,js)},X8=function(ue){Pd(Ge.beforeSanitizeAttributes,ue,null);const{attributes:ut}=ue;if(!ut||Vk(ue))return;const Zt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:An,forceKeepAttr:void 0};let ts=ut.length;for(;ts--;){const ia=ut[ts],{name:ca,namespaceURI:ui,value:zl}=ia,ab=se(ca);let la=ca==="value"?zl:Jt(zl);const Ij=la;if(Zt.attrName=ab,Zt.attrValue=la,Zt.keepAttr=!0,Zt.forceKeepAttr=void 0,Pd(Ge.uponSanitizeAttribute,ue,Zt),la=Zt.attrValue,Zo&&(ab==="id"||ab==="name")&&(_p(ca,ue),la=vs+la),$a&&si(/((--!?|])>)|<\/(style|title)/i,la)){_p(ca,ue);continue}if(Zt.forceKeepAttr)continue;if(!Zt.keepAttr){_p(ca,ue);continue}if(!Bu&&si(/\/>/i,la)){_p(ca,ue);continue}aa&&V2([lt,Gt,Kt],Q8=>{la=t0(la,Q8," ")});const J8=se(ue.nodeName);if(!Y8(J8,ab,la)){_p(ca,ue);continue}if(ae&&typeof N=="object"&&typeof N.getAttributeType=="function"&&!ui)switch(N.getAttributeType(J8,ab)){case"TrustedHTML":{la=ae.createHTML(la);break}case"TrustedScriptURL":{la=ae.createScriptURL(la);break}}if(la!==Ij)try{ui?ue.setAttributeNS(ui,ca,la):ue.setAttribute(ca,la),Vk(ue)?fl(ue):z2(n.removed)}catch{}}Pd(Ge.afterSanitizeAttributes,ue,null)},Lj=function cn(ue){let ut=null;const Zt=rb(ue);for(Pd(Ge.beforeSanitizeShadowDOM,ue,null);ut=Zt.nextNode();)Pd(Ge.uponSanitizeShadowNode,ut,null),zk(ut),X8(ut),ut.content instanceof l&&cn(ut.content);Pd(Ge.afterSanitizeShadowDOM,ue,null)};return n.sanitize=function(cn){let ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ut=null,Zt=null,ts=null,ia=null;if(sb=!cn,sb&&(cn="<!-->"),typeof cn!="string"&&!K8(cn))if(typeof cn.toString=="function"){if(cn=cn.toString(),typeof cn!="string")throw Rh("dirty is not a string, aborting")}else throw Rh("toString is not a function");if(!n.isSupported)return cn;if(zr||Ct(ue),n.removed=[],typeof cn=="string"&&(ys=!1),ys){if(cn.nodeName){const zl=se(cn.nodeName);if(!it[zl]||at[zl])throw Rh("root node is forbidden and cannot be sanitized in-place")}}else if(cn instanceof g)ut=q8("<!---->"),Zt=ut.ownerDocument.importNode(cn,!0),Zt.nodeType===s0.element&&Zt.nodeName==="BODY"||Zt.nodeName==="HTML"?ut=Zt:ut.appendChild(Zt);else{if(!kc&&!aa&&!Pi&&cn.indexOf("<")===-1)return ae&&ft?ae.createHTML(cn):cn;if(ut=q8(cn),!ut)return kc?null:ft?Se:""}ut&&Ta&&fl(ut.firstChild);const ca=rb(ys?cn:ut);for(;ts=ca.nextNode();)zk(ts),X8(ts),ts.content instanceof l&&Lj(ts.content);if(ys)return cn;if(kc){if(Nm)for(ia=ge.call(ut.ownerDocument);ut.firstChild;)ia.appendChild(ut.firstChild);else ia=ut;return(An.shadowroot||An.shadowrootmode)&&(ia=Ee.call(r,ia,!0)),ia}let ui=Pi?ut.outerHTML:ut.innerHTML;return Pi&&it["!doctype"]&&ut.ownerDocument&&ut.ownerDocument.doctype&&ut.ownerDocument.doctype.name&&si(I5,ut.ownerDocument.doctype.name)&&(ui="<!DOCTYPE "+ut.ownerDocument.doctype.name+`>
`+ui),aa&&V2([lt,Gt,Kt],zl=>{ui=t0(ui,zl," ")}),ae&&ft?ae.createHTML(ui):ui},n.setConfig=function(){let cn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ct(cn),zr=!0},n.clearConfig=function(){ce=null,zr=!1},n.isValidAttribute=function(cn,ue,ut){ce||Ct({});const Zt=se(cn),ts=se(ue);return Y8(Zt,ts,ut)},n.addHook=function(cn,ue){typeof ue=="function"&&Nh(Ge[cn],ue)},n.removeHook=function(cn,ue){if(ue!==void 0){const ut=m4(Ge[cn],ue);return ut===-1?void 0:a$(Ge[cn],ut,1)[0]}return z2(Ge[cn])},n.removeHooks=function(cn){Ge[cn]=[]},n.removeAllHooks=function(){Ge=$5()},n}var p4=r0();const H5=Pe.each,KG=Pe.trim,a0=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],v$={ftp:21,http:80,https:443,mailto:25},b4=["img","video"],y$=(e,n)=>Oe(e)?!e:Oe(n)?!_t(b4,n):!0,C$=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},V5=(e,n,o)=>{const r=C$(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?y$(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class sl{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),i=/data:([^;]+)/.exec(r[0]);return i&&(o=i[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const i=so.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!V5(r,i,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=KG(n),this.settings=o;const r=o.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){i.source=n;return}const l=n.indexOf("//")===0;if(n.indexOf("/")===0&&!l&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const g=r?r.path:new sl(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+i.toAbsPath(g,n);else{const h=/([^#?]*)([#?]?.*)/.exec(n);h&&(n=(r&&r.protocol||"http")+"://mce_host"+i.toAbsPath(g,h[1])+h[2])}}n=n.replace(/@@/g,"(mce_at)");const d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);d&&H5(a0,(g,h)=>{let y=d[h];y&&(y=y.replace(/\(mce_at\)/g,"@@")),i[g]=y}),r&&(i.protocol||(i.protocol=r.protocol),i.userInfo||(i.userInfo=r.userInfo),!i.port&&i.host==="mce_host"&&(i.port=r.port),(!i.host||i.host==="mce_host")&&(i.host=r.host),i.source=""),l&&(i.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new sl(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),i=o.getURI();if(r===i||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===i)return r;let l=this.toRelPath(this.path,o.path);return o.query&&(l+="?"+o.query),o.anchor&&(l+="#"+o.anchor),l}toAbsolute(n,o){const r=new sl(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?v$[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,i="",l,d;const g=n.substring(0,n.lastIndexOf("/")).split("/"),h=o.split("/");if(g.length>=h.length){for(l=0,d=g.length;l<d;l++)if(l>=h.length||g[l]!==h[l]){r=l+1;break}}if(g.length<h.length){for(l=0,d=h.length;l<d;l++)if(l>=g.length||g[l]!==h[l]){r=l+1;break}}if(r===1)return o;for(l=0,d=g.length-(r-1);l<d;l++)i+="../";for(l=r-1,d=h.length;l<d;l++)l!==r-1?i+="/"+h[l]:i+=h[l];return i}toAbsPath(n,o){let r=0;const i=/\/$/.test(o)?"/":"",l=n.split("/"),d=o.split("/"),g=[];H5(l,T=>{T&&g.push(T)});const h=[];for(let T=d.length-1;T>=0;T--)if(!(d[T].length===0||d[T]===".")){if(d[T]===".."){r++;continue}if(r>0){r--;continue}h.push(d[T])}const y=g.length-r;let w;return y<=0?w=eo(h).join("/"):w=g.slice(0,y).join("/")+"/"+eo(h).join("/"),w.indexOf("/")!==0&&(w="/"+w),i&&w.lastIndexOf("/")!==w.length-1&&(w+=i),w}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const Uf=Pe.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),xd="data-mce-type";let i0=0;const c0=(e,n,o,r,i)=>{var l,d,g,h;const y=n.validate,w=o.getSpecialElements();e.nodeType===Mg&&!n.allow_conditional_comments&&/^\[if/i.test((l=e.nodeValue)!==null&&l!==void 0?l:"")&&(e.nodeValue=" "+e.nodeValue);const T=(d=i==null?void 0:i.tagName)!==null&&d!==void 0?d:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){Oe(i)&&(i.allowedTags[T]=!0);return}if(e.nodeType!==Nr||T==="body")return;const _=U.fromDom(e),N=jd(_,xd),P=Ko(_,"data-mce-bogus");if(!N&&re(P)){P==="all"?v(_):E(_);return}const B=o.getElementRule(T);if(y&&!B){xt(w,T)?v(_):E(_);return}else Oe(i)&&(i.allowedTags[T]=!0);if(y&&B&&!N){if(pe((g=B.attributesForced)!==null&&g!==void 0?g:[],F=>{$s(_,F.name,F.value==="{$uid}"?`mce_${i0++}`:F.value)}),pe((h=B.attributesDefault)!==null&&h!==void 0?h:[],F=>{jd(_,F.name)||$s(_,F.name,F.value==="{$uid}"?`mce_${i0++}`:F.value)}),B.attributesRequired&&!Vn(B.attributesRequired,F=>jd(_,F))){E(_);return}if(B.removeEmptyAttrs&&Ob(_)){E(_);return}B.outputName&&B.outputName!==T&&Ie(_,B.outputName)}},Zf=(e,n,o,r,i)=>{const l=e.tagName.toLowerCase(),{attrName:d,attrValue:g}=i;i.keepAttr=bm(n,o,r,l,d,g),i.keepAttr?(i.allowedAttributes[d]=!0,u0(d,o)&&(i.attrValue=d),n.allow_svg_data_urls&&es(g,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):l0(e,d)&&(i.forceKeepAttr=!0)},bm=(e,n,o,r,i,l)=>o!=="html"&&!Yd(r)?!0:!(i in Uf&&V5(e,l,r))&&(!e.validate||n.isValid(r,i)||es(i,"data-")||es(i,"aria-")),l0=(e,n)=>e.hasAttribute(xd)&&(n==="id"||n==="class"||n==="style"),u0=(e,n)=>e in n.getBoolAttrs(),z5=(e,n,o,r)=>{const{attributes:i}=e;for(let l=i.length-1;l>=0;l--){const d=i[l],g=d.name,h=d.value;!bm(n,o,r,e.tagName.toLowerCase(),g,h)&&!l0(e,g)?e.removeAttribute(g):u0(g,o)&&e.setAttribute(g,g)}},v4=(e,n,o)=>{const r=p4();return r.addHook("uponSanitizeElement",(i,l)=>{c0(i,e,n,o.track(i),l)}),r.addHook("uponSanitizeAttribute",(i,l)=>{Zf(i,e,n,o.current(),l)}),r},y4=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},U5=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};p4().sanitize(e,o)},Z5=(e,n)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=p4(),i=n.allow_mathml_annotation_encodings,l=Qn(i)&&i.length>0,d=h=>{const y=h.getAttribute("encoding");return l&&re(y)&&_t(i,y)},g=(h,y)=>l&&y==="semantics"?O.some(!0):y==="annotation"?O.some(ot(h)&&d(h)):Qn(n.extended_mathml_elements)&&n.extended_mathml_elements.includes(y)?O.from(!0):O.none();r.addHook("uponSanitizeElement",(h,y)=>{var w;const T=(w=y.tagName)!==null&&w!==void 0?w:h.nodeName.toLowerCase();g(h,T).each(N=>{y.allowedTags[T]=N,!N&&n.sanitize&&ot(h)&&h.remove()})}),r.addHook("uponSanitizeAttribute",(h,y)=>{Qn(n.extended_mathml_attributes)&&n.extended_mathml_attributes.includes(y.attrName)&&(y.forceKeepAttr=!0)}),r.sanitize(e,o)},Bh=e=>n=>{const o=ZB(n);if(o==="svg")U5(n);else if(o==="math")Z5(n,e);else throw new Error("Not a namespace element")},W5=(e,n)=>{const o=WB();if(e.sanitize){const r=v4(e,n,o);return{sanitizeHtmlElement:(l,d)=>{r.sanitize(l,y4(e,d)),r.removed=[],o.reset()},sanitizeNamespaceElement:Bh(e)}}else return{sanitizeHtmlElement:(l,d)=>{const g=document.createNodeIterator(l,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let h;for(;h=g.nextNode();){const y=o.track(h);c0(h,e,n,y),ot(h)&&z5(h,e,n,y)}o.reset()},sanitizeNamespaceElement:ct}},C4=Pe.makeMap,S4=Pe.extend,d0=(e,n,o,r)=>{const i=e.name,l=i in o&&i!=="title"&&i!=="textarea"&&i!=="noscript",d=n.childNodes;for(let g=0,h=d.length;g<h;g++){const y=d[g],w=new Sa(y.nodeName.toLowerCase(),y.nodeType);if(ot(y)){const T=y.attributes;for(let _=0,N=T.length;_<N;_++){const P=T[_];w.attr(P.name,P.value)}Yd(w.name)&&(r(y),w.value=y.innerHTML)}else Re(y)?(w.value=y.data,l&&(w.raw=!0)):(mu(y)||rG(y)||gs(y))&&(w.value=y.data);Yd(w.name)||d0(w,y,o,r),e.append(w)}},j5=(e,n,o)=>{const r=[];for(let i=e,l=i;i;l=i,i=i.walk()){const d=i;pe(n,g=>g(d)),hn(d.parent)&&d!==e?i=l:r.push(d)}for(let i=r.length-1;i>=0;i--){const l=r[i];pe(o,d=>d(l))}},G5=(e,n,o,r)=>{const i=o.validate,l=n.getNonEmptyElements(),d=n.getWhitespaceElements(),g=S4(C4("script,style,head,html,body,title,meta,param"),n.getBlockElements()),h=ev(n),y=/[ \t\r\n]+/g,w=/^[ \t\r\n]+/,T=/[ \t\r\n]+$/,_=Q=>{let te=Q.parent;for(;Oe(te);){if(te.name in d)return!0;te=te.parent}return!1},N=Q=>{let te=Q;for(;Oe(te);){if(te.name in h)return Ah(n,l,d,te);te=te.parent}return!1},P=Q=>Q.name in g||nf(n,Q)||Yd(Q.name)&&Q.parent===e,B=(Q,te)=>{const ae=te?Q.prev:Q.next;return Oe(ae)||hn(Q.parent)?!1:P(Q.parent)&&(Q.parent!==e||r.isRootContent===!0)};return[Q=>{var te;if(Q.type===3&&!_(Q)){let ae=(te=Q.value)!==null&&te!==void 0?te:"";ae=ae.replace(y," "),(tF(Q.prev,P)||B(Q,!0))&&(ae=ae.replace(w,"")),ae.length===0||ae===" "&&Q.prev&&Q.prev.type===Mg&&Q.next&&Q.next.type===Mg?Q.remove():Q.value=ae}},Q=>{var te;if(Q.type===1){const ae=n.getElementRule(Q.name);if(i&&ae){const Se=Ah(n,l,d,Q);ae.paddInEmptyBlock&&Se&&N(Q)?yd(o,r,P,Q):ae.removeEmpty&&Se?P(Q)?Q.remove():Q.unwrap():ae.paddEmpty&&(Se||T2(Q))&&yd(o,r,P,Q)}}else if(Q.type===3&&!_(Q)){let ae=(te=Q.value)!==null&&te!==void 0?te:"";(Q.next&&P(Q.next)||B(Q,!1))&&(ae=ae.replace(T,"")),ae.length===0?Q.remove():Q.value=ae}}]},q5=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},Wf=(e={},n=Lr())=>{const o=C5(),r=C5(),i={validate:!0,root_name:"body",sanitize:!0,...e},l=new DOMParser,d=W5(i,n),g=(te,ae,Se="html")=>{const De=Se==="xhtml"?"application/xhtml+xml":"text/html",Ke=xt(n.getSpecialElements(),ae.toLowerCase()),ge=Ke?`<${ae}>${te}</${ae}>`:te,le=()=>Se==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${ge}</body></html>`:/^[\s]*<head/i.test(te)||/^[\s]*<html/i.test(te)||/^[\s]*<!DOCTYPE/i.test(te)?`<html>${ge}</html>`:`<body>${ge}</body>`,Ee=l.parseFromString(le(),De).body;return d.sanitizeHtmlElement(Ee,De),Ke?Ee.firstChild:Ee},h=o.addFilter,y=o.getFilters,w=o.removeFilter,T=r.addFilter,_=r.getFilters,N=r.removeFilter,P=(te,ae)=>{Iw(n,te)&&ae.push(te)},B=(te,ae)=>{const Se=re(ae.attr(xd)),De=ae.type===1&&!xt(te,ae.name)&&!nf(n,ae)&&!Yd(ae.name);return ae.type===3||De&&!Se},F=(te,ae)=>{const Se=S4(C4("script,style,head,html,body,title,meta,param"),n.getBlockElements()),De=/^[ \t\r\n]+/,Ke=/[ \t\r\n]+$/;let ge=te.firstChild,le=null;const Ee=Ge=>{var lt,Gt;Ge&&(ge=Ge.firstChild,ge&&ge.type===3&&(ge.value=(lt=ge.value)===null||lt===void 0?void 0:lt.replace(De,"")),ge=Ge.lastChild,ge&&ge.type===3&&(ge.value=(Gt=ge.value)===null||Gt===void 0?void 0:Gt.replace(Ke,"")))};if(n.isValidChild(te.name,ae.toLowerCase())){for(;ge;){const Ge=ge.next;B(Se,ge)?(le||(le=new Sa(ae,1),le.attr(i.forced_root_block_attrs),te.insert(le,ge)),le.append(ge)):(Ee(le),le=null),ge=Ge}Ee(le)}},Q={schema:n,addAttributeFilter:T,getAttributeFilters:_,removeAttributeFilter:N,addNodeFilter:h,getNodeFilters:y,removeNodeFilter:w,parse:(te,ae={})=>{var Se;const De=i.validate,Ke=(Se=ae.context)!==null&&Se!==void 0?Se:i.root_name,ge=g(te,Ke,ae.format);gu(n,ge);const le=new Sa(Ke,11);d0(le,ge,n.getSpecialElements(),d.sanitizeNamespaceElement),ge.innerHTML="";const[Ee,Ge]=G5(le,n,i,ae),lt=[],Gt=De?Oo=>P(Oo,lt):ct,Kt={nodes:{},attributes:{}},_n=Oo=>LO(y(),_(),Oo,Kt);if(j5(le,[Ee,_n],[Ge,Gt]),lt.reverse(),De&&lt.length>0)if(ae.context){const{pass:Oo,fail:Bs}=ma(lt,js=>js.parent===le);Lw(Bs,n,le,_n),ae.invalid=Oo.length>0}else Lw(lt,n,le,_n);const In=q5(i,ae);return In&&(le.name==="body"||ae.isRootContent)&&F(le,In),ae.invalid||_h(Kt,ae),le}};return s$(Q,i),XF(Q,i,n),Q},wd=e=>O2(e)?vd({validate:!1}).serialize(e):e,Ed=(e,n,o)=>{const r=wd(e),i=n(r);if(i.isDefaultPrevented())return i;if(O2(e))if(i.content!==r){const l=Wf({validate:!1,forced_root_block:!1,...o}).parse(i.content,{context:e.name});return{...i,content:l}}else return{...i,content:e};else return i},mc=e=>({sanitize:C1(e),sandbox_iframes:bx(e),sandbox_iframes_exclusions:Bv(e)}),K5=(e,n)=>{if(n.no_events)return Ks.value(n);{const o=Dl(e,n);return o.isDefaultPrevented()?Ks.error(lx(e,{content:"",...o}).content):Ks.value(o)}},Y5=(e,n,o)=>o.no_events?n:Ed(n,i=>lx(e,{...o,content:i}),mc(e)).content,x4=(e,n)=>{if(n.no_events)return Ks.value(n);{const o=Ed(n.content,r=>ch(e,{...n,content:r}),mc(e));return o.isDefaultPrevented()?(ro(e,o),Ks.error(void 0)):Ks.value(o)}},w4=(e,n,o)=>{o.no_events||ro(e,{...o,content:n})},E4=(e,n,o)=>({element:e,width:n,rows:o}),X5=(e,n)=>({element:e,cells:n}),S$=(e,n)=>({x:e,y:n}),J5=(e,n)=>Xr(e,n).bind(Zi).getOr(1),x$=(e,n,o,r,i)=>{const l=J5(i,"rowspan"),d=J5(i,"colspan"),g=e.rows;for(let h=o;h<o+l;h++){g[h]||(g[h]=X5(G(r),[]));for(let y=n;y<n+d;y++){const w=g[h].cells;w[y]=h===o&&y===n?i:H(i)}}},w$=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},E$=(e,n,o)=>{for(;w$(e,n,o);)n++;return n},Q5=e=>Ss(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),W2=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const i=o[r].cells;for(let l=0;l<i.length;l++)if(sn(i[l],n))return O.some(S$(l,r))}return O.none()},j2=(e,n,o,r,i)=>{const l=[],d=e.rows;for(let g=o;g<=i;g++){const h=d[g].cells,y=n<r?h.slice(n,r+1):h.slice(r,n+1);l.push(X5(d[g].element,y))}return l},eD=(e,n,o)=>{const r=n.x,i=n.y,l=o.x,d=o.y,g=i<d?j2(e,r,i,l,d):j2(e,r,d,l,i);return E4(e.element,Q5(g),g)},k$=(e,n)=>{const o=H(e.element),r=U.fromTag("tbody");return iu(r,n),rs(o,r),o},T$=e=>At(e.rows,n=>{const o=At(n.cells,i=>{const l=G(i);return _s(l,"colspan"),_s(l,"rowspan"),l}),r=H(n.element);return iu(r,o),r}),tD=e=>{const n=E4(H(e),0,[]);return pe(go(e,"tr"),(o,r)=>{pe(go(o,"td,th"),(i,l)=>{x$(n,E$(n,l,r),r,o,i)})}),E4(n.element,Q5(n.rows),n.rows)},nD=e=>k$(e,T$(e)),k4=(e,n,o)=>W2(e,n).bind(r=>W2(e,o).map(i=>eD(e,r,i))),oD=e=>ko(e,n=>En(n)==="ul"||En(n)==="ol"),sD=(e,n)=>ko(e,o=>En(o)==="li"&&Ix(o,n)).fold(qe([]),o=>oD(e).map(r=>{const i=U.fromTag(En(r)),l=Wr(sS(r),(d,g)=>es(g,"list-style"));return Mb(i,l),[U.fromTag("li"),i]}).getOr([])),T4=(e,n)=>{const o=Ss(n,(r,i)=>(rs(i,r),i),e);return n.length>0?lS([o]):o},_$=e=>sd(e)?Lc(e).filter(th).fold(qe([]),n=>[e,n]):th(e)?[e]:[],A$=(e,n,o)=>{const r=U.fromDom(n.commonAncestorContainer),i=wu(r,e),l=et(i,h=>o.isWrapper(En(h))),d=sD(i,n),g=l.concat(d.length?d:_$(r));return At(g,H)},Bl=()=>lS([]),rl=(e,n,o)=>T4(U.fromDom(n.cloneContents()),A$(e,n,o)),G2=(e,n)=>zp(n,"table",Qe(sn,e)),rD=(e,n)=>G2(e,n[0]).bind(o=>{const r=n[0],i=n[n.length-1],l=tD(o);return k4(l,r,i).map(d=>lS([nD(d)]))}).getOrThunk(Bl),q2=(e,n,o)=>n.length>0&&n[0].collapsed?Bl():rl(e,n[0],o),aD=(e,n,o)=>{const r=tA(n,e);return r.length>0?rD(e,r):q2(e,n,o)},m0=(e,n)=>n>=0&&n<e.length&&Sf(e.charAt(n)),_4=e=>Qa(e.innerText),iD=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),cD=e=>O.from(e.selection.getRng()).map(n=>{var o;const r=O.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),i=e.getBody(),l=iD(r),d=U.fromDom(n.cloneContents());HA(d),dw(d);const g=e.dom.add(i,l,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},d.dom),h=_4(g),y=Qa((o=g.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(g),m0(y,0)||m0(y,y.length-1)){const w=r.getOr(i),T=_4(w),_=T.indexOf(h);if(_===-1)return h;{const N=m0(T,_-1),P=m0(T,_+h.length);return(N?" ":"")+h+(P?" ":"")}}else return h}).getOr(""),lD=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),i=e.selection.getSel(),l=uc(e,Wv(i)),d=n.contextual?aD(U.fromDom(e.getBody()),l,e.schema).dom:o.cloneContents();return d&&r.appendChild(d),e.selection.serializer.serialize(r,n)},K2=(e,n)=>{if(n.format==="text")return cD(e);{const o=lD(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},A4=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),O$=(e,n,o={})=>{const r=A4(o,n);return K5(e,r).fold(ds,i=>{const l=K2(e,i);return Y5(e,l,i)})},O4=0,uD=1,dD=2,mD=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),i=new Array(o),l=(w,T,_)=>({start:w,end:T,diag:_}),d=(w,T,_,N,P)=>{const B=h(w,T,_,N);if(B===null||B.start===T&&B.diag===T-N||B.end===w&&B.diag===w-_){let F=w,W=_;for(;F<T||W<N;)F<T&&W<N&&e[F]===n[W]?(P.push([O4,e[F]]),++F,++W):T-w>N-_?(P.push([dD,e[F]]),++F):(P.push([uD,n[W]]),++W)}else{d(w,B.start,_,B.start-B.diag,P);for(let F=B.start;F<B.end;++F)P.push([O4,e[F]]);d(B.end,T,B.end-B.diag,N,P)}},g=(w,T,_,N)=>{let P=w;for(;P-T<N&&P<_&&e[P]===n[P-T];)++P;return l(w,P,T)},h=(w,T,_,N)=>{const P=T-w,B=N-_;if(P===0||B===0)return null;const F=P-B,W=B+P,Q=(W%2===0?W:W+1)/2;r[1+Q]=w,i[1+Q]=T+1;let te,ae,Se,De,Ke;for(te=0;te<=Q;++te){for(ae=-te;ae<=te;ae+=2){for(Se=ae+Q,ae===-te||ae!==te&&r[Se-1]<r[Se+1]?r[Se]=r[Se+1]:r[Se]=r[Se-1]+1,De=r[Se],Ke=De-w+_-ae;De<T&&Ke<N&&e[De]===n[Ke];)r[Se]=++De,++Ke;if(F%2!==0&&F-te<=ae&&ae<=F+te&&i[Se-F]<=r[Se])return g(i[Se-F],ae+w-_,T,N)}for(ae=F-te;ae<=F+te;ae+=2){for(Se=ae+Q-F,ae===F-te||ae!==F+te&&i[Se+1]<=i[Se-1]?i[Se]=i[Se+1]-1:i[Se]=i[Se-1],De=i[Se]-1,Ke=De-w+_-ae;De>=w&&Ke>=_&&e[De]===n[Ke];)i[Se]=De--,Ke--;if(F%2===0&&-te<=ae&&ae<=te&&i[Se]<=r[Se+F])return g(i[Se],ae+w-_,T,N)}}return null},y=[];return d(0,e.length,0,n.length,y),y},fD=e=>ot(e)?e.outerHTML:Re(e)?so.encodeRaw(e.data,!1):mu(e)?"<!--"+e.data+"-->":"",D$=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},D4=(e,n,o)=>{const r=D$(n);if(e.hasChildNodes()&&o<e.childNodes.length){const i=e.childNodes[o];e.insertBefore(r,i)}else e.appendChild(r)},M$=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},N$=(e,n)=>{let o=0;pe(e,r=>{r[0]===O4?o++:r[0]===uD?(D4(n,r[1],o),o++):r[0]===dD&&M$(n,o)})},R$=(e,n)=>et(At(xs(e.childNodes),S(Qa,fD)),o=>o.length>0),B$=(e,n)=>{const o=At(xs(n.childNodes),fD);return N$(mD(o,e),n),n},P$=io(()=>document.implementation.createHTMLDocument("undo")),L$=e=>e.querySelector("iframe")!==null,I$=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),Y2=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Ph=e=>{const n=e.serializer.getTempAttrs(),o=XL(e.getBody(),n);return L$(o)?I$(R$(o)):Y2(Qa(o.innerHTML))},M4=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?B$(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Oe(r)&&K_(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},N4=e=>e.type==="fragmented"?e.fragments.join(""):e.content,gD=e=>{const n=U.fromTag("body",P$());return on(n,N4(e)),pe(go(n,"*[data-mce-bogus]"),E),vt(n)},F$=(e,n)=>N4(e)===N4(n),hD=(e,n)=>gD(e)===gD(n),R4=(e,n)=>!e||!n?!1:F$(e,n)?!0:hD(e,n),B4=e=>e.get()===0,Lh=(e,n,o)=>{B4(o)&&(e.typing=n)},pD=(e,n)=>{e.typing&&(Lh(e,!1,n),e.add())},$$=e=>{e.typing&&(e.typing=!1,e.add())},H$=(e,n,o)=>{B4(n)&&o.set(im(e.selection))},V$=(e,n,o,r,i,l,d)=>{const g=Ph(e),h=Pe.extend(l||{},g);if(!B4(r)||e.removed)return null;const y=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:h,lastLevel:y,originalEvent:d}).isDefaultPrevented()||y&&R4(y,h))return null;n.data[o.get()]&&i.get().each(_=>{n.data[o.get()].beforeBookmark=_});const w=d_(e);if(w&&n.data.length>w){for(let _=0;_<n.data.length-1;_++)n.data[_]=n.data[_+1];n.data.length--,o.set(n.data.length)}h.bookmark=im(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(h),o.set(n.data.length-1);const T={level:h,lastLevel:y,originalEvent:d};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",T),e.dispatch("change",T)):e.dispatch("AddUndo",T),h},z$=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},U$=(e,n,o,r,i)=>{if(n.transact(r)){const l=n.data[o.get()].bookmark,d=n.data[o.get()-1];M4(e,d,!0),n.transact(i)&&(n.data[o.get()-1].beforeBookmark=l)}},Z$=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],M4(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},X2=(e,n,o,r)=>{let i;return n.typing&&(n.add(),n.typing=!1,Lh(n,!1,o)),r.get()>0&&(r.set(r.get()-1),i=n.data[r.get()],M4(e,i,!0),e.setDirty(!0),e.dispatch("Undo",{level:i})),i},J2=e=>{e.clear(),e.add()},W$=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!R4(Ph(e),n.data[0]),j$=(e,n)=>n.get()<e.data.length-1&&!e.typing,Q2=(e,n,o)=>(pD(e,n),e.beforeChange(),e.ignore(o),e.add()),G$=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},q$=(e,n)=>{const o=e.dom,r=Oe(n)?n:e.getBody();pe(o.select("table,a",r),i=>{switch(i.nodeName){case"TABLE":const l=c7(e),d=o.getAttrib(i,"border");(!d||d==="0")&&e.hasVisual?o.addClass(i,l):o.removeClass(i,l);break;case"A":if(!o.getAttrib(i,"href")){const g=o.getAttrib(i,"name")||i.id,h=h_(e);g&&e.hasVisual?o.addClass(i,h):o.removeClass(i,h)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},bD=e=>({init:{bindEvents:ct},undoManager:{beforeChange:(n,o)=>H$(e,n,o),add:(n,o,r,i,l,d)=>V$(e,n,o,r,i,l,d),undo:(n,o,r)=>X2(e,n,o,r),redo:(n,o)=>Z$(e,n,o),clear:(n,o)=>z$(e,n,o),reset:n=>J2(n),hasUndo:(n,o)=>W$(e,n,o),hasRedo:(n,o)=>j$(n,o),transact:(n,o,r)=>Q2(n,o,r),ignore:(n,o)=>G$(n,o),extra:(n,o,r,i)=>U$(e,n,o,r,i)},formatter:{match:(n,o,r,i)=>Uw(e,n,o,r,i),matchAll:(n,o)=>ZG(e,n,o),matchNode:(n,o,r,i)=>Cd(e,n,o,r,i),canApply:n=>TF(e,n),closest:n=>kF(e,n),apply:(n,o,r)=>_u(e,n,o,r),remove:(n,o,r,i)=>l5(e,n,o,r,i),toggle:(n,o,r)=>KF(e,n,o,r),formatChanged:(n,o,r,i,l)=>qF(e,n,o,r,i,l)},editor:{getContent:n=>wG(e,n),setContent:(n,o)=>Y1(e,n,o),insertContent:(n,o)=>ZO(e,n,o),addVisual:n=>q$(e,n)},selection:{getContent:(n,o)=>O$(e,n,o)},autocompleter:{addDecoration:ct,removeDecoration:ct},raw:{getModel:()=>O.none()}}),K$=e=>{const n=y=>Pt(y)?y:{},{init:o,undoManager:r,formatter:i,editor:l,selection:d,autocompleter:g,raw:h}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(y,w,T)=>r.transact(T),ignore:(y,w)=>r.ignore(w),extra:(y,w,T,_)=>r.extra(T,_)},formatter:{match:(y,w,T,_)=>i.match(y,n(w),_),matchAll:i.matchAll,matchNode:i.matchNode,canApply:y=>i.canApply(y),closest:y=>i.closest(y),apply:(y,w,T)=>i.apply(y,n(w)),remove:(y,w,T,_)=>i.remove(y,n(w)),toggle:(y,w,T)=>i.toggle(y,n(w)),formatChanged:(y,w,T,_,N)=>i.formatChanged(w,T,_,N)},editor:{getContent:y=>l.getContent(y),setContent:(y,w)=>({content:l.setContent(y,w),html:""}),insertContent:(y,w)=>(l.insertContent(y),""),addVisual:l.addVisual},selection:{getContent:(y,w)=>d.getContent(w)},autocompleter:{addDecoration:g.addDecoration,removeDecoration:g.removeDecoration},raw:{getModel:()=>O.some(h.getRawModel())}}},Y$=()=>{const e=qe(null),n=qe("");return{init:{bindEvents:ct},undoManager:{beforeChange:ct,add:e,undo:e,redo:e,clear:ct,reset:ct,hasUndo:ke,hasRedo:ke,transact:e,ignore:ct,extra:ct},formatter:{match:ke,matchAll:qe([]),matchNode:qe(void 0),canApply:ke,closest:n,apply:ct,remove:ct,toggle:ct,formatChanged:qe({unbind:ct})},editor:{getContent:n,setContent:qe({content:"",html:""}),insertContent:qe(""),addVisual:ct},selection:{getContent:n},autocompleter:{addDecoration:ct,removeDecoration:ct},raw:{getModel:qe(O.none())}}},Du=e=>xt(e.plugins,"rtc"),X$=e=>oo(e.plugins,"rtc").bind(n=>O.from(n.setup)),J$=e=>{const n=e;return X$(e).fold(()=>(n.rtcInstance=bD(e),O.none()),o=>(n.rtcInstance=Y$(),O.some(()=>o().then(r=>(n.rtcInstance=K$(r),r.rtc.isRemote)))))},P4=e=>e.rtcInstance?e.rtcInstance:bD(e),Ws=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},Q$=(e,n,o)=>{Ws(e).undoManager.beforeChange(n,o)},YG=(e,n,o,r,i,l,d)=>Ws(e).undoManager.add(n,o,r,i,l,d),al=(e,n,o,r)=>Ws(e).undoManager.undo(n,o,r),vD=(e,n,o)=>Ws(e).undoManager.redo(n,o),eH=(e,n,o)=>{Ws(e).undoManager.clear(n,o)},yD=(e,n)=>{Ws(e).undoManager.reset(n)},tH=(e,n,o)=>Ws(e).undoManager.hasUndo(n,o),nH=(e,n,o)=>Ws(e).undoManager.hasRedo(n,o),XG=(e,n,o,r)=>Ws(e).undoManager.transact(n,o,r),Vr=(e,n,o)=>{Ws(e).undoManager.ignore(n,o)},oH=(e,n,o,r,i)=>{Ws(e).undoManager.extra(n,o,r,i)},sH=(e,n,o,r,i)=>Ws(e).formatter.match(n,o,r,i),rH=(e,n,o)=>Ws(e).formatter.matchAll(n,o),aH=(e,n,o,r,i)=>Ws(e).formatter.matchNode(n,o,r,i),iH=(e,n)=>Ws(e).formatter.canApply(n),ey=(e,n)=>Ws(e).formatter.closest(n),cH=(e,n,o,r)=>{Ws(e).formatter.apply(n,o,r)},L4=(e,n,o,r,i)=>{Ws(e).formatter.remove(n,o,r,i)},CD=(e,n,o,r)=>{Ws(e).formatter.toggle(n,o,r)},ty=(e,n,o,r,i,l)=>Ws(e).formatter.formatChanged(n,o,r,i,l),lH=(e,n)=>P4(e).editor.getContent(n),uH=(e,n,o)=>P4(e).editor.setContent(n,o),dH=(e,n,o)=>P4(e).editor.insertContent(n,o),mH=(e,n,o)=>Ws(e).selection.getContent(n,o),fH=(e,n)=>Ws(e).editor.addVisual(n),I4=e=>Ws(e).init.bindEvents(),gH=(e,n={})=>{const o=n.format?n.format:"html";return mH(e,o,n)},F4=e=>e.dom.length===0?(v(e),O.none()):O.some(e),SD=(e,n)=>e.filter(o=>N1.isBookmarkNode(o.dom)).bind(n?su:ou),hH=(e,n,o,r,i)=>{const l=e.dom,d=n.dom,g=r?l.length:d.length;r?(kw(l,d,i,!1,!r),o.setStart(d,g)):(kw(d,l,i,!1,!r),o.setEnd(d,g))},pH=(e,n,o)=>{Lc(e).each(r=>{const i=e.dom;n&&H1(r,be(i,0),o)?p2(i,0,o):!n&&V1(r,be(i,i.length),o)&&Ew(i,i.length,o)})},xD=(e,n,o,r,i)=>{e.bind(l=>((r?Ew:p2)(l.dom,r?l.dom.length:0,i),n.filter(Kr).map(g=>hH(l,g,o,r,i)))).orThunk(()=>SD(n,r).or(n).filter(Kr).map(d=>pH(d,r,i)))},bH=(e,n,o)=>{const r=O.from(n.firstChild).map(U.fromDom),i=O.from(n.lastChild).map(U.fromDom);e.deleteContents(),e.insertNode(n);const l=r.bind(ou).filter(Kr).bind(F4),d=i.bind(su).filter(Kr).bind(F4);xD(l,r,e,!0,o),xD(d,i,e,!1,o),e.collapse(!1)},vH=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),ny=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),i=r?{context:r.nodeName.toLowerCase()}:{},l=e.parser.parse(n.content,{forced_root_block:!1,...i,...n});return vd({validate:!1},e.schema).serialize(l)}else return n.content},wD=(e,n,o={})=>{const r=vH(o,n);x4(e,r).each(i=>{const l=ny(e,i),d=e.selection.getRng();bH(d,d.createContextualFragment(l),e.schema),e.selection.setRng(d),Af(e,d),w4(e,l,i)})},$4=(e,n,o)=>{if(xt(e,n)){const r=et(e[n],i=>i!==o);r.length===0?delete e[n]:e[n]=r}};var yH=(e,n)=>{let o,r;const i=(g,h)=>ko(h,y=>e.is(y,g)),l=g=>e.getParents(g,void 0,e.getRoot()),d=()=>{o={},r={},n.on("NodeChange",g=>{const h=g.element,y=l(h),w={};Ze(o,(T,_)=>{i(_,y).each(N=>{r[_]||(pe(T,P=>{P(!0,{node:N,selector:_,parents:y})}),r[_]=T),w[_]=T})}),Ze(r,(T,_)=>{w[_]||(delete r[_],pe(T,N=>{N(!1,{node:h,selector:_,parents:y})}))})})};return{selectorChangedWithUnbind:(g,h)=>(o||d(),o[g]||(o[g]=[]),o[g].push(h),i(g,l(n.selection.getStart())).each(()=>{r[g]=o[g]}),{unbind:()=>{$4(o,g,h),$4(r,g,h)}})}};const H4=e=>!!(e&&e.ownerDocument)&&Ki(U.fromDom(e.ownerDocument),U.fromDom(e)),CH=e=>e?H4(e.startContainer)&&H4(e.endContainer):!1,ED=(e,n,o,r)=>{let i,l;const{selectorChangedWithUnbind:d}=yH(e,r),g=($e,it)=>{const xn=e.createRng();Oe($e)&&Oe(it)?(xn.setStart($e,it),xn.setEnd($e,it),ae(xn),W(!1)):(Fx(e,xn,r.getBody(),!0),ae(xn))},h=$e=>gH(r,$e),y=($e,it)=>wD(r,$e,it),w=$e=>MA(r.getBody(),te(),$e),T=$e=>NA(r.getBody(),te(),$e),_=($e,it)=>Bs.getBookmark($e,it),N=$e=>Bs.moveToBookmark($e),P=($e,it)=>(SG(e,$e,it).each(ae),$e),B=()=>{const $e=te(),it=Q();return!$e||$e.item?!1:$e.compareEndPoints?$e.compareEndPoints("StartToEnd",$e)===0:!it||$e.collapsed},F=()=>{if(r.mode.isReadOnly())return!1;const $e=te(),it=r.getBody().querySelectorAll('[data-mce-selected="1"]');return it.length>0?nn(it,xn=>e.isEditable(xn.parentElement)):DA(e,$e)},W=$e=>{const it=te();it.collapse(!!$e),ae(it)},Q=()=>n.getSelection?n.getSelection():n.document.selection,te=()=>{let $e;const it=(An,ye,Me)=>{try{return ye.compareBoundaryPoints(An,Me)}catch{return-1}},xn=n.document;if(Oe(r.bookmark)&&!kf(r)){const An=Xx(r);if(An.isSome())return An.map(ye=>uc(r,[ye])[0]).getOr(xn.createRange())}try{const An=Q();An&&!jg(An.anchorNode)&&(An.rangeCount>0?$e=An.getRangeAt(0):$e=xn.createRange(),$e=uc(r,[$e])[0])}catch{}if($e||($e=xn.createRange()),Gp($e.startContainer)&&$e.collapsed){const An=e.getRoot();$e.setStart(An,0),$e.setEnd(An,0)}return i&&l&&(it($e.START_TO_START,$e,i)===0&&it($e.END_TO_END,$e,i)===0?$e=l:(i=null,l=null)),$e},ae=($e,it)=>{if(!CH($e))return;const xn=Q();if($e=r.dispatch("SetSelectionRange",{range:$e,forward:it}).range,xn){l=$e;try{xn.removeAllRanges(),xn.addRange($e)}catch{}it===!1&&xn.extend&&(xn.collapse($e.endContainer,$e.endOffset),xn.extend($e.startContainer,$e.startOffset)),i=xn.rangeCount>0?xn.getRangeAt(0):null}if(!$e.collapsed&&$e.startContainer===$e.endContainer&&(xn!=null&&xn.setBaseAndExtent)&&$e.endOffset-$e.startOffset<2&&$e.startContainer.hasChildNodes()){const ye=$e.startContainer.childNodes[$e.startOffset];ye&&ye.nodeName==="IMG"&&(xn.setBaseAndExtent($e.startContainer,$e.startOffset,$e.endContainer,$e.endOffset),(xn.anchorNode!==$e.startContainer||xn.focusNode!==$e.endContainer)&&xn.setBaseAndExtent(ye,0,ye,1))}r.dispatch("AfterSetSelectionRange",{range:$e,forward:it})},Se=$e=>(y(e.getOuterHTML($e)),$e),De=()=>Di(r.getBody(),te()),Ke=($e,it)=>na(e,te(),$e,it),ge=()=>{const $e=Q(),it=$e==null?void 0:$e.anchorNode,xn=$e==null?void 0:$e.focusNode;if(!$e||!it||!xn||jg(it)||jg(xn))return!0;const An=e.createRng(),ye=e.createRng();try{An.setStart(it,$e.anchorOffset),An.collapse(!0),ye.setStart(xn,$e.focusOffset),ye.collapse(!0)}catch{return!0}return An.compareBoundaryPoints(An.START_TO_START,ye)<=0},Oo={dom:e,win:n,serializer:o,editor:r,expand:($e={type:"word"})=>ae(Oi(e).expand(te(),$e)),collapse:W,setCursorLocation:g,getContent:h,setContent:y,getBookmark:_,moveToBookmark:N,select:P,isCollapsed:B,isEditable:F,isForward:ge,setNode:Se,getNode:De,getSel:Q,setRng:ae,getRng:te,getStart:w,getEnd:T,getSelectedBlocks:Ke,normalize:()=>{const $e=te(),it=Q();if(!Lx(it)&&Gv(r)){const xn=i2(e,$e);return xn.each(An=>{ae(An,ge())}),xn.getOr($e)}return $e},selectorChanged:($e,it)=>(d($e,it),Oo),selectorChangedWithUnbind:d,getScrollContainer:()=>{let $e,it=e.getRoot();for(;it&&it.nodeName!=="BODY";){if(it.scrollHeight>it.clientHeight){$e=it;break}it=it.parentNode}return $e},scrollIntoView:($e,it)=>{Oe($e)?jL(r,$e,it):Af(r,te(),it)},placeCaretAt:($e,it)=>ae(po($e,it,r.getDoc())),getBoundingClientRect:()=>{const $e=te();return $e.collapsed?be.fromRangeStart($e).getClientRects()[0]:$e.getBoundingClientRect()},destroy:()=>{n=i=l=null,js.destroy()}},Bs=N1(Oo),js=SA(Oo,r);return Oo.bookmarkManager=Bs,Oo.controlSelection=js,Oo},SH=(e,n,o)=>{n.addNodeFilter("br",(r,i,l)=>{const d=Pe.extend({},o.getBlockElements()),g=o.getNonEmptyElements(),h=o.getWhitespaceElements();d.body=1;const y=w=>w.name in d||nf(o,w);for(let w=0,T=r.length;w<T;w++){let _=r[w],N=_.parent;if(N&&y(N)&&_===N.lastChild){let P=_.prev;for(;P;){const B=P.name;if(B!=="span"||P.attr("data-mce-type")!=="bookmark"){B==="br"&&(_=null);break}P=P.prev}if(_&&(_.remove(),Ah(o,g,h,N))){const B=o.getElementRule(N.name);B&&(B.removeEmpty?N.remove():B.paddEmpty&&yd(e,l,y,N))}}else{let P=_;for(;N&&N.firstChild===P&&N.lastChild===P&&(P=N,!d[N.name]);)N=N.parent;if(P===N){const B=new Sa("#text",3);B.value=to,_.replace(B)}}}})},V4=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,i)=>{let l=r.length;for(;l--;){const d=r[l];d.attr("tabindex",d.attr("data-mce-tabindex")),d.attr(i,null)}}),e.addAttributeFilter("src,href,style",(r,i)=>{const l="data-mce-"+i,d=n.url_converter,g=n.url_converter_scope;let h=r.length;for(;h--;){const y=r[h];let w=y.attr(l);w!==void 0?(y.attr(i,w.length>0?w:null),y.attr(l,null)):(w=y.attr(i),i==="style"?w=o.serializeStyle(o.parseStyle(w),y.name):d&&(w=d.call(g,w,i,y.name)),y.attr(i,w.length>0?w:null))}}),e.addAttributeFilter("class",r=>{let i=r.length;for(;i--;){const l=r[i];let d=l.attr("class");d&&(d=d.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),l.attr("class",d.length>0?d:null))}}),e.addAttributeFilter("data-mce-type",(r,i,l)=>{let d=r.length;for(;d--;){const g=r[d];g.attr("data-mce-type")==="bookmark"&&!l.cleanup&&(O.from(g.firstChild).exists(y=>{var w;return!lv((w=y.value)!==null&&w!==void 0?w:"")})?g.unwrap():g.remove())}}),e.addNodeFilter("script,style",(r,i)=>{var l;const d=h=>h.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=r.length;for(;g--;){const h=r[g],y=h.firstChild,w=(l=y==null?void 0:y.value)!==null&&l!==void 0?l:"";if(i==="script"){const T=h.attr("type");T&&h.attr("type",T==="mce-no/type"?null:T.replace(/^mce\-/,"")),n.element_format==="xhtml"&&y&&w.length>0&&(y.value=`// <![CDATA[
`+d(w)+`
// ]]>`)}else n.element_format==="xhtml"&&y&&w.length>0&&(y.value=`<!--
`+d(w)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let i=r.length;for(;i--;){const l=r[i],d=l.value;n.preserve_cdata&&(d==null?void 0:d.indexOf("[CDATA["))===0?(l.name="#cdata",l.type=4,l.value=o.decode(d.replace(/^\[CDATA\[|\]\]$/g,""))):(d==null?void 0:d.indexOf("mce:protected "))===0&&(l.name="#text",l.type=3,l.raw=!0,l.value=unescape(d).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,i)=>{let l=r.length;for(;l--;){const d=r[l];d.type===7?d.remove():d.type===1&&i==="input"&&!d.attr("type")&&d.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{pe(r,i=>{i.attr("data-mce-type")==="format-caret"&&(i.isEmpty(e.schema.getNonEmptyElements())?i.remove():i.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,i)=>{let l=r.length;for(;l--;)r[l].attr(i,null)}),n.remove_trailing_brs&&SH(n,e,e.schema)},z4=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},xH=(e,n,o)=>{let r;const i=e.dom;let l=n.cloneNode(!0);const d=document.implementation;if(d.createHTMLDocument){const g=d.createHTMLDocument("");Pe.each(l.nodeName==="BODY"?l.childNodes:[l],h=>{g.body.appendChild(g.importNode(h,!0))}),l.nodeName!=="BODY"?l=g.body.firstChild:l=g.body,r=i.doc,i.doc=g}return XT(e,{...o,node:l}),r&&(i.doc=r),l},U4=(e,n)=>Oe(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,wH=(e,n,o)=>U4(e,o)?xH(e,n,o):n,EH=(e,n,o)=>{Pe.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,i)=>{let l=r.length;for(;l--;)r[l].attr(i,null)}),n.push(o))},kH=(e,n,o)=>!n.no_events&&e?ho(e,{...n,content:o}).content:o,TH=(e,n,o)=>{const r=Qa(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||nh(U.fromDom(n))?r:Pe.trim(r)},_H=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,i=e.parse(n,r);return z4(i),i},AH=(e,n,o)=>vd(e,n).serialize(o),kD=(e,n,o,r,i)=>{const l=AH(n,o,r);return kH(e,i,l)},OH=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},i=n&&n.dom?n.dom:Ln.DOM,l=n&&n.schema?n.schema:Lr(r),d=Wf(r,l);V4(d,r,i);const g=(h,y={})=>{const w={format:"html",...y},T=wH(n,h,w),_=TH(i,T,w),N=_H(d,_,w);return w.format==="tree"?N:kD(n,r,l,N,w)};return{schema:l,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,serialize:g,addRules:l.addValidElements,setRules:l.setValidElements,addTempAttr:Qe(EH,d,o),getTempAttrs:qe(o),getNodeFilters:d.getNodeFilters,getAttributeFilters:d.getAttributeFilters,removeNodeFilter:d.removeNodeFilter,removeAttributeFilter:d.removeAttributeFilter}},TD=(e,n)=>{const o=OH(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},DH="html",MH=(e,n)=>({...e,format:n,get:!0,getInner:!0}),NH=(e,n={})=>{const o=n.format?n.format:DH,r=MH(n,o);return K5(e,r).fold(ds,i=>{const l=lH(e,i);return Y5(e,l,i)})},RH="html",BH=(e,n)=>({format:RH,...e,set:!0,content:n}),vm=(e,n,o={})=>{const r=BH(o,n);return x4(e,r).map(i=>{const l=uH(e,i.content,i);return w4(e,l.html,i),l.content}).getOr(n)},oy="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),_D=[],AD="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),OD=[{name:"export",replacedWith:"Export to PDF"}],DD=(e,n)=>{const o=et(n,r=>xt(e,r));return Gn(o)},Z4=e=>{const n=DD(e,oy),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Gn(n)},PH=e=>DD(e,_D),MD=(e,n)=>{const o=Pe.makeMap(e.plugins," "),i=et(n,l=>xt(o,l));return Gn(i)},LH=e=>MD(e,AD),IH=e=>MD(e,OD.map(n=>n.name)),FH=(e,n)=>{const o=Z4(e),r=LH(n),i=r.length>0,l=o.length>0,d=n.theme==="mobile";if(i||l||d){const g=`
- `,h=d?`

Themes:${g}mobile`:"",y=i?`

Plugins:${g}${r.join(g)}`:"",w=l?`

Options:${g}${o.join(g)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+h+y+w)}},sy=e=>ko(OD,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),f0=(e,n)=>{const o=PH(e),r=IH(n),i=r.length>0,l=o.length>0;if(i||l){const d=`
- `,g=i?`

Plugins:${d}${r.map(sy).join(d)}`:"",h=l?`

Options:${d}${o.join(d)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+g+h)}},$H=(e,n)=>{FH(e,n),f0(e,n)},kd=Ln.DOM,fc=e=>{kd.setStyle(e.id,"display",e.orgDisplay)},ym=e=>O.from(e).each(n=>n.destroy()),zn=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},g0=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),kd.unbind(n,"submit reset",e.formEventDelegate))},ND=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),i=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Oe(i==null?void 0:i.nextSibling)&&kd.remove(i.nextSibling),JT(e),e.editorManager.remove(e),!e.inline&&r&&fc(e),MP(e),kd.remove(e.getContainer()),ym(n),ym(o),e.destroy()}},RD=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),ym(o),ym(r)),g0(e),zn(e),e.destroyed=!0}},Ih=(()=>{const e={};return{add:(i,l)=>{e[i]=l},get:i=>e[i]?e[i]:{icons:{}},has:i=>xt(e,i)}})(),Cm=Vs.ModelManager,ry=(e,n)=>n.dom[e],ay=(e,n)=>parseInt(As(n,e),10),iy=Qe(ry,"clientWidth"),j4=Qe(ry,"clientHeight"),BD=Qe(ay,"margin-top"),PD=Qe(ay,"margin-left"),LD=e=>e.dom.getBoundingClientRect(),ID=(e,n,o)=>{const r=iy(e),i=j4(e);return n>=0&&o>=0&&n<=r&&o<=i},FD=(e,n,o,r)=>{const i=LD(n),l=e?i.left+n.dom.clientLeft+PD(n):0,d=e?i.top+n.dom.clientTop+BD(n):0,g=o-l,h=r-d;return{x:g,y:h}},Fh=(e,n,o)=>{const r=U.fromDom(e.getBody()),i=e.inline?r:Pg(r),l=FD(e.inline,i,n,o);return ID(i,l.x,l.y)},$D=e=>O.from(e).map(U.fromDom),G4=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return $D(n).map(xr).getOr(!1)};var HH=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const HD=e=>{const n=[],o=()=>{const _=e.theme;return _&&_.getNotificationManagerImpl?_.getNotificationManagerImpl():HH()},r=()=>O.from(n[0]),i=(_,N)=>_.type===N.type&&_.text===N.text&&!_.progressBar&&!_.timeout&&!N.progressBar&&!N.timeout,l=()=>{r().each(_=>{_.reposition()})},d=_=>{n.push(_)},g=_=>{Ps(n,N=>N===_).each(N=>{n.splice(N,1)})},h=(_,N=!0)=>e.removed||!G4(e)?{}:(N&&e.dispatch("BeforeOpenNotification",{notification:_}),ko(n,P=>i(o().getArgs(P),_)).getOrThunk(()=>{e.editorManager.setActive(e);const P=o().open(_,()=>{g(P)},()=>o2(e));return d(P),l(),e.dispatch("OpenNotification",{notification:{...P}}),P})),y=()=>{r().each(_=>{o().close(_),g(_),l()})},w=qe(n);return(_=>{_.on("SkinLoaded",()=>{const N=mx(_);N&&h({text:N,type:"warning",timeout:0},!1),l()}),_.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(l)}),_.on("remove",()=>{pe(n.slice(),N=>{o().close(N)})}),_.on("keydown",N=>{var P;const B=((P=N.key)===null||P===void 0?void 0:P.toLowerCase())==="f12"||N.keyCode===123;N.altKey&&B&&(N.preventDefault(),r().map(F=>U.fromDom(F.getEl())).each(F=>Ao(F)))})})(e),{open:h,close:y,getNotifications:w}},jf=Vs.PluginManager,Sm=Vs.ThemeManager;var VD=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const h0=e=>{let n=[];const o=()=>{const B=e.theme;return B&&B.getWindowManagerImpl?B.getWindowManagerImpl():VD()},r=(B,F)=>(...W)=>F?F.apply(B,W):void 0,i=B=>{e.dispatch("OpenWindow",{dialog:B})},l=B=>{e.dispatch("CloseWindow",{dialog:B})},d=B=>{n.push(B),i(B)},g=B=>{l(B),n=et(n,F=>F!==B),n.length===0&&e.focus()},h=()=>O.from(n[n.length-1]),y=B=>{e.editorManager.setActive(e),Yx(e),e.ui.show();const F=B();return d(F),F},w=(B,F)=>y(()=>o().open(B,F,g)),T=B=>y(()=>o().openUrl(B,g)),_=(B,F,W)=>{const Q=o();Q.alert(B,r(W||Q,F))},N=(B,F,W)=>{const Q=o();Q.confirm(B,r(W||Q,F))},P=()=>{h().each(B=>{o().close(B),g(B)})};return e.on("remove",()=>{pe(n,B=>{o().close(B)})}),{open:w,openUrl:T,alert:_,confirm:N,close:P}},q4=(e,n)=>{e.notificationManager.open({type:"error",text:n})},p0=(e,n)=>{e._skinLoaded?q4(e,n):e.on("SkinLoaded",()=>{q4(e,n)})},zD=(e,n)=>{p0(e,ps.translate(["Failed to upload image: {0}",n]))},$h=(e,n,o)=>{Av(e,n,{message:o}),console.error(o)},Hh=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,UD=(e,n,o)=>{$h(e,"PluginLoadError",Hh("plugin",n,o))},ZD=(e,n,o)=>{$h(e,"IconsLoadError",Hh("icons",n,o))},WD=(e,n,o)=>{$h(e,"LanguageLoadError",Hh("language",n,o))},jD=(e,n,o)=>{$h(e,"ThemeLoadError",Hh("theme",n,o))},GD=(e,n,o)=>{$h(e,"ModelLoadError",Hh("model",n,o))},K4=(e,n,o)=>{const r=ps.translate(["Failed to initialize plugin: {0}",n]);Av(e,"PluginLoadError",{message:r}),b0(r,o),p0(e,r)},b0=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},qD=e=>{O.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},cy=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},KD=(e,n)=>{cy(e,"StyleWithCSS",n),cy(e,"enableInlineTableEditing",n),cy(e,"enableObjectResizing",n)},YD=e=>{e.selection.setRng(e.selection.getRng())},Y4=(e,n,o)=>{wi(e,n)&&!o?wr(e,n):o&&fo(e,n)},X4=e=>{const n=U.fromDom(e.getBody());Y4(n,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),qD(e)},ly=e=>{const n=U.fromDom(e.getBody());Y4(n,"mce-content-readonly",!1),e.hasEditableRoot()&&Vc(n,!0),KD(e,!1),o2(e)&&e.focus(),YD(e),e.nodeChanged()},il=e=>hh(e),xm="data-mce-contenteditable",VH=e=>{pe(go(e,'*[contenteditable="true"]'),n=>{$s(n,xm,"true"),Vc(n,!1)})},XD=e=>{pe(go(e,`*[${xm}="true"]`),n=>{_s(n,xm),Vc(n,!0)})},v0=(e,n)=>{const o=U.fromDom(e.getBody());n?(X4(e),Vc(o,!1),VH(o)):(XD(o),ly(e))},J4=e=>{e.serializer?Vh(e):e.on("PreInit",()=>{Vh(e)})},Vh=e=>{e.parser.addAttributeFilter("contenteditable",n=>{il(e)&&pe(n,o=>{o.attr(xm,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(xm,n=>{il(e)&&pe(n,o=>{o.attr("contenteditable",o.attr(xm))})}),e.serializer.addTempAttr(xm)},Q4=e=>e.type==="click",JD=["copy"],zh=e=>_t(JD,e.type),eE=(e,n)=>Gd(n,"a",r=>sn(r,U.fromDom(e.getBody()))).bind(r=>Xr(r,"href")),tE=(e,n)=>{if(Q4(n)&&!Je.metaKeyPressed(n)){const o=U.fromDom(n.target);eE(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const i=e.dom.select(`${r},[name="${vr(r,"#")}"]`);i.length&&e.selection.scrollIntoView(i[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else zh(n)&&e.dispatch(n.type,n)},Uh=e=>{e.on("ShowCaret ObjectSelected",n=>{il(e)&&n.preventDefault()}),e.on("DisabledStateChange",n=>{n.isDefaultPrevented()||v0(e,n.state)})},wm=e=>{J4(e),Uh(e)},QD=e=>/^[a-z0-9\-]+$/i.test(e),nE=e=>"content/"+e+"/content.css",zH=e=>tinymce.Resource.has(nE(e)),eM=e=>oE(e,YP(e)),tM=e=>oE(e,r_(e)),oE=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",i=`content${e.editorManager.suffix}.css`;return At(n,l=>zH(l)?l:QD(l)&&!e.inline?`${o}/${l}/${i}`:e.documentBaseURI.toAbsolute(l))},UH=e=>{e.contentCSS=e.contentCSS.concat(eM(e),tM(e))},Em=e=>e?xs(e.getElementsByTagName("img")):[],Gf=(e,n)=>{const o={};return{findAll:(i,l=ze)=>{const d=et(Em(i),h=>{const y=h.src;return h.hasAttribute("data-mce-bogus")||h.hasAttribute("data-mce-placeholder")||!y||y===yn.transparentSrc?!1:es(y,"blob:")?!e.isUploaded(y)&&l(h):es(y,"data:")?l(h):!1}),g=At(d,h=>{const y=h.src;if(xt(o,y))return o[y].then(w=>re(w)?w:{image:h,blobInfo:w.blobInfo});{const w=k5(n,y).then(T=>(delete o[y],{image:h,blobInfo:T})).catch(T=>(delete o[y],T));return o[y]=w,w}});return Promise.all(g)}}},sE=()=>{let o={};const r=(_,N)=>({status:_,resultUri:N}),i=_=>_ in o;return{hasBlobUri:i,getResultUri:_=>{const N=o[_];return N?N.resultUri:null},isPending:_=>i(_)?o[_].status===1:!1,isUploaded:_=>i(_)?o[_].status===2:!1,markPending:_=>{o[_]=r(1,null)},markUploaded:(_,N)=>{o[_]=r(2,N)},removeFailed:_=>{delete o[_]},destroy:()=>{o={}}}};let nM=0;const ZH=()=>{const e=()=>Math.round(Eg()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},WH=e=>e+nM+++ZH(),jH=()=>{let e=[];const n=T=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[T.toLowerCase()]||"dat",o=(T,_,N,P,B)=>{if(re(T))return r({id:T,name:P,filename:B,blob:_,base64:N});if(Pt(T))return r(T);throw new Error("Unknown input type")},r=T=>{if(!T.blob||!T.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const _=T.id||WH("blobid"),N=T.name||_,P=T.blob;return{id:qe(_),name:qe(N),filename:qe(T.filename||N+"."+n(P.type)),blob:qe(P),base64:qe(T.base64),blobUri:qe(T.blobUri||URL.createObjectURL(P)),uri:qe(T.uri)}},i=T=>{d(T.id())||e.push(T)},l=T=>ko(e,T).getOrUndefined(),d=T=>l(_=>_.id()===T);return{create:o,add:i,get:d,getByUri:T=>l(_=>_.blobUri()===T),getByData:(T,_)=>l(N=>N.base64()===T&&N.blob().type===_),findFirst:l,removeByUri:T=>{e=et(e,_=>_.blobUri()===T?(URL.revokeObjectURL(_.blobUri()),!1):!0)},destroy:()=>{pe(e,T=>{URL.revokeObjectURL(T.blobUri())}),e=[]}}},ai=(e,n)=>{const o={},r=(B,F)=>B?B.replace(/\/$/,"")+"/"+F.replace(/^\//,""):F,i=(B,F)=>new Promise((W,Q)=>{const te=new XMLHttpRequest;te.open("POST",n.url),te.withCredentials=n.credentials,te.upload.onprogress=Se=>{F(Se.loaded/Se.total*100)},te.onerror=()=>{Q("Image upload failed due to a XHR Transport error. Code: "+te.status)},te.onload=()=>{if(te.status<200||te.status>=300){Q("HTTP Error: "+te.status);return}const Se=JSON.parse(te.responseText);if(!Se||!re(Se.location)){Q("Invalid JSON: "+te.responseText);return}W(r(n.basePath,Se.location))};const ae=new FormData;ae.append("file",B.blob(),B.filename()),te.send(ae)}),l=jt(n.handler)?n.handler:i,d=()=>new Promise(B=>{B([])}),g=(B,F)=>({url:F,blobInfo:B,status:!0}),h=(B,F)=>({url:"",blobInfo:B,status:!1,error:F}),y=(B,F)=>{Pe.each(o[B],W=>{W(F)}),delete o[B]},w=(B,F,W)=>(e.markPending(B.blobUri()),new Promise(Q=>{let te,ae;try{const Se=()=>{te&&(te.close(),ae=ct)},De=ge=>{Se(),e.markUploaded(B.blobUri(),ge),y(B.blobUri(),g(B,ge)),Q(g(B,ge))},Ke=ge=>{Se(),e.removeFailed(B.blobUri()),y(B.blobUri(),h(B,ge)),Q(h(B,ge))};ae=ge=>{ge<0||ge>100||O.from(te).orThunk(()=>O.from(W).map(Hn)).each(le=>{te=le,le.progressBar.value(ge)})},F(B,ae).then(De,ge=>{Ke(re(ge)?{message:ge}:ge)})}catch(Se){Q(h(B,Se))}})),T=B=>B===i,_=B=>{const F=B.blobUri();return new Promise(W=>{o[F]=o[F]||[],o[F].push(W)})},N=(B,F)=>(B=Pe.grep(B,W=>!e.isUploaded(W.blobUri())),Promise.all(Pe.map(B,W=>e.isPending(W.blobUri())?_(W):w(W,l,F))));return{upload:(B,F)=>!n.url&&T(l)?d():N(B,F)}},gc=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),rE=(e,n)=>ai(n,{url:WP(e),basePath:jP(e),credentials:GP(e),handler:qP(e)}),aE=e=>{const n=sE(),o=rE(e,n);return{upload:(r,i=!0)=>o.upload(r,i?gc(e):void 0)}},iE=(e,n)=>e.dom.isEmpty(n.dom)&&Oe(e.schema.getTextBlockElements()[En(n)]),uy=e=>n=>{iE(e,n)&&rs(n,U.fromHtml('<br data-mce-bogus="1" />'))},GH=e=>{const n=jH();let o,r;const i=sE(),l=[],d=te=>ae=>e.selection?te(ae):[],g=te=>te+(te.indexOf("?")===-1?"?":"&")+new Date().getTime(),h=(te,ae,Se)=>{let De=0;do De=te.indexOf(ae,De),De!==-1&&(te=te.substring(0,De)+Se+te.substr(De+ae.length),De+=Se.length-ae.length+1);while(De!==-1);return te},y=(te,ae,Se)=>{const De=`src="${Se}"${Se===yn.transparentSrc?' data-mce-placeholder="1"':""}`;return te=h(te,`src="${ae}"`,De),te=h(te,'data-mce-src="'+ae+'"','data-mce-src="'+Se+'"'),te},w=(te,ae)=>{pe(e.undoManager.data,Se=>{Se.type==="fragmented"?Se.fragments=At(Se.fragments,De=>y(De,te,ae)):Se.content=y(Se.content,te,ae)})},T=(te,ae)=>{const Se=e.convertURL(ae,"src");w(te.src,ae),qa(U.fromDom(te),{src:h1(e)?g(ae):ae,"data-mce-src":Se})},_=()=>(o||(o=rE(e,i)),F().then(d(te=>{const ae=At(te,Se=>Se.blobInfo);return o.upload(ae,gc(e)).then(d(Se=>{const De=[];let Ke=!1;const ge=At(Se,(le,Ee)=>{const{blobInfo:Ge,image:lt}=te[Ee];let Gt=!1;return le.status&&p1(e)?(le.url&&!fs(lt.src,le.url)&&(Ke=!0),n.removeByUri(lt.src),Du(e)||T(lt,le.url)):le.error&&(le.error.remove&&(w(lt.src,yn.transparentSrc),De.push(lt),Gt=!0),zD(e,le.error.message)),{element:lt,status:le.status,uploadUri:le.url,blobInfo:Ge,removed:Gt}});return De.length>0&&!Du(e)?e.undoManager.transact(()=>{pe(Ht(De),le=>{const Ee=Lc(le);v(le),Ee.each(uy(e)),n.removeByUri(le.dom.src)})}):Ke&&e.undoManager.dispatchChange(),ge}))}))),N=()=>Ra(e)?_():Promise.resolve([]),P=te=>nn(l,ae=>ae(te)),B=te=>{l.push(te)},F=()=>(r||(r=Gf(i,n)),r.findAll(e.getBody(),P).then(d(te=>{const ae=et(te,Se=>re(Se)?(p0(e,Se),!1):Se.uriType!=="blob");return Du(e)||pe(ae,Se=>{w(Se.image.src,Se.blobInfo.blobUri()),Se.image.src=Se.blobInfo.blobUri(),Se.image.removeAttribute("data-mce-src")}),ae}))),W=()=>{n.destroy(),i.destroy(),r=o=null},Q=te=>te.replace(/src="(blob:[^"]+)"/g,(ae,Se)=>{const De=i.getResultUri(Se);if(De)return'src="'+De+'"';let Ke=n.getByUri(Se);return Ke||(Ke=Ss(e.editorManager.get(),(ge,le)=>ge||le.editorUpload&&le.editorUpload.blobCache.getByUri(Se),void 0)),Ke?'src="data:'+Ke.blob().type+";base64,"+Ke.base64()+'"':ae});return e.on("SetContent",()=>{Ra(e)?N():F()}),e.on("RawSaveContent",te=>{te.content=Q(te.content)}),e.on("GetContent",te=>{te.source_view||te.format==="raw"||te.format==="tree"||(te.content=Q(te.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",te=>{pe(te,ae=>{const Se=ae.attr("src");if(!Se||n.getByUri(Se))return;const De=i.getResultUri(Se);De&&ae.attr("src",De)})})}),{blobCache:n,addFilter:B,uploadImages:_,uploadImagesAuto:N,scanForImages:F,destroy:W}},oM=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const i={inline:"span",styles:{textDecoration:"line-through"},exact:!0},l={inline:"strike",remove:"all",preserve_attributes:["class","style"]},d={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[d,i,l]:[i,d,l]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(i,l,d)=>ot(i)&&i.hasAttribute("href"),onformat:(i,l,d)=>{Pe.each(d,(g,h)=>{n.setAttrib(i,h,g)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":i=>{var l;return(l=i==null?void 0:i.customValue)!==null&&l!==void 0?l:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Pe.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),i=>{r[i]={block:i,remove:"all"}}),r},Zh={remove_similar:!0,inherit:!1},Wh={selector:"td,th",...Zh},dy={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Wh},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Wh},tablecellbordercolor:{styles:{borderColor:"%value"},...Wh},tablecellclass:{classes:["%value"],...Wh},tableclass:{selector:"table",classes:["%value"],...Zh},tablecellborderstyle:{styles:{borderStyle:"%value"},...Wh},tablecellborderwidth:{styles:{borderWidth:"%value"},...Wh}},cE=qe(dy),sM=e=>{const n={},o=d=>Oe(d)?n[d]:n,r=d=>xt(n,d),i=(d,g)=>{d&&(re(d)?(Qn(g)||(g=[g]),pe(g,h=>{mo(h.deep)&&(h.deep=!ic(h)),mo(h.split)&&(h.split=!ic(h)||Qs(h)),mo(h.remove)&&ic(h)&&!Qs(h)&&(h.remove="none"),ic(h)&&Qs(h)&&(h.mixed=!0,h.block_expand=!0),re(h.classes)&&(h.classes=h.classes.split(/\s+/))}),n[d]=g):Ze(d,(h,y)=>{i(y,h)}))},l=d=>(d&&n[d]&&delete n[d],n);return i(oM(e)),i(cE()),i(t7(e)),{get:o,has:r,register:i,unregister:l}},km=Pe.each,hc=Ln.DOM,lE=e=>Oe(e)&&Pt(e),cl=(e,n)=>{const o=n&&n.schema||Lr({}),r=(h,y)=>{y.classes.length>0&&hc.addClass(h,y.classes.join(" ")),hc.setAttribs(h,y.attrs)},i=h=>{const y=re(h)?{name:h,classes:[],attrs:{}}:h,w=hc.create(y.name);return r(w,y),w},l=(h,y)=>{const w=o.getElementRule(h.nodeName.toLowerCase()),T=w==null?void 0:w.parentsRequired;return T&&T.length?y&&_t(T,y)?y:T[0]:!1},d=(h,y,w)=>{let T;const _=y[0],N=lE(_)?_.name:void 0,P=l(h,N);if(P)N===P?(T=_,y=y.slice(1)):T=P;else if(_)T=_,y=y.slice(1);else if(!w)return h;const B=T?i(T):hc.create("div");B.appendChild(h),w&&Pe.each(w,W=>{const Q=i(W);B.insertBefore(Q,h)});const F=lE(T)?T.siblings:void 0;return d(B,y,F)},g=hc.create("div");if(e.length>0){const h=e[0],y=i(h),w=lE(h)?h.siblings:void 0;g.appendChild(d(y,e.slice(1),w))}return g},ii=e=>{e=Pe.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,i,l,d,g)=>{switch(i){case"#":o.attrs.id=l;break;case".":o.classes.push(l);break;case":":Pe.inArray("checked disabled enabled read-only required".split(" "),l)!==-1&&(o.attrs[l]=l);break}if(d==="["){const h=g.match(/([\w\-]+)(?:\=\"([^\"]+))?/);h&&(o.attrs[h[1]]=h[2])}return""})),o.name=n||"div",o},y0=e=>re(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Pe.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Pe.map(n.split(/(?:~\+|~|\+)/),ii),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],ci=(e,n)=>{let o="",r=n7(e);if(r==="")return"";const i=_=>re(_)?_.replace(/%(\w+)/g,""):"",l=(_,N)=>hc.getStyle(N??e.getBody(),_,!0);if(re(n)){const _=e.formatter.get(n);if(!_)return"";n=_[0]}if("preview"in n){const _=n.preview;if(_===!1)return"";r=_||r}let d=n.block||n.inline||"span",g;const h=y0(n.selector);h.length>0?(h[0].name||(h[0].name=d),d=n.selector,g=cl(h,e)):g=cl([d],e);const y=hc.select(d,g)[0]||g.firstChild;km(n.styles,(_,N)=>{const P=i(_);P&&hc.setStyle(y,N,P)}),km(n.attributes,(_,N)=>{const P=i(_);P&&hc.setAttrib(y,N,P)}),km(n.classes,_=>{const N=i(_);hc.hasClass(y,N)||hc.addClass(y,N)}),e.dispatch("PreviewFormats"),hc.setStyles(g,{position:"absolute",left:-65535}),e.getBody().appendChild(g);const w=l("fontSize"),T=/px$/.test(w)?parseInt(w,10):0;return km(r.split(" "),_=>{let N=l(_,y);if(!(_==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(N)&&(N=l(_),Qp(N).toLowerCase()==="#ffffff"))&&!(_==="color"&&Qp(N).toLowerCase()==="#000000")){if(_==="font-size"&&/em|%$/.test(N)){if(T===0)return;N=parseFloat(N)/(/%$/.test(N)?100:1)*T+"px"}_==="border"&&N&&(o+="padding:0 2px;"),o+=_+":"+N+";"}}),e.dispatch("AfterPreviewFormats"),hc.remove(g),o},qH=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},Xn=e=>{const n=sM(e),o=To({});return qH(e),NF(e),Du(e)||g5(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,i,l)=>{cH(e,r,i,l)},remove:(r,i,l,d)=>{L4(e,r,i,l,d)},toggle:(r,i,l)=>{CD(e,r,i,l)},match:(r,i,l,d)=>sH(e,r,i,l,d),closest:r=>ey(e,r),matchAll:(r,i)=>rH(e,r,i),matchNode:(r,i,l,d)=>aH(e,r,i,l,d),canApply:r=>iH(e,r),formatChanged:(r,i,l,d)=>ty(e,o,r,i,l,d),getCssText:Qe(ci,e)}},rM=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},qf=(e,n,o)=>{const r=To(!1),i=h=>{Lh(n,!1,o),n.add({},h)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",h=>{const y=h.command;rM(y)||(pD(n,o),n.beforeChange())}),e.on("ExecCommand",h=>{const y=h.command;rM(y)||i(h)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",i),e.on("dragend",i),e.on("keyup",h=>{const y=h.keyCode;if(h.isDefaultPrevented())return;const w=yn.os.isMacOS()&&h.key==="Meta";(y>=33&&y<=36||y>=37&&y<=40||y===45||h.ctrlKey||w)&&(i(),e.nodeChanged()),(y===46||y===8)&&e.nodeChanged(),r.get()&&n.typing&&!R4(Ph(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",h=>{const y=h.keyCode;if(h.isDefaultPrevented())return;if(y>=33&&y<=36||y>=37&&y<=40||y===45){n.typing&&i(h);return}const w=h.ctrlKey&&!h.altKey||h.metaKey;if((y<16||y>20)&&y!==224&&y!==91&&!n.typing&&!w){n.beforeChange(),Lh(n,!0,o),n.add({},h),r.set(!0);return}(yn.os.isMacOS()?h.metaKey:h.ctrlKey&&!h.altKey)&&n.beforeChange()}),e.on("mousedown",h=>{n.typing&&i(h)});const l=h=>h.inputType==="insertReplacementText",d=h=>h.inputType==="insertText"&&h.data===null,g=h=>h.inputType==="insertFromPaste"||h.inputType==="insertFromDrop";e.on("input",h=>{h.inputType&&(l(h)||d(h)||g(h))&&i(h)}),e.on("AddUndo Undo Redo ClearUndos",h=>{h.isDefaultPrevented()||e.nodeChanged()})},C0=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},uE=e=>{const n=br(),o=To(0),r=To(0),i={data:[],typing:!1,beforeChange:()=>{Q$(e,o,n)},add:(l,d)=>YG(e,i,r,o,n,l,d),dispatchChange:()=>{e.setDirty(!0);const l=Ph(e);l.bookmark=im(e.selection),e.dispatch("change",{level:l,lastLevel:Za(i.data,r.get()).getOrUndefined()})},undo:()=>al(e,i,o,r),redo:()=>vD(e,r,i.data),clear:()=>{eH(e,i,r)},reset:()=>{yD(e,i)},hasUndo:()=>tH(e,i,r),hasRedo:()=>nH(e,i,r),transact:l=>XG(e,i,o,l),ignore:l=>{Vr(e,o,l)},extra:(l,d)=>{oH(e,i,r,l,d)}};return Du(e)||qf(e,i,o),C0(e),i},dE=[9,27,Je.HOME,Je.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Je.DOWN,Je.UP,Je.LEFT,Je.RIGHT].concat(yn.browser.isFirefox()?[224]:[]),my="data-mce-placeholder",aM=e=>e.type==="keydown"||e.type==="keyup",fy=e=>{const n=e.keyCode;return n===Je.BACKSPACE||n===Je.DELETE},KH=e=>{if(aM(e)){const n=e.keyCode;return!fy(e)&&(Je.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||_t(dE,n))}else return!1},iM=e=>aM(e)&&!(fy(e)||e.type==="keyup"&&e.keyCode===229),cM=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},mE=e=>{var n;const o=e.dom,r=ta(e),i=(n=QP(e))!==null&&n!==void 0?n:"",l=(d,g)=>{if(KH(d))return;const h=e.getBody(),y=iM(d)?!1:cM(o,h,r);(o.getAttrib(h,my)!==""!==y||g)&&(o.setAttrib(h,my,y?i:null),ih(e,y),e.on(y?"keydown":"keyup",l),e.off(y?"keyup":"keydown",l))};dn(i)&&e.on("init",d=>{l(d,!0),e.on("change SetContent ExecCommand",l),e.on("paste",g=>lc.setEditorTimeout(e,()=>l(g)))})},lM=(e,n)=>({block:e,position:n}),gy=(e,n)=>({from:e,to:n}),fE=(e,n)=>{const o=U.fromDom(e),r=U.fromDom(n.container());return U1(o,r).map(i=>lM(i,n))},YH=e=>!(Ki(e.to.block,e.from.block)||Ki(e.from.block,e.to.block)),XH=e=>!sn(e.from.block,e.to.block),uM=(e,n)=>cu(n,i=>nm(i)||zc(i.dom),i=>sn(i,e)).filter(ya).getOr(e),JH=(e,n)=>{const o=U.fromDom(e);return sn(uM(o,n.from.block),uM(o,n.to.block))},dM=e=>wo(e.from.block.dom)===!1&&wo(e.to.block.dom)===!1,QH=e=>{const n=o=>zS(o)||SS(o.dom)||sd(o);return n(e.from.block)&&n(e.to.block)},e9=(e,n,o,r)=>zo(r.position.getNode())&&!Qr(e,r.block)?yf(!1,r.block.dom).bind(i=>i.isEqual(r.position)?sc(o,n,i).bind(l=>fE(n,l)):O.some(r)).getOr(r):r,mM=(e,n,o,r)=>{const i=fE(n,be.fromRangeStart(r)),l=i.bind(d=>sc(o,n,d.position).bind(g=>fE(n,g).map(h=>e9(e,n,o,h))));return os(i,l,gy).filter(d=>XH(d)&&JH(n,d)&&dM(d)&&QH(d)&&YH(d))},t9=(e,n,o,r)=>r.collapsed?mM(e,n,o,r):O.none(),fM=(e,n)=>{const o=ur(e);return Ps(o,r=>n.isBlock(En(r))).fold(qe(o),r=>o.slice(0,r))},jh=(e,n)=>{const o=fM(e,n);return pe(o,v),o},gM=(e,n,o)=>{const r=wu(o,n);return ko(r.reverse(),i=>Qr(e,i)).each(v)},n9=(e,n)=>et(Ip(n),o=>!Qr(e,o)).length===0,hM=(e,n,o,r,i)=>{if(Qr(r,o))return om(o),Ar(o.dom);n9(r,i)&&Qr(r,n)&&Yr(i,U.fromTag("br"));const l=Ba(o.dom,be.before(i.dom));return pe(jh(n,r),d=>{Yr(i,d)}),gM(r,e,n),l},pM=(e,n)=>e.isInline(En(n)),o9=(e,n,o,r)=>{if(Qr(r,o)){if(Qr(r,n)){const d=Ac((g=>{const h=(y,w)=>Ys(y).fold(()=>w,T=>pM(r,T)?h(T,w.concat(H(T))):w);return h(g,[])})(o),(g,h)=>($g(g,h),h),rd());Si(n),rs(n,d)}return v(o),Ar(n.dom)}const i=ti(o.dom);return pe(jh(n,r),l=>{rs(o,l)}),gM(r,e,n),i},bM=(e,n)=>{const o=wu(n,e);return O.from(o[o.length-1])},pc=(e,n)=>Ki(n,e)?bM(n,e):O.none(),vM=(e,n)=>{yf(e,n.dom).bind(o=>O.from(o.getNode())).map(U.fromDom).filter(gf).each(v)},gE=(e,n,o,r)=>(vM(!0,n),vM(!1,o),pc(n,o).fold(Qe(o9,e,n,o,r),Qe(hM,e,n,o,r))),hy=(e,n,o,r,i)=>n?gE(e,r,o,i):gE(e,o,r,i),S0=(e,n)=>{const o=U.fromDom(e.getBody());return t9(e.schema,o.dom,n,e.selection.getRng()).map(i=>()=>{hy(o,n,i.from.block,i.to.block,e.schema).each(l=>{e.selection.setRng(l.toRange())})})},yM=(e,n,o)=>{const r=n.getRng();return os(U1(e,U.fromDom(r.startContainer)),U1(e,U.fromDom(r.endContainer)),(i,l)=>sn(i,l)?O.none():O.some(()=>{r.deleteContents(),hy(e,!0,i,l,o).each(d=>{n.setRng(d.toRange())})})).getOr(O.none())},hE=(e,n)=>{const o=U.fromDom(n),r=Qe(sn,e);return Yu(o,nm,r).isSome()},s9=(e,n)=>hE(e,n.startContainer)||hE(e,n.endContainer),r9=(e,n)=>{const o=Ba(e.dom,be.fromRangeStart(n)).isNone(),r=Ms(e.dom,be.fromRangeEnd(n)).isNone();return!s9(e,n)&&o&&r},CM=e=>O.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),SM=e=>{const n=U.fromDom(e.getBody()),o=e.selection.getRng();return r9(n,o)?CM(e):yM(n,e.selection,e.schema)},Pa=(e,n)=>e.selection.isCollapsed()?O.none():SM(e),Td=(e,n,o,r,i)=>O.from(n._selectionOverrides.showCaret(e,o,r,i)),a9=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},py=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?O.none():O.some(a9(n)),pE=(e,n,o)=>{const r=kx(1,e.getBody(),n),i=be.fromRangeStart(r),l=i.getNode();if(S1(l))return Td(1,e,l,!i.isAtEnd(),!1);const d=i.getNode(!0);if(S1(d))return Td(1,e,d,!1,!1);const g=Pf(e.dom.getRoot(),i.getNode());return S1(g)?Td(1,e,g,!1,o):O.none()},bE=(e,n,o)=>n.collapsed?pE(e,n,o).getOr(n):n,JG=e=>Mf(e)||$1(e),i9=e=>Nf(e)||Df(e),vE=(e,n)=>{Re(n)&&n.data.length===0&&e.remove(n)},bc=(e,n,o,r,i,l)=>{Td(r,e,l.getNode(!i),i,!0).each(d=>{if(n.collapsed){const g=n.cloneRange();i?g.setEnd(d.startContainer,d.startOffset):g.setStart(d.endContainer,d.endOffset),g.deleteContents()}else n.deleteContents();e.selection.setRng(d)}),vE(e.dom,o)},yE=(e,n)=>{const o=e.selection.getRng();if(!Re(o.commonAncestorContainer))return O.none();const r=n?1:-1,i=Qc(e.getBody()),l=Qe(Tx,n?i.next:i.prev),d=n?JG:i9,g=T1(r,e.getBody(),o),h=l(g),y=h&&dc(n,h);if(!y||!$v(g,y))return O.none();if(d(y))return O.some(()=>bc(e,o,g.getNode(),r,n,y));const w=l(y);return w&&d(w)&&$v(y,w)?O.some(()=>bc(e,o,g.getNode(),r,n,w)):O.none()},Gh=(e,n)=>yE(e,n),x0=(e,n)=>{const o=e.getBody();return n?Ar(o).filter(Mf):ti(o).filter(Nf)},CE=e=>{const n=e.selection.getRng();return!n.collapsed&&(x0(e,!0).exists(o=>o.isEqual(be.fromRangeStart(n)))||x0(e,!1).exists(o=>o.isEqual(be.fromRangeEnd(n))))},SE=e=>Oe(e)&&(nm(U.fromDom(e))||sd(U.fromDom(e))),Ni=cr.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),xM=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return ot(o)&&o.getAttribute("data-mce-caret")===r},c9=(e,n,o,r,i)=>{const l=d=>i.isInline(d.nodeName.toLowerCase())&&!Ml(o,r,e);return H_(!n,o).fold(()=>H_(n,r).fold(ke,l),l)},wM=(e,n,o,r,i)=>{const l=i.getNode(!o);return U1(U.fromDom(n),U.fromDom(r.getNode())).map(d=>Qr(e,d)?Ni.remove(d.dom):Ni.moveToElement(l)).orThunk(()=>O.some(Ni.moveToElement(l)))},by=(e,n,o,r)=>sc(n,e,o).bind(i=>SE(i.getNode())||c9(e,n,o,i,r)?O.none():n&&wo(i.getNode())||!n&&wo(i.getNode(!0))?wM(r,e,n,o,i):n&&Nf(o)||!n&&Mf(o)?O.some(Ni.moveToPosition(i)):O.none()),l9=(e,n)=>hn(n)?O.none():e&&wo(n.nextSibling)?O.some(Ni.moveToElement(n.nextSibling)):!e&&wo(n.previousSibling)?O.some(Ni.moveToElement(n.previousSibling)):O.none(),EM=(e,n,o)=>o.fold(r=>O.some(Ni.remove(r)),r=>O.some(Ni.moveToElement(r)),r=>Ml(n,r,e)?O.none():O.some(Ni.moveToPosition(r))),u9=(e,n,o,r)=>xM(n,o)?l9(n,o.getNode(!n)).orThunk(()=>by(e,n,o,r)):by(e,n,o,r).bind(i=>EM(e,o,i)),Kf=(e,n,o,r)=>{const i=kx(n?1:-1,e,o),l=be.fromRangeStart(i),d=U.fromDom(e);return!n&&Nf(l)?O.some(Ni.remove(l.getNode(!0))):n&&Mf(l)?O.some(Ni.remove(l.getNode())):!n&&Mf(l)&&g2(d,l,r)?XA(d,l,r).map(g=>Ni.remove(g.getNode())):n&&Nf(l)&&vw(d,l,r)?fI(d,l,r).map(g=>Ni.remove(g.getNode())):u9(e,n,l,r)},kM=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),Rf(e,n,U.fromDom(o)),!0),d9=(e,n)=>o=>{const r=n?be.before(o):be.after(o);return e.selection.setRng(r.toRange()),!0},TM=e=>n=>(e.selection.setRng(n.toRange()),!0),_M=(e,n)=>O.from(Pf(e.getBody(),n)),m9=(e,n)=>{const o=e.selection.getNode();return _M(e,o).filter(wo).fold(()=>Kf(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(kM(e,n),d9(e,n),TM(e))),()=>O.some(ct))},f9=e=>{pe(go(e,".mce-offscreen-selection"),v)},g9=(e,n)=>{const o=e.selection.getNode();return wo(o)&&!qp(o)?_M(e,o.parentNode).filter(wo).fold(()=>O.some(()=>{f9(U.fromDom(e.getBody())),Rf(e,n,U.fromDom(e.selection.getNode())),Z1(e)}),()=>O.some(ct)):CE(e)?O.some(()=>{CO(e,e.selection.getRng(),U.fromDom(e.getBody()))}):O.none()},AM=e=>{const n=e.dom,o=e.selection,r=Pf(e.getBody(),o.getNode());if(zc(r)&&n.isBlock(r)&&n.isEmpty(r)){const i=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(i),o.setRng(be.before(i).toRange())}return!0},vy=(e,n)=>e.selection.isCollapsed()?m9(e,n):g9(e,n),OM=e=>e.hasOwnProperty("text"),yy=e=>e.hasOwnProperty("marker"),_d=(e,n)=>{const o=(l,d)=>{if(Re(l))return{text:l,offset:d};{const g=n(),h=l.childNodes;return d<h.length?(l.insertBefore(g,h[d]),{marker:g,before:!0}):(l.appendChild(g),{marker:g,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},DM=e=>{var n,o;const{start:r,end:i}=e,l=new window.Range;return OM(r)?l.setStart(r.text,r.offset):yy(r)&&(r.before?l.setStartBefore(r.marker):l.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),OM(i)?l.setEnd(i.text,i.offset):yy(i)&&(i.before?l.setEndBefore(i.marker):l.setEndAfter(i.marker),(o=i.marker.parentNode)===null||o===void 0||o.removeChild(i.marker)),l},xE=(e,n)=>{var o;const r=e.dom,i=r.getParent(e.selection.getStart(),r.isBlock),l=r.getParent(e.selection.getEnd(),r.isBlock),d=e.getBody();if(((o=i==null?void 0:i.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&i&&l&&i===d.firstChild&&l===d.lastChild&&!r.isEmpty(d)){const h=i.cloneNode(!1),y=()=>{if(n?vO(e):C2(e),d.firstChild!==i){const w=_d(e.selection.getRng(),()=>document.createElement("span"));Array.from(d.childNodes).forEach(T=>h.appendChild(T)),d.appendChild(h),e.selection.setRng(DM(w))}};return O.some(y)}return O.none()},Cy=(e,n)=>{const o=be.fromRangeStart(e.selection.getRng());return sc(n,e.getBody(),o).filter(r=>n?TG(r):iI(r)).bind(r=>Ex(n?0:-1,r)).map(r=>()=>e.selection.select(r))},Sy=(e,n)=>e.selection.isCollapsed()?Cy(e,n):O.none(),Yf=Re,wE=e=>Yf(e)&&e.data[0]===Xs,w0=e=>Yf(e)&&e.data[e.data.length-1]===Xs,EE=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Xs)},h9=e=>{var n;if(Yf(e.previousSibling))return w0(e.previousSibling)||e.previousSibling.appendData(Xs),e.previousSibling;if(Yf(e))return wE(e)||e.insertData(0,Xs),e;{const o=EE(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},MM=e=>{var n,o;if(Yf(e.nextSibling))return wE(e.nextSibling)||e.nextSibling.insertData(0,Xs),e.nextSibling;if(Yf(e))return w0(e)||e.appendData(Xs),e;{const r=EE(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},xy=(e,n)=>e?h9(n):MM(n),p9=Qe(xy,!0),wy=Qe(xy,!1),kE=(e,n)=>Re(e.container())?xy(n,e.container()):xy(n,e.getNode()),E0=(e,n)=>{const o=n.get();return o&&e.container()===o&&Ir(o)},TE=(e,n)=>n.fold(o=>{dm(e.get());const r=p9(o);return e.set(r),O.some(be(r,r.length-1))},o=>Ar(o).map(r=>{if(E0(r,e)){const i=e.get();return be(i,1)}else{dm(e.get());const i=kE(r,!0);return e.set(i),be(i,1)}}),o=>ti(o).map(r=>{if(E0(r,e)){const i=e.get();return be(i,i.length-1)}else{dm(e.get());const i=kE(r,!1);return e.set(i),be(i,i.length-1)}}),o=>{dm(e.get());const r=wy(o);return e.set(r),O.some(be(r,1))}),NM=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return O.none()},wa=cr.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),_E=(e,n)=>{const o=gd(n,e);return o||e},AE=(e,n,o)=>{const r=pO(o),i=_E(n,r.container());return hm(e,i,r).fold(()=>Ms(i,r).bind(Qe(hm,e,i)).map(l=>wa.before(l)),O.none)},RM=(e,n)=>Cf(e,n)===null,BM=(e,n,o)=>hm(e,n,o).filter(Qe(RM,n)),b9=(e,n,o)=>{const r=Tw(o);return BM(e,n,r).bind(i=>Ba(i,r).isNone()?O.some(wa.start(i)):O.none())},v9=(e,n,o)=>{const r=pO(o);return BM(e,n,r).bind(i=>Ms(i,r).isNone()?O.some(wa.end(i)):O.none())},k0=(e,n,o)=>{const r=Tw(o),i=_E(n,r.container());return hm(e,i,r).fold(()=>Ba(i,r).bind(Qe(hm,e,i)).map(l=>wa.after(l)),O.none)},ll=e=>!fO(T0(e)),Mu=(e,n,o)=>NM([AE,b9,v9,k0],[e,n,o]).filter(ll),T0=e=>e.fold(ds,ds,ds,ds),Io=e=>e.fold(qe("before"),qe("start"),qe("end"),qe("after")),qh=e=>e.fold(wa.before,wa.before,wa.after,wa.after),Kh=e=>e.fold(wa.start,wa.start,wa.end,wa.end),Ad=(e,n)=>Io(e)===Io(n)&&T0(e)===T0(n),PM=(e,n,o,r,i,l)=>os(hm(n,o,r),hm(n,o,i),(d,g)=>d!==g&&hO(o,d,g)?wa.after(e?d:g):l).getOr(l),OE=(e,n)=>e.fold(ze,o=>!Ad(o,n)),y9=(e,n,o,r,i)=>{const l=dc(e,i);return sc(e,o,l).map(Qe(dc,e)).fold(()=>r.map(qh),h=>Mu(n,o,h).map(Qe(PM,e,n,o,l,h)).filter(Qe(OE,r))).filter(ll)},Yh=(e,n)=>e?n.fold(S(O.some,wa.start),O.none,S(O.some,wa.after),O.none):n.fold(O.none,S(O.some,wa.before),O.none,S(O.some,wa.end)),C9=(e,n,o,r)=>{const i=dc(e,r),l=Mu(n,o,i);return Mu(n,o,i).bind(Qe(Yh,e)).orThunk(()=>y9(e,n,o,l,r))},S9=e=>jt(e.selection.getSel().modify),Xf=(e,n,o)=>{const r=e?1:-1;return n.setRng(be(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},x9=(e,n)=>{const o=n.selection.getRng(),r=e?be.fromRangeEnd(o):be.fromRangeStart(o);return S9(n)?e&&WS(r)?Xf(!0,n.selection,r):!e&&a1(r)?Xf(!1,n.selection,r):!1:!1};var La;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(La||(La={}));const Ey=(e,n)=>e===-1?eo(n):n,Tm=(e,n,o)=>e===1?n.next(o):n.prev(o),w9=(e,n,o,r)=>zo(r.getNode(n===1))?La.Br:Ml(o,r)===!1?La.Block:La.Wrap,Ri=(e,n,o,r)=>{const i=Qc(o);let l=r;const d=[];for(;l;){const g=Tm(n,i,l);if(!g)break;if(zo(g.getNode(!1)))return n===1?{positions:Ey(n,d).concat([g]),breakType:La.Br,breakAt:O.some(g)}:{positions:Ey(n,d),breakType:La.Br,breakAt:O.some(g)};if(!g.isVisible()){l=g;continue}if(e(l,g)){const h=w9(o,n,l,g);return{positions:Ey(n,d),breakType:h,breakAt:O.some(g)}}d.push(g),l=g}return{positions:Ey(n,d),breakType:La.Eol,breakAt:O.none()}},_m=(e,n,o,r)=>n(o,r).breakAt.map(i=>{const l=n(o,i).positions;return e===-1?l.concat(i):[i].concat(l)}).getOr([]),Jf=(e,n)=>Ss(e,(o,r)=>o.fold(()=>O.some(r),i=>os(Go(i.getClientRects()),Go(r.getClientRects()),(l,d)=>{const g=Math.abs(n-l.left);return Math.abs(n-d.left)<=g?r:i}).or(o)),O.none()),Xh=(e,n)=>Go(n.getClientRects()).bind(o=>Jf(e,o.left)),_0=Qe(Ri,be.isAbove,-1),Nu=Qe(Ri,be.isBelow,1),LM=Qe(_m,-1,_0),vc=Qe(_m,1,Nu),A0=(e,n)=>_0(e,n).breakAt.isNone(),DE=(e,n)=>Nu(e,n).breakAt.isNone(),ME=e=>Ar(e).map(n=>[n].concat(Nu(e,n).positions)).getOr([]),NE=e=>ti(e).map(n=>_0(e,n).positions.concat(n)).getOr([]),Qf=(e,n)=>Xh(LM(e,n),n),RE=(e,n)=>Xh(vc(e,n),n),E9=wo,IM=(e,n)=>Math.abs(e.left-n),FM=(e,n)=>Math.abs(e.right-n),k9=e=>vl(e,"node"),$M=(e,n)=>Nc(e,(o,r)=>{const i=Math.min(IM(o,n),FM(o,n)),l=Math.min(IM(r,n),FM(r,n));return l===i&&k9(r)&&E9(r.node)||l<i?r:o}),T9=e=>{const n=o=>At(o,r=>{const i=id(r);return i.node=e,i});if(ot(e))return n(e.getClientRects());if(Re(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},eg=e=>Ls(e,T9);var Ea;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Ea||(Ea={}));const _9=(e,n,o,r)=>{let i=r;for(;i=bh(i,e,ex,n);)if(o(i))return},HM=(e,n,o,r,i,l)=>{let d=0;const g=[],h=T=>{let _=eg([T]);e===Ea.Up&&(_=_.reverse());for(let N=0;N<_.length;N++){const P=_[N];if(!o(P,y)){if(g.length>0&&n(P,Is(g))&&d++,P.line=d,i(P))return!0;g.push(P)}}return!1},y=Is(l.getClientRects());if(!y)return g;const w=l.getNode();return w&&(h(w),_9(e,r,h,w)),g},A9=(e,n)=>n.line>e,O9=(e,n)=>n.line===e,D9=Qe(HM,Ea.Up,sh,rh),M9=Qe(HM,Ea.Down,rh,sh),VM=e=>Is(e.getClientRects()),N9=(e,n,o,r)=>{const i=Qc(n);let l,d,g,h;const y=[];let w=0;e===Ea.Down?(l=i.next,d=rh,g=sh,h=be.after(r)):(l=i.prev,d=sh,g=rh,h=be.before(r));const T=VM(h);do{if(!h.isVisible())continue;const _=VM(h);if(g(_,T))continue;y.length>0&&d(_,Is(y))&&w++;const N=id(_);if(N.position=h,N.line=w,o(N))return y;y.push(N)}while(h=l(h));return y},zM=e=>n=>A9(e,n),UM=e=>n=>O9(e,n),Od=(e,n)=>{e.selection.setRng(n),Af(e,e.selection.getRng())},BE=(e,n,o)=>O.some(bE(e,n,o)),ZM=(e,n,o,r,i,l)=>{const d=n===1,g=Qc(e.getBody()),h=Qe(Tx,d?g.next:g.prev),y=d?r:i;if(!o.collapsed){const P=fv(o);if(l(P))return Td(n,e,P,n===-1,!1);if(CE(e)){const B=o.cloneRange();return B.collapse(n===-1),O.from(B)}}const w=T1(n,e.getBody(),o);if(y(w))return py(e,w.getNode(!d));let T=h(w);const _=GS(o);if(T)T=dc(d,T);else return _?O.some(o):O.none();if(y(T))return Td(n,e,T.getNode(!d),d,!1);const N=h(T);return N&&y(N)&&$v(T,N)?Td(n,e,N.getNode(!d),d,!1):_?BE(e,T.toRange(),!1):O.none()},WM=(e,n,o,r,i,l)=>{const d=T1(n,e.getBody(),o),g=Is(d.getClientRects()),h=n===Ea.Down,y=e.getBody();if(!g)return O.none();if(CE(e)){const F=h?be.fromRangeEnd(o):be.fromRangeStart(o);return(h?RE:Qf)(y,F).orThunk(()=>O.from(F)).map(Q=>Q.toRange())}const T=(h?M9:D9)(y,zM(1),d),_=et(T,UM(1)),N=g.left,P=$M(_,N);if(P&&l(P.node)){const F=Math.abs(N-P.left),W=Math.abs(N-P.right);return Td(n,e,P.node,F<W,!1)}let B;if(r(d)?B=d.getNode():i(d)?B=d.getNode(!0):B=fv(o),B){const F=N9(n,y,zM(1),B);let W=$M(et(F,UM(1)),N);if(W||(W=Is(et(F,UM(0))),W))return BE(e,W.position.toRange(),!1)}return _.length===0?PE(e,h).filter(h?i:r).map(F=>bE(e,F.toRange(),!1)):O.none()},PE=(e,n)=>{const o=e.selection.getRng(),r=n?be.fromRangeEnd(o):be.fromRangeStart(o),i=F7(r.container(),e.getBody());if(n){const l=Nu(i,r);return pr(l.positions)}else{const l=_0(i,r);return Go(l.positions)}},jM=(e,n,o)=>PE(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),Pl=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},GM=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},qM=(e,n,o)=>TE(n,o).map(r=>(Pl(e,r),o)),LE=(e,n,o)=>{const r=be.fromRangeStart(e);if(e.collapsed)return r;{const i=be.fromRangeEnd(e);return o?Ba(n,i).getOr(i):Ms(n,r).getOr(r)}},KM=(e,n,o)=>{const r=e.getBody(),i=LE(e.selection.getRng(),r,o),l=Qe(Bf,e);return C9(o,l,r,i).bind(g=>qM(e,n,g))},IE=(e,n,o)=>{const r=At(go(U.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),d=>d.dom),i=et(r,e),l=et(o,e);pe(bl(i,l),Qe(GM,!1)),pe(bl(l,i),Qe(GM,!0))},R9=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=be.fromRangeStart(e.selection.getRng());be.isTextPosition(r)&&!NI(r)&&(Pl(e,B_(o,r)),n.set(null))}},B9=(e,n,o,r)=>{if(n.selection.isCollapsed()){const i=et(r,e);pe(i,l=>{const d=be.fromRangeStart(n.selection.getRng());Mu(e,n.getBody(),d).bind(g=>qM(n,o,g))})}},YM=(e,n,o)=>mh(e)?KM(e,n,o).isSome():!1,XM=(e,n,o)=>mh(n)?x9(e,n):!1,P9=e=>{const n=To(null),o=Qe(Bf,e);return e.on("NodeChange",r=>{mh(e)&&(IE(o,e.dom,r.parents),R9(e,n),B9(o,e,n,r.parents))}),n},L9=Qe(XM,!0),I9=Qe(XM,!1),ky=(e,n,o)=>{if(mh(e)){const r=PE(e,n).getOrThunk(()=>{const i=e.selection.getRng();return n?be.fromRangeEnd(i):be.fromRangeStart(i)});return Mu(Qe(Bf,e),e.getBody(),r).exists(i=>{const l=qh(i);return TE(o,l).exists(d=>(Pl(e,d),!0))})}else return!1},F9=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},$9=e=>os(Ar(e),ti(e),(n,o)=>{const r=dc(!0,n),i=dc(!1,o);return Ms(e,r).forall(l=>l.isEqual(i))}).getOr(!0),JM=(e,n)=>o=>TE(n,o).map(r=>()=>Pl(e,r)),QM=(e,n,o,r)=>{const i=e.getBody(),l=Qe(Bf,e);e.undoManager.ignore(()=>{e.selection.setRng(F9(o,r)),C2(e),Mu(l,i,be.fromRangeStart(e.selection.getRng())).map(Kh).bind(JM(e,n)).each(fi)}),e.nodeChanged()},H9=(e,n)=>{const o=gd(n,e);return o||e},V9=(e,n,o,r)=>{const i=H9(e.getBody(),r.container()),l=Qe(Bf,e),d=Mu(l,i,r);return d.bind(h=>o?h.fold(qe(O.some(Kh(h))),O.none,qe(O.some(qh(h))),O.none):h.fold(O.none,qe(O.some(qh(h))),O.none,qe(O.some(Kh(h))))).map(JM(e,n)).getOrThunk(()=>{const h=el(o,i,r),y=h.bind(w=>Mu(l,i,w));return os(d,y,()=>hm(l,i,r).bind(w=>$9(w)?O.some(()=>{Rf(e,o,U.fromDom(w))}):O.none())).getOrThunk(()=>y.bind(()=>h.map(w=>()=>{o?QM(e,n,r,w):QM(e,n,w,r)})))})},FE=(e,n,o)=>{if(e.selection.isCollapsed()&&mh(e)){const r=be.fromRangeStart(e.selection.getRng());return V9(e,n,o,r)}return O.none()},z9=e=>Lg(e)>1,e6=(e,n)=>{const o=U.fromDom(e.getBody()),r=U.fromDom(e.selection.getStart()),i=wu(r,o);return Ps(i,n).fold(qe(i),l=>i.slice(0,l))},U9=e=>Lg(e)===1,Z9=e=>e6(e,n=>e.schema.isBlock(En(n))||z9(n)),W9=e=>e6(e,n=>e.schema.isBlock(En(n))),$E=(e,n)=>{const o=Qe(Gw,e);return Ls(n,r=>o(r)?[r.dom]:[])},t6=e=>{const n=W9(e);return $E(e,n)},j9=(e,n,o,r)=>{const i=$E(n,r);if(i.length===0)Rf(n,e,o);else{const l=jw(o.dom,i);n.selection.setRng(l.toRange())}},G9=(e,n)=>{const o=et(Z9(e),U9);return pr(o).bind(r=>{const i=be.fromRangeStart(e.selection.getRng());return _w(n,i,r.dom)&&!Kv(r)?O.some(()=>j9(n,e,r,o)):O.none()})},q9=(e,n)=>{const o=n.parentElement;return zo(n)&&!ee(o)&&e.dom.isEmpty(o)},K9=e=>Kv(U.fromDom(e)),n6=(e,n)=>{const o=e.selection.getStart(),r=q9(e,o)||K9(o)?jw(o,n):J1(e.selection.getRng(),n);e.selection.setRng(r.toRange())},Y9=(e,n)=>{const o=bl(n,t6(e));o.length>0&&n6(e,o)},o6=e=>Re(e.startContainer),s6=e=>e.startOffset===0&&o6(e),X9=(e,n)=>{const o=n.startContainer.parentElement;return!ee(o)&&Gw(e,U.fromDom(o))},J9=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!ee(n)&&!ee(o)&&n.isEqualNode(o)},Q9=e=>{const n=e.endContainer;return e.endOffset===(Re(n)?n.length:n.childNodes.length)},eV=e=>J9(e)&&Q9(e),tV=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),nV=e=>eV(e)||tV(e),oV=e=>{const n=e.selection.getRng();return s6(n)&&X9(e,n)&&nV(n)},sV=e=>{if(oV(e)){const n=t6(e);return O.some(()=>{C2(e),Y9(e,n)})}else return O.none()},HE=(e,n)=>e.selection.isCollapsed()?G9(e,n):sV(e),r6=(e,n)=>fS(e,o=>rc(o.dom),o=>n.isBlock(En(o))),a6=e=>r6(U.fromDom(e.selection.getStart()),e.schema),i6=e=>{const n=e.selection.getRng();return n.collapsed&&(o6(n)||e.dom.isEmpty(n.startContainer))&&!a6(e)},Ty=e=>(i6(e)&&n6(e,[]),!0),_y=(e,n,o)=>Oe(o)?O.some(()=>{e._selectionOverrides.hideFakeCaret(),Rf(e,n,U.fromDom(o))}):O.none(),rV=(e,n)=>{const o=n?$1:Df,i=T1(n?1:-1,e.getBody(),e.selection.getRng());return o(i)?_y(e,n,i.getNode(!n)):O.from(dc(n,i)).filter(l=>o(l)&&$v(i,l)).bind(l=>_y(e,n,l.getNode(!n)))},c6=(e,n)=>{const o=e.selection.getNode();return Ji(o)?_y(e,n,o):O.none()},VE=(e,n)=>e.selection.isCollapsed()?rV(e,n):c6(e,n),aV=e=>cu(e,n=>zc(n.dom)||wo(n.dom)).exists(n=>zc(n.dom)),zE=e=>Zi(e??"").getOr(0),l6=(e,n)=>{const o=e||LT(n)?"margin":"padding",r=As(n,"direction")==="rtl"?"-right":"-left";return o+r},iV=(e,n,o,r,i,l)=>{const d=l6(o,U.fromDom(l)),g=zE(e.getStyle(l,d));if(n==="outdent"){const h=Math.max(0,g-r);e.setStyle(l,d,h?h+i:"")}else{const h=g+r+i;e.setStyle(l,d,h)}},cV=(e,n)=>nn(n,o=>{const r=l6(uh(e),o),i=Nb(o,r).map(zE).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&i>0}),Ay=e=>{const n=UE(e);return!e.mode.isReadOnly()&&(n.length>1||cV(e,n))},Oy=e=>th(e)||sd(e),lV=e=>Lc(e).exists(Oy),UE=e=>et(Ht(e.selection.getSelectedBlocks()),n=>!Oy(n)&&!lV(n)&&aV(n)),u6=(e,n)=>{var o,r;if(e.mode.isReadOnly())return;const{dom:i}=e,l=Sn(e),d=(r=(o=/[a-z%]+$/i.exec(l))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",g=zE(l),h=uh(e);pe(UE(e),y=>{iV(i,n,h,g,d,y.dom)})},uV=e=>u6(e,"indent"),d6=e=>u6(e,"outdent"),m6=e=>{if(e.selection.isCollapsed()&&Ay(e)){const n=e.dom,o=e.selection.getRng(),r=be.fromRangeStart(o),i=n.getParent(o.startContainer,n.isBlock);if(i!==null&&bw(U.fromDom(i),r,e.schema))return O.some(()=>d6(e))}return O.none()},f6=(e,n,o)=>pi([m6,vy,Gh,(r,i)=>FE(r,n,i),S0,k2,Sy,VE,Pa,HE,xE],r=>r(e,o)).filter(r=>e.selection.isEditable()),dV=(e,n)=>{f6(e,n,!1).fold(()=>{e.selection.isEditable()&&(C2(e),Z1(e))},fi)},mV=(e,n)=>{f6(e,n,!0).fold(()=>{e.selection.isEditable()&&vO(e)},fi)},fV=(e,n)=>{e.addCommand("delete",()=>{dV(e,n)}),e.addCommand("forwardDelete",()=>{mV(e,n)})},g6=5,gV=400,Dy=e=>e.touches===void 0||e.touches.length!==1?O.none():O.some(e.touches[0]),hV=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>g6||r>g6},pV=e=>{const n=br(),o=To(!1),r=_o(i=>{e.dispatch("longpress",{...i,type:"longpress"}),o.set(!0)},gV);e.on("touchstart",i=>{Dy(i).each(l=>{r.cancel();const d={x:l.clientX,y:l.clientY,target:i.target};r.throttle(i),o.set(!1),n.set(d)})},!0),e.on("touchmove",i=>{r.cancel(),Dy(i).each(l=>{n.on(d=>{hV(l,d)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",i=>{r.cancel(),i.type!=="touchcancel"&&n.get().filter(l=>l.target.isEqualNode(i.target)).each(()=>{o.get()?i.preventDefault():e.dispatch("tap",{...i,type:"tap"})})},!0)},ZE=(e,n)=>xt(e,n.nodeName),bV=(e,n)=>Re(n)?!0:ot(n)?!ZE(e.getBlockElements(),n)&&!ac(n)&&!Zc(e,n)&&!gT(n):!1,vV=(e,n,o)=>Vn(GA(U.fromDom(o),U.fromDom(n)),r=>ZE(e,r.dom)),h6=(e,n)=>{if(Re(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||ZE(e,n.nextSibling)||gT(n.nextSibling)}return!1},Dd=e=>e.dom.create(ta(e),g1(e)),p6=e=>{const n=e.dom,o=e.selection,r=e.schema,i=r.getBlockElements(),l=o.getStart(),d=e.getBody();let g,h,y=null;const w=ta(e);if(!l||!ot(l))return;const T=d.nodeName.toLowerCase();if(!r.isValidChild(T,w.toLowerCase())||vV(i,d,l))return;if(d.firstChild===d.lastChild&&zo(d.firstChild)){g=Dd(e),g.appendChild(rd().dom),d.replaceChild(g,d.firstChild),e.selection.setCursorLocation(g,0),e.nodeChanged();return}let _=d.firstChild;for(;_;)if(ot(_)&&Xb(r,_),bV(r,_)){if(h6(i,_)){h=_,_=_.nextSibling,n.remove(h);continue}if(!g){if(!y&&e.hasFocus()&&(y=_d(e.selection.getRng(),()=>document.createElement("span"))),!_.parentNode){_=null;break}g=Dd(e),d.insertBefore(g,_)}h=_,_=_.nextSibling,g.appendChild(h)}else g=null,_=_.nextSibling;y&&(e.selection.setRng(DM(y)),e.nodeChanged())},b6=(e,n,o)=>{const r=U.fromDom(Dd(e)),i=rd();rs(r,i),o(n,r);const l=document.createRange();return l.setStartBefore(i.dom),l.setEndBefore(i.dom),l},yV=e=>{e.on("NodeChange",()=>p6(e))},v6=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,CV=(e,n,o)=>function(r){const i=arguments,l=i[i.length-2],d=l>0?n.charAt(l-1):"";if(d==='"')return r;if(d===">"){const g=n.lastIndexOf("<",l);if(g!==-1&&n.substring(g,l).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(i[0])+'">'+e.dom.encode(typeof i[1]=="string"?i[1]:i[0])+"</span>"},Jh=(e,n,o)=>{let r=n.length,i=o.content;if(o.format!=="raw"){for(;r--;)i=i.replace(n[r],CV(e,i,T_(e)));o.content=i}},SV=(e,n)=>nn(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),WE=e=>{const n="contenteditable",o=" "+Pe.trim(g7(e))+" ",r=" "+Pe.trim(T_(e))+" ",i=v6(o),l=v6(r),d=h7(e);d.length>0&&e.on("BeforeSetContent",g=>{Jh(e,d,g)}),e.parser.addAttributeFilter("class",g=>{let h=g.length;for(;h--;){const y=g[h];i(y)?y.attr(n,"true"):l(y)&&y.attr(n,"false")}}),e.serializer.addAttributeFilter(n,g=>{let h=g.length;for(;h--;){const y=g[h];if(!i(y)&&!l(y))continue;const w=y.attr("data-mce-content");d.length>0&&w?SV(d,w)?(y.name="#text",y.type=3,y.raw=!0,y.value=w):y.remove():y.attr(n,null)}})},jE=e=>Xu(U.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),y6=(e,n)=>{n.hasAttribute("data-mce-caret")&&(dv(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},C6=(e,n)=>{const o=jE(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),y6(e,o);return}r1(o)&&(y6(e,o),e.undoManager.add())}},My=e=>{e.on("keyup compositionstart",Qe(C6,e))},S6=wo,xV=(e,n,o)=>ZM(n,e,o,Mf,Nf,S6),wV=(e,n,o)=>WM(n,e,o,l=>Mf(l)||gw(l),l=>Nf(l)||jA(l),S6),EV=e=>{const n=e.dom.create(ta(e));return n.innerHTML='<br data-mce-bogus="1">',n},x6=(e,n,o)=>{const r=Qc(e.getBody()),i=Qe(Tx,n===1?r.next:r.prev);if(o.collapsed){const l=e.dom.getParent(o.startContainer,"PRE");if(!l)return;if(!i(be.fromRangeStart(o))){const g=U.fromDom(EV(e));n===1?El(U.fromDom(l),g):Yr(U.fromDom(l),g),e.selection.select(g.dom,!0),e.selection.collapse()}}},GE=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return xV(o,e,r).orThunk(()=>(x6(e,o,r),O.none()))},kV=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return wV(o,e,r).orThunk(()=>(x6(e,o,r),O.none()))},TV=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return fO(o)?!n:n},w6=(e,n)=>GE(e,TV(e.selection,n)).exists(o=>(Od(e,o),!0)),E6=(e,n)=>kV(e,n).exists(o=>(Od(e,o),!0)),k6=(e,n)=>jM(e,n,n?Nf:Mf),Ny=(e,n)=>x0(e,!n).map(o=>{const r=o.toRange(),i=e.selection.getRng();return n?r.setStart(i.startContainer,i.startOffset):r.setEnd(i.endContainer,i.endOffset),r}).exists(o=>(Od(e,o),!0)),_V=e=>_t(["figcaption"],En(e)),AV=(e,n,o)=>{const r=Qe(sn,n);return cu(U.fromDom(e.container()),i=>o.isBlock(En(i)),r).filter(_V)},OV=(e,n,o)=>n?DE(e.dom,o):A0(e.dom,o),DV=(e,n)=>{const o=U.fromDom(e.getBody()),r=be.fromRangeStart(e.selection.getRng());return AV(r,o,e.schema).exists(()=>{if(OV(o,n,r)){const l=b6(e,o,n?rs:Ym);return e.selection.setRng(l),!0}else return!1})},T6=(e,n)=>e.selection.isCollapsed()?DV(e,n):!1,MV=(e,n,o)=>{const r=e.selection.getRng(),i=be.fromRangeStart(r);return e.getBody().firstChild===n&&A0(o,i)?(e.execCommand("InsertNewBlockBefore"),!0):!1},NV=(e,n)=>{const o=e.selection.getRng(),r=be.fromRangeStart(o);return e.getBody().lastChild===n&&DE(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},RV=(e,n)=>n?O.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>NV(e,o)).getOr(!1):O.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>O.from(e.dom.getParent(o,"details")).map(r=>MV(e,r,o))).getOr(!1),qE=(e,n)=>RV(e,n),_6={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},BV=e=>At(e,n=>({..._6,...n})),PV=e=>At(e,n=>({..._6,...n})),A6=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,LV=(e,n)=>Ls(BV(e),o=>A6(o,n)?[o]:[]),KE=(e,n)=>Ls(PV(e),o=>A6(o,n)?[o]:[]),Mt=(e,...n)=>()=>e.apply(null,n),O0=(e,n)=>ko(LV(e,n),o=>o.action()),O6=(e,n)=>pi(KE(e,n),o=>o.action()),D6=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return ZM(e,o,r,$1,Df,Ji).exists(i=>(Od(e,i),!0))},M6=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return WM(e,o,r,$1,Df,Ji).exists(i=>(Od(e,i),!0))},N6=(e,n)=>jM(e,n,n?Df:$1),IV=(e,n)=>R6(e,n,ze),R6=(e,n,o)=>Ls(ur(e),r=>Ga(r,n)?o(r)?[r]:[]:R6(r,n,o)),FV=(e,n,o=ke)=>{if(o(n))return O.none();if(_t(e,En(n)))return O.some(n);const r=i=>Ga(i,"table")||o(i);return zp(n,e.join(","),r)},$V=(e,n)=>FV(["td","th"],e,n),HV=e=>IV(e,"th,td"),B6=(e,n)=>Gd(e,"table",n),P6=cr.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),D0={...P6,none:e=>P6.none(e)},YE=(e,n,o,r,i=ze)=>{const l=r===1;if(!l&&o<=0)return D0.first(e[0]);if(l&&o>=e.length-1)return D0.last(e[e.length-1]);{const d=o+r,g=e[d];return i(g)?D0.middle(n,g):YE(e,n,d,r,i)}},L6=(e,n)=>B6(e,n).bind(o=>{const r=HV(o);return Ps(r,l=>sn(e,l)).map(l=>({index:l,all:r}))}),VV=(e,n,o)=>L6(e,o).fold(()=>D0.none(e),i=>YE(i.all,e,i.index,1,n)),zV=(e,n,o)=>L6(e,o).fold(()=>D0.none(),i=>YE(i.all,e,i.index,-1,n)),I6=ha("image"),UV=e=>{const n=e;return O.from(n[I6])},F6=(e,n)=>{const o=e;o[I6]=n},XE=ha("event"),ZV=e=>{const n=e;return O.from(n[XE])},M0=e=>n=>{const o=n;o[XE]=e},WV=(e,n)=>M0(n)(e),$6=M0(0),jV=M0(2),GV=M0(1),V6=(e=>n=>{const o=n;return O.from(o[XE]).exists(r=>r===e)})(0),eq=()=>Object.freeze({length:0,item:e=>null}),tg=ha("mode"),tq=e=>{const n=e;return O.from(n[tg])},JE=e=>n=>{const o=n;o[tg]=e},qV=(e,n)=>JE(n)(e),KV=JE(0),li=JE(2),N0=JE(1),ul=e=>n=>{const o=n;return O.from(o[tg]).exists(r=>r===e)},yc=ul(0),Ry=ul(1),z6=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(yc(e))if(re(o)){if(!mo(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{yc(e)&&n.remove(o)},clear:()=>{yc(e)&&n.clear()}}),R0=["none","copy","link","move"],YV=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],By=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(i){_t(R0,i)&&(n=i)},get effectAllowed(){return o},set effectAllowed(i){V6(r)&&_t(YV,i)&&(o=i)},get items(){return z6(r,e.items)},get files(){return Ry(r)?eq():e.files},get types(){return e.types},setDragImage:(i,l,d)=>{yc(r)&&(F6(r,{image:i,x:l,y:d}),e.setDragImage(i,l,d))},getData:i=>Ry(r)?"":e.getData(i),setData:(i,l)=>{yc(r)&&e.setData(i,l)},clearData:i=>{yc(r)&&e.clearData(i)}};return KV(r),r},nq=e=>{const n=By(),o=tq(e);return li(e),$6(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,UV(e).each(r=>n.setDragImage(r.image,r.x,r.y)),pe(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),pe(e.files,r=>n.items.add(r)),ZV(e).each(r=>{WV(n,r)}),o.each(r=>{qV(e,r),qV(n,r)}),n},XV=e=>{const n=e.getData("text/html");return n===""?O.none():O.some(n)},Qh=(e,n)=>e.setData("text/html",n),U6=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),Xo=(e,n)=>Ls(n,o=>{const r=U6(id(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),JV=(e,n,o)=>Ss(e,(r,i)=>r.fold(()=>O.some(i),l=>{const d=Math.sqrt(Math.abs(l.x-n)+Math.abs(l.y-o)),g=Math.sqrt(Math.abs(i.x-n)+Math.abs(i.y-o));return O.some(g<d?i:l)}),O.none()),Z6=(e,n,o,r,i)=>{const l=go(U.fromDom(o),"td,th,caption").map(g=>g.dom),d=et(Xo(e,l),g=>n(g,i));return JV(d,r,i).map(g=>g.cell)},ep=e=>e.bottom,ng=e=>e.top,og=(e,n)=>e.y<n,QV=(e,n)=>e.y>n,ez=Qe(Z6,ep,og),QE=Qe(Z6,ng,QV),e3=(e,n)=>Go(n.getClientRects()).bind(o=>ez(e,o.left,o.top)).bind(o=>Xh(NE(o),n)),W6=(e,n)=>pr(n.getClientRects()).bind(o=>QE(e,o.left,o.top)).bind(o=>Xh(ME(o),n)),j6=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),tz=e=>e.breakType===La.Wrap&&e.positions.length===0,nz=e=>e.breakType===La.Br&&e.positions.length===1,Py=(e,n,o)=>{const r=e(n,o);return tz(r)||!zo(o.getNode())&&nz(r)?!j6(e,n,r):r.breakAt.isNone()},oz=Qe(Py,_0),sz=Qe(Py,Nu),rz=(e,n,o)=>{const r=be.fromRangeStart(n);return yf(!e,o).exists(i=>i.isEqual(r))},az=(e,n,o,r)=>{const i=e.selection.getRng(),l=n?1:-1;return I_()&&rz(n,i,o)?(Td(l,e,o,!n,!1).each(d=>{Od(e,d)}),!0):!1},iz=(e,n,o)=>e3(n,o).orThunk(()=>Go(o.getClientRects()).bind(r=>Jf(LM(e,be.before(n)),r.left))).getOr(be.before(n)),t3=(e,n,o)=>W6(n,o).orThunk(()=>Go(o.getClientRects()).bind(r=>Jf(vc(e,be.after(n)),r.left))).getOr(be.after(n)),n3=(e,n)=>{const o=n.getNode(e);return du(o)?O.some(o):O.none()},cz=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?El:Yr,i=b6(n,U.fromDom(o),r);Od(n,i)})},G6=(e,n,o)=>{const r=n3(!!n,o),i=n===!1;r.fold(()=>Od(e,o.toRange()),l=>yf(i,e.getBody()).filter(d=>d.isEqual(o)).fold(()=>Od(e,o.toRange()),d=>cz(n,e,l)))},tp=(e,n,o,r)=>{const i=e.selection.getRng(),l=be.fromRangeStart(i),d=e.getBody();if(!n&&oz(r,l)){const g=iz(d,o,l);return G6(e,n,g),!0}else if(n&&sz(r,l)){const g=t3(d,o,l);return G6(e,n,g),!0}else return!1},o3=(e,n,o)=>O.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>O.from(e.dom.getParent(r,"table")).map(i=>o(e,n,i,r))).getOr(!1),q6=(e,n)=>o3(e,n,az),Ly=(e,n)=>o3(e,n,tp),lz=e=>{const n=Wg.exact(e,0,e,0);return LB(n)},s3=(e,n,o)=>o.fold(O.none,O.none,(r,i)=>wB(i).map(l=>lz(l)),r=>e.mode.isReadOnly()||!uz(r)?O.none():(e.execCommand("mceTableInsertRowAfter"),r3(e,n,r))),uz=e=>cu(e,Fs("table")).exists(Ju),r3=(e,n,o)=>s3(e,n,VV(o,a3)),K6=(e,n,o)=>s3(e,n,zV(o,a3)),a3=e=>Ju(e)||Ib(e,Y6),Y6=e=>eu(e)&&Ju(e),i3=(e,n)=>{const o=["table","li","dl"],r=U.fromDom(e.getBody()),i=g=>{const h=En(g);return sn(g,r)||_t(o,h)},l=e.selection.getRng(),d=U.fromDom(n?l.endContainer:l.startContainer);return $V(d,i).map(g=>(B6(g,i).each(w=>{e.model.table.clearSelectedCells(w.dom)}),e.selection.collapse(!n),(n?r3:K6)(e,i,g).each(w=>{e.selection.setRng(w)}),!0)).getOr(!1)},X6=(e,n,o)=>{const r=yn.os.isMacOS()||yn.os.isiOS();O0([{keyCode:Je.RIGHT,action:Mt(w6,e,!0)},{keyCode:Je.LEFT,action:Mt(w6,e,!1)},{keyCode:Je.UP,action:Mt(E6,e,!1)},{keyCode:Je.DOWN,action:Mt(E6,e,!0)},...r?[{keyCode:Je.UP,action:Mt(Ny,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Je.DOWN,action:Mt(Ny,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Je.RIGHT,action:Mt(q6,e,!0)},{keyCode:Je.LEFT,action:Mt(q6,e,!1)},{keyCode:Je.UP,action:Mt(Ly,e,!1)},{keyCode:Je.DOWN,action:Mt(Ly,e,!0)},{keyCode:Je.UP,action:Mt(Ly,e,!1)},{keyCode:Je.UP,action:Mt(qE,e,!1)},{keyCode:Je.DOWN,action:Mt(qE,e,!0)},{keyCode:Je.RIGHT,action:Mt(D6,e,!0)},{keyCode:Je.LEFT,action:Mt(D6,e,!1)},{keyCode:Je.UP,action:Mt(M6,e,!1)},{keyCode:Je.DOWN,action:Mt(M6,e,!0)},{keyCode:Je.RIGHT,action:Mt(YM,e,n,!0)},{keyCode:Je.LEFT,action:Mt(YM,e,n,!1)},{keyCode:Je.RIGHT,ctrlKey:!r,altKey:r,action:Mt(L9,e,n)},{keyCode:Je.LEFT,ctrlKey:!r,altKey:r,action:Mt(I9,e,n)},{keyCode:Je.UP,action:Mt(T6,e,!1)},{keyCode:Je.DOWN,action:Mt(T6,e,!0)}],o).each(i=>{o.preventDefault()})},dz=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||X6(e,n,o)})},Ll=(e,n)=>({container:e,offset:n}),Iy=Ln.DOM,np=e=>n=>e===n?-1:0,B0=e=>n=>e.isBlock(n)||_t(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",sg=(e,n,o)=>{if(Re(e)&&n>=0)return O.some(Ll(e,n));{const r=bu(Iy);return O.from(r.backwards(e,n,np(e),o)).map(i=>Ll(i.container,i.container.data.length))}},c3=(e,n,o)=>{if(Re(e)&&n>=e.length)return O.some(Ll(e,n));{const r=bu(Iy);return O.from(r.forwards(e,n,np(e),o)).map(i=>Ll(i.container,0))}},Fy=(e,n,o)=>{if(!Re(e))return O.none();const r=e.data;if(n>=0&&n<=r.length)return O.some(Ll(e,n));{const i=bu(Iy);return O.from(i.backwards(e,n,np(e),o)).bind(l=>{const d=l.container.data;return Fy(l.container,n+d.length,o)})}},l3=(e,n,o)=>{if(!Re(e))return O.none();const r=e.data;if(n<=r.length)return O.some(Ll(e,n));{const i=bu(Iy);return O.from(i.forwards(e,n,np(e),o)).bind(l=>l3(l.container,n-r.length,o))}},op=(e,n,o,r,i)=>{const l=bu(e,B0(e));return O.from(l.backwards(n,o,r,i))},mz=e=>e.collapsed&&Re(e.startContainer),fz=e=>Qa(e.toString().replace(/\u00A0/g," ")),Am=e=>e!==""&&` ¬†\uFEFF\f
\r	\v`.indexOf(e)!==-1,u3=(e,n)=>e.substring(n.length),J6=(e,n,o,r=!1)=>{let i;const l=o.charAt(0);for(i=n-1;i>=0;i--){const d=e.charAt(i);if(!r&&Am(d))return O.none();if(l===d&&fs(e,o,i,n))break}return O.some(i)},rg=(e,n,o,r=!1)=>{if(!mz(n))return O.none();const i={text:"",offset:0},l=(g,h,y)=>(i.text=y+i.text,i.offset+=h,J6(i.text,i.offset,o,r).getOr(h)),d=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return op(e,n.startContainer,n.startOffset,l,d).bind(g=>{const h=n.cloneRange();if(h.setStart(g.container,g.offset),h.setEnd(n.endContainer,n.endOffset),h.collapsed)return O.none();const y=fz(h);return y.lastIndexOf(o)!==0?O.none():O.some({text:u3(y,o),range:h,trigger:o})})},Q6=e=>e.nodeType===qu,d3=e=>e.nodeType===Nr,m3=e=>{if(Q6(e))return Ll(e,e.data.length);{const n=e.childNodes;return n.length>0?m3(n[n.length-1]):Ll(e,n.length)}},f3=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?f3(o[n],0):o.length>0&&d3(e)&&o.length===n?m3(o[o.length-1]):Ll(e,n)},gz=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return op(e,n.container,n.offset,(i,l)=>l===0?-1:l,r).filter(i=>{const l=i.container.data.charAt(i.offset-1);return!Am(l)}).isSome()},eN=e=>n=>{const o=f3(n.startContainer,n.startOffset);return!gz(e,o)},hz=(e,n,o)=>pi(o.triggers,r=>rg(e,n,r)),pz=(e,n)=>{const o=n(),r=e.selection.getRng();return hz(e.dom,r,o).bind(i=>tN(e,n,i))},tN=(e,n,o,r={})=>{var i;const l=n(),g=(i=e.selection.getRng().startContainer.nodeValue)!==null&&i!==void 0?i:"",h=et(l.lookupByTrigger(o.trigger),w=>o.text.length>=w.minChars&&w.matches.getOrThunk(()=>eN(e.dom))(o.range,g,o.text));if(h.length===0)return O.none();const y=Promise.all(At(h,w=>w.fetch(o.text,w.maxResults,r).then(_=>({matchText:o.text,items:_,columns:w.columns,onAction:w.onAction,highlightOn:w.highlightOn}))));return O.some({lookupData:y,context:o})};var Il;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Il||(Il={}));const P0=(e,n,o)=>e.stype===Il.Error?n(e.serror):o(e.svalue),bz=e=>{const n=[],o=[];return pe(e,r=>{P0(r,i=>o.push(i),i=>n.push(i))}),{values:n,errors:o}},nN=(e,n)=>e.stype===Il.Error?{stype:Il.Error,serror:n(e.serror)}:e,vz=(e,n)=>e.stype===Il.Value?{stype:Il.Value,svalue:n(e.svalue)}:e,yz=(e,n)=>e.stype===Il.Value?n(e.svalue):e,Cz=(e,n)=>e.stype===Il.Error?n(e.serror):e,oN=e=>({stype:Il.Value,svalue:e}),sN=e=>({stype:Il.Error,serror:e}),sa={fromResult:e=>e.fold(sN,oN),toResult:e=>P0(e,Ks.error,Ks.value),svalue:oN,partition:bz,serror:sN,bind:yz,bindError:Cz,map:vz,mapError:nN,fold:P0},rN=e=>Pt(e)&&ws(e).length>100?" removed due to size":JSON.stringify(e,null,2),Sz=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:qe("... (only showing first ten failures)")}]):e;return At(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},aN=(e,n)=>sa.serror([{path:e,getErrorInfo:n}]),iN=(e,n,o)=>aN(e,()=>'Could not find valid *required* value for "'+n+'" in '+rN(o)),xz=(e,n)=>aN(e,qe(n)),L0=e=>{const n=(r,i)=>sa.bindError(e(i),l=>xz(r,l)),o=qe("val");return{extract:n,toString:o}},ra=L0(sa.svalue),wz=qe(ra),sp=(e,n)=>L0(o=>{const r=typeof o;return e(o)?sa.svalue(o):sa.serror(`Expected type: ${n} but got: ${r}`)}),ag=sp(No,"number"),g3=sp(re,"string"),Ia=sp(jt,"function"),ig=()=>({tag:"required",process:{}}),cN=e=>({tag:"defaultedThunk",process:e}),lN=e=>cN(qe(e)),uN=()=>({tag:"option",process:{}}),Ez=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),h3=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},p3=(e,n)=>e.length>0?sa.svalue(Es(n,Oc.apply(void 0,e))):sa.svalue(n),$y=e=>S(sa.serror,fa)(e),dN={consolidateObj:(e,n)=>{const o=sa.partition(e);return o.errors.length>0?$y(o.errors):p3(o.values,n)},consolidateArr:e=>{const n=sa.partition(e);return n.errors.length>0?$y(n.errors):sa.svalue(n.values)}},Fl=(e,n,o,r)=>oo(n,o).fold(()=>iN(e,o,n),r),Hy=(e,n,o,r)=>{const i=oo(e,n).getOrThunk(()=>o(e));return r(i)},kz=(e,n,o)=>o(oo(e,n)),Vy=(e,n,o,r)=>{const i=oo(e,n).map(l=>l===!0?o(e):l);return r(i)},b3=(e,n,o,r,i)=>{const l=g=>i.extract(n.concat([r]),g),d=g=>g.fold(()=>sa.svalue(O.none()),h=>{const y=i.extract(n.concat([r]),h);return sa.map(y,O.some)});switch(e.tag){case"required":return Fl(n,o,r,l);case"defaultedThunk":return Hy(o,r,e.process,l);case"option":return kz(o,r,d);case"defaultedOptionThunk":return Vy(o,r,e.process,d);case"mergeWithThunk":return Hy(o,r,qe({}),g=>{const h=Es(e.process(o),g);return l(h)})}},mN=(e,n,o)=>{const r={},i=[];for(const l of o)h3(l,(d,g,h,y)=>{const w=b3(h,e,n,d,y);sa.fold(w,T=>{i.push(...T)},T=>{r[g]=T})},(d,g)=>{r[d]=g(n)});return i.length>0?sa.serror(i):sa.svalue(r)},fN=e=>({extract:(r,i)=>mN(r,i,e),toString:()=>`obj{
`+At(e,i=>h3(i,(l,d,g,h)=>l+" -> "+h.toString(),(l,d)=>"state("+l+")")).join(`
`)+"}"}),gN=e=>({extract:(r,i)=>{const l=At(i,(d,g)=>e.extract(r.concat(["["+g+"]"]),d));return dN.consolidateArr(l)},toString:()=>"array("+e.toString()+")"}),Tz=(e,n,o)=>{const r=n.extract([e],o);return sa.mapError(r,i=>({input:o,errors:i}))},_z=(e,n,o)=>sa.toResult(Tz(e,n,o)),Az=e=>`Errors: 
`+Sz(e.errors).join(`
`)+`

Input object: `+rN(e.input),zy=Ez,hN=(e,n)=>zy(e,e,ig(),n),v3=e=>hN(e,g3),pN=e=>hN(e,Ia),Oz=(e,n)=>zy(e,e,uN(),n),Dz=e=>Oz(e,Ia),bN=(e,n)=>zy(e,e,lN(n),wz()),Uy=(e,n,o)=>zy(e,e,lN(n),o),Zy=(e,n)=>Uy(e,n,ag),vN=(e,n,o)=>Uy(e,n,gN(o)),y3=v3("type"),yN=pN("fetch"),CN=pN("onAction"),C3=e=>bN("columns",e),SN=fN([y3,v3("trigger"),Zy("minChars",1),C3(1),Zy("maxResults",10),Dz("matches"),yN,CN,vN("highlightOn",[],g3)]),xN=e=>_z("Autocompleter",SN,e),wN=()=>{const e={},n={},o={},r={},i={},l={},d={},g={},h={},y=(N,P)=>(B,F)=>{N[B.toLowerCase()]={...F,type:P}},w=(N,P)=>(B,F)=>{N[B.toLowerCase()]={type:P,...F}},T=(N,P)=>r[N.toLowerCase()]=P,_=(N,P)=>d[N.toLowerCase()]=P;return{addButton:y(e,"button"),addGroupToolbarButton:y(e,"grouptoolbarbutton"),addToggleButton:y(e,"togglebutton"),addMenuButton:y(e,"menubutton"),addSplitButton:y(e,"splitbutton"),addMenuItem:y(n,"menuitem"),addNestedMenuItem:y(n,"nestedmenuitem"),addToggleMenuItem:y(n,"togglemenuitem"),addAutocompleter:y(o,"autocompleter"),addContextMenu:y(i,"contextmenu"),addContextToolbar:y(l,"contexttoolbar"),addContextForm:w(l,"contextform"),addSidebar:y(g,"sidebar"),addView:y(h,"views"),addIcon:T,addContext:_,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:i,contextToolbars:l,sidebars:g,views:h,contexts:d})}},Mz=e=>{const n=e.ui.registry.getAll().popups,o=Yt(n,d=>xN(d).fold(g=>{throw new Error(Az(g))},ds)),r=vi($u(o,d=>d.trigger)),i=Hu(o);return{dataset:o,triggers:r,lookupByTrigger:d=>et(i,g=>g.trigger===d)}},Nz=(e,n)=>{const o=_o(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const i=r.which;i===8?o.throttle():i===27?(o.cancel(),n.cancelIfNecessary()):(i===38||i===40)&&o.cancel()},!0),e.on("remove",o.cancel)},Wy=e=>{const n=br(),o=To(!1),r=n.isSet,i=()=>{r()&&(PP(e),o.set(!1),n.clear())},l=T=>{r()||n.set({trigger:T.trigger,matchLength:T.text.length})},d=io(()=>Mz(e)),g=T=>n.get().map(_=>rg(e.dom,e.selection.getRng(),_.trigger,!0).bind(N=>tN(e,d,N,T))).getOrThunk(()=>pz(e,d)),h=T=>{g(T).fold(i,_=>{l(_.context),_.lookupData.then(N=>{n.get().map(P=>{const B=_.context;P.trigger===B.trigger&&(n.set({...P,matchLength:B.text.length}),o.get()?(ux(e,{range:B.range}),Jc(e,{lookupData:N})):(o.set(!0),ux(e,{range:B.range}),md(e,{lookupData:N})))})})})},y=(T,_)=>{const N=T.compareBoundaryPoints(window.Range.START_TO_START,_),P=T.compareBoundaryPoints(window.Range.END_TO_END,_);return N>=0&&P<=0},w=()=>n.get().bind(({trigger:T})=>{const _=e.selection.getRng();return rg(e.dom,_,T,o.get()).filter(({range:N})=>y(_,N)).map(({range:N})=>N)});e.addCommand("mceAutocompleterReload",(T,_)=>{const N=Pt(_)?_.fetchOptions:{};h(N)}),e.addCommand("mceAutocompleterClose",i),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{w().each(T=>{ux(e,{range:T})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>w().isSome()),Nz(e,{cancelIfNecessary:i,load:h})},I0=Mr().browser.isSafari(),EN=e=>om(U.fromDom(e)),kN=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},jy=(e,n)=>O.from(e.getParent(n.container(),"details")),TN=(e,n)=>jy(e,n).isSome(),_N=(e,n)=>{const o=O.from(e.getParent(n.startContainer,"details")),r=O.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const i=o.bind(l=>O.from(e.select("summary",l)[0]));return O.some({startSummary:i,startDetails:o,endDetails:r})}else return O.none()},AN=(e,n)=>Ar(n).exists(o=>o.isEqual(e)),Rz=(e,n)=>ti(n).exists(o=>zo(o.getNode())&&Ba(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),Bz=(e,n)=>n.startSummary.exists(o=>AN(e,o)),Pz=(e,n)=>n.startSummary.exists(o=>Rz(e,o)),Lz=(e,n)=>n.startDetails.exists(o=>Ba(o,e).forall(r=>n.startSummary.exists(i=>!i.contains(e.container())&&i.contains(r.container())))),Iz=(e,n,o)=>o.startDetails.exists(r=>Ms(e,n).forall(i=>!r.contains(i.container()))),S3=(e,n)=>{const o=n.getNode();mo(o)||e.selection.setCursorLocation(o,n.offset())},Fz=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const i=e.dom.select("summary",r)[0];i&&(o?Ar(i):ti(i)).each(d=>S3(e,d))}else S3(e,n)},$z=(e,n)=>{const o=h=>h.contains(e.startContainer),r=h=>h.contains(e.endContainer),i=n.startSummary.exists(o),l=n.startSummary.exists(r),d=n.startDetails.forall(h=>n.endDetails.forall(y=>h!==y));return(i||l)&&!(i&&l)||d},ON=(e,n,o)=>{const{dom:r,selection:i}=e,l=e.getBody();if(o==="character"){const d=be.fromRangeStart(i.getRng()),g=r.getParent(d.container(),r.isBlock),h=jy(r,d),y=g&&r.isEmpty(g),w=ee(g==null?void 0:g.previousSibling),T=ee(g==null?void 0:g.nextSibling);return y&&(n?T:w)&&el(!n,l,d).exists(P=>TN(r,P)&&!Ue(h,jy(r,P)))?!0:el(n,l,d).fold(ke,_=>{const N=jy(r,_);if(TN(r,_)&&!Ue(h,N)){if(n||Fz(e,_,!1),g&&y){if(n&&w)return!0;if(!n&&T)return!0;Fz(e,_,n),e.dom.remove(g)}return!0}else return!1})}else return!1},Hz=(e,n,o,r)=>{const l=e.selection.getRng(),d=be.fromRangeStart(l),g=e.getBody();return r==="selection"?$z(l,n):o?Pz(d,n)||Iz(g,d,n):Bz(d,n)||Lz(d,n)},Vz=(e,n,o)=>_N(e.dom,e.selection.getRng()).fold(()=>ON(e,n,o),r=>Hz(e,r,n,o)||ON(e,n,o)),zz=(e,n,o)=>{const r=e.selection,i=r.getNode(),l=r.getRng(),d=be.fromRangeStart(l);return jb(i)?(o==="selection"&&kN(l,i)||_w(n,d,i)?EN(i):e.undoManager.transact(()=>{const g=r.getSel();let{anchorNode:h,anchorOffset:y,focusNode:w,focusOffset:T}=g??{};const _=()=>{Oe(h)&&Oe(y)&&Oe(w)&&Oe(T)&&(g==null||g.setBaseAndExtent(h,y,w,T))},N=()=>{h=g==null?void 0:g.anchorNode,y=g==null?void 0:g.anchorOffset,w=g==null?void 0:g.focusNode,T=g==null?void 0:g.focusOffset},P=(F,W)=>{pe(F.childNodes,Q=>{xf(Q)&&W.appendChild(Q)})},B=e.dom.create("span",{"data-mce-bogus":"1"});P(i,B),i.appendChild(B),_(),(o==="word"||o==="line")&&(g==null||g.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&kN(r.getRng(),B)?EN(i):(e.execCommand(n?"ForwardDelete":"Delete"),N(),P(B,i),_()),e.dom.remove(B)}),!0):!1},cg=(e,n,o)=>Vz(e,n,o)||I0&&zz(e,n,o)?O.some(ct):O.none(),DN=e=>(n,o,r={})=>{const i=n.getBody(),l={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:i,currentTarget:i,eventPhase:Event.AT_TARGET,originalTarget:i,explicitOriginalTarget:i,isTrusted:!1,srcElement:i,cancelable:!1,preventDefault:ct,inputType:o},d=Yg(new InputEvent(e));return n.dispatch(e,{...d,...l,...r})},rp=DN("input"),Gy=DN("beforeinput"),MN=Mr(),NN=MN.os,RN=NN.isMacOS()||NN.isiOS(),Uz=MN.browser.isFirefox(),Zz=(e,n,o)=>{const r=o.keyCode===Je.BACKSPACE?"deleteContentBackward":"deleteContentForward",i=e.selection.isCollapsed(),l=i?"character":"selection",d=g=>i?g?"word":"line":"selection";O6([{keyCode:Je.BACKSPACE,action:Mt(m6,e)},{keyCode:Je.BACKSPACE,action:Mt(vy,e,!1)},{keyCode:Je.DELETE,action:Mt(vy,e,!0)},{keyCode:Je.BACKSPACE,action:Mt(Gh,e,!1)},{keyCode:Je.DELETE,action:Mt(Gh,e,!0)},{keyCode:Je.BACKSPACE,action:Mt(FE,e,n,!1)},{keyCode:Je.DELETE,action:Mt(FE,e,n,!0)},{keyCode:Je.BACKSPACE,action:Mt(k2,e,!1)},{keyCode:Je.DELETE,action:Mt(k2,e,!0)},{keyCode:Je.BACKSPACE,action:Mt(cg,e,!1,l)},{keyCode:Je.DELETE,action:Mt(cg,e,!0,l)},...RN?[{keyCode:Je.BACKSPACE,altKey:!0,action:Mt(cg,e,!1,d(!0))},{keyCode:Je.DELETE,altKey:!0,action:Mt(cg,e,!0,d(!0))},{keyCode:Je.BACKSPACE,metaKey:!0,action:Mt(cg,e,!1,d(!1))}]:[{keyCode:Je.BACKSPACE,ctrlKey:!0,action:Mt(cg,e,!1,d(!0))},{keyCode:Je.DELETE,ctrlKey:!0,action:Mt(cg,e,!0,d(!0))}],{keyCode:Je.BACKSPACE,action:Mt(Sy,e,!1)},{keyCode:Je.DELETE,action:Mt(Sy,e,!0)},{keyCode:Je.BACKSPACE,action:Mt(VE,e,!1)},{keyCode:Je.DELETE,action:Mt(VE,e,!0)},{keyCode:Je.BACKSPACE,action:Mt(Pa,e,!1)},{keyCode:Je.DELETE,action:Mt(Pa,e,!0)},{keyCode:Je.BACKSPACE,action:Mt(S0,e,!1)},{keyCode:Je.DELETE,action:Mt(S0,e,!0)},{keyCode:Je.BACKSPACE,action:Mt(HE,e,!1)},{keyCode:Je.DELETE,action:Mt(HE,e,!0)},{keyCode:Je.BACKSPACE,action:Mt(xE,e,!1)},{keyCode:Je.DELETE,action:Mt(xE,e,!0)}],o).filter(g=>e.selection.isEditable()).each(g=>{o.preventDefault(),Gy(e,r).isDefaultPrevented()||(g(),rp(e,r))})},Wz=(e,n,o)=>O0([{keyCode:Je.BACKSPACE,action:Mt(AM,e)},{keyCode:Je.DELETE,action:Mt(AM,e)},...RN?[{keyCode:Je.BACKSPACE,altKey:!0,action:Mt(Ty,e)},{keyCode:Je.DELETE,altKey:!0,action:Mt(Ty,e)},...o?[{keyCode:Uz?224:91,action:Mt(Ty,e)}]:[]]:[{keyCode:Je.BACKSPACE,ctrlKey:!0,action:Mt(Ty,e)},{keyCode:Je.DELETE,ctrlKey:!0,action:Mt(Ty,e)}]],n),jz=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===Je.BACKSPACE,r.isDefaultPrevented()||Zz(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||Wz(e,r,o),o=!1})},Gz=e=>{for(;e;){if(ot(e)||Re(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},lg=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const l=Gz(n.firstChild);l&&/^(UL|OL|DL)$/.test(l.nodeName)&&n.insertBefore(o.doc.createTextNode(to),n.firstChild)}const i=o.createRng();if(n.normalize(),n.hasChildNodes()){const l=new dr(n,n);let d=n,g;for(;g=l.current();){if(Re(g)){i.setStart(g,0),i.setEnd(g,0);break}if(r[g.nodeName.toLowerCase()]){i.setStartBefore(g),i.setEndBefore(g);break}d=g,g=l.next()}g||(i.setStart(d,0),i.setEnd(d,0))}else zo(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)):(i.setStart(n,0),i.setEnd(n,0));e.selection.setRng(i),Af(e,i)},F0=(e,n)=>{const o=e.getRoot();let r,i=n;for(;i!==o&&i&&e.getContentEditable(i)!=="false";){if(e.getContentEditable(i)==="true"){r=i;break}i=i.parentNode}return i!==o?r:o},x3=e=>O.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),qz=e=>x3(e).fold(qe(""),n=>n.nodeName.toUpperCase()),qy=e=>x3(e).filter(n=>sd(U.fromDom(n))).isSome(),w3=e=>{e.innerHTML='<br data-mce-bogus="1">'},Kz=(e,n,o)=>{const r=e.dom;O.from(o.style).map(r.parseStyle).each(h=>{const w={...sS(U.fromDom(n)),...h};r.setStyles(n,w)});const i=O.from(o.class).map(h=>h.split(/\s+/)),l=O.from(n.className).map(h=>et(h.split(/\s+/),y=>y!==""));os(i,l,(h,y)=>{const w=et(y,_=>!_t(h,_)),T=[...h,...w];r.setAttrib(n,"class",T.join(" "))});const d=["style","class"],g=Wr(o,(h,y)=>!_t(d,y));r.setAttribs(n,g)},ap=(e,n)=>{if(ta(e).toLowerCase()===n.tagName.toLowerCase()){const r=g1(e);Kz(e,n,r)}},Ky=(e,n,o,r,i=!0,l,d)=>{const g=e.dom,h=e.schema,y=ta(e),w=o?o.nodeName.toUpperCase():"";let T=n;const _=h.getTextInlineElements();let N;l||w==="TABLE"||w==="HR"?N=g.create(l||y,d||{}):N=o.cloneNode(!1);let P=N;if(!i)g.setAttrib(N,"style",null),g.setAttrib(N,"class",null);else do if(_[T.nodeName]){if(rc(T)||ac(T))continue;const B=T.cloneNode(!1);g.setAttrib(B,"id",""),N.hasChildNodes()?(B.appendChild(N.firstChild),N.appendChild(B)):(P=B,N.appendChild(B))}while((T=T.parentNode)&&T!==r);return ap(e,N),w3(P),N},Yz=(e,n)=>e.dom.getParent(n,hs),Xz=(e,n,o)=>{let r=n;for(;r&&r!==e&&ee(r.nextSibling);){const i=r.parentElement;if(!i||!o(i))return hs(i);r=i}return!1},lq=(e,n,o)=>!n&&o.nodeName.toLowerCase()===ta(e)&&e.dom.isEmpty(o)&&Xz(e.getBody(),o,r=>xt(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),Jz=(e,n,o)=>{var r,i,l;const d=n(ta(e)),g=Yz(e,o);g&&(e.dom.insertAfter(d,g),lg(e,d),((l=(i=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||i===void 0?void 0:i.length)!==null&&l!==void 0?l:0)>1&&e.dom.remove(o))},Qz=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,eU=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},ip=(e,n)=>{const o=e==null?void 0:e.parentNode;return Oe(o)&&o.nodeName===n},BN=e=>Oe(e)&&/^(OL|UL|LI)$/.test(e.nodeName),E3=e=>Oe(e)&&/^(LI|DT|DD)$/.test(e.nodeName),tU=e=>BN(e)&&BN(e.parentNode),$0=e=>{const n=e.parentNode;return E3(n)?n:e},$l=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!ot(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},ka=e=>Ss($u(sS(U.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),PN=(e,n,o,r,i)=>{const l=e.dom,d=e.selection.getRng(),g=o.parentNode;if(o===e.getBody()||!g)return;tU(o)&&(i="LI");const h=E3(r)?ka(r):void 0;let y=E3(r)&&h?n(i,{style:ka(r)}):n(i);if($l(o,r,!0)&&$l(o,r,!1))if(ip(o,"LI")){const w=$0(o);l.insertAfter(y,w),eU(o)?l.remove(w):l.remove(o)}else l.replace(y,o);else if($l(o,r,!0))ip(o,"LI")?(l.insertAfter(y,$0(o)),y.appendChild(l.doc.createTextNode(" ")),y.appendChild(o)):g.insertBefore(y,o),l.remove(r);else if($l(o,r,!1))l.insertAfter(y,$0(o)),l.remove(r);else{o=$0(o);const w=d.cloneRange();w.setStartAfter(r),w.setEndAfter(o);const T=w.extractContents();if(i==="LI"&&Qz(T,"LI")){const _=et(At(y.children,U.fromDom),jn(Fs("br")));y=T.firstChild,l.insertAfter(T,o),pe(_,N=>Ym(U.fromDom(y),N)),h&&y.setAttribute("style",h)}else l.insertAfter(T,o),l.insertAfter(y,o);l.remove(r)}lg(e,y)},H0=e=>{pe(mS(U.fromDom(e),Kr),n=>{const o=n.dom;o.nodeValue=Qa(o.data)})},Om=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},Ru=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),ug=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,k3=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,V0=(e,n)=>Oe(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",LN=(e,n,o)=>{var r;const i=[];if(!o)return;let l=o;for(;l=l.firstChild;){if(e.isBlock(l))return;ot(l)&&!n[l.nodeName.toLowerCase()]&&i.push(l)}let d=i.length;for(;d--;)l=i[d],(!l.hasChildNodes()||l.firstChild===l.lastChild&&((r=l.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||Ru(e,l))&&e.remove(l)},Yy=(e,n,o)=>Re(n)?e?o===1&&n.data.charAt(o-1)===Xs?0:o:o===n.data.length-1&&n.data.charAt(o)===Xs?n.data.length:o:o,nU=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,Yy(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,Yy(!1,e.endContainer,e.endOffset)),n},oU=e=>{let n=e;do Re(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},IN=(e,n,o,r,i)=>{var l,d;const g=e.dom,h=(l=F0(g,r))!==null&&l!==void 0?l:g.getRoot();let y=g.getParent(r,g.isBlock);if(!y||!V0(g,y)){if(y=y||h,!y.hasChildNodes()){const N=g.create(n);return ap(e,N),y.appendChild(N),o.setStart(N,0),o.setEnd(N,0),N}let w=r;for(;w&&w.parentNode!==y;)w=w.parentNode;let T;for(;w&&!g.isBlock(w);)T=w,w=w.previousSibling;const _=(d=T==null?void 0:T.parentElement)===null||d===void 0?void 0:d.nodeName;if(T&&_&&e.schema.isValidChild(_,n.toLowerCase())){const N=T.parentNode,P=g.create(n);for(ap(e,P),N.insertBefore(P,T),w=T;w&&!g.isBlock(w);){const B=w.nextSibling;P.appendChild(w),w=B}o.setStart(r,i),o.setEnd(r,i)}}return r},FN=(e,n)=>{n.normalize();const o=n.lastChild;(!o||ot(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},$N=(e,n)=>{const o=Mv(e);return hn(n)?!1:re(o)?_t(Pe.explode(o),n.nodeName.toLowerCase()):o},sU={insert:(e,n)=>{let o,r,i,l,d=!1;const g=e.dom,h=e.schema,y=h.getNonEmptyElements(),w=e.selection.getRng(),T=ta(e),_=U.fromDom(w.startContainer),N=ru(_,w.startOffset),P=N.exists(Ee=>eu(Ee)&&!Ju(Ee)),B=w.collapsed&&P,F=(Ee,Ge)=>Ky(e,o,De,Se,yu(e),Ee,Ge),W=Ee=>{const Ge=Yy(Ee,o,r);if(Re(o)&&(Ee?Ge>0:Ge<o.data.length))return!1;if((o.parentNode===De||o===De)&&d&&!Ee||Ee&&ot(o)&&o===De.firstChild)return!0;if(ug(o,"TABLE")||ug(o,"HR"))return k3(o,"BR")?!Ee:d&&!Ee||!d&&Ee;const lt=new dr(o,De);Re(o)&&(Ee&&Ge===0?lt.prev():!Ee&&Ge===o.data.length&&lt.next());let Gt;for(;Gt=lt.current();){if(ot(Gt)){if(!Gt.getAttribute("data-mce-bogus")){const Kt=Gt.nodeName.toLowerCase();if(y[Kt]&&Kt!=="br")return!1}}else if(Re(Gt)&&!as(Gt.data))return!1;Ee?lt.prev():lt.next()}return!0},Q=()=>{let Ee;return/^(H[1-6]|PRE|FIGURE)$/.test(i)&&Ke!=="HGROUP"?Ee=F(T):Ee=F(),$N(e,l)&&V0(g,l)&&g.isEmpty(De,void 0,{includeZwsp:!0})?Ee=g.split(l,De):g.insertAfter(Ee,De),lg(e,Ee),Ee};i2(g,w).each(Ee=>{w.setStart(Ee.startContainer,Ee.startOffset),w.setEnd(Ee.endContainer,Ee.endOffset)}),o=w.startContainer,r=w.startOffset;const te=!!(n&&n.shiftKey),ae=!!(n&&n.ctrlKey);ot(o)&&o.hasChildNodes()&&!B&&(d=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,d&&Re(o)?r=o.data.length:r=0);const Se=F0(g,o);if(!Se||Om(e,o))return;te||(o=IN(e,T,w,o,r));let De=g.getParent(o,g.isBlock)||g.getRoot();l=Oe(De==null?void 0:De.parentNode)?g.getParent(De.parentNode,g.isBlock):null,i=De?De.nodeName.toUpperCase():"";const Ke=l?l.nodeName.toUpperCase():"";if(Ke==="LI"&&!ae){const Ee=l;De=Ee,l=Ee.parentNode,i=Ke}if(ot(l)&&lq(e,te,De))return Jz(e,F,De);if(/^(LI|DT|DD)$/.test(i)&&ot(l)&&g.isEmpty(De)){PN(e,F,l,De,T);return}if(!B&&(De===e.getBody()||!V0(g,De)))return;const ge=De.parentNode;let le;if(B)le=F(T),N.fold(()=>{rs(_,U.fromDom(le))},Ee=>{Yr(Ee,U.fromDom(le))}),e.selection.setCursorLocation(le,0);else if(Os(De))le=dv(De),g.isEmpty(De)&&w3(De),ap(e,le),lg(e,le);else if(W(!1))le=Q();else if(W(!0)&&ge){const Ee=be.fromRangeStart(w),Ge=jA(Ee),lt=U.fromDom(De),Kt=g2(lt,Ee,e.schema)?XA(lt,Ee,e.schema).bind(In=>O.from(In.getNode())):O.none();le=ge.insertBefore(F(),De);const _n=ug(De,"HR")||Ge?le:Kt.getOr(De);lg(e,_n)}else{const Ee=nU(w).cloneRange();Ee.setEndAfter(De);const Ge=Ee.extractContents();H0(Ge),oU(Ge),le=Ge.firstChild,g.insertAfter(Ge,De),LN(g,y,le),FN(g,De),g.isEmpty(De)&&w3(De),le.normalize(),g.isEmpty(le)?(g.remove(le),Q()):(ap(e,le),lg(e,le))}g.setAttrib(le,"id",""),e.dispatch("NewBlock",{newBlock:le})},fakeEventName:"insertParagraph"},dq=(e,n,o)=>{const r=new dr(n,o);let i;const l=e.getNonEmptyElements();for(;i=r.next();)if(l[i.nodeName.toLowerCase()]||Re(i)&&i.length>0)return!0;return!1},Cc=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),Af(e,r)},rU=(e,n)=>{const o=e.selection,r=e.dom,i=o.getRng();let l,d=!1;i2(r,i).each(N=>{i.setStart(N.startContainer,N.startOffset),i.setEnd(N.endContainer,N.endOffset)});let g=i.startOffset,h=i.startContainer;if(ot(h)&&h.hasChildNodes()){const N=g>h.childNodes.length-1;h=h.childNodes[Math.min(g,h.childNodes.length-1)]||h,N&&Re(h)?g=h.data.length:g=0}let y=r.getParent(h,r.isBlock);const w=y&&y.parentNode?r.getParent(y.parentNode,r.isBlock):null,T=w?w.nodeName.toUpperCase():"",_=!!(n&&n.ctrlKey);T==="LI"&&!_&&(y=w),Re(h)&&g>=h.data.length&&(dq(e.schema,h,y||r.getRoot())||(l=r.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),d=!0)),l=r.create("br"),vu(r,i,l),Cc(e,l,d),e.undoManager.add()},aU=(e,n)=>{const o=U.fromTag("br");Yr(U.fromDom(n),o),e.undoManager.add()},dg=(e,n)=>{iU(e.getBody(),n)||El(U.fromDom(n),U.fromTag("br"));const o=U.fromTag("br");El(U.fromDom(n),o),Cc(e,o.dom,!1),e.undoManager.add()},HN=e=>zo(e.getNode()),iU=(e,n)=>HN(be.after(n))?!0:Ms(e,be.after(n)).map(o=>zo(o.getNode())).getOr(!1),z0=e=>e&&e.nodeName==="A"&&"href"in e,T3=e=>e.fold(ke,z0,z0,ke),VN=e=>{const n=Qe(Bf,e),o=be.fromRangeStart(e.selection.getRng());return Mu(n,e.getBody(),o).filter(T3)},zN=(e,n)=>{n.fold(ct,Qe(aU,e),Qe(dg,e),ct)},_3={insert:(e,n)=>{const o=VN(e);o.isSome()?o.each(Qe(zN,e)):rU(e,n)},fakeEventName:"insertLineBreak"},A3=(e,n)=>x3(e).filter(o=>n.length>0&&Ga(U.fromDom(o),n)).isSome(),O3=e=>A3(e,ZP(e)),lU=e=>A3(e,fd(e)),Bi=cr.generate([{br:[]},{block:[]},{none:[]}]),uU=(e,n)=>lU(e),UN=e=>(n,o)=>qy(n)===e,ZN=(e,n)=>(o,r)=>qz(o)===e.toUpperCase()===n,dU=e=>{const n=F0(e.dom,e.selection.getStart());return hn(n)},U0=e=>ZN("pre",e),mU=()=>ZN("summary",!0),Z0=e=>(n,o)=>uG(n)===e,fU=(e,n)=>O3(e),dl=(e,n)=>n,D3=e=>{const n=ta(e),o=F0(e.dom,e.selection.getStart());return Oe(o)&&e.schema.isValidChild(o.nodeName,n)},gU=e=>{const n=e.selection.getRng(),o=U.fromDom(n.startContainer),i=ru(o,n.startOffset).map(l=>eu(l)&&!Ju(l));return n.collapsed&&i.getOr(!0)},Sc=(e,n)=>(o,r)=>Ss(e,(l,d)=>l&&d(o,r),!0)?O.some(n):O.none(),hU=(e,n)=>NM([Sc([uU],Bi.none()),Sc([U0(!0),dU],Bi.none()),Sc([mU()],Bi.br()),Sc([U0(!0),Z0(!1),dl],Bi.br()),Sc([U0(!0),Z0(!1)],Bi.block()),Sc([U0(!0),Z0(!0),dl],Bi.block()),Sc([U0(!0),Z0(!0)],Bi.br()),Sc([UN(!0),dl],Bi.br()),Sc([UN(!0)],Bi.block()),Sc([fU],Bi.br()),Sc([dl],Bi.br()),Sc([D3],Bi.block()),Sc([gU],Bi.block())],[e,!!(n&&n.shiftKey)]).getOr(Bi.none()),cp=(e,n,o)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||bO(n),!(Oe(o)&&Gy(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Oe(o)&&rp(n,e.fakeEventName)))},Xy=(e,n)=>{if(e.mode.isReadOnly())return;const o=()=>cp(_3,e,n),r=()=>cp(sU,e,n),i=hU(e,n);switch(St(e)){case"linebreak":i.fold(o,o,ct);break;case"block":i.fold(r,r,ct);break;case"invert":i.fold(r,o,ct);break;default:i.fold(o,r,ct);break}},M3=Mr(),WN=M3.os.isiOS()&&M3.browser.isSafari(),N3=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),$$(e.undoManager),e.undoManager.transact(()=>{Xy(e,n)}))},pU=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(Re(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},W0=e=>{let n=O.none();const o=i=>{n=O.some(i.selection.getBookmark()),i.undoManager.add()},r=(i,l)=>{i.undoManager.undo(),n.fold(ct,d=>i.selection.moveToBookmark(d)),N3(i,l),n=O.none()};e.on("keydown",i=>{i.keyCode===Je.ENTER&&(WN&&pU(e.selection.getRng())?o(e):N3(e,i))}),e.on("keyup",i=>{i.keyCode===Je.ENTER&&n.each(()=>r(e,i))})},Jy=(e,n,o)=>{const r=yn.os.isMacOS()||yn.os.isiOS();O0([{keyCode:Je.END,action:Mt(k6,e,!0)},{keyCode:Je.HOME,action:Mt(k6,e,!1)},...r?[]:[{keyCode:Je.HOME,action:Mt(Ny,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Je.END,action:Mt(Ny,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Je.END,action:Mt(N6,e,!0)},{keyCode:Je.HOME,action:Mt(N6,e,!1)},{keyCode:Je.END,action:Mt(ky,e,!0,n)},{keyCode:Je.HOME,action:Mt(ky,e,!1,n)}],o).each(i=>{o.preventDefault()})},jN=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||Jy(e,n,o)})},GN=e=>{e.on("input",n=>{n.isComposing||h2(e)})},qN=Mr(),KN=(e,n,o)=>{O0([{keyCode:Je.PAGE_UP,action:Mt(ky,e,!1,n)},{keyCode:Je.PAGE_DOWN,action:Mt(ky,e,!0,n)}],o)},j0=e=>e.stopImmediatePropagation(),Qy=e=>e.keyCode===Je.PAGE_UP||e.keyCode===Je.PAGE_DOWN,lp=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",j0,!0):!o&&e.get()&&n.off("NodeChange",j0),e.set(o)},bU=(e,n)=>{if(qN.os.isMacOS())return;const o=To(!1);e.on("keydown",r=>{Qy(r)&&lp(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||KN(e,n,r),Qy(r)&&o.get()&&(lp(o,e,!1),e.nodeChanged())})},R3=(e,n)=>e===n||e.contains(n),vU=(e,n)=>!R3(e.getBody(),n.startContainer)||!R3(e.getBody(),n.endContainer)?!0:DA(e.dom,n),yU=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||Vn(n.getTargetRanges(),o=>!vU(e,o)))&&n.preventDefault()})},B3=(e,n)=>{const o=n.container(),r=n.offset();return Re(o)?(o.insertData(r,e),O.some(be(o,r+e.length))):Fv(n).map(i=>{const l=U.fromText(e);return n.isAtEnd()?El(i,l):Yr(i,l),be(l.dom,e.length)})},YN=Qe(B3,to),P3=Qe(B3," "),fq=(e,n,o)=>xw(e,n,o)?YN(n):P3(n),CU=e=>n=>n.fold(o=>Ba(e.dom,be.before(o)),o=>Ar(o),o=>ti(o),o=>Ms(e.dom,be.after(o))),SU=(e,n,o)=>r=>xw(e,r,o)?YN(n):P3(n),XN=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},xU=(e,n)=>e.isEditable(e.getParent(n,"summary")),wU=e=>{const n=be.fromRangeStart(e.selection.getRng()),o=U.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Qe(Bf,e),i=be.fromRangeStart(e.selection.getRng());return Mu(r,e.getBody(),i).bind(CU(o)).map(l=>()=>SU(o,n,e.schema)(l).each(XN(e)))}else return O.none()},EU=e=>{const n=()=>{const o=U.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=be.fromRangeStart(e.selection.getRng());fq(o,r,e.schema).each(XN(e))};return Nn(yn.browser.isFirefox()&&e.selection.isEditable()&&xU(e.dom,e.selection.getRng().startContainer),n)},kU=(e,n)=>{O6([{keyCode:Je.SPACEBAR,action:Mt(wU,e)},{keyCode:Je.SPACEBAR,action:Mt(EU,e)}],n).each(o=>{n.preventDefault(),Gy(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),rp(e,"insertText",{data:" "}))})},L3=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||kU(e,n)})},TU=e=>C7(e)?[{keyCode:Je.TAB,action:Mt(i3,e,!0)},{keyCode:Je.TAB,shiftKey:!0,action:Mt(i3,e,!1)}]:[],Dm=(e,n)=>{O0([...TU(e)],n).each(o=>{n.preventDefault()})},JN=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||Dm(e,n)})},I3=e=>{if(e.addShortcut("Meta+P","","mcePrint"),Wy(e),Du(e))return To(null);{const n=P9(e);return yU(e),My(e),dz(e,n),jz(e,n),W0(e),L3(e),GN(e),JN(e),jN(e,n),bU(e,n),n}};class QN{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",i=>{const l=n.selection.getRng(),d={startContainer:l.startContainer,startOffset:l.startOffset,endContainer:l.endContainer,endOffset:l.endOffset};(i.type==="nodechange"||!P1(d,o))&&n.dispatch("SelectionChange"),o=d}),n.on("contextmenu",()=>{Yx(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const i=n.selection.getStart(!0);i&&Gv(n)&&!r.isSameElementPath(i)&&n.dom.isChildOf(i,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",i=>{!i.isDefaultPrevented()&&Gv(n)&&(n.selection.getNode().nodeName==="IMG"?lc.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor,r=o.selection;let i;if(o.initialized&&r&&!a7(o)&&!hh(o)){const l=o.getBody();i=r.getStart(!0)||l,(i.ownerDocument!==o.getDoc()||!o.dom.isChildOf(i,l))&&(i=l);const d=[];o.dom.getParent(i,g=>g===l?!0:(d.push(g),!1)),o.dispatch("NodeChange",{...n,element:i,parents:d})}}isSameElementPath(n){let o;const r=this.editor,i=eo(r.dom.getParents(n,ze,r.getBody()));if(i.length===this.lastPath.length){for(o=i.length;o>=0&&i[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=i,!0}return this.lastPath=i,!1}}const eC="x-tinymce/html",Hl=qe(eC),tC="<!-- "+eC+" -->",xc=e=>tC+e,mg=e=>e.replace(tC,""),F3=e=>e.indexOf(tC)!==-1,$3=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),_U=(e,n)=>{let o="<"+e;const r=$u(n,(i,l)=>l+'="'+so.encodeAllRaw(i)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},eR=(e,n,o)=>{const r=e.split(/\n\n/),i=_U(n,o),l="</"+n+">",d=At(r,h=>h.split(/\n/).join("<br />")),g=h=>i+h+l;return d.length===1?d[0]:At(d,g).join("")},tR="%MCEPASTEBIN%",AU=(e,n)=>{const{dom:o,selection:r}=e,i=e.getBody();n.set(r.getRng());const l=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},tR);yn.browser.isFirefox()&&o.setStyle(l,"left",o.getStyle(i,"direction",!0)==="rtl"?65535:-65535),o.bind(l,"beforedeactivate focusin focusout",d=>{d.stopPropagation()}),l.focus(),r.select(l,!0)},OU=(e,n)=>{const o=e.dom;if(H3(e)){let r;const i=n.get();for(;r=H3(e);)o.remove(r),o.unbind(r);i&&e.selection.setRng(i)}n.set(null)},H3=e=>e.dom.get("mcepastebin"),DU=e=>Oe(e)&&e.id==="mcepastebin",nR=e=>{const n=e.dom,o=(d,g)=>{d.appendChild(g),n.remove(g,!0)},[r,...i]=et(e.getBody().childNodes,DU);pe(i,d=>{o(r,d)});const l=n.select("div[id=mcepastebin]",r);for(let d=l.length-1;d>=0;d--){const g=n.create("div");r.insertBefore(g,l[d]),o(g,l[d])}return r?r.innerHTML:""},oR=e=>e===tR,MU=e=>{const n=To(null);return{create:()=>AU(e,n),remove:()=>OU(e,n),getEl:()=>H3(e),getHtml:()=>nR(e),getLastRng:n.get}},fg=(e,n)=>(Pe.each(n,o=>{kt(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),nC=e=>{const n=Lr(),o=Wf({},n);let r="";const i=n.getVoidElements(),l=Pe.makeMap("script noscript style textarea video audio iframe object"," "),d=n.getBlockElements(),g=h=>{const y=h.name,w=h;if(y==="br"){r+=`
`;return}if(y!=="wbr"){if(i[y]&&(r+=" "),l[y]){r+=" ";return}if(h.type===3&&(r+=h.value),!(h.name in n.getVoidElements())){let T=h.firstChild;if(T)do g(T);while(T=T.next)}d[y]&&w.next&&(r+=`
`,y==="p"&&(r+=`
`))}};return e=fg(e,[/<!\[[^\]]+\]>/g]),g(o.parse(e)),r},V3=e=>(e=fg(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,i)=>!r&&!i?" ":to],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),sR=e=>{let n=0;return()=>e+n++},z3=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Pe.hasOwn(o,n)?"image/"+o[n]:"image/"+n},NU=(e,n)=>{const o=Wf({sanitize:C1(e),sandbox_iframes:bx(e),sandbox_iframes_exclusions:Bv(e),convert_unsafe_embeds:Pv(e)},e.schema);o.addNodeFilter("meta",i=>{Pe.each(i,l=>{l.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return vd({validate:!0},e.schema).serialize(r)},rR=(e,n)=>({content:e,cancelled:n}),RU=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),i=LP(e,r,o);return rR(i.node.innerHTML,i.isDefaultPrevented())},aR=(e,n,o)=>{const r=dx(e,n,o),i=NU(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?RU(e,i,o):rR(i,r.isDefaultPrevented())},oC=(e,n,o)=>aR(e,n,o),sC=(e,n)=>(e.insertContent(n,{merge:x_(e),paste:!0}),!0),up=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),BU=(e,n)=>up(n)&&Vn(D_(e),o=>Kl(n.toLowerCase(),`.${o.toLowerCase()}`)),iR=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),PU=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),LU=(e,n,o)=>!e.selection.isCollapsed()&&up(n)?PU(e,n,o):!1,IU=(e,n,o)=>BU(e,n)?iR(e,n,o):!1,cR=(e,n)=>{Pe.each([LU,IU,sC],o=>!o(e,n,sC))},FU=(e,n,o)=>{o||!w_(e)?sC(e,n):cR(e,n)},$U=sR("mceclip"),lR=e=>{const n=By();return Qh(n,e),li(n),n},dp=(e,n,o,r,i)=>{const l=oC(e,n,o);if(!l.cancelled){const d=l.content,g=()=>FU(e,d,r);i?Gy(e,"insertFromPaste",{dataTransfer:lR(d)}).isDefaultPrevented()||(g(),rp(e,"insertFromPaste")):g()}},rC=(e,n,o,r)=>{const i=o||F3(n);dp(e,mg(n),i,!1,r)},aC=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),i=Pr(r,k_(e)),l=eR(i,ta(e),g1(e));dp(e,l,!1,!0,o)},U3=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},Md=(e,n)=>n in e&&e[n].length>0,iC=e=>Md(e,"text/html")||Md(e,"text/plain"),uR=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Oe(o)?e.dom.encode(o[1]):void 0},HU=(e,n,o,r)=>{const i=$U(),l=h1(e)&&Oe(o.name),d=l?uR(e,o.name):i,g=l?o.name:void 0,h=n.create(i,o,r,d,g);return n.add(h),h},dR=(e,n)=>{F2(n.uri).each(({data:o,type:r,base64Encoded:i})=>{const l=i?o:btoa(o),d=n.file,g=e.editorUpload.blobCache,h=g.getByData(l,r),y=h??HU(e,g,d,l);rC(e,`<img src="${y.blobUri()}">`,!1,!0)})},VU=e=>e.type==="paste",zU=e=>Promise.all(At(e,n=>E5(n).then(o=>({file:n,uri:o})))),UU=e=>{const n=D_(e);return o=>es(o.type,"image/")&&Vn(n,r=>z3(r)===o.type)},Z3=(e,n)=>{const o=n.items?Ls(xs(n.items),i=>i.kind==="file"?[i.getAsFile()]:[]):[],r=n.files?xs(n.files):[];return et(o.length>0?o:r,UU(e))},mR=(e,n,o)=>{const r=VU(n)?n.clipboardData:n.dataTransfer;if(y1(e)&&r){const i=Z3(e,r);if(i.length>0)return n.preventDefault(),zU(i).then(l=>{o&&e.selection.setRng(o),pe(l,d=>{dR(e,d)})}),!0}return!1},ZU=e=>{var n,o;return yn.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},cC=e=>Je.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,W3=(e,n,o,r,i)=>{let l=V3(o);const d=Md(n,Hl())||F3(o),g=!d&&$3(l),h=up(l);(oR(l)||!l.length||g&&!h)&&(r=!0),(r||h)&&(Md(n,"text/plain")&&g?l=n["text/plain"]:l=nC(l)),!oR(l)&&(r?aC(e,l,i):rC(e,l,d,i))},j3=(e,n,o)=>{let r;const i=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",l=>{cC(l)&&!l.isDefaultPrevented()&&(r=l.shiftKey&&l.keyCode===86)}),e.on("paste",l=>{if(l.isDefaultPrevented()||ZU(l))return;const d=o.get()==="text"||r;r=!1;const g=U3(l.clipboardData);!iC(g)&&mR(e,l,i())||(Md(g,"text/html")?(l.preventDefault(),W3(e,g,g["text/html"],d,!0)):Md(g,"text/plain")&&Md(g,"text/uri-list")?(l.preventDefault(),W3(e,g,g["text/plain"],d,!0)):(n.create(),lc.setEditorTimeout(e,()=>{const h=n.getHtml();n.remove(),W3(e,g,h,d,!1)},0)))})},fR=e=>{const n=i=>es(i,"webkit-fake-url"),o=i=>es(i,"data:"),r=i=>{var l;return((l=i.data)===null||l===void 0?void 0:l.paste)===!0};e.parser.addNodeFilter("img",(i,l,d)=>{if(!y1(e)&&r(d))for(const g of i){const h=g.attr("src");re(h)&&!g.attr("data-mce-object")&&h!==yn.transparentSrc&&(n(h)||!d7(e)&&o(h))&&g.remove()}})},gR=(e,n,o)=>{j3(e,n,o),fR(e)},hR=(e,n)=>{n.get()==="text"?(n.set("html"),e_(e,!1)):(n.set("text"),e_(e,!0)),e.focus()},WU=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{hR(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&rC(e,r.html,r.internal,!1),r.text&&aC(e,r.text,!1)})},jU=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(Hl(),n),!0}catch{return!1}else return!1},pR=(e,n,o,r)=>{jU(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},bR=e=>(n,o)=>{const{dom:r,selection:i}=e,l=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),d=r.create("div",{contenteditable:"true"},n);r.setStyles(l,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),l.appendChild(d),r.add(e.getBody(),l);const g=i.getRng();d.focus();const h=r.createRng();h.selectNodeContents(d),i.setRng(h),lc.setEditorTimeout(e,()=>{i.setRng(g),r.remove(l),o()},0)},G0=e=>({html:xc(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),GU=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),vR=e=>!e.selection.isCollapsed()||GU(e),qU=e=>n=>{!n.isDefaultPrevented()&&vR(e)&&e.selection.isEditable()&&pR(n,G0(e),bR(e),()=>{if(yn.browser.isChromium()||yn.browser.isFirefox()){const o=e.selection.getRng();lc.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},G3=e=>n=>{!n.isDefaultPrevented()&&vR(e)&&pR(n,G0(e),bR(e),ct)},KU=e=>{e.on("cut",qU(e)),e.on("copy",G3(e))},yR=(e,n)=>{var o,r;return Oi.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},CR=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},SR=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},YU=e=>Vn(e.files,n=>/^image\//.test(n.type)),XU=(e,n,o,r)=>{const i=e.getParent(o,d=>Zc(n,d));if(!ee(e.getParent(o,"summary")))return!0;if(i&&xt(r,"text/html")){const d=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!ee(d.querySelector(i.nodeName.toLowerCase()))}else return!1},JU=e=>{e.on("input",n=>{const o=r=>ee(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=et(e.dom.select("details"),o);pe(r,i=>{zo(i.firstChild)&&i.firstChild.remove();const l=e.dom.create("summary");l.appendChild(rd().dom),i.prepend(l)})}})},QU=(e,n)=>{px(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),y1(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&YU(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=yR(e,o);if(hn(r))return;const i=U3(o.dataTransfer),l=Md(i,Hl());if((!iC(i)||CR(i))&&mR(e,o,r))return;const d=i[Hl()],g=d||i["text/html"]||i["text/plain"],h=XU(e.dom,e.schema,r.startContainer,i),y=n.get();y&&!h||g&&(o.preventDefault(),lc.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(d||y&&h)&&e.execCommand("Delete"),SR(e,r);const w=V3(g);i["text/html"]?rC(e,w,l,!0):aC(e,w,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{y1(e)&&!n.get()&&(o.preventDefault(),SR(e,yR(e,o))),o.type==="dragend"&&n.set(!1)}),JU(e)},eZ=e=>{const n=i=>l=>{i(e,l)},o=y_(e);jt(o)&&e.on("PastePreProcess",n(o));const r=C_(e);jt(r)&&e.on("PastePostProcess",n(r))},q3=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},tZ=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,K3=e=>Pe.trim(e).replace(tZ,Qp).toLowerCase(),nZ=(e,n,o)=>{const r=u7(e);if(o||r==="all"||!S_(e))return n;const i=r?r.split(/[, ]/):[];if(i&&r!=="none"){const l=e.dom,d=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(g,h,y,w)=>{const T=l.parseStyle(l.decode(y)),_={};for(let P=0;P<i.length;P++){const B=T[i[P]];let F=B,W=l.getStyle(d,i[P],!0);/color/.test(i[P])&&(F=K3(F),W=K3(W)),W!==F&&(_[i[P]]=B)}const N=l.serializeStyle(_,"span");return N?h+' style="'+N+'"'+w:h+w})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(l,d,g,h)=>d+' style="'+g+'"'+h),n},oZ=e=>{(yn.browser.isChromium()||yn.browser.isSafari())&&q3(e,nZ)},sZ=e=>{const n=To(!1),o=To(E_(e)?"text":"html"),r=MU(e);oZ(e),WU(e,o),eZ(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{KU(e),QU(e,n),gR(e,r,o)})},rZ=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},Rs=e=>{e.parser.addNodeFilter("details",n=>{const o=S7(e);pe(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=x7(e);pe(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},aZ=e=>{rZ(e),Rs(e)},iZ=zo,xR=Re,wR=e=>wo(e.dom),Y3=e=>zc(e.dom),X3=e=>n=>sn(U.fromDom(e),n),q0=(e,n,o)=>cu(U.fromDom(e),r=>Y3(r)||o.isBlock(En(r)),X3(n)).getOr(U.fromDom(n)).dom,ER=(e,n)=>cu(U.fromDom(e),wR,X3(n)),kR=(e,n,o)=>{const r=new dr(e,n),i=o?r.next.bind(r):r.prev.bind(r);let l=e;for(let d=o?e:i();d&&!iZ(d);d=i())Yc(d)&&(l=d);return l},cZ=(e,n,o)=>{const i=be.fromRangeStart(e).getNode(),l=q0(i,n,o),d=kR(i,l,!1),g=kR(i,l,!0),h=document.createRange();return ER(d,l).fold(()=>{xR(d)?h.setStart(d,0):h.setStartBefore(d)},y=>h.setStartBefore(y.dom)),ER(g,l).fold(()=>{xR(g)?h.setEnd(g,g.data.length):h.setEndAfter(g)},y=>h.setEndAfter(y.dom)),h},lZ=e=>{const n=cZ(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Fw(n))},uZ=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),lZ(e))})};var mp;(function(e){e.Before="before",e.After="after"})(mp||(mp={}));const dZ=(e,n)=>Math.abs(e.left-n),mZ=(e,n)=>Math.abs(e.right-n),fZ=(e,n)=>e>=n.top&&e<=n.bottom,gZ=(e,n)=>e.top<n.bottom&&e.bottom>n.top,hZ=(e,n)=>{const o=pP(e,n)/Math.min(e.height,n.height);return gZ(e,n)&&o>.5},pZ=(e,n)=>{const o=et(e,r=>fZ(n,r));return FT(o).fold(()=>[[],e],r=>{const{pass:i,fail:l}=ma(e,d=>hZ(d,r));return[i,l]})},bZ=(e,n)=>({node:e.node,position:dZ(e,n)<mZ(e,n)?mp.Before:mp.After}),vZ=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),lC=(e,n,o,r)=>{const i=T=>Yc(T.node)?O.some(T):ot(T.node)?lC(xs(T.node.childNodes),n,o,!1):O.none(),l=(T,_,N)=>i(_).filter(P=>Math.abs(N(T,n,o)-N(P,n,o))<2&&Re(P.node)),d=(T,_)=>{const N=Gn(T,(P,B)=>_(P,n,o)-_(B,n,o));return pi(N,i).map(P=>r&&!Re(P.node)&&N.length>1?l(P,N[1],_).getOr(P):P)},[g,h]=pZ(eg(e),o),{pass:y,fail:w}=ma(h,T=>T.top<o);return d(g,vZ).orThunk(()=>d(w,mv)).orThunk(()=>d(y,mv))},TR=(e,n,o,r)=>{const i=(l,d)=>{const g=y=>ot(y)&&y.classList.contains("mce-drag-container"),h=et(l.dom.childNodes,jn(g));return d.fold(()=>lC(h,o,r,!0),y=>{const w=et(h,T=>T!==y.dom);return lC(w,o,r,!0)}).orThunk(()=>(sn(l,e)?O.none():jm(l)).bind(w=>i(w,O.some(l))))};return i(n,O.none())},_R=(e,n,o)=>{const r=U.fromDom(e),i=tu(r),d=U.fromPoint(i,n,o).filter(g=>Ki(r,g)).getOr(r);return TR(r,d,n,o)},AR=(e,n,o)=>_R(e,n,o).filter(r=>x1(r.node)).map(r=>bZ(r,n)),OR=e=>{var n,o;const r=e.getBoundingClientRect(),i=e.ownerDocument,l=i.documentElement,d=i.defaultView;return{top:r.top+((n=d==null?void 0:d.scrollY)!==null&&n!==void 0?n:0)-l.clientTop,left:r.left+((o=d==null?void 0:d.scrollX)!==null&&o!==void 0?o:0)-l.clientLeft}},yZ=e=>e.inline?OR(e.getBody()):{left:0,top:0},CZ=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},DR=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},i={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:i},SZ=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=OR(e.getContentAreaContainer()),r=DR(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},MR=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),xZ=(e,n)=>MR(yZ(e),CZ(e),SZ(e,n)),J3=e=>({target:e,srcElement:e}),NR=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...J3(o)}),wZ=(e,n,o)=>{const r=ms("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:ct,stopImmediatePropagation:ct,stopPropagation:ct,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...J3(n)}},EZ=(e,n)=>{const o=nq(e);return n==="dragstart"?($6(o),KV(o)):n==="drop"?(jV(o),li(o)):(GV(o),N0(o)),o},kZ=(e,n,o,r)=>{const i=EZ(o,e);return mo(r)?wZ(e,n,i):NR(e,r,n,i)},RR=32,BR=100,uC=8,dC=16,Q3=wo,TZ=bP(Q3,zc),_Z=(e,n,o)=>Q3(o)&&o!==n&&e.isEditable(o.parentElement),PR=(e,n,o)=>hn(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),AZ=(e,n,o,r)=>{const i=e.dom,l=n.cloneNode(!0);i.setStyles(l,{width:o,height:r}),i.setAttrib(l,"data-mce-selected",null);const d=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(d,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),i.setStyles(l,{margin:0,boxSizing:"border-box"}),d.appendChild(l),d},OZ=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},mC=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},ek=mC("left",-32),tk=mC("left",RR),LR=mC("top",-32),IR=mC("top",RR),DZ=(e,n,o,r,i,l,d,g,h,y,w,T)=>{let _=0,N=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>i&&(_=n.pageX+o-i),n.pageY+r>l&&(N=n.pageY+r-l),e.style.width=o-_+"px",e.style.height=r-N+"px";const P=h.clientHeight,B=h.clientWidth,F=d+h.getBoundingClientRect().top,W=g+h.getBoundingClientRect().left;w.on(Q=>{Q.intervalId.clear(),Q.dragging&&T&&(d+uC>=P?Q.intervalId.set(IR(y)):d-uC<=0?Q.intervalId.set(LR(y)):g+uC>=B?Q.intervalId.set(tk(y)):g-uC<=0?Q.intervalId.set(ek(y)):F+dC>=window.innerHeight?Q.intervalId.set(IR(window)):F-dC<=0?Q.intervalId.set(LR(window)):W+dC>=window.innerWidth?Q.intervalId.set(tk(window)):W-dC<=0&&Q.intervalId.set(ek(window)))})},FR=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},MZ=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);FR(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&om(U.fromDom(o))},NZ=e=>e.button===0,RZ=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),BZ=(e,n)=>o=>{if(NZ(o)){const r=ko(n.dom.getParents(o.target),TZ).getOr(null);if(Oe(r)&&_Z(n.dom,n.getBody(),r)){const i=n.dom.getPos(r),l=n.getBody(),d=n.getDoc().documentElement;e.set({element:r,dataTransfer:By(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?l.scrollWidth:d.offsetWidth)-2,maxY:(n.inline?l.scrollHeight:d.offsetHeight)-2,relX:o.pageX-i.x,relY:o.pageY-i.y,width:r.offsetWidth,height:r.offsetHeight,ghost:AZ(n,r,r.offsetWidth,r.offsetHeight),intervalId:$m(BR)})}}},gq=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),AR(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const i=e._selectionOverrides.showCaret(1,r.node,r.position===mp.Before,!1);i?e.selection.setRng(i):e.selection.placeCaretAt(n,o)})},K0=(e,n,o,r,i)=>{n==="dragstart"&&Qh(r,e.dom.getOuterHTML(o));const l=kZ(n,o,r,i);return e.dispatch(n,l)},fC=(e,n)=>{const o=yr((i,l)=>gq(n,i,l),0);n.on("remove",o.cancel);const r=e;return i=>e.on(l=>{const d=Math.max(Math.abs(i.screenX-l.screenX),Math.abs(i.screenY-l.screenY));if(!l.dragging&&d>10){const g=K0(n,"dragstart",l.element,l.dataTransfer,i);if(Oe(g.dataTransfer)&&(l.dataTransfer=g.dataTransfer),g.isDefaultPrevented())return;l.dragging=!0,n.focus()}if(l.dragging){const g=i.currentTarget===n.getDoc().documentElement,h=RZ(l,xZ(n,i));OZ(l.ghost,n.getBody()),DZ(l.ghost,h,l.width,l.height,l.maxX,l.maxY,i.clientY,i.clientX,n.getContentAreaContainer(),n.getWin(),r,g),o.throttle(i.clientX,i.clientY)}})},$R=e=>{const n=e.getSel();if(Oe(n)){const r=n.getRangeAt(0).startContainer;return Re(r)?r.parentNode:r}else return null},HR=(e,n)=>o=>{e.on(r=>{var i;if(r.intervalId.clear(),r.dragging){if(PR(n,$R(n.selection),r.element)){const l=(i=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&i!==void 0?i:n.getBody();K0(n,"drop",l,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{MZ(n.dom,r.element),XV(r.dataTransfer).each(g=>n.insertContent(g)),n._selectionOverrides.hideFakeCaret()})}K0(n,"dragend",n.getBody(),r.dataTransfer,o)}}),nk(e)},VR=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>K0(n,"dragend",r.element,r.dataTransfer),i=>K0(n,"dragend",r.element,r.dataTransfer,i))}),nk(e)},zR=(e,n)=>o=>VR(e,n,O.some(o)),nk=e=>{e.on(n=>{n.intervalId.clear(),FR(n.ghost)}),e.clear()},PZ=e=>{const n=br(),o=Ln.DOM,r=document,i=BZ(n,e),l=fC(n,e),d=HR(n,e),g=zR(n,e);e.on("mousedown",i),e.on("mousemove",l),e.on("mouseup",d),o.bind(r,"mousemove",l),o.bind(r,"mouseup",g),e.on("remove",()=>{o.unbind(r,"mousemove",l),o.unbind(r,"mouseup",g)}),e.on("keydown",h=>{h.keyCode===Je.ESC&&VR(n,e,O.none())})},LZ=e=>{const n=i=>{if(!i.isDefaultPrevented()){const l=i.dataTransfer;l&&(_t(l.types,"Files")||l.files.length>0)&&(i.preventDefault(),i.type==="drop"&&p0(e,"Dropped file type is not supported"))}},o=i=>{t2(e,i.target)&&n(i)},r=()=>{const i=Ln.DOM,l=e.dom,d=document,g=e.inline?e.getBody():e.getDoc(),h=["drop","dragover"];pe(h,y=>{i.bind(d,y,o),l.bind(g,y,n)}),e.on("remove",()=>{pe(h,y=>{i.unbind(d,y,o),l.unbind(g,y,n)})})};e.on("init",()=>{lc.setEditorTimeout(e,r,0)})},IZ=e=>{PZ(e),i7(e)&&LZ(e)},UR=e=>{const n=yr(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=bE(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},FZ=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Ji(o)){const r=Pf(e.getBody(),o),i=wo(r)?r:o;e.selection.getNode()!==i&&py(e,i).each(l=>e.selection.setRng(l))}})})},gg=wo,ZR=(e,n)=>Pf(e.getBody(),n),$Z=e=>{const n=e.selection,o=e.dom,r=e.getBody(),i=N7(e,r,o.isBlock,()=>kf(e)),l="sel-"+o.uniqueId(),d="data-mce-selected";let g;const h=Ke=>Oe(Ke)&&o.hasClass(Ke,"mce-offscreen-selection"),y=Ke=>Ke!==r&&(gg(Ke)||Ji(Ke))&&o.isChildOf(Ke,r)&&o.isEditable(Ke.parentNode),w=Ke=>{Ke&&n.setRng(Ke)},T=(Ke,ge,le,Ee=!0)=>e.dispatch("ShowCaret",{target:ge,direction:Ke,before:le}).isDefaultPrevented()?null:(Ee&&n.scrollIntoView(ge,Ke===-1),i.show(le,ge)),_=Ke=>{Ke.hasAttribute("data-mce-caret")&&(dv(Ke),n.scrollIntoView(Ke))},N=()=>{e.on("click",ge=>{o.isEditable(ge.target)||(ge.preventDefault(),e.focus())}),e.on("blur NewBlock",ae),e.on("ResizeWindow FullscreenStateChanged",i.reposition),e.on("tap",ge=>{const le=ge.target,Ee=ZR(e,le);gg(Ee)?(ge.preventDefault(),py(e,Ee).each(te)):y(le)&&py(e,le).each(te)},!0),e.on("mousedown",ge=>{const le=ge.target;if(le!==r&&le.nodeName!=="HTML"&&!o.isChildOf(le,r)||!Fh(e,ge.clientX,ge.clientY))return;ae(),De();const Ee=ZR(e,le);gg(Ee)?(ge.preventDefault(),py(e,Ee).each(te)):AR(r,ge.clientX,ge.clientY).each(Ge=>{ge.preventDefault();const lt=T(1,Ge.node,Ge.position===mp.Before,!1);w(lt),uu(Ee)?Ee.focus():e.getBody().focus()})}),e.on("keypress",ge=>{Je.modifierPressed(ge)||gg(n.getNode())&&ge.preventDefault()}),e.on("GetSelectionRange",ge=>{let le=ge.range;if(g){if(!g.parentNode){g=null;return}le=le.cloneRange(),le.selectNode(g),ge.range=le}}),e.on("focusin",ge=>{if(i.isShowing()&&e.getBody().contains(ge.target)&&ge.target!==e.getBody()&&!e.dom.isEditable(ge.target.parentNode)){i.hide(),ge.target.contains(e.selection.getNode())||(e.selection.select(ge.target,!0),e.selection.collapse(!0));const le=te(e.selection.getRng(),!0);le&&e.selection.setRng(le)}}),e.on("SetSelectionRange",ge=>{ge.range=F(ge.range);const le=te(ge.range,ge.forward);le&&(ge.range=le)});const Ke=ge=>ot(ge)&&ge.id==="mcepastebin";e.on("AfterSetSelectionRange",ge=>{const le=ge.range,Ee=le.startContainer.parentElement;!B(le)&&!Ke(Ee)&&De(),h(Ee)||ae()}),IZ(e),UR(e),FZ(e)},P=Ke=>bs(Ke)||oh(Ke)||uv(Ke),B=Ke=>P(Ke.startContainer)||P(Ke.endContainer),F=Ke=>{const ge=e.schema.getVoidElements(),le=o.createRng(),Ee=Ke.startContainer,Ge=Ke.startOffset,lt=Ke.endContainer,Gt=Ke.endOffset;return xt(ge,Ee.nodeName.toLowerCase())?Ge===0?le.setStartBefore(Ee):le.setStartAfter(Ee):le.setStart(Ee,Ge),xt(ge,lt.nodeName.toLowerCase())?Gt===0?le.setEndBefore(lt):le.setEndAfter(lt):le.setEnd(lt,Gt),le},W=(Ke,ge)=>{const le=U.fromDom(e.getBody()),Ee=e.getDoc(),Ge=Xu(le,"#"+l).getOrThunk(()=>{const Kt=U.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Ee);return $s(Kt,"id",l),rs(le,Kt),Kt}),lt=o.createRng();Si(Ge),iu(Ge,[U.fromText(to,Ee),U.fromDom(ge),U.fromText(to,Ee)]),lt.setStart(Ge.dom.firstChild,1),lt.setEnd(Ge.dom.lastChild,0),Mb(Ge,{top:o.getPos(Ke,e.getBody()).y+"px"}),Ao(Ge);const Gt=n.getSel();return Gt&&(Gt.removeAllRanges(),Gt.addRange(lt)),lt},Q=Ke=>{const ge=Ke.cloneNode(!0),le=e.dispatch("ObjectSelected",{target:Ke,targetClone:ge});if(le.isDefaultPrevented())return null;const Ee=W(Ke,le.targetClone),Ge=U.fromDom(Ke);return pe(go(U.fromDom(e.getBody()),`*[${d}]`),lt=>{sn(Ge,lt)||_s(lt,d)}),o.getAttrib(Ke,d)||Ke.setAttribute(d,"1"),g=Ke,De(),Ee},te=(Ke,ge)=>{if(!Ke)return null;if(Ke.collapsed){if(!B(Ke)){const lt=ge?1:-1,Gt=T1(lt,r,Ke),Kt=Gt.getNode(!ge);if(Oe(Kt)){if(x1(Kt))return T(lt,Kt,ge?!Gt.isAtEnd():!1,!1);if(Ir(Kt)&&wo(Kt.nextSibling)){const In=o.createRng();return In.setStart(Kt,0),In.setEnd(Kt,0),In}}const _n=Gt.getNode(ge);if(Oe(_n)){if(x1(_n))return T(lt,_n,ge?!1:!Gt.isAtEnd(),!1);if(Ir(_n)&&wo(_n.previousSibling)){const In=o.createRng();return In.setStart(_n,1),In.setEnd(_n,1),In}}}return null}let le=Ke.startContainer,Ee=Ke.startOffset;const Ge=Ke.endOffset;if(Re(le)&&Ee===0&&gg(le.parentNode)&&(le=le.parentNode,Ee=o.nodeIndex(le),le=le.parentNode),!ot(le))return null;if(Ge===Ee+1&&le===Ke.endContainer){const lt=le.childNodes[Ee];if(y(lt))return Q(lt)}return null},ae=()=>{g&&g.removeAttribute(d),Xu(U.fromDom(e.getBody()),"#"+l).each(v),g=null},Se=()=>{i.destroy(),g=null},De=()=>{i.hide()};return Du(e)||N(),{showCaret:T,showBlockCaretContainer:_,hideFakeCaret:De,destroy:Se}},HZ=(e,n)=>{let o=n;for(let r=e.previousSibling;Re(r);r=r.previousSibling)o+=r.data.length;return o},ok=(e,n,o,r,i)=>{if(Re(o)&&(r<0||r>o.data.length))return[];const l=i&&Re(o)?[HZ(o,r)]:[r];let d=o;for(;d!==n&&d.parentNode;)l.push(e.nodeIndex(d,i)),d=d.parentNode;return d===n?l.reverse():[]},sk=(e,n,o,r,i,l,d=!1)=>{const g=ok(e,n,o,r,d),h=ok(e,n,i,l,d);return{start:g,end:h}},WR=(e,n)=>{const o=n.slice(),r=o.pop();return No(r)?Ss(o,(l,d)=>l.bind(g=>O.from(g.childNodes[d])),O.some(e)).bind(l=>Re(l)&&(r<0||r>l.data.length)?O.none():O.some({node:l,offset:r})):O.none()},jR=(e,n)=>WR(e,n.start).bind(({node:o,offset:r})=>WR(e,n.end).map(({node:i,offset:l})=>{const d=document.createRange();return d.setStart(o,r),d.setEnd(i,l),d})),VZ=(e,n,o,r=!1)=>sk(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),fp=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,Re(n.firstChild)&&as(n.firstChild.data)),fp(e,r,o)}},gC=(e,n,o,r=!0)=>{const i=n.startContainer.parentNode,l=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(Re(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),Re(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),fp(e,i,o),i!==l&&fp(e,l,o))},hC=(e,n)=>O.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),pC=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:rn(r).concat(e.blockPatterns),inlinePatterns:mt(r).concat(e.inlinePatterns)}},rk=(e,n,o,r)=>{const i=e.createRng();return i.setStart(n,0),i.setEnd(o,r),i.toString()},bC=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),wc=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},ak=(e,n,o)=>{const r=jR(e.getRoot(),o).getOrDie("Unable to resolve path range"),i=r.startContainer,l=r.endContainer,d=r.endOffset===0?l:l.splitText(r.endOffset),g=r.startOffset===0?i:i.splitText(r.startOffset),h=g.parentNode,y=d.parentNode;return{prefix:n,end:y.insertBefore(bC(e,n+"-end"),d),start:h.insertBefore(bC(e,n+"-start"),g)}},ik=(e,n,o)=>{fp(e,e.get(n.prefix+"-end"),o),fp(e,e.get(n.prefix+"-start"),o)},ck=e=>e.start.length===0,vC=e=>(n,o)=>{const i=n.data.substring(0,o),l=i.lastIndexOf(e.charAt(e.length-1)),d=i.lastIndexOf(e);return d!==-1?d+e.length:l!==-1?l+1:-1},yC=(e,n,o,r)=>{const i=n.start;return op(e,r.container,r.offset,vC(i),o).bind(d=>{var g,h;const y=(h=(g=o.textContent)===null||g===void 0?void 0:g.indexOf(i))!==null&&h!==void 0?h:-1;if(y!==-1&&d.offset>=y+i.length){const T=e.createRng();return T.setStart(d.container,d.offset-i.length),T.setEnd(d.container,d.offset),O.some(T)}else{const T=d.offset-i.length;return Fy(d.container,T,o).map(_=>{const N=e.createRng();return N.setStart(_.container,_.offset),N.setEnd(d.container,d.offset),N}).filter(_=>_.toString()===i).orThunk(()=>yC(e,n,o,Ll(d.container,0)))}})},GR=(e,n,o,r,i,l=!1)=>{if(n.start.length===0&&!l){const d=e.createRng();return d.setStart(o,r),d.setEnd(o,r),O.some(d)}return sg(o,r,i).bind(d=>yC(e,n,i,d).bind(h=>{var y;if(l){if(h.endContainer===d.container&&h.endOffset===d.offset)return O.none();if(d.offset===0&&((y=h.endContainer.textContent)===null||y===void 0?void 0:y.length)===h.endOffset)return O.none()}return O.some(h)}))},qR=(e,n,o,r)=>{const i=e.dom,l=i.getRoot(),d=o.pattern,g=o.position.container,h=o.position.offset;return Fy(g,h-o.pattern.end.length,n).bind(y=>{const w=sk(i,l,y.container,y.offset,g,h,r);if(ck(d))return O.some({matches:[{pattern:d,startRng:w,endRng:w}],position:y});{const T=CC(e,o.remainingPatterns,y.container,y.offset,n,r),_=T.getOr({matches:[],position:y}),N=_.position;return GR(i,d,N.container,N.offset,n,T.isNone()).map(B=>{const F=VZ(i,l,B,r);return{matches:_.matches.concat([{pattern:d,startRng:F,endRng:w}]),position:Ll(B.startContainer,B.startOffset)}})}})},CC=(e,n,o,r,i,l)=>{const d=e.dom;return sg(o,r,d.getRoot()).bind(g=>{const h=rk(d,i,o,r);for(let y=0;y<n.length;y++){const w=n[y];if(!Kl(h,w.end))continue;const T=n.slice();T.splice(y,1);const _=qR(e,i,{pattern:w,remainingPatterns:T,position:g},l);if(_.isNone()&&r>0)return CC(e,n,o,r-1,i,l);if(_.isSome())return _}return O.none()})},KR=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?pe(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},zZ=(e,n,o,r)=>{const i=wc(e.dom,o);gC(e.dom,i,r),KR(e,n,i)},UZ=(e,n,o,r,i)=>{const l=e.dom,d=wc(l,r),g=wc(l,o);gC(l,g,i),gC(l,d,i);const h={prefix:o.prefix,start:o.end,end:r.start},y=wc(l,h);KR(e,n,y)},ZZ=(e,n)=>{const o=ha("mce_textpattern"),r=Ac(n,(i,l)=>{const d=ak(e,o+`_end${i.length}`,l.endRng);return i.concat([{...l,endMarker:d}])},[]);return Ac(r,(i,l)=>{const d=r.length-i.length-1,g=ck(l.pattern)?l.endMarker:ak(e,o+`_start${d}`,l.startRng);return i.concat([{...l,startMarker:g}])},[])},YR=e=>Gn(e,(n,o)=>o.end.length-n.end.length),WZ=(e,n)=>{const o=nn(e,r=>Vn(n,i=>r.pattern.start===i.pattern.start&&r.pattern.end===i.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},XR=(e,n,o,r,i,l)=>{const d=CC(e,i.inlinePatterns,o,r,n,l).fold(()=>[],h=>h.matches),g=CC(e,YR(i.inlinePatterns),o,r,n,l).fold(()=>[],h=>h.matches);return WZ(d,g)},jZ=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),i=ZZ(o,n);pe(i,l=>{const d=o.getParent(l.startMarker.start,o.isBlock),g=h=>h===d;ck(l.pattern)?zZ(e,l.pattern,l.endMarker,g):UZ(e,l.pattern,l.startMarker,l.endMarker,g),ik(o,l.endMarker,g),ik(o,l.startMarker,g)}),e.selection.moveToBookmark(r)},SC=(e,n,o)=>c3(n,0,n).map(r=>{const i=r.container;return l3(i,o.start.length,n).each(l=>{const d=e.createRng();d.setStart(i,0),d.setEnd(l.container,l.offset),gC(e,d,g=>g===n)}),i}),JR=e=>(n,o)=>{const r=n.dom,i=o.pattern,l=jR(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),d=(g,h)=>{const y=h.get(g);return Qn(y)&&Go(y).exists(w=>xt(w,"block"))};return hC(n,l).each(g=>{i.type==="block-format"?d(i.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,g,i),n.formatter.apply(i.format)}):i.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,g,i),n.execCommand(i.cmd,!1,i.value)})}),!0},GZ=e=>Gn(e,(n,o)=>o.start.length-n.start.length),QR=e=>(n,o)=>{const r=GZ(n),i=o.replace(to," ");return ko(r,l=>e(l,o,i))},e8=(e,n)=>(o,r,i,l,d)=>{var g;d===void 0&&(d=(g=r.textContent)!==null&&g!==void 0?g:"");const h=o.dom,y=ta(o);return h.is(r,y)?e(i.blockPatterns,d).map(w=>n&&Pe.trim(d).length===w.start.length?[]:[{pattern:w,range:sk(h,h.getRoot(),r,0,r,0,l)}]).getOr([]):[]},qZ=e=>/^\s[^\s]/.test(e),KZ=JR((e,n,o)=>{SC(e,n,o).each(r=>{const i=U.fromDom(r),l=Vg(i);qZ(l)&&eT(i,l.slice(1))})}),YZ=QR((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),xC=e8(YZ,!0),XZ=(e,n)=>{const o=e.selection.getRng();return hC(e,o).map(r=>{var i;const l=Math.max(0,o.startOffset),d=pC(n,r,(i=r.textContent)!==null&&i!==void 0?i:""),g=XR(e,r,o.startContainer,l,d,!0),h=xC(e,r,d,!0);return{inlineMatches:g,blockMatches:h}}).filter(({inlineMatches:r,blockMatches:i})=>i.length>0||r.length>0)},JZ=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();pe(n,r=>KZ(e,r)),e.selection.moveToBookmark(o)},lk=JR(SC),uk=QR((e,n,o)=>n===e.start||o===e.start),QZ=e8(uk,!1),eW=(e,n)=>{const o=e.selection.getRng();return hC(e,o).map(r=>{const i=Math.max(0,o.startOffset),l=rk(e.dom,r,o.startContainer,i),d=pC(n,r,l);return QZ(e,r,d,!1,l)}).filter(r=>r.length>0)},t8=(e,n)=>{pe(n,o=>lk(e,o))},tW=(e,n)=>XZ(e,n).fold(ke,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{IT(e),jZ(e,o),JZ(e,r);const i=e.selection.getRng(),l=sg(i.startContainer,i.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),l.each(d=>{const g=d.container;g.data.charAt(d.offset-1)===Cr&&(g.deleteData(d.offset-1,1),fp(e.dom,g.parentNode,h=>h===e.dom.getRoot()))})}),!0)),nW=(e,n)=>{const o=e.selection.getRng();hC(e,o).map(r=>{const i=Math.max(0,o.startOffset-1),l=rk(e.dom,r,o.startContainer,i),d=pC(n,r,l),g=XR(e,r,o.startContainer,i,d,!1);g.length>0&&e.undoManager.transact(()=>{jZ(e,g)})})},oW=(e,n)=>eW(e,n).fold(ke,o=>(e.undoManager.transact(()=>{t8(e,o)}),!0)),n8=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},sW=(e,n)=>n8(e,n,(o,r)=>o===r.keyCode&&!Je.modifierPressed(r)),rW=(e,n)=>n8(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),o8=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>pf(m7(e).filter(d=>d.type==="inline-command"||d.type==="block-command"?e.queryCommandSupported(d.cmd):!0),f7(e)),i=()=>v7(e);e.on("keydown",d=>{if(d.keyCode===13&&!Je.modifierPressed(d)&&e.selection.isCollapsed()&&e.selection.isEditable()){const g=f1(r(),"enter");(g.inlinePatterns.length>0||g.blockPatterns.length>0||i())&&tW(e,g)&&d.preventDefault()}},!0),e.on("keydown",d=>{if(d.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const g=f1(r(),"space");(g.blockPatterns.length>0||i())&&oW(e,g)&&d.preventDefault()}},!0);const l=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const d=f1(r(),"space");(d.inlinePatterns.length>0||i())&&nW(e,d)}};e.on("keyup",d=>{sW(o,d)&&l()}),e.on("keypress",d=>{rW(n,d)&&lc.setEditorTimeout(e,l)})},wC=e=>{o8(e)},s8=e=>{const n=Pe.each,o=Je.BACKSPACE,r=Je.DELETE,i=e.dom,l=e.selection,d=e.parser,g=yn.browser,h=g.isFirefox(),y=g.isChromium()||g.isSafari(),w=yn.deviceType.isiPhone()||yn.deviceType.isiPad(),T=yn.os.isMacOS()||yn.os.isiOS(),_=(ye,Me)=>{try{e.getDoc().execCommand(ye,!1,String(Me))}catch{}},N=ye=>ye.isDefaultPrevented(),P=()=>{const ye=at=>{const qt=i.create("body"),tn=at.cloneContents();return qt.appendChild(tn),l.serializer.serialize(qt,{format:"html"})},Me=at=>{const qt=ye(at),tn=i.createRng();tn.selectNode(e.getBody());const Dn=ye(tn);return qt===Dn};e.on("keydown",at=>{const qt=at.keyCode;if(!N(at)&&(qt===r||qt===o)&&e.selection.isEditable()){const tn=e.selection.isCollapsed(),Dn=e.getBody();if(tn&&!fu(e.schema,Dn)||!tn&&!Me(e.selection.getRng()))return;at.preventDefault(),e.setContent(""),Dn.firstChild&&i.isBlock(Dn.firstChild)?e.selection.setCursorLocation(Dn.firstChild,0):e.selection.setCursorLocation(Dn,0),e.nodeChanged()}})},B=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},F=()=>{e.inline||i.bind(e.getDoc(),"mousedown mouseup",ye=>{let Me;if(ye.target===e.getDoc().documentElement)if(Me=l.getRng(),e.getBody().focus(),ye.type==="mousedown"){if(bs(Me.startContainer))return;l.placeCaretAt(ye.clientX,ye.clientY)}else l.setRng(Me)})},W=()=>{e.on("keydown",ye=>{if(!N(ye)&&ye.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(l.isCollapsed()&&l.getRng().startOffset===0){const Me=l.getNode(),at=Me.previousSibling;if(Me.nodeName==="HR"){i.remove(Me),ye.preventDefault();return}at&&at.nodeName&&at.nodeName.toLowerCase()==="hr"&&(i.remove(at),ye.preventDefault())}}})},Q=()=>{Range.prototype.getClientRects||e.on("mousedown",ye=>{if(!N(ye)&&ye.target.nodeName==="HTML"){const Me=e.getBody();Me.blur(),lc.setEditorTimeout(e,()=>{Me.focus()})}})},te=()=>{const ye=h_(e);e.on("click",Me=>{const at=Me.target;/^(IMG|HR)$/.test(at.nodeName)&&i.isEditable(at)&&(Me.preventDefault(),e.selection.select(at),e.nodeChanged()),at.nodeName==="A"&&i.hasClass(at,ye)&&at.childNodes.length===0&&i.isEditable(at.parentNode)&&(Me.preventDefault(),l.select(at))})},ae=()=>{const ye=Me=>Me.nodeName==="IMG"&&e.dom.isEditable(Me);e.on("mousedown",Me=>{os(O.from(Me.clientX),O.from(Me.clientY),(at,qt)=>{const tn=e.getDoc().caretPositionFromPoint(at,qt);if(tn&&ye(tn.offsetNode)){const Dn=tn.offsetNode.getBoundingClientRect();Me.preventDefault(),e.hasFocus()||e.focus(),e.selection.select(tn.offsetNode),Me.clientX<Dn.left||Me.clientY<Dn.top?e.selection.collapse(!0):(Me.clientX>Dn.right||Me.clientY>Dn.bottom)&&e.selection.collapse(!1)}})})},Se=()=>{const ye=()=>{const at=i.getAttribs(l.getStart().cloneNode(!1));return()=>{const qt=l.getStart();qt!==e.getBody()&&(i.setAttrib(qt,"style",null),n(at,tn=>{qt.setAttributeNode(tn.cloneNode(!0))}))}},Me=()=>!l.isCollapsed()&&i.getParent(l.getStart(),i.isBlock)!==i.getParent(l.getEnd(),i.isBlock);e.on("keypress",at=>{let qt;return!N(at)&&(at.keyCode===8||at.keyCode===46)&&Me()?(qt=ye(),e.getDoc().execCommand("delete",!1),qt(),at.preventDefault(),!1):!0}),i.bind(e.getDoc(),"cut",at=>{if(!N(at)&&Me()){const qt=ye();lc.setEditorTimeout(e,()=>{qt()})}})},De=()=>{e.on("keydown",ye=>{if(!N(ye)&&ye.keyCode===o&&l.isCollapsed()&&l.getRng().startOffset===0){const Me=l.getNode().previousSibling;if(Me&&Me.nodeName&&Me.nodeName.toLowerCase()==="table")return ye.preventDefault(),!1}return!0})},Ke=()=>{e.on("keydown",ye=>{if(N(ye)||ye.keyCode!==Je.BACKSPACE)return;let Me=l.getRng();const at=Me.startContainer,qt=Me.startOffset,tn=i.getRoot();let Dn=at;if(!(!Me.collapsed||qt!==0)){for(;Dn.parentNode&&Dn.parentNode.firstChild===Dn&&Dn.parentNode!==tn;)Dn=Dn.parentNode;Dn.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Dn),Me=i.createRng(),Me.setStart(at,0),Me.setEnd(at,0),l.setRng(Me))}})},ge=()=>{const ye=()=>{_("StyleWithCSS",!1),_("enableInlineTableEditing",!1),a_(e)||_("enableObjectResizing",!1)};m_(e)||e.on("BeforeExecCommand mousedown",ye)},le=()=>{const ye=()=>{n(i.select("a:not([data-mce-block])"),Me=>{var at;let qt=Me.parentNode;const tn=i.getRoot();if((qt==null?void 0:qt.lastChild)===Me){for(;qt&&!i.isBlock(qt);){if(((at=qt.parentNode)===null||at===void 0?void 0:at.lastChild)!==qt||qt===tn)return;qt=qt.parentNode}i.add(qt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Me=>{(Me.type==="setcontent"||Me.command==="mceInsertLink")&&ye()})},Ee=()=>{e.on("init",()=>{_("DefaultParagraphSeparator",ta(e))})},Ge=ye=>{const Me=ye.getBody(),at=ye.selection.getRng();return at.startContainer===at.endContainer&&at.startContainer===Me&&at.startOffset===0&&at.endOffset===Me.childNodes.length},lt=()=>{e.on("keyup focusin mouseup",ye=>{!Je.modifierPressed(ye)&&!Ge(e)&&l.normalize()},!0)},Gt=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Kt=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},_n=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",ye=>{let Me;ye.target.nodeName==="HTML"&&(Me=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Me),e.selection.normalize(),e.nodeChanged())}))},In=()=>{T&&e.on("keydown",ye=>{Je.metaKeyPressed(ye)&&!ye.shiftKey&&(ye.keyCode===37||ye.keyCode===39)&&(ye.preventDefault(),e.selection.getSel().modify("move",ye.keyCode===37?"backward":"forward","lineboundary"))})},Oo=()=>{e.on("click",ye=>{let Me=ye.target;do if(Me.tagName==="A"){ye.preventDefault();return}while(Me=Me.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Bs=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",ye=>{ye.preventDefault()})})},js=()=>{d.addNodeFilter("br",ye=>{let Me=ye.length;for(;Me--;)ye[Me].attr("class")==="Apple-interchange-newline"&&ye[Me].remove()})},$e=ct,it=()=>{if(!h||e.removed)return!1;const ye=e.selection.getSel();return!ye||!ye.rangeCount||ye.rangeCount===0},xn=()=>{y&&(F(),te(),Bs(),B(),w&&(Kt(),_n(),Oo())),h&&(Q(),ge(),Gt(),In())},An=()=>{Ke(),P(),yn.windowsPhone||lt(),y&&(F(),te(),Ee(),Bs(),De(),js(),w?(Kt(),_n(),Oo()):B()),h&&(ae(),W(),Q(),Se(),ge(),le(),Gt(),In(),De())};return Du(e)?xn():An(),{refreshContentEditable:$e,isHidden:it}},r8=e=>e.toLowerCase()==="gpl",aW=e=>e.length>=64&&e.length<=255,iW=e=>r8(e)||aW(e)?"VALID":"INVALID",EC=e=>{const n=w7(e);!re(E7(e))&&(mo(n)||iW(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},dk=Ln.DOM,a8=(e,n)=>{const o=U.fromDom(e.getBody()),r=au(Yi(o)),i=U.fromTag("style");$s(i,"type","text/css"),rs(i,U.fromText(n)),rs(r,i),e.on("remove",()=>{v(i)})},cW=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,kC=e=>Wr(e,n=>mo(n)===!1),i8=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return kC({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),extended_mathml_attributes:n("extended_mathml_attributes"),extended_mathml_elements:n("extended_mathml_elements"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:cW(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:Bv(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},c8=e=>{const n=e.options.get;return kC({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},lW=e=>{const n=e.options.get;return{...i8(e),...c8(e),...kC({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},uW=e=>{const n=Wf(i8(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const i=e.dom,l="data-mce-"+r;let d=o.length;for(;d--;){const g=o[d];let h=g.attr(r);if(h&&!g.attr(l)){if(h.indexOf("data:")===0||h.indexOf("blob:")===0)continue;r==="style"?(h=i.serializeStyle(i.parseStyle(h),g.name),h.length||(h=null),g.attr(l,h),g.attr(r,h)):r==="tabindex"?(g.attr(l,h),g.attr(r,null)):g.attr(l,e.convertURL(h,r,g.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const i=o[r],l=i.attr("type")||"no/type";l.indexOf("mce-")!==0&&i.attr("type","mce-"+l)}}),p7(e)&&n.addNodeFilter("#cdata",o=>{var r;let i=o.length;for(;i--;){const l=o[i];l.type=8,l.name="#comment",l.value="[CDATA["+e.dom.encode((r=l.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const i=e.schema.getNonEmptyElements();for(;r--;){const l=o[r];l.isEmpty(i)&&l.getAll("br").length===0&&l.append(new Sa("br",1))}}),n},dW=e=>{const n=v_(e);n&&lc.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},gp=e=>{const n=e.dom.getRoot();!e.inline&&(!Gv(e)||e.selection.getStart(!0)===n)&&Ar(n).each(o=>{const r=o.getNode(),i=du(r)?Ar(r).getOr(o):o;e.selection.setRng(i.toRange())})},mW=e=>{e.bindPendingEventDelegates(),e.initialized=!0,BP(e),e.focus(!0),gp(e),e.nodeChanged({initial:!0});const n=dG(e);jt(n)&&n.call(e,e),dW(e),il(e)&&v0(e,!0)},mk=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,l8=(e,n,o)=>{const{pass:r,fail:i}=ma(n,g=>tinymce.Resource.has(nE(g))),d=[...r.map(g=>{const h=tinymce.Resource.get(nE(g));return re(h)?Promise.resolve(mk(e).loadRawCss(g,h)):Promise.resolve()}),mk(e).loadAll(i)];return e.inline?d:d.concat([e.ui.styleSheetLoader.loadAll(o)])},u8=e=>{const n=mk(e),o=r_(e),r=e.contentCSS,i=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},l=()=>{e.removed?i():e.on("remove",i)};if(e.contentStyles.length>0){let h="";Pe.each(e.contentStyles,y=>{h+=y+`\r
`}),e.dom.addStyle(h)}const d=Promise.all(l8(e,r,o)).then(l).catch(l),g=s_(e);return g&&a8(e,g),d},fW=e=>{const n=e.getDoc(),o=e.getBody();RP(e),gx(e)||(n.body.spellcheck=!1,dk.setAttrib(o,"spellcheck","false")),e.quirks=s8(e),_v(e);const r=XP(e);r!==void 0&&(o.dir=r);const i=hx(e);i&&e.on("BeforeSetContent",l=>{Pe.each(i,d=>{l.content=l.content.replace(d,g=>"<!--mce:protected "+escape(g)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",l=>{e.composing=l.type==="compositionstart"})},gW=e=>{Du(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},TC=e=>{e.removed!==!0&&(gW(e),mW(e))},hW=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},d8=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(dk.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=m_(e),e._editableRoot=fh(e),!hh(e)&&e.hasEditableRoot()&&(e.inline&&dk.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=GH(e),e.schema=Lr(c8(e)),e.dom=Ln(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:pn(e),referrerPolicy:oc(e),onSetAttrib:d=>{e.dispatch("SetAttrib",d)}}),e.parser=uW(e),e.serializer=TD(lW(e),e),e.selection=ED(e.dom,e.getWin(),e.serializer,e),e.annotator=Xv(e),e.formatter=Xn(e),e.undoManager=uE(e),e._nodeChangeDispatcher=new QN(e),e._selectionOverrides=$Z(e),pV(e),aZ(e),WE(e),Du(e)||(uZ(e),wC(e));const i=I3(e);fV(e,i),yV(e),mE(e),sZ(e);const l=J$(e);fW(e),EC(e),l.fold(()=>{const d=hW(e);u8(e).then(()=>{TC(e),d()})},d=>{e.setProgressState(!0),u8(e).then(()=>{d().then(g=>{e.setProgressState(!1),TC(e),I4(e)},g=>{e.notificationManager.open({type:"error",text:String(g)}),TC(e),I4(e)})})})},m8=Ln.DOM,_C=(e,n,o,r)=>{const i=U.fromTag("iframe");return r.each(l=>$s(i,"tabindex",l)),qa(i,o),qa(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),fo(i,"tox-edit-area__iframe"),i},pW=e=>{let n=o_(e)+"<html><head>";VP(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=lG(e),r=zP(e),i=e.translate(p_(e));return UP(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+UP(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${i}"><br></body></html>`,n},bW=(e,n)=>{const o=yn.browser.isFirefox()?p_(e):"Rich Text Area",r=e.translate(o),i=Xr(U.fromDom(e.getElement()),"tabindex").bind(Zi),l=_C(e.id,r,HP(e),i).dom;l.onload=()=>{l.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=l,e.iframeHTML=pW(e),m8.add(n.iframeContainer,l)},vW=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,d8(e)};if(__(e)||yn.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=Ts(U.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},yW=(e,n)=>{bW(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=m8.isHidden(n.editorContainer)),e.getElement().style.display="none",m8.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,vW(e)},f8=Ln.DOM,CW=(e,n,o)=>{const r=jf.get(o),i=jf.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Pe.trim(o),r&&Pe.inArray(n,o)===-1){if(e.plugins[o])return;try{const l=r(e,i)||{};e.plugins[o]=l,jt(l.init)&&(l.init(e,i),n.push(o))}catch(l){K4(e,o,l)}}},SW=e=>e.replace(/^\-/,""),xW=e=>{const n=[];pe(um(e),o=>{CW(e,n,SW(o))})},wW=e=>{const n=Pe.trim(b1(e)),o=e.ui.registry.getAll().icons,r={...Ih.get("default").icons,...Ih.get(n).icons};Ze(r,(i,l)=>{xt(o,l)||e.ui.registry.addIcon(l,i)})},EW=e=>{const n=dh(e);if(re(n)){const o=Sm.get(n);e.theme=o(e,Sm.urls[n])||{},jt(e.theme.init)&&e.theme.init(e,Sm.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},kW=e=>{const n=Nv(e),o=Cm.get(n);e.model=o(e,Cm.urls[n])},TW=e=>{const n=e.theme.renderUI;return n?n():fk(e)},_W=e=>{const n=e.getElement(),r=dh(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},Jn=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),AW=e=>{const n=f8.create("div");return f8.insertAfter(n,e),Jn(n,n)},fk=e=>{const n=e.getElement();return e.inline?Jn(null):AW(n)},OW=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,re(dh(e))?TW(e):jt(dh(e))?_W(e):fk(e)},gk=(e,n)=>{const o={show:O.from(n.show).getOr(ct),hide:O.from(n.hide).getOr(ct),isEnabled:O.from(n.isEnabled).getOr(ze),setEnabled:r=>{r&&(e.mode.get()==="readonly"||il(e))||O.from(n.setEnabled).each(l=>l(r))}};e.ui={...e.ui,...o}},g8=async e=>{e.dispatch("ScriptsLoaded"),wW(e),EW(e),kW(e),xW(e);const n=await OW(e);gk(e,O.from(n.api).getOr({})),e.editorContainer=n.editorContainer,UH(e),e.inline?d8(e):yW(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},hg=Ln.DOM,h8=e=>e.charAt(0)==="-",DW=(e,n)=>{const o=lm(n),r=KP(n);if(!ps.hasCode(o)&&o!=="en"){const i=dn(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(i).catch(()=>{WD(n,i,o)})}},p8=(e,n)=>{const o=dh(e);if(re(o)&&!h8(o)&&!xt(Sm.urls,o)){const r=e7(e),i=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Sm.load(o,i).catch(()=>{jD(e,i,o)})}},AC=(e,n)=>{const o=Nv(e);if(o!=="plugin"&&!xt(Cm.urls,o)){const r=c_(e),i=re(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;Cm.load(o,i).catch(()=>{GD(e,i,o)})}},MW=e=>O.from(lh(e)).filter(dn).map(n=>({url:n,name:O.none()})),b8=(e,n,o)=>O.from(n).filter(r=>dn(r)&&!Ih.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:O.some(r)})),hk=(e,n,o)=>{const r=b8(n,"default",o),i=MW(n).orThunk(()=>b8(n,b1(n),""));pe(Uu([r,i]),l=>{e.add(l.url).catch(()=>{ZD(n,l.url,l.name.getOrUndefined())})})},NW=(e,n)=>{const o=(r,i)=>{jf.load(r,i).catch(()=>{UD(e,i,r)})};Ze(gh(e),(r,i)=>{o(i,r),e.options.set("plugins",um(e).concat(i))}),pe(um(e),r=>{r=Pe.trim(r),r&&!jf.urls[r]&&!h8(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},RW=e=>{const n=dh(e);return!re(n)||Oe(Sm.get(n))},BW=e=>{const n=Nv(e);return Oe(Cm.get(n))},PW=(e,n)=>{const o=od.ScriptLoader,r=()=>{!e.removed&&RW(e)&&BW(e)&&g8(e)};p8(e,n),AC(e,n),DW(o,e),hk(o,e,n),NW(e,n),o.loadQueue().then(r,r)},v8=(e,n)=>wS.forElement(e,{contentCssCors:f_(n),referrerPolicy:oc(n)}),LW=e=>{const n=e.id;ps.setCode(lm(e));const o=()=>{hg.unbind(window,"ready",o),e.render()};if(!Ol.Event.domLoaded){hg.bind(window,"ready",o);return}if(!e.getElement())return;const r=U.fromDom(e.getElement()),i=Rt(r);e.on("remove",()=>{hi(r.dom.attributes,d=>_s(r,d.name)),qa(r,i)}),e.ui.styleSheetLoader=v8(r,e),kn(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const l=e.getElement().form||hg.getParent(n,"form");l&&(e.formElement=l,u_(e)&&!Zb(e.getElement())&&(hg.insertAfter(hg.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=d=>{e.dispatch(d.type,d)},hg.bind(l,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),fx(e)&&!l.submit.nodeType&&!l.submit.length&&!l._mceOldSubmit&&(l._mceOldSubmit=l.submit,l.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),l._mceOldSubmit(l)))),e.windowManager=h0(e),e.notificationManager=HD(e),y7(e)&&e.on("GetContent",d=>{d.save&&(d.content=hg.encode(d.content))}),r7(e)&&e.on("submit",()=>{e.initialized&&e.save()}),bf(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),PW(e,e.suffix)},IW=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,il(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),IP(e,n))},y8=e=>e._editableRoot,FW=(e,n)=>({sections:qe(e),options:qe(n)}),pk=Mr().deviceType,bk=pk.isPhone(),vk=pk.isTablet(),Y0=e=>{if(hn(e))return[];{const n=Qn(e)?e:e.split(/[ ,]/),o=At(n,bi);return et(o,dn)}},C8=(e,n)=>{const o=Ve(n,(r,i)=>_t(e,i));return FW(o.t,o.f)},$W=(e,n,o={})=>{const r=e.sections(),i=oo(r,n).getOr({});return Pe.extend({},o,i)},X0=(e,n)=>xt(e.sections(),n),HW=(e,n)=>X0(e,n)?e.sections()[n]:{},S8=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:oo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),VW=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Pe.extend({},e.external_plugins,r):r},zW=(e,n)=>[...Y0(e),...Y0(n)],UW=(e,n,o,r)=>e&&X0(n,"mobile")?r:o,x8=(e,n,o,r)=>{const i=Y0(o.forced_plugins),l=Y0(r.plugins),d=HW(n,"mobile"),g=d.plugins?Y0(d.plugins):l,h=UW(e,n,l,g),y=zW(i,h);return Pe.extend(r,{forced_plugins:i,plugins:y})},ZW=(e,n)=>e&&X0(n,"mobile"),w8=(e,n,o,r,i)=>{var l;const d=e?{mobile:S8((l=i.mobile)!==null&&l!==void 0?l:{},n)}:{},g=C8(["mobile"],Es(d,i)),h=Pe.extend(o,r,g.options(),ZW(e,g)?$W(g,"mobile"):{},{external_plugins:VW(r,g.options())});return x8(e,g,r,h)},OC=(e,n)=>{const o=Oc(n);return w8(bk||vk,bk,o,e,o)},yk=(e,n)=>fH(e,n),Ck=e=>{const n=(r,i)=>{e.formatter.toggle(r,i),e.nodeChanged()},o=r=>()=>{pe("left,center,right,justify".split(","),i=>{r!==i&&e.formatter.remove("align"+i)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},WW=e=>{const n=o=>()=>{const r=e.selection,i=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Vn(i,l=>Oe(e.formatter.matchNode(l,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},jW=e=>{Ck(e),WW(e)},hp=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(yn.os.isMacOS()||yn.os.isiOS())&&(i=i.replace(/Ctrl\+/g,"‚åò+")),e.notificationManager.open({text:i,type:"error"})}}})},GW=(e,n,o,r)=>{const i=U.fromDom(e.getRoot());return H1(i,be.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),V1(i,be.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},pp=e=>{if(typeof e!="string"){const n=Pe.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},J0=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?GW(r,o.getRng(),n,e.schema):n},DC=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=pp(n);x4(e,{...r,content:J0(e,o),format:"html",set:!1,selection:!0}).each(i=>{const l=dH(e,i.content,r);w4(e,l,i),e.addVisual()})}},qW=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{DC(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{DC(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{DC(e,r)},mceInsertContent:(n,o,r)=>{DC(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Rv(e))}})},bp={"font-size":"size","font-family":"face"},KW=Fs("font"),Sk=(e,n,o)=>{const r=l=>Nb(l,e).orThunk(()=>KW(l)?oo(bp,e).bind(d=>Xr(l,d)):O.none()),i=l=>sn(U.fromDom(n),l);return Ug(U.fromDom(o),l=>r(l),i)},YW=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),E8=(e,n)=>O.from(Ln.DOM.getStyle(n,e,!0)),xk=e=>(n,o)=>O.from(o).map(U.fromDom).filter(ya).bind(r=>Sk(e,n,r.dom).or(E8(e,r.dom))).getOr(""),wk=xk("font-size"),k8=S(YW,xk("font-family")),XW=e=>Ar(e.getBody()).bind(n=>{const o=n.container();return O.from(Re(o)?o.parentNode:o)}),JW=e=>O.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?O.none():O.from(e.selection.getStart(!0))}),T8=(e,n)=>JW(e).orThunk(Qe(XW,e)).map(U.fromDom).filter(ya).bind(n),Ek=(e,n)=>T8(e,Ua(O.some,n)),kk=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=A_(e),i=O_(e);return i.length>0?i[o-1]||n:r[o-1]||n}else return n}else return n},Tk=e=>{const n=e.split(/\s*,\s*/);return At(n,o=>o.indexOf(" ")!==-1&&!(es(o,'"')||es(o,"'"))?`'${o}'`:o).join(",")},_8=(e,n)=>{const o=kk(e,n);e.formatter.toggle("fontname",{value:Tk(o)}),e.nodeChanged()},QW=e=>Ek(e,n=>k8(e.getBody(),n.dom)).getOr(""),ej=(e,n)=>{e.formatter.toggle("fontsize",{value:kk(e,n)}),e.nodeChanged()},tj=e=>Ek(e,n=>wk(e.getBody(),n.dom)).getOr(""),A8=e=>Ek(e,n=>{const o=U.fromDom(e.getBody()),r=Ug(n,l=>Nb(l,"line-height"),Qe(sn,o)),i=()=>{const l=parseFloat(As(n,"line-height")),d=parseFloat(As(n,"font-size"));return String(l/d)};return r.getOrThunk(i)}).getOr(""),_k=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},nj=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,i)=>{n(o,{value:i})},BackColor:(o,r,i)=>{n("hilitecolor",{value:i})},FontName:(o,r,i)=>{_8(e,i)},FontSize:(o,r,i)=>{ej(e,i)},LineHeight:(o,r,i)=>{_k(e,i)},Lang:(o,r,i)=>{var l;n(o,{value:i.code,customValue:(l=i.customCode)!==null&&l!==void 0?l:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,i)=>{n(re(i)?i:"p")},mceToggleFormat:(o,r,i)=>{n(i)}})},O8=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>QW(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>tj(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>A8(e))},D8=e=>{nj(e),O8(e)},oj=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},M8=e=>{e.editorCommands.addCommands({Indent:()=>{uV(e)},Outdent:()=>{d6(e)}}),e.editorCommands.addCommands({Outdent:()=>Ay(e)},"state")},sj=e=>{const n=(o,r,i)=>{if(e.mode.isReadOnly())return;const l=re(i)?{href:i}:i,d=e.dom.getParent(e.selection.getNode(),"a");Pt(l)&&re(l.href)&&(l.href=l.href.replace(/ /g,"%20"),(!d||!l.href)&&e.formatter.remove("link"),l.href&&e.formatter.apply("link",l,d))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},rj=(e,n,o,r)=>{const i=e.dom,l=g=>i.isBlock(g)&&g.parentElement===o,d=l(n)?n:i.getParent(r,l,o);return O.from(d).map(U.fromDom)},Q0=(e,n)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),i=n?e.selection.getStart():e.selection.getEnd(),l=n?r.startContainer:r.endContainer,d=F0(o,l);if(!d||!d.isContentEditable)return;const g=n?Yr:El,h=ta(e);rj(e,i,d,l).each(y=>{const w=Ky(e,l,y.dom,d,!1,h);g(y,U.fromDom(w)),e.selection.setCursorLocation(w,0),e.dispatch("NewBlock",{newBlock:w}),rp(e,"insertParagraph")})},aj=e=>Q0(e,!0),ij=e=>Q0(e,!1),N8=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{aj(e)},InsertNewBlockAfter:()=>{ij(e)}})},R8=e=>{e.editorCommands.addCommands({insertParagraph:()=>{cp(sU,e)},mceInsertNewLine:(n,o,r)=>{Xy(e,r)},InsertLineBreak:(n,o,r)=>{cp(_3,e)}})},cj=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let i=0;e.dom.getParent(e.selection.getNode(),l=>ot(l)&&i++===r?(e.selection.select(l),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),zc);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},lj=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const i=r??e.selection.getNode();if(i!==e.getBody()){const l=e.selection.getBookmark();e.dom.remove(i,!0),e.selection.moveToBookmark(l)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{yG(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},uj=e=>{jW(e),hp(e),oj(e),cj(e),qW(e),sj(e),M8(e),N8(e),R8(e),D8(e),lj(e)},dj=["toggleview"],B8=e=>_t(dj,e.toLowerCase());class Ak{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,i){const l=this.editor,d=n.toLowerCase(),g=i==null?void 0:i.skip_focus;if(l.removed||(d!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(d)&&!g?l.focus():bL(l)),l.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const y=this.commands.exec[d];return jt(y)?(y(d,o,r),l.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!B8(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return jt(r)?r(o):!1}queryCommandValue(n){if(!B8(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return jt(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;Ze(n,(i,l)=>{pe(l.toLowerCase().split(","),d=>{r[o][d]=i})})}addCommand(n,o,r){const i=n.toLowerCase();this.commands.exec[i]=(l,d,g)=>o.call(r??this.editor,d,g)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const mj=Pe.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Ok{static isNative(n){return!!mj[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||ke}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),i=cf(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);const l=this.bindings[r];if(l)for(let d=0,g=l.length;d<g;d++){const h=l[d];if(!h.removed){if(h.once&&this.off(r,h.func),i.isImmediatePropagationStopped())return i;if(h.func.call(this.scope,i)===!1)return i.preventDefault(),i}}return i}on(n,o,r,i){if(o===!1&&(o=ke),o){const l={func:o,removed:!1};i&&Pe.extend(l,i);const d=n.toLowerCase().split(" ");let g=d.length;for(;g--;){const h=d[g];let y=this.bindings[h];y||(y=[],this.toggleEvent(h,!0)),r?y=[l,...y]:y=[...y,l],this.bindings[h]=y}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let i=r.length;for(;i--;){const l=r[i];let d=this.bindings[l];if(!l)return Ze(this.bindings,(g,h)=>{this.toggleEvent(h,!1),delete this.bindings[h]}),this;if(d){if(!o)d.length=0;else{const g=ma(d,h=>h.func===o);d=g.fail,this.bindings[l]=d,pe(g.pass,h=>{h.removed=!0})}d.length||(this.toggleEvent(n,!1),delete this.bindings[l])}}}else Ze(this.bindings,(r,i)=>{this.toggleEvent(i,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const eb=e=>(e._eventDispatcher||(e._eventDispatcher=new Ok({scope:e,toggleEvent:(n,o)=>{Ok.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),Dk={fire(e,n,o){return console.warn('The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',new Error().stack),this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return cf(e.toLowerCase(),n??{},r);const i=eb(r).dispatch(e,n);if(o!==!1&&r.parent){let l=r.parent();for(;l&&!i.isPropagationStopped();)l.dispatch(e,i,!1),l=l.parent?l.parent():void 0}return i},on(e,n,o){return eb(this).on(e,n,o)},off(e,n){return eb(this).off(e,n)},once(e,n){return eb(this).once(e,n)},hasEventListeners(e){return eb(this).has(e)}},MC=Ln.DOM;let pg;const NC=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=i_(e);return o?(e.eventRoot||(e.eventRoot=MC.select(o)[0]),e.eventRoot):e.getBody()},fj=e=>!e.hidden&&!il(e),Mk=(e,n,o)=>{fj(e)?e.dispatch(n,o):il(e)&&tE(e,o)},Nk=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=NC(e,n);if(i_(e)){if(pg||(pg={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||pg&&(Ze(pg,(i,l)=>{e.dom.unbind(NC(e,l))}),pg=null)})),pg[n])return;const r=i=>{const l=i.target,d=e.editorManager.get();let g=d.length;for(;g--;){const h=d[g].getBody();(h===l||MC.isChildOf(l,h))&&Mk(d[g],n,i)}};pg[n]=r,MC.bind(o,n,r)}else{const r=i=>{Mk(e,n,i)};MC.bind(o,n,r),e.delegates[n]=r}},P8={...Dk,bindPendingEventDelegates(){const e=this;Pe.each(e._pendingNativeEvents,n=>{Nk(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?Nk(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(NC(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(Ze(e.delegates,(r,i)=>{e.dom.unbind(NC(e,i),i,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},gj=e=>re(e)?{value:e.split(/[ ,]/),valid:!0}:gn(e,re)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},hj=e=>{const n=(()=>{switch(e){case"array":return Qn;case"boolean":return $t;case"function":return jt;case"number":return No;case"object":return Pt;case"string":return re;case"string[]":return gj;case"object[]":return o=>gn(o,Pt);case"regexp":return o=>kt(o,RegExp);default:return ze}})();return o=>RC(o,n,`The value must be a ${e}.`)},tb=e=>re(e.processor),L8=(e,n)=>{const o=Dc(n.message)?"":`. ${n.message}`;return e+o},I8=e=>e.valid,RC=(e,n,o="")=>{const r=n(e);return $t(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},pj=(e,n,o)=>{if(!mo(n)){const r=RC(n,o);if(I8(r))return r.value;console.error(L8(`Invalid default value passed for the "${e}" option`,r))}},bj=(e,n,o=n)=>{const r={},i={},l=(N,P,B)=>{const F=RC(P,B);return I8(F)?(i[N]=F.value,!0):(console.warn(L8(`Invalid value passed for the ${N} option`,F)),!1)},d=(N,P)=>{const B=tb(P)?hj(P.processor):P.processor,F=pj(N,P.default,B);r[N]={...P,default:F,processor:B},oo(i,N).orThunk(()=>oo(n,N)).each(Q=>l(N,Q,B))},g=N=>xt(r,N);return{register:d,isRegistered:g,get:N=>oo(i,N).orThunk(()=>oo(r,N).map(P=>P.default)).getOrUndefined(),set:(N,P)=>{if(g(N)){const B=r[N];return B.immutable?(console.error(`"${N}" is an immutable option and cannot be updated`),!1):l(N,P,B.processor)}else return console.warn(`"${N}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:N=>{const P=g(N);return P&&delete i[N],P},isSet:N=>xt(i,N),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(N,P)=>$t(P)||No(P)||re(P)||ee(P)||Qn(P)||Aa(P)?P:Object.prototype.toString.call(P))))}catch(N){console.error(N)}}}},vj=(e,n)=>{e.dom.contentEditable="true"},yj=(e,n)=>{const o=U.fromDom(e.getBody());n?(e.readonly=!0,e.hasEditableRoot()&&vj(o),X4(e)):(e.readonly=!1,ly(e))},vp=e=>e.readonly,BC=e=>{const n=e.undoManager.add();Oe(n)&&(e.undoManager.undo(),e.undoManager.reset())},F8=e=>Vn(e,n=>n.type==="characterData"||n.type==="childList"),$8=e=>{const n=r=>{vp(e)&&F8(r)&&BC(e)},o=new MutationObserver(n);e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",r=>{vp(e)&&r.preventDefault()}),e.on("BeforeExecCommand",r=>{(r.command==="Undo"||r.command==="Redo")&&vp(e)&&r.preventDefault()}),e.on("compositionstart",()=>{vp(e)&&o.observe(e.getBody(),{characterData:!0,childList:!0,subtree:!0})}),e.on("compositionend",()=>{if(vp(e)){const r=o.takeRecords();n(r)}o.disconnect()})},Cj=["design","readonly"],H8=(e,n,o,r)=>{const i=o[n.get()],l=o[r];try{l.activate()}catch(d){console.error(`problem while activating editor mode ${r}:`,d);return}i.deactivate(),i.editorReadOnly!==l.editorReadOnly&&yj(e,l.editorReadOnly),n.set(r),NP(e,r)},Sj=(e,n,o,r)=>{if(!(r===o.get()||e.initialized&&il(e))){if(!xt(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?H8(e,o,n,r):e.on("init",()=>H8(e,o,n,r))}},pq=(e,n,o)=>{if(_t(Cj,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},xj=e=>{const n=To("design"),o=To({design:{activate:ct,deactivate:ct,editorReadOnly:!1},readonly:{activate:ct,deactivate:ct,editorReadOnly:!0}});return $8(e),wm(e),{isReadOnly:()=>vp(e),set:r=>Sj(e,o.get(),n,r),get:()=>n.get(),register:(r,i)=>{o.set(pq(o.get(),r,i))}}},Rk=Pe.each,nb=Pe.explode,PC={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},V8=Pe.makeMap("alt,ctrl,shift,meta,access"),wj=e=>e in V8,Ej=e=>{const n={},o=yn.os.isMacOS()||yn.os.isiOS();Rk(nb(e.toLowerCase(),"+"),l=>{wj(l)?n[l]=!0:/^[0-9]{2,}$/.test(l)?n.keyCode=parseInt(l,10):(n.charCode=l.charCodeAt(0),n.keyCode=PC[l]||l.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let i;for(i in V8)n[i]?r.push(i):n[i]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class Bk{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(Rk(o.shortcuts,i=>{o.matchShortcut(r,i)&&(o.pendingPatterns=i.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(i))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,i){const l=this,d=l.normalizeCommandFunc(r);return Rk(nb(Pe.trim(n)),g=>{const h=l.createShortcut(g,o,d,i);l.shortcuts[h.id]=h}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Pe.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,i){const l=Pe.map(nb(n,">"),Ej);return l[l.length-1]=Pe.extend(l[l.length-1],{func:r,scope:i||this.editor}),Pe.extend(l[0],{desc:this.editor.translate(o),subpatterns:l.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const kj=()=>{const e=wN();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},Nd=Ln.DOM,Pk=Pe.extend,Tj=Pe.each;class LC{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,Pk(this,P8);const i=this;this.id=n,this.hidden=!1;const l=OC(r.defaultOptions,o);this.options=bj(i,l,o),Dt(i);const d=this.options.get;d("deprecation_warnings")&&$H(o,l);const g=d("suffix");g&&(r.suffix=g),this.suffix=r.suffix;const h=d("base_url");h&&r._setBaseUrl(h),this.baseUri=r.baseURI;const y=oc(i);y&&(od.ScriptLoader._setReferrerPolicy(y),Ln.DOM.styleSheetLoader._setReferrerPolicy(y));const w=f_(i);Oe(w)&&Ln.DOM.styleSheetLoader._setContentCssCors(w),Vs.languageLoad=d("language_load"),Vs.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new sl(VP(i),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=kn(i),this.hasVisual=g_(i),this.shortcuts=new Bk(this),this.editorCommands=new Ak(this),uj(this);const T=d("cache_suffix");T&&(yn.cacheSuffix=T.replace(/^[\?\&]+/,"")),this.ui={registry:kj(),styleSheetLoader:void 0,show:ct,hide:ct,setEnabled:ct,isEnabled:ze},this.mode=xj(i),r.dispatch("SetupEditor",{editor:this});const _=b_(i);jt(_)&&_.call(i,i)}render(){LW(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return kf(this)}translate(n){return ps.translate(n)}getParam(n,o,r){const i=this.options;return i.isRegistered(n)||(Oe(r)?i.register(n,{processor:r,default:o}):i.register(n,{processor:ze,default:o})),!i.isSet(n)&&!mo(o)?o:i.get(n)}hasPlugin(n,o){return _t(um(this),n)?o?jf.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,i){this.shortcuts.add(n,o,r,i)}execCommand(n,o,r,i){return this.editorCommands.execCommand(n,o,r,i)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Nd.show(n.getContainer()),Nd.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Nd.hide(n.getContainer()),Nd.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const i={...n,load:!0},l=Zb(r)?r.value:r.innerHTML,d=o.setContent(l,i);return i.no_events||o.dispatch("LoadContent",{...i,element:r}),d}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const i={...n,save:!0,element:r};let l=o.getContent(i);const d={...i,content:l};if(d.no_events||o.dispatch("SaveContent",d),d.format==="raw"&&o.dispatch("RawSaveContent",d),l=d.content,Zb(r))r.value=l;else{(n.is_removing||!o.inline)&&(r.innerHTML=l);const g=Nd.getParent(o.id,"form");g&&Tj(g.elements,h=>h.name===o.id?(h.value=l,!1):!0)}return d.element=i.element=r=null,d.set_dirty!==!1&&o.setDirty(!1),l}setContent(n,o){return vm(this,n,o)}getContent(n){return NH(this,n)}insertContent(n,o){o&&(n=Pk({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?vm(this,this.startContent,{format:"raw"}):vm(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||Nd.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Nd.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const i=this,l=i.options.get,d=l7(i);if(jt(d))return d.call(i,n,r,!0,o);if(!l("convert_urls")||r==="link"||Pt(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const g=new sl(n);return g.protocol!=="http"&&g.protocol!=="https"&&g.protocol!==""?n:l("relative_urls")?i.documentBaseURI.toRelative(n):(n=i.documentBaseURI.toAbsolute(n,l("remove_script_host")),n)}addVisual(n){yk(this,n)}setEditableRoot(n){IW(this,n)}hasEditableRoot(){return y8(this)}remove(){ND(this)}destroy(n){RD(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const bg=Ln.DOM,IC=Pe.each;let _j=!1,FC,Fa=[];const $C=e=>{const n=e.type;IC(Mm.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},Lk=e=>{if(e!==_j){const n=Ln.DOM;e?(n.bind(window,"resize",$C),n.bind(window,"scroll",$C)):(n.unbind(window,"resize",$C),n.unbind(window,"scroll",$C)),_j=e}},vg=e=>{const n=Fa;return Fa=et(Fa,o=>e!==o),Mm.activeEditor===e&&(Mm.activeEditor=Fa.length>0?Fa[0]:null),Mm.focusedEditor===e&&(Mm.focusedEditor=null),n.length!==Fa.length},z8=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(vg(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},Aj=document.compatMode!=="CSS1Compat",Mm={...Dk,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"9.0",releaseDate:"2025-05-15",i18n:ps,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=sl.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const i=window.tinymce||window.tinyMCEPreInit;if(i)n=i.base||i.baseURL,o=i.suffix;else{const l=document.getElementsByTagName("script");for(let d=0;d<l.length;d++){const g=l[d].src||"";if(g==="")continue;const h=g.substring(g.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(g)){h.indexOf(".min")!==-1&&(o=".min"),n=g.substring(0,g.lastIndexOf("/"));break}}if(!n&&document.currentScript){const d=document.currentScript.src;d.indexOf(".min")!==-1&&(o=".min"),n=d.substring(0,d.lastIndexOf("/"))}}e.baseURL=new sl(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new sl(e.baseURL),e.suffix=o,OL(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&Ze(r,(i,l)=>{Vs.PluginManager.urls[l]=i})},init(e){const n=this;let o;const r=Pe.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),i=(w,T)=>w.inline&&T.tagName.toLowerCase()in r,l=w=>{let T=w.id;return T||(T=oo(w,"name").filter(_=>!bg.get(_)).getOrThunk(bg.uniqueId),w.setAttribute("id",T)),T},d=w=>{const T=e[w];if(T)return T.apply(n,[])},g=w=>yn.browser.isIE()||yn.browser.isEdge()?(b0("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):Aj?(b0("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):re(w.selector)?bg.select(w.selector):Oe(w.target)?[w.target]:[];let h=w=>{o=w};const y=()=>{let w=0;const T=[];let _;const N=(P,B,F)=>{const W=new LC(P,B,n);T.push(W),W.on("init",()=>{++w===_.length&&h(T)}),W.targetElm=W.targetElm||F,W.render()};bg.unbind(window,"ready",y),d("onpageload"),_=Vi(g(e)),Pe.each(_,P=>{z8(n.get(P.id))}),_=Pe.grep(_,P=>!n.get(P.id)),_.length===0?h([]):IC(_,P=>{i(e,P)?b0("Could not initialize inline editor on invalid inline target element",P):N(l(P),e,P)})};return bg.bind(window,"ready",y),new Promise(w=>{o?w(o):h=T=>{w(T)}})},get(e){return arguments.length===0?Fa.slice(0):re(e)?ko(Fa,n=>n.id===e).getOr(null):No(e)&&Fa[e]?Fa[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Fa.push(e),Lk(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),FC||(FC=r=>{const i=n.dispatch("BeforeUnload");if(i.returnValue)return r.preventDefault(),r.returnValue=i.returnValue,i.returnValue},window.addEventListener("beforeunload",FC))),e},createEditor(e,n){return this.add(new LC(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Fa.length-1;r>=0;r--)n.remove(Fa[r]);return}if(re(e)){IC(bg.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,ee(n.get(o.id))?null:(vg(o)&&n.dispatch("RemoveEditor",{editor:o}),Fa.length===0&&window.removeEventListener("beforeunload",FC),o.remove(),Lk(Fa.length>0),o)},execCommand(e,n,o){var r;const i=this,l=Pt(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!i.get(l)){const d=o.options;new LC(l,d,i).render()}return!0}case"mceRemoveEditor":{const d=i.get(l);return d&&d.remove(),!0}case"mceToggleEditor":{const d=i.get(l);return d?(d.isHidden()?d.show():d.hide(),!0):(i.execCommand("mceAddEditor",!1,o),!0)}}return i.activeEditor?i.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{IC(Fa,e=>{e.save()})},addI18n:(e,n)=>{ps.add(e,n)},translate:e=>ps.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new sl(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new sl(this.baseURL)}};Mm.setup();const Oj=(()=>{const e=br(),n=l=>({items:l,types:ws(l),getType:d=>oo(l,d).getOrUndefined()}),o=l=>{e.set(l)},r=()=>e.get().getOrUndefined(),i=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:i}})(),Ik=Math.min,yp=Math.max,ob=Math.round,U8=(e,n,o)=>{let r=n.x,i=n.y;const l=e.w,d=e.h,g=n.w,h=n.h,y=(o||"").split("");return y[0]==="b"&&(i+=h),y[1]==="r"&&(r+=g),y[0]==="c"&&(i+=ob(h/2)),y[1]==="c"&&(r+=ob(g/2)),y[3]==="b"&&(i-=d),y[4]==="r"&&(r-=l),y[3]==="c"&&(i-=ob(d/2)),y[4]==="c"&&(r-=ob(l/2)),Cp(r,i,l,d)},Dj=(e,n,o,r)=>{for(let i=0;i<r.length;i++){const l=U8(e,n,r[i]);if(l.x>=o.x&&l.x+l.w<=o.w+o.x&&l.y>=o.y&&l.y+l.h<=o.h+o.y)return r[i]}return null},Fk=(e,n,o)=>Cp(e.x-n,e.y-o,e.w+n*2,e.h+o*2),Z8=(e,n)=>{const o=yp(e.x,n.x),r=yp(e.y,n.y),i=Ik(e.x+e.w,n.x+n.w),l=Ik(e.y+e.h,n.y+n.h);return i-o<0||l-r<0?null:Cp(o,r,i-o,l-r)},vq=(e,n,o)=>{let r=e.x,i=e.y,l=e.x+e.w,d=e.y+e.h;const g=n.x+n.w,h=n.y+n.h,y=yp(0,n.x-r),w=yp(0,n.y-i),T=yp(0,l-g),_=yp(0,d-h);return r+=y,i+=w,o&&(l+=y,d+=w,r-=T,i-=_),l-=T,d-=_,Cp(r,i,l-r,d-i)},Cp=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),Nj={inflate:Fk,relativePosition:U8,findBestRelativePosition:Dj,intersect:Z8,clamp:vq,create:Cp,fromClientRect:e=>Cp(e.left,e.top,e.width,e.height)},$k=(e,n,o=1e3)=>{let r=!1,i=null;const l=y=>(...w)=>{r||(r=!0,i!==null&&(window.clearTimeout(i),i=null),y.apply(null,w))},d=l(e),g=l(n);return{start:(...y)=>{!r&&i===null&&(i=window.setTimeout(()=>g.apply(null,y),o))},resolve:d,reject:g}},Rj=(()=>{const e={},n={},o={};return{load:(h,y)=>{const w=`Script at URL "${y}" failed to load`,T=`Script at URL "${y}" did not call \`tinymce.Resource.add('${h}', data)\` within 1 second`;if(e[h]!==void 0)return e[h];{const _=new Promise((N,P)=>{const B=$k(N,P);n[h]=B.resolve,od.ScriptLoader.loadScript(y).then(()=>B.start(T),()=>B.reject(w))});return e[h]=_,_}},add:(h,y)=>{n[h]!==void 0&&(n[h](y),delete n[h]),e[h]=Promise.resolve(y),o[h]=y},has:h=>h in o,get:h=>o[h],unload:h=>{delete e[h],delete o[h]}}})(),Bj=()=>(()=>{let e={},n=[];const o={getItem:r=>{const i=e[r];return i||null},setItem:(r,i)=>{n.push(r),e[r]=String(i)},key:r=>n[r],removeItem:r=>{n=n.filter(i=>i===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let Sp;try{const e="__storage_test__";Sp=window.localStorage,Sp.setItem(e,e),Sp.removeItem(e)}catch{Sp=Bj()}var HC=Sp;const W8={geom:{Rect:Nj},util:{Delay:lc,Tools:Pe,VK:Je,URI:sl,EventDispatcher:Ok,Observable:Dk,I18n:ps,LocalStorage:HC,ImageUploader:aE},dom:{EventUtils:Ol,TreeWalker:dr,TextSeeker:bu,DOMUtils:Ln,ScriptLoader:od,RangeUtils:Oi,Serializer:TD,StyleSheetLoader:of,ControlSelection:SA,BookmarkManager:N1,Selection:ED,Event:Ol.Event},html:{Styles:hu,Entities:so,Node:Sa,Schema:Lr,DomParser:Wf,Writer:mw,Serializer:vd},Env:yn,AddOnManager:Vs,Annotator:Xv,Formatter:Xn,UndoManager:uE,EditorCommands:Ak,WindowManager:h0,NotificationManager:HD,EditorObservable:P8,Shortcuts:Bk,Editor:LC,FocusManager:cc,EditorManager:Mm,DOM:Ln.DOM,ScriptLoader:od.ScriptLoader,PluginManager:jf,ThemeManager:Sm,ModelManager:Cm,IconManager:Ih,Resource:Rj,FakeClipboard:Oj,trim:Pe.trim,isArray:Pe.isArray,is:Pe.is,toArray:Pe.toArray,makeMap:Pe.makeMap,each:Pe.each,map:Pe.map,grep:Pe.grep,inArray:Pe.inArray,extend:Pe.extend,walk:Pe.walk,resolve:Pe.resolve,explode:Pe.explode,_addCacheSuffix:Pe._addCacheSuffix},Hk=Pe.extend(Mm,W8),Pj=e=>{try{fn.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(Hk),Pj(Hk)})()})(fK);var MY=fK.exports;const Ul=jK(MY);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12.7 18.3a1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7 1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7v-1a1 1 0 0 0-.3-.7ZM11.3 5.7a1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3A1 1 0 0 0 13 5V4a1 1 0 0 0-.3-.7A1 1 0 0 0 12 3a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7Zm9.4 5.6a1 1 0 0 0-.7-.3h-1a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7Zm-15 1.4A1 1 0 0 0 6 12a1 1 0 0 0-.3-.7A1 1 0 0 0 5 11H4a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3Zm13 4.6-.7-.8a1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.8l.7.7a1 1 0 0 0 .7.3 1 1 0 0 0 .8-.3 1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7ZM5.3 6.7l.7.8a1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.8l-.7-.7A1 1 0 0 0 6 5a1 1 0 0 0-.8.3 1 1 0 0 0-.3.8 1 1 0 0 0 .3.6Zm12 1a1 1 0 0 0 .7-.2l.7-.7A1 1 0 0 0 19 6a1 1 0 0 0-.3-.8 1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3l-.7.7a1 1 0 0 0-.3.8 1 1 0 0 0 .3.7 1 1 0 0 0 .7.2ZM6.7 16.4a1 1 0 0 0-.8.2l-.7.7a1 1 0 0 0-.3.7 1 1 0 0 0 .3.8 1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3l.7-.7a1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3Z"/><path fill-rule="evenodd" d="M13.6 8.3A4 4 0 0 0 12 8a4 4 0 0 0-1.6.3A4 4 0 0 0 9 9.5a4 4 0 0 0-.6 1A4 4 0 0 0 8 12c0 .6.1 1 .3 1.6a4 4 0 0 0 2.1 2 4 4 0 0 0 1.6.4 4 4 0 0 0 1.6-.3 4 4 0 0 0 2-2.1A4 4 0 0 0 16 12a4 4 0 0 0-.3-1.6 4 4 0 0 0-2.1-2ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24" class="color-swatch-remove-color"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 0 1 19.4 9c.4 1 .6 2 .6 3.1s-.2 2.1-.6 3.1a8 8 0 0 1-1.7 2.6 8 8 0 0 1-2.6 1.7 7.8 7.8 0 0 1-3.1.6 7.8 7.8 0 0 1-3.1-.6 8 8 0 0 1-2.6-1.7A8 8 0 0 1 4.6 15 7.8 7.8 0 0 1 4 12c0-1.1.2-2.1.6-3.1a8 8 0 0 1 1.7-2.6A8 8 0 0 1 9 4.6 7.8 7.8 0 0 1 12 4Zm-6 8a6 6 0 0 0 1.8 4.2 6 6 0 0 0 1.9 1.3 5.8 5.8 0 0 0 2.3.5V6c-.8 0-1.6.2-2.3.5a6 6 0 0 0-2 1.3 6 6 0 0 0-1.2 1.9A5.8 5.8 0 0 0 6 12Z"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg height="24" width="24"><path d="M11.5 16.3a.7.7 0 1 0 1.4 0V14l2.7-6a.7.7 0 1 0-1.2-.6l-2.2 5-2.3-4.9C9.6 7 8.7 7 8 7.2v1.1c.8-.2.9 0 1.2 1l2.3 4.7z"/><path d="M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2h14v14H5z" fill-rule="evenodd"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg height="24" width="24"><path d="M5 4 3.6 5.4l3.9 4C6.6 10.7 6 12.3 6 14a6 6 0 0 0 10.3 4.2l1.9 1.8 1.4-1.4z" fill-rule="evenodd"/><path d="M13.4 8.4c.9 1 1.6 2.1 2 3.2l2.6 2.6V14c0-5-6-10-6-10s-1 .8-2.1 2l1.4 1.5.7-.7 1.4 1.6z"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg height="48" width="48"><path d="M8 14a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 34a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-default":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M12 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M16 31h6v6h-6z"/><path d="M16 31h6v6h-6z"/><path d="M18 12h22v4H18zm4 10h18v4H22zm4 10h14v4H26z" opacity=".2"/></svg>',"list-bull-disc":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-square":'<svg height="48" width="48"><path d="M8 21h6v6H8zm0 10h6v6H8zm0-20h6v6H8z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path fill-rule="evenodd" d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',"auto-image-enhancement":'<svg width="24" height="24"><path d="M7.7 10.6a5.8 5.8 0 0 0 5.7 5.7A5.8 5.8 0 0 0 7.7 22 5.8 5.8 0 0 0 2 16.3a5.8 5.8 0 0 0 5.7-5.7ZM15.5 2c.3 3 3.3 6 6.5 6.4-3.2.5-6.2 3.4-6.5 6.5-.3-3.4-3-6-6.4-6.5 3.3-.5 6.1-3 6.4-6.4Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><path d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.4 0H19v3.6zm-2.8 0h-2.2l8.6 8.6v-2.2zm-5 0H5l14 14v-2.6z" fill-rule="evenodd"/></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"photo-filter":'<svg height="24" width="24"><path d="M4.4 21c-.3 0-.6-.2-.9-.5-.3-.3-.4-.6-.5-.9L19.6 3c.3 0 .6.3.9.5l.5.9zM3 14.7v-2.8L11.9 3h2.8zM3 7V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h2zm14 14 4-4v2c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm-7.7 0L21 9.3v2.8L12 21z"/></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',vibrance:'<svg height="24" width="24"><path d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var fn=tinymce.util.Tools.resolve("tinymce.PluginManager");const I=(M,$,J)=>{var Ce;return J(M,$.prototype)?!0:((Ce=M.constructor)===null||Ce===void 0?void 0:Ce.name)===$.name},Co=M=>{const $=typeof M;return M===null?"null":$==="object"&&Array.isArray(M)?"array":$==="object"&&I(M,String,(J,Ce)=>Ce.isPrototypeOf(J))?"string":$},Z=M=>$=>Co($)===M,Fn=M=>$=>typeof $===M,ns=M=>$=>M===$,ln=Z("string"),Tt=Z("object"),rr=Z("array"),_c=ns(null),X=Fn("boolean"),$n=M=>M==null,yo=M=>!$n(M),ar=Fn("function"),pl=(M,$)=>{if(rr(M)){for(let J=0,Ce=M.length;J<Ce;++J)if(!$(M[J]))return!1;return!0}return!1},uo=()=>{},Cs=M=>()=>M,Zr=(M,$)=>M===$;class kt{constructor($,J){this.tag=$,this.value=J}static some($){return new kt(!0,$)}static none(){return kt.singletonNone}fold($,J){return this.tag?J(this.value):$()}isSome(){return this.tag}isNone(){return!this.tag}map($){return this.tag?kt.some($(this.value)):kt.none()}bind($){return this.tag?$(this.value):kt.none()}exists($){return this.tag&&$(this.value)}forall($){return!this.tag||$(this.value)}filter($){return!this.tag||$(this.value)?this:kt.none()}getOr($){return this.tag?this.value:$}or($){return this.tag?this:$}getOrThunk($){return this.tag?this.value:$()}orThunk($){return this.tag?this:$()}getOrDie($){if(this.tag)return this.value;throw new Error($??"Called getOrDie on None")}static from($){return yo($)?kt.some($):kt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each($){this.tag&&$(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}kt.singletonNone=new kt(!1);const re=Array.prototype.indexOf,Pt=Array.prototype.push,Aa=(M,$)=>re.call(M,$),Qn=(M,$)=>Aa(M,$)>-1,ee=(M,$)=>{const J=M.length,Ce=new Array(J);for(let Le=0;Le<J;Le++){const Xe=M[Le];Ce[Le]=$(Xe,Le)}return Ce},$t=(M,$)=>{for(let J=0,Ce=M.length;J<Ce;J++){const Le=M[J];$(Le,J)}},mo=(M,$,J)=>($t(M,(Ce,Le)=>{J=$(J,Ce,Le)}),J),hn=M=>{const $=[];for(let J=0,Ce=M.length;J<Ce;++J){if(!rr(M[J]))throw new Error("Arr.flatten item "+J+" was not an array, input: "+M);Pt.apply($,M[J])}return $},Oe=(M,$)=>hn(ee(M,$)),jt=(M,$)=>{for(let J=0;J<M.length;J++){const Ce=$(M[J],J);if(Ce.isSome())return Ce}return kt.none()},No=Object.keys,gn=Object.hasOwnProperty,ct=(M,$)=>{const J=No(M);for(let Ce=0,Le=J.length;Ce<Le;Ce++){const Xe=J[Ce],Xt=M[Xe];$(Xt,Xe)}},S=M=>($,J)=>{M[J]=$},Ua=(M,$,J,Ce)=>{ct(M,(Le,Xe)=>{($(Le,Xe)?J:Ce)(Le,Xe)})},qe=(M,$)=>{const J={};return Ua(M,$,S(J),uo),J},ds=(M,$)=>gn.call(M,$),Hi=(M,$)=>ds(M,$)&&M[$]!==void 0&&M[$]!==null,Qe=M=>{let $=M;return{get:()=>$,set:Le=>{$=Le}}},jn=(M,$,J=Zr)=>M.exists(Ce=>J(Ce,$)),ms=M=>{const $=[],J=Ce=>{$.push(Ce)};for(let Ce=0;Ce<M.length;Ce++)M[Ce].each(J);return $},Hn=(M,$)=>M?kt.some($):kt.none(),fi=M=>{const $=Qe(kt.none()),J=()=>$.get().each(M);return{clear:()=>{J(),$.set(kt.none())},isSet:()=>$.get().isSome(),get:()=>$.get(),set:Fo=>{J(),$.set(kt.some(Fo))}}},ke=()=>{const M=fi(uo);return{...M,on:J=>M.get().each(J)}},ze=(M,$)=>M.substring($),O=(M,$,J)=>$===""||M.length>=$.length&&M.substr(J,J+$.length)===$,gi=(M,$)=>Zn(M,$)?ze(M,$.length):M,Zn=(M,$)=>O(M,$,0),Jo=M=>$=>$.options.get(M),Qo=M=>{const $=M.options.register;$("link_assume_external_targets",{processor:J=>{const Ce=ln(J)||X(J);return Ce?J===!0?{value:1,valid:Ce}:J==="http"||J==="https"?{value:J,valid:Ce}:{value:0,valid:Ce}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),$("link_context_toolbar",{processor:"boolean",default:!1}),$("link_list",{processor:J=>ln(J)||ar(J)||pl(J,Tt)}),$("link_default_target",{processor:"string"}),$("link_default_protocol",{processor:"string",default:"https"}),$("link_target_list",{processor:J=>X(J)||pl(J,Tt),default:!0}),$("link_rel_list",{processor:"object[]",default:[]}),$("link_class_list",{processor:"object[]",default:[]}),$("link_title",{processor:"boolean",default:!0}),$("allow_unsafe_link_target",{processor:"boolean",default:!1}),$("link_quicklink",{processor:"boolean",default:!1}),$("link_attributes_postprocess",{processor:"function"})},Fu=Jo("link_assume_external_targets"),_t=Jo("link_context_toolbar"),Vn=Jo("link_list"),At=Jo("link_default_target"),pe=Jo("link_default_protocol"),hi=Jo("link_target_list"),ma=Jo("link_rel_list"),et=Jo("link_class_list"),Ac=Jo("link_title"),Ss=Jo("allow_unsafe_link_target"),Wl=Jo("link_quicklink"),ko=Jo("link_attributes_postprocess");var Ps=tinymce.util.Tools.resolve("tinymce.util.URI"),fa=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ls=tinymce.util.Tools.resolve("tinymce.util.Tools");const nn=M=>yo(M)&&M.nodeName.toLowerCase()==="a",eo=M=>nn(M)&&!!Gn(M),bl=(M,$)=>{if(M.collapsed)return[];{const J=M.cloneContents(),Ce=J.firstChild,Le=new fa(Ce,J),Xe=[];let Xt=Ce;do $(Xt)&&Xe.push(Xt);while(Xt=Le.next());return Xe}},jo=M=>/^\w+:/i.test(M),Gn=M=>{var $,J;return(J=($=M.getAttribute("data-mce-href"))!==null&&$!==void 0?$:M.getAttribute("href"))!==null&&J!==void 0?J:""},Za=(M,$)=>{const J=["noopener"],Ce=M?M.split(/\s+/):[],Le=Rn=>Ls.trim(Rn.sort().join(" ")),Xe=Rn=>(Rn=Xt(Rn),Rn.length>0?Rn.concat(J):J),Xt=Rn=>Rn.filter($o=>Ls.inArray(J,$o)===-1),Fo=$?Xe(Ce):Xt(Ce);return Fo.length>0?Le(Fo):""},Go=M=>M.replace(/\uFEFF/g,""),pr=(M,$)=>($=$||Vi(M.selection.getRng())[0]||M.selection.getNode(),ir($)?kt.from(M.dom.select("a[href]",$)[0]):kt.from(M.dom.getParent($,"a[href]"))),xs=(M,$)=>pr(M,$).isSome(),pi=(M,$)=>{const J=$.fold(()=>M.getContent({format:"text"}),Ce=>Ce.innerText||Ce.textContent||"");return Go(J)},Vi=M=>bl(M,eo),ws=M=>Ls.grep(M,eo),jl=M=>ws(M).length>0,Ze=M=>Vi(M).length>0,Yt=M=>{const $=M.schema.getTextInlineElements(),J=Xe=>Xe.nodeType===1&&!nn(Xe)&&!ds($,Xe.nodeName.toLowerCase());if(pr(M).exists(Xe=>Xe.hasAttribute("data-mce-block")))return!1;const Le=M.selection.getRng();return Le.collapsed?!0:bl(Le,J).length===0},ir=M=>yo(M)&&M.nodeName==="FIGURE"&&/\bimage\b/i.test(M.className),Gl=M=>mo(["title","rel","class","target"],(J,Ce)=>(M[Ce].each(Le=>{J[Ce]=Le.length>0?Le:null}),J),{href:M.href}),ao=(M,$)=>($==="http"||$==="https")&&!jo(M)?$+"://"+M:M,Ve=(M,$)=>{const J={...$};if(ma(M).length===0&&!Ss(M)){const Ce=Za(J.rel,J.target==="_blank");J.rel=Ce||null}return kt.from(J.target).isNone()&&hi(M)===!1&&(J.target=At(M)),J.href=ao(J.href,Fu(M)),J},Wr=(M,$,J,Ce)=>{J.each(Xe=>{ds($,"innerText")?$.innerText=Xe:$.textContent=Xe}),M.dom.setAttribs($,Ce);const Le=M.dom.createRng();Le.setStartAfter($),Le.setEndAfter($),M.selection.setRng(Le)},$u=(M,$,J,Ce)=>{const Le=M.dom;ir($)?Vu(Le,$,Ce):J.fold(()=>{M.execCommand("mceInsertLink",!1,Ce);const Xe=M.selection.getEnd(),Xt=Le.createRng();Xt.setStartAfter(Xe),Xt.setEndAfter(Xe),M.selection.setRng(Xt)},Xe=>{M.insertContent(Le.createHTML("a",Ce,Le.encode(Xe)))})},Hu=(M,$,J)=>{const Ce=M.selection.getNode(),Le=pr(M,Ce),Xe=Ve(M,Gl(J)),Xt=ko(M);yo(Xt)&&Xt(Xe),M.undoManager.transact(()=>{J.href===$.href&&$.attach(),Le.fold(()=>{$u(M,Ce,J.text,Xe)},Fo=>{M.focus(),Wr(M,Fo,J.text,Xe)})})},oo=M=>{const $=M.dom,J=M.selection,Ce=J.getBookmark(),Le=J.getRng().cloneRange(),Xe=$.getParent(Le.startContainer,"a[href]",M.getBody()),Xt=$.getParent(Le.endContainer,"a[href]",M.getBody());Xe&&Le.setStartBefore(Xe),Xt&&Le.setEndAfter(Xt),J.setRng(Le),M.execCommand("unlink"),J.moveToBookmark(Ce)},xt=M=>{M.undoManager.transact(()=>{const $=M.selection.getNode();ir($)?To(M,$):oo(M),M.focus()})},vl=M=>{const{class:$,href:J,rel:Ce,target:Le,text:Xe,title:Xt}=M;return qe({class:$.getOrNull(),href:J,rel:Ce.getOrNull(),target:Le.getOrNull(),text:Xe.getOrNull(),title:Xt.getOrNull()},(Fo,Rn)=>_c(Fo)===!1)},Pm=(M,$)=>{const J=M.options.get,Ce={allow_html_data_urls:J("allow_html_data_urls"),allow_script_urls:J("allow_script_urls"),allow_svg_data_urls:J("allow_svg_data_urls")},Le=$.href;return{...$,href:Ps.isDomSafe(Le,"a",Ce)?Le:""}},Ro=(M,$,J)=>{const Ce=Pm(M,J);M.hasPlugin("rtc",!0)?M.execCommand("createlink",!1,vl(Ce)):Hu(M,$,Ce)},cr=M=>{M.hasPlugin("rtc",!0)?M.execCommand("unlink"):xt(M)},To=(M,$)=>{var J;const Ce=M.dom.select("img",$)[0];if(Ce){const Le=M.dom.getParents(Ce,"a[href]",$)[0];Le&&((J=Le.parentNode)===null||J===void 0||J.insertBefore(Ce,Le),M.dom.remove(Le))}},Vu=(M,$,J)=>{var Ce;const Le=M.select("img",$)[0];if(Le){const Xe=M.create("a",J);(Ce=Le.parentNode)===null||Ce===void 0||Ce.insertBefore(Xe,Le),Xe.appendChild(Le)}},Ft=M=>ln(M.value)?M.value:"",jr=M=>ln(M.text)?M.text:ln(M.title)?M.title:"",Ks=(M,$)=>{const J=[];return Ls.each(M,Ce=>{const Le=jr(Ce);if(Ce.menu!==void 0){const Xe=Ks(Ce.menu,$);J.push({text:Le,items:Xe})}else{const Xe=$(Ce);J.push({text:Le,value:Xe})}}),J},zu=(M=Ft)=>$=>kt.from($).map(J=>Ks(J,M)),ga={sanitize:M=>zu(Ft)(M),sanitizeWith:zu,createUi:(M,$)=>J=>({name:M,type:"listbox",label:$,items:J}),getValue:Ft},ha=M=>Hi(M,"items"),Ld=(M,$)=>jt($,J=>ha(J)?Ld(M,J.items):Hn(J.value===M,J)),yl=(M,$,J,Ce)=>{const Le=Ce[$],Xe=M.length>0;return Le!==void 0?Ld(Le,J).map(Xt=>({url:{value:Xt.value,meta:{text:Xe?M:Xt.text,attach:uo}},text:Xe?M:Xt.text})):kt.none()},zi=(M,$)=>$==="link"?M.link:$==="anchor"?M.anchor:kt.none(),Oc={init:(M,$)=>{const J={text:M.text,title:M.title},Ce=Rn=>{var $o;return Hn(J.title.length<=0,kt.from(($o=Rn.meta)===null||$o===void 0?void 0:$o.title).getOr(""))},Le=Rn=>{var $o;return Hn(J.text.length<=0,kt.from(($o=Rn.meta)===null||$o===void 0?void 0:$o.text).getOr(Rn.value))},Xe=Rn=>{const $o=Le(Rn.url),Bo=Ce(Rn.url);return $o.isSome()||Bo.isSome()?kt.some({...$o.map(Wi=>({text:Wi})).getOr({}),...Bo.map(Wi=>({title:Wi})).getOr({})}):kt.none()},Xt=(Rn,$o)=>{const Bo=zi($,$o).getOr([]);return yl(J.text,$o,Bo,Rn)};return{onChange:(Rn,$o)=>{const Bo=$o.name;return Bo==="url"?Xe(Rn()):Qn(["anchor","link"],Bo)?Xt(Rn(),Bo):((Bo==="text"||Bo==="title")&&(J[Bo]=Rn()[Bo]),kt.none())}}},getDelta:yl};var pa=tinymce.util.Tools.resolve("tinymce.util.Delay");const Ue=(M,$,J)=>{const Ce=M.selection.getRng();pa.setEditorTimeout(M,()=>{M.windowManager.confirm($,Le=>{M.selection.setRng(Ce),J(Le)})})},Uu=M=>{const $=M.href;return $.indexOf("@")>0&&$.indexOf("/")===-1&&$.indexOf("mailto:")===-1?kt.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Ce=>({...Ce,href:"mailto:"+$})}):kt.none()},os=(M,$)=>J=>{const Ce=J.href;return M===1&&!jo(Ce)||M===0&&/^\s*www(\.|\d\.)/i.test(Ce)?kt.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${$}:// prefix?`,preprocess:Xe=>({...Xe,href:$+"://"+Ce})}):kt.none()},Nn={preprocess:(M,$)=>jt([Uu,os(Fu(M),pe(M))],J=>J($)).fold(()=>Promise.resolve($),J=>new Promise(Ce=>{Ue(M,J.message,Le=>{Ce(Le?J.preprocess($):$)})}))},Gr={getAnchors:M=>{const $=M.dom.select("a:not([href])"),J=Oe($,Ce=>{const Le=Ce.name||Ce.id;return Le?[{text:Le,value:"#"+Le}]:[]});return J.length>0?kt.some([{text:"None",value:""}].concat(J)):kt.none()}},Ui={getClasses:M=>{const $=et(M);return $.length>0?ga.sanitize($):kt.none()}},$m=M=>{try{return kt.some(JSON.parse(M))}catch{return kt.none()}},Fd={getLinks:M=>{const $=Ce=>M.convertURL(Ce.value||Ce.url||"","href"),J=Vn(M);return new Promise(Ce=>{ln(J)?fetch(J).then(Le=>Le.ok?Le.text().then($m):Promise.reject()).then(Ce,()=>Ce(kt.none())):ar(J)?J(Le=>Ce(kt.some(Le))):Ce(kt.from(J))}).then(Ce=>Ce.bind(ga.sanitizeWith($)).map(Le=>Le.length>0?[{text:"None",value:""}].concat(Le):Le))}},vr={getRels:(M,$)=>{const J=ma(M);if(J.length>0){const Ce=jn($,"_blank"),Le=Ss(M)===!1,Xe=Fo=>Za(ga.getValue(Fo),Ce);return(Le?ga.sanitizeWith(Xe):ga.sanitize)(J)}return kt.none()}},fs=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Kl={getTargets:M=>{const $=hi(M);return rr($)?ga.sanitize($).orThunk(()=>kt.some(fs)):$===!1?kt.none():kt.some(fs)}},Cl=(M,$,J)=>{const Ce=M.getAttrib($,J);return Ce!==null&&Ce.length>0?kt.some(Ce):kt.none()},bi=(M,$)=>{const J=M.dom,Le=Yt(M)?kt.some(pi(M.selection,$)):kt.none(),Xe=$.bind(Bo=>kt.from(J.getAttrib(Bo,"href"))),Xt=$.bind(Bo=>kt.from(J.getAttrib(Bo,"target"))),Fo=$.bind(Bo=>Cl(J,Bo,"rel")),Rn=$.bind(Bo=>Cl(J,Bo,"class")),$o=$.bind(Bo=>Cl(J,Bo,"title"));return{url:Xe,text:Le,title:$o,target:Xt,rel:Fo,linkClass:Rn}},Wa={collect:(M,$)=>Fd.getLinks(M).then(J=>{const Ce=bi(M,$);return{anchor:Ce,catalogs:{targets:Kl.getTargets(M),rels:vr.getRels(M,Ce.target),classes:Ui.getClasses(M),anchor:Gr.getAnchors(M),link:J},optNode:$,flags:{titleEnabled:Ac(M)}}})},dn=(M,$)=>J=>{const Ce=J.getData();if(!Ce.url.value){cr(M),J.close();return}const Le=Fo=>kt.from(Ce[Fo]).filter(Rn=>!jn($.anchor[Fo],Rn)),Xe={href:Ce.url.value,text:Le("text"),target:Le("target"),rel:Le("rel"),class:Le("linkClass"),title:Le("title")},Xt={href:Ce.url.value,attach:Ce.url.meta!==void 0&&Ce.url.meta.attach?Ce.url.meta.attach:uo};Nn.preprocess(M,Xe).then(Fo=>{Ro(M,Xt,Fo)}),J.close()},Dc=M=>{const $=pr(M);return Wa.collect(M,$)},Yl=(M,$)=>{const J=M.anchor,Ce=J.url.getOr("");return{url:{value:Ce,meta:{original:{value:Ce}}},text:J.text.getOr(""),title:J.title.getOr(""),anchor:Ce,link:Ce,rel:J.rel.getOr(""),target:J.target.or($).getOr(""),linkClass:J.linkClass.getOr("")}},Zi=(M,$,J)=>{const Ce=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],Le=M.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Xe=M.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Xt=kt.from(At(J)),Fo=Yl(M,Xt),Rn=M.catalogs,$o=Oc.init(Fo,Rn);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:hn([Ce,Le,Xe,ms([Rn.anchor.map(ga.createUi("anchor","Anchors")),Rn.rels.map(ga.createUi("rel","Rel")),Rn.targets.map(ga.createUi("target","Open link in...")),Rn.link.map(ga.createUi("link","Link list")),Rn.classes.map(ga.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Fo,onChange:(Wi,{name:ji})=>{$o.onChange(Wi.getData,{name:ji}).each(Hd=>{Wi.setData(Hd)})},onSubmit:$}},yr=M=>{Dc(M).then(J=>{const Ce=dn(M,J);return Zi(J,Ce,M)}).then(J=>{M.windowManager.open(J)})},_o=M=>{M.addCommand("mceLink",($,J)=>{(J==null?void 0:J.dialog)===!0||!Wl(M)?yr(M):M.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},io=M=>{M.addShortcut("Meta+K","",()=>{M.execCommand("mceLink")})};var Cr=tinymce.util.Tools.resolve("tinymce.util.VK");const to=(M,$)=>{document.body.appendChild(M),M.dispatchEvent($),document.body.removeChild(M)},qo=M=>{const $=document.createElement("a");$.target="_blank",$.href=M,$.rel="noreferrer noopener";const J=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(J),to($,J)},Mc=M=>M.altKey===!0&&M.shiftKey===!1&&M.ctrlKey===!1&&M.metaKey===!1,vi=(M,$)=>{if($){const J=Gn($);if(/^#/.test(J)){const Ce=M.dom.select(`${J},[name="${gi(J,"#")}"]`);Ce.length&&M.selection.scrollIntoView(Ce[0],!0)}else qo($.href)}},ja=M=>{const $=M.selection.getRng(),J=$.startContainer;return eo(J)&&$.startContainer===$.endContainer&&M.dom.select("img",J).length===1},Sl=(M,$)=>{const J=ws(M.dom.getParents($));return Hn(J.length===1,J[0])},Zu=M=>{const $=Vi(M.selection.getRng());return Hn($.length>0,$[0]).or(Sl(M,M.selection.getNode()))},ba=M=>M.selection.isCollapsed()||ja(M)?Sl(M,M.selection.getStart()):Zu(M),xl=M=>{const $=ke(),J=()=>$.get().or(ba(M)),Ce=()=>J().each(Le=>vi(M,Le));return M.on("contextmenu",Le=>{Sl(M,Le.target).each($.set)}),M.on("SelectionChange",()=>{$.isSet()||ba(M).each($.set)}),M.on("click",Le=>{$.clear();const Xe=ws(M.dom.getParents(Le.target));Xe.length===1&&Cr.metaKeyPressed(Le)&&(Le.preventDefault(),vi(M,Xe[0]))}),M.on("keydown",Le=>{$.clear(),!Le.isDefaultPrevented()&&Le.keyCode===13&&Mc(Le)&&J().each(Xe=>{Le.preventDefault(),vi(M,Xe)})}),{gotoSelectedLink:Ce}},lr=M=>()=>{M.execCommand("mceLink",!1,{dialog:!0})},wl=(M,$)=>(M.on("NodeChange",$),()=>M.off("NodeChange",$)),Nc=M=>$=>{const J=()=>{$.setActive(!M.mode.isReadOnly()&&xs(M,M.selection.getNode())),$.setEnabled(M.selection.isEditable())};return J(),wl(M,J)},Wu=M=>$=>{const J=()=>{$.setEnabled(M.selection.isEditable())};return J(),wl(M,J)},Is=M=>$=>{const J=Xe=>jl(Xe)||Ze(M.selection.getRng()),Ce=M.dom.getParents(M.selection.getStart()),Le=Xe=>{$.setEnabled(J(Xe)&&M.selection.isEditable())};return Le(Ce),wl(M,Xe=>Le(Xe.parents))},$d=(M,$)=>{M.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:lr(M),onSetup:Nc(M)}),M.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:$.gotoSelectedLink,onSetup:Is(M)}),M.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>cr(M),onSetup:Is(M)})},yi=(M,$)=>{M.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:$.gotoSelectedLink,onSetup:Is(M)}),M.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:lr(M),onSetup:Wu(M)}),M.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>cr(M),onSetup:Is(M)})},he=M=>{const $="link unlink openlink",J="link";M.ui.registry.addContextMenu("link",{update:Ce=>M.dom.isEditable(Ce)?jl(M.dom.getParents(Ce,"a"))?$:J:""})},ne=(M,$)=>{const J=Xe=>{Xe.selection.collapse(!1)},Ce=Xe=>{const Xt=M.selection.getNode();return Xe.setEnabled(xs(M,Xt)&&M.selection.isEditable()),uo},Le=Xe=>{const Xt=pr(M),Fo=Yt(M);if(Xt.isNone()&&Fo){const Rn=pi(M.selection,Xt);return Hn(Rn.length===0,Xe)}else return kt.none()};M.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Nc(M)},label:"Link",predicate:Xe=>_t(M)&&xs(M,Xe),initValue:()=>pr(M).fold(Cs(""),Gn),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Xe=>{const Xt=M.selection.getNode();return Xe.setActive(xs(M,Xt)),Nc(M)(Xe)},onAction:Xe=>{const Xt=Xe.getValue(),Fo=Le(Xt);Ro(M,{href:Xt,attach:uo},{href:Xt,text:Fo,title:kt.none(),rel:kt.none(),target:kt.from(At(M)),class:kt.none()}),J(M),Xe.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Ce,onAction:Xe=>{cr(M),Xe.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Ce,onAction:Xe=>{$.gotoSelectedLink(),Xe.hide()}}]})},wn=M=>{const $=xl(M);$d(M,$),yi(M,$),he(M),ne(M,$)};var So=()=>{fn.add("link",M=>{Qo(M),_o(M),wn(M),io(M)})};So()})();(function(){var fn=tinymce.util.Tools.resolve("tinymce.PluginManager");const I=(v,E,D)=>{var H;return D(v,E.prototype)?!0:((H=v.constructor)===null||H===void 0?void 0:H.name)===E.name},Co=v=>{const E=typeof v;return v===null?"null":E==="object"&&Array.isArray(v)?"array":E==="object"&&I(v,String,(D,H)=>H.isPrototypeOf(D))?"string":E},Z=v=>E=>Co(E)===v,Fn=v=>E=>typeof E===v,ns=Z("string"),ln=Z("object"),Tt=Z("array"),rr=Fn("boolean"),_c=v=>v==null,X=v=>!_c(v),$n=Fn("function"),yo=Fn("number"),ar=()=>{},pl=(v,E)=>D=>v(E(D)),uo=v=>()=>v,Cs=(v,E)=>v===E;function Zr(v,...E){return(...D)=>{const H=E.concat(D);return v.apply(null,H)}}const kt=v=>E=>!v(E),re=uo(!1);class Pt{constructor(E,D){this.tag=E,this.value=D}static some(E){return new Pt(!0,E)}static none(){return Pt.singletonNone}fold(E,D){return this.tag?D(this.value):E()}isSome(){return this.tag}isNone(){return!this.tag}map(E){return this.tag?Pt.some(E(this.value)):Pt.none()}bind(E){return this.tag?E(this.value):Pt.none()}exists(E){return this.tag&&E(this.value)}forall(E){return!this.tag||E(this.value)}filter(E){return!this.tag||E(this.value)?this:Pt.none()}getOr(E){return this.tag?this.value:E}or(E){return this.tag?this:E}getOrThunk(E){return this.tag?this.value:E()}orThunk(E){return this.tag?this:E()}getOrDie(E){if(this.tag)return this.value;throw new Error(E??"Called getOrDie on None")}static from(E){return X(E)?Pt.some(E):Pt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(E){this.tag&&E(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Pt.singletonNone=new Pt(!1);const Aa=Array.prototype.slice,Qn=Array.prototype.indexOf,ee=Array.prototype.push,$t=(v,E)=>Qn.call(v,E),mo=(v,E)=>$t(v,E)>-1,hn=(v,E)=>{for(let D=0,H=v.length;D<H;D++){const G=v[D];if(E(G,D))return!0}return!1},Oe=(v,E)=>{const D=v.length,H=new Array(D);for(let G=0;G<D;G++){const _e=v[G];H[G]=E(_e,G)}return H},jt=(v,E)=>{for(let D=0,H=v.length;D<H;D++){const G=v[D];E(G,D)}},No=(v,E)=>{const D=[];for(let H=0,G=v.length;H<G;H++){const _e=v[H];E(_e,H)&&D.push(_e)}return D},gn=(v,E)=>{if(v.length===0)return[];{let D=E(v[0]);const H=[];let G=[];for(let _e=0,Ie=v.length;_e<Ie;_e++){const Vt=v[_e],Ht=E(Vt);Ht!==D&&(H.push(G),G=[]),D=Ht,G.push(Vt)}return G.length!==0&&H.push(G),H}},ct=(v,E,D)=>(jt(v,(H,G)=>{D=E(D,H,G)}),D),S=(v,E,D)=>{for(let H=0,G=v.length;H<G;H++){const _e=v[H];if(E(_e,H))return Pt.some(_e);if(D(_e,H))break}return Pt.none()},Ua=(v,E)=>S(v,E,re),qe=v=>{const E=[];for(let D=0,H=v.length;D<H;++D){if(!Tt(v[D]))throw new Error("Arr.flatten item "+D+" was not an array, input: "+v);ee.apply(E,v[D])}return E},ds=(v,E)=>qe(Oe(v,E)),Hi=v=>{const E=Aa.call(v,0);return E.reverse(),E},Qe=(v,E)=>E>=0&&E<v.length?Pt.some(v[E]):Pt.none(),jn=v=>Qe(v,0),ms=v=>Qe(v,v.length-1),Hn=(v,E)=>{const D=[],H=$n(E)?G=>hn(D,_e=>E(_e,G)):G=>mo(D,G);for(let G=0,_e=v.length;G<_e;G++){const Ie=v[G];H(Ie)||D.push(Ie)}return D},fi=Object.keys,ke=(v,E)=>{const D=fi(v);for(let H=0,G=D.length;H<G;H++){const _e=D[H],Ie=v[_e];E(Ie,_e)}},ze=v=>(E,D)=>{v[D]=E},O=(v,E,D,H)=>{ke(v,(G,_e)=>{(E(G,_e)?D:H)(G,_e)})},gi=(v,E)=>{const D={};return O(v,E,ze(D),ar),D},Zn=v=>{let E=v;return{get:()=>E,set:G=>{E=G}}},Jo=typeof window<"u"?window:Function("return this;")(),Qo=(v,E,D=Cs)=>v.exists(H=>D(H,E)),Fu=(v,E,D=Cs)=>_t(v,E,D).getOr(v.isNone()&&E.isNone()),_t=(v,E,D)=>v.isSome()&&E.isSome()?Pt.some(D(v.getOrDie(),E.getOrDie())):Pt.none(),Vn=(v,E)=>{let D=E??Jo;for(let H=0;H<v.length&&D!==void 0&&D!==null;++H)D=D[v[H]];return D},At=(v,E)=>{const D=v.split(".");return Vn(D,E)},hi=(v=>E=>E.replace(v,""))(/^\s+|\s+$/g),ma=v=>v.length>0,et=v=>!ma(v),Ac="\uFEFF",Ss=v=>v===Ac,Wl=(v,E)=>{const H=(E||document).createElement("div");if(H.innerHTML=v,!H.hasChildNodes()||H.childNodes.length>1){const G="HTML does not have a single root node";throw console.error(G,v),new Error(G)}return fa(H.childNodes[0])},ko=(v,E)=>{const H=(E||document).createElement(v);return fa(H)},Ps=(v,E)=>{const H=(E||document).createTextNode(v);return fa(H)},fa=v=>{if(v==null)throw new Error("Node cannot be null or undefined");return{dom:v}},nn={fromHtml:Wl,fromTag:ko,fromText:Ps,fromDom:fa,fromPoint:(v,E,D)=>Pt.from(v.dom.elementFromPoint(E,D)).map(fa)},eo=8,bl=11,jo=1,Gn=3,Za=(v,E)=>{const D=v.dom;if(D.nodeType!==jo)return!1;{const H=D;if(H.matches!==void 0)return H.matches(E);if(H.msMatchesSelector!==void 0)return H.msMatchesSelector(E);if(H.webkitMatchesSelector!==void 0)return H.webkitMatchesSelector(E);if(H.mozMatchesSelector!==void 0)return H.mozMatchesSelector(E);throw new Error("Browser lacks native selectors")}},Go=(v,E)=>v.dom===E.dom,pr=(v,E)=>{const D=v.dom,H=E.dom;return D===H?!1:D.contains(H)},xs=Za,pi=(v,E)=>At(v,E),Vi=(v,E)=>{const D=pi(v,E);if(D==null)throw new Error(v+" not available on this browser");return D},ws=Object.getPrototypeOf,jl=v=>Vi("HTMLElement",v),Ze=v=>{const E=At("ownerDocument.defaultView",v);return ln(v)&&(jl(E).prototype.isPrototypeOf(v)||/^HTML\w*Element$/.test(ws(v).constructor.name))},Yt=v=>v.dom.nodeName.toLowerCase(),ir=v=>v.dom.nodeType,Gl=v=>E=>ir(E)===v,ao=v=>ir(v)===eo||Yt(v)==="#comment",Ve=v=>Wr(v)&&Ze(v.dom),Wr=Gl(jo),$u=Gl(Gn),Hu=Gl(bl),oo=v=>E=>Wr(E)&&Yt(E)===v,xt=v=>Pt.from(v.dom.parentNode).map(nn.fromDom),vl=v=>Pt.from(v.dom.parentElement).map(nn.fromDom),Pm=v=>Pt.from(v.dom.nextSibling).map(nn.fromDom),Ro=v=>Oe(v.dom.childNodes,nn.fromDom),cr=(v,E)=>{const D=v.dom.childNodes;return Pt.from(D[E]).map(nn.fromDom)},To=v=>cr(v,0),Vu=v=>cr(v,v.dom.childNodes.length-1),Ft=v=>Hu(v)&&X(v.dom.host),jr=v=>nn.fromDom(v.dom.getRootNode()),Ks=v=>{const E=jr(v);return Ft(E)?Pt.some(E):Pt.none()},zu=v=>nn.fromDom(v.dom.host),Lm=(v,E)=>{xt(v).each(H=>{H.dom.insertBefore(E.dom,v.dom)})},Eg=(v,E)=>{Pm(v).fold(()=>{xt(v).each(G=>{ha(G,E)})},H=>{Lm(H,E)})},ga=(v,E)=>{To(v).fold(()=>{ha(v,E)},H=>{v.dom.insertBefore(E.dom,H.dom)})},ha=(v,E)=>{v.dom.appendChild(E.dom)},Ld=(v,E)=>{jt(E,D=>{Lm(v,D)})},yl=(v,E)=>{jt(E,D=>{ha(v,D)})},zi=(v,E,D)=>{if(ns(D)||rr(D)||yo(D))v.setAttribute(E,D+"");else throw console.error("Invalid call to Attribute.set. Key ",E,":: Value ",D,":: Element ",v),new Error("Attribute value was not simple")},Es=(v,E)=>{const D=v.dom;ke(E,(H,G)=>{zi(D,G,H)})},Oc=v=>ct(v.dom.attributes,(E,D)=>(E[D.name]=D.value,E),{}),pa=v=>{v.dom.textContent="",jt(Ro(v),E=>{Ue(E)})},Ue=v=>{const E=v.dom;E.parentNode!==null&&E.parentNode.removeChild(E)},Uu=(v,E)=>nn.fromDom(v.dom.cloneNode(E)),os=v=>Uu(v,!0),Im=(v,E)=>{const D=nn.fromTag(E),H=Oc(v);return Es(D,H),D},Nn=(v,E)=>{const D=Im(v,E);Eg(v,D);const H=Ro(v);return yl(D,H),Ue(v),D},Id=v=>Oe(v,nn.fromDom),Gr=v=>v.style!==void 0&&$n(v.style.getPropertyValue),Fm=v=>{const E=$u(v)?v.dom.parentNode:v.dom;if(E==null||E.ownerDocument===null)return!1;const D=E.ownerDocument;return Ks(nn.fromDom(E)).fold(()=>D.body.contains(E),pl(Fm,zu))},Ui=(v,E,D)=>{if(!ns(D))throw console.error("Invalid call to CSS.set. Property ",E,":: Value ",D,":: Element ",v),new Error("CSS value must be a string: "+D);Gr(v)&&v.style.setProperty(E,D)},$m=(v,E,D)=>{const H=v.dom;Ui(H,E,D)},br=(v,E)=>{const H=document.createDocumentFragment();return jt(v,G=>{H.appendChild(G.dom)}),nn.fromDom(H)};var Fd=(v,E,D,H,G)=>v(D,H)?Pt.some(D):$n(G)&&G(D)?Pt.none():E(D,H,G);const ql=(v,E,D)=>{let H=v.dom;const G=$n(D)?D:re;for(;H.parentNode;){H=H.parentNode;const _e=nn.fromDom(H);if(E(_e))return Pt.some(_e);if(G(_e))break}return Pt.none()},vr=(v,E,D)=>Fd((G,_e)=>_e(G),ql,v,E,D),fs=(v,E,D)=>ql(v,H=>Za(H,E),D),es=(v,E,D)=>Fd((G,_e)=>Za(G,_e),fs,v,E,D),Kl=v=>es(v,"[contenteditable]"),Cl=(v,E=!1)=>Fm(v)?v.dom.isContentEditable:Kl(v).fold(uo(E),D=>bi(D)==="true"),bi=v=>v.dom.contentEditable,kg=(v,E,D)=>ql(v,E,D).isSome(),Wa=(v,E)=>kg(v,Zr(Go,E));var dn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Dc=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Yl=tinymce.util.Tools.resolve("tinymce.util.VK"),Zi=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),yr=tinymce.util.Tools.resolve("tinymce.util.Tools");const _o=v=>E=>X(E)&&E.nodeName.toLowerCase()===v,io=v=>E=>X(E)&&v.test(E.nodeName),Cr=v=>X(v)&&v.nodeType===3,to=v=>X(v)&&v.nodeType===1,qo=io(/^(OL|UL|DL)$/),Mc=io(/^(OL|UL)$/),vi=_o("ol"),ja=io(/^(LI|DT|DD)$/),Sl=io(/^(DT|DD)$/),Zu=io(/^(TH|TD)$/),ba=_o("br"),xl=v=>{var E;return((E=v.parentNode)===null||E===void 0?void 0:E.firstChild)===v},lr=(v,E)=>X(E)&&E.nodeName in v.schema.getTextBlockElements(),wl=(v,E)=>X(v)&&v.nodeName in E,Nc=(v,E)=>X(E)&&E.nodeName in v.schema.getVoidElements(),Wu=(v,E)=>ba(E)?v.isBlock(E.nextSibling)&&!ba(E.previousSibling):!1,Is=(v,E,D)=>{const H=v.isEmpty(E);return D&&v.select("span[data-mce-type=bookmark]",E).length>0?!1:H},$d=(v,E)=>v.isChildOf(E,v.getRoot()),yi=v=>E=>E.options.get(v),he=v=>{const E=v.options.register;E("lists_indent_on_tab",{processor:"boolean",default:!0})},ne=yi("lists_indent_on_tab"),wn=yi("forced_root_block"),So=yi("forced_root_block_attrs"),M=(v,E,D={})=>{const H=v.dom,G=v.schema.getBlockElements(),_e=H.createFragment(),Ie=wn(v),Vt=So(v);let Ht,vt,on=!1;for(vt=H.create(Ie,{...Vt,...D.style?{style:D.style}:{}}),wl(E.firstChild,G)||_e.appendChild(vt);Ht=E.firstChild;){const xo=Ht.nodeName;!on&&(xo!=="SPAN"||Ht.getAttribute("data-mce-type")!=="bookmark")&&(on=!0),wl(Ht,G)?(_e.appendChild(Ht),vt=null):(vt||(vt=H.create(Ie,Vt),_e.appendChild(vt)),vt.appendChild(Ht))}return!on&&vt&&vt.appendChild(H.create("br",{"data-mce-bogus":"1"})),_e},$=Zi.DOM,J=(v,E,D)=>{const H=vt=>{const on=vt.parentNode;on&&yr.each(G,xo=>{on.insertBefore(xo,D.parentNode)}),$.remove(vt)},G=$.select('span[data-mce-type="bookmark"]',E),_e=M(v,D),Ie=$.createRng();Ie.setStartAfter(D),Ie.setEndAfter(E);const Vt=Ie.extractContents();for(let vt=Vt.firstChild;vt;vt=vt.firstChild)if(vt.nodeName==="LI"&&v.dom.isEmpty(vt)){$.remove(vt);break}v.dom.isEmpty(Vt)||$.insertAfter(Vt,E),$.insertAfter(_e,E);const Ht=D.parentElement;Ht&&Is(v.dom,Ht)&&H(Ht),$.remove(D),Is(v.dom,E)&&$.remove(E)},Ce=oo("dd"),Le=oo("dt"),Xe=(v,E)=>{Ce(E)?Nn(E,"dt"):Le(E)&&vl(E).each(D=>J(v,D.dom,E.dom))},Xt=v=>{Le(v)&&Nn(v,"dd")},Fo=(v,E,D)=>{E==="Indent"?jt(D,Xt):jt(D,H=>Xe(v,H))},Rn=(v,E)=>{if(Cr(v))return{container:v,offset:E};const D=dn.getNode(v,E);return Cr(D)?{container:D,offset:E>=v.childNodes.length?D.data.length:0}:D.previousSibling&&Cr(D.previousSibling)?{container:D.previousSibling,offset:D.previousSibling.data.length}:D.nextSibling&&Cr(D.nextSibling)?{container:D.nextSibling,offset:0}:{container:v,offset:E}},$o=v=>{const E=v.cloneRange(),D=Rn(v.startContainer,v.startOffset);E.setStart(D.container,D.offset);const H=Rn(v.endContainer,v.endOffset);return E.setEnd(H.container,H.offset),E},Bo=["OL","UL","DL"],Wi=Bo.join(","),ji=(v,E)=>{const D=E||v.selection.getStart(!0);return v.dom.getParent(D,Wi,Vd(v,D))},Hd=(v,E)=>X(v)&&E.length===1&&E[0]===v,cb=v=>No(v.querySelectorAll(Wi),qo),ju=v=>{const E=ji(v),D=v.selection.getSelectedBlocks();return Hd(E,D)?cb(E):No(D,H=>qo(H)&&E!==H)},lb=(v,E)=>{const D=yr.map(E,H=>{const G=v.dom.getParent(H,"li,dd,dt",Vd(v,H));return G||H});return Hn(D)},Tg=v=>{const E=v.selection.getSelectedBlocks();return No(lb(v,E),ja)},Op=v=>No(Tg(v),Sl),Bn=(v,E)=>{const D=v.dom.getParents(E,"TD,TH");return D.length>0?D[0]:v.getBody()},Hm=(v,E)=>!qo(E)&&!ja(E)&&hn(Bo,D=>v.isValidChild(E.nodeName,D)),Vd=(v,E)=>{const D=v.dom.getParents(E,v.dom.isBlock),H=_e=>_e.nodeName.toLowerCase()!==wn(v);return Ua(D,_e=>H(_e)&&Hm(v.schema,_e)).getOr(v.getBody())},ub=v=>xt(v).exists(E=>ja(E.dom)&&To(E).exists(D=>!qo(D.dom))&&Vu(E).exists(D=>!qo(D.dom))),Dp=(v,E)=>{const D=v.dom.getParents(E,"ol,ul",Vd(v,E));return ms(D)},db=v=>{const E=Dp(v,v.selection.getStart()),D=No(v.selection.getSelectedBlocks(),Mc);return E.toArray().concat(D)},Mp=v=>{const E=v.selection.getStart();return v.dom.getParents(E,"ol,ul",Vd(v,E))},_g=v=>{const E=db(v),D=Mp(v);return Ua(D,H=>ub(nn.fromDom(H))).fold(()=>Vm(v,E),H=>[H])},Vm=(v,E)=>{const D=Oe(E,H=>Dp(v,H).getOr(H));return Hn(D)},zd=v=>/\btox\-/.test(v.className),Ag=(v,E)=>S(v,qo,Zu).exists(D=>D.nodeName===E&&!zd(D)),jC=(v,E)=>E!==null&&!v.dom.isEditable(E),GC=v=>{const E=ji(v);return jC(v,E)||!v.selection.isEditable()},Xl=(v,E)=>{const D=v.dom.getParent(E,"ol,ul,dl");return jC(v,D)||!v.selection.isEditable()},Rc=(v,E)=>{const D=v.selection.getNode();return E({parents:v.dom.getParents(D),element:D}),v.on("NodeChange",E),()=>v.off("NodeChange",E)},Mr=(v,E,D)=>v.dispatch("ListMutation",{action:E,element:D}),zm=v=>xs(v,"OL,UL"),mb=v=>xs(v,"LI"),Np=v=>To(v).exists(zm),fb=v=>Vu(v).exists(zm),Jl=v=>"listAttributes"in v,Rp=v=>"isComment"in v,Og=v=>"isFragment"in v,Ci=v=>v.depth>0,Bc=v=>v.isSelected,Ql=v=>{const E=Ro(v),D=fb(v)?E.slice(0,-1):E;return Oe(D,os)},gb=(v,E,D)=>xt(v).filter(Wr).map(H=>({depth:E,dirty:!1,isSelected:D,content:Ql(v),itemAttributes:Oc(v),listAttributes:Oc(H),listType:Yt(H),isInPreviousLi:!1})),yn=(v,E)=>{ha(v.item,E.list)},hb=v=>{for(let E=1;E<v.length;E++)yn(v[E-1],v[E])},Bp=(v,E)=>{_t(ms(v),jn(E),yn)},pb=(v,E)=>{const D={list:nn.fromTag(E,v),item:nn.fromTag("li",v)};return ha(D.list,D.item),D},bb=(v,E,D)=>{const H=[];for(let G=0;G<D;G++)H.push(pb(v,Jl(E)?E.listType:E.parentListType));return H},vb=(v,E)=>{for(let D=0;D<v.length-1;D++)$m(v[D].item,"list-style-type","none");ms(v).each(D=>{Jl(E)&&(Es(D.list,E.listAttributes),Es(D.item,E.itemAttributes)),yl(D.item,E.content)})},yb=(v,E)=>{Yt(v.list)!==E.listType&&(v.list=Nn(v.list,E.listType)),Es(v.list,E.listAttributes)},Pp=(v,E,D)=>{const H=nn.fromTag("li",v);return Es(H,E),yl(H,D),H},Yk=(v,E)=>{ha(v.list,E),v.item=E},Cb=(v,E,D)=>{const H=E.slice(0,D.depth);return ms(H).each(G=>{if(Jl(D)){const _e=Pp(v,D.itemAttributes,D.content);Yk(G,_e),yb(G,D)}else if(Og(D))yl(G.item,D.content);else{const _e=nn.fromHtml(`<!--${D.content}-->`);ha(G.list,_e)}}),H},qC=(v,E,D)=>{const H=bb(v,D,D.depth-E.length);return hb(H),vb(H,D),Bp(E,H),E.concat(H)},Pe=(v,E)=>{let D=Pt.none();const H=ct(E,(G,_e,Ie)=>Rp(_e)?Ie===0?(D=Pt.some(_e),G):Cb(v,G,_e):_e.depth>G.length?qC(v,G,_e):Cb(v,G,_e),[]);return D.each(G=>{const _e=nn.fromHtml(`<!--${G.content}-->`);jn(H).each(Ie=>{ga(Ie.list,_e)})}),jn(H).map(G=>G.list)},KC=(v,E)=>{switch(v){case"Indent":E.depth++;break;case"Outdent":E.depth--;break;case"Flatten":E.depth=0}E.dirty=!0},YC=(v,E)=>{Jl(v)&&Jl(E)&&(v.listType=E.listType,v.listAttributes={...E.listAttributes})},XC=v=>{v.listAttributes=gi(v.listAttributes,(E,D)=>D!=="start")},va=(v,E)=>{const D=v[E].depth,H=_e=>_e.depth===D&&!_e.dirty,G=_e=>_e.depth<D;return S(Hi(v.slice(0,E)),H,G).orThunk(()=>S(v.slice(E+1),H,G))},JC=v=>(jt(v,(E,D)=>{va(v,D).fold(()=>{E.dirty&&Jl(E)&&XC(E)},H=>YC(E,H))}),v),U=(v,E,D,H)=>{var G;if(ao(H))return[{depth:v+1,content:(G=H.dom.nodeValue)!==null&&G!==void 0?G:"",dirty:!1,isSelected:!1,isComment:!0}];E.each(Vt=>{Go(Vt.start,H)&&D.set(!0)});const _e=gb(H,v,D.get());E.each(Vt=>{Go(Vt.end,H)&&D.set(!1)});const Ie=Vu(H).filter(zm).map(Vt=>Dg(v,E,D,Vt)).getOr([]);return _e.toArray().concat(Ie)},QC=(v,E,D,H)=>To(H).filter(zm).fold(()=>U(v,E,D,H),G=>{const _e=ct(Ro(H),(Ie,Vt,Ht)=>{if(Ht===0)return Ie;if(mb(Vt))return Ie.concat(U(v,E,D,Vt));{const vt={isFragment:!0,depth:v,content:[Vt],isSelected:!1,dirty:!1,parentListType:Yt(G)};return Ie.concat(vt)}},[]);return Dg(v,E,D,G).concat(_e)}),Dg=(v,E,D,H)=>ds(Ro(H),G=>{const _e=zm(G)?Dg:QC,Ie=v+1;return _e(Ie,E,D,G)}),Sb=(v,E)=>{const D=Zn(!1),H=0;return Oe(v,G=>({sourceList:G,entries:Dg(H,E,D,G)}))},Gi=(v,E)=>{const D=JC(E);return Oe(D,H=>{const G=Rp(H)?br([nn.fromHtml(`<!--${H.content}-->`)]):br(H.content),_e=Jl(H)?H.itemAttributes:{};return nn.fromDom(M(v,G.dom,_e))})},Um=(v,E)=>{const D=JC(E);return Pe(v.contentDocument,D).toArray()},Zm=(v,E)=>ds(gn(E,Ci),D=>jn(D).exists(Ci)?Um(v,D):Gi(v,D)),xb=(v,E)=>{jt(No(v,Bc),D=>KC(E,D))},Oa=v=>{const E=Oe(Tg(v),nn.fromDom);return _t(Ua(E,kt(Np)),Ua(Hi(E),kt(Np)),(D,H)=>({start:D,end:H}))},Gu=(v,E,D)=>{const H=Sb(E,Oa(v));jt(H,G=>{xb(G.entries,D);const _e=Zm(v,G.entries);jt(_e,Ie=>{Mr(v,D==="Indent"?"IndentList":"OutdentList",Ie.dom)}),Ld(G.sourceList,_e),Ue(G.sourceList)})},Mg=(v,E)=>{const D=Id(_g(v)),H=Id(Op(v));let G=!1;if(D.length||H.length){const _e=v.selection.getBookmark();Gu(v,D,E),Fo(v,E,H),v.selection.moveToBookmark(_e),v.selection.setRng($o(v.selection.getRng())),v.nodeChanged(),G=!0}return G},Ng=(v,E)=>!GC(v)&&Mg(v,E),Rg=v=>Ng(v,"Indent"),Nr=v=>Ng(v,"Outdent"),qu=v=>Ng(v,"Flatten");var Ga=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const qi=Zi.DOM,qr=v=>{const E={},D=H=>{let G=v[H?"startContainer":"endContainer"],_e=v[H?"startOffset":"endOffset"];if(to(G)){const Ie=qi.create("span",{"data-mce-type":"bookmark"});G.hasChildNodes()?(_e=Math.min(_e,G.childNodes.length-1),H?G.insertBefore(Ie,G.childNodes[_e]):qi.insertAfter(Ie,G.childNodes[_e])):G.appendChild(Ie),G=Ie,_e=0}E[H?"startContainer":"endContainer"]=G,E[H?"startOffset":"endOffset"]=_e};return D(!0),v.collapsed||D(),E},Ud=v=>{const E=H=>{const G=Vt=>{var Ht;let vt=(Ht=Vt.parentNode)===null||Ht===void 0?void 0:Ht.firstChild,on=0;for(;vt;){if(vt===Vt)return on;(!to(vt)||vt.getAttribute("data-mce-type")!=="bookmark")&&on++,vt=vt.nextSibling}return-1};let _e=v[H?"startContainer":"endContainer"],Ie=v[H?"startOffset":"endOffset"];if(_e){if(to(_e)&&_e.parentNode){const Vt=_e;Ie=G(_e),_e=_e.parentNode,qi.remove(Vt),!_e.hasChildNodes()&&qi.isBlock(_e)&&_e.appendChild(qi.create("br"))}v[H?"startContainer":"endContainer"]=_e,v[H?"startOffset":"endOffset"]=Ie}};E(!0),E();const D=qi.createRng();return D.setStart(v.startContainer,v.startOffset),v.endContainer&&D.setEnd(v.endContainer,v.endOffset),$o(D)},sn=v=>{switch(v){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Ki=(v,E,D)=>{const H=D["list-style-type"]?D["list-style-type"]:null;v.setStyle(E,"list-style-type",H)},Bg=(v,E)=>{yr.each(E,(D,H)=>{v.setAttribute(H,D)})},En=(v,E,D)=>{Bg(E,D["list-attributes"]),yr.each(v.select("li",E),H=>{Bg(H,D["list-item-attributes"])})},Rr=(v,E,D)=>{Ki(v,E,D),En(v,E,D)},Pc=(v,E,D)=>{yr.each(D,H=>v.setStyle(E,H,""))},Zd=(v,E)=>X(E)&&!wl(E,v.schema.getBlockElements()),eu=(v,E,D,H)=>{let G=E[D?"startContainer":"endContainer"];const _e=E[D?"startOffset":"endOffset"];to(G)&&(G=G.childNodes[Math.min(_e,G.childNodes.length-1)]||G),!D&&ba(G.nextSibling)&&(G=G.nextSibling);const Ie=Ht=>{for(;!v.dom.isBlock(Ht)&&Ht.parentNode&&H!==Ht;)Ht=Ht.parentNode;return Ht},Vt=(Ht,vt)=>{var on;const xo=new Dc(Ht,Ie(Ht)),xi=vt?"next":"prev";let xr;for(;xr=xo[xi]();)if(!(Nc(v,xr)||Ss(xr.textContent)||((on=xr.textContent)===null||on===void 0?void 0:on.length)===0))return Pt.some(xr);return Pt.none()};if(D&&Cr(G))if(Ss(G.textContent))G=Vt(G,!1).getOr(G);else for(G.parentNode!==null&&Zd(v,G.parentNode)&&(G=G.parentNode);G.previousSibling!==null&&(Zd(v,G.previousSibling)||Cr(G.previousSibling));)G=G.previousSibling;if(!D&&Cr(G))if(Ss(G.textContent))G=Vt(G,!0).getOr(G);else for(G.parentNode!==null&&Zd(v,G.parentNode)&&(G=G.parentNode);G.nextSibling!==null&&(Zd(v,G.nextSibling)||Cr(G.nextSibling));)G=G.nextSibling;for(;G.parentNode!==H;){const Ht=G.parentNode;if(lr(v,G)||/^(TD|TH)$/.test(Ht.nodeName))return G;G=Ht}return G},ya=(v,E,D)=>{const H=[],G=v.dom,_e=eu(v,E,!0,D),Ie=eu(v,E,!1,D);let Vt;const Ht=[];for(let vt=_e;vt&&(Ht.push(vt),vt!==Ie);vt=vt.nextSibling);return yr.each(Ht,vt=>{var on;if(lr(v,vt)){H.push(vt),Vt=null;return}if(G.isBlock(vt)||ba(vt)){ba(vt)&&G.remove(vt),Vt=null;return}const xo=vt.nextSibling;if(Ga.isBookmarkNode(vt)&&(qo(xo)||lr(v,xo)||!xo&&vt.parentNode===D)){Vt=null;return}Vt||(Vt=G.create("p"),(on=vt.parentNode)===null||on===void 0||on.insertBefore(Vt,vt),H.push(Vt)),Vt.appendChild(vt)}),H},Kr=(v,E,D)=>{const H=v.getStyle(E,"list-style-type");let G=D?D["list-style-type"]:"";return G=G===null?"":G,H===G},eS=(v,E)=>{const D=v.selection.getStart(!0),H=eu(v,E,!0,v.getBody());return Wa(nn.fromDom(H),nn.fromDom(E.commonAncestorContainer))?E.commonAncestorContainer:D},Wm=(v,E,D)=>{const H=v.selection.getRng();let G="LI";const _e=Vd(v,eS(v,H)),Ie=v.dom;if(Ie.getContentEditable(v.selection.getNode())==="false")return;E=E.toUpperCase(),E==="DL"&&(G="DT");const Vt=qr(H),Ht=No(ya(v,H,_e),v.dom.isEditable);yr.each(Ht,vt=>{let on;const xo=vt.previousSibling,xi=vt.parentNode;ja(xi)||(xo&&qo(xo)&&xo.nodeName===E&&Kr(Ie,xo,D)?(on=xo,vt=Ie.rename(vt,G),xo.appendChild(vt)):(on=Ie.create(E),xi.insertBefore(on,vt),on.appendChild(vt),vt=Ie.rename(vt,G)),Pc(Ie,vt,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Rr(Ie,on,D),nu(v.dom,on))}),v.selection.setRng(Ud(Vt))},Fs=(v,E)=>qo(v)&&v.nodeName===(E==null?void 0:E.nodeName),Ku=(v,E,D)=>{const H=v.getStyle(E,"list-style-type",!0),G=v.getStyle(D,"list-style-type",!0);return H===G},tu=(v,E)=>v.className===E.className,Pg=(v,E,D)=>Fs(E,D)&&Ku(v,E,D)&&tu(E,D),nu=(v,E)=>{let D,H=E.nextSibling;if(Pg(v,E,H)){const G=H;for(;D=G.firstChild;)E.appendChild(D);v.remove(G)}if(H=E.previousSibling,Pg(v,E,H)){const G=H;for(;D=G.lastChild;)E.insertBefore(D,E.firstChild);v.remove(G)}},Lc=(v,E,D,H)=>{if(E.nodeName!==D){const G=v.dom.rename(E,D);Rr(v.dom,G,H),Mr(v,sn(D),G)}else Rr(v.dom,E,H),Mr(v,sn(D),E)},jm=(v,E,D,H)=>{if(E.classList.forEach((G,_e,Ie)=>{G.startsWith("tox-")&&(Ie.remove(G),Ie.length===0&&E.removeAttribute("class"))}),E.nodeName!==D){const G=v.dom.rename(E,D);Rr(v.dom,G,H),Mr(v,sn(D),G)}else Rr(v.dom,E,H),Mr(v,sn(D),E)},wb=(v,E,D,H,G)=>{const _e=qo(E);if(_e&&E.nodeName===H&&!Lp(G)&&!zd(E))qu(v);else{Wm(v,H,G);const Ie=qr(v.selection.getRng()),Vt=_e?[E,...D]:D,Ht=_e&&zd(E)?jm:Lc;yr.each(Vt,vt=>{Ht(v,vt,H,G)}),v.selection.setRng(Ud(Ie))}},Lp=v=>"list-style-type"in v,ou=(v,E,D,H)=>{if(E!==v.getBody())if(E)if(E.nodeName===D&&!Lp(H)&&!zd(E))qu(v);else{const G=qr(v.selection.getRng());zd(E)&&E.classList.forEach((Ie,Vt,Ht)=>{Ie.startsWith("tox-")&&(Ht.remove(Ie),Ht.length===0&&E.removeAttribute("class"))}),Rr(v.dom,E,H);const _e=v.dom.rename(E,D);nu(v.dom,_e),v.selection.setRng(Ud(G)),Wm(v,D,H),Mr(v,sn(D),_e)}else Wm(v,D,H),Mr(v,sn(D),E)},su=(v,E,D)=>{const H=ji(v);if(Xl(v,H))return;const G=ju(v),_e=ln(D)?D:{};G.length>0?wb(v,H,G,E,_e):ou(v,H,E,_e)},Ip=Zi.DOM,Eb=(v,E)=>{const D=E.parentElement;if(D&&D.nodeName==="LI"&&D.firstChild===E){const H=D.previousSibling;H&&H.nodeName==="LI"?(H.appendChild(E),Is(v,D)&&Ip.remove(D)):Ip.setStyle(D,"listStyleType","none")}if(qo(D)){const H=D.previousSibling;H&&H.nodeName==="LI"&&H.appendChild(E)}},ur=(v,E)=>{const D=yr.grep(v.select("ol,ul",E));yr.each(D,H=>{Eb(v,H)})},ru=(v,E,D,H)=>{let G=E.startContainer;const _e=E.startOffset;if(Cr(G)&&(D?_e<G.data.length:_e>0))return G;const Ie=v.schema.getNonEmptyElements();to(G)&&(G=dn.getNode(G,_e));const Vt=new Dc(G,H);D&&Wu(v.dom,G)&&Vt.next();const Ht=D?Vt.next.bind(Vt):Vt.prev2.bind(Vt);for(;G=Ht();)if(G.nodeName==="LI"&&!G.hasChildNodes()||Ie[G.nodeName]||Cr(G)&&G.data.length>0)return G;return null},Ys=(v,E)=>{const D=E.childNodes;return D.length===1&&!qo(D[0])&&v.isBlock(D[0])},Gm=v=>Pt.from(v).map(nn.fromDom).filter(Ve).exists(E=>Cl(E)&&!mo(["details"],Yt(E))),Lg=(v,E)=>{Ys(v,E)&&Gm(E.firstChild)&&v.remove(E.firstChild,!0)},Ig=(v,E,D)=>{let H;const G=Ys(v,D)?D.firstChild:D;if(Lg(v,E),!Is(v,E,!0))for(;H=E.firstChild;)G.appendChild(H)},ss=(v,E,D)=>{let H;const G=E.parentNode;if(!$d(v,E)||!$d(v,D))return;qo(D.lastChild)&&(H=D.lastChild),G===D.lastChild&&ba(G.previousSibling)&&v.remove(G.previousSibling);const _e=D.lastChild;_e&&ba(_e)&&E.hasChildNodes()&&v.remove(_e),Is(v,D,!0)&&pa(nn.fromDom(D)),Ig(v,E,D),H&&D.appendChild(H);const Vt=pr(nn.fromDom(D),nn.fromDom(E))?v.getParents(E,qo,D):[];v.remove(E),jt(Vt,Ht=>{Is(v,Ht)&&Ht!==v.getRoot()&&v.remove(Ht)})},Yi=(v,E,D)=>{pa(nn.fromDom(D)),ss(v.dom,E,D),v.selection.setCursorLocation(D,0)},au=(v,E,D,H)=>{const G=v.dom;if(G.isEmpty(H))Yi(v,D,H);else{const _e=qr(E);ss(G,D,H),v.selection.setRng(Ud(_e))}},Ic=(v,E,D,H)=>{const G=qr(E);ss(v.dom,D,H);const _e=Ud(G);v.selection.setRng(_e)},Sr=(v,E)=>{const D=v.dom,H=v.selection,G=H.getStart(),_e=Bn(v,G),Ie=D.getParent(H.getStart(),"LI",_e);if(Ie){const Vt=Ie.parentElement;if(Vt===v.getBody()&&Is(D,Vt))return!0;const Ht=$o(H.getRng()),vt=D.getParent(ru(v,Ht,E,_e),"LI",_e),on=vt&&(E?D.isChildOf(Ie,vt):D.isChildOf(vt,Ie));if(vt&&vt!==Ie&&!on)return v.undoManager.transact(()=>{E?au(v,Ht,vt,Ie):xl(Ie)?Nr(v):Ic(v,Ht,Ie,vt)}),!0;if(on&&!E&&vt!==Ie){const xo=Ht.commonAncestorContainer.parentElement;return!xo||D.isChildOf(vt,xo)?!1:(v.undoManager.transact(()=>{const xi=qr(Ht);Ig(D,xo,vt),xo.remove();const xr=Ud(xi);v.selection.setRng(xr)}),!0)}else if(!vt&&!E&&Ht.startOffset===0&&Ht.endOffset===0)return v.undoManager.transact(()=>{qu(v)}),!0}return!1},qm=(v,E,D)=>{const H=v.getParent(E.parentNode,v.isBlock,D);v.remove(E),H&&v.isEmpty(H)&&v.remove(H)},kb=(v,E)=>{const D=v.dom,H=v.selection.getStart(),G=Bn(v,H),_e=D.getParent(H,D.isBlock,G);if(_e&&D.isEmpty(_e,void 0,{checkRootAsContent:!0})){const Ie=$o(v.selection.getRng()),Vt=ru(v,Ie,E,G),Ht=D.getParent(Vt,"LI",G);if(Vt&&Ht){const vt=xr=>mo(["td","th","caption"],Yt(xr)),on=xr=>xr.dom===G,xo=vr(nn.fromDom(Ht),vt,on),xi=vr(nn.fromDom(Ie.startContainer),vt,on);return Fu(xo,xi,Go)?(v.undoManager.transact(()=>{const xr=Ht.parentNode;qm(D,_e,G),nu(D,xr),v.selection.select(Vt,!0),v.selection.collapse(E)}),!0):!1}}return!1},tS=(v,E)=>Sr(v,E)||kb(v,E),Da=v=>{const E=v.selection.getStart(),D=Bn(v,E);return v.dom.getParent(E,"LI,DT,DD",D)||Tg(v).length>0},nS=v=>Da(v)?(v.undoManager.transact(()=>{let E=!0;const D=()=>E=!1;v.on("input",D),v.execCommand("Delete"),v.off("input",D),E&&v.dispatch("input"),ur(v.dom,v.getBody())}),!0):!1,Fg=(v,E)=>{const D=v.selection;return!Xl(v,D.getNode())&&(D.isCollapsed()?tS(v,E):nS(v))},Tb=v=>{v.on("ExecCommand",E=>{const D=E.command.toLowerCase();(D==="delete"||D==="forwarddelete")&&Da(v)&&ur(v.dom,v.getBody())}),v.on("keydown",E=>{E.keyCode===Yl.BACKSPACE?Fg(v,!1)&&E.preventDefault():E.keyCode===Yl.DELETE&&Fg(v,!0)&&E.preventDefault()})},Ot=v=>({backspaceDelete:E=>{Fg(v,E)}}),_b=(v,E)=>{const D=ji(v);D===null||Xl(v,D)||v.undoManager.transact(()=>{ln(E.styles)&&v.dom.setStyles(D,E.styles),ln(E.attrs)&&ke(E.attrs,(H,G)=>v.dom.setAttrib(D,G,H))})},ks=v=>{const E=Hi(hi(v).split("")),D=Oe(E,(H,G)=>{const _e=H.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,G)*_e});return ct(D,(H,G)=>H+G,0)},Ts=v=>{if(v--,v<0)return"";{const E=v%26,D=Math.floor(v/26),H=Ts(D),G=String.fromCharCode(65+E);return H+G}},Fp=v=>/^[A-Z]+$/.test(v),Ao=v=>/^[a-z]+$/.test(v),Ab=v=>/^[0-9]+$/.test(v),Km=v=>Ab(v)?2:Fp(v)?0:Ao(v)?1:et(v)?3:4,Fc=v=>{switch(Km(v)){case 2:return Pt.some({listStyleType:Pt.none(),start:v});case 0:return Pt.some({listStyleType:Pt.some("upper-alpha"),start:ks(v).toString()});case 1:return Pt.some({listStyleType:Pt.some("lower-alpha"),start:ks(v).toString()});case 3:return Pt.some({listStyleType:Pt.none(),start:""});case 4:return Pt.none()}},Yr=v=>{const E=parseInt(v.start,10);return Qo(v.listStyleType,"upper-alpha")?Ts(E):Qo(v.listStyleType,"lower-alpha")?Ts(E).toLowerCase():v.start},El=v=>{const E=ji(v);!vi(E)||Xl(v,E)||v.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Yr({start:v.dom.getAttrib(E,"start","1"),listStyleType:Pt.from(v.dom.getStyle(E,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:D=>{const H=D.getData();Fc(H.start).each(G=>{v.execCommand("mceListUpdate",!1,{attrs:{start:G.start==="1"?"":G.start},styles:{"list-style-type":G.listStyleType.getOr("")}})}),D.close()}})},Ym=(v,E)=>()=>{const D=ji(v);return X(D)&&D.nodeName===E},rs=v=>{v.addCommand("mceListProps",()=>{El(v)})},$g=v=>{v.on("BeforeExecCommand",E=>{const D=E.command.toLowerCase();D==="indent"?Rg(v):D==="outdent"&&Nr(v)}),v.addCommand("InsertUnorderedList",(E,D)=>{su(v,"UL",D)}),v.addCommand("InsertOrderedList",(E,D)=>{su(v,"OL",D)}),v.addCommand("InsertDefinitionList",(E,D)=>{su(v,"DL",D)}),v.addCommand("RemoveList",()=>{qu(v)}),rs(v),v.addCommand("mceListUpdate",(E,D)=>{ln(D)&&_b(v,D)}),v.addQueryStateHandler("InsertUnorderedList",Ym(v,"UL")),v.addQueryStateHandler("InsertOrderedList",Ym(v,"OL")),v.addQueryStateHandler("InsertDefinitionList",Ym(v,"DL"))};var Wd=tinymce.util.Tools.resolve("tinymce.html.Node");const iu=v=>v.type===3,$p=v=>v.length===0,$s=v=>{const E=(G,_e)=>{const Ie=Wd.create("li");jt(G,Vt=>Ie.append(Vt)),_e?v.insert(Ie,_e,!0):v.append(Ie)},D=(G,_e)=>iu(_e)?[...G,_e]:!$p(G)&&!iu(_e)?(E(G,_e),[]):G,H=ct(v.children(),D,[]);$p(H)||E(H)},qa=v=>{v.on("PreInit",()=>{const{parser:E}=v;E.addNodeFilter("ul,ol",D=>jt(D,$s))})},Ko=v=>{v.on("keydown",E=>{E.keyCode!==Yl.TAB||Yl.metaKeyPressed(E)||v.undoManager.transact(()=>{(E.shiftKey?Nr(v):Rg(v))&&E.preventDefault()})})},Xr=v=>{ne(v)&&Ko(v),Tb(v)},jd=(v,E)=>D=>{const H=G=>{D.setActive(Ag(G.parents,E)),D.setEnabled(!Xl(v,G.element)&&v.selection.isEditable())};return D.setEnabled(v.selection.isEditable()),Rc(v,H)},_s=v=>{const E=D=>()=>v.execCommand(D);v.hasPlugin("advlist")||(v.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:E("InsertOrderedList"),onSetup:jd(v,"OL")}),v.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:E("InsertUnorderedList"),onSetup:jd(v,"UL")}))},Ob=(v,E)=>D=>Rc(v,G=>D.setEnabled(Ag(G.parents,E)&&!Xl(v,G.element))),Rt=v=>{const E={text:"List properties...",icon:"ordered-list",onAction:()=>v.execCommand("mceListProps"),onSetup:Ob(v,"OL")};v.ui.registry.addMenuItem("listprops",E),v.ui.registry.addContextMenu("lists",{update:D=>{const H=ji(v,D);return vi(H)?["listprops"]:[]}})};var Si=()=>{fn.add("lists",v=>(he(v),qa(v),v.hasPlugin("rtc",!0)?rs(v):(Xr(v),$g(v)),_s(v),Rt(v),Ot(v)))};Si()})();(function(){const fn=Object.getPrototypeOf,I=(t,s,a)=>{var c;return a(t,s.prototype)?!0:((c=t.constructor)===null||c===void 0?void 0:c.name)===s.name},Co=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&I(t,String,(a,c)=>c.isPrototypeOf(a))?"string":s},Z=t=>s=>Co(s)===t,Fn=t=>s=>typeof s===t,ns=t=>s=>t===s,ln=(t,s)=>rr(t)&&I(t,s,(a,c)=>fn(a)===c),Tt=Z("string"),rr=Z("object"),_c=t=>ln(t,Object),X=Z("array"),$n=ns(null),yo=Fn("boolean"),ar=ns(void 0),pl=t=>t==null,uo=t=>!pl(t),Cs=Fn("function"),Zr=Fn("number"),kt=(t,s)=>{if(X(t)){for(let a=0,c=t.length;a<c;++a)if(!s(t[a]))return!1;return!0}return!1},re=()=>{},Pt=t=>()=>t(),Aa=(t,s)=>(...a)=>t(s.apply(null,a)),Qn=(t,s)=>a=>t(s(a)),ee=t=>()=>t,$t=t=>t,mo=(t,s)=>t===s;function hn(t,...s){return(...a)=>{const c=s.concat(a);return t.apply(null,c)}}const Oe=t=>s=>!t(s),jt=t=>()=>{throw new Error(t)},No=t=>t(),gn=ee(!1),ct=ee(!0);class S{constructor(s,a){this.tag=s,this.value=a}static some(s){return new S(!0,s)}static none(){return S.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?S.some(s(this.value)):S.none()}bind(s){return this.tag?s(this.value):S.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:S.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return uo(s)?S.some(s):S.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}S.singletonNone=new S(!1);const Ua=Array.prototype.slice,qe=Array.prototype.indexOf,ds=Array.prototype.push,Hi=(t,s)=>qe.call(t,s),Qe=(t,s)=>{const a=Hi(t,s);return a===-1?S.none():S.some(a)},jn=(t,s)=>Hi(t,s)>-1,ms=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const u=t[a];if(s(u,a))return!0}return!1},Hn=(t,s)=>{const a=[];for(let c=0;c<t;c++)a.push(s(c));return a},fi=(t,s)=>{const a=[];for(let c=0;c<t.length;c+=s){const u=Ua.call(t,c,c+s);a.push(u)}return a},ke=(t,s)=>{const a=t.length,c=new Array(a);for(let u=0;u<a;u++){const m=t[u];c[u]=s(m,u)}return c},ze=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const u=t[a];s(u,a)}},O=(t,s)=>{for(let a=t.length-1;a>=0;a--){const c=t[a];s(c,a)}},gi=(t,s)=>{const a=[],c=[];for(let u=0,m=t.length;u<m;u++){const f=t[u];(s(f,u)?a:c).push(f)}return{pass:a,fail:c}},Zn=(t,s)=>{const a=[];for(let c=0,u=t.length;c<u;c++){const m=t[c];s(m,c)&&a.push(m)}return a},Jo=(t,s,a)=>(O(t,(c,u)=>{a=s(a,c,u)}),a),Qo=(t,s,a)=>(ze(t,(c,u)=>{a=s(a,c,u)}),a),Fu=(t,s,a)=>{for(let c=0,u=t.length;c<u;c++){const m=t[c];if(s(m,c))return S.some(m);if(a(m,c))break}return S.none()},_t=(t,s)=>Fu(t,s,gn),Vn=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const u=t[a];if(s(u,a))return S.some(a)}return S.none()},At=t=>{const s=[];for(let a=0,c=t.length;a<c;++a){if(!X(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);ds.apply(s,t[a])}return s},pe=(t,s)=>At(ke(t,s)),hi=(t,s)=>{for(let a=0,c=t.length;a<c;++a){const u=t[a];if(s(u,a)!==!0)return!1}return!0},ma=t=>{const s=Ua.call(t,0);return s.reverse(),s},et=(t,s)=>Zn(t,a=>!jn(s,a)),Ac=(t,s)=>{const a={};for(let c=0,u=t.length;c<u;c++){const m=t[c];a[String(m)]=s(m,c)}return a},Ss=t=>[t],Wl=(t,s)=>{const a=Ua.call(t,0);return a.sort(s),a},ko=(t,s)=>s>=0&&s<t.length?S.some(t[s]):S.none(),Ps=t=>ko(t,0),fa=t=>ko(t,t.length-1),Ls=Cs(Array.from)?Array.from:t=>Ua.call(t),nn=(t,s)=>{for(let a=0;a<t.length;a++){const c=s(t[a],a);if(c.isSome())return c}return S.none()},eo=Object.keys,bl=Object.hasOwnProperty,jo=(t,s)=>{const a=eo(t);for(let c=0,u=a.length;c<u;c++){const m=a[c],f=t[m];s(f,m)}},Gn=(t,s)=>Za(t,(a,c)=>({k:c,v:s(a,c)})),Za=(t,s)=>{const a={};return jo(t,(c,u)=>{const m=s(c,u);a[m.k]=m.v}),a},Go=t=>(s,a)=>{t[a]=s},pr=(t,s,a,c)=>{jo(t,(u,m)=>{(s(u,m)?a:c)(u,m)})},xs=(t,s)=>{const a={},c={};return pr(t,s,Go(a),Go(c)),{t:a,f:c}},pi=(t,s)=>{const a={};return pr(t,s,Go(a),re),a},Vi=(t,s)=>{const a=[];return jo(t,(c,u)=>{a.push(s(c,u))}),a},ws=(t,s)=>{const a=eo(t);for(let c=0,u=a.length;c<u;c++){const m=a[c],f=t[m];if(s(f,m,t))return S.some(f)}return S.none()},jl=t=>Vi(t,$t),Ze=(t,s)=>Yt(t,s)?S.from(t[s]):S.none(),Yt=(t,s)=>bl.call(t,s),ir=(t,s)=>Yt(t,s)&&t[s]!==void 0&&t[s]!==null,ao={generate:t=>{if(!X(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return ze(t,(c,u)=>{const m=eo(c);if(m.length!==1)throw new Error("one and only one name per case");const f=m[0],p=c[f];if(a[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!X(p))throw new Error("case arguments must be an array");s.push(f),a[f]=(...b)=>{const C=b.length;if(C!==p.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+p.length+" ("+p+"), got "+C);return{fold:(...k)=>{if(k.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+k.length);return k[u].apply(null,b)},match:k=>{const A=eo(k);if(s.length!==A.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+A.join(","));if(!hi(s,L=>jn(A,L)))throw new Error("Not all branches were specified when using match. Specified: "+A.join(", ")+`
Required: `+s.join(", "));return k[f].apply(null,b)},log:k=>{console.log(k,{constructors:s,constructor:f,params:b})}}}}),a}},Ve=t=>{let s=t;return{get:()=>s,set:u=>{s=u}}},Wr=t=>{let s=S.none(),a=[];const c=C=>Wr(x=>{u(k=>{x(C(k))})}),u=C=>{f()?b(C):a.push(C)},m=C=>{f()||(s=S.some(C),p(a),a=[])},f=()=>s.isSome(),p=C=>{ze(C,b)},b=C=>{s.each(x=>{setTimeout(()=>{C(x)},0)})};return t(m),{get:u,map:c,isReady:f}},Hu={nu:Wr,pure:t=>Wr(s=>{s(t)})},oo=t=>{setTimeout(()=>{throw t},0)},xt=t=>{const s=b=>{t().then(b,oo)};return{map:b=>xt(()=>t().then(b)),bind:b=>xt(()=>t().then(C=>b(C).toPromise())),anonBind:b=>xt(()=>t().then(()=>b.toPromise())),toLazy:()=>Hu.nu(s),toCached:()=>{let b=null;return xt(()=>(b===null&&(b=t()),b))},toPromise:t,get:s}},Ro={nu:t=>xt(()=>new Promise(t)),pure:t=>xt(()=>Promise.resolve(t))},cr=t=>{const s=m=>m(t),a=ee(t),c=()=>u,u={tag:!0,inner:t,fold:(m,f)=>f(t),isValue:ct,isError:gn,map:m=>Ft.value(m(t)),mapError:c,bind:s,exists:s,forall:s,getOr:a,or:c,getOrThunk:a,orThunk:c,getOrDie:a,each:m=>{m(t)},toOptional:()=>S.some(t)};return u},To=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(c,u)=>c(t),isValue:gn,isError:ct,map:s,mapError:c=>Ft.error(c(t)),bind:s,exists:gn,forall:ct,getOr:$t,or:$t,getOrThunk:No,orThunk:No,getOrDie:jt(String(t)),each:re,toOptional:S.none};return a},Ft={value:cr,error:To,fromOption:(t,s)=>t.fold(()=>To(s),cr)},jr=t=>({...t,toCached:()=>jr(t.toCached()),bindFuture:b=>jr(t.bind(C=>C.fold(x=>Ro.pure(Ft.error(x)),x=>b(x)))),bindResult:b=>jr(t.map(C=>C.bind(b))),mapResult:b=>jr(t.map(C=>C.map(b))),mapError:b=>jr(t.map(C=>C.mapError(b))),foldResult:(b,C)=>t.map(x=>x.fold(b,C)),withTimeout:(b,C)=>jr(Ro.nu(x=>{let k=!1;const A=setTimeout(()=>{k=!0,x(Ft.error(C()))},b);t.get(R=>{k||(clearTimeout(A),x(R))})}))}),Ks=t=>jr(Ro.nu(t)),zu=t=>jr(Ro.pure(Ft.value(t))),Ld={nu:Ks,wrap:jr,pure:zu,value:zu,error:t=>jr(Ro.pure(Ft.error(t))),fromResult:t=>jr(Ro.pure(t)),fromFuture:t=>jr(t.map(Ft.value)),fromPromise:t=>Ks(s=>{t.then(a=>{s(Ft.value(a))},a=>{s(Ft.error(a))})})},yl=typeof window<"u"?window:Function("return this;")(),zi=(t,s,a,c)=>{const u=t+s;return u>c?a:u<a?c:u},Es=(t,s,a)=>Math.min(Math.max(t,s),a),Oc=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let pa=0;const Ue=t=>{const a=new Date().getTime(),c=Math.floor(Oc()*1e9);return pa++,t+"_"+c+pa+String(a)},Uu=(t,s)=>s,os=(t,s)=>_c(t)&&_c(s)?Nn(t,s):s,Im=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let c=0;c<s.length;c++){const u=s[c];for(const m in u)Yt(u,m)&&(a[m]=t(a[m],u[m]))}return a},Nn=Im(os),Id=Im(Uu),Gr=(t,s,a=mo)=>t.exists(c=>a(c,s)),Fm=(t,s,a=mo)=>br(t,s,a).getOr(t.isNone()&&s.isNone()),Ui=t=>{const s=[],a=c=>{s.push(c)};for(let c=0;c<t.length;c++)t[c].each(a);return s},$m=t=>{const s=[];for(let a=0;a<t.length;a++){const c=t[a];if(c.isSome())s.push(c.getOrDie());else return S.none()}return S.some(s)},br=(t,s,a)=>t.isSome()&&s.isSome()?S.some(a(t.getOrDie(),s.getOrDie())):S.none(),Fd=(t,s,a,c)=>t.isSome()&&s.isSome()&&a.isSome()?S.some(c(t.getOrDie(),s.getOrDie(),a.getOrDie())):S.none(),ql=(t,s)=>t!=null?S.some(s(t)):S.none(),vr=(t,s)=>t?S.some(s):S.none(),fs=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),es=(t,s)=>{let a=s??yl;for(let c=0;c<t.length&&a!==void 0&&a!==null;++c)a=a[t[c]];return a},Kl=(t,s)=>{const a=t.split(".");return es(a,s)};ao.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Cl=t=>{const s=[],a=[];return ze(t,c=>{c.fold(u=>{s.push(u)},u=>{a.push(u)})}),{errors:s,values:a}},bi=t=>{const s=Ve(S.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(S.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:p=>{a(),s.set(S.some(p))}}},kg=()=>bi(t=>t.destroy()),Wa=()=>bi(t=>t.unbind()),dn=()=>{const t=bi(re);return{...t,on:a=>t.get().each(a)}},Dc=(t,s)=>t+s,Yl=(t,s)=>t.substring(s),Zi=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,yr=(t,s)=>Cr(t,s)?Yl(t,s.length):t,_o=(t,s)=>to(t,s)?t:Dc(t,s),io=(t,s,a=0,c)=>{const u=t.indexOf(s,a);return u!==-1?ar(c)?!0:u+s.length<=c:!1},Cr=(t,s)=>Zi(t,s,0),to=(t,s)=>Zi(t,s,t.length-s.length),Mc=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),vi=t=>t.length>0,ja=t=>!vi(t),Sl=t=>{const s=parseFloat(t);return isNaN(s)?S.none():S.some(s)},Zu=(t,s)=>{let a=null,c=null;return{cancel:()=>{$n(a)||(clearTimeout(a),a=null,c=null)},throttle:(...f)=>{c=f,$n(a)&&(a=setTimeout(()=>{const p=c;a=null,c=null,t.apply(null,p)},s))}}},ba=(t,s)=>{let a=null;return{cancel:()=>{$n(a)||(clearTimeout(a),a=null)},throttle:(...m)=>{$n(a)&&(a=setTimeout(()=>{a=null,t.apply(null,m)},s))}}},xl=(t,s)=>{let a=null;const c=()=>{$n(a)||(clearTimeout(a),a=null)};return{cancel:c,throttle:(...m)=>{c(),a=setTimeout(()=>{a=null,t.apply(null,m)},s)}}},lr=t=>{let s=!1,a;return(...c)=>(s||(s=!0,a=t.apply(null,c)),a)},wl="\uFEFF",Nc="¬†",Wu=(t,s)=>{const c=(s||document).createElement("div");if(c.innerHTML=t,!c.hasChildNodes()||c.childNodes.length>1){const u="HTML does not have a single root node";throw console.error(u,t),new Error(u)}return yi(c.childNodes[0])},Is=(t,s)=>{const c=(s||document).createElement(t);return yi(c)},$d=(t,s)=>{const c=(s||document).createTextNode(t);return yi(c)},yi=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},ne={fromHtml:Wu,fromTag:Is,fromText:$d,fromDom:yi,fromPoint:(t,s,a)=>S.from(t.dom.elementFromPoint(s,a)).map(yi)},wn=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,c)=>{t.setStart(a.dom,c)},a=>{t.setStartAfter(a.dom)})},So=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,c)=>{t.setEnd(a.dom,c)},a=>{t.setEndAfter(a.dom)})},M=(t,s,a)=>{const c=t.document.createRange();return wn(c,s),So(c,a),c},$=(t,s,a,c,u)=>{const m=t.document.createRange();return m.setStart(s.dom,a),m.setEnd(c.dom,u),m},J=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),Ce=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?S.some(a).map(J):S.none()},Le=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?S.some(s).map(J):S.none()},Xe=ao.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Xt=(t,s,a)=>s(ne.fromDom(a.startContainer),a.startOffset,ne.fromDom(a.endContainer),a.endOffset),Fo=(t,s)=>s.match({domRange:a=>({ltr:ee(a),rtl:S.none}),relative:(a,c)=>({ltr:lr(()=>M(t,a,c)),rtl:lr(()=>S.some(M(t,c,a)))}),exact:(a,c,u,m)=>({ltr:lr(()=>$(t,a,c,u,m)),rtl:lr(()=>S.some($(t,u,m,a,c)))})}),Rn=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(u=>u.collapsed===!1).map(u=>Xe.rtl(ne.fromDom(u.endContainer),u.endOffset,ne.fromDom(u.startContainer),u.startOffset)).getOrThunk(()=>Xt(t,Xe.ltr,a)):Xt(t,Xe.ltr,a)},$o=(t,s)=>{const a=Fo(t,s);return Rn(t,a)},Bo=(t,s)=>$o(t,s).match({ltr:(c,u,m,f)=>{const p=t.document.createRange();return p.setStart(c.dom,u),p.setEnd(m.dom,f),p},rtl:(c,u,m,f)=>{const p=t.document.createRange();return p.setStart(m.dom,f),p.setEnd(c.dom,u),p}});Xe.ltr,Xe.rtl;const Wi=9,ji=11,Hd=1,cb=3,ju=(t,s)=>{const a=t.dom;if(a.nodeType!==Hd)return!1;{const c=a;if(c.matches!==void 0)return c.matches(s);if(c.msMatchesSelector!==void 0)return c.msMatchesSelector(s);if(c.webkitMatchesSelector!==void 0)return c.webkitMatchesSelector(s);if(c.mozMatchesSelector!==void 0)return c.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},lb=t=>t.nodeType!==Hd&&t.nodeType!==Wi&&t.nodeType!==ji||t.childElementCount===0,Tg=(t,s)=>{const a=s===void 0?document:s.dom;return lb(a)?[]:ke(a.querySelectorAll(t),ne.fromDom)},Op=(t,s)=>{const a=s===void 0?document:s.dom;return lb(a)?S.none():S.from(a.querySelector(t)).map(ne.fromDom)},Bn=(t,s)=>t.dom===s.dom,Hm=(t,s)=>{const a=t.dom,c=s.dom;return a===c?!1:a.contains(c)},Vd=(t,s,a,c)=>{const u=t.isiOS()&&/ipad/i.test(a)===!0,m=t.isiOS()&&!u,f=t.isiOS()||t.isAndroid(),p=f||c("(pointer:coarse)"),b=u||!m&&f&&c("(min-device-width:768px)"),C=m||f&&!b,x=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,k=!C&&!b&&!x;return{isiPad:ee(u),isiPhone:ee(m),isTablet:ee(b),isPhone:ee(C),isTouch:ee(p),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:ee(x),isDesktop:ee(k)}},ub=(t,s)=>{for(let a=0;a<t.length;a++){const c=t[a];if(c.test(s))return c}},Dp=(t,s)=>{const a=ub(t,s);if(!a)return{major:0,minor:0};const c=u=>Number(s.replace(a,"$"+u));return _g(c(1),c(2))},db=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?Mp():Dp(t,a)},Mp=()=>_g(0,0),_g=(t,s)=>({major:t,minor:s}),Vm={nu:_g,detect:db,unknown:Mp},zd=(t,s)=>nn(s.brands,a=>{const c=a.brand.toLowerCase();return _t(t,u=>{var m;return c===((m=u.brand)===null||m===void 0?void 0:m.toLowerCase())}).map(u=>({current:u.name,version:Vm.nu(parseInt(a.version,10),0)}))}),Ag=(t,s)=>{const a=String(s).toLowerCase();return _t(t,c=>c.search(a))},jC=(t,s)=>Ag(t,s).map(a=>{const c=Vm.detect(a.versionRegexes,s);return{current:a.name,version:c}}),GC=(t,s)=>Ag(t,s).map(a=>{const c=Vm.detect(a.versionRegexes,s);return{current:a.name,version:c}}),Xl=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Rc=t=>s=>io(s,t),Mr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>io(t,"edge/")&&io(t,"chrome")&&io(t,"safari")&&io(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Xl],search:t=>io(t,"chrome")&&!io(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>io(t,"msie")||io(t,"trident")},{name:"Opera",versionRegexes:[Xl,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Rc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Rc("firefox")},{name:"Safari",versionRegexes:[Xl,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(io(t,"safari")||io(t,"mobile/"))&&io(t,"applewebkit")}],zm=[{name:"Windows",search:Rc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>io(t,"iphone")||io(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Rc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Rc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Rc("linux"),versionRegexes:[]},{name:"Solaris",search:Rc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Rc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Rc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],mb={browsers:ee(Mr),oses:ee(zm)},Np="Edge",fb="Chromium",Jl="IE",Rp="Opera",Og="Firefox",Ci="Safari",Bc=()=>Ql({current:void 0,version:Vm.unknown()}),Ql=t=>{const s=t.current,a=t.version,c=u=>()=>s===u;return{current:s,version:a,isEdge:c(Np),isChromium:c(fb),isIE:c(Jl),isOpera:c(Rp),isFirefox:c(Og),isSafari:c(Ci)}},gb={unknown:Bc,nu:Ql,edge:ee(Np),chromium:ee(fb),ie:ee(Jl),opera:ee(Rp),firefox:ee(Og),safari:ee(Ci)},yn="Windows",hb="iOS",Bp="Android",pb="Linux",bb="macOS",vb="Solaris",yb="FreeBSD",Pp="ChromeOS",Yk=()=>Cb({current:void 0,version:Vm.unknown()}),Cb=t=>{const s=t.current,a=t.version,c=u=>()=>s===u;return{current:s,version:a,isWindows:c(yn),isiOS:c(hb),isAndroid:c(Bp),isMacOS:c(bb),isLinux:c(pb),isSolaris:c(vb),isFreeBSD:c(yb),isChromeOS:c(Pp)}},qC={unknown:Yk,nu:Cb,windows:ee(yn),ios:ee(hb),android:ee(Bp),linux:ee(pb),macos:ee(bb),solaris:ee(vb),freebsd:ee(yb),chromeos:ee(Pp)},KC={detect:(t,s,a)=>{const c=mb.browsers(),u=mb.oses(),m=s.bind(b=>zd(c,b)).orThunk(()=>jC(c,t)).fold(gb.unknown,gb.nu),f=GC(u,t).fold(qC.unknown,qC.nu),p=Vd(f,m,t,a);return{browser:m,os:f,deviceType:p}}},YC=t=>window.matchMedia(t).matches;let XC=lr(()=>KC.detect(window.navigator.userAgent,S.from(window.navigator.userAgentData),YC));const va=()=>XC(),JC=(t,s)=>Kl(t,s),U=(t,s)=>{const a=JC(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},QC=Object.getPrototypeOf,Dg=t=>U("HTMLElement",t),Sb=t=>{const s=Kl("ownerDocument.defaultView",t);return rr(t)&&(Dg(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(QC(t).constructor.name))},Gi=t=>t.dom.nodeName.toLowerCase(),Um=t=>t.dom.nodeType,Zm=t=>s=>Um(s)===t,xb=t=>Oa(t)&&Sb(t.dom),Oa=Zm(Hd),Gu=Zm(cb),Mg=Zm(Wi),Ng=Zm(ji),Rg=t=>s=>Oa(s)&&Gi(s)===t,Nr=t=>ne.fromDom(t.dom.ownerDocument),qu=t=>Mg(t)?t:Nr(t),Ga=t=>ne.fromDom(qu(t).dom.documentElement),qi=t=>ne.fromDom(qu(t).dom.defaultView),qr=t=>S.from(t.dom.parentNode).map(ne.fromDom),Ud=t=>qr(t),sn=t=>S.from(t.dom.parentElement).map(ne.fromDom),Ki=(t,s)=>{const a=Cs(s)?s:gn;let c=t.dom;const u=[];for(;c.parentNode!==null&&c.parentNode!==void 0;){const m=c.parentNode,f=ne.fromDom(m);if(u.push(f),a(f)===!0)break;c=m}return u},Bg=t=>S.from(t.dom.offsetParent).map(ne.fromDom),En=t=>S.from(t.dom.nextSibling).map(ne.fromDom),Rr=t=>ke(t.dom.childNodes,ne.fromDom),Pc=(t,s)=>{const a=t.dom.childNodes;return S.from(a[s]).map(ne.fromDom)},Zd=t=>Pc(t,0),eu=(t,s)=>({element:t,offset:s}),ya=(t,s)=>{const a=Rr(t);return a.length>0&&s<a.length?eu(a[s],0):eu(t,s)},Kr=(t,s,a,c)=>{const m=Nr(t).dom.createRange();return m.setStart(t.dom,s),m.setEnd(a.dom,c),m},eS=(t,s,a,c)=>{const u=Kr(t,s,a,c),m=Bn(t,a)&&s===c;return u.collapsed&&!m},Wm=t=>Ng(t)&&uo(t.dom.host),Fs=t=>ne.fromDom(t.dom.getRootNode()),Ku=t=>Wm(t)?t:ne.fromDom(qu(t).dom.body),tu=t=>Pg(t).isSome(),Pg=t=>{const s=Fs(t);return Wm(s)?S.some(s):S.none()},nu=t=>ne.fromDom(t.dom.host),Lc=t=>{if(uo(t.target)){const s=ne.fromDom(t.target);if(Oa(s)&&jm(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Ps(a)}}return S.from(t.target)},jm=t=>uo(t.dom.shadowRoot),wb=(t,s,a,c,u,m,f)=>({target:t,x:s,y:a,stop:c,prevent:u,kill:m,raw:f}),Lp=t=>{const s=ne.fromDom(Lc(t).getOr(t.target)),a=()=>t.stopPropagation(),c=()=>t.preventDefault(),u=Aa(c,a);return wb(s,t.clientX,t.clientY,a,c,u,t)},ou=(t,s)=>a=>{t(a)&&s(Lp(a))},su=(t,s,a,c,u)=>{const m=ou(a,c);return t.dom.addEventListener(s,m,u),{unbind:hn(ur,t,s,m,u)}},Ip=(t,s,a,c)=>su(t,s,a,c,!1),Eb=(t,s,a,c)=>su(t,s,a,c,!0),ur=(t,s,a,c)=>{t.dom.removeEventListener(s,a,c)},ru=ct,Ys=(t,s,a)=>Ip(t,s,ru,a),Gm=(t,s,a)=>Eb(t,s,ru,a),Lg=Lp,Ig=()=>ne.fromDom(document),ss=(t,s=!1)=>t.dom.focus({preventScroll:s}),Yi=t=>t.dom.blur(),au=t=>{const s=Fs(t).dom;return t.dom===s.activeElement},Ic=(t=Ig())=>S.from(t.dom.activeElement).map(ne.fromDom),Sr=t=>Ic(Fs(t)).filter(s=>t.dom.contains(s.dom)),qm=(t,s)=>{qr(t).each(c=>{c.dom.insertBefore(s.dom,t.dom)})},kb=(t,s)=>{En(t).fold(()=>{qr(t).each(u=>{Da(u,s)})},c=>{qm(c,s)})},tS=(t,s)=>{Zd(t).fold(()=>{Da(t,s)},c=>{t.dom.insertBefore(s.dom,c.dom)})},Da=(t,s)=>{t.dom.appendChild(s.dom)},nS=(t,s,a)=>{Pc(t,a).fold(()=>{Da(t,s)},c=>{qm(c,s)})},Fg=(t,s)=>{ze(s,a=>{Da(t,a)})},Tb=(t,s,a)=>{if(Tt(a)||yo(a)||Zr(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},Ot=(t,s,a)=>{Tb(t.dom,s,a)},_b=(t,s)=>{const a=t.dom;jo(s,(c,u)=>{Tb(a,u,c)})},ks=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},Ts=(t,s)=>S.from(ks(t,s)),Fp=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},Ao=(t,s)=>{t.dom.removeAttribute(s)},Ab=t=>Qo(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Km=t=>{t.dom.textContent="",ze(Rr(t),s=>{Fc(s)})},Fc=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Yr=(t,s)=>ne.fromDom(t.dom.cloneNode(s)),El=t=>Yr(t,!1),Ym=t=>Yr(t,!0),rs=(t,s)=>{const c=(s||document).createElement("div");return c.innerHTML=t,Rr(ne.fromDom(c))},$g=t=>t.dom.innerHTML,Wd=(t,s)=>{const c=Nr(t).dom,u=ne.fromDom(c.createDocumentFragment()),m=rs(s,c);Fg(u,m),Km(t),Da(t,u)},iu=t=>{const s=ne.fromTag("div"),a=ne.fromDom(t.dom.cloneNode(!0));return Da(s,a),$g(s)},$p=t=>{if(Wm(t))return"#shadow-root";{const s=El(t);return iu(s)}},$s=t=>new Promise((s,a)=>{const c=()=>{m(),s(t)},u=[Ys(t,"load",c),Ys(t,"error",()=>{m(),a("Unable to load data from image: "+t.dom.src)})],m=()=>ze(u,f=>f.unbind());t.dom.complete&&c()}),qa=t=>t.style!==void 0&&Cs(t.style.getPropertyValue),Ko=t=>{const s=Gu(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Pg(ne.fromDom(s)).fold(()=>a.body.contains(s),Qn(Ko,nu))},Xr=()=>jd(ne.fromDom(document)),jd=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return ne.fromDom(s)},_s=(t,s,a)=>{if(!Tt(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);qa(t)&&t.style.setProperty(s,a)},Ob=(t,s)=>{qa(t)&&t.style.removeProperty(s)},Rt=(t,s,a)=>{const c=t.dom;_s(c,s,a)},Si=(t,s)=>{const a=t.dom;jo(s,(c,u)=>{_s(a,u,c)})},v=(t,s)=>{const a=t.dom;jo(s,(c,u)=>{c.fold(()=>{Ob(a,u)},m=>{_s(a,u,m)})})},E=(t,s)=>{const a=t.dom,u=window.getComputedStyle(a).getPropertyValue(s);return u===""&&!Ko(t)?D(a,s):u},D=(t,s)=>qa(t)?t.style.getPropertyValue(s):"",H=(t,s)=>{const a=t.dom,c=D(a,s);return S.from(c).filter(u=>u.length>0)},G=t=>{const s={},a=t.dom;if(qa(a))for(let c=0;c<a.style.length;c++){const u=a.style.item(c);s[u]=a.style[u]}return s},_e=(t,s,a)=>{const c=ne.fromTag(t);return Rt(c,s,a),H(c,s).isSome()},Ie=(t,s)=>{const a=t.dom;Ob(a,s),Gr(Ts(t,"style").map(Mc),"")&&Ao(t,"style")},Vt=t=>t.dom.offsetWidth,Ht=(t,s)=>{const a=(p,b)=>{if(!Zr(b)&&!b.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+b);const C=p.dom;qa(C)&&(C.style[t]=b+"px")},c=p=>{const b=s(p);if(b<=0||b===null){const C=E(p,t);return parseFloat(C)||0}return b},u=c,m=(p,b)=>Qo(b,(C,x)=>{const k=E(p,x),A=k===void 0?0:parseInt(k,10);return isNaN(A)?C:C+A},0);return{set:a,get:c,getOuter:u,aggregate:m,max:(p,b,C)=>{const x=m(p,C);return b>x?b-x:0}}},vt=Ht("height",t=>{const s=t.dom;return Ko(t)?s.getBoundingClientRect().height:s.offsetHeight}),on=t=>vt.get(t),xo=t=>vt.getOuter(t),xi=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],c=vt.max(t,s,a);Rt(t,"max-height",c+"px")},xr=t=>t.offsetWidth<=0&&t.offsetHeight<=0,oS=t=>!xr(t.dom),Db=Ht("width",t=>t.dom.offsetWidth),Xk=Ht("width",t=>{const s=t.dom;return Ko(t)?s.getBoundingClientRect().width:s.offsetWidth}),Mb=(t,s)=>Db.set(t,s),As=t=>Db.get(t),Hg=t=>Db.getOuter(t),Nb=t=>Xk.getOuter(t),sS=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],c=Db.max(t,s,a);Rt(t,"max-width",c+"px")},rS=(t,s)=>({left:t,top:s,translate:(c,u)=>rS(t+c,s+u)}),Ho=rS,eG=t=>{const s=t.getBoundingClientRect();return Ho(s.left,s.top)},Rb=(t,s)=>t!==void 0?t:s!==void 0?s:0,$c=t=>{const s=t.dom.ownerDocument,a=s.body,c=s.defaultView,u=s.documentElement;if(a===t.dom)return Ho(a.offsetLeft,a.offsetTop);const m=Rb(c==null?void 0:c.pageYOffset,u.scrollTop),f=Rb(c==null?void 0:c.pageXOffset,u.scrollLeft),p=Rb(u.clientTop,a.clientTop),b=Rb(u.clientLeft,a.clientLeft);return Hp(t).translate(f-b,m-p)},Hp=t=>{const s=t.dom,c=s.ownerDocument.body;return c===s?Ho(c.offsetLeft,c.offsetTop):Ko(t)?eG(s):Ho(0,0)},Br=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,c=s.body.scrollTop||s.documentElement.scrollTop;return Ho(a,c)},aS=(t,s,a)=>{const u=(a!==void 0?a.dom:document).defaultView;u&&u.scrollTo(t,s)},mB=((t,s)=>{const a=m=>{if(!t(m))throw new Error("Can only get "+s+" value of a "+s+" node");return c(m).getOr("")},c=m=>t(m)?S.from(m.dom.nodeValue):S.none();return{get:a,getOption:c,set:(m,f)=>{if(!t(m))throw new Error("Can only set raw "+s+" value of a "+s+" node");m.dom.nodeValue=f}}})(Gu,"text"),cS=t=>mB.get(t),Vp=(t,s)=>a=>Jk(a)==="rtl"?s:t,Jk=t=>E(t,"direction")==="rtl"?"rtl":"ltr",Bb=(t,s)=>{const a=ks(t,s);return a===void 0||a===""?[]:a.split(" ")},fB=(t,s,a)=>{const u=Bb(t,s).concat([a]);return Ot(t,s,u.join(" ")),!0},lS=(t,s,a)=>{const c=Zn(Bb(t,s),u=>u!==a);return c.length>0?Ot(t,s,c.join(" ")):Ao(t,s),!1};var Pb=(t,s,a,c,u)=>t(a,c)?S.some(a):Cs(u)&&u(a)?S.none():s(a,c,u);const Vg=(t,s,a)=>{let c=t.dom;const u=Cs(a)?a:gn;for(;c.parentNode;){c=c.parentNode;const m=ne.fromDom(c);if(s(m))return S.some(m);if(u(m))break}return S.none()},Qk=(t,s,a)=>Pb((u,m)=>m(u),Vg,t,s,a),eT=(t,s)=>{const a=t.dom;return a.parentNode?Lb(ne.fromDom(a.parentNode),c=>!Bn(t,c)&&s(c)):S.none()},Lb=(t,s)=>{const a=u=>s(ne.fromDom(u));return _t(t.dom.childNodes,a).map(ne.fromDom)},gB=(t,s)=>{const a=c=>{for(let u=0;u<c.childNodes.length;u++){const m=ne.fromDom(c.childNodes[u]);if(s(m))return S.some(m);const f=a(c.childNodes[u]);if(f.isSome())return f}return S.none()};return a(t.dom)},hB=t=>Op(t),Hc=(t,s,a)=>Vg(t,c=>ju(c,s),a),Yu=(t,s)=>eT(t,a=>ju(a,s)),cu=(t,s)=>Lb(t,a=>ju(a,s)),qn=(t,s)=>Op(s,t),lu=(t,s,a)=>Pb((u,m)=>ju(u,m),Hc,t,s,a),uS=(t,s)=>{t.dom.checked=s},zp=t=>t.dom.checked,Xu=t=>t.dom.classList!==void 0,Gd=t=>Bb(t,"class"),zg=(t,s)=>fB(t,"class",s),dS=(t,s)=>lS(t,"class",s),tT=(t,s)=>jn(Gd(t),s)?dS(t,s):zg(t,s),Vo=(t,s)=>{Xu(t)?t.dom.classList.add(s):zg(t,s)},nT=t=>{(Xu(t)?t.dom.classList:Gd(t)).length===0&&Ao(t,"class")},fo=(t,s)=>{Xu(t)?t.dom.classList.remove(s):dS(t,s),nT(t)},oT=(t,s)=>{const a=Xu(t)?t.dom.classList.toggle(s):tT(t,s);return nT(t),a},wr=(t,s)=>Xu(t)&&t.dom.classList.contains(s),Xm=(t,s)=>{ze(s,a=>{Vo(t,a)})},wi=(t,s)=>{ze(s,a=>{fo(t,a)})},pB=(t,s)=>{ze(s,a=>{oT(t,a)})},bB=(t,s)=>hi(s,a=>wr(t,a)),vB=t=>{const s=t.dom.classList,a=new Array(s.length);for(let c=0;c<s.length;c++){const u=s.item(c);u!==null&&(a[c]=u)}return a},Ju=t=>Xu(t)?vB(t):Gd(t),yB=t=>t.dom.textContent,Vc=t=>t.dom.value,Jm=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},mS=(t,s,a)=>Zn(Ki(t,a),s),go=(t,s)=>Tg(s,t),fS=(t,s,a)=>Qk(t,s,a).isSome(),Up=(t,s,a)=>lu(t,s,a).isSome(),Ib=t=>Cs(t)?t:gn,sT=(t,s,a)=>{let c=t.dom;const u=Ib(a);for(;c.parentNode;){c=c.parentNode;const m=ne.fromDom(c),f=s(m);if(f.isSome())return f;if(u(m))break}return S.none()},Zp=(t,s,a)=>{const c=s(t),u=Ib(a);return c.orThunk(()=>u(t)?S.none():sT(t,s,u))},Ug={create:(t,s,a,c)=>({start:t,soffset:s,finish:a,foffset:c})},gS=ao.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),CB=(t,s,a,c)=>t.fold(s,a,c),SB=t=>t.fold($t,$t,$t),xB=gS.before,wB=gS.on,nG=gS.after,rT={before:xB,on:wB,after:nG,cata:CB,getStart:SB},Zg=ao.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),EB=t=>Zg.exact(t.start,t.soffset,t.finish,t.foffset),kB=t=>t.match({domRange:s=>ne.fromDom(s.startContainer),relative:(s,a)=>rT.getStart(s),exact:(s,a,c,u)=>s}),TB=Zg.domRange,_B=Zg.relative,AB=Zg.exact,Qu=t=>{const s=kB(t);return qi(s)},Fb=Ug.create,Wp={domRange:TB,relative:_B,exact:AB,exactFromRange:EB,getWin:Qu,range:Fb},OB=t=>S.from(t.getSelection()),aT=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return S.some(Ug.create(ne.fromDom(s.startContainer),s.startOffset,ne.fromDom(a.endContainer),a.endOffset))}else return S.none()},DB=t=>{if(t.anchorNode===null||t.focusNode===null)return aT(t);{const s=ne.fromDom(t.anchorNode),a=ne.fromDom(t.focusNode);return eS(s,t.anchorOffset,a,t.focusOffset)?S.some(Ug.create(s,t.anchorOffset,a,t.focusOffset)):aT(t)}},MB=t=>OB(t).filter(s=>s.rangeCount>0).bind(DB),iT=(t,s)=>{const a=Bo(t,s);return Ce(a)},NB=(t,s)=>{const a=Bo(t,s);return Le(a)},Wg={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},RB=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),c="\\.",u=p=>`(?:${p})?`,f=`[+-]?(?:${["Infinity",t+c+u(t)+u(a),c+t+u(a),t+u(a)].join("|")})`;return new RegExp(`^(${f})(.*)$`)})(),BB=(t,s)=>ms(s,a=>ms(Wg[a],c=>t===c)),$b=(t,s)=>S.from(RB.exec(t)).bind(c=>{const u=Number(c[1]),m=c[2];return BB(m,s)?S.some({value:u,unit:m}):S.none()}),PB=(t,s)=>$b(t,s).map(({value:a,unit:c})=>a+c),Hb=t=>{const s=t===void 0?window:t;return va().browser.isFirefox()?S.none():S.from(s.visualViewport)},cT=(t,s,a,c)=>({x:t,y:s,width:a,height:c,right:t+a,bottom:s+c}),Vb=t=>{const s=t===void 0?window:t,a=s.document,c=Br(ne.fromDom(a));return Hb(s).fold(()=>{const u=s.document.documentElement,m=u.clientWidth,f=u.clientHeight;return cT(c.left,c.top,m,f)},u=>cT(Math.max(u.pageLeft,c.left),Math.max(u.pageTop,c.top),u.width,u.height))},lT=(t,s)=>t.view(s).fold(ee([]),c=>{const u=t.owner(c),m=lT(t,u);return[c].concat(m)}),LB=(t,s)=>{const a=s.owner(t),c=lT(s,a);return S.some(c)};var uT=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?S.none():S.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(ne.fromDom)},owner:t=>Nr(t)});const jp=t=>{const s=Ig(),a=Br(s);return LB(t,uT).fold(hn($c,t),u=>{const m=Hp(t),f=Jo(u,(p,b)=>{const C=Hp(b);return{left:p.left+C.left,top:p.top+C.top}},{left:0,top:0});return Ho(f.left+m.left+a.left,f.top+m.top+a.top)})},dr=(t,s,a)=>({point:t,width:s,height:a}),IB=(t,s,a,c)=>({x:t,y:s,width:a,height:c}),as=(t,s,a,c)=>({x:t,y:s,width:a,height:c,right:t+a,bottom:s+c}),mr=t=>{const s=$c(t),a=Hg(t),c=xo(t);return as(s.left,s.top,a,c)},Qm=t=>{const s=jp(t),a=Hg(t),c=xo(t);return as(s.left,s.top,a,c)},zb=(t,s)=>{const a=Math.max(t.x,s.x),c=Math.max(t.y,s.y),u=Math.min(t.right,s.right),m=Math.min(t.bottom,s.bottom),f=u-a,p=m-c;return as(a,c,f,p)},FB=(t,s)=>Qo(s,(a,c)=>zb(a,c),t),Pr=()=>Vb(window),qd=(t,s)=>Bn(t.element,s.event.target),jg=t=>(Gr(H(t,"position"),"fixed")?S.none():Bg(t)).orThunk(()=>{const c=ne.fromTag("span");return qr(t).bind(u=>{Da(u,c);const m=Bg(c);return Fc(c),m})}),ot=t=>jg(t).map($c).getOrThunk(()=>Ho(0,0)),uu=(t,s)=>{const a=S.from(ks(t,"id")).getOrThunk(()=>{const c=Ue("aria");return Ot(s,"id",c),c});Ot(t,"aria-describedby",a)},$B=t=>{Ao(t,"aria-describedby")};var Jr;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Jr||(Jr={}));const Xi=(t,s,a)=>t.stype===Jr.Error?s(t.serror):a(t.svalue),Ub=t=>{const s=[],a=[];return ze(t,c=>{Xi(c,u=>a.push(u),u=>s.push(u))}),{values:s,errors:a}},HB=(t,s)=>t.stype===Jr.Error?{stype:Jr.Error,serror:s(t.serror)}:t,ef=(t,s)=>t.stype===Jr.Value?{stype:Jr.Value,svalue:s(t.svalue)}:t,VB=(t,s)=>t.stype===Jr.Value?s(t.svalue):t,du=(t,s)=>t.stype===Jr.Error?s(t.serror):t,hS=t=>({stype:Jr.Value,svalue:t}),Zb=t=>({stype:Jr.Error,serror:t}),gs={fromResult:t=>t.fold(Zb,hS),toResult:t=>Xi(t,Ft.error,Ft.value),svalue:hS,partition:Ub,serror:Zb,bind:VB,bindError:du,map:ef,mapError:HB,fold:Xi},mu=t=>rr(t)&&eo(t).length>100?" removed due to size":JSON.stringify(t,null,2),Gp=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:ee("... (only showing first ten failures)")}]):t;return ke(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},tf=(t,s)=>gs.serror([{path:t,getErrorInfo:s}]),zo=(t,s,a)=>tf(t,()=>'Could not find valid *required* value for "'+s+'" in '+mu(a)),dT=(t,s)=>tf(t,()=>'Choice schema did not contain choice key: "'+s+'"'),zB=(t,s,a)=>tf(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+mu(s)),zc=(t,s)=>tf(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),wo=(t,s)=>tf(t,ee(s)),Kd=t=>{const s=(c,u)=>gs.bindError(t(u),m=>wo(c,m)),a=ee("val");return{extract:s,toString:a}},qp=Kd(gs.svalue),Uc=ee(qp),Ji=(t,s)=>Kd(a=>{const c=typeof a;return t(a)?gs.svalue(a):gs.serror(`Expected type: ${s} but got: ${c}`)}),Wb=Ji(Zr,"number"),hs=Ji(Tt,"string"),jb=Ji(yo,"boolean"),Gb=Ji(Cs,"function"),mT=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>mT(t[s]));default:return!1}},UB=Kd(t=>mT(t)?gs.svalue(t):gs.serror("Expected value to be acceptable for sending via postMessage")),kl=()=>({tag:"required",process:{}}),qb=t=>({tag:"defaultedThunk",process:t}),Kb=t=>qb(ee(t)),pS=()=>({tag:"option",process:{}}),bS=t=>({tag:"mergeWithThunk",process:t}),vS=t=>bS(ee(t)),fu=(t,s,a,c)=>({tag:"field",key:t,newKey:s,presence:a,prop:c}),Qr=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Yb=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},fT=(t,s)=>t.length>0?gs.svalue(Nn(s,Id.apply(void 0,t))):gs.svalue(s),Yd=t=>Aa(gs.serror,At)(t),hT={consolidateObj:(t,s)=>{const a=gs.partition(t);return a.errors.length>0?Yd(a.errors):fT(a.values,s)},consolidateArr:t=>{const s=gs.partition(t);return s.errors.length>0?Yd(s.errors):gs.svalue(s.values)}},WB=(t,s,a,c)=>Ze(s,a).fold(()=>zo(t,a,s),c),Kp=(t,s,a,c)=>{const u=Ze(t,s).getOrThunk(()=>a(t));return c(u)},jB=(t,s,a)=>a(Ze(t,s)),yS=(t,s,a,c)=>{const u=Ze(t,s).map(m=>m===!0?a(t):m);return c(u)},pT=(t,s,a,c,u)=>{const m=p=>u.extract(s.concat([c]),p),f=p=>p.fold(()=>gs.svalue(S.none()),b=>{const C=u.extract(s.concat([c]),b);return gs.map(C,S.some)});switch(t.tag){case"required":return WB(s,a,c,m);case"defaultedThunk":return Kp(a,c,t.process,m);case"option":return jB(a,c,f);case"defaultedOptionThunk":return yS(a,c,t.process,f);case"mergeWithThunk":return Kp(a,c,ee({}),p=>{const b=Nn(t.process(a),p);return m(b)})}},bT=(t,s,a)=>{const c={},u=[];for(const m of a)Yb(m,(f,p,b,C)=>{const x=pT(b,t,s,f,C);gs.fold(x,k=>{u.push(...k)},k=>{c[p]=k})},(f,p)=>{c[f]=p(s)});return u.length>0?gs.serror(u):gs.svalue(c)},CS=t=>({extract:(c,u)=>t().extract(c,u),toString:()=>t().toString()}),GB=t=>eo(pi(t,uo)),Ei=t=>{const s=wt(t),a=Jo(t,(u,m)=>Yb(m,f=>Nn(u,{[f]:!0}),ee(u)),{});return{extract:(u,m)=>{const f=yo(m)?[]:GB(m),p=Zn(f,b=>!ir(a,b));return p.length===0?s.extract(u,m):zc(u,p)},toString:s.toString}},wt=t=>({extract:(c,u)=>bT(c,u,t),toString:()=>`obj{
`+ke(t,u=>Yb(u,(m,f,p,b)=>m+" -> "+b.toString(),(m,f)=>"state("+m+")")).join(`
`)+"}"}),gu=t=>({extract:(c,u)=>{const m=ke(u,(f,p)=>t.extract(c.concat(["["+p+"]"]),f));return hT.consolidateArr(m)},toString:()=>"array("+t.toString()+")"}),Xb=(t,s)=>{const a=s!==void 0?s:$t;return{extract:(m,f)=>{const p=[];for(const b of t){const C=b.extract(m,f);if(C.stype===Jr.Value)return{stype:Jr.Value,svalue:a(C.svalue)};p.push(C)}return hT.consolidateArr(p)},toString:()=>"oneOf("+ke(t,m=>m.toString()).join(", ")+")"}},qB=(t,s)=>{const a=(m,f)=>gu(Kd(t)).extract(m,f);return{extract:(m,f)=>{const p=eo(f),b=a(m,p);return gs.bind(b,C=>{const x=ke(C,k=>fu(k,k,kl(),s));return wt(x).extract(m,f)})},toString:()=>"setOf("+s.toString()+")"}},SS=(t,s)=>{const a=lr(s);return{extract:(m,f)=>a().extract(m,f),toString:()=>a().toString()}},Gg=Aa(gu,wt),xS=(t,s,a,c)=>Ze(a,c).fold(()=>zB(t,a,c),m=>m.extract(t.concat(["branch: "+c]),s)),Zc=(t,s)=>({extract:(u,m)=>Ze(m,t).fold(()=>dT(u,t),p=>xS(u,m,s,p)),toString:()=>"chooseOn("+t+"). Possible values: "+eo(s)}),KB=()=>gu(qp),nf=t=>Kd(s=>t(s).fold(gs.serror,gs.svalue)),vT=(t,s)=>qB(a=>gs.fromResult(t(a)),s),yT=(t,s,a)=>{const c=s.extract([t],a);return gs.mapError(c,u=>({input:a,errors:u}))},Po=(t,s,a)=>gs.toResult(yT(t,s,a)),Qi=t=>t.fold(s=>{throw new Error(of(s))},$t),Ma=(t,s,a)=>Qi(Po(t,s,a)),of=t=>`Errors: 
`+Gp(t.errors).join(`
`)+`

Input object: `+mu(t.input),Ka=(t,s)=>Zc(t,Gn(s,wt)),wS=(t,s)=>SS(t,s),Er=fu,ea=Qr,ES=t=>nf(s=>jn(t,s)?Ft.value(s):Ft.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),we=t=>Er(t,t,kl(),Uc()),ki=(t,s)=>Er(t,t,kl(),s),CT=t=>ki(t,Wb),Hs=t=>ki(t,hs),Ti=(t,s)=>Er(t,t,kl(),ES(s)),Wc=t=>ki(t,Gb),Jb=(t,s)=>Er(t,t,pS(),Kd(a=>gs.serror("The field: "+t+" is forbidden. "+s))),jc=(t,s)=>Er(t,t,kl(),wt(s)),ST=(t,s)=>Er(t,t,kl(),Gg(s)),Ya=(t,s)=>Er(t,t,kl(),gu(s)),On=t=>Er(t,t,pS(),Uc()),Na=(t,s)=>Er(t,t,pS(),s),Yp=t=>Na(t,Wb),is=t=>Na(t,hs),kS=(t,s)=>Na(t,ES(s)),Tl=t=>Na(t,Gb),TS=(t,s)=>Na(t,gu(s)),Xa=(t,s)=>Na(t,wt(s)),xT=(t,s)=>Na(t,Ei(s)),oe=(t,s)=>Er(t,t,Kb(s),Uc()),Gc=(t,s,a)=>Er(t,t,Kb(s),a),wT=(t,s)=>Gc(t,s,Wb),so=(t,s)=>Gc(t,s,hs),Uo=(t,s,a)=>Gc(t,s,ES(a)),kr=(t,s)=>Gc(t,s,jb),co=(t,s)=>Gc(t,s,Gb),YB=(t,s)=>Gc(t,s,UB),Xd=(t,s,a)=>Gc(t,s,gu(a)),Qb=(t,s,a)=>Gc(t,s,wt(a)),ET=(t,s)=>{const a={};return jo(t,(c,u)=>{jn(s,u)||(a[u]=c)}),a},_S=(t,s)=>({[t]:s}),XB=t=>{const s={};return ze(t,a=>{s[a.key]=a.value}),s},kT=(t,s)=>ET(t,s),sf=(t,s)=>_S(t,s),qg=t=>XB(t),AS=(t,s)=>t.length===0?Ft.value(s):Ft.value(Nn(s,Id.apply(void 0,t))),JB=t=>Ft.error(At(t)),QB=(t,s)=>{const a=Cl(t);return a.errors.length>0?JB(a.errors):AS(a.values,s)},Tr=ee,ed=Tr("touchstart"),Jd=Tr("touchmove"),_l=Tr("touchend"),qc=Tr("touchcancel"),Ja=Tr("mousedown"),Xp=Tr("mousemove"),Jp=Tr("mouseout"),ev=Tr("mouseup"),Kc=Tr("mouseover"),Lr=Tr("focusin"),TT=Tr("focusout"),Al=Tr("keydown"),OS=Tr("keyup"),td=Tr("input"),rf=Tr("change"),Qd=Tr("click"),eP=Tr("transitioncancel"),Kg=Tr("transitionend"),tP=Tr("transitionstart"),_T=Tr("selectstart"),cs=t=>ee("alloy."+t),Qp={tap:cs("tap")},hu=cs("focus"),e1=cs("blur.post"),DS=cs("paste.post"),af=cs("receive"),_i=cs("execute"),Yg=cs("focus.item"),cf=Qp.tap,nP=cs("longpress"),tv=cs("sandbox.close"),t1=cs("typeahead.cancel"),lf=cs("system.init"),oP=cs("system.touchmove"),n1=cs("system.touchend"),MS=cs("system.scroll"),Ol=cs("system.resize"),ec=cs("system.attached"),pu=cs("system.detached"),nd=cs("system.dismissRequested"),AT=cs("system.repositionRequested"),em=cs("focusmanager.shifted"),nv=cs("slotcontainer.visibility"),uf=cs("system.external.element.scroll"),NS=cs("change.tab"),OT=cs("dismiss.tab"),ov=cs("highlight"),RS=cs("dehighlight"),Ln=t=>$p(t),DT="unknown";var Xg;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Xg||(Xg={}));const BS=Ve({}),sv=(t,s)=>{const a=[],c=new Date().getTime();return{logEventCut:(u,m,f)=>{a.push({outcome:"cut",target:m,purpose:f})},logEventStopped:(u,m,f)=>{a.push({outcome:"stopped",target:m,purpose:f})},logNoParent:(u,m,f)=>{a.push({outcome:"no-parent",target:m,purpose:f})},logEventNoHandlers:(u,m)=>{a.push({outcome:"no-handlers-left",target:m})},logEventResponse:(u,m,f)=>{a.push({outcome:"response",purpose:f,target:m})},write:()=>{const u=new Date().getTime();jn(["mousemove","mouseover","mouseout",lf()],t)||console.log(t,{event:t,time:u-c,target:s.dom,sequence:ke(a,m=>jn(["cut","stopped","response"],m.outcome)?"{"+m.purpose+"} "+m.outcome+" at ("+Ln(m.target)+")":m.outcome)})}}},MT=(t,s,a)=>{switch(Ze(BS.get(),t).orThunk(()=>{const u=eo(BS.get());return nn(u,m=>t.indexOf(m)>-1?S.some(BS.get()[m]):S.none())}).getOr(Xg.NORMAL)){case Xg.NORMAL:return a(o1());case Xg.LOGGING:{const u=sv(t,s),m=a(u);return u.write(),m}case Xg.STOP:return!0}},od=["alloy/data/Fields","alloy/debugging/Debugging"],sP=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return _t(s,a=>a.indexOf("alloy")>0&&!ms(od,c=>a.indexOf(c)>-1)).getOr(DT)}else return DT},rP={logEventCut:re,logEventStopped:re,logNoParent:re,logEventNoHandlers:re,logEventResponse:re,write:re},PS=(t,s,a)=>MT(t,s,a),o1=ee(rP),rv=ee([we("menu"),we("selectedMenu")]),av=ee([we("item"),we("selectedItem")]);ee(wt(av().concat(rv())));const aG=ee(wt(av())),iG=jc("initSize",[we("numColumns"),we("numRows")]),cG=()=>ki("markers",aG()),LS=()=>jc("markers",[we("backgroundMenu")].concat(rv()).concat(av())),Jg=t=>jc("markers",ke(t,we)),IS=(t,s,a)=>(sP(),Er(s,s,a,nf(c=>Ft.value((...u)=>c.apply(void 0,u))))),Cn=t=>IS("onHandler",t,Kb(re)),ps=t=>IS("onKeyboardHandler",t,Kb(S.none)),Vs=t=>IS("onHandler",t,kl()),df=t=>IS("onKeyboardHandler",t,kl()),Wn=(t,s)=>ea(t,ee(s)),mf=t=>ea(t,$t),Qg=ee(iG),s1=(t,s,a)=>{const c=a.toString(),u=c.indexOf(")")+1,m=c.indexOf("("),f=c.substring(m+1,u-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:ff(f.slice(0,1).concat(f.slice(3)))}),t},ff=t=>ke(t,s=>to(s,"/*")?s.substring(0,s.length-2):s),iv=(t,s)=>{const a=t.toString(),c=a.indexOf(")")+1,u=a.indexOf("("),m=a.substring(u+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:ff(m)}),t},NT=(t,s)=>{const a=s.toString(),c=a.indexOf(")")+1,u=a.indexOf("("),m=a.substring(u+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:ff(m.slice(1))}),t},RT=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...m)=>{a=setTimeout(()=>{t.apply(null,m),a=null},s)}}},FS=5,BT=400,$S=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?S.none():S.some(s.touches[0])},aP=(t,s)=>{const a=Math.abs(t.clientX-s.x),c=Math.abs(t.clientY-s.y);return a>FS||c>FS},iP=t=>{const s=dn(),a=Ve(!1),c=RT(C=>{t.triggerEvent(nP(),C),a.set(!0)},BT),u=C=>($S(C).each(x=>{c.cancel();const k={x:x.clientX,y:x.clientY,target:C.target};c.schedule(C),a.set(!1),s.set(k)}),S.none()),m=C=>(c.cancel(),$S(C).each(x=>{s.on(k=>{aP(x,k)&&s.clear()})}),S.none()),f=C=>{c.cancel();const x=k=>Bn(k.target,C.target);return s.get().filter(x).map(k=>a.get()?(C.prevent(),!1):t.triggerEvent(cf(),C))},p=qg([{key:ed(),value:u},{key:Jd(),value:m},{key:_l(),value:f}]);return{fireIfReady:(C,x)=>Ze(p,x).bind(k=>k(C))}};var tm;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(tm||(tm={}));const HS="placeholder",bu=ao.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),VS=t=>Yt(t,"uiType"),cP=(t,s,a,c)=>t.exists(u=>u!==a.owner)?bu.single(!0,ee(a)):Ze(c,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+eo(c)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},u=>u.replace()),lP=(t,s,a,c)=>VS(a)&&a.uiType===HS?cP(t,s,a,c):bu.single(!1,ee(a)),PT=(t,s,a,c)=>lP(t,s,a,c).fold((m,f)=>{const p=VS(a)?f(s,a.config,a.validated):f(s),b=Ze(p,"components").getOr([]),C=pe(b,x=>PT(t,s,x,c));return[{...p,components:C}]},(m,f)=>{if(VS(a)){const p=f(s,a.config,a.validated);return a.validated.preprocess.getOr($t)(p)}else return f(s)}),uP=(t,s,a,c)=>pe(a,u=>PT(t,s,u,c)),dP=(t,s)=>{let a=!1;const c=()=>a,u=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},m=()=>s.fold((f,p)=>f,(f,p)=>f);return{name:ee(t),required:m,used:c,replace:u}},eh=(t,s,a,c)=>{const u=Gn(c,(f,p)=>dP(p,f)),m=uP(t,s,a,u);return jo(u,f=>{if(f.used()===!1&&f.required())throw new Error("Placeholder: "+f.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),m},LT=bu.single,gf=bu.multiple,zS=ee(HS),th=ao.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),sd=oe("factory",{sketch:$t}),US=oe("schema",[]),nm=we("name"),nh=Er("pname","pname",qb(t=>"<alloy."+Ue(t.name)+">"),Uc()),mP=ea("schema",()=>[On("preprocess")]),cv=oe("defaults",ee({})),rd=oe("overrides",ee({})),om=wt([sd,US,nm,nh,cv,rd]),fP=wt([sd,US,nm,cv,rd]),Xs=wt([sd,US,nm,nh,cv,rd]),lv=wt([sd,mP,nm,we("unit"),nh,cv,rd]),Qa=t=>t.fold(S.some,S.none,S.some,S.some),IT=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},gP=t=>t.fold($t,$t,$t,$t),ad=(t,s)=>a=>{const c=Ma("Converting part type",s,a);return t(c)},Os=ad(th.required,om),Ir=ad(th.external,fP),bs=ad(th.optional,Xs),r1=ad(th.group,lv),ZS=ee("entirety");var WS=Object.freeze({__proto__:null,required:Os,external:Ir,optional:bs,group:r1,asNamedPart:Qa,name:IT,asCommon:gP,original:ZS});const a1=(t,s,a,c)=>Nn(s.defaults(t,a,c),a,{uid:t.partUids[s.name]},s.overrides(t,a,c)),hP=(t,s,a)=>{const c={},u={};return ze(a,m=>{m.fold(f=>{c[f.pname]=LT(!0,(p,b,C)=>f.factory.sketch(a1(p,f,b,C)))},f=>{const p=s.parts[f.name];u[f.name]=ee(f.factory.sketch(a1(s,f,p[ZS()]),p))},f=>{c[f.pname]=LT(!1,(p,b,C)=>f.factory.sketch(a1(p,f,b,C)))},f=>{c[f.pname]=gf(!0,(p,b,C)=>{const x=p[f.name];return ke(x,k=>f.factory.sketch(Nn(f.defaults(p,k,C),k,f.overrides(p,k))))})})}),{internals:ee(c),externals:ee(u)}},oh=(t,s)=>{const a={};return ze(s,c=>{Qa(c).each(u=>{const m=uv(t,u.pname);a[u.name]=f=>{const p=Ma("Part: "+u.name+" in "+t,wt(u.schema),f);return{...m,config:f,validated:p}}})}),a},uv=(t,s)=>({uiType:zS(),owner:t,name:s}),jS=(t,s,a)=>({uiType:zS(),owner:t,name:s,config:a,validated:{}}),dv=t=>pe(t,s=>s.fold(S.none,S.some,S.none,S.none).map(a=>jc(a.name,a.schema.concat([mf(ZS())]))).toArray()),GS=t=>ke(t,IT),sm=(t,s,a)=>hP(t,s,a),id=(t,s,a)=>eh(S.some(t),s,s.components,a),Kn=(t,s,a)=>{const c=s.partUids[a];return t.getSystem().getByUid(c).toOptional()},rm=(t,s,a)=>Kn(t,s,a).getOrDie("Could not find part: "+a),qS=(t,s,a)=>{const c={},u=s.partUids,m=t.getSystem();return ze(a,f=>{c[f]=ee(m.getByUid(u[f]))}),c},sh=(t,s)=>{const a=t.getSystem();return Gn(s.partUids,(c,u)=>ee(a.getByUid(c)))},rh=t=>eo(t.partUids),KS=(t,s,a)=>{const c={},u=s.partUids,m=t.getSystem();return ze(a,f=>{c[f]=ee(m.getByUid(u[f]).getOrDie())}),c},FT=(t,s)=>{const a=GS(s);return qg(ke(a,c=>({key:c,value:t+"-"+c})))},mv=t=>Er("partUids","partUids",bS(s=>FT(s.uid,t)),Uc());var pP=Object.freeze({__proto__:null,generate:oh,generateOne:jS,schemas:dv,names:GS,substitutes:sm,components:id,defaultUids:FT,defaultUidsSchema:mv,getAllParts:sh,getAllPartNames:rh,getPart:Kn,getPartOrDie:rm,getParts:qS,getPartsOrDie:KS});const fv=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Fr=(t,s,a,c=1)=>{const u=t*c,m=s*c,f=b=>Ze(a,b).getOr([]),p=(b,C,x)=>{const k=et(fv,x);return{offset:Ho(b,C),classesOn:pe(x,f),classesOff:pe(k,f)}};return{southeast:()=>p(-t,s,["top","alignLeft"]),southwest:()=>p(t,s,["top","alignRight"]),south:()=>p(-t/2,s,["top","alignCentre"]),northeast:()=>p(-t,-s,["bottom","alignLeft"]),northwest:()=>p(t,-s,["bottom","alignRight"]),north:()=>p(-t/2,-s,["bottom","alignCentre"]),east:()=>p(t,-s/2,["valignCentre","left"]),west:()=>p(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>p(u,m,["top","alignLeft","inset"]),insetNorthwest:()=>p(-u,m,["top","alignRight","inset"]),insetNorth:()=>p(-u/2,m,["top","alignCentre","inset"]),insetSoutheast:()=>p(u,-m,["bottom","alignLeft","inset"]),insetSouthwest:()=>p(-u,-m,["bottom","alignRight","inset"]),insetSouth:()=>p(-u/2,-m,["bottom","alignCentre","inset"]),insetEast:()=>p(-u,-m/2,["valignCentre","right","inset"]),insetWest:()=>p(u,-m/2,["valignCentre","left","inset"])}},gv=()=>Fr(0,0,{}),_r=(t,s,a,c,u,m,f,p=!1)=>({x:t,y:s,bubble:a,direction:c,placement:u,restriction:m,label:`${f}-${u}`,alwaysFit:p}),cd=ao.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),bP=(t,s,a,c,u,m,f,p,b)=>t.fold(s,a,c,u,m,f,p,b),vP=(t,s,a,c)=>t.fold(s,s,c,c,s,c,a,a),$T=(t,s,a,c)=>t.fold(s,c,s,c,a,a,s,c),hv=cd.southeast,YS=cd.southwest,XS=cd.northeast,JS=cd.northwest,QS=cd.south,HT=cd.north,VT=cd.east,Yc=cd.west,yP=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Js=(t,s)=>Ac(["left","right","top","bottom"],a=>Ze(s,a).map(c=>yP(t,c))),CP=(t,s,a)=>{const c=(b,C)=>s[b].map(x=>{const k=b==="top"||b==="bottom",A=k?a.top:a.left,L=(b==="left"||b==="top"?Math.max:Math.min)(x,C)+A;return k?Es(L,t.y,t.bottom):Es(L,t.x,t.right)}).getOr(C),u=c("left",t.x),m=c("top",t.y),f=c("right",t.right),p=c("bottom",t.bottom);return as(u,m,f-u,p-m)},am="layout",zT=t=>t.x,ex=(t,s)=>t.x+t.width/2-s.width/2,tx=(t,s)=>t.x+t.width-s.width,nx=(t,s)=>t.y-s.height,pv=t=>t.y+t.height,UT=(t,s)=>t.y+t.height/2-s.height/2,i1=t=>t.x+t.width,SP=(t,s)=>t.x-s.width,Yo=(t,s,a)=>_r(zT(t),pv(t),a.southeast(),hv(),"southeast",Js(t,{left:1,top:3}),am),ls=(t,s,a)=>_r(tx(t,s),pv(t),a.southwest(),YS(),"southwest",Js(t,{right:0,top:3}),am),fr=(t,s,a)=>_r(zT(t),nx(t,s),a.northeast(),XS(),"northeast",Js(t,{left:1,bottom:2}),am),zs=(t,s,a)=>_r(tx(t,s),nx(t,s),a.northwest(),JS(),"northwest",Js(t,{right:0,bottom:2}),am),Ds=(t,s,a)=>_r(ex(t,s),nx(t,s),a.north(),HT(),"north",Js(t,{bottom:2}),am),us=(t,s,a)=>_r(ex(t,s),pv(t),a.south(),QS(),"south",Js(t,{top:3}),am),bv=(t,s,a)=>_r(i1(t),UT(t,s),a.east(),VT(),"east",Js(t,{left:0}),am),c1=(t,s,a)=>_r(SP(t,s),UT(t,s),a.west(),Yc(),"west",Js(t,{right:1}),am),ZT=()=>[Yo,ls,fr,zs,us,Ds,bv,c1],WT=()=>[ls,Yo,zs,fr,us,Ds,bv,c1],ox=()=>[fr,zs,Yo,ls,Ds,us],ld=()=>[zs,fr,ls,Yo,Ds,us],ud=()=>[Yo,ls,fr,zs,us,Ds],sx=()=>[ls,Yo,zs,fr,us,Ds],be="data-alloy-placement",vv=(t,s)=>{Ot(t,be,s)},jT=t=>Ts(t,be),xP=t=>Ao(t,be),vu="layout-inset",tc=t=>t.x,rx=(t,s)=>t.x+t.width/2-s.width/2,yv=(t,s)=>t.x+t.width-s.width,Cv=t=>t.y,l1=(t,s)=>t.y+t.height-s.height,GT=(t,s)=>t.y+t.height/2-s.height/2,u1=(t,s,a)=>_r(yv(t,s),l1(t,s),a.insetSouthwest(),JS(),"southwest",Js(t,{right:0,bottom:3}),vu),Sv=(t,s,a)=>_r(tc(t),l1(t,s),a.insetSoutheast(),XS(),"southeast",Js(t,{left:1,bottom:3}),vu),ah=(t,s,a)=>_r(yv(t,s),Cv(t),a.insetNorthwest(),YS(),"northwest",Js(t,{right:0,top:2}),vu),d1=(t,s,a)=>_r(tc(t),Cv(t),a.insetNortheast(),hv(),"northeast",Js(t,{left:1,top:2}),vu),nc=(t,s,a)=>_r(rx(t,s),Cv(t),a.insetNorth(),QS(),"north",Js(t,{top:2}),vu),m1=(t,s,a)=>_r(rx(t,s),l1(t,s),a.insetSouth(),HT(),"south",Js(t,{bottom:3}),vu),qT=(t,s,a)=>_r(yv(t,s),GT(t,s),a.insetEast(),Yc(),"east",Js(t,{right:0}),vu),ax=(t,s,a)=>_r(tc(t),GT(t,s),a.insetWest(),VT(),"west",Js(t,{left:1}),vu),xv=t=>{switch(t){case"north":return nc;case"northeast":return d1;case"northwest":return ah;case"south":return m1;case"southeast":return Sv;case"southwest":return u1;case"east":return qT;case"west":return ax}},KT=(t,s,a,c,u)=>jT(c).map(xv).getOr(nc)(t,s,a,c,u),YT=t=>{switch(t){case"north":return m1;case"northeast":return Sv;case"northwest":return u1;case"south":return nc;case"southeast":return d1;case"southwest":return ah;case"east":return ax;case"west":return qT}},wP=(t,s,a,c,u)=>jT(c).map(YT).getOr(nc)(t,s,a,c,u),wv=(t,s)=>{xi(t,Math.floor(s))},ix=ee((t,s)=>{wv(t,s),Si(t,{"overflow-x":"hidden","overflow-y":"auto"})}),hf=ee((t,s)=>{wv(t,s)}),Ev=ee((t,s)=>{sS(t,Math.floor(s))});var dd;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(dd||(dd={}));const kv="data-alloy-vertical-dir",EP=t=>fS(t,s=>Oa(s)&&ks(s,"data-alloy-vertical-dir")===dd.BottomToTop);var Ca;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(Ca||(Ca={}));const Xc={init:()=>ei({readState:ee("No State required")})},ei=t=>t,kP={can:ct,abort:gn,run:re},im=t=>{if(!ir(t,"can")&&!ir(t,"abort")&&!ir(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...kP,...t}},TP=(t,s)=>(...a)=>Qo(t,(c,u)=>c&&s(u).apply(void 0,a),!0),_P=(t,s)=>(...a)=>Qo(t,(c,u)=>c||s(u).apply(void 0,a),!1),AP=t=>Cs(t)?{can:ct,abort:gn,run:t}:t,OP=t=>{const s=TP(t,u=>u.can),a=_P(t,u=>u.abort);return{can:s,abort:a,run:(...u)=>{ze(t,m=>{m.run.apply(void 0,u)})}}},rn=(t,s)=>{Tv(t,t.element,s,{})},mt=(t,s,a)=>{Tv(t,t.element,s,a)},pf=t=>{rn(t,_i())},f1=(t,s,a)=>{Tv(t,s,a,{})},Tv=(t,s,a,c)=>{const u={target:s,...c};t.getSystem().triggerEvent(a,s,u)},DP=(t,s,a,c)=>{const u={...c,target:s};t.getSystem().triggerEvent(a,s,u)},XT=(t,s,a,c)=>{t.getSystem().triggerEvent(a,s,c.event)},ho=t=>qg(t),JT=(t,s)=>({key:t,value:im({abort:s})}),MP=(t,s)=>({key:t,value:im({can:s})}),NP=t=>({key:t,value:im({run:(s,a)=>{a.event.prevent()}})}),ve=(t,s)=>({key:t,value:im({run:s})}),cx=(t,s,a)=>({key:t,value:im({run:(c,u)=>{s.apply(void 0,[c,u].concat(a))}})}),RP=t=>s=>ve(t,s),_v=t=>s=>({key:t,value:im({run:(a,c)=>{qd(a,c)&&s(a,c)}})}),BP=(t,s)=>ve(t,(a,c)=>{a.getSystem().getByUid(s).each(u=>{XT(u,u.element,t,c)})}),ih=(t,s,a)=>{const c=s.partUids[a];return BP(t,c)},Av=(t,s)=>ve(t,(a,c)=>{const u=c.event,m=a.getSystem().getByDom(u.target).getOrThunk(()=>Zp(u.target,p=>a.getSystem().getByDom(p).toOptional(),gn).getOr(a));s(a,m,c)}),cm=t=>ve(t,(s,a)=>{a.cut()}),QT=t=>ve(t,(s,a)=>{a.stop()}),ch=(t,s)=>_v(t)(s),ro=_v(ec()),Dl=_v(pu()),lx=_v(lf()),md=RP(_i()),Jc=t=>({classes:ar(t.classes)?[]:t.classes,attributes:ar(t.attributes)?{}:t.attributes,styles:ar(t.styles)?{}:t.styles}),ux=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),PP=(t,s,a)=>md(c=>{a(c,t,s)}),dx=(t,s,a)=>lx((c,u)=>{a(c,t,s)}),LP=(t,s,a,c,u,m)=>{const f=Ei(t),p=Xa(s,[xT("config",t)]);return Ov(f,p,s,a,c,u,m)},e_=(t,s,a,c,u,m)=>{const f=t,p=Xa(s,[Na("config",t)]);return Ov(f,p,s,a,c,u,m)},IP=(t,s,a)=>s1((u,...m)=>{const f=[u].concat(m);return u.config({name:ee(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},p=>{const b=Array.prototype.slice.call(f,1);return s.apply(void 0,[u,p.config,p.state].concat(b))})},a,s),FP=t=>({key:t,value:void 0}),Ov=(t,s,a,c,u,m,f)=>{const p=k=>ir(k,a)?k[a]():S.none(),b=Gn(u,(k,A)=>IP(a,k,A)),x={...Gn(m,(k,A)=>iv(k,A)),...b,revoke:hn(FP,a),config:k=>{const A=Ma(a+"-config",t,k);return{key:a,value:{config:A,me:x,configAsRaw:lr(()=>Ma(a+"-config",t,k)),initialConfig:k,state:f}}},schema:ee(s),exhibit:(k,A)=>br(p(k),Ze(c,"exhibit"),(R,L)=>L(A,R.config,R.state)).getOrThunk(()=>Jc({})),name:ee(a),handlers:k=>p(k).map(A=>Ze(c,"events").getOr(()=>({}))(A.config,A.state)).getOr({})};return x},Ae=t=>qg(t),$P=Ei([we("fields"),we("name"),oe("active",{}),oe("apis",{}),oe("state",Xc),oe("extra",{})]),gr=t=>{const s=Ma("Creating behaviour: "+t.name,$P,t);return LP(s.fields,s.name,s.active,s.apis,s.extra,s.state)},t_=Ei([we("branchKey"),we("branches"),we("name"),oe("active",{}),oe("apis",{}),oe("state",Xc),oe("extra",{})]),Ye=t=>{const s=Ma("Creating behaviour: "+t.name,t_,t);return e_(Ka(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},Dv=ee(void 0),n_=(t,s)=>{const a=ho(s);return gr({fields:[we("enabled")],name:t,active:{events:ee(a)}})},Dt=(t,s)=>{const a=n_(t,s);return{key:t,value:{config:{},me:a,configAsRaw:ee({}),initialConfig:{},state:Xc}}},HP=t=>({init:()=>{const a=Ve(t);return{get:()=>a.get(),set:p=>a.set(p),clear:()=>a.set(t),readState:()=>a.get()}}}),o_=(t,s)=>{s.ignore||(ss(t.element),s.onFocus(t))};var zP=Object.freeze({__proto__:null,focus:o_,blur:(t,s)=>{s.ignore||Yi(t.element)},isFocused:t=>au(t.element)}),ta=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return Jc(a)},events:t=>ho([ve(hu(),(s,a)=>{o_(s,t),a.stop()})].concat(t.stopMousedown?[ve(Ja(),(s,a)=>{a.event.prevent()})]:[]))}),g1=[Cn("onFocus"),oe("stopMousedown",!1),oe("ignore",!1)];const St=gr({fields:g1,name:"focusing",active:ta,apis:zP}),ZP=[8],fd=[9],yu=[13],Mv=[27],Ra=[32],h1=[37],p1=[38],b1=[39],lh=[40],WP=(t,s,a)=>{const c=ma(t.slice(0,s)),u=ma(t.slice(s+1));return _t(c.concat(u),a)},jP=(t,s,a)=>{const c=ma(t.slice(0,s));return _t(c,a)},GP=(t,s,a)=>{const c=t.slice(0,s),u=t.slice(s+1);return _t(u.concat(c),a)},qP=(t,s,a)=>{const c=t.slice(s+1);return _t(c,a)},pn=t=>s=>{const a=s.raw;return jn(t,a.which)},oc=t=>s=>hi(t,a=>a(s)),lm=t=>t.raw.shiftKey===!0,KP=t=>t.raw.ctrlKey===!0,uh=Oe(lm),Sn=(t,s)=>({matches:t,classification:s}),YP=(t,s)=>_t(t,c=>c.matches(s)).map(c=>c.classification),s_=(t,s,a,c)=>{const u=go(t.element,"."+s.highlightClass);ze(u,m=>{ms(c,p=>Bn(p.element,m))||(fo(m,s.highlightClass),t.getSystem().getByDom(m).each(p=>{s.onDehighlight(t,p),rn(p,RS())}))})},r_=(t,s,a)=>s_(t,s,a,[]),XP=(t,s,a,c)=>{mx(t,s,a,c)&&(fo(c.element,s.highlightClass),s.onDehighlight(t,c),rn(c,RS()))},v1=(t,s,a,c)=>{s_(t,s,a,[c]),mx(t,s,a,c)||(Vo(c.element,s.highlightClass),s.onHighlight(t,c),rn(c,ov()))},a_=(t,s,a)=>{Nv(t,s).each(c=>{v1(t,s,a,c)})},JP=(t,s,a)=>{c_(t,s).each(c=>{v1(t,s,a,c)})},QP=(t,s,a,c)=>{e7(t,s,a,c).fold(u=>{throw u},u=>{v1(t,s,a,u)})},i_=(t,s,a,c)=>{const u=l_(t,s);_t(u,c).each(f=>{v1(t,s,a,f)})},mx=(t,s,a,c)=>wr(c.element,s.highlightClass),dh=(t,s,a)=>qn(t.element,"."+s.highlightClass).bind(c=>t.getSystem().getByDom(c).toOptional()),e7=(t,s,a,c)=>{const u=go(t.element,"."+s.itemClass);return S.from(u[c]).fold(()=>Ft.error(new Error("No element found with index "+c)),t.getSystem().getByDom)},Nv=(t,s,a)=>qn(t.element,"."+s.itemClass).bind(c=>t.getSystem().getByDom(c).toOptional()),c_=(t,s,a)=>{const c=go(t.element,"."+s.itemClass);return(c.length>0?S.some(c[c.length-1]):S.none()).bind(m=>t.getSystem().getByDom(m).toOptional())},mh=(t,s,a,c)=>{const u=go(t.element,"."+s.itemClass);return Vn(u,f=>wr(f,s.highlightClass)).bind(f=>{const p=zi(f,c,0,u.length-1);return t.getSystem().getByDom(u[p]).toOptional()})},t7=(t,s,a)=>mh(t,s,a,-1),n7=(t,s,a)=>mh(t,s,a,1),l_=(t,s,a)=>{const c=go(t.element,"."+s.itemClass);return Ui(ke(c,u=>t.getSystem().getByDom(u).toOptional()))};var o7=Object.freeze({__proto__:null,dehighlightAll:r_,dehighlight:XP,highlight:v1,highlightFirst:a_,highlightLast:JP,highlightAt:QP,highlightBy:i_,isHighlighted:mx,getHighlighted:dh,getFirst:Nv,getLast:c_,getPrevious:t7,getNext:n7,getCandidates:l_}),s7=[we("highlightClass"),we("itemClass"),Cn("onHighlight"),Cn("onDehighlight")];const kn=gr({fields:s7,name:"highlighting",apis:o7}),u_=(t,s,a)=>{s.exists(u=>a.exists(m=>Bn(m,u)))||mt(t,em(),{prevFocus:s,newFocus:a})},fx=()=>{const t=a=>Sr(a.element);return{get:t,set:(a,c)=>{const u=t(a);a.getSystem().triggerFocus(c,a.element);const m=t(a);u_(a,u,m)}}},r7=()=>{const t=a=>kn.getHighlighted(a).map(c=>c.element);return{get:t,set:(a,c)=>{const u=t(a);a.getSystem().getByDom(c).fold(re,f=>{kn.highlight(a,f)});const m=t(a);u_(a,u,m)}}},bf=(t,s,a,c,u)=>{const m=()=>t.concat([oe("focusManager",fx()),Gc("focusInside","onFocus",nf(C=>jn(["onFocus","onEnterOrSpace","onApi"],C)?Ft.value(C):Ft.error("Invalid value for focusInside"))),Wn("handler",b),Wn("state",s),Wn("sendFocusIn",u)]),f=(C,x,k,A,R)=>{const L=k(C,x,A,R);return YP(L,x.event).bind(z=>z(C,x,A,R))},b={schema:m,processKey:f,toEvents:(C,x)=>{const k=C.focusInside!==tm.OnFocusMode?S.none():u(C).map(L=>ve(hu(),(z,j)=>{L(z,C,x),j.stop()})),A=(L,z)=>{const j=pn(Ra.concat(yu))(z.event);C.focusInside===tm.OnEnterOrSpaceMode&&j&&qd(L,z)&&u(C).each(V=>{V(L,C,x),z.stop()})},R=[ve(Al(),(L,z)=>{f(L,z,a,C,x).fold(()=>{A(L,z)},j=>{z.stop()})}),ve(OS(),(L,z)=>{f(L,z,c,C,x).each(j=>{z.stop()})})];return ho(k.toArray().concat(R))}};return b},d_=t=>{const s=[On("onEscape"),On("onEnter"),oe("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),oe("firstTabstop",0),oe("useTabstopAt",ct),On("visibilitySelector")].concat([t]),a=(V,q)=>{const K=V.visibilitySelector.bind(ie=>lu(q,ie)).getOr(q);return on(K)>0},c=(V,q)=>{const K=go(V.element,q.selector),ie=Zn(K,me=>a(q,me));return S.from(ie[q.firstTabstop])},u=(V,q)=>q.focusManager.get(V).bind(K=>lu(K,q.selector)),m=(V,q)=>a(V,q)&&V.useTabstopAt(q),f=(V,q,K)=>{c(V,q).each(ie=>{q.focusManager.set(V,ie)})},p=(V,q,K,ie,me)=>me(q,K,He=>m(ie,He)).fold(()=>ie.cyclic?S.some(!0):S.none(),He=>(ie.focusManager.set(V,He),S.some(!0))),b=(V,q,K,ie)=>{const me=Zn(go(V.element,K.selector),He=>a(K,He));return u(V,K).bind(He=>Vn(me,hn(Bn,He)).bind(fe=>p(V,me,fe,K,ie)))},C=(V,q,K)=>{const ie=K.cyclic?WP:jP;return b(V,q,K,ie)},x=(V,q,K)=>{const ie=K.cyclic?GP:qP;return b(V,q,K,ie)},k=V=>Ud(V).bind(Zd).exists(q=>Bn(q,V)),A=(V,q,K)=>u(V,K).filter(ie=>!K.useTabstopAt(ie)).bind(ie=>(k(ie)?C:x)(V,q,K)),R=(V,q,K)=>K.onEnter.bind(ie=>ie(V,q)),L=(V,q,K)=>K.onEscape.bind(ie=>ie(V,q)),z=ee([Sn(oc([lm,pn(fd)]),C),Sn(pn(fd),x),Sn(oc([uh,pn(yu)]),R)]),j=ee([Sn(pn(Mv),L),Sn(pn(fd),A)]);return bf(s,Xc.init,z,j,()=>S.some(f))};var a7=d_(ea("cyclic",gn)),m_=d_(ea("cyclic",ct));const fh=t=>Rg("input")(t)&&ks(t,"type")!=="radio"||Rg("textarea")(t),f_=(t,s,a)=>(f1(t,a,_i()),S.some(!0)),um=(t,s,a)=>fh(a)&&pn(Ra)(s.event)?S.none():f_(t,s,a),gh=(t,s)=>S.some(!0),i7=[oe("execute",um),oe("useSpace",!1),oe("useEnter",!0),oe("useControlEnter",!1),oe("useDown",!1)],g_=(t,s,a)=>a.execute(t,s,t.element),c7=(t,s,a,c)=>{const u=a.useSpace&&!fh(t.element)?Ra:[],m=a.useEnter?yu:[],f=a.useDown?lh:[],p=u.concat(m).concat(f);return[Sn(pn(p),g_)].concat(a.useControlEnter?[Sn(oc([KP,pn(yu)]),g_)]:[])},h_=(t,s,a,c)=>a.useSpace&&!fh(t.element)?[Sn(pn(Ra),gh)]:[];var p_=bf(i7,Xc.init,c7,h_,()=>S.none());const b_=()=>{const t=dn();return ei({readState:()=>t.get().map(u=>({numRows:String(u.numRows),numColumns:String(u.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(u,m)=>{t.set({numRows:u,numColumns:m})},getNumRows:()=>t.get().map(u=>u.numRows),getNumColumns:()=>t.get().map(u=>u.numColumns)})};var l7=Object.freeze({__proto__:null,flatgrid:b_,init:t=>t.state(t)});const v_=t=>(s,a,c,u)=>{const m=t(s.element);return y1(m,s,a,c,u)},gx=(t,s)=>{const a=Vp(t,s);return v_(a)},hx=(t,s)=>{const a=Vp(s,t);return v_(a)},px=t=>(s,a,c,u)=>y1(t,s,a,c,u),y1=(t,s,a,c,u)=>c.focusManager.get(s).bind(f=>t(s.element,f,c,u)).map(f=>(c.focusManager.set(s,f),!0)),y_=px,C_=px,Rv=px,u7=(t,s)=>Vn(t,s).map(a=>({index:a,candidates:t})),S_=(t,s,a)=>{const c=f=>Bn(f,s),u=go(t,a),m=Zn(u,oS);return u7(m,c)},x_=(t,s)=>Vn(t,a=>Bn(s,a)),w_=(t,s,a,c)=>{const u=Math.floor(s/a),m=s%a;return c(u,m).bind(f=>{const p=f.row*a+f.column;return p>=0&&p<t.length?S.some(t[p]):S.none()})},E_=(t,s,a,c,u)=>w_(t,s,c,(m,f)=>{const b=m===a-1?t.length-m*c:c,C=zi(f,u,0,b-1);return S.some({row:m,column:C})}),k_=(t,s,a,c,u)=>w_(t,s,c,(m,f)=>{const p=zi(m,u,0,a-1),C=p===a-1?t.length-p*c:c,x=Es(f,0,C-1);return S.some({row:p,column:x})}),d7=(t,s,a,c)=>E_(t,s,a,c,1),m7=(t,s,a,c)=>E_(t,s,a,c,-1),f7=(t,s,a,c)=>k_(t,s,a,c,-1),T_=(t,s,a,c)=>k_(t,s,a,c,1),g7=[we("selector"),oe("execute",um),ps("onEscape"),oe("captureTab",!1),Qg()],h7=(t,s,a)=>{qn(t.element,s.selector).each(c=>{s.focusManager.set(t,c)})},p7=(t,s)=>s.focusManager.get(t).bind(a=>lu(a,s.selector)),b7=(t,s,a,c)=>p7(t,a).bind(u=>a.execute(t,s,u)),C1=t=>(s,a,c,u)=>S_(s,a,c.selector).bind(m=>t(m.candidates,m.index,u.getNumRows().getOr(c.initSize.numRows),u.getNumColumns().getOr(c.initSize.numColumns))),__=(t,s,a)=>a.captureTab?S.some(!0):S.none(),v7=(t,s,a)=>a.onEscape(t,s),A_=C1(m7),O_=C1(d7),y7=C1(f7),D_=C1(T_),C7=ee([Sn(pn(h1),gx(A_,O_)),Sn(pn(b1),hx(A_,O_)),Sn(pn(p1),y_(y7)),Sn(pn(lh),C_(D_)),Sn(oc([lm,pn(fd)]),__),Sn(oc([uh,pn(fd)]),__),Sn(pn(Ra.concat(yu)),b7)]),S7=ee([Sn(pn(Mv),v7),Sn(pn(Ra),gh)]);var x7=bf(g7,b_,C7,S7,()=>S.some(h7));const bx=(t,s,a,c,u)=>{const m=p=>Gi(p)==="button"&&ks(p,"disabled")==="disabled",f=(p,b,C)=>u(p,b,c,0,C.length-1,C[b],x=>m(C[x])?f(p,x,C):S.from(C[x]));return S_(t,a,s).bind(p=>{const b=p.index,C=p.candidates;return f(b,b,C)})},Bv=(t,s,a,c)=>bx(t,s,a,c,(u,m,f,p,b,C,x)=>{const k=Es(m+f,p,b);return k===u?S.from(C):x(k)}),Pv=(t,s,a,c)=>bx(t,s,a,c,(u,m,f,p,b,C,x)=>{const k=zi(m,f,p,b);return k===u?S.none():x(k)}),w7=[we("selector"),oe("getInitial",S.none),oe("execute",um),ps("onEscape"),oe("executeOnMove",!1),oe("allowVertical",!0),oe("allowHorizontal",!0),oe("cycles",!0)],E7=(t,s)=>s.focusManager.get(t).bind(a=>lu(a,s.selector)),hh=(t,s,a)=>E7(t,a).bind(c=>a.execute(t,s,c)),k7=(t,s,a)=>{s.getInitial(t).orThunk(()=>qn(t.element,s.selector)).each(c=>{s.focusManager.set(t,c)})},vx=(t,s,a)=>(a.cycles?Pv:Bv)(t,a.selector,s,-1),yx=(t,s,a)=>(a.cycles?Pv:Bv)(t,a.selector,s,1),Cx=t=>(s,a,c,u)=>t(s,a,c,u).bind(()=>c.executeOnMove?hh(s,a,c):S.some(!0)),M_=(t,s,a)=>a.onEscape(t,s),N_=(t,s,a,c)=>{const u=[...a.allowHorizontal?h1:[]].concat(a.allowVertical?p1:[]),m=[...a.allowHorizontal?b1:[]].concat(a.allowVertical?lh:[]);return[Sn(pn(u),Cx(gx(vx,yx))),Sn(pn(m),Cx(hx(vx,yx))),Sn(pn(yu),hh),Sn(pn(Ra),hh)]},T7=ee([Sn(pn(Ra),gh),Sn(pn(Mv),M_)]);var _7=bf(w7,Xc.init,N_,T7,()=>S.some(k7));const Lv=(t,s,a)=>S.from(t[s]).bind(c=>S.from(c[a]).map(u=>({rowIndex:s,columnIndex:a,cell:u}))),R_=(t,s,a,c)=>{const m=t[s].length,f=zi(a,c,0,m-1);return Lv(t,s,f)},B_=(t,s,a,c)=>{const u=zi(a,c,0,t.length-1),m=t[u].length,f=Es(s,0,m-1);return Lv(t,u,f)},dm=(t,s,a,c)=>{const m=t[s].length,f=Es(a+c,0,m-1);return Lv(t,s,f)},P_=(t,s,a,c)=>{const u=Es(a+c,0,t.length-1),m=t[u].length,f=Es(s,0,m-1);return Lv(t,u,f)},A7=(t,s,a)=>R_(t,s,a,1),O7=(t,s,a)=>R_(t,s,a,-1),D7=(t,s,a)=>B_(t,a,s,-1),L_=(t,s,a)=>B_(t,a,s,1),M7=(t,s,a)=>dm(t,s,a,-1),N7=(t,s,a)=>dm(t,s,a,1),I_=(t,s,a)=>P_(t,a,s,-1),S1=(t,s,a)=>P_(t,a,s,1),x1=[jc("selectors",[we("row"),we("cell")]),oe("cycles",!0),oe("previousSelector",S.none),oe("execute",um)],R7=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const u=s.selectors;return qn(t.element,u.cell)}).each(u=>{s.focusManager.set(t,u)})},Sx=(t,s,a)=>Sr(t.element).bind(c=>a.execute(t,s,c)),B7=(t,s)=>ke(t,a=>go(a,s.selectors.cell)),w1=(t,s)=>(a,c,u)=>{const m=u.cycles?t:s;return lu(c,u.selectors.row).bind(f=>{const p=go(f,u.selectors.cell);return x_(p,c).bind(b=>{const C=go(a,u.selectors.row);return x_(C,f).bind(x=>{const k=B7(C,u);return m(k,x,b).map(A=>A.cell)})})})},xx=w1(O7,M7),wx=w1(A7,N7),P7=w1(D7,I_),L7=w1(L_,S1),I7=ee([Sn(pn(h1),gx(xx,wx)),Sn(pn(b1),hx(xx,wx)),Sn(pn(p1),y_(P7)),Sn(pn(lh),C_(L7)),Sn(pn(Ra.concat(yu)),Sx)]),ph=ee([Sn(pn(Ra),gh)]);var vf=bf(x1,Xc.init,I7,ph,()=>S.some(R7));const Iv=[we("selector"),oe("execute",um),oe("moveOnTab",!1)],bh=(t,s,a)=>a.focusManager.get(t).bind(c=>a.execute(t,s,c)),F7=(t,s,a)=>{qn(t.element,s.selector).each(c=>{s.focusManager.set(t,c)})},gd=(t,s,a)=>Pv(t,a.selector,s,-1),Ml=(t,s,a)=>Pv(t,a.selector,s,1),Ex=(t,s,a,c)=>a.moveOnTab?Rv(gd)(t,s,a,c):S.none(),F_=(t,s,a,c)=>a.moveOnTab?Rv(Ml)(t,s,a,c):S.none(),$7=ee([Sn(pn(p1),Rv(gd)),Sn(pn(lh),Rv(Ml)),Sn(oc([lm,pn(fd)]),Ex),Sn(oc([uh,pn(fd)]),F_),Sn(pn(yu),bh),Sn(pn(Ra),bh)]),$_=ee([Sn(pn(Ra),gh)]);var E1=bf(Iv,Xc.init,$7,$_,()=>S.some(F7));const k1=[ps("onSpace"),ps("onEnter"),ps("onShiftEnter"),ps("onLeft"),ps("onRight"),ps("onTab"),ps("onShiftTab"),ps("onUp"),ps("onDown"),ps("onEscape"),oe("stopSpaceKeyup",!1),On("focusIn")],kx=(t,s,a)=>[Sn(pn(Ra),a.onSpace),Sn(oc([uh,pn(yu)]),a.onEnter),Sn(oc([lm,pn(yu)]),a.onShiftEnter),Sn(oc([lm,pn(fd)]),a.onShiftTab),Sn(oc([uh,pn(fd)]),a.onTab),Sn(pn(p1),a.onUp),Sn(pn(lh),a.onDown),Sn(pn(h1),a.onLeft),Sn(pn(b1),a.onRight),Sn(pn(Ra),a.onSpace)],H_=(t,s,a)=>[...a.stopSpaceKeyup?[Sn(pn(Ra),gh)]:[],Sn(pn(Mv),a.onEscape)];var T1=bf(k1,Xc.init,kx,H_,t=>t.focusIn);const Fv=a7.schema(),H7=m_.schema(),Tx=_7.schema(),$v=x7.schema(),V7=vf.schema(),Cu=p_.schema(),V_=E1.schema(),_x=T1.schema();var vh=Object.freeze({__proto__:null,acyclic:Fv,cyclic:H7,flow:Tx,flatgrid:$v,matrix:V7,execution:Cu,menu:V_,special:_x});const z_=t=>ir(t,"setGridSize"),nt=Ye({branchKey:"mode",branches:vh,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},c=>{c(t,s,a)})},setGridSize:(t,s,a,c,u)=>{z_(a)?a.setGridSize(c,u):console.error("Layout does not support setGridSize")}},state:l7}),Hv=Ue("alloy-premade"),Ax=t=>(Object.defineProperty(t.element.dom,Hv,{value:t.uid,writable:!0}),sf(Hv,t)),U_=t=>Yt(t.dom,Hv),Z_=t=>Ze(t,Hv),yh=t=>NT((s,...a)=>t(s.getApis(),s,...a),t),Qc=t=>t.getSystem().isConnected(),_1=t=>{rn(t,pu());const s=t.components();ze(s,_1)},A1=t=>{const s=t.components();ze(s,A1),rn(t,ec())},Ox=(t,s)=>{t.getSystem().addToWorld(s),Ko(t.element)&&A1(s)},Vv=t=>{_1(t),t.getSystem().removeFromWorld(t)},Dx=(t,s)=>{Da(t.element,s.element)},z7=t=>{ze(t.components(),s=>Fc(s.element)),Km(t.element),t.syncComponents()},U7=(t,s,a)=>{const c=t.components();z7(t);const u=a(s),m=et(c,u);ze(m,f=>{_1(f),t.getSystem().removeFromWorld(f)}),ze(u,f=>{Qc(f)?Dx(t,f):(t.getSystem().addToWorld(f),Dx(t,f),Ko(t.element)&&A1(f))}),t.syncComponents()},sc=(t,s,a)=>{const c=t.components(),u=pe(s,p=>Z_(p).toArray());ze(c,p=>{jn(u,p)||Vv(p)});const m=a(s),f=et(c,m);ze(f,p=>{Qc(p)&&Vv(p)}),ze(m,p=>{Qc(p)||Ox(t,p)}),t.syncComponents()},el=(t,s)=>{Mx(t,s,Da)},Mx=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),Ko(t.element)&&A1(s),t.syncComponents()},yf=t=>{_1(t),Fc(t.element),t.getSystem().removeFromWorld(t)},Ms=t=>{const s=qr(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());yf(t),s.each(a=>{a.syncComponents()})},Ba=t=>{const s=t.components();ze(s,yf),Km(t.element),t.syncComponents()},Ar=(t,s)=>{zv(t,s,Da)},ti=(t,s)=>{zv(t,s,kb)},zv=(t,s,a)=>{a(t,s.element);const c=Rr(s.element);ze(c,u=>{s.getByDom(u).each(A1)})},rc=t=>{const s=Rr(t.element);ze(s,a=>{t.getByDom(a).each(_1)}),Fc(t.element)},Cf=(t,s,a)=>Pc(t,s).map(u=>{if(a.exists(f=>!Bn(f,u))){const f=a.map(Gi).getOr("span"),p=ne.fromTag(f);return qm(u,p),p}else return u}),W_=(t,s,a)=>{a.fold(()=>Da(t,s),c=>{Bn(c,s)||(qm(c,s),Fc(c))})},j_=(t,s,a)=>{const c=ke(s,a),u=Rr(t);return ze(u.slice(c.length),Fc),c},G_=(t,s,a,c)=>{const u=Pc(t,s),m=c(a,u),f=Cf(t,s,u);return W_(t,m.element,f),m},q_=(t,s,a)=>j_(t,s,(c,u)=>G_(t,u,c,a)),K_=(t,s)=>j_(t,s,(a,c)=>{const u=Pc(t,c);return W_(t,a,u),a}),Ch=(t,s)=>{const a=Fs(s),c=Ic(a).bind(m=>{const f=p=>Bn(m,p);return f(s)?S.some(s):gB(s,f)}),u=t(s);return c.each(m=>{Ic(a).filter(f=>Bn(f,m)).fold(()=>{ss(m)},re)}),u},Nx=(t,s)=>{Ch(()=>{U7(t,s,()=>ke(s,t.getSystem().build))},t.element)},Y_=(t,s)=>{Ch(()=>{sc(t,s,()=>q_(t.element,s,t.getSystem().buildOrPatch))},t.element)},Z7=(t,s,a,c)=>{Vv(s);const u=G_(t.element,a,c,t.getSystem().buildOrPatch);Ox(t,u),t.syncComponents()},Rx=(t,s,a)=>{const c=t.getSystem().build(a);Mx(t,c,s)},W7=(t,s,a,c)=>{Ms(s),Rx(t,(u,m)=>nS(u,m,a),c)},X_=(t,s,a,c)=>(s.reuseDom?Y_:Nx)(t,c),J_=(t,s,a,c)=>{Rx(t,Da,c)},Bx=(t,s,a,c)=>{Rx(t,tS,c)},Q_=(t,s,a,c)=>{const u=Uv(t);_t(u,f=>Bn(c.element,f.element)).each(Ms)},Uv=(t,s)=>t.components(),eA=(t,s,a,c,u)=>{const m=Uv(t);return S.from(m[c]).map(f=>(u.fold(()=>Ms(f),p=>{(s.reuseDom?Z7:W7)(t,f,c,p)}),f))};var j7=Object.freeze({__proto__:null,append:J_,prepend:Bx,remove:Q_,replaceAt:eA,replaceBy:(t,s,a,c,u)=>{const m=Uv(t);return Vn(m,c).bind(f=>eA(t,s,a,f,u))},set:X_,contents:Uv});const Nt=gr({fields:[kr("reuseDom",!0)],name:"replacing",apis:j7}),G7=(t,s,a)=>Bn(s,t.element)&&!Bn(s,a),ac=ho([MP(hu(),(t,s)=>{const a=s.event,c=a.originator,u=a.target;return G7(t,c,u)?(console.warn(hu()+` did not get interpreted by the desired target. 
Originator: `+Ln(c)+`
Target: `+Ln(u)+`
Check the `+hu()+" event handlers"),!1):!0})]);var fG=Object.freeze({__proto__:null,events:ac});const Zv=ee("alloy-id-"),Sf=ee("data-alloy-id"),Px=Zv(),Wv=Sf(),q7=(t,s)=>{const a=Ue(Px+t);return Lx(s,a),a},Lx=(t,s)=>{Object.defineProperty(t.dom,Wv,{value:s,writable:!0})},O1=t=>{const s=Oa(t)?t.dom[Wv]:null;return S.from(s)},Sh=t=>Ue(t),tA=$t,hd=t=>{const s=u=>`The component must be in a context to execute: ${u}`+(t?`
`+Ln(t().element)+" is not in context.":""),a=u=>()=>{throw new Error(s(u))},c=u=>()=>{console.warn(s(u))};return{debugInfo:ee("fake"),triggerEvent:c("triggerEvent"),triggerFocus:c("triggerFocus"),triggerEscape:c("triggerEscape"),broadcast:c("broadcast"),broadcastOn:c("broadcastOn"),broadcastEvent:c("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:gn}},D1=hd(),K7=(t,s)=>{const a=ke(s,u=>Xa(u.name(),[we("config"),oe("state",Xc)])),c=Po("component.behaviours",wt(a),t.behaviours).fold(u=>{throw new Error(of(u)+`
Complete spec:
`+JSON.stringify(t,null,2))},$t);return{list:s,data:Gn(c,u=>{const m=u.map(f=>({config:f.config,state:f.state.init(f.config)}));return ee(m)})}},Y7=t=>t.list,nA=t=>t.data,jv=(t,s)=>{const a={};return jo(t,(c,u)=>{jo(c,(m,f)=>{const p=Ze(a,f).getOr([]);a[f]=p.concat([s(u,m)])})}),a},Ix=(t,s,a,c)=>{const u={...s};ze(a,x=>{u[x.name()]=x.exhibit(t,c)});const m=jv(u,(x,k)=>({name:x,modification:k})),f=x=>Jo(x,(k,A)=>({...A.modification,...k}),{}),p=Jo(m.classes,(x,k)=>k.modification.concat(x),[]),b=f(m.attributes),C=f(m.styles);return Jc({classes:p,attributes:b,styles:C})},Fx=(t,s,a,c)=>{try{const u=Wl(a,(m,f)=>{const p=m[s],b=f[s],C=c.indexOf(p),x=c.indexOf(b);if(C===-1)throw new Error("The ordering for "+t+" does not have an entry for "+p+`.
Order specified: `+JSON.stringify(c,null,2));if(x===-1)throw new Error("The ordering for "+t+" does not have an entry for "+b+`.
Order specified: `+JSON.stringify(c,null,2));return C<x?-1:x<C?1:0});return Ft.value(u)}catch(u){return Ft.error([u])}},Gv=(t,s)=>({handler:t,purpose:s}),$x=(t,s)=>({cHandler:t,purpose:s}),oA=(t,s)=>$x(hn.apply(void 0,[t.handler].concat(s)),t.purpose),xf=t=>t.cHandler,Hx=(t,s)=>({name:t,handler:s}),X7=(t,s)=>{const a={};return ze(t,c=>{a[c.name()]=c.handlers(s)}),a},sA=(t,s,a)=>{const c={...a,...X7(s,t)};return jv(c,Hx)},J7=(t,s,a,c)=>{const u=sA(t,a,c);return zx(u,s)},rA=t=>{const s=AP(t);return(a,c,...u)=>{const m=[a,c].concat(u);s.abort.apply(void 0,m)?c.stop():s.can.apply(void 0,m)&&s.run.apply(void 0,m)}},Vx=(t,s)=>Ft.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(ke(s,a=>a.name),null,2)]),xh=(t,s,a)=>{const c=s[a];return c?Fx("Event: "+a,"name",t,c).map(u=>{const m=ke(u,f=>f.handler);return OP(m)}):Vx(a,t)},zx=(t,s)=>{const a=Vi(t,(c,u)=>(c.length===1?Ft.value(c[0].handler):xh(c,s,u)).map(f=>{const p=rA(f),b=c.length>1?Zn(s[u],C=>ms(c,x=>x.name===C)).join(" > "):c[0].name;return sf(u,Gv(p,b))}));return QB(a,{})},wf="alloy.base.behaviour",Q7=wt([Er("dom","dom",kl(),wt([we("tag"),oe("styles",{}),oe("classes",[]),oe("attributes",{}),On("value"),On("innerHtml")])),we("components"),we("uid"),oe("events",{}),oe("apis",{}),Er("eventOrder","eventOrder",vS({[_i()]:["disabling",wf,"toggling","typeaheadevents"],[hu()]:[wf,"focusing","keying"],[lf()]:[wf,"disabling","toggling","representing","tooltipping"],[td()]:[wf,"representing","streaming","invalidating"],[pu()]:[wf,"representing","item-events","toolbar-button-events","tooltipping"],[Ja()]:["focusing",wf,"item-type-events"],[ed()]:["focusing",wf,"item-type-events"],[Kc()]:["item-type-events","tooltipping"],[af()]:["receiving","reflecting","tooltipping"]}),Uc()),On("domModification")]),aA=t=>Po("custom.definition",Q7,t),mm=t=>({...t.dom,uid:t.uid,domChildren:ke(t.components,s=>s.element)}),Ux=t=>t.domModification.fold(()=>Jc({}),Jc),Zx=t=>t.events,M1=(t,s)=>{const a=eo(t),c=eo(s),u=et(c,a),m=xs(t,(f,p)=>!Yt(s,p)||f!==s[p]).t;return{toRemove:u,toSet:m}},iA=(t,s)=>{const{class:a,style:c,...u}=Ab(s),{toSet:m,toRemove:f}=M1(t.attributes,u),p=()=>{ze(f,K=>Ao(s,K)),_b(s,m)},b=G(s),{toSet:C,toRemove:x}=M1(t.styles,b),k=()=>{ze(x,K=>Ie(s,K)),Si(s,C)},A=Ju(s),R=et(A,t.classes),L=et(t.classes,A),z=()=>{Xm(s,L),wi(s,R)},j=K=>{Wd(s,K)},V=()=>{const K=t.domChildren;K_(s,K)},q=()=>{const K=s,ie=t.value.getOrUndefined();ie!==Vc(K)&&Jm(K,ie??"")};return p(),z(),k(),t.innerHtml.fold(V,j),q(),s},qv=t=>{const s=ne.fromTag(t.tag);_b(s,t.attributes),Xm(s,t.classes),Si(s,t.styles),t.innerHtml.each(c=>Wd(s,c));const a=t.domChildren;return Fg(s,a),t.value.each(c=>{Jm(s,c)}),s},Wx=(t,s)=>{try{const a=iA(t,s);return S.some(a)}catch{return S.none()}},eL=t=>t.innerHtml.isSome()&&t.domChildren.length>0,tL=(t,s)=>{const a=u=>Gi(u)===t.tag&&!eL(t)&&!U_(u),c=s.filter(a).bind(u=>Wx(t,u)).getOrThunk(()=>qv(t));return Lx(c,t.uid),c},Su=t=>{const s=Ze(t,"behaviours").getOr({});return pe(eo(s),a=>{const c=s[a];return uo(c)?[c.me]:[]})},nL=(t,s)=>K7(t,s),oL=t=>{const s=Su(t);return nL(t,s)},ic=(t,s,a)=>{const c=mm(t),u=Ux(t),m={"alloy.base.modification":u},f=s.length>0?Ix(a,m,s,c):u;return ux(c,f)},Qs=(t,s,a)=>{const c={"alloy.base.behaviour":Zx(t)};return J7(a,t.eventOrder,s,c).getOrDie()},sL=(t,s)=>{const a=()=>K,c=Ve(D1),u=Qi(aA(t)),m=oL(t),f=Y7(m),p=nA(m),b=ic(u,f,p),C=tL(b,s),x=Qs(u,f,p),k=Ve(u.components),A=ie=>{c.set(ie)},R=()=>{c.set(hd(a))},L=()=>{const ie=Rr(C),me=pe(ie,He=>c.get().getByDom(He).fold(()=>[],Ss));k.set(me)},z=ie=>{const me=p;return(Cs(me[ie.name()])?me[ie.name()]:()=>{throw new Error("Could not find "+ie.name()+" in "+JSON.stringify(t,null,2))})()},j=ie=>Cs(p[ie.name()]),V=()=>u.apis,q=ie=>p[ie]().map(me=>me.state.readState()).getOr("not enabled"),K={uid:t.uid,getSystem:c.get,config:z,hasConfigured:j,spec:t,readState:q,getApis:V,connect:A,disconnect:R,element:C,syncComponents:L,components:k.get,events:x};return K},jx=(t,s)=>{const a=Ze(t,"components").getOr([]);return s.fold(()=>ke(a,$r),c=>ke(a,(u,m)=>Yv(u,Pc(c,m))))},rL=(t,s)=>{const{events:a,...c}=tA(t),u=jx(c,s),m={...c,events:{...fG,...a},components:u};return Ft.value(sL(m,s))},lo=t=>{const s=ne.fromText(t);return Kv({element:s})},Kv=t=>{const s=Ma("external.component",Ei([we("element"),On("uid")]),t),a=Ve(hd()),c=p=>{a.set(p)},u=()=>{a.set(hd(()=>f))},m=s.uid.getOrThunk(()=>Sh("external"));Lx(s.element,m);const f={uid:m,getSystem:a.get,config:S.none,hasConfigured:gn,connect:c,disconnect:u,getApis:()=>({}),element:s.element,spec:t,readState:ee("No state"),syncComponents:re,components:ee([]),events:{}};return Ax(f)},wh=Sh,cA=t=>Yt(t,"uid"),Yv=(t,s)=>Z_(t).getOrThunk(()=>{const a=cA(t)?t:{uid:wh(""),...t};return rL(a,s).getOrDie()}),$r=t=>Yv(t,S.none()),Ai=Ax;var cL=Object.freeze({__proto__:null,block:(t,s,a,c)=>{Ot(t.element,"aria-busy",!0);const u=s.getRoot(t).getOr(t),m=Ae([nt.config({mode:"special",onTab:()=>S.some(!0),onShiftTab:()=>S.some(!0)}),St.config({})]),f=c(u,m),p=u.getSystem().build(f);Nt.append(u,Ai(p)),p.hasConfigured(nt)&&s.focus&&nt.focusIn(p),a.isBlocked()||s.onBlock(t),a.blockWith(()=>Nt.remove(u,p))},unblock:(t,s,a)=>{Ao(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),lA=[co("getRoot",S.none),kr("focus",!0),Cn("onBlock"),Cn("onUnblock")],uA=Object.freeze({__proto__:null,init:()=>{const t=kg(),s=a=>{t.set({destroy:a})};return ei({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const tl=gr({fields:lA,name:"blocking",apis:cL,state:uA});var dA=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const Ef=[we("find")],an=gr({fields:Ef,name:"composing",apis:dA});var uL=Object.freeze({__proto__:null,getCoupled:(t,s,a,c)=>a.getOrCreate(t,s,c),getExistingCoupled:(t,s,a,c)=>a.getExisting(t,s,c)}),dL=[ki("others",vT(Ft.value,Uc()))],fL=Object.freeze({__proto__:null,init:()=>{const t={},s=(m,f)=>{if(eo(m.others).length===0)throw new Error("Cannot find any known coupled components");return Ze(t,f)},a=(m,f,p)=>s(f,p).getOrThunk(()=>{const C=Ze(f.others,p).getOrDie("No information found for coupled component: "+p)(m),x=m.getSystem().build(C);return t[p]=x,x}),c=(m,f,p)=>s(f,p).orThunk(()=>(Ze(f.others,p).getOrDie("No information found for coupled component: "+p),S.none())),u=ee({});return ei({readState:u,getExisting:c,getOrCreate:a})}});const Lo=gr({fields:dL,name:"coupling",apis:uL,state:fL}),gL=["input","button","textarea","select"],mA=(t,s,a)=>{(s.disabled()?qx:Kx)(t,s)},Xv=(t,s)=>s.useNative===!0&&jn(gL,Gi(t.element)),N1=t=>Fp(t.element,"disabled"),fA=t=>{Ot(t.element,"disabled","disabled")},gA=t=>{Ao(t.element,"disabled")},hL=t=>ks(t.element,"aria-disabled")==="true",hA=t=>{Ot(t.element,"aria-disabled","true")},pA=t=>{Ot(t.element,"aria-disabled","false")},qx=(t,s,a)=>{s.disableClass.each(u=>{Vo(t.element,u)}),(Xv(t,s)?fA:hA)(t),s.onDisabled(t)},Kx=(t,s,a)=>{s.disableClass.each(u=>{fo(t.element,u)}),(Xv(t,s)?gA:pA)(t),s.onEnabled(t)},bA=(t,s)=>Xv(t,s)?N1(t):hL(t);var pL=Object.freeze({__proto__:null,enable:Kx,disable:qx,isDisabled:bA,onLoad:mA,set:(t,s,a,c)=>{(c?qx:Kx)(t,s)}}),Xx=Object.freeze({__proto__:null,exhibit:(t,s)=>Jc({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>ho([JT(_i(),(a,c)=>bA(a,t)),dx(t,s,mA)])}),bL=[co("disabled",gn),oe("useNative",!0),On("disableClass"),Cn("onDisabled"),Cn("onEnabled")];const st=gr({fields:bL,name:"disabling",active:Xx,apis:pL}),cc=(t,s,a,c,u)=>{const m=f=>f+"px";return{position:t,left:s.map(m),top:a.map(m),right:c.map(m),bottom:u.map(m)}},vL=t=>({...t,position:S.some(t.position)}),vA=(t,s)=>{v(t,vL(s))},lc=(t,s)=>{const a=t.element;Vo(a,s.transitionClass),fo(a,s.fadeOutClass),Vo(a,s.fadeInClass),s.onShow(t)},yA=(t,s)=>{const a=t.element;Vo(a,s.transitionClass),fo(a,s.fadeInClass),Vo(a,s.fadeOutClass),s.onHide(t)},yL=(t,s)=>t.y<s.bottom&&t.bottom>s.y,CL=(t,s)=>t.y>=s.y,SL=(t,s)=>t.bottom<=s.bottom,Jx=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),Jv=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),Qx=t=>t.box.x-t.win.x,xL=(t,s,a)=>{const c=s.win,u=s.box,m=Qx(s);return nn(t,f=>{switch(f){case"bottom":return SL(u,a.bounds)?S.none():S.some(Jv(c,m,a));case"top":return CL(u,a.bounds)?S.none():S.some(Jx(c,m,a));default:return S.none()}}).getOr({location:"no-dock"})},wL=(t,s,a)=>hi(t,c=>{switch(c){case"bottom":return SL(s,a.bounds);case"top":return CL(s,a.bounds)}}),EL=(t,s)=>{const a=s.optScrollEnv.fold(ee(t.bounds.y),c=>c.scrollElmTop+(t.bounds.y-c.currentScrollTop));return Ho(t.bounds.x,a)},kL=(t,s)=>{const a=s.optScrollEnv.fold(ee(t.y),c=>t.y+c.currentScrollTop-c.scrollElmTop);return Ho(t.x,a)},fm=(t,s,a)=>a.getInitialPos().map(c=>{const u=EL(c,s);return{box:as(u.left,u.top,As(t),on(t)),location:c.location}}),Qv=(t,s,a,c,u)=>{const m=kL(s,a),f=as(m.left,m.top,s.width,s.height);c.setInitialPos({style:G(t),position:E(t,"position")||"static",bounds:f,location:u.location})},TL=(t,s,a,c,u)=>{c.getInitialPos().fold(()=>Qv(t,s,a,c,u),()=>re)},e2=(t,s,a)=>a.getInitialPos().bind(c=>{var u;switch(a.clearInitialPos(),c.position){case"static":return S.some({morph:"static"});case"absolute":const m=jg(t).getOr(Xr()),f=mr(m),p=(u=m.dom.scrollTop)!==null&&u!==void 0?u:0;return S.some({morph:"absolute",positionCss:cc("absolute",Ze(c.style,"left").map(b=>s.x-f.x),Ze(c.style,"top").map(b=>s.y-f.y+p),Ze(c.style,"right").map(b=>f.right-s.right),Ze(c.style,"bottom").map(b=>f.bottom-s.bottom))});default:return S.none()}}),t2=(t,s,a)=>fm(t,s,a).filter(({box:c})=>wL(a.getModes(),c,s)).bind(({box:c})=>e2(t,c,a)),R1=t=>{switch(t.location){case"top":return S.some({morph:"fixed",positionCss:cc("fixed",S.some(t.leftX),S.some(t.topY),S.none(),S.none())});case"bottom":return S.some({morph:"fixed",positionCss:cc("fixed",S.some(t.leftX),S.none(),S.none(),S.some(t.bottomY))});default:return S.none()}},_L=(t,s,a)=>{const c=mr(t),u=Pr(),m=xL(a.getModes(),{win:u,box:c},s);return m.location==="top"||m.location==="bottom"?(Qv(t,c,s,a,m),R1(m)):S.none()},AL=(t,s,a)=>t2(t,s,a).orThunk(()=>s.optScrollEnv.bind(c=>fm(t,s,a)).bind(({box:c,location:u})=>{const m=Pr(),f=Qx({win:m,box:c}),p=u==="top"?Jx(m,f,s):Jv(m,f,s);return R1(p)})),OL=(t,s,a)=>{const c=t.element;return Gr(H(c,"position"),"fixed")?AL(c,s,a):_L(c,s,a)},DL=(t,s,a)=>{const c=t.element;return fm(c,s,a).bind(({box:u})=>e2(c,u,a))},ML=(t,s,a,c)=>{const u=mr(t),m=Pr(),f=Qx({win:m,box:u}),p=c(m,f,s);return p.location==="bottom"||p.location==="top"?(TL(t,u,s,a,p),R1(p)):S.none()},CA=(t,s,a)=>{a.setDocked(!1),ze(["left","right","top","bottom","position"],c=>Ie(t.element,c)),s.onUndocked(t)},ew=(t,s,a,c)=>{const u=c.position==="fixed";a.setDocked(u),vA(t.element,c),(u?s.onDocked:s.onUndocked)(t)},tw=(t,s,a,c,u=!1)=>{s.contextual.each(m=>{m.lazyContext(t).each(f=>{const p=yL(f,c.bounds);p!==a.isVisible()&&(a.setVisible(p),u&&!p?(Xm(t.element,[m.fadeOutClass]),m.onHide(t)):(p?lc:yA)(t,m))})})},B1=(t,s,a,c,u)=>{tw(t,s,a,c,!0),ew(t,s,a,u.positionCss)},NL=(t,s,a,c,u)=>{switch(u.morph){case"static":return CA(t,s,a);case"absolute":return ew(t,s,a,u.positionCss);case"fixed":return B1(t,s,a,c,u)}},RL=(t,s,a)=>{const c=s.lazyViewport(t);tw(t,s,a,c),OL(t,c,a).each(u=>{NL(t,s,a,c,u)})},BL=(t,s,a)=>{const c=t.element;a.setDocked(!1);const u=s.lazyViewport(t);DL(t,u,a).each(m=>{switch(m.morph){case"static":{CA(t,s,a);break}case"absolute":{ew(t,s,a,m.positionCss);break}}}),a.setVisible(!0),s.contextual.each(m=>{wi(c,[m.fadeInClass,m.fadeOutClass,m.transitionClass]),m.onShow(t)}),n2(t,s,a)},n2=(t,s,a)=>{t.getSystem().isConnected()&&RL(t,s,a)},kf=(t,s,a)=>{a.isDocked()&&BL(t,s,a)},o2=t=>(s,a,c)=>{const u=a.lazyViewport(s);ML(s.element,u,c,t).each(f=>{B1(s,a,c,u,f)})},PL=o2(Jx),nw=o2(Jv);var LL=Object.freeze({__proto__:null,refresh:n2,reset:kf,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,c)=>a.setModes(c),forceDockToTop:PL,forceDockToBottom:nw}),s2=Object.freeze({__proto__:null,events:(t,s)=>ho([ch(Kg(),(a,c)=>{t.contextual.each(u=>{wr(a.element,u.transitionClass)&&(wi(a.element,[u.transitionClass,u.fadeInClass]),(s.isVisible()?u.onShown:u.onHidden)(a)),c.stop()})}),ve(MS(),(a,c)=>{n2(a,t,s)}),ve(uf(),(a,c)=>{n2(a,t,s)}),ve(Ol(),(a,c)=>{kf(a,t,s)})])}),ow=[Xa("contextual",[Hs("fadeInClass"),Hs("fadeOutClass"),Hs("transitionClass"),Wc("lazyContext"),Cn("onShow"),Cn("onShown"),Cn("onHide"),Cn("onHidden")]),co("lazyViewport",()=>({bounds:Pr(),optScrollEnv:S.none()})),Xd("modes",["top","bottom"],hs),Cn("onDocked"),Cn("onUndocked")],SA=Object.freeze({__proto__:null,init:t=>{const s=Ve(!1),a=Ve(!0),c=dn(),u=Ve(t.modes),m=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${u.get().join(",")}`;return ei({isDocked:s.get,setDocked:s.set,getInitialPos:c.get,setInitialPos:c.set,clearInitialPos:c.clear,isVisible:a.get,setVisible:a.set,getModes:u.get,setModes:u.set,readState:m})}});const po=gr({fields:ow,name:"docking",active:s2,apis:LL,state:SA}),P1=ao.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),r2=t=>s=>s.translate(-t.left,-t.top),L1=t=>s=>s.translate(t.left,t.top),pd=t=>(s,a)=>Qo(t,(c,u)=>u(c),Ho(s,a)),a2=(t,s,a)=>t.fold(pd([L1(a),r2(s)]),pd([r2(s)]),pd([])),Tf=(t,s,a)=>t.fold(pd([L1(a)]),pd([]),pd([L1(s)])),xA=(t,s,a)=>t.fold(pd([]),pd([r2(a)]),pd([L1(s),r2(a)])),FL=(t,s,a,c,u,m)=>{const f=Tf(t,u,m),p=Tf(s,u,m);return Math.abs(f.left-p.left)<=a&&Math.abs(f.top-p.top)<=c},sw=(t,s,a,c,u,m)=>{const f=Tf(t,u,m),p=Tf(s,u,m),b=Math.abs(f.left-p.left),C=Math.abs(f.top-p.top);return Ho(b,C)},rw=(t,s,a)=>{const c=t.fold((u,m)=>({position:S.some("absolute"),left:S.some(u+"px"),top:S.some(m+"px")}),(u,m)=>({position:S.some("absolute"),left:S.some(u-a.left+"px"),top:S.some(m-a.top+"px")}),(u,m)=>({position:S.some("fixed"),left:S.some(u+"px"),top:S.some(m+"px")}));return{right:S.none(),bottom:S.none(),...c}},i2=(t,s,a)=>t.fold((c,u)=>_f(c+s,u+a),(c,u)=>Oi(c+s,u+a),(c,u)=>bd(c+s,u+a)),kh=(t,s,a,c)=>{const u=(m,f)=>(p,b)=>{const C=m(s,a,c);return f(p.getOr(C.left),b.getOr(C.top))};return t.fold(u(xA,_f),u(Tf,Oi),u(a2,bd))},_f=P1.offset,Oi=P1.absolute,bd=P1.fixed,wA=(t,s)=>{const a=ks(t,s);return ar(a)?NaN:parseInt(a,10)},$L=(t,s)=>{const a=t.element,c=wA(a,s.leftAttr),u=wA(a,s.topAttr);return isNaN(c)||isNaN(u)?S.none():S.some(Ho(c,u))},HL=(t,s,a)=>{const c=t.element;Ot(c,s.leftAttr,a.left+"px"),Ot(c,s.topAttr,a.top+"px")},EA=(t,s)=>{const a=t.element;Ao(a,s.leftAttr),Ao(a,s.topAttr)},VL=(t,s,a,c)=>$L(t,s).fold(()=>a,u=>bd(u.left+c.left,u.top+c.top)),zL=(t,s,a,c,u,m)=>{const f=VL(t,s,a,c),p=s.mustSnap?UL(t,s,f,u,m):TA(t,s,f,u,m),b=a2(f,u,m);return HL(t,s,b),p.fold(()=>({coord:bd(b.left,b.top),extra:S.none()}),C=>({coord:C.output,extra:C.extra}))},kA=(t,s)=>{EA(t,s)},aw=(t,s,a,c)=>nn(t,u=>{const m=u.sensor;return FL(s,m,u.range.left,u.range.top,a,c)?S.some({output:kh(u.output,s,a,c),extra:u.extra}):S.none()}),UL=(t,s,a,c,u)=>{const m=s.getSnapPoints(t);return aw(m,a,c,u).orThunk(()=>Qo(m,(b,C)=>{const x=C.sensor,k=sw(a,x,C.range.left,C.range.top,c,u);return b.deltas.fold(()=>({deltas:S.some(k),snap:S.some(C)}),A=>{const R=(k.left+k.top)/2,L=(A.left+A.top)/2;return R<=L?{deltas:S.some(k),snap:S.some(C)}:b})},{deltas:S.none(),snap:S.none()}).snap.map(b=>({output:kh(b.output,a,c,u),extra:b.extra})))},TA=(t,s,a,c,u)=>{const m=s.getSnapPoints(t);return aw(m,a,c,u)},ZL=(t,s,a)=>({coord:kh(t.output,t.output,s,a),extra:t.extra});var AA=Object.freeze({__proto__:null,snapTo:(t,s,a,c)=>{const u=s.getTarget(t.element);if(s.repositionTarget){const m=Nr(t.element),f=Br(m),p=ot(u),b=ZL(c,f,p),C=rw(b.coord,f,p);v(u,C)}}});const Us=(t,s)=>Qb(t,{},ke(s,a=>Jb(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([ea("dump",$t)])),I1=t=>t.dump,hr=(t,s)=>({...Ae(s),...t.dump}),nl={field:Us,augment:hr,get:I1},WL=(t,s)=>(t.length>0?[jc("parts",t)]:[]).concat([we("uid"),oe("dom",{}),oe("components",[]),mf("originalSpec"),oe("debug.sketcher",{})]).concat(s),OA=(t,s,a,c,u)=>{const m=WL(c,u);return Ma(t+" [SpecSchema]",Ei(m.concat(s)),a)},jL=(t,s,a,c)=>{const u=iw(c),m=OA(t,s,u,[],[]);return a(m,u)},Af=(t,s,a,c,u)=>{const m=iw(u),f=dv(a),p=mv(a),b=OA(t,s,m,f,[p]),C=sm(t,b,a),x=id(t,b,C.internals());return c(b,x,m,C.externals())},DA=t=>Yt(t,"uid"),iw=t=>DA(t)?t:{...t,uid:Sh("uid")},MA=t=>t.uid!==void 0,NA=Ei([we("name"),we("factory"),we("configFields"),oe("apis",{}),oe("extraApis",{})]),RA=Ei([we("name"),we("factory"),we("configFields"),we("partFields"),oe("apis",{}),oe("extraApis",{})]),Di=t=>{const s=Ma("Sketcher for "+t.name,NA,t),a=m=>jL(s.name,s.configFields,s.factory,m),c=Gn(s.apis,yh),u=Gn(s.extraApis,(m,f)=>iv(m,f));return{name:s.name,configFields:s.configFields,sketch:a,...c,...u}},na=t=>{const s=Ma("Sketcher for "+t.name,RA,t),a=f=>Af(s.name,s.configFields,s.partFields,s.factory,f),c=oh(s.name,s.partFields),u=Gn(s.apis,yh),m=Gn(s.extraApis,(f,p)=>iv(f,p));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:c,...u,...m}},uc=Di({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:I1(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[oe("components",[]),Us("containerBehaviours",[]),oe("events",{}),oe("domModification",{}),oe("eventOrder",{})]}),cw="data-initial-z-index",c2=t=>{qr(t.element).filter(Oa).each(s=>{Ts(s,cw).fold(()=>Ie(s,"z-index"),a=>Rt(s,"z-index",a)),Ao(s,cw)})},GL=t=>{qr(t.element).filter(Oa).each(s=>{H(s,"z-index").each(a=>{Ot(s,cw,a)}),Rt(s,"z-index",E(t.element,"z-index"))})},lw=(t,s)=>{t.getSystem().addToGui(s),GL(s)},Sa=t=>{c2(t),t.getSystem().removeFromGui(t)},BA=(t,s,a)=>t.getSystem().build(uc.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var PA=Xa("snaps",[we("getSnapPoints"),Cn("onSensor"),we("leftAttr"),we("topAttr"),oe("lazyViewport",Pr),oe("mustSnap",!1)]);const l2=[oe("useFixed",gn),we("blockerClass"),oe("getTarget",$t),oe("onDrag",re),oe("repositionTarget",!0),oe("onDrop",re),co("getBounds",Pr),PA],qL=t=>Fd(H(t,"left"),H(t,"top"),H(t,"position"),(s,a,c)=>(c==="fixed"?bd:_f)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=$c(t);return Oi(s.left,s.top)}),LA=(t,s,a,c,u)=>{const m=u.bounds,f=Tf(s,a,c),p=Es(f.left,m.x,m.x+m.width-u.width),b=Es(f.top,m.y,m.y+m.height-u.height),C=Oi(p,b);return s.fold(()=>{const x=xA(C,a,c);return _f(x.left,x.top)},ee(C),()=>{const x=a2(C,a,c);return bd(x.left,x.top)})},IA=(t,s,a,c,u,m,f)=>{const p=s.fold(()=>{const b=i2(a,m.left,m.top),C=a2(b,c,u);return bd(C.left,C.top)},b=>{const C=zL(t,b,a,m,c,u);return C.extra.each(x=>{b.onSensor(t,x)}),C.coord});return LA(t,p,c,u,f)},KL=(t,s,a,c)=>{const u=s.getTarget(t.element);if(s.repositionTarget){const m=Nr(t.element),f=Br(m),p=ot(u),b=qL(u),C=IA(t,s.snaps,b,f,p,c,a),x=rw(C,f,p);v(u,x)}s.onDrag(t,u,c)},FA=(t,s)=>({bounds:t.getBounds(),height:xo(s.element),width:Hg(s.element)}),uw=(t,s,a,c,u)=>{const m=a.update(c,u),f=a.getStartData().getOrThunk(()=>FA(s,t));m.each(p=>{KL(t,s,f,p)})},$A=(t,s,a,c)=>{s.each(Sa),a.snaps.each(m=>{kA(t,m)});const u=a.getTarget(t.element);c.reset(),a.onDrop(t,u)},u2=t=>(s,a)=>{const c=u=>{a.setStartData(FA(s,u))};return ho([ve(MS(),u=>{a.getStartData().each(()=>c(u))}),...t(s,a,c)])},YL=t=>ho([ve(Ja(),t.forceDrop),ve(ev(),t.drop),ve(Xp(),(s,a)=>{t.move(a.event)}),ve(Jp(),t.delayDrop)]);var HA=Object.freeze({__proto__:null,getData:t=>S.from(Ho(t.x,t.y)),getDelta:(t,s)=>Ho(s.left-t.left,s.top-t.top)});const dw=(t,s,a)=>[ve(Ja(),(c,u)=>{if(u.event.raw.button!==0)return;u.stop();const f=()=>$A(c,S.some(C),t,s),p=RT(f,200),b={drop:f,delayDrop:p.schedule,forceDrop:f,move:k=>{p.cancel(),uw(c,t,s,HA,k)}},C=BA(c,t.blockerClass,YL(b));(()=>{a(c),lw(c,C)})()})],JL=[...l2,Wn("dragger",{handlers:u2(dw)})],QL=t=>ho([ve(ed(),t.forceDrop),ve(_l(),t.drop),ve(qc(),t.drop),ve(Jd(),(s,a)=>{t.move(a.event)})]),eI=t=>{const s=t[0];return S.some(Ho(s.clientX,s.clientY))};var mw=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?eI(a):S.none()},getDelta:(t,s)=>Ho(s.left-t.left,s.top-t.top)});const vd=(t,s,a)=>{const c=dn(),u=m=>{$A(m,c.get(),t,s),c.clear()};return[ve(ed(),(m,f)=>{f.stop();const p=()=>u(m),b={drop:p,delayDrop:re,forceDrop:p,move:k=>{uw(m,t,s,mw,k)}},C=BA(m,t.blockerClass,QL(b));c.set(C),(()=>{a(m),lw(m,C)})()}),ve(Jd(),(m,f)=>{f.stop(),uw(m,t,s,mw,f.event)}),ve(_l(),(m,f)=>{f.stop(),u(m)}),ve(qc(),u)]},VA=[...l2,Wn("dragger",{handlers:u2(vd)})],zA=(t,s,a)=>[...dw(t,s,a),...vd(t,s,a)],UA=[...l2,Wn("dragger",{handlers:u2(zA)})];var nI=Object.freeze({__proto__:null,mouse:JL,touch:VA,mouseOrTouch:UA}),sI=Object.freeze({__proto__:null,init:()=>{let t=S.none(),s=S.none();const a=()=>{t=S.none(),s=S.none()},c=(b,C)=>{const x=t.map(k=>b.getDelta(k,C));return t=S.some(C),x},u=(b,C)=>b.getData(C).bind(x=>c(b,x)),m=b=>{s=S.some(b)},f=()=>s,p=ee({});return ei({readState:p,reset:a,update:u,getStartData:f,setStartData:m})}});const Of=Ye({branchKey:"mode",branches:nI,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:S.from(t.extra)})},state:sI,apis:AA}),rI=["input","textarea"],fw=t=>{const s=Gi(t);return jn(rI,s)},d2=(t,s)=>{const a=s.getRoot(t).getOr(t.element);fo(a,s.invalidClass),s.notify.each(c=>{fw(t.element)&&Ot(t.element,"aria-invalid",!1),c.getContainer(t).each(u=>{Wd(u,c.validHtml)}),c.onValid(t)})},m2=(t,s,a,c)=>{const u=s.getRoot(t).getOr(t.element);Vo(u,s.invalidClass),s.notify.each(m=>{fw(t.element)&&Ot(t.element,"aria-invalid",!0),m.getContainer(t).each(f=>{Wd(f,c)}),m.onInvalid(t,c)})},ZA=(t,s,a)=>s.validator.fold(()=>Ro.pure(Ft.value(!0)),c=>c.validate(t)),xu=(t,s,a)=>(s.notify.each(c=>{c.onValidate(t)}),ZA(t,s).map(c=>t.getSystem().isConnected()?c.fold(u=>(m2(t,s,a,u),Ft.error(u)),u=>(d2(t,s),Ft.value(u))):Ft.error("No longer in system")));var WA=Object.freeze({__proto__:null,markValid:d2,markInvalid:m2,query:ZA,run:xu,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return wr(a,s.invalidClass)}}),iI=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>ho([ve(a.onEvent,c=>{xu(c,t,s).get($t)})].concat(a.validateOnLoad?[ro(c=>{xu(c,t,s).get(re)})]:[]))).getOr({})}),$1=[we("invalidClass"),oe("getRoot",S.none),Xa("notify",[oe("aria","alert"),oe("getContainer",S.none),oe("validHtml",""),Cn("onValid"),Cn("onInvalid"),Cn("onValidate")]),Xa("validator",[we("validate"),oe("onEvent","input"),oe("validateOnLoad",!0)])];const Df=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},gw=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var cI=Object.freeze({__proto__:null,onLoad:Df,onUnload:gw,setValue:(t,s,a,c)=>{s.store.manager.setValue(t,s,a,c)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),GA=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[ro((c,u)=>{Df(c,t,s)}),Dl((c,u)=>{gw(c,t,s)})]:[dx(t,s,Df)];return ho(a)}});const wu=()=>{const t=Ve(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,c=()=>{t.set(null)};return ei({set:t.set,get:t.get,isNotSet:a,clear:c,readState:s})},hw=()=>ei({readState:re}),qA=()=>{const t=Ve({}),s=Ve({});return ei({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:f=>Ze(t.get(),f).orThunk(()=>Ze(s.get(),f)),update:f=>{const p=t.get(),b=s.get(),C={},x={};ze(f,k=>{C[k.value]=k,Ze(k,"meta").each(A=>{Ze(A,"text").each(R=>{x[R]=k})})}),t.set({...p,...C}),s.set({...b,...x})},clear:()=>{t.set({}),s.set({})}})};var KA=Object.freeze({__proto__:null,memory:wu,dataset:qA,manual:hw,init:t=>t.store.manager.state(t)});const pw=(t,s,a,c)=>{const u=s.store;a.update([c]),u.setValue(t,c),s.onSetValue(t,c)},bw=(t,s,a)=>{const c=s.store,u=c.getDataKey(t);return a.lookup(u).getOrThunk(()=>c.getFallbackEntry(u))},YA=(t,s,a)=>{s.store.initialValue.each(u=>{pw(t,s,a,u)})},uI=(t,s,a)=>{a.clear()};var dI=[On("initialValue"),we("getFallbackEntry"),we("getDataKey"),we("setValue"),Wn("manager",{setValue:pw,getValue:bw,onLoad:YA,onUnload:uI,state:qA})];const mI=(t,s,a)=>s.store.getValue(t),f2=(t,s,a,c)=>{s.store.setValue(t,c),s.onSetValue(t,c)},vw=(t,s,a)=>{s.store.initialValue.each(c=>{s.store.setValue(t,c)})};var g2=[we("getValue"),oe("setValue",re),On("initialValue"),Wn("manager",{setValue:f2,getValue:mI,onLoad:vw,onUnload:re,state:Xc.init})];const XA=(t,s,a,c)=>{a.set(c),s.onSetValue(t,c)},fI=(t,s,a)=>a.get(),JA=(t,s,a)=>{s.store.initialValue.each(c=>{a.isNotSet()&&a.set(c)})},QA=(t,s,a)=>{a.clear()};var eO=[On("initialValue"),Wn("manager",{setValue:XA,getValue:fI,onLoad:JA,onUnload:QA,state:wu})],tO=[Gc("store",{mode:"memory"},Ka("mode",{memory:eO,manual:g2,dataset:dI})),Cn("onSetValue"),oe("resetOnDom",!1)];const We=gr({fields:tO,name:"representing",active:GA,apis:cI,extra:{setValueFrom:(t,s)=>{const a=We.getValue(s);We.setValue(t,a)}},state:KA}),ol=gr({fields:$1,name:"invalidating",active:iI,apis:WA,extra:{validation:t=>s=>{const a=We.getValue(s);return Ro.pure(t(a))}}});var gI=Object.freeze({__proto__:null,exhibit:(t,s)=>Jc({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const yw=ao.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),nO=(t,s,a,c,u,m)=>{const f=s.rect,p=f.x-a,b=f.y-c,C=f.width,x=f.height,k=u-(p+C),A=m-(b+x),R=S.some(p),L=S.some(b),z=S.some(k),j=S.some(A),V=S.none();return bP(s.direction,()=>cc(t,R,L,V,V),()=>cc(t,V,L,z,V),()=>cc(t,R,V,V,j),()=>cc(t,V,V,z,j),()=>cc(t,R,L,V,V),()=>cc(t,R,V,V,j),()=>cc(t,R,L,V,V),()=>cc(t,V,L,z,V))},Cw=(t,s)=>t.fold(()=>{const a=s.rect;return cc("absolute",S.some(a.x),S.some(a.y),S.none(),S.none())},(a,c,u,m)=>nO("absolute",s,a,c,u,m),(a,c,u,m)=>nO("fixed",s,a,c,u,m)),Sw=(t,s)=>{const a=hn(jp,s),c=t.fold(a,a,()=>{const f=Br();return jp(s).translate(-f.left,-f.top)}),u=Hg(s),m=xo(s);return as(c.left,c.top,u,m)},hI=(t,s)=>s.fold(()=>t.fold(Pr,Pr,as),a=>t.fold(ee(a),ee(a),()=>{const c=xw(t,a.x,a.y);return as(c.left,c.top,a.width,a.height)})),xw=(t,s,a)=>{const c=Ho(s,a),u=()=>{const m=Br();return c.translate(-m.left,-m.top)};return t.fold(ee(c),ee(c),u)},H1=(t,s,a,c)=>t.fold(s,a,c);yw.none;const pI=yw.relative,V1=yw.fixed,ww=(t,s)=>({anchorBox:t,origin:s}),oO=(t,s)=>ww(t,s),z1=ao.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),bI=(t,s)=>{const{x:a,y:c,right:u,bottom:m}=s,{x:f,y:p,right:b,bottom:C,width:x,height:k}=t,A=f>=a&&f<=u,R=p>=c&&p<=m,L=A&&R,z=b<=u&&b>=a,j=C<=m&&C>=c,V=z&&j,q=Math.min(x,f>=a?u-f:b-a),K=Math.min(k,p>=c?m-p:C-c);return{originInBounds:L,sizeInBounds:V,visibleW:q,visibleH:K}},vI=(t,s)=>{const{x:a,y:c,right:u,bottom:m}=s,{x:f,y:p,width:b,height:C}=t,x=Math.max(a,u-b),k=Math.max(c,m-C),A=Es(f,a,x),R=Es(p,c,k),L=Math.min(A+b,u)-A,z=Math.min(R+C,m)-R;return as(A,R,L,z)},sO=(t,s,a)=>{const c=ee(s.bottom-a.y),u=ee(a.bottom-s.y),m=vP(t,u,u,c),f=ee(s.right-a.x),p=ee(a.right-s.x);return{maxWidth:$T(t,p,p,f),maxHeight:m}},yI=(t,s,a,c)=>{const u=t.bubble,m=u.offset,f=CP(c,t.restriction,m),p=t.x+m.left,b=t.y+m.top,C=as(p,b,s,a),{originInBounds:x,sizeInBounds:k,visibleW:A,visibleH:R}=bI(C,f),L=x&&k,z=L?C:vI(C,f),j=z.width>0&&z.height>0,{maxWidth:V,maxHeight:q}=sO(t.direction,z,c),K={rect:z,maxHeight:q,maxWidth:V,direction:t.direction,placement:t.placement,classes:{on:u.classesOn,off:u.classesOff},layout:t.label,testY:b};return L||t.alwaysFit?z1.fit(K):z1.nofit(K,A,R,j)},rO=(t,s,a,c,u,m)=>{const f=c.width,p=c.height,b=(x,k,A,R,L)=>{const z=x(a,c,u,t,m),j=yI(z,f,p,m);return j.fold(ee(j),(V,q,K,ie)=>(L===ie?K>R||q>A:!L&&ie)?j:z1.nofit(k,A,R,L))};return Qo(s,(x,k)=>{const A=hn(b,k);return x.fold(ee(x),A)},z1.nofit({rect:a,maxHeight:c.height,maxWidth:c.width,direction:hv(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold($t,$t)},aO=["top","bottom","right","left"],h2="data-alloy-transition-timer",iO=(t,s)=>bB(t,s.classes),p2=(t,s,a)=>a.exists(c=>{const u=t.mode;return u==="all"?!0:c[u]!==s[u]}),Ew=(t,s)=>{const a=c=>parseFloat(c).toFixed(3);return ws(s,(c,u)=>{const m=t[u].map(a),f=c.map(a);return!Fm(m,f)}).isSome()},kw=t=>{const s=m=>{const p=E(t,m).split(/\s*,\s*/);return Zn(p,vi)},a=m=>{if(Tt(m)&&/^[\d.]+/.test(m)){const f=parseFloat(m);return to(m,"ms")?f:f*1e3}else return 0},c=s("transition-delay"),u=s("transition-duration");return Qo(u,(m,f,p)=>{const b=a(c[p])+a(f);return Math.max(m,b)},0)},CI=(t,s)=>{const a=Wa(),c=Wa();let u;const m=C=>{var x;const k=(x=C.raw.pseudoElement)!==null&&x!==void 0?x:"";return Bn(C.target,t)&&ja(k)&&jn(aO,C.raw.propertyName)},f=C=>{if(pl(C)||m(C)){a.clear(),c.clear();const x=C==null?void 0:C.raw.type;(pl(x)||x===Kg())&&(clearTimeout(u),Ao(t,h2),wi(t,s.classes))}},p=Ys(t,tP(),C=>{m(C)&&(p.unbind(),a.set(Ys(t,Kg(),f)),c.set(Ys(t,eP(),f)))}),b=kw(t);requestAnimationFrame(()=>{u=setTimeout(f,b+17),Ot(t,h2,u)})},SI=(t,s)=>{Xm(t,s.classes),Ts(t,h2).each(a=>{clearTimeout(parseInt(a,10)),Ao(t,h2)}),CI(t,s)},xI=(t,s,a,c,u,m)=>{const f=p2(c,u,m);if(f||iO(t,c)){Rt(t,"position",a.position);const p=Sw(s,t),b=Cw(s,{...u,rect:p}),C=Ac(aO,x=>b[x]);Ew(a,C)&&(v(t,C),f&&SI(t,c),Vt(t))}else wi(t,c.classes)},wI=t=>({width:Math.ceil(Nb(t)),height:xo(t)}),cO=(t,s,a,c)=>{Ie(s,"max-height"),Ie(s,"max-width");const u=wI(s);return rO(s,c.preference,t,u,a,c.bounds)},lO=(t,s)=>{const a=s.classes;wi(t,a.off),Xm(t,a.on)},EI=(t,s,a)=>{const c=a.maxHeightFunction;c(t,s.maxHeight)},kI=(t,s,a)=>{const c=a.maxWidthFunction;c(t,s.maxWidth)},TI=(t,s,a)=>{const c=Cw(a.origin,s);a.transition.each(u=>{xI(t,a.origin,c,u,s,a.lastPlacement)}),vA(t,c)},_I=(t,s)=>{vv(t,s.placement)},uO=(t,s,a)=>t[s]===void 0?a:t[s],AI=(t,s,a,c,u,m,f,p)=>{const b=uO(f,"maxHeightFunction",ix()),C=uO(f,"maxWidthFunction",re),x=t.anchorBox,k=t.origin,A={bounds:hI(k,m),origin:k,preference:c,maxHeightFunction:b,maxWidthFunction:C,lastPlacement:u,transition:p};return dO(x,s,a,A)},dO=(t,s,a,c)=>{const u=cO(t,s,a,c);return TI(s,u,c),_I(s,u),lO(s,u),EI(s,u,c),kI(s,u,c),{layout:u.layout,placement:u.placement}},b2=$t,gm=()=>Xa("layouts",[we("onLtr"),we("onRtl"),On("onBottomLtr"),On("onBottomRtl")]),v2=(t,s,a,c,u,m,f)=>{const p=f.map(EP).getOr(!1),b=s.layouts.map(R=>R.onLtr(t)),C=s.layouts.map(R=>R.onRtl(t)),x=p?s.layouts.bind(R=>R.onBottomLtr.map(L=>L(t))).or(b).getOr(u):b.getOr(a),k=p?s.layouts.bind(R=>R.onBottomRtl.map(L=>L(t))).or(C).getOr(m):C.getOr(c);return Vp(x,k)(t)},OI=(t,s,a)=>{const c=s.hotspot,u=Sw(a,c.element),m=v2(t.element,s,ud(),sx(),ox(),ld(),S.some(s.hotspot.element));return S.some(b2({anchorBox:u,bubble:s.bubble.getOr(gv()),overrides:s.overrides,layouts:m}))};var DI=[we("hotspot"),On("bubble"),oe("overrides",{}),gm(),Wn("placement",OI)];const Rf=(t,s,a)=>{const c=xw(a,s.x,s.y),u=as(c.left,c.top,s.width,s.height),m=v2(t.element,s,ZT(),WT(),ZT(),WT(),S.none());return S.some(b2({anchorBox:u,bubble:s.bubble,overrides:s.overrides,layouts:m}))};var MI=[we("x"),we("y"),oe("height",0),oe("width",0),oe("bubble",gv()),oe("overrides",{}),gm(),Wn("placement",Rf)];const mO=ao.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Bf=t=>t.fold($t,(s,a,c)=>s.translate(-a,-c)),fO=t=>t.fold($t,$t),gO=t=>Qo(t,(s,a)=>s.translate(a.left,a.top),Ho(0,0)),hm=t=>{const s=ke(t,Bf);return gO(s)},hO=t=>{const s=ke(t,fO);return gO(s)},NI=mO.screen,dc=mO.absolute,pO=(t,s,a)=>{const c=qi(a.root).dom,u=m=>{const f=Nr(m),p=Nr(t.element);return Bn(f,p)};return S.from(c.frameElement).map(ne.fromDom).filter(u).map($c)},Tw=(t,s,a)=>{const c=Nr(t.element),u=Br(c),m=pO(t,s,a).getOr(u);return dc(m,u.left,u.top)},y2=(t,s,a,c)=>{const u=NI(Ho(t,s));return S.some(dr(u,a,c))},bO=(t,s,a,c,u)=>t.map(m=>{const f=[s,m.point],p=H1(c,()=>hO(f),()=>hO(f),()=>hm(f)),b=IB(p.left,p.top,m.width,m.height),C=a.showAbove?ox():ud(),x=a.showAbove?ld():sx(),k=v2(u,a,C,x,C,x,S.none());return b2({anchorBox:b,bubble:a.bubble.getOr(gv()),overrides:a.overrides,layouts:k})}),C2=(t,s,a)=>{const c=Tw(t,a,s);return s.node.filter(Ko).bind(u=>{const m=u.dom.getBoundingClientRect(),f=y2(m.left,m.top,m.width,m.height),p=s.node.getOr(t.element);return bO(f,c,s,a,p)})};var vO=[we("node"),we("root"),On("bubble"),gm(),oe("overrides",{}),oe("showAbove",!1),Wn("placement",C2)];const S2=(t,s)=>({element:t,offset:s}),RI=(t,s)=>{const a=Rr(t);if(a.length===0)return S2(t,s);if(s<a.length)return S2(a[s],0);{const c=a[a.length-1],u=Gu(c)?cS(c).length:Rr(c).length;return S2(c,u)}},U1=(t,s)=>Gu(t)?S2(t,s):RI(t,s),Z1=t=>t.foffset!==void 0,_w=(t,s)=>s.getSelection.getOrThunk(()=>()=>MB(t))().map(c=>{if(Z1(c)){const u=U1(c.start,c.soffset),m=U1(c.finish,c.foffset);return Wp.range(u.element,u.offset,m.element,m.offset)}else return c}),yO=(t,s,a)=>{const c=qi(s.root).dom,u=Tw(t,a,s),m=_w(c,s).bind(b=>{if(Z1(b))return NB(c,Wp.exactFromRange(b)).orThunk(()=>{const x=ne.fromText(wl);qm(b.start,x);const k=iT(c,Wp.exact(x,0,x,1));return Fc(x),k}).bind(x=>y2(x.left,x.top,x.width,x.height));{const C=Gn(b,k=>k.dom.getBoundingClientRect()),x={left:Math.min(C.firstCell.left,C.lastCell.left),right:Math.max(C.firstCell.right,C.lastCell.right),top:Math.min(C.firstCell.top,C.lastCell.top),bottom:Math.max(C.firstCell.bottom,C.lastCell.bottom)};return y2(x.left,x.top,x.right-x.left,x.bottom-x.top)}}),p=_w(c,s).bind(b=>Z1(b)?Oa(b.start)?S.some(b.start):sn(b.start):S.some(b.firstCell)).getOr(t.element);return bO(m,u,s,a,p)};var CO=[On("getSelection"),we("root"),On("bubble"),gm(),oe("overrides",{}),oe("showAbove",!1),Wn("placement",yO)];const x2="link-layout",w2=t=>t.x+t.width,Aw=(t,s)=>t.x-s.width,SO=(t,s)=>t.y-s.height+t.height,xO=t=>t.y,wO=(t,s,a)=>_r(w2(t),xO(t),a.southeast(),hv(),"southeast",Js(t,{left:0,top:2}),x2),E2=(t,s,a)=>_r(Aw(t,s),xO(t),a.southwest(),YS(),"southwest",Js(t,{right:1,top:2}),x2),EO=(t,s,a)=>_r(w2(t),SO(t,s),a.northeast(),XS(),"northeast",Js(t,{left:0,bottom:3}),x2),Th=(t,s,a)=>_r(Aw(t,s),SO(t,s),a.northwest(),JS(),"northwest",Js(t,{right:1,bottom:3}),x2),W1=()=>[wO,E2,EO,Th],Ow=()=>[E2,wO,Th,EO],kO=(t,s,a)=>{const c=Sw(a,s.item.element),u=v2(t.element,s,W1(),Ow(),W1(),Ow(),S.none());return S.some(b2({anchorBox:c,bubble:gv(),overrides:s.overrides,layouts:u}))};var BI=[we("item"),gm(),oe("overrides",{}),Wn("placement",kO)],PI=Ka("type",{selection:CO,node:vO,hotspot:DI,submenu:BI,makeshift:MI});const LI=[Ya("classes",hs),Uo("mode","all",["all","layout","placement"])],II=[oe("useFixed",gn),On("getBounds")],Dw=[ki("anchor",PI),Xa("transition",LI)],TO=()=>{const t=document.documentElement;return V1(0,0,t.clientWidth,t.clientHeight)},_O=t=>{const s=$c(t.element),a=t.element.dom.getBoundingClientRect();return pI(s.left,s.top,a.width,a.height)},Mw=(t,s,a,c,u,m)=>{const f=oO(s.anchorBox,t);return AI(f,c.element,s.bubble,s.layouts,u,a,s.overrides,m)},FI=(t,s,a,c,u)=>{const m=S.none();Nw(t,s,a,c,u,m)},Nw=(t,s,a,c,u,m)=>{const f=Ma("placement.info",wt(Dw),u),p=f.anchor,b=c.element,C=a.get(c.uid);Ch(()=>{Rt(b,"position","fixed");const x=H(b,"visibility");Rt(b,"visibility","hidden");const k=s.useFixed()?TO():_O(t);p.placement(t,p,k).each(A=>{const R=m.orThunk(()=>s.getBounds.map(No)),L=Mw(k,A,R,c,C,f.transition);a.set(c.uid,L)}),x.fold(()=>{Ie(b,"visibility")},A=>{Rt(b,"visibility",A)}),H(b,"left").isNone()&&H(b,"top").isNone()&&H(b,"right").isNone()&&H(b,"bottom").isNone()&&Gr(H(b,"position"),"fixed")&&Ie(b,"position")},b)};var $I=Object.freeze({__proto__:null,position:FI,positionWithinBounds:Nw,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,c)=>{const u=c.element;ze(["position","left","right","top","bottom"],m=>Ie(u,m)),xP(u),a.clear(c.uid)}}),VI=Object.freeze({__proto__:null,init:()=>{let t={};return ei({readState:()=>t,clear:u=>{uo(u)?delete t[u]:t={}},set:(u,m)=>{t[u]=m},get:u=>Ze(t,u)})}});const Hr=gr({fields:II,name:"positioning",active:gI,apis:$I,state:VI}),Rw=(t,s)=>s.universal?t:Zn(t,a=>jn(s.channels,a));var AO=Object.freeze({__proto__:null,events:t=>ho([ve(af(),(s,a)=>{const c=t.channels,u=eo(c),m=a,f=Rw(u,m);ze(f,p=>{const b=c[p],C=b.schema,x=Ma("channel["+p+`] data
Receiver: `+Ln(s.element),C,m.data);b.onReceive(s,x)})})])}),UI=[ki("channels",vT(Ft.value,Ei([Vs("onReceive"),oe("schema",Uc())])))];const xa=gr({fields:UI,name:"receiving",active:AO});var ZI=Object.freeze({__proto__:null,events:(t,s)=>{const a=(c,u)=>{t.updateState.each(m=>{const f=m(c,u);s.set(f)}),t.renderComponents.each(m=>{const f=m(u,s.get());(t.reuseDom?Y_:Nx)(c,f)})};return ho([ve(af(),(c,u)=>{const m=u;if(!m.universal){const f=t.channel;jn(m.channels,f)&&a(c,m.data)}}),ro((c,u)=>{t.initialData.each(m=>{a(c,m)})})])}}),WI=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),jI=[we("channel"),On("renderComponents"),On("updateState"),On("initialData"),kr("reuseDom",!0)],Bw=Object.freeze({__proto__:null,init:()=>{const t=Ve(S.none()),s=()=>t.set(S.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const ni=gr({fields:jI,name:"reflecting",active:ZI,apis:WI,state:Bw}),j1=(t,s,a,c)=>{a.get().each(f=>{Ba(t)});const u=s.getAttachPoint(t);el(u,t);const m=t.getSystem().build(c);return el(t,m),a.set(m),m},OO=(t,s,a,c)=>{const u=j1(t,s,a,c);return s.onOpen(t,u),u},qI=(t,s,a,c)=>a.get().map(()=>j1(t,s,a,c)),KI=(t,s,a,c,u)=>{k2(t,s),OO(t,s,a,c),u(),RO(t,s)},DO=(t,s,a)=>{a.get().each(c=>{Ba(t),Ms(t),s.onClose(t,c),a.clear()})},MO=(t,s,a)=>a.isOpen(),YI=(t,s,a,c)=>MO(t,s,a)&&a.get().exists(u=>s.isPartOf(t,u,c)),NO=(t,s,a)=>a.get(),XI=(t,s,a,c)=>{H(t.element,s).fold(()=>{Ao(t.element,a)},u=>{Ot(t.element,a,u)}),Rt(t.element,s,c)},JI=(t,s,a)=>{Ts(t.element,a).fold(()=>Ie(t.element,s),c=>Rt(t.element,s,c))},k2=(t,s,a)=>{const c=s.getAttachPoint(t);Rt(t.element,"position",Hr.getMode(c)),XI(t,"visibility",s.cloakVisibilityAttr,"hidden")},Pf=t=>ms(["top","left","right","bottom"],s=>H(t,s).isSome()),RO=(t,s,a)=>{Pf(t.element)||Ie(t.element,"position"),JI(t,"visibility",s.cloakVisibilityAttr)};var QI=Object.freeze({__proto__:null,cloak:k2,decloak:RO,open:OO,openWhileCloaked:KI,close:DO,isOpen:MO,isPartOf:YI,getState:NO,setContent:qI}),PO=Object.freeze({__proto__:null,events:(t,s)=>ho([ve(tv(),(a,c)=>{DO(a,t,s)})])}),eF=[Cn("onOpen"),Cn("onClose"),we("isPartOf"),we("getAttachPoint"),oe("cloakVisibilityAttr","data-precloak-visibility")],LO=Object.freeze({__proto__:null,init:()=>{const t=dn(),s=ee("not-implemented");return ei({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const bn=gr({fields:eF,name:"sandboxing",active:PO,apis:QI,state:LO}),_h=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),Eu=t=>t.dimension.property,yd=(t,s)=>t.dimension.getDimension(s),T2=(t,s)=>{const a=_h(t,s);wi(a,[s.shrinkingClass,s.growingClass])},_2=(t,s)=>{fo(t.element,s.openClass),Vo(t.element,s.closedClass),Rt(t.element,Eu(s),"0px"),Vt(t.element)},Pw=(t,s)=>{fo(t.element,s.closedClass),Vo(t.element,s.openClass),Ie(t.element,Eu(s))},Ah=(t,s,a,c)=>{a.setCollapsed(),Rt(t.element,Eu(s),yd(s,t.element)),T2(t,s),_2(t,s),s.onStartShrink(t),s.onShrunk(t)},tF=(t,s,a,c)=>{const u=c.getOrThunk(()=>yd(s,t.element));a.setCollapsed(),Rt(t.element,Eu(s),u),Vt(t.element);const m=_h(t,s);fo(m,s.growingClass),Vo(m,s.shrinkingClass),_2(t,s),s.onStartShrink(t)},IO=(t,s,a)=>{const c=yd(s,t.element);(c==="0px"?Ah:tF)(t,s,a,S.some(c))},A2=(t,s,a)=>{const c=_h(t,s),u=wr(c,s.shrinkingClass),m=yd(s,t.element);Pw(t,s);const f=yd(s,t.element);(u?()=>{Rt(t.element,Eu(s),m),Vt(t.element)}:()=>{_2(t,s)})(),fo(c,s.shrinkingClass),Vo(c,s.growingClass),Pw(t,s),Rt(t.element,Eu(s),f),a.setExpanded(),s.onStartGrow(t)},Lw=(t,s,a)=>{if(a.isExpanded()){Ie(t.element,Eu(s));const c=yd(s,t.element);Rt(t.element,Eu(s),c)}},nF=(t,s,a)=>{a.isExpanded()||A2(t,s,a)},Iw=(t,s,a)=>{a.isExpanded()&&IO(t,s,a)},oF=(t,s,a)=>{a.isExpanded()&&Ah(t,s,a)},sF=(t,s,a)=>a.isExpanded(),Fw=(t,s,a)=>a.isCollapsed(),FO=(t,s,a)=>{const c=_h(t,s);return wr(c,s.growingClass)===!0},$O=(t,s,a)=>{const c=_h(t,s);return wr(c,s.shrinkingClass)===!0};var rF=Object.freeze({__proto__:null,refresh:Lw,grow:nF,shrink:Iw,immediateShrink:oF,hasGrown:sF,hasShrunk:Fw,isGrowing:FO,isShrinking:$O,isTransitioning:(t,s,a)=>FO(t,s)||$O(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?IO:A2)(t,s,a)},disableTransitions:T2,immediateGrow:(t,s,a)=>{a.isExpanded()||(Pw(t,s),Rt(t.element,Eu(s),yd(s,t.element)),T2(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),aF=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const c=s.expanded;return Jc(c?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:sf(s.dimension.property,"0px")})},events:(t,s)=>ho([ch(Kg(),(a,c)=>{c.event.raw.propertyName===t.dimension.property&&(T2(a,t),s.isExpanded()&&Ie(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),iF=[we("closedClass"),we("openClass"),we("shrinkingClass"),we("growingClass"),On("getAnimationRoot"),Cn("onShrunk"),Cn("onStartShrink"),Cn("onGrown"),Cn("onStartGrow"),oe("expanded",!1),ki("dimension",Ka("property",{width:[Wn("property","width"),Wn("getDimension",t=>As(t)+"px")],height:[Wn("property","height"),Wn("getDimension",t=>on(t)+"px")]}))],cF=Object.freeze({__proto__:null,init:t=>{const s=Ve(t.expanded),a=()=>"expanded: "+s.get();return ei({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:hn(s.set,!1),setExpanded:hn(s.set,!0),readState:a})}});const oa=gr({fields:iF,name:"sliding",active:aF,apis:rF,state:cF});var lF=Object.freeze({__proto__:null,events:(t,s)=>{const c=t.stream.streams.setup(t,s);return ho([ve(t.event,c),Dl(()=>s.cancel())].concat(t.cancelEvent.map(u=>[ve(u,()=>s.cancel())]).getOr([])))}});const HO=t=>{const s=Ve(null);return ei({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:m=>{s.set(m)},cancel:()=>{const m=s.get();m!==null&&m.cancel()}})};var dF=Object.freeze({__proto__:null,throttle:HO,init:t=>t.stream.streams.state(t)});const mF=(t,s)=>{const a=t.stream,c=xl(t.onStream,a.delay);return s.setTimer(c),(u,m)=>{c.throttle(u,m),a.stopEvent&&m.stop()}};var fF=[ki("stream",Ka("mode",{throttle:[we("delay"),oe("stopEvent",!0),Wn("streams",{setup:mF,state:HO})]})),oe("event","input"),On("cancelEvent"),Vs("onStream")];const $w=gr({fields:fF,name:"streaming",active:lF,state:dF});var gF=Object.freeze({__proto__:null,exhibit:(t,s)=>Jc({attributes:qg([{key:s.tabAttr,value:"true"}])})}),Hw=[oe("tabAttr","data-alloy-tabstop")];const Yn=gr({fields:Hw,name:"tabstopping",active:gF}),hF=(t,s,a)=>{const c=s.aria;c.update(t,c,a.get())},pF=(t,s,a)=>{s.toggleClass.each(c=>{a.get()?Vo(t.element,c):fo(t.element,c)})},G1=(t,s,a,c)=>{const u=a.get();a.set(c),pF(t,s,a),hF(t,s,a),u!==c&&s.onToggled(t,c)},VO=(t,s,a)=>{G1(t,s,a,!a.get())},bF=(t,s,a)=>{G1(t,s,a,!0)},vF=(t,s,a)=>{G1(t,s,a,!1)},yF=(t,s,a)=>a.get(),zO=(t,s,a)=>{G1(t,s,a,s.selected)};var CF=Object.freeze({__proto__:null,onLoad:zO,toggle:VO,isOn:yF,on:bF,off:vF,set:G1}),SF=Object.freeze({__proto__:null,exhibit:()=>Jc({}),events:(t,s)=>{const a=PP(t,s,VO),c=dx(t,s,zO);return ho(At([t.toggleOnExecute?[a]:[],[c]]))}});const UO=(t,s,a)=>{Ot(t.element,"aria-pressed",a),s.syncWithExpanded&&ZO(t,s,a)},xF=(t,s,a)=>{Ot(t.element,"aria-selected",a)},wF=(t,s,a)=>{Ot(t.element,"aria-checked",a)},ZO=(t,s,a)=>{Ot(t.element,"aria-expanded",a)};var O2=[oe("selected",!1),On("toggleClass"),oe("toggleOnExecute",!0),Cn("onToggled"),Gc("aria",{mode:"none"},Ka("mode",{pressed:[oe("syncWithExpanded",!1),Wn("update",UO)],checked:[Wn("update",wF)],expanded:[Wn("update",ZO)],selected:[Wn("update",xF)],none:[Wn("update",re)]}))];const Ut=gr({fields:O2,name:"toggling",active:SF,apis:CF,state:HP(!1)}),D2=Ue("tooltip.exclusive"),q1=Ue("tooltip.show"),K1=Ue("tooltip.hide"),Y1=Ue("tooltip.immediateHide"),Lf=Ue("tooltip.immediateShow"),Vw=(t,s,a)=>{t.getSystem().broadcastOn([D2],{})};var Uw=Object.freeze({__proto__:null,hideAllExclusive:Vw,immediateOpenClose:(t,s,a,c)=>rn(t,c?Lf:Y1),isEnabled:(t,s,a)=>a.isEnabled(),setComponents:(t,s,a,c)=>{a.getTooltip().each(u=>{u.getSystem().isConnected()&&Nt.set(u,c)})},setEnabled:(t,s,a,c)=>a.setEnabled(c)}),kF=Object.freeze({__proto__:null,events:(t,s)=>{const a=f=>{s.getTooltip().each(p=>{p.getSystem().isConnected()&&(Ms(p),t.onHide(f,p),s.clearTooltip())}),s.clearTimer()},c=f=>{if(!s.isShowing()&&s.isEnabled()){Vw(f);const p=t.lazySink(f).getOrDie(),b=f.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:ho(t.mode==="normal"?[ve(Kc(),C=>{rn(f,q1)}),ve(Jp(),C=>{rn(f,K1)})]:[]),behaviours:Ae([Nt.config({})])});s.setTooltip(b),el(p,b),t.onShow(f,b),Hr.position(p,b,{anchor:t.anchor(f)})}},u=f=>{s.getTooltip().each(p=>{const b=t.lazySink(f).getOrDie();Hr.position(b,p,{anchor:t.anchor(f)})})},m=()=>{switch(t.mode){case"normal":return[ve(Lr(),f=>{rn(f,Lf)}),ve(e1(),f=>{rn(f,Y1)}),ve(Kc(),f=>{rn(f,q1)}),ve(Jp(),f=>{rn(f,K1)})];case"follow-highlight":return[ve(ov(),(f,p)=>{rn(f,q1)}),ve(RS(),f=>{rn(f,K1)})];case"children-normal":return[ve(Lr(),(f,p)=>{Sr(f.element).each(b=>{ju(p.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{rn(f,Lf)},C=>{s.isShowing()&&(t.onShow(f,C),u(f))})})}),ve(e1(),f=>{Sr(f.element).fold(()=>{rn(f,Y1)},re)}),ve(Kc(),f=>{qn(f.element,"[data-mce-tooltip]:hover").each(p=>{s.getTooltip().fold(()=>{rn(f,q1)},b=>{s.isShowing()&&(t.onShow(f,b),u(f))})})}),ve(Jp(),f=>{qn(f.element,"[data-mce-tooltip]:hover").fold(()=>{rn(f,K1)},re)})];default:return[ve(Lr(),(f,p)=>{Sr(f.element).each(b=>{ju(p.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{rn(f,Lf)},C=>{s.isShowing()&&(t.onShow(f,C),u(f))})})}),ve(e1(),f=>{Sr(f.element).fold(()=>{rn(f,Y1)},re)})]}};return ho(At([[lx(f=>{t.onSetup(f)}),ve(q1,f=>{s.resetTimer(()=>{c(f)},t.delayForShow())}),ve(K1,f=>{s.resetTimer(()=>{a(f)},t.delayForHide())}),ve(Lf,f=>{s.resetTimer(()=>{c(f)},0)}),ve(Y1,f=>{s.resetTimer(()=>{a(f)},0)}),ve(af(),(f,p)=>{const b=p;b.universal||jn(b.channels,D2)&&a(f)}),Dl(f=>{a(f)})],m()]))}}),TF=[we("lazySink"),we("tooltipDom"),oe("exclusive",!0),oe("tooltipComponents",[]),co("delayForShow",ee(300)),co("delayForHide",ee(100)),co("onSetup",re),Uo("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),oe("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:ee([us,Ds,Yo,fr,ls,zs]),onRtl:ee([us,Ds,Yo,fr,ls,zs])},bubble:Fr(0,-2,{})})),Cn("onHide"),Cn("onShow")],X1=Object.freeze({__proto__:null,init:()=>{const t=Ve(!0),s=dn(),a=dn(),c=()=>{s.on(clearTimeout)},u=(f,p)=>{c(),s.set(setTimeout(f,p))},m=ee("not-implemented");return ei({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:c,resetTimer:u,readState:m,isEnabled:()=>t.get(),setEnabled:f=>t.set(f)})}});const bo=gr({fields:TF,name:"tooltipping",active:kF,state:X1,apis:Uw});var AF=Object.freeze({__proto__:null,events:()=>ho([JT(_T(),ct)]),exhibit:()=>Jc({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const If=gr({fields:[],name:"unselecting",active:AF}),Zw=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return Qo(s,(a,c)=>c.name==="class"?a:{...a,[c.name]:c.value},{})},OF=t=>Array.prototype.slice.call(t.dom.classList,0),ku=t=>{const s=ne.fromHtml(t),a=Rr(s),c=Zw(s),u=OF(s),m=a.length===0?{}:{innerHtml:$g(s)};return{tag:Gi(s),classes:u,attributes:c,...m}},Tn=t=>{const s=MA(t)&&ir(t,"uid")?t.uid:Sh("memento");return{get:m=>m.getSystem().getByUid(s).getOrDie(),getOpt:m=>m.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}},Zs=pP,Nl=WS,Tu=ee("dismiss.popups"),pm=ee("reposition.popups"),Ww=ee("mouse.released"),DF=(t,s)=>{const a=Ve(!1),c=Ve(!1);return{stop:()=>{a.set(!0)},cut:()=>{c.set(!0)},isStopped:a.get,isCut:c.get,event:t,setSource:s.set,getSource:s.get}},MF=t=>{const s=Ve(!1);return{stop:()=>{s.set(!0)},cut:re,isStopped:s.get,isCut:gn,event:t,setSource:jt("Cannot set source of a broadcasted event"),getSource:jt("Cannot get source of a broadcasted event")}},NF=t=>t.raw.which===ZP[0]&&!jn(["input","textarea"],Gi(t.target))&&!Up(t.target,'[contenteditable="true"]'),GO=(t,s)=>{const a={stopBackspace:!0,...s},c=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],u=iP(a),m=ke(c.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),R=>Ys(t,R,L=>{u.fireIfReady(L,R).each(j=>{j&&L.kill()}),a.triggerEvent(R,L)&&L.kill()})),f=dn(),p=Ys(t,"paste",R=>{u.fireIfReady(R,"paste").each(z=>{z&&R.kill()}),a.triggerEvent("paste",R)&&R.kill(),f.set(setTimeout(()=>{a.triggerEvent(DS(),R)},0))}),b=Ys(t,"keydown",R=>{a.triggerEvent("keydown",R)?R.kill():a.stopBackspace&&NF(R)&&R.prevent()}),C=Ys(t,"focusin",R=>{a.triggerEvent("focusin",R)&&R.kill()}),x=dn(),k=Ys(t,"focusout",R=>{a.triggerEvent("focusout",R)&&R.kill(),x.set(setTimeout(()=>{a.triggerEvent(e1(),R)},0))});return{unbind:()=>{ze(m,R=>{R.unbind()}),b.unbind(),C.unbind(),k.unbind(),p.unbind(),f.on(clearTimeout),x.on(clearTimeout)}}},jw=(t,s)=>{const a=Ze(t,"target").getOr(s);return Ve(a)},J1=ao.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),Gw=(t,s,a,c,u,m)=>{const f=t(s,c),p=DF(a,u);return f.fold(()=>(m.logEventNoHandlers(s,c),J1.complete()),b=>{const C=b.descHandler;return xf(C)(p),p.isStopped()?(m.logEventStopped(s,b.element,C.purpose),J1.stopped()):p.isCut()?(m.logEventCut(s,b.element,C.purpose),J1.complete()):qr(b.element).fold(()=>(m.logNoParent(s,b.element,C.purpose),J1.complete()),k=>(m.logEventResponse(s,b.element,C.purpose),J1.resume(k)))})},Oh=(t,s,a,c,u,m)=>Gw(t,s,a,c,u,m).fold(ct,f=>Oh(t,s,a,f,u,m),gn),qO=(t,s,a,c,u)=>{const m=jw(a,c);return Gw(t,s,a,c,m,u)},RF=(t,s,a)=>{const c=MF(s);return ze(t,u=>{const m=u.descHandler;xf(m)(c)}),c.isStopped()},BF=(t,s,a,c)=>qw(t,s,a,a.target,c),qw=(t,s,a,c,u)=>{const m=jw(a,c);return Oh(t,s,a,c,m,u)},PF=(t,s)=>({element:t,descHandler:s}),LF=(t,s)=>({id:t,descHandler:s}),KO=()=>{const t={},s=(f,p,b)=>{jo(b,(C,x)=>{const k=t[x]!==void 0?t[x]:{};k[p]=oA(C,f),t[x]=k})},a=(f,p)=>O1(p).bind(b=>Ze(f,b)).map(b=>PF(p,b));return{registerId:s,unregisterId:f=>{jo(t,(p,b)=>{Yt(p,f)&&delete p[f]})},filterByType:f=>Ze(t,f).map(p=>Vi(p,(b,C)=>LF(C,b))).getOr([]),find:(f,p,b)=>Ze(t,p).bind(C=>Zp(b,x=>a(C,x),f))}},YO=()=>{const t=KO(),s={},a=C=>{const x=C.element;return O1(x).getOrThunk(()=>q7("uid-",C.element))},c=(C,x)=>{const k=s[x];if(k===C)m(C);else throw new Error('The tagId "'+x+'" is already used by: '+Ln(k.element)+`
Cannot use it for: `+Ln(C.element)+`
The conflicting element is`+(Ko(k.element)?" ":" not ")+"already in the DOM")},u=C=>{const x=a(C);ir(s,x)&&c(C,x);const k=[C];t.registerId(k,x,C.events),s[x]=C},m=C=>{O1(C.element).each(x=>{delete s[x],t.unregisterId(x)})};return{find:(C,x,k)=>t.find(C,x,k),filter:C=>t.filterByType(C),register:u,unregister:m,getById:C=>Ze(s,C)}},M2=t=>{const s=V=>qr(t.element).fold(ct,q=>Bn(V,q)),a=YO(),c=(V,q)=>a.find(s,V,q),u=GO(t.element,{triggerEvent:(V,q)=>PS(V,q.target,K=>BF(c,V,q,K))}),m={debugInfo:ee("real"),triggerEvent:(V,q,K)=>{PS(V,q,ie=>qw(c,V,K,q,ie))},triggerFocus:(V,q)=>{O1(V).fold(()=>{ss(V)},K=>{PS(hu(),V,ie=>(qO(c,hu(),{originator:q,kill:re,prevent:re,target:V},V,ie),!1))})},triggerEscape:(V,q)=>{m.triggerEvent("keydown",V.element,q.event)},getByUid:V=>z(V),getByDom:V=>j(V),build:$r,buildOrPatch:Yv,addToGui:V=>{b(V)},removeFromGui:V=>{C(V)},addToWorld:V=>{f(V)},removeFromWorld:V=>{p(V)},broadcast:V=>{A(V)},broadcastOn:(V,q)=>{R(V,q)},broadcastEvent:(V,q)=>{L(V,q)},isConnected:ct},f=V=>{V.connect(m),Gu(V.element)||(a.register(V),ze(V.components(),f),m.triggerEvent(lf(),V.element,{target:V.element}))},p=V=>{Gu(V.element)||(ze(V.components(),p),a.unregister(V)),V.disconnect()},b=V=>{el(t,V)},C=V=>{Ms(V)},x=()=>{u.unbind(),Fc(t.element)},k=V=>{const q=a.filter(af());ze(q,K=>{const ie=K.descHandler;xf(ie)(V)})},A=V=>{k({universal:!0,data:V})},R=(V,q)=>{k({universal:!1,channels:V,data:q})},L=(V,q)=>{const K=a.filter(V);return RF(K,q)},z=V=>a.getById(V).fold(()=>Ft.error(new Error('Could not find component with uid: "'+V+'" in system.')),Ft.value),j=V=>{const q=O1(V).getOr("not found");return z(q)};return f(t),{root:t,element:t.element,destroy:x,add:b,remove:C,getByUid:z,getByDom:j,addToWorld:f,removeFromWorld:p,broadcast:A,broadcastOn:R,broadcastEvent:L}},Kw=()=>{const t=(s,a)=>{a.stop(),pf(s)};return[ve(Qd(),t),ve(cf(),t),cm(ed()),cm(Ja())]},N2=t=>{const s=a=>md((c,u)=>{a(c),u.stop()});return ho(At([t.map(s).toArray(),Kw()]))},er=Di({name:"Button",factory:t=>{const s=N2(t.action),a=t.dom.tag,c=m=>Ze(t.dom,"attributes").bind(f=>Ze(f,m)),u=()=>{if(a==="button"){const m=c("type").getOr("button"),f=c("role").map(p=>({role:p})).getOr({});return{type:m,...f}}else return{role:t.role.getOr(c("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:nl.augment(t.buttonBehaviours,[St.config({}),nt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:u()},eventOrder:t.eventOrder}},configFields:[oe("uid",void 0),we("dom"),oe("components",[]),nl.field("buttonBehaviours",[St,nt]),On("action"),On("role"),oe("eventOrder",{})]}),Yw=ee([oe("shell",!1),we("makeItem"),oe("setupItem",re),nl.field("listBehaviours",[Nt])]),JO=bs({name:"items",overrides:()=>({behaviours:Ae([Nt.config({})])})}),QO=ee([JO]),e5=ee("CustomList"),IF=(t,s,a,c)=>{const u=(p,b)=>{f(p).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},C=>{const x=Nt.contents(C),k=b.length,A=k-x.length,R=A>0?Hn(A,()=>t.makeItem()):[],L=x.slice(k);ze(L,j=>Nt.remove(C,j)),ze(R,j=>Nt.append(C,j));const z=Nt.contents(C);ze(z,(j,V)=>{t.setupItem(p,j,b[V],V)})})},m=t.shell?{behaviours:[Nt.config({})],components:[]}:{behaviours:[],components:s},f=p=>t.shell?S.some(p):Kn(p,t,"items");return{uid:t.uid,dom:t.dom,components:m.components,behaviours:hr(t.listBehaviours,m.behaviours),apis:{setItems:u}}},R2=na({name:e5(),configFields:Yw(),partFields:QO(),factory:IF,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),Q1="aria-controls",t5=t=>Qk(t,a=>{if(!Oa(a))return!1;const c=ks(a,"id");return c!==void 0&&c.indexOf(Q1)>-1}).bind(a=>{const c=ks(a,"id"),u=Fs(a);return qn(u,`[${Q1}="${c}"]`)}),Xw=()=>{const t=Ue(Q1);return{id:t,link:c=>{Ot(c,Q1,t)},unlink:c=>{Ao(c,Q1)}}},Ff=(t,s)=>t5(s).exists(a=>$f(t,a)),$f=(t,s)=>fS(s,a=>Bn(a,t.element),gn)||Ff(t,s),B2="alloy.item-hover",e0="alloy.item-focus",n5="alloy.item-toggled",Jw=t=>{(Sr(t.element).isNone()||St.isFocused(t))&&(St.isFocused(t)||St.focus(t),mt(t,B2,{item:t}))},Qw=t=>{mt(t,e0,{item:t})},o5=(t,s)=>{mt(t,n5,{item:t,state:s})},P2=ee(B2),s5=ee(e0),FF=ee(n5),r5=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),$t),a5=(t,s)=>({aria:{mode:s?"selected":"checked"},...pi(t,(a,c)=>c!=="exclusive"),onToggled:(a,c)=>{Cs(t.onToggled)&&t.onToggled(a,c),o5(a,c)}}),i5=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:r5(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:nl.augment(t.itemBehaviours,[t.toggling.fold(Ut.revoke,s=>Ut.config(a5(s,t.role.exists(a=>a==="option")))),St.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{Qw(s)}}),nt.config({mode:"execution"}),We.config({store:{mode:"memory",initialValue:t.data}}),Dt("item-type-events",[...Kw(),ve(Kc(),Jw),ve(Yg(),St.focus)])]),components:t.components,eventOrder:t.eventOrder});var HF=[we("data"),we("components"),we("dom"),oe("hasSubmenu",!1),On("toggling"),On("role"),nl.field("itemBehaviours",[Ut,St,nt,We]),oe("ignoreFocus",!1),oe("domModification",{}),Wn("builder",i5),oe("eventOrder",{})];const c5=t=>({dom:t.dom,components:t.components,events:ho([QT(Yg())])});var VF=[we("dom"),we("components"),Wn("builder",c5)];const e4=ee("item-widget"),t4=ee([Os({name:"widget",overrides:t=>({behaviours:Ae([We.config({store:{mode:"manual",getValue:s=>t.data,setValue:re}})])})})]),l5=t=>{const s=sm(e4(),t,t4()),a=id(e4(),t,s.internals()),c=m=>Kn(m,t,"widget").map(f=>(nt.focusIn(f),f)),u=(m,f)=>fh(f.event.target)?S.none():(t.autofocus&&f.setSource(m.element),S.none());return{dom:t.dom,components:a,domModification:t.domModification,events:ho([md((m,f)=>{c(m).each(p=>{f.stop()})}),ve(Kc(),Jw),ve(Yg(),(m,f)=>{t.autofocus?c(m):St.focus(m)})]),behaviours:nl.augment(t.widgetBehaviours,[We.config({store:{mode:"memory",initialValue:t.data}}),St.config({ignore:t.ignoreFocus,onFocus:m=>{Qw(m)}}),nt.config({mode:"special",focusIn:t.autofocus?m=>{c(m)}:Dv(),onLeft:u,onRight:u,onEscape:(m,f)=>!St.isFocused(m)&&!t.autofocus?(St.focus(m),S.some(!0)):(t.autofocus&&f.setSource(m.element),S.none())})])}};var u5=[we("uid"),we("data"),we("components"),we("dom"),oe("autofocus",!1),oe("ignoreFocus",!1),nl.field("widgetBehaviours",[We,St,nt]),oe("domModification",{}),mv(t4()),Wn("builder",l5)];const zF=Ka("type",{widget:u5,item:HF,separator:VF}),UF=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),ZF=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),WF=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),jF=ee([r1({factory:{sketch:t=>{const s=Ma("menu.spec item",zF,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>Yt(s,"uid")?s:{...s,uid:Sh("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),I2=ee([is("role"),we("value"),we("items"),we("dom"),we("components"),oe("eventOrder",{}),Us("menuBehaviours",[kn,We,an,nt]),Gc("movement",{mode:"menu",moveOnTab:!0},Ka("mode",{grid:[Qg(),Wn("config",UF)],matrix:[Wn("config",ZF),we("rowSelector"),oe("previousSelector",S.none)],menu:[oe("moveOnTab",!0),Wn("config",WF)]})),cG(),oe("fakeFocus",!1),oe("focusManager",fx()),Cn("onHighlight"),Cn("onDehighlight"),oe("showMenuRole",!0)]),d5=ee("alloy.menu-focus"),m5=(t,s)=>{const a=go(t.element,'[role="menuitemradio"][aria-checked="true"]');ze(a,c=>{Bn(c,s.element)||t.getSystem().getByDom(c).each(u=>{Ut.off(u)})})},GF=(t,s,a,c)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:hr(t.menuBehaviours,[kn.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),We.config({store:{mode:"memory",initialValue:t.value}}),an.config({find:S.some}),nt.config(t.movement.config(t,t.movement))]),events:ho([ve(s5(),(u,m)=>{const f=m.event;u.getSystem().getByDom(f.target).each(p=>{kn.highlight(u,p),m.stop(),mt(u,d5(),{menu:u,item:p})})}),ve(P2(),(u,m)=>{const f=m.event.item;kn.highlight(u,f)}),ve(FF(),(u,m)=>{const{item:f,state:p}=m.event;p&&ks(f.element,"role")==="menuitemradio"&&m5(u,f)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),_u=na({name:"Menu",configFields:I2(),partFields:jF(),factory:GF}),f5=t=>Za(t,(s,a)=>({k:s,v:a})),g5=(t,s,a,c)=>Ze(a,c).bind(u=>Ze(t,u).bind(m=>{const f=g5(t,s,a,m);return S.some([m].concat(f))})).getOr([]),h5=(t,s)=>{const a={};jo(t,(f,p)=>{ze(f,b=>{a[b]=p})});const c=s,u=f5(s),m=Gn(u,(f,p)=>[p].concat(g5(a,c,u,p)));return Gn(a,f=>Ze(m,f).getOr([f]))},p5=()=>{const t=Ve({}),s=Ve({}),a=Ve({}),c=dn(),u=Ve({}),m=()=>{t.set({}),s.set({}),a.set({}),c.clear()},f=()=>c.get().isNone(),p=(me,He)=>{s.set({...s.get(),[me]:{type:"prepared",menu:He}})},b=(me,He,Te,fe)=>{c.set(me),t.set(Te),s.set(He),u.set(fe);const je=h5(fe,Te);a.set(je)},C=me=>ws(t.get(),(He,Te)=>He===me),x=(me,He,Te)=>z(me).bind(fe=>C(me).bind(je=>He(je).map(pt=>({triggeredMenu:fe,triggeringItem:pt,triggeringPath:Te})))),k=(me,He)=>{const Te=Zn(V(me).toArray(),fe=>z(fe).isSome());return Ze(a.get(),me).bind(fe=>{const je=ma(Te.concat(fe)),pt=pe(je,(rt,Qt)=>x(rt,He,je.slice(0,Qt+1)).fold(()=>Gr(c.get(),rt)?[]:[S.none()],Et=>[S.some(Et)]));return $m(pt)})},A=me=>Ze(t.get(),me).map(He=>{const Te=Ze(a.get(),me).getOr([]);return[He].concat(Te)}),R=me=>Ze(a.get(),me).bind(He=>He.length>1?S.some(He.slice(1)):S.none()),L=me=>Ze(a.get(),me),z=me=>j(me).bind(n4),j=me=>Ze(s.get(),me),V=me=>Ze(t.get(),me);return{setMenuBuilt:p,setContents:b,expand:A,refresh:L,collapse:R,lookupMenu:j,lookupItem:V,otherMenus:me=>{const He=u.get();return et(eo(He),me)},getPrimary:()=>c.get().bind(z),getMenus:()=>s.get(),clear:m,isClear:f,getTriggeringPath:k}},n4=t=>t.type==="prepared"?S.some(t.menu):S.none(),o4={init:p5,extractPreparedMenu:n4},b5=Ue("tiered-menu-item-highlight"),v5=Ue("tiered-menu-item-dehighlight"),qF=(t,s)=>{const a=dn(),c=(xe,Be,yt)=>Gn(yt,(It,dt)=>{const Bt=()=>_u.sketch({...It,value:dt,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Un,Pn)=>{mt(Un,b5,{menuComp:Un,itemComp:Pn})},onDehighlight:(Un,Pn)=>{mt(Un,v5,{menuComp:Un,itemComp:Pn})},focusManager:t.fakeFocus?r7():fx()});return dt===Be?{type:"prepared",menu:xe.getSystem().build(Bt())}:{type:"notbuilt",nbMenu:Bt}}),u=o4.init(),m=xe=>{const Be=c(xe,t.data.primary,t.data.menus),yt=b();return u.setContents(t.data.primary,Be,t.data.expansions,yt),u.getPrimary()},f=xe=>We.getValue(xe).value,p=(xe,Be,yt)=>nn(Be,It=>{if(!It.getSystem().isConnected())return S.none();const dt=kn.getCandidates(It);return _t(dt,Bt=>f(Bt)===yt)}),b=xe=>Gn(t.data.menus,(Be,yt)=>pe(Be.items,It=>It.type==="separator"?[]:[It.data.value])),C=kn.highlight,x=(xe,Be)=>{C(xe,Be),kn.getHighlighted(Be).orThunk(()=>kn.getFirst(Be)).each(yt=>{t.fakeFocus?kn.highlight(Be,yt):f1(xe,yt.element,Yg())})},k=(xe,Be)=>Ui(ke(Be,yt=>xe.lookupMenu(yt).bind(It=>It.type==="prepared"?S.some(It.menu):S.none()))),A=(xe,Be,yt)=>{const It=k(Be,Be.otherMenus(yt));ze(It,dt=>{wi(dt.element,[t.markers.backgroundMenu]),t.stayInDom||Nt.remove(xe,dt)})},R=xe=>a.get().getOrThunk(()=>{const Be={},yt=go(xe.element,`.${t.markers.item}`),It=Zn(yt,dt=>ks(dt,"aria-haspopup")==="true");return ze(It,dt=>{xe.getSystem().getByDom(dt).each(Bt=>{const Un=f(Bt);Be[Un]=Bt})}),a.set(Be),Be}),L=(xe,Be)=>{const yt=R(xe);jo(yt,(It,dt)=>{const Bt=jn(Be,dt);Ot(It.element,"aria-expanded",Bt)})},z=(xe,Be,yt)=>S.from(yt[0]).bind(It=>Be.lookupMenu(It).bind(dt=>{if(dt.type==="notbuilt")return S.none();{const Bt=dt.menu,Un=k(Be,yt.slice(1));return ze(Un,Pn=>{Vo(Pn.element,t.markers.backgroundMenu)}),Ko(Bt.element)||Nt.append(xe,Ai(Bt)),wi(Bt.element,[t.markers.backgroundMenu]),x(xe,Bt),A(xe,Be,yt),S.some(Bt)}}));let j;(function(xe){xe[xe.HighlightSubmenu=0]="HighlightSubmenu",xe[xe.HighlightParent=1]="HighlightParent"})(j||(j={}));const V=(xe,Be,yt)=>{if(yt.type==="notbuilt"){const It=xe.getSystem().build(yt.nbMenu());return u.setMenuBuilt(Be,It),It}else return yt.menu},q=(xe,Be,yt=j.HighlightSubmenu)=>{if(Be.hasConfigured(st)&&st.isDisabled(Be))return S.some(Be);{const It=f(Be);return u.expand(It).bind(dt=>(L(xe,dt),S.from(dt[0]).bind(Bt=>u.lookupMenu(Bt).bind(Un=>{const Pn=V(xe,Bt,Un);return Ko(Pn.element)||Nt.append(xe,Ai(Pn)),t.onOpenSubmenu(xe,Be,Pn,ma(dt)),yt===j.HighlightSubmenu?(kn.highlightFirst(Pn),z(xe,u,dt)):(kn.dehighlightAll(Pn),S.some(Be))}))))}},K=(xe,Be)=>{const yt=f(Be);return u.collapse(yt).bind(It=>(L(xe,It),z(xe,u,It).map(dt=>(t.onCollapseMenu(xe,Be,dt),dt))))},ie=(xe,Be)=>{const yt=f(Be);return u.refresh(yt).bind(It=>(L(xe,It),z(xe,u,It)))},me=(xe,Be)=>fh(Be.element)?S.none():q(xe,Be,j.HighlightSubmenu),He=(xe,Be)=>fh(Be.element)?S.none():K(xe,Be),Te=(xe,Be)=>K(xe,Be).orThunk(()=>t.onEscape(xe,Be).map(()=>xe)),fe=xe=>(Be,yt)=>lu(yt.getSource(),`.${t.markers.item}`).bind(It=>Be.getSystem().getByDom(It).toOptional().bind(dt=>xe(Be,dt).map(ct))),je=ho([ve(d5(),(xe,Be)=>{const yt=Be.event.item;u.lookupItem(f(yt)).each(()=>{const It=Be.event.menu;kn.highlight(xe,It);const dt=f(Be.event.item);u.refresh(dt).each(Bt=>A(xe,u,Bt))})}),md((xe,Be)=>{const yt=Be.event.target;xe.getSystem().getByDom(yt).each(It=>{f(It).indexOf("collapse-item")===0&&K(xe,It),q(xe,It,j.HighlightSubmenu).fold(()=>{t.onExecute(xe,It)},re)})}),ro((xe,Be)=>{m(xe).each(yt=>{Nt.append(xe,Ai(yt)),t.onOpenMenu(xe,yt),t.highlightOnOpen===Ca.HighlightMenuAndItem?x(xe,yt):t.highlightOnOpen===Ca.HighlightJustMenu&&C(xe,yt)})}),ve(b5,(xe,Be)=>{t.onHighlightItem(xe,Be.event.menuComp,Be.event.itemComp)}),ve(v5,(xe,Be)=>{t.onDehighlightItem(xe,Be.event.menuComp,Be.event.itemComp)}),...t.navigateOnHover?[ve(P2(),(xe,Be)=>{const yt=Be.event.item;ie(xe,yt),q(xe,yt,j.HighlightParent),t.onHover(xe,yt)})]:[]]),pt=xe=>kn.getHighlighted(xe).bind(kn.getHighlighted),rt=xe=>{pt(xe).each(Be=>{K(xe,Be)})},Qt=xe=>{u.getPrimary().each(Be=>{x(xe,Be)})},Et=xe=>S.from(xe.components()[0]).filter(Be=>ks(Be.element,"role")==="menu"),tt={collapseMenu:rt,highlightPrimary:Qt,repositionMenus:xe=>{u.getPrimary().bind(yt=>pt(xe).bind(It=>{const dt=f(It),Bt=jl(u.getMenus()),Un=Ui(ke(Bt,o4.extractPreparedMenu));return u.getTriggeringPath(dt,Pn=>p(xe,Un,Pn))}).map(It=>({primary:yt,triggeringPath:It}))).fold(()=>{Et(xe).each(yt=>{t.onRepositionMenu(xe,yt,[])})},({primary:yt,triggeringPath:It})=>{t.onRepositionMenu(xe,yt,It)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:hr(t.tmenuBehaviours,[nt.config({mode:"special",onRight:fe(me),onLeft:fe(He),onEscape:fe(Te),focusIn:(xe,Be)=>{u.getPrimary().each(yt=>{f1(xe,yt.element,Yg())})}}),kn.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),an.config({find:xe=>kn.getHighlighted(xe)}),Nt.config({})]),eventOrder:t.eventOrder,apis:tt,events:je}},KF=ee("collapse-item"),y5=(t,s,a)=>({primary:t,menus:s,expansions:a}),C5=(t,s)=>({primary:t,menus:sf(t,s),expansions:{}}),YF=t=>({value:Ue(KF()),meta:{text:t}}),Hf=Di({name:"TieredMenu",configFields:[df("onExecute"),df("onEscape"),Vs("onOpenMenu"),Vs("onOpenSubmenu"),Cn("onRepositionMenu"),Cn("onCollapseMenu"),oe("highlightOnOpen",Ca.HighlightMenuAndItem),jc("data",[we("primary"),we("menus"),we("expansions")]),oe("fakeFocus",!1),Cn("onHighlightItem"),Cn("onDehighlightItem"),Cn("onHover"),LS(),we("dom"),oe("navigateOnHover",!0),oe("stayInDom",!1),Us("tmenuBehaviours",[nt,kn,an,Nt]),oe("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:qF,extraApis:{tieredData:y5,singleData:C5,collapseItem:YF}}),S5=ee("sink"),x5=ee(bs({name:S5(),overrides:ee({dom:{tag:"div"},behaviours:Ae([Hr.config({useFixed:ct})]),events:ho([cm(Al()),cm(Ja()),cm(Qd())])})})),XF=Ei([oe("isExtraPart",gn),Xa("fireEventInstead",[oe("event",nd())])]),s4=t=>{const s=Ma("Dismissal",XF,t);return{[Tu()]:{schema:Ei([we("target")]),onReceive:(a,c)=>{bn.isOpen(a)&&(bn.isPartOf(a,c.target)||s.isExtraPart(a,c.target)||s.fireEventInstead.fold(()=>bn.close(a),m=>rn(a,m.event)))}}}},JF=Ei([Xa("fireEventInstead",[oe("event",AT())]),Wc("doReposition")]),r4=t=>{const s=Ma("Reposition",JF,t);return{[pm()]:{onReceive:a=>{bn.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),c=>rn(a,c.event))}}}},F2=(t,s)=>{const a=t.getHotspot(s).getOr(s),c="hotspot",u=t.getAnchorOverrides();return t.layouts.fold(()=>({type:c,hotspot:a,overrides:u}),m=>({type:c,hotspot:a,overrides:u,layouts:m}))},w5=(t,s,a)=>{const c=t.fetch;return c(a).map(s)},QF=(t,s,a,c,u,m,f)=>{const p=w5(t,s,c),b=i4(c,t);return p.map(C=>C.bind(x=>{const k=x.menus[x.primary];return S.from(k).each(A=>{t.listRole.each(R=>{A.role=R})}),S.from(Hf.sketch({...m.menu(),uid:Sh(""),data:x,highlightOnOpen:f,onOpenMenu:(A,R)=>{const L=b().getOrDie();Hr.position(L,R,{anchor:a}),bn.decloak(u)},onOpenSubmenu:(A,R,L)=>{const z=b().getOrDie();Hr.position(z,L,{anchor:{type:"submenu",item:R}}),bn.decloak(u)},onRepositionMenu:(A,R,L)=>{const z=b().getOrDie();Hr.position(z,R,{anchor:a}),ze(L,j=>{Hr.position(z,j.triggeredMenu,{anchor:{type:"submenu",item:j.triggeringItem}})})},onEscape:()=>(St.focus(c),bn.close(u),S.some(!0))}))}))},$2=(t,s,a,c,u,m,f)=>{const p=F2(t,a);return QF(t,s,p,a,c,u,f).map(C=>(C.fold(()=>{bn.isOpen(c)&&bn.close(c)},x=>{bn.cloak(c),bn.open(c,x),m(c)}),c))},E5=(t,s,a,c,u,m,f)=>(bn.close(c),Ro.pure(c)),a4=(t,s,a,c,u,m)=>{const f=Lo.getCoupled(a,"sandbox");return(bn.isOpen(f)?E5:$2)(t,s,a,f,c,u,m)},e$=(t,s,a)=>{const c=an.getCurrent(s).getOr(s),u=As(t.element);a?Rt(c.element,"min-width",u+"px"):Mb(c.element,u)},i4=(t,s)=>t.getSystem().getByUid(s.uid+"-"+S5()).map(a=>()=>Ft.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Ft.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),c4=t=>{bn.getState(t).each(s=>{Hf.repositionMenus(s)})},H2=(t,s,a)=>{const c=Xw(),u=(p,b)=>{const C=F2(t,s);c.link(s.element),t.matchWidth&&e$(C.hotspot,b,t.useMinWidth),t.onOpen(C,p,b),a!==void 0&&a.onOpen!==void 0&&a.onOpen(p,b)},m=(p,b)=>{c.unlink(s.element),f().getOr(b).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(p,b)},f=i4(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:c.id}},behaviours:nl.augment(t.sandboxBehaviours,[We.config({store:{mode:"memory",initialValue:s}}),bn.config({onOpen:u,onClose:m,isPartOf:(p,b,C)=>$f(b,C)||$f(s,C),getAttachPoint:()=>f().getOrDie()}),an.config({find:p=>bn.getState(p).bind(b=>an.getCurrent(b))}),xa.config({channels:{...s4({isExtraPart:gn}),...r4({doReposition:c4})}})])}},k5=t=>{const s=Lo.getCoupled(t,"sandbox");c4(s)},l4=()=>[oe("sandboxClasses",[]),nl.field("sandboxBehaviours",[an,xa,bn,We])],t$=ee([we("dom"),we("fetch"),Cn("onOpen"),ps("onExecute"),oe("getHotspot",S.some),oe("getAnchorOverrides",ee({})),gm(),Us("dropdownBehaviours",[Ut,Lo,nt,St]),we("toggleClass"),oe("eventOrder",{}),On("lazySink"),oe("matchWidth",!1),oe("useMinWidth",!1),On("role"),On("listRole")].concat(l4())),T5=ee([Ir({schema:[LS(),oe("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),x5()]),u4=(t,s,a,c)=>{const u=x=>Ze(t.dom,"attributes").bind(k=>Ze(k,x)),m=x=>{bn.getState(x).each(k=>{Hf.highlightPrimary(k)})},f=(x,k,A)=>a4(t,$t,x,c,k,A),p=x=>{f(x,m,Ca.HighlightMenuAndItem).get(re)},b={expand:x=>{Ut.isOn(x)||f(x,re,Ca.HighlightNone).get(re)},open:x=>{Ut.isOn(x)||f(x,re,Ca.HighlightMenuAndItem).get(re)},refetch:x=>Lo.getExistingCoupled(x,"sandbox").fold(()=>f(x,re,Ca.HighlightMenuAndItem).map(re),A=>$2(t,$t,x,A,c,re,Ca.HighlightMenuAndItem).map(re)),isOpen:Ut.isOn,close:x=>{Ut.isOn(x)&&f(x,re,Ca.HighlightMenuAndItem).get(re)},repositionMenus:x=>{Ut.isOn(x)&&k5(x)}},C=(x,k)=>(pf(x),S.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:hr(t.dropdownBehaviours,[Ut.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Lo.config({others:{sandbox:x=>H2(t,x,{onOpen:()=>Ut.on(x),onClose:()=>Ut.off(x)})}}),nt.config({mode:"special",onSpace:C,onEnter:C,onDown:(x,k)=>{if(Mi.isOpen(x)){const A=Lo.getCoupled(x,"sandbox");m(A)}else Mi.open(x);return S.some(!0)},onEscape:(x,k)=>Mi.isOpen(x)?(Mi.close(x),S.some(!0)):S.none()}),St.config({})]),events:N2(S.some(p)),eventOrder:{...t.eventOrder,[_i()]:["disabling","toggling","alloy.base.behaviour"]},apis:b,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),x=>({role:x})),...t.dom.tag==="button"?{type:u("type").getOr("button")}:{}}}}},Mi=na({name:"Dropdown",configFields:t$(),partFields:T5(),factory:u4,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),_5="form",n$=[Us("formBehaviours",[We])],A5=t=>"<alloy.field."+t+">",o$=t=>{const s=(()=>{const m=[];return{field:(p,b)=>(m.push(p),jS(_5,A5(p),b)),record:ee(m)}})(),a=t(s),c=s.record(),u=ke(c,m=>Os({name:m,pname:A5(m)}));return Af(_5,n$,u,O5,a)},s$=(t,s)=>t.fold(()=>Ft.error(s),Ft.value),O5=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:hr(t.formBehaviours,[We.config({store:{mode:"manual",getValue:a=>{const c=sh(a,t);return Gn(c,(u,m)=>u().bind(f=>{const p=an.getCurrent(f);return s$(p,new Error(`Cannot find a current component to extract the value from for form part '${m}': `+Ln(f.element)))}).map(We.getValue))},setValue:(a,c)=>{jo(c,(u,m)=>{Kn(a,t,m).each(f=>{an.getCurrent(f).each(p=>{We.setValue(p,u)})})})}}})]),apis:{getField:(a,c)=>Kn(a,t,c).bind(an.getCurrent)}}),Vf={getField:yh((t,s,a)=>t.getField(s,a)),sketch:o$},Dh=ee([we("dom"),oe("shell",!0),Us("toolbarBehaviours",[Nt])]),r$=ee([bs({name:"groups",overrides:()=>({behaviours:Ae([Nt.config({})])})})]),oi=(t,s,a,c)=>{const u=(p,b)=>{m(p).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},C=>{Nt.set(C,b)})},m=p=>t.shell?S.some(p):Kn(p,t,"groups"),f=t.shell?{behaviours:[Nt.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:f.components,behaviours:hr(t.toolbarBehaviours,f.behaviours),apis:{setGroups:u,refresh:re},domModification:{attributes:{role:"group"}}}},tr=na({name:"Toolbar",configFields:Dh(),partFields:r$(),factory:oi,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),D5=ee([Jg(["toggledClass"]),we("lazySink"),Wc("fetch"),Tl("getBounds"),Xa("fireDismissalEventInstead",[oe("event",nd())]),gm(),Cn("onToggled")]),d4=ee([Ir({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Ae([Ut.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),Ir({factory:tr,schema:Dh(),name:"toolbar",overrides:t=>({toolbarBehaviours:Ae([nt.config({mode:"cyclic",onEscape:s=>(Kn(s,t,"button").each(St.focus),S.none())})])})})]),Mh=dn(),V2=(t,s)=>{Mh.set(!0),m4(t,s),Mh.clear()},m4=(t,s)=>{const a=Lo.getCoupled(t,"toolbarSandbox");bn.isOpen(a)?bn.close(a):bn.open(a,s.toolbar())},z2=(t,s,a,c)=>{const u=a.getBounds.map(f=>f()),m=a.lazySink(t).getOrDie();Hr.positionWithinBounds(m,s,{anchor:{type:"hotspot",hotspot:t,layouts:c,overrides:{maxWidthFunction:Ev()}}},u)},Nh=(t,s,a,c,u)=>{tr.setGroups(s,u),z2(t,s,a,c),Ut.on(t)},a$=(t,s,a)=>{const c=Xw(),u=(f,p)=>{const b=Mh.get().getOr(!1);a.fetch().get(C=>{Nh(t,p,a,s.layouts,C),c.link(t.element),b||nt.focusIn(p)})},m=()=>{Ut.off(t),Mh.get().getOr(!1)||St.focus(t),c.unlink(t.element)};return{dom:{tag:"div",attributes:{id:c.id}},behaviours:Ae([nt.config({mode:"special",onEscape:f=>(bn.close(f),S.some(!0))}),bn.config({onOpen:u,onClose:m,isPartOf:(f,p,b)=>$f(p,b)||$f(t,b),getAttachPoint:()=>a.lazySink(t).getOrDie()}),xa.config({channels:{...s4({isExtraPart:gn,...a.fireDismissalEventInstead.map(f=>({fireEventInstead:{event:f.event}})).getOr({})}),...r4({doReposition:()=>{bn.getState(Lo.getCoupled(t,"toolbarSandbox")).each(f=>{z2(t,f,a,s.layouts)})}})}})])}},Au=na({name:"FloatingToolbarButton",factory:(t,s,a,c)=>({...er.sketch({...c.button(),action:u=>{m4(u,c)},buttonBehaviours:nl.augment({dump:c.button().buttonBehaviours},[Lo.config({others:{toolbarSandbox:u=>a$(u,a,t)}})])}),apis:{setGroups:(u,m)=>{bn.getState(Lo.getCoupled(u,"toolbarSandbox")).each(f=>{Nh(u,f,t,a.layouts,m)})},reposition:u=>{bn.getState(Lo.getCoupled(u,"toolbarSandbox")).each(m=>{z2(u,m,t,a.layouts)})},toggle:u=>{m4(u,c)},toggleWithoutFocusing:u=>{V2(u,c)},getToolbar:u=>bn.getState(Lo.getCoupled(u,"toolbarSandbox")),isOpen:u=>bn.isOpen(Lo.getCoupled(u,"toolbarSandbox"))}}),configFields:D5(),partFields:d4(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),M5=ee([oe("prefix","form-field"),Us("fieldBehaviours",[an,We])]),t0=ee([bs({schema:[we("dom")],name:"label"}),bs({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[we("text")],name:"aria-descriptor"}),Os({factory:{sketch:t=>{const s=kT(t,["factory"]);return t.factory.sketch(s)}},schema:[we("factory")],name:"field"})]),i$=(t,s,a,c)=>{const u=hr(t.fieldBehaviours,[an.config({find:p=>Kn(p,t,"field")}),We.config({store:{mode:"manual",getValue:p=>an.getCurrent(p).bind(We.getValue),setValue:(p,b)=>{an.getCurrent(p).each(C=>{We.setValue(C,b)})}}})]),m=ho([ro((p,b)=>{const C=qS(p,t,["label","field","aria-descriptor"]);C.field().each(x=>{const k=Ue(t.prefix);C.label().each(A=>{Ot(A.element,"for",k),Ot(x.element,"id",k)}),C["aria-descriptor"]().each(A=>{const R=Ue(t.prefix);Ot(A.element,"id",R),Ot(x.element,"aria-describedby",R)})})})]),f={getField:p=>Kn(p,t,"field"),getLabel:p=>Kn(p,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:u,events:m,apis:f}},Jt=na({name:"FormField",configFields:M5(),partFields:t0(),factory:i$,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}}),Rl=ee([oe("field1Name","field1"),oe("field2Name","field2"),Vs("onLockedChange"),Jg(["lockClass"]),oe("locked",!1),nl.field("coupledFieldBehaviours",[an,We]),co("onInput",re)]),si=(t,s,a)=>Kn(t,s,a).bind(an.getCurrent),Rh=(t,s)=>Os({factory:Jt,name:t,overrides:a=>({fieldBehaviours:Ae([Dt("coupled-input-behaviour",[ve(td(),c=>{si(c,a,s).each(u=>{Kn(c,a,"lock").each(m=>{Ut.isOn(m)&&a.onLockedChange(c,u,m),a.onInput(c)})})})])])})}),ri=ee([Rh("field1","field2"),Rh("field2","field1"),Os({factory:er,schema:[we("dom")],name:"lock",overrides:t=>({buttonBehaviours:Ae([Ut.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),c$=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,behaviours:nl.augment(t.coupledFieldBehaviours,[an.config({find:S.some}),We.config({store:{mode:"manual",getValue:u=>{const m=KS(u,t,["field1","field2"]);return{[t.field1Name]:We.getValue(m.field1()),[t.field2Name]:We.getValue(m.field2())}},setValue:(u,m)=>{const f=KS(u,t,["field1","field2"]);ir(m,t.field1Name)&&We.setValue(f.field1(),m[t.field1Name]),ir(m,t.field2Name)&&We.setValue(f.field2(),m[t.field2Name])}}})]),apis:{getField1:u=>Kn(u,t,"field1"),getField2:u=>Kn(u,t,"field2"),getLock:u=>Kn(u,t,"lock")}}),zt=na({name:"FormCoupledInputs",configFields:Rl(),partFields:ri(),factory:c$,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),l$=(t,s)=>{const a=ke(t.options,u=>({dom:{tag:"option",value:u.value,innerHtml:u.text}})),c=t.data.map(u=>sf("initialValue",u)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:hr(t.selectBehaviours,[St.config({}),We.config({store:{mode:"manual",getValue:u=>Vc(u.element),setValue:(u,m)=>{const f=Ps(t.options);_t(t.options,b=>b.value===m).isSome()?Jm(u.element,m):u.element.dom.selectedIndex===-1&&m===""&&f.each(b=>Jm(u.element,b.value))},...c}})])}},zf=Di({name:"HtmlSelect",configFields:[we("options"),Us("selectBehaviours",[St,We]),oe("selectClasses",[]),oe("selectAttributes",{}),On("data")],factory:l$}),n0=(t,s,a,c,u)=>{const m=()=>t.lazySink(s),f=c.type==="horizontal"?{layouts:{onLtr:()=>ud(),onRtl:()=>sx()}}:{},p=C=>C.length===2,b=C=>p(C)?f:{};return Hf.sketch({dom:{tag:"div"},data:c.data,markers:c.menu.markers,highlightOnOpen:c.menu.highlightOnOpen,fakeFocus:c.menu.fakeFocus,onEscape:()=>(bn.close(s),t.onEscape.map(C=>C(s)),S.some(!0)),onExecute:()=>S.some(!0),onOpenMenu:(C,x)=>{Hr.positionWithinBounds(m().getOrDie(),x,a,u())},onOpenSubmenu:(C,x,k,A)=>{const R=m().getOrDie();Hr.position(R,k,{anchor:{type:"submenu",item:x,...b(A)}})},onRepositionMenu:(C,x,k)=>{const A=m().getOrDie();Hr.positionWithinBounds(A,x,a,u()),ze(k,R=>{const L=b(R.triggeringPath);Hr.position(A,R.triggeredMenu,{anchor:{type:"submenu",item:R.triggeringItem,...L}})})}})},N5=(t,s)=>{const a=(A,R)=>t.getRelated(A).exists(z=>$f(z,R)),c=(A,R)=>{bn.setContent(A,R)},u=(A,R,L)=>{const z=S.none;m(A,R,L,z)},m=(A,R,L,z)=>{const j=t.lazySink(A).getOrDie();bn.openWhileCloaked(A,R,()=>Hr.positionWithinBounds(j,A,L,z())),We.setValue(A,S.some({mode:"position",config:L,getBounds:z}))},f=(A,R,L)=>{p(A,R,L,S.none)},p=(A,R,L,z)=>{const j=n0(t,A,R,L,z);bn.open(A,j),We.setValue(A,S.some({mode:"menu",menu:j}))},b=A=>{bn.isOpen(A)&&(We.setValue(A,S.none()),bn.close(A))},C=A=>bn.getState(A),x=A=>{bn.isOpen(A)&&We.getValue(A).each(R=>{switch(R.mode){case"menu":bn.getState(A).each(Hf.repositionMenus);break;case"position":const L=t.lazySink(A).getOrDie();Hr.positionWithinBounds(L,A,R.config,R.getBounds());break}})},k={setContent:c,showAt:u,showWithinBounds:m,showMenuAt:f,showMenuWithinBounds:p,hide:b,getContent:C,reposition:x,isOpen:bn.isOpen};return{uid:t.uid,dom:t.dom,behaviours:hr(t.inlineBehaviours,[bn.config({isPartOf:(A,R,L)=>$f(R,L)||a(A,L),getAttachPoint:A=>t.lazySink(A).getOrDie(),onOpen:A=>{t.onShow(A)},onClose:A=>{t.onHide(A)}}),We.config({store:{mode:"memory",initialValue:S.none()}}),xa.config({channels:{...s4({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(A=>({fireEventInstead:{event:A.event}})).getOr({})}),...r4({...t.fireRepositionEventInstead.map(A=>({fireEventInstead:{event:A.event}})).getOr({}),doReposition:x})}})]),eventOrder:t.eventOrder,apis:k}},vo=Di({name:"InlineView",configFields:[we("lazySink"),Cn("onShow"),Cn("onHide"),Tl("onEscape"),Us("inlineBehaviours",[bn,We,xa]),Xa("fireDismissalEventInstead",[oe("event",nd())]),Xa("fireRepositionEventInstead",[oe("event",AT())]),oe("getRelated",S.none),oe("isExtraPart",gn),oe("eventOrder",S.none)],factory:N5,apis:{showAt:(t,s,a,c)=>{t.showAt(s,a,c)},showWithinBounds:(t,s,a,c,u)=>{t.showWithinBounds(s,a,c,u)},showMenuAt:(t,s,a,c)=>{t.showMenuAt(s,a,c)},showMenuWithinBounds:(t,s,a,c,u)=>{t.showMenuWithinBounds(s,a,c,u)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}}),U2=ee([so("type","text"),On("data"),oe("inputAttributes",{}),oe("inputStyles",{}),oe("tag","input"),oe("inputClasses",[]),Cn("onSetValue"),co("fromInputValue",$t),co("toInputValue",$t),oe("styles",{}),oe("eventOrder",{}),Us("inputBehaviours",[We,St]),oe("selectOnFocus",!0)]),R5=t=>Ae([St.config({onFocus:t.selectOnFocus?s=>{const a=s.element,c=Vc(a);t.type!=="range"&&a.dom.setSelectionRange(0,c.length)}:re})]),g4=t=>({...R5(t),...hr(t.inputBehaviours,[We.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>t.fromInputValue(Vc(s.element)),setValue:(s,a)=>{Vc(s.element)!==a&&Jm(s.element,t.toInputValue(a))}},onSetValue:t.onSetValue})])}),B5=t=>({tag:t.tag,attributes:{type:t.type,...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),P5=(t,s)=>({uid:t.uid,dom:B5(t),components:[],behaviours:g4(t),eventOrder:t.eventOrder}),Ou=Di({name:"Input",configFields:U2(),factory:P5}),o0=oh(e4(),t4()),L5=(t,s)=>{const a=Ts(t,"id").fold(()=>{const c=Ue("dialog-label");return Ot(s,"id",c),c},$t);Ot(t,"aria-labelledby",a)},Z2=ee([we("lazySink"),On("dragBlockClass"),co("getBounds",Pr),oe("useTabstopAt",ct),oe("firstTabstop",0),oe("eventOrder",{}),Us("modalBehaviours",[nt]),ps("onExecute"),df("onEscape")]),h4={sketch:$t},u$=ee([bs({name:"draghandle",overrides:(t,s)=>({behaviours:Ae([Of.config({mode:"mouse",getTarget:a=>Hc(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Os({schema:[we("dom")],name:"title"}),Os({factory:h4,schema:[we("dom")],name:"close"}),Os({factory:h4,schema:[we("dom")],name:"body"}),bs({factory:h4,schema:[we("dom")],name:"footer"}),Ir({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[oe("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),oe("components",[])],name:"blocker"})]),d$=(t,s,a,c)=>{const u=dn(),m=L=>{u.set(L);const z=t.lazySink(L).getOrDie(),j=c.blocker(),V=z.getSystem().build({...j,components:j.components.concat([Ai(L)]),behaviours:Ae([St.config({}),Dt("dialog-blocker-events",[ch(Lr(),()=>{tl.isBlocked(L)?re():nt.focusIn(L)})])])});el(z,V),nt.focusIn(L)},f=L=>{u.clear(),qr(L.element).each(z=>{L.getSystem().getByDom(z).each(j=>{Ms(j)})})},p=L=>rm(L,t,"body"),b=L=>Kn(L,t,"footer"),C=(L,z)=>{tl.block(L,z)},x=L=>{tl.unblock(L)},k=Ue("modal-events"),A={...t.eventOrder,[ec()]:[k].concat(t.eventOrder["alloy.system.attached"]||[])},R=va();return{uid:t.uid,dom:t.dom,components:s,apis:{show:m,hide:f,getBody:p,getFooter:b,setIdle:x,setBusy:C},eventOrder:A,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:hr(t.modalBehaviours,[Nt.config({}),nt.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),tl.config({getRoot:u.get}),Dt(k,[ro(L=>{const z=rm(L,t,"title").element,j=yB(z);R.os.isMacOS()&&uo(j)?Ot(L.element,"aria-label",j):L5(L.element,z)})])])}},Ns=na({name:"ModalDialog",configFields:Z2(),partFields:u$(),factory:d$,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),m$=bs({schema:[we("dom")],name:"label"}),Sd=t=>bs({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),c=>({events:ho([cx(ed(),(u,m,f)=>c(u,f),[s]),cx(Ja(),(u,m,f)=>c(u,f),[s]),cx(Xp(),(u,m,f)=>{f.mouseIsDown.get()&&c(u,f)},[s])])}))}),f$=Sd("top-left"),g$=Sd("top"),I5=Sd("top-right"),h$=Sd("right"),F5=Sd("bottom-right"),s0=Sd("bottom"),p$=Sd("bottom-left"),b$=Sd("left"),$5=Os({name:"thumb",defaults:ee({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:ho([ih(ed(),t,"spectrum"),ih(Jd(),t,"spectrum"),ih(_l(),t,"spectrum"),ih(Ja(),t,"spectrum"),ih(Xp(),t,"spectrum"),ih(ev(),t,"spectrum")])})}),r0=t=>lm(t.event),p4=Os({schema:[ea("mouseIsDown",()=>Ve(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,c=(u,m)=>a.getValueFromEvent(m).map(f=>a.setValueFrom(u,t,f));return{behaviours:Ae([nt.config({mode:"special",onLeft:(u,m)=>a.onLeft(u,t,r0(m)),onRight:(u,m)=>a.onRight(u,t,r0(m)),onUp:(u,m)=>a.onUp(u,t,r0(m)),onDown:(u,m)=>a.onDown(u,t,r0(m))}),Yn.config({}),St.config({})]),events:ho([ve(ed(),c),ve(Jd(),c),ve(Ja(),c),ve(Xp(),(u,m)=>{t.mouseIsDown.get()&&c(u,m)})])}}});var H5=[m$,b$,h$,g$,s0,f$,I5,p$,F5,$5,p4];const a0=ee("slider.change.value"),v$=t=>t.type.indexOf("touch")!==-1,b4=t=>{const s=t.event.raw;if(v$(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?S.some(a.touches[0]).map(c=>Ho(c.clientX,c.clientY)):S.none()}else{const a=s;return a.clientX!==void 0?S.some(a).map(c=>Ho(c.clientX,c.clientY)):S.none()}},y$="top",C$="right",V5="bottom",sl="left",Uf=t=>t.model.minX,xd=t=>t.model.minY,i0=t=>t.model.minX-1,c0=t=>t.model.minY-1,Zf=t=>t.model.maxX,bm=t=>t.model.maxY,l0=t=>t.model.maxX+1,u0=t=>t.model.maxY+1,z5=(t,s,a)=>s(t)-a(t),v4=t=>z5(t,Zf,Uf),y4=t=>z5(t,bm,xd),U5=t=>v4(t)/2,Z5=t=>y4(t)/2,Bh=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,W5=t=>t.snapToGrid,C4=t=>t.snapStart,S4=t=>t.rounded,d0=(t,s)=>t[s+"-edge"]!==void 0,j5=t=>d0(t,sl),G5=t=>d0(t,C$),q5=t=>d0(t,y$),Wf=t=>d0(t,V5),wd=t=>t.model.value.get(),Ed=(t,s)=>({x:t,y:s}),mc=(t,s)=>{mt(t,a0(),{value:s})},K5=(t,s)=>{mc(t,Ed(i0(s),c0(s)))},Y5=(t,s)=>{mc(t,c0(s))},x4=(t,s)=>{mc(t,Ed(U5(s),c0(s)))},w4=(t,s)=>{mc(t,Ed(l0(s),c0(s)))},E4=(t,s)=>{mc(t,l0(s))},X5=(t,s)=>{mc(t,Ed(l0(s),Z5(s)))},S$=(t,s)=>{mc(t,Ed(l0(s),u0(s)))},J5=(t,s)=>{mc(t,u0(s))},x$=(t,s)=>{mc(t,Ed(U5(s),u0(s)))},w$=(t,s)=>{mc(t,Ed(i0(s),u0(s)))},E$=(t,s)=>{mc(t,i0(s))},Q5=(t,s)=>{mc(t,Ed(i0(s),Z5(s)))},W2=(t,s,a,c)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-c),j2=(t,s,a,c)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+c),eD=(t,s,a)=>Math.max(s,Math.min(a,t)),k$=(t,s,a,c,u)=>u.fold(()=>{const m=t-s,f=Math.round(m/c)*c;return eD(s+f,s-1,a+1)},m=>{const f=(t-m)%c,p=Math.round(f/c),b=Math.floor((t-m)/c),C=Math.floor((a-m)/c),x=Math.min(C,b+p),k=m+x*c;return Math.max(m,k)}),T$=(t,s,a)=>Math.min(a,Math.max(t,s))-s,tD=t=>{const{min:s,max:a,range:c,value:u,step:m,snap:f,snapStart:p,rounded:b,hasMinEdge:C,hasMaxEdge:x,minBound:k,maxBound:A,screenRange:R}=t,L=C?s-1:s,z=x?a+1:a;if(u<k)return L;if(u>A)return z;{const j=T$(u,k,A),V=eD(j/R*c+s,L,z);return f&&V>=s&&V<=a?k$(V,s,a,m,p):b?Math.round(V):V}},nD=t=>{const{min:s,max:a,range:c,value:u,hasMinEdge:m,hasMaxEdge:f,maxBound:p,maxOffset:b,centerMinEdge:C,centerMaxEdge:x}=t;return u<s?m?0:C:u>a?f?p:x:(u-s)/c*b},k4="top",oD="right",sD="bottom",T4="left",_$="width",A$="height",Bl=t=>t.element.dom.getBoundingClientRect(),rl=(t,s)=>t[s],G2=t=>{const s=Bl(t);return rl(s,T4)},rD=t=>{const s=Bl(t);return rl(s,oD)},q2=t=>{const s=Bl(t);return rl(s,k4)},aD=t=>{const s=Bl(t);return rl(s,sD)},m0=t=>{const s=Bl(t);return rl(s,_$)},_4=t=>{const s=Bl(t);return rl(s,A$)},iD=(t,s,a)=>(t+s)/2-a,cD=(t,s)=>{const a=Bl(t),c=Bl(s),u=rl(a,T4),m=rl(a,oD),f=rl(c,T4);return iD(u,m,f)},lD=(t,s)=>{const a=Bl(t),c=Bl(s),u=rl(a,k4),m=rl(a,sD),f=rl(c,k4);return iD(u,m,f)},K2=(t,s)=>{mt(t,a0(),{value:s})},A4=(t,s,a)=>{const c={min:Uf(s),max:Zf(s),range:v4(s),value:a,step:Bh(s),snap:W5(s),snapStart:C4(s),rounded:S4(s),hasMinEdge:j5(s),hasMaxEdge:G5(s),minBound:G2(t),maxBound:rD(t),screenRange:m0(t)};return tD(c)},O$=(t,s,a)=>{const c=A4(t,s,a);return K2(t,c),c},O4=(t,s)=>{const a=Uf(s);K2(t,a)},uD=(t,s)=>{const a=Zf(s);K2(t,a)},dD=(t,s,a,c)=>{const m=(t>0?j2:W2)(wd(a),Uf(a),Zf(a),Bh(a,c));return K2(s,m),S.some(m)},mD=t=>(s,a,c)=>dD(t,s,a,c).map(ct),fD=t=>b4(t).map(a=>a.left),D$=(t,s,a,c,u)=>{const f=m0(t),p=c.bind(x=>S.some(cD(x,t))).getOr(0),b=u.bind(x=>S.some(cD(x,t))).getOr(f),C={min:Uf(s),max:Zf(s),range:v4(s),value:a,hasMinEdge:j5(s),hasMaxEdge:G5(s),minBound:G2(t),minOffset:0,maxBound:rD(t),maxOffset:f,centerMinEdge:p,centerMaxEdge:b};return nD(C)},D4=(t,s,a,c,u,m)=>{const f=D$(s,m,a,c,u);return G2(s)-G2(t)+f},M$=(t,s,a,c)=>{const u=wd(a),m=D4(t,c.getSpectrum(t),u,c.getLeftEdge(t),c.getRightEdge(t),a),f=As(s.element)/2;Rt(s.element,"left",m-f+"px")},N$=mD(-1),R$=mD(1),B$=S.none,P$=S.none,L$={"top-left":S.none(),top:S.none(),"top-right":S.none(),right:S.some(E4),"bottom-right":S.none(),bottom:S.none(),"bottom-left":S.none(),left:S.some(E$)};var I$=Object.freeze({__proto__:null,setValueFrom:O$,setToMin:O4,setToMax:uD,findValueOfOffset:A4,getValueFromEvent:fD,findPositionOfValue:D4,setPositionFromValue:M$,onLeft:N$,onRight:R$,onUp:B$,onDown:P$,edgeActions:L$});const Y2=(t,s)=>{mt(t,a0(),{value:s})},Ph=(t,s,a)=>{const c={min:xd(s),max:bm(s),range:y4(s),value:a,step:Bh(s),snap:W5(s),snapStart:C4(s),rounded:S4(s),hasMinEdge:q5(s),hasMaxEdge:Wf(s),minBound:q2(t),maxBound:aD(t),screenRange:_4(t)};return tD(c)},M4=(t,s,a)=>{const c=Ph(t,s,a);return Y2(t,c),c},N4=(t,s)=>{const a=xd(s);Y2(t,a)},gD=(t,s)=>{const a=bm(s);Y2(t,a)},F$=(t,s,a,c)=>{const m=(t>0?j2:W2)(wd(a),xd(a),bm(a),Bh(a,c));return Y2(s,m),S.some(m)},hD=t=>(s,a,c)=>F$(t,s,a,c).map(ct),R4=t=>b4(t).map(a=>a.top),B4=(t,s,a,c,u)=>{const f=_4(t),p=c.bind(x=>S.some(lD(x,t))).getOr(0),b=u.bind(x=>S.some(lD(x,t))).getOr(f),C={min:xd(s),max:bm(s),range:y4(s),value:a,hasMinEdge:q5(s),hasMaxEdge:Wf(s),minBound:q2(t),minOffset:0,maxBound:aD(t),maxOffset:f,centerMinEdge:p,centerMaxEdge:b};return nD(C)},Lh=(t,s,a,c,u,m)=>{const f=B4(s,m,a,c,u);return q2(s)-q2(t)+f},pD=(t,s,a,c)=>{const u=wd(a),m=Lh(t,c.getSpectrum(t),u,c.getTopEdge(t),c.getBottomEdge(t),a),f=on(s.element)/2;Rt(s.element,"top",m-f+"px")},$$=S.none,H$=S.none,V$=hD(-1),z$=hD(1),U$={"top-left":S.none(),top:S.some(Y5),"top-right":S.none(),right:S.none(),"bottom-right":S.none(),bottom:S.some(J5),"bottom-left":S.none(),left:S.none()};var Z$=Object.freeze({__proto__:null,setValueFrom:M4,setToMin:N4,setToMax:gD,findValueOfOffset:Ph,getValueFromEvent:R4,findPositionOfValue:Lh,setPositionFromValue:pD,onLeft:$$,onRight:H$,onUp:V$,onDown:z$,edgeActions:U$});const X2=(t,s)=>{mt(t,a0(),{value:s})},J2=(t,s)=>({x:t,y:s}),W$=(t,s,a)=>{const c=A4(t,s,a.left),u=Ph(t,s,a.top),m=J2(c,u);return X2(t,m),m},j$=(t,s,a,c,u)=>{const m=t>0?j2:W2,f=s?wd(c).x:m(wd(c).x,Uf(c),Zf(c),Bh(c,u)),p=s?m(wd(c).y,xd(c),bm(c),Bh(c,u)):wd(c).y;return X2(a,J2(f,p)),S.some(f)},Q2=(t,s)=>(a,c,u)=>j$(t,s,a,c,u).map(ct),G$=(t,s)=>{const a=Uf(s),c=xd(s);X2(t,J2(a,c))},q$=(t,s)=>{const a=Zf(s),c=bm(s);X2(t,J2(a,c))},bD=t=>b4(t),K$=(t,s,a,c)=>{const u=wd(a),m=D4(t,c.getSpectrum(t),u.x,c.getLeftEdge(t),c.getRightEdge(t),a),f=Lh(t,c.getSpectrum(t),u.y,c.getTopEdge(t),c.getBottomEdge(t),a),p=As(s.element)/2,b=on(s.element)/2;Rt(s.element,"left",m-p+"px"),Rt(s.element,"top",f-b+"px")},Y$=Q2(-1,!1),Du=Q2(1,!1),X$=Q2(-1,!0),J$=Q2(1,!0),P4={"top-left":S.some(K5),top:S.some(x4),"top-right":S.some(w4),right:S.some(X5),"bottom-right":S.some(S$),bottom:S.some(x$),"bottom-left":S.some(w$),left:S.some(Q5)};var Ws=Object.freeze({__proto__:null,setValueFrom:W$,setToMin:G$,setToMax:q$,getValueFromEvent:bD,setPositionFromValue:K$,onLeft:Y$,onRight:Du,onUp:X$,onDown:J$,edgeActions:P4});const Q$=[oe("stepSize",1),oe("speedMultiplier",10),oe("onChange",re),oe("onChoose",re),oe("onInit",re),oe("onDragStart",re),oe("onDragEnd",re),oe("snapToGrid",!1),oe("rounded",!0),On("snapStart"),ki("model",Ka("mode",{x:[oe("minX",0),oe("maxX",100),ea("value",t=>Ve(t.mode.minX)),we("getInitialValue"),Wn("manager",I$)],y:[oe("minY",0),oe("maxY",100),ea("value",t=>Ve(t.mode.minY)),we("getInitialValue"),Wn("manager",Z$)],xy:[oe("minX",0),oe("maxX",100),oe("minY",0),oe("maxY",100),ea("value",t=>Ve({x:t.mode.minX,y:t.mode.minY})),we("getInitialValue"),Wn("manager",Ws)]})),Us("sliderBehaviours",[nt,We]),ea("mouseIsDown",()=>Ve(!1))],al=na({name:"Slider",configFields:Q$,partFields:H5,factory:(t,s,a,c)=>{const u=me=>rm(me,t,"thumb"),m=me=>rm(me,t,"spectrum"),f=me=>Kn(me,t,"left-edge"),p=me=>Kn(me,t,"right-edge"),b=me=>Kn(me,t,"top-edge"),C=me=>Kn(me,t,"bottom-edge"),x=t.model,k=x.manager,A=(me,He)=>{k.setPositionFromValue(me,He,t,{getLeftEdge:f,getRightEdge:p,getTopEdge:b,getBottomEdge:C,getSpectrum:m})},R=(me,He)=>{x.value.set(He);const Te=u(me);A(me,Te)},L=(me,He)=>{R(me,He);const Te=u(me);return t.onChange(me,Te,He),S.some(!0)},z=me=>{k.setToMin(me,t)},j=me=>{k.setToMax(me,t)},V=me=>{const He=()=>{Kn(me,t,"thumb").each(fe=>{const je=x.value.get();t.onChoose(me,fe,je)})},Te=t.mouseIsDown.get();t.mouseIsDown.set(!1),Te&&He()},q=(me,He)=>{He.stop(),t.mouseIsDown.set(!0),t.onDragStart(me,u(me))},K=(me,He)=>{He.stop(),t.onDragEnd(me,u(me)),V(me)},ie=me=>{Kn(me,t,"spectrum").map(nt.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:hr(t.sliderBehaviours,[nt.config({mode:"special",focusIn:ie}),We.config({store:{mode:"manual",getValue:me=>x.value.get(),setValue:R}}),xa.config({channels:{[Ww()]:{onReceive:V}}})]),events:ho([ve(a0(),(me,He)=>{L(me,He.event.value)}),ro((me,He)=>{const Te=x.getInitialValue();x.value.set(Te);const fe=u(me);A(me,fe);const je=m(me);t.onInit(me,fe,je,x.value.get())}),ve(ed(),q),ve(_l(),K),ve(Ja(),(me,He)=>{ie(me),q(me,He)}),ve(ev(),K)]),apis:{resetToMin:z,resetToMax:j,setValue:R,refresh:A},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),vD="container",eH=[Us("slotBehaviours",[])],yD=t=>"<alloy.field."+t+">",tH=t=>{const s=(()=>{const m=[];return{slot:(p,b)=>(m.push(p),jS(vD,yD(p),b)),record:ee(m)}})(),a=t(s),c=s.record(),u=ke(c,m=>Os({name:m,pname:yD(m)}));return Af(vD,eH,u,nH,a)},nH=(t,s)=>{const a=z=>rh(t),c=(z,j)=>Kn(z,t,j),u=(z,j)=>(V,q)=>Kn(V,t,q).map(K=>z(K,q)).getOr(j),m=z=>(j,V)=>{ze(V,q=>z(j,q))},f=(z,j)=>ks(z.element,"aria-hidden")!=="true",p=(z,j)=>{if(!f(z)){const V=z.element;Ie(V,"display"),Ao(V,"aria-hidden"),mt(z,nv(),{name:j,visible:!0})}},b=(z,j)=>{if(f(z)){const V=z.element;Rt(V,"display","none"),Ot(V,"aria-hidden","true"),mt(z,nv(),{name:j,visible:!1})}},C=u(f,!1),x=u(b),k=m(x),A=z=>k(z,a()),R=u(p),L={getSlotNames:a,getSlot:c,isShowing:C,hideSlot:x,hideAllSlots:A,showSlot:R};return{uid:t.uid,dom:t.dom,components:s,behaviours:I1(t.slotBehaviours),apis:L}},Vr={...Gn({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>yh(t)),sketch:tH},oH=ee([we("toggleClass"),we("fetch"),Vs("onExecute"),oe("getHotspot",S.some),oe("getAnchorOverrides",ee({})),gm(),Vs("onItemExecute"),On("lazySink"),we("dom"),Cn("onOpen"),Us("splitDropdownBehaviours",[Lo,nt,St]),oe("matchWidth",!1),oe("useMinWidth",!1),oe("eventOrder",{}),On("role"),On("listRole")].concat(l4())),sH=Os({factory:er,schema:[we("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Ae([St.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(pf)},buttonBehaviours:Ae([Ut.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),rH=Os({factory:er,schema:[we("dom")],name:"button",defaults:()=>({buttonBehaviours:Ae([St.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),aH=ee([sH,rH,bs({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[we("text")],name:"aria-descriptor"}),Ir({schema:[LS()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(c=>{t.onItemExecute(c,s,a)})}})}),x5()]),iH=(t,s,a,c)=>{const u=x=>{an.getCurrent(x).each(k=>{kn.highlightFirst(k),nt.focusIn(k)})},m=x=>{a4(t,$t,x,c,u,Ca.HighlightMenuAndItem).get(re)},f=x=>(m(x),S.some(!0)),p=x=>{const k=rm(x,t,"button");return pf(k),S.some(!0)},b={...ho([ro((x,k)=>{Kn(x,t,"aria-descriptor").each(R=>{const L=Ue("aria");Ot(R.element,"id",L),Ot(x.element,"aria-describedby",L)})})]),...N2(S.some(m))},C={repositionMenus:x=>{Ut.isOn(x)&&k5(x)}};return{uid:t.uid,dom:t.dom,components:s,apis:C,eventOrder:{...t.eventOrder,[_i()]:["disabling","toggling","alloy.base.behaviour"]},events:b,behaviours:hr(t.splitDropdownBehaviours,[Lo.config({others:{sandbox:x=>{const k=rm(x,t,"arrow");return H2(t,x,{onOpen:()=>{Ut.on(k),Ut.on(x)},onClose:()=>{Ut.off(k),Ut.off(x)}})}}}),nt.config({mode:"special",onSpace:p,onEnter:p,onDown:f}),St.config({}),Ut.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},ey=na({name:"SplitDropdown",configFields:oH(),partFields:aH(),factory:iH,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),cH=(t,s)=>Qo(t,(u,m)=>s(m,u.len).fold(ee(u),p=>({len:p.finish,list:u.list.concat([p])})),{len:0,list:[]}).list,L4=(t,s,a)=>({within:t,extra:s,withinWidth:a}),CD=(t,s,a)=>{const c=cH(t,(p,b)=>{const C=a(p);return S.some({element:p,start:b,finish:b+C,width:C})}),u=Zn(c,p=>p.finish<=s),m=Jo(u,(p,b)=>p+b.width,0),f=c.slice(u.length);return{within:u,extra:f,withinWidth:m}},ty=t=>ke(t,s=>s.element),lH=(t,s,a)=>{const c=ty(t.concat(s));return L4(c,[],a)},uH=(t,s,a,c)=>{const u=ty(t).concat([a]);return L4(u,ty(s),c)},dH=(t,s,a)=>L4(ty(t),[],a),mH=(t,s,a)=>{const c=CD(s,t,a);return c.extra.length===0?S.some(c):S.none()},fH=(t,s,a,c)=>{const u=mH(t,s,a).getOrThunk(()=>CD(s,t-a(c),a)),m=u.within,f=u.extra,p=u.withinWidth;return f.length===1&&f[0].width<=a(c)?lH(m,f,p):f.length>=1?uH(m,f,c,p):dH(m,f,p)},I4=(t,s)=>{const a=ke(s,c=>Ai(c));tr.setGroups(t,a)},gH=t=>nn(t,s=>Sr(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),F4=(t,s,a)=>{const c=s.builtGroups.get();if(c.length===0)return;const u=rm(t,s,"primary"),m=Lo.getCoupled(t,"overflowGroup");Rt(u.element,"visibility","hidden");const f=c.concat([m]),p=gH(f);a([]),I4(u,f);const b=As(u.element),C=fH(b,s.builtGroups.get(),x=>Math.ceil(x.element.dom.getBoundingClientRect().width),m);C.extra.length===0?(Nt.remove(u,m),a([])):(I4(u,C.within),a(C.extra)),Ie(u.element,"visibility"),Vt(u.element),p.each(St.focus)},SD=ee([Us("splitToolbarBehaviours",[Lo]),ea("builtGroups",()=>Ve([]))]),hH=ee([Jg(["overflowToggledClass"]),Tl("getOverflowBounds"),we("lazySink"),ea("overflowGroups",()=>Ve([])),Cn("onOpened"),Cn("onClosed")].concat(SD())),pH=ee([Os({factory:tr,schema:Dh(),name:"primary"}),Ir({schema:Dh(),name:"overflow"}),Ir({name:"overflow-button"}),Ir({name:"overflow-group"})]),xD=ee([we("items"),Jg(["itemSelector"]),Us("tgroupBehaviours",[nt])]),bH=ee([r1({name:"items",unit:"item"})]),vH=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,behaviours:hr(t.tgroupBehaviours,[nt.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),ny=na({name:"ToolbarGroup",configFields:xD(),partFields:bH(),factory:vH}),wD=t=>ke(t,s=>Ai(s)),$4=(t,s,a)=>{F4(t,a,c=>{a.overflowGroups.set(c),s.getOpt(t).each(u=>{Au.setGroups(u,wD(c))})})},yH=(t,s,a,c)=>{const u=Tn(Au.sketch({fetch:()=>Ro.nu(m=>{m(wD(t.overflowGroups.get()))}),layouts:{onLtr:()=>[ls,Yo],onRtl:()=>[Yo,ls],onBottomLtr:()=>[zs,fr],onBottomRtl:()=>[fr,zs]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:c["overflow-button"](),toolbar:c.overflow()},onToggled:(m,f)=>t[f?"onOpened":"onClosed"](m)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:hr(t.splitToolbarBehaviours,[Lo.config({others:{overflowGroup:()=>ny.sketch({...c["overflow-group"](),items:[u.asSpec()]})}})]),apis:{setGroups:(m,f)=>{t.builtGroups.set(ke(f,m.getSystem().build)),$4(m,u,t)},refresh:m=>$4(m,u,t),toggle:m=>{u.getOpt(m).each(f=>{Au.toggle(f)})},toggleWithoutFocusing:m=>{u.getOpt(m).each(Au.toggleWithoutFocusing)},isOpen:m=>u.getOpt(m).map(Au.isOpen).getOr(!1),reposition:m=>{u.getOpt(m).each(f=>{Au.reposition(f)})},getOverflow:m=>u.getOpt(m).bind(Au.getToolbar)},domModification:{attributes:{role:"group"}}}},H4=na({name:"SplitFloatingToolbar",configFields:hH(),partFields:pH(),factory:yH,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),CH=ee([Jg(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Cn("onOpened"),Cn("onClosed")].concat(SD())),ED=ee([Os({factory:tr,schema:Dh(),name:"primary"}),Os({factory:tr,schema:Dh(),name:"overflow",overrides:t=>({toolbarBehaviours:Ae([oa.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Kn(s,t,"overflow-button").each(a=>{Ut.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{Kn(s,t,"overflow-button").each(Ut.on)}}),nt.config({mode:"acyclic",onEscape:s=>(Kn(s,t,"overflow-button").each(St.focus),S.some(!0))})])})}),Ir({name:"overflow-button",overrides:t=>({buttonBehaviours:Ae([Ut.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),Ir({name:"overflow-group"})]),SH=(t,s)=>Kn(t,s,"overflow").map(oa.hasGrown).getOr(!1),V4=(t,s,a)=>{Kn(t,s,"overflow-button").each(c=>{Kn(t,s,"overflow").each(u=>{if(z4(t,s),oa.hasShrunk(u)){const m=s.onOpened;s.onOpened=f=>{a||nt.focusIn(u),m(f),s.onOpened=m}}else{const m=s.onClosed;s.onClosed=f=>{a||St.focus(c),m(f),s.onClosed=m}}oa.toggleGrow(u)})})},z4=(t,s)=>{Kn(t,s,"overflow").each(a=>{F4(t,s,c=>{const u=ke(c,m=>Ai(m));tr.setGroups(a,u)}),Kn(t,s,"overflow-button").each(c=>{oa.hasGrown(a)&&Ut.on(c)}),oa.refresh(a)})},xH=(t,s,a,c)=>{const u="alloy.toolbar.toggle",m=(f,p)=>{const b=ke(p,f.getSystem().build);t.builtGroups.set(b)};return{uid:t.uid,dom:t.dom,components:s,behaviours:hr(t.splitToolbarBehaviours,[Lo.config({others:{overflowGroup:f=>ny.sketch({...c["overflow-group"](),items:[er.sketch({...c["overflow-button"](),action:p=>{rn(f,u)}})]})}}),Dt("toolbar-toggle-events",[ve(u,f=>{V4(f,t,!1)})])]),apis:{setGroups:(f,p)=>{m(f,p),z4(f,t)},refresh:f=>z4(f,t),toggle:f=>{V4(f,t,!1)},toggleWithoutFocusing:f=>{V4(f,t,!0)},isOpen:f=>SH(f,t)},domModification:{attributes:{role:"group"}}}},U4=na({name:"SplitSlidingToolbar",configFields:CH(),partFields:ED(),factory:xH,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),wH=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:N2(t.action),behaviours:hr(t.tabButtonBehaviours,[St.config({}),nt.config({mode:"execution",useSpace:!0,useEnter:!0}),We.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),EH=Di({name:"TabButton",configFields:[oe("uid",void 0),we("value"),Er("dom","dom",bS(()=>({attributes:{role:"tab",id:Ue("aria"),"aria-selected":"false"}})),Uc()),On("action"),oe("domModification",{}),Us("tabButtonBehaviours",[St,nt,We]),we("view")],factory:wH}),kH=ee([we("tabs"),we("dom"),oe("clickToDismiss",!1),Us("tabbarBehaviours",[kn,nt]),Jg(["tabClass","selectedClass"])]),TH=r1({factory:EH,name:"tabs",unit:"tab",overrides:t=>{const s=(c,u)=>{kn.dehighlight(c,u),mt(c,OT(),{tabbar:c,button:u})},a=(c,u)=>{kn.highlight(c,u),mt(c,NS(),{tabbar:c,button:u})};return{action:c=>{const u=c.getSystem().getByUid(t.uid).getOrDie(),m=kn.isHighlighted(u,c);(m&&t.clickToDismiss?s:m?re:a)(u,c)},domModification:{classes:[t.markers.tabClass]}}}}),_H=ee([TH]),AH=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:hr(t.tabbarBehaviours,[kn.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(u,m)=>{Ot(m.element,"aria-selected","true")},onDehighlight:(u,m)=>{Ot(m.element,"aria-selected","false")}}),nt.config({mode:"flow",getInitial:u=>kn.getHighlighted(u).map(m=>m.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),kD=na({name:"Tabbar",configFields:kH(),partFields:_H(),factory:AH}),OH=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:hr(t.tabviewBehaviours,[Nt.config({})]),domModification:{attributes:{role:"tabpanel"}}}),TD=Di({name:"Tabview",configFields:[Us("tabviewBehaviours",[Nt])],factory:OH}),DH=ee([oe("selectFirst",!0),Cn("onChangeTab"),Cn("onDismissTab"),oe("tabs",[]),Us("tabSectionBehaviours",[])]),MH=Os({factory:kD,schema:[we("dom"),jc("markers",[we("tabClass"),we("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),NH=Os({factory:TD,name:"tabview"}),RH=ee([MH,NH]),BH=(t,s,a,c)=>{const u=f=>{const p=We.getValue(f);Kn(f,t,"tabview").each(b=>{_t(t.tabs,x=>x.value===p).each(x=>{const k=x.view();Ts(f.element,"id").each(A=>{Ot(b.element,"aria-labelledby",A)}),Nt.set(b,k),t.onChangeTab(b,f,k)})})},m=(f,p)=>{Kn(f,t,"tabbar").each(b=>{p(b).each(pf)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:I1(t.tabSectionBehaviours),events:ho(At([t.selectFirst?[ro((f,p)=>{m(f,kn.getFirst)})]:[],[ve(NS(),(f,p)=>{const b=p.event.button;u(b)}),ve(OT(),(f,p)=>{const b=p.event.button;t.onDismissTab(f,b)})]])),apis:{getViewItems:f=>Kn(f,t,"tabview").map(p=>Nt.contents(p)).getOr([]),showTab:(f,p)=>{m(f,C=>{const x=kn.getCandidates(C);return _t(x,A=>We.getValue(A)===p).filter(A=>!kn.isHighlighted(C,A))})}}}},vm=na({name:"TabSection",configFields:DH(),partFields:RH(),factory:BH,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),oy=(t,s,a)=>{const c=We.getValue(a);We.setValue(s,c),AD(s)},_D=(t,s)=>{const a=t.element,c=Vc(a),u=a.dom;ks(a,"type")!=="number"&&s(u,c)},AD=t=>{_D(t,(s,a)=>s.setSelectionRange(a.length,a.length))},OD=(t,s)=>{_D(t,(a,c)=>a.setSelectionRange(s,c.length))},DD=(t,s,a)=>{if(t.selectsOver){const c=We.getValue(s),u=t.getDisplayText(c),m=We.getValue(a);return t.getDisplayText(m).indexOf(u)===0?S.some(()=>{oy(t,s,a),OD(s,u.length)}):S.none()}else return S.none()},Z4=ee("alloy.typeahead.itemexecute"),PH=(t,s,a,c)=>{const u=(k,A,R)=>{t.previewing.set(!1);const L=Lo.getCoupled(k,"sandbox");if(bn.isOpen(L))an.getCurrent(L).each(z=>{kn.getHighlighted(z).fold(()=>{R(z)},()=>{XT(L,z.element,"keydown",A)})});else{const z=j=>{an.getCurrent(j).each(R)};$2(t,f(k),k,L,c,z,Ca.HighlightMenuAndItem).get(re)}},m=R5(t),f=k=>A=>A.map(R=>{const L=jl(R.menus),z=pe(L,V=>Zn(V.items,q=>q.type==="item"));return We.getState(k).update(ke(z,V=>V.data)),R}),p=k=>an.getCurrent(k),b="typeaheadevents",C=[St.config({}),We.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:k=>Vc(k.element),getFallbackEntry:k=>({value:k,meta:{}}),setValue:(k,A)=>{Jm(k.element,t.model.getDisplayText(A))},...t.initialData.map(k=>sf("initialValue",k)).getOr({})}}),$w.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(k,A)=>{const R=Lo.getCoupled(k,"sandbox");if(St.isFocused(k)&&Vc(k.element).length>=t.minChars){const z=p(R).bind(V=>kn.getHighlighted(V).map(We.getValue));t.previewing.set(!0);const j=V=>{p(R).each(q=>{z.fold(()=>{t.model.selectsOver&&kn.highlightFirst(q)},K=>{kn.highlightBy(q,ie=>We.getValue(ie).value===K.value),kn.getHighlighted(q).orThunk(()=>(kn.highlightFirst(q),S.none()))})})};$2(t,f(k),k,R,c,j,Ca.HighlightJustMenu).get(re)}},cancelEvent:t1()}),nt.config({mode:"special",onDown:(k,A)=>(u(k,A,kn.highlightFirst),S.some(!0)),onEscape:k=>{const A=Lo.getCoupled(k,"sandbox");return bn.isOpen(A)?(bn.close(A),S.some(!0)):S.none()},onUp:(k,A)=>(u(k,A,kn.highlightLast),S.some(!0)),onEnter:k=>{const A=Lo.getCoupled(k,"sandbox"),R=bn.isOpen(A);if(R&&!t.previewing.get())return p(A).bind(L=>kn.getHighlighted(L)).map(L=>(mt(k,Z4(),{item:L}),!0));{const L=We.getValue(k);return rn(k,t1()),t.onExecute(A,k,L),R&&bn.close(A),S.some(!0)}}}),Ut.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Lo.config({others:{sandbox:k=>H2(t,k,{onOpen:()=>Ut.on(k),onClose:()=>{t.lazyTypeaheadComp.get().each(A=>Ao(A.element,"aria-activedescendant")),Ut.off(k)}})}}),Dt(b,[ro(k=>{t.lazyTypeaheadComp.set(S.some(k))}),Dl(k=>{t.lazyTypeaheadComp.set(S.none())}),md(k=>{const A=re;a4(t,f(k),k,c,A,Ca.HighlightMenuAndItem).get(re)}),ve(Z4(),(k,A)=>{const R=Lo.getCoupled(k,"sandbox");oy(t.model,k,A.event.item),rn(k,t1()),t.onItemExecute(k,R,A.event.item,We.getValue(k)),bn.close(R),AD(k)})].concat(t.dismissOnBlur?[ve(e1(),k=>{const A=Lo.getCoupled(k,"sandbox");Sr(A.element).isNone()&&bn.close(A)})]:[]))],x={[pu()]:[We.name(),$w.name(),b],...t.eventOrder};return{uid:t.uid,dom:B5(Nn(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...m,...hr(t.typeaheadBehaviours,C)},eventOrder:x}},MD=ee([On("lazySink"),we("fetch"),oe("minChars",5),oe("responseTime",1e3),Cn("onOpen"),oe("getHotspot",S.some),oe("getAnchorOverrides",ee({})),oe("layouts",S.none()),oe("eventOrder",{}),Qb("model",{},[oe("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),oe("selectsOver",!0),oe("populateFromBrowse",!0)]),Cn("onSetValue"),ps("onExecute"),Cn("onItemExecute"),oe("inputClasses",[]),oe("inputAttributes",{}),oe("inputStyles",{}),oe("matchWidth",!0),oe("useMinWidth",!1),oe("dismissOnBlur",!0),Jg(["openClass"]),On("initialData"),On("listRole"),Us("typeaheadBehaviours",[St,We,$w,nt,Ut,Lo]),ea("lazyTypeaheadComp",()=>Ve(S.none)),ea("previewing",()=>Ve(!0))].concat(U2()).concat(l4())),LH=ee([Ir({schema:[LS()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,c)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(u=>{DD(t.model,u,c).fold(()=>{t.model.selectsOver?(kn.dehighlight(a,c),t.previewing.set(!0)):t.previewing.set(!1)},m=>{m(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(u=>{t.model.populateFromBrowse&&oy(t.model,u,c),Ts(c.element,"id").each(m=>Ot(u.element,"aria-activedescendant",m))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(c=>(mt(c,Z4(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(c=>{t.model.populateFromBrowse&&oy(t.model,c,a)})}})})]),IH=na({name:"Typeahead",configFields:MD(),partFields:LH(),factory:PH});var FH=tinymce.util.Tools.resolve("tinymce.ThemeManager"),sy=tinymce.util.Tools.resolve("tinymce.util.Delay"),f0=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),$H=tinymce.util.Tools.resolve("tinymce.EditorManager"),kd=tinymce.util.Tools.resolve("tinymce.Env"),fc;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(fc||(fc={}));var ym;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(ym||(ym={}));const zn=t=>s=>s.options.get(t),g0=t=>s=>S.from(t(s)),ND=t=>{const s=kd.deviceType.isPhone(),a=kd.deviceType.isTablet()||s,c=t.options.register,u=f=>Tt(f)||f===!1,m=f=>Tt(f)||Zr(f);c("skin",{processor:f=>Tt(f)||f===!1,default:"oxide"}),c("skin_url",{processor:"string"}),c("height",{processor:m,default:Math.max(t.getElement().offsetHeight,400)}),c("width",{processor:m,default:f0.DOM.getStyle(t.getElement(),"width")}),c("min_height",{processor:"number",default:100}),c("min_width",{processor:"number"}),c("max_height",{processor:"number"}),c("max_width",{processor:"number"}),c("style_formats",{processor:"object[]"}),c("style_formats_merge",{processor:"boolean",default:!1}),c("style_formats_autohide",{processor:"boolean",default:!1}),c("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),c("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),c("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),c("font_size_input_default_unit",{processor:"string",default:"pt"}),c("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),c("content_langs",{processor:"object[]"}),c("removed_menuitems",{processor:"string",default:""}),c("menubar",{processor:f=>Tt(f)||yo(f),default:!s}),c("menu",{processor:"object",default:{}}),c("toolbar",{processor:f=>yo(f)||Tt(f)||X(f)?{value:f,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Hn(9,f=>{c("toolbar"+(f+1),{processor:"string"})}),c("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),c("toolbar_groups",{processor:"object",default:{}}),c("toolbar_location",{processor:"string",default:ym.auto}),c("toolbar_persist",{processor:"boolean",default:!1}),c("toolbar_sticky",{processor:"boolean",default:t.inline}),c("toolbar_sticky_offset",{processor:"number",default:0}),c("fixed_toolbar_container",{processor:"string",default:""}),c("fixed_toolbar_container_target",{processor:"object"}),c("ui_mode",{processor:"string",default:"combined"}),c("file_picker_callback",{processor:"function"}),c("file_picker_validator_handler",{processor:"function"}),c("file_picker_types",{processor:"string"}),c("typeahead_urls",{processor:"boolean",default:!0}),c("anchor_top",{processor:u,default:"#top"}),c("anchor_bottom",{processor:u,default:"#bottom"}),c("draggable_modal",{processor:"boolean",default:!1}),c("statusbar",{processor:"boolean",default:!0}),c("elementpath",{processor:"boolean",default:!0}),c("branding",{processor:"boolean",default:!0}),c("promotion",{processor:"boolean",default:!0}),c("resize",{processor:f=>f==="both"||yo(f),default:!kd.deviceType.isTouch()}),c("sidebar_show",{processor:"string"}),c("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),c("default_font_stack",{processor:"string[]",default:[]})},RD=zn("readonly"),W4=zn("disabled"),Ih=zn("height"),Cm=zn("width"),ry=g0(zn("min_width")),ay=g0(zn("min_height")),iy=g0(zn("max_width")),j4=g0(zn("max_height")),BD=g0(zn("style_formats")),PD=zn("style_formats_merge"),LD=zn("style_formats_autohide"),ID=zn("content_langs"),FD=zn("removed_menuitems"),Fh=zn("toolbar_mode"),$D=zn("toolbar_groups"),G4=zn("toolbar_location"),HH=zn("fixed_toolbar_container"),HD=zn("fixed_toolbar_container_target"),jf=zn("toolbar_persist"),Sm=zn("toolbar_sticky_offset"),VD=zn("menubar"),h0=zn("toolbar"),q4=zn("file_picker_callback"),p0=zn("file_picker_validator_handler"),zD=zn("font_size_input_default_unit"),$h=zn("file_picker_types"),Hh=zn("typeahead_urls"),UD=zn("anchor_top"),ZD=zn("anchor_bottom"),WD=zn("draggable_modal"),jD=zn("statusbar"),GD=zn("elementpath"),K4=zn("branding"),b0=zn("resize"),qD=zn("paste_as_text"),cy=zn("sidebar_show"),KD=zn("promotion"),YD=zn("help_accessibility"),Y4=zn("default_font_stack"),X4=zn("skin"),ly=t=>t.options.get("skin")===!1,il=t=>t.options.get("menubar")!==!1,xm=t=>{const s=t.options.get("skin_url");if(ly(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return $H.baseURL+"/skins/ui/"+a}},VH=t=>S.from(t.options.get("skin_url")),XD=t=>t.options.get("line_height_formats").split(" "),v0=t=>{const s=h0(t),a=Tt(s),c=X(s)&&s.length>0;return!Vh(t)&&(c||a||s===!0)},J4=t=>{const s=Hn(9,c=>t.options.get("toolbar"+(c+1))),a=Zn(s,Tt);return vr(a.length>0,a)},Vh=t=>J4(t).fold(()=>{const s=h0(t);return kt(s,Tt)&&s.length>0},ct),Q4=t=>G4(t)===ym.bottom,JD=t=>{var s;if(!t.inline)return S.none();const a=(s=HH(t))!==null&&s!==void 0?s:"";if(a.length>0)return qn(Xr(),a);const c=HD(t);return uo(c)?S.some(ne.fromDom(c)):S.none()},zh=t=>t.inline&&JD(t).isSome(),eE=t=>JD(t).getOrThunk(()=>Ku(Fs(ne.fromDom(t.getElement())))),tE=t=>t.inline&&!il(t)&&!v0(t)&&!Vh(t),Uh=t=>(t.options.get("toolbar_sticky")||t.inline)&&!zh(t)&&!tE(t),wm=t=>!zh(t)&&t.options.get("ui_mode")==="split",QD=t=>{const s=t.options.get("menu");return Gn(s,a=>({...a,items:a.items}))};var nE=Object.freeze({__proto__:null,get ToolbarMode(){return fc},get ToolbarLocation(){return ym},register:ND,getSkinUrl:xm,getSkinUrlOption:VH,isReadOnly:RD,isDisabled:W4,getSkin:X4,isSkinDisabled:ly,getHeightOption:Ih,getWidthOption:Cm,getMinWidthOption:ry,getMinHeightOption:ay,getMaxWidthOption:iy,getMaxHeightOption:j4,getUserStyleFormats:BD,shouldMergeStyleFormats:PD,shouldAutoHideStyleFormats:LD,getLineHeightFormats:XD,getContentLanguages:ID,getRemovedMenuItems:FD,isMenubarEnabled:il,isMultipleToolbars:Vh,isToolbarEnabled:v0,isToolbarPersist:jf,getMultipleToolbarsOption:J4,getUiContainer:eE,useFixedContainer:zh,isSplitUiMode:wm,getToolbarMode:Fh,isDraggableModal:WD,isDistractionFree:tE,isStickyToolbar:Uh,getStickyToolbarOffset:Sm,getToolbarLocation:G4,isToolbarLocationBottom:Q4,getToolbarGroups:$D,getMenus:QD,getMenubar:VD,getToolbar:h0,getFilePickerCallback:q4,getFilePickerTypes:$h,useTypeaheadUrls:Hh,getAnchorTop:UD,getAnchorBottom:ZD,getFilePickerValidatorHandler:p0,getFontSizeInputDefaultUnit:zD,useStatusBar:jD,useElementPath:GD,promotionEnabled:KD,useBranding:K4,getResize:b0,getPasteAsText:qD,getSidebarShow:cy,useHelpAccessibility:YD,getDefaultFontStack:Y4});const zH=["visible","hidden","clip"],eM=t=>Mc(t).length>0&&!jn(zH,t),tM=t=>{if(xb(t)){const s=E(t,"overflow-x"),a=E(t,"overflow-y");return eM(s)||eM(a)}else return!1},oE=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),UH=(t,s)=>{const a=mS(s,tM),c=a.length===0?Pg(s).map(nu).map(u=>mS(u,tM)).getOr([]):a;return Ps(c).map(u=>({element:u,others:c.slice(1),isFullscreen:()=>oE(t)}))},Em=(t,s)=>wm(t)?UH(t,s):S.none(),Gf=t=>{const s=[...ke(t.others,mr),Pr()];return t.isFullscreen()?Pr():FB(mr(t.element),s)};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:sE,setPrototypeOf:nM,isFrozen:ZH,getPrototypeOf:WH,getOwnPropertyDescriptor:jH}=Object;let{freeze:ai,seal:gc,create:rE}=Object,{apply:aE,construct:iE}=typeof Reflect<"u"&&Reflect;ai||(ai=function(s){return s}),gc||(gc=function(s){return s}),aE||(aE=function(s,a,c){return s.apply(a,c)}),iE||(iE=function(s,a){return new s(...a)});const uy=ci(Array.prototype.forEach),GH=ci(Array.prototype.lastIndexOf),oM=ci(Array.prototype.pop),Zh=ci(Array.prototype.push),Wh=ci(Array.prototype.splice),dy=ci(String.prototype.toLowerCase),cE=ci(String.prototype.toString),sM=ci(String.prototype.match),km=ci(String.prototype.replace),hc=ci(String.prototype.indexOf),lE=ci(String.prototype.trim),cl=ci(Object.prototype.hasOwnProperty),ii=ci(RegExp.prototype.test),y0=qH(TypeError);function ci(t){return function(s){for(var a=arguments.length,c=new Array(a>1?a-1:0),u=1;u<a;u++)c[u-1]=arguments[u];return aE(t,s,c)}}function qH(t){return function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return iE(t,a)}}function Xn(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:dy;nM&&nM(t,null);let c=s.length;for(;c--;){let u=s[c];if(typeof u=="string"){const m=a(u);m!==u&&(ZH(s)||(s[c]=m),u=m)}t[u]=!0}return t}function rM(t){for(let s=0;s<t.length;s++)cl(t,s)||(t[s]=null);return t}function qf(t){const s=rE(null);for(const[a,c]of sE(t))cl(t,a)&&(Array.isArray(c)?s[a]=rM(c):c&&typeof c=="object"&&c.constructor===Object?s[a]=qf(c):s[a]=c);return s}function C0(t,s){for(;t!==null;){const c=jH(t,s);if(c){if(c.get)return ci(c.get);if(typeof c.value=="function")return ci(c.value)}t=WH(t)}function a(){return null}return a}const uE=ai(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),dE=ai(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),my=ai(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),aM=ai(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),fy=ai(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),KH=ai(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),iM=ai(["#text"]),cM=ai(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),mE=ai(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),lM=ai(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),gy=ai(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),fE=gc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),YH=gc(/<%[\w\W]*|[\w\W]*%>/gm),XH=gc(/\$\{[\w\W]*/gm),uM=gc(/^data-[\-\w.\u00B7-\uFFFF]+$/),JH=gc(/^aria-[\-\w]+$/),dM=gc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),QH=gc(/^(?:\w+script|data):/i),e9=gc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),mM=gc(/^html$/i),t9=gc(/^[a-z][.\w]*(-[.\w]+)+$/i);var fM=Object.freeze({__proto__:null,ARIA_ATTR:JH,ATTR_WHITESPACE:e9,CUSTOM_ELEMENT:t9,DATA_ATTR:uM,DOCTYPE_NAME:mM,ERB_EXPR:YH,IS_ALLOWED_URI:dM,IS_SCRIPT_OR_DATA:QH,MUSTACHE_EXPR:fE,TMPLIT_EXPR:XH});const jh={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},gM=function(){return typeof window>"u"?null:window},n9=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let c=null;const u="data-tt-policy-suffix";a&&a.hasAttribute(u)&&(c=a.getAttribute(u));const m="dompurify"+(c?"#"+c:"");try{return s.createPolicy(m,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+m+" could not be created."),null}},hM=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function pM(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gM();const s=un=>pM(un);if(s.version="3.2.4",s.removed=[],!t||!t.document||t.document.nodeType!==jh.document||!t.Element)return s.isSupported=!1,s;let{document:a}=t;const c=a,u=c.currentScript,{DocumentFragment:m,HTMLTemplateElement:f,Node:p,Element:b,NodeFilter:C,NamedNodeMap:x=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:k,DOMParser:A,trustedTypes:R}=t,L=b.prototype,z=C0(L,"cloneNode"),j=C0(L,"remove"),V=C0(L,"nextSibling"),q=C0(L,"childNodes"),K=C0(L,"parentNode");if(typeof f=="function"){const un=a.createElement("template");un.content&&un.content.ownerDocument&&(a=un.content.ownerDocument)}let ie,me="";const{implementation:He,createNodeIterator:Te,createDocumentFragment:fe,getElementsByTagName:je}=a,{importNode:pt}=c;let rt=hM();s.isSupported=typeof sE=="function"&&typeof K=="function"&&He&&He.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Qt,ERB_EXPR:Et,TMPLIT_EXPR:Lt,DATA_ATTR:tt,ARIA_ATTR:xe,IS_SCRIPT_OR_DATA:Be,ATTR_WHITESPACE:yt,CUSTOM_ELEMENT:It}=fM;let{IS_ALLOWED_URI:dt}=fM,Bt=null;const Un=Xn({},[...uE,...dE,...my,...fy,...iM]);let Pn=null;const Ha=Xn({},[...cM,...mE,...lM,...gy]);let Eo=Object.seal(rE(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Li=null,Or=null,Ii=!0,Fi=!0,gl=!1,ib=!0,Iu=!1,Zk=!0,Sg=!1,Wk=!1,Uj=!1,VC=!1,nB=!1,oB=!1,Gq=!0,qq=!1;const LK="user-content-";let Zj=!0,jk=!1,zC={},UC=null;const Kq=Xn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Yq=null;const Xq=Xn({},["audio","video","img","source","image","track"]);let Wj=null;const Jq=Xn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),sB="http://www.w3.org/1998/Math/MathML",rB="http://www.w3.org/2000/svg",xg="http://www.w3.org/1999/xhtml";let ZC=xg,jj=!1,Gj=null;const IK=Xn({},[sB,rB,xg],cE);let aB=Xn({},["mi","mo","mn","ms","mtext"]),iB=Xn({},["annotation-xml"]);const FK=Xn({},["title","style","font","a","script"]);let Gk=null;const $K=["application/xhtml+xml","text/html"],HK="text/html";let Va=null,WC=null;const VK=a.createElement("form"),Qq=function(de){return de instanceof RegExp||de instanceof Function},qj=function(){let de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(WC&&WC===de)){if((!de||typeof de!="object")&&(de={}),de=qf(de),Gk=$K.indexOf(de.PARSER_MEDIA_TYPE)===-1?HK:de.PARSER_MEDIA_TYPE,Va=Gk==="application/xhtml+xml"?cE:dy,Bt=cl(de,"ALLOWED_TAGS")?Xn({},de.ALLOWED_TAGS,Va):Un,Pn=cl(de,"ALLOWED_ATTR")?Xn({},de.ALLOWED_ATTR,Va):Ha,Gj=cl(de,"ALLOWED_NAMESPACES")?Xn({},de.ALLOWED_NAMESPACES,cE):IK,Wj=cl(de,"ADD_URI_SAFE_ATTR")?Xn(qf(Jq),de.ADD_URI_SAFE_ATTR,Va):Jq,Yq=cl(de,"ADD_DATA_URI_TAGS")?Xn(qf(Xq),de.ADD_DATA_URI_TAGS,Va):Xq,UC=cl(de,"FORBID_CONTENTS")?Xn({},de.FORBID_CONTENTS,Va):Kq,Li=cl(de,"FORBID_TAGS")?Xn({},de.FORBID_TAGS,Va):{},Or=cl(de,"FORBID_ATTR")?Xn({},de.FORBID_ATTR,Va):{},zC=cl(de,"USE_PROFILES")?de.USE_PROFILES:!1,Ii=de.ALLOW_ARIA_ATTR!==!1,Fi=de.ALLOW_DATA_ATTR!==!1,gl=de.ALLOW_UNKNOWN_PROTOCOLS||!1,ib=de.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Iu=de.SAFE_FOR_TEMPLATES||!1,Zk=de.SAFE_FOR_XML!==!1,Sg=de.WHOLE_DOCUMENT||!1,VC=de.RETURN_DOM||!1,nB=de.RETURN_DOM_FRAGMENT||!1,oB=de.RETURN_TRUSTED_TYPE||!1,Uj=de.FORCE_BODY||!1,Gq=de.SANITIZE_DOM!==!1,qq=de.SANITIZE_NAMED_PROPS||!1,Zj=de.KEEP_CONTENT!==!1,jk=de.IN_PLACE||!1,dt=de.ALLOWED_URI_REGEXP||dM,ZC=de.NAMESPACE||xg,aB=de.MATHML_TEXT_INTEGRATION_POINTS||aB,iB=de.HTML_INTEGRATION_POINTS||iB,Eo=de.CUSTOM_ELEMENT_HANDLING||{},de.CUSTOM_ELEMENT_HANDLING&&Qq(de.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Eo.tagNameCheck=de.CUSTOM_ELEMENT_HANDLING.tagNameCheck),de.CUSTOM_ELEMENT_HANDLING&&Qq(de.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Eo.attributeNameCheck=de.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),de.CUSTOM_ELEMENT_HANDLING&&typeof de.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Eo.allowCustomizedBuiltInElements=de.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Iu&&(Fi=!1),nB&&(VC=!0),zC&&(Bt=Xn({},iM),Pn=[],zC.html===!0&&(Xn(Bt,uE),Xn(Pn,cM)),zC.svg===!0&&(Xn(Bt,dE),Xn(Pn,mE),Xn(Pn,gy)),zC.svgFilters===!0&&(Xn(Bt,my),Xn(Pn,mE),Xn(Pn,gy)),zC.mathMl===!0&&(Xn(Bt,fy),Xn(Pn,lM),Xn(Pn,gy))),de.ADD_TAGS&&(Bt===Un&&(Bt=qf(Bt)),Xn(Bt,de.ADD_TAGS,Va)),de.ADD_ATTR&&(Pn===Ha&&(Pn=qf(Pn)),Xn(Pn,de.ADD_ATTR,Va)),de.ADD_URI_SAFE_ATTR&&Xn(Wj,de.ADD_URI_SAFE_ATTR,Va),de.FORBID_CONTENTS&&(UC===Kq&&(UC=qf(UC)),Xn(UC,de.FORBID_CONTENTS,Va)),Zj&&(Bt["#text"]=!0),Sg&&Xn(Bt,["html","head","body"]),Bt.table&&(Xn(Bt,["tbody"]),delete Li.tbody),de.TRUSTED_TYPES_POLICY){if(typeof de.TRUSTED_TYPES_POLICY.createHTML!="function")throw y0('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof de.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw y0('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ie=de.TRUSTED_TYPES_POLICY,me=ie.createHTML("")}else ie===void 0&&(ie=n9(R,u)),ie!==null&&typeof me=="string"&&(me=ie.createHTML(""));ai&&ai(de),WC=de}},eK=Xn({},[...dE,...my,...aM]),tK=Xn({},[...fy,...KH]),zK=function(de){let gt=K(de);(!gt||!gt.tagName)&&(gt={namespaceURI:ZC,tagName:"template"});const en=dy(de.tagName),nr=dy(gt.tagName);return Gj[de.namespaceURI]?de.namespaceURI===rB?gt.namespaceURI===xg?en==="svg":gt.namespaceURI===sB?en==="svg"&&(nr==="annotation-xml"||aB[nr]):!!eK[en]:de.namespaceURI===sB?gt.namespaceURI===xg?en==="math":gt.namespaceURI===rB?en==="math"&&iB[nr]:!!tK[en]:de.namespaceURI===xg?gt.namespaceURI===rB&&!iB[nr]||gt.namespaceURI===sB&&!aB[nr]?!1:!tK[en]&&(FK[en]||!eK[en]):!!(Gk==="application/xhtml+xml"&&Gj[de.namespaceURI]):!1},Rm=function(de){Zh(s.removed,{element:de});try{K(de).removeChild(de)}catch{j(de)}},qk=function(de,gt){try{Zh(s.removed,{attribute:gt.getAttributeNode(de),from:gt})}catch{Zh(s.removed,{attribute:null,from:gt})}if(gt.removeAttribute(de),de==="is")if(VC||nB)try{Rm(gt)}catch{}else try{gt.setAttribute(de,"")}catch{}},nK=function(de){let gt=null,en=null;if(Uj)de="<remove></remove>"+de;else{const za=sM(de,/^[\r\n\t ]+/);en=za&&za[0]}Gk==="application/xhtml+xml"&&ZC===xg&&(de='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+de+"</body></html>");const nr=ie?ie.createHTML(de):de;if(ZC===xg)try{gt=new A().parseFromString(nr,Gk)}catch{}if(!gt||!gt.documentElement){gt=He.createDocument(ZC,"template",null);try{gt.documentElement.innerHTML=jj?me:nr}catch{}}const $i=gt.body||gt.documentElement;return de&&en&&$i.insertBefore(a.createTextNode(en),$i.childNodes[0]||null),ZC===xg?je.call(gt,Sg?"html":"body")[0]:Sg?gt.documentElement:$i},oK=function(de){return Te.call(de.ownerDocument||de,de,C.SHOW_ELEMENT|C.SHOW_COMMENT|C.SHOW_TEXT|C.SHOW_PROCESSING_INSTRUCTION|C.SHOW_CDATA_SECTION,null)},Kj=function(de){return de instanceof k&&(typeof de.nodeName!="string"||typeof de.textContent!="string"||typeof de.removeChild!="function"||!(de.attributes instanceof x)||typeof de.removeAttribute!="function"||typeof de.setAttribute!="function"||typeof de.namespaceURI!="string"||typeof de.insertBefore!="function"||typeof de.hasChildNodes!="function")},sK=function(de){return typeof p=="function"&&de instanceof p};function wg(un,de,gt){uy(un,en=>{en.call(s,de,gt,WC)})}const rK=function(de){let gt=null;if(wg(rt.beforeSanitizeElements,de,null),Kj(de))return Rm(de),!0;const en=Va(de.nodeName);if(wg(rt.uponSanitizeElement,de,{tagName:en,allowedTags:Bt}),de.hasChildNodes()&&!sK(de.firstElementChild)&&ii(/<[/\w]/g,de.innerHTML)&&ii(/<[/\w]/g,de.textContent)||de.nodeType===jh.progressingInstruction||Zk&&de.nodeType===jh.comment&&ii(/<[/\w]/g,de.data))return Rm(de),!0;if(!Bt[en]||Li[en]){if(!Li[en]&&iK(en)&&(Eo.tagNameCheck instanceof RegExp&&ii(Eo.tagNameCheck,en)||Eo.tagNameCheck instanceof Function&&Eo.tagNameCheck(en)))return!1;if(Zj&&!UC[en]){const nr=K(de)||de.parentNode,$i=q(de)||de.childNodes;if($i&&nr){const za=$i.length;for(let hl=za-1;hl>=0;--hl){const Bm=z($i[hl],!0);Bm.__removalCount=(de.__removalCount||0)+1,nr.insertBefore(Bm,V(de))}}}return Rm(de),!0}return de instanceof b&&!zK(de)||(en==="noscript"||en==="noembed"||en==="noframes")&&ii(/<\/no(script|embed|frames)/i,de.innerHTML)?(Rm(de),!0):(Iu&&de.nodeType===jh.text&&(gt=de.textContent,uy([Qt,Et,Lt],nr=>{gt=km(gt,nr," ")}),de.textContent!==gt&&(Zh(s.removed,{element:de.cloneNode()}),de.textContent=gt)),wg(rt.afterSanitizeElements,de,null),!1)},aK=function(de,gt,en){if(Gq&&(gt==="id"||gt==="name")&&(en in a||en in VK))return!1;if(!(Fi&&!Or[gt]&&ii(tt,gt))){if(!(Ii&&ii(xe,gt))){if(!Pn[gt]||Or[gt]){if(!(iK(de)&&(Eo.tagNameCheck instanceof RegExp&&ii(Eo.tagNameCheck,de)||Eo.tagNameCheck instanceof Function&&Eo.tagNameCheck(de))&&(Eo.attributeNameCheck instanceof RegExp&&ii(Eo.attributeNameCheck,gt)||Eo.attributeNameCheck instanceof Function&&Eo.attributeNameCheck(gt))||gt==="is"&&Eo.allowCustomizedBuiltInElements&&(Eo.tagNameCheck instanceof RegExp&&ii(Eo.tagNameCheck,en)||Eo.tagNameCheck instanceof Function&&Eo.tagNameCheck(en))))return!1}else if(!Wj[gt]){if(!ii(dt,km(en,yt,""))){if(!((gt==="src"||gt==="xlink:href"||gt==="href")&&de!=="script"&&hc(en,"data:")===0&&Yq[de])){if(!(gl&&!ii(Be,km(en,yt,"")))){if(en)return!1}}}}}}return!0},iK=function(de){return de!=="annotation-xml"&&sM(de,It)},cK=function(de){wg(rt.beforeSanitizeAttributes,de,null);const{attributes:gt}=de;if(!gt||Kj(de))return;const en={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Pn,forceKeepAttr:void 0};let nr=gt.length;for(;nr--;){const $i=gt[nr],{name:za,namespaceURI:hl,value:Bm}=$i,Kk=Va(za);let di=za==="value"?Bm:lE(Bm);const ZK=di;if(en.attrName=Kk,en.attrValue=di,en.keepAttr=!0,en.forceKeepAttr=void 0,wg(rt.uponSanitizeAttribute,de,en),di=en.attrValue,qq&&(Kk==="id"||Kk==="name")&&(qk(za,de),di=LK+di),Zk&&ii(/((--!?|])>)|<\/(style|title)/i,di)){qk(za,de);continue}if(en.forceKeepAttr)continue;if(!en.keepAttr){qk(za,de);continue}if(!ib&&ii(/\/>/i,di)){qk(za,de);continue}Iu&&uy([Qt,Et,Lt],uK=>{di=km(di,uK," ")});const lK=Va(de.nodeName);if(!aK(lK,Kk,di)){qk(za,de);continue}if(ie&&typeof R=="object"&&typeof R.getAttributeType=="function"&&!hl)switch(R.getAttributeType(lK,Kk)){case"TrustedHTML":{di=ie.createHTML(di);break}case"TrustedScriptURL":{di=ie.createScriptURL(di);break}}if(di!==ZK)try{hl?de.setAttributeNS(hl,za,di):de.setAttribute(za,di),Kj(de)?Rm(de):oM(s.removed)}catch{}}wg(rt.afterSanitizeAttributes,de,null)},UK=function un(de){let gt=null;const en=oK(de);for(wg(rt.beforeSanitizeShadowDOM,de,null);gt=en.nextNode();)wg(rt.uponSanitizeShadowNode,gt,null),rK(gt),cK(gt),gt.content instanceof m&&un(gt.content);wg(rt.afterSanitizeShadowDOM,de,null)};return s.sanitize=function(un){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},gt=null,en=null,nr=null,$i=null;if(jj=!un,jj&&(un="<!-->"),typeof un!="string"&&!sK(un))if(typeof un.toString=="function"){if(un=un.toString(),typeof un!="string")throw y0("dirty is not a string, aborting")}else throw y0("toString is not a function");if(!s.isSupported)return un;if(Wk||qj(de),s.removed=[],typeof un=="string"&&(jk=!1),jk){if(un.nodeName){const Bm=Va(un.nodeName);if(!Bt[Bm]||Li[Bm])throw y0("root node is forbidden and cannot be sanitized in-place")}}else if(un instanceof p)gt=nK("<!---->"),en=gt.ownerDocument.importNode(un,!0),en.nodeType===jh.element&&en.nodeName==="BODY"||en.nodeName==="HTML"?gt=en:gt.appendChild(en);else{if(!VC&&!Iu&&!Sg&&un.indexOf("<")===-1)return ie&&oB?ie.createHTML(un):un;if(gt=nK(un),!gt)return VC?null:oB?me:""}gt&&Uj&&Rm(gt.firstChild);const za=oK(jk?un:gt);for(;nr=za.nextNode();)rK(nr),cK(nr),nr.content instanceof m&&UK(nr.content);if(jk)return un;if(VC){if(nB)for($i=fe.call(gt.ownerDocument);gt.firstChild;)$i.appendChild(gt.firstChild);else $i=gt;return(Pn.shadowroot||Pn.shadowrootmode)&&($i=pt.call(c,$i,!0)),$i}let hl=Sg?gt.outerHTML:gt.innerHTML;return Sg&&Bt["!doctype"]&&gt.ownerDocument&&gt.ownerDocument.doctype&&gt.ownerDocument.doctype.name&&ii(mM,gt.ownerDocument.doctype.name)&&(hl="<!DOCTYPE "+gt.ownerDocument.doctype.name+`>
`+hl),Iu&&uy([Qt,Et,Lt],Bm=>{hl=km(hl,Bm," ")}),ie&&oB?ie.createHTML(hl):hl},s.setConfig=function(){let un=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};qj(un),Wk=!0},s.clearConfig=function(){WC=null,Wk=!1},s.isValidAttribute=function(un,de,gt){WC||qj({});const en=Va(un),nr=Va(de);return aK(en,nr,gt)},s.addHook=function(un,de){typeof de=="function"&&Zh(rt[un],de)},s.removeHook=function(un,de){if(de!==void 0){const gt=GH(rt[un],de);return gt===-1?void 0:Wh(rt[un],gt,1)[0]}return oM(rt[un])},s.removeHooks=function(un){rt[un]=[]},s.removeAllHooks=function(){rt=hM()},s}var o9=pM();const bM=t=>o9().sanitize(t);var pc=tinymce.util.Tools.resolve("tinymce.util.I18n");const vM={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-disc":!0,"list-bull-default":!0,"list-bull-square":!0},gE="temporary-placeholder",hy=t=>()=>Ze(t,gE).getOr("!not found!"),S0=(t,s)=>{const a=t.toLowerCase();if(pc.isRtl()){const c=_o(a,"-rtl");return Yt(s,c)?c:a}else return a},yM=(t,s)=>Ze(s,S0(t,s)),hE=(t,s)=>{const a=s();return yM(t,a).getOrThunk(hy(a))},s9=(t,s,a)=>{const c=s();return yM(t,c).or(a).getOrThunk(hy(c))},r9=t=>pc.isRtl()?Yt(vM,t):!1,CM=()=>Dt("add-focusable",[ro(t=>{cu(t.element,"svg").each(s=>Ot(s,"focusable","false"))})]),SM=(t,s,a,c)=>{var u,m;const f=r9(s)?["tox-icon--flip"]:[],p=Ze(a,S0(s,a)).or(c).getOrThunk(hy(a));return{dom:{tag:t.tag,attributes:(u=t.attributes)!==null&&u!==void 0?u:{},classes:t.classes.concat(f),innerHtml:p},behaviours:Ae([...(m=t.behaviours)!==null&&m!==void 0?m:[],CM()])}},Pa=(t,s,a,c=S.none())=>SM(s,t,a(),c),Td=(t,s,a)=>{const c=a(),u=_t(t,m=>Yt(c,S0(m,c)));return SM(s,u.getOr(gE),c,S.none())},a9={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},pE=Di({name:"Notification",factory:t=>{const s=Ue("notification-text"),a=Tn({dom:ku(`<p id=${s}>${bM(t.backstageProvider.translate(t.text))}</p>`),behaviours:Ae([Nt.config({})])}),c=L=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${L}%`}}}),u=L=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${L}%`}}),m=Tn({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(0)]},u(0)],behaviours:Ae([Nt.config({})])}),b={updateProgress:(L,z)=>{L.getSystem().isConnected()&&m.getOpt(L).each(j=>{Nt.set(j,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(z)]},u(z)])})},updateText:(L,z)=>{if(L.getSystem().isConnected()){const j=a.get(L);Nt.set(j,[lo(z)])}}},C=At([t.icon.toArray(),[t.level],S.from(a9[t.level]).toArray()]),x=Tn(er.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[Pa("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:Ae([Yn.config({}),bo.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:L=>{t.onAction(L)}})),k=Td(C,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),A={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:Ae([Nt.config({})])},R=[k,A];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},behaviours:Ae([Yn.config({}),St.config({}),nt.config({mode:"special",onEscape:L=>(t.onAction(L),S.some(!0))})]),components:R.concat(t.progress?[m.asSpec()]:[]).concat([x.asSpec()]),apis:b}},configFields:[Uo("level","info",["success","error","warning","warn","info"]),we("progress"),On("icon"),we("onAction"),we("text"),we("iconProvider"),we("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var bE=(t,s,a,c)=>{const u=s.backstage.shared,m=()=>ne.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),f=()=>{const k=mr(m());return S.some(k)},p=k=>{f().each(A=>{ze(k,R=>{Ie(R.element,"width"),As(R.element)>A.width&&Rt(R.element,"width",A.width+"px")})})};return{open:(k,A,R)=>{const L=()=>{const K=Te=>{Nt.remove(Te,j),V()},ie=(Te,fe)=>{Rr(Te.element).length===0?me(Te,fe):He(Te,fe)},me=(Te,fe)=>{vo.hide(Te),c.clear(),fe&&t.focus()},He=(Te,fe)=>{fe&&nt.focusIn(Te)};c.on(Te=>{A();const fe=R();K(Te),ie(Te,fe)})},z=()=>!Uh(t)||!u.header.isPositionedAtTop(),j=$r(pE.sketch({text:k.text,level:jn(["success","error","warning","warn","info"],k.type)?k.type:void 0,progress:k.progressBar===!0,icon:k.icon,onAction:L,iconProvider:u.providers.icons,backstageProvider:u.providers}));if(c.isSet()){const K=Ai(j);c.on(ie=>{Nt.append(ie,K),vo.reposition(ie),j.hasConfigured(po)&&po.refresh(ie),p(ie.components())})}else{const K=$r(vo.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:u.getSink,fireDismissalEventInstead:{},...u.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ae([nt.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Nt.config({}),...z()?[po.config({contextual:{lazyContext:()=>S.some(mr(m())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Te=>Em(t,Te.element).map(je=>({bounds:Gf(je),optScrollEnv:S.some({currentScrollTop:je.element.dom.scrollTop,scrollElmTop:$c(je.element).top})})).getOrThunk(()=>({bounds:Pr(),optScrollEnv:S.none()}))})]:[]])})),ie=Ai(j),me={maxHeightFunction:hf()},He={...u.anchors.banner(),overrides:me};c.set(K),a.add(K),vo.showWithinBounds(K,ie,{anchor:He},f)}Zr(k.timeout)&&k.timeout>0&&sy.setEditorTimeout(t,()=>{L()},k.timeout);const V=()=>{c.on(K=>{vo.reposition(K),K.hasConfigured(po)&&po.refresh(K),p(K.components())})};return{close:L,reposition:V,text:K=>{pE.updateText(j,K)},settings:k,getEl:()=>j.element.dom,progressBar:{value:K=>{pE.updateProgress(j,K)}}}},close:k=>{k.close()},getArgs:k=>k.settings}};const i9={setup:(t,s)=>{const a=(u,m)=>{mt(u,Al(),{raw:m})},c=()=>t.getMenu().bind(kn.getHighlighted);s.on("keydown",u=>{const m=u.which;t.isActive()&&(t.isMenuOpen()?m===13?(c().each(pf),u.preventDefault()):m===40?(c().fold(()=>{t.getMenu().each(kn.highlightFirst)},f=>{a(f,u)}),u.preventDefault(),u.stopImmediatePropagation()):(m===37||m===38||m===39)&&c().each(f=>{a(f,u),u.preventDefault(),u.stopImmediatePropagation()}):(m===13||m===38||m===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var vE;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(vE||(vE={}));var bc=vE;const yE="tox-menu-nav__js",Gh="tox-collection__item",x0="tox-swatch",CE={normal:yE,color:x0},SE="tox-collection__item--enabled",Ni="tox-collection__group-heading",xM="tox-collection__item-icon",c9="tox-collection__item-image",wM="tox-collection__item-image-selector",by="tox-collection__item-label",l9="tox-collection__item-accessory",EM="tox-collection__item-caret",u9="tox-collection__item-checkmark",Kf="tox-collection__item--active",kM="tox-collection__item-container",d9="tox-collection__item-container--column",TM="tox-collection__item-container--row",_M="tox-collection__item-container--align-right",m9="tox-collection__item-container--align-left",f9="tox-collection__item-container--valign-top",g9="tox-collection__item-container--valign-middle",AM="tox-collection__item-container--valign-bottom",vy=t=>Ze(CE,t).getOr(yE),OM=t=>t==="color"?"tox-swatches":"tox-menu",yy=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:OM(t),tieredMenu:"tox-tiered-menu"}),_d=t=>{const s=yy(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:vy(t)}},DM=(t,s,a)=>{const c=yy(a);return{tag:"div",classes:At([[c.menu,`tox-menu-${s}-column`],t?[c.hasIcons]:[]])}},xE=[_u.parts.items({})],Cy=(t,s,a)=>{const c=yy(a);return{dom:{tag:"div",classes:At([[c.tieredMenu]])},markers:_d(a)}},Sy=Ue("refetch-trigger-event"),Yf=Ue("redirect-menu-item-interaction"),wE="tox-menu__searcher",w0=t=>qn(t.element,`.${wE}`).bind(s=>t.getSystem().getByDom(s).toOptional()),EE=w0,h9=(t,s)=>{We.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},MM=t=>{const s=We.getValue(t),a=t.element.dom.selectionStart,c=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:c}},xy=(t,s)=>{Ts(s.element,"id").each(a=>Ot(t.element,"aria-activedescendant",a))},p9=t=>{const s=(u,m)=>(m.cut(),S.none()),a=(u,m)=>{const f={interactionEvent:m.event,eventType:m.event.raw.type};return mt(u,Yf,f),S.some(!0)},c="searcher-events";return{dom:{tag:"div",classes:[Gh]},components:[Ou.sketch({inputClasses:[wE,"tox-textfield"],inputAttributes:{...t.placeholder.map(u=>({placeholder:t.i18n(u)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Ae([Dt(c,[ve(td(),u=>{rn(u,Sy)}),ve(Al(),(u,m)=>{m.event.raw.key==="Escape"&&m.stop()})]),nt.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[c,nt.name()]}})]}},wy="tox-collection--results__js",kE=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Ue("aria-item-search-result-id"),"aria-selected":"false"}}}:t},E0=(t,s)=>a=>{const c=fi(a,s);return ke(c,u=>({dom:t,components:u}))},TE=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[_u.parts.items({preprocess:t!=="auto"?E0({tag:"div",classes:["tox-swatches__row"]},t):$t})]}]}),NM=t=>({dom:{tag:"div",classes:["tox-menu","tox-image-selector-menu"]},components:[{dom:{tag:"div",classes:["tox-image-selector"]},components:[_u.parts.items({preprocess:t!=="auto"?E0({tag:"div",classes:["tox-image-selector__row"]},t):$t})]}]}),wa=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[_u.parts.items({preprocess:E0({tag:"div",classes:["tox-collection__group"]},t)})]}),_E=(t,s)=>{const a=[];let c=[];return ze(t,(u,m)=>{s(u,m)?(c.length>0&&a.push(c),c=[],(Yt(u.dom,"innerHtml")||u.components&&u.components.length>0)&&c.push(u)):c.push(u)}),c.length>0&&a.push(c),ke(a,u=>({dom:{tag:"div",classes:["tox-collection__group"]},components:u}))},AE=(t,s,a)=>_u.parts.items({preprocess:c=>{const u=ke(c,a);return t!=="auto"&&t>1?E0({tag:"div",classes:["tox-collection__group"]},t)(u):_E(u,(m,f)=>s[f].type==="separator")}}),RM=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[AE(t,s,$t)]}),BM=(t,s,a=!0)=>{const c=Ue("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",wy].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:c}},components:[AE(t,s,kE)]}},b9=(t,s,a)=>{const c=Ue("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[p9({i18n:pc.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],wy],attributes:{id:c}},components:[AE(t,s,kE)]}]}},v9=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[_u.parts.items({preprocess:a=>_E(a,(c,u)=>t[u].type==="separator")})]}),k0=t=>ms(t,s=>"icon"in s&&s.icon!==void 0),ll=t=>(console.error(of(t)),console.log(t),S.none()),Mu=(t,s,a,c,u)=>{const m=v9(a);return{value:t,dom:m.dom,components:m.components,items:a}},T0=(t,s,a,c,u)=>{const m=()=>u.menuType!=="searchable"?RM(c,a):u.searchMode.searchMode==="search-with-field"?b9(c,a,u.searchMode):BM(c,a);if(u.menuType==="color"){const f=TE(c);return{value:t,dom:f.dom,components:f.components,items:a}}else if(u.menuType==="imageselector"&&c!=="auto"){const f=NM(c);return{value:t,dom:f.dom,components:f.components,items:a}}else if(u.menuType==="normal"&&c==="auto"){const f=RM(c,a);return{value:t,dom:f.dom,components:f.components,items:a}}else if(u.menuType==="normal"||u.menuType==="searchable"){const f=m();return{value:t,dom:f.dom,components:f.components,items:a}}else if(u.menuType==="listpreview"&&c!=="auto"){const f=wa(c);return{value:t,dom:f.dom,components:f.components,items:a}}else return{value:t,dom:DM(s,c,u.menuType),components:xE,items:a}},Io=Hs("type"),qh=Hs("name"),Kh=Hs("label"),Ad=Hs("text"),PM=Hs("title"),OE=Hs("icon"),y9=Hs("url"),Yh=Hs("value"),C9=Wc("fetch"),S9=Wc("getSubmenuItems"),Xf=Wc("onAction"),x9=Wc("onItemAction"),La=co("onSetup",()=>re),Ey=is("name"),Tm=is("text"),w9=is("role"),Ri=is("icon"),_m=is("tooltip"),Jf=is("label"),Xh=is("shortcut"),_0=Tl("select"),Nu=kr("active",!1),LM=kr("borderless",!1),vc=kr("enabled",!0),A0=kr("primary",!1),DE=t=>oe("columns",t),ME=oe("meta",{}),NE=co("onAction",re),Qf=t=>so("type",t),RE=t=>Er("name","name",qb(()=>Ue(`${t}-name`)),hs),E9=t=>Er("value","value",qb(()=>Ue(`${t}-value`)),Uc()),IM=[Io,Ad,Ti("level",["info","warn","error","success"]),OE,oe("url","")],FM=wt(IM),k9=t=>[Io,t],$M=[Io,Ad,vc,RE("button"),Ri,LM,kS("buttonType",["primary","secondary","toolbar"]),A0,so("context","mode:design")],T9=wt($M),eg=[Io,qh],Ea=eg.concat([Jf]),_9=eg.concat([Kh,vc,so("context","mode:design")]),HM=wt(_9),A9=jb,O9=Ea.concat([DE("auto"),so("context","mode:design")]),D9=wt(O9),M9=Gg([Yh,Ad,OE]),VM=Ea.concat([so("storageKey","default"),so("context","mode:design")]),N9=wt(VM),zM=hs,Od=wt(Ea),BE=hs,ZM=eg.concat([so("tag","textarea"),Hs("scriptId"),Hs("scriptUrl"),Tl("onFocus"),YB("settings",void 0)]),WM=eg.concat([so("tag","textarea"),Wc("init")]),PE=nf(t=>Po("customeditor.old",Ei(WM),t).orThunk(()=>Po("customeditor.new",Ei(ZM),t))),jM=hs,Pl=[vc,Tm,w9,Xh,E9("menuitem"),ME,so("context","mode:design")],GM=wt([Io,qh].concat(Pl)),qM=jb,LE=[RE("button"),Ri,Uo("align","end",["start","end"]),A0,vc,kS("buttonType",["primary","secondary"]),so("context","mode:design")],KM=[...LE,Ad],IE=[Ti("type",["submit","cancel","custom"]),...KM],R9=[Ti("type",["menu"]),Tm,_m,Ri,Ya("items",GM),...LE],B9=[...LE,Ti("type",["togglebutton"]),_m,Ri,Tm,kr("active",!1)],YM=Ka("type",{submit:IE,cancel:IE,custom:IE,menu:R9,togglebutton:B9}),XM=Ea.concat([so("context","mode:design")]),P9=wt(XM),L9=KB(),I9=t=>[Io,CT("columns"),t],ky=[Io,Hs("html"),Uo("presets","presentation",["presentation","document"]),co("onInit",re),kr("stretched",!1)],F9=wt(ky),$9=Ea.concat([kr("border",!1),kr("sandboxed",!0),kr("streamContent",!1),kr("transparent",!0)]),JM=wt($9),QM=hs,H9=wt(eg.concat([is("height")])),V9=wt([Hs("url"),Yp("zoom"),Yp("cachedWidth"),Yp("cachedHeight")]),FE=Ea.concat([is("inputMode"),is("placeholder"),kr("maximized",!1),vc,so("context","mode:design")]),z9=wt(FE),e6=hs,U9=t=>[Io,Kh,t,Uo("align","start",["start","center","end"]),is("for")],Z9=[Ad,Yh],W9=[Ad,Ya("items",wS("items",()=>$E))],$E=Xb([wt(Z9),wt(W9)]),t6=Ea.concat([Ya("items",$E),vc,so("context","mode:design")]),j9=wt(t6),G9=hs,q9=Ea.concat([ST("items",[Ad,Yh]),wT("size",1),vc,so("context","mode:design")]),K9=wt(q9),n6=hs,Y9=Ea.concat([kr("constrain",!0),vc,so("context","mode:design")]),o6=wt(Y9),s6=wt([Hs("width"),Hs("height")]),X9=eg.concat([Kh,wT("min",0),wT("max",0)]),J9=wt(X9),Q9=Wb,eV=[Io,Ya("header",hs),Ya("cells",gu(hs))],tV=wt(eV),nV=Ea.concat([is("placeholder"),kr("maximized",!1),vc,so("context","mode:design")]),oV=wt(nV),sV=hs,HE=[so("buttonType","default"),is("text"),is("tooltip"),is("icon"),Gc("search",!1,Xb([jb,wt([is("placeholder")])],t=>yo(t)?t?S.some({placeholder:S.none()}):S.none():S.some(t))),Wc("fetch"),co("onSetup",()=>re),so("context","mode:design")],r6=wt([Io,...HE]),a6=t=>Po("menubutton",r6,t),i6=[Ti("type",["directory","leaf"]),PM,Hs("id"),Na("menu",r6),is("customStateIcon"),is("customStateIconTooltip")],_y=wt(i6),rV=i6.concat([Ya("children",wS("children",()=>Zc("type",{directory:c6,leaf:_y})))]),c6=wt(rV),VE=Zc("type",{directory:c6,leaf:_y}),aV=[Io,Ya("items",VE),Tl("onLeafAction"),Tl("onToggleExpand"),Xd("defaultExpandedIds",[],hs),is("defaultSelectedId")],zE=wt(aV),l6=Ea.concat([Uo("filetype","file",["image","media","file"]),vc,is("picker_text"),so("context","mode:design")]),iV=wt(l6),cV=wt([Yh,ME]),Ay=t=>Er("items","items",kl(),gu(nf(s=>Po(`Checking item of ${t}`,Oy,s).fold(a=>Ft.error(of(a)),a=>Ft.value(a))))),Oy=CS(()=>Zc("type",{alertbanner:FM,bar:wt(k9(Ay("bar"))),button:T9,checkbox:HM,colorinput:N9,colorpicker:Od,dropzone:P9,grid:wt(I9(Ay("grid"))),iframe:JM,input:z9,listbox:j9,selectbox:K9,sizeinput:o6,slider:J9,textarea:oV,urlinput:iV,customeditor:PE,htmlpanel:F9,imagepreview:H9,collection:D9,label:wt(U9(Ay("label"))),table:tV,tree:zE,panel:UE})),lV=[Io,oe("classes",[]),Ya("items",Oy)],UE=wt(lV),u6=[RE("tab"),PM,Ya("items",Oy)],uV=[Io,ST("tabs",u6)],d6=wt(uV),m6=KM,f6=YM,dV=wt([Hs("title"),ki("body",Zc("type",{panel:UE,tabpanel:d6})),so("size","normal"),Xd("buttons",[],f6),oe("initialData",{}),co("onAction",re),co("onChange",re),co("onSubmit",re),co("onClose",re),co("onCancel",re),co("onTabChange",re)]),mV=t=>Po("dialog",dV,t),fV=wt([Ti("type",["cancel","custom"]),...m6]),g6=wt([Hs("title"),Hs("url"),Yp("height"),Yp("width"),TS("buttons",fV),co("onAction",re),co("onCancel",re),co("onClose",re),co("onMessage",re)]),gV=t=>Po("dialog",g6,t),Dy=t=>rr(t)?[t].concat(pe(jl(t),Dy)):X(t)?pe(t,Dy):[],hV=t=>Tt(t.type)&&Tt(t.name),pV={checkbox:A9,colorinput:zM,colorpicker:BE,dropzone:L9,input:e6,iframe:QM,imagepreview:V9,selectbox:n6,sizeinput:s6,slider:Q9,listbox:G9,size:s6,textarea:sV,urlinput:cV,customeditor:jM,collection:M9,togglemenuitem:qM},ZE=t=>S.from(pV[t.type]),bV=t=>Zn(Dy(t),hV),vV=t=>{const s=bV(t),a=pe(s,c=>ZE(c).fold(()=>[],u=>[ki(c.name,u)]));return wt(a)},h6=t=>{var s;const a=Qi(mV(t)),c=vV(t),u=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:c,initialData:u}},Dd={open:(t,s)=>{const a=h6(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=Qi(gV(s));return t(a)},redial:t=>h6(t)},p6=wt([Io,Tm]),b6=t=>Po("separatormenuitem",p6,t),yV=wt([Qf("autocompleteitem"),Nu,vc,ME,Yh,Tm,Ri]),v6=t=>Po("Autocompleter.Separator",p6,t),CV=t=>Po("Autocompleter.Item",yV,t),Jh=[vc,_m,Ri,Tm,La,so("context","mode:design")],SV=wt([Io,Xf,Xh].concat(Jh)),WE=t=>Po("toolbarbutton",SV,t),jE=[Nu].concat(Jh),y6=wt(jE.concat([Io,Xf,Xh])),C6=t=>Po("ToggleButton",y6,t),My=[co("predicate",gn),Uo("scope","node",["node","editor"]),Uo("position","selection",["node","selection","line"])],S6=Jh.concat([Qf("contextformbutton"),so("align","end"),A0,Xf,ea("original",$t)]),xV=jE.concat([Qf("contextformbutton"),so("align","end"),A0,Xf,ea("original",$t)]),wV=Jh.concat([Qf("contextformbutton")]),EV=jE.concat([Qf("contextformtogglebutton")]),x6=Ka("type",{contextformbutton:S6,contextformtogglebutton:xV}),GE=[Jf,Ya("commands",x6),Na("launch",Ka("type",{contextformbutton:wV,contextformtogglebutton:EV})),co("onInput",re),co("onSetup",re)],kV=[...My,...GE,Ti("type",["contextform"]),co("initValue",ee("")),is("placeholder")],TV=[...My,...GE,Ti("type",["contextsliderform"]),co("initValue",ee(0)),co("min",ee(0)),co("max",ee(100))],w6=[...My,...GE,Ti("type",["contextsizeinputform"]),co("initValue",ee({width:"",height:""}))],E6=Ka("type",{contextform:kV,contextsliderform:TV,contextsizeinputform:w6}),k6=t=>Po("ContextForm",E6,t),Ny=Jh.concat([Qf("contexttoolbarbutton")]),_V=wt([Qf("contexttoolbar"),Xa("launch",Ny),ki("items",Xb([hs,Gg([is("name"),is("label"),Ya("items",hs)])]))].concat(My)),AV=t=>({name:t.name.getOrUndefined(),label:t.label.getOrUndefined(),items:t.items}),OV=t=>({...t,launch:t.launch.getOrUndefined(),items:Tt(t.items)?t.items:ke(t.items,AV)}),DV=t=>Po("ContextToolbar",_V,t),T6=[Io,Hs("src"),is("alt"),Xd("classes",[],hs)],MV=wt(T6),NV=[Io,Ad,Ey,Xd("classes",["tox-collection__item-label"],hs)],RV=wt(NV),qE=CS(()=>Zc("type",{cardimage:MV,cardtext:RV,cardcontainer:_6})),_6=wt([Io,so("direction","horizontal"),so("align","left"),so("valign","middle"),Ya("items",qE)]),BV=wt([Io,Jf,Ya("items",qE),La,NE].concat(Pl)),PV=t=>Po("cardmenuitem",BV,t),A6=wt([Io,Nu,Ri,Jf].concat(Pl)),LV=t=>Po("choicemenuitem",A6,t),KE=[Io,Hs("fancytype"),NE],Mt=[oe("initData",{})].concat(KE),O0=[Tl("select"),Qb("initData",{},[kr("allowCustomColors",!0),so("storageKey","default"),TS("colors",Uc())])].concat(KE),O6=[Tl("select"),jc("initData",[CT("columns"),Xd("items",[],Uc())])].concat(KE),D6=Ka("fancytype",{inserttable:Mt,colorswatch:O0,imageselect:O6}),M6=t=>Po("fancymenuitem",D6,t),N6=wt([Io,Nu,y9,Jf,_m].concat(Pl)),IV=wt([Io,Nu,OE,Kh,_m,Yh].concat(Pl)),R6=t=>Po("imagemenuitem",N6,t),FV=t=>Po("resetimageitem",IV,t),$V=wt([Io,La,NE,Ri].concat(Pl)),HV=t=>Po("menuitem",$V,t),B6=wt([Io,S9,La,Ri].concat(Pl)),P6=t=>Po("nestedmenuitem",B6,t),QG=wt([Io,Ri,Nu,La,Xf].concat(Pl)),D0=t=>Po("togglemenuitem",QG,t),YE=wt([Ri,_m,co("onShow",re),co("onHide",re),La]),L6=t=>Po("sidebar",YE,t),VV=wt([Io,ki("items",Xb([Gg([qh,Ya("items",hs)]),hs]))].concat(Jh)),zV=t=>Po("GroupToolbarButton",VV,t),I6=wt([Io,_m,Ri,Tm,_0,C9,La,Uo("presets","normal",["normal","color","listpreview"]),DE(1),Xf,x9,so("context","mode:design")]),UV=t=>Po("SplitButton",I6,t),F6=[Tm,Ri,is("tooltip"),Uo("buttonType","secondary",["primary","secondary"]),kr("borderless",!1),Wc("onAction"),so("context","mode:design")],XE=[...F6,Ad,Ti("type",["button"])],ZV=[...F6,kr("active",!1),Ti("type",["togglebutton"])],M0={button:XE,togglebutton:ZV},WV=[Ti("type",["group"]),Xd("buttons",[],Ka("type",M0))],$6=Ka("type",{...M0,group:WV}),jV=wt([Xd("buttons",[],$6),Wc("onShow"),Wc("onHide")]),GV=t=>Po("view",jV,t),H6=(t,s,a)=>{const c=go(t.element,"."+a);if(c.length>0){const u=Vn(c,m=>{const f=m.dom.getBoundingClientRect().top,p=c[0].dom.getBoundingClientRect().top;return Math.abs(f-p)>s}).getOr(c.length);return S.some({numColumns:u,numRows:Math.ceil(c.length/u)})}else return S.none()},V6=(t,s)=>Ae([Dt(t,s)]),tg={namedEvents:V6,unnamedEvents:t=>V6(Ue("unnamed-events"),t)},li={item:t=>st.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>st.config({disabled:t}),splitButton:t=>st.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>st.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},N0=(t,s)=>{const a=t.getApi(s);return c=>{c(a)}},ul=(t,s)=>ro(a=>{Cs(t.onBeforeSetup)&&t.onBeforeSetup(a),N0(t,a)(u=>{const m=t.onSetup(u);Cs(m)&&s.set(m)})}),yc=(t,s)=>Dl(a=>N0(t,a)(s.get())),Ry=(t,s,a)=>Dl(c=>(a.set(We.getValue(c)),N0(t,c)(s.get()))),z6="silver.uistate",R0="setDisabled",YV="setEnabled",By="init",XV=["switchmode",By],Qh=(t,s)=>{const a=t.mainUi.outerContainer,c=[t.mainUi.mothership,...t.uiMotherships];s===R0&&ze(c,u=>{u.broadcastOn([Tu()],{target:a.element})}),ze(c,u=>{u.broadcastOn([z6],s)})},U6=(t,s)=>{t.on("init SwitchMode",a=>{Qh(s,a.type)}),t.on("DisabledStateChange",a=>{if(!a.isDefaultPrevented()){const c=a.state?R0:By;Qh(s,c),a.state||t.nodeChanged()}}),t.on("NodeChange",a=>{const c=t.ui.isEnabled()?a.type:R0;Qh(s,c)}),RD(t)&&t.mode.set("readonly")},Xo=t=>xa.config({channels:{[z6]:{onReceive:(s,a)=>{if(a===R0||a===YV){st.set(s,a===R0);return}const{contextType:c,shouldDisable:u}=t();c==="mode"&&!jn(XV,a)||st.set(s,u)}}}}),JV=(t,s)=>md((a,c)=>{N0(t,a)(t.onAction),!t.triggersSubmenu&&s===bc.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&rn(a,tv()),c.stop())}),Z6={[_i()]:["disabling","alloy.base.behaviour","toggling","item-events"]},ep=Ui,ng=(t,s,a,c)=>{const u=Ve(re);return{type:"item",dom:s.dom,components:ep(s.optComponents),data:t.data,eventOrder:Z6,hasSubmenu:t.triggersSubmenu,itemBehaviours:Ae([Dt("item-events",[JV(t,a),ul(t,u),yc(t,u)]),li.item(()=>!t.enabled||c.checkUiComponentContext(t.context).shouldDisable),Xo(()=>c.checkUiComponentContext(t.context)),Nt.config({})].concat(t.itemBehaviours))}},og=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),QV=(t,s)=>{var a,c;const u=ne.fromTag("div");Vo(u,"tox-image-selector-loading-spinner");const m=p=>{Vo(p,"tox-image-selector-loading-spinner-wrapper"),Da(p,u)},f=p=>{fo(p,"tox-image-selector-loading-spinner-wrapper"),Fc(u)};return{dom:{tag:t.tag,attributes:(a=t.attributes)!==null&&a!==void 0?a:{},classes:t.classes},components:[{dom:{tag:"div",classes:["tox-image-selector-image-wrapper"]},components:[{dom:{tag:"img",attributes:{src:s},classes:["tox-image-selector-image-img"]}}]},...t.checkMark.toArray()],behaviours:Ae([...(c=t.behaviours)!==null&&c!==void 0?c:[],Dt("render-image-events",[ro(p=>{m(p.element),qn(p.element,"img").each(b=>{$s(b).catch(C=>{console.error(C)}).finally(()=>{f(p.element)})})})])])}},ez=(t,s)=>QV(s,t),QE=t=>{const s=kd.os.isMacOS()||kd.os.isiOS(),u=s?{alt:"‚å•",ctrl:"‚åÉ",shift:"‚áß",meta:"‚åò",access:"‚åÉ‚å•"}:{meta:"Ctrl",access:"Shift+Alt"},m=t.split("+"),f=ke(m,p=>{const b=p.toLowerCase().trim();return Yt(u,b)?u[b]:p});return s?f.join(""):f.join("+")},e3=(t,s,a=[xM])=>Pa(t,{tag:"div",classes:a},s),W6=t=>({dom:{tag:"div",classes:[by]},components:[lo(pc.translate(t))]}),j6=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),tz=(t,s)=>({dom:{tag:"div",classes:[by]},components:[{dom:{tag:t.tag,styles:t.styles},components:[lo(pc.translate(s))]}]}),nz=t=>({dom:{tag:"div",classes:[l9]},components:[lo(QE(t))]}),Py=t=>e3("checkmark",t,[u9]),oz=t=>e3("chevron-right",t,[EM]),sz=t=>e3("chevron-down",t,[EM]),rz=(t,s)=>{const a=t.direction==="vertical"?d9:TM,c=t.align==="left"?m9:_M;return{dom:{tag:"div",classes:[kM,a,c,(()=>{switch(t.valign){case"top":return f9;case"middle":return g9;case"bottom":return AM}})()]},components:s}},az=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),iz=(t,s,a)=>{const c="custom",u="remove",m=t.value,f=t.iconContent.map(C=>s9(C,s.icons,a)),p=t.ariaLabel.map(C=>({"aria-label":s.translate(C),"data-mce-name":C})).getOr({});return{dom:(()=>{const C=x0,x=f.getOr(""),k={tag:"div",attributes:p,classes:[C]};return m===c?{...k,tag:"button",classes:[...k.classes,"tox-swatches__picker-btn"],innerHtml:x}:m===u?{...k,classes:[...k.classes,"tox-swatch--remove"],innerHtml:x}:uo(m)?{...k,attributes:{...k.attributes,"data-mce-color":m},styles:{"background-color":m},innerHtml:x}:k})(),optComponents:[]}},t3=(t,s)=>{const a=t.map(c=>({attributes:{id:Ue("menu-item"),"aria-label":pc.translate(c)}})).getOr({});return{tag:"div",classes:[yE,Gh].concat(s),...a}},n3=t=>({dom:{tag:"label"},components:[lo(t)]}),cz=(t,s,a,c)=>{const u={tag:"div",classes:[xM]},m=A=>Pa(A,u,s.icons,c),f=()=>S.some({dom:u}),p=a?t.iconContent.map(m).orThunk(f):S.none(),b=t.checkMark,C=S.from(t.meta).fold(()=>W6,A=>Yt(A,"style")?hn(tz,A.style):W6),x=t.htmlContent.fold(()=>t.textContent.map(C),A=>S.some(j6(A,[by])));return{dom:t3(t.ariaLabel,[]),optComponents:[p,x,t.shortcutContent.map(nz),b,t.caret,t.labelContent.map(n3)]}},G6=t=>({dom:t3(t.ariaLabel,[wM]),optComponents:[S.some(ez(t.iconContent.getOrDie(),{tag:"div",classes:[c9],checkMark:t.checkMark})),t.labelContent.map(n3)]}),tp=(t,s,a,c=S.none())=>t.presets==="color"?iz(t,s,c):t.presets==="img"?G6(t):cz(t,s,a,c),o3=(t,s,a)=>Ze(t,"tooltipWorker").map(c=>[bo.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:u=>({type:"submenu",item:u,overrides:{maxHeightFunction:hf}}),mode:"follow-highlight",onShow:(u,m)=>{c(f=>{bo.setComponents(u,[Kv({element:ne.fromDom(f)})])})}})]).getOrThunk(()=>a.map(c=>[bo.config({...s.providers.tooltips.getConfig({tooltipText:c}),mode:"follow-highlight"})]).getOr([])),q6=t=>f0.DOM.encode(t),Ly=(t,s)=>{const a=pc.translate(t),c=q6(a);if(s.length>0){const u=new RegExp(fs(s),"gi");return c.replace(u,m=>`<span class="tox-autocompleter-highlight">${m}</span>`)}else return c},lz=(t,s,a,c,u,m,f,p=!0)=>{const b=tp({presets:c,textContent:S.none(),htmlContent:a?t.text.map(x=>Ly(x,s)):S.none(),ariaLabel:t.text,labelContent:S.none(),iconContent:t.icon,shortcutContent:S.none(),checkMark:S.none(),caret:S.none(),value:t.value},f.providers,p,t.icon),C=t.text.filter(x=>!a&&x!=="");return ng({context:"mode:design",data:og(t),enabled:t.enabled,getApi:ee({}),onAction:x=>u(t.value,t.meta),onSetup:ee(re),triggersSubmenu:!1,itemBehaviours:o3(t,f,C)},b,m,f.providers)},s3=(t,s)=>ke(t,a=>{switch(a.type){case"cardcontainer":return rz(a,s3(a.items,s));case"cardimage":return az(a.src,a.classes,a.alt);case"cardtext":const u=a.name.exists(m=>jn(s.cardText.highlightOn,m))?S.from(s.cardText.matchText).getOr(""):"";return j6(Ly(a.text,u),a.classes)}}),uz=(t,s,a,c)=>{const u=f=>({isEnabled:()=>!st.isDisabled(f),setEnabled:p=>{st.set(f,!p),ze(go(f.element,"*"),b=>{f.getSystem().getByDom(b).each(C=>{C.hasConfigured(st)&&st.set(C,!p)})})}}),m={dom:t3(t.label,[]),optComponents:[S.some({dom:{tag:"div",classes:[kM,TM]},components:s3(t.items,c)})]};return ng({context:"mode:design",data:og({text:S.none(),...t}),enabled:t.enabled,getApi:u,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:S.from(c.itemBehaviours).getOr([])},m,s,a.providers)},r3=(t,s,a,c,u,m,f,p=!0)=>{const b=k=>({setActive:A=>{Ut.set(k,A)},isActive:()=>Ut.isOn(k),isEnabled:()=>!st.isDisabled(k),setEnabled:A=>st.set(k,!A)}),C=tp({presets:a,textContent:s?t.text:S.none(),htmlContent:S.none(),labelContent:t.label,ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:S.none(),checkMark:s?S.some(Py(f.icons)):S.none(),caret:S.none(),value:t.value},f,p),x=t.text.filter(ee(!s)).map(k=>bo.config(f.tooltips.getConfig({tooltipText:f.translate(k)})));return Nn(ng({context:t.context,data:og(t),enabled:t.enabled,getApi:b,onAction:k=>c(t.value),onSetup:k=>(k.setActive(u),re),triggersSubmenu:!1,itemBehaviours:[...x.toArray()]},C,m,f),{toggling:{toggleClass:SE,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},K6=t=>({value:X6(t)}),a3=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Y6=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,i3=t=>a3.test(t)||Y6.test(t),X6=t=>yr(t,"#").toUpperCase(),dz=t=>i3(t)?S.some({value:X6(t)}):S.none(),Ll=t=>({value:t.value.replace(a3,(a,c,u,m)=>c+c+u+u+m+m)}),Iy=t=>{const s=Ll(t),a=Y6.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},np=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},B0=t=>{const s=np(t.red)+np(t.green)+np(t.blue);return K6(s)},sg=(t,s,a)=>({hue:t,saturation:s,value:a}),c3=t=>{let s=0,a=0,c=0;const u=t.red/255,m=t.green/255,f=t.blue/255,p=Math.min(u,Math.min(m,f)),b=Math.max(u,Math.max(m,f));if(p===b)return c=p,sg(0,0,c*100);const C=u===p?m-f:f===p?u-m:f-u;return s=u===p?3:f===p?1:5,s=60*(s-C/(b-p)),a=(b-p)/b,c=b,sg(Math.round(s),Math.round(a*100),Math.round(c*100))},Fy=Math.min,l3=Math.max,op=Math.round,mz=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,fz=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Am=(t,s,a,c)=>({red:t,green:s,blue:a,alpha:c}),u3=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},J6=t=>{let s,a,c;const u=(t.hue||0)%360;let m=t.saturation/100,f=t.value/100;if(m=l3(0,Fy(m,1)),f=l3(0,Fy(f,1)),m===0)return s=a=c=op(255*f),Am(s,a,c,1);const p=u/60,b=f*m,C=b*(1-Math.abs(p%2-1)),x=f-b;switch(Math.floor(p)){case 0:s=b,a=C,c=0;break;case 1:s=C,a=b,c=0;break;case 2:s=0,a=b,c=C;break;case 3:s=0,a=C,c=b;break;case 4:s=C,a=0,c=b;break;case 5:s=b,a=0,c=C;break;default:s=a=c=0}return s=op(255*(s+x)),a=op(255*(a+x)),c=op(255*(c+x)),Am(s,a,c,1)},rg=t=>{const s=Iy(t),a=parseInt(s[1],16),c=parseInt(s[2],16),u=parseInt(s[3],16);return Am(a,c,u,1)},Q6=(t,s,a,c)=>{const u=parseInt(t,10),m=parseInt(s,10),f=parseInt(a,10),p=parseFloat(c);return Am(u,m,f,p)},d3=t=>{const s=mz.exec(t);if(s!==null)return S.some(Q6(s[1],s[2],s[3],"1"));const a=fz.exec(t);return a!==null?S.some(Q6(a[1],a[2],a[3],a[4])):S.none()},m3=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,f3=Am(255,0,0,1),gz=t=>c3(rg(t)),eN=t=>B0(J6(t)),hz=t=>dz(t).orThunk(()=>d3(t).map(B0)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const c=a.getImageData(0,0,1,1).data,u=c[0],m=c[1],f=c[2],p=c[3];return B0(Am(u,m,f,p))}),pz=t=>{t.dispatch("SkinLoaded")},tN=(t,s)=>{t.dispatch("SkinLoadError",s)},Il=t=>{t.dispatch("ResizeEditor")},P0=(t,s)=>{t.dispatch("ResizeContent",s)},bz=(t,s)=>{t.dispatch("ScrollContent",s)},nN=(t,s)=>{t.dispatch("TextColorChange",s)},vz=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},yz=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),Cz=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},oN=(t,s)=>{t.dispatch("StylesTextUpdate",s)},sN=(t,s)=>{t.dispatch("AlignTextUpdate",s)},oq=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},sq=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},sa=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},rN=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},Sz=t=>{t.dispatch("ToggleSidebar")},aN=t=>{t.dispatch("ToggleView")},iN=t=>{t.dispatch("ContextToolbarClose")},xz=t=>{t.dispatch("ContextFormSlideBack")},L0=(t,s)=>()=>{t(),s()},ra=(t,s=ct)=>ag(t,"NodeChange",a=>{a.setEnabled(t.selection.isEditable()&&s())}),wz=(t,s)=>a=>{const c=Wa(),u=()=>{a.setActive(t.formatter.match(s));const m=t.formatter.formatChanged(s,a.setActive);c.set(m)};return t.initialized?u():t.once("init",u),()=>{t.off("init",u),c.clear()}},sp=(t,s)=>a=>{const c=ra(t)(a),u=wz(t,s)(a);return()=>{c(),u()}},ag=(t,s,a)=>c=>{const u=()=>a(c),m=()=>{a(c),t.on(s,u)};return t.initialized?m():t.once("init",m),()=>{t.off("init",m),t.off(s,u)}},g3=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},Ia=(t,s)=>()=>t.execCommand(s);var ig=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const cN={},lN=(t,s=10)=>{const a=ig.getItem(t),c=Tt(a)?JSON.parse(a):[],m=(C=>s-C.length<0?C.slice(0,s):C)(c),f=C=>{Qe(m,C).each(p),m.unshift(C),m.length>s&&m.pop(),ig.setItem(t,JSON.stringify(m))},p=C=>{m.splice(C,1)};return{add:f,state:()=>m.slice(0)}},uN=t=>Ze(cN,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=ig.getItem(s);if(pl(a)){const u=ig.getItem("tinymce-custom-colors");ig.setItem(s,uo(u)?u:"[]")}const c=lN(s,10);return cN[t]=c,c}),Ez=t=>ke(uN(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),h3=(t,s)=>{uN(t).add(s)},p3="forecolor",$y="hilitecolor",rq=5,aq=t=>dN(t.map((s,a)=>a%2===0?"#"+hz(s).value:s)),dN=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:t[a],icon:"checkmark",type:"choiceitem"});return s},Fl=t=>s=>s.options.get(t),Hy="#000000",kz=t=>{const s=t.options.register,a=m=>kt(m,Tt)?{value:aq(m),valid:!0}:{valid:!1,message:"Must be an array of strings."},c=m=>kt(m,Tt)?{value:dN(m),valid:!0}:{valid:!1,message:"Must be an array of strings."},u=m=>Zr(m)&&m>0?{value:m,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:c}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:u,default:b3(t)}),s("color_cols_foreground",{processor:u,default:mN(t,p3)}),s("color_cols_background",{processor:u,default:mN(t,$y)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:Hy}),s("color_default_background",{processor:"string",default:Hy})},Vy=(t,s)=>s===p3&&t.options.isSet("color_map_foreground")?Fl("color_map_foreground")(t):s===$y&&t.options.isSet("color_map_background")?Fl("color_map_background")(t):t.options.isSet("color_map_raw")?Fl("color_map_raw")(t):Fl("color_map")(t),b3=(t,s="default")=>Math.max(rq,Math.ceil(Math.sqrt(Vy(t,s).length))),mN=(t,s)=>{const a=Fl("color_cols")(t),c=b3(t,s);return a===b3(t)?c:a},fN=(t,s="default")=>Math.round(s===p3?Fl("color_cols_foreground")(t):s===$y?Fl("color_cols_background")(t):Fl("color_cols")(t)),gN=Fl("custom_colors"),Tz=Fl("color_default_foreground"),_z=Fl("color_default_background"),Az="rgba(0, 0, 0, 0)",zy=t=>d3(t).exists(s=>s.alpha!==0),hN=t=>Zp(t,s=>{if(Oa(s)){const a=E(s,"background-color");return vr(zy(a),a)}else return S.none()}).getOr(Az),v3=(t,s)=>{const a=ne.fromDom(t.selection.getStart()),c=s==="hilitecolor"?hN(a):E(a,"color");return d3(c).map(u=>"#"+B0(u).value)},pN=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},Oz=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},Dz=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{pN(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{Oz(t,s)})},bN=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},Uy=(t,s,a,c)=>{a==="custom"?wN(t)(m=>{m.each(f=>{h3(s,f),t.execCommand("mceApplyTextcolor",s,f),c(f)})},v3(t,s).getOr(Hy)):a==="remove"?(c(""),t.execCommand("mceRemoveTextcolor",s)):(c(a),t.execCommand("mceApplyTextcolor",s,a))},Zy=(t,s,a)=>t.concat(Ez(s).concat(bN(a))),vN=(t,s,a)=>c=>{c(Zy(t,s,a))},y3=(t,s,a)=>{const c=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(c,a)},yN=(t,s)=>{t.setTooltip(s)},CN=(t,s)=>a=>{const c=v3(t,s);return Gr(c,a.toUpperCase())},C3=(t,s,a)=>{if(ja(a))return s==="forecolor"?"Text color":"Background color";const c=s==="forecolor"?"Text color {0}":"Background color {0}",u=Zy(Vy(t,s),s,!1),m=_t(u,f=>f.value===a).getOr({text:""}).text;return t.translate([c,t.translate(m)])},SN=(t,s,a,c)=>{t.ui.registry.addSplitButton(s,{tooltip:C3(t,a,c.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:CN(t,a),columns:fN(t,a),fetch:vN(Vy(t,a),a,gN(t)),onAction:u=>{Uy(t,a,c.get(),re)},onItemAction:(u,m)=>{Uy(t,a,m,f=>{c.set(f),nN(t,{name:s,color:f})})},onSetup:u=>{y3(u,s,c.get());const m=f=>{f.name===s&&(y3(u,f.name,f.color),yN(u,C3(t,a,f.color)))};return t.on("TextColorChange",m),L0(ra(t)(u),()=>{t.off("TextColorChange",m)})}})},xN=(t,s,a,c,u)=>{t.ui.registry.addNestedMenuItem(s,{text:c,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:m=>(yN(m,C3(t,a,u.get())),y3(m,s,u.get()),ra(t)(m)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:CN(t,a),initData:{storageKey:a},onAction:m=>{Uy(t,a,m.value,f=>{u.set(f),nN(t,{name:s,color:f})})}}]})},wN=t=>(s,a)=>{let c=!1;const u=p=>{const C=p.getData().colorpicker;c?(s(S.from(C)),p.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",C]))},m=(p,b)=>{b.name==="hex-valid"&&(c=b.value)},f={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:f,onAction:m,onSubmit:u,onClose:re,onCancel:()=>{s(S.none())}})},Mz=t=>{Dz(t);const s=Tz(t),a=_z(t),c=Ve(s),u=Ve(a);SN(t,"forecolor","forecolor",c),SN(t,"backcolor","hilitecolor",u),xN(t,"forecolor","forecolor","Text color",c),xN(t,"backcolor","hilitecolor","Background color",u)},Nz=(t,s,a,c,u)=>{const m=b=>({setActive:C=>{Ut.set(b,C)},isActive:()=>Ut.isOn(b),isEnabled:()=>!st.isDisabled(b),setEnabled:C=>st.set(b,!C)}),f=tp({presets:"img",textContent:S.none(),htmlContent:S.none(),ariaLabel:t.tooltip,iconContent:S.some(t.url),labelContent:t.label,shortcutContent:S.none(),checkMark:S.some(Py(u.icons)),caret:S.none(),value:t.value},u,!0),p=t.tooltip.map(b=>bo.config(u.tooltips.getConfig({tooltipText:u.translate(b)})));return Nn(ng({context:t.context,data:og(t),enabled:t.enabled,getApi:m,onAction:b=>{s(t.value),b.setActive(!0)},onSetup:b=>(b.setActive(a),re),triggersSubmenu:!1,itemBehaviours:[...p.toArray()]},f,c,u),{toggling:{toggleClass:SE,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},Wy=(t,s,a,c,u,m,f,p)=>{const b=k0(s),x=iq(s,a,c,u!=="color"?"normal":"color",m,f,p);return T0(t,b,x,c,{menuType:u})},iq=(t,s,a,c,u,m,f)=>Ui(ke(t,p=>p.type==="choiceitem"?LV(p).fold(ll,b=>S.some(r3(b,a===1,c,s,m(b.value),u,f,k0(t)))):p.type==="imageitem"?R6(p).fold(ll,b=>S.some(Nz(b,s,m(b.value),u,f))):p.type==="resetimage"?FV(p).fold(ll,b=>S.some(r3({...b,type:"choiceitem",text:b.tooltip,icon:S.some(b.icon),label:S.some(b.label)},a===1,c,s,m(b.value),u,f,k0(t)))):S.none())),I0=(t,s)=>{const a=_d(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+{color:"tox-swatches__row",imageselector:"tox-image-selector__row",listpreview:"tox-collection__group",normal:"tox-collection__group"}[s],previousSelector:u=>s==="color"?qn(u.element,"[aria-checked=true]"):S.none()}},EN=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${x0}`:`.${Gh}`}},kN=(t,s)=>{const a=jy(t,s),c=s.colorinput.getColorCols(t.initData.storageKey),u="color",f={...Wy(Ue("menu-value"),a,p=>{t.onAction({value:p})},c,u,bc.CLOSE_ON_EXECUTE,t.select.getOr(gn),s.shared.providers),markers:_d(u),movement:I0(c,u),showMenuRole:!1};return{type:"widget",data:{value:Ue("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[o0.widget(_u.sketch(f))]}},jy=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>Zy(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),c=>c.concat(bN(a)))},TN=(t,s)=>{const a="imageselector",c=t.initData.columns,m={...Wy(Ue("menu-value"),t.initData.items,f=>{t.onAction({value:f})},c,a,bc.CLOSE_ON_EXECUTE,t.select.getOr(gn),s.shared.providers),markers:_d(a),movement:I0(c,a),showMenuRole:!1};return{type:"widget",data:{value:Ue("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem","tox-collection--toolbar"]},autofocus:!0,components:[o0.widget(_u.sketch(m))]}},_N=Ue("cell-over"),AN=Ue("cell-execute"),Rz=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),Bz=(t,s,a)=>{const c=f=>mt(f,_N,{row:t,col:s}),u=f=>mt(f,AN,{row:t,col:s}),m=(f,p)=>{p.stop(),u(f)};return $r({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:Ae([Dt("insert-table-picker-cell",[ve(Kc(),St.focus),ve(_i(),u),ve(Qd(),m),ve(cf(),m)]),Ut.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),St.config({onFocus:c})])})},Pz=(t,s,a)=>{const c=[];for(let u=0;u<s;u++){const m=[];for(let f=0;f<a;f++){const p=t(u+1,f+1);m.push(Bz(u,f,p))}c.push(m)}return c},Lz=(t,s,a,c,u)=>{for(let m=0;m<c;m++)for(let f=0;f<u;f++)Ut.set(t[m][f],m<=s&&f<=a)},Iz=t=>pe(t,s=>ke(s,Ai)),S3=(t,s)=>lo(`${s}x${t}`),$z={inserttable:(t,s)=>{const u=Rz(s),m=Pz(u,10,10),f=S3(0,0),p=Tn({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[f],behaviours:Ae([Nt.config({})])});return{type:"widget",data:{value:Ue("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[o0.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:Iz(m).concat(p.asSpec()),behaviours:Ae([Dt("insert-table-picker",[ro(b=>{Nt.set(p.get(b),[f])}),Av(_N,(b,C,x)=>{const{row:k,col:A}=x.event;Lz(m,k,A,10,10),Nt.set(p.get(b),[S3(k+1,A+1)])}),Av(AN,(b,C,x)=>{const{row:k,col:A}=x.event;rn(b,tv()),t.onAction({numRows:k+1,numColumns:A+1})})]),nt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:kN,imageselect:TN},ON=(t,s)=>Ze($z,t.fancytype).map(a=>a(t,s)),Hz=(t,s,a,c=!0,u=!1)=>{const m=u?sz(a.icons):oz(a.icons),f=b=>({isEnabled:()=>!st.isDisabled(b),setEnabled:C=>st.set(b,!C),setIconFill:(C,x)=>{qn(b.element,`svg path[class="${C}"], rect[class="${C}"]`).each(k=>{Ot(k,"fill",x)})},setTooltip:C=>{const x=a.translate(C);Ot(b.element,"aria-label",x)}}),p=tp({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:S.none(),ariaLabel:t.text,labelContent:S.none(),caret:S.some(m),checkMark:S.none(),shortcutContent:t.shortcut},a,c);return ng({context:t.context,data:og(t),getApi:f,enabled:t.enabled,onAction:re,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},p,s,a)},Vz=(t,s,a,c=!0)=>{const u=f=>({isEnabled:()=>!st.isDisabled(f),setEnabled:p=>st.set(f,!p)}),m=tp({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:S.none(),labelContent:S.none(),ariaLabel:t.text,caret:S.none(),checkMark:S.none(),shortcutContent:t.shortcut},a,c);return ng({context:t.context,data:og(t),getApi:u,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},m,s,a)},zz=t=>({type:"separator",dom:{tag:"div",classes:[Gh,Ni]},components:t.text.map(lo).toArray()}),cg=(t,s,a,c=!0)=>{const u=f=>({setActive:p=>{Ut.set(f,p)},isActive:()=>Ut.isOn(f),isEnabled:()=>!st.isDisabled(f),setEnabled:p=>st.set(f,!p)}),m=tp({iconContent:t.icon,textContent:t.text,htmlContent:S.none(),labelContent:S.none(),ariaLabel:t.text,checkMark:S.some(Py(a.icons)),caret:S.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,c);return Nn(ng({context:t.context,data:og(t),enabled:t.enabled,getApi:u,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},m,s,a),{toggling:{toggleClass:SE,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},DN=lz,rp=zz,Gy=Vz,MN=Hz,NN=cg,RN=ON,cq=uz,Uz=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},Zz=t=>{const s=We.getValue(t),a=w0(t).map(MM);Mi.refetch(s).get(()=>{const c=Lo.getCoupled(s,"sandbox");a.each(u=>w0(c).each(m=>h9(m,u)))})},Wz=(t,s)=>{jz(t).each(a=>{DP(t,a.element,s.event.eventType,s.event.interactionEvent)})},jz=t=>bn.getState(t).bind(kn.getHighlighted).bind(kn.getHighlighted),Gz=t=>wr(t.element,wy)?S.some(t.element):qn(t.element,"."+wy),lg=(t,s,a)=>{EE(t).each(c=>{xy(c,a),Gz(s).each(m=>{Ts(m,"id").each(f=>Ot(c.element,"aria-controls",f))})}),Ot(a.element,"aria-selected","true")},F0=(t,s,a)=>{Ot(a.element,"aria-selected","false")},x3=t=>{EE(t).each(s=>St.focus(s))},qz=t=>Lo.getExistingCoupled(t,"sandbox").bind(w0).map(MM).map(a=>a.fetchPattern).getOr("");var qy;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(qy||(qy={}));const w3=(t,s,a,c,u)=>{const m=a.shared.providers,f=p=>u?{...p,shortcut:S.none(),icon:p.text.isSome()?S.none():p.icon}:p;switch(t.type){case"menuitem":return HV(t).fold(ll,p=>S.some(Gy(f(p),s,m,c)));case"nestedmenuitem":return P6(t).fold(ll,p=>S.some(MN(f(p),s,m,c,u)));case"togglemenuitem":return D0(t).fold(ll,p=>S.some(NN(f(p),s,m,c)));case"separator":return b6(t).fold(ll,p=>S.some(rp(p)));case"fancymenuitem":return M6(t).fold(ll,p=>RN(p,a));default:return console.error("Unknown item in general menu",t),S.none()}},Kz=(t,s,a,c,u,m,f)=>{const p=c===1,b=!p||k0(t);return Ui(ke(t,C=>{switch(C.type){case"separator":return v6(C).fold(ll,x=>S.some(rp(x)));case"cardmenuitem":return PV(C).fold(ll,x=>S.some(cq({...x,onAction:k=>{x.onAction(k),a(x.value,x.meta)}},u,m,{itemBehaviours:o3(x.meta,m,S.none()),cardText:{matchText:s,highlightOn:f}})));case"autocompleteitem":default:return CV(C).fold(ll,x=>S.some(DN(x,s,p,"normal",a,u,m,b)))}}))},ap=(t,s,a,c,u,m)=>{const f=k0(s),p=Ui(ke(s,x=>{const k=R=>u?!Yt(R,"text"):f,A=R=>w3(R,a,c,k(R),u);return x.type==="nestedmenuitem"&&x.getSubmenuItems().length<=0?A({...x,enabled:!1}):A(x)})),b=Uz(m);return(u?Mu:T0)(t,f,p,1,b)},Ky=t=>Hf.singleData(t.value,t),Yz=(t,s,a,c)=>{const u=I0(s,c),m=_d(c);return{data:Ky({...t,movement:u,menuBehaviours:tg.unnamedEvents(s!=="auto"?[]:[ro((f,p)=>{H6(f,4,m.item).each(({numColumns:b,numRows:C})=>{nt.setGridSize(f,C,b)})})])}),menu:{markers:_d(c),fakeFocus:a===qy.ContentFocus}}},Xz=t=>Ug.create(ne.fromDom(t.startContainer),t.startOffset,ne.fromDom(t.endContainer),t.endOffset),Jz={register:(t,s)=>{const a=Ue("autocompleter"),c=Ve(!1),u=Ve(!1),m=dn(),f=$r(vo.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Ae([Dt("dismissAutocompleter",[ve(nd(),()=>k()),ve(ov(),(V,q)=>{Ts(q.event.target,"id").each(K=>Ot(ne.fromDom(t.getBody()),"aria-activedescendant",K))})])]),lazySink:s.getSink})),p=()=>vo.isOpen(f),b=u.get,C=()=>{if(p()){vo.hide(f),t.dom.remove(a,!1);const V=ne.fromDom(t.getBody());Ts(V,"aria-owns").filter(q=>q===a).each(()=>{Ao(V,"aria-owns"),Ao(V,"aria-activedescendant")})}},x=()=>vo.getContent(f).bind(V=>ko(V.components(),0)),k=()=>t.execCommand("mceAutocompleterClose"),A=V=>{const q=nn(V,K=>S.from(K.columns)).getOr(1);return pe(V,K=>{const ie=K.items;return Kz(ie,K.matchText,(me,He)=>{const Te={hide:()=>k(),reload:fe=>{C(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:fe})}};t.execCommand("mceAutocompleterRefreshActiveRange"),m.get().each(fe=>{c.set(!0),K.onAction(Te,fe,me,He),c.set(!1)})},q,bc.BUBBLE_TO_SANDBOX,s,K.highlightOn)})},R=(V,q)=>{const K=nn(V,ie=>S.from(ie.columns)).getOr(1);vo.showMenuAt(f,{anchor:{type:"selection",getSelection:()=>m.get().map(Xz),root:ne.fromDom(t.getBody())}},Yz(T0("autocompleter-value",!0,q,K,{menuType:"normal"}),K,qy.ContentFocus,"normal")),x().each(kn.highlightFirst)},L=V=>{const q=A(V);q.length>0?(R(V,q),Ot(ne.fromDom(t.getBody()),"aria-owns",a),t.inline||z()):C()},z=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const V=t.getDoc().documentElement,q=t.selection.getNode(),K=Ym(f.element);Si(K,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${q.offsetTop}px`,left:`${q.offsetLeft}px`}),t.dom.add(V,K.dom),qn(K,'[role="menu"]').each(ie=>{Ie(ie,"position"),Ie(ie,"max-height")})};t.on("AutocompleterStart",({lookupData:V})=>{u.set(!0),c.set(!1),L(V)}),t.on("AutocompleterUpdate",({lookupData:V})=>L(V)),t.on("AutocompleterUpdateActiveRange",({range:V})=>m.set(V)),t.on("AutocompleterEnd",()=>{C(),u.set(!1),c.set(!1),m.clear()});const j={cancelIfNecessary:k,isMenuOpen:p,isActive:b,isProcessingAction:c.get,getMenu:x};i9.setup(j,t)}},Qz=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:ke(t.items,s.interpreter)});var eU=tinymce.util.Tools.resolve("tinymce.html.Entities");const ip=(t,s,a,c)=>{const u=E3(t,s,a,c);return Jt.sketch(u)},BN=(t,s)=>ip(t,s,[],[]),E3=(t,s,a,c)=>({dom:$0(a),components:t.toArray().concat([s]),fieldBehaviours:Ae(c)}),tU=()=>$0([]),$0=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),$l=(t,s)=>Jt.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[lo(s.translate(t))]}),ka=Ue("form-component-change"),PN=Ue("form-component-input"),H0=Ue("form-close"),Om=Ue("form-cancel"),Ru=Ue("form-action"),ug=Ue("form-submit"),k3=Ue("form-block"),V0=Ue("form-unblock"),LN=Ue("form-tabchange"),Yy=Ue("form-resize"),nU=(t,s,a)=>{const c=t.label.map(R=>$l(R,s)),u=s.icons(),m=R=>{var L;return(L=u[R])!==null&&L!==void 0?L:R},f=R=>(L,z)=>{lu(z.event.target,"[data-collection-item-value]").each(j=>{R(L,z,j,ks(j,"data-collection-item-value"))})},p=(R,L)=>{const j=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",V=ke(L,ie=>{const me=pc.translate(ie.text),He=t.columns===1?`<div class="tox-collection__item-label">${me}</div>`:"",Te=`<div class="tox-collection__item-icon">${m(ie.icon)}</div>`,fe={_:" "," - ":" ","-":" "},je=me.replace(/\_| \- |\-/g,pt=>fe[pt]);return`<div data-mce-tooltip="${je}" class="tox-collection__item${j}" tabindex="-1" data-collection-item-value="${eU.encodeAllRaw(ie.value)}" aria-label="${je}">${Te}${He}</div>`}),q=t.columns!=="auto"&&t.columns>1?fi(V,t.columns):[V],K=ke(q,ie=>`<div class="tox-collection__group">${ie.join("")}</div>`);Wd(R.element,K.join(""))},b=f((R,L,z,j)=>{L.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||mt(R,Ru,{name:t.name,value:j})}),C=[ve(Kc(),f((R,L,z)=>{ss(z,!0)})),ve(Qd(),b),ve(cf(),b),ve(Lr(),f((R,L,z)=>{qn(R.element,"."+Kf).each(j=>{fo(j,Kf)}),Vo(z,Kf)})),ve(TT(),f(R=>{qn(R.element,"."+Kf).each(L=>{fo(L,Kf),Yi(L)})})),md(f((R,L,z,j)=>{mt(R,Ru,{name:t.name,value:j})}))],x=(R,L)=>ke(go(R.element,".tox-collection__item"),L),k=Jt.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:$t},behaviours:Ae([st.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable,onDisabled:R=>{x(R,L=>{Vo(L,"tox-collection__item--state-disabled"),Ot(L,"aria-disabled",!0)})},onEnabled:R=>{x(R,L=>{fo(L,"tox-collection__item--state-disabled"),Ao(L,"aria-disabled")})}}),Xo(()=>s.checkUiComponentContext(t.context)),Nt.config({}),bo.config({...s.tooltips.getConfig({tooltipText:"",onShow:R=>{qn(R.element,"."+Kf+"[data-mce-tooltip]").each(L=>{Ts(L,"data-mce-tooltip").each(z=>{bo.setComponents(R,s.tooltips.getComponents({tooltipText:z}))})})}}),mode:"children-keyboard-focus",anchor:R=>({type:"node",node:qn(R.element,"."+Kf).orThunk(()=>hB(".tox-collection__item")),root:R.element,layouts:{onLtr:ee([us,Ds,Yo,fr,ls,zs]),onRtl:ee([us,Ds,Yo,fr,ls,zs])},bubble:Fr(0,-2,{})})}),We.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(R,L)=>{p(R,L),t.columns==="auto"&&H6(R,5,"tox-collection__item").each(({numRows:z,numColumns:j})=>{nt.setGridSize(R,z,j)}),rn(R,Yy)}}),Yn.config({}),nt.config(EN(t.columns,"normal")),Dt("collection-events",C)]),eventOrder:{[_i()]:["disabling","alloy.base.behaviour","collection-events"],[Lr()]:["collection-events","tooltipping"]}});return ip(c,k,["tox-form__group--collection"],[])},oU=(t,s)=>Mi.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Ae([li.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),Xo(()=>s.providers.checkUiComponentContext(t.context)),If.config({}),Yn.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>Ro.nu(c=>t.fetch(c)).map(c=>S.from(Ky(Nn(Wy(Ue("menu-value"),c,u=>{t.onItemAction(a,u)},t.columns,t.presets,bc.CLOSE_ON_EXECUTE,gn,s.providers),{movement:I0(t.columns,t.presets)})))),parts:{menu:Cy(!1,1,t.presets)}}),IN=Ue("color-input-change"),FN=Ue("color-swatch-change"),$N=Ue("color-picker-cancel"),uq=(t,s,a,c)=>{const u=Jt.parts.field({factory:Ou,inputClasses:["tox-textfield"],data:c,onSetValue:C=>ol.run(C).get(re),inputBehaviours:Ae([st.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable}),Xo(()=>s.providers.checkUiComponentContext(t.context)),Yn.config({}),ol.config({invalidClass:"tox-textbox-field-invalid",getRoot:C=>sn(C.element),notify:{onValid:C=>{const x=We.getValue(C);mt(C,IN,{color:x})}},validator:{validateOnLoad:!1,validate:C=>{const x=We.getValue(C);if(x.length===0)return Ro.pure(Ft.value(!0));{const k=ne.fromTag("span");Rt(k,"background-color",x);const A=H(k,"background-color").fold(()=>Ft.error("blah"),R=>Ft.value(x));return Ro.pure(A)}}}})]),selectOnFocus:!1}),m=t.label.map(C=>$l(C,s.providers)),f=(C,x)=>{mt(C,FN,{value:x})},p=(C,x)=>{b.getOpt(C).each(k=>{x==="custom"?a.colorPicker(A=>{A.fold(()=>rn(k,$N),R=>{f(k,R),h3(t.storageKey,R)})},"#ffffff"):x==="remove"?f(k,""):f(k,x)})},b=Tn(oU({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[ls,Yo,us],onLtr:()=>[Yo,ls,us]},components:[],fetch:vN(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:p,context:t.context},s));return Jt.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:m.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[u,b.asSpec()]}]),fieldBehaviours:Ae([Dt("form-field-events",[ve(IN,(C,x)=>{b.getOpt(C).each(k=>{Rt(k.element,"background-color",x.event.color)}),mt(C,ka,{name:t.name})}),ve(FN,(C,x)=>{Jt.getField(C).each(k=>{We.setValue(k,x.event.value),an.getCurrent(C).each(St.focus)})}),ve($N,(C,x)=>{Jt.getField(C).each(k=>{an.getCurrent(C).each(St.focus)})})])])})},Cc={self:()=>an.config({find:S.some}),memento:t=>an.config({find:t.getOpt}),childAt:t=>an.config({find:s=>Pc(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},rU=wt([oe("preprocess",$t),oe("postprocess",$t)]),aU=(t,s)=>{const a=Ma("RepresentingConfigs.memento processors",rU,s);return We.config({store:{mode:"manual",getValue:c=>{const u=t.get(c),m=We.getValue(u);return a.postprocess(m)},setValue:(c,u)=>{const m=a.preprocess(u),f=t.get(c);We.setValue(f,m)}}})},dg=(t,s,a)=>We.config({store:{mode:"manual",...t.map(c=>({initialValue:c})).getOr({}),getValue:s,setValue:a}}),HN=(t,s,a)=>dg(t,c=>s(c.element),(c,u)=>a(c.element,u)),iU=t=>HN(t,$g,Wd),z0=t=>We.config({store:{mode:"memory",initialValue:t}}),T3=Ue("rgb-hex-update"),VN=Ue("slider-update"),zN=Ue("palette-update"),mq=(t,s)=>{const a=al.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),c=al.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return al.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:ee(0)},components:[a,c],sliderBehaviours:Ae([St.config({})]),onChange:(u,m,f)=>{Ot(u.element,"aria-valuenow",Math.floor(360-f*3.6)),mt(u,VN,{value:f})}})},cU=Ue("valid-input"),_3=Ue("invalid-input"),A3=Ue("validating-input"),O3="colorcustom.rgb.",lU={isEnabled:ct,setEnabled:re,immediatelyShow:re,immediatelyHide:re},Bi=(t,s,a,c,u,m)=>{const f=(z,j)=>{const V=j.get();z!==V.isEnabled()&&(V.setEnabled(z),z?V.immediatelyShow():V.immediatelyHide())},p=(z,j,V)=>ol.config({invalidClass:s("invalid"),notify:{onValidate:q=>{mt(q,A3,{type:z})},onValid:q=>{f(!1,V),mt(q,cU,{type:z,value:We.getValue(q)})},onInvalid:q=>{f(!0,V),mt(q,_3,{type:z,value:We.getValue(q)})}},validator:{validate:q=>{const K=We.getValue(q),ie=j(K)?Ft.value(!0):Ft.error(t("aria.input.invalid"));return Ro.pure(ie)},validateOnLoad:!1}}),b=(z,j,V,q,K)=>{const ie=Ve(lU),me=t(O3+"range"),He=Jt.parts.label({dom:{tag:"label"},components:[lo(V)]}),Te=Jt.parts.field({data:K,factory:Ou,inputAttributes:{type:"text","aria-label":q,...j==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:Ae([p(j,z,ie),Yn.config({}),bo.config({...u({tooltipText:"",onSetup:Lt=>{ie.set({isEnabled:()=>bo.isEnabled(Lt),setEnabled:tt=>bo.setEnabled(Lt,tt),immediatelyShow:()=>bo.immediateOpenClose(Lt,!0),immediatelyHide:()=>bo.immediateOpenClose(Lt,!1)}),bo.setEnabled(Lt,!1)},onShow:(Lt,tt)=>{bo.setComponents(Lt,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[lo(t(j==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:Lt=>{ol.isInvalid(Lt)&&ol.run(Lt).get(re)}}),fe=Ue("aria-invalid"),je=Tn(m("invalid",S.some(fe),"warning")),pt=Tn({dom:{tag:"div",classes:[s("invalid-icon")]},components:[je.asSpec()]}),rt=[He,Te,pt.asSpec()],Qt=j!=="hex"?[Jt.parts["aria-descriptor"]({text:me})]:[],Et=rt.concat(Qt);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:Et}},C=(z,j)=>{const V=B0(j);return Vf.getField(z,"hex").each(q=>{St.isFocused(q)||We.setValue(z,{hex:V.value})}),V},x=(z,j)=>{const V=j.red,q=j.green,K=j.blue;We.setValue(z,{red:V,green:q,blue:K})},k=Tn({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),A=(z,j)=>{k.getOpt(z).each(V=>{Rt(V.element,"background-color","#"+j.value)})};return Di({factory:()=>{const z={red:Ve(S.some(255)),green:Ve(S.some(255)),blue:Ve(S.some(255)),hex:Ve(S.some("ffffff"))},j=(tt,xe)=>{const Be=rg(xe);x(tt,Be),ie(Be)},V=tt=>z[tt].get(),q=(tt,xe)=>{z[tt].set(xe)},K=()=>V("red").bind(tt=>V("green").bind(xe=>V("blue").map(Be=>Am(tt,xe,Be,1)))),ie=tt=>{const xe=tt.red,Be=tt.green,yt=tt.blue;q("red",S.some(xe)),q("green",S.some(Be)),q("blue",S.some(yt))},me=(tt,xe)=>{const Be=xe.event;Be.type!=="hex"?q(Be.type,S.none()):c(tt)},He=(tt,xe)=>{a(tt);const Be=K6(xe);q("hex",S.some(Be.value));const yt=rg(Be);x(tt,yt),ie(yt),mt(tt,T3,{hex:Be}),A(tt,Be)},Te=(tt,xe,Be)=>{const yt=parseInt(Be,10);q(xe,S.some(yt)),K().each(It=>{const dt=C(tt,It);mt(tt,T3,{hex:dt}),A(tt,dt)})},fe=tt=>tt.type==="hex",je=(tt,xe)=>{const Be=xe.event;fe(Be)?He(tt,Be.value):Te(tt,Be.type,Be.value)},pt=tt=>({label:t(O3+tt+".label"),description:t(O3+tt+".description")}),rt=pt("red"),Qt=pt("green"),Et=pt("blue"),Lt=pt("hex");return Nn(Vf.sketch(tt=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[tt.field("red",Jt.sketch(b(u3,"red",rt.label,rt.description,255))),tt.field("green",Jt.sketch(b(u3,"green",Qt.label,Qt.description,255))),tt.field("blue",Jt.sketch(b(u3,"blue",Et.label,Et.description,255))),tt.field("hex",Jt.sketch(b(i3,"hex",Lt.label,Lt.description,"ffffff"))),k.asSpec()],formBehaviours:Ae([ol.config({invalidClass:s("form-invalid")}),Dt("rgb-form-events",[ve(cU,je),ve(_3,me),ve(A3,me)])])})),{apis:{updateHex:(tt,xe)=>{We.setValue(tt,{hex:xe.value}),j(tt,xe),A(tt,xe)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(z,j,V)=>{z.updateHex(j,V)}},extraApis:{}})},uU=(t,s)=>{const a=al.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),c=al.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),u=(C,x)=>{const{width:k,height:A}=C,R=C.getContext("2d");if(R===null)return;R.fillStyle=x,R.fillRect(0,0,k,A);const L=R.createLinearGradient(0,0,k,0);L.addColorStop(0,"rgba(255,255,255,1)"),L.addColorStop(1,"rgba(255,255,255,0)"),R.fillStyle=L,R.fillRect(0,0,k,A);const z=R.createLinearGradient(0,0,0,A);z.addColorStop(0,"rgba(0,0,0,0)"),z.addColorStop(1,"rgba(0,0,0,1)"),R.fillStyle=z,R.fillRect(0,0,k,A)},m=(C,x)=>{const k=C.components()[0].element.dom,A=sg(x,100,100),R=J6(A);u(k,m3(R))},f=(C,x)=>{const k=c3(rg(x));al.setValue(C,{x:k.saturation,y:100-k.value}),Ot(C.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",k.saturation,k.value]))};return Di({factory:C=>{const x=ee({x:0,y:0}),k=(L,z,j)=>{Zr(j)||Ot(L.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(j.x),Math.floor(100-j.y)])),mt(L,zN,{value:j})},A=(L,z,j,V)=>{u(j.element.dom,m3(f3))},R=Ae([an.config({find:S.some}),St.config({})]);return al.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:x},rounded:!1,components:[a,c],onChange:k,onInit:A,sliderBehaviours:R})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(C,x,k)=>{m(x,k)},setThumb:(C,x,k)=>{f(x,k)}},extraApis:{}})},UN=(t,s,a,c)=>{const u=f=>{const p=Bi(t,s,f.onValidHex,f.onInvalidHex,a,c),b=uU(t,s),C=fe=>(100-fe)/100*360,x=fe=>100-fe/360*100,k={paletteRgba:Ve(f3),paletteHue:Ve(0)},A=Tn(mq(t,s)),R=Tn(b.sketch({})),L=Tn(p.sketch({})),z=(fe,je,pt)=>{R.getOpt(fe).each(rt=>{b.setHue(rt,pt)})},j=(fe,je)=>{L.getOpt(fe).each(pt=>{p.updateHex(pt,je)})},V=(fe,je,pt)=>{A.getOpt(fe).each(rt=>{al.setValue(rt,x(pt))})},q=(fe,je)=>{R.getOpt(fe).each(pt=>{b.setThumb(pt,je)})},K=(fe,je)=>{const pt=rg(fe);k.paletteRgba.set(pt),k.paletteHue.set(je)},ie=(fe,je,pt,rt)=>{K(je,pt),ze(rt,Qt=>{Qt(fe,je,pt)})},me=()=>{const fe=[j];return(je,pt)=>{const rt=pt.event.value,Qt=k.paletteHue.get(),Et=sg(Qt,rt.x,100-rt.y),Lt=eN(Et);ie(je,Lt,Qt,fe)}},He=()=>{const fe=[z,j];return(je,pt)=>{const rt=C(pt.event.value),Qt=k.paletteRgba.get(),Et=c3(Qt),Lt=sg(rt,Et.saturation,Et.value),tt=eN(Lt);ie(je,tt,rt,fe)}},Te=()=>{const fe=[z,V,q];return(je,pt)=>{const rt=pt.event.hex,Qt=gz(rt);ie(je,rt,Qt.hue,fe)}};return{uid:f.uid,dom:f.dom,components:[R.asSpec(),A.asSpec(),L.asSpec()],behaviours:Ae([Dt("colour-picker-events",[ve(T3,Te()),ve(zN,me()),ve(VN,He())]),an.config({find:fe=>L.getOpt(fe)}),nt.config({mode:"acyclic"})])}};return Di({name:"ColourPicker",configFields:[we("dom"),oe("onValidHex",re),oe("onInvalidHex",re)],factory:u})},ZN={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},dU=t=>s=>Tt(s)?t.translate(ZN[s]):t.translate(s),U0=(t,s,a)=>{const c=C=>"tox-"+C,u=(C,x,k=C,A=C)=>Pa(k,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+C],attributes:{title:s.translate(A),"aria-live":"polite",...x.fold(()=>({}),R=>({id:R}))}},s.icons),m=UN(dU(s),c,s.tooltips.getConfig,u),f=C=>{mt(C,Ru,{name:"hex-valid",value:!0})},p=C=>{mt(C,Ru,{name:"hex-valid",value:!1})},b=Tn(m.sketch({dom:{tag:"div",classes:[c("color-picker-container")],attributes:{role:"presentation"}},onValidHex:f,onInvalidHex:p}));return{dom:{tag:"div"},components:[b.asSpec()],behaviours:Ae([dg(a,C=>{const x=b.get(C);return an.getCurrent(x).bind(R=>We.getValue(R).hex).map(R=>"#"+yr(R,"#")).getOr("")},(C,x)=>{const k=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,A=S.from(k.exec(x)).bind(z=>ko(z,1)),R=b.get(C);an.getCurrent(R).fold(()=>{console.log("Can not find form")},z=>{We.setValue(z,{hex:A.getOr("")}),Vf.getField(z,"hex").each(j=>{rn(j,td())})})}),Cc.self()])}};var mU=tinymce.util.Tools.resolve("tinymce.Resource");const Z0=t=>Yt(t,"init"),fU=t=>{const s=dn(),a=Tn({dom:{tag:t.tag}}),c=dn(),u=!Z0(t)&&t.onFocus.isSome()?[St.config({onFocus:m=>{t.onFocus.each(f=>{f(m.element.dom)})}}),Yn.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Ae([Dt("custom-editor-events",[ro(m=>{a.getOpt(m).each(f=>{(Z0(t)?t.init(f.element.dom):mU.load(t.scriptId,t.scriptUrl).then(p=>p(f.element.dom,t.settings))).then(p=>{c.on(b=>{p.setValue(b)}),c.clear(),s.set(p)})})})]),dg(S.none(),()=>s.get().fold(()=>c.get().getOr(""),m=>m.getValue()),(m,f)=>{s.get().fold(()=>c.set(f),p=>p.setValue(f))}),Cc.self()].concat(u)),components:[a.asSpec()]}};var dl=tinymce.util.Tools.resolve("tinymce.util.Tools");const D3=Ue("browse.files.event"),gU=(t,s)=>{const a=dl.explode(s.getOption("images_file_types")),c=u=>ms(a,m=>to(u.name.toLowerCase(),`.${m.toLowerCase()}`));return Zn(Ls(t),c)},Sc=(t,s,a)=>{const c=(A,R)=>{R.stop()},u=A=>(R,L)=>{ze(A,z=>{z(R,L)})},m=(A,R)=>{var L;if(!st.isDisabled(A)){const z=R.event.raw;mt(A,D3,{files:(L=z.dataTransfer)===null||L===void 0?void 0:L.files})}},f=(A,R)=>{const L=R.event.raw.target;mt(A,D3,{files:L.files})},p=(A,R)=>{R&&(We.setValue(A,gU(R,s)),mt(A,ka,{name:t.name}))},b=Tn({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Ae([Dt("input-file-events",[cm(Qd()),cm(cf())])])}),C=t.label.map(A=>$l(A,s)),x=Jt.parts.field({factory:er,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[lo(s.translate("Browse for an image")),b.asSpec()],action:A=>{b.get(A).element.dom.click()},buttonBehaviours:Ae([Cc.self(),z0(a.getOr([])),Yn.config({}),li.button(()=>s.checkUiComponentContext(t.context).shouldDisable),Xo(()=>s.checkUiComponentContext(t.context))])}),k={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Ae([st.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable}),Xo(()=>s.checkUiComponentContext(t.context)),Ut.config({toggleClass:"dragenter",toggleOnExecute:!1}),Dt("dropzone-events",[ve("dragenter",u([c,Ut.toggle])),ve("dragleave",u([c,Ut.toggle])),ve("dragover",c),ve("drop",u([c,m])),ve(rf(),f)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[lo(s.translate("Drop an image here"))]},x]}]};return ip(C,k,["tox-form__group--stretched"],[Dt("handle-files",[ve(D3,(A,R)=>{Jt.getField(A).each(L=>{p(L,R.event.files)})})])])},hU=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:ke(t.items,s.interpreter)}),cp=Ue("alloy-fake-before-tabstop"),Xy=Ue("alloy-fake-after-tabstop"),M3=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Ae([St.config({ignore:!0}),Yn.config({})])}),WN=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[M3([cp]),s,M3([Xy])],behaviours:Ae([Cc.childAt(1)])}),N3=(t,s)=>{mt(t,Al(),{raw:{which:9,shiftKey:s}})},pU=(t,s)=>{const a=s.element;wr(a,cp)?N3(t,!0):wr(a,Xy)&&N3(t,!1)},W0=t=>Up(t,["."+cp,"."+Xy].join(","),gn),Jy=Ue("update-dialog"),jN=Ue("update-title"),GN=Ue("update-body"),qN=Ue("update-footer"),KN=Ue("body-send-message"),j0=Ue("dialog-focus-shifted"),Qy=va().browser,lp=Qy.isSafari(),bU=Qy.isFirefox(),R3=lp||bU,vU=Qy.isChromium(),yU=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,B3=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),YN=(t,s)=>{const a=t.body;return S.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!vU&&!lp||uo(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},P3=(t,s,a)=>{const c=t.dom;S.from(c.contentDocument).fold(a,u=>{let m=0;const f=YN(u,s).map(b=>(m=b.scrollTop,b)).forall(yU),p=()=>{const b=c.contentWindow;uo(b)&&(f?B3(b,"bottom"):!f&&R3&&m!==0&&B3(b,m))};lp&&c.addEventListener("load",p,{once:!0}),u.open(),u.write(s),u.close(),lp||p()})},CU=vr(R3,lp?500:200).map(t=>Zu(P3,t)),SU=(t,s)=>{const a=Ve(t.getOr(""));return{getValue:c=>a.get(),setValue:(c,u)=>{if(a.get()!==u){const m=c.element,f=()=>Ot(m,"srcdoc",u);s?CU.fold(ee(P3),p=>p.throttle)(m,u,f):f()}a.set(u)}}},XN=(t,s,a)=>{const c="tox-dialog__iframe",u=t.transparent?[]:[`${c}--opaque`],m=t.border?["tox-navobj-bordered"]:[],f={...t.label.map(k=>({title:k})).getOr({}),...a.map(k=>({srcdoc:k})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},p=SU(a,t.streamContent),b=t.label.map(k=>$l(k,s)),C=k=>WN(S.from(m),{uid:k.uid,dom:{tag:"iframe",attributes:f,classes:[c,...u]},behaviours:Ae([Yn.config({}),St.config({}),dg(a,p.getValue,p.setValue),xa.config({channels:{[j0]:{onReceive:(A,R)=>{R.newFocus.each(L=>{sn(A.element).each(z=>{(Bn(A.element,L)?Vo:fo)(z,"tox-navobj-bordered-focus")})})}}}})])}),x=Jt.parts.field({factory:{sketch:C}});return ip(b,x,["tox-form__group--stretched"],[])},xU=(t,s,a,c,u)=>{const m=a*u,f=c*u,p=Math.max(0,t/2-m/2),b=Math.max(0,s/2-f/2);return{left:p.toString()+"px",top:b.toString()+"px",width:m.toString()+"px",height:f.toString()+"px"}},wU=(t,s,a)=>{const c=As(t),u=on(t);return Math.min(c/s,u/a,1)},EU=(t,s)=>{const a=Ve(s.getOr({url:""})),c=Tn({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(b=>({src:b.url})).getOr({})}}),u=Tn({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[c.asSpec()]}),m=(b,C)=>{const x={url:C.url};C.zoom.each(A=>x.zoom=A),C.cachedWidth.each(A=>x.cachedWidth=A),C.cachedHeight.each(A=>x.cachedHeight=A),a.set(x);const k=()=>{const{cachedWidth:A,cachedHeight:R,zoom:L}=x;if(!ar(A)&&!ar(R)){if(ar(L)){const j=wU(b.element,A,R);x.zoom=j}const z=xU(As(b.element),on(b.element),A,R,x.zoom);u.getOpt(b).each(j=>{Si(j.element,z)})}};c.getOpt(b).each(A=>{const R=A.element;C.url!==ks(R,"src")&&(Ot(R,"src",C.url),fo(b.element,"tox-imagepreview__loaded")),k(),$s(R).then(L=>{b.getSystem().isConnected()&&(Vo(b.element,"tox-imagepreview__loaded"),x.cachedWidth=L.dom.naturalWidth,x.cachedHeight=L.dom.naturalHeight,k())})})},f={};t.height.each(b=>f.height=b);const p=s.map(b=>({url:b.url,zoom:S.from(b.zoom),cachedWidth:S.from(b.cachedWidth),cachedHeight:S.from(b.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:f,attributes:{role:"presentation"}},components:[u.asSpec()],behaviours:Ae([Cc.self(),dg(p,()=>a.get(),m)])}},kU=(t,s,a)=>{const c="tox-label",u=t.align==="center"?[`${c}--center`]:[],m=t.align==="end"?[`${c}--end`]:[],f=Tn({dom:{tag:"label",classes:[c,...u,...m]},components:[lo(s.providers.translate(t.label))]}),p=ke(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[f.asSpec(),...p],behaviours:Ae([Cc.self(),Nt.config({}),iU(S.none()),nt.config({mode:"acyclic"}),Dt("label",[ro(b=>{t.for.each(C=>{a(C).each(x=>{f.getOpt(b).each(k=>{var A;const R=(A=ks(x.element,"id"))!==null&&A!==void 0?A:Ue("form-field");Ot(x.element,"id",R),Ot(k.element,"for",R)})})})})])])}},L3=Ue("toolbar.button.execute"),TU=t=>md((s,a)=>{N0(t,s)(c=>{mt(s,L3,{buttonApi:c}),t.onAction(c)})}),Dm=Ue("common-button-display-events"),JN={[_i()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[ec()]:["toolbar-button-events",Dm],[pu()]:["toolbar-button-events","dropdown-events","tooltipping"],[Ja()]:["focusing","alloy.base.behaviour",Dm]},I3=t=>Rt(t.element,"width",E(t.element,"width")),QN=(t,s,a)=>Pa(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),eC=(t,s)=>QN(t,s,[]),Hl=(t,s)=>QN(t,s,[Nt.config({})]),tC=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[lo(a.translate(t))],behaviours:Ae([Nt.config({})])}),xc=Ue("update-menu-text"),mg=Ue("update-menu-icon"),F3=Ue("update-tooltip-text"),$3=(t,s,a,c)=>{const u=Ve(re),m=Ve(t.tooltip),f=t.text.map(j=>Tn(tC(j,s,a.providers))),p=t.icon.map(j=>Tn(Hl(j,a.providers.icons))),b=(j,V)=>{const q=We.getValue(j);return St.focus(q),mt(q,"keydown",{raw:V.event.raw}),Mi.close(q),S.some(!0)},C=t.role.fold(()=>({}),j=>({role:j})),x=S.from(t.listRole).map(j=>({listRole:j})).getOr({}),k=t.ariaLabel.fold(()=>({}),j=>({"aria-label":a.providers.translate(j)})),A=Pa("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),R=Ue("common-button-display-events"),L="dropdown-events";return Tn(Mi.sketch({...t.uid?{uid:t.uid}:{},...C,...x,dom:{tag:"button",classes:[s,`${s}--select`].concat(ke(t.classes,j=>`${s}--${j}`)),attributes:{...k,...uo(c)?{"data-mce-name":c}:{}}},components:ep([p.map(j=>j.asSpec()),f.map(j=>j.asSpec()),S.some(A)]),matchWidth:!0,useMinWidth:!0,onOpen:(j,V,q)=>{t.searchable&&x3(q)},dropdownBehaviours:Ae([...t.dropdownBehaviours,li.button(()=>t.disabled||a.providers.checkUiComponentContext(t.context).shouldDisable),Xo(()=>a.providers.checkUiComponentContext(t.context)),If.config({}),Nt.config({}),...t.tooltip.map(j=>bo.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(j),onShow:V=>{if(br(m.get(),t.tooltip,(q,K)=>K!==q).getOr(!1)){const q=a.providers.translate(m.get().getOr(""));bo.setComponents(V,a.providers.tooltips.getComponents({tooltipText:q}))}}}))).toArray(),Dt(L,[ul(t,u),yc(t,u)]),Dt(R,[ro((j,V)=>{t.listRole!=="listbox"&&I3(j)})]),Dt("update-dropdown-width-variable",[ve(Ol(),(j,V)=>Mi.close(j))]),Dt("menubutton-update-display-text",[ve(xc,(j,V)=>{f.bind(q=>q.getOpt(j)).each(q=>{Nt.set(q,[lo(a.providers.translate(V.event.text))])})}),ve(mg,(j,V)=>{p.bind(q=>q.getOpt(j)).each(q=>{Nt.set(q,[Hl(V.event.icon,a.providers.icons)])})}),ve(F3,(j,V)=>{const q=a.providers.translate(V.event.text);Ot(j.element,"aria-label",q),m.set(S.some(V.event.text))})])]),eventOrder:Nn(JN,{[Ja()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[ec()]:["toolbar-button-events",bo.name(),L,R]}),sandboxBehaviours:Ae([nt.config({mode:"special",onLeft:b,onRight:b}),Dt("dropdown-sandbox-events",[ve(Sy,(j,V)=>{Zz(j),V.stop()}),ve(Yf,(j,V)=>{Wz(j,V),V.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...Cy(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:lg,onCollapseMenu:(j,V,q)=>{kn.getHighlighted(q).each(K=>{lg(j,q,K)})},onDehighlightItem:F0}}},getAnchorOverrides:()=>({maxHeightFunction:(j,V)=>{ix()(j,V-10)}}),fetch:j=>Ro.nu(hn(t.fetch,j))})).asSpec()},_U=t=>Tt(t),eR=t=>t.type==="separator",tR=t=>Yt(t,"getSubmenuItems"),AU={type:"separator"},OU=(t,s)=>{const a=Qo(t,(c,u)=>_U(u)?u===""?c:u==="|"?c.length>0&&!eR(c[c.length-1])?c.concat([AU]):c:Yt(s,u.toLowerCase())?c.concat([s[u.toLowerCase()]]):c:c.concat([u]),[]);return a.length>0&&eR(a[a.length-1])&&a.pop(),a},H3=(t,s)=>{const a=t.getSubmenuItems(),c=nR(a,s),u=Nn(c.menus,{[t.value]:c.items}),m=Nn(c.expansions,{[t.value]:t.value});return{item:t,menus:u,expansions:m}},DU=t=>{const s=Ze(t,"value").getOrThunk(()=>Ue("generated-menu-item"));return Nn({value:s},t)},nR=(t,s)=>{const a=OU(Tt(t)?t.split(" "):t,s);return Jo(a,(c,u)=>{if(tR(u)){const m=DU(u),f=H3(m,s);return{menus:Nn(c.menus,f.menus),items:[f.item,...c.items],expansions:Nn(c.expansions,f.expansions)}}else return{...c,items:[u,...c.items]}},{menus:{},expansions:{},items:[]})},oR=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),MU=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),fg=(t,s,a,c)=>{const u=Ue("primary-menu"),m=nR(t,a.shared.providers.menuItems());if(m.items.length===0)return S.none();const f=oR(c),p=ap(u,m.items,s,a,c.isHorizontalMenu,f),b=MU(c),C=Gn(m.menus,(k,A)=>ap(A,k,s,a,!1,b)),x=Nn(C,sf(u,p));return S.from(Hf.tieredData(u,x,m.expansions))},nC=t=>!Yt(t,"items"),V3="data-value",sR=(t,s,a,c,u)=>ke(a,m=>nC(m)?{type:"togglemenuitem",...u?{}:{role:"option"},text:m.text,value:m.value,active:m.value===c,onAction:()=>{We.setValue(t,m.value),mt(t,ka,{name:s}),St.focus(t)}}:{type:"nestedmenuitem",text:m.text,getSubmenuItems:()=>sR(t,s,m.items,c,u)}),z3=(t,s)=>nn(t,a=>nC(a)?vr(a.value===s,a):z3(a.items,s)),NU=(t,s,a)=>{const c=ms(t.items,C=>!nC(C)),u=s.shared.providers,m=a.bind(C=>z3(t.items,C)).orThunk(()=>Ps(t.items).filter(nC)),f=t.label.map(C=>$l(C,u)),p=Jt.parts.field({dom:{},factory:{sketch:C=>$3({context:t.context,uid:C.uid,text:m.map(x=>x.text),icon:S.none(),tooltip:S.none(),role:vr(!c,"combobox"),...c?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(x,k)=>{const A=sR(x,t.name,t.items,We.getValue(x),c);k(fg(A,bc.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:S.none()}))},onSetup:ee(re),getApi:ee({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Yn.config({}),dg(m.map(x=>x.value),x=>ks(x.element,V3),(x,k)=>{z3(t.items,k).each(A=>{Ot(x.element,V3,A.value),mt(x,xc,{text:A.text})})})]},"tox-listbox",s.shared)}}),b={dom:{tag:"div",classes:["tox-listboxfield"]},components:[p]};return Jt.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:At([f.toArray(),[b]]),fieldBehaviours:Ae([st.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable,onDisabled:C=>{Jt.getField(C).each(st.disable)},onEnabled:C=>{Jt.getField(C).each(st.enable)}})])})},rR=(t,s)=>({dom:{tag:"div",classes:t.classes},components:ke(t.items,s.shared.interpreter)}),RU=(t,s,a)=>{const c=ke(t.items,b=>({text:s.translate(b.text),value:b.value})),u=t.label.map(b=>$l(b,s)),m=Jt.parts.field({dom:{},...a.map(b=>({data:b})).getOr({}),selectAttributes:{size:t.size},options:c,factory:zf,selectBehaviours:Ae([st.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),Yn.config({}),Dt("selectbox-change",[ve(rf(),(b,C)=>{mt(b,ka,{name:t.name})})])])}),f=t.size>1?S.none():S.some(Pa("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),p={dom:{tag:"div",classes:["tox-selectfield"]},components:At([[m],f.toArray()])};return Jt.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:At([u.toArray(),[p]]),fieldBehaviours:Ae([st.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:b=>{Jt.getField(b).each(st.disable)},onEnabled:b=>{Jt.getField(b).each(st.enable)}}),Xo(()=>s.checkUiComponentContext(t.context))])})},aR=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=u=>u in s?s[u]:1;let c=t.value.toFixed(a(t.unit));return c.indexOf(".")!==-1&&(c=c.replace(/\.?0*$/,"")),c+t.unit},oC=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const c=parseFloat(a[1]),u=a[2];return Ft.value({value:c,unit:u})}else return Ft.error(t)},sC=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},c=u=>Yt(a,u);return t.unit===s?S.some(t.value):c(t.unit)&&c(s)?a[t.unit]===a[s]?S.some(t.value):S.some(t.value/a[t.unit]*a[s]):S.none()},up=t=>S.none(),BU=(t,s)=>a=>sC(a,s).map(c=>({value:c*t,unit:s})),iR=(t,s)=>{const a=oC(t).toOptional(),c=oC(s).toOptional();return br(a,c,(u,m)=>sC(u,m.unit).map(f=>m.value/f).map(f=>BU(f,m.unit)).getOr(up)).getOr(up)},PU=(t,s)=>{let a=up;const c=Ue("ratio-event"),u=z=>Pa(z,{tag:"span",classes:["tox-icon","tox-lock-icon__"+z]},s.icons),m=()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,f=Xo(()=>s.checkUiComponentContext(t.context)),p=t.label.getOr("Constrain proportions"),b=s.translate(p),C=zt.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":b,"data-mce-name":p}},components:[u("lock"),u("unlock")],buttonBehaviours:Ae([st.config({disabled:m}),f,Yn.config({}),bo.config(s.tooltips.getConfig({tooltipText:b}))])}),x=z=>({dom:{tag:"div",classes:["tox-form__group"]},components:z}),k=z=>Jt.parts.field({factory:Ou,inputClasses:["tox-textfield"],inputBehaviours:Ae([st.config({disabled:m}),f,Yn.config({}),Dt("size-input-events",[ve(Lr(),(j,V)=>{mt(j,c,{isField1:z})}),ve(rf(),(j,V)=>{mt(j,ka,{name:t.name})})])]),selectOnFocus:!1}),A=z=>({dom:{tag:"label",classes:["tox-label"]},components:[lo(s.translate(z))]}),R=zt.parts.field1(x([Jt.parts.label(A("Width")),k(!0)])),L=zt.parts.field2(x([Jt.parts.label(A("Height")),k(!1)]));return zt.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[R,L,x([A(Nc),C])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(z,j,V)=>{oC(We.getValue(z)).each(q=>{a(q).each(K=>{We.setValue(j,aR(K))})})},coupledFieldBehaviours:Ae([st.config({disabled:m,onDisabled:z=>{zt.getField1(z).bind(Jt.getField).each(st.disable),zt.getField2(z).bind(Jt.getField).each(st.disable),zt.getLock(z).each(st.disable)},onEnabled:z=>{zt.getField1(z).bind(Jt.getField).each(st.enable),zt.getField2(z).bind(Jt.getField).each(st.enable),zt.getLock(z).each(st.enable)}}),Xo(()=>s.checkUiComponentContext("mode:design")),Dt("size-input-events2",[ve(c,(z,j)=>{const V=j.event.isField1,q=V?zt.getField1(z):zt.getField2(z),K=V?zt.getField2(z):zt.getField1(z),ie=q.map(We.getValue).getOr(""),me=K.map(We.getValue).getOr("");a=iR(ie,me)})])])})},LU=(t,s,a)=>{const c=al.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[lo(s.translate(t.label))]}),u=al.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),m=al.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return al.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:ee(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[c,u,m],sliderBehaviours:Ae([Cc.self(),St.config({})]),onChoose:(f,p,b)=>{mt(f,ka,{name:t.name,value:b})},onChange:(f,p,b)=>{mt(f,ka,{name:t.name,value:b})}})},IU=(t,s)=>{const a=p=>({dom:{tag:"th",innerHtml:s.translate(p)}}),c=p=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:ke(p,a)}]}),u=p=>({dom:{tag:"td",innerHtml:s.translate(p)}}),m=p=>({dom:{tag:"tr"},components:ke(p,u)}),f=p=>({dom:{tag:"tbody"},components:ke(p,m)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[c(t.header),f(t.cells)],behaviours:Ae([Yn.config({}),St.config({})])}},cR=(t,s)=>{const a=t.label.map(R=>$l(R,s)),c=[st.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable}),Xo(()=>s.checkUiComponentContext(t.context)),nt.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:R=>(rn(R,ug),S.some(!0))}),Dt("textfield-change",[ve(td(),(R,L)=>{mt(R,ka,{name:t.name})}),ve(DS(),(R,L)=>{mt(R,ka,{name:t.name})})]),Yn.config({})],u=t.validation.map(R=>ol.config({getRoot:L=>sn(L.element),invalidClass:"tox-invalid",validator:{validate:L=>{const z=We.getValue(L),j=R.validator(z);return Ro.pure(j===!0?Ft.value(z):Ft.error(j))},validateOnLoad:R.validateOnLoad}})).toArray(),m=t.placeholder.fold(ee({}),R=>({placeholder:s.translate(R)})),f=t.inputMode.fold(ee({}),R=>({inputmode:R})),p={...m,...f,"data-mce-name":t.name},b=Jt.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(R=>({data:R})).getOr({}),inputAttributes:p,inputClasses:[t.classname],inputBehaviours:Ae(At([c,u])),selectOnFocus:!1,factory:Ou}),C=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[b]}:b,k=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),A=[st.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:R=>{Jt.getField(R).each(st.disable)},onEnabled:R=>{Jt.getField(R).each(st.enable)}}),Xo(()=>s.checkUiComponentContext(t.context))];return ip(a,C,k,A)},FU=(t,s,a)=>cR({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:S.none(),maximized:t.maximized,data:a,context:t.context},s),$U=(t,s,a)=>cR({name:t.name,multiline:!0,label:t.label,inputMode:S.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:S.none(),maximized:t.maximized,data:a,context:t.context},s),lR=t=>({isEnabled:()=>!st.isDisabled(t),setEnabled:s=>st.set(t,!s),setActive:s=>{const a=t.element;s?(Vo(a,"tox-tbtn--enabled"),Ot(a,"aria-pressed",!0)):(fo(a,"tox-tbtn--enabled"),Ao(a,"aria-pressed"))},isActive:()=>wr(t.element,"tox-tbtn--enabled"),setTooltip:s=>{mt(t,F3,{text:s})},setText:s=>{mt(t,xc,{text:s})},setIcon:s=>mt(t,mg,{icon:s})}),dp=(t,s,a,c,u=!0,m)=>{const f=t.buttonType==="bordered"?["bordered"]:[];return $3({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:c,fetch:(p,b)=>{const C={pattern:t.search.isSome()?qz(p):""};t.fetch(x=>{b(fg(x,bc.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},C,lR(p))},onSetup:t.onSetup,getApi:p=>lR(p),columns:1,presets:"normal",classes:f,dropdownBehaviours:[...u?[Yn.config({})]:[]],context:t.context},s,a.shared,m)},rC=(t,s,a)=>{const c=m=>f=>{const p=!f.isActive();f.setActive(p),m.storage.set(p),a.shared.getSink().each(b=>{s().getOpt(b).each(C=>{ss(C.element),mt(C,Ru,{name:m.name,value:m.storage.get()})})})},u=m=>f=>{f.setActive(m.storage.get())};return m=>{m(ke(t,f=>{const p=f.text.fold(()=>({}),b=>({text:b}));return{type:f.type,active:!1,...p,context:f.context,onAction:c(f),onSetup:u(f)}}))}},aC=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[lo(t)]}),U3=(t,s,a)=>{t.customStateIcon.each(c=>s.push(uR(c,a.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],u=>[bo.config(a.shared.providers.tooltips.getConfig({tooltipText:u}))]),["tox-icon-custom-state"])))},Md=Ue("leaf-label-event-id"),iC=({leaf:t,onLeafAction:s,visible:a,treeId:c,selectedId:u,backstage:m})=>{const f=t.menu.map(b=>dp(b,"tox-mbtn",m,S.none(),a)),p=[aC(t.title)];return U3(t,p,m),f.each(b=>p.push(b)),er.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:p,role:"treeitem",action:b=>{s(t.id),b.getSystem().broadcastOn([`update-active-item-${c}`],{value:t.id})},eventOrder:{[Al()]:[Md,"keying"]},buttonBehaviours:Ae([...a?[Yn.config({})]:[],Ut.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),xa.config({channels:{[`update-active-item-${c}`]:{onReceive:(b,C)=>{(C.value===t.id?Ut.on:Ut.off)(b)}}}}),Dt(Md,[ro((b,C)=>{u.each(x=>{(x===t.id?Ut.on:Ut.off)(b)})}),ve(Al(),(b,C)=>{const x=C.event.raw.code==="ArrowLeft",k=C.event.raw.code==="ArrowRight";x?(Hc(b.element,".tox-tree--directory").each(A=>{b.getSystem().getByDom(A).each(R=>{cu(A,".tox-tree--directory__label").each(L=>{R.getSystem().getByDom(L).each(St.focus)})})}),C.stop()):k&&C.stop()})])])})},uR=(t,s,a,c,u)=>Pa(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(c||[]),behaviours:a,attributes:u},s),HU=(t,s)=>uR(t,s,[]),dR=Ue("directory-label-event-id"),VU=({directory:t,visible:s,noChildren:a,backstage:c})=>{const u=t.menu.map(p=>dp(p,"tox-mbtn",c,S.none())),m=[{dom:{tag:"div",classes:["tox-chevron"]},components:[HU("chevron-right",c.shared.providers.icons)]},aC(t.title)];U3(t,m,c),u.each(p=>{m.push(p)});const f=p=>{Hc(p.element,".tox-tree--directory").each(b=>{p.getSystem().getByDom(b).each(C=>{const x=!Ut.isOn(C);Ut.toggle(C),mt(p,"expand-tree-node",{expanded:x,node:t.id})})})};return er.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:m,action:f,eventOrder:{[Al()]:[dR,"keying"]},buttonBehaviours:Ae([...s?[Yn.config({})]:[],Dt(dR,[ve(Al(),(p,b)=>{const C=b.event.raw.code==="ArrowRight",x=b.event.raw.code==="ArrowLeft";C&&a&&b.stop(),(C||x)&&Hc(p.element,".tox-tree--directory").each(k=>{p.getSystem().getByDom(k).each(A=>{!Ut.isOn(A)&&C||Ut.isOn(A)&&x?(f(p),b.stop()):x&&!Ut.isOn(A)&&(Hc(A.element,".tox-tree--directory").each(R=>{cu(R,".tox-tree--directory__label").each(L=>{A.getSystem().getByDom(L).each(St.focus)})}),b.stop())})})})])])})},zU=({children:t,onLeafAction:s,visible:a,treeId:c,expandedIds:u,selectedId:m,backstage:f})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(p=>p.type==="leaf"?iC({leaf:p,selectedId:m,onLeafAction:s,visible:a,treeId:c,backstage:f}):Z3({directory:p,expandedIds:u,selectedId:m,onLeafAction:s,labelTabstopping:a,treeId:c,backstage:f})),behaviours:Ae([oa.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),Nt.config({})])}),UU=Ue("directory-event-id"),Z3=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:c,backstage:u,expandedIds:m,selectedId:f})=>{const{children:p}=t,b=Ve(m),C=k=>p.map(A=>A.type==="leaf"?iC({leaf:A,selectedId:f,onLeafAction:s,visible:k,treeId:c,backstage:u}):Z3({directory:A,expandedIds:b.get(),selectedId:f,onLeafAction:s,labelTabstopping:k,treeId:c,backstage:u})),x=m.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[VU({directory:t,visible:a,noChildren:t.children.length===0,backstage:u}),zU({children:p,expandedIds:m,selectedId:f,onLeafAction:s,visible:x,treeId:c,backstage:u})],behaviours:Ae([Dt(UU,[ro((k,A)=>{Ut.set(k,x)}),ve("expand-tree-node",(k,A)=>{const{expanded:R,node:L}=A.event;b.set(R?[...b.get(),L]:b.get().filter(z=>z!==L))})]),Ut.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(k,A)=>{const R=k.components()[1],L=C(A);A?oa.grow(R):oa.shrink(R),Nt.set(R,L)}})])}},mR=Ue("tree-event-id"),ZU=(t,s)=>{const a=t.onLeafAction.getOr(re),c=t.onToggleExpand.getOr(re),u=t.defaultExpandedIds,m=Ve(u),f=Ve(t.defaultSelectedId),p=Ue("tree-id"),b=(C,x)=>t.items.map(k=>k.type==="leaf"?iC({leaf:k,selectedId:C,onLeafAction:a,visible:!0,treeId:p,backstage:s}):Z3({directory:k,selectedId:C,onLeafAction:a,expandedIds:x,labelTabstopping:!0,treeId:p,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:b(f.get(),m.get()),behaviours:Ae([nt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Dt(mR,[ve("expand-tree-node",(C,x)=>{const{expanded:k,node:A}=x.event;m.set(k?[...m.get(),A]:m.get().filter(R=>R!==A)),c(m.get(),{expanded:k,node:A})})]),xa.config({channels:{[`update-active-item-${p}`]:{onReceive:(C,x)=>{f.set(S.some(x.value)),Nt.set(C,b(S.some(x.value),m.get()))}}}}),Nt.config({})])}},cC=(t,s,a=[],c,u,m,f)=>{const p=s.fold(()=>({}),x=>({action:x})),b={buttonBehaviours:Ae([li.item(()=>!t.enabled||f.checkUiComponentContext(t.context).shouldDisable),Xo(()=>f.checkUiComponentContext(t.context)),Yn.config({}),...m.map(x=>bo.config(f.tooltips.getConfig({tooltipText:f.translate(x)}))).toArray(),Dt("button press",[NP("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...p},C=Nn(b,{dom:c});return Nn(C,{components:u})},W3=(t,s,a,c=[],u)=>{const m=t.tooltip.map(C=>({"aria-label":a.translate(C)})).getOr({}),f={tag:"button",classes:["tox-tbtn"],attributes:{...m,"data-mce-name":u}},p=t.icon.map(C=>eC(C,a.icons)),b=ep([p]);return cC(t,s,c,f,b,t.tooltip,a)},j3=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},fR=(t,s,a,c=[],u=[])=>{const m=a.translate(t.text),f=t.icon.map(R=>eC(R,a.icons)),p=[f.getOrThunk(()=>lo(m))],b=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),k={tag:"button",classes:[...j3(b),...f.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...u],attributes:{"aria-label":m,"data-mce-name":t.text}},A=t.icon.map(ee(m));return cC(t,s,c,k,p,A,a)},gR=(t,s,a,c=[],u=[])=>{const m=fR(t,S.some(s),a,c,u);return er.sketch(m)},hR=(t,s)=>a=>{s==="custom"?mt(a,Ru,{name:t,value:{}}):s==="submit"?rn(a,ug):s==="cancel"?rn(a,Om):console.error("Unknown button type: ",s)},WU=(t,s)=>s==="menu",jU=(t,s)=>s==="custom"||s==="cancel"||s==="submit",pR=(t,s)=>s==="togglebutton",bR=(t,s,a)=>{var c,u;const m=t.icon.map(K=>Hl(K,s.icons)).map(Tn),f=K=>{mt(K,Ru,{name:t.name,value:{setIcon:ie=>{m.map(me=>me.getOpt(K).each(He=>{Nt.set(He,[Hl(ie,s.icons)])}))}}})},p=t.buttonType.getOr(t.primary?"primary":"secondary"),b={...t,name:(c=t.name)!==null&&c!==void 0?c:"",primary:p==="primary",tooltip:t.tooltip,enabled:(u=t.enabled)!==null&&u!==void 0?u:!1,borderless:!1},C=b.tooltip.or(t.text).map(K=>({"aria-label":s.translate(K)})).getOr({}),x=j3(p??"secondary"),k=t.icon.isSome()&&t.text.isSome(),A={tag:"button",classes:[...x.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...k?["tox-button--icon-and-text"]:[]],attributes:{...C,...uo(a)?{"data-mce-name":a}:{}}},R=[],L=s.translate(t.text.getOr("")),z=lo(L),V=[...ep([m.map(K=>K.asSpec())]),...t.text.isSome()?[z]:[]],q=cC(b,S.some(f),R,A,V,t.tooltip,s);return er.sketch(q)},G0=(t,s,a)=>{if(WU(t,s)){const c=()=>f,u=t,m={...t,buttonType:"default",type:"menubutton",search:S.none(),onSetup:p=>(p.setEnabled(t.enabled),re),fetch:rC(u.items,c,a)},f=Tn(dp(m,"tox-tbtn",a,S.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return f.asSpec()}else if(jU(t,s)){const c=hR(t.name,s),u={...t,context:s==="cancel"?"any":t.context,borderless:!1};return gR(u,c,a.shared.providers,[])}else{if(pR(t,s))return bR(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},GU=(t,s)=>{const a=hR(t.name,"custom");return BN(S.none(),Jt.parts.field({factory:er,...fR(t,S.some(a),s,[z0(""),Cc.self()])}))},vR={type:"separator"},qU=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:re}),G3=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:re}),KU=t=>ke(t,qU),yR=(t,s)=>Zn(s,a=>a.type===t),CR=(t,s)=>KU(yR(t,s)),SR=t=>CR("header",t.targets),YU=t=>CR("anchor",t.targets),XU=t=>S.from(t.anchorTop).map(s=>G3("<top>",s)).toArray(),JU=t=>S.from(t.anchorBottom).map(s=>G3("<bottom>",s)).toArray(),QU=t=>ke(t,s=>G3(s,s)),eZ=t=>Qo(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(vR,a),[]),q3=(t,s)=>{const a=t.toLowerCase();return Zn(s,c=>{var u;const m=c.meta!==void 0&&c.meta.text!==void 0?c.meta.text:c.text,f=(u=c.value)!==null&&u!==void 0?u:"";return io(m.toLowerCase(),a)||io(f.toLowerCase(),a)})},tZ=(t,s,a)=>{var c,u;const m=We.getValue(s),f=(u=(c=m==null?void 0:m.meta)===null||c===void 0?void 0:c.text)!==null&&u!==void 0?u:m.value;return a.getLinkInformation().fold(()=>[],b=>{const C=q3(f,QU(a.getHistory(t)));return t==="file"?eZ([C,q3(f,SR(b)),q3(f,At([XU(b),YU(b),JU(b)]))]):C})},K3=Ue("aria-invalid"),nZ=(t,s,a,c)=>{const u=s.shared.providers,m=q=>{const K=We.getValue(q);a.addToHistory(K.value,t.filetype)},f={...c.map(q=>({initialData:q})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":K3,type:"url"},minChars:0,responseTime:0,fetch:q=>{const K=tZ(t.filetype,q,a),ie=fg(K,bc.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:S.none()});return Ro.pure(ie)},getHotspot:q=>L.getOpt(q),onSetValue:(q,K)=>{q.hasConfigured(ol)&&ol.run(q).get(re)},typeaheadBehaviours:Ae([...a.getValidationHandler().map(q=>ol.config({getRoot:K=>sn(K.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(K,ie)=>{x.getOpt(K).each(me=>{Ot(me.element,"title",u.translate(ie))})}},validator:{validate:K=>{const ie=We.getValue(K);return Ld.nu(me=>{q({type:t.filetype,url:ie.value},He=>{if(He.status==="invalid"){const Te=Ft.error(He.message);me(Te)}else{const Te=Ft.value(He.message);me(Te)}})})},validateOnLoad:!1}})).toArray(),st.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable}),Yn.config({}),Dt("urlinput-events",[ve(td(),q=>{const K=Vc(q.element),ie=K.trim();ie!==K&&Jm(q.element,ie),t.filetype==="file"&&mt(q,ka,{name:t.name})}),ve(rf(),q=>{mt(q,ka,{name:t.name}),m(q)}),ve(DS(),q=>{mt(q,ka,{name:t.name}),m(q)})])]),eventOrder:{[td()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:q=>q.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:Cy(!1,1,"normal")},onExecute:(q,K,ie)=>{mt(K,ug,{})},onItemExecute:(q,K,ie,me)=>{m(q),mt(q,ka,{name:t.name})}},p=Jt.parts.field({...f,factory:IH}),b=t.label.map(q=>$l(q,u)),x=Tn(((q,K,ie=q,me=q)=>Pa(ie,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+q],attributes:{title:u.translate(me),"aria-live":"polite",...K.fold(()=>({}),He=>({id:He}))}},u.icons))("invalid",S.some(K3),"warning")),k=Tn({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[x.asSpec()]}),A=a.getUrlPicker(t.filetype),R=Ue("browser.url.event"),L=Tn({dom:{tag:"div",classes:["tox-control-wrap"]},components:[p,k.asSpec()],behaviours:Ae([st.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable})])}),z=Tn(gR({context:t.context,name:t.name,icon:S.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:S.none(),borderless:!0},q=>rn(q,R),u,[],["tox-browse-url"])),j=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:At([[L.asSpec()],A.map(()=>z.asSpec()).toArray()])}),V=q=>{an.getCurrent(q).each(K=>{const ie=We.getValue(K),me={fieldname:t.name,...ie};A.each(He=>{He(me).get(Te=>{We.setValue(K,Te),mt(q,ka,{name:t.name})})})})};return Jt.sketch({dom:tU(),components:b.toArray().concat([j()]),fieldBehaviours:Ae([st.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable,onDisabled:q=>{Jt.getField(q).each(st.disable),z.getOpt(q).each(st.disable)},onEnabled:q=>{Jt.getField(q).each(st.enable),z.getOpt(q).each(st.enable)}}),Xo(()=>u.checkUiComponentContext(t.context)),Dt("url-input-events",[ve(R,V)])])})},oZ=(t,s)=>{const a=hE(t.icon,s.icons);return uc.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[er.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:c=>mt(c,Ru,{name:"alert-banner",value:t.url}),buttonBehaviours:Ae([CM()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},sZ=(t,s,a)=>{const c=b=>(b.element.dom.click(),S.some(!0)),u=Jt.parts.field({factory:{sketch:$t},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Ae([Cc.self(),st.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:b=>{sn(b.element).each(C=>Vo(C,"tox-checkbox--disabled"))},onEnabled:b=>{sn(b.element).each(C=>fo(C,"tox-checkbox--disabled"))}}),Yn.config({}),St.config({}),HN(a,zp,uS),nt.config({mode:"special",onEnter:c,onSpace:c,stopSpaceKeyup:!0}),Dt("checkbox-events",[ve(rf(),(b,C)=>{mt(b,ka,{name:t.name})})])])}),m=Jt.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[lo(s.translate(t.label))],behaviours:Ae([If.config({})])}),f=b=>Pa(b==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+b]},s.icons),p=Tn({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[f("checked"),f("unchecked")]});return Jt.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[u,p.asSpec(),m],fieldBehaviours:Ae([st.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),Xo(()=>s.checkUiComponentContext(t.context))])})},rZ=(t,s)=>{const a=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],c=Dt("htmlpanel",[ro(u=>{t.onInit(u.element.dom)})]);return t.presets==="presentation"?uc.sketch({dom:{tag:"div",classes:a,innerHtml:t.html},containerBehaviours:Ae([bo.config({...s.tooltips.getConfig({tooltipText:"",onShow:u=>{qn(u.element,"[data-mce-tooltip]:hover").orThunk(()=>Sr(u.element)).each(m=>{Ts(m,"data-mce-tooltip").each(f=>{bo.setComponents(u,s.tooltips.getComponents({tooltipText:f}))})})}}),mode:"children-normal",anchor:u=>({type:"node",node:qn(u.element,"[data-mce-tooltip]:hover").orThunk(()=>Sr(u.element).filter(m=>Ts(m,"data-mce-tooltip").isSome())),root:u.element,layouts:{onLtr:ee([us,Ds,Yo,fr,ls,zs]),onRtl:ee([us,Ds,Yo,fr,ls,zs])},bubble:Fr(0,-2,{})})}),c])}):uc.sketch({dom:{tag:"div",classes:a,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Ae([Yn.config({}),St.config({}),c])})},Rs=t=>(s,a,c,u,m)=>Ze(a,"name").fold(()=>t(a,u,S.none(),m),f=>s.field(f,t(a,u,Ze(c,f),m))),aZ=t=>(s,a,c,u,m)=>{const f=Nn(a,{source:"dynamic"});return Rs(t)(s,f,c,u,m)},iZ={bar:Rs((t,s)=>Qz(t,s.shared)),collection:Rs((t,s,a)=>nU(t,s.shared.providers,a)),alertbanner:Rs((t,s)=>oZ(t,s.shared.providers)),input:Rs((t,s,a)=>FU(t,s.shared.providers,a)),textarea:Rs((t,s,a)=>$U(t,s.shared.providers,a)),label:Rs((t,s,a,c)=>kU(t,s.shared,c)),iframe:aZ((t,s,a)=>XN(t,s.shared.providers,a)),button:Rs((t,s)=>GU(t,s.shared.providers)),checkbox:Rs((t,s,a)=>sZ(t,s.shared.providers,a)),colorinput:Rs((t,s,a)=>uq(t,s.shared,s.colorinput,a)),colorpicker:Rs((t,s,a)=>U0(t,s.shared.providers,a)),dropzone:Rs((t,s,a)=>Sc(t,s.shared.providers,a)),grid:Rs((t,s)=>hU(t,s.shared)),listbox:Rs((t,s,a)=>NU(t,s,a)),selectbox:Rs((t,s,a)=>RU(t,s.shared.providers,a)),sizeinput:Rs((t,s)=>PU(t,s.shared.providers)),slider:Rs((t,s,a)=>LU(t,s.shared.providers,a)),urlinput:Rs((t,s,a)=>nZ(t,s,s.urlinput,a)),customeditor:Rs(fU),htmlpanel:Rs((t,s)=>rZ(t,s.shared.providers)),imagepreview:Rs((t,s,a)=>EU(t,a)),table:Rs((t,s)=>IU(t,s.shared.providers)),tree:Rs((t,s)=>ZU(t,s)),panel:Rs((t,s)=>rR(t,s))},xR={field:(t,s)=>s,record:ee([])},wR=(t,s,a,c,u)=>{const m=Nn(c,{shared:{interpreter:f=>Y3(t,f,a,m,u)}});return Y3(t,s,a,m,u)},Y3=(t,s,a,c,u)=>Ze(iZ,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),m=>m(t,s,a,c,u)),X3=(t,s,a,c)=>Y3(xR,t,s,a,c),q0={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},ER=(t,s,a)=>{const u={maxHeightFunction:hf()},m=()=>({type:"node",root:Ku(Fs(t())),node:S.from(t()),bubble:Fr(12,12,q0),layouts:{onRtl:()=>[d1],onLtr:()=>[ah]},overrides:u}),f=()=>({type:"hotspot",hotspot:s(),bubble:Fr(-12,12,q0),layouts:{onRtl:()=>[Yo,ls,us],onLtr:()=>[ls,Yo,us]},overrides:u});return()=>a()?m():f()},kR=(t,s,a,c)=>{const m={maxHeightFunction:hf()},f=()=>({type:"node",root:Ku(Fs(s())),node:S.from(s()),bubble:Fr(12,12,q0),layouts:{onRtl:()=>[nc],onLtr:()=>[nc]},overrides:m}),p=()=>t?{type:"node",root:Ku(Fs(s())),node:S.from(s()),bubble:Fr(0,-xo(s()),q0),layouts:{onRtl:()=>[Ds],onLtr:()=>[Ds]},overrides:m}:{type:"hotspot",hotspot:a(),bubble:Fr(0,0,q0),layouts:{onRtl:()=>[Ds],onLtr:()=>[Ds]},overrides:m};return()=>c()?f():p()},cZ=(t,s,a)=>{const c=()=>({type:"node",root:Ku(Fs(t())),node:S.from(t()),layouts:{onRtl:()=>[nc],onLtr:()=>[nc]}}),u=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[us],onLtr:()=>[us]}});return()=>a()?c():u()},lZ=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),c=t.model.table.getSelectedCells();if(c.length>1){const u=c[0],m=c[c.length-1],f={firstCell:ne.fromDom(u),lastCell:ne.fromDom(m)};return S.some(f)}return S.some(Wp.range(ne.fromDom(a.startContainer),a.startOffset,ne.fromDom(a.endContainer),a.endOffset))}}),uZ=t=>s=>({type:"node",root:t(),node:s}),mp=(t,s,a,c)=>{const u=zh(t),m=()=>ne.fromDom(t.getBody()),f=()=>ne.fromDom(t.getContentAreaContainer()),p=()=>u||!c();return{inlineDialog:ER(f,s,p),inlineBottomDialog:kR(t.inline,f,a,p),banner:cZ(f,s,p),cursor:lZ(t,m),node:uZ(m)}},dZ=t=>(s,a)=>{wN(t)(s,a)},mZ=t=>()=>gN(t),fZ=t=>s=>Vy(t,s),gZ=t=>s=>fN(t,s),hZ=t=>({colorPicker:dZ(t),hasCustomColors:mZ(t),getColors:fZ(t),getColorCols:gZ(t)}),pZ=t=>()=>WD(t),bZ=t=>({isDraggableModal:pZ(t)}),vZ=t=>{const s=Ve(Q4(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},lC=t=>ir(t,"items"),TR=t=>ir(t,"format"),_R=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],AR=t=>Yt(t,"items"),OR=t=>Yt(t,"block"),yZ=t=>Yt(t,"inline"),CZ=t=>Yt(t,"selector"),DR=t=>Qo(t,(s,a)=>{if(AR(a)){const c=DR(a.items);return{customFormats:s.customFormats.concat(c.customFormats),formats:s.formats.concat([{title:a.title,items:c.formats}])}}else if(yZ(a)||OR(a)||CZ(a)){const u=`custom-${Tt(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:u,format:a}]),formats:s.formats.concat([{title:a.title,format:u,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),SZ=(t,s)=>{const a=DR(s),c=u=>{ze(u,m=>{t.formatter.has(m.name)||t.formatter.register(m.name,m.format)})};return t.formatter?c(a.customFormats):t.on("init",()=>{c(a.customFormats)}),a.formats},MR=t=>BD(t).map(s=>{const a=SZ(t,s);return PD(t)?_R.concat(a):a}).getOr(_R),xZ=t=>{const s=eo(t);return s.length===1&&jn(s,"title")},J3=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),NR=(t,s,a,c)=>{const u=b=>J3(b,a,c),m=b=>{const C=p(b.items);return{...b,type:"submenu",getStyleItems:ee(C)}},f=b=>{const C=Tt(b.name)?b.name:Ue(b.title),x=`custom-${C}`,k={...b,type:"formatter",format:x,isSelected:a(x),getStylePreview:c(x)};return t.formatter.register(C,k),k},p=b=>ke(b,C=>lC(C)?m(C):TR(C)?u(C):xZ(C)?{...C,type:"separator"}:f(C));return p(s)},wZ=t=>{const s=p=>()=>t.formatter.match(p),a=p=>()=>{const b=t.formatter.get(p);return b!==void 0?S.some({tag:b.length>0&&(b[0].inline||b[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):S.none()},c=Ve([]),u=Ve([]),m=Ve(!1);return t.on("PreInit",p=>{const b=MR(t),C=NR(t,b,s,a);c.set(C)}),t.on("addStyleModifications",p=>{const b=NR(t,p.items,s,a);u.set(b),m.set(p.replace)}),{getData:()=>{const p=m.get()?[]:c.get(),b=u.get();return p.concat(b)}}},EZ=t=>{let c=0;const u=()=>c>0,m=p=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[lo(p.tooltipText)]}];return{getConfig:p=>({delayForShow:()=>u()?60:300,delayForHide:ee(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:m(p),onShow:(b,C)=>{c++,p.onShow&&p.onShow(b,C)},onHide:(b,C)=>{c--,p.onHide&&p.onHide(b,C)},onSetup:p.onSetup}),getComponents:m}},kZ=t=>uo(t)&&t.nodeType===1,RR=dl.trim,BR=t=>s=>!!(kZ(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),uC=BR("true"),dC=BR("false"),Q3=(t,s,a,c,u)=>({type:t,title:s,url:a,level:c,attach:u}),TZ=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return uC(s)}return!1},_Z=(t,s)=>ke(go(ne.fromDom(s),t),a=>a.dom),PR=t=>t.innerText||t.textContent,AZ=t=>t.id?t.id:Ue("h"),OZ=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,mC=t=>OZ(t)&&tk(t),ek=t=>t&&/^(H[1-6])$/.test(t.nodeName),tk=t=>TZ(t)&&!dC(t),LR=t=>ek(t)&&tk(t),IR=t=>ek(t)?parseInt(t.nodeName.substr(1),10):0,DZ=t=>{var s;const a=AZ(t),c=()=>{t.id=a};return Q3("header",(s=PR(t))!==null&&s!==void 0?s:"","#"+a,IR(t),c)},FR=t=>{const s=t.id||t.name,a=PR(t);return Q3("anchor",a||"#"+s,"#"+s,0,re)},MZ=t=>ke(Zn(t,LR),DZ),NZ=t=>ke(Zn(t,mC),FR),RZ=t=>_Z("h1,h2,h3,h4,h5,h6,a:not([href])",t),BZ=t=>RR(t.title).length>0,K0={find:t=>{const s=RZ(t);return Zn(MZ(s).concat(NZ(s)),BZ)}},fC="tinymce-url-history",$R=5,HR=t=>Tt(t)&&/^https?/.test(t),VR=t=>X(t)&&t.length<=$R&&hi(t,HR),zR=t=>rr(t)&&ws(t,s=>!VR(s)).isNone(),nk=()=>{const t=ig.getItem(fC);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+fC+" was not valid JSON",a),{};throw a}return zR(s)?s:(console.log("Local storage "+fC+" was not valid format",s),{})},PZ=t=>{if(!zR(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));ig.setItem(fC,JSON.stringify(t))},LZ=t=>{const s=nk();return Ze(s,t).getOr([])},IZ=(t,s)=>{if(!HR(t))return;const a=nk(),c=Ze(a,s).getOr([]),u=Zn(c,m=>m!==t);a[s]=[t].concat(u).slice(0,$R),PZ(a)},UR=t=>!!t,FZ=t=>Gn(dl.makeMap(t,/[, ]/),UR),gg=t=>S.from(q4(t)),ZR=t=>{const s=S.from($h(t)).filter(UR).map(FZ);return gg(t).fold(gn,a=>s.fold(ct,c=>eo(c).length>0?c:!1))},$Z=(t,s)=>{const a=ZR(t);return yo(a)?a?gg(t):S.none():a[s]?gg(t):S.none()},HZ=(t,s)=>$Z(t,s).map(a=>c=>Ro.nu(u=>{const m=(p,b)=>{if(!Tt(p))throw new Error("Expected value to be string");if(b!==void 0&&!rr(b))throw new Error("Expected meta to be a object");u({value:p,meta:b})},f={filetype:s,fieldname:c.fieldname,...S.from(c.meta).getOr({})};a.call(t,m,c.value,f)})),ok=t=>S.from(t).filter(Tt).getOrUndefined(),sk=t=>Hh(t)?S.some({targets:K0.find(t.getBody()),anchorTop:ok(UD(t)),anchorBottom:ok(ZD(t))}):S.none(),WR=t=>S.from(p0(t)),jR=t=>({getHistory:LZ,addToHistory:IZ,getLinkInformation:()=>sk(t),getValidationHandler:()=>WR(t),getUrlPicker:s=>HZ(t,s)}),VZ=(t,s,a,c)=>{const u=Ve(!1),m=vZ(s),f={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:pc.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:EZ(t.dialog),checkUiComponentContext:V=>{if(W4(s))return{contextType:"disabled",shouldDisable:!0};const[q,K=""]=V.split(":"),ie=s.ui.registry.getAll().contexts,me=Ze(ie,q).fold(()=>Ze(ie,"mode").map(He=>He("design")).getOr(!1),He=>K.charAt(0)==="!"?!He(K.slice(1)):He(K));return{contextType:q,shouldDisable:!me}}},p=jR(s),b=wZ(s),C=hZ(s),x=bZ(s),k=()=>u.get(),A=V=>u.set(V),R={shared:{providers:f,anchors:mp(s,a,c,m.isPositionedAtTop),header:m},urlinput:p,styles:b,colorinput:C,dialog:x,isContextMenuOpen:k,setContextMenuState:A},L=V=>S.none(),z={...R,shared:{...R.shared,interpreter:V=>X3(V,{},z,L),getSink:t.popup}},j={...R,shared:{...R.shared,interpreter:V=>X3(V,{},j,L),getSink:t.dialog}};return{popup:z,dialog:j}},fp=(t,s,a)=>{const c=(fe,je)=>{ze([s,...a],pt=>{pt.broadcastEvent(fe,je)})},u=(fe,je)=>{ze([s,...a],pt=>{pt.broadcastOn([fe],je)})},m=fe=>u(Tu(),{target:fe.target}),f=Ig(),p=Ys(f,"touchstart",m),b=Ys(f,"touchmove",fe=>c(oP(),fe)),C=Ys(f,"touchend",fe=>c(n1(),fe)),x=Ys(f,"mousedown",m),k=Ys(f,"mouseup",fe=>{fe.raw.button===0&&u(Ww(),{target:fe.target})}),A=fe=>u(Tu(),{target:ne.fromDom(fe.target)}),R=fe=>{fe.button===0&&u(Ww(),{target:ne.fromDom(fe.target)})},L=()=>{ze(t.editorManager.get(),fe=>{t!==fe&&fe.dispatch("DismissPopups",{relatedTarget:t})})},z=fe=>c(MS(),Lg(fe)),j=fe=>{u(pm(),{}),c(Ol(),Lg(fe))},V=Fs(ne.fromDom(t.getElement())),q=Gm(V,"scroll",fe=>{requestAnimationFrame(()=>{const je=t.getContainer();if(je!=null){const rt=Em(t,s.element).map(Qt=>[Qt.element,...Qt.others]).getOr([]);ms(rt,Qt=>Bn(Qt,fe.target))&&(t.dispatch("ElementScroll",{target:fe.target.dom}),c(uf(),fe))}})}),K=()=>u(pm(),{}),ie=fe=>{fe.state&&u(Tu(),{target:ne.fromDom(t.getContainer())})},me=fe=>{u(Tu(),{target:ne.fromDom(fe.relatedTarget.getContainer())})},He=fe=>t.dispatch("focusin",fe),Te=fe=>t.dispatch("focusout",fe);t.on("PostRender",()=>{t.on("click",A),t.on("tap",A),t.on("mouseup",R),t.on("mousedown",L),t.on("ScrollWindow",z),t.on("ResizeWindow",j),t.on("ResizeEditor",K),t.on("AfterProgressState",ie),t.on("DismissPopups",me),ze([s,...a],fe=>{fe.element.dom.addEventListener("focusin",He),fe.element.dom.addEventListener("focusout",Te)})}),t.on("remove",()=>{t.off("click",A),t.off("tap",A),t.off("mouseup",R),t.off("mousedown",L),t.off("ScrollWindow",z),t.off("ResizeWindow",j),t.off("ResizeEditor",K),t.off("AfterProgressState",ie),t.off("DismissPopups",me),ze([s,...a],fe=>{fe.element.dom.removeEventListener("focusin",He),fe.element.dom.removeEventListener("focusout",Te)}),x.unbind(),p.unbind(),b.unbind(),C.unbind(),k.unbind(),q.unbind()}),t.on("detach",()=>{ze([s,...a],rc),ze([s,...a],fe=>fe.destroy())})},gC=re,hC=gn,pC=ee([]);var rk=Object.freeze({__proto__:null,setup:gC,isDocked:hC,getBehaviours:pC});const bC=ee(Ue("toolbar-height-change")),wc={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},ak="tox-tinymce--toolbar-sticky-on",ik="tox-tinymce--toolbar-sticky-off",ck=(t,s)=>{const a=Nr(s),u=qi(s).dom.innerHeight,m=Br(a),f=ne.fromDom(t.elm),p=Qm(f),b=on(f),C=p.y,x=C+b,k=$c(s),A=on(s),R=k.top,L=R+A,z=Math.abs(R-m.top)<2,j=Math.abs(L-(m.top+u))<2;if(z&&C<L)aS(m.left,C-A,a);else if(j&&x>R){const V=C-u+b+A;aS(m.left,V,a)}},vC=(t,s)=>jn(po.getModes(t),s),yC=t=>{const s=c=>xo(c)+(parseInt(E(c,"margin-top"),10)||0)+(parseInt(E(c,"margin-bottom"),10)||0),a=t.element;sn(a).each(c=>{const u="padding-"+po.getModes(t)[0];if(po.isDocked(t)){const m=As(c);Rt(a,"width",m+"px"),Rt(c,u,s(a)+"px")}else Ie(a,"width"),Ie(c,u)})},GR=(t,s)=>{s?(fo(t,wc.fadeOutClass),Xm(t,[wc.transitionClass,wc.fadeInClass])):(fo(t,wc.fadeInClass),Xm(t,[wc.fadeOutClass,wc.transitionClass]))},qR=(t,s)=>{const a=ne.fromDom(t.getContainer());s?(Vo(a,ak),fo(a,ik)):(Vo(a,ik),fo(a,ak))},CC=(t,s)=>{const a=Nr(s);Ic(a).filter(c=>!Bn(s,c)).filter(c=>Bn(c,ne.fromDom(a.dom.body))||Hm(t,c)).each(()=>ss(s))},KR=(t,s)=>Sr(t).orThunk(()=>s().toOptional().bind(a=>Sr(a.element))),zZ=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(po.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(yC)}),t.on("SkinLoaded",()=>{a().each(c=>{po.isDocked(c)?po.reset(c):po.refresh(c)})}),t.on("FullscreenStateChanged",()=>{a().each(po.reset)})),t.on("AfterScrollIntoView",c=>{a().each(u=>{po.refresh(u);const m=u.element;oS(m)&&ck(c,m)})}),t.on("PostRender",()=>{qR(t,!1)})},UZ=t=>t().map(po.isDocked).getOr(!1),ZZ=()=>[xa.config({channels:{[bC()]:{onReceive:yC}}})],YR=(t,s)=>{const a=dn(),c=s.getSink,u=p=>{c().each(b=>p(b.element))},m=p=>{t.inline||yC(p),qR(t,po.isDocked(p)),p.getSystem().broadcastOn([pm()],{}),c().each(b=>b.getSystem().broadcastOn([pm()],{}))},f=t.inline?[]:ZZ();return[St.config({}),po.config({contextual:{lazyContext:p=>{const b=xo(p.element),C=t.inline?t.getContentAreaContainer():t.getContainer();return S.from(C).map(x=>{const k=mr(ne.fromDom(x));return Em(t,p.element).fold(()=>{const R=k.height-b,L=k.y+(vC(p,"top")?0:b);return as(k.x,L,k.width,R)},R=>{const L=zb(k,Gf(R)),z=vC(p,"top")?L.y:L.y+b;return as(L.x,z,L.width,L.height-b)})})},onShow:()=>{u(p=>GR(p,!0))},onShown:p=>{u(b=>wi(b,[wc.transitionClass,wc.fadeInClass])),a.get().each(b=>{CC(p.element,b),a.clear()})},onHide:p=>{KR(p.element,c).fold(a.clear,a.set),u(b=>GR(b,!1))},onHidden:()=>{u(p=>wi(p,[wc.transitionClass]))},...wc},lazyViewport:p=>Em(t,p.element).fold(()=>{const C=Pr(),x=Sm(t),k=C.y+(vC(p,"top")&&!oE(t)?x:0),A=C.height-(vC(p,"bottom")?x:0);return{bounds:as(C.x,k,C.width,A),optScrollEnv:S.none()}},C=>({bounds:Gf(C),optScrollEnv:S.some({currentScrollTop:C.element.dom.scrollTop,scrollElmTop:$c(C.element).top})})),modes:[s.header.getDockingMode()],onDocked:m,onUndocked:m}),...f]};var WZ=Object.freeze({__proto__:null,setup:zZ,isDocked:UZ,getBehaviours:YR});const XR=t=>{const s=t.editor,a=t.sticky?YR:pC;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Ae(a(s,t.sharedBackstage))}};var SC=Di({factory:(t,s)=>{const a=(u,m)=>{const f=ke(m,p=>{const b={type:"menubutton",text:p.text,fetch:x=>{x(p.getItems())},context:"any"},C=a6(b).mapError(x=>of(x)).getOrDie();return dp(C,"tox-mbtn",s.backstage,S.some("menuitem"))});Nt.set(u,f)},c={focus:nt.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:Ae([Nt.config({}),Dt("menubar-events",[ro(u=>{t.onSetup(u)}),ve(Kc(),(u,m)=>{qn(u.element,".tox-mbtn--active").each(f=>{lu(m.event.target,".tox-mbtn").each(p=>{Bn(f,p)||u.getSystem().getByDom(f).each(b=>{u.getSystem().getByDom(p).each(C=>{Mi.expand(C),Mi.close(b),St.focus(C)})})})})}),ve(em(),(u,m)=>{m.event.prevFocus.bind(f=>u.getSystem().getByDom(f).toOptional()).each(f=>{m.event.newFocus.bind(p=>u.getSystem().getByDom(p).toOptional()).each(p=>{Mi.isOpen(f)&&(Mi.expand(p),Mi.close(f))})})})]),nt.config({mode:"flow",selector:".tox-mbtn",onEscape:u=>(t.onEscape(u),S.some(!0))}),Yn.config({})]),apis:c,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[we("dom"),we("uid"),we("onEscape"),we("backstage"),oe("onSetup",re)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const JR="üíùGet all features",GZ="https://www.tiny.cloud/tinymce-upgrade-to-cloud/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",QR=t=>{const s=t.promotionLink?[{dom:{tag:"a",attributes:{href:GZ,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:JR}}]:[];return{uid:t.uid,dom:t.dom,components:s}},e8=t=>{const{sidebars:s}=t.ui.registry.getAll();ze(eo(s),a=>{const c=s[a],u=()=>Gr(S.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:c.icon,tooltip:c.tooltip,onAction:m=>{t.execCommand("ToggleSidebar",!1,a),m.setActive(u())},onSetup:m=>{m.setActive(u());const f=()=>m.setActive(u());return t.on("ToggleSidebar",f),()=>{t.off("ToggleSidebar",f)}},context:"any"})})},qZ=t=>({element:()=>t.element.dom}),hq=(t,s)=>{const a=ke(eo(s),c=>{const u=s[c],m=Qi(L6(u));return{name:c,getApi:qZ,onSetup:m.onSetup,onShow:m.onShow,onHide:m.onHide}});return ke(a,c=>{const u=Ve(re);return t.slot(c.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:tg.unnamedEvents([ul(c,u),yc(c,u),ve(nv(),(m,f)=>{const p=f.event;_t(a,C=>C.name===p.name).each(C=>{(p.visible?C.onShow:C.onHide)(C.getApi(m))})})])})})},KZ=t=>Vr.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:hq(s,t),slotBehaviours:tg.unnamedEvents([ro(a=>Vr.hideAllSlots(a))])})),YZ=(t,s,a)=>{an.getCurrent(t).each(u=>{Nt.set(u,[KZ(s)]);const m=a==null?void 0:a.toLowerCase();Tt(m)&&Yt(s,m)&&an.getCurrent(u).each(f=>{Vr.showSlot(f,m),oa.immediateGrow(u),Ie(u.element,"width"),xC(t.element,"region")})})},xC=(t,s)=>{Ot(t,"role",s)},XZ=(t,s)=>{an.getCurrent(t).each(c=>{an.getCurrent(c).each(m=>{oa.hasGrown(c)?Vr.isShowing(m,s)?(oa.shrink(c),xC(t.element,"presentation")):(Vr.hideAllSlots(m),Vr.showSlot(m,s),xC(t.element,"region")):(Vr.hideAllSlots(m),Vr.showSlot(m,s),oa.grow(c),xC(t.element,"region"))})})},JZ=t=>an.getCurrent(t).bind(a=>oa.isGrowing(a)||oa.hasGrown(a)?an.getCurrent(a).bind(m=>_t(Vr.getSlotNames(m),f=>Vr.isShowing(m,f))):S.none()),lk=Ue("FixSizeEvent"),uk=Ue("AutoSizeEvent"),QZ=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Ae([Yn.config({}),St.config({}),oa.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{an.getCurrent(s).each(Vr.hideAllSlots),rn(s,uk)},onGrown:s=>{rn(s,uk)},onStartGrow:s=>{mt(s,lk,{width:H(s.element,"width").getOr("")})},onStartShrink:s=>{mt(s,lk,{width:As(s.element)+"px"})}}),Nt.config({}),an.config({find:s=>{const a=Nt.contents(s);return Ps(a)}})])}],behaviours:Ae([Cc.childAt(0),Dt("sidebar-sliding-events",[ve(lk,(s,a)=>{Rt(s.element,"width",a.event.width)}),ve(uk,(s,a)=>{Ie(s.element,"width")})])])}),eW=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:ku('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),t8=t=>an.getCurrent(t).each(s=>ss(s.element,!0)),tW=(t,s)=>{const a="tabindex",c=`data-mce-${a}`;S.from(t.iframeElement).map(ne.fromDom).each(u=>{s?(Ts(u,a).each(m=>Ot(u,c,m)),Ot(u,a,-1)):(Ao(u,a),Ts(u,c).each(m=>{Ot(u,a,m),Ao(u,c)}))})},nW=(t,s,a,c)=>{const u=s.element;if(tW(t,a),a)tl.block(s,eW(c)),Ie(u,"display"),Ao(u,"aria-hidden"),t.hasFocus()&&t8(s);else{const m=an.getCurrent(s).exists(f=>au(f.element));tl.unblock(s),Rt(u,"display","none"),Ot(u,"aria-hidden","true"),m&&t.focus()}},oW=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Ae([Nt.config({}),tl.config({focus:!1}),an.config({find:s=>Ps(s.components())})]),components:[]}),n8=t=>t.type==="focusin",sW=t=>n8(t)?(t.composed?Ps(t.composedPath()):S.from(t.target)).map(ne.fromDom).filter(Oa).exists(a=>wr(a,"mce-pastebin")):!1,rW=(t,s,a)=>{const c=Ve(!1),u=dn(),m=p=>{c.get()&&!sW(p)&&(p.preventDefault(),t8(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",m),t.on("BeforeExecCommand",p=>{p.command.toLowerCase()==="mcefocus"&&p.value!==!0&&m(p)})});const f=p=>{p!==c.get()&&(c.set(p),nW(t,s(),p,a.providers),vz(t,p))};t.on("ProgressState",p=>{if(u.on(clearTimeout),Zr(p.time)){const b=sy.setEditorTimeout(t,()=>f(p.state),p.time);u.set(b)}else f(p.state),u.clear()})},o8=t=>{const s=t.label.isNone()?t.title.fold(()=>({}),a=>({attributes:{"aria-label":a}})):t.label.fold(()=>({}),a=>({attributes:{"aria-label":a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(t.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...t.label.map(a=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[lo(a)]})).toArray(),ny.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Ae([Yn.config({}),St.config({ignore:!0})])}},wC=t=>ny.sketch(o8(t)),s8=(t,s)=>{const a=ro(c=>{const u=ke(t.initGroups,wC);tr.setGroups(c,u)});return Ae([li.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),Xo(()=>t.providers.checkUiComponentContext("any")),nt.config({mode:s,onEscape:t.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),Dt("toolbar-events",[a])])},r8=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":o8({title:S.none(),label:S.none(),items:[]}),"overflow-button":W3({context:"any",name:"more",icon:S.some("more-drawer"),enabled:!0,tooltip:S.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:S.none(),borderless:!1},S.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:s8(t,s)}},aW=t=>{const s=r8(t),a=4,c=H4.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return H4.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const u=t.moreDrawerData.lazyHeader().element,m=Qm(u),f=Ga(u),p=Qm(f),b=Math.max(f.dom.scrollHeight,p.height);return as(m.x+a,p.y,m.width-a*2,b)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[c],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:u=>t.onToggled(u,!0),onClosed:u=>t.onToggled(u,!1)})},iW=t=>{const s=U4.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=U4.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),c=r8(t);return U4.sketch({...c,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:u=>{u.getSystem().broadcastOn([bC()],{type:"opened"}),t.onToggled(u,!0)},onClosed:u=>{u.getSystem().broadcastOn([bC()],{type:"closed"}),t.onToggled(u,!1)}})},EC=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return tr.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===fc.scrolling?["tox-toolbar--scrolling"]:[])},components:[tr.parts.groups({})],toolbarBehaviours:s8(t,s)})},dk=(t,s)=>{var a,c;const u=t.type==="togglebutton",m=t.icon.map(K=>Hl(K,s.icons)).map(Tn),p=K=>{const ie=fe=>{m.map(je=>je.getOpt(K).each(pt=>{Nt.set(pt,[Hl(fe,s.icons)])}))},me=fe=>{const je=K.element;fe?(Vo(je,"tox-button--enabled"),Ot(je,"aria-pressed",!0)):(fo(je,"tox-button--enabled"),Ao(je,"aria-pressed"))},He=()=>wr(K.element,"tox-button--enabled"),Te=()=>ss(K.element);if(u)return t.onAction({setIcon:ie,setActive:me,isActive:He,focus:Te});if(t.type==="button")return t.onAction({setIcon:ie})},b={...t,name:u?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:S.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},C=j3((c=t.buttonType)!==null&&c!==void 0?c:"secondary"),x=u?t.text.map(s.translate):S.some(s.translate(t.text)),k=x.map(lo),A=b.tooltip.or(x).map(K=>({"aria-label":s.translate(K)})).getOr({}),R=m.map(K=>K.asSpec()),L=ep([R,k]),z=t.icon.isSome()&&k.isSome(),j={tag:"button",classes:C.concat(...t.icon.isSome()&&!z?["tox-button--icon"]:[]).concat(...z?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:A},V=[],q=cC(b,S.some(p),V,j,L,t.tooltip,s);return er.sketch(q)},a8=(t,s)=>dk(t,s),cW=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:ke(t.buttons,a=>a8(a,s))}),kC=va().deviceType,i8=kC.isPhone(),c8=kC.isTablet(),lW=t=>{let s=!1;const a=ke(t.buttons,c=>c.type==="group"?(s=!0,cW(c,t.providers)):a8(c,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...i8||c8?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Ae([St.config({}),nt.config({mode:"flow",selector:"button, .tox-button",focusInside:tm.OnEnterOrSpaceMode})]),components:s?a:[uc.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),uc.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},uW=t=>({uid:t.uid,behaviours:Ae([St.config({}),Yn.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),dW=(t,s,a,c)=>{const u={getPane:m=>Zs.getPart(m,t,"pane"),getOnShow:m=>t.viewConfig.onShow,getOnHide:m=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ae([St.config({}),nt.config({mode:"cyclic",focusInside:tm.OnEnterOrSpaceMode})]),apis:u}};var gp=na({name:"silver.View",configFields:[we("viewConfig")],partFields:[bs({factory:{sketch:lW},schema:[we("buttons"),we("providers")],name:"header"}),bs({factory:{sketch:uW},schema:[],name:"pane"})],factory:dW,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const mW=(t,s,a)=>Vi(s,(c,u)=>{const m=Qi(GV(c));return t.slot(u,gp.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:m,components:[...m.buttons.length>0?[gp.parts.header({buttons:m.buttons,providers:a})]:[],gp.parts.pane({})]}))}),mk=(t,s)=>Vr.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:mW(a,t,s),slotBehaviours:tg.unnamedEvents([ro(c=>Vr.hideAllSlots(c))])})),l8=t=>_t(Vr.getSlotNames(t),s=>Vr.isShowing(t,s)),u8=t=>{const s=t.element;Rt(s,"display","none"),Ot(s,"aria-hidden","true")},fW=t=>{const s=t.element;Ie(s,"display"),Ao(s,"aria-hidden")},gW=t=>({getContainer:ee(t)}),TC=(t,s,a)=>{Vr.getSlot(t,s).each(c=>{gp.getPane(c).each(u=>{a(c)(gW(u.element.dom))})})},hW=(t,s)=>TC(t,s,gp.getOnShow),d8=(t,s)=>TC(t,s,gp.getOnHide);var _C=Di({factory:(t,s)=>{const m={setViews:(f,p)=>{Nt.set(f,[mk(p,s.backstage.shared.providers)])},whichView:f=>an.getCurrent(f).bind(l8),toggleView:(f,p,b,C)=>an.getCurrent(f).exists(x=>{const k=l8(x),A=k.exists(L=>C===L),R=Vr.getSlot(x,C).isSome();return R&&(Vr.hideAllSlots(x),A?(u8(f),p()):(b(),fW(f),Vr.showSlot(x,C),hW(x,C)),k.each(L=>d8(x,L))),R})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Ae([Nt.config({}),an.config({find:f=>{const p=Nt.contents(f);return Ps(p)}})]),apis:m}},name:"silver.ViewWrapper",configFields:[we("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,c,u)=>t.toggleView(s,a,c,u),whichView:(t,s)=>t.whichView(s)}});const pW=(t,s,a)=>{let c=!1;const u=f=>{Yu(f,".tox-statusbar").each(p=>{E(p,"display")==="none"&&ks(p,"aria-hidden")==="true"?(Ie(p,"display"),Ao(p,"aria-hidden")):(Rt(p,"display","none"),Ot(p,"aria-hidden","true"))})},m={getSocket:f=>Zs.getPart(f,t,"socket"),setSidebar:(f,p,b)=>{Zs.getPart(f,t,"sidebar").each(C=>YZ(C,p,b))},toggleSidebar:(f,p)=>{Zs.getPart(f,t,"sidebar").each(b=>XZ(b,p))},whichSidebar:f=>Zs.getPart(f,t,"sidebar").bind(JZ).getOrNull(),getHeader:f=>Zs.getPart(f,t,"header"),getToolbar:f=>Zs.getPart(f,t,"toolbar"),setToolbar:(f,p)=>{Zs.getPart(f,t,"toolbar").each(b=>{const C=ke(p,wC);b.getApis().setGroups(b,C)})},setToolbars:(f,p)=>{Zs.getPart(f,t,"multiple-toolbar").each(b=>{const C=ke(p,x=>ke(x,wC));R2.setItems(b,C)})},refreshToolbar:f=>{Zs.getPart(f,t,"toolbar").each(b=>b.getApis().refresh(b))},toggleToolbarDrawer:f=>{Zs.getPart(f,t,"toolbar").each(p=>{ql(p.getApis().toggle,b=>b(p))})},toggleToolbarDrawerWithoutFocusing:f=>{Zs.getPart(f,t,"toolbar").each(p=>{ql(p.getApis().toggleWithoutFocusing,b=>b(p))})},isToolbarDrawerToggled:f=>Zs.getPart(f,t,"toolbar").bind(p=>S.from(p.getApis().isOpen).map(b=>b(p))).getOr(!1),getThrobber:f=>Zs.getPart(f,t,"throbber"),focusToolbar:f=>{Zs.getPart(f,t,"toolbar").orThunk(()=>Zs.getPart(f,t,"multiple-toolbar")).each(b=>{nt.focusIn(b)})},setMenubar:(f,p)=>{Zs.getPart(f,t,"menubar").each(b=>{SC.setMenus(b,p)})},focusMenubar:f=>{Zs.getPart(f,t,"menubar").each(p=>{SC.focus(p)})},setViews:(f,p)=>{Zs.getPart(f,t,"viewWrapper").each(b=>{_C.setViews(b,p)})},toggleView:(f,p)=>Zs.getPart(f,t,"viewWrapper").exists(b=>_C.toggleView(b,()=>m.showMainView(f),()=>m.hideMainView(f),p)),whichView:f=>Zs.getPart(f,t,"viewWrapper").bind(_C.whichView).getOrNull(),hideMainView:f=>{c=m.isToolbarDrawerToggled(f),c&&m.toggleToolbarDrawer(f),Zs.getPart(f,t,"editorContainer").each(p=>{const b=p.element;u(b),Rt(b,"display","none"),Ot(b,"aria-hidden","true")})},showMainView:f=>{c&&m.toggleToolbarDrawer(f),Zs.getPart(f,t,"editorContainer").each(p=>{const b=p.element;u(b),Ie(b,"display"),Ao(b,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:m,behaviours:t.behaviours}},bW=Nl.optional({factory:SC,name:"menubar",schema:[we("backstage")]}),vW=t=>t.type===fc.sliding?iW:t.type===fc.floating?aW:EC,yW=Nl.optional({factory:{sketch:t=>R2.sketch({uid:t.uid,dom:t.dom,listBehaviours:Ae([nt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>EC({type:t.type,uid:Ue("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),S.some(!0))}),setupItem:(s,a,c,u)=>{tr.setGroups(a,c)},shell:!0})},name:"multiple-toolbar",schema:[we("dom"),we("onEscape")]}),f8=Nl.optional({factory:{sketch:t=>{const s=vW(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),S.some(!0)),onToggled:(c,u)=>t.onToolbarToggled(u),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[we("dom"),we("onEscape"),we("getSink")]}),CW=Nl.optional({factory:{sketch:XR},name:"header",schema:[we("dom")]}),SW=Nl.optional({factory:{sketch:QR},name:"promotion",schema:[we("dom"),we("promotionLink")]}),xW=Nl.optional({name:"socket",schema:[we("dom")]}),wW=Nl.optional({factory:{sketch:QZ},name:"sidebar",schema:[we("dom")]}),EW=Nl.optional({factory:{sketch:oW},name:"throbber",schema:[we("dom")]}),kW=Nl.optional({factory:_C,name:"viewWrapper",schema:[we("backstage")]}),TW=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),_W=Nl.optional({factory:{sketch:TW},name:"editorContainer",schema:[]});var Jn=na({name:"OuterContainer",factory:pW,configFields:[we("dom"),we("behaviours")],partFields:[CW,bW,f8,yW,xW,wW,SW,EW,kW,_W],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,c)=>{t.setSidebar(s,a,c)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const AW="file edit view insert format tools table help",fk={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},OW=(t,s,a)=>{const c=FD(a).split(/[ ,]/);return{text:t.title,getItems:()=>pe(t.items,u=>{const m=u.toLowerCase();return m.trim().length===0?[]:ms(c,f=>f===m)?[]:m==="separator"||m==="|"?[{type:"separator"}]:s.menuItems[m]?[s.menuItems[m]]:[]})}},gk=t=>t.split(" "),g8=(t,s)=>{const a={...fk,...s.menus},c=eo(s.menus).length>0,u=s.menubar===void 0||s.menubar===!0?gk(AW):gk(s.menubar===!1?"":s.menubar),m=Zn(u,p=>{const b=Yt(fk,p);return c?b||Ze(s.menus,p).exists(C=>Yt(C,"items")):b}),f=ke(m,p=>{const b=a[p];return OW({title:b.title,items:gk(b.items)},s,t)});return Zn(f,p=>{const b=C=>Tt(C)||C.type!=="separator";return p.getItems().length>0&&ms(p.getItems(),b)})},hg=t=>{const s=()=>{t._skinLoaded=!0,pz(t)};return()=>{t.initialized?s():t.on("init",s)}},h8=(t,s)=>()=>tN(t,{message:s}),DW=t=>{const s=X4(t);return s?S.from(s):S.none()},p8=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),AC=(t,s,a,c)=>(t.on("remove",()=>c.unloadRawCss(s)),c.loadRawCss(s,a)),MW=(t,s)=>"ui/"+t+"/"+s,b8=t=>S.from(tinymce.Resource.get(t)).filter(Tt),hk=(t,s,a="")=>{const c=DW(t).map(m=>MW(m,`${s}.css`)),u=c.bind(b8);return br(c,u,(m,f)=>({_kind:"load-raw",key:m,css:f})).getOrThunk(()=>{const m=t.editorManager.suffix;return{_kind:"load-stylesheet",url:a+`/${s}${m}.css`}})},NW=(t,s)=>{const a=t.ui.styleSheetLoader,c=hk(t,"skin",s);switch(c._kind){case"load-raw":const{key:u,css:m}=c;return AC(t,u,m,a),Promise.resolve();case"load-stylesheet":const{url:f}=c;return p8(t,f,a);default:return Promise.resolve()}},RW=(t,s)=>{if(tu(ne.fromDom(t.getElement()))){const c=f0.DOM.styleSheetLoader,u=hk(t,"skin.shadowdom",s);switch(u._kind){case"load-raw":const{key:m,css:f}=u;return AC(t,m,f,c),Promise.resolve();case"load-stylesheet":const{url:p}=u;return p8(t,p,c);default:return Promise.resolve()}}else return Promise.resolve()},BW=(t,s,a)=>{const u=hk(t,s?"content.inline":"content",a);switch(u._kind){case"load-raw":const{key:m,css:f}=u;return s?AC(t,m,f,t.ui.styleSheetLoader):t.on("PostRender",()=>{AC(t,m,f,t.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:p}=u;return a&&t.contentCSS.push(p),Promise.resolve();default:return Promise.resolve()}},PW=async(t,s)=>{const a=xm(s);if(await BW(s,t,a),!ly(s)&&Tt(a))return Promise.all([NW(s,a),RW(s,a)]).then()},v8=(t,s)=>PW(t,s).then(hg(s),h8(s,"Skin could not be loaded")),LW=hn(v8,!1),IW=hn(v8,!0),y8=t=>({isEnabled:()=>!st.isDisabled(t),setEnabled:s=>st.set(t,!s),setText:s=>mt(t,xc,{text:s}),setIcon:s=>mt(t,mg,{icon:s})}),FW=t=>({setActive:s=>{Ut.set(t,s)},isActive:()=>Ut.isOn(t),isEnabled:()=>!st.isDisabled(t),setEnabled:s=>st.set(t,!s),setText:s=>mt(t,xc,{text:s}),setIcon:s=>mt(t,mg,{icon:s})}),pk=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),bk=Ue("focus-button"),vk=(t,s,a,c,u,m,f)=>{const p=s.map(C=>Tn(tC(C,"tox-tbtn",u))),b=t.map(C=>Tn(Hl(C,u.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...pk(a,u),...uo(f)?{"data-mce-name":f}:{}}},components:ep([b.map(C=>C.asSpec()),p.map(C=>C.asSpec())]),eventOrder:{[Ja()]:["focusing","alloy.base.behaviour",Dm],[ec()]:[Dm,"toolbar-group-button-events"],[pu()]:[Dm,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:Ae([li.toolbarButton(()=>u.checkUiComponentContext(m).shouldDisable),Xo(()=>u.checkUiComponentContext(m)),Dt(Dm,[ro((C,x)=>I3(C)),ve(xc,(C,x)=>{p.bind(k=>k.getOpt(C)).each(k=>{Nt.set(k,[lo(u.translate(x.event.text))])})}),ve(mg,(C,x)=>{b.bind(k=>k.getOpt(C)).each(k=>{Nt.set(k,[Hl(x.event.icon,u.icons)])})}),ve(Ja(),(C,x)=>{x.event.prevent(),rn(C,bk)})])].concat(c.getOr([])))}},Y0=(t,s,a,c,u)=>{const m=s.shared,f=Ve(re),p={toolbarButtonBehaviours:[],getApi:y8,onSetup:t.onSetup},b=[Dt("toolbar-group-button-events",[ul(p,f),yc(p,f)]),...t.tooltip.map(C=>bo.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(C)}))).toArray()];return Au.sketch({lazySink:m.getSink,fetch:()=>Ro.nu(C=>{C(ke(a(t.items),wC))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:vk(t.icon,t.text,t.tooltip,S.some(b),m.providers,t.context,u),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:c}}}})},C8=(t,s,a,c)=>{var u;const m=Ve(re),f=vk(t.icon,t.text,t.tooltip,S.none(),a,t.context,c);return er.sketch({dom:f.dom,components:f.components,eventOrder:JN,buttonBehaviours:{...Ae([Dt("toolbar-button-events",[TU({onAction:t.onAction,getApi:s.getApi}),ul(s,m),yc(s,m)]),...t.tooltip.map(p=>bo.config(a.tooltips.getConfig({tooltipText:a.translate(p)+t.shortcut.map(b=>` (${QE(b)})`).getOr("")}))).toArray(),li.toolbarButton(()=>!t.enabled||a.checkUiComponentContext(t.context).shouldDisable),Xo(()=>a.checkUiComponentContext(t.context))].concat(s.toolbarButtonBehaviours)),[Dm]:(u=f.buttonBehaviours)===null||u===void 0?void 0:u[Dm]}})},$W=(t,s,a)=>X0(t,s,[],a),X0=(t,s,a,c)=>C8(t,{toolbarButtonBehaviours:a.length>0?[Dt("toolbarButtonWith",a)]:[],getApi:y8,onSetup:t.onSetup},s,c),HW=(t,s,a)=>S8(t,s,[],a),S8=(t,s,a,c)=>C8(t,{toolbarButtonBehaviours:[Nt.config({}),Ut.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[Dt("toolbarToggleButtonWith",a)]:[]),getApi:FW,onSetup:t.onSetup},s,c),VW=(t,s,a)=>c=>Ro.nu(u=>s.fetch(u)).map(u=>S.from(Ky(Nn(Wy(Ue("menu-value"),u,m=>{s.onItemAction(t(c),m)},s.columns,s.presets,bc.CLOSE_ON_EXECUTE,s.select.getOr(gn),a),{movement:I0(s.columns,s.presets),menuBehaviours:tg.unnamedEvents(s.columns!=="auto"?[]:[ro((m,f)=>{H6(m,4,vy(s.presets)).each(({numRows:p,numColumns:b})=>{nt.setGridSize(m,p,b)})})])})))),zW=(t,s,a)=>{const c=Ve(t.tooltip.getOr("")),u=p=>({isEnabled:()=>!st.isDisabled(p),setEnabled:b=>st.set(p,!b),setIconFill:(b,C)=>{qn(p.element,`svg path[class="${b}"], rect[class="${b}"]`).each(x=>{Ot(x,"fill",C)})},setActive:b=>{Ot(p.element,"aria-pressed",b),qn(p.element,"span").each(C=>{p.getSystem().getByDom(C).each(x=>Ut.set(x,b))})},isActive:()=>qn(p.element,"span").exists(b=>p.getSystem().getByDom(b).exists(Ut.isOn)),setText:b=>qn(p.element,"span").each(C=>p.getSystem().getByDom(C).each(x=>mt(x,xc,{text:b}))),setIcon:b=>qn(p.element,"span").each(C=>p.getSystem().getByDom(C).each(x=>mt(x,mg,{icon:b}))),setTooltip:b=>{const C=s.providers.translate(b);Ot(p.element,"aria-label",C),c.set(b)}}),m=Ve(re),f={getApi:u,onSetup:t.onSetup};return ey.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...pk(t.tooltip,s.providers),...uo(a)?{"data-mce-name":a}:{}}},onExecute:p=>{const b=u(p);b.isEnabled()&&t.onAction(b)},onItemExecute:(p,b,C)=>{},splitDropdownBehaviours:Ae([Dt("split-dropdown-events",[ro((p,b)=>I3(p)),ve(bk,St.focus),ul(f,m),yc(f,m)]),li.splitButton(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),Xo(()=>s.providers.checkUiComponentContext(t.context)),If.config({}),...t.tooltip.map(p=>bo.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(p),onShow:b=>{if(c.get()!==p){const C=s.providers.translate(c.get());bo.setComponents(b,s.providers.tooltips.getComponents({tooltipText:C}))}}})})).toArray()]),eventOrder:{[ec()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[pu()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:VW(u,t,s.providers),parts:{menu:Cy(!1,t.columns,t.presets)},components:[ey.parts.button(vk(t.icon,t.text,S.none(),S.some([Ut.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),li.toolbarButton(gn),Xo(ee({contextType:"any",shouldDisable:!1}))]),s.providers,t.context)),ey.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:hE("chevron-down",s.providers.icons)},buttonBehaviours:Ae([li.splitButton(gn),Xo(ee({contextType:"any",shouldDisable:!1}))])}),ey.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},UW=".tox-toolbar-slider__input,.tox-toolbar-textfield",x8=t=>{vo.getContent(t).each(s=>{qn(s.element,UW).fold(()=>nt.focusIn(s),ss)})},ZW=t=>Sr(t.element).each(s=>{Hc(s,'[tabindex="-1"]').each(a=>{ss(a)})}),w8=Ue("forward-slide"),OC=Ue("backward-slide"),yk=Ue("change-slide-event"),Ck="tox-pop--resizing",WW=t=>{const s=Ve([]);return{sketch:vo.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:c=>{s.set([]),vo.getContent(c).each(u=>{Ie(u.element,"visibility")}),fo(c.element,Ck),Ie(c.element,"width")},onHide:()=>{s.set([]),t.onHide()},inlineBehaviours:Ae([Dt("context-toolbar-events",[ch(Kg(),(c,u)=>{u.event.raw.propertyName==="width"&&(fo(c.element,Ck),Ie(c.element,"width"))}),ve(yk,(c,u)=>{const m=c.element;Ie(m,"width");const f=As(m),p=Sr(c.element).isSome();Ie(m,"left"),Ie(m,"right"),Ie(m,"max-width"),vo.setContent(c,u.event.contents),Vo(m,Ck);const b=As(m);Rt(m,"transition","none"),vo.reposition(c),Ie(m,"transition"),Rt(m,"width",f+"px"),u.event.focus.fold(()=>{p&&x8(c)},C=>{Ic(Fs(c.element)).fold(()=>ss(C),x=>{Bn(x,C)||ss(C)})}),setTimeout(()=>{Rt(c.element,"width",b+"px")},0)}),ve(w8,(c,u)=>{vo.getContent(c).each(m=>{s.set(s.get().concat([{bar:m,focus:Ic(Fs(c.element))}]))}),mt(c,yk,{contents:u.event.forwardContents,focus:S.none()})}),ve(OC,(c,u)=>{t.onBack(),fa(s.get()).each(m=>{s.set(s.get().slice(0,s.get().length-1)),mt(c,yk,{contents:Ai(m.bar),focus:m.focus})})})]),nt.config({mode:"special",onEscape:c=>fa(s.get()).fold(()=>t.onEscape(),u=>(rn(c,OC),S.some(!0)))})]),lazySink:()=>Ft.value(t.sink)}),inSubtoolbar:()=>s.get().length>0}},jW=(t,s)=>{const a=Qi(WE({type:"button",icon:"chevron-left",tooltip:"Back",onAction:re}));return X0(a,s.shared.providers,[ve(L3,c=>{rn(c,OC)})])},hp=(t,s,a)=>ja(a)?t.translate(s):t.translate([s,t.translate(a)]),GW=(t,s)=>{const a=(f,p,b,C)=>{const x=t.shared.providers.translate(f.title);if(f.type==="separator")return S.some({type:"separator",text:x});if(f.type==="submenu"){const k=pe(f.getStyleItems(),A=>c(A,p,C));return p===0&&k.length<=0?S.none():S.some({type:"nestedmenuitem",text:x,enabled:k.length>0,getSubmenuItems:()=>pe(f.getStyleItems(),A=>c(A,p,C))})}else return S.some({type:"togglemenuitem",text:x,icon:f.icon,active:f.isSelected(C),enabled:!b,onAction:s.onAction(f),...f.getStylePreview().fold(()=>({}),k=>({meta:{style:k}}))})},c=(f,p,b)=>{const C=f.type==="formatter"&&s.isInvalid(f);return p===0?C?[]:a(f,p,!1,b).toArray():a(f,p,C,b).toArray()},u=f=>{const p=s.getCurrentValue(),b=s.shouldHide?0:1;return pe(f,C=>c(C,b,p))};return{validateItems:u,getFetch:(f,p)=>(b,C)=>{const x=p(),k=u(x),A=fg(k,bc.CLOSE_ON_EXECUTE,f,{isHorizontalMenu:!1,search:S.none()});C(A)}}},pp=(t,s)=>{const a=s.dataset,c=a.type==="basic"?()=>ke(a.data,u=>J3(u,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:GW(t,s),getStyleItems:c}},J0=(t,s,a,c,u,m)=>{const{items:f,getStyleItems:p}=pp(s,a),b=Ve(a.tooltip),C=k=>({getComponent:ee(k),setTooltip:A=>{const R=s.shared.providers.translate(A);Ot(k.element,"aria-label",R),b.set(A)}}),x=k=>{const A=R=>k.setTooltip(hp(t,c(R.value),R.value));return t.on(u,A),L0(ag(t,"NodeChange",R=>{const L=R.getComponent();a.updateText(L),st.set(R.getComponent(),!t.selection.isEditable()||p().length===0)})(k),()=>t.off(u,A))};return $3({context:"mode:design",text:a.icon.isSome()?S.none():a.text,icon:a.icon,ariaLabel:S.some(a.tooltip),tooltip:S.none(),role:S.none(),fetch:f.getFetch(s,p),onSetup:x,getApi:C,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[bo.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:k=>{if(a.tooltip!==b.get()){const A=s.shared.providers.translate(b.get());bo.setComponents(k,s.shared.providers.tooltips.getComponents({tooltipText:A}))}}})})]},"tox-tbtn",s.shared,m)},DC=t=>ke(t,s=>{let a=s,c=s;const u=s.split("=");return u.length>1&&(a=u[0],c=u[1]),{title:a,format:c}}),qW=t=>({type:"basic",data:t});var bp;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(bp||(bp={}));const KW=(t,s)=>s===bp.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),Sk=(t,s,a)=>{const c=t.options.get(s);return{type:"basic",data:DC(KW(c,a))}},YW="Align",E8=ee("Alignment {0}"),xk="left",wk=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],k8=t=>{const s=()=>_t(wk,p=>t.formatter.match(p.format)),a=p=>()=>t.formatter.match(p),c=p=>S.none,u=p=>{const C=s().fold(ee(xk),x=>x.title.toLowerCase());mt(p,mg,{icon:`align-${C}`}),sN(t,{value:C})},m=qW(wk),f=p=>()=>_t(wk,b=>b.format===p.format).each(b=>t.execCommand(b.command));return{tooltip:hp(t,E8(),xk),text:S.none(),icon:S.some("align-left"),isSelectedFor:a,getCurrentValue:S.none,getPreviewFor:c,onAction:f,updateText:u,dataset:m,shouldHide:!1,isInvalid:p=>!t.formatter.canApply(p.format)}},XW=(t,s)=>J0(t,s,k8(t),E8,"AlignTextUpdate","align"),JW=(t,s)=>{const a=pp(s,k8(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(YW),onSetup:ra(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},T8=(t,s)=>{const a=s(),c=ke(a,u=>u.format);return S.from(t.formatter.closest(c)).bind(u=>_t(a,m=>m.format===u))},Ek="Blocks",kk=ee("Block {0}"),Tk="Paragraph",_8=t=>{const s=m=>()=>t.formatter.match(m),a=m=>()=>{const f=t.formatter.get(m);return f?S.some({tag:f.length>0&&(f[0].inline||f[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(m))}):S.none()},c=m=>{const p=T8(t,()=>u.data).fold(ee(Tk),b=>b.title);mt(m,xc,{text:p}),sa(t,{value:p})},u=Sk(t,"block_formats",bp.SemiColon);return{tooltip:hp(t,kk(),Tk),text:S.some(Tk),icon:S.none(),isSelectedFor:s,getCurrentValue:S.none,getPreviewFor:a,onAction:g3(t),updateText:c,dataset:u,shouldHide:!1,isInvalid:m=>!t.formatter.canApply(m.format)}},QW=(t,s)=>J0(t,s,_8(t),kk,"BlocksTextUpdate","blocks"),ej=(t,s)=>{const a=pp(s,_8(t));t.ui.registry.addNestedMenuItem("blocks",{text:Ek,onSetup:ra(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},tj="Fonts",A8=ee("Font {0}"),_k="System Font",nj=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],O8=t=>{const s=t.split(/\s*,\s*/);return ke(s,a=>a.replace(/^['"]+|['"]+$/g,""))},D8=(t,s)=>s.length>0&&hi(s,a=>t.indexOf(a.toLowerCase())>-1),oj=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=O8(t.toLowerCase());return D8(a,nj)||D8(a,s)}else return!1},M8=t=>{const s=()=>{const b=L=>L?O8(L)[0]:"",C=t.queryCommandValue("FontName"),x=p.data,k=C?C.toLowerCase():"",A=Y4(t);return{matchOpt:_t(x,L=>{const z=L.format;return z.toLowerCase()===k||b(z).toLowerCase()===b(k).toLowerCase()}).orThunk(()=>vr(oj(k,A),{title:_k,format:k})),font:C}},a=b=>C=>C.exists(x=>x.format===b),c=()=>{const{matchOpt:b}=s();return b},u=b=>()=>S.some({tag:"div",styles:b.indexOf("dings")===-1?{"font-family":b}:{}}),m=b=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,b.format)})},f=b=>{const{matchOpt:C,font:x}=s(),k=C.fold(ee(x),A=>A.title);mt(b,xc,{text:k}),rN(t,{value:k})},p=Sk(t,"font_family_formats",bp.SemiColon);return{tooltip:hp(t,A8(),_k),text:S.some(_k),icon:S.none(),isSelectedFor:a,getCurrentValue:c,getPreviewFor:u,onAction:m,updateText:f,dataset:p,shouldHide:!1,isInvalid:gn}},sj=(t,s)=>J0(t,s,M8(t),A8,"FontFamilyTextUpdate","fontfamily"),rj=(t,s)=>{const a=pp(s,M8(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(tj),onSetup:ra(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})};var Q0=tinymce.util.Tools.resolve("tinymce.util.VK");const aj=(t,s,a,c)=>{let u=S.none();const m=K=>K.map(ie=>We.getValue(ie)).getOr(""),f=ag(t,"NodeChange SwitchMode DisabledStateChange",K=>{const ie=K.getComponent();u=S.some(ie),a.updateInputValue(ie),st.set(ie,!t.selection.isEditable()||W4(t))}),p=K=>({getComponent:ee(K)}),b=Ve(re),C=Ue("custom-number-input-events"),x=(K,ie,me)=>{const He=m(u),Te=a.getNewValue(He,K),fe=He.length-`${Te}`.length,je=u.map(rt=>rt.element.dom.selectionStart-fe),pt=u.map(rt=>rt.element.dom.selectionEnd-fe);a.onAction(Te,me),u.each(rt=>{We.setValue(rt,Te),ie&&(je.each(Qt=>rt.element.dom.selectionStart=Qt),pt.each(Qt=>rt.element.dom.selectionEnd=Qt))})},k=(K,ie)=>x((me,He)=>me-He,K,ie),A=(K,ie)=>x((me,He)=>me+He,K,ie),R=K=>sn(K.element).fold(S.none,ie=>(ss(ie),S.some(!0))),L=K=>au(K.element)?(Zd(K.element).each(ie=>ss(ie)),S.some(!0)):S.none(),z=(K,ie,me,He)=>{const Te=Ve(re),fe=s.shared.providers.translate(me),je=Ue("altExecuting"),pt=ag(t,"NodeChange SwitchMode DisabledStateChange",Qt=>{st.set(Qt.getComponent(),!t.selection.isEditable()||W4(t))}),rt=Qt=>{st.isDisabled(Qt)||K(!0)};return er.sketch({dom:{tag:"button",attributes:{"aria-label":fe,"data-mce-name":ie},classes:He.concat(ie)},components:[eC(ie,s.shared.providers.icons)],buttonBehaviours:Ae([st.config({}),bo.config(s.shared.providers.tooltips.getConfig({tooltipText:fe})),Dt(je,[ul({onSetup:pt,getApi:p},Te),yc({getApi:p},Te),ve(Al(),(Qt,Et)=>{(Et.event.raw.keyCode===Q0.SPACEBAR||Et.event.raw.keyCode===Q0.ENTER)&&(st.isDisabled(Qt)||K(!1))}),ve(Qd(),rt),ve(_l(),rt)])]),eventOrder:{[Al()]:[je,"keying"],[Qd()]:[je,"alloy.base.behaviour"],[_l()]:[je,"alloy.base.behaviour"],[ec()]:["alloy.base.behaviour",je,"tooltipping"],[pu()]:[je,"tooltipping"]}})},j=Tn(z(K=>k(!1,K),"minus","Decrease font size",[])),V=Tn(z(K=>A(!1,K),"plus","Increase font size",[])),q=Tn({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[Ou.sketch({inputBehaviours:Ae([st.config({}),Dt(C,[ul({onSetup:f,getApi:p},b),yc({getApi:p},b)]),Dt("input-update-display-text",[ve(xc,(K,ie)=>{We.setValue(K,ie.event.text)}),ve(TT(),K=>{a.onAction(We.getValue(K))}),ve(rf(),K=>{a.onAction(We.getValue(K))})]),nt.config({mode:"special",onEnter:K=>(x($t,!0,!0),S.some(!0)),onEscape:R,onUp:K=>(A(!0,!1),S.some(!0)),onDown:K=>(k(!0,!1),S.some(!0)),onLeft:(K,ie)=>(ie.cut(),S.none()),onRight:(K,ie)=>(ie.cut(),S.none())})])})],behaviours:Ae([St.config({}),nt.config({mode:"special",onEnter:L,onSpace:L,onEscape:R}),Dt("input-wrapper-events",[ve(Kc(),K=>{ze([j,V],ie=>{const me=ne.fromDom(ie.get(K).element.dom);au(me)&&Yi(me)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...uo(c)?{"data-mce-name":c}:{}}},components:[j.asSpec(),q.asSpec(),V.asSpec()],behaviours:Ae([St.config({}),nt.config({mode:"flow",focusInside:tm.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:K=>au(K.element)?S.none():(ss(K.element),S.some(!0))})])}},ij="Font sizes",N8=ee("Font size {0}"),R8="12pt",cj={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},lj={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},uj=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},dj=(t,s)=>/[0-9.]+px$/.test(t)?uj(parseInt(t,10)*72/96,s||0)+"pt":Ze(lj,t).getOr(t),B8=t=>Ze(cj,t).getOr(""),Ak=t=>{const s=()=>{let b=S.none();const C=p.data,x=t.queryCommandValue("FontSize");if(x)for(let k=3;b.isNone()&&k>=0;k--){const A=dj(x,k),R=B8(A);b=_t(C,L=>L.format===x||L.format===A||L.format===R)}return{matchOpt:b,size:x}},a=b=>C=>C.exists(x=>x.format===b),c=()=>{const{matchOpt:b}=s();return b},u=ee(S.none),m=b=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,b.format)})},f=b=>{const{matchOpt:C,size:x}=s(),k=C.fold(ee(x),A=>A.title);mt(b,xc,{text:k}),oq(t,{value:k})},p=Sk(t,"font_size_formats",bp.Space);return{tooltip:hp(t,N8(),R8),text:S.some(R8),icon:S.none(),isSelectedFor:a,getPreviewFor:u,getCurrentValue:c,onAction:m,updateText:f,dataset:p,shouldHide:!1,isInvalid:gn}},mj=(t,s)=>J0(t,s,Ak(t),N8,"FontSizeTextUpdate","fontsize"),Ok=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},eb=16,Dk=t=>t>=0,MC=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:c=>mt(c,xc,{text:s()}),onAction:(c,u)=>t.execCommand("FontSize",!1,c,{skip_focus:!u}),getNewValue:(c,u)=>{$b(c,["unsupportedLength","empty"]);const m=s(),f=$b(c,["unsupportedLength","empty"]).or($b(m,["unsupportedLength","empty"])),p=f.map(A=>A.value).getOr(eb),b=zD(t),C=f.map(A=>A.unit).filter(A=>A!=="").getOr(b),x=u(p,Ok(C).step),k=`${Dk(x)?x:p}${C}`;return k!==m&&sq(t,{value:k}),k}}},pg=(t,s)=>aj(t,s,MC(t),"fontsizeinput"),NC=(t,s)=>{const a=pp(s,Ak(t));t.ui.registry.addNestedMenuItem("fontsize",{text:ij,onSetup:ra(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},fj="Formats",Mk=t=>ja(t)?"Formats":"Format {0}",Nk=(t,s)=>{const a="Formats",c=f=>()=>t.formatter.match(f),u=f=>()=>{const p=t.formatter.get(f);return p!==void 0?S.some({tag:p.length>0&&(p[0].inline||p[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(f))}):S.none()},m=f=>{const p=k=>lC(k)?pe(k.items,p):TR(k)?[{title:k.title,format:k.format}]:[],b=pe(MR(t),p),x=T8(t,ee(b)).fold(ee({title:a,tooltipLabel:""}),k=>({title:k.title,tooltipLabel:k.title}));mt(f,xc,{text:x.title}),oN(t,{value:x.tooltipLabel})};return{tooltip:hp(t,Mk(""),""),text:S.some(a),icon:S.none(),isSelectedFor:c,getCurrentValue:S.none,getPreviewFor:u,onAction:g3(t),updateText:m,shouldHide:LD(t),isInvalid:f=>!t.formatter.canApply(f.format),dataset:s}},P8=(t,s)=>{const a={type:"advanced",...s.styles};return J0(t,s,Nk(t,a),Mk,"StylesTextUpdate","styles")},gj=(t,s)=>{const a={type:"advanced",...s.styles},c=pp(s,Nk(t,a));t.ui.registry.addNestedMenuItem("styles",{text:fj,onSetup:ra(t,()=>c.getStyleItems().length>0),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},hj=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],tb=(t,s)=>(a,c,u,m)=>{const f=t(a).mapError(p=>of(p)).getOrDie();return s(f,c,u,m)},L8={button:tb(WE,(t,s,a,c)=>$W(t,s.shared.providers,c)),togglebutton:tb(C6,(t,s,a,c)=>HW(t,s.shared.providers,c)),menubutton:tb(a6,(t,s,a,c)=>dp(t,"tox-tbtn",s,S.none(),!1,c)),splitbutton:tb(UV,(t,s,a,c)=>zW(t,s.shared,c)),grouptoolbarbutton:tb(zV,(t,s,a,c)=>{const u=a.ui.registry.getAll().buttons,m=p=>BC(a,{buttons:u,toolbar:p,allowToolbarGroups:!1},s,S.none()),f={[kv]:s.shared.header.isPositionedAtTop()?dd.TopToBottom:dd.BottomToTop};switch(Fh(a)){case fc.floating:return Y0(t,s,m,f,c);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},I8=(t,s,a,c)=>Ze(L8,t.type).fold(()=>(console.error("skipping button defined by",t),S.none()),u=>S.some(u(t,s,a,c))),RC={styles:P8,fontsize:mj,fontsizeinput:pg,fontfamily:sj,blocks:QW,align:XW,navigateback:jW},pj=t=>{const s=ke(hj,a=>{const c=Zn(a.items,u=>Yt(t,u)||Yt(RC,u));return{name:a.name,items:c}});return Zn(s,a=>a.items.length>0)},bj=t=>{const s=t.split("|");return ke(s,a=>({items:a.trim().split(" ")}))},vj=t=>kt(t,s=>(Yt(s,"name")||Yt(s,"label"))&&Yt(s,"items")),yj=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?pj(a):Tt(s)?bj(s):vj(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},vp=(t,s,a,c,u,m)=>Ze(s,a.toLowerCase()).orThunk(()=>m.bind(f=>nn(f,p=>Ze(s,p+a.toLowerCase())))).fold(()=>Ze(RC,a.toLowerCase()).map(f=>f(t,u)),f=>f.type==="grouptoolbarbutton"&&!c?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),S.none()):I8(f,u,t,a.toLowerCase())),BC=(t,s,a,c)=>{const u=yj(s),m=ke(u,f=>{const p=pe(f.items,b=>b.trim().length===0?[]:vp(t,s.buttons,b,s.allowToolbarGroups,a,c).toArray());return{title:S.from(t.translate(f.name)),label:vr(f.label!==void 0,t.translate(f.label)),items:p}});return Zn(m,f=>f.items.length>0)},F8=(t,s,a,c)=>{const u=s.mainUi.outerContainer,m=a.toolbar,f=a.buttons;if(kt(m,Tt)){const p=m.map(b=>{const C={toolbar:b,buttons:f,allowToolbarGroups:a.allowToolbarGroups};return BC(t,C,c,S.none())});Jn.setToolbars(u,p)}else Jn.setToolbar(u,BC(t,a,c,S.none()))},$8=va(),Cj=$8.os.isiOS()&&$8.os.version.major<=12,H8=(t,s)=>{const{uiMotherships:a}=s,c=t.dom;let u=t.getWin();const m=t.getDoc().documentElement,f=Ve(Ho(u.innerWidth,u.innerHeight)),p=Ve(Ho(m.offsetWidth,m.offsetHeight)),b=()=>{const A=f.get();(A.left!==u.innerWidth||A.top!==u.innerHeight)&&(f.set(Ho(u.innerWidth,u.innerHeight)),P0(t))},C=()=>{const A=t.getDoc().documentElement,R=p.get();(R.left!==A.offsetWidth||R.top!==A.offsetHeight)&&(p.set(Ho(A.offsetWidth,A.offsetHeight)),P0(t))},x=A=>{bz(t,A)};c.bind(u,"resize",b),c.bind(u,"scroll",x);const k=Gm(ne.fromDom(t.getBody()),"load",C);t.on("hide",()=>{ze(a,A=>{Rt(A.element,"display","none")})}),t.on("show",()=>{ze(a,A=>{Ie(A.element,"display")})}),t.on("NodeChange",C),t.on("remove",()=>{k.unbind(),c.unbind(u,"resize",b),c.unbind(u,"scroll",x),u=null})},Sj=(t,s,a)=>{wm(t)&&ti(a.mainUi.mothership.element,a.popupUi.mothership),Ar(s,a.dialogUi.mothership)};var xj=Object.freeze({__proto__:null,render:(t,s,a,c,u)=>{const{mainUi:m,uiMotherships:f}=s,p=Ve(0),b=m.outerContainer;LW(t);const C=ne.fromDom(u.targetNode),x=Ku(Fs(C));ti(C,m.mothership),Sj(t,x,s),t.on("PostRender",()=>{Jn.setSidebar(b,a.sidebar,cy(t))}),t.on("SkinLoaded",()=>{F8(t,s,a,c),p.set(t.getWin().innerWidth),Jn.setMenubar(b,g8(t,a)),Jn.setViews(b,a.views),H8(t,s)});const k=Jn.getSocket(b).getOrDie("Could not find expected socket element");if(Cj){Si(k.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const z=ba(()=>{t.dispatch("ScrollContent")},20),j=Ys(k.element,"scroll",z.throttle);t.on("remove",j.unbind)}U6(t,s),t.addCommand("ToggleSidebar",(z,j)=>{Jn.toggleSidebar(b,j),Sz(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var z;return(z=Jn.whichSidebar(b))!==null&&z!==void 0?z:""}),t.addCommand("ToggleView",(z,j)=>{if(Jn.toggleView(b,j)){const V=b.element;m.mothership.broadcastOn([Tu()],{target:V}),ze(f,q=>{q.broadcastOn([Tu()],{target:V})}),$n(Jn.whichView(b))&&(t.focus(),t.nodeChanged(),Jn.refreshToolbar(b)),aN(t)}}),t.addQueryValueHandler("ToggleView",()=>{var z;return(z=Jn.whichView(b))!==null&&z!==void 0?z:""});const A=Fh(t),R=()=>{Jn.refreshToolbar(s.mainUi.outerContainer)};(A===fc.sliding||A===fc.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const z=t.getWin().innerWidth;z!==p.get()&&(R(),p.set(z))});const L={setEnabled:z=>{Qh(s,z?"setEnabled":"setDisabled")},isEnabled:()=>!st.isDisabled(b)};return{iframeContainer:k.element.dom,editorContainer:b.element.dom,api:L}}});const Rk=t=>/^[0-9\.]+(|px)$/i.test(""+t)?S.some(parseInt(""+t,10)):S.none(),nb=t=>Zr(t)?t+"px":t,PC=(t,s,a)=>{const c=s.filter(m=>t<m),u=a.filter(m=>t>m);return c.or(u).getOr(t)},V8=(t,s)=>{if(typeof s=="number")return S.from(s);const a=/^([0-9.]+)(pt|em|px)$/.exec(s.trim());if(a){const c=a[2],u=Number.parseFloat(a[1]);if(Number.isNaN(u)||u<0)return S.none();if(c==="em")return S.from(u*Number.parseFloat(window.getComputedStyle(t.dom).fontSize));if(c==="pt")return S.from(u*(72/96));if(c==="px")return S.from(u)}return S.none()},wj=t=>{const s=V8(ne.fromDom(t.targetElm),Ih(t)),a=ay(t),c=j4(t);return s.map(u=>PC(u,a,c))},Ej=t=>wj(t).getOr(Ih(t)),Bk=t=>{const s=Cm(t),a=ry(t),c=iy(t);return Rk(s).map(u=>PC(u,a,c))},kj=t=>Bk(t).getOr(Cm(t)),{ToolbarLocation:Nd,ToolbarMode:Pk}=nE,Tj=40,LC=(t,s,a,c,u)=>{const{mainUi:m,uiMotherships:f}=a,p=f0.DOM,b=zh(t),C=Uh(t),x=iy(t).or(Bk(t)),k=c.shared.header,A=k.isPositionedAtTop,R=150,L=Fh(t),z=L===Pk.sliding||L===Pk.floating,j=Ve(!1),V=()=>j.get()&&!t.removed,q=tt=>z?tt.fold(ee(0),xe=>xe.components().length>1?on(xe.components()[1].element):0):0,K=tt=>{switch(G4(t)){case Nd.auto:const xe=Jn.getToolbar(m.outerContainer),Be=q(xe),yt=on(tt.element)-Be,It=mr(s);if(It.y>yt)return"top";{const Bt=Ga(s),Un=Math.max(Bt.dom.scrollHeight,on(Bt));return It.bottom<Un-yt||Pr().bottom<It.bottom-yt?"bottom":"top"}case Nd.bottom:return"bottom";case Nd.top:default:return"top"}},ie=tt=>{u.on(xe=>{po.setModes(xe,[tt]),k.setDockingMode(tt);const Be=A()?dd.TopToBottom:dd.BottomToTop;Ot(xe.element,kv,Be)})},me=()=>{u.on(tt=>{const xe=x.getOrThunk(()=>Vb().width-Hp(s).left-10);Rt(tt.element,"max-width",xe+"px")})},He=(tt,xe)=>{u.on(Be=>{const yt=Jn.getToolbar(m.outerContainer),It=q(yt),dt=mr(s),Bt=Te(t,m.outerContainer.element),Un=()=>Bt.fold(()=>dt.x,Or=>{const Ii=mr(Or);return Bn(Or,Xr())?dt.x:dt.x-Ii.x}),Pn=()=>Bt.fold(()=>A()?Math.max(dt.y-on(Be.element)+It,0):dt.bottom,Or=>{var Ii;const Fi=mr(Or),gl=(Ii=Or.dom.scrollTop)!==null&&Ii!==void 0?Ii:0,Iu=Bn(Or,Xr())?Math.max(dt.y-on(Be.element)+It,0):dt.y-Fi.y+gl-on(Be.element)+It;return A()?Iu:dt.bottom}),Ha=Un(),Eo=vr(tt,Math.ceil(m.outerContainer.element.dom.getBoundingClientRect().width)).filter(Or=>Or>R).map(Or=>{const Ii=xe.getOr(Br()),Fi=window.innerWidth-(Ha-Ii.left),gl=Math.max(Math.min(Or,Fi),R);return Fi<Or&&Rt(m.outerContainer.element,"width",gl+"px"),{width:gl+"px"}}).getOr({width:"max-content"}),Li={position:"absolute",left:Math.round(Ha)+"px",top:Pn()+"px"};Si(m.outerContainer.element,{...Li,...Eo})})},Te=(tt,xe)=>wm(tt)?jg(xe):S.none(),fe=()=>{ze(f,tt=>{tt.broadcastOn([pm()],{})})},je=()=>!b&&($c(m.outerContainer.element).left+Hg(m.outerContainer.element)>=window.innerWidth-Tj||H(m.outerContainer.element,"width").isSome())?(Rt(m.outerContainer.element,"position","absolute"),Rt(m.outerContainer.element,"left","0px"),Ie(m.outerContainer.element,"width"),!0):!1,pt=tt=>{if(!V())return;b||me();const xe=Br(),Be=b?!1:je();if(z&&Jn.refreshToolbar(m.outerContainer),!b){const yt=Br(),It=vr(xe.left!==yt.left,xe);He(Be,It),It.each(dt=>{aS(dt.left,yt.top)})}C&&u.on(tt),fe()},rt=()=>b||!C||!V()?!1:u.get().exists(tt=>{const xe=k.getDockingMode(),Be=K(tt);return Be!==xe?(ie(Be),!0):!1});return{isVisible:V,isPositionedAtTop:A,show:()=>{j.set(!0),Rt(m.outerContainer.element,"display","flex"),p.addClass(t.getBody(),"mce-edit-focus"),ze(f,tt=>{Ie(tt.element,"display")}),rt(),wm(t)?pt(tt=>po.isDocked(tt)?po.reset(tt):po.refresh(tt)):pt(po.refresh)},hide:()=>{j.set(!1),Rt(m.outerContainer.element,"display","none"),p.removeClass(t.getBody(),"mce-edit-focus"),ze(f,tt=>{Rt(tt.element,"display","none")})},update:pt,updateMode:()=>{rt()&&pt(po.reset)},repositionPopups:fe}},bg=(t,s)=>{const a=mr(t);return{pos:s?a.y:a.bottom,bounds:a}},IC=(t,s,a,c)=>{const u=Ve(bg(s,a.isPositionedAtTop())),m=C=>{const{pos:x,bounds:k}=bg(s,a.isPositionedAtTop()),{pos:A,bounds:R}=u.get(),L=k.height!==R.height||k.width!==R.width;u.set({pos:x,bounds:k}),L&&P0(t,C),a.isVisible()&&(A!==x?a.update(po.reset):L&&(a.updateMode(),a.repositionPopups()))};c||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(po.reset)),t.on("NodeChange keydown",C=>{requestAnimationFrame(()=>m(C))});let f=0;const p=xl(()=>a.update(po.refresh),33);t.on("ScrollWindow",()=>{const C=Br().left;C!==f&&(f=C,p.throttle()),a.updateMode()}),wm(t)&&t.on("ElementScroll",C=>{a.update(po.refresh)});const b=Wa();b.set(Gm(ne.fromDom(t.getBody()),"load",C=>m(C.raw))),t.on("remove",()=>{b.clear()})};var FC=Object.freeze({__proto__:null,render:(t,s,a,c,u)=>{const{mainUi:m}=s,f=dn(),p=ne.fromDom(u.targetNode),b=LC(t,p,s,c,f),C=jf(t);IW(t);const x=()=>{if(f.isSet()){b.show();return}f.set(Jn.getHeader(m.outerContainer).getOrDie());const A=eE(t);wm(t)?(ti(p,m.mothership),ti(p,s.popupUi.mothership)):Ar(A,m.mothership),Ar(A,s.dialogUi.mothership);const R=()=>{F8(t,s,a,c),Jn.setMenubar(m.outerContainer,g8(t,a)),b.show(),IC(t,p,b,C),t.nodeChanged()};C?t.once("SkinLoaded",R):R()};t.on("show",x),t.on("hide",b.hide),C||(t.on("focus",x),t.on("blur",b.hide)),t.on("init",()=>{(t.hasFocus()||C)&&x()}),U6(t,s);const k={show:x,hide:b.hide,setEnabled:A=>{Qh(s,A?"setEnabled":"setDisabled")},isEnabled:()=>!st.isDisabled(m.outerContainer)};return{editorContainer:m.outerContainer.element.dom,api:k}}});const Fa=()=>{const t=dn(),s=dn(),a=dn();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const m=t.get().map(p=>p.mothership),f=s.get().map(p=>p.mothership);return m.fold(()=>f.toArray(),p=>f.fold(()=>[p],b=>Bn(p.element,b.element)?[p]:[p,b]))},lazyGetInOuterOrDie:(m,f)=>()=>a.get().bind(p=>f(p.outerContainer)).getOrDie(`Could not find ${m} element in OuterContainer`)}},$C="contexttoolbar-show",Lk="contexttoolbar-hide",vg=(t,s,a)=>({setInputEnabled:c=>{!c&&a&&ss(a),st.set(t,!c)},isInputEnabled:()=>!st.isDisabled(t),hide:()=>{rn(t,tv())},back:()=>{rn(t,OC)},getValue:()=>s.get().getOrThunk(()=>We.getValue(t)),setValue:c=>{t.getSystem().isConnected()?We.setValue(t,c):s.set(c)}}),z8=(t,s,a)=>ve(L3,(c,u)=>{const m=t.get(c),f=vg(m,a,c.element);s.onAction(f,u.event.buttonApi)}),Aj=(t,s,a,c)=>{const{primary:u,...m}=s.original,f=Qi(WE({...m,type:"button",onAction:re}));return X0(f,a,[z8(t,s,c)])},Mm=(t,s,a,c)=>{const{primary:u,...m}=s.original,f=Qi(C6({...m,type:"togglebutton",onAction:re}));return S8(f,a,[z8(t,s,c)])},bq=t=>t.type==="contextformtogglebutton",Oj=(t,s,a,c)=>bq(s)?Mm(t,s,a,c):Aj(t,s,a,c),Ik=(t,s,a,c)=>{const u=ke(s,p=>Tn(Oj(t,p,a,c)));return{asSpecs:()=>ke(u,p=>p.asSpec()),findPrimary:p=>nn(s,(b,C)=>b.primary?S.from(u[C]).bind(x=>x.getOpt(p)).filter(Oe(st.isDisabled)):S.none())}},yp=(t,s,a,c)=>{const{width:u,height:m}=t.initValue();let f=up;const p=Ue("ratio-event"),b=Te=>vg(Te,c),C=Te=>Pa(Te,{tag:"span",classes:["tox-icon","tox-lock-icon__"+Te]},s.icons),x=()=>!1,k=t.label.getOr("Constrain proportions"),A=s.translate(k),R=zt.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-lock-context-form-size-input","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":A,"data-mce-name":k}},components:[C("lock"),C("unlock")],buttonBehaviours:Ae([st.config({disabled:x}),Yn.config({}),bo.config(s.tooltips.getConfig({tooltipText:A}))])}),L=Te=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:Te}),z=Te=>Hc(Te.element,"div.tox-focusable-wrapper").fold(S.none,je=>(ss(je),S.some(!0))),j=Te=>Jt.parts.field({factory:Ou,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:Te?u:m,inputBehaviours:Ae([st.config({disabled:x}),Yn.config({}),Dt("size-input-toolbar-events",[ve(Lr(),(fe,je)=>{mt(fe,p,{isField1:Te})})]),nt.config({mode:"special",onEnter:a,onEscape:z})]),selectOnFocus:!1}),V=Te=>({dom:{tag:"label",classes:["tox-label"]},components:[lo(s.translate(Te))]}),q=Te=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[Te],behaviours:Ae([Yn.config({}),St.config({}),nt.config({mode:"special",onEnter:fe=>qn(fe.element,"input").fold(S.none,pt=>(ss(pt),S.some(!0)))})])}),K=q(zt.parts.field1(L([Jt.parts.label(V("Width:")),j(!0)]))),ie=q(zt.parts.field2(L([Jt.parts.label(V("Height:")),j(!1)]))),me=Ve(re),He=[ul({onBeforeSetup:Te=>qn(Te.element,"input").each(ss),onSetup:t.onSetup,getApi:b},me),Ry({getApi:b},me,c)];return zt.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[K,L([R]),ie],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(Te,fe,je)=>{oC(We.getValue(Te)).each(pt=>{f(pt).each(rt=>{We.setValue(fe,aR(rt))})})},onInput:Te=>rn(Te,PN),coupledFieldBehaviours:Ae([St.config({}),nt.config({mode:"flow",focusInside:tm.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),st.config({disabled:x,onDisabled:Te=>{zt.getField1(Te).bind(Jt.getField).each(st.disable),zt.getField2(Te).bind(Jt.getField).each(st.disable),zt.getLock(Te).each(st.disable)},onEnabled:Te=>{zt.getField1(Te).bind(Jt.getField).each(st.enable),zt.getField2(Te).bind(Jt.getField).each(st.enable),zt.getLock(Te).each(st.enable)}}),Xo(()=>s.checkUiComponentContext("mode:design")),Dt("size-input-toolbar-events2",[ve(p,(Te,fe)=>{const je=fe.event.isField1,pt=je?zt.getField1(Te):zt.getField2(Te),rt=je?zt.getField2(Te):zt.getField1(Te),Qt=pt.map(We.getValue).getOr(""),Et=rt.map(We.getValue).getOr("");f=iR(Qt,Et)}),ve(PN,Te=>t.onInput(b(Te))),...He])])})},ob=(t,s,a)=>Jt.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...t.toArray(),s],fieldBehaviours:Ae([st.config({disabled:()=>a.checkUiComponentContext("mode:design").shouldDisable,onDisabled:c=>{ZW(c),Jt.getField(c).each(st.disable)},onEnabled:c=>{Jt.getField(c).each(st.enable)}})])}),U8=(t,s,a,c)=>{const u=Ve(re),m=b=>vg(b,c),f=t.label.map(b=>Jt.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[lo(s.translate(b))]})),p=Jt.parts.field({factory:Ou,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(t.min()),max:String(t.max())},data:t.initValue().toString(),fromInputValue:b=>Sl(b).getOr(t.min()),toInputValue:b=>String(b),inputBehaviours:Ae([st.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),Xo(()=>s.checkUiComponentContext("mode:design")),nt.config({mode:"special",onEnter:a,onLeft:(b,C)=>(C.cut(),S.none()),onRight:(b,C)=>(C.cut(),S.none())}),Dt("slider-events",[ul({onSetup:t.onSetup,getApi:m,onBeforeSetup:nt.focusIn},u),Ry({getApi:m},u,c),ve(td(),b=>{t.onInput(m(b))})])])});return ob(f,p,s)},Dj=(t,s,a,c)=>{const u=Ve(re),m=x=>vg(x,c),f=t.label.map(x=>Jt.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[lo(s.translate(x))]})),b={...t.placeholder.map(x=>({placeholder:s.translate(x)})).getOr({})},C=Jt.parts.field({factory:Ou,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:b,data:t.initValue(),selectOnFocus:!0,inputBehaviours:Ae([st.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),Xo(()=>s.checkUiComponentContext("mode:design")),nt.config({mode:"special",onEnter:a,onLeft:(x,k)=>(k.cut(),S.none()),onRight:(x,k)=>(k.cut(),S.none())}),Dt("input-events",[ul({onSetup:t.onSetup,getApi:x=>Hc(x.element,".tox-toolbar").bind(A=>qn(A,"button:enabled")).fold(()=>vg(x,c),A=>vg(x,c,A)),onBeforeSetup:nt.focusIn},u),Ry({getApi:m},u,c),ve(td(),x=>{t.onInput(m(x))})])])});return ob(f,C,s)},Fk=(t,s,a)=>{const c=dn(),m=Tn(t(a,C=>p.findPrimary(C).orThunk(()=>b.findPrimary(C)).map(x=>(pf(x),!0)),c)),f=gi(s.commands,C=>C.align==="start"),p=Ik(m,f.pass,a,c),b=Ik(m,f.fail,a,c);return Zn([{title:S.none(),label:S.none(),items:p.asSpecs()},{title:S.none(),label:S.none(),items:[m.asSpec()]},{title:S.none(),label:S.none(),items:b.asSpecs()}],C=>C.items.length>0)},Z8=(t,s)=>{switch(t.type){case"contextform":return Fk(hn(Dj,t),t,s);case"contextsliderform":return Fk(hn(U8,t),t,s);case"contextsizeinputform":return Fk(hn(yp,t),t,s)}},Cp={renderContextForm:(t,s,a)=>EC({type:t,uid:Ue("context-toolbar"),initGroups:Z8(s,a),onEscape:S.none,cyclicKeying:!0,providers:a}),buildInitGroups:Z8},Mj=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,Nj=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=ya(ne.fromDom(t.startContainer),t.startOffset).element;return(Gu(a)?qr(a):S.some(a)).filter(Oa).map(u=>u.dom.getBoundingClientRect()).getOr(s)}else return s},$k=t=>{const s=t.selection.getRng(),a=Nj(s);if(t.inline){const c=Br();return as(c.left+a.left,c.top+a.top,a.width,a.height)}else{const c=Qm(ne.fromDom(t.getBody()));return as(c.x+a.left,c.y+a.top,a.width,a.height)}},yq=(t,s)=>s.filter(a=>Ko(a)&&xb(a)).map(Qm).getOrThunk(()=>$k(t)),Rj=(t,s,a)=>{const c=Math.max(t.x+a,s.x),u=Math.min(t.right-a,s.right);return{x:c,width:u-c}},Bj=(t,s,a,c,u,m)=>{const f=ne.fromDom(t.getContainer()),p=qn(f,".tox-editor-header").getOr(f),b=mr(p),C=b.y>=s.bottom,x=c&&!C;if(t.inline&&x)return{y:Math.max(b.bottom+m,a.y),bottom:a.bottom};if(t.inline&&!x)return{y:a.y,bottom:Math.min(b.y-m,a.bottom)};const k=u==="line"?mr(f):s;return x?{y:Math.max(b.bottom+m,a.y),bottom:Math.min(k.bottom-m,a.bottom)}:{y:Math.max(k.y+m,a.y),bottom:Math.min(b.y-m,a.bottom)}},Sp=(t,s,a,c=0)=>{const u=Vb(window),m=mr(ne.fromDom(t.getContentAreaContainer())),f=il(t)||v0(t)||Vh(t),{x:p,width:b}=Rj(m,u,c);if(t.inline&&!f)return as(p,u.y,b,u.height);{const C=s.header.isPositionedAtTop(),{y:x,bottom:k}=Bj(t,m,u,C,a,c);return as(p,x,b,k-x)}},HC=12,W8={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},Hk={maxHeightFunction:hf(),maxWidthFunction:Ev()},Pj=(t,s)=>{const a=t.selection.getRng(),c=ya(ne.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Bn(c.element,s)},Cq=(t,s,a)=>{const c=H(t,"position");Rt(t,"position",s);const u=a(t);return c.each(m=>Rt(t,"position",m)),u},e=t=>t==="node",n=(t,s,a,c,u)=>{const m=$k(t),f=c.lastElement().exists(p=>Bn(a,p));if(Pj(t,a))return f?KT:nc;if(f)return Cq(s,c.getMode(),()=>Mj(m,mr(s),-20)&&!c.isReposition()?wP:KT);{const p=c.getMode()==="fixed"?u.y+Br().top:u.y,b=on(s)+HC;return p+b<=m.y?nc:m1}},o=(t,s,a,c)=>{const u=b=>(C,x,k,A,R)=>{const L=n(t,A,b,a,R),z={...C,y:R.y,height:R.height};return{...L(z,x,k,A,R),alwaysFit:!0}},m=b=>e(c)?[u(b)]:[];return s?{onLtr:b=>[us,Yo,ls,fr,zs,Ds].concat(m(b)),onRtl:b=>[us,ls,Yo,zs,fr,Ds].concat(m(b))}:{onLtr:b=>[Ds,us,fr,Yo,zs,ls].concat(m(b)),onRtl:b=>[Ds,us,zs,ls,fr,Yo].concat(m(b))}},r=(t,s,a,c)=>s==="line"?{bubble:Fr(HC,0,W8),layouts:{onLtr:()=>[bv],onRtl:()=>[c1]},overrides:Hk}:{bubble:Fr(0,HC,W8,1/HC),layouts:o(t,a,c,s),overrides:Hk},i=(t,s)=>{const a=Zn(s,m=>m.predicate(t.dom)),{pass:c,fail:u}=gi(a,m=>m.type==="contexttoolbar");return{contextToolbars:c,contextForms:u}},l=t=>{if(t.length<=1)return t;{const s=m=>ms(t,f=>f.position===m),a=m=>Zn(t,f=>f.position===m),c=s("selection"),u=s("node");if(c||u)if(u&&c){const m=a("node"),f=ke(a("selection"),p=>({...p,position:"node"}));return m.concat(f)}else return a(c?"selection":"node");else return a("line")}},d=t=>{if(t.length<=1)return t;{const s=c=>_t(t,u=>u.position===c);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(c=>c.position).fold(()=>[],c=>Zn(t,u=>u.position===c))}},g=(t,s,a)=>{const c=i(t,s);if(c.contextForms.length>0)return S.some({elem:t,toolbars:[c.contextForms[0]]});{const u=i(t,a);if(u.contextForms.length>0)return S.some({elem:t,toolbars:[u.contextForms[0]]});if(c.contextToolbars.length>0||u.contextToolbars.length>0){const m=l(c.contextToolbars.concat(u.contextToolbars));return S.some({elem:t,toolbars:m})}else return S.none()}},h=(t,s,a)=>t(s)?S.none():sT(s,c=>{if(Oa(c)){const{contextToolbars:u,contextForms:m}=i(c,a.inNodeScope),f=m.length>0?m:d(u);return f.length>0?S.some({elem:c,toolbars:f}):S.none()}else return S.none()},t),y=(t,s)=>{const a=ne.fromDom(s.getBody()),c=f=>Bn(f,a),u=f=>!c(f)&&!Hm(a,f),m=ne.fromDom(s.selection.getNode());return u(m)?S.none():g(m,t.inNodeScope,t.inEditorScope).orThunk(()=>h(c,m,t))},w=(t,s)=>{const a={},c=[],u=[],m={},f={},p=(x,k)=>{const A=Qi(k6(k));a[x]=A,A.launch.map(R=>{m["form:"+x]={...k.launch,type:R.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(A)}}}),A.scope==="editor"?u.push(A):c.push(A),f[x]=A},b=(x,k)=>{DV(k).each(A=>{A.launch.isSome()&&(m["toolbar:"+x]={...k.launch,type:"button",onAction:()=>{s(A)}}),k.scope==="editor"?u.push(A):c.push(A),f[x]=A})},C=eo(t);return ze(C,x=>{const k=t[x];k.type==="contextform"||k.type==="contextsliderform"||k.type==="contextsizeinputform"?p(x,k):k.type==="contexttoolbar"&&b(x,k)}),{forms:a,inNodeScope:c,inEditorScope:u,lookupTable:f,formNavigators:m}},T="tox-pop--transition",_=t=>t===Q0.ENTER||t===Q0.SPACEBAR,N=(t,s,a,c)=>{const u=c.backstage,m=u.shared,f=va().deviceType.isTouch,p=dn(),b=dn(),C=dn(),x=WW({sink:a,onEscape:()=>(t.focus(),iN(t),S.some(!0)),onHide:()=>{iN(t)},onBack:()=>{xz(t)}}),k=$r(x.sketch),A=()=>{const Et=C.get().getOr("node"),Lt=e(Et)?1:0;return Sp(t,m,Et,Lt)},R=()=>!t.removed&&!(f()&&u.isContextMenuOpen()),L=Et=>Gr(br(Et,p.get(),Bn),!0),z=()=>{if(R()){const Et=A(),Lt=Gr(C.get(),"node")?yq(t,p.get()):$k(t);return Et.height<=0||!Mj(Lt,Et,.01)}else return!0},j=()=>{p.clear(),b.clear(),C.clear(),vo.hide(k)},V=()=>{if(vo.isOpen(k)){const Et=k.element;Ie(Et,"display"),z()?Rt(Et,"display","none"):(b.set(0),vo.reposition(k))}},q=Et=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Et],behaviours:Ae([nt.config({mode:"acyclic"}),Dt("pop-dialog-wrap-events",[ro(Lt=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>nt.focusIn(Lt))}),Dl(Lt=>{t.shortcuts.remove("ctrl+F9")})])])}),K=Et=>{const Lt=Te([Et]);mt(k,w8,{forwardContents:q(Lt)})},ie=lr(()=>w(s,K)),me=(Et,Lt)=>BC(t,{buttons:Et,toolbar:Lt.items,allowToolbarGroups:!1},c.backstage,S.some(["form:","toolbar:"])),He=(Et,Lt)=>Cp.buildInitGroups(Et,Lt),Te=Et=>{const{buttons:Lt}=t.ui.registry.getAll(),tt=ie(),xe={...Lt,...tt.formNavigators},Be=Fh(t)===fc.scrolling?fc.scrolling:fc.default,yt=At(ke(Et,It=>It.type==="contexttoolbar"?me(xe,OV(It)):He(It,m.providers)));return EC({type:Be,uid:Ue("context-toolbar"),initGroups:yt,onEscape:S.none,cyclicKeying:!0,providers:m.providers})},fe=(Et,Lt)=>{const tt=Et==="node"?m.anchors.node(Lt):m.anchors.cursor(),xe=r(t,Et,f(),{lastElement:p.get,isReposition:()=>Gr(b.get(),0),getMode:()=>Hr.getMode(a)});return Nn(tt,xe)},je=(Et,Lt)=>{if(Qt.cancel(),!R())return;const tt=Te(Et),xe=Et[0].position,Be=fe(xe,Lt);C.set(xe),b.set(1);const yt=k.element;Ie(yt,"display"),L(Lt)||(fo(yt,T),Hr.reset(a,k)),vo.showWithinBounds(k,q(tt),{anchor:Be,transition:{classes:[T],mode:"placement"}},()=>S.some(A())),Lt.fold(p.clear,p.set),z()&&Rt(yt,"display","none")},pt=()=>{Rt(k.element,"transition","none"),V(),Ie(k.element,"transition")};let rt=!1;const Qt=xl(()=>{if(!(!t.hasFocus()||t.removed||rt))if(wr(k.element,T))Qt.throttle();else{const Et=ie();y(Et,t).fold(j,Lt=>{je(Lt.toolbars,S.some(Lt.elem))})}},17);t.on("init",()=>{t.on("remove",j),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",V),t.on("click focus SetContent",Qt.throttle),t.on("keyup",Et=>{(!_(Et.keyCode)||!x.inSubtoolbar())&&Qt.throttle()}),t.on(Lk,j),t.on($C,Et=>{const Lt=ie();Ze(Lt.lookupTable,Et.toolbarKey).each(tt=>{je([tt],vr(Et.target!==t,Et.target)),x8(k)})}),t.on("focusout",Et=>{sy.setEditorTimeout(t,()=>{Sr(a.element).isNone()&&Sr(k.element).isNone()&&!t.hasFocus()&&j()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&j()}),t.on("DisabledStateChange",Et=>{Et.state&&j()}),t.on("ExecCommand",({command:Et})=>{Et.toLowerCase()==="toggleview"&&j()}),t.on("AfterProgressState",Et=>{Et.state?j():t.hasFocus()&&Qt.throttle()}),t.on("dragstart",()=>{rt=!0}),t.on("dragend drop",()=>{rt=!1}),t.on("NodeChange",Et=>{x.inSubtoolbar()?pt():Sr(k.element).fold(Qt.throttle,re)})})},P=t=>{ze([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Ia(t,a.cmd),onSetup:sp(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:ra(t),onAction:Ia(t,"JustifyNone")})},B=(t,s)=>{const a=()=>{const c=s.getOptions(t),u=s.getCurrent(t).map(s.hash),m=dn();return ke(c,f=>({type:"togglemenuitem",text:s.display(f),onSetup:p=>{const b=x=>{x&&(m.on(k=>k.setActive(!1)),m.set(p)),p.setActive(x)};b(Gr(u,s.hash(f)));const C=s.watcher(t,f,b);return()=>{m.clear(),C()}},onAction:()=>s.setCurrent(t,f)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:c=>c(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},F=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:XD,hash:s=>PB(s,["fixed","relative","empty"]).getOr(s),display:$t,watcher:(s,a,c)=>s.formatter.formatChanged("lineheight",c,!1,{value:a}).unbind,getCurrent:s=>S.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:ra(t),onMenuSetup:ra(t)}),W=t=>S.from(ID(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:ee(a),hash:c=>ar(c.customCode)?c.code:`${c.code}/${c.customCode}`,display:c=>c.title,watcher:(c,u,m)=>{var f;return c.formatter.formatChanged("lang",m,!1,{value:u.code,customValue:(f=u.customCode)!==null&&f!==void 0?f:null}).unbind},getCurrent:c=>{const u=ne.fromDom(c.selection.getNode());return Zp(u,m=>S.some(m).filter(Oa).bind(f=>Ts(f,"lang").map(b=>{const C=Ts(f,"data-mce-lang").getOrUndefined();return{code:b,customCode:C,title:""}})))},setCurrent:(c,u)=>c.execCommand("Lang",!1,u),onToolbarSetup:c=>{const u=Wa();return c.setActive(t.formatter.match("lang",{},void 0,!0)),u.set(t.formatter.formatChanged("lang",c.setActive,!0)),L0(u.clear,ra(t)(c))},onMenuSetup:ra(t)})),Q=t=>{B(t,F(t)),W(t).each(s=>B(t,s))},te=(t,s)=>{JW(t,s),rj(t,s),gj(t,s),ej(t,s),NC(t,s)},ae=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",s=>t.mode.get()===s),t.ui.registry.addContext("any",ct),t.ui.registry.addContext("formatting",s=>t.formatter.canApply(s)),t.ui.registry.addContext("insert",s=>t.schema.isValidChild(t.selection.getNode().tagName,s))},Se=t=>ag(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),De=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:Se(t),onAction:Ia(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:ra(t),onAction:Ia(t,"indent")})},Ke=t=>{De(t)},ge=(t,s)=>a=>{a.setActive(s.get());const c=u=>{s.set(u.state),a.setActive(u.state)};return t.on("PastePlainTextToggle",c),L0(()=>t.off("PastePlainTextToggle",c),ra(t)(a))},le=t=>{const s=Ve(qD(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:ge(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:ge(t,s)})},Ee=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},Ge=t=>{dl.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:sp(t,s.name),onAction:Ee(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,c=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:sp(t,a),onAction:Ee(t,a),shortcut:c})}},lt=t=>{dl.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Ia(t,s.action),shortcut:s.shortcut,context:s.context})}),dl.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:ra(t),onAction:Ia(t,s.action)})})},Gt=t=>{dl.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Ia(t,s.action),onSetup:sp(t,s.name)})})},Kt=t=>{Ge(t),lt(t),Gt(t)},_n=t=>{dl.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Ia(t,s.action),context:s.context})}),dl.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:ra(t),onAction:Ia(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:ra(t),onAction:Ee(t,"code")})},In=t=>{Kt(t),_n(t)},Oo=(t,s)=>ag(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),Bs=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:Oo(t,"hasUndo"),onAction:Ia(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:Oo(t,"hasRedo"),onAction:Ia(t,"redo")})},js=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:Oo(t,"hasUndo"),onAction:Ia(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:Oo(t,"hasRedo"),onAction:Ia(t,"redo"),shortcut:"Meta+Y"})},$e=t=>{Bs(t),js(t)},it=t=>ag(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),xn=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:it(t),onAction:Ia(t,"mceToggleVisualAid"),context:"any"})},An=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Ia(t,"mceToggleVisualAid"),context:"any"})},ye=t=>{An(t),xn(t)},Me=(t,s)=>{P(t),In(t),te(t,s),$e(t),Mz(t),ye(t),Ke(t),Q(t),le(t),ae(t)},at=t=>Tt(t)?t.split(/[ ,]/):t,qt=t=>s=>s.options.get(t),tn=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:Tt(a)||kt(a,Tt)?{value:at(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},Dn=qt("contextmenu_never_use_native"),Ec=qt("contextmenu_avoid_overlap"),Bu=t=>aa(t).length===0,aa=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:Zn(a,c=>Yt(s,c))},$a=(t,s)=>({type:"makeshift",x:t,y:s}),Pi=(t,s,a)=>$a(t.x+s,t.y+a),zr=t=>t.type==="longpress"||t.type.indexOf("touch")===0,Ta=t=>{if(zr(t)){const s=t.touches[0];return $a(s.pageX,s.pageY)}else return $a(t.pageX,t.pageY)},kc=t=>{if(zr(t)){const s=t.touches[0];return $a(s.clientX,s.clientY)}else return $a(t.clientX,t.clientY)},Nm=(t,s)=>{const a=f0.DOM.getPos(t);return Pi(s,a.x,a.y)},ft=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?Ta(s):Nm(t.getContentAreaContainer(),kc(s)):mn(t),mn=t=>({type:"selection",root:ne.fromDom(t.selection.getNode())}),Zo=t=>({type:"node",node:S.some(ne.fromDom(t.selection.getNode())),root:ne.fromDom(t.getBody())}),vs=(t,s,a)=>{switch(a){case"node":return Zo(t);case"point":return ft(t,s);case"selection":return mn(t)}},Gs=(t,s,a,c,u,m)=>{const f=a(),p=vs(t,s,m);fg(f,bc.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:S.none()}).map(b=>{s.preventDefault(),vo.showMenuAt(u,{anchor:p},{menu:{markers:_d("normal")},data:b})})},ys={onLtr:()=>[us,Yo,ls,fr,zs,Ds,nc,m1,d1,Sv,ah,u1],onRtl:()=>[us,ls,Yo,zs,fr,Ds,nc,m1,ah,u1,d1,Sv]},Do=12,Mo={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},_a=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const c=s.touches[0],u=a.getRng();return iT(t.getWin(),Wp.domRange(u)).exists(f=>f.left<=c.clientX&&f.right>=c.clientX&&f.top<=c.clientY&&f.bottom>=c.clientY)}},ml=t=>{const s=t.selection.getRng(),a=()=>{sy.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),m()};t.once("touchend",a);const c=f=>{f.preventDefault(),f.stopImmediatePropagation()};t.on("mousedown",c,!0);const u=()=>m();t.once("longpresscancel",u);const m=()=>{t.off("touchend",a),t.off("longpresscancel",u),t.off("mousedown",c)}},Pu=(t,s,a)=>{const c=vs(t,s,a);return{bubble:Fr(0,a==="point"?Do:0,Mo),layouts:ys,overrides:{maxWidthFunction:Ev(),maxHeightFunction:hf()},...c}},Vl=(t,s,a,c,u,m,f)=>{const p=Pu(t,s,m);fg(a,bc.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!0,search:S.none()}).map(b=>{s.preventDefault();const C=f?Ca.HighlightMenuAndItem:Ca.HighlightNone;vo.showMenuWithinBounds(u,{anchor:p},{menu:{markers:_d("normal"),highlightOnOpen:C},data:b,type:"horizontal"},()=>S.some(Sp(t,c.shared,m==="node"?"node":"selection"))),t.dispatch(Lk)})},xp=(t,s,a,c,u,m)=>{const f=va(),p=f.os.isiOS(),b=f.os.isMacOS(),C=f.os.isAndroid(),x=f.deviceType.isTouch(),k=()=>!(C||p||b&&x),A=()=>{const R=a();Vl(t,s,R,c,u,m,k())};if((b||p)&&m!=="node"){const R=()=>{ml(t),A()};_a(t,s)?R():(t.once("selectionchange",R),t.once("touchend",()=>t.off("selectionchange",R)))}else A()},yg=t=>Tt(t)?t==="|":t.type==="separator",Rd={type:"separator"},Tc=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(Tt(t))return t;switch(t.type){case"separator":return Rd;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const c=t.getSubmenuItems();return Tt(c)?c:ke(c,Tc)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Pt(a.onAction)}}},Bd=(t,s)=>{if(s.length===0)return t;const c=fa(t).filter(u=>!yg(u)).fold(()=>[],u=>[Rd]);return t.concat(c).concat(s).concat([Rd])},sb=(t,s,a)=>{const c=Qo(s,(u,m)=>Ze(t,m.toLowerCase()).map(f=>{const p=f.update(a);if(Tt(p)&&vi(Mc(p)))return Bd(u,p.split(" "));if(X(p)&&p.length>0){const b=ke(p,Tc);return Bd(u,b)}else return u}).getOrThunk(()=>u.concat([m])),[]);return c.length>0&&yg(c[c.length-1])&&c.pop(),c},wp=(t,s)=>s.ctrlKey&&!Dn(t),j8=t=>t.type==="longpress"||Yt(t,"touches"),Ep=(t,s)=>!j8(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),kp=(t,s)=>Ep(t,s)?t.selection.getStart(!0):s.target,G8=(t,s)=>{const a=Ec(t),c=Ep(t,s)?"selection":"point";if(vi(a)){const u=kp(t,s);return Up(ne.fromDom(u),a)?"node":c}else return c},Tp=(t,s,a)=>{const u=va().deviceType.isTouch,m=$r(vo.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Ae([Dt("dismissContextMenu",[ve(nd(),(b,C)=>{bn.close(b),t.focus()})])])})),f=()=>vo.hide(m),p=b=>{if(Dn(t)&&b.preventDefault(),wp(t,b)||Bu(t))return;const C=G8(t,b),x=()=>{const A=kp(t,b),R=t.ui.registry.getAll(),L=aa(t);return sb(R.contextMenus,L,A)};(u()?xp:Gs)(t,b,x,a,m,C)};t.on("init",()=>{const b="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(u()?"":" ResizeWindow");t.on(b,f),t.on("longpress contextmenu",p)})},Lu=40,Cg=Lu/2,se=(t,s,a,c,u,m)=>t.fold(()=>Of.snap({sensor:Oi(a-Cg,c-Cg),range:Ho(u,m),output:Oi(S.some(a),S.some(c)),extra:{td:s}}),f=>{const p=a-Cg,b=c-Cg,C=Lu,x=Lu,k=f.element.dom.getBoundingClientRect();return Of.snap({sensor:Oi(p,b),range:Ho(C,x),output:Oi(S.some(a-k.width/2),S.some(c-k.height/2)),extra:{td:s}})}),ce=(t,s,a)=>{const c=(u,m)=>u.exists(f=>Bn(f,m));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(u,m)=>{const f=m.td;c(s.get(),f)||(s.set(f),a(f))},mustSnap:!0}},Fe=t=>Tn(er.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Ae([Of.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),If.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),Ne=(t,s)=>{const a=Ve([]),c=Ve([]),u=Ve(!1),m=dn(),f=dn(),p=Te=>{const fe=Qm(Te);return se(R.getOpt(s),Te,fe.x,fe.y,fe.width,fe.height)},b=()=>ke(a.get(),Te=>p(Te)),C=Te=>{const fe=Qm(Te);return se(L.getOpt(s),Te,fe.right,fe.bottom,fe.width,fe.height)},x=()=>ke(c.get(),Te=>C(Te)),k=ce(b,m,Te=>{f.get().each(fe=>{t.dispatch("TableSelectorChange",{start:Te,finish:fe})})}),A=ce(x,f,Te=>{m.get().each(fe=>{t.dispatch("TableSelectorChange",{start:fe,finish:Te})})}),R=Fe(k),L=Fe(A),z=$r(R.asSpec()),j=$r(L.asSpec()),V=(Te,fe,je,pt)=>{const rt=fe.dom.getBoundingClientRect();Ie(Te.element,"display");const Qt=qi(ne.fromDom(t.getBody())).dom.innerHeight,Et=je(rt),Lt=pt(rt,Qt);(Et||Lt)&&Rt(Te.element,"display","none")},q=(Te,fe,je,pt)=>{const rt=je(fe);Of.snapTo(Te,rt),V(Te,fe,Lt=>Lt[pt]<0,(Lt,tt)=>Lt[pt]>tt)},K=Te=>q(z,Te,p,"top"),ie=()=>m.get().each(K),me=Te=>q(j,Te,C,"bottom"),He=()=>f.get().each(me);if(va().deviceType.isTouch()){const Te=fe=>ke(fe,ne.fromDom);t.on("TableSelectionChange",fe=>{u.get()||(el(s,z),el(s,j),u.set(!0));const je=ne.fromDom(fe.start),pt=ne.fromDom(fe.finish);m.set(je),f.set(pt),S.from(fe.otherCells).each(rt=>{a.set(Te(rt.upOrLeftCells)),c.set(Te(rt.downOrRightCells)),K(je),me(pt)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{ie(),He()}),t.on("TableSelectionClear",()=>{u.get()&&(Ms(z),Ms(j),u.set(!1)),m.clear(),f.clear()})}};var Ct=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const vn=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",Wo=(t,s,a)=>{var c;const u=(c=s.delimiter)!==null&&c!==void 0?c:"‚Ä∫",m=(C,x,k)=>er.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":k}},components:[lo(C)],action:A=>{t.focus(),t.selection.select(x),t.nodeChanged()},buttonBehaviours:Ae([bo.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",x.nodeName.toLowerCase()]),onShow:(A,R)=>{uu(A.element,R.element)},onHide:A=>{$B(A.element)}})}),li.button(a.isDisabled),Xo(()=>a.checkUiComponentContext("any"))])}),f=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[lo(` ${u} `)]}),p=C=>Qo(C,(x,k,A)=>{const R=m(k.name,k.element,A);return A===0?x.concat([R]):x.concat([f(),R])},[]),b=C=>{const x=[];let k=C.length;for(;k-- >0;){const A=C[k];if(A.nodeType===1&&!vn(A)){const R=yz(t,A);if(R.isDefaultPrevented()||x.push({name:R.name,element:A}),R.isPropagationStopped())break}}return x};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Ae([nt.config({mode:"flow",selector:"div[role=button]"}),st.config({disabled:a.isDisabled}),Xo(()=>a.checkUiComponentContext("any")),Yn.config({}),Nt.config({}),Dt("elementPathEvents",[ro((C,x)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>nt.focusIn(C)),t.on("NodeChange",k=>{const A=b(k.parents),R=A.length>0?p(A):[];Nt.set(C,R)})})])]),components:[]}};var Ur;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(Ur||(Ur={}));const fl=(t,s,a,c,u)=>{const m={height:PC(c+s.top,ay(t),j4(t))};return a===Ur.Both&&(m.width=PC(u+s.left,ry(t),iy(t))),m},_p=(t,s,a)=>{const c=ne.fromDom(t.getContainer()),u=fl(t,s,a,on(c),As(c));jo(u,(m,f)=>{Zr(m)&&Rt(c,f,nb(m))}),Il(t)},q8=t=>{const s=b0(t);return s===!1?Ur.None:s==="both"?Ur.Both:Ur.Vertical},rb=(t,s,a,c)=>{const m=Ho(a*20,c*20);return _p(t,m,s),S.some(!0)},Vk=(t,s)=>{const a=q8(t);if(a===Ur.None)return S.none();const c=a===Ur.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.",u=a===Ur.Both?"tox-statusbar__resize-cursor-both":"tox-statusbar__resize-cursor-default";return S.some(Pa("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle",u],attributes:{"aria-label":s.translate(c),"data-mce-name":"resize-handle"},behaviours:[Of.config({mode:"mouse",repositionTarget:!1,onDrag:(m,f,p)=>_p(t,p,a),blockerClass:"tox-blocker"}),nt.config({mode:"special",onLeft:()=>rb(t,a,-1,0),onRight:()=>rb(t,a,1,0),onUp:()=>rb(t,a,0,-1),onDown:()=>rb(t,a,0,1)}),Yn.config({}),St.config({}),bo.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},K8=(t,s)=>{const a=(c,u,m)=>Nt.set(c,[lo(s.translate(["{0} "+m,u[m]]))]);return er.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Ae([li.button(s.isDisabled),Xo(()=>s.checkUiComponentContext("any")),Yn.config({}),Nt.config({}),We.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Dt("wordcount-events",[md(c=>{const u=We.getValue(c),m=u.mode==="words"?"characters":"words";We.setValue(c,{mode:m,count:u.count}),a(c,u.count,m)}),ro(c=>{t.on("wordCountUpdate",u=>{const{mode:m}=We.getValue(c);We.setValue(c,{mode:m,count:u.wordCount}),a(c,u.wordCount,m)})})])]),eventOrder:{[_i()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},Pd=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",Ct.trim()])},behaviours:Ae([St.config({})])}]}),c=()=>{const p=QE("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[lo(pc.translate(["Press {0} for help",p]))]}},u=()=>{const p=[];return t.hasPlugin("wordcount")&&p.push(K8(t,s)),K4(t)&&p.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:p}},m=()=>{const p=[],b=YD(t),C=GD(t),x=K4(t)||t.hasPlugin("wordcount"),k=()=>{const A="tox-statusbar__text-container--flex-start",R="tox-statusbar__text-container--flex-end",L="tox-statusbar__text-container--space-around";if(b){const z="tox-statusbar__text-container-3-cols";return!x&&!C?[z,L]:x&&!C?[z,R]:[z,A]}return[x&&!C?R:A]};return C&&p.push(Wo(t,{},s)),b&&p.push(c()),x&&p.push(u()),p.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...k()]},components:p}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const p=m(),b=Vk(t,s);return p.concat(b.toArray())})()}},zk=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),Y8=(t,s)=>{const a=t.inline,c=a?FC:xj,u=Uh(t)?WZ:rk,m=Fa(),f=dn(),p=dn(),b=dn(),A=va().deviceType.isTouch()?["tox-platform-touch"]:[],R=Q4(t),L=Fh(t),z=Tn({dom:{tag:"div",classes:["tox-anchorbar"]}}),j=Tn({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),V=()=>m.mainUi.get().map(dt=>dt.outerContainer).bind(Jn.getHeader),q=()=>Ft.fromOption(m.dialogUi.get().map(dt=>dt.sink),"UI has not been rendered"),K=()=>Ft.fromOption(m.popupUi.get().map(dt=>dt.sink),"(popup) UI has not been rendered"),ie=m.lazyGetInOuterOrDie("anchor bar",z.getOpt),me=m.lazyGetInOuterOrDie("bottom anchor bar",j.getOpt),He=m.lazyGetInOuterOrDie("toolbar",Jn.getToolbar),Te=m.lazyGetInOuterOrDie("throbber",Jn.getThrobber),fe=VZ({popup:K,dialog:q},t,ie,me),je=()=>{const dt={attributes:{[kv]:R?dd.BottomToTop:dd.TopToBottom}},Bt=Jn.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:fe.popup,onEscape:()=>{t.focus()}}),Un=Jn.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:fe.popup.shared.getSink,providers:fe.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Iu=>{Cz(t,Iu)},type:L,lazyToolbar:He,lazyHeader:()=>V().getOrDie("Could not find header element"),...dt}),Pn=Jn.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:fe.popup.shared.providers,onEscape:()=>{t.focus()},type:L}),Ha=Vh(t),Eo=v0(t),Li=il(t),Or=KD(t),Ii=pt(Or),Fi=Ha||Eo||Li,gl=()=>Ha?[Pn]:Eo?[Un]:[],ib=[Ii,Bt];return Jn.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Fi?[]:["tox-editor-header--empty"]),...dt},components:At([Li?ib:[],gl(),zh(t)?[]:[z.asSpec()]]),sticky:Uh(t),editor:t,sharedBackstage:fe.popup.shared})},pt=dt=>Jn.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]},promotionLink:dt}),rt=()=>{const dt=Jn.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Bt=Jn.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[dt,Bt]}},Qt=()=>{const dt=eE(t),Bt=Bn(Xr(),dt)&&E(dt,"display")==="grid",Un={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(A),attributes:{...pc.isRtl()?{dir:"rtl"}:{}}},behaviours:Ae([Hr.config({useFixed:()=>u.isDocked(V)})])},Pn={dom:{styles:{width:document.body.clientWidth+"px"}},events:ho([ve(Ol(),Li=>{Rt(Li.element,"width",document.body.clientWidth+"px")})])},Ha=$r(Nn(Un,Bt?Pn:{})),Eo=M2(Ha);return p.set(Eo),{sink:Ha,mothership:Eo}},Et=()=>{const dt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(A),attributes:{...pc.isRtl()?{dir:"rtl"}:{}}},behaviours:Ae([Hr.config({useFixed:()=>u.isDocked(V),getBounds:()=>s.getPopupSinkBounds()})])},Bt=$r(dt),Un=M2(Bt);return b.set(Un),{sink:Bt,mothership:Un}},Lt=()=>{const dt=je(),Bt=rt(),Un=Jn.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:fe.popup}),Pn=Jn.parts.viewWrapper({backstage:fe.popup}),Ha=jD(t)&&!a?S.some(Pd(t,fe.popup.shared.providers)):S.none(),Eo=At([R?[]:[dt],a?[]:[Bt],R?[dt]:[]]),Li=Jn.parts.editorContainer({components:At([Eo,a?[]:[j.asSpec()]])}),Or=tE(t),Ii={role:"application",...pc.isRtl()?{dir:"rtl"}:{},...Or?{"aria-hidden":"true"}:{}},Fi=$r(Jn.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(R?["tox-tinymce--toolbar-bottom"]:[]).concat(A),styles:{visibility:"hidden",...Or?{opacity:"0",border:"0"}:{}},attributes:Ii},components:[Li,...a?[]:[Pn,...Ha.toArray()],Un],behaviours:Ae([Xo(()=>fe.popup.shared.providers.checkUiComponentContext("any")),st.config({disableClass:"tox-tinymce--disabled"}),nt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),gl=M2(Fi);return f.set(gl),{mothership:gl,outerContainer:Fi}},tt=dt=>{const Bt=nb(Ej(t)),Un=nb(kj(t));return t.inline||(_e("div","width",Un)&&Rt(dt.element,"width",Un),_e("div","height",Bt)?Rt(dt.element,"height",Bt):Rt(dt.element,"height","400px")),Bt},xe=dt=>{t.addShortcut("alt+F9","focus menubar",()=>{Jn.focusMenubar(dt)}),t.addShortcut("alt+F10","focus toolbar",()=>{Jn.focusToolbar(dt)}),t.addCommand("ToggleToolbarDrawer",(Bt,Un)=>{Un!=null&&Un.skipFocus?Jn.toggleToolbarDrawerWithoutFocusing(dt):Jn.toggleToolbarDrawer(dt)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Jn.isToolbarDrawerToggled(dt))},Be=dt=>{const{mainUi:Bt,popupUi:Un,uiMotherships:Pn}=dt;Gn($D(t),(Sg,Wk)=>{t.ui.registry.addGroupToolbarButton(Wk,Sg)});const{buttons:Ha,menuItems:Eo,contextToolbars:Li,sidebars:Or,views:Ii}=t.ui.registry.getAll(),Fi=J4(t),gl={menuItems:Eo,menus:QD(t),menubar:VD(t),toolbar:Fi.getOrThunk(()=>h0(t)),allowToolbarGroups:L===fc.floating,buttons:Ha,sidebar:Or,views:Ii};xe(Bt.outerContainer),fp(t,Bt.mothership,Pn),u.setup(t,fe.popup.shared,V),Me(t,fe.popup),Tp(t,fe.popup.shared.getSink,fe.popup),e8(t),rW(t,Te,fe.popup.shared),N(t,Li,Un.sink,{backstage:fe.popup}),Ne(t,Un.sink);const ib=t.getElement(),Iu=tt(Bt.outerContainer),Zk={targetNode:ib,height:Iu};return c.render(t,dt,gl,fe.popup,Zk)},yt=dt=>(b.set(dt.mothership),dt),It=()=>{const dt=Lt(),Bt=Qt(),Un=wm(t)?Et():yt(Bt);m.dialogUi.set(Bt),m.popupUi.set(Un),m.mainUi.set(dt);const Pn={popupUi:Un,dialogUi:Bt,mainUi:dt,uiMotherships:m.getUiMotherships()};return Be(Pn)};return{popups:{backstage:fe.popup,getMothership:()=>zk("popups",b)},dialogs:{backstage:fe.dialog,getMothership:()=>zk("dialogs",p)},renderUI:It}},Uk=t=>{const s=[],a={};return jo(t,(c,u)=>{c.fold(()=>{s.push(u)},m=>{a[u]=m})}),s.length>0?Ft.error(s):Ft.value(a)},X8=(t,s,a,c)=>{const u=Tn(Vf.sketch(m=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:ke(t.items,f=>wR(m,f,s,a,c))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[u.asSpec()]}],behaviours:Ae([nt.config({mode:"acyclic",useTabstopAt:Oe(W0)}),Cc.memento(u),aU(u,{postprocess:m=>Uk(m).fold(f=>(console.error(f),{}),$t)}),Dt("dialog-body-panel",[ve(Lr(),(m,f)=>{m.getSystem().broadcastOn([j0],{newFocus:S.some(f.event.target)})})])])}},Lj=(t,s,a)=>ke(t,(c,u)=>{Nt.set(a,t[u].view());const m=s.dom.getBoundingClientRect();return Nt.set(a,[]),m.height}),cn=t=>Ps(Wl(t,(s,a)=>s>a?-1:s<a?1:0)),ue=(t,s,a)=>{const c=Ga(t).dom,u=Hc(t,".tox-dialog-wrap").getOr(t),m=E(u,"position")==="fixed";let f;m?f=Math.max(c.clientHeight,window.innerHeight):f=Math.max(c.offsetHeight,c.scrollHeight);const p=on(s),C=s.dom.offsetLeft>=a.dom.offsetLeft+As(a)?Math.max(on(a),p):p,x=parseInt(E(t,"margin-top"),10)||0,k=parseInt(E(t,"margin-bottom"),10)||0,R=on(t)+x+k-C;return f-R},ut=(t,s)=>{Ps(t).each(a=>vm.showTab(s,a.value))},Zt=(t,s)=>{Rt(t,"height",s+"px"),Rt(t,"flex-basis",s+"px")},ts=(t,s,a)=>{Hc(t,'[role="dialog"]').each(c=>{qn(c,'[role="tablist"]').each(u=>{a.get().map(m=>(Rt(s,"height","0"),Rt(s,"flex-basis","0"),Math.min(m,ue(c,s,u)))).each(m=>{Zt(s,m)})})})},ia=t=>qn(t,'[role="tabpanel"]'),ca=t=>{const s=dn();return{extraEvents:[ro(u=>{const m=u.element;ia(m).each(f=>{Rt(f,"visibility","hidden"),u.getSystem().getByDom(f).toOptional().each(p=>{const b=Lj(t,f,p);cn(b).fold(s.clear,s.set)}),ts(m,f,s),Ie(f,"visibility"),ut(t,u),requestAnimationFrame(()=>{ts(m,f,s)})})}),ve(Ol(),u=>{const m=u.element;ia(m).each(f=>{ts(m,f,s)})}),ve(Yy,(u,m)=>{const f=u.element;ia(f).each(p=>{const b=Ic(Fs(p));Rt(p,"visibility","hidden");const C=H(p,"height").map(A=>parseInt(A,10));Ie(p,"height"),Ie(p,"flex-basis");const x=p.dom.getBoundingClientRect().height;C.forall(A=>x>A)?(s.set(x),ts(f,p,s)):C.each(A=>{Zt(p,A)}),Ie(p,"visibility"),b.each(ss)})})],selectFirst:!1}},ui="send-data-to-section",zl="send-data-to-view",ab=(t,s,a,c)=>{const u=Ve({}),m=x=>{const k=We.getValue(x),A=Uk(k).getOr({}),R=u.get(),L=Nn(R,A);u.set(L)},f=x=>{const k=u.get();We.setValue(x,k)},p=Ve(null),b=ke(t.tabs,x=>({value:x.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[lo(a.shared.providers.translate(x.title))],view:()=>[Vf.sketch(k=>({dom:{tag:"div",classes:["tox-form"]},components:ke(x.items,A=>wR(k,A,s,a,c)),formBehaviours:Ae([nt.config({mode:"acyclic",useTabstopAt:Oe(W0)}),Dt("TabView.form.events",[ro(f),Dl(m)]),xa.config({channels:qg([{key:ui,value:{onReceive:m}},{key:zl,value:{onReceive:f}}])})])}))]})),C=ca(b);return vm.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(x,k,A)=>{const R=We.getValue(k);mt(x,LN,{name:R,oldName:p.get()}),p.set(R)},tabs:b,components:[vm.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[kD.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Ae([Yn.config({})])}),vm.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:C.selectFirst,tabSectionBehaviours:Ae([Dt("tabpanel",C.extraEvents),nt.config({mode:"acyclic"}),an.config({find:x=>Ps(vm.getViewItems(x))}),dg(S.none(),x=>(x.getSystem().broadcastOn([ui],{}),u.get()),(x,k)=>{u.set(k),x.getSystem().broadcastOn([zl],{})})])})},la=(t,s,a,c,u,m)=>{const f=C=>{const x=C.body;switch(x.type){case"tabpanel":return[ab(x,C.initialData,c,m)];default:return[X8(x,C.initialData,c,m)]}},p=(C,x)=>S.some({isTabPanel:()=>x.body.type==="tabpanel"}),b={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(C=>({id:C})).getOr({}),...u?b:{}}},components:[],behaviours:Ae([Cc.childAt(0),ni.config({channel:`${GN}-${s}`,updateState:p,renderComponents:f,initialData:t})])}},Ij=(t,s,a,c,u,m)=>la(t,s,S.some(a),c,u,m),J8=(t,s,a,c)=>{const u=la(t,s,S.none(),a,!1,c);return Ns.parts.body(u)},Q8=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[WN(S.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Ae([Yn.config({}),St.config({})])})]}],behaviours:Ae([nt.config({mode:"acyclic",useTabstopAt:Oe(W0)})])};return Ns.parts.body(s)},hK=kd.deviceType.isTouch(),Sq=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),xq=(t,s)=>Ns.parts.close(er.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:Ae([Yn.config({})])})),wq=()=>Ns.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),Eq=(t,s)=>Ns.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:ku(`<p>${bM(s.translate(t))}</p>`)}]}]}),kq=t=>Ns.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),Tq=(t,s)=>[uc.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),uc.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],Fj=t=>{const s="tox-dialog",a=s+"-wrap",c=a+"__backdrop",u=s+"__disable-scroll";return Ns.sketch({lazySink:t.lazySink,onEscape:m=>(t.onEscape(m),S.some(!0)),useTabstopAt:m=>!W0(m),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:ku(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:hK?[c,c+"--opaque"]:[c]}}]}},dragBlockClass:a,modalBehaviours:Ae([St.config({}),Dt("dialog-events",t.dialogEvents.concat([ch(Lr(),(m,f)=>{tl.isBlocked(m)?re():nt.focusIn(m)}),ve(em(),(m,f)=>{m.getSystem().broadcastOn([j0],{newFocus:f.event.newFocus})})])),Dt("scroll-lock",[ro(()=>{Vo(Xr(),u)}),Dl(()=>{fo(Xr(),u)})]),...t.extraBehaviours]),eventOrder:{[_i()]:["dialog-events"],[ec()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[pu()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},_q=t=>er.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:Ae([Yn.config({}),bo.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[Pa("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{rn(s,Om)}}),Aq=(t,s,a,c)=>{const u=m=>[lo(c.translate(m.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(m=>({id:m})).getOr({})}},components:[],behaviours:Ae([ni.config({channel:`${jN}-${s}`,initialData:t,renderComponents:u})])}},Oq=()=>({dom:ku('<div class="tox-dialog__draghandle"></div>')}),pK=(t,s,a,c)=>uc.sketch({dom:ku('<div class="tox-dialog__header"></div>'),components:[Aq(t,s,S.some(a),c),Oq(),_q(c)],containerBehaviours:Ae([Of.config({mode:"mouse",blockerClass:"blocker",getTarget:u=>lu(u,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"},onDrag:(u,m)=>{u.getSystem().broadcastOn([pm()],{target:m})}})])}),bK=(t,s,a)=>{const c=Ns.parts.title(Aq(t,s,S.none(),a)),u=Ns.parts.draghandle(Oq()),m=Ns.parts.close(_q(a)),f=[c].concat(t.draggable?[u]:[]).concat([m]);return uc.sketch({dom:ku('<div class="tox-dialog__header"></div>'),components:f})},Dq=(t,s,a)=>bK({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),Mq=(t,s,a,c)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${c.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:ku('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),Nq=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:c=>{const u=qn(t().element,".tox-dialog__header").map(m=>on(m));Ns.setBusy(t(),(m,f)=>Mq(c.message,f,s,u))},onUnblock:()=>{Ns.setIdle(t())}}),Rq="tox-dialog--fullscreen",$j="tox-dialog--width-lg",Hj="tox-dialog--width-md",eB=t=>{switch(t){case"large":return S.some($j);case"medium":return S.some(Hj);default:return S.none()}},Bq=(t,s)=>{const a=ne.fromDom(s.element.dom);wr(a,Rq)||(wi(a,[$j,Hj]),eB(t).each(c=>Vo(a,c)))},Pq=(t,s)=>{const a=ne.fromDom(t.element.dom),c=Ju(a),u=_t(c,m=>m===$j||m===Hj).or(eB(s));pB(a,[Rq,...u.toArray()])},Lq=(t,s,a)=>$r(Fj({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[z0({}),...t.extraBehaviours],onEscape:c=>{rn(c,Om)},dialogEvents:s,eventOrder:{[af()]:[ni.name(),xa.name()],[ec()]:["scroll-lock",ni.name(),"messages","dialog-events","alloy.base.behaviour"],[pu()]:["alloy.base.behaviour","dialog-events","messages",ni.name(),"scroll-lock"]}})),Vj=(t,s={})=>{const a=c=>{const u=ke(c.items,m=>{const f=Ze(s,m.name).getOr(Ve(!1));return{...m,storage:f}});return{...c,items:u}};return ke(t,c=>c.type==="menu"?a(c):c)},Iq=t=>Qo(t,(s,a)=>a.type==="menu"?Qo(a.items,(u,m)=>(u[m.name]=m.storage,u),s):s,{}),Fq=(t,s)=>[Av(Lr(),pU),t(H0,(a,c,u,m)=>{au(m.element)&&Ic(Fs(m.element)).each(Yi),s.onClose(),c.onClose()}),t(Om,(a,c,u,m)=>{c.onCancel(a),rn(m,H0)}),ve(V0,(a,c)=>s.onUnblock()),ve(k3,(a,c)=>s.onBlock(c.event))],vK=(t,s)=>{const a=(u,m)=>ve(u,(f,p)=>{c(f,(b,C)=>{m(t(),b,p.event,f)})}),c=(u,m)=>{ni.getState(u).get().each(f=>{m(f,u)})};return[...Fq(a,s),a(Ru,(u,m,f)=>{m.onAction(u,{name:f.name})})]},$q=(t,s,a)=>{const c=(m,f)=>ve(m,(p,b)=>{u(p,(C,x)=>{f(t(),C,b.event,p)})}),u=(m,f)=>{ni.getState(m).get().each(p=>{f(p.internalDialog,m)})};return[...Fq(c,s),c(ug,(m,f)=>f.onSubmit(m)),c(ka,(m,f,p)=>{f.onChange(m,{name:p.name})}),c(Ru,(m,f,p,b)=>{const C=()=>b.getSystem().isConnected()?nt.focusIn(b):void 0,x=R=>Fp(R,"disabled")||Ts(R,"aria-disabled").exists(L=>L==="true"),k=Fs(b.element),A=Ic(k);f.onAction(m,{name:p.name,value:p.value}),Ic(k).fold(C,R=>{x(R)||A.exists(L=>Hm(R,L)&&x(L))?C():a().toOptional().filter(L=>!Hm(L.element,R)).each(C)})}),c(LN,(m,f,p)=>{f.onTabChange(m,{newTabName:p.name,oldTabName:p.oldName})}),Dl(m=>{const f=t();We.setValue(m,f.getData())})]},yK=(t,s)=>G0(t,t.type,s),CK=(t,s,a)=>_t(s,c=>c.name===a).bind(c=>c.memento.getOpt(t)),SK=(t,s)=>{const a=s.map(p=>p.footerButtons).getOr([]),c=gi(a,p=>p.align==="start"),u=(p,b)=>uc.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${p}`]},components:ke(b,C=>C.memento.asSpec())}),m=u("start",c.pass),f=u("end",c.fail);return[m,f]},Hq=(t,s,a)=>{const c=(u,m)=>{const f=ke(m.buttons,b=>{const C=Tn(yK(b,a));return{name:b.name,align:b.align,memento:C}}),p=b=>CK(u,f,b);return S.some({lookupByName:p,footerButtons:f})};return{dom:ku('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Ae([ni.config({channel:`${qN}-${s}`,initialData:t,updateState:c,renderComponents:SK})])}},xK=(t,s,a)=>Hq(t,s,a),Vq=(t,s,a)=>Ns.parts.footer(Hq(t,s,a)),tB=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const c=an.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Vf.getField(c,s).orThunk(()=>t.getFooter().bind(f=>ni.getState(f).get()).bind(f=>f.lookupByName(s)))}else return S.none()},wK=(t,s)=>{const a=t.getRoot();return ni.getState(a).get().map(c=>Qi(Po("data",c.dataValidator,s))).getOr(s)},zq=(t,s,a)=>{const c=L=>{const z=t.getRoot();z.getSystem().isConnected()&&L(z)},R={getData:()=>{const L=t.getRoot(),z=L.getSystem().isConnected()?t.getFormWrapper():L,j=We.getValue(z),V=Gn(a,q=>q.get());return{...j,...V}},setData:L=>{c(z=>{const j=R.getData(),V=Nn(j,L),q=wK(t,V),K=t.getFormWrapper();We.setValue(K,q),jo(a,(ie,me)=>{Yt(V,me)&&ie.set(V[me])})})},setEnabled:(L,z)=>{tB(t,L).each(z?st.enable:st.disable)},focus:L=>{tB(t,L).each(St.focus)},block:L=>{if(!Tt(L))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c(z=>{mt(z,k3,{message:L})})},unblock:()=>{c(L=>{rn(L,V0)})},showTab:L=>{c(z=>{const j=t.getBody();ni.getState(j).get().exists(q=>q.isTabPanel())&&an.getCurrent(j).each(q=>{vm.showTab(q,L)})})},redial:L=>{c(z=>{const j=t.getId(),V=s(L),q=Vj(V.internalDialog.buttons,a);z.getSystem().broadcastOn([`${Jy}-${j}`],V),z.getSystem().broadcastOn([`${jN}-${j}`],V.internalDialog),z.getSystem().broadcastOn([`${GN}-${j}`],V.internalDialog),z.getSystem().broadcastOn([`${qN}-${j}`],{...V.internalDialog,buttons:q}),R.setData(V.initialData)})},close:()=>{c(L=>{rn(L,H0)})},toggleFullscreen:t.toggleFullscreen};return R},EK=(t,s,a)=>{const c=Ue("dialog"),u=t.internalDialog,m=Dq(u.title,c,a),f=Ve(u.size),p=K=>tB(V,K),b=eB(f.get()).toArray(),C=(K,ie)=>(f.set(ie.internalDialog.size),Bq(ie.internalDialog.size,K),S.some(ie)),x=J8({body:u.body,initialData:u.initialData},c,a,p),k=Vj(u.buttons),A=Iq(k),R=vr(k.length!==0,Vq({buttons:k},c,a)),L=$q(()=>q,Nq(()=>j,a.shared.providers,s),a.shared.getSink),z={id:c,header:m,body:x,footer:R,extraClasses:b,extraBehaviours:[ni.config({channel:`${Jy}-${c}`,updateState:C,initialData:t})],extraStyles:{}},j=Lq(z,L,a),V=(()=>{const K=()=>{const me=Ns.getBody(j);return an.getCurrent(me).getOr(me)},ie=()=>{Pq(j,f.get())};return{getId:ee(c),getRoot:ee(j),getBody:()=>Ns.getBody(j),getFooter:()=>Ns.getFooter(j),getFormWrapper:K,toggleFullscreen:ie}})(),q=zq(V,s.redial,A);return{dialog:j,instanceApi:q}},Uq=(t,s,a,c=!1,u)=>{const m=Ue("dialog"),f=Ue("dialog-label"),p=Ue("dialog-content"),b=t.internalDialog,C=je=>tB(Te,je),x=Ve(b.size),k=eB(x.get()).toArray(),A=(je,pt)=>(x.set(pt.internalDialog.size),Bq(pt.internalDialog.size,je),u(),S.some(pt)),R=Tn(pK({title:b.title,draggable:!0},m,f,a.shared.providers)),L=Tn(Ij({body:b.body,initialData:b.initialData},m,p,a,c,C)),z=Vj(b.buttons),j=Iq(z),V=vr(z.length!==0,Tn(xK({buttons:z},m,a))),q=$q(()=>fe,{onBlock:je=>{tl.block(me,(pt,rt)=>{const Qt=R.getOpt(me).map(Et=>on(Et.element));return Mq(je.message,rt,a.shared.providers,Qt)})},onUnblock:()=>{tl.unblock(me)},onClose:()=>s.closeWindow()},a.shared.getSink),K="tox-dialog-inline",ie=va().os,me=$r({dom:{tag:"div",classes:["tox-dialog",K,...k],attributes:{role:"dialog",...ie.isMacOS()?{"aria-label":b.title}:{"aria-labelledby":f}}},eventOrder:{[af()]:[ni.name(),xa.name()],[_i()]:["execute-on-form"],[ec()]:["reflecting","execute-on-form"]},behaviours:Ae([nt.config({mode:"cyclic",onEscape:je=>(rn(je,H0),S.some(!0)),useTabstopAt:je=>!W0(je)&&(Gi(je)!=="button"||ks(je,"disabled")!=="disabled"),firstTabstop:1}),ni.config({channel:`${Jy}-${m}`,updateState:A,initialData:t}),St.config({}),Dt("execute-on-form",q.concat([ch(Lr(),(je,pt)=>{nt.focusIn(je)}),ve(em(),(je,pt)=>{je.getSystem().broadcastOn([j0],{newFocus:pt.event.newFocus})})])),tl.config({getRoot:()=>S.some(me)}),Nt.config({}),z0({})]),components:[R.asSpec(),L.asSpec(),...V.map(je=>je.asSpec()).toArray()]}),He=()=>{Pq(me,x.get())},Te={getId:ee(m),getRoot:ee(me),getFooter:()=>V.map(je=>je.get(me)),getBody:()=>L.get(me),getFormWrapper:()=>{const je=L.get(me);return an.getCurrent(je).getOr(je)},toggleFullscreen:He},fe=zq(Te,s.redial,j);return{dialog:me,instanceApi:fe}};var zj=tinymce.util.Tools.resolve("tinymce.util.URI");const kK=t=>{const s=f=>{t.getSystem().isConnected()&&f(t)};return{block:f=>{if(!Tt(f))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(p=>{mt(p,k3,{message:f})})},unblock:()=>{s(f=>{rn(f,V0)})},close:()=>{s(f=>{rn(f,H0)})},sendMessage:f=>{s(p=>{p.getSystem().broadcastOn([KN],f)})}}},TK=["insertContent","setContent","execCommand","close","block","unblock"],Zq=t=>rr(t)&&TK.indexOf(t.mceAction)!==-1,_K=t=>!Zq(t)&&rr(t)&&Yt(t,"mceAction"),AK=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const c=yo(a.ui)?a.ui:!1;t.execCommand(a.cmd,c,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},OK=(t,s,a,c)=>{const u=Ue("dialog"),m=Dq(t.title,u,c),f=Q8(t),p=t.buttons.bind(K=>K.length===0?S.none():S.some(Vq({buttons:K},u,c))),b=vK(()=>q,Nq(()=>V,c.shared.providers,s)),C={...t.height.fold(()=>({}),K=>({height:K+"px","max-height":K+"px"})),...t.width.fold(()=>({}),K=>({width:K+"px","max-width":K+"px"}))},x=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],k=new zj(t.url,{base_uri:new zj(window.location.href)}),A=`${k.protocol}://${k.host}${k.port?":"+k.port:""}`,R=Wa(),L=(K,ie)=>S.some(ie),z=[ni.config({channel:`${Jy}-${u}`,updateState:L,initialData:t}),Dt("messages",[ro(()=>{const K=Ys(ne.fromDom(window),"message",ie=>{if(k.isSameOrigin(new zj(ie.raw.origin))){const me=ie.raw.data;Zq(me)?AK(a,q,me):_K(me)&&t.onMessage(q,me)}});R.set(K)}),Dl(R.clear)]),xa.config({channels:{[KN]:{onReceive:(K,ie)=>{qn(K.element,"iframe").each(me=>{const He=me.dom.contentWindow;uo(He)&&He.postMessage(ie,A)})}}}})],V=Lq({id:u,header:m,body:f,footer:p,extraClasses:x,extraBehaviours:z,extraStyles:C},b,c),q=kK(V);return{dialog:V,instanceApi:q}},DK=t=>{const s=t.shared;return{open:(c,u)=>{const m=()=>{Ns.hide(C),u()},f=Tn(G0({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:S.some("primary"),align:"end",enabled:!0,icon:S.none()},"cancel",t)),p=wq(),b=xq(m,s.providers),C=$r(Fj({lazySink:()=>s.getSink(),header:Sq(p,b),body:Eq(c,s.providers),footer:S.some(kq(Tq([],[f.asSpec()]))),onEscape:m,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ve(Om,m)],eventOrder:{}}));Ns.show(C);const x=f.get(C);St.focus(x)}}},MK=t=>{const s=t.shared;return{open:(c,u)=>{const m=A=>{Ns.hide(x),u(A)},f=Tn(G0({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:S.some("primary"),align:"end",enabled:!0,icon:S.none()},"submit",t)),p=G0({context:"any",name:"no",text:"No",primary:!1,buttonType:S.some("secondary"),align:"end",enabled:!0,icon:S.none()},"cancel",t),b=wq(),C=xq(()=>m(!1),s.providers),x=$r(Fj({lazySink:()=>s.getSink(),header:Sq(b,C),body:Eq(c,s.providers),footer:S.some(kq(Tq([],[p,f.asSpec()]))),onEscape:()=>m(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ve(Om,()=>m(!1)),ve(ug,()=>m(!0))],eventOrder:{}}));Ns.show(x);const k=f.get(x);St.focus(k)}}},Wq=(t,s)=>Qi(Po("data",s,t)),jq=t=>Up(t,".tox-alert-dialog")||Up(t,".tox-confirm-dialog"),NK=(t,s,a,c)=>s&&a?[]:[po.config({contextual:{lazyContext:()=>S.some(mr(ne.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition",onHide:c},modes:["top"],lazyViewport:u=>Em(t,u.element).map(f=>({bounds:Gf(f),optScrollEnv:S.some({currentScrollTop:f.element.dom.scrollTop,scrollElmTop:$c(f.element).top})})).getOrThunk(()=>({bounds:Pr(),optScrollEnv:S.none()}))})],RK=t=>{const s=t.editor,a=Uh(s),c=DK(t.backstages.dialog),u=MK(t.backstages.dialog),m=(L,z,j)=>{if(!ar(z)){if(z.inline==="toolbar")return C(L,t.backstages.popup.shared.anchors.inlineDialog(),j,z);if(z.inline==="bottom")return x(L,t.backstages.popup.shared.anchors.inlineBottomDialog(),j,z);if(z.inline==="cursor")return C(L,t.backstages.popup.shared.anchors.cursor(),j,z)}return b(L,j)},f=(L,z)=>p(L,z),p=(L,z)=>{const j=V=>{const q=OK(V,{closeWindow:()=>{Ns.hide(q.dialog),z(q.instanceApi)}},s,t.backstages.dialog);return Ns.show(q.dialog),q.instanceApi};return Dd.openUrl(j,L)},b=(L,z)=>{const j=(V,q,K)=>{const ie=q,He=EK({dataValidator:K,initialData:ie,internalDialog:V},{redial:Dd.redial,closeWindow:()=>{Ns.hide(He.dialog),z(He.instanceApi)}},t.backstages.dialog);return Ns.show(He.dialog),He.instanceApi.setData(ie),He.instanceApi};return Dd.open(j,L)},C=(L,z,j,V)=>{const q=(K,ie,me)=>{const He=Wq(ie,me),Te=dn(),fe=t.backstages.popup.shared.header.isPositionedAtTop(),je={dataValidator:me,initialData:He,internalDialog:K},pt=()=>Te.on(xe=>{vo.reposition(xe),(!a||!fe)&&po.refresh(xe)}),rt=Uq(je,{redial:Dd.redial,closeWindow:()=>{Te.on(vo.hide),s.off("ResizeEditor",pt),s.off("ScrollWindow",Qt),Te.clear(),j(rt.instanceApi)}},t.backstages.popup,V.ariaAttrs,pt),Qt=()=>rt.dialog.getSystem().broadcastOn([pm()],{target:rt.dialog.element}),Et=()=>rt.dialog.getSystem().broadcastOn([Tu()],{target:rt.dialog.element}),Lt=$r(vo.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:V.persistent?{event:"doNotDismissYet"}:{},...fe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ae([Dt("window-manager-inline-events",[ve(nd(),(xe,Be)=>{rn(rt.dialog,Om)})]),...NK(s,a,fe,Et)]),isExtraPart:(xe,Be)=>jq(Be)}));Te.set(Lt);const tt=()=>{const xe=s.inline?Xr():ne.fromDom(s.getContainer()),Be=mr(xe);return S.some(Be)};return vo.showWithinBounds(Lt,Ai(rt.dialog),{anchor:z},tt),(!a||!fe)&&(po.refresh(Lt),s.on("ResizeEditor",pt)),s.on("ScrollWindow",Qt),rt.instanceApi.setData(He),nt.focusIn(rt.dialog),rt.instanceApi};return Dd.open(q,L)},x=(L,z,j,V)=>{const q=(K,ie,me)=>{const He=Wq(ie,me),Te=dn(),fe=t.backstages.popup.shared.header.isPositionedAtTop(),je={dataValidator:me,initialData:He,internalDialog:K},pt=()=>Te.on(Lt=>{vo.reposition(Lt),po.refresh(Lt)}),rt=Uq(je,{redial:Dd.redial,closeWindow:()=>{Te.on(vo.hide),s.off("ResizeEditor ScrollWindow ElementScroll",pt),Te.clear(),j(rt.instanceApi)}},t.backstages.popup,V.ariaAttrs,pt),Qt=$r(vo.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:V.persistent?{event:"doNotDismissYet"}:{},...fe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ae([Dt("window-manager-inline-events",[ve(nd(),(Lt,tt)=>{rn(rt.dialog,Om)})]),po.config({contextual:{lazyContext:()=>S.some(mr(ne.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:Lt=>Em(s,Lt.element).map(xe=>({bounds:Gf(xe),optScrollEnv:S.some({currentScrollTop:xe.element.dom.scrollTop,scrollElmTop:$c(xe.element).top})})).getOrThunk(()=>({bounds:Pr(),optScrollEnv:S.none()}))})]),isExtraPart:(Lt,tt)=>jq(tt)}));Te.set(Qt);const Et=()=>t.backstages.popup.shared.getSink().toOptional().bind(Lt=>{const tt=Em(s,Lt.element),xe=15,Be=tt.map(dt=>Gf(dt)).getOr(Pr()),yt=mr(ne.fromDom(s.getContentAreaContainer())),It=zb(yt,Be);return S.some(as(It.x,It.y,It.width,It.height-xe))});return vo.showWithinBounds(Qt,Ai(rt.dialog),{anchor:z},Et),po.refresh(Qt),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",pt),rt.instanceApi.setData(He),nt.focusIn(rt.dialog),rt.instanceApi};return Dd.open(q,L)};return{open:m,openUrl:f,alert:(L,z)=>{c.open(L,z)},close:L=>{L.close()},confirm:(L,z)=>{u.open(L,z)}}},BK=t=>{ND(t),kz(t),tn(t)};var PK=()=>{FH.add("silver",t=>{BK(t);let s=()=>Pr();const{dialogs:a,popups:c,renderUI:u}=Y8(t,{getPopupSinkBounds:()=>s()}),m=()=>{const x=u();return Em(t,c.getMothership().element).each(A=>{s=()=>Gf(A)}),x};Jz.register(t,c.backstage.shared);const f=RK({editor:t,backstages:{popup:c.backstage,dialog:a.backstage}}),p=dn(),b=()=>bE(t,{backstage:c.backstage},c.getMothership(),p),C=()=>qn(ne.fromDom(t.getContainer()),".tox-promotion").map(x=>x.dom).getOrNull();return{renderUI:m,getWindowManagerImpl:ee(f),getNotificationManagerImpl:b,getPromotionElement:C}})};PK()})();const NY={name:"LeadsPage",components:{draggable:XK,WhatsappChatModal:TY,Loader:DY},setup(){const fn=Wt("all"),I=Wt([]),Co=Wt(!1),Z=Wt(null),Fn=Wt(""),ns=Wt(!1),ln=Wt(!1),Tt=Wt({id:0,first_name:"",last_name:"",email:"",phone:"",country_code:"",tag:"",stage:""}),rr=Wt({}),_c=Wt({message:"",type:""}),X=Wt([]),$n=Wt([]),yo=Wt([]),ar=Wt([]),pl=Wt(!1),uo=Wt("default"),Cs=Wt(!1),Zr=Wt(""),kt=Wt([]),re=Wt(null),Pt=Wt(""),Aa=Wt(new Set),Qn=Wt(!1),ee=Wt(!1),$t=Wt(null),mo=Wt(""),hn=Wt(1),Oe=Wt(10),jt=cB(()=>Math.ceil(I.value.length/Oe.value)),No=Wt(""),gn=Wt(""),ct=Wt(!1),S=Wt(!1),Ua=Wt(!1),qe=Wt(!1),ds=Wt(!1),Hi=Wt(null),Qe=Wt(null),jn=Wt(""),ms=Wt(!1),Hn=Wt([]),fi=Wt(!1),ke=Wt(!1),ze=Wt([]),O=Wt(!1),gi=Wt(!1),Zn=cB(()=>O.value||gi.value),Jo=localStorage.getItem("auth_token"),Qo=he=>{Pt.value=he,Zr.value=pe(he),kt.value=hi(he),Cs.value=!0},Fu=()=>{Cs.value=!1},_t=he=>Aa.value.has(he),Vn=he=>{Aa.value.has(he)?Aa.value.delete(he):Aa.value.add(he),Tt.value.tag=Array.from(Aa.value)},At=()=>{Fu()},pe=he=>({listingAlert:"New Listing Alert",neighbourhoodAlert:"Neighbourhood Alert",openHouseAlert:"Open House Alert",actionPlan:"Action Plan",marketUpdates:"Market Updates",newsletter:"Real Estate Newsletter"})[he]||"Unknown Modal",hi=he=>({listingAlert:[{value:"alert1",text:"Alert 1"},{value:"alert2",text:"Alert 2"}],neighbourhoodAlert:[{value:"neigh1",text:"Neighbourhood 1"},{value:"neigh2",text:"Neighbourhood 2"}],openHouseAlert:[{value:"house1",text:"House 1"},{value:"house2",text:"House 2"}],actionPlan:[{value:"plan1",text:"Plan 1"},{value:"plan2",text:"Plan 2"}],marketUpdates:[{value:"update1",text:"Update 1"},{value:"update2",text:"Update 2"}],newsletter:[{value:"news1",text:"Newsletter 1"},{value:"news2",text:"Newsletter 2"}]})[he]||[],ma=()=>{ke.value=!1},et=Wt({from:"hiteshpandey732195@gmail.com",to:"",subject:"",message:"",template:"",attachments:[]}),Ac=he=>{ze.value.splice(he,1),et.value.to=ze.value.join(", ")};lB(Hn,he=>{ze.value=I.value.filter(ne=>he.includes(ne.id)).map(ne=>ne.email),et.value.to=ze.value.join(", ")}),lB(ze,he=>{et.value.to=he.join(", ")});const Ss=async()=>{ke.value=!0,await Uu()},Wl=()=>{ke.value=!1},ko=he=>{ze.value.includes(he)?ze.value=ze.value.filter(ne=>ne!==he):ze.value.push(he)},Ps=Wt(""),fa=Wt(""),Ls=Wt(["{{first_name}}","{{last_name}}","{{email}}","{{city}}","{{phone}}"]),nn=()=>{Ps.value&&(et.value.subject+=" "+Ps.value)},eo=Wt([]),bl=async()=>{try{const he=await sr.get("/api/templates",{headers:{Authorization:`Bearer ${Jo}`}});eo.value=he.data.data??he.data}catch(he){he.response&&he.response.status===401&&alert("Session expired. Please log in again.")}},jo=()=>{uB(()=>{Ul.get("email-editor")||Ul.init({selector:"#email-editor",license_key:"gpl",plugins:"link lists image code",toolbar:"undo redo | bold italic underline | alignleft aligncenter alignright alignjustify | link image media | mergeFieldButton | preview fullscreen",menubar:"file edit view insert format tools table help",height:500,setup:he=>{Hi.value=he,he.ui.registry.addMenuButton("mergeFieldButton",{text:"Merge Fields",fetch:ne=>{const wn=Ls.value.map(So=>({type:"menuitem",text:So,onAction:()=>{he.insertContent(So)}}));ne(wn)}})},image_title:!0,automatic_uploads:!0,file_picker_types:"image",file_picker_callback:(he,ne,wn)=>{const So=document.createElement("input");So.setAttribute("type","file"),So.setAttribute("accept","image/*"),So.onchange=function(){const M=this.files[0],$=new FileReader;$.onload=function(){const J=$.result;he(J,{title:M.name})},$.readAsDataURL(M)},So.click()}})})},Gn=()=>{Ul.get("email-editor")&&Ul.get("email-editor").remove()},Za=()=>{if(Hn.value.length===0){ua.fire({icon:"warning",title:"No Leads Selected",text:"Please select at least one lead before sending an email."});return}ds.value=!0,uB(()=>{Gn(),jo()})},Go=()=>{ds.value=!1,Gn()},pr=()=>{const he=eo.value.find(ne=>ne.id===et.value.template);if(he){let ne=he.content;Ul.get("email-editor").setContent(ne),et.value.subject=he.subject,he.attachment_path?et.value.attachments=[he.attachment_path]:et.value.attachments=[],fa.value&&yi()}},xs=he=>{et.value.attachments.splice(he,1)},pi=he=>{et.value.attachments=Array.from(he.target.files)},Vi=()=>{const he=Hi.value.getContent();alert(`Preview:
From: ${et.value.from}
To: ${et.value.to}
Subject: ${et.value.subject}
Message:
${he}`)},ws=()=>{alert("Feature not implemented yet. Add scheduling logic here!")},jl=async()=>{const he=parseInt(localStorage.getItem("user_id"));if(!he||isNaN(he)){ua.fire({icon:"error",title:"Missing User ID",text:"Please log in again. User ID is missing or invalid."});return}const ne=I.value.filter(M=>Hn.value.includes(M.id)).map(M=>M.email),wn=I.value.filter(M=>Hn.value.includes(M.id)).map(M=>M.id);if(!ne.length){ua.fire({icon:"error",title:"No Recipients",text:"Please select at least one lead."});return}et.value.to=ne.join(",");const So=Hi.value.getContent();ua.fire({title:"Are you sure?",text:"Do you want to send this email?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, send it!",cancelButtonText:"Cancel"}).then(async M=>{if(M.isConfirmed)try{const $=new FormData;$.append("from",et.value.from),$.append("subject",et.value.subject),$.append("message",So),$.append("template_id",et.value.template),$.append("user_id",he),wn.forEach(J=>{$.append("lead_ids[]",J)}),ne.forEach(J=>{$.append("to[]",J)}),et.value.attachments.forEach(J=>{$.append("attachments[]",J)}),await sr.post("/api/send-email",$,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),ua.fire({icon:"success",title:"Email Sent!",text:"Your email has been successfully sent."}),Go()}catch($){console.error("Email Send Error:",$),ua.fire({icon:"error",title:"Failed to Send",text:"Something went wrong. Please try again later."})}})},Ze=Wt(!1),Yt=Wt(!1),ir=Wt([]),Gl=Wt([]),ao=Wt([]),Ve=Wt({from:"",to:"",toName:"",subject:"",message:"",template:"",schedule:""}),Wr=()=>{Ve.value.to=ao.value.map(he=>he.phone).join(", "),Ve.value.toName=ao.value.map(he=>he.first_name).join(", ")},$u=he=>{const ne=Hn.value.indexOf(he.id);ne===-1?(Hn.value.push(he.id),ao.value.push({id:he.id,first_name:he.first_name,phone:he.phone})):(Hn.value.splice(ne,1),ao.value=ao.value.filter(wn=>wn.id!==he.id)),Wr()},Hu=()=>{uB(()=>{Ul.get("sms-editor")||Ul.init({selector:"#sms-editor",license_key:"gpl",plugins:"link lists image code",toolbar:"undo redo | aligncenter alignright alignjustify | mergeFieldButton",menubar:"file edit view insert format tools table help",height:500,setup:he=>{Qe.value=he,he.ui.registry.addMenuButton("mergeFieldButton",{text:"Merge Fields",fetch:ne=>{const wn=Ls.value.map(So=>({type:"menuitem",text:So,onAction:()=>{he.insertContent(So)}}));ne(wn)}})},image_title:!0,automatic_uploads:!0,file_picker_types:"image",file_picker_callback:(he,ne,wn)=>{const So=document.createElement("input");So.setAttribute("type","file"),So.setAttribute("accept","image/*"),So.onchange=function(){const M=this.files[0],$=new FileReader;$.onload=function(){const J=$.result;he(J,{title:M.name})},$.readAsDataURL(M)},So.click()}})})},oo=()=>{Ul.get("sms-editor")&&Ul.get("sms-editor").remove()},xt=he=>Hn.value.includes(he.id),vl=he=>{const ne=ao.value[he];ao.value.splice(he,1),Hn.value=Hn.value.filter(wn=>wn!==ne.id),Wr()};lB(Hn,he=>{Ve.value.to=ao.value.map(ne=>ne.phone).join(", "),Ve.value.toName=ao.value.map(ne=>ne.first_name).join(", ")});const Pm=()=>{Yt.value=!1},Ro=()=>{Yt.value=!0},cr=()=>{Yt.value=!1},To=he=>{Ve.value.toName=he.first_name,Ve.value.to=he.phone,Yt.value=!1};lB(Hn,()=>{ao.value=I.value.filter(he=>Hn.value.includes(he.id)),Ve.value.to=ao.value.map(he=>he.phone).join(", "),Ve.value.toName=ao.value.map(he=>he.first_name).join(", ")});const Vu=()=>{Ve.value.message.length>300&&(Ve.value.message=Ve.value.message.slice(0,300))},Ft=Wt([]),jr=Wt(!1),Ks=async()=>{jr.value=!0;try{const he=await sr.get("/api/sms-templates");Ft.value=he.data.templates}catch{ua.fire("Error","Could not load SMS templates.","error")}finally{jr.value=!1}},zu=he=>{Ve.value.to=he.phone,Wl()},Lm=he=>{he.target.checked?(Hn.value=I.value.map(ne=>ne.id),ao.value=I.value.map(ne=>({id:ne.id,first_name:ne.first_name,phone:ne.phone}))):(Hn.value=[],ao.value=[]),Wr()},Eg=()=>{if(Hn.value.length===0){ua.fire("No leads selected!","Please select leads before sending an SMS.","warning");return}ms.value=!0,uB(()=>{oo(),Hu()})},ga=()=>{fi.value=!fi.value},ha=()=>{ms.value=!1,Ve.value={from:"",to:"",subject:"",message:"",template:"",schedule:""}},Ld=()=>{if(!Array.isArray(Ft.value))return;const he=Ft.value.find(ne=>ne.id===Ve.value.template);he&&(Ve.value.message=he.content,Ul.get("sms-editor")&&Ul.get("sms-editor").setContent(he.content))},yl=he=>{const ne=he.target.value;ne&&(Ve.value.message+=` ${ne}`,Ve.value.subject+=` ${ne}`,he.target.value="")},zi=()=>{ua.fire({title:"SMS Preview",html:`<strong>From:</strong> ${Ve.value.from}<br>
              <strong>To:</strong> ${Ve.value.to}<br>
              <strong>Subject:</strong> ${Ve.value.subject}<br>
              <strong>Message:</strong><br> ${Ve.value.message}`,icon:"info"})},Es=async()=>{var ne;const he=parseInt(localStorage.getItem("user_id"));if(!he||isNaN(he)){ua.fire("Missing User ID","Please log in again.","error");return}if(!Ve.value.from||ao.value.length===0||!Ve.value.message.trim()){ua.fire("Missing Information","Sender, recipient, and message cannot be empty.","error");return}try{const wn=ao.value.map(M=>M.phone),So=I.value.filter(M=>Hn.value.includes(M.id)).map(M=>M.id);await sr.post("/api/send-sms",{lead_ids:So,user_id:he,from:Ve.value.from,to:wn.join(", "),subject:Ve.value.subject,message:((ne=Ul.get("sms-editor"))==null?void 0:ne.getContent({format:"text"}))||Ve.value.message,schedule:Ve.value.schedule||null}),ua.fire("Success","SMS sent successfully.","success"),ha()}catch(wn){console.error("SMS Send Error:",wn),ua.fire("Error","Failed to send SMS.","error")}},Oc=localStorage.getItem("auth_token"),pa=async he=>{fn.value=he,O.value=!0,gi.value=!0;try{await Promise.all([he==="all"?Ue(Oc):Uu(Oc),Zu(Oc)])}catch(ne){console.error("Error fetching leads or columns:",ne)}finally{O.value=!1,gi.value=!1}},Ue=async he=>{try{const ne=localStorage.getItem("auth_token"),wn=await sr.get("/api/leads",{headers:{Authorization:`Bearer ${ne}`}});I.value=Array.isArray(wn.data)?wn.data:[]}catch(ne){console.error("Error loading leads",ne)}},Uu=async he=>{try{const ne=await sr.get("/api/leads?type=my",{headers:{Authorization:`Bearer ${he}`}});I.value=Array.isArray(ne.data)?ne.data:[]}catch(ne){console.error("Error loading my leads",ne)}},os=async()=>{try{const he=await sr.get("/api/items");X.value=he.data.tags,$n.value=he.data.stages,yo.value=he.data.sources}catch{}},Im=()=>{ct.value=!0},Nn=()=>{ct.value=!1,No.value=""},Id=()=>{S.value=!0},Gr=()=>{S.value=!1,gn.value=""},Fm=async()=>{if(No.value.trim())try{const he=await sr.post("/api/items",{name:No.value,type:"tag"});X.value.push(he.data.item),No.value="",Ua.value=!1,ua.fire("Success","Tag added successfully","success")}catch{ua.fire("Error","Failed to add tag","error")}},Ui=async()=>{if(gn.value.trim())try{const he=await sr.post("/api/items",{name:gn.value,type:"stage"});$n.value.push(he.data.item),gn.value="",qe.value=!1,ua.fire("Success","Stage added successfully","success")}catch{ua.fire("Error","Failed to add stage","error")}},$m=cB(()=>I.value.filter(he=>he.first_name&&he.first_name.toLowerCase().includes(Fn.value.toLowerCase()))),br=he=>{const ne=X.value.find(wn=>wn.id===he);return ne?ne.name:"N/A"},Fd=he=>{const ne=$n.value.find(wn=>wn.id===he);return ne?ne.name:"N/A"},ql=()=>(rr.value={first_name:Tt.value.first_name?"":"First name is required.",last_name:Tt.value.last_name?"":"Last name is required.",email:Tt.value.email&&/^\S+@\S+\.\S+$/.test(Tt.value.email)?"":"Valid email is required.",phone:Tt.value.phone&&/^\d{10}$/.test(Tt.value.phone)?"":"Valid phone number is required.",tag:Tt.value.tag?"":"Tag is required.",stage:Tt.value.stage?"":"Stage is required."},!Object.values(rr.value).some(he=>he)),vr=async()=>{if(Hn.value.length===0){_o("No leads selected.","error");return}if((await ua.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{const ne=localStorage.getItem("auth_token");await sr.post("/api/leads/delete",{lead_ids:Hn.value},{headers:{Authorization:`Bearer ${ne}`,"Content-Type":"application/json"}}),I.value=I.value.filter(wn=>!Hn.value.includes(wn.id)),Hn.value=[],ua.fire("Deleted!","Selected leads have been deleted.","success")}catch(ne){console.error("Delete error:",ne),ua.fire("Error!","Failed to delete leads.","error")}},fs=he=>{he>=1&&he<=jt.value&&(hn.value=he)},es=he=>{Oe.value=he,hn.value=1},Kl=cB(()=>{const he=(hn.value-1)*Oe.value,ne=he+Oe.value;return I.value.slice(he,ne)}),Cl=async()=>{if(Hn.value.length===0){_o("No leads selected.","error");return}try{const he=await sr.post("/leads/export",{lead_ids:Hn.value},{responseType:"blob"}),ne=window.URL.createObjectURL(new Blob([he.data])),wn=document.createElement("a");wn.href=ne,wn.setAttribute("download","leads.csv"),document.body.appendChild(wn),wn.click(),document.body.removeChild(wn),_o("Leads exported successfully!","success")}catch{_o("Failed to export leads.","error")}},bi=()=>{Wa(),alert("Indirect File Import option selected")},kg=()=>{Qn.value=!0},Wa=()=>{Qn.value=!1,ee.value=!1,$t.value=null,mo.value=""},dn=()=>{ee.value=!0},Dc=he=>{const ne=he.target.files[0];if(!ne){mo.value="No file selected.",$t.value=null;return}const wn=[".csv"],So=ne.name.toLowerCase();wn.some($=>So.endsWith($))?($t.value=ne,mo.value=""):($t.value=null,mo.value="Please select a valid CSV file.")},Yl=async he=>{const ne=he.target.files[0];if(!ne||!ne.name.endsWith(".csv")){_o("No file selected or invalid file type.","error");return}const wn=new FormData;wn.append("file",ne);try{const So=localStorage.getItem("auth_token");await sr.post("/api/leads/import",wn,{headers:{Authorization:`Bearer ${So}`,"Content-Type":"multipart/form-data"}}),_o("Leads imported successfully!","success"),await pa()}catch{_o("Failed to import leads.","error")}},Zi=async()=>{if(!$t.value||!$t.value.name.endsWith(".csv")){mo.value="Please select a valid CSV file.";return}const he=new FormData;he.append("file",$t.value);try{const ne=localStorage.getItem("auth_token");await sr.post("/api/leads/import",he,{headers:{Authorization:`Bearer ${ne}`,"Content-Type":"multipart/form-data"}}),_o("Leads imported successfully!","success"),await pa()}catch{_o("Failed to import leads.","error")}},yr=()=>{Wa()},_o=(he,ne)=>{_c.value={message:he,type:ne},setTimeout(()=>{_c.value.message=""},5e3)},io=async()=>{try{const he=localStorage.getItem("auth_token"),ne=await sr.get("/api/countries",{headers:{Authorization:`Bearer ${he}`}});ar.value=ne.data}catch(he){console.error("Error fetching countries:",he)}},Cr=async()=>{if(ql())try{const he=localStorage.getItem("auth_token"),ne=`+${Tt.value.country_code}${Tt.value.phone}`,wn=await sr.post("/api/leads",{first_name:Tt.value.first_name,last_name:Tt.value.last_name,email:Tt.value.email,phone:ne,country_code:Tt.value.country_code,tag:String(Tt.value.tag),stage:String(Tt.value.stage)},{headers:{Authorization:`Bearer ${he}`,"Content-Type":"application/json"}});Tt.value={id:0,first_name:"",last_name:"",email:"",phone:"",country_code:"",tag:"",stage:""},ns.value=!1,hn.value=1,await Ue(),_o("Lead created successfully!","success")}catch(he){console.error("Error creating lead:",he),_o("Failed to create lead.","error")}},to=Wt(!1),qo=Wt(["first_name","email","phone"]),Mc=Wt({first_name:{label:"Name",disabled:!0},email:{label:"Email",disabled:!0},phone:{label:"Phone",disabled:!0},latest_activity:{label:"Latest Activity"},activity_at:{label:"Activity At"},created_on:{label:"Created On"},tag:{label:"Tag"},stage:{label:"Stage"},latest_source:{label:"Latest Source"},latest_sms:{label:"Latest SMS"},latest_email:{label:"Latest Email"},next_task:{label:"Next Task"},next_appointment:{label:"Next Appointment"},new_listing_alert:{label:"New Listing Alerts"},neighbourhood_alert:{label:"Neighbourhood Alerts"},open_house_alert:{label:"Open House Alerts"},price_drop_alert:{label:"Price Drop Alerts"},action_plans:{label:"Active Action Plans"},market_updates:{label:"Assigned Market Updates"},real_estate_newsletter:{label:"Assigned Newsletters"},notes:{label:"Notes"},dob:{label:"DOB"},background:{label:"Background"},city:{label:"City"},facebook:{label:"Facebook"},instagram:{label:"Instagram"},linkedin:{label:"LinkedIn"},whatsapp:{label:"WhatsApp"},twitter:{label:"Twitter"}}),vi=()=>{to.value=!0},ja=()=>{to.value=!1},Sl=async()=>{await lr(),ja()},Zu=async he=>{try{const ne=localStorage.getItem("auth_token"),wn=await sr.get("/api/columns-settings",{headers:{Authorization:`Bearer ${ne}`}});qo.value=Array.isArray(wn.data.selectedColumns)?wn.data.selectedColumns:["first_name","email","phone"]}catch{_o("Failed to fetch column settings!")}},ba=async()=>{try{await sr.post("/api/columns-settings",{selectedColumns:qo.value},{headers:{Authorization:`Bearer ${Jo}`}}),_o("Column settings saved successfully!")}catch{_o("Failed to save column settings!")}},xl=he=>{if(!Mc.value[he].disabled){const ne=qo.value.indexOf(he);ne===-1?(qo.value.push(he),_o(`Column "${Mc.value[he].label}" added`)):(qo.value.splice(ne,1),_o(`Column "${Mc.value[he].label}" removed`))}},lr=async()=>{try{await sr.post("/api/columns-settings",{selectedColumns:qo.value},{headers:{Authorization:`Bearer ${Jo}`}}),_o("Column visibility settings saved successfully!")}catch{_o("Failed to save column visibility settings!")}},wl=async()=>{try{await sr.post("/api/columns-order",{selectedColumns:qo.value},{headers:{Authorization:`Bearer ${Jo}`}}),_o("Column order saved successfully!")}catch{_o("Failed to save column order.")}},Nc=async()=>{try{await wl()}catch{_o("Failed to save column order.")}},Wu=Wt([]),Is=Wt(!1),$d=async()=>{var he;if(!Is.value)try{const ne=await sr.get("/api/signatures",{headers:{Authorization:`Bearer ${Jo}`}});Wu.value=ne.data,Is.value=!0}catch(ne){((he=ne.response)==null?void 0:he.status)===401&&alert("Session expired. Please log in again.")}},yi=()=>{if(fa.value){const he=Ul.get("email-editor"),ne=he.getContent();he.setContent(ne+"<br><br>"+fa.value)}};return GK(async()=>{await pa(fn.value),await os(),Ks(),await bl(),await Zu(),await io();try{await Gn()}catch{}}),{loadingLeads:O,loadingColumns:gi,isTableLoading:Zn,showWhatsappModal:ln,isFullscreen:fi,countries:ar,activeColomType:uo,allSelected:pl,removeAttachment:xs,fetchSignatures:$d,removeEmail:Ac,saveColumnSettings:ba,toggleLeadSelection:ko,toggleSelectAll:Lm,showLeadModal:ke,selectedEmails:ze,addSelectedEmails:ma,closeLeadModal:Wl,openLeadModal:Ss,expandSmsModal:ga,showSmsModal:ms,selectedLeads:Hn,smsData:Ve,smsTemplates:Ft,openSmsModal:Eg,closeSmsModal:ha,loadSmsTemplate:Ld,insertMergeTag:yl,previewSms:zi,sendSms:Es,emailData:et,templates:eo,loadTemplate:pr,handleAttachments:pi,previewEmail:Vi,scheduleEmail:ws,emailMessage:jn,showEmailModal:ds,openEmailModal:Za,closeEmailModal:Go,sendEmail:jl,getAllLeads:Ue,getMyLeads:Uu,fetchLeads:pa,activeLeadType:fn,leads:I,loading:Co,error:Z,searchQuery:Fn,filteredLeads:$m,showForm:ns,newLead:Tt,errors:rr,submitForm:Cr,toggleSelectAll:Lm,toast:_c,getTagValue:br,getStageValue:Fd,tags:X,stages:$n,sources:yo,fetchItems:os,showImportModal:Qn,openImportModal:kg,closeImportModal:Wa,importDirectFile:yr,importIndirectFile:bi,showFileInput:ee,showFileUploadField:dn,handleFileUpload:Dc,submitCsvFile:Zi,fileError:mo,deleteLeads:vr,exportLeads:Cl,importLeads:Yl,currentPage:hn,pageSize:Oe,totalPages:jt,changePage:fs,setPageSize:es,paginatedLeads:Kl,showToast:_o,newTag:No,newStage:gn,showTagModal:ct,showStageModal:S,showAddTagInput:Ua,showAddStageInput:qe,openTagModal:Im,closeTagModal:Nn,openStageModal:Id,closeStageModal:Gr,addTag:Fm,addStage:Ui,openModal:Qo,submitAction:At,showModal:Cs,modalTitle:Zr,modalOptions:kt,selectedOption:re,isTagSelected:_t,toggleTagSelection:Vn,closeModal:Fu,selectedMergeField:Ps,addMergeFieldToSubject:nn,mergeFields:Ls,signatures:Wu,addSignatureToBody:yi,selectedSignature:fa,selectLead:zu,countCharacters:Vu,showEmailLeadModal:Ze,openSmsLeadModal:Ro,selectSmsLead:To,closeSmsLeadModal:cr,showSmsLeadModal:Yt,addSelectedPhones:Pm,selectedPhones:ir,selectedNames:Gl,selectedLeadsList:ao,isLeadSelected:xt,removeSelectedLead:vl,addSelectedPhones:Pm,toggleSmsLeadSelection:$u,updateSmsToField:Wr,showColumnsModal:to,openColumnsModal:vi,closeColumnsModal:ja,selectedColumns:qo,availableColumns:Mc,updateColumns:Sl,toggleColumnSelection:xl,fetchColumnSettings:Zu,onColumnReorder:Nc}}},RY={class:"leads-container"},BY={class:"leads-header"},PY={class:"leads-section"},LY={class:"lead-buttons"},IY={class:"icon-section"},FY={class:"selected-count total-leads"},$Y=["disabled"],HY={key:0,class:"modal"},VY={class:"modal-header"},zY={class:"modal-body"},UY={class:"form-group"},ZY={class:"form-group"},WY={class:"email-input-container"},jY={class:"email-tags"},GY=["onClick"],qY={class:"form-group"},KY={class:"form-group"},YY=["value"],XY={class:"form-group"},JY=["value"],QY={class:"form-group"},eX={key:0,class:"attachment-list mt-2"},tX=["onClick"],nX={class:"form-actions"},oX=["disabled"],sX={key:0,class:"integrte_LeadModal"},rX={class:"modal_LeadContent"},aX={class:"modal-header"},iX={class:"modal_LeadBody"},cX=["value","checked","onChange"],lX={class:"modal-footer"},uX={class:"modal-header"},dX={class:"modal-body"},mX={class:"form-group"},fX={class:"form-group"},gX={class:"input-group"},hX={class:"selected-leads"},pX=["onClick"],bX={class:"form-group"},vX=["value"],yX={class:"form-group"},CX=["value"],SX={class:"form-group"},xX={class:"form-actions"},wX=["disabled"],EX=["disabled"],kX=["disabled"],TX=["disabled"],_X=["disabled"],AX=["disabled"],OX=["disabled"],DX=["disabled"],MX=["disabled"],NX=["disabled"],RX=["disabled"],BX=["disabled"],PX={key:0,class:"modal-overlay"},LX={class:"modal-container"},IX={key:0,class:"import-options"},FX={key:1,class:"file-upload-container"},$X={key:0,class:"error-message"},HX={key:1,class:"tag-modal-overlay"},VX={class:"tag-modal-container"},zX={class:"modal_tags"},UX=["onClick"],ZX=["value","checked"],WX={key:0},jX={key:2,class:"stage-modal-overlay"},GX={class:"stage-modal-container"},qX={class:"modal_stages"},KX=["onClick"],YX=["value","onUpdate:modelValue"],XX={key:0,class:"new-stage-input"},JX={key:3,class:"modal-overlay"},QX={class:"modal-container"},eJ=["value"],tJ={class:"modal-buttons"},nJ={class:"header"},oJ={class:"total-leads"},sJ={key:4,class:"form-overlay"},rJ={class:"form-container"},aJ={key:0,class:"error"},iJ={key:0,class:"error"},cJ={key:0,class:"error"},lJ=["value"],uJ={style:{display:"flex"}},dJ={style:{padding:"0.5rem",border:"1px solid #ccc",background:"#eee","border-inline-end":"none"}},mJ={key:0,class:"error"},fJ=["value"],gJ={key:0,class:"error"},hJ=["value"],pJ={key:0,class:"error"},bJ={class:"table-container"},vJ={class:"table-wrapper"},yJ={key:0,class:"table-loader-overlay"},CJ={class:"lead_Table"},SJ={class:"checkbox-col"},xJ={class:"custom-checkbox-label"},wJ={class:"checkbox-col"},EJ=["value"],kJ={key:0,class:"no-leads"},TJ={class:"pagination"},_J=["disabled"],AJ=["disabled"],OJ={key:0,class:"columns-modal-overlay"},DJ={class:"columns-modal-container"},MJ={class:"columns-modal-list"},NJ=["checked","onChange","disabled"],RJ={key:0,class:"columns-modal-warning"};function BJ(fn,I,Co,Z,Fn,ns){const ln=dB("WhatsappChatModal"),Tt=dB("Loader"),rr=dB("draggable"),_c=dB("router-link");return ht(),bt(Dr,null,[Y("div",RY,[Y("div",BY,[Y("div",PY,[Y("div",LY,[Y("button",{class:or(["btn",{active:Z.activeLeadType==="all"}]),onClick:I[0]||(I[0]=X=>Z.fetchLeads("all"))}," All Leads ",2),Y("button",{class:or(["btn",{active:Z.activeLeadType==="my"}]),onClick:I[1]||(I[1]=X=>Z.fetchLeads("my"))}," My Leads ",2)])]),Y("div",IY,[Y("ul",null,[Y("li",FY," Selected Leads: "+Mn(Z.selectedLeads.length),1),I[120]||(I[120]=Y("li",{class:"total-leads"},[Y("i",{class:"fa-solid fa-plus"})],-1)),Y("li",{class:or(["total-leads",{disabled:Z.selectedLeads.length===0}]),onClick:I[2]||(I[2]=(...X)=>Z.deleteLeads&&Z.deleteLeads(...X)),disabled:Z.selectedLeads.length===0},I[83]||(I[83]=[Y("span",null,"Delete",-1),Y("i",{class:"fa-solid fa-trash-can-arrow-up"},null,-1)]),10,$Y),Z.showEmailModal?(ht(),bt("div",HY,[Y("div",VY,[I[84]||(I[84]=Y("h2",null,"Compose Email",-1)),Y("button",{onClick:I[3]||(I[3]=(...X)=>Z.closeEmailModal&&Z.closeEmailModal(...X))},"√ó")]),Y("div",zY,[Y("div",UY,[I[85]||(I[85]=Y("label",{for:"from"},"From:",-1)),qs(Y("input",{type:"email",id:"from","onUpdate:modelValue":I[4]||(I[4]=X=>Z.emailData.from=X),placeholder:"Enter sender email"},null,512),[[Zl,Z.emailData.from]])]),Y("div",ZY,[I[86]||(I[86]=Y("label",{for:"to"},"To:",-1)),Y("div",WY,[Y("div",jY,[(ht(!0),bt(Dr,null,da(Z.selectedLeadsList,(X,$n)=>(ht(),bt("span",{key:X.id,class:"email-tag"},[mi(Mn(X.first_name)+" ("+Mn(X.email)+") ",1),Y("button",{onClick:yo=>Z.removeSelectedLead($n),class:"remove-email"},"√ó",8,GY)]))),128))]),Y("button",{onClick:I[5]||(I[5]=(...X)=>Z.openSmsLeadModal&&Z.openSmsLeadModal(...X))},"+")])]),Y("div",qY,[I[87]||(I[87]=Y("label",{for:"subject"},"Subject:",-1)),qs(Y("input",{type:"text",id:"subject","onUpdate:modelValue":I[6]||(I[6]=X=>Z.emailData.subject=X),placeholder:"Enter subject"},null,512),[[Zl,Z.emailData.subject]])]),Y("div",KY,[I[89]||(I[89]=Y("label",{for:"mergeFields"},"Merge Fields:",-1)),qs(Y("select",{id:"mergeFields","onUpdate:modelValue":I[7]||(I[7]=X=>Z.selectedMergeField=X),onChange:I[8]||(I[8]=(...X)=>Z.addMergeFieldToSubject&&Z.addMergeFieldToSubject(...X))},[I[88]||(I[88]=Y("option",{value:""},"Select Merge Field",-1)),(ht(!0),bt(Dr,null,da(Z.mergeFields,X=>(ht(),bt("option",{key:X,value:X},Mn(X),9,YY))),128))],544),[[Ap,Z.selectedMergeField]])]),Y("div",XY,[I[91]||(I[91]=Y("label",{for:"template"},"Template:",-1)),qs(Y("select",{id:"template","onUpdate:modelValue":I[9]||(I[9]=X=>Z.emailData.template=X),onChange:I[10]||(I[10]=(...X)=>Z.loadTemplate&&Z.loadTemplate(...X))},[I[90]||(I[90]=Y("option",{value:""},"Select Template",-1)),(ht(!0),bt(Dr,null,da(Z.templates,X=>(ht(),bt("option",{key:X.id,value:X.id},Mn(X.title),9,JY))),128))],544),[[Ap,Z.emailData.template]])]),I[93]||(I[93]=Y("textarea",{id:"email-editor"},null,-1)),Y("div",QY,[I[92]||(I[92]=Y("label",{for:"attachments"},"Attachments:",-1)),Y("input",{type:"file",id:"attachments",onChange:I[11]||(I[11]=(...X)=>Z.handleAttachments&&Z.handleAttachments(...X))},null,32),Z.emailData.attachments.length?(ht(),bt("div",eX,[(ht(!0),bt(Dr,null,da(Z.emailData.attachments,(X,$n)=>(ht(),bt("div",{key:$n,class:"attachment-item"},[Y("span",null,Mn(X.split("/").pop()),1),Y("button",{type:"button",class:"btn btn-sm btn-danger ml-2",onClick:yo=>Z.removeAttachment($n)}," Remove ",8,tX)]))),128))])):no("",!0)]),Y("div",nX,[Y("button",{onClick:I[12]||(I[12]=(...X)=>Z.previewEmail&&Z.previewEmail(...X))},"Preview"),Y("button",{onClick:I[13]||(I[13]=(...X)=>Z.scheduleEmail&&Z.scheduleEmail(...X))},"Schedule"),Y("button",{onClick:I[14]||(I[14]=(...X)=>Z.sendEmail&&Z.sendEmail(...X))},"Send Email")])])])):no("",!0),Z.activeLeadType==="my"?(ht(),bt("li",{key:1,class:or(["total-leads",{disabled:Z.selectedLeads.length===0}]),onClick:I[15]||(I[15]=(...X)=>Z.openEmailModal&&Z.openEmailModal(...X)),disabled:Z.selectedLeads.length===0},I[94]||(I[94]=[Y("span",null,"Email",-1),Y("i",{class:"fa-solid fa-envelope"},null,-1)]),10,oX)):no("",!0),(ht(),dK(qK,{to:"body"},[Z.showSmsLeadModal?(ht(),bt("div",sX,[Y("div",rX,[Y("div",aX,[I[95]||(I[95]=Y("h2",null,"Select Leads",-1)),Y("button",{onClick:I[16]||(I[16]=X=>Z.showSmsLeadModal=!1)},"√ó")]),Y("div",iX,[Y("table",null,[I[96]||(I[96]=Y("thead",null,[Y("tr",null,[Y("th",null,"Select"),Y("th",null,"Name"),Y("th",null,"Phone")])],-1)),Y("tbody",null,[(ht(!0),bt(Dr,null,da(Z.leads,X=>(ht(),bt("tr",{key:X.id},[Y("td",null,[Y("input",{type:"checkbox",value:X.phone,checked:Z.isLeadSelected(X),onChange:$n=>Z.toggleSmsLeadSelection(X)},null,40,cX)]),Y("td",null,Mn(X.first_name)+" "+Mn(X.last_name),1),Y("td",null,Mn(X.phone),1)]))),128))])])]),Y("div",lX,[Y("button",{onClick:I[17]||(I[17]=(...X)=>Z.addSelectedPhones&&Z.addSelectedPhones(...X))},"Add Selected")])])])):no("",!0)])),Z.showSmsModal?(ht(),bt("div",{key:2,class:or(["modal",{"modal-fullscreen":Z.isFullscreen}])},[Y("div",uX,[I[97]||(I[97]=Y("h2",null,"Compose SMS",-1)),Y("i",{class:"fas fa-expand-alt",onClick:I[18]||(I[18]=(...X)=>Z.expandSmsModal&&Z.expandSmsModal(...X)),title:"Expand"}),Y("button",{onClick:I[19]||(I[19]=(...X)=>Z.closeSmsModal&&Z.closeSmsModal(...X))},"√ó")]),Y("div",dX,[Y("div",mX,[I[98]||(I[98]=Y("label",{for:"sms-from"},"From:",-1)),qs(Y("input",{type:"text",id:"sms-from","onUpdate:modelValue":I[20]||(I[20]=X=>Z.smsData.from=X),placeholder:"Enter sender's name or phone number"},null,512),[[Zl,Z.smsData.from]])]),Y("div",fX,[I[99]||(I[99]=Y("label",{for:"sms-to"},"To:",-1)),Y("div",gX,[Y("div",hX,[(ht(!0),bt(Dr,null,da(Z.selectedLeadsList,(X,$n)=>(ht(),bt("span",{key:X.id,class:"selected-tag"},[mi(Mn(X.first_name)+" ",1),Y("button",{onClick:yo=>Z.removeSelectedLead($n)},"√ó",8,pX)]))),128)),Y("button",{onClick:I[21]||(I[21]=(...X)=>Z.openSmsLeadModal&&Z.openSmsLeadModal(...X))},"+")])])]),Y("div",bX,[I[101]||(I[101]=Y("label",{for:"sms-template"},"Template:",-1)),qs(Y("select",{"onUpdate:modelValue":I[22]||(I[22]=X=>Z.smsData.template=X),onChange:I[23]||(I[23]=(...X)=>Z.loadSmsTemplate&&Z.loadSmsTemplate(...X))},[I[100]||(I[100]=Y("option",{value:"",disabled:""},"Select a Template",-1)),(ht(!0),bt(Dr,null,da(Z.smsTemplates,X=>(ht(),bt("option",{key:X.id,value:X.id},Mn(X.name),9,vX))),128))],544),[[Ap,Z.smsData.template]])]),Y("div",yX,[I[103]||(I[103]=Y("label",{for:"merge-tags"},"Merge Field",-1)),Y("select",{id:"merge-tags",onChange:I[24]||(I[24]=X=>Z.insertMergeTag(X))},[I[102]||(I[102]=Y("option",{value:""},"Select Tag",-1)),(ht(!0),bt(Dr,null,da(Z.mergeFields,X=>(ht(),bt("option",{key:X,value:X},Mn(X),9,CX))),128))],32)]),I[105]||(I[105]=Y("textarea",{id:"sms-editor"},null,-1)),Y("div",SX,[I[104]||(I[104]=Y("label",{for:"sms-schedule"},"Schedule SMS:",-1)),qs(Y("input",{type:"datetime-local",id:"sms-schedule","onUpdate:modelValue":I[25]||(I[25]=X=>Z.smsData.schedule=X)},null,512),[[Zl,Z.smsData.schedule]])]),Y("div",xX,[Y("button",{onClick:I[26]||(I[26]=(...X)=>Z.previewSms&&Z.previewSms(...X))},"Preview"),Y("button",{onClick:I[27]||(I[27]=(...X)=>Z.sendSms&&Z.sendSms(...X))},"Send SMS")])])],2)):no("",!0),Z.activeLeadType==="my"?(ht(),bt("li",{key:3,class:or(["total-leads",{disabled:Z.selectedLeads.length===0}]),onClick:I[28]||(I[28]=(...X)=>Z.openSmsModal&&Z.openSmsModal(...X)),disabled:Z.selectedLeads.length===0},I[106]||(I[106]=[Y("span",null,"Smart SMS",-1),Y("i",{class:"fa-solid fa-comment-dots"},null,-1)]),10,wX)):no("",!0),Z.activeLeadType==="my"?(ht(),bt("li",{key:4,class:or(["total-leads",{disabled:Z.selectedLeads.length===0}]),disabled:Z.selectedLeads.length===0,onClick:I[29]||(I[29]=(...X)=>Z.openTagModal&&Z.openTagModal(...X))},I[107]||(I[107]=[Y("span",null,"Tags",-1),Y("i",{class:"fa-solid fa-tags"},null,-1)]),10,EX)):no("",!0),Z.activeLeadType==="my"?(ht(),bt("li",{key:5,class:or(["total-chats total-leads",{disabled:Z.selectedLeads.length===0}]),disabled:Z.selectedLeads.length===0,onClick:I[30]||(I[30]=X=>Z.showWhatsappModal=!0)},I[108]||(I[108]=[Y("span",null,"Whatsapp",-1),Y("i",{class:"fa-brands fa-whatsapp"},null,-1)]),10,kX)):no("",!0),Yj(ln,{visible:Z.showWhatsappModal,selectedLeads:Z.selectedLeadsList,onClose:I[31]||(I[31]=X=>Z.showWhatsappModal=!1)},null,8,["visible","selectedLeads"]),Z.activeLeadType==="my"?(ht(),bt("li",{key:6,class:or(["total-leads",{disabled:Z.selectedLeads.length===0}]),disabled:Z.selectedLeads.length===0,onClick:I[32]||(I[32]=(...X)=>Z.openStageModal&&Z.openStageModal(...X))},I[109]||(I[109]=[Y("span",null,"Stage",-1),Y("i",{class:"fa-solid fa-table-cells"},null,-1)]),10,TX)):no("",!0),Z.activeLeadType==="my"?(ht(),bt("li",{key:7,class:or(["total-leads",{disabled:Z.selectedLeads.length===0}]),disabled:Z.selectedLeads.length===0,onClick:I[33]||(I[33]=X=>Z.openModal("listingAlert"))},I[110]||(I[110]=[Y("span",null,"New Listing Alert",-1),Y("i",{class:"fa-solid fa-bell"},null,-1)]),10,_X)):no("",!0),Z.activeLeadType==="my"?(ht(),bt("li",{key:8,class:or(["total-leads",{disabled:Z.selectedLeads.length===0}]),disabled:Z.selectedLeads.length===0,onClick:I[34]||(I[34]=X=>Z.openModal("neighbourhoodAlert"))},I[111]||(I[111]=[Y("span",null,"Neighbourhood Alert",-1),Y("i",{class:"fa-solid fa-map-location-dot"},null,-1)]),10,AX)):no("",!0),Z.activeLeadType==="my"?(ht(),bt("li",{key:9,class:or(["total-leads",{disabled:Z.selectedLeads.length===0}]),disabled:Z.selectedLeads.length===0,onClick:I[35]||(I[35]=X=>Z.openModal("openHouseAlert"))},I[112]||(I[112]=[Y("span",null,"Open House Alert",-1),Y("i",{class:"fa-solid fa-circle-exclamation"},null,-1)]),10,OX)):no("",!0),Z.activeLeadType==="my"?(ht(),bt("li",{key:10,class:or(["total-leads",{disabled:Z.selectedLeads.length===0}]),disabled:Z.selectedLeads.length===0,onClick:I[36]||(I[36]=X=>Z.openModal("marketUpdates"))},I[113]||(I[113]=[Y("span",null,"Market Updates",-1),Y("i",{class:"fa fa-bar-chart","aria-hidden":"true"},null,-1)]),10,DX)):no("",!0),Z.activeLeadType==="my"?(ht(),bt("li",{key:11,class:or(["total-leads",{disabled:Z.selectedLeads.length===0}]),disabled:Z.selectedLeads.length===0,onClick:I[37]||(I[37]=X=>Z.openModal("newsletter"))},I[114]||(I[114]=[Y("span",null,"Real Estate Newsletter",-1),Y("i",{class:"fa-solid fa-envelope-open-text"},null,-1)]),10,MX)):no("",!0),Y("li",{class:or(["total-leads",{disabled:Z.selectedLeads.length===0}]),disabled:Z.selectedLeads.length===0},I[115]||(I[115]=[Y("span",null,"Lead Transfer",-1),Y("i",{class:"fa-solid fa-right-left"},null,-1)]),10,NX),Y("li",{class:or(["total-leads",{disabled:Z.selectedLeads.length===0}]),onClick:I[38]||(I[38]=(...X)=>Z.exportLeads&&Z.exportLeads(...X)),disabled:Z.selectedLeads.length===0},I[116]||(I[116]=[Y("span",null,"Export Lead",-1),Y("i",{class:"fa-solid fa-file-export"},null,-1)]),10,RX),Y("li",{class:"total-leads",onClick:I[39]||(I[39]=(...X)=>Z.openImportModal&&Z.openImportModal(...X))},I[117]||(I[117]=[Y("span",null,"Import",-1),Y("i",{class:"fa-solid fa-file-import"},null,-1)])),Z.activeColomType==="my"?(ht(),bt("li",{key:12,class:or(["total-leads_colom",{disabled:fn.selectedcoloms.length===0}]),disabled:fn.selectedcoloms.length===0,onClick:I[40]||(I[40]=(...X)=>fn.opencolomsModal&&fn.opencolomsModal(...X))},I[118]||(I[118]=[Y("span",null,"Lead",-1),Y("i",{class:"fa-solid fa-table-cells"},null,-1)]),10,BX)):no("",!0),Z.activeLeadType==="my"?(ht(),bt("li",{key:13,class:"total-leads",onClick:I[41]||(I[41]=(...X)=>Z.openColumnsModal&&Z.openColumnsModal(...X))},I[119]||(I[119]=[Y("span",null,"Settings",-1),Y("i",{class:"fa-solid fa-gear"},null,-1)]))):no("",!0)])])]),Z.showImportModal?(ht(),bt("div",PX,[Y("div",LX,[Y("button",{type:"button",onClick:I[42]||(I[42]=(...X)=>Z.closeImportModal&&Z.closeImportModal(...X)),class:"close-button"},"X"),I[121]||(I[121]=Y("h2",null,"Select Import Type",-1)),Z.showFileInput?no("",!0):(ht(),bt("div",IX,[Y("button",{onClick:I[43]||(I[43]=(...X)=>Z.showFileUploadField&&Z.showFileUploadField(...X)),class:"import-button"},"Indirect File Import")])),Z.showFileInput?(ht(),bt("div",FX,[Y("input",{type:"file",onChange:I[44]||(I[44]=(...X)=>Z.handleFileUpload&&Z.handleFileUpload(...X)),accept:".csv"},null,32),Y("button",{onClick:I[45]||(I[45]=(...X)=>Z.submitCsvFile&&Z.submitCsvFile(...X))},"Submit CSV"),Z.fileError?(ht(),bt("p",$X,Mn(Z.fileError),1)):no("",!0)])):no("",!0)])])):no("",!0),Z.showTagModal?(ht(),bt("div",HX,[Y("div",VX,[Y("button",{type:"button",onClick:I[46]||(I[46]=(...X)=>Z.closeTagModal&&Z.closeTagModal(...X)),class:"close-button"},"X"),I[122]||(I[122]=Y("h3",null,"Select Tags",-1)),Y("div",zX,[(ht(!0),bt(Dr,null,da(Z.tags,X=>(ht(),bt("div",{key:X.id,class:or(["modal_tag",{selected:Z.isTagSelected(X.id)}]),onClick:$n=>Z.toggleTagSelection(X.id)},[Y("input",{type:"checkbox",value:X.id,checked:Z.isTagSelected(X.id),readonly:""},null,8,ZX),mi(" "+Mn(X.name),1)],10,UX))),128))]),Y("button",{onClick:I[47]||(I[47]=X=>Z.showAddTagInput=!Z.showAddTagInput),class:"add-button"},"Add Tag"),Z.showAddTagInput?(ht(),bt("div",WX,[qs(Y("input",{"onUpdate:modelValue":I[48]||(I[48]=X=>Z.newTag=X),placeholder:"Enter new tag"},null,512),[[Zl,Z.newTag]]),Y("button",{onClick:I[49]||(I[49]=(...X)=>Z.addTag&&Z.addTag(...X)),class:"submit-button"},"Add")])):no("",!0),Y("button",{onClick:I[50]||(I[50]=(...X)=>Z.closeTagModal&&Z.closeTagModal(...X)),class:"submit-button"},"Close")])])):no("",!0),Z.showStageModal?(ht(),bt("div",jX,[Y("div",GX,[Y("button",{type:"button",onClick:I[51]||(I[51]=(...X)=>Z.closeStageModal&&Z.closeStageModal(...X)),class:"close-button"},"X"),I[123]||(I[123]=Y("h3",null,"Select Stage",-1)),Y("div",qX,[(ht(!0),bt(Dr,null,da(Z.stages,X=>(ht(),bt("div",{key:X.id,class:or(["modal_stage",{selected:Z.newLead.stage===X.id}]),onClick:$n=>fn.selectStage(X.id)},[qs(Y("input",{type:"radio",value:X.id,"onUpdate:modelValue":$n=>Z.newLead.stage=$n,readonly:""},null,8,YX),[[YK,Z.newLead.stage]]),mi(" "+Mn(X.name),1)],10,KX))),128))]),Y("button",{onClick:I[52]||(I[52]=X=>Z.showAddStageInput=!Z.showAddStageInput),class:"add-button"},"Add Stage"),Z.showAddStageInput?(ht(),bt("div",XX,[qs(Y("input",{"onUpdate:modelValue":I[53]||(I[53]=X=>Z.newStage=X),placeholder:"Enter new stage",id:"m_add_stage",class:"m_add_stage"},null,512),[[Zl,Z.newStage]]),Y("button",{onClick:I[54]||(I[54]=(...X)=>Z.addStage&&Z.addStage(...X)),class:"submit-button"},"Add")])):no("",!0),Y("button",{onClick:I[55]||(I[55]=(...X)=>Z.closeStageModal&&Z.closeStageModal(...X)),class:"submit-button"},"Close")])])):no("",!0),Z.showModal?(ht(),bt("div",JX,[Y("div",QX,[Y("button",{type:"button",onClick:I[56]||(I[56]=(...X)=>Z.closeModal&&Z.closeModal(...X)),class:"close-button"},"X"),Y("h2",null,Mn(Z.modalTitle),1),qs(Y("select",{"onUpdate:modelValue":I[57]||(I[57]=X=>Z.selectedOption=X),class:"open_modal_drop-box"},[(ht(!0),bt(Dr,null,da(Z.modalOptions,X=>(ht(),bt("option",{key:X.value,value:X.value},Mn(X.text),9,eJ))),128))],512),[[Ap,Z.selectedOption]]),Y("div",tJ,[Y("button",{onClick:I[58]||(I[58]=(...X)=>Z.submitAction&&Z.submitAction(...X)),class:"submit-button"},"Submit"),Y("button",{onClick:I[59]||(I[59]=(...X)=>Z.closeModal&&Z.closeModal(...X)),class:"cancel-button"},"Cancel")])])])):no("",!0),Y("div",null,[Y("div",nJ,[qs(Y("input",{"onUpdate:modelValue":I[60]||(I[60]=X=>Z.searchQuery=X),type:"text",placeholder:"Search leads by name...",class:"search-bar"},null,512),[[Zl,Z.searchQuery]]),Y("div",oJ,"Total Leads: "+Mn(Z.filteredLeads.length),1),I[124]||(I[124]=KK('<div class="total-leads">Last 7 Days</div><div class="total-leads">Hot</div><div class="total-leads">Buyer</div><div class="total-leads">Seller</div><div class="total-leads">Closed</div>',5)),Y("button",{onClick:I[61]||(I[61]=X=>Z.showForm=!0),class:"create-new-button"},"+ Create New")])]),Z.showForm?(ht(),bt("div",sJ,[Y("div",rJ,[Y("button",{type:"button",onClick:I[62]||(I[62]=X=>Z.showForm=!1),id:"cancel_button"},"X"),I[134]||(I[134]=Y("h2",null,"Create New Lead",-1)),Y("form",{onSubmit:I[70]||(I[70]=Xj((...X)=>Z.submitForm&&Z.submitForm(...X),["prevent"]))},[Y("label",null,[I[125]||(I[125]=mi(" First Name: ")),qs(Y("input",{"onUpdate:modelValue":I[63]||(I[63]=X=>Z.newLead.first_name=X),type:"text",required:""},null,512),[[Zl,Z.newLead.first_name]]),Z.errors.first_name?(ht(),bt("span",aJ,Mn(Z.errors.first_name),1)):no("",!0)]),Y("label",null,[I[126]||(I[126]=mi(" Last Name: ")),qs(Y("input",{"onUpdate:modelValue":I[64]||(I[64]=X=>Z.newLead.last_name=X),type:"text",required:""},null,512),[[Zl,Z.newLead.last_name]]),Z.errors.last_name?(ht(),bt("span",iJ,Mn(Z.errors.last_name),1)):no("",!0)]),Y("label",null,[I[127]||(I[127]=mi(" Email: ")),qs(Y("input",{"onUpdate:modelValue":I[65]||(I[65]=X=>Z.newLead.email=X),type:"email",required:""},null,512),[[Zl,Z.newLead.email]]),Z.errors.email?(ht(),bt("span",cJ,Mn(Z.errors.email),1)):no("",!0)]),Y("label",null,[I[129]||(I[129]=mi(" Country: ")),qs(Y("select",{"onUpdate:modelValue":I[66]||(I[66]=X=>Z.newLead.country_code=X),required:""},[I[128]||(I[128]=Y("option",{value:"",disabled:""},"Select Country",-1)),(ht(!0),bt(Dr,null,da(Z.countries,X=>(ht(),bt("option",{key:X.id,value:X.phone_code},Mn(X.name)+" (+"+Mn(X.phone_code)+") ",9,lJ))),128))],512),[[Ap,Z.newLead.country_code]])]),Y("label",null,[I[130]||(I[130]=mi(" Phone: ")),Y("div",uJ,[Y("span",dJ," +"+Mn(Z.newLead.country_code||"Code"),1),qs(Y("input",{"onUpdate:modelValue":I[67]||(I[67]=X=>Z.newLead.phone=X),type:"tel",required:"",style:{flex:"1",border:"1px solid #ccc","border-inline-start":"none"},placeholder:"Enter phone number"},null,512),[[Zl,Z.newLead.phone]])]),Z.errors.phone?(ht(),bt("span",mJ,Mn(Z.errors.phone),1)):no("",!0)]),Y("label",null,[I[131]||(I[131]=mi(" Tag: ")),qs(Y("select",{"onUpdate:modelValue":I[68]||(I[68]=X=>Z.newLead.tag=X),required:""},[(ht(!0),bt(Dr,null,da(Z.tags,X=>(ht(),bt("option",{key:X.id,value:X.name},Mn(X.name),9,fJ))),128))],512),[[Ap,Z.newLead.tag]]),Z.errors.tag?(ht(),bt("span",gJ,Mn(Z.errors.tag),1)):no("",!0)]),Y("label",null,[I[132]||(I[132]=mi(" Stage: ")),qs(Y("select",{"onUpdate:modelValue":I[69]||(I[69]=X=>Z.newLead.stage=X),required:""},[(ht(!0),bt(Dr,null,da(Z.stages,X=>(ht(),bt("option",{key:X.id,value:X.name},Mn(X.name),9,hJ))),128))],512),[[Ap,Z.newLead.stage]]),Z.errors.stage?(ht(),bt("span",pJ,Mn(Z.errors.stage),1)):no("",!0)]),I[133]||(I[133]=Y("button",{type:"submit",id:"submit_button"},"Submit",-1))],32)])])):no("",!0),Y("div",null,[Y("div",null,[I[136]||(I[136]=Y("label",{for:"pageSize"},"Rows per page:",-1)),qs(Y("select",{"onUpdate:modelValue":I[71]||(I[71]=X=>Z.pageSize=X),onChange:I[72]||(I[72]=X=>Z.setPageSize(Number(X.target.value)))},I[135]||(I[135]=[Y("option",{value:"5"},"5",-1),Y("option",{value:"10"},"10",-1),Y("option",{value:"25"},"25",-1),Y("option",{value:"50"},"50",-1)]),544),[[Ap,Z.pageSize]])]),Y("div",bJ,[Y("div",vJ,[Z.isTableLoading?(ht(),bt("div",yJ,[Yj(Tt),I[137]||(I[137]=Y("span",{class:"loader-text"},"Loading table...",-1))])):no("",!0),Y("table",CJ,[Y("thead",null,[Y("tr",null,[Y("th",SJ,[Y("label",xJ,[qs(Y("input",{type:"checkbox",onChange:I[73]||(I[73]=(...X)=>Z.toggleSelectAll&&Z.toggleSelectAll(...X)),"onUpdate:modelValue":I[74]||(I[74]=X=>Z.allSelected=X),class:"custom-checkbox"},null,544),[[Jj,Z.allSelected]]),I[138]||(I[138]=Y("span",{class:"custom-checkbox-span"},null,-1))])]),Yj(rr,{modelValue:Z.selectedColumns,"onUpdate:modelValue":I[75]||(I[75]=X=>Z.selectedColumns=X),tag:"tr","item-key":"col",handle:".drag-handle",onEnd:Z.onColumnReorder},{item:mK(({element:X,index:$n})=>{var yo;return[Y("th",{class:or(["lead_TableHead",{"scroll-column":$n>=6}])},[I[139]||(I[139]=Y("span",{class:"drag-handle"},"‚ò∞",-1)),mi(" "+Mn(((yo=Z.availableColumns[X])==null?void 0:yo.label)||X),1)],2)]}),_:1},8,["modelValue","onEnd"])])]),Y("tbody",null,[(ht(!0),bt(Dr,null,da(Z.leads,(X,$n)=>(ht(),bt("tr",{key:$n},[Y("td",wJ,[qs(Y("input",{type:"checkbox","onUpdate:modelValue":I[76]||(I[76]=yo=>Z.selectedLeads=yo),value:X.id},null,8,EJ),[[Jj,Z.selectedLeads]])]),(ht(!0),bt(Dr,null,da(Z.selectedColumns,(yo,ar)=>(ht(),bt("td",{key:yo,class:or({"scroll-column":ar>=6})},[yo==="first_name"?(ht(),dK(_c,{key:0,to:"/update-profile/"+X.id,class:"lead-name-link"},{default:mK(()=>[mi(Mn(X[yo]||"N/A"),1)]),_:2},1032,["to"])):(ht(),bt(Dr,{key:1},[mi(Mn(X[yo]||"N/A"),1)],64))],2))),128))]))),128))])])])]),Z.filteredLeads.length===0?(ht(),bt("div",kJ,"No leads available.")):no("",!0),Z.toast.message?(ht(),bt("div",{key:1,class:or(`toast ${Z.toast.type}`)},[mi(Mn(Z.toast.message)+" ",1),Y("button",{onClick:I[77]||(I[77]=X=>Z.toast.message=""),class:"toast-close-button"},"X")],2)):no("",!0),Y("div",TJ,[Y("button",{onClick:I[78]||(I[78]=X=>Z.changePage(Z.currentPage-1)),disabled:Z.currentPage===1},"Previous",8,_J),Y("span",null,"Page "+Mn(Z.currentPage)+" of "+Mn(Z.totalPages),1),Y("button",{onClick:I[79]||(I[79]=X=>Z.changePage(Z.currentPage+1)),disabled:Z.currentPage===Z.totalPages},"Next",8,AJ)])])]),Z.showColumnsModal?(ht(),bt("div",OJ,[Y("div",DJ,[Y("span",{class:"columns-modal-close",onClick:I[80]||(I[80]=(...X)=>Z.closeColumnsModal&&Z.closeColumnsModal(...X))},"√ó"),I[140]||(I[140]=Y("h3",null,"Select and Arrange Columns",-1)),Y("ul",MJ,[(ht(!0),bt(Dr,null,da(Z.availableColumns,(X,$n)=>(ht(),bt("li",{key:$n,class:"columns-modal-item"},[Y("input",{type:"checkbox",checked:Z.selectedColumns.includes($n),onChange:yo=>Z.toggleColumnSelection($n),disabled:X.disabled},null,40,NJ),mi(" "+Mn(X.label),1)]))),128))]),Z.selectedColumns.length===0?(ht(),bt("p",RJ," ‚ö†Ô∏è Please select at least one column! ")):no("",!0),Y("button",{class:"columns-modal-update-btn",onClick:I[81]||(I[81]=(...X)=>Z.updateColumns&&Z.updateColumns(...X))},"Save"),Y("button",{class:"columns-modal-update-btn cancel-btn",onClick:I[82]||(I[82]=(...X)=>Z.closeColumnsModal&&Z.closeColumnsModal(...X))},"Cancel")])])):no("",!0)],64)}const HJ=Qj(NY,[["render",BJ]]);export{HJ as default};
