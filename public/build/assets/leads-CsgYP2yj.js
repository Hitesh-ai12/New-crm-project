/* empty css              */import{a as pu}from"./axios-CdtiCRuU.js";import{S as qa}from"./sweetalert2.all-B3MH3p00.js";import{g as fK}from"./_commonjsHelpers-Cpj98o6Y.js";import{_ as gK,r as Cn,b as zj,w as Kq,R as hK,l as Ut,j as te,n as Ka,k as Un,F as Vi,Y as zi,X as yo,L as Gs,bn as wl,Z as fg,h as Yq,bo as pK,aG as bK,P as wm,au as Xq,e as Jq,o as Zt,bp as Qq,g as vK}from"./main-Dr3_htUk.js";var eK={exports:{}};(function(Tc){(function(){var H=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},Ui=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},j=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},Ya=function(e,n){return Aa(function(o,r){return e.eq(n(o),n(r))})},Aa=function(e){return{eq:e}},oo=Aa(function(e,n){return e===n}),on=oo,X=function(e){return Aa(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},xs=function(e,n){return Ya(X(e),function(o){return j(o,n)})},ho=function(e){return Aa(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!xs(on).eq(r,c))return!1;for(var l=r.length,d=0;d<l;d++){var g=r[d];if(!e.eq(n[g],o[g]))return!1}return!0})},Pr=Aa(function(e,n){if(e===n)return!0;var o=H(e),r=H(n);return o!==r?!1:Ui(o)?e===n:o==="array"?X(Pr).eq(e,n):o==="object"?ho(Pr).eq(e,n):!1});const kr=Object.getPrototypeOf,Tr=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},ni=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Tr(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},so=e=>n=>ni(n)===e,Ms=e=>n=>typeof n===e,qs=e=>n=>e===n,xt=(e,n)=>Ot(e)&&Tr(e,n,(o,r)=>kr(o)===r),re=so("string"),Ot=so("object"),la=e=>xt(e,Object),Kn=so("array"),q=qs(null),$t=Ms("boolean"),uo=qs(void 0),dn=e=>e==null,Ae=e=>!dn(e),Ht=Ms("function"),Po=Ms("number"),Sn=(e,n)=>{if(Kn(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},nt=()=>{},S=(e,n)=>(...o)=>e(n.apply(null,o)),Xa=(e,n)=>o=>e(n(o)),Ie=e=>()=>e,Yn=e=>e,oi=(e,n)=>e===n;function Ye(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const wn=e=>n=>!e(n),as=e=>()=>{throw new Error(e)},Ja=e=>e(),_c=e=>{e()},we=Ie(!1),Ue=Ie(!0);class D{constructor(n,o){this.tag=n,this.value=o}static some(n){return new D(!0,n)}static none(){return D.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?D.some(n(this.value)):D.none()}bind(n){return this.tag?n(this.value):D.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:D.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Ae(n)?D.some(n):D.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}D.singletonNone=new D(!1);const Zi=Array.prototype.slice,Hn=Array.prototype.indexOf,Bo=Array.prototype.push,Zo=(e,n)=>Hn.call(e,n),Em=(e,n)=>{const o=Zo(e,n);return o===-1?D.none():D.some(o)},kt=(e,n)=>Zo(e,n)>-1,kn=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},Dt=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const l=e[c];r[c]=n(l,c)}return r},oe=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},Br=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},Rs=(e,n)=>{const o=[],r=[];for(let c=0,l=e.length;c<l;c++){const d=e[c];(n(d,c)?o:r).push(d)}return{pass:o,fail:r}},vt=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const l=e[r];n(l,r)&&o.push(l)}return o},ua=(e,n,o)=>(Br(e,(r,c)=>{o=n(o,r,c)}),o),cs=(e,n,o)=>(oe(e,(r,c)=>{o=n(o,r,c)}),o),El=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const l=e[r];if(n(l,r))return D.some(l);if(o(l,r))break}return D.none()},ro=(e,n)=>El(e,n,we),Ns=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return D.some(o)}return D.none()},si=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!Kn(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);Bo.apply(n,e[o])}return n},is=(e,n)=>si(Dt(e,n)),_o=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},ao=e=>{const n=Zi.call(e,0);return n.reverse(),n},Lr=(e,n)=>vt(e,o=>!kt(n,o)),Ao=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const l=e[r];o[String(l)]=n(l,r)}return o},Zn=(e,n)=>{const o=Zi.call(e,0);return o.sort(n),o},ri=(e,n)=>n>=0&&n<e.length?D.some(e[n]):D.none(),Qo=e=>ri(e,0),Ks=e=>ri(e,e.length-1),Rn=Ht(Array.from)?Array.from:e=>Zi.call(e),Ac=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return D.none()},ai=(e,n)=>{const o=[],r=Ht(n)?c=>kn(o,l=>n(l,c)):c=>kt(o,c);for(let c=0,l=e.length;c<l;c++){const d=e[c];r(d)||o.push(d)}return o},Wo=Object.keys,bu=Object.hasOwnProperty,He=(e,n)=>{const o=Wo(e);for(let r=0,c=o.length;r<c;r++){const l=o[r],d=e[l];n(d,l)}},sn=(e,n)=>_r(e,(o,r)=>({k:r,v:n(o,r)})),_r=(e,n)=>{const o={};return He(e,(r,c)=>{const l=n(r,c);o[l.k]=l.v}),o},Ps=e=>(n,o)=>{e[o]=n},kl=(e,n,o,r)=>{He(e,(c,l)=>{(n(c,l)?o:r)(c,l)})},Oa=(e,n)=>{const o={},r={};return kl(e,n,Ps(o),Ps(r)),{t:o,f:r}},Qa=(e,n)=>{const o={};return kl(e,n,Ps(o),nt),o},Da=(e,n)=>{const o=[];return He(e,(r,c)=>{o.push(n(r,c))}),o},vu=e=>Da(e,Yn),Bn=(e,n)=>ht(e,n)?D.from(e[n]):D.none(),ht=(e,n)=>bu.call(e,n),da=(e,n)=>ht(e,n)&&e[n]!==void 0&&e[n]!==null,Wi=(e,n,o=Pr)=>ho(o).eq(e,n),yu=e=>{const n={};return oe(e,o=>{n[o]={}}),Wo(n)},id=e=>e.length!==void 0,Ar=Array.isArray,Bs=e=>{if(Ar(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},ji=(e,n,o)=>{if(!e)return!1;if(o=o||e,id(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(ht(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},ec=(e,n)=>{const o=[];return ji(e,(r,c)=>{o.push(n(r,c,e))}),o},Tl=(e,n)=>{const o=[];return ji(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},Cu=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},Or=(e,n,o,r)=>{let c=uo(o)?e[0]:o;for(let l=0;l<e.length;l++)c=n.call(r,c,e[l],l);return c},Gi=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},ma=e=>e[e.length-1],Ys=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},Su=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,l=e.isiOS()&&!c,d=e.isiOS()||e.isAndroid(),g=d||r("(pointer:coarse)"),p=c||!l&&d&&r("(min-device-width:768px)"),y=l||d&&!p,E=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,T=!y&&!p&&!E;return{isiPad:Ie(c),isiPhone:Ie(l),isTablet:Ie(p),isPhone:Ie(y),isTouch:Ie(g),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Ie(E),isDesktop:Ie(T)}},km=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},ld=(e,n)=>{const o=km(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return Be(r(1),r(2))},Oc=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?ud():ld(e,o)},ud=()=>Be(0,0),Be=(e,n)=>({major:e,minor:n}),Dc={nu:Be,detect:Oc,unknown:ud},_l=(e,n)=>Ac(n.brands,o=>{const r=o.brand.toLowerCase();return ro(e,c=>{var l;return r===((l=c.brand)===null||l===void 0?void 0:l.toLowerCase())}).map(c=>({current:c.name,version:Dc.nu(parseInt(o.version,10),0)}))}),dd=(e,n)=>{const o=String(n).toLowerCase();return ro(e,r=>r.search(o))},Tm=(e,n)=>dd(e,n).map(o=>{const r=Dc.detect(o.versionRegexes,n);return{current:o.name,version:r}}),gg=(e,n)=>dd(e,n).map(o=>{const r=Dc.detect(o.versionRegexes,n);return{current:o.name,version:r}}),qi=(e,n)=>e.substring(n),ir=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,_m=(e,n)=>Se(e,n)?qi(e,n.length):e,jo=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?uo(r)?!0:c+n.length<=r:!1},Se=(e,n)=>ir(e,n,0),Wt=(e,n)=>ir(e,n,e.length-n.length),Lo=e=>n=>n.replace(e,""),Qn=Lo(/^\s+|\s+$/g),md=Lo(/^\s+/g),Mc=Lo(/\s+$/g),ls=e=>e.length>0,Go=e=>!ls(e),us=(e,n)=>n<=0?"":new Array(n+1).join(e),fd=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?D.none():D.some(o)},gd=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Qr=e=>n=>jo(n,e),Al=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>jo(e,"edge/")&&jo(e,"chrome")&&jo(e,"safari")&&jo(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,gd],search:e=>jo(e,"chrome")&&!jo(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>jo(e,"msie")||jo(e,"trident")},{name:"Opera",versionRegexes:[gd,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Qr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Qr("firefox")},{name:"Safari",versionRegexes:[gd,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(jo(e,"safari")||jo(e,"mobile/"))&&jo(e,"applewebkit")}],hg=[{name:"Windows",search:Qr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>jo(e,"iphone")||jo(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Qr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Qr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Qr("linux"),versionRegexes:[]},{name:"Solaris",search:Qr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Qr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Qr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ci={browsers:Ie(Al),oses:Ie(hg)},Am="Edge",Dn="Chromium",Ki="IE",fa="Opera",hd="Firefox",tc="Safari",Ol=()=>lr({current:void 0,version:Dc.unknown()}),lr=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(Am),isChromium:r(Dn),isIE:r(Ki),isOpera:r(fa),isFirefox:r(hd),isSafari:r(tc)}},pg={unknown:Ol,nu:lr,edge:Ie(Am),chromium:Ie(Dn),ie:Ie(Ki),opera:Ie(fa),firefox:Ie(hd),safari:Ie(tc)},ga="Windows",Om="iOS",pd="Android",Dm="Linux",ds="macOS",nc="Solaris",Dl="FreeBSD",bd="ChromeOS",xu=()=>vd({current:void 0,version:Dc.unknown()}),vd=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(ga),isiOS:r(Om),isAndroid:r(pd),isMacOS:r(ds),isLinux:r(Dm),isSolaris:r(nc),isFreeBSD:r(Dl),isChromeOS:r(bd)}},Xs={unknown:xu,nu:vd,windows:Ie(ga),ios:Ie(Om),android:Ie(pd),linux:Ie(Dm),macos:Ie(ds),solaris:Ie(nc),freebsd:Ie(Dl),chromeos:Ie(bd)},yd={detect:(e,n,o)=>{const r=ci.browsers(),c=ci.oses(),l=n.bind(p=>_l(r,p)).orThunk(()=>Tm(r,e)).fold(pg.unknown,pg.nu),d=gg(c,e).fold(Xs.unknown,Xs.nu),g=Su(d,l,e,o);return{browser:l,os:d,deviceType:g}}},Cd=e=>window.matchMedia(e).matches;let Mm=Ys(()=>yd.detect(window.navigator.userAgent,D.from(window.navigator.userAgentData),Cd));const M=()=>Mm(),z=window.navigator.userAgent,K=M(),ge=K.browser,Re=K.os,ot=K.deviceType,Ve=z.indexOf("Windows Phone")!==-1,Tt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:ge.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!ge.isIE(),windowsPhone:Ve,browser:{current:ge.current,version:ge.version,isChromium:ge.isChromium,isEdge:ge.isEdge,isFirefox:ge.isFirefox,isIE:ge.isIE,isOpera:ge.isOpera,isSafari:ge.isSafari},os:{current:Re.current,version:Re.version,isAndroid:Re.isAndroid,isChromeOS:Re.isChromeOS,isFreeBSD:Re.isFreeBSD,isiOS:Re.isiOS,isLinux:Re.isLinux,isMacOS:Re.isMacOS,isSolaris:Re.isSolaris,isWindows:Re.isWindows},deviceType:{isDesktop:ot.isDesktop,isiPad:ot.isiPad,isiPhone:ot.isiPhone,isPhone:ot.isPhone,isTablet:ot.isTablet,isTouch:ot.isTouch,isWebView:ot.isWebView}},Vt=/^\s*|\s*$/g,gn=e=>dn(e)?"":(""+e).replace(Vt,""),Io=(e,n)=>n?n==="array"&&Ar(e)?!0:typeof e===n:e!==void 0,Vn=(e,n,o={})=>{const r=re(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},xp=ht,Rm=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(ht(r,c)){const l=r[c];l!==void 0&&(e[c]=l)}}return e},wp=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),ji(e,(c,l)=>n.call(r,c,l,o)===!1?!1:(wp(c,n,o,r),!0)))},Ee={trim:gn,isArray:Ar,is:Io,toArray:Bs,makeMap:Vn,each:ji,map:ec,grep:Tl,inArray:Cu,hasOwn:xp,extend:Rm,walk:wp,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>Kn(e)?e:e===""?[]:ec(e.split(n||","),gn),_addCacheSuffix:e=>{const n=Tt.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},wu=(e,n,o=oi)=>e.exists(r=>o(r,n)),Fo=(e,n,o=oi)=>Ls(e,n,o).getOr(e.isNone()&&n.isNone()),Ep=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Ls=(e,n,o)=>e.isSome()&&n.isSome()?D.some(o(e.getOrDie(),n.getOrDie())):D.none(),rn=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?D.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):D.none(),Yi=(e,n)=>e?D.some(n):D.none(),nb=typeof window<"u"?window:Function("return this;")(),kp=(e,n)=>{let o=n??nb;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},es=(e,n)=>{const o=e.split(".");return kp(o,n)},Rl=(e,n)=>es(e,n),qC=(e,n)=>{const o=Rl(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},ob=Object.getPrototypeOf,eo=e=>qC("HTMLElement",e),KC=e=>{const n=es("ownerDocument.defaultView",e);return Ot(e)&&(eo(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(ob(e).constructor.name))},Nl=8,Ma=9,Rc=11,Xi=1,sb=3,Ft=e=>e.dom.nodeName.toLowerCase(),Eu=e=>e.dom.nodeType,vg=e=>n=>Eu(n)===e,Pl=e=>Eu(e)===Nl||Ft(e)==="#comment",Nm=e=>ha(e)&&KC(e.dom),ha=vg(Xi),Ir=vg(sb),YC=vg(Ma),rb=vg(Rc),Sd=e=>n=>ha(n)&&Ft(n)===e,xd=(e,n,o)=>{if(re(o)||$t(o)||Po(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},Is=(e,n,o)=>{xd(e.dom,n,o)},li=(e,n)=>{const o=e.dom;He(n,(r,c)=>{xd(o,c,r)})},ea=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Ji=(e,n)=>D.from(ea(e,n)),ku=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Eo=(e,n)=>{e.dom.removeAttribute(n)},XC=e=>{const n=e.dom.attributes;return n==null||n.length===0},ab=e=>cs(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),yg=(e,n)=>{const o=ea(e,n);return o===void 0||o===""?[]:o.split(" ")},Tp=(e,n,o)=>{const c=yg(e,n).concat([o]);return Is(e,n,c.join(" ")),!0},cb=(e,n,o)=>{const r=vt(yg(e,n),c=>c!==o);return r.length>0?Is(e,n,r.join(" ")):Eo(e,n),!1},Tu=e=>e.dom.classList!==void 0,_p=e=>yg(e,"class"),wd=(e,n)=>Tp(e,"class",n),Ap=(e,n)=>cb(e,"class",n),JC=(e,n)=>kt(_p(e),n)?Ap(e,n):wd(e,n),_u=(e,n)=>{Tu(e)?e.dom.classList.add(n):wd(e,n)},Op=e=>{(Tu(e)?e.dom.classList:_p(e)).length===0&&Eo(e,"class")},Ed=(e,n)=>{Tu(e)?e.dom.classList.remove(n):Ap(e,n),Op(e)},ib=(e,n)=>{const o=Tu(e)?e.dom.classList.toggle(n):JC(e,n);return Op(e),o},Cg=(e,n)=>Tu(e)&&e.dom.classList.contains(n),lb=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return Bl(r.childNodes[0])},Sg=(e,n)=>{const r=(n||document).createElement(e);return Bl(r)},Dp=(e,n)=>{const r=(n||document).createTextNode(e);return Bl(r)},Bl=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},U={fromHtml:lb,fromTag:Sg,fromText:Dp,fromDom:Bl,fromPoint:(e,n,o)=>D.from(e.dom.elementFromPoint(n,o)).map(Bl)},Pm=(e,n)=>{const o=[],r=l=>(o.push(l),n(l));let c=n(e);do c=c.bind(r);while(c.isSome());return o},oc=(e,n)=>{const o=e.dom;if(o.nodeType!==Xi)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},QC=e=>e.nodeType!==Xi&&e.nodeType!==Ma&&e.nodeType!==Rc||e.childElementCount===0,eS=(e,n)=>{const o=n===void 0?document:n.dom;return QC(o)?[]:Dt(o.querySelectorAll(e),U.fromDom)},kd=(e,n)=>{const o=n===void 0?document:n.dom;return QC(o)?D.none():D.from(o.querySelector(e)).map(U.fromDom)},xn=(e,n)=>e.dom===n.dom,$o=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Au=e=>U.fromDom(e.dom.ownerDocument),Qi=e=>YC(e)?e:Au(e),ub=e=>U.fromDom(Qi(e).dom.documentElement),Td=e=>U.fromDom(Qi(e).dom.defaultView),Fr=e=>D.from(e.dom.parentNode).map(U.fromDom),wg=e=>D.from(e.dom.parentElement).map(U.fromDom),Bm=(e,n)=>{const o=Ht(n)?n:we;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const l=r.parentNode,d=U.fromDom(l);if(c.push(d),o(d)===!0)break;r=l}return c},Ou=e=>{const n=o=>vt(o,r=>!xn(e,r));return Fr(e).map(Js).map(n).getOr([])},Ll=e=>D.from(e.dom.previousSibling).map(U.fromDom),Lm=e=>D.from(e.dom.nextSibling).map(U.fromDom),Ra=e=>ao(Pm(e,Ll)),Eg=e=>Pm(e,Lm),Js=e=>Dt(e.dom.childNodes,U.fromDom),Il=(e,n)=>{const o=e.dom.childNodes;return D.from(o[n]).map(U.fromDom)},Nc=e=>Il(e,0),Dr=e=>Il(e,e.dom.childNodes.length-1),Du=e=>e.dom.childNodes.length,tS=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return U.fromDom(n)},kg=e=>rb(e)&&Ae(e.dom.host),ui=e=>U.fromDom(e.dom.getRootNode()),_d=e=>kg(e)?e:tS(Qi(e)),db=e=>kg(e)?e:U.fromDom(Qi(e).dom.body),Mp=e=>{const n=ui(e);return kg(n)?D.some(n):D.none()},nS=e=>U.fromDom(e.dom.host),oS=e=>{if(Ae(e.target)){const n=U.fromDom(e.target);if(ha(n)&&mb(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Qo(o)}}return D.from(e.target)},mb=e=>Ae(e.dom.shadowRoot),el=e=>{const n=Ir(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Mp(U.fromDom(n)).fold(()=>o.body.contains(n),Xa(el,nS))};var Rp=(e,n,o,r,c)=>e(o,r)?D.some(o):Ht(c)&&c(o)?D.none():n(o,r,c);const tl=(e,n,o)=>{let r=e.dom;const c=Ht(o)?o:we;for(;r.parentNode;){r=r.parentNode;const l=U.fromDom(r);if(n(l))return D.some(l);if(c(l))break}return D.none()},Oo=(e,n,o)=>Rp((c,l)=>l(c),tl,e,n,o),ms=(e,n)=>{const o=e.dom;return o.parentNode?nl(U.fromDom(o.parentNode),r=>!xn(e,r)&&n(r)):D.none()},nl=(e,n)=>{const o=c=>n(U.fromDom(c));return ro(e.dom.childNodes,o).map(U.fromDom)},Im=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const l=U.fromDom(r.childNodes[c]);if(n(l))return D.some(l);const d=o(r.childNodes[c]);if(d.isSome())return d}return D.none()};return o(e.dom)},Fm=(e,n,o)=>tl(e,r=>oc(r,n),o),ws=(e,n)=>kd(n,e),at=(e,n,o)=>Rp((c,l)=>oc(c,l),Fm,e,n,o),Np=e=>at(e,"[contenteditable]"),Mu=(e,n=!1)=>el(e)?e.dom.isContentEditable:Np(e).fold(Ie(n),o=>Ad(o)==="true"),Ad=e=>e.dom.contentEditable,Nn=(e,n)=>{e.dom.contentEditable=n?"true":"false"},$m=e=>e.style!==void 0&&Ht(e.style.getPropertyValue),Hm=(e,n,o)=>{if(!re(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);$m(e)&&e.style.setProperty(n,o)},fb=(e,n)=>{$m(e)&&e.style.removeProperty(n)},sS=(e,n,o)=>{const r=e.dom;Hm(r,n,o)},jt=(e,n)=>{const o=e.dom;He(n,(r,c)=>{Hm(o,c,r)})},ts=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!el(e)?Od(o,n):c},Od=(e,n)=>$m(e)?e.style.getPropertyValue(n):"",Tg=(e,n)=>{const o=e.dom,r=Od(o,n);return D.from(r).filter(c=>c.length>0)},Pp=e=>{const n={},o=e.dom;if($m(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},gb=(e,n)=>{const o=e.dom;fb(o,n),wu(Ji(e,"style").map(Qn),"")&&Eo(e,"style")},rS=e=>e.dom.offsetWidth,ta=(e,n)=>{Fr(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},di=(e,n)=>{Lm(e).fold(()=>{Fr(e).each(c=>{qo(c,n)})},r=>{ta(r,n)})},_g=(e,n)=>{Nc(e).fold(()=>{qo(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},qo=(e,n)=>{e.dom.appendChild(n.dom)},hb=(e,n)=>{ta(e,n),qo(n,e)},Vo=(e,n)=>{oe(n,(o,r)=>{const c=r===0?e:n[r-1];di(c,o)})},Fl=(e,n)=>{oe(n,o=>{qo(e,o)})},Ru=e=>{e.dom.textContent="",oe(Js(e),n=>{Xn(n)})},Xn=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},$l=e=>{const n=Js(e);n.length>0&&Vo(e,n),Xn(e)},aS=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Js(U.fromDom(r))},Ag=e=>Dt(e,U.fromDom),Co=e=>e.dom.innerHTML,Dd=(e,n)=>{const r=Au(e).dom,c=U.fromDom(r.createDocumentFragment()),l=aS(n,r);Fl(c,l),Ru(e),qo(e,c)},Pc=e=>{const n=U.fromTag("div"),o=U.fromDom(e.dom.cloneNode(!0));return qo(n,o),Co(n)},Og=(e,n,o,r,c,l,d)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:l,raw:d}),Dg=e=>{const n=U.fromDom(oS(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=S(r,o);return Og(n,e.clientX,e.clientY,o,r,c,e)},Bp=(e,n)=>o=>{e(o)&&n(Dg(o))},v=(e,n,o,r,c)=>{const l=Bp(o,r);return e.dom.addEventListener(n,l,c),{unbind:Ye(O,e,n,l,c)}},w=(e,n,o,r)=>v(e,n,o,r,!1),O=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},V=(e,n)=>({left:e,top:n,translate:(r,c)=>V(e+r,n+c)}),W=V,ke=e=>{const n=e.getBoundingClientRect();return W(n.left,n.top)},pt=(e,n)=>e!==void 0?e:n!==void 0?n:0,It=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return W(o.offsetLeft,o.offsetTop);const l=pt(r==null?void 0:r.pageYOffset,c.scrollTop),d=pt(r==null?void 0:r.pageXOffset,c.scrollLeft),g=pt(c.clientTop,o.clientTop),p=pt(c.clientLeft,o.clientLeft);return Bt(e).translate(d-p,l-g)},Bt=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?W(r.offsetLeft,r.offsetTop):el(e)?ke(n):W(0,0)},ft=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return W(o,r)},po=(e,n,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,n)},Es=(e,n)=>{M().browser.isSafari()&&Ht(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},sc=e=>{const n=e===void 0?window:e;return M().browser.isFirefox()?D.none():D.from(n.visualViewport)},Hl=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),cT=e=>{const n=e===void 0?window:e,o=n.document,r=ft(U.fromDom(o));return sc(n).fold(()=>{const c=n.document.documentElement,l=c.clientWidth,d=c.clientHeight;return Hl(r.left,r.top,l,d)},c=>Hl(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},Mg=(e,n)=>vt(Js(e),n),cS=(e,n)=>{let o=[];return oe(Js(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(cS(r,n))}),o},$r=(e,n)=>eS(n,e),iS=(e,n,o)=>tl(e,n,o).isSome(),rP=(e,n)=>ms(e,n).isSome(),iT=(e,n)=>Im(e,n).isSome();class Qs{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let l=n[r];if(l)return l;for(let d=n.parentNode;d&&d!==this.rootNode;d=d.parentNode)if(l=d[r],l)return l}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let l=r.lastChild;l;l=l.lastChild)if(!l.lastChild)return l}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const Lp="\uFEFF",ks=" ",lS=e=>e===Lp,rc=e=>e.replace(/\uFEFF/g,""),Et=/^[ \t\r\n]*$/,Bc=e=>Et.test(e),pb=e=>{for(const n of e)if(!lS(n))return!1;return!0},aP=e=>" \f	\v".indexOf(e)!==-1,lT=e=>e===`
`||e==="\r",bb=(e,n)=>n<e.length&&n>=0?lT(e[n]):!1,mi=(e,n=4,o=!0,r=!0)=>{const c=us(" ",n),l=e.replace(/\t/g,c);return cs(l,(g,p)=>aP(p)||p===ks?g.pcIsSpace||g.str===""&&o||g.str.length===l.length-1&&r||bb(l,g.str.length+1)?{pcIsSpace:!1,str:g.str+ks}:{pcIsSpace:!0,str:g.str+" "}:{pcIsSpace:lT(p),str:g.str+p},{pcIsSpace:!1,str:""}).str},Vl=e=>n=>!!n&&n.nodeType===e,Vm=e=>!!e&&!Object.getPrototypeOf(e),Ze=Vl(1),fi=e=>Ze(e)&&Nm(U.fromDom(e)),uS=e=>Ze(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Rg=e=>{const n=e.toLowerCase();return o=>Ae(o)&&o.nodeName.toLowerCase()===n},ol=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return kt(n,r)}return!1}},vb=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Ze(r)){const c=r.ownerDocument.defaultView;if(c)for(let l=0;l<o.length;l++){const d=c.getComputedStyle(r,null);if((d?d.getPropertyValue(e):null)===o[l])return!0}}return!1}},Ng=e=>n=>Ze(n)&&n.hasAttribute(e),zm=e=>Ze(e)&&e.hasAttribute("data-mce-bogus"),Ip=e=>Ze(e)&&e.getAttribute("data-mce-bogus")==="all",sl=e=>Ze(e)&&e.tagName==="TABLE",uT=e=>n=>!!(fi(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),ko=ol(["textarea","input"]),Te=Vl(3),pa=Vl(4),Pg=Vl(7),Ts=Vl(8),Bg=Vl(9),Fs=Vl(11),An=Rg("br"),yb=Rg("img"),ve=uT("true"),Tn=uT("false"),Cb=ol(["td","th"]),$s=ol(["td","th","caption"]),er=ol(["video","audio","object","embed"]),gi=Rg("li"),dS=Rg("details"),Md=Rg("summary"),mS={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},Na=(e,n,o)=>{const r=U.fromDom(n),c=U.fromDom(e),l=o.getWhitespaceElements();return iS(c,g=>ht(l,Ft(g)),Ye(xn,r))},En=e=>Ze(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),zl=(e,n)=>Ze(e)&&ht(n.getNonEmptyElements(),e.nodeName),Fp=Ng("data-mce-bookmark"),Ko=e=>wg(U.fromDom(e)).exists(n=>!Mu(n)),dT=(e,n,o)=>Bc(e.data)&&!Na(e,n,o),Rd=(e,n,o,r)=>Te(e)&&!dT(e,n,o)&&(!r.includeZwsp||!pb(e.data)),Sb=(e,n,o,r)=>Ht(r.isContent)&&r.isContent(n)||zl(n,e)||Fp(n)||En(n)||Rd(n,o,e,r)||Tn(n)||ve(n)&&Ko(n),Hs=(e,n,o)=>{const r={...mS,...o};if(r.checkRootAsContent&&Sb(e,n,n,r))return!1;let c=n.firstChild,l=0;if(!c)return!0;const d=new Qs(c,n);do{if(r.skipBogus&&Ze(c)){const g=c.getAttribute("data-mce-bogus");if(g){c=d.next(g==="all");continue}}if(Ts(c)){c=d.next(!0);continue}if(An(c)){l++,c=d.next();continue}if(Sb(e,c,n,r))return!1;c=d.next()}while(c);return l<=1},Hr=(e,n,o)=>Hs(e,n.dom,{checkRootAsContent:!0,...o}),se=(e,n,o)=>Sb(e,n,n,{includeZwsp:mS.includeZwsp,...o}),mo=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},fS=e=>{const n=mo(D.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(D.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:g=>{o(),n.set(D.some(g))}}},Do=e=>{const n=mo(D.none()),o=()=>n.get().each(g=>clearInterval(g));return{clear:()=>{o(),n.set(D.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:g=>{o(),n.set(D.some(setInterval(g,e)))}}},Vr=()=>{const e=fS(nt);return{...e,on:o=>e.get().each(o)}},ur=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},Ln=e=>ur(e)!=="html",gS=e=>Ln(e.nodeName),Nd=e=>ur(e.nodeName),hS=["svg","math"],Uj=()=>{const e=Vr(),n=()=>e.get().map(Nd).getOr("html");return{track:c=>(gS(c)?e.set(c):e.get().exists(l=>!l.contains(c))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},Pa="data-mce-block",cP=e=>vt(Wo(e),n=>!/[A-Z]/.test(n)),pS=e=>Dt(cP(e),n=>{const o=CSS.escape(n);return`${o}:`+Dt(hS,r=>`not(${r} ${o})`).join(":")}).join(","),mT=(e,n)=>Ae(n.querySelector(e))?(n.setAttribute(Pa,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Pa),!1),fT=(e,n)=>{const o=pS(e.getTransparentElements()),r=pS(e.getBlockElements());return vt(n.querySelectorAll(o),c=>mT(r,c))},gT=(e,n,o)=>{var r;const c=o?"lastChild":"firstChild";for(let l=n[c];l;l=l[c])if(Hs(e,l,{checkRootAsContent:!0})){(r=l.parentNode)===null||r===void 0||r.removeChild(l);return}},Um=(e,n,o)=>{const r=document.createRange(),c=n.parentNode;if(c){r.setStartBefore(n),r.setEndBefore(o);const l=r.extractContents();gT(e,l,!0),r.setStartAfter(o),r.setEndAfter(n);const d=r.extractContents();gT(e,d,!1),Hs(e,l,{checkRootAsContent:!0})||c.insertBefore(l,n),Hs(e,o,{checkRootAsContent:!0})||c.insertBefore(o,n),Hs(e,d,{checkRootAsContent:!0})||c.insertBefore(d,n),c.removeChild(n)}},Lg=(e,n,o)=>{const r=e.getBlockElements(),c=U.fromDom(n),l=g=>Ft(g)in r,d=g=>xn(g,c);oe(Ag(o),g=>{tl(g,l,d).each(p=>{const y=Mg(g,E=>l(E)&&!e.isValidChild(Ft(p),Ft(E)));if(y.length>0){const E=wg(p);oe(y,T=>{tl(T,l,d).each(_=>{Um(e,_.dom,T.dom)})}),E.each(T=>fT(e,T.dom))}})})},iP=(e,n,o)=>{oe([...o,...Zm(e,n)?[n]:[]],r=>oe($r(U.fromDom(r),r.nodeName.toLowerCase()),c=>{Fg(e,c.dom)&&$l(c)}))},bS=(e,n)=>{const o=fT(e,n);Lg(e,n,o),iP(e,n,o)},lP=(e,n)=>{if(wb(e,n)){const o=pS(e.getBlockElements());mT(o,n)}},hT=(e,n,o)=>{const r=l=>xn(l,U.fromDom(n)),c=Bm(U.fromDom(o),r);ri(c,c.length-2).filter(ha).fold(()=>bS(e,n),l=>bS(e,l.dom))},xb=e=>e.hasAttribute(Pa),Ig=(e,n)=>ht(e.getTransparentElements(),n),wb=(e,n)=>Ze(n)&&Ig(e,n.nodeName),Zm=(e,n)=>wb(e,n)&&xb(n),Fg=(e,n)=>wb(e,n)&&!xb(n),vS=(e,n)=>n.type===1&&Ig(e,n.name)&&re(n.attr(Pa)),uP=M().browser,pT=e=>ro(e,ha),dP=e=>uP.isFirefox()&&Ft(e)==="table"?pT(Js(e)).filter(n=>Ft(n)==="caption").bind(n=>pT(Eg(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,l=n.dom.offsetHeight;return r<=c?-l:0})).getOr(0):0,tr=(e,n)=>e.children&&kt(e.children,n),Nu=(e,n,o)=>{let r=0,c=0;const l=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&ts(U.fromDom(e),"position")==="static"){const g=n.getBoundingClientRect();return r=g.left+(l.documentElement.scrollLeft||e.scrollLeft)-l.documentElement.clientLeft,c=g.top+(l.documentElement.scrollTop||e.scrollTop)-l.documentElement.clientTop,{x:r,y:c}}let d=n;for(;d&&d!==o&&d.nodeType&&!tr(d,o);){const g=d;r+=g.offsetLeft||0,c+=g.offsetTop||0,d=g.offsetParent}for(d=n.parentNode;d&&d!==o&&d.nodeType&&!tr(d,o);)r-=d.scrollLeft||0,c-=d.scrollTop||0,d=d.parentNode;c+=dP(U.fromDom(n))}return{x:r,y:c}},$g=(e,n={})=>{let o=0;const r={},c=U.fromDom(e),l=Qi(c),d=Z=>{n.referrerPolicy=Z},g=Z=>{n.contentCssCors=Z},p=Z=>{qo(_d(c),Z)},y=Z=>{const Q=_d(c);ws(Q,"#"+Z).each(Xn)},E=Z=>Bn(r,Z).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),T=Z=>new Promise((Q,ee)=>{let ne;const ye=Ee._addCacheSuffix(Z),Oe=E(ye);r[ye]=Oe,Oe.count++;const je=(qe,ut)=>{oe(qe,_c),Oe.status=ut,Oe.passed=[],Oe.failed=[],ne&&(ne.onload=null,ne.onerror=null,ne=null)},he=()=>je(Oe.passed,2),ue=()=>je(Oe.failed,3);if(Q&&Oe.passed.push(Q),ee&&Oe.failed.push(ee),Oe.status===1)return;if(Oe.status===2){he();return}if(Oe.status===3){ue();return}Oe.status=1;const Ce=U.fromTag("link",l.dom);li(Ce,{rel:"stylesheet",type:"text/css",id:Oe.id}),n.contentCssCors&&Is(Ce,"crossOrigin","anonymous"),n.referrerPolicy&&Is(Ce,"referrerpolicy",n.referrerPolicy),ne=Ce.dom,ne.onload=he,ne.onerror=ue,p(Ce),Is(Ce,"href",ye)}),_=(Z,Q)=>{const ee=E(Z);r[Z]=ee,ee.count++;const ne=U.fromTag("style",l.dom);li(ne,{rel:"stylesheet",type:"text/css",id:ee.id,"data-mce-key":Z}),ne.dom.innerHTML=Q,p(ne)},R=Z=>Promise.allSettled(Dt(Z,ee=>T(ee).then(Ie(ee)))).then(ee=>{const ne=Rs(ee,ye=>ye.status==="fulfilled");return ne.fail.length>0?Promise.reject(Dt(ne.fail,ye=>ye.reason)):Dt(ne.pass,ye=>ye.value)}),B=Z=>{const Q=Ee._addCacheSuffix(Z);Bn(r,Q).each(ee=>{--ee.count===0&&(delete r[Q],y(ee.id))})};return{load:T,loadRawCss:_,loadAll:R,unload:B,unloadRawCss:Z=>{Bn(r,Z).each(Q=>{--Q.count===0&&(delete r[Z],y(Q.id))})},unloadAll:Z=>{oe(Z,Q=>{B(Q)})},_setReferrerPolicy:d,_setContentCssCors:g}},yS=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const l=ui(o).dom;return D.from(e.get(l)).getOrThunk(()=>{const d=$g(l,r);return e.set(l,d),d})}}})(),ac=e=>e.nodeName.toLowerCase()==="span",$p=(e,n)=>Ae(e)&&(se(n,e)||n.isInline(e.nodeName.toLowerCase())),Eb=(e,n,o)=>{const r=new Qs(e,n).prev(!1),c=new Qs(e,n).next(!1),l=uo(r)||$p(r,o),d=uo(c)||$p(c,o);return l&&d},kb=e=>ac(e)&&e.getAttribute("data-mce-type")==="bookmark",Ul=(e,n,o)=>Te(e)&&e.data.length>0&&Eb(e,n,o),rl=e=>Ze(e)?e.childNodes.length>0:!1,bT=e=>Fs(e)||Bg(e),Lc=(e,n,o,r)=>{var c;const l=r||n;if(Ze(n)&&kb(n))return n;const d=n.childNodes;for(let g=d.length-1;g>=0;g--)Lc(e,d[g],o,l);if(Ze(n)){const g=n.childNodes;g.length===1&&kb(g[0])&&((c=n.parentNode)===null||c===void 0||c.insertBefore(g[0],n))}return!bT(n)&&!se(o,n)&&!rl(n)&&!Ul(n,l,o)&&e.remove(n),n},mP=Ee.makeMap,hi=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Pu=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Wm=/[<>&\"\']/g,fP=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Hp={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},jm={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},gP={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Yo=e=>{const n=U.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},vT=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const l=String.fromCharCode(parseInt(r[c],n));if(!jm[l]){const d="&"+r[c+1]+";";o[l]=d,o[d]=l}}return o}else return},Zl=vT("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Vg=(e,n)=>e.replace(n?hi:Pu,o=>jm[o]||o),CS=e=>(""+e).replace(Wm,n=>jm[n]||n),Pd=(e,n)=>e.replace(n?hi:Pu,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":jm[o]||"&#"+o.charCodeAt(0)+";"),ba=(e,n,o)=>{const r=o||Zl;return e.replace(n?hi:Pu,c=>jm[c]||r[c]||c)},Gm={encodeRaw:Vg,encodeAllRaw:CS,encodeNumeric:Pd,encodeNamed:ba,getEncodeFunc:(e,n)=>{const o=vT(n)||Zl,r=(d,g)=>d.replace(g?hi:Pu,p=>jm[p]!==void 0?jm[p]:o[p]!==void 0?o[p]:p.length>1?"&#"+((p.charCodeAt(0)-55296)*1024+(p.charCodeAt(1)-56320)+65536)+";":"&#"+p.charCodeAt(0)+";"),c=(d,g)=>ba(d,g,o),l=mP(e.replace(/\+/g,","));return l.named&&l.numeric?r:l.named?n?c:ba:l.numeric?Pd:Vg},decode:e=>e.replace(fP,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):Hp[o]||String.fromCharCode(o)):gP[n]||Zl[n]||Yo(n))},Vs=(e,n)=>(e=Ee.trim(e),e?e.split(n||" "):[]),Ab=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Ob=e=>Ot(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",hP=e=>{const n=o=>Kn(o)?Dt(o,n):Ob(o)?new RegExp(o.source,o.flags):Ot(o)?sn(o,n):o;return n(e)},pP=e=>{const n=/^(~)?(.+)$/;return is(Vs(e,","),o=>{const r=n.exec(o);if(r){const l=r[1]==="~"?"span":"div",d=r[2];return[{cloneName:l,name:d}]}else return[]})},Db=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),zg=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},Ic=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=zg(e),c=l=>Object.freeze(l.split(" "));return Object.freeze({blockContent:c(n),phrasingContent:c(o),flowContent:c(r)})},Wl={html4:Ys(()=>Ic("html4")),html5:Ys(()=>Ic("html5")),"html5-strict":Ys(()=>Ic("html5-strict"))},Bd=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:c}=Wl[e]();return n==="blocks"?D.some(o):n==="phrasing"?D.some(r):n==="flow"?D.some(c):D.none()},yT=e=>{const n=Db(e),{phrasingContent:o,flowContent:r}=zg(e),c={},l=(p,y,E)=>{c[p]={attributes:Ao(y,Ie({})),attributesOrder:y,children:Ao(E,Ie({}))}},d=(p,y="",E="")=>{const T=Vs(E),_=Vs(p);let R=_.length;const B=[...n,...Vs(y)];for(;R--;)l(_[R],B.slice(),T)},g=(p,y)=>{const E=Vs(p),T=Vs(y);let _=E.length;for(;_--;){const R=c[E[_]];for(let B=0,P=T.length;B<P;B++)R.attributes[T[B]]={},R.attributesOrder.push(T[B])}};return e!=="html5-strict"&&(oe(Vs("acronym applet basefont big font strike tt"),E=>{d(E,"",o)}),oe(Vs("center dir isindex noframes"),E=>{d(E,"",r)})),d("html","manifest","head body"),d("head","","base command link meta noscript script style title"),d("title hr noscript br"),d("base","href target"),d("link","href rel media hreflang type sizes hreflang"),d("meta","name http-equiv content charset"),d("style","media type scoped"),d("script","src async defer type charset"),d("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),d("dd div","",r),d("address dt caption","",e==="html4"?o:r),d("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),d("blockquote","cite",r),d("ol","reversed start type","li"),d("ul","","li"),d("li","value",r),d("dl","","dt dd"),d("a","href target rel media hreflang type",e==="html4"?o:r),d("q","cite",o),d("ins del","cite datetime",r),d("img","src sizes srcset alt usemap ismap width height"),d("iframe","src name width height",r),d("embed","src type width height"),d("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),d("param","name value"),d("map","name",[r,"area"].join(" ")),d("area","alt coords shape href target rel media hreflang type"),d("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),d("colgroup","span","col"),d("col","span"),d("tbody thead tfoot","","tr"),d("tr","","td th"),d("td","colspan rowspan headers",r),d("th","colspan rowspan headers scope abbr",r),d("form","accept-charset action autocomplete enctype method name novalidate target",r),d("fieldset","disabled form name",[r,"legend"].join(" ")),d("label","form for",o),d("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),d("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),d("select","disabled form multiple name required size","option optgroup"),d("optgroup","disabled label","option"),d("option","disabled label selected value"),d("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),d("menu","type label",[r,"li"].join(" ")),d("noscript","",r),e!=="html4"&&(d("wbr"),d("ruby","",[o,"rt rp"].join(" ")),d("figcaption","",r),d("mark rt rp bdi","",o),d("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),d("canvas","width height",r),d("data","value",o),d("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),d("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),d("picture","","img source"),d("source","src srcset type media sizes"),d("track","kind src srclang label default"),d("datalist","",[o,"option"].join(" ")),d("article section nav aside main header footer","",r),d("hgroup","","h1 h2 h3 h4 h5 h6"),d("figure","",[r,"figcaption"].join(" ")),d("time","datetime",o),d("dialog","open",r),d("command","type label icon disabled checked radiogroup command"),d("output","for form name",o),d("progress","value max",o),d("meter","value min max low high optimum",o),d("details","open",[r,"summary"].join(" ")),d("keygen","autofocus challenge disabled form keytype name"),l("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(g("script","language xml:space"),g("style","xml:space"),g("object","declare classid code codebase codetype archive standby align border hspace vspace"),g("embed","align name hspace vspace"),g("param","valuetype type"),g("a","charset name rev shape coords"),g("br","clear"),g("applet","codebase archive code object alt name width height align hspace vspace"),g("img","name longdesc align border hspace vspace"),g("iframe","longdesc frameborder marginwidth marginheight scrolling align"),g("font basefont","size color face"),g("input","usemap align"),g("select"),g("textarea"),g("h1 h2 h3 h4 h5 h6 div p legend caption","align"),g("ul","type compact"),g("li","type"),g("ol dl menu dir","compact"),g("pre","width xml:space"),g("hr","align noshade size width"),g("isindex","prompt"),g("table","summary width frame rules cellspacing cellpadding align bgcolor"),g("col","width align char charoff valign"),g("colgroup","width align char charoff valign"),g("thead","align char charoff valign"),g("tr","align char charoff valign bgcolor"),g("th","axis align char charoff valign nowrap bgcolor width height"),g("form","accept"),g("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),g("tfoot","align char charoff valign"),g("tbody","align char charoff valign"),g("area","nohref"),g("body","background bgcolor text link vlink alink")),e!=="html4"&&(g("input button select textarea","autofocus"),g("input textarea","placeholder"),g("a","download"),g("link script img","crossorigin"),g("img","loading"),g("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&oe([c.video,c.audio],p=>{delete p.children.audio,delete p.children.video}),oe(Vs("a form meter progress dfn"),p=>{c[p]&&delete c[p].children[p]}),delete c.caption.children.table,delete c.script,c},Mb=e=>e==="-"?"remove":"add",Vp=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return D.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},CT=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return is(Vs(e,","),o=>{const r=n.exec(o);if(r){const c=r[1],l=c?Mb(c):"replace",d=r[2],g=is(Vs(r[3],"|"),p=>Vp(p).toArray());return[{operation:l,name:d,validChildren:g}]}else return[]})},ST=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:c,attributesOrder:l}=n;return oe(Vs(e,"|"),d=>{const g=o.exec(d);if(g){const p={},y=g[1],E=g[2].replace(/[\\:]:/g,":"),T=g[3],_=g[4];if(y==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(E),p.required=!0),y==="-"){delete c[E],l.splice(Ee.inArray(l,E),1);return}if(T&&(T==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:E,value:_}),p.defaultValue=_):T==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:E,value:_}),p.forcedValue=_):T==="<"&&(p.validValues=Ee.makeMap(_,"?"))),r.test(E)){const R=p;n.attributePatterns=n.attributePatterns||[],R.pattern=Ab(E),n.attributePatterns.push(R)}else c[E]||l.push(E),c[E]=p}})},xT=(e,n)=>{He(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},SS=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return is(Vs(n,","),r=>{const c=o.exec(r);if(c){const l=c[1],d=c[2],g=c[3],p=c[4],y=c[5],E={attributes:{},attributesOrder:[]};if(e.each(T=>xT(T,E)),l==="#"?E.paddEmpty=!0:l==="-"&&(E.removeEmpty=!0),p==="!"&&(E.removeEmptyAttrs=!0),y&&ST(y,E),g&&(E.outputName=d),d==="@")if(e.isNone())e=D.some(E);else return[];return[g?{name:d,element:E,aliasName:g}:{name:d,element:E}]}else return[]})},Ug={},Qt=Ee.makeMap,st=Ee.each,Ld=Ee.extend,Rb=Ee.explode,Nb=(e,n={})=>{const o=Qt(e," ",Qt(e.toUpperCase()," "));return Ld(o,n)},wT=e=>Nb("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Pb=(e,n)=>{if(e){const o={};return re(e)&&(e={"*":e}),st(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?Qt(r,/[, ]/):Rb(r,/[, ]/)}),o}else return},In=(e={})=>{var n;const o={},r={};let c=[];const l={},d={},g=(ct,cn,No)=>{const ss=e[ct];if(ss)return Qt(ss,/[, ]/,Qt(ss.toUpperCase(),/[, ]/));{let Ds=Ug[ct];return Ds||(Ds=Nb(cn,No),Ug[ct]=Ds),Ds}},p=(n=e.schema)!==null&&n!==void 0?n:"html5",y=yT(p);e.verify_html===!1&&(e.valid_elements="*[*]");const E=Pb(e.valid_styles),T=Pb(e.invalid_styles,"map"),_=Pb(e.valid_classes,"map"),R=g("whitespace_elements","pre script noscript style textarea video audio iframe object code"),B=g("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),P=g("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),I=g("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),Z="td th iframe video audio object script code",Q=g("non_empty_elements",Z+" pre svg textarea summary",P),ee=g("move_caret_before_on_enter_elements",Z+" table",P),ne="h1 h2 h3 h4 h5 h6",ye=g("text_block_elements",ne+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Oe=g("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",ye),je=g("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),he=g("transparent_elements","a ins del canvas map"),ue=g("wrap_block_elements","pre "+ne);st("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),ct=>{d[ct]=new RegExp("</"+ct+"[^>]*>","gi")});const Ce=ct=>{const cn=D.from(o["@"]),No=/[*?+]/;oe(SS(cn,ct??""),({name:ss,element:Ds,aliasName:rs})=>{if(rs&&(o[rs]=Ds),No.test(ss)){const xo=Ds;xo.pattern=Ab(ss),c.push(xo)}else o[ss]=Ds})},qe=ct=>{c=[],oe(Wo(o),cn=>{delete o[cn]}),Ce(ct)},ut=(ct,cn)=>{var No,ss;delete Ug.text_block_elements,delete Ug.block_elements;const Ds=cn.extends?!Ua(cn.extends):!1,rs=cn.extends;if(r[ct]=rs?r[rs]:{},l[ct]=rs??ct,Q[ct.toUpperCase()]={},Q[ct]={},Ds||(Oe[ct.toUpperCase()]={},Oe[ct]={}),rs&&!o[ct]&&o[rs]){const xo=hP(o[rs]);delete xo.removeEmptyAttrs,delete xo.removeEmpty,o[ct]=xo}else o[ct]={attributesOrder:[],attributes:{}};if(Kn(cn.attributes)){const xo=Yr=>{wo.attributesOrder.push(Yr),wo.attributes[Yr]={}},wo=(No=o[ct])!==null&&No!==void 0?No:{};delete wo.attributesDefault,delete wo.attributesForced,delete wo.attributePatterns,delete wo.attributesRequired,wo.attributesOrder=[],wo.attributes={},oe(cn.attributes,Yr=>{const Qc=Db(p);Vp(Yr).each(({preset:Sl,name:Fi})=>{Sl?Fi==="global"&&oe(Qc,xo):xo(Fi)})}),o[ct]=wo}if($t(cn.padEmpty)){const xo=(ss=o[ct])!==null&&ss!==void 0?ss:{};xo.paddEmpty=cn.padEmpty,o[ct]=xo}if(Kn(cn.children)){const xo={},wo=Qc=>{xo[Qc]={}},Yr=Qc=>{Bd(p,Qc).each(Sl=>{oe(Sl,wo)})};oe(cn.children,Qc=>{Vp(Qc).each(({preset:Sl,name:Fi})=>{Sl?Yr(Fi):wo(Fi)})}),r[ct]=xo}rs&&He(r,(xo,wo)=>{xo[rs]&&(r[wo]=xo=Ld({},r[wo]),xo[ct]=xo[rs])})},At=ct=>{oe(pP(ct??""),({name:cn,cloneName:No})=>{ut(cn,{extends:No})})},qt=ct=>{Ot(ct)?He(ct,(cn,No)=>ut(No,cn)):re(ct)&&At(ct)},_n=ct=>{oe(CT(ct??""),({operation:cn,name:No,validChildren:ss})=>{const Ds=cn==="replace"?{"#comment":{}}:r[No],rs=wo=>{cn==="remove"?delete Ds[wo]:Ds[wo]={}},xo=wo=>{Bd(p,wo).each(Yr=>{oe(Yr,rs)})};oe(ss,({preset:wo,name:Yr})=>{wo?xo(Yr):rs(Yr)}),r[No]=Ds})},Pn=ct=>{const cn=o[ct];if(cn)return cn;let No=c.length;for(;No--;){const ss=c[No];if(ss.pattern.test(ct))return ss}},Ro=()=>{e.valid_elements?(qe(e.valid_elements),st(y,(ct,cn)=>{r[cn]=ct.children})):(st(y,(ct,cn)=>{o[cn]={attributes:ct.attributes,attributesOrder:ct.attributesOrder},r[cn]=ct.children}),st(Vs("strong/b em/i"),ct=>{const cn=Vs(ct,"/");o[cn[1]].outputName=cn[0]}),st(je,(ct,cn)=>{o[cn]&&(e.padd_empty_block_inline_children&&(o[cn].paddInEmptyBlock=!0),o[cn].removeEmpty=!0)}),st(Vs("ol ul blockquote a table tbody"),ct=>{o[ct]&&(o[ct].removeEmpty=!0)}),st(Vs("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),ct=>{o[ct]&&(o[ct].paddEmpty=!0)}),st(Vs("span"),ct=>{o[ct].removeEmptyAttrs=!0})),delete o.svg,qt(e.custom_elements),_n(e.valid_children),Ce(e.extended_valid_elements),_n("+ol[ul|ol],+ul[ul|ol]"),st({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(ct,cn)=>{o[cn]&&(o[cn].parentsRequired=Vs(ct))}),e.invalid_elements&&st(Rb(e.invalid_elements),ct=>{o[ct]&&delete o[ct]}),Pn("span")||Ce("span[!data-mce-type|*]")},ar=Ie(E),Os=Ie(T),Pe=Ie(_),lt=Ie(I),mn=Ie(Oe),ze=Ie(ye),yt=Ie(je),St=Ie(Object.seal(P)),$e=Ie(B),Kt=Ie(Q),en=Ie(ee),os=Ie(R),On=Ie(he),xr=Ie(ue),wa=Ie(Object.seal(d)),Cl=(ct,cn)=>{const No=r[ct.toLowerCase()];return!!(No&&No[cn.toLowerCase()])},Nr=(ct,cn)=>{const No=Pn(ct);if(No)if(cn){if(No.attributes[cn])return!0;const ss=No.attributePatterns;if(ss){let Ds=ss.length;for(;Ds--;)if(ss[Ds].pattern.test(cn))return!0}}else return!0;return!1},Ua=ct=>ht(mn(),ct),Za=ct=>!Se(ct,"#")&&Nr(ct)&&!Ua(ct),cr=ct=>ht(xr(),ct)||Za(ct),Wa=Ie(l);return Ro(),{type:p,children:r,elements:o,getValidStyles:ar,getValidClasses:Pe,getBlockElements:mn,getInvalidStyles:Os,getVoidElements:St,getTextBlockElements:ze,getTextInlineElements:yt,getBoolAttrs:lt,getElementRule:Pn,getSelfClosingElements:$e,getNonEmptyElements:Kt,getMoveCaretBeforeOnEnterElements:en,getWhitespaceElements:os,getTransparentElements:On,getSpecialElements:wa,isValidChild:Cl,isValid:Nr,isBlock:Ua,isInline:Za,isWrapper:cr,getCustomElements:Wa,addValidElements:Ce,setValidElements:qe,addCustomElements:qt,addValidChildren:_n}},ET=e=>({value:bP(e)}),bP=e=>_m(e,"#").toUpperCase(),xS=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},be=e=>{const n=xS(e.red)+xS(e.green)+xS(e.blue);return ET(n)},Bb=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,kT=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Lb=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),TT=(e,n,o,r)=>{const c=parseInt(e,10),l=parseInt(n,10),d=parseInt(o,10),g=parseFloat(r);return Lb(c,l,d,g)},Zg=e=>Bb.test(e)?"rgb":kT.test(e)?"rgba":"other",Ib=e=>{const n=Bb.exec(e);if(n!==null)return D.some(TT(n[1],n[2],n[3],"1"));const o=kT.exec(e);return o!==null?D.some(TT(o[1],o[2],o[3],o[4])):D.none()},qm=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,zp=e=>Ib(e).map(be).map(n=>"#"+n.value).getOr(e),Id=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,l={};let d,g;const p=Lp;n&&(d=n.getValidStyles(),g=n.getInvalidStyles());const y=(`\\" \\' \\; \\: ; : `+p).split(" ");for(let T=0;T<y.length;T++)l[y[T]]=p+T,l[p+T]=y[T];const E={parse:T=>{const _={};let R=!1;const B=e.url_converter,P=e.url_converter_scope||E,I=(he,ue,Ce)=>{const qe=_[he+"-top"+ue];if(!qe)return;const ut=_[he+"-right"+ue];if(!ut)return;const At=_[he+"-bottom"+ue];if(!At)return;const qt=_[he+"-left"+ue];if(!qt)return;const _n=[qe,ut,At,qt];let Pn=_n.length-1;for(;Pn--&&_n[Pn]===_n[Pn+1];);Pn>-1&&Ce||(_[he+ue]=Pn===-1?_n[0]:_n.join(" "),delete _[he+"-top"+ue],delete _[he+"-right"+ue],delete _[he+"-bottom"+ue],delete _[he+"-left"+ue])},Z=he=>{const ue=_[he];if(!ue)return;const Ce=ue.indexOf(",")>-1?[ue]:ue.split(" ");let qe=Ce.length;for(;qe--;)if(Ce[qe]!==Ce[0])return!1;return _[he]=Ce[0],!0},Q=(he,ue,Ce,qe)=>{Z(ue)&&Z(Ce)&&Z(qe)&&(_[he]=_[ue]+" "+_[Ce]+" "+_[qe],delete _[ue],delete _[Ce],delete _[qe])},ee=he=>(R=!0,l[he]),ne=(he,ue)=>(R&&(he=he.replace(/\uFEFF[0-9]/g,Ce=>l[Ce])),ue||(he=he.replace(/\\([\'\";:])/g,"$1")),he),ye=he=>String.fromCharCode(parseInt(he.slice(1),16)),Oe=he=>he.replace(/\\[0-9a-f]+/gi,ye),je=(he,ue,Ce,qe,ut,At)=>{if(ut=ut||At,ut)return ut=ne(ut),"'"+ut.replace(/\'/g,"\\'")+"'";if(ue=ne(ue||Ce||qe||""),!e.allow_script_urls){const qt=ue.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(qt)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(qt))return""}return B&&(ue=B.call(P,ue,"style")),"url('"+ue.replace(/\'/g,"\\'")+"')"};if(T){T=T.replace(/[\u0000-\u001F]/g,""),T=T.replace(/\\[\"\';:\uFEFF]/g,ee).replace(/\"[^\"]+\"|\'[^\']+\'/g,ue=>ue.replace(/[;:]/g,ee));let he;for(;he=r.exec(T);){r.lastIndex=he.index+he[0].length;let ue=he[1].replace(c,"").toLowerCase(),Ce=he[2].replace(c,"");if(ue&&Ce){if(ue=Oe(ue),Ce=Oe(Ce),ue.indexOf(p)!==-1||ue.indexOf('"')!==-1||!e.allow_script_urls&&(ue==="behavior"||/expression\s*\(|\/\*|\*\//.test(Ce)))continue;ue==="font-weight"&&Ce==="700"?Ce="bold":(ue==="color"||ue==="background-color")&&(Ce=Ce.toLowerCase()),Zg(Ce)==="rgb"&&Ib(Ce).each(qe=>{Ce=zp(qm(qe)).toLowerCase()}),Ce=Ce.replace(o,je),_[ue]=R?ne(Ce,!0):Ce}}I("border","",!0),I("border","-width"),I("border","-color"),I("border","-style"),I("padding",""),I("margin",""),Q("border","border-width","border-style","border-color"),_.border==="medium none"&&delete _.border,_["border-image"]==="none"&&delete _["border-image"]}return _},serialize:(T,_)=>{let R="";const B=(I,Z)=>{const Q=Z[I];if(Q)for(let ee=0,ne=Q.length;ee<ne;ee++){const ye=Q[ee],Oe=T[ye];Oe&&(R+=(R.length>0?" ":"")+ye+": "+Oe+";")}},P=(I,Z)=>{if(!g||!Z)return!0;let Q=g["*"];return Q&&Q[I]?!1:(Q=g[Z],!(Q&&Q[I]))};return _&&d?(B("*",d),B(_,d)):He(T,(I,Z)=>{I&&P(Z,_)&&(R+=(R.length>0?" ":"")+Z+": "+I+";")}),R}};return E},co={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},jl=e=>e instanceof Event||Ht(e.initEvent),_T=e=>e.isDefaultPrevented===Ue||e.isDefaultPrevented===we,Bu=e=>dn(e.preventDefault)||jl(e),AT=(e,n)=>{const o=n??{};for(const r in e)ht(co,r)||(o[r]=e[r]);return Ae(e.composedPath)&&(o.composedPath=()=>e.composedPath()),Ae(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),Ae(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},Up=(e,n,o,r)=>{var c;const l=AT(n,r);return l.type=e,dn(l.target)&&(l.target=(c=l.srcElement)!==null&&c!==void 0?c:o),Bu(n)&&(l.preventDefault=()=>{l.defaultPrevented=!0,l.isDefaultPrevented=Ue,Ht(n.preventDefault)&&n.preventDefault()},l.stopPropagation=()=>{l.cancelBubble=!0,l.isPropagationStopped=Ue,Ht(n.stopPropagation)&&n.stopPropagation()},l.stopImmediatePropagation=()=>{l.isImmediatePropagationStopped=Ue,l.stopPropagation()},_T(l)||(l.isDefaultPrevented=l.defaultPrevented===!0?Ue:we,l.isPropagationStopped=l.cancelBubble===!0?Ue:we,l.isImmediatePropagationStopped=we)),l},wS="mce-data-",vP=/^(?:mouse|contextmenu)|click/,cc=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},Fb=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},yP=e=>Ae(e)&&vP.test(e.type),Km=(e,n)=>{const o=Up(e.type,e,document,n);if(yP(e)&&uo(e.pageX)&&!uo(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,l=r.body,d=o;d.pageX=e.clientX+(c&&c.scrollLeft||l&&l.scrollLeft||0)-(c&&c.clientLeft||l&&l.clientLeft||0),d.pageY=e.clientY+(c&&c.scrollTop||l&&l.scrollTop||0)-(c&&c.clientTop||l&&l.clientTop||0)}return o},CP=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const l=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,d=()=>{Fb(e,"DOMContentLoaded",d),Fb(e,"load",d),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};l()?d():cc(e,"DOMContentLoaded",d),o.domLoaded||cc(e,"load",d)};class Ym{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=wS+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const l=this;let d;const g=window,p=_=>{l.executeHandlers(Km(_||g.event),y)};if(!n||Te(n)||Ts(n))return r;let y;n[l.expando]?y=n[l.expando]:(y=l.count++,n[l.expando]=y,l.events[y]={}),c=c||n;const E=o.split(" ");let T=E.length;for(;T--;){let _=E[T],R=p,B=!1,P=!1;if(_==="DOMContentLoaded"&&(_="ready"),l.domLoaded&&_==="ready"&&n.readyState==="complete"){r.call(c,Km({type:_}));continue}!l.hasFocusIn&&(_==="focusin"||_==="focusout")&&(B=!0,P=_==="focusin"?"focus":"blur",R=I=>{const Z=Km(I||g.event);Z.type=Z.type==="focus"?"focusin":"focusout",l.executeHandlers(Z,y)}),d=l.events[y][_],d?_==="ready"&&l.domLoaded?r(Km({type:_})):d.push({func:r,scope:c}):(l.events[y][_]=d=[{func:r,scope:c}],d.fakeName=P,d.capture=B,d.nativeHandler=R,_==="ready"?CP(n,R,l):cc(n,P||_,R,B))}return n=d=null,r}unbind(n,o,r){if(!n||Te(n)||Ts(n))return this;const c=n[this.expando];if(c){let l=this.events[c];if(o){const d=o.split(" ");let g=d.length;for(;g--;){const p=d[g],y=l[p];if(y){if(r){let E=y.length;for(;E--;)if(y[E].func===r){const T=y.nativeHandler,_=y.fakeName,R=y.capture,B=y.slice(0,E).concat(y.slice(E+1));B.nativeHandler=T,B.fakeName=_,B.capture=R,l[p]=B}}(!r||y.length===0)&&(delete l[p],Fb(n,y.fakeName||p,y.nativeHandler,y.capture))}}}else He(l,(d,g)=>{Fb(n,d.fakeName||g,d.nativeHandler,d.capture)}),l={};for(const d in l)if(ht(l,d))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||Te(n)||Ts(n))return this;const c=Km({type:o,target:n},r);do{const l=n[this.expando];l&&this.executeHandlers(c,l),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||Te(n)||Ts(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let l=0,d=c.length;l<d;l++){const g=c[l];if(g&&g.func.call(g.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Ym.Event=new Ym;const ES=Ee.each,SP=Ee.grep,$b="data-mce-style",al=Ee.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),zr=(e,n,o)=>{dn(o)||o===""?Eo(e,n):Is(e,n,o)},_e=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Wg=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const l=c.nodeType;n&&Te(c)&&(l===r||!c.data.length)||(o++,r=l)}return o},zs=(e,n)=>{const o=ea(n,"style"),r=e.serialize(e.parse(o),Ft(n));zr(n,$b,r)},xP=(e,n)=>Po(e)?ht(al,n)?e+"":e+"px":e,kS=(e,n,o)=>{const r=_e(n);dn(o)||o===""?gb(e,r):sS(e,r,xP(o,r))},wP=(e,n,o)=>{const r=n.keep_values,c={set:(d,g,p)=>{const y=U.fromDom(d);Ht(n.url_converter)&&Ae(g)&&(g=n.url_converter.call(n.url_converter_scope||o(),String(g),p,d));const E="data-mce-"+p;zr(y,E,g),zr(y,p,g)},get:(d,g)=>{const p=U.fromDom(d);return ea(p,"data-mce-"+g)||ea(p,g)}},l={style:{set:(d,g)=>{const p=U.fromDom(d);r&&zr(p,$b,g),Eo(p,"style"),re(g)&&jt(p,e.parse(g))},get:d=>{const g=U.fromDom(d),p=ea(g,$b)||ea(g,"style");return e.serialize(e.parse(p),Ft(g))}}};return r&&(l.href=l.src=c),l},Jn=(e,n={})=>{const o={},r=window,c={};let l=0;const d=!0,g=!0,p=yS.forElement(U.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),y=[],E=n.schema?n.schema:In({}),T=Id({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),_=n.ownEvents?new Ym:Ym.Event,R=E.getBlockElements(),B=ae=>re(ae)?ht(R,ae):Ze(ae)&&(ht(R,ae.nodeName)||Zm(E,ae)),P=ae=>ae&&e&&re(ae)?e.getElementById(ae):ae,I=ae=>{const ie=P(ae);return Ae(ie)?U.fromDom(ie):null},Z=(ae,ie,Ne="")=>{let De;const bt=I(ae);if(Ae(bt)&&ha(bt)){const fn=Cp[ie];fn&&fn.get?De=fn.get(bt.dom,ie):De=ea(bt,ie)}return Ae(De)?De:Ne},Q=ae=>{const ie=P(ae);return dn(ie)?[]:ie.attributes},ee=(ae,ie,Ne)=>{lt(ae,De=>{if(Ze(De)){const bt=U.fromDom(De),fn=Ne===""?null:Ne,To=ea(bt,ie),xl=Cp[ie];xl&&xl.set?xl.set(bt.dom,fn,ie):zr(bt,ie,fn),To!==fn&&n.onSetAttrib&&n.onSetAttrib({attrElm:bt.dom,attrName:ie,attrValue:fn})}})},ne=(ae,ie)=>ae.cloneNode(ie),ye=()=>n.root_element||e.body,Oe=ae=>{const ie=cT(ae);return{x:ie.x,y:ie.y,w:ie.width,h:ie.height}},je=(ae,ie)=>Nu(e.body,P(ae),ie),he=(ae,ie,Ne)=>{lt(ae,De=>{const bt=U.fromDom(De);kS(bt,ie,Ne),n.update_styles&&zs(T,bt)})},ue=(ae,ie)=>{lt(ae,Ne=>{const De=U.fromDom(Ne);He(ie,(bt,fn)=>{kS(De,fn,bt)}),n.update_styles&&zs(T,De)})},Ce=(ae,ie,Ne)=>{const De=P(ae);if(!(dn(De)||!fi(De)&&!uS(De)))return Ne?ts(U.fromDom(De),_e(ie)):(ie=ie.replace(/-(\D)/g,(bt,fn)=>fn.toUpperCase()),ie==="float"&&(ie="cssFloat"),De.style?De.style[ie]:void 0)},qe=ae=>{const ie=P(ae);if(!ie)return{w:0,h:0};let Ne=Ce(ie,"width"),De=Ce(ie,"height");return(!Ne||Ne.indexOf("px")===-1)&&(Ne="0"),(!De||De.indexOf("px")===-1)&&(De="0"),{w:parseInt(Ne,10)||ie.offsetWidth||ie.clientWidth,h:parseInt(De,10)||ie.offsetHeight||ie.clientHeight}},ut=ae=>{const ie=P(ae),Ne=je(ie),De=qe(ie);return{x:Ne.x,y:Ne.y,w:De.w,h:De.h}},At=(ae,ie)=>{if(!ae)return!1;const Ne=Kn(ae)?ae:[ae];return kn(Ne,De=>oc(U.fromDom(De),ie))},qt=(ae,ie,Ne,De)=>{const bt=[];let fn=P(ae);De=De===void 0;const To=Ne||(ye().nodeName!=="BODY"?ye().parentNode:null);if(re(ie))if(ie==="*")ie=Ze;else{const xl=ie;ie=ti=>At(ti,xl)}for(;fn&&!(fn===To||dn(fn.nodeType)||Bg(fn)||Fs(fn));){if(!ie||ie(fn))if(De)bt.push(fn);else return[fn];fn=fn.parentNode}return De?bt:null},_n=(ae,ie,Ne)=>{const De=qt(ae,ie,Ne,!1);return De&&De.length>0?De[0]:null},Pn=(ae,ie,Ne)=>{let De=ie;if(ae){re(ie)&&(De=bt=>At(bt,ie));for(let bt=ae[Ne];bt;bt=bt[Ne])if(Ht(De)&&De(bt))return bt}return null},Ro=(ae,ie)=>Pn(ae,ie,"nextSibling"),ar=(ae,ie)=>Pn(ae,ie,"previousSibling"),Os=ae=>Ht(ae.querySelectorAll),Pe=(ae,ie)=>{var Ne,De;const bt=(De=(Ne=P(ie))!==null&&Ne!==void 0?Ne:n.root_element)!==null&&De!==void 0?De:e;return Os(bt)?Rn(bt.querySelectorAll(ae)):[]},lt=function(ae,ie,Ne){const De=Ne??this;if(Kn(ae)){const bt=[];return ES(ae,(fn,To)=>{const xl=P(fn);xl&&bt.push(ie.call(De,xl,To))}),bt}else{const bt=P(ae);return bt?ie.call(De,bt):!1}},mn=(ae,ie)=>{lt(ae,Ne=>{He(ie,(De,bt)=>{ee(Ne,bt,De)})})},ze=(ae,ie)=>{lt(ae,Ne=>{const De=U.fromDom(Ne);Dd(De,ie)})},yt=(ae,ie,Ne,De,bt)=>lt(ae,fn=>{const To=re(ie)?e.createElement(ie):ie;return Ae(Ne)&&mn(To,Ne),De&&(!re(De)&&De.nodeType?To.appendChild(De):re(De)&&ze(To,De)),bt?To:fn.appendChild(To)}),St=(ae,ie,Ne)=>yt(e.createElement(ae),ae,ie,Ne,!0),$e=Gm.decode,Kt=Gm.encodeAllRaw,en=(ae,ie,Ne="")=>{let De="<"+ae;for(const bt in ie)da(ie,bt)&&(De+=" "+bt+'="'+Kt(ie[bt])+'"');return Go(Ne)&&ht(E.getVoidElements(),ae)?De+" />":De+">"+Ne+"</"+ae+">"},os=ae=>{const ie=e.createElement("div"),Ne=e.createDocumentFragment();Ne.appendChild(ie),ae&&(ie.innerHTML=ae);let De;for(;De=ie.firstChild;)Ne.appendChild(De);return Ne.removeChild(ie),Ne},On=(ae,ie)=>lt(ae,Ne=>{const De=U.fromDom(Ne);return ie&&oe(Js(De),bt=>{Ir(bt)&&bt.dom.length===0?Xn(bt):ta(De,bt)}),Xn(De),De.dom}),xr=ae=>lt(ae,ie=>{const Ne=ie.attributes;for(let De=Ne.length-1;De>=0;De--)ie.removeAttributeNode(Ne.item(De))}),wa=ae=>T.parse(ae),Cl=(ae,ie)=>T.serialize(ae,ie),Nr=ae=>{if(ja!==Jn.DOM&&e===document){if(o[ae])return;o[ae]=!0}let ie=e.getElementById("mceDefaultStyles");if(!ie){ie=e.createElement("style"),ie.id="mceDefaultStyles",ie.type="text/css";const Ne=e.head;Ne.firstChild?Ne.insertBefore(ie,Ne.firstChild):Ne.appendChild(ie)}ie.styleSheet?ie.styleSheet.cssText+=ae:ie.appendChild(e.createTextNode(ae))},Ua=ae=>{ae||(ae=""),oe(ae.split(","),ie=>{c[ie]=!0,p.load(ie).catch(nt)})},Za=(ae,ie,Ne)=>{lt(ae,De=>{if(Ze(De)){const bt=U.fromDom(De),fn=ie.split(" ");oe(fn,To=>{Ae(Ne)?(Ne?_u:Ed)(bt,To):ib(bt,To)})}})},cr=(ae,ie)=>{Za(ae,ie,!0)},Wa=(ae,ie)=>{Za(ae,ie,!1)},ct=(ae,ie)=>{const Ne=I(ae),De=ie.split(" ");return Ae(Ne)&&_o(De,bt=>Cg(Ne,bt))},cn=ae=>{lt(ae,ie=>gb(U.fromDom(ie),"display"))},No=ae=>{lt(ae,ie=>sS(U.fromDom(ie),"display","none"))},ss=ae=>{const ie=I(ae);return Ae(ie)&&wu(Tg(ie,"display"),"none")},Ds=ae=>(ae||"mce_")+l++,rs=ae=>{const ie=I(ae);return Ae(ie)?Ze(ie.dom)?ie.dom.outerHTML:Pc(ie):""},xo=(ae,ie)=>{lt(ae,Ne=>{Ze(Ne)&&(Ne.outerHTML=ie)})},wo=(ae,ie)=>{const Ne=P(ie);return lt(ae,De=>{const bt=Ne==null?void 0:Ne.parentNode,fn=Ne==null?void 0:Ne.nextSibling;return bt&&(fn?bt.insertBefore(De,fn):bt.appendChild(De)),De})},Yr=(ae,ie,Ne)=>lt(ie,De=>{var bt;const fn=Kn(ie)?ae.cloneNode(!0):ae;return Ne&&ES(SP(De.childNodes),To=>{fn.appendChild(To)}),(bt=De.parentNode)===null||bt===void 0||bt.replaceChild(fn,De),De}),Qc=(ae,ie)=>{if(ae.nodeName!==ie.toUpperCase()){const Ne=St(ie);return ES(Q(ae),De=>{ee(Ne,De.nodeName,Z(ae,De.nodeName))}),Yr(Ne,ae,!0),Ne}else return ae},Sl=(ae,ie)=>{let Ne=ae;for(;Ne;){let De=ie;for(;De&&Ne!==De;)De=De.parentNode;if(Ne===De)break;Ne=Ne.parentNode}return!Ne&&ae.ownerDocument?ae.ownerDocument.documentElement:Ne},Fi=(ae,ie,Ne)=>la(ie)?Hs(E,ae,{...Ne,isContent:bt=>{const fn=bt.nodeName.toLowerCase();return!!ie[fn]}}):Hs(E,ae,Ne),cg=()=>e.createRange(),ig=(ae,ie,Ne)=>{let De=cg(),bt,fn;if(ae&&ie&&ae.parentNode&&ie.parentNode){const To=ae.parentNode;return De.setStart(To,Wg(ae)),De.setEnd(ie.parentNode,Wg(ie)),bt=De.extractContents(),De=cg(),De.setStart(ie.parentNode,Wg(ie)+1),De.setEnd(To,Wg(ae)+1),fn=De.extractContents(),To.insertBefore(Lc(ja,bt,E),ae),Ne?To.insertBefore(Ne,ae):To.insertBefore(ie,ae),To.insertBefore(Lc(ja,fn,E),ae),On(ae),Ne||ie}else return},ad=(ae,ie,Ne,De)=>{if(Kn(ae)){let bt=ae.length;const fn=[];for(;bt--;)fn[bt]=ad(ae[bt],ie,Ne,De);return fn}else return n.collect&&(ae===e||ae===r)&&y.push([ae,ie,Ne,De]),_.bind(ae,ie,Ne,De||ja)},ei=(ae,ie,Ne)=>{if(Kn(ae)){let De=ae.length;const bt=[];for(;De--;)bt[De]=ei(ae[De],ie,Ne);return bt}else{if(y.length>0&&(ae===e||ae===r)){let De=y.length;for(;De--;){const[bt,fn,To]=y[De];ae===bt&&(!ie||ie===fn)&&(!Ne||Ne===To)&&_.unbind(bt,fn,To)}}return _.unbind(ae,ie,Ne)}},cd=(ae,ie,Ne)=>_.dispatch(ae,ie,Ne),vp=(ae,ie,Ne)=>_.dispatch(ae,ie,Ne),yp=ae=>{if(ae&&fi(ae)){const ie=ae.getAttribute("data-mce-contenteditable");return ie&&ie!=="inherit"?ie:ae.contentEditable!=="inherit"?ae.contentEditable:null}else return null},ja={doc:e,settings:n,win:r,files:c,stdMode:d,boxModel:g,styleSheetLoader:p,boundEvents:y,styles:T,schema:E,events:_,isBlock:B,root:null,clone:ne,getRoot:ye,getViewPort:Oe,getRect:ut,getSize:qe,getParent:_n,getParents:qt,get:P,getNext:Ro,getPrev:ar,select:Pe,is:At,add:yt,create:St,createHTML:en,createFragment:os,remove:On,setStyle:he,getStyle:Ce,setStyles:ue,removeAllAttribs:xr,setAttrib:ee,setAttribs:mn,getAttrib:Z,getPos:je,parseStyle:wa,serializeStyle:Cl,addStyle:Nr,loadCSS:Ua,addClass:cr,removeClass:Wa,hasClass:ct,toggleClass:Za,show:cn,hide:No,isHidden:ss,uniqueId:Ds,setHTML:ze,getOuterHTML:rs,setOuterHTML:xo,decode:$e,encode:Kt,insertAfter:wo,replace:Yr,rename:Qc,findCommonAncestor:Sl,run:lt,getAttribs:Q,isEmpty:Fi,createRng:cg,nodeIndex:Wg,split:ig,bind:ad,unbind:ei,fire:vp,dispatch:cd,getContentEditable:yp,getContentEditableParent:ae=>{const ie=ye();let Ne=null;for(let De=ae;De&&De!==ie&&(Ne=yp(De),Ne===null);De=De.parentNode);return Ne},isEditable:ae=>{if(Ae(ae)){const ie=Ze(ae)?ae:ae.parentElement;return Ae(ie)&&fi(ie)&&Mu(U.fromDom(ie))}else return!1},destroy:()=>{if(y.length>0){let ae=y.length;for(;ae--;){const[ie,Ne,De]=y[ae];_.unbind(ie,Ne,De)}}He(c,(ae,ie)=>{p.unload(ie),delete c[ie]})},isChildOf:(ae,ie)=>ae===ie||ie.contains(ae),dumpRng:ae=>"startContainer: "+ae.startContainer.nodeName+", startOffset: "+ae.startOffset+", endContainer: "+ae.endContainer.nodeName+", endOffset: "+ae.endOffset},Cp=wP(T,n,Ie(ja));return ja};Jn.DOM=Jn(document),Jn.nodeIndex=Wg;const EP=Jn.DOM,kP=0,jg=1,Gg=2,TS=3;class Gl{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=EP;let l;const d=()=>{c.remove(y),l&&(l.onerror=l.onload=l=null)},g=()=>{d(),o()},p=()=>{d(),r("Failed to load script: "+n)},y=c.uniqueId();l=document.createElement("script"),l.id=y,l.type="text/javascript",l.src=Ee._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(l,"referrerpolicy",this.settings.referrerPolicy),l.onload=g,l.onerror=p,(document.getElementsByTagName("head")[0]||document.body).appendChild(l)})}isDone(n){return this.states[n]===Gg}markDone(n){this.states[n]=Gg}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=kP),new Promise((c,l)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:l})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(p,y)=>{Bn(o.scriptLoadedCallbacks,y).each(E=>{oe(E,T=>T[p](y))}),delete o.scriptLoadedCallbacks[y]},c=p=>{const y=vt(p,E=>E.status==="rejected");return y.length>0?Promise.reject(is(y,({reason:E})=>Kn(E)?E:[E])):Promise.resolve()},l=p=>Promise.allSettled(Dt(p,y=>o.states[y]===Gg?(r("resolve",y),Promise.resolve()):o.states[y]===TS?(r("reject",y),Promise.reject(y)):(o.states[y]=jg,o.loadScript(y).then(()=>{o.states[y]=Gg,r("resolve",y);const E=o.queue;return E.length>0?(o.queue=[],l(E).then(c)):Promise.resolve()},()=>(o.states[y]=TS,r("reject",y),Promise.reject(y)))))),d=p=>(o.loading=!0,l(p).then(y=>{o.loading=!1;const E=o.queueLoadedCallbacks.shift();return D.from(E).each(_c),c(y)})),g=yu(n);return o.loading?new Promise((p,y)=>{o.queueLoadedCallbacks.push(()=>{d(g).then(p,y)})}):d(g)}}Gl.ScriptLoader=new Gl;const TP=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},Xo=e=>Ot(e)&&ht(e,"raw"),OT=e=>Kn(e)&&e.length>1,bo={},_S=mo("en"),na=()=>Bn(bo,_S.get()),ll={getData:()=>sn(bo,e=>({...e})),setCode:e=>{e&&_S.set(e)},getCode:()=>_S.get(),add:(e,n)=>{let o=bo[e];o||(bo[e]=o={});const r=Dt(Wo(n),c=>c.toLowerCase());He(n,(c,l)=>{const d=l.toLowerCase();d!==l&&TP(r,d)?(ht(n,d)||(o[d]=c),o[l]=c):o[d]=c})},translate:e=>{const n=na().getOr({}),o=d=>Ht(d)?Object.prototype.toString.call(d):r(d)?"":""+d,r=d=>d===""||d===null||d===void 0,c=d=>{const g=o(d);return ht(n,g)?o(n[g]):Bn(n,g.toLowerCase()).map(o).getOr(g)},l=d=>d.replace(/{context:\w+}$/,"");if(r(e))return"";if(Xo(e))return o(e.raw);if(OT(e)){const d=e.slice(1),g=c(e[0]).replace(/\{([0-9]+)\}/g,(p,y)=>ht(d,y)?o(d[y]):p);return l(g)}return l(c(e))},isRtl:()=>na().bind(e=>Bn(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>ht(bo,e)},Ur=()=>{const e=[],n={},o={},r=[],c=(P,I)=>{const Z=vt(r,Q=>Q.name===P&&Q.state===I);oe(Z,Q=>Q.resolve())},l=P=>ht(n,P),d=P=>ht(o,P),g=P=>{if(o[P])return o[P].instance},p=(P,I)=>{const Z=ll.getCode(),Q=","+(I||"")+",";!Z||I&&Q.indexOf(","+Z+",")===-1||Gl.ScriptLoader.add(n[P]+"/langs/"+Z+".js")},y=(P,I)=>{Ur.languageLoad!==!1&&(l(P)?p(P,I):B(P,"loaded").then(()=>p(P,I)))},E=(P,I)=>(e.push(I),o[P]={instance:I},c(P,"added"),I),T=P=>{delete n[P],delete o[P]},_=(P,I)=>re(I)?re(P)?{prefix:"",resource:I,suffix:""}:{prefix:P.prefix,resource:I,suffix:P.suffix}:I,R=(P,I)=>{if(n[P])return Promise.resolve();let Z=re(I)?I:I.prefix+I.resource+I.suffix;Z.indexOf("/")!==0&&Z.indexOf("://")===-1&&(Z=Ur.baseURL+"/"+Z),n[P]=Z.substring(0,Z.lastIndexOf("/"));const Q=()=>(c(P,"loaded"),Promise.resolve());return o[P]?Q():Gl.ScriptLoader.add(Z).then(Q)},B=(P,I="added")=>I==="added"&&d(P)||I==="loaded"&&l(P)?Promise.resolve():new Promise(Z=>{r.push({name:P,state:I,resolve:Z})});return{items:e,urls:n,lookup:o,get:g,requireLangPack:y,add:E,remove:T,createUrl:_,load:R,waitFor:B}};Ur.languageLoad=!0,Ur.baseURL="",Ur.PluginManager=Ur(),Ur.ThemeManager=Ur(),Ur.ModelManager=Ur();const Kg=(e,n)=>{let o=null;return{cancel:()=>{q(o)||(clearTimeout(o),o=null)},throttle:(...l)=>{q(o)&&(o=setTimeout(()=>{o=null,e.apply(null,l)},n))}}},Hb=(e,n)=>{let o=null;const r=()=>{q(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...l)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,l)},n)}}},AP=(e,n,o)=>Fm(e,n,o).isSome(),Zp=Ie("mce-annotation"),Xm=Ie("data-mce-annotation"),Jm=Ie("data-mce-annotation-uid"),Yg=Ie("data-mce-annotation-active"),Qm=Ie("data-mce-annotation-classes"),ef=Ie("data-mce-annotation-attrs"),Vb=e=>n=>xn(n,e),DT=(e,n)=>{const o=e.selection.getRng(),r=U.fromDom(o.startContainer),c=U.fromDom(e.getBody()),l=n.fold(()=>"."+Zp(),p=>`[${Xm()}="${p}"]`),d=Il(r,o.startOffset).getOr(r);return at(d,l,Vb(c)).bind(p=>Ji(p,`${Jm()}`).bind(y=>Ji(p,`${Xm()}`).map(E=>{const T=RT(e,y);return{uid:y,name:E,elements:T}})))},OP=e=>ha(e)&&Cg(e,Zp()),MT=(e,n)=>ku(e,"data-mce-bogus")||AP(e,'[data-mce-bogus="all"]',Vb(n)),RT=(e,n)=>{const o=U.fromDom(e.getBody()),r=$r(o,`[${Jm()}="${n}"]`);return vt(r,c=>!MT(c,o))},zb=(e,n)=>{const o=U.fromDom(e.getBody()),r=$r(o,`[${Xm()}="${n}"]`),c={};return oe(r,l=>{if(!MT(l,o)){const d=ea(l,Jm()),g=Bn(c,d).getOr([]);c[d]=g.concat([l])}}),c},NT=(e,n)=>{const o=mo({}),r=()=>({listeners:[],previous:Vr()}),c=(T,_)=>{l(T,R=>(_(R),R))},l=(T,_)=>{const R=o.get(),B=Bn(R,T).getOrThunk(r),P=_(B);R[T]=P,o.set(R)},d=(T,_,R)=>{c(T,B=>{oe(B.listeners,P=>P(!0,T,{uid:_,nodes:Dt(R,I=>I.dom)}))})},g=T=>{c(T,_=>{oe(_.listeners,R=>R(!1,T))})},p=(T,_)=>{oe(RT(e,T),R=>{_?Is(R,Yg(),"true"):Eo(R,Yg())})},y=Hb(()=>{const T=Zn(n.getNames());oe(T,_=>{l(_,R=>{const B=R.previous.get();return DT(e,D.some(_)).fold(()=>{B.each(P=>{g(_),R.previous.clear(),p(P,!1)})},({uid:P,name:I,elements:Z})=>{wu(B,P)||(B.each(Q=>p(Q,!1)),d(I,P,Z),R.previous.set(P),p(P,!0))}),{previous:R.previous,listeners:R.listeners}})})},30);return e.on("remove",()=>{y.cancel()}),e.on("NodeChange",()=>{y.throttle()}),{addListener:(T,_)=>{l(T,R=>({previous:R.previous,listeners:R.listeners.concat([_])}))}}},DP=(e,n)=>{const o=Xm(),r=l=>D.from(l.attr(o)).bind(n.lookup),c=l=>{var d,g;l.attr(Jm(),null),l.attr(Xm(),null),l.attr(Yg(),null);const p=D.from(l.attr(ef())).map(_=>_.split(",")).getOr([]),y=D.from(l.attr(Qm())).map(_=>_.split(",")).getOr([]);oe(p,_=>l.attr(_,null));const E=(g=(d=l.attr("class"))===null||d===void 0?void 0:d.split(" "))!==null&&g!==void 0?g:[],T=Lr(E,[Zp()].concat(y));l.attr("class",T.length>0?T.join(" "):null),l.attr(Qm(),null),l.attr(ef(),null)};e.serializer.addTempAttr(Yg()),e.serializer.addAttributeFilter(o,l=>{for(const d of l)r(d).each(g=>{g.persistent===!1&&(d.name==="span"?d.unwrap():c(d))})})},PT=()=>{const e={};return{register:(c,l)=>{e[c]={name:c,settings:l}},lookup:c=>Bn(e,c).map(l=>l.settings),getNames:()=>Wo(e)}},MP=(e,n,o)=>Math.min(Math.max(e,n),o),Ub=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let BT=0;const Wp=e=>{const o=new Date().getTime(),r=Math.floor(Ub()*1e9);return BT++,e+"_"+r+BT+String(o)},RP=(e,n)=>{oe(n,o=>{_u(e,o)})},NP=(e,n)=>{oe(n,o=>{Ed(e,o)})},LT=(e,n)=>U.fromDom(e.dom.cloneNode(n)),Fd=e=>LT(e,!1),Zb=e=>LT(e,!0),IT=(e,n)=>{const o=U.fromTag(n),r=ab(e);return li(o,r),o},FT=(e,n)=>{const o=IT(e,n);di(e,o);const r=Js(e);return Fl(o,r),Xn(e),o},$T=(e,n,o=we)=>{const r=new Qs(e,n),c=l=>{let d;do d=r[l]();while(d&&!Te(d)&&!o(d));return D.from(d).filter(Te)};return{current:()=>D.from(r.current()).filter(Te),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},tf=(e,n)=>{const o=n||(d=>e.isBlock(d)||An(d)||Tn(d)),r=(d,g,p,y)=>{if(Te(d)){const E=y(d,g,d.data);if(E!==-1)return D.some({container:d,offset:E})}return p().bind(E=>r(E.container,E.offset,p,y))};return{backwards:(d,g,p,y)=>{const E=$T(d,y??e.getRoot(),o);return r(d,g,()=>E.prev().map(T=>({container:T,offset:T.length})),p).getOrNull()},forwards:(d,g,p,y)=>{const E=$T(d,y??e.getRoot(),o);return r(d,g,()=>E.next().map(T=>({container:T,offset:0})),p).getOrNull()}}},Xg=((e,n)=>{const o=l=>{if(!e(l))throw new Error("Can only get "+n+" value of a "+n+" node");return r(l).getOr("")},r=l=>e(l)?D.from(l.dom.nodeValue):D.none();return{get:o,getOption:r,set:(l,d)=>{if(!e(l))throw new Error("Can only set raw "+n+" value of a "+n+" node");l.dom.nodeValue=d}}})(Ir,"text"),Jg=e=>Xg.get(e),HT=e=>Xg.getOption(e),VT=(e,n)=>Xg.set(e,n),PP=["td","th"],qj=["thead","tbody","tfoot"],Kj=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Yj=["li","dd","dt"],BP=["ul","ol","dl"],Xj=["pre","script","textarea","style"],Qg=e=>{let n;return o=>(n=n||Ao(e,Ue),ht(n,Ft(o)))},LP=e=>Ft(e)==="table",Lu=e=>ha(e)&&Ft(e)==="br",nf=Qg(Kj),AS=Qg(BP),of=Qg(Yj),IP=Qg(qj),jp=Qg(PP),Wb=Qg(Xj),$d=e=>{const n=[];let o=e.dom;for(;o;)n.push(U.fromDom(o)),o=o.lastChild;return n},zT=e=>{const n=$r(e,"br"),o=vt($d(e).slice(-1),Lu);n.length===o.length&&oe(o,Xn)},ul=()=>{const e=U.fromTag("br");return Is(e,"data-mce-bogus","1"),e},ql=e=>{Ru(e),qo(e,ul())},FP=(e,n)=>{Dr(e).each(o=>{Ll(o).each(r=>{n.isBlock(Ft(e))&&Lu(o)&&n.isBlock(Ft(r))&&Xn(o)})})},Us=Lp,jb=lS,ic=rc,$P=e=>e.insertContent(Us,{preserve_zwsp:!0}),OS=Ze,eh=Te,sf=e=>(eh(e)&&(e=e.parentNode),OS(e)&&e.hasAttribute("data-mce-caret")),Kl=e=>eh(e)&&jb(e.data),Fc=e=>sf(e)||Kl(e),UT=e=>e.firstChild!==e.lastChild||!An(e.firstChild),HP=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Us),l=e.parentNode;if(n){const d=e.previousSibling;if(eh(d)){if(Fc(d))return d;if(Zr(d))return d.splitText(d.data.length-1)}l==null||l.insertBefore(c,e)}else{const d=e.nextSibling;if(eh(d)){if(Fc(d))return d;if(an(d))return d.splitText(1),d}e.nextSibling?l==null||l.insertBefore(c,e.nextSibling):l==null||l.appendChild(c)}return c},th=e=>{const n=e.container();return Te(n)?n.data.charAt(e.offset())===Us||e.isAtStart()&&Kl(n.previousSibling):!1},Iu=e=>{const n=e.container();return Te(n)?n.data.charAt(e.offset()-1)===Us||e.isAtEnd()&&Kl(n.nextSibling):!1},Gb=(e,n,o)=>{var r;const l=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);l.setAttribute("data-mce-caret",o?"before":"after"),l.setAttribute("data-mce-bogus","all"),l.appendChild(ul().dom);const d=n.parentNode;return o?d==null||d.insertBefore(l,n):n.nextSibling?d==null||d.insertBefore(l,n.nextSibling):d==null||d.appendChild(l),l},an=e=>eh(e)&&e.data[0]===Us,Zr=e=>eh(e)&&e.data[e.data.length-1]===Us,rf=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];zm(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},Gp=e=>e&&e.hasAttribute("data-mce-caret")?(rf(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,io=e=>sf(e.startContainer),af=Math.round,Hd=e=>e?{left:af(e.left),top:af(e.top),bottom:af(e.bottom),right:af(e.right),width:af(e.width),height:af(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},ZT=(e,n)=>(e=Hd(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Jj=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,WT=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,to=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:WT(n.top-e.bottom,e,n)},qp=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:WT(n.bottom-e.top,e,n),VP=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,zP=e=>cs(e,(n,o)=>n.fold(()=>D.some(o),r=>{const c=Math.min(o.left,r.left),l=Math.min(o.top,r.top),d=Math.max(o.right,r.right),g=Math.max(o.bottom,r.bottom);return D.some({top:l,right:d,bottom:g,left:c,width:d-c,height:g-l})}),D.none()),cf=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},pi=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),qb=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Fu=(e,n)=>{if(Ze(e)&&e.hasChildNodes()){const o=e.childNodes,r=MP(n,0,o.length-1);return o[r]}else return e},Xe=(e,n)=>{if(!(n<0&&Ze(e)&&e.hasChildNodes()))return Fu(e,n)},UP=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),jT=e=>re(e)&&e.charCodeAt(0)>=768&&UP.test(e),ZP=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},GT=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},qT=ve,DS=Tn,Kp=An,nh=Te,WP=ol(["script","style","textarea"]),Yp=ol(["img","input","textarea","hr","iframe","video","audio","object","embed"]),jP=ol(["table"]),Kb=Fc,bi=e=>Kb(e)?!1:nh(e)?!WP(e.parentNode):Yp(e)||Kp(e)||jP(e)||Yb(e),GP=e=>Ze(e)&&e.getAttribute("unselectable")==="true",Yb=e=>!GP(e)&&DS(e),Xb=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Yb(o))return!1;if(qT(o))return!0}return!0},qP=e=>Yb(e)?!cs(Rn(e.getElementsByTagName("*")),(n,o)=>n||qT(o),!1):!1,KP=e=>Yp(e)||qP(e),KT=(e,n)=>bi(e)&&Xb(e,n),MS=Ze,YP=bi,YT=vb("display","block table"),XP=vb("float","left right"),Xp=GT(MS,YP,wn(XP)),JP=wn(vb("white-space","pre pre-line pre-wrap")),lf=Te,RS=An,XT=Jn.nodeIndex,Jb=Xe,NS=e=>e?e.createRange():Jn.DOM.createRng(),PS=e=>re(e)&&/[\r\n\t ]/.test(e),JT=e=>!!e.setStart&&!!e.setEnd,BS=e=>{const n=e.startContainer,o=e.startOffset;if(PS(e.toString())&&JP(n.parentNode)&&Te(n)){const r=n.data;if(PS(r[o-1])||PS(r[o+1]))return!0}return!1},QP=e=>{const n=e.ownerDocument,o=NS(n),r=n.createTextNode(ks),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const l=Hd(o.getBoundingClientRect());return c.removeChild(r),l},uf=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&Te(o)&&r===0&&c===1){const l=e.cloneRange();return l.setEndAfter(o),Vd(l)}else return null},QT=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Vd=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Hd(r[0]):o=Hd(e.getBoundingClientRect()),!JT(e)&&RS(e)&&QT(o)?QP(e):QT(o)&&JT(e)&&(n=uf(e))!==null&&n!==void 0?n:o},df=(e,n)=>{const o=ZT(e,n);return o.width=1,o.right=o.left+1,o},eB=e=>{const n=[],o=d=>{d.height!==0&&(n.length>0&&Jj(d,n[n.length-1])||n.push(d))},r=(d,g)=>{const p=NS(d.ownerDocument);if(g<d.data.length){if(jT(d.data[g]))return;if(jT(d.data[g-1])&&(p.setStart(d,g),p.setEnd(d,g+1),!BS(p))){o(df(Vd(p),!1));return}}g>0&&(p.setStart(d,g-1),p.setEnd(d,g),BS(p)||o(df(Vd(p),!1))),g<d.data.length&&(p.setStart(d,g),p.setEnd(d,g+1),BS(p)||o(df(Vd(p),!0)))},c=e.container(),l=e.offset();if(lf(c))return r(c,l),n;if(MS(c))if(e.isAtEnd()){const d=Jb(c,l);lf(d)&&r(d,d.data.length),Xp(d)&&!RS(d)&&o(df(Vd(d),!1))}else{const d=Jb(c,l);if(lf(d)&&r(d,0),Xp(d)&&e.isAtEnd())return o(df(Vd(d),!1)),n;const g=Jb(e.container(),e.offset()-1);Xp(g)&&!RS(g)&&(YT(g)||YT(d)||!Xp(d))&&o(df(Vd(g),!1)),Xp(d)&&o(df(Vd(d),!0))}return n},fe=(e,n,o)=>{const r=()=>(lf(e),n===0),c=()=>lf(e)?n>=e.data.length:n>=e.childNodes.length,l=()=>{const E=NS(e.ownerDocument);return E.setStart(e,n),E.setEnd(e,n),E},d=()=>(o||(o=eB(fe(e,n))),o),g=()=>d().length>0,p=E=>E&&e===E.container()&&n===E.offset(),y=E=>Jb(e,E?n-1:n);return{container:Ie(e),offset:Ie(n),toRange:l,getClientRects:d,isVisible:g,isAtStart:r,isAtEnd:c,isEqual:p,getNode:y}};fe.fromRangeStart=e=>fe(e.startContainer,e.startOffset),fe.fromRangeEnd=e=>fe(e.endContainer,e.endOffset),fe.after=e=>fe(e.parentNode,XT(e)+1),fe.before=e=>fe(e.parentNode,XT(e)),fe.isAbove=(e,n)=>Ls(Qo(n.getClientRects()),Ks(e.getClientRects()),to).getOr(!1),fe.isBelow=(e,n)=>Ls(Ks(n.getClientRects()),Qo(e.getClientRects()),qp).getOr(!1),fe.isAtStart=e=>e?e.isAtStart():!1,fe.isAtEnd=e=>e?e.isAtEnd():!1,fe.isTextPosition=e=>e?Te(e.container()):!1,fe.isElementPosition=e=>!fe.isTextPosition(e);const vi=(e,n)=>{Te(n)&&n.data.length===0&&e.remove(n)},mf=(e,n,o)=>{n.insertNode(o),vi(e,o.previousSibling),vi(e,o.nextSibling)},tB=(e,n,o)=>{const r=D.from(o.firstChild),c=D.from(o.lastChild);n.insertNode(o),r.each(l=>vi(e,l.previousSibling)),c.each(l=>vi(e,l.nextSibling))},Qb=(e,n,o)=>{Fs(o)?tB(e,n,o):mf(e,n,o)},yi=Te,LS=zm,e_=Jn.nodeIndex,t_=e=>{const n=e.parentNode;return LS(n)?t_(n):n},ev=e=>e?Or(e.childNodes,(n,o)=>(LS(o)&&o.nodeName!=="BR"?n=n.concat(ev(o)):n.push(o),n),[]):[],nB=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&yi(o);)n+=o.data.length;return n},n_=e=>n=>e===n,oB=e=>{let n,o;n=ev(t_(e)),o=Gi(n,n_(e),e),n=n.slice(0,o+1);const r=Or(n,(c,l,d)=>(yi(l)&&yi(n[d-1])&&c++,c),0);return n=Tl(n,ol([e.nodeName])),o=Gi(n,n_(e),e),o-r},o_=e=>(yi(e)?"text()":e.nodeName.toLowerCase())+"["+oB(e)+"]",sB=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e;c=c.parentNode)r.push(c);return r},s_=(e,n)=>{let o=[],r=n.container(),c=n.offset(),l;if(yi(r))l=nB(r,c);else{const g=r.childNodes;c>=g.length?(l="after",c=g.length-1):l="before",r=g[c]}o.push(o_(r));let d=sB(e,r);return d=Tl(d,wn(zm)),o=o.concat(ec(d,g=>o_(g))),o.reverse().join("/")+","+l},rB=(e,n,o)=>{let r=ev(e);return r=Tl(r,(c,l)=>!yi(c)||!yi(r[l-1])),r=Tl(r,ol([n])),r[o]},aB=(e,n)=>{let o=e,r=0;for(;yi(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!yi(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return yi(e)&&n>e.data.length&&(n=e.data.length),fe(e,n)},r_=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",l=Or(r,(d,g)=>{const p=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(g);return p?(p[1]==="text()"&&(p[1]="#text"),rB(d,p[1],parseInt(p[2],10))):null},e);if(!l)return null;if(!yi(l)&&l.parentNode){let d;return c==="after"?d=e_(l)+1:d=e_(l),fe(l.parentNode,d)}return aB(l,parseInt(c,10))},tv=Tn,cB=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&Te(c);c=c.previousSibling)r+=e(c.data).length;return r},a_=(e,n,o,r,c)=>{const l=c?r.startContainer:r.endContainer;let d=c?r.startOffset:r.endOffset;const g=[],p=e.getRoot();if(Te(l))g.push(o?cB(n,l,d):d);else{let y=0;const E=l.childNodes;d>=E.length&&E.length&&(y=1,d=Math.max(0,E.length-1)),g.push(e.nodeIndex(E[d],o)+y)}for(let y=l;y&&y!==p;y=y.parentNode)g.push(e.nodeIndex(y,o));return g},iB=(e,n,o,r)=>{const c=n.dom,l=a_(c,e,o,r,!0),d=n.isForward(),g=io(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:l,forward:d,...g};{const p=a_(c,e,o,r,!1);return{start:l,end:p,forward:d,...g}}},lo=(e,n,o)=>{let r=0;return Ee.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},IS=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Ze(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},c_=e=>(IS(e,!0),IS(e,!1),e),i_=(e,n)=>{if(Ze(e)&&(e=Fu(e,n),tv(e)))return e;if(Fc(e)){Te(e)&&sf(e)&&(e=e.parentNode);let o=e.previousSibling;if(tv(o)||(o=e.nextSibling,tv(o)))return o}},FS=e=>i_(e.startContainer,e.startOffset)||i_(e.endContainer,e.endOffset),dr=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||tv(r)){const d=r.nodeName;return{name:d,index:lo(o.dom,d,r)}}const l=FS(c);if(l){const d=l.tagName;return{name:d,index:lo(o.dom,d,l)}}return iB(e,o,n,c)},lc=e=>{const n=e.getRng();return{start:s_(e.dom.getRoot(),fe.fromRangeStart(n)),end:s_(e.dom.getRoot(),fe.fromRangeEnd(n)),forward:e.isForward()}},l_=e=>({rng:e.getRng(),forward:e.isForward()}),$S=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},HS=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),l=e.isCollapsed(),d=e.getNode(),g=d.nodeName,p=e.isForward();if(g==="IMG")return{name:g,index:lo(o,g,d)};const y=c_(r.cloneRange());if(!l){y.collapse(!1);const T=$S(o,c+"_end",n);Qb(o,y,T)}r=c_(r),r.collapse(!0);const E=$S(o,c+"_start",n);return Qb(o,r,E),e.moveToBookmark({id:c,keep:!0,forward:p}),{id:c,forward:p}},lB=(e,n,o=!1)=>n===2?dr(ic,o,e):n===3?lc(e):n?l_(e):HS(e,!1),nv=Ye(dr,Yn,!0),u_=e=>{const n=l=>l(e),o=Ie(e),r=()=>c,c={tag:!0,inner:e,fold:(l,d)=>d(e),isValue:Ue,isError:we,map:l=>fs.value(l(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:l=>{l(e)},toOptional:()=>D.some(e)};return c},VS=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:we,isError:Ue,map:n,mapError:r=>fs.error(r(e)),bind:n,exists:we,forall:Ue,getOr:Yn,or:Yn,getOrThunk:Ja,orThunk:Ja,getOrDie:as(String(e)),each:nt,toOptional:D.none};return o},fs={value:u_,error:VS,fromOption:(e,n)=>e.fold(()=>VS(n),u_)},Ci={generate:e=>{if(!Kn(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return oe(e,(r,c)=>{const l=Wo(r);if(l.length!==1)throw new Error("one and only one name per case");const d=l[0],g=r[d];if(o[d]!==void 0)throw new Error("duplicate key detected:"+d);if(d==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Kn(g))throw new Error("case arguments must be an array");n.push(d),o[d]=(...p)=>{const y=p.length;if(y!==g.length)throw new Error("Wrong number of arguments to case "+d+". Expected "+g.length+" ("+g+"), got "+y);return{fold:(...T)=>{if(T.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+T.length);return T[c].apply(null,p)},match:T=>{const _=Wo(T);if(n.length!==_.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+_.join(","));if(!_o(n,B=>kt(_,B)))throw new Error("Not all branches were specified when using match. Specified: "+_.join(", ")+`
Required: `+n.join(", "));return T[d].apply(null,p)},log:T=>{console.log(T,{constructors:n,constructor:d,params:p})}}}}),o}};Ci.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const fo=e=>{const n=[],o=[];return oe(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},Yl=e=>e.type==="inline-command"||e.type==="inline-format",Jp=e=>e.type==="block-command"||e.type==="block-format",uB=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,d_=e=>{var n;const o=c=>fs.error({message:c,pattern:e}),r=(c,l,d)=>{if(e.format!==void 0){let g;if(Kn(e.format)){if(!_o(e.format,re))return o(c+" pattern has non-string items in the `format` array");g=e.format}else if(re(e.format))g=[e.format];else return o(c+" pattern has non-string `format` parameter");return fs.value(l(g))}else return e.cmd!==void 0?re(e.cmd)?fs.value(d(e.cmd,e.value)):o(c+" pattern has non-string `cmd` parameter"):o(c+" pattern is missing both `format` and `cmd` parameters")};if(!Ot(e))return o("Raw pattern is not an object");if(!re(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!re(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let c=e.start,l=e.end;return l.length===0&&(l=c,c=""),r("Inline",d=>({type:"inline-format",start:c,end:l,format:d}),(d,g)=>({type:"inline-command",start:c,end:l,cmd:d,value:g}))}else{if(e.replacement!==void 0)return re(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):fs.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const c=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",l=>({type:"block-format",start:e.start,format:l[0],trigger:c}),(l,d)=>({type:"block-command",start:e.start,cmd:l,value:d,trigger:c}))}}},m_=e=>vt(e,Jp),zd=e=>vt(e,Yl),mr=(e,n)=>({inlinePatterns:zd(e),blockPatterns:m_(e),dynamicPatternsLookup:n}),Xl=(e,n)=>({...e,blockPatterns:vt(e.blockPatterns,o=>uB(o,n))}),f_=e=>{const n=fo(Dt(e,d_));return oe(n.errors,o=>console.error(o.message,o.pattern)),n.values},dB=e=>n=>{const o=e(n);return f_(o)},mB=(e,n)=>e.dispatch("PreProcess",n),ov=(e,n)=>e.dispatch("PostProcess",n),zS=e=>{e.dispatch("remove")},US=e=>{e.dispatch("detach")},ZS=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},g_=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},h_=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},p_=e=>{e.dispatch("PreInit")},b_=e=>{e.dispatch("PostRender")},fB=e=>{e.dispatch("Init")},fr=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},v_=(e,n,o)=>{e.dispatch(n,o)},$u=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},WS=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},y_=(e,n)=>e.dispatch("BeforeSetContent",n),jS=(e,n)=>e.dispatch("SetContent",n),GS=(e,n)=>e.dispatch("BeforeGetContent",n),sv=(e,n)=>e.dispatch("GetContent",n),C_=(e,n)=>{e.dispatch("AutocompleterStart",n)},gB=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},qS=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},gs=e=>{e.dispatch("AutocompleterEnd")},hs=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),gr=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),nr=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),Zs=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),ps=(e,n)=>e.dispatch("DisabledStateChange",{state:n}),Qp=M().deviceType,KS=Qp.isTouch(),S_=Jn.DOM,x_=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return cs(n,(o,r)=>{const c=r.split("="),l=c[0],d=c.length>1?c[1]:l;return o[Qn(l)]=Qn(d),o},{})},YS=e=>xt(e,RegExp),Je=e=>n=>n.options.get(e),oh=e=>re(e)||Ot(e),rv=(e,n="")=>o=>{const r=re(o);if(r)if(o.indexOf("=")!==-1){const c=x_(o);return{value:Bn(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},hB=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:rv(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:rv(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=re(o)&&ls(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=kt(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>$t(o)?{valid:!0,value:o}:re(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||re(o)||Sn(o,re);return r?re(o)?{value:Dt(o.split(","),Qn),valid:r}:Kn(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:cx(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=re(o)||Sn(o,re);return r?{value:Kn(o)?o:Dt(o.split(","),Qn),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=$t(o)||re(o);return r?o===!1||Qp.isiPhone()||Qp.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!KS}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||re(o)||Ht(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||re(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("disabled",{processor:o=>$t(o)?(e.initialized&&gv(e)!==o&&Promise.resolve().then(()=>{ps(e,o)}),{valid:!0,value:o}):{valid:!1,message:"The value must be a boolean."},default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:o=>{const r=Sn(o,re);return r?{value:o,valid:r}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:oh}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:oh}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:oh}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:oh}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>re(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>Sn(o,Ot)||o===!1?{value:f_(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>Ht(o)?{value:dB(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>Sn(o,YS)?{value:o,valid:!0}:YS(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=kt(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=kt(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:ll.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:S_.getAttrib(e.getElement(),"placeholder")})})},tG=Je("iframe_attrs"),pB=Je("doctype"),w_=Je("document_base_url"),Ba=Je("body_id"),nG=Je("body_class"),E_=Je("content_security_policy"),La=Je("br_in_pre"),or=Je("forced_root_block"),Jl=Je("forced_root_block_attrs"),Hu=Je("newline_behavior"),Wr=Je("br_newline_selector"),XS=Je("no_newline_selector"),JS=Je("keep_styles"),k_=Je("end_container_on_empty_block"),QS=Je("automatic_uploads"),av=Je("images_reuse_filename"),bB=Je("images_replace_blob_uris"),ex=Je("icons"),vB=Je("icons_url"),yB=Je("images_upload_url"),CB=Je("images_upload_base_path"),SB=Je("images_upload_credentials"),xB=Je("images_upload_handler"),tx=Je("content_css_cors"),nx=Je("referrer_policy"),ox=Je("language"),wB=Je("language_url"),e1=Je("indent_use_margin"),EB=Je("indentation"),kB=Je("content_css"),TB=Je("content_style"),T_=Je("font_css"),_B=Je("directionality"),__=Je("inline_boundaries_selector"),jr=Je("object_resizing"),sx=Je("resize_img_proportional"),A_=Je("placeholder"),rx=Je("event_root"),cv=Je("service_message"),sh=Je("theme"),AB=Je("theme_url"),ax=Je("model"),OB=Je("model_url"),t1=Je("inline_boundaries"),DB=Je("formats"),MB=Je("preview_styles"),RB=Je("format_empty_lines"),NB=Je("format_noneditable_selector"),PB=Je("custom_ui_selector"),cx=Je("inline"),BB=Je("hidden_input"),LB=Je("submit_patch"),IB=Je("add_form_submit_trigger"),O_=Je("add_unload_trigger"),D_=Je("custom_undo_redo_levels"),rh=Je("disable_nodechange"),ix=Je("readonly"),FB=Je("editable_root"),M_=Je("content_css_cors"),iv=Je("plugins"),Si=Je("external_plugins"),lv=Je("block_unsupported_drop"),uv=Je("visual"),lx=Je("visual_table_class"),R_=Je("visual_anchor_class"),Ql=Je("iframe_aria_text"),ux=Je("setup"),$B=Je("init_instance_callback"),Ud=Je("urlconverter_callback"),dv=Je("auto_focus"),HB=Je("browser_spellcheck"),VB=Je("protect"),zB=Je("paste_block_drop"),mv=Je("paste_data_images"),N_=Je("paste_preprocess"),UB=Je("paste_postprocess"),ZB=Je("newdocument_content"),P_=Je("paste_webkit_styles"),WB=Je("paste_remove_styles_if_webkit"),B_=Je("paste_merge_formats"),jB=Je("smart_paste"),GB=Je("paste_as_text"),qB=Je("paste_tab_spaces"),L_=Je("allow_html_data_urls"),dx=Je("text_patterns"),I_=Je("text_patterns_lookup"),F_=Je("noneditable_class"),KB=Je("editable_class"),YB=Je("noneditable_regexp"),XB=Je("preserve_cdata"),oG=Je("highlight_on_focus"),n1=Je("xss_sanitization"),mx=Je("init_content_sync"),JB=e=>e.options.isSet("text_patterns_lookup"),QB=e=>Ee.explode(e.options.get("font_size_style_values")),eL=e=>Ee.explode(e.options.get("font_size_classes")),tL=e=>e.options.get("encoding")==="xml",$_=e=>Ee.explode(e.options.get("images_file_types")),nL=Je("table_tab_navigation"),fv=Je("details_initial_state"),oL=Je("details_serialized_state"),H_=Je("sandbox_iframes"),fx=e=>e.options.get("sandbox_iframes_exclusions"),sL=Je("convert_unsafe_embeds"),rL=Je("license_key"),aL=Je("api_key"),gv=Je("disabled"),o1=Ze,V_=Te,z_=e=>{const n=e.parentNode;n&&n.removeChild(e)},gx=e=>{const n=ic(e);return{count:e.length-n.length,text:n}},hx=e=>{let n;for(;(n=e.data.lastIndexOf(Us))!==-1;)e.deleteData(n,1)},px=(e,n)=>(ff(e),n),cL=(e,n)=>{const o=gx(e.data.substr(0,n.offset())),r=gx(e.data.substr(n.offset()));return(o.text+r.text).length>0?(hx(e),fe(e,n.offset()-o.count)):n},iL=(e,n)=>{const o=n.container(),r=Em(Rn(o.childNodes),e).map(c=>c<n.offset()?fe(o,n.offset()-1):n).getOr(n);return ff(e),r},s1=(e,n)=>V_(e)&&n.container()===e?cL(e,n):px(e,n),U_=(e,n)=>n.container()===e.parentNode?iL(e,n):px(e,n),lL=(e,n)=>fe.isTextPosition(n)?s1(e,n):U_(e,n),ff=e=>{o1(e)&&Fc(e)&&(UT(e)?e.removeAttribute("data-mce-caret"):z_(e)),V_(e)&&(hx(e),e.data.length===0&&z_(e))},uL=Tn,Z_=er,W_=Cb,oa="*[contentEditable=false],video,audio,embed,object",j_=(e,n,o)=>{const r=ZT(n.getBoundingClientRect(),o);let c,l;if(e.tagName==="BODY"){const g=e.ownerDocument.documentElement;c=e.scrollLeft||g.scrollLeft,l=e.scrollTop||g.scrollTop}else{const g=e.getBoundingClientRect();c=e.scrollLeft-g.left,l=e.scrollTop-g.top}r.left+=c,r.right+=c,r.top+=l,r.bottom+=l,r.width=1;let d=n.offsetWidth-n.clientWidth;return d>0&&(o&&(d*=-1),r.left+=d,r.right+=d),r},dL=e=>{var n,o;const r=$r(U.fromDom(e),oa);for(let c=0;c<r.length;c++){const l=r[c].dom;let d=l.previousSibling;if(Zr(d)){const g=d.data;g.length===1?(n=d.parentNode)===null||n===void 0||n.removeChild(d):d.deleteData(g.length-1,1)}d=l.nextSibling,an(d)&&(d.data.length===1?(o=d.parentNode)===null||o===void 0||o.removeChild(d):d.deleteData(0,1))}},mL=(e,n,o,r)=>{const c=Vr();let l,d;const g=or(e),p=e.dom,y=(P,I)=>{let Z;if(E(),W_(I))return null;if(o(I)){const Q=Gb(g,I,P),ee=j_(n,I,P);p.setStyle(Q,"top",ee.top),p.setStyle(Q,"caret-color","transparent"),d=Q;const ne=p.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});p.setStyles(ne,{...ee}),p.add(n,ne),c.set({caret:ne,element:I,before:P}),P&&p.addClass(ne,"mce-visual-caret-before"),T(),Z=I.ownerDocument.createRange(),Z.setStart(Q,0),Z.setEnd(Q,0)}else return d=HP(I,P),Z=I.ownerDocument.createRange(),r1(d.nextSibling)?(Z.setStart(d,0),Z.setEnd(d,0)):(Z.setStart(d,1),Z.setEnd(d,1)),Z;return Z},E=()=>{dL(n),d&&(ff(d),d=null),c.on(P=>{p.remove(P.caret),c.clear()}),l&&(clearInterval(l),l=void 0)},T=()=>{l=setInterval(()=>{c.on(P=>{r()?p.toggleClass(P.caret,"mce-visual-caret-hidden"):p.addClass(P.caret,"mce-visual-caret-hidden")})},500)};return{show:y,hide:E,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(P=>{const I=j_(n,P.element,P.before);p.setStyles(P.caret,{...I})})},destroy:()=>clearInterval(l)}},bx=()=>Tt.browser.isFirefox(),r1=e=>uL(e)||Z_(e),a1=e=>(r1(e)||sl(e)&&bx())&&wg(U.fromDom(e)).exists(Mu),G_=ve,vx=Tn,sG=er,q_=vb("display","block table table-cell table-row table-caption list-item"),K_=Fc,c1=sf,fL=Ze,Y_=Te,yx=bi,gf=e=>e>0,hf=e=>e<0,hv=(e,n)=>{let o;for(;o=e(n);)if(!c1(o))return o;return null},Zd=(e,n,o,r,c)=>{const l=new Qs(e,r),d=vx(e)||c1(e);let g;if(hf(n)){if(d&&(g=hv(l.prev.bind(l),!0),o(g)))return g;for(;g=hv(l.prev.bind(l),c);)if(o(g))return g}if(gf(n)){if(d&&(g=hv(l.next.bind(l),!0),o(g)))return g;for(;g=hv(l.next.bind(l),c);)if(o(g))return g}return null},X_=(e,n)=>{const o=c=>G_(c.dom),r=c=>c.dom===n;return tl(U.fromDom(e),o,r).map(c=>c.dom).getOr(n)},Vu=(e,n)=>{for(;e&&e!==n;){if(q_(e))return e;e=e.parentNode}return null},dl=(e,n,o)=>Vu(e.container(),o)===Vu(n.container(),o),pv=(e,n)=>{if(!n)return D.none();const o=n.container(),r=n.offset();return fL(o)?D.from(o.childNodes[r+e]):D.none()},Cx=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},J_=(e,n,o)=>Vu(n,e)===Vu(o,e),Sx=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let l=c[r];if(l&&K_(l)&&(l=l[r]),vx(l)||sG(l)){if(J_(n,l,c))return l;break}if(yx(l))break;c=c.parentNode}return null},ah=Ye(Cx,!0),ch=Ye(Cx,!1),bv=(e,n,o)=>{let r;const c=Ye(Sx,!0,n),l=Ye(Sx,!1,n),d=o.startContainer,g=o.startOffset;if(sf(d)){const p=Y_(d)?d.parentNode:d,y=p.getAttribute("data-mce-caret");if(y==="before"&&(r=p.nextSibling,a1(r)))return ah(r);if(y==="after"&&(r=p.previousSibling,a1(r)))return ch(r)}if(!o.collapsed)return o;if(Te(d)){if(K_(d)){if(e===1){if(r=l(d),r)return ah(r);if(r=c(d),r)return ch(r)}if(e===-1){if(r=c(d),r)return ch(r);if(r=l(d),r)return ah(r)}return o}if(Zr(d)&&g>=d.data.length-1)return e===1&&(r=l(d),r)?ah(r):o;if(an(d)&&g<=1)return e===-1&&(r=c(d),r)?ch(r):o;if(g===d.data.length)return r=l(d),r?ah(r):o;if(g===0)return r=c(d),r?ch(r):o}return o},Q_=(e,n)=>pv(e?0:-1,n).filter(vx),i1=(e,n,o)=>{const r=bv(e,n,o);return e===-1?fe.fromRangeStart(r):fe.fromRangeEnd(r)},vv=e=>D.from(e.getNode()).map(U.fromDom),gL=e=>D.from(e.getNode(!0)).map(U.fromDom),xx=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},yv=(e,n)=>{const o=dl(e,n);return!o&&An(e.getNode())?!0:o};var sr;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(sr||(sr={}));const hL=Tn,eu=Te,eA=Ze,Cv=An,l1=bi,pL=KP,Sv=KT,rG=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},tA=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,hr=(e,n)=>{if(gf(e)){if(l1(n.previousSibling)&&!eu(n.previousSibling))return fe.before(n);if(eu(n))return fe(n,0)}if(hf(e)){if(l1(n.nextSibling)&&!eu(n.nextSibling))return fe.after(n);if(eu(n))return fe(n,n.data.length)}return hf(e)?Cv(n)?fe.before(n):fe.after(n):fe.before(n)},wx=(e,n)=>{const o=n.nextSibling;return o&&l1(o)?eu(o)?fe(o,0):fe.before(o):pf(sr.Forwards,fe.after(n),e)},pf=(e,n,o)=>{let r,c,l,d;if(!eA(o)||!n)return null;if(n.isEqual(fe.after(o))&&o.lastChild){if(d=fe.after(o.lastChild),hf(e)&&l1(o.lastChild)&&eA(o.lastChild))return Cv(o.lastChild)?fe.before(o.lastChild):d}else d=n;const g=d.container();let p=d.offset();if(eu(g)){if(hf(e)&&p>0)return fe(g,--p);if(gf(e)&&p<g.length)return fe(g,++p);r=g}else{if(hf(e)&&p>0&&(c=tA(g,p-1),l1(c)))return!pL(c)&&(l=Zd(c,e,Sv,c),l)?eu(l)?fe(l,l.data.length):fe.after(l):eu(c)?fe(c,c.data.length):fe.before(c);if(gf(e)&&p<g.childNodes.length&&(c=tA(g,p),l1(c)))return Cv(c)?wx(o,c):!pL(c)&&(l=Zd(c,e,Sv,c),l)?eu(l)?fe(l,0):fe.before(l):eu(c)?fe(c,0):fe.after(c);r=c||d.getNode()}if(r&&(gf(e)&&d.isAtEnd()||hf(e)&&d.isAtStart())&&(r=Zd(r,e,Ue,o,!0),Sv(r,o)))return hr(e,r);c=r&&Zd(r,e,Sv,o);const y=ma(vt(rG(g,o),hL));return y&&(!c||!y.contains(c))?(gf(e)?d=fe.after(y):d=fe.before(y),d):c?hr(e,c):null},uc=e=>({next:n=>pf(sr.Forwards,n,e),prev:n=>pf(sr.Backwards,n,e)}),nA=(e,n,o)=>{const r=e?fe.before(o):fe.after(o);return dc(e,n,r)},Ex=e=>An(e)?fe.before(e):fe.after(e),kx=e=>fe.isTextPosition(e)?e.offset()===0:bi(e.getNode()),oA=e=>{if(fe.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return bi(e.getNode(!0))},sA=(e,n)=>!fe.isTextPosition(e)&&!fe.isTextPosition(n)&&e.getNode()===n.getNode(!0),bL=e=>!fe.isTextPosition(e)&&An(e.getNode()),bf=(e,n,o)=>e?!sA(n,o)&&!bL(n)&&oA(n)&&kx(o):!sA(o,n)&&kx(n)&&oA(o),dc=(e,n,o)=>{const r=uc(n);return D.from(e?r.next(o):r.prev(o))},vf=(e,n,o)=>dc(e,n,o).bind(r=>dl(o,r,n)&&bf(e,o,r)?dc(e,n,r):D.some(r)),tu=(e,n,o,r)=>vf(e,n,o).bind(c=>r(c)?tu(e,n,c,r):D.some(c)),yf=(e,n)=>{const o=e?n.firstChild:n.lastChild;return Te(o)?D.some(fe(o,e?0:o.data.length)):o?bi(o)?D.some(e?fe.before(o):Ex(o)):nA(e,n,o):D.none()},Gr=Ye(dc,!0),qr=Ye(dc,!1),Mr=Ye(yf,!0),xi=Ye(yf,!1),xv="_mce_caret",mc=e=>Ze(e)&&e.id===xv,Cf=(e,n)=>{let o=n;for(;o&&o!==e;){if(mc(o))return o;o=o.parentNode}return null},vL=e=>re(e.start),rA=e=>ht(e,"rng"),aA=e=>ht(e,"id"),cA=e=>ht(e,"name"),iA=e=>Ee.isArray(e.start),wv=e=>!cA(e)&&$t(e.forward)?e.forward:!0,lA=(e,n)=>(Ze(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),uA=(e,n)=>{const o=D.from(r_(e.getRoot(),n.start)),r=D.from(r_(e.getRoot(),n.end));return Ls(o,r,(c,l)=>{const d=e.createRng();return d.setStart(c.container(),c.offset()),d.setEnd(l.container(),l.offset()),{range:d,forward:wv(n)}})},yL=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Us);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},dA=e=>!e.hasChildNodes(),CL=(e,n)=>xi(e).fold(we,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),SL=(e,n,o)=>dA(n)&&Cf(e,n)?(yL(n,o),!0):!1,mA=(e,n,o,r)=>{const c=o[n?"start":"end"],l=e.getRoot();if(c){let d=l,g=c[0];for(let p=c.length-1;d&&p>=1;p--){const y=d.childNodes;if(SL(l,d,r))return!0;if(c[p]>y.length-1)return SL(l,d,r)?!0:CL(d,r);d=y[c[p]]}Te(d)&&(g=Math.min(c[0],d.data.length)),Ze(d)&&(g=Math.min(c[0],d.childNodes.length)),n?r.setStart(d,g):r.setEnd(d,g)}return!0},Tx=e=>Te(e)&&e.data.length>0,xL=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,l=o.keep;if(r&&c){let d,g;if(n==="start"?l?r.hasChildNodes()?(d=r.firstChild,g=1):Tx(r.nextSibling)?(d=r.nextSibling,g=0):Tx(r.previousSibling)?(d=r.previousSibling,g=r.previousSibling.data.length):(d=c,g=e.nodeIndex(r)+1):(d=c,g=e.nodeIndex(r)):l?r.hasChildNodes()?(d=r.firstChild,g=1):Tx(r.previousSibling)?(d=r.previousSibling,g=r.previousSibling.data.length):(d=c,g=e.nodeIndex(r)):(d=c,g=e.nodeIndex(r)),!l){const p=r.previousSibling,y=r.nextSibling;Ee.each(Ee.grep(r.childNodes),T=>{Te(T)&&(T.data=T.data.replace(/\uFEFF/g,""))});let E;for(;E=e.get(o.id+"_"+n);)e.remove(E,!0);if(Te(y)&&Te(p)&&!Tt.browser.isOpera()){const T=p.data.length;p.appendData(y.data),e.remove(y),d=p,g=T}}return D.some(fe(d,g))}else return D.none()},wL=(e,n)=>{const o=e.createRng();return mA(e,!0,n,o)&&mA(e,!1,n,o)?D.some({range:o,forward:wv(n)}):D.none()},hn=(e,n)=>{const o=xL(e,"start",n),r=xL(e,"end",n);return Ls(o,r.or(o),(c,l)=>{const d=e.createRng();return d.setStart(lA(e,c.container()),c.offset()),d.setEnd(lA(e,l.container()),l.offset()),{range:d,forward:wv(n)}})},Wd=(e,n)=>D.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),ih=(e,n)=>{const o=e.dom;if(n){if(iA(n))return wL(o,n);if(vL(n))return uA(o,n);if(aA(n))return hn(o,n);if(cA(n))return Wd(o,n);if(rA(n))return D.some({range:n.rng,forward:wv(n)})}return D.none()},_x=(e,n,o)=>lB(e,n,o),EL=(e,n)=>{ih(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},Ia=e=>Ze(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",lh=(e=>n=>e===n)(ks),zu=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Ev=e=>!zu(e)&&!lh(e)&&!lS(e),fA=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},cG=e=>is(e,n=>{const o=qb(n);return o?[U.fromDom(o)]:[]}),iG=e=>fA(e).length>1,kL=e=>vt(cG(e),jp),lG=e=>$r(e,"td[data-mce-selected],th[data-mce-selected]"),gA=(e,n)=>{const o=lG(n);return o.length>0?o:kL(e)},Sf=e=>gA(fA(e.selection.getSel()),U.fromDom(e.getBody())),u1=(e,n)=>Fm(e,"table",n),hA=e=>{const n=e.startContainer,o=e.startOffset;return Te(n)?o===0?D.some(U.fromDom(n)):D.none():D.from(n.childNodes[o]).map(U.fromDom)},uG=e=>{const n=e.endContainer,o=e.endOffset;return Te(n)?o===n.data.length?D.some(U.fromDom(n)):D.none():D.from(n.childNodes[o-1]).map(U.fromDom)},pA=e=>Nc(e).fold(Ie([e]),n=>[e].concat(pA(n))),kv=e=>Dr(e).fold(Ie([e]),n=>Ft(n)==="br"?Ll(n).map(o=>[e].concat(kv(o))).getOr([]):[e].concat(kv(n))),Ax=(e,n)=>Ls(hA(n),uG(n),(o,r)=>{const c=ro(pA(e),Ye(xn,o)),l=ro(kv(e),Ye(xn,r));return c.isSome()&&l.isSome()}).getOr(!1),Ox=(e,n,o,r)=>{const c=o,l=new Qs(o,c),d=Qa(e.schema.getMoveCaretBeforeOnEnterElements(),(p,y)=>!kt(["td","th","table"],y.toLowerCase()));let g=o;do{if(Te(g)&&Ee.trim(g.data).length!==0){r?n.setStart(g,0):n.setEnd(g,g.data.length);return}if(d[g.nodeName]){r?n.setStartBefore(g):g.nodeName==="BR"?n.setEndBefore(g):n.setEndAfter(g);return}}while(g=r?l.next():l.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},Tv=e=>{const n=e.selection.getSel();return Ae(n)&&n.rangeCount>0},Dx=(e,n)=>{const o=Sf(e);o.length>0?oe(o,r=>{const c=r.dom,l=e.dom.createRng();l.setStartBefore(c),l.setEndAfter(c),n(l,!0)}):n(e.selection.getRng(),!1)},bA=(e,n,o)=>{const r=HS(e,n);o(r),e.moveToBookmark(r)},d1=e=>Po(e==null?void 0:e.nodeType),Mx=e=>Ze(e)&&!Ia(e)&&!mc(e)&&!zm(e),TL=(e,n)=>{if(Mx(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},vA=(e,n,o)=>{const{selection:r,dom:c}=e,l=r.getNode(),d=Tn(l);bA(r,!0,()=>{n()}),d&&Tn(l)&&c.isChildOf(l,e.getBody())?e.selection.select(l):o(r.getStart())&&_L(c,r)},_L=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:l,startOffset:d}=c,g=n.getNode();if(!TL(e,g)&&Ze(l)){const p=l.childNodes,y=e.getRoot();let E;if(d<p.length){const T=p[d];E=new Qs(T,(o=e.getParent(T,e.isBlock))!==null&&o!==void 0?o:y)}else{const T=p[p.length-1];E=new Qs(T,(r=e.getParent(T,e.isBlock))!==null&&r!==void 0?r:y),E.next(!0)}for(let T=E.current();T;T=E.next()){if(e.getContentEditable(T)==="false")return;if(Te(T)&&!Nx(T)){c.setStart(T,0),n.setRng(c);return}}}},yA=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(Ze(e)||!Nx(e))return e}},Rx=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Zm(e,n),uh=(e,n,o)=>e.schema.isValidChild(n,o),Nx=(e,n=!1)=>{if(Ae(e)&&Te(e)){const o=n?e.data.replace(/ /g," "):e.data;return Bc(o)}else return!1},We=e=>Ae(e)&&Te(e)&&e.length===0,Ws=(e,n)=>{const o="[data-mce-cef-wrappable]",r=NB(e),c=Go(r)?o:`${o},${r}`;return oc(U.fromDom(n),c)},m1=(e,n)=>{const o=e.dom;return Mx(n)&&o.getContentEditable(n)==="false"&&Ws(e,n)&&o.select('[contenteditable="true"]',n).length===0},Ho=(e,n)=>Ht(e)?e(n):(Ae(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),fc=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),_v=(e,n)=>{if(dn(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=zp(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},xf=(e,n,o)=>{const r=e.getStyle(n,o);return _v(r,o)},Av=(e,n)=>{let o;return e.getParent(n,r=>Ze(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},Ov=(e,n,o)=>e.getParents(n,o,e.getRoot()),Px=(e,n,o)=>{const r=e.formatter.get(n);return Ae(r)&&kn(r,o)},CA=(e,n)=>Px(e,n,r=>{const c=l=>Ht(l)||l.length>1&&l.charAt(0)==="%";return kn(["styles","attributes"],l=>Bn(r,l).exists(d=>{const g=Kn(d)?d:vu(d);return kn(g,c)}))}),AL=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=l=>Qa(l,(d,g)=>kn(r,p=>p===g));return Px(e,n,l=>{const d=c(l);return Px(e,o,g=>{const p=c(g);return Wi(d,p)})})},nu=e=>da(e,"block"),OL=e=>nu(e)&&e.wrapper===!0,SA=e=>nu(e)&&e.wrapper!==!0,$c=e=>da(e,"selector"),_s=e=>da(e,"inline"),Dv=e=>$c(e)&&_s(e)&&wu(Bn(e,"mixed"),!0),dh=e=>$c(e)&&e.expand!==!1&&!_s(e),Bx=e=>{const n=[];let o=e;for(;o;){if(Te(o)&&o.data!==Us||o.childNodes.length>1)return[];Ze(o)&&n.push(o),o=o.firstChild}return n},f1=e=>Bx(e).length>0,g1=e=>mc(e.dom)&&f1(e.dom),mh=Ia,h1=Ov,p1=Nx,DL=Rx,ML=e=>An(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,xA=(e,n)=>{let o=n;for(;o;){if(Ze(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},wA=(e,n,o,r)=>{const c=n.data;if(e){for(let l=o;l>0;l--)if(r(c.charAt(l-1)))return l}else for(let l=o;l<c.length;l++)if(r(c.charAt(l)))return l;return-1},EA=(e,n,o)=>wA(e,n,o,r=>lh(r)||zu(r)),kA=(e,n,o)=>wA(e,n,o,Ev),TA=(e,n,o,r,c,l)=>{let d;const g=e.getParent(o,e.isBlock)||n,p=(E,T,_)=>{const R=tf(e),B=c?R.backwards:R.forwards;return D.from(B(E,T,(P,I)=>mh(P.parentNode)?-1:(d=P,_(c,P,I)),g))};return p(o,r,EA).bind(E=>l?p(E.container,E.offset+(c?-1:0),kA):D.some(E)).orThunk(()=>d?D.some({container:d,offset:c?0:d.length}):D.none())},b1=(e,n,o,r,c)=>{const l=r[c];Te(r)&&Go(r.data)&&l&&(r=l);const d=h1(e,r);for(let g=0;g<d.length;g++)for(let p=0;p<n.length;p++){const y=n[p];if(!(Ae(y.collapsed)&&y.collapsed!==o.collapsed)&&$c(y)&&e.is(d[g],y.selector))return d[g]}return r},pr=(e,n,o,r)=>{var c;let l=o;const d=e.getRoot(),g=n[0];if(nu(g)&&(l=g.wrapper?null:e.getParent(o,g.block,d)),!l){const p=(c=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&c!==void 0?c:d;l=e.getParent(Te(o)?o.parentNode:o,y=>y!==d&&DL(e.schema,y),p)}if(l&&nu(g)&&g.wrapper&&(l=h1(e,l,"ul,ol").reverse()[0]||l),!l)for(l=o;l&&l[r]&&!e.isBlock(l[r])&&(l=l[r],!fc(l,"br")););return l||o},Hc=(e,n,o,r)=>{const c=o.parentNode;return Ae(o[r])?!1:c===n||dn(c)||e.isBlock(c)?!0:Hc(e,n,c,r)},va=(e,n,o,r,c)=>{let l=o;const d=c?"previousSibling":"nextSibling",g=e.getRoot();if(Te(o)&&!p1(o)&&(c?r>0:r<o.data.length))return o;for(;l;){if(!n[0].block_expand&&e.isBlock(l))return l;for(let p=l[d];p;p=p[d]){const y=Te(p)&&!Hc(e,g,p,d);if(!mh(p)&&!ML(p)&&!p1(p,y))return l}if(l===g||l.parentNode===g){o=l;break}l=l.parentNode}return o},v1=e=>mh(e.parentNode)||mh(e),Uu=(e,n,o,r=!1)=>{let{startContainer:c,startOffset:l,endContainer:d,endOffset:g}=n;const p=o[0];return Ze(c)&&c.hasChildNodes()&&(c=Fu(c,l),Te(c)&&(l=0)),Ze(d)&&d.hasChildNodes()&&(d=Fu(d,n.collapsed?g:g-1),Te(d)&&(g=d.data.length)),c=xA(e,c),d=xA(e,d),v1(c)&&(c=mh(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,Te(c)&&(l=n.collapsed?c.length:0)),v1(d)&&(d=mh(d)?d:d.parentNode,n.collapsed?d=d.nextSibling||d:d=d.previousSibling||d,Te(d)&&(g=n.collapsed?0:d.length)),n.collapsed&&(TA(e,e.getRoot(),c,l,!0,r).each(({container:T,offset:_})=>{c=T,l=_}),TA(e,e.getRoot(),d,g,!1,r).each(({container:T,offset:_})=>{d=T,g=_})),(_s(p)||p.block_expand)&&((!_s(p)||!Te(c)||l===0)&&(c=va(e,o,c,l,!0)),(!_s(p)||!Te(d)||g===d.data.length)&&(d=va(e,o,d,g,!1))),dh(p)&&(c=b1(e,o,n,c,"previousSibling"),d=b1(e,o,n,d,"nextSibling")),(nu(p)||$c(p))&&(c=pr(e,o,c,"previousSibling"),d=pr(e,o,d,"nextSibling"),nu(p)&&(e.isBlock(c)||(c=va(e,o,c,l,!0),Te(c)&&(l=0)),e.isBlock(d)||(d=va(e,o,d,g,!1),Te(d)&&(g=d.data.length)))),Ze(c)&&c.parentNode&&(l=e.nodeIndex(c),c=c.parentNode),Ze(d)&&d.parentNode&&(g=e.nodeIndex(d)+1,d=d.parentNode),{startContainer:c,startOffset:l,endContainer:d,endOffset:g}},y1=(e,n,o)=>{var r;const c=n.startOffset,l=Fu(n.startContainer,c),d=n.endOffset,g=Fu(n.endContainer,d-1),p=I=>{const Z=I[0];Te(Z)&&Z===l&&c>=Z.data.length&&I.splice(0,1);const Q=I[I.length-1];return d===0&&I.length>0&&Q===g&&Te(Q)&&I.splice(I.length-1,1),I},y=(I,Z,Q)=>{const ee=[];for(;I&&I!==Q;I=I[Z])ee.push(I);return ee},E=(I,Z)=>e.getParent(I,Q=>Q.parentNode===Z,Z),T=(I,Z,Q)=>{const ee=Q?"nextSibling":"previousSibling";for(let ne=I,ye=ne.parentNode;ne&&ne!==Z;ne=ye){ye=ne.parentNode;const Oe=y(ne===I?ne:ne[ee],ee);Oe.length&&(Q||Oe.reverse(),o(p(Oe)))}};if(l===g)return o(p([l]));const _=(r=e.findCommonAncestor(l,g))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(l,g))return T(l,_,!0);if(e.isChildOf(g,l))return T(g,_);const R=E(l,_)||l,B=E(g,_)||g;T(l,R,!0);const P=y(R===l?R:R.nextSibling,"nextSibling",B===g?B.nextSibling:B);P.length&&o(p(P)),T(g,B)},Lx=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],RL=e=>Ir(e)&&Jg(e)===Us,Ix=(e,n,o,r)=>Fr(n).fold(()=>"skipping",c=>r==="br"||RL(n)?"valid":OP(n)?"existing":mc(n.dom)?"caret":kn(Lx,l=>oc(n,l))?"valid-block":!uh(e,o,r)||!uh(e,Ft(c),o)?"invalid-child":"valid"),NL=(e,n)=>{const o=Uu(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},Mv=(e,n,o,r,c,l)=>{const{uid:d=n,...g}=o;_u(e,Zp()),Is(e,`${Jm()}`,d),Is(e,`${Xm()}`,r);const{attributes:p={},classes:y=[]}=c(d,g);if(li(e,p),RP(e,y),l){y.length>0&&Is(e,`${Qm()}`,y.join(","));const E=Wo(p);E.length>0&&Is(e,`${ef()}`,E.join(","))}},_A=e=>{Ed(e,Zp()),Eo(e,`${Jm()}`),Eo(e,`${Xm()}`),Eo(e,`${Yg()}`);const n=Ji(e,`${ef()}`).map(r=>r.split(",")).getOr([]),o=Ji(e,`${Qm()}`).map(r=>r.split(",")).getOr([]);oe(n,r=>Eo(e,r)),NP(e,o),Eo(e,`${Qm()}`),Eo(e,`${ef()}`)},Fx=(e,n,o,r,c)=>{const l=U.fromTag("span",e);return Mv(l,n,o,r,c,!1),l},$x=(e,n,o,r,c,l)=>{const d=[],g=Fx(e.getDoc(),o,l,r,c),p=Vr(),y=()=>{p.clear()},E=()=>p.get().getOrThunk(()=>{const B=Fd(g);return d.push(B),p.set(B),B}),T=B=>{oe(B,_)},_=B=>{switch(Ix(e,B,"span",Ft(B))){case"invalid-child":{y();const I=Js(B);T(I),y();break}case"valid-block":{y(),Mv(B,o,l,r,c,!0);break}case"valid":{const I=E();hb(B,I);break}}},R=B=>{const P=Dt(B,U.fromDom);T(P)};return y1(e.dom,n,B=>{y(),R(B)}),d},Hx=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,l=c.getRng(),d=Sf(e).length>0,g=Wp("mce-annotation");if(l.collapsed&&!d&&NL(e,l),c.getRng().collapsed&&!d){const p=Fx(e.getDoc(),g,r,n,o.decorate);Dd(p,ks),c.getRng().insertNode(p.dom),c.select(p.dom)}else bA(c,!1,()=>{Dx(e,p=>{$x(e,p,g,n,o.decorate,r)})})})},zn=e=>{const n=PT();DP(e,n);const o=NT(e,n),r=Sd("span"),c=l=>{oe(l,d=>{r(d)?$l(d):_A(d)})};return{register:(l,d)=>{n.register(l,d)},annotate:(l,d)=>{n.lookup(l).each(g=>{Hx(e,l,g,d)})},annotationChanged:(l,d)=>{o.addListener(l,d)},remove:l=>{DT(e,D.some(l)).each(({elements:d})=>{const g=e.selection.getBookmark();c(d),e.selection.moveToBookmark(g)})},removeAll:l=>{const d=e.selection.getBookmark();He(zb(e,l),(g,p)=>{c(g)}),e.selection.moveToBookmark(d)},getAll:l=>{const d=zb(e,l);return sn(d,g=>Dt(g,p=>p.dom))}}},wi=e=>({getBookmark:Ye(_x,e),moveToBookmark:Ye(EL,e)});wi.isBookmarkNode=Ia;const Vx=(e,n,o)=>o.collapsed?!1:kn(o.getClientRects(),r=>VP(r,e,n)),zx=()=>U.fromDom(document),Ux=(e,n=!1)=>e.dom.focus({preventScroll:n}),Rv=e=>{const n=ui(e).dom;return e.dom===n.activeElement},Nv=(e=zx())=>D.from(e.dom.activeElement).map(U.fromDom),Zx=e=>Nv(ui(e)).filter(n=>e.dom.contains(n.dom)),AA={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},Pv=Ci.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),PL=(e,n,o,r)=>e.fold(n,o,r),Wx=e=>e.fold(Yn,Yn,Yn),BL=Pv.before,OA=Pv.on,LL=Pv.after,Zu={before:BL,on:OA,after:LL,cata:PL,getStart:Wx},Bv=Ci.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),gc=e=>Bv.exact(e.start,e.soffset,e.finish,e.foffset),Kr=e=>e.match({domRange:n=>U.fromDom(n.startContainer),relative:(n,o)=>Zu.getStart(n),exact:(n,o,r,c)=>n}),fh=Bv.domRange,mG=Bv.relative,IL=Bv.exact,FL=e=>{const n=Kr(e);return Td(n)},ln=AA.create,gh={domRange:fh,relative:mG,exact:IL,exactFromRange:gc,getWin:FL,range:ln},jx=(e,n)=>{const o=Ir(n)?Jg(n).length:Js(n).length+1;return e>o?o:e<0?0:e},Gx=e=>gh.range(e.start,jx(e.soffset,e.start),e.finish,jx(e.foffset,e.finish)),DA=(e,n)=>!Vm(n.dom)&&($o(e,n)||xn(e,n)),MA=e=>n=>DA(e,n.start)&&DA(e,n.finish),$L=e=>e.inline||Tt.browser.isFirefox(),HL=e=>gh.range(U.fromDom(e.startContainer),e.startOffset,U.fromDom(e.endContainer),e.endOffset),VL=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?D.none():D.from(n.getRangeAt(0))).map(HL)},zL=e=>{const n=Td(e);return VL(n.dom).filter(MA(e))},qx=(e,n)=>D.from(n).filter(MA(e)).map(Gx),Kx=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),D.some(n)}catch{return D.none()}},C1=e=>{const n=$L(e)?zL(U.fromDom(e.getBody())):D.none();e.bookmark=n.isSome()?n:e.bookmark},RA=e=>(e.bookmark?e.bookmark:D.none()).bind(o=>qx(U.fromDom(e.getBody()),o)).bind(Kx),UL=e=>{RA(e).each(n=>e.selection.setRng(n))},ZL={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},WL=(e,n)=>(Po(n)||(n=0),setTimeout(e,n)),jL=(e,n)=>(Po(n)||(n=0),setInterval(e,n)),rt={setEditorTimeout:(e,n,o)=>WL(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=jL(()=>{e.removed?clearInterval(r):n()},o);return r}},NA=e=>e.type==="nodechange"&&e.selectionChange,GL=(e,n)=>{const o=()=>{n.throttle()};Jn.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Jn.DOM.unbind(document,"mouseup",o)})},qL=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},S1=(e,n)=>{qL(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{NA(o)||C1(e)})},KL=e=>{const n=Kg(()=>{C1(e)},0);e.on("init",()=>{e.inline&&GL(e,n),S1(e,n)}),e.on("remove",()=>{n.cancel()})};let hh;const Yx=Jn.DOM,YL=e=>Ze(e)&&ZL.isEditorUIElement(e),x1=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},Lv=(e,n)=>{const o=PB(e);return Yx.getParent(n,c=>YL(c)||(o?e.dom.is(c,o):!1))!==null},Xx=e=>{try{const n=ui(U.fromDom(e.getElement()));return Nv(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},PA=(e,n)=>{const o=n.editor;KL(o);const r=(c,l)=>{if(oG(c)&&c.inline!==!0){const d=U.fromDom(c.getContainer());l(d,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;x1(Xx(o))&&r(o,_u),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{rt.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!x1(Xx(o))||c!==o)&&r(o,Ed),!Lv(o,Xx(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),hh||(hh=c=>{const l=e.activeEditor;l&&oS(c).each(d=>{const g=d;g.ownerDocument===document&&g!==document.body&&!Lv(l,g)&&e.focusedEditor===l&&(l.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},Yx.bind(document,"focusin",hh))},BA=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&hh&&(Yx.unbind(document,"focusin",hh),hh=null)},LA=e=>{e.on("AddEditor",Ye(PA,e)),e.on("RemoveEditor",Ye(BA,e))},XL=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),JL=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,IA=e=>e.collapsed?D.from(Fu(e.startContainer,e.startOffset)).map(U.fromDom):D.none(),QL=(e,n)=>IA(n).bind(o=>IP(o)?D.some(o):$o(e,o)?D.none():D.some(e)),FA=(e,n)=>{QL(U.fromDom(e.getBody()),n).bind(o=>Mr(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},bn=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},eI=e=>Rv(e)||Zx(e).isSome(),Wu=e=>Ae(e.iframeElement)&&Rv(U.fromDom(e.iframeElement)),ou=e=>{const n=e.getBody();return n&&eI(U.fromDom(n))},Iv=e=>{const n=ui(U.fromDom(e.getElement()));return Nv(n).filter(o=>!x1(o.dom)&&Lv(e,o.dom)).isSome()},br=e=>e.inline?ou(e):Wu(e),ph=e=>br(e)||Iv(e),w1=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const c=d=>{RA(d).each(g=>{d.selection.setRng(g),r=g})};!br(e)&&e.hasEditableRoot()&&c(e);const l=XL(e,n.getNode());if(l&&e.dom.isChildOf(l,o)){JL(e,l)||bn(o),bn(l),e.hasEditableRoot()||c(e),FA(e,r),bh(e);return}e.inline||(Tt.browser.isOpera()||bn(o),e.getWin().focus()),(Tt.browser.isFirefox()||e.inline)&&(bn(o),FA(e,r)),bh(e)},bh=e=>e.editorManager.setActive(e),vh=(e,n)=>{e.removed||(n?bh(e):w1(e))},Qe={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Qe.metaKeyPressed(e),metaKeyPressed:e=>Tt.os.isMacOS()||Tt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},wf="data-mce-selected",tI="table,img,figure.image,hr,video,span.mce-preview-object,details",$A=Math.abs,nn=Math.round,Vc={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Ef=e=>e.type==="longpress"||e.type.indexOf("touch")===0,HA=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,l=n.getBody();let d,g,p,y,E,T,_,R,B,P,I,Z,Q,ee,ne,ye,Oe;const je=$e=>Ae($e)&&(yb($e)||o.is($e,"figure.image")),he=$e=>er($e)||o.hasClass($e,"mce-preview-object"),ue=($e,Kt)=>{if(Ef($e)){const en=$e.touches[0];return je($e.target)&&!Vx(en.clientX,en.clientY,Kt)}else return je($e.target)&&!Vx($e.clientX,$e.clientY,Kt)},Ce=$e=>{const Kt=$e.target;ue($e,n.selection.getRng())&&!$e.isDefaultPrevented()&&n.selection.select(Kt)},qe=$e=>o.hasClass($e,"mce-preview-object")&&Ae($e.firstElementChild)?[$e,$e.firstElementChild]:o.is($e,"figure.image")?[$e.querySelector("img")]:[$e],ut=$e=>{const Kt=jr(n);return!Kt||n.mode.isReadOnly()||$e.getAttribute("data-mce-resize")==="false"||$e===n.getBody()?!1:o.hasClass($e,"mce-preview-object")&&Ae($e.firstElementChild)?oc(U.fromDom($e.firstElementChild),Kt):oc(U.fromDom($e),Kt)},At=($e,Kt)=>{if(he(Kt))return $e.create("img",{src:Tt.transparentSrc});if(sl(Kt)){const os=Se(y.name,"n")?Qo:Ks,On=Kt.cloneNode(!0);return os($e.select("tr",On)).each(xr=>{const wa=$e.select("td,th",xr);$e.setStyle(xr,"height",null),oe(wa,Cl=>$e.setStyle(Cl,"height",null))}),On}else return Kt.cloneNode(!0)},qt=($e,Kt,en)=>{if(Ae(en)){const os=qe($e);oe(os,On=>{On.style[Kt]||!n.schema.isValid(On.nodeName.toLowerCase(),Kt)?o.setStyle(On,Kt,en):o.setAttrib(On,Kt,""+en)})}},_n=($e,Kt,en)=>{qt($e,"width",Kt),qt($e,"height",en)},Pn=$e=>{let Kt,en,os,On,xr;Kt=$e.screenX-T,en=$e.screenY-_,ee=Kt*y[2]+P,ne=en*y[3]+I,ee=ee<5?5:ee,ne=ne<5?5:ne,(je(d)||he(d))&&sx(n)!==!1?os=!Qe.modifierPressed($e):os=Qe.modifierPressed($e),os&&($A(Kt)>$A(en)?(ne=nn(ee*Z),ee=nn(ne/Z)):(ee=nn(ne/Z),ne=nn(ee*Z))),_n(g,ee,ne),On=y.startPos.x+Kt,xr=y.startPos.y+en,On=On>0?On:0,xr=xr>0?xr:0,o.setStyles(p,{left:On,top:xr,display:"block"}),p.innerHTML=ee+" &times; "+ne,y[2]<0&&g.clientWidth<=ee&&o.setStyle(g,"left",R+(P-ee)),y[3]<0&&g.clientHeight<=ne&&o.setStyle(g,"top",B+(I-ne)),Kt=l.scrollWidth-ye,en=l.scrollHeight-Oe,Kt+en!==0&&o.setStyles(p,{left:On-Kt,top:xr-en}),Q||(g_(n,d,P,I,"corner-"+y.name),Q=!0)},Ro=()=>{const $e=Q;Q=!1,$e&&(qt(d,"width",ee),qt(d,"height",ne)),o.unbind(r,"mousemove",Pn),o.unbind(r,"mouseup",Ro),c!==r&&(o.unbind(c,"mousemove",Pn),o.unbind(c,"mouseup",Ro)),o.remove(g),o.remove(p),o.remove(E),ar(d),$e&&(h_(n,d,ee,ne,"corner-"+y.name),o.setAttrib(d,"style",o.getAttrib(d,"style"))),n.nodeChanged()},ar=$e=>{ze();const Kt=o.getPos($e,l),en=Kt.x,os=Kt.y,On=$e.getBoundingClientRect(),xr=On.width||On.right-On.left,wa=On.height||On.bottom-On.top;d!==$e&&(Pe(),d=$e,ee=ne=0);const Cl=n.dispatch("ObjectSelected",{target:$e});ut($e)&&!Cl.isDefaultPrevented()?He(Vc,(Nr,Ua)=>{const Za=Wa=>{const ct=qe(d)[0];T=Wa.screenX,_=Wa.screenY,P=ct.clientWidth,I=ct.clientHeight,Z=I/P,y=Nr,y.name=Ua,y.startPos={x:xr*Nr[0]+en,y:wa*Nr[1]+os},ye=l.scrollWidth,Oe=l.scrollHeight,E=o.add(l,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(E,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),g=At(o,d),o.addClass(g,"mce-clonedresizable"),o.setAttrib(g,"data-mce-bogus","all"),g.contentEditable="false",o.setStyles(g,{left:en,top:os,margin:0}),_n(g,xr,wa),g.removeAttribute(wf),l.appendChild(g),o.bind(r,"mousemove",Pn),o.bind(r,"mouseup",Ro),c!==r&&(o.bind(c,"mousemove",Pn),o.bind(c,"mouseup",Ro)),p=o.add(l,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},P+" &times; "+I)};let cr=o.get("mceResizeHandle"+Ua);cr&&o.remove(cr),cr=o.add(l,"div",{id:"mceResizeHandle"+Ua,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Ua+"-resize; margin:0; padding:0"}),o.bind(cr,"mousedown",Wa=>{Wa.stopImmediatePropagation(),Wa.preventDefault(),Za(Wa)}),Nr.elm=cr,o.setStyles(cr,{left:xr*Nr[0]+en-cr.offsetWidth/2,top:wa*Nr[1]+os-cr.offsetHeight/2})}):Pe(!1)},Os=Kg(ar,0),Pe=($e=!0)=>{Os.cancel(),ze(),d&&$e&&d.removeAttribute(wf),He(Vc,(Kt,en)=>{const os=o.get("mceResizeHandle"+en);os&&(o.unbind(os),o.remove(os))})},lt=($e,Kt)=>o.isChildOf($e,Kt),mn=$e=>{if(Q||n.removed||n.composing)return;const Kt=$e.type==="mousedown"?$e.target:e.getNode(),en=at(U.fromDom(Kt),tI).map(On=>On.dom).filter(On=>o.isEditable(On.parentElement)||On.nodeName==="IMG"&&o.isEditable(On)).getOrUndefined(),os=Ae(en)?o.getAttrib(en,wf,"1"):"1";if(oe(o.select(`img[${wf}],hr[${wf}]`),On=>{On.removeAttribute(wf)}),Ae(en)&&lt(en,l)&&ph(n)){yt();const On=e.getStart(!0);if(lt(On,en)&&lt(e.getEnd(!0),en)){o.setAttrib(en,wf,os),Os.throttle(en);return}}Pe()},ze=()=>{He(Vc,$e=>{$e.elm&&(o.unbind($e.elm),delete $e.elm)})},yt=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{yt(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",mn),n.on("keyup compositionend",$e=>{d&&d.nodeName==="TABLE"&&mn($e)}),n.on("hide blur",Pe),n.on("contextmenu longpress",Ce,!0)}),n.on("remove",ze),{isResizable:ut,showResizeRect:ar,hideResizeRect:Pe,updateResizeRect:mn,destroy:()=>{Os.cancel(),d=g=E=null}}},E1=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},vn=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},VA=(e,n,o)=>{const r=e.document.createRange();return E1(r,n),vn(r,o),r},Fv=(e,n,o,r,c)=>{const l=e.document.createRange();return l.setStart(n.dom,o),l.setEnd(r.dom,c),l},kf=Ci.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),zA=(e,n,o)=>n(U.fromDom(o.startContainer),o.startOffset,U.fromDom(o.endContainer),o.endOffset),Tf=(e,n)=>n.match({domRange:o=>({ltr:Ie(o),rtl:D.none}),relative:(o,r)=>({ltr:Ys(()=>VA(e,o,r)),rtl:Ys(()=>D.some(VA(e,r,o)))}),exact:(o,r,c,l)=>({ltr:Ys(()=>Fv(e,o,r,c,l)),rtl:Ys(()=>D.some(Fv(e,c,l,o,r)))})}),_f=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>kf.rtl(U.fromDom(c.endContainer),c.endOffset,U.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>zA(e,kf.ltr,o)):zA(e,kf.ltr,o)},UA=(e,n)=>{const o=Tf(e,n);return _f(e,o)};kf.ltr,kf.rtl;const nI=(e,n,o)=>{var r;return D.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(c=>{if(c.offsetNode===null)return D.none();const l=e.createRange();return l.setStart(c.offsetNode,c.offset),l.collapse(),D.some(l)})},oI=(e,n,o)=>{var r;return D.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},sI=(e,n,o)=>e.caretPositionFromPoint?nI(e,n,o):e.caretRangeFromPoint?oI(e,n,o):D.none(),k1=(e,n,o)=>{const r=e.document;return sI(r,n,o).map(c=>AA.create(U.fromDom(c.startContainer),c.startOffset,U.fromDom(c.endContainer),c.endOffset))},ju=(e,n)=>{const o=Ft(e);return o==="input"?Zu.after(e):kt(["br","img"],o)?n===0?Zu.before(e):Zu.after(e):Zu.on(e,n)},rI=(e,n)=>{const o=e.fold(Zu.before,ju,Zu.after),r=n.fold(Zu.before,ju,Zu.after);return gh.relative(o,r)},Jx=(e,n,o,r)=>{const c=ju(e,n),l=ju(o,r);return gh.relative(c,l)},aI=e=>e.match({domRange:n=>{const o=U.fromDom(n.startContainer),r=U.fromDom(n.endContainer);return Jx(o,n.startOffset,r,n.endOffset)},relative:rI,exact:Jx}),Qx=(e,n)=>{const r=document.createDocumentFragment();return oe(e,c=>{r.appendChild(c.dom)}),U.fromDom(r)},cI=e=>{const n=gh.getWin(e).dom,o=(c,l,d,g)=>Fv(n,c,l,d,g),r=aI(e);return UA(n,r).match({ltr:o,rtl:o})},ZA=(e,n,o)=>k1(e,n,o),iI=(e,n,o)=>{const r=Td(U.fromDom(o));return ZA(r.dom,e,n).map(c=>{const l=o.createRange();return l.setStart(c.start.dom,c.soffset),l.setEnd(c.finish.dom,c.foffset),l}).getOrUndefined()},ew=(e,n)=>Ae(e)&&Ae(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,WA=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},$v=(e,n,o)=>WA(e,n,o)!==null,tw=(e,n,o)=>$v(e,n,r=>r.nodeName===o),nw=(e,n)=>Fc(e)&&!$v(e,n,mc),ow=(e,n,o)=>{const r=n.parentNode;if(r){const c=new Qs(n,e.getParent(r,e.isBlock)||e.getRoot());let l;for(;l=c[o?"prev":"next"]();)if(An(l))return!0}return!1},jA=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},GA=(e,n)=>{let o=n;for(;o&&o!==e;){if(Tn(o))return!0;o=o.parentNode}return!1},yh=(e,n,o,r,c)=>{const l=e.getRoot(),d=e.schema.getNonEmptyElements(),g=c.parentNode;let p,y;if(!g)return D.none();const E=e.getParent(g,e.isBlock)||l;if(r&&An(c)&&n&&e.isEmpty(E))return D.some(fe(g,e.nodeIndex(c)));const T=new Qs(c,E);for(;y=T[r?"prev":"next"]();){if(e.getContentEditableParent(y)==="false"||nw(y,l))return D.none();if(Te(y)&&y.data.length>0)return tw(y,l,"A")?D.none():D.some(fe(y,r?y.data.length:0));if(e.isBlock(y)||d[y.nodeName.toLowerCase()])return D.none();p=y}return Ts(p)?D.none():o&&p?D.some(fe(p,0)):D.none()},qA=(e,n,o,r)=>{const c=e.getRoot();let l,d=!1,g=o?r.startContainer:r.endContainer,p=o?r.startOffset:r.endOffset;const y=Ze(g)&&p===g.childNodes.length,E=e.schema.getNonEmptyElements();let T=o;if(Fc(g))return D.none();if(Ze(g)&&p>g.childNodes.length-1&&(T=!1),Bg(g)&&(g=c,p=0),g===c){if(T&&(l=g.childNodes[p>0?p-1:0],l&&(Fc(l)||E[l.nodeName]||sl(l))))return D.none();if(g.hasChildNodes()){if(p=Math.min(!T&&p>0?p-1:p,g.childNodes.length-1),g=g.childNodes[p],p=Te(g)&&y?g.data.length:0,!n&&g===c.lastChild&&sl(g)||GA(c,g)||Fc(g)||dS(g))return D.none();if(g.hasChildNodes()&&!sl(g)){l=g;const _=new Qs(g,c);do{if(Tn(l)||Fc(l)){d=!1;break}if(Te(l)&&l.data.length>0){p=T?0:l.data.length,g=l,d=!0;break}if(E[l.nodeName.toLowerCase()]&&!$s(l)){p=e.nodeIndex(l),g=l.parentNode,T||p++,d=!0;break}}while(l=T?_.next():_.prev())}}}return n&&(Te(g)&&p===0&&yh(e,y,n,!0,g).each(_=>{g=_.container(),p=_.offset(),d=!0}),Ze(g)&&(l=g.childNodes[p],l||(l=g.childNodes[p-1]),l&&An(l)&&!jA(l,"A")&&!ow(e,l,!1)&&!ow(e,l,!0)&&yh(e,y,n,!0,l).each(_=>{g=_.container(),p=_.offset(),d=!0}))),T&&!n&&Te(g)&&p===g.data.length&&yh(e,y,n,!1,g).each(_=>{g=_.container(),p=_.offset(),d=!0}),d&&g?D.some(fe(g,p)):D.none()},T1=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=fe.fromRangeStart(n);return qA(e,o,!0,r).each(l=>{(!o||!fe.isAbove(c,l))&&r.setStart(l.container(),l.offset())}),o||qA(e,o,!1,r).each(l=>{r.setEnd(l.container(),l.offset())}),o&&r.collapse(!0),ew(n,r)?D.none():D.some(r)},Hv=(e,n)=>e.splitText(n),_1=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&Te(n)){if(o>0&&o<n.data.length)if(r=Hv(n,o),n=r.previousSibling,c>o){c=c-o;const l=Hv(r,c).previousSibling;n=r=l,c=l.data.length,o=0}else c=0}else if(Te(n)&&o>0&&o<n.data.length&&(n=Hv(n,o),o=0),Te(r)&&c>0&&c<r.data.length){const l=Hv(r,c).previousSibling;r=l,c=l.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},jd=e=>({walk:(l,d)=>y1(e,l,d),split:_1,expand:(l,d={type:"word"})=>{if(d.type==="word"){const g=Uu(e,l,[{inline:"span"}]),p=e.createRng();return p.setStart(g.startContainer,g.startOffset),p.setEnd(g.endContainer,g.endOffset),p}return l},normalize:l=>T1(e,l).fold(we,d=>(l.setStart(d.startContainer,d.startOffset),l.setEnd(d.endContainer,d.endOffset),!0))});jd.compareRanges=ew,jd.getCaretRangeFromPoint=iI,jd.getSelectedNode=qb,jd.getNode=Fu;const KA=((e,n)=>{const o=(g,p)=>{if(!Po(p)&&!p.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+p);const y=g.dom;$m(y)&&(y.style[e]=p+"px")},r=g=>{const p=n(g);if(p<=0||p===null){const y=ts(g,e);return parseFloat(y)||0}return p},c=r,l=(g,p)=>cs(p,(y,E)=>{const T=ts(g,E),_=T===void 0?0:parseInt(T,10);return isNaN(_)?y:y+_},0);return{set:o,get:r,getOuter:c,aggregate:l,max:(g,p,y)=>{const E=l(g,y);return p>E?p-E:0}}})("height",e=>{const n=e.dom;return el(e)?n.getBoundingClientRect().height:n.offsetHeight}),YA=e=>KA.get(e),XA=(e,n)=>e.view(n).fold(Ie([]),r=>{const c=e.owner(r),l=XA(e,c);return[r].concat(l)}),uI=(e,n)=>{const o=n.owner(e);return XA(n,o)};var dI=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?D.none():D.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(U.fromDom)},owner:e=>Qi(e)});const mI=e=>{const n=zx(),o=ft(n),r=uI(e,dI),c=Bt(e),l=ua(r,(d,g)=>{const p=Bt(g);return{left:d.left+p.left,top:d.top+p.top}},{left:0,top:0});return W(l.left+c.left+o.left,l.top+c.top+o.top)},sw=e=>Ft(e)==="textarea",fI=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),Vv=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},JA=(e,n)=>{const o=Js(e);if(o.length===0||sw(e))return{element:e,offset:n};if(n<o.length&&!sw(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return sw(r)?{element:e,offset:n}:Ft(r)==="img"?{element:r,offset:1}:Ir(r)?{element:r,offset:Jg(r).length}:{element:r,offset:Js(r).length}}},QA=(e,n)=>{const o=It(e),r=YA(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},e5=(e,n)=>{const o=JA(e,n),r=U.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Us+"</span>");return ta(o.element,r),QA(r,()=>Xn(r))},t5=e=>QA(U.fromDom(e),nt),n5=(e,n,o,r)=>{hI(e,(c,l)=>gI(e,n,o,r),o)},o5=(e,n,o,r,c)=>{const l={elm:r.element.dom,alignToTop:c};if(fI(e,l))return;const d=ft(n).top;o(e,n,d,r,c),Vv(e,l)},gI=(e,n,o,r)=>{const c=U.fromDom(e.getBody()),l=U.fromDom(e.getDoc());rS(c);const d=e5(U.fromDom(o.startContainer),o.startOffset);o5(e,l,n,d,r),d.cleanup()},s5=(e,n,o,r)=>{const c=U.fromDom(e.getDoc());o5(e,c,o,t5(n),r)},hI=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,l=o.endContainer,d=o.endOffset;n(U.fromDom(r),U.fromDom(l));const g=e.dom.createRng();g.setStart(r,c),g.setEnd(l,d),e.selection.setRng(o)},zv=(e,n,o,r,c)=>{const l=n.pos;if(r)po(l.left,l.top,c);else{const d=l.top-o+n.height;po(-e.getBody().getBoundingClientRect().left,d,c)}},rw=(e,n,o,r,c,l)=>{const d=r+o,g=c.pos.top,p=c.bottom,y=p-g>=r;g<o?zv(e,c,r,l!==!1,n):g>d?zv(e,c,r,y?l!==!1:l===!0,n):p>d&&!y&&zv(e,c,r,l===!0,n)},A1=(e,n,o,r,c)=>{const l=Td(n).dom.innerHeight;rw(e,n,o,l,r,c)},r5=(e,n,o,r,c)=>{const l=Td(n).dom.innerHeight;rw(e,n,o,l,r,c);const d=mI(r.element),g=cT(window);d.top<g.y?Es(r.element,c!==!1):d.top>g.bottom&&Es(r.element,c===!0)},pI=(e,n,o)=>n5(e,A1,n,o),aw=(e,n,o)=>s5(e,n,A1,o),bI=(e,n,o)=>n5(e,r5,n,o),a5=(e,n,o)=>s5(e,n,r5,o),c5=(e,n,o)=>{(e.inline?aw:a5)(e,n,o)},Ch=(e,n,o)=>{(e.inline?pI:bI)(e,n,o)},i5=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),l5=(e,n,o,r,c)=>{const l=o?n.startContainer:n.endContainer,d=o?n.startOffset:n.endOffset;return D.from(l).map(U.fromDom).map(g=>!r||!n.collapsed?Il(g,c(g,d)).getOr(g):g).bind(g=>ha(g)?D.some(g):Fr(g).filter(ha)).map(g=>g.dom).getOr(e)},u5=(e,n,o=!1)=>l5(e,n,!0,o,(r,c)=>Math.min(Du(r),c)),d5=(e,n,o=!1)=>l5(e,n,!1,o,(r,c)=>c>0?c-1:c),O1=(e,n)=>{const o=e;for(;e&&Te(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},m5=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,l=n.endOffset;let d=n.commonAncestorContainer;n.collapsed||(o===r&&l-c<2&&o.hasChildNodes()&&(d=o.childNodes[c]),Te(o)&&Te(r)&&(o.length===c?o=O1(o.nextSibling,!0):o=o.parentNode,l===0?r=O1(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(d=o)));const g=Te(d)?d.parentNode:d;return fi(g)?g:e},f5=(e,n,o,r)=>{const c=[],l=e.getRoot(),d=e.getParent(o||u5(l,n,n.collapsed),e.isBlock),g=e.getParent(r||d5(l,n,n.collapsed),e.isBlock);if(d&&d!==l&&c.push(d),d&&g&&d!==g){let p;const y=new Qs(d,l);for(;(p=y.next())&&p!==g;)e.isBlock(p)&&c.push(p)}return g&&d!==g&&g!==l&&c.push(g),c},g5=(e,n,o)=>D.from(n).bind(r=>D.from(r.parentNode).map(c=>{const l=e.nodeIndex(r),d=e.createRng();return d.setStart(c,l),d.setEnd(c,l+1),o&&(Ox(e,d,r,!0),Ox(e,d,r,!1)),d})),Uv=(e,n)=>Dt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),vI={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Zv=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let l=e[c];if(l)return l;for(let d=e.parent;d&&d!==n;d=d.parent)if(l=d[c],l)return l}},yI=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Bc(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},h5=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class sa{static create(n,o){const r=new sa(n,vI[n]||1);return o&&He(o,(c,l)=>{r.attr(l,c)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!re(n))return Ae(n)&&He(n,(l,d)=>{r.attr(d,l)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let l=c.length;for(;l--;)if(c[l].name===n)return c.splice(l,1),r}return r}if(n in c.map){let l=c.length;for(;l--;)if(c[l].name===n){c[l].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new sa(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let l=0,d=r.length;l<d;l++){const g=r[l];g.name!=="id"&&(c[c.length]={name:g.name,value:g.value},c.map[g.name]=g.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=Zv(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=Zv(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const l=this;let d=l.firstChild;if(h5(l))return!1;if(d)do{if(d.type===1){if(d.attr("data-mce-bogus"))continue;if(n[d.name]||h5(d))return!1}if(d.type===8||d.type===3&&!yI(d)||d.type===3&&d.parent&&o[d.parent.name]&&Bc((c=d.value)!==null&&c!==void 0?c:"")||r&&r(d))return!1}while(d=Zv(d,l));return!0}walk(n){return Zv(this,null,n)}}const CI=Ee.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),p5=e=>re(e.nodeValue)&&e.nodeValue.includes(Us),b5=e=>`${e.length===0?"":`${Dt(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,SI=(e,n)=>n.querySelectorAll(b5(e)),v5=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>p5(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),y5=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(p5(n)){const o=n.parentNode;return o&&ht(CI,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),xI=e=>v5(e).nextNode()!==null,Wv=e=>y5(e).nextNode()!==null,C5=(e,n)=>n.querySelector(b5(e))!==null,S5=(e,n)=>{oe(SI(e,n),o=>{const r=U.fromDom(o);ea(r,"data-mce-bogus")==="all"?Xn(r):oe(e,c=>{ku(r,c)&&Eo(r,c)})})},x5=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},wI=S(x5,v5),EI=S(x5,y5),w5=(e,n)=>{const o=[{condition:Ye(C5,n),action:Ye(S5,n)},{condition:xI,action:wI},{condition:Wv,action:EI}];let r=e,c=!1;return oe(o,({condition:l,action:d})=>{l(r)&&(c||(r=e.cloneNode(!0),c=!0),d(r))}),r},E5=e=>{const n=$r(e,"[data-mce-bogus]");oe(n,o=>{ea(o,"data-mce-bogus")==="all"?Xn(o):Lu(o)?(ta(o,U.fromText(Lp)),Xn(o)):$l(o)})},k5=e=>{const n=$r(e,"input");oe(n,o=>{Eo(o,"name")})},T5=(e,n)=>{const o=or(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},kI=(e,n)=>{const o=e.getDoc(),r=ui(U.fromDom(e.getBody())),c=U.fromTag("div",o);Is(c,"data-mce-bogus","all"),jt(c,{position:"fixed",left:"-9999999px",top:"0"}),Dd(c,n.innerHTML),E5(c),k5(c);const l=db(r);qo(l,c);const d=ic(c.dom.innerText);return Xn(c),d},_5=(e,n,o)=>{let r;return n.format==="raw"?r=Ee.trim(ic(w5(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=kI(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=T5(e,e.serializer.serialize(o,n)),n.format!=="text"&&!Wb(U.fromDom(o))&&re(r)?Ee.trim(r):r},A5=(e,n)=>D.from(e.getBody()).fold(Ie(n.format==="tree"?new sa("body",11):""),o=>_5(e,n,o)),O5=Ee.makeMap,D5=e=>{const n=[];e=e||{};const o=e.indent,r=O5(e.indent_before||""),c=O5(e.indent_after||""),l=Gm.getEncodeFunc(e.entity_encoding||"raw",e.entities),d=e.element_format!=="xhtml";return{start:(g,p,y)=>{if(o&&r[g]&&n.length>0){const E=n[n.length-1];E.length>0&&E!==`
`&&n.push(`
`)}if(n.push("<",g),p)for(let E=0,T=p.length;E<T;E++){const _=p[E];n.push(" ",_.name,'="',l(_.value,!0),'"')}if(!y||d?n[n.length]=">":n[n.length]=" />",y&&o&&c[g]&&n.length>0){const E=n[n.length-1];E.length>0&&E!==`
`&&n.push(`
`)}},end:g=>{let p;n.push("</",g,">"),o&&c[g]&&n.length>0&&(p=n[n.length-1],p.length>0&&p!==`
`&&n.push(`
`))},text:(g,p)=>{g.length>0&&(n[n.length]=p?g:l(g))},cdata:g=>{n.push("<![CDATA[",g,"]]>")},comment:g=>{n.push("<!--",g,"-->")},pi:(g,p)=>{p?n.push("<?",g," ",l(p),"?>"):n.push("<?",g,"?>"),o&&n.push(`
`)},doctype:g=>{n.push("<!DOCTYPE",g,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Gd=(e={},n=In())=>{const o=D5(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const l=e.validate,d={3:p=>{var y;o.text((y=p.value)!==null&&y!==void 0?y:"",p.raw)},8:p=>{var y;o.comment((y=p.value)!==null&&y!==void 0?y:"")},7:p=>{o.pi(p.name,p.value)},10:p=>{var y;o.doctype((y=p.value)!==null&&y!==void 0?y:"")},4:p=>{var y;o.cdata((y=p.value)!==null&&y!==void 0?y:"")},11:p=>{let y=p;if(y=y.firstChild)do g(y);while(y=y.next)}};o.reset();const g=p=>{var y;const E=d[p.type];if(E)E(p);else{const T=p.name,_=T in n.getVoidElements();let R=p.attributes;if(l&&R&&R.length>1){const B=[];B.map={};const P=n.getElementRule(p.name);if(P){for(let I=0,Z=P.attributesOrder.length;I<Z;I++){const Q=P.attributesOrder[I];if(Q in R.map){const ee=R.map[Q];B.map[Q]=ee,B.push({name:Q,value:ee})}}for(let I=0,Z=R.length;I<Z;I++){const Q=R[I].name;if(!(Q in B.map)){const ee=R.map[Q];B.map[Q]=ee,B.push({name:Q,value:ee})}}R=B}}if(o.start(T,R,_),Ln(T))re(p.value)&&o.text(p.value,!0),o.end(T);else if(!_){let B=p.firstChild;if(B){(T==="pre"||T==="textarea")&&B.type===3&&((y=B.value)===null||y===void 0?void 0:y[0])===`
`&&o.text(`
`,!0);do g(B);while(B=B.next)}o.end(T)}}};return c.type===1&&!e.inner?g(c):c.type===3?d[3](c):d[11](c),o.getContent()}}},M5=new Set;oe(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{M5.add(n)});const R5=new Set;oe(["background-color"],n=>{R5.add(n)});const N5=["font","text-decoration","text-emphasis"],TI=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),Sh=(e,n)=>Wo(TI(e,n)),_I=e=>M5.has(e),AI=e=>R5.has(e),P5=(e,n)=>kn(Sh(e,n),o=>_I(o)),OI=(e,n)=>P5(e,n)&&kn(Sh(e,n),o=>AI(o)),DI=e=>vt(e,n=>kn(N5,o=>Se(n,o))),MI=(e,n,o)=>{const r=Sh(e,n),c=Sh(e,o),l=d=>{var g,p;const y=(g=e.getStyle(n,d))!==null&&g!==void 0?g:"",E=(p=e.getStyle(o,d))!==null&&p!==void 0?p:"";return ls(y)&&ls(E)&&y!==E};return kn(r,d=>{const g=p=>kn(p,y=>y===d);if(!g(c)&&g(N5)){const p=DI(c);return kn(p,l)}else return l(d)})},B5=(e,n,o)=>D.from(o.container()).filter(Te).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),cw=Ye(B5,!0,zu),iw=Ye(B5,!1,zu),RI=e=>{const n=e.container();return Te(n)&&(n.data.length===0||jb(n.data)&&wi.isBookmarkNode(n.parentNode))},qd=(e,n)=>o=>pv(e?0:-1,o).filter(n).isSome(),it=e=>yb(e)&&ts(U.fromDom(e),"display")==="block",lw=e=>Tn(e)&&!Ip(e),L5=qd(!0,it),NI=qd(!1,it),Af=qd(!0,er),D1=qd(!1,er),I5=qd(!0,sl),uw=qd(!1,sl),Kd=qd(!0,lw),Yd=qd(!1,lw),jv=e=>e.slice(0,-1),F5=(e,n,o)=>$o(n,e)?jv(Bm(e,r=>o(r)||xn(r,n))):[],PI=(e,n)=>F5(e,n,we),Gu=(e,n)=>[e].concat(PI(e,n)),_t=(e,n,o)=>tu(e,n,o,RI),BI=e=>n=>e.isBlock(Ft(n)),Rt=(e,n,o)=>ro(Gu(U.fromDom(n.container()),e),BI(o)),dw=(e,n,o,r)=>_t(e,n.dom,o).forall(c=>Rt(n,o,r).fold(()=>!dl(c,o,n.dom),l=>!dl(c,o,n.dom)&&$o(l,U.fromDom(c.container())))),LI=(e,n,o,r)=>Rt(n,o,r).fold(()=>_t(e,n.dom,o).forall(c=>!dl(c,o,n.dom)),c=>_t(e,c.dom,o).isNone()),$5=Ye(LI,!1),H5=Ye(LI,!0),hG=Ye(dw,!1),pG=Ye(dw,!0),II=e=>vv(e).exists(Lu),Gv=(e,n,o,r)=>{const c=vt(Gu(U.fromDom(o.container()),n),d=>r.isBlock(Ft(d))),l=Qo(c).getOr(n);return dc(e,l.dom,o).filter(II)},Ct=(e,n,o)=>vv(n).exists(Lu)||Gv(!0,e,n,o).isSome(),qv=(e,n,o)=>gL(n).exists(Lu)||Gv(!1,e,n,o).isSome(),V5=Ye(Gv,!1),FI=Ye(Gv,!0),xh=e=>fe.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),mw=(e,n,o)=>{const r=vt(Gu(U.fromDom(n.container()),e),c=>o.isBlock(Ft(c)));return Qo(r).getOr(e)},z5=(e,n,o)=>xh(n)?iw(n):iw(n)||qr(mw(e,n,o).dom,n).exists(iw),U5=(e,n,o)=>xh(n)?cw(n):cw(n)||Gr(mw(e,n,o).dom,n).exists(cw),$I=e=>kt(["pre","pre-wrap"],e),Kv=e=>vv(e).bind(n=>Oo(n,ha)).exists(n=>$I(ts(n,"white-space"))),HI=(e,n)=>qr(e.dom,n).isNone(),bG=(e,n)=>Gr(e.dom,n).isNone(),vG=(e,n,o)=>HI(e,n)||bG(e,n)||$5(e,n,o)||H5(e,n,o)||qv(e,n,o)||Ct(e,n,o),VI=e=>Ae(e)&&Tn(e)&&q_(e),Z5=(e,n)=>o=>VI(new Qs(o,e)[n]()),zI=(e,n)=>{const o=Gr(e.dom,n).getOr(n),r=Z5(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},UI=(e,n)=>{const o=qr(e.dom,n).getOr(n),r=Z5(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},fw=(e,n,o)=>Kv(n)?!1:vG(e,n,o)||z5(e,n,o)||U5(e,n,o),M1=(e,n,o)=>Kv(n)?!1:$5(e,n,o)||hG(e,n,o)||qv(e,n,o)||z5(e,n,o)||UI(e,n),Gt=e=>{const n=e.container(),o=e.offset();return Te(n)&&o<n.data.length?fe(n,o+1):e},wh=(e,n,o)=>Kv(n)?!1:H5(e,n,o)||pG(e,n,o)||Ct(e,n,o)||U5(e,n,o)||zI(e,n),Eh=(e,n,o)=>M1(e,n,o)||wh(e,Gt(n),o),gw=(e,n)=>lh(e.charAt(n)),hw=(e,n)=>zu(e.charAt(n)),W5=e=>{const n=e.container();return Te(n)&&jo(n.data,ks)},j5=e=>{const n=e.split("");return Dt(n,(o,r)=>lh(o)&&r>0&&r<n.length-1&&Ev(n[r-1])&&Ev(n[r+1])?" ":o).join("")},pw=(e,n,o,r)=>{const c=n.data,l=fe(n,0);return!o&&gw(c,0)&&!Eh(e,l,r)?(n.data=" "+c.slice(1),!0):o&&hw(c,0)&&M1(e,l,r)?(n.data=ks+c.slice(1),!0):!1},ZI=e=>{const n=e.data,o=j5(n);return o!==n?(e.data=o,!0):!1},bw=(e,n,o,r)=>{const c=n.data,l=fe(n,c.length-1);return!o&&gw(c,c.length-1)&&!Eh(e,l,r)?(n.data=c.slice(0,-1)+" ",!0):o&&hw(c,c.length-1)&&wh(e,l,r)?(n.data=c.slice(0,-1)+ks,!0):!1},WI=(e,n,o)=>{const r=n.container();if(!Te(r))return D.none();if(W5(n)){const c=pw(e,r,!1,o)||ZI(r)||bw(e,r,!1,o);return Yi(c,n)}else if(Eh(e,n,o)){const c=pw(e,r,!0,o)||bw(e,r,!0,o);return Yi(c,n)}else return D.none()},jI=e=>{const n=U.fromDom(e.getBody());e.selection.isCollapsed()&&WI(n,fe.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},G5=(e,n,o,r)=>{if(o===0)return;const c=U.fromDom(e),l=tl(c,y=>r.isBlock(Ft(y))).getOr(c),d=e.data.slice(n,n+o),g=n+o>=e.data.length&&wh(l,fe(e,e.data.length),r),p=n===0&&M1(l,fe(e,0),r);e.replaceData(n,o,mi(d,4,p,g))},Yv=(e,n,o)=>{const r=e.data.slice(n),c=r.length-md(r).length;G5(e,n,c,o)},vw=(e,n,o)=>{const r=e.data.slice(0,n),c=r.length-Mc(r).length;G5(e,n-c,c,o)},yw=(e,n,o,r,c=!0)=>{const l=Mc(e.data).length,d=c?e:n,g=c?n:e;return c?d.appendData(g.data):d.insertData(0,g.data),Xn(U.fromDom(g)),r&&Yv(d,l,o),d},GI=(e,n)=>{const o=e.container(),r=e.offset();return!fe.isTextPosition(e)&&o===n.parentNode&&r>fe.before(n).offset()},qI=(e,n)=>GI(n,e)?fe(n.container(),n.offset()-1):n,Cw=e=>Te(e)?fe(e,0):fe.before(e),Sw=e=>Te(e)?fe(e,e.data.length):fe.after(e),q5=e=>bi(e.previousSibling)?D.some(Sw(e.previousSibling)):e.previousSibling?xi(e.previousSibling):D.none(),K5=e=>bi(e.nextSibling)?D.some(Cw(e.nextSibling)):e.nextSibling?Mr(e.nextSibling):D.none(),KI=(e,n)=>D.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>qr(e,fe.before(o))).orThunk(()=>Gr(e,fe.after(n))),YI=(e,n)=>Gr(e,fe.after(n)).orThunk(()=>qr(e,fe.before(n))),XI=(e,n)=>q5(n).orThunk(()=>K5(n)).orThunk(()=>KI(e,n)),JI=(e,n)=>K5(n).orThunk(()=>q5(n)).orThunk(()=>YI(e,n)),QI=(e,n,o)=>e?JI(n,o):XI(n,o),eF=(e,n,o)=>QI(e,n,o).map(Ye(qI,o)),xw=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},tF=e=>n=>n.dom===e,nF=(e,n)=>n&&ht(e.schema.getBlockElements(),Ft(n)),Of=(e,n,o)=>{if(Hr(e,n)){const r=U.fromHtml('<br data-mce-bogus="1">');return o?oe(Js(n),c=>{g1(c)||Xn(c)}):Ru(n),qo(n,r),D.some(fe.before(r.dom))}else return D.none()},oF=(e,n,o,r)=>{const c=Ll(e).filter(Ir),l=Lm(e).filter(Ir);return Xn(e),rn(c,l,n,(d,g,p)=>{const y=d.dom,E=g.dom,T=y.data.length;return yw(y,E,o,r),p.container()===E?fe(y,T):p}).orThunk(()=>(r&&(c.each(d=>vw(d.dom,d.dom.length,o)),l.each(d=>Yv(d.dom,0,o))),n))},Y5=(e,n)=>ht(e.schema.getTextInlineElements(),Ft(n)),Df=(e,n,o,r=!0,c=!1)=>{const l=eF(n,e.getBody(),o.dom),d=tl(o,Ye(nF,e),tF(e.getBody())),g=oF(o,l,e.schema,Y5(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):d.bind(p=>Of(e.schema,p,c)).fold(()=>{r&&xw(e,n,g)},p=>{r&&xw(e,n,D.some(p))})},sF=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,X5=e=>sF.test(e),Xd=(e,n)=>oc(U.fromDom(n),__(e))&&!Zm(e.schema,n)&&e.dom.isEditable(n),ww=e=>{var n;return Jn.DOM.getStyle(e,"direction",!0)==="rtl"||X5((n=e.textContent)!==null&&n!==void 0?n:"")},J5=(e,n,o)=>vt(Jn.DOM.getParents(o.container(),"*",n),e),bs=(e,n,o)=>{const r=J5(e,n,o);return D.from(r[r.length-1])},rF=(e,n,o)=>{const r=Vu(n,e),c=Vu(o,e);return Ae(r)&&r===c},aF=e=>th(e)||Iu(e),zc=(e,n)=>{const o=n.container(),r=n.offset();return e?Kl(o)?Te(o.nextSibling)?fe(o.nextSibling,0):fe.after(o):th(n)?fe(o,r+1):n:Kl(o)?Te(o.previousSibling)?fe(o.previousSibling,o.previousSibling.data.length):fe.before(o):Iu(n)?fe(o,r-1):n},Q5=Ye(zc,!0),eO=Ye(zc,!1),Jd=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},cF=e=>{e.execCommand("delete")},Xv=e=>Jd(e,"Delete"),go=e=>Jd(e,"ForwardDelete"),Jv=e=>n=>wu(Fr(n),e,xn),R1=e=>nf(e)||of(e),Qv=(e,n)=>$o(e,n)?Oo(n,R1,Jv(e)):D.none(),Qd=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},hc=(e,n,o)=>Ls(Mr(o),xi(o),(r,c)=>{const l=zc(!0,r),d=zc(!1,c),g=zc(!1,n);return e?Gr(o,g).exists(p=>p.isEqual(d)&&n.isEqual(l)):qr(o,g).exists(p=>p.isEqual(l)&&n.isEqual(d))}).getOr(!0),kh=e=>(Pl(e)?Ll(e):Dr(e)).bind(kh).orThunk(()=>D.some(e)),Fn=(e,n,o,r=!0)=>{var c;n.deleteContents();const l=kh(o).getOr(o),d=U.fromDom((c=e.dom.getParent(l.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(d.dom===e.getBody()?Qd(e,r):Hr(e.schema,d,{checkRootAsContent:!1})&&(ql(d),r&&e.selection.setCursorLocation(d.dom,0)),!xn(o,d)){const g=wu(Fr(d),o)?[]:Ou(d);oe(g.concat(Js(o)),p=>{!xn(p,d)&&!$o(p,d)&&Hr(e.schema,p)&&Xn(p)})}},N1=e=>n=>xn(e,n),e2=e=>$r(e,"td,th"),Ew=(e,n)=>u1(U.fromDom(e),n),t2=e=>Ls(e.startTable,e.endTable,(n,o)=>{const r=iT(n,l=>xn(l,o)),c=iT(o,l=>xn(l,n));return!r&&!c?e:{...e,startTable:r?D.none():e.startTable,endTable:c?D.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),kw=e=>t2(e),Tw=(e,n)=>{const o=Ew(e.startContainer,n),r=Ew(e.endContainer,n),c=o.isSome(),l=r.isSome(),d=Ls(o,r,xn).getOr(!1);return kw({startTable:o,endTable:r,isStartInTable:c,isEndInTable:l,isSameTable:d,isMultiTable:!d&&c&&l})},P1=(e,n)=>({start:e,end:n}),_w=(e,n,o)=>({rng:e,table:n,cells:o}),em=Ci.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Th=(e,n)=>at(U.fromDom(e),"td,th",n),Aw=e=>!xn(e.start,e.end),Ow=(e,n)=>u1(e.start,n).bind(o=>u1(e.end,n).bind(r=>Yi(xn(o,r),o))),tO=(e,n)=>!Aw(e)&&Ow(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),nO=(e,n)=>{const o=Th(e.startContainer,n),r=Th(e.endContainer,n);return Ls(o,r,P1)},oO=e=>n=>u1(n,e).bind(o=>Ks(e2(o)).map(r=>P1(n,r))),_h=e=>n=>u1(n,e).bind(o=>Qo(e2(o)).map(r=>P1(r,n))),n2=e=>n=>Ow(n,e).map(o=>_w(n,o,e2(o))),o2=(e,n,o,r)=>{if(o.collapsed||!e.forall(Aw))return D.none();if(n.isSameTable){const c=e.bind(n2(r));return D.some({start:c,end:c})}else{const c=Th(o.startContainer,r),l=Th(o.endContainer,r),d=c.bind(oO(r)).bind(n2(r)),g=l.bind(_h(r)).bind(n2(r));return D.some({start:d,end:g})}},sO=(e,n)=>Ns(e,o=>xn(o,n)),Dw=e=>Ls(sO(e.cells,e.rng.start),sO(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),rO=(e,n,o)=>e.exists(r=>tO(r,o)&&Ax(r.start,n)),Mw=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(l=>c.setStartAfter(l.dom)),r.each(l=>c.setEndBefore(l.dom)),c},aO=(e,n,o,r)=>o2(e,n,o,r).bind(({start:c,end:l})=>c.or(l)).bind(c=>{const{isSameTable:l}=n,d=Dw(c).getOr([]);if(l&&c.cells.length===d.length)return D.some(em.fullTable(c.table));if(d.length>0){if(l)return D.some(em.partialTable(d,D.none()));{const g=Mw(o,n);return D.some(em.partialTable(d,D.some({...n,rng:g})))}}else return D.none()}),s2=(e,n,o,r)=>o2(e,n,o,r).bind(({start:c,end:l})=>{const d=c.bind(Dw).getOr([]),g=l.bind(Dw).getOr([]);if(d.length>0&&g.length>0){const p=Mw(o,n);return D.some(em.multiTable(d,g,p))}else return D.none()}),cO=(e,n)=>{const o=N1(e),r=nO(n,o),c=Tw(n,o);return rO(r,n,o)?r.map(l=>em.singleCellTable(n,l.start)):c.isMultiTable?s2(r,c,n,o):aO(r,c,n,o)},Rw=e=>oe(e,n=>{Eo(n,"contenteditable"),ql(n)}),iO=(e,n)=>D.from(e.dom.getParent(n,e.dom.isBlock)).map(U.fromDom),lO=(e,n,o)=>{o.each(r=>{n?Xn(r):(ql(r),e.selection.setCursorLocation(r.dom,0))})},r2=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),a2(e,c,n,!1).each(l=>l())},Nw=e=>{const n=Sf(e),o=U.fromDom(e.selection.getNode());Cb(o.dom)&&Hr(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&kn(n,r=>xn(r,o))&&Is(o,"data-mce-selected","1")},Pw=(e,n,o)=>D.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:l,isStartInTable:d})=>{const g=iO(e,d?l.endContainer:l.startContainer);l.deleteContents(),lO(e,d,g.filter(Ye(Hr,e.schema)));const p=d?n[0]:n[n.length-1];return r2(e,p,r,d),Hr(e.schema,p)?D.none():D.some(d?n.slice(1):n.slice(0,-1))}).getOr(n);Rw(c),Nw(e)}),uO=(e,n,o,r)=>D.some(()=>{const c=e.selection.getRng(),l=n[0],d=o[o.length-1];r2(e,l,c,!0),r2(e,d,c,!1);const g=Hr(e.schema,l)?n:n.slice(1),p=Hr(e.schema,d)?o:o.slice(0,-1);Rw(g.concat(p)),r.deleteContents(),Nw(e)}),a2=(e,n,o,r=!0)=>D.some(()=>{Fn(e,n,o,r)}),dO=(e,n)=>D.some(()=>Df(e,!1,n)),Bw=(e,n,o)=>cO(n,o).bind(r=>r.fold(Ye(a2,e),Ye(dO,e),Ye(Pw,e),Ye(uO,e))),mO=(e,n)=>B1(e,n),fO=(e,n,o,r)=>c2(n,r).fold(()=>Bw(e,n,o),c=>mO(e,c)),gO=(e,n,o)=>{const r=U.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?Pw(e,o,D.none()):fO(e,r,c,n)},Lw=(e,n)=>ro(Gu(n,e),jp),c2=(e,n)=>ro(Gu(n,e),Sd("caption")),hO=(e,n,o,r,c)=>vf(o,e.getBody(),c).bind(l=>Lw(n,U.fromDom(l.getNode())).bind(d=>xn(d,r)?D.none():D.some(nt))),B1=(e,n)=>D.some(()=>{ql(n),e.selection.setCursorLocation(n.dom,0)}),Iw=(e,n,o,r)=>Mr(e.dom).bind(c=>xi(e.dom).map(l=>n?o.isEqual(c)&&r.isEqual(l):o.isEqual(l)&&r.isEqual(c))).getOr(!0),i2=(e,n)=>B1(e,n),pO=(e,n,o)=>c2(e,U.fromDom(o.getNode())).fold(()=>D.some(nt),r=>Yi(!xn(r,n),nt)),iF=(e,n,o,r,c)=>vf(o,e.getBody(),c).fold(()=>D.some(nt),l=>Iw(r,o,c,l)?i2(e,r):pO(n,r,l)),bO=(e,n,o,r)=>{const c=fe.fromRangeStart(e.selection.getRng());return Lw(o,r).bind(l=>Hr(e.schema,l,{checkRootAsContent:!1})?B1(e,l):hO(e,o,n,l,c))},l2=(e,n,o,r)=>{const c=fe.fromRangeStart(e.selection.getRng());return Hr(e.schema,r)?B1(e,r):iF(e,o,n,r,c)},u2=(e,n)=>e?I5(n):uw(n),L1=(e,n)=>{const o=fe.fromRangeStart(e.selection.getRng());return u2(n,o)||dc(n,e.getBody(),o).exists(r=>u2(n,r))},Fw=(e,n,o)=>{const r=U.fromDom(e.getBody());return c2(r,o).fold(()=>bO(e,n,r,o).orThunk(()=>Yi(L1(e,n),nt)),c=>l2(e,n,r,c))},d2=(e,n)=>{const o=U.fromDom(e.selection.getStart(!0)),r=Sf(e);return e.selection.isCollapsed()&&r.length===0?Fw(e,n,o):gO(e,o,r)},Ei=(e,n)=>{let o=n;for(;o&&o!==e;){if(ve(o)||Tn(o))return o;o=o.parentNode}return null},$w=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],Hw=Ee.each,tm=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(l,d)=>{if(l.nodeName!==d.nodeName||l.nodeType!==d.nodeType)return!1;const g=y=>{const E={};return Hw(n.getAttribs(y),T=>{const _=T.nodeName.toLowerCase();_!=="style"&&!c(_)&&(E[_]=n.getAttrib(y,_))}),E},p=(y,E)=>{for(const T in y)if(ht(y,T)){const _=E[T];if(uo(_)||y[T]!==_)return!1;delete E[T]}for(const T in E)if(ht(E,T))return!1;return!0};return Ze(l)&&Ze(d)&&(!p(g(l),g(d))||!p(n.parseStyle(n.getAttrib(l,"style")),n.parseStyle(n.getAttrib(d,"style"))))?!1:!Ia(l)&&!Ia(d)},c=l=>kn($w,d=>Se(l,d))||o.has(l);return{compare:r,isAttributeInternal:c}},qu=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),vO=e=>e.name==="summary",lF=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},yO=(e,n,o,r)=>{const c=o.name;for(let l=0,d=e.length;l<d;l++){const g=e[l];if(g.name===c){const p=r.nodes[c];p?p.nodes.push(o):r.nodes[c]={filter:g,nodes:[o]}}}if(o.attributes)for(let l=0,d=n.length;l<d;l++){const g=n[l],p=g.name;if(p in o.attributes.map){const y=r.attributes[p];y?y.nodes.push(o):r.attributes[p]={filter:g,nodes:[o]}}}},CO=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&lF(o,c=>{yO(e,n,c,r)}),r},Vw=(e,n)=>{const o=(r,c)=>{He(r,l=>{const d=Rn(l.nodes);oe(l.filter.callbacks,g=>{for(let p=d.length-1;p>=0;p--){const y=d[p];(!(c?y.attr(l.filter.name)!==void 0:y.name===l.filter.name)||dn(y.parent))&&d.splice(p,1)}d.length>0&&g(d,l.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},zw=(e,n,o,r={})=>{const c=CO(e,n,o);Vw(c,r)},Uw=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const l=new sa("br",1);n.insert&&l.attr("data-mce-bogus","1"),r.empty().append(l)}else r.empty().append(new sa("#text",3)).value=ks},nm=e=>{var n;return om(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===ks},om=(e,n)=>{const o=e==null?void 0:e.firstChild;return Ae(o)&&o===e.lastChild&&o.name===n},yG=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},ns=(e,n,o,r)=>r.isEmpty(n,o,c=>yG(e,c)),uF=(e,n)=>Ae(e)&&(n(e)||e.name==="br"),dF=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return D.from(n)},ml=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&ml(c,n,o);e.unwrap()}},yn=(e,n,o,r=nt)=>{const c=n.getTextBlockElements(),l=n.getNonEmptyElements(),d=n.getWhitespaceElements(),g=Ee.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),p=new Set,y=E=>E!==o&&!g[E.name];for(let E=0;E<e.length;E++){const T=e[E];let _,R,B;if(!T.parent||p.has(T))continue;if(c[T.name]&&T.parent.name==="li"){let I=T.next;for(;I&&c[I.name];){I.name="li",p.add(I),T.parent.insert(I,T.parent);I=I.next}T.unwrap();continue}const P=[T];for(_=T.parent;_&&!n.isValidChild(_.name,T.name)&&y(_);_=_.parent)P.push(_);if(_&&P.length>1)if(Zw(n,T,_))ml(T,n);else{P.reverse(),R=P[0].clone(),r(R);let I=R;for(let Z=0;Z<P.length-1;Z++){n.isValidChild(I.name,P[Z].name)&&Z>0?(B=P[Z].clone(),r(B),I.append(B)):B=I;for(let Q=P[Z].firstChild;Q&&Q!==P[Z+1];){const ee=Q.next;B.append(Q),Q=ee}I=B}ns(n,l,d,R)?_.insert(T,P[0],!0):(_.insert(R,P[0],!0),_.insert(T,R)),_=P[0],(ns(n,l,d,_)||om(_,"br"))&&_.empty().remove()}else if(T.parent){if(T.name==="li"){let I=T.prev;if(I&&(I.name==="ul"||I.name==="ol")){I.append(T);continue}if(I=T.next,I&&(I.name==="ul"||I.name==="ol")&&I.firstChild){I.insert(T,I.firstChild,!0);continue}const Z=new sa("ul",1);r(Z),T.wrap(Z);continue}if(n.isValidChild(T.parent.name,"div")&&n.isValidChild("div",T.name)){const I=new sa("div",1);r(I),T.wrap(I)}else ml(T,n)}}},CG=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},Zw=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&CG(o,"a")?!0:vO(o)&&qu(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,mF=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},no=e=>{const n=fe.fromRangeStart(e),o=fe.fromRangeEnd(e),r=e.commonAncestorContainer;return dc(!1,r,o).map(c=>!dl(n,o,r)&&dl(n,c,r)?mF(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},m2=e=>e.collapsed?e:no(e),I1=e=>Ae(e.firstChild)&&e.firstChild===e.lastChild,F1=e=>e.name==="br"||e.value===ks,$1=(e,n)=>e.getBlockElements()[n.name]&&I1(n)&&F1(n.firstChild),H1=(e,n)=>{const o=e.getNonEmptyElements();return Ae(n)&&(n.isEmpty(o)||$1(e,n))},SO=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),H1(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},SG=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},xG=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return SG(c)},wG=e=>{var n;return vt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},EG=e=>e.data===ks||An(e),fF=e=>Ae(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&EG(e.firstChild),kG=e=>!e.firstChild||fF(e),gF=e=>e.length>0&&kG(e[e.length-1])?e.slice(0,-1):e,Ww=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},TG=(e,n)=>!!Ww(e,n),hF=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},So=(e,n)=>{const o=fe.before(e),c=uc(n).next(o);return c?c.toRange():null},jw=(e,n)=>{const o=fe.after(e),c=uc(n).prev(o);return c?c.toRange():null},xO=(e,n,o,r)=>{const c=hF(e,r),l=e.parentNode;return l&&(l.insertBefore(c[0],e),Ee.each(n,d=>{l.insertBefore(d,e)}),l.insertBefore(c[1],e),l.removeChild(e)),jw(n[n.length-1],o)},pF=(e,n,o)=>{const r=e.parentNode;return r&&Ee.each(n,c=>{r.insertBefore(c,e)}),So(e,o)},bF=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),jw(n[0],o)),vF=(e,n,o,r)=>{const c=xG(n,e,r),l=Ww(n,o.startContainer),d=gF(wG(c.firstChild)),g=1,p=2,y=n.getRoot(),E=T=>{const _=fe.fromRangeStart(o),R=uc(n.getRoot()),B=T===g?R.prev(_):R.next(_),P=B==null?void 0:B.getNode();return P?Ww(n,P)!==l:!0};return l?E(g)?pF(l,d,y):E(p)?bF(l,d,y,n):xO(l,d,y,o):null},Fa=["pre"],ki=(e,n,o,r)=>{var c;const l=n.firstChild,d=n.lastChild,g=d.attr("data-mce-type")==="bookmark"?d.prev:d,p=l===g,y=kt(Fa,l.name);if(p&&y){const E=l.attr("contenteditable")!=="false",T=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===l.name,_=D.from(Ei(r,o)).forall(ve);return E&&T&&_}else return!1},f2=Cb,Gw=(e,n,o)=>{if(Ae(o)){const r=e.getParent(n.endContainer,f2);return o===r&&Ax(U.fromDom(o),n)}else return!1},qw=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const c=o.firstChild,l=o.lastChild;!c||c===l&&c.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},g2=(e,n,o)=>{D.from(e.getParent(n,"td,th")).map(U.fromDom).each(r=>FP(r,o))},wO=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),l=tm(e),d="*[data-mce-fragment]",g=r.select(d);Ee.each(g,p=>{const y=_=>Ae(o[_.nodeName.toLowerCase()]),E=_=>_.childNodes.length===1;if((_=>!(P5(r,_)||OI(r,_)))(p)&&y(p)&&E(p)){const _=Sh(r,p),R=(Z,Q)=>_o(Z,ee=>kt(Q,ee)),B=Z=>E(p)&&r.is(Z,d)&&y(Z)&&(Z.nodeName===p.nodeName&&R(_,Sh(r,Z))||B(Z.children[0])),P=Z=>Ae(Z)&&Z!==c&&(l.compare(p,Z)||P(Z.parentElement)),I=Z=>Ae(Z)&&Z!==c&&r.is(Z,d)&&(MI(r,p,Z)||I(Z.parentElement));(B(p.children[0])||P(p.parentElement)&&!I(p.parentElement))&&r.remove(p,!0)}})}},V1=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},h2=e=>{Ee.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},Kw=e=>!!e.getAttribute("data-mce-fragment"),EO=(e,n)=>Ae(n)&&!e.schema.getVoidElements()[n.nodeName],z1=(e,n)=>{var o,r,c;let l;const d=e.dom,g=e.selection;if(!n)return;g.scrollIntoView(n);const p=Ei(e.getBody(),n);if(p&&d.getContentEditable(p)==="false"){d.remove(n),g.select(p);return}let y=d.createRng();const E=n.previousSibling;if(Te(E)){y.setStart(E,(r=(o=E.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const R=n.nextSibling;Te(R)&&(E.appendData(R.data),(c=R.parentNode)===null||c===void 0||c.removeChild(R))}else y.setStartBefore(n),y.setEndBefore(n);const T=R=>{let B=fe.fromRangeStart(R);return B=uc(e.getBody()).next(B),B==null?void 0:B.toRange()},_=d.getParent(n,d.isBlock);if(d.remove(n),_&&d.isEmpty(_)){const R=f2(_);Ru(U.fromDom(_)),y.setStart(_,0),y.setEnd(_,0),!R&&!Kw(_)&&(l=T(y))?(y=l,d.remove(_)):d.add(_,d.create("br",R?{}:{"data-mce-bogus":"1"}))}g.setRng(y)},yF=e=>{const n=e.dom,o=m2(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,f2);Gw(n,o,r)?a2(e,o,U.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&Te(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},CF=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return D.some(n);return D.none()},fl=(e,n,o)=>{var r;return kn(o.children(),qu)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},$a=(e,n,o)=>{var r,c;const l=e.selection,d=e.dom,g=e.parser,p=o.merge,y=Gd({validate:!0},e.schema),E='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=ic(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,E);let T=l.getRng();const _=T.startContainer,R=e.getBody();_===R&&l.isCollapsed()&&d.isBlock(R.firstChild)&&EO(e,R.firstChild)&&d.isEmpty(R.firstChild)&&(T=d.createRng(),T.setStart(R.firstChild,0),T.setEnd(R.firstChild,0),l.setRng(T)),l.isCollapsed()||yF(e);const B=l.getNode(),P={context:B.nodeName.toLowerCase(),data:o.data,insert:!0},I=g.parse(n,P);if(o.paste===!0&&SO(e.schema,I)&&TG(d,B))return T=vF(y,d,l.getRng(),I),T&&l.setRng(T),n;o.paste===!0&&ki(d,I,B,e.getBody())&&((r=I.firstChild)===null||r===void 0||r.unwrap()),V1(I);let Z=I.lastChild;if(Z&&Z.attr("id")==="mce_marker"){const Q=Z;for(Z=Z.prev;Z&&Z.name!=="table";Z=Z.walk(!0))if(Z.type===3||!d.isBlock(Z.name)){Z.parent&&e.schema.isValidChild(Z.parent.name,"span")&&Z.parent.insert(Q,Z,Z.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(B),!P.invalid&&!fl(d,B,I))n=y.serialize(I),qw(e,n,B);else{e.selection.setContent(E);let Q=l.getNode(),ee;const ne=e.getBody();for(Bg(Q)?Q=ee=ne:ee=Q;ee&&ee!==ne;)Q=ee,ee=ee.parentNode;n=Q===ne?ne.innerHTML:d.getOuterHTML(Q);const ye=g.parse(n),Oe=CF(ye),je=Oe.bind(dF).getOr(ye);Oe.each(qe=>qe.replace(I));const he=I.children(),ue=(c=I.parent)!==null&&c!==void 0?c:ye;I.unwrap();const Ce=vt(he,qe=>Zw(e.schema,qe,ue));yn(Ce,e.schema,je),zw(g.getNodeFilters(),g.getAttributeFilters(),ye),n=y.serialize(ye),Q===ne?d.setHTML(ne,n):d.setOuterHTML(Q,n)}return wO(e,p),z1(e,d.get("mce_marker")),h2(e.getBody()),g2(d,l.getStart(),e.schema),hT(e.schema,e.getBody(),l.getStart()),n},sm=e=>e instanceof sa,Uc=e=>{br(e)&&Mr(e.getBody()).each(n=>{const o=n.getNode(),r=sl(o)?Mr(o).getOr(n):n;e.selection.setRng(r.toRange())})},Yw=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&Uc(e)},Wn=(e,n,o,r)=>{if(o=ic(o),o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const l=or(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),l.toLowerCase())?(o=c,o=e.dom.createHTML(l,Jl(e),o)):o||(o=c),Yw(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Gd({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=Wb(U.fromDom(n))?o:Ee.trim(o);return Yw(e,c,r.no_selection),{content:c,html:c}}},SF=(e,n,o,r)=>{zw(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=Gd({validate:!1},e.schema).serialize(o),l=ic(Wb(U.fromDom(n))?c:Ee.trim(c));return Yw(e,l,r.no_selection),{content:o,html:l}},Mf=(e,n,o)=>D.from(e.getBody()).map(r=>sm(n)?SF(e,r,n,o):Wn(e,r,n,o)).getOr({content:n,html:sm(o.content)?"":o.content}),Ah=e=>Ht(e)?e:we,kO=(e,n,o)=>{let r=e.dom;const c=Ah(o);for(;r.parentNode;){r=r.parentNode;const l=U.fromDom(r),d=n(l);if(d.isSome())return d;if(c(l))break}return D.none()},U1=(e,n,o)=>{const r=n(e),c=Ah(o);return r.orThunk(()=>c(e)?D.none():kO(e,n,c))},Z1=fc,TO=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const l=r[c];if($c(l)&&l.inherit===!1&&e.dom.is(n,l.selector))return!0}return!1},W1=(e,n,o,r,c)=>{const l=e.dom.getRoot();if(n===l)return!1;const d=e.dom.getParent(n,g=>TO(e,g,o)?!0:g.parentNode===l||!!gl(e,g,o,r,!0));return!!gl(e,d,o,r,c)},p2=(e,n,o)=>_s(o)&&Z1(n,o.inline)||nu(o)&&Z1(n,o.block)?!0:$c(o)?Ze(n)&&e.is(n,o.selector):!1,Xw=(e,n,o,r,c,l)=>{const d=o[r],g=r==="attributes";if(Ht(o.onmatch))return o.onmatch(n,o,r);if(d){if(id(d)){for(let p=0;p<d.length;p++)if(g?e.getAttrib(n,d[p]):xf(e,n,d[p]))return!0}else for(const p in d)if(ht(d,p)){const y=g?e.getAttrib(n,p):xf(e,n,p),E=Ho(d[p],l),T=dn(y)||Go(y);if(T&&dn(E))continue;if(c&&T&&!o.exact||(!c||o.exact)&&!Z1(y,_v(E,p)))return!1}}return!0},gl=(e,n,o,r,c)=>{const l=e.formatter.get(o),d=e.dom;if(l&&Ze(n))for(let g=0;g<l.length;g++){const p=l[g];if(p2(e.dom,n,p)&&Xw(d,n,p,"attributes",c,r)&&Xw(d,n,p,"styles",c,r)){const y=p.classes;if(y){for(let E=0;E<y.length;E++)if(!e.dom.hasClass(n,Ho(y[E],r)))return}return p}}},j1=(e,n,o,r,c)=>{if(r)return W1(e,r,n,o,c);if(r=e.selection.getNode(),W1(e,r,n,o,c))return!0;const l=e.selection.getStart();return!!(l!==r&&W1(e,l,n,o,c))},_O=(e,n,o)=>{const r=[],c={},l=e.selection.getStart();return e.dom.getParent(l,d=>{for(let g=0;g<n.length;g++){const p=n[g];!c[p]&&gl(e,d,p,o)&&(c[p]=!0,r.push(p))}},e.dom.getRoot()),r},b2=(e,n)=>{const o=c=>xn(c,U.fromDom(e.getBody())),r=(c,l)=>gl(e,c.dom,l)?D.some(l):D.none();return D.from(e.selection.getStart(!0)).bind(c=>U1(U.fromDom(c),l=>Ac(n,d=>r(l,d)),o)).getOrNull()},xF=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),l=Ov(r,c);for(let d=o.length-1;d>=0;d--){const g=o[d];if(!$c(g))return!0;for(let p=l.length-1;p>=0;p--)if(r.is(l[p],g.selector))return!0}}return!1},wF=(e,n,o)=>cs(o,(r,c)=>{const l=CA(e,c);return e.formatter.matchNode(n,c,{},l)?r.concat([c]):r},[]),G1=Us,EF=(e,n)=>e.importNode(n,!0),AO=e=>{if(e){const n=new Qs(e,e);for(let o=n.current();o;o=n.next())if(Te(o))return o}return null},v2=e=>{const n=U.fromTag("span");return li(n,{id:xv,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&qo(n,U.fromText(G1)),n},kF=e=>{const n=AO(e);return n&&n.data.charAt(0)===G1&&n.deleteData(0,1),n},Jw=(e,n,o)=>{const r=e.dom,c=e.selection;if(f1(n))Df(e,!1,U.fromDom(n),o,!0);else{const l=c.getRng(),d=r.getParent(n,r.isBlock),g=l.startContainer,p=l.startOffset,y=l.endContainer,E=l.endOffset,T=kF(n);r.remove(n,!0),g===T&&p>0&&l.setStart(T,p-1),y===T&&E>0&&l.setEnd(T,E-1),d&&r.isEmpty(d)&&ql(U.fromDom(d)),c.setRng(l)}},y2=(e,n,o)=>{const r=e.dom,c=e.selection;if(n)Jw(e,n,o);else if(n=Cf(e.getBody(),c.getStart()),!n)for(;n=r.get(xv);)Jw(e,n,o)},TF=(e,n,o)=>{var r,c;const l=e.dom,d=l.getParent(o,Ye(Rx,e.schema));d&&l.isEmpty(d)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(zT(U.fromDom(o)),l.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):l.insertAfter(n,o))},Qw=(e,n)=>(e.appendChild(n),n),Oh=(e,n)=>{var o;const r=ua(e,(l,d)=>Qw(l,d.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return Qw(r,c.createTextNode(G1))},_F=(e,n,o,r,c,l)=>{const d=e.formatter,g=e.dom,p=vt(Wo(d.get()),T=>T!==r&&!jo(T,"removeformat")),y=wF(e,o,p);if(vt(y,T=>!AL(e,T,r)).length>0){const T=o.cloneNode(!1);return g.add(n,T),d.remove(r,c,T,l),g.remove(T),D.some(T)}else return D.none()},OO=e=>VT(e,Jg(e).replace(new RegExp(`${ks}$`)," ")),e4=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&Ll(U.fromDom(n)).each(r=>{Ir(r)?OO(r):Im(r,c=>Ir(c)).each(c=>{Ir(c)&&OO(c)})})};e.once("input",r=>{r.data&&!zu(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},AF=(e,n,o)=>{let r;const c=e.selection,l=e.formatter.get(n);if(!l)return;const d=c.getRng();let g=d.startOffset;const y=d.startContainer.nodeValue;r=Cf(e.getBody(),c.getStart());const E=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(y&&g>0&&g<y.length&&E.test(y.charAt(g))&&E.test(y.charAt(g-1))){const T=c.getBookmark();d.collapse(!0);let _=Uu(e.dom,d,l);_=_1(_),e.formatter.apply(n,o,_),c.moveToBookmark(T)}else{let T=r?AO(r):null;(!r||(T==null?void 0:T.data)!==G1)&&(r=EF(e.getDoc(),v2(!0).dom),T=r.firstChild,d.insertNode(r),g=1,e4(e,r)),e.formatter.apply(n,o,r),c.setCursorLocation(T,g)}},DO=(e,n,o,r)=>{const c=e.dom,l=e.selection;let d=!1;const g=e.formatter.get(n);if(!g)return;const p=l.getRng(),y=p.startContainer,E=p.startOffset;let T=y;Te(y)&&(E!==y.data.length&&(d=!0),T=T.parentNode);const _=[];let R;for(;T;){if(gl(e,T,n,o,r)){R=T;break}T.nextSibling&&(d=!0),_.push(T),T=T.parentNode}if(R)if(d){const B=l.getBookmark();p.collapse(!0);let P=Uu(c,p,g,!0);P=_1(P),e.formatter.remove(n,o,P,r),l.moveToBookmark(B)}else{const B=Cf(e.getBody(),R),P=Ae(B)?c.getParents(R.parentNode,Ue,B):[],I=v2(!1).dom;TF(e,I,B??R);const Z=_F(e,I,R,n,o,r),Q=Oh([..._,...Z.toArray(),...P],I);B&&Jw(e,B,Ae(B)),l.setCursorLocation(Q,1),e4(e,I),c.isEmpty(R)&&c.remove(R)}},Zc=(e,n,o)=>{const r=e.selection,c=e.getBody();y2(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===G1&&y2(e,Cf(c,r.getStart()),!0),(n===37||n===39)&&y2(e,Cf(c,r.getStart()),!0)},OF=e=>Te(e)&&Wt(e.data,ks),MO=e=>{e.on("mouseup keydown",n=>{Zc(e,n.keyCode,OF(e.selection.getRng().endContainer))})},C2=e=>{const n=v2(!1),o=Oh(e,n.dom);return{caretContainer:n,caretPosition:fe(o,0)}},S2=(e,n)=>{const{caretContainer:o,caretPosition:r}=C2(n);return ta(U.fromDom(e),o),Xn(U.fromDom(e)),r},RO=(e,n)=>{const{caretContainer:o,caretPosition:r}=C2(n);return e.insertNode(o.dom),r},t4=(e,n)=>{if(mc(n.dom))return!1;const o=e.schema.getTextInlineElements();return ht(o,Ft(n))&&!mc(n.dom)&&!zm(n.dom)},q1={},NO=ol(["pre"]),PO=(e,n)=>{q1[e]||(q1[e]=[]),q1[e].push(n)},BO=(e,n)=>{ht(q1,e)&&oe(q1[e],o=>{o(n)})};PO("pre",e=>{const n=e.selection.getRng(),o=c=>l=>{const d=l.previousSibling;return NO(d)&&kt(c,d)},r=(c,l)=>{const d=U.fromDom(l),g=Qi(d).dom;Xn(d),Fl(U.fromDom(c),[U.fromTag("br",g),U.fromTag("br",g),...Js(d)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),l=vt(vt(c,NO),o(c));oe(l,d=>{r(d.previousSibling,d)})}});const pc=["fontWeight","fontStyle","color","fontSize","fontFamily"],DF=e=>Ot(e.styles)&&kn(Wo(e.styles),n=>kt(pc,n)),MF=e=>ro(e,n=>_s(n)&&n.inline==="span"&&DF(n)),RF=(e,n)=>{const o=e.get(n);return Kn(o)?MF(o):D.none()},x2=(e,n)=>qr(n,fe.fromRangeStart(e)).isNone(),LO=(e,n)=>Gr(n,fe.fromRangeEnd(e)).exists(o=>!An(o.getNode())||Gr(n,o).isSome())===!1,NF=e=>n=>gi(n)&&e.isEditable(n),PF=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return x2(o,n[0])&&LO(o,n[0])?n:[];{const r=Qo(n).filter(d=>x2(o,d)).toArray(),c=Ks(n).filter(d=>LO(o,d)).toArray(),l=n.slice(1,-1);return r.concat(l).concat(c)}},n4=e=>vt(PF(e),NF(e.dom)),Ti=e=>vt(e.getSelectedBlocks(),NF(e.dom)),K1=Ee.each,Dh=e=>Ze(e)&&!Ia(e)&&!mc(e)&&!zm(e),w2=(e,n)=>{for(let o=e;o;o=o[n]){if(Te(o)&&ls(o.data))return e;if(Ze(o)&&!Ia(o))return o}return e},IO=(e,n,o)=>{const r=tm(e),c=fi(n)&&e.dom.isEditable(n),l=fi(o)&&e.dom.isEditable(o);if(c&&l){const d=w2(n,"previousSibling"),g=w2(o,"nextSibling");if(r.compare(d,g)){for(let p=d.nextSibling;p&&p!==g;){const y=p;p=p.nextSibling,d.appendChild(y)}return e.dom.remove(g),Ee.each(Ee.grep(g.childNodes),p=>{d.appendChild(p)}),d}}return o},o4=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const l=(c=IO(e,yA(r),r))!==null&&c!==void 0?c:r;IO(e,l,yA(l,!0))}},BF=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";K1(e.select(r,o),c=>{Dh(c)&&e.isEditable(c)&&K1(n.styles,(l,d)=>{e.setStyle(c,d,"")})})}},E2=(e,n,o)=>{K1(e.childNodes,r=>{Dh(r)&&(n(r)&&o(r),r.hasChildNodes()&&E2(r,n,o))})},s4=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},FO=(e,n)=>o=>!!(o&&xf(e,o,n)),r4=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),s4(e,r)},Rf=Ci.generate([{keep:[]},{rename:["name"]},{removed:[]}]),Nf=/^(src|href|style)$/,k2=Ee.each,T2=fc,$O=e=>/^(TR|TH|TD)$/.test(e.nodeName),HO=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),VO=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(Ze(r)){const l=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>l?l:c]}return Te(r)&&o&&c>=r.data.length&&(r=new Qs(r,e.getBody()).next()||r),Te(r)&&!o&&c===0&&(r=new Qs(r,e.getBody()).prev()||r),r},zO=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return $O(e)&&r?e.nodeName==="TR"&&r[o]||r:e},a4=(e,n,o,r)=>{var c;const l=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(l,n),l.appendChild(n),l},UO=(e,n,o,r,c)=>{const l=U.fromDom(n),d=U.fromDom(e.create(r,c)),g=o?Eg(l):Ra(l);return Fl(d,g),o?(ta(l,d),_g(d,l)):(di(l,d),qo(d,l)),d.dom},ZO=(e,n)=>n.links&&e.nodeName==="A",WO=(e,n,o)=>{const r=n.parentNode;let c;const l=e.dom,d=or(e);nu(o)&&r===l.getRoot()&&(!o.list_block||!T2(n,o.list_block))&&oe(Rn(n.childNodes),g=>{uh(e,d,g.nodeName.toLowerCase())?c?c.appendChild(g):(c=a4(l,g,d),l.setAttribs(c,Jl(e))):c=null}),!(Dv(o)&&!T2(o.inline,n))&&l.remove(n,!0)},_2=(e,n,o)=>Po(e)?{name:n,value:null}:{name:e,value:Ho(n,o)},rm=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},jO=(e,n,o,r,c)=>{let l=!1;k2(o.styles,(d,g)=>{const{name:p,value:y}=_2(g,d,r),E=_v(y,p);(o.remove_similar||q(y)||!Ze(c)||T2(xf(e,c,p),E))&&e.setStyle(n,p,""),l=!0}),l&&rm(e,n)},LF=(e,n,o)=>{n==="removeformat"?oe(Ti(e.selection),r=>{oe(pc,c=>e.dom.setStyle(r,c,"")),rm(e.dom,r)}):RF(e.formatter,n).each(r=>{oe(Ti(e.selection),c=>jO(e.dom,c,r,o,null))})},Y1=(e,n,o,r,c)=>{const l=e.dom,d=tm(e),g=e.schema;if(_s(n)&&Ig(g,n.inline)&&Zm(g,r)&&r.parentElement===e.getBody())return WO(e,r,n),Rf.removed();if(!n.ceFalseOverride&&r&&l.getContentEditableParent(r)==="false"||r&&!p2(l,r,n)&&!ZO(r,n))return Rf.keep();const p=r,y=n.preserve_attributes;if(_s(n)&&n.remove==="all"&&Kn(y)){const E=vt(l.getAttribs(p),T=>kt(y,T.name.toLowerCase()));if(l.removeAllAttribs(p),oe(E,T=>l.setAttrib(p,T.name,T.value)),E.length>0)return Rf.rename("span")}if(n.remove!=="all"){jO(l,p,n,o,c),k2(n.attributes,(T,_)=>{const{name:R,value:B}=_2(_,T,o);if(n.remove_similar||q(B)||!Ze(c)||T2(l.getAttrib(c,R),B)){if(R==="class"){const P=l.getAttrib(p,R);if(P){let I="";if(oe(P.split(/\s+/),Z=>{/mce\-\w+/.test(Z)&&(I+=(I?" ":"")+Z)}),I){l.setAttrib(p,R,I);return}}}if(Nf.test(R)&&p.removeAttribute("data-mce-"+R),R==="style"&&ol(["li"])(p)&&l.getStyle(p,"list-style-type")==="none"){p.removeAttribute(R),l.setStyle(p,"list-style-type","none");return}R==="class"&&p.removeAttribute("className"),p.removeAttribute(R)}}),k2(n.classes,T=>{T=Ho(T,o),(!Ze(c)||l.hasClass(c,T))&&l.removeClass(p,T)});const E=l.getAttribs(p);for(let T=0;T<E.length;T++){const _=E[T].nodeName;if(!d.isAttributeInternal(_))return Rf.keep()}}return n.remove!=="none"?(WO(e,p,n),Rf.removed()):Rf.keep()},GO=(e,n,o,r,c)=>{let l;return n.parentNode&&oe(Ov(e.dom,n.parentNode).reverse(),d=>{if(!l&&Ze(d)&&d.id!=="_start"&&d.id!=="_end"){const g=gl(e,d,o,r,c);g&&g.split!==!1&&(l=d)}}),l},qO=(e,n,o,r)=>Y1(e,n,o,r,r).fold(Ie(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),Ie(null)),IF=(e,n,o,r,c,l,d,g)=>{var p,y;let E,T;const _=e.dom;if(o){const R=o.parentNode;for(let B=r.parentNode;B&&B!==R;B=B.parentNode){let P=_.clone(B,!1);for(let I=0;I<n.length&&(P=qO(e,n[I],g,P),P!==null);I++);P&&(E&&P.appendChild(E),T||(T=P),E=P)}(!d.mixed||!_.isBlock(o))&&(r=(p=_.split(o,r))!==null&&p!==void 0?p:r),E&&T&&((y=c.parentNode)===null||y===void 0||y.insertBefore(E,c),T.appendChild(c),_s(d)&&o4(e,d,g,E))}return r},KO=(e,n,o,r,c)=>{const l=e.formatter.get(n),d=l[0],g=e.dom,p=e.selection,y=P=>{const I=GO(e,P,n,o,c);return IF(e,l,I,P,P,!0,d,o)},E=P=>Ia(P)&&Ze(P)&&(P.id==="_start"||P.id==="_end"),T=P=>kn(l,I=>_i(e,I,o,P,P)),_=P=>{const I=Rn(P.childNodes),Q=T(P)||kn(l,ye=>p2(g,P,ye)),ee=P.parentNode;if(!Q&&Ae(ee)&&dh(d)&&T(ee),d.deep&&I.length)for(let ye=0;ye<I.length;ye++)_(I[ye]);oe(["underline","line-through","overline"],ye=>{Ze(P)&&e.dom.getStyle(P,"text-decoration")===ye&&P.parentNode&&Av(g,P.parentNode)===ye&&_i(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:ye}},void 0,P)})},R=P=>{const I=g.get(P?"_start":"_end");if(I){let Z=I[P?"firstChild":"lastChild"];return E(Z)&&(Z=Z[P?"firstChild":"lastChild"]),Te(Z)&&Z.data.length===0&&(Z=P?I.previousSibling||I.nextSibling:I.nextSibling||I.previousSibling),g.remove(I,!0),Z}else return null},B=P=>{let I,Z,Q=Uu(g,P,l,P.collapsed);if(d.split){if(Q=_1(Q),I=VO(e,Q,!0),Z=VO(e,Q),I!==Z){if(I=zO(I,!0),Z=zO(Z,!1),HO(g,I,Z)){const ne=D.from(I.firstChild).getOr(I);y(UO(g,ne,!0,"span",{id:"_start","data-mce-type":"bookmark"})),R(!0);return}if(HO(g,Z,I)){const ne=D.from(Z.lastChild).getOr(Z);y(UO(g,ne,!1,"span",{id:"_end","data-mce-type":"bookmark"})),R(!1);return}I=a4(g,I,"span",{id:"_start","data-mce-type":"bookmark"}),Z=a4(g,Z,"span",{id:"_end","data-mce-type":"bookmark"});const ee=g.createRng();ee.setStartAfter(I),ee.setEndBefore(Z),y1(g,ee,ne=>{oe(ne,ye=>{!Ia(ye)&&!Ia(ye.parentNode)&&y(ye)})}),y(I),y(Z),I=R(!0),Z=R()}else I=Z=y(I);Q.startContainer=I.parentNode?I.parentNode:I,Q.startOffset=g.nodeIndex(I),Q.endContainer=Z.parentNode?Z.parentNode:Z,Q.endOffset=g.nodeIndex(Z)+1}y1(g,Q,ee=>{oe(ee,_)})};if(r){if(d1(r)){const P=g.createRng();P.setStartBefore(r),P.setEndAfter(r),B(P)}else B(r);WS(e,n,r,o);return}!p.isCollapsed()||!_s(d)||Sf(e).length?(vA(e,()=>Dx(e,B),P=>_s(d)&&j1(e,n,o,P)),e.nodeChanged()):DO(e,n,o,c),LF(e,n,o),WS(e,n,r,o)},YO=(e,n,o,r,c)=>{(r||e.selection.isEditable())&&KO(e,n,o,r,c)},_i=(e,n,o,r,c)=>Y1(e,n,o,r,c).fold(we,l=>(e.dom.rename(r,l),!0),Ue),c4=Ee.each,XO=(e,n,o,r)=>{const c=l=>{if(fi(l)&&Ze(l.parentNode)&&e.isEditable(l)){const d=Av(e,l.parentNode);e.getStyle(l,"color")&&d?e.setStyle(l,"text-decoration",d):e.getStyle(l,"text-decoration")===d&&e.setStyle(l,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Ee.walk(r,c,"childNodes"),c(r))},JO=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=FO(e,"fontSize");E2(r,l=>c(l)&&e.isEditable(l),r4(e,"backgroundColor",Ho(n.styles.backgroundColor,o)))}},A2=(e,n,o,r)=>{if(_s(n)&&(n.inline==="sub"||n.inline==="sup")){const c=FO(e,"fontSize");E2(r,d=>c(d)&&e.isEditable(d),r4(e,"fontSize",""));const l=vt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(l,!0)}},QO=(e,n,o,r)=>{c4(n,c=>{_s(c)&&c4(e.dom.select(c.inline,r),l=>{Dh(l)&&_i(e,c,o,l,c.exact?l:null)}),BF(e.dom,c,r)})},FF=(e,n,o,r,c)=>{const l=c.parentNode;gl(e,l,o,r)&&_i(e,n,r,c)||n.merge_with_parents&&l&&e.dom.getParent(l,d=>gl(e,d,o,r)?(_i(e,n,r,c),!0):!1)},X1=Ee.each,$F=(e,n,o,r)=>{if(RB(e)&&_s(n)&&o.parentNode){const c=wT(e.schema),l=rP(U.fromDom(o),d=>mc(d.dom));return da(c,r)&&Hs(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!l}else return!1},eD=(e,n,o,r)=>{if(X1(o.styles,(c,l)=>{e.setStyle(n,l,Ho(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},O2=(e,n,o,r)=>{const c=e.formatter.get(n),l=c[0],d=!r&&e.selection.isCollapsed(),g=e.dom,p=e.selection,y=(B,P=l)=>{Ht(P.onformat)&&P.onformat(B,P,o,r),eD(g,B,P,o),X1(P.attributes,(I,Z)=>{g.setAttrib(B,Z,Ho(I,o))}),X1(P.classes,I=>{const Z=Ho(I,o);g.hasClass(B,Z)||g.addClass(B,Z)})},E=(B,P)=>{let I=!1;return X1(B,Z=>$c(Z)?g.getContentEditable(P)==="false"&&!Z.ceFalseOverride||Ae(Z.collapsed)&&Z.collapsed!==d?!0:g.is(P,Z.selector)&&!mc(P)?(y(P,Z),I=!0,!1):!0:!1),I},T=B=>{if(re(B)){const P=g.create(B);return y(P),P}else return null},_=(B,P,I)=>{const Z=[];let Q=!0;const ee=l.inline||l.block,ne=T(ee),ye=he=>OL(l)&&gl(e,he,n,o),Oe=(he,ue,Ce)=>{const qe=SA(l)&&Rx(e.schema,he)&&uh(e,ue,ee);return Ce&&qe},je=(he,ue,Ce,qe)=>{const ut=he.nodeName.toLowerCase(),At=uh(e,ee,ut)&&uh(e,ue,ee),qt=!I&&Te(he)&&jb(he.data),_n=mc(he),Pn=!_s(l)||!B.isBlock(he);return(Ce||qe)&&At&&!qt&&!_n&&Pn};y1(B,P,he=>{let ue;const Ce=qe=>{let ut=!1,At=Q,qt=!1;const _n=qe.parentNode,Pn=_n.nodeName.toLowerCase(),Ro=B.getContentEditable(qe);Ae(Ro)&&(At=Q,Q=Ro==="true",ut=!0,qt=m1(e,qe));const ar=Q&&!ut;if(An(qe)&&!$F(e,l,qe,Pn)){ue=null,nu(l)&&B.remove(qe);return}if(ye(qe)){ue=null;return}if(Oe(qe,Pn,ar)){const Os=B.rename(qe,ee);y(Os),Z.push(Os),ue=null;return}if($c(l)){let Os=E(c,qe);if(!Os&&Ae(_n)&&dh(l)&&(Os=E(c,_n)),!_s(l)||Os){ue=null;return}}Ae(ne)&&je(qe,Pn,ar,qt)?(ue||(ue=B.clone(ne,!1),_n.insertBefore(ue,qe),Z.push(ue)),qt&&ut&&(Q=At),ue.appendChild(qe)):(ue=null,oe(Rn(qe.childNodes),Ce),ut&&(Q=At),ue=null)};oe(he,Ce)}),l.links===!0&&oe(Z,he=>{const ue=Ce=>{Ce.nodeName==="A"&&y(Ce,l),oe(Rn(Ce.childNodes),ue)};ue(he)}),oe(Z,he=>{const ue=ut=>{let At=0;return oe(ut.childNodes,qt=>{!We(qt)&&!Ia(qt)&&At++}),At},Ce=ut=>ro(ut.childNodes,Mx).filter(qt=>B.getContentEditable(qt)!=="false"&&p2(B,qt,l)).map(qt=>{const _n=B.clone(qt,!1);return y(_n),B.replace(_n,ut,!0),B.remove(qt,!0),_n}).getOr(ut),qe=ue(he);if((Z.length>1||!B.isBlock(he))&&qe===0){B.remove(he,!0);return}(_s(l)||nu(l)&&l.wrapper)&&(!l.exact&&qe===1&&(he=Ce(he)),QO(e,c,o,he),FF(e,l,n,o,he),JO(B,l,o,he),XO(B,l,o,he),A2(B,l,o,he),o4(e,l,o,he))})},R=d1(r)?r:p.getNode();if(g.getContentEditable(R)==="false"&&!m1(e,R)){r=R,E(c,r),$u(e,n,r,o);return}if(l){if(r)if(d1(r)){if(!E(c,r)){const B=g.createRng();B.setStartBefore(r),B.setEndAfter(r),_(g,Uu(g,B,c),!0)}}else _(g,r,!0);else!d||!_s(l)||Sf(e).length?(p.setRng(m2(p.getRng())),vA(e,()=>{Dx(e,(B,P)=>{const I=P?B:Uu(g,B,c);_(g,I,!1)})},Ue),e.nodeChanged()):AF(e,n,o),RF(e.formatter,n).each(B=>{oe(n4(e.selection),P=>eD(g,P,B,o))});BO(n,e)}$u(e,n,r,o)},i4=(e,n,o,r)=>{(r||e.selection.isEditable())&&O2(e,n,o,r)},D2=e=>ht(e,"vars"),HF=(e,n)=>{e.set({}),n.on("NodeChange",o=>{u4(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=D.from(o.node).map(c=>d1(c)?c:c.startContainer).bind(c=>Ze(c)?D.some(c):D.from(c.parentElement)).getOrThunk(()=>tD(n));u4(n,r,e.get())})},tD=e=>e.selection.getStart(),l4=(e,n,o,r,c)=>El(n,g=>{const p=e.formatter.matchNode(g,o,c??{},r);return!uo(p)},g=>TO(e,g,o)?!0:r?!1:Ae(e.formatter.matchNode(g,o,c,!0))),M2=(e,n)=>{const o=n??tD(e);return vt(Ov(e.dom,o),r=>Ze(r)&&!zm(r))},u4=(e,n,o)=>{const r=M2(e,n);He(o,(c,l)=>{const d=g=>{const p=l4(e,r,l,g.similar,D2(g)?g.vars:void 0),y=p.isSome();if(g.state.get()!==y){g.state.set(y);const E=p.getOr(n);D2(g)?g.callback(y,{node:E,format:l,parents:r}):oe(g.callbacks,T=>T(y,{node:E,format:l,parents:r}))}};oe([c.withSimilar,c.withoutSimilar],d),oe(c.withVars,d)})},VF=(e,n,o,r,c,l)=>{const d=n.get();oe(o.split(","),g=>{const p=Bn(d,g).getOrThunk(()=>{const E={withSimilar:{state:mo(!1),similar:!0,callbacks:[]},withoutSimilar:{state:mo(!1),similar:!1,callbacks:[]},withVars:[]};return d[g]=E,E}),y=()=>{const E=M2(e);return l4(e,E,g,c,l).isSome()};if(uo(l)){const E=c?p.withSimilar:p.withoutSimilar;E.callbacks.push(r),E.callbacks.length===1&&E.state.set(y())}else p.withVars.push({state:mo(y()),similar:c,vars:l,callback:r})}),n.set(d)},zF=(e,n,o)=>{const r=e.get();oe(n.split(","),c=>Bn(r,c).each(l=>{r[c]={withSimilar:{...l.withSimilar,callbacks:vt(l.withSimilar.callbacks,d=>d!==o)},withoutSimilar:{...l.withoutSimilar,callbacks:vt(l.withoutSimilar.callbacks,d=>d!==o)},withVars:vt(l.withVars,d=>d.callback!==o)}})),e.set(r)},UF=(e,n,o,r,c,l)=>(VF(e,n,o,r,c,l),{unbind:()=>zF(n,o,r)}),R2=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(j1(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?YO(e,n,o,r):i4(e,n,o,r))},su=Ee.explode,nD=()=>{const e={};return{addFilter:(c,l)=>{oe(su(c),d=>{ht(e,d)||(e[d]={name:d,callbacks:[]}),e[d].callbacks.push(l)})},getFilters:()=>vu(e),removeFilter:(c,l)=>{oe(su(c),d=>{if(ht(e,d))if(Ae(l)){const g=e[d],p=vt(g.callbacks,y=>y!==l);p.length>0?g.callbacks=p:delete e[d]}else delete e[d]})}}},d4=(e,n)=>{oe(n,o=>{e.attr(o,null)})},zo=(e,n,o)=>{e.addNodeFilter("font",r=>{oe(r,c=>{const l=n.parse(c.attr("style")),d=c.attr("color"),g=c.attr("face"),p=c.attr("size");d&&(l.color=d),g&&(l["font-family"]=g),p&&fd(p).each(y=>{l["font-size"]=o[y-1]}),c.name="span",c.attr("style",n.serialize(l)),d4(c,["color","face","size"])})})},m4=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";oe(r,l=>{if(c)l.name="s";else{const d=o.parse(l.attr("style"));d["text-decoration"]="line-through",l.name="span",l.attr("style",o.serialize(d))}})})},f4=(e,n,o)=>{var r;const c=Id();n.convert_fonts_to_spans&&zo(e,c,Ee.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),m4(e,o,c)},Ku=(e,n,o)=>{n.inline_styles&&f4(e,n,o)},oD=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),sD=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},J1=e=>{try{return decodeURIComponent(e)}catch{return e}},g4=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const l=c[2]===";base64",d=J1(r),g=l?sD(d):d;return D.some({type:c[1],data:g,base64Encoded:l})}else return D.none()},rD=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return D.none()}const c=new Uint8Array(r.length);for(let l=0;l<c.length;l++)c[l]=r.charCodeAt(l);return D.some(new Blob([c],{type:e}))},Mh=e=>new Promise((n,o)=>{g4(e).bind(({type:r,data:c,base64Encoded:l})=>rD(r,c,l)).fold(()=>o("Invalid data URI"),n)}),ZF=e=>Se(e,"blob:")?oD(e):Se(e,"data:")?Mh(e):Promise.reject("Unknown URI format"),am=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let WF=0;const cm=e=>"blobid"+WF++,aD=(e,n,o)=>g4(e).bind(({data:r,type:c,base64Encoded:l})=>{if(n&&!l)return D.none();{const d=l?r:btoa(r);return o(d,c)}}),bc=(e,n,o)=>{const r=e.create(cm(),n,o);return e.add(r),r},Rh=(e,n,o=!1)=>aD(n,o,(r,c)=>D.from(e.getByData(r,c)).orThunk(()=>rD(c,r).map(l=>bc(e,l,r)))),h4=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(Se(n,"blob:")){const r=e.getByUri(n);return Ae(r)?Promise.resolve(r):ZF(n).then(c=>am(c).then(l=>aD(l,!1,d=>D.some(bc(e,c,d))).getOrThunk(o)))}else return Se(n,"data:")?Rh(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},p4=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,jF=e=>D.from(e.match(p4)).bind(n=>ri(n,1)).map(n=>Se(n,"www.")?n.substring(4):n),Q1=(e,n)=>{D.from(e.attr("src")).bind(jF).forall(o=>!kt(n,o))&&e.attr("sandbox","")},b4=(e,n)=>Se(e,`${n}/`),Ai=e=>uo(e)?"iframe":b4(e,"image")?"img":b4(e,"video")?"video":b4(e,"audio")?"audio":"iframe",N2=({type:e,src:n,width:o,height:r}={},c,l)=>{const d=Ai(e),g=new sa(d,1);return g.attr(d==="audio"?{src:n}:{src:n,width:o,height:r}),(d==="audio"||d==="video")&&g.attr("controls",""),d==="iframe"&&c&&Q1(g,l),g},cD=e=>Ae(e.attr("data-mce-bogus")),v4=e=>e.attr("src")===Tt.transparentSrc||Ae(e.attr("data-mce-placeholder")),y4=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const l=c.attr("src");v4(c)||cD(c)||dn(l)||Rh(o,l,!0).each(d=>{c.attr("src",d.blobUri())})};e.addAttributeFilter("src",c=>oe(c,r))}},Nh=(e,n)=>{var o,r;const c=e.schema;e.addAttributeFilter("href",p=>{let y=p.length;const E=_=>_.split(" ").filter(B=>B.length>0).concat(["noopener"]).sort().join(" "),T=_=>{const R=_?Ee.trim(_):"";return/\b(noopener)\b/g.test(R)?R:E(R)};if(!n.allow_unsafe_link_target)for(;y--;){const _=p[y];_.name==="a"&&_.attr("target")==="_blank"&&_.attr("rel",T(_.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",p=>{let y=p.length,E,T,_,R;for(;y--;)if(R=p[y],R.name==="a"&&R.firstChild&&!R.attr("href"))for(_=R.parent,E=R.lastChild;E&&_;)T=E.prev,_.insert(E,R),E=T}),n.fix_list_elements&&e.addNodeFilter("ul,ol",p=>{let y=p.length,E,T;for(;y--;)if(E=p[y],T=E.parent,T&&(T.name==="ul"||T.name==="ol"))if(E.prev&&E.prev.name==="li")E.prev.append(E);else{const _=new sa("li",1);_.attr("style","list-style-type: none"),E.wrap(_)}});const l=c.getValidClasses();n.validate&&l&&e.addAttributeFilter("class",p=>{var y;let E=p.length;for(;E--;){const T=p[E],_=(y=T.attr("class"))!==null&&y!==void 0?y:"",R=Ee.explode(_," ");let B="";for(let P=0;P<R.length;P++){const I=R[P];let Z=!1,Q=l["*"];Q&&Q[I]&&(Z=!0),Q=l[T.name],!Z&&Q&&Q[I]&&(Z=!0),Z&&(B&&(B+=" "),B+=I)}B.length||(B=null),T.attr("class",B)}}),y4(e,n);const d=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,g=ai((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",p=>oe(p,y=>{y.replace(N2({type:y.attr("type"),src:y.name==="object"?y.attr("data"):y.attr("src"),width:y.attr("width"),height:y.attr("height")},d,g))})),d&&e.addNodeFilter("iframe",p=>oe(p,y=>Q1(y,g)))};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:P2,setPrototypeOf:iD,isFrozen:lD,getPrototypeOf:GF,getOwnPropertyDescriptor:qF}=Object;let{freeze:Ha,seal:Oi,create:Ph}=Object,{apply:C4,construct:B2}=typeof Reflect<"u"&&Reflect;Ha||(Ha=function(n){return n}),Oi||(Oi=function(n){return n}),C4||(C4=function(n,o,r){return n.apply(o,r)}),B2||(B2=function(n,o){return new n(...o)});const Bh=jc(Array.prototype.forEach),uD=jc(Array.prototype.pop),Lh=jc(Array.prototype.push),Pf=jc(String.prototype.toLowerCase),S4=jc(String.prototype.toString),dD=jc(String.prototype.match),e0=jc(String.prototype.replace),KF=jc(String.prototype.indexOf),YF=jc(String.prototype.trim),Wc=jc(Object.prototype.hasOwnProperty),Va=jc(RegExp.prototype.test),t0=XF(TypeError);function jc(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return C4(e,n,r)}}function XF(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return B2(e,o)}}function jn(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pf;iD&&iD(e,null);let r=n.length;for(;r--;){let c=n[r];if(typeof c=="string"){const l=o(c);l!==c&&(lD(n)||(n[r]=l),c=l)}e[c]=!0}return e}function JF(e){for(let n=0;n<e.length;n++)Wc(e,n)||(e[n]=null);return e}function Bf(e){const n=Ph(null);for(const[o,r]of P2(e))Wc(e,o)&&(Array.isArray(r)?n[o]=JF(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=Bf(r):n[o]=r);return n}function n0(e,n){for(;e!==null;){const r=qF(e,n);if(r){if(r.get)return jc(r.get);if(typeof r.value=="function")return jc(r.value)}e=GF(e)}function o(){return null}return o}const mD=Ha(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),x4=Ha(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),w4=Ha(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),QF=Ha(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),E4=Ha(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),fD=Ha(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),gD=Ha(["#text"]),Lf=Ha(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),k4=Ha(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),hD=Ha(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),L2=Ha(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),e$=Oi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),pD=Oi(/<%[\w\W]*|[\w\W]*%>/gm),t$=Oi(/\${[\w\W]*}/gm),n$=Oi(/^data-[\-\w.\u00B7-\uFFFF]/),o$=Oi(/^aria-[\-\w]+$/),bD=Oi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),s$=Oi(/^(?:\w+script|data):/i),r$=Oi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),vD=Oi(/^html$/i),a$=Oi(/^[a-z][.\w]*(-[.\w]+)+$/i);var yD=Object.freeze({__proto__:null,MUSTACHE_EXPR:e$,ERB_EXPR:pD,TMPLIT_EXPR:t$,DATA_ATTR:n$,ARIA_ATTR:o$,IS_ALLOWED_URI:bD,IS_SCRIPT_OR_DATA:s$,ATTR_WHITESPACE:r$,DOCTYPE_NAME:vD,CUSTOM_ELEMENT:a$});const o0={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},T4=function(){return typeof window>"u"?null:window},CD=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const c="data-tt-policy-suffix";o&&o.hasAttribute(c)&&(r=o.getAttribute(c));const l="dompurify"+(r?"#"+r:"");try{return n.createPolicy(l,{createHTML(d){return d},createScriptURL(d){return d}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}};function c$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T4();const n=Yt=>c$(Yt);if(n.version="3.1.7",n.removed=[],!e||!e.document||e.document.nodeType!==o0.document)return n.isSupported=!1,n;let{document:o}=e;const r=o,c=r.currentScript,{DocumentFragment:l,HTMLTemplateElement:d,Node:g,Element:p,NodeFilter:y,NamedNodeMap:E=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:T,DOMParser:_,trustedTypes:R}=e,B=p.prototype,P=n0(B,"cloneNode"),I=n0(B,"remove"),Z=n0(B,"nextSibling"),Q=n0(B,"childNodes"),ee=n0(B,"parentNode");if(typeof d=="function"){const Yt=o.createElement("template");Yt.content&&Yt.content.ownerDocument&&(o=Yt.content.ownerDocument)}let ne,ye="";const{implementation:Oe,createNodeIterator:je,createDocumentFragment:he,getElementsByTagName:ue}=o,{importNode:Ce}=r;let qe={};n.isSupported=typeof P2=="function"&&typeof ee=="function"&&Oe&&Oe.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ut,ERB_EXPR:At,TMPLIT_EXPR:qt,DATA_ATTR:_n,ARIA_ATTR:Pn,IS_SCRIPT_OR_DATA:Ro,ATTR_WHITESPACE:ar,CUSTOM_ELEMENT:Os}=yD;let{IS_ALLOWED_URI:Pe}=yD,lt=null;const mn=jn({},[...mD,...x4,...w4,...E4,...gD]);let ze=null;const yt=jn({},[...Lf,...k4,...hD,...L2]);let St=Object.seal(Ph(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$e=null,Kt=null,en=!0,os=!0,On=!1,xr=!0,wa=!1,Cl=!0,Nr=!1,Ua=!1,Za=!1,cr=!1,Wa=!1,ct=!1,cn=!0,No=!1;const ss="user-content-";let Ds=!0,rs=!1,xo={},wo=null;const Yr=jn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Qc=null;const Sl=jn({},["audio","video","img","source","image","track"]);let Fi=null;const cg=jn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ig="http://www.w3.org/1998/Math/MathML",ad="http://www.w3.org/2000/svg",ei="http://www.w3.org/1999/xhtml";let cd=ei,vp=!1,yp=null;const j7=jn({},[ig,ad,ei],S4);let lg=null;const Xk=["application/xhtml+xml","text/html"],Jk="text/html";let wr=null,ja=null;const Cp=o.createElement("form"),ae=function(de){return de instanceof RegExp||de instanceof Function},ie=function(){let de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ja&&ja===de)){if((!de||typeof de!="object")&&(de={}),de=Bf(de),lg=Xk.indexOf(de.PARSER_MEDIA_TYPE)===-1?Jk:de.PARSER_MEDIA_TYPE,wr=lg==="application/xhtml+xml"?S4:Pf,lt=Wc(de,"ALLOWED_TAGS")?jn({},de.ALLOWED_TAGS,wr):mn,ze=Wc(de,"ALLOWED_ATTR")?jn({},de.ALLOWED_ATTR,wr):yt,yp=Wc(de,"ALLOWED_NAMESPACES")?jn({},de.ALLOWED_NAMESPACES,S4):j7,Fi=Wc(de,"ADD_URI_SAFE_ATTR")?jn(Bf(cg),de.ADD_URI_SAFE_ATTR,wr):cg,Qc=Wc(de,"ADD_DATA_URI_TAGS")?jn(Bf(Sl),de.ADD_DATA_URI_TAGS,wr):Sl,wo=Wc(de,"FORBID_CONTENTS")?jn({},de.FORBID_CONTENTS,wr):Yr,$e=Wc(de,"FORBID_TAGS")?jn({},de.FORBID_TAGS,wr):{},Kt=Wc(de,"FORBID_ATTR")?jn({},de.FORBID_ATTR,wr):{},xo=Wc(de,"USE_PROFILES")?de.USE_PROFILES:!1,en=de.ALLOW_ARIA_ATTR!==!1,os=de.ALLOW_DATA_ATTR!==!1,On=de.ALLOW_UNKNOWN_PROTOCOLS||!1,xr=de.ALLOW_SELF_CLOSE_IN_ATTR!==!1,wa=de.SAFE_FOR_TEMPLATES||!1,Cl=de.SAFE_FOR_XML!==!1,Nr=de.WHOLE_DOCUMENT||!1,cr=de.RETURN_DOM||!1,Wa=de.RETURN_DOM_FRAGMENT||!1,ct=de.RETURN_TRUSTED_TYPE||!1,Za=de.FORCE_BODY||!1,cn=de.SANITIZE_DOM!==!1,No=de.SANITIZE_NAMED_PROPS||!1,Ds=de.KEEP_CONTENT!==!1,rs=de.IN_PLACE||!1,Pe=de.ALLOWED_URI_REGEXP||bD,cd=de.NAMESPACE||ei,St=de.CUSTOM_ELEMENT_HANDLING||{},de.CUSTOM_ELEMENT_HANDLING&&ae(de.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(St.tagNameCheck=de.CUSTOM_ELEMENT_HANDLING.tagNameCheck),de.CUSTOM_ELEMENT_HANDLING&&ae(de.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(St.attributeNameCheck=de.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),de.CUSTOM_ELEMENT_HANDLING&&typeof de.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(St.allowCustomizedBuiltInElements=de.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),wa&&(os=!1),Wa&&(cr=!0),xo&&(lt=jn({},gD),ze=[],xo.html===!0&&(jn(lt,mD),jn(ze,Lf)),xo.svg===!0&&(jn(lt,x4),jn(ze,k4),jn(ze,L2)),xo.svgFilters===!0&&(jn(lt,w4),jn(ze,k4),jn(ze,L2)),xo.mathMl===!0&&(jn(lt,E4),jn(ze,hD),jn(ze,L2))),de.ADD_TAGS&&(lt===mn&&(lt=Bf(lt)),jn(lt,de.ADD_TAGS,wr)),de.ADD_ATTR&&(ze===yt&&(ze=Bf(ze)),jn(ze,de.ADD_ATTR,wr)),de.ADD_URI_SAFE_ATTR&&jn(Fi,de.ADD_URI_SAFE_ATTR,wr),de.FORBID_CONTENTS&&(wo===Yr&&(wo=Bf(wo)),jn(wo,de.FORBID_CONTENTS,wr)),Ds&&(lt["#text"]=!0),Nr&&jn(lt,["html","head","body"]),lt.table&&(jn(lt,["tbody"]),delete $e.tbody),de.TRUSTED_TYPES_POLICY){if(typeof de.TRUSTED_TYPES_POLICY.createHTML!="function")throw t0('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof de.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw t0('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ne=de.TRUSTED_TYPES_POLICY,ye=ne.createHTML("")}else ne===void 0&&(ne=CD(R,c)),ne!==null&&typeof ye=="string"&&(ye=ne.createHTML(""));Ha&&Ha(de),ja=de}},Ne=jn({},["mi","mo","mn","ms","mtext"]),De=jn({},["annotation-xml"]),bt=jn({},["title","style","font","a","script"]),fn=jn({},[...x4,...w4,...QF]),To=jn({},[...E4,...fD]),xl=function(de){let mt=ee(de);(!mt||!mt.tagName)&&(mt={namespaceURI:cd,tagName:"template"});const zt=Pf(de.tagName),Jo=Pf(mt.tagName);return yp[de.namespaceURI]?de.namespaceURI===ad?mt.namespaceURI===ei?zt==="svg":mt.namespaceURI===ig?zt==="svg"&&(Jo==="annotation-xml"||Ne[Jo]):!!fn[zt]:de.namespaceURI===ig?mt.namespaceURI===ei?zt==="math":mt.namespaceURI===ad?zt==="math"&&De[Jo]:!!To[zt]:de.namespaceURI===ei?mt.namespaceURI===ad&&!De[Jo]||mt.namespaceURI===ig&&!Ne[Jo]?!1:!To[zt]&&(bt[zt]||!fn[zt]):!!(lg==="application/xhtml+xml"&&yp[de.namespaceURI]):!1},ti=function(de){Lh(n.removed,{element:de});try{ee(de).removeChild(de)}catch{I(de)}},Q0=function(de,mt){try{Lh(n.removed,{attribute:mt.getAttributeNode(de),from:mt})}catch{Lh(n.removed,{attribute:null,from:mt})}if(mt.removeAttribute(de),de==="is"&&!ze[de])if(cr||Wa)try{ti(mt)}catch{}else try{mt.setAttribute(de,"")}catch{}},G7=function(de){let mt=null,zt=null;if(Za)de="<remove></remove>"+de;else{const Xr=dD(de,/^[\r\n\t ]+/);zt=Xr&&Xr[0]}lg==="application/xhtml+xml"&&cd===ei&&(de='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+de+"</body></html>");const Jo=ne?ne.createHTML(de):de;if(cd===ei)try{mt=new _().parseFromString(Jo,lg)}catch{}if(!mt||!mt.documentElement){mt=Oe.createDocument(cd,"template",null);try{mt.documentElement.innerHTML=vp?ye:Jo}catch{}}const Ea=mt.body||mt.documentElement;return de&&zt&&Ea.insertBefore(o.createTextNode(zt),Ea.childNodes[0]||null),cd===ei?ue.call(mt,Nr?"html":"body")[0]:Nr?mt.documentElement:Ea},q7=function(de){return je.call(de.ownerDocument||de,de,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT|y.SHOW_PROCESSING_INSTRUCTION|y.SHOW_CDATA_SECTION,null)},Qk=function(de){return de instanceof T&&(typeof de.nodeName!="string"||typeof de.textContent!="string"||typeof de.removeChild!="function"||!(de.attributes instanceof E)||typeof de.removeAttribute!="function"||typeof de.setAttribute!="function"||typeof de.namespaceURI!="string"||typeof de.insertBefore!="function"||typeof de.hasChildNodes!="function")},K7=function(de){return typeof g=="function"&&de instanceof g},fu=function(de,mt,zt){qe[de]&&Bh(qe[de],Jo=>{Jo.call(n,mt,zt,ja)})},eb=function(de){let mt=null;if(fu("beforeSanitizeElements",de,null),Qk(de))return ti(de),!0;const zt=wr(de.nodeName);if(fu("uponSanitizeElement",de,{tagName:zt,allowedTags:lt}),de.hasChildNodes()&&!K7(de.firstElementChild)&&Va(/<[/\w]/g,de.innerHTML)&&Va(/<[/\w]/g,de.textContent)||de.nodeType===o0.progressingInstruction||Cl&&de.nodeType===o0.comment&&Va(/<[/\w]/g,de.data))return ti(de),!0;if(!lt[zt]||$e[zt]){if(!$e[zt]&&eT(zt)&&(St.tagNameCheck instanceof RegExp&&Va(St.tagNameCheck,zt)||St.tagNameCheck instanceof Function&&St.tagNameCheck(zt)))return!1;if(Ds&&!wo[zt]){const Jo=ee(de)||de.parentNode,Ea=Q(de)||de.childNodes;if(Ea&&Jo){const Xr=Ea.length;for(let Sc=Xr-1;Sc>=0;--Sc){const gu=P(Ea[Sc],!0);gu.__removalCount=(de.__removalCount||0)+1,Jo.insertBefore(gu,Z(de))}}}return ti(de),!0}return de instanceof p&&!xl(de)||(zt==="noscript"||zt==="noembed"||zt==="noframes")&&Va(/<\/no(script|embed|frames)/i,de.innerHTML)?(ti(de),!0):(wa&&de.nodeType===o0.text&&(mt=de.textContent,Bh([ut,At,qt],Jo=>{mt=e0(mt,Jo," ")}),de.textContent!==mt&&(Lh(n.removed,{element:de.cloneNode()}),de.textContent=mt)),fu("afterSanitizeElements",de,null),!1)},Y7=function(de,mt,zt){if(cn&&(mt==="id"||mt==="name")&&(zt in o||zt in Cp))return!1;if(!(os&&!Kt[mt]&&Va(_n,mt))){if(!(en&&Va(Pn,mt))){if(!ze[mt]||Kt[mt]){if(!(eT(de)&&(St.tagNameCheck instanceof RegExp&&Va(St.tagNameCheck,de)||St.tagNameCheck instanceof Function&&St.tagNameCheck(de))&&(St.attributeNameCheck instanceof RegExp&&Va(St.attributeNameCheck,mt)||St.attributeNameCheck instanceof Function&&St.attributeNameCheck(mt))||mt==="is"&&St.allowCustomizedBuiltInElements&&(St.tagNameCheck instanceof RegExp&&Va(St.tagNameCheck,zt)||St.tagNameCheck instanceof Function&&St.tagNameCheck(zt))))return!1}else if(!Fi[mt]){if(!Va(Pe,e0(zt,ar,""))){if(!((mt==="src"||mt==="xlink:href"||mt==="href")&&de!=="script"&&KF(zt,"data:")===0&&Qc[de])){if(!(On&&!Va(Ro,e0(zt,ar,"")))){if(zt)return!1}}}}}}return!0},eT=function(de){return de!=="annotation-xml"&&dD(de,Os)},X7=function(de){fu("beforeSanitizeAttributes",de,null);const{attributes:mt}=de;if(!mt)return;const zt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ze};let Jo=mt.length;for(;Jo--;){const Ea=mt[Jo],{name:Xr,namespaceURI:Sc,value:gu}=Ea,Sp=wr(Xr);let Jr=Xr==="value"?gu:YF(gu);const Bj=Jr;if(zt.attrName=Sp,zt.attrValue=Jr,zt.keepAttr=!0,zt.forceKeepAttr=void 0,fu("uponSanitizeAttribute",de,zt),Jr=zt.attrValue,zt.forceKeepAttr)continue;if(!zt.keepAttr){Q0(Xr,de);continue}if(!xr&&Va(/\/>/i,Jr)){Q0(Xr,de);continue}wa&&Bh([ut,At,qt],eP=>{Jr=e0(Jr,eP," ")});const Q7=wr(de.nodeName);if(!Y7(Q7,Sp,Jr)){Q0(Xr,de);continue}if(No&&(Sp==="id"||Sp==="name")&&(Q0(Xr,de),Jr=ss+Jr),Cl&&Va(/((--!?|])>)|<\/(style|title)/i,Jr)){Q0(Xr,de);continue}if(ne&&typeof R=="object"&&typeof R.getAttributeType=="function"&&!Sc)switch(R.getAttributeType(Q7,Sp)){case"TrustedHTML":{Jr=ne.createHTML(Jr);break}case"TrustedScriptURL":{Jr=ne.createScriptURL(Jr);break}}if(Jr!==Bj)try{Sc?de.setAttributeNS(Sc,Xr,Jr):de.setAttribute(Xr,Jr),Qk(de)?ti(de):uD(n.removed)}catch{}}fu("afterSanitizeAttributes",de,null)},J7=function Yt(de){let mt=null;const zt=q7(de);for(fu("beforeSanitizeShadowDOM",de,null);mt=zt.nextNode();)fu("uponSanitizeShadowNode",mt,null),!eb(mt)&&(mt.content instanceof l&&Yt(mt.content),X7(mt));fu("afterSanitizeShadowDOM",de,null)};return n.sanitize=function(Yt){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},mt=null,zt=null,Jo=null,Ea=null;if(vp=!Yt,vp&&(Yt="<!-->"),typeof Yt!="string"&&!K7(Yt))if(typeof Yt.toString=="function"){if(Yt=Yt.toString(),typeof Yt!="string")throw t0("dirty is not a string, aborting")}else throw t0("toString is not a function");if(!n.isSupported)return Yt;if(Ua||ie(de),n.removed=[],typeof Yt=="string"&&(rs=!1),rs){if(Yt.nodeName){const gu=wr(Yt.nodeName);if(!lt[gu]||$e[gu])throw t0("root node is forbidden and cannot be sanitized in-place")}}else if(Yt instanceof g)mt=G7("<!---->"),zt=mt.ownerDocument.importNode(Yt,!0),zt.nodeType===o0.element&&zt.nodeName==="BODY"||zt.nodeName==="HTML"?mt=zt:mt.appendChild(zt);else{if(!cr&&!wa&&!Nr&&Yt.indexOf("<")===-1)return ne&&ct?ne.createHTML(Yt):Yt;if(mt=G7(Yt),!mt)return cr?null:ct?ye:""}mt&&Za&&ti(mt.firstChild);const Xr=q7(rs?Yt:mt);for(;Jo=Xr.nextNode();)eb(Jo)||(Jo.content instanceof l&&J7(Jo.content),X7(Jo));if(rs)return Yt;if(cr){if(Wa)for(Ea=he.call(mt.ownerDocument);mt.firstChild;)Ea.appendChild(mt.firstChild);else Ea=mt;return(ze.shadowroot||ze.shadowrootmode)&&(Ea=Ce.call(r,Ea,!0)),Ea}let Sc=Nr?mt.outerHTML:mt.innerHTML;return Nr&&lt["!doctype"]&&mt.ownerDocument&&mt.ownerDocument.doctype&&mt.ownerDocument.doctype.name&&Va(vD,mt.ownerDocument.doctype.name)&&(Sc="<!DOCTYPE "+mt.ownerDocument.doctype.name+`>
`+Sc),wa&&Bh([ut,At,qt],gu=>{Sc=e0(Sc,gu," ")}),ne&&ct?ne.createHTML(Sc):Sc},n.setConfig=function(){let Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ie(Yt),Ua=!0},n.clearConfig=function(){ja=null,Ua=!1},n.isValidAttribute=function(Yt,de,mt){ja||ie({});const zt=wr(Yt),Jo=wr(de);return Y7(zt,Jo,mt)},n.addHook=function(Yt,de){typeof de=="function"&&(qe[Yt]=qe[Yt]||[],Lh(qe[Yt],de))},n.removeHook=function(Yt){if(qe[Yt])return uD(qe[Yt])},n.removeHooks=function(Yt){qe[Yt]&&(qe[Yt]=[])},n.removeAllHooks=function(){qe={}},n}var If=c$();const SD=Ee.each,_G=Ee.trim,AG=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],OG={ftp:21,http:80,https:443,mailto:25},DG=["img","video"],Gc=(e,n)=>Ae(e)?!e:Ae(n)?!kt(DG,n):!0,I2=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},Di=(e,n,o)=>{const r=I2(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?Gc(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class js{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=Gm.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!Di(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=_G(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const l=n.indexOf("//")===0;if(n.indexOf("/")===0&&!l&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const g=r?r.path:new js(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(g,n);else{const p=/([^#?]*)([#?]?.*)/.exec(n);p&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(g,p[1])+p[2])}}n=n.replace(/@@/g,"(mce_at)");const d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);d&&SD(AG,(g,p)=>{let y=d[p];y&&(y=y.replace(/\(mce_at\)/g,"@@")),c[g]=y}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),l&&(c.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new js(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let l=this.toRelPath(this.path,o.path);return o.query&&(l+="?"+o.query),o.anchor&&(l+="#"+o.anchor),l}toAbsolute(n,o){const r=new js(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?OG[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",l,d;const g=n.substring(0,n.lastIndexOf("/")).split("/"),p=o.split("/");if(g.length>=p.length){for(l=0,d=g.length;l<d;l++)if(l>=p.length||g[l]!==p[l]){r=l+1;break}}if(g.length<p.length){for(l=0,d=p.length;l<d;l++)if(l>=g.length||g[l]!==p[l]){r=l+1;break}}if(r===1)return o;for(l=0,d=g.length-(r-1);l<d;l++)c+="../";for(l=r-1,d=p.length;l<d;l++)l!==r-1?c+="/"+p[l]:c+=p[l];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",l=n.split("/"),d=o.split("/"),g=[];SD(l,T=>{T&&g.push(T)});const p=[];for(let T=d.length-1;T>=0;T--)if(!(d[T].length===0||d[T]===".")){if(d[T]===".."){r++;continue}if(r>0){r--;continue}p.push(d[T])}const y=g.length-r;let E;return y<=0?E=ao(p).join("/"):E=g.slice(0,y).join("/")+"/"+ao(p).join("/"),E.indexOf("/")!==0&&(E="/"+E),c&&E.lastIndexOf("/")!==E.length-1&&(E+=c),E}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const xD=Ee.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Ff="data-mce-type";let wD=0;const _4=(e,n,o,r,c)=>{var l,d,g,p;const y=n.validate,E=o.getSpecialElements();e.nodeType===Nl&&!n.allow_conditional_comments&&/^\[if/i.test((l=e.nodeValue)!==null&&l!==void 0?l:"")&&(e.nodeValue=" "+e.nodeValue);const T=(d=c==null?void 0:c.tagName)!==null&&d!==void 0?d:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){Ae(c)&&(c.allowedTags[T]=!0);return}if(e.nodeType!==Xi||T==="body")return;const _=U.fromDom(e),R=ku(_,Ff),B=ea(_,"data-mce-bogus");if(!R&&re(B)){B==="all"?Xn(_):$l(_);return}const P=o.getElementRule(T);if(y&&!P){ht(E,T)?Xn(_):$l(_);return}else Ae(c)&&(c.allowedTags[T]=!0);if(y&&P&&!R){if(oe((g=P.attributesForced)!==null&&g!==void 0?g:[],I=>{Is(_,I.name,I.value==="{$uid}"?`mce_${wD++}`:I.value)}),oe((p=P.attributesDefault)!==null&&p!==void 0?p:[],I=>{ku(_,I.name)||Is(_,I.name,I.value==="{$uid}"?`mce_${wD++}`:I.value)}),P.attributesRequired&&!kn(P.attributesRequired,I=>ku(_,I))){$l(_);return}if(P.removeEmptyAttrs&&XC(_)){$l(_);return}P.outputName&&P.outputName!==T&&FT(_,P.outputName)}},MG=(e,n,o,r,c)=>{const l=e.tagName.toLowerCase(),{attrName:d,attrValue:g}=c;c.keepAttr=ED(n,o,r,l,d,g),c.keepAttr?(c.allowedAttributes[d]=!0,A4(d,o)&&(c.attrValue=d),n.allow_svg_data_urls&&Se(g,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):Ih(e,d)&&(c.forceKeepAttr=!0)},ED=(e,n,o,r,c,l)=>o!=="html"&&!Ln(r)?!0:!(c in xD&&Di(e,l,r))&&(!e.validate||n.isValid(r,c)||Se(c,"data-")||Se(c,"aria-")),Ih=(e,n)=>e.hasAttribute(Ff)&&(n==="id"||n==="class"||n==="style"),A4=(e,n)=>e in n.getBoolAttrs(),Uo=(e,n,o,r)=>{const{attributes:c}=e;for(let l=c.length-1;l>=0;l--){const d=c[l],g=d.name,p=d.value;!ED(n,o,r,e.tagName.toLowerCase(),g,p)&&!Ih(e,g)?e.removeAttribute(g):A4(g,o)&&e.setAttribute(g,g)}},i$=(e,n,o)=>{const r=If();return r.addHook("uponSanitizeElement",(c,l)=>{_4(c,e,n,o.track(c),l)}),r.addHook("uponSanitizeAttribute",(c,l)=>{MG(c,e,n,o.current(),l)}),r},l$=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},Fh=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};If().sanitize(e,o)},$h=(e,n)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=If();r.addHook("uponSanitizeElement",(c,l)=>{var d;const g=(d=l.tagName)!==null&&d!==void 0?d:c.nodeName.toLowerCase(),p=n.allow_mathml_annotation_encodings;if(g==="annotation"&&Kn(p)&&p.length>0){const y=c.getAttribute("encoding");re(y)&&kt(p,y)&&(l.allowedTags[g]=!0)}}),r.sanitize(e,o)},Hh=e=>n=>{const o=Nd(n);if(o==="svg")Fh(n);else if(o==="math")$h(n,e);else throw new Error("Not a namespace element")},O4=(e,n)=>{const o=Uj();if(e.sanitize){const r=i$(e,n,o);return{sanitizeHtmlElement:(l,d)=>{r.sanitize(l,l$(e,d)),r.removed=[],o.reset()},sanitizeNamespaceElement:Hh(e)}}else return{sanitizeHtmlElement:(l,d)=>{const g=document.createNodeIterator(l,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let p;for(;p=g.nextNode();){const y=o.track(p);_4(p,e,n,y),Ze(p)&&Uo(p,e,n,y)}o.reset()},sanitizeNamespaceElement:nt}},F2=Ee.makeMap,D4=Ee.extend,M4=(e,n,o,r)=>{const c=e.name,l=c in o&&c!=="title"&&c!=="textarea"&&c!=="noscript",d=n.childNodes;for(let g=0,p=d.length;g<p;g++){const y=d[g],E=new sa(y.nodeName.toLowerCase(),y.nodeType);if(Ze(y)){const T=y.attributes;for(let _=0,R=T.length;_<R;_++){const B=T[_];E.attr(B.name,B.value)}Ln(E.name)&&(r(y),E.value=y.innerHTML)}else Te(y)?(E.value=y.data,l&&(E.raw=!0)):(Ts(y)||pa(y)||Pg(y))&&(E.value=y.data);Ln(E.name)||M4(E,y,o,r),e.append(E)}},u$=(e,n,o)=>{const r=[];for(let c=e,l=c;c;l=c,c=c.walk()){const d=c;oe(n,g=>g(d)),dn(d.parent)&&d!==e?c=l:r.push(d)}for(let c=r.length-1;c>=0;c--){const l=r[c];oe(o,d=>d(l))}},d$=(e,n,o,r)=>{const c=o.validate,l=n.getNonEmptyElements(),d=n.getWhitespaceElements(),g=D4(F2("script,style,head,html,body,title,meta,param"),n.getBlockElements()),p=wT(n),y=/[ \t\r\n]+/g,E=/^[ \t\r\n]+/,T=/[ \t\r\n]+$/,_=Q=>{let ee=Q.parent;for(;Ae(ee);){if(ee.name in d)return!0;ee=ee.parent}return!1},R=Q=>{let ee=Q;for(;Ae(ee);){if(ee.name in p)return ns(n,l,d,ee);ee=ee.parent}return!1},B=Q=>Q.name in g||vS(n,Q)||Ln(Q.name)&&Q.parent===e,P=(Q,ee)=>{const ne=ee?Q.prev:Q.next;return Ae(ne)||dn(Q.parent)?!1:B(Q.parent)&&(Q.parent!==e||r.isRootContent===!0)};return[Q=>{var ee;if(Q.type===3&&!_(Q)){let ne=(ee=Q.value)!==null&&ee!==void 0?ee:"";ne=ne.replace(y," "),(uF(Q.prev,B)||P(Q,!0))&&(ne=ne.replace(E,"")),ne.length===0||ne===" "&&Q.prev&&Q.prev.type===Nl&&Q.next&&Q.next.type===Nl?Q.remove():Q.value=ne}},Q=>{var ee;if(Q.type===1){const ne=n.getElementRule(Q.name);if(c&&ne){const ye=ns(n,l,d,Q);ne.paddInEmptyBlock&&ye&&R(Q)?Uw(o,r,B,Q):ne.removeEmpty&&ye?B(Q)?Q.remove():Q.unwrap():ne.paddEmpty&&(ye||nm(Q))&&Uw(o,r,B,Q)}}else if(Q.type===3&&!_(Q)){let ne=(ee=Q.value)!==null&&ee!==void 0?ee:"";(Q.next&&B(Q.next)||P(Q,!1))&&(ne=ne.replace(T,"")),ne.length===0?Q.remove():Q.value=ne}}]},kD=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},Vh=(e={},n=In())=>{const o=nD(),r=nD(),c={validate:!0,root_name:"body",sanitize:!0,...e},l=new DOMParser,d=O4(c,n),g=(ee,ne,ye="html")=>{const Oe=ye==="xhtml"?"application/xhtml+xml":"text/html",je=ht(n.getSpecialElements(),ne.toLowerCase()),he=je?`<${ne}>${ee}</${ne}>`:ee,ue=()=>ye==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${he}</body></html>`:/^[\s]*<head/i.test(ee)||/^[\s]*<html/i.test(ee)||/^[\s]*<!DOCTYPE/i.test(ee)?`<html>${he}</html>`:`<body>${he}</body>`,Ce=l.parseFromString(ue(),Oe).body;return d.sanitizeHtmlElement(Ce,Oe),je?Ce.firstChild:Ce},p=o.addFilter,y=o.getFilters,E=o.removeFilter,T=r.addFilter,_=r.getFilters,R=r.removeFilter,B=(ee,ne)=>{Zw(n,ee)&&ne.push(ee)},P=(ee,ne)=>{const ye=re(ne.attr(Ff)),Oe=ne.type===1&&!ht(ee,ne.name)&&!vS(n,ne)&&!Ln(ne.name);return ne.type===3||Oe&&!ye},I=(ee,ne)=>{const ye=D4(F2("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Oe=/^[ \t\r\n]+/,je=/[ \t\r\n]+$/;let he=ee.firstChild,ue=null;const Ce=qe=>{var ut,At;qe&&(he=qe.firstChild,he&&he.type===3&&(he.value=(ut=he.value)===null||ut===void 0?void 0:ut.replace(Oe,"")),he=qe.lastChild,he&&he.type===3&&(he.value=(At=he.value)===null||At===void 0?void 0:At.replace(je,"")))};if(n.isValidChild(ee.name,ne.toLowerCase())){for(;he;){const qe=he.next;P(ye,he)?(ue||(ue=new sa(ne,1),ue.attr(c.forced_root_block_attrs),ee.insert(ue,he)),ue.append(he)):(Ce(ue),ue=null),he=qe}Ce(ue)}},Q={schema:n,addAttributeFilter:T,getAttributeFilters:_,removeAttributeFilter:R,addNodeFilter:p,getNodeFilters:y,removeNodeFilter:E,parse:(ee,ne={})=>{var ye;const Oe=c.validate,je=(ye=ne.context)!==null&&ye!==void 0?ye:c.root_name,he=g(ee,je,ne.format);bS(n,he);const ue=new sa(je,11);M4(ue,he,n.getSpecialElements(),d.sanitizeNamespaceElement),he.innerHTML="";const[Ce,qe]=d$(ue,n,c,ne),ut=[],At=Oe?Ro=>B(Ro,ut):nt,qt={nodes:{},attributes:{}},_n=Ro=>yO(y(),_(),Ro,qt);if(u$(ue,[Ce,_n],[qe,At]),ut.reverse(),Oe&&ut.length>0)if(ne.context){const{pass:Ro,fail:ar}=Rs(ut,Os=>Os.parent===ue);yn(ar,n,ue,_n),ne.invalid=Ro.length>0}else yn(ut,n,ue,_n);const Pn=kD(c,ne);return Pn&&(ue.name==="body"||ne.isRootContent)&&I(ue,Pn),ne.invalid||Vw(qt,ne),ue}};return Nh(Q,c),Ku(Q,c,n),Q},m$=e=>sm(e)?Gd({validate:!1}).serialize(e):e,TD=(e,n,o)=>{const r=m$(e),c=n(r);if(c.isDefaultPrevented())return c;if(sm(e))if(c.content!==r){const l=Vh({validate:!1,forced_root_block:!1,...o}).parse(c.content,{context:e.name});return{...c,content:l}}else return{...c,content:e};else return c},_D=e=>({sanitize:n1(e),sandbox_iframes:H_(e),sandbox_iframes_exclusions:fx(e)}),AD=(e,n)=>{if(n.no_events)return fs.value(n);{const o=GS(e,n);return o.isDefaultPrevented()?fs.error(sv(e,{content:"",...o}).content):fs.value(o)}},R4=(e,n,o)=>o.no_events?n:TD(n,c=>sv(e,{...o,content:c}),_D(e)).content,N4=(e,n)=>{if(n.no_events)return fs.value(n);{const o=TD(n.content,r=>y_(e,{...n,content:r}),_D(e));return o.isDefaultPrevented()?(jS(e,o),fs.error(void 0)):fs.value(o)}},$f=(e,n,o)=>{o.no_events||jS(e,{...o,content:n})},$2=(e,n,o)=>({element:e,width:n,rows:o}),OD=(e,n)=>({element:e,cells:n}),DD=(e,n)=>({x:e,y:n}),MD=(e,n)=>Ji(e,n).bind(fd).getOr(1),RD=(e,n,o,r,c)=>{const l=MD(c,"rowspan"),d=MD(c,"colspan"),g=e.rows;for(let p=o;p<o+l;p++){g[p]||(g[p]=OD(Zb(r),[]));for(let y=n;y<n+d;y++){const E=g[p].cells;E[y]=p===o&&y===n?c:Fd(c)}}},f$=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},g$=(e,n,o)=>{for(;f$(e,n,o);)n++;return n},P4=e=>cs(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),B4=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let l=0;l<c.length;l++)if(xn(c[l],n))return D.some(DD(l,r))}return D.none()},L4=(e,n,o,r,c)=>{const l=[],d=e.rows;for(let g=o;g<=c;g++){const p=d[g].cells,y=n<r?p.slice(n,r+1):p.slice(r,n+1);l.push(OD(d[g].element,y))}return l},ND=(e,n,o)=>{const r=n.x,c=n.y,l=o.x,d=o.y,g=c<d?L4(e,r,c,l,d):L4(e,r,d,l,c);return $2(e.element,P4(g),g)},PD=(e,n)=>{const o=Fd(e.element),r=U.fromTag("tbody");return Fl(r,n),qo(o,r),o},BD=e=>Dt(e.rows,n=>{const o=Dt(n.cells,c=>{const l=Zb(c);return Eo(l,"colspan"),Eo(l,"rowspan"),l}),r=Fd(n.element);return Fl(r,o),r}),h$=e=>{const n=$2(Fd(e),0,[]);return oe($r(e,"tr"),(o,r)=>{oe($r(o,"td,th"),(c,l)=>{RD(n,g$(n,l,r),r,o,c)})}),$2(n.element,P4(n.rows),n.rows)},p$=e=>PD(e,BD(e)),b$=(e,n,o)=>B4(e,n).bind(r=>B4(e,o).map(c=>ND(e,r,c))),I4=e=>ro(e,n=>Ft(n)==="ul"||Ft(n)==="ol"),s0=(e,n)=>ro(e,o=>Ft(o)==="li"&&Ax(o,n)).fold(Ie([]),o=>I4(e).map(r=>{const c=U.fromTag(Ft(r)),l=Qa(Pp(r),(d,g)=>Se(g,"list-style"));return jt(c,l),[U.fromTag("li"),c]}).getOr([])),LD=(e,n)=>{const o=cs(n,(r,c)=>(qo(c,r),c),e);return n.length>0?Qx([o]):o},ID=e=>of(e)?Fr(e).filter(AS).fold(Ie([]),n=>[e,n]):AS(e)?[e]:[],H2=(e,n,o)=>{const r=U.fromDom(n.commonAncestorContainer),c=Gu(r,e),l=vt(c,p=>o.isWrapper(Ft(p))),d=s0(c,n),g=l.concat(d.length?d:ID(r));return Dt(g,Fd)},FD=()=>Qx([]),v$=(e,n,o)=>LD(U.fromDom(n.cloneContents()),H2(e,n,o)),Hf=(e,n)=>Fm(n,"table",Ye(xn,e)),F4=(e,n)=>Hf(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],l=h$(o);return b$(l,r,c).map(d=>Qx([p$(d)]))}).getOrThunk(FD),$D=(e,n,o)=>n.length>0&&n[0].collapsed?FD():v$(e,n[0],o),r0=(e,n,o)=>{const r=gA(n,e);return r.length>0?F4(e,r):$D(e,n,o)},a0=(e,n)=>n>=0&&n<e.length&&zu(e.charAt(n)),V2=e=>ic(e.innerText),HD=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),VD=e=>D.from(e.selection.getRng()).map(n=>{var o;const r=D.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),l=HD(r),d=U.fromDom(n.cloneContents());E5(d),k5(d);const g=e.dom.add(c,l,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},d.dom),p=V2(g),y=ic((o=g.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(g),a0(y,0)||a0(y,y.length-1)){const E=r.getOr(c),T=V2(E),_=T.indexOf(p);if(_===-1)return p;{const R=a0(T,_-1),B=a0(T,_+p.length);return(R?" ":"")+p+(B?" ":"")}}else return p}).getOr(""),y$=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),l=Uv(e,fA(c)),d=n.contextual?r0(U.fromDom(e.getBody()),l,e.schema).dom:o.cloneContents();return d&&r.appendChild(d),e.selection.serializer.serialize(r,n)},C$=(e,n)=>{if(n.format==="text")return VD(e);{const o=y$(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},S$=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),$4=(e,n,o={})=>{const r=S$(o,n);return AD(e,r).fold(Yn,c=>{const l=C$(e,c);return R4(e,l,c)})},H4=0,V4=1,zD=2,x$=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),l=(E,T,_)=>({start:E,end:T,diag:_}),d=(E,T,_,R,B)=>{const P=p(E,T,_,R);if(P===null||P.start===T&&P.diag===T-R||P.end===E&&P.diag===E-_){let I=E,Z=_;for(;I<T||Z<R;)I<T&&Z<R&&e[I]===n[Z]?(B.push([H4,e[I]]),++I,++Z):T-E>R-_?(B.push([zD,e[I]]),++I):(B.push([V4,n[Z]]),++Z)}else{d(E,P.start,_,P.start-P.diag,B);for(let I=P.start;I<P.end;++I)B.push([H4,e[I]]);d(P.end,T,P.end-P.diag,R,B)}},g=(E,T,_,R)=>{let B=E;for(;B-T<R&&B<_&&e[B]===n[B-T];)++B;return l(E,B,T)},p=(E,T,_,R)=>{const B=T-E,P=R-_;if(B===0||P===0)return null;const I=B-P,Z=P+B,Q=(Z%2===0?Z:Z+1)/2;r[1+Q]=E,c[1+Q]=T+1;let ee,ne,ye,Oe,je;for(ee=0;ee<=Q;++ee){for(ne=-ee;ne<=ee;ne+=2){for(ye=ne+Q,ne===-ee||ne!==ee&&r[ye-1]<r[ye+1]?r[ye]=r[ye+1]:r[ye]=r[ye-1]+1,Oe=r[ye],je=Oe-E+_-ne;Oe<T&&je<R&&e[Oe]===n[je];)r[ye]=++Oe,++je;if(I%2!==0&&I-ee<=ne&&ne<=I+ee&&c[ye-I]<=r[ye])return g(c[ye-I],ne+E-_,T,R)}for(ne=I-ee;ne<=I+ee;ne+=2){for(ye=ne+Q-I,ne===I-ee||ne!==I+ee&&c[ye+1]<=c[ye-1]?c[ye]=c[ye+1]-1:c[ye]=c[ye-1],Oe=c[ye]-1,je=Oe-E+_-ne;Oe>=E&&je>=_&&e[Oe]===n[je];)c[ye]=Oe--,je--;if(I%2===0&&-ee<=ne&&ne<=ee&&c[ye]<=r[ye+I])return g(c[ye],ne+E-_,T,R)}}return null},y=[];return d(0,e.length,0,n.length,y),y},UD=e=>Ze(e)?e.outerHTML:Te(e)?Gm.encodeRaw(e.data,!1):Ts(e)?"<!--"+e.data+"-->":"",w$=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},E$=(e,n,o)=>{const r=w$(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},k$=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},T$=(e,n)=>{let o=0;oe(e,r=>{r[0]===H4?o++:r[0]===V4?(E$(n,r[1],o),o++):r[0]===zD&&k$(n,o)})},_$=(e,n)=>vt(Dt(Rn(e.childNodes),S(ic,UD)),o=>o.length>0),A$=(e,n)=>{const o=Dt(Rn(n.childNodes),UD);return T$(x$(o,e),n),n},O$=Ys(()=>document.implementation.createHTMLDocument("undo")),D$=e=>e.querySelector("iframe")!==null,ZD=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),M$=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Vf=e=>{const n=e.serializer.getTempAttrs(),o=w5(e.getBody(),n);return D$(o)?ZD(_$(o)):M$(ic(o.innerHTML))},vr=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?A$(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Ae(r)&&iA(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},z4=e=>e.type==="fragmented"?e.fragments.join(""):e.content,c0=e=>{const n=U.fromTag("body",O$());return Dd(n,z4(e)),oe($r(n,"*[data-mce-bogus]"),$l),Co(n)},zf=(e,n)=>z4(e)===z4(n),WD=(e,n)=>c0(e)===c0(n),ra=(e,n)=>!e||!n?!1:zf(e,n)?!0:WD(e,n),Yu=e=>e.get()===0,i0=(e,n,o)=>{Yu(o)&&(e.typing=n)},jD=(e,n)=>{e.typing&&(i0(e,!1,n),e.add())},GD=e=>{e.typing&&(e.typing=!1,e.add())},R$=(e,n,o)=>{Yu(n)&&o.set(nv(e.selection))},qD=(e,n,o,r,c,l,d)=>{const g=Vf(e),p=Ee.extend(l||{},g);if(!Yu(r)||e.removed)return null;const y=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:p,lastLevel:y,originalEvent:d}).isDefaultPrevented()||y&&ra(y,p))return null;n.data[o.get()]&&c.get().each(_=>{n.data[o.get()].beforeBookmark=_});const E=D_(e);if(E&&n.data.length>E){for(let _=0;_<n.data.length-1;_++)n.data[_]=n.data[_+1];n.data.length--,o.set(n.data.length)}p.bookmark=nv(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(p),o.set(n.data.length-1);const T={level:p,lastLevel:y,originalEvent:d};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",T),e.dispatch("change",T)):e.dispatch("AddUndo",T),p},l0=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},U4=(e,n,o,r,c)=>{if(n.transact(r)){const l=n.data[o.get()].bookmark,d=n.data[o.get()-1];vr(e,d,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=l)}},N$=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],vr(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},KD=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,i0(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],vr(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},P$=e=>{e.clear(),e.add()},Z4=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!ra(Vf(e),n.data[0]),W4=(e,n)=>n.get()<e.data.length-1&&!e.typing,B$=(e,n,o)=>(jD(e,n),e.beforeChange(),e.ignore(o),e.add()),L$=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},YD=(e,n)=>{const o=e.dom,r=Ae(n)?n:e.getBody();oe(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const l=lx(e),d=o.getAttrib(c,"border");(!d||d==="0")&&e.hasVisual?o.addClass(c,l):o.removeClass(c,l);break;case"A":if(!o.getAttrib(c,"href")){const g=o.getAttrib(c,"name")||c.id,p=R_(e);g&&e.hasVisual?o.addClass(c,p):o.removeClass(c,p)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},Mi=e=>({init:{bindEvents:nt},undoManager:{beforeChange:(n,o)=>R$(e,n,o),add:(n,o,r,c,l,d)=>qD(e,n,o,r,c,l,d),undo:(n,o,r)=>KD(e,n,o,r),redo:(n,o)=>N$(e,n,o),clear:(n,o)=>l0(e,n,o),reset:n=>P$(n),hasUndo:(n,o)=>Z4(e,n,o),hasRedo:(n,o)=>W4(n,o),transact:(n,o,r)=>B$(n,o,r),ignore:(n,o)=>L$(n,o),extra:(n,o,r,c)=>U4(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>j1(e,n,o,r,c),matchAll:(n,o)=>_O(e,n,o),matchNode:(n,o,r,c)=>gl(e,n,o,r,c),canApply:n=>xF(e,n),closest:n=>b2(e,n),apply:(n,o,r)=>i4(e,n,o,r),remove:(n,o,r,c)=>YO(e,n,o,r,c),toggle:(n,o,r)=>R2(e,n,o,r),formatChanged:(n,o,r,c,l)=>UF(e,n,o,r,c,l)},editor:{getContent:n=>A5(e,n),setContent:(n,o)=>Mf(e,n,o),insertContent:(n,o)=>$a(e,n,o),addVisual:n=>YD(e,n)},selection:{getContent:(n,o)=>$4(e,n,o)},autocompleter:{addDecoration:nt,removeDecoration:nt},raw:{getModel:()=>D.none()}}),j4=e=>{const n=y=>Ot(y)?y:{},{init:o,undoManager:r,formatter:c,editor:l,selection:d,autocompleter:g,raw:p}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(y,E,T)=>r.transact(T),ignore:(y,E)=>r.ignore(E),extra:(y,E,T,_)=>r.extra(T,_)},formatter:{match:(y,E,T,_)=>c.match(y,n(E),_),matchAll:c.matchAll,matchNode:c.matchNode,canApply:y=>c.canApply(y),closest:y=>c.closest(y),apply:(y,E,T)=>c.apply(y,n(E)),remove:(y,E,T,_)=>c.remove(y,n(E)),toggle:(y,E,T)=>c.toggle(y,n(E)),formatChanged:(y,E,T,_,R)=>c.formatChanged(E,T,_,R)},editor:{getContent:y=>l.getContent(y),setContent:(y,E)=>({content:l.setContent(y,E),html:""}),insertContent:(y,E)=>(l.insertContent(y),""),addVisual:l.addVisual},selection:{getContent:(y,E)=>d.getContent(E)},autocompleter:{addDecoration:g.addDecoration,removeDecoration:g.removeDecoration},raw:{getModel:()=>D.some(p.getRawModel())}}},I$=()=>{const e=Ie(null),n=Ie("");return{init:{bindEvents:nt},undoManager:{beforeChange:nt,add:e,undo:e,redo:e,clear:nt,reset:nt,hasUndo:we,hasRedo:we,transact:e,ignore:nt,extra:nt},formatter:{match:we,matchAll:Ie([]),matchNode:Ie(void 0),canApply:we,closest:n,apply:nt,remove:nt,toggle:nt,formatChanged:Ie({unbind:nt})},editor:{getContent:n,setContent:Ie({content:"",html:""}),insertContent:Ie(""),addVisual:nt},selection:{getContent:n},autocompleter:{addDecoration:nt,removeDecoration:nt},raw:{getModel:Ie(D.none())}}},qc=e=>ht(e.plugins,"rtc"),G4=e=>Bn(e.plugins,"rtc").bind(n=>D.from(n.setup)),XD=e=>{const n=e;return G4(e).fold(()=>(n.rtcInstance=Mi(e),D.none()),o=>(n.rtcInstance=I$(),D.some(()=>o().then(r=>(n.rtcInstance=j4(r),r.rtc.isRemote)))))},z2=e=>e.rtcInstance?e.rtcInstance:Mi(e),vs=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},F$=(e,n,o)=>{vs(e).undoManager.beforeChange(n,o)},$$=(e,n,o,r,c,l,d)=>vs(e).undoManager.add(n,o,r,c,l,d),H$=(e,n,o,r)=>vs(e).undoManager.undo(n,o,r),V$=(e,n,o)=>vs(e).undoManager.redo(n,o),z$=(e,n,o)=>{vs(e).undoManager.clear(n,o)},JD=(e,n)=>{vs(e).undoManager.reset(n)},U$=(e,n,o)=>vs(e).undoManager.hasUndo(n,o),Z$=(e,n,o)=>vs(e).undoManager.hasRedo(n,o),W$=(e,n,o,r)=>vs(e).undoManager.transact(n,o,r),QD=(e,n,o)=>{vs(e).undoManager.ignore(n,o)},q4=(e,n,o,r,c)=>{vs(e).undoManager.extra(n,o,r,c)},K4=(e,n,o,r,c)=>vs(e).formatter.match(n,o,r,c),eM=(e,n,o)=>vs(e).formatter.matchAll(n,o),Y4=(e,n,o,r,c)=>vs(e).formatter.matchNode(n,o,r,c),tM=(e,n)=>vs(e).formatter.canApply(n),nM=(e,n)=>vs(e).formatter.closest(n),X4=(e,n,o,r)=>{vs(e).formatter.apply(n,o,r)},oM=(e,n,o,r,c)=>{vs(e).formatter.remove(n,o,r,c)},sM=(e,n,o,r)=>{vs(e).formatter.toggle(n,o,r)},rM=(e,n,o,r,c,l)=>vs(e).formatter.formatChanged(n,o,r,c,l),j$=(e,n)=>z2(e).editor.getContent(n),J4=(e,n,o)=>z2(e).editor.setContent(n,o),G$=(e,n,o)=>z2(e).editor.insertContent(n,o),U2=(e,n,o)=>vs(e).selection.getContent(n,o),q$=(e,n)=>vs(e).editor.addVisual(n),aM=e=>vs(e).init.bindEvents(),K$=(e,n={})=>{const o=n.format?n.format:"html";return U2(e,o,n)},Q4=e=>e.dom.length===0?(Xn(e),D.none()):D.some(e),cM=(e,n)=>e.filter(o=>wi.isBookmarkNode(o.dom)).bind(n?Lm:Ll),Y$=(e,n,o,r,c)=>{const l=e.dom,d=n.dom,g=r?l.length:d.length;r?(yw(l,d,c,!1,!r),o.setStart(d,g)):(yw(d,l,c,!1,!r),o.setEnd(d,g))},X$=(e,n,o)=>{Fr(e).each(r=>{const c=e.dom;n&&M1(r,fe(c,0),o)?Yv(c,0,o):!n&&wh(r,fe(c,c.length),o)&&vw(c,c.length,o)})},iM=(e,n,o,r,c)=>{e.bind(l=>((r?vw:Yv)(l.dom,r?l.dom.length:0,c),n.filter(Ir).map(g=>Y$(l,g,o,r,c)))).orThunk(()=>cM(n,r).or(n).filter(Ir).map(d=>X$(d,r,c)))},J$=(e,n,o)=>{const r=D.from(n.firstChild).map(U.fromDom),c=D.from(n.lastChild).map(U.fromDom);e.deleteContents(),e.insertNode(n);const l=r.bind(Ll).filter(Ir).bind(Q4),d=c.bind(Lm).filter(Ir).bind(Q4);iM(l,r,e,!0,o),iM(d,c,e,!1,o),e.collapse(!1)},Q$=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),lM=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},l=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return Gd({validate:!1},e.schema).serialize(l)}else return n.content},RG=(e,n,o={})=>{const r=Q$(o,n);N4(e,r).each(c=>{const l=lM(e,c),d=e.selection.getRng();J$(d,d.createContextualFragment(l),e.schema),e.selection.setRng(d),Ch(e,d),$f(e,l,c)})},uM=(e,n,o)=>{if(ht(e,n)){const r=vt(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var eH=(e,n)=>{let o,r;const c=(g,p)=>ro(p,y=>e.is(y,g)),l=g=>e.getParents(g,void 0,e.getRoot()),d=()=>{o={},r={},n.on("NodeChange",g=>{const p=g.element,y=l(p),E={};He(o,(T,_)=>{c(_,y).each(R=>{r[_]||(oe(T,B=>{B(!0,{node:R,selector:_,parents:y})}),r[_]=T),E[_]=T})}),He(r,(T,_)=>{E[_]||(delete r[_],oe(T,R=>{R(!1,{node:p,selector:_,parents:y})}))})})};return{selectorChangedWithUnbind:(g,p)=>(o||d(),o[g]||(o[g]=[]),o[g].push(p),c(g,l(n.selection.getStart())).each(()=>{r[g]=o[g]}),{unbind:()=>{uM(o,g,p),uM(r,g,p)}})}};const dM=e=>!!(e&&e.ownerDocument)&&$o(U.fromDom(e.ownerDocument),U.fromDom(e)),tH=e=>e?dM(e.startContainer)&&dM(e.endContainer):!1,mM=(e,n,o,r)=>{let c,l;const{selectorChangedWithUnbind:d}=eH(e,r),g=(Pe,lt)=>{const mn=e.createRng();Ae(Pe)&&Ae(lt)?(mn.setStart(Pe,lt),mn.setEnd(Pe,lt),ne(mn),Z(!1)):(Ox(e,mn,r.getBody(),!0),ne(mn))},p=Pe=>K$(r,Pe),y=(Pe,lt)=>RG(r,Pe,lt),E=Pe=>u5(r.getBody(),ee(),Pe),T=Pe=>d5(r.getBody(),ee(),Pe),_=(Pe,lt)=>ar.getBookmark(Pe,lt),R=Pe=>ar.moveToBookmark(Pe),B=(Pe,lt)=>(g5(e,Pe,lt).each(ne),Pe),P=()=>{const Pe=ee(),lt=Q();return!Pe||Pe.item?!1:Pe.compareEndPoints?Pe.compareEndPoints("StartToEnd",Pe)===0:!lt||Pe.collapsed},I=()=>{if(r.mode.isReadOnly())return!1;const Pe=ee(),lt=r.getBody().querySelectorAll('[data-mce-selected="1"]');return lt.length>0?_o(lt,mn=>e.isEditable(mn.parentElement)):i5(e,Pe)},Z=Pe=>{const lt=ee();lt.collapse(!!Pe),ne(lt)},Q=()=>n.getSelection?n.getSelection():n.document.selection,ee=()=>{let Pe;const lt=(ze,yt,St)=>{try{return yt.compareBoundaryPoints(ze,St)}catch{return-1}},mn=n.document;if(Ae(r.bookmark)&&!br(r)){const ze=RA(r);if(ze.isSome())return ze.map(yt=>Uv(r,[yt])[0]).getOr(mn.createRange())}try{const ze=Q();ze&&!Vm(ze.anchorNode)&&(ze.rangeCount>0?Pe=ze.getRangeAt(0):Pe=mn.createRange(),Pe=Uv(r,[Pe])[0])}catch{}if(Pe||(Pe=mn.createRange()),Bg(Pe.startContainer)&&Pe.collapsed){const ze=e.getRoot();Pe.setStart(ze,0),Pe.setEnd(ze,0)}return c&&l&&(lt(Pe.START_TO_START,Pe,c)===0&&lt(Pe.END_TO_END,Pe,c)===0?Pe=l:(c=null,l=null)),Pe},ne=(Pe,lt)=>{if(!tH(Pe))return;const mn=Q();if(Pe=r.dispatch("SetSelectionRange",{range:Pe,forward:lt}).range,mn){l=Pe;try{mn.removeAllRanges(),mn.addRange(Pe)}catch{}lt===!1&&mn.extend&&(mn.collapse(Pe.endContainer,Pe.endOffset),mn.extend(Pe.startContainer,Pe.startOffset)),c=mn.rangeCount>0?mn.getRangeAt(0):null}if(!Pe.collapsed&&Pe.startContainer===Pe.endContainer&&(mn!=null&&mn.setBaseAndExtent)&&Pe.endOffset-Pe.startOffset<2&&Pe.startContainer.hasChildNodes()){const yt=Pe.startContainer.childNodes[Pe.startOffset];yt&&yt.nodeName==="IMG"&&(mn.setBaseAndExtent(Pe.startContainer,Pe.startOffset,Pe.endContainer,Pe.endOffset),(mn.anchorNode!==Pe.startContainer||mn.focusNode!==Pe.endContainer)&&mn.setBaseAndExtent(yt,0,yt,1))}r.dispatch("AfterSetSelectionRange",{range:Pe,forward:lt})},ye=Pe=>(y(e.getOuterHTML(Pe)),Pe),Oe=()=>m5(r.getBody(),ee()),je=(Pe,lt)=>f5(e,ee(),Pe,lt),he=()=>{const Pe=Q(),lt=Pe==null?void 0:Pe.anchorNode,mn=Pe==null?void 0:Pe.focusNode;if(!Pe||!lt||!mn||Vm(lt)||Vm(mn))return!0;const ze=e.createRng(),yt=e.createRng();try{ze.setStart(lt,Pe.anchorOffset),ze.collapse(!0),yt.setStart(mn,Pe.focusOffset),yt.collapse(!0)}catch{return!0}return ze.compareBoundaryPoints(ze.START_TO_START,yt)<=0},Ro={dom:e,win:n,serializer:o,editor:r,expand:(Pe={type:"word"})=>ne(jd(e).expand(ee(),Pe)),collapse:Z,setCursorLocation:g,getContent:p,setContent:y,getBookmark:_,moveToBookmark:R,select:B,isCollapsed:P,isEditable:I,isForward:he,setNode:ye,getNode:Oe,getSel:Q,setRng:ne,getRng:ee,getStart:E,getEnd:T,getSelectedBlocks:je,normalize:()=>{const Pe=ee(),lt=Q();if(!iG(lt)&&Tv(r)){const mn=T1(e,Pe);return mn.each(ze=>{ne(ze,he())}),mn.getOr(Pe)}return Pe},selectorChanged:(Pe,lt)=>(d(Pe,lt),Ro),selectorChangedWithUnbind:d,getScrollContainer:()=>{let Pe,lt=e.getRoot();for(;lt&&lt.nodeName!=="BODY";){if(lt.scrollHeight>lt.clientHeight){Pe=lt;break}lt=lt.parentNode}return Pe},scrollIntoView:(Pe,lt)=>{Ae(Pe)?c5(r,Pe,lt):Ch(r,ee(),lt)},placeCaretAt:(Pe,lt)=>ne(iI(Pe,lt,r.getDoc())),getBoundingClientRect:()=>{const Pe=ee();return Pe.collapsed?fe.fromRangeStart(Pe).getClientRects()[0]:Pe.getBoundingClientRect()},destroy:()=>{n=c=l=null,Os.destroy()}},ar=wi(Ro),Os=HA(Ro,r);return Ro.bookmarkManager=ar,Ro.controlSelection=Os,Ro},nH=(e,n,o)=>{n.addNodeFilter("br",(r,c,l)=>{const d=Ee.extend({},o.getBlockElements()),g=o.getNonEmptyElements(),p=o.getWhitespaceElements();d.body=1;const y=E=>E.name in d||vS(o,E);for(let E=0,T=r.length;E<T;E++){let _=r[E],R=_.parent;if(R&&y(R)&&_===R.lastChild){let B=_.prev;for(;B;){const P=B.name;if(P!=="span"||B.attr("data-mce-type")!=="bookmark"){P==="br"&&(_=null);break}B=B.prev}if(_&&(_.remove(),ns(o,g,p,R))){const P=o.getElementRule(R.name);P&&(P.removeEmpty?R.remove():P.paddEmpty&&Uw(e,l,y,R))}}else{let B=_;for(;R&&R.firstChild===B&&R.lastChild===B&&(B=R,!d[R.name]);)R=R.parent;if(B===R){const P=new sa("#text",3);P.value=ks,_.replace(P)}}}})},oH=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let l=r.length;for(;l--;){const d=r[l];d.attr("tabindex",d.attr("data-mce-tabindex")),d.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const l="data-mce-"+c,d=n.url_converter,g=n.url_converter_scope;let p=r.length;for(;p--;){const y=r[p];let E=y.attr(l);E!==void 0?(y.attr(c,E.length>0?E:null),y.attr(l,null)):(E=y.attr(c),c==="style"?E=o.serializeStyle(o.parseStyle(E),y.name):d&&(E=d.call(g,E,c,y.name)),y.attr(c,E.length>0?E:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const l=r[c];let d=l.attr("class");d&&(d=d.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),l.attr("class",d.length>0?d:null))}}),e.addAttributeFilter("data-mce-type",(r,c,l)=>{let d=r.length;for(;d--;){const g=r[d];g.attr("data-mce-type")==="bookmark"&&!l.cleanup&&(D.from(g.firstChild).exists(y=>{var E;return!jb((E=y.value)!==null&&E!==void 0?E:"")})?g.unwrap():g.remove())}}),e.addNodeFilter("script,style",(r,c)=>{var l;const d=p=>p.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=r.length;for(;g--;){const p=r[g],y=p.firstChild,E=(l=y==null?void 0:y.value)!==null&&l!==void 0?l:"";if(c==="script"){const T=p.attr("type");T&&p.attr("type",T==="mce-no/type"?null:T.replace(/^mce\-/,"")),n.element_format==="xhtml"&&y&&E.length>0&&(y.value=`// <![CDATA[
`+d(E)+`
// ]]>`)}else n.element_format==="xhtml"&&y&&E.length>0&&(y.value=`<!--
`+d(E)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const l=r[c],d=l.value;n.preserve_cdata&&(d==null?void 0:d.indexOf("[CDATA["))===0?(l.name="#cdata",l.type=4,l.value=o.decode(d.replace(/^\[CDATA\[|\]\]$/g,""))):(d==null?void 0:d.indexOf("mce:protected "))===0&&(l.name="#text",l.type=3,l.raw=!0,l.value=unescape(d).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let l=r.length;for(;l--;){const d=r[l];d.type===7?d.remove():d.type===1&&c==="input"&&!d.attr("type")&&d.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{oe(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let l=r.length;for(;l--;)r[l].attr(c,null)}),n.remove_trailing_brs&&nH(n,e,e.schema)},fM=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},sH=(e,n,o)=>{let r;const c=e.dom;let l=n.cloneNode(!0);const d=document.implementation;if(d.createHTMLDocument){const g=d.createHTMLDocument("");Ee.each(l.nodeName==="BODY"?l.childNodes:[l],p=>{g.body.appendChild(g.importNode(p,!0))}),l.nodeName!=="BODY"?l=g.body.firstChild:l=g.body,r=c.doc,c.doc=g}return mB(e,{...o,node:l}),r&&(c.doc=r),l},rH=(e,n)=>Ae(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,aH=(e,n,o)=>rH(e,o)?sH(e,n,o):n,cH=(e,n,o)=>{Ee.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let l=r.length;for(;l--;)r[l].attr(c,null)}),n.push(o))},iH=(e,n,o)=>!n.no_events&&e?ov(e,{...n,content:o}).content:o,NG=(e,n,o)=>{const r=ic(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||Wb(U.fromDom(n))?r:Ee.trim(r)},PG=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return fM(c),c},lH=(e,n,o)=>Gd(e,n).serialize(o),uH=(e,n,o,r,c)=>{const l=lH(n,o,r);return iH(e,c,l)},BG=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},c=n&&n.dom?n.dom:Jn.DOM,l=n&&n.schema?n.schema:In(r),d=Vh(r,l);oH(d,r,c);const g=(p,y={})=>{const E={format:"html",...y},T=aH(n,p,E),_=NG(c,T,E),R=PG(d,_,E);return E.format==="tree"?R:uH(n,r,l,R,E)};return{schema:l,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,serialize:g,addRules:l.addValidElements,setRules:l.setValidElements,addTempAttr:Ye(cH,d,o),getTempAttrs:Ie(o),getNodeFilters:d.getNodeFilters,getAttributeFilters:d.getAttributeFilters,removeNodeFilter:d.removeNodeFilter,removeAttributeFilter:d.removeAttributeFilter}},gM=(e,n)=>{const o=BG(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},Mo="html",e3=(e,n)=>({...e,format:n,get:!0,getInner:!0}),LG=(e,n={})=>{const o=n.format?n.format:Mo,r=e3(n,o);return AD(e,r).fold(Yn,c=>{const l=j$(e,c);return R4(e,l,c)})},dH="html",mH=(e,n)=>({format:dH,...e,set:!0,content:n}),im=(e,n,o={})=>{const r=mH(o,n);return N4(e,r).map(c=>{const l=J4(e,c.content,c);return $f(e,l.html,c),l.content}).getOr(n)},IG="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),FG=[],yr="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),t3=[],n3=(e,n)=>{const o=vt(n,r=>ht(e,r));return Zn(o)},hM=e=>{const n=n3(e,IG),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Zn(n)},fH=e=>n3(e,FG),pM=(e,n)=>{const o=Ee.makeMap(e.plugins," "),c=vt(n,l=>ht(o,l));return Zn(c)},Z2=e=>pM(e,yr),gH=e=>pM(e,t3.map(n=>n.name)),o3=(e,n)=>{const o=hM(e),r=Z2(n),c=r.length>0,l=o.length>0,d=n.theme==="mobile";if(c||l||d){const g=`
- `,p=d?`

Themes:${g}mobile`:"",y=c?`

Plugins:${g}${r.join(g)}`:"",E=l?`

Options:${g}${o.join(g)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+p+y+E)}},hH=e=>ro(t3,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),bM=(e,n)=>{const o=fH(e),r=gH(n),c=r.length>0,l=o.length>0;if(c||l){const d=`
- `,g=c?`

Plugins:${d}${r.map(hH).join(d)}`:"",p=l?`

Options:${d}${o.join(d)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+g+p)}},vM=(e,n)=>{o3(e,n),bM(e,n)},zh=Jn.DOM,yM=e=>{zh.setStyle(e.id,"display",e.orgDisplay)},Uh=e=>D.from(e).each(n=>n.destroy()),pH=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},bH=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),zh.unbind(n,"submit reset",e.formEventDelegate))},vH=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Ae(c==null?void 0:c.nextSibling)&&zh.remove(c.nextSibling),zS(e),e.editorManager.remove(e),!e.inline&&r&&yM(e),US(e),zh.remove(e.getContainer()),Uh(n),Uh(o),e.destroy()}},vc=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Uh(o),Uh(r)),bH(e),pH(e),e.destroyed=!0}},W2=(()=>{const e={};return{add:(c,l)=>{e[c]=l},get:c=>e[c]?e[c]:{icons:{}},has:c=>ht(e,c)}})(),Zh=Ur.ModelManager,CM=(e,n)=>n.dom[e],SM=(e,n)=>parseInt(ts(n,e),10),xM=Ye(CM,"clientWidth"),yH=Ye(CM,"clientHeight"),CH=Ye(SM,"margin-top"),SH=Ye(SM,"margin-left"),j2=e=>e.dom.getBoundingClientRect(),xH=(e,n,o)=>{const r=xM(e),c=yH(e);return n>=0&&o>=0&&n<=r&&o<=c},wH=(e,n,o,r)=>{const c=j2(n),l=e?c.left+n.dom.clientLeft+SH(n):0,d=e?c.top+n.dom.clientTop+CH(n):0,g=o-l,p=r-d;return{x:g,y:p}},wM=(e,n,o)=>{const r=U.fromDom(e.getBody()),c=e.inline?r:ub(r),l=wH(e.inline,c,n,o);return xH(c,l.x,l.y)},s3=e=>D.from(e).map(U.fromDom),EH=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return s3(n).map(el).getOr(!1)};var kH=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const TH=e=>{const n=[],o=()=>{const _=e.theme;return _&&_.getNotificationManagerImpl?_.getNotificationManagerImpl():kH()},r=()=>D.from(n[0]),c=(_,R)=>_.type===R.type&&_.text===R.text&&!_.progressBar&&!_.timeout&&!R.progressBar&&!R.timeout,l=()=>{r().each(_=>{_.reposition()})},d=_=>{n.push(_)},g=_=>{Ns(n,R=>R===_).each(R=>{n.splice(R,1)})},p=(_,R=!0)=>e.removed||!EH(e)?{}:(R&&e.dispatch("BeforeOpenNotification",{notification:_}),ro(n,B=>c(o().getArgs(B),_)).getOrThunk(()=>{e.editorManager.setActive(e);const B=o().open(_,()=>{g(B)},()=>ph(e));return d(B),l(),e.dispatch("OpenNotification",{notification:{...B}}),B})),y=()=>{r().each(_=>{o().close(_),g(_),l()})},E=Ie(n);return(_=>{_.on("SkinLoaded",()=>{const R=cv(_);R&&p({text:R,type:"warning",timeout:0},!1),l()}),_.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(l)}),_.on("remove",()=>{oe(n.slice(),R=>{o().close(R)})}),_.on("keydown",R=>{var B;const P=((B=R.key)===null||B===void 0?void 0:B.toLowerCase())==="f12"||R.keyCode===123;R.altKey&&P&&(R.preventDefault(),r().map(I=>U.fromDom(I.getEl())).each(I=>Ux(I)))})})(e),{open:p,close:y,getNotifications:E}},Wh=Ur.PluginManager,hl=Ur.ThemeManager;var EM=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const r3=e=>{let n=[];const o=()=>{const P=e.theme;return P&&P.getWindowManagerImpl?P.getWindowManagerImpl():EM()},r=(P,I)=>(...Z)=>I?I.apply(P,Z):void 0,c=P=>{e.dispatch("OpenWindow",{dialog:P})},l=P=>{e.dispatch("CloseWindow",{dialog:P})},d=P=>{n.push(P),c(P)},g=P=>{l(P),n=vt(n,I=>I!==P),n.length===0&&e.focus()},p=()=>D.from(n[n.length-1]),y=P=>{e.editorManager.setActive(e),C1(e),e.ui.show();const I=P();return d(I),I},E=(P,I)=>y(()=>o().open(P,I,g)),T=P=>y(()=>o().openUrl(P,g)),_=(P,I,Z)=>{const Q=o();Q.alert(P,r(Z||Q,I))},R=(P,I,Z)=>{const Q=o();Q.confirm(P,r(Z||Q,I))},B=()=>{p().each(P=>{o().close(P),g(P)})};return e.on("remove",()=>{oe(n,P=>{o().close(P)})}),{open:E,openUrl:T,alert:_,confirm:R,close:B}},kM=(e,n)=>{e.notificationManager.open({type:"error",text:n})},u0=(e,n)=>{e._skinLoaded?kM(e,n):e.on("SkinLoaded",()=>{kM(e,n)})},_H=(e,n)=>{u0(e,ll.translate(["Failed to upload image: {0}",n]))},d0=(e,n,o)=>{v_(e,n,{message:o}),console.error(o)},m0=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,AH=(e,n,o)=>{d0(e,"PluginLoadError",m0("plugin",n,o))},TM=(e,n,o)=>{d0(e,"IconsLoadError",m0("icons",n,o))},OH=(e,n,o)=>{d0(e,"LanguageLoadError",m0("language",n,o))},DH=(e,n,o)=>{d0(e,"ThemeLoadError",m0("theme",n,o))},f0=(e,n,o)=>{d0(e,"ModelLoadError",m0("model",n,o))},_M=(e,n,o)=>{const r=ll.translate(["Failed to initialize plugin: {0}",n]);v_(e,"PluginLoadError",{message:r}),g0(r,o),u0(e,r)},g0=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},MH=e=>{D.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},a3=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},RH=(e,n)=>{a3(e,"StyleWithCSS",n),a3(e,"enableInlineTableEditing",n),a3(e,"enableObjectResizing",n)},AM=e=>{e.selection.setRng(e.selection.getRng())},OM=(e,n,o)=>{Cg(e,n)&&!o?Ed(e,n):o&&_u(e,n)},DM=e=>{const n=U.fromDom(e.getBody());OM(n,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),MH(e)},MM=e=>{const n=U.fromDom(e.getBody());OM(n,"mce-content-readonly",!1),e.hasEditableRoot()&&Nn(n,!0),RH(e,!1),ph(e)&&e.focus(),AM(e),e.nodeChanged()},Xu=e=>gv(e),jh="data-mce-contenteditable",pl=e=>{oe($r(e,'*[contenteditable="true"]'),n=>{Is(n,jh,"true"),Nn(n,!1)})},c3=e=>{oe($r(e,`*[${jh}="true"]`),n=>{Eo(n,jh),Nn(n,!0)})},RM=(e,n)=>{const o=U.fromDom(e.getBody());n?(DM(e),Nn(o,!1),pl(o)):(c3(o),MM(e))},NH=e=>{e.serializer?NM(e):e.on("PreInit",()=>{NM(e)})},NM=e=>{e.parser.addAttributeFilter("contenteditable",n=>{Xu(e)&&oe(n,o=>{o.attr(jh,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(jh,n=>{Xu(e)&&oe(n,o=>{o.attr("contenteditable",o.attr(jh))})}),e.serializer.addTempAttr(jh)},PH=e=>e.type==="click",un=["copy"],BH=e=>kt(un,e.type),h0=(e,n)=>at(n,"a",r=>xn(r,U.fromDom(e.getBody()))).bind(r=>Ji(r,"href")),LH=(e,n)=>{if(PH(n)&&!Qe.metaKeyPressed(n)){const o=U.fromDom(n.target);h0(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${_m(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else BH(n)&&e.dispatch(n.type,n)},IH=e=>{e.on("ShowCaret ObjectSelected",n=>{Xu(e)&&n.preventDefault()}),e.on("DisabledStateChange",n=>{n.isDefaultPrevented()||RM(e,n.state)})},FH=e=>{NH(e),IH(e)},PM=e=>/^[a-z0-9\-]+$/i.test(e),ru=e=>"content/"+e+"/content.css",ya=e=>tinymce.Resource.has(ru(e)),BM=e=>Ju(e,kB(e)),p0=e=>Ju(e,T_(e)),Ju=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return Dt(n,l=>ya(l)?l:PM(l)&&!e.inline?`${o}/${l}/${c}`:e.documentBaseURI.toAbsolute(l))},au=e=>{e.contentCSS=e.contentCSS.concat(BM(e),p0(e))},b0=e=>e?Rn(e.getElementsByTagName("img")):[],i3=(e,n)=>{const o={};return{findAll:(c,l=Ue)=>{const d=vt(b0(c),p=>{const y=p.src;return p.hasAttribute("data-mce-bogus")||p.hasAttribute("data-mce-placeholder")||!y||y===Tt.transparentSrc?!1:Se(y,"blob:")?!e.isUploaded(y)&&l(p):Se(y,"data:")?l(p):!1}),g=Dt(d,p=>{const y=p.src;if(ht(o,y))return o[y].then(E=>re(E)?E:{image:p,blobInfo:E.blobInfo});{const E=h4(n,y).then(T=>(delete o[y],{image:p,blobInfo:T})).catch(T=>(delete o[y],T));return o[y]=E,E}});return Promise.all(g)}}},G2=()=>{let o={};const r=(_,R)=>({status:_,resultUri:R}),c=_=>_ in o;return{hasBlobUri:c,getResultUri:_=>{const R=o[_];return R?R.resultUri:null},isPending:_=>c(_)?o[_].status===1:!1,isUploaded:_=>c(_)?o[_].status===2:!1,markPending:_=>{o[_]=r(1,null)},markUploaded:(_,R)=>{o[_]=r(2,R)},removeFailed:_=>{delete o[_]},destroy:()=>{o={}}}};let LM=0;const IM=()=>{const e=()=>Math.round(Ub()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},$H=e=>e+LM+++IM(),HH=()=>{let e=[];const n=T=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[T.toLowerCase()]||"dat",o=(T,_,R,B,P)=>{if(re(T))return r({id:T,name:B,filename:P,blob:_,base64:R});if(Ot(T))return r(T);throw new Error("Unknown input type")},r=T=>{if(!T.blob||!T.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const _=T.id||$H("blobid"),R=T.name||_,B=T.blob;return{id:Ie(_),name:Ie(R),filename:Ie(T.filename||R+"."+n(B.type)),blob:Ie(B),base64:Ie(T.base64),blobUri:Ie(T.blobUri||URL.createObjectURL(B)),uri:Ie(T.uri)}},c=T=>{d(T.id())||e.push(T)},l=T=>ro(e,T).getOrUndefined(),d=T=>l(_=>_.id()===T);return{create:o,add:c,get:d,getByUri:T=>l(_=>_.blobUri()===T),getByData:(T,_)=>l(R=>R.base64()===T&&R.blob().type===_),findFirst:l,removeByUri:T=>{e=vt(e,_=>_.blobUri()===T?(URL.revokeObjectURL(_.blobUri()),!1):!0)},destroy:()=>{oe(e,T=>{URL.revokeObjectURL(T.blobUri())}),e=[]}}},FM=(e,n)=>{const o={},r=(P,I)=>P?P.replace(/\/$/,"")+"/"+I.replace(/^\//,""):I,c=(P,I)=>new Promise((Z,Q)=>{const ee=new XMLHttpRequest;ee.open("POST",n.url),ee.withCredentials=n.credentials,ee.upload.onprogress=ye=>{I(ye.loaded/ye.total*100)},ee.onerror=()=>{Q("Image upload failed due to a XHR Transport error. Code: "+ee.status)},ee.onload=()=>{if(ee.status<200||ee.status>=300){Q("HTTP Error: "+ee.status);return}const ye=JSON.parse(ee.responseText);if(!ye||!re(ye.location)){Q("Invalid JSON: "+ee.responseText);return}Z(r(n.basePath,ye.location))};const ne=new FormData;ne.append("file",P.blob(),P.filename()),ee.send(ne)}),l=Ht(n.handler)?n.handler:c,d=()=>new Promise(P=>{P([])}),g=(P,I)=>({url:I,blobInfo:P,status:!0}),p=(P,I)=>({url:"",blobInfo:P,status:!1,error:I}),y=(P,I)=>{Ee.each(o[P],Z=>{Z(I)}),delete o[P]},E=(P,I,Z)=>(e.markPending(P.blobUri()),new Promise(Q=>{let ee,ne;try{const ye=()=>{ee&&(ee.close(),ne=nt)},Oe=he=>{ye(),e.markUploaded(P.blobUri(),he),y(P.blobUri(),g(P,he)),Q(g(P,he))},je=he=>{ye(),e.removeFailed(P.blobUri()),y(P.blobUri(),p(P,he)),Q(p(P,he))};ne=he=>{he<0||he>100||D.from(ee).orThunk(()=>D.from(Z).map(Ja)).each(ue=>{ee=ue,ue.progressBar.value(he)})},I(P,ne).then(Oe,he=>{je(re(he)?{message:he}:he)})}catch(ye){Q(p(P,ye))}})),T=P=>P===c,_=P=>{const I=P.blobUri();return new Promise(Z=>{o[I]=o[I]||[],o[I].push(Z)})},R=(P,I)=>(P=Ee.grep(P,Z=>!e.isUploaded(Z.blobUri())),Promise.all(Ee.map(P,Z=>e.isPending(Z.blobUri())?_(Z):E(Z,l,I))));return{upload:(P,I)=>!n.url&&T(l)?d():R(P,I)}},l3=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),u3=(e,n)=>FM(n,{url:yB(e),basePath:CB(e),credentials:SB(e),handler:xB(e)}),$M=e=>{const n=G2(),o=u3(e,n);return{upload:(r,c=!0)=>o.upload(r,c?l3(e):void 0)}},d3=(e,n)=>e.dom.isEmpty(n.dom)&&Ae(e.schema.getTextBlockElements()[Ft(n)]),HG=e=>n=>{d3(e,n)&&qo(n,U.fromHtml('<br data-mce-bogus="1" />'))},VH=e=>{const n=HH();let o,r;const c=G2(),l=[],d=ee=>ne=>e.selection?ee(ne):[],g=ee=>ee+(ee.indexOf("?")===-1?"?":"&")+new Date().getTime(),p=(ee,ne,ye)=>{let Oe=0;do Oe=ee.indexOf(ne,Oe),Oe!==-1&&(ee=ee.substring(0,Oe)+ye+ee.substr(Oe+ne.length),Oe+=ye.length-ne.length+1);while(Oe!==-1);return ee},y=(ee,ne,ye)=>{const Oe=`src="${ye}"${ye===Tt.transparentSrc?' data-mce-placeholder="1"':""}`;return ee=p(ee,`src="${ne}"`,Oe),ee=p(ee,'data-mce-src="'+ne+'"','data-mce-src="'+ye+'"'),ee},E=(ee,ne)=>{oe(e.undoManager.data,ye=>{ye.type==="fragmented"?ye.fragments=Dt(ye.fragments,Oe=>y(Oe,ee,ne)):ye.content=y(ye.content,ee,ne)})},T=(ee,ne)=>{const ye=e.convertURL(ne,"src");E(ee.src,ne),li(U.fromDom(ee),{src:av(e)?g(ne):ne,"data-mce-src":ye})},_=()=>(o||(o=u3(e,c)),I().then(d(ee=>{const ne=Dt(ee,ye=>ye.blobInfo);return o.upload(ne,l3(e)).then(d(ye=>{const Oe=[];let je=!1;const he=Dt(ye,(ue,Ce)=>{const{blobInfo:qe,image:ut}=ee[Ce];let At=!1;return ue.status&&bB(e)?(ue.url&&!jo(ut.src,ue.url)&&(je=!0),n.removeByUri(ut.src),qc(e)||T(ut,ue.url)):ue.error&&(ue.error.remove&&(E(ut.src,Tt.transparentSrc),Oe.push(ut),At=!0),_H(e,ue.error.message)),{element:ut,status:ue.status,uploadUri:ue.url,blobInfo:qe,removed:At}});return Oe.length>0&&!qc(e)?e.undoManager.transact(()=>{oe(Ag(Oe),ue=>{const Ce=Fr(ue);Xn(ue),Ce.each(HG(e)),n.removeByUri(ue.dom.src)})}):je&&e.undoManager.dispatchChange(),he}))}))),R=()=>QS(e)?_():Promise.resolve([]),B=ee=>_o(l,ne=>ne(ee)),P=ee=>{l.push(ee)},I=()=>(r||(r=i3(c,n)),r.findAll(e.getBody(),B).then(d(ee=>{const ne=vt(ee,ye=>re(ye)?(u0(e,ye),!1):ye.uriType!=="blob");return qc(e)||oe(ne,ye=>{E(ye.image.src,ye.blobInfo.blobUri()),ye.image.src=ye.blobInfo.blobUri(),ye.image.removeAttribute("data-mce-src")}),ne}))),Z=()=>{n.destroy(),c.destroy(),r=o=null},Q=ee=>ee.replace(/src="(blob:[^"]+)"/g,(ne,ye)=>{const Oe=c.getResultUri(ye);if(Oe)return'src="'+Oe+'"';let je=n.getByUri(ye);return je||(je=cs(e.editorManager.get(),(he,ue)=>he||ue.editorUpload&&ue.editorUpload.blobCache.getByUri(ye),void 0)),je?'src="data:'+je.blob().type+";base64,"+je.base64()+'"':ne});return e.on("SetContent",()=>{QS(e)?R():I()}),e.on("RawSaveContent",ee=>{ee.content=Q(ee.content)}),e.on("GetContent",ee=>{ee.source_view||ee.format==="raw"||ee.format==="tree"||(ee.content=Q(ee.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",ee=>{oe(ee,ne=>{const ye=ne.attr("src");if(!ye||n.getByUri(ye))return;const Oe=c.getResultUri(ye);Oe&&ne.attr("src",Oe)})})}),{blobCache:n,addFilter:P,uploadImages:_,uploadImagesAuto:R,scanForImages:I,destroy:Z}},VG=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},l={inline:"strike",remove:"all",preserve_attributes:["class","style"]},d={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[d,c,l]:[c,d,l]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,l,d)=>Ze(c)&&c.hasAttribute("href"),onformat:(c,l,d)=>{Ee.each(d,(g,p)=>{n.setAttrib(c,p,g)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var l;return(l=c==null?void 0:c.customValue)!==null&&l!==void 0?l:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Ee.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},HM={remove_similar:!0,inherit:!1},Gh={selector:"td,th",...HM},cu={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Gh},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Gh},tablecellbordercolor:{styles:{borderColor:"%value"},...Gh},tablecellclass:{classes:["%value"],...Gh},tableclass:{selector:"table",classes:["%value"],...HM},tablecellborderstyle:{styles:{borderStyle:"%value"},...Gh},tablecellborderwidth:{styles:{borderWidth:"%value"},...Gh}},zG=Ie(cu),UG=e=>{const n={},o=d=>Ae(d)?n[d]:n,r=d=>ht(n,d),c=(d,g)=>{d&&(re(d)?(Kn(g)||(g=[g]),oe(g,p=>{uo(p.deep)&&(p.deep=!$c(p)),uo(p.split)&&(p.split=!$c(p)||_s(p)),uo(p.remove)&&$c(p)&&!_s(p)&&(p.remove="none"),$c(p)&&_s(p)&&(p.mixed=!0,p.block_expand=!0),re(p.classes)&&(p.classes=p.classes.split(/\s+/))}),n[d]=g):He(d,(p,y)=>{c(y,p)}))},l=d=>(d&&n[d]&&delete n[d],n);return c(VG(e)),c(zG()),c(DB(e)),{get:o,has:r,register:c,unregister:l}},q2=Ee.each,aa=Jn.DOM,m3=e=>Ae(e)&&Ot(e),f3=(e,n)=>{const o=n&&n.schema||In({}),r=(p,y)=>{y.classes.length>0&&aa.addClass(p,y.classes.join(" ")),aa.setAttribs(p,y.attrs)},c=p=>{const y=re(p)?{name:p,classes:[],attrs:{}}:p,E=aa.create(y.name);return r(E,y),E},l=(p,y)=>{const E=o.getElementRule(p.nodeName.toLowerCase()),T=E==null?void 0:E.parentsRequired;return T&&T.length?y&&kt(T,y)?y:T[0]:!1},d=(p,y,E)=>{let T;const _=y[0],R=m3(_)?_.name:void 0,B=l(p,R);if(B)R===B?(T=_,y=y.slice(1)):T=B;else if(_)T=_,y=y.slice(1);else if(!E)return p;const P=T?c(T):aa.create("div");P.appendChild(p),E&&Ee.each(E,Z=>{const Q=c(Z);P.insertBefore(Q,p)});const I=m3(T)?T.siblings:void 0;return d(P,y,I)},g=aa.create("div");if(e.length>0){const p=e[0],y=c(p),E=m3(p)?p.siblings:void 0;g.appendChild(d(y,e.slice(1),E))}return g},VM=e=>{e=Ee.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,l,d,g)=>{switch(c){case"#":o.attrs.id=l;break;case".":o.classes.push(l);break;case":":Ee.inArray("checked disabled enabled read-only required".split(" "),l)!==-1&&(o.attrs[l]=l);break}if(d==="["){const p=g.match(/([\w\-]+)(?:\=\"([^\"]+))?/);p&&(o.attrs[p[1]]=p[2])}return""})),o.name=n||"div",o},zM=e=>re(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Ee.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Ee.map(n.split(/(?:~\+|~|\+)/),VM),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],zH=(e,n)=>{let o="",r=MB(e);if(r==="")return"";const c=_=>re(_)?_.replace(/%(\w+)/g,""):"",l=(_,R)=>aa.getStyle(R??e.getBody(),_,!0);if(re(n)){const _=e.formatter.get(n);if(!_)return"";n=_[0]}if("preview"in n){const _=n.preview;if(_===!1)return"";r=_||r}let d=n.block||n.inline||"span",g;const p=zM(n.selector);p.length>0?(p[0].name||(p[0].name=d),d=n.selector,g=f3(p,e)):g=f3([d],e);const y=aa.select(d,g)[0]||g.firstChild;q2(n.styles,(_,R)=>{const B=c(_);B&&aa.setStyle(y,R,B)}),q2(n.attributes,(_,R)=>{const B=c(_);B&&aa.setAttrib(y,R,B)}),q2(n.classes,_=>{const R=c(_);aa.hasClass(y,R)||aa.addClass(y,R)}),e.dispatch("PreviewFormats"),aa.setStyles(g,{position:"absolute",left:-65535}),e.getBody().appendChild(g);const E=l("fontSize"),T=/px$/.test(E)?parseInt(E,10):0;return q2(r.split(" "),_=>{let R=l(_,y);if(!(_==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(R)&&(R=l(_),zp(R).toLowerCase()==="#ffffff"))&&!(_==="color"&&zp(R).toLowerCase()==="#000000")){if(_==="font-size"&&/em|%$/.test(R)){if(T===0)return;R=parseFloat(R)/(/%$/.test(R)?100:1)*T+"px"}_==="border"&&R&&(o+="padding:0 2px;"),o+=_+":"+R+";"}}),e.dispatch("AfterPreviewFormats"),aa.remove(g),o},UH=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},Qu=e=>{const n=UG(e),o=mo({});return UH(e),MO(e),qc(e)||HF(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,l)=>{X4(e,r,c,l)},remove:(r,c,l,d)=>{oM(e,r,c,l,d)},toggle:(r,c,l)=>{sM(e,r,c,l)},match:(r,c,l,d)=>K4(e,r,c,l,d),closest:r=>nM(e,r),matchAll:(r,c)=>eM(e,r,c),matchNode:(r,c,l,d)=>Y4(e,r,c,l,d),canApply:r=>tM(e,r),formatChanged:(r,c,l,d)=>rM(e,o,r,c,l,d),getCssText:Ye(zH,e)}},UM=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},ZH=(e,n,o)=>{const r=mo(!1),c=p=>{i0(n,!1,o),n.add({},p)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",p=>{const y=p.command;UM(y)||(jD(n,o),n.beforeChange())}),e.on("ExecCommand",p=>{const y=p.command;UM(y)||c(p)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",p=>{const y=p.keyCode;if(p.isDefaultPrevented())return;const E=Tt.os.isMacOS()&&p.key==="Meta";(y>=33&&y<=36||y>=37&&y<=40||y===45||p.ctrlKey||E)&&(c(),e.nodeChanged()),(y===46||y===8)&&e.nodeChanged(),r.get()&&n.typing&&!ra(Vf(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",p=>{const y=p.keyCode;if(p.isDefaultPrevented())return;if(y>=33&&y<=36||y>=37&&y<=40||y===45){n.typing&&c(p);return}const E=p.ctrlKey&&!p.altKey||p.metaKey;if((y<16||y>20)&&y!==224&&y!==91&&!n.typing&&!E){n.beforeChange(),i0(n,!0,o),n.add({},p),r.set(!0);return}(Tt.os.isMacOS()?p.metaKey:p.ctrlKey&&!p.altKey)&&n.beforeChange()}),e.on("mousedown",p=>{n.typing&&c(p)});const l=p=>p.inputType==="insertReplacementText",d=p=>p.inputType==="insertText"&&p.data===null,g=p=>p.inputType==="insertFromPaste"||p.inputType==="insertFromDrop";e.on("input",p=>{p.inputType&&(l(p)||d(p)||g(p))&&c(p)}),e.on("AddUndo Undo Redo ClearUndos",p=>{p.isDefaultPrevented()||e.nodeChanged()})},WH=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},ZM=e=>{const n=Vr(),o=mo(0),r=mo(0),c={data:[],typing:!1,beforeChange:()=>{F$(e,o,n)},add:(l,d)=>$$(e,c,r,o,n,l,d),dispatchChange:()=>{e.setDirty(!0);const l=Vf(e);l.bookmark=nv(e.selection),e.dispatch("change",{level:l,lastLevel:ri(c.data,r.get()).getOrUndefined()})},undo:()=>H$(e,c,o,r),redo:()=>V$(e,r,c.data),clear:()=>{z$(e,c,r)},reset:()=>{JD(e,c)},hasUndo:()=>U$(e,c,r),hasRedo:()=>Z$(e,c,r),transact:l=>W$(e,c,o,l),ignore:l=>{QD(e,o,l)},extra:(l,d)=>{q4(e,c,r,l,d)}};return qc(e)||ZH(e,c,o),WH(e),c},jH=[9,27,Qe.HOME,Qe.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Qe.DOWN,Qe.UP,Qe.LEFT,Qe.RIGHT].concat(Tt.browser.isFirefox()?[224]:[]),WM="data-mce-placeholder",jM=e=>e.type==="keydown"||e.type==="keyup",GM=e=>{const n=e.keyCode;return n===Qe.BACKSPACE||n===Qe.DELETE},GH=e=>{if(jM(e)){const n=e.keyCode;return!GM(e)&&(Qe.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||kt(jH,n))}else return!1},K2=e=>jM(e)&&!(GM(e)||e.type==="keyup"&&e.keyCode===229),qH=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},KH=e=>{var n;const o=e.dom,r=or(e),c=(n=A_(e))!==null&&n!==void 0?n:"",l=(d,g)=>{if(GH(d))return;const p=e.getBody(),y=K2(d)?!1:qH(o,p,r);(o.getAttrib(p,WM)!==""!==y||g)&&(o.setAttrib(p,WM,y?c:null),fr(e,y),e.on(y?"keydown":"keyup",l),e.off(y?"keyup":"keydown",l))};ls(c)&&e.on("init",d=>{l(d,!0),e.on("change SetContent ExecCommand",l),e.on("paste",g=>rt.setEditorTimeout(e,()=>l(g)))})},ZG=(e,n)=>({block:e,position:n}),v0=(e,n)=>({from:e,to:n}),g3=(e,n)=>{const o=U.fromDom(e),r=U.fromDom(n.container());return Qv(o,r).map(c=>ZG(c,n))},h3=e=>!($o(e.to.block,e.from.block)||$o(e.from.block,e.to.block)),YH=e=>!xn(e.from.block,e.to.block),qM=(e,n)=>Oo(n,c=>jp(c)||ve(c.dom),c=>xn(c,e)).filter(ha).getOr(e),XH=(e,n)=>{const o=U.fromDom(e);return xn(qM(o,n.from.block),qM(o,n.to.block))},JH=e=>Tn(e.from.block.dom)===!1&&Tn(e.to.block.dom)===!1,Uf=e=>{const n=o=>nf(o)||xb(o.dom)||of(o);return n(e.from.block)&&n(e.to.block)},Zf=(e,n,o,r)=>An(r.position.getNode())&&!Hr(e,r.block)?yf(!1,r.block.dom).bind(c=>c.isEqual(r.position)?dc(o,n,c).bind(l=>g3(n,l)):D.some(r)).getOr(r):r,Y2=(e,n,o,r)=>{const c=g3(n,fe.fromRangeStart(r)),l=c.bind(d=>dc(o,n,d.position).bind(g=>g3(n,g).map(p=>Zf(e,n,o,p))));return Ls(c,l,v0).filter(d=>YH(d)&&XH(n,d)&&JH(d)&&Uf(d)&&h3(d))},X2=(e,n,o,r)=>r.collapsed?Y2(e,n,o,r):D.none(),Wf=(e,n)=>{const o=Js(e);return Ns(o,r=>n.isBlock(Ft(r))).fold(Ie(o),r=>o.slice(0,r))},lm=(e,n)=>{const o=Wf(e,n);return oe(o,Xn),o},y0=(e,n,o)=>{const r=Gu(o,n);return ro(r.reverse(),c=>Hr(e,c)).each(Xn)},J2=(e,n)=>vt(Ra(n),o=>!Hr(e,o)).length===0,KM=(e,n,o,r,c)=>{if(Hr(r,o))return ql(o),Mr(o.dom);J2(r,c)&&Hr(r,n)&&ta(c,U.fromTag("br"));const l=qr(o.dom,fe.before(c.dom));return oe(lm(n,r),d=>{ta(c,d)}),y0(r,e,n),l},p3=(e,n)=>e.isInline(Ft(n)),b3=(e,n,o,r)=>{if(Hr(r,o)){if(Hr(r,n)){const d=ua((g=>{const p=(y,E)=>Nc(y).fold(()=>E,T=>p3(r,T)?p(T,E.concat(Fd(T))):E);return p(g,[])})(o),(g,p)=>(hb(g,p),p),ul());Ru(n),qo(n,d)}return Xn(o),Mr(n.dom)}const c=xi(o.dom);return oe(lm(n,r),l=>{qo(o,l)}),y0(r,e,n),c},YM=(e,n)=>{const o=Gu(n,e);return D.from(o[o.length-1])},XM=(e,n)=>$o(n,e)?YM(n,e):D.none(),jf=(e,n)=>{yf(e,n.dom).bind(o=>D.from(o.getNode())).map(U.fromDom).filter(Lu).each(Xn)},v3=(e,n,o,r)=>(jf(!0,n),jf(!1,o),XM(n,o).fold(Ye(b3,e,n,o,r),Ye(KM,e,n,o,r))),y3=(e,n,o,r,c)=>n?v3(e,r,o,c):v3(e,o,r,c),Q2=(e,n)=>{const o=U.fromDom(e.getBody());return X2(e.schema,o.dom,n,e.selection.getRng()).map(c=>()=>{y3(o,n,c.from.block,c.to.block,e.schema).each(l=>{e.selection.setRng(l.toRange())})})},ey=(e,n,o)=>{const r=n.getRng();return Ls(Qv(e,U.fromDom(r.startContainer)),Qv(e,U.fromDom(r.endContainer)),(c,l)=>xn(c,l)?D.none():D.some(()=>{r.deleteContents(),y3(e,!0,c,l,o).each(d=>{n.setRng(d.toRange())})})).getOr(D.none())},C3=(e,n)=>{const o=U.fromDom(n),r=Ye(xn,e);return tl(o,jp,r).isSome()},JM=(e,n)=>C3(e,n.startContainer)||C3(e,n.endContainer),QM=(e,n)=>{const o=qr(e.dom,fe.fromRangeStart(n)).isNone(),r=Gr(e.dom,fe.fromRangeEnd(n)).isNone();return!JM(e,n)&&o&&r},e6=e=>D.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),ed=e=>{const n=U.fromDom(e.getBody()),o=e.selection.getRng();return QM(n,o)?e6(e):ey(n,e.selection,e.schema)},iu=(e,n)=>e.selection.isCollapsed()?D.none():ed(e),Cr=(e,n,o,r,c)=>D.from(n._selectionOverrides.showCaret(e,o,r,c)),QH=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},C0=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?D.none():D.some(QH(n)),e9=(e,n,o)=>{const r=bv(1,e.getBody(),n),c=fe.fromRangeStart(r),l=c.getNode();if(r1(l))return Cr(1,e,l,!c.isAtEnd(),!1);const d=c.getNode(!0);if(r1(d))return Cr(1,e,d,!1,!1);const g=Ei(e.dom.getRoot(),c.getNode());return r1(g)?Cr(1,e,g,!1,o):D.none()},S3=(e,n,o)=>n.collapsed?e9(e,n,o).getOr(n):n,t9=e=>Kd(e)||Af(e),n9=e=>Yd(e)||D1(e),o9=(e,n)=>{Te(n)&&n.data.length===0&&e.remove(n)},t6=(e,n,o,r,c,l)=>{Cr(r,e,l.getNode(!c),c,!0).each(d=>{if(n.collapsed){const g=n.cloneRange();c?g.setEnd(d.startContainer,d.startOffset):g.setStart(d.endContainer,d.endOffset),g.deleteContents()}else n.deleteContents();e.selection.setRng(d)}),o9(e.dom,o)},s9=(e,n)=>{const o=e.selection.getRng();if(!Te(o.commonAncestorContainer))return D.none();const r=n?sr.Forwards:sr.Backwards,c=uc(e.getBody()),l=Ye(xx,n?c.next:c.prev),d=n?t9:n9,g=i1(r,e.getBody(),o),p=l(g),y=p&&zc(n,p);if(!y||!yv(g,y))return D.none();if(d(y))return D.some(()=>t6(e,o,g.getNode(),r,n,y));const E=l(y);return E&&d(E)&&yv(y,E)?D.some(()=>t6(e,o,g.getNode(),r,n,E)):D.none()},x3=(e,n)=>s9(e,n),w3=(e,n)=>{const o=e.getBody();return n?Mr(o).filter(Kd):xi(o).filter(Yd)},E3=e=>{const n=e.selection.getRng();return!n.collapsed&&(w3(e,!0).exists(o=>o.isEqual(fe.fromRangeStart(n)))||w3(e,!1).exists(o=>o.isEqual(fe.fromRangeEnd(n))))},k3=e=>Ae(e)&&(jp(U.fromDom(e))||of(U.fromDom(e))),Ca=Ci.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),n6=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Ze(o)&&o.getAttribute("data-mce-caret")===r},r9=(e,n,o,r,c)=>{const l=d=>c.isInline(d.nodeName.toLowerCase())&&!dl(o,r,e);return Q_(!n,o).fold(()=>Q_(n,r).fold(we,l),l)},o6=(e,n,o,r,c)=>{const l=c.getNode(!o);return Qv(U.fromDom(n),U.fromDom(r.getNode())).map(d=>Hr(e,d)?Ca.remove(d.dom):Ca.moveToElement(l)).orThunk(()=>D.some(Ca.moveToElement(l)))},T3=(e,n,o,r)=>dc(n,e,o).bind(c=>k3(c.getNode())||r9(e,n,o,c,r)?D.none():n&&Tn(c.getNode())||!n&&Tn(c.getNode(!0))?o6(r,e,n,o,c):n&&Yd(o)||!n&&Kd(o)?D.some(Ca.moveToPosition(c)):D.none()),s6=(e,n)=>dn(n)?D.none():e&&Tn(n.nextSibling)?D.some(Ca.moveToElement(n.nextSibling)):!e&&Tn(n.previousSibling)?D.some(Ca.moveToElement(n.previousSibling)):D.none(),_3=(e,n,o)=>o.fold(r=>D.some(Ca.remove(r)),r=>D.some(Ca.moveToElement(r)),r=>dl(n,r,e)?D.none():D.some(Ca.moveToPosition(r))),r6=(e,n,o,r)=>n6(n,o)?s6(n,o.getNode(!n)).orThunk(()=>T3(e,n,o,r)):T3(e,n,o,r).bind(c=>_3(e,o,c)),a6=(e,n,o,r)=>{const c=bv(n?1:-1,e,o),l=fe.fromRangeStart(c),d=U.fromDom(e);return!n&&Yd(l)?D.some(Ca.remove(l.getNode(!0))):n&&Kd(l)?D.some(Ca.remove(l.getNode())):!n&&Kd(l)&&qv(d,l,r)?V5(d,l,r).map(g=>Ca.remove(g.getNode())):n&&Yd(l)&&Ct(d,l,r)?FI(d,l,r).map(g=>Ca.remove(g.getNode())):r6(e,n,l,r)},A3=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),Df(e,n,U.fromDom(o)),!0),a9=(e,n)=>o=>{const r=n?fe.before(o):fe.after(o);return e.selection.setRng(r.toRange()),!0},c9=e=>n=>(e.selection.setRng(n.toRange()),!0),bl=(e,n)=>D.from(Ei(e.getBody(),n)),Ri=(e,n)=>{const o=e.selection.getNode();return bl(e,o).filter(Tn).fold(()=>a6(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(A3(e,n),a9(e,n),c9(e))),()=>D.some(nt))},ty=e=>{oe($r(e,".mce-offscreen-selection"),Xn)},c6=(e,n)=>{const o=e.selection.getNode();return Tn(o)&&!Cb(o)?bl(e,o.parentNode).filter(Tn).fold(()=>D.some(()=>{ty(U.fromDom(e.getBody())),Df(e,n,U.fromDom(e.selection.getNode())),Qd(e)}),()=>D.some(nt)):E3(e)?D.some(()=>{Fn(e,e.selection.getRng(),U.fromDom(e.getBody()))}):D.none()},S0=e=>{const n=e.dom,o=e.selection,r=Ei(e.getBody(),o.getNode());if(ve(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(fe.before(c).toRange())}return!0},ny=(e,n)=>e.selection.isCollapsed()?Ri(e,n):c6(e,n),O3=e=>e.hasOwnProperty("text"),D3=e=>e.hasOwnProperty("marker"),M3=(e,n)=>{const o=(l,d)=>{if(Te(l))return{text:l,offset:d};{const g=n(),p=l.childNodes;return d<p.length?(l.insertBefore(g,p[d]),{marker:g,before:!0}):(l.appendChild(g),{marker:g,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},R3=e=>{var n,o;const{start:r,end:c}=e,l=new window.Range;return O3(r)?l.setStart(r.text,r.offset):D3(r)&&(r.before?l.setStartBefore(r.marker):l.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),O3(c)?l.setEnd(c.text,c.offset):D3(c)&&(c.before?l.setEndBefore(c.marker):l.setEndAfter(c.marker),(o=c.marker.parentNode)===null||o===void 0||o.removeChild(c.marker)),l},oy=(e,n)=>{var o;const r=e.dom,c=r.getParent(e.selection.getStart(),r.isBlock),l=r.getParent(e.selection.getEnd(),r.isBlock),d=e.getBody();if(((o=c==null?void 0:c.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&c&&l&&c===d.firstChild&&l===d.lastChild&&!r.isEmpty(d)){const p=c.cloneNode(!1),y=()=>{if(n?go(e):Xv(e),d.firstChild!==c){const E=M3(e.selection.getRng(),()=>document.createElement("span"));Array.from(d.childNodes).forEach(T=>p.appendChild(T)),d.appendChild(p),e.selection.setRng(R3(E))}};return D.some(y)}return D.none()},sy=(e,n)=>{const o=fe.fromRangeStart(e.selection.getRng());return dc(n,e.getBody(),o).filter(r=>n?L5(r):NI(r)).bind(r=>pv(n?0:-1,r)).map(r=>()=>e.selection.select(r))},x0=(e,n)=>e.selection.isCollapsed()?sy(e,n):D.none(),qh=Te,i6=e=>qh(e)&&e.data[0]===Us,l6=e=>qh(e)&&e.data[e.data.length-1]===Us,u6=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Us)},d6=e=>{var n;if(qh(e.previousSibling))return l6(e.previousSibling)||e.previousSibling.appendData(Us),e.previousSibling;if(qh(e))return i6(e)||e.insertData(0,Us),e;{const o=u6(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},i9=e=>{var n,o;if(qh(e.nextSibling))return i6(e.nextSibling)||e.nextSibling.insertData(0,Us),e.nextSibling;if(qh(e))return l6(e)||e.appendData(Us),e;{const r=u6(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},ry=(e,n)=>e?d6(n):i9(n),N3=Ye(ry,!0),l9=Ye(ry,!1),m6=(e,n)=>Te(e.container())?ry(n,e.container()):ry(n,e.getNode()),f6=(e,n)=>{const o=n.get();return o&&e.container()===o&&Kl(o)},P3=(e,n)=>n.fold(o=>{ff(e.get());const r=N3(o);return e.set(r),D.some(fe(r,r.length-1))},o=>Mr(o).map(r=>{if(f6(r,e)){const c=e.get();return fe(c,1)}else{ff(e.get());const c=m6(r,!0);return e.set(c),fe(c,1)}}),o=>xi(o).map(r=>{if(f6(r,e)){const c=e.get();return fe(c,c.length-1)}else{ff(e.get());const c=m6(r,!1);return e.set(c),fe(c,c.length-1)}}),o=>{ff(e.get());const r=l9(o);return e.set(r),D.some(fe(r,1))}),g6=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return D.none()},ca=Ci.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),h6=(e,n)=>{const o=Vu(n,e);return o||e},ay=(e,n,o)=>{const r=Q5(o),c=h6(n,r.container());return bs(e,c,r).fold(()=>Gr(c,r).bind(Ye(bs,e,c)).map(l=>ca.before(l)),D.none)},B3=(e,n)=>Cf(e,n)===null,p6=(e,n,o)=>bs(e,n,o).filter(Ye(B3,n)),u9=(e,n,o)=>{const r=eO(o);return p6(e,n,r).bind(c=>qr(c,r).isNone()?D.some(ca.start(c)):D.none())},d9=(e,n,o)=>{const r=Q5(o);return p6(e,n,r).bind(c=>Gr(c,r).isNone()?D.some(ca.end(c)):D.none())},m9=(e,n,o)=>{const r=eO(o),c=h6(n,r.container());return bs(e,c,r).fold(()=>qr(c,r).bind(Ye(bs,e,c)).map(l=>ca.after(l)),D.none)},L3=e=>!ww(I3(e)),lu=(e,n,o)=>g6([ay,u9,d9,m9],[e,n,o]).filter(L3),I3=e=>e.fold(Yn,Yn,Yn,Yn),cy=e=>e.fold(Ie("before"),Ie("start"),Ie("end"),Ie("after")),iy=e=>e.fold(ca.before,ca.before,ca.after,ca.after),F3=e=>e.fold(ca.start,ca.start,ca.end,ca.end),f9=(e,n)=>cy(e)===cy(n)&&I3(e)===I3(n),g9=(e,n,o,r,c,l)=>Ls(bs(n,o,r),bs(n,o,c),(d,g)=>d!==g&&rF(o,d,g)?ca.after(e?d:g):l).getOr(l),h9=(e,n)=>e.fold(Ue,o=>!f9(o,n)),p9=(e,n,o,r,c)=>{const l=zc(e,c);return dc(e,o,l).map(Ye(zc,e)).fold(()=>r.map(iy),p=>lu(n,o,p).map(Ye(g9,e,n,o,l,p)).filter(Ye(h9,r))).filter(L3)},b9=(e,n)=>e?n.fold(S(D.some,ca.start),D.none,S(D.some,ca.after),D.none):n.fold(D.none,S(D.some,ca.before),D.none,S(D.some,ca.end)),ly=(e,n,o,r)=>{const c=zc(e,r),l=lu(n,o,c);return lu(n,o,c).bind(Ye(b9,e)).orThunk(()=>p9(e,n,o,l,r))},uy=e=>Ht(e.selection.getSel().modify),b6=(e,n,o)=>{const r=e?1:-1;return n.setRng(fe(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},v9=(e,n)=>{const o=n.selection.getRng(),r=e?fe.fromRangeEnd(o):fe.fromRangeStart(o);return uy(n)?e&&th(r)?b6(!0,n.selection,r):!e&&Iu(r)?b6(!1,n.selection,r):!1:!1};var Kc;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Kc||(Kc={}));const dy=(e,n)=>e===sr.Backwards?ao(n):n,y9=(e,n,o)=>e===sr.Forwards?n.next(o):n.prev(o),C9=(e,n,o,r)=>An(r.getNode(n===sr.Forwards))?Kc.Br:dl(o,r)===!1?Kc.Block:Kc.Wrap,v6=(e,n,o,r)=>{const c=uc(o);let l=r;const d=[];for(;l;){const g=y9(n,c,l);if(!g)break;if(An(g.getNode(!1)))return n===sr.Forwards?{positions:dy(n,d).concat([g]),breakType:Kc.Br,breakAt:D.some(g)}:{positions:dy(n,d),breakType:Kc.Br,breakAt:D.some(g)};if(!g.isVisible()){l=g;continue}if(e(l,g)){const p=C9(o,n,l,g);return{positions:dy(n,d),breakType:p,breakAt:D.some(g)}}d.push(g),l=g}return{positions:dy(n,d),breakType:Kc.Eol,breakAt:D.none()}},y6=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const l=n(o,c).positions;return e===sr.Backwards?l.concat(c):[c].concat(l)}).getOr([]),$3=(e,n)=>cs(e,(o,r)=>o.fold(()=>D.some(r),c=>Ls(Qo(c.getClientRects()),Qo(r.getClientRects()),(l,d)=>{const g=Math.abs(n-l.left);return Math.abs(n-d.left)<=g?r:c}).or(o)),D.none()),my=(e,n)=>Qo(n.getClientRects()).bind(o=>$3(e,o.left)),w0=Ye(v6,fe.isAbove,-1),E0=Ye(v6,fe.isBelow,1),C6=Ye(y6,-1,w0),S6=Ye(y6,1,E0),S9=(e,n)=>w0(e,n).breakAt.isNone(),Yc=(e,n)=>E0(e,n).breakAt.isNone(),H3=e=>Mr(e).map(n=>[n].concat(E0(e,n).positions)).getOr([]),x6=e=>xi(e).map(n=>w0(e,n).positions.concat(n)).getOr([]),w6=(e,n)=>my(C6(e,n),n),x9=(e,n)=>my(S6(e,n),n),E6=Tn,k6=(e,n)=>Math.abs(e.left-n),V3=(e,n)=>Math.abs(e.right-n),w9=e=>da(e,"node"),T6=(e,n)=>Or(e,(o,r)=>{const c=Math.min(k6(o,n),V3(o,n)),l=Math.min(k6(r,n),V3(r,n));return l===c&&w9(r)&&E6(r.node)||l<c?r:o}),E9=e=>{const n=o=>Dt(o,r=>{const c=Hd(r);return c.node=e,c});if(Ze(e))return n(e.getClientRects());if(Te(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},Gf=e=>is(e,E9);var Kh;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Kh||(Kh={}));const _6=(e,n,o,r)=>{let c=r;for(;c=Zd(c,e,KT,n);)if(o(c))return},z3=(e,n,o,r,c,l)=>{let d=0;const g=[],p=T=>{let _=Gf([T]);e===-1&&(_=_.reverse());for(let R=0;R<_.length;R++){const B=_[R];if(!o(B,y)){if(g.length>0&&n(B,ma(g))&&d++,B.line=d,c(B))return!0;g.push(B)}}return!1},y=ma(l.getClientRects());if(!y)return g;const E=l.getNode();return E&&(p(E),_6(e,r,p,E)),g},U3=(e,n)=>n.line>e,k9=(e,n)=>n.line===e,T9=Ye(z3,Kh.Up,to,qp),_9=Ye(z3,Kh.Down,qp,to),A6=e=>ma(e.getClientRects()),WG=(e,n,o,r)=>{const c=uc(n);let l,d,g,p;const y=[];let E=0;e===1?(l=c.next,d=qp,g=to,p=fe.after(r)):(l=c.prev,d=to,g=qp,p=fe.before(r));const T=A6(p);do{if(!p.isVisible())continue;const _=A6(p);if(g(_,T))continue;y.length>0&&d(_,ma(y))&&E++;const R=Hd(_);if(R.position=p,R.line=E,o(R))return y;y.push(R)}while(p=l(p));return y},A9=e=>n=>U3(e,n),O6=e=>n=>k9(e,n),Sr=(e,n)=>{e.selection.setRng(n),Ch(e,e.selection.getRng())},Z3=(e,n,o)=>D.some(S3(e,n,o)),D6=(e,n,o,r,c,l)=>{const d=n===sr.Forwards,g=uc(e.getBody()),p=Ye(xx,d?g.next:g.prev),y=d?r:c;if(!o.collapsed){const B=qb(o);if(l(B))return Cr(n,e,B,n===sr.Backwards,!1);if(E3(e)){const P=o.cloneRange();return P.collapse(n===sr.Backwards),D.from(P)}}const E=i1(n,e.getBody(),o);if(y(E))return C0(e,E.getNode(!d));let T=p(E);const _=io(o);if(T)T=zc(d,T);else return _?D.some(o):D.none();if(y(T))return Cr(n,e,T.getNode(!d),d,!1);const R=p(T);return R&&y(R)&&yv(T,R)?Cr(n,e,R.getNode(!d),d,!1):_?Z3(e,T.toRange(),!1):D.none()},um=(e,n,o,r,c,l)=>{const d=i1(n,e.getBody(),o),g=ma(d.getClientRects()),p=n===Kh.Down,y=e.getBody();if(!g)return D.none();if(E3(e)){const I=p?fe.fromRangeEnd(o):fe.fromRangeStart(o);return(p?x9:w6)(y,I).orThunk(()=>D.from(I)).map(Q=>Q.toRange())}const T=(p?_9:T9)(y,A9(1),d),_=vt(T,O6(1)),R=g.left,B=T6(_,R);if(B&&l(B.node)){const I=Math.abs(R-B.left),Z=Math.abs(R-B.right);return Cr(n,e,B.node,I<Z,!1)}let P;if(r(d)?P=d.getNode():c(d)?P=d.getNode(!0):P=qb(o),P){const I=WG(n,y,A9(1),P);let Z=T6(vt(I,O6(1)),R);if(Z||(Z=ma(vt(I,O6(0))),Z))return Z3(e,Z.position.toRange(),!1)}return _.length===0?fy(e,p).filter(p?c:r).map(I=>S3(e,I.toRange(),!1)):D.none()},fy=(e,n)=>{const o=e.selection.getRng(),r=n?fe.fromRangeEnd(o):fe.fromRangeStart(o),c=X_(r.container(),e.getBody());if(n){const l=E0(c,r);return Ks(l.positions)}else{const l=w0(c,r);return Qo(l.positions)}},M6=(e,n,o)=>fy(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),qf=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},R6=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},N6=(e,n,o)=>P3(n,o).map(r=>(qf(e,r),o)),O9=(e,n,o)=>{const r=fe.fromRangeStart(e);if(e.collapsed)return r;{const c=fe.fromRangeEnd(e);return o?qr(n,c).getOr(c):Gr(n,r).getOr(r)}},D9=(e,n,o)=>{const r=e.getBody(),c=O9(e.selection.getRng(),r,o),l=Ye(Xd,e);return ly(o,l,r,c).bind(g=>N6(e,n,g))},P6=(e,n,o)=>{const r=Dt($r(U.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),d=>d.dom),c=vt(r,e),l=vt(o,e);oe(Lr(c,l),Ye(R6,!1)),oe(Lr(l,c),Ye(R6,!0))},M9=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=fe.fromRangeStart(e.selection.getRng());fe.isTextPosition(r)&&!aF(r)&&(qf(e,lL(o,r)),n.set(null))}},td=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=vt(r,e);oe(c,l=>{const d=fe.fromRangeStart(n.selection.getRng());lu(e,n.getBody(),d).bind(g=>N6(n,o,g))})}},gy=(e,n,o)=>t1(e)?D9(e,n,o).isSome():!1,B6=(e,n,o)=>t1(n)?v9(e,n):!1,R9=e=>{const n=mo(null),o=Ye(Xd,e);return e.on("NodeChange",r=>{t1(e)&&(P6(o,e.dom,r.parents),M9(e,n),td(o,e,n,r.parents))}),n},N9=Ye(B6,!0),P9=Ye(B6,!1),hy=(e,n,o)=>{if(t1(e)){const r=fy(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?fe.fromRangeEnd(c):fe.fromRangeStart(c)});return lu(Ye(Xd,e),e.getBody(),r).exists(c=>{const l=iy(c);return P3(o,l).exists(d=>(qf(e,d),!0))})}else return!1},W3=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},j3=e=>Ls(Mr(e),xi(e),(n,o)=>{const r=zc(!0,n),c=zc(!1,o);return Gr(e,r).forall(l=>l.isEqual(c))}).getOr(!0),py=(e,n)=>o=>P3(n,o).map(r=>()=>qf(e,r)),G3=(e,n,o,r)=>{const c=e.getBody(),l=Ye(Xd,e);e.undoManager.ignore(()=>{e.selection.setRng(W3(o,r)),Xv(e),lu(l,c,fe.fromRangeStart(e.selection.getRng())).map(F3).bind(py(e,n)).each(_c)}),e.nodeChanged()},L6=(e,n)=>{const o=Vu(n,e);return o||e},I6=(e,n,o,r)=>{const c=L6(e.getBody(),r.container()),l=Ye(Xd,e),d=lu(l,c,r);return d.bind(p=>o?p.fold(Ie(D.some(F3(p))),D.none,Ie(D.some(iy(p))),D.none):p.fold(D.none,Ie(D.some(iy(p))),D.none,Ie(D.some(F3(p))))).map(py(e,n)).getOrThunk(()=>{const p=vf(o,c,r),y=p.bind(E=>lu(l,c,E));return Ls(d,y,()=>bs(l,c,r).bind(E=>j3(E)?D.some(()=>{Df(e,o,U.fromDom(E))}):D.none())).getOrThunk(()=>y.bind(()=>p.map(E=>()=>{o?G3(e,n,r,E):G3(e,n,E,r)})))})},q3=(e,n,o)=>{if(e.selection.isCollapsed()&&t1(e)){const r=fe.fromRangeStart(e.selection.getRng());return I6(e,n,o,r)}return D.none()},k0=e=>Du(e)>1,T0=(e,n)=>{const o=U.fromDom(e.getBody()),r=U.fromDom(e.selection.getStart()),c=Gu(r,o);return Ns(c,n).fold(Ie(c),l=>c.slice(0,l))},F6=e=>Du(e)===1,$6=e=>T0(e,n=>e.schema.isBlock(Ft(n))||k0(n)),H6=e=>T0(e,n=>e.schema.isBlock(Ft(n))),K3=(e,n)=>{const o=Ye(t4,e);return is(n,r=>o(r)?[r.dom]:[])},_0=e=>{const n=H6(e);return K3(e,n)},Y3=(e,n,o,r)=>{const c=K3(n,r);if(c.length===0)Df(n,e,o);else{const l=S2(o.dom,c);n.selection.setRng(l.toRange())}},A0=(e,n)=>{const o=vt($6(e),F6);return Ks(o).bind(r=>{const c=fe.fromRangeStart(e.selection.getRng());return hc(n,c,r.dom)&&!g1(r)?D.some(()=>Y3(n,e,r,o)):D.none()})},B9=(e,n)=>{const o=n.parentElement;return An(n)&&!q(o)&&e.dom.isEmpty(o)},V6=e=>g1(U.fromDom(e)),z6=(e,n)=>{const o=e.selection.getStart(),r=B9(e,o)||V6(o)?S2(o,n):RO(e.selection.getRng(),n);e.selection.setRng(r.toRange())},L9=(e,n)=>{const o=Lr(n,_0(e));o.length>0&&z6(e,o)},X3=e=>Te(e.startContainer),I9=e=>e.startOffset===0&&X3(e),U6=(e,n)=>{const o=n.startContainer.parentElement;return!q(o)&&t4(e,U.fromDom(o))},jG=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!q(n)&&!q(o)&&n.isEqualNode(o)},F9=e=>{const n=e.endContainer;return e.endOffset===(Te(n)?n.length:n.childNodes.length)},$9=e=>jG(e)&&F9(e),H9=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),V9=e=>$9(e)||H9(e),z9=e=>{const n=e.selection.getRng();return I9(n)&&U6(e,n)&&V9(n)},U9=e=>{if(z9(e)){const n=_0(e);return D.some(()=>{Xv(e),L9(e,n)})}else return D.none()},J3=(e,n)=>e.selection.isCollapsed()?A0(e,n):U9(e),Z9=(e,n)=>iS(e,o=>mc(o.dom),o=>n.isBlock(Ft(o))),Z6=e=>Z9(U.fromDom(e.selection.getStart()),e.schema),W9=e=>{const n=e.selection.getRng();return n.collapsed&&(X3(n)||e.dom.isEmpty(n.startContainer))&&!Z6(e)},Ni=e=>(W9(e)&&z6(e,[]),!0),by=(e,n,o)=>Ae(o)?D.some(()=>{e._selectionOverrides.hideFakeCaret(),Df(e,n,U.fromDom(o))}):D.none(),Q3=(e,n)=>{const o=n?Af:D1,r=n?sr.Forwards:sr.Backwards,c=i1(r,e.getBody(),e.selection.getRng());return o(c)?by(e,n,c.getNode(!n)):D.from(zc(n,c)).filter(l=>o(l)&&yv(c,l)).bind(l=>by(e,n,l.getNode(!n)))},W6=(e,n)=>{const o=e.selection.getNode();return er(o)?by(e,n,o):D.none()},O0=(e,n)=>e.selection.isCollapsed()?Q3(e,n):W6(e,n),dm=e=>Oo(e,n=>ve(n.dom)||Tn(n.dom)).exists(n=>ve(n.dom)),vy=e=>fd(e??"").getOr(0),yc=(e,n)=>{const o=e||LP(n)?"margin":"padding",r=ts(n,"direction")==="rtl"?"-right":"-left";return o+r},Kf=(e,n,o,r,c,l)=>{const d=yc(o,U.fromDom(l)),g=vy(e.getStyle(l,d));if(n==="outdent"){const p=Math.max(0,g-r);e.setStyle(l,d,p?p+c:"")}else{const p=g+r+c;e.setStyle(l,d,p)}},eE=(e,n)=>_o(n,o=>{const r=yc(e1(e),o),c=Tg(o,r).map(vy).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),j6=e=>{const n=G6(e);return!e.mode.isReadOnly()&&(n.length>1||eE(e,n))},tE=e=>AS(e)||of(e),j9=e=>Fr(e).exists(tE),G6=e=>vt(Ag(e.selection.getSelectedBlocks()),n=>!tE(n)&&!j9(n)&&dm(n)),q6=(e,n)=>{var o,r;if(e.mode.isReadOnly())return;const{dom:c}=e,l=EB(e),d=(r=(o=/[a-z%]+$/i.exec(l))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",g=vy(l),p=e1(e);oe(G6(e),y=>{Kf(c,n,p,g,d,y.dom)})},G9=e=>q6(e,"indent"),K6=e=>q6(e,"outdent"),nE=e=>{if(e.selection.isCollapsed()&&j6(e)){const n=e.dom,o=e.selection.getRng(),r=fe.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&$5(U.fromDom(c),r,e.schema))return D.some(()=>K6(e))}return D.none()},Y6=(e,n,o)=>Ac([nE,ny,x3,(r,c)=>q3(r,n,c),Q2,d2,x0,O0,iu,J3,oy],r=>r(e,o)).filter(r=>e.selection.isEditable()),q9=(e,n)=>{Y6(e,n,!1).fold(()=>{e.selection.isEditable()&&(Xv(e),Qd(e))},_c)},Yh=(e,n)=>{Y6(e,n,!0).fold(()=>{e.selection.isEditable()&&go(e)},_c)},yy=(e,n)=>{e.addCommand("delete",()=>{q9(e,n)}),e.addCommand("forwardDelete",()=>{Yh(e,n)})},oE=5,X6=400,Cy=e=>e.touches===void 0||e.touches.length!==1?D.none():D.some(e.touches[0]),K9=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>oE||r>oE},Y9=e=>{const n=Vr(),o=mo(!1),r=Hb(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},X6);e.on("touchstart",c=>{Cy(c).each(l=>{r.cancel();const d={x:l.clientX,y:l.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(d)})},!0),e.on("touchmove",c=>{r.cancel(),Cy(c).each(l=>{n.on(d=>{K9(l,d)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(l=>l.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},sE=(e,n)=>ht(e,n.nodeName),X9=(e,n)=>Te(n)?!0:Ze(n)?!sE(e.getBlockElements(),n)&&!Ia(n)&&!Zm(e,n)&&!gS(n):!1,J9=(e,n,o)=>kn(PI(U.fromDom(o),U.fromDom(n)),r=>sE(e,r.dom)),Q9=(e,n)=>{if(Te(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||sE(e,n.nextSibling)||gS(n.nextSibling)}return!1},rE=e=>e.dom.create(or(e),Jl(e)),J6=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),l=o.getStart(),d=e.getBody();let g,p,y=null;const E=or(e);if(!l||!Ze(l))return;const T=d.nodeName.toLowerCase();if(!r.isValidChild(T,E.toLowerCase())||J9(c,d,l))return;if(d.firstChild===d.lastChild&&An(d.firstChild)){g=rE(e),g.appendChild(ul().dom),d.replaceChild(g,d.firstChild),e.selection.setCursorLocation(g,0),e.nodeChanged();return}let _=d.firstChild;for(;_;)if(Ze(_)&&lP(r,_),X9(r,_)){if(Q9(c,_)){p=_,_=_.nextSibling,n.remove(p);continue}if(!g){if(!y&&e.hasFocus()&&(y=M3(e.selection.getRng(),()=>document.createElement("span"))),!_.parentNode){_=null;break}g=rE(e),d.insertBefore(g,_)}p=_,_=_.nextSibling,g.appendChild(p)}else g=null,_=_.nextSibling;y&&(e.selection.setRng(R3(y)),e.nodeChanged())},Q6=(e,n,o)=>{const r=U.fromDom(rE(e)),c=ul();qo(r,c),o(n,r);const l=document.createRange();return l.setStartBefore(c.dom),l.setEndBefore(c.dom),l},eV=e=>{e.on("NodeChange",()=>J6(e))},za=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,tV=(e,n,o)=>function(r){const c=arguments,l=c[c.length-2],d=l>0?n.charAt(l-1):"";if(d==='"')return r;if(d===">"){const g=n.lastIndexOf("<",l);if(g!==-1&&n.substring(g,l).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},aE=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],tV(e,c,F_(e)));o.content=c}},eR=(e,n)=>_o(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),cE=e=>{const n="contenteditable",o=" "+Ee.trim(KB(e))+" ",r=" "+Ee.trim(F_(e))+" ",c=za(o),l=za(r),d=YB(e);d.length>0&&e.on("BeforeSetContent",g=>{aE(e,d,g)}),e.parser.addAttributeFilter("class",g=>{let p=g.length;for(;p--;){const y=g[p];c(y)?y.attr(n,"true"):l(y)&&y.attr(n,"false")}}),e.serializer.addAttributeFilter(n,g=>{let p=g.length;for(;p--;){const y=g[p];if(!c(y)&&!l(y))continue;const E=y.attr("data-mce-content");d.length>0&&E?eR(d,E)?(y.name="#text",y.type=3,y.raw=!0,y.value=E):y.remove():y.attr(n,null)}})},nV=e=>ws(U.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),tR=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Gp(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},nR=(e,n)=>{const o=nV(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),tR(e,o);return}UT(o)&&(tR(e,o),e.undoManager.add())}},oV=e=>{e.on("keyup compositionstart",Ye(nR,e))},oR=Tn,sV=(e,n,o)=>D6(n,e,o,Kd,Yd,oR),sR=(e,n,o)=>um(n,e,o,l=>Kd(l)||I5(l),l=>Yd(l)||uw(l),oR),rV=e=>{const n=e.dom.create(or(e));return n.innerHTML='<br data-mce-bogus="1">',n},rR=(e,n,o)=>{const r=uc(e.getBody()),c=Ye(xx,n===1?r.next:r.prev);if(o.collapsed){const l=e.dom.getParent(o.startContainer,"PRE");if(!l)return;if(!c(fe.fromRangeStart(o))){const g=U.fromDom(rV(e));n===1?di(U.fromDom(l),g):ta(U.fromDom(l),g),e.selection.select(g.dom,!0),e.selection.collapse()}}},D0=(e,n)=>{const o=n?sr.Forwards:sr.Backwards,r=e.selection.getRng();return sV(o,e,r).orThunk(()=>(rR(e,o,r),D.none()))},nd=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return sR(o,e,r).orThunk(()=>(rR(e,o,r),D.none()))},Yf=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return ww(o)?!n:n},M0=(e,n)=>D0(e,Yf(e.selection,n)).exists(o=>(Sr(e,o),!0)),Sy=(e,n)=>nd(e,n).exists(o=>(Sr(e,o),!0)),xy=(e,n)=>M6(e,n,n?Yd:Kd),R0=(e,n)=>w3(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(Sr(e,o),!0)),aV=e=>kt(["figcaption"],Ft(e)),aR=(e,n,o)=>{const r=Ye(xn,n);return Oo(U.fromDom(e.container()),c=>o.isBlock(Ft(c)),r).filter(aV)},cR=(e,n,o)=>n?Yc(e.dom,o):S9(e.dom,o),cV=(e,n)=>{const o=U.fromDom(e.getBody()),r=fe.fromRangeStart(e.selection.getRng());return aR(r,o,e.schema).exists(()=>{if(cR(o,n,r)){const l=Q6(e,o,n?qo:_g);return e.selection.setRng(l),!0}else return!1})},iR=(e,n)=>e.selection.isCollapsed()?cV(e,n):!1,iV=(e,n,o)=>{const r=e.selection.getRng(),c=fe.fromRangeStart(r);return e.getBody().firstChild===n&&S9(o,c)?(e.execCommand("InsertNewBlockBefore"),!0):!1},lV=(e,n)=>{const o=e.selection.getRng(),r=fe.fromRangeStart(o);return e.getBody().lastChild===n&&Yc(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},uV=(e,n)=>n?D.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>lV(e,o)).getOr(!1):D.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>D.from(e.dom.getParent(o,"details")).map(r=>iV(e,r,o))).getOr(!1),lR=(e,n)=>uV(e,n),iE={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},uR=e=>Dt(e,n=>({...iE,...n})),GG=e=>Dt(e,n=>({...iE,...n})),dV=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,qG=(e,n)=>is(uR(e),o=>dV(o,n)?[o]:[]),mV=(e,n)=>is(GG(e),o=>dV(o,n)?[o]:[]),Mt=(e,...n)=>()=>e.apply(null,n),wy=(e,n)=>ro(qG(e,n),o=>o.action()),dR=(e,n)=>Ac(mV(e,n),o=>o.action()),mR=(e,n)=>{const o=n?sr.Forwards:sr.Backwards,r=e.selection.getRng();return D6(e,o,r,Af,D1,er).exists(c=>(Sr(e,c),!0))},fV=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return um(e,o,r,Af,D1,er).exists(c=>(Sr(e,c),!0))},fR=(e,n)=>M6(e,n,n?D1:Af),ia=Ci.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),od={...ia,none:e=>ia.none(e)},hV=(e,n)=>lE(e,n,Ue),lE=(e,n,o)=>is(Js(e),r=>oc(r,n)?o(r)?[r]:[]:lE(r,n,o)),gR=(e,n,o=we)=>{if(o(n))return D.none();if(kt(e,Ft(n)))return D.some(n);const r=c=>oc(c,"table")||o(c);return Fm(n,e.join(","),r)},hR=(e,n)=>gR(["td","th"],e,n),uE=e=>hV(e,"th,td"),dE=(e,n)=>at(e,"table",n),mE=(e,n,o,r,c=Ue)=>{const l=r===1;if(!l&&o<=0)return od.first(e[0]);if(l&&o>=e.length-1)return od.last(e[e.length-1]);{const d=o+r,g=e[d];return c(g)?od.middle(n,g):mE(e,n,d,r,c)}},fE=(e,n)=>dE(e,n).bind(o=>{const r=uE(o);return Ns(r,l=>xn(e,l)).map(l=>({index:l,all:r}))}),pV=(e,n,o)=>fE(e,o).fold(()=>od.none(e),c=>mE(c.all,e,c.index,1,n)),bV=(e,n,o)=>fE(e,o).fold(()=>od.none(),c=>mE(c.all,e,c.index,-1,n)),vV=e=>HT(e).filter(n=>n.trim().length!==0||n.indexOf(ks)>-1).isSome(),gE=e=>Nm(e)&&ea(e,"contenteditable")==="false",yV=["img","br"],CV=e=>vV(e)||kt(yV,Ft(e))||gE(e),KG=e=>Im(e,CV),SV=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),pR=(e,n)=>is(n,o=>{const r=SV(Hd(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),YG=(e,n,o)=>cs(e,(r,c)=>r.fold(()=>D.some(c),l=>{const d=Math.sqrt(Math.abs(l.x-n)+Math.abs(l.y-o)),g=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return D.some(g<d?c:l)}),D.none()),bR=(e,n,o,r,c)=>{const l=$r(U.fromDom(o),"td,th,caption").map(g=>g.dom),d=vt(pR(e,l),g=>n(g,c));return YG(d,r,c).map(g=>g.cell)},xV=e=>e.bottom,wV=e=>e.top,hE=(e,n)=>e.y<n,Ey=(e,n)=>e.y>n,vR=Ye(bR,xV,hE),yR=Ye(bR,wV,Ey),EV=(e,n)=>Qo(n.getClientRects()).bind(o=>vR(e,o.left,o.top)).bind(o=>my(x6(o),n)),kV=(e,n)=>Ks(n.getClientRects()).bind(o=>yR(e,o.left,o.top)).bind(o=>my(H3(o),n)),pE=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),TV=e=>e.breakType===Kc.Wrap&&e.positions.length===0,_V=e=>e.breakType===Kc.Br&&e.positions.length===1,CR=(e,n,o)=>{const r=e(n,o);return TV(r)||!An(o.getNode())&&_V(r)?!pE(e,n,r):r.breakAt.isNone()},AV=Ye(CR,w0),Pi=Ye(CR,E0),SR=(e,n,o)=>{const r=fe.fromRangeStart(n);return yf(!e,o).exists(c=>c.isEqual(r))},xR=(e,n,o,r)=>{const c=e.selection.getRng(),l=n?1:-1;return bx()&&SR(n,c,o)?(Cr(l,e,o,!n,!1).each(d=>{Sr(e,d)}),!0):!1},XG=(e,n,o)=>EV(n,o).orThunk(()=>Qo(o.getClientRects()).bind(r=>$3(C6(e,fe.before(n)),r.left))).getOr(fe.before(n)),JG=(e,n,o)=>kV(n,o).orThunk(()=>Qo(o.getClientRects()).bind(r=>$3(S6(e,fe.after(n)),r.left))).getOr(fe.after(n)),OV=(e,n)=>{const o=n.getNode(e);return sl(o)?D.some(o):D.none()},QG=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?di:ta,c=Q6(n,U.fromDom(o),r);Sr(n,c)})},wR=(e,n,o)=>{const r=OV(!!n,o),c=n===!1;r.fold(()=>Sr(e,o.toRange()),l=>yf(c,e.getBody()).filter(d=>d.isEqual(o)).fold(()=>Sr(e,o.toRange()),d=>QG(n,e,l)))},ky=(e,n,o,r)=>{const c=e.selection.getRng(),l=fe.fromRangeStart(c),d=e.getBody();if(!n&&AV(r,l)){const g=XG(d,o,l);return wR(e,n,g),!0}else if(n&&Pi(r,l)){const g=JG(d,o,l);return wR(e,n,g),!0}else return!1},ER=(e,n,o)=>D.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>D.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),Ty=(e,n)=>ER(e,n,xR),_y=(e,n)=>ER(e,n,ky),kR=e=>{const n=gh.exact(e,0,e,0);return cI(n)},bE=(e,n,o)=>o.fold(D.none,D.none,(r,c)=>KG(c).map(l=>kR(l)),r=>e.mode.isReadOnly()?D.none():(e.execCommand("mceTableInsertRowAfter"),TR(e,n,r))),TR=(e,n,o)=>bE(e,n,pV(o,Mu)),DV=(e,n,o)=>bE(e,n,bV(o,Mu)),_R=(e,n)=>{const o=["table","li","dl"],r=U.fromDom(e.getBody()),c=g=>{const p=Ft(g);return xn(g,r)||kt(o,p)},l=e.selection.getRng(),d=U.fromDom(n?l.endContainer:l.startContainer);return hR(d,c).map(g=>(dE(g,c).each(E=>{e.model.table.clearSelectedCells(E.dom)}),e.selection.collapse(!n),(n?TR:DV)(e,c,g).each(E=>{e.selection.setRng(E)}),!0)).getOr(!1)},MV=(e,n,o)=>{const r=Tt.os.isMacOS()||Tt.os.isiOS();wy([{keyCode:Qe.RIGHT,action:Mt(M0,e,!0)},{keyCode:Qe.LEFT,action:Mt(M0,e,!1)},{keyCode:Qe.UP,action:Mt(Sy,e,!1)},{keyCode:Qe.DOWN,action:Mt(Sy,e,!0)},...r?[{keyCode:Qe.UP,action:Mt(R0,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Qe.DOWN,action:Mt(R0,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Qe.RIGHT,action:Mt(Ty,e,!0)},{keyCode:Qe.LEFT,action:Mt(Ty,e,!1)},{keyCode:Qe.UP,action:Mt(_y,e,!1)},{keyCode:Qe.DOWN,action:Mt(_y,e,!0)},{keyCode:Qe.UP,action:Mt(_y,e,!1)},{keyCode:Qe.UP,action:Mt(lR,e,!1)},{keyCode:Qe.DOWN,action:Mt(lR,e,!0)},{keyCode:Qe.RIGHT,action:Mt(mR,e,!0)},{keyCode:Qe.LEFT,action:Mt(mR,e,!1)},{keyCode:Qe.UP,action:Mt(fV,e,!1)},{keyCode:Qe.DOWN,action:Mt(fV,e,!0)},{keyCode:Qe.RIGHT,action:Mt(gy,e,n,!0)},{keyCode:Qe.LEFT,action:Mt(gy,e,n,!1)},{keyCode:Qe.RIGHT,ctrlKey:!r,altKey:r,action:Mt(N9,e,n)},{keyCode:Qe.LEFT,ctrlKey:!r,altKey:r,action:Mt(P9,e,n)},{keyCode:Qe.UP,action:Mt(iR,e,!1)},{keyCode:Qe.DOWN,action:Mt(iR,e,!0)}],o).each(c=>{o.preventDefault()})},Ay=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||MV(e,n,o)})},vl=(e,n)=>({container:e,offset:n}),Oy=Jn.DOM,Dy=e=>n=>e===n?-1:0,vE=e=>n=>e.isBlock(n)||kt(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",yE=(e,n,o)=>{if(Te(e)&&n>=0)return D.some(vl(e,n));{const r=tf(Oy);return D.from(r.backwards(e,n,Dy(e),o)).map(c=>vl(c.container,c.container.data.length))}},RV=(e,n,o)=>{if(Te(e)&&n>=e.length)return D.some(vl(e,n));{const r=tf(Oy);return D.from(r.forwards(e,n,Dy(e),o)).map(c=>vl(c.container,0))}},My=(e,n,o)=>{if(!Te(e))return D.none();const r=e.data;if(n>=0&&n<=r.length)return D.some(vl(e,n));{const c=tf(Oy);return D.from(c.backwards(e,n,Dy(e),o)).bind(l=>{const d=l.container.data;return My(l.container,n+d.length,o)})}},AR=(e,n,o)=>{if(!Te(e))return D.none();const r=e.data;if(n<=r.length)return D.some(vl(e,n));{const c=tf(Oy);return D.from(c.forwards(e,n,Dy(e),o)).bind(l=>AR(l.container,n-r.length,o))}},CE=(e,n,o,r,c)=>{const l=tf(e,vE(e));return D.from(l.backwards(n,o,r,c))},NV=e=>e.collapsed&&Te(e.startContainer),PV=e=>ic(e.toString().replace(/\u00A0/g," ")),OR=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,BV=(e,n)=>e.substring(n.length),SE=(e,n,o,r=!1)=>{let c;const l=o.charAt(0);for(c=n-1;c>=0;c--){const d=e.charAt(c);if(!r&&OR(d))return D.none();if(l===d&&jo(e,o,c,n))break}return D.some(c)},xE=(e,n,o,r=!1)=>{if(!NV(n))return D.none();const c={text:"",offset:0},l=(g,p,y)=>(c.text=y+c.text,c.offset+=p,SE(c.text,c.offset,o,r).getOr(p)),d=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return CE(e,n.startContainer,n.startOffset,l,d).bind(g=>{const p=n.cloneRange();if(p.setStart(g.container,g.offset),p.setEnd(n.endContainer,n.endOffset),p.collapsed)return D.none();const y=PV(p);return y.lastIndexOf(o)!==0?D.none():D.some({text:BV(y,o),range:p,trigger:o})})},DR=e=>e.nodeType===sb,LV=e=>e.nodeType===Xi,MR=e=>{if(DR(e))return vl(e,e.data.length);{const n=e.childNodes;return n.length>0?MR(n[n.length-1]):vl(e,n.length)}},RR=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?RR(o[n],0):o.length>0&&LV(e)&&o.length===n?MR(o[o.length-1]):vl(e,n)},IV=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return CE(e,n.container,n.offset,(c,l)=>l===0?-1:l,r).filter(c=>{const l=c.container.data.charAt(c.offset-1);return!OR(l)}).isSome()},FV=e=>n=>{const o=RR(n.startContainer,n.startOffset);return!IV(e,o)},$V=(e,n,o)=>Ac(o.triggers,r=>xE(e,n,r)),ys=(e,n)=>{const o=n(),r=e.selection.getRng();return $V(e.dom,r,o).bind(c=>NR(e,n,c))},NR=(e,n,o,r={})=>{var c;const l=n(),g=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",p=vt(l.lookupByTrigger(o.trigger),E=>o.text.length>=E.minChars&&E.matches.getOrThunk(()=>FV(e.dom))(o.range,g,o.text));if(p.length===0)return D.none();const y=Promise.all(Dt(p,E=>E.fetch(o.text,E.maxResults,r).then(_=>({matchText:o.text,items:_,columns:E.columns,onAction:E.onAction,highlightOn:E.highlightOn}))));return D.some({lookupData:y,context:o})};var Xc;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Xc||(Xc={}));const wE=(e,n,o)=>e.stype===Xc.Error?n(e.serror):o(e.svalue),PR=e=>{const n=[],o=[];return oe(e,r=>{wE(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},EE=(e,n)=>e.stype===Xc.Error?{stype:Xc.Error,serror:n(e.serror)}:e,BR=(e,n)=>e.stype===Xc.Value?{stype:Xc.Value,svalue:n(e.svalue)}:e,mm=(e,n)=>e.stype===Xc.Value?n(e.svalue):e,kE=(e,n)=>e.stype===Xc.Error?n(e.serror):e,TE=e=>({stype:Xc.Value,svalue:e}),Ry=e=>({stype:Xc.Error,serror:e}),rr={fromResult:e=>e.fold(Ry,TE),toResult:e=>wE(e,fs.error,fs.value),svalue:TE,partition:PR,serror:Ry,bind:mm,bindError:kE,map:BR,mapError:EE,fold:wE},Xh=e=>Ot(e)&&Wo(e).length>100?" removed due to size":JSON.stringify(e,null,2),Ny=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Ie("... (only showing first ten failures)")}]):e;return Dt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},fm=(e,n)=>rr.serror([{path:e,getErrorInfo:n}]),N0=(e,n,o)=>fm(e,()=>'Could not find valid *required* value for "'+n+'" in '+Xh(o)),Bi=(e,n)=>fm(e,()=>'Choice schema did not contain choice key: "'+n+'"'),P0=(e,n,o)=>fm(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+Xh(n)),FR=(e,n)=>fm(e,Ie(n)),$R=(e,n,o,r)=>Bn(o,r).fold(()=>P0(e,o,r),l=>l.extract(e.concat(["branch: "+r]),n)),HV=(e,n)=>({extract:(c,l)=>Bn(l,e).fold(()=>Bi(c,e),g=>$R(c,l,n,g)),toString:()=>"chooseOn("+e+"). Possible values: "+Wo(n)}),HR=(e,n)=>n,VV=(e,n)=>la(e)&&la(n)?gm(e,n):n,VR=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const l in c)ht(c,l)&&(o[l]=e(o[l],c[l]))}return o},gm=VR(VV),zR=VR(HR),_E=()=>({tag:"required",process:{}}),zV=e=>({tag:"defaultedThunk",process:e}),UR=e=>zV(Ie(e)),UV=()=>({tag:"option",process:{}}),ZV=(e,n)=>e.length>0?rr.svalue(gm(n,zR.apply(void 0,e))):rr.svalue(n),ZR=e=>S(rr.serror,si)(e),WR={consolidateObj:(e,n)=>{const o=rr.partition(e);return o.errors.length>0?ZR(o.errors):ZV(o.values,n)},consolidateArr:e=>{const n=rr.partition(e);return n.errors.length>0?ZR(n.errors):rr.svalue(n.values)}},WV=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),jV=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),jR=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},AE=e=>{const n=(r,c)=>rr.bindError(e(c),l=>FR(r,l)),o=Ie("val");return{extract:n,toString:o}},GR=AE(rr.svalue),qR=(e,n,o,r)=>Bn(n,o).fold(()=>N0(e,o,n),r),OE=(e,n,o,r)=>{const c=Bn(e,n).getOrThunk(()=>o(e));return r(c)},GV=(e,n,o)=>o(Bn(e,n)),qV=(e,n,o,r)=>{const c=Bn(e,n).map(l=>l===!0?o(e):l);return r(c)},KV=(e,n,o,r,c)=>{const l=g=>c.extract(n.concat([r]),g),d=g=>g.fold(()=>rr.svalue(D.none()),p=>{const y=c.extract(n.concat([r]),p);return rr.map(y,D.some)});switch(e.tag){case"required":return qR(n,o,r,l);case"defaultedThunk":return OE(o,r,e.process,l);case"option":return GV(o,r,d);case"defaultedOptionThunk":return qV(o,r,e.process,d);case"mergeWithThunk":return OE(o,r,Ie({}),g=>{const p=gm(e.process(o),g);return l(p)})}},YV=(e,n,o)=>{const r={},c=[];for(const l of o)jR(l,(d,g,p,y)=>{const E=KV(p,e,n,d,y);rr.fold(E,T=>{c.push(...T)},T=>{r[g]=T})},(d,g)=>{r[d]=g(n)});return c.length>0?rr.serror(c):rr.svalue(r)},B0=e=>({extract:(r,c)=>YV(r,c,e),toString:()=>`obj{
`+Dt(e,c=>jR(c,(l,d,g,p)=>l+" -> "+p.toString(),(l,d)=>"state("+l+")")).join(`
`)+"}"}),DE=e=>({extract:(r,c)=>{const l=Dt(c,(d,g)=>e.extract(r.concat(["["+g+"]"]),d));return WR.consolidateArr(l)},toString:()=>"array("+e.toString()+")"}),KR=(e,n)=>{const o=Yn;return{extract:(l,d)=>{const g=[];for(const p of e){const y=p.extract(l,d);if(y.stype===Xc.Value)return{stype:Xc.Value,svalue:o(y.svalue)};g.push(y)}return WR.consolidateArr(g)},toString:()=>"oneOf("+Dt(e,l=>l.toString()).join(", ")+")"}},XV=S(DE,B0),YR=e=>AE(n=>e(n).fold(rr.serror,rr.svalue)),XR=(e,n,o)=>{const r=n.extract([e],o);return rr.mapError(r,c=>({input:o,errors:c}))},JV=(e,n,o)=>rr.toResult(XR(e,n,o)),QV=e=>`Errors: 
`+Ny(e.errors).join(`
`)+`

Input object: `+Xh(e.input),ME=(e,n)=>HV(e,sn(n,B0)),ez=Ie(GR),L0=(e,n)=>AE(o=>{const r=typeof o;return e(o)?rr.svalue(o):rr.serror(`Expected type: ${n} but got: ${r}`)}),tz=L0(Po,"number"),Jh=L0(re,"string"),JR=L0($t,"boolean"),RE=L0(Ht,"function"),Qh=WV,NE=jV,QR=e=>YR(n=>kt(e,n)?fs.value(n):fs.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),PE=(e,n)=>Qh(e,e,_E(),n),eN=e=>PE(e,Jh),Py=(e,n)=>Qh(e,e,_E(),QR(n)),BE=e=>PE(e,RE),tN=(e,n)=>Qh(e,e,_E(),DE(n)),LE=(e,n)=>Qh(e,e,UV(),n),Xf=e=>LE(e,Jh),nz=e=>LE(e,RE),oz=(e,n)=>Qh(e,e,UR(n),ez()),ep=(e,n,o)=>Qh(e,e,UR(n),o),nN=(e,n)=>ep(e,n,tz),By=(e,n)=>ep(e,n,Jh),sz=(e,n,o)=>ep(e,n,QR(o)),IE=(e,n)=>ep(e,n,JR),Li=(e,n)=>ep(e,n,RE),oN=(e,n,o)=>ep(e,n,DE(o)),sN=eN("type"),rz=BE("fetch"),Ly=BE("onAction"),rN=Li("onSetup",()=>nt),az=Xf("text"),cz=Xf("icon"),iz=Xf("tooltip"),aN=Xf("label"),lz=IE("active",!1),FE=IE("enabled",!0),cN=IE("primary",!1),uz=e=>oz("columns",e),I0=e=>By("type",e),iN=B0([sN,eN("trigger"),nN("minChars",1),uz(1),nN("maxResults",10),nz("matches"),rz,Ly,oN("highlightOn",[],Jh)]),dz=e=>JV("Autocompleter",iN,e),$E=[FE,iz,cz,az,rN,By("context","mode:design")],lN=[lz].concat($E),Iy=[Li("predicate",we),sz("scope","node",["node","editor"]),sz("position","selection",["node","selection","line"])],mz=$E.concat([I0("contextformbutton"),By("align","end"),cN,Ly,NE("original",Yn)]),As=lN.concat([I0("contextformbutton"),By("align","end"),cN,Ly,NE("original",Yn)]),uu=$E.concat([I0("contextformbutton")]),fz=lN.concat([I0("contextformtogglebutton")]),nq=ME("type",{contextformbutton:mz,contextformtogglebutton:As}),HE=[aN,tN("commands",nq),LE("launch",ME("type",{contextformbutton:uu,contextformtogglebutton:fz})),Li("onInput",nt),Li("onSetup",nt)],gz=[...Iy,...HE,Py("type",["contextform"]),Li("initValue",Ie("")),Xf("placeholder")],hz=[...Iy,...HE,Py("type",["contextsliderform"]),Li("initValue",Ie(0)),Li("min",Ie(0)),Li("max",Ie(100))],pz=[...Iy,...HE,Py("type",["contextsizeinputform"]),Li("initValue",Ie({width:"",height:""}))];ME("type",{contextform:gz,contextsliderform:hz,contextsizeinputform:pz}),B0([I0("contexttoolbar"),PE("items",KR([Jh,XV([Xf("name"),Xf("label"),tN("items",Jh)])]))].concat(Iy));const uN=e=>{const n=e.ui.registry.getAll().popups,o=sn(n,d=>dz(d).fold(g=>{throw new Error(QV(g))},Yn)),r=yu(Da(o,d=>d.trigger)),c=vu(o);return{dataset:o,triggers:r,lookupByTrigger:d=>vt(c,g=>g.trigger===d)}},tp=(e,n)=>{const o=Hb(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27?(o.cancel(),n.cancelIfNecessary()):(c===38||c===40)&&o.cancel()},!0),e.on("remove",o.cancel)},oq=e=>{const n=Vr(),o=mo(!1),r=n.isSet,c=()=>{r()&&(gs(e),o.set(!1),n.clear())},l=T=>{r()||n.set({trigger:T.trigger,matchLength:T.text.length})},d=Ys(()=>uN(e)),g=T=>n.get().map(_=>xE(e.dom,e.selection.getRng(),_.trigger,!0).bind(R=>NR(e,d,R,T))).getOrThunk(()=>ys(e,d)),p=T=>{g(T).fold(c,_=>{l(_.context),_.lookupData.then(R=>{n.get().map(B=>{const P=_.context;B.trigger===P.trigger&&(n.set({...B,matchLength:P.text.length}),o.get()?(qS(e,{range:P.range}),gB(e,{lookupData:R})):(o.set(!0),qS(e,{range:P.range}),C_(e,{lookupData:R})))})})})},y=(T,_)=>{const R=T.compareBoundaryPoints(window.Range.START_TO_START,_),B=T.compareBoundaryPoints(window.Range.END_TO_END,_);return R>=0&&B<=0},E=()=>n.get().bind(({trigger:T})=>{const _=e.selection.getRng();return xE(e.dom,_,T,o.get()).filter(({range:R})=>y(_,R)).map(({range:R})=>R)});e.addCommand("mceAutocompleterReload",(T,_)=>{const R=Ot(_)?_.fetchOptions:{};p(R)}),e.addCommand("mceAutocompleterClose",c),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{E().each(T=>{qS(e,{range:T})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>E().isSome()),tp(e,{cancelIfNecessary:c,load:p})},bz=M().browser.isSafari(),Ii=e=>ql(U.fromDom(e)),dN=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},Fy=(e,n)=>D.from(e.getParent(n.container(),"details")),VE=(e,n)=>Fy(e,n).isSome(),vz=(e,n)=>{const o=D.from(e.getParent(n.startContainer,"details")),r=D.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(l=>D.from(e.select("summary",l)[0]));return D.some({startSummary:c,startDetails:o,endDetails:r})}else return D.none()},zE=(e,n)=>Mr(n).exists(o=>o.isEqual(e)),du=(e,n)=>xi(n).exists(o=>An(o.getNode())&&qr(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),mN=(e,n)=>n.startSummary.exists(o=>zE(e,o)),fN=(e,n)=>n.startSummary.exists(o=>du(e,o)),yz=(e,n)=>n.startDetails.exists(o=>qr(o,e).forall(r=>n.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),$y=(e,n,o)=>o.startDetails.exists(r=>Gr(e,n).forall(c=>!r.contains(c.container()))),Hy=(e,n)=>{const o=n.getNode();uo(o)||e.selection.setCursorLocation(o,n.offset())},UE=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const c=e.dom.select("summary",r)[0];c&&(o?Mr(c):xi(c)).each(d=>Hy(e,d))}else Hy(e,n)},gN=(e,n)=>{const o=p=>p.contains(e.startContainer),r=p=>p.contains(e.endContainer),c=n.startSummary.exists(o),l=n.startSummary.exists(r),d=n.startDetails.forall(p=>n.endDetails.forall(y=>p!==y));return(c||l)&&!(c&&l)||d},hN=(e,n,o)=>{const{dom:r,selection:c}=e,l=e.getBody();if(o==="character"){const d=fe.fromRangeStart(c.getRng()),g=r.getParent(d.container(),r.isBlock),p=Fy(r,d),y=g&&r.isEmpty(g),E=q(g==null?void 0:g.previousSibling),T=q(g==null?void 0:g.nextSibling);return y&&(n?T:E)&&vf(!n,l,d).exists(B=>VE(r,B)&&!Fo(p,Fy(r,B)))?!0:vf(n,l,d).fold(we,_=>{const R=Fy(r,_);if(VE(r,_)&&!Fo(p,R)){if(n||UE(e,_,!1),g&&y){if(n&&E)return!0;if(!n&&T)return!0;UE(e,_,n),e.dom.remove(g)}return!0}else return!1})}else return!1},Cz=(e,n,o,r)=>{const l=e.selection.getRng(),d=fe.fromRangeStart(l),g=e.getBody();return r==="selection"?gN(l,n):o?fN(d,n)||$y(g,d,n):mN(d,n)||yz(d,n)},Sz=(e,n,o)=>vz(e.dom,e.selection.getRng()).fold(()=>hN(e,n,o),r=>Cz(e,r,n,o)||hN(e,n,o)),xz=(e,n,o)=>{const r=e.selection,c=r.getNode(),l=r.getRng(),d=fe.fromRangeStart(l);return Md(c)?(o==="selection"&&dN(l,c)||hc(n,d,c)?Ii(c):e.undoManager.transact(()=>{const g=r.getSel();let{anchorNode:p,anchorOffset:y,focusNode:E,focusOffset:T}=g??{};const _=()=>{Ae(p)&&Ae(y)&&Ae(E)&&Ae(T)&&(g==null||g.setBaseAndExtent(p,y,E,T))},R=()=>{p=g==null?void 0:g.anchorNode,y=g==null?void 0:g.anchorOffset,E=g==null?void 0:g.focusNode,T=g==null?void 0:g.focusOffset},B=(I,Z)=>{oe(I.childNodes,Q=>{d1(Q)&&Z.appendChild(Q)})},P=e.dom.create("span",{"data-mce-bogus":"1"});B(c,P),c.appendChild(P),_(),(o==="word"||o==="line")&&(g==null||g.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&dN(r.getRng(),P)?Ii(c):(e.execCommand(n?"ForwardDelete":"Delete"),R(),B(P,c),_()),e.dom.remove(P)}),!0):!1},Jf=(e,n,o)=>Sz(e,n,o)||bz&&xz(e,n,o)?D.some(nt):D.none(),ZE=e=>(n,o,r={})=>{const c=n.getBody(),l={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:nt,inputType:o},d=AT(new InputEvent(e));return n.dispatch(e,{...d,...l,...r})},F0=ZE("input"),Vy=ZE("beforeinput"),pN=M(),bN=pN.os,vN=bN.isMacOS()||bN.isiOS(),yN=pN.browser.isFirefox(),Ez=(e,n,o)=>{const r=o.keyCode===Qe.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=e.selection.isCollapsed(),l=c?"character":"selection",d=g=>c?g?"word":"line":"selection";dR([{keyCode:Qe.BACKSPACE,action:Mt(nE,e)},{keyCode:Qe.BACKSPACE,action:Mt(ny,e,!1)},{keyCode:Qe.DELETE,action:Mt(ny,e,!0)},{keyCode:Qe.BACKSPACE,action:Mt(x3,e,!1)},{keyCode:Qe.DELETE,action:Mt(x3,e,!0)},{keyCode:Qe.BACKSPACE,action:Mt(q3,e,n,!1)},{keyCode:Qe.DELETE,action:Mt(q3,e,n,!0)},{keyCode:Qe.BACKSPACE,action:Mt(d2,e,!1)},{keyCode:Qe.DELETE,action:Mt(d2,e,!0)},{keyCode:Qe.BACKSPACE,action:Mt(Jf,e,!1,l)},{keyCode:Qe.DELETE,action:Mt(Jf,e,!0,l)},...vN?[{keyCode:Qe.BACKSPACE,altKey:!0,action:Mt(Jf,e,!1,d(!0))},{keyCode:Qe.DELETE,altKey:!0,action:Mt(Jf,e,!0,d(!0))},{keyCode:Qe.BACKSPACE,metaKey:!0,action:Mt(Jf,e,!1,d(!1))}]:[{keyCode:Qe.BACKSPACE,ctrlKey:!0,action:Mt(Jf,e,!1,d(!0))},{keyCode:Qe.DELETE,ctrlKey:!0,action:Mt(Jf,e,!0,d(!0))}],{keyCode:Qe.BACKSPACE,action:Mt(x0,e,!1)},{keyCode:Qe.DELETE,action:Mt(x0,e,!0)},{keyCode:Qe.BACKSPACE,action:Mt(O0,e,!1)},{keyCode:Qe.DELETE,action:Mt(O0,e,!0)},{keyCode:Qe.BACKSPACE,action:Mt(iu,e,!1)},{keyCode:Qe.DELETE,action:Mt(iu,e,!0)},{keyCode:Qe.BACKSPACE,action:Mt(Q2,e,!1)},{keyCode:Qe.DELETE,action:Mt(Q2,e,!0)},{keyCode:Qe.BACKSPACE,action:Mt(J3,e,!1)},{keyCode:Qe.DELETE,action:Mt(J3,e,!0)},{keyCode:Qe.BACKSPACE,action:Mt(oy,e,!1)},{keyCode:Qe.DELETE,action:Mt(oy,e,!0)}],o).filter(g=>e.selection.isEditable()).each(g=>{o.preventDefault(),Vy(e,r).isDefaultPrevented()||(g(),F0(e,r))})},kz=(e,n,o)=>wy([{keyCode:Qe.BACKSPACE,action:Mt(S0,e)},{keyCode:Qe.DELETE,action:Mt(S0,e)},...vN?[{keyCode:Qe.BACKSPACE,altKey:!0,action:Mt(Ni,e)},{keyCode:Qe.DELETE,altKey:!0,action:Mt(Ni,e)},...o?[{keyCode:yN?224:91,action:Mt(Ni,e)}]:[]]:[{keyCode:Qe.BACKSPACE,ctrlKey:!0,action:Mt(Ni,e)},{keyCode:Qe.DELETE,ctrlKey:!0,action:Mt(Ni,e)}]],n),rq=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===Qe.BACKSPACE,r.isDefaultPrevented()||Ez(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||kz(e,r,o),o=!1})},WE=e=>{for(;e;){if(Ze(e)||Te(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},np=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const l=WE(n.firstChild);l&&/^(UL|OL|DL)$/.test(l.nodeName)&&n.insertBefore(o.doc.createTextNode(ks),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const l=new Qs(n,n);let d=n,g;for(;g=l.current();){if(Te(g)){c.setStart(g,0),c.setEnd(g,0);break}if(r[g.nodeName.toLowerCase()]){c.setStartBefore(g),c.setEndBefore(g);break}d=g,g=l.next()}g||(c.setStart(d,0),c.setEnd(d,0))}else An(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),Ch(e,c)},$0=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";){if(e.getContentEditable(c)==="true"){r=c;break}c=c.parentNode}return c!==o?r:o},jE=e=>D.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),CN=e=>jE(e).fold(Ie(""),n=>n.nodeName.toUpperCase()),Tz=e=>jE(e).filter(n=>of(U.fromDom(n))).isSome(),zy=e=>{e.innerHTML='<br data-mce-bogus="1">'},_z=(e,n,o)=>{const r=e.dom;D.from(o.style).map(r.parseStyle).each(p=>{const E={...Pp(U.fromDom(n)),...p};r.setStyles(n,E)});const c=D.from(o.class).map(p=>p.split(/\s+/)),l=D.from(n.className).map(p=>vt(p.split(/\s+/),y=>y!==""));Ls(c,l,(p,y)=>{const E=vt(y,_=>!kt(p,_)),T=[...p,...E];r.setAttrib(n,"class",T.join(" "))});const d=["style","class"],g=Qa(o,(p,y)=>!kt(d,y));r.setAttribs(n,g)},H0=(e,n)=>{if(or(e).toLowerCase()===n.tagName.toLowerCase()){const r=Jl(e);_z(e,n,r)}},Az=(e,n,o,r,c=!0,l,d)=>{const g=e.dom,p=e.schema,y=or(e),E=o?o.nodeName.toUpperCase():"";let T=n;const _=p.getTextInlineElements();let R;l||E==="TABLE"||E==="HR"?R=g.create(l||y,d||{}):R=o.cloneNode(!1);let B=R;if(!c)g.setAttrib(R,"style",null),g.setAttrib(R,"class",null);else do if(_[T.nodeName]){if(mc(T)||Ia(T))continue;const P=T.cloneNode(!1);g.setAttrib(P,"id",""),R.hasChildNodes()?(P.appendChild(R.firstChild),R.appendChild(P)):(B=P,R.appendChild(P))}while((T=T.parentNode)&&T!==r);return H0(e,R),zy(B),R},Rr=(e,n)=>e.dom.getParent(n,dS),Oz=(e,n,o)=>{let r=n;for(;r&&r!==e&&q(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return dS(c);r=c}return!1},Dz=(e,n,o)=>!n&&o.nodeName.toLowerCase()===or(e)&&e.dom.isEmpty(o)&&Oz(e.getBody(),o,r=>ht(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),Mz=(e,n,o)=>{var r,c,l;const d=n(or(e)),g=Rr(e,o);g&&(e.dom.insertAfter(d,g),np(e,d),((l=(c=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||c===void 0?void 0:c.length)!==null&&l!==void 0?l:0)>1&&e.dom.remove(o))},Rz=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,Nz=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},SN=(e,n)=>{const o=e==null?void 0:e.parentNode;return Ae(o)&&o.nodeName===n},xN=e=>Ae(e)&&/^(OL|UL|LI)$/.test(e.nodeName),op=e=>Ae(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Pz=e=>xN(e)&&xN(e.parentNode),Uy=e=>{const n=e.parentNode;return op(n)?n:e},sp=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Ze(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},Zy=e=>cs(Da(Pp(U.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),Bz=(e,n,o,r,c)=>{const l=e.dom,d=e.selection.getRng(),g=o.parentNode;if(o===e.getBody()||!g)return;Pz(o)&&(c="LI");const p=op(r)?Zy(r):void 0;let y=op(r)&&p?n(c,{style:Zy(r)}):n(c);if(sp(o,r,!0)&&sp(o,r,!1))if(SN(o,"LI")){const E=Uy(o);l.insertAfter(y,E),Nz(o)?l.remove(E):l.remove(o)}else l.replace(y,o);else if(sp(o,r,!0))SN(o,"LI")?(l.insertAfter(y,Uy(o)),y.appendChild(l.doc.createTextNode(" ")),y.appendChild(o)):g.insertBefore(y,o),l.remove(r);else if(sp(o,r,!1))l.insertAfter(y,Uy(o)),l.remove(r);else{o=Uy(o);const E=d.cloneRange();E.setStartAfter(r),E.setEndAfter(o);const T=E.extractContents();if(c==="LI"&&Rz(T,"LI")){const _=vt(Dt(y.children,U.fromDom),wn(Sd("br")));y=T.firstChild,l.insertAfter(T,o),oe(_,R=>_g(U.fromDom(y),R)),p&&y.setAttribute("style",p)}else l.insertAfter(T,o),l.insertAfter(y,o);l.remove(r)}np(e,y)},aq=e=>{oe(cS(U.fromDom(e),Ir),n=>{const o=n.dom;o.nodeValue=ic(o.data)})},cq=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},iq=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),GE=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,Lz=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,wN=(e,n)=>Ae(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",Iz=(e,n,o)=>{var r;const c=[];if(!o)return;let l=o;for(;l=l.firstChild;){if(e.isBlock(l))return;Ze(l)&&!n[l.nodeName.toLowerCase()]&&c.push(l)}let d=c.length;for(;d--;)l=c[d],(!l.hasChildNodes()||l.firstChild===l.lastChild&&((r=l.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||iq(e,l))&&e.remove(l)},Jc=(e,n,o)=>Te(n)?e?o===1&&n.data.charAt(o-1)===Us?0:o:o===n.data.length-1&&n.data.charAt(o)===Us?n.data.length:o:o,Fz=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,Jc(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,Jc(!1,e.endContainer,e.endOffset)),n},EN=e=>{let n=e;do Te(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},$z=(e,n,o,r,c)=>{var l,d;const g=e.dom,p=(l=$0(g,r))!==null&&l!==void 0?l:g.getRoot();let y=g.getParent(r,g.isBlock);if(!y||!wN(g,y)){if(y=y||p,!y.hasChildNodes()){const R=g.create(n);return H0(e,R),y.appendChild(R),o.setStart(R,0),o.setEnd(R,0),R}let E=r;for(;E&&E.parentNode!==y;)E=E.parentNode;let T;for(;E&&!g.isBlock(E);)T=E,E=E.previousSibling;const _=(d=T==null?void 0:T.parentElement)===null||d===void 0?void 0:d.nodeName;if(T&&_&&e.schema.isValidChild(_,n.toLowerCase())){const R=T.parentNode,B=g.create(n);for(H0(e,B),R.insertBefore(B,T),E=T;E&&!g.isBlock(E);){const P=E.nextSibling;B.appendChild(E),E=P}o.setStart(r,c),o.setEnd(r,c)}}return r},Hz=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Ze(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},Vz=(e,n)=>{const o=k_(e);return dn(n)?!1:re(o)?kt(Ee.explode(o),n.nodeName.toLowerCase()):o},kN={insert:(e,n)=>{let o,r,c,l,d=!1;const g=e.dom,p=e.schema,y=p.getNonEmptyElements(),E=e.selection.getRng(),T=or(e),_=U.fromDom(E.startContainer),R=Il(_,E.startOffset),B=R.exists(Ce=>Nm(Ce)&&!Mu(Ce)),P=E.collapsed&&B,I=(Ce,qe)=>Az(e,o,Oe,ye,JS(e),Ce,qe),Z=Ce=>{const qe=Jc(Ce,o,r);if(Te(o)&&(Ce?qe>0:qe<o.data.length))return!1;if((o.parentNode===Oe||o===Oe)&&d&&!Ce||Ce&&Ze(o)&&o===Oe.firstChild)return!0;if(GE(o,"TABLE")||GE(o,"HR"))return Lz(o,"BR")?!Ce:d&&!Ce||!d&&Ce;const ut=new Qs(o,Oe);Te(o)&&(Ce&&qe===0?ut.prev():!Ce&&qe===o.data.length&&ut.next());let At;for(;At=ut.current();){if(Ze(At)){if(!At.getAttribute("data-mce-bogus")){const qt=At.nodeName.toLowerCase();if(y[qt]&&qt!=="br")return!1}}else if(Te(At)&&!Bc(At.data))return!1;Ce?ut.prev():ut.next()}return!0},Q=()=>{let Ce;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&je!=="HGROUP"?Ce=I(T):Ce=I(),Vz(e,l)&&wN(g,l)&&g.isEmpty(Oe,void 0,{includeZwsp:!0})?Ce=g.split(l,Oe):g.insertAfter(Ce,Oe),np(e,Ce),Ce};T1(g,E).each(Ce=>{E.setStart(Ce.startContainer,Ce.startOffset),E.setEnd(Ce.endContainer,Ce.endOffset)}),o=E.startContainer,r=E.startOffset;const ee=!!(n&&n.shiftKey),ne=!!(n&&n.ctrlKey);Ze(o)&&o.hasChildNodes()&&!P&&(d=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,d&&Te(o)?r=o.data.length:r=0);const ye=$0(g,o);if(!ye||cq(e,o))return;ee||(o=$z(e,T,E,o,r));let Oe=g.getParent(o,g.isBlock)||g.getRoot();l=Ae(Oe==null?void 0:Oe.parentNode)?g.getParent(Oe.parentNode,g.isBlock):null,c=Oe?Oe.nodeName.toUpperCase():"";const je=l?l.nodeName.toUpperCase():"";if(je==="LI"&&!ne){const Ce=l;Oe=Ce,l=Ce.parentNode,c=je}if(Ze(l)&&Dz(e,ee,Oe))return Mz(e,I,Oe);if(/^(LI|DT|DD)$/.test(c)&&Ze(l)&&g.isEmpty(Oe)){Bz(e,I,l,Oe,T);return}if(!P&&(Oe===e.getBody()||!wN(g,Oe)))return;const he=Oe.parentNode;let ue;if(P)ue=I(T),R.fold(()=>{qo(_,U.fromDom(ue))},Ce=>{ta(Ce,U.fromDom(ue))}),e.selection.setCursorLocation(ue,0);else if(sf(Oe))ue=Gp(Oe),g.isEmpty(Oe)&&zy(Oe),H0(e,ue),np(e,ue);else if(Z(!1))ue=Q();else if(Z(!0)&&he){const Ce=fe.fromRangeStart(E),qe=uw(Ce),ut=U.fromDom(Oe),qt=qv(ut,Ce,e.schema)?V5(ut,Ce,e.schema).bind(Pn=>D.from(Pn.getNode())):D.none();ue=he.insertBefore(I(),Oe);const _n=GE(Oe,"HR")||qe?ue:qt.getOr(Oe);np(e,_n)}else{const Ce=Fz(E).cloneRange();Ce.setEndAfter(Oe);const qe=Ce.extractContents();aq(qe),EN(qe),ue=qe.firstChild,g.insertAfter(qe,Oe),Iz(g,y,ue),Hz(g,Oe),g.isEmpty(Oe)&&zy(Oe),ue.normalize(),g.isEmpty(ue)?(g.remove(ue),Q()):(H0(e,ue),np(e,ue))}g.setAttrib(ue,"id",""),e.dispatch("NewBlock",{newBlock:ue})},fakeEventName:"insertParagraph"},zz=(e,n,o)=>{const r=new Qs(n,o);let c;const l=e.getNonEmptyElements();for(;c=r.next();)if(l[c.nodeName.toLowerCase()]||Te(c)&&c.length>0)return!0;return!1},Wy=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),Ch(e,r)},TN=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let l,d=!1;T1(r,c).each(R=>{c.setStart(R.startContainer,R.startOffset),c.setEnd(R.endContainer,R.endOffset)});let g=c.startOffset,p=c.startContainer;if(Ze(p)&&p.hasChildNodes()){const R=g>p.childNodes.length-1;p=p.childNodes[Math.min(g,p.childNodes.length-1)]||p,R&&Te(p)?g=p.data.length:g=0}let y=r.getParent(p,r.isBlock);const E=y&&y.parentNode?r.getParent(y.parentNode,r.isBlock):null,T=E?E.nodeName.toUpperCase():"",_=!!(n&&n.ctrlKey);T==="LI"&&!_&&(y=E),Te(p)&&g>=p.data.length&&(zz(e.schema,p,y||r.getRoot())||(l=r.create("br"),c.insertNode(l),c.setStartAfter(l),c.setEndAfter(l),d=!0)),l=r.create("br"),Qb(r,c,l),Wy(e,l,d),e.undoManager.add()},jy=(e,n)=>{const o=U.fromTag("br");ta(U.fromDom(n),o),e.undoManager.add()},Uz=(e,n)=>{Wz(e.getBody(),n)||di(U.fromDom(n),U.fromTag("br"));const o=U.fromTag("br");di(U.fromDom(n),o),Wy(e,o.dom,!1),e.undoManager.add()},Zz=e=>An(e.getNode()),Wz=(e,n)=>Zz(fe.after(n))?!0:Gr(e,fe.after(n)).map(o=>An(o.getNode())).getOr(!1),_N=e=>e&&e.nodeName==="A"&&"href"in e,jz=e=>e.fold(we,_N,_N,we),AN=e=>{const n=Ye(Xd,e),o=fe.fromRangeStart(e.selection.getRng());return lu(n,e.getBody(),o).filter(jz)},Gz=(e,n)=>{n.fold(nt,Ye(jy,e),Ye(Uz,e),nt)},ON={insert:(e,n)=>{const o=AN(e);o.isSome()?o.each(Ye(Gz,e)):TN(e,n)},fakeEventName:"insertLineBreak"},DN=(e,n)=>jE(e).filter(o=>n.length>0&&oc(U.fromDom(o),n)).isSome(),qE=e=>DN(e,Wr(e)),Yz=e=>DN(e,XS(e)),Cc=Ci.generate([{br:[]},{block:[]},{none:[]}]),Gy=(e,n)=>Yz(e),MN=e=>(n,o)=>Tz(n)===e,qy=(e,n)=>(o,r)=>CN(o)===e.toUpperCase()===n,KE=e=>{const n=$0(e.dom,e.selection.getStart());return dn(n)},rp=e=>qy("pre",e),Xz=()=>qy("summary",!0),YE=e=>(n,o)=>La(n)===e,hm=(e,n)=>qE(e),Ky=(e,n)=>n,Jz=e=>{const n=or(e),o=$0(e.dom,e.selection.getStart());return Ae(o)&&e.schema.isValidChild(o.nodeName,n)},Qz=e=>{const n=e.selection.getRng(),o=U.fromDom(n.startContainer),c=Il(o,n.startOffset).map(l=>Nm(l)&&!Mu(l));return n.collapsed&&c.getOr(!0)},Sa=(e,n)=>(o,r)=>cs(e,(l,d)=>l&&d(o,r),!0)?D.some(n):D.none(),RN=(e,n)=>g6([Sa([Gy],Cc.none()),Sa([rp(!0),KE],Cc.none()),Sa([Xz()],Cc.br()),Sa([rp(!0),YE(!1),Ky],Cc.br()),Sa([rp(!0),YE(!1)],Cc.block()),Sa([rp(!0),YE(!0),Ky],Cc.block()),Sa([rp(!0),YE(!0)],Cc.br()),Sa([MN(!0),Ky],Cc.br()),Sa([MN(!0)],Cc.block()),Sa([hm],Cc.br()),Sa([Ky],Cc.br()),Sa([Jz],Cc.block()),Sa([Qz],Cc.block())],[e,!!(n&&n.shiftKey)]).getOr(Cc.none()),V0=(e,n,o)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||cF(n),!(Ae(o)&&Vy(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Ae(o)&&F0(n,e.fakeEventName)))},NN=(e,n)=>{if(e.mode.isReadOnly())return;const o=()=>V0(ON,e,n),r=()=>V0(kN,e,n),c=RN(e,n);switch(Hu(e)){case"linebreak":c.fold(o,o,nt);break;case"block":c.fold(r,r,nt);break;case"invert":c.fold(r,o,nt);break;default:c.fold(o,r,nt);break}},XE=M(),eU=XE.os.isiOS()&&XE.browser.isSafari(),PN=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),GD(e.undoManager),e.undoManager.transact(()=>{NN(e,n)}))},tU=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(Te(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},JE=e=>{let n=D.none();const o=c=>{n=D.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,l)=>{c.undoManager.undo(),n.fold(nt,d=>c.selection.moveToBookmark(d)),PN(c,l),n=D.none()};e.on("keydown",c=>{c.keyCode===Qe.ENTER&&(eU&&tU(e.selection.getRng())?o(e):PN(e,c))}),e.on("keyup",c=>{c.keyCode===Qe.ENTER&&n.each(()=>r(e,c))})},QE=(e,n,o)=>{const r=Tt.os.isMacOS()||Tt.os.isiOS();wy([{keyCode:Qe.END,action:Mt(xy,e,!0)},{keyCode:Qe.HOME,action:Mt(xy,e,!1)},...r?[]:[{keyCode:Qe.HOME,action:Mt(R0,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Qe.END,action:Mt(R0,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Qe.END,action:Mt(fR,e,!0)},{keyCode:Qe.HOME,action:Mt(fR,e,!1)},{keyCode:Qe.END,action:Mt(hy,e,!0,n)},{keyCode:Qe.HOME,action:Mt(hy,e,!1,n)}],o).each(c=>{o.preventDefault()})},nU=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||QE(e,n,o)})},ek=e=>{e.on("input",n=>{n.isComposing||jI(e)})},BN=M(),Yy=(e,n,o)=>{wy([{keyCode:Qe.PAGE_UP,action:Mt(hy,e,!1,n)},{keyCode:Qe.PAGE_DOWN,action:Mt(hy,e,!0,n)}],o)},tk=e=>e.stopImmediatePropagation(),nk=e=>e.keyCode===Qe.PAGE_UP||e.keyCode===Qe.PAGE_DOWN,LN=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",tk,!0):!o&&e.get()&&n.off("NodeChange",tk),e.set(o)},oU=(e,n)=>{if(BN.os.isMacOS())return;const o=mo(!1);e.on("keydown",r=>{nk(r)&&LN(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||Yy(e,n,r),nk(r)&&o.get()&&(LN(o,e,!1),e.nodeChanged())})},Xy=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||kn(n.getTargetRanges(),o=>!i5(e.dom,o)))&&n.preventDefault()})},ok=(e,n)=>{const o=n.container(),r=n.offset();return Te(o)?(o.insertData(r,e),D.some(fe(o,r+e.length))):vv(n).map(c=>{const l=U.fromText(e);return n.isAtEnd()?di(c,l):ta(c,l),fe(l.dom,e.length)})},IN=Ye(ok,ks),FN=Ye(ok," "),$N=(e,n,o)=>fw(e,n,o)?IN(n):FN(n),sU=e=>n=>n.fold(o=>qr(e.dom,fe.before(o)),o=>Mr(o),o=>xi(o),o=>Gr(e.dom,fe.after(o))),rU=(e,n,o)=>r=>fw(e,r,o)?IN(n):FN(n),HN=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},aU=(e,n)=>e.isEditable(e.getParent(n,"summary")),cU=e=>{const n=fe.fromRangeStart(e.selection.getRng()),o=U.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Ye(Xd,e),c=fe.fromRangeStart(e.selection.getRng());return lu(r,e.getBody(),c).bind(sU(o)).map(l=>()=>rU(o,n,e.schema)(l).each(HN(e)))}else return D.none()},VN=e=>{const n=()=>{const o=U.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=fe.fromRangeStart(e.selection.getRng());$N(o,r,e.schema).each(HN(e))};return Yi(Tt.browser.isFirefox()&&e.selection.isEditable()&&aU(e.dom,e.selection.getRng().startContainer),n)},iU=(e,n)=>{dR([{keyCode:Qe.SPACEBAR,action:Mt(cU,e)},{keyCode:Qe.SPACEBAR,action:Mt(VN,e)}],n).each(o=>{n.preventDefault(),Vy(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),F0(e,"insertText",{data:" "}))})},zN=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||iU(e,n)})},lU=e=>nL(e)?[{keyCode:Qe.TAB,action:Mt(_R,e,!0)},{keyCode:Qe.TAB,shiftKey:!0,action:Mt(_R,e,!1)}]:[],uU=(e,n)=>{wy([...lU(e)],n).each(o=>{n.preventDefault()})},dU=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||uU(e,n)})},mU=e=>{if(e.addShortcut("Meta+P","","mcePrint"),oq(e),qc(e))return mo(null);{const n=R9(e);return Xy(e),oV(e),Ay(e,n),rq(e,n),JE(e),zN(e),ek(e),dU(e),nU(e,n),oU(e,n),n}};class fU{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const l=n.selection.getRng(),d={startContainer:l.startContainer,startOffset:l.startOffset,endContainer:l.endContainer,endOffset:l.endOffset};(c.type==="nodechange"||!ew(d,o))&&n.dispatch("SelectionChange"),o=d}),n.on("contextmenu",()=>{C1(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&Tv(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&Tv(n)&&(n.selection.getNode().nodeName==="IMG"?rt.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor,r=o.selection;let c;if(o.initialized&&r&&!rh(o)&&!gv(o)){const l=o.getBody();c=r.getStart(!0)||l,(c.ownerDocument!==o.getDoc()||!o.dom.isChildOf(c,l))&&(c=l);const d=[];o.dom.getParent(c,g=>g===l?!0:(d.push(g),!1)),o.dispatch("NodeChange",{...n,element:c,parents:d})}}isSameElementPath(n){let o;const r=this.editor,c=ao(r.dom.getParents(n,Ue,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const Qf=Wp("image"),gU=e=>{const n=e;return D.from(n[Qf])},hU=(e,n)=>{const o=e;o[Qf]=n},Jy=Wp("event"),pU=e=>{const n=e;return D.from(n[Jy])},Qy=e=>n=>{const o=n;o[Jy]=e},bU=(e,n)=>Qy(n)(e),sk=Qy(0),vU=Qy(2),yU=Qy(1),eC=(e=>n=>{const o=n;return D.from(o[Jy]).exists(r=>r===e)})(0),CU=()=>Object.freeze({length:0,item:e=>null}),rk=Wp("mode"),SU=e=>{const n=e;return D.from(n[rk])},tC=e=>n=>{const o=n;o[rk]=e},UN=(e,n)=>tC(n)(e),ZN=tC(0),ak=tC(2),xU=tC(1),WN=e=>n=>{const o=n;return D.from(o[rk]).exists(r=>r===e)},ap=WN(0),jN=WN(1),wU=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(ap(e))if(re(o)){if(!uo(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{ap(e)&&n.remove(o)},clear:()=>{ap(e)&&n.clear()}}),EU=["none","copy","link","move"],Gn=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],ck=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(c){kt(EU,c)&&(n=c)},get effectAllowed(){return o},set effectAllowed(c){eC(r)&&kt(Gn,c)&&(o=c)},get items(){return wU(r,e.items)},get files(){return jN(r)?CU():e.files},get types(){return e.types},setDragImage:(c,l,d)=>{ap(r)&&(hU(r,{image:c,x:l,y:d}),e.setDragImage(c,l,d))},getData:c=>jN(r)?"":e.getData(c),setData:(c,l)=>{ap(r)&&e.setData(c,l)},clearData:c=>{ap(r)&&e.clearData(c)}};return ZN(r),r},GN=e=>{const n=ck(),o=SU(e);return ak(e),sk(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,gU(e).each(r=>n.setDragImage(r.image,r.x,r.y)),oe(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),oe(e.files,r=>n.items.add(r)),pU(e).each(r=>{bU(n,r)}),o.each(r=>{UN(e,r),UN(n,r)}),n},kU=e=>{const n=e.getData("text/html");return n===""?D.none():D.some(n)},nC=(e,n)=>e.setData("text/html",n),ik="x-tinymce/html",oC=Ie(ik),lk="<!-- "+ik+" -->",TU=e=>lk+e,qN=e=>e.replace(lk,""),z0=e=>e.indexOf(lk)!==-1,_U=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),AU=(e,n)=>{let o="<"+e;const r=Da(n,(c,l)=>l+'="'+Gm.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},uk=(e,n,o)=>{const r=e.split(/\n\n/),c=AU(n,o),l="</"+n+">",d=Dt(r,p=>p.split(/\n/).join("<br />")),g=p=>c+p+l;return d.length===1?d[0]:Dt(d,g).join("")},KN="%MCEPASTEBIN%",OU=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const l=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},KN);Tt.browser.isFirefox()&&o.setStyle(l,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(l,"beforedeactivate focusin focusout",d=>{d.stopPropagation()}),l.focus(),r.select(l,!0)},DU=(e,n)=>{const o=e.dom;if(dk(e)){let r;const c=n.get();for(;r=dk(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},dk=e=>e.dom.get("mcepastebin"),YN=e=>Ae(e)&&e.id==="mcepastebin",MU=e=>{const n=e.dom,o=(d,g)=>{d.appendChild(g),n.remove(g,!0)},[r,...c]=vt(e.getBody().childNodes,YN);oe(c,d=>{o(r,d)});const l=n.select("div[id=mcepastebin]",r);for(let d=l.length-1;d>=0;d--){const g=n.create("div");r.insertBefore(g,l[d]),o(g,l[d])}return r?r.innerHTML:""},XN=e=>e===KN,cp=e=>{const n=mo(null);return{create:()=>OU(e,n),remove:()=>DU(e,n),getEl:()=>dk(e),getHtml:()=>MU(e),getLastRng:n.get}},JN=(e,n)=>(Ee.each(n,o=>{xt(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),ip=e=>{const n=In(),o=Vh({},n);let r="";const c=n.getVoidElements(),l=Ee.makeMap("script noscript style textarea video audio iframe object"," "),d=n.getBlockElements(),g=p=>{const y=p.name,E=p;if(y==="br"){r+=`
`;return}if(y!=="wbr"){if(c[y]&&(r+=" "),l[y]){r+=" ";return}if(p.type===3&&(r+=p.value),!(p.name in n.getVoidElements())){let T=p.firstChild;if(T)do g(T);while(T=T.next)}d[y]&&E.next&&(r+=`
`,y==="p"&&(r+=`
`))}};return e=JN(e,[/<!\[[^\]]+\]>/g]),g(o.parse(e)),r},lp=e=>(e=JN(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":ks],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),RU=e=>{let n=0;return()=>e+n++},NU=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Ee.hasOwn(o,n)?"image/"+o[n]:"image/"+n},up=(e,n)=>{const o=Vh({sanitize:n1(e),sandbox_iframes:H_(e),sandbox_iframes_exclusions:fx(e),convert_unsafe_embeds:sL(e)},e.schema);o.addNodeFilter("meta",c=>{Ee.each(c,l=>{l.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Gd({validate:!0},e.schema).serialize(r)},QN=(e,n)=>({content:e,cancelled:n}),mk=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=gr(e,r,o);return QN(c.node.innerHTML,c.isDefaultPrevented())},PU=(e,n,o)=>{const r=hs(e,n,o),c=up(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?mk(e,c,o):QN(c,r.isDefaultPrevented())},e8=(e,n,o)=>PU(e,n,o),sC=(e,n)=>(e.insertContent(n,{merge:B_(e),paste:!0}),!0),U0=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),t8=(e,n)=>U0(n)&&kn($_(e),o=>Wt(n.toLowerCase(),`.${o.toLowerCase()}`)),BU=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),LU=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),n8=(e,n,o)=>!e.selection.isCollapsed()&&U0(n)?LU(e,n,o):!1,IU=(e,n,o)=>t8(e,n)?BU(e,n,o):!1,o8=(e,n)=>{Ee.each([n8,IU,sC],o=>!o(e,n,sC))},fk=(e,n,o)=>{o||!jB(e)?sC(e,n):o8(e,n)},s8=RU("mceclip"),FU=e=>{const n=ck();return nC(n,e),ak(n),n},r8=(e,n,o,r,c)=>{const l=e8(e,n,o);if(!l.cancelled){const d=l.content,g=()=>fk(e,d,r);c?Vy(e,"insertFromPaste",{dataTransfer:FU(d)}).isDefaultPrevented()||(g(),F0(e,"insertFromPaste")):g()}},rC=(e,n,o,r)=>{const c=o||z0(n);r8(e,qN(n),c,!1,r)},aC=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),c=mi(r,qB(e)),l=uk(c,or(e),Jl(e));r8(e,l,!1,!0,o)},cC=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},pm=(e,n)=>n in e&&e[n].length>0,gk=e=>pm(e,"text/html")||pm(e,"text/plain"),a8=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Ae(o)?e.dom.encode(o[1]):void 0},$U=(e,n,o,r)=>{const c=s8(),l=av(e)&&Ae(o.name),d=l?a8(e,o.name):c,g=l?o.name:void 0,p=n.create(c,o,r,d,g);return n.add(p),p},c8=(e,n)=>{g4(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const l=c?o:btoa(o),d=n.file,g=e.editorUpload.blobCache,p=g.getByData(l,r),y=p??$U(e,g,d,l);rC(e,`<img src="${y.blobUri()}">`,!1,!0)})},HU=e=>e.type==="paste",VU=e=>Promise.all(Dt(e,n=>am(n).then(o=>({file:n,uri:o})))),zU=e=>{const n=$_(e);return o=>Se(o.type,"image/")&&kn(n,r=>NU(r)===o.type)},UU=(e,n)=>{const o=n.items?is(Rn(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?Rn(n.files):[];return vt(o.length>0?o:r,zU(e))},i8=(e,n,o)=>{const r=HU(n)?n.clipboardData:n.dataTransfer;if(mv(e)&&r){const c=UU(e,r);if(c.length>0)return n.preventDefault(),VU(c).then(l=>{o&&e.selection.setRng(o),oe(l,d=>{c8(e,d)})}),!0}return!1},iC=e=>{var n,o;return Tt.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},ZU=e=>Qe.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,lC=(e,n,o,r,c)=>{let l=lp(o);const d=pm(n,oC())||z0(o),g=!d&&_U(l),p=U0(l);(XN(l)||!l.length||g&&!p)&&(r=!0),(r||p)&&(pm(n,"text/plain")&&g?l=n["text/plain"]:l=ip(l)),!XN(l)&&(r?aC(e,l,c):rC(e,l,d,c))},WU=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",l=>{ZU(l)&&!l.isDefaultPrevented()&&(r=l.shiftKey&&l.keyCode===86)}),e.on("paste",l=>{if(l.isDefaultPrevented()||iC(l))return;const d=o.get()==="text"||r;r=!1;const g=cC(l.clipboardData);!gk(g)&&i8(e,l,c())||(pm(g,"text/html")?(l.preventDefault(),lC(e,g,g["text/html"],d,!0)):pm(g,"text/plain")&&pm(g,"text/uri-list")?(l.preventDefault(),lC(e,g,g["text/plain"],d,!0)):(n.create(),rt.setEditorTimeout(e,()=>{const p=n.getHtml();n.remove(),lC(e,g,p,d,!1)},0)))})},jU=e=>{const n=c=>Se(c,"webkit-fake-url"),o=c=>Se(c,"data:"),r=c=>{var l;return((l=c.data)===null||l===void 0?void 0:l.paste)===!0};e.parser.addNodeFilter("img",(c,l,d)=>{if(!mv(e)&&r(d))for(const g of c){const p=g.attr("src");re(p)&&!g.attr("data-mce-object")&&p!==Tt.transparentSrc&&(n(p)||!L_(e)&&o(p))&&g.remove()}})},l8=(e,n,o)=>{WU(e,n,o),jU(e)},u8=(e,n)=>{n.get()==="text"?(n.set("html"),nr(e,!1)):(n.set("text"),nr(e,!0)),e.focus()},GU=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{u8(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&rC(e,r.html,r.internal,!1),r.text&&aC(e,r.text,!1)})},qU=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(oC(),n),!0}catch{return!1}else return!1},d8=(e,n,o,r)=>{qU(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},m8=e=>(n,o)=>{const{dom:r,selection:c}=e,l=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),d=r.create("div",{contenteditable:"true"},n);r.setStyles(l,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),l.appendChild(d),r.add(e.getBody(),l);const g=c.getRng();d.focus();const p=r.createRng();p.selectNodeContents(d),c.setRng(p),rt.setEditorTimeout(e,()=>{c.setRng(g),r.remove(l),o()},0)},f8=e=>({html:TU(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),g8=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),h8=e=>!e.selection.isCollapsed()||g8(e),KU=e=>n=>{!n.isDefaultPrevented()&&h8(e)&&e.selection.isEditable()&&d8(n,f8(e),m8(e),()=>{if(Tt.browser.isChromium()||Tt.browser.isFirefox()){const o=e.selection.getRng();rt.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},YU=e=>n=>{!n.isDefaultPrevented()&&h8(e)&&d8(n,f8(e),m8(e),nt)},XU=e=>{e.on("cut",KU(e)),e.on("copy",YU(e))},p8=(e,n)=>{var o,r;return jd.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},JU=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},b8=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},QU=e=>kn(e.files,n=>/^image\//.test(n.type)),v8=(e,n,o,r)=>{const c=e.getParent(o,d=>Zm(n,d));if(!q(e.getParent(o,"summary")))return!0;if(c&&ht(r,"text/html")){const d=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!q(d.querySelector(c.nodeName.toLowerCase()))}else return!1},y8=e=>{e.on("input",n=>{const o=r=>q(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=vt(e.dom.select("details"),o);oe(r,c=>{An(c.firstChild)&&c.firstChild.remove();const l=e.dom.create("summary");l.appendChild(ul().dom),c.prepend(l)})}})},eZ=(e,n)=>{zB(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),mv(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&QU(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=p8(e,o);if(dn(r))return;const c=cC(o.dataTransfer),l=pm(c,oC());if((!gk(c)||JU(c))&&i8(e,o,r))return;const d=c[oC()],g=d||c["text/html"]||c["text/plain"],p=v8(e.dom,e.schema,r.startContainer,c),y=n.get();y&&!p||g&&(o.preventDefault(),rt.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(d||y&&p)&&e.execCommand("Delete"),b8(e,r);const E=lp(g);c["text/html"]?rC(e,E,l,!0):aC(e,E,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{mv(e)&&!n.get()&&(o.preventDefault(),b8(e,p8(e,o))),o.type==="dragend"&&n.set(!1)}),y8(e)},tZ=e=>{const n=c=>l=>{c(e,l)},o=N_(e);Ht(o)&&e.on("PastePreProcess",n(o));const r=UB(e);Ht(r)&&e.on("PastePostProcess",n(r))},nZ=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},oZ=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,C8=e=>Ee.trim(e).replace(oZ,zp).toLowerCase(),sZ=(e,n,o)=>{const r=P_(e);if(o||r==="all"||!WB(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const l=e.dom,d=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(g,p,y,E)=>{const T=l.parseStyle(l.decode(y)),_={};for(let B=0;B<c.length;B++){const P=T[c[B]];let I=P,Z=l.getStyle(d,c[B],!0);/color/.test(c[B])&&(I=C8(I),Z=C8(Z)),Z!==I&&(_[c[B]]=P)}const R=l.serializeStyle(_,"span");return R?p+' style="'+R+'"'+E:p+E})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(l,d,g,p)=>d+' style="'+g+'"'+p),n},rZ=e=>{(Tt.browser.isChromium()||Tt.browser.isSafari())&&nZ(e,sZ)},uC=e=>{const n=mo(!1),o=mo(GB(e)?"text":"html"),r=cp(e);rZ(e),GU(e,o),tZ(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{XU(e),eZ(e,n),l8(e,r,o)})},S8=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},aZ=e=>{e.parser.addNodeFilter("details",n=>{const o=fv(e);oe(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=oL(e);oe(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},x8=e=>{S8(e),aZ(e)},w8=An,dC=Te,cZ=e=>Tn(e.dom),E8=e=>ve(e.dom),k8=e=>n=>xn(U.fromDom(e),n),T8=(e,n,o)=>Oo(U.fromDom(e),r=>E8(r)||o.isBlock(Ft(r)),k8(n)).getOr(U.fromDom(n)).dom,_8=(e,n)=>Oo(U.fromDom(e),cZ,k8(n)),hk=(e,n,o)=>{const r=new Qs(e,n),c=o?r.next.bind(r):r.prev.bind(r);let l=e;for(let d=o?e:c();d&&!w8(d);d=c())bi(d)&&(l=d);return l},iZ=(e,n,o)=>{const c=fe.fromRangeStart(e).getNode(),l=T8(c,n,o),d=hk(c,l,!1),g=hk(c,l,!0),p=document.createRange();return _8(d,l).fold(()=>{dC(d)?p.setStart(d,0):p.setStartBefore(d)},y=>p.setStartBefore(y.dom)),_8(g,l).fold(()=>{dC(g)?p.setEnd(g,g.data.length):p.setEndAfter(g)},y=>p.setEndAfter(y.dom)),p},lZ=e=>{const n=iZ(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(m2(n))},uZ=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),lZ(e))})};var mu;(function(e){e.Before="before",e.After="after"})(mu||(mu={}));const dZ=(e,n)=>Math.abs(e.left-n),mZ=(e,n)=>Math.abs(e.right-n),A8=(e,n)=>e>=n.top&&e<=n.bottom,fZ=(e,n)=>e.top<n.bottom&&e.bottom>n.top,gZ=(e,n)=>{const o=pi(e,n)/Math.min(e.height,n.height);return fZ(e,n)&&o>.5},hZ=(e,n)=>{const o=vt(e,r=>A8(n,r));return zP(o).fold(()=>[[],e],r=>{const{pass:c,fail:l}=Rs(e,d=>gZ(d,r));return[c,l]})},pZ=(e,n)=>({node:e.node,position:dZ(e,n)<mZ(e,n)?mu.Before:mu.After}),bZ=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),dp=(e,n,o,r)=>{const c=T=>bi(T.node)?D.some(T):Ze(T.node)?dp(Rn(T.node.childNodes),n,o,!1):D.none(),l=(T,_,R)=>c(_).filter(B=>Math.abs(R(T,n,o)-R(B,n,o))<2&&Te(B.node)),d=(T,_)=>{const R=Zn(T,(B,P)=>_(B,n,o)-_(P,n,o));return Ac(R,c).map(B=>r&&!Te(B.node)&&R.length>1?l(B,R[1],_).getOr(B):B)},[g,p]=hZ(Gf(e),o),{pass:y,fail:E}=Rs(p,T=>T.top<o);return d(g,bZ).orThunk(()=>d(E,cf)).orThunk(()=>d(y,cf))},O8=(e,n,o,r)=>{const c=(l,d)=>{const g=y=>Ze(y)&&y.classList.contains("mce-drag-container"),p=vt(l.dom.childNodes,wn(g));return d.fold(()=>dp(p,o,r,!0),y=>{const E=vt(p,T=>T!==y.dom);return dp(E,o,r,!0)}).orThunk(()=>(xn(l,e)?D.none():wg(l)).bind(E=>c(E,D.some(l))))};return c(n,D.none())},D8=(e,n,o)=>{const r=U.fromDom(e),c=Qi(r),d=U.fromPoint(c,n,o).filter(g=>$o(r,g)).getOr(r);return O8(r,d,n,o)},M8=(e,n,o)=>D8(e,n,o).filter(r=>a1(r.node)).map(r=>pZ(r,n)),R8=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,l=c.documentElement,d=c.defaultView;return{top:r.top+((n=d==null?void 0:d.scrollY)!==null&&n!==void 0?n:0)-l.clientTop,left:r.left+((o=d==null?void 0:d.scrollX)!==null&&o!==void 0?o:0)-l.clientLeft}},vZ=e=>e.inline?R8(e.getBody()):{left:0,top:0},dq=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},yZ=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},N8=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=R8(e.getContentAreaContainer()),r=yZ(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},pk=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),mC=(e,n)=>pk(vZ(e),dq(e),N8(e,n)),P8=e=>({target:e,srcElement:e}),CZ=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...P8(o)}),B8=(e,n,o)=>{const r=as("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:nt,stopImmediatePropagation:nt,stopPropagation:nt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...P8(n)}},SZ=(e,n)=>{const o=GN(e);return n==="dragstart"?(sk(o),ZN(o)):n==="drop"?(vU(o),ak(o)):(yU(o),xU(o)),o},bk=(e,n,o,r)=>{const c=SZ(o,e);return uo(r)?B8(e,n,c):CZ(e,r,n,c)},vk=32,xZ=100,fC=8,Z0=16,L8=Tn,mq=ZP(L8,ve),wZ=(e,n,o)=>L8(o)&&o!==n&&e.isEditable(o.parentElement),EZ=(e,n,o)=>dn(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),kZ=(e,n,o,r)=>{const c=e.dom,l=n.cloneNode(!0);c.setStyles(l,{width:o,height:r}),c.setAttrib(l,"data-mce-selected",null);const d=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(d,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(l,{margin:0,boxSizing:"border-box"}),d.appendChild(l),d},I8=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},gC=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},hC=gC("left",-32),yk=gC("left",vk),Ck=gC("top",-32),pC=gC("top",vk),Sk=(e,n,o,r,c,l,d,g,p,y,E,T)=>{let _=0,R=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(_=n.pageX+o-c),n.pageY+r>l&&(R=n.pageY+r-l),e.style.width=o-_+"px",e.style.height=r-R+"px";const B=p.clientHeight,P=p.clientWidth,I=d+p.getBoundingClientRect().top,Z=g+p.getBoundingClientRect().left;E.on(Q=>{Q.intervalId.clear(),Q.dragging&&T&&(d+fC>=B?Q.intervalId.set(pC(y)):d-fC<=0?Q.intervalId.set(Ck(y)):g+fC>=P?Q.intervalId.set(yk(y)):g-fC<=0?Q.intervalId.set(hC(y)):I+Z0>=window.innerHeight?Q.intervalId.set(pC(window)):I-Z0<=0?Q.intervalId.set(Ck(window)):Z+Z0>=window.innerWidth?Q.intervalId.set(yk(window)):Z-Z0<=0&&Q.intervalId.set(hC(window)))})},bC=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},TZ=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);bC(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&ql(U.fromDom(o))},sd=e=>e.button===0,F8=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),_Z=(e,n)=>o=>{if(sd(o)){const r=ro(n.dom.getParents(o.target),mq).getOr(null);if(Ae(r)&&wZ(n.dom,n.getBody(),r)){const c=n.dom.getPos(r),l=n.getBody(),d=n.getDoc().documentElement;e.set({element:r,dataTransfer:ck(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?l.scrollWidth:d.offsetWidth)-2,maxY:(n.inline?l.scrollHeight:d.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:kZ(n,r,r.offsetWidth,r.offsetHeight),intervalId:Do(xZ)})}}},AZ=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),M8(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===mu.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(n,o)})},W0=(e,n,o,r,c)=>{n==="dragstart"&&nC(r,e.dom.getOuterHTML(o));const l=bk(n,o,r,c);return e.dispatch(n,l)},OZ=(e,n)=>{const o=Kg((c,l)=>AZ(n,c,l),0);n.on("remove",o.cancel);const r=e;return c=>e.on(l=>{const d=Math.max(Math.abs(c.screenX-l.screenX),Math.abs(c.screenY-l.screenY));if(!l.dragging&&d>10){const g=W0(n,"dragstart",l.element,l.dataTransfer,c);if(Ae(g.dataTransfer)&&(l.dataTransfer=g.dataTransfer),g.isDefaultPrevented())return;l.dragging=!0,n.focus()}if(l.dragging){const g=c.currentTarget===n.getDoc().documentElement,p=F8(l,mC(n,c));I8(l.ghost,n.getBody()),Sk(l.ghost,p,l.width,l.height,l.maxX,l.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,g),o.throttle(c.clientX,c.clientY)}})},$8=e=>{const n=e.getSel();if(Ae(n)){const r=n.getRangeAt(0).startContainer;return Te(r)?r.parentNode:r}else return null},DZ=(e,n)=>o=>{e.on(r=>{var c;if(r.intervalId.clear(),r.dragging){if(EZ(n,$8(n.selection),r.element)){const l=(c=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&c!==void 0?c:n.getBody();W0(n,"drop",l,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{TZ(n.dom,r.element),kU(r.dataTransfer).each(g=>n.insertContent(g)),n._selectionOverrides.hideFakeCaret()})}W0(n,"dragend",n.getBody(),r.dataTransfer,o)}}),H8(e)},xk=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>W0(n,"dragend",r.element,r.dataTransfer),c=>W0(n,"dragend",r.element,r.dataTransfer,c))}),H8(e)},MZ=(e,n)=>o=>xk(e,n,D.some(o)),H8=e=>{e.on(n=>{n.intervalId.clear(),bC(n.ghost)}),e.clear()},wk=e=>{const n=Vr(),o=Jn.DOM,r=document,c=_Z(n,e),l=OZ(n,e),d=DZ(n,e),g=MZ(n,e);e.on("mousedown",c),e.on("mousemove",l),e.on("mouseup",d),o.bind(r,"mousemove",l),o.bind(r,"mouseup",g),e.on("remove",()=>{o.unbind(r,"mousemove",l),o.unbind(r,"mouseup",g)}),e.on("keydown",p=>{p.keyCode===Qe.ESC&&xk(n,e,D.none())})},V8=e=>{const n=c=>{if(!c.isDefaultPrevented()){const l=c.dataTransfer;l&&(kt(l.types,"Files")||l.files.length>0)&&(c.preventDefault(),c.type==="drop"&&u0(e,"Dropped file type is not supported"))}},o=c=>{Lv(e,c.target)&&n(c)},r=()=>{const c=Jn.DOM,l=e.dom,d=document,g=e.inline?e.getBody():e.getDoc(),p=["drop","dragover"];oe(p,y=>{c.bind(d,y,o),l.bind(g,y,n)}),e.on("remove",()=>{oe(p,y=>{c.unbind(d,y,o),l.unbind(g,y,n)})})};e.on("init",()=>{rt.setEditorTimeout(e,r,0)})},fq=e=>{wk(e),lv(e)&&V8(e)},RZ=e=>{const n=Kg(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=S3(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},z8=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(er(o)){const r=Ei(e.getBody(),o),c=Tn(r)?r:o;e.selection.getNode()!==c&&C0(e,c).each(l=>e.selection.setRng(l))}})})},j0=Tn,vC=(e,n)=>Ei(e.getBody(),n),NZ=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=mL(e,r,o.isBlock,()=>br(e)),l="sel-"+o.uniqueId(),d="data-mce-selected";let g;const p=je=>Ae(je)&&o.hasClass(je,"mce-offscreen-selection"),y=je=>je!==r&&(j0(je)||er(je))&&o.isChildOf(je,r)&&o.isEditable(je.parentNode),E=je=>{je&&n.setRng(je)},T=(je,he,ue,Ce=!0)=>e.dispatch("ShowCaret",{target:he,direction:je,before:ue}).isDefaultPrevented()?null:(Ce&&n.scrollIntoView(he,je===-1),c.show(ue,he)),_=je=>{je.hasAttribute("data-mce-caret")&&(Gp(je),n.scrollIntoView(je))},R=()=>{e.on("click",he=>{o.isEditable(he.target)||(he.preventDefault(),e.focus())}),e.on("blur NewBlock",ne),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",he=>{const ue=he.target,Ce=vC(e,ue);j0(Ce)?(he.preventDefault(),C0(e,Ce).each(ee)):y(ue)&&C0(e,ue).each(ee)},!0),e.on("mousedown",he=>{const ue=he.target;if(ue!==r&&ue.nodeName!=="HTML"&&!o.isChildOf(ue,r)||!wM(e,he.clientX,he.clientY))return;ne(),Oe();const Ce=vC(e,ue);j0(Ce)?(he.preventDefault(),C0(e,Ce).each(ee)):M8(r,he.clientX,he.clientY).each(qe=>{he.preventDefault();const ut=T(1,qe.node,qe.position===mu.Before,!1);E(ut),fi(Ce)?Ce.focus():e.getBody().focus()})}),e.on("keypress",he=>{Qe.modifierPressed(he)||j0(n.getNode())&&he.preventDefault()}),e.on("GetSelectionRange",he=>{let ue=he.range;if(g){if(!g.parentNode){g=null;return}ue=ue.cloneRange(),ue.selectNode(g),he.range=ue}}),e.on("SetSelectionRange",he=>{he.range=I(he.range);const ue=ee(he.range,he.forward);ue&&(he.range=ue)});const je=he=>Ze(he)&&he.id==="mcepastebin";e.on("AfterSetSelectionRange",he=>{const ue=he.range,Ce=ue.startContainer.parentElement;!P(ue)&&!je(Ce)&&Oe(),p(Ce)||ne()}),fq(e),RZ(e),z8(e)},B=je=>Fc(je)||an(je)||Zr(je),P=je=>B(je.startContainer)||B(je.endContainer),I=je=>{const he=e.schema.getVoidElements(),ue=o.createRng(),Ce=je.startContainer,qe=je.startOffset,ut=je.endContainer,At=je.endOffset;return ht(he,Ce.nodeName.toLowerCase())?qe===0?ue.setStartBefore(Ce):ue.setStartAfter(Ce):ue.setStart(Ce,qe),ht(he,ut.nodeName.toLowerCase())?At===0?ue.setEndBefore(ut):ue.setEndAfter(ut):ue.setEnd(ut,At),ue},Z=(je,he)=>{const ue=U.fromDom(e.getBody()),Ce=e.getDoc(),qe=ws(ue,"#"+l).getOrThunk(()=>{const qt=U.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Ce);return Is(qt,"id",l),qo(ue,qt),qt}),ut=o.createRng();Ru(qe),Fl(qe,[U.fromText(ks,Ce),U.fromDom(he),U.fromText(ks,Ce)]),ut.setStart(qe.dom.firstChild,1),ut.setEnd(qe.dom.lastChild,0),jt(qe,{top:o.getPos(je,e.getBody()).y+"px"}),Ux(qe);const At=n.getSel();return At&&(At.removeAllRanges(),At.addRange(ut)),ut},Q=je=>{const he=je.cloneNode(!0),ue=e.dispatch("ObjectSelected",{target:je,targetClone:he});if(ue.isDefaultPrevented())return null;const Ce=Z(je,ue.targetClone),qe=U.fromDom(je);return oe($r(U.fromDom(e.getBody()),`*[${d}]`),ut=>{xn(qe,ut)||Eo(ut,d)}),o.getAttrib(je,d)||je.setAttribute(d,"1"),g=je,Oe(),Ce},ee=(je,he)=>{if(!je)return null;if(je.collapsed){if(!P(je)){const ut=he?1:-1,At=i1(ut,r,je),qt=At.getNode(!he);if(Ae(qt)){if(a1(qt))return T(ut,qt,he?!At.isAtEnd():!1,!1);if(Kl(qt)&&Tn(qt.nextSibling)){const Pn=o.createRng();return Pn.setStart(qt,0),Pn.setEnd(qt,0),Pn}}const _n=At.getNode(he);if(Ae(_n)){if(a1(_n))return T(ut,_n,he?!1:!At.isAtEnd(),!1);if(Kl(_n)&&Tn(_n.previousSibling)){const Pn=o.createRng();return Pn.setStart(_n,1),Pn.setEnd(_n,1),Pn}}}return null}let ue=je.startContainer,Ce=je.startOffset;const qe=je.endOffset;if(Te(ue)&&Ce===0&&j0(ue.parentNode)&&(ue=ue.parentNode,Ce=o.nodeIndex(ue),ue=ue.parentNode),!Ze(ue))return null;if(qe===Ce+1&&ue===je.endContainer){const ut=ue.childNodes[Ce];if(y(ut))return Q(ut)}return null},ne=()=>{g&&g.removeAttribute(d),ws(U.fromDom(e.getBody()),"#"+l).each(Xn),g=null},ye=()=>{c.destroy(),g=null},Oe=()=>{c.hide()};return qc(e)||R(),{showCaret:T,showBlockCaretContainer:_,hideFakeCaret:Oe,destroy:ye}},PZ=(e,n)=>{let o=n;for(let r=e.previousSibling;Te(r);r=r.previousSibling)o+=r.data.length;return o},U8=(e,n,o,r,c)=>{if(Te(o)&&(r<0||r>o.data.length))return[];const l=c&&Te(o)?[PZ(o,r)]:[r];let d=o;for(;d!==n&&d.parentNode;)l.push(e.nodeIndex(d,c)),d=d.parentNode;return d===n?l.reverse():[]},yC=(e,n,o,r,c,l,d=!1)=>{const g=U8(e,n,o,r,d),p=U8(e,n,c,l,d);return{start:g,end:p}},G0=(e,n)=>{const o=n.slice(),r=o.pop();return Po(r)?cs(o,(l,d)=>l.bind(g=>D.from(g.childNodes[d])),D.some(e)).bind(l=>Te(l)&&(r<0||r>l.data.length)?D.none():D.some({node:l,offset:r})):D.none()},Ek=(e,n)=>G0(e,n.start).bind(({node:o,offset:r})=>G0(e,n.end).map(({node:c,offset:l})=>{const d=document.createRange();return d.setStart(o,r),d.setEnd(c,l),d})),Z8=(e,n,o,r=!1)=>yC(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),mp=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,Te(n.firstChild)&&Bc(n.firstChild.data)),mp(e,r,o)}},CC=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,l=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(Te(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),Te(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),mp(e,c,o),c!==l&&mp(e,l,o))},q0=(e,n)=>D.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),kk=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:m_(r).concat(e.blockPatterns),inlinePatterns:zd(r).concat(e.inlinePatterns)}},Tk=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},W8=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),fp=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},j8=(e,n,o)=>{const r=Ek(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,l=r.endContainer,d=r.endOffset===0?l:l.splitText(r.endOffset),g=r.startOffset===0?c:c.splitText(r.startOffset),p=g.parentNode,y=d.parentNode;return{prefix:n,end:y.insertBefore(W8(e,n+"-end"),d),start:p.insertBefore(W8(e,n+"-start"),g)}},G8=(e,n,o)=>{mp(e,e.get(n.prefix+"-end"),o),mp(e,e.get(n.prefix+"-start"),o)},_k=e=>e.start.length===0,BZ=e=>(n,o)=>{const c=n.data.substring(0,o),l=c.lastIndexOf(e.charAt(e.length-1)),d=c.lastIndexOf(e);return d!==-1?d+e.length:l!==-1?l+1:-1},q8=(e,n,o,r)=>{const c=n.start;return CE(e,r.container,r.offset,BZ(c),o).bind(d=>{var g,p;const y=(p=(g=o.textContent)===null||g===void 0?void 0:g.indexOf(c))!==null&&p!==void 0?p:-1;if(y!==-1&&d.offset>=y+c.length){const T=e.createRng();return T.setStart(d.container,d.offset-c.length),T.setEnd(d.container,d.offset),D.some(T)}else{const T=d.offset-c.length;return My(d.container,T,o).map(_=>{const R=e.createRng();return R.setStart(_.container,_.offset),R.setEnd(d.container,d.offset),R}).filter(_=>_.toString()===c).orThunk(()=>q8(e,n,o,vl(d.container,0)))}})},LZ=(e,n,o,r,c,l=!1)=>{if(n.start.length===0&&!l){const d=e.createRng();return d.setStart(o,r),d.setEnd(o,r),D.some(d)}return yE(o,r,c).bind(d=>q8(e,n,c,d).bind(p=>{var y;if(l){if(p.endContainer===d.container&&p.endOffset===d.offset)return D.none();if(d.offset===0&&((y=p.endContainer.textContent)===null||y===void 0?void 0:y.length)===p.endOffset)return D.none()}return D.some(p)}))},Ak=(e,n,o,r)=>{const c=e.dom,l=c.getRoot(),d=o.pattern,g=o.position.container,p=o.position.offset;return My(g,p-o.pattern.end.length,n).bind(y=>{const E=yC(c,l,y.container,y.offset,g,p,r);if(_k(d))return D.some({matches:[{pattern:d,startRng:E,endRng:E}],position:y});{const T=SC(e,o.remainingPatterns,y.container,y.offset,n,r),_=T.getOr({matches:[],position:y}),R=_.position;return LZ(c,d,R.container,R.offset,n,T.isNone()).map(P=>{const I=Z8(c,l,P,r);return{matches:_.matches.concat([{pattern:d,startRng:I,endRng:E}]),position:vl(P.startContainer,P.startOffset)}})}})},SC=(e,n,o,r,c,l)=>{const d=e.dom;return yE(o,r,d.getRoot()).bind(g=>{const p=Tk(d,c,o,r);for(let y=0;y<n.length;y++){const E=n[y];if(!Wt(p,E.end))continue;const T=n.slice();T.splice(y,1);const _=Ak(e,c,{pattern:E,remainingPatterns:T,position:g},l);if(_.isNone()&&r>0)return SC(e,n,o,r-1,c,l);if(_.isSome())return _}return D.none()})},K8=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?oe(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},Y8=(e,n,o,r)=>{const c=fp(e.dom,o);CC(e.dom,c,r),K8(e,n,c)},IZ=(e,n,o,r,c)=>{const l=e.dom,d=fp(l,r),g=fp(l,o);CC(l,g,c),CC(l,d,c);const p={prefix:o.prefix,start:o.end,end:r.start},y=fp(l,p);K8(e,n,y)},FZ=(e,n)=>{const o=Wp("mce_textpattern"),r=ua(n,(c,l)=>{const d=j8(e,o+`_end${c.length}`,l.endRng);return c.concat([{...l,endMarker:d}])},[]);return ua(r,(c,l)=>{const d=r.length-c.length-1,g=_k(l.pattern)?l.endMarker:j8(e,o+`_start${d}`,l.startRng);return c.concat([{...l,startMarker:g}])},[])},$Z=e=>Zn(e,(n,o)=>o.end.length-n.end.length),HZ=(e,n)=>{const o=_o(e,r=>kn(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},X8=(e,n,o,r,c,l)=>{const d=SC(e,c.inlinePatterns,o,r,n,l).fold(()=>[],p=>p.matches),g=SC(e,$Z(c.inlinePatterns),o,r,n,l).fold(()=>[],p=>p.matches);return HZ(d,g)},J8=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=FZ(o,n);oe(c,l=>{const d=o.getParent(l.startMarker.start,o.isBlock),g=p=>p===d;_k(l.pattern)?Y8(e,l.pattern,l.endMarker,g):IZ(e,l.pattern,l.startMarker,l.endMarker,g),G8(o,l.endMarker,g),G8(o,l.startMarker,g)}),e.selection.moveToBookmark(r)},Q8=(e,n,o)=>RV(n,0,n).map(r=>{const c=r.container;return AR(c,o.start.length,n).each(l=>{const d=e.createRng();d.setStart(c,0),d.setEnd(l.container,l.offset),CC(e,d,g=>g===n)}),c}),e7=e=>(n,o)=>{const r=n.dom,c=o.pattern,l=Ek(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),d=(g,p)=>{const y=p.get(g);return Kn(y)&&Qo(y).exists(E=>ht(E,"block"))};return q0(n,l).each(g=>{c.type==="block-format"?d(c.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,g,c),n.formatter.apply(c.format)}):c.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,g,c),n.execCommand(c.cmd,!1,c.value)})}),!0},t7=e=>Zn(e,(n,o)=>o.start.length-n.start.length),n7=e=>(n,o)=>{const r=t7(n),c=o.replace(ks," ");return ro(r,l=>e(l,o,c))},xC=(e,n)=>(o,r,c,l,d)=>{var g;d===void 0&&(d=(g=r.textContent)!==null&&g!==void 0?g:"");const p=o.dom,y=or(o);return p.is(r,y)?e(c.blockPatterns,d).map(E=>n&&Ee.trim(d).length===E.start.length?[]:[{pattern:E,range:yC(p,p.getRoot(),r,0,r,0,l)}]).getOr([]):[]},VZ=e=>/^\s[^\s]/.test(e),zZ=e7((e,n,o)=>{Q8(e,n,o).each(r=>{const c=U.fromDom(r),l=Jg(c);VZ(l)&&VT(c,l.slice(1))})}),UZ=n7((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),ZZ=xC(UZ,!0),WZ=(e,n)=>{const o=e.selection.getRng();return q0(e,o).map(r=>{var c;const l=Math.max(0,o.startOffset),d=kk(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),g=X8(e,r,o.startContainer,l,d,!0),p=ZZ(e,r,d,!0);return{inlineMatches:g,blockMatches:p}}).filter(({inlineMatches:r,blockMatches:c})=>c.length>0||r.length>0)},wC=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();oe(n,r=>zZ(e,r)),e.selection.moveToBookmark(o)},jZ=e7(Q8),GZ=n7((e,n,o)=>n===e.start||o===e.start),qZ=xC(GZ,!1),KZ=(e,n)=>{const o=e.selection.getRng();return q0(e,o).map(r=>{const c=Math.max(0,o.startOffset),l=Tk(e.dom,r,o.startContainer,c),d=kk(n,r,l);return qZ(e,r,d,!1,l)}).filter(r=>r.length>0)},YZ=(e,n)=>{oe(n,o=>jZ(e,o))},XZ=(e,n)=>WZ(e,n).fold(we,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{$P(e),J8(e,o),wC(e,r);const c=e.selection.getRng(),l=yE(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),l.each(d=>{const g=d.container;g.data.charAt(d.offset-1)===Lp&&(g.deleteData(d.offset-1,1),mp(e.dom,g.parentNode,p=>p===e.dom.getRoot()))})}),!0)),JZ=(e,n)=>{const o=e.selection.getRng();q0(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),l=Tk(e.dom,r,o.startContainer,c),d=kk(n,r,l),g=X8(e,r,o.startContainer,c,d,!1);g.length>0&&e.undoManager.transact(()=>{J8(e,g)})})},QZ=(e,n)=>KZ(e,n).fold(we,o=>(e.undoManager.transact(()=>{YZ(e,o)}),!0)),o7=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},s7=(e,n)=>o7(e,n,(o,r)=>o===r.keyCode&&!Qe.modifierPressed(r)),eW=(e,n)=>o7(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),r7=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>mr(dx(e).filter(d=>d.type==="inline-command"||d.type==="block-command"?e.queryCommandSupported(d.cmd):!0),I_(e)),c=()=>JB(e);e.on("keydown",d=>{if(d.keyCode===13&&!Qe.modifierPressed(d)&&e.selection.isCollapsed()&&e.selection.isEditable()){const g=Xl(r(),"enter");(g.inlinePatterns.length>0||g.blockPatterns.length>0||c())&&XZ(e,g)&&d.preventDefault()}},!0),e.on("keydown",d=>{if(d.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const g=Xl(r(),"space");(g.blockPatterns.length>0||c())&&QZ(e,g)&&d.preventDefault()}},!0);const l=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const d=Xl(r(),"space");(d.inlinePatterns.length>0||c())&&JZ(e,d)}};e.on("keyup",d=>{s7(o,d)&&l()}),e.on("keypress",d=>{eW(n,d)&&rt.setEditorTimeout(e,l)})},tW=e=>{r7(e)},nW=e=>{const n=Ee.each,o=Qe.BACKSPACE,r=Qe.DELETE,c=e.dom,l=e.selection,d=e.parser,g=Tt.browser,p=g.isFirefox(),y=g.isChromium()||g.isSafari(),E=Tt.deviceType.isiPhone()||Tt.deviceType.isiPad(),T=Tt.os.isMacOS()||Tt.os.isiOS(),_=(ze,yt)=>{try{e.getDoc().execCommand(ze,!1,String(yt))}catch{}},R=ze=>ze.isDefaultPrevented(),B=()=>{const ze=St=>{const $e=c.create("body"),Kt=St.cloneContents();return $e.appendChild(Kt),l.serializer.serialize($e,{format:"html"})},yt=St=>{const $e=ze(St),Kt=c.createRng();Kt.selectNode(e.getBody());const en=ze(Kt);return $e===en};e.on("keydown",St=>{const $e=St.keyCode;if(!R(St)&&($e===r||$e===o)&&e.selection.isEditable()){const Kt=e.selection.isCollapsed(),en=e.getBody();if(Kt&&!Hs(e.schema,en)||!Kt&&!yt(e.selection.getRng()))return;St.preventDefault(),e.setContent(""),en.firstChild&&c.isBlock(en.firstChild)?e.selection.setCursorLocation(en.firstChild,0):e.selection.setCursorLocation(en,0),e.nodeChanged()}})},P=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},I=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",ze=>{let yt;if(ze.target===e.getDoc().documentElement)if(yt=l.getRng(),e.getBody().focus(),ze.type==="mousedown"){if(Fc(yt.startContainer))return;l.placeCaretAt(ze.clientX,ze.clientY)}else l.setRng(yt)})},Z=()=>{e.on("keydown",ze=>{if(!R(ze)&&ze.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(l.isCollapsed()&&l.getRng().startOffset===0){const yt=l.getNode(),St=yt.previousSibling;if(yt.nodeName==="HR"){c.remove(yt),ze.preventDefault();return}St&&St.nodeName&&St.nodeName.toLowerCase()==="hr"&&(c.remove(St),ze.preventDefault())}}})},Q=()=>{Range.prototype.getClientRects||e.on("mousedown",ze=>{if(!R(ze)&&ze.target.nodeName==="HTML"){const yt=e.getBody();yt.blur(),rt.setEditorTimeout(e,()=>{yt.focus()})}})},ee=()=>{const ze=R_(e);e.on("click",yt=>{const St=yt.target;/^(IMG|HR)$/.test(St.nodeName)&&c.isEditable(St)&&(yt.preventDefault(),e.selection.select(St),e.nodeChanged()),St.nodeName==="A"&&c.hasClass(St,ze)&&St.childNodes.length===0&&c.isEditable(St.parentNode)&&(yt.preventDefault(),l.select(St))})},ne=()=>{const ze=()=>{const St=c.getAttribs(l.getStart().cloneNode(!1));return()=>{const $e=l.getStart();$e!==e.getBody()&&(c.setAttrib($e,"style",null),n(St,Kt=>{$e.setAttributeNode(Kt.cloneNode(!0))}))}},yt=()=>!l.isCollapsed()&&c.getParent(l.getStart(),c.isBlock)!==c.getParent(l.getEnd(),c.isBlock);e.on("keypress",St=>{let $e;return!R(St)&&(St.keyCode===8||St.keyCode===46)&&yt()?($e=ze(),e.getDoc().execCommand("delete",!1),$e(),St.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",St=>{if(!R(St)&&yt()){const $e=ze();rt.setEditorTimeout(e,()=>{$e()})}})},ye=()=>{e.on("keydown",ze=>{if(!R(ze)&&ze.keyCode===o&&l.isCollapsed()&&l.getRng().startOffset===0){const yt=l.getNode().previousSibling;if(yt&&yt.nodeName&&yt.nodeName.toLowerCase()==="table")return ze.preventDefault(),!1}return!0})},Oe=()=>{e.on("keydown",ze=>{if(R(ze)||ze.keyCode!==Qe.BACKSPACE)return;let yt=l.getRng();const St=yt.startContainer,$e=yt.startOffset,Kt=c.getRoot();let en=St;if(!(!yt.collapsed||$e!==0)){for(;en.parentNode&&en.parentNode.firstChild===en&&en.parentNode!==Kt;)en=en.parentNode;en.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,en),yt=c.createRng(),yt.setStart(St,0),yt.setEnd(St,0),l.setRng(yt))}})},je=()=>{const ze=()=>{_("StyleWithCSS",!1),_("enableInlineTableEditing",!1),jr(e)||_("enableObjectResizing",!1)};ix(e)||e.on("BeforeExecCommand mousedown",ze)},he=()=>{const ze=()=>{n(c.select("a:not([data-mce-block])"),yt=>{var St;let $e=yt.parentNode;const Kt=c.getRoot();if(($e==null?void 0:$e.lastChild)===yt){for(;$e&&!c.isBlock($e);){if(((St=$e.parentNode)===null||St===void 0?void 0:St.lastChild)!==$e||$e===Kt)return;$e=$e.parentNode}c.add($e,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",yt=>{(yt.type==="setcontent"||yt.command==="mceInsertLink")&&ze()})},ue=()=>{e.on("init",()=>{_("DefaultParagraphSeparator",or(e))})},Ce=ze=>{const yt=ze.getBody(),St=ze.selection.getRng();return St.startContainer===St.endContainer&&St.startContainer===yt&&St.startOffset===0&&St.endOffset===yt.childNodes.length},qe=()=>{e.on("keyup focusin mouseup",ze=>{!Qe.modifierPressed(ze)&&!Ce(e)&&l.normalize()},!0)},ut=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},At=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},qt=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",ze=>{let yt;ze.target.nodeName==="HTML"&&(yt=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(yt),e.selection.normalize(),e.nodeChanged())}))},_n=()=>{T&&e.on("keydown",ze=>{Qe.metaKeyPressed(ze)&&!ze.shiftKey&&(ze.keyCode===37||ze.keyCode===39)&&(ze.preventDefault(),e.selection.getSel().modify("move",ze.keyCode===37?"backward":"forward","lineboundary"))})},Pn=()=>{e.on("click",ze=>{let yt=ze.target;do if(yt.tagName==="A"){ze.preventDefault();return}while(yt=yt.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Ro=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",ze=>{ze.preventDefault()})})},ar=()=>{d.addNodeFilter("br",ze=>{let yt=ze.length;for(;yt--;)ze[yt].attr("class")==="Apple-interchange-newline"&&ze[yt].remove()})},Os=nt,Pe=()=>{if(!p||e.removed)return!1;const ze=e.selection.getSel();return!ze||!ze.rangeCount||ze.rangeCount===0},lt=()=>{y&&(I(),ee(),Ro(),P(),E&&(At(),qt(),Pn())),p&&(Q(),je(),ut(),_n())},mn=()=>{Oe(),B(),Tt.windowsPhone||qe(),y&&(I(),ee(),ue(),Ro(),ye(),ar(),E?(At(),qt(),Pn()):P()),p&&(Z(),Q(),ne(),je(),he(),ut(),_n(),ye())};return qc(e)?lt():mn(),{refreshContentEditable:Os,isHidden:Pe}},a7=e=>e.toLowerCase()==="gpl",K0=e=>e.length>=64&&e.length<=255,oW=e=>a7(e)||K0(e)?"VALID":"INVALID",c7=e=>{const n=rL(e);!re(aL(e))&&(uo(n)||oW(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},Ok=Jn.DOM,sW=(e,n)=>{const o=U.fromDom(e.getBody()),r=_d(ui(o)),c=U.fromTag("style");Is(c,"type","text/css"),qo(c,U.fromText(n)),qo(r,c),e.on("remove",()=>{Xn(c)})},rW=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Dk=e=>Qa(e,n=>uo(n)===!1),Mk=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return Dk({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:rW(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:fx(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},i7=e=>{const n=e.options.get;return Dk({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},l7=e=>{const n=e.options.get;return{...Mk(e),...i7(e),...Dk({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},aW=e=>{const n=Vh(Mk(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,l="data-mce-"+r;let d=o.length;for(;d--;){const g=o[d];let p=g.attr(r);if(p&&!g.attr(l)){if(p.indexOf("data:")===0||p.indexOf("blob:")===0)continue;r==="style"?(p=c.serializeStyle(c.parseStyle(p),g.name),p.length||(p=null),g.attr(l,p),g.attr(r,p)):r==="tabindex"?(g.attr(l,p),g.attr(r,null)):g.attr(l,e.convertURL(p,r,g.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],l=c.attr("type")||"no/type";l.indexOf("mce-")!==0&&c.attr("type","mce-"+l)}}),XB(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const l=o[c];l.type=8,l.name="#comment",l.value="[CDATA["+e.dom.encode((r=l.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const l=o[r];l.isEmpty(c)&&l.getAll("br").length===0&&l.append(new sa("br",1))}}),n},cW=e=>{const n=dv(e);n&&rt.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},iW=e=>{const n=e.dom.getRoot();!e.inline&&(!Tv(e)||e.selection.getStart(!0)===n)&&Mr(n).each(o=>{const r=o.getNode(),c=sl(r)?Mr(r).getOr(o):o;e.selection.setRng(c.toRange())})},lW=e=>{e.bindPendingEventDelegates(),e.initialized=!0,fB(e),e.focus(!0),iW(e),e.nodeChanged({initial:!0});const n=$B(e);Ht(n)&&n.call(e,e),cW(e),Xu(e)&&RM(e,!0)},Rk=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,uW=(e,n,o)=>{const{pass:r,fail:c}=Rs(n,g=>tinymce.Resource.has(ru(g))),d=[...r.map(g=>{const p=tinymce.Resource.get(ru(g));return re(p)?Promise.resolve(Rk(e).loadRawCss(g,p)):Promise.resolve()}),Rk(e).loadAll(c)];return e.inline?d:d.concat([e.ui.styleSheetLoader.loadAll(o)])},u7=e=>{const n=Rk(e),o=T_(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},l=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let p="";Ee.each(e.contentStyles,y=>{p+=y+`\r
`}),e.dom.addStyle(p)}const d=Promise.all(uW(e,r,o)).then(l).catch(l),g=TB(e);return g&&sW(e,g),d},dW=e=>{const n=e.getDoc(),o=e.getBody();p_(e),HB(e)||(n.body.spellcheck=!1,Ok.setAttrib(o,"spellcheck","false")),e.quirks=nW(e),b_(e);const r=_B(e);r!==void 0&&(o.dir=r);const c=VB(e);c&&e.on("BeforeSetContent",l=>{Ee.each(c,d=>{l.content=l.content.replace(d,g=>"<!--mce:protected "+escape(g)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",l=>{e.composing=l.type==="compositionstart"})},mW=e=>{qc(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},EC=e=>{e.removed!==!0&&(mW(e),lW(e))},Nk=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},Pk=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(Ok.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=ix(e),e._editableRoot=FB(e),!gv(e)&&e.hasEditableRoot()&&(e.inline&&Ok.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=VH(e),e.schema=In(i7(e)),e.dom=Jn(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:tx(e),referrerPolicy:nx(e),onSetAttrib:d=>{e.dispatch("SetAttrib",d)}}),e.parser=aW(e),e.serializer=gM(l7(e),e),e.selection=mM(e.dom,e.getWin(),e.serializer,e),e.annotator=zn(e),e.formatter=Qu(e),e.undoManager=ZM(e),e._nodeChangeDispatcher=new fU(e),e._selectionOverrides=NZ(e),Y9(e),x8(e),cE(e),qc(e)||(uZ(e),tW(e));const c=mU(e);yy(e,c),eV(e),KH(e),uC(e);const l=XD(e);dW(e),c7(e),l.fold(()=>{const d=Nk(e);u7(e).then(()=>{EC(e),d()})},d=>{e.setProgressState(!0),u7(e).then(()=>{d().then(g=>{e.setProgressState(!1),EC(e),aM(e)},g=>{e.notificationManager.open({type:"error",text:String(g)}),EC(e),aM(e)})})})},d7=Ue,fW=(e,n,o)=>w(e,n,d7,o),Bk=Jn.DOM,gW=(e,n,o,r)=>{const c=U.fromTag("iframe");return r.each(l=>Is(c,"tabindex",l)),li(c,o),li(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),_u(c,"tox-edit-area__iframe"),c},m7=e=>{let n=pB(e)+"<html><head>";w_(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Ba(e),r=nG(e),c=e.translate(Ql(e));return E_(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+E_(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},f7=(e,n)=>{const o=Tt.browser.isFirefox()?Ql(e):"Rich Text Area",r=e.translate(o),c=Ji(U.fromDom(e.getElement()),"tabindex").bind(fd),l=gW(e.id,r,tG(e),c).dom;l.onload=()=>{l.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=l,e.iframeHTML=m7(e),Bk.add(n.iframeContainer,l)},hW=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,Pk(e)};if(mx(e)||Tt.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=fW(U.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},pW=(e,n)=>{f7(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=Bk.isHidden(n.editorContainer)),e.getElement().style.display="none",Bk.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,hW(e)},kC=Jn.DOM,TC=(e,n,o)=>{const r=Wh.get(o),c=Wh.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Ee.trim(o),r&&Ee.inArray(n,o)===-1){if(e.plugins[o])return;try{const l=r(e,c)||{};e.plugins[o]=l,Ht(l.init)&&(l.init(e,c),n.push(o))}catch(l){_M(e,o,l)}}},_C=e=>e.replace(/^\-/,""),rd=e=>{const n=[];oe(iv(e),o=>{TC(e,n,_C(o))})},AC=e=>{const n=Ee.trim(ex(e)),o=e.ui.registry.getAll().icons,r={...W2.get("default").icons,...W2.get(n).icons};He(r,(c,l)=>{ht(o,l)||e.ui.registry.addIcon(l,c)})},gp=e=>{const n=sh(e);if(re(n)){const o=hl.get(n);e.theme=o(e,hl.urls[n])||{},Ht(e.theme.init)&&e.theme.init(e,hl.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},g7=e=>{const n=ax(e),o=Zh.get(n);e.model=o(e,Zh.urls[n])},bW=e=>{const n=e.theme.renderUI;return n?n():OC(e)},vW=e=>{const n=e.getElement(),r=sh(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},Lk=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),yW=e=>{const n=kC.create("div");return kC.insertAfter(n,e),Lk(n,n)},OC=e=>{const n=e.getElement();return e.inline?Lk(null):yW(n)},DC=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,re(sh(e))?bW(e):Ht(sh(e))?vW(e):OC(e)},bm=(e,n)=>{const o={show:D.from(n.show).getOr(nt),hide:D.from(n.hide).getOr(nt),isEnabled:D.from(n.isEnabled).getOr(Ue),setEnabled:r=>{r&&(e.mode.get()==="readonly"||Xu(e))||D.from(n.setEnabled).each(l=>l(r))}};e.ui={...e.ui,...o}},eg=async e=>{e.dispatch("ScriptsLoaded"),AC(e),gp(e),g7(e),rd(e);const n=await DC(e);bm(e,D.from(n.api).getOr({})),e.editorContainer=n.editorContainer,au(e),e.inline?Pk(e):pW(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},vm=Jn.DOM,h7=e=>e.charAt(0)==="-",CW=(e,n)=>{const o=ox(n),r=wB(n);if(!ll.hasCode(o)&&o!=="en"){const c=ls(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{OH(n,c,o)})}},SW=(e,n)=>{const o=sh(e);if(re(o)&&!h7(o)&&!ht(hl.urls,o)){const r=AB(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;hl.load(o,c).catch(()=>{DH(e,c,o)})}},xW=(e,n)=>{const o=ax(e);if(o!=="plugin"&&!ht(Zh.urls,o)){const r=OB(e),c=re(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;Zh.load(o,c).catch(()=>{f0(e,c,o)})}},wW=e=>D.from(vB(e)).filter(ls).map(n=>({url:n,name:D.none()})),p7=(e,n,o)=>D.from(n).filter(r=>ls(r)&&!W2.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:D.some(r)})),b7=(e,n,o)=>{const r=p7(n,"default",o),c=wW(n).orThunk(()=>p7(n,ex(n),""));oe(Ep([r,c]),l=>{e.add(l.url).catch(()=>{TM(n,l.url,l.name.getOrUndefined())})})},EW=(e,n)=>{const o=(r,c)=>{Wh.load(r,c).catch(()=>{AH(e,c,r)})};He(Si(e),(r,c)=>{o(c,r),e.options.set("plugins",iv(e).concat(c))}),oe(iv(e),r=>{r=Ee.trim(r),r&&!Wh.urls[r]&&!h7(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},kW=e=>{const n=sh(e);return!re(n)||Ae(hl.get(n))},TW=e=>{const n=ax(e);return Ae(Zh.get(n))},hq=(e,n)=>{const o=Gl.ScriptLoader,r=()=>{!e.removed&&kW(e)&&TW(e)&&eg(e)};SW(e,n),xW(e,n),CW(o,e),b7(o,e,n),EW(e,n),o.loadQueue().then(r,r)},_W=(e,n)=>yS.forElement(e,{contentCssCors:M_(n),referrerPolicy:nx(n)}),Ik=e=>{const n=e.id;ll.setCode(ox(e));const o=()=>{vm.unbind(window,"ready",o),e.render()};if(!Ym.Event.domLoaded){vm.bind(window,"ready",o);return}if(!e.getElement())return;const r=U.fromDom(e.getElement()),c=ab(r);e.on("remove",()=>{Br(r.dom.attributes,d=>Eo(r,d.name)),li(r,c)}),e.ui.styleSheetLoader=_W(r,e),cx(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const l=e.getElement().form||vm.getParent(n,"form");l&&(e.formElement=l,BB(e)&&!ko(e.getElement())&&(vm.insertAfter(vm.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=d=>{e.dispatch(d.type,d)},vm.bind(l,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),LB(e)&&!l.submit.nodeType&&!l.submit.length&&!l._mceOldSubmit&&(l._mceOldSubmit=l.submit,l.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),l._mceOldSubmit(l)))),e.windowManager=r3(e),e.notificationManager=TH(e),tL(e)&&e.on("GetContent",d=>{d.save&&(d.content=vm.encode(d.content))}),IB(e)&&e.on("submit",()=>{e.initialized&&e.save()}),O_(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),hq(e,e.suffix)},AW=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,Xu(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),Zs(e,n))},OW=e=>e._editableRoot,v7=(e,n)=>({sections:Ie(e),options:Ie(n)}),y7=M().deviceType,Fk=y7.isPhone(),DW=y7.isTablet(),tg=e=>{if(dn(e))return[];{const n=Kn(e)?e:e.split(/[ ,]/),o=Dt(n,Qn);return vt(o,ls)}},MW=(e,n)=>{const o=Oa(n,(r,c)=>kt(e,c));return v7(o.t,o.f)},RW=(e,n,o={})=>{const r=e.sections(),c=Bn(r,n).getOr({});return Ee.extend({},o,c)},$k=(e,n)=>ht(e.sections(),n),NW=(e,n)=>$k(e,n)?e.sections()[n]:{},C7=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Bn(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),Hk=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Ee.extend({},e.external_plugins,r):r},S7=(e,n)=>[...tg(e),...tg(n)],Vk=(e,n,o,r)=>e&&$k(n,"mobile")?r:o,PW=(e,n,o,r)=>{const c=tg(o.forced_plugins),l=tg(r.plugins),d=NW(n,"mobile"),g=d.plugins?tg(d.plugins):l,p=Vk(e,n,l,g),y=S7(c,p);return Ee.extend(r,{forced_plugins:c,plugins:y})},pq=(e,n)=>e&&$k(n,"mobile"),bq=(e,n,o,r,c)=>{var l;const d=e?{mobile:C7((l=c.mobile)!==null&&l!==void 0?l:{},n)}:{},g=MW(["mobile"],gm(d,c)),p=Ee.extend(o,r,g.options(),pq(e,g)?RW(g,"mobile"):{},{external_plugins:Hk(r,g.options())});return PW(e,g,r,p)},BW=(e,n)=>{const o=zR(n);return bq(Fk||DW,Fk,o,e,o)},x7=(e,n)=>q$(e,n),LW=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{oe("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},IW=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return kn(c,l=>Ae(e.formatter.matchNode(l,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},FW=e=>{LW(e),IW(e)},vq=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Tt.os.isMacOS()||Tt.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},yq=(e,n,o,r)=>{const c=U.fromDom(e.getRoot());return M1(c,fe.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),wh(c,fe.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},w7=e=>{if(typeof e!="string"){const n=Ee.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},E7=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?yq(r,o.getRng(),n,e.schema):n},MC=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=w7(n);N4(e,{...r,content:E7(e,o),format:"html",set:!1,selection:!0}).each(c=>{const l=G$(e,c.content,r);$f(e,l,c),e.addVisual()})}},$W=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{MC(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{MC(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{MC(e,r)},mceInsertContent:(n,o,r)=>{MC(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(ZB(e))}})},HW={"font-size":"size","font-family":"face"},Cq=Sd("font"),Sq=(e,n,o)=>{const r=l=>Tg(l,e).orThunk(()=>Cq(l)?Bn(HW,e).bind(d=>Ji(l,d)):D.none()),c=l=>xn(U.fromDom(n),l);return U1(U.fromDom(o),l=>r(l),c)},xq=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),VW=(e,n)=>D.from(Jn.DOM.getStyle(n,e,!0)),zW=e=>(n,o)=>D.from(o).map(U.fromDom).filter(ha).bind(r=>Sq(e,n,r.dom).or(VW(e,r.dom))).getOr(""),UW=zW("font-size"),ng=S(xq,zW("font-family")),zk=e=>Mr(e.getBody()).bind(n=>{const o=n.container();return D.from(Te(o)?o.parentNode:o)}),RC=e=>D.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?D.none():D.from(e.selection.getStart(!0))}),k7=(e,n)=>RC(e).orThunk(Ye(zk,e)).map(U.fromDom).filter(ha).bind(n),NC=(e,n)=>k7(e,Xa(D.some,n)),Uk=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=QB(e),c=eL(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},ZW=e=>{const n=e.split(/\s*,\s*/);return Dt(n,o=>o.indexOf(" ")!==-1&&!(Se(o,'"')||Se(o,"'"))?`'${o}'`:o).join(",")},WW=(e,n)=>{const o=Uk(e,n);e.formatter.toggle("fontname",{value:ZW(o)}),e.nodeChanged()},jW=e=>NC(e,n=>ng(e.getBody(),n.dom)).getOr(""),GW=(e,n)=>{e.formatter.toggle("fontsize",{value:Uk(e,n)}),e.nodeChanged()},qW=e=>NC(e,n=>UW(e.getBody(),n.dom)).getOr(""),KW=e=>NC(e,n=>{const o=U.fromDom(e.getBody()),r=U1(n,l=>Tg(l,"line-height"),Ye(xn,o)),c=()=>{const l=parseFloat(ts(n,"line-height")),d=parseFloat(ts(n,"font-size"));return String(l/d)};return r.getOrThunk(c)}).getOr(""),ym=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},YW=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{WW(e,c)},FontSize:(o,r,c)=>{GW(e,c)},LineHeight:(o,r,c)=>{ym(e,c)},Lang:(o,r,c)=>{var l;n(o,{value:c.code,customValue:(l=c.customCode)!==null&&l!==void 0?l:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(re(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},T7=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>jW(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>qW(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>KW(e))},XW=e=>{YW(e),T7(e)},PC=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},JW=e=>{e.editorCommands.addCommands({Indent:()=>{G9(e)},Outdent:()=>{K6(e)}}),e.editorCommands.addCommands({Outdent:()=>j6(e)},"state")},QW=e=>{const n=(o,r,c)=>{if(e.mode.isReadOnly())return;const l=re(c)?{href:c}:c,d=e.dom.getParent(e.selection.getNode(),"a");Ot(l)&&re(l.href)&&(l.href=l.href.replace(/ /g,"%20"),(!d||!l.href)&&e.formatter.remove("link"),l.href&&e.formatter.apply("link",l,d))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},ej=(e,n,o,r)=>{const c=e.dom,l=g=>c.isBlock(g)&&g.parentElement===o,d=l(n)?n:c.getParent(r,l,o);return D.from(d).map(U.fromDom)},Zk=(e,n)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),c=n?e.selection.getStart():e.selection.getEnd(),l=n?r.startContainer:r.endContainer,d=$0(o,l);if(!d||!d.isContentEditable)return;const g=n?ta:di,p=or(e);ej(e,c,d,l).each(y=>{const E=Az(e,l,y.dom,d,!1,p);g(y,U.fromDom(E)),e.selection.setCursorLocation(E,0),e.dispatch("NewBlock",{newBlock:E}),F0(e,"insertParagraph")})},tj=e=>Zk(e,!0),nj=e=>Zk(e,!1),oj=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{tj(e)},InsertNewBlockAfter:()=>{nj(e)}})},sj=e=>{e.editorCommands.addCommands({insertParagraph:()=>{V0(kN,e)},mceInsertNewLine:(n,o,r)=>{NN(e,r)},InsertLineBreak:(n,o,r)=>{V0(ON,e)}})},Wk=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),l=>Ze(l)&&c++===r?(e.selection.select(l),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),ve);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},rj=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const l=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(l)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{vh(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},aj=e=>{FW(e),vq(e),PC(e),Wk(e),$W(e),QW(e),JW(e),oj(e),sj(e),XW(e),rj(e)},Cs=["toggleview"],_7=e=>kt(Cs,e.toLowerCase());class A7{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const l=this.editor,d=n.toLowerCase(),g=c==null?void 0:c.skip_focus;if(l.removed||(d!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(d)&&!g?l.focus():UL(l)),l.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const y=this.commands.exec[d];return Ht(y)?(y(d,o,r),l.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!_7(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return Ht(r)?r(o):!1}queryCommandValue(n){if(!_7(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return Ht(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;He(n,(c,l)=>{oe(l.toLowerCase().split(","),d=>{r[o][d]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(l,d,g)=>o.call(r??this.editor,d,g)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const jk=Ee.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class BC{static isNative(n){return!!jk[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||we}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=Up(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const l=this.bindings[r];if(l)for(let d=0,g=l.length;d<g;d++){const p=l[d];if(!p.removed){if(p.once&&this.off(r,p.func),c.isImmediatePropagationStopped())return c;if(p.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=we),o){const l={func:o,removed:!1};c&&Ee.extend(l,c);const d=n.toLowerCase().split(" ");let g=d.length;for(;g--;){const p=d[g];let y=this.bindings[p];y||(y=[],this.toggleEvent(p,!0)),r?y=[l,...y]:y=[...y,l],this.bindings[p]=y}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const l=r[c];let d=this.bindings[l];if(!l)return He(this.bindings,(g,p)=>{this.toggleEvent(p,!1),delete this.bindings[p]}),this;if(d){if(!o)d.length=0;else{const g=Rs(d,p=>p.func===o);d=g.fail,this.bindings[l]=d,oe(g.pass,p=>{p.removed=!0})}d.length||(this.toggleEvent(n,!1),delete this.bindings[l])}}}else He(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const og=e=>(e._eventDispatcher||(e._eventDispatcher=new BC({scope:e,toggleEvent:(n,o)=>{BC.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),Gk={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return Up(e.toLowerCase(),n??{},r);const c=og(r).dispatch(e,n);if(o!==!1&&r.parent){let l=r.parent();for(;l&&!c.isPropagationStopped();)l.dispatch(e,c,!1),l=l.parent?l.parent():void 0}return c},on(e,n,o){return og(this).on(e,n,o)},off(e,n){return og(this).off(e,n)},once(e,n){return og(this).once(e,n)},hasEventListeners(e){return og(this).has(e)}},LC=Jn.DOM;let sg;const IC=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=rx(e);return o?(e.eventRoot||(e.eventRoot=LC.select(o)[0]),e.eventRoot):e.getBody()},cj=e=>!e.hidden&&!Xu(e),O7=(e,n,o)=>{cj(e)?e.dispatch(n,o):Xu(e)&&LH(e,o)},D7=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=IC(e,n);if(rx(e)){if(sg||(sg={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||sg&&(He(sg,(c,l)=>{e.dom.unbind(IC(e,l))}),sg=null)})),sg[n])return;const r=c=>{const l=c.target,d=e.editorManager.get();let g=d.length;for(;g--;){const p=d[g].getBody();(p===l||LC.isChildOf(l,p))&&O7(d[g],n,c)}};sg[n]=r,LC.bind(o,n,r)}else{const r=c=>{O7(e,n,c)};LC.bind(o,n,r),e.delegates[n]=r}},M7={...Gk,bindPendingEventDelegates(){const e=this;Ee.each(e._pendingNativeEvents,n=>{D7(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?D7(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(IC(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(He(e.delegates,(r,c)=>{e.dom.unbind(IC(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},hp=e=>re(e)?{value:e.split(/[ ,]/),valid:!0}:Sn(e,re)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},yl=e=>{const n=(()=>{switch(e){case"array":return Kn;case"boolean":return $t;case"function":return Ht;case"number":return Po;case"object":return Ot;case"string":return re;case"string[]":return hp;case"object[]":return o=>Sn(o,Ot);case"regexp":return o=>xt(o,RegExp);default:return Ue}})();return o=>qk(o,n,`The value must be a ${e}.`)},ij=e=>re(e.processor),R7=(e,n)=>{const o=Go(n.message)?"":`. ${n.message}`;return e+o},N7=e=>e.valid,qk=(e,n,o="")=>{const r=n(e);return $t(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},lj=(e,n,o)=>{if(!uo(n)){const r=qk(n,o);if(N7(r))return r.value;console.error(R7(`Invalid default value passed for the "${e}" option`,r))}},uj=(e,n,o=n)=>{const r={},c={},l=(R,B,P)=>{const I=qk(B,P);return N7(I)?(c[R]=I.value,!0):(console.warn(R7(`Invalid value passed for the ${R} option`,I)),!1)},d=(R,B)=>{const P=ij(B)?yl(B.processor):B.processor,I=lj(R,B.default,P);r[R]={...B,default:I,processor:P},Bn(c,R).orThunk(()=>Bn(n,R)).each(Q=>l(R,Q,P))},g=R=>ht(r,R);return{register:d,isRegistered:g,get:R=>Bn(c,R).orThunk(()=>Bn(r,R).map(B=>B.default)).getOrUndefined(),set:(R,B)=>{if(g(R)){const P=r[R];return P.immutable?(console.error(`"${R}" is an immutable option and cannot be updated`),!1):l(R,B,P.processor)}else return console.warn(`"${R}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:R=>{const B=g(R);return B&&delete c[R],B},isSet:R=>ht(c,R),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(R,B)=>$t(B)||Po(B)||re(B)||q(B)||Kn(B)||la(B)?B:Object.prototype.toString.call(B))))}catch(R){console.error(R)}}}},dj=(e,n)=>{e.dom.contentEditable="true"},mj=(e,n)=>{const o=U.fromDom(e.getBody());n?(e.readonly=!0,e.hasEditableRoot()&&dj(o),DM(e)):(e.readonly=!1,MM(e))},Y0=e=>e.readonly,wq=e=>{e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",n=>{Y0(e)&&n.preventDefault()}),e.on("BeforeExecCommand",n=>{(n.command==="Undo"||n.command==="Redo")&&Y0(e)&&n.preventDefault()}),e.on("input",n=>{if(!n.isComposing&&Y0(e)){const o=e.undoManager.add();Ae(o)&&e.undoManager.undo()}}),e.on("compositionend",()=>{if(Y0(e)){const n=e.undoManager.add();Ae(n)&&e.undoManager.undo()}})},fj=["design","readonly"],P7=(e,n,o,r)=>{const c=o[n.get()],l=o[r];try{l.activate()}catch(d){console.error(`problem while activating editor mode ${r}:`,d);return}c.deactivate(),c.editorReadOnly!==l.editorReadOnly&&mj(e,l.editorReadOnly),n.set(r),ZS(e,r)},gj=(e,n,o,r)=>{if(!(r===o.get()||e.initialized&&Xu(e))){if(!ht(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?P7(e,o,n,r):e.on("init",()=>P7(e,o,n,r))}},hj=(e,n,o)=>{if(kt(fj,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},pj=e=>{const n=mo("design"),o=mo({design:{activate:nt,deactivate:nt,editorReadOnly:!1},readonly:{activate:nt,deactivate:nt,editorReadOnly:!0}});return wq(e),FH(e),{isReadOnly:()=>Y0(e),set:r=>gj(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(hj(o.get(),r,c))}}},Kk=Ee.each,Yk=Ee.explode,bj={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},B7=Ee.makeMap("alt,ctrl,shift,meta,access"),vj=e=>e in B7,yj=e=>{const n={},o=Tt.os.isMacOS()||Tt.os.isiOS();Kk(Yk(e.toLowerCase(),"+"),l=>{vj(l)?n[l]=!0:/^[0-9]{2,}$/.test(l)?n.keyCode=parseInt(l,10):(n.charCode=l.charCodeAt(0),n.keyCode=bj[l]||l.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in B7)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class L7{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(Kk(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const l=this,d=l.normalizeCommandFunc(r);return Kk(Yk(Ee.trim(n)),g=>{const p=l.createShortcut(g,o,d,c);l.shortcuts[p.id]=p}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Ee.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const l=Ee.map(Yk(n,">"),yj);return l[l.length-1]=Ee.extend(l[l.length-1],{func:r,scope:c||this.editor}),Ee.extend(l[0],{desc:this.editor.translate(o),subpatterns:l.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const Cj=()=>{const e={},n={},o={},r={},c={},l={},d={},g={},p={},y=(R,B)=>(P,I)=>{R[P.toLowerCase()]={...I,type:B}},E=(R,B)=>(P,I)=>{R[P.toLowerCase()]={type:B,...I}},T=(R,B)=>r[R.toLowerCase()]=B,_=(R,B)=>d[R.toLowerCase()]=B;return{addButton:y(e,"button"),addGroupToolbarButton:y(e,"grouptoolbarbutton"),addToggleButton:y(e,"togglebutton"),addMenuButton:y(e,"menubutton"),addSplitButton:y(e,"splitbutton"),addMenuItem:y(n,"menuitem"),addNestedMenuItem:y(n,"nestedmenuitem"),addToggleMenuItem:y(n,"togglemenuitem"),addAutocompleter:y(o,"autocompleter"),addContextMenu:y(c,"contextmenu"),addContextToolbar:y(l,"contexttoolbar"),addContextForm:E(l,"contextform"),addSidebar:y(g,"sidebar"),addView:y(p,"views"),addIcon:T,addContext:_,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:l,sidebars:g,views:p,contexts:d})}},Sj=()=>{const e=Cj();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},rg=Jn.DOM,I7=Ee.extend,xj=Ee.each;class FC{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,I7(this,M7);const c=this;this.id=n,this.hidden=!1;const l=BW(r.defaultOptions,o);this.options=uj(c,l,o),hB(c);const d=this.options.get;d("deprecation_warnings")&&vM(o,l);const g=d("suffix");g&&(r.suffix=g),this.suffix=r.suffix;const p=d("base_url");p&&r._setBaseUrl(p),this.baseUri=r.baseURI;const y=nx(c);y&&(Gl.ScriptLoader._setReferrerPolicy(y),Jn.DOM.styleSheetLoader._setReferrerPolicy(y));const E=M_(c);Ae(E)&&Jn.DOM.styleSheetLoader._setContentCssCors(E),Ur.languageLoad=d("language_load"),Ur.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new js(w_(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=cx(c),this.hasVisual=uv(c),this.shortcuts=new L7(this),this.editorCommands=new A7(this),aj(this);const T=d("cache_suffix");T&&(Tt.cacheSuffix=T.replace(/^[\?\&]+/,"")),this.ui={registry:Sj(),styleSheetLoader:void 0,show:nt,hide:nt,setEnabled:nt,isEnabled:Ue},this.mode=pj(c),r.dispatch("SetupEditor",{editor:this});const _=ux(c);Ht(_)&&_.call(c,c)}render(){Ik(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return br(this)}translate(n){return ll.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(Ae(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:Ue,default:o})),!c.isSet(n)&&!uo(o)?o:c.get(n)}hasPlugin(n,o){return kt(iv(this),n)?o?Wh.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(rg.show(n.getContainer()),rg.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(rg.hide(n.getContainer()),rg.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},l=ko(r)?r.value:r.innerHTML,d=o.setContent(l,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),d}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let l=o.getContent(c);const d={...c,content:l};if(d.no_events||o.dispatch("SaveContent",d),d.format==="raw"&&o.dispatch("RawSaveContent",d),l=d.content,ko(r))r.value=l;else{(n.is_removing||!o.inline)&&(r.innerHTML=l);const g=rg.getParent(o.id,"form");g&&xj(g.elements,p=>p.name===o.id?(p.value=l,!1):!0)}return d.element=c.element=r=null,d.set_dirty!==!1&&o.setDirty(!1),l}setContent(n,o){return im(this,n,o)}getContent(n){return LG(this,n)}insertContent(n,o){o&&(n=I7({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?im(this,this.startContent,{format:"raw"}):im(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||rg.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=rg.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,l=c.options.get,d=Ud(c);if(Ht(d))return d.call(c,n,r,!0,o);if(!l("convert_urls")||r==="link"||Ot(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const g=new js(n);return g.protocol!=="http"&&g.protocol!=="https"&&g.protocol!==""?n:l("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,l("remove_script_host")),n)}addVisual(n){x7(this,n)}setEditableRoot(n){AW(this,n)}hasEditableRoot(){return OW(this)}remove(){vH(this)}destroy(n){vc(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const pp=Jn.DOM,$C=Ee.each;let F7=!1,HC,xa=[];const X0=e=>{const n=e.type;$C(Cm.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},$7=e=>{if(e!==F7){const n=Jn.DOM;e?(n.bind(window,"resize",X0),n.bind(window,"scroll",X0)):(n.unbind(window,"resize",X0),n.unbind(window,"scroll",X0)),F7=e}},H7=e=>{const n=xa;return xa=vt(xa,o=>e!==o),Cm.activeEditor===e&&(Cm.activeEditor=xa.length>0?xa[0]:null),Cm.focusedEditor===e&&(Cm.focusedEditor=null),n.length!==xa.length},wj=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(H7(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},Ej=document.compatMode!=="CSS1Compat",Cm={...Gk,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"6.0",releaseDate:"2024-12-11",i18n:ll,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=js.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const l=document.getElementsByTagName("script");for(let d=0;d<l.length;d++){const g=l[d].src||"";if(g==="")continue;const p=g.substring(g.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(g)){p.indexOf(".min")!==-1&&(o=".min"),n=g.substring(0,g.lastIndexOf("/"));break}}if(!n&&document.currentScript){const d=document.currentScript.src;d.indexOf(".min")!==-1&&(o=".min"),n=d.substring(0,d.lastIndexOf("/"))}}e.baseURL=new js(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new js(e.baseURL),e.suffix=o,LA(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&He(r,(c,l)=>{Ur.PluginManager.urls[l]=c})},init(e){const n=this;let o;const r=Ee.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(E,T)=>E.inline&&T.tagName.toLowerCase()in r,l=E=>{let T=E.id;return T||(T=Bn(E,"name").filter(_=>!pp.get(_)).getOrThunk(pp.uniqueId),E.setAttribute("id",T)),T},d=E=>{const T=e[E];if(T)return T.apply(n,[])},g=E=>Tt.browser.isIE()||Tt.browser.isEdge()?(g0("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):Ej?(g0("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):re(E.selector)?pp.select(E.selector):Ae(E.target)?[E.target]:[];let p=E=>{o=E};const y=()=>{let E=0;const T=[];let _;const R=(B,P,I)=>{const Z=new FC(B,P,n);T.push(Z),Z.on("init",()=>{++E===_.length&&p(T)}),Z.targetElm=Z.targetElm||I,Z.render()};pp.unbind(window,"ready",y),d("onpageload"),_=ai(g(e)),Ee.each(_,B=>{wj(n.get(B.id))}),_=Ee.grep(_,B=>!n.get(B.id)),_.length===0?p([]):$C(_,B=>{c(e,B)?g0("Could not initialize inline editor on invalid inline target element",B):R(l(B),e,B)})};return pp.bind(window,"ready",y),new Promise(E=>{o?E(o):p=T=>{E(T)}})},get(e){return arguments.length===0?xa.slice(0):re(e)?ro(xa,n=>n.id===e).getOr(null):Po(e)&&xa[e]?xa[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&xa.push(e),$7(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),HC||(HC=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",HC))),e},createEditor(e,n){return this.add(new FC(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=xa.length-1;r>=0;r--)n.remove(xa[r]);return}if(re(e)){$C(pp.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,q(n.get(o.id))?null:(H7(o)&&n.dispatch("RemoveEditor",{editor:o}),xa.length===0&&window.removeEventListener("beforeunload",HC),o.remove(),$7(xa.length>0),o)},execCommand(e,n,o){var r;const c=this,l=Ot(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(l)){const d=o.options;new FC(l,d,c).render()}return!0}case"mceRemoveEditor":{const d=c.get(l);return d&&d.remove(),!0}case"mceToggleEditor":{const d=c.get(l);return d?(d.isHidden()?d.show():d.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{$C(xa,e=>{e.save()})},addI18n:(e,n)=>{ll.add(e,n)},translate:e=>ll.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new js(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new js(this.baseURL)}};Cm.setup();const kj=(()=>{const e=Vr(),n=l=>({items:l,types:Wo(l),getType:d=>Bn(l,d).getOrUndefined()}),o=l=>{e.set(l)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),V7=Math.min,ag=Math.max,VC=Math.round,z7=(e,n,o)=>{let r=n.x,c=n.y;const l=e.w,d=e.h,g=n.w,p=n.h,y=(o||"").split("");return y[0]==="b"&&(c+=p),y[1]==="r"&&(r+=g),y[0]==="c"&&(c+=VC(p/2)),y[1]==="c"&&(r+=VC(g/2)),y[3]==="b"&&(c-=d),y[4]==="r"&&(r-=l),y[3]==="c"&&(c-=VC(d/2)),y[4]==="c"&&(r-=VC(l/2)),bp(r,c,l,d)},Tj=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const l=z7(e,n,r[c]);if(l.x>=o.x&&l.x+l.w<=o.w+o.x&&l.y>=o.y&&l.y+l.h<=o.h+o.y)return r[c]}return null},_j=(e,n,o)=>bp(e.x-n,e.y-o,e.w+n*2,e.h+o*2),Aj=(e,n)=>{const o=ag(e.x,n.x),r=ag(e.y,n.y),c=V7(e.x+e.w,n.x+n.w),l=V7(e.y+e.h,n.y+n.h);return c-o<0||l-r<0?null:bp(o,r,c-o,l-r)},Oj=(e,n,o)=>{let r=e.x,c=e.y,l=e.x+e.w,d=e.y+e.h;const g=n.x+n.w,p=n.y+n.h,y=ag(0,n.x-r),E=ag(0,n.y-c),T=ag(0,l-g),_=ag(0,d-p);return r+=y,c+=E,o&&(l+=y,d+=E,r-=T,c-=_),l-=T,d-=_,bp(r,c,l-r,d-c)},bp=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),U7={inflate:_j,relativePosition:z7,findBestRelativePosition:Tj,intersect:Aj,clamp:Oj,create:bp,fromClientRect:e=>bp(e.left,e.top,e.width,e.height)},Tq=(e,n,o=1e3)=>{let r=!1,c=null;const l=y=>(...E)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),y.apply(null,E))},d=l(e),g=l(n);return{start:(...y)=>{!r&&c===null&&(c=setTimeout(()=>g.apply(null,y),o))},resolve:d,reject:g}},Mj=(()=>{const e={},n={},o={};return{load:(p,y)=>{const E=`Script at URL "${y}" failed to load`,T=`Script at URL "${y}" did not call \`tinymce.Resource.add('${p}', data)\` within 1 second`;if(e[p]!==void 0)return e[p];{const _=new Promise((R,B)=>{const P=Tq(R,B);n[p]=P.resolve,Gl.ScriptLoader.loadScript(y).then(()=>P.start(T),()=>P.reject(E))});return e[p]=_,_}},add:(p,y)=>{n[p]!==void 0&&(n[p](y),delete n[p]),e[p]=Promise.resolve(y),o[p]=y},has:p=>p in o,get:p=>o[p],unload:p=>{delete e[p],delete o[p]}}})(),Z7=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let J0;try{const e="__storage_test__";J0=window.localStorage,J0.setItem(e,e),J0.removeItem(e)}catch{J0=Z7()}var Rj=J0;const Nj={geom:{Rect:U7},util:{Delay:rt,Tools:Ee,VK:Qe,URI:js,EventDispatcher:BC,Observable:Gk,I18n:ll,LocalStorage:Rj,ImageUploader:$M},dom:{EventUtils:Ym,TreeWalker:Qs,TextSeeker:tf,DOMUtils:Jn,ScriptLoader:Gl,RangeUtils:jd,Serializer:gM,StyleSheetLoader:$g,ControlSelection:HA,BookmarkManager:wi,Selection:mM,Event:Ym.Event},html:{Styles:Id,Entities:Gm,Node:sa,Schema:In,DomParser:Vh,Writer:D5,Serializer:Gd},Env:Tt,AddOnManager:Ur,Annotator:zn,Formatter:Qu,UndoManager:ZM,EditorCommands:A7,WindowManager:r3,NotificationManager:TH,EditorObservable:M7,Shortcuts:L7,Editor:FC,FocusManager:ZL,EditorManager:Cm,DOM:Jn.DOM,ScriptLoader:Gl.ScriptLoader,PluginManager:Wh,ThemeManager:hl,ModelManager:Zh,IconManager:W2,Resource:Mj,FakeClipboard:kj,trim:Ee.trim,isArray:Ee.isArray,is:Ee.is,toArray:Ee.toArray,makeMap:Ee.makeMap,each:Ee.each,map:Ee.map,grep:Ee.grep,inArray:Ee.inArray,extend:Ee.extend,walk:Ee.walk,resolve:Ee.resolve,explode:Ee.explode,_addCacheSuffix:Ee._addCacheSuffix},W7=Ee.extend(Cm,Nj),Pj=e=>{try{Tc.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(W7),Pj(W7)})()})(eK);var yK=eK.exports;const GC=fK(yK);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M12 15v2a5 5 0 0 0 0-10v2a3 3 0 1 0 0 6zm0 0a3 3 0 1 0 0-6z"/><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm7-2h7V5h-7v2a5 5 0 0 0 0 10z"/></g></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z" clip-rule="evenodd"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',vibrance:'<svg height="24" width="24"><path clip-rule="evenodd" d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var Tc=tinymce.util.Tools.resolve("tinymce.PluginManager");const H=(M,z,K)=>{var ge;return K(M,z.prototype)?!0:((ge=M.constructor)===null||ge===void 0?void 0:ge.name)===z.name},Ui=M=>{const z=typeof M;return M===null?"null":z==="object"&&Array.isArray(M)?"array":z==="object"&&H(M,String,(K,ge)=>ge.isPrototypeOf(K))?"string":z},j=M=>z=>Ui(z)===M,Ya=M=>z=>typeof z===M,Aa=M=>z=>M===z,oo=j("string"),on=j("object"),X=j("array"),xs=Aa(null),ho=Ya("boolean"),Pr=M=>M==null,kr=M=>!Pr(M),Tr=Ya("function"),ni=(M,z)=>{if(X(M)){for(let K=0,ge=M.length;K<ge;++K)if(!z(M[K]))return!1;return!0}return!1},so=()=>{},Ms=M=>()=>M,qs=(M,z)=>M===z;class xt{constructor(z,K){this.tag=z,this.value=K}static some(z){return new xt(!0,z)}static none(){return xt.singletonNone}fold(z,K){return this.tag?K(this.value):z()}isSome(){return this.tag}isNone(){return!this.tag}map(z){return this.tag?xt.some(z(this.value)):xt.none()}bind(z){return this.tag?z(this.value):xt.none()}exists(z){return this.tag&&z(this.value)}forall(z){return!this.tag||z(this.value)}filter(z){return!this.tag||z(this.value)?this:xt.none()}getOr(z){return this.tag?this.value:z}or(z){return this.tag?this:z}getOrThunk(z){return this.tag?this.value:z()}orThunk(z){return this.tag?this:z()}getOrDie(z){if(this.tag)return this.value;throw new Error(z??"Called getOrDie on None")}static from(z){return kr(z)?xt.some(z):xt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(z){this.tag&&z(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}xt.singletonNone=new xt(!1);const re=Array.prototype.indexOf,Ot=Array.prototype.push,la=(M,z)=>re.call(M,z),Kn=(M,z)=>la(M,z)>-1,q=(M,z)=>{const K=M.length,ge=new Array(K);for(let Re=0;Re<K;Re++){const ot=M[Re];ge[Re]=z(ot,Re)}return ge},$t=(M,z)=>{for(let K=0,ge=M.length;K<ge;K++){const Re=M[K];z(Re,K)}},uo=(M,z,K)=>($t(M,(ge,Re)=>{K=z(K,ge,Re)}),K),dn=M=>{const z=[];for(let K=0,ge=M.length;K<ge;++K){if(!X(M[K]))throw new Error("Arr.flatten item "+K+" was not an array, input: "+M);Ot.apply(z,M[K])}return z},Ae=(M,z)=>dn(q(M,z)),Ht=(M,z)=>{for(let K=0;K<M.length;K++){const ge=z(M[K],K);if(ge.isSome())return ge}return xt.none()},Po=(M,z,K=qs)=>M.exists(ge=>K(ge,z)),Sn=M=>{const z=[],K=ge=>{z.push(ge)};for(let ge=0;ge<M.length;ge++)M[ge].each(K);return z},nt=(M,z)=>M?xt.some(z):xt.none(),S=M=>z=>z.options.get(M),Xa=M=>{const z=M.options.register;z("link_assume_external_targets",{processor:K=>{const ge=oo(K)||ho(K);return ge?K===!0?{value:1,valid:ge}:K==="http"||K==="https"?{value:K,valid:ge}:{value:0,valid:ge}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),z("link_context_toolbar",{processor:"boolean",default:!1}),z("link_list",{processor:K=>oo(K)||Tr(K)||ni(K,on)}),z("link_default_target",{processor:"string"}),z("link_default_protocol",{processor:"string",default:"https"}),z("link_target_list",{processor:K=>ho(K)||ni(K,on),default:!0}),z("link_rel_list",{processor:"object[]",default:[]}),z("link_class_list",{processor:"object[]",default:[]}),z("link_title",{processor:"boolean",default:!0}),z("allow_unsafe_link_target",{processor:"boolean",default:!1}),z("link_quicklink",{processor:"boolean",default:!1})},Ie=S("link_assume_external_targets"),Yn=S("link_context_toolbar"),oi=S("link_list"),Ye=S("link_default_target"),wn=S("link_default_protocol"),as=S("link_target_list"),Ja=S("link_rel_list"),_c=S("link_class_list"),we=S("link_title"),Ue=S("allow_unsafe_link_target"),D=S("link_quicklink"),Zi=Object.keys,Hn=Object.hasOwnProperty,Bo=(M,z)=>{const K=Zi(M);for(let ge=0,Re=K.length;ge<Re;ge++){const ot=K[ge],Ve=M[ot];z(Ve,ot)}},Zo=M=>(z,K)=>{M[K]=z},Em=(M,z,K,ge)=>{Bo(M,(Re,ot)=>{(z(Re,ot)?K:ge)(Re,ot)})},kt=(M,z)=>{const K={};return Em(M,z,Zo(K),so),K},kn=(M,z)=>Hn.call(M,z),Dt=(M,z)=>kn(M,z)&&M[z]!==void 0&&M[z]!==null;var oe=tinymce.util.Tools.resolve("tinymce.util.URI"),Br=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Rs=tinymce.util.Tools.resolve("tinymce.util.Tools");const vt=M=>kr(M)&&M.nodeName.toLowerCase()==="a",ua=M=>vt(M)&&!!ro(M),cs=(M,z)=>{if(M.collapsed)return[];{const K=M.cloneContents(),ge=K.firstChild,Re=new Br(ge,K),ot=[];let Ve=ge;do z(Ve)&&ot.push(Ve);while(Ve=Re.next());return ot}},El=M=>/^\w+:/i.test(M),ro=M=>{var z,K;return(K=(z=M.getAttribute("data-mce-href"))!==null&&z!==void 0?z:M.getAttribute("href"))!==null&&K!==void 0?K:""},Ns=(M,z)=>{const K=["noopener"],ge=M?M.split(/\s+/):[],Re=Vt=>Rs.trim(Vt.sort().join(" ")),ot=Vt=>(Vt=Ve(Vt),Vt.length>0?Vt.concat(K):K),Ve=Vt=>Vt.filter(gn=>Rs.inArray(K,gn)===-1),Tt=z?ot(ge):Ve(ge);return Tt.length>0?Re(Tt):""},si=M=>M.replace(/\uFEFF/g,""),is=(M,z)=>(z=z||Lr(M.selection.getRng())[0]||M.selection.getNode(),Ks(z)?xt.from(M.dom.select("a[href]",z)[0]):xt.from(M.dom.getParent(z,"a[href]"))),_o=(M,z)=>is(M,z).isSome(),ao=(M,z)=>{const K=z.fold(()=>M.getContent({format:"text"}),ge=>ge.innerText||ge.textContent||"");return si(K)},Lr=M=>cs(M,ua),Ao=M=>Rs.grep(M,ua),Zn=M=>Ao(M).length>0,ri=M=>Lr(M).length>0,Qo=M=>{const z=M.schema.getTextInlineElements(),K=ot=>ot.nodeType===1&&!vt(ot)&&!kn(z,ot.nodeName.toLowerCase());if(is(M).exists(ot=>ot.hasAttribute("data-mce-block")))return!1;const Re=M.selection.getRng();return Re.collapsed?!0:cs(Re,K).length===0},Ks=M=>kr(M)&&M.nodeName==="FIGURE"&&/\bimage\b/i.test(M.className),Rn=M=>uo(["title","rel","class","target"],(K,ge)=>(M[ge].each(Re=>{K[ge]=Re.length>0?Re:null}),K),{href:M.href}),Ac=(M,z)=>(z==="http"||z==="https")&&!El(M)?z+"://"+M:M,ai=(M,z)=>{const K={...z};if(Ja(M).length===0&&!Ue(M)){const ge=Ns(K.rel,K.target==="_blank");K.rel=ge||null}return xt.from(K.target).isNone()&&as(M)===!1&&(K.target=Ye(M)),K.href=Ac(K.href,Ie(M)),K},Wo=(M,z,K,ge)=>{K.each(Re=>{kn(z,"innerText")?z.innerText=Re:z.textContent=Re}),M.dom.setAttribs(z,ge),M.selection.select(z)},bu=(M,z,K,ge)=>{const Re=M.dom;Ks(z)?vu(Re,z,ge):K.fold(()=>{M.execCommand("mceInsertLink",!1,ge)},ot=>{M.insertContent(Re.createHTML("a",ge,Re.encode(ot)))})},He=(M,z,K)=>{const ge=M.selection.getNode(),Re=is(M,ge),ot=ai(M,Rn(K));M.undoManager.transact(()=>{K.href===z.href&&z.attach(),Re.fold(()=>{bu(M,ge,K.text,ot)},Ve=>{M.focus(),Wo(M,Ve,K.text,ot)})})},sn=M=>{const z=M.dom,K=M.selection,ge=K.getBookmark(),Re=K.getRng().cloneRange(),ot=z.getParent(Re.startContainer,"a[href]",M.getBody()),Ve=z.getParent(Re.endContainer,"a[href]",M.getBody());ot&&Re.setStartBefore(ot),Ve&&Re.setEndAfter(Ve),K.setRng(Re),M.execCommand("unlink"),K.moveToBookmark(ge)},_r=M=>{M.undoManager.transact(()=>{const z=M.selection.getNode();Ks(z)?Da(M,z):sn(M),M.focus()})},Ps=M=>{const{class:z,href:K,rel:ge,target:Re,text:ot,title:Ve}=M;return kt({class:z.getOrNull(),href:K,rel:ge.getOrNull(),target:Re.getOrNull(),text:ot.getOrNull(),title:Ve.getOrNull()},(Tt,Vt)=>xs(Tt)===!1)},kl=(M,z)=>{const K=M.options.get,ge={allow_html_data_urls:K("allow_html_data_urls"),allow_script_urls:K("allow_script_urls"),allow_svg_data_urls:K("allow_svg_data_urls")},Re=z.href;return{...z,href:oe.isDomSafe(Re,"a",ge)?Re:""}},Oa=(M,z,K)=>{const ge=kl(M,K);M.hasPlugin("rtc",!0)?M.execCommand("createlink",!1,Ps(ge)):He(M,z,ge)},Qa=M=>{M.hasPlugin("rtc",!0)?M.execCommand("unlink"):_r(M)},Da=(M,z)=>{var K;const ge=M.dom.select("img",z)[0];if(ge){const Re=M.dom.getParents(ge,"a[href]",z)[0];Re&&((K=Re.parentNode)===null||K===void 0||K.insertBefore(ge,Re),M.dom.remove(Re))}},vu=(M,z,K)=>{var ge;const Re=M.select("img",z)[0];if(Re){const ot=M.create("a",K);(ge=Re.parentNode)===null||ge===void 0||ge.insertBefore(ot,Re),ot.appendChild(Re)}},Bn=M=>oo(M.value)?M.value:"",ht=M=>oo(M.text)?M.text:oo(M.title)?M.title:"",da=(M,z)=>{const K=[];return Rs.each(M,ge=>{const Re=ht(ge);if(ge.menu!==void 0){const ot=da(ge.menu,z);K.push({text:Re,items:ot})}else{const ot=z(ge);K.push({text:Re,value:ot})}}),K},Wi=(M=Bn)=>z=>xt.from(z).map(K=>da(K,M)),Ar={sanitize:M=>Wi(Bn)(M),sanitizeWith:Wi,createUi:(M,z)=>K=>({name:M,type:"listbox",label:z,items:K}),getValue:Bn},Bs=M=>Dt(M,"items"),ji=(M,z)=>Ht(z,K=>Bs(K)?ji(M,K.items):nt(K.value===M,K)),ec=(M,z,K,ge)=>{const Re=ge[z],ot=M.length>0;return Re!==void 0?ji(Re,K).map(Ve=>({url:{value:Ve.value,meta:{text:ot?M:Ve.text,attach:so}},text:ot?M:Ve.text})):xt.none()},Tl=(M,z)=>z==="link"?M.link:z==="anchor"?M.anchor:xt.none(),Or={init:(M,z)=>{const K={text:M.text,title:M.title},ge=Vt=>{var gn;return nt(K.title.length<=0,xt.from((gn=Vt.meta)===null||gn===void 0?void 0:gn.title).getOr(""))},Re=Vt=>{var gn;return nt(K.text.length<=0,xt.from((gn=Vt.meta)===null||gn===void 0?void 0:gn.text).getOr(Vt.value))},ot=Vt=>{const gn=Re(Vt.url),Io=ge(Vt.url);return gn.isSome()||Io.isSome()?xt.some({...gn.map(Vn=>({text:Vn})).getOr({}),...Io.map(Vn=>({title:Vn})).getOr({})}):xt.none()},Ve=(Vt,gn)=>{const Io=Tl(z,gn).getOr([]);return ec(K.text,gn,Io,Vt)};return{onChange:(Vt,gn)=>{const Io=gn.name;return Io==="url"?ot(Vt()):Kn(["anchor","link"],Io)?Ve(Vt(),Io):((Io==="text"||Io==="title")&&(K[Io]=Vt()[Io]),xt.none())}}},getDelta:ec};var Gi=tinymce.util.Tools.resolve("tinymce.util.Delay");const ma=(M,z,K)=>{const ge=M.selection.getRng();Gi.setEditorTimeout(M,()=>{M.windowManager.confirm(z,Re=>{M.selection.setRng(ge),K(Re)})})},Ys=M=>{const z=M.href;return z.indexOf("@")>0&&z.indexOf("/")===-1&&z.indexOf("mailto:")===-1?xt.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:ge=>({...ge,href:"mailto:"+z})}):xt.none()},Su=(M,z)=>K=>{const ge=K.href;return M===1&&!El(ge)||M===0&&/^\s*www(\.|\d\.)/i.test(ge)?xt.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${z}:// prefix?`,preprocess:ot=>({...ot,href:z+"://"+ge})}):xt.none()},ld={preprocess:(M,z)=>Ht([Ys,Su(Ie(M),wn(M))],K=>K(z)).fold(()=>Promise.resolve(z),K=>new Promise(ge=>{ma(M,K.message,Re=>{ge(Re?K.preprocess(z):z)})}))},ud={getAnchors:M=>{const z=M.dom.select("a:not([href])"),K=Ae(z,ge=>{const Re=ge.name||ge.id;return Re?[{text:Re,value:"#"+Re}]:[]});return K.length>0?xt.some([{text:"None",value:""}].concat(K)):xt.none()}},Dc={getClasses:M=>{const z=_c(M);return z.length>0?Ar.sanitize(z):xt.none()}},_l=M=>{try{return xt.some(JSON.parse(M))}catch{return xt.none()}},Tm={getLinks:M=>{const z=ge=>M.convertURL(ge.value||ge.url||"","href"),K=oi(M);return new Promise(ge=>{oo(K)?fetch(K).then(Re=>Re.ok?Re.text().then(_l):Promise.reject()).then(ge,()=>ge(xt.none())):Tr(K)?K(Re=>ge(xt.some(Re))):ge(xt.from(K))}).then(ge=>ge.bind(Ar.sanitizeWith(z)).map(Re=>Re.length>0?[{text:"None",value:""}].concat(Re):Re))}},qi={getRels:(M,z)=>{const K=Ja(M);if(K.length>0){const ge=Po(z,"_blank"),Re=Ue(M)===!1,ot=Tt=>Ns(Ar.getValue(Tt),ge);return(Re?Ar.sanitizeWith(ot):Ar.sanitize)(K)}return xt.none()}},ir=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],jo={getTargets:M=>{const z=as(M);return X(z)?Ar.sanitize(z).orThunk(()=>xt.some(ir)):z===!1?xt.none():xt.some(ir)}},Se=(M,z,K)=>{const ge=M.getAttrib(z,K);return ge!==null&&ge.length>0?xt.some(ge):xt.none()},Wt=(M,z)=>{const K=M.dom,Re=Qo(M)?xt.some(ao(M.selection,z)):xt.none(),ot=z.bind(Io=>xt.from(K.getAttrib(Io,"href"))),Ve=z.bind(Io=>xt.from(K.getAttrib(Io,"target"))),Tt=z.bind(Io=>Se(K,Io,"rel")),Vt=z.bind(Io=>Se(K,Io,"class")),gn=z.bind(Io=>Se(K,Io,"title"));return{url:ot,text:Re,title:gn,target:Ve,rel:Tt,linkClass:Vt}},Qn={collect:(M,z)=>Tm.getLinks(M).then(K=>{const ge=Wt(M,z);return{anchor:ge,catalogs:{targets:jo.getTargets(M),rels:qi.getRels(M,ge.target),classes:Dc.getClasses(M),anchor:ud.getAnchors(M),link:K},optNode:z,flags:{titleEnabled:we(M)}}})},md=(M,z)=>K=>{const ge=K.getData();if(!ge.url.value){Qa(M),K.close();return}const Re=Tt=>xt.from(ge[Tt]).filter(Vt=>!Po(z.anchor[Tt],Vt)),ot={href:ge.url.value,text:Re("text"),target:Re("target"),rel:Re("rel"),class:Re("linkClass"),title:Re("title")},Ve={href:ge.url.value,attach:ge.url.meta!==void 0&&ge.url.meta.attach?ge.url.meta.attach:so};ld.preprocess(M,ot).then(Tt=>{Oa(M,Ve,Tt)}),K.close()},Mc=M=>{const z=is(M);return Qn.collect(M,z)},ls=(M,z)=>{const K=M.anchor,ge=K.url.getOr("");return{url:{value:ge,meta:{original:{value:ge}}},text:K.text.getOr(""),title:K.title.getOr(""),anchor:ge,link:ge,rel:K.rel.getOr(""),target:K.target.or(z).getOr(""),linkClass:K.linkClass.getOr("")}},Go=(M,z,K)=>{const ge=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],Re=M.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),ot=M.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Ve=xt.from(Ye(K)),Tt=ls(M,Ve),Vt=M.catalogs,gn=Or.init(Tt,Vt);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:dn([ge,Re,ot,Sn([Vt.anchor.map(Ar.createUi("anchor","Anchors")),Vt.rels.map(Ar.createUi("rel","Rel")),Vt.targets.map(Ar.createUi("target","Open link in...")),Vt.link.map(Ar.createUi("link","Link list")),Vt.classes.map(Ar.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Tt,onChange:(Vn,{name:xp})=>{gn.onChange(Vn.getData,{name:xp}).each(Rm=>{Vn.setData(Rm)})},onSubmit:z}},us=M=>{Mc(M).then(K=>{const ge=md(M,K);return Go(K,ge,M)}).then(K=>{M.windowManager.open(K)})},fd=M=>{M.addCommand("mceLink",(z,K)=>{(K==null?void 0:K.dialog)===!0||!D(M)?us(M):M.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},gd=M=>{M.addShortcut("Meta+K","",()=>{M.execCommand("mceLink")})},Qr=M=>{let z=M;return{get:()=>z,set:Re=>{z=Re}}},Al=M=>{const z=Qr(xt.none()),K=()=>z.get().each(M);return{clear:()=>{K(),z.set(xt.none())},isSet:()=>z.get().isSome(),get:()=>z.get(),set:Tt=>{K(),z.set(xt.some(Tt))}}},hg=()=>{const M=Al(so);return{...M,on:K=>M.get().each(K)}},ci=(M,z)=>M.substring(z),Am=(M,z,K)=>z===""||M.length>=z.length&&M.substr(K,K+z.length)===z,Dn=(M,z)=>Ki(M,z)?ci(M,z.length):M,Ki=(M,z)=>Am(M,z,0);var fa=tinymce.util.Tools.resolve("tinymce.util.VK");const hd=(M,z)=>{document.body.appendChild(M),M.dispatchEvent(z),document.body.removeChild(M)},tc=M=>{const z=document.createElement("a");z.target="_blank",z.href=M,z.rel="noreferrer noopener";const K=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(K),hd(z,K)},Ol=M=>M.altKey===!0&&M.shiftKey===!1&&M.ctrlKey===!1&&M.metaKey===!1,lr=(M,z)=>{if(z){const K=ro(z);if(/^#/.test(K)){const ge=M.dom.select(`${K},[name="${Dn(K,"#")}"]`);ge.length&&M.selection.scrollIntoView(ge[0],!0)}else tc(z.href)}},pg=M=>{const z=M.selection.getRng(),K=z.startContainer;return ua(K)&&z.startContainer===z.endContainer&&M.dom.select("img",K).length===1},ga=(M,z)=>{const K=Ao(M.dom.getParents(z));return nt(K.length===1,K[0])},Om=M=>{const z=Lr(M.selection.getRng());return nt(z.length>0,z[0]).or(ga(M,M.selection.getNode()))},pd=M=>M.selection.isCollapsed()||pg(M)?ga(M,M.selection.getStart()):Om(M),Dm=M=>{const z=hg(),K=()=>z.get().or(pd(M)),ge=()=>K().each(Re=>lr(M,Re));return M.on("contextmenu",Re=>{ga(M,Re.target).each(z.set)}),M.on("SelectionChange",()=>{z.isSet()||pd(M).each(z.set)}),M.on("click",Re=>{z.clear();const ot=Ao(M.dom.getParents(Re.target));ot.length===1&&fa.metaKeyPressed(Re)&&(Re.preventDefault(),lr(M,ot[0]))}),M.on("keydown",Re=>{z.clear(),!Re.isDefaultPrevented()&&Re.keyCode===13&&Ol(Re)&&K().each(ot=>{Re.preventDefault(),lr(M,ot)})}),{gotoSelectedLink:ge}},ds=M=>()=>{M.execCommand("mceLink",!1,{dialog:!0})},nc=(M,z)=>(M.on("NodeChange",z),()=>M.off("NodeChange",z)),Dl=M=>z=>{const K=()=>{z.setActive(!M.mode.isReadOnly()&&_o(M,M.selection.getNode())),z.setEnabled(M.selection.isEditable())};return K(),nc(M,K)},bd=M=>z=>{const K=()=>{z.setEnabled(M.selection.isEditable())};return K(),nc(M,K)},xu=M=>z=>{const K=ot=>Zn(ot)||ri(M.selection.getRng()),ge=M.dom.getParents(M.selection.getStart()),Re=ot=>{z.setEnabled(K(ot)&&M.selection.isEditable())};return Re(ge),nc(M,ot=>Re(ot.parents))},vd=(M,z)=>{M.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:ds(M),onSetup:Dl(M)}),M.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:z.gotoSelectedLink,onSetup:xu(M)}),M.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Qa(M),onSetup:xu(M)})},Xs=(M,z)=>{M.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:z.gotoSelectedLink,onSetup:xu(M)}),M.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:ds(M),onSetup:bd(M)}),M.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Qa(M),onSetup:xu(M)})},Ml=M=>{const z="link unlink openlink",K="link";M.ui.registry.addContextMenu("link",{update:ge=>M.dom.isEditable(ge)?Zn(M.dom.getParents(ge,"a"))?z:K:""})},yd=(M,z)=>{const K=ot=>{ot.selection.collapse(!1)},ge=ot=>{const Ve=M.selection.getNode();return ot.setEnabled(_o(M,Ve)&&M.selection.isEditable()),so},Re=ot=>{const Ve=is(M),Tt=Qo(M);if(Ve.isNone()&&Tt){const Vt=ao(M.selection,Ve);return nt(Vt.length===0,ot)}else return xt.none()};M.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Dl(M)},label:"Link",predicate:ot=>Yn(M)&&_o(M,ot),initValue:()=>is(M).fold(Ms(""),ro),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:ot=>{const Ve=M.selection.getNode();return ot.setActive(_o(M,Ve)),Dl(M)(ot)},onAction:ot=>{const Ve=ot.getValue(),Tt=Re(Ve);Oa(M,{href:Ve,attach:so},{href:Ve,text:Tt,title:xt.none(),rel:xt.none(),target:xt.from(Ye(M)),class:xt.none()}),K(M),ot.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:ge,onAction:ot=>{Qa(M),ot.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:ge,onAction:ot=>{z.gotoSelectedLink(),ot.hide()}}]})},Cd=M=>{const z=Dm(M);vd(M,z),Xs(M,z),Ml(M),yd(M,z)};var Mm=()=>{Tc.add("link",M=>{Xa(M),fd(M),Cd(M),gd(M)})};Mm()})();(function(){var Tc=tinymce.util.Tools.resolve("tinymce.PluginManager");const H=(v,w,O)=>{var V;return O(v,w.prototype)?!0:((V=v.constructor)===null||V===void 0?void 0:V.name)===w.name},Ui=v=>{const w=typeof v;return v===null?"null":w==="object"&&Array.isArray(v)?"array":w==="object"&&H(v,String,(O,V)=>V.isPrototypeOf(O))?"string":w},j=v=>w=>Ui(w)===v,Ya=v=>w=>typeof w===v,Aa=j("string"),oo=j("object"),on=j("array"),X=Ya("boolean"),xs=v=>v==null,ho=v=>!xs(v),Pr=Ya("function"),kr=Ya("number"),Tr=()=>{},ni=(v,w)=>O=>v(w(O)),so=v=>()=>v,Ms=(v,w)=>v===w;function qs(v,...w){return(...O)=>{const V=w.concat(O);return v.apply(null,V)}}const xt=v=>w=>!v(w),re=so(!1);class Ot{constructor(w,O){this.tag=w,this.value=O}static some(w){return new Ot(!0,w)}static none(){return Ot.singletonNone}fold(w,O){return this.tag?O(this.value):w()}isSome(){return this.tag}isNone(){return!this.tag}map(w){return this.tag?Ot.some(w(this.value)):Ot.none()}bind(w){return this.tag?w(this.value):Ot.none()}exists(w){return this.tag&&w(this.value)}forall(w){return!this.tag||w(this.value)}filter(w){return!this.tag||w(this.value)?this:Ot.none()}getOr(w){return this.tag?this.value:w}or(w){return this.tag?this:w}getOrThunk(w){return this.tag?this.value:w()}orThunk(w){return this.tag?this:w()}getOrDie(w){if(this.tag)return this.value;throw new Error(w??"Called getOrDie on None")}static from(w){return ho(w)?Ot.some(w):Ot.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(w){this.tag&&w(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ot.singletonNone=new Ot(!1);const la=Array.prototype.slice,Kn=Array.prototype.indexOf,q=Array.prototype.push,$t=(v,w)=>Kn.call(v,w),uo=(v,w)=>$t(v,w)>-1,dn=(v,w)=>{for(let O=0,V=v.length;O<V;O++){const W=v[O];if(w(W,O))return!0}return!1},Ae=(v,w)=>{const O=v.length,V=new Array(O);for(let W=0;W<O;W++){const ke=v[W];V[W]=w(ke,W)}return V},Ht=(v,w)=>{for(let O=0,V=v.length;O<V;O++){const W=v[O];w(W,O)}},Po=(v,w)=>{const O=[];for(let V=0,W=v.length;V<W;V++){const ke=v[V];w(ke,V)&&O.push(ke)}return O},Sn=(v,w)=>{if(v.length===0)return[];{let O=w(v[0]);const V=[];let W=[];for(let ke=0,pt=v.length;ke<pt;ke++){const It=v[ke],Bt=w(It);Bt!==O&&(V.push(W),W=[]),O=Bt,W.push(It)}return W.length!==0&&V.push(W),V}},nt=(v,w,O)=>(Ht(v,(V,W)=>{O=w(O,V,W)}),O),S=(v,w,O)=>{for(let V=0,W=v.length;V<W;V++){const ke=v[V];if(w(ke,V))return Ot.some(ke);if(O(ke,V))break}return Ot.none()},Xa=(v,w)=>S(v,w,re),Ie=v=>{const w=[];for(let O=0,V=v.length;O<V;++O){if(!on(v[O]))throw new Error("Arr.flatten item "+O+" was not an array, input: "+v);q.apply(w,v[O])}return w},Yn=(v,w)=>Ie(Ae(v,w)),oi=v=>{const w=la.call(v,0);return w.reverse(),w},Ye=(v,w)=>w>=0&&w<v.length?Ot.some(v[w]):Ot.none(),wn=v=>Ye(v,0),as=v=>Ye(v,v.length-1),Ja=(v,w)=>{const O=[],V=Pr(w)?W=>dn(O,ke=>w(ke,W)):W=>uo(O,W);for(let W=0,ke=v.length;W<ke;W++){const pt=v[W];V(pt)||O.push(pt)}return O},_c=(v,w,O=Ms)=>v.exists(V=>O(V,w)),we=(v,w,O=Ms)=>Ue(v,w,O).getOr(v.isNone()&&w.isNone()),Ue=(v,w,O)=>v.isSome()&&w.isSome()?Ot.some(O(v.getOrDie(),w.getOrDie())):Ot.none(),D=8,Zi=11,Hn=1,Bo=3,Zo=(v,w)=>{const V=(w||document).createElement("div");if(V.innerHTML=v,!V.hasChildNodes()||V.childNodes.length>1){const W="HTML does not have a single root node";throw console.error(W,v),new Error(W)}return kn(V.childNodes[0])},Em=(v,w)=>{const V=(w||document).createElement(v);return kn(V)},kt=(v,w)=>{const V=(w||document).createTextNode(v);return kn(V)},kn=v=>{if(v==null)throw new Error("Node cannot be null or undefined");return{dom:v}},oe={fromHtml:Zo,fromTag:Em,fromText:kt,fromDom:kn,fromPoint:(v,w,O)=>Ot.from(v.dom.elementFromPoint(w,O)).map(kn)},Br=(v,w)=>{const O=v.dom;if(O.nodeType!==Hn)return!1;{const V=O;if(V.matches!==void 0)return V.matches(w);if(V.msMatchesSelector!==void 0)return V.msMatchesSelector(w);if(V.webkitMatchesSelector!==void 0)return V.webkitMatchesSelector(w);if(V.mozMatchesSelector!==void 0)return V.mozMatchesSelector(w);throw new Error("Browser lacks native selectors")}},Rs=(v,w)=>v.dom===w.dom,vt=(v,w)=>{const O=v.dom,V=w.dom;return O===V?!1:O.contains(V)},ua=Br,cs=typeof window<"u"?window:Function("return this;")(),El=(v,w)=>{let O=w??cs;for(let V=0;V<v.length&&O!==void 0&&O!==null;++V)O=O[v[V]];return O},ro=(v,w)=>{const O=v.split(".");return El(O,w)},Ns=(v,w)=>ro(v,w),si=(v,w)=>{const O=Ns(v,w);if(O==null)throw new Error(v+" not available on this browser");return O},is=Object.getPrototypeOf,_o=v=>si("HTMLElement",v),ao=v=>{const w=ro("ownerDocument.defaultView",v);return oo(v)&&(_o(w).prototype.isPrototypeOf(v)||/^HTML\w*Element$/.test(is(v).constructor.name))},Lr=v=>v.dom.nodeName.toLowerCase(),Ao=v=>v.dom.nodeType,Zn=v=>w=>Ao(w)===v,ri=v=>Ao(v)===D||Lr(v)==="#comment",Qo=v=>Ks(v)&&ao(v.dom),Ks=Zn(Hn),Rn=Zn(Bo),Ac=Zn(Zi),ai=v=>w=>Ks(w)&&Lr(w)===v,Wo=v=>Ot.from(v.dom.parentNode).map(oe.fromDom),bu=v=>Ot.from(v.dom.parentElement).map(oe.fromDom),He=v=>Ot.from(v.dom.nextSibling).map(oe.fromDom),sn=v=>Ae(v.dom.childNodes,oe.fromDom),_r=(v,w)=>{const O=v.dom.childNodes;return Ot.from(O[w]).map(oe.fromDom)},Ps=v=>_r(v,0),kl=v=>_r(v,v.dom.childNodes.length-1),Oa=v=>Ac(v)&&ho(v.dom.host),Qa=v=>oe.fromDom(v.dom.getRootNode()),Da=v=>{const w=Qa(v);return Oa(w)?Ot.some(w):Ot.none()},vu=v=>oe.fromDom(v.dom.host),Bn=v=>{const w=Rn(v)?v.dom.parentNode:v.dom;if(w==null||w.ownerDocument===null)return!1;const O=w.ownerDocument;return Da(oe.fromDom(w)).fold(()=>O.body.contains(w),ni(Bn,vu))};var ht=(v,w,O,V,W)=>v(O,V)?Ot.some(O):Pr(W)&&W(O)?Ot.none():w(O,V,W);const da=(v,w,O)=>{let V=v.dom;const W=Pr(O)?O:re;for(;V.parentNode;){V=V.parentNode;const ke=oe.fromDom(V);if(w(ke))return Ot.some(ke);if(W(ke))break}return Ot.none()},Wi=(v,w,O)=>ht((W,ke)=>ke(W),da,v,w,O),yu=(v,w,O)=>da(v,V=>Br(V,w),O),id=(v,w,O)=>ht((W,ke)=>Br(W,ke),yu,v,w,O),Ar=v=>id(v,"[contenteditable]"),Bs=(v,w=!1)=>Bn(v)?v.dom.isContentEditable:Ar(v).fold(so(w),O=>ji(O)==="true"),ji=v=>v.dom.contentEditable,ec=(v,w)=>{Wo(v).each(V=>{V.dom.insertBefore(w.dom,v.dom)})},Tl=(v,w)=>{He(v).fold(()=>{Wo(v).each(W=>{Or(W,w)})},V=>{ec(V,w)})},Cu=(v,w)=>{Ps(v).fold(()=>{Or(v,w)},V=>{v.dom.insertBefore(w.dom,V.dom)})},Or=(v,w)=>{v.dom.appendChild(w.dom)},Gi=(v,w)=>{Ht(w,O=>{ec(v,O)})},ma=(v,w)=>{Ht(w,O=>{Or(v,O)})},Ys=v=>{v.dom.textContent="",Ht(sn(v),w=>{Su(w)})},Su=v=>{const w=v.dom;w.parentNode!==null&&w.parentNode.removeChild(w)};var km=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ld=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Oc=tinymce.util.Tools.resolve("tinymce.util.VK");const ud=v=>Ae(v,oe.fromDom),Be=Object.keys,Dc=(v,w)=>{const O=Be(v);for(let V=0,W=O.length;V<W;V++){const ke=O[V],pt=v[ke];w(pt,ke)}},_l=v=>(w,O)=>{v[O]=w},dd=(v,w,O,V)=>{Dc(v,(W,ke)=>{(w(W,ke)?O:V)(W,ke)})},Tm=(v,w)=>{const O={};return dd(v,w,_l(O),Tr),O},gg=(v,w,O)=>{if(Aa(O)||X(O)||kr(O))v.setAttribute(w,O+"");else throw console.error("Invalid call to Attribute.set. Key ",w,":: Value ",O,":: Element ",v),new Error("Attribute value was not simple")},qi=(v,w)=>{const O=v.dom;Dc(w,(V,W)=>{gg(O,W,V)})},ir=v=>nt(v.dom.attributes,(w,O)=>(w[O.name]=O.value,w),{}),_m=(v,w)=>oe.fromDom(v.dom.cloneNode(w)),jo=v=>_m(v,!0),Se=(v,w)=>{const O=oe.fromTag(w),V=ir(v);return qi(O,V),O},Wt=(v,w)=>{const O=Se(v,w);Tl(v,O);const V=sn(v);return ma(O,V),Su(v),O};var Lo=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Qn=tinymce.util.Tools.resolve("tinymce.util.Tools");const md=v=>w=>ho(w)&&w.nodeName.toLowerCase()===v,Mc=v=>w=>ho(w)&&v.test(w.nodeName),ls=v=>ho(v)&&v.nodeType===3,Go=v=>ho(v)&&v.nodeType===1,us=Mc(/^(OL|UL|DL)$/),fd=Mc(/^(OL|UL)$/),gd=md("ol"),Qr=Mc(/^(LI|DT|DD)$/),Al=Mc(/^(DT|DD)$/),hg=Mc(/^(TH|TD)$/),ci=md("br"),Am=v=>{var w;return((w=v.parentNode)===null||w===void 0?void 0:w.firstChild)===v},Dn=(v,w)=>ho(w)&&w.nodeName in v.schema.getTextBlockElements(),Ki=(v,w)=>ho(v)&&v.nodeName in w,fa=(v,w)=>ho(w)&&w.nodeName in v.schema.getVoidElements(),hd=(v,w)=>ci(w)?v.isBlock(w.nextSibling)&&!ci(w.previousSibling):!1,tc=(v,w,O)=>{const V=v.isEmpty(w);return O&&v.select("span[data-mce-type=bookmark]",w).length>0?!1:V},Ol=(v,w)=>v.isChildOf(w,v.getRoot()),lr=v=>w=>w.options.get(v),pg=v=>{const w=v.options.register;w("lists_indent_on_tab",{processor:"boolean",default:!0})},ga=lr("lists_indent_on_tab"),Om=lr("forced_root_block"),pd=lr("forced_root_block_attrs"),Dm=(v,w,O={})=>{const V=v.dom,W=v.schema.getBlockElements(),ke=V.createFragment(),pt=Om(v),It=pd(v);let Bt,ft,po=!1;for(ft=V.create(pt,{...It,...O.style?{style:O.style}:{}}),Ki(w.firstChild,W)||ke.appendChild(ft);Bt=w.firstChild;){const Es=Bt.nodeName;!po&&(Es!=="SPAN"||Bt.getAttribute("data-mce-type")!=="bookmark")&&(po=!0),Ki(Bt,W)?(ke.appendChild(Bt),ft=null):(ft||(ft=V.create(pt,It),ke.appendChild(ft)),ft.appendChild(Bt))}return!po&&ft&&ft.appendChild(V.create("br",{"data-mce-bogus":"1"})),ke},ds=Lo.DOM,nc=(v,w,O)=>{const V=ft=>{const po=ft.parentNode;po&&Qn.each(W,Es=>{po.insertBefore(Es,O.parentNode)}),ds.remove(ft)},W=ds.select('span[data-mce-type="bookmark"]',w),ke=Dm(v,O),pt=ds.createRng();pt.setStartAfter(O),pt.setEndAfter(w);const It=pt.extractContents();for(let ft=It.firstChild;ft;ft=ft.firstChild)if(ft.nodeName==="LI"&&v.dom.isEmpty(ft)){ds.remove(ft);break}v.dom.isEmpty(It)||ds.insertAfter(It,w),ds.insertAfter(ke,w);const Bt=O.parentElement;Bt&&tc(v.dom,Bt)&&V(Bt),ds.remove(O),tc(v.dom,w)&&ds.remove(w)},Dl=ai("dd"),bd=ai("dt"),xu=(v,w)=>{Dl(w)?Wt(w,"dt"):bd(w)&&bu(w).each(O=>nc(v,O.dom,w.dom))},vd=v=>{bd(v)&&Wt(v,"dd")},Xs=(v,w,O)=>{w==="Indent"?Ht(O,vd):Ht(O,V=>xu(v,V))},Ml=(v,w)=>{if(ls(v))return{container:v,offset:w};const O=km.getNode(v,w);return ls(O)?{container:O,offset:w>=v.childNodes.length?O.data.length:0}:O.previousSibling&&ls(O.previousSibling)?{container:O.previousSibling,offset:O.previousSibling.data.length}:O.nextSibling&&ls(O.nextSibling)?{container:O.nextSibling,offset:0}:{container:v,offset:w}},yd=v=>{const w=v.cloneRange(),O=Ml(v.startContainer,v.startOffset);w.setStart(O.container,O.offset);const V=Ml(v.endContainer,v.endOffset);return w.setEnd(V.container,V.offset),w},Cd=["OL","UL","DL"],Mm=Cd.join(","),M=(v,w)=>{const O=w||v.selection.getStart(!0);return v.dom.getParent(O,Mm,gn(v,O))},z=(v,w)=>ho(v)&&w.length===1&&w[0]===v,K=v=>Po(v.querySelectorAll(Mm),us),ge=v=>{const w=M(v),O=v.selection.getSelectedBlocks();return z(w,O)?K(w):Po(O,V=>us(V)&&w!==V)},Re=(v,w)=>{const O=Qn.map(w,V=>{const W=v.dom.getParent(V,"li,dd,dt",gn(v,V));return W||V});return Ja(O)},ot=v=>{const w=v.selection.getSelectedBlocks();return Po(Re(v,w),Qr)},Ve=v=>Po(ot(v),Al),Tt=(v,w)=>{const O=v.dom.getParents(w,"TD,TH");return O.length>0?O[0]:v.getBody()},Vt=(v,w)=>!us(w)&&!Qr(w)&&dn(Cd,O=>v.isValidChild(w.nodeName,O)),gn=(v,w)=>{const O=v.dom.getParents(w,v.dom.isBlock),V=ke=>ke.nodeName.toLowerCase()!==Om(v);return Xa(O,ke=>V(ke)&&Vt(v.schema,ke)).getOr(v.getBody())},Io=v=>Wo(v).exists(w=>Qr(w.dom)&&Ps(w).exists(O=>!us(O.dom))&&kl(w).exists(O=>!us(O.dom))),Vn=(v,w)=>{const O=v.dom.getParents(w,"ol,ul",gn(v,w));return as(O)},xp=v=>{const w=Vn(v,v.selection.getStart()),O=Po(v.selection.getSelectedBlocks(),fd);return w.toArray().concat(O)},Rm=v=>{const w=v.selection.getStart();return v.dom.getParents(w,"ol,ul",gn(v,w))},wp=v=>{const w=xp(v),O=Rm(v);return Xa(O,V=>Io(oe.fromDom(V))).fold(()=>Pt(v,w),V=>[V])},Pt=(v,w)=>{const O=Ae(w,V=>Vn(v,V).getOr(V));return Ja(O)},ii=v=>/\btox\-/.test(v.className),bg=(v,w)=>S(v,us,hg).exists(O=>O.nodeName===w&&!ii(O)),Ee=(v,w)=>w!==null&&!v.dom.isEditable(w),wu=v=>{const w=M(v);return Ee(v,w)||!v.selection.isEditable()},Fo=(v,w)=>{const O=v.dom.getParent(w,"ol,ul,dl");return Ee(v,O)||!v.selection.isEditable()},Ep=(v,w)=>{const O=v.selection.getNode();return w({parents:v.dom.getParents(O),element:O}),v.on("NodeChange",w),()=>v.off("NodeChange",w)},Ls=(v,w)=>{const V=document.createDocumentFragment();return Ht(v,W=>{V.appendChild(W.dom)}),oe.fromDom(V)},rn=(v,w,O)=>v.dispatch("ListMutation",{action:w,element:O}),nb=(v=>w=>w.replace(v,""))(/^\s+|\s+$/g),kp=v=>v.length>0,es=v=>!kp(v),Rl=v=>v.style!==void 0&&Pr(v.style.getPropertyValue),qC=(v,w,O)=>{if(!Aa(O))throw console.error("Invalid call to CSS.set. Property ",w,":: Value ",O,":: Element ",v),new Error("CSS value must be a string: "+O);Rl(v)&&v.style.setProperty(w,O)},ob=(v,w,O)=>{const V=v.dom;qC(V,w,O)},eo=v=>ua(v,"OL,UL"),KC=v=>ua(v,"LI"),Nl=v=>Ps(v).exists(eo),Ma=v=>kl(v).exists(eo),Rc=v=>"listAttributes"in v,Xi=v=>"isComment"in v,sb=v=>"isFragment"in v,Ft=v=>v.depth>0,Eu=v=>v.isSelected,vg=v=>{const w=sn(v),O=Ma(v)?w.slice(0,-1):w;return Ae(O,jo)},Pl=(v,w,O)=>Wo(v).filter(Ks).map(V=>({depth:w,dirty:!1,isSelected:O,content:vg(v),itemAttributes:ir(v),listAttributes:ir(V),listType:Lr(V),isInPreviousLi:!1})),Nm=(v,w)=>{Or(v.item,w.list)},ha=v=>{for(let w=1;w<v.length;w++)Nm(v[w-1],v[w])},Ir=(v,w)=>{Ue(as(v),wn(w),Nm)},YC=(v,w)=>{const O={list:oe.fromTag(w,v),item:oe.fromTag("li",v)};return Or(O.list,O.item),O},rb=(v,w,O)=>{const V=[];for(let W=0;W<O;W++)V.push(YC(v,Rc(w)?w.listType:w.parentListType));return V},Sd=(v,w)=>{for(let O=0;O<v.length-1;O++)ob(v[O].item,"list-style-type","none");as(v).each(O=>{Rc(w)&&(qi(O.list,w.listAttributes),qi(O.item,w.itemAttributes)),ma(O.item,w.content)})},xd=(v,w)=>{Lr(v.list)!==w.listType&&(v.list=Wt(v.list,w.listType)),qi(v.list,w.listAttributes)},Is=(v,w,O)=>{const V=oe.fromTag("li",v);return qi(V,w),ma(V,O),V},li=(v,w)=>{Or(v.list,w),v.item=w},ea=(v,w,O)=>{const V=w.slice(0,O.depth);return as(V).each(W=>{if(Rc(O)){const ke=Is(v,O.itemAttributes,O.content);li(W,ke),xd(W,O)}else if(sb(O))ma(W.item,O.content);else{const ke=oe.fromHtml(`<!--${O.content}-->`);Or(W.list,ke)}}),V},Ji=(v,w,O)=>{const V=rb(v,O,O.depth-w.length);return ha(V),Sd(V,O),Ir(w,V),w.concat(V)},ku=(v,w)=>{let O=Ot.none();const V=nt(w,(W,ke,pt)=>Xi(ke)?pt===0?(O=Ot.some(ke),W):ea(v,W,ke):ke.depth>W.length?Ji(v,W,ke):ea(v,W,ke),[]);return O.each(W=>{const ke=oe.fromHtml(`<!--${W.content}-->`);wn(V).each(pt=>{Cu(pt.list,ke)})}),wn(V).map(W=>W.list)},Eo=(v,w)=>{switch(v){case"Indent":w.depth++;break;case"Outdent":w.depth--;break;case"Flatten":w.depth=0}w.dirty=!0},XC=(v,w)=>{Rc(v)&&Rc(w)&&(v.listType=w.listType,v.listAttributes={...w.listAttributes})},ab=v=>{v.listAttributes=Tm(v.listAttributes,(w,O)=>O!=="start")},yg=(v,w)=>{const O=v[w].depth,V=ke=>ke.depth===O&&!ke.dirty,W=ke=>ke.depth<O;return S(oi(v.slice(0,w)),V,W).orThunk(()=>S(v.slice(w+1),V,W))},Tp=v=>(Ht(v,(w,O)=>{yg(v,O).fold(()=>{w.dirty&&Rc(w)&&ab(w)},V=>XC(w,V))}),v),cb=v=>{let w=v;return{get:()=>w,set:W=>{w=W}}},Tu=(v,w,O,V)=>{var W;if(ri(V))return[{depth:v+1,content:(W=V.dom.nodeValue)!==null&&W!==void 0?W:"",dirty:!1,isSelected:!1,isComment:!0}];w.each(It=>{Rs(It.start,V)&&O.set(!0)});const ke=Pl(V,v,O.get());w.each(It=>{Rs(It.end,V)&&O.set(!1)});const pt=kl(V).filter(eo).map(It=>wd(v,w,O,It)).getOr([]);return ke.toArray().concat(pt)},_p=(v,w,O,V)=>Ps(V).filter(eo).fold(()=>Tu(v,w,O,V),W=>{const ke=nt(sn(V),(pt,It,Bt)=>{if(Bt===0)return pt;if(KC(It))return pt.concat(Tu(v,w,O,It));{const ft={isFragment:!0,depth:v,content:[It],isSelected:!1,dirty:!1,parentListType:Lr(W)};return pt.concat(ft)}},[]);return wd(v,w,O,W).concat(ke)}),wd=(v,w,O,V)=>Yn(sn(V),W=>{const ke=eo(W)?wd:_p,pt=v+1;return ke(pt,w,O,W)}),Ap=(v,w)=>{const O=cb(!1),V=0;return Ae(v,W=>({sourceList:W,entries:wd(V,w,O,W)}))},JC=(v,w)=>{const O=Tp(w);return Ae(O,V=>{const W=Xi(V)?Ls([oe.fromHtml(`<!--${V.content}-->`)]):Ls(V.content),ke=Rc(V)?V.itemAttributes:{};return oe.fromDom(Dm(v,W.dom,ke))})},_u=(v,w)=>{const O=Tp(w);return ku(v.contentDocument,O).toArray()},Op=(v,w)=>Yn(Sn(w,Ft),O=>wn(O).exists(Ft)?_u(v,O):JC(v,O)),Ed=(v,w)=>{Ht(Po(v,Eu),O=>Eo(w,O))},ib=v=>{const w=Ae(ot(v),oe.fromDom);return Ue(Xa(w,xt(Nl)),Xa(oi(w),xt(Nl)),(O,V)=>({start:O,end:V}))},Cg=(v,w,O)=>{const V=Ap(w,ib(v));Ht(V,W=>{Ed(W.entries,O);const ke=Op(v,W.entries);Ht(ke,pt=>{rn(v,O==="Indent"?"IndentList":"OutdentList",pt.dom)}),Gi(W.sourceList,ke),Su(W.sourceList)})},lb=(v,w)=>{const O=ud(wp(v)),V=ud(Ve(v));let W=!1;if(O.length||V.length){const ke=v.selection.getBookmark();Cg(v,O,w),Xs(v,w,V),v.selection.moveToBookmark(ke),v.selection.setRng(yd(v.selection.getRng())),v.nodeChanged(),W=!0}return W},Sg=(v,w)=>!wu(v)&&lb(v,w),Dp=v=>Sg(v,"Indent"),Bl=v=>Sg(v,"Outdent"),xg=v=>Sg(v,"Flatten"),U="\uFEFF",Pm=v=>v===U,oc=(v,w,O)=>da(v,w,O).isSome(),QC=(v,w)=>oc(v,qs(Rs,w));var eS=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const kd=Lo.DOM,xn=v=>{const w={},O=V=>{let W=v[V?"startContainer":"endContainer"],ke=v[V?"startOffset":"endOffset"];if(Go(W)){const pt=kd.create("span",{"data-mce-type":"bookmark"});W.hasChildNodes()?(ke=Math.min(ke,W.childNodes.length-1),V?W.insertBefore(pt,W.childNodes[ke]):kd.insertAfter(pt,W.childNodes[ke])):W.appendChild(pt),W=pt,ke=0}w[V?"startContainer":"endContainer"]=W,w[V?"startOffset":"endOffset"]=ke};return O(!0),v.collapsed||O(),w},$o=v=>{const w=V=>{const W=It=>{var Bt;let ft=(Bt=It.parentNode)===null||Bt===void 0?void 0:Bt.firstChild,po=0;for(;ft;){if(ft===It)return po;(!Go(ft)||ft.getAttribute("data-mce-type")!=="bookmark")&&po++,ft=ft.nextSibling}return-1};let ke=v[V?"startContainer":"endContainer"],pt=v[V?"startOffset":"endOffset"];if(ke){if(Go(ke)&&ke.parentNode){const It=ke;pt=W(ke),ke=ke.parentNode,kd.remove(It),!ke.hasChildNodes()&&kd.isBlock(ke)&&ke.appendChild(kd.create("br"))}v[V?"startContainer":"endContainer"]=ke,v[V?"startOffset":"endOffset"]=pt}};w(!0),w();const O=kd.createRng();return O.setStart(v.startContainer,v.startOffset),v.endContainer&&O.setEnd(v.endContainer,v.endOffset),yd(O)},Au=v=>{switch(v){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Qi=(v,w,O)=>{const V=O["list-style-type"]?O["list-style-type"]:null;v.setStyle(w,"list-style-type",V)},ub=(v,w)=>{Qn.each(w,(O,V)=>{v.setAttribute(V,O)})},Td=(v,w,O)=>{ub(w,O["list-attributes"]),Qn.each(v.select("li",w),V=>{ub(V,O["list-item-attributes"])})},Fr=(v,w,O)=>{Qi(v,w,O),Td(v,w,O)},wg=(v,w,O)=>{Qn.each(O,V=>v.setStyle(w,V,""))},Bm=(v,w)=>ho(w)&&!Ki(w,v.schema.getBlockElements()),Ou=(v,w,O,V)=>{let W=w[O?"startContainer":"endContainer"];const ke=w[O?"startOffset":"endOffset"];Go(W)&&(W=W.childNodes[Math.min(ke,W.childNodes.length-1)]||W),!O&&ci(W.nextSibling)&&(W=W.nextSibling);const pt=Bt=>{for(;!v.dom.isBlock(Bt)&&Bt.parentNode&&V!==Bt;)Bt=Bt.parentNode;return Bt},It=(Bt,ft)=>{var po;const Es=new ld(Bt,pt(Bt)),sc=ft?"next":"prev";let Hl;for(;Hl=Es[sc]();)if(!(fa(v,Hl)||Pm(Hl.textContent)||((po=Hl.textContent)===null||po===void 0?void 0:po.length)===0))return Ot.some(Hl);return Ot.none()};if(O&&ls(W))if(Pm(W.textContent))W=It(W,!1).getOr(W);else for(W.parentNode!==null&&Bm(v,W.parentNode)&&(W=W.parentNode);W.previousSibling!==null&&(Bm(v,W.previousSibling)||ls(W.previousSibling));)W=W.previousSibling;if(!O&&ls(W))if(Pm(W.textContent))W=It(W,!0).getOr(W);else for(W.parentNode!==null&&Bm(v,W.parentNode)&&(W=W.parentNode);W.nextSibling!==null&&(Bm(v,W.nextSibling)||ls(W.nextSibling));)W=W.nextSibling;for(;W.parentNode!==V;){const Bt=W.parentNode;if(Dn(v,W)||/^(TD|TH)$/.test(Bt.nodeName))return W;W=Bt}return W},Ll=(v,w,O)=>{const V=[],W=v.dom,ke=Ou(v,w,!0,O),pt=Ou(v,w,!1,O);let It;const Bt=[];for(let ft=ke;ft&&(Bt.push(ft),ft!==pt);ft=ft.nextSibling);return Qn.each(Bt,ft=>{var po;if(Dn(v,ft)){V.push(ft),It=null;return}if(W.isBlock(ft)||ci(ft)){ci(ft)&&W.remove(ft),It=null;return}const Es=ft.nextSibling;if(eS.isBookmarkNode(ft)&&(us(Es)||Dn(v,Es)||!Es&&ft.parentNode===O)){It=null;return}It||(It=W.create("p"),(po=ft.parentNode)===null||po===void 0||po.insertBefore(It,ft),V.push(It)),It.appendChild(ft)}),V},Lm=(v,w,O)=>{const V=v.getStyle(w,"list-style-type");let W=O?O["list-style-type"]:"";return W=W===null?"":W,V===W},Ra=(v,w)=>{const O=v.selection.getStart(!0),V=Ou(v,w,!0,v.getBody());return QC(oe.fromDom(V),oe.fromDom(w.commonAncestorContainer))?w.commonAncestorContainer:O},Eg=(v,w,O)=>{const V=v.selection.getRng();let W="LI";const ke=gn(v,Ra(v,V)),pt=v.dom;if(pt.getContentEditable(v.selection.getNode())==="false")return;w=w.toUpperCase(),w==="DL"&&(W="DT");const It=xn(V),Bt=Po(Ll(v,V,ke),v.dom.isEditable);Qn.each(Bt,ft=>{let po;const Es=ft.previousSibling,sc=ft.parentNode;Qr(sc)||(Es&&us(Es)&&Es.nodeName===w&&Lm(pt,Es,O)?(po=Es,ft=pt.rename(ft,W),Es.appendChild(ft)):(po=pt.create(w),sc.insertBefore(po,ft),po.appendChild(ft),ft=pt.rename(ft,W)),wg(pt,ft,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Fr(pt,po,O),Du(v.dom,po))}),v.selection.setRng($o(It))},Js=(v,w)=>us(v)&&v.nodeName===(w==null?void 0:w.nodeName),Il=(v,w,O)=>{const V=v.getStyle(w,"list-style-type",!0),W=v.getStyle(O,"list-style-type",!0);return V===W},Nc=(v,w)=>v.className===w.className,Dr=(v,w,O)=>Js(w,O)&&Il(v,w,O)&&Nc(w,O),Du=(v,w)=>{let O,V=w.nextSibling;if(Dr(v,w,V)){const W=V;for(;O=W.firstChild;)w.appendChild(O);v.remove(W)}if(V=w.previousSibling,Dr(v,w,V)){const W=V;for(;O=W.lastChild;)w.insertBefore(O,w.firstChild);v.remove(W)}},tS=(v,w,O,V)=>{if(w.nodeName!==O){const W=v.dom.rename(w,O);Fr(v.dom,W,V),rn(v,Au(O),W)}else Fr(v.dom,w,V),rn(v,Au(O),w)},kg=(v,w,O,V)=>{if(w.classList.forEach((W,ke,pt)=>{W.startsWith("tox-")&&(pt.remove(W),pt.length===0&&w.removeAttribute("class"))}),w.nodeName!==O){const W=v.dom.rename(w,O);Fr(v.dom,W,V),rn(v,Au(O),W)}else Fr(v.dom,w,V),rn(v,Au(O),w)},ui=(v,w,O,V,W)=>{const ke=us(w);if(ke&&w.nodeName===V&&!_d(W)&&!ii(w))xg(v);else{Eg(v,V,W);const pt=xn(v.selection.getRng()),It=ke?[w,...O]:O,Bt=ke&&ii(w)?kg:tS;Qn.each(It,ft=>{Bt(v,ft,V,W)}),v.selection.setRng($o(pt))}},_d=v=>"list-style-type"in v,db=(v,w,O,V)=>{if(w!==v.getBody())if(w)if(w.nodeName===O&&!_d(V)&&!ii(w))xg(v);else{const W=xn(v.selection.getRng());ii(w)&&w.classList.forEach((pt,It,Bt)=>{pt.startsWith("tox-")&&(Bt.remove(pt),Bt.length===0&&w.removeAttribute("class"))}),Fr(v.dom,w,V);const ke=v.dom.rename(w,O);Du(v.dom,ke),v.selection.setRng($o(W)),Eg(v,O,V),rn(v,Au(O),ke)}else Eg(v,O,V),rn(v,Au(O),w)},Mp=(v,w,O)=>{const V=M(v);if(Fo(v,V))return;const W=ge(v),ke=oo(O)?O:{};W.length>0?ui(v,V,W,w,ke):db(v,V,w,ke)},nS=Lo.DOM,oS=(v,w)=>{const O=w.parentElement;if(O&&O.nodeName==="LI"&&O.firstChild===w){const V=O.previousSibling;V&&V.nodeName==="LI"?(V.appendChild(w),tc(v,O)&&nS.remove(O)):nS.setStyle(O,"listStyleType","none")}if(us(O)){const V=O.previousSibling;V&&V.nodeName==="LI"&&V.appendChild(w)}},mb=(v,w)=>{const O=Qn.grep(v.select("ol,ul",w));Qn.each(O,V=>{oS(v,V)})},el=(v,w,O,V)=>{let W=w.startContainer;const ke=w.startOffset;if(ls(W)&&(O?ke<W.data.length:ke>0))return W;const pt=v.schema.getNonEmptyElements();Go(W)&&(W=km.getNode(W,ke));const It=new ld(W,V);O&&hd(v.dom,W)&&It.next();const Bt=O?It.next.bind(It):It.prev2.bind(It);for(;W=Bt();)if(W.nodeName==="LI"&&!W.hasChildNodes()||pt[W.nodeName]||ls(W)&&W.data.length>0)return W;return null},Rp=(v,w)=>{const O=w.childNodes;return O.length===1&&!us(O[0])&&v.isBlock(O[0])},tl=v=>Ot.from(v).map(oe.fromDom).filter(Qo).exists(w=>Bs(w)&&!uo(["details"],Lr(w))),Oo=(v,w)=>{Rp(v,w)&&tl(w.firstChild)&&v.remove(w.firstChild,!0)},ms=(v,w,O)=>{let V;const W=Rp(v,O)?O.firstChild:O;if(Oo(v,w),!tc(v,w,!0))for(;V=w.firstChild;)W.appendChild(V)},nl=(v,w,O)=>{let V;const W=w.parentNode;if(!Ol(v,w)||!Ol(v,O))return;us(O.lastChild)&&(V=O.lastChild),W===O.lastChild&&ci(W.previousSibling)&&v.remove(W.previousSibling);const ke=O.lastChild;ke&&ci(ke)&&w.hasChildNodes()&&v.remove(ke),tc(v,O,!0)&&Ys(oe.fromDom(O)),ms(v,w,O),V&&O.appendChild(V);const It=vt(oe.fromDom(O),oe.fromDom(w))?v.getParents(w,us,O):[];v.remove(w),Ht(It,Bt=>{tc(v,Bt)&&Bt!==v.getRoot()&&v.remove(Bt)})},Im=(v,w,O)=>{Ys(oe.fromDom(O)),nl(v.dom,w,O),v.selection.setCursorLocation(O,0)},Fm=(v,w,O,V)=>{const W=v.dom;if(W.isEmpty(V))Im(v,O,V);else{const ke=xn(w);nl(W,O,V),v.selection.setRng($o(ke))}},ws=(v,w,O,V)=>{const W=xn(w);nl(v.dom,O,V);const ke=$o(W);v.selection.setRng(ke)},at=(v,w)=>{const O=v.dom,V=v.selection,W=V.getStart(),ke=Tt(v,W),pt=O.getParent(V.getStart(),"LI",ke);if(pt){const It=pt.parentElement;if(It===v.getBody()&&tc(O,It))return!0;const Bt=yd(V.getRng()),ft=O.getParent(el(v,Bt,w,ke),"LI",ke),po=ft&&(w?O.isChildOf(pt,ft):O.isChildOf(ft,pt));if(ft&&ft!==pt&&!po)return v.undoManager.transact(()=>{w?Fm(v,Bt,ft,pt):Am(pt)?Bl(v):ws(v,Bt,pt,ft)}),!0;if(po&&!w&&ft!==pt)return v.undoManager.transact(()=>{if(Bt.commonAncestorContainer.parentElement){const Es=xn(Bt),sc=Bt.commonAncestorContainer.parentElement;ms(O,Bt.commonAncestorContainer.parentElement,ft),sc.remove();const Hl=$o(Es);v.selection.setRng(Hl)}}),!0;if(!ft&&!w&&Bt.startOffset===0&&Bt.endOffset===0)return v.undoManager.transact(()=>{xg(v)}),!0}return!1},Np=(v,w,O)=>{const V=v.getParent(w.parentNode,v.isBlock,O);v.remove(w),V&&v.isEmpty(V)&&v.remove(V)},Mu=(v,w)=>{const O=v.dom,V=v.selection.getStart(),W=Tt(v,V),ke=O.getParent(V,O.isBlock,W);if(ke&&O.isEmpty(ke,void 0,{checkRootAsContent:!0})){const pt=yd(v.selection.getRng()),It=O.getParent(el(v,pt,w,W),"LI",W);if(It){const Bt=sc=>uo(["td","th","caption"],Lr(sc)),ft=sc=>sc.dom===W,po=Wi(oe.fromDom(It),Bt,ft),Es=Wi(oe.fromDom(pt.startContainer),Bt,ft);return we(po,Es,Rs)?(v.undoManager.transact(()=>{const sc=It.parentNode;Np(O,ke,W),Du(O,sc),v.selection.select(It,!0),v.selection.collapse(w)}),!0):!1}}return!1},Ad=(v,w)=>at(v,w)||Mu(v,w),Nn=v=>{const w=v.selection.getStart(),O=Tt(v,w);return v.dom.getParent(w,"LI,DT,DD",O)||ot(v).length>0},$m=v=>Nn(v)?(v.undoManager.transact(()=>{let w=!0;const O=()=>w=!1;v.on("input",O),v.execCommand("Delete"),v.off("input",O),w&&v.dispatch("input"),mb(v.dom,v.getBody())}),!0):!1,Hm=(v,w)=>{const O=v.selection;return!Fo(v,O.getNode())&&(O.isCollapsed()?Ad(v,w):$m(v))},fb=v=>{v.on("ExecCommand",w=>{const O=w.command.toLowerCase();(O==="delete"||O==="forwarddelete")&&Nn(v)&&mb(v.dom,v.getBody())}),v.on("keydown",w=>{w.keyCode===Oc.BACKSPACE?Hm(v,!1)&&w.preventDefault():w.keyCode===Oc.DELETE&&Hm(v,!0)&&w.preventDefault()})},sS=v=>({backspaceDelete:w=>{Hm(v,w)}}),jt=(v,w)=>{const O=M(v);O===null||Fo(v,O)||v.undoManager.transact(()=>{oo(w.styles)&&v.dom.setStyles(O,w.styles),oo(w.attrs)&&Dc(w.attrs,(V,W)=>v.dom.setAttrib(O,W,V))})},ts=v=>{const w=oi(nb(v).split("")),O=Ae(w,(V,W)=>{const ke=V.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,W)*ke});return nt(O,(V,W)=>V+W,0)},Od=v=>{if(v--,v<0)return"";{const w=v%26,O=Math.floor(v/26),V=Od(O),W=String.fromCharCode(65+w);return V+W}},Tg=v=>/^[A-Z]+$/.test(v),Pp=v=>/^[a-z]+$/.test(v),gb=v=>/^[0-9]+$/.test(v),rS=v=>gb(v)?2:Tg(v)?0:Pp(v)?1:es(v)?3:4,ta=v=>{switch(rS(v)){case 2:return Ot.some({listStyleType:Ot.none(),start:v});case 0:return Ot.some({listStyleType:Ot.some("upper-alpha"),start:ts(v).toString()});case 1:return Ot.some({listStyleType:Ot.some("lower-alpha"),start:ts(v).toString()});case 3:return Ot.some({listStyleType:Ot.none(),start:""});case 4:return Ot.none()}},di=v=>{const w=parseInt(v.start,10);return _c(v.listStyleType,"upper-alpha")?Od(w):_c(v.listStyleType,"lower-alpha")?Od(w).toLowerCase():v.start},_g=v=>{const w=M(v);!gd(w)||Fo(v,w)||v.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:di({start:v.dom.getAttrib(w,"start","1"),listStyleType:Ot.from(v.dom.getStyle(w,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:O=>{const V=O.getData();ta(V.start).each(W=>{v.execCommand("mceListUpdate",!1,{attrs:{start:W.start==="1"?"":W.start},styles:{"list-style-type":W.listStyleType.getOr("")}})}),O.close()}})},qo=(v,w)=>()=>{const O=M(v);return ho(O)&&O.nodeName===w},hb=v=>{v.addCommand("mceListProps",()=>{_g(v)})},Vo=v=>{v.on("BeforeExecCommand",w=>{const O=w.command.toLowerCase();O==="indent"?Dp(v):O==="outdent"&&Bl(v)}),v.addCommand("InsertUnorderedList",(w,O)=>{Mp(v,"UL",O)}),v.addCommand("InsertOrderedList",(w,O)=>{Mp(v,"OL",O)}),v.addCommand("InsertDefinitionList",(w,O)=>{Mp(v,"DL",O)}),v.addCommand("RemoveList",()=>{xg(v)}),hb(v),v.addCommand("mceListUpdate",(w,O)=>{oo(O)&&jt(v,O)}),v.addQueryStateHandler("InsertUnorderedList",qo(v,"UL")),v.addQueryStateHandler("InsertOrderedList",qo(v,"OL")),v.addQueryStateHandler("InsertDefinitionList",qo(v,"DL"))};var Fl=tinymce.util.Tools.resolve("tinymce.html.Node");const Ru=v=>v.type===3,Xn=v=>v.length===0,$l=v=>{const w=(W,ke)=>{const pt=Fl.create("li");Ht(W,It=>pt.append(It)),ke?v.insert(pt,ke,!0):v.append(pt)},O=(W,ke)=>Ru(ke)?[...W,ke]:!Xn(W)&&!Ru(ke)?(w(W,ke),[]):W,V=nt(v.children(),O,[]);Xn(V)||w(V)},aS=v=>{v.on("PreInit",()=>{const{parser:w}=v;w.addNodeFilter("ul,ol",O=>Ht(O,$l))})},Ag=v=>{v.on("keydown",w=>{w.keyCode!==Oc.TAB||Oc.metaKeyPressed(w)||v.undoManager.transact(()=>{(w.shiftKey?Bl(v):Dp(v))&&w.preventDefault()})})},Co=v=>{ga(v)&&Ag(v),fb(v)},Dd=(v,w)=>O=>{const V=W=>{O.setActive(bg(W.parents,w)),O.setEnabled(!Fo(v,W.element)&&v.selection.isEditable())};return O.setEnabled(v.selection.isEditable()),Ep(v,V)},Pc=v=>{const w=O=>()=>v.execCommand(O);v.hasPlugin("advlist")||(v.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:w("InsertOrderedList"),onSetup:Dd(v,"OL")}),v.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:w("InsertUnorderedList"),onSetup:Dd(v,"UL")}))},Og=(v,w)=>O=>Ep(v,W=>O.setEnabled(bg(W.parents,w)&&!Fo(v,W.element))),Dg=v=>{const w={text:"List properties...",icon:"ordered-list",onAction:()=>v.execCommand("mceListProps"),onSetup:Og(v,"OL")};v.ui.registry.addMenuItem("listprops",w),v.ui.registry.addContextMenu("lists",{update:O=>{const V=M(v,O);return gd(V)?["listprops"]:[]}})};var Bp=()=>{Tc.add("lists",v=>(pg(v),aS(v),v.hasPlugin("rtc",!0)?hb(v):(Co(v),Vo(v)),Pc(v),Dg(v),sS(v)))};Bp()})();(function(){const Tc=Object.getPrototypeOf,H=(t,s,a)=>{var i;return a(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},Ui=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&H(t,String,(a,i)=>i.isPrototypeOf(a))?"string":s},j=t=>s=>Ui(s)===t,Ya=t=>s=>typeof s===t,Aa=t=>s=>t===s,oo=(t,s)=>X(t)&&H(t,s,(a,i)=>Tc(a)===i),on=j("string"),X=j("object"),xs=t=>oo(t,Object),ho=j("array"),Pr=Aa(null),kr=Ya("boolean"),Tr=Aa(void 0),ni=t=>t==null,so=t=>!ni(t),Ms=Ya("function"),qs=Ya("number"),xt=(t,s)=>{if(ho(t)){for(let a=0,i=t.length;a<i;++a)if(!s(t[a]))return!1;return!0}return!1},re=()=>{},Ot=t=>()=>t(),la=(t,s)=>(...a)=>t(s.apply(null,a)),Kn=(t,s)=>a=>t(s(a)),q=t=>()=>t,$t=t=>t,uo=(t,s)=>t===s;function dn(t,...s){return(...a)=>{const i=s.concat(a);return t.apply(null,i)}}const Ae=t=>s=>!t(s),Ht=t=>()=>{throw new Error(t)},Po=t=>t(),Sn=q(!1),nt=q(!0);class S{constructor(s,a){this.tag=s,this.value=a}static some(s){return new S(!0,s)}static none(){return S.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?S.some(s(this.value)):S.none()}bind(s){return this.tag?s(this.value):S.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:S.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return so(s)?S.some(s):S.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}S.singletonNone=new S(!1);const Xa=Array.prototype.slice,Ie=Array.prototype.indexOf,Yn=Array.prototype.push,oi=(t,s)=>Ie.call(t,s),Ye=(t,s)=>{const a=oi(t,s);return a===-1?S.none():S.some(a)},wn=(t,s)=>oi(t,s)>-1,as=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const u=t[a];if(s(u,a))return!0}return!1},Ja=(t,s)=>{const a=[];for(let i=0;i<t;i++)a.push(s(i));return a},_c=(t,s)=>{const a=[];for(let i=0;i<t.length;i+=s){const u=Xa.call(t,i,i+s);a.push(u)}return a},we=(t,s)=>{const a=t.length,i=new Array(a);for(let u=0;u<a;u++){const m=t[u];i[u]=s(m,u)}return i},Ue=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const u=t[a];s(u,a)}},D=(t,s)=>{for(let a=t.length-1;a>=0;a--){const i=t[a];s(i,a)}},Zi=(t,s)=>{const a=[],i=[];for(let u=0,m=t.length;u<m;u++){const f=t[u];(s(f,u)?a:i).push(f)}return{pass:a,fail:i}},Hn=(t,s)=>{const a=[];for(let i=0,u=t.length;i<u;i++){const m=t[i];s(m,i)&&a.push(m)}return a},Bo=(t,s,a)=>(D(t,(i,u)=>{a=s(a,i,u)}),a),Zo=(t,s,a)=>(Ue(t,(i,u)=>{a=s(a,i,u)}),a),Em=(t,s,a)=>{for(let i=0,u=t.length;i<u;i++){const m=t[i];if(s(m,i))return S.some(m);if(a(m,i))break}return S.none()},kt=(t,s)=>Em(t,s,Sn),kn=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const u=t[a];if(s(u,a))return S.some(a)}return S.none()},Dt=t=>{const s=[];for(let a=0,i=t.length;a<i;++a){if(!ho(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Yn.apply(s,t[a])}return s},oe=(t,s)=>Dt(we(t,s)),Br=(t,s)=>{for(let a=0,i=t.length;a<i;++a){const u=t[a];if(s(u,a)!==!0)return!1}return!0},Rs=t=>{const s=Xa.call(t,0);return s.reverse(),s},vt=(t,s)=>Hn(t,a=>!wn(s,a)),ua=(t,s)=>{const a={};for(let i=0,u=t.length;i<u;i++){const m=t[i];a[String(m)]=s(m,i)}return a},cs=t=>[t],El=(t,s)=>{const a=Xa.call(t,0);return a.sort(s),a},ro=(t,s)=>s>=0&&s<t.length?S.some(t[s]):S.none(),Ns=t=>ro(t,0),si=t=>ro(t,t.length-1),is=Ms(Array.from)?Array.from:t=>Xa.call(t),_o=(t,s)=>{for(let a=0;a<t.length;a++){const i=s(t[a],a);if(i.isSome())return i}return S.none()},ao=Object.keys,Lr=Object.hasOwnProperty,Ao=(t,s)=>{const a=ao(t);for(let i=0,u=a.length;i<u;i++){const m=a[i],f=t[m];s(f,m)}},Zn=(t,s)=>ri(t,(a,i)=>({k:i,v:s(a,i)})),ri=(t,s)=>{const a={};return Ao(t,(i,u)=>{const m=s(i,u);a[m.k]=m.v}),a},Qo=t=>(s,a)=>{t[a]=s},Ks=(t,s,a,i)=>{Ao(t,(u,m)=>{(s(u,m)?a:i)(u,m)})},Rn=(t,s)=>{const a={},i={};return Ks(t,s,Qo(a),Qo(i)),{t:a,f:i}},Ac=(t,s)=>{const a={};return Ks(t,s,Qo(a),re),a},ai=(t,s)=>{const a=[];return Ao(t,(i,u)=>{a.push(s(i,u))}),a},Wo=(t,s)=>{const a=ao(t);for(let i=0,u=a.length;i<u;i++){const m=a[i],f=t[m];if(s(f,m,t))return S.some(f)}return S.none()},bu=t=>ai(t,$t),He=(t,s)=>sn(t,s)?S.from(t[s]):S.none(),sn=(t,s)=>Lr.call(t,s),_r=(t,s)=>sn(t,s)&&t[s]!==void 0&&t[s]!==null,Ps=(t,s,a=uo)=>t.exists(i=>a(i,s)),kl=(t,s,a=uo)=>Da(t,s,a).getOr(t.isNone()&&s.isNone()),Oa=t=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(a);return s},Qa=t=>{const s=[];for(let a=0;a<t.length;a++){const i=t[a];if(i.isSome())s.push(i.getOrDie());else return S.none()}return S.some(s)},Da=(t,s,a)=>t.isSome()&&s.isSome()?S.some(a(t.getOrDie(),s.getOrDie())):S.none(),vu=(t,s,a,i)=>t.isSome()&&s.isSome()&&a.isSome()?S.some(i(t.getOrDie(),s.getOrDie(),a.getOrDie())):S.none(),Bn=(t,s)=>t!=null?S.some(s(t)):S.none(),ht=(t,s)=>t?S.some(s):S.none(),da=(t,s)=>t+s,Wi=(t,s)=>t.substring(s),yu=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,id=(t,s)=>ji(t,s)?Wi(t,s.length):t,Ar=(t,s)=>ec(t,s)?t:da(t,s),Bs=(t,s,a=0,i)=>{const u=t.indexOf(s,a);return u!==-1?Tr(i)?!0:u+s.length<=i:!1},ji=(t,s)=>yu(t,s,0),ec=(t,s)=>yu(t,s,t.length-s.length),Cu=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),Or=t=>t.length>0,Gi=t=>!Or(t),ma=t=>{const s=parseFloat(t);return isNaN(s)?S.none():S.some(s)},Ys=t=>t.style!==void 0&&Ms(t.style.getPropertyValue),Su=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const u="HTML does not have a single root node";throw console.error(u,t),new Error(u)}return Oc(i.childNodes[0])},km=(t,s)=>{const i=(s||document).createElement(t);return Oc(i)},ld=(t,s)=>{const i=(s||document).createTextNode(t);return Oc(i)},Oc=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Be={fromHtml:Su,fromTag:km,fromText:ld,fromDom:Oc,fromPoint:(t,s,a)=>S.from(t.dom.elementFromPoint(s,a)).map(Oc)},Dc=typeof window<"u"?window:Function("return this;")(),_l=(t,s)=>{let a=s??Dc;for(let i=0;i<t.length&&a!==void 0&&a!==null;++i)a=a[t[i]];return a},dd=(t,s)=>{const a=t.split(".");return _l(a,s)},Tm=(t,s)=>dd(t,s),gg=(t,s)=>{const a=Tm(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},qi=Object.getPrototypeOf,ir=t=>gg("HTMLElement",t),_m=t=>{const s=dd("ownerDocument.defaultView",t);return X(t)&&(ir(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(qi(t).constructor.name))},jo=9,Se=11,Wt=1,Lo=3,Qn=t=>t.dom.nodeName.toLowerCase(),md=t=>t.dom.nodeType,Mc=t=>s=>md(s)===t,ls=t=>Go(t)&&_m(t.dom),Go=Mc(Wt),us=Mc(Lo),fd=Mc(jo),gd=Mc(Se),Qr=t=>s=>Go(s)&&Qn(s)===t,Al=(t,s)=>{const a=t.dom;if(a.nodeType!==Wt)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},hg=t=>t.nodeType!==Wt&&t.nodeType!==jo&&t.nodeType!==Se||t.childElementCount===0,ci=(t,s)=>{const a=s===void 0?document:s.dom;return hg(a)?[]:we(a.querySelectorAll(t),Be.fromDom)},Am=(t,s)=>{const a=s===void 0?document:s.dom;return hg(a)?S.none():S.from(a.querySelector(t)).map(Be.fromDom)},Dn=(t,s)=>t.dom===s.dom,Ki=(t,s)=>{const a=t.dom,i=s.dom;return a===i?!1:a.contains(i)},fa=t=>Be.fromDom(t.dom.ownerDocument),hd=t=>fd(t)?t:fa(t),tc=t=>Be.fromDom(hd(t).dom.documentElement),Ol=t=>Be.fromDom(hd(t).dom.defaultView),lr=t=>S.from(t.dom.parentNode).map(Be.fromDom),pg=t=>lr(t),ga=t=>S.from(t.dom.parentElement).map(Be.fromDom),Om=(t,s)=>{const a=Ms(s)?s:Sn;let i=t.dom;const u=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const m=i.parentNode,f=Be.fromDom(m);if(u.push(f),a(f)===!0)break;i=m}return u},pd=t=>S.from(t.dom.offsetParent).map(Be.fromDom),Dm=t=>S.from(t.dom.nextSibling).map(Be.fromDom),ds=t=>we(t.dom.childNodes,Be.fromDom),nc=(t,s)=>{const a=t.dom.childNodes;return S.from(a[s]).map(Be.fromDom)},Dl=t=>nc(t,0),bd=(t,s)=>({element:t,offset:s}),xu=(t,s)=>{const a=ds(t);return a.length>0&&s<a.length?bd(a[s],0):bd(t,s)},vd=t=>gd(t)&&so(t.dom.host),Xs=t=>Be.fromDom(t.dom.getRootNode()),Ml=t=>vd(t)?t:Be.fromDom(hd(t).dom.body),yd=t=>Cd(t).isSome(),Cd=t=>{const s=Xs(t);return vd(s)?S.some(s):S.none()},Mm=t=>Be.fromDom(t.dom.host),M=t=>{if(so(t.target)){const s=Be.fromDom(t.target);if(Go(s)&&z(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Ns(a)}}return S.from(t.target)},z=t=>so(t.dom.shadowRoot),K=t=>{const s=us(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Cd(Be.fromDom(s)).fold(()=>a.body.contains(s),Kn(K,Mm))},ge=()=>Re(Be.fromDom(document)),Re=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return Be.fromDom(s)},ot=(t,s,a)=>{if(on(a)||kr(a)||qs(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},Ve=(t,s,a)=>{ot(t.dom,s,a)},Tt=(t,s)=>{const a=t.dom;Ao(s,(i,u)=>{ot(a,u,i)})},Vt=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},gn=(t,s)=>S.from(Vt(t,s)),Io=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},Vn=(t,s)=>{t.dom.removeAttribute(s)},xp=t=>Zo(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Rm=(t,s,a)=>{if(!on(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Ys(t)&&t.style.setProperty(s,a)},wp=(t,s)=>{Ys(t)&&t.style.removeProperty(s)},Pt=(t,s,a)=>{const i=t.dom;Rm(i,s,a)},ii=(t,s)=>{const a=t.dom;Ao(s,(i,u)=>{Rm(a,u,i)})},bg=(t,s)=>{const a=t.dom;Ao(s,(i,u)=>{i.fold(()=>{wp(a,u)},m=>{Rm(a,u,m)})})},Ee=(t,s)=>{const a=t.dom,u=window.getComputedStyle(a).getPropertyValue(s);return u===""&&!K(t)?wu(a,s):u},wu=(t,s)=>Ys(t)?t.style.getPropertyValue(s):"",Fo=(t,s)=>{const a=t.dom,i=wu(a,s);return S.from(i).filter(u=>u.length>0)},Ep=t=>{const s={},a=t.dom;if(Ys(a))for(let i=0;i<a.style.length;i++){const u=a.style.item(i);s[u]=a.style[u]}return s},Ls=(t,s,a)=>{const i=Be.fromTag(t);return Pt(i,s,a),Fo(i,s).isSome()},rn=(t,s)=>{const a=t.dom;wp(a,s),Ps(gn(t,"style").map(Cu),"")&&Vn(t,"style")},Yi=t=>t.dom.offsetWidth,nb=(t,s)=>{const a=(h,b)=>{if(!qs(b)&&!b.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+b);const C=h.dom;Ys(C)&&(C.style[t]=b+"px")},i=h=>{const b=s(h);if(b<=0||b===null){const C=Ee(h,t);return parseFloat(C)||0}return b},u=i,m=(h,b)=>Zo(b,(C,x)=>{const k=Ee(h,x),A=k===void 0?0:parseInt(k,10);return isNaN(A)?C:C+A},0);return{set:a,get:i,getOuter:u,aggregate:m,max:(h,b,C)=>{const x=m(h,C);return b>x?b-x:0}}},kp=nb("height",t=>{const s=t.dom;return K(t)?s.getBoundingClientRect().height:s.offsetHeight}),es=t=>kp.get(t),Rl=t=>kp.getOuter(t),qC=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=kp.max(t,s,a);Pt(t,"max-height",i+"px")},ob=(t,s)=>({left:t,top:s,translate:(i,u)=>ob(t+i,s+u)}),eo=ob,KC=t=>{const s=t.getBoundingClientRect();return eo(s.left,s.top)},Nl=(t,s)=>t!==void 0?t:s!==void 0?s:0,Ma=t=>{const s=t.dom.ownerDocument,a=s.body,i=s.defaultView,u=s.documentElement;if(a===t.dom)return eo(a.offsetLeft,a.offsetTop);const m=Nl(i==null?void 0:i.pageYOffset,u.scrollTop),f=Nl(i==null?void 0:i.pageXOffset,u.scrollLeft),h=Nl(u.clientTop,a.clientTop),b=Nl(u.clientLeft,a.clientLeft);return Rc(t).translate(f-b,m-h)},Rc=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?eo(i.offsetLeft,i.offsetTop):K(t)?KC(s):eo(0,0)},Xi=nb("width",t=>t.dom.offsetWidth),sb=(t,s)=>Xi.set(t,s),Ft=t=>Xi.get(t),Eu=t=>Xi.getOuter(t),vg=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=Xi.max(t,s,a);Pt(t,"max-width",i+"px")},Pl=t=>{let s=!1,a;return(...i)=>(s||(s=!0,a=t.apply(null,i)),a)},Nm=(t,s,a,i)=>{const u=t.isiOS()&&/ipad/i.test(a)===!0,m=t.isiOS()&&!u,f=t.isiOS()||t.isAndroid(),h=f||i("(pointer:coarse)"),b=u||!m&&f&&i("(min-device-width:768px)"),C=m||f&&!b,x=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,k=!C&&!b&&!x;return{isiPad:q(u),isiPhone:q(m),isTablet:q(b),isPhone:q(C),isTouch:q(h),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:q(x),isDesktop:q(k)}},ha=(t,s)=>{for(let a=0;a<t.length;a++){const i=t[a];if(i.test(s))return i}},Ir=(t,s)=>{const a=ha(t,s);if(!a)return{major:0,minor:0};const i=u=>Number(s.replace(a,"$"+u));return Sd(i(1),i(2))},YC=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?rb():Ir(t,a)},rb=()=>Sd(0,0),Sd=(t,s)=>({major:t,minor:s}),xd={nu:Sd,detect:YC,unknown:rb},Is=(t,s)=>_o(s.brands,a=>{const i=a.brand.toLowerCase();return kt(t,u=>{var m;return i===((m=u.brand)===null||m===void 0?void 0:m.toLowerCase())}).map(u=>({current:u.name,version:xd.nu(parseInt(a.version,10),0)}))}),li=(t,s)=>{const a=String(s).toLowerCase();return kt(t,i=>i.search(a))},ea=(t,s)=>li(t,s).map(a=>{const i=xd.detect(a.versionRegexes,s);return{current:a.name,version:i}}),Ji=(t,s)=>li(t,s).map(a=>{const i=xd.detect(a.versionRegexes,s);return{current:a.name,version:i}}),ku=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Eo=t=>s=>Bs(s,t),XC=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Bs(t,"edge/")&&Bs(t,"chrome")&&Bs(t,"safari")&&Bs(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ku],search:t=>Bs(t,"chrome")&&!Bs(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Bs(t,"msie")||Bs(t,"trident")},{name:"Opera",versionRegexes:[ku,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Eo("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Eo("firefox")},{name:"Safari",versionRegexes:[ku,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Bs(t,"safari")||Bs(t,"mobile/"))&&Bs(t,"applewebkit")}],ab=[{name:"Windows",search:Eo("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Bs(t,"iphone")||Bs(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Eo("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Eo("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Eo("linux"),versionRegexes:[]},{name:"Solaris",search:Eo("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Eo("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Eo("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],yg={browsers:q(XC),oses:q(ab)},Tp="Edge",cb="Chromium",Tu="IE",_p="Opera",wd="Firefox",Ap="Safari",JC=()=>_u({current:void 0,version:xd.unknown()}),_u=t=>{const s=t.current,a=t.version,i=u=>()=>s===u;return{current:s,version:a,isEdge:i(Tp),isChromium:i(cb),isIE:i(Tu),isOpera:i(_p),isFirefox:i(wd),isSafari:i(Ap)}},Op={unknown:JC,nu:_u,edge:q(Tp),chromium:q(cb),ie:q(Tu),opera:q(_p),firefox:q(wd),safari:q(Ap)},Ed="Windows",ib="iOS",Cg="Android",lb="Linux",Sg="macOS",Dp="Solaris",Bl="FreeBSD",xg="ChromeOS",U=()=>Pm({current:void 0,version:xd.unknown()}),Pm=t=>{const s=t.current,a=t.version,i=u=>()=>s===u;return{current:s,version:a,isWindows:i(Ed),isiOS:i(ib),isAndroid:i(Cg),isMacOS:i(Sg),isLinux:i(lb),isSolaris:i(Dp),isFreeBSD:i(Bl),isChromeOS:i(xg)}},oc={unknown:U,nu:Pm,windows:q(Ed),ios:q(ib),android:q(Cg),linux:q(lb),macos:q(Sg),solaris:q(Dp),freebsd:q(Bl),chromeos:q(xg)},eS={detect:(t,s,a)=>{const i=yg.browsers(),u=yg.oses(),m=s.bind(b=>Is(i,b)).orThunk(()=>ea(i,t)).fold(Op.unknown,Op.nu),f=Ji(u,t).fold(oc.unknown,oc.nu),h=Nm(f,m,t,a);return{browser:m,os:f,deviceType:h}}},kd=t=>window.matchMedia(t).matches;let xn=Pl(()=>eS.detect(window.navigator.userAgent,S.from(window.navigator.userAgentData),kd));const $o=()=>xn(),Au=(t,s,a,i,u,m,f)=>({target:t,x:s,y:a,stop:i,prevent:u,kill:m,raw:f}),Qi=t=>{const s=Be.fromDom(M(t).getOr(t.target)),a=()=>t.stopPropagation(),i=()=>t.preventDefault(),u=la(i,a);return Au(s,t.clientX,t.clientY,a,i,u,t)},ub=(t,s)=>a=>{t(a)&&s(Qi(a))},Td=(t,s,a,i,u)=>{const m=ub(a,i);return t.dom.addEventListener(s,m,u),{unbind:dn(Bm,t,s,m,u)}},Fr=(t,s,a,i)=>Td(t,s,a,i,!1),wg=(t,s,a,i)=>Td(t,s,a,i,!0),Bm=(t,s,a,i)=>{t.dom.removeEventListener(s,a,i)},Ou=(t,s)=>{lr(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},Ll=(t,s)=>{Dm(t).fold(()=>{lr(t).each(u=>{Ra(u,s)})},i=>{Ou(i,s)})},Lm=(t,s)=>{Dl(t).fold(()=>{Ra(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},Ra=(t,s)=>{t.dom.appendChild(s.dom)},Eg=(t,s,a)=>{nc(t,a).fold(()=>{Ra(t,s)},i=>{Ou(i,s)})},Js=(t,s)=>{Ue(s,a=>{Ra(t,a)})},Il=t=>{t.dom.textContent="",Ue(ds(t),s=>{Nc(s)})},Nc=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Dr=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return eo(a,i)},Du=(t,s,a)=>{const u=(a!==void 0?a.dom:document).defaultView;u&&u.scrollTo(t,s)},tS=t=>{const s=t===void 0?window:t;return $o().browser.isFirefox()?S.none():S.from(s.visualViewport)},kg=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),ui=t=>{const s=t===void 0?window:t,a=s.document,i=Dr(Be.fromDom(a));return tS(s).fold(()=>{const u=s.document.documentElement,m=u.clientWidth,f=u.clientHeight;return kg(i.left,i.top,m,f)},u=>kg(Math.max(u.pageLeft,i.left),Math.max(u.pageTop,i.top),u.width,u.height))},_d=()=>Be.fromDom(document),db=(t,s)=>t.view(s).fold(q([]),i=>{const u=t.owner(i),m=db(t,u);return[i].concat(m)}),Mp=(t,s)=>{const a=s.owner(t),i=db(s,a);return S.some(i)};var mb=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?S.none():S.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(Be.fromDom)},owner:t=>fa(t)});const el=t=>{const s=_d(),a=Dr(s);return Mp(t,mb).fold(dn(Ma,t),u=>{const m=Rc(t),f=Bo(u,(h,b)=>{const C=Rc(b);return{left:h.left+C.left,top:h.top+C.top}},{left:0,top:0});return eo(f.left+m.left+a.left,f.top+m.top+a.top)})},Rp=(t,s,a)=>({point:t,width:s,height:a}),tl=(t,s,a,i)=>({x:t,y:s,width:a,height:i}),Oo=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),ms=t=>{const s=Ma(t),a=Eu(t),i=Rl(t);return Oo(s.left,s.top,a,i)},nl=t=>{const s=el(t),a=Eu(t),i=Rl(t);return Oo(s.left,s.top,a,i)},Im=(t,s)=>{const a=Math.max(t.x,s.x),i=Math.max(t.y,s.y),u=Math.min(t.right,s.right),m=Math.min(t.bottom,s.bottom),f=u-a,h=m-i;return Oo(a,i,f,h)},Fm=(t,s)=>Zo(s,(a,i)=>Im(a,i),t),ws=()=>ui(window),at=t=>{let s=t;return{get:()=>s,set:u=>{s=u}}},Np=t=>{const s=at(S.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(S.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:h=>{a(),s.set(S.some(h))}}},Mu=()=>Np(t=>t.destroy()),Ad=()=>Np(t=>t.unbind()),Nn=()=>{const t=Np(re);return{...t,on:a=>t.get().each(a)}};var $m=tinymce.util.Tools.resolve("tinymce.ThemeManager");const Hm=t=>{const s=m=>m(t),a=q(t),i=()=>u,u={tag:!0,inner:t,fold:(m,f)=>f(t),isValue:nt,isError:Sn,map:m=>jt.value(m(t)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:m=>{m(t)},toOptional:()=>S.some(t)};return u},fb=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(i,u)=>i(t),isValue:Sn,isError:nt,map:s,mapError:i=>jt.error(i(t)),bind:s,exists:Sn,forall:nt,getOr:$t,or:$t,getOrThunk:Po,orThunk:Po,getOrDie:Ht(String(t)),each:re,toOptional:S.none};return a},jt={value:Hm,error:fb,fromOption:(t,s)=>t.fold(()=>fb(s),Hm)};var ts;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(ts||(ts={}));const Od=(t,s,a)=>t.stype===ts.Error?s(t.serror):a(t.svalue),Tg=t=>{const s=[],a=[];return Ue(t,i=>{Od(i,u=>a.push(u),u=>s.push(u))}),{values:s,errors:a}},Pp=(t,s)=>t.stype===ts.Error?{stype:ts.Error,serror:s(t.serror)}:t,gb=(t,s)=>t.stype===ts.Value?{stype:ts.Value,svalue:s(t.svalue)}:t,rS=(t,s)=>t.stype===ts.Value?s(t.svalue):t,ta=(t,s)=>t.stype===ts.Error?s(t.serror):t,di=t=>({stype:ts.Value,svalue:t}),_g=t=>({stype:ts.Error,serror:t}),Vo={fromResult:t=>t.fold(_g,di),toResult:t=>Od(t,jt.error,jt.value),svalue:di,partition:Tg,serror:_g,bind:rS,bindError:ta,map:gb,mapError:Pp,fold:Od},Fl=(t,s,a,i)=>({tag:"field",key:t,newKey:s,presence:a,prop:i}),Ru=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Xn=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},$l=(t,s)=>s,aS=(t,s)=>xs(t)&&xs(s)?Co(t,s):s,Ag=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const u=s[i];for(const m in u)sn(u,m)&&(a[m]=t(a[m],u[m]))}return a},Co=Ag(aS),Dd=Ag($l),Pc=()=>({tag:"required",process:{}}),Og=t=>({tag:"defaultedThunk",process:t}),Dg=t=>Og(q(t)),Bp=()=>({tag:"option",process:{}}),v=t=>({tag:"mergeWithThunk",process:t}),w=t=>v(q(t)),O=(t,s)=>t.length>0?Vo.svalue(Co(s,Dd.apply(void 0,t))):Vo.svalue(s),V=t=>la(Vo.serror,Dt)(t),pt={consolidateObj:(t,s)=>{const a=Vo.partition(t);return a.errors.length>0?V(a.errors):O(a.values,s)},consolidateArr:t=>{const s=Vo.partition(t);return s.errors.length>0?V(s.errors):Vo.svalue(s.values)}},It=t=>X(t)&&ao(t).length>100?" removed due to size":JSON.stringify(t,null,2),Bt=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:q("... (only showing first ten failures)")}]):t;return we(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},ft=(t,s)=>Vo.serror([{path:t,getErrorInfo:s}]),po=(t,s,a)=>ft(t,()=>'Could not find valid *required* value for "'+s+'" in '+It(a)),Es=(t,s)=>ft(t,()=>'Choice schema did not contain choice key: "'+s+'"'),sc=(t,s,a)=>ft(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+It(s)),Hl=(t,s)=>ft(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),cT=(t,s)=>ft(t,q(s)),Mg=t=>{const s=(i,u)=>Vo.bindError(t(u),m=>cT(i,m)),a=q("val");return{extract:s,toString:a}},cS=Mg(Vo.svalue),$r=(t,s,a,i)=>He(s,a).fold(()=>po(t,a,s),i),iS=(t,s,a,i)=>{const u=He(t,s).getOrThunk(()=>a(t));return i(u)},rP=(t,s,a)=>a(He(t,s)),iT=(t,s,a,i)=>{const u=He(t,s).map(m=>m===!0?a(t):m);return i(u)},Qs=(t,s,a,i,u)=>{const m=h=>u.extract(s.concat([i]),h),f=h=>h.fold(()=>Vo.svalue(S.none()),b=>{const C=u.extract(s.concat([i]),b);return Vo.map(C,S.some)});switch(t.tag){case"required":return $r(s,a,i,m);case"defaultedThunk":return iS(a,i,t.process,m);case"option":return rP(a,i,f);case"defaultedOptionThunk":return iT(a,i,t.process,f);case"mergeWithThunk":return iS(a,i,q({}),h=>{const b=Co(t.process(a),h);return m(b)})}},Lp=(t,s,a)=>{const i={},u=[];for(const m of a)Xn(m,(f,h,b,C)=>{const x=Qs(b,t,s,f,C);Vo.fold(x,k=>{u.push(...k)},k=>{i[h]=k})},(f,h)=>{i[f]=h(s)});return u.length>0?Vo.serror(u):Vo.svalue(i)},ks=t=>({extract:(i,u)=>t().extract(i,u),toString:()=>t().toString()}),lS=t=>ao(Ac(t,so)),rc=t=>{const s=Et(t),a=Bo(t,(u,m)=>Xn(m,f=>Co(u,{[f]:!0}),q(u)),{});return{extract:(u,m)=>{const f=kr(m)?[]:lS(m),h=Hn(f,b=>!_r(a,b));return h.length===0?s.extract(u,m):Hl(u,h)},toString:s.toString}},Et=t=>({extract:(i,u)=>Lp(i,u,t),toString:()=>`obj{
`+we(t,u=>Xn(u,(m,f,h,b)=>m+" -> "+b.toString(),(m,f)=>"state("+m+")")).join(`
`)+"}"}),Bc=t=>({extract:(i,u)=>{const m=we(u,(f,h)=>t.extract(i.concat(["["+h+"]"]),f));return pt.consolidateArr(m)},toString:()=>"array("+t.toString()+")"}),pb=(t,s)=>{const a=s!==void 0?s:$t;return{extract:(m,f)=>{const h=[];for(const b of t){const C=b.extract(m,f);if(C.stype===ts.Value)return{stype:ts.Value,svalue:a(C.svalue)};h.push(C)}return pt.consolidateArr(h)},toString:()=>"oneOf("+we(t,m=>m.toString()).join(", ")+")"}},aP=(t,s)=>{const a=(m,f)=>Bc(Mg(t)).extract(m,f);return{extract:(m,f)=>{const h=ao(f),b=a(m,h);return Vo.bind(b,C=>{const x=we(C,k=>Fl(k,k,Pc(),s));return Et(x).extract(m,f)})},toString:()=>"setOf("+s.toString()+")"}},lT=(t,s)=>{const a=Pl(s);return{extract:(m,f)=>a().extract(m,f),toString:()=>a().toString()}},bb=la(Bc,Et),mi=q(cS),Vl=(t,s)=>Mg(a=>{const i=typeof a;return t(a)?Vo.svalue(a):Vo.serror(`Expected type: ${s} but got: ${i}`)}),Vm=Vl(qs,"number"),Ze=Vl(on,"string"),fi=Vl(kr,"boolean"),uS=Vl(Ms,"function"),Rg=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Rg(t[s]));default:return!1}},ol=Mg(t=>Rg(t)?Vo.svalue(t):Vo.serror("Expected value to be acceptable for sending via postMessage")),vb=(t,s,a,i)=>He(a,i).fold(()=>sc(t,a,i),m=>m.extract(t.concat(["branch: "+i]),s)),Ng=(t,s)=>({extract:(u,m)=>He(m,t).fold(()=>Es(u,t),h=>vb(u,m,s,h)),toString:()=>"chooseOn("+t+"). Possible values: "+ao(s)}),zm=()=>Bc(cS),Ip=t=>Mg(s=>t(s).fold(Vo.serror,Vo.svalue)),sl=(t,s)=>aP(a=>Vo.fromResult(t(a)),s),uT=(t,s,a)=>{const i=s.extract([t],a);return Vo.mapError(i,u=>({input:a,errors:u}))},ko=(t,s,a)=>Vo.toResult(uT(t,s,a)),Te=t=>t.fold(s=>{throw new Error(Pg(s))},$t),pa=(t,s,a)=>Te(ko(t,s,a)),Pg=t=>`Errors: 
`+Bt(t.errors).join(`
`)+`

Input object: `+It(t.input),Ts=(t,s)=>Ng(t,Zn(s,Et)),Bg=(t,s)=>lT(t,s),Fs=Fl,An=Ru,yb=t=>Ip(s=>wn(t,s)?jt.value(s):jt.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),ve=t=>Fs(t,t,Pc(),mi()),Tn=(t,s)=>Fs(t,t,Pc(),s),Cb=t=>Tn(t,Vm),$s=t=>Tn(t,Ze),er=(t,s)=>Fs(t,t,Pc(),yb(s)),gi=t=>Tn(t,uS),dS=(t,s)=>Fs(t,t,Bp(),Mg(a=>Vo.serror("The field: "+t+" is forbidden. "+s))),Md=(t,s)=>Fs(t,t,Pc(),Et(s)),mS=(t,s)=>Fs(t,t,Pc(),bb(s)),Na=(t,s)=>Fs(t,t,Pc(),Bc(s)),En=t=>Fs(t,t,Bp(),mi()),zl=(t,s)=>Fs(t,t,Bp(),s),Fp=t=>zl(t,Vm),Ko=t=>zl(t,Ze),dT=(t,s)=>zl(t,yb(s)),Rd=t=>zl(t,uS),Sb=(t,s)=>zl(t,Bc(s)),Hs=(t,s)=>zl(t,Et(s)),Hr=(t,s)=>zl(t,rc(s)),se=(t,s)=>Fs(t,t,Dg(s),mi()),mo=(t,s,a)=>Fs(t,t,Dg(s),a),fS=(t,s)=>mo(t,s,Vm),Do=(t,s)=>mo(t,s,Ze),Vr=(t,s,a)=>mo(t,s,yb(a)),ur=(t,s)=>mo(t,s,fi),Ln=(t,s)=>mo(t,s,uS),gS=(t,s)=>mo(t,s,ol),Nd=(t,s,a)=>mo(t,s,Bc(a)),hS=(t,s,a)=>mo(t,s,Et(a)),Pa={generate:t=>{if(!ho(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return Ue(t,(i,u)=>{const m=ao(i);if(m.length!==1)throw new Error("one and only one name per case");const f=m[0],h=i[f];if(a[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ho(h))throw new Error("case arguments must be an array");s.push(f),a[f]=(...b)=>{const C=b.length;if(C!==h.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+h.length+" ("+h+"), got "+C);return{fold:(...k)=>{if(k.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+k.length);return k[u].apply(null,b)},match:k=>{const A=ao(k);if(s.length!==A.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+A.join(","));if(!Br(s,L=>wn(A,L)))throw new Error("Not all branches were specified when using match. Specified: "+A.join(", ")+`
Required: `+s.join(", "));return k[f].apply(null,b)},log:k=>{console.log(k,{constructors:s,constructor:f,params:b})}}}}),a}};Pa.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const cP=t=>{const s=[],a=[];return Ue(t,i=>{i.fold(u=>{s.push(u)},u=>{a.push(u)})}),{errors:s,values:a}},pS=(t,s)=>{const a={};return Ao(t,(i,u)=>{wn(s,u)||(a[u]=i)}),a},mT=(t,s)=>({[t]:s}),fT=t=>{const s={};return Ue(t,a=>{s[a.key]=a.value}),s},gT=(t,s)=>pS(t,s),Um=(t,s)=>mT(t,s),Lg=t=>fT(t),iP=(t,s)=>t.length===0?jt.value(s):jt.value(Co(s,Dd.apply(void 0,t))),bS=t=>jt.error(Dt(t)),lP=(t,s)=>{const a=cP(t);return a.errors.length>0?bS(a.errors):iP(a.values,s)},hT=t=>Ms(t)?t:Sn,xb=(t,s,a)=>{let i=t.dom;const u=hT(a);for(;i.parentNode;){i=i.parentNode;const m=Be.fromDom(i),f=s(m);if(f.isSome())return f;if(u(m))break}return S.none()},Ig=(t,s,a)=>{const i=s(t),u=hT(a);return i.orThunk(()=>u(t)?S.none():xb(t,s,u))},wb=(t,s)=>Dn(t.element,s.event.target),Zm={can:nt,abort:Sn,run:re},Fg=t=>{if(!_r(t,"can")&&!_r(t,"abort")&&!_r(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Zm,...t}},vS=(t,s)=>(...a)=>Zo(t,(i,u)=>i&&s(u).apply(void 0,a),!0),uP=(t,s)=>(...a)=>Zo(t,(i,u)=>i||s(u).apply(void 0,a),!1),pT=t=>Ms(t)?{can:nt,abort:Sn,run:t}:t,dP=t=>{const s=vS(t,u=>u.can),a=uP(t,u=>u.abort);return{can:s,abort:a,run:(...u)=>{Ue(t,m=>{m.run.apply(void 0,u)})}}},tr=q,Nu=tr("touchstart"),$g=tr("touchmove"),Hg=tr("touchend"),yS=tr("touchcancel"),ac=tr("mousedown"),$p=tr("mousemove"),Eb=tr("mouseout"),kb=tr("mouseup"),Ul=tr("mouseover"),rl=tr("focusin"),bT=tr("focusout"),Lc=tr("keydown"),mP=tr("keyup"),hi=tr("input"),Pu=tr("change"),Wm=tr("click"),fP=tr("transitioncancel"),Hp=tr("transitionend"),jm=tr("transitionstart"),gP=tr("selectstart"),Yo=t=>q("alloy."+t),vT={tap:Yo("tap")},Zl=Yo("focus"),Vg=Yo("blur.post"),CS=Yo("paste.post"),Pd=Yo("receive"),ba=Yo("execute"),Tb=Yo("focus.item"),_b=vT.tap,Gm=Yo("longpress"),Vs=Yo("sandbox.close"),Ab=Yo("typeahead.cancel"),Ob=Yo("system.init"),hP=Yo("system.touchmove"),pP=Yo("system.touchend"),Db=Yo("system.scroll"),zg=Yo("system.resize"),Ic=Yo("system.attached"),Wl=Yo("system.detached"),Bd=Yo("system.dismissRequested"),yT=Yo("system.repositionRequested"),Mb=Yo("focusmanager.shifted"),Vp=Yo("slotcontainer.visibility"),CT=Yo("system.external.element.scroll"),ST=Yo("change.tab"),xT=Yo("dismiss.tab"),SS=Yo("highlight"),Ug=Yo("dehighlight"),Qt=(t,s)=>{Nb(t,t.element,s,{})},st=(t,s,a)=>{Nb(t,t.element,s,a)},Ld=t=>{Qt(t,ba())},Rb=(t,s,a)=>{Nb(t,s,a,{})},Nb=(t,s,a,i)=>{const u={target:s,...i};t.getSystem().triggerEvent(a,s,u)},wT=(t,s,a,i)=>{const u={...i,target:s};t.getSystem().triggerEvent(a,s,u)},Pb=(t,s,a,i)=>{t.getSystem().triggerEvent(a,s,i.event)},In=t=>Lg(t),ET=(t,s)=>({key:t,value:Fg({abort:s})}),bP=(t,s)=>({key:t,value:Fg({can:s})}),xS=t=>({key:t,value:Fg({run:(s,a)=>{a.event.prevent()}})}),be=(t,s)=>({key:t,value:Fg({run:s})}),Bb=(t,s,a)=>({key:t,value:Fg({run:(i,u)=>{s.apply(void 0,[i,u].concat(a))}})}),kT=t=>s=>be(t,s),Lb=t=>s=>({key:t,value:Fg({run:(a,i)=>{wb(a,i)&&s(a,i)}})}),TT=(t,s)=>be(t,(a,i)=>{a.getSystem().getByUid(s).each(u=>{Pb(u,u.element,t,i)})}),Zg=(t,s,a)=>{const i=s.partUids[a];return TT(t,i)},Ib=(t,s)=>be(t,(a,i)=>{const u=i.event,m=a.getSystem().getByDom(u.target).getOrThunk(()=>Ig(u.target,h=>a.getSystem().getByDom(h).toOptional(),Sn).getOr(a));s(a,m,i)}),qm=t=>be(t,(s,a)=>{a.cut()}),zp=t=>be(t,(s,a)=>{a.stop()}),Id=(t,s)=>Lb(t)(s),co=Lb(Ic()),jl=Lb(Wl()),_T=Lb(Ob()),Bu=kT(ba()),AT=(t,s,a)=>{const i=a.toString(),u=i.indexOf(")")+1,m=i.indexOf("("),f=i.substring(m+1,u-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Up(f.slice(0,1).concat(f.slice(3)))}),t},Up=t=>we(t,s=>ec(s,"/*")?s.substring(0,s.length-2):s),wS=(t,s)=>{const a=t.toString(),i=a.indexOf(")")+1,u=a.indexOf("("),m=a.substring(u+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Up(m)}),t},vP=(t,s)=>{const a=s.toString(),i=a.indexOf(")")+1,u=a.indexOf("("),m=a.substring(u+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Up(m.slice(1))}),t},cc=t=>({classes:Tr(t.classes)?[]:t.classes,attributes:Tr(t.attributes)?{}:t.attributes,styles:Tr(t.styles)?{}:t.styles}),Fb=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),yP=(t,s,a)=>Bu(i=>{a(i,t,s)}),Km=(t,s,a)=>_T((i,u)=>{a(i,t,s)}),CP=(t,s,a,i,u,m)=>{const f=rc(t),h=Hs(s,[Hr("config",t)]);return $b(f,h,s,a,i,u,m)},Ym=(t,s,a,i,u,m)=>{const f=t,h=Hs(s,[zl("config",t)]);return $b(f,h,s,a,i,u,m)},ES=(t,s,a)=>AT((u,...m)=>{const f=[u].concat(m);return u.config({name:q(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},h=>{const b=Array.prototype.slice.call(f,1);return s.apply(void 0,[u,h.config,h.state].concat(b))})},a,s),SP=t=>({key:t,value:void 0}),$b=(t,s,a,i,u,m,f)=>{const h=k=>_r(k,a)?k[a]():S.none(),b=Zn(u,(k,A)=>ES(a,k,A)),x={...Zn(m,(k,A)=>wS(k,A)),...b,revoke:dn(SP,a),config:k=>{const A=pa(a+"-config",t,k);return{key:a,value:{config:A,me:x,configAsRaw:Pl(()=>pa(a+"-config",t,k)),initialConfig:k,state:f}}},schema:q(s),exhibit:(k,A)=>Da(h(k),He(i,"exhibit"),(N,L)=>L(A,N.config,N.state)).getOrThunk(()=>cc({})),name:q(a),handlers:k=>h(k).map(A=>He(i,"events").getOr(()=>({}))(A.config,A.state)).getOr({})};return x},al={init:()=>zr({readState:q("No State required")})},zr=t=>t,_e=t=>Lg(t),Wg=rc([ve("fields"),ve("name"),se("active",{}),se("apis",{}),se("state",al),se("extra",{})]),zs=t=>{const s=pa("Creating behaviour: "+t.name,Wg,t);return CP(s.fields,s.name,s.active,s.apis,s.extra,s.state)},xP=rc([ve("branchKey"),ve("branches"),ve("name"),se("active",{}),se("apis",{}),se("state",al),se("extra",{})]),kS=t=>{const s=pa("Creating behaviour: "+t.name,xP,t);return Ym(Ts(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},wP=q(void 0),Jn=(t,s)=>{const a=Vt(t,s);return a===void 0||a===""?[]:a.split(" ")},EP=(t,s,a)=>{const u=Jn(t,s).concat([a]);return Ve(t,s,u.join(" ")),!0},kP=(t,s,a)=>{const i=Hn(Jn(t,s),u=>u!==a);return i.length>0?Ve(t,s,i.join(" ")):Vn(t,s),!1},jg=t=>t.dom.classList!==void 0,Gg=t=>Jn(t,"class"),TS=(t,s)=>EP(t,"class",s),Gl=(t,s)=>kP(t,"class",s),TP=(t,s)=>wn(Gg(t),s)?Gl(t,s):TS(t,s),Xo=(t,s)=>{jg(t)?t.dom.classList.add(s):TS(t,s)},OT=t=>{(jg(t)?t.dom.classList:Gg(t)).length===0&&Vn(t,"class")},bo=(t,s)=>{jg(t)?t.dom.classList.remove(s):Gl(t,s),OT(t)},_S=(t,s)=>{const a=jg(t)?t.dom.classList.toggle(s):TP(t,s);return OT(t),a},na=(t,s)=>jg(t)&&t.dom.classList.contains(s),qg=(t,s)=>{Ue(s,a=>{Xo(t,a)})},cl=(t,s)=>{Ue(s,a=>{bo(t,a)})},Zj=(t,s)=>{Ue(s,a=>{_S(t,a)})},Wj=(t,s)=>Br(s,a=>na(t,a)),jj=t=>{const s=t.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const u=s.item(i);u!==null&&(a[i]=u)}return a},_P=t=>jg(t)?jj(t):Gg(t),il=(t,s,a,i,u)=>{const m=f=>f+"px";return{position:t,left:s.map(m),top:a.map(m),right:i.map(m),bottom:u.map(m)}},ll=t=>({...t,position:S.some(t.position)}),Ur=(t,s)=>{bg(t,ll(s))},Kg=t=>(Ps(Fo(t,"position"),"fixed")?S.none():pd(t)).orThunk(()=>{const i=Be.fromTag("span");return lr(t).bind(u=>{Ra(u,i);const m=pd(i);return Nc(i),m})}),Hb=t=>Kg(t).map(Ma).getOrThunk(()=>eo(0,0)),AP=(t,s)=>{const a=t.element;Xo(a,s.transitionClass),bo(a,s.fadeOutClass),Xo(a,s.fadeInClass),s.onShow(t)},Zp=(t,s)=>{const a=t.element;Xo(a,s.transitionClass),bo(a,s.fadeInClass),Xo(a,s.fadeOutClass),s.onHide(t)},Xm=(t,s)=>t.y<s.bottom&&t.bottom>s.y,Jm=(t,s)=>t.y>=s.y,Yg=(t,s)=>t.bottom<=s.bottom,Qm=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),ef=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),Vb=t=>t.box.x-t.win.x,DT=(t,s,a)=>{const i=s.win,u=s.box,m=Vb(s);return _o(t,f=>{switch(f){case"bottom":return Yg(u,a.bounds)?S.none():S.some(ef(i,m,a));case"top":return Jm(u,a.bounds)?S.none():S.some(Qm(i,m,a));default:return S.none()}}).getOr({location:"no-dock"})},OP=(t,s,a)=>Br(t,i=>{switch(i){case"bottom":return Yg(s,a.bounds);case"top":return Jm(s,a.bounds)}}),MT=(t,s)=>{const a=s.optScrollEnv.fold(q(t.bounds.y),i=>i.scrollElmTop+(t.bounds.y-i.currentScrollTop));return eo(t.bounds.x,a)},RT=(t,s)=>{const a=s.optScrollEnv.fold(q(t.y),i=>t.y+i.currentScrollTop-i.scrollElmTop);return eo(t.x,a)},zb=(t,s,a)=>a.getInitialPos().map(i=>{const u=MT(i,s);return{box:Oo(u.left,u.top,Ft(t),es(t)),location:i.location}}),NT=(t,s,a,i,u)=>{const m=RT(s,a),f=Oo(m.left,m.top,s.width,s.height);i.setInitialPos({style:Ep(t),position:Ee(t,"position")||"static",bounds:f,location:u.location})},DP=(t,s,a,i,u)=>{i.getInitialPos().fold(()=>NT(t,s,a,i,u),()=>re)},PT=(t,s,a)=>a.getInitialPos().bind(i=>{var u;switch(a.clearInitialPos(),i.position){case"static":return S.some({morph:"static"});case"absolute":const m=Kg(t).getOr(ge()),f=ms(m),h=(u=m.dom.scrollTop)!==null&&u!==void 0?u:0;return S.some({morph:"absolute",positionCss:il("absolute",He(i.style,"left").map(b=>s.x-f.x),He(i.style,"top").map(b=>s.y-f.y+h),He(i.style,"right").map(b=>f.right-s.right),He(i.style,"bottom").map(b=>f.bottom-s.bottom))});default:return S.none()}}),MP=(t,s,a)=>zb(t,s,a).filter(({box:i})=>OP(a.getModes(),i,s)).bind(({box:i})=>PT(t,i,a)),Ub=t=>{switch(t.location){case"top":return S.some({morph:"fixed",positionCss:il("fixed",S.some(t.leftX),S.some(t.topY),S.none(),S.none())});case"bottom":return S.some({morph:"fixed",positionCss:il("fixed",S.some(t.leftX),S.none(),S.none(),S.some(t.bottomY))});default:return S.none()}},BT=(t,s,a)=>{const i=ms(t),u=ws(),m=DT(a.getModes(),{win:u,box:i},s);return m.location==="top"||m.location==="bottom"?(NT(t,i,s,a,m),Ub(m)):S.none()},Wp=(t,s,a)=>MP(t,s,a).orThunk(()=>s.optScrollEnv.bind(i=>zb(t,s,a)).bind(({box:i,location:u})=>{const m=ws(),f=Vb({win:m,box:i}),h=u==="top"?Qm(m,f,s):ef(m,f,s);return Ub(h)})),RP=(t,s,a)=>{const i=t.element;return Ps(Fo(i,"position"),"fixed")?Wp(i,s,a):BT(i,s,a)},NP=(t,s,a)=>{const i=t.element;return zb(i,s,a).bind(({box:u})=>PT(i,u,a))},LT=(t,s,a,i)=>{const u=ms(t),m=ws(),f=Vb({win:m,box:u}),h=i(m,f,s);return h.location==="bottom"||h.location==="top"?(DP(t,u,s,a,h),Ub(h)):S.none()},Fd=(t,s,a)=>{a.setDocked(!1),Ue(["left","right","top","bottom","position"],i=>rn(t.element,i)),s.onUndocked(t)},Zb=(t,s,a,i)=>{const u=i.position==="fixed";a.setDocked(u),Ur(t.element,i),(u?s.onDocked:s.onUndocked)(t)},IT=(t,s,a,i,u=!1)=>{s.contextual.each(m=>{m.lazyContext(t).each(f=>{const h=Xm(f,i.bounds);h!==a.isVisible()&&(a.setVisible(h),u&&!h?(qg(t.element,[m.fadeOutClass]),m.onHide(t)):(h?AP:Zp)(t,m))})})},FT=(t,s,a,i,u)=>{IT(t,s,a,i,!0),Zb(t,s,a,u.positionCss)},$T=(t,s,a,i,u)=>{switch(u.morph){case"static":return Fd(t,s,a);case"absolute":return Zb(t,s,a,u.positionCss);case"fixed":return FT(t,s,a,i,u)}},tf=(t,s,a)=>{const i=s.lazyViewport(t);IT(t,s,a,i),RP(t,i,a).each(u=>{$T(t,s,a,i,u)})},Gj=(t,s,a)=>{const i=t.element;a.setDocked(!1);const u=s.lazyViewport(t);NP(t,u,a).each(m=>{switch(m.morph){case"static":{Fd(t,s,a);break}case"absolute":{Zb(t,s,a,m.positionCss);break}}}),a.setVisible(!0),s.contextual.each(m=>{cl(i,[m.fadeInClass,m.fadeOutClass,m.transitionClass]),m.onShow(t)}),Xg(t,s,a)},Xg=(t,s,a)=>{t.getSystem().isConnected()&&tf(t,s,a)},Jg=(t,s,a)=>{a.isDocked()&&Gj(t,s,a)},HT=t=>(s,a,i)=>{const u=a.lazyViewport(s);LT(s.element,u,i,t).each(f=>{FT(s,a,i,u,f)})},VT=HT(Qm),PP=HT(ef);var BP=Object.freeze({__proto__:null,refresh:Xg,reset:Jg,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,i)=>a.setModes(i),forceDockToTop:VT,forceDockToBottom:PP}),Qg=Object.freeze({__proto__:null,events:(t,s)=>In([Id(Hp(),(a,i)=>{t.contextual.each(u=>{na(a.element,u.transitionClass)&&(cl(a.element,[u.transitionClass,u.fadeInClass]),(s.isVisible()?u.onShown:u.onHidden)(a)),i.stop()})}),be(Db(),(a,i)=>{Xg(a,t,s)}),be(CT(),(a,i)=>{Xg(a,t,s)}),be(zg(),(a,i)=>{Jg(a,t,s)})])});const LP=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,ds(Be.fromDom(i))},Lu=t=>t.dom.innerHTML,nf=(t,s)=>{const i=fa(t).dom,u=Be.fromDom(i.createDocumentFragment()),m=LP(s,i);Js(u,m),Il(t),Ra(t,u)},AS=t=>{const s=Be.fromTag("div"),a=Be.fromDom(t.dom.cloneNode(!0));return Ra(s,a),Lu(s)},of=(t,s)=>Be.fromDom(t.dom.cloneNode(s)),IP=t=>of(t,!1),jp=t=>of(t,!0),Wb=t=>{if(vd(t))return"#shadow-root";{const s=IP(t);return AS(s)}},$d=t=>Wb(t),zT="unknown";var ul;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(ul||(ul={}));const ql=at({}),FP=(t,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(u,m,f)=>{a.push({outcome:"cut",target:m,purpose:f})},logEventStopped:(u,m,f)=>{a.push({outcome:"stopped",target:m,purpose:f})},logNoParent:(u,m,f)=>{a.push({outcome:"no-parent",target:m,purpose:f})},logEventNoHandlers:(u,m)=>{a.push({outcome:"no-handlers-left",target:m})},logEventResponse:(u,m,f)=>{a.push({outcome:"response",purpose:f,target:m})},write:()=>{const u=new Date().getTime();wn(["mousemove","mouseover","mouseout",Ob()],t)||console.log(t,{event:t,time:u-i,target:s.dom,sequence:we(a,m=>wn(["cut","stopped","response"],m.outcome)?"{"+m.purpose+"} "+m.outcome+" at ("+$d(m.target)+")":m.outcome)})}}},Us=(t,s,a)=>{switch(He(ql.get(),t).orThunk(()=>{const u=ao(ql.get());return _o(u,m=>t.indexOf(m)>-1?S.some(ql.get()[m]):S.none())}).getOr(ul.NORMAL)){case ul.NORMAL:return a(eh());case ul.LOGGING:{const u=FP(t,s),m=a(u);return u.write(),m}case ul.STOP:return!0}},jb=["alloy/data/Fields","alloy/debugging/Debugging"],ic=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return kt(s,a=>a.indexOf("alloy")>0&&!as(jb,i=>a.indexOf(i)>-1)).getOr(zT)}else return zT},$P={logEventCut:re,logEventStopped:re,logNoParent:re,logEventNoHandlers:re,logEventResponse:re,write:re},OS=(t,s,a)=>Us(t,s,a),eh=q($P),sf=q([ve("menu"),ve("selectedMenu")]),Kl=q([ve("item"),ve("selectedItem")]);q(Et(Kl().concat(sf())));const Fc=q(Et(Kl())),UT=Md("initSize",[ve("numColumns"),ve("numRows")]),HP=()=>Tn("markers",Fc()),th=()=>Md("markers",[ve("backgroundMenu")].concat(sf()).concat(Kl())),Iu=t=>Md("markers",we(t,ve)),Gb=(t,s,a)=>(ic(),Fs(s,s,a,Ip(i=>jt.value((...u)=>i.apply(void 0,u))))),an=t=>Gb("onHandler",t,Dg(re)),Zr=t=>Gb("onKeyboardHandler",t,Dg(S.none)),rf=t=>Gb("onHandler",t,Pc()),Gp=t=>Gb("onKeyboardHandler",t,Pc()),io=(t,s)=>An(t,q(s)),af=t=>An(t,$t),Hd=q(UT);var ZT=[Hs("contextual",[$s("fadeInClass"),$s("fadeOutClass"),$s("transitionClass"),gi("lazyContext"),an("onShow"),an("onShown"),an("onHide"),an("onHidden")]),Ln("lazyViewport",()=>({bounds:ws(),optScrollEnv:S.none()})),Nd("modes",["top","bottom"],Ze),an("onDocked"),an("onUndocked")],WT=Object.freeze({__proto__:null,init:t=>{const s=at(!1),a=at(!0),i=Nn(),u=at(t.modes),m=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${u.get().join(",")}`;return zr({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:u.get,setModes:u.set,readState:m})}});const to=zs({fields:ZT,name:"docking",active:Qg,apis:BP,state:WT}),qp=(t,s,a)=>Dn(s,t.element)&&!Dn(s,a),VP=In([bP(Zl(),(t,s)=>{const a=s.event,i=a.originator,u=a.target;return qp(t,i,u)?(console.warn(Zl()+` did not get interpreted by the desired target. 
Originator: `+$d(i)+`
Target: `+$d(u)+`
Check the `+Zl()+" event handlers"),!1):!0})]);var zP=Object.freeze({__proto__:null,events:VP});const cf=(t,s,a,i)=>{const u=t+s;return u>i?a:u<a?i:u},pi=(t,s,a)=>Math.min(Math.max(t,s),a),qb=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Fu=0;const Xe=t=>{const a=new Date().getTime(),i=Math.floor(qb()*1e9);return Fu++,t+"_"+i+Fu+String(a)},UP=q("alloy-id-"),jT=q("data-alloy-id"),ZP=UP(),GT=jT(),qT=(t,s)=>{const a=Xe(ZP+t);return DS(s,a),a},DS=(t,s)=>{Object.defineProperty(t.dom,GT,{value:s,writable:!0})},Kp=t=>{const s=Go(t)?t.dom[GT]:null;return S.from(s)},nh=t=>Xe(t),WP=$t,Yp=t=>{const s=u=>`The component must be in a context to execute: ${u}`+(t?`
`+$d(t().element)+" is not in context.":""),a=u=>()=>{throw new Error(s(u))},i=u=>()=>{console.warn(s(u))};return{debugInfo:q("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Sn}},jP=Yp(),Kb=Xe("alloy-premade"),bi=t=>(Object.defineProperty(t.element.dom,Kb,{value:t.uid,writable:!0}),Um(Kb,t)),GP=t=>sn(t.dom,Kb),Yb=t=>He(t,Kb),Xb=t=>vP((s,...a)=>t(s.getApis(),s,...a),t),qP=(t,s)=>{const a=we(s,u=>Hs(u.name(),[ve("config"),se("state",al)])),i=ko("component.behaviours",Et(a),t.behaviours).fold(u=>{throw new Error(Pg(u)+`
Complete spec:
`+JSON.stringify(t,null,2))},$t);return{list:s,data:Zn(i,u=>{const m=u.map(f=>({config:f.config,state:f.state.init(f.config)}));return q(m)})}},KP=t=>t.list,KT=t=>t.data,MS=(t,s)=>{const a={};return Ao(t,(i,u)=>{Ao(i,(m,f)=>{const h=He(a,f).getOr([]);a[f]=h.concat([s(u,m)])})}),a},YP=(t,s,a,i)=>{const u={...s};Ue(a,x=>{u[x.name()]=x.exhibit(t,i)});const m=MS(u,(x,k)=>({name:x,modification:k})),f=x=>Bo(x,(k,A)=>({...A.modification,...k}),{}),h=Bo(m.classes,(x,k)=>k.modification.concat(x),[]),b=f(m.attributes),C=f(m.styles);return cc({classes:h,attributes:b,styles:C})},YT=(t,s,a,i)=>{try{const u=El(a,(m,f)=>{const h=m[s],b=f[s],C=i.indexOf(h),x=i.indexOf(b);if(C===-1)throw new Error("The ordering for "+t+" does not have an entry for "+h+`.
Order specified: `+JSON.stringify(i,null,2));if(x===-1)throw new Error("The ordering for "+t+" does not have an entry for "+b+`.
Order specified: `+JSON.stringify(i,null,2));return C<x?-1:x<C?1:0});return jt.value(u)}catch(u){return jt.error([u])}},XP=(t,s)=>({handler:t,purpose:s}),Xp=(t,s)=>({cHandler:t,purpose:s}),JP=(t,s)=>Xp(dn.apply(void 0,[t.handler].concat(s)),t.purpose),lf=t=>t.cHandler,RS=(t,s)=>({name:t,handler:s}),XT=(t,s)=>{const a={};return Ue(t,i=>{a[i.name()]=i.handlers(s)}),a},Jb=(t,s,a)=>{const i={...a,...XT(s,t)};return MS(i,RS)},NS=(t,s,a,i)=>{const u=Jb(t,a,i);return QP(u,s)},PS=t=>{const s=pT(t);return(a,i,...u)=>{const m=[a,i].concat(u);s.abort.apply(void 0,m)?i.stop():s.can.apply(void 0,m)&&s.run.apply(void 0,m)}},JT=(t,s)=>jt.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(we(s,a=>a.name),null,2)]),BS=(t,s,a)=>{const i=s[a];return i?YT("Event: "+a,"name",t,i).map(u=>{const m=we(u,f=>f.handler);return dP(m)}):JT(a,t)},QP=(t,s)=>{const a=ai(t,(i,u)=>(i.length===1?jt.value(i[0].handler):BS(i,s,u)).map(f=>{const h=PS(f),b=i.length>1?Hn(s[u],C=>as(i,x=>x.name===C)).join(" > "):i[0].name;return Um(u,XP(h,b))}));return lP(a,{})},uf="alloy.base.behaviour",QT=Et([Fs("dom","dom",Pc(),Et([ve("tag"),se("styles",{}),se("classes",[]),se("attributes",{}),En("value"),En("innerHtml")])),ve("components"),ve("uid"),se("events",{}),se("apis",{}),Fs("eventOrder","eventOrder",w({[ba()]:["disabling",uf,"toggling","typeaheadevents"],[Zl()]:[uf,"focusing","keying"],[Ob()]:[uf,"disabling","toggling","representing","tooltipping"],[hi()]:[uf,"representing","streaming","invalidating"],[Wl()]:[uf,"representing","item-events","toolbar-button-events","tooltipping"],[ac()]:["focusing",uf,"item-type-events"],[Nu()]:["focusing",uf,"item-type-events"],[Ul()]:["item-type-events","tooltipping"],[Pd()]:["receiving","reflecting","tooltipping"]}),mi()),En("domModification")]),Vd=t=>ko("custom.definition",QT,t),df=t=>({...t.dom,uid:t.uid,domChildren:we(t.components,s=>s.element)}),eB=t=>t.domModification.fold(()=>cc({}),cc),fe=t=>t.events,vi=t=>t.dom.value,mf=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},tB=(t,s,a)=>nc(t,s).map(u=>{if(a.exists(f=>!Dn(f,u))){const f=a.map(Qn).getOr("span"),h=Be.fromTag(f);return Ou(u,h),h}else return u}),Qb=(t,s,a)=>{a.fold(()=>Ra(t,s),i=>{Dn(i,s)||(Ou(i,s),Nc(i))})},yi=(t,s,a)=>{const i=we(s,a),u=ds(t);return Ue(u.slice(i.length),Nc),i},LS=(t,s,a,i)=>{const u=nc(t,s),m=i(a,u),f=tB(t,s,u);return Qb(t,m.element,f),m},e_=(t,s,a)=>yi(t,s,(i,u)=>LS(t,u,i,a)),t_=(t,s)=>yi(t,s,(a,i)=>{const u=nc(t,i);return Qb(t,a,u),a}),ev=(t,s)=>{const a=ao(t),i=ao(s),u=vt(i,a),m=Rn(t,(f,h)=>!sn(s,h)||f!==s[h]).t;return{toRemove:u,toSet:m}},nB=(t,s)=>{const{class:a,style:i,...u}=xp(s),{toSet:m,toRemove:f}=ev(t.attributes,u),h=()=>{Ue(f,Y=>Vn(s,Y)),Tt(s,m)},b=Ep(s),{toSet:C,toRemove:x}=ev(t.styles,b),k=()=>{Ue(x,Y=>rn(s,Y)),ii(s,C)},A=_P(s),N=vt(A,t.classes),L=vt(t.classes,A),F=()=>{qg(s,L),cl(s,N)},J=Y=>{nf(s,Y)},$=()=>{const Y=t.domChildren;t_(s,Y)},G=()=>{const Y=s,ce=t.value.getOrUndefined();ce!==vi(Y)&&mf(Y,ce??"")};return h(),F(),k(),t.innerHtml.fold($,J),G(),s},n_=t=>{const s=Be.fromTag(t.tag);Tt(s,t.attributes),qg(s,t.classes),ii(s,t.styles),t.innerHtml.each(i=>nf(s,i));const a=t.domChildren;return Js(s,a),t.value.each(i=>{mf(s,i)}),s},oB=(t,s)=>{try{const a=nB(t,s);return S.some(a)}catch{return S.none()}},o_=t=>t.innerHtml.isSome()&&t.domChildren.length>0,sB=(t,s)=>{const a=u=>Qn(u)===t.tag&&!o_(t)&&!GP(u),i=s.filter(a).bind(u=>oB(t,u)).getOrThunk(()=>n_(t));return DS(i,t.uid),i},s_=t=>{const s=He(t,"behaviours").getOr({});return oe(ao(s),a=>{const i=s[a];return so(i)?[i.me]:[]})},rB=(t,s)=>qP(t,s),aB=t=>{const s=s_(t);return rB(t,s)},r_=(t,s,a)=>{const i=df(t),u=eB(t),m={"alloy.base.modification":u},f=s.length>0?YP(a,m,s,i):u;return Fb(i,f)},tv=(t,s,a)=>{const i={"alloy.base.behaviour":fe(t)};return NS(a,t.eventOrder,s,i).getOrDie()},cB=(t,s)=>{const a=()=>Y,i=at(jP),u=Te(Vd(t)),m=aB(t),f=KP(m),h=KT(m),b=r_(u,f,h),C=sB(b,s),x=tv(u,f,h),k=at(u.components),A=ce=>{i.set(ce)},N=()=>{i.set(Yp(a))},L=()=>{const ce=ds(C),le=oe(ce,Me=>i.get().getByDom(Me).fold(()=>[],cs));k.set(le)},F=ce=>{const le=h;return(Ms(le[ce.name()])?le[ce.name()]:()=>{throw new Error("Could not find "+ce.name()+" in "+JSON.stringify(t,null,2))})()},J=ce=>Ms(h[ce.name()]),$=()=>u.apis,G=ce=>h[ce]().map(le=>le.state.readState()).getOr("not enabled"),Y={uid:t.uid,getSystem:i.get,config:F,hasConfigured:J,spec:t,readState:G,getApis:$,connect:A,disconnect:N,element:C,syncComponents:L,components:k.get,events:x};return Y},a_=(t,s)=>{const a=He(t,"components").getOr([]);return s.fold(()=>we(a,dr),i=>we(a,(u,m)=>FS(u,nc(i,m))))},iB=(t,s)=>{const{events:a,...i}=WP(t),u=a_(i,s),m={...i,events:{...zP,...a},components:u};return jt.value(cB(m,s))},lo=t=>{const s=Be.fromText(t);return IS({element:s})},IS=t=>{const s=pa("external.component",rc([ve("element"),En("uid")]),t),a=at(Yp()),i=h=>{a.set(h)},u=()=>{a.set(Yp(()=>f))},m=s.uid.getOrThunk(()=>nh("external"));DS(s.element,m);const f={uid:m,getSystem:a.get,config:S.none,hasConfigured:Sn,connect:i,disconnect:u,getApis:()=>({}),element:s.element,spec:t,readState:q("No state"),syncComponents:re,components:q([]),events:{}};return bi(f)},c_=nh,i_=t=>sn(t,"uid"),FS=(t,s)=>Yb(t).getOrThunk(()=>{const a=i_(t)?t:{uid:c_(""),...t};return iB(a,s).getOrDie()}),dr=t=>FS(t,S.none()),lc=bi;var l_=(t,s,a,i,u)=>t(a,i)?S.some(a):Ms(u)&&u(a)?S.none():s(a,i,u);const $S=(t,s,a)=>{let i=t.dom;const u=Ms(a)?a:Sn;for(;i.parentNode;){i=i.parentNode;const m=Be.fromDom(i);if(s(m))return S.some(m);if(u(m))break}return S.none()},HS=(t,s,a)=>l_((u,m)=>m(u),$S,t,s,a),lB=(t,s)=>{const a=t.dom;return a.parentNode?nv(Be.fromDom(a.parentNode),i=>!Dn(t,i)&&s(i)):S.none()},nv=(t,s)=>{const a=u=>s(Be.fromDom(u));return kt(t.dom.childNodes,a).map(Be.fromDom)},u_=(t,s)=>{const a=i=>{for(let u=0;u<i.childNodes.length;u++){const m=Be.fromDom(i.childNodes[u]);if(s(m))return S.some(m);const f=a(i.childNodes[u]);if(f.isSome())return f}return S.none()};return a(t.dom)},VS=(t,s,a)=>HS(t,s,a).isSome(),Qj=t=>Am(t),fs=(t,s,a)=>$S(t,i=>Al(i,s),a),eG=(t,s)=>lB(t,a=>Al(a,s)),Ci=(t,s)=>nv(t,a=>Al(a,s)),fo=(t,s)=>Am(s,t),Yl=(t,s,a)=>l_((u,m)=>Al(u,m),fs,t,s,a),Jp="aria-controls",uB=t=>HS(t,a=>{if(!Go(a))return!1;const i=Vt(a,"id");return i!==void 0&&i.indexOf(Jp)>-1}).bind(a=>{const i=Vt(a,"id"),u=Xs(a);return fo(u,`[${Jp}="${i}"]`)}),d_=()=>{const t=Xe(Jp);return{id:t,link:i=>{Ve(i,Jp,t)},unlink:i=>{Vn(i,Jp)}}},m_=(t,s)=>uB(s).exists(a=>zd(t,a)),zd=(t,s)=>VS(s,a=>Dn(a,t.element),Sn)||m_(t,s),mr=(t,s,a,i,u,m,f,h=!1)=>({x:t,y:s,bubble:a,direction:i,placement:u,restriction:m,label:`${f}-${u}`,alwaysFit:h}),Xl=Pa.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),f_=(t,s,a,i,u,m,f,h,b)=>t.fold(s,a,i,u,m,f,h,b),dB=(t,s,a,i)=>t.fold(s,s,i,i,s,i,a,a),mB=(t,s,a,i)=>t.fold(s,i,s,i,a,a,s,i),ov=Xl.southeast,zS=Xl.southwest,US=Xl.northeast,ZS=Xl.northwest,g_=Xl.south,h_=Xl.north,p_=Xl.east,b_=Xl.west,fB=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},fr=(t,s)=>ua(["left","right","top","bottom"],a=>He(s,a).map(i=>fB(t,i))),v_=(t,s,a)=>{const i=(b,C)=>s[b].map(x=>{const k=b==="top"||b==="bottom",A=k?a.top:a.left,L=(b==="left"||b==="top"?Math.max:Math.min)(x,C)+A;return k?pi(L,t.y,t.bottom):pi(L,t.x,t.right)}).getOr(C),u=i("left",t.x),m=i("top",t.y),f=i("right",t.right),h=i("bottom",t.bottom);return Oo(u,m,f-u,h-m)},$u="layout",WS=t=>t.x,y_=(t,s)=>t.x+t.width/2-s.width/2,jS=(t,s)=>t.x+t.width-s.width,GS=(t,s)=>t.y-s.height,sv=t=>t.y+t.height,C_=(t,s)=>t.y+t.height/2-s.height/2,gB=t=>t.x+t.width,qS=(t,s)=>t.x-s.width,gs=(t,s,a)=>mr(WS(t),sv(t),a.southeast(),ov(),"southeast",fr(t,{left:1,top:3}),$u),hs=(t,s,a)=>mr(jS(t,s),sv(t),a.southwest(),zS(),"southwest",fr(t,{right:0,top:3}),$u),gr=(t,s,a)=>mr(WS(t),GS(t,s),a.northeast(),US(),"northeast",fr(t,{left:1,bottom:2}),$u),nr=(t,s,a)=>mr(jS(t,s),GS(t,s),a.northwest(),ZS(),"northwest",fr(t,{right:0,bottom:2}),$u),Zs=(t,s,a)=>mr(y_(t,s),GS(t,s),a.north(),h_(),"north",fr(t,{bottom:2}),$u),ps=(t,s,a)=>mr(y_(t,s),sv(t),a.south(),g_(),"south",fr(t,{top:3}),$u),Qp=(t,s,a)=>mr(gB(t),C_(t,s),a.east(),p_(),"east",fr(t,{left:0}),$u),KS=(t,s,a)=>mr(qS(t,s),C_(t,s),a.west(),b_(),"west",fr(t,{right:1}),$u),S_=()=>[gs,hs,gr,nr,ps,Zs,Qp,KS],x_=()=>[hs,gs,nr,gr,ps,Zs,Qp,KS],YS=()=>[gr,nr,gs,hs,Zs,ps],Je=()=>[nr,gr,hs,gs,Zs,ps],oh=()=>[gs,hs,gr,nr,ps,Zs],rv=()=>[hs,gs,nr,gr,ps,Zs],hB=(t,s)=>s.universal?t:Hn(t,a=>wn(s.channels,a));var pB=Object.freeze({__proto__:null,events:t=>In([be(Pd(),(s,a)=>{const i=t.channels,u=ao(i),m=a,f=hB(u,m);Ue(f,h=>{const b=i[h],C=b.schema,x=pa("channel["+h+`] data
Receiver: `+$d(s.element),C,m.data);b.onReceive(s,x)})})])}),w_=[Tn("channels",sl(jt.value,rc([rf("onReceive"),se("schema",mi())])))];const Ba=zs({fields:w_,name:"receiving",active:pB});var E_=Object.freeze({__proto__:null,exhibit:(t,s)=>cc({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const La=(t,s=!1)=>t.dom.focus({preventScroll:s}),or=t=>t.dom.blur(),Jl=t=>{const s=Xs(t).dom;return t.dom===s.activeElement},Hu=(t=_d())=>S.from(t.dom.activeElement).map(Be.fromDom),Wr=t=>Hu(Xs(t)).filter(s=>t.dom.contains(s.dom)),XS=(t,s)=>{const a=Xs(s),i=Hu(a).bind(m=>{const f=h=>Dn(m,h);return f(s)?S.some(s):u_(s,f)}),u=t(s);return i.each(m=>{Hu(a).filter(f=>Dn(f,m)).fold(()=>{La(m)},re)}),u},JS=Pa.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),k_=(t,s,a,i,u,m)=>{const f=s.rect,h=f.x-a,b=f.y-i,C=f.width,x=f.height,k=u-(h+C),A=m-(b+x),N=S.some(h),L=S.some(b),F=S.some(k),J=S.some(A),$=S.none();return f_(s.direction,()=>il(t,N,L,$,$),()=>il(t,$,L,F,$),()=>il(t,N,$,$,J),()=>il(t,$,$,F,J),()=>il(t,N,L,$,$),()=>il(t,N,$,$,J),()=>il(t,N,L,$,$),()=>il(t,$,L,F,$))},QS=(t,s)=>t.fold(()=>{const a=s.rect;return il("absolute",S.some(a.x),S.some(a.y),S.none(),S.none())},(a,i,u,m)=>k_("absolute",s,a,i,u,m),(a,i,u,m)=>k_("fixed",s,a,i,u,m)),av=(t,s)=>{const a=dn(el,s),i=t.fold(a,a,()=>{const f=Dr();return el(s).translate(-f.left,-f.top)}),u=Eu(s),m=Rl(s);return Oo(i.left,i.top,u,m)},bB=(t,s)=>s.fold(()=>t.fold(ws,ws,Oo),a=>t.fold(q(a),q(a),()=>{const i=ex(t,a.x,a.y);return Oo(i.left,i.top,a.width,a.height)})),ex=(t,s,a)=>{const i=eo(s,a),u=()=>{const m=Dr();return i.translate(-m.left,-m.top)};return t.fold(q(i),q(i),u)},vB=(t,s,a,i)=>t.fold(s,a,i);JS.none;const yB=JS.relative,CB=JS.fixed,SB=(t,s)=>({anchorBox:t,origin:s}),xB=(t,s)=>SB(t,s),tx="data-alloy-placement",nx=(t,s)=>{Ve(t,tx,s)},ox=t=>gn(t,tx),wB=t=>Vn(t,tx),e1=Pa.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),EB=(t,s)=>{const{x:a,y:i,right:u,bottom:m}=s,{x:f,y:h,right:b,bottom:C,width:x,height:k}=t,A=f>=a&&f<=u,N=h>=i&&h<=m,L=A&&N,F=b<=u&&b>=a,J=C<=m&&C>=i,$=F&&J,G=Math.min(x,f>=a?u-f:b-a),Y=Math.min(k,h>=i?m-h:C-i);return{originInBounds:L,sizeInBounds:$,visibleW:G,visibleH:Y}},kB=(t,s)=>{const{x:a,y:i,right:u,bottom:m}=s,{x:f,y:h,width:b,height:C}=t,x=Math.max(a,u-b),k=Math.max(i,m-C),A=pi(f,a,x),N=pi(h,i,k),L=Math.min(A+b,u)-A,F=Math.min(N+C,m)-N;return Oo(A,N,L,F)},TB=(t,s,a)=>{const i=q(s.bottom-a.y),u=q(a.bottom-s.y),m=dB(t,u,u,i),f=q(s.right-a.x),h=q(a.right-s.x);return{maxWidth:mB(t,h,h,f),maxHeight:m}},T_=(t,s,a,i)=>{const u=t.bubble,m=u.offset,f=v_(i,t.restriction,m),h=t.x+m.left,b=t.y+m.top,C=Oo(h,b,s,a),{originInBounds:x,sizeInBounds:k,visibleW:A,visibleH:N}=EB(C,f),L=x&&k,F=L?C:kB(C,f),J=F.width>0&&F.height>0,{maxWidth:$,maxHeight:G}=TB(t.direction,F,i),Y={rect:F,maxHeight:G,maxWidth:$,direction:t.direction,placement:t.placement,classes:{on:u.classesOn,off:u.classesOff},layout:t.label,testY:b};return L||t.alwaysFit?e1.fit(Y):e1.nofit(Y,A,N,J)},_B=(t,s,a,i,u,m)=>{const f=i.width,h=i.height,b=(x,k,A,N,L)=>{const F=x(a,i,u,t,m),J=T_(F,f,h,m);return J.fold(q(J),($,G,Y,ce)=>(L===ce?Y>N||G>A:!L&&ce)?J:e1.nofit(k,A,N,L))};return Zo(s,(x,k)=>{const A=dn(b,k);return x.fold(q(x),A)},e1.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:ov(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold($t,$t)},__=nt,jr=(t,s,a)=>Fr(t,s,__,a),sx=(t,s,a)=>wg(t,s,__,a),A_=Qi,rx=["top","bottom","right","left"],cv="data-alloy-transition-timer",sh=(t,s)=>Wj(t,s.classes),AB=(t,s,a)=>a.exists(i=>{const u=t.mode;return u==="all"?!0:i[u]!==s[u]}),ax=(t,s)=>{const a=i=>parseFloat(i).toFixed(3);return Wo(s,(i,u)=>{const m=t[u].map(a),f=i.map(a);return!kl(m,f)}).isSome()},OB=t=>{const s=m=>{const h=Ee(t,m).split(/\s*,\s*/);return Hn(h,Or)},a=m=>{if(on(m)&&/^[\d.]+/.test(m)){const f=parseFloat(m);return ec(m,"ms")?f:f*1e3}else return 0},i=s("transition-delay"),u=s("transition-duration");return Zo(u,(m,f,h)=>{const b=a(i[h])+a(f);return Math.max(m,b)},0)},t1=(t,s)=>{const a=Ad(),i=Ad();let u;const m=C=>{var x;const k=(x=C.raw.pseudoElement)!==null&&x!==void 0?x:"";return Dn(C.target,t)&&Gi(k)&&wn(rx,C.raw.propertyName)},f=C=>{if(ni(C)||m(C)){a.clear(),i.clear();const x=C==null?void 0:C.raw.type;(ni(x)||x===Hp())&&(clearTimeout(u),Vn(t,cv),cl(t,s.classes))}},h=jr(t,jm(),C=>{m(C)&&(h.unbind(),a.set(jr(t,Hp(),f)),i.set(jr(t,fP(),f)))}),b=OB(t);requestAnimationFrame(()=>{u=setTimeout(f,b+17),Ve(t,cv,u)})},DB=(t,s)=>{qg(t,s.classes),gn(t,cv).each(a=>{clearTimeout(parseInt(a,10)),Vn(t,cv)}),t1(t,s)},MB=(t,s,a,i,u,m)=>{const f=AB(i,u,m);if(f||sh(t,i)){Pt(t,"position",a.position);const h=av(s,t),b=QS(s,{...u,rect:h}),C=ua(rx,x=>b[x]);ax(a,C)&&(bg(t,C),f&&DB(t,i),Yi(t))}else cl(t,i.classes)},RB=t=>({width:Eu(t),height:Rl(t)}),NB=(t,s,a,i)=>{rn(s,"max-height"),rn(s,"max-width");const u=RB(s);return _B(s,i.preference,t,u,a,i.bounds)},PB=(t,s)=>{const a=s.classes;cl(t,a.off),qg(t,a.on)},cx=(t,s,a)=>{const i=a.maxHeightFunction;i(t,s.maxHeight)},BB=(t,s,a)=>{const i=a.maxWidthFunction;i(t,s.maxWidth)},LB=(t,s,a)=>{const i=QS(a.origin,s);a.transition.each(u=>{MB(t,a.origin,i,u,s,a.lastPlacement)}),Ur(t,i)},IB=(t,s)=>{nx(t,s.placement)},O_=(t,s)=>{qC(t,Math.floor(s))},D_=q((t,s)=>{O_(t,s),ii(t,{"overflow-x":"hidden","overflow-y":"auto"})}),rh=q((t,s)=>{O_(t,s)}),ix=(t,s,a)=>t[s]===void 0?a:t[s],FB=(t,s,a,i,u,m,f,h)=>{const b=ix(f,"maxHeightFunction",D_()),C=ix(f,"maxWidthFunction",re),x=t.anchorBox,k=t.origin,A={bounds:bB(k,m),origin:k,preference:i,maxHeightFunction:b,maxWidthFunction:C,lastPlacement:u,transition:h};return M_(x,s,a,A)},M_=(t,s,a,i)=>{const u=NB(t,s,a,i);return LB(s,u,i),IB(s,u),PB(s,u),cx(s,u,i),BB(s,u,i),{layout:u.layout,placement:u.placement}},iv=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Si=(t,s,a,i=1)=>{const u=t*i,m=s*i,f=b=>He(a,b).getOr([]),h=(b,C,x)=>{const k=vt(iv,x);return{offset:eo(b,C),classesOn:oe(x,f),classesOff:oe(k,f)}};return{southeast:()=>h(-t,s,["top","alignLeft"]),southwest:()=>h(t,s,["top","alignRight"]),south:()=>h(-t/2,s,["top","alignCentre"]),northeast:()=>h(-t,-s,["bottom","alignLeft"]),northwest:()=>h(t,-s,["bottom","alignRight"]),north:()=>h(-t/2,-s,["bottom","alignCentre"]),east:()=>h(t,-s/2,["valignCentre","left"]),west:()=>h(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>h(u,m,["top","alignLeft","inset"]),insetNorthwest:()=>h(-u,m,["top","alignRight","inset"]),insetNorth:()=>h(-u/2,m,["top","alignCentre","inset"]),insetSoutheast:()=>h(u,-m,["bottom","alignLeft","inset"]),insetSouthwest:()=>h(-u,-m,["bottom","alignRight","inset"]),insetSouth:()=>h(-u/2,-m,["bottom","alignCentre","inset"]),insetEast:()=>h(-u,-m/2,["valignCentre","right","inset"]),insetWest:()=>h(u,-m/2,["valignCentre","left","inset"])}},lv=()=>Si(0,0,{}),uv=$t,lx=(t,s)=>a=>R_(a)==="rtl"?s:t,R_=t=>Ee(t,"direction")==="rtl"?"rtl":"ltr";var Ql;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Ql||(Ql={}));const ux="data-alloy-vertical-dir",$B=t=>VS(t,s=>Go(s)&&Vt(s,"data-alloy-vertical-dir")===Ql.BottomToTop),Ud=()=>Hs("layouts",[ve("onLtr"),ve("onRtl"),En("onBottomLtr"),En("onBottomRtl")]),dv=(t,s,a,i,u,m,f)=>{const h=f.map($B).getOr(!1),b=s.layouts.map(N=>N.onLtr(t)),C=s.layouts.map(N=>N.onRtl(t)),x=h?s.layouts.bind(N=>N.onBottomLtr.map(L=>L(t))).or(b).getOr(u):b.getOr(a),k=h?s.layouts.bind(N=>N.onBottomRtl.map(L=>L(t))).or(C).getOr(m):C.getOr(i);return lx(x,k)(t)},HB=(t,s,a)=>{const i=s.hotspot,u=av(a,i.element),m=dv(t.element,s,oh(),rv(),YS(),Je(),S.some(s.hotspot.element));return S.some(uv({anchorBox:u,bubble:s.bubble.getOr(lv()),overrides:s.overrides,layouts:m}))};var VB=[ve("hotspot"),En("bubble"),se("overrides",{}),Ud(),io("placement",HB)];const zB=(t,s,a)=>{const i=ex(a,s.x,s.y),u=Oo(i.left,i.top,s.width,s.height),m=dv(t.element,s,S_(),x_(),S_(),x_(),S.none());return S.some(uv({anchorBox:u,bubble:s.bubble,overrides:s.overrides,layouts:m}))};var mv=[ve("x"),ve("y"),se("height",0),se("width",0),se("bubble",lv()),se("overrides",{}),Ud(),io("placement",zB)];const N_=Pa.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),UB=t=>t.fold($t,(s,a,i)=>s.translate(-a,-i)),ZB=t=>t.fold($t,$t),P_=t=>Zo(t,(s,a)=>s.translate(a.left,a.top),eo(0,0)),WB=t=>{const s=we(t,UB);return P_(s)},B_=t=>{const s=we(t,ZB);return P_(s)},jB=N_.screen,GB=N_.absolute,qB=(t,s,a)=>{const i=Ol(a.root).dom,u=m=>{const f=fa(m),h=fa(t.element);return Dn(f,h)};return S.from(i.frameElement).map(Be.fromDom).filter(u).map(Ma)},L_=(t,s,a)=>{const i=fa(t.element),u=Dr(i),m=qB(t,s,a).getOr(u);return GB(m,u.left,u.top)},dx=(t,s,a,i)=>{const u=jB(eo(t,s));return S.some(Rp(u,a,i))},I_=(t,s,a,i,u)=>t.map(m=>{const f=[s,m.point],h=vB(i,()=>B_(f),()=>B_(f),()=>WB(f)),b=tl(h.left,h.top,m.width,m.height),C=a.showAbove?YS():oh(),x=a.showAbove?Je():rv(),k=dv(u,a,C,x,C,x,S.none());return uv({anchorBox:b,bubble:a.bubble.getOr(lv()),overrides:a.overrides,layouts:k})}),F_=(t,s,a)=>{const i=L_(t,a,s);return s.node.filter(K).bind(u=>{const m=u.dom.getBoundingClientRect(),f=dx(m.left,m.top,m.width,m.height),h=s.node.getOr(t.element);return I_(f,i,s,a,h)})};var KB=[ve("node"),ve("root"),En("bubble"),Ud(),se("overrides",{}),se("showAbove",!1),io("placement",F_)];const YB="\uFEFF",XB=" ",n1={create:(t,s,a,i)=>({start:t,soffset:s,finish:a,foffset:i})},mx=Pa.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),JB=(t,s,a,i)=>t.fold(s,a,i),QB=t=>t.fold($t,$t,$t),eL=mx.before,tL=mx.on,$_=mx.after,nL={before:eL,on:tL,after:$_,cata:JB,getStart:QB},fv=Pa.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),oL=t=>fv.exact(t.start,t.soffset,t.finish,t.foffset),H_=t=>t.match({domRange:s=>Be.fromDom(s.startContainer),relative:(s,a)=>nL.getStart(s),exact:(s,a,i,u)=>s}),fx=fv.domRange,sL=fv.relative,rL=fv.exact,aL=t=>{const s=H_(t);return Ol(s)},gv=n1.create,o1={domRange:fx,relative:sL,exact:rL,exactFromRange:oL,getWin:aL,range:gv},V_=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,i)=>{t.setStart(a.dom,i)},a=>{t.setStartAfter(a.dom)})},z_=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,i)=>{t.setEnd(a.dom,i)},a=>{t.setEndAfter(a.dom)})},gx=(t,s,a)=>{const i=t.document.createRange();return V_(i,s),z_(i,a),i},hx=(t,s,a,i,u)=>{const m=t.document.createRange();return m.setStart(s.dom,a),m.setEnd(i.dom,u),m},px=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),cL=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?S.some(a).map(px):S.none()},iL=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?S.some(s).map(px):S.none()},s1=Pa.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),U_=(t,s,a)=>s(Be.fromDom(a.startContainer),a.startOffset,Be.fromDom(a.endContainer),a.endOffset),lL=(t,s)=>s.match({domRange:a=>({ltr:q(a),rtl:S.none}),relative:(a,i)=>({ltr:Pl(()=>gx(t,a,i)),rtl:Pl(()=>S.some(gx(t,i,a)))}),exact:(a,i,u,m)=>({ltr:Pl(()=>hx(t,a,i,u,m)),rtl:Pl(()=>S.some(hx(t,u,m,a,i)))})}),ff=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(u=>u.collapsed===!1).map(u=>s1.rtl(Be.fromDom(u.endContainer),u.endOffset,Be.fromDom(u.startContainer),u.startOffset)).getOrThunk(()=>U_(t,s1.ltr,a)):U_(t,s1.ltr,a)},uL=(t,s)=>{const a=lL(t,s);return ff(t,a)},Z_=(t,s)=>uL(t,s).match({ltr:(i,u,m,f)=>{const h=t.document.createRange();return h.setStart(i.dom,u),h.setEnd(m.dom,f),h},rtl:(i,u,m,f)=>{const h=t.document.createRange();return h.setStart(m.dom,f),h.setEnd(i.dom,u),h}});s1.ltr,s1.rtl;const W_=(t,s,a)=>Hn(Om(t,a),s),oa=(t,s)=>ci(s,t),j_=(t,s,a,i)=>{const m=fa(t).dom.createRange();return m.setStart(t.dom,s),m.setEnd(a.dom,i),m},dL=(t,s,a,i)=>{const u=j_(t,s,a,i),m=Dn(t,a)&&s===i;return u.collapsed&&!m},mL=t=>S.from(t.getSelection()),bx=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return S.some(n1.create(Be.fromDom(s.startContainer),s.startOffset,Be.fromDom(a.endContainer),a.endOffset))}else return S.none()},r1=t=>{if(t.anchorNode===null||t.focusNode===null)return bx(t);{const s=Be.fromDom(t.anchorNode),a=Be.fromDom(t.focusNode);return dL(s,t.anchorOffset,a,t.focusOffset)?S.some(n1.create(s,t.anchorOffset,a,t.focusOffset)):bx(t)}},a1=t=>mL(t).filter(s=>s.rangeCount>0).bind(r1),G_=(t,s)=>{const a=Z_(t,s);return cL(a)},vx=(t,s)=>{const a=Z_(t,s);return iL(a)},q_=((t,s)=>{const a=m=>{if(!t(m))throw new Error("Can only get "+s+" value of a "+s+" node");return i(m).getOr("")},i=m=>t(m)?S.from(m.dom.nodeValue):S.none();return{get:a,getOption:i,set:(m,f)=>{if(!t(m))throw new Error("Can only set raw "+s+" value of a "+s+" node");m.dom.nodeValue=f}}})(us,"text"),K_=t=>q_.get(t),c1=(t,s)=>({element:t,offset:s}),fL=(t,s)=>{const a=ds(t);if(a.length===0)return c1(t,s);if(s<a.length)return c1(a[s],0);{const i=a[a.length-1],u=us(i)?K_(i).length:ds(i).length;return c1(i,u)}},Y_=(t,s)=>us(t)?c1(t,s):fL(t,s),yx=t=>t.foffset!==void 0,gf=(t,s)=>s.getSelection.getOrThunk(()=>()=>a1(t))().map(i=>{if(yx(i)){const u=Y_(i.start,i.soffset),m=Y_(i.finish,i.foffset);return o1.range(u.element,u.offset,m.element,m.offset)}else return i}),hf=(t,s,a)=>{const i=Ol(s.root).dom,u=L_(t,a,s),m=gf(i,s).bind(b=>{if(yx(b))return vx(i,o1.exactFromRange(b)).orThunk(()=>{const x=Be.fromText(YB);Ou(b.start,x);const k=G_(i,o1.exact(x,0,x,1));return Nc(x),k}).bind(x=>dx(x.left,x.top,x.width,x.height));{const C=Zn(b,k=>k.dom.getBoundingClientRect()),x={left:Math.min(C.firstCell.left,C.lastCell.left),right:Math.max(C.firstCell.right,C.lastCell.right),top:Math.min(C.firstCell.top,C.lastCell.top),bottom:Math.max(C.firstCell.bottom,C.lastCell.bottom)};return dx(x.left,x.top,x.right-x.left,x.bottom-x.top)}}),h=gf(i,s).bind(b=>yx(b)?Go(b.start)?S.some(b.start):ga(b.start):S.some(b.firstCell)).getOr(t.element);return I_(m,u,s,a,h)};var hv=[En("getSelection"),ve("root"),En("bubble"),Ud(),se("overrides",{}),se("showAbove",!1),io("placement",hf)];const Zd="link-layout",X_=t=>t.x+t.width,Vu=(t,s)=>t.x-s.width,dl=(t,s)=>t.y-s.height+t.height,pv=t=>t.y,Cx=(t,s,a)=>mr(X_(t),pv(t),a.southeast(),ov(),"southeast",fr(t,{left:0,top:2}),Zd),J_=(t,s,a)=>mr(Vu(t,s),pv(t),a.southwest(),zS(),"southwest",fr(t,{right:1,top:2}),Zd),Sx=(t,s,a)=>mr(X_(t),dl(t,s),a.northeast(),US(),"northeast",fr(t,{left:0,bottom:3}),Zd),ah=(t,s,a)=>mr(Vu(t,s),dl(t,s),a.northwest(),ZS(),"northwest",fr(t,{right:1,bottom:3}),Zd),ch=()=>[Cx,J_,Sx,ah],bv=()=>[J_,Cx,ah,Sx],Q_=(t,s,a)=>{const i=av(a,s.item.element),u=dv(t.element,s,ch(),bv(),ch(),bv(),S.none());return S.some(uv({anchorBox:i,bubble:lv(),overrides:s.overrides,layouts:u}))};var i1=[ve("item"),Ud(),se("overrides",{}),io("placement",Q_)],vv=Ts("type",{selection:hv,node:KB,hotspot:VB,submenu:i1,makeshift:mv});const gL=[Na("classes",Ze),Vr("mode","all",["all","layout","placement"])],xx=[se("useFixed",Sn),En("getBounds")],yv=[Tn("anchor",vv),Hs("transition",gL)],sr=()=>{const t=document.documentElement;return CB(0,0,t.clientWidth,t.clientHeight)},hL=t=>{const s=Ma(t.element),a=t.element.dom.getBoundingClientRect();return yB(s.left,s.top,a.width,a.height)},eu=(t,s,a,i,u,m)=>{const f=xB(s.anchorBox,t);return FB(f,i.element,s.bubble,s.layouts,u,a,s.overrides,m)},eA=(t,s,a,i,u)=>{const m=S.none();Cv(t,s,a,i,u,m)},Cv=(t,s,a,i,u,m)=>{const f=pa("placement.info",Et(yv),u),h=f.anchor,b=i.element,C=a.get(i.uid);XS(()=>{Pt(b,"position","fixed");const x=Fo(b,"visibility");Pt(b,"visibility","hidden");const k=s.useFixed()?sr():hL(t);h.placement(t,h,k).each(A=>{const N=m.orThunk(()=>s.getBounds.map(Po)),L=eu(k,A,N,i,C,f.transition);a.set(i.uid,L)}),x.fold(()=>{rn(b,"visibility")},A=>{Pt(b,"visibility",A)}),Fo(b,"left").isNone()&&Fo(b,"top").isNone()&&Fo(b,"right").isNone()&&Fo(b,"bottom").isNone()&&Ps(Fo(b,"position"),"fixed")&&rn(b,"position")},b)};var Sv=Object.freeze({__proto__:null,position:eA,positionWithinBounds:Cv,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,i)=>{const u=i.element;Ue(["position","left","right","top","bottom"],m=>rn(u,m)),wB(u),a.clear(i.uid)}}),tA=Object.freeze({__proto__:null,init:()=>{let t={};return zr({readState:()=>t,clear:u=>{so(u)?delete t[u]:t={}},set:(u,m)=>{t[u]=m},get:u=>He(t,u)})}});const hr=zs({fields:xx,name:"positioning",active:E_,apis:Sv,state:tA}),wx=t=>t.getSystem().isConnected(),pf=t=>{Qt(t,Wl());const s=t.components();Ue(s,pf)},uc=t=>{const s=t.components();Ue(s,uc),Qt(t,Ic())},nA=(t,s)=>{t.getSystem().addToWorld(s),K(t.element)&&uc(s)},Ex=t=>{pf(t),t.getSystem().removeFromWorld(t)},kx=(t,s)=>{Ra(t.element,s.element)},oA=t=>{Ue(t.components(),s=>Nc(s.element)),Il(t.element),t.syncComponents()},sA=(t,s,a)=>{const i=t.components();oA(t);const u=a(s),m=vt(i,u);Ue(m,f=>{pf(f),t.getSystem().removeFromWorld(f)}),Ue(u,f=>{wx(f)?kx(t,f):(t.getSystem().addToWorld(f),kx(t,f),K(t.element)&&uc(f))}),t.syncComponents()},bL=(t,s,a)=>{const i=t.components(),u=oe(s,h=>Yb(h).toArray());Ue(i,h=>{wn(u,h)||Ex(h)});const m=a(s),f=vt(i,m);Ue(f,h=>{wx(h)&&Ex(h)}),Ue(m,h=>{wx(h)||nA(t,h)}),t.syncComponents()},bf=(t,s)=>{dc(t,s,Ra)},dc=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),K(t.element)&&uc(s),t.syncComponents()},vf=t=>{pf(t),Nc(t.element),t.getSystem().removeFromWorld(t)},tu=t=>{const s=lr(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());vf(t),s.each(a=>{a.syncComponents()})},yf=t=>{const s=t.components();Ue(s,vf),Il(t.element),t.syncComponents()},Gr=(t,s)=>{Mr(t,s,Ra)},qr=(t,s)=>{Mr(t,s,Ll)},Mr=(t,s,a)=>{a(t,s.element);const i=ds(s.element);Ue(i,u=>{s.getByDom(u).each(uc)})},xi=t=>{const s=ds(t.element);Ue(s,a=>{t.getByDom(a).each(pf)}),Nc(t.element)},xv=(t,s,a,i)=>{a.get().each(f=>{yf(t)});const u=s.getAttachPoint(t);bf(u,t);const m=t.getSystem().build(i);return bf(t,m),a.set(m),m},mc=(t,s,a,i)=>{const u=xv(t,s,a,i);return s.onOpen(t,u),u},Cf=(t,s,a,i)=>a.get().map(()=>xv(t,s,a,i)),vL=(t,s,a,i,u)=>{uA(t,s),mc(t,s,a,i),u(),dA(t,s)},rA=(t,s,a)=>{a.get().each(i=>{yf(t),tu(t),s.onClose(t,i),a.clear()})},aA=(t,s,a)=>a.isOpen(),cA=(t,s,a,i)=>aA(t,s,a)&&a.get().exists(u=>s.isPartOf(t,u,i)),iA=(t,s,a)=>a.get(),wv=(t,s,a,i)=>{Fo(t.element,s).fold(()=>{Vn(t.element,a)},u=>{Ve(t.element,a,u)}),Pt(t.element,s,i)},lA=(t,s,a)=>{gn(t.element,a).fold(()=>rn(t.element,s),i=>Pt(t.element,s,i))},uA=(t,s,a)=>{const i=s.getAttachPoint(t);Pt(t.element,"position",hr.getMode(i)),wv(t,"visibility",s.cloakVisibilityAttr,"hidden")},yL=t=>as(["top","left","right","bottom"],s=>Fo(t,s).isSome()),dA=(t,s,a)=>{yL(t.element)||rn(t.element,"position"),lA(t,"visibility",s.cloakVisibilityAttr)};var CL=Object.freeze({__proto__:null,cloak:uA,decloak:dA,open:mc,openWhileCloaked:vL,close:rA,isOpen:aA,isPartOf:cA,getState:iA,setContent:Cf}),mA=Object.freeze({__proto__:null,events:(t,s)=>In([be(Vs(),(a,i)=>{rA(a,t,s)})])}),Tx=[an("onOpen"),an("onClose"),ve("isPartOf"),ve("getAttachPoint"),se("cloakVisibilityAttr","data-precloak-visibility")],wL=Object.freeze({__proto__:null,init:()=>{const t=Nn(),s=q("not-implemented");return zr({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const hn=zs({fields:Tx,name:"sandboxing",active:mA,apis:CL,state:wL}),Wd=q("dismiss.popups"),ih=q("reposition.popups"),_x=q("mouse.released"),EL=rc([se("isExtraPart",Sn),Hs("fireEventInstead",[se("event",Bd())])]),Ia=t=>{const s=pa("Dismissal",EL,t);return{[Wd()]:{schema:rc([ve("target")]),onReceive:(a,i)=>{hn.isOpen(a)&&(hn.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>hn.close(a),m=>Qt(a,m.event)))}}}},aG=rc([Hs("fireEventInstead",[se("event",yT())]),gi("doReposition")]),lh=t=>{const s=pa("Reposition",aG,t);return{[ih()]:{onReceive:a=>{hn.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>Qt(a,i.event))}}}},zu=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},Ev=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var kL=Object.freeze({__proto__:null,onLoad:zu,onUnload:Ev,setValue:(t,s,a,i)=>{s.store.manager.setValue(t,s,a,i)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),gA=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[co((i,u)=>{zu(i,t,s)}),jl((i,u)=>{Ev(i,t,s)})]:[Km(t,s,zu)];return In(a)}});const Sf=()=>{const t=at(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,i=()=>{t.set(null)};return zr({set:t.set,get:t.get,isNotSet:a,clear:i,readState:s})},u1=()=>zr({readState:re}),hA=()=>{const t=at({}),s=at({});return zr({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:f=>He(t.get(),f).orThunk(()=>He(s.get(),f)),update:f=>{const h=t.get(),b=s.get(),C={},x={};Ue(f,k=>{C[k.value]=k,He(k,"meta").each(A=>{He(A,"text").each(N=>{x[N]=k})})}),t.set({...h,...C}),s.set({...b,...x})},clear:()=>{t.set({}),s.set({})}})};var pA=Object.freeze({__proto__:null,memory:Sf,dataset:hA,manual:u1,init:t=>t.store.manager.state(t)});const kv=(t,s,a,i)=>{const u=s.store;a.update([i]),u.setValue(t,i),s.onSetValue(t,i)},Ax=(t,s,a)=>{const i=s.store,u=i.getDataKey(t);return a.lookup(u).getOrThunk(()=>i.getFallbackEntry(u))},Ox=(t,s,a)=>{s.store.initialValue.each(u=>{kv(t,s,a,u)})},Tv=(t,s,a)=>{a.clear()};var Dx=[En("initialValue"),ve("getFallbackEntry"),ve("getDataKey"),ve("setValue"),io("manager",{setValue:kv,getValue:Ax,onLoad:Ox,onUnload:Tv,state:hA})];const bA=(t,s,a)=>s.store.getValue(t),d1=(t,s,a,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},Mx=(t,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var TL=[ve("getValue"),se("setValue",re),En("initialValue"),io("manager",{setValue:d1,getValue:bA,onLoad:Mx,onUnload:re,state:al.init})];const vA=(t,s,a,i)=>{a.set(i),s.onSetValue(t,i)},_L=(t,s,a)=>a.get(),yA=(t,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},Rx=(t,s,a)=>{a.clear()};var uh=[En("initialValue"),io("manager",{setValue:vA,getValue:_L,onLoad:yA,onUnload:Rx,state:Sf})],Nx=[mo("store",{mode:"memory"},Ts("mode",{memory:uh,manual:TL,dataset:Dx})),an("onSetValue"),se("resetOnDom",!1)];const We=zs({fields:Nx,name:"representing",active:gA,apis:kL,extra:{setValueFrom:(t,s)=>{const a=We.getValue(s);We.setValue(t,a)}},state:pA}),Ws=(t,s)=>hS(t,{},we(s,a=>dS(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([An("dump",$t)])),m1=t=>t.dump,Ho=(t,s)=>({..._e(s),...t.dump}),fc={field:Ws,augment:Ho,get:m1},_v="placeholder",xf=Pa.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Av=t=>sn(t,"uiType"),Ov=(t,s,a,i)=>t.exists(u=>u!==a.owner)?xf.single(!0,q(a)):He(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+ao(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},u=>u.replace()),Px=(t,s,a,i)=>Av(a)&&a.uiType===_v?Ov(t,s,a,i):xf.single(!1,q(a)),CA=(t,s,a,i)=>Px(t,s,a,i).fold((m,f)=>{const h=Av(a)?f(s,a.config,a.validated):f(s),b=He(h,"components").getOr([]),C=oe(b,x=>CA(t,s,x,i));return[{...h,components:C}]},(m,f)=>{if(Av(a)){const h=f(s,a.config,a.validated);return a.validated.preprocess.getOr($t)(h)}else return f(s)}),AL=(t,s,a,i)=>oe(a,u=>CA(t,s,u,i)),nu=(t,s)=>{let a=!1;const i=()=>a,u=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},m=()=>s.fold((f,h)=>f,(f,h)=>f);return{name:q(t),required:m,used:i,replace:u}},OL=(t,s,a,i)=>{const u=Zn(i,(f,h)=>nu(h,f)),m=AL(t,s,a,u);return Ao(u,f=>{if(f.used()===!1&&f.required())throw new Error("Placeholder: "+f.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),m},SA=xf.single,$c=xf.multiple,_s=q(_v),Dv=Pa.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),dh=se("factory",{sketch:$t}),Bx=se("schema",[]),f1=ve("name"),g1=Fs("pname","pname",Og(t=>"<alloy."+Xe(t.name)+">"),mi()),mh=An("schema",()=>[En("preprocess")]),h1=se("defaults",q({})),p1=se("overrides",q({})),DL=Et([dh,Bx,f1,g1,h1,p1]),ML=Et([dh,Bx,f1,h1,p1]),xA=Et([dh,Bx,f1,g1,h1,p1]),wA=Et([dh,mh,f1,ve("unit"),g1,h1,p1]),EA=t=>t.fold(S.some,S.none,S.some,S.some),kA=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},TA=t=>t.fold($t,$t,$t,$t),b1=(t,s)=>a=>{const i=pa("Converting part type",s,a);return t(i)},pr=b1(Dv.required,DL),Hc=b1(Dv.external,ML),va=b1(Dv.optional,xA),v1=b1(Dv.group,wA),Uu=q("entirety");var y1=Object.freeze({__proto__:null,required:pr,external:Hc,optional:va,group:v1,asNamedPart:EA,name:kA,asCommon:TA,original:Uu});const Lx=(t,s,a,i)=>Co(s.defaults(t,a,i),a,{uid:t.partUids[s.name]},s.overrides(t,a,i)),RL=(t,s,a)=>{const i={},u={};return Ue(a,m=>{m.fold(f=>{i[f.pname]=SA(!0,(h,b,C)=>f.factory.sketch(Lx(h,f,b,C)))},f=>{const h=s.parts[f.name];u[f.name]=q(f.factory.sketch(Lx(s,f,h[Uu()]),h))},f=>{i[f.pname]=SA(!1,(h,b,C)=>f.factory.sketch(Lx(h,f,b,C)))},f=>{i[f.pname]=$c(!0,(h,b,C)=>{const x=h[f.name];return we(x,k=>f.factory.sketch(Co(f.defaults(h,k,C),k,f.overrides(h,k))))})})}),{internals:q(i),externals:q(u)}},Ix=(t,s)=>{const a={};return Ue(s,i=>{EA(i).each(u=>{const m=NL(t,u.pname);a[u.name]=f=>{const h=pa("Part: "+u.name+" in "+t,Et(u.schema),f);return{...m,config:f,validated:h}}})}),a},NL=(t,s)=>({uiType:_s(),owner:t,name:s}),Mv=(t,s,a)=>({uiType:_s(),owner:t,name:s,config:a,validated:{}}),_A=t=>oe(t,s=>s.fold(S.none,S.some,S.none,S.none).map(a=>Md(a.name,a.schema.concat([af(Uu())]))).toArray()),Fx=t=>we(t,kA),$x=(t,s,a)=>RL(t,s,a),Hx=(t,s,a)=>OL(S.some(t),s,s.components,a),zn=(t,s,a)=>{const i=s.partUids[a];return t.getSystem().getByUid(i).toOptional()},wi=(t,s,a)=>zn(t,s,a).getOrDie("Could not find part: "+a),Vx=(t,s,a)=>{const i={},u=s.partUids,m=t.getSystem();return Ue(a,f=>{i[f]=q(m.getByUid(u[f]))}),i},zx=(t,s)=>{const a=t.getSystem();return Zn(s.partUids,(i,u)=>q(a.getByUid(i)))},Ux=t=>ao(t.partUids),Rv=(t,s,a)=>{const i={},u=s.partUids,m=t.getSystem();return Ue(a,f=>{i[f]=q(m.getByUid(u[f]).getOrDie())}),i},Nv=(t,s)=>{const a=Fx(s);return Lg(we(a,i=>({key:i,value:t+"-"+i})))},Zx=t=>Fs("partUids","partUids",v(s=>Nv(s.uid,t)),mi());var dG=Object.freeze({__proto__:null,generate:Ix,generateOne:Mv,schemas:_A,names:Fx,substitutes:$x,components:Hx,defaultUids:Nv,defaultUidsSchema:Zx,getAllParts:zx,getAllPartNames:Ux,getPart:zn,getPartOrDie:wi,getParts:Vx,getPartsOrDie:Rv});const AA=(t,s)=>(t.length>0?[Md("parts",t)]:[]).concat([ve("uid"),se("dom",{}),se("components",[]),af("originalSpec"),se("debug.sketcher",{})]).concat(s),Pv=(t,s,a,i,u)=>{const m=AA(i,u);return pa(t+" [SpecSchema]",rc(m.concat(s)),a)},PL=(t,s,a,i)=>{const u=OA(i),m=Pv(t,s,u,[],[]);return a(m,u)},Wx=(t,s,a,i,u)=>{const m=OA(u),f=_A(a),h=Zx(a),b=Pv(t,s,m,f,[h]),C=$x(t,b,a),x=Hx(t,b,C.internals());return i(b,x,m,C.externals())},BL=t=>sn(t,"uid"),OA=t=>BL(t)?t:{...t,uid:nh("uid")},LL=t=>t.uid!==void 0,Zu=rc([ve("name"),ve("factory"),ve("configFields"),se("apis",{}),se("extraApis",{})]),Bv=rc([ve("name"),ve("factory"),ve("configFields"),ve("partFields"),se("apis",{}),se("extraApis",{})]),gc=t=>{const s=pa("Sketcher for "+t.name,Zu,t),a=m=>PL(s.name,s.configFields,s.factory,m),i=Zn(s.apis,Xb),u=Zn(s.extraApis,(m,f)=>wS(m,f));return{name:s.name,configFields:s.configFields,sketch:a,...i,...u}},Kr=t=>{const s=pa("Sketcher for "+t.name,Bv,t),a=f=>Wx(s.name,s.configFields,s.partFields,s.factory,f),i=Ix(s.name,s.partFields),u=Zn(s.apis,Xb),m=Zn(s.extraApis,(f,h)=>wS(f,h));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...u,...m}},fh=t=>Qr("input")(t)&&Vt(t,"type")!=="radio"||Qr("textarea")(t);var IL=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const FL=[ve("find")],ln=zs({fields:FL,name:"composing",apis:IL}),gh=["input","button","textarea","select"],jx=(t,s,a)=>{(s.disabled()?qx:Kx)(t,s)},Gx=(t,s)=>s.useNative===!0&&wn(gh,Qn(t.element)),DA=t=>Io(t.element,"disabled"),MA=t=>{Ve(t.element,"disabled","disabled")},$L=t=>{Vn(t.element,"disabled")},HL=t=>Vt(t.element,"aria-disabled")==="true",VL=t=>{Ve(t.element,"aria-disabled","true")},zL=t=>{Ve(t.element,"aria-disabled","false")},qx=(t,s,a)=>{s.disableClass.each(u=>{Xo(t.element,u)}),(Gx(t,s)?MA:VL)(t),s.onDisabled(t)},Kx=(t,s,a)=>{s.disableClass.each(u=>{bo(t.element,u)}),(Gx(t,s)?$L:zL)(t),s.onEnabled(t)},C1=(t,s)=>Gx(t,s)?DA(t):HL(t);var UL=Object.freeze({__proto__:null,enable:Kx,disable:qx,isDisabled:C1,onLoad:jx,set:(t,s,a,i)=>{(i?qx:Kx)(t,s)}}),WL=Object.freeze({__proto__:null,exhibit:(t,s)=>cc({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>In([ET(ba(),(a,i)=>C1(a,t)),Km(t,s,jx)])}),jL=[Ln("disabled",Sn),se("useNative",!0),En("disableClass"),an("onDisabled"),an("onEnabled")];const rt=zs({fields:jL,name:"disabling",active:WL,apis:UL}),NA=(t,s,a,i)=>{const u=oa(t.element,"."+s.highlightClass);Ue(u,m=>{as(i,h=>Dn(h.element,m))||(bo(m,s.highlightClass),t.getSystem().getByDom(m).each(h=>{s.onDehighlight(t,h),Qt(h,Ug())}))})},GL=(t,s,a)=>NA(t,s,a,[]),qL=(t,s,a,i)=>{x1(t,s,a,i)&&(bo(i.element,s.highlightClass),s.onDehighlight(t,i),Qt(i,Ug()))},S1=(t,s,a,i)=>{NA(t,s,a,[i]),x1(t,s,a,i)||(Xo(i.element,s.highlightClass),s.onHighlight(t,i),Qt(i,SS()))},KL=(t,s,a)=>{PA(t,s).each(i=>{S1(t,s,a,i)})},hh=(t,s,a)=>{BA(t,s).each(i=>{S1(t,s,a,i)})},Yx=(t,s,a,i)=>{Xx(t,s,a,i).fold(u=>{throw u},u=>{S1(t,s,a,u)})},YL=(t,s,a,i)=>{const u=IA(t,s);kt(u,i).each(f=>{S1(t,s,a,f)})},x1=(t,s,a,i)=>na(i.element,s.highlightClass),Lv=(t,s,a)=>fo(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),Xx=(t,s,a,i)=>{const u=oa(t.element,"."+s.itemClass);return S.from(u[i]).fold(()=>jt.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},PA=(t,s,a)=>fo(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),BA=(t,s,a)=>{const i=oa(t.element,"."+s.itemClass);return(i.length>0?S.some(i[i.length-1]):S.none()).bind(m=>t.getSystem().getByDom(m).toOptional())},LA=(t,s,a,i)=>{const u=oa(t.element,"."+s.itemClass);return kn(u,f=>na(f,s.highlightClass)).bind(f=>{const h=cf(f,i,0,u.length-1);return t.getSystem().getByDom(u[h]).toOptional()})},XL=(t,s,a)=>LA(t,s,a,-1),JL=(t,s,a)=>LA(t,s,a,1),IA=(t,s,a)=>{const i=oa(t.element,"."+s.itemClass);return Oa(we(i,u=>t.getSystem().getByDom(u).toOptional()))};var QL=Object.freeze({__proto__:null,dehighlightAll:GL,dehighlight:qL,highlight:S1,highlightFirst:KL,highlightLast:hh,highlightAt:Yx,highlightBy:YL,isHighlighted:x1,getHighlighted:Lv,getFirst:PA,getLast:BA,getPrevious:XL,getNext:JL,getCandidates:IA}),FA=[ve("highlightClass"),ve("itemClass"),an("onHighlight"),an("onDehighlight")];const bn=zs({fields:FA,name:"highlighting",apis:QL}),eI=[8],Wu=[9],ou=[13],Iv=[27],br=[32],ph=[37],w1=[38],bh=[39],vh=[40],Qe=(t,s,a)=>{const i=Rs(t.slice(0,s)),u=Rs(t.slice(s+1));return kt(i.concat(u),a)},wf=(t,s,a)=>{const i=Rs(t.slice(0,s));return kt(i,a)},tI=(t,s,a)=>{const i=t.slice(0,s),u=t.slice(s+1);return kt(u.concat(i),a)},$A=(t,s,a)=>{const i=t.slice(s+1);return kt(i,a)},nn=t=>s=>{const a=s.raw;return wn(t,a.which)},Vc=t=>s=>Br(t,a=>a(s)),Ef=t=>t.raw.shiftKey===!0,HA=t=>t.raw.ctrlKey===!0,E1=Ae(Ef),vn=(t,s)=>({matches:t,classification:s}),VA=(t,s)=>kt(t,i=>i.matches(s)).map(i=>i.classification),Fv=(t,s,a)=>{s.exists(u=>a.exists(m=>Dn(m,u)))||st(t,Mb(),{prevFocus:s,newFocus:a})},kf=()=>{const t=a=>Wr(a.element);return{get:t,set:(a,i)=>{const u=t(a);a.getSystem().triggerFocus(i,a.element);const m=t(a);Fv(a,u,m)}}},zA=()=>{const t=a=>bn.getHighlighted(a).map(i=>i.element);return{get:t,set:(a,i)=>{const u=t(a);a.getSystem().getByDom(i).fold(re,f=>{bn.highlight(a,f)});const m=t(a);Fv(a,u,m)}}};var Tf;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Tf||(Tf={}));const _f=(t,s,a,i,u)=>{const m=()=>t.concat([se("focusManager",kf()),mo("focusInside","onFocus",Ip(C=>wn(["onFocus","onEnterOrSpace","onApi"],C)?jt.value(C):jt.error("Invalid value for focusInside"))),io("handler",b),io("state",s),io("sendFocusIn",u)]),f=(C,x,k,A,N)=>{const L=k(C,x,A,N);return VA(L,x.event).bind(F=>F(C,x,A,N))},b={schema:m,processKey:f,toEvents:(C,x)=>{const k=C.focusInside!==Tf.OnFocusMode?S.none():u(C).map(L=>be(Zl(),(F,J)=>{L(F,C,x),J.stop()})),A=(L,F)=>{const J=nn(br.concat(ou))(F.event);C.focusInside===Tf.OnEnterOrSpaceMode&&J&&wb(L,F)&&u(C).each($=>{$(L,C,x),F.stop()})},N=[be(Lc(),(L,F)=>{f(L,F,a,C,x).fold(()=>{A(L,F)},J=>{F.stop()})}),be(mP(),(L,F)=>{f(L,F,i,C,x).each(J=>{F.stop()})})];return In(k.toArray().concat(N))}};return b},UA=t=>{const s=[En("onEscape"),En("onEnter"),se("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),se("firstTabstop",0),se("useTabstopAt",nt),En("visibilitySelector")].concat([t]),a=($,G)=>{const Y=$.visibilitySelector.bind(ce=>Yl(G,ce)).getOr(G);return es(Y)>0},i=($,G)=>{const Y=oa($.element,G.selector),ce=Hn(Y,le=>a(G,le));return S.from(ce[G.firstTabstop])},u=($,G)=>G.focusManager.get($).bind(Y=>Yl(Y,G.selector)),m=($,G)=>a($,G)&&$.useTabstopAt(G),f=($,G,Y)=>{i($,G).each(ce=>{G.focusManager.set($,ce)})},h=($,G,Y,ce,le)=>le(G,Y,Me=>m(ce,Me)).fold(()=>ce.cyclic?S.some(!0):S.none(),Me=>(ce.focusManager.set($,Me),S.some(!0))),b=($,G,Y,ce)=>{const le=oa($.element,Y.selector);return u($,Y).bind(Me=>kn(le,dn(Dn,Me)).bind(pe=>h($,le,pe,Y,ce)))},C=($,G,Y)=>{const ce=Y.cyclic?Qe:wf;return b($,G,Y,ce)},x=($,G,Y)=>{const ce=Y.cyclic?tI:$A;return b($,G,Y,ce)},k=$=>pg($).bind(Dl).exists(G=>Dn(G,$)),A=($,G,Y)=>u($,Y).filter(ce=>!Y.useTabstopAt(ce)).bind(ce=>(k(ce)?C:x)($,G,Y)),N=($,G,Y)=>Y.onEnter.bind(ce=>ce($,G)),L=($,G,Y)=>Y.onEscape.bind(ce=>ce($,G)),F=q([vn(Vc([Ef,nn(Wu)]),C),vn(nn(Wu),x),vn(Vc([E1,nn(ou)]),N)]),J=q([vn(nn(Iv),L),vn(nn(Wu),A)]);return _f(s,al.init,F,J,()=>S.some(f))};var nI=UA(An("cyclic",Sn)),oI=UA(An("cyclic",nt));const sI=(t,s,a)=>(Rb(t,a,ba()),S.some(!0)),k1=(t,s,a)=>fh(a)&&nn(br)(s.event)?S.none():sI(t,s,a),ju=(t,s)=>S.some(!0),rI=[se("execute",k1),se("useSpace",!1),se("useEnter",!0),se("useControlEnter",!1),se("useDown",!1)],Jx=(t,s,a)=>a.execute(t,s,t.element),aI=(t,s,a,i)=>{const u=a.useSpace&&!fh(t.element)?br:[],m=a.useEnter?ou:[],f=a.useDown?vh:[],h=u.concat(m).concat(f);return[vn(nn(h),Jx)].concat(a.useControlEnter?[vn(Vc([HA,nn(ou)]),Jx)]:[])},Qx=(t,s,a,i)=>a.useSpace&&!fh(t.element)?[vn(nn(br),ju)]:[];var cI=_f(rI,al.init,aI,Qx,()=>S.none());const ZA=()=>{const t=Nn();return zr({readState:()=>t.get().map(u=>({numRows:String(u.numRows),numColumns:String(u.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(u,m)=>{t.set({numRows:u,numColumns:m})},getNumRows:()=>t.get().map(u=>u.numRows),getNumColumns:()=>t.get().map(u=>u.numColumns)})};var ew=Object.freeze({__proto__:null,flatgrid:ZA,init:t=>t.state(t)});const WA=t=>(s,a,i,u)=>{const m=t(s.element);return ow(m,s,a,i,u)},$v=(t,s)=>{const a=lx(t,s);return WA(a)},tw=(t,s)=>{const a=lx(s,t);return WA(a)},nw=t=>(s,a,i,u)=>ow(t,s,a,i,u),ow=(t,s,a,i,u)=>i.focusManager.get(s).bind(f=>t(s.element,f,i,u)).map(f=>(i.focusManager.set(s,f),!0)),jA=nw,GA=nw,yh=nw,qA=t=>t.offsetWidth<=0&&t.offsetHeight<=0,T1=t=>!qA(t.dom),Hv=(t,s)=>kn(t,s).map(a=>({index:a,candidates:t})),_1=(t,s,a)=>{const i=f=>Dn(f,s),u=oa(t,a),m=Hn(u,T1);return Hv(m,i)},jd=(t,s)=>kn(t,a=>Dn(s,a)),lI=(t,s,a,i)=>{const u=Math.floor(s/a),m=s%a;return i(u,m).bind(f=>{const h=f.row*a+f.column;return h>=0&&h<t.length?S.some(t[h]):S.none()})},KA=(t,s,a,i,u)=>lI(t,s,i,(m,f)=>{const b=m===a-1?t.length-m*i:i,C=cf(f,u,0,b-1);return S.some({row:m,column:C})}),YA=(t,s,a,i,u)=>lI(t,s,i,(m,f)=>{const h=cf(m,u,0,a-1),C=h===a-1?t.length-h*i:i,x=pi(f,0,C-1);return S.some({row:h,column:x})}),XA=(t,s,a,i)=>KA(t,s,a,i,1),uI=(t,s,a,i)=>KA(t,s,a,i,-1),fG=(t,s,a,i)=>YA(t,s,a,i,-1),gG=(t,s,a,i)=>YA(t,s,a,i,1),dI=[ve("selector"),se("execute",k1),Zr("onEscape"),se("captureTab",!1),Hd()],mI=(t,s,a)=>{fo(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},sw=(t,s)=>s.focusManager.get(t).bind(a=>Yl(a,s.selector)),fI=(t,s,a,i)=>sw(t,a).bind(u=>a.execute(t,s,u)),Vv=t=>(s,a,i,u)=>_1(s,a,i.selector).bind(m=>t(m.candidates,m.index,u.getNumRows().getOr(i.initSize.numRows),u.getNumColumns().getOr(i.initSize.numColumns))),JA=(t,s,a)=>a.captureTab?S.some(!0):S.none(),QA=(t,s,a)=>a.onEscape(t,s),e5=Vv(uI),t5=Vv(XA),n5=Vv(fG),o5=Vv(gG),gI=q([vn(nn(ph),$v(e5,t5)),vn(nn(bh),tw(e5,t5)),vn(nn(w1),jA(n5)),vn(nn(vh),GA(o5)),vn(Vc([Ef,nn(Wu)]),JA),vn(Vc([E1,nn(Wu)]),JA),vn(nn(br.concat(ou)),fI)]),s5=q([vn(nn(Iv),QA),vn(nn(br),ju)]);var hI=_f(dI,ZA,gI,s5,()=>S.some(mI));const zv=(t,s,a,i,u)=>{const m=h=>Qn(h)==="button"&&Vt(h,"disabled")==="disabled",f=(h,b,C)=>u(h,b,i,0,C.length-1,C[b],x=>m(C[x])?f(h,x,C):S.from(C[x]));return _1(t,a,s).bind(h=>{const b=h.index,C=h.candidates;return f(b,b,C)})},rw=(t,s,a,i)=>zv(t,s,a,i,(u,m,f,h,b,C,x)=>{const k=pi(m+f,h,b);return k===u?S.from(C):x(k)}),A1=(t,s,a,i)=>zv(t,s,a,i,(u,m,f,h,b,C,x)=>{const k=cf(m,f,h,b);return k===u?S.none():x(k)}),r5=[ve("selector"),se("getInitial",S.none),se("execute",k1),Zr("onEscape"),se("executeOnMove",!1),se("allowVertical",!0),se("allowHorizontal",!0),se("cycles",!0)],pI=(t,s)=>s.focusManager.get(t).bind(a=>Yl(a,s.selector)),aw=(t,s,a)=>pI(t,a).bind(i=>a.execute(t,s,i)),bI=(t,s,a)=>{s.getInitial(t).orThunk(()=>fo(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},a5=(t,s,a)=>(a.cycles?A1:rw)(t,a.selector,s,-1),c5=(t,s,a)=>(a.cycles?A1:rw)(t,a.selector,s,1),Ch=t=>(s,a,i,u)=>t(s,a,i,u).bind(()=>i.executeOnMove?aw(s,a,i):S.some(!0)),i5=(t,s,a)=>a.onEscape(t,s),l5=(t,s,a,i)=>{const u=[...a.allowHorizontal?ph:[]].concat(a.allowVertical?w1:[]),m=[...a.allowHorizontal?bh:[]].concat(a.allowVertical?vh:[]);return[vn(nn(u),Ch($v(a5,c5))),vn(nn(m),Ch(tw(a5,c5))),vn(nn(ou),aw),vn(nn(br),aw)]},u5=q([vn(nn(br),ju),vn(nn(Iv),i5)]);var d5=_f(r5,al.init,l5,u5,()=>S.some(bI));const O1=(t,s,a)=>S.from(t[s]).bind(i=>S.from(i[a]).map(u=>({rowIndex:s,columnIndex:a,cell:u}))),m5=(t,s,a,i)=>{const m=t[s].length,f=cf(a,i,0,m-1);return O1(t,s,f)},f5=(t,s,a,i)=>{const u=cf(a,i,0,t.length-1),m=t[u].length,f=pi(s,0,m-1);return O1(t,u,f)},g5=(t,s,a,i)=>{const m=t[s].length,f=pi(a+i,0,m-1);return O1(t,s,f)},Uv=(t,s,a,i)=>{const u=pi(a+i,0,t.length-1),m=t[u].length,f=pi(s,0,m-1);return O1(t,u,f)},vI=(t,s,a)=>m5(t,s,a,1),Zv=(t,s,a)=>m5(t,s,a,-1),yI=(t,s,a)=>f5(t,a,s,-1),h5=(t,s,a)=>f5(t,a,s,1),sa=(t,s,a)=>g5(t,s,a,-1),CI=(t,s,a)=>g5(t,s,a,1),p5=(t,s,a)=>Uv(t,a,s,-1),b5=(t,s,a)=>Uv(t,a,s,1),SI=[Md("selectors",[ve("row"),ve("cell")]),se("cycles",!0),se("previousSelector",S.none),se("execute",k1)],v5=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const u=s.selectors;return fo(t.element,u.cell)}).each(u=>{s.focusManager.set(t,u)})},y5=(t,s,a)=>Wr(t.element).bind(i=>a.execute(t,s,i)),xI=(t,s)=>we(t,a=>oa(a,s.selectors.cell)),Wv=(t,s)=>(a,i,u)=>{const m=u.cycles?t:s;return Yl(i,u.selectors.row).bind(f=>{const h=oa(f,u.selectors.cell);return jd(h,i).bind(b=>{const C=oa(a,u.selectors.row);return jd(C,f).bind(x=>{const k=xI(C,u);return m(k,x,b).map(A=>A.cell)})})})},C5=Wv(Zv,sa),S5=Wv(vI,CI),x5=Wv(yI,p5),wI=Wv(h5,b5),EI=q([vn(nn(ph),$v(C5,S5)),vn(nn(bh),tw(C5,S5)),vn(nn(w1),jA(x5)),vn(nn(vh),GA(wI)),vn(nn(br.concat(ou)),y5)]),w5=q([vn(nn(br),ju)]);var E5=_f(SI,al.init,EI,w5,()=>S.some(v5));const k5=[ve("selector"),se("execute",k1),se("moveOnTab",!1)],T5=(t,s,a)=>a.focusManager.get(t).bind(i=>a.execute(t,s,i)),kI=(t,s,a)=>{fo(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},_5=(t,s,a)=>A1(t,a.selector,s,-1),A5=(t,s,a)=>A1(t,a.selector,s,1),O5=(t,s,a,i)=>a.moveOnTab?yh(_5)(t,s,a,i):S.none(),D5=(t,s,a,i)=>a.moveOnTab?yh(A5)(t,s,a,i):S.none(),Gd=q([vn(nn(w1),yh(_5)),vn(nn(vh),yh(A5)),vn(Vc([Ef,nn(Wu)]),O5),vn(Vc([E1,nn(Wu)]),D5),vn(nn(ou),T5),vn(nn(br),T5)]),M5=q([vn(nn(br),ju)]);var R5=_f(k5,al.init,Gd,M5,()=>S.some(kI));const N5=[Zr("onSpace"),Zr("onEnter"),Zr("onShiftEnter"),Zr("onLeft"),Zr("onRight"),Zr("onTab"),Zr("onShiftTab"),Zr("onUp"),Zr("onDown"),Zr("onEscape"),se("stopSpaceKeyup",!1),En("focusIn")],TI=(t,s,a)=>[vn(nn(br),a.onSpace),vn(Vc([E1,nn(ou)]),a.onEnter),vn(Vc([Ef,nn(ou)]),a.onShiftEnter),vn(Vc([Ef,nn(Wu)]),a.onShiftTab),vn(Vc([E1,nn(Wu)]),a.onTab),vn(nn(w1),a.onUp),vn(nn(vh),a.onDown),vn(nn(ph),a.onLeft),vn(nn(bh),a.onRight),vn(nn(br),a.onSpace)],Sh=(t,s,a)=>[...a.stopSpaceKeyup?[vn(nn(br),ju)]:[],vn(nn(Iv),a.onEscape)];var _I=_f(N5,al.init,TI,Sh,t=>t.focusIn);const AI=nI.schema(),P5=oI.schema(),OI=d5.schema(),DI=hI.schema(),MI=E5.schema(),B5=cI.schema(),cw=R5.schema(),iw=_I.schema();var RI=Object.freeze({__proto__:null,acyclic:AI,cyclic:P5,flow:OI,flatgrid:DI,matrix:MI,execution:B5,menu:cw,special:iw});const qd=t=>_r(t,"setGridSize"),it=kS({branchKey:"mode",branches:RI,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,a)})},setGridSize:(t,s,a,i,u)=>{qd(a)?a.setGridSize(i,u):console.error("Layout does not support setGridSize")}},state:ew}),lw=(t,s)=>{XS(()=>{sA(t,s,()=>we(s,t.getSystem().build))},t.element)},L5=(t,s)=>{XS(()=>{bL(t,s,()=>e_(t.element,s,t.getSystem().buildOrPatch))},t.element)},NI=(t,s,a,i)=>{Ex(s);const u=LS(t.element,a,i,t.getSystem().buildOrPatch);nA(t,u),t.syncComponents()},Af=(t,s,a)=>{const i=t.getSystem().build(a);dc(t,i,s)},D1=(t,s,a,i)=>{tu(s),Af(t,(u,m)=>Eg(u,m,a),i)},I5=(t,s,a,i)=>(s.reuseDom?L5:lw)(t,i),uw=(t,s,a,i)=>{Af(t,Ra,i)},Kd=(t,s,a,i)=>{Af(t,Lm,i)},Yd=(t,s,a,i)=>{const u=jv(t);kt(u,f=>Dn(i.element,f.element)).each(tu)},jv=(t,s)=>t.components(),F5=(t,s,a,i,u)=>{const m=jv(t);return S.from(m[i]).map(f=>(u.fold(()=>tu(f),h=>{(s.reuseDom?NI:D1)(t,f,i,h)}),f))};var Gu=Object.freeze({__proto__:null,append:uw,prepend:Kd,remove:Yd,replaceAt:F5,replaceBy:(t,s,a,i,u)=>{const m=jv(t);return kn(m,i).bind(f=>F5(t,s,a,f,u))},set:I5,contents:jv});const _t=zs({fields:[ur("reuseDom",!0)],name:"replacing",apis:Gu}),BI=(t,s)=>{const a=In(s);return zs({fields:[ve("enabled")],name:t,active:{events:q(a)}})},Rt=(t,s)=>{const a=BI(t,s);return{key:t,value:{config:{},me:a,configAsRaw:q({}),initialConfig:{},state:al}}},dw=(t,s)=>{s.ignore||(La(t.element),s.onFocus(t))};var H5=Object.freeze({__proto__:null,focus:dw,blur:(t,s)=>{s.ignore||or(t.element)},isFocused:t=>Jl(t.element)}),II=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return cc(a)},events:t=>In([be(Zl(),(s,a)=>{dw(s,t),a.stop()})].concat(t.stopMousedown?[be(ac(),(s,a)=>{a.event.prevent()})]:[]))}),Gv=[an("onFocus"),se("stopMousedown",!1),se("ignore",!1)];const Ct=zs({fields:Gv,name:"focusing",active:II,apis:H5}),qv=t=>({init:()=>{const a=at(t);return{get:()=>a.get(),set:h=>a.set(h),clear:()=>a.set(t),readState:()=>a.get()}}}),V5=(t,s,a)=>{const i=s.aria;i.update(t,i,a.get())},FI=(t,s,a)=>{s.toggleClass.each(i=>{a.get()?Xo(t.element,i):bo(t.element,i)})},xh=(t,s,a,i)=>{const u=a.get();a.set(i),FI(t,s,a),V5(t,s,a),u!==i&&s.onToggled(t,i)},mw=(t,s,a)=>{xh(t,s,a,!a.get())},z5=(t,s,a)=>{xh(t,s,a,!0)},U5=(t,s,a)=>{xh(t,s,a,!1)},$I=(t,s,a)=>a.get(),Kv=(t,s,a)=>{xh(t,s,a,s.selected)};var HI=Object.freeze({__proto__:null,onLoad:Kv,toggle:mw,isOn:$I,on:z5,off:U5,set:xh}),VI=Object.freeze({__proto__:null,exhibit:()=>cc({}),events:(t,s)=>{const a=yP(t,s,mw),i=Km(t,s,Kv);return In(Dt([t.toggleOnExecute?[a]:[],[i]]))}});const Z5=(t,s,a)=>{Ve(t.element,"aria-pressed",a),s.syncWithExpanded&&fw(t,s,a)},zI=(t,s,a)=>{Ve(t.element,"aria-selected",a)},UI=(t,s,a)=>{Ve(t.element,"aria-checked",a)},fw=(t,s,a)=>{Ve(t.element,"aria-expanded",a)};var M1=[se("selected",!1),En("toggleClass"),se("toggleOnExecute",!0),an("onToggled"),mo("aria",{mode:"none"},Ts("mode",{pressed:[se("syncWithExpanded",!1),io("update",Z5)],checked:[io("update",UI)],expanded:[io("update",fw)],selected:[io("update",zI)],none:[io("update",re)]}))];const Gt=zs({fields:M1,name:"toggling",active:VI,apis:HI,state:qv(!1)}),wh=()=>{const t=(s,a)=>{a.stop(),Ld(s)};return[be(Wm(),t),be(_b(),t),qm(Nu()),qm(ac())]},Eh=t=>{const s=a=>Bu((i,u)=>{a(i),u.stop()});return In(Dt([t.map(s).toArray(),wh()]))},gw="alloy.item-hover",hw="alloy.item-focus",W5="alloy.item-toggled",j5=t=>{(Wr(t.element).isNone()||Ct.isFocused(t))&&(Ct.isFocused(t)||Ct.focus(t),st(t,gw,{item:t}))},pw=t=>{st(t,hw,{item:t})},ZI=(t,s)=>{st(t,W5,{item:t,state:s})},bw=q(gw),WI=q(hw),jI=q(W5),G5=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),$t),Yv=(t,s)=>({aria:{mode:s?"selected":"checked"},...Ac(t,(a,i)=>i!=="exclusive"),onToggled:(a,i)=>{Ms(t.onToggled)&&t.onToggled(a,i),ZI(a,i)}}),vw=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:G5(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:fc.augment(t.itemBehaviours,[t.toggling.fold(Gt.revoke,s=>Gt.config(Yv(s,t.role.exists(a=>a==="option")))),Ct.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{pw(s)}}),it.config({mode:"execution"}),We.config({store:{mode:"memory",initialValue:t.data}}),Rt("item-type-events",[...wh(),be(Ul(),j5),be(Tb(),Ct.focus)])]),components:t.components,eventOrder:t.eventOrder}),yw=[ve("data"),ve("components"),ve("dom"),se("hasSubmenu",!1),En("toggling"),En("role"),fc.field("itemBehaviours",[Gt,Ct,it,We]),se("ignoreFocus",!1),se("domModification",{}),io("builder",vw),se("eventOrder",{})],GI=t=>({dom:t.dom,components:t.components,events:In([zp(Tb())])}),qI=[ve("dom"),ve("components"),io("builder",GI)],Cw=q("item-widget"),Sw=q([pr({name:"widget",overrides:t=>({behaviours:_e([We.config({store:{mode:"manual",getValue:s=>t.data,setValue:re}})])})})]),q5=t=>{const s=$x(Cw(),t,Sw()),a=Hx(Cw(),t,s.internals()),i=m=>zn(m,t,"widget").map(f=>(it.focusIn(f),f)),u=(m,f)=>fh(f.event.target)?S.none():(t.autofocus&&f.setSource(m.element),S.none());return{dom:t.dom,components:a,domModification:t.domModification,events:In([Bu((m,f)=>{i(m).each(h=>{f.stop()})}),be(Ul(),j5),be(Tb(),(m,f)=>{t.autofocus?i(m):Ct.focus(m)})]),behaviours:fc.augment(t.widgetBehaviours,[We.config({store:{mode:"memory",initialValue:t.data}}),Ct.config({ignore:t.ignoreFocus,onFocus:m=>{pw(m)}}),it.config({mode:"special",focusIn:t.autofocus?m=>{i(m)}:wP(),onLeft:u,onRight:u,onEscape:(m,f)=>!Ct.isFocused(m)&&!t.autofocus?(Ct.focus(m),S.some(!0)):(t.autofocus&&f.setSource(m.element),S.none())})])}},K5=[ve("uid"),ve("data"),ve("components"),ve("dom"),se("autofocus",!1),se("ignoreFocus",!1),fc.field("widgetBehaviours",[We,Ct,it]),se("domModification",{}),Zx(Sw()),io("builder",q5)],KI=Ts("type",{widget:K5,item:yw,separator:qI}),YI=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),XI=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),JI=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),QI=q([v1({factory:{sketch:t=>{const s=pa("menu.spec item",KI,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>sn(s,"uid")?s:{...s,uid:nh("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),eF=q([Ko("role"),ve("value"),ve("items"),ve("dom"),ve("components"),se("eventOrder",{}),Ws("menuBehaviours",[bn,We,ln,it]),mo("movement",{mode:"menu",moveOnTab:!0},Ts("mode",{grid:[Hd(),io("config",YI)],matrix:[io("config",XI),ve("rowSelector"),se("previousSelector",S.none)],menu:[se("moveOnTab",!0),io("config",JI)]})),HP(),se("fakeFocus",!1),se("focusManager",kf()),an("onHighlight"),an("onDehighlight"),se("showMenuRole",!0)]),xw=q("alloy.menu-focus"),tF=(t,s)=>{const a=oa(t.element,'[role="menuitemradio"][aria-checked="true"]');Ue(a,i=>{Dn(i,s.element)||t.getSystem().getByDom(i).each(u=>{Gt.off(u)})})},nF=(t,s,a,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Ho(t.menuBehaviours,[bn.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),We.config({store:{mode:"memory",initialValue:t.value}}),ln.config({find:S.some}),it.config(t.movement.config(t,t.movement))]),events:In([be(WI(),(u,m)=>{const f=m.event;u.getSystem().getByDom(f.target).each(h=>{bn.highlight(u,h),m.stop(),st(u,xw(),{menu:u,item:h})})}),be(bw(),(u,m)=>{const f=m.event.item;bn.highlight(u,f)}),be(jI(),(u,m)=>{const{item:f,state:h}=m.event;h&&Vt(f.element,"role")==="menuitemradio"&&tF(u,f)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),Of=Kr({name:"Menu",configFields:eF(),partFields:QI(),factory:nF}),oF=t=>ri(t,(s,a)=>({k:s,v:a})),Y5=(t,s,a,i)=>He(a,i).bind(u=>He(t,u).bind(m=>{const f=Y5(t,s,a,m);return S.some([m].concat(f))})).getOr([]),Df=(t,s)=>{const a={};Ao(t,(f,h)=>{Ue(f,b=>{a[b]=h})});const i=s,u=oF(s),m=Zn(u,(f,h)=>[h].concat(Y5(a,i,u,h)));return Zn(a,f=>He(m,f).getOr([f]))},sF=()=>{const t=at({}),s=at({}),a=at({}),i=Nn(),u=at({}),m=()=>{t.set({}),s.set({}),a.set({}),i.clear()},f=()=>i.get().isNone(),h=(le,Me)=>{s.set({...s.get(),[le]:{type:"prepared",menu:Me}})},b=(le,Me,Ge,pe)=>{i.set(le),t.set(Ge),s.set(Me),u.set(pe);const Ke=Df(pe,Ge);a.set(Ke)},C=le=>Wo(t.get(),(Me,Ge)=>Me===le),x=(le,Me,Ge)=>F(le).bind(pe=>C(le).bind(Ke=>Me(Ke).map(Le=>({triggeredMenu:pe,triggeringItem:Le,triggeringPath:Ge})))),k=(le,Me)=>{const Ge=Hn($(le).toArray(),pe=>F(pe).isSome());return He(a.get(),le).bind(pe=>{const Ke=Rs(Ge.concat(pe)),Le=oe(Ke,(et,Xt)=>x(et,Me,Ke.slice(0,Xt+1)).fold(()=>Ps(i.get(),et)?[]:[S.none()],qn=>[S.some(qn)]));return Qa(Le)})},A=le=>He(t.get(),le).map(Me=>{const Ge=He(a.get(),le).getOr([]);return[Me].concat(Ge)}),N=le=>He(a.get(),le).bind(Me=>Me.length>1?S.some(Me.slice(1)):S.none()),L=le=>He(a.get(),le),F=le=>J(le).bind(X5),J=le=>He(s.get(),le),$=le=>He(t.get(),le);return{setMenuBuilt:h,setContents:b,expand:A,refresh:L,collapse:N,lookupMenu:J,lookupItem:$,otherMenus:le=>{const Me=u.get();return vt(ao(Me),le)},getPrimary:()=>i.get().bind(F),getMenus:()=>s.get(),clear:m,isClear:f,getTriggeringPath:k}},X5=t=>t.type==="prepared"?S.some(t.menu):S.none(),Xd={init:sF,extractPreparedMenu:X5},ww=Xe("tiered-menu-item-highlight"),J5=Xe("tiered-menu-item-dehighlight");var bs;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(bs||(bs={}));const rF=(t,s)=>{const a=Nn(),i=(xe,Fe,wt)=>Zn(wt,(Lt,dt)=>{const Nt=()=>Of.sketch({...Lt,value:dt,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:($n,Mn)=>{st($n,ww,{menuComp:$n,itemComp:Mn})},onDehighlight:($n,Mn)=>{st($n,J5,{menuComp:$n,itemComp:Mn})},focusManager:t.fakeFocus?zA():kf()});return dt===Fe?{type:"prepared",menu:xe.getSystem().build(Nt())}:{type:"notbuilt",nbMenu:Nt}}),u=Xd.init(),m=xe=>{const Fe=i(xe,t.data.primary,t.data.menus),wt=b();return u.setContents(t.data.primary,Fe,t.data.expansions,wt),u.getPrimary()},f=xe=>We.getValue(xe).value,h=(xe,Fe,wt)=>_o(Fe,Lt=>{if(!Lt.getSystem().isConnected())return S.none();const dt=bn.getCandidates(Lt);return kt(dt,Nt=>f(Nt)===wt)}),b=xe=>Zn(t.data.menus,(Fe,wt)=>oe(Fe.items,Lt=>Lt.type==="separator"?[]:[Lt.data.value])),C=bn.highlight,x=(xe,Fe)=>{C(xe,Fe),bn.getHighlighted(Fe).orThunk(()=>bn.getFirst(Fe)).each(wt=>{t.fakeFocus?bn.highlight(Fe,wt):Rb(xe,wt.element,Tb())})},k=(xe,Fe)=>Oa(we(Fe,wt=>xe.lookupMenu(wt).bind(Lt=>Lt.type==="prepared"?S.some(Lt.menu):S.none()))),A=(xe,Fe,wt)=>{const Lt=k(Fe,Fe.otherMenus(wt));Ue(Lt,dt=>{cl(dt.element,[t.markers.backgroundMenu]),t.stayInDom||_t.remove(xe,dt)})},N=xe=>a.get().getOrThunk(()=>{const Fe={},wt=oa(xe.element,`.${t.markers.item}`),Lt=Hn(wt,dt=>Vt(dt,"aria-haspopup")==="true");return Ue(Lt,dt=>{xe.getSystem().getByDom(dt).each(Nt=>{const $n=f(Nt);Fe[$n]=Nt})}),a.set(Fe),Fe}),L=(xe,Fe)=>{const wt=N(xe);Ao(wt,(Lt,dt)=>{const Nt=wn(Fe,dt);Ve(Lt.element,"aria-expanded",Nt)})},F=(xe,Fe,wt)=>S.from(wt[0]).bind(Lt=>Fe.lookupMenu(Lt).bind(dt=>{if(dt.type==="notbuilt")return S.none();{const Nt=dt.menu,$n=k(Fe,wt.slice(1));return Ue($n,Mn=>{Xo(Mn.element,t.markers.backgroundMenu)}),K(Nt.element)||_t.append(xe,lc(Nt)),cl(Nt.element,[t.markers.backgroundMenu]),x(xe,Nt),A(xe,Fe,wt),S.some(Nt)}}));let J;(function(xe){xe[xe.HighlightSubmenu=0]="HighlightSubmenu",xe[xe.HighlightParent=1]="HighlightParent"})(J||(J={}));const $=(xe,Fe,wt)=>{if(wt.type==="notbuilt"){const Lt=xe.getSystem().build(wt.nbMenu());return u.setMenuBuilt(Fe,Lt),Lt}else return wt.menu},G=(xe,Fe,wt=J.HighlightSubmenu)=>{if(Fe.hasConfigured(rt)&&rt.isDisabled(Fe))return S.some(Fe);{const Lt=f(Fe);return u.expand(Lt).bind(dt=>(L(xe,dt),S.from(dt[0]).bind(Nt=>u.lookupMenu(Nt).bind($n=>{const Mn=$(xe,Nt,$n);return K(Mn.element)||_t.append(xe,lc(Mn)),t.onOpenSubmenu(xe,Fe,Mn,Rs(dt)),wt===J.HighlightSubmenu?(bn.highlightFirst(Mn),F(xe,u,dt)):(bn.dehighlightAll(Mn),S.some(Fe))}))))}},Y=(xe,Fe)=>{const wt=f(Fe);return u.collapse(wt).bind(Lt=>(L(xe,Lt),F(xe,u,Lt).map(dt=>(t.onCollapseMenu(xe,Fe,dt),dt))))},ce=(xe,Fe)=>{const wt=f(Fe);return u.refresh(wt).bind(Lt=>(L(xe,Lt),F(xe,u,Lt)))},le=(xe,Fe)=>fh(Fe.element)?S.none():G(xe,Fe,J.HighlightSubmenu),Me=(xe,Fe)=>fh(Fe.element)?S.none():Y(xe,Fe),Ge=(xe,Fe)=>Y(xe,Fe).orThunk(()=>t.onEscape(xe,Fe).map(()=>xe)),pe=xe=>(Fe,wt)=>Yl(wt.getSource(),`.${t.markers.item}`).bind(Lt=>Fe.getSystem().getByDom(Lt).toOptional().bind(dt=>xe(Fe,dt).map(nt))),Ke=In([be(xw(),(xe,Fe)=>{const wt=Fe.event.item;u.lookupItem(f(wt)).each(()=>{const Lt=Fe.event.menu;bn.highlight(xe,Lt);const dt=f(Fe.event.item);u.refresh(dt).each(Nt=>A(xe,u,Nt))})}),Bu((xe,Fe)=>{const wt=Fe.event.target;xe.getSystem().getByDom(wt).each(Lt=>{f(Lt).indexOf("collapse-item")===0&&Y(xe,Lt),G(xe,Lt,J.HighlightSubmenu).fold(()=>{t.onExecute(xe,Lt)},re)})}),co((xe,Fe)=>{m(xe).each(wt=>{_t.append(xe,lc(wt)),t.onOpenMenu(xe,wt),t.highlightOnOpen===bs.HighlightMenuAndItem?x(xe,wt):t.highlightOnOpen===bs.HighlightJustMenu&&C(xe,wt)})}),be(ww,(xe,Fe)=>{t.onHighlightItem(xe,Fe.event.menuComp,Fe.event.itemComp)}),be(J5,(xe,Fe)=>{t.onDehighlightItem(xe,Fe.event.menuComp,Fe.event.itemComp)}),...t.navigateOnHover?[be(bw(),(xe,Fe)=>{const wt=Fe.event.item;ce(xe,wt),G(xe,wt,J.HighlightParent),t.onHover(xe,wt)})]:[]]),Le=xe=>bn.getHighlighted(xe).bind(bn.getHighlighted),et=xe=>{Le(xe).each(Fe=>{Y(xe,Fe)})},Xt=xe=>{u.getPrimary().each(Fe=>{x(xe,Fe)})},qn=xe=>S.from(xe.components()[0]).filter(Fe=>Vt(Fe.element,"role")==="menu"),tt={collapseMenu:et,highlightPrimary:Xt,repositionMenus:xe=>{u.getPrimary().bind(wt=>Le(xe).bind(Lt=>{const dt=f(Lt),Nt=bu(u.getMenus()),$n=Oa(we(Nt,Xd.extractPreparedMenu));return u.getTriggeringPath(dt,Mn=>h(xe,$n,Mn))}).map(Lt=>({primary:wt,triggeringPath:Lt}))).fold(()=>{qn(xe).each(wt=>{t.onRepositionMenu(xe,wt,[])})},({primary:wt,triggeringPath:Lt})=>{t.onRepositionMenu(xe,wt,Lt)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Ho(t.tmenuBehaviours,[it.config({mode:"special",onRight:pe(le),onLeft:pe(Me),onEscape:pe(Ge),focusIn:(xe,Fe)=>{u.getPrimary().each(wt=>{Rb(xe,wt.element,Tb())})}}),bn.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),ln.config({find:xe=>bn.getHighlighted(xe)}),_t.config({})]),eventOrder:t.eventOrder,apis:tt,events:Ke}},aF=q("collapse-item"),zc=(t,s,a)=>({primary:t,menus:s,expansions:a}),Q5=(t,s)=>({primary:t,menus:Um(t,s),expansions:{}}),eO=t=>({value:Xe(aF()),meta:{text:t}}),Jd=gc({name:"TieredMenu",configFields:[Gp("onExecute"),Gp("onEscape"),rf("onOpenMenu"),rf("onOpenSubmenu"),an("onRepositionMenu"),an("onCollapseMenu"),se("highlightOnOpen",bs.HighlightMenuAndItem),Md("data",[ve("primary"),ve("menus"),ve("expansions")]),se("fakeFocus",!1),an("onHighlightItem"),an("onDehighlightItem"),an("onHover"),th(),ve("dom"),se("navigateOnHover",!0),se("stayInDom",!1),Ws("tmenuBehaviours",[it,bn,ln,_t]),se("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:rF,extraApis:{tieredData:zc,singleData:Q5,collapseItem:eO}}),cF=(t,s,a,i,u)=>{const m=()=>t.lazySink(s),f=i.type==="horizontal"?{layouts:{onLtr:()=>oh(),onRtl:()=>rv()}}:{},h=C=>C.length===2,b=C=>h(C)?f:{};return Jd.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(hn.close(s),t.onEscape.map(C=>C(s)),S.some(!0)),onExecute:()=>S.some(!0),onOpenMenu:(C,x)=>{hr.positionWithinBounds(m().getOrDie(),x,a,u())},onOpenSubmenu:(C,x,k,A)=>{const N=m().getOrDie();hr.position(N,k,{anchor:{type:"submenu",item:x,...b(A)}})},onRepositionMenu:(C,x,k)=>{const A=m().getOrDie();hr.positionWithinBounds(A,x,a,u()),Ue(k,N=>{const L=b(N.triggeringPath);hr.position(A,N.triggeredMenu,{anchor:{type:"submenu",item:N.triggeringItem,...L}})})}})},Xv=(t,s)=>{const a=(A,N)=>t.getRelated(A).exists(F=>zd(F,N)),i=(A,N)=>{hn.setContent(A,N)},u=(A,N,L)=>{const F=S.none;m(A,N,L,F)},m=(A,N,L,F)=>{const J=t.lazySink(A).getOrDie();hn.openWhileCloaked(A,N,()=>hr.positionWithinBounds(J,A,L,F())),We.setValue(A,S.some({mode:"position",config:L,getBounds:F}))},f=(A,N,L)=>{h(A,N,L,S.none)},h=(A,N,L,F)=>{const J=cF(t,A,N,L,F);hn.open(A,J),We.setValue(A,S.some({mode:"menu",menu:J}))},b=A=>{hn.isOpen(A)&&(We.setValue(A,S.none()),hn.close(A))},C=A=>hn.getState(A),x=A=>{hn.isOpen(A)&&We.getValue(A).each(N=>{switch(N.mode){case"menu":hn.getState(A).each(Jd.repositionMenus);break;case"position":const L=t.lazySink(A).getOrDie();hr.positionWithinBounds(L,A,N.config,N.getBounds());break}})},k={setContent:i,showAt:u,showWithinBounds:m,showMenuAt:f,showMenuWithinBounds:h,hide:b,getContent:C,reposition:x,isOpen:hn.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Ho(t.inlineBehaviours,[hn.config({isPartOf:(A,N,L)=>zd(N,L)||a(A,L),getAttachPoint:A=>t.lazySink(A).getOrDie(),onOpen:A=>{t.onShow(A)},onClose:A=>{t.onHide(A)}}),We.config({store:{mode:"memory",initialValue:S.none()}}),Ba.config({channels:{...Ia({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(A=>({fireEventInstead:{event:A.event}})).getOr({})}),...lh({...t.fireRepositionEventInstead.map(A=>({fireEventInstead:{event:A.event}})).getOr({}),doReposition:x})}})]),eventOrder:t.eventOrder,apis:k}},go=gc({name:"InlineView",configFields:[ve("lazySink"),an("onShow"),an("onHide"),Rd("onEscape"),Ws("inlineBehaviours",[hn,We,Ba]),Hs("fireDismissalEventInstead",[se("event",Bd())]),Hs("fireRepositionEventInstead",[se("event",yT())]),se("getRelated",S.none),se("isExtraPart",Sn),se("eventOrder",S.none)],factory:Xv,apis:{showAt:(t,s,a,i)=>{t.showAt(s,a,i)},showWithinBounds:(t,s,a,i,u)=>{t.showWithinBounds(s,a,i,u)},showMenuAt:(t,s,a,i)=>{t.showMenuAt(s,a,i)},showMenuWithinBounds:(t,s,a,i,u)=>{t.showMenuWithinBounds(s,a,i,u)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var Jv=tinymce.util.Tools.resolve("tinymce.util.Delay"),R1=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Qv=tinymce.util.Tools.resolve("tinymce.EditorManager"),Qd=tinymce.util.Tools.resolve("tinymce.Env"),hc;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(hc||(hc={}));var kh;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(kh||(kh={}));const Fn=t=>s=>s.options.get(t),N1=t=>s=>S.from(t(s)),e2=t=>{const s=Qd.deviceType.isPhone(),a=Qd.deviceType.isTablet()||s,i=t.options.register,u=f=>on(f)||f===!1,m=f=>on(f)||qs(f);i("skin",{processor:f=>on(f)||f===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:m,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:m,default:R1.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:f=>on(f)||kr(f),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:f=>kr(f)||on(f)||ho(f)?{value:f,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Ja(9,f=>{i("toolbar"+(f+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:kh.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:u,default:"#top"}),i("anchor_bottom",{processor:u,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:f=>f==="both"||kr(f),default:!Qd.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},Ew=Fn("readonly"),t2=Fn("disabled"),kw=Fn("height"),Tw=Fn("width"),P1=N1(Fn("min_width")),_w=N1(Fn("min_height")),em=N1(Fn("max_width")),Th=N1(Fn("max_height")),Aw=N1(Fn("style_formats")),Ow=Fn("style_formats_merge"),tO=Fn("style_formats_autohide"),nO=Fn("content_langs"),oO=Fn("removed_menuitems"),_h=Fn("toolbar_mode"),n2=Fn("toolbar_groups"),o2=Fn("toolbar_location"),sO=Fn("fixed_toolbar_container"),Dw=Fn("fixed_toolbar_container_target"),rO=Fn("toolbar_persist"),Mw=Fn("toolbar_sticky_offset"),aO=Fn("menubar"),s2=Fn("toolbar"),cO=Fn("file_picker_callback"),Rw=Fn("file_picker_validator_handler"),iO=Fn("font_size_input_default_unit"),lO=Fn("file_picker_types"),r2=Fn("typeahead_urls"),Nw=Fn("anchor_top"),Pw=Fn("anchor_bottom"),uO=Fn("draggable_modal"),a2=Fn("statusbar"),dO=Fn("elementpath"),Bw=Fn("branding"),mO=Fn("resize"),fO=Fn("paste_as_text"),gO=Fn("sidebar_show"),Lw=Fn("promotion"),c2=Fn("help_accessibility"),hO=Fn("default_font_stack"),B1=Fn("skin"),Iw=t=>t.options.get("skin")===!1,i2=t=>t.options.get("menubar")!==!1,pO=t=>{const s=t.options.get("skin_url");if(Iw(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return Qv.baseURL+"/skins/ui/"+a}},iF=t=>S.from(t.options.get("skin_url")),bO=t=>t.options.get("line_height_formats").split(" "),l2=t=>{const s=s2(t),a=on(s),i=ho(s)&&s.length>0;return!L1(t)&&(i||a||s===!0)},u2=t=>{const s=Ja(9,i=>t.options.get("toolbar"+(i+1))),a=Hn(s,on);return ht(a.length>0,a)},L1=t=>u2(t).fold(()=>{const s=s2(t);return xt(s,on)&&s.length>0},nt),Fw=t=>o2(t)===kh.bottom,d2=t=>{var s;if(!t.inline)return S.none();const a=(s=sO(t))!==null&&s!==void 0?s:"";if(a.length>0)return fo(ge(),a);const i=Dw(t);return so(i)?S.some(Be.fromDom(i)):S.none()},Ei=t=>t.inline&&d2(t).isSome(),$w=t=>d2(t).getOrThunk(()=>Ml(Xs(Be.fromDom(t.getElement())))),Hw=t=>t.inline&&!i2(t)&&!l2(t)&&!L1(t),tm=t=>(t.options.get("toolbar_sticky")||t.inline)&&!Ei(t)&&!Hw(t),qu=t=>!Ei(t)&&t.options.get("ui_mode")==="split",vO=t=>{const s=t.options.get("menu");return Zn(s,a=>({...a,items:a.items}))};var lF=Object.freeze({__proto__:null,get ToolbarMode(){return hc},get ToolbarLocation(){return kh},register:e2,getSkinUrl:pO,getSkinUrlOption:iF,isReadOnly:Ew,isDisabled:t2,getSkin:B1,isSkinDisabled:Iw,getHeightOption:kw,getWidthOption:Tw,getMinWidthOption:P1,getMinHeightOption:_w,getMaxWidthOption:em,getMaxHeightOption:Th,getUserStyleFormats:Aw,shouldMergeStyleFormats:Ow,shouldAutoHideStyleFormats:tO,getLineHeightFormats:bO,getContentLanguages:nO,getRemovedMenuItems:oO,isMenubarEnabled:i2,isMultipleToolbars:L1,isToolbarEnabled:l2,isToolbarPersist:rO,getMultipleToolbarsOption:u2,getUiContainer:$w,useFixedContainer:Ei,isSplitUiMode:qu,getToolbarMode:_h,isDraggableModal:uO,isDistractionFree:Hw,isStickyToolbar:tm,getStickyToolbarOffset:Mw,getToolbarLocation:o2,isToolbarLocationBottom:Fw,getToolbarGroups:n2,getMenus:vO,getMenubar:aO,getToolbar:s2,getFilePickerCallback:cO,getFilePickerTypes:lO,useTypeaheadUrls:r2,getAnchorTop:Nw,getAnchorBottom:Pw,getFilePickerValidatorHandler:Rw,getFontSizeInputDefaultUnit:iO,useStatusBar:a2,useElementPath:dO,promotionEnabled:Lw,useBranding:Bw,getResize:mO,getPasteAsText:fO,getSidebarShow:gO,useHelpAccessibility:c2,getDefaultFontStack:hO});const yO=["visible","hidden","clip"],CO=t=>Cu(t).length>0&&!wn(yO,t),Vw=t=>{if(ls(t)){const s=Ee(t,"overflow-x"),a=Ee(t,"overflow-y");return CO(s)||CO(a)}else return!1},zw=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),Uw=(t,s)=>{const a=W_(s,Vw),i=a.length===0?Cd(s).map(Mm).map(u=>W_(u,Vw)).getOr([]):a;return Ns(i).map(u=>({element:u,others:i.slice(1),isFullscreen:()=>zw(t)}))},nm=(t,s)=>qu(t)?Uw(t,s):S.none(),om=t=>{const s=[...we(t.others,ms),ws()];return t.isFullscreen()?ws():Fm(ms(t.element),s)},ns=gc({name:"Button",factory:t=>{const s=Eh(t.action),a=t.dom.tag,i=m=>He(t.dom,"attributes").bind(f=>He(f,m)),u=()=>{if(a==="button"){const m=i("type").getOr("button"),f=i("role").map(h=>({role:h})).getOr({});return{type:m,...f}}else return{role:t.role.getOr(i("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:fc.augment(t.buttonBehaviours,[Ct.config({}),it.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:u()},eventOrder:t.eventOrder}},configFields:[se("uid",void 0),ve("dom"),se("components",[]),fc.field("buttonBehaviours",[Ct,it]),En("action"),En("role"),se("eventOrder",{})]}),uF=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return Zo(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},dF=t=>Array.prototype.slice.call(t.dom.classList,0),ml=t=>{const s=Be.fromHtml(t),a=ds(s),i=uF(s),u=dF(s),m=a.length===0?{}:{innerHtml:Lu(s)};return{tag:Qn(s),classes:u,attributes:i,...m}},yn=t=>{const s=LL(t)&&_r(t,"uid")?t.uid:nh("memento");return{get:m=>m.getSystem().getByUid(s).getOrDie(),getOpt:m=>m.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var Zw=Object.freeze({__proto__:null,exhibit:(t,s)=>cc({attributes:Lg([{key:s.tabAttr,value:"true"}])})}),mF=[se("tabAttr","data-alloy-tabstop")];const no=zs({fields:mF,name:"tabstopping",active:Zw}),m2=Xe("tooltip.exclusive"),I1=Xe("tooltip.show"),F1=Xe("tooltip.hide"),$1=Xe("tooltip.immediateHide"),H1=Xe("tooltip.immediateShow"),SO=(t,s,a)=>{t.getSystem().broadcastOn([m2],{})};var fF=Object.freeze({__proto__:null,hideAllExclusive:SO,immediateOpenClose:(t,s,a,i)=>Qt(t,i?H1:$1),isEnabled:(t,s,a)=>a.isEnabled(),setComponents:(t,s,a,i)=>{a.getTooltip().each(u=>{u.getSystem().isConnected()&&_t.set(u,i)})},setEnabled:(t,s,a,i)=>a.setEnabled(i)}),gF=Object.freeze({__proto__:null,events:(t,s)=>{const a=f=>{s.getTooltip().each(h=>{h.getSystem().isConnected()&&(tu(h),t.onHide(f,h),s.clearTooltip())}),s.clearTimer()},i=f=>{if(!s.isShowing()&&s.isEnabled()){SO(f);const h=t.lazySink(f).getOrDie(),b=f.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:In(t.mode==="normal"?[be(Ul(),C=>{Qt(f,I1)}),be(Eb(),C=>{Qt(f,F1)})]:[]),behaviours:_e([_t.config({})])});s.setTooltip(b),bf(h,b),t.onShow(f,b),hr.position(h,b,{anchor:t.anchor(f)})}},u=f=>{s.getTooltip().each(h=>{const b=t.lazySink(f).getOrDie();hr.position(b,h,{anchor:t.anchor(f)})})},m=()=>{switch(t.mode){case"normal":return[be(rl(),f=>{Qt(f,H1)}),be(Vg(),f=>{Qt(f,$1)}),be(Ul(),f=>{Qt(f,I1)}),be(Eb(),f=>{Qt(f,F1)})];case"follow-highlight":return[be(SS(),(f,h)=>{Qt(f,I1)}),be(Ug(),f=>{Qt(f,F1)})];case"children-normal":return[be(rl(),(f,h)=>{Wr(f.element).each(b=>{Al(h.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Qt(f,H1)},C=>{s.isShowing()&&(t.onShow(f,C),u(f))})})}),be(Vg(),f=>{Wr(f.element).fold(()=>{Qt(f,$1)},re)}),be(Ul(),f=>{fo(f.element,"[data-mce-tooltip]:hover").each(h=>{s.getTooltip().fold(()=>{Qt(f,I1)},b=>{s.isShowing()&&(t.onShow(f,b),u(f))})})}),be(Eb(),f=>{fo(f.element,"[data-mce-tooltip]:hover").fold(()=>{Qt(f,F1)},re)})];default:return[be(rl(),(f,h)=>{Wr(f.element).each(b=>{Al(h.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Qt(f,H1)},C=>{s.isShowing()&&(t.onShow(f,C),u(f))})})}),be(Vg(),f=>{Wr(f.element).fold(()=>{Qt(f,$1)},re)})]}};return In(Dt([[_T(f=>{t.onSetup(f)}),be(I1,f=>{s.resetTimer(()=>{i(f)},t.delayForShow())}),be(F1,f=>{s.resetTimer(()=>{a(f)},t.delayForHide())}),be(H1,f=>{s.resetTimer(()=>{i(f)},0)}),be($1,f=>{s.resetTimer(()=>{a(f)},0)}),be(Pd(),(f,h)=>{const b=h;b.universal||wn(b.channels,m2)&&a(f)}),jl(f=>{a(f)})],m()]))}}),Ww=[ve("lazySink"),ve("tooltipDom"),se("exclusive",!0),se("tooltipComponents",[]),Ln("delayForShow",q(300)),Ln("delayForHide",q(300)),Ln("onSetup",re),Vr("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),se("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:q([ps,Zs,gs,gr,hs,nr]),onRtl:q([ps,Zs,gs,gr,hs,nr])},bubble:Si(0,-2,{})})),an("onHide"),an("onShow")],hF=Object.freeze({__proto__:null,init:()=>{const t=at(!0),s=Nn(),a=Nn(),i=()=>{s.on(clearTimeout)},u=(f,h)=>{i(),s.set(setTimeout(f,h))},m=q("not-implemented");return zr({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:i,resetTimer:u,readState:m,isEnabled:()=>t.get(),setEnabled:f=>t.set(f)})}});const So=zs({fields:Ww,name:"tooltipping",active:gF,state:hF,apis:fF});/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:jw,setPrototypeOf:xO,isFrozen:pF,getPrototypeOf:bF,getOwnPropertyDescriptor:vF}=Object;let{freeze:Fa,seal:ki,create:f2}=Object,{apply:Gw,construct:qw}=typeof Reflect<"u"&&Reflect;Fa||(Fa=function(s){return s}),ki||(ki=function(s){return s}),Gw||(Gw=function(s,a,i){return s.apply(a,i)}),qw||(qw=function(s,a){return new s(...a)});const g2=Uc(Array.prototype.forEach),wO=Uc(Array.prototype.pop),V1=Uc(Array.prototype.push),h2=Uc(String.prototype.toLowerCase),Kw=Uc(String.prototype.toString),EO=Uc(String.prototype.match),z1=Uc(String.prototype.replace),yF=Uc(String.prototype.indexOf),CF=Uc(String.prototype.trim),fl=Uc(Object.prototype.hasOwnProperty),$a=Uc(RegExp.prototype.test),sm=Yw(TypeError);function Uc(t){return function(s){for(var a=arguments.length,i=new Array(a>1?a-1:0),u=1;u<a;u++)i[u-1]=arguments[u];return Gw(t,s,i)}}function Yw(t){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return qw(t,a)}}function Wn(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h2;xO&&xO(t,null);let i=s.length;for(;i--;){let u=s[i];if(typeof u=="string"){const m=a(u);m!==u&&(pF(s)||(s[i]=m),u=m)}t[u]=!0}return t}function SF(t){for(let s=0;s<t.length;s++)fl(t,s)||(t[s]=null);return t}function Mf(t){const s=f2(null);for(const[a,i]of jw(t))fl(t,a)&&(Array.isArray(i)?s[a]=SF(i):i&&typeof i=="object"&&i.constructor===Object?s[a]=Mf(i):s[a]=i);return s}function Ah(t,s){for(;t!==null;){const i=vF(t,s);if(i){if(i.get)return Uc(i.get);if(typeof i.value=="function")return Uc(i.value)}t=bF(t)}function a(){return null}return a}const kO=Fa(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),U1=Fa(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Z1=Fa(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),TO=Fa(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),W1=Fa(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),p2=Fa(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Xw=Fa(["#text"]),gl=Fa(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),j1=Fa(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),_O=Fa(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),b2=Fa(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),xF=ki(/\{\{[\w\W]*|[\w\W]*\}\}/gm),wF=ki(/<%[\w\W]*|[\w\W]*%>/gm),G1=ki(/\${[\w\W]*}/gm),EF=ki(/^data-[\-\w.\u00B7-\uFFFF]/),AO=ki(/^aria-[\-\w]+$/),v2=ki(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),kF=ki(/^(?:\w+script|data):/i),Jw=ki(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),y2=ki(/^html$/i),TF=ki(/^[a-z][.\w]*(-[.\w]+)+$/i);var Qw=Object.freeze({__proto__:null,MUSTACHE_EXPR:xF,ERB_EXPR:wF,TMPLIT_EXPR:G1,DATA_ATTR:EF,ARIA_ATTR:AO,IS_ALLOWED_URI:v2,IS_SCRIPT_OR_DATA:kF,ATTR_WHITESPACE:Jw,DOCTYPE_NAME:y2,CUSTOM_ELEMENT:TF});const Oh={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},_F=function(){return typeof window>"u"?null:window},OO=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const u="data-tt-policy-suffix";a&&a.hasAttribute(u)&&(i=a.getAttribute(u));const m="dompurify"+(i?"#"+i:"");try{return s.createPolicy(m,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+m+" could not be created."),null}};function e4(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_F();const s=tn=>e4(tn);if(s.version="3.1.7",s.removed=[],!t||!t.document||t.document.nodeType!==Oh.document)return s.isSupported=!1,s;let{document:a}=t;const i=a,u=i.currentScript,{DocumentFragment:m,HTMLTemplateElement:f,Node:h,Element:b,NodeFilter:C,NamedNodeMap:x=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:k,DOMParser:A,trustedTypes:N}=t,L=b.prototype,F=Ah(L,"cloneNode"),J=Ah(L,"remove"),$=Ah(L,"nextSibling"),G=Ah(L,"childNodes"),Y=Ah(L,"parentNode");if(typeof f=="function"){const tn=a.createElement("template");tn.content&&tn.content.ownerDocument&&(a=tn.content.ownerDocument)}let ce,le="";const{implementation:Me,createNodeIterator:Ge,createDocumentFragment:pe,getElementsByTagName:Ke}=a,{importNode:Le}=i;let et={};s.isSupported=typeof jw=="function"&&typeof Y=="function"&&Me&&Me.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Xt,ERB_EXPR:qn,TMPLIT_EXPR:pn,DATA_ATTR:tt,ARIA_ATTR:xe,IS_SCRIPT_OR_DATA:Fe,ATTR_WHITESPACE:wt,CUSTOM_ELEMENT:Lt}=Qw;let{IS_ALLOWED_URI:dt}=Qw,Nt=null;const $n=Wn({},[...kO,...U1,...Z1,...W1,...Xw]);let Mn=null;const ka=Wn({},[...gl,...j1,..._O,...b2]);let vo=Object.seal(f2(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),xc=null,Er=null,wc=!0,Ec=!0,$i=!1,tb=!0,hu=!1,tT=!0,ug=!1,nT=!1,Lj=!1,zC=!1,tP=!1,nP=!1,Aq=!0,Oq=!1;const sK="user-content-";let Ij=!0,oT=!1,UC={},ZC=null;const Dq=Wn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Mq=null;const Rq=Wn({},["audio","video","img","source","image","track"]);let Fj=null;const Nq=Wn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),oP="http://www.w3.org/1998/Math/MathML",sP="http://www.w3.org/2000/svg",dg="http://www.w3.org/1999/xhtml";let WC=dg,$j=!1,Hj=null;const rK=Wn({},[oP,sP,dg],Kw);let sT=null;const aK=["application/xhtml+xml","text/html"],cK="text/html";let Ta=null,jC=null;const iK=a.createElement("form"),Pq=function(me){return me instanceof RegExp||me instanceof Function},Vj=function(){let me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(jC&&jC===me)){if((!me||typeof me!="object")&&(me={}),me=Mf(me),sT=aK.indexOf(me.PARSER_MEDIA_TYPE)===-1?cK:me.PARSER_MEDIA_TYPE,Ta=sT==="application/xhtml+xml"?Kw:h2,Nt=fl(me,"ALLOWED_TAGS")?Wn({},me.ALLOWED_TAGS,Ta):$n,Mn=fl(me,"ALLOWED_ATTR")?Wn({},me.ALLOWED_ATTR,Ta):ka,Hj=fl(me,"ALLOWED_NAMESPACES")?Wn({},me.ALLOWED_NAMESPACES,Kw):rK,Fj=fl(me,"ADD_URI_SAFE_ATTR")?Wn(Mf(Nq),me.ADD_URI_SAFE_ATTR,Ta):Nq,Mq=fl(me,"ADD_DATA_URI_TAGS")?Wn(Mf(Rq),me.ADD_DATA_URI_TAGS,Ta):Rq,ZC=fl(me,"FORBID_CONTENTS")?Wn({},me.FORBID_CONTENTS,Ta):Dq,xc=fl(me,"FORBID_TAGS")?Wn({},me.FORBID_TAGS,Ta):{},Er=fl(me,"FORBID_ATTR")?Wn({},me.FORBID_ATTR,Ta):{},UC=fl(me,"USE_PROFILES")?me.USE_PROFILES:!1,wc=me.ALLOW_ARIA_ATTR!==!1,Ec=me.ALLOW_DATA_ATTR!==!1,$i=me.ALLOW_UNKNOWN_PROTOCOLS||!1,tb=me.ALLOW_SELF_CLOSE_IN_ATTR!==!1,hu=me.SAFE_FOR_TEMPLATES||!1,tT=me.SAFE_FOR_XML!==!1,ug=me.WHOLE_DOCUMENT||!1,zC=me.RETURN_DOM||!1,tP=me.RETURN_DOM_FRAGMENT||!1,nP=me.RETURN_TRUSTED_TYPE||!1,Lj=me.FORCE_BODY||!1,Aq=me.SANITIZE_DOM!==!1,Oq=me.SANITIZE_NAMED_PROPS||!1,Ij=me.KEEP_CONTENT!==!1,oT=me.IN_PLACE||!1,dt=me.ALLOWED_URI_REGEXP||v2,WC=me.NAMESPACE||dg,vo=me.CUSTOM_ELEMENT_HANDLING||{},me.CUSTOM_ELEMENT_HANDLING&&Pq(me.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(vo.tagNameCheck=me.CUSTOM_ELEMENT_HANDLING.tagNameCheck),me.CUSTOM_ELEMENT_HANDLING&&Pq(me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(vo.attributeNameCheck=me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),me.CUSTOM_ELEMENT_HANDLING&&typeof me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(vo.allowCustomizedBuiltInElements=me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),hu&&(Ec=!1),tP&&(zC=!0),UC&&(Nt=Wn({},Xw),Mn=[],UC.html===!0&&(Wn(Nt,kO),Wn(Mn,gl)),UC.svg===!0&&(Wn(Nt,U1),Wn(Mn,j1),Wn(Mn,b2)),UC.svgFilters===!0&&(Wn(Nt,Z1),Wn(Mn,j1),Wn(Mn,b2)),UC.mathMl===!0&&(Wn(Nt,W1),Wn(Mn,_O),Wn(Mn,b2))),me.ADD_TAGS&&(Nt===$n&&(Nt=Mf(Nt)),Wn(Nt,me.ADD_TAGS,Ta)),me.ADD_ATTR&&(Mn===ka&&(Mn=Mf(Mn)),Wn(Mn,me.ADD_ATTR,Ta)),me.ADD_URI_SAFE_ATTR&&Wn(Fj,me.ADD_URI_SAFE_ATTR,Ta),me.FORBID_CONTENTS&&(ZC===Dq&&(ZC=Mf(ZC)),Wn(ZC,me.FORBID_CONTENTS,Ta)),Ij&&(Nt["#text"]=!0),ug&&Wn(Nt,["html","head","body"]),Nt.table&&(Wn(Nt,["tbody"]),delete xc.tbody),me.TRUSTED_TYPES_POLICY){if(typeof me.TRUSTED_TYPES_POLICY.createHTML!="function")throw sm('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof me.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw sm('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ce=me.TRUSTED_TYPES_POLICY,le=ce.createHTML("")}else ce===void 0&&(ce=OO(N,u)),ce!==null&&typeof le=="string"&&(le=ce.createHTML(""));Fa&&Fa(me),jC=me}},Bq=Wn({},["mi","mo","mn","ms","mtext"]),Lq=Wn({},["annotation-xml"]),lK=Wn({},["title","style","font","a","script"]),Iq=Wn({},[...U1,...Z1,...TO]),Fq=Wn({},[...W1,...p2]),uK=function(me){let gt=Y(me);(!gt||!gt.tagName)&&(gt={namespaceURI:WC,tagName:"template"});const Jt=h2(me.tagName),Ss=h2(gt.tagName);return Hj[me.namespaceURI]?me.namespaceURI===sP?gt.namespaceURI===dg?Jt==="svg":gt.namespaceURI===oP?Jt==="svg"&&(Ss==="annotation-xml"||Bq[Ss]):!!Iq[Jt]:me.namespaceURI===oP?gt.namespaceURI===dg?Jt==="math":gt.namespaceURI===sP?Jt==="math"&&Lq[Ss]:!!Fq[Jt]:me.namespaceURI===dg?gt.namespaceURI===sP&&!Lq[Ss]||gt.namespaceURI===oP&&!Bq[Ss]?!1:!Fq[Jt]&&(lK[Jt]||!Iq[Jt]):!!(sT==="application/xhtml+xml"&&Hj[me.namespaceURI]):!1},Sm=function(me){V1(s.removed,{element:me});try{Y(me).removeChild(me)}catch{J(me)}},rT=function(me,gt){try{V1(s.removed,{attribute:gt.getAttributeNode(me),from:gt})}catch{V1(s.removed,{attribute:null,from:gt})}if(gt.removeAttribute(me),me==="is"&&!Mn[me])if(zC||tP)try{Sm(gt)}catch{}else try{gt.setAttribute(me,"")}catch{}},$q=function(me){let gt=null,Jt=null;if(Lj)me="<remove></remove>"+me;else{const _a=EO(me,/^[\r\n\t ]+/);Jt=_a&&_a[0]}sT==="application/xhtml+xml"&&WC===dg&&(me='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+me+"</body></html>");const Ss=ce?ce.createHTML(me):me;if(WC===dg)try{gt=new A().parseFromString(Ss,sT)}catch{}if(!gt||!gt.documentElement){gt=Me.createDocument(WC,"template",null);try{gt.documentElement.innerHTML=$j?le:Ss}catch{}}const kc=gt.body||gt.documentElement;return me&&Jt&&kc.insertBefore(a.createTextNode(Jt),kc.childNodes[0]||null),WC===dg?Ke.call(gt,ug?"html":"body")[0]:ug?gt.documentElement:kc},Hq=function(me){return Ge.call(me.ownerDocument||me,me,C.SHOW_ELEMENT|C.SHOW_COMMENT|C.SHOW_TEXT|C.SHOW_PROCESSING_INSTRUCTION|C.SHOW_CDATA_SECTION,null)},Vq=function(me){return me instanceof k&&(typeof me.nodeName!="string"||typeof me.textContent!="string"||typeof me.removeChild!="function"||!(me.attributes instanceof x)||typeof me.removeAttribute!="function"||typeof me.setAttribute!="function"||typeof me.namespaceURI!="string"||typeof me.insertBefore!="function"||typeof me.hasChildNodes!="function")},zq=function(me){return typeof h=="function"&&me instanceof h},mg=function(me,gt,Jt){et[me]&&g2(et[me],Ss=>{Ss.call(s,gt,Jt,jC)})},Uq=function(me){let gt=null;if(mg("beforeSanitizeElements",me,null),Vq(me))return Sm(me),!0;const Jt=Ta(me.nodeName);if(mg("uponSanitizeElement",me,{tagName:Jt,allowedTags:Nt}),me.hasChildNodes()&&!zq(me.firstElementChild)&&$a(/<[/\w]/g,me.innerHTML)&&$a(/<[/\w]/g,me.textContent)||me.nodeType===Oh.progressingInstruction||tT&&me.nodeType===Oh.comment&&$a(/<[/\w]/g,me.data))return Sm(me),!0;if(!Nt[Jt]||xc[Jt]){if(!xc[Jt]&&Wq(Jt)&&(vo.tagNameCheck instanceof RegExp&&$a(vo.tagNameCheck,Jt)||vo.tagNameCheck instanceof Function&&vo.tagNameCheck(Jt)))return!1;if(Ij&&!ZC[Jt]){const Ss=Y(me)||me.parentNode,kc=G(me)||me.childNodes;if(kc&&Ss){const _a=kc.length;for(let Hi=_a-1;Hi>=0;--Hi){const xm=F(kc[Hi],!0);xm.__removalCount=(me.__removalCount||0)+1,Ss.insertBefore(xm,$(me))}}}return Sm(me),!0}return me instanceof b&&!uK(me)||(Jt==="noscript"||Jt==="noembed"||Jt==="noframes")&&$a(/<\/no(script|embed|frames)/i,me.innerHTML)?(Sm(me),!0):(hu&&me.nodeType===Oh.text&&(gt=me.textContent,g2([Xt,qn,pn],Ss=>{gt=z1(gt,Ss," ")}),me.textContent!==gt&&(V1(s.removed,{element:me.cloneNode()}),me.textContent=gt)),mg("afterSanitizeElements",me,null),!1)},Zq=function(me,gt,Jt){if(Aq&&(gt==="id"||gt==="name")&&(Jt in a||Jt in iK))return!1;if(!(Ec&&!Er[gt]&&$a(tt,gt))){if(!(wc&&$a(xe,gt))){if(!Mn[gt]||Er[gt]){if(!(Wq(me)&&(vo.tagNameCheck instanceof RegExp&&$a(vo.tagNameCheck,me)||vo.tagNameCheck instanceof Function&&vo.tagNameCheck(me))&&(vo.attributeNameCheck instanceof RegExp&&$a(vo.attributeNameCheck,gt)||vo.attributeNameCheck instanceof Function&&vo.attributeNameCheck(gt))||gt==="is"&&vo.allowCustomizedBuiltInElements&&(vo.tagNameCheck instanceof RegExp&&$a(vo.tagNameCheck,Jt)||vo.tagNameCheck instanceof Function&&vo.tagNameCheck(Jt))))return!1}else if(!Fj[gt]){if(!$a(dt,z1(Jt,wt,""))){if(!((gt==="src"||gt==="xlink:href"||gt==="href")&&me!=="script"&&yF(Jt,"data:")===0&&Mq[me])){if(!($i&&!$a(Fe,z1(Jt,wt,"")))){if(Jt)return!1}}}}}}return!0},Wq=function(me){return me!=="annotation-xml"&&EO(me,Lt)},jq=function(me){mg("beforeSanitizeAttributes",me,null);const{attributes:gt}=me;if(!gt)return;const Jt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Mn};let Ss=gt.length;for(;Ss--;){const kc=gt[Ss],{name:_a,namespaceURI:Hi,value:xm}=kc,aT=Ta(_a);let Ga=_a==="value"?xm:CF(xm);const mK=Ga;if(Jt.attrName=aT,Jt.attrValue=Ga,Jt.keepAttr=!0,Jt.forceKeepAttr=void 0,mg("uponSanitizeAttribute",me,Jt),Ga=Jt.attrValue,Jt.forceKeepAttr)continue;if(!Jt.keepAttr){rT(_a,me);continue}if(!tb&&$a(/\/>/i,Ga)){rT(_a,me);continue}hu&&g2([Xt,qn,pn],qq=>{Ga=z1(Ga,qq," ")});const Gq=Ta(me.nodeName);if(!Zq(Gq,aT,Ga)){rT(_a,me);continue}if(Oq&&(aT==="id"||aT==="name")&&(rT(_a,me),Ga=sK+Ga),tT&&$a(/((--!?|])>)|<\/(style|title)/i,Ga)){rT(_a,me);continue}if(ce&&typeof N=="object"&&typeof N.getAttributeType=="function"&&!Hi)switch(N.getAttributeType(Gq,aT)){case"TrustedHTML":{Ga=ce.createHTML(Ga);break}case"TrustedScriptURL":{Ga=ce.createScriptURL(Ga);break}}if(Ga!==mK)try{Hi?me.setAttributeNS(Hi,_a,Ga):me.setAttribute(_a,Ga),Vq(me)?Sm(me):wO(s.removed)}catch{}}mg("afterSanitizeAttributes",me,null)},dK=function tn(me){let gt=null;const Jt=Hq(me);for(mg("beforeSanitizeShadowDOM",me,null);gt=Jt.nextNode();)mg("uponSanitizeShadowNode",gt,null),!Uq(gt)&&(gt.content instanceof m&&tn(gt.content),jq(gt));mg("afterSanitizeShadowDOM",me,null)};return s.sanitize=function(tn){let me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},gt=null,Jt=null,Ss=null,kc=null;if($j=!tn,$j&&(tn="<!-->"),typeof tn!="string"&&!zq(tn))if(typeof tn.toString=="function"){if(tn=tn.toString(),typeof tn!="string")throw sm("dirty is not a string, aborting")}else throw sm("toString is not a function");if(!s.isSupported)return tn;if(nT||Vj(me),s.removed=[],typeof tn=="string"&&(oT=!1),oT){if(tn.nodeName){const xm=Ta(tn.nodeName);if(!Nt[xm]||xc[xm])throw sm("root node is forbidden and cannot be sanitized in-place")}}else if(tn instanceof h)gt=$q("<!---->"),Jt=gt.ownerDocument.importNode(tn,!0),Jt.nodeType===Oh.element&&Jt.nodeName==="BODY"||Jt.nodeName==="HTML"?gt=Jt:gt.appendChild(Jt);else{if(!zC&&!hu&&!ug&&tn.indexOf("<")===-1)return ce&&nP?ce.createHTML(tn):tn;if(gt=$q(tn),!gt)return zC?null:nP?le:""}gt&&Lj&&Sm(gt.firstChild);const _a=Hq(oT?tn:gt);for(;Ss=_a.nextNode();)Uq(Ss)||(Ss.content instanceof m&&dK(Ss.content),jq(Ss));if(oT)return tn;if(zC){if(tP)for(kc=pe.call(gt.ownerDocument);gt.firstChild;)kc.appendChild(gt.firstChild);else kc=gt;return(Mn.shadowroot||Mn.shadowrootmode)&&(kc=Le.call(i,kc,!0)),kc}let Hi=ug?gt.outerHTML:gt.innerHTML;return ug&&Nt["!doctype"]&&gt.ownerDocument&&gt.ownerDocument.doctype&&gt.ownerDocument.doctype.name&&$a(y2,gt.ownerDocument.doctype.name)&&(Hi="<!DOCTYPE "+gt.ownerDocument.doctype.name+`>
`+Hi),hu&&g2([Xt,qn,pn],xm=>{Hi=z1(Hi,xm," ")}),ce&&nP?ce.createHTML(Hi):Hi},s.setConfig=function(){let tn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Vj(tn),nT=!0},s.clearConfig=function(){jC=null,nT=!1},s.isValidAttribute=function(tn,me,gt){jC||Vj({});const Jt=Ta(tn),Ss=Ta(me);return Zq(Jt,Ss,gt)},s.addHook=function(tn,me){typeof me=="function"&&(et[tn]=et[tn]||[],V1(et[tn],me))},s.removeHook=function(tn){if(et[tn])return wO(et[tn])},s.removeHooks=function(tn){et[tn]&&(et[tn]=[])},s.removeAllHooks=function(){et={}},s}var AF=e4();const DO=t=>AF().sanitize(t);var Zc=tinymce.util.Tools.resolve("tinymce.util.I18n");const OF={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},MO="temporary-placeholder",C2=t=>()=>He(t,MO).getOr("!not found!"),S2=(t,s)=>{const a=t.toLowerCase();if(Zc.isRtl()){const i=Ar(a,"-rtl");return sn(s,i)?i:a}else return a},RO=(t,s)=>He(s,S2(t,s)),t4=(t,s)=>{const a=s();return RO(t,a).getOrThunk(C2(a))},q1=(t,s,a)=>{const i=s();return RO(t,i).or(a).getOrThunk(C2(i))},NO=t=>Zc.isRtl()?sn(OF,t):!1,PO=()=>Rt("add-focusable",[co(t=>{Ci(t.element,"svg").each(s=>Ve(s,"focusable","false"))})]),BO=(t,s,a,i)=>{var u,m;const f=NO(s)?["tox-icon--flip"]:[],h=He(a,S2(s,a)).or(i).getOrThunk(C2(a));return{dom:{tag:t.tag,attributes:(u=t.attributes)!==null&&u!==void 0?u:{},classes:t.classes.concat(f),innerHtml:h},behaviours:_e([...(m=t.behaviours)!==null&&m!==void 0?m:[],PO()])}},pc=(t,s,a,i=S.none())=>BO(s,t,a(),i),DF=(t,s,a)=>{const i=a(),u=kt(t,m=>sn(i,S2(m,i)));return BO(s,u.getOr(MO),i,S.none())},MF={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},x2=gc({name:"Notification",factory:t=>{const s=Xe("notification-text"),a=yn({dom:ml(`<p id=${s}>${DO(t.backstageProvider.translate(t.text))}</p>`),behaviours:_e([_t.config({})])}),i=L=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${L}%`}}}),u=L=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${L}%`}}),m=yn({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},u(0)],behaviours:_e([_t.config({})])}),b={updateProgress:(L,F)=>{L.getSystem().isConnected()&&m.getOpt(L).each(J=>{_t.set(J,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(F)]},u(F)])})},updateText:(L,F)=>{if(L.getSystem().isConnected()){const J=a.get(L);_t.set(J,[lo(F)])}}},C=Dt([t.icon.toArray(),t.level.toArray(),t.level.bind(L=>S.from(MF[L])).toArray()]),x=yn(ns.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[pc("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:_e([no.config({}),So.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:L=>{t.onAction(L)}})),k=DF(C,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),A={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:_e([_t.config({})])},N=[k,A];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:t.level.map(L=>["tox-notification","tox-notification--in",`tox-notification--${L}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:_e([no.config({}),Ct.config({}),it.config({mode:"special",onEscape:L=>(t.onAction(L),S.some(!0))})]),components:N.concat(t.progress?[m.asSpec()]:[]).concat([x.asSpec()]),apis:b}},configFields:[En("level"),ve("progress"),En("icon"),ve("onAction"),ve("text"),ve("iconProvider"),ve("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var LO=(t,s,a,i)=>{const u=s.backstage.shared,m=()=>Be.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),f=()=>{const k=ms(m());return S.some(k)},h=k=>{f().each(A=>{Ue(k,N=>{rn(N.element,"width"),Ft(N.element)>A.width&&Pt(N.element,"width",A.width+"px")})})};return{open:(k,A,N)=>{const L=()=>{const G=Me=>{_t.remove(Me,F),J()},Y=(Me,Ge)=>{ds(Me.element).length===0?ce(Me,Ge):le(Me,Ge)},ce=(Me,Ge)=>{go.hide(Me),i.clear(),Ge&&t.focus()},le=(Me,Ge)=>{Ge&&it.focusIn(Me)};i.on(Me=>{A();const Ge=N();G(Me),Y(Me,Ge)})},F=dr(x2.sketch({text:k.text,level:wn(["success","error","warning","warn","info"],k.type)?k.type:void 0,progress:k.progressBar===!0,icon:k.icon,onAction:L,iconProvider:u.providers.icons,backstageProvider:u.providers}));if(i.isSet()){const G=lc(F);i.on(Y=>{_t.append(Y,G),go.reposition(Y),to.refresh(Y),h(Y.components())})}else{const G=dr(go.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:u.getSink,fireDismissalEventInstead:{},...u.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:_e([it.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),_t.config({}),...tm(t)&&!u.header.isPositionedAtTop()?[]:[to.config({contextual:{lazyContext:()=>S.some(ms(m())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Me=>nm(t,Me.element).map(pe=>({bounds:om(pe),optScrollEnv:S.some({currentScrollTop:pe.element.dom.scrollTop,scrollElmTop:Ma(pe.element).top})})).getOrThunk(()=>({bounds:ws(),optScrollEnv:S.none()}))})]])})),Y=lc(F),ce={maxHeightFunction:rh()},le={...u.anchors.banner(),overrides:ce};i.set(G),a.add(G),go.showWithinBounds(G,Y,{anchor:le},f)}qs(k.timeout)&&k.timeout>0&&Jv.setEditorTimeout(t,()=>{L()},k.timeout);const J=()=>{i.on(G=>{go.reposition(G),to.refresh(G),h(G.components())})};return{close:L,reposition:J,text:G=>{x2.updateText(F,G)},settings:k,getEl:()=>F.element.dom,progressBar:{value:G=>{x2.updateProgress(F,G)}}}},close:k=>{k.close()},getArgs:k=>k.settings}};const PF={setup:(t,s)=>{const a=(u,m)=>{st(u,Lc(),{raw:m})},i=()=>t.getMenu().bind(bn.getHighlighted);s.on("keydown",u=>{const m=u.which;t.isActive()&&(t.isMenuOpen()?m===13?(i().each(Ld),u.preventDefault()):m===40?(i().fold(()=>{t.getMenu().each(bn.highlightFirst)},f=>{a(f,u)}),u.preventDefault(),u.stopImmediatePropagation()):(m===37||m===38||m===39)&&i().each(f=>{a(f,u),u.preventDefault(),u.stopImmediatePropagation()}):(m===13||m===38||m===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var n4;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(n4||(n4={}));var Ti=n4;const K1="tox-menu-nav__js",Dh="tox-collection__item",w2="tox-swatch",IO={normal:K1,color:w2},o4="tox-collection__item--enabled",BF="tox-collection__group-heading",E2="tox-collection__item-icon",s4="tox-collection__item-label",FO="tox-collection__item-accessory",r4="tox-collection__item-caret",Rf="tox-collection__item-checkmark",Nf="tox-collection__item--active",k2="tox-collection__item-container",T2="tox-collection__item-container--column",$O="tox-collection__item-container--row",HO="tox-collection__item-container--align-right",VO="tox-collection__item-container--align-left",zO="tox-collection__item-container--valign-top",a4="tox-collection__item-container--valign-middle",UO="tox-collection__item-container--valign-bottom",ZO=t=>He(IO,t).getOr(K1),WO=t=>t==="color"?"tox-swatches":"tox-menu",_2=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:WO(t),tieredMenu:"tox-tiered-menu"}),rm=t=>{const s=_2(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:ZO(t)}},jO=(t,s,a)=>{const i=_2(a);return{tag:"div",classes:Dt([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},LF=[Of.parts.items({})],Y1=(t,s,a)=>{const i=_2(a);return{dom:{tag:"div",classes:Dt([[i.tieredMenu]])},markers:rm(a)}},GO=q([Do("type","text"),En("data"),se("inputAttributes",{}),se("inputStyles",{}),se("tag","input"),se("inputClasses",[]),an("onSetValue"),Ln("fromInputValue",$t),Ln("toInputValue",$t),se("styles",{}),se("eventOrder",{}),Ws("inputBehaviours",[We,Ct]),se("selectOnFocus",!0)]),qO=t=>_e([Ct.config({onFocus:t.selectOnFocus?s=>{const a=s.element,i=vi(a);t.type!=="range"&&a.dom.setSelectionRange(0,i.length)}:re})]),IF=t=>({...qO(t),...Ho(t.inputBehaviours,[We.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>t.fromInputValue(vi(s.element)),setValue:(s,a)=>{vi(s.element)!==a&&mf(s.element,t.toInputValue(a))}},onSetValue:t.onSetValue})])}),KO=t=>({tag:t.tag,attributes:{type:t.type,...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),YO=(t,s)=>({uid:t.uid,dom:KO(t),components:[],behaviours:IF(t),eventOrder:t.eventOrder}),_i=gc({name:"Input",configFields:GO(),factory:YO}),c4=Xe("refetch-trigger-event"),XO=Xe("redirect-menu-item-interaction"),JO="tox-menu__searcher",A2=t=>fo(t.element,`.${JO}`).bind(s=>t.getSystem().getByDom(s).toOptional()),QO=A2,FF=(t,s)=>{We.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},X1=t=>{const s=We.getValue(t),a=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},$F=(t,s)=>{gn(s.element,"id").each(a=>Ve(t.element,"aria-activedescendant",a))},eD=t=>{const s=(u,m)=>(m.cut(),S.none()),a=(u,m)=>{const f={interactionEvent:m.event,eventType:m.event.raw.type};return st(u,XO,f),S.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[Dh]},components:[_i.sketch({inputClasses:[JO,"tox-textfield"],inputAttributes:{...t.placeholder.map(u=>({placeholder:t.i18n(u)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:_e([Rt(i,[be(hi(),u=>{Qt(u,c4)}),be(Lc(),(u,m)=>{m.event.raw.key==="Escape"&&m.stop()})]),it.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,it.name()]}})]}},O2="tox-collection--results__js",i4=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Xe("aria-item-search-result-id"),"aria-selected":"false"}}}:t},D2=(t,s)=>a=>{const i=_c(a,s);return we(i,u=>({dom:t,components:u}))},HF=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Of.parts.items({preprocess:t!=="auto"?D2({tag:"div",classes:["tox-swatches__row"]},t):$t})]}]}),tD=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Of.parts.items({preprocess:D2({tag:"div",classes:["tox-collection__group"]},t)})]}),l4=(t,s)=>{const a=[];let i=[];return Ue(t,(u,m)=>{s(u,m)?(i.length>0&&a.push(i),i=[],(sn(u.dom,"innerHtml")||u.components&&u.components.length>0)&&i.push(u)):i.push(u)}),i.length>0&&a.push(i),we(a,u=>({dom:{tag:"div",classes:["tox-collection__group"]},components:u}))},M2=(t,s,a)=>Of.parts.items({preprocess:i=>{const u=we(i,a);return t!=="auto"&&t>1?D2({tag:"div",classes:["tox-collection__group"]},t)(u):l4(u,(m,f)=>s[f].type==="separator")}}),u4=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[M2(t,s,$t)]}),VF=(t,s,a=!0)=>{const i=Xe("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",O2].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[M2(t,s,i4)]}},zF=(t,s,a)=>{const i=Xe("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[eD({i18n:Zc.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],O2],attributes:{id:i}},components:[M2(t,s,i4)]}]}},UF=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Of.parts.items({preprocess:a=>l4(a,(i,u)=>t[u].type==="separator")})]}),R2=t=>as(t,s=>"icon"in s&&s.icon!==void 0),su=t=>(console.error(Pg(t)),console.log(t),S.none()),nD=(t,s,a,i,u)=>{const m=UF(a);return{value:t,dom:m.dom,components:m.components,items:a}},d4=(t,s,a,i,u)=>{const m=()=>u.menuType!=="searchable"?u4(i,a):u.searchMode.searchMode==="search-with-field"?zF(i,a,u.searchMode):VF(i,a);if(u.menuType==="color"){const f=HF(i);return{value:t,dom:f.dom,components:f.components,items:a}}else if(u.menuType==="normal"&&i==="auto"){const f=u4(i,a);return{value:t,dom:f.dom,components:f.components,items:a}}else if(u.menuType==="normal"||u.menuType==="searchable"){const f=m();return{value:t,dom:f.dom,components:f.components,items:a}}else if(u.menuType==="listpreview"&&i!=="auto"){const f=tD(i);return{value:t,dom:f.dom,components:f.components,items:a}}else return{value:t,dom:jO(s,i,u.menuType),components:LF,items:a}},zo=$s("type"),m4=$s("name"),f4=$s("label"),Ku=$s("text"),oD=$s("title"),sD=$s("icon"),J1=$s("value"),g4=gi("fetch"),rD=gi("getSubmenuItems"),Mh=gi("onAction"),ZF=gi("onItemAction"),am=Ln("onSetup",()=>re),WF=Ko("name"),cm=Ko("text"),aD=Ko("role"),bc=Ko("icon"),Rh=Ko("tooltip"),h4=Ko("label"),p4=Ko("shortcut"),jF=Rd("select"),Q1=ur("active",!1),b4=ur("borderless",!1),Ai=ur("enabled",!0),N2=ur("primary",!1),cD=t=>se("columns",t),v4=se("meta",{}),y4=Ln("onAction",re),Nh=t=>Do("type",t),P2=t=>Fs("name","name",Og(()=>Xe(`${t}-name`)),Ze),iD=t=>Fs("value","value",Og(()=>Xe(`${t}-value`)),mi()),lD=Et([zo,cm]),GF=t=>ko("separatormenuitem",lD,t),qF=Et([Nh("autocompleteitem"),Q1,Ai,v4,J1,cm,bc]),Ha=t=>ko("Autocompleter.Separator",lD,t),Oi=t=>ko("Autocompleter.Item",qF,t),Ph=[Ai,Rh,bc,cm,am,Do("context","mode:design")],C4=Et([zo,Mh,p4].concat(Ph)),B2=t=>ko("toolbarbutton",C4,t),Bh=[Q1].concat(Ph),uD=Et(Bh.concat([zo,Mh,p4])),Lh=t=>ko("ToggleButton",uD,t),Pf=[Ln("predicate",Sn),Vr("scope","node",["node","editor"]),Vr("position","selection",["node","selection","line"])],S4=Ph.concat([Nh("contextformbutton"),Do("align","end"),N2,Mh,An("original",$t)]),dD=Bh.concat([Nh("contextformbutton"),Do("align","end"),N2,Mh,An("original",$t)]),e0=Ph.concat([Nh("contextformbutton")]),KF=Bh.concat([Nh("contextformtogglebutton")]),YF=Ts("type",{contextformbutton:S4,contextformtogglebutton:dD}),Wc=[h4,Na("commands",YF),zl("launch",Ts("type",{contextformbutton:e0,contextformtogglebutton:KF})),Ln("onInput",re),Ln("onSetup",re)],Va=[...Pf,...Wc,er("type",["contextform"]),Ln("initValue",q("")),Ko("placeholder")],t0=[...Pf,...Wc,er("type",["contextsliderform"]),Ln("initValue",q(0)),Ln("min",q(0)),Ln("max",q(100))],jc=[...Pf,...Wc,er("type",["contextsizeinputform"]),Ln("initValue",q({width:"",height:""}))],XF=Ts("type",{contextform:Va,contextsliderform:t0,contextsizeinputform:jc}),jn=t=>ko("ContextForm",XF,t),JF=Et([Nh("contexttoolbar"),Tn("items",pb([Ze,bb([Ko("name"),Ko("label"),Na("items",Ze)])]))].concat(Pf)),Bf=t=>({name:t.name.getOrUndefined(),label:t.label.getOrUndefined(),items:t.items}),n0=t=>({...t,items:on(t.items)?t.items:we(t.items,Bf)}),mD=t=>ko("ContextToolbar",JF,t),x4=[zo,$s("src"),Ko("alt"),Nd("classes",[],Ze)],w4=Et(x4),QF=[zo,Ku,WF,Nd("classes",["tox-collection__item-label"],Ze)],E4=Et(QF),fD=ks(()=>Ng("type",{cardimage:w4,cardtext:E4,cardcontainer:gD})),gD=Et([zo,Do("direction","horizontal"),Do("align","left"),Do("valign","middle"),Na("items",fD)]),Lf=[Ai,cm,aD,p4,iD("menuitem"),v4,Do("context","mode:design")],k4=Et([zo,h4,Na("items",fD),am,y4].concat(Lf)),hD=t=>ko("cardmenuitem",k4,t),L2=Et([zo,Q1,bc].concat(Lf)),e$=t=>ko("choicemenuitem",L2,t),pD=[zo,$s("fancytype"),y4],t$=[se("initData",{})].concat(pD),n$=[Rd("select"),hS("initData",{},[ur("allowCustomColors",!0),Do("storageKey","default"),Sb("colors",mi())])].concat(pD),o$=Ts("fancytype",{inserttable:t$,colorswatch:n$}),bD=t=>ko("fancymenuitem",o$,t),s$=Et([zo,am,y4,bc].concat(Lf)),r$=t=>ko("menuitem",s$,t),vD=Et([zo,rD,am,bc].concat(Lf)),a$=t=>ko("nestedmenuitem",vD,t),yD=Et([zo,bc,Q1,am,Mh].concat(Lf)),o0=t=>ko("togglemenuitem",yD,t),T4=(t,s,a)=>{const i=oa(t.element,"."+a);if(i.length>0){const u=kn(i,m=>{const f=m.dom.getBoundingClientRect().top,h=i[0].dom.getBoundingClientRect().top;return Math.abs(f-h)>s}).getOr(i.length);return S.some({numColumns:u,numRows:Math.ceil(i.length/u)})}else return S.none()},CD=(t,s)=>_e([Rt(t,s)]),If={namedEvents:CD,unnamedEvents:t=>CD(Xe("unnamed-events"),t)},SD=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Gc={item:t=>rt.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>rt.config({disabled:t}),splitButton:t=>rt.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>rt.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},I2=(t,s)=>{const a=t.getApi(s);return i=>{i(a)}},Di=(t,s)=>co(a=>{Ms(t.onBeforeSetup)&&t.onBeforeSetup(a),I2(t,a)(u=>{const m=t.onSetup(u);Ms(m)&&s.set(m)})}),js=(t,s)=>jl(a=>I2(t,a)(s.get())),xD="silver.uistate",Ff="setDisabled",wD="setEnabled",_4="init",ED=["switchmode",_4],Ih=(t,s)=>{const a=t.mainUi.outerContainer,i=[t.mainUi.mothership,...t.uiMotherships];s===Ff&&Ue(i,u=>{u.broadcastOn([Wd()],{target:a.element})}),Ue(i,u=>{u.broadcastOn([xD],s)})},A4=(t,s)=>{t.on("init SwitchMode",a=>{Ih(s,a.type)}),t.on("DisabledStateChange",a=>{if(!a.isDefaultPrevented()){const i=a.state?Ff:_4;Ih(s,i),a.state||t.nodeChanged()}}),t.on("NodeChange",a=>{const i=t.ui.isEnabled()?a.type:Ff;Ih(s,i)}),Ew(t)&&t.mode.set("readonly")},Uo=t=>Ba.config({channels:{[xD]:{onReceive:(s,a)=>{if(a===Ff||a===wD){rt.set(s,a===Ff);return}const{contextType:i,shouldDisable:u}=t();i==="mode"&&!wn(ED,a)||rt.set(s,u)}}}}),i$=(t,s)=>Bu((a,i)=>{I2(t,a)(t.onAction),!t.triggersSubmenu&&s===Ti.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&Qt(a,Vs()),i.stop())}),l$={[ba()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Fh=Oa,$h=(t,s,a,i)=>{const u=at(re);return{type:"item",dom:s.dom,components:Fh(s.optComponents),data:t.data,eventOrder:l$,hasSubmenu:t.triggersSubmenu,itemBehaviours:_e([Rt("item-events",[i$(t,a),Di(t,u),js(t,u)]),Gc.item(()=>!t.enabled||i.checkUiComponentContext(t.context).shouldDisable),Uo(()=>i.checkUiComponentContext(t.context)),_t.config({})].concat(t.itemBehaviours))}},Hh=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),O4=t=>{const s=Qd.os.isMacOS()||Qd.os.isiOS(),u=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},m=t.split("+"),f=we(m,h=>{const b=h.toLowerCase().trim();return sn(u,b)?u[b]:h});return s?f.join(""):f.join("+")},F2=(t,s,a=[E2])=>pc(t,{tag:"div",classes:a},s),D4=t=>({dom:{tag:"div",classes:[s4]},components:[lo(Zc.translate(t))]}),M4=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),u$=(t,s)=>({dom:{tag:"div",classes:[s4]},components:[{dom:{tag:t.tag,styles:t.styles},components:[lo(Zc.translate(s))]}]}),d$=t=>({dom:{tag:"div",classes:[FO]},components:[lo(O4(t))]}),kD=t=>F2("checkmark",t,[Rf]),Vh=t=>F2("chevron-right",t,[r4]),m$=t=>F2("chevron-down",t,[r4]),TD=(t,s)=>{const a=t.direction==="vertical"?T2:$O,i=t.align==="left"?VO:HO;return{dom:{tag:"div",classes:[k2,a,i,(()=>{switch(t.valign){case"top":return zO;case"middle":return a4;case"bottom":return UO}})()]},components:s}},_D=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),AD=(t,s,a)=>{const i="custom",u="remove",m=t.value,f=t.iconContent.map(C=>q1(C,s.icons,a)),h=t.ariaLabel.map(C=>({"aria-label":s.translate(C),"data-mce-name":C})).getOr({});return{dom:(()=>{const C=w2,x=f.getOr(""),k={tag:"div",attributes:h,classes:[C]};return m===i?{...k,tag:"button",classes:[...k.classes,"tox-swatches__picker-btn"],innerHtml:x}:m===u?{...k,classes:[...k.classes,"tox-swatch--remove"],innerHtml:x}:so(m)?{...k,attributes:{...k.attributes,"data-mce-color":m},styles:{"background-color":m},innerHtml:x}:k})(),optComponents:[]}},R4=t=>{const s=t.map(a=>({attributes:{id:Xe("menu-item"),"aria-label":Zc.translate(a)}})).getOr({});return{tag:"div",classes:[K1,Dh],...s}},N4=(t,s,a,i)=>{const u={tag:"div",classes:[E2]},m=A=>pc(A,u,s.icons,i),f=()=>S.some({dom:u}),h=a?t.iconContent.map(m).orThunk(f):S.none(),b=t.checkMark,C=S.from(t.meta).fold(()=>D4,A=>sn(A,"style")?dn(u$,A.style):D4),x=t.htmlContent.fold(()=>t.textContent.map(C),A=>S.some(M4(A,[s4])));return{dom:R4(t.ariaLabel),optComponents:[h,x,t.shortcutContent.map(d$),b,t.caret]}},$f=(t,s,a,i=S.none())=>t.presets==="color"?AD(t,s,i):N4(t,s,a,i),$2=(t,s,a)=>He(t,"tooltipWorker").map(i=>[So.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:u=>({type:"submenu",item:u,overrides:{maxHeightFunction:rh}}),mode:"follow-highlight",onShow:(u,m)=>{i(f=>{So.setComponents(u,[IS({element:Be.fromDom(f)})])})}})]).getOrThunk(()=>a.map(i=>[So.config({...s.providers.tooltips.getConfig({tooltipText:i}),mode:"follow-highlight"})]).getOr([])),OD=t=>R1.DOM.encode(t),DD=(t,s)=>{const a=Zc.translate(t),i=OD(a);if(s.length>0){const u=new RegExp(SD(s),"gi");return i.replace(u,m=>`<span class="tox-autocompleter-highlight">${m}</span>`)}else return i},MD=(t,s,a,i,u,m,f,h=!0)=>{const b=$f({presets:i,textContent:S.none(),htmlContent:a?t.text.map(x=>DD(x,s)):S.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:S.none(),checkMark:S.none(),caret:S.none(),value:t.value},f.providers,h,t.icon),C=t.text.filter(x=>!a&&x!=="");return $h({context:"mode:design",data:Hh(t),enabled:t.enabled,getApi:q({}),onAction:x=>u(t.value,t.meta),onSetup:q(re),triggersSubmenu:!1,itemBehaviours:$2(t,f,C)},b,m,f.providers)},RD=(t,s)=>we(t,a=>{switch(a.type){case"cardcontainer":return TD(a,RD(a.items,s));case"cardimage":return _D(a.src,a.classes,a.alt);case"cardtext":const u=a.name.exists(m=>wn(s.cardText.highlightOn,m))?S.from(s.cardText.matchText).getOr(""):"";return M4(DD(a.text,u),a.classes)}}),f$=(t,s,a,i)=>{const u=f=>({isEnabled:()=>!rt.isDisabled(f),setEnabled:h=>{rt.set(f,!h),Ue(oa(f.element,"*"),b=>{f.getSystem().getByDom(b).each(C=>{C.hasConfigured(rt)&&rt.set(C,!h)})})}}),m={dom:R4(t.label),optComponents:[S.some({dom:{tag:"div",classes:[k2,$O]},components:RD(t.items,i)})]};return $h({context:"mode:design",data:Hh({text:S.none(),...t}),enabled:t.enabled,getApi:u,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:S.from(i.itemBehaviours).getOr([])},m,s,a.providers)},g$=(t,s,a,i,u,m,f,h=!0)=>{const b=k=>({setActive:A=>{Gt.set(k,A)},isActive:()=>Gt.isOn(k),isEnabled:()=>!rt.isDisabled(k),setEnabled:A=>rt.set(k,!A)}),C=$f({presets:a,textContent:s?t.text:S.none(),htmlContent:S.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:S.none(),checkMark:s?S.some(kD(f.icons)):S.none(),caret:S.none(),value:t.value},f,h),x=t.text.filter(q(!s)).map(k=>So.config(f.tooltips.getConfig({tooltipText:f.translate(k)})));return Co($h({context:t.context,data:Hh(t),enabled:t.enabled,getApi:b,onAction:k=>i(t.value),onSetup:k=>(k.setActive(u),re),triggersSubmenu:!1,itemBehaviours:[...x.toArray()]},C,m,f),{toggling:{toggleClass:o4,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},P4=Ix(Cw(),Sw()),B4=t=>({value:BD(t)}),L4=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,ND=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,PD=t=>L4.test(t)||ND.test(t),BD=t=>id(t,"#").toUpperCase(),h$=t=>PD(t)?S.some({value:BD(t)}):S.none(),p$=t=>({value:t.value.replace(L4,(a,i,u,m)=>i+i+u+u+m+m)}),b$=t=>{const s=p$(t),a=ND.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},I4=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},s0=t=>{const s=I4(t.red)+I4(t.green)+I4(t.blue);return B4(s)},LD=Math.min,ID=Math.max,H2=Math.round,FD=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,v$=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Hf=(t,s,a,i)=>({red:t,green:s,blue:a,alpha:i}),F4=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},$D=t=>{let s,a,i;const u=(t.hue||0)%360;let m=t.saturation/100,f=t.value/100;if(m=ID(0,LD(m,1)),f=ID(0,LD(f,1)),m===0)return s=a=i=H2(255*f),Hf(s,a,i,1);const h=u/60,b=f*m,C=b*(1-Math.abs(h%2-1)),x=f-b;switch(Math.floor(h)){case 0:s=b,a=C,i=0;break;case 1:s=C,a=b,i=0;break;case 2:s=0,a=b,i=C;break;case 3:s=0,a=C,i=b;break;case 4:s=C,a=0,i=b;break;case 5:s=b,a=0,i=C;break;default:s=a=i=0}return s=H2(255*(s+x)),a=H2(255*(a+x)),i=H2(255*(i+x)),Hf(s,a,i,1)},r0=t=>{const s=b$(t),a=parseInt(s[1],16),i=parseInt(s[2],16),u=parseInt(s[3],16);return Hf(a,i,u,1)},a0=(t,s,a,i)=>{const u=parseInt(t,10),m=parseInt(s,10),f=parseInt(a,10),h=parseFloat(i);return Hf(u,m,f,h)},V2=t=>{const s=FD.exec(t);if(s!==null)return S.some(a0(s[1],s[2],s[3],"1"));const a=v$.exec(t);return a!==null?S.some(a0(a[1],a[2],a[3],a[4])):S.none()},HD=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,VD=Hf(255,0,0,1),y$=t=>{t.dispatch("SkinLoaded")},C$=(t,s)=>{t.dispatch("SkinLoadError",s)},S$=t=>{t.dispatch("ResizeEditor")},$4=(t,s)=>{t.dispatch("ResizeContent",s)},H4=(t,s)=>{t.dispatch("ScrollContent",s)},V4=(t,s)=>{t.dispatch("TextColorChange",s)},zD=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},x$=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),UD=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},w$=(t,s)=>{t.dispatch("StylesTextUpdate",s)},E$=(t,s)=>{t.dispatch("AlignTextUpdate",s)},k$=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},T$=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},_$=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},A$=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},O$=t=>{t.dispatch("ToggleSidebar")},D$=t=>{t.dispatch("ToggleView")},ZD=t=>{t.dispatch("ContextToolbarClose")},M$=t=>{t.dispatch("ContextFormSlideBack")},Vf=(t,s)=>()=>{t(),s()},vr=t=>zf(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),z4=(t,s)=>a=>{const i=Ad(),u=()=>{a.setActive(t.formatter.match(s));const m=t.formatter.formatChanged(s,a.setActive);i.set(m)};return t.initialized?u():t.once("init",u),()=>{t.off("init",u),i.clear()}},c0=(t,s)=>a=>{const i=vr(t)(a),u=z4(t,s)(a);return()=>{i(),u()}},zf=(t,s,a)=>i=>{const u=()=>a(i),m=()=>{a(i),t.on(s,u)};return t.initialized?m():t.once("init",m),()=>{t.off("init",m),t.off(s,u)}},WD=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},ra=(t,s)=>()=>t.execCommand(s);var Yu=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const i0={},jD=(t,s=10)=>{const a=Yu.getItem(t),i=on(a)?JSON.parse(a):[],m=(C=>s-C.length<0?C.slice(0,s):C)(i),f=C=>{Ye(m,C).each(h),m.unshift(C),m.length>s&&m.pop(),Yu.setItem(t,JSON.stringify(m))},h=C=>{m.splice(C,1)};return{add:f,state:()=>m.slice(0)}},GD=t=>He(i0,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=Yu.getItem(s);if(ni(a)){const u=Yu.getItem("tinymce-custom-colors");Yu.setItem(s,so(u)?u:"[]")}const i=jD(s,10);return i0[t]=i,i}),R$=t=>we(GD(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),qD=(t,s)=>{GD(t).add(s)},l0=(t,s,a)=>({hue:t,saturation:s,value:a}),U4=t=>{let s=0,a=0,i=0;const u=t.red/255,m=t.green/255,f=t.blue/255,h=Math.min(u,Math.min(m,f)),b=Math.max(u,Math.max(m,f));if(h===b)return i=h,l0(0,0,i*100);const C=u===h?m-f:f===h?u-m:f-u;return s=u===h?3:f===h?1:5,s=60*(s-C/(b-h)),a=(b-h)/b,i=b,l0(Math.round(s),Math.round(a*100),Math.round(i*100))},N$=t=>U4(r0(t)),KD=t=>s0($D(t)),P$=t=>h$(t).orThunk(()=>V2(t).map(s0)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,u=i[0],m=i[1],f=i[2],h=i[3];return s0(Hf(u,m,f,h))}),Z4="forecolor",W4="hilitecolor",B$=5,L$=t=>YD(t.map((s,a)=>a%2===0?"#"+P$(s).value:s)),YD=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:t[a],icon:"checkmark",type:"choiceitem"});return s},Mi=t=>s=>s.options.get(t),j4="#000000",I$=t=>{const s=t.options.register,a=m=>xt(m,on)?{value:L$(m),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=m=>xt(m,on)?{value:YD(m),valid:!0}:{valid:!1,message:"Must be an array of strings."},u=m=>qs(m)&&m>0?{value:m,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:i}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:u,default:G4(t)}),s("color_cols_foreground",{processor:u,default:XD(t,Z4)}),s("color_cols_background",{processor:u,default:XD(t,W4)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:j4}),s("color_default_background",{processor:"string",default:j4})},qc=(t,s)=>s===Z4&&t.options.isSet("color_map_foreground")?Mi("color_map_foreground")(t):s===W4&&t.options.isSet("color_map_background")?Mi("color_map_background")(t):t.options.isSet("color_map_raw")?Mi("color_map_raw")(t):Mi("color_map")(t),G4=(t,s="default")=>Math.max(B$,Math.ceil(Math.sqrt(qc(t,s).length))),XD=(t,s)=>{const a=Mi("color_cols")(t),i=G4(t,s);return a===G4(t)?i:a},z2=(t,s="default")=>Math.round(s===Z4?Mi("color_cols_foreground")(t):s===W4?Mi("color_cols_background")(t):Mi("color_cols")(t)),vs=Mi("custom_colors"),F$=Mi("color_default_foreground"),$$=Mi("color_default_background"),H$="rgba(0, 0, 0, 0)",V$=t=>V2(t).exists(s=>s.alpha!==0),z$=t=>Ig(t,s=>{if(Go(s)){const a=Ee(s,"background-color");return ht(V$(a),a)}else return S.none()}).getOr(H$),JD=(t,s)=>{const a=Be.fromDom(t.selection.getStart()),i=s==="hilitecolor"?z$(a):Ee(a,"color");return V2(i).map(u=>"#"+s0(u).value)},U$=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},Z$=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},W$=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{U$(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{Z$(t,s)})},QD=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},q4=(t,s,a,i)=>{a==="custom"?rM(t)(m=>{m.each(f=>{qD(s,f),t.execCommand("mceApplyTextcolor",s,f),i(f)})},JD(t,s).getOr(j4)):a==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(a),t.execCommand("mceApplyTextcolor",s,a))},K4=(t,s,a)=>t.concat(R$(s).concat(QD(a))),eM=(t,s,a)=>i=>{i(K4(t,s,a))},Y4=(t,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,a)},tM=(t,s)=>{t.setTooltip(s)},nM=(t,s)=>a=>{const i=JD(t,s);return Ps(i,a.toUpperCase())},X4=(t,s,a)=>{if(Gi(a))return s==="forecolor"?"Text color":"Background color";const i=s==="forecolor"?"Text color {0}":"Background color {0}",u=K4(qc(t,s),s,!1),m=kt(u,f=>f.value===a).getOr({text:""}).text;return t.translate([i,t.translate(m)])},oM=(t,s,a,i)=>{t.ui.registry.addSplitButton(s,{tooltip:X4(t,a,i.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:nM(t,a),columns:z2(t,a),fetch:eM(qc(t,a),a,vs(t)),onAction:u=>{q4(t,a,i.get(),re)},onItemAction:(u,m)=>{q4(t,a,m,f=>{i.set(f),V4(t,{name:s,color:f})})},onSetup:u=>{Y4(u,s,i.get());const m=f=>{f.name===s&&(Y4(u,f.name,f.color),tM(u,X4(t,a,f.color)))};return t.on("TextColorChange",m),Vf(vr(t)(u),()=>{t.off("TextColorChange",m)})}})},sM=(t,s,a,i,u)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:m=>(tM(m,X4(t,a,u.get())),Y4(m,s,u.get()),vr(t)(m)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:nM(t,a),initData:{storageKey:a},onAction:m=>{q4(t,a,m.value,f=>{u.set(f),V4(t,{name:s,color:f})})}}]})},rM=t=>(s,a)=>{let i=!1;const u=h=>{const C=h.getData().colorpicker;i?(s(S.from(C)),h.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",C]))},m=(h,b)=>{b.name==="hex-valid"&&(i=b.value)},f={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:f,onAction:m,onSubmit:u,onClose:re,onCancel:()=>{s(S.none())}})},j$=t=>{W$(t);const s=F$(t),a=$$(t),i=at(s),u=at(a);oM(t,"forecolor","forecolor",i),oM(t,"backcolor","hilitecolor",u),sM(t,"forecolor","forecolor","Text color",i),sM(t,"backcolor","hilitecolor","Background color",u)},J4=(t,s,a,i,u,m,f,h)=>{const b=R2(s),x=G$(s,a,i,u!=="color"?"normal":"color",m,f,h);return d4(t,b,x,i,{menuType:u})},G$=(t,s,a,i,u,m,f)=>Oa(we(t,h=>h.type==="choiceitem"?e$(h).fold(su,b=>S.some(g$(b,a===1,i,s,m(b.value),u,f,R2(t)))):S.none())),U2=(t,s)=>{const a=rm(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:u=>s==="color"?fo(u.element,"[aria-checked=true]"):S.none()}},q$=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${w2}`:`.${Dh}`}},aM=(t,s)=>{const a=K$(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),u="color",f={...J4(Xe("menu-value"),a,h=>{t.onAction({value:h})},i,u,Ti.CLOSE_ON_EXECUTE,t.select.getOr(Sn),s.shared.providers),markers:rm(u),movement:U2(i,u),showMenuRole:!1};return{type:"widget",data:{value:Xe("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[P4.widget(Of.sketch(f))]}},K$=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>K4(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),i=>i.concat(QD(a)))},Q4=Xe("cell-over"),cM=Xe("cell-execute"),Y$=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),X$=(t,s,a)=>{const i=f=>st(f,Q4,{row:t,col:s}),u=f=>st(f,cM,{row:t,col:s}),m=(f,h)=>{h.stop(),u(f)};return dr({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:_e([Rt("insert-table-picker-cell",[be(Ul(),Ct.focus),be(ba(),u),be(Wm(),m),be(_b(),m)]),Gt.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Ct.config({onFocus:i})])})},iM=(t,s,a)=>{const i=[];for(let u=0;u<s;u++){const m=[];for(let f=0;f<a;f++){const h=t(u+1,f+1);m.push(X$(u,f,h))}i.push(m)}return i},J$=(t,s,a,i,u)=>{for(let m=0;m<i;m++)for(let f=0;f<u;f++)Gt.set(t[m][f],m<=s&&f<=a)},Q$=t=>oe(t,s=>we(s,lc)),lM=(t,s)=>lo(`${s}x${t}`),uM={inserttable:(t,s)=>{const u=Y$(s),m=iM(u,10,10),f=lM(0,0),h=yn({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[f],behaviours:_e([_t.config({})])});return{type:"widget",data:{value:Xe("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[P4.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:Q$(m).concat(h.asSpec()),behaviours:_e([Rt("insert-table-picker",[co(b=>{_t.set(h.get(b),[f])}),Ib(Q4,(b,C,x)=>{const{row:k,col:A}=x.event;J$(m,k,A,10,10),_t.set(h.get(b),[lM(k+1,A+1)])}),Ib(cM,(b,C,x)=>{const{row:k,col:A}=x.event;Qt(b,Vs()),t.onAction({numRows:k+1,numColumns:A+1})})]),it.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:aM},eH=(t,s)=>He(uM,t.fancytype).map(a=>a(t,s)),dM=(t,s,a,i=!0,u=!1)=>{const m=u?m$(a.icons):Vh(a.icons),f=b=>({isEnabled:()=>!rt.isDisabled(b),setEnabled:C=>rt.set(b,!C),setIconFill:(C,x)=>{fo(b.element,`svg path[class="${C}"], rect[class="${C}"]`).each(k=>{Ve(k,"fill",x)})},setTooltip:C=>{const x=a.translate(C);Ve(b.element,"aria-label",x)}}),h=$f({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:S.none(),ariaLabel:t.text,caret:S.some(m),checkMark:S.none(),shortcutContent:t.shortcut},a,i);return $h({context:t.context,data:Hh(t),getApi:f,enabled:t.enabled,onAction:re,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},h,s,a)},tH=(t,s,a,i=!0)=>{const u=f=>({isEnabled:()=>!rt.isDisabled(f),setEnabled:h=>rt.set(f,!h)}),m=$f({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:S.none(),ariaLabel:t.text,caret:S.none(),checkMark:S.none(),shortcutContent:t.shortcut},a,i);return $h({context:t.context,data:Hh(t),getApi:u,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},m,s,a)},mM=t=>({type:"separator",dom:{tag:"div",classes:[Dh,BF]},components:t.text.map(lo).toArray()}),nH=(t,s,a,i=!0)=>{const u=f=>({setActive:h=>{Gt.set(f,h)},isActive:()=>Gt.isOn(f),isEnabled:()=>!rt.isDisabled(f),setEnabled:h=>rt.set(f,!h)}),m=$f({iconContent:t.icon,textContent:t.text,htmlContent:S.none(),ariaLabel:t.text,checkMark:S.some(kD(a.icons)),caret:S.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,i);return Co($h({context:t.context,data:Hh(t),enabled:t.enabled,getApi:u,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},m,s,a),{toggling:{toggleClass:o4,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},oH=MD,fM=mM,sH=tH,rH=dM,aH=nH,cH=eH,iH=f$;var lH=Object.freeze({__proto__:null,getCoupled:(t,s,a,i)=>a.getOrCreate(t,s,i),getExistingCoupled:(t,s,a,i)=>a.getExisting(t,s,i)}),uH=[Tn("others",sl(jt.value,mi()))],gM=Object.freeze({__proto__:null,init:()=>{const t={},s=(m,f)=>{if(ao(m.others).length===0)throw new Error("Cannot find any known coupled components");return He(t,f)},a=(m,f,h)=>s(f,h).getOrThunk(()=>{const C=He(f.others,h).getOrDie("No information found for coupled component: "+h)(m),x=m.getSystem().build(C);return t[h]=x,x}),i=(m,f,h)=>s(f,h).orThunk(()=>(He(f.others,h).getOrDie("No information found for coupled component: "+h),S.none())),u=q({});return zr({readState:u,getExisting:i,getOrCreate:a})}});const Mo=zs({fields:uH,name:"coupling",apis:lH,state:gM}),e3=t=>{let s=S.none(),a=[];const i=C=>e3(x=>{u(k=>{x(C(k))})}),u=C=>{f()?b(C):a.push(C)},m=C=>{f()||(s=S.some(C),h(a),a=[])},f=()=>s.isSome(),h=C=>{Ue(C,b)},b=C=>{s.each(x=>{setTimeout(()=>{C(x)},0)})};return t(m),{get:u,map:i,isReady:f}},dH={nu:e3,pure:t=>e3(s=>{s(t)})},mH=t=>{setTimeout(()=>{throw t},0)},im=t=>{const s=b=>{t().then(b,mH)};return{map:b=>im(()=>t().then(b)),bind:b=>im(()=>t().then(C=>b(C).toPromise())),anonBind:b=>im(()=>t().then(()=>b.toPromise())),toLazy:()=>dH.nu(s),toCached:()=>{let b=null;return im(()=>(b===null&&(b=t()),b))},toPromise:t,get:s}},yr={nu:t=>im(()=>new Promise(t)),pure:t=>im(()=>Promise.resolve(t))},t3=q("sink"),n3=q(va({name:t3(),overrides:q({dom:{tag:"div"},behaviours:_e([hr.config({useFixed:nt})]),events:In([qm(Lc()),qm(ac()),qm(Wm())])})})),hM=(t,s)=>{const a=t.getHotspot(s).getOr(s),i="hotspot",u=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:a,overrides:u}),m=>({type:i,hotspot:a,overrides:u,layouts:m}))},fH=(t,s,a)=>{const i=t.fetch;return i(a).map(s)},pM=(t,s,a,i,u,m,f)=>{const h=fH(t,s,i),b=bM(i,t);return h.map(C=>C.bind(x=>{const k=x.menus[x.primary];return S.from(k).each(A=>{t.listRole.each(N=>{A.role=N})}),S.from(Jd.sketch({...m.menu(),uid:nh(""),data:x,highlightOnOpen:f,onOpenMenu:(A,N)=>{const L=b().getOrDie();hr.position(L,N,{anchor:a}),hn.decloak(u)},onOpenSubmenu:(A,N,L)=>{const F=b().getOrDie();hr.position(F,L,{anchor:{type:"submenu",item:N}}),hn.decloak(u)},onRepositionMenu:(A,N,L)=>{const F=b().getOrDie();hr.position(F,N,{anchor:a}),Ue(L,J=>{hr.position(F,J.triggeredMenu,{anchor:{type:"submenu",item:J.triggeringItem}})})},onEscape:()=>(Ct.focus(i),hn.close(u),S.some(!0))}))}))},Z2=(t,s,a,i,u,m,f)=>{const h=hM(t,a);return pM(t,s,h,a,i,u,f).map(C=>(C.fold(()=>{hn.isOpen(i)&&hn.close(i)},x=>{hn.cloak(i),hn.open(i,x),m(i)}),i))},gH=(t,s,a,i,u,m,f)=>(hn.close(i),yr.pure(i)),o3=(t,s,a,i,u,m)=>{const f=Mo.getCoupled(a,"sandbox");return(hn.isOpen(f)?gH:Z2)(t,s,a,f,i,u,m)},hH=(t,s,a)=>{const i=ln.getCurrent(s).getOr(s),u=Ft(t.element);a?Pt(i.element,"min-width",u+"px"):sb(i.element,u)},bM=(t,s)=>t.getSystem().getByUid(s.uid+"-"+t3()).map(a=>()=>jt.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>jt.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),vM=t=>{hn.getState(t).each(s=>{Jd.repositionMenus(s)})},zh=(t,s,a)=>{const i=d_(),u=(h,b)=>{const C=hM(t,s);i.link(s.element),t.matchWidth&&hH(C.hotspot,b,t.useMinWidth),t.onOpen(C,h,b),a!==void 0&&a.onOpen!==void 0&&a.onOpen(h,b)},m=(h,b)=>{i.unlink(s.element),f().getOr(b).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(h,b)},f=bM(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id}},behaviours:fc.augment(t.sandboxBehaviours,[We.config({store:{mode:"memory",initialValue:s}}),hn.config({onOpen:u,onClose:m,isPartOf:(h,b,C)=>zd(b,C)||zd(s,C),getAttachPoint:()=>f().getOrDie()}),ln.config({find:h=>hn.getState(h).bind(b=>ln.getCurrent(b))}),Ba.config({channels:{...Ia({isExtraPart:Sn}),...lh({doReposition:vM})}})])}},yM=t=>{const s=Mo.getCoupled(t,"sandbox");vM(s)},Uh=()=>[se("sandboxClasses",[]),fc.field("sandboxBehaviours",[ln,Ba,hn,We])],pH=q([ve("dom"),ve("fetch"),an("onOpen"),Zr("onExecute"),se("getHotspot",S.some),se("getAnchorOverrides",q({})),Ud(),Ws("dropdownBehaviours",[Gt,Mo,it,Ct]),ve("toggleClass"),se("eventOrder",{}),En("lazySink"),se("matchWidth",!1),se("useMinWidth",!1),En("role"),En("listRole")].concat(Uh())),bH=q([Hc({schema:[th(),se("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),n3()]),vH=(t,s,a,i)=>{const u=x=>He(t.dom,"attributes").bind(k=>He(k,x)),m=x=>{hn.getState(x).each(k=>{Jd.highlightPrimary(k)})},f=(x,k,A)=>o3(t,$t,x,i,k,A),h=x=>{f(x,m,bs.HighlightMenuAndItem).get(re)},b={expand:x=>{Gt.isOn(x)||f(x,re,bs.HighlightNone).get(re)},open:x=>{Gt.isOn(x)||f(x,re,bs.HighlightMenuAndItem).get(re)},refetch:x=>Mo.getExistingCoupled(x,"sandbox").fold(()=>f(x,re,bs.HighlightMenuAndItem).map(re),A=>Z2(t,$t,x,A,i,re,bs.HighlightMenuAndItem).map(re)),isOpen:Gt.isOn,close:x=>{Gt.isOn(x)&&f(x,re,bs.HighlightMenuAndItem).get(re)},repositionMenus:x=>{Gt.isOn(x)&&yM(x)}},C=(x,k)=>(Ld(x),S.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:Ho(t.dropdownBehaviours,[Gt.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Mo.config({others:{sandbox:x=>zh(t,x,{onOpen:()=>Gt.on(x),onClose:()=>Gt.off(x)})}}),it.config({mode:"special",onSpace:C,onEnter:C,onDown:(x,k)=>{if(vc.isOpen(x)){const A=Mo.getCoupled(x,"sandbox");m(A)}else vc.open(x);return S.some(!0)},onEscape:(x,k)=>vc.isOpen(x)?(vc.close(x),S.some(!0)):S.none()}),Ct.config({})]),events:Eh(S.some(h)),eventOrder:{...t.eventOrder,[ba()]:["disabling","toggling","alloy.base.behaviour"]},apis:b,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),x=>({role:x})),...t.dom.tag==="button"?{type:u("type").getOr("button")}:{}}}}},vc=Kr({name:"Dropdown",configFields:pH(),partFields:bH(),factory:vH,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),$G=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},W2=t=>{const s=We.getValue(t),a=A2(t).map(X1);vc.refetch(s).get(()=>{const i=Mo.getCoupled(s,"sandbox");a.each(u=>A2(i).each(m=>FF(m,u)))})},Zh=(t,s)=>{CM(t).each(a=>{wT(t,a.element,s.event.eventType,s.event.interactionEvent)})},CM=t=>hn.getState(t).bind(bn.getHighlighted).bind(bn.getHighlighted),SM=t=>na(t.element,O2)?S.some(t.element):fo(t.element,"."+O2),xM=(t,s,a)=>{QO(t).each(i=>{$F(i,a),SM(s).each(m=>{gn(m,"id").each(f=>Ve(i.element,"aria-controls",f))})}),Ve(a.element,"aria-selected","true")},yH=(t,s,a)=>{Ve(a.element,"aria-selected","false")},CH=t=>{QO(t).each(s=>Ct.focus(s))},SH=t=>Mo.getExistingCoupled(t,"sandbox").bind(A2).map(X1).map(a=>a.fetchPattern).getOr("");var j2;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(j2||(j2={}));const xH=(t,s,a,i,u)=>{const m=a.shared.providers,f=h=>u?{...h,shortcut:S.none(),icon:h.text.isSome()?S.none():h.icon}:h;switch(t.type){case"menuitem":return r$(t).fold(su,h=>S.some(sH(f(h),s,m,i)));case"nestedmenuitem":return a$(t).fold(su,h=>S.some(rH(f(h),s,m,i,u)));case"togglemenuitem":return o0(t).fold(su,h=>S.some(aH(f(h),s,m,i)));case"separator":return GF(t).fold(su,h=>S.some(fM(h)));case"fancymenuitem":return bD(t).fold(su,h=>cH(h,a));default:return console.error("Unknown item in general menu",t),S.none()}},wH=(t,s,a,i,u,m,f)=>{const h=i===1,b=!h||R2(t);return Oa(we(t,C=>{switch(C.type){case"separator":return Ha(C).fold(su,x=>S.some(fM(x)));case"cardmenuitem":return hD(C).fold(su,x=>S.some(iH({...x,onAction:k=>{x.onAction(k),a(x.value,x.meta)}},u,m,{itemBehaviours:$2(x.meta,m,S.none()),cardText:{matchText:s,highlightOn:f}})));case"autocompleteitem":default:return Oi(C).fold(su,x=>S.some(oH(x,s,h,"normal",a,u,m,b)))}}))},wM=(t,s,a,i,u,m)=>{const f=R2(s),h=Oa(we(s,x=>{const k=N=>u?!sn(N,"text"):f,A=N=>xH(N,a,i,k(N),u);return x.type==="nestedmenuitem"&&x.getSubmenuItems().length<=0?A({...x,enabled:!1}):A(x)})),b=$G(m);return(u?nD:d4)(t,f,h,1,b)},s3=t=>Jd.singleData(t.value,t),EH=(t,s,a,i)=>{const u=U2(s,i),m=rm(i);return{data:s3({...t,movement:u,menuBehaviours:If.unnamedEvents(s!=="auto"?[]:[co((f,h)=>{T4(f,4,m.item).each(({numColumns:b,numRows:C})=>{it.setGridSize(f,C,b)})})])}),menu:{markers:rm(i),fakeFocus:a===j2.ContentFocus}}},kH=t=>n1.create(Be.fromDom(t.startContainer),t.startOffset,Be.fromDom(t.endContainer),t.endOffset),Wh={register:(t,s)=>{const a=Xe("autocompleter"),i=at(!1),u=at(!1),m=Nn(),f=dr(go.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:_e([Rt("dismissAutocompleter",[be(Bd(),()=>k()),be(SS(),($,G)=>{gn(G.event.target,"id").each(Y=>Ve(Be.fromDom(t.getBody()),"aria-activedescendant",Y))})])]),lazySink:s.getSink})),h=()=>go.isOpen(f),b=u.get,C=()=>{if(h()){go.hide(f),t.dom.remove(a,!1);const $=Be.fromDom(t.getBody());gn($,"aria-owns").filter(G=>G===a).each(()=>{Vn($,"aria-owns"),Vn($,"aria-activedescendant")})}},x=()=>go.getContent(f).bind($=>ro($.components(),0)),k=()=>t.execCommand("mceAutocompleterClose"),A=$=>{const G=_o($,Y=>S.from(Y.columns)).getOr(1);return oe($,Y=>{const ce=Y.items;return wH(ce,Y.matchText,(le,Me)=>{const Ge={hide:()=>k(),reload:pe=>{C(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:pe})}};t.execCommand("mceAutocompleterRefreshActiveRange"),m.get().each(pe=>{i.set(!0),Y.onAction(Ge,pe,le,Me),i.set(!1)})},G,Ti.BUBBLE_TO_SANDBOX,s,Y.highlightOn)})},N=($,G)=>{const Y=_o($,ce=>S.from(ce.columns)).getOr(1);go.showMenuAt(f,{anchor:{type:"selection",getSelection:()=>m.get().map(kH),root:Be.fromDom(t.getBody())}},EH(d4("autocompleter-value",!0,G,Y,{menuType:"normal"}),Y,j2.ContentFocus,"normal")),x().each(bn.highlightFirst)},L=$=>{const G=A($);G.length>0?(N($,G),Ve(Be.fromDom(t.getBody()),"aria-owns",a),t.inline||F()):C()},F=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const $=t.getDoc().documentElement,G=t.selection.getNode(),Y=jp(f.element);ii(Y,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${G.offsetTop}px`,left:`${G.offsetLeft}px`}),t.dom.add($,Y.dom),fo(Y,'[role="menu"]').each(ce=>{rn(ce,"position"),rn(ce,"max-height")})};t.on("AutocompleterStart",({lookupData:$})=>{u.set(!0),i.set(!1),L($)}),t.on("AutocompleterUpdate",({lookupData:$})=>L($)),t.on("AutocompleterUpdateActiveRange",({range:$})=>m.set($)),t.on("AutocompleterEnd",()=>{C(),u.set(!1),i.set(!1),m.clear()});const J={cancelIfNecessary:k,isMenuOpen:h,isActive:b,isProcessingAction:i.get,getMenu:x};PF.setup(J,t)}},hl=(t,s,a)=>Yl(t,s,a).isSome(),EM=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...m)=>{a=setTimeout(()=>{t.apply(null,m),a=null},s)}}},r3=5,kM=400,u0=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?S.none():S.some(s.touches[0])},_H=(t,s)=>{const a=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return a>r3||i>r3},d0=t=>{const s=Nn(),a=at(!1),i=EM(C=>{t.triggerEvent(Gm(),C),a.set(!0)},kM),u=C=>(u0(C).each(x=>{i.cancel();const k={x:x.clientX,y:x.clientY,target:C.target};i.schedule(C),a.set(!1),s.set(k)}),S.none()),m=C=>(i.cancel(),u0(C).each(x=>{s.on(k=>{_H(x,k)&&s.clear()})}),S.none()),f=C=>{i.cancel();const x=k=>Dn(k.target,C.target);return s.get().filter(x).map(k=>a.get()?(C.prevent(),!1):t.triggerEvent(_b(),C))},h=Lg([{key:Nu(),value:u},{key:$g(),value:m},{key:Hg(),value:f}]);return{fireIfReady:(C,x)=>He(h,x).bind(k=>k(C))}},m0=t=>t.raw.which===eI[0]&&!wn(["input","textarea"],Qn(t.target))&&!hl(t.target,'[contenteditable="true"]'),AH=(t,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],u=d0(a),m=we(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),N=>jr(t,N,L=>{u.fireIfReady(L,N).each(J=>{J&&L.kill()}),a.triggerEvent(N,L)&&L.kill()})),f=Nn(),h=jr(t,"paste",N=>{u.fireIfReady(N,"paste").each(F=>{F&&N.kill()}),a.triggerEvent("paste",N)&&N.kill(),f.set(setTimeout(()=>{a.triggerEvent(CS(),N)},0))}),b=jr(t,"keydown",N=>{a.triggerEvent("keydown",N)?N.kill():a.stopBackspace&&m0(N)&&N.prevent()}),C=jr(t,"focusin",N=>{a.triggerEvent("focusin",N)&&N.kill()}),x=Nn(),k=jr(t,"focusout",N=>{a.triggerEvent("focusout",N)&&N.kill(),x.set(setTimeout(()=>{a.triggerEvent(Vg(),N)},0))});return{unbind:()=>{Ue(m,N=>{N.unbind()}),b.unbind(),C.unbind(),k.unbind(),h.unbind(),f.on(clearTimeout),x.on(clearTimeout)}}},TM=(t,s)=>{const a=He(t,"target").getOr(s);return at(a)},OH=(t,s)=>{const a=at(!1),i=at(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},DH=t=>{const s=at(!1);return{stop:()=>{s.set(!0)},cut:re,isStopped:s.get,isCut:Sn,event:t,setSource:Ht("Cannot set source of a broadcasted event"),getSource:Ht("Cannot get source of a broadcasted event")}},f0=Pa.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),_M=(t,s,a,i,u,m)=>{const f=t(s,i),h=OH(a,u);return f.fold(()=>(m.logEventNoHandlers(s,i),f0.complete()),b=>{const C=b.descHandler;return lf(C)(h),h.isStopped()?(m.logEventStopped(s,b.element,C.purpose),f0.stopped()):h.isCut()?(m.logEventCut(s,b.element,C.purpose),f0.complete()):lr(b.element).fold(()=>(m.logNoParent(s,b.element,C.purpose),f0.complete()),k=>(m.logEventResponse(s,b.element,C.purpose),f0.resume(k)))})},g0=(t,s,a,i,u,m)=>_M(t,s,a,i,u,m).fold(nt,f=>g0(t,s,a,f,u,m),Sn),MH=(t,s,a,i,u)=>{const m=TM(a,i);return _M(t,s,a,i,m,u)},a3=(t,s,a)=>{const i=DH(s);return Ue(t,u=>{const m=u.descHandler;lf(m)(i)}),i.isStopped()},RH=(t,s,a,i)=>AM(t,s,a,a.target,i),AM=(t,s,a,i,u)=>{const m=TM(a,i);return g0(t,s,a,i,m,u)},OM=(t,s)=>({element:t,descHandler:s}),DM=(t,s)=>({id:t,descHandler:s}),MM=()=>{const t={},s=(f,h,b)=>{Ao(b,(C,x)=>{const k=t[x]!==void 0?t[x]:{};k[h]=JP(C,f),t[x]=k})},a=(f,h)=>Kp(h).bind(b=>He(f,b)).map(b=>OM(h,b));return{registerId:s,unregisterId:f=>{Ao(t,(h,b)=>{sn(h,f)&&delete h[f]})},filterByType:f=>He(t,f).map(h=>ai(h,(b,C)=>DM(C,b))).getOr([]),find:(f,h,b)=>He(t,h).bind(C=>Ig(b,x=>a(C,x),f))}},Xu=()=>{const t=MM(),s={},a=C=>{const x=C.element;return Kp(x).getOrThunk(()=>qT("uid-",C.element))},i=(C,x)=>{const k=s[x];if(k===C)m(C);else throw new Error('The tagId "'+x+'" is already used by: '+$d(k.element)+`
Cannot use it for: `+$d(C.element)+`
The conflicting element is`+(K(k.element)?" ":" not ")+"already in the DOM")},u=C=>{const x=a(C);_r(s,x)&&i(C,x);const k=[C];t.registerId(k,x,C.events),s[x]=C},m=C=>{Kp(C.element).each(x=>{delete s[x],t.unregisterId(x)})};return{find:(C,x,k)=>t.find(C,x,k),filter:C=>t.filterByType(C),register:u,unregister:m,getById:C=>He(s,C)}},pl=gc({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:m1(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[se("components",[]),Ws("containerBehaviours",[]),se("events",{}),se("domModification",{}),se("eventOrder",{})]}),c3=t=>{const s=$=>lr(t.element).fold(nt,G=>Dn($,G)),a=Xu(),i=($,G)=>a.find(s,$,G),u=AH(t.element,{triggerEvent:($,G)=>OS($,G.target,Y=>RH(i,$,G,Y))}),m={debugInfo:q("real"),triggerEvent:($,G,Y)=>{OS($,G,ce=>AM(i,$,Y,G,ce))},triggerFocus:($,G)=>{Kp($).fold(()=>{La($)},Y=>{OS(Zl(),$,ce=>(MH(i,Zl(),{originator:G,kill:re,prevent:re,target:$},$,ce),!1))})},triggerEscape:($,G)=>{m.triggerEvent("keydown",$.element,G.event)},getByUid:$=>F($),getByDom:$=>J($),build:dr,buildOrPatch:FS,addToGui:$=>{b($)},removeFromGui:$=>{C($)},addToWorld:$=>{f($)},removeFromWorld:$=>{h($)},broadcast:$=>{A($)},broadcastOn:($,G)=>{N($,G)},broadcastEvent:($,G)=>{L($,G)},isConnected:nt},f=$=>{$.connect(m),us($.element)||(a.register($),Ue($.components(),f),m.triggerEvent(Ob(),$.element,{target:$.element}))},h=$=>{us($.element)||(Ue($.components(),h),a.unregister($)),$.disconnect()},b=$=>{bf(t,$)},C=$=>{tu($)},x=()=>{u.unbind(),Nc(t.element)},k=$=>{const G=a.filter(Pd());Ue(G,Y=>{const ce=Y.descHandler;lf(ce)($)})},A=$=>{k({universal:!0,data:$})},N=($,G)=>{k({universal:!1,channels:$,data:G})},L=($,G)=>{const Y=a.filter($);return a3(Y,G)},F=$=>a.getById($).fold(()=>jt.error(new Error('Could not find component with uid: "'+$+'" in system.')),jt.value),J=$=>{const G=Kp($).getOr("not found");return F(G)};return f(t),{root:t,element:t.element,destroy:x,add:b,remove:C,getByUid:F,getByDom:J,addToWorld:f,removeFromWorld:h,broadcast:A,broadcastOn:N,broadcastEvent:L}},RM=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:we(t.items,s.interpreter)}),NH=q([se("prefix","form-field"),Ws("fieldBehaviours",[ln,We])]),NM=q([va({schema:[ve("dom")],name:"label"}),va({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[ve("text")],name:"aria-descriptor"}),pr({factory:{sketch:t=>{const s=gT(t,["factory"]);return t.factory.sketch(s)}},schema:[ve("factory")],name:"field"})]),PH=(t,s,a,i)=>{const u=Ho(t.fieldBehaviours,[ln.config({find:h=>zn(h,t,"field")}),We.config({store:{mode:"manual",getValue:h=>ln.getCurrent(h).bind(We.getValue),setValue:(h,b)=>{ln.getCurrent(h).each(C=>{We.setValue(C,b)})}}})]),m=In([co((h,b)=>{const C=Vx(h,t,["label","field","aria-descriptor"]);C.field().each(x=>{const k=Xe(t.prefix);C.label().each(A=>{Ve(A.element,"for",k),Ve(x.element,"id",k)}),C["aria-descriptor"]().each(A=>{const N=Xe(t.prefix);Ve(A.element,"id",N),Ve(x.element,"aria-describedby",N)})})})]),f={getField:h=>zn(h,t,"field"),getLabel:h=>zn(h,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:u,events:m,apis:f}},un=Kr({name:"FormField",configFields:NH(),partFields:NM(),factory:PH,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var BH=tinymce.util.Tools.resolve("tinymce.html.Entities");const h0=(t,s,a,i)=>{const u=IH(t,s,a,i);return un.sketch(u)},LH=(t,s)=>h0(t,s,[],[]),IH=(t,s,a,i)=>({dom:PM(a),components:t.toArray().concat([s]),fieldBehaviours:_e(i)}),FH=()=>PM([]),PM=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),ru=(t,s)=>un.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[lo(s.translate(t))]}),ya=Xe("form-component-change"),BM=Xe("form-component-input"),p0=Xe("form-close"),Ju=Xe("form-cancel"),au=Xe("form-action"),b0=Xe("form-submit"),i3=Xe("form-block"),G2=Xe("form-unblock"),LM=Xe("form-tabchange"),IM=Xe("form-resize"),$H=(t,s,a)=>{const i=t.label.map(N=>ru(N,s)),u=s.icons(),m=N=>{var L;return(L=u[N])!==null&&L!==void 0?L:N},f=N=>(L,F)=>{Yl(F.event.target,"[data-collection-item-value]").each(J=>{N(L,F,J,Vt(J,"data-collection-item-value"))})},h=(N,L)=>{const J=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",$=we(L,ce=>{const le=Zc.translate(ce.text),Me=t.columns===1?`<div class="tox-collection__item-label">${le}</div>`:"",Ge=`<div class="tox-collection__item-icon">${m(ce.icon)}</div>`,pe={_:" "," - ":" ","-":" "},Ke=le.replace(/\_| \- |\-/g,Le=>pe[Le]);return`<div data-mce-tooltip="${Ke}" class="tox-collection__item${J}" tabindex="-1" data-collection-item-value="${BH.encodeAllRaw(ce.value)}" aria-label="${Ke}">${Ge}${Me}</div>`}),G=t.columns!=="auto"&&t.columns>1?_c($,t.columns):[$],Y=we(G,ce=>`<div class="tox-collection__group">${ce.join("")}</div>`);nf(N.element,Y.join(""))},b=f((N,L,F,J)=>{L.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||st(N,au,{name:t.name,value:J})}),C=[be(Ul(),f((N,L,F)=>{La(F,!0)})),be(Wm(),b),be(_b(),b),be(rl(),f((N,L,F)=>{fo(N.element,"."+Nf).each(J=>{bo(J,Nf)}),Xo(F,Nf)})),be(bT(),f(N=>{fo(N.element,"."+Nf).each(L=>{bo(L,Nf),or(L)})})),Bu(f((N,L,F,J)=>{st(N,au,{name:t.name,value:J})}))],x=(N,L)=>we(oa(N.element,".tox-collection__item"),L),k=un.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:$t},behaviours:_e([rt.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable,onDisabled:N=>{x(N,L=>{Xo(L,"tox-collection__item--state-disabled"),Ve(L,"aria-disabled",!0)})},onEnabled:N=>{x(N,L=>{bo(L,"tox-collection__item--state-disabled"),Vn(L,"aria-disabled")})}}),Uo(()=>s.checkUiComponentContext(t.context)),_t.config({}),So.config({...s.tooltips.getConfig({tooltipText:"",onShow:N=>{fo(N.element,"."+Nf+"[data-mce-tooltip]").each(L=>{gn(L,"data-mce-tooltip").each(F=>{So.setComponents(N,s.tooltips.getComponents({tooltipText:F}))})})}}),mode:"children-keyboard-focus",anchor:N=>({type:"node",node:fo(N.element,"."+Nf).orThunk(()=>Qj(".tox-collection__item")),root:N.element,layouts:{onLtr:q([ps,Zs,gs,gr,hs,nr]),onRtl:q([ps,Zs,gs,gr,hs,nr])},bubble:Si(0,-2,{})})}),We.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(N,L)=>{h(N,L),t.columns==="auto"&&T4(N,5,"tox-collection__item").each(({numRows:F,numColumns:J})=>{it.setGridSize(N,F,J)}),Qt(N,IM)}}),no.config({}),it.config(q$(t.columns,"normal")),Rt("collection-events",C)]),eventOrder:{[ba()]:["disabling","alloy.base.behaviour","collection-events"],[rl()]:["collection-events","tooltipping"]}});return h0(i,k,["tox-form__group--collection"],[])},HH=["input","textarea"],FM=t=>{const s=Qn(t);return wn(HH,s)},l3=(t,s)=>{const a=s.getRoot(t).getOr(t.element);bo(a,s.invalidClass),s.notify.each(i=>{FM(t.element)&&Ve(t.element,"aria-invalid",!1),i.getContainer(t).each(u=>{nf(u,i.validHtml)}),i.onValid(t)})},u3=(t,s,a,i)=>{const u=s.getRoot(t).getOr(t.element);Xo(u,s.invalidClass),s.notify.each(m=>{FM(t.element)&&Ve(t.element,"aria-invalid",!0),m.getContainer(t).each(f=>{nf(f,i)}),m.onInvalid(t,i)})},$M=(t,s,a)=>s.validator.fold(()=>yr.pure(jt.value(!0)),i=>i.validate(t)),d3=(t,s,a)=>(s.notify.each(i=>{i.onValidate(t)}),$M(t,s).map(i=>t.getSystem().isConnected()?i.fold(u=>(u3(t,s,a,u),jt.error(u)),u=>(l3(t,s),jt.value(u))):jt.error("No longer in system")));var VH=Object.freeze({__proto__:null,markValid:l3,markInvalid:u3,query:$M,run:d3,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return na(a,s.invalidClass)}}),HM=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>In([be(a.onEvent,i=>{d3(i,t,s).get($t)})].concat(a.validateOnLoad?[co(i=>{d3(i,t,s).get(re)})]:[]))).getOr({})}),Gh=[ve("invalidClass"),se("getRoot",S.none),Hs("notify",[se("aria","alert"),se("getContainer",S.none),se("validHtml",""),an("onValid"),an("onInvalid"),an("onValidate")]),Hs("validator",[ve("validate"),se("onEvent","input"),se("validateOnLoad",!0)])];const cu=zs({fields:Gh,name:"invalidating",active:HM,apis:VH,extra:{validation:t=>s=>{const a=We.getValue(s);return yr.pure(t(a))}}});var q2=Object.freeze({__proto__:null,events:()=>In([ET(gP(),nt)]),exhibit:()=>cc({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const aa=zs({fields:[],name:"unselecting",active:q2}),m3=(t,s)=>vc.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:_e([Gc.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),Uo(()=>s.providers.checkUiComponentContext(t.context)),aa.config({}),no.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>yr.nu(i=>t.fetch(i)).map(i=>S.from(s3(Co(J4(Xe("menu-value"),i,u=>{t.onItemAction(a,u)},t.columns,t.presets,Ti.CLOSE_ON_EXECUTE,Sn,s.providers),{movement:U2(t.columns,t.presets)})))),parts:{menu:Y1(!1,1,t.presets)}}),f3=Xe("color-input-change"),VM=Xe("color-swatch-change"),zM=Xe("color-picker-cancel"),zH=(t,s,a,i)=>{const u=un.parts.field({factory:_i,inputClasses:["tox-textfield"],data:i,onSetValue:C=>cu.run(C).get(re),inputBehaviours:_e([rt.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable}),Uo(()=>s.providers.checkUiComponentContext(t.context)),no.config({}),cu.config({invalidClass:"tox-textbox-field-invalid",getRoot:C=>ga(C.element),notify:{onValid:C=>{const x=We.getValue(C);st(C,f3,{color:x})}},validator:{validateOnLoad:!1,validate:C=>{const x=We.getValue(C);if(x.length===0)return yr.pure(jt.value(!0));{const k=Be.fromTag("span");Pt(k,"background-color",x);const A=Fo(k,"background-color").fold(()=>jt.error("blah"),N=>jt.value(x));return yr.pure(A)}}}})]),selectOnFocus:!1}),m=t.label.map(C=>ru(C,s.providers)),f=(C,x)=>{st(C,VM,{value:x})},h=(C,x)=>{b.getOpt(C).each(k=>{x==="custom"?a.colorPicker(A=>{A.fold(()=>Qt(k,zM),N=>{f(k,N),qD(t.storageKey,N)})},"#ffffff"):x==="remove"?f(k,""):f(k,x)})},b=yn(m3({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[hs,gs,ps],onLtr:()=>[gs,hs,ps]},components:[],fetch:eM(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:h,context:t.context},s));return un.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:m.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[u,b.asSpec()]}]),fieldBehaviours:_e([Rt("form-field-events",[be(f3,(C,x)=>{b.getOpt(C).each(k=>{Pt(k.element,"background-color",x.event.color)}),st(C,ya,{name:t.name})}),be(VM,(C,x)=>{un.getField(C).each(k=>{We.setValue(k,x.event.value),ln.getCurrent(C).each(Ct.focus)})}),be(zM,(C,x)=>{un.getField(C).each(k=>{ln.getCurrent(C).each(Ct.focus)})})])])})},UH=va({schema:[ve("dom")],name:"label"}),Qu=t=>va({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:In([Bb(Nu(),(u,m,f)=>i(u,f),[s]),Bb(ac(),(u,m,f)=>i(u,f),[s]),Bb($p(),(u,m,f)=>{f.mouseIsDown.get()&&i(u,f)},[s])])}))}),UM=Qu("top-left"),ZH=Qu("top"),WH=Qu("top-right"),ZM=Qu("right"),jH=Qu("bottom-right"),WM=Qu("bottom"),jM=Qu("bottom-left"),GM=Qu("left"),GH=pr({name:"thumb",defaults:q({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:In([Zg(Nu(),t,"spectrum"),Zg($g(),t,"spectrum"),Zg(Hg(),t,"spectrum"),Zg(ac(),t,"spectrum"),Zg($p(),t,"spectrum"),Zg(kb(),t,"spectrum")])})}),K2=t=>Ef(t.event),qH=pr({schema:[An("mouseIsDown",()=>at(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,i=(u,m)=>a.getValueFromEvent(m).map(f=>a.setValueFrom(u,t,f));return{behaviours:_e([it.config({mode:"special",onLeft:(u,m)=>a.onLeft(u,t,K2(m)),onRight:(u,m)=>a.onRight(u,t,K2(m)),onUp:(u,m)=>a.onUp(u,t,K2(m)),onDown:(u,m)=>a.onDown(u,t,K2(m))}),no.config({}),Ct.config({})]),events:In([be(Nu(),i),be($g(),i),be(ac(),i),be($p(),(u,m)=>{t.mouseIsDown.get()&&i(u,m)})])}}});var KH=[UH,GM,ZM,ZH,WM,UM,WH,jM,jH,GH,qH];const v0=q("slider.change.value"),g3=t=>t.type.indexOf("touch")!==-1,h3=t=>{const s=t.event.raw;if(g3(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?S.some(a.touches[0]).map(i=>eo(i.clientX,i.clientY)):S.none()}else{const a=s;return a.clientX!==void 0?S.some(a).map(i=>eo(i.clientX,i.clientY)):S.none()}},YH="top",qM="right",XH="bottom",JH="left",Uf=t=>t.model.minX,Zf=t=>t.model.minY,Y2=t=>t.model.minX-1,X2=t=>t.model.minY-1,Wf=t=>t.model.maxX,lm=t=>t.model.maxY,y0=t=>t.model.maxX+1,J2=t=>t.model.maxY+1,KM=(t,s,a)=>s(t)-a(t),p3=t=>KM(t,Wf,Uf),b3=t=>KM(t,lm,Zf),YM=t=>p3(t)/2,XM=t=>b3(t)/2,jf=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,v3=t=>t.snapToGrid,y3=t=>t.snapStart,Q2=t=>t.rounded,ey=(t,s)=>t[s+"-edge"]!==void 0,C3=t=>ey(t,JH),JM=t=>ey(t,qM),QM=t=>ey(t,YH),e6=t=>ey(t,XH),ed=t=>t.model.value.get(),iu=(t,s)=>({x:t,y:s}),Cr=(t,s)=>{st(t,v0(),{value:s})},QH=(t,s)=>{Cr(t,iu(Y2(s),X2(s)))},C0=(t,s)=>{Cr(t,X2(s))},e9=(t,s)=>{Cr(t,iu(YM(s),X2(s)))},S3=(t,s)=>{Cr(t,iu(y0(s),X2(s)))},t9=(t,s)=>{Cr(t,y0(s))},n9=(t,s)=>{Cr(t,iu(y0(s),XM(s)))},o9=(t,s)=>{Cr(t,iu(y0(s),J2(s)))},t6=(t,s)=>{Cr(t,J2(s))},s9=(t,s)=>{Cr(t,iu(YM(s),J2(s)))},x3=(t,s)=>{Cr(t,iu(Y2(s),J2(s)))},w3=(t,s)=>{Cr(t,Y2(s))},E3=(t,s)=>{Cr(t,iu(Y2(s),XM(s)))},k3=(t,s,a,i)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-i),Ca=(t,s,a,i)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+i),n6=(t,s,a)=>Math.max(s,Math.min(a,t)),r9=(t,s,a,i,u)=>u.fold(()=>{const m=t-s,f=Math.round(m/i)*i;return n6(s+f,s-1,a+1)},m=>{const f=(t-m)%i,h=Math.round(f/i),b=Math.floor((t-m)/i),C=Math.floor((a-m)/i),x=Math.min(C,b+h),k=m+x*i;return Math.max(m,k)}),o6=(t,s,a)=>Math.min(a,Math.max(t,s))-s,T3=t=>{const{min:s,max:a,range:i,value:u,step:m,snap:f,snapStart:h,rounded:b,hasMinEdge:C,hasMaxEdge:x,minBound:k,maxBound:A,screenRange:N}=t,L=C?s-1:s,F=x?a+1:a;if(u<k)return L;if(u>A)return F;{const J=o6(u,k,A),$=n6(J/N*i+s,L,F);return f&&$>=s&&$<=a?r9($,s,a,m,h):b?Math.round($):$}},s6=t=>{const{min:s,max:a,range:i,value:u,hasMinEdge:m,hasMaxEdge:f,maxBound:h,maxOffset:b,centerMinEdge:C,centerMaxEdge:x}=t;return u<s?m?0:C:u>a?f?h:x:(u-s)/i*b},_3="top",r6="right",a6="bottom",A3="left",a9="width",c9="height",bl=t=>t.element.dom.getBoundingClientRect(),Ri=(t,s)=>t[s],ty=t=>{const s=bl(t);return Ri(s,A3)},c6=t=>{const s=bl(t);return Ri(s,r6)},S0=t=>{const s=bl(t);return Ri(s,_3)},ny=t=>{const s=bl(t);return Ri(s,a6)},O3=t=>{const s=bl(t);return Ri(s,a9)},D3=t=>{const s=bl(t);return Ri(s,c9)},M3=(t,s,a)=>(t+s)/2-a,R3=(t,s)=>{const a=bl(t),i=bl(s),u=Ri(a,A3),m=Ri(a,r6),f=Ri(i,A3);return M3(u,m,f)},oy=(t,s)=>{const a=bl(t),i=bl(s),u=Ri(a,_3),m=Ri(a,a6),f=Ri(i,_3);return M3(u,m,f)},sy=(t,s)=>{st(t,v0(),{value:s})},x0=(t,s,a)=>{const i={min:Uf(s),max:Wf(s),range:p3(s),value:a,step:jf(s),snap:v3(s),snapStart:y3(s),rounded:Q2(s),hasMinEdge:C3(s),hasMaxEdge:JM(s),minBound:ty(t),maxBound:c6(t),screenRange:O3(t)};return T3(i)},qh=(t,s,a)=>{const i=x0(t,s,a);return sy(t,i),i},i6=(t,s)=>{const a=Uf(s);sy(t,a)},l6=(t,s)=>{const a=Wf(s);sy(t,a)},u6=(t,s,a,i)=>{const m=(t>0?Ca:k3)(ed(a),Uf(a),Wf(a),jf(a,i));return sy(s,m),S.some(m)},d6=t=>(s,a,i)=>u6(t,s,a,i).map(nt),i9=t=>h3(t).map(a=>a.left),ry=(t,s,a,i,u)=>{const f=O3(t),h=i.bind(x=>S.some(R3(x,t))).getOr(0),b=u.bind(x=>S.some(R3(x,t))).getOr(f),C={min:Uf(s),max:Wf(s),range:p3(s),value:a,hasMinEdge:C3(s),hasMaxEdge:JM(s),minBound:ty(t),minOffset:0,maxBound:c6(t),maxOffset:f,centerMinEdge:h,centerMaxEdge:b};return s6(C)},N3=(t,s,a,i,u,m)=>{const f=ry(s,m,a,i,u);return ty(s)-ty(t)+f},l9=(t,s,a,i)=>{const u=ed(a),m=N3(t,i.getSpectrum(t),u,i.getLeftEdge(t),i.getRightEdge(t),a),f=Ft(s.element)/2;Pt(s.element,"left",m-f+"px")},m6=d6(-1),f6=d6(1),P3=S.none,g6=S.none,ca={"top-left":S.none(),top:S.none(),"top-right":S.none(),right:S.some(t9),"bottom-right":S.none(),bottom:S.none(),"bottom-left":S.none(),left:S.some(w3)};var h6=Object.freeze({__proto__:null,setValueFrom:qh,setToMin:i6,setToMax:l6,findValueOfOffset:x0,getValueFromEvent:i9,findPositionOfValue:N3,setPositionFromValue:l9,onLeft:m6,onRight:f6,onUp:P3,onDown:g6,edgeActions:ca});const ay=(t,s)=>{st(t,v0(),{value:s})},B3=(t,s,a)=>{const i={min:Zf(s),max:lm(s),range:b3(s),value:a,step:jf(s),snap:v3(s),snapStart:y3(s),rounded:Q2(s),hasMinEdge:QM(s),hasMaxEdge:e6(s),minBound:S0(t),maxBound:ny(t),screenRange:D3(t)};return T3(i)},p6=(t,s,a)=>{const i=B3(t,s,a);return ay(t,i),i},u9=(t,s)=>{const a=Zf(s);ay(t,a)},d9=(t,s)=>{const a=lm(s);ay(t,a)},m9=(t,s,a,i)=>{const m=(t>0?Ca:k3)(ed(a),Zf(a),lm(a),jf(a,i));return ay(s,m),S.some(m)},L3=t=>(s,a,i)=>m9(t,s,a,i).map(nt),lu=t=>h3(t).map(a=>a.top),I3=(t,s,a,i,u)=>{const f=D3(t),h=i.bind(x=>S.some(oy(x,t))).getOr(0),b=u.bind(x=>S.some(oy(x,t))).getOr(f),C={min:Zf(s),max:lm(s),range:b3(s),value:a,hasMinEdge:QM(s),hasMaxEdge:e6(s),minBound:S0(t),minOffset:0,maxBound:ny(t),maxOffset:f,centerMinEdge:h,centerMaxEdge:b};return s6(C)},cy=(t,s,a,i,u,m)=>{const f=I3(s,m,a,i,u);return S0(s)-S0(t)+f},iy=(t,s,a,i)=>{const u=ed(a),m=cy(t,i.getSpectrum(t),u,i.getTopEdge(t),i.getBottomEdge(t),a),f=es(s.element)/2;Pt(s.element,"top",m-f+"px")},F3=S.none,f9=S.none,g9=L3(-1),h9=L3(1),p9={"top-left":S.none(),top:S.some(C0),"top-right":S.none(),right:S.none(),"bottom-right":S.none(),bottom:S.some(t6),"bottom-left":S.none(),left:S.none()};var b9=Object.freeze({__proto__:null,setValueFrom:p6,setToMin:u9,setToMax:d9,findValueOfOffset:B3,getValueFromEvent:lu,findPositionOfValue:cy,setPositionFromValue:iy,onLeft:F3,onRight:f9,onUp:g9,onDown:h9,edgeActions:p9});const ly=(t,s)=>{st(t,v0(),{value:s})},uy=(t,s)=>({x:t,y:s}),b6=(t,s,a)=>{const i=x0(t,s,a.left),u=B3(t,s,a.top),m=uy(i,u);return ly(t,m),m},v9=(t,s,a,i,u)=>{const m=t>0?Ca:k3,f=s?ed(i).x:m(ed(i).x,Uf(i),Wf(i),jf(i,u)),h=s?m(ed(i).y,Zf(i),lm(i),jf(i,u)):ed(i).y;return ly(a,uy(f,h)),S.some(f)},Kc=(t,s)=>(a,i,u)=>v9(t,s,a,i,u).map(nt),dy=(t,s)=>{const a=Uf(s),i=Zf(s);ly(t,uy(a,i))},y9=(t,s)=>{const a=Wf(s),i=lm(s);ly(t,uy(a,i))},C9=t=>h3(t),v6=(t,s,a,i)=>{const u=ed(a),m=N3(t,i.getSpectrum(t),u.x,i.getLeftEdge(t),i.getRightEdge(t),a),f=cy(t,i.getSpectrum(t),u.y,i.getTopEdge(t),i.getBottomEdge(t),a),h=Ft(s.element)/2,b=es(s.element)/2;Pt(s.element,"left",m-h+"px"),Pt(s.element,"top",f-b+"px")},y6=Kc(-1,!1),$3=Kc(1,!1),my=Kc(-1,!0),w0=Kc(1,!0),E0={"top-left":S.some(QH),top:S.some(e9),"top-right":S.some(S3),right:S.some(n9),"bottom-right":S.some(o9),bottom:S.some(s9),"bottom-left":S.some(x3),left:S.some(E3)};var C6=Object.freeze({__proto__:null,setValueFrom:b6,setToMin:dy,setToMax:y9,getValueFromEvent:C9,setPositionFromValue:v6,onLeft:y6,onRight:$3,onUp:my,onDown:w0,edgeActions:E0});const S6=[se("stepSize",1),se("speedMultiplier",10),se("onChange",re),se("onChoose",re),se("onInit",re),se("onDragStart",re),se("onDragEnd",re),se("snapToGrid",!1),se("rounded",!0),En("snapStart"),Tn("model",Ts("mode",{x:[se("minX",0),se("maxX",100),An("value",t=>at(t.mode.minX)),ve("getInitialValue"),io("manager",h6)],y:[se("minY",0),se("maxY",100),An("value",t=>at(t.mode.minY)),ve("getInitialValue"),io("manager",b9)],xy:[se("minX",0),se("maxX",100),se("minY",0),se("maxY",100),An("value",t=>at({x:t.mode.minX,y:t.mode.minY})),ve("getInitialValue"),io("manager",C6)]})),Ws("sliderBehaviours",[it,We]),An("mouseIsDown",()=>at(!1))],Yc=Kr({name:"Slider",configFields:S6,partFields:KH,factory:(t,s,a,i)=>{const u=le=>wi(le,t,"thumb"),m=le=>wi(le,t,"spectrum"),f=le=>zn(le,t,"left-edge"),h=le=>zn(le,t,"right-edge"),b=le=>zn(le,t,"top-edge"),C=le=>zn(le,t,"bottom-edge"),x=t.model,k=x.manager,A=(le,Me)=>{k.setPositionFromValue(le,Me,t,{getLeftEdge:f,getRightEdge:h,getTopEdge:b,getBottomEdge:C,getSpectrum:m})},N=(le,Me)=>{x.value.set(Me);const Ge=u(le);A(le,Ge)},L=(le,Me)=>{N(le,Me);const Ge=u(le);return t.onChange(le,Ge,Me),S.some(!0)},F=le=>{k.setToMin(le,t)},J=le=>{k.setToMax(le,t)},$=le=>{const Me=()=>{zn(le,t,"thumb").each(pe=>{const Ke=x.value.get();t.onChoose(le,pe,Ke)})},Ge=t.mouseIsDown.get();t.mouseIsDown.set(!1),Ge&&Me()},G=(le,Me)=>{Me.stop(),t.mouseIsDown.set(!0),t.onDragStart(le,u(le))},Y=(le,Me)=>{Me.stop(),t.onDragEnd(le,u(le)),$(le)},ce=le=>{zn(le,t,"spectrum").map(it.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ho(t.sliderBehaviours,[it.config({mode:"special",focusIn:ce}),We.config({store:{mode:"manual",getValue:le=>x.value.get(),setValue:N}}),Ba.config({channels:{[_x()]:{onReceive:$}}})]),events:In([be(v0(),(le,Me)=>{L(le,Me.event.value)}),co((le,Me)=>{const Ge=x.getInitialValue();x.value.set(Ge);const pe=u(le);A(le,pe);const Ke=m(le);t.onInit(le,pe,Ke,x.value.get())}),be(Nu(),G),be(Hg(),Y),be(ac(),(le,Me)=>{ce(le),G(le,Me)}),be(kb(),Y)]),apis:{resetToMin:F,resetToMax:J,setValue:N,refresh:A},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),H3=Xe("rgb-hex-update"),x6=Xe("slider-update"),w6=Xe("palette-update"),x9=(t,s)=>{const a=Yc.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=Yc.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Yc.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:q(0)},components:[a,i],sliderBehaviours:_e([Ct.config({})]),onChange:(u,m,f)=>{Ve(u.element,"aria-valuenow",Math.floor(360-f*3.6)),st(u,x6,{value:f})}})},E6="form",k6=[Ws("formBehaviours",[We])],V3=t=>"<alloy.field."+t+">",w9=t=>{const s=(()=>{const m=[];return{field:(h,b)=>(m.push(h),Mv(E6,V3(h),b)),record:q(m)}})(),a=t(s),i=s.record(),u=we(i,m=>pr({name:m,pname:V3(m)}));return Wx(E6,k6,u,E9,a)},T6=(t,s)=>t.fold(()=>jt.error(s),jt.value),E9=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Ho(t.formBehaviours,[We.config({store:{mode:"manual",getValue:a=>{const i=zx(a,t);return Zn(i,(u,m)=>u().bind(f=>{const h=ln.getCurrent(f);return T6(h,new Error(`Cannot find a current component to extract the value from for form part '${m}': `+$d(f.element)))}).map(We.getValue))},setValue:(a,i)=>{Ao(i,(u,m)=>{zn(a,t,m).each(f=>{ln.getCurrent(f).each(h=>{We.setValue(h,u)})})})}}})]),apis:{getField:(a,i)=>zn(a,t,i).bind(ln.getCurrent)}}),Gf={getField:Xb((t,s,a)=>t.getField(s,a)),sketch:w9},Kh=Xe("valid-input"),_6=Xe("invalid-input"),z3=Xe("validating-input"),U3="colorcustom.rgb.",k9={isEnabled:nt,setEnabled:re,immediatelyShow:re,immediatelyHide:re},T9=(t,s,a,i,u,m)=>{const f=(F,J)=>{const $=J.get();F!==$.isEnabled()&&($.setEnabled(F),F?$.immediatelyShow():$.immediatelyHide())},h=(F,J,$)=>cu.config({invalidClass:s("invalid"),notify:{onValidate:G=>{st(G,z3,{type:F})},onValid:G=>{f(!1,$),st(G,Kh,{type:F,value:We.getValue(G)})},onInvalid:G=>{f(!0,$),st(G,_6,{type:F,value:We.getValue(G)})}},validator:{validate:G=>{const Y=We.getValue(G),ce=J(Y)?jt.value(!0):jt.error(t("aria.input.invalid"));return yr.pure(ce)},validateOnLoad:!1}}),b=(F,J,$,G,Y)=>{const ce=at(k9),le=t(U3+"range"),Me=un.parts.label({dom:{tag:"label"},components:[lo($)]}),Ge=un.parts.field({data:Y,factory:_i,inputAttributes:{type:"text","aria-label":G,...J==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:_e([h(J,F,ce),no.config({}),So.config({...u({tooltipText:"",onSetup:pn=>{ce.set({isEnabled:()=>So.isEnabled(pn),setEnabled:tt=>So.setEnabled(pn,tt),immediatelyShow:()=>So.immediateOpenClose(pn,!0),immediatelyHide:()=>So.immediateOpenClose(pn,!1)}),So.setEnabled(pn,!1)},onShow:(pn,tt)=>{So.setComponents(pn,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[lo(t(J==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:pn=>{cu.isInvalid(pn)&&cu.run(pn).get(re)}}),pe=Xe("aria-invalid"),Ke=yn(m("invalid",S.some(pe),"warning")),Le=yn({dom:{tag:"div",classes:[s("invalid-icon")]},components:[Ke.asSpec()]}),et=[Me,Ge,Le.asSpec()],Xt=J!=="hex"?[un.parts["aria-descriptor"]({text:le})]:[],qn=et.concat(Xt);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:qn}},C=(F,J)=>{const $=s0(J);return Gf.getField(F,"hex").each(G=>{Ct.isFocused(G)||We.setValue(F,{hex:$.value})}),$},x=(F,J)=>{const $=J.red,G=J.green,Y=J.blue;We.setValue(F,{red:$,green:G,blue:Y})},k=yn({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),A=(F,J)=>{k.getOpt(F).each($=>{Pt($.element,"background-color","#"+J.value)})};return gc({factory:()=>{const F={red:at(S.some(255)),green:at(S.some(255)),blue:at(S.some(255)),hex:at(S.some("ffffff"))},J=(tt,xe)=>{const Fe=r0(xe);x(tt,Fe),ce(Fe)},$=tt=>F[tt].get(),G=(tt,xe)=>{F[tt].set(xe)},Y=()=>$("red").bind(tt=>$("green").bind(xe=>$("blue").map(Fe=>Hf(tt,xe,Fe,1)))),ce=tt=>{const xe=tt.red,Fe=tt.green,wt=tt.blue;G("red",S.some(xe)),G("green",S.some(Fe)),G("blue",S.some(wt))},le=(tt,xe)=>{const Fe=xe.event;Fe.type!=="hex"?G(Fe.type,S.none()):i(tt)},Me=(tt,xe)=>{a(tt);const Fe=B4(xe);G("hex",S.some(Fe.value));const wt=r0(Fe);x(tt,wt),ce(wt),st(tt,H3,{hex:Fe}),A(tt,Fe)},Ge=(tt,xe,Fe)=>{const wt=parseInt(Fe,10);G(xe,S.some(wt)),Y().each(Lt=>{const dt=C(tt,Lt);st(tt,H3,{hex:dt}),A(tt,dt)})},pe=tt=>tt.type==="hex",Ke=(tt,xe)=>{const Fe=xe.event;pe(Fe)?Me(tt,Fe.value):Ge(tt,Fe.type,Fe.value)},Le=tt=>({label:t(U3+tt+".label"),description:t(U3+tt+".description")}),et=Le("red"),Xt=Le("green"),qn=Le("blue"),pn=Le("hex");return Co(Gf.sketch(tt=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[tt.field("red",un.sketch(b(F4,"red",et.label,et.description,255))),tt.field("green",un.sketch(b(F4,"green",Xt.label,Xt.description,255))),tt.field("blue",un.sketch(b(F4,"blue",qn.label,qn.description,255))),tt.field("hex",un.sketch(b(PD,"hex",pn.label,pn.description,"ffffff"))),k.asSpec()],formBehaviours:_e([cu.config({invalidClass:s("form-invalid")}),Rt("rgb-form-events",[be(Kh,Ke),be(_6,le),be(z3,le)])])})),{apis:{updateHex:(tt,xe)=>{We.setValue(tt,{hex:xe.value}),J(tt,xe),A(tt,xe)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(F,J,$)=>{F.updateHex(J,$)}},extraApis:{}})},_9=(t,s)=>{const a=Yc.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=Yc.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),u=(C,x)=>{const{width:k,height:A}=C,N=C.getContext("2d");if(N===null)return;N.fillStyle=x,N.fillRect(0,0,k,A);const L=N.createLinearGradient(0,0,k,0);L.addColorStop(0,"rgba(255,255,255,1)"),L.addColorStop(1,"rgba(255,255,255,0)"),N.fillStyle=L,N.fillRect(0,0,k,A);const F=N.createLinearGradient(0,0,0,A);F.addColorStop(0,"rgba(0,0,0,0)"),F.addColorStop(1,"rgba(0,0,0,1)"),N.fillStyle=F,N.fillRect(0,0,k,A)},m=(C,x)=>{const k=C.components()[0].element.dom,A=l0(x,100,100),N=$D(A);u(k,HD(N))},f=(C,x)=>{const k=U4(r0(x));Yc.setValue(C,{x:k.saturation,y:100-k.value}),Ve(C.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",k.saturation,k.value]))};return gc({factory:C=>{const x=q({x:0,y:0}),k=(L,F,J)=>{qs(J)||Ve(L.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(J.x),Math.floor(100-J.y)])),st(L,w6,{value:J})},A=(L,F,J,$)=>{u(J.element.dom,HD(VD))},N=_e([ln.config({find:S.some}),Ct.config({})]);return Yc.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:x},rounded:!1,components:[a,i],onChange:k,onInit:A,sliderBehaviours:N})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(C,x,k)=>{m(x,k)},setThumb:(C,x,k)=>{f(x,k)}},extraApis:{}})},A6=(t,s,a,i)=>{const u=f=>{const h=T9(t,s,f.onValidHex,f.onInvalidHex,a,i),b=_9(t,s),C=pe=>(100-pe)/100*360,x=pe=>100-pe/360*100,k={paletteRgba:at(VD),paletteHue:at(0)},A=yn(x9(t,s)),N=yn(b.sketch({})),L=yn(h.sketch({})),F=(pe,Ke,Le)=>{N.getOpt(pe).each(et=>{b.setHue(et,Le)})},J=(pe,Ke)=>{L.getOpt(pe).each(Le=>{h.updateHex(Le,Ke)})},$=(pe,Ke,Le)=>{A.getOpt(pe).each(et=>{Yc.setValue(et,x(Le))})},G=(pe,Ke)=>{N.getOpt(pe).each(Le=>{b.setThumb(Le,Ke)})},Y=(pe,Ke)=>{const Le=r0(pe);k.paletteRgba.set(Le),k.paletteHue.set(Ke)},ce=(pe,Ke,Le,et)=>{Y(Ke,Le),Ue(et,Xt=>{Xt(pe,Ke,Le)})},le=()=>{const pe=[J];return(Ke,Le)=>{const et=Le.event.value,Xt=k.paletteHue.get(),qn=l0(Xt,et.x,100-et.y),pn=KD(qn);ce(Ke,pn,Xt,pe)}},Me=()=>{const pe=[F,J];return(Ke,Le)=>{const et=C(Le.event.value),Xt=k.paletteRgba.get(),qn=U4(Xt),pn=l0(et,qn.saturation,qn.value),tt=KD(pn);ce(Ke,tt,et,pe)}},Ge=()=>{const pe=[F,$,G];return(Ke,Le)=>{const et=Le.event.hex,Xt=N$(et);ce(Ke,et,Xt.hue,pe)}};return{uid:f.uid,dom:f.dom,components:[N.asSpec(),A.asSpec(),L.asSpec()],behaviours:_e([Rt("colour-picker-events",[be(H3,Ge()),be(w6,le()),be(x6,Me())]),ln.config({find:pe=>L.getOpt(pe)}),it.config({mode:"acyclic"})])}};return gc({name:"ColourPicker",configFields:[ve("dom"),se("onValidHex",re),se("onInvalidHex",re)],factory:u})},Sr={self:()=>ln.config({find:S.some}),memento:t=>ln.config({find:t.getOpt}),childAt:t=>ln.config({find:s=>nc(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},Z3=Et([se("preprocess",$t),se("postprocess",$t)]),D6=(t,s)=>{const a=pa("RepresentingConfigs.memento processors",Z3,s);return We.config({store:{mode:"manual",getValue:i=>{const u=t.get(i),m=We.getValue(u);return a.postprocess(m)},setValue:(i,u)=>{const m=a.preprocess(u),f=t.get(i);We.setValue(f,m)}}})},um=(t,s,a)=>We.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),fy=(t,s,a)=>um(t,i=>s(i.element),(i,u)=>a(i.element,u)),M6=t=>fy(t,Lu,nf),qf=t=>We.config({store:{mode:"memory",initialValue:t}}),R6={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},N6=t=>s=>on(s)?t.translate(R6[s]):t.translate(s),O9=(t,s,a)=>{const i=C=>"tox-"+C,u=(C,x,k=C,A=C)=>pc(k,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+C],attributes:{title:s.translate(A),"aria-live":"polite",...x.fold(()=>({}),N=>({id:N}))}},s.icons),m=A6(N6(s),i,s.tooltips.getConfig,u),f=C=>{st(C,au,{name:"hex-valid",value:!0})},h=C=>{st(C,au,{name:"hex-valid",value:!1})},b=yn(m.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:f,onInvalidHex:h}));return{dom:{tag:"div"},components:[b.asSpec()],behaviours:_e([um(a,C=>{const x=b.get(C);return ln.getCurrent(x).bind(N=>We.getValue(N).hex).map(N=>"#"+id(N,"#")).getOr("")},(C,x)=>{const k=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,A=S.from(k.exec(x)).bind(F=>ro(F,1)),N=b.get(C);ln.getCurrent(N).fold(()=>{console.log("Can not find form")},F=>{We.setValue(F,{hex:A.getOr("")}),Gf.getField(F,"hex").each(J=>{Qt(J,hi())})})}),Sr.self()])}};var D9=tinymce.util.Tools.resolve("tinymce.Resource");const P6=t=>sn(t,"init"),M9=t=>{const s=Nn(),a=yn({dom:{tag:t.tag}}),i=Nn(),u=!P6(t)&&t.onFocus.isSome()?[Ct.config({onFocus:m=>{t.onFocus.each(f=>{f(m.element.dom)})}}),no.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:_e([Rt("custom-editor-events",[co(m=>{a.getOpt(m).each(f=>{(P6(t)?t.init(f.element.dom):D9.load(t.scriptId,t.scriptUrl).then(h=>h(f.element.dom,t.settings))).then(h=>{i.on(b=>{h.setValue(b)}),i.clear(),s.set(h)})})})]),um(S.none(),()=>s.get().fold(()=>i.get().getOr(""),m=>m.getValue()),(m,f)=>{s.get().fold(()=>i.set(f),h=>h.setValue(f))}),Sr.self()].concat(u)),components:[a.asSpec()]}};var td=tinymce.util.Tools.resolve("tinymce.util.Tools");const gy=Xe("browse.files.event"),B6=(t,s)=>{const a=td.explode(s.getOption("images_file_types")),i=u=>as(a,m=>ec(u.name.toLowerCase(),`.${m.toLowerCase()}`));return Hn(is(t),i)},R9=(t,s,a)=>{const i=(A,N)=>{N.stop()},u=A=>(N,L)=>{Ue(A,F=>{F(N,L)})},m=(A,N)=>{var L;if(!rt.isDisabled(A)){const F=N.event.raw;st(A,gy,{files:(L=F.dataTransfer)===null||L===void 0?void 0:L.files})}},f=(A,N)=>{const L=N.event.raw.target;st(A,gy,{files:L.files})},h=(A,N)=>{N&&(We.setValue(A,B6(N,s)),st(A,ya,{name:t.name}))},b=yn({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:_e([Rt("input-file-events",[qm(Wm()),qm(_b())])])}),C=t.label.map(A=>ru(A,s)),x=un.parts.field({factory:ns,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[lo(s.translate("Browse for an image")),b.asSpec()],action:A=>{b.get(A).element.dom.click()},buttonBehaviours:_e([Sr.self(),qf(a.getOr([])),no.config({}),Gc.button(()=>s.checkUiComponentContext(t.context).shouldDisable),Uo(()=>s.checkUiComponentContext(t.context))])}),k={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:_e([rt.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable}),Uo(()=>s.checkUiComponentContext(t.context)),Gt.config({toggleClass:"dragenter",toggleOnExecute:!1}),Rt("dropzone-events",[be("dragenter",u([i,Gt.toggle])),be("dragleave",u([i,Gt.toggle])),be("dragover",i),be("drop",u([i,m])),be(Pu(),f)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[lo(s.translate("Drop an image here"))]},x]}]};return h0(C,k,["tox-form__group--stretched"],[Rt("handle-files",[be(gy,(A,N)=>{un.getField(A).each(L=>{h(L,N.event.files)})})])])},N9=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:we(t.items,s.interpreter)}),P9=(t,s)=>{let a=null,i=null;return{cancel:()=>{Pr(a)||(clearTimeout(a),a=null,i=null)},throttle:(...f)=>{i=f,Pr(a)&&(a=setTimeout(()=>{const h=i;a=null,i=null,t.apply(null,h)},s))}}},hy=(t,s)=>{let a=null;return{cancel:()=>{Pr(a)||(clearTimeout(a),a=null)},throttle:(...m)=>{Pr(a)&&(a=setTimeout(()=>{a=null,t.apply(null,m)},s))}}},W3=(t,s)=>{let a=null;const i=()=>{Pr(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...m)=>{i(),a=setTimeout(()=>{a=null,t.apply(null,m)},s)}}},j3=Xe("alloy-fake-before-tabstop"),py=Xe("alloy-fake-after-tabstop"),G3=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:_e([Ct.config({ignore:!0}),no.config({})])}),L6=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[G3([j3]),s,G3([py])],behaviours:_e([Sr.childAt(1)])}),I6=(t,s)=>{st(t,Lc(),{raw:{which:9,shiftKey:s}})},q3=(t,s)=>{const a=s.element;na(a,j3)?I6(t,!0):na(a,py)&&I6(t,!1)},k0=t=>hl(t,["."+j3,"."+py].join(","),Sn),T0=Xe("update-dialog"),F6=Xe("update-title"),$6=Xe("update-body"),H6=Xe("update-footer"),K3=Xe("body-send-message"),_0=Xe("dialog-focus-shifted"),Y3=$o().browser,A0=Y3.isSafari(),B9=Y3.isFirefox(),V6=A0||B9,z6=Y3.isChromium(),L9=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,X3=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),I9=(t,s)=>{const a=t.body;return S.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!z6&&!A0||so(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},U6=(t,s,a)=>{const i=t.dom;S.from(i.contentDocument).fold(a,u=>{let m=0;const f=I9(u,s).map(b=>(m=b.scrollTop,b)).forall(L9),h=()=>{const b=i.contentWindow;so(b)&&(f?X3(b,"bottom"):!f&&V6&&m!==0&&X3(b,m))};A0&&i.addEventListener("load",h,{once:!0}),u.open(),u.write(s),u.close(),A0||h()})},F9=ht(V6,A0?500:200).map(t=>P9(U6,t)),$9=(t,s)=>{const a=at(t.getOr(""));return{getValue:i=>a.get(),setValue:(i,u)=>{if(a.get()!==u){const m=i.element,f=()=>Ve(m,"srcdoc",u);s?F9.fold(q(U6),h=>h.throttle)(m,u,f):f()}a.set(u)}}},H9=(t,s,a)=>{const i="tox-dialog__iframe",u=t.transparent?[]:[`${i}--opaque`],m=t.border?["tox-navobj-bordered"]:[],f={...t.label.map(k=>({title:k})).getOr({}),...a.map(k=>({srcdoc:k})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},h=$9(a,t.streamContent),b=t.label.map(k=>ru(k,s)),C=k=>L6(S.from(m),{uid:k.uid,dom:{tag:"iframe",attributes:f,classes:[i,...u]},behaviours:_e([no.config({}),Ct.config({}),um(a,h.getValue,h.setValue),Ba.config({channels:{[_0]:{onReceive:(A,N)=>{N.newFocus.each(L=>{ga(A.element).each(F=>{(Dn(A.element,L)?Xo:bo)(F,"tox-navobj-bordered-focus")})})}}}})])}),x=un.parts.field({factory:{sketch:C}});return h0(b,x,["tox-form__group--stretched"],[])},V9=t=>new Promise((s,a)=>{const i=()=>{m(),s(t)},u=[jr(t,"load",i),jr(t,"error",()=>{m(),a("Unable to load data from image: "+t.dom.src)})],m=()=>Ue(u,f=>f.unbind());t.dom.complete&&i()}),z9=(t,s,a,i,u)=>{const m=a*u,f=i*u,h=Math.max(0,t/2-m/2),b=Math.max(0,s/2-f/2);return{left:h.toString()+"px",top:b.toString()+"px",width:m.toString()+"px",height:f.toString()+"px"}},U9=(t,s,a)=>{const i=Ft(t),u=es(t);return Math.min(i/s,u/a,1)},J3=(t,s)=>{const a=at(s.getOr({url:""})),i=yn({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(b=>({src:b.url})).getOr({})}}),u=yn({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),m=(b,C)=>{const x={url:C.url};C.zoom.each(A=>x.zoom=A),C.cachedWidth.each(A=>x.cachedWidth=A),C.cachedHeight.each(A=>x.cachedHeight=A),a.set(x);const k=()=>{const{cachedWidth:A,cachedHeight:N,zoom:L}=x;if(!Tr(A)&&!Tr(N)){if(Tr(L)){const J=U9(b.element,A,N);x.zoom=J}const F=z9(Ft(b.element),es(b.element),A,N,x.zoom);u.getOpt(b).each(J=>{ii(J.element,F)})}};i.getOpt(b).each(A=>{const N=A.element;C.url!==Vt(N,"src")&&(Ve(N,"src",C.url),bo(b.element,"tox-imagepreview__loaded")),k(),V9(N).then(L=>{b.getSystem().isConnected()&&(Xo(b.element,"tox-imagepreview__loaded"),x.cachedWidth=L.dom.naturalWidth,x.cachedHeight=L.dom.naturalHeight,k())})})},f={};t.height.each(b=>f.height=b);const h=s.map(b=>({url:b.url,zoom:S.from(b.zoom),cachedWidth:S.from(b.cachedWidth),cachedHeight:S.from(b.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:f,attributes:{role:"presentation"}},components:[u.asSpec()],behaviours:_e([Sr.self(),um(h,()=>a.get(),m)])}},Z9=(t,s,a)=>{const i="tox-label",u=t.align==="center"?[`${i}--center`]:[],m=t.align==="end"?[`${i}--end`]:[],f=yn({dom:{tag:"label",classes:[i,...u,...m]},components:[lo(s.providers.translate(t.label))]}),h=we(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[f.asSpec(),...h],behaviours:_e([Sr.self(),_t.config({}),M6(S.none()),it.config({mode:"acyclic"}),Rt("label",[co(b=>{t.for.each(C=>{a(C).each(x=>{f.getOpt(b).each(k=>{var A;const N=(A=Vt(x.element,"id"))!==null&&A!==void 0?A:Xe("form-field");Ve(x.element,"id",N),Ve(k.element,"for",N)})})})})])])}},Z6=Xe("toolbar.button.execute"),W9=t=>Bu((s,a)=>{I2(t,s)(i=>{st(s,Z6,{buttonApi:i}),t.onAction(i)})}),Ni=Xe("common-button-display-events"),by={[ba()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Ic()]:["toolbar-button-events",Ni],[Wl()]:["toolbar-button-events","dropdown-events","tooltipping"],[ac()]:["focusing","alloy.base.behaviour",Ni]},Q3=t=>Pt(t.element,"width",Ee(t.element,"width")),W6=(t,s,a)=>pc(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),O0=(t,s)=>W6(t,s,[]),dm=(t,s)=>W6(t,s,[_t.config({})]),vy=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[lo(a.translate(t))],behaviours:_e([_t.config({})])}),yc=Xe("update-menu-text"),Kf=Xe("update-menu-icon"),eE=(t,s,a,i)=>{const u=at(re),m=t.text.map(F=>yn(vy(F,s,a.providers))),f=t.icon.map(F=>yn(dm(F,a.providers.icons))),h=(F,J)=>{const $=We.getValue(F);return Ct.focus($),st($,"keydown",{raw:J.event.raw}),vc.close($),S.some(!0)},b=t.role.fold(()=>({}),F=>({role:F})),C=S.from(t.listRole).map(F=>({listRole:F})).getOr({}),x=t.ariaLabel.fold(()=>({}),F=>({"aria-label":a.providers.translate(F)})),k=pc("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),A=Xe("common-button-display-events"),N="dropdown-events";return yn(vc.sketch({...t.uid?{uid:t.uid}:{},...b,...C,dom:{tag:"button",classes:[s,`${s}--select`].concat(we(t.classes,F=>`${s}--${F}`)),attributes:{...x,...so(i)?{"data-mce-name":i}:{}}},components:Fh([f.map(F=>F.asSpec()),m.map(F=>F.asSpec()),S.some(k)]),matchWidth:!0,useMinWidth:!0,onOpen:(F,J,$)=>{t.searchable&&CH($)},dropdownBehaviours:_e([...t.dropdownBehaviours,Gc.button(()=>t.disabled||a.providers.checkUiComponentContext(t.context).shouldDisable),Uo(()=>a.providers.checkUiComponentContext(t.context)),aa.config({}),_t.config({}),...t.tooltip.map(F=>So.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(F)}))).toArray(),Rt(N,[Di(t,u),js(t,u)]),Rt(A,[co((F,J)=>{t.listRole!=="listbox"&&Q3(F)})]),Rt("update-dropdown-width-variable",[be(zg(),(F,J)=>vc.close(F))]),Rt("menubutton-update-display-text",[be(yc,(F,J)=>{m.bind($=>$.getOpt(F)).each($=>{_t.set($,[lo(a.providers.translate(J.event.text))])})}),be(Kf,(F,J)=>{f.bind($=>$.getOpt(F)).each($=>{_t.set($,[dm(J.event.icon,a.providers.icons)])})})])]),eventOrder:Co(by,{[ac()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Ic()]:["toolbar-button-events",So.name(),N,A]}),sandboxBehaviours:_e([it.config({mode:"special",onLeft:h,onRight:h}),Rt("dropdown-sandbox-events",[be(c4,(F,J)=>{W2(F),J.stop()}),be(XO,(F,J)=>{Zh(F,J),J.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...Y1(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:xM,onCollapseMenu:(F,J,$)=>{bn.getHighlighted($).each(G=>{xM(F,$,G)})},onDehighlightItem:yH}}},getAnchorOverrides:()=>({maxHeightFunction:(F,J)=>{D_()(F,J-10)}}),fetch:F=>yr.nu(dn(t.fetch,F))})).asSpec()},j6=t=>on(t),tE=t=>t.type==="separator",j9=t=>sn(t,"getSubmenuItems"),G6={type:"separator"},q6=(t,s)=>{const a=Zo(t,(i,u)=>j6(u)?u===""?i:u==="|"?i.length>0&&!tE(i[i.length-1])?i.concat([G6]):i:sn(s,u.toLowerCase())?i.concat([s[u.toLowerCase()]]):i:i.concat([u]),[]);return a.length>0&&tE(a[a.length-1])&&a.pop(),a},G9=(t,s)=>{const a=t.getSubmenuItems(),i=nE(a,s),u=Co(i.menus,{[t.value]:i.items}),m=Co(i.expansions,{[t.value]:t.value});return{item:t,menus:u,expansions:m}},K6=t=>{const s=He(t,"value").getOrThunk(()=>Xe("generated-menu-item"));return Co({value:s},t)},nE=(t,s)=>{const a=q6(on(t)?t.split(" "):t,s);return Bo(a,(i,u)=>{if(j9(u)){const m=K6(u),f=G9(m,s);return{menus:Co(i.menus,f.menus),items:[f.item,...i.items],expansions:Co(i.expansions,f.expansions)}}else return{...i,items:[u,...i.items]}},{menus:{},expansions:{},items:[]})},Y6=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),q9=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),Yh=(t,s,a,i)=>{const u=Xe("primary-menu"),m=nE(t,a.shared.providers.menuItems());if(m.items.length===0)return S.none();const f=Y6(i),h=wM(u,m.items,s,a,i.isHorizontalMenu,f),b=q9(i),C=Zn(m.menus,(k,A)=>wM(A,k,s,a,!1,b)),x=Co(C,Um(u,h));return S.from(Jd.tieredData(u,x,m.expansions))},yy=t=>!sn(t,"items"),oE="data-value",X6=(t,s,a,i,u)=>we(a,m=>yy(m)?{type:"togglemenuitem",...u?{}:{role:"option"},text:m.text,value:m.value,active:m.value===i,onAction:()=>{We.setValue(t,m.value),st(t,ya,{name:s}),Ct.focus(t)}}:{type:"nestedmenuitem",text:m.text,getSubmenuItems:()=>X6(t,s,m.items,i,u)}),Cy=(t,s)=>_o(t,a=>yy(a)?ht(a.value===s,a):Cy(a.items,s)),K9=(t,s,a)=>{const i=as(t.items,C=>!yy(C)),u=s.shared.providers,m=a.bind(C=>Cy(t.items,C)).orThunk(()=>Ns(t.items).filter(yy)),f=t.label.map(C=>ru(C,u)),h=un.parts.field({dom:{},factory:{sketch:C=>eE({context:t.context,uid:C.uid,text:m.map(x=>x.text),icon:S.none(),tooltip:S.none(),role:ht(!i,"combobox"),...i?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(x,k)=>{const A=X6(x,t.name,t.items,We.getValue(x),i);k(Yh(A,Ti.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:S.none()}))},onSetup:q(re),getApi:q({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[no.config({}),um(m.map(x=>x.value),x=>Vt(x.element,oE),(x,k)=>{Cy(t.items,k).each(A=>{Ve(x.element,oE,A.value),st(x,yc,{text:A.text})})})]},"tox-listbox",s.shared)}}),b={dom:{tag:"div",classes:["tox-listboxfield"]},components:[h]};return un.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Dt([f.toArray(),[b]]),fieldBehaviours:_e([rt.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable,onDisabled:C=>{un.getField(C).each(rt.disable)},onEnabled:C=>{un.getField(C).each(rt.enable)}})])})},Y9=(t,s)=>({dom:{tag:"div",classes:t.classes},components:we(t.items,s.shared.interpreter)}),sE=(t,s)=>{const a=we(t.options,u=>({dom:{tag:"option",value:u.value,innerHtml:u.text}})),i=t.data.map(u=>Um("initialValue",u)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:Ho(t.selectBehaviours,[Ct.config({}),We.config({store:{mode:"manual",getValue:u=>vi(u.element),setValue:(u,m)=>{const f=Ns(t.options);kt(t.options,b=>b.value===m).isSome()?mf(u.element,m):u.element.dom.selectedIndex===-1&&m===""&&f.each(b=>mf(u.element,b.value))},...i}})])}},X9=gc({name:"HtmlSelect",configFields:[ve("options"),Ws("selectBehaviours",[Ct,We]),se("selectClasses",[]),se("selectAttributes",{}),En("data")],factory:sE}),J9=(t,s,a)=>{const i=we(t.items,b=>({text:s.translate(b.text),value:b.value})),u=t.label.map(b=>ru(b,s)),m=un.parts.field({dom:{},...a.map(b=>({data:b})).getOr({}),selectAttributes:{size:t.size},options:i,factory:X9,selectBehaviours:_e([rt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),no.config({}),Rt("selectbox-change",[be(Pu(),(b,C)=>{st(b,ya,{name:t.name})})])])}),f=t.size>1?S.none():S.some(pc("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),h={dom:{tag:"div",classes:["tox-selectfield"]},components:Dt([[m],f.toArray()])};return un.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Dt([u.toArray(),[h]]),fieldBehaviours:_e([rt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:b=>{un.getField(b).each(rt.disable)},onEnabled:b=>{un.getField(b).each(rt.enable)}}),Uo(()=>s.checkUiComponentContext(t.context))])})},Q9=q([se("field1Name","field1"),se("field2Name","field2"),rf("onLockedChange"),Iu(["lockClass"]),se("locked",!1),fc.field("coupledFieldBehaviours",[ln,We]),Ln("onInput",re)]),rE=(t,s,a)=>zn(t,s,a).bind(ln.getCurrent),J6=(t,s)=>pr({factory:un,name:t,overrides:a=>({fieldBehaviours:_e([Rt("coupled-input-behaviour",[be(hi(),i=>{rE(i,a,s).each(u=>{zn(i,a,"lock").each(m=>{Gt.isOn(m)&&a.onLockedChange(i,u,m),a.onInput(i)})})})])])})}),Q6=q([J6("field1","field2"),J6("field2","field1"),pr({factory:ns,schema:[ve("dom")],name:"lock",overrides:t=>({buttonBehaviours:_e([Gt.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),eV=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:fc.augment(t.coupledFieldBehaviours,[ln.config({find:S.some}),We.config({store:{mode:"manual",getValue:u=>{const m=Rv(u,t,["field1","field2"]);return{[t.field1Name]:We.getValue(m.field1()),[t.field2Name]:We.getValue(m.field2())}},setValue:(u,m)=>{const f=Rv(u,t,["field1","field2"]);_r(m,t.field1Name)&&We.setValue(f.field1(),m[t.field1Name]),_r(m,t.field2Name)&&We.setValue(f.field2(),m[t.field2Name])}}})]),apis:{getField1:u=>zn(u,t,"field1"),getField2:u=>zn(u,t,"field2"),getLock:u=>zn(u,t,"lock")}}),za=Kr({name:"FormCoupledInputs",configFields:Q9(),partFields:Q6(),factory:eV,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),tV=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=u=>u in s?s[u]:1;let i=t.value.toFixed(a(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},aE=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const i=parseFloat(a[1]),u=a[2];return jt.value({value:i,unit:u})}else return jt.error(t)},eR=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=u=>sn(a,u);return t.unit===s?S.some(t.value):i(t.unit)&&i(s)?a[t.unit]===a[s]?S.some(t.value):S.some(t.value/a[t.unit]*a[s]):S.none()},cE=t=>S.none(),nV=(t,s)=>a=>eR(a,s).map(i=>({value:i*t,unit:s})),tR=(t,s)=>{const a=aE(t).toOptional(),i=aE(s).toOptional();return Da(a,i,(u,m)=>eR(u,m.unit).map(f=>m.value/f).map(f=>nV(f,m.unit)).getOr(cE)).getOr(cE)},nR=(t,s)=>{let a=cE;const i=Xe("ratio-event"),u=$=>pc($,{tag:"span",classes:["tox-icon","tox-lock-icon__"+$]},s.icons),m=()=>!t.enabled||t.context.exists($=>s.checkUiComponentContext($).shouldDisable),f=t.context.map($=>Uo(()=>s.checkUiComponentContext($))),h=t.label.getOr("Constrain proportions"),b=s.translate(h),C=za.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":b,"data-mce-name":h}},components:[u("lock"),u("unlock")],buttonBehaviours:_e([rt.config({disabled:m}),...f.toArray(),no.config({}),So.config(s.tooltips.getConfig({tooltipText:b}))])}),x=$=>({dom:{tag:"div",classes:[t.inDialog?"tox-form__group":"tox-context-form__group"]},components:$}),k=$=>un.parts.field({factory:_i,inputClasses:t.inDialog?["tox-textfield"]:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:$?t.width:t.height,inputBehaviours:_e([rt.config({disabled:m}),...f.toArray(),no.config({}),Rt("size-input-events",[be(rl(),(G,Y)=>{st(G,i,{isField1:$})}),be(Pu(),(G,Y)=>{t.name.each(ce=>st(G,ya,{name:ce}))})]),...t.onEnter.map(G=>it.config({mode:"special",onEnter:G})).toArray()]),selectOnFocus:!1}),A=$=>({dom:{tag:"label",classes:["tox-label"]},components:[lo(s.translate($))]}),N=za.parts.field1(x([un.parts.label(A("Width")),k(!0)])),L=za.parts.field2(x([un.parts.label(A("Height")),k(!1)])),F=at(re),J=Da(t.onSetup,t.getApi,($,G)=>[Di({onSetup:$,getApi:G},F),js({getApi:G},F)]).getOr([]);return za.sketch({dom:{tag:"div",classes:[t.inDialog?"tox-form__group":"tox-context-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[N,L,x([A(XB),C])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:($,G,Y)=>{aE(We.getValue($)).each(ce=>{a(ce).each(le=>{We.setValue(G,tV(le))})})},onInput:$=>Qt($,BM),coupledFieldBehaviours:_e([rt.config({disabled:m,onDisabled:$=>{za.getField1($).bind(un.getField).each(rt.disable),za.getField2($).bind(un.getField).each(rt.disable),za.getLock($).each(rt.disable)},onEnabled:$=>{za.getField1($).bind(un.getField).each(rt.enable),za.getField2($).bind(un.getField).each(rt.enable),za.getLock($).each(rt.enable)}}),Uo(()=>s.checkUiComponentContext("mode:design")),Rt("size-input-events",[be(i,($,G)=>{const Y=G.event.isField1,ce=Y?za.getField1($):za.getField2($),le=Y?za.getField2($):za.getField1($),Me=ce.map(We.getValue).getOr(""),Ge=le.map(We.getValue).getOr("");a=tR(Me,Ge)}),be(BM,$=>{t.onInput.each(G=>G($))}),...J])])})},oV=(t,s)=>nR({inDialog:!0,label:t.label,enabled:t.enabled,context:S.some(t.context),name:S.some(t.name),width:"",height:"",onEnter:S.none(),onInput:S.none(),onSetup:S.none(),getApi:S.none()},s),oR=(t,s,a)=>{const i=Yc.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[lo(s.translate(t.label))]}),u=Yc.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),m=Yc.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Yc.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:q(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,u,m],sliderBehaviours:_e([Sr.self(),Ct.config({})]),onChoose:(f,h,b)=>{st(f,ya,{name:t.name,value:b})},onChange:(f,h,b)=>{st(f,ya,{name:t.name,value:b})}})},sV=(t,s)=>{const a=h=>({dom:{tag:"th",innerHtml:s.translate(h)}}),i=h=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:we(h,a)}]}),u=h=>({dom:{tag:"td",innerHtml:s.translate(h)}}),m=h=>({dom:{tag:"tr"},components:we(h,u)}),f=h=>({dom:{tag:"tbody"},components:we(h,m)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),f(t.cells)],behaviours:_e([no.config({}),Ct.config({})])}},sR=(t,s)=>{const a=t.label.map(N=>ru(N,s)),i=[rt.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable}),Uo(()=>s.checkUiComponentContext(t.context)),it.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:N=>(Qt(N,b0),S.some(!0))}),Rt("textfield-change",[be(hi(),(N,L)=>{st(N,ya,{name:t.name})}),be(CS(),(N,L)=>{st(N,ya,{name:t.name})})]),no.config({})],u=t.validation.map(N=>cu.config({getRoot:L=>ga(L.element),invalidClass:"tox-invalid",validator:{validate:L=>{const F=We.getValue(L),J=N.validator(F);return yr.pure(J===!0?jt.value(F):jt.error(J))},validateOnLoad:N.validateOnLoad}})).toArray(),m=t.placeholder.fold(q({}),N=>({placeholder:s.translate(N)})),f=t.inputMode.fold(q({}),N=>({inputmode:N})),h={...m,...f,"data-mce-name":t.name},b=un.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(N=>({data:N})).getOr({}),inputAttributes:h,inputClasses:[t.classname],inputBehaviours:_e(Dt([i,u])),selectOnFocus:!1,factory:_i}),C=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[b]}:b,k=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),A=[rt.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:N=>{un.getField(N).each(rt.disable)},onEnabled:N=>{un.getField(N).each(rt.enable)}}),Uo(()=>s.checkUiComponentContext(t.context))];return h0(a,C,k,A)},rV=(t,s,a)=>sR({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:S.none(),maximized:t.maximized,data:a,context:t.context},s),rR=(t,s,a)=>sR({name:t.name,multiline:!0,label:t.label,inputMode:S.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:S.none(),maximized:t.maximized,data:a,context:t.context},s),D0=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),nd=t=>t.dimension.property,Yf=(t,s)=>t.dimension.getDimension(s),M0=(t,s)=>{const a=D0(t,s);cl(a,[s.shrinkingClass,s.growingClass])},Sy=(t,s)=>{bo(t.element,s.openClass),Xo(t.element,s.closedClass),Pt(t.element,nd(s),"0px"),Yi(t.element)},xy=(t,s)=>{bo(t.element,s.closedClass),Xo(t.element,s.openClass),rn(t.element,nd(s))},R0=(t,s,a,i)=>{a.setCollapsed(),Pt(t.element,nd(s),Yf(s,t.element)),M0(t,s),Sy(t,s),s.onStartShrink(t),s.onShrunk(t)},aV=(t,s,a,i)=>{const u=i.getOrThunk(()=>Yf(s,t.element));a.setCollapsed(),Pt(t.element,nd(s),u),Yi(t.element);const m=D0(t,s);bo(m,s.growingClass),Xo(m,s.shrinkingClass),Sy(t,s),s.onStartShrink(t)},aR=(t,s,a)=>{const i=Yf(s,t.element);(i==="0px"?R0:aV)(t,s,a,S.some(i))},cR=(t,s,a)=>{const i=D0(t,s),u=na(i,s.shrinkingClass),m=Yf(s,t.element);xy(t,s);const f=Yf(s,t.element);(u?()=>{Pt(t.element,nd(s),m),Yi(t.element)}:()=>{Sy(t,s)})(),bo(i,s.shrinkingClass),Xo(i,s.growingClass),xy(t,s),Pt(t.element,nd(s),f),a.setExpanded(),s.onStartGrow(t)},cV=(t,s,a)=>{if(a.isExpanded()){rn(t.element,nd(s));const i=Yf(s,t.element);Pt(t.element,nd(s),i)}},iR=(t,s,a)=>{a.isExpanded()||cR(t,s,a)},iV=(t,s,a)=>{a.isExpanded()&&aR(t,s,a)},lV=(t,s,a)=>{a.isExpanded()&&R0(t,s,a)},uV=(t,s,a)=>a.isExpanded(),lR=(t,s,a)=>a.isCollapsed(),iE=(t,s,a)=>{const i=D0(t,s);return na(i,s.growingClass)===!0},uR=(t,s,a)=>{const i=D0(t,s);return na(i,s.shrinkingClass)===!0};var mV=Object.freeze({__proto__:null,refresh:cV,grow:iR,shrink:iV,immediateShrink:lV,hasGrown:uV,hasShrunk:lR,isGrowing:iE,isShrinking:uR,isTransitioning:(t,s,a)=>iE(t,s)||uR(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?aR:cR)(t,s,a)},disableTransitions:M0,immediateGrow:(t,s,a)=>{a.isExpanded()||(xy(t,s),Pt(t.element,nd(s),Yf(s,t.element)),M0(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),dR=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const i=s.expanded;return cc(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Um(s.dimension.property,"0px")})},events:(t,s)=>In([Id(Hp(),(a,i)=>{i.event.raw.propertyName===t.dimension.property&&(M0(a,t),s.isExpanded()&&rn(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),mR=[ve("closedClass"),ve("openClass"),ve("shrinkingClass"),ve("growingClass"),En("getAnimationRoot"),an("onShrunk"),an("onStartShrink"),an("onGrown"),an("onStartGrow"),se("expanded",!1),Tn("dimension",Ts("property",{width:[io("property","width"),io("getDimension",t=>Ft(t)+"px")],height:[io("property","height"),io("getDimension",t=>es(t)+"px")]}))],fR=Object.freeze({__proto__:null,init:t=>{const s=at(t.expanded),a=()=>"expanded: "+s.get();return zr({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:dn(s.set,!1),setExpanded:dn(s.set,!0),readState:a})}});const ia=zs({fields:mR,name:"sliding",active:dR,apis:mV,state:fR}),gV=t=>({isEnabled:()=>!rt.isDisabled(t),setEnabled:s=>rt.set(t,!s),setActive:s=>{const a=t.element;s?(Xo(a,"tox-tbtn--enabled"),Ve(a,"aria-pressed",!0)):(bo(a,"tox-tbtn--enabled"),Vn(a,"aria-pressed"))},isActive:()=>na(t.element,"tox-tbtn--enabled"),setText:s=>{st(t,yc,{text:s})},setIcon:s=>st(t,Kf,{icon:s})}),od=(t,s,a,i,u=!0,m)=>eE({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(f,h)=>{const b={pattern:t.search.isSome()?SH(f):""};t.fetch(C=>{h(Yh(C,Ti.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},b,gV(f))},onSetup:t.onSetup,getApi:gV,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...u?[no.config({})]:[]],context:t.context},s,a.shared,m),hV=(t,s,a)=>{const i=m=>f=>{const h=!f.isActive();f.setActive(h),m.storage.set(h),a.shared.getSink().each(b=>{s().getOpt(b).each(C=>{La(C.element),st(C,au,{name:m.name,value:m.storage.get()})})})},u=m=>f=>{f.setActive(m.storage.get())};return m=>{m(we(t,f=>{const h=f.text.fold(()=>({}),b=>({text:b}));return{type:f.type,active:!1,...h,context:f.context,onAction:i(f),onSetup:u(f)}}))}},lE=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[lo(t)]}),gR=(t,s,a)=>{t.customStateIcon.each(i=>s.push(dE(i,a.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],u=>[So.config(a.shared.providers.tooltips.getConfig({tooltipText:u}))]),["tox-icon-custom-state"])))},hR=Xe("leaf-label-event-id"),uE=({leaf:t,onLeafAction:s,visible:a,treeId:i,selectedId:u,backstage:m})=>{const f=t.menu.map(b=>od(b,"tox-mbtn",m,S.none(),a)),h=[lE(t.title)];return gR(t,h,m),f.each(b=>h.push(b)),ns.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:h,role:"treeitem",action:b=>{s(t.id),b.getSystem().broadcastOn([`update-active-item-${i}`],{value:t.id})},eventOrder:{[Lc()]:[hR,"keying"]},buttonBehaviours:_e([...a?[no.config({})]:[],Gt.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Ba.config({channels:{[`update-active-item-${i}`]:{onReceive:(b,C)=>{(C.value===t.id?Gt.on:Gt.off)(b)}}}}),Rt(hR,[co((b,C)=>{u.each(x=>{(x===t.id?Gt.on:Gt.off)(b)})}),be(Lc(),(b,C)=>{const x=C.event.raw.code==="ArrowLeft",k=C.event.raw.code==="ArrowRight";x?(fs(b.element,".tox-tree--directory").each(A=>{b.getSystem().getByDom(A).each(N=>{Ci(A,".tox-tree--directory__label").each(L=>{N.getSystem().getByDom(L).each(Ct.focus)})})}),C.stop()):k&&C.stop()})])])})},dE=(t,s,a,i,u)=>pc(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(i||[]),behaviours:a,attributes:u},s),mE=(t,s)=>dE(t,s,[]),fE=Xe("directory-label-event-id"),pV=({directory:t,visible:s,noChildren:a,backstage:i})=>{const u=t.menu.map(h=>od(h,"tox-mbtn",i,S.none())),m=[{dom:{tag:"div",classes:["tox-chevron"]},components:[mE("chevron-right",i.shared.providers.icons)]},lE(t.title)];gR(t,m,i),u.each(h=>{m.push(h)});const f=h=>{fs(h.element,".tox-tree--directory").each(b=>{h.getSystem().getByDom(b).each(C=>{const x=!Gt.isOn(C);Gt.toggle(C),st(h,"expand-tree-node",{expanded:x,node:t.id})})})};return ns.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:m,action:f,eventOrder:{[Lc()]:[fE,"keying"]},buttonBehaviours:_e([...s?[no.config({})]:[],Rt(fE,[be(Lc(),(h,b)=>{const C=b.event.raw.code==="ArrowRight",x=b.event.raw.code==="ArrowLeft";C&&a&&b.stop(),(C||x)&&fs(h.element,".tox-tree--directory").each(k=>{h.getSystem().getByDom(k).each(A=>{!Gt.isOn(A)&&C||Gt.isOn(A)&&x?(f(h),b.stop()):x&&!Gt.isOn(A)&&(fs(A.element,".tox-tree--directory").each(N=>{Ci(N,".tox-tree--directory__label").each(L=>{A.getSystem().getByDom(L).each(Ct.focus)})}),b.stop())})})})])])})},bV=({children:t,onLeafAction:s,visible:a,treeId:i,expandedIds:u,selectedId:m,backstage:f})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(h=>h.type==="leaf"?uE({leaf:h,selectedId:m,onLeafAction:s,visible:a,treeId:i,backstage:f}):gE({directory:h,expandedIds:u,selectedId:m,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:f})),behaviours:_e([ia.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),_t.config({})])}),vV=Xe("directory-event-id"),gE=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:u,expandedIds:m,selectedId:f})=>{const{children:h}=t,b=at(m),C=k=>h.map(A=>A.type==="leaf"?uE({leaf:A,selectedId:f,onLeafAction:s,visible:k,treeId:i,backstage:u}):gE({directory:A,expandedIds:b.get(),selectedId:f,onLeafAction:s,labelTabstopping:k,treeId:i,backstage:u})),x=m.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[pV({directory:t,visible:a,noChildren:t.children.length===0,backstage:u}),bV({children:h,expandedIds:m,selectedId:f,onLeafAction:s,visible:x,treeId:i,backstage:u})],behaviours:_e([Rt(vV,[co((k,A)=>{Gt.set(k,x)}),be("expand-tree-node",(k,A)=>{const{expanded:N,node:L}=A.event;b.set(N?[...b.get(),L]:b.get().filter(F=>F!==L))})]),Gt.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(k,A)=>{const N=k.components()[1],L=C(A);A?ia.grow(N):ia.shrink(N),_t.set(N,L)}})])}},yV=Xe("tree-event-id"),CV=(t,s)=>{const a=t.onLeafAction.getOr(re),i=t.onToggleExpand.getOr(re),u=t.defaultExpandedIds,m=at(u),f=at(t.defaultSelectedId),h=Xe("tree-id"),b=(C,x)=>t.items.map(k=>k.type==="leaf"?uE({leaf:k,selectedId:C,onLeafAction:a,visible:!0,treeId:h,backstage:s}):gE({directory:k,selectedId:C,onLeafAction:a,expandedIds:x,labelTabstopping:!0,treeId:h,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:b(f.get(),m.get()),behaviours:_e([it.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Rt(yV,[be("expand-tree-node",(C,x)=>{const{expanded:k,node:A}=x.event;m.set(k?[...m.get(),A]:m.get().filter(N=>N!==A)),i(m.get(),{expanded:k,node:A})})]),Ba.config({channels:{[`update-active-item-${h}`]:{onReceive:(C,x)=>{f.set(S.some(x.value)),_t.set(C,b(S.some(x.value),m.get()))}}}}),_t.config({})])}};var SV=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return In([be(t.event,i),jl(()=>s.cancel())].concat(t.cancelEvent.map(u=>[be(u,()=>s.cancel())]).getOr([])))}});const pR=t=>{const s=at(null);return zr({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:m=>{s.set(m)},cancel:()=>{const m=s.get();m!==null&&m.cancel()}})};var bR=Object.freeze({__proto__:null,throttle:pR,init:t=>t.stream.streams.state(t)});const xV=(t,s)=>{const a=t.stream,i=W3(t.onStream,a.delay);return s.setTimer(i),(u,m)=>{i.throttle(u,m),a.stopEvent&&m.stop()}};var wV=[Tn("stream",Ts("mode",{throttle:[ve("delay"),se("stopEvent",!0),io("streams",{setup:xV,state:pR})]})),se("event","input"),En("cancelEvent"),rf("onStream")];const hE=zs({fields:wV,name:"streaming",active:SV,state:bR}),Ey=(t,s,a)=>{const i=We.getValue(a);We.setValue(s,i),yR(s)},vR=(t,s)=>{const a=t.element,i=vi(a),u=a.dom;Vt(a,"type")!=="number"&&s(u,i)},yR=t=>{vR(t,(s,a)=>s.setSelectionRange(a.length,a.length))},EV=(t,s)=>{vR(t,(a,i)=>a.setSelectionRange(s,i.length))},kV=(t,s,a)=>{if(t.selectsOver){const i=We.getValue(s),u=t.getDisplayText(i),m=We.getValue(a);return t.getDisplayText(m).indexOf(u)===0?S.some(()=>{Ey(t,s,a),EV(s,u.length)}):S.none()}else return S.none()},pE=q("alloy.typeahead.itemexecute"),TV=(t,s,a,i)=>{const u=(k,A,N)=>{t.previewing.set(!1);const L=Mo.getCoupled(k,"sandbox");if(hn.isOpen(L))ln.getCurrent(L).each(F=>{bn.getHighlighted(F).fold(()=>{N(F)},()=>{Pb(L,F.element,"keydown",A)})});else{const F=J=>{ln.getCurrent(J).each(N)};Z2(t,f(k),k,L,i,F,bs.HighlightMenuAndItem).get(re)}},m=qO(t),f=k=>A=>A.map(N=>{const L=bu(N.menus),F=oe(L,$=>Hn($.items,G=>G.type==="item"));return We.getState(k).update(we(F,$=>$.data)),N}),h=k=>ln.getCurrent(k),b="typeaheadevents",C=[Ct.config({}),We.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:k=>vi(k.element),getFallbackEntry:k=>({value:k,meta:{}}),setValue:(k,A)=>{mf(k.element,t.model.getDisplayText(A))},...t.initialData.map(k=>Um("initialValue",k)).getOr({})}}),hE.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(k,A)=>{const N=Mo.getCoupled(k,"sandbox");if(Ct.isFocused(k)&&vi(k.element).length>=t.minChars){const F=h(N).bind($=>bn.getHighlighted($).map(We.getValue));t.previewing.set(!0);const J=$=>{h(N).each(G=>{F.fold(()=>{t.model.selectsOver&&bn.highlightFirst(G)},Y=>{bn.highlightBy(G,ce=>We.getValue(ce).value===Y.value),bn.getHighlighted(G).orThunk(()=>(bn.highlightFirst(G),S.none()))})})};Z2(t,f(k),k,N,i,J,bs.HighlightJustMenu).get(re)}},cancelEvent:Ab()}),it.config({mode:"special",onDown:(k,A)=>(u(k,A,bn.highlightFirst),S.some(!0)),onEscape:k=>{const A=Mo.getCoupled(k,"sandbox");return hn.isOpen(A)?(hn.close(A),S.some(!0)):S.none()},onUp:(k,A)=>(u(k,A,bn.highlightLast),S.some(!0)),onEnter:k=>{const A=Mo.getCoupled(k,"sandbox"),N=hn.isOpen(A);if(N&&!t.previewing.get())return h(A).bind(L=>bn.getHighlighted(L)).map(L=>(st(k,pE(),{item:L}),!0));{const L=We.getValue(k);return Qt(k,Ab()),t.onExecute(A,k,L),N&&hn.close(A),S.some(!0)}}}),Gt.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Mo.config({others:{sandbox:k=>zh(t,k,{onOpen:()=>Gt.on(k),onClose:()=>{t.lazyTypeaheadComp.get().each(A=>Vn(A.element,"aria-activedescendant")),Gt.off(k)}})}}),Rt(b,[co(k=>{t.lazyTypeaheadComp.set(S.some(k))}),jl(k=>{t.lazyTypeaheadComp.set(S.none())}),Bu(k=>{const A=re;o3(t,f(k),k,i,A,bs.HighlightMenuAndItem).get(re)}),be(pE(),(k,A)=>{const N=Mo.getCoupled(k,"sandbox");Ey(t.model,k,A.event.item),Qt(k,Ab()),t.onItemExecute(k,N,A.event.item,We.getValue(k)),hn.close(N),yR(k)})].concat(t.dismissOnBlur?[be(Vg(),k=>{const A=Mo.getCoupled(k,"sandbox");Wr(A.element).isNone()&&hn.close(A)})]:[]))],x={[Wl()]:[We.name(),hE.name(),b],...t.eventOrder};return{uid:t.uid,dom:KO(Co(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...m,...Ho(t.typeaheadBehaviours,C)},eventOrder:x}},_V=q([En("lazySink"),ve("fetch"),se("minChars",5),se("responseTime",1e3),an("onOpen"),se("getHotspot",S.some),se("getAnchorOverrides",q({})),se("layouts",S.none()),se("eventOrder",{}),hS("model",{},[se("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),se("selectsOver",!0),se("populateFromBrowse",!0)]),an("onSetValue"),Zr("onExecute"),an("onItemExecute"),se("inputClasses",[]),se("inputAttributes",{}),se("inputStyles",{}),se("matchWidth",!0),se("useMinWidth",!1),se("dismissOnBlur",!0),Iu(["openClass"]),En("initialData"),En("listRole"),Ws("typeaheadBehaviours",[Ct,We,hE,it,Gt,Mo]),An("lazyTypeaheadComp",()=>at(S.none)),An("previewing",()=>at(!0))].concat(GO()).concat(Uh())),CR=q([Hc({schema:[th()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(u=>{kV(t.model,u,i).fold(()=>{t.model.selectsOver?(bn.dehighlight(a,i),t.previewing.set(!0)):t.previewing.set(!1)},m=>{m(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(u=>{t.model.populateFromBrowse&&Ey(t.model,u,i),gn(i.element,"id").each(m=>Ve(u.element,"aria-activedescendant",m))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(i=>(st(i,pE(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&Ey(t.model,i,a)})}})})]),AV=Kr({name:"Typeahead",configFields:_V(),partFields:CR(),factory:TV}),Pi=t=>({...t,toCached:()=>Pi(t.toCached()),bindFuture:b=>Pi(t.bind(C=>C.fold(x=>yr.pure(jt.error(x)),x=>b(x)))),bindResult:b=>Pi(t.map(C=>C.bind(b))),mapResult:b=>Pi(t.map(C=>C.map(b))),mapError:b=>Pi(t.map(C=>C.mapError(b))),foldResult:(b,C)=>t.map(x=>x.fold(b,C)),withTimeout:(b,C)=>Pi(yr.nu(x=>{let k=!1;const A=setTimeout(()=>{k=!0,x(jt.error(C()))},b);t.get(N=>{k||(clearTimeout(A),x(N))})}))}),SR=t=>Pi(yr.nu(t)),xR=t=>Pi(yr.pure(jt.value(t))),wR={nu:SR,wrap:Pi,pure:xR,value:xR,error:t=>Pi(yr.pure(jt.error(t))),fromResult:t=>Pi(yr.pure(t)),fromFuture:t=>Pi(t.map(jt.value)),fromPromise:t=>SR(s=>{t.then(a=>{s(jt.value(a))},a=>{s(jt.error(a))})})},ky=(t,s,a=[],i,u,m,f)=>{const h=s.fold(()=>({}),x=>({action:x})),b={buttonBehaviours:_e([Gc.item(()=>!t.enabled||f.checkUiComponentContext(t.context).shouldDisable),Uo(()=>f.checkUiComponentContext(t.context)),no.config({}),...m.map(x=>So.config(f.tooltips.getConfig({tooltipText:f.translate(x)}))).toArray(),Rt("button press",[xS("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...h},C=Co(b,{dom:i});return Co(C,{components:u})},ER=(t,s,a,i=[],u)=>{const m=t.tooltip.map(C=>({"aria-label":a.translate(C)})).getOr({}),f={tag:"button",classes:["tox-tbtn"],attributes:{...m,"data-mce-name":u}},h=t.icon.map(C=>O0(C,a.icons)),b=Fh([h]);return ky(t,s,i,f,b,t.tooltip,a)},Ty=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},_y=(t,s,a,i=[],u=[])=>{const m=a.translate(t.text),f=t.icon.map(N=>O0(N,a.icons)),h=[f.getOrThunk(()=>lo(m))],b=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),k={tag:"button",classes:[...Ty(b),...f.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...u],attributes:{"aria-label":m,"data-mce-name":t.text}},A=t.icon.map(q(m));return ky(t,s,i,k,h,A,a)},kR=(t,s,a,i=[],u=[])=>{const m=_y(t,S.some(s),a,i,u);return ns.sketch(m)},bE=(t,s)=>a=>{s==="custom"?st(a,au,{name:t,value:{}}):s==="submit"?Qt(a,b0):s==="cancel"?Qt(a,Ju):console.error("Unknown button type: ",s)},TR=(t,s)=>s==="menu",DV=(t,s)=>s==="custom"||s==="cancel"||s==="submit",_R=(t,s)=>s==="togglebutton",MV=(t,s,a)=>{var i,u;const m=t.icon.map(Y=>dm(Y,s.icons)).map(yn),f=Y=>{st(Y,au,{name:t.name,value:{setIcon:ce=>{m.map(le=>le.getOpt(Y).each(Me=>{_t.set(Me,[dm(ce,s.icons)])}))}}})},h=t.buttonType.getOr(t.primary?"primary":"secondary"),b={...t,name:(i=t.name)!==null&&i!==void 0?i:"",primary:h==="primary",tooltip:t.tooltip,enabled:(u=t.enabled)!==null&&u!==void 0?u:!1,borderless:!1},C=b.tooltip.or(t.text).map(Y=>({"aria-label":s.translate(Y)})).getOr({}),x=Ty(h??"secondary"),k=t.icon.isSome()&&t.text.isSome(),A={tag:"button",classes:[...x.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...k?["tox-button--icon-and-text"]:[]],attributes:{...C,...so(a)?{"data-mce-name":a}:{}}},N=[],L=s.translate(t.text.getOr("")),F=lo(L),$=[...Fh([m.map(Y=>Y.asSpec())]),...t.text.isSome()?[F]:[]],G=ky(b,S.some(f),N,A,$,t.tooltip,s);return ns.sketch(G)},Ay=(t,s,a)=>{if(TR(t,s)){const i=()=>f,u=t,m={...t,type:"menubutton",search:S.none(),onSetup:h=>(h.setEnabled(t.enabled),re),fetch:hV(u.items,i,a)},f=yn(od(m,"tox-tbtn",a,S.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return f.asSpec()}else if(DV(t,s)){const i=bE(t.name,s),u={...t,context:s==="cancel"?"any":t.context,borderless:!1};return kR(u,i,a.shared.providers,[])}else{if(_R(t,s))return MV(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},vl=(t,s)=>{const a=bE(t.name,"custom");return LH(S.none(),un.parts.field({factory:ns,..._y(t,S.some(a),s,[qf(""),Sr.self()])}))},Oy={type:"separator"},Dy=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:re}),vE=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:re}),yE=t=>we(t,Dy),RV=(t,s)=>Hn(s,a=>a.type===t),My=(t,s)=>yE(RV(t,s)),AR=t=>My("header",t.targets),CE=t=>My("anchor",t.targets),NV=t=>S.from(t.anchorTop).map(s=>vE("<top>",s)).toArray(),PV=t=>S.from(t.anchorBottom).map(s=>vE("<bottom>",s)).toArray(),OR=t=>we(t,s=>vE(s,s)),BV=t=>Zo(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(Oy,a),[]),SE=(t,s)=>{const a=t.toLowerCase();return Hn(s,i=>{var u;const m=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,f=(u=i.value)!==null&&u!==void 0?u:"";return Bs(m.toLowerCase(),a)||Bs(f.toLowerCase(),a)})},xE=(t,s,a)=>{var i,u;const m=We.getValue(s),f=(u=(i=m==null?void 0:m.meta)===null||i===void 0?void 0:i.text)!==null&&u!==void 0?u:m.value;return a.getLinkInformation().fold(()=>[],b=>{const C=SE(f,OR(a.getHistory(t)));return t==="file"?BV([C,SE(f,AR(b)),SE(f,Dt([NV(b),CE(b),PV(b)]))]):C})},DR=Xe("aria-invalid"),LV=(t,s,a,i)=>{const u=s.shared.providers,m=G=>{const Y=We.getValue(G);a.addToHistory(Y.value,t.filetype)},f={...i.map(G=>({initialData:G})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":DR,type:"url"},minChars:0,responseTime:0,fetch:G=>{const Y=xE(t.filetype,G,a),ce=Yh(Y,Ti.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:S.none()});return yr.pure(ce)},getHotspot:G=>L.getOpt(G),onSetValue:(G,Y)=>{G.hasConfigured(cu)&&cu.run(G).get(re)},typeaheadBehaviours:_e([...a.getValidationHandler().map(G=>cu.config({getRoot:Y=>ga(Y.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Y,ce)=>{x.getOpt(Y).each(le=>{Ve(le.element,"title",u.translate(ce))})}},validator:{validate:Y=>{const ce=We.getValue(Y);return wR.nu(le=>{G({type:t.filetype,url:ce.value},Me=>{if(Me.status==="invalid"){const Ge=jt.error(Me.message);le(Ge)}else{const Ge=jt.value(Me.message);le(Ge)}})})},validateOnLoad:!1}})).toArray(),rt.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable}),no.config({}),Rt("urlinput-events",[be(hi(),G=>{const Y=vi(G.element),ce=Y.trim();ce!==Y&&mf(G.element,ce),t.filetype==="file"&&st(G,ya,{name:t.name})}),be(Pu(),G=>{st(G,ya,{name:t.name}),m(G)}),be(CS(),G=>{st(G,ya,{name:t.name}),m(G)})])]),eventOrder:{[hi()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:G=>G.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:Y1(!1,1,"normal")},onExecute:(G,Y,ce)=>{st(Y,b0,{})},onItemExecute:(G,Y,ce,le)=>{m(G),st(G,ya,{name:t.name})}},h=un.parts.field({...f,factory:AV}),b=t.label.map(G=>ru(G,u)),x=yn(((G,Y,ce=G,le=G)=>pc(ce,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+G],attributes:{title:u.translate(le),"aria-live":"polite",...Y.fold(()=>({}),Me=>({id:Me}))}},u.icons))("invalid",S.some(DR),"warning")),k=yn({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[x.asSpec()]}),A=a.getUrlPicker(t.filetype),N=Xe("browser.url.event"),L=yn({dom:{tag:"div",classes:["tox-control-wrap"]},components:[h,k.asSpec()],behaviours:_e([rt.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable})])}),F=yn(kR({context:t.context,name:t.name,icon:S.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:S.none(),borderless:!0},G=>Qt(G,N),u,[],["tox-browse-url"])),J=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Dt([[L.asSpec()],A.map(()=>F.asSpec()).toArray()])}),$=G=>{ln.getCurrent(G).each(Y=>{const ce=We.getValue(Y),le={fieldname:t.name,...ce};A.each(Me=>{Me(le).get(Ge=>{We.setValue(Y,Ge),st(G,ya,{name:t.name})})})})};return un.sketch({dom:FH(),components:b.toArray().concat([J()]),fieldBehaviours:_e([rt.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable,onDisabled:G=>{un.getField(G).each(rt.disable),F.getOpt(G).each(rt.disable)},onEnabled:G=>{un.getField(G).each(rt.enable),F.getOpt(G).each(rt.enable)}}),Uo(()=>u.checkUiComponentContext(t.context)),Rt("url-input-events",[be(N,$)])])})},MR=(t,s)=>{const a=t4(t.icon,s.icons);return pl.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[ns.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:i=>st(i,au,{name:"alert-banner",value:t.url}),buttonBehaviours:_e([PO()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},RR=(t,s)=>{t.dom.checked=s},IV=t=>t.dom.checked,FV=(t,s,a)=>{const i=b=>(b.element.dom.click(),S.some(!0)),u=un.parts.field({factory:{sketch:$t},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:_e([Sr.self(),rt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:b=>{ga(b.element).each(C=>Xo(C,"tox-checkbox--disabled"))},onEnabled:b=>{ga(b.element).each(C=>bo(C,"tox-checkbox--disabled"))}}),no.config({}),Ct.config({}),fy(a,IV,RR),it.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),Rt("checkbox-events",[be(Pu(),(b,C)=>{st(b,ya,{name:t.name})})])])}),m=un.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[lo(s.translate(t.label))],behaviours:_e([aa.config({})])}),f=b=>pc(b==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+b]},s.icons),h=yn({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[f("checked"),f("unchecked")]});return un.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[u,h.asSpec(),m],fieldBehaviours:_e([rt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),Uo(()=>s.checkUiComponentContext(t.context))])})},$V=(t,s)=>{const a=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],i=Rt("htmlpanel",[co(u=>{t.onInit(u.element.dom)})]);return t.presets==="presentation"?pl.sketch({dom:{tag:"div",classes:a,innerHtml:t.html},containerBehaviours:_e([So.config({...s.tooltips.getConfig({tooltipText:"",onShow:u=>{fo(u.element,"[data-mce-tooltip]:hover").orThunk(()=>Wr(u.element)).each(m=>{gn(m,"data-mce-tooltip").each(f=>{So.setComponents(u,s.tooltips.getComponents({tooltipText:f}))})})}}),mode:"children-normal",anchor:u=>({type:"node",node:fo(u.element,"[data-mce-tooltip]:hover").orThunk(()=>Wr(u.element).filter(m=>gn(m,"data-mce-tooltip").isSome())),root:u.element,layouts:{onLtr:q([ps,Zs,gs,gr,hs,nr]),onRtl:q([ps,Zs,gs,gr,hs,nr])},bubble:Si(0,-2,{})})}),i])}):pl.sketch({dom:{tag:"div",classes:a,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:_e([no.config({}),Ct.config({}),i])})},ys=t=>(s,a,i,u,m)=>He(a,"name").fold(()=>t(a,u,S.none(),m),f=>s.field(f,t(a,u,He(i,f),m))),NR=t=>(s,a,i,u,m)=>{const f=Co(a,{source:"dynamic"});return ys(t)(s,f,i,u,m)},Xc={bar:ys((t,s)=>RM(t,s.shared)),collection:ys((t,s,a)=>$H(t,s.shared.providers,a)),alertbanner:ys((t,s)=>MR(t,s.shared.providers)),input:ys((t,s,a)=>rV(t,s.shared.providers,a)),textarea:ys((t,s,a)=>rR(t,s.shared.providers,a)),label:ys((t,s,a,i)=>Z9(t,s.shared,i)),iframe:NR((t,s,a)=>H9(t,s.shared.providers,a)),button:ys((t,s)=>vl(t,s.shared.providers)),checkbox:ys((t,s,a)=>FV(t,s.shared.providers,a)),colorinput:ys((t,s,a)=>zH(t,s.shared,s.colorinput,a)),colorpicker:ys((t,s,a)=>O9(t,s.shared.providers,a)),dropzone:ys((t,s,a)=>R9(t,s.shared.providers,a)),grid:ys((t,s)=>N9(t,s.shared)),listbox:ys((t,s,a)=>K9(t,s,a)),selectbox:ys((t,s,a)=>J9(t,s.shared.providers,a)),sizeinput:ys((t,s)=>oV(t,s.shared.providers)),slider:ys((t,s,a)=>oR(t,s.shared.providers,a)),urlinput:ys((t,s,a)=>LV(t,s,s.urlinput,a)),customeditor:ys(M9),htmlpanel:ys((t,s)=>$V(t,s.shared.providers)),imagepreview:ys((t,s,a)=>J3(t,a)),table:ys((t,s)=>sV(t,s.shared.providers)),tree:ys((t,s)=>CV(t,s)),panel:ys((t,s)=>Y9(t,s))},wE={field:(t,s)=>s,record:q([])},PR=(t,s,a,i,u)=>{const m=Co(i,{shared:{interpreter:f=>EE(t,f,a,m,u)}});return EE(t,s,a,m,u)},EE=(t,s,a,i,u)=>He(Xc,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),m=>m(t,s,a,i,u)),BR=(t,s,a,i)=>EE(wE,t,s,a,i),mm="layout-inset",kE=t=>t.x,TE=(t,s)=>t.x+t.width/2-s.width/2,Ry=(t,s)=>t.x+t.width-s.width,LR=t=>t.y,IR=(t,s)=>t.y+t.height-s.height,rr=(t,s)=>t.y+t.height/2-s.height/2,Xh=(t,s,a)=>mr(Ry(t,s),IR(t,s),a.insetSouthwest(),ZS(),"southwest",fr(t,{right:0,bottom:3}),mm),Ny=(t,s,a)=>mr(kE(t),IR(t,s),a.insetSoutheast(),US(),"southeast",fr(t,{left:1,bottom:3}),mm),fm=(t,s,a)=>mr(Ry(t,s),LR(t),a.insetNorthwest(),zS(),"northwest",fr(t,{right:0,top:2}),mm),N0=(t,s,a)=>mr(kE(t),LR(t),a.insetNortheast(),ov(),"northeast",fr(t,{left:1,top:2}),mm),Bi=(t,s,a)=>mr(TE(t,s),LR(t),a.insetNorth(),g_(),"north",fr(t,{top:2}),mm),P0=(t,s,a)=>mr(TE(t,s),IR(t,s),a.insetSouth(),h_(),"south",fr(t,{bottom:3}),mm),FR=(t,s,a)=>mr(Ry(t,s),rr(t,s),a.insetEast(),b_(),"east",fr(t,{right:0}),mm),$R=(t,s,a)=>mr(kE(t),rr(t,s),a.insetWest(),p_(),"west",fr(t,{left:1}),mm),HV=t=>{switch(t){case"north":return Bi;case"northeast":return N0;case"northwest":return fm;case"south":return P0;case"southeast":return Ny;case"southwest":return Xh;case"east":return FR;case"west":return $R}},HR=(t,s,a,i,u)=>ox(i).map(HV).getOr(Bi)(t,s,a,i,u),VV=t=>{switch(t){case"north":return P0;case"northeast":return Ny;case"northwest":return Xh;case"south":return Bi;case"southeast":return N0;case"southwest":return fm;case"east":return $R;case"west":return FR}},VR=(t,s,a,i,u)=>ox(i).map(VV).getOr(Bi)(t,s,a,i,u),gm={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},zR=(t,s,a)=>{const u={maxHeightFunction:rh()},m=()=>({type:"node",root:Ml(Xs(t())),node:S.from(t()),bubble:Si(12,12,gm),layouts:{onRtl:()=>[N0],onLtr:()=>[fm]},overrides:u}),f=()=>({type:"hotspot",hotspot:s(),bubble:Si(-12,12,gm),layouts:{onRtl:()=>[gs,hs,ps],onLtr:()=>[hs,gs,ps]},overrides:u});return()=>a()?m():f()},_E=(t,s,a,i)=>{const m={maxHeightFunction:rh()},f=()=>({type:"node",root:Ml(Xs(s())),node:S.from(s()),bubble:Si(12,12,gm),layouts:{onRtl:()=>[Bi],onLtr:()=>[Bi]},overrides:m}),h=()=>t?{type:"node",root:Ml(Xs(s())),node:S.from(s()),bubble:Si(0,-Rl(s()),gm),layouts:{onRtl:()=>[Zs],onLtr:()=>[Zs]},overrides:m}:{type:"hotspot",hotspot:a(),bubble:Si(0,0,gm),layouts:{onRtl:()=>[Zs],onLtr:()=>[Zs]},overrides:m};return()=>i()?f():h()},zV=(t,s,a)=>{const i=()=>({type:"node",root:Ml(Xs(t())),node:S.from(t()),layouts:{onRtl:()=>[Bi],onLtr:()=>[Bi]}}),u=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[ps],onLtr:()=>[ps]}});return()=>a()?i():u()},UR=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),i=t.model.table.getSelectedCells();if(i.length>1){const u=i[0],m=i[i.length-1],f={firstCell:Be.fromDom(u),lastCell:Be.fromDom(m)};return S.some(f)}return S.some(o1.range(Be.fromDom(a.startContainer),a.startOffset,Be.fromDom(a.endContainer),a.endOffset))}}),UV=t=>s=>({type:"node",root:t(),node:s}),ZV=(t,s,a,i)=>{const u=Ei(t),m=()=>Be.fromDom(t.getBody()),f=()=>Be.fromDom(t.getContentAreaContainer()),h=()=>u||!i();return{inlineDialog:zR(f,s,h),inlineBottomDialog:_E(t.inline,f,a,h),banner:zV(f,s,h),cursor:UR(t,m),node:UV(m)}},ZR=t=>(s,a)=>{rM(t)(s,a)},eq=t=>()=>vs(t),tq=t=>s=>qc(t,s),WR=t=>s=>z2(t,s),WV=t=>({colorPicker:ZR(t),hasCustomColors:eq(t),getColors:tq(t),getColorCols:WR(t)}),jV=t=>()=>uO(t),jR=t=>({isDraggableModal:jV(t)}),AE=t=>{const s=at(Fw(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},GR=t=>_r(t,"items"),qR=t=>_r(t,"format"),OE=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],GV=t=>sn(t,"items"),qV=t=>sn(t,"block"),KV=t=>sn(t,"inline"),YV=t=>sn(t,"selector"),B0=t=>Zo(t,(s,a)=>{if(GV(a)){const i=B0(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(KV(a)||qV(a)||YV(a)){const u=`custom-${on(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:u,format:a}]),formats:s.formats.concat([{title:a.title,format:u,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),DE=(t,s)=>{const a=B0(s),i=u=>{Ue(u,m=>{t.formatter.has(m.name)||t.formatter.register(m.name,m.format)})};return t.formatter?i(a.customFormats):t.on("init",()=>{i(a.customFormats)}),a.formats},KR=t=>Aw(t).map(s=>{const a=DE(t,s);return Ow(t)?OE.concat(a):a}).getOr(OE),XV=t=>{const s=ao(t);return s.length===1&&wn(s,"title")},YR=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),XR=(t,s,a,i)=>{const u=b=>YR(b,a,i),m=b=>{const C=h(b.items);return{...b,type:"submenu",getStyleItems:q(C)}},f=b=>{const C=on(b.name)?b.name:Xe(b.title),x=`custom-${C}`,k={...b,type:"formatter",format:x,isSelected:a(x),getStylePreview:i(x)};return t.formatter.register(C,k),k},h=b=>we(b,C=>GR(C)?m(C):qR(C)?u(C):XV(C)?{...C,type:"separator"}:f(C));return h(s)},JV=t=>{const s=h=>()=>t.formatter.match(h),a=h=>()=>{const b=t.formatter.get(h);return b!==void 0?S.some({tag:b.length>0&&(b[0].inline||b[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):S.none()},i=at([]),u=at([]),m=at(!1);return t.on("PreInit",h=>{const b=KR(t),C=XR(t,b,s,a);i.set(C)}),t.on("addStyleModifications",h=>{const b=XR(t,h.items,s,a);u.set(b),m.set(h.replace)}),{getData:()=>{const h=m.get()?[]:i.get(),b=u.get();return h.concat(b)}}},QV=t=>{let i=0;const u=()=>i>0,m=h=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[lo(h.tooltipText)]}];return{getConfig:h=>({delayForShow:()=>u()?60:300,delayForHide:q(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:m(h),onShow:(b,C)=>{i++,h.onShow&&h.onShow(b,C)},onHide:(b,C)=>{i--,h.onHide&&h.onHide(b,C)},onSetup:h.onSetup}),getComponents:m}},ME=t=>so(t)&&t.nodeType===1,ez=td.trim,L0=t=>s=>!!(ME(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),tz=L0("true"),Jh=L0("false"),JR=(t,s,a,i,u)=>({type:t,title:s,url:a,level:i,attach:u}),RE=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return tz(s)}return!1},Qh=(t,s)=>we(oa(Be.fromDom(s),t),a=>a.dom),NE=t=>t.innerText||t.textContent,QR=t=>t.id?t.id:Xe("h"),PE=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,eN=t=>PE(t)&&BE(t),Py=t=>t&&/^(H[1-6])$/.test(t.nodeName),BE=t=>RE(t)&&!Jh(t),tN=t=>Py(t)&&BE(t),LE=t=>Py(t)?parseInt(t.nodeName.substr(1),10):0,Xf=t=>{var s;const a=QR(t),i=()=>{t.id=a};return JR("header",(s=NE(t))!==null&&s!==void 0?s:"","#"+a,LE(t),i)},nz=t=>{const s=t.id||t.name,a=NE(t);return JR("anchor",a||"#"+s,"#"+s,0,re)},oz=t=>we(Hn(t,tN),Xf),ep=t=>we(Hn(t,eN),nz),nN=t=>Qh("h1,h2,h3,h4,h5,h6,a:not([href])",t),By=t=>ez(t.title).length>0,IE={find:t=>{const s=nN(t);return Hn(oz(s).concat(ep(s)),By)}},Li="tinymce-url-history",oN=5,sN=t=>on(t)&&/^https?/.test(t),rz=t=>ho(t)&&t.length<=oN&&Br(t,sN),Ly=t=>X(t)&&Wo(t,s=>!rz(s)).isNone(),rN=()=>{const t=Yu.getItem(Li);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+Li+" was not valid JSON",a),{};throw a}return Ly(s)?s:(console.log("Local storage "+Li+" was not valid format",s),{})},az=t=>{if(!Ly(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Yu.setItem(Li,JSON.stringify(t))},cz=t=>{const s=rN();return He(s,t).getOr([])},iz=(t,s)=>{if(!sN(t))return;const a=rN(),i=He(a,s).getOr([]),u=Hn(i,m=>m!==t);a[s]=[t].concat(u).slice(0,oN),az(a)},aN=t=>!!t,lz=t=>Zn(td.makeMap(t,/[, ]/),aN),FE=t=>S.from(cO(t)),cN=t=>{const s=S.from(lO(t)).filter(aN).map(lz);return FE(t).fold(Sn,a=>s.fold(nt,i=>ao(i).length>0?i:!1))},uz=(t,s)=>{const a=cN(t);return kr(a)?a?FE(t):S.none():a[s]?FE(t):S.none()},I0=(t,s)=>uz(t,s).map(a=>i=>yr.nu(u=>{const m=(h,b)=>{if(!on(h))throw new Error("Expected value to be string");if(b!==void 0&&!X(b))throw new Error("Expected meta to be a object");u({value:h,meta:b})},f={filetype:s,fieldname:i.fieldname,...S.from(i.meta).getOr({})};a.call(t,m,i.value,f)})),iN=t=>S.from(t).filter(on).getOrUndefined(),dz=t=>r2(t)?S.some({targets:IE.find(t.getBody()),anchorTop:iN(Nw(t)),anchorBottom:iN(Pw(t))}):S.none(),$E=t=>S.from(Rw(t)),lN=t=>({getHistory:cz,addToHistory:iz,getLinkInformation:()=>dz(t),getValidationHandler:()=>$E(t),getUrlPicker:s=>I0(t,s)}),Iy=(t,s,a,i)=>{const u=at(!1),m=AE(s),f={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Zc.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:QV(t.dialog),checkUiComponentContext:$=>{if(t2(s))return{contextType:"disabled",shouldDisable:!0};const[G,Y=""]=$.split(":"),ce=s.ui.registry.getAll().contexts,le=He(ce,G).fold(()=>He(ce,"mode").map(Me=>Me("design")).getOr(!1),Me=>Y.charAt(0)==="!"?!Me(Y.slice(1)):Me(Y));return{contextType:G,shouldDisable:!le}}},h=lN(s),b=JV(s),C=WV(s),x=jR(s),k=()=>u.get(),A=$=>u.set($),N={shared:{providers:f,anchors:ZV(s,a,i,m.isPositionedAtTop),header:m},urlinput:h,styles:b,colorinput:C,dialog:x,isContextMenuOpen:k,setContextMenuState:A},L=$=>S.none(),F={...N,shared:{...N.shared,interpreter:$=>BR($,{},F,L),getSink:t.popup}},J={...N,shared:{...N.shared,interpreter:$=>BR($,{},J,L),getSink:t.dialog}};return{popup:F,dialog:J}},mz=(t,s,a)=>{const i=(pe,Ke)=>{Ue([s,...a],Le=>{Le.broadcastEvent(pe,Ke)})},u=(pe,Ke)=>{Ue([s,...a],Le=>{Le.broadcastOn([pe],Ke)})},m=pe=>u(Wd(),{target:pe.target}),f=_d(),h=jr(f,"touchstart",m),b=jr(f,"touchmove",pe=>i(hP(),pe)),C=jr(f,"touchend",pe=>i(pP(),pe)),x=jr(f,"mousedown",m),k=jr(f,"mouseup",pe=>{pe.raw.button===0&&u(_x(),{target:pe.target})}),A=pe=>u(Wd(),{target:Be.fromDom(pe.target)}),N=pe=>{pe.button===0&&u(_x(),{target:Be.fromDom(pe.target)})},L=()=>{Ue(t.editorManager.get(),pe=>{t!==pe&&pe.dispatch("DismissPopups",{relatedTarget:t})})},F=pe=>i(Db(),A_(pe)),J=pe=>{u(ih(),{}),i(zg(),A_(pe))},$=Xs(Be.fromDom(t.getElement())),G=sx($,"scroll",pe=>{requestAnimationFrame(()=>{const Ke=t.getContainer();if(Ke!=null){const et=nm(t,s.element).map(Xt=>[Xt.element,...Xt.others]).getOr([]);as(et,Xt=>Dn(Xt,pe.target))&&(t.dispatch("ElementScroll",{target:pe.target.dom}),i(CT(),pe))}})}),Y=()=>u(ih(),{}),ce=pe=>{pe.state&&u(Wd(),{target:Be.fromDom(t.getContainer())})},le=pe=>{u(Wd(),{target:Be.fromDom(pe.relatedTarget.getContainer())})},Me=pe=>t.dispatch("focusin",pe),Ge=pe=>t.dispatch("focusout",pe);t.on("PostRender",()=>{t.on("click",A),t.on("tap",A),t.on("mouseup",N),t.on("mousedown",L),t.on("ScrollWindow",F),t.on("ResizeWindow",J),t.on("ResizeEditor",Y),t.on("AfterProgressState",ce),t.on("DismissPopups",le),Ue([s,...a],pe=>{pe.element.dom.addEventListener("focusin",Me),pe.element.dom.addEventListener("focusout",Ge)})}),t.on("remove",()=>{t.off("click",A),t.off("tap",A),t.off("mouseup",N),t.off("mousedown",L),t.off("ScrollWindow",F),t.off("ResizeWindow",J),t.off("ResizeEditor",Y),t.off("AfterProgressState",ce),t.off("DismissPopups",le),Ue([s,...a],pe=>{pe.element.dom.removeEventListener("focusin",Me),pe.element.dom.removeEventListener("focusout",Ge)}),x.unbind(),h.unbind(),b.unbind(),C.unbind(),k.unbind(),G.unbind()}),t.on("detach",()=>{Ue([s,...a],xi),Ue([s,...a],pe=>pe.destroy())})},As=dG,uu=y1,fz=q([se("shell",!1),ve("makeItem"),se("setupItem",re),fc.field("listBehaviours",[_t])]),HE=va({name:"items",overrides:()=>({behaviours:_e([_t.config({})])})}),gz=q([HE]),hz=q("CustomList"),pz=(t,s,a,i)=>{const u=(h,b)=>{f(h).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},C=>{const x=_t.contents(C),k=b.length,A=k-x.length,N=A>0?Ja(A,()=>t.makeItem()):[],L=x.slice(k);Ue(L,J=>_t.remove(C,J)),Ue(N,J=>_t.append(C,J));const F=_t.contents(C);Ue(F,(J,$)=>{t.setupItem(h,J,b[$],$)})})},m=t.shell?{behaviours:[_t.config({})],components:[]}:{behaviours:[],components:s},f=h=>t.shell?S.some(h):zn(h,t,"items");return{uid:t.uid,dom:t.dom,components:m.components,behaviours:Ho(t.listBehaviours,m.behaviours),apis:{setItems:u}}},uN=Kr({name:hz(),configFields:fz(),partFields:gz(),factory:pz,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),tp=q([ve("dom"),se("shell",!0),Ws("toolbarBehaviours",[_t])]),sq=q([va({name:"groups",overrides:()=>({behaviours:_e([_t.config({})])})})]),bz=(t,s,a,i)=>{const u=(h,b)=>{m(h).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},C=>{_t.set(C,b)})},m=h=>t.shell?S.some(h):zn(h,t,"groups"),f=t.shell?{behaviours:[_t.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:f.components,behaviours:Ho(t.toolbarBehaviours,f.behaviours),apis:{setGroups:u,refresh:re},domModification:{attributes:{role:"group"}}}},Ii=Kr({name:"Toolbar",configFields:tp(),partFields:sq(),factory:bz,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),dN=re,Fy=Sn,VE=q([]);var vz=Object.freeze({__proto__:null,setup:dN,isDocked:Fy,getBehaviours:VE});const zE=q(Xe("toolbar-height-change")),du={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},mN="tox-tinymce--toolbar-sticky-on",fN="tox-tinymce--toolbar-sticky-off",yz=(t,s)=>{const a=fa(s),u=Ol(s).dom.innerHeight,m=Dr(a),f=Be.fromDom(t.elm),h=nl(f),b=es(f),C=h.y,x=C+b,k=Ma(s),A=es(s),N=k.top,L=N+A,F=Math.abs(N-m.top)<2,J=Math.abs(L-(m.top+u))<2;if(F&&C<L)Du(m.left,C-A,a);else if(J&&x>N){const $=C-u+b+A;Du(m.left,$,a)}},$y=(t,s)=>wn(to.getModes(t),s),Hy=t=>{const s=i=>Rl(i)+(parseInt(Ee(i,"margin-top"),10)||0)+(parseInt(Ee(i,"margin-bottom"),10)||0),a=t.element;ga(a).each(i=>{const u="padding-"+to.getModes(t)[0];if(to.isDocked(t)){const m=Ft(i);Pt(a,"width",m+"px"),Pt(i,u,s(a)+"px")}else rn(a,"width"),rn(i,u)})},UE=(t,s)=>{s?(bo(t,du.fadeOutClass),qg(t,[du.transitionClass,du.fadeInClass])):(bo(t,du.fadeInClass),qg(t,[du.fadeOutClass,du.transitionClass]))},gN=(t,s)=>{const a=Be.fromDom(t.getContainer());s?(Xo(a,mN),bo(a,fN)):(Xo(a,fN),bo(a,mN))},hN=(t,s)=>{const a=fa(s);Hu(a).filter(i=>!Dn(s,i)).filter(i=>Dn(i,Be.fromDom(a.dom.body))||Ki(t,i)).each(()=>La(s))},Cz=(t,s)=>Wr(t).orThunk(()=>s().toOptional().bind(a=>Wr(a.element))),Sz=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(to.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(Hy)}),t.on("SkinLoaded",()=>{a().each(i=>{to.isDocked(i)?to.reset(i):to.refresh(i)})}),t.on("FullscreenStateChanged",()=>{a().each(to.reset)})),t.on("AfterScrollIntoView",i=>{a().each(u=>{to.refresh(u);const m=u.element;T1(m)&&yz(i,m)})}),t.on("PostRender",()=>{gN(t,!1)})},xz=t=>t().map(to.isDocked).getOr(!1),Jf=()=>[Ba.config({channels:{[zE()]:{onReceive:Hy}}})],ZE=(t,s)=>{const a=Nn(),i=s.getSink,u=h=>{i().each(b=>h(b.element))},m=h=>{t.inline||Hy(h),gN(t,to.isDocked(h)),h.getSystem().broadcastOn([ih()],{}),i().each(b=>b.getSystem().broadcastOn([ih()],{}))},f=t.inline?[]:Jf();return[Ct.config({}),to.config({contextual:{lazyContext:h=>{const b=Rl(h.element),C=t.inline?t.getContentAreaContainer():t.getContainer();return S.from(C).map(x=>{const k=ms(Be.fromDom(x));return nm(t,h.element).fold(()=>{const N=k.height-b,L=k.y+($y(h,"top")?0:b);return Oo(k.x,L,k.width,N)},N=>{const L=Im(k,om(N)),F=$y(h,"top")?L.y:L.y+b;return Oo(L.x,F,L.width,L.height-b)})})},onShow:()=>{u(h=>UE(h,!0))},onShown:h=>{u(b=>cl(b,[du.transitionClass,du.fadeInClass])),a.get().each(b=>{hN(h.element,b),a.clear()})},onHide:h=>{Cz(h.element,i).fold(a.clear,a.set),u(b=>UE(b,!1))},onHidden:()=>{u(h=>cl(h,[du.transitionClass]))},...du},lazyViewport:h=>nm(t,h.element).fold(()=>{const C=ws(),x=Mw(t),k=C.y+($y(h,"top")&&!zw(t)?x:0),A=C.height-($y(h,"bottom")?x:0);return{bounds:Oo(C.x,k,C.width,A),optScrollEnv:S.none()}},C=>({bounds:om(C),optScrollEnv:S.some({currentScrollTop:C.element.dom.scrollTop,scrollElmTop:Ma(C.element).top})})),modes:[s.header.getDockingMode()],onDocked:m,onUndocked:m}),...f]};var F0=Object.freeze({__proto__:null,setup:Sz,isDocked:xz,getBehaviours:ZE});const Vy=t=>{const s=t.editor,a=t.sticky?ZE:VE;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:_e(a(s,t.sharedBackstage))}},pN=Et([zo,Tn("items",pb([bb([m4,Na("items",Ze)]),Ze]))].concat(Ph)),bN=t=>ko("GroupToolbarButton",pN,t),vN=[Ko("text"),Ko("tooltip"),Ko("icon"),mo("search",!1,pb([fi,Et([Ko("placeholder")])],t=>kr(t)?t?S.some({placeholder:S.none()}):S.none():S.some(t))),gi("fetch"),Ln("onSetup",()=>re),Do("context","mode:design")],wz=Et([zo,...vN]),yN=t=>ko("menubutton",wz,t),Ez=Et([zo,Rh,bc,cm,jF,g4,am,Vr("presets","normal",["normal","color","listpreview"]),cD(1),Mh,ZF,Do("context","mode:design")]),kz=t=>ko("SplitButton",Ez,t);var WE=gc({factory:(t,s)=>{const a=(u,m)=>{const f=we(m,h=>{const b={type:"menubutton",text:h.text,fetch:x=>{x(h.getItems())},context:"any"},C=yN(b).mapError(x=>Pg(x)).getOrDie();return od(C,"tox-mbtn",s.backstage,S.some("menuitem"))});_t.set(u,f)},i={focus:it.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:_e([_t.config({}),Rt("menubar-events",[co(u=>{t.onSetup(u)}),be(Ul(),(u,m)=>{fo(u.element,".tox-mbtn--active").each(f=>{Yl(m.event.target,".tox-mbtn").each(h=>{Dn(f,h)||u.getSystem().getByDom(f).each(b=>{u.getSystem().getByDom(h).each(C=>{vc.expand(C),vc.close(b),Ct.focus(C)})})})})}),be(Mb(),(u,m)=>{m.event.prevFocus.bind(f=>u.getSystem().getByDom(f).toOptional()).each(f=>{m.event.newFocus.bind(h=>u.getSystem().getByDom(h).toOptional()).each(h=>{vc.isOpen(f)&&(vc.expand(h),vc.close(f))})})})]),it.config({mode:"flow",selector:".tox-mbtn",onEscape:u=>(t.onEscape(u),S.some(!0))}),no.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[ve("dom"),ve("uid"),ve("onEscape"),ve("backstage"),se("onSetup",re)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const np="⚡️Upgrade",$0="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",jE=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:$0,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:np}}]}),CN="container",Tz=[Ws("slotBehaviours",[])],zy=t=>"<alloy.field."+t+">",_z=t=>{const s=(()=>{const m=[];return{slot:(h,b)=>(m.push(h),Mv(CN,zy(h),b)),record:q(m)}})(),a=t(s),i=s.record(),u=we(i,m=>pr({name:m,pname:zy(m)}));return Wx(CN,Tz,u,H0,a)},H0=(t,s)=>{const a=F=>Ux(t),i=(F,J)=>zn(F,t,J),u=(F,J)=>($,G)=>zn($,t,G).map(Y=>F(Y,G)).getOr(J),m=F=>(J,$)=>{Ue($,G=>F(J,G))},f=(F,J)=>Vt(F.element,"aria-hidden")!=="true",h=(F,J)=>{if(!f(F)){const $=F.element;rn($,"display"),Vn($,"aria-hidden"),st(F,Vp(),{name:J,visible:!0})}},b=(F,J)=>{if(f(F)){const $=F.element;Pt($,"display","none"),Ve($,"aria-hidden","true"),st(F,Vp(),{name:J,visible:!1})}},C=u(f,!1),x=u(b),k=m(x),A=F=>k(F,a()),N=u(h),L={getSlotNames:a,getSlot:i,isShowing:C,hideSlot:x,hideAllSlots:A,showSlot:N};return{uid:t.uid,dom:t.dom,components:s,behaviours:m1(t.slotBehaviours),apis:L}},Rr={...Zn({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>Xb(t)),sketch:_z},Oz=Et([bc,Rh,Ln("onShow",re),Ln("onHide",re),am]),Dz=t=>ko("sidebar",Oz,t),Mz=t=>{const{sidebars:s}=t.ui.registry.getAll();Ue(ao(s),a=>{const i=s[a],u=()=>Ps(S.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:m=>{t.execCommand("ToggleSidebar",!1,a),m.setActive(u())},onSetup:m=>{m.setActive(u());const f=()=>m.setActive(u());return t.on("ToggleSidebar",f),()=>{t.off("ToggleSidebar",f)}},context:"any"})})},Rz=t=>({element:()=>t.element.dom}),Nz=(t,s)=>{const a=we(ao(s),i=>{const u=s[i],m=Te(Dz(u));return{name:i,getApi:Rz,onSetup:m.onSetup,onShow:m.onShow,onHide:m.onHide}});return we(a,i=>{const u=at(re);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:If.unnamedEvents([Di(i,u),js(i,u),be(Vp(),(m,f)=>{const h=f.event;kt(a,C=>C.name===h.name).each(C=>{(h.visible?C.onShow:C.onHide)(C.getApi(m))})})])})})},SN=t=>Rr.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:Nz(s,t),slotBehaviours:If.unnamedEvents([co(a=>Rr.hideAllSlots(a))])})),xN=(t,s,a)=>{ln.getCurrent(t).each(u=>{_t.set(u,[SN(s)]);const m=a==null?void 0:a.toLowerCase();on(m)&&sn(s,m)&&ln.getCurrent(u).each(f=>{Rr.showSlot(f,m),ia.immediateGrow(u),rn(u.element,"width"),op(t.element,"region")})})},op=(t,s)=>{Ve(t,"role",s)},Pz=(t,s)=>{ln.getCurrent(t).each(i=>{ln.getCurrent(i).each(m=>{ia.hasGrown(i)?Rr.isShowing(m,s)?(ia.shrink(i),op(t.element,"presentation")):(Rr.hideAllSlots(m),Rr.showSlot(m,s),op(t.element,"region")):(Rr.hideAllSlots(m),Rr.showSlot(m,s),ia.grow(i),op(t.element,"region"))})})},Uy=t=>ln.getCurrent(t).bind(a=>ia.isGrowing(a)||ia.hasGrown(a)?ln.getCurrent(a).bind(m=>kt(Rr.getSlotNames(m),f=>Rr.isShowing(m,f))):S.none()),sp=Xe("FixSizeEvent"),Zy=Xe("AutoSizeEvent"),Bz=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:_e([no.config({}),Ct.config({}),ia.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{ln.getCurrent(s).each(Rr.hideAllSlots),Qt(s,Zy)},onGrown:s=>{Qt(s,Zy)},onStartGrow:s=>{st(s,sp,{width:Fo(s.element,"width").getOr("")})},onStartShrink:s=>{st(s,sp,{width:Ft(s.element)+"px"})}}),_t.config({}),ln.config({find:s=>{const a=_t.contents(s);return Ns(a)}})])}],behaviours:_e([Sr.childAt(0),Rt("sidebar-sliding-events",[be(sp,(s,a)=>{Pt(s.element,"width",a.event.width)}),be(Zy,(s,a)=>{rn(s.element,"width")})])])});var GE=Object.freeze({__proto__:null,block:(t,s,a,i)=>{Ve(t.element,"aria-busy",!0);const u=s.getRoot(t).getOr(t),m=_e([it.config({mode:"special",onTab:()=>S.some(!0),onShiftTab:()=>S.some(!0)}),Ct.config({})]),f=i(u,m),h=u.getSystem().build(f);_t.append(u,lc(h)),h.hasConfigured(it)&&s.focus&&it.focusIn(h),a.isBlocked()||s.onBlock(t),a.blockWith(()=>_t.remove(u,h))},unblock:(t,s,a)=>{Vn(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),Lz=[Ln("getRoot",S.none),ur("focus",!0),an("onBlock"),an("onUnblock")],Iz=Object.freeze({__proto__:null,init:()=>{const t=Mu(),s=a=>{t.set({destroy:a})};return zr({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const Jc=zs({fields:Lz,name:"blocking",apis:GE,state:Iz}),Fz=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:ml('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),EN=t=>ln.getCurrent(t).each(s=>La(s.element,!0)),$z=(t,s)=>{const a="tabindex",i=`data-mce-${a}`;S.from(t.iframeElement).map(Be.fromDom).each(u=>{s?(gn(u,a).each(m=>Ve(u,i,m)),Ve(u,a,-1)):(Vn(u,a),gn(u,i).each(m=>{Ve(u,a,m),Vn(u,i)}))})},Hz=(t,s,a,i)=>{const u=s.element;if($z(t,a),a)Jc.block(s,Fz(i)),rn(u,"display"),Vn(u,"aria-hidden"),t.hasFocus()&&EN(s);else{const m=ln.getCurrent(s).exists(f=>Jl(f.element));Jc.unblock(s),Pt(u,"display","none"),Ve(u,"aria-hidden","true"),m&&t.focus()}},Vz=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:_e([_t.config({}),Jc.config({focus:!1}),ln.config({find:s=>Ns(s.components())})]),components:[]}),lq=t=>t.type==="focusin",uq=t=>lq(t)?(t.composed?Ns(t.composedPath()):S.from(t.target)).map(Be.fromDom).filter(Go).exists(a=>na(a,"mce-pastebin")):!1,kN=(t,s,a)=>{const i=at(!1),u=Nn(),m=h=>{i.get()&&!uq(h)&&(h.preventDefault(),EN(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",m),t.on("BeforeExecCommand",h=>{h.command.toLowerCase()==="mcefocus"&&h.value!==!0&&m(h)})});const f=h=>{h!==i.get()&&(i.set(h),Hz(t,s(),h,a.providers),zD(t,h))};t.on("ProgressState",h=>{if(u.on(clearTimeout),qs(h.time)){const b=Jv.setEditorTimeout(t,()=>f(h.state),h.time);u.set(b)}else f(h.state),u.clear()})},zz=(t,s)=>Zo(t,(u,m)=>s(m,u.len).fold(q(u),h=>({len:h.finish,list:u.list.concat([h])})),{len:0,list:[]}).list,Wy=(t,s,a)=>({within:t,extra:s,withinWidth:a}),TN=(t,s,a)=>{const i=zz(t,(h,b)=>{const C=a(h);return S.some({element:h,start:b,finish:b+C,width:C})}),u=Hn(i,h=>h.finish<=s),m=Bo(u,(h,b)=>h+b.width,0),f=i.slice(u.length);return{within:u,extra:f,withinWidth:m}},jy=t=>we(t,s=>s.element),Uz=(t,s,a)=>{const i=jy(t.concat(s));return Wy(i,[],a)},Zz=(t,s,a,i)=>{const u=jy(t).concat([a]);return Wy(u,jy(s),i)},Wz=(t,s,a)=>Wy(jy(t),[],a),_N=(t,s,a)=>{const i=TN(s,t,a);return i.extra.length===0?S.some(i):S.none()},jz=(t,s,a,i)=>{const u=_N(t,s,a).getOrThunk(()=>TN(s,t-a(i),a)),m=u.within,f=u.extra,h=u.withinWidth;return f.length===1&&f[0].width<=a(i)?Uz(m,f,h):f.length>=1?Zz(m,f,i,h):Wz(m,f,h)},AN=(t,s)=>{const a=we(s,i=>lc(i));Ii.setGroups(t,a)},Gz=t=>_o(t,s=>Wr(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),qz=(t,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const u=wi(t,s,"primary"),m=Mo.getCoupled(t,"overflowGroup");Pt(u.element,"visibility","hidden");const f=i.concat([m]),h=Gz(f);a([]),AN(u,f);const b=Ft(u.element),C=jz(b,s.builtGroups.get(),x=>Math.ceil(x.element.dom.getBoundingClientRect().width),m);C.extra.length===0?(_t.remove(u,m),a([])):(AN(u,C.within),a(C.extra)),rn(u.element,"visibility"),Yi(u.element),h.each(Ct.focus)},Kz=q([Ws("splitToolbarBehaviours",[Mo]),An("builtGroups",()=>at([]))]),ON=q([Iu(["overflowToggledClass"]),Rd("getOverflowBounds"),ve("lazySink"),An("overflowGroups",()=>at([])),an("onOpened"),an("onClosed")].concat(Kz())),DN=q([pr({factory:Ii,schema:tp(),name:"primary"}),Hc({schema:tp(),name:"overflow"}),Hc({name:"overflow-button"}),Hc({name:"overflow-group"})]),qE=q((t,s)=>{vg(t,Math.floor(s))}),Yz=q([Iu(["toggledClass"]),ve("lazySink"),gi("fetch"),Rd("getBounds"),Hs("fireDismissalEventInstead",[se("event",Bd())]),Ud(),an("onToggled")]),Cc=q([Hc({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:_e([Gt.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),Hc({factory:Ii,schema:tp(),name:"toolbar",overrides:t=>({toolbarBehaviours:_e([it.config({mode:"cyclic",onEscape:s=>(zn(s,t,"button").each(Ct.focus),S.none())})])})})]),Gy=Nn(),MN=(t,s)=>{Gy.set(!0),qy(t,s),Gy.clear()},qy=(t,s)=>{const a=Mo.getCoupled(t,"toolbarSandbox");hn.isOpen(a)?hn.close(a):hn.open(a,s.toolbar())},KE=(t,s,a,i)=>{const u=a.getBounds.map(f=>f()),m=a.lazySink(t).getOrDie();hr.positionWithinBounds(m,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:qE()}}},u)},rp=(t,s,a,i,u)=>{Ii.setGroups(s,u),KE(t,s,a,i),Gt.on(t)},Xz=(t,s,a)=>{const i=d_(),u=(f,h)=>{const b=Gy.get().getOr(!1);a.fetch().get(C=>{rp(t,h,a,s.layouts,C),i.link(t.element),b||it.focusIn(h)})},m=()=>{Gt.off(t),Gy.get().getOr(!1)||Ct.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:_e([it.config({mode:"special",onEscape:f=>(hn.close(f),S.some(!0))}),hn.config({onOpen:u,onClose:m,isPartOf:(f,h,b)=>zd(h,b)||zd(t,b),getAttachPoint:()=>a.lazySink(t).getOrDie()}),Ba.config({channels:{...Ia({isExtraPart:Sn,...a.fireDismissalEventInstead.map(f=>({fireEventInstead:{event:f.event}})).getOr({})}),...lh({doReposition:()=>{hn.getState(Mo.getCoupled(t,"toolbarSandbox")).each(f=>{KE(t,f,a,s.layouts)})}})}})])}},hm=Kr({name:"FloatingToolbarButton",factory:(t,s,a,i)=>({...ns.sketch({...i.button(),action:u=>{qy(u,i)},buttonBehaviours:fc.augment({dump:i.button().buttonBehaviours},[Mo.config({others:{toolbarSandbox:u=>Xz(u,a,t)}})])}),apis:{setGroups:(u,m)=>{hn.getState(Mo.getCoupled(u,"toolbarSandbox")).each(f=>{rp(u,f,t,a.layouts,m)})},reposition:u=>{hn.getState(Mo.getCoupled(u,"toolbarSandbox")).each(m=>{KE(u,m,t,a.layouts)})},toggle:u=>{qy(u,i)},toggleWithoutFocusing:u=>{MN(u,i)},getToolbar:u=>hn.getState(Mo.getCoupled(u,"toolbarSandbox")),isOpen:u=>hn.isOpen(Mo.getCoupled(u,"toolbarSandbox"))}}),configFields:Yz(),partFields:Cc(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),Ky=q([ve("items"),Iu(["itemSelector"]),Ws("tgroupBehaviours",[it])]),Jz=q([v1({name:"items",unit:"item"})]),Qz=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Ho(t.tgroupBehaviours,[it.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),Sa=Kr({name:"ToolbarGroup",configFields:Ky(),partFields:Jz(),factory:Qz}),RN=t=>we(t,s=>lc(s)),V0=(t,s,a)=>{qz(t,a,i=>{a.overflowGroups.set(i),s.getOpt(t).each(u=>{hm.setGroups(u,RN(i))})})},NN=(t,s,a,i)=>{const u=yn(hm.sketch({fetch:()=>yr.nu(m=>{m(RN(t.overflowGroups.get()))}),layouts:{onLtr:()=>[hs,gs],onRtl:()=>[gs,hs],onBottomLtr:()=>[nr,gr],onBottomRtl:()=>[gr,nr]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(m,f)=>t[f?"onOpened":"onClosed"](m)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:Ho(t.splitToolbarBehaviours,[Mo.config({others:{overflowGroup:()=>Sa.sketch({...i["overflow-group"](),items:[u.asSpec()]})}})]),apis:{setGroups:(m,f)=>{t.builtGroups.set(we(f,m.getSystem().build)),V0(m,u,t)},refresh:m=>V0(m,u,t),toggle:m=>{u.getOpt(m).each(f=>{hm.toggle(f)})},toggleWithoutFocusing:m=>{u.getOpt(m).each(hm.toggleWithoutFocusing)},isOpen:m=>u.getOpt(m).map(hm.isOpen).getOr(!1),reposition:m=>{u.getOpt(m).each(f=>{hm.reposition(f)})},getOverflow:m=>u.getOpt(m).bind(hm.getToolbar)},domModification:{attributes:{role:"group"}}}},XE=Kr({name:"SplitFloatingToolbar",configFields:ON(),partFields:DN(),factory:NN,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),eU=q([Iu(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),an("onOpened"),an("onClosed")].concat(Kz())),PN=q([pr({factory:Ii,schema:tp(),name:"primary"}),pr({factory:Ii,schema:tp(),name:"overflow",overrides:t=>({toolbarBehaviours:_e([ia.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{zn(s,t,"overflow-button").each(a=>{Gt.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{zn(s,t,"overflow-button").each(Gt.on)}}),it.config({mode:"acyclic",onEscape:s=>(zn(s,t,"overflow-button").each(Ct.focus),S.some(!0))})])})}),Hc({name:"overflow-button",overrides:t=>({buttonBehaviours:_e([Gt.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),Hc({name:"overflow-group"})]),tU=(t,s)=>zn(t,s,"overflow").map(ia.hasGrown).getOr(!1),JE=(t,s,a)=>{zn(t,s,"overflow-button").each(i=>{zn(t,s,"overflow").each(u=>{if(QE(t,s),ia.hasShrunk(u)){const m=s.onOpened;s.onOpened=f=>{a||it.focusIn(u),m(f),s.onOpened=m}}else{const m=s.onClosed;s.onClosed=f=>{a||Ct.focus(i),m(f),s.onClosed=m}}ia.toggleGrow(u)})})},QE=(t,s)=>{zn(t,s,"overflow").each(a=>{qz(t,s,i=>{const u=we(i,m=>lc(m));Ii.setGroups(a,u)}),zn(t,s,"overflow-button").each(i=>{ia.hasGrown(a)&&Gt.on(i)}),ia.refresh(a)})},nU=(t,s,a,i)=>{const u="alloy.toolbar.toggle",m=(f,h)=>{const b=we(h,f.getSystem().build);t.builtGroups.set(b)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ho(t.splitToolbarBehaviours,[Mo.config({others:{overflowGroup:f=>Sa.sketch({...i["overflow-group"](),items:[ns.sketch({...i["overflow-button"](),action:h=>{Qt(f,u)}})]})}}),Rt("toolbar-toggle-events",[be(u,f=>{JE(f,t,!1)})])]),apis:{setGroups:(f,h)=>{m(f,h),QE(f,t)},refresh:f=>QE(f,t),toggle:f=>{JE(f,t,!1)},toggleWithoutFocusing:f=>{JE(f,t,!0)},isOpen:f=>tU(f,t)},domModification:{attributes:{role:"group"}}}},ek=Kr({name:"SplitSlidingToolbar",configFields:eU(),partFields:PN(),factory:nU,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),BN=t=>{const s=t.label.isNone()?t.title.fold(()=>({}),a=>({attributes:{title:a}})):t.label.fold(()=>({}),a=>({attributes:{"aria-label":a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(t.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...t.label.map(a=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[lo(a)]})).toArray(),Sa.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:_e([no.config({}),Ct.config({})])}},Yy=t=>Sa.sketch(BN(t)),tk=(t,s)=>{const a=co(i=>{const u=we(t.initGroups,Yy);Ii.setGroups(i,u)});return _e([Gc.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),Uo(()=>t.providers.checkUiComponentContext("any")),it.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),Rt("toolbar-events",[a])])},nk=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":BN({title:S.none(),label:S.none(),items:[]}),"overflow-button":ER({context:"any",name:"more",icon:S.some("more-drawer"),enabled:!0,tooltip:S.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:S.none(),borderless:!1},S.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:tk(t,s)}},LN=t=>{const s=nk(t),a=4,i=XE.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return XE.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const u=t.moreDrawerData.lazyHeader().element,m=nl(u),f=tc(u),h=nl(f),b=Math.max(f.dom.scrollHeight,h.height);return Oo(m.x+a,h.y,m.width-a*2,b)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:u=>t.onToggled(u,!0),onClosed:u=>t.onToggled(u,!1)})},oU=t=>{const s=ek.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=ek.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=nk(t);return ek.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:u=>{u.getSystem().broadcastOn([zE()],{type:"opened"}),t.onToggled(u,!0)},onClosed:u=>{u.getSystem().broadcastOn([zE()],{type:"closed"}),t.onToggled(u,!1)}})},Xy=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Ii.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===hc.scrolling?["tox-toolbar--scrolling"]:[])},components:[Ii.parts.groups({})],toolbarBehaviours:tk(t,s)})},ok=[cm,bc,Ko("tooltip"),Vr("buttonType","secondary",["primary","secondary"]),ur("borderless",!1),gi("onAction"),Do("context","mode:design")],IN=[...ok,Ku,er("type",["button"])],FN=[...ok,ur("active",!1),er("type",["togglebutton"])],$N={button:IN,togglebutton:FN},sU=[er("type",["group"]),Nd("buttons",[],Ts("type",$N))],rU=Ts("type",{...$N,group:sU}),HN=Et([Nd("buttons",[],rU),gi("onShow"),gi("onHide")]),aU=t=>ko("view",HN,t),cU=(t,s)=>{var a,i;const u=t.type==="togglebutton",m=t.icon.map(Y=>dm(Y,s.icons)).map(yn),h=Y=>{const ce=pe=>{m.map(Ke=>Ke.getOpt(Y).each(Le=>{_t.set(Le,[dm(pe,s.icons)])}))},le=pe=>{const Ke=Y.element;pe?(Xo(Ke,"tox-button--enabled"),Ve(Ke,"aria-pressed",!0)):(bo(Ke,"tox-button--enabled"),Vn(Ke,"aria-pressed"))},Me=()=>na(Y.element,"tox-button--enabled"),Ge=()=>La(Y.element);if(u)return t.onAction({setIcon:ce,setActive:le,isActive:Me,focus:Ge});if(t.type==="button")return t.onAction({setIcon:ce})},b={...t,name:u?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:S.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},C=Ty((i=t.buttonType)!==null&&i!==void 0?i:"secondary"),x=u?t.text.map(s.translate):S.some(s.translate(t.text)),k=x.map(lo),A=b.tooltip.or(x).map(Y=>({"aria-label":s.translate(Y)})).getOr({}),N=m.map(Y=>Y.asSpec()),L=Fh([N,k]),F=t.icon.isSome()&&k.isSome(),J={tag:"button",classes:C.concat(...t.icon.isSome()&&!F?["tox-button--icon"]:[]).concat(...F?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:A},$=[],G=ky(b,S.some(h),$,J,L,t.tooltip,s);return ns.sketch(G)},VN=(t,s)=>cU(t,s),iU=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:we(t.buttons,a=>VN(a,s))}),zN=$o().deviceType,lU=zN.isPhone(),uU=zN.isTablet(),dU=t=>{let s=!1;const a=we(t.buttons,i=>i.type==="group"?(s=!0,iU(i,t.providers)):VN(i,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...lU||uU?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:_e([Ct.config({}),it.config({mode:"flow",selector:"button, .tox-button",focusInside:Tf.OnEnterOrSpaceMode})]),components:s?a:[pl.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),pl.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},mU=t=>({uid:t.uid,behaviours:_e([Ct.config({}),no.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),fU=(t,s,a,i)=>{const u={getPane:m=>As.getPart(m,t,"pane"),getOnShow:m=>t.viewConfig.onShow,getOnHide:m=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:_e([Ct.config({}),it.config({mode:"cyclic",focusInside:Tf.OnEnterOrSpaceMode})]),apis:u}};var Qf=Kr({name:"silver.View",configFields:[ve("viewConfig")],partFields:[va({factory:{sketch:dU},schema:[ve("buttons"),ve("providers")],name:"header"}),va({factory:{sketch:mU},schema:[],name:"pane"})],factory:fU,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const gU=(t,s,a)=>ai(s,(i,u)=>{const m=Te(aU(i));return t.slot(u,Qf.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:m,components:[...m.buttons.length>0?[Qf.parts.header({buttons:m.buttons,providers:a})]:[],Qf.parts.pane({})]}))}),hU=(t,s)=>Rr.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:gU(a,t,s),slotBehaviours:If.unnamedEvents([co(i=>Rr.hideAllSlots(i))])})),Jy=t=>kt(Rr.getSlotNames(t),s=>Rr.isShowing(t,s)),pU=t=>{const s=t.element;Pt(s,"display","none"),Ve(s,"aria-hidden","true")},Qy=t=>{const s=t.element;rn(s,"display"),Vn(s,"aria-hidden")},bU=t=>({getContainer:q(t)}),sk=(t,s,a)=>{Rr.getSlot(t,s).each(i=>{Qf.getPane(i).each(u=>{a(i)(bU(u.element.dom))})})},vU=(t,s)=>sk(t,s,Qf.getOnShow),yU=(t,s)=>sk(t,s,Qf.getOnHide);var eC=gc({factory:(t,s)=>{const m={setViews:(f,h)=>{_t.set(f,[hU(h,s.backstage.shared.providers)])},whichView:f=>ln.getCurrent(f).bind(Jy),toggleView:(f,h,b,C)=>ln.getCurrent(f).exists(x=>{const k=Jy(x),A=k.exists(L=>C===L),N=Rr.getSlot(x,C).isSome();return N&&(Rr.hideAllSlots(x),A?(pU(f),h()):(b(),Qy(f),Rr.showSlot(x,C),vU(x,C)),k.each(L=>yU(x,L))),N})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:_e([_t.config({}),ln.config({find:f=>{const h=_t.contents(f);return Ns(h)}})]),apis:m}},name:"silver.ViewWrapper",configFields:[ve("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,i,u)=>t.toggleView(s,a,i,u),whichView:(t,s)=>t.whichView(s)}});const CU=(t,s,a)=>{let i=!1;const u=f=>{eG(f,".tox-statusbar").each(h=>{Ee(h,"display")==="none"&&Vt(h,"aria-hidden")==="true"?(rn(h,"display"),Vn(h,"aria-hidden")):(Pt(h,"display","none"),Ve(h,"aria-hidden","true"))})},m={getSocket:f=>As.getPart(f,t,"socket"),setSidebar:(f,h,b)=>{As.getPart(f,t,"sidebar").each(C=>xN(C,h,b))},toggleSidebar:(f,h)=>{As.getPart(f,t,"sidebar").each(b=>Pz(b,h))},whichSidebar:f=>As.getPart(f,t,"sidebar").bind(Uy).getOrNull(),getHeader:f=>As.getPart(f,t,"header"),getToolbar:f=>As.getPart(f,t,"toolbar"),setToolbar:(f,h)=>{As.getPart(f,t,"toolbar").each(b=>{const C=we(h,Yy);b.getApis().setGroups(b,C)})},setToolbars:(f,h)=>{As.getPart(f,t,"multiple-toolbar").each(b=>{const C=we(h,x=>we(x,Yy));uN.setItems(b,C)})},refreshToolbar:f=>{As.getPart(f,t,"toolbar").each(b=>b.getApis().refresh(b))},toggleToolbarDrawer:f=>{As.getPart(f,t,"toolbar").each(h=>{Bn(h.getApis().toggle,b=>b(h))})},toggleToolbarDrawerWithoutFocusing:f=>{As.getPart(f,t,"toolbar").each(h=>{Bn(h.getApis().toggleWithoutFocusing,b=>b(h))})},isToolbarDrawerToggled:f=>As.getPart(f,t,"toolbar").bind(h=>S.from(h.getApis().isOpen).map(b=>b(h))).getOr(!1),getThrobber:f=>As.getPart(f,t,"throbber"),focusToolbar:f=>{As.getPart(f,t,"toolbar").orThunk(()=>As.getPart(f,t,"multiple-toolbar")).each(b=>{it.focusIn(b)})},setMenubar:(f,h)=>{As.getPart(f,t,"menubar").each(b=>{WE.setMenus(b,h)})},focusMenubar:f=>{As.getPart(f,t,"menubar").each(h=>{WE.focus(h)})},setViews:(f,h)=>{As.getPart(f,t,"viewWrapper").each(b=>{eC.setViews(b,h)})},toggleView:(f,h)=>As.getPart(f,t,"viewWrapper").exists(b=>eC.toggleView(b,()=>m.showMainView(f),()=>m.hideMainView(f),h)),whichView:f=>As.getPart(f,t,"viewWrapper").bind(eC.whichView).getOrNull(),hideMainView:f=>{i=m.isToolbarDrawerToggled(f),i&&m.toggleToolbarDrawer(f),As.getPart(f,t,"editorContainer").each(h=>{const b=h.element;u(b),Pt(b,"display","none"),Ve(b,"aria-hidden","true")})},showMainView:f=>{i&&m.toggleToolbarDrawer(f),As.getPart(f,t,"editorContainer").each(h=>{const b=h.element;u(b),rn(b,"display"),Vn(b,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:m,behaviours:t.behaviours}},rk=uu.optional({factory:WE,name:"menubar",schema:[ve("backstage")]}),SU=t=>t.type===hc.sliding?oU:t.type===hc.floating?LN:Xy,tC=uu.optional({factory:{sketch:t=>uN.sketch({uid:t.uid,dom:t.dom,listBehaviours:_e([it.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>Xy({type:t.type,uid:Xe("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),S.some(!0))}),setupItem:(s,a,i,u)=>{Ii.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[ve("dom"),ve("onEscape")]}),UN=uu.optional({factory:{sketch:t=>{const s=SU(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),S.some(!0)),onToggled:(i,u)=>t.onToolbarToggled(u),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[ve("dom"),ve("onEscape"),ve("getSink")]}),ZN=uu.optional({factory:{sketch:Vy},name:"header",schema:[ve("dom")]}),ak=uu.optional({factory:{sketch:jE},name:"promotion",schema:[ve("dom")]}),xU=uu.optional({name:"socket",schema:[ve("dom")]}),WN=uu.optional({factory:{sketch:Bz},name:"sidebar",schema:[ve("dom")]}),ap=uu.optional({factory:{sketch:Vz},name:"throbber",schema:[ve("dom")]}),jN=uu.optional({factory:eC,name:"viewWrapper",schema:[ve("backstage")]}),wU=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),EU=uu.optional({factory:{sketch:wU},name:"editorContainer",schema:[]});var Gn=Kr({name:"OuterContainer",factory:CU,configFields:[ve("dom"),ve("behaviours")],partFields:[ZN,rk,UN,tC,xU,WN,ak,ap,jN,EU],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,i)=>{t.setSidebar(s,a,i)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const ck="file edit view insert format tools table help",GN={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},kU=(t,s,a)=>{const i=oO(a).split(/[ ,]/);return{text:t.title,getItems:()=>oe(t.items,u=>{const m=u.toLowerCase();return m.trim().length===0?[]:as(i,f=>f===m)?[]:m==="separator"||m==="|"?[{type:"separator"}]:s.menuItems[m]?[s.menuItems[m]]:[]})}},nC=t=>t.split(" "),ik=(t,s)=>{const a={...GN,...s.menus},i=ao(s.menus).length>0,u=s.menubar===void 0||s.menubar===!0?nC(ck):nC(s.menubar===!1?"":s.menubar),m=Hn(u,h=>{const b=sn(GN,h);return i?b||He(s.menus,h).exists(C=>sn(C,"items")):b}),f=we(m,h=>{const b=a[h];return kU({title:b.title,items:nC(b.items)},s,t)});return Hn(f,h=>{const b=C=>on(C)||C.type!=="separator";return h.getItems().length>0&&as(h.getItems(),b)})},oC=t=>{const s=()=>{t._skinLoaded=!0,y$(t)};return()=>{t.initialized?s():t.on("init",s)}},lk=(t,s)=>()=>C$(t,{message:s}),TU=t=>{const s=B1(t);return s?S.from(s):S.none()},qN=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),z0=(t,s,a,i)=>(t.on("remove",()=>i.unloadRawCss(s)),i.loadRawCss(s,a)),_U=(t,s)=>"ui/"+t+"/"+s,AU=t=>S.from(tinymce.Resource.get(t)).filter(on),uk=(t,s,a="")=>{const i=TU(t).map(m=>_U(m,`${s}.css`)),u=i.bind(AU);return Da(i,u,(m,f)=>({_kind:"load-raw",key:m,css:f})).getOrThunk(()=>{const m=t.editorManager.suffix;return{_kind:"load-stylesheet",url:a+`/${s}${m}.css`}})},KN=(t,s)=>{const a=t.ui.styleSheetLoader,i=uk(t,"skin",s);switch(i._kind){case"load-raw":const{key:u,css:m}=i;return z0(t,u,m,a),Promise.resolve();case"load-stylesheet":const{url:f}=i;return qN(t,f,a);default:return Promise.resolve()}},OU=(t,s)=>{if(yd(Be.fromDom(t.getElement()))){const i=R1.DOM.styleSheetLoader,u=uk(t,"skin.shadowdom",s);switch(u._kind){case"load-raw":const{key:m,css:f}=u;return z0(t,m,f,i),Promise.resolve();case"load-stylesheet":const{url:h}=u;return qN(t,h,i);default:return Promise.resolve()}}else return Promise.resolve()},DU=(t,s,a)=>{const u=uk(t,s?"content.inline":"content",a);switch(u._kind){case"load-raw":const{key:m,css:f}=u;return s?z0(t,m,f,t.ui.styleSheetLoader):t.on("PostRender",()=>{z0(t,m,f,t.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:h}=u;return a&&t.contentCSS.push(h),Promise.resolve();default:return Promise.resolve()}},dk=async(t,s)=>{const a=pO(s);if(await DU(s,t,a),!Iw(s)&&on(a))return Promise.all([KN(s,a),OU(s,a)]).then()},YN=(t,s)=>dk(t,s).then(oC(s),lk(s,"Skin could not be loaded")),MU=dn(YN,!1),XN=dn(YN,!0),cp=(t,s,a)=>Gi(a)?t.translate(s):t.translate([s,t.translate(a)]),JN=(t,s)=>{const a=(f,h,b,C)=>{const x=t.shared.providers.translate(f.title);if(f.type==="separator")return S.some({type:"separator",text:x});if(f.type==="submenu"){const k=oe(f.getStyleItems(),A=>i(A,h,C));return h===0&&k.length<=0?S.none():S.some({type:"nestedmenuitem",text:x,enabled:k.length>0,getSubmenuItems:()=>oe(f.getStyleItems(),A=>i(A,h,C))})}else return S.some({type:"togglemenuitem",text:x,icon:f.icon,active:f.isSelected(C),enabled:!b,onAction:s.onAction(f),...f.getStylePreview().fold(()=>({}),k=>({meta:{style:k}}))})},i=(f,h,b)=>{const C=f.type==="formatter"&&s.isInvalid(f);return h===0?C?[]:a(f,h,!1,b).toArray():a(f,h,C,b).toArray()},u=f=>{const h=s.getCurrentValue(),b=s.shouldHide?0:1;return oe(f,C=>i(C,b,h))};return{validateItems:u,getFetch:(f,h)=>(b,C)=>{const x=h(),k=u(x),A=Yh(k,Ti.CLOSE_ON_EXECUTE,f,{isHorizontalMenu:!1,search:S.none()});C(A)}}},ip=(t,s)=>{const a=s.dataset,i=a.type==="basic"?()=>we(a.data,u=>YR(u,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:JN(t,s),getStyleItems:i}},lp=(t,s,a,i,u,m)=>{const{items:f,getStyleItems:h}=ip(s,a),b=at(a.tooltip),C=k=>({getComponent:q(k),setTooltip:A=>{const N=s.shared.providers.translate(A);Ve(k.element,"aria-label",N),b.set(A)}}),x=k=>{const A=N=>k.setTooltip(cp(t,i(N.value),N.value));return t.on(u,A),Vf(zf(t,"NodeChange",N=>{const L=N.getComponent();a.updateText(L),rt.set(N.getComponent(),!t.selection.isEditable())})(k),()=>t.off(u,A))};return eE({context:"mode:design",text:a.icon.isSome()?S.none():a.text,icon:a.icon,ariaLabel:S.some(a.tooltip),tooltip:S.none(),role:S.none(),fetch:f.getFetch(s,h),onSetup:x,getApi:C,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[So.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:k=>{if(a.tooltip!==b.get()){const A=s.shared.providers.translate(b.get());So.setComponents(k,s.shared.providers.tooltips.getComponents({tooltipText:A}))}}})})]},"tox-tbtn",s.shared,m)},RU=t=>we(t,s=>{let a=s,i=s;const u=s.split("=");return u.length>1&&(a=u[0],i=u[1]),{title:a,format:i}}),NU=t=>({type:"basic",data:t});var up;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(up||(up={}));const QN=(t,s)=>s===up.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),mk=(t,s,a)=>{const i=t.options.get(s);return{type:"basic",data:RU(QN(i,a))}},PU="Align",e8=q("Alignment {0}"),sC="left",U0=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],t8=t=>{const s=()=>kt(U0,h=>t.formatter.match(h.format)),a=h=>()=>t.formatter.match(h),i=h=>S.none,u=h=>{const C=s().fold(q(sC),x=>x.title.toLowerCase());st(h,Kf,{icon:`align-${C}`}),E$(t,{value:C})},m=NU(U0),f=h=>()=>kt(U0,b=>b.format===h.format).each(b=>t.execCommand(b.command));return{tooltip:cp(t,e8(),sC),text:S.none(),icon:S.some("align-left"),isSelectedFor:a,getCurrentValue:S.none,getPreviewFor:i,onAction:f,updateText:u,dataset:m,shouldHide:!1,isInvalid:h=>!t.formatter.canApply(h.format)}},BU=(t,s)=>lp(t,s,t8(t),e8,"AlignTextUpdate","align"),LU=(t,s)=>{const a=ip(s,t8(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(PU),onSetup:vr(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},n8=(t,s)=>{const a=s(),i=we(a,u=>u.format);return S.from(t.formatter.closest(i)).bind(u=>kt(a,m=>m.format===u))},IU="Blocks",o8=q("Block {0}"),fk="Paragraph",s8=t=>{const s=m=>()=>t.formatter.match(m),a=m=>()=>{const f=t.formatter.get(m);return f?S.some({tag:f.length>0&&(f[0].inline||f[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(m))}):S.none()},i=m=>{const h=n8(t,()=>u.data).fold(q(fk),b=>b.title);st(m,yc,{text:h}),_$(t,{value:h})},u=mk(t,"block_formats",up.SemiColon);return{tooltip:cp(t,o8(),fk),text:S.some(fk),icon:S.none(),isSelectedFor:s,getCurrentValue:S.none,getPreviewFor:a,onAction:WD(t),updateText:i,dataset:u,shouldHide:!1,isInvalid:m=>!t.formatter.canApply(m.format)}},FU=(t,s)=>lp(t,s,s8(t),o8,"BlocksTextUpdate","blocks"),r8=(t,s)=>{const a=ip(s,s8(t));t.ui.registry.addNestedMenuItem("blocks",{text:IU,onSetup:vr(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},rC="Fonts",aC=q("Font {0}"),cC="System Font",pm=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],gk=t=>{const s=t.split(/\s*,\s*/);return we(s,a=>a.replace(/^['"]+|['"]+$/g,""))},a8=(t,s)=>s.length>0&&Br(s,a=>t.indexOf(a.toLowerCase())>-1),$U=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=gk(t.toLowerCase());return a8(a,pm)||a8(a,s)}else return!1},c8=t=>{const s=()=>{const b=L=>L?gk(L)[0]:"",C=t.queryCommandValue("FontName"),x=h.data,k=C?C.toLowerCase():"",A=hO(t);return{matchOpt:kt(x,L=>{const F=L.format;return F.toLowerCase()===k||b(F).toLowerCase()===b(k).toLowerCase()}).orThunk(()=>ht($U(k,A),{title:cC,format:k})),font:C}},a=b=>C=>C.exists(x=>x.format===b),i=()=>{const{matchOpt:b}=s();return b},u=b=>()=>S.some({tag:"div",styles:b.indexOf("dings")===-1?{"font-family":b}:{}}),m=b=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,b.format)})},f=b=>{const{matchOpt:C,font:x}=s(),k=C.fold(q(x),A=>A.title);st(b,yc,{text:k}),A$(t,{value:k})},h=mk(t,"font_family_formats",up.SemiColon);return{tooltip:cp(t,aC(),cC),text:S.some(cC),icon:S.none(),isSelectedFor:a,getCurrentValue:i,getPreviewFor:u,onAction:m,updateText:f,dataset:h,shouldHide:!1,isInvalid:Sn}},HU=(t,s)=>lp(t,s,c8(t),aC,"FontFamilyTextUpdate","fontfamily"),VU=(t,s)=>{const a=ip(s,c8(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(rC),onSetup:vr(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},zU={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},UU=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),i="\\.",u=h=>`(?:${h})?`,f=`[+-]?(?:${["Infinity",t+i+u(t)+u(a),i+t+u(a),t+u(a)].join("|")})`;return new RegExp(`^(${f})(.*)$`)})(),i8=(t,s)=>as(s,a=>as(zU[a],i=>t===i)),iC=(t,s)=>S.from(UU.exec(t)).bind(i=>{const u=Number(i[1]),m=i[2];return i8(m,s)?S.some({value:u,unit:m}):S.none()}),ZU=(t,s)=>iC(t,s).map(({value:a,unit:i})=>a+i),lC={tab:q(9),escape:q(27),enter:q(13),backspace:q(8),delete:q(46),left:q(37),up:q(38),right:q(39),down:q(40),space:q(32),home:q(36),end:q(35),pageUp:q(33),pageDown:q(34)},WU=(t,s,a,i)=>{let u=S.none();const m=Y=>Y.map(ce=>We.getValue(ce)).getOr(""),f=zf(t,"NodeChange SwitchMode DisabledStateChange",Y=>{const ce=Y.getComponent();u=S.some(ce),a.updateInputValue(ce),rt.set(ce,!t.selection.isEditable()||t2(t))}),h=Y=>({getComponent:q(Y)}),b=at(re),C=Xe("custom-number-input-events"),x=(Y,ce,le)=>{const Me=m(u),Ge=a.getNewValue(Me,Y),pe=Me.length-`${Ge}`.length,Ke=u.map(et=>et.element.dom.selectionStart-pe),Le=u.map(et=>et.element.dom.selectionEnd-pe);a.onAction(Ge,le),u.each(et=>{We.setValue(et,Ge),ce&&(Ke.each(Xt=>et.element.dom.selectionStart=Xt),Le.each(Xt=>et.element.dom.selectionEnd=Xt))})},k=(Y,ce)=>x((le,Me)=>le-Me,Y,ce),A=(Y,ce)=>x((le,Me)=>le+Me,Y,ce),N=Y=>ga(Y.element).fold(S.none,ce=>(La(ce),S.some(!0))),L=Y=>Jl(Y.element)?(Dl(Y.element).each(ce=>La(ce)),S.some(!0)):S.none(),F=(Y,ce,le,Me)=>{const Ge=at(re),pe=s.shared.providers.translate(le),Ke=Xe("altExecuting"),Le=zf(t,"NodeChange SwitchMode DisabledStateChange",Xt=>{rt.set(Xt.getComponent(),!t.selection.isEditable()||t2(t))}),et=Xt=>{rt.isDisabled(Xt)||Y(!0)};return ns.sketch({dom:{tag:"button",attributes:{"aria-label":pe,"data-mce-name":ce},classes:Me.concat(ce)},components:[O0(ce,s.shared.providers.icons)],buttonBehaviours:_e([rt.config({}),So.config(s.shared.providers.tooltips.getConfig({tooltipText:pe})),Rt(Ke,[Di({onSetup:Le,getApi:h},Ge),js({getApi:h},Ge),be(Lc(),(Xt,qn)=>{(qn.event.raw.keyCode===lC.space()||qn.event.raw.keyCode===lC.enter())&&(rt.isDisabled(Xt)||Y(!1))}),be(Wm(),et),be(Hg(),et)])]),eventOrder:{[Lc()]:[Ke,"keying"],[Wm()]:[Ke,"alloy.base.behaviour"],[Hg()]:[Ke,"alloy.base.behaviour"],[Ic()]:["alloy.base.behaviour",Ke,"tooltipping"],[Wl()]:[Ke,"tooltipping"]}})},J=yn(F(Y=>k(!1,Y),"minus","Decrease font size",[])),$=yn(F(Y=>A(!1,Y),"plus","Increase font size",[])),G=yn({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[_i.sketch({inputBehaviours:_e([rt.config({}),Rt(C,[Di({onSetup:f,getApi:h},b),js({getApi:h},b)]),Rt("input-update-display-text",[be(yc,(Y,ce)=>{We.setValue(Y,ce.event.text)}),be(bT(),Y=>{a.onAction(We.getValue(Y))}),be(Pu(),Y=>{a.onAction(We.getValue(Y))})]),it.config({mode:"special",onEnter:Y=>(x($t,!0,!0),S.some(!0)),onEscape:N,onUp:Y=>(A(!0,!1),S.some(!0)),onDown:Y=>(k(!0,!1),S.some(!0)),onLeft:(Y,ce)=>(ce.cut(),S.none()),onRight:(Y,ce)=>(ce.cut(),S.none())})])})],behaviours:_e([Ct.config({}),it.config({mode:"special",onEnter:L,onSpace:L,onEscape:N}),Rt("input-wrapper-events",[be(Ul(),Y=>{Ue([J,$],ce=>{const le=Be.fromDom(ce.get(Y).element.dom);Jl(le)&&or(le)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...so(i)?{"data-mce-name":i}:{}}},components:[J.asSpec(),G.asSpec(),$.asSpec()],behaviours:_e([Ct.config({}),it.config({mode:"flow",focusInside:Tf.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:Y=>Jl(Y.element)?S.none():(La(Y.element),S.some(!0))})])}},jU="Font sizes",l8=q("Font size {0}"),u8="12pt",GU={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},qU={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},d8=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},m8=(t,s)=>/[0-9.]+px$/.test(t)?d8(parseInt(t,10)*72/96,s||0)+"pt":He(qU,t).getOr(t),f8=t=>He(GU,t).getOr(""),g8=t=>{const s=()=>{let b=S.none();const C=h.data,x=t.queryCommandValue("FontSize");if(x)for(let k=3;b.isNone()&&k>=0;k--){const A=m8(x,k),N=f8(A);b=kt(C,L=>L.format===x||L.format===A||L.format===N)}return{matchOpt:b,size:x}},a=b=>C=>C.exists(x=>x.format===b),i=()=>{const{matchOpt:b}=s();return b},u=q(S.none),m=b=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,b.format)})},f=b=>{const{matchOpt:C,size:x}=s(),k=C.fold(q(x),A=>A.title);st(b,yc,{text:k}),k$(t,{value:k})},h=mk(t,"font_size_formats",up.Space);return{tooltip:cp(t,l8(),u8),text:S.some(u8),icon:S.none(),isSelectedFor:a,getPreviewFor:u,getCurrentValue:i,onAction:m,updateText:f,dataset:h,shouldHide:!1,isInvalid:Sn}},h8=(t,s)=>lp(t,s,g8(t),l8,"FontSizeTextUpdate","fontsize"),KU=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},YU=16,XU=t=>t>=0,p8=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:i=>st(i,yc,{text:s()}),onAction:(i,u)=>t.execCommand("FontSize",!1,i,{skip_focus:!u}),getNewValue:(i,u)=>{iC(i,["unsupportedLength","empty"]);const m=s(),f=iC(i,["unsupportedLength","empty"]).or(iC(m,["unsupportedLength","empty"])),h=f.map(A=>A.value).getOr(YU),b=iO(t),C=f.map(A=>A.unit).filter(A=>A!=="").getOr(b),x=u(h,KU(C).step),k=`${XU(x)?x:h}${C}`;return k!==m&&T$(t,{value:k}),k}}},JU=(t,s)=>WU(t,s,p8(t),"fontsizeinput"),b8=(t,s)=>{const a=ip(s,g8(t));t.ui.registry.addNestedMenuItem("fontsize",{text:jU,onSetup:vr(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},QU="Formats",v8=t=>Gi(t)?"Formats":"Format {0}",y8=(t,s)=>{const a="Formats",i=f=>()=>t.formatter.match(f),u=f=>()=>{const h=t.formatter.get(f);return h!==void 0?S.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(f))}):S.none()},m=f=>{const h=k=>GR(k)?oe(k.items,h):qR(k)?[{title:k.title,format:k.format}]:[],b=oe(KR(t),h),x=n8(t,q(b)).fold(q({title:a,tooltipLabel:""}),k=>({title:k.title,tooltipLabel:k.title}));st(f,yc,{text:x.title}),w$(t,{value:x.tooltipLabel})};return{tooltip:cp(t,v8(""),""),text:S.some(a),icon:S.none(),isSelectedFor:i,getCurrentValue:S.none,getPreviewFor:u,onAction:WD(t),updateText:m,shouldHide:tO(t),isInvalid:f=>!t.formatter.canApply(f.format),dataset:s}},eZ=(t,s)=>{const a={type:"advanced",...s.styles};return lp(t,s,y8(t,a),v8,"StylesTextUpdate","styles")},tZ=(t,s)=>{const a={type:"advanced",...s.styles},i=ip(s,y8(t,a));t.ui.registry.addNestedMenuItem("styles",{text:QU,onSetup:vr(t),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},nZ=q([ve("toggleClass"),ve("fetch"),rf("onExecute"),se("getHotspot",S.some),se("getAnchorOverrides",q({})),Ud(),rf("onItemExecute"),En("lazySink"),ve("dom"),an("onOpen"),Ws("splitDropdownBehaviours",[Mo,it,Ct]),se("matchWidth",!1),se("useMinWidth",!1),se("eventOrder",{}),En("role"),En("listRole")].concat(Uh())),oZ=pr({factory:ns,schema:[ve("dom")],name:"arrow",defaults:()=>({buttonBehaviours:_e([Ct.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Ld)},buttonBehaviours:_e([Gt.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),C8=pr({factory:ns,schema:[ve("dom")],name:"button",defaults:()=>({buttonBehaviours:_e([Ct.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),sZ=q([oZ,C8,va({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[ve("text")],name:"aria-descriptor"}),Hc({schema:[th()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(i=>{t.onItemExecute(i,s,a)})}})}),n3()]),rZ=(t,s,a,i)=>{const u=x=>{ln.getCurrent(x).each(k=>{bn.highlightFirst(k),it.focusIn(k)})},m=x=>{o3(t,$t,x,i,u,bs.HighlightMenuAndItem).get(re)},f=x=>(m(x),S.some(!0)),h=x=>{const k=wi(x,t,"button");return Ld(k),S.some(!0)},b={...In([co((x,k)=>{zn(x,t,"aria-descriptor").each(N=>{const L=Xe("aria");Ve(N.element,"id",L),Ve(x.element,"aria-describedby",L)})})]),...Eh(S.some(m))},C={repositionMenus:x=>{Gt.isOn(x)&&yM(x)}};return{uid:t.uid,dom:t.dom,components:s,apis:C,eventOrder:{...t.eventOrder,[ba()]:["disabling","toggling","alloy.base.behaviour"]},events:b,behaviours:Ho(t.splitDropdownBehaviours,[Mo.config({others:{sandbox:x=>{const k=wi(x,t,"arrow");return zh(t,x,{onOpen:()=>{Gt.on(k),Gt.on(x)},onClose:()=>{Gt.off(k),Gt.off(x)}})}}}),it.config({mode:"special",onSpace:h,onEnter:h,onDown:f}),Ct.config({}),Gt.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},uC=Kr({name:"SplitDropdown",configFields:nZ(),partFields:sZ(),factory:rZ,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),S8=t=>({isEnabled:()=>!rt.isDisabled(t),setEnabled:s=>rt.set(t,!s),setText:s=>st(t,yc,{text:s}),setIcon:s=>st(t,Kf,{icon:s})}),aZ=t=>({setActive:s=>{Gt.set(t,s)},isActive:()=>Gt.isOn(t),isEnabled:()=>!rt.isDisabled(t),setEnabled:s=>rt.set(t,!s),setText:s=>st(t,yc,{text:s}),setIcon:s=>st(t,Kf,{icon:s})}),x8=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),w8=Xe("focus-button"),dC=(t,s,a,i,u,m,f)=>{const h=s.map(C=>yn(vy(C,"tox-tbtn",u))),b=t.map(C=>yn(dm(C,u.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...x8(a,u),...so(f)?{"data-mce-name":f}:{}}},components:Fh([b.map(C=>C.asSpec()),h.map(C=>C.asSpec())]),eventOrder:{[ac()]:["focusing","alloy.base.behaviour",Ni],[Ic()]:[Ni,"toolbar-group-button-events"],[Wl()]:[Ni,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:_e([Gc.toolbarButton(()=>u.checkUiComponentContext(m).shouldDisable),Uo(()=>u.checkUiComponentContext(m)),Rt(Ni,[co((C,x)=>Q3(C)),be(yc,(C,x)=>{h.bind(k=>k.getOpt(C)).each(k=>{_t.set(k,[lo(u.translate(x.event.text))])})}),be(Kf,(C,x)=>{b.bind(k=>k.getOpt(C)).each(k=>{_t.set(k,[dm(x.event.icon,u.icons)])})}),be(ac(),(C,x)=>{x.event.prevent(),Qt(C,w8)})])].concat(i.getOr([])))}},cZ=(t,s,a,i,u)=>{const m=s.shared,f=at(re),h={toolbarButtonBehaviours:[],getApi:S8,onSetup:t.onSetup},b=[Rt("toolbar-group-button-events",[Di(h,f),js(h,f)]),...t.tooltip.map(C=>So.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(C)}))).toArray()];return hm.sketch({lazySink:m.getSink,fetch:()=>yr.nu(C=>{C(we(a(t.items),Yy))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:dC(t.icon,t.text,t.tooltip,S.some(b),m.providers,t.context,u),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},E8=(t,s,a,i)=>{var u;const m=at(re),f=dC(t.icon,t.text,t.tooltip,S.none(),a,t.context,i);return ns.sketch({dom:f.dom,components:f.components,eventOrder:by,buttonBehaviours:{..._e([Rt("toolbar-button-events",[W9({onAction:t.onAction,getApi:s.getApi}),Di(s,m),js(s,m)]),...t.tooltip.map(h=>So.config(a.tooltips.getConfig({tooltipText:a.translate(h)+t.shortcut.map(b=>` (${O4(b)})`).getOr("")}))).toArray(),Gc.toolbarButton(()=>!t.enabled||a.checkUiComponentContext(t.context).shouldDisable),Uo(()=>a.checkUiComponentContext(t.context))].concat(s.toolbarButtonBehaviours)),[Ni]:(u=f.buttonBehaviours)===null||u===void 0?void 0:u[Ni]}})},k8=(t,s,a)=>T8(t,s,[],a),T8=(t,s,a,i)=>E8(t,{toolbarButtonBehaviours:a.length>0?[Rt("toolbarButtonWith",a)]:[],getApi:S8,onSetup:t.onSetup},s,i),_8=(t,s,a)=>hk(t,s,[],a),hk=(t,s,a,i)=>E8(t,{toolbarButtonBehaviours:[_t.config({}),Gt.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[Rt("toolbarToggleButtonWith",a)]:[]),getApi:aZ,onSetup:t.onSetup},s,i),iZ=(t,s,a)=>i=>yr.nu(u=>s.fetch(u)).map(u=>S.from(s3(Co(J4(Xe("menu-value"),u,m=>{s.onItemAction(t(i),m)},s.columns,s.presets,Ti.CLOSE_ON_EXECUTE,s.select.getOr(Sn),a),{movement:U2(s.columns,s.presets),menuBehaviours:If.unnamedEvents(s.columns!=="auto"?[]:[co((m,f)=>{T4(m,4,ZO(s.presets)).each(({numRows:h,numColumns:b})=>{it.setGridSize(m,h,b)})})])})))),lZ=(t,s,a)=>{const i=at(t.tooltip.getOr("")),u=h=>({isEnabled:()=>!rt.isDisabled(h),setEnabled:b=>rt.set(h,!b),setIconFill:(b,C)=>{fo(h.element,`svg path[class="${b}"], rect[class="${b}"]`).each(x=>{Ve(x,"fill",C)})},setActive:b=>{Ve(h.element,"aria-pressed",b),fo(h.element,"span").each(C=>{h.getSystem().getByDom(C).each(x=>Gt.set(x,b))})},isActive:()=>fo(h.element,"span").exists(b=>h.getSystem().getByDom(b).exists(Gt.isOn)),setText:b=>fo(h.element,"span").each(C=>h.getSystem().getByDom(C).each(x=>st(x,yc,{text:b}))),setIcon:b=>fo(h.element,"span").each(C=>h.getSystem().getByDom(C).each(x=>st(x,Kf,{icon:b}))),setTooltip:b=>{const C=s.providers.translate(b);Ve(h.element,"aria-label",C),i.set(b)}}),m=at(re),f={getApi:u,onSetup:t.onSetup};return uC.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...x8(t.tooltip,s.providers),...so(a)?{"data-mce-name":a}:{}}},onExecute:h=>{const b=u(h);b.isEnabled()&&t.onAction(b)},onItemExecute:(h,b,C)=>{},splitDropdownBehaviours:_e([Rt("split-dropdown-events",[co((h,b)=>Q3(h)),be(w8,Ct.focus),Di(f,m),js(f,m)]),Gc.splitButton(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),Uo(()=>s.providers.checkUiComponentContext(t.context)),aa.config({}),...t.tooltip.map(h=>So.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(h),onShow:b=>{if(i.get()!==h){const C=s.providers.translate(i.get());So.setComponents(b,s.providers.tooltips.getComponents({tooltipText:C}))}}})})).toArray()]),eventOrder:{[Ic()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Wl()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:iZ(u,t,s.providers),parts:{menu:Y1(!1,t.columns,t.presets)},components:[uC.parts.button(dC(t.icon,t.text,S.none(),S.some([Gt.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),Gc.toolbarButton(Sn),Uo(q({contextType:"any",shouldDisable:!1}))]),s.providers,t.context)),uC.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:t4("chevron-down",s.providers.icons)},buttonBehaviours:_e([Gc.splitButton(Sn),Uo(q({contextType:"any",shouldDisable:!1}))])}),uC.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},uZ=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],mu=(t,s)=>(a,i,u,m)=>{const f=t(a).mapError(h=>Pg(h)).getOrDie();return s(f,i,u,m)},dZ={button:mu(B2,(t,s,a,i)=>k8(t,s.shared.providers,i)),togglebutton:mu(Lh,(t,s,a,i)=>_8(t,s.shared.providers,i)),menubutton:mu(yN,(t,s,a,i)=>od(t,"tox-tbtn",s,S.none(),!1,i)),splitbutton:mu(kz,(t,s,a,i)=>lZ(t,s.shared,i)),grouptoolbarbutton:mu(bN,(t,s,a,i)=>{const u=a.ui.registry.getAll().buttons,m=h=>dp(a,{buttons:u,toolbar:h,allowToolbarGroups:!1},s,S.none()),f={[ux]:s.shared.header.isPositionedAtTop()?Ql.TopToBottom:Ql.BottomToTop};switch(_h(a)){case hc.floating:return cZ(t,s,m,f,i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},mZ=(t,s,a,i)=>He(dZ,t.type).fold(()=>(console.error("skipping button defined by",t),S.none()),u=>S.some(u(t,s,a,i))),A8={styles:eZ,fontsize:h8,fontsizeinput:JU,fontfamily:HU,blocks:FU,align:BU},fZ=t=>{const s=we(uZ,a=>{const i=Hn(a.items,u=>sn(t,u)||sn(A8,u));return{name:a.name,items:i}});return Hn(s,a=>a.items.length>0)},gZ=t=>{const s=t.split("|");return we(s,a=>({items:a.trim().split(" ")}))},hZ=t=>xt(t,s=>(sn(s,"name")||sn(s,"label"))&&sn(s,"items")),pZ=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?fZ(a):on(s)?gZ(s):hZ(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},bZ=(t,s,a,i,u,m)=>He(s,a.toLowerCase()).orThunk(()=>m.bind(f=>_o(f,h=>He(s,h+a.toLowerCase())))).fold(()=>He(A8,a.toLowerCase()).map(f=>f(t,u)),f=>f.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),S.none()):mZ(f,u,t,a.toLowerCase())),dp=(t,s,a,i)=>{const u=pZ(s),m=we(u,f=>{const h=oe(f.items,b=>b.trim().length===0?[]:bZ(t,s.buttons,b,s.allowToolbarGroups,a,i).toArray());return{title:S.from(t.translate(f.name)),label:ht(f.label!==void 0,t.translate(f.label)),items:h}});return Hn(m,f=>f.items.length>0)},O8=(t,s,a,i)=>{const u=s.mainUi.outerContainer,m=a.toolbar,f=a.buttons;if(xt(m,on)){const h=m.map(b=>{const C={toolbar:b,buttons:f,allowToolbarGroups:a.allowToolbarGroups};return dp(t,C,i,S.none())});Gn.setToolbars(u,h)}else Gn.setToolbar(u,dp(t,a,i,S.none()))},D8=$o(),M8=D8.os.isiOS()&&D8.os.version.major<=12,R8=(t,s)=>{const{uiMotherships:a}=s,i=t.dom;let u=t.getWin();const m=t.getDoc().documentElement,f=at(eo(u.innerWidth,u.innerHeight)),h=at(eo(m.offsetWidth,m.offsetHeight)),b=()=>{const A=f.get();(A.left!==u.innerWidth||A.top!==u.innerHeight)&&(f.set(eo(u.innerWidth,u.innerHeight)),$4(t))},C=()=>{const A=t.getDoc().documentElement,N=h.get();(N.left!==A.offsetWidth||N.top!==A.offsetHeight)&&(h.set(eo(A.offsetWidth,A.offsetHeight)),$4(t))},x=A=>{H4(t,A)};i.bind(u,"resize",b),i.bind(u,"scroll",x);const k=sx(Be.fromDom(t.getBody()),"load",C);t.on("hide",()=>{Ue(a,A=>{Pt(A.element,"display","none")})}),t.on("show",()=>{Ue(a,A=>{rn(A.element,"display")})}),t.on("NodeChange",C),t.on("remove",()=>{k.unbind(),i.unbind(u,"resize",b),i.unbind(u,"scroll",x),u=null})},vZ=(t,s,a)=>{qu(t)&&qr(a.mainUi.mothership.element,a.popupUi.mothership),Gr(s,a.dialogUi.mothership)};var yZ=Object.freeze({__proto__:null,render:(t,s,a,i,u)=>{const{mainUi:m,uiMotherships:f}=s,h=at(0),b=m.outerContainer;MU(t);const C=Be.fromDom(u.targetNode),x=Ml(Xs(C));qr(C,m.mothership),vZ(t,x,s),t.on("PostRender",()=>{Gn.setSidebar(b,a.sidebar,gO(t))}),t.on("SkinLoaded",()=>{O8(t,s,a,i),h.set(t.getWin().innerWidth),Gn.setMenubar(b,ik(t,a)),Gn.setViews(b,a.views),R8(t,s)});const k=Gn.getSocket(b).getOrDie("Could not find expected socket element");if(M8){ii(k.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const F=hy(()=>{t.dispatch("ScrollContent")},20),J=jr(k.element,"scroll",F.throttle);t.on("remove",J.unbind)}A4(t,s),t.addCommand("ToggleSidebar",(F,J)=>{Gn.toggleSidebar(b,J),O$(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var F;return(F=Gn.whichSidebar(b))!==null&&F!==void 0?F:""}),t.addCommand("ToggleView",(F,J)=>{if(Gn.toggleView(b,J)){const $=b.element;m.mothership.broadcastOn([Wd()],{target:$}),Ue(f,G=>{G.broadcastOn([Wd()],{target:$})}),Pr(Gn.whichView(b))&&(t.focus(),t.nodeChanged(),Gn.refreshToolbar(b)),D$(t)}}),t.addQueryValueHandler("ToggleView",()=>{var F;return(F=Gn.whichView(b))!==null&&F!==void 0?F:""});const A=_h(t),N=()=>{Gn.refreshToolbar(s.mainUi.outerContainer)};(A===hc.sliding||A===hc.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const F=t.getWin().innerWidth;F!==h.get()&&(N(),h.set(F))});const L={setEnabled:F=>{Ih(s,F?"setEnabled":"setDisabled")},isEnabled:()=>!rt.isDisabled(b)};return{iframeContainer:k.element.dom,editorContainer:b.element.dom,api:L}}});const N8=t=>/^[0-9\.]+(|px)$/i.test(""+t)?S.some(parseInt(""+t,10)):S.none(),pk=t=>qs(t)?t+"px":t,mC=(t,s,a)=>{const i=s.filter(m=>t<m),u=a.filter(m=>t>m);return i.or(u).getOr(t)},P8=t=>{const s=kw(t),a=_w(t),i=Th(t);return N8(s).map(u=>mC(u,a,i))},CZ=t=>P8(t).getOr(kw(t)),B8=t=>{const s=Tw(t),a=P1(t),i=em(t);return N8(s).map(u=>mC(u,a,i))},SZ=t=>B8(t).getOr(Tw(t)),{ToolbarLocation:bk,ToolbarMode:vk}=lF,xZ=40,fC=(t,s,a,i,u)=>{const{mainUi:m,uiMotherships:f}=a,h=R1.DOM,b=Ei(t),C=tm(t),x=em(t).or(B8(t)),k=i.shared.header,A=k.isPositionedAtTop,N=150,L=_h(t),F=L===vk.sliding||L===vk.floating,J=at(!1),$=()=>J.get()&&!t.removed,G=tt=>F?tt.fold(q(0),xe=>xe.components().length>1?es(xe.components()[1].element):0):0,Y=tt=>{switch(o2(t)){case bk.auto:const xe=Gn.getToolbar(m.outerContainer),Fe=G(xe),wt=es(tt.element)-Fe,Lt=ms(s);if(Lt.y>wt)return"top";{const Nt=tc(s),$n=Math.max(Nt.dom.scrollHeight,es(Nt));return Lt.bottom<$n-wt||ws().bottom<Lt.bottom-wt?"bottom":"top"}case bk.bottom:return"bottom";case bk.top:default:return"top"}},ce=tt=>{u.on(xe=>{to.setModes(xe,[tt]),k.setDockingMode(tt);const Fe=A()?Ql.TopToBottom:Ql.BottomToTop;Ve(xe.element,ux,Fe)})},le=()=>{u.on(tt=>{const xe=x.getOrThunk(()=>ui().width-Rc(s).left-10);Pt(tt.element,"max-width",xe+"px")})},Me=(tt,xe)=>{u.on(Fe=>{const wt=Gn.getToolbar(m.outerContainer),Lt=G(wt),dt=ms(s),Nt=Ge(t,m.outerContainer.element),$n=()=>Nt.fold(()=>dt.x,Er=>{const wc=ms(Er);return Dn(Er,ge())?dt.x:dt.x-wc.x}),Mn=()=>Nt.fold(()=>A()?Math.max(dt.y-es(Fe.element)+Lt,0):dt.bottom,Er=>{var wc;const Ec=ms(Er),$i=(wc=Er.dom.scrollTop)!==null&&wc!==void 0?wc:0,hu=Dn(Er,ge())?Math.max(dt.y-es(Fe.element)+Lt,0):dt.y-Ec.y+$i-es(Fe.element)+Lt;return A()?hu:dt.bottom}),ka=$n(),vo=ht(tt,Math.ceil(m.outerContainer.element.dom.getBoundingClientRect().width)).filter(Er=>Er>N).map(Er=>{const wc=xe.getOr(Dr()),Ec=window.innerWidth-(ka-wc.left),$i=Math.max(Math.min(Er,Ec),N);return Ec<Er&&Pt(m.outerContainer.element,"width",$i+"px"),{width:$i+"px"}}).getOr({width:"max-content"}),xc={position:"absolute",left:Math.round(ka)+"px",top:Mn()+"px"};ii(m.outerContainer.element,{...xc,...vo})})},Ge=(tt,xe)=>qu(tt)?Kg(xe):S.none(),pe=()=>{Ue(f,tt=>{tt.broadcastOn([ih()],{})})},Ke=()=>!b&&(Ma(m.outerContainer.element).left+Eu(m.outerContainer.element)>=window.innerWidth-xZ||Fo(m.outerContainer.element,"width").isSome())?(Pt(m.outerContainer.element,"position","absolute"),Pt(m.outerContainer.element,"left","0px"),rn(m.outerContainer.element,"width"),!0):!1,Le=tt=>{if(!$())return;b||le();const xe=Dr(),Fe=b?!1:Ke();if(F&&Gn.refreshToolbar(m.outerContainer),!b){const wt=Dr(),Lt=ht(xe.left!==wt.left,xe);Me(Fe,Lt),Lt.each(dt=>{Du(dt.left,wt.top)})}C&&u.on(tt),pe()},et=()=>b||!C||!$()?!1:u.get().exists(tt=>{const xe=k.getDockingMode(),Fe=Y(tt);return Fe!==xe?(ce(Fe),!0):!1});return{isVisible:$,isPositionedAtTop:A,show:()=>{J.set(!0),Pt(m.outerContainer.element,"display","flex"),h.addClass(t.getBody(),"mce-edit-focus"),Ue(f,tt=>{rn(tt.element,"display")}),et(),qu(t)?Le(tt=>to.isDocked(tt)?to.reset(tt):to.refresh(tt)):Le(to.refresh)},hide:()=>{J.set(!1),Pt(m.outerContainer.element,"display","none"),h.removeClass(t.getBody(),"mce-edit-focus"),Ue(f,tt=>{Pt(tt.element,"display","none")})},update:Le,updateMode:()=>{et()&&Le(to.reset)},repositionPopups:pe}},Z0=(t,s)=>{const a=ms(t);return{pos:s?a.y:a.bottom,bounds:a}},L8=(t,s,a,i)=>{const u=at(Z0(s,a.isPositionedAtTop())),m=C=>{const{pos:x,bounds:k}=Z0(s,a.isPositionedAtTop()),{pos:A,bounds:N}=u.get(),L=k.height!==N.height||k.width!==N.width;u.set({pos:x,bounds:k}),L&&$4(t,C),a.isVisible()&&(A!==x?a.update(to.reset):L&&(a.updateMode(),a.repositionPopups()))};i||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(to.reset)),t.on("NodeChange keydown",C=>{requestAnimationFrame(()=>m(C))});let f=0;const h=W3(()=>a.update(to.refresh),33);t.on("ScrollWindow",()=>{const C=Dr().left;C!==f&&(f=C,h.throttle()),a.updateMode()}),qu(t)&&t.on("ElementScroll",C=>{a.update(to.refresh)});const b=Ad();b.set(sx(Be.fromDom(t.getBody()),"load",C=>m(C.raw))),t.on("remove",()=>{b.clear()})};var wZ=Object.freeze({__proto__:null,render:(t,s,a,i,u)=>{const{mainUi:m}=s,f=Nn(),h=Be.fromDom(u.targetNode),b=fC(t,h,s,i,f),C=rO(t);XN(t);const x=()=>{if(f.isSet()){b.show();return}f.set(Gn.getHeader(m.outerContainer).getOrDie());const A=$w(t);qu(t)?(qr(h,m.mothership),qr(h,s.popupUi.mothership)):Gr(A,m.mothership),Gr(A,s.dialogUi.mothership);const N=()=>{O8(t,s,a,i),Gn.setMenubar(m.outerContainer,ik(t,a)),b.show(),L8(t,h,b,C),t.nodeChanged()};C?t.once("SkinLoaded",N):N()};t.on("show",x),t.on("hide",b.hide),C||(t.on("focus",x),t.on("blur",b.hide)),t.on("init",()=>{(t.hasFocus()||C)&&x()}),A4(t,s);const k={show:x,hide:b.hide,setEnabled:A=>{Ih(s,A?"setEnabled":"setDisabled")},isEnabled:()=>!rt.isDisabled(m.outerContainer)};return{editorContainer:m.outerContainer.element.dom,api:k}}});const EZ=()=>{const t=Nn(),s=Nn(),a=Nn();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const m=t.get().map(h=>h.mothership),f=s.get().map(h=>h.mothership);return m.fold(()=>f.toArray(),h=>f.fold(()=>[h],b=>Dn(h.element,b.element)?[h]:[h,b]))},lazyGetInOuterOrDie:(m,f)=>()=>a.get().bind(h=>f(h.outerContainer)).getOrDie(`Could not find ${m} element in OuterContainer`)}},kZ="contexttoolbar-show",I8="contexttoolbar-hide",gC=".tox-toolbar-slider__input,.tox-toolbar-textfield",hC=t=>{go.getContent(t).each(s=>{fo(s.element,gC).fold(()=>it.focusIn(s),La)})},yk=t=>Wr(t.element).each(s=>{fs(s,'[tabindex="-1"]').each(a=>{La(a)})}),Ck=Xe("forward-slide"),pC=Xe("backward-slide"),Sk=Xe("change-slide-event"),bC="tox-pop--resizing",TZ=t=>{const s=at([]);return go.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),go.getContent(a).each(i=>{rn(i.element,"visibility")}),bo(a.element,bC),rn(a.element,"width")},onHide:()=>{t.onHide()},inlineBehaviours:_e([Rt("context-toolbar-events",[Id(Hp(),(a,i)=>{i.event.raw.propertyName==="width"&&(bo(a.element,bC),rn(a.element,"width"))}),be(Sk,(a,i)=>{const u=a.element;rn(u,"width");const m=Ft(u);rn(u,"left"),rn(u,"right"),rn(u,"max-width"),go.setContent(a,i.event.contents),Xo(u,bC);const f=Ft(u);Pt(u,"transition","none"),go.reposition(a),rn(u,"transition"),Pt(u,"width",m+"px"),i.event.focus.fold(()=>hC(a),h=>{La(h),Wr(u).isNone()&&hC(a)}),setTimeout(()=>{Pt(a.element,"width",f+"px")},0)}),be(Ck,(a,i)=>{go.getContent(a).each(u=>{s.set(s.get().concat([{bar:u,focus:Hu(Xs(a.element))}]))}),st(a,Sk,{contents:i.event.forwardContents,focus:S.none()})}),be(pC,(a,i)=>{t.onBack(),si(s.get()).each(u=>{s.set(s.get().slice(0,s.get().length-1)),st(a,Sk,{contents:lc(u.bar),focus:u.focus})})})]),it.config({mode:"special",onEscape:a=>si(s.get()).fold(()=>t.onEscape(),i=>(Qt(a,pC),S.some(!0)))})]),lazySink:()=>jt.value(t.sink)})},sd=t=>{const s=Nn();return{setInputEnabled:a=>{a||yk(t),rt.set(t,!a)},isInputEnabled:()=>!rt.isDisabled(t),hide:()=>{s.isSet()||s.set(We.getValue(t)),Qt(t,Vs())},back:()=>{s.isSet()||s.set(We.getValue(t)),Qt(t,pC)},getValue:()=>s.get().getOrThunk(()=>We.getValue(t)),setValue:a=>{s.isSet()?s.set(a):We.setValue(t,a)}}},F8=(t,s)=>be(Z6,(a,i)=>{const u=t.get(a),m=sd(u);s.onAction(m,i.event.buttonApi)}),_Z=(t,s,a)=>{const{primary:i,...u}=s.original,m=Te(B2({...u,type:"button",onAction:re}));return T8(m,a,[F8(t,s)])},AZ=(t,s,a)=>{const{primary:i,...u}=s.original,m=Te(Lh({...u,type:"togglebutton",onAction:re}));return hk(m,a,[F8(t,s)])},W0=t=>t.type==="contextformtogglebutton",OZ=(t,s,a)=>W0(s)?AZ(t,s,a):_Z(t,s,a),$8=(t,s,a)=>{const i=we(s,f=>yn(OZ(t,f,a)));return{asSpecs:()=>we(i,f=>f.asSpec()),findPrimary:f=>_o(s,(h,b)=>h.primary?S.from(i[b]).bind(C=>C.getOpt(f)).filter(Ae(rt.isDisabled)):S.none())}},DZ=(t,s,a)=>{const{width:i,height:u}=t.initValue();return nR({inDialog:!1,label:t.label,enabled:!0,context:S.none(),name:S.none(),width:i,height:u,onEnter:S.some(a),onInput:S.some(m=>t.onInput(sd(m))),onSetup:S.some(t.onSetup),getApi:S.some(sd)},s)},xk=(t,s,a)=>un.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...t.toArray(),s],fieldBehaviours:_e([rt.config({disabled:()=>a.checkUiComponentContext("mode:design").shouldDisable,onDisabled:i=>{yk(i),un.getField(i).each(rt.disable)},onEnabled:i=>{un.getField(i).each(rt.enable)}})])}),MZ=(t,s,a)=>{const i=at(re),u=t.label.map(f=>un.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[lo(s.translate(f))]})),m=un.parts.field({factory:_i,type:"range",inputClasses:["tox-toolbar-slider__input"],inputAttributes:{min:String(t.min()),max:String(t.max())},data:t.initValue().toString(),fromInputValue:f=>ma(f).getOr(t.min()),toInputValue:f=>String(f),inputBehaviours:_e([rt.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),Uo(()=>s.checkUiComponentContext("mode:design")),it.config({mode:"special",onEnter:a,onLeft:(f,h)=>(h.cut(),S.none()),onRight:(f,h)=>(h.cut(),S.none())}),Rt("slider-events",[Di({onSetup:t.onSetup,getApi:sd,onBeforeSetup:it.focusIn},i),js({getApi:sd},i),be(hi(),f=>{t.onInput(sd(f))})])])});return xk(u,m,s)},H8=(t,s,a)=>{const i=at(re),u=t.label.map(b=>un.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[lo(s.translate(b))]})),f={...t.placeholder.map(b=>({placeholder:s.translate(b)})).getOr({})},h=un.parts.field({factory:_i,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],inputAttributes:f,data:t.initValue(),selectOnFocus:!0,inputBehaviours:_e([rt.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),Uo(()=>s.checkUiComponentContext("mode:design")),it.config({mode:"special",onEnter:a,onLeft:(b,C)=>(C.cut(),S.none()),onRight:(b,C)=>(C.cut(),S.none())}),Rt("input-events",[Di({onSetup:t.onSetup,getApi:sd,onBeforeSetup:it.focusIn},i),js({getApi:sd},i),be(hi(),b=>{t.onInput(sd(b))})])])});return xk(u,h,s)},wk=(t,s,a)=>{const u=yn(t(a,b=>f.findPrimary(b).orThunk(()=>h.findPrimary(b)).map(C=>(Ld(C),!0)))),m=Zi(s.commands,b=>b.align==="start"),f=$8(u,m.pass,a),h=$8(u,m.fail,a);return Hn([{title:S.none(),label:S.none(),items:f.asSpecs()},{title:S.none(),label:S.none(),items:[u.asSpec()]},{title:S.none(),label:S.none(),items:h.asSpecs()}],b=>b.items.length>0)},V8=(t,s)=>{switch(t.type){case"contextform":return wk(dn(H8,t),t,s);case"contextsliderform":return wk(dn(MZ,t),t,s);case"contextsizeinputform":return wk(dn(DZ,t),t,s)}},RZ={renderContextForm:(t,s,a)=>Xy({type:t,uid:Xe("context-toolbar"),initGroups:V8(s,a),onEscape:S.none,cyclicKeying:!0,providers:a}),buildInitGroups:V8},z8=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,j0=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=xu(Be.fromDom(t.startContainer),t.startOffset).element;return(us(a)?lr(a):S.some(a)).filter(Go).map(u=>u.dom.getBoundingClientRect()).getOr(s)}else return s},vC=t=>{const s=t.selection.getRng(),a=j0(s);if(t.inline){const i=Dr();return Oo(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=nl(Be.fromDom(t.getBody()));return Oo(i.x+a.left,i.y+a.top,a.width,a.height)}},NZ=(t,s)=>s.filter(a=>K(a)&&ls(a)).map(nl).getOrThunk(()=>vC(t)),PZ=(t,s,a)=>{const i=Math.max(t.x+a,s.x),u=Math.min(t.right-a,s.right);return{x:i,width:u-i}},U8=(t,s,a,i,u,m)=>{const f=Be.fromDom(t.getContainer()),h=fo(f,".tox-editor-header").getOr(f),b=ms(h),C=b.y>=s.bottom,x=i&&!C;if(t.inline&&x)return{y:Math.max(b.bottom+m,a.y),bottom:a.bottom};if(t.inline&&!x)return{y:a.y,bottom:Math.min(b.y-m,a.bottom)};const k=u==="line"?ms(f):s;return x?{y:Math.max(b.bottom+m,a.y),bottom:Math.min(k.bottom-m,a.bottom)}:{y:Math.max(k.y+m,a.y),bottom:Math.min(b.y-m,a.bottom)}},yC=(t,s,a,i=0)=>{const u=ui(window),m=ms(Be.fromDom(t.getContentAreaContainer())),f=i2(t)||l2(t)||L1(t),{x:h,width:b}=PZ(m,u,i);if(t.inline&&!f)return Oo(h,u.y,b,u.height);{const C=s.header.isPositionedAtTop(),{y:x,bottom:k}=U8(t,m,u,C,a,i);return Oo(h,x,b,k-x)}},G0=12,Ek={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},Z8={maxHeightFunction:rh(),maxWidthFunction:qE()},mp=(t,s)=>{const a=t.selection.getRng(),i=xu(Be.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Dn(i.element,s)},CC=(t,s,a)=>{const i=Fo(t,"position");Pt(t,"position",s);const u=a(t);return i.each(m=>Pt(t,"position",m)),u},q0=t=>t==="node",kk=(t,s,a,i,u)=>{const m=vC(t),f=i.lastElement().exists(h=>Dn(a,h));if(mp(t,a))return f?HR:Bi;if(f)return CC(s,i.getMode(),()=>z8(m,ms(s),-20)&&!i.isReposition()?VR:HR);{const h=i.getMode()==="fixed"?u.y+Dr().top:u.y,b=es(s)+G0;return h+b<=m.y?Bi:P0}},Tk=(t,s,a,i)=>{const u=b=>(C,x,k,A,N)=>{const L=kk(t,A,b,a,N),F={...C,y:N.y,height:N.height};return{...L(F,x,k,A,N),alwaysFit:!0}},m=b=>q0(i)?[u(b)]:[];return s?{onLtr:b=>[ps,gs,hs,gr,nr,Zs].concat(m(b)),onRtl:b=>[ps,hs,gs,nr,gr,Zs].concat(m(b))}:{onLtr:b=>[Zs,ps,gr,gs,nr,hs].concat(m(b)),onRtl:b=>[Zs,ps,nr,hs,gr,gs].concat(m(b))}},W8=(t,s,a,i)=>s==="line"?{bubble:Si(G0,0,Ek),layouts:{onLtr:()=>[Qp],onRtl:()=>[KS]},overrides:Z8}:{bubble:Si(0,G0,Ek,1/G0),layouts:Tk(t,a,i,s),overrides:Z8},fp=(t,s)=>{const a=Hn(s,m=>m.predicate(t.dom)),{pass:i,fail:u}=Zi(a,m=>m.type==="contexttoolbar");return{contextToolbars:i,contextForms:u}},j8=t=>{if(t.length<=1)return t;{const s=m=>as(t,f=>f.position===m),a=m=>Hn(t,f=>f.position===m),i=s("selection"),u=s("node");if(i||u)if(u&&i){const m=a("node"),f=we(a("selection"),h=>({...h,position:"node"}));return m.concat(f)}else return a(i?"selection":"node");else return a("line")}},G8=t=>{if(t.length<=1)return t;{const s=i=>kt(t,u=>u.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>Hn(t,u=>u.position===i))}},_k=(t,s,a)=>{const i=fp(t,s);if(i.contextForms.length>0)return S.some({elem:t,toolbars:[i.contextForms[0]]});{const u=fp(t,a);if(u.contextForms.length>0)return S.some({elem:t,toolbars:[u.contextForms[0]]});if(i.contextToolbars.length>0||u.contextToolbars.length>0){const m=j8(i.contextToolbars.concat(u.contextToolbars));return S.some({elem:t,toolbars:m})}else return S.none()}},BZ=(t,s,a)=>t(s)?S.none():xb(s,i=>{if(Go(i)){const{contextToolbars:u,contextForms:m}=fp(i,a.inNodeScope),f=m.length>0?m:G8(u);return f.length>0?S.some({elem:i,toolbars:f}):S.none()}else return S.none()},t),q8=(t,s)=>{const a=Be.fromDom(s.getBody()),i=f=>Dn(f,a),u=f=>!i(f)&&!Ki(a,f),m=Be.fromDom(s.selection.getNode());return u(m)?S.none():_k(m,t.inNodeScope,t.inEditorScope).orThunk(()=>BZ(i,m,t))},LZ=(t,s)=>{const a={},i=[],u=[],m={},f={},h=(x,k)=>{const A=Te(jn(k));a[x]=A,A.launch.map(N=>{m["form:"+x]={...k.launch,type:N.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(A)}}}),A.scope==="editor"?u.push(A):i.push(A),f[x]=A},b=(x,k)=>{mD(k).each(A=>{k.scope==="editor"?u.push(A):i.push(A),f[x]=A})},C=ao(t);return Ue(C,x=>{const k=t[x];k.type==="contextform"||k.type==="contextsliderform"||k.type==="contextsizeinputform"?h(x,k):k.type==="contexttoolbar"&&b(x,k)}),{forms:a,inNodeScope:i,inEditorScope:u,lookupTable:f,formNavigators:m}},Ak="tox-pop--transition",SC=(t,s,a,i)=>{const u=i.backstage,m=u.shared,f=$o().deviceType.isTouch,h=Nn(),b=Nn(),C=Nn(),x=dr(TZ({sink:a,onEscape:()=>(t.focus(),ZD(t),S.some(!0)),onHide:()=>{ZD(t)},onBack:()=>{M$(t)}})),k=()=>{const Le=C.get().getOr("node"),et=q0(Le)?1:0;return yC(t,m,Le,et)},A=()=>!t.removed&&!(f()&&u.isContextMenuOpen()),N=Le=>Ps(Da(Le,h.get(),Dn),!0),L=()=>{if(A()){const Le=k(),et=Ps(C.get(),"node")?NZ(t,h.get()):vC(t);return Le.height<=0||!z8(et,Le,.01)}else return!0},F=()=>{h.clear(),b.clear(),C.clear(),go.hide(x)},J=()=>{if(go.isOpen(x)){const Le=x.element;rn(Le,"display"),L()?Pt(Le,"display","none"):(b.set(0),go.reposition(x))}},$=Le=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Le],behaviours:_e([it.config({mode:"acyclic"}),Rt("pop-dialog-wrap-events",[co(et=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>it.focusIn(et))}),jl(et=>{t.shortcuts.remove("ctrl+F9")})])])}),G=Pl(()=>LZ(s,Le=>{const et=le([Le]);st(x,Ck,{forwardContents:$(et)})})),Y=(Le,et)=>dp(t,{buttons:Le,toolbar:et.items,allowToolbarGroups:!1},i.backstage,S.some(["form:"])),ce=(Le,et)=>RZ.buildInitGroups(Le,et),le=Le=>{const{buttons:et}=t.ui.registry.getAll(),Xt=G(),qn={...et,...Xt.formNavigators},pn=_h(t)===hc.scrolling?hc.scrolling:hc.default,tt=Dt(we(Le,xe=>xe.type==="contexttoolbar"?Y(qn,n0(xe)):ce(xe,m.providers)));return Xy({type:pn,uid:Xe("context-toolbar"),initGroups:tt,onEscape:S.none,cyclicKeying:!0,providers:m.providers})},Me=(Le,et)=>{const Xt=Le==="node"?m.anchors.node(et):m.anchors.cursor(),qn=W8(t,Le,f(),{lastElement:h.get,isReposition:()=>Ps(b.get(),0),getMode:()=>hr.getMode(a)});return Co(Xt,qn)},Ge=(Le,et)=>{if(Ke.cancel(),!A())return;const Xt=le(Le),qn=Le[0].position,pn=Me(qn,et);C.set(qn),b.set(1);const tt=x.element;rn(tt,"display"),N(et)||(bo(tt,Ak),hr.reset(a,x)),go.showWithinBounds(x,$(Xt),{anchor:pn,transition:{classes:[Ak],mode:"placement"}},()=>S.some(k())),et.fold(h.clear,h.set),L()&&Pt(tt,"display","none")};let pe=!1;const Ke=W3(()=>{if(!(!t.hasFocus()||t.removed||pe))if(na(x.element,Ak))Ke.throttle();else{const Le=G();q8(Le,t).fold(F,et=>{Ge(et.toolbars,S.some(et.elem))})}},17);t.on("init",()=>{t.on("remove",F),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",J),t.on("click keyup focus SetContent",Ke.throttle),t.on(I8,F),t.on(kZ,Le=>{const et=G();He(et.lookupTable,Le.toolbarKey).each(Xt=>{Ge([Xt],ht(Le.target!==t,Le.target)),hC(x)})}),t.on("focusout",Le=>{Jv.setEditorTimeout(t,()=>{Wr(a.element).isNone()&&Wr(x.element).isNone()&&F()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&F()}),t.on("DisabledStateChange",Le=>{Le.state&&F()}),t.on("ExecCommand",({command:Le})=>{Le.toLowerCase()==="toggleview"&&F()}),t.on("AfterProgressState",Le=>{Le.state?F():t.hasFocus()&&Ke.throttle()}),t.on("dragstart",()=>{pe=!0}),t.on("dragend drop",()=>{pe=!1}),t.on("NodeChange",Le=>{Wr(x.element).fold(Ke.throttle,re)})})},K8=t=>{Ue([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:ra(t,a.cmd),onSetup:c0(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:vr(t),onAction:ra(t,"JustifyNone")})},Y8=(t,s)=>{const a=()=>{const i=s.getOptions(t),u=s.getCurrent(t).map(s.hash),m=Nn();return we(i,f=>({type:"togglemenuitem",text:s.display(f),onSetup:h=>{const b=x=>{x&&(m.on(k=>k.setActive(!1)),m.set(h)),h.setActive(x)};b(Ps(u,s.hash(f)));const C=s.watcher(t,f,b);return()=>{m.clear(),C()}},onAction:()=>s.setCurrent(t,f)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},IZ=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:bO,hash:s=>ZU(s,["fixed","relative","empty"]).getOr(s),display:$t,watcher:(s,a,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:a}).unbind,getCurrent:s=>S.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:vr(t),onMenuSetup:vr(t)}),FZ=t=>S.from(nO(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:q(a),hash:i=>Tr(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,u,m)=>{var f;return i.formatter.formatChanged("lang",m,!1,{value:u.code,customValue:(f=u.customCode)!==null&&f!==void 0?f:null}).unbind},getCurrent:i=>{const u=Be.fromDom(i.selection.getNode());return Ig(u,m=>S.some(m).filter(Go).bind(f=>gn(f,"lang").map(b=>{const C=gn(f,"data-mce-lang").getOrUndefined();return{code:b,customCode:C,title:""}})))},setCurrent:(i,u)=>i.execCommand("Lang",!1,u),onToolbarSetup:i=>{const u=Ad();return i.setActive(t.formatter.match("lang",{},void 0,!0)),u.set(t.formatter.formatChanged("lang",i.setActive,!0)),Vf(u.clear,vr(t)(i))},onMenuSetup:vr(t)})),$Z=t=>{Y8(t,IZ(t)),FZ(t).each(s=>Y8(t,s))},HZ=(t,s)=>{LU(t,s),VU(t,s),tZ(t,s),r8(t,s),b8(t,s)},X8=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",s=>t.mode.get()===s),t.ui.registry.addContext("any",nt),t.ui.registry.addContext("formatting",s=>t.formatter.canApply(s)),t.ui.registry.addContext("insert",s=>t.schema.isValidChild(t.selection.getNode().tagName,s))},J8=t=>zf(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),Q8=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:J8(t),onAction:ra(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:vr(t),onAction:ra(t,"indent")})},e7=t=>{Q8(t)},t7=(t,s)=>a=>{a.setActive(s.get());const i=u=>{s.set(u.state),a.setActive(u.state)};return t.on("PastePlainTextToggle",i),Vf(()=>t.off("PastePlainTextToggle",i),vr(t)(a))},n7=t=>{const s=at(fO(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:t7(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:t7(t,s)})},xC=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},VZ=t=>{td.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:c0(t,s.name),onAction:xC(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,i=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:c0(t,a),onAction:xC(t,a),shortcut:i})}},gq=t=>{td.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:ra(t,s.action),shortcut:s.shortcut,context:s.context})}),td.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:vr(t),onAction:ra(t,s.action)})})},zZ=t=>{td.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:ra(t,s.action),onSetup:c0(t,s.name)})})},UZ=t=>{VZ(t),gq(t),zZ(t)},ZZ=t=>{td.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:ra(t,s.action),context:s.context})}),td.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:vr(t),onAction:ra(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:vr(t),onAction:xC(t,"code")})},WZ=t=>{UZ(t),ZZ(t)},wC=(t,s)=>zf(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),jZ=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:wC(t,"hasUndo"),onAction:ra(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:wC(t,"hasRedo"),onAction:ra(t,"redo")})},GZ=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:wC(t,"hasUndo"),onAction:ra(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:wC(t,"hasRedo"),onAction:ra(t,"redo"),shortcut:"Meta+Y"})},qZ=t=>{jZ(t),GZ(t)},KZ=t=>zf(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),YZ=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:KZ(t),onAction:ra(t,"mceToggleVisualAid"),context:"any"})},XZ=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:ra(t,"mceToggleVisualAid"),context:"any"})},JZ=t=>{XZ(t),YZ(t)},QZ=(t,s)=>{K8(t),WZ(t),HZ(t,s),qZ(t),j$(t),JZ(t),e7(t),$Z(t),n7(t),X8(t)},o7=t=>on(t)?t.split(/[ ,]/):t,s7=t=>s=>s.options.get(t),eW=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:on(a)||xt(a,on)?{value:o7(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},r7=s7("contextmenu_never_use_native"),tW=s7("contextmenu_avoid_overlap"),nW=t=>a7(t).length===0,a7=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:Hn(a,i=>sn(s,i))},K0=(t,s)=>({type:"makeshift",x:t,y:s}),oW=(t,s,a)=>K0(t.x+s,t.y+a),c7=t=>t.type==="longpress"||t.type.indexOf("touch")===0,Ok=t=>{if(c7(t)){const s=t.touches[0];return K0(s.pageX,s.pageY)}else return K0(t.pageX,t.pageY)},sW=t=>{if(c7(t)){const s=t.touches[0];return K0(s.clientX,s.clientY)}else return K0(t.clientX,t.clientY)},rW=(t,s)=>{const a=R1.DOM.getPos(t);return oW(s,a.x,a.y)},Dk=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?Ok(s):rW(t.getContentAreaContainer(),sW(s)):Mk(t),Mk=t=>({type:"selection",root:Be.fromDom(t.selection.getNode())}),i7=t=>({type:"node",node:S.some(Be.fromDom(t.selection.getNode())),root:Be.fromDom(t.getBody())}),l7=(t,s,a)=>{switch(a){case"node":return i7(t);case"point":return Dk(t,s);case"selection":return Mk(t)}},aW=(t,s,a,i,u,m)=>{const f=a(),h=l7(t,s,m);Yh(f,Ti.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:S.none()}).map(b=>{s.preventDefault(),go.showMenuAt(u,{anchor:h},{menu:{markers:rm("normal")},data:b})})},cW={onLtr:()=>[ps,gs,hs,gr,nr,Zs,Bi,P0,N0,Ny,fm,Xh],onRtl:()=>[ps,hs,gs,nr,gr,Zs,Bi,P0,fm,Xh,N0,Ny]},iW=12,lW={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},Rk=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],u=a.getRng();return G_(t.getWin(),o1.domRange(u)).exists(f=>f.left<=i.clientX&&f.right>=i.clientX&&f.top<=i.clientY&&f.bottom>=i.clientY)}},uW=t=>{const s=t.selection.getRng(),a=()=>{Jv.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),m()};t.once("touchend",a);const i=f=>{f.preventDefault(),f.stopImmediatePropagation()};t.on("mousedown",i,!0);const u=()=>m();t.once("longpresscancel",u);const m=()=>{t.off("touchend",a),t.off("longpresscancel",u),t.off("mousedown",i)}},u7=(t,s,a)=>{const i=l7(t,s,a);return{bubble:Si(0,a==="point"?iW:0,lW),layouts:cW,overrides:{maxWidthFunction:qE(),maxHeightFunction:rh()},...i}},dW=(t,s,a,i,u,m,f)=>{const h=u7(t,s,m);Yh(a,Ti.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:S.none()}).map(b=>{s.preventDefault();const C=f?bs.HighlightMenuAndItem:bs.HighlightNone;go.showMenuWithinBounds(u,{anchor:h},{menu:{markers:rm("normal"),highlightOnOpen:C},data:b,type:"horizontal"},()=>S.some(yC(t,i.shared,m==="node"?"node":"selection"))),t.dispatch(I8)})},mW=(t,s,a,i,u,m)=>{const f=$o(),h=f.os.isiOS(),b=f.os.isMacOS(),C=f.os.isAndroid(),x=f.deviceType.isTouch(),k=()=>!(C||h||b&&x),A=()=>{const N=a();dW(t,s,N,i,u,m,k())};if((b||h)&&m!=="node"){const N=()=>{uW(t),A()};Rk(t,s)?N():(t.once("selectionchange",N),t.once("touchend",()=>t.off("selectionchange",N)))}else A()},EC=t=>on(t)?t==="|":t.type==="separator",Nk={type:"separator"},Pk=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(on(t))return t;switch(t.type){case"separator":return Nk;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return on(i)?i:we(i,Pk)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Ot(a.onAction)}}},d7=(t,s)=>{if(s.length===0)return t;const i=si(t).filter(u=>!EC(u)).fold(()=>[],u=>[Nk]);return t.concat(i).concat(s).concat([Nk])},fW=(t,s,a)=>{const i=Zo(s,(u,m)=>He(t,m.toLowerCase()).map(f=>{const h=f.update(a);if(on(h)&&Or(Cu(h)))return d7(u,h.split(" "));if(ho(h)&&h.length>0){const b=we(h,Pk);return d7(u,b)}else return u}).getOrThunk(()=>u.concat([m])),[]);return i.length>0&&EC(i[i.length-1])&&i.pop(),i},Bk=(t,s)=>s.ctrlKey&&!r7(t),gW=t=>t.type==="longpress"||sn(t,"touches"),m7=(t,s)=>!gW(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),f7=(t,s)=>m7(t,s)?t.selection.getStart(!0):s.target,hW=(t,s)=>{const a=tW(t),i=m7(t,s)?"selection":"point";if(Or(a)){const u=f7(t,s);return hl(Be.fromDom(u),a)?"node":i}else return i},pW=(t,s,a)=>{const u=$o().deviceType.isTouch,m=dr(go.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:_e([Rt("dismissContextMenu",[be(Bd(),(b,C)=>{hn.close(b),t.focus()})])])})),f=()=>go.hide(m),h=b=>{if(r7(t)&&b.preventDefault(),Bk(t,b)||nW(t))return;const C=hW(t,b),x=()=>{const A=f7(t,b),N=t.ui.registry.getAll(),L=a7(t);return fW(N.contextMenus,L,A)};(u()?mW:aW)(t,b,x,a,m,C)};t.on("init",()=>{const b="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(u()?"":" ResizeWindow");t.on(b,f),t.on("longpress contextmenu",h)})},kC=Pa.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),TC=t=>s=>s.translate(-t.left,-t.top),_C=t=>s=>s.translate(t.left,t.top),rd=t=>(s,a)=>Zo(t,(i,u)=>u(i),eo(s,a)),AC=(t,s,a)=>t.fold(rd([_C(a),TC(s)]),rd([TC(s)]),rd([])),gp=(t,s,a)=>t.fold(rd([_C(a)]),rd([]),rd([_C(s)])),g7=(t,s,a)=>t.fold(rd([]),rd([TC(a)]),rd([_C(s),TC(a)])),bW=(t,s,a,i,u,m)=>{const f=gp(t,u,m),h=gp(s,u,m);return Math.abs(f.left-h.left)<=a&&Math.abs(f.top-h.top)<=i},vW=(t,s,a,i,u,m)=>{const f=gp(t,u,m),h=gp(s,u,m),b=Math.abs(f.left-h.left),C=Math.abs(f.top-h.top);return eo(b,C)},Lk=(t,s,a)=>{const i=t.fold((u,m)=>({position:S.some("absolute"),left:S.some(u+"px"),top:S.some(m+"px")}),(u,m)=>({position:S.some("absolute"),left:S.some(u-a.left+"px"),top:S.some(m-a.top+"px")}),(u,m)=>({position:S.some("fixed"),left:S.some(u+"px"),top:S.some(m+"px")}));return{right:S.none(),bottom:S.none(),...i}},yW=(t,s,a)=>t.fold((i,u)=>DC(i+s,u+a),(i,u)=>bm(i+s,u+a),(i,u)=>eg(i+s,u+a)),OC=(t,s,a,i)=>{const u=(m,f)=>(h,b)=>{const C=m(s,a,i);return f(h.getOr(C.left),b.getOr(C.top))};return t.fold(u(g7,DC),u(gp,bm),u(AC,eg))},DC=kC.offset,bm=kC.absolute,eg=kC.fixed,vm=(t,s)=>{const a=Vt(t,s);return Tr(a)?NaN:parseInt(a,10)},h7=(t,s)=>{const a=t.element,i=vm(a,s.leftAttr),u=vm(a,s.topAttr);return isNaN(i)||isNaN(u)?S.none():S.some(eo(i,u))},CW=(t,s,a)=>{const i=t.element;Ve(i,s.leftAttr,a.left+"px"),Ve(i,s.topAttr,a.top+"px")},SW=(t,s)=>{const a=t.element;Vn(a,s.leftAttr),Vn(a,s.topAttr)},xW=(t,s,a,i)=>h7(t,s).fold(()=>a,u=>eg(u.left+i.left,u.top+i.top)),wW=(t,s,a,i,u,m)=>{const f=xW(t,s,a,i),h=s.mustSnap?EW(t,s,f,u,m):kW(t,s,f,u,m),b=AC(f,u,m);return CW(t,s,b),h.fold(()=>({coord:eg(b.left,b.top),extra:S.none()}),C=>({coord:C.output,extra:C.extra}))},p7=(t,s)=>{SW(t,s)},b7=(t,s,a,i)=>_o(t,u=>{const m=u.sensor;return bW(s,m,u.range.left,u.range.top,a,i)?S.some({output:OC(u.output,s,a,i),extra:u.extra}):S.none()}),EW=(t,s,a,i,u)=>{const m=s.getSnapPoints(t);return b7(m,a,i,u).orThunk(()=>Zo(m,(b,C)=>{const x=C.sensor,k=vW(a,x,C.range.left,C.range.top,i,u);return b.deltas.fold(()=>({deltas:S.some(k),snap:S.some(C)}),A=>{const N=(k.left+k.top)/2,L=(A.left+A.top)/2;return N<=L?{deltas:S.some(k),snap:S.some(C)}:b})},{deltas:S.none(),snap:S.none()}).snap.map(b=>({output:OC(b.output,a,i,u),extra:b.extra})))},kW=(t,s,a,i,u)=>{const m=s.getSnapPoints(t);return b7(m,a,i,u)},TW=(t,s,a)=>({coord:OC(t.output,t.output,s,a),extra:t.extra});var _W=Object.freeze({__proto__:null,snapTo:(t,s,a,i)=>{const u=s.getTarget(t.element);if(s.repositionTarget){const m=fa(t.element),f=Dr(m),h=Hb(u),b=TW(i,f,h),C=Lk(b.coord,f,h);bg(u,C)}}});const Ik="data-initial-z-index",AW=t=>{lr(t.element).filter(Go).each(s=>{gn(s,Ik).fold(()=>rn(s,"z-index"),a=>Pt(s,"z-index",a)),Vn(s,Ik)})},OW=t=>{lr(t.element).filter(Go).each(s=>{Fo(s,"z-index").each(a=>{Ve(s,Ik,a)}),Pt(s,"z-index",Ee(t.element,"z-index"))})},v7=(t,s)=>{t.getSystem().addToGui(s),OW(s)},y7=t=>{AW(t),t.getSystem().removeFromGui(t)},Fk=(t,s,a)=>t.getSystem().build(pl.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var DW=Hs("snaps",[ve("getSnapPoints"),an("onSensor"),ve("leftAttr"),ve("topAttr"),se("lazyViewport",ws),se("mustSnap",!1)]);const tg=[se("useFixed",Sn),ve("blockerClass"),se("getTarget",$t),se("onDrag",re),se("repositionTarget",!0),se("onDrop",re),Ln("getBounds",ws),DW],MW=t=>vu(Fo(t,"left"),Fo(t,"top"),Fo(t,"position"),(s,a,i)=>(i==="fixed"?eg:DC)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=Ma(t);return bm(s.left,s.top)}),RW=(t,s,a,i,u)=>{const m=u.bounds,f=gp(s,a,i),h=pi(f.left,m.x,m.x+m.width-u.width),b=pi(f.top,m.y,m.y+m.height-u.height),C=bm(h,b);return s.fold(()=>{const x=g7(C,a,i);return DC(x.left,x.top)},q(C),()=>{const x=AC(C,a,i);return eg(x.left,x.top)})},$k=(t,s,a,i,u,m,f)=>{const h=s.fold(()=>{const b=yW(a,m.left,m.top),C=AC(b,i,u);return eg(C.left,C.top)},b=>{const C=wW(t,b,a,m,i,u);return C.extra.each(x=>{b.onSensor(t,x)}),C.coord});return RW(t,h,i,u,f)},NW=(t,s,a,i)=>{const u=s.getTarget(t.element);if(s.repositionTarget){const m=fa(t.element),f=Dr(m),h=Hb(u),b=MW(u),C=$k(t,s.snaps,b,f,h,i,a),x=Lk(C,f,h);bg(u,x)}s.onDrag(t,u,i)},C7=(t,s)=>({bounds:t.getBounds(),height:Rl(s.element),width:Eu(s.element)}),Hk=(t,s,a,i,u)=>{const m=a.update(i,u),f=a.getStartData().getOrThunk(()=>C7(s,t));m.each(h=>{NW(t,s,f,h)})},S7=(t,s,a,i)=>{s.each(y7),a.snaps.each(m=>{p7(t,m)});const u=a.getTarget(t.element);i.reset(),a.onDrop(t,u)},Vk=t=>(s,a)=>{const i=u=>{a.setStartData(C7(s,u))};return In([be(Db(),u=>{a.getStartData().each(()=>i(u))}),...t(s,a,i)])},PW=t=>In([be(ac(),t.forceDrop),be(kb(),t.drop),be($p(),(s,a)=>{t.move(a.event)}),be(Eb(),t.delayDrop)]);var BW=Object.freeze({__proto__:null,getData:t=>S.from(eo(t.x,t.y)),getDelta:(t,s)=>eo(s.left-t.left,s.top-t.top)});const x7=(t,s,a)=>[be(ac(),(i,u)=>{if(u.event.raw.button!==0)return;u.stop();const f=()=>S7(i,S.some(C),t,s),h=EM(f,200),b={drop:f,delayDrop:h.schedule,forceDrop:f,move:k=>{h.cancel(),Hk(i,t,s,BW,k)}},C=Fk(i,t.blockerClass,PW(b));(()=>{a(i),v7(i,C)})()})],LW=[...tg,io("dragger",{handlers:Vk(x7)})],IW=t=>In([be(Nu(),t.forceDrop),be(Hg(),t.drop),be(yS(),t.drop),be($g(),(s,a)=>{t.move(a.event)})]),FW=t=>{const s=t[0];return S.some(eo(s.clientX,s.clientY))};var w7=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?FW(a):S.none()},getDelta:(t,s)=>eo(s.left-t.left,s.top-t.top)});const E7=(t,s,a)=>{const i=Nn(),u=m=>{S7(m,i.get(),t,s),i.clear()};return[be(Nu(),(m,f)=>{f.stop();const h=()=>u(m),b={drop:h,delayDrop:re,forceDrop:h,move:k=>{Hk(m,t,s,w7,k)}},C=Fk(m,t.blockerClass,IW(b));i.set(C),(()=>{a(m),v7(m,C)})()}),be($g(),(m,f)=>{f.stop(),Hk(m,t,s,w7,f.event)}),be(Hg(),(m,f)=>{f.stop(),u(m)}),be(yS(),u)]},MC=[...tg,io("dragger",{handlers:Vk(E7)})],$W=(t,s,a)=>[...x7(t,s,a),...E7(t,s,a)],HW=[...tg,io("dragger",{handlers:Vk($W)})];var VW=Object.freeze({__proto__:null,mouse:LW,touch:MC,mouseOrTouch:HW}),UW=Object.freeze({__proto__:null,init:()=>{let t=S.none(),s=S.none();const a=()=>{t=S.none(),s=S.none()},i=(b,C)=>{const x=t.map(k=>b.getDelta(k,C));return t=S.some(C),x},u=(b,C)=>b.getData(C).bind(x=>i(b,x)),m=b=>{s=S.some(b)},f=()=>s,h=q({});return zr({readState:h,reset:a,update:u,getStartData:f,setStartData:m})}});const ng=kS({branchKey:"mode",branches:VW,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:S.from(t.extra)})},state:UW,apis:_W}),zk=40,RC=zk/2,k7=(t,s,a,i,u,m)=>t.fold(()=>ng.snap({sensor:bm(a-RC,i-RC),range:eo(u,m),output:bm(S.some(a),S.some(i)),extra:{td:s}}),f=>{const h=a-RC,b=i-RC,C=zk,x=zk,k=f.element.dom.getBoundingClientRect();return ng.snap({sensor:bm(h,b),range:eo(C,x),output:bm(S.some(a-k.width/2),S.some(i-k.height/2)),extra:{td:s}})}),NC=(t,s,a)=>{const i=(u,m)=>u.exists(f=>Dn(f,m));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(u,m)=>{const f=m.td;i(s.get(),f)||(s.set(f),a(f))},mustSnap:!0}},Uk=t=>yn(ns.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:_e([ng.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),aa.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),ZW=(t,s)=>{const a=at([]),i=at([]),u=at(!1),m=Nn(),f=Nn(),h=Ge=>{const pe=nl(Ge);return k7(N.getOpt(s),Ge,pe.x,pe.y,pe.width,pe.height)},b=()=>we(a.get(),Ge=>h(Ge)),C=Ge=>{const pe=nl(Ge);return k7(L.getOpt(s),Ge,pe.right,pe.bottom,pe.width,pe.height)},x=()=>we(i.get(),Ge=>C(Ge)),k=NC(b,m,Ge=>{f.get().each(pe=>{t.dispatch("TableSelectorChange",{start:Ge,finish:pe})})}),A=NC(x,f,Ge=>{m.get().each(pe=>{t.dispatch("TableSelectorChange",{start:pe,finish:Ge})})}),N=Uk(k),L=Uk(A),F=dr(N.asSpec()),J=dr(L.asSpec()),$=(Ge,pe,Ke,Le)=>{const et=pe.dom.getBoundingClientRect();rn(Ge.element,"display");const Xt=Ol(Be.fromDom(t.getBody())).dom.innerHeight,qn=Ke(et),pn=Le(et,Xt);(qn||pn)&&Pt(Ge.element,"display","none")},G=(Ge,pe,Ke,Le)=>{const et=Ke(pe);ng.snapTo(Ge,et),$(Ge,pe,pn=>pn[Le]<0,(pn,tt)=>pn[Le]>tt)},Y=Ge=>G(F,Ge,h,"top"),ce=()=>m.get().each(Y),le=Ge=>G(J,Ge,C,"bottom"),Me=()=>f.get().each(le);if($o().deviceType.isTouch()){const Ge=pe=>we(pe,Be.fromDom);t.on("TableSelectionChange",pe=>{u.get()||(bf(s,F),bf(s,J),u.set(!0));const Ke=Be.fromDom(pe.start),Le=Be.fromDom(pe.finish);m.set(Ke),f.set(Le),S.from(pe.otherCells).each(et=>{a.set(Ge(et.upOrLeftCells)),i.set(Ge(et.downOrRightCells)),Y(Ke),le(Le)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{ce(),Me()}),t.on("TableSelectionClear",()=>{u.get()&&(tu(F),tu(J),u.set(!1)),m.clear(),f.clear()})}};var WW=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const jW=(t,s)=>{const a=S.from(Vt(t,"id")).getOrThunk(()=>{const i=Xe("aria");return Ve(s,"id",i),i});Ve(t,"aria-describedby",a)},GW=t=>{Vn(t,"aria-describedby")},qW=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",KW=(t,s,a)=>{var i;const u=(i=s.delimiter)!==null&&i!==void 0?i:"›",m=(C,x,k)=>ns.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":k}},components:[lo(C)],action:A=>{t.focus(),t.selection.select(x),t.nodeChanged()},buttonBehaviours:_e([So.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",x.nodeName.toLowerCase()]),onShow:(A,N)=>{jW(A.element,N.element)},onHide:A=>{GW(A.element)}})}),Gc.button(a.isDisabled),Uo(()=>a.checkUiComponentContext("any"))])}),f=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[lo(` ${u} `)]}),h=C=>Zo(C,(x,k,A)=>{const N=m(k.name,k.element,A);return A===0?x.concat([N]):x.concat([f(),N])},[]),b=C=>{const x=[];let k=C.length;for(;k-- >0;){const A=C[k];if(A.nodeType===1&&!qW(A)){const N=x$(t,A);if(N.isDefaultPrevented()||x.push({name:N.name,element:A}),N.isPropagationStopped())break}}return x};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:_e([it.config({mode:"flow",selector:"div[role=button]"}),rt.config({disabled:a.isDisabled}),Uo(()=>a.checkUiComponentContext("any")),no.config({}),_t.config({}),Rt("elementPathEvents",[co((C,x)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>it.focusIn(C)),t.on("NodeChange",k=>{const A=b(k.parents),N=A.length>0?h(A):[];_t.set(C,N)})})])]),components:[]}};var ym;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(ym||(ym={}));const YW=(t,s,a,i,u)=>{const m={height:mC(i+s.top,_w(t),Th(t))};return a===ym.Both&&(m.width=mC(u+s.left,P1(t),em(t))),m},T7=(t,s,a)=>{const i=Be.fromDom(t.getContainer()),u=YW(t,s,a,es(i),Ft(i));Ao(u,(m,f)=>{qs(m)&&Pt(i,f,pk(m))}),S$(t)},XW=t=>{const s=mO(t);return s===!1?ym.None:s==="both"?ym.Both:ym.Vertical},PC=(t,s,a,i)=>{const m=eo(a*20,i*20);return T7(t,m,s),S.some(!0)},JW=(t,s)=>{const a=XW(t);if(a===ym.None)return S.none();const i=a===ym.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return S.some(pc("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(i),"data-mce-name":"resize-handle"},behaviours:[ng.config({mode:"mouse",repositionTarget:!1,onDrag:(u,m,f)=>T7(t,f,a),blockerClass:"tox-blocker"}),it.config({mode:"special",onLeft:()=>PC(t,a,-1,0),onRight:()=>PC(t,a,1,0),onUp:()=>PC(t,a,0,-1),onDown:()=>PC(t,a,0,1)}),no.config({}),Ct.config({}),So.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},QW=(t,s)=>{const a=(i,u,m)=>_t.set(i,[lo(s.translate(["{0} "+m,u[m]]))]);return ns.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:_e([Gc.button(s.isDisabled),Uo(()=>s.checkUiComponentContext("any")),no.config({}),_t.config({}),We.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Rt("wordcount-events",[Bu(i=>{const u=We.getValue(i),m=u.mode==="words"?"characters":"words";We.setValue(i,{mode:m,count:u.count}),a(i,u.count,m)}),co(i=>{t.on("wordCountUpdate",u=>{const{mode:m}=We.getValue(i);We.setValue(i,{mode:m,count:u.wordCount}),a(i,u.wordCount,m)})})])]),eventOrder:{[ba()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},ej=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",WW.trim()])},behaviours:_e([Ct.config({})])}]}),i=()=>{const h=O4("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[lo(Zc.translate(["Press {0} for help",h]))]}},u=()=>{const h=[];return t.hasPlugin("wordcount")&&h.push(QW(t,s)),Bw(t)&&h.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:h}},m=()=>{const h=[],b=c2(t),C=dO(t),x=Bw(t)||t.hasPlugin("wordcount"),k=()=>{const A="tox-statusbar__text-container--flex-start",N="tox-statusbar__text-container--flex-end",L="tox-statusbar__text-container--space-around";if(b){const F="tox-statusbar__text-container-3-cols";return!x&&!C?[F,L]:x&&!C?[F,N]:[F,A]}return[x&&!C?N:A]};return C&&h.push(KW(t,{},s)),b&&h.push(i()),x&&h.push(u()),h.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...k()]},components:h}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const h=m(),b=JW(t,s);return h.concat(b.toArray())})()}},Zk=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),tj=(t,s)=>{const a=t.inline,i=a?wZ:yZ,u=tm(t)?F0:vz,m=EZ(),f=Nn(),h=Nn(),b=Nn(),A=$o().deviceType.isTouch()?["tox-platform-touch"]:[],N=Fw(t),L=_h(t),F=yn({dom:{tag:"div",classes:["tox-anchorbar"]}}),J=yn({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),$=()=>m.mainUi.get().map(dt=>dt.outerContainer).bind(Gn.getHeader),G=()=>jt.fromOption(m.dialogUi.get().map(dt=>dt.sink),"UI has not been rendered"),Y=()=>jt.fromOption(m.popupUi.get().map(dt=>dt.sink),"(popup) UI has not been rendered"),ce=m.lazyGetInOuterOrDie("anchor bar",F.getOpt),le=m.lazyGetInOuterOrDie("bottom anchor bar",J.getOpt),Me=m.lazyGetInOuterOrDie("toolbar",Gn.getToolbar),Ge=m.lazyGetInOuterOrDie("throbber",Gn.getThrobber),pe=Iy({popup:Y,dialog:G},t,ce,le),Ke=()=>{const dt={attributes:{[ux]:N?Ql.BottomToTop:Ql.TopToBottom}},Nt=Gn.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:pe.popup,onEscape:()=>{t.focus()}}),$n=Gn.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:pe.popup.shared.getSink,providers:pe.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:hu=>{UD(t,hu)},type:L,lazyToolbar:Me,lazyHeader:()=>$().getOrDie("Could not find header element"),...dt}),Mn=Gn.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:pe.popup.shared.providers,onEscape:()=>{t.focus()},type:L}),ka=L1(t),vo=l2(t),xc=i2(t),Er=Lw(t),wc=Le(),Ec=ka||vo||xc,$i=()=>ka?[Mn]:vo?[$n]:[],tb=Er?[wc,Nt]:[Nt];return Gn.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Ec?[]:["tox-editor-header--empty"]),...dt},components:Dt([xc?tb:[],$i(),Ei(t)?[]:[F.asSpec()]]),sticky:tm(t),editor:t,sharedBackstage:pe.popup.shared})},Le=()=>Gn.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),et=()=>{const dt=Gn.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Nt=Gn.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[dt,Nt]}},Xt=()=>{const dt=$w(t),Nt=Dn(ge(),dt)&&Ee(dt,"display")==="grid",$n={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(A),attributes:{...Zc.isRtl()?{dir:"rtl"}:{}}},behaviours:_e([hr.config({useFixed:()=>u.isDocked($)})])},Mn={dom:{styles:{width:document.body.clientWidth+"px"}},events:In([be(zg(),xc=>{Pt(xc.element,"width",document.body.clientWidth+"px")})])},ka=dr(Co($n,Nt?Mn:{})),vo=c3(ka);return h.set(vo),{sink:ka,mothership:vo}},qn=()=>{const dt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(A),attributes:{...Zc.isRtl()?{dir:"rtl"}:{}}},behaviours:_e([hr.config({useFixed:()=>u.isDocked($),getBounds:()=>s.getPopupSinkBounds()})])},Nt=dr(dt),$n=c3(Nt);return b.set($n),{sink:Nt,mothership:$n}},pn=()=>{const dt=Ke(),Nt=et(),$n=Gn.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:pe.popup}),Mn=Gn.parts.viewWrapper({backstage:pe.popup}),ka=a2(t)&&!a?S.some(ej(t,pe.popup.shared.providers)):S.none(),vo=Dt([N?[]:[dt],a?[]:[Nt],N?[dt]:[]]),xc=Gn.parts.editorContainer({components:Dt([vo,a?[]:[J.asSpec()]])}),Er=Hw(t),wc={role:"application",...Zc.isRtl()?{dir:"rtl"}:{},...Er?{"aria-hidden":"true"}:{}},Ec=dr(Gn.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(N?["tox-tinymce--toolbar-bottom"]:[]).concat(A),styles:{visibility:"hidden",...Er?{opacity:"0",border:"0"}:{}},attributes:wc},components:[xc,...a?[]:[Mn,...ka.toArray()],$n],behaviours:_e([Uo(()=>pe.popup.shared.providers.checkUiComponentContext("any")),rt.config({disableClass:"tox-tinymce--disabled"}),it.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),$i=c3(Ec);return f.set($i),{mothership:$i,outerContainer:Ec}},tt=dt=>{const Nt=pk(CZ(t)),$n=pk(SZ(t));return t.inline||(Ls("div","width",$n)&&Pt(dt.element,"width",$n),Ls("div","height",Nt)?Pt(dt.element,"height",Nt):Pt(dt.element,"height","400px")),Nt},xe=dt=>{t.addShortcut("alt+F9","focus menubar",()=>{Gn.focusMenubar(dt)}),t.addShortcut("alt+F10","focus toolbar",()=>{Gn.focusToolbar(dt)}),t.addCommand("ToggleToolbarDrawer",(Nt,$n)=>{$n!=null&&$n.skipFocus?Gn.toggleToolbarDrawerWithoutFocusing(dt):Gn.toggleToolbarDrawer(dt)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Gn.isToolbarDrawerToggled(dt))},Fe=dt=>{const{mainUi:Nt,popupUi:$n,uiMotherships:Mn}=dt;Zn(n2(t),(ug,nT)=>{t.ui.registry.addGroupToolbarButton(nT,ug)});const{buttons:ka,menuItems:vo,contextToolbars:xc,sidebars:Er,views:wc}=t.ui.registry.getAll(),Ec=u2(t),$i={menuItems:vo,menus:vO(t),menubar:aO(t),toolbar:Ec.getOrThunk(()=>s2(t)),allowToolbarGroups:L===hc.floating,buttons:ka,sidebar:Er,views:wc};xe(Nt.outerContainer),mz(t,Nt.mothership,Mn),u.setup(t,pe.popup.shared,$),QZ(t,pe.popup),pW(t,pe.popup.shared.getSink,pe.popup),Mz(t),kN(t,Ge,pe.popup.shared),SC(t,xc,$n.sink,{backstage:pe.popup}),ZW(t,$n.sink);const tb=t.getElement(),hu=tt(Nt.outerContainer),tT={targetNode:tb,height:hu};return i.render(t,dt,$i,pe.popup,tT)},wt=dt=>(b.set(dt.mothership),dt),Lt=()=>{const dt=pn(),Nt=Xt(),$n=qu(t)?qn():wt(Nt);m.dialogUi.set(Nt),m.popupUi.set($n),m.mainUi.set(dt);const Mn={popupUi:$n,dialogUi:Nt,mainUi:dt,uiMotherships:m.getUiMotherships()};return Fe(Mn)};return{popups:{backstage:pe.popup,getMothership:()=>Zk("popups",b)},dialogs:{backstage:pe.dialog,getMothership:()=>Zk("dialogs",h)},renderUI:Lt}},nj=t=>t.dom.textContent,oj=(t,s)=>{const a=gn(t,"id").fold(()=>{const i=Xe("dialog-label");return Ve(s,"id",i),i},$t);Ve(t,"aria-labelledby",a)},sj=q([ve("lazySink"),En("dragBlockClass"),Ln("getBounds",ws),se("useTabstopAt",nt),se("firstTabstop",0),se("eventOrder",{}),Ws("modalBehaviours",[it]),Zr("onExecute"),Gp("onEscape")]),Wk={sketch:$t},rj=q([va({name:"draghandle",overrides:(t,s)=>({behaviours:_e([ng.config({mode:"mouse",getTarget:a=>fs(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),pr({schema:[ve("dom")],name:"title"}),pr({factory:Wk,schema:[ve("dom")],name:"close"}),pr({factory:Wk,schema:[ve("dom")],name:"body"}),va({factory:Wk,schema:[ve("dom")],name:"footer"}),Hc({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[se("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),se("components",[])],name:"blocker"})]),aj=(t,s,a,i)=>{const u=Nn(),m=L=>{u.set(L);const F=t.lazySink(L).getOrDie(),J=i.blocker(),$=F.getSystem().build({...J,components:J.components.concat([lc(L)]),behaviours:_e([Ct.config({}),Rt("dialog-blocker-events",[Id(rl(),()=>{Jc.isBlocked(L)?re():it.focusIn(L)})])])});bf(F,$),it.focusIn(L)},f=L=>{u.clear(),lr(L.element).each(F=>{L.getSystem().getByDom(F).each(J=>{tu(J)})})},h=L=>wi(L,t,"body"),b=L=>zn(L,t,"footer"),C=(L,F)=>{Jc.block(L,F)},x=L=>{Jc.unblock(L)},k=Xe("modal-events"),A={...t.eventOrder,[Ic()]:[k].concat(t.eventOrder["alloy.system.attached"]||[])},N=$o();return{uid:t.uid,dom:t.dom,components:s,apis:{show:m,hide:f,getBody:h,getFooter:b,setIdle:x,setBusy:C},eventOrder:A,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Ho(t.modalBehaviours,[_t.config({}),it.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),Jc.config({getRoot:u.get}),Rt(k,[co(L=>{const F=wi(L,t,"title").element,J=nj(F);N.os.isMacOS()&&so(J)?Ve(L.element,"aria-label",J):oj(L.element,F)})])])}},Cs=Kr({name:"ModalDialog",configFields:sj(),partFields:rj(),factory:aj,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),_7=Et([zo,m4].concat(Lf)),A7=fi,jk=[P2("button"),bc,Vr("align","end",["start","end"]),N2,Ai,dT("buttonType",["primary","secondary"]),Do("context","mode:design")],BC=[...jk,Ku],og=[er("type",["submit","cancel","custom"]),...BC],Gk=[er("type",["menu"]),cm,Rh,bc,Na("items",_7),...jk],LC=[...jk,er("type",["togglebutton"]),Rh,bc,cm,ur("active",!1)],sg=Ts("type",{submit:og,cancel:og,custom:og,menu:Gk,togglebutton:LC}),IC=[zo,Ku,er("level",["info","warn","error","success"]),sD,se("url","")],cj=Et(IC),O7=t=>[zo,t],D7=[zo,Ku,Ai,P2("button"),bc,b4,dT("buttonType",["primary","secondary","toolbar"]),N2,Do("context","mode:design")],M7=Et(D7),hp=[zo,m4],yl=hp.concat([h4]),ij=hp.concat([f4,Ai,Do("context","mode:design")]),R7=Et(ij),N7=fi,qk=yl.concat([cD("auto"),Do("context","mode:design")]),lj=Et(qk),uj=bb([J1,Ku,sD]),dj=yl.concat([Do("storageKey","default"),Do("context","mode:design")]),mj=Et(dj),Y0=Ze,fj=Et(yl),P7=Ze,gj=hp.concat([Do("tag","textarea"),$s("scriptId"),$s("scriptUrl"),Rd("onFocus"),gS("settings",void 0)]),hj=hp.concat([Do("tag","textarea"),gi("init")]),pj=Ip(t=>ko("customeditor.old",rc(hj),t).orThunk(()=>ko("customeditor.new",rc(gj),t))),Kk=Ze,Yk=yl.concat([Do("context","mode:design")]),bj=Et(Yk),B7=zm(),vj=t=>[zo,Cb("columns"),t],yj=[zo,$s("html"),Vr("presets","presentation",["presentation","document"]),Ln("onInit",re),ur("stretched",!1)],L7=Et(yj),Cj=yl.concat([ur("border",!1),ur("sandboxed",!0),ur("streamContent",!1),ur("transparent",!0)]),Sj=Et(Cj),rg=Ze,I7=Et(hp.concat([Ko("height")])),xj=Et([$s("url"),Fp("zoom"),Fp("cachedWidth"),Fp("cachedHeight")]),FC=yl.concat([Ko("inputMode"),Ko("placeholder"),ur("maximized",!1),Ai,Do("context","mode:design")]),pp=Et(FC),$C=Ze,F7=t=>[zo,f4,t,Vr("align","start",["start","center","end"]),Ko("for")],HC=[Ku,J1],xa=[Ku,Na("items",Bg("items",()=>X0))],X0=pb([Et(HC),Et(xa)]),$7=yl.concat([Na("items",X0),Ai,Do("context","mode:design")]),H7=Et($7),wj=Ze,Ej=yl.concat([mS("items",[Ku,J1]),fS("size",1),Ai,Do("context","mode:design")]),Cm=Et(Ej),Eq=Ze,kj=yl.concat([ur("constrain",!0),Ai,Do("context","mode:design")]),V7=Et(kj),ag=Et([$s("width"),$s("height")]),VC=hp.concat([f4,fS("min",0),fS("max",0)]),z7=Et(VC),Tj=Vm,_j=[zo,Na("header",Ze),Na("cells",Bc(Ze))],Aj=Et(_j),Oj=yl.concat([Ko("placeholder"),ur("maximized",!1),Ai,Do("context","mode:design")]),bp=Et(Oj),kq=Ze,U7=[er("type",["directory","leaf"]),oD,$s("id"),zl("menu",wz),Ko("customStateIcon"),Ko("customStateIconTooltip")],Dj=Et(U7),Mj=U7.concat([Na("children",Bg("children",()=>Ng("type",{directory:Z7,leaf:Dj})))]),Z7=Et(Mj),J0=Ng("type",{directory:Z7,leaf:Dj}),Rj=[zo,Na("items",J0),Rd("onLeafAction"),Rd("onToggleExpand"),Nd("defaultExpandedIds",[],Ze),Ko("defaultSelectedId")],Nj=Et(Rj),W7=yl.concat([Vr("filetype","file",["image","media","file"]),Ai,Ko("picker_text"),Do("context","mode:design")]),Pj=Et(W7),_q=Et([J1,v4]),e=t=>Fs("items","items",Pc(),Bc(Ip(s=>ko(`Checking item of ${t}`,n,s).fold(a=>jt.error(Pg(a)),a=>jt.value(a))))),n=ks(()=>Ng("type",{alertbanner:cj,bar:Et(O7(e("bar"))),button:M7,checkbox:R7,colorinput:mj,colorpicker:fj,dropzone:bj,grid:Et(vj(e("grid"))),iframe:Sj,input:pp,listbox:H7,selectbox:Cm,sizeinput:V7,slider:z7,textarea:bp,urlinput:Pj,customeditor:pj,htmlpanel:L7,imagepreview:I7,collection:lj,label:Et(F7(e("label"))),table:Aj,tree:Nj,panel:r})),o=[zo,se("classes",[]),Na("items",n)],r=Et(o),c=[P2("tab"),oD,Na("items",n)],l=[zo,mS("tabs",c)],d=Et(l),g=BC,p=sg,y=Et([$s("title"),Tn("body",Ng("type",{panel:r,tabpanel:d})),Do("size","normal"),Nd("buttons",[],p),se("initialData",{}),Ln("onAction",re),Ln("onChange",re),Ln("onSubmit",re),Ln("onClose",re),Ln("onCancel",re),Ln("onTabChange",re)]),E=t=>ko("dialog",y,t),T=Et([er("type",["cancel","custom"]),...g]),_=Et([$s("title"),$s("url"),Fp("height"),Fp("width"),Sb("buttons",T),Ln("onAction",re),Ln("onCancel",re),Ln("onClose",re),Ln("onMessage",re)]),R=t=>ko("dialog",_,t),B=t=>X(t)?[t].concat(oe(bu(t),B)):ho(t)?oe(t,B):[],P=t=>on(t.type)&&on(t.name),I={checkbox:N7,colorinput:Y0,colorpicker:P7,dropzone:B7,input:$C,iframe:rg,imagepreview:xj,selectbox:Eq,sizeinput:ag,slider:Tj,listbox:wj,size:ag,textarea:kq,urlinput:_q,customeditor:Kk,collection:uj,togglemenuitem:A7},Z=t=>S.from(I[t.type]),Q=t=>Hn(B(t),P),ee=t=>{const s=Q(t),a=oe(s,i=>Z(i).fold(()=>[],u=>[Tn(i.name,u)]));return Et(a)},ne=t=>{var s;const a=Te(E(t)),i=ee(t),u=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:i,initialData:u}},ye={open:(t,s)=>{const a=ne(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=Te(R(s));return t(a)},redial:t=>ne(t)};var je=Object.freeze({__proto__:null,events:(t,s)=>{const a=(i,u)=>{t.updateState.each(m=>{const f=m(i,u);s.set(f)}),t.renderComponents.each(m=>{const f=m(u,s.get());(t.reuseDom?L5:lw)(i,f)})};return In([be(Pd(),(i,u)=>{const m=u;if(!m.universal){const f=t.channel;wn(m.channels,f)&&a(i,m.data)}}),co((i,u)=>{t.initialData.each(m=>{a(i,m)})})])}}),ue=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),Ce=[ve("channel"),En("renderComponents"),En("updateState"),En("initialData"),ur("reuseDom",!0)],ut=Object.freeze({__proto__:null,init:()=>{const t=at(S.none()),s=()=>t.set(S.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const At=zs({fields:Ce,name:"reflecting",active:je,apis:ue,state:ut}),qt=t=>{const s=[],a={};return Ao(t,(i,u)=>{i.fold(()=>{s.push(u)},m=>{a[u]=m})}),s.length>0?jt.error(s):jt.value(a)},_n=(t,s,a,i)=>{const u=yn(Gf.sketch(m=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:we(t.items,f=>PR(m,f,s,a,i))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[u.asSpec()]}],behaviours:_e([it.config({mode:"acyclic",useTabstopAt:Ae(k0)}),Sr.memento(u),D6(u,{postprocess:m=>qt(m).fold(f=>(console.error(f),{}),$t)}),Rt("dialog-body-panel",[be(rl(),(m,f)=>{m.getSystem().broadcastOn([_0],{newFocus:S.some(f.event.target)})})])])}},Pn=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:Eh(t.action),behaviours:Ho(t.tabButtonBehaviours,[Ct.config({}),it.config({mode:"execution",useSpace:!0,useEnter:!0}),We.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),Ro=gc({name:"TabButton",configFields:[se("uid",void 0),ve("value"),Fs("dom","dom",v(()=>({attributes:{role:"tab",id:Xe("aria"),"aria-selected":"false"}})),mi()),En("action"),se("domModification",{}),Ws("tabButtonBehaviours",[Ct,it,We]),ve("view")],factory:Pn}),ar=q([ve("tabs"),ve("dom"),se("clickToDismiss",!1),Ws("tabbarBehaviours",[bn,it]),Iu(["tabClass","selectedClass"])]),Os=v1({factory:Ro,name:"tabs",unit:"tab",overrides:t=>{const s=(i,u)=>{bn.dehighlight(i,u),st(i,xT(),{tabbar:i,button:u})},a=(i,u)=>{bn.highlight(i,u),st(i,ST(),{tabbar:i,button:u})};return{action:i=>{const u=i.getSystem().getByUid(t.uid).getOrDie(),m=bn.isHighlighted(u,i);(m&&t.clickToDismiss?s:m?re:a)(u,i)},domModification:{classes:[t.markers.tabClass]}}}}),Pe=q([Os]),lt=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Ho(t.tabbarBehaviours,[bn.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(u,m)=>{Ve(m.element,"aria-selected","true")},onDehighlight:(u,m)=>{Ve(m.element,"aria-selected","false")}}),it.config({mode:"flow",getInitial:u=>bn.getHighlighted(u).map(m=>m.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),mn=Kr({name:"Tabbar",configFields:ar(),partFields:Pe(),factory:lt}),ze=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:Ho(t.tabviewBehaviours,[_t.config({})]),domModification:{attributes:{role:"tabpanel"}}}),yt=gc({name:"Tabview",configFields:[Ws("tabviewBehaviours",[_t])],factory:ze}),St=q([se("selectFirst",!0),an("onChangeTab"),an("onDismissTab"),se("tabs",[]),Ws("tabSectionBehaviours",[])]),$e=pr({factory:mn,schema:[ve("dom"),Md("markers",[ve("tabClass"),ve("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),Kt=pr({factory:yt,name:"tabview"}),en=q([$e,Kt]),os=(t,s,a,i)=>{const u=f=>{const h=We.getValue(f);zn(f,t,"tabview").each(b=>{kt(t.tabs,x=>x.value===h).each(x=>{const k=x.view();gn(f.element,"id").each(A=>{Ve(b.element,"aria-labelledby",A)}),_t.set(b,k),t.onChangeTab(b,f,k)})})},m=(f,h)=>{zn(f,t,"tabbar").each(b=>{h(b).each(Ld)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:m1(t.tabSectionBehaviours),events:In(Dt([t.selectFirst?[co((f,h)=>{m(f,bn.getFirst)})]:[],[be(ST(),(f,h)=>{const b=h.event.button;u(b)}),be(xT(),(f,h)=>{const b=h.event.button;t.onDismissTab(f,b)})]])),apis:{getViewItems:f=>zn(f,t,"tabview").map(h=>_t.contents(h)).getOr([]),showTab:(f,h)=>{m(f,C=>{const x=bn.getCandidates(C);return kt(x,A=>We.getValue(A)===h).filter(A=>!bn.isHighlighted(C,A))})}}}},On=Kr({name:"TabSection",configFields:St(),partFields:en(),factory:os,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),xr=(t,s,a)=>we(t,(i,u)=>{_t.set(a,t[u].view());const m=s.dom.getBoundingClientRect();return _t.set(a,[]),m.height}),wa=t=>Ns(El(t,(s,a)=>s>a?-1:s<a?1:0)),Cl=(t,s,a)=>{const i=tc(t).dom,u=fs(t,".tox-dialog-wrap").getOr(t),m=Ee(u,"position")==="fixed";let f;m?f=Math.max(i.clientHeight,window.innerHeight):f=Math.max(i.offsetHeight,i.scrollHeight);const h=es(s),C=s.dom.offsetLeft>=a.dom.offsetLeft+Ft(a)?Math.max(es(a),h):h,x=parseInt(Ee(t,"margin-top"),10)||0,k=parseInt(Ee(t,"margin-bottom"),10)||0,N=es(t)+x+k-C;return f-N},Nr=(t,s)=>{Ns(t).each(a=>On.showTab(s,a.value))},Ua=(t,s)=>{Pt(t,"height",s+"px"),Pt(t,"flex-basis",s+"px")},Za=(t,s,a)=>{fs(t,'[role="dialog"]').each(i=>{fo(i,'[role="tablist"]').each(u=>{a.get().map(m=>(Pt(s,"height","0"),Pt(s,"flex-basis","0"),Math.min(m,Cl(i,s,u)))).each(m=>{Ua(s,m)})})})},cr=t=>fo(t,'[role="tabpanel"]'),Wa=t=>{const s=Nn();return{extraEvents:[co(u=>{const m=u.element;cr(m).each(f=>{Pt(f,"visibility","hidden"),u.getSystem().getByDom(f).toOptional().each(h=>{const b=xr(t,f,h);wa(b).fold(s.clear,s.set)}),Za(m,f,s),rn(f,"visibility"),Nr(t,u),requestAnimationFrame(()=>{Za(m,f,s)})})}),be(zg(),u=>{const m=u.element;cr(m).each(f=>{Za(m,f,s)})}),be(IM,(u,m)=>{const f=u.element;cr(f).each(h=>{const b=Hu(Xs(h));Pt(h,"visibility","hidden");const C=Fo(h,"height").map(A=>parseInt(A,10));rn(h,"height"),rn(h,"flex-basis");const x=h.dom.getBoundingClientRect().height;C.forall(A=>x>A)?(s.set(x),Za(f,h,s)):C.each(A=>{Ua(h,A)}),rn(h,"visibility"),b.each(La)})})],selectFirst:!1}},ct="send-data-to-section",cn="send-data-to-view",No=(t,s,a,i)=>{const u=at({}),m=x=>{const k=We.getValue(x),A=qt(k).getOr({}),N=u.get(),L=Co(N,A);u.set(L)},f=x=>{const k=u.get();We.setValue(x,k)},h=at(null),b=we(t.tabs,x=>({value:x.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[lo(a.shared.providers.translate(x.title))],view:()=>[Gf.sketch(k=>({dom:{tag:"div",classes:["tox-form"]},components:we(x.items,A=>PR(k,A,s,a,i)),formBehaviours:_e([it.config({mode:"acyclic",useTabstopAt:Ae(k0)}),Rt("TabView.form.events",[co(f),jl(m)]),Ba.config({channels:Lg([{key:ct,value:{onReceive:m}},{key:cn,value:{onReceive:f}}])})])}))]})),C=Wa(b);return On.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(x,k,A)=>{const N=We.getValue(k);st(x,LM,{name:N,oldName:h.get()}),h.set(N)},tabs:b,components:[On.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[mn.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:_e([no.config({})])}),On.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:C.selectFirst,tabSectionBehaviours:_e([Rt("tabpanel",C.extraEvents),it.config({mode:"acyclic"}),ln.config({find:x=>Ns(On.getViewItems(x))}),um(S.none(),x=>(x.getSystem().broadcastOn([ct],{}),u.get()),(x,k)=>{u.set(k),x.getSystem().broadcastOn([cn],{})})])})},ss=(t,s,a,i,u,m)=>{const f=C=>{const x=C.body;switch(x.type){case"tabpanel":return[No(x,C.initialData,i,m)];default:return[_n(x,C.initialData,i,m)]}},h=(C,x)=>S.some({isTabPanel:()=>x.body.type==="tabpanel"}),b={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(C=>({id:C})).getOr({}),...u?b:{}}},components:[],behaviours:_e([Sr.childAt(0),At.config({channel:`${$6}-${s}`,updateState:h,renderComponents:f,initialData:t})])}},Ds=(t,s,a,i,u,m)=>ss(t,s,S.some(a),i,u,m),rs=(t,s,a,i)=>{const u=ss(t,s,S.none(),a,!1,i);return Cs.parts.body(u)},xo=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[L6(S.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:_e([no.config({}),Ct.config({})])})]}],behaviours:_e([it.config({mode:"acyclic",useTabstopAt:Ae(k0)})])};return Cs.parts.body(s)},wo=Qd.deviceType.isTouch(),Yr=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),Qc=(t,s)=>Cs.parts.close(ns.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:_e([no.config({})])})),Sl=()=>Cs.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),Fi=(t,s)=>Cs.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:ml(`<p>${DO(s.translate(t))}</p>`)}]}]}),cg=t=>Cs.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),ig=(t,s)=>[pl.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),pl.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],ad=t=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",u=s+"__disable-scroll";return Cs.sketch({lazySink:t.lazySink,onEscape:m=>(t.onEscape(m),S.some(!0)),useTabstopAt:m=>!k0(m),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:ml(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:wo?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:_e([Ct.config({}),Rt("dialog-events",t.dialogEvents.concat([Id(rl(),(m,f)=>{Jc.isBlocked(m)?re():it.focusIn(m)}),be(Mb(),(m,f)=>{m.getSystem().broadcastOn([_0],{newFocus:f.event.newFocus})})])),Rt("scroll-lock",[co(()=>{Xo(ge(),u)}),jl(()=>{bo(ge(),u)})]),...t.extraBehaviours]),eventOrder:{[ba()]:["dialog-events"],[Ic()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Wl()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},ei=t=>ns.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:_e([no.config({}),So.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[pc("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{Qt(s,Ju)}}),cd=(t,s,a,i)=>{const u=m=>[lo(i.translate(m.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(m=>({id:m})).getOr({})}},components:[],behaviours:_e([At.config({channel:`${F6}-${s}`,initialData:t,renderComponents:u})])}},vp=()=>({dom:ml('<div class="tox-dialog__draghandle"></div>')}),yp=(t,s,a,i)=>pl.sketch({dom:ml('<div class="tox-dialog__header"></div>'),components:[cd(t,s,S.some(a),i),vp(),ei(i)],containerBehaviours:_e([ng.config({mode:"mouse",blockerClass:"blocker",getTarget:u=>Yl(u,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),j7=(t,s,a)=>{const i=Cs.parts.title(cd(t,s,S.none(),a)),u=Cs.parts.draghandle(vp()),m=Cs.parts.close(ei(a)),f=[i].concat(t.draggable?[u]:[]).concat([m]);return pl.sketch({dom:ml('<div class="tox-dialog__header"></div>'),components:f})},lg=(t,s,a)=>j7({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),Xk=(t,s,a,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:ml('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),Jk=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{const u=fo(t().element,".tox-dialog__header").map(m=>es(m));Cs.setBusy(t(),(m,f)=>Xk(i.message,f,s,u))},onUnblock:()=>{Cs.setIdle(t())}}),wr="tox-dialog--fullscreen",ja="tox-dialog--width-lg",Cp="tox-dialog--width-md",ae=t=>{switch(t){case"large":return S.some(ja);case"medium":return S.some(Cp);default:return S.none()}},ie=(t,s)=>{const a=Be.fromDom(s.element.dom);na(a,wr)||(cl(a,[ja,Cp]),ae(t).each(i=>Xo(a,i)))},Ne=(t,s)=>{const a=Be.fromDom(t.element.dom),i=_P(a),u=kt(i,m=>m===ja||m===Cp).or(ae(s));Zj(a,[wr,...u.toArray()])},De=(t,s,a)=>dr(ad({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[qf({}),...t.extraBehaviours],onEscape:i=>{Qt(i,Ju)},dialogEvents:s,eventOrder:{[Pd()]:[At.name(),Ba.name()],[Ic()]:["scroll-lock",At.name(),"messages","dialog-events","alloy.base.behaviour"],[Wl()]:["alloy.base.behaviour","dialog-events","messages",At.name(),"scroll-lock"]}})),bt=(t,s={})=>{const a=i=>{const u=we(i.items,m=>{const f=He(s,m.name).getOr(at(!1));return{...m,storage:f}});return{...i,items:u}};return we(t,i=>i.type==="menu"?a(i):i)},fn=t=>Zo(t,(s,a)=>a.type==="menu"?Zo(a.items,(u,m)=>(u[m.name]=m.storage,u),s):s,{}),To=(t,s)=>[Ib(rl(),q3),t(p0,(a,i,u,m)=>{Jl(m.element)&&Hu(Xs(m.element)).each(or),s.onClose(),i.onClose()}),t(Ju,(a,i,u,m)=>{i.onCancel(a),Qt(m,p0)}),be(G2,(a,i)=>s.onUnblock()),be(i3,(a,i)=>s.onBlock(i.event))],xl=(t,s)=>{const a=(u,m)=>be(u,(f,h)=>{i(f,(b,C)=>{m(t(),b,h.event,f)})}),i=(u,m)=>{At.getState(u).get().each(f=>{m(f,u)})};return[...To(a,s),a(au,(u,m,f)=>{m.onAction(u,{name:f.name})})]},ti=(t,s,a)=>{const i=(m,f)=>be(m,(h,b)=>{u(h,(C,x)=>{f(t(),C,b.event,h)})}),u=(m,f)=>{At.getState(m).get().each(h=>{f(h.internalDialog,m)})};return[...To(i,s),i(b0,(m,f)=>f.onSubmit(m)),i(ya,(m,f,h)=>{f.onChange(m,{name:h.name})}),i(au,(m,f,h,b)=>{const C=()=>b.getSystem().isConnected()?it.focusIn(b):void 0,x=N=>Io(N,"disabled")||gn(N,"aria-disabled").exists(L=>L==="true"),k=Xs(b.element),A=Hu(k);f.onAction(m,{name:h.name,value:h.value}),Hu(k).fold(C,N=>{x(N)||A.exists(L=>Ki(N,L)&&x(L))?C():a().toOptional().filter(L=>!Ki(L.element,N)).each(C)})}),i(LM,(m,f,h)=>{f.onTabChange(m,{newTabName:h.name,oldTabName:h.oldName})}),jl(m=>{const f=t();We.setValue(m,f.getData())})]},Q0=(t,s)=>Ay(t,t.type,s),G7=(t,s,a)=>kt(s,i=>i.name===a).bind(i=>i.memento.getOpt(t)),q7=(t,s)=>{const a=s.map(h=>h.footerButtons).getOr([]),i=Zi(a,h=>h.align==="start"),u=(h,b)=>pl.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${h}`]},components:we(b,C=>C.memento.asSpec())}),m=u("start",i.pass),f=u("end",i.fail);return[m,f]},Qk=(t,s,a)=>{const i=(u,m)=>{const f=we(m.buttons,b=>{const C=yn(Q0(b,a));return{name:b.name,align:b.align,memento:C}}),h=b=>G7(u,f,b);return S.some({lookupByName:h,footerButtons:f})};return{dom:ml('<div class="tox-dialog__footer"></div>'),components:[],behaviours:_e([At.config({channel:`${H6}-${s}`,initialData:t,updateState:i,renderComponents:q7})])}},K7=(t,s,a)=>Qk(t,s,a),fu=(t,s,a)=>Cs.parts.footer(Qk(t,s,a)),eb=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=ln.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Gf.getField(i,s).orThunk(()=>t.getFooter().bind(f=>At.getState(f).get()).bind(f=>f.lookupByName(s)))}else return S.none()},Y7=(t,s)=>{const a=t.getRoot();return At.getState(a).get().map(i=>Te(ko("data",i.dataValidator,s))).getOr(s)},eT=(t,s,a)=>{const i=L=>{const F=t.getRoot();F.getSystem().isConnected()&&L(F)},N={getData:()=>{const L=t.getRoot(),F=L.getSystem().isConnected()?t.getFormWrapper():L,J=We.getValue(F),$=Zn(a,G=>G.get());return{...J,...$}},setData:L=>{i(F=>{const J=N.getData(),$=Co(J,L),G=Y7(t,$),Y=t.getFormWrapper();We.setValue(Y,G),Ao(a,(ce,le)=>{sn($,le)&&ce.set($[le])})})},setEnabled:(L,F)=>{eb(t,L).each(F?rt.enable:rt.disable)},focus:L=>{eb(t,L).each(Ct.focus)},block:L=>{if(!on(L))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(F=>{st(F,i3,{message:L})})},unblock:()=>{i(L=>{Qt(L,G2)})},showTab:L=>{i(F=>{const J=t.getBody();At.getState(J).get().exists(G=>G.isTabPanel())&&ln.getCurrent(J).each(G=>{On.showTab(G,L)})})},redial:L=>{i(F=>{const J=t.getId(),$=s(L),G=bt($.internalDialog.buttons,a);F.getSystem().broadcastOn([`${T0}-${J}`],$),F.getSystem().broadcastOn([`${F6}-${J}`],$.internalDialog),F.getSystem().broadcastOn([`${$6}-${J}`],$.internalDialog),F.getSystem().broadcastOn([`${H6}-${J}`],{...$.internalDialog,buttons:G}),N.setData($.initialData)})},close:()=>{i(L=>{Qt(L,p0)})},toggleFullscreen:t.toggleFullscreen};return N},X7=(t,s,a)=>{const i=Xe("dialog"),u=t.internalDialog,m=lg(u.title,i,a),f=at(u.size),h=Y=>eb($,Y),b=ae(f.get()).toArray(),C=(Y,ce)=>(f.set(ce.internalDialog.size),ie(ce.internalDialog.size,Y),S.some(ce)),x=rs({body:u.body,initialData:u.initialData},i,a,h),k=bt(u.buttons),A=fn(k),N=ht(k.length!==0,fu({buttons:k},i,a)),L=ti(()=>G,Jk(()=>J,a.shared.providers,s),a.shared.getSink),F={id:i,header:m,body:x,footer:N,extraClasses:b,extraBehaviours:[At.config({channel:`${T0}-${i}`,updateState:C,initialData:t})],extraStyles:{}},J=De(F,L,a),$=(()=>{const Y=()=>{const le=Cs.getBody(J);return ln.getCurrent(le).getOr(le)},ce=()=>{Ne(J,f.get())};return{getId:q(i),getRoot:q(J),getBody:()=>Cs.getBody(J),getFooter:()=>Cs.getFooter(J),getFormWrapper:Y,toggleFullscreen:ce}})(),G=eT($,s.redial,A);return{dialog:J,instanceApi:G}},J7=(t,s,a,i=!1,u)=>{const m=Xe("dialog"),f=Xe("dialog-label"),h=Xe("dialog-content"),b=t.internalDialog,C=Ke=>eb(Ge,Ke),x=at(b.size),k=ae(x.get()).toArray(),A=(Ke,Le)=>(x.set(Le.internalDialog.size),ie(Le.internalDialog.size,Ke),u(),S.some(Le)),N=yn(yp({title:b.title,draggable:!0},m,f,a.shared.providers)),L=yn(Ds({body:b.body,initialData:b.initialData},m,h,a,i,C)),F=bt(b.buttons),J=fn(F),$=ht(F.length!==0,yn(K7({buttons:F},m,a))),G=ti(()=>pe,{onBlock:Ke=>{Jc.block(le,(Le,et)=>{const Xt=N.getOpt(le).map(qn=>es(qn.element));return Xk(Ke.message,et,a.shared.providers,Xt)})},onUnblock:()=>{Jc.unblock(le)},onClose:()=>s.closeWindow()},a.shared.getSink),Y="tox-dialog-inline",ce=$o().os,le=dr({dom:{tag:"div",classes:["tox-dialog",Y,...k],attributes:{role:"dialog",...ce.isMacOS()?{"aria-label":b.title}:{"aria-labelledby":f}}},eventOrder:{[Pd()]:[At.name(),Ba.name()],[ba()]:["execute-on-form"],[Ic()]:["reflecting","execute-on-form"]},behaviours:_e([it.config({mode:"cyclic",onEscape:Ke=>(Qt(Ke,p0),S.some(!0)),useTabstopAt:Ke=>!k0(Ke)&&(Qn(Ke)!=="button"||Vt(Ke,"disabled")!=="disabled"),firstTabstop:1}),At.config({channel:`${T0}-${m}`,updateState:A,initialData:t}),Ct.config({}),Rt("execute-on-form",G.concat([Id(rl(),(Ke,Le)=>{it.focusIn(Ke)}),be(Mb(),(Ke,Le)=>{Ke.getSystem().broadcastOn([_0],{newFocus:Le.event.newFocus})})])),Jc.config({getRoot:()=>S.some(le)}),_t.config({}),qf({})]),components:[N.asSpec(),L.asSpec(),...$.map(Ke=>Ke.asSpec()).toArray()]}),Me=()=>{Ne(le,x.get())},Ge={getId:q(m),getRoot:q(le),getFooter:()=>$.map(Ke=>Ke.get(le)),getBody:()=>L.get(le),getFormWrapper:()=>{const Ke=L.get(le);return ln.getCurrent(Ke).getOr(Ke)},toggleFullscreen:Me},pe=eT(Ge,s.redial,J);return{dialog:le,instanceApi:pe}};var Yt=tinymce.util.Tools.resolve("tinymce.util.URI");const de=t=>{const s=f=>{t.getSystem().isConnected()&&f(t)};return{block:f=>{if(!on(f))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(h=>{st(h,i3,{message:f})})},unblock:()=>{s(f=>{Qt(f,G2)})},close:()=>{s(f=>{Qt(f,p0)})},sendMessage:f=>{s(h=>{h.getSystem().broadcastOn([K3],f)})}}},mt=["insertContent","setContent","execCommand","close","block","unblock"],zt=t=>X(t)&&mt.indexOf(t.mceAction)!==-1,Jo=t=>!zt(t)&&X(t)&&sn(t,"mceAction"),Ea=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const i=kr(a.ui)?a.ui:!1;t.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},Xr=(t,s,a,i)=>{const u=Xe("dialog"),m=lg(t.title,u,i),f=xo(t),h=t.buttons.bind(Y=>Y.length===0?S.none():S.some(fu({buttons:Y},u,i))),b=xl(()=>G,Jk(()=>$,i.shared.providers,s)),C={...t.height.fold(()=>({}),Y=>({height:Y+"px","max-height":Y+"px"})),...t.width.fold(()=>({}),Y=>({width:Y+"px","max-width":Y+"px"}))},x=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],k=new Yt(t.url,{base_uri:new Yt(window.location.href)}),A=`${k.protocol}://${k.host}${k.port?":"+k.port:""}`,N=Ad(),L=(Y,ce)=>S.some(ce),F=[At.config({channel:`${T0}-${u}`,updateState:L,initialData:t}),Rt("messages",[co(()=>{const Y=jr(Be.fromDom(window),"message",ce=>{if(k.isSameOrigin(new Yt(ce.raw.origin))){const le=ce.raw.data;zt(le)?Ea(a,G,le):Jo(le)&&t.onMessage(G,le)}});N.set(Y)}),jl(N.clear)]),Ba.config({channels:{[K3]:{onReceive:(Y,ce)=>{fo(Y.element,"iframe").each(le=>{const Me=le.dom.contentWindow;so(Me)&&Me.postMessage(ce,A)})}}}})],$=De({id:u,header:m,body:f,footer:h,extraClasses:x,extraBehaviours:F,extraStyles:C},b,i),G=de($);return{dialog:$,instanceApi:G}},Sc=t=>{const s=t.shared;return{open:(i,u)=>{const m=()=>{Cs.hide(C),u()},f=yn(Ay({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:S.some("primary"),align:"end",enabled:!0,icon:S.none()},"cancel",t)),h=Sl(),b=Qc(m,s.providers),C=dr(ad({lazySink:()=>s.getSink(),header:Yr(h,b),body:Fi(i,s.providers),footer:S.some(cg(ig([],[f.asSpec()]))),onEscape:m,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[be(Ju,m)],eventOrder:{}}));Cs.show(C);const x=f.get(C);Ct.focus(x)}}},gu=t=>{const s=t.shared;return{open:(i,u)=>{const m=A=>{Cs.hide(x),u(A)},f=yn(Ay({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:S.some("primary"),align:"end",enabled:!0,icon:S.none()},"submit",t)),h=Ay({context:"any",name:"no",text:"No",primary:!1,buttonType:S.some("secondary"),align:"end",enabled:!0,icon:S.none()},"cancel",t),b=Sl(),C=Qc(()=>m(!1),s.providers),x=dr(ad({lazySink:()=>s.getSink(),header:Yr(b,C),body:Fi(i,s.providers),footer:S.some(cg(ig([],[h,f.asSpec()]))),onEscape:()=>m(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[be(Ju,()=>m(!1)),be(b0,()=>m(!0))],eventOrder:{}}));Cs.show(x);const k=f.get(x);Ct.focus(k)}}},Sp=(t,s)=>Te(ko("data",s,t)),Jr=t=>hl(t,".tox-alert-dialog")||hl(t,".tox-confirm-dialog"),Bj=(t,s,a)=>s&&a?[]:[to.config({contextual:{lazyContext:()=>S.some(ms(Be.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:i=>nm(t,i.element).map(m=>({bounds:om(m),optScrollEnv:S.some({currentScrollTop:m.element.dom.scrollTop,scrollElmTop:Ma(m.element).top})})).getOrThunk(()=>({bounds:ws(),optScrollEnv:S.none()}))})],Q7=t=>{const s=t.editor,a=tm(s),i=Sc(t.backstages.dialog),u=gu(t.backstages.dialog),m=(L,F,J)=>{if(!Tr(F)){if(F.inline==="toolbar")return C(L,t.backstages.popup.shared.anchors.inlineDialog(),J,F);if(F.inline==="bottom")return x(L,t.backstages.popup.shared.anchors.inlineBottomDialog(),J,F);if(F.inline==="cursor")return C(L,t.backstages.popup.shared.anchors.cursor(),J,F)}return b(L,J)},f=(L,F)=>h(L,F),h=(L,F)=>{const J=$=>{const G=Xr($,{closeWindow:()=>{Cs.hide(G.dialog),F(G.instanceApi)}},s,t.backstages.dialog);return Cs.show(G.dialog),G.instanceApi};return ye.openUrl(J,L)},b=(L,F)=>{const J=($,G,Y)=>{const ce=G,Me=X7({dataValidator:Y,initialData:ce,internalDialog:$},{redial:ye.redial,closeWindow:()=>{Cs.hide(Me.dialog),F(Me.instanceApi)}},t.backstages.dialog);return Cs.show(Me.dialog),Me.instanceApi.setData(ce),Me.instanceApi};return ye.open(J,L)},C=(L,F,J,$)=>{const G=(Y,ce,le)=>{const Me=Sp(ce,le),Ge=Nn(),pe=t.backstages.popup.shared.header.isPositionedAtTop(),Ke={dataValidator:le,initialData:Me,internalDialog:Y},Le=()=>Ge.on(pn=>{go.reposition(pn),(!a||!pe)&&to.refresh(pn)}),et=J7(Ke,{redial:ye.redial,closeWindow:()=>{Ge.on(go.hide),s.off("ResizeEditor",Le),Ge.clear(),J(et.instanceApi)}},t.backstages.popup,$.ariaAttrs,Le),Xt=dr(go.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:$.persistent?{event:"doNotDismissYet"}:{},...pe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:_e([Rt("window-manager-inline-events",[be(Bd(),(pn,tt)=>{Qt(et.dialog,Ju)})]),...Bj(s,a,pe)]),isExtraPart:(pn,tt)=>Jr(tt)}));Ge.set(Xt);const qn=()=>{const pn=s.inline?ge():Be.fromDom(s.getContainer()),tt=ms(pn);return S.some(tt)};return go.showWithinBounds(Xt,lc(et.dialog),{anchor:F},qn),(!a||!pe)&&(to.refresh(Xt),s.on("ResizeEditor",Le)),et.instanceApi.setData(Me),it.focusIn(et.dialog),et.instanceApi};return ye.open(G,L)},x=(L,F,J,$)=>{const G=(Y,ce,le)=>{const Me=Sp(ce,le),Ge=Nn(),pe=t.backstages.popup.shared.header.isPositionedAtTop(),Ke={dataValidator:le,initialData:Me,internalDialog:Y},Le=()=>Ge.on(pn=>{go.reposition(pn),to.refresh(pn)}),et=J7(Ke,{redial:ye.redial,closeWindow:()=>{Ge.on(go.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Le),Ge.clear(),J(et.instanceApi)}},t.backstages.popup,$.ariaAttrs,Le),Xt=dr(go.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:$.persistent?{event:"doNotDismissYet"}:{},...pe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:_e([Rt("window-manager-inline-events",[be(Bd(),(pn,tt)=>{Qt(et.dialog,Ju)})]),to.config({contextual:{lazyContext:()=>S.some(ms(Be.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:pn=>nm(s,pn.element).map(xe=>({bounds:om(xe),optScrollEnv:S.some({currentScrollTop:xe.element.dom.scrollTop,scrollElmTop:Ma(xe.element).top})})).getOrThunk(()=>({bounds:ws(),optScrollEnv:S.none()}))})]),isExtraPart:(pn,tt)=>Jr(tt)}));Ge.set(Xt);const qn=()=>t.backstages.popup.shared.getSink().toOptional().bind(pn=>{const tt=nm(s,pn.element),xe=15,Fe=tt.map(dt=>om(dt)).getOr(ws()),wt=ms(Be.fromDom(s.getContentAreaContainer())),Lt=Im(wt,Fe);return S.some(Oo(Lt.x,Lt.y,Lt.width,Lt.height-xe))});return go.showWithinBounds(Xt,lc(et.dialog),{anchor:F},qn),to.refresh(Xt),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Le),et.instanceApi.setData(Me),it.focusIn(et.dialog),et.instanceApi};return ye.open(G,L)};return{open:m,openUrl:f,alert:(L,F)=>{i.open(L,F)},close:L=>{L.close()},confirm:(L,F)=>{u.open(L,F)}}},eP=t=>{e2(t),I$(t),eW(t)};var oK=()=>{$m.add("silver",t=>{eP(t);let s=()=>ws();const{dialogs:a,popups:i,renderUI:u}=tj(t,{getPopupSinkBounds:()=>s()}),m=()=>{const C=u();return nm(t,i.getMothership().element).each(k=>{s=()=>om(k)}),C};Wh.register(t,i.backstage.shared);const f=Q7({editor:t,backstages:{popup:i.backstage,dialog:a.backstage}}),h=Nn(),b=()=>LO(t,{backstage:i.backstage},i.getMothership(),h);return{renderUI:m,getWindowManagerImpl:q(f),getNotificationManagerImpl:b}})};oK()})();const CK={name:"LeadsPage",setup(){const Tc=Cn("all"),H=Cn([]),Ui=Cn(!0),j=Cn(""),Ya=Cn(""),Aa=Cn(!1),oo=Cn({id:0,first_name:"",last_name:"",email:"",phone:"",tag:"",stage:""}),on=Cn({}),X=Cn({message:"",type:""}),xs=Cn([]),ho=Cn([]),Pr=Cn([]),kr=Cn(!1),Tr=Cn(""),ni=Cn([]),so=Cn(null),Ms=Cn(""),qs=Cn(new Set),xt=Cn(!1),re=Cn(!1),Ot=Cn(null),la=Cn(""),Kn=Cn(1),q=Cn(10),$t=zj(()=>Math.ceil(H.value.length/q.value));Cn("");const uo=Cn(""),dn=Cn(""),Ae=Cn(!1),Ht=Cn(!1),Po=Cn(!1),Sn=Cn(!1),nt=Cn(!1),S=Cn(null),Xa=Cn(""),Ie=Cn(!1),Yn=Cn([]),oi=Cn(!1),Ye=Cn(!1),wn=Cn([]),as=Se=>{Ms.value=Se,Tr.value=D(Se),ni.value=Zi(Se),kr.value=!0},Ja=()=>{kr.value=!1},_c=Se=>qs.value.has(Se),we=Se=>{qs.value.has(Se)?qs.value.delete(Se):qs.value.add(Se),oo.value.tag=Array.from(qs.value)},Ue=()=>{Ja()},D=Se=>({listingAlert:"New Listing Alert",neighbourhoodAlert:"Neighbourhood Alert",openHouseAlert:"Open House Alert",actionPlan:"Action Plan",marketUpdates:"Market Updates",newsletter:"Real Estate Newsletter"})[Se]||"Unknown Modal",Zi=Se=>({listingAlert:[{value:"alert1",text:"Alert 1"},{value:"alert2",text:"Alert 2"}],neighbourhoodAlert:[{value:"neigh1",text:"Neighbourhood 1"},{value:"neigh2",text:"Neighbourhood 2"}],openHouseAlert:[{value:"house1",text:"House 1"},{value:"house2",text:"House 2"}],actionPlan:[{value:"plan1",text:"Plan 1"},{value:"plan2",text:"Plan 2"}],marketUpdates:[{value:"update1",text:"Update 1"},{value:"update2",text:"Update 2"}],newsletter:[{value:"news1",text:"Newsletter 1"},{value:"news2",text:"Newsletter 2"}]})[Se]||[],Hn=()=>{Ye.value=!1},Bo=Cn({from:"hiteshpandey732195@gmail.com",to:"",subject:"",message:"",template:"",attachments:[]}),Zo=Se=>{wn.value.splice(Se,1),Bo.value.to=wn.value.join(", ")};Kq(Yn,Se=>{wn.value=H.value.filter(Wt=>Se.includes(Wt.id)).map(Wt=>Wt.email),Bo.value.to=wn.value.join(", "),console.log("Updated To Field:",Bo.value.to)}),Kq(wn,Se=>{Bo.value.to=Se.join(", "),console.log("Updated To Field from Modal:",Bo.value.to)});const Em=async()=>{console.log("Lead modal opening..."),Ye.value=!0,await Wi()},kt=()=>{Ye.value=!1},kn=Se=>{wn.value.includes(Se)?wn.value=wn.value.filter(Wt=>Wt!==Se):wn.value.push(Se)},Dt=Cn(""),oe=Cn(["Best regards,<br>John Doe<br>Company Name","Sincerely,<br>Jane Smith<br>Marketing Head","Thank you,<br>Support Team<br>XYZ Pvt Ltd"]),Br=Cn(""),Rs=Cn(["{{firstName}}","{{lastName}}","{{email}}","{{company}}","{{phone}}"]),vt=()=>{Dt.value&&(Bo.value.subject+=" "+Dt.value)},ua=()=>{if(Br.value){const Se=GC.get("email-editor"),Wt=Se.getContent();Se.setContent(Wt+"<br><br>"+Br.value)}},cs=Cn([]),El=localStorage.getItem("auth_token"),ro=async()=>{try{const Se=await pu.get("/api/templates",{headers:{Authorization:`Bearer ${El}`}});cs.value=Se.data.data??Se.data}catch(Se){console.error("Error fetching templates:",Se),Se.response&&Se.response.status===401&&alert("Session expired. Please log in again.")}},Ns=()=>{Xq(()=>{GC.get("email-editor")||GC.init({selector:"#email-editor",plugins:["anchor autolink autoresize autosave charmap code codesample directionality emoticons fullscreen help image insertdatetime link lists liststyles media nonbreaking pagebreak preview quickbars save searchreplace table visualblocks visualchars wordcount"],toolbar:"undo redo | bold italic underline | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media table | preview fullscreen emoticons charmap | searchreplace code",menubar:"file edit view insert format tools table help",height:500,setup:Se=>{S.value=Se}})})},si=()=>{GC.get("email-editor")&&GC.get("email-editor").remove()},is=()=>{if(Yn.value.length===0){qa.fire({icon:"warning",title:"No Leads Selected",text:"Please select at least one lead before sending an email."});return}nt.value=!0,Xq(()=>{si(),Ns()})},_o=()=>{nt.value=!1,si()},ao=()=>{const Se=cs.value.find(Wt=>Wt.id===Bo.value.template);if(Se){let Wt=Se.content;GC.get("email-editor").setContent(Wt),Br.value&&ua()}},Lr=Se=>{Bo.value.attachments=Array.from(Se.target.files)},Ao=()=>{const Se=S.value.getContent();alert(`Preview:
From: ${Bo.value.from}
To: ${Bo.value.to}
Subject: ${Bo.value.subject}
Message:
${Se}`)},Zn=()=>{alert("Feature not implemented yet. Add scheduling logic here!")},ri=async()=>{const Se=S.value.getContent();if(!Bo.value.to){qa.fire({icon:"error",title:"No Recipients",text:"Please add at least one recipient."});return}qa.fire({title:"Are you sure?",text:"Do you want to send this email?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, send it!",cancelButtonText:"Cancel"}).then(async Wt=>{if(Wt.isConfirmed)try{await pu.post("/api/send-email",{from:Bo.value.from,to:Bo.value.to.split(",").map(Lo=>Lo.trim()),subject:Bo.value.subject,message:Se,template_id:Bo.value.template}),qa.fire({icon:"success",title:"Email Sent!",text:"Your email has been successfully sent."}),_o()}catch{qa.fire({icon:"error",title:"Failed to Send",text:"Something went wrong. Please try again later."})}})},Qo=Cn(!1),Ks=Cn(!1),Rn=Cn({from:"",to:"",subject:"",message:"",template:"",schedule:""}),Ac=()=>{Ks.value=!0},ai=()=>{Ks.value=!1},Wo=Se=>{Rn.value.to=Se.phone,Ks.value=!1},bu=()=>{Rn.value.message.length>300&&(Rn.value.message=Rn.value.message.slice(0,300))},He=Cn([{id:1,name:"Appointment Reminder",content:"Hi {name}, this is a reminder for your appointment."},{id:2,name:"Promotional Offer",content:"Hello {name}, check out our latest promotional offers!"}]),sn=Se=>{Rn.value.to=Se.phone,kt()},_r=Cn(["{name}","{email}","{phone}"]),Ps=()=>{if(Yn.value.length===0){qa.fire("No leads selected!","Please select leads before sending an SMS.","warning");return}Ie.value=!0},kl=()=>{oi.value=!oi.value},Oa=()=>{Ie.value=!1,Rn.value={from:"",to:"",subject:"",message:"",template:"",schedule:""}},Qa=()=>{const Se=He.value.find(Wt=>Wt.id===Rn.value.template);Se&&(Rn.value.message=Se.content)},Da=Se=>{const Wt=Se.target.value;Wt&&(Rn.value.message+=` ${Wt}`,Rn.value.subject+=` ${Wt}`,Se.target.value="")},vu=()=>{qa.fire({title:"SMS Preview",html:`<strong>From:</strong> ${Rn.value.from}<br>
              <strong>To:</strong> ${Rn.value.to}<br>
              <strong>Subject:</strong> ${Rn.value.subject}<br>
              <strong>Message:</strong><br> ${Rn.value.message}`,icon:"info"})},Bn=async()=>{if(!Rn.value.from||!Rn.value.to||!Rn.value.message.trim()){qa.fire("Missing Information","Sender, recipient, and message cannot be empty.","error");return}try{await pu.post("/leads/send-sms",{lead_ids:Yn.value,from:Rn.value.from,to:Rn.value.to,subject:Rn.value.subject,message:Rn.value.message,schedule:Rn.value.schedule||null}),qa.fire("Success","SMS sent successfully.","success"),Oa()}catch{qa.fire("Error","Failed to send SMS.","error")}},ht=async Se=>{Tc.value=Se,Ui.value=!0,Se==="all"?await da():Se==="my"&&await Wi()},da=async()=>{try{const Se=await pu.get("/leads");console.log(Se),H.value=Array.isArray(Se.data)?Se.data:[]}catch{j.value="Failed to fetch leads."}finally{Ui.value=!1}},Wi=async()=>{try{const Se=await pu.get("/leads");H.value=Array.isArray(Se.data)?Se.data:[]}catch{j.value="Failed to fetch my leads."}finally{Ui.value=!1}},yu=async()=>{try{const Se=await pu.get("/items");xs.value=Se.data.tags,ho.value=Se.data.stages,Pr.value=Se.data.sources}catch(Se){console.error("Failed to fetch items:",Se)}},id=()=>{Ae.value=!0},Ar=()=>{Ae.value=!1,uo.value=""},Bs=()=>{Ht.value=!0},ji=()=>{Ht.value=!1,dn.value=""},ec=async()=>{if(uo.value.trim())try{const Se=await pu.post("/api/items",{name:uo.value,type:"tag"});xs.value.push(Se.data.item),uo.value="",Po.value=!1,qa.fire("Success","Tag added successfully","success")}catch(Se){console.error("Failed to add tag:",Se),qa.fire("Error","Failed to add tag","error")}},Tl=async()=>{if(dn.value.trim())try{const Se=await pu.post("/api/items",{name:dn.value,type:"stage"});ho.value.push(Se.data.item),dn.value="",Sn.value=!1,qa.fire("Success","Stage added successfully","success")}catch(Se){console.error("Failed to add stage:",Se),qa.fire("Error","Failed to add stage","error")}},Cu=zj(()=>H.value.filter(Se=>Se.first_name&&Se.first_name.toLowerCase().includes(Ya.value.toLowerCase()))),Or=Se=>{const Wt=xs.value.find(Lo=>Lo.id===Se);return Wt?Wt.name:"N/A"},Gi=Se=>{const Wt=ho.value.find(Lo=>Lo.id===Se);return Wt?Wt.name:"N/A"},ma=()=>(on.value={first_name:oo.value.first_name?"":"First name is required.",last_name:oo.value.last_name?"":"Last name is required.",email:oo.value.email&&/^\S+@\S+\.\S+$/.test(oo.value.email)?"":"Valid email is required.",phone:oo.value.phone&&/^\d{10}$/.test(oo.value.phone)?"":"Valid phone number is required.",tag:oo.value.tag?"":"Tag is required.",stage:oo.value.stage?"":"Stage is required."},!Object.values(on.value).some(Se=>Se)),Ys=async()=>{if(Yn.value.length===0){ir("No leads selected.","error");return}if((await qa.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{const Wt=document.querySelector('meta[name="csrf-token"]'),Lo=Wt?Wt.getAttribute("content"):"";await pu.post("/leads/delete",{lead_ids:Yn.value},{headers:{"X-CSRF-TOKEN":Lo}}),H.value=H.value.filter(Qn=>!Yn.value.includes(Qn.id)),Yn.value=[],qa.fire("Deleted!","Selected leads have been deleted.","success")}catch{qa.fire("Error!","Failed to delete leads.","error")}},Su=Se=>{Se>=1&&Se<=$t.value&&(Kn.value=Se)},km=Se=>{q.value=Se,Kn.value=1},ld=zj(()=>{const Se=(Kn.value-1)*q.value,Wt=Se+q.value;return H.value.slice(Se,Wt)}),Oc=async()=>{if(Yn.value.length===0){ir("No leads selected.","error");return}try{const Se=await pu.post("/leads/export",{lead_ids:Yn.value},{responseType:"blob"}),Wt=window.URL.createObjectURL(new Blob([Se.data])),Lo=document.createElement("a");Lo.href=Wt,Lo.setAttribute("download","leads.csv"),document.body.appendChild(Lo),Lo.click(),document.body.removeChild(Lo),ir("Leads exported successfully!","success")}catch{ir("Failed to export leads.","error")}},ud=async Se=>{const Wt=Se.target.files[0];if(!Wt){ir("No file selected.","error");return}const Lo=new FormData;Lo.append("file",Wt);try{const Qn=document.querySelector('meta[name="csrf-token"]'),md=Qn?Qn.getAttribute("content"):"";await pu.post("/leads/import",Lo,{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":md}}),await ht(),ir("Leads imported successfully!","success")}catch{ir("Failed to import leads.","error")}},Be=()=>{_l(),alert("Indirect File Import option selected")},Dc=()=>{xt.value=!0},_l=()=>{xt.value=!1,re.value=!1,Ot.value=null,la.value=""},dd=()=>{re.value=!0},Tm=Se=>{const Wt=Se.target.files[0];Wt&&Wt.type==="text/csv"?(Ot.value=Wt,la.value=""):(Ot.value=null,la.value="Please select a valid CSV file.")},gg=()=>{if(!Ot.value){la.value="No file selected or invalid file type.";return}console.log("CSV file selected:",Ot.value),_l()},qi=()=>{_l()},ir=(Se,Wt)=>{X.value={message:Se,type:Wt},setTimeout(()=>{X.value.message=""},5e3)},_m=async()=>{if(ma())try{const Se=document.querySelector('meta[name="csrf-token"]'),Wt=Se?Se.getAttribute("content"):"",Lo=localStorage.getItem("auth_token"),Qn=await pu.post("/leads",{first_name:oo.value.first_name,last_name:oo.value.last_name,email:oo.value.email,phone:oo.value.phone,tag:String(oo.value.tag),stage:String(oo.value.stage)},{headers:{"X-CSRF-TOKEN":Wt,Authorization:`Bearer ${Lo}`}});oo.value={id:0,first_name:"",last_name:"",email:"",phone:"",tag:"",stage:""},Aa.value=!1,H.value.push(Qn.data),ir("Lead created successfully!","success")}catch{ir("Failed to create lead.","error")}},jo=Se=>{Se.target.checked?Yn.value=Cu.value.map(Wt=>Wt.id):Yn.value=[]};return hK(async()=>{await ht(Tc.value),await yu(),await si(),await ro()}),{removeEmail:Zo,toggleLeadSelection:kn,toggleSelectAll:jo,showLeadModal:Ye,selectedEmails:wn,addSelectedEmails:Hn,closeLeadModal:kt,openLeadModal:Em,expandSmsModal:kl,showSmsModal:Ie,selectedLeads:Yn,smsData:Rn,smsTemplates:He,mergeTags:_r,openSmsModal:Ps,closeSmsModal:Oa,loadSmsTemplate:Qa,insertMergeTag:Da,previewSms:vu,sendSms:Bn,emailData:Bo,templates:cs,loadTemplate:ao,handleAttachments:Lr,previewEmail:Ao,scheduleEmail:Zn,emailMessage:Xa,showEmailModal:nt,openEmailModal:is,closeEmailModal:_o,sendEmail:ri,getAllLeads:da,getMyLeads:Wi,fetchLeads:ht,activeLeadType:Tc,leads:H,loading:Ui,error:j,searchQuery:Ya,filteredLeads:Cu,showForm:Aa,newLead:oo,errors:on,submitForm:_m,toggleSelectAll:jo,toast:X,getTagValue:Or,getStageValue:Gi,tags:xs,stages:ho,sources:Pr,fetchItems:yu,showImportModal:xt,openImportModal:Dc,closeImportModal:_l,importDirectFile:qi,importIndirectFile:Be,showFileInput:re,showFileUploadField:dd,handleFileUpload:Tm,submitCsvFile:gg,fileError:la,deleteLeads:Ys,exportLeads:Oc,importLeads:ud,currentPage:Kn,pageSize:q,totalPages:$t,changePage:Su,setPageSize:km,paginatedLeads:ld,showToast:ir,newTag:uo,newStage:dn,showTagModal:Ae,showStageModal:Ht,showAddTagInput:Po,showAddStageInput:Sn,openTagModal:id,closeTagModal:Ar,openStageModal:Bs,closeStageModal:ji,addTag:ec,addStage:Tl,openModal:as,submitAction:Ue,showModal:kr,modalTitle:Tr,modalOptions:ni,selectedOption:so,isTagSelected:_c,toggleTagSelection:we,closeModal:Ja,selectedMergeField:Dt,addMergeFieldToSubject:vt,mergeFields:Rs,signatures:oe,addSignatureToBody:ua,selectedSignature:Br,selectLead:sn,countCharacters:bu,showEmailLeadModal:Qo,openSmsLeadModal:Ac,selectSmsLead:Wo,closeSmsLeadModal:ai}}},SK={class:"leads-container"},xK={class:"leads-header"},wK={class:"leads-section"},EK={class:"lead-buttons"},kK={class:"icon-section"},TK={class:"selected-count total-leads"},_K=["disabled"],AK={key:0,class:"integrte_LeadModal"},OK={class:"modal_LeadContent"},DK={class:"modal-header"},MK={class:"modal_LeadBody"},RK=["value","checked"],NK={class:"modal-footer"},PK={key:1,class:"modal"},BK={class:"modal-header"},LK={class:"modal-body"},IK={class:"form-group"},FK={class:"form-group"},$K={class:"email-input-container"},HK={class:"email-tags"},VK=["onClick"],zK={class:"form-group"},UK={class:"form-group"},ZK=["value"],WK={class:"form-group"},jK=["value"],GK={class:"form-group"},qK=["value"],KK={class:"form-group"},YK={class:"form-actions"},XK=["disabled"],JK={key:3,class:"modal"},QK={class:"modal-header"},eY={class:"modal-body"},tY=["onClick"],nY={class:"modal-header"},oY={class:"modal-body"},sY={class:"form-group"},rY={class:"form-group"},aY={class:"input-group"},cY={class:"form-group"},iY={class:"form-group"},lY=["value"],uY={class:"form-group"},dY=["value"],mY={class:"form-group textarea-container"},fY={class:"char-counter"},gY={class:"form-group"},hY={class:"form-actions"},pY=["disabled"],bY=["disabled"],vY=["disabled"],yY=["disabled"],CY=["disabled"],SY=["disabled"],xY=["disabled"],wY=["disabled"],EY=["disabled"],kY=["disabled"],TY=["disabled"],_Y={key:0,class:"modal-overlay"},AY={class:"modal-container"},OY={key:0,class:"import-options"},DY={key:1,class:"file-upload-container"},MY={key:0,class:"error-message"},RY={key:1,class:"tag-modal-overlay"},NY={class:"tag-modal-container"},PY={class:"modal_tags"},BY=["value","checked","onChange"],LY={key:0},IY={key:2,class:"stage-modal-overlay"},FY={class:"stage-modal-container"},$Y={key:0},HY=["value"],VY={key:3,class:"modal-overlay"},zY={class:"modal-container"},UY=["value"],ZY={class:"modal-buttons"},WY={class:"header"},jY={class:"total-leads"},GY={key:4,class:"form-overlay"},qY={class:"form-container"},KY={key:0,class:"error"},YY={key:0,class:"error"},XY={key:0,class:"error"},JY={key:0,class:"error"},QY=["value"],eX={key:0,class:"error"},tX=["value"],nX={key:0,class:"error"},oX={key:0},sX={key:0,id:"leadsTable",class:"table table-striped table-bordered leads-table"},rX={class:"custom-checkbox-label"},aX={class:"custom-checkbox-label"},cX=["value"],iX={key:1,class:"no-leads"},lX=["disabled"],uX=["disabled"];function dX(Tc,H,Ui,j,Ya,Aa){const oo=Jq("Editor"),on=Jq("router-link");return Zt(),Ut("div",SK,[te("div",xK,[te("div",wK,[te("div",EK,[te("button",{class:Ka(["btn",{active:j.activeLeadType==="all"}]),onClick:H[0]||(H[0]=X=>j.fetchLeads("all"))}," All Leads ",2),te("button",{class:Ka(["btn",{active:j.activeLeadType==="my"}]),onClick:H[1]||(H[1]=X=>j.fetchLeads("my"))}," My Leads ",2)])]),te("div",kK,[te("ul",null,[te("li",TK," Selected Leads: "+Un(j.selectedLeads.length),1),H[123]||(H[123]=te("li",{class:"total-leads"},[te("i",{class:"fa-solid fa-plus"})],-1)),te("li",{class:Ka(["total-leads",{disabled:j.selectedLeads.length===0}]),onClick:H[2]||(H[2]=(...X)=>j.deleteLeads&&j.deleteLeads(...X)),disabled:j.selectedLeads.length===0},H[84]||(H[84]=[te("span",null,"Delete",-1),te("i",{class:"fa-solid fa-trash-can-arrow-up"},null,-1)]),10,_K),j.showLeadModal?(Zt(),Ut("div",AK,[te("div",OK,[te("div",DK,[H[85]||(H[85]=te("h2",null,"Select Leads",-1)),te("button",{onClick:H[3]||(H[3]=(...X)=>j.closeLeadModal&&j.closeLeadModal(...X))},"×")]),te("div",MK,[te("table",null,[H[86]||(H[86]=te("thead",null,[te("tr",null,[te("th",null,"Select"),te("th",null,"Name"),te("th",null,"Email")])],-1)),te("tbody",null,[(Zt(!0),Ut(Vi,null,zi(j.leads,X=>(Zt(),Ut("tr",{key:X.id},[te("td",null,[Gs(te("input",{type:"checkbox",value:X.email,"onUpdate:modelValue":H[4]||(H[4]=xs=>j.selectedEmails=xs),checked:j.selectedLeads.includes(X.id)},null,8,RK),[[Qq,j.selectedEmails]])]),te("td",null,Un(X.first_name)+" "+Un(X.last_name),1),te("td",null,Un(X.email),1)]))),128))])])]),te("div",NK,[te("button",{onClick:H[5]||(H[5]=(...X)=>j.addSelectedEmails&&j.addSelectedEmails(...X))},"Add Selected")])])])):yo("",!0),j.showEmailModal?(Zt(),Ut("div",PK,[te("div",BK,[H[87]||(H[87]=te("h2",null,"Compose Email",-1)),te("button",{onClick:H[6]||(H[6]=(...X)=>j.closeEmailModal&&j.closeEmailModal(...X))},"×")]),te("div",LK,[te("div",IK,[H[88]||(H[88]=te("label",{for:"from"},"From:",-1)),Gs(te("input",{type:"email",id:"from","onUpdate:modelValue":H[7]||(H[7]=X=>j.emailData.from=X),placeholder:"Enter sender email"},null,512),[[wl,j.emailData.from]])]),te("div",FK,[H[89]||(H[89]=te("label",{for:"to"},"To:",-1)),te("div",$K,[te("div",HK,[(Zt(!0),Ut(Vi,null,zi(j.selectedEmails,(X,xs)=>(Zt(),Ut("span",{key:xs,class:"email-tag"},[wm(Un(X)+" ",1),te("button",{onClick:ho=>j.removeEmail(xs),class:"remove-email"},"×",8,VK)]))),128))]),te("button",{onClick:H[8]||(H[8]=(...X)=>j.openLeadModal&&j.openLeadModal(...X))},"+")])]),te("div",zK,[H[90]||(H[90]=te("label",{for:"subject"},"Subject:",-1)),Gs(te("input",{type:"text",id:"subject","onUpdate:modelValue":H[9]||(H[9]=X=>j.emailData.subject=X),placeholder:"Enter subject"},null,512),[[wl,j.emailData.subject]])]),te("div",UK,[H[92]||(H[92]=te("label",{for:"mergeFields"},"Merge Fields:",-1)),Gs(te("select",{id:"mergeFields","onUpdate:modelValue":H[10]||(H[10]=X=>j.selectedMergeField=X),onChange:H[11]||(H[11]=(...X)=>j.addMergeFieldToSubject&&j.addMergeFieldToSubject(...X))},[H[91]||(H[91]=te("option",{value:""},"Select Merge Field",-1)),(Zt(!0),Ut(Vi,null,zi(j.mergeFields,X=>(Zt(),Ut("option",{key:X,value:X},Un(X),9,ZK))),128))],544),[[fg,j.selectedMergeField]])]),te("div",WK,[H[94]||(H[94]=te("label",{for:"template"},"Template:",-1)),Gs(te("select",{id:"template","onUpdate:modelValue":H[12]||(H[12]=X=>j.emailData.template=X),onChange:H[13]||(H[13]=(...X)=>j.loadTemplate&&j.loadTemplate(...X))},[H[93]||(H[93]=te("option",{value:""},"Select Template",-1)),(Zt(!0),Ut(Vi,null,zi(j.templates,X=>(Zt(),Ut("option",{key:X.id,value:X.id},Un(X.title),9,jK))),128))],544),[[fg,j.emailData.template]])]),H[98]||(H[98]=te("textarea",{id:"email-editor"},null,-1)),te("div",GK,[H[96]||(H[96]=te("label",{for:"signature"},"Select Signature:",-1)),Gs(te("select",{id:"signature","onUpdate:modelValue":H[14]||(H[14]=X=>j.selectedSignature=X),onChange:H[15]||(H[15]=(...X)=>j.addSignatureToBody&&j.addSignatureToBody(...X))},[H[95]||(H[95]=te("option",{value:""},"Select Signature",-1)),(Zt(!0),Ut(Vi,null,zi(j.signatures,(X,xs)=>(Zt(),Ut("option",{key:xs,value:X}," Signature "+Un(xs+1),9,qK))),128))],544),[[fg,j.selectedSignature]])]),te("div",KK,[H[97]||(H[97]=te("label",{for:"attachments"},"Attachments:",-1)),te("input",{type:"file",id:"attachments",multiple:"",onChange:H[16]||(H[16]=(...X)=>j.handleAttachments&&j.handleAttachments(...X))},null,32)]),te("div",YK,[te("button",{onClick:H[17]||(H[17]=(...X)=>j.previewEmail&&j.previewEmail(...X))},"Preview"),te("button",{onClick:H[18]||(H[18]=(...X)=>j.scheduleEmail&&j.scheduleEmail(...X))},"Schedule"),te("button",{onClick:H[19]||(H[19]=(...X)=>j.sendEmail&&j.sendEmail(...X))},"Send Email")])])])):yo("",!0),j.activeLeadType==="my"?(Zt(),Ut("li",{key:2,class:Ka(["total-leads",{disabled:j.selectedLeads.length===0}]),onClick:H[20]||(H[20]=(...X)=>j.openEmailModal&&j.openEmailModal(...X)),disabled:j.selectedLeads.length===0},H[99]||(H[99]=[te("span",null,"Email",-1),te("i",{class:"fa-solid fa-envelope"},null,-1)]),10,XK)):yo("",!0),Tc.showSmsLeadModal?(Zt(),Ut("div",JK,[te("div",QK,[H[100]||(H[100]=te("h2",null,"Select Lead for SMS",-1)),te("button",{onClick:H[21]||(H[21]=(...X)=>j.closeSmsLeadModal&&j.closeSmsLeadModal(...X))},"×")]),te("div",eY,[te("ul",null,[(Zt(!0),Ut(Vi,null,zi(j.leads,X=>(Zt(),Ut("li",{key:X.id,onClick:xs=>j.selectSmsLead(X)},Un(X.first_name)+" "+Un(X.last_name)+" - "+Un(X.phone),9,tY))),128))])])])):yo("",!0),j.showSmsModal?(Zt(),Ut("div",{key:4,class:Ka(["modal",{"modal-fullscreen":Tc.isFullscreen}])},[te("div",nY,[H[101]||(H[101]=te("h2",null,"Compose SMS",-1)),te("i",{class:"fas fa-expand-alt",onClick:H[22]||(H[22]=(...X)=>j.expandSmsModal&&j.expandSmsModal(...X)),title:"Expand"}),te("button",{onClick:H[23]||(H[23]=(...X)=>j.closeSmsModal&&j.closeSmsModal(...X))},"×")]),te("div",oY,[te("div",sY,[H[102]||(H[102]=te("label",{for:"sms-from"},"From:",-1)),Gs(te("input",{type:"text",id:"sms-from","onUpdate:modelValue":H[24]||(H[24]=X=>j.smsData.from=X),placeholder:"Enter sender's name or phone number"},null,512),[[wl,j.smsData.from]])]),te("div",rY,[H[103]||(H[103]=te("label",{for:"sms-to"},"To:",-1)),te("div",aY,[Gs(te("input",{type:"text",id:"sms-to","onUpdate:modelValue":H[25]||(H[25]=X=>j.smsData.to=X),placeholder:"Select a lead",readonly:""},null,512),[[wl,j.smsData.to]]),te("button",{class:"plus-button",onClick:H[26]||(H[26]=(...X)=>j.openSmsLeadModal&&j.openSmsLeadModal(...X))},"+")])]),te("div",cY,[H[104]||(H[104]=te("label",{for:"sms-subject"},"Subject:",-1)),Yq(oo,{modelValue:j.smsData.subject,"onUpdate:modelValue":H[27]||(H[27]=X=>j.smsData.subject=X),init:Tc.tinyMceConfig},null,8,["modelValue","init"])]),te("div",iY,[H[106]||(H[106]=te("label",{for:"sms-template"},"Template:",-1)),Gs(te("select",{id:"sms-template","onUpdate:modelValue":H[28]||(H[28]=X=>j.smsData.template=X),onChange:H[29]||(H[29]=(...X)=>j.loadSmsTemplate&&j.loadSmsTemplate(...X))},[H[105]||(H[105]=te("option",{value:""},"Select Template",-1)),(Zt(!0),Ut(Vi,null,zi(j.smsTemplates,X=>(Zt(),Ut("option",{key:X.id,value:X.id},Un(X.name),9,lY))),128))],544),[[fg,j.smsData.template]])]),te("div",uY,[H[108]||(H[108]=te("label",{for:"merge-tags"},"Insert Merge Tag:",-1)),te("select",{id:"merge-tags",onChange:H[30]||(H[30]=X=>j.insertMergeTag(X))},[H[107]||(H[107]=te("option",{value:""},"Select Tag",-1)),(Zt(!0),Ut(Vi,null,zi(j.mergeTags,X=>(Zt(),Ut("option",{key:X,value:X},Un(X),9,dY))),128))],32)]),te("div",mY,[H[109]||(H[109]=te("label",{for:"sms-message"},"Message:",-1)),Gs(te("textarea",{id:"sms-message","onUpdate:modelValue":H[31]||(H[31]=X=>j.smsData.message=X),placeholder:"Type your message here...",rows:"5",maxlength:"300",onInput:H[32]||(H[32]=(...X)=>j.countCharacters&&j.countCharacters(...X))},null,544),[[wl,j.smsData.message]]),te("span",fY,Un(j.smsData.message.length)+"/300",1)]),te("div",gY,[H[110]||(H[110]=te("label",{for:"sms-schedule"},"Schedule SMS:",-1)),Gs(te("input",{type:"datetime-local",id:"sms-schedule","onUpdate:modelValue":H[33]||(H[33]=X=>j.smsData.schedule=X)},null,512),[[wl,j.smsData.schedule]])]),te("div",hY,[te("button",{onClick:H[34]||(H[34]=(...X)=>j.previewSms&&j.previewSms(...X))},"Preview"),te("button",{onClick:H[35]||(H[35]=(...X)=>j.sendSms&&j.sendSms(...X))},"Send SMS")])])],2)):yo("",!0),j.activeLeadType==="my"?(Zt(),Ut("li",{key:5,class:Ka(["total-leads",{disabled:j.selectedLeads.length===0}]),onClick:H[36]||(H[36]=(...X)=>j.openSmsModal&&j.openSmsModal(...X)),disabled:j.selectedLeads.length===0},H[111]||(H[111]=[te("span",null,"Smart SMS",-1),te("i",{class:"fa-solid fa-comment-dots"},null,-1)]),10,pY)):yo("",!0),j.activeLeadType==="my"?(Zt(),Ut("li",{key:6,class:Ka(["total-leads",{disabled:j.selectedLeads.length===0}]),disabled:j.selectedLeads.length===0,onClick:H[37]||(H[37]=(...X)=>j.openTagModal&&j.openTagModal(...X))},H[112]||(H[112]=[te("span",null,"Tags",-1),te("i",{class:"fa-solid fa-tags"},null,-1)]),10,bY)):yo("",!0),j.activeLeadType==="my"?(Zt(),Ut("li",{key:7,class:Ka(["total-leads",{disabled:j.selectedLeads.length===0}]),disabled:j.selectedLeads.length===0,onClick:H[38]||(H[38]=(...X)=>j.openStageModal&&j.openStageModal(...X))},H[113]||(H[113]=[te("span",null,"Stage",-1),te("i",{class:"fa-solid fa-table-cells"},null,-1)]),10,vY)):yo("",!0),j.activeLeadType==="my"?(Zt(),Ut("li",{key:8,class:Ka(["total-leads",{disabled:j.selectedLeads.length===0}]),disabled:j.selectedLeads.length===0,onClick:H[39]||(H[39]=X=>j.openModal("listingAlert"))},H[114]||(H[114]=[te("span",null,"New Listing Alert",-1),te("i",{class:"fa-solid fa-bell"},null,-1)]),10,yY)):yo("",!0),j.activeLeadType==="my"?(Zt(),Ut("li",{key:9,class:Ka(["total-leads",{disabled:j.selectedLeads.length===0}]),disabled:j.selectedLeads.length===0,onClick:H[40]||(H[40]=X=>j.openModal("neighbourhoodAlert"))},H[115]||(H[115]=[te("span",null,"Neighbourhood Alert",-1),te("i",{class:"fa-solid fa-map-location-dot"},null,-1)]),10,CY)):yo("",!0),j.activeLeadType==="my"?(Zt(),Ut("li",{key:10,class:Ka(["total-leads",{disabled:j.selectedLeads.length===0}]),disabled:j.selectedLeads.length===0,onClick:H[41]||(H[41]=X=>j.openModal("openHouseAlert"))},H[116]||(H[116]=[te("span",null,"Open House Alert",-1),te("i",{class:"fa-solid fa-circle-exclamation"},null,-1)]),10,SY)):yo("",!0),j.activeLeadType==="my"?(Zt(),Ut("li",{key:11,class:Ka(["total-leads",{disabled:j.selectedLeads.length===0}]),disabled:j.selectedLeads.length===0,onClick:H[42]||(H[42]=X=>j.openModal("actionPlan"))},H[117]||(H[117]=[te("span",null,"Action Plan",-1),te("i",{class:"fa-solid fa-plus"},null,-1)]),10,xY)):yo("",!0),j.activeLeadType==="my"?(Zt(),Ut("li",{key:12,class:Ka(["total-leads",{disabled:j.selectedLeads.length===0}]),disabled:j.selectedLeads.length===0,onClick:H[43]||(H[43]=X=>j.openModal("marketUpdates"))},H[118]||(H[118]=[te("span",null,"Market Updates",-1),te("i",{class:"fa fa-bar-chart","aria-hidden":"true"},null,-1)]),10,wY)):yo("",!0),j.activeLeadType==="my"?(Zt(),Ut("li",{key:13,class:Ka(["total-leads",{disabled:j.selectedLeads.length===0}]),disabled:j.selectedLeads.length===0,onClick:H[44]||(H[44]=X=>j.openModal("newsletter"))},H[119]||(H[119]=[te("span",null,"Real Estate Newsletter",-1),te("i",{class:"fa-solid fa-envelope-open-text"},null,-1)]),10,EY)):yo("",!0),te("li",{class:Ka(["total-leads",{disabled:j.selectedLeads.length===0}]),disabled:j.selectedLeads.length===0},H[120]||(H[120]=[te("span",null,"Lead Transfer",-1),te("i",{class:"fa-solid fa-right-left"},null,-1)]),10,kY),te("li",{class:Ka(["total-leads",{disabled:j.selectedLeads.length===0}]),onClick:H[45]||(H[45]=(...X)=>j.exportLeads&&j.exportLeads(...X)),disabled:j.selectedLeads.length===0},H[121]||(H[121]=[te("span",null,"Export Lead",-1),te("i",{class:"fa-solid fa-file-export"},null,-1)]),10,TY),te("li",{class:"total-leads",onClick:H[46]||(H[46]=(...X)=>j.openImportModal&&j.openImportModal(...X))},H[122]||(H[122]=[te("span",null,"Import",-1),te("i",{class:"fa-solid fa-file-import"},null,-1)]))])])]),j.showImportModal?(Zt(),Ut("div",_Y,[te("div",AY,[te("button",{type:"button",onClick:H[47]||(H[47]=(...X)=>j.closeImportModal&&j.closeImportModal(...X)),class:"close-button"},"X"),H[124]||(H[124]=te("h2",null,"Select Import Type",-1)),j.showFileInput?yo("",!0):(Zt(),Ut("div",OY,[te("button",{onClick:H[48]||(H[48]=(...X)=>j.importDirectFile&&j.importDirectFile(...X)),class:"import-button"},"Direct File Import"),te("button",{onClick:H[49]||(H[49]=(...X)=>j.showFileUploadField&&j.showFileUploadField(...X)),class:"import-button"},"Indirect File Import")])),j.showFileInput?(Zt(),Ut("div",DY,[te("input",{type:"file",onChange:H[50]||(H[50]=(...X)=>j.handleFileUpload&&j.handleFileUpload(...X)),accept:".csv"},null,32),te("button",{onClick:H[51]||(H[51]=(...X)=>j.submitCsvFile&&j.submitCsvFile(...X)),class:"submit-button"},"Submit CSV"),j.fileError?(Zt(),Ut("p",MY,Un(j.fileError),1)):yo("",!0)])):yo("",!0)])])):yo("",!0),j.showTagModal?(Zt(),Ut("div",RY,[te("div",NY,[te("button",{type:"button",onClick:H[52]||(H[52]=(...X)=>j.closeTagModal&&j.closeTagModal(...X)),class:"close-button"},"X"),H[125]||(H[125]=te("h3",null,"Select Tags",-1)),te("div",PY,[(Zt(!0),Ut(Vi,null,zi(j.tags,X=>(Zt(),Ut("div",{key:X.id,class:"modal_tag"},[te("input",{type:"checkbox",value:X.id,checked:j.isTagSelected(X.id),onChange:xs=>j.toggleTagSelection(X.id)},null,40,BY),wm(" "+Un(X.name),1)]))),128))]),te("button",{onClick:H[53]||(H[53]=X=>j.showAddTagInput=!j.showAddTagInput),class:"add-button"},"Add Tag"),j.showAddTagInput?(Zt(),Ut("div",LY,[Gs(te("input",{"onUpdate:modelValue":H[54]||(H[54]=X=>j.newTag=X),placeholder:"Enter new tag"},null,512),[[wl,j.newTag]]),te("button",{onClick:H[55]||(H[55]=(...X)=>j.addTag&&j.addTag(...X)),class:"submit-button"},"Add")])):yo("",!0),te("button",{onClick:H[56]||(H[56]=(...X)=>j.closeTagModal&&j.closeTagModal(...X)),class:"submit-button"},"Close")])])):yo("",!0),j.showStageModal?(Zt(),Ut("div",IY,[te("div",FY,[te("button",{type:"button",onClick:H[57]||(H[57]=(...X)=>j.closeStageModal&&j.closeStageModal(...X)),class:"close-button"},"X"),H[126]||(H[126]=te("h3",null,"Select Stage",-1)),j.showAddStageInput?(Zt(),Ut("div",$Y,[Gs(te("input",{"onUpdate:modelValue":H[58]||(H[58]=X=>j.newStage=X),placeholder:"Enter new stage",id:"m_add_stage",class:"m_add_stage"},null,512),[[wl,j.newStage]]),te("button",{onClick:H[59]||(H[59]=(...X)=>j.addStage&&j.addStage(...X)),class:"submit-button"},"Add")])):yo("",!0),te("button",{onClick:H[60]||(H[60]=X=>j.showAddStageInput=!j.showAddStageInput),class:"add-button"},"Add Stage"),Gs(te("select",{"onUpdate:modelValue":H[61]||(H[61]=X=>j.newLead.stage=X),id:"stage_id",class:"stage_class"},[(Zt(!0),Ut(Vi,null,zi(j.stages,X=>(Zt(),Ut("option",{key:X.id,value:X.id,class:"stage_values"},Un(X.name),9,HY))),128))],512),[[fg,j.newLead.stage]]),te("button",{onClick:H[62]||(H[62]=(...X)=>j.closeStageModal&&j.closeStageModal(...X)),class:"submit-button"},"Close")])])):yo("",!0),j.showModal?(Zt(),Ut("div",VY,[te("div",zY,[te("button",{type:"button",onClick:H[63]||(H[63]=(...X)=>j.closeModal&&j.closeModal(...X)),class:"close-button"},"X"),te("h2",null,Un(j.modalTitle),1),Gs(te("select",{"onUpdate:modelValue":H[64]||(H[64]=X=>j.selectedOption=X),class:"open_modal_drop-box"},[(Zt(!0),Ut(Vi,null,zi(j.modalOptions,X=>(Zt(),Ut("option",{key:X.value,value:X.value},Un(X.text),9,UY))),128))],512),[[fg,j.selectedOption]]),te("div",ZY,[te("button",{onClick:H[65]||(H[65]=(...X)=>j.submitAction&&j.submitAction(...X)),class:"submit-button"},"Submit"),te("button",{onClick:H[66]||(H[66]=(...X)=>j.closeModal&&j.closeModal(...X)),class:"cancel-button"},"Cancel")])])])):yo("",!0),te("div",null,[te("div",WY,[Gs(te("input",{"onUpdate:modelValue":H[67]||(H[67]=X=>j.searchQuery=X),type:"text",placeholder:"Search leads by name...",class:"search-bar"},null,512),[[wl,j.searchQuery]]),te("div",jY,"Total Leads: "+Un(j.filteredLeads.length),1),H[127]||(H[127]=pK('<div class="total-leads">Last 7 Days</div><div class="total-leads">Hot</div><div class="total-leads">Buyer</div><div class="total-leads">Seller</div><div class="total-leads">Closed</div>',5)),te("button",{onClick:H[68]||(H[68]=X=>j.showForm=!0),class:"create-new-button"},"+ Create New")])]),j.showForm?(Zt(),Ut("div",GY,[te("div",qY,[te("button",{type:"button",onClick:H[69]||(H[69]=X=>j.showForm=!1),id:"cancel_button"},"X"),H[135]||(H[135]=te("h2",null,"Create New Lead",-1)),te("form",{onSubmit:H[76]||(H[76]=bK((...X)=>j.submitForm&&j.submitForm(...X),["prevent"]))},[te("label",null,[H[128]||(H[128]=wm(" First Name: ")),Gs(te("input",{"onUpdate:modelValue":H[70]||(H[70]=X=>j.newLead.first_name=X),type:"text",required:""},null,512),[[wl,j.newLead.first_name]]),j.errors.first_name?(Zt(),Ut("span",KY,Un(j.errors.first_name),1)):yo("",!0)]),te("label",null,[H[129]||(H[129]=wm(" Last Name: ")),Gs(te("input",{"onUpdate:modelValue":H[71]||(H[71]=X=>j.newLead.last_name=X),type:"text",required:""},null,512),[[wl,j.newLead.last_name]]),j.errors.last_name?(Zt(),Ut("span",YY,Un(j.errors.last_name),1)):yo("",!0)]),te("label",null,[H[130]||(H[130]=wm(" Email: ")),Gs(te("input",{"onUpdate:modelValue":H[72]||(H[72]=X=>j.newLead.email=X),type:"email",required:""},null,512),[[wl,j.newLead.email]]),j.errors.email?(Zt(),Ut("span",XY,Un(j.errors.email),1)):yo("",!0)]),te("label",null,[H[131]||(H[131]=wm(" Phone: ")),Gs(te("input",{"onUpdate:modelValue":H[73]||(H[73]=X=>j.newLead.phone=X),type:"tel",required:""},null,512),[[wl,j.newLead.phone]]),j.errors.phone?(Zt(),Ut("span",JY,Un(j.errors.phone),1)):yo("",!0)]),te("label",null,[H[132]||(H[132]=wm(" Tag: ")),Gs(te("select",{"onUpdate:modelValue":H[74]||(H[74]=X=>j.newLead.tag=X),required:""},[(Zt(!0),Ut(Vi,null,zi(j.tags,X=>(Zt(),Ut("option",{key:X.id,value:X.id},Un(X.name),9,QY))),128))],512),[[fg,j.newLead.tag]]),j.errors.tag?(Zt(),Ut("span",eX,Un(j.errors.tag),1)):yo("",!0)]),te("label",null,[H[133]||(H[133]=wm(" Stage: ")),Gs(te("select",{"onUpdate:modelValue":H[75]||(H[75]=X=>j.newLead.stage=X),required:""},[(Zt(!0),Ut(Vi,null,zi(j.stages,X=>(Zt(),Ut("option",{key:X.id,value:X.id},Un(X.name),9,tX))),128))],512),[[fg,j.newLead.stage]]),j.errors.stage?(Zt(),Ut("span",nX,Un(j.errors.stage),1)):yo("",!0)]),H[134]||(H[134]=te("button",{type:"submit",id:"submit_button"},"Submit",-1))],32)])])):yo("",!0),te("div",null,[te("div",null,[H[137]||(H[137]=te("label",{for:"pageSize"},"Rows per page:",-1)),Gs(te("select",{"onUpdate:modelValue":H[77]||(H[77]=X=>j.pageSize=X),onChange:H[78]||(H[78]=X=>j.setPageSize(Number(X.target.value)))},H[136]||(H[136]=[te("option",{value:"5"},"5",-1),te("option",{value:"10"},"10",-1),te("option",{value:"25"},"25",-1),te("option",{value:"50"},"50",-1)]),544),[[fg,j.pageSize]])]),!j.loading&&!j.error?(Zt(),Ut("div",oX,[j.filteredLeads.length?(Zt(),Ut("table",sX,[te("thead",null,[te("tr",null,[te("th",null,[te("label",rX,[te("input",{type:"checkbox",onChange:H[79]||(H[79]=(...X)=>j.toggleSelectAll&&j.toggleSelectAll(...X)),class:"custom-checkbox"},null,32),H[138]||(H[138]=te("span",{class:"custom-checkbox-span"},null,-1))])]),H[139]||(H[139]=te("th",null,"First Name",-1)),H[140]||(H[140]=te("th",null,"Last Name",-1)),H[141]||(H[141]=te("th",null,"Phone",-1)),H[142]||(H[142]=te("th",null,"Email",-1)),H[143]||(H[143]=te("th",null,"Activity",-1)),H[144]||(H[144]=te("th",null,"Created",-1)),H[145]||(H[145]=te("th",null,"Tag",-1)),H[146]||(H[146]=te("th",null,"Stage",-1)),H[147]||(H[147]=te("th",null,"Source",-1))])]),te("tbody",null,[(Zt(!0),Ut(Vi,null,zi(j.paginatedLeads,X=>(Zt(),Ut("tr",{key:X.id},[te("td",null,[te("label",aX,[Gs(te("input",{type:"checkbox",value:X.id,"onUpdate:modelValue":H[80]||(H[80]=xs=>j.selectedLeads=xs),class:"custom-checkbox"},null,8,cX),[[Qq,j.selectedLeads]]),H[148]||(H[148]=te("span",{class:"custom-checkbox-span"},null,-1))])]),te("td",null,[Yq(on,{to:{name:"update-profile",params:{id:X.id}},style:{color:"blue","text-decoration":"underline"}},{default:vK(()=>[wm(Un(X.first_name),1)]),_:2},1032,["to"])]),te("td",null,Un(X.last_name),1),te("td",null,Un(X.phone),1),te("td",null,Un(X.email),1),te("td",null,Un(X.activity||"N/A"),1),te("td",null,Un(new Date(X.created_at).toLocaleDateString()),1),te("td",null,Un(X.tag||"N/A"),1),te("td",null,Un(X.stage||"N/A"),1),te("td",null,Un(X.source||"N/A"),1)]))),128))])])):yo("",!0)])):yo("",!0),j.filteredLeads.length===0?(Zt(),Ut("div",iX,"No leads available.")):yo("",!0)]),j.toast.message?(Zt(),Ut("div",{key:5,class:Ka(`toast ${j.toast.type}`)},[wm(Un(j.toast.message)+" ",1),te("button",{onClick:H[81]||(H[81]=X=>j.toast.message=""),class:"toast-close-button"},"X")],2)):yo("",!0),te("div",null,[te("button",{onClick:H[82]||(H[82]=X=>j.changePage(j.currentPage-1)),disabled:j.currentPage===1},"Previous",8,lX),te("span",null,"Page "+Un(j.currentPage)+" of "+Un(j.totalPages),1),te("button",{onClick:H[83]||(H[83]=X=>j.changePage(j.currentPage+1)),disabled:j.currentPage===j.totalPages},"Next",8,uX)])])}const bX=gK(CK,[["render",dX]]);export{bX as default};
