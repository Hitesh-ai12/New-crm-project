/* empty css              */import{a as bi}from"./axios-CdtiCRuU.js";import{S as Ha}from"./sweetalert2.all-DyJFIm0t.js";import{g as lJ,a as cJ,c as aQ}from"./_commonjsHelpers-BosuxZz1.js";import{bn as iQ,bo as lQ,bp as cQ,bq as uQ,br as dQ,bs as fQ,bt as mQ,F as ni,bu as gQ,bv as hQ,bw as pQ,bx as vQ,bh as uJ,by as bQ,bz as yQ,aY as CQ,bA as SQ,bB as xQ,bC as wQ,bD as EQ,bE as TQ,bF as AQ,bG as OQ,aO as kQ,bH as DQ,bI as MQ,b as SB,bJ as RQ,f as OK,X as jo,l as vn,j as pe,bK as PQ,bL as NQ,bM as IQ,bN as BQ,bO as LQ,bP as dJ,P as pl,h as fJ,c as FQ,bQ as _Q,Q as $Q,bR as HQ,bS as VQ,bT as zQ,bU as UQ,bV as ZQ,bW as WQ,bX as jQ,bY as GQ,bZ as KQ,b_ as YQ,bc as XQ,b$ as JQ,c0 as QQ,c1 as qQ,c2 as eq,c3 as tq,W as nq,c4 as oq,c5 as sq,c6 as rq,c7 as aq,c8 as iq,c9 as lq,ca as cq,cb as uq,cc as dq,aM as fq,cd as mq,ce as gq,cf as hq,cg as pq,i as vq,ch as bq,ci as yq,cj as Cq,ck as Sq,cl as xq,cm as wq,N as Eq,au as ZA,n as Ur,cn as Tq,co as Aq,cp as Oq,cq as kq,S as Dq,aH as Mq,cr as Rq,cs as Pq,R as mJ,ct as Nq,cu as Iq,ar as Bq,cv as Lq,cw as Fq,cx as _q,cy as $q,o as mn,cz as Hq,aL as Vq,cA as zq,cB as Uq,cC as Zq,bf as Wq,a as jq,r as _n,cD as Gq,cE as Kq,Y as Hi,m as Yq,e as kK,am as Xq,p as Jq,cF as Qq,cG as qq,cH as eee,cI as tee,cJ as nee,cK as oee,cL as see,s as ree,cM as aee,cN as iee,cO as lee,k as as,cP as cee,cQ as uee,aZ as dee,t as fee,aX as mee,cR as gee,cS as hee,cT as pee,u as vee,cU as bee,cV as yee,cW as Cee,cX as See,cY as xee,cZ as wee,c_ as Eee,c$ as Tee,d0 as Aee,d1 as Oee,d2 as kee,d3 as DK,d4 as Dee,d5 as gJ,Z as r1,d6 as id,M as Mee,d7 as Ree,d8 as Pee,w as WA,aq as Nee,d9 as Iee,da as Bee,db as Lee,g as MK,dc as Fee,L as ra,dd as _ee,de as $ee,aG as hJ,df as Hee,_ as Vee}from"./main-FuKp66C3.js";/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const zee=()=>{},Uee=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:iQ,BaseTransitionPropsValidators:lQ,Comment:cQ,DeprecationTypes:uQ,EffectScope:dQ,ErrorCodes:fQ,ErrorTypeStrings:mQ,Fragment:ni,KeepAlive:gQ,ReactiveEffect:hQ,Static:pQ,Suspense:vQ,Teleport:uJ,Text:bQ,TrackOpTypes:yQ,Transition:CQ,TransitionGroup:SQ,TriggerOpTypes:xQ,VueElement:wQ,assertNumber:EQ,callWithAsyncErrorHandling:TQ,callWithErrorHandling:AQ,camelize:OQ,capitalize:kQ,cloneVNode:DQ,compatUtils:MQ,compile:zee,computed:SB,createApp:RQ,createBlock:OK,createCommentVNode:jo,createElementBlock:vn,createElementVNode:pe,createHydrationRenderer:PQ,createPropsRestProxy:NQ,createRenderer:IQ,createSSRApp:BQ,createSlots:LQ,createStaticVNode:dJ,createTextVNode:pl,createVNode:fJ,customRef:FQ,defineAsyncComponent:_Q,defineComponent:$Q,defineCustomElement:HQ,defineEmits:VQ,defineExpose:zQ,defineModel:UQ,defineOptions:ZQ,defineProps:WQ,defineSSRCustomElement:jQ,defineSlots:GQ,devtools:KQ,effect:YQ,effectScope:XQ,getCurrentInstance:JQ,getCurrentScope:QQ,getCurrentWatcher:qQ,getTransitionRawChildren:eq,guardReactiveProps:tq,h:nq,handleError:oq,hasInjectionContext:sq,hydrate:rq,hydrateOnIdle:aq,hydrateOnInteraction:iq,hydrateOnMediaQuery:lq,hydrateOnVisible:cq,initCustomFormatter:uq,initDirectivesForSSR:dq,inject:fq,isMemoSame:mq,isProxy:gq,isReactive:hq,isReadonly:pq,isRef:vq,isRuntimeOnly:bq,isShallow:yq,isVNode:Cq,markRaw:Sq,mergeDefaults:xq,mergeModels:wq,mergeProps:Eq,nextTick:ZA,normalizeClass:Ur,normalizeProps:Tq,normalizeStyle:Aq,onActivated:Oq,onBeforeMount:kq,onBeforeUnmount:Dq,onBeforeUpdate:Mq,onDeactivated:Rq,onErrorCaptured:Pq,onMounted:mJ,onRenderTracked:Nq,onRenderTriggered:Iq,onScopeDispose:Bq,onServerPrefetch:Lq,onUnmounted:Fq,onUpdated:_q,onWatcherCleanup:$q,openBlock:mn,popScopeId:Hq,provide:Vq,proxyRefs:zq,pushScopeId:Uq,queuePostFlushCb:Zq,reactive:Wq,readonly:jq,ref:_n,registerRuntimeCompiler:Gq,render:Kq,renderList:Hi,renderSlot:Yq,resolveComponent:kK,resolveDirective:Xq,resolveDynamicComponent:Jq,resolveFilter:Qq,resolveTransitionHooks:qq,setBlockTracking:eee,setDevtoolsHook:tee,setTransitionHooks:nee,shallowReactive:oee,shallowReadonly:see,shallowRef:ree,ssrContextKey:aee,ssrUtils:iee,stop:lee,toDisplayString:as,toHandlerKey:cee,toHandlers:uee,toRaw:dee,toRef:fee,toRefs:mee,toValue:gee,transformVNodeArgs:hee,triggerRef:pee,unref:vee,useAttrs:bee,useCssModule:yee,useCssVars:Cee,useHost:See,useId:xee,useModel:wee,useSSRContext:Eee,useShadowRoot:Tee,useSlots:Aee,useTemplateRef:Oee,useTransitionState:kee,vModelCheckbox:DK,vModelDynamic:Dee,vModelRadio:gJ,vModelSelect:r1,vModelText:id,vShow:Mee,version:Ree,warn:Pee,watch:WA,watchEffect:Nee,watchPostEffect:Iee,watchSyncEffect:Bee,withAsyncContext:Lee,withCtx:MK,withDefaults:Fee,withDirectives:ra,withKeys:_ee,withMemo:$ee,withModifiers:hJ,withScopeId:Hee},Symbol.toStringTag,{value:"Module"}));var pJ={exports:{}};(function(U){(function(){var w=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},F=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},T=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},P=function(e,n){return j(function(o,r){return e.eq(n(o),n(r))})},j=function(e){return{eq:e}},S=j(function(e,n){return e===n}),B=S,k=function(e){return j(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,i=0;i<r;i++)if(!e.eq(n[i],o[i]))return!1;return!0})},z=function(e,n){return P(k(e),function(o){return T(o,n)})},K=function(e){return j(function(n,o){var r=Object.keys(n),i=Object.keys(o);if(!z(B).eq(r,i))return!1;for(var c=r.length,d=0;d<c;d++){var g=r[d];if(!e.eq(n[g],o[g]))return!1}return!0})},J=j(function(e,n){if(e===n)return!0;var o=w(e),r=w(n);return o!==r?!1:F(o)?e===n:o==="array"?k(J).eq(e,n):o==="object"?K(J).eq(e,n):!1});const re=Object.getPrototypeOf,ce=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},fe=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&ce(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},me=e=>n=>fe(n)===e,Ce=e=>n=>typeof n===e,_e=e=>n=>e===n,he=(e,n)=>Te(e)&&ce(e,n,(o,r)=>re(o)===r),q=me("string"),Te=me("object"),bt=e=>he(e,Object),Ge=me("array"),te=_e(null),lt=Ce("boolean"),Je=_e(void 0),gt=e=>e==null,ye=e=>!gt(e),Et=Ce("function"),xt=Ce("number"),at=(e,n)=>{if(Ge(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},qe=()=>{},x=(e,n)=>(...o)=>e(n.apply(null,o)),gn=(e,n)=>o=>e(n(o)),Ye=e=>()=>e,Qn=e=>e,ys=(e,n)=>e===n;function ut(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const Kt=e=>n=>!e(n),fo=e=>()=>{throw new Error(e)},Ao=e=>e(),go=e=>{e()},Le=Ye(!1),tt=Ye(!0);class N{constructor(n,o){this.tag=n,this.value=o}static some(n){return new N(!0,n)}static none(){return N.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?N.some(n(this.value)):N.none()}bind(n){return this.tag?n(this.value):N.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:N.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return ye(n)?N.some(n):N.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}N.singletonNone=new N(!1);const Ps=Array.prototype.slice,qn=Array.prototype.indexOf,is=Array.prototype.push,Fo=(e,n)=>qn.call(e,n),Bs=(e,n)=>{const o=Fo(e,n);return o===-1?N.none():N.some(o)},Ft=(e,n)=>Fo(e,n)>-1,Cn=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return!0}return!1},Yt=(e,n)=>{const o=e.length,r=new Array(o);for(let i=0;i<o;i++){const c=e[i];r[i]=n(c,i)}return r},ke=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];n(i,o)}},Wr=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},Rr=(e,n)=>{const o=[],r=[];for(let i=0,c=e.length;i<c;i++){const d=e[i];(n(d,i)?o:r).push(d)}return{pass:o,fail:r}},Nt=(e,n)=>{const o=[];for(let r=0,i=e.length;r<i;r++){const c=e[r];n(c,r)&&o.push(c)}return o},Qs=(e,n,o)=>(Wr(e,(r,i)=>{o=n(o,r,i)}),o),ts=(e,n,o)=>(ke(e,(r,i)=>{o=n(o,r,i)}),o),yi=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++){const c=e[r];if(n(c,r))return N.some(c);if(o(c,r))break}return N.none()},Oo=(e,n)=>yi(e,n,Le),Ns=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return N.some(o)}return N.none()},jr=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!Ge(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);is.apply(n,e[o])}return n},Cs=(e,n)=>jr(Yt(e,n)),Tn=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const i=e[o];if(n(i,o)!==!0)return!1}return!0},Me=e=>{const n=Ps.call(e,0);return n.reverse(),n},$e=(e,n)=>Nt(e,o=>!Ft(n,o)),ze=(e,n)=>{const o={};for(let r=0,i=e.length;r<i;r++){const c=e[r];o[String(c)]=n(c,r)}return o},ot=(e,n)=>{const o=Ps.call(e,0);return o.sort(n),o},tn=(e,n)=>n>=0&&n<e.length?N.some(e[n]):N.none(),an=e=>tn(e,0),An=e=>tn(e,e.length-1),Hn=Et(Array.from)?Array.from:e=>Ps.call(e),xo=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return N.none()},Dn=(e,n)=>{const o=[],r=Et(n)?i=>Cn(o,c=>n(c,i)):i=>Ft(o,i);for(let i=0,c=e.length;i<c;i++){const d=e[i];r(d)||o.push(d)}return o},Xt=Object.keys,nn=Object.hasOwnProperty,Be=(e,n)=>{const o=Xt(e);for(let r=0,i=o.length;r<i;r++){const c=o[r],d=e[c];n(d,c)}},_t=(e,n)=>Lo(e,(o,r)=>({k:r,v:n(o,r)})),Lo=(e,n)=>{const o={};return Be(e,(r,i)=>{const c=n(r,i);o[c.k]=c.v}),o},zi=e=>(n,o)=>{e[o]=n},Pr=(e,n,o,r)=>{Be(e,(i,c)=>{(n(i,c)?o:r)(i,c)})},Dt=(e,n)=>{const o={},r={};return Pr(e,n,zi(o),zi(r)),{t:o,f:r}},Ci=(e,n)=>{const o={};return Pr(e,n,zi(o),qe),o},gu=(e,n)=>{const o=[];return Be(e,(r,i)=>{o.push(n(r,i))}),o},cd=e=>gu(e,Qn),_o=(e,n)=>sn(e,n)?N.from(e[n]):N.none(),sn=(e,n)=>nn.call(e,n),Zc=(e,n)=>sn(e,n)&&e[n]!==void 0&&e[n]!==null,ud=(e,n,o=J)=>K(o).eq(e,n),Nr={generate:e=>{if(!Ge(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return ke(e,(r,i)=>{const c=Xt(r);if(c.length!==1)throw new Error("one and only one name per case");const d=c[0],g=r[d];if(o[d]!==void 0)throw new Error("duplicate key detected:"+d);if(d==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ge(g))throw new Error("case arguments must be an array");n.push(d),o[d]=(...h)=>{const y=h.length;if(y!==g.length)throw new Error("Wrong number of arguments to case "+d+". Expected "+g.length+" ("+g+"), got "+y);return{fold:(...M)=>{if(M.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+M.length);return M[i].apply(null,h)},match:M=>{const R=Xt(M);if(n.length!==R.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+R.join(","));if(!Tn(n,Z=>Ft(R,Z)))throw new Error("Not all branches were specified when using match. Specified: "+R.join(", ")+`
Required: `+n.join(", "));return M[d].apply(null,h)},log:M=>{console.log(M,{constructors:n,constructor:d,params:h})}}}}),o}},cs=e=>{let n=e;return{get:()=>n,set:i=>{n=i}}},hu=e=>{const n=c=>c(e),o=Ye(e),r=()=>i,i={tag:!0,inner:e,fold:(c,d)=>d(e),isValue:tt,isError:Le,map:c=>dr.value(c(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:c=>{c(e)},toOptional:()=>N.some(e)};return i},xn=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,i)=>r(e),isValue:Le,isError:tt,map:n,mapError:r=>dr.error(r(e)),bind:n,exists:Le,forall:tt,getOr:Qn,or:Qn,getOrThunk:Ao,orThunk:Ao,getOrDie:fo(String(e)),each:qe,toOptional:N.none};return o},dr={value:hu,error:xn,fromOption:(e,n)=>e.fold(()=>xn(n),hu)},dd=typeof window<"u"?window:Function("return this;")(),eh=(e,n,o)=>Math.min(Math.max(e,n),o),th=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Ua=0;const xa=e=>{const o=new Date().getTime(),r=Math.floor(th()*1e9);return Ua++,e+"_"+r+Ua+String(o)},fd=(e,n)=>n,bl=(e,n)=>bt(e)&&bt(n)?qs(e,n):n,Ui=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const i=n[r];for(const c in i)sn(i,c)&&(o[c]=e(o[c],i[c]))}return o},qs=Ui(bl),pu=Ui(fd),Zi=(e,n,o=ys)=>e.exists(r=>o(r,n)),yt=(e,n,o=ys)=>Zs(e,n,o).getOr(e.isNone()&&n.isNone()),cm=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Zs=(e,n,o)=>e.isSome()&&n.isSome()?N.some(o(e.getOrDie(),n.getOrDie())):N.none(),um=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?N.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):N.none(),ho=(e,n)=>e?N.some(n):N.none(),lf=(e,n)=>{let o=n??dd;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},wa=(e,n)=>{const o=e.split(".");return lf(o,n)};Nr.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const dm=e=>{const n=[],o=[];return ke(e,r=>{r.fold(i=>{n.push(i)},i=>{o.push(i)})}),{errors:n,values:o}},yl=e=>{const n=cs(N.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(N.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:g=>{o(),n.set(N.some(g))}}},fm=e=>{const n=cs(N.none()),o=()=>n.get().each(g=>clearInterval(g));return{clear:()=>{o(),n.set(N.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:g=>{o(),n.set(N.some(setInterval(g,e)))}}},Gr=()=>{const e=yl(qe);return{...e,on:o=>e.get().each(o)}},cf=(e,n)=>e.substring(n),vu=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Kr=(e,n)=>gs(e,n)?cf(e,n.length):e,Ws=(e,n,o=0,r)=>{const i=e.indexOf(n,o);return i!==-1?Je(r)?!0:i+n.length<=r:!1},gs=(e,n)=>vu(e,n,0),bu=(e,n)=>vu(e,n,e.length-n.length),Wc=e=>n=>n.replace(e,""),Wi=Wc(/^\s+|\s+$/g),nh=Wc(/^\s+/g),ns=Wc(/\s+$/g),Gn=e=>e.length>0,ji=e=>!Gn(e),Za=(e,n)=>n<=0?"":new Array(n+1).join(e),oi=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?N.none():N.some(o)},Yr=(e,n)=>{let o=null;return{cancel:()=>{te(o)||(clearTimeout(o),o=null)},throttle:(...c)=>{te(o)&&(o=setTimeout(()=>{o=null,e.apply(null,c)},n))}}},jc=(e,n)=>{let o=null;const r=()=>{te(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...c)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,c)},n)}}},zo=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},Ir="\uFEFF",Uo=" ",Br=e=>e===Ir,md=e=>e.replace(/\uFEFF/g,""),Gi=e=>{const n={};return ke(e,o=>{n[o]={}}),Xt(n)},Ki=e=>e.length!==void 0,oc=Array.isArray,uf=e=>{if(oc(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},Wa=(e,n,o)=>{if(!e)return!1;if(o=o||e,Ki(e)){for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(sn(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},sc=(e,n)=>{const o=[];return Wa(e,(r,i)=>{o.push(n(r,i,e))}),o},we=(e,n)=>{const o=[];return Wa(e,(r,i)=>{(!n||n(r,i,e))&&o.push(r)}),o},Mt=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},ko=(e,n,o,r)=>{let i=Je(o)?e[0]:o;for(let c=0;c<e.length;c++)i=n.call(r,i,e[c],c);return i},Go=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e))return r;return-1},Mo=e=>e[e.length-1],Ls=(e,n,o,r)=>{const i=e.isiOS()&&/ipad/i.test(o)===!0,c=e.isiOS()&&!i,d=e.isiOS()||e.isAndroid(),g=d||r("(pointer:coarse)"),h=i||!c&&d&&r("(min-device-width:768px)"),y=c||d&&!h,A=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,M=!y&&!h&&!A;return{isiPad:Ye(i),isiPhone:Ye(c),isTablet:Ye(h),isPhone:Ye(y),isTouch:Ye(g),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Ye(A),isDesktop:Ye(M)}},Lr=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},j0=(e,n)=>{const o=Lr(e,n);if(!o)return{major:0,minor:0};const r=i=>Number(n.replace(o,"$"+i));return gm(r(1),r(2))},ht=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?mm():j0(e,o)},mm=()=>gm(0,0),gm=(e,n)=>({major:e,minor:n}),$={nu:gm,detect:ht,unknown:mm},ee=(e,n)=>xo(n.brands,o=>{const r=o.brand.toLowerCase();return Oo(e,i=>{var c;return r===((c=i.brand)===null||c===void 0?void 0:c.toLowerCase())}).map(i=>({current:i.name,version:$.nu(parseInt(o.version,10),0)}))}),de=(e,n)=>{const o=String(n).toLowerCase();return Oo(e,r=>r.search(o))},Ve=(e,n)=>de(e,n).map(o=>{const r=$.detect(o.versionRegexes,n);return{current:o.name,version:r}}),dt=(e,n)=>de(e,n).map(o=>{const r=$.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Ot=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,In=e=>n=>Ws(n,e),Ss=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Ws(e,"edge/")&&Ws(e,"chrome")&&Ws(e,"safari")&&Ws(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ot],search:e=>Ws(e,"chrome")&&!Ws(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Ws(e,"msie")||Ws(e,"trident")},{name:"Opera",versionRegexes:[Ot,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:In("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:In("firefox")},{name:"Safari",versionRegexes:[Ot,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Ws(e,"safari")||Ws(e,"mobile/"))&&Ws(e,"applewebkit")}],po=[{name:"Windows",search:In("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Ws(e,"iphone")||Ws(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:In("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:In("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:In("linux"),versionRegexes:[]},{name:"Solaris",search:In("sunos"),versionRegexes:[]},{name:"FreeBSD",search:In("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:In("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],xs={browsers:Ye(Ss),oses:Ye(po)},hs="Edge",Cl="Chromium",Sl="IE",df="Opera",G0="Firefox",gd="Safari",K0=()=>oh({current:void 0,version:$.unknown()}),oh=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isEdge:r(hs),isChromium:r(Cl),isIE:r(Sl),isOpera:r(df),isFirefox:r(G0),isSafari:r(gd)}},c1={unknown:K0,nu:oh,edge:Ye(hs),chromium:Ye(Cl),ie:Ye(Sl),opera:Ye(df),firefox:Ye(G0),safari:Ye(gd)},vo="Windows",hm="iOS",ff="Android",Y0="Linux",u1="macOS",X0="Solaris",d1="FreeBSD",sh="ChromeOS",pm=()=>mf({current:void 0,version:$.unknown()}),mf=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isWindows:r(vo),isiOS:r(hm),isAndroid:r(ff),isMacOS:r(u1),isLinux:r(Y0),isSolaris:r(X0),isFreeBSD:r(d1),isChromeOS:r(sh)}},rh={unknown:pm,nu:mf,windows:Ye(vo),ios:Ye(hm),android:Ye(ff),linux:Ye(Y0),macos:Ye(u1),solaris:Ye(X0),freebsd:Ye(d1),chromeos:Ye(sh)},_S={detect:(e,n,o)=>{const r=xs.browsers(),i=xs.oses(),c=n.bind(h=>ee(r,h)).orThunk(()=>Ve(r,e)).fold(c1.unknown,c1.nu),d=dt(i,e).fold(rh.unknown,rh.nu),g=Ls(d,c,e,o);return{browser:c,os:d,deviceType:g}}},yu=e=>window.matchMedia(e).matches;let rc=zo(()=>_S.detect(window.navigator.userAgent,N.from(window.navigator.userAgentData),yu));const ca=()=>rc(),vm=(e,n)=>wa(e,n),J0=(e,n)=>{const o=vm(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},f1=Object.getPrototypeOf,Q0=e=>J0("HTMLElement",e),Cu=e=>{const n=wa("ownerDocument.defaultView",e);return Te(e)&&(Q0(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(f1(e).constructor.name))},m1=window.navigator.userAgent,ah=ca(),Yi=ah.browser,ac=ah.os,Su=ah.deviceType,q0=m1.indexOf("Windows Phone")!==-1,eo={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Yi.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Yi.isIE(),windowsPhone:q0,browser:{current:Yi.current,version:Yi.version,isChromium:Yi.isChromium,isEdge:Yi.isEdge,isFirefox:Yi.isFirefox,isIE:Yi.isIE,isOpera:Yi.isOpera,isSafari:Yi.isSafari},os:{current:ac.current,version:ac.version,isAndroid:ac.isAndroid,isChromeOS:ac.isChromeOS,isFreeBSD:ac.isFreeBSD,isiOS:ac.isiOS,isLinux:ac.isLinux,isMacOS:ac.isMacOS,isSolaris:ac.isSolaris,isWindows:ac.isWindows},deviceType:{isDesktop:Su.isDesktop,isiPad:Su.isiPad,isiPhone:Su.isiPhone,isPhone:Su.isPhone,isTablet:Su.isTablet,isTouch:Su.isTouch,isWebView:Su.isWebView}},eb=/^\s*|\s*$/g,g1=e=>gt(e)?"":(""+e).replace(eb,""),tb=(e,n)=>n?n==="array"&&oc(e)?!0:typeof e===n:e!==void 0,nb=(e,n,o={})=>{const r=q(e)?e.split(n||","):e||[];let i=r.length;for(;i--;)o[r[i]]={};return o},ob=sn,sb=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const i in r)if(sn(r,i)){const c=r[i];c!==void 0&&(e[i]=c)}}return e},h1=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),Wa(e,(i,c)=>n.call(r,i,c,o)===!1?!1:(h1(i,n,o,r),!0)))},ct={trim:g1,isArray:oc,is:tb,toArray:uf,makeMap:nb,each:Wa,map:sc,grep:we,inArray:Mt,hasOwn:ob,extend:sb,walk:h1,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,i=o.length;r<i&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>Ge(e)?e:e===""?[]:sc(e.split(n||","),g1),_addCacheSuffix:e=>{const n=eo.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},HS=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const i="HTML does not have a single root node";throw console.error(i,e),new Error(i)}return ja(r.childNodes[0])},VS=(e,n)=>{const r=(n||document).createElement(e);return ja(r)},zS=(e,n)=>{const r=(n||document).createTextNode(e);return ja(r)},ja=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ne={fromHtml:HS,fromTag:VS,fromText:zS,fromDom:ja,fromPoint:(e,n,o)=>N.from(e.dom.elementFromPoint(n,o)).map(ja)},ZS=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},ih=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},ab=(e,n,o)=>{const r=e.document.createRange();return ZS(r,n),ih(r,o),r},xl=(e,n,o,r,i)=>{const c=e.document.createRange();return c.setStart(n.dom,o),c.setEnd(r.dom,i),c},bm=Nr.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ym=(e,n,o)=>n(ne.fromDom(o.startContainer),o.startOffset,ne.fromDom(o.endContainer),o.endOffset),ib=(e,n)=>n.match({domRange:o=>({ltr:Ye(o),rtl:N.none}),relative:(o,r)=>({ltr:zo(()=>ab(e,o,r)),rtl:zo(()=>N.some(ab(e,r,o)))}),exact:(o,r,i,c)=>({ltr:zo(()=>xl(e,o,r,i,c)),rtl:zo(()=>N.some(xl(e,i,c,o,r)))})}),si=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(i=>i.collapsed===!1).map(i=>bm.rtl(ne.fromDom(i.endContainer),i.endOffset,ne.fromDom(i.startContainer),i.startOffset)).getOrThunk(()=>ym(e,bm.ltr,o)):ym(e,bm.ltr,o)},hd=(e,n)=>{const o=ib(e,n);return si(e,o)};bm.ltr,bm.rtl;const lh=8,ch=9,uh=11,ua=1,pd=3,Si=(e,n)=>{const o=e.dom;if(o.nodeType!==ua)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},wl=e=>e.nodeType!==ua&&e.nodeType!==ch&&e.nodeType!==uh||e.childElementCount===0,Ea=(e,n)=>{const o=n===void 0?document:n.dom;return wl(o)?[]:Yt(o.querySelectorAll(e),ne.fromDom)},gf=(e,n)=>{const o=n===void 0?document:n.dom;return wl(o)?N.none():N.from(o.querySelector(e)).map(ne.fromDom)},zn=(e,n)=>e.dom===n.dom,El=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},dh=(e,n)=>{const o=[],r=c=>(o.push(c),n(c));let i=n(e);do i=i.bind(r);while(i.isSome());return o},so=e=>e.dom.nodeName.toLowerCase(),da=e=>e.dom.nodeType,ic=e=>n=>da(n)===e,hf=e=>da(e)===lh||so(e)==="#comment",xu=e=>Ga(e)&&Cu(e.dom),Ga=ic(ua),Ta=ic(pd),WS=ic(ch),Cm=ic(uh),fr=e=>n=>Ga(n)&&so(n)===e,vd=e=>ne.fromDom(e.dom.ownerDocument),wu=e=>WS(e)?e:vd(e),fh=e=>ne.fromDom(wu(e).dom.documentElement),Eu=e=>ne.fromDom(wu(e).dom.defaultView),lc=e=>N.from(e.dom.parentNode).map(ne.fromDom),Sm=e=>N.from(e.dom.parentElement).map(ne.fromDom),lb=(e,n)=>{const o=Et(n)?n:Le;let r=e.dom;const i=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const c=r.parentNode,d=ne.fromDom(c);if(i.push(d),o(d)===!0)break;r=c}return i},p1=e=>{const n=o=>Nt(o,r=>!zn(e,r));return lc(e).map(Fr).map(n).getOr([])},Tu=e=>N.from(e.dom.previousSibling).map(ne.fromDom),Au=e=>N.from(e.dom.nextSibling).map(ne.fromDom),v1=e=>Me(dh(e,Tu)),cb=e=>dh(e,Au),Fr=e=>Yt(e.dom.childNodes,ne.fromDom),Ou=(e,n)=>{const o=e.dom.childNodes;return N.from(o[n]).map(ne.fromDom)},xr=e=>Ou(e,0),xm=e=>Ou(e,e.dom.childNodes.length-1),mh=e=>e.dom.childNodes.length,gh=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return ne.fromDom(n)},Fs=e=>Cm(e)&&ye(e.dom.host),Tl=e=>ne.fromDom(e.dom.getRootNode()),ku=e=>Fs(e)?e:gh(wu(e)),cc=e=>Fs(e)?e:ne.fromDom(wu(e).dom.body),Xr=e=>{const n=Tl(e);return Fs(n)?N.some(n):N.none()},wm=e=>ne.fromDom(e.dom.host),ub=e=>{if(ye(e.target)){const n=ne.fromDom(e.target);if(Ga(n)&&jS(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return an(o)}}return N.from(e.target)},jS=e=>ye(e.dom.shadowRoot),ri=(e,n,o,r,i,c,d)=>({target:e,x:n,y:o,stop:r,prevent:i,kill:c,raw:d}),GS=e=>{const n=ne.fromDom(ub(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),i=x(r,o);return ri(n,e.clientX,e.clientY,o,r,i,e)},hh=(e,n)=>o=>{e(o)&&n(GS(o))},db=(e,n,o,r,i)=>{const c=hh(o,r);return e.dom.addEventListener(n,c,i),{unbind:ut(fb,e,n,c,i)}},cn=(e,n,o,r)=>db(e,n,o,r,!1),fb=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},er=tt,tr=(e,n,o)=>cn(e,n,er,o),b1=()=>ne.fromDom(document),us=(e,n=!1)=>e.dom.focus({preventScroll:n}),mb=e=>{const n=Tl(e).dom;return e.dom===n.activeElement},Em=(e=b1())=>N.from(e.dom.activeElement).map(ne.fromDom),uc=e=>Em(Tl(e)).filter(n=>e.dom.contains(n.dom)),Aa=(e,n)=>{lc(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Gc=(e,n)=>{Au(e).fold(()=>{lc(e).each(i=>{_s(i,n)})},r=>{Aa(r,n)})},Tm=(e,n)=>{xr(e).fold(()=>{_s(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},_s=(e,n)=>{e.dom.appendChild(n.dom)},ph=(e,n)=>{Aa(e,n),_s(n,e)},pf=(e,n)=>{ke(n,(o,r)=>{const i=r===0?e:n[r-1];Gc(i,o)})},Du=(e,n)=>{ke(n,o=>{_s(e,o)})},y1=(e,n,o)=>{if(q(o)||lt(o)||xt(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},mr=(e,n,o)=>{y1(e.dom,n,o)},xi=(e,n)=>{const o=e.dom;Be(n,(r,i)=>{y1(o,i,r)})},Ds=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Oa=(e,n)=>N.from(Ds(e,n)),vf=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},nr=(e,n)=>{e.dom.removeAttribute(n)},gb=e=>{const n=e.dom.attributes;return n==null||n.length===0},hn=e=>ts(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Xi=e=>{e.dom.textContent="",ke(Fr(e),n=>{b(n)})},b=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},O=e=>{const n=Fr(e);n.length>0&&pf(e,n),b(e)},L=(e,n)=>ne.fromDom(e.dom.cloneNode(n)),Y=e=>L(e,!1),ae=e=>L(e,!0),Xe=(e,n)=>{const o=ne.fromTag(n),r=hn(e);return xi(o,r),o},ft=(e,n)=>{const o=Xe(e,n);Gc(e,o);const r=Fr(e);return Du(o,r),b(e),o},wn=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Fr(ne.fromDom(r))},Sn=e=>Yt(e,ne.fromDom),Jt=e=>e.dom.innerHTML,Vn=(e,n)=>{const r=vd(e).dom,i=ne.fromDom(r.createDocumentFragment()),c=wn(n,r);Du(i,c),Xi(e),_s(e,i)},os=e=>{const n=ne.fromTag("div"),o=ne.fromDom(e.dom.cloneNode(!0));return _s(n,o),Jt(n)},Ji=e=>e.style!==void 0&&Et(e.style.getPropertyValue),Jr=e=>{const n=Ta(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Xr(ne.fromDom(n)).fold(()=>o.body.contains(n),gn(Jr,wm))},KS=(e,n,o)=>{if(!q(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Ji(e)&&e.style.setProperty(n,o)},hb=(e,n)=>{Ji(e)&&e.style.removeProperty(n)},sO=(e,n,o)=>{const r=e.dom;KS(r,n,o)},pb=(e,n)=>{const o=e.dom;Be(n,(r,i)=>{KS(o,i,r)})},or=(e,n)=>{const o=e.dom,i=window.getComputedStyle(o).getPropertyValue(n);return i===""&&!Jr(e)?vh(o,n):i},vh=(e,n)=>Ji(e)?e.style.getPropertyValue(n):"",vb=(e,n)=>{const o=e.dom,r=vh(o,n);return N.from(r).filter(i=>i.length>0)},YS=e=>{const n={},o=e.dom;if(Ji(o))for(let r=0;r<o.style.length;r++){const i=o.style.item(r);n[i]=o.style[i]}return n},XS=(e,n)=>{const o=e.dom;hb(o,n),Zi(Oa(e,"style").map(Wi),"")&&nr(e,"style")},ws=e=>e.dom.offsetWidth,bb=((e,n)=>{const o=(g,h)=>{if(!xt(h)&&!h.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+h);const y=g.dom;Ji(y)&&(y.style[e]=h+"px")},r=g=>{const h=n(g);if(h<=0||h===null){const y=or(g,e);return parseFloat(y)||0}return h},i=r,c=(g,h)=>ts(h,(y,A)=>{const M=or(g,A),R=M===void 0?0:parseInt(M,10);return isNaN(R)?y:y+R},0);return{set:o,get:r,getOuter:i,aggregate:c,max:(g,h,y)=>{const A=c(g,y);return h>A?h-A:0}}})("height",e=>{const n=e.dom;return Jr(e)?n.getBoundingClientRect().height:n.offsetHeight}),dc=e=>bb.get(e),C1=(e,n)=>({left:e,top:n,translate:(r,i)=>C1(e+r,n+i)}),fa=C1,JS=e=>{const n=e.getBoundingClientRect();return fa(n.left,n.top)},QS=(e,n)=>e!==void 0?e:n!==void 0?n:0,NB=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,i=n.documentElement;if(o===e.dom)return fa(o.offsetLeft,o.offsetTop);const c=QS(r==null?void 0:r.pageYOffset,i.scrollTop),d=QS(r==null?void 0:r.pageXOffset,i.scrollLeft),g=QS(i.clientTop,o.clientTop),h=QS(i.clientLeft,o.clientLeft);return qS(e).translate(d-h,c-g)},qS=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?fa(r.offsetLeft,r.offsetTop):Jr(e)?JS(n):fa(0,0)},S1=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return fa(o,r)},rO=(e,n,o)=>{const i=(o!==void 0?o.dom:document).defaultView;i&&i.scrollTo(e,n)},yb=(e,n)=>{ca().browser.isSafari()&&Et(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},IB=(e,n)=>{const o=c=>{if(!e(c))throw new Error("Can only get "+n+" value of a "+n+" node");return r(c).getOr("")},r=c=>e(c)?N.from(c.dom.nodeValue):N.none();return{get:o,getOption:r,set:(c,d)=>{if(!e(c))throw new Error("Can only set raw "+n+" value of a "+n+" node");c.dom.nodeValue=d}}},ex=(e,n)=>{const r=document.createDocumentFragment();return ke(e,i=>{r.appendChild(i.dom)}),ne.fromDom(r)},Cb=IB(Ta,"text"),bh=e=>Cb.get(e),aO=e=>Cb.getOption(e),iO=(e,n)=>Cb.set(e,n),Sb=(e,n)=>{const o=Ds(e,n);return o===void 0||o===""?[]:o.split(" ")},BB=(e,n,o)=>{const i=Sb(e,n).concat([o]);return mr(e,n,i.join(" ")),!0},LB=(e,n,o)=>{const r=Nt(Sb(e,n),i=>i!==o);return r.length>0?mr(e,n,r.join(" ")):nr(e,n),!1};var fc=(e,n,o,r,i)=>e(o,r)?N.some(o):Et(i)&&i(o)?N.none():n(o,r,i);const bd=(e,n,o)=>{let r=e.dom;const i=Et(o)?o:Le;for(;r.parentNode;){r=r.parentNode;const c=ne.fromDom(r);if(n(c))return N.some(c);if(i(c))break}return N.none()},Mu=(e,n,o)=>fc((i,c)=>c(i),bd,e,n,o),Ro=(e,n)=>{const o=e.dom;return o.parentNode?Ru(ne.fromDom(o.parentNode),r=>!zn(e,r)&&n(r)):N.none()},Ru=(e,n)=>{const o=i=>n(ne.fromDom(i));return Oo(e.dom.childNodes,o).map(ne.fromDom)},tx=(e,n)=>{const o=r=>{for(let i=0;i<r.childNodes.length;i++){const c=ne.fromDom(r.childNodes[i]);if(n(c))return N.some(c);const d=o(r.childNodes[i]);if(d.isSome())return d}return N.none()};return o(e.dom)},x1=(e,n,o)=>bd(e,r=>Si(r,n),o),yd=(e,n)=>gf(n,e),bf=(e,n,o)=>fc((i,c)=>Si(i,c),x1,e,n,o),yh=e=>e.dom.classList!==void 0,nx=e=>Sb(e,"class"),lO=(e,n)=>BB(e,"class",n),Es=(e,n)=>LB(e,"class",n),cO=(e,n)=>Ft(nx(e),n)?Es(e,n):lO(e,n),Ko=(e,n)=>{yh(e)?e.dom.classList.add(n):lO(e,n)},uO=e=>{(yh(e)?e.dom.classList:nx(e)).length===0&&nr(e,"class")},Qr=(e,n)=>{yh(e)?e.dom.classList.remove(n):Es(e,n),uO(e)},Am=(e,n)=>{const o=yh(e)?e.dom.classList.toggle(n):cO(e,n);return uO(e),o},Qi=(e,n)=>yh(e)&&e.dom.classList.contains(n),FB=(e,n)=>{ke(n,o=>{Ko(e,o)})},_B=(e,n)=>{ke(n,o=>{Qr(e,o)})},$B=e=>bf(e,"[contenteditable]"),Cd=(e,n=!1)=>Jr(e)?e.dom.isContentEditable:$B(e).fold(Ye(n),o=>HB(o)==="true"),HB=e=>e.dom.contentEditable,mc=(e,n)=>{e.dom.contentEditable=n?"true":"false"},Om=(e,n)=>Nt(Fr(e),n),ox=(e,n)=>{let o=[];return ke(Fr(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(ox(r,n))}),o},Yo=(e,n)=>Ea(n,e),sx=(e,n,o)=>bd(e,n,o).isSome(),w1=(e,n)=>Ro(e,n).isSome(),xb=(e,n)=>tx(e,n).isSome(),dO=(e,n,o)=>x1(e,n,o).isSome(),E1=e=>Et(e)?e:Le,VK=(e,n,o)=>{let r=e.dom;const i=E1(o);for(;r.parentNode;){r=r.parentNode;const c=ne.fromDom(r),d=n(c);if(d.isSome())return d;if(i(c))break}return N.none()},Ch=(e,n,o)=>{const r=n(e),i=E1(o);return r.orThunk(()=>i(e)?N.none():VK(e,n,i))},rx=e=>aO(e).filter(n=>n.trim().length!==0||n.indexOf(Uo)>-1).isSome(),VB=e=>xu(e)&&Ds(e,"contenteditable")==="false",zB=["img","br"],UB=e=>rx(e)||Ft(zB,so(e))||VB(e),ZB=e=>tx(e,UB),fO={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},Sh=Nr.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),WB=(e,n,o,r)=>e.fold(n,o,r),jB=e=>e.fold(Qn,Qn,Qn),GB=Sh.before,KB=Sh.on,YB=Sh.after,Sd={before:GB,on:KB,after:YB,cata:WB,getStart:jB},wb=Nr.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),T1=e=>wb.exact(e.start,e.soffset,e.finish,e.foffset),XB=e=>e.match({domRange:n=>ne.fromDom(n.startContainer),relative:(n,o)=>Sd.getStart(n),exact:(n,o,r,i)=>n}),mO=wb.domRange,JB=wb.relative,QB=wb.exact,gO=e=>{const n=XB(e);return Eu(n)},qB=fO.create,xh={domRange:mO,relative:JB,exact:QB,exactFromRange:T1,getWin:gO,range:qB},e7=(e,n,o)=>{var r;return N.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(i=>{if(i.offsetNode===null)return N.none();const c=e.createRange();return c.setStart(i.offsetNode,i.offset),c.collapse(),N.some(c)})},t7=(e,n,o)=>{var r;return N.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},Eb=(e,n,o)=>e.caretPositionFromPoint?e7(e,n,o):e.caretRangeFromPoint?t7(e,n,o):N.none(),n7=(e,n,o)=>{const r=e.document;return Eb(r,n,o).map(i=>fO.create(ne.fromDom(i.startContainer),i.startOffset,ne.fromDom(i.endContainer),i.endOffset))},Tb=(e,n)=>{const o=so(e);return o==="input"?Sd.after(e):Ft(["br","img"],o)?n===0?Sd.before(e):Sd.after(e):Sd.on(e,n)},hO=(e,n)=>{const o=e.fold(Sd.before,Tb,Sd.after),r=n.fold(Sd.before,Tb,Sd.after);return xh.relative(o,r)},Ab=(e,n,o,r)=>{const i=Tb(e,n),c=Tb(o,r);return xh.relative(i,c)},pO=e=>e.match({domRange:n=>{const o=ne.fromDom(n.startContainer),r=ne.fromDom(n.endContainer);return Ab(o,n.startOffset,r,n.endOffset)},relative:hO,exact:Ab}),o7=e=>{const n=xh.getWin(e).dom,o=(i,c,d,g)=>xl(n,i,c,d,g),r=pO(e);return hd(n,r).match({ltr:o,rtl:o})},UK=(e,n,o)=>n7(e,n,o),ZK=e=>{const n=e===void 0?window:e;return ca().browser.isFirefox()?N.none():N.from(n.visualViewport)},vO=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),A1=e=>{const n=e===void 0?window:e,o=n.document,r=S1(ne.fromDom(o));return ZK(n).fold(()=>{const i=n.document.documentElement,c=i.clientWidth,d=i.clientHeight;return vO(r.left,r.top,c,d)},i=>vO(Math.max(i.pageLeft,r.left),Math.max(i.pageTop,r.top),i.width,i.height))};class _r{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,i){if(n){if(!i&&n[o])return n[o];if(n!==this.rootNode){let c=n[r];if(c)return c;for(let d=n.parentNode;d&&d!==this.rootNode;d=d.parentNode)if(c=d[r],c)return c}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let c=r.lastChild;c;c=c.lastChild)if(!c.lastChild)return c}return r}const i=n.parentNode;if(i&&i!==this.rootNode)return i}}}const s7=/^[ \t\r\n]*$/,$s=e=>s7.test(e),$r=e=>{for(const n of e)if(!Br(n))return!1;return!0},km=e=>" \f	\v".indexOf(e)!==-1,Ob=e=>e===`
`||e==="\r",r7=(e,n)=>n<e.length&&n>=0?Ob(e[n]):!1,ma=(e,n=4,o=!0,r=!0)=>{const i=Za(" ",n),c=e.replace(/\t/g,i);return ts(c,(g,h)=>km(h)||h===Uo?g.pcIsSpace||g.str===""&&o||g.str.length===c.length-1&&r||r7(c,g.str.length+1)?{pcIsSpace:!1,str:g.str+Uo}:{pcIsSpace:!0,str:g.str+" "}:{pcIsSpace:Ob(h),str:g.str+h},{pcIsSpace:!1,str:""}).str},yf=e=>n=>!!n&&n.nodeType===e,wh=e=>!!e&&!Object.getPrototypeOf(e),It=yf(1),Pu=e=>It(e)&&xu(ne.fromDom(e)),a7=e=>It(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",ka=e=>{const n=e.toLowerCase();return o=>ye(o)&&o.nodeName.toLowerCase()===n},Al=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return Ft(n,r)}return!1}},kb=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(It(r)){const i=r.ownerDocument.defaultView;if(i)for(let c=0;c<o.length;c++){const d=i.getComputedStyle(r,null);if((d?d.getPropertyValue(e):null)===o[c])return!0}}return!1}},i7=e=>n=>It(n)&&n.hasAttribute(e),Dm=e=>It(e)&&e.hasAttribute("data-mce-bogus"),l7=e=>It(e)&&e.getAttribute("data-mce-bogus")==="all",Nu=e=>It(e)&&e.tagName==="TABLE",ax=e=>n=>!!(Pu(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),Db=Al(["textarea","input"]),rt=yf(3),WK=yf(4),js=yf(7),Iu=yf(8),O1=yf(9),Mm=yf(11),Ts=ka("br"),bO=ka("img"),c7=ka("a"),gc=ax("true"),ss=ax("false"),Cf=e=>Pu(e)&&e.isContentEditable&&ye(e.parentElement)&&!e.parentElement.isContentEditable,k1=Al(["td","th"]),hc=Al(["td","th","caption"]),Ol=Al(["video","audio","object","embed"]),Mb=ka("li"),Gs=ka("details"),Rb=ka("summary"),Pb={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},yO=(e,n,o)=>{const r=ne.fromDom(n),i=ne.fromDom(e),c=o.getWhitespaceElements();return sx(i,g=>sn(c,so(g)),ut(zn,r))},u7=e=>It(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Kc=(e,n)=>It(e)&&sn(n.getNonEmptyElements(),e.nodeName),Nb=i7("data-mce-bookmark"),Ib=e=>Sm(ne.fromDom(e)).exists(n=>!Cd(n)),ix=(e,n,o)=>$s(e.data)&&!yO(e,n,o),lx=(e,n,o,r)=>rt(e)&&!ix(e,n,o)&&(!r.includeZwsp||!$r(e.data)),cx=(e,n,o,r)=>Et(r.isContent)&&r.isContent(n)||Kc(n,e)||Nb(n)||u7(n)||lx(n,o,e,r)||ss(n)||gc(n)&&Ib(n),Bu=(e,n,o)=>{const r={...Pb,...o};if(r.checkRootAsContent&&cx(e,n,n,r))return!1;let i=n.firstChild,c=0;if(!i)return!0;const d=new _r(i,n);do{if(r.skipBogus&&It(i)){const g=i.getAttribute("data-mce-bogus");if(g){i=d.next(g==="all");continue}}if(Iu(i)){i=d.next(!0);continue}if(Ts(i)){c++,i=d.next();continue}if(cx(e,i,n,r))return!1;i=d.next()}while(i);return c<=1},Da=(e,n,o)=>Bu(e,n.dom,{checkRootAsContent:!0,...o}),Bb=(e,n,o)=>cx(e,n,n,{includeZwsp:Pb.includeZwsp,...o}),CO=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},Sf=e=>CO(e)!=="html",SO=e=>Sf(e.nodeName),d7=e=>CO(e.nodeName),xO=["svg","math"],f7=()=>{const e=Gr(),n=()=>e.get().map(d7).getOr("html");return{track:i=>(SO(i)?e.set(i):e.get().exists(c=>!c.contains(i))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},D1="data-mce-block",m7=e=>Nt(Xt(e),n=>!/[A-Z]/.test(n)),ux=e=>Yt(m7(e),n=>{const o=CSS.escape(n);return`${o}:`+Yt(xO,r=>`not(${r} ${o})`).join(":")}).join(","),wO=(e,n)=>ye(n.querySelector(e))?(n.setAttribute(D1,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(D1),!1),EO=(e,n)=>{const o=ux(e.getTransparentElements()),r=ux(e.getBlockElements());return Nt(n.querySelectorAll(o),i=>wO(r,i))},dx=(e,n,o)=>{var r;const i=o?"lastChild":"firstChild";for(let c=n[i];c;c=c[i])if(Bu(e,c,{checkRootAsContent:!0})){(r=c.parentNode)===null||r===void 0||r.removeChild(c);return}},g7=(e,n,o)=>{const r=document.createRange(),i=n.parentNode;if(i){r.setStartBefore(n),r.setEndBefore(o);const c=r.extractContents();dx(e,c,!0),r.setStartAfter(o),r.setEndAfter(n);const d=r.extractContents();dx(e,d,!1),Bu(e,c,{checkRootAsContent:!0})||i.insertBefore(c,n),Bu(e,o,{checkRootAsContent:!0})||i.insertBefore(o,n),Bu(e,d,{checkRootAsContent:!0})||i.insertBefore(d,n),i.removeChild(n)}},qi=(e,n,o)=>{const r=e.getBlockElements(),i=ne.fromDom(n),c=g=>so(g)in r,d=g=>zn(g,i);ke(Sn(o),g=>{bd(g,c,d).each(h=>{const y=Om(g,A=>c(A)&&!e.isValidChild(so(h),so(A)));if(y.length>0){const A=Sm(h);ke(y,M=>{bd(M,c,d).each(R=>{g7(e,R.dom,M.dom)})}),A.each(M=>EO(e,M.dom))}})})},rn=(e,n,o)=>{ke([...o,...pc(e,n)?[n]:[]],r=>ke(Yo(ne.fromDom(r),r.nodeName.toLowerCase()),i=>{p7(e,i.dom)&&O(i)}))},Lu=(e,n)=>{const o=EO(e,n);qi(e,n,o),rn(e,n,o)},Lb=(e,n)=>{if(mx(e,n)){const o=ux(e.getBlockElements());wO(o,n)}},h7=(e,n,o)=>{const r=c=>zn(c,ne.fromDom(n)),i=lb(ne.fromDom(o),r);tn(i,i.length-2).filter(Ga).fold(()=>Lu(e,n),c=>Lu(e,c.dom))},fx=e=>e.hasAttribute(D1),Eh=(e,n)=>sn(e.getTransparentElements(),n),mx=(e,n)=>It(n)&&Eh(e,n.nodeName),pc=(e,n)=>mx(e,n)&&fx(n),p7=(e,n)=>mx(e,n)&&!fx(n),Rm=(e,n)=>n.type===1&&Eh(e,n.name)&&q(n.attr(D1)),TO=ca().browser,AO=e=>Oo(e,Ga),ps=e=>TO.isFirefox()&&so(e)==="table"?AO(Fr(e)).filter(n=>so(n)==="caption").bind(n=>AO(cb(n)).map(o=>{const r=o.dom.offsetTop,i=n.dom.offsetTop,c=n.dom.offsetHeight;return r<=i?-c:0})).getOr(0):0,kl=(e,n)=>e.children&&Ft(e.children,n),ai=(e,n,o)=>{let r=0,i=0;const c=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&or(ne.fromDom(e),"position")==="static"){const g=n.getBoundingClientRect();return r=g.left+(c.documentElement.scrollLeft||e.scrollLeft)-c.documentElement.clientLeft,i=g.top+(c.documentElement.scrollTop||e.scrollTop)-c.documentElement.clientTop,{x:r,y:i}}let d=n;for(;d&&d!==o&&d.nodeType&&!kl(d,o);){const g=d;r+=g.offsetLeft||0,i+=g.offsetTop||0,d=g.offsetParent}for(d=n.parentNode;d&&d!==o&&d.nodeType&&!kl(d,o);)r-=d.scrollLeft||0,i-=d.scrollTop||0,d=d.parentNode;i+=ps(ne.fromDom(n))}return{x:r,y:i}},Pm=(e,n={})=>{let o=0;const r={},i=ne.fromDom(e),c=wu(i),d=oe=>{n.referrerPolicy=oe},g=oe=>{n.contentCssCors=oe},h=oe=>{_s(ku(i),oe)},y=oe=>{const ue=ku(i);yd(ue,"#"+oe).each(b)},A=oe=>_o(r,oe).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),M=oe=>new Promise((ue,ge)=>{let Se;const Ue=ct._addCacheSuffix(oe),et=A(Ue);r[Ue]=et,et.count++;const Tt=(wt,Vt)=>{ke(wt,go),et.status=Vt,et.passed=[],et.failed=[],Se&&(Se.onload=null,Se.onerror=null,Se=null)},Ne=()=>Tt(et.passed,2),Ae=()=>Tt(et.failed,3);if(ue&&et.passed.push(ue),ge&&et.failed.push(ge),et.status===1)return;if(et.status===2){Ne();return}if(et.status===3){Ae();return}et.status=1;const je=ne.fromTag("link",c.dom);xi(je,{rel:"stylesheet",type:"text/css",id:et.id}),n.contentCssCors&&mr(je,"crossOrigin","anonymous"),n.referrerPolicy&&mr(je,"referrerpolicy",n.referrerPolicy),Se=je.dom,Se.onload=Ne,Se.onerror=Ae,h(je),mr(je,"href",Ue)}),R=(oe,ue)=>{const ge=A(oe);r[oe]=ge,ge.count++;const Se=ne.fromTag("style",c.dom);xi(Se,{rel:"stylesheet",type:"text/css",id:ge.id,"data-mce-key":oe}),Se.dom.innerHTML=ue,h(Se)},_=oe=>Promise.allSettled(Yt(oe,ge=>M(ge).then(Ye(ge)))).then(ge=>{const Se=Rr(ge,Ue=>Ue.status==="fulfilled");return Se.fail.length>0?Promise.reject(Yt(Se.fail,Ue=>Ue.reason)):Yt(Se.pass,Ue=>Ue.value)}),Z=oe=>{const ue=ct._addCacheSuffix(oe);_o(r,ue).each(ge=>{--ge.count===0&&(delete r[ue],y(ge.id))})};return{load:M,loadRawCss:R,loadAll:_,unload:Z,unloadRawCss:oe=>{_o(r,oe).each(ue=>{--ue.count===0&&(delete r[oe],y(ue.id))})},unloadAll:oe=>{ke(oe,ue=>{Z(ue)})},_setReferrerPolicy:d,_setContentCssCors:g}},gx=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const c=Tl(o).dom;return N.from(e.get(c)).getOrThunk(()=>{const d=Pm(c,r);return e.set(c,d),d})}}})(),qr=e=>e.nodeName.toLowerCase()==="span",Ma=(e,n)=>ye(e)&&(Bb(n,e)||n.isInline(e.nodeName.toLowerCase())),hx=(e,n,o)=>{const r=new _r(e,n).prev(!1),i=new _r(e,n).next(!1),c=Je(r)||Ma(r,o),d=Je(i)||Ma(i,o);return c&&d},We=e=>qr(e)&&e.getAttribute("data-mce-type")==="bookmark",el=(e,n,o)=>rt(e)&&e.data.length>0&&hx(e,n,o),OO=e=>It(e)?e.childNodes.length>0:!1,gr=e=>Mm(e)||O1(e),tl=(e,n,o,r)=>{var i;const c=r||n;if(It(n)&&We(n))return n;const d=n.childNodes;for(let g=d.length-1;g>=0;g--)tl(e,d[g],o,c);if(It(n)){const g=n.childNodes;g.length===1&&We(g[0])&&((i=n.parentNode)===null||i===void 0||i.insertBefore(g[0],n))}return!gr(n)&&!Bb(o,n)&&!OO(n)&&!el(n,c,o)&&e.remove(n),n},vc=ct.makeMap,Fb=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,bc=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,kO=/[<>&\"\']/g,Ei=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,uo={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},ii={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},M1={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Hs=e=>{const n=ne.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},px=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let i=0;i<r.length;i+=2){const c=String.fromCharCode(parseInt(r[i],n));if(!ii[c]){const d="&"+r[i+1]+";";o[c]=d,o[d]=c}}return o}else return},Yc=px("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),vx=(e,n)=>e.replace(n?Fb:bc,o=>ii[o]||o),Ti=e=>(""+e).replace(kO,n=>ii[n]||n),DO=(e,n)=>e.replace(n?Fb:bc,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":ii[o]||"&#"+o.charCodeAt(0)+";"),ve=(e,n,o)=>{const r=o||Yc;return e.replace(n?Fb:bc,i=>ii[i]||r[i]||i)},$o={encodeRaw:vx,encodeAllRaw:Ti,encodeNumeric:DO,encodeNamed:ve,getEncodeFunc:(e,n)=>{const o=px(n)||Yc,r=(d,g)=>d.replace(g?Fb:bc,h=>ii[h]!==void 0?ii[h]:o[h]!==void 0?o[h]:h.length>1?"&#"+((h.charCodeAt(0)-55296)*1024+(h.charCodeAt(1)-56320)+65536)+";":"&#"+h.charCodeAt(0)+";"),i=(d,g)=>ve(d,g,o),c=vc(e.replace(/\+/g,","));return c.named&&c.numeric?r:c.named?n?i:ve:c.numeric?DO:vx},decode:e=>e.replace(Ei,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):uo[o]||String.fromCharCode(o)):M1[n]||Yc[n]||Hs(n))},As=(e,n)=>(e=ct.trim(e),e?e.split(n||" "):[]),ea=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Zo=e=>Te(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",v7=e=>{const n=o=>Ge(o)?Yt(o,n):Zo(o)?new RegExp(o.source,o.flags):Te(o)?_t(o,n):o;return n(e)},xf=e=>{const n=/^(~)?(.+)$/;return Cs(As(e,","),o=>{const r=n.exec(o);if(r){const c=r[1]==="~"?"span":"div",d=r[2];return[{cloneName:c,name:d}]}else return[]})},_b=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),RO=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},bx=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=RO(e),i=c=>Object.freeze(c.split(" "));return Object.freeze({blockContent:i(n),phrasingContent:i(o),flowContent:i(r)})},b7={html4:zo(()=>bx("html4")),html5:zo(()=>bx("html5")),"html5-strict":zo(()=>bx("html5-strict"))},PO=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:i}=b7[e]();return n==="blocks"?N.some(o):n==="phrasing"?N.some(r):n==="flow"?N.some(i):N.none()},Nm=e=>{const n=_b(e),{phrasingContent:o,flowContent:r}=RO(e),i={},c=(h,y,A)=>{i[h]={attributes:ze(y,Ye({})),attributesOrder:y,children:ze(A,Ye({}))}},d=(h,y="",A="")=>{const M=As(A),R=As(h);let _=R.length;const Z=[...n,...As(y)];for(;_--;)c(R[_],Z.slice(),M)},g=(h,y)=>{const A=As(h),M=As(y);let R=A.length;for(;R--;){const _=i[A[R]];for(let Z=0,V=M.length;Z<V;Z++)_.attributes[M[Z]]={},_.attributesOrder.push(M[Z])}};return e!=="html5-strict"&&(ke(As("acronym applet basefont big font strike tt"),A=>{d(A,"",o)}),ke(As("center dir isindex noframes"),A=>{d(A,"",r)})),d("html","manifest","head body"),d("head","","base command link meta noscript script style title"),d("title hr noscript br"),d("base","href target"),d("link","href rel media hreflang type sizes hreflang"),d("meta","name http-equiv content charset"),d("style","media type scoped"),d("script","src async defer type charset"),d("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),d("dd div","",r),d("address dt caption","",e==="html4"?o:r),d("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),d("blockquote","cite",r),d("ol","reversed start type","li"),d("ul","","li"),d("li","value",r),d("dl","","dt dd"),d("a","href target rel media hreflang type",e==="html4"?o:r),d("q","cite",o),d("ins del","cite datetime",r),d("img","src sizes srcset alt usemap ismap width height"),d("iframe","src name width height",r),d("embed","src type width height"),d("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),d("param","name value"),d("map","name",[r,"area"].join(" ")),d("area","alt coords shape href target rel media hreflang type"),d("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),d("colgroup","span","col"),d("col","span"),d("tbody thead tfoot","","tr"),d("tr","","td th"),d("td","colspan rowspan headers",r),d("th","colspan rowspan headers scope abbr",r),d("form","accept-charset action autocomplete enctype method name novalidate target",r),d("fieldset","disabled form name",[r,"legend"].join(" ")),d("label","form for",o),d("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),d("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),d("select","disabled form multiple name required size","option optgroup"),d("optgroup","disabled label","option"),d("option","disabled label selected value"),d("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),d("menu","type label",[r,"li"].join(" ")),d("noscript","",r),e!=="html4"&&(d("wbr"),d("ruby","",[o,"rt rp"].join(" ")),d("figcaption","",r),d("mark rt rp bdi","",o),d("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),d("canvas","width height",r),d("data","value",o),d("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),d("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),d("picture","","img source"),d("source","src srcset type media sizes"),d("track","kind src srclang label default"),d("datalist","",[o,"option"].join(" ")),d("article section nav aside main header footer","",r),d("hgroup","","h1 h2 h3 h4 h5 h6"),d("figure","",[r,"figcaption"].join(" ")),d("time","datetime",o),d("dialog","open",r),d("command","type label icon disabled checked radiogroup command"),d("output","for form name",o),d("progress","value max",o),d("meter","value min max low high optimum",o),d("details","open",[r,"summary"].join(" ")),d("keygen","autofocus challenge disabled form keytype name"),c("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(g("script","language xml:space"),g("style","xml:space"),g("object","declare classid code codebase codetype archive standby align border hspace vspace"),g("embed","align name hspace vspace"),g("param","valuetype type"),g("a","charset name rev shape coords"),g("br","clear"),g("applet","codebase archive code object alt name width height align hspace vspace"),g("img","name longdesc align border hspace vspace"),g("iframe","longdesc frameborder marginwidth marginheight scrolling align"),g("font basefont","size color face"),g("input","usemap align"),g("select"),g("textarea"),g("h1 h2 h3 h4 h5 h6 div p legend caption","align"),g("ul","type compact"),g("li","type"),g("ol dl menu dir","compact"),g("pre","width xml:space"),g("hr","align noshade size width"),g("isindex","prompt"),g("table","summary width frame rules cellspacing cellpadding align bgcolor"),g("col","width align char charoff valign"),g("colgroup","width align char charoff valign"),g("thead","align char charoff valign"),g("tr","align char charoff valign bgcolor"),g("th","axis align char charoff valign nowrap bgcolor width height"),g("form","accept"),g("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),g("tfoot","align char charoff valign"),g("tbody","align char charoff valign"),g("area","nohref"),g("body","background bgcolor text link vlink alink")),e!=="html4"&&(g("input button select textarea","autofocus"),g("input textarea","placeholder"),g("a","download"),g("link script img","crossorigin"),g("img","loading"),g("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&ke([i.video,i.audio],h=>{delete h.children.audio,delete h.children.video}),ke(As("a form meter progress dfn"),h=>{i[h]&&delete i[h].children[h]}),delete i.caption.children.table,delete i.script,i},Th=e=>e==="-"?"remove":"add",yx=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return N.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},y7=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Cs(As(e,","),o=>{const r=n.exec(o);if(r){const i=r[1],c=i?Th(i):"replace",d=r[2],g=Cs(As(r[3],"|"),h=>yx(h).toArray());return[{operation:c,name:d,validChildren:g}]}else return[]})},C7=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:i,attributesOrder:c}=n;return ke(As(e,"|"),d=>{const g=o.exec(d);if(g){const h={},y=g[1],A=g[2].replace(/[\\:]:/g,":"),M=g[3],R=g[4];if(y==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(A),h.required=!0),y==="-"){delete i[A],c.splice(ct.inArray(c,A),1);return}if(M&&(M==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:A,value:R}),h.defaultValue=R):M==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:A,value:R}),h.forcedValue=R):M==="<"&&(h.validValues=ct.makeMap(R,"?"))),r.test(A)){const _=h;n.attributePatterns=n.attributePatterns||[],_.pattern=ea(A),n.attributePatterns.push(_)}else i[A]||c.push(A),i[A]=h}})},ta=(e,n)=>{Be(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},xd=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Cs(As(n,","),r=>{const i=o.exec(r);if(i){const c=i[1],d=i[2],g=i[3],h=i[4],y=i[5],A={attributes:{},attributesOrder:[]};if(e.each(M=>ta(M,A)),c==="#"?A.paddEmpty=!0:c==="-"&&(A.removeEmpty=!0),h==="!"&&(A.removeEmptyAttrs=!0),y&&C7(y,A),g&&(A.outputName=d),d==="@")if(e.isNone())e=N.some(A);else return[];return[g?{name:d,element:A,aliasName:g}:{name:d,element:A}]}else return[]})},wf={},Xc=ct.makeMap,Cc=ct.each,Ai=ct.extend,R1=ct.explode,P1=(e,n={})=>{const o=Xc(e," ",Xc(e.toUpperCase()," "));return Ai(o,n)},$b=e=>P1("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Sc=(e,n)=>{if(e){const o={};return q(e)&&(e={"*":e}),Cc(e,(r,i)=>{o[i]=o[i.toUpperCase()]=n==="map"?Xc(r,/[, ]/):R1(r,/[, ]/)}),o}else return},ga=(e={})=>{var n;const o={},r={};let i=[];const c={},d={},g=(Wt,Kn,Os)=>{const Xs=e[Wt];if(Xs)return Xc(Xs,/[, ]/,Xc(Xs.toUpperCase(),/[, ]/));{let Sr=wf[Wt];return Sr||(Sr=P1(Kn,Os),wf[Wt]=Sr),Sr}},h=(n=e.schema)!==null&&n!==void 0?n:"html5",y=Nm(h);e.verify_html===!1&&(e.valid_elements="*[*]");const A=Sc(e.valid_styles),M=Sc(e.invalid_styles,"map"),R=Sc(e.valid_classes,"map"),_=g("whitespace_elements","pre script noscript style textarea video audio iframe object code"),Z=g("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),V=g("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),G=g("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),oe="td th iframe video audio object script code",ue=g("non_empty_elements",oe+" pre svg textarea summary",V),ge=g("move_caret_before_on_enter_elements",oe+" table",V),Se="h1 h2 h3 h4 h5 h6",Ue=g("text_block_elements",Se+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),et=g("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",Ue),Tt=g("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Ne=g("transparent_elements","a ins del canvas map"),Ae=g("wrap_block_elements","pre "+Se);Cc("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Wt=>{d[Wt]=new RegExp("</"+Wt+"[^>]*>","gi")});const je=Wt=>{const Kn=N.from(o["@"]),Os=/[*?+]/;ke(xd(Kn,Wt??""),({name:Xs,element:Sr,aliasName:Js})=>{if(Js&&(o[Js]=Sr),Os.test(Xs)){const fs=Sr;fs.pattern=ea(Xs),i.push(fs)}else o[Xs]=Sr})},wt=Wt=>{i=[],ke(Xt(o),Kn=>{delete o[Kn]}),je(Wt)},Vt=(Wt,Kn)=>{var Os,Xs;delete wf.text_block_elements,delete wf.block_elements;const Sr=Kn.extends?!Ca(Kn.extends):!1,Js=Kn.extends;if(r[Wt]=Js?r[Js]:{},c[Wt]=Js??Wt,ue[Wt.toUpperCase()]={},ue[Wt]={},Sr||(et[Wt.toUpperCase()]={},et[Wt]={}),Js&&!o[Wt]&&o[Js]){const fs=v7(o[Js]);delete fs.removeEmptyAttrs,delete fs.removeEmpty,o[Wt]=fs}else o[Wt]={attributesOrder:[],attributes:{}};if(Ge(Kn.attributes)){const fs=ti=>{ms.attributesOrder.push(ti),ms.attributes[ti]={}},ms=(Os=o[Wt])!==null&&Os!==void 0?Os:{};delete ms.attributesDefault,delete ms.attributesForced,delete ms.attributePatterns,delete ms.attributesRequired,ms.attributesOrder=[],ms.attributes={},ke(Kn.attributes,ti=>{const _c=_b(h);yx(ti).each(({preset:od,name:uu})=>{od?uu==="global"&&ke(_c,fs):fs(uu)})}),o[Wt]=ms}if(lt(Kn.padEmpty)){const fs=(Xs=o[Wt])!==null&&Xs!==void 0?Xs:{};fs.paddEmpty=Kn.padEmpty,o[Wt]=fs}if(Ge(Kn.children)){const fs={},ms=_c=>{fs[_c]={}},ti=_c=>{PO(h,_c).each(od=>{ke(od,ms)})};ke(Kn.children,_c=>{yx(_c).each(({preset:od,name:uu})=>{od?ti(uu):ms(uu)})}),r[Wt]=fs}Js&&Be(r,(fs,ms)=>{fs[Js]&&(r[ms]=fs=Ai({},r[ms]),fs[Wt]=fs[Js])})},Mn=Wt=>{ke(xf(Wt??""),({name:Kn,cloneName:Os})=>{Vt(Kn,{extends:Os})})},Pn=Wt=>{Te(Wt)?Be(Wt,(Kn,Os)=>Vt(Os,Kn)):q(Wt)&&Mn(Wt)},io=Wt=>{ke(y7(Wt??""),({operation:Kn,name:Os,validChildren:Xs})=>{const Sr=Kn==="replace"?{"#comment":{}}:r[Os],Js=ms=>{Kn==="remove"?delete Sr[ms]:Sr[ms]={}},fs=ms=>{PO(h,ms).each(ti=>{ke(ti,Js)})};ke(Xs,({preset:ms,name:ti})=>{ms?fs(ti):Js(ti)}),r[Os]=Sr})},So=Wt=>{const Kn=o[Wt];if(Kn)return Kn;let Os=i.length;for(;Os--;){const Xs=i[Os];if(Xs.pattern.test(Wt))return Xs}},ds=()=>{e.valid_elements?(wt(e.valid_elements),Cc(y,(Wt,Kn)=>{r[Kn]=Wt.children})):(Cc(y,(Wt,Kn)=>{o[Kn]={attributes:Wt.attributes,attributesOrder:Wt.attributesOrder},r[Kn]=Wt.children}),Cc(As("strong/b em/i"),Wt=>{const Kn=As(Wt,"/");o[Kn[1]].outputName=Kn[0]}),Cc(Tt,(Wt,Kn)=>{o[Kn]&&(e.padd_empty_block_inline_children&&(o[Kn].paddInEmptyBlock=!0),o[Kn].removeEmpty=!0)}),Cc(As("ol ul blockquote a table tbody"),Wt=>{o[Wt]&&(o[Wt].removeEmpty=!0)}),Cc(As("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Wt=>{o[Wt]&&(o[Wt].paddEmpty=!0)}),Cc(As("span"),Wt=>{o[Wt].removeEmptyAttrs=!0})),delete o.svg,Pn(e.custom_elements),io(e.valid_children),je(e.extended_valid_elements),io("+ol[ul|ol],+ul[ul|ol]"),Cc({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Wt,Kn)=>{o[Kn]&&(o[Kn].parentsRequired=As(Wt))}),e.invalid_elements&&Cc(R1(e.invalid_elements),Wt=>{o[Wt]&&delete o[Wt]}),So("span")||je("span[!data-mce-type|*]")},cr=Ye(A),Cr=Ye(M),pt=Ye(R),Ht=Ye(G),oo=Ye(et),lo=Ye(Ue),He=Ye(Tt),nt=Ye(Object.seal(V)),$t=Ye(Z),Rn=Ye(ue),$n=Ye(ge),mo=Ye(_),ql=Ye(Ne),nd=Ye(Ae),La=Ye(Object.seal(d)),gi=(Wt,Kn)=>{const Os=r[Wt.toLowerCase()];return!!(Os&&Os[Kn.toLowerCase()])},ul=(Wt,Kn)=>{const Os=So(Wt);if(Os)if(Kn){if(Os.attributes[Kn])return!0;const Xs=Os.attributePatterns;if(Xs){let Sr=Xs.length;for(;Sr--;)if(Xs[Sr].pattern.test(Kn))return!0}}else return!0;return!1},Ca=Wt=>sn(oo(),Wt),ei=Wt=>!gs(Wt,"#")&&ul(Wt)&&!Ca(Wt),ec=Wt=>sn(nd(),Wt)||ei(Wt),om=Ye(c);return ds(),{type:h,children:r,elements:o,getValidStyles:cr,getValidClasses:pt,getBlockElements:oo,getInvalidStyles:Cr,getVoidElements:nt,getTextBlockElements:lo,getTextInlineElements:He,getBoolAttrs:Ht,getElementRule:So,getSelfClosingElements:$t,getNonEmptyElements:Rn,getMoveCaretBeforeOnEnterElements:$n,getWhitespaceElements:mo,getTransparentElements:ql,getSpecialElements:La,isValidChild:gi,isValid:ul,isBlock:Ca,isInline:ei,isWrapper:ec,getCustomElements:om,addValidElements:je,setValidElements:wt,addCustomElements:Pn,addValidChildren:io}},NO=e=>({value:Jc(e)}),Jc=e=>Kr(e,"#").toUpperCase(),Cx=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},wd=e=>{const n=Cx(e.red)+Cx(e.green)+Cx(e.blue);return NO(n)},Im=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Ef=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,S7=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Ah=(e,n,o,r)=>{const i=parseInt(e,10),c=parseInt(n,10),d=parseInt(o,10),g=parseFloat(r);return S7(i,c,d,g)},x7=e=>Im.test(e)?"rgb":Ef.test(e)?"rgba":"other",IO=e=>{const n=Im.exec(e);if(n!==null)return N.some(Ah(n[1],n[2],n[3],"1"));const o=Ef.exec(e);return o!==null?N.some(Ah(o[1],o[2],o[3],o[4])):N.none()},Vs=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,N1=e=>IO(e).map(wd).map(n=>"#"+n.value).getOr(e),Fu=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,c={};let d,g;const h=Ir;n&&(d=n.getValidStyles(),g=n.getInvalidStyles());const y=(`\\" \\' \\; \\: ; : `+h).split(" ");for(let M=0;M<y.length;M++)c[y[M]]=h+M,c[h+M]=y[M];const A={parse:M=>{const R={};let _=!1;const Z=e.url_converter,V=e.url_converter_scope||A,G=(Ne,Ae,je)=>{const wt=R[Ne+"-top"+Ae];if(!wt)return;const Vt=R[Ne+"-right"+Ae];if(!Vt)return;const Mn=R[Ne+"-bottom"+Ae];if(!Mn)return;const Pn=R[Ne+"-left"+Ae];if(!Pn)return;const io=[wt,Vt,Mn,Pn];let So=io.length-1;for(;So--&&io[So]===io[So+1];);So>-1&&je||(R[Ne+Ae]=So===-1?io[0]:io.join(" "),delete R[Ne+"-top"+Ae],delete R[Ne+"-right"+Ae],delete R[Ne+"-bottom"+Ae],delete R[Ne+"-left"+Ae])},oe=Ne=>{const Ae=R[Ne];if(!Ae)return;const je=Ae.indexOf(",")>-1?[Ae]:Ae.split(" ");let wt=je.length;for(;wt--;)if(je[wt]!==je[0])return!1;return R[Ne]=je[0],!0},ue=(Ne,Ae,je,wt)=>{oe(Ae)&&oe(je)&&oe(wt)&&(R[Ne]=R[Ae]+" "+R[je]+" "+R[wt],delete R[Ae],delete R[je],delete R[wt])},ge=Ne=>(_=!0,c[Ne]),Se=(Ne,Ae)=>(_&&(Ne=Ne.replace(/\uFEFF[0-9]/g,je=>c[je])),Ae||(Ne=Ne.replace(/\\([\'\";:])/g,"$1")),Ne),Ue=Ne=>String.fromCharCode(parseInt(Ne.slice(1),16)),et=Ne=>Ne.replace(/\\[0-9a-f]+/gi,Ue),Tt=(Ne,Ae,je,wt,Vt,Mn)=>{if(Vt=Vt||Mn,Vt)return Vt=Se(Vt),"'"+Vt.replace(/\'/g,"\\'")+"'";if(Ae=Se(Ae||je||wt||""),!e.allow_script_urls){const Pn=Ae.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Pn)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Pn))return""}return Z&&(Ae=Z.call(V,Ae,"style")),"url('"+Ae.replace(/\'/g,"\\'")+"')"};if(M){M=M.replace(/[\u0000-\u001F]/g,""),M=M.replace(/\\[\"\';:\uFEFF]/g,ge).replace(/\"[^\"]+\"|\'[^\']+\'/g,Ae=>Ae.replace(/[;:]/g,ge));let Ne;for(;Ne=r.exec(M);){r.lastIndex=Ne.index+Ne[0].length;let Ae=Ne[1].replace(i,"").toLowerCase(),je=Ne[2].replace(i,"");if(Ae&&je){if(Ae=et(Ae),je=et(je),Ae.indexOf(h)!==-1||Ae.indexOf('"')!==-1||!e.allow_script_urls&&(Ae==="behavior"||/expression\s*\(|\/\*|\*\//.test(je)))continue;Ae==="font-weight"&&je==="700"?je="bold":(Ae==="color"||Ae==="background-color")&&(je=je.toLowerCase()),x7(je)==="rgb"&&IO(je).each(wt=>{je=N1(Vs(wt)).toLowerCase()}),je=je.replace(o,Tt),R[Ae]=_?Se(je,!0):je}}G("border","",!0),G("border","-width"),G("border","-color"),G("border","-style"),G("padding",""),G("margin",""),ue("border","border-width","border-style","border-color"),R.border==="medium none"&&delete R.border,R["border-image"]==="none"&&delete R["border-image"]}return R},serialize:(M,R)=>{let _="";const Z=(G,oe)=>{const ue=oe[G];if(ue)for(let ge=0,Se=ue.length;ge<Se;ge++){const Ue=ue[ge],et=M[Ue];et&&(_+=(_.length>0?" ":"")+Ue+": "+et+";")}},V=(G,oe)=>{if(!g||!oe)return!0;let ue=g["*"];return ue&&ue[G]?!1:(ue=g[oe],!(ue&&ue[G]))};return R&&d?(Z("*",d),Z(R,d)):Be(M,(G,oe)=>{G&&V(oe,R)&&(_+=(_.length>0?" ":"")+oe+": "+G+";")}),_}};return A},I1={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Sx=e=>e instanceof Event||Et(e.initEvent),Bm=e=>e.isDefaultPrevented===tt||e.isDefaultPrevented===Le,nl=e=>gt(e.preventDefault)||Sx(e),Oh=(e,n)=>{const o=n??{};for(const r in e)sn(I1,r)||(o[r]=e[r]);return ye(e.composedPath)&&(o.composedPath=()=>e.composedPath()),ye(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),ye(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},Lm=(e,n,o,r)=>{var i;const c=Oh(n,r);return c.type=e,gt(c.target)&&(c.target=(i=c.srcElement)!==null&&i!==void 0?i:o),nl(n)&&(c.preventDefault=()=>{c.defaultPrevented=!0,c.isDefaultPrevented=tt,Et(n.preventDefault)&&n.preventDefault()},c.stopPropagation=()=>{c.cancelBubble=!0,c.isPropagationStopped=tt,Et(n.stopPropagation)&&n.stopPropagation()},c.stopImmediatePropagation=()=>{c.isImmediatePropagationStopped=tt,c.stopPropagation()},Bm(c)||(c.isDefaultPrevented=c.defaultPrevented===!0?tt:Le,c.isPropagationStopped=c.cancelBubble===!0?tt:Le,c.isImmediatePropagationStopped=Le)),c},w7="mce-data-",Hb=/^(?:mouse|contextmenu)|click/,B1=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},Fm=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},E7=e=>ye(e)&&Hb.test(e.type),L1=(e,n)=>{const o=Lm(e.type,e,document,n);if(E7(e)&&Je(e.pageX)&&!Je(e.clientX)){const r=o.target.ownerDocument||document,i=r.documentElement,c=r.body,d=o;d.pageX=e.clientX+(i&&i.scrollLeft||c&&c.scrollLeft||0)-(i&&i.clientLeft||c&&c.clientLeft||0),d.pageY=e.clientY+(i&&i.scrollTop||c&&c.scrollTop||0)-(i&&i.clientTop||c&&c.clientTop||0)}return o},xx=(e,n,o)=>{const r=e.document,i={type:"ready"};if(o.domLoaded){n(i);return}const c=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,d=()=>{Fm(e,"DOMContentLoaded",d),Fm(e,"load",d),o.domLoaded||(o.domLoaded=!0,n(i)),e=null};c()?d():B1(e,"DOMContentLoaded",d),o.domLoaded||B1(e,"load",d)};class Qc{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=w7+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,i){const c=this;let d;const g=window,h=R=>{c.executeHandlers(L1(R||g.event),y)};if(!n||rt(n)||Iu(n))return r;let y;n[c.expando]?y=n[c.expando]:(y=c.count++,n[c.expando]=y,c.events[y]={}),i=i||n;const A=o.split(" ");let M=A.length;for(;M--;){let R=A[M],_=h,Z=!1,V=!1;if(R==="DOMContentLoaded"&&(R="ready"),c.domLoaded&&R==="ready"&&n.readyState==="complete"){r.call(i,L1({type:R}));continue}!c.hasFocusIn&&(R==="focusin"||R==="focusout")&&(Z=!0,V=R==="focusin"?"focus":"blur",_=G=>{const oe=L1(G||g.event);oe.type=oe.type==="focus"?"focusin":"focusout",c.executeHandlers(oe,y)}),d=c.events[y][R],d?R==="ready"&&c.domLoaded?r(L1({type:R})):d.push({func:r,scope:i}):(c.events[y][R]=d=[{func:r,scope:i}],d.fakeName=V,d.capture=Z,d.nativeHandler=_,R==="ready"?xx(n,_,c):B1(n,V||R,_,Z))}return n=d=null,r}unbind(n,o,r){if(!n||rt(n)||Iu(n))return this;const i=n[this.expando];if(i){let c=this.events[i];if(o){const d=o.split(" ");let g=d.length;for(;g--;){const h=d[g],y=c[h];if(y){if(r){let A=y.length;for(;A--;)if(y[A].func===r){const M=y.nativeHandler,R=y.fakeName,_=y.capture,Z=y.slice(0,A).concat(y.slice(A+1));Z.nativeHandler=M,Z.fakeName=R,Z.capture=_,c[h]=Z}}(!r||y.length===0)&&(delete c[h],Fm(n,y.fakeName||h,y.nativeHandler,y.capture))}}}else Be(c,(d,g)=>{Fm(n,d.fakeName||g,d.nativeHandler,d.capture)}),c={};for(const d in c)if(sn(c,d))return this;delete this.events[i];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||rt(n)||Iu(n))return this;const i=L1({type:o,target:n},r);do{const c=n[this.expando];c&&this.executeHandlers(i,c),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!i.isPropagationStopped());return this}clean(n){if(!n||rt(n)||Iu(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],i=r&&r[n.type];if(i)for(let c=0,d=i.length;c<d;c++){const g=i[c];if(g&&g.func.call(g.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Qc.Event=new Qc;const Dl=ct.each,_u=ct.grep,Ed="data-mce-style",BO=ct.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Tf=(e,n,o)=>{gt(o)||o===""?nr(e,n):mr(e,n,o)},Vb=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),_m=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,i=e.previousSibling;i;i=i.previousSibling){const c=i.nodeType;n&&rt(i)&&(c===r||!i.data.length)||(o++,r=c)}return o},wx=(e,n)=>{const o=Ds(n,"style"),r=e.serialize(e.parse(o),so(n));Tf(n,Ed,r)},LO=(e,n)=>xt(e)?sn(BO,n)?e+"":e+"px":e,zb=(e,n,o)=>{const r=Vb(n);gt(o)||o===""?XS(e,r):sO(e,r,LO(o,r))},Ex=(e,n,o)=>{const r=n.keep_values,i={set:(d,g,h)=>{const y=ne.fromDom(d);Et(n.url_converter)&&ye(g)&&(g=n.url_converter.call(n.url_converter_scope||o(),String(g),h,d));const A="data-mce-"+h;Tf(y,A,g),Tf(y,h,g)},get:(d,g)=>{const h=ne.fromDom(d);return Ds(h,"data-mce-"+g)||Ds(h,g)}},c={style:{set:(d,g)=>{const h=ne.fromDom(d);r&&Tf(h,Ed,g),nr(h,"style"),q(g)&&pb(h,e.parse(g))},get:d=>{const g=ne.fromDom(d),h=Ds(g,Ed)||Ds(g,"style");return e.serialize(e.parse(h),so(g))}}};return r&&(c.href=c.src=i),c},Co=(e,n={})=>{const o={},r=window,i={};let c=0;const d=!0,g=!0,h=gx.forElement(ne.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),y=[],A=n.schema?n.schema:ga({}),M=Fu({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),R=n.ownEvents?new Qc:Qc.Event,_=A.getBlockElements(),Z=be=>q(be)?sn(_,be):It(be)&&(sn(_,be.nodeName)||pc(A,be)),V=be=>be&&e&&q(be)?e.getElementById(be):be,G=be=>{const Ee=V(be);return ye(Ee)?ne.fromDom(Ee):null},oe=(be,Ee,mt="")=>{let st;const qt=G(be);if(ye(qt)&&Ga(qt)){const Jn=Kg[Ee];Jn&&Jn.get?st=Jn.get(qt.dom,Ee):st=Ds(qt,Ee)}return ye(st)?st:mt},ue=be=>{const Ee=V(be);return gt(Ee)?[]:Ee.attributes},ge=(be,Ee,mt)=>{Ht(be,st=>{if(It(st)){const qt=ne.fromDom(st),Jn=mt===""?null:mt,ks=Ds(qt,Ee),Sa=Kg[Ee];Sa&&Sa.set?Sa.set(qt.dom,Jn,Ee):Tf(qt,Ee,Jn),ks!==Jn&&n.onSetAttrib&&n.onSetAttrib({attrElm:qt.dom,attrName:Ee,attrValue:Jn})}})},Se=(be,Ee)=>be.cloneNode(Ee),Ue=()=>n.root_element||e.body,et=be=>{const Ee=A1(be);return{x:Ee.x,y:Ee.y,w:Ee.width,h:Ee.height}},Tt=(be,Ee)=>ai(e.body,V(be),Ee),Ne=(be,Ee,mt)=>{Ht(be,st=>{const qt=ne.fromDom(st);zb(qt,Ee,mt),n.update_styles&&wx(M,qt)})},Ae=(be,Ee)=>{Ht(be,mt=>{const st=ne.fromDom(mt);Be(Ee,(qt,Jn)=>{zb(st,Jn,qt)}),n.update_styles&&wx(M,st)})},je=(be,Ee,mt)=>{const st=V(be);if(!(gt(st)||!Pu(st)&&!a7(st)))return mt?or(ne.fromDom(st),Vb(Ee)):(Ee=Ee.replace(/-(\D)/g,(qt,Jn)=>Jn.toUpperCase()),Ee==="float"&&(Ee="cssFloat"),st.style?st.style[Ee]:void 0)},wt=be=>{const Ee=V(be);if(!Ee)return{w:0,h:0};let mt=je(Ee,"width"),st=je(Ee,"height");return(!mt||mt.indexOf("px")===-1)&&(mt="0"),(!st||st.indexOf("px")===-1)&&(st="0"),{w:parseInt(mt,10)||Ee.offsetWidth||Ee.clientWidth,h:parseInt(st,10)||Ee.offsetHeight||Ee.clientHeight}},Vt=be=>{const Ee=V(be),mt=Tt(Ee),st=wt(Ee);return{x:mt.x,y:mt.y,w:st.w,h:st.h}},Mn=(be,Ee)=>{if(!be)return!1;const mt=Ge(be)?be:[be];return Cn(mt,st=>Si(ne.fromDom(st),Ee))},Pn=(be,Ee,mt,st)=>{const qt=[];let Jn=V(be);st=st===void 0;const ks=mt||(Ue().nodeName!=="BODY"?Ue().parentNode:null);if(q(Ee))if(Ee==="*")Ee=It;else{const Sa=Ee;Ee=$c=>Mn($c,Sa)}for(;Jn&&!(Jn===ks||gt(Jn.nodeType)||O1(Jn)||Mm(Jn));){if(!Ee||Ee(Jn))if(st)qt.push(Jn);else return[Jn];Jn=Jn.parentNode}return st?qt:null},io=(be,Ee,mt)=>{const st=Pn(be,Ee,mt,!1);return st&&st.length>0?st[0]:null},So=(be,Ee,mt)=>{let st=Ee;if(be){q(Ee)&&(st=qt=>Mn(qt,Ee));for(let qt=be[mt];qt;qt=qt[mt])if(Et(st)&&st(qt))return qt}return null},ds=(be,Ee)=>So(be,Ee,"nextSibling"),cr=(be,Ee)=>So(be,Ee,"previousSibling"),Cr=be=>Et(be.querySelectorAll),pt=(be,Ee)=>{var mt,st;const qt=(st=(mt=V(Ee))!==null&&mt!==void 0?mt:n.root_element)!==null&&st!==void 0?st:e;return Cr(qt)?Hn(qt.querySelectorAll(be)):[]},Ht=function(be,Ee,mt){const st=mt??this;if(Ge(be)){const qt=[];return Dl(be,(Jn,ks)=>{const Sa=V(Jn);Sa&&qt.push(Ee.call(st,Sa,ks))}),qt}else{const qt=V(be);return qt?Ee.call(st,qt):!1}},oo=(be,Ee)=>{Ht(be,mt=>{Be(Ee,(st,qt)=>{ge(mt,qt,st)})})},lo=(be,Ee)=>{Ht(be,mt=>{const st=ne.fromDom(mt);Vn(st,Ee)})},He=(be,Ee,mt,st,qt)=>Ht(be,Jn=>{const ks=q(Ee)?e.createElement(Ee):Ee;return ye(mt)&&oo(ks,mt),st&&(!q(st)&&st.nodeType?ks.appendChild(st):q(st)&&lo(ks,st)),qt?ks:Jn.appendChild(ks)}),nt=(be,Ee,mt)=>He(e.createElement(be),be,Ee,mt,!0),$t=$o.decode,Rn=$o.encodeAllRaw,$n=(be,Ee,mt="")=>{let st="<"+be;for(const qt in Ee)Zc(Ee,qt)&&(st+=" "+qt+'="'+Rn(Ee[qt])+'"');return ji(mt)&&sn(A.getVoidElements(),be)?st+" />":st+">"+mt+"</"+be+">"},mo=be=>{const Ee=e.createElement("div"),mt=e.createDocumentFragment();mt.appendChild(Ee),be&&(Ee.innerHTML=be);let st;for(;st=Ee.firstChild;)mt.appendChild(st);return mt.removeChild(Ee),mt},ql=(be,Ee)=>Ht(be,mt=>{const st=ne.fromDom(mt);return Ee&&ke(Fr(st),qt=>{Ta(qt)&&qt.dom.length===0?b(qt):Aa(st,qt)}),b(st),st.dom}),nd=be=>Ht(be,Ee=>{const mt=Ee.attributes;for(let st=mt.length-1;st>=0;st--)Ee.removeAttributeNode(mt.item(st))}),La=be=>M.parse(be),gi=(be,Ee)=>M.serialize(be,Ee),ul=be=>{if(sd!==Co.DOM&&e===document){if(o[be])return;o[be]=!0}let Ee=e.getElementById("mceDefaultStyles");if(!Ee){Ee=e.createElement("style"),Ee.id="mceDefaultStyles",Ee.type="text/css";const mt=e.head;mt.firstChild?mt.insertBefore(Ee,mt.firstChild):mt.appendChild(Ee)}Ee.styleSheet?Ee.styleSheet.cssText+=be:Ee.appendChild(e.createTextNode(be))},Ca=be=>{be||(be=""),ke(be.split(","),Ee=>{i[Ee]=!0,h.load(Ee).catch(qe)})},ei=(be,Ee,mt)=>{Ht(be,st=>{if(It(st)){const qt=ne.fromDom(st),Jn=Ee.split(" ");ke(Jn,ks=>{ye(mt)?(mt?Ko:Qr)(qt,ks):Am(qt,ks)})}})},ec=(be,Ee)=>{ei(be,Ee,!0)},om=(be,Ee)=>{ei(be,Ee,!1)},Wt=(be,Ee)=>{const mt=G(be),st=Ee.split(" ");return ye(mt)&&Tn(st,qt=>Qi(mt,qt))},Kn=be=>{Ht(be,Ee=>XS(ne.fromDom(Ee),"display"))},Os=be=>{Ht(be,Ee=>sO(ne.fromDom(Ee),"display","none"))},Xs=be=>{const Ee=G(be);return ye(Ee)&&Zi(vb(Ee,"display"),"none")},Sr=be=>(be||"mce_")+c++,Js=be=>{const Ee=G(be);return ye(Ee)?It(Ee.dom)?Ee.dom.outerHTML:os(Ee):""},fs=(be,Ee)=>{Ht(be,mt=>{It(mt)&&(mt.outerHTML=Ee)})},ms=(be,Ee)=>{const mt=V(Ee);return Ht(be,st=>{const qt=mt==null?void 0:mt.parentNode,Jn=mt==null?void 0:mt.nextSibling;return qt&&(Jn?qt.insertBefore(st,Jn):qt.appendChild(st)),st})},ti=(be,Ee,mt)=>Ht(Ee,st=>{var qt;const Jn=Ge(Ee)?be.cloneNode(!0):be;return mt&&Dl(_u(st.childNodes),ks=>{Jn.appendChild(ks)}),(qt=st.parentNode)===null||qt===void 0||qt.replaceChild(Jn,st),st}),_c=(be,Ee)=>{if(be.nodeName!==Ee.toUpperCase()){const mt=nt(Ee);return Dl(ue(be),st=>{ge(mt,st.nodeName,oe(be,st.nodeName))}),ti(mt,be,!0),mt}else return be},od=(be,Ee)=>{let mt=be;for(;mt;){let st=Ee;for(;st&&mt!==st;)st=st.parentNode;if(mt===st)break;mt=mt.parentNode}return!mt&&be.ownerDocument?be.ownerDocument.documentElement:mt},uu=(be,Ee,mt)=>bt(Ee)?Bu(A,be,{...mt,isContent:qt=>{const Jn=qt.nodeName.toLowerCase();return!!Ee[Jn]}}):Bu(A,be,mt),qp=()=>e.createRange(),Gg=(be,Ee,mt)=>{let st=qp(),qt,Jn;if(be&&Ee&&be.parentNode&&Ee.parentNode){const ks=be.parentNode;return st.setStart(ks,_m(be)),st.setEnd(Ee.parentNode,_m(Ee)),qt=st.extractContents(),st=qp(),st.setStart(Ee.parentNode,_m(Ee)+1),st.setEnd(ks,_m(be)+1),Jn=st.extractContents(),ks.insertBefore(tl(sd,qt,A),be),mt?ks.insertBefore(mt,be):ks.insertBefore(Ee,be),ks.insertBefore(tl(sd,Jn,A),be),ql(be),mt||Ee}else return},tf=(be,Ee,mt,st)=>{if(Ge(be)){let qt=be.length;const Jn=[];for(;qt--;)Jn[qt]=tf(be[qt],Ee,mt,st);return Jn}else return n.collect&&(be===e||be===r)&&y.push([be,Ee,mt,st]),R.bind(be,Ee,mt,st||sd)},tc=(be,Ee,mt)=>{if(Ge(be)){let st=be.length;const qt=[];for(;st--;)qt[st]=tc(be[st],Ee,mt);return qt}else{if(y.length>0&&(be===e||be===r)){let st=y.length;for(;st--;){const[qt,Jn,ks]=y[st];be===qt&&(!Ee||Ee===Jn)&&(!mt||mt===ks)&&R.unbind(qt,Jn,ks)}}return R.unbind(be,Ee,mt)}},nf=(be,Ee,mt)=>R.dispatch(be,Ee,mt),_0=(be,Ee,mt)=>R.dispatch(be,Ee,mt),e1=be=>{if(be&&Pu(be)){const Ee=be.getAttribute("data-mce-contenteditable");return Ee&&Ee!=="inherit"?Ee:be.contentEditable!=="inherit"?be.contentEditable:null}else return null},sd={doc:e,settings:n,win:r,files:i,stdMode:d,boxModel:g,styleSheetLoader:h,boundEvents:y,styles:M,schema:A,events:R,isBlock:Z,root:null,clone:Se,getRoot:Ue,getViewPort:et,getRect:Vt,getSize:wt,getParent:io,getParents:Pn,get:V,getNext:ds,getPrev:cr,select:pt,is:Mn,add:He,create:nt,createHTML:$n,createFragment:mo,remove:ql,setStyle:Ne,getStyle:je,setStyles:Ae,removeAllAttribs:nd,setAttrib:ge,setAttribs:oo,getAttrib:oe,getPos:Tt,parseStyle:La,serializeStyle:gi,addStyle:ul,loadCSS:Ca,addClass:ec,removeClass:om,hasClass:Wt,toggleClass:ei,show:Kn,hide:Os,isHidden:Xs,uniqueId:Sr,setHTML:lo,getOuterHTML:Js,setOuterHTML:fs,decode:$t,encode:Rn,insertAfter:ms,replace:ti,rename:_c,findCommonAncestor:od,run:Ht,getAttribs:ue,isEmpty:uu,createRng:qp,nodeIndex:_m,split:Gg,bind:tf,unbind:tc,fire:_0,dispatch:nf,getContentEditable:e1,getContentEditableParent:be=>{const Ee=Ue();let mt=null;for(let st=be;st&&st!==Ee&&(mt=e1(st),mt===null);st=st.parentNode);return mt},isEditable:be=>{if(ye(be)){const Ee=It(be)?be:be.parentElement;return ye(Ee)&&Pu(Ee)&&Cd(ne.fromDom(Ee))}else return!1},destroy:()=>{if(y.length>0){let be=y.length;for(;be--;){const[Ee,mt,st]=y[be];R.unbind(Ee,mt,st)}}Be(i,(be,Ee)=>{h.unload(Ee),delete i[Ee]})},isChildOf:(be,Ee)=>be===Ee||Ee.contains(be),dumpRng:be=>"startContainer: "+be.startContainer.nodeName+", startOffset: "+be.startOffset+", endContainer: "+be.endContainer.nodeName+", endOffset: "+be.endOffset},Kg=Ex(M,n,Ye(sd));return sd};Co.DOM=Co(document),Co.nodeIndex=_m;const FO=Co.DOM,kh=0,Tx=1,Ub=2,_O=3;class Td{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const i=FO;let c;const d=()=>{i.remove(y),c&&(c.onerror=c.onload=c=null)},g=()=>{d(),o()},h=()=>{d(),r("Failed to load script: "+n)},y=i.uniqueId();c=document.createElement("script"),c.id=y,c.type="text/javascript",c.src=ct._addCacheSuffix(n),this.settings.referrerPolicy&&i.setAttrib(c,"referrerpolicy",this.settings.referrerPolicy),c.onload=g,c.onerror=h,(document.getElementsByTagName("head")[0]||document.body).appendChild(c)})}isDone(n){return this.states[n]===Ub}markDone(n){this.states[n]=Ub}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=kh),new Promise((i,c)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:i,reject:c})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(h,y)=>{_o(o.scriptLoadedCallbacks,y).each(A=>{ke(A,M=>M[h](y))}),delete o.scriptLoadedCallbacks[y]},i=h=>{const y=Nt(h,A=>A.status==="rejected");return y.length>0?Promise.reject(Cs(y,({reason:A})=>Ge(A)?A:[A])):Promise.resolve()},c=h=>Promise.allSettled(Yt(h,y=>o.states[y]===Ub?(r("resolve",y),Promise.resolve()):o.states[y]===_O?(r("reject",y),Promise.reject(y)):(o.states[y]=Tx,o.loadScript(y).then(()=>{o.states[y]=Ub,r("resolve",y);const A=o.queue;return A.length>0?(o.queue=[],c(A).then(i)):Promise.resolve()},()=>(o.states[y]=_O,r("reject",y),Promise.reject(y)))))),d=h=>(o.loading=!0,c(h).then(y=>{o.loading=!1;const A=o.queueLoadedCallbacks.shift();return N.from(A).each(go),i(y)})),g=Gi(n);return o.loading?new Promise((h,y)=>{o.queueLoadedCallbacks.push(()=>{d(g).then(h,y)})}):d(g)}}Td.ScriptLoader=new Td;const T7=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},A7=e=>Te(e)&&sn(e,"raw"),Ax=e=>Ge(e)&&e.length>1,F1={},Zb=cs("en"),Wb=()=>_o(F1,Zb.get()),Ks={getData:()=>_t(F1,e=>({...e})),setCode:e=>{e&&Zb.set(e)},getCode:()=>Zb.get(),add:(e,n)=>{let o=F1[e];o||(F1[e]=o={});const r=Yt(Xt(n),i=>i.toLowerCase());Be(n,(i,c)=>{const d=c.toLowerCase();d!==c&&T7(r,d)?(sn(n,d)||(o[d]=i),o[c]=i):o[d]=i})},translate:e=>{const n=Wb().getOr({}),o=d=>Et(d)?Object.prototype.toString.call(d):r(d)?"":""+d,r=d=>d===""||d===null||d===void 0,i=d=>{const g=o(d);return sn(n,g)?o(n[g]):_o(n,g.toLowerCase()).map(o).getOr(g)},c=d=>d.replace(/{context:\w+}$/,"");if(r(e))return"";if(A7(e))return o(e.raw);if(Ax(e)){const d=e.slice(1),g=i(e[0]).replace(/\{([0-9]+)\}/g,(h,y)=>sn(d,y)?o(d[y]):h);return c(g)}return c(i(e))},isRtl:()=>Wb().bind(e=>_o(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>sn(F1,e)},hr=()=>{const e=[],n={},o={},r=[],i=(V,G)=>{const oe=Nt(r,ue=>ue.name===V&&ue.state===G);ke(oe,ue=>ue.resolve())},c=V=>sn(n,V),d=V=>sn(o,V),g=V=>{if(o[V])return o[V].instance},h=(V,G)=>{const oe=Ks.getCode(),ue=","+(G||"")+",";!oe||G&&ue.indexOf(","+oe+",")===-1||Td.ScriptLoader.add(n[V]+"/langs/"+oe+".js")},y=(V,G)=>{hr.languageLoad!==!1&&(c(V)?h(V,G):Z(V,"loaded").then(()=>h(V,G)))},A=(V,G)=>(e.push(G),o[V]={instance:G},i(V,"added"),G),M=V=>{delete n[V],delete o[V]},R=(V,G)=>q(G)?q(V)?{prefix:"",resource:G,suffix:""}:{prefix:V.prefix,resource:G,suffix:V.suffix}:G,_=(V,G)=>{if(n[V])return Promise.resolve();let oe=q(G)?G:G.prefix+G.resource+G.suffix;oe.indexOf("/")!==0&&oe.indexOf("://")===-1&&(oe=hr.baseURL+"/"+oe),n[V]=oe.substring(0,oe.lastIndexOf("/"));const ue=()=>(i(V,"loaded"),Promise.resolve());return o[V]?ue():Td.ScriptLoader.add(oe).then(ue)},Z=(V,G="added")=>G==="added"&&d(V)||G==="loaded"&&c(V)?Promise.resolve():new Promise(oe=>{r.push({name:V,state:G,resolve:oe})});return{items:e,urls:n,lookup:o,get:g,requireLangPack:y,add:A,remove:M,createUrl:R,load:_,waitFor:Z}};hr.languageLoad=!0,hr.baseURL="",hr.PluginManager=hr(),hr.ThemeManager=hr(),hr.ModelManager=hr();const $m=Ye("mce-annotation"),Do=Ye("data-mce-annotation"),Hm=Ye("data-mce-annotation-uid"),Mh=Ye("data-mce-annotation-active"),_1=Ye("data-mce-annotation-classes"),Vm=Ye("data-mce-annotation-attrs"),jb=e=>n=>zn(n,e),$O=(e,n)=>{const o=e.selection.getRng(),r=ne.fromDom(o.startContainer),i=ne.fromDom(e.getBody()),c=n.fold(()=>"."+$m(),h=>`[${Do()}="${h}"]`),d=Ou(r,o.startOffset).getOr(r);return bf(d,c,jb(i)).bind(h=>Oa(h,`${Hm()}`).bind(y=>Oa(h,`${Do()}`).map(A=>{const M=VO(e,y);return{uid:y,name:A,elements:M}})))},HO=e=>Ga(e)&&Qi(e,$m()),Dx=(e,n)=>vf(e,"data-mce-bogus")||dO(e,'[data-mce-bogus="all"]',jb(n)),VO=(e,n)=>{const o=ne.fromDom(e.getBody()),r=Yo(o,`[${Hm()}="${n}"]`);return Nt(r,i=>!Dx(i,o))},Mx=(e,n)=>{const o=ne.fromDom(e.getBody()),r=Yo(o,`[${Do()}="${n}"]`),i={};return ke(r,c=>{if(!Dx(c,o)){const d=Ds(c,Hm()),g=_o(i,d).getOr([]);i[d]=g.concat([c])}}),i},O7=(e,n)=>{const o=cs({}),r=()=>({listeners:[],previous:Gr()}),i=(M,R)=>{c(M,_=>(R(_),_))},c=(M,R)=>{const _=o.get(),Z=_o(_,M).getOrThunk(r),V=R(Z);_[M]=V,o.set(_)},d=(M,R,_)=>{i(M,Z=>{ke(Z.listeners,V=>V(!0,M,{uid:R,nodes:Yt(_,G=>G.dom)}))})},g=M=>{i(M,R=>{ke(R.listeners,_=>_(!1,M))})},h=(M,R)=>{ke(VO(e,M),_=>{R?mr(_,Mh(),"true"):nr(_,Mh())})},y=jc(()=>{const M=ot(n.getNames());ke(M,R=>{c(R,_=>{const Z=_.previous.get();return $O(e,N.some(R)).fold(()=>{Z.each(V=>{g(R),_.previous.clear(),h(V,!1)})},({uid:V,name:G,elements:oe})=>{Zi(Z,V)||(Z.each(ue=>h(ue,!1)),d(G,V,oe),_.previous.set(V),h(V,!0))}),{previous:_.previous,listeners:_.listeners}})})},30);return e.on("remove",()=>{y.cancel()}),e.on("NodeChange",()=>{y.throttle()}),{addListener:(M,R)=>{c(M,_=>({previous:_.previous,listeners:_.listeners.concat([R])}))}}},k7=(e,n)=>{const o=Do(),r=c=>N.from(c.attr(o)).bind(n.lookup),i=c=>{var d,g;c.attr(Hm(),null),c.attr(Do(),null),c.attr(Mh(),null);const h=N.from(c.attr(Vm())).map(R=>R.split(",")).getOr([]),y=N.from(c.attr(_1())).map(R=>R.split(",")).getOr([]);ke(h,R=>c.attr(R,null));const A=(g=(d=c.attr("class"))===null||d===void 0?void 0:d.split(" "))!==null&&g!==void 0?g:[],M=$e(A,[$m()].concat(y));c.attr("class",M.length>0?M.join(" "):null),c.attr(_1(),null),c.attr(Vm(),null)};e.serializer.addTempAttr(Mh()),e.serializer.addAttributeFilter(o,c=>{for(const d of c)r(d).each(g=>{g.persistent===!1&&(d.name==="span"?d.unwrap():i(d))})})},Af=()=>{const e={};return{register:(i,c)=>{e[i]={name:i,settings:c}},lookup:i=>_o(e,i).map(c=>c.settings),getNames:()=>Xt(e)}},Rx=(e,n,o=Le)=>{const r=new _r(e,n),i=c=>{let d;do d=r[c]();while(d&&!rt(d)&&!o(d));return N.from(d).filter(rt)};return{current:()=>N.from(r.current()).filter(rt),next:()=>i("next"),prev:()=>i("prev"),prev2:()=>i("prev2")}},$u=(e,n)=>{const o=n||(d=>e.isBlock(d)||Ts(d)||ss(d)),r=(d,g,h,y)=>{if(rt(d)){const A=y(d,g,d.data);if(A!==-1)return N.some({container:d,offset:A})}return h().bind(A=>r(A.container,A.offset,h,y))};return{backwards:(d,g,h,y)=>{const A=Rx(d,y??e.getRoot(),o);return r(d,g,()=>A.prev().map(M=>({container:M,offset:M.length})),h).getOrNull()},forwards:(d,g,h,y)=>{const A=Rx(d,y??e.getRoot(),o);return r(d,g,()=>A.next().map(M=>({container:M,offset:0})),h).getOrNull()}}},Px=["td","th"],D7=["thead","tbody","tfoot"],M7=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],zO=["li","dd","dt"],R7=["ul","ol","dl"],P7=["pre","script","textarea","style"],Rh=e=>{let n;return o=>(n=n||ze(e,tt),sn(n,so(o)))},UO=e=>so(e)==="table",zm=e=>Ga(e)&&so(e)==="br",Nx=Rh(M7),Ph=Rh(R7),Ad=Rh(zO),Ix=Rh(D7),Of=Rh(Px),Nh=Rh(P7),N7=e=>{const n=[];let o=e.dom;for(;o;)n.push(ne.fromDom(o)),o=o.lastChild;return n},Gb=e=>{const n=Yo(e,"br"),o=Nt(N7(e).slice(-1),zm);n.length===o.length&&ke(o,b)},Od=()=>{const e=ne.fromTag("br");return mr(e,"data-mce-bogus","1"),e},kf=e=>{Xi(e),_s(e,Od())},I7=(e,n)=>{xm(e).each(o=>{Tu(o).each(r=>{n.isBlock(so(e))&&zm(o)&&n.isBlock(so(r))&&b(o)})})},wr=Ir,Kb=Br,Oi=md,ZO=e=>e.insertContent(wr,{preserve_zwsp:!0}),B7=It,kd=rt,sr=e=>(kd(e)&&(e=e.parentNode),B7(e)&&e.hasAttribute("data-mce-caret")),ha=e=>kd(e)&&Kb(e.data),Ys=e=>sr(e)||ha(e),$1=e=>e.firstChild!==e.lastChild||!Ts(e.firstChild),Bx=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(wr),c=e.parentNode;if(n){const d=e.previousSibling;if(kd(d)){if(Ys(d))return d;if(Yb(d))return d.splitText(d.data.length-1)}c==null||c.insertBefore(i,e)}else{const d=e.nextSibling;if(kd(d)){if(Ys(d))return d;if(Ih(d))return d.splitText(1),d}e.nextSibling?c==null||c.insertBefore(i,e.nextSibling):c==null||c.appendChild(i)}return i},Lx=e=>{const n=e.container();return rt(n)?n.data.charAt(e.offset())===wr||e.isAtStart()&&ha(n.previousSibling):!1},H1=e=>{const n=e.container();return rt(n)?n.data.charAt(e.offset()-1)===wr||e.isAtEnd()&&ha(n.nextSibling):!1},L7=(e,n,o)=>{var r;const c=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);c.setAttribute("data-mce-caret",o?"before":"after"),c.setAttribute("data-mce-bogus","all"),c.appendChild(Od().dom);const d=n.parentNode;return o?d==null||d.insertBefore(c,n):n.nextSibling?d==null||d.insertBefore(c,n.nextSibling):d==null||d.appendChild(c),c},Ih=e=>kd(e)&&e.data[0]===wr,Yb=e=>kd(e)&&e.data[e.data.length-1]===wr,Fx=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Dm(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},Xb=e=>e&&e.hasAttribute("data-mce-caret")?(Fx(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,_x=e=>sr(e.startContainer),Df=Math.round,Dd=e=>e?{left:Df(e.left),top:Df(e.top),bottom:Df(e.bottom),right:Df(e.right),width:Df(e.width),height:Df(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Po=(e,n)=>(e=Dd(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Mf=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,$x=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,Bh=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:$x(n.top-e.bottom,e,n)},Lh=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:$x(n.bottom-e.top,e,n),Hx=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,WO=e=>ts(e,(n,o)=>n.fold(()=>N.some(o),r=>{const i=Math.min(o.left,r.left),c=Math.min(o.top,r.top),d=Math.max(o.right,r.right),g=Math.max(o.bottom,r.bottom);return N.some({top:c,right:d,bottom:g,left:i,width:d-i,height:g-c})}),N.none()),Jb=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),i=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-i)*(o-i))},F7=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Qb=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},pa=(e,n)=>{if(It(e)&&e.hasChildNodes()){const o=e.childNodes,r=eh(n,0,o.length-1);return o[r]}else return e},qb=(e,n)=>{if(!(n<0&&It(e)&&e.hasChildNodes()))return pa(e,n)},na=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Md=e=>q(e)&&e.charCodeAt(0)>=768&&na.test(e),_7=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},$7=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},jO=gc,ey=ss,Vx=Ts,zx=rt,Ux=Al(["script","style","textarea"]),Zx=Al(["img","input","textarea","hr","iframe","video","audio","object","embed"]),GO=Al(["table"]),KO=Ys,xc=e=>KO(e)?!1:zx(e)?!Ux(e.parentNode):Zx(e)||Vx(e)||GO(e)||Er(e),H7=e=>It(e)&&e.getAttribute("unselectable")==="true",Er=e=>!H7(e)&&ey(e),V7=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Er(o))return!1;if(jO(o))return!0}return!0},Rf=e=>Er(e)?!ts(Hn(e.getElementsByTagName("*")),(n,o)=>n||jO(o),!1):!1,YO=e=>Zx(e)||Rf(e),Wx=(e,n)=>xc(e)&&V7(e,n),jx=It,Gx=xc,ty=kb("display","block table"),XO=kb("float","left right"),V1=$7(jx,Gx,Kt(XO)),z7=Kt(kb("white-space","pre pre-line pre-wrap")),Ms=rt,zs=Ts,Hr=Co.nodeIndex,pr=qb,rr=e=>e?e.createRange():Co.DOM.createRng(),Us=e=>q(e)&&/[\r\n\t ]/.test(e),ny=e=>!!e.setStart&&!!e.setEnd,z1=e=>{const n=e.startContainer,o=e.startOffset;if(Us(e.toString())&&z7(n.parentNode)&&rt(n)){const r=n.data;if(Us(r[o-1])||Us(r[o+1]))return!0}return!1},JO=e=>{const n=e.ownerDocument,o=rr(n),r=n.createTextNode(Uo),i=e.parentNode;i.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const c=Dd(o.getBoundingClientRect());return i.removeChild(r),c},QO=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,i=e.endOffset;if(n===o&&rt(o)&&r===0&&i===1){const c=e.cloneRange();return c.setEndAfter(o),Rd(c)}else return null},Kx=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Rd=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Dd(r[0]):o=Dd(e.getBoundingClientRect()),!ny(e)&&zs(e)&&Kx(o)?JO(e):Kx(o)&&ny(e)&&(n=QO(e))!==null&&n!==void 0?n:o},Pd=(e,n)=>{const o=Po(e,n);return o.width=1,o.right=o.left+1,o},Yx=e=>{const n=[],o=d=>{d.height!==0&&(n.length>0&&Mf(d,n[n.length-1])||n.push(d))},r=(d,g)=>{const h=rr(d.ownerDocument);if(g<d.data.length){if(Md(d.data[g]))return;if(Md(d.data[g-1])&&(h.setStart(d,g),h.setEnd(d,g+1),!z1(h))){o(Pd(Rd(h),!1));return}}g>0&&(h.setStart(d,g-1),h.setEnd(d,g),z1(h)||o(Pd(Rd(h),!1))),g<d.data.length&&(h.setStart(d,g),h.setEnd(d,g+1),z1(h)||o(Pd(Rd(h),!0)))},i=e.container(),c=e.offset();if(Ms(i))return r(i,c),n;if(jx(i))if(e.isAtEnd()){const d=pr(i,c);Ms(d)&&r(d,d.data.length),V1(d)&&!zs(d)&&o(Pd(Rd(d),!1))}else{const d=pr(i,c);if(Ms(d)&&r(d,0),V1(d)&&e.isAtEnd())return o(Pd(Rd(d),!1)),n;const g=pr(e.container(),e.offset()-1);V1(g)&&!zs(g)&&(ty(g)||ty(d)||!V1(d))&&o(Pd(Rd(g),!1)),V1(d)&&o(Pd(Rd(d),!0))}return n},Ie=(e,n,o)=>{const r=()=>(Ms(e),n===0),i=()=>Ms(e)?n>=e.data.length:n>=e.childNodes.length,c=()=>{const A=rr(e.ownerDocument);return A.setStart(e,n),A.setEnd(e,n),A},d=()=>(o||(o=Yx(Ie(e,n))),o),g=()=>d().length>0,h=A=>A&&e===A.container()&&n===A.offset(),y=A=>pr(e,A?n-1:n);return{container:Ye(e),offset:Ye(n),toRange:c,getClientRects:d,isVisible:g,isAtStart:r,isAtEnd:i,isEqual:h,getNode:y}};Ie.fromRangeStart=e=>Ie(e.startContainer,e.startOffset),Ie.fromRangeEnd=e=>Ie(e.endContainer,e.endOffset),Ie.after=e=>Ie(e.parentNode,Hr(e)+1),Ie.before=e=>Ie(e.parentNode,Hr(e)),Ie.isAbove=(e,n)=>Zs(an(n.getClientRects()),An(e.getClientRects()),Bh).getOr(!1),Ie.isBelow=(e,n)=>Zs(An(n.getClientRects()),an(e.getClientRects()),Lh).getOr(!1),Ie.isAtStart=e=>e?e.isAtStart():!1,Ie.isAtEnd=e=>e?e.isAtEnd():!1,Ie.isTextPosition=e=>e?rt(e.container()):!1,Ie.isElementPosition=e=>!Ie.isTextPosition(e);const oy=(e,n)=>{rt(n)&&n.data.length===0&&e.remove(n)},qO=(e,n,o)=>{n.insertNode(o),oy(e,o.previousSibling),oy(e,o.nextSibling)},U7=(e,n,o)=>{const r=N.from(o.firstChild),i=N.from(o.lastChild);n.insertNode(o),r.each(c=>oy(e,c.previousSibling)),i.each(c=>oy(e,c.nextSibling))},Hu=(e,n,o)=>{Mm(o)?U7(e,n,o):qO(e,n,o)},Ml=rt,Xx=Dm,sy=Co.nodeIndex,ry=e=>{const n=e.parentNode;return Xx(n)?ry(n):n},U1=e=>e?ko(e.childNodes,(n,o)=>(Xx(o)&&o.nodeName!=="BR"?n=n.concat(U1(o)):n.push(o),n),[]):[],ek=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&Ml(o);)n+=o.data.length;return n},Z1=e=>n=>e===n,ay=e=>{let n,o;n=U1(ry(e)),o=Go(n,Z1(e),e),n=n.slice(0,o+1);const r=ko(n,(i,c,d)=>(Ml(c)&&Ml(n[d-1])&&i++,i),0);return n=we(n,Al([e.nodeName])),o=Go(n,Z1(e),e),o-r},Fh=e=>(Ml(e)?"text()":e.nodeName.toLowerCase())+"["+ay(e)+"]",W1=(e,n,o)=>{const r=[];for(let i=n.parentNode;i&&i!==e;i=i.parentNode)r.push(i);return r},Rl=(e,n)=>{let o=[],r=n.container(),i=n.offset(),c;if(Ml(r))c=ek(r,i);else{const g=r.childNodes;i>=g.length?(c="after",i=g.length-1):c="before",r=g[i]}o.push(Fh(r));let d=W1(e,r);return d=we(d,Kt(Dm)),o=o.concat(sc(d,g=>Fh(g))),o.reverse().join("/")+","+c},j1=(e,n,o)=>{let r=U1(e);return r=we(r,(i,c)=>!Ml(i)||!Ml(r[c-1])),r=we(r,Al([n])),r[o]},tk=(e,n)=>{let o=e,r=0;for(;Ml(o);){const i=o.data.length;if(n>=r&&n<=r+i){e=o,n=n-r;break}if(!Ml(o.nextSibling)){e=o,n=i;break}r+=i,o=o.nextSibling}return Ml(e)&&n>e.data.length&&(n=e.data.length),Ie(e,n)},Jx=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),i=o.length>1?o[1]:"before",c=ko(r,(d,g)=>{const h=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(g);return h?(h[1]==="text()"&&(h[1]="#text"),j1(d,h[1],parseInt(h[2],10))):null},e);if(!c)return null;if(!Ml(c)&&c.parentNode){let d;return i==="after"?d=sy(c)+1:d=sy(c),Ie(c.parentNode,d)}return tk(c,parseInt(i,10))},iy=ss,nk=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let i=n.previousSibling;i&&rt(i);i=i.previousSibling)r+=e(i.data).length;return r},ok=(e,n,o,r,i)=>{const c=i?r.startContainer:r.endContainer;let d=i?r.startOffset:r.endOffset;const g=[],h=e.getRoot();if(rt(c))g.push(o?nk(n,c,d):d);else{let y=0;const A=c.childNodes;d>=A.length&&A.length&&(y=1,d=Math.max(0,A.length-1)),g.push(e.nodeIndex(A[d],o)+y)}for(let y=c;y&&y!==h;y=y.parentNode)g.push(e.nodeIndex(y,o));return g},Z7=(e,n,o,r)=>{const i=n.dom,c=ok(i,e,o,r,!0),d=n.isForward(),g=_x(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:c,forward:d,...g};{const h=ok(i,e,o,r,!1);return{start:c,end:h,forward:d,...g}}},ly=(e,n,o)=>{let r=0;return ct.each(e.select(n),i=>{if(i.getAttribute("data-mce-bogus")!=="all"){if(i===o)return!1;r++;return}}),r},Qx=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(It(o)&&o.nodeName==="TR"){const i=o.childNodes;o=i[Math.min(n?r:r-1,i.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},Um=e=>(Qx(e,!0),Qx(e,!1),e),cy=(e,n)=>{if(It(e)&&(e=pa(e,n),iy(e)))return e;if(Ys(e)){rt(e)&&sr(e)&&(e=e.parentNode);let o=e.previousSibling;if(iy(o)||(o=e.nextSibling,iy(o)))return o}},Nd=e=>cy(e.startContainer,e.startOffset)||cy(e.endContainer,e.endOffset),uy=(e,n,o)=>{const r=o.getNode(),i=o.getRng();if(r.nodeName==="IMG"||iy(r)){const d=r.nodeName;return{name:d,index:ly(o.dom,d,r)}}const c=Nd(i);if(c){const d=c.tagName;return{name:d,index:ly(o.dom,d,c)}}return Z7(e,o,n,i)},W7=e=>{const n=e.getRng();return{start:Rl(e.dom.getRoot(),Ie.fromRangeStart(n)),end:Rl(e.dom.getRoot(),Ie.fromRangeEnd(n)),forward:e.isForward()}},Ka=e=>({rng:e.getRng(),forward:e.isForward()}),wc=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},ki=(e,n)=>{const o=e.dom;let r=e.getRng();const i=o.uniqueId(),c=e.isCollapsed(),d=e.getNode(),g=d.nodeName,h=e.isForward();if(g==="IMG")return{name:g,index:ly(o,g,d)};const y=Um(r.cloneRange());if(!c){y.collapse(!1);const M=wc(o,i+"_end",n);Hu(o,y,M)}r=Um(r),r.collapse(!0);const A=wc(o,i+"_start",n);return Hu(o,r,A),e.moveToBookmark({id:i,keep:!0,forward:h}),{id:i,forward:h}},j7=(e,n,o=!1)=>n===2?uy(Oi,o,e):n===3?W7(e):n?Ka(e):ki(e,!1),Pf=ut(uy,Qn,!0),G7=e=>e.type==="inline-command"||e.type==="inline-format",K7=e=>e.type==="block-command"||e.type==="block-format",Y7=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,X7=e=>{var n;const o=i=>dr.error({message:i,pattern:e}),r=(i,c,d)=>{if(e.format!==void 0){let g;if(Ge(e.format)){if(!Tn(e.format,q))return o(i+" pattern has non-string items in the `format` array");g=e.format}else if(q(e.format))g=[e.format];else return o(i+" pattern has non-string `format` parameter");return dr.value(c(g))}else return e.cmd!==void 0?q(e.cmd)?dr.value(d(e.cmd,e.value)):o(i+" pattern has non-string `cmd` parameter"):o(i+" pattern is missing both `format` and `cmd` parameters")};if(!Te(e))return o("Raw pattern is not an object");if(!q(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!q(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let i=e.start,c=e.end;return c.length===0&&(c=i,i=""),r("Inline",d=>({type:"inline-format",start:i,end:c,format:d}),(d,g)=>({type:"inline-command",start:i,end:c,cmd:d,value:g}))}else{if(e.replacement!==void 0)return q(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):dr.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const i=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",c=>({type:"block-format",start:e.start,format:c[0],trigger:i}),(c,d)=>({type:"block-command",start:e.start,cmd:c,value:d,trigger:i}))}}},Un=e=>Nt(e,K7),Zt=e=>Nt(e,G7),Zm=(e,n)=>({inlinePatterns:Zt(e),blockPatterns:Un(e),dynamicPatternsLookup:n}),G1=(e,n)=>({...e,blockPatterns:Nt(e.blockPatterns,o=>Y7(o,n))}),dy=e=>{const n=dm(Yt(e,X7));return ke(n.errors,o=>console.error(o.message,o.pattern)),n.values},J7=e=>n=>{const o=e(n);return dy(o)},sk=(e,n)=>e.dispatch("PreProcess",n),Xo=(e,n)=>e.dispatch("PostProcess",n),rk=e=>{e.dispatch("remove")},Q7=e=>{e.dispatch("detach")},q7=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},Fe=(e,n,o,r,i)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:i})},qx=(e,n,o,r,i)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:i})},eL=e=>{e.dispatch("PreInit")},fy=e=>{e.dispatch("PostRender")},tL=e=>{e.dispatch("Init")},_h=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},my=(e,n,o)=>{e.dispatch(n,o)},Nf=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},ak=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},$h=(e,n)=>e.dispatch("BeforeSetContent",n),Ho=(e,n)=>e.dispatch("SetContent",n),qc=(e,n)=>e.dispatch("BeforeGetContent",n),ew=(e,n)=>e.dispatch("GetContent",n),Id=(e,n)=>{e.dispatch("AutocompleterStart",n)},Ec=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},tw=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},nL=e=>{e.dispatch("AutocompleterEnd")},nw=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),oL=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),ik=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),sL=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),rL=(e,n)=>e.dispatch("DisabledStateChange",{state:n}),gy=ca().deviceType,Qe=gy.isTouch(),aL=Co.DOM,Vr=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return ts(n,(o,r)=>{const i=r.split("="),c=i[0],d=i.length>1?i[1]:c;return o[Wi(c)]=Wi(d),o},{})},lk=e=>he(e,RegExp),At=e=>n=>n.options.get(e),hy=e=>q(e)||Te(e),ck=(e,n="")=>o=>{const r=q(o);if(r)if(o.indexOf("=")!==-1){const i=Vr(o);return{value:_o(i,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},un=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:ck(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:ck(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=q(o)&&Gn(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=Ft(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>lt(o)?{valid:!0,value:o}:q(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||q(o)||at(o,q);return r?q(o)?{value:Yt(o.split(","),Wi),valid:r}:Ge(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:ro(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=q(o)||at(o,q);return r?{value:Ge(o)?o:Yt(o.split(","),Wi),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("extended_mathml_attributes",{processor:"string[]"}),n("extended_mathml_elements",{processor:"string[]"}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=lt(o)||q(o);return r?o===!1||gy.isiPhone()||gy.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!Qe}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("onboarding",{processor:"boolean",default:!0}),n("tiny_cloud_entry_url",{processor:"string"}),n("theme",{processor:o=>o===!1||q(o)||Et(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||q(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("disabled",{processor:o=>lt(o)?(e.initialized&&jh(e)!==o&&Promise.resolve().then(()=>{rL(e,o)}),{valid:!0,value:o}):{valid:!1,message:"The value must be a boolean."},default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(e.hasPlugin("help")?". Press ALT-0 for help.":"")}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:o=>{const r=at(o,q);return r?{value:o,valid:r}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:hy}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:hy}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:hy}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:hy}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>q(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>at(o,Te)||o===!1?{value:dy(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>Et(o)?{value:J7(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>at(o,lk)?{value:o,valid:!0}:lk(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=Ft(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=Ft(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Ks.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:aL.getAttrib(e.getElement(),"placeholder")})})},iL=At("iframe_attrs"),uk=At("doctype"),lL=At("document_base_url"),YK=At("body_id"),cL=At("body_class"),uL=At("content_security_policy"),XK=At("br_in_pre"),Ra=At("forced_root_block"),K1=At("forced_root_block_attrs"),on=At("newline_behavior"),dL=At("br_newline_selector"),Bd=At("no_newline_selector"),Vu=At("keep_styles"),py=At("end_container_on_empty_block"),li=At("automatic_uploads"),Y1=At("images_reuse_filename"),X1=At("images_replace_blob_uris"),J1=At("icons"),Hh=At("icons_url"),fL=At("images_upload_url"),mL=At("images_upload_base_path"),gL=At("images_upload_credentials"),hL=At("images_upload_handler"),Yn=At("content_css_cors"),Pl=At("referrer_policy"),If=At("language"),pL=At("language_url"),Vh=At("indent_use_margin"),no=At("indentation"),vL=At("content_css"),dk=At("content_style"),fk=At("font_css"),bL=At("directionality"),Q1=At("inline_boundaries_selector"),mk=At("object_resizing"),yL=At("resize_img_proportional"),CL=At("placeholder"),gk=At("event_root"),ow=At("service_message"),zh=At("theme"),SL=At("theme_url"),vy=At("model"),hk=At("model_url"),Uh=At("inline_boundaries"),xL=At("formats"),wL=At("preview_styles"),pk=At("format_empty_lines"),EL=At("format_noneditable_selector"),TL=At("custom_ui_selector"),ro=At("inline"),vk=At("hidden_input"),sw=At("submit_patch"),AL=At("add_form_submit_trigger"),Wm=At("add_unload_trigger"),bk=At("custom_undo_redo_levels"),OL=At("disable_nodechange"),yk=At("readonly"),Zh=At("editable_root"),Ck=At("content_css_cors"),Bf=At("plugins"),Wh=At("external_plugins"),kL=At("block_unsupported_drop"),Sk=At("visual"),DL=At("visual_table_class"),xk=At("visual_anchor_class"),wk=At("iframe_aria_text"),Ek=At("setup"),JK=At("init_instance_callback"),ML=At("urlconverter_callback"),Tk=At("auto_focus"),rw=At("browser_spellcheck"),aw=At("protect"),iw=At("paste_block_drop"),q1=At("paste_data_images"),Ak=At("paste_preprocess"),Ok=At("paste_postprocess"),by=At("newdocument_content"),RL=At("paste_webkit_styles"),kk=At("paste_remove_styles_if_webkit"),Dk=At("paste_merge_formats"),Mk=At("smart_paste"),Rk=At("paste_as_text"),Pk=At("paste_tab_spaces"),PL=At("allow_html_data_urls"),NL=At("text_patterns"),IL=At("text_patterns_lookup"),Nk=At("noneditable_class"),BL=At("editable_class"),LL=At("noneditable_regexp"),FL=At("preserve_cdata"),_L=At("highlight_on_focus"),ev=At("xss_sanitization"),Ik=At("init_content_sync"),$L=e=>e.options.isSet("text_patterns_lookup"),Bk=e=>ct.explode(e.options.get("font_size_style_values")),Lk=e=>ct.explode(e.options.get("font_size_classes")),HL=e=>e.options.get("encoding")==="xml",Fk=e=>ct.explode(e.options.get("images_file_types")),VL=At("table_tab_navigation"),zL=At("details_initial_state"),UL=At("details_serialized_state"),lw=At("sandbox_iframes"),yy=e=>e.options.get("sandbox_iframes_exclusions"),Cy=At("convert_unsafe_embeds"),ZL=At("license_key"),WL=At("api_key"),jh=At("disabled"),jL=It,cw=rt,uw=e=>{const n=e.parentNode;n&&n.removeChild(e)},dw=e=>{const n=Oi(e);return{count:e.length-n.length,text:n}},_k=e=>{let n;for(;(n=e.data.lastIndexOf(wr))!==-1;)e.deleteData(n,1)},$k=(e,n)=>(Lf(e),n),GL=(e,n)=>{const o=dw(e.data.substr(0,n.offset())),r=dw(e.data.substr(n.offset()));return(o.text+r.text).length>0?(_k(e),Ie(e,n.offset()-o.count)):n},KL=(e,n)=>{const o=n.container(),r=Bs(Hn(o.childNodes),e).map(i=>i<n.offset()?Ie(o,n.offset()-1):n).getOr(n);return Lf(e),r},Sy=(e,n)=>cw(e)&&n.container()===e?GL(e,n):$k(e,n),Hk=(e,n)=>n.container()===e.parentNode?KL(e,n):$k(e,n),Vk=(e,n)=>Ie.isTextPosition(n)?Sy(e,n):Hk(e,n),Lf=e=>{jL(e)&&Ys(e)&&($1(e)?e.removeAttribute("data-mce-caret"):uw(e)),cw(e)&&(_k(e),e.data.length===0&&uw(e))},zk=ss,YL=Ol,XL=k1,JL="*[contentEditable=false],video,audio,embed,object",Uk=(e,n,o)=>{const r=Po(n.getBoundingClientRect(),o);let i,c;if(e.tagName==="BODY"){const g=e.ownerDocument.documentElement;i=e.scrollLeft||g.scrollLeft,c=e.scrollTop||g.scrollTop}else{const g=e.getBoundingClientRect();i=e.scrollLeft-g.left,c=e.scrollTop-g.top}r.left+=i,r.right+=i,r.top+=c,r.bottom+=c,r.width=1;let d=n.offsetWidth-n.clientWidth;return d>0&&(o&&(d*=-1),r.left+=d,r.right+=d),r},QL=e=>{var n,o;const r=Yo(ne.fromDom(e),JL);for(let i=0;i<r.length;i++){const c=r[i].dom;let d=c.previousSibling;if(Yb(d)){const g=d.data;g.length===1?(n=d.parentNode)===null||n===void 0||n.removeChild(d):d.deleteData(g.length-1,1)}d=c.nextSibling,Ih(d)&&(d.data.length===1?(o=d.parentNode)===null||o===void 0||o.removeChild(d):d.deleteData(0,1))}},qL=(e,n,o,r)=>{const i=Gr();let c,d;const g=Ra(e),h=e.dom,y=(V,G)=>{let oe;if(A(),XL(G))return null;if(o(G)){const ue=L7(g,G,V),ge=Uk(n,G,V);h.setStyle(ue,"top",ge.top),h.setStyle(ue,"caret-color","transparent"),d=ue;const Se=h.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});h.setStyles(Se,{...ge}),h.add(n,Se),i.set({caret:Se,element:G,before:V}),V&&h.addClass(Se,"mce-visual-caret-before"),M(),oe=G.ownerDocument.createRange(),oe.setStart(ue,0),oe.setEnd(ue,0)}else return d=Bx(G,V),oe=G.ownerDocument.createRange(),tv(d.nextSibling)?(oe.setStart(d,0),oe.setEnd(d,0)):(oe.setStart(d,1),oe.setEnd(d,1)),oe;return oe},A=()=>{QL(n),d&&(Lf(d),d=null),i.on(V=>{h.remove(V.caret),i.clear()}),c&&(clearInterval(c),c=void 0)},M=()=>{c=window.setInterval(()=>{i.on(V=>{r()?h.toggleClass(V.caret,"mce-visual-caret-hidden"):h.addClass(V.caret,"mce-visual-caret-hidden")})},500)},R=()=>{i.on(V=>{const G=Uk(n,V.element,V.before);h.setStyles(V.caret,{...G})})},_=()=>clearInterval(c),Z=()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}";return{isShowing:i.isSet,show:y,hide:A,getCss:Z,reposition:R,destroy:_}},Zk=()=>eo.browser.isFirefox(),tv=e=>zk(e)||YL(e),nv=e=>(tv(e)||Nu(e)&&Zk())&&Sm(ne.fromDom(e)).exists(Cd),eF=gc,fw=ss,tF=Ol,ov=kb("display","block table table-cell table-row table-caption list-item"),mw=Ys,gw=sr,nF=It,oF=rt,sF=xc,Gh=e=>e===1,jm=e=>e===-1,xy=(e,n)=>{let o;for(;o=e(n);)if(!gw(o))return o;return null},Kh=(e,n,o,r,i)=>{const c=new _r(e,r),d=fw(e)||gw(e);let g;if(jm(n)){if(d&&(g=xy(c.prev.bind(c),!0),o(g)))return g;for(;g=xy(c.prev.bind(c),i);)if(o(g))return g}if(Gh(n)){if(d&&(g=xy(c.next.bind(c),!0),o(g)))return g;for(;g=xy(c.next.bind(c),i);)if(o(g))return g}return null},rF=(e,n)=>{const o=i=>eF(i.dom),r=i=>i.dom===n;return bd(ne.fromDom(e),o,r).map(i=>i.dom).getOr(n)},Ld=(e,n)=>{for(;e&&e!==n;){if(ov(e))return e;e=e.parentNode}return null},eu=(e,n,o)=>Ld(e.container(),o)===Ld(n.container(),o),hw=(e,n)=>{if(!n)return N.none();const o=n.container(),r=n.offset();return nF(o)?N.from(o.childNodes[r+e]):N.none()},Wk=(e,n)=>{var o;const i=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),i},aF=(e,n,o)=>Ld(n,e)===Ld(o,e),jk=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let i=o;for(;i&&i!==n;){let c=i[r];if(c&&mw(c)&&(c=c[r]),fw(c)||tF(c)){if(aF(n,c,i))return c;break}if(sF(c))break;i=i.parentNode}return null},sv=ut(Wk,!0),rv=ut(Wk,!1),pw=(e,n,o)=>{let r;const i=ut(jk,!0,n),c=ut(jk,!1,n),d=o.startContainer,g=o.startOffset;if(sr(d)){const h=oF(d)?d.parentNode:d,y=h.getAttribute("data-mce-caret");if(y==="before"&&(r=h.nextSibling,nv(r)))return sv(r);if(y==="after"&&(r=h.previousSibling,nv(r)))return rv(r)}if(!o.collapsed)return o;if(rt(d)){if(mw(d)){if(e===1){if(r=c(d),r)return sv(r);if(r=i(d),r)return rv(r)}if(e===-1){if(r=i(d),r)return rv(r);if(r=c(d),r)return sv(r)}return o}if(Yb(d)&&g>=d.data.length-1)return e===1&&(r=c(d),r)?sv(r):o;if(Ih(d)&&g<=1)return e===-1&&(r=i(d),r)?rv(r):o;if(g===d.data.length)return r=c(d),r?sv(r):o;if(g===0)return r=i(d),r?rv(r):o}return o},Gk=(e,n)=>hw(e?0:-1,n).filter(fw),av=(e,n,o)=>{const r=pw(e,n,o);return e===-1?Ie.fromRangeStart(r):Ie.fromRangeEnd(r)},wy=e=>N.from(e.getNode()).map(ne.fromDom),iF=e=>N.from(e.getNode(!0)).map(ne.fromDom),vw=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},Ey=(e,n)=>{const o=eu(e,n);return!o&&Ts(e.getNode())?!0:o},lF=ss,zu=rt,Kk=It,bw=Ts,Yh=xc,Yk=YO,Pt=Wx,Ty=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},yw=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Xk=(e,n)=>{if(Gh(e)){if(Yh(n.previousSibling)&&!zu(n.previousSibling))return Ie.before(n);if(zu(n))return Ie(n,0)}if(jm(e)){if(Yh(n.nextSibling)&&!zu(n.nextSibling))return Ie.after(n);if(zu(n))return Ie(n,n.data.length)}return jm(e)?bw(n)?Ie.before(n):Ie.after(n):Ie.before(n)},Jk=(e,n)=>{const o=n.nextSibling;return o&&Yh(o)?zu(o)?Ie(o,0):Ie.before(o):Xh(1,Ie.after(n),e)},Xh=(e,n,o)=>{let r,i,c,d;if(!Kk(o)||!n)return null;if(n.isEqual(Ie.after(o))&&o.lastChild){if(d=Ie.after(o.lastChild),jm(e)&&Yh(o.lastChild)&&Kk(o.lastChild))return bw(o.lastChild)?Ie.before(o.lastChild):d}else d=n;const g=d.container();let h=d.offset();if(zu(g)){if(jm(e)&&h>0)return Ie(g,--h);if(Gh(e)&&h<g.length)return Ie(g,++h);r=g}else{if(jm(e)&&h>0&&(i=yw(g,h-1),Yh(i)))return!Yk(i)&&(c=Kh(i,e,Pt,i),c)?zu(c)?Ie(c,c.data.length):Ie.after(c):zu(i)?Ie(i,i.data.length):Ie.before(i);if(Gh(e)&&h<g.childNodes.length&&(i=yw(g,h),Yh(i)))return bw(i)?Jk(o,i):!Yk(i)&&(c=Kh(i,e,Pt,i),c)?zu(c)?Ie(c,0):Ie.before(c):zu(i)?Ie(i,0):Ie.after(i);r=i||d.getNode()}if(r&&(Gh(e)&&d.isAtEnd()||jm(e)&&d.isAtStart())&&(r=Kh(r,e,tt,o,!0),Pt(r,o)))return Xk(e,r);i=r&&Kh(r,e,Pt,o);const y=Mo(Nt(Ty(g,o),lF));return y&&(!i||!y.contains(i))?(Gh(e)?d=Ie.after(y):d=Ie.before(y),d):i?Xk(e,i):null},Tc=e=>({next:n=>Xh(1,n,e),prev:n=>Xh(-1,n,e)}),iv=(e,n,o)=>{const r=e?Ie.before(o):Ie.after(o);return Nl(e,n,r)},lv=e=>Ts(e)?Ie.before(e):Ie.after(e),Cw=e=>Ie.isTextPosition(e)?e.offset()===0:xc(e.getNode()),Ay=e=>{if(Ie.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return xc(e.getNode(!0))},Sw=(e,n)=>!Ie.isTextPosition(e)&&!Ie.isTextPosition(n)&&e.getNode()===n.getNode(!0),cF=e=>!Ie.isTextPosition(e)&&Ts(e.getNode()),uF=(e,n,o)=>e?!Sw(n,o)&&!cF(n)&&Ay(n)&&Cw(o):!Sw(o,n)&&Cw(n)&&Ay(o),Nl=(e,n,o)=>{const r=Tc(n);return N.from(e?r.next(o):r.prev(o))},Ac=(e,n,o)=>Nl(e,n,o).bind(r=>eu(o,r,n)&&uF(e,o,r)?Nl(e,n,r):N.some(r)),xw=(e,n,o,r)=>Ac(e,n,o).bind(i=>r(i)?xw(e,n,i,r):N.some(i)),Gm=(e,n)=>{const o=e?n.firstChild:n.lastChild;return rt(o)?N.some(Ie(o,e?0:o.data.length)):o?xc(o)?N.some(e?Ie.before(o):lv(o)):iv(e,n,o):N.none()},ar=ut(Nl,!0),ci=ut(Nl,!1),oa=ut(Gm,!0),Di=ut(Gm,!1),Oy="_mce_caret",Il=e=>It(e)&&e.id===Oy,Km=(e,n)=>{let o=n;for(;o&&o!==e;){if(Il(o))return o;o=o.parentNode}return null},Qk=e=>q(e.start),qk=e=>sn(e,"rng"),eD=e=>sn(e,"id"),tD=e=>sn(e,"name"),nD=e=>ct.isArray(e.start),Jh=e=>!tD(e)&&lt(e.forward)?e.forward:!0,ww=(e,n)=>(It(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),oD=(e,n)=>{const o=N.from(Jx(e.getRoot(),n.start)),r=N.from(Jx(e.getRoot(),n.end));return Zs(o,r,(i,c)=>{const d=e.createRng();return d.setStart(i.container(),i.offset()),d.setEnd(c.container(),c.offset()),{range:d,forward:Jh(n)}})},dF=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(wr);e.appendChild(i),n.setStart(i,0),n.setEnd(i,0)},Ew=e=>!e.hasChildNodes(),fF=(e,n)=>Di(e).fold(Le,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),sD=(e,n,o)=>Ew(n)&&Km(e,n)?(dF(n,o),!0):!1,rD=(e,n,o,r)=>{const i=o[n?"start":"end"],c=e.getRoot();if(i){let d=c,g=i[0];for(let h=i.length-1;d&&h>=1;h--){const y=d.childNodes;if(sD(c,d,r))return!0;if(i[h]>y.length-1)return sD(c,d,r)?!0:fF(d,r);d=y[i[h]]}rt(d)&&(g=Math.min(i[0],d.data.length)),It(d)&&(g=Math.min(i[0],d.childNodes.length)),n?r.setStart(d,g):r.setEnd(d,g)}return!0},Tw=e=>rt(e)&&e.data.length>0,aD=(e,n,o)=>{const r=e.get(o.id+"_"+n),i=r==null?void 0:r.parentNode,c=o.keep;if(r&&i){let d,g;if(n==="start"?c?r.hasChildNodes()?(d=r.firstChild,g=1):Tw(r.nextSibling)?(d=r.nextSibling,g=0):Tw(r.previousSibling)?(d=r.previousSibling,g=r.previousSibling.data.length):(d=i,g=e.nodeIndex(r)+1):(d=i,g=e.nodeIndex(r)):c?r.hasChildNodes()?(d=r.firstChild,g=1):Tw(r.previousSibling)?(d=r.previousSibling,g=r.previousSibling.data.length):(d=i,g=e.nodeIndex(r)):(d=i,g=e.nodeIndex(r)),!c){const h=r.previousSibling,y=r.nextSibling;ct.each(ct.grep(r.childNodes),M=>{rt(M)&&(M.data=M.data.replace(/\uFEFF/g,""))});let A;for(;A=e.get(o.id+"_"+n);)e.remove(A,!0);if(rt(y)&&rt(h)&&!eo.browser.isOpera()){const M=h.data.length;h.appendData(y.data),e.remove(y),d=h,g=M}}return N.some(Ie(d,g))}else return N.none()},ky=(e,n)=>{const o=e.createRng();return rD(e,!0,n,o)&&rD(e,!1,n,o)?N.some({range:o,forward:Jh(n)}):N.none()},iD=(e,n)=>{const o=aD(e,"start",n),r=aD(e,"end",n);return Zs(o,r.or(o),(i,c)=>{const d=e.createRng();return d.setStart(ww(e,i.container()),i.offset()),d.setEnd(ww(e,c.container()),c.offset()),{range:d,forward:Jh(n)}})},QK=(e,n)=>N.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),mF=(e,n)=>{const o=e.dom;if(n){if(nD(n))return ky(o,n);if(Qk(n))return oD(o,n);if(eD(n))return iD(o,n);if(tD(n))return QK(o,n);if(qk(n))return N.some({range:n.rng,forward:Jh(n)})}return N.none()},fn=(e,n,o)=>j7(e,n,o),gF=(e,n)=>{mF(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},Bl=e=>It(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Dy=(e=>n=>e===n)(Uo),Ym=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Aw=e=>!Ym(e)&&!Dy(e)&&!Br(e),My=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},hF=e=>Cs(e,n=>{const o=Qb(n);return o?[ne.fromDom(o)]:[]}),Ow=e=>My(e).length>1,cv=e=>Nt(hF(e),Of),Qh=e=>Yo(e,"td[data-mce-selected],th[data-mce-selected]"),lD=(e,n)=>{const o=Qh(n);return o.length>0?o:cv(e)},Fd=e=>lD(My(e.selection.getSel()),ne.fromDom(e.getBody())),uv=(e,n)=>x1(e,"table",n),pF=e=>{const n=e.startContainer,o=e.startOffset;return rt(n)?o===0?N.some(ne.fromDom(n)):N.none():N.from(n.childNodes[o]).map(ne.fromDom)},vF=e=>{const n=e.endContainer,o=e.endOffset;return rt(n)?o===n.data.length?N.some(ne.fromDom(n)):N.none():N.from(n.childNodes[o-1]).map(ne.fromDom)},cD=e=>xr(e).fold(Ye([e]),n=>[e].concat(cD(n))),Ry=e=>xm(e).fold(Ye([e]),n=>so(n)==="br"?Tu(n).map(o=>[e].concat(Ry(o))).getOr([]):[e].concat(Ry(n))),kw=(e,n)=>Zs(pF(n),vF(n),(o,r)=>{const i=Oo(cD(e),ut(zn,o)),c=Oo(Ry(e),ut(zn,r));return i.isSome()&&c.isSome()}).getOr(!1),Dw=(e,n,o,r)=>{const i=o,c=new _r(o,i),d=Ci(e.schema.getMoveCaretBeforeOnEnterElements(),(h,y)=>!Ft(["td","th","table"],y.toLowerCase()));let g=o;do{if(rt(g)&&ct.trim(g.data).length!==0){r?n.setStart(g,0):n.setEnd(g,g.data.length);return}if(d[g.nodeName]){r?n.setStartBefore(g):g.nodeName==="BR"?n.setEndBefore(g):n.setEndAfter(g);return}}while(g=r?c.next():c.prev());i.nodeName==="BODY"&&(r?n.setStart(i,0):n.setEnd(i,i.childNodes.length))},Py=e=>{const n=e.selection.getSel();return ye(n)&&n.rangeCount>0},Mw=(e,n)=>{const o=Fd(e);o.length>0?ke(o,r=>{const i=r.dom,c=e.dom.createRng();c.setStartBefore(i),c.setEndAfter(i),n(c,!0)}):n(e.selection.getRng(),!1)},uD=(e,n,o)=>{const r=ki(e,n);o(r),e.moveToBookmark(r)},Xm=e=>xt(e==null?void 0:e.nodeType),Rw=e=>It(e)&&!Bl(e)&&!Il(e)&&!Dm(e),bF=(e,n)=>{if(Rw(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},dD=(e,n,o)=>{const{selection:r,dom:i}=e,c=r.getNode(),d=ss(c);uD(r,!0,()=>{n()}),d&&ss(c)&&i.isChildOf(c,e.getBody())?e.selection.select(c):o(r.getStart())&&yF(i,r)},yF=(e,n)=>{var o,r;const i=n.getRng(),{startContainer:c,startOffset:d}=i,g=n.getNode();if(!bF(e,g)&&It(c)){const h=c.childNodes,y=e.getRoot();let A;if(d<h.length){const M=h[d];A=new _r(M,(o=e.getParent(M,e.isBlock))!==null&&o!==void 0?o:y)}else{const M=h[h.length-1];A=new _r(M,(r=e.getParent(M,e.isBlock))!==null&&r!==void 0?r:y),A.next(!0)}for(let M=A.current();M;M=A.next()){if(e.getContentEditable(M)==="false")return;if(rt(M)&&!Nw(M)){i.setStart(M,0),n.setRng(i);return}}}},fD=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(It(e)||!Nw(e))return e}},Pw=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||pc(e,n),qh=(e,n,o)=>e.schema.isValidChild(n,o),Nw=(e,n=!1)=>{if(ye(e)&&rt(e)){const o=n?e.data.replace(/ /g," "):e.data;return $s(o)}else return!1},Jm=e=>ye(e)&&rt(e)&&e.length===0,CF=(e,n)=>{const o="[data-mce-cef-wrappable]",r=EL(e),i=ji(r)?o:`${o},${r}`;return Si(ne.fromDom(n),i)},mD=(e,n)=>{const o=e.dom;return Rw(n)&&o.getContentEditable(n)==="false"&&CF(e,n)&&o.select('[contenteditable="true"]',n).length===0},Ff=(e,n)=>Et(e)?e(n):(ye(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),Iw=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),Bw=(e,n)=>{if(gt(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=N1(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},dv=(e,n,o)=>{const r=e.getStyle(n,o);return Bw(r,o)},gD=(e,n)=>{let o;return e.getParent(n,r=>It(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},Ny=(e,n,o)=>e.getParents(n,o,e.getRoot()),Lw=(e,n,o)=>{const r=e.formatter.get(n);return ye(r)&&Cn(r,o)},SF=(e,n)=>Lw(e,n,r=>{const i=c=>Et(c)||c.length>1&&c.charAt(0)==="%";return Cn(["styles","attributes"],c=>_o(r,c).exists(d=>{const g=Ge(d)?d:cd(d);return Cn(g,i)}))}),xF=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],i=c=>Ci(c,(d,g)=>Cn(r,h=>h===g));return Lw(e,n,c=>{const d=i(c);return Lw(e,o,g=>{const h=i(g);return ud(d,h)})})},Uu=e=>Zc(e,"block"),wF=e=>Uu(e)&&e.wrapper===!0,EF=e=>Uu(e)&&e.wrapper!==!0,Ll=e=>Zc(e,"selector"),Tr=e=>Zc(e,"inline"),TF=e=>Ll(e)&&Tr(e)&&Zi(_o(e,"mixed"),!0),Fw=e=>Ll(e)&&e.expand!==!1&&!Tr(e),AF=e=>{const n=[];let o=e;for(;o;){if(rt(o)&&o.data!==wr||o.childNodes.length>1)return[];It(o)&&n.push(o),o=o.firstChild}return n},Wo=e=>AF(e).length>0,Iy=e=>Il(e.dom)&&Wo(e.dom),ep=Bl,hD=Ny,By=Nw,va=Pw,ol=e=>Ts(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,OF=(e,n)=>{let o=n;for(;o;){if(It(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},kF=(e,n,o,r)=>{const i=n.data;if(e){for(let c=o;c>0;c--)if(r(i.charAt(c-1)))return c}else for(let c=o;c<i.length;c++)if(r(i.charAt(c)))return c;return-1},eY=(e,n,o)=>kF(e,n,o,r=>Dy(r)||Ym(r)),DF=(e,n,o)=>kF(e,n,o,Aw),pD=(e,n,o,r,i,c)=>{let d;const g=e.getParent(o,M=>Cf(M)||e.isBlock(M)),h=ye(g)?g:n,y=(M,R,_)=>{const Z=$u(e),V=i?Z.backwards:Z.forwards;return N.from(V(M,R,(G,oe)=>ep(G.parentNode)?-1:(d=G,_(i,G,oe)),h))};return y(o,r,eY).bind(M=>c?y(M.container,M.offset+(i?-1:0),DF):N.some(M)).orThunk(()=>d?N.some({container:d,offset:i?0:d.length}):N.none())},MF=(e,n,o,r,i)=>{const c=r[i];rt(r)&&ji(r.data)&&c&&(r=c);const d=hD(e,r);for(let g=0;g<d.length;g++)for(let h=0;h<n.length;h++){const y=n[h];if(!(ye(y.collapsed)&&y.collapsed!==o.collapsed)&&Ll(y)&&e.is(d[g],y.selector))return d[g]}return r},vD=(e,n,o,r)=>{var i;let c=o;const d=e.getRoot(),g=n[0];if(Uu(g)&&(c=g.wrapper?null:e.getParent(o,g.block,d)),!c){const h=(i=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&i!==void 0?i:d;c=e.getParent(rt(o)?o.parentNode:o,y=>y!==d&&va(e.schema,y),h)}if(c&&Uu(g)&&g.wrapper&&(c=hD(e,c,"ul,ol").reverse()[0]||c),!c)for(c=o;c&&c[r]&&!e.isBlock(c[r])&&(c=c[r],!Iw(c,"br")););return c||o},Oc=(e,n,o,r)=>{const i=o.parentNode;return ye(o[r])?!1:i===n||gt(i)||e.isBlock(i)?!0:Oc(e,n,i,r)},_w=(e,n,o,r,i,c)=>{let d=o;const g=i?"previousSibling":"nextSibling",h=e.getRoot();if(rt(o)&&!By(o)&&(i?r>0:r<o.data.length))return o;for(;d;){if(Cf(d))return o;if(!n[0].block_expand&&e.isBlock(d))return c?d:o;for(let y=d[g];y;y=y[g]){const A=rt(y)&&!Oc(e,h,y,g);if(!ep(y)&&!ol(y)&&!By(y,A))return d}if(d===h||d.parentNode===h){o=d;break}d=d.parentNode}return o},bD=e=>ep(e.parentNode)||ep(e),Qm=(e,n,o,r={})=>{const{includeTrailingSpace:i=!1,expandToBlock:c=!0}=r,d=e.getParent(n.commonAncestorContainer,_=>Cf(_)),g=ye(d)?d:e.getRoot();let{startContainer:h,startOffset:y,endContainer:A,endOffset:M}=n;const R=o[0];return It(h)&&h.hasChildNodes()&&(h=pa(h,y),rt(h)&&(y=0)),It(A)&&A.hasChildNodes()&&(A=pa(A,n.collapsed?M:M-1),rt(A)&&(M=A.data.length)),h=OF(e,h),A=OF(e,A),bD(h)&&(h=ep(h)?h:h.parentNode,n.collapsed?h=h.previousSibling||h:h=h.nextSibling||h,rt(h)&&(y=n.collapsed?h.length:0)),bD(A)&&(A=ep(A)?A:A.parentNode,n.collapsed?A=A.nextSibling||A:A=A.previousSibling||A,rt(A)&&(M=n.collapsed?0:A.length)),n.collapsed&&(pD(e,g,h,y,!0,i).each(({container:V,offset:G})=>{h=V,y=G}),pD(e,g,A,M,!1,i).each(({container:V,offset:G})=>{A=V,M=G})),(Tr(R)||R.block_expand)&&((!Tr(R)||!rt(h)||y===0)&&(h=_w(e,o,h,y,!0,c)),(!Tr(R)||!rt(A)||M===A.data.length)&&(A=_w(e,o,A,M,!1,c))),Fw(R)&&(h=MF(e,o,n,h,"previousSibling"),A=MF(e,o,n,A,"nextSibling")),(Uu(R)||Ll(R))&&(h=vD(e,o,h,"previousSibling"),A=vD(e,o,A,"nextSibling"),Uu(R)&&(e.isBlock(h)||(h=_w(e,o,h,y,!0,c),rt(h)&&(y=0)),e.isBlock(A)||(A=_w(e,o,A,M,!1,c),rt(A)&&(M=A.data.length)))),It(h)&&h.parentNode&&(y=e.nodeIndex(h),h=h.parentNode),It(A)&&A.parentNode&&(M=e.nodeIndex(A)+1,A=A.parentNode),{startContainer:h,startOffset:y,endContainer:A,endOffset:M}},Zn=(e,n,o)=>{var r;const i=n.startOffset,c=pa(n.startContainer,i),d=n.endOffset,g=pa(n.endContainer,d-1),h=G=>{const oe=G[0];rt(oe)&&oe===c&&i>=oe.data.length&&G.splice(0,1);const ue=G[G.length-1];return d===0&&G.length>0&&ue===g&&rt(ue)&&G.splice(G.length-1,1),G},y=(G,oe,ue)=>{const ge=[];for(;G&&G!==ue;G=G[oe])ge.push(G);return ge},A=(G,oe)=>e.getParent(G,ue=>ue.parentNode===oe,oe),M=(G,oe,ue)=>{const ge=ue?"nextSibling":"previousSibling";for(let Se=G,Ue=Se.parentNode;Se&&Se!==oe;Se=Ue){Ue=Se.parentNode;const et=y(Se===G?Se:Se[ge],ge);et.length&&(ue||et.reverse(),o(h(et)))}};if(c===g)return o(h([c]));const R=(r=e.findCommonAncestor(c,g))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(c,g))return M(c,R,!0);if(e.isChildOf(g,c))return M(g,R);const _=A(c,R)||c,Z=A(g,R)||g;M(c,_,!0);const V=y(_===c?_:_.nextSibling,"nextSibling",Z===g?Z.nextSibling:Z);V.length&&o(h(V)),M(g,Z)},tY=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],nY=e=>Ta(e)&&bh(e)===wr,RF=(e,n,o,r)=>Sm(n).fold(()=>"skipping",i=>r==="br"||nY(n)?"valid":HO(n)?"existing":Il(n.dom)?"caret":Cn(tY,c=>Si(n,c))?"valid-block":!qh(e,o,r)||!qh(e,so(i),o)?"invalid-child":"valid"),PF=(e,n)=>{const o=Qm(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},NF=(e,n,o,r,i,c)=>{const{uid:d=n,...g}=o;Ko(e,$m()),mr(e,`${Hm()}`,d),mr(e,`${Do()}`,r);const{attributes:h={},classes:y=[]}=i(d,g);if(xi(e,h),FB(e,y),c){y.length>0&&mr(e,`${_1()}`,y.join(","));const A=Xt(h);A.length>0&&mr(e,`${Vm()}`,A.join(","))}},IF=e=>{Qr(e,$m()),nr(e,`${Hm()}`),nr(e,`${Do()}`),nr(e,`${Mh()}`);const n=Oa(e,`${Vm()}`).map(r=>r.split(",")).getOr([]),o=Oa(e,`${_1()}`).map(r=>r.split(",")).getOr([]);ke(n,r=>nr(e,r)),_B(e,o),nr(e,`${_1()}`),nr(e,`${Vm()}`)},vs=(e,n,o,r,i)=>{const c=ne.fromTag("span",e);return NF(c,n,o,r,i,!1),c},BF=(e,n,o,r,i,c)=>{const d=[],g=vs(e.getDoc(),o,c,r,i),h=Gr(),y=()=>{h.clear()},A=()=>h.get().getOrThunk(()=>{const Z=Y(g);return d.push(Z),h.set(Z),Z}),M=Z=>{ke(Z,R)},R=Z=>{switch(RF(e,Z,"span",so(Z))){case"invalid-child":{y();const G=Fr(Z);M(G),y();break}case"valid-block":{y(),NF(Z,o,c,r,i,!0);break}case"valid":{const G=A();ph(Z,G);break}}},_=Z=>{const V=Yt(Z,ne.fromDom);M(V)};return Zn(e.dom,n,Z=>{y(),_(Z)}),d},yD=(e,n,o,r)=>{e.undoManager.transact(()=>{const i=e.selection,c=i.getRng(),d=Fd(e).length>0,g=xa("mce-annotation");if(c.collapsed&&!d&&PF(e,c),i.getRng().collapsed&&!d){const h=vs(e.getDoc(),g,r,n,o.decorate);Vn(h,Uo),i.getRng().insertNode(h.dom),i.select(h.dom)}else uD(i,!1,()=>{Mw(e,h=>{BF(e,h,g,n,o.decorate,r)})})})},Ly=e=>{const n=Af();k7(e,n);const o=O7(e,n),r=fr("span"),i=c=>{ke(c,d=>{r(d)?O(d):IF(d)})};return{register:(c,d)=>{n.register(c,d)},annotate:(c,d)=>{n.lookup(c).each(g=>{yD(e,c,g,d)})},annotationChanged:(c,d)=>{o.addListener(c,d)},remove:c=>{$O(e,N.some(c)).each(({elements:d})=>{const g=e.selection.getBookmark();i(d),e.selection.moveToBookmark(g)})},removeAll:c=>{const d=e.selection.getBookmark();Be(Mx(e,c),(g,h)=>{i(g)}),e.selection.moveToBookmark(d)},getAll:c=>{const d=Mx(e,c);return _t(d,g=>Yt(g,h=>h.dom))}}},fv=e=>({getBookmark:ut(fn,e),moveToBookmark:ut(gF,e)});fv.isBookmarkNode=Bl;const CD=(e,n,o)=>o.collapsed?!1:Cn(o.getClientRects(),r=>Hx(r,e,n)),SD=(e,n)=>{const o=Ta(n)?bh(n).length:Fr(n).length+1;return e>o?o:e<0?0:e},LF=e=>xh.range(e.start,SD(e.soffset,e.start),e.finish,SD(e.foffset,e.finish)),xD=(e,n)=>!wh(n.dom)&&(El(e,n)||zn(e,n)),wD=e=>n=>xD(e,n.start)&&xD(e,n.finish),$w=e=>e.inline||eo.browser.isFirefox(),Hw=e=>xh.range(ne.fromDom(e.startContainer),e.startOffset,ne.fromDom(e.endContainer),e.endOffset),ED=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?N.none():N.from(n.getRangeAt(0))).map(Hw)},oY=e=>{const n=Eu(e);return ED(n.dom).filter(wD(e))},FF=(e,n)=>N.from(n).filter(wD(e)).map(LF),sY=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),N.some(n)}catch{return N.none()}},Vw=e=>{const n=$w(e)?oY(ne.fromDom(e.getBody())):N.none();e.bookmark=n.isSome()?n:e.bookmark},zw=e=>(e.bookmark?e.bookmark:N.none()).bind(o=>FF(ne.fromDom(e.getBody()),o)).bind(sY),_F=e=>{zw(e).each(n=>e.selection.setRng(n))},Fl={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},$F=(e,n)=>(xt(n)||(n=0),window.setTimeout(e,n)),TD=(e,n)=>(xt(n)||(n=0),window.setInterval(e,n)),_l={setEditorTimeout:(e,n,o)=>$F(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=TD(()=>{e.removed?window.clearInterval(r):n()},o);return r}},AD=(e,n)=>e.view(n).fold(Ye([]),r=>{const i=e.owner(r),c=AD(e,i);return[r].concat(c)}),HF=(e,n)=>{const o=n.owner(e);return AD(n,o)};var Uw=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?N.none():N.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(ne.fromDom)},owner:e=>wu(e)});const Fy=e=>{const n=b1(),o=S1(n),r=HF(e,Uw),i=qS(e),c=Qs(r,(d,g)=>{const h=qS(g);return{left:d.left+h.left,top:d.top+h.top}},{left:0,top:0});return fa(c.left+i.left+o.left,c.top+i.top+o.top)},Zw=e=>e.type==="nodechange"&&e.selectionChange,UF=(e,n)=>{const o=()=>{n.throttle()};Co.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Co.DOM.unbind(document,"mouseup",o)})},ZF=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},WF=(e,n)=>{ZF(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{Zw(o)||Vw(e)})},jF=e=>{const n=Yr(()=>{Vw(e)},0);e.on("init",()=>{e.inline&&UF(e,n),WF(e,n)}),e.on("remove",()=>{n.cancel()})};let _f;const _y=Co.DOM,GF=e=>It(e)&&Fl.isEditorUIElement(e),$y=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},Hy=(e,n)=>{const o=TL(e);return _y.getParent(n,i=>GF(i)||(o?e.dom.is(i,o):!1))!==null},mv=e=>{try{const n=Tl(ne.fromDom(e.getElement()));return Em(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},KF=(e,n)=>{const o=n.editor;jF(o);const r=(c,d)=>{if(_L(c)&&c.inline!==!0){const g=ne.fromDom(c.getContainer());d(g,"tox-edit-focus")}},i=c=>{if(!c.iframeElement)return;const g=ne.fromDom(c.iframeElement),h=Fy(g),y=A1(window);(h.top<y.y||h.top>y.bottom-25)&&g.dom.scrollIntoView({block:"center"})};o.on("focusin",()=>{const c=e.focusedEditor;if($y(mv(o))&&r(o,Ko),c!==o){c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0);const d=ca().browser;o.inline!==!0&&(d.isSafari()||d.isChromium())&&i(o)}}),o.on("focusout",()=>{_l.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!$y(mv(o))||c!==o)&&r(o,Qr),!Hy(o,mv(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),_f||(_f=c=>{const d=e.activeEditor;d&&ub(c).each(g=>{const h=g;h.ownerDocument===document&&h!==document.body&&!Hy(d,h)&&e.focusedEditor===d&&(d.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},_y.bind(document,"focusin",_f))},YF=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&_f&&(_y.unbind(document,"focusin",_f),_f=null)},XF=e=>{e.on("AddEditor",ut(KF,e)),e.on("RemoveEditor",ut(YF,e))},JF=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),QF=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,OD=e=>e.collapsed?N.from(pa(e.startContainer,e.startOffset)).map(ne.fromDom):N.none(),Ww=(e,n)=>OD(n).bind(o=>Ix(o)?N.some(o):El(e,o)?N.none():N.some(e)),jw=(e,n)=>{Ww(ne.fromDom(e.getBody()),n).bind(o=>oa(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},gv=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},qF=e=>mb(e)||uc(e).isSome(),e_=e=>ye(e.iframeElement)&&mb(ne.fromDom(e.iframeElement)),t_=e=>{const n=e.getBody();return n&&qF(ne.fromDom(n))},Vy=e=>{const n=Tl(ne.fromDom(e.getElement()));return Em(n).filter(o=>!$y(o.dom)&&Hy(e,o.dom)).isSome()},qm=e=>e.inline?t_(e):e_(e),zy=e=>qm(e)||Vy(e),n_=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const i=d=>{zw(d).each(g=>{d.selection.setRng(g),r=g})};!qm(e)&&e.hasEditableRoot()&&i(e);const c=JF(e,n.getNode());if(c&&e.dom.isChildOf(c,o)){QF(e,c)||gv(o),gv(c),e.hasEditableRoot()||i(e),jw(e,r),Gw(e);return}e.inline||(eo.browser.isOpera()||gv(o),e.getWin().focus()),(eo.browser.isFirefox()||e.inline)&&(gv(o),jw(e,r)),Gw(e)},Gw=e=>e.editorManager.setActive(e),rY=(e,n)=>{e.removed||(n?Gw(e):n_(e))},kt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||kt.metaKeyPressed(e),metaKeyPressed:e=>eo.os.isMacOS()||eo.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},tp="data-mce-selected",o_="table,img,figure.image,hr,video,span.mce-preview-object,details",s_=Math.abs,Uy=Math.round,Kw={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},aY=e=>e.type==="longpress"||e.type.indexOf("touch")===0,kD=(e,n)=>{const o=n.dom,r=n.getDoc(),i=document,c=n.getBody();let d,g,h,y,A,M,R,_,Z,V,G,oe,ue,ge,Se;const Ue=He=>ye(He)&&(bO(He)||o.is(He,"figure.image")),et=He=>Ol(He)||o.hasClass(He,"mce-preview-object"),Tt=(He,nt)=>{if(aY(He)){const $t=He.touches[0];return Ue(He.target)&&!CD($t.clientX,$t.clientY,nt)}else return Ue(He.target)&&!CD(He.clientX,He.clientY,nt)},Ne=He=>{const nt=He.target;Tt(He,n.selection.getRng())&&!He.isDefaultPrevented()&&n.selection.select(nt)},Ae=He=>o.hasClass(He,"mce-preview-object")&&ye(He.firstElementChild)?[He,He.firstElementChild]:o.is(He,"figure.image")?[He.querySelector("img")]:[He],je=He=>{const nt=mk(n);return!nt||n.mode.isReadOnly()||He.getAttribute("data-mce-resize")==="false"||He===n.getBody()?!1:o.hasClass(He,"mce-preview-object")&&ye(He.firstElementChild)?Si(ne.fromDom(He.firstElementChild),nt):Si(ne.fromDom(He),nt)},wt=(He,nt)=>{if(et(nt))return He.create("img",{src:eo.transparentSrc});if(Nu(nt)){const Rn=gs(y.name,"n")?an:An,$n=nt.cloneNode(!0);return Rn(He.select("tr",$n)).each(mo=>{const ql=He.select("td,th",mo);He.setStyle(mo,"height",null),ke(ql,nd=>He.setStyle(nd,"height",null))}),$n}else return nt.cloneNode(!0)},Vt=(He,nt,$t)=>{if(ye($t)){const Rn=Ae(He);ke(Rn,$n=>{$n.style[nt]||!n.schema.isValid($n.nodeName.toLowerCase(),nt)?o.setStyle($n,nt,$t):o.setAttrib($n,nt,""+$t)})}},Mn=(He,nt,$t)=>{Vt(He,"width",nt),Vt(He,"height",$t)},Pn=He=>{let nt,$t,Rn,$n,mo;nt=He.screenX-M,$t=He.screenY-R,oe=nt*y[2]+_,ue=$t*y[3]+Z,oe=oe<5?5:oe,ue=ue<5?5:ue,(Ue(d)||et(d))&&yL(n)!==!1?Rn=!kt.modifierPressed(He):Rn=kt.modifierPressed(He),Rn&&(s_(nt)>s_($t)?(ue=Uy(oe*V),oe=Uy(ue/V)):(oe=Uy(ue/V),ue=Uy(oe*V))),Mn(g,oe,ue),$n=y.startPos.x+nt,mo=y.startPos.y+$t,$n=$n>0?$n:0,mo=mo>0?mo:0,o.setStyles(h,{left:$n,top:mo,display:"block"}),h.innerHTML=oe+" &times; "+ue,nt=c.scrollWidth-ge,$t=c.scrollHeight-Se,nt+$t!==0&&o.setStyles(h,{left:$n-nt,top:mo-$t}),G||(Fe(n,d,_,Z,"corner-"+y.name),G=!0)},io=()=>{const He=G;G=!1,He&&(Vt(d,"width",oe),Vt(d,"height",ue)),o.unbind(r,"mousemove",Pn),o.unbind(r,"mouseup",io),i!==r&&(o.unbind(i,"mousemove",Pn),o.unbind(i,"mouseup",io)),o.remove(g),o.remove(h),o.remove(A),So(d),He&&(qx(n,d,oe,ue,"corner-"+y.name),o.setAttrib(d,"style",o.getAttrib(d,"style"))),n.nodeChanged()},So=He=>{Ht();const nt=o.getPos(He,c),$t=nt.x,Rn=nt.y,$n=He.getBoundingClientRect(),mo=$n.width||$n.right-$n.left,ql=$n.height||$n.bottom-$n.top;d!==He&&(cr(),d=He,oe=ue=0);const nd=n.dispatch("ObjectSelected",{target:He});je(He)&&!nd.isDefaultPrevented()?Be(Kw,(La,gi)=>{const ul=ei=>{const ec=Ae(d)[0];M=ei.screenX,R=ei.screenY,_=ec.clientWidth,Z=ec.clientHeight,V=Z/_,y=La,y.name=gi,y.startPos={x:mo*La[0]+$t,y:ql*La[1]+Rn},ge=c.scrollWidth,Se=c.scrollHeight,A=o.add(c,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(A,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),g=wt(o,d),o.addClass(g,"mce-clonedresizable"),o.setAttrib(g,"data-mce-bogus","all"),g.contentEditable="false",o.setStyles(g,{left:$t,top:Rn,margin:0}),Mn(g,mo,ql),g.removeAttribute(tp),c.appendChild(g),o.bind(r,"mousemove",Pn),o.bind(r,"mouseup",io),i!==r&&(o.bind(i,"mousemove",Pn),o.bind(i,"mouseup",io)),h=o.add(c,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},_+" &times; "+Z)};let Ca=o.get("mceResizeHandle"+gi);Ca&&o.remove(Ca),Ca=o.add(c,"div",{id:"mceResizeHandle"+gi,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+gi+"-resize; margin:0; padding:0"}),o.bind(Ca,"mousedown",ei=>{ei.stopImmediatePropagation(),ei.preventDefault(),ul(ei)}),La.elm=Ca,o.setStyles(Ca,{left:mo*La[0]+$t-Ca.offsetWidth/2,top:ql*La[1]+Rn-Ca.offsetHeight/2})}):cr(!1)},ds=Yr(So,0),cr=(He=!0)=>{ds.cancel(),Ht(),d&&He&&d.removeAttribute(tp),Be(Kw,(nt,$t)=>{const Rn=o.get("mceResizeHandle"+$t);Rn&&(o.unbind(Rn),o.remove(Rn))})},Cr=(He,nt)=>o.isChildOf(He,nt),pt=He=>{if(G||n.removed||n.composing)return;const nt=He.type==="mousedown"?He.target:e.getNode(),$t=bf(ne.fromDom(nt),o_).map($n=>$n.dom).filter($n=>o.isEditable($n.parentElement)||$n.nodeName==="IMG"&&o.isEditable($n)).getOrUndefined(),Rn=ye($t)?o.getAttrib($t,tp,"1"):"1";if(ke(o.select(`img[${tp}],hr[${tp}]`),$n=>{$n.removeAttribute(tp)}),ye($t)&&Cr($t,c)&&zy(n)){oo();const $n=e.getStart(!0);if(Cr($n,$t)&&Cr(e.getEnd(!0),$t)){o.setAttrib($t,tp,Rn),ds.throttle($t);return}}cr()},Ht=()=>{Be(Kw,He=>{He.elm&&(o.unbind(He.elm),delete He.elm)})},oo=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{oo(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",pt),n.on("keyup compositionend",He=>{d&&d.nodeName==="TABLE"&&pt(He)}),n.on("hide blur",cr),n.on("contextmenu longpress",Ne,!0)}),n.on("remove",Ht),{isResizable:je,showResizeRect:So,hideResizeRect:cr,updateResizeRect:pt,destroy:()=>{ds.cancel(),d=g=A=null}}},Jo=(e,n,o)=>{const r=Eu(ne.fromDom(o));return UK(r.dom,e,n).map(i=>{const c=o.createRange();return c.setStart(i.start.dom,i.soffset),c.setEnd(i.finish.dom,i.foffset),c}).getOrUndefined()},hv=(e,n)=>ye(e)&&ye(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,Zy=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},pv=(e,n,o)=>Zy(e,n,o)!==null,_d=(e,n,o)=>pv(e,n,r=>r.nodeName===o),Wy=(e,n)=>Ys(e)&&!pv(e,n,Il),eg=(e,n,o)=>{const r=n.parentNode;if(r){const i=new _r(n,e.getParent(r,e.isBlock)||e.getRoot());let c;for(;c=i[o?"prev":"next"]();)if(Ts(c))return!0}return!1},DD=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},r_=(e,n)=>{let o=n;for(;o&&o!==e;){if(ss(o))return!0;o=o.parentNode}return!1},Yw=(e,n,o,r,i)=>{const c=e.getRoot(),d=e.schema.getNonEmptyElements(),g=i.parentNode;let h,y;if(!g)return N.none();const A=e.getParent(g,e.isBlock)||c;if(r&&Ts(i)&&n&&e.isEmpty(A))return N.some(Ie(g,e.nodeIndex(i)));const M=new _r(i,A);for(;y=M[r?"prev":"next"]();){if(e.getContentEditableParent(y)==="false"||Wy(y,c))return N.none();if(rt(y)&&y.data.length>0)return _d(y,c,"A")?N.none():N.some(Ie(y,r?y.data.length:0));if(e.isBlock(y)||d[y.nodeName.toLowerCase()])return N.none();h=y}return Iu(h)?N.none():o&&h?N.some(Ie(h,0)):N.none()},Xw=(e,n,o,r)=>{const i=e.getRoot();let c,d=!1,g=o?r.startContainer:r.endContainer,h=o?r.startOffset:r.endOffset;const y=It(g)&&h===g.childNodes.length,A=e.schema.getNonEmptyElements();let M=o;if(Ys(g))return N.none();if(It(g)&&h>g.childNodes.length-1&&(M=!1),O1(g)&&(g=i,h=0),g===i){if(M&&(c=g.childNodes[h>0?h-1:0],c&&(Ys(c)||A[c.nodeName]||Nu(c))))return N.none();if(g.hasChildNodes()){if(h=Math.min(!M&&h>0?h-1:h,g.childNodes.length-1),g=g.childNodes[h],h=rt(g)&&y?g.data.length:0,!n&&g===i.lastChild&&Nu(g)||r_(i,g)||Ys(g)||Gs(g))return N.none();if(g.hasChildNodes()&&!Nu(g)){c=g;const R=new _r(g,i);do{if(ss(c)||Ys(c)){d=!1;break}if(rt(c)&&c.data.length>0){h=M?0:c.data.length,g=c,d=!0;break}if(A[c.nodeName.toLowerCase()]&&!hc(c)){h=e.nodeIndex(c),g=c.parentNode,M||h++,d=!0;break}}while(c=M?R.next():R.prev())}}}return n&&(rt(g)&&h===0&&Yw(e,y,n,!0,g).each(R=>{g=R.container(),h=R.offset(),d=!0}),It(g)&&(c=g.childNodes[h],c||(c=g.childNodes[h-1]),c&&Ts(c)&&!DD(c,"A")&&!eg(e,c,!1)&&!eg(e,c,!0)&&Yw(e,y,n,!0,c).each(R=>{g=R.container(),h=R.offset(),d=!0}))),M&&!n&&rt(g)&&h===g.data.length&&Yw(e,y,n,!1,g).each(R=>{g=R.container(),h=R.offset(),d=!0}),d&&g?N.some(Ie(g,h)):N.none()},jy=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),i=Ie.fromRangeStart(n);return Xw(e,o,!0,r).each(c=>{(!o||!Ie.isAbove(i,c))&&r.setStart(c.container(),c.offset())}),o||Xw(e,o,!1,r).each(c=>{r.setEnd(c.container(),c.offset())}),o&&r.collapse(!0),hv(n,r)?N.none():N.some(r)},np=(e,n)=>e.splitText(n),tg=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,i=e.endOffset;if(n===r&&rt(n)){if(o>0&&o<n.data.length)if(r=np(n,o),n=r.previousSibling,i>o){i=i-o;const c=np(r,i).previousSibling;n=r=c,i=c.data.length,o=0}else i=0}else if(rt(n)&&o>0&&o<n.data.length&&(n=np(n,o),o=0),rt(r)&&i>0&&i<r.data.length){const c=np(r,i).previousSibling;r=c,i=c.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:i}},sl=e=>({walk:(c,d)=>Zn(e,c,d),split:tg,expand:(c,d={type:"word"})=>{if(d.type==="word"){const g=Qm(e,c,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),h=e.createRng();return h.setStart(g.startContainer,g.startOffset),h.setEnd(g.endContainer,g.endOffset),h}return c},normalize:c=>jy(e,c).fold(Le,d=>(c.setStart(d.startContainer,d.startOffset),c.setEnd(d.endContainer,d.endOffset),!0))});sl.compareRanges=hv,sl.getCaretRangeFromPoint=Jo,sl.getSelectedNode=Qb,sl.getNode=pa;const $d=e=>so(e)==="textarea",MD=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),a_=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},i_=(e,n)=>{const o=Fr(e);if(o.length===0||$d(e))return{element:e,offset:n};if(n<o.length&&!$d(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return $d(r)?{element:e,offset:n}:so(r)==="img"?{element:r,offset:1}:Ta(r)?{element:r,offset:bh(r).length}:{element:r,offset:Fr(r).length}}},RD=(e,n)=>{const o=NB(e),r=dc(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},l_=(e,n)=>{const o=i_(e,n),r=ne.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+wr+"</span>");return Aa(o.element,r),RD(r,()=>b(r))},c_=e=>RD(ne.fromDom(e),qe),PD=(e,n,o,r)=>{d_(e,(i,c)=>u_(e,n,o,r),o)},Jw=(e,n,o,r,i)=>{const c={elm:r.element.dom,alignToTop:i};if(MD(e,c))return;const d=S1(n).top;o(e,n,d,r,i),a_(e,c)},u_=(e,n,o,r)=>{const i=ne.fromDom(e.getBody()),c=ne.fromDom(e.getDoc());ws(i);const d=l_(ne.fromDom(o.startContainer),o.startOffset);Jw(e,c,n,d,r),d.cleanup()},ND=(e,n,o,r)=>{const i=ne.fromDom(e.getDoc());Jw(e,i,o,c_(n),r)},d_=(e,n,o)=>{const r=o.startContainer,i=o.startOffset,c=o.endContainer,d=o.endOffset;n(ne.fromDom(r),ne.fromDom(c));const g=e.dom.createRng();g.setStart(r,i),g.setEnd(c,d),e.selection.setRng(o)},ID=(e,n,o,r,i)=>{const c=n.pos,d=30;if(r)rO(c.left,Math.max(0,c.top-d),i);else{const g=c.top-o+n.height+d;rO(-e.getBody().getBoundingClientRect().left,g,i)}},BD=(e,n,o,r,i,c)=>{const d=r+o,g=i.pos.top,h=i.bottom,y=h-g>=r;g<o?ID(e,i,r,c!==!1,n):g>d?ID(e,i,r,y?c!==!1:c===!0,n):h>d&&!y&&ID(e,i,r,c===!0,n)},vr=(e,n,o,r,i)=>{const c=Eu(n).dom.innerHeight;BD(e,n,o,c,r,i)},vv=(e,n,o,r,i)=>{const c=Eu(n).dom.innerHeight;BD(e,n,o,c,r,i);const d=Fy(r.element),g=A1(window);d.top<g.y?yb(r.element,i!==!1):d.top>g.bottom&&yb(r.element,i===!0)},zr=(e,n,o)=>PD(e,vr,n,o),kc=(e,n,o)=>ND(e,n,vr,o),f_=(e,n,o)=>PD(e,vv,n,o),LD=(e,n,o)=>ND(e,n,vv,o),m_=(e,n,o)=>{(e.inline?kc:LD)(e,n,o)},ng=(e,n,o)=>{(e.inline?zr:f_)(e,n,o)},FD=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),Qw=(e,n,o,r,i)=>{const c=o?n.startContainer:n.endContainer,d=o?n.startOffset:n.endOffset;return N.from(c).map(ne.fromDom).map(g=>!r||!n.collapsed?Ou(g,i(g,d)).getOr(g):g).bind(g=>Ga(g)?N.some(g):lc(g).filter(Ga)).map(g=>g.dom).getOr(e)},_D=(e,n,o=!1)=>Qw(e,n,!0,o,(r,i)=>Math.min(mh(r),i)),$D=(e,n,o=!1)=>Qw(e,n,!1,o,(r,i)=>i>0?i-1:i),HD=(e,n)=>{const o=e;for(;e&&rt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},rl=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const i=n.startOffset,c=n.endOffset;let d=n.commonAncestorContainer;n.collapsed||(o===r&&c-i<2&&o.hasChildNodes()&&(d=o.childNodes[i]),rt(o)&&rt(r)&&(o.length===i?o=HD(o.nextSibling,!0):o=o.parentNode,c===0?r=HD(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(d=o)));const g=rt(d)?d.parentNode:d;return Pu(g)?g:e},Pa=(e,n,o,r)=>{const i=[],c=e.getRoot(),d=e.getParent(o||_D(c,n,n.collapsed),e.isBlock),g=e.getParent(r||$D(c,n,n.collapsed),e.isBlock);if(d&&d!==c&&i.push(d),d&&g&&d!==g){let h;const y=new _r(d,c);for(;(h=y.next())&&h!==g;)e.isBlock(h)&&i.push(h)}return g&&d!==g&&g!==c&&i.push(g),i},iY=(e,n,o)=>N.from(n).bind(r=>N.from(r.parentNode).map(i=>{const c=e.nodeIndex(r),d=e.createRng();return d.setStart(i,c),d.setEnd(i,c+1),o&&(Dw(e,d,r,!0),Dw(e,d,r,!1)),d})),$l=(e,n)=>Yt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),qw={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Gy=(e,n,o)=>{const r=o?"lastChild":"firstChild",i=o?"prev":"next";if(e[r])return e[r];if(e!==n){let c=e[i];if(c)return c;for(let d=e.parent;d&&d!==n;d=d.parent)if(c=d[i],c)return c}},g_=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!$s(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},eE=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Ya{static create(n,o){const r=new Ya(n,qw[n]||1);return o&&Be(o,(i,c)=>{r.attr(c,i)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!q(n))return ye(n)&&Be(n,(c,d)=>{r.attr(d,c)}),r;const i=r.attributes;if(i){if(o!==void 0){if(o===null){if(n in i.map){delete i.map[n];let c=i.length;for(;c--;)if(i[c].name===n)return i.splice(c,1),r}return r}if(n in i.map){let c=i.length;for(;c--;)if(i[c].name===n){i[c].value=o;break}}else i.push({name:n,value:o});return i.map[n]=o,r}return i.map[n]}}clone(){const n=this,o=new Ya(n.name,n.type),r=n.attributes;if(r){const i=[];i.map={};for(let c=0,d=r.length;c<d;c++){const g=r[c];g.name!=="id"&&(i[i.length]={name:g.name,value:g.value},i.map[g.name]=g.value)}o.attributes=i}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,i=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):i&&(i.next=r),o.lastChild===n?(o.lastChild=i,i&&(i.next=null)):r&&(r.prev=i),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const i=o.parent||this;return r?(o===i.firstChild?i.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===i.lastChild?i.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=i,n}getAll(n){const o=this,r=[];for(let i=o.firstChild;i;i=Gy(i,o))i.name===n&&r.push(i);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let i=n.firstChild;i;i=Gy(i,n))o.push(i);let r=o.length;for(;r--;){const i=o[r];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var i;const c=this;let d=c.firstChild;if(eE(c))return!1;if(d)do{if(d.type===1){if(d.attr("data-mce-bogus"))continue;if(n[d.name]||eE(d))return!1}if(d.type===8||d.type===3&&!g_(d)||d.type===3&&d.parent&&o[d.parent.name]&&$s((i=d.value)!==null&&i!==void 0?i:"")||r&&r(d))return!1}while(d=Gy(d,c));return!0}walk(n){return Gy(this,null,n)}}const VD=ct.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),zD=e=>q(e.nodeValue)&&e.nodeValue.includes(wr),Ky=e=>`${e.length===0?"":`${Yt(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,h_=(e,n)=>n.querySelectorAll(Ky(e)),UD=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>zD(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),ZD=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(zD(n)){const o=n.parentNode;return o&&sn(VD,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),p_=e=>UD(e).nextNode()!==null,WD=e=>ZD(e).nextNode()!==null,tE=(e,n)=>n.querySelector(Ky(e))!==null,jD=(e,n)=>{ke(h_(e,n),o=>{const r=ne.fromDom(o);Ds(r,"data-mce-bogus")==="all"?b(r):ke(e,i=>{vf(r,i)&&nr(r,i)})})},Yy=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},v_=x(Yy,UD),lY=x(Yy,ZD),b_=(e,n)=>{const o=[{condition:ut(tE,n),action:ut(jD,n)},{condition:p_,action:v_},{condition:WD,action:lY}];let r=e,i=!1;return ke(o,({condition:c,action:d})=>{c(r)&&(i||(r=e.cloneNode(!0),i=!0),d(r))}),r},GD=e=>{const n=Yo(e,"[data-mce-bogus]");ke(n,o=>{Ds(o,"data-mce-bogus")==="all"?b(o):zm(o)?(Aa(o,ne.fromText(Ir)),b(o)):O(o)})},nE=e=>{const n=Yo(e,"input");ke(n,o=>{nr(o,"name")})},y_=(e,n)=>{const o=Ra(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},C_=(e,n)=>{const o=e.getDoc(),r=Tl(ne.fromDom(e.getBody())),i=ne.fromTag("div",o);mr(i,"data-mce-bogus","all"),pb(i,{position:"fixed",left:"-9999999px",top:"0"}),Vn(i,n.innerHTML),GD(i),nE(i);const c=cc(r);_s(c,i);const d=Oi(i.dom.innerText);return b(i),d},S_=(e,n,o)=>{let r;return n.format==="raw"?r=ct.trim(Oi(b_(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=C_(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=y_(e,e.serializer.serialize(o,n)),n.format!=="text"&&!Nh(ne.fromDom(o))&&q(r)?ct.trim(r):r},cY=(e,n)=>N.from(e.getBody()).fold(Ye(n.format==="tree"?new Ya("body",11):""),o=>S_(e,n,o)),x_=ct.makeMap,oE=e=>{const n=[];e=e||{};const o=e.indent,r=x_(e.indent_before||""),i=x_(e.indent_after||""),c=$o.getEncodeFunc(e.entity_encoding||"raw",e.entities),d=e.element_format!=="xhtml";return{start:(g,h,y)=>{if(o&&r[g]&&n.length>0){const A=n[n.length-1];A.length>0&&A!==`
`&&n.push(`
`)}if(n.push("<",g),h)for(let A=0,M=h.length;A<M;A++){const R=h[A];n.push(" ",R.name,'="',c(R.value,!0),'"')}if(!y||d?n[n.length]=">":n[n.length]=" />",y&&o&&i[g]&&n.length>0){const A=n[n.length-1];A.length>0&&A!==`
`&&n.push(`
`)}},end:g=>{let h;n.push("</",g,">"),o&&i[g]&&n.length>0&&(h=n[n.length-1],h.length>0&&h!==`
`&&n.push(`
`))},text:(g,h)=>{g.length>0&&(n[n.length]=h?g:c(g))},cdata:g=>{n.push("<![CDATA[",g,"]]>")},comment:g=>{n.push("<!--",g,"-->")},pi:(g,h)=>{h?n.push("<?",g," ",c(h),"?>"):n.push("<?",g,"?>"),o&&n.push(`
`)},doctype:g=>{n.push("<!DOCTYPE",g,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Hd=(e={},n=ga())=>{const o=oE(e);return e.validate="validate"in e?e.validate:!0,{serialize:i=>{const c=e.validate,d={3:h=>{var y;o.text((y=h.value)!==null&&y!==void 0?y:"",h.raw)},8:h=>{var y;o.comment((y=h.value)!==null&&y!==void 0?y:"")},7:h=>{o.pi(h.name,h.value)},10:h=>{var y;o.doctype((y=h.value)!==null&&y!==void 0?y:"")},4:h=>{var y;o.cdata((y=h.value)!==null&&y!==void 0?y:"")},11:h=>{let y=h;if(y=y.firstChild)do g(y);while(y=y.next)}};o.reset();const g=h=>{var y;const A=d[h.type];if(A)A(h);else{const M=h.name,R=M in n.getVoidElements();let _=h.attributes;if(c&&_&&_.length>1){const Z=[];Z.map={};const V=n.getElementRule(h.name);if(V){for(let G=0,oe=V.attributesOrder.length;G<oe;G++){const ue=V.attributesOrder[G];if(ue in _.map){const ge=_.map[ue];Z.map[ue]=ge,Z.push({name:ue,value:ge})}}for(let G=0,oe=_.length;G<oe;G++){const ue=_[G].name;if(!(ue in Z.map)){const ge=_.map[ue];Z.map[ue]=ge,Z.push({name:ue,value:ge})}}_=Z}}if(o.start(M,_,R),Sf(M))q(h.value)&&o.text(h.value,!0),o.end(M);else if(!R){let Z=h.firstChild;if(Z){(M==="pre"||M==="textarea")&&Z.type===3&&((y=Z.value)===null||y===void 0?void 0:y[0])===`
`&&o.text(`
`,!0);do g(Z);while(Z=Z.next)}o.end(M)}}};return i.type===1&&!e.inner?g(i):i.type===3?d[3](i):d[11](i),o.getContent()}}},KD=new Set;ke(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{KD.add(n)});const YD=new Set;ke(["background-color"],n=>{YD.add(n)});const XD=["font","text-decoration","text-emphasis"],uY=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),bv=(e,n)=>Xt(uY(e,n)),dY=e=>KD.has(e),w_=e=>YD.has(e),E_=(e,n)=>Cn(bv(e,n),o=>dY(o)),T_=(e,n)=>E_(e,n)&&Cn(bv(e,n),o=>w_(o)),og=e=>Nt(e,n=>Cn(XD,o=>gs(n,o))),A_=(e,n,o)=>{const r=bv(e,n),i=bv(e,o),c=d=>{var g,h;const y=(g=e.getStyle(n,d))!==null&&g!==void 0?g:"",A=(h=e.getStyle(o,d))!==null&&h!==void 0?h:"";return Gn(y)&&Gn(A)&&y!==A};return Cn(r,d=>{const g=h=>Cn(h,y=>y===d);if(!g(i)&&g(XD)){const h=og(i);return Cn(h,c)}else return c(d)})},sE=(e,n,o)=>N.from(o.container()).filter(rt).exists(r=>{const i=e?0:-1;return n(r.data.charAt(o.offset()+i))}),Xy=ut(sE,!0,Ym),Jy=ut(sE,!1,Ym),JD=e=>{const n=e.container();return rt(n)&&(n.data.length===0||Kb(n.data)&&fv.isBookmarkNode(n.parentNode))},Zu=(e,n)=>o=>hw(e?0:-1,o).filter(n).isSome(),O_=e=>bO(e)&&or(ne.fromDom(e),"display")==="block",QD=e=>ss(e)&&!l7(e),fY=Zu(!0,O_),k_=Zu(!1,O_),yv=Zu(!0,Ol),sg=Zu(!1,Ol),rE=Zu(!0,Nu),qD=Zu(!1,Nu),rg=Zu(!0,QD),ag=Zu(!1,QD),D_=e=>e.slice(0,-1),mY=(e,n,o)=>El(n,e)?D_(lb(e,r=>o(r)||zn(r,n))):[],e5=(e,n)=>mY(e,n,Le),Wu=(e,n)=>[e].concat(e5(e,n)),aE=(e,n,o)=>xw(e,n,o,JD),t5=e=>n=>e.isBlock(so(n)),M_=(e,n,o)=>Oo(Wu(ne.fromDom(n.container()),e),t5(o)),n5=(e,n,o,r)=>aE(e,n.dom,o).forall(i=>M_(n,o,r).fold(()=>!eu(i,o,n.dom),c=>!eu(i,o,n.dom)&&El(c,ne.fromDom(i.container())))),iE=(e,n,o,r)=>M_(n,o,r).fold(()=>aE(e,n.dom,o).forall(i=>!eu(i,o,n.dom)),i=>aE(e,i.dom,o).isNone()),lE=ut(iE,!1),o5=ut(iE,!0),R_=ut(n5,!1),P_=ut(n5,!0),N_=e=>wy(e).exists(zm),Qy=(e,n,o,r)=>{const i=Nt(Wu(ne.fromDom(o.container()),n),d=>r.isBlock(so(d))),c=an(i).getOr(n);return Nl(e,c.dom,o).filter(N_)},cE=(e,n,o)=>wy(n).exists(zm)||Qy(!0,e,n,o).isSome(),qy=(e,n,o)=>iF(n).exists(zm)||Qy(!1,e,n,o).isSome(),s5=ut(Qy,!1),I_=ut(Qy,!0),r5=e=>Ie.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),a5=(e,n,o)=>{const r=Nt(Wu(ne.fromDom(n.container()),e),i=>o.isBlock(so(i)));return an(r).getOr(e)},i5=(e,n,o)=>r5(n)?Jy(n):Jy(n)||ci(a5(e,n,o).dom,n).exists(Jy),l5=(e,n,o)=>r5(n)?Xy(n):Xy(n)||ar(a5(e,n,o).dom,n).exists(Xy),Ct=e=>Ft(["pre","pre-wrap"],e),Dc=e=>wy(e).bind(n=>Mu(n,Ga)).exists(n=>Ct(or(n,"white-space"))),gY=(e,n)=>ci(e.dom,n).isNone(),B_=(e,n)=>ar(e.dom,n).isNone(),uE=(e,n,o)=>gY(e,n)||B_(e,n)||lE(e,n,o)||o5(e,n,o)||qy(e,n,o)||cE(e,n,o),c5=e=>ye(e)&&ss(e)&&ov(e),dE=(e,n)=>o=>c5(new _r(o,e)[n]()),fE=(e,n)=>{const o=ar(e.dom,n).getOr(n),r=dE(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},L_=(e,n)=>{const o=ci(e.dom,n).getOr(n),r=dE(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},mE=(e,n,o)=>Dc(n)?!1:uE(e,n,o)||i5(e,n,o)||l5(e,n,o),Cv=(e,n,o)=>Dc(n)?!1:lE(e,n,o)||R_(e,n,o)||qy(e,n,o)||i5(e,n,o)||L_(e,n),F_=e=>{const n=e.container(),o=e.offset();return rt(n)&&o<n.data.length?Ie(n,o+1):e},Sv=(e,n,o)=>Dc(n)?!1:o5(e,n,o)||P_(e,n,o)||cE(e,n,o)||l5(e,n,o)||fE(e,n),gE=(e,n,o)=>Cv(e,n,o)||Sv(e,F_(n),o),u5=(e,n)=>Dy(e.charAt(n)),xv=(e,n)=>Ym(e.charAt(n)),__=e=>{const n=e.container();return rt(n)&&Ws(n.data,Uo)},$_=e=>{const n=e.split("");return Yt(n,(o,r)=>Dy(o)&&r>0&&r<n.length-1&&Aw(n[r-1])&&Aw(n[r+1])?" ":o).join("")},d5=(e,n,o,r)=>{const i=n.data,c=Ie(n,0);return!o&&u5(i,0)&&!gE(e,c,r)?(n.data=" "+i.slice(1),!0):o&&xv(i,0)&&Cv(e,c,r)?(n.data=Uo+i.slice(1),!0):!1},H_=e=>{const n=e.data,o=$_(n);return o!==n?(e.data=o,!0):!1},f5=(e,n,o,r)=>{const i=n.data,c=Ie(n,i.length-1);return!o&&u5(i,i.length-1)&&!gE(e,c,r)?(n.data=i.slice(0,-1)+" ",!0):o&&xv(i,i.length-1)&&Sv(e,c,r)?(n.data=i.slice(0,-1)+Uo,!0):!1},m5=(e,n,o)=>{const r=n.container();if(!rt(r))return N.none();if(__(n)){const i=d5(e,r,!1,o)||H_(r)||f5(e,r,!1,o);return ho(i,n)}else if(gE(e,n,o)){const i=d5(e,r,!0,o)||f5(e,r,!0,o);return ho(i,n)}else return N.none()},e2=e=>{const n=ne.fromDom(e.getBody());e.selection.isCollapsed()&&m5(n,Ie.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},g5=(e,n,o,r)=>{if(o===0)return;const i=ne.fromDom(e),c=bd(i,y=>r.isBlock(so(y))).getOr(i),d=e.data.slice(n,n+o),g=n+o>=e.data.length&&Sv(c,Ie(e,e.data.length),r),h=n===0&&Cv(c,Ie(e,0),r);e.replaceData(n,o,ma(d,4,h,g))},t2=(e,n,o)=>{const r=e.data.slice(n),i=r.length-nh(r).length;g5(e,n,i,o)},hE=(e,n,o)=>{const r=e.data.slice(0,n),i=r.length-ns(r).length;g5(e,n-i,i,o)},pE=(e,n,o,r,i=!0)=>{const c=ns(e.data).length,d=i?e:n,g=i?n:e;return i?d.appendData(g.data):d.insertData(0,g.data),b(ne.fromDom(g)),r&&t2(d,c,o),d},V_=(e,n)=>{const o=e.container(),r=e.offset();return!Ie.isTextPosition(e)&&o===n.parentNode&&r>Ie.before(n).offset()},z_=(e,n)=>V_(n,e)?Ie(n.container(),n.offset()-1):n,U_=e=>rt(e)?Ie(e,0):Ie.before(e),Z_=e=>rt(e)?Ie(e,e.data.length):Ie.after(e),h5=e=>xc(e.previousSibling)?N.some(Z_(e.previousSibling)):e.previousSibling?Di(e.previousSibling):N.none(),p5=e=>xc(e.nextSibling)?N.some(U_(e.nextSibling)):e.nextSibling?oa(e.nextSibling):N.none(),W_=(e,n)=>N.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>ci(e,Ie.before(o))).orThunk(()=>ar(e,Ie.after(n))),j_=(e,n)=>ar(e,Ie.after(n)).orThunk(()=>ci(e,Ie.before(n))),G_=(e,n)=>h5(n).orThunk(()=>p5(n)).orThunk(()=>W_(e,n)),K_=(e,n)=>p5(n).orThunk(()=>h5(n)).orThunk(()=>j_(e,n)),v5=(e,n,o)=>e?K_(n,o):G_(n,o),Y_=(e,n,o)=>v5(e,n,o).map(ut(z_,o)),b5=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},n2=e=>n=>n.dom===e,$f=(e,n)=>n&&sn(e.schema.getBlockElements(),so(n)),o2=(e,n,o)=>{if(Da(e,n)){const r=ne.fromHtml('<br data-mce-bogus="1">');return o?ke(Fr(n),i=>{Iy(i)||b(i)}):Xi(n),_s(n,r),N.some(Ie.before(r.dom))}else return N.none()},X_=(e,n,o,r)=>{const i=Tu(e).filter(Ta),c=Au(e).filter(Ta);return b(e),um(i,c,n,(d,g,h)=>{const y=d.dom,A=g.dom,M=y.data.length;return pE(y,A,o,r),h.container()===A?Ie(y,M):h}).orThunk(()=>(r&&(i.each(d=>hE(d.dom,d.dom.length,o)),c.each(d=>t2(d.dom,0,o))),n))},J_=(e,n)=>sn(e.schema.getTextInlineElements(),so(n)),ig=(e,n,o,r=!0,i=!1)=>{const c=Y_(n,e.getBody(),o.dom),d=bd(o,ut($f,e),n2(e.getBody())),g=X_(o,c,e.schema,J_(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):d.bind(h=>o2(e.schema,h,i)).fold(()=>{r&&b5(e,n,g)},h=>{r&&b5(e,n,N.some(h))})},Q_=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,y5=e=>Q_.test(e),lg=(e,n)=>Si(ne.fromDom(n),Q1(e))&&!pc(e.schema,n)&&e.dom.isEditable(n),C5=e=>{var n;return Co.DOM.getStyle(e,"direction",!0)==="rtl"||y5((n=e.textContent)!==null&&n!==void 0?n:"")},S5=(e,n,o)=>Nt(Co.DOM.getParents(o.container(),"*",n),e),Hf=(e,n,o)=>{const r=S5(e,n,o);return N.from(r[r.length-1])},x5=(e,n,o)=>{const r=Ld(n,e),i=Ld(o,e);return ye(r)&&r===i},q_=e=>Lx(e)||H1(e),Hl=(e,n)=>{const o=n.container(),r=n.offset();return e?ha(o)?rt(o.nextSibling)?Ie(o.nextSibling,0):Ie.after(o):Lx(n)?Ie(o,r+1):n:ha(o)?rt(o.previousSibling)?Ie(o.previousSibling,o.previousSibling.data.length):Ie.before(o):H1(n)?Ie(o,r-1):n},w5=ut(Hl,!0),vE=ut(Hl,!1),s2=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},E5=e=>{e.execCommand("delete")},r2=e=>s2(e,"Delete"),T5=e=>s2(e,"ForwardDelete"),a2=e=>n=>Zi(lc(n),e,zn),e$=e=>Nx(e)||Ad(e),wv=(e,n)=>El(e,n)?Mu(n,e$,a2(e)):N.none(),Ev=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},bE=(e,n,o)=>Zs(oa(o),Di(o),(r,i)=>{const c=Hl(!0,r),d=Hl(!1,i),g=Hl(!1,n);return e?ar(o,g).exists(h=>h.isEqual(d)&&n.isEqual(c)):ci(o,g).exists(h=>h.isEqual(c)&&n.isEqual(d))}).getOr(!0),A5=e=>(hf(e)?Tu(e):xm(e)).bind(A5).orThunk(()=>N.some(e)),O5=(e,n,o,r=!0)=>{var i;n.deleteContents();const c=A5(o).getOr(o),d=ne.fromDom((i=e.dom.getParent(c.dom,e.dom.isBlock))!==null&&i!==void 0?i:o.dom);if(d.dom===e.getBody()?Ev(e,r):Da(e.schema,d,{checkRootAsContent:!1})&&(kf(d),r&&e.selection.setCursorLocation(d.dom,0)),!zn(o,d)){const g=Zi(lc(d),o)?[]:p1(d);ke(g.concat(Fr(o)),h=>{!zn(h,d)&&!El(h,d)&&Da(e.schema,h)&&b(h)})}},i2=e=>n=>zn(e,n),l2=e=>Yo(e,"td,th"),yE=(e,n)=>uv(ne.fromDom(e),n),k5=e=>Zs(e.startTable,e.endTable,(n,o)=>{const r=xb(n,c=>zn(c,o)),i=xb(o,c=>zn(c,n));return!r&&!i?e:{...e,startTable:r?N.none():e.startTable,endTable:i?N.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),D5=e=>k5(e),M5=(e,n)=>{const o=yE(e.startContainer,n),r=yE(e.endContainer,n),i=o.isSome(),c=r.isSome(),d=Zs(o,r,zn).getOr(!1);return D5({startTable:o,endTable:r,isStartInTable:i,isEndInTable:c,isSameTable:d,isMultiTable:!d&&i&&c})},c2=(e,n)=>({start:e,end:n}),R5=(e,n,o)=>({rng:e,table:n,cells:o}),op=Nr.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Tv=(e,n)=>bf(ne.fromDom(e),"td,th",n),CE=e=>!zn(e.start,e.end),P5=(e,n)=>uv(e.start,n).bind(o=>uv(e.end,n).bind(r=>ho(zn(o,r),o))),t$=(e,n)=>!CE(e)&&P5(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),n$=(e,n)=>{const o=Tv(e.startContainer,n),r=Tv(e.endContainer,n);return Zs(o,r,c2)},o$=e=>n=>uv(n,e).bind(o=>An(l2(o)).map(r=>c2(n,r))),s$=e=>n=>uv(n,e).bind(o=>an(l2(o)).map(r=>c2(r,n))),SE=e=>n=>P5(n,e).map(o=>R5(n,o,l2(o))),N5=(e,n,o,r)=>{if(o.collapsed||!e.forall(CE))return N.none();if(n.isSameTable){const i=e.bind(SE(r));return N.some({start:i,end:i})}else{const i=Tv(o.startContainer,r),c=Tv(o.endContainer,r),d=i.bind(o$(r)).bind(SE(r)),g=c.bind(s$(r)).bind(SE(r));return N.some({start:d,end:g})}},I5=(e,n)=>Ns(e,o=>zn(o,n)),xE=e=>Zs(I5(e.cells,e.rng.start),I5(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),r$=(e,n,o)=>e.exists(r=>t$(r,o)&&kw(r.start,n)),wE=(e,n)=>{const{startTable:o,endTable:r}=n,i=e.cloneRange();return o.each(c=>i.setStartAfter(c.dom)),r.each(c=>i.setEndBefore(c.dom)),i},hY=(e,n,o,r)=>N5(e,n,o,r).bind(({start:i,end:c})=>i.or(c)).bind(i=>{const{isSameTable:c}=n,d=xE(i).getOr([]);if(c&&i.cells.length===d.length)return N.some(op.fullTable(i.table));if(d.length>0){if(c)return N.some(op.partialTable(d,N.none()));{const g=wE(o,n);return N.some(op.partialTable(d,N.some({...n,rng:g})))}}else return N.none()}),pY=(e,n,o,r)=>N5(e,n,o,r).bind(({start:i,end:c})=>{const d=i.bind(xE).getOr([]),g=c.bind(xE).getOr([]);if(d.length>0&&g.length>0){const h=wE(o,n);return N.some(op.multiTable(d,g,h))}else return N.none()}),a$=(e,n)=>{const o=i2(e),r=n$(n,o),i=M5(n,o);return r$(r,n,o)?r.map(c=>op.singleCellTable(n,c.start)):i.isMultiTable?pY(r,i,n,o):hY(r,i,n,o)},i$=e=>ke(e,n=>{nr(n,"contenteditable"),kf(n)}),l$=(e,n)=>N.from(e.dom.getParent(n,e.dom.isBlock)).map(ne.fromDom),ba=(e,n,o)=>{o.each(r=>{n?b(r):(kf(r),e.selection.setCursorLocation(r.dom,0))})},EE=(e,n,o,r)=>{const i=o.cloneRange();r?(i.setStart(o.startContainer,o.startOffset),i.setEndAfter(n.dom.lastChild)):(i.setStartBefore(n.dom.firstChild),i.setEnd(o.endContainer,o.endOffset)),Xa(e,i,n,!1).each(c=>c())},c$=e=>{const n=Fd(e),o=ne.fromDom(e.selection.getNode());k1(o.dom)&&Da(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&Cn(n,r=>zn(r,o))&&mr(o,"data-mce-selected","1")},B5=(e,n,o)=>N.some(()=>{const r=e.selection.getRng(),i=o.bind(({rng:c,isStartInTable:d})=>{const g=l$(e,d?c.endContainer:c.startContainer);c.deleteContents(),ba(e,d,g.filter(ut(Da,e.schema)));const h=d?n[0]:n[n.length-1];return EE(e,h,r,d),Da(e.schema,h)?N.none():N.some(d?n.slice(1):n.slice(0,-1))}).getOr(n);i$(i),c$(e)}),u$=(e,n,o,r)=>N.some(()=>{const i=e.selection.getRng(),c=n[0],d=o[o.length-1];EE(e,c,i,!0),EE(e,d,i,!1);const g=Da(e.schema,c)?n:n.slice(1),h=Da(e.schema,d)?o:o.slice(0,-1);i$(g.concat(h)),r.deleteContents(),c$(e)}),Xa=(e,n,o,r=!0)=>N.some(()=>{O5(e,n,o,r)}),vY=(e,n)=>N.some(()=>ig(e,!1,n)),d$=(e,n,o)=>a$(n,o).bind(r=>r.fold(ut(Xa,e),ut(vY,e),ut(B5,e),ut(u$,e))),bY=(e,n)=>Av(e,n),f$=(e,n,o,r)=>TE(n,r).fold(()=>d$(e,n,o),i=>bY(e,i)),m$=(e,n,o)=>{const r=ne.fromDom(e.getBody()),i=e.selection.getRng();return o.length!==0?B5(e,o,N.none()):f$(e,r,i,n)},g$=(e,n)=>Oo(Wu(n,e),Of),TE=(e,n)=>Oo(Wu(n,e),fr("caption")),Mi=(e,n,o,r,i)=>Ac(o,e.getBody(),i).bind(c=>g$(n,ne.fromDom(c.getNode())).bind(d=>zn(d,r)?N.none():N.some(qe))),Av=(e,n)=>N.some(()=>{kf(n),e.selection.setCursorLocation(n.dom,0)}),L5=(e,n,o,r)=>oa(e.dom).bind(i=>Di(e.dom).map(c=>n?o.isEqual(i)&&r.isEqual(c):o.isEqual(c)&&r.isEqual(i))).getOr(!0),h$=(e,n)=>Av(e,n),p$=(e,n,o)=>TE(e,ne.fromDom(o.getNode())).fold(()=>N.some(qe),r=>ho(!zn(r,n),qe)),F5=(e,n,o,r,i)=>Ac(o,e.getBody(),i).fold(()=>N.some(qe),c=>L5(r,o,i,c)?h$(e,r):p$(n,r,c)),_5=(e,n,o,r)=>{const i=Ie.fromRangeStart(e.selection.getRng());return g$(o,r).bind(c=>Da(e.schema,c,{checkRootAsContent:!1})?Av(e,c):Mi(e,o,n,c,i))},v$=(e,n,o,r)=>{const i=Ie.fromRangeStart(e.selection.getRng());return Da(e.schema,r)?Av(e,r):F5(e,o,n,r,i)},$5=(e,n)=>e?rE(n):qD(n),b$=(e,n)=>{const o=Ie.fromRangeStart(e.selection.getRng());return $5(n,o)||Nl(n,e.getBody(),o).exists(r=>$5(n,r))},y$=(e,n,o)=>{const r=ne.fromDom(e.getBody());return TE(r,o).fold(()=>_5(e,n,r,o).orThunk(()=>ho(b$(e,n),qe)),i=>v$(e,n,r,i))},u2=(e,n)=>{const o=ne.fromDom(e.selection.getStart(!0)),r=Fd(e);return e.selection.isCollapsed()&&r.length===0?y$(e,n,o):m$(e,o,r)},cg=(e,n)=>{let o=n;for(;o&&o!==e;){if(gc(o)||ss(o))return o;o=o.parentNode}return null},H5=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],C$=ct.each,V5=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(c,d)=>{if(c.nodeName!==d.nodeName||c.nodeType!==d.nodeType)return!1;const g=y=>{const A={};return C$(n.getAttribs(y),M=>{const R=M.nodeName.toLowerCase();R!=="style"&&!i(R)&&(A[R]=n.getAttrib(y,R))}),A},h=(y,A)=>{for(const M in y)if(sn(y,M)){const R=A[M];if(Je(R)||y[M]!==R)return!1;delete A[M]}for(const M in A)if(sn(A,M))return!1;return!0};return It(c)&&It(d)&&(!h(g(c),g(d))||!h(n.parseStyle(n.getAttrib(c,"style")),n.parseStyle(n.getAttrib(d,"style"))))?!1:!Bl(c)&&!Bl(d)},i=c=>Cn(H5,d=>gs(c,d))||o.has(c);return{compare:r,isAttributeInternal:i}},z5=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),S$=e=>e.name==="summary",yY=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},U5=(e,n,o,r)=>{const i=o.name;for(let c=0,d=e.length;c<d;c++){const g=e[c];if(g.name===i){const h=r.nodes[i];h?h.nodes.push(o):r.nodes[i]={filter:g,nodes:[o]}}}if(o.attributes)for(let c=0,d=n.length;c<d;c++){const g=n[c],h=g.name;if(h in o.attributes.map){const y=r.attributes[h];y?y.nodes.push(o):r.attributes[h]={filter:g,nodes:[o]}}}},Xn=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&yY(o,i=>{U5(e,n,i,r)}),r},sp=(e,n)=>{const o=(r,i)=>{Be(r,c=>{const d=Hn(c.nodes);ke(c.filter.callbacks,g=>{for(let h=d.length-1;h>=0;h--){const y=d[h];(!(i?y.attr(c.filter.name)!==void 0:y.name===c.filter.name)||gt(y.parent))&&d.splice(h,1)}d.length>0&&g(d,c.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},ju=(e,n,o,r={})=>{const i=Xn(e,n,o);sp(i,r)},Vd=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const c=new Ya("br",1);n.insert&&c.attr("data-mce-bogus","1"),r.empty().append(c)}else r.empty().append(new Ya("#text",3)).value=Uo},d2=e=>{var n;return f2(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===Uo},f2=(e,n)=>{const o=e==null?void 0:e.firstChild;return ye(o)&&o===e.lastChild&&o.name===n},AE=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},rp=(e,n,o,r)=>r.isEmpty(n,o,i=>AE(e,i)),x$=(e,n)=>ye(e)&&(n(e)||e.name==="br"),Z5=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return N.from(n)},m2=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const i of r)o&&!n.isValidChild(o.name,i.name)&&m2(i,n,o);e.unwrap()}},OE=(e,n,o,r=qe)=>{const i=n.getTextBlockElements(),c=n.getNonEmptyElements(),d=n.getWhitespaceElements(),g=ct.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),h=new Set,y=A=>A!==o&&!g[A.name];for(let A=0;A<e.length;A++){const M=e[A];let R,_,Z;if(!M.parent||h.has(M))continue;if(i[M.name]&&M.parent.name==="li"){let G=M.next;for(;G&&i[G.name];){G.name="li",h.add(G),M.parent.insert(G,M.parent);G=G.next}M.unwrap();continue}const V=[M];for(R=M.parent;R&&!n.isValidChild(R.name,M.name)&&y(R);R=R.parent)V.push(R);if(R&&V.length>1)if(kE(n,M,R))m2(M,n);else{V.reverse(),_=V[0].clone(),r(_);let G=_;for(let oe=0;oe<V.length-1;oe++){n.isValidChild(G.name,V[oe].name)&&oe>0?(Z=V[oe].clone(),r(Z),G.append(Z)):Z=G;for(let ue=V[oe].firstChild;ue&&ue!==V[oe+1];){const ge=ue.next;Z.append(ue),ue=ge}G=Z}rp(n,c,d,_)?R.insert(M,V[0],!0):(R.insert(_,V[0],!0),R.insert(M,_)),R=V[0],(rp(n,c,d,R)||f2(R,"br"))&&R.empty().remove()}else if(M.parent){if(M.name==="li"){let G=M.prev;if(G&&(G.name==="ul"||G.name==="ol")){G.append(M);continue}if(G=M.next,G&&(G.name==="ul"||G.name==="ol")&&G.firstChild){G.insert(M,G.firstChild,!0);continue}const oe=new Ya("ul",1);r(oe),M.wrap(oe);continue}if(n.isValidChild(M.parent.name,"div")&&n.isValidChild("div",M.name)){const G=new Ya("div",1);r(G),M.wrap(G)}else m2(M,n)}}},w$=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},kE=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&w$(o,"a")?!0:S$(o)&&z5(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,E$=(e,n,o,r)=>{const i=document.createRange();return i.setStart(e,n),i.setEnd(o,r),i},T$=e=>{const n=Ie.fromRangeStart(e),o=Ie.fromRangeEnd(e),r=e.commonAncestorContainer;return Nl(!1,r,o).map(i=>!eu(n,o,r)&&eu(n,i,r)?E$(n.container(),n.offset(),i.container(),i.offset()):e).getOr(e)},DE=e=>e.collapsed?e:T$(e),W5=e=>ye(e.firstChild)&&e.firstChild===e.lastChild,j5=e=>e.name==="br"||e.value===Uo,CY=(e,n)=>e.getBlockElements()[n.name]&&W5(n)&&j5(n.firstChild),SY=(e,n)=>{const o=e.getNonEmptyElements();return ye(n)&&(n.isEmpty(o)||CY(e,n))},xY=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),SY(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},A$=e=>{var n,o;const r=e.firstChild,i=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),i&&i.id==="mce_marker"&&((o=i.parentNode)===null||o===void 0||o.removeChild(i)),e},wY=(e,n,o)=>{const r=n.serialize(o),i=e.createFragment(r);return A$(i)},EY=e=>{var n;return Nt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},O$=e=>e.data===Uo||Ts(e),k$=e=>ye(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&O$(e.firstChild),TY=e=>!e.firstChild||k$(e),D$=e=>e.length>0&&TY(e[e.length-1])?e.slice(0,-1):e,Na=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},AY=(e,n)=>!!Na(e,n),M$=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},G5=(e,n)=>{const o=Ie.before(e),i=Tc(n).next(o);return i?i.toRange():null},R$=(e,n)=>{const o=Ie.after(e),i=Tc(n).prev(o);return i?i.toRange():null},P$=(e,n,o,r)=>{const i=M$(e,r),c=e.parentNode;return c&&(c.insertBefore(i[0],e),ct.each(n,d=>{c.insertBefore(d,e)}),c.insertBefore(i[1],e),c.removeChild(e)),R$(n[n.length-1],o)},N$=(e,n,o)=>{const r=e.parentNode;return r&&ct.each(n,i=>{r.insertBefore(i,e)}),G5(e,o)},I$=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),R$(n[0],o)),ME=(e,n,o,r)=>{const i=wY(n,e,r),c=Na(n,o.startContainer),d=D$(EY(i.firstChild)),g=1,h=2,y=n.getRoot(),A=M=>{const R=Ie.fromRangeStart(o),_=Tc(n.getRoot()),Z=M===g?_.prev(R):_.next(R),V=Z==null?void 0:Z.getNode();return V?Na(n,V)!==c:!0};return c?A(g)?N$(c,d,y):A(h)?I$(c,d,y,n):P$(c,d,y,o):null},OY=["pre"],B$=(e,n,o,r)=>{var i;const c=n.firstChild,d=n.lastChild,g=d.attr("data-mce-type")==="bookmark"?d.prev:d,h=c===g,y=Ft(OY,c.name);if(h&&y){const A=c.attr("contenteditable")!=="false",M=((i=e.getParent(o,e.isBlock))===null||i===void 0?void 0:i.nodeName.toLowerCase())===c.name,R=N.from(cg(r,o)).forall(gc);return A&&M&&R}else return!1},RE=k1,No=(e,n,o)=>{if(ye(o)){const r=e.getParent(n.endContainer,RE);return o===r&&kw(ne.fromDom(o),n)}else return!1},L$=(e,n)=>{if(e.isBlock(n)&&e.isEditable(n)){const o=n.childNodes;return o.length===1&&Ts(o[0])||o.length===0}else return!1},F$=(e,n,o)=>{var r;o.getAttribute("data-mce-bogus")==="all"?(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o):L$(e.dom,o)?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})},Ov=(e,n,o)=>{N.from(e.getParent(n,"td,th")).map(ne.fromDom).each(r=>I7(r,o))},K5=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const i=e.getBody(),c=V5(e),d="*[data-mce-fragment]",g=r.select(d);ct.each(g,h=>{const y=R=>ye(o[R.nodeName.toLowerCase()]),A=R=>R.childNodes.length===1;if((R=>!(E_(r,R)||T_(r,R)))(h)&&y(h)&&A(h)){const R=bv(r,h),_=(oe,ue)=>Tn(oe,ge=>Ft(ue,ge)),Z=oe=>A(h)&&r.is(oe,d)&&y(oe)&&(oe.nodeName===h.nodeName&&_(R,bv(r,oe))||Z(oe.children[0])),V=oe=>ye(oe)&&oe!==i&&(c.compare(h,oe)||V(oe.parentElement)),G=oe=>ye(oe)&&oe!==i&&r.is(oe,d)&&(A_(r,h,oe)||G(oe.parentElement));(Z(h.children[0])||V(h.parentElement)&&!G(h.parentElement))&&r.remove(h,!0)}})}},_$=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},$$=e=>{ct.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},H$=e=>!!e.getAttribute("data-mce-fragment"),Y5=(e,n)=>ye(n)&&!e.schema.getVoidElements()[n.nodeName],V$=(e,n)=>{var o,r,i;let c;const d=e.dom,g=e.selection;if(!n)return;g.scrollIntoView(n);const h=cg(e.getBody(),n);if(h&&d.getContentEditable(h)==="false"){d.remove(n),g.select(h);return}let y=d.createRng();const A=n.previousSibling;if(rt(A)){y.setStart(A,(r=(o=A.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const _=n.nextSibling;rt(_)&&(A.appendData(_.data),(i=_.parentNode)===null||i===void 0||i.removeChild(_))}else y.setStartBefore(n),y.setEndBefore(n);const M=_=>{let Z=Ie.fromRangeStart(_);return Z=Tc(e.getBody()).next(Z),Z==null?void 0:Z.toRange()},R=d.getParent(n,d.isBlock);if(d.remove(n),R&&d.isEmpty(R)){const _=RE(R);Xi(ne.fromDom(R)),y.setStart(R,0),y.setEnd(R,0),!_&&!H$(R)&&(c=M(y))?(y=c,d.remove(R)):d.add(R,d.create("br",_?{}:{"data-mce-bogus":"1"}))}g.setRng(y)},kY=e=>{const n=e.dom,o=DE(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,RE);No(n,o,r)?Xa(e,o,ne.fromDom(r)):z$(o)||DY(o)?o.deleteContents():e.getDoc().execCommand("Delete",!1)},DY=e=>X5(e,rt),z$=e=>X5(e,c7),X5=(e,n)=>e.startContainer===e.endContainer&&e.endOffset-e.startOffset===1&&n(e.startContainer.childNodes[e.startOffset]),U$=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return N.some(n);return N.none()},Z$=(e,n,o)=>{var r;return Cn(o.children(),z5)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},J5=(e,n,o)=>{var r,i;const c=e.selection,d=e.dom,g=e.parser,h=o.merge,y=Hd({validate:!0},e.schema),A='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=Oi(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,A);let M=c.getRng();const R=M.startContainer,_=e.getBody();R===_&&c.isCollapsed()&&d.isBlock(_.firstChild)&&Y5(e,_.firstChild)&&d.isEmpty(_.firstChild)&&(M=d.createRng(),M.setStart(_.firstChild,0),M.setEnd(_.firstChild,0),c.setRng(M)),c.isCollapsed()||kY(e);const Z=c.getNode(),V={context:Z.nodeName.toLowerCase(),data:o.data,insert:!0},G=g.parse(n,V);if(o.paste===!0&&xY(e.schema,G)&&AY(d,Z))return M=ME(y,d,c.getRng(),G),M&&c.setRng(M),n;o.paste===!0&&B$(d,G,Z,e.getBody())&&((r=G.firstChild)===null||r===void 0||r.unwrap()),_$(G);let oe=G.lastChild;if(oe&&oe.attr("id")==="mce_marker"){const ue=oe;for(oe=oe.prev;oe&&oe.name!=="table";oe=oe.walk(!0))if(oe.type===3||!d.isBlock(oe.name)){oe.parent&&e.schema.isValidChild(oe.parent.name,"span")&&oe.parent.insert(ue,oe,oe.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(Z),!V.invalid&&!Z$(d,Z,G))n=y.serialize(G),F$(e,n,Z);else{e.selection.setContent(A);let ue=c.getNode(),ge;const Se=e.getBody();for(O1(ue)?ue=ge=Se:ge=ue;ge&&ge!==Se;)ue=ge,ge=ge.parentNode;n=ue===Se?Se.innerHTML:d.getOuterHTML(ue);const Ue=g.parse(n),et=U$(Ue),Tt=et.bind(Z5).getOr(Ue);et.each(wt=>wt.replace(G));const Ne=G.children(),Ae=(i=G.parent)!==null&&i!==void 0?i:Ue;G.unwrap();const je=Nt(Ne,wt=>kE(e.schema,wt,Ae));OE(je,e.schema,Tt),ju(g.getNodeFilters(),g.getAttributeFilters(),Ue),n=y.serialize(Ue),ue===Se?d.setHTML(Se,n):d.setOuterHTML(ue,n)}return K5(e,h),V$(e,d.get("mce_marker")),$$(e.getBody()),Ov(d,c.getStart(),e.schema),h7(e.schema,e.getBody(),c.getStart()),n},g2=e=>e instanceof Ya,On=e=>{qm(e)&&oa(e.getBody()).each(n=>{const o=n.getNode(),r=Nu(o)?oa(o).getOr(n):n;e.selection.setRng(r.toRange())})},h2=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&On(e)},kv=(e,n,o,r)=>{if(o=Oi(o),o.length===0||/^\s+$/.test(o)){const i='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+i+"</li>");const c=Ra(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),c.toLowerCase())?(o=i,o=e.dom.createHTML(c,K1(e),o)):o||(o=i),h2(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Hd({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const i=Nh(ne.fromDom(n))?o:ct.trim(o);return h2(e,i,r.no_selection),{content:i,html:i}}},Dv=(e,n,o,r)=>{ju(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const i=Hd({validate:!1},e.schema).serialize(o),c=Oi(Nh(ne.fromDom(n))?i:ct.trim(i));return h2(e,c,r.no_selection),{content:o,html:c}},Mv=(e,n,o)=>N.from(e.getBody()).map(r=>g2(n)?Dv(e,r,n,o):kv(e,r,n,o)).getOr({content:n,html:g2(o.content)?"":o.content}),ug=Iw,PE=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let i=0;i<r.length;i++){const c=r[i];if(Ll(c)&&c.inherit===!1&&e.dom.is(n,c.selector))return!0}return!1},Q5=(e,n,o,r,i)=>{const c=e.dom.getRoot();if(n===c)return!1;const d=e.dom.getParent(n,g=>PE(e,g,o)?!0:g.parentNode===c||!!zd(e,g,o,r,!0));return!!zd(e,d,o,r,i)},NE=(e,n,o)=>Tr(o)&&ug(n,o.inline)||Uu(o)&&ug(n,o.block)?!0:Ll(o)?It(n)&&e.is(n,o.selector):!1,W$=(e,n,o,r,i,c)=>{const d=o[r],g=r==="attributes";if(Et(o.onmatch))return o.onmatch(n,o,r);if(d){if(Ki(d)){for(let h=0;h<d.length;h++)if(g?e.getAttrib(n,d[h]):dv(e,n,d[h]))return!0}else for(const h in d)if(sn(d,h)){const y=g?e.getAttrib(n,h):dv(e,n,h),A=Ff(d[h],c),M=gt(y)||ji(y);if(M&&gt(A))continue;if(i&&M&&!o.exact||(!i||o.exact)&&!ug(y,Bw(A,h)))return!1}}return!0},zd=(e,n,o,r,i)=>{const c=e.formatter.get(o),d=e.dom;if(c&&It(n))for(let g=0;g<c.length;g++){const h=c[g];if(NE(e.dom,n,h)&&W$(d,n,h,"attributes",i,r)&&W$(d,n,h,"styles",i,r)){const y=h.classes;if(y){for(let A=0;A<y.length;A++)if(!e.dom.hasClass(n,Ff(y[A],r)))return}return h}}},IE=(e,n,o,r,i)=>{if(r)return Q5(e,r,n,o,i);if(r=e.selection.getNode(),Q5(e,r,n,o,i))return!0;const c=e.selection.getStart();return!!(c!==r&&Q5(e,c,n,o,i))},MY=(e,n,o)=>{const r=[],i={},c=e.selection.getStart();return e.dom.getParent(c,d=>{for(let g=0;g<n.length;g++){const h=n[g];!i[h]&&zd(e,d,h,o)&&(i[h]=!0,r.push(h))}},e.dom.getRoot()),r},j$=(e,n)=>{const o=i=>zn(i,ne.fromDom(e.getBody())),r=(i,c)=>zd(e,i.dom,c)?N.some(c):N.none();return N.from(e.selection.getStart(!0)).bind(i=>Ch(ne.fromDom(i),c=>xo(n,d=>r(c,d)),o)).getOrNull()},G$=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const i=e.selection.getStart(),c=Ny(r,i);for(let d=o.length-1;d>=0;d--){const g=o[d];if(!Ll(g))return!0;for(let h=c.length-1;h>=0;h--)if(r.is(c[h],g.selector))return!0}}return!1},RY=(e,n,o)=>ts(o,(r,i)=>{const c=SF(e,i);return e.formatter.matchNode(n,i,{},c)?r.concat([i]):r},[]),Rv=wr,Qo=(e,n)=>e.importNode(n,!0),K$=e=>{if(e){const n=new _r(e,e);for(let o=n.current();o;o=n.next())if(rt(o))return o}return null},q5=e=>{const n=ne.fromTag("span");return xi(n,{id:Oy,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&_s(n,ne.fromText(Rv)),n},Y$=e=>{const n=K$(e);return n&&n.data.charAt(0)===Rv&&n.deleteData(0,1),n},dg=(e,n,o)=>{const r=e.dom,i=e.selection;if(Wo(n))ig(e,!1,ne.fromDom(n),o,!0);else{const c=i.getRng(),d=r.getParent(n,r.isBlock),g=c.startContainer,h=c.startOffset,y=c.endContainer,A=c.endOffset,M=Y$(n);r.remove(n,!0),g===M&&h>0&&c.setStart(M,h-1),y===M&&A>0&&c.setEnd(M,A-1),d&&r.isEmpty(d)&&kf(ne.fromDom(d)),i.setRng(c)}},BE=(e,n,o)=>{const r=e.dom,i=e.selection;if(n)dg(e,n,o);else if(n=Km(e.getBody(),i.getStart()),!n)for(;n=r.get(Oy);)dg(e,n,o)},X$=(e,n,o)=>{var r,i;const c=e.dom,d=c.getParent(o,ut(Pw,e.schema));d&&c.isEmpty(d)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(Gb(ne.fromDom(o)),c.isEmpty(o)?(i=o.parentNode)===null||i===void 0||i.replaceChild(n,o):c.insertAfter(n,o))},Gu=(e,n)=>(e.appendChild(n),n),ao=(e,n)=>{var o;const r=Qs(e,(c,d)=>Gu(c,d.cloneNode(!1)),n),i=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return Gu(r,i.createTextNode(Rv))},br=(e,n,o,r,i,c)=>{const d=e.formatter,g=e.dom,h=Nt(Xt(d.get()),M=>M!==r&&!Ws(M,"removeformat")),y=RY(e,o,h);if(Nt(y,M=>!xF(e,M,r)).length>0){const M=o.cloneNode(!1);return g.add(n,M),d.remove(r,i,M,c),g.remove(M),N.some(M)}else return N.none()},tu=e=>iO(e,bh(e).replace(new RegExp(`${Uo}$`)," ")),Ku=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&Tu(ne.fromDom(n)).each(r=>{Ta(r)?tu(r):tx(r,i=>Ta(i)).each(i=>{Ta(i)&&tu(i)})})};e.once("input",r=>{r.data&&!Ym(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},Vf=(e,n,o)=>{let r;const i=e.selection,c=e.formatter.get(n);if(!c)return;const d=i.getRng();let g=d.startOffset;const y=d.startContainer.nodeValue;r=Km(e.getBody(),i.getStart());const A=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(y&&g>0&&g<y.length&&A.test(y.charAt(g))&&A.test(y.charAt(g-1))){const M=i.getBookmark();d.collapse(!0);let R=Qm(e.dom,d,c);R=tg(R),e.formatter.apply(n,o,R),i.moveToBookmark(M)}else{let M=r?K$(r):null;(!r||(M==null?void 0:M.data)!==Rv)&&(r=Qo(e.getDoc(),q5(!0).dom),M=r.firstChild,d.insertNode(r),g=1,Ku(e,r)),e.formatter.apply(n,o,r),i.setCursorLocation(M,g)}},LE=(e,n,o,r)=>{const i=e.dom,c=e.selection;let d=!1;const g=e.formatter.get(n);if(!g)return;const h=c.getRng(),y=h.startContainer,A=h.startOffset;let M=y;rt(y)&&(A!==y.data.length&&(d=!0),M=M.parentNode);const R=[];let _;for(;M;){if(zd(e,M,n,o,r)){_=M;break}M.nextSibling&&(d=!0),R.push(M),M=M.parentNode}if(_)if(d){const Z=c.getBookmark();h.collapse(!0);let V=Qm(i,h,g,{includeTrailingSpace:!0});V=tg(V),e.formatter.remove(n,o,V,r),c.moveToBookmark(Z)}else{const Z=Km(e.getBody(),_),V=ye(Z)?i.getParents(_.parentNode,tt,Z):[],G=q5(!1).dom;X$(e,G,Z??_);const oe=br(e,G,_,n,o,r),ue=ao([...R,...oe.toArray(),...V],G);Z&&dg(e,Z,ye(Z)),c.setCursorLocation(ue,1),Ku(e,G),i.isEmpty(_)&&i.remove(_)}},J$=(e,n,o)=>{const r=e.selection,i=e.getBody();BE(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===Rv&&BE(e,Km(i,r.getStart()),!0),(n===37||n===39)&&BE(e,Km(i,r.getStart()),!0)},Q$=e=>rt(e)&&bu(e.data,Uo),q$=e=>{e.on("mouseup keydown",n=>{J$(e,n.keyCode,Q$(e.selection.getRng().endContainer))})},eM=e=>{const n=q5(!1),o=ao(e,n.dom);return{caretContainer:n,caretPosition:Ie(o,0)}},FE=(e,n)=>{const{caretContainer:o,caretPosition:r}=eM(n);return Aa(ne.fromDom(e),o),b(ne.fromDom(e)),r},Pv=(e,n)=>{const{caretContainer:o,caretPosition:r}=eM(n);return e.insertNode(o.dom),r},_E=(e,n)=>{if(Il(n.dom))return!1;const o=e.schema.getTextInlineElements();return sn(o,so(n))&&!Il(n.dom)&&!Dm(n.dom)},ap={},tM=Al(["pre"]),eH=(e,n)=>{ap[e]||(ap[e]=[]),ap[e].push(n)},tH=(e,n)=>{sn(ap,e)&&ke(ap[e],o=>{o(n)})};eH("pre",e=>{const n=e.selection.getRng(),o=i=>c=>{const d=c.previousSibling;return tM(d)&&Ft(i,d)},r=(i,c)=>{const d=ne.fromDom(c),g=wu(d).dom;b(d),Du(ne.fromDom(i),[ne.fromTag("br",g),ne.fromTag("br",g),...Fr(d)])};if(!n.collapsed){const i=e.selection.getSelectedBlocks(),c=Nt(Nt(i,tM),o(i));ke(c,d=>{r(d.previousSibling,d)})}});const $E=["fontWeight","fontStyle","color","fontSize","fontFamily"],nH=e=>Te(e.styles)&&Cn(Xt(e.styles),n=>Ft($E,n)),oH=e=>Oo(e,n=>Tr(n)&&n.inline==="span"&&nH(n)),nM=(e,n)=>{const o=e.get(n);return Ge(o)?oH(o):N.none()},oM=(e,n)=>ci(n,Ie.fromRangeStart(e)).isNone(),p2=(e,n)=>ar(n,Ie.fromRangeEnd(e)).exists(o=>!Ts(o.getNode())||ar(n,o).isSome())===!1,HE=e=>n=>Mb(n)&&e.isEditable(n),v2=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return oM(o,n[0])&&p2(o,n[0])?n:[];{const r=an(n).filter(d=>oM(o,d)).toArray(),i=An(n).filter(d=>p2(o,d)).toArray(),c=n.slice(1,-1);return r.concat(c).concat(i)}},PY=e=>Nt(v2(e),HE(e.dom)),Ar=e=>Nt(e.getSelectedBlocks(),HE(e.dom)),VE=ct.each,sM=e=>It(e)&&!Bl(e)&&!Il(e)&&!Dm(e),rM=(e,n)=>{for(let o=e;o;o=o[n]){if(rt(o)&&Gn(o.data))return e;if(It(o)&&!Bl(o))return o}return e},aM=(e,n,o)=>{const r=V5(e),i=Pu(n)&&e.dom.isEditable(n),c=Pu(o)&&e.dom.isEditable(o);if(i&&c){const d=rM(n,"previousSibling"),g=rM(o,"nextSibling");if(r.compare(d,g)){for(let h=d.nextSibling;h&&h!==g;){const y=h;h=h.nextSibling,d.appendChild(y)}return e.dom.remove(g),ct.each(ct.grep(g.childNodes),h=>{d.appendChild(h)}),d}}return o},iM=(e,n,o,r)=>{var i;if(r&&n.merge_siblings!==!1){const c=(i=aM(e,fD(r),r))!==null&&i!==void 0?i:r;aM(e,c,fD(c,!0))}},sH=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";VE(e.select(r,o),i=>{sM(i)&&e.isEditable(i)&&VE(n.styles,(c,d)=>{e.setStyle(i,d,"")})})}},b2=(e,n,o)=>{VE(e.childNodes,r=>{sM(r)&&(n(r)&&o(r),r.hasChildNodes()&&b2(r,n,o))})},Nv=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},lM=(e,n)=>o=>!!(o&&dv(e,o,n)),zE=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),Nv(e,r)},fg=Nr.generate([{keep:[]},{rename:["name"]},{removed:[]}]),mg=/^(src|href|style)$/,y2=ct.each,Iv=Iw,cM=e=>/^(TR|TH|TD)$/.test(e.nodeName),UE=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),ZE=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],i=n[o?"startOffset":"endOffset"];if(It(r)){const c=r.childNodes.length-1;!o&&i&&i--,r=r.childNodes[i>c?c:i]}return rt(r)&&o&&i>=r.data.length&&(r=new _r(r,e.getBody()).next()||r),rt(r)&&!o&&i===0&&(r=new _r(r,e.getBody()).prev()||r),r},uM=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return cM(e)&&r?e.nodeName==="TR"&&r[o]||r:e},C2=(e,n,o,r)=>{var i;const c=e.create(o,r);return(i=n.parentNode)===null||i===void 0||i.insertBefore(c,n),c.appendChild(n),c},dM=(e,n,o,r,i)=>{const c=ne.fromDom(n),d=ne.fromDom(e.create(r,i)),g=o?cb(c):v1(c);return Du(d,g),o?(Aa(c,d),Tm(d,c)):(Gc(c,d),_s(d,c)),d.dom},rH=(e,n)=>n.links&&e.nodeName==="A",fM=(e,n,o)=>{const r=n.parentNode;let i;const c=e.dom,d=Ra(e);Uu(o)&&r===c.getRoot()&&(!o.list_block||!Iv(n,o.list_block))&&ke(Hn(n.childNodes),g=>{qh(e,d,g.nodeName.toLowerCase())?i?i.appendChild(g):(i=C2(c,g,d),c.setAttribs(i,K1(e))):i=null}),!(TF(o)&&!Iv(o.inline,n))&&c.remove(n,!0)},mM=(e,n,o)=>xt(e)?{name:n,value:null}:{name:e,value:Ff(n,o)},gM=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},aH=(e,n,o,r,i)=>{let c=!1;y2(o.styles,(d,g)=>{const{name:h,value:y}=mM(g,d,r),A=Bw(y,h);(o.remove_similar||te(y)||!It(i)||Iv(dv(e,i,h),A))&&e.setStyle(n,h,""),c=!0}),c&&gM(e,n)},iH=(e,n,o)=>{n==="removeformat"?ke(Ar(e.selection),r=>{ke($E,i=>e.dom.setStyle(r,i,"")),gM(e.dom,r)}):nM(e.formatter,n).each(r=>{ke(Ar(e.selection),i=>aH(e.dom,i,r,o,null))})},hM=(e,n,o,r,i)=>{const c=e.dom,d=V5(e),g=e.schema;if(Tr(n)&&Eh(g,n.inline)&&pc(g,r)&&r.parentElement===e.getBody())return fM(e,r,n),fg.removed();if(!n.ceFalseOverride&&r&&c.getContentEditableParent(r)==="false"||r&&!NE(c,r,n)&&!rH(r,n))return fg.keep();const h=r,y=n.preserve_attributes;if(Tr(n)&&n.remove==="all"&&Ge(y)){const A=Nt(c.getAttribs(h),M=>Ft(y,M.name.toLowerCase()));if(c.removeAllAttribs(h),ke(A,M=>c.setAttrib(h,M.name,M.value)),A.length>0)return fg.rename("span")}if(n.remove!=="all"){aH(c,h,n,o,i),y2(n.attributes,(M,R)=>{const{name:_,value:Z}=mM(R,M,o);if(n.remove_similar||te(Z)||!It(i)||Iv(c.getAttrib(i,_),Z)){if(_==="class"){const V=c.getAttrib(h,_);if(V){let G="";if(ke(V.split(/\s+/),oe=>{/mce\-\w+/.test(oe)&&(G+=(G?" ":"")+oe)}),G){c.setAttrib(h,_,G);return}}}if(mg.test(_)&&h.removeAttribute("data-mce-"+_),_==="style"&&Al(["li"])(h)&&c.getStyle(h,"list-style-type")==="none"){h.removeAttribute(_),c.setStyle(h,"list-style-type","none");return}_==="class"&&h.removeAttribute("className"),h.removeAttribute(_)}}),y2(n.classes,M=>{M=Ff(M,o),(!It(i)||c.hasClass(i,M))&&c.removeClass(h,M)});const A=c.getAttribs(h);for(let M=0;M<A.length;M++){const R=A[M].nodeName;if(!d.isAttributeInternal(R))return fg.keep()}}return n.remove!=="none"?(fM(e,h,n),fg.removed()):fg.keep()},NY=(e,n,o,r,i)=>{let c;return n.parentNode&&ke(Ny(e.dom,n.parentNode).reverse(),d=>{if(!c&&It(d)&&d.id!=="_start"&&d.id!=="_end"){const g=zd(e,d,o,r,i);g&&g.split!==!1&&(c=d)}}),c},lH=(e,n,o,r)=>hM(e,n,o,r,r).fold(Ye(r),i=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,i)),Ye(null)),WE=(e,n,o,r,i,c,d,g)=>{var h,y;let A,M;const R=e.dom;if(o){const _=o.parentNode;for(let Z=r.parentNode;Z&&Z!==_;Z=Z.parentNode){let V=R.clone(Z,!1);for(let G=0;G<n.length&&(V=lH(e,n[G],g,V),V!==null);G++);V&&(A&&V.appendChild(A),M||(M=V),A=V)}(!d.mixed||!R.isBlock(o))&&(r=(h=R.split(o,r))!==null&&h!==void 0?h:r),A&&M&&((y=i.parentNode)===null||y===void 0||y.insertBefore(A,i),M.appendChild(i),Tr(d)&&iM(e,d,g,A))}return r},jE=(e,n,o,r,i)=>{const c=e.formatter.get(n),d=c[0],g=e.dom,h=e.selection,y=V=>{const G=NY(e,V,n,o,i);return WE(e,c,G,V,V,!0,d,o)},A=V=>Bl(V)&&It(V)&&(V.id==="_start"||V.id==="_end"),M=V=>Cn(c,G=>S2(e,G,o,V,V)),R=V=>{const G=Hn(V.childNodes),ue=M(V)||Cn(c,Ue=>NE(g,V,Ue)),ge=V.parentNode;if(!ue&&ye(ge)&&Fw(d)&&M(ge),d.deep&&G.length)for(let Ue=0;Ue<G.length;Ue++)R(G[Ue]);ke(["underline","line-through","overline"],Ue=>{It(V)&&e.dom.getStyle(V,"text-decoration")===Ue&&V.parentNode&&gD(g,V.parentNode)===Ue&&S2(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Ue}},void 0,V)})},_=V=>{const G=g.get(V?"_start":"_end");if(G){let oe=G[V?"firstChild":"lastChild"];return A(oe)&&(oe=oe[V?"firstChild":"lastChild"]),rt(oe)&&oe.data.length===0&&(oe=V?G.previousSibling||G.nextSibling:G.nextSibling||G.previousSibling),g.remove(G,!0),oe}else return null},Z=V=>{let G,oe,ue=Qm(g,V,c,{includeTrailingSpace:V.collapsed});if(d.split){if(ue=tg(ue),G=ZE(e,ue,!0),oe=ZE(e,ue),G!==oe){if(G=uM(G,!0),oe=uM(oe,!1),UE(g,G,oe)){const Se=N.from(G.firstChild).getOr(G);y(dM(g,Se,!0,"span",{id:"_start","data-mce-type":"bookmark"})),_(!0);return}if(UE(g,oe,G)){const Se=N.from(oe.lastChild).getOr(oe);y(dM(g,Se,!1,"span",{id:"_end","data-mce-type":"bookmark"})),_(!1);return}G=C2(g,G,"span",{id:"_start","data-mce-type":"bookmark"}),oe=C2(g,oe,"span",{id:"_end","data-mce-type":"bookmark"});const ge=g.createRng();ge.setStartAfter(G),ge.setEndBefore(oe),Zn(g,ge,Se=>{ke(Se,Ue=>{!Bl(Ue)&&!Bl(Ue.parentNode)&&y(Ue)})}),y(G),y(oe),G=_(!0),oe=_()}else G=oe=y(G);ue.startContainer=G.parentNode?G.parentNode:G,ue.startOffset=g.nodeIndex(G),ue.endContainer=oe.parentNode?oe.parentNode:oe,ue.endOffset=g.nodeIndex(oe)+1}Zn(g,ue,ge=>{ke(ge,R)})};if(r){if(Xm(r)){const V=g.createRng();V.setStartBefore(r),V.setEndAfter(r),Z(V)}else Z(r);ak(e,n,r,o);return}!h.isCollapsed()||!Tr(d)||Fd(e).length?(dD(e,()=>Mw(e,Z),V=>Tr(d)&&IE(e,n,o,V)),e.nodeChanged()):LE(e,n,o,i),iH(e,n,o),ak(e,n,r,o)},pM=(e,n,o,r,i)=>{(r||e.selection.isEditable())&&jE(e,n,o,r,i)},S2=(e,n,o,r,i)=>hM(e,n,o,r,i).fold(Le,c=>(e.dom.rename(r,c),!0),tt),vM=ct.each,cH=(e,n,o,r)=>{const i=c=>{if(Pu(c)&&It(c.parentNode)&&e.isEditable(c)){const d=gD(e,c.parentNode);e.getStyle(c,"color")&&d?e.setStyle(c,"text-decoration",d):e.getStyle(c,"text-decoration")===d&&e.setStyle(c,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(ct.walk(r,i,"childNodes"),i(r))},uH=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const i=lM(e,"fontSize");b2(r,c=>i(c)&&e.isEditable(c),zE(e,"backgroundColor",Ff(n.styles.backgroundColor,o)))}},dH=(e,n,o,r)=>{if(Tr(n)&&(n.inline==="sub"||n.inline==="sup")){const i=lM(e,"fontSize");b2(r,d=>i(d)&&e.isEditable(d),zE(e,"fontSize",""));const c=Nt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(c,!0)}},fH=(e,n,o,r)=>{vM(n,i=>{Tr(i)&&vM(e.dom.select(i.inline,r),c=>{sM(c)&&S2(e,i,o,c,i.exact?c:null)}),sH(e.dom,i,r)})},mH=(e,n,o,r,i)=>{const c=i.parentNode;zd(e,c,o,r)&&S2(e,n,r,i)||n.merge_with_parents&&c&&e.dom.getParent(c,d=>zd(e,d,o,r)?(S2(e,n,r,i),!0):!1)},x2=ct.each,bM=(e,n,o,r)=>{if(pk(e)&&Tr(n)&&o.parentNode){const i=$b(e.schema),c=w1(ne.fromDom(o),d=>Il(d.dom));return Zc(i,r)&&Bu(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!c}else return!1},yM=(e,n,o,r)=>{if(x2(o.styles,(i,c)=>{e.setStyle(n,c,Ff(i,r))}),o.styles){const i=e.getAttrib(n,"style");i&&e.setAttrib(n,"data-mce-style",i)}},gH=(e,n,o,r)=>{const i=e.formatter.get(n),c=i[0],d=!r&&e.selection.isCollapsed(),g=e.dom,h=e.selection,y=(Z,V=c)=>{Et(V.onformat)&&V.onformat(Z,V,o,r),yM(g,Z,V,o),x2(V.attributes,(G,oe)=>{g.setAttrib(Z,oe,Ff(G,o))}),x2(V.classes,G=>{const oe=Ff(G,o);g.hasClass(Z,oe)||g.addClass(Z,oe)})},A=(Z,V)=>{let G=!1;return x2(Z,oe=>Ll(oe)?g.getContentEditable(V)==="false"&&!oe.ceFalseOverride||ye(oe.collapsed)&&oe.collapsed!==d?!0:g.is(V,oe.selector)&&!Il(V)?(y(V,oe),G=!0,!1):!0:!1),G},M=Z=>{if(q(Z)){const V=g.create(Z);return y(V),V}else return null},R=(Z,V,G)=>{const oe=[];let ue=!0;const ge=c.inline||c.block,Se=M(ge),Ue=Ne=>wF(c)&&zd(e,Ne,n,o),et=(Ne,Ae,je)=>{const wt=EF(c)&&Pw(e.schema,Ne)&&qh(e,Ae,ge);return je&&wt},Tt=(Ne,Ae,je,wt)=>{const Vt=Ne.nodeName.toLowerCase(),Mn=qh(e,ge,Vt)&&qh(e,Ae,ge),Pn=!G&&rt(Ne)&&Kb(Ne.data),io=Il(Ne),So=!Tr(c)||!Z.isBlock(Ne);return(je||wt)&&Mn&&!Pn&&!io&&So};Zn(Z,V,Ne=>{let Ae;const je=wt=>{let Vt=!1,Mn=ue,Pn=!1;const io=wt.parentNode,So=io.nodeName.toLowerCase(),ds=Z.getContentEditable(wt);ye(ds)&&(Mn=ue,ue=ds==="true",Vt=!0,Pn=mD(e,wt));const cr=ue&&!Vt;if(Ts(wt)&&!bM(e,c,wt,So)){Ae=null,Uu(c)&&Z.remove(wt);return}if(Ue(wt)){Ae=null;return}if(et(wt,So,cr)){const Cr=Z.rename(wt,ge);y(Cr),oe.push(Cr),Ae=null;return}if(Ll(c)){let Cr=A(i,wt);if(!Cr&&ye(io)&&Fw(c)&&(Cr=A(i,io)),!Tr(c)||Cr){Ae=null;return}}ye(Se)&&Tt(wt,So,cr,Pn)?(Ae||(Ae=Z.clone(Se,!1),io.insertBefore(Ae,wt),oe.push(Ae)),Pn&&Vt&&(ue=Mn),Ae.appendChild(wt)):(Ae=null,ke(Hn(wt.childNodes),je),Vt&&(ue=Mn),Ae=null)};ke(Ne,je)}),c.links===!0&&ke(oe,Ne=>{const Ae=je=>{je.nodeName==="A"&&y(je,c),ke(Hn(je.childNodes),Ae)};Ae(Ne)}),ke(oe,Ne=>{const Ae=Vt=>{let Mn=0;return ke(Vt.childNodes,Pn=>{!Jm(Pn)&&!Bl(Pn)&&Mn++}),Mn},je=Vt=>Oo(Vt.childNodes,Rw).filter(Pn=>Z.getContentEditable(Pn)!=="false"&&NE(Z,Pn,c)).map(Pn=>{const io=Z.clone(Pn,!1);return y(io),Z.replace(io,Vt,!0),Z.remove(Pn,!0),io}).getOr(Vt),wt=Ae(Ne);if((oe.length>1||!Z.isBlock(Ne))&&wt===0){Z.remove(Ne,!0);return}(Tr(c)||Uu(c)&&c.wrapper)&&(!c.exact&&wt===1&&(Ne=je(Ne)),fH(e,i,o,Ne),mH(e,c,n,o,Ne),uH(Z,c,o,Ne),cH(Z,c,o,Ne),dH(Z,c,o,Ne),iM(e,c,o,Ne))})},_=Xm(r)?r:h.getNode();if(g.getContentEditable(_)==="false"&&!mD(e,_)){r=_,A(i,r),Nf(e,n,r,o);return}if(c){if(r)if(Xm(r)){if(!A(i,r)){const Z=g.createRng();Z.setStartBefore(r),Z.setEndAfter(r),R(g,Qm(g,Z,i),!0)}}else R(g,r,!0);else!d||!Tr(c)||Fd(e).length?(h.setRng(DE(h.getRng())),dD(e,()=>{Mw(e,(Z,V)=>{const G=V?Z:Qm(g,Z,i);R(g,G,!1)})},tt),e.nodeChanged()):Vf(e,n,o),nM(e.formatter,n).each(Z=>{ke(PY(e.selection),V=>yM(g,V,Z,o))});tH(n,e)}Nf(e,n,r,o)},Yu=(e,n,o,r)=>{(r||e.selection.isEditable())&&gH(e,n,o,r)},CM=e=>sn(e,"vars"),SM=(e,n)=>{e.set({}),n.on("NodeChange",o=>{KE(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=N.from(o.node).map(i=>Xm(i)?i:i.startContainer).bind(i=>It(i)?N.some(i):N.from(i.parentElement)).getOrThunk(()=>xM(n));KE(n,r,e.get())})},xM=e=>e.selection.getStart(),wM=(e,n,o,r,i)=>yi(n,g=>{const h=e.formatter.matchNode(g,o,i??{},r);return!Je(h)},g=>PE(e,g,o)?!0:r?!1:ye(e.formatter.matchNode(g,o,i,!0))),GE=(e,n)=>{const o=n??xM(e);return Nt(Ny(e.dom,o),r=>It(r)&&!Dm(r))},KE=(e,n,o)=>{const r=GE(e,n);Be(o,(i,c)=>{const d=g=>{const h=wM(e,r,c,g.similar,CM(g)?g.vars:void 0),y=h.isSome();if(g.state.get()!==y){g.state.set(y);const A=h.getOr(n);CM(g)?g.callback(y,{node:A,format:c,parents:r}):ke(g.callbacks,M=>M(y,{node:A,format:c,parents:r}))}};ke([i.withSimilar,i.withoutSimilar],d),ke(i.withVars,d)})},EM=(e,n,o,r,i,c)=>{const d=n.get();ke(o.split(","),g=>{const h=_o(d,g).getOrThunk(()=>{const A={withSimilar:{state:cs(!1),similar:!0,callbacks:[]},withoutSimilar:{state:cs(!1),similar:!1,callbacks:[]},withVars:[]};return d[g]=A,A}),y=()=>{const A=GE(e);return wM(e,A,g,i,c).isSome()};if(Je(c)){const A=i?h.withSimilar:h.withoutSimilar;A.callbacks.push(r),A.callbacks.length===1&&A.state.set(y())}else h.withVars.push({state:cs(y()),similar:i,vars:c,callback:r})}),n.set(d)},TM=(e,n,o)=>{const r=e.get();ke(n.split(","),i=>_o(r,i).each(c=>{r[i]={withSimilar:{...c.withSimilar,callbacks:Nt(c.withSimilar.callbacks,d=>d!==o)},withoutSimilar:{...c.withoutSimilar,callbacks:Nt(c.withoutSimilar.callbacks,d=>d!==o)},withVars:Nt(c.withVars,d=>d.callback!==o)}})),e.set(r)},hH=(e,n,o,r,i,c)=>(EM(e,n,o,r,i,c),{unbind:()=>TM(n,o,r)}),pH=(e,n,o,r)=>{const i=e.formatter.get(n);i&&(IE(e,n,o,r)&&(!("toggle"in i[0])||i[0].toggle)?pM(e,n,o,r):Yu(e,n,o,r))},AM=ct.explode,OM=()=>{const e={};return{addFilter:(i,c)=>{ke(AM(i),d=>{sn(e,d)||(e[d]={name:d,callbacks:[]}),e[d].callbacks.push(c)})},getFilters:()=>cd(e),removeFilter:(i,c)=>{ke(AM(i),d=>{if(sn(e,d))if(ye(c)){const g=e[d],h=Nt(g.callbacks,y=>y!==c);h.length>0?g.callbacks=h:delete e[d]}else delete e[d]})}}},vH=(e,n)=>{ke(n,o=>{e.attr(o,null)})},gg=(e,n,o)=>{e.addNodeFilter("font",r=>{ke(r,i=>{const c=n.parse(i.attr("style")),d=i.attr("color"),g=i.attr("face"),h=i.attr("size");d&&(c.color=d),g&&(c["font-family"]=g),h&&oi(h).each(y=>{c["font-size"]=o[y-1]}),i.name="span",i.attr("style",n.serialize(c)),vH(i,["color","face","size"])})})},kM=(e,n,o)=>{e.addNodeFilter("strike",r=>{const i=n.type!=="html4";ke(r,c=>{if(i)c.name="s";else{const d=o.parse(c.attr("style"));d["text-decoration"]="line-through",c.name="span",c.attr("style",o.serialize(d))}})})},DM=(e,n,o)=>{var r;const i=Fu();n.convert_fonts_to_spans&&gg(e,i,ct.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),kM(e,o,i)},bH=(e,n,o)=>{n.inline_styles&&DM(e,n,o)},YE=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),yH=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},XE=e=>{try{return decodeURIComponent(e)}catch{return e}},w2=e=>{const[n,...o]=e.split(","),r=o.join(","),i=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(i){const c=i[2]===";base64",d=XE(r),g=c?yH(d):d;return N.some({type:i[1],data:g,base64Encoded:c})}else return N.none()},MM=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return N.none()}const i=new Uint8Array(r.length);for(let c=0;c<i.length;c++)i[c]=r.charCodeAt(c);return N.some(new Blob([i],{type:e}))},CH=e=>new Promise((n,o)=>{w2(e).bind(({type:r,data:i,base64Encoded:c})=>MM(r,i,c)).fold(()=>o("Invalid data URI"),n)}),E2=e=>gs(e,"blob:")?YE(e):gs(e,"data:")?CH(e):Promise.reject("Unknown URI format"),RM=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var i;o((i=r.error)===null||i===void 0?void 0:i.message)},r.readAsDataURL(e)});let JE=0;const SH=e=>"blobid"+JE++,QE=(e,n,o)=>w2(e).bind(({data:r,type:i,base64Encoded:c})=>{if(n&&!c)return N.none();{const d=c?r:btoa(r);return o(d,i)}}),qE=(e,n,o)=>{const r=e.create(SH(),n,o);return e.add(r),r},T2=(e,n,o=!1)=>QE(n,o,(r,i)=>N.from(e.getByData(r,i)).orThunk(()=>MM(i,r).map(c=>qE(e,c,r)))),PM=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(gs(n,"blob:")){const r=e.getByUri(n);return ye(r)?Promise.resolve(r):E2(n).then(i=>RM(i).then(c=>QE(c,!1,d=>N.some(qE(e,i,d))).getOrThunk(o)))}else return gs(n,"data:")?T2(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},e4=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,xH=e=>N.from(e.match(e4)).bind(n=>tn(n,1)).map(n=>gs(n,"www.")?n.substring(4):n),NM=(e,n)=>{N.from(e.attr("src")).bind(xH).forall(o=>!Ft(n,o))&&e.attr("sandbox","")},t4=(e,n)=>gs(e,`${n}/`),al=e=>Je(e)?"iframe":t4(e,"image")?"img":t4(e,"video")?"video":t4(e,"audio")?"audio":"iframe",IM=({type:e,src:n,width:o,height:r}={},i,c)=>{const d=al(e),g=new Ya(d,1);return g.attr(d==="audio"?{src:n}:{src:n,width:o,height:r}),(d==="audio"||d==="video")&&g.attr("controls",""),d==="iframe"&&i&&NM(g,c),g},wH=e=>ye(e.attr("data-mce-bogus")),BM=e=>e.attr("src")===eo.transparentSrc||ye(e.attr("data-mce-placeholder")),EH=(e,n)=>{const{blob_cache:o}=n;if(o){const r=i=>{const c=i.attr("src");BM(i)||wH(i)||gt(c)||T2(o,c,!0).each(d=>{i.attr("src",d.blobUri())})};e.addAttributeFilter("src",i=>ke(i,r))}},TH=(e,n)=>{var o,r;const i=e.schema;e.addAttributeFilter("href",h=>{let y=h.length;const A=R=>R.split(" ").filter(Z=>Z.length>0).concat(["noopener"]).sort().join(" "),M=R=>{const _=R?ct.trim(R):"";return/\b(noopener)\b/g.test(_)?_:A(_)};if(!n.allow_unsafe_link_target)for(;y--;){const R=h[y];R.name==="a"&&R.attr("target")==="_blank"&&R.attr("rel",M(R.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",h=>{let y=h.length,A,M,R,_;for(;y--;)if(_=h[y],_.name==="a"&&_.firstChild&&!_.attr("href"))for(R=_.parent,A=_.lastChild;A&&R;)M=A.prev,R.insert(A,_),A=M}),n.fix_list_elements&&e.addNodeFilter("ul,ol",h=>{let y=h.length,A,M;for(;y--;)if(A=h[y],M=A.parent,M&&(M.name==="ul"||M.name==="ol"))if(A.prev&&A.prev.name==="li")A.prev.append(A);else{const R=new Ya("li",1);R.attr("style","list-style-type: none"),A.wrap(R)}});const c=i.getValidClasses();n.validate&&c&&e.addAttributeFilter("class",h=>{var y;let A=h.length;for(;A--;){const M=h[A],R=(y=M.attr("class"))!==null&&y!==void 0?y:"",_=ct.explode(R," ");let Z="";for(let V=0;V<_.length;V++){const G=_[V];let oe=!1,ue=c["*"];ue&&ue[G]&&(oe=!0),ue=c[M.name],!oe&&ue&&ue[G]&&(oe=!0),oe&&(Z&&(Z+=" "),Z+=G)}Z.length||(Z=null),M.attr("class",Z)}}),EH(e,n);const d=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,g=Dn((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",h=>ke(h,y=>{y.replace(IM({type:y.attr("type"),src:y.name==="object"?y.attr("data"):y.attr("src"),width:y.attr("width"),height:y.attr("height")},d,g))})),d&&e.addNodeFilter("iframe",h=>ke(h,y=>NM(y,g)))};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:LM,setPrototypeOf:hg,isFrozen:ip,getPrototypeOf:IY,getOwnPropertyDescriptor:AH}=Object;let{freeze:Ri,seal:Or,create:FM}=Object,{apply:n4,construct:lp}=typeof Reflect<"u"&&Reflect;Ri||(Ri=function(n){return n}),Or||(Or=function(n){return n}),n4||(n4=function(n,o,r){return n.apply(o,r)}),lp||(lp=function(n,o){return new n(...o)});const A2=Ni(Array.prototype.forEach),o4=Ni(Array.prototype.lastIndexOf),O2=Ni(Array.prototype.pop),cp=Ni(Array.prototype.push),OH=Ni(Array.prototype.splice),s4=Ni(String.prototype.toLowerCase),Xu=Ni(String.prototype.toString),_M=Ni(String.prototype.match),Bv=Ni(String.prototype.replace),kH=Ni(String.prototype.indexOf),Bn=Ni(String.prototype.trim),nu=Ni(Object.prototype.hasOwnProperty),Pi=Ni(RegExp.prototype.test),up=DH(TypeError);function Ni(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return n4(e,n,r)}}function DH(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return lp(e,o)}}function En(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s4;hg&&hg(e,null);let r=n.length;for(;r--;){let i=n[r];if(typeof i=="string"){const c=o(i);c!==i&&(ip(n)||(n[r]=c),i=c)}e[i]=!0}return e}function MH(e){for(let n=0;n<e.length;n++)nu(e,n)||(e[n]=null);return e}function pg(e){const n=FM(null);for(const[o,r]of LM(e))nu(e,o)&&(Array.isArray(r)?n[o]=MH(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=pg(r):n[o]=r);return n}function Lv(e,n){for(;e!==null;){const r=AH(e,n);if(r){if(r.get)return Ni(r.get);if(typeof r.value=="function")return Ni(r.value)}e=IY(e)}function o(){return null}return o}const $M=Ri(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),qo=Ri(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),k2=Ri(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),HM=Ri(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),r4=Ri(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),VM=Ri(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),zM=Ri(["#text"]),Ju=Ri(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Fv=Ri(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),UM=Ri(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),D2=Ri(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),a4=Or(/\{\{[\w\W]*|[\w\W]*\}\}/gm),RH=Or(/<%[\w\W]*|[\w\W]*%>/gm),PH=Or(/\$\{[\w\W]*/gm),ir=Or(/^data-[\-\w.\u00B7-\uFFFF]+$/),NH=Or(/^aria-[\-\w]+$/),Ud=Or(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IH=Or(/^(?:\w+script|data):/i),BH=Or(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ZM=Or(/^html$/i),LH=Or(/^[a-z][.\w]*(-[.\w]+)+$/i);var WM=Object.freeze({__proto__:null,ARIA_ATTR:NH,ATTR_WHITESPACE:BH,CUSTOM_ELEMENT:LH,DATA_ATTR:ir,DOCTYPE_NAME:ZM,ERB_EXPR:RH,IS_ALLOWED_URI:Ud,IS_SCRIPT_OR_DATA:IH,MUSTACHE_EXPR:a4,TMPLIT_EXPR:PH});const _v={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},FH=function(){return typeof window>"u"?null:window},_H=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";o&&o.hasAttribute(i)&&(r=o.getAttribute(i));const c="dompurify"+(r?"#"+r:"");try{return n.createPolicy(c,{createHTML(d){return d},createScriptURL(d){return d}})}catch{return console.warn("TrustedTypes policy "+c+" could not be created."),null}},jM=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function $v(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:FH();const n=Wn=>$v(Wn);if(n.version="3.2.4",n.removed=[],!e||!e.document||e.document.nodeType!==_v.document||!e.Element)return n.isSupported=!1,n;let{document:o}=e;const r=o,i=r.currentScript,{DocumentFragment:c,HTMLTemplateElement:d,Node:g,Element:h,NodeFilter:y,NamedNodeMap:A=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:M,DOMParser:R,trustedTypes:_}=e,Z=h.prototype,V=Lv(Z,"cloneNode"),G=Lv(Z,"remove"),oe=Lv(Z,"nextSibling"),ue=Lv(Z,"childNodes"),ge=Lv(Z,"parentNode");if(typeof d=="function"){const Wn=o.createElement("template");Wn.content&&Wn.content.ownerDocument&&(o=Wn.content.ownerDocument)}let Se,Ue="";const{implementation:et,createNodeIterator:Tt,createDocumentFragment:Ne,getElementsByTagName:Ae}=o,{importNode:je}=r;let wt=jM();n.isSupported=typeof LM=="function"&&typeof ge=="function"&&et&&et.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Vt,ERB_EXPR:Mn,TMPLIT_EXPR:Pn,DATA_ATTR:io,ARIA_ATTR:So,IS_SCRIPT_OR_DATA:ds,ATTR_WHITESPACE:cr,CUSTOM_ELEMENT:Cr}=WM;let{IS_ALLOWED_URI:pt}=WM,Ht=null;const oo=En({},[...$M,...qo,...k2,...r4,...zM]);let lo=null;const He=En({},[...Ju,...Fv,...UM,...D2]);let nt=Object.seal(FM(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$t=null,Rn=null,$n=!0,mo=!0,ql=!1,nd=!0,La=!1,gi=!0,ul=!1,Ca=!1,ei=!1,ec=!1,om=!1,Wt=!1,Kn=!0,Os=!1;const Xs="user-content-";let Sr=!0,Js=!1,fs={},ms=null;const ti=En({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let _c=null;const od=En({},["audio","video","img","source","image","track"]);let uu=null;const qp=En({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Gg="http://www.w3.org/1998/Math/MathML",tf="http://www.w3.org/2000/svg",tc="http://www.w3.org/1999/xhtml";let nf=tc,_0=!1,e1=null;const qI=En({},[Gg,tf,tc],Xu);let t1=En({},["mi","mo","mn","ms","mtext"]),n1=En({},["annotation-xml"]);const eB=En({},["title","style","font","a","script"]);let o1=null;const sd=["application/xhtml+xml","text/html"],Kg="text/html";let be=null,Ee=null;const mt=o.createElement("form"),st=function(Oe){return Oe instanceof RegExp||Oe instanceof Function},qt=function(){let Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ee&&Ee===Oe)){if((!Oe||typeof Oe!="object")&&(Oe={}),Oe=pg(Oe),o1=sd.indexOf(Oe.PARSER_MEDIA_TYPE)===-1?Kg:Oe.PARSER_MEDIA_TYPE,be=o1==="application/xhtml+xml"?Xu:s4,Ht=nu(Oe,"ALLOWED_TAGS")?En({},Oe.ALLOWED_TAGS,be):oo,lo=nu(Oe,"ALLOWED_ATTR")?En({},Oe.ALLOWED_ATTR,be):He,e1=nu(Oe,"ALLOWED_NAMESPACES")?En({},Oe.ALLOWED_NAMESPACES,Xu):qI,uu=nu(Oe,"ADD_URI_SAFE_ATTR")?En(pg(qp),Oe.ADD_URI_SAFE_ATTR,be):qp,_c=nu(Oe,"ADD_DATA_URI_TAGS")?En(pg(od),Oe.ADD_DATA_URI_TAGS,be):od,ms=nu(Oe,"FORBID_CONTENTS")?En({},Oe.FORBID_CONTENTS,be):ti,$t=nu(Oe,"FORBID_TAGS")?En({},Oe.FORBID_TAGS,be):{},Rn=nu(Oe,"FORBID_ATTR")?En({},Oe.FORBID_ATTR,be):{},fs=nu(Oe,"USE_PROFILES")?Oe.USE_PROFILES:!1,$n=Oe.ALLOW_ARIA_ATTR!==!1,mo=Oe.ALLOW_DATA_ATTR!==!1,ql=Oe.ALLOW_UNKNOWN_PROTOCOLS||!1,nd=Oe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,La=Oe.SAFE_FOR_TEMPLATES||!1,gi=Oe.SAFE_FOR_XML!==!1,ul=Oe.WHOLE_DOCUMENT||!1,ec=Oe.RETURN_DOM||!1,om=Oe.RETURN_DOM_FRAGMENT||!1,Wt=Oe.RETURN_TRUSTED_TYPE||!1,ei=Oe.FORCE_BODY||!1,Kn=Oe.SANITIZE_DOM!==!1,Os=Oe.SANITIZE_NAMED_PROPS||!1,Sr=Oe.KEEP_CONTENT!==!1,Js=Oe.IN_PLACE||!1,pt=Oe.ALLOWED_URI_REGEXP||Ud,nf=Oe.NAMESPACE||tc,t1=Oe.MATHML_TEXT_INTEGRATION_POINTS||t1,n1=Oe.HTML_INTEGRATION_POINTS||n1,nt=Oe.CUSTOM_ELEMENT_HANDLING||{},Oe.CUSTOM_ELEMENT_HANDLING&&st(Oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(nt.tagNameCheck=Oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Oe.CUSTOM_ELEMENT_HANDLING&&st(Oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(nt.attributeNameCheck=Oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Oe.CUSTOM_ELEMENT_HANDLING&&typeof Oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(nt.allowCustomizedBuiltInElements=Oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),La&&(mo=!1),om&&(ec=!0),fs&&(Ht=En({},zM),lo=[],fs.html===!0&&(En(Ht,$M),En(lo,Ju)),fs.svg===!0&&(En(Ht,qo),En(lo,Fv),En(lo,D2)),fs.svgFilters===!0&&(En(Ht,k2),En(lo,Fv),En(lo,D2)),fs.mathMl===!0&&(En(Ht,r4),En(lo,UM),En(lo,D2))),Oe.ADD_TAGS&&(Ht===oo&&(Ht=pg(Ht)),En(Ht,Oe.ADD_TAGS,be)),Oe.ADD_ATTR&&(lo===He&&(lo=pg(lo)),En(lo,Oe.ADD_ATTR,be)),Oe.ADD_URI_SAFE_ATTR&&En(uu,Oe.ADD_URI_SAFE_ATTR,be),Oe.FORBID_CONTENTS&&(ms===ti&&(ms=pg(ms)),En(ms,Oe.FORBID_CONTENTS,be)),Sr&&(Ht["#text"]=!0),ul&&En(Ht,["html","head","body"]),Ht.table&&(En(Ht,["tbody"]),delete $t.tbody),Oe.TRUSTED_TYPES_POLICY){if(typeof Oe.TRUSTED_TYPES_POLICY.createHTML!="function")throw up('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Oe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw up('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Se=Oe.TRUSTED_TYPES_POLICY,Ue=Se.createHTML("")}else Se===void 0&&(Se=_H(_,i)),Se!==null&&typeof Ue=="string"&&(Ue=Se.createHTML(""));Ri&&Ri(Oe),Ee=Oe}},Jn=En({},[...qo,...k2,...HM]),ks=En({},[...r4,...VM]),Sa=function(Oe){let zt=ge(Oe);(!zt||!zt.tagName)&&(zt={namespaceURI:nf,tagName:"template"});const kn=s4(Oe.tagName),Is=s4(zt.tagName);return e1[Oe.namespaceURI]?Oe.namespaceURI===tf?zt.namespaceURI===tc?kn==="svg":zt.namespaceURI===Gg?kn==="svg"&&(Is==="annotation-xml"||t1[Is]):!!Jn[kn]:Oe.namespaceURI===Gg?zt.namespaceURI===tc?kn==="math":zt.namespaceURI===tf?kn==="math"&&n1[Is]:!!ks[kn]:Oe.namespaceURI===tc?zt.namespaceURI===tf&&!n1[Is]||zt.namespaceURI===Gg&&!t1[Is]?!1:!ks[kn]&&(eB[kn]||!Jn[kn]):!!(o1==="application/xhtml+xml"&&e1[Oe.namespaceURI]):!1},$c=function(Oe){cp(n.removed,{element:Oe});try{ge(Oe).removeChild(Oe)}catch{G(Oe)}},s1=function(Oe,zt){try{cp(n.removed,{attribute:zt.getAttributeNode(Oe),from:zt})}catch{cp(n.removed,{attribute:null,from:zt})}if(zt.removeAttribute(Oe),Oe==="is")if(ec||om)try{$c(zt)}catch{}else try{zt.setAttribute(Oe,"")}catch{}},tB=function(Oe){let zt=null,kn=null;if(ei)Oe="<remove></remove>"+Oe;else{const _a=_M(Oe,/^[\r\n\t ]+/);kn=_a&&_a[0]}o1==="application/xhtml+xml"&&nf===tc&&(Oe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Oe+"</body></html>");const Is=Se?Se.createHTML(Oe):Oe;if(nf===tc)try{zt=new R().parseFromString(Is,o1)}catch{}if(!zt||!zt.documentElement){zt=et.createDocument(nf,"template",null);try{zt.documentElement.innerHTML=_0?Ue:Is}catch{}}const Fa=zt.body||zt.documentElement;return Oe&&kn&&Fa.insertBefore(o.createTextNode(kn),Fa.childNodes[0]||null),nf===tc?Ae.call(zt,ul?"html":"body")[0]:ul?zt.documentElement:Fa},$0=function(Oe){return Tt.call(Oe.ownerDocument||Oe,Oe,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT|y.SHOW_PROCESSING_INSTRUCTION|y.SHOW_CDATA_SECTION,null)},PA=function(Oe){return Oe instanceof M&&(typeof Oe.nodeName!="string"||typeof Oe.textContent!="string"||typeof Oe.removeChild!="function"||!(Oe.attributes instanceof A)||typeof Oe.removeAttribute!="function"||typeof Oe.setAttribute!="function"||typeof Oe.namespaceURI!="string"||typeof Oe.insertBefore!="function"||typeof Oe.hasChildNodes!="function")},nB=function(Oe){return typeof g=="function"&&Oe instanceof g};function of(Wn,Oe,zt){A2(Wn,kn=>{kn.call(n,Oe,zt,Ee)})}const NA=function(Oe){let zt=null;if(of(wt.beforeSanitizeElements,Oe,null),PA(Oe))return $c(Oe),!0;const kn=be(Oe.nodeName);if(of(wt.uponSanitizeElement,Oe,{tagName:kn,allowedTags:Ht}),Oe.hasChildNodes()&&!nB(Oe.firstElementChild)&&Pi(/<[/\w]/g,Oe.innerHTML)&&Pi(/<[/\w]/g,Oe.textContent)||Oe.nodeType===_v.progressingInstruction||gi&&Oe.nodeType===_v.comment&&Pi(/<[/\w]/g,Oe.data))return $c(Oe),!0;if(!Ht[kn]||$t[kn]){if(!$t[kn]&&IA(kn)&&(nt.tagNameCheck instanceof RegExp&&Pi(nt.tagNameCheck,kn)||nt.tagNameCheck instanceof Function&&nt.tagNameCheck(kn)))return!1;if(Sr&&!ms[kn]){const Is=ge(Oe)||Oe.parentNode,Fa=ue(Oe)||Oe.childNodes;if(Fa&&Is){const _a=Fa.length;for(let _i=_a-1;_i>=0;--_i){const du=V(Fa[_i],!0);du.__removalCount=(Oe.__removalCount||0)+1,Is.insertBefore(du,oe(Oe))}}}return $c(Oe),!0}return Oe instanceof h&&!Sa(Oe)||(kn==="noscript"||kn==="noembed"||kn==="noframes")&&Pi(/<\/no(script|embed|frames)/i,Oe.innerHTML)?($c(Oe),!0):(La&&Oe.nodeType===_v.text&&(zt=Oe.textContent,A2([Vt,Mn,Pn],Is=>{zt=Bv(zt,Is," ")}),Oe.textContent!==zt&&(cp(n.removed,{element:Oe.cloneNode()}),Oe.textContent=zt)),of(wt.afterSanitizeElements,Oe,null),!1)},oB=function(Oe,zt,kn){if(Kn&&(zt==="id"||zt==="name")&&(kn in o||kn in mt))return!1;if(!(mo&&!Rn[zt]&&Pi(io,zt))){if(!($n&&Pi(So,zt))){if(!lo[zt]||Rn[zt]){if(!(IA(Oe)&&(nt.tagNameCheck instanceof RegExp&&Pi(nt.tagNameCheck,Oe)||nt.tagNameCheck instanceof Function&&nt.tagNameCheck(Oe))&&(nt.attributeNameCheck instanceof RegExp&&Pi(nt.attributeNameCheck,zt)||nt.attributeNameCheck instanceof Function&&nt.attributeNameCheck(zt))||zt==="is"&&nt.allowCustomizedBuiltInElements&&(nt.tagNameCheck instanceof RegExp&&Pi(nt.tagNameCheck,kn)||nt.tagNameCheck instanceof Function&&nt.tagNameCheck(kn))))return!1}else if(!uu[zt]){if(!Pi(pt,Bv(kn,cr,""))){if(!((zt==="src"||zt==="xlink:href"||zt==="href")&&Oe!=="script"&&kH(kn,"data:")===0&&_c[Oe])){if(!(ql&&!Pi(ds,Bv(kn,cr,"")))){if(kn)return!1}}}}}}return!0},IA=function(Oe){return Oe!=="annotation-xml"&&_M(Oe,Cr)},sB=function(Oe){of(wt.beforeSanitizeAttributes,Oe,null);const{attributes:zt}=Oe;if(!zt||PA(Oe))return;const kn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:lo,forceKeepAttr:void 0};let Is=zt.length;for(;Is--;){const Fa=zt[Is],{name:_a,namespaceURI:_i,value:du}=Fa,H0=be(_a);let $a=_a==="value"?du:Bn(du);const sK=$a;if(kn.attrName=H0,kn.attrValue=$a,kn.keepAttr=!0,kn.forceKeepAttr=void 0,of(wt.uponSanitizeAttribute,Oe,kn),$a=kn.attrValue,Os&&(H0==="id"||H0==="name")&&(s1(_a,Oe),$a=Xs+$a),gi&&Pi(/((--!?|])>)|<\/(style|title)/i,$a)){s1(_a,Oe);continue}if(kn.forceKeepAttr)continue;if(!kn.keepAttr){s1(_a,Oe);continue}if(!nd&&Pi(/\/>/i,$a)){s1(_a,Oe);continue}La&&A2([Vt,Mn,Pn],aB=>{$a=Bv($a,aB," ")});const rB=be(Oe.nodeName);if(!oB(rB,H0,$a)){s1(_a,Oe);continue}if(Se&&typeof _=="object"&&typeof _.getAttributeType=="function"&&!_i)switch(_.getAttributeType(rB,H0)){case"TrustedHTML":{$a=Se.createHTML($a);break}case"TrustedScriptURL":{$a=Se.createScriptURL($a);break}}if($a!==sK)try{_i?Oe.setAttributeNS(_i,_a,$a):Oe.setAttribute(_a,$a),PA(Oe)?$c(Oe):O2(n.removed)}catch{}}of(wt.afterSanitizeAttributes,Oe,null)},oK=function Wn(Oe){let zt=null;const kn=$0(Oe);for(of(wt.beforeSanitizeShadowDOM,Oe,null);zt=kn.nextNode();)of(wt.uponSanitizeShadowNode,zt,null),NA(zt),sB(zt),zt.content instanceof c&&Wn(zt.content);of(wt.afterSanitizeShadowDOM,Oe,null)};return n.sanitize=function(Wn){let Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},zt=null,kn=null,Is=null,Fa=null;if(_0=!Wn,_0&&(Wn="<!-->"),typeof Wn!="string"&&!nB(Wn))if(typeof Wn.toString=="function"){if(Wn=Wn.toString(),typeof Wn!="string")throw up("dirty is not a string, aborting")}else throw up("toString is not a function");if(!n.isSupported)return Wn;if(Ca||qt(Oe),n.removed=[],typeof Wn=="string"&&(Js=!1),Js){if(Wn.nodeName){const du=be(Wn.nodeName);if(!Ht[du]||$t[du])throw up("root node is forbidden and cannot be sanitized in-place")}}else if(Wn instanceof g)zt=tB("<!---->"),kn=zt.ownerDocument.importNode(Wn,!0),kn.nodeType===_v.element&&kn.nodeName==="BODY"||kn.nodeName==="HTML"?zt=kn:zt.appendChild(kn);else{if(!ec&&!La&&!ul&&Wn.indexOf("<")===-1)return Se&&Wt?Se.createHTML(Wn):Wn;if(zt=tB(Wn),!zt)return ec?null:Wt?Ue:""}zt&&ei&&$c(zt.firstChild);const _a=$0(Js?Wn:zt);for(;Is=_a.nextNode();)NA(Is),sB(Is),Is.content instanceof c&&oK(Is.content);if(Js)return Wn;if(ec){if(om)for(Fa=Ne.call(zt.ownerDocument);zt.firstChild;)Fa.appendChild(zt.firstChild);else Fa=zt;return(lo.shadowroot||lo.shadowrootmode)&&(Fa=je.call(r,Fa,!0)),Fa}let _i=ul?zt.outerHTML:zt.innerHTML;return ul&&Ht["!doctype"]&&zt.ownerDocument&&zt.ownerDocument.doctype&&zt.ownerDocument.doctype.name&&Pi(ZM,zt.ownerDocument.doctype.name)&&(_i="<!DOCTYPE "+zt.ownerDocument.doctype.name+`>
`+_i),La&&A2([Vt,Mn,Pn],du=>{_i=Bv(_i,du," ")}),Se&&Wt?Se.createHTML(_i):_i},n.setConfig=function(){let Wn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};qt(Wn),Ca=!0},n.clearConfig=function(){Ee=null,Ca=!1},n.isValidAttribute=function(Wn,Oe,zt){Ee||qt({});const kn=be(Wn),Is=be(Oe);return oB(kn,Is,zt)},n.addHook=function(Wn,Oe){typeof Oe=="function"&&cp(wt[Wn],Oe)},n.removeHook=function(Wn,Oe){if(Oe!==void 0){const zt=o4(wt[Wn],Oe);return zt===-1?void 0:OH(wt[Wn],zt,1)[0]}return O2(wt[Wn])},n.removeHooks=function(Wn){wt[Wn]=[]},n.removeAllHooks=function(){wt=jM()},n}var i4=$v();const GM=ct.each,BY=ct.trim,Hv=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],$H={ftp:21,http:80,https:443,mailto:25},l4=["img","video"],HH=(e,n)=>ye(e)?!e:ye(n)?!Ft(l4,n):!0,VH=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},KM=(e,n,o)=>{const r=VH(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?HH(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Mc{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),i=/data:([^;]+)/.exec(r[0]);return i&&(o=i[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const i=$o.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!KM(r,i,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=BY(n),this.settings=o;const r=o.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){i.source=n;return}const c=n.indexOf("//")===0;if(n.indexOf("/")===0&&!c&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const g=r?r.path:new Mc(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+i.toAbsPath(g,n);else{const h=/([^#?]*)([#?]?.*)/.exec(n);h&&(n=(r&&r.protocol||"http")+"://mce_host"+i.toAbsPath(g,h[1])+h[2])}}n=n.replace(/@@/g,"(mce_at)");const d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);d&&GM(Hv,(g,h)=>{let y=d[h];y&&(y=y.replace(/\(mce_at\)/g,"@@")),i[g]=y}),r&&(i.protocol||(i.protocol=r.protocol),i.userInfo||(i.userInfo=r.userInfo),!i.port&&i.host==="mce_host"&&(i.port=r.port),(!i.host||i.host==="mce_host")&&(i.host=r.host),i.source=""),c&&(i.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Mc(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),i=o.getURI();if(r===i||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===i)return r;let c=this.toRelPath(this.path,o.path);return o.query&&(c+="?"+o.query),o.anchor&&(c+="#"+o.anchor),c}toAbsolute(n,o){const r=new Mc(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?$H[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,i="",c,d;const g=n.substring(0,n.lastIndexOf("/")).split("/"),h=o.split("/");if(g.length>=h.length){for(c=0,d=g.length;c<d;c++)if(c>=h.length||g[c]!==h[c]){r=c+1;break}}if(g.length<h.length){for(c=0,d=h.length;c<d;c++)if(c>=g.length||g[c]!==h[c]){r=c+1;break}}if(r===1)return o;for(c=0,d=g.length-(r-1);c<d;c++)i+="../";for(c=r-1,d=h.length;c<d;c++)c!==r-1?i+="/"+h[c]:i+=h[c];return i}toAbsPath(n,o){let r=0;const i=/\/$/.test(o)?"/":"",c=n.split("/"),d=o.split("/"),g=[];GM(c,M=>{M&&g.push(M)});const h=[];for(let M=d.length-1;M>=0;M--)if(!(d[M].length===0||d[M]===".")){if(d[M]===".."){r++;continue}if(r>0){r--;continue}h.push(d[M])}const y=g.length-r;let A;return y<=0?A=Me(h).join("/"):A=g.slice(0,y).join("/")+"/"+Me(h).join("/"),A.indexOf("/")!==0&&(A="/"+A),i&&A.lastIndexOf("/")!==A.length-1&&(A+=i),A}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const vg=ct.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Zd="data-mce-type";let Vv=0;const zv=(e,n,o,r,i)=>{var c,d,g,h;const y=n.validate,A=o.getSpecialElements();e.nodeType===lh&&!n.allow_conditional_comments&&/^\[if/i.test((c=e.nodeValue)!==null&&c!==void 0?c:"")&&(e.nodeValue=" "+e.nodeValue);const M=(d=i==null?void 0:i.tagName)!==null&&d!==void 0?d:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){ye(i)&&(i.allowedTags[M]=!0);return}if(e.nodeType!==ua||M==="body")return;const R=ne.fromDom(e),_=vf(R,Zd),Z=Ds(R,"data-mce-bogus");if(!_&&q(Z)){Z==="all"?b(R):O(R);return}const V=o.getElementRule(M);if(y&&!V){sn(A,M)?b(R):O(R);return}else ye(i)&&(i.allowedTags[M]=!0);if(y&&V&&!_){if(ke((g=V.attributesForced)!==null&&g!==void 0?g:[],G=>{mr(R,G.name,G.value==="{$uid}"?`mce_${Vv++}`:G.value)}),ke((h=V.attributesDefault)!==null&&h!==void 0?h:[],G=>{vf(R,G.name)||mr(R,G.name,G.value==="{$uid}"?`mce_${Vv++}`:G.value)}),V.attributesRequired&&!Cn(V.attributesRequired,G=>vf(R,G))){O(R);return}if(V.removeEmptyAttrs&&gb(R)){O(R);return}V.outputName&&V.outputName!==M&&ft(R,V.outputName)}},bg=(e,n,o,r,i)=>{const c=e.tagName.toLowerCase(),{attrName:d,attrValue:g}=i;i.keepAttr=zf(n,o,r,c,d,g),i.keepAttr?(i.allowedAttributes[d]=!0,Zv(d,o)&&(i.attrValue=d),n.allow_svg_data_urls&&gs(g,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):Uv(e,d)&&(i.forceKeepAttr=!0)},zf=(e,n,o,r,i,c)=>o!=="html"&&!Sf(r)?!0:!(i in vg&&KM(e,c,r))&&(!e.validate||n.isValid(r,i)||gs(i,"data-")||gs(i,"aria-")),Uv=(e,n)=>e.hasAttribute(Zd)&&(n==="id"||n==="class"||n==="style"),Zv=(e,n)=>e in n.getBoolAttrs(),YM=(e,n,o,r)=>{const{attributes:i}=e;for(let c=i.length-1;c>=0;c--){const d=i[c],g=d.name,h=d.value;!zf(n,o,r,e.tagName.toLowerCase(),g,h)&&!Uv(e,g)?e.removeAttribute(g):Zv(g,o)&&e.setAttribute(g,g)}},c4=(e,n,o)=>{const r=i4();return r.addHook("uponSanitizeElement",(i,c)=>{zv(i,e,n,o.track(i),c)}),r.addHook("uponSanitizeAttribute",(i,c)=>{bg(i,e,n,o.current(),c)}),r},u4=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},XM=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};i4().sanitize(e,o)},JM=(e,n)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=i4(),i=n.allow_mathml_annotation_encodings,c=Ge(i)&&i.length>0,d=h=>{const y=h.getAttribute("encoding");return c&&q(y)&&Ft(i,y)},g=(h,y)=>c&&y==="semantics"?N.some(!0):y==="annotation"?N.some(It(h)&&d(h)):Ge(n.extended_mathml_elements)&&n.extended_mathml_elements.includes(y)?N.from(!0):N.none();r.addHook("uponSanitizeElement",(h,y)=>{var A;const M=(A=y.tagName)!==null&&A!==void 0?A:h.nodeName.toLowerCase();g(h,M).each(_=>{y.allowedTags[M]=_,!_&&n.sanitize&&It(h)&&h.remove()})}),r.addHook("uponSanitizeAttribute",(h,y)=>{Ge(n.extended_mathml_attributes)&&n.extended_mathml_attributes.includes(y.attrName)&&(y.forceKeepAttr=!0)}),r.sanitize(e,o)},dp=e=>n=>{const o=d7(n);if(o==="svg")XM(n);else if(o==="math")JM(n,e);else throw new Error("Not a namespace element")},QM=(e,n)=>{const o=f7();if(e.sanitize){const r=c4(e,n,o);return{sanitizeHtmlElement:(c,d)=>{r.sanitize(c,u4(e,d)),r.removed=[],o.reset()},sanitizeNamespaceElement:dp(e)}}else return{sanitizeHtmlElement:(c,d)=>{const g=document.createNodeIterator(c,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let h;for(;h=g.nextNode();){const y=o.track(h);zv(h,e,n,y),It(h)&&YM(h,e,n,y)}o.reset()},sanitizeNamespaceElement:qe}},d4=ct.makeMap,f4=ct.extend,Wv=(e,n,o,r)=>{const i=e.name,c=i in o&&i!=="title"&&i!=="textarea"&&i!=="noscript",d=n.childNodes;for(let g=0,h=d.length;g<h;g++){const y=d[g],A=new Ya(y.nodeName.toLowerCase(),y.nodeType);if(It(y)){const M=y.attributes;for(let R=0,_=M.length;R<_;R++){const Z=M[R];A.attr(Z.name,Z.value)}Sf(A.name)&&(r(y),A.value=y.innerHTML)}else rt(y)?(A.value=y.data,c&&(A.raw=!0)):(Iu(y)||WK(y)||js(y))&&(A.value=y.data);Sf(A.name)||Wv(A,y,o,r),e.append(A)}},qM=(e,n,o)=>{const r=[];for(let i=e,c=i;i;c=i,i=i.walk()){const d=i;ke(n,g=>g(d)),gt(d.parent)&&d!==e?i=c:r.push(d)}for(let i=r.length-1;i>=0;i--){const c=r[i];ke(o,d=>d(c))}},e6=(e,n,o,r)=>{const i=o.validate,c=n.getNonEmptyElements(),d=n.getWhitespaceElements(),g=f4(d4("script,style,head,html,body,title,meta,param"),n.getBlockElements()),h=$b(n),y=/[ \t\r\n]+/g,A=/^[ \t\r\n]+/,M=/[ \t\r\n]+$/,R=ue=>{let ge=ue.parent;for(;ye(ge);){if(ge.name in d)return!0;ge=ge.parent}return!1},_=ue=>{let ge=ue;for(;ye(ge);){if(ge.name in h)return rp(n,c,d,ge);ge=ge.parent}return!1},Z=ue=>ue.name in g||Rm(n,ue)||Sf(ue.name)&&ue.parent===e,V=(ue,ge)=>{const Se=ge?ue.prev:ue.next;return ye(Se)||gt(ue.parent)?!1:Z(ue.parent)&&(ue.parent!==e||r.isRootContent===!0)};return[ue=>{var ge;if(ue.type===3&&!R(ue)){let Se=(ge=ue.value)!==null&&ge!==void 0?ge:"";Se=Se.replace(y," "),(x$(ue.prev,Z)||V(ue,!0))&&(Se=Se.replace(A,"")),Se.length===0||Se===" "&&ue.prev&&ue.prev.type===lh&&ue.next&&ue.next.type===lh?ue.remove():ue.value=Se}},ue=>{var ge;if(ue.type===1){const Se=n.getElementRule(ue.name);if(i&&Se){const Ue=rp(n,c,d,ue);Se.paddInEmptyBlock&&Ue&&_(ue)?Vd(o,r,Z,ue):Se.removeEmpty&&Ue?Z(ue)?ue.remove():ue.unwrap():Se.paddEmpty&&(Ue||d2(ue))&&Vd(o,r,Z,ue)}}else if(ue.type===3&&!R(ue)){let Se=(ge=ue.value)!==null&&ge!==void 0?ge:"";(ue.next&&Z(ue.next)||V(ue,!1))&&(Se=Se.replace(M,"")),Se.length===0?ue.remove():ue.value=Se}}]},t6=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},yg=(e={},n=ga())=>{const o=OM(),r=OM(),i={validate:!0,root_name:"body",sanitize:!0,...e},c=new DOMParser,d=QM(i,n),g=(ge,Se,Ue="html")=>{const et=Ue==="xhtml"?"application/xhtml+xml":"text/html",Tt=sn(n.getSpecialElements(),Se.toLowerCase()),Ne=Tt?`<${Se}>${ge}</${Se}>`:ge,Ae=()=>Ue==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Ne}</body></html>`:/^[\s]*<head/i.test(ge)||/^[\s]*<html/i.test(ge)||/^[\s]*<!DOCTYPE/i.test(ge)?`<html>${Ne}</html>`:`<body>${Ne}</body>`,je=c.parseFromString(Ae(),et).body;return d.sanitizeHtmlElement(je,et),Tt?je.firstChild:je},h=o.addFilter,y=o.getFilters,A=o.removeFilter,M=r.addFilter,R=r.getFilters,_=r.removeFilter,Z=(ge,Se)=>{kE(n,ge)&&Se.push(ge)},V=(ge,Se)=>{const Ue=q(Se.attr(Zd)),et=Se.type===1&&!sn(ge,Se.name)&&!Rm(n,Se)&&!Sf(Se.name);return Se.type===3||et&&!Ue},G=(ge,Se)=>{const Ue=f4(d4("script,style,head,html,body,title,meta,param"),n.getBlockElements()),et=/^[ \t\r\n]+/,Tt=/[ \t\r\n]+$/;let Ne=ge.firstChild,Ae=null;const je=wt=>{var Vt,Mn;wt&&(Ne=wt.firstChild,Ne&&Ne.type===3&&(Ne.value=(Vt=Ne.value)===null||Vt===void 0?void 0:Vt.replace(et,"")),Ne=wt.lastChild,Ne&&Ne.type===3&&(Ne.value=(Mn=Ne.value)===null||Mn===void 0?void 0:Mn.replace(Tt,"")))};if(n.isValidChild(ge.name,Se.toLowerCase())){for(;Ne;){const wt=Ne.next;V(Ue,Ne)?(Ae||(Ae=new Ya(Se,1),Ae.attr(i.forced_root_block_attrs),ge.insert(Ae,Ne)),Ae.append(Ne)):(je(Ae),Ae=null),Ne=wt}je(Ae)}},ue={schema:n,addAttributeFilter:M,getAttributeFilters:R,removeAttributeFilter:_,addNodeFilter:h,getNodeFilters:y,removeNodeFilter:A,parse:(ge,Se={})=>{var Ue;const et=i.validate,Tt=(Ue=Se.context)!==null&&Ue!==void 0?Ue:i.root_name,Ne=g(ge,Tt,Se.format);Lu(n,Ne);const Ae=new Ya(Tt,11);Wv(Ae,Ne,n.getSpecialElements(),d.sanitizeNamespaceElement),Ne.innerHTML="";const[je,wt]=e6(Ae,n,i,Se),Vt=[],Mn=et?ds=>Z(ds,Vt):qe,Pn={nodes:{},attributes:{}},io=ds=>U5(y(),R(),ds,Pn);if(qM(Ae,[je,io],[wt,Mn]),Vt.reverse(),et&&Vt.length>0)if(Se.context){const{pass:ds,fail:cr}=Rr(Vt,Cr=>Cr.parent===Ae);OE(cr,n,Ae,io),Se.invalid=ds.length>0}else OE(Vt,n,Ae,io);const So=t6(i,Se);return So&&(Ae.name==="body"||Se.isRootContent)&&G(Ae,So),Se.invalid||sp(Pn,Se),Ae}};return TH(ue,i),bH(ue,i,n),ue},Wd=e=>g2(e)?Hd({validate:!1}).serialize(e):e,jd=(e,n,o)=>{const r=Wd(e),i=n(r);if(i.isDefaultPrevented())return i;if(g2(e))if(i.content!==r){const c=yg({validate:!1,forced_root_block:!1,...o}).parse(i.content,{context:e.name});return{...i,content:c}}else return{...i,content:e};else return i},Vl=e=>({sanitize:ev(e),sandbox_iframes:lw(e),sandbox_iframes_exclusions:yy(e)}),n6=(e,n)=>{if(n.no_events)return dr.value(n);{const o=qc(e,n);return o.isDefaultPrevented()?dr.error(ew(e,{content:"",...o}).content):dr.value(o)}},o6=(e,n,o)=>o.no_events?n:jd(n,i=>ew(e,{...o,content:i}),Vl(e)).content,m4=(e,n)=>{if(n.no_events)return dr.value(n);{const o=jd(n.content,r=>$h(e,{...n,content:r}),Vl(e));return o.isDefaultPrevented()?(Ho(e,o),dr.error(void 0)):dr.value(o)}},g4=(e,n,o)=>{o.no_events||Ho(e,{...o,content:n})},h4=(e,n,o)=>({element:e,width:n,rows:o}),s6=(e,n)=>({element:e,cells:n}),zH=(e,n)=>({x:e,y:n}),r6=(e,n)=>Oa(e,n).bind(oi).getOr(1),UH=(e,n,o,r,i)=>{const c=r6(i,"rowspan"),d=r6(i,"colspan"),g=e.rows;for(let h=o;h<o+c;h++){g[h]||(g[h]=s6(ae(r),[]));for(let y=n;y<n+d;y++){const A=g[h].cells;A[y]=h===o&&y===n?i:Y(i)}}},ZH=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},WH=(e,n,o)=>{for(;ZH(e,n,o);)n++;return n},a6=e=>ts(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),M2=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const i=o[r].cells;for(let c=0;c<i.length;c++)if(zn(i[c],n))return N.some(zH(c,r))}return N.none()},R2=(e,n,o,r,i)=>{const c=[],d=e.rows;for(let g=o;g<=i;g++){const h=d[g].cells,y=n<r?h.slice(n,r+1):h.slice(r,n+1);c.push(s6(d[g].element,y))}return c},i6=(e,n,o)=>{const r=n.x,i=n.y,c=o.x,d=o.y,g=i<d?R2(e,r,i,c,d):R2(e,r,d,c,i);return h4(e.element,a6(g),g)},jH=(e,n)=>{const o=Y(e.element),r=ne.fromTag("tbody");return Du(r,n),_s(o,r),o},GH=e=>Yt(e.rows,n=>{const o=Yt(n.cells,i=>{const c=ae(i);return nr(c,"colspan"),nr(c,"rowspan"),c}),r=Y(n.element);return Du(r,o),r}),l6=e=>{const n=h4(Y(e),0,[]);return ke(Yo(e,"tr"),(o,r)=>{ke(Yo(o,"td,th"),(i,c)=>{UH(n,WH(n,c,r),r,o,i)})}),h4(n.element,a6(n.rows),n.rows)},c6=e=>jH(e,GH(e)),p4=(e,n,o)=>M2(e,n).bind(r=>M2(e,o).map(i=>i6(e,r,i))),u6=e=>Oo(e,n=>so(n)==="ul"||so(n)==="ol"),d6=(e,n)=>Oo(e,o=>so(o)==="li"&&kw(o,n)).fold(Ye([]),o=>u6(e).map(r=>{const i=ne.fromTag(so(r)),c=Ci(YS(r),(d,g)=>gs(g,"list-style"));return pb(i,c),[ne.fromTag("li"),i]}).getOr([])),v4=(e,n)=>{const o=ts(n,(r,i)=>(_s(i,r),i),e);return n.length>0?ex([o]):o},KH=e=>Ad(e)?lc(e).filter(Ph).fold(Ye([]),n=>[e,n]):Ph(e)?[e]:[],YH=(e,n,o)=>{const r=ne.fromDom(n.commonAncestorContainer),i=Wu(r,e),c=Nt(i,h=>o.isWrapper(so(h))),d=d6(i,n),g=c.concat(d.length?d:KH(r));return Yt(g,Y)},ou=()=>ex([]),Rc=(e,n,o)=>v4(ne.fromDom(n.cloneContents()),YH(e,n,o)),P2=(e,n)=>x1(n,"table",ut(zn,e)),f6=(e,n)=>P2(e,n[0]).bind(o=>{const r=n[0],i=n[n.length-1],c=l6(o);return p4(c,r,i).map(d=>ex([c6(d)]))}).getOrThunk(ou),N2=(e,n,o)=>n.length>0&&n[0].collapsed?ou():Rc(e,n[0],o),m6=(e,n,o)=>{const r=lD(n,e);return r.length>0?f6(e,r):N2(e,n,o)},jv=(e,n)=>n>=0&&n<e.length&&Ym(e.charAt(n)),b4=e=>Oi(e.innerText),g6=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),h6=e=>N.from(e.selection.getRng()).map(n=>{var o;const r=N.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),i=e.getBody(),c=g6(r),d=ne.fromDom(n.cloneContents());GD(d),nE(d);const g=e.dom.add(i,c,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},d.dom),h=b4(g),y=Oi((o=g.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(g),jv(y,0)||jv(y,y.length-1)){const A=r.getOr(i),M=b4(A),R=M.indexOf(h);if(R===-1)return h;{const _=jv(M,R-1),Z=jv(M,R+h.length);return(_?" ":"")+h+(Z?" ":"")}}else return h}).getOr(""),p6=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),i=e.selection.getSel(),c=$l(e,My(i)),d=n.contextual?m6(ne.fromDom(e.getBody()),c,e.schema).dom:o.cloneContents();return d&&r.appendChild(d),e.selection.serializer.serialize(r,n)},I2=(e,n)=>{if(n.format==="text")return h6(e);{const o=p6(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},y4=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),XH=(e,n,o={})=>{const r=y4(o,n);return n6(e,r).fold(Qn,i=>{const c=I2(e,i);return o6(e,c,i)})},C4=0,v6=1,b6=2,y6=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),i=new Array(o),c=(A,M,R)=>({start:A,end:M,diag:R}),d=(A,M,R,_,Z)=>{const V=h(A,M,R,_);if(V===null||V.start===M&&V.diag===M-_||V.end===A&&V.diag===A-R){let G=A,oe=R;for(;G<M||oe<_;)G<M&&oe<_&&e[G]===n[oe]?(Z.push([C4,e[G]]),++G,++oe):M-A>_-R?(Z.push([b6,e[G]]),++G):(Z.push([v6,n[oe]]),++oe)}else{d(A,V.start,R,V.start-V.diag,Z);for(let G=V.start;G<V.end;++G)Z.push([C4,e[G]]);d(V.end,M,V.end-V.diag,_,Z)}},g=(A,M,R,_)=>{let Z=A;for(;Z-M<_&&Z<R&&e[Z]===n[Z-M];)++Z;return c(A,Z,M)},h=(A,M,R,_)=>{const Z=M-A,V=_-R;if(Z===0||V===0)return null;const G=Z-V,oe=V+Z,ue=(oe%2===0?oe:oe+1)/2;r[1+ue]=A,i[1+ue]=M+1;let ge,Se,Ue,et,Tt;for(ge=0;ge<=ue;++ge){for(Se=-ge;Se<=ge;Se+=2){for(Ue=Se+ue,Se===-ge||Se!==ge&&r[Ue-1]<r[Ue+1]?r[Ue]=r[Ue+1]:r[Ue]=r[Ue-1]+1,et=r[Ue],Tt=et-A+R-Se;et<M&&Tt<_&&e[et]===n[Tt];)r[Ue]=++et,++Tt;if(G%2!==0&&G-ge<=Se&&Se<=G+ge&&i[Ue-G]<=r[Ue])return g(i[Ue-G],Se+A-R,M,_)}for(Se=G-ge;Se<=G+ge;Se+=2){for(Ue=Se+ue-G,Se===G-ge||Se!==G+ge&&i[Ue+1]<=i[Ue-1]?i[Ue]=i[Ue+1]-1:i[Ue]=i[Ue-1],et=i[Ue]-1,Tt=et-A+R-Se;et>=A&&Tt>=R&&e[et]===n[Tt];)i[Ue]=et--,Tt--;if(G%2===0&&-ge<=Se&&Se<=ge&&i[Ue]<=r[Ue+G])return g(i[Ue],Se+A-R,M,_)}}return null},y=[];return d(0,e.length,0,n.length,y),y},C6=e=>It(e)?e.outerHTML:rt(e)?$o.encodeRaw(e.data,!1):Iu(e)?"<!--"+e.data+"-->":"",JH=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},S4=(e,n,o)=>{const r=JH(n);if(e.hasChildNodes()&&o<e.childNodes.length){const i=e.childNodes[o];e.insertBefore(r,i)}else e.appendChild(r)},QH=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},qH=(e,n)=>{let o=0;ke(e,r=>{r[0]===C4?o++:r[0]===v6?(S4(n,r[1],o),o++):r[0]===b6&&QH(n,o)})},e9=(e,n)=>Nt(Yt(Hn(e.childNodes),x(Oi,C6)),o=>o.length>0),t9=(e,n)=>{const o=Yt(Hn(n.childNodes),C6);return qH(y6(o,e),n),n},n9=zo(()=>document.implementation.createHTMLDocument("undo")),o9=e=>e.querySelector("iframe")!==null,s9=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),B2=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),fp=e=>{const n=e.serializer.getTempAttrs(),o=b_(e.getBody(),n);return o9(o)?s9(e9(o)):B2(Oi(o.innerHTML))},x4=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?t9(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:ye(r)&&nD(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},w4=e=>e.type==="fragmented"?e.fragments.join(""):e.content,S6=e=>{const n=ne.fromTag("body",n9());return Vn(n,w4(e)),ke(Yo(n,"*[data-mce-bogus]"),O),Jt(n)},r9=(e,n)=>w4(e)===w4(n),x6=(e,n)=>S6(e)===S6(n),E4=(e,n)=>!e||!n?!1:r9(e,n)?!0:x6(e,n),T4=e=>e.get()===0,mp=(e,n,o)=>{T4(o)&&(e.typing=n)},w6=(e,n)=>{e.typing&&(mp(e,!1,n),e.add())},a9=e=>{e.typing&&(e.typing=!1,e.add())},i9=(e,n,o)=>{T4(n)&&o.set(Pf(e.selection))},l9=(e,n,o,r,i,c,d)=>{const g=fp(e),h=ct.extend(c||{},g);if(!T4(r)||e.removed)return null;const y=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:h,lastLevel:y,originalEvent:d}).isDefaultPrevented()||y&&E4(y,h))return null;n.data[o.get()]&&i.get().each(R=>{n.data[o.get()].beforeBookmark=R});const A=bk(e);if(A&&n.data.length>A){for(let R=0;R<n.data.length-1;R++)n.data[R]=n.data[R+1];n.data.length--,o.set(n.data.length)}h.bookmark=Pf(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(h),o.set(n.data.length-1);const M={level:h,lastLevel:y,originalEvent:d};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",M),e.dispatch("change",M)):e.dispatch("AddUndo",M),h},c9=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},u9=(e,n,o,r,i)=>{if(n.transact(r)){const c=n.data[o.get()].bookmark,d=n.data[o.get()-1];x4(e,d,!0),n.transact(i)&&(n.data[o.get()-1].beforeBookmark=c)}},d9=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],x4(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},L2=(e,n,o,r)=>{let i;return n.typing&&(n.add(),n.typing=!1,mp(n,!1,o)),r.get()>0&&(r.set(r.get()-1),i=n.data[r.get()],x4(e,i,!0),e.setDirty(!0),e.dispatch("Undo",{level:i})),i},F2=e=>{e.clear(),e.add()},f9=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!E4(fp(e),n.data[0]),m9=(e,n)=>n.get()<e.data.length-1&&!e.typing,_2=(e,n,o)=>(w6(e,n),e.beforeChange(),e.ignore(o),e.add()),g9=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},h9=(e,n)=>{const o=e.dom,r=ye(n)?n:e.getBody();ke(o.select("table,a",r),i=>{switch(i.nodeName){case"TABLE":const c=DL(e),d=o.getAttrib(i,"border");(!d||d==="0")&&e.hasVisual?o.addClass(i,c):o.removeClass(i,c);break;case"A":if(!o.getAttrib(i,"href")){const g=o.getAttrib(i,"name")||i.id,h=xk(e);g&&e.hasVisual?o.addClass(i,h):o.removeClass(i,h)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},E6=e=>({init:{bindEvents:qe},undoManager:{beforeChange:(n,o)=>i9(e,n,o),add:(n,o,r,i,c,d)=>l9(e,n,o,r,i,c,d),undo:(n,o,r)=>L2(e,n,o,r),redo:(n,o)=>d9(e,n,o),clear:(n,o)=>c9(e,n,o),reset:n=>F2(n),hasUndo:(n,o)=>f9(e,n,o),hasRedo:(n,o)=>m9(n,o),transact:(n,o,r)=>_2(n,o,r),ignore:(n,o)=>g9(n,o),extra:(n,o,r,i)=>u9(e,n,o,r,i)},formatter:{match:(n,o,r,i)=>IE(e,n,o,r,i),matchAll:(n,o)=>MY(e,n,o),matchNode:(n,o,r,i)=>zd(e,n,o,r,i),canApply:n=>G$(e,n),closest:n=>j$(e,n),apply:(n,o,r)=>Yu(e,n,o,r),remove:(n,o,r,i)=>pM(e,n,o,r,i),toggle:(n,o,r)=>pH(e,n,o,r),formatChanged:(n,o,r,i,c)=>hH(e,n,o,r,i,c)},editor:{getContent:n=>cY(e,n),setContent:(n,o)=>Mv(e,n,o),insertContent:(n,o)=>J5(e,n,o),addVisual:n=>h9(e,n)},selection:{getContent:(n,o)=>XH(e,n,o)},autocompleter:{addDecoration:qe,removeDecoration:qe},raw:{getModel:()=>N.none()}}),p9=e=>{const n=y=>Te(y)?y:{},{init:o,undoManager:r,formatter:i,editor:c,selection:d,autocompleter:g,raw:h}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(y,A,M)=>r.transact(M),ignore:(y,A)=>r.ignore(A),extra:(y,A,M,R)=>r.extra(M,R)},formatter:{match:(y,A,M,R)=>i.match(y,n(A),R),matchAll:i.matchAll,matchNode:i.matchNode,canApply:y=>i.canApply(y),closest:y=>i.closest(y),apply:(y,A,M)=>i.apply(y,n(A)),remove:(y,A,M,R)=>i.remove(y,n(A)),toggle:(y,A,M)=>i.toggle(y,n(A)),formatChanged:(y,A,M,R,_)=>i.formatChanged(A,M,R,_)},editor:{getContent:y=>c.getContent(y),setContent:(y,A)=>({content:c.setContent(y,A),html:""}),insertContent:(y,A)=>(c.insertContent(y),""),addVisual:c.addVisual},selection:{getContent:(y,A)=>d.getContent(A)},autocompleter:{addDecoration:g.addDecoration,removeDecoration:g.removeDecoration},raw:{getModel:()=>N.some(h.getRawModel())}}},v9=()=>{const e=Ye(null),n=Ye("");return{init:{bindEvents:qe},undoManager:{beforeChange:qe,add:e,undo:e,redo:e,clear:qe,reset:qe,hasUndo:Le,hasRedo:Le,transact:e,ignore:qe,extra:qe},formatter:{match:Le,matchAll:Ye([]),matchNode:Ye(void 0),canApply:Le,closest:n,apply:qe,remove:qe,toggle:qe,formatChanged:Ye({unbind:qe})},editor:{getContent:n,setContent:Ye({content:"",html:""}),insertContent:Ye(""),addVisual:qe},selection:{getContent:n},autocompleter:{addDecoration:qe,removeDecoration:qe},raw:{getModel:Ye(N.none())}}},Qu=e=>sn(e.plugins,"rtc"),b9=e=>_o(e.plugins,"rtc").bind(n=>N.from(n.setup)),y9=e=>{const n=e;return b9(e).fold(()=>(n.rtcInstance=E6(e),N.none()),o=>(n.rtcInstance=v9(),N.some(()=>o().then(r=>(n.rtcInstance=p9(r),r.rtc.isRemote)))))},A4=e=>e.rtcInstance?e.rtcInstance:E6(e),yr=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},C9=(e,n,o)=>{yr(e).undoManager.beforeChange(n,o)},LY=(e,n,o,r,i,c,d)=>yr(e).undoManager.add(n,o,r,i,c,d),Pc=(e,n,o,r)=>yr(e).undoManager.undo(n,o,r),T6=(e,n,o)=>yr(e).undoManager.redo(n,o),S9=(e,n,o)=>{yr(e).undoManager.clear(n,o)},A6=(e,n)=>{yr(e).undoManager.reset(n)},x9=(e,n,o)=>yr(e).undoManager.hasUndo(n,o),w9=(e,n,o)=>yr(e).undoManager.hasRedo(n,o),FY=(e,n,o,r)=>yr(e).undoManager.transact(n,o,r),ya=(e,n,o)=>{yr(e).undoManager.ignore(n,o)},E9=(e,n,o,r,i)=>{yr(e).undoManager.extra(n,o,r,i)},T9=(e,n,o,r,i)=>yr(e).formatter.match(n,o,r,i),A9=(e,n,o)=>yr(e).formatter.matchAll(n,o),O9=(e,n,o,r,i)=>yr(e).formatter.matchNode(n,o,r,i),k9=(e,n)=>yr(e).formatter.canApply(n),$2=(e,n)=>yr(e).formatter.closest(n),D9=(e,n,o,r)=>{yr(e).formatter.apply(n,o,r)},O4=(e,n,o,r,i)=>{yr(e).formatter.remove(n,o,r,i)},O6=(e,n,o,r)=>{yr(e).formatter.toggle(n,o,r)},H2=(e,n,o,r,i,c)=>yr(e).formatter.formatChanged(n,o,r,i,c),M9=(e,n)=>A4(e).editor.getContent(n),R9=(e,n,o)=>A4(e).editor.setContent(n,o),P9=(e,n,o)=>A4(e).editor.insertContent(n,o),N9=(e,n,o)=>yr(e).selection.getContent(n,o),I9=(e,n)=>yr(e).editor.addVisual(n),k4=e=>yr(e).init.bindEvents(),B9=(e,n={})=>{const o=n.format?n.format:"html";return N9(e,o,n)},D4=e=>e.dom.length===0?(b(e),N.none()):N.some(e),k6=(e,n)=>e.filter(o=>fv.isBookmarkNode(o.dom)).bind(n?Au:Tu),L9=(e,n,o,r,i)=>{const c=e.dom,d=n.dom,g=r?c.length:d.length;r?(pE(c,d,i,!1,!r),o.setStart(d,g)):(pE(d,c,i,!1,!r),o.setEnd(d,g))},F9=(e,n,o)=>{lc(e).each(r=>{const i=e.dom;n&&Cv(r,Ie(i,0),o)?t2(i,0,o):!n&&Sv(r,Ie(i,i.length),o)&&hE(i,i.length,o)})},D6=(e,n,o,r,i)=>{e.bind(c=>((r?hE:t2)(c.dom,r?c.dom.length:0,i),n.filter(Ta).map(g=>L9(c,g,o,r,i)))).orThunk(()=>k6(n,r).or(n).filter(Ta).map(d=>F9(d,r,i)))},_9=(e,n,o)=>{const r=N.from(n.firstChild).map(ne.fromDom),i=N.from(n.lastChild).map(ne.fromDom);e.deleteContents(),e.insertNode(n);const c=r.bind(Tu).filter(Ta).bind(D4),d=i.bind(Au).filter(Ta).bind(D4);D6(c,r,e,!0,o),D6(d,i,e,!1,o),e.collapse(!1)},$9=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),V2=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),i=r?{context:r.nodeName.toLowerCase()}:{},c=e.parser.parse(n.content,{forced_root_block:!1,...i,...n});return Hd({validate:!1},e.schema).serialize(c)}else return n.content},M6=(e,n,o={})=>{const r=$9(o,n);m4(e,r).each(i=>{const c=V2(e,i),d=e.selection.getRng();_9(d,d.createContextualFragment(c),e.schema),e.selection.setRng(d),ng(e,d),g4(e,c,i)})},M4=(e,n,o)=>{if(sn(e,n)){const r=Nt(e[n],i=>i!==o);r.length===0?delete e[n]:e[n]=r}};var H9=(e,n)=>{let o,r;const i=(g,h)=>Oo(h,y=>e.is(y,g)),c=g=>e.getParents(g,void 0,e.getRoot()),d=()=>{o={},r={},n.on("NodeChange",g=>{const h=g.element,y=c(h),A={};Be(o,(M,R)=>{i(R,y).each(_=>{r[R]||(ke(M,Z=>{Z(!0,{node:_,selector:R,parents:y})}),r[R]=M),A[R]=M})}),Be(r,(M,R)=>{A[R]||(delete r[R],ke(M,_=>{_(!1,{node:h,selector:R,parents:y})}))})})};return{selectorChangedWithUnbind:(g,h)=>(o||d(),o[g]||(o[g]=[]),o[g].push(h),i(g,c(n.selection.getStart())).each(()=>{r[g]=o[g]}),{unbind:()=>{M4(o,g,h),M4(r,g,h)}})}};const R4=e=>!!(e&&e.ownerDocument)&&El(ne.fromDom(e.ownerDocument),ne.fromDom(e)),V9=e=>e?R4(e.startContainer)&&R4(e.endContainer):!1,R6=(e,n,o,r)=>{let i,c;const{selectorChangedWithUnbind:d}=H9(e,r),g=(pt,Ht)=>{const oo=e.createRng();ye(pt)&&ye(Ht)?(oo.setStart(pt,Ht),oo.setEnd(pt,Ht),Se(oo),oe(!1)):(Dw(e,oo,r.getBody(),!0),Se(oo))},h=pt=>B9(r,pt),y=(pt,Ht)=>M6(r,pt,Ht),A=pt=>_D(r.getBody(),ge(),pt),M=pt=>$D(r.getBody(),ge(),pt),R=(pt,Ht)=>cr.getBookmark(pt,Ht),_=pt=>cr.moveToBookmark(pt),Z=(pt,Ht)=>(iY(e,pt,Ht).each(Se),pt),V=()=>{const pt=ge(),Ht=ue();return!pt||pt.item?!1:pt.compareEndPoints?pt.compareEndPoints("StartToEnd",pt)===0:!Ht||pt.collapsed},G=()=>{if(r.mode.isReadOnly())return!1;const pt=ge(),Ht=r.getBody().querySelectorAll('[data-mce-selected="1"]');return Ht.length>0?Tn(Ht,oo=>e.isEditable(oo.parentElement)):FD(e,pt)},oe=pt=>{const Ht=ge();Ht.collapse(!!pt),Se(Ht)},ue=()=>n.getSelection?n.getSelection():n.document.selection,ge=()=>{let pt;const Ht=(lo,He,nt)=>{try{return He.compareBoundaryPoints(lo,nt)}catch{return-1}},oo=n.document;if(ye(r.bookmark)&&!qm(r)){const lo=zw(r);if(lo.isSome())return lo.map(He=>$l(r,[He])[0]).getOr(oo.createRange())}try{const lo=ue();lo&&!wh(lo.anchorNode)&&(lo.rangeCount>0?pt=lo.getRangeAt(0):pt=oo.createRange(),pt=$l(r,[pt])[0])}catch{}if(pt||(pt=oo.createRange()),O1(pt.startContainer)&&pt.collapsed){const lo=e.getRoot();pt.setStart(lo,0),pt.setEnd(lo,0)}return i&&c&&(Ht(pt.START_TO_START,pt,i)===0&&Ht(pt.END_TO_END,pt,i)===0?pt=c:(i=null,c=null)),pt},Se=(pt,Ht)=>{if(!V9(pt))return;const oo=ue();if(pt=r.dispatch("SetSelectionRange",{range:pt,forward:Ht}).range,oo){c=pt;try{oo.removeAllRanges(),oo.addRange(pt)}catch{}Ht===!1&&oo.extend&&(oo.collapse(pt.endContainer,pt.endOffset),oo.extend(pt.startContainer,pt.startOffset)),i=oo.rangeCount>0?oo.getRangeAt(0):null}if(!pt.collapsed&&pt.startContainer===pt.endContainer&&(oo!=null&&oo.setBaseAndExtent)&&pt.endOffset-pt.startOffset<2&&pt.startContainer.hasChildNodes()){const He=pt.startContainer.childNodes[pt.startOffset];He&&He.nodeName==="IMG"&&(oo.setBaseAndExtent(pt.startContainer,pt.startOffset,pt.endContainer,pt.endOffset),(oo.anchorNode!==pt.startContainer||oo.focusNode!==pt.endContainer)&&oo.setBaseAndExtent(He,0,He,1))}r.dispatch("AfterSetSelectionRange",{range:pt,forward:Ht})},Ue=pt=>(y(e.getOuterHTML(pt)),pt),et=()=>rl(r.getBody(),ge()),Tt=(pt,Ht)=>Pa(e,ge(),pt,Ht),Ne=()=>{const pt=ue(),Ht=pt==null?void 0:pt.anchorNode,oo=pt==null?void 0:pt.focusNode;if(!pt||!Ht||!oo||wh(Ht)||wh(oo))return!0;const lo=e.createRng(),He=e.createRng();try{lo.setStart(Ht,pt.anchorOffset),lo.collapse(!0),He.setStart(oo,pt.focusOffset),He.collapse(!0)}catch{return!0}return lo.compareBoundaryPoints(lo.START_TO_START,He)<=0},ds={dom:e,win:n,serializer:o,editor:r,expand:(pt={type:"word"})=>Se(sl(e).expand(ge(),pt)),collapse:oe,setCursorLocation:g,getContent:h,setContent:y,getBookmark:R,moveToBookmark:_,select:Z,isCollapsed:V,isEditable:G,isForward:Ne,setNode:Ue,getNode:et,getSel:ue,setRng:Se,getRng:ge,getStart:A,getEnd:M,getSelectedBlocks:Tt,normalize:()=>{const pt=ge(),Ht=ue();if(!Ow(Ht)&&Py(r)){const oo=jy(e,pt);return oo.each(lo=>{Se(lo,Ne())}),oo.getOr(pt)}return pt},selectorChanged:(pt,Ht)=>(d(pt,Ht),ds),selectorChangedWithUnbind:d,getScrollContainer:()=>{let pt,Ht=e.getRoot();for(;Ht&&Ht.nodeName!=="BODY";){if(Ht.scrollHeight>Ht.clientHeight){pt=Ht;break}Ht=Ht.parentNode}return pt},scrollIntoView:(pt,Ht)=>{ye(pt)?m_(r,pt,Ht):ng(r,ge(),Ht)},placeCaretAt:(pt,Ht)=>Se(Jo(pt,Ht,r.getDoc())),getBoundingClientRect:()=>{const pt=ge();return pt.collapsed?Ie.fromRangeStart(pt).getClientRects()[0]:pt.getBoundingClientRect()},destroy:()=>{n=i=c=null,Cr.destroy()}},cr=fv(ds),Cr=kD(ds,r);return ds.bookmarkManager=cr,ds.controlSelection=Cr,ds},z9=(e,n,o)=>{n.addNodeFilter("br",(r,i,c)=>{const d=ct.extend({},o.getBlockElements()),g=o.getNonEmptyElements(),h=o.getWhitespaceElements();d.body=1;const y=A=>A.name in d||Rm(o,A);for(let A=0,M=r.length;A<M;A++){let R=r[A],_=R.parent;if(_&&y(_)&&R===_.lastChild){let Z=R.prev;for(;Z;){const V=Z.name;if(V!=="span"||Z.attr("data-mce-type")!=="bookmark"){V==="br"&&(R=null);break}Z=Z.prev}if(R&&(R.remove(),rp(o,g,h,_))){const V=o.getElementRule(_.name);V&&(V.removeEmpty?_.remove():V.paddEmpty&&Vd(e,c,y,_))}}else{let Z=R;for(;_&&_.firstChild===Z&&_.lastChild===Z&&(Z=_,!d[_.name]);)_=_.parent;if(Z===_){const V=new Ya("#text",3);V.value=Uo,R.replace(V)}}}})},P4=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,i)=>{let c=r.length;for(;c--;){const d=r[c];d.attr("tabindex",d.attr("data-mce-tabindex")),d.attr(i,null)}}),e.addAttributeFilter("src,href,style",(r,i)=>{const c="data-mce-"+i,d=n.url_converter,g=n.url_converter_scope;let h=r.length;for(;h--;){const y=r[h];let A=y.attr(c);A!==void 0?(y.attr(i,A.length>0?A:null),y.attr(c,null)):(A=y.attr(i),i==="style"?A=o.serializeStyle(o.parseStyle(A),y.name):d&&(A=d.call(g,A,i,y.name)),y.attr(i,A.length>0?A:null))}}),e.addAttributeFilter("class",r=>{let i=r.length;for(;i--;){const c=r[i];let d=c.attr("class");d&&(d=d.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),c.attr("class",d.length>0?d:null))}}),e.addAttributeFilter("data-mce-type",(r,i,c)=>{let d=r.length;for(;d--;){const g=r[d];g.attr("data-mce-type")==="bookmark"&&!c.cleanup&&(N.from(g.firstChild).exists(y=>{var A;return!Kb((A=y.value)!==null&&A!==void 0?A:"")})?g.unwrap():g.remove())}}),e.addNodeFilter("script,style",(r,i)=>{var c;const d=h=>h.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=r.length;for(;g--;){const h=r[g],y=h.firstChild,A=(c=y==null?void 0:y.value)!==null&&c!==void 0?c:"";if(i==="script"){const M=h.attr("type");M&&h.attr("type",M==="mce-no/type"?null:M.replace(/^mce\-/,"")),n.element_format==="xhtml"&&y&&A.length>0&&(y.value=`// <![CDATA[
`+d(A)+`
// ]]>`)}else n.element_format==="xhtml"&&y&&A.length>0&&(y.value=`<!--
`+d(A)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let i=r.length;for(;i--;){const c=r[i],d=c.value;n.preserve_cdata&&(d==null?void 0:d.indexOf("[CDATA["))===0?(c.name="#cdata",c.type=4,c.value=o.decode(d.replace(/^\[CDATA\[|\]\]$/g,""))):(d==null?void 0:d.indexOf("mce:protected "))===0&&(c.name="#text",c.type=3,c.raw=!0,c.value=unescape(d).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,i)=>{let c=r.length;for(;c--;){const d=r[c];d.type===7?d.remove():d.type===1&&i==="input"&&!d.attr("type")&&d.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{ke(r,i=>{i.attr("data-mce-type")==="format-caret"&&(i.isEmpty(e.schema.getNonEmptyElements())?i.remove():i.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,i)=>{let c=r.length;for(;c--;)r[c].attr(i,null)}),n.remove_trailing_brs&&z9(n,e,e.schema)},N4=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},U9=(e,n,o)=>{let r;const i=e.dom;let c=n.cloneNode(!0);const d=document.implementation;if(d.createHTMLDocument){const g=d.createHTMLDocument("");ct.each(c.nodeName==="BODY"?c.childNodes:[c],h=>{g.body.appendChild(g.importNode(h,!0))}),c.nodeName!=="BODY"?c=g.body.firstChild:c=g.body,r=i.doc,i.doc=g}return sk(e,{...o,node:c}),r&&(i.doc=r),c},I4=(e,n)=>ye(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,Z9=(e,n,o)=>I4(e,o)?U9(e,n,o):n,W9=(e,n,o)=>{ct.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,i)=>{let c=r.length;for(;c--;)r[c].attr(i,null)}),n.push(o))},j9=(e,n,o)=>!n.no_events&&e?Xo(e,{...n,content:o}).content:o,G9=(e,n,o)=>{const r=Oi(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||Nh(ne.fromDom(n))?r:ct.trim(r)},K9=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,i=e.parse(n,r);return N4(i),i},Y9=(e,n,o)=>Hd(e,n).serialize(o),P6=(e,n,o,r,i)=>{const c=Y9(n,o,r);return j9(e,i,c)},X9=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},i=n&&n.dom?n.dom:Co.DOM,c=n&&n.schema?n.schema:ga(r),d=yg(r,c);P4(d,r,i);const g=(h,y={})=>{const A={format:"html",...y},M=Z9(n,h,A),R=G9(i,M,A),_=K9(d,R,A);return A.format==="tree"?_:P6(n,r,c,_,A)};return{schema:c,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,serialize:g,addRules:c.addValidElements,setRules:c.setValidElements,addTempAttr:ut(W9,d,o),getTempAttrs:Ye(o),getNodeFilters:d.getNodeFilters,getAttributeFilters:d.getAttributeFilters,removeNodeFilter:d.removeNodeFilter,removeAttributeFilter:d.removeAttributeFilter}},N6=(e,n)=>{const o=X9(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},J9="html",Q9=(e,n)=>({...e,format:n,get:!0,getInner:!0}),q9=(e,n={})=>{const o=n.format?n.format:J9,r=Q9(n,o);return n6(e,r).fold(Qn,i=>{const c=M9(e,i);return o6(e,c,i)})},eV="html",tV=(e,n)=>({format:eV,...e,set:!0,content:n}),Uf=(e,n,o={})=>{const r=tV(o,n);return m4(e,r).map(i=>{const c=R9(e,i.content,i);return g4(e,c.html,i),c.content}).getOr(n)},z2="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),I6=[],B6="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),L6=[{name:"export",replacedWith:"Export to PDF"}],F6=(e,n)=>{const o=Nt(n,r=>sn(e,r));return ot(o)},B4=e=>{const n=F6(e,z2),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),ot(n)},nV=e=>F6(e,I6),_6=(e,n)=>{const o=ct.makeMap(e.plugins," "),i=Nt(n,c=>sn(o,c));return ot(i)},oV=e=>_6(e,B6),sV=e=>_6(e,L6.map(n=>n.name)),rV=(e,n)=>{const o=B4(e),r=oV(n),i=r.length>0,c=o.length>0,d=n.theme==="mobile";if(i||c||d){const g=`
- `,h=d?`

Themes:${g}mobile`:"",y=i?`

Plugins:${g}${r.join(g)}`:"",A=c?`

Options:${g}${o.join(g)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+h+y+A)}},U2=e=>Oo(L6,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),Gv=(e,n)=>{const o=nV(e),r=sV(n),i=r.length>0,c=o.length>0;if(i||c){const d=`
- `,g=i?`

Plugins:${d}${r.map(U2).join(d)}`:"",h=c?`

Options:${d}${o.join(d)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+g+h)}},aV=(e,n)=>{rV(e,n),Gv(e,n)},Gd=Co.DOM,zl=e=>{Gd.setStyle(e.id,"display",e.orgDisplay)},Zf=e=>N.from(e).each(n=>n.destroy()),wo=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},Kv=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),Gd.unbind(n,"submit reset",e.formEventDelegate))},$6=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),i=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&ye(i==null?void 0:i.nextSibling)&&Gd.remove(i.nextSibling),rk(e),e.editorManager.remove(e),!e.inline&&r&&zl(e),Q7(e),Gd.remove(e.getContainer()),Zf(n),Zf(o),e.destroy()}},H6=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Zf(o),Zf(r)),Kv(e),wo(e),e.destroyed=!0}},gp=(()=>{const e={};return{add:(i,c)=>{e[i]=c},get:i=>e[i]?e[i]:{icons:{}},has:i=>sn(e,i)}})(),Wf=hr.ModelManager,Z2=(e,n)=>n.dom[e],W2=(e,n)=>parseInt(or(n,e),10),j2=ut(Z2,"clientWidth"),F4=ut(Z2,"clientHeight"),V6=ut(W2,"margin-top"),z6=ut(W2,"margin-left"),U6=e=>e.dom.getBoundingClientRect(),Z6=(e,n,o)=>{const r=j2(e),i=F4(e);return n>=0&&o>=0&&n<=r&&o<=i},W6=(e,n,o,r)=>{const i=U6(n),c=e?i.left+n.dom.clientLeft+z6(n):0,d=e?i.top+n.dom.clientTop+V6(n):0,g=o-c,h=r-d;return{x:g,y:h}},hp=(e,n,o)=>{const r=ne.fromDom(e.getBody()),i=e.inline?r:fh(r),c=W6(e.inline,i,n,o);return Z6(i,c.x,c.y)},j6=e=>N.from(e).map(ne.fromDom),_4=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return j6(n).map(Jr).getOr(!1)};var iV=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const G6=e=>{const n=[],o=()=>{const R=e.theme;return R&&R.getNotificationManagerImpl?R.getNotificationManagerImpl():iV()},r=()=>N.from(n[0]),i=(R,_)=>R.type===_.type&&R.text===_.text&&!R.progressBar&&!R.timeout&&!_.progressBar&&!_.timeout,c=()=>{r().each(R=>{R.reposition()})},d=R=>{n.push(R)},g=R=>{Ns(n,_=>_===R).each(_=>{n.splice(_,1)})},h=(R,_=!0)=>e.removed||!_4(e)?{}:(_&&e.dispatch("BeforeOpenNotification",{notification:R}),Oo(n,Z=>i(o().getArgs(Z),R)).getOrThunk(()=>{e.editorManager.setActive(e);const Z=o().open(R,()=>{g(Z)},()=>zy(e));return d(Z),c(),e.dispatch("OpenNotification",{notification:{...Z}}),Z})),y=()=>{r().each(R=>{o().close(R),g(R),c()})},A=Ye(n);return(R=>{R.on("SkinLoaded",()=>{const _=ow(R);_&&h({text:_,type:"warning",timeout:0},!1),c()}),R.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(c)}),R.on("remove",()=>{ke(n.slice(),_=>{o().close(_)})}),R.on("keydown",_=>{var Z;const V=((Z=_.key)===null||Z===void 0?void 0:Z.toLowerCase())==="f12"||_.keyCode===123;_.altKey&&V&&(_.preventDefault(),r().map(G=>ne.fromDom(G.getEl())).each(G=>us(G)))})})(e),{open:h,close:y,getNotifications:A}},Cg=hr.PluginManager,jf=hr.ThemeManager;var K6=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const Yv=e=>{let n=[];const o=()=>{const V=e.theme;return V&&V.getWindowManagerImpl?V.getWindowManagerImpl():K6()},r=(V,G)=>(...oe)=>G?G.apply(V,oe):void 0,i=V=>{e.dispatch("OpenWindow",{dialog:V})},c=V=>{e.dispatch("CloseWindow",{dialog:V})},d=V=>{n.push(V),i(V)},g=V=>{c(V),n=Nt(n,G=>G!==V),n.length===0&&e.focus()},h=()=>N.from(n[n.length-1]),y=V=>{e.editorManager.setActive(e),Vw(e),e.ui.show();const G=V();return d(G),G},A=(V,G)=>y(()=>o().open(V,G,g)),M=V=>y(()=>o().openUrl(V,g)),R=(V,G,oe)=>{const ue=o();ue.alert(V,r(oe||ue,G))},_=(V,G,oe)=>{const ue=o();ue.confirm(V,r(oe||ue,G))},Z=()=>{h().each(V=>{o().close(V),g(V)})};return e.on("remove",()=>{ke(n,V=>{o().close(V)})}),{open:A,openUrl:M,alert:R,confirm:_,close:Z}},$4=(e,n)=>{e.notificationManager.open({type:"error",text:n})},Xv=(e,n)=>{e._skinLoaded?$4(e,n):e.on("SkinLoaded",()=>{$4(e,n)})},Y6=(e,n)=>{Xv(e,Ks.translate(["Failed to upload image: {0}",n]))},pp=(e,n,o)=>{my(e,n,{message:o}),console.error(o)},vp=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,X6=(e,n,o)=>{pp(e,"PluginLoadError",vp("plugin",n,o))},J6=(e,n,o)=>{pp(e,"IconsLoadError",vp("icons",n,o))},Q6=(e,n,o)=>{pp(e,"LanguageLoadError",vp("language",n,o))},q6=(e,n,o)=>{pp(e,"ThemeLoadError",vp("theme",n,o))},eR=(e,n,o)=>{pp(e,"ModelLoadError",vp("model",n,o))},H4=(e,n,o)=>{const r=Ks.translate(["Failed to initialize plugin: {0}",n]);my(e,"PluginLoadError",{message:r}),Jv(r,o),Xv(e,r)},Jv=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},tR=e=>{N.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},G2=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},nR=(e,n)=>{G2(e,"StyleWithCSS",n),G2(e,"enableInlineTableEditing",n),G2(e,"enableObjectResizing",n)},oR=e=>{e.selection.setRng(e.selection.getRng())},V4=(e,n,o)=>{Qi(e,n)&&!o?Qr(e,n):o&&Ko(e,n)},z4=e=>{const n=ne.fromDom(e.getBody());V4(n,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),tR(e)},K2=e=>{const n=ne.fromDom(e.getBody());V4(n,"mce-content-readonly",!1),e.hasEditableRoot()&&mc(n,!0),nR(e,!1),zy(e)&&e.focus(),oR(e),e.nodeChanged()},Nc=e=>jh(e),Gf="data-mce-contenteditable",lV=e=>{ke(Yo(e,'*[contenteditable="true"]'),n=>{mr(n,Gf,"true"),mc(n,!1)})},sR=e=>{ke(Yo(e,`*[${Gf}="true"]`),n=>{nr(n,Gf),mc(n,!0)})},Qv=(e,n)=>{const o=ne.fromDom(e.getBody());n?(z4(e),mc(o,!1),lV(o)):(sR(o),K2(e))},U4=e=>{e.serializer?bp(e):e.on("PreInit",()=>{bp(e)})},bp=e=>{e.parser.addAttributeFilter("contenteditable",n=>{Nc(e)&&ke(n,o=>{o.attr(Gf,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Gf,n=>{Nc(e)&&ke(n,o=>{o.attr("contenteditable",o.attr(Gf))})}),e.serializer.addTempAttr(Gf)},Z4=e=>e.type==="click",rR=["copy"],yp=e=>Ft(rR,e.type),W4=(e,n)=>bf(n,"a",r=>zn(r,ne.fromDom(e.getBody()))).bind(r=>Oa(r,"href")),j4=(e,n)=>{if(Z4(n)&&!kt.metaKeyPressed(n)){const o=ne.fromDom(n.target);W4(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const i=e.dom.select(`${r},[name="${Kr(r,"#")}"]`);i.length&&e.selection.scrollIntoView(i[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else yp(n)&&e.dispatch(n.type,n)},Cp=e=>{e.on("ShowCaret ObjectSelected",n=>{Nc(e)&&n.preventDefault()}),e.on("DisabledStateChange",n=>{n.isDefaultPrevented()||Qv(e,n.state)})},Kf=e=>{U4(e),Cp(e)},aR=e=>/^[a-z0-9\-]+$/i.test(e),G4=e=>"content/"+e+"/content.css",cV=e=>tinymce.Resource.has(G4(e)),iR=e=>K4(e,vL(e)),lR=e=>K4(e,fk(e)),K4=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",i=`content${e.editorManager.suffix}.css`;return Yt(n,c=>cV(c)?c:aR(c)&&!e.inline?`${o}/${c}/${i}`:e.documentBaseURI.toAbsolute(c))},uV=e=>{e.contentCSS=e.contentCSS.concat(iR(e),lR(e))},Yf=e=>e?Hn(e.getElementsByTagName("img")):[],Sg=(e,n)=>{const o={};return{findAll:(i,c=tt)=>{const d=Nt(Yf(i),h=>{const y=h.src;return h.hasAttribute("data-mce-bogus")||h.hasAttribute("data-mce-placeholder")||!y||y===eo.transparentSrc?!1:gs(y,"blob:")?!e.isUploaded(y)&&c(h):gs(y,"data:")?c(h):!1}),g=Yt(d,h=>{const y=h.src;if(sn(o,y))return o[y].then(A=>q(A)?A:{image:h,blobInfo:A.blobInfo});{const A=PM(n,y).then(M=>(delete o[y],{image:h,blobInfo:M})).catch(M=>(delete o[y],M));return o[y]=A,A}});return Promise.all(g)}}},Y4=()=>{let o={};const r=(R,_)=>({status:R,resultUri:_}),i=R=>R in o;return{hasBlobUri:i,getResultUri:R=>{const _=o[R];return _?_.resultUri:null},isPending:R=>i(R)?o[R].status===1:!1,isUploaded:R=>i(R)?o[R].status===2:!1,markPending:R=>{o[R]=r(1,null)},markUploaded:(R,_)=>{o[R]=r(2,_)},removeFailed:R=>{delete o[R]},destroy:()=>{o={}}}};let cR=0;const dV=()=>{const e=()=>Math.round(th()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},fV=e=>e+cR+++dV(),mV=()=>{let e=[];const n=M=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[M.toLowerCase()]||"dat",o=(M,R,_,Z,V)=>{if(q(M))return r({id:M,name:Z,filename:V,blob:R,base64:_});if(Te(M))return r(M);throw new Error("Unknown input type")},r=M=>{if(!M.blob||!M.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const R=M.id||fV("blobid"),_=M.name||R,Z=M.blob;return{id:Ye(R),name:Ye(_),filename:Ye(M.filename||_+"."+n(Z.type)),blob:Ye(Z),base64:Ye(M.base64),blobUri:Ye(M.blobUri||URL.createObjectURL(Z)),uri:Ye(M.uri)}},i=M=>{d(M.id())||e.push(M)},c=M=>Oo(e,M).getOrUndefined(),d=M=>c(R=>R.id()===M);return{create:o,add:i,get:d,getByUri:M=>c(R=>R.blobUri()===M),getByData:(M,R)=>c(_=>_.base64()===M&&_.blob().type===R),findFirst:c,removeByUri:M=>{e=Nt(e,R=>R.blobUri()===M?(URL.revokeObjectURL(R.blobUri()),!1):!0)},destroy:()=>{ke(e,M=>{URL.revokeObjectURL(M.blobUri())}),e=[]}}},Ii=(e,n)=>{const o={},r=(V,G)=>V?V.replace(/\/$/,"")+"/"+G.replace(/^\//,""):G,i=(V,G)=>new Promise((oe,ue)=>{const ge=new XMLHttpRequest;ge.open("POST",n.url),ge.withCredentials=n.credentials,ge.upload.onprogress=Ue=>{G(Ue.loaded/Ue.total*100)},ge.onerror=()=>{ue("Image upload failed due to a XHR Transport error. Code: "+ge.status)},ge.onload=()=>{if(ge.status<200||ge.status>=300){ue("HTTP Error: "+ge.status);return}const Ue=JSON.parse(ge.responseText);if(!Ue||!q(Ue.location)){ue("Invalid JSON: "+ge.responseText);return}oe(r(n.basePath,Ue.location))};const Se=new FormData;Se.append("file",V.blob(),V.filename()),ge.send(Se)}),c=Et(n.handler)?n.handler:i,d=()=>new Promise(V=>{V([])}),g=(V,G)=>({url:G,blobInfo:V,status:!0}),h=(V,G)=>({url:"",blobInfo:V,status:!1,error:G}),y=(V,G)=>{ct.each(o[V],oe=>{oe(G)}),delete o[V]},A=(V,G,oe)=>(e.markPending(V.blobUri()),new Promise(ue=>{let ge,Se;try{const Ue=()=>{ge&&(ge.close(),Se=qe)},et=Ne=>{Ue(),e.markUploaded(V.blobUri(),Ne),y(V.blobUri(),g(V,Ne)),ue(g(V,Ne))},Tt=Ne=>{Ue(),e.removeFailed(V.blobUri()),y(V.blobUri(),h(V,Ne)),ue(h(V,Ne))};Se=Ne=>{Ne<0||Ne>100||N.from(ge).orThunk(()=>N.from(oe).map(Ao)).each(Ae=>{ge=Ae,Ae.progressBar.value(Ne)})},G(V,Se).then(et,Ne=>{Tt(q(Ne)?{message:Ne}:Ne)})}catch(Ue){ue(h(V,Ue))}})),M=V=>V===i,R=V=>{const G=V.blobUri();return new Promise(oe=>{o[G]=o[G]||[],o[G].push(oe)})},_=(V,G)=>(V=ct.grep(V,oe=>!e.isUploaded(oe.blobUri())),Promise.all(ct.map(V,oe=>e.isPending(oe.blobUri())?R(oe):A(oe,c,G))));return{upload:(V,G)=>!n.url&&M(c)?d():_(V,G)}},Ul=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),X4=(e,n)=>Ii(n,{url:fL(e),basePath:mL(e),credentials:gL(e),handler:hL(e)}),J4=e=>{const n=Y4(),o=X4(e,n);return{upload:(r,i=!0)=>o.upload(r,i?Ul(e):void 0)}},Q4=(e,n)=>e.dom.isEmpty(n.dom)&&ye(e.schema.getTextBlockElements()[so(n)]),Y2=e=>n=>{Q4(e,n)&&_s(n,ne.fromHtml('<br data-mce-bogus="1" />'))},gV=e=>{const n=mV();let o,r;const i=Y4(),c=[],d=ge=>Se=>e.selection?ge(Se):[],g=ge=>ge+(ge.indexOf("?")===-1?"?":"&")+new Date().getTime(),h=(ge,Se,Ue)=>{let et=0;do et=ge.indexOf(Se,et),et!==-1&&(ge=ge.substring(0,et)+Ue+ge.substr(et+Se.length),et+=Ue.length-Se.length+1);while(et!==-1);return ge},y=(ge,Se,Ue)=>{const et=`src="${Ue}"${Ue===eo.transparentSrc?' data-mce-placeholder="1"':""}`;return ge=h(ge,`src="${Se}"`,et),ge=h(ge,'data-mce-src="'+Se+'"','data-mce-src="'+Ue+'"'),ge},A=(ge,Se)=>{ke(e.undoManager.data,Ue=>{Ue.type==="fragmented"?Ue.fragments=Yt(Ue.fragments,et=>y(et,ge,Se)):Ue.content=y(Ue.content,ge,Se)})},M=(ge,Se)=>{const Ue=e.convertURL(Se,"src");A(ge.src,Se),xi(ne.fromDom(ge),{src:Y1(e)?g(Se):Se,"data-mce-src":Ue})},R=()=>(o||(o=X4(e,i)),G().then(d(ge=>{const Se=Yt(ge,Ue=>Ue.blobInfo);return o.upload(Se,Ul(e)).then(d(Ue=>{const et=[];let Tt=!1;const Ne=Yt(Ue,(Ae,je)=>{const{blobInfo:wt,image:Vt}=ge[je];let Mn=!1;return Ae.status&&X1(e)?(Ae.url&&!Ws(Vt.src,Ae.url)&&(Tt=!0),n.removeByUri(Vt.src),Qu(e)||M(Vt,Ae.url)):Ae.error&&(Ae.error.remove&&(A(Vt.src,eo.transparentSrc),et.push(Vt),Mn=!0),Y6(e,Ae.error.message)),{element:Vt,status:Ae.status,uploadUri:Ae.url,blobInfo:wt,removed:Mn}});return et.length>0&&!Qu(e)?e.undoManager.transact(()=>{ke(Sn(et),Ae=>{const je=lc(Ae);b(Ae),je.each(Y2(e)),n.removeByUri(Ae.dom.src)})}):Tt&&e.undoManager.dispatchChange(),Ne}))}))),_=()=>li(e)?R():Promise.resolve([]),Z=ge=>Tn(c,Se=>Se(ge)),V=ge=>{c.push(ge)},G=()=>(r||(r=Sg(i,n)),r.findAll(e.getBody(),Z).then(d(ge=>{const Se=Nt(ge,Ue=>q(Ue)?(Xv(e,Ue),!1):Ue.uriType!=="blob");return Qu(e)||ke(Se,Ue=>{A(Ue.image.src,Ue.blobInfo.blobUri()),Ue.image.src=Ue.blobInfo.blobUri(),Ue.image.removeAttribute("data-mce-src")}),Se}))),oe=()=>{n.destroy(),i.destroy(),r=o=null},ue=ge=>ge.replace(/src="(blob:[^"]+)"/g,(Se,Ue)=>{const et=i.getResultUri(Ue);if(et)return'src="'+et+'"';let Tt=n.getByUri(Ue);return Tt||(Tt=ts(e.editorManager.get(),(Ne,Ae)=>Ne||Ae.editorUpload&&Ae.editorUpload.blobCache.getByUri(Ue),void 0)),Tt?'src="data:'+Tt.blob().type+";base64,"+Tt.base64()+'"':Se});return e.on("SetContent",()=>{li(e)?_():G()}),e.on("RawSaveContent",ge=>{ge.content=ue(ge.content)}),e.on("GetContent",ge=>{ge.source_view||ge.format==="raw"||ge.format==="tree"||(ge.content=ue(ge.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",ge=>{ke(ge,Se=>{const Ue=Se.attr("src");if(!Ue||n.getByUri(Ue))return;const et=i.getResultUri(Ue);et&&Se.attr("src",et)})})}),{blobCache:n,addFilter:V,uploadImages:R,uploadImagesAuto:_,scanForImages:G,destroy:oe}},uR=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const i={inline:"span",styles:{textDecoration:"line-through"},exact:!0},c={inline:"strike",remove:"all",preserve_attributes:["class","style"]},d={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[d,i,c]:[i,d,c]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(i,c,d)=>It(i)&&i.hasAttribute("href"),onformat:(i,c,d)=>{ct.each(d,(g,h)=>{n.setAttrib(i,h,g)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":i=>{var c;return(c=i==null?void 0:i.customValue)!==null&&c!==void 0?c:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return ct.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),i=>{r[i]={block:i,remove:"all"}}),r},Sp={remove_similar:!0,inherit:!1},xp={selector:"td,th",...Sp},X2={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...xp},tablecellverticalalign:{styles:{"vertical-align":"%value"},...xp},tablecellbordercolor:{styles:{borderColor:"%value"},...xp},tablecellclass:{classes:["%value"],...xp},tableclass:{selector:"table",classes:["%value"],...Sp},tablecellborderstyle:{styles:{borderStyle:"%value"},...xp},tablecellborderwidth:{styles:{borderWidth:"%value"},...xp}},q4=Ye(X2),dR=e=>{const n={},o=d=>ye(d)?n[d]:n,r=d=>sn(n,d),i=(d,g)=>{d&&(q(d)?(Ge(g)||(g=[g]),ke(g,h=>{Je(h.deep)&&(h.deep=!Ll(h)),Je(h.split)&&(h.split=!Ll(h)||Tr(h)),Je(h.remove)&&Ll(h)&&!Tr(h)&&(h.remove="none"),Ll(h)&&Tr(h)&&(h.mixed=!0,h.block_expand=!0),q(h.classes)&&(h.classes=h.classes.split(/\s+/))}),n[d]=g):Be(d,(h,y)=>{i(y,h)}))},c=d=>(d&&n[d]&&delete n[d],n);return i(uR(e)),i(q4()),i(xL(e)),{get:o,has:r,register:i,unregister:c}},Xf=ct.each,Zl=Co.DOM,e3=e=>ye(e)&&Te(e),Ic=(e,n)=>{const o=n&&n.schema||ga({}),r=(h,y)=>{y.classes.length>0&&Zl.addClass(h,y.classes.join(" ")),Zl.setAttribs(h,y.attrs)},i=h=>{const y=q(h)?{name:h,classes:[],attrs:{}}:h,A=Zl.create(y.name);return r(A,y),A},c=(h,y)=>{const A=o.getElementRule(h.nodeName.toLowerCase()),M=A==null?void 0:A.parentsRequired;return M&&M.length?y&&Ft(M,y)?y:M[0]:!1},d=(h,y,A)=>{let M;const R=y[0],_=e3(R)?R.name:void 0,Z=c(h,_);if(Z)_===Z?(M=R,y=y.slice(1)):M=Z;else if(R)M=R,y=y.slice(1);else if(!A)return h;const V=M?i(M):Zl.create("div");V.appendChild(h),A&&ct.each(A,oe=>{const ue=i(oe);V.insertBefore(ue,h)});const G=e3(M)?M.siblings:void 0;return d(V,y,G)},g=Zl.create("div");if(e.length>0){const h=e[0],y=i(h),A=e3(h)?h.siblings:void 0;g.appendChild(d(y,e.slice(1),A))}return g},Bi=e=>{e=ct.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,i,c,d,g)=>{switch(i){case"#":o.attrs.id=c;break;case".":o.classes.push(c);break;case":":ct.inArray("checked disabled enabled read-only required".split(" "),c)!==-1&&(o.attrs[c]=c);break}if(d==="["){const h=g.match(/([\w\-]+)(?:\=\"([^\"]+))?/);h&&(o.attrs[h[1]]=h[2])}return""})),o.name=n||"div",o},qv=e=>q(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),ct.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=ct.map(n.split(/(?:~\+|~|\+)/),Bi),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],Li=(e,n)=>{let o="",r=wL(e);if(r==="")return"";const i=R=>q(R)?R.replace(/%(\w+)/g,""):"",c=(R,_)=>Zl.getStyle(_??e.getBody(),R,!0);if(q(n)){const R=e.formatter.get(n);if(!R)return"";n=R[0]}if("preview"in n){const R=n.preview;if(R===!1)return"";r=R||r}let d=n.block||n.inline||"span",g;const h=qv(n.selector);h.length>0?(h[0].name||(h[0].name=d),d=n.selector,g=Ic(h,e)):g=Ic([d],e);const y=Zl.select(d,g)[0]||g.firstChild;Xf(n.styles,(R,_)=>{const Z=i(R);Z&&Zl.setStyle(y,_,Z)}),Xf(n.attributes,(R,_)=>{const Z=i(R);Z&&Zl.setAttrib(y,_,Z)}),Xf(n.classes,R=>{const _=i(R);Zl.hasClass(y,_)||Zl.addClass(y,_)}),e.dispatch("PreviewFormats"),Zl.setStyles(g,{position:"absolute",left:-65535}),e.getBody().appendChild(g);const A=c("fontSize"),M=/px$/.test(A)?parseInt(A,10):0;return Xf(r.split(" "),R=>{let _=c(R,y);if(!(R==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(_)&&(_=c(R),N1(_).toLowerCase()==="#ffffff"))&&!(R==="color"&&N1(_).toLowerCase()==="#000000")){if(R==="font-size"&&/em|%$/.test(_)){if(M===0)return;_=parseFloat(_)/(/%$/.test(_)?100:1)*M+"px"}R==="border"&&_&&(o+="padding:0 2px;"),o+=R+":"+_+";"}}),e.dispatch("AfterPreviewFormats"),Zl.remove(g),o},hV=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},Io=e=>{const n=dR(e),o=cs({});return hV(e),q$(e),Qu(e)||SM(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,i,c)=>{D9(e,r,i,c)},remove:(r,i,c,d)=>{O4(e,r,i,c,d)},toggle:(r,i,c)=>{O6(e,r,i,c)},match:(r,i,c,d)=>T9(e,r,i,c,d),closest:r=>$2(e,r),matchAll:(r,i)=>A9(e,r,i),matchNode:(r,i,c,d)=>O9(e,r,i,c,d),canApply:r=>k9(e,r),formatChanged:(r,i,c,d)=>H2(e,o,r,i,c,d),getCssText:ut(Li,e)}},fR=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},xg=(e,n,o)=>{const r=cs(!1),i=h=>{mp(n,!1,o),n.add({},h)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",h=>{const y=h.command;fR(y)||(w6(n,o),n.beforeChange())}),e.on("ExecCommand",h=>{const y=h.command;fR(y)||i(h)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",i),e.on("dragend",i),e.on("keyup",h=>{const y=h.keyCode;if(h.isDefaultPrevented())return;const A=eo.os.isMacOS()&&h.key==="Meta";(y>=33&&y<=36||y>=37&&y<=40||y===45||h.ctrlKey||A)&&(i(),e.nodeChanged()),(y===46||y===8)&&e.nodeChanged(),r.get()&&n.typing&&!E4(fp(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",h=>{const y=h.keyCode;if(h.isDefaultPrevented())return;if(y>=33&&y<=36||y>=37&&y<=40||y===45){n.typing&&i(h);return}const A=h.ctrlKey&&!h.altKey||h.metaKey;if((y<16||y>20)&&y!==224&&y!==91&&!n.typing&&!A){n.beforeChange(),mp(n,!0,o),n.add({},h),r.set(!0);return}(eo.os.isMacOS()?h.metaKey:h.ctrlKey&&!h.altKey)&&n.beforeChange()}),e.on("mousedown",h=>{n.typing&&i(h)});const c=h=>h.inputType==="insertReplacementText",d=h=>h.inputType==="insertText"&&h.data===null,g=h=>h.inputType==="insertFromPaste"||h.inputType==="insertFromDrop";e.on("input",h=>{h.inputType&&(c(h)||d(h)||g(h))&&i(h)}),e.on("AddUndo Undo Redo ClearUndos",h=>{h.isDefaultPrevented()||e.nodeChanged()})},e0=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},t3=e=>{const n=Gr(),o=cs(0),r=cs(0),i={data:[],typing:!1,beforeChange:()=>{C9(e,o,n)},add:(c,d)=>LY(e,i,r,o,n,c,d),dispatchChange:()=>{e.setDirty(!0);const c=fp(e);c.bookmark=Pf(e.selection),e.dispatch("change",{level:c,lastLevel:tn(i.data,r.get()).getOrUndefined()})},undo:()=>Pc(e,i,o,r),redo:()=>T6(e,r,i.data),clear:()=>{S9(e,i,r)},reset:()=>{A6(e,i)},hasUndo:()=>x9(e,i,r),hasRedo:()=>w9(e,i,r),transact:c=>FY(e,i,o,c),ignore:c=>{ya(e,o,c)},extra:(c,d)=>{E9(e,i,r,c,d)}};return Qu(e)||xg(e,i,o),e0(e),i},n3=[9,27,kt.HOME,kt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,kt.DOWN,kt.UP,kt.LEFT,kt.RIGHT].concat(eo.browser.isFirefox()?[224]:[]),J2="data-mce-placeholder",mR=e=>e.type==="keydown"||e.type==="keyup",Q2=e=>{const n=e.keyCode;return n===kt.BACKSPACE||n===kt.DELETE},pV=e=>{if(mR(e)){const n=e.keyCode;return!Q2(e)&&(kt.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||Ft(n3,n))}else return!1},gR=e=>mR(e)&&!(Q2(e)||e.type==="keyup"&&e.keyCode===229),hR=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},o3=e=>{var n;const o=e.dom,r=Ra(e),i=(n=CL(e))!==null&&n!==void 0?n:"",c=(d,g)=>{if(pV(d))return;const h=e.getBody(),y=gR(d)?!1:hR(o,h,r);(o.getAttrib(h,J2)!==""!==y||g)&&(o.setAttrib(h,J2,y?i:null),_h(e,y),e.on(y?"keydown":"keyup",c),e.off(y?"keyup":"keydown",c))};Gn(i)&&e.on("init",d=>{c(d,!0),e.on("change SetContent ExecCommand",c),e.on("paste",g=>_l.setEditorTimeout(e,()=>c(g)))})},pR=(e,n)=>({block:e,position:n}),q2=(e,n)=>({from:e,to:n}),s3=(e,n)=>{const o=ne.fromDom(e),r=ne.fromDom(n.container());return wv(o,r).map(i=>pR(i,n))},vV=e=>!(El(e.to.block,e.from.block)||El(e.from.block,e.to.block)),bV=e=>!zn(e.from.block,e.to.block),vR=(e,n)=>Mu(n,i=>Of(i)||gc(i.dom),i=>zn(i,e)).filter(Ga).getOr(e),yV=(e,n)=>{const o=ne.fromDom(e);return zn(vR(o,n.from.block),vR(o,n.to.block))},bR=e=>ss(e.from.block.dom)===!1&&ss(e.to.block.dom)===!1,CV=e=>{const n=o=>Nx(o)||fx(o.dom)||Ad(o);return n(e.from.block)&&n(e.to.block)},SV=(e,n,o,r)=>Ts(r.position.getNode())&&!Da(e,r.block)?Gm(!1,r.block.dom).bind(i=>i.isEqual(r.position)?Nl(o,n,i).bind(c=>s3(n,c)):N.some(r)).getOr(r):r,yR=(e,n,o,r)=>{const i=s3(n,Ie.fromRangeStart(r)),c=i.bind(d=>Nl(o,n,d.position).bind(g=>s3(n,g).map(h=>SV(e,n,o,h))));return Zs(i,c,q2).filter(d=>bV(d)&&yV(n,d)&&bR(d)&&CV(d)&&vV(d))},xV=(e,n,o,r)=>r.collapsed?yR(e,n,o,r):N.none(),CR=(e,n)=>{const o=Fr(e);return Ns(o,r=>n.isBlock(so(r))).fold(Ye(o),r=>o.slice(0,r))},wp=(e,n)=>{const o=CR(e,n);return ke(o,b),o},SR=(e,n,o)=>{const r=Wu(o,n);return Oo(r.reverse(),i=>Da(e,i)).each(b)},wV=(e,n)=>Nt(v1(n),o=>!Da(e,o)).length===0,xR=(e,n,o,r,i)=>{if(Da(r,o))return kf(o),oa(o.dom);wV(r,i)&&Da(r,n)&&Aa(i,ne.fromTag("br"));const c=ci(o.dom,Ie.before(i.dom));return ke(wp(n,r),d=>{Aa(i,d)}),SR(r,e,n),c},wR=(e,n)=>e.isInline(so(n)),EV=(e,n,o,r)=>{if(Da(r,o)){if(Da(r,n)){const d=Qs((g=>{const h=(y,A)=>xr(y).fold(()=>A,M=>wR(r,M)?h(M,A.concat(Y(M))):A);return h(g,[])})(o),(g,h)=>(ph(g,h),h),Od());Xi(n),_s(n,d)}return b(o),oa(n.dom)}const i=Di(o.dom);return ke(wp(n,r),c=>{_s(o,c)}),SR(r,e,n),i},ER=(e,n)=>{const o=Wu(n,e);return N.from(o[o.length-1])},Wl=(e,n)=>El(n,e)?ER(n,e):N.none(),TR=(e,n)=>{Gm(e,n.dom).bind(o=>N.from(o.getNode())).map(ne.fromDom).filter(zm).each(b)},r3=(e,n,o,r)=>(TR(!0,n),TR(!1,o),Wl(n,o).fold(ut(EV,e,n,o,r),ut(xR,e,n,o,r))),eC=(e,n,o,r,i)=>n?r3(e,r,o,i):r3(e,o,r,i),t0=(e,n)=>{const o=ne.fromDom(e.getBody());return xV(e.schema,o.dom,n,e.selection.getRng()).map(i=>()=>{eC(o,n,i.from.block,i.to.block,e.schema).each(c=>{e.selection.setRng(c.toRange())})})},AR=(e,n,o)=>{const r=n.getRng();return Zs(wv(e,ne.fromDom(r.startContainer)),wv(e,ne.fromDom(r.endContainer)),(i,c)=>zn(i,c)?N.none():N.some(()=>{r.deleteContents(),eC(e,!0,i,c,o).each(d=>{n.setRng(d.toRange())})})).getOr(N.none())},a3=(e,n)=>{const o=ne.fromDom(n),r=ut(zn,e);return bd(o,Of,r).isSome()},TV=(e,n)=>a3(e,n.startContainer)||a3(e,n.endContainer),AV=(e,n)=>{const o=ci(e.dom,Ie.fromRangeStart(n)).isNone(),r=ar(e.dom,Ie.fromRangeEnd(n)).isNone();return!TV(e,n)&&o&&r},OR=e=>N.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),kR=e=>{const n=ne.fromDom(e.getBody()),o=e.selection.getRng();return AV(n,o)?OR(e):AR(n,e.selection,e.schema)},ui=(e,n)=>e.selection.isCollapsed()?N.none():kR(e),Kd=(e,n,o,r,i)=>N.from(n._selectionOverrides.showCaret(e,o,r,i)),OV=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},tC=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?N.none():N.some(OV(n)),i3=(e,n,o)=>{const r=pw(1,e.getBody(),n),i=Ie.fromRangeStart(r),c=i.getNode();if(tv(c))return Kd(1,e,c,!i.isAtEnd(),!1);const d=i.getNode(!0);if(tv(d))return Kd(1,e,d,!1,!1);const g=cg(e.dom.getRoot(),i.getNode());return tv(g)?Kd(1,e,g,!1,o):N.none()},l3=(e,n,o)=>n.collapsed?i3(e,n,o).getOr(n):n,_Y=e=>rg(e)||yv(e),kV=e=>ag(e)||sg(e),c3=(e,n)=>{rt(n)&&n.data.length===0&&e.remove(n)},jl=(e,n,o,r,i,c)=>{Kd(r,e,c.getNode(!i),i,!0).each(d=>{if(n.collapsed){const g=n.cloneRange();i?g.setEnd(d.startContainer,d.startOffset):g.setStart(d.endContainer,d.endOffset),g.deleteContents()}else n.deleteContents();e.selection.setRng(d)}),c3(e.dom,o)},u3=(e,n)=>{const o=e.selection.getRng();if(!rt(o.commonAncestorContainer))return N.none();const r=n?1:-1,i=Tc(e.getBody()),c=ut(vw,n?i.next:i.prev),d=n?_Y:kV,g=av(r,e.getBody(),o),h=c(g),y=h&&Hl(n,h);if(!y||!Ey(g,y))return N.none();if(d(y))return N.some(()=>jl(e,o,g.getNode(),r,n,y));const A=c(y);return A&&d(A)&&Ey(y,A)?N.some(()=>jl(e,o,g.getNode(),r,n,A)):N.none()},Ep=(e,n)=>u3(e,n),n0=(e,n)=>{const o=e.getBody();return n?oa(o).filter(rg):Di(o).filter(ag)},d3=e=>{const n=e.selection.getRng();return!n.collapsed&&(n0(e,!0).exists(o=>o.isEqual(Ie.fromRangeStart(n)))||n0(e,!1).exists(o=>o.isEqual(Ie.fromRangeEnd(n))))},f3=e=>ye(e)&&(Of(ne.fromDom(e))||Ad(ne.fromDom(e))),il=Nr.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),DR=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return It(o)&&o.getAttribute("data-mce-caret")===r},DV=(e,n,o,r,i)=>{const c=d=>i.isInline(d.nodeName.toLowerCase())&&!eu(o,r,e);return Gk(!n,o).fold(()=>Gk(n,r).fold(Le,c),c)},MR=(e,n,o,r,i)=>{const c=i.getNode(!o);return wv(ne.fromDom(n),ne.fromDom(r.getNode())).map(d=>Da(e,d)?il.remove(d.dom):il.moveToElement(c)).orThunk(()=>N.some(il.moveToElement(c)))},nC=(e,n,o,r)=>Nl(n,e,o).bind(i=>f3(i.getNode())||DV(e,n,o,i,r)?N.none():n&&ss(i.getNode())||!n&&ss(i.getNode(!0))?MR(r,e,n,o,i):n&&ag(o)||!n&&rg(o)?N.some(il.moveToPosition(i)):N.none()),MV=(e,n)=>gt(n)?N.none():e&&ss(n.nextSibling)?N.some(il.moveToElement(n.nextSibling)):!e&&ss(n.previousSibling)?N.some(il.moveToElement(n.previousSibling)):N.none(),RR=(e,n,o)=>o.fold(r=>N.some(il.remove(r)),r=>N.some(il.moveToElement(r)),r=>eu(n,r,e)?N.none():N.some(il.moveToPosition(r))),RV=(e,n,o,r)=>DR(n,o)?MV(n,o.getNode(!n)).orThunk(()=>nC(e,n,o,r)):nC(e,n,o,r).bind(i=>RR(e,o,i)),wg=(e,n,o,r)=>{const i=pw(n?1:-1,e,o),c=Ie.fromRangeStart(i),d=ne.fromDom(e);return!n&&ag(c)?N.some(il.remove(c.getNode(!0))):n&&rg(c)?N.some(il.remove(c.getNode())):!n&&rg(c)&&qy(d,c,r)?s5(d,c,r).map(g=>il.remove(g.getNode())):n&&ag(c)&&cE(d,c,r)?I_(d,c,r).map(g=>il.remove(g.getNode())):RV(e,n,c,r)},PR=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),ig(e,n,ne.fromDom(o)),!0),PV=(e,n)=>o=>{const r=n?Ie.before(o):Ie.after(o);return e.selection.setRng(r.toRange()),!0},NR=e=>n=>(e.selection.setRng(n.toRange()),!0),IR=(e,n)=>N.from(cg(e.getBody(),n)),NV=(e,n)=>{const o=e.selection.getNode();return IR(e,o).filter(ss).fold(()=>wg(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(PR(e,n),PV(e,n),NR(e))),()=>N.some(qe))},IV=e=>{ke(Yo(e,".mce-offscreen-selection"),b)},BV=(e,n)=>{const o=e.selection.getNode();return ss(o)&&!k1(o)?IR(e,o.parentNode).filter(ss).fold(()=>N.some(()=>{IV(ne.fromDom(e.getBody())),ig(e,n,ne.fromDom(e.selection.getNode())),Ev(e)}),()=>N.some(qe)):d3(e)?N.some(()=>{O5(e,e.selection.getRng(),ne.fromDom(e.getBody()))}):N.none()},BR=e=>{const n=e.dom,o=e.selection,r=cg(e.getBody(),o.getNode());if(gc(r)&&n.isBlock(r)&&n.isEmpty(r)){const i=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(i),o.setRng(Ie.before(i).toRange())}return!0},oC=(e,n)=>e.selection.isCollapsed()?NV(e,n):BV(e,n),LR=e=>e.hasOwnProperty("text"),sC=e=>e.hasOwnProperty("marker"),Yd=(e,n)=>{const o=(c,d)=>{if(rt(c))return{text:c,offset:d};{const g=n(),h=c.childNodes;return d<h.length?(c.insertBefore(g,h[d]),{marker:g,before:!0}):(c.appendChild(g),{marker:g,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},FR=e=>{var n,o;const{start:r,end:i}=e,c=new window.Range;return LR(r)?c.setStart(r.text,r.offset):sC(r)&&(r.before?c.setStartBefore(r.marker):c.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),LR(i)?c.setEnd(i.text,i.offset):sC(i)&&(i.before?c.setEndBefore(i.marker):c.setEndAfter(i.marker),(o=i.marker.parentNode)===null||o===void 0||o.removeChild(i.marker)),c},m3=(e,n)=>{var o;const r=e.dom,i=r.getParent(e.selection.getStart(),r.isBlock),c=r.getParent(e.selection.getEnd(),r.isBlock),d=e.getBody();if(((o=i==null?void 0:i.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&i&&c&&i===d.firstChild&&c===d.lastChild&&!r.isEmpty(d)){const h=i.cloneNode(!1),y=()=>{if(n?T5(e):r2(e),d.firstChild!==i){const A=Yd(e.selection.getRng(),()=>document.createElement("span"));Array.from(d.childNodes).forEach(M=>h.appendChild(M)),d.appendChild(h),e.selection.setRng(FR(A))}};return N.some(y)}return N.none()},rC=(e,n)=>{const o=Ie.fromRangeStart(e.selection.getRng());return Nl(n,e.getBody(),o).filter(r=>n?fY(r):k_(r)).bind(r=>hw(n?0:-1,r)).map(r=>()=>e.selection.select(r))},aC=(e,n)=>e.selection.isCollapsed()?rC(e,n):N.none(),Eg=rt,g3=e=>Eg(e)&&e.data[0]===wr,o0=e=>Eg(e)&&e.data[e.data.length-1]===wr,h3=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(wr)},LV=e=>{var n;if(Eg(e.previousSibling))return o0(e.previousSibling)||e.previousSibling.appendData(wr),e.previousSibling;if(Eg(e))return g3(e)||e.insertData(0,wr),e;{const o=h3(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},_R=e=>{var n,o;if(Eg(e.nextSibling))return g3(e.nextSibling)||e.nextSibling.insertData(0,wr),e.nextSibling;if(Eg(e))return o0(e)||e.appendData(wr),e;{const r=h3(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},iC=(e,n)=>e?LV(n):_R(n),FV=ut(iC,!0),lC=ut(iC,!1),p3=(e,n)=>rt(e.container())?iC(n,e.container()):iC(n,e.getNode()),s0=(e,n)=>{const o=n.get();return o&&e.container()===o&&ha(o)},v3=(e,n)=>n.fold(o=>{Lf(e.get());const r=FV(o);return e.set(r),N.some(Ie(r,r.length-1))},o=>oa(o).map(r=>{if(s0(r,e)){const i=e.get();return Ie(i,1)}else{Lf(e.get());const i=p3(r,!0);return e.set(i),Ie(i,1)}}),o=>Di(o).map(r=>{if(s0(r,e)){const i=e.get();return Ie(i,i.length-1)}else{Lf(e.get());const i=p3(r,!1);return e.set(i),Ie(i,i.length-1)}}),o=>{Lf(e.get());const r=lC(o);return e.set(r),N.some(Ie(r,1))}),$R=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return N.none()},Ja=Nr.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),b3=(e,n)=>{const o=Ld(n,e);return o||e},y3=(e,n,o)=>{const r=w5(o),i=b3(n,r.container());return Hf(e,i,r).fold(()=>ar(i,r).bind(ut(Hf,e,i)).map(c=>Ja.before(c)),N.none)},HR=(e,n)=>Km(e,n)===null,VR=(e,n,o)=>Hf(e,n,o).filter(ut(HR,n)),_V=(e,n,o)=>{const r=vE(o);return VR(e,n,r).bind(i=>ci(i,r).isNone()?N.some(Ja.start(i)):N.none())},$V=(e,n,o)=>{const r=w5(o);return VR(e,n,r).bind(i=>ar(i,r).isNone()?N.some(Ja.end(i)):N.none())},r0=(e,n,o)=>{const r=vE(o),i=b3(n,r.container());return Hf(e,i,r).fold(()=>ci(i,r).bind(ut(Hf,e,i)).map(c=>Ja.after(c)),N.none)},Bc=e=>!C5(a0(e)),qu=(e,n,o)=>$R([y3,_V,$V,r0],[e,n,o]).filter(Bc),a0=e=>e.fold(Qn,Qn,Qn,Qn),bs=e=>e.fold(Ye("before"),Ye("start"),Ye("end"),Ye("after")),Tp=e=>e.fold(Ja.before,Ja.before,Ja.after,Ja.after),Ap=e=>e.fold(Ja.start,Ja.start,Ja.end,Ja.end),Xd=(e,n)=>bs(e)===bs(n)&&a0(e)===a0(n),zR=(e,n,o,r,i,c)=>Zs(Hf(n,o,r),Hf(n,o,i),(d,g)=>d!==g&&x5(o,d,g)?Ja.after(e?d:g):c).getOr(c),C3=(e,n)=>e.fold(tt,o=>!Xd(o,n)),HV=(e,n,o,r,i)=>{const c=Hl(e,i);return Nl(e,o,c).map(ut(Hl,e)).fold(()=>r.map(Tp),h=>qu(n,o,h).map(ut(zR,e,n,o,c,h)).filter(ut(C3,r))).filter(Bc)},Op=(e,n)=>e?n.fold(x(N.some,Ja.start),N.none,x(N.some,Ja.after),N.none):n.fold(N.none,x(N.some,Ja.before),N.none,x(N.some,Ja.end)),VV=(e,n,o,r)=>{const i=Hl(e,r),c=qu(n,o,i);return qu(n,o,i).bind(ut(Op,e)).orThunk(()=>HV(e,n,o,c,r))},zV=e=>Et(e.selection.getSel().modify),Tg=(e,n,o)=>{const r=e?1:-1;return n.setRng(Ie(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},UV=(e,n)=>{const o=n.selection.getRng(),r=e?Ie.fromRangeEnd(o):Ie.fromRangeStart(o);return zV(n)?e&&Lx(r)?Tg(!0,n.selection,r):!e&&H1(r)?Tg(!1,n.selection,r):!1:!1};var di;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(di||(di={}));const cC=(e,n)=>e===-1?Me(n):n,Jf=(e,n,o)=>e===1?n.next(o):n.prev(o),ZV=(e,n,o,r)=>Ts(r.getNode(n===1))?di.Br:eu(o,r)===!1?di.Block:di.Wrap,ll=(e,n,o,r)=>{const i=Tc(o);let c=r;const d=[];for(;c;){const g=Jf(n,i,c);if(!g)break;if(Ts(g.getNode(!1)))return n===1?{positions:cC(n,d).concat([g]),breakType:di.Br,breakAt:N.some(g)}:{positions:cC(n,d),breakType:di.Br,breakAt:N.some(g)};if(!g.isVisible()){c=g;continue}if(e(c,g)){const h=ZV(o,n,c,g);return{positions:cC(n,d),breakType:h,breakAt:N.some(g)}}d.push(g),c=g}return{positions:cC(n,d),breakType:di.Eol,breakAt:N.none()}},Qf=(e,n,o,r)=>n(o,r).breakAt.map(i=>{const c=n(o,i).positions;return e===-1?c.concat(i):[i].concat(c)}).getOr([]),Ag=(e,n)=>ts(e,(o,r)=>o.fold(()=>N.some(r),i=>Zs(an(i.getClientRects()),an(r.getClientRects()),(c,d)=>{const g=Math.abs(n-c.left);return Math.abs(n-d.left)<=g?r:i}).or(o)),N.none()),kp=(e,n)=>an(n.getClientRects()).bind(o=>Ag(e,o.left)),i0=ut(ll,Ie.isAbove,-1),ed=ut(ll,Ie.isBelow,1),UR=ut(Qf,-1,i0),Gl=ut(Qf,1,ed),l0=(e,n)=>i0(e,n).breakAt.isNone(),S3=(e,n)=>ed(e,n).breakAt.isNone(),x3=e=>oa(e).map(n=>[n].concat(ed(e,n).positions)).getOr([]),w3=e=>Di(e).map(n=>i0(e,n).positions.concat(n)).getOr([]),Og=(e,n)=>kp(UR(e,n),n),E3=(e,n)=>kp(Gl(e,n),n),WV=ss,ZR=(e,n)=>Math.abs(e.left-n),WR=(e,n)=>Math.abs(e.right-n),jV=e=>Zc(e,"node"),jR=(e,n)=>ko(e,(o,r)=>{const i=Math.min(ZR(o,n),WR(o,n)),c=Math.min(ZR(r,n),WR(r,n));return c===i&&jV(r)&&WV(r.node)||c<i?r:o}),GV=e=>{const n=o=>Yt(o,r=>{const i=Dd(r);return i.node=e,i});if(It(e))return n(e.getClientRects());if(rt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},kg=e=>Cs(e,GV);var Qa;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Qa||(Qa={}));const KV=(e,n,o,r)=>{let i=r;for(;i=Kh(i,e,Wx,n);)if(o(i))return},GR=(e,n,o,r,i,c)=>{let d=0;const g=[],h=M=>{let R=kg([M]);e===Qa.Up&&(R=R.reverse());for(let _=0;_<R.length;_++){const Z=R[_];if(!o(Z,y)){if(g.length>0&&n(Z,Mo(g))&&d++,Z.line=d,i(Z))return!0;g.push(Z)}}return!1},y=Mo(c.getClientRects());if(!y)return g;const A=c.getNode();return A&&(h(A),KV(e,r,h,A)),g},YV=(e,n)=>n.line>e,XV=(e,n)=>n.line===e,JV=ut(GR,Qa.Up,Bh,Lh),QV=ut(GR,Qa.Down,Lh,Bh),KR=e=>Mo(e.getClientRects()),qV=(e,n,o,r)=>{const i=Tc(n);let c,d,g,h;const y=[];let A=0;e===Qa.Down?(c=i.next,d=Lh,g=Bh,h=Ie.after(r)):(c=i.prev,d=Bh,g=Lh,h=Ie.before(r));const M=KR(h);do{if(!h.isVisible())continue;const R=KR(h);if(g(R,M))continue;y.length>0&&d(R,Mo(y))&&A++;const _=Dd(R);if(_.position=h,_.line=A,o(_))return y;y.push(_)}while(h=c(h));return y},YR=e=>n=>YV(e,n),XR=e=>n=>XV(e,n),Jd=(e,n)=>{e.selection.setRng(n),ng(e,e.selection.getRng())},T3=(e,n,o)=>N.some(l3(e,n,o)),JR=(e,n,o,r,i,c)=>{const d=n===1,g=Tc(e.getBody()),h=ut(vw,d?g.next:g.prev),y=d?r:i;if(!o.collapsed){const Z=Qb(o);if(c(Z))return Kd(n,e,Z,n===-1,!1);if(d3(e)){const V=o.cloneRange();return V.collapse(n===-1),N.from(V)}}const A=av(n,e.getBody(),o);if(y(A))return tC(e,A.getNode(!d));let M=h(A);const R=_x(o);if(M)M=Hl(d,M);else return R?N.some(o):N.none();if(y(M))return Kd(n,e,M.getNode(!d),d,!1);const _=h(M);return _&&y(_)&&Ey(M,_)?Kd(n,e,_.getNode(!d),d,!1):R?T3(e,M.toRange(),!1):N.none()},QR=(e,n,o,r,i,c)=>{const d=av(n,e.getBody(),o),g=Mo(d.getClientRects()),h=n===Qa.Down,y=e.getBody();if(!g)return N.none();if(d3(e)){const G=h?Ie.fromRangeEnd(o):Ie.fromRangeStart(o);return(h?E3:Og)(y,G).orThunk(()=>N.from(G)).map(ue=>ue.toRange())}const M=(h?QV:JV)(y,YR(1),d),R=Nt(M,XR(1)),_=g.left,Z=jR(R,_);if(Z&&c(Z.node)){const G=Math.abs(_-Z.left),oe=Math.abs(_-Z.right);return Kd(n,e,Z.node,G<oe,!1)}let V;if(r(d)?V=d.getNode():i(d)?V=d.getNode(!0):V=Qb(o),V){const G=qV(n,y,YR(1),V);let oe=jR(Nt(G,XR(1)),_);if(oe||(oe=Mo(Nt(G,XR(0))),oe))return T3(e,oe.position.toRange(),!1)}return R.length===0?A3(e,h).filter(h?i:r).map(G=>l3(e,G.toRange(),!1)):N.none()},A3=(e,n)=>{const o=e.selection.getRng(),r=n?Ie.fromRangeEnd(o):Ie.fromRangeStart(o),i=rF(r.container(),e.getBody());if(n){const c=ed(i,r);return An(c.positions)}else{const c=i0(i,r);return an(c.positions)}},qR=(e,n,o)=>A3(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),su=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},eP=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},tP=(e,n,o)=>v3(n,o).map(r=>(su(e,r),o)),O3=(e,n,o)=>{const r=Ie.fromRangeStart(e);if(e.collapsed)return r;{const i=Ie.fromRangeEnd(e);return o?ci(n,i).getOr(i):ar(n,r).getOr(r)}},nP=(e,n,o)=>{const r=e.getBody(),i=O3(e.selection.getRng(),r,o),c=ut(lg,e);return VV(o,c,r,i).bind(g=>tP(e,n,g))},k3=(e,n,o)=>{const r=Yt(Yo(ne.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),d=>d.dom),i=Nt(r,e),c=Nt(o,e);ke($e(i,c),ut(eP,!1)),ke($e(c,i),ut(eP,!0))},ez=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Ie.fromRangeStart(e.selection.getRng());Ie.isTextPosition(r)&&!q_(r)&&(su(e,Vk(o,r)),n.set(null))}},tz=(e,n,o,r)=>{if(n.selection.isCollapsed()){const i=Nt(r,e);ke(i,c=>{const d=Ie.fromRangeStart(n.selection.getRng());qu(e,n.getBody(),d).bind(g=>tP(n,o,g))})}},oP=(e,n,o)=>Uh(e)?nP(e,n,o).isSome():!1,sP=(e,n,o)=>Uh(n)?UV(e,n):!1,nz=e=>{const n=cs(null),o=ut(lg,e);return e.on("NodeChange",r=>{Uh(e)&&(k3(o,e.dom,r.parents),ez(e,n),tz(o,e,n,r.parents))}),n},oz=ut(sP,!0),sz=ut(sP,!1),uC=(e,n,o)=>{if(Uh(e)){const r=A3(e,n).getOrThunk(()=>{const i=e.selection.getRng();return n?Ie.fromRangeEnd(i):Ie.fromRangeStart(i)});return qu(ut(lg,e),e.getBody(),r).exists(i=>{const c=Tp(i);return v3(o,c).exists(d=>(su(e,d),!0))})}else return!1},rz=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},az=e=>Zs(oa(e),Di(e),(n,o)=>{const r=Hl(!0,n),i=Hl(!1,o);return ar(e,r).forall(c=>c.isEqual(i))}).getOr(!0),rP=(e,n)=>o=>v3(n,o).map(r=>()=>su(e,r)),aP=(e,n,o,r)=>{const i=e.getBody(),c=ut(lg,e);e.undoManager.ignore(()=>{e.selection.setRng(rz(o,r)),r2(e),qu(c,i,Ie.fromRangeStart(e.selection.getRng())).map(Ap).bind(rP(e,n)).each(go)}),e.nodeChanged()},iz=(e,n)=>{const o=Ld(n,e);return o||e},lz=(e,n,o,r)=>{const i=iz(e.getBody(),r.container()),c=ut(lg,e),d=qu(c,i,r);return d.bind(h=>o?h.fold(Ye(N.some(Ap(h))),N.none,Ye(N.some(Tp(h))),N.none):h.fold(N.none,Ye(N.some(Tp(h))),N.none,Ye(N.some(Ap(h))))).map(rP(e,n)).getOrThunk(()=>{const h=Ac(o,i,r),y=h.bind(A=>qu(c,i,A));return Zs(d,y,()=>Hf(c,i,r).bind(A=>az(A)?N.some(()=>{ig(e,o,ne.fromDom(A))}):N.none())).getOrThunk(()=>y.bind(()=>h.map(A=>()=>{o?aP(e,n,r,A):aP(e,n,A,r)})))})},D3=(e,n,o)=>{if(e.selection.isCollapsed()&&Uh(e)){const r=Ie.fromRangeStart(e.selection.getRng());return lz(e,n,o,r)}return N.none()},cz=e=>mh(e)>1,iP=(e,n)=>{const o=ne.fromDom(e.getBody()),r=ne.fromDom(e.selection.getStart()),i=Wu(r,o);return Ns(i,n).fold(Ye(i),c=>i.slice(0,c))},uz=e=>mh(e)===1,dz=e=>iP(e,n=>e.schema.isBlock(so(n))||cz(n)),fz=e=>iP(e,n=>e.schema.isBlock(so(n))),M3=(e,n)=>{const o=ut(_E,e);return Cs(n,r=>o(r)?[r.dom]:[])},lP=e=>{const n=fz(e);return M3(e,n)},mz=(e,n,o,r)=>{const i=M3(n,r);if(i.length===0)ig(n,e,o);else{const c=FE(o.dom,i);n.selection.setRng(c.toRange())}},gz=(e,n)=>{const o=Nt(dz(e),uz);return An(o).bind(r=>{const i=Ie.fromRangeStart(e.selection.getRng());return bE(n,i,r.dom)&&!Iy(r)?N.some(()=>mz(n,e,r,o)):N.none()})},hz=(e,n)=>{const o=n.parentElement;return Ts(n)&&!te(o)&&e.dom.isEmpty(o)},pz=e=>Iy(ne.fromDom(e)),cP=(e,n)=>{const o=e.selection.getStart(),r=hz(e,o)||pz(o)?FE(o,n):Pv(e.selection.getRng(),n);e.selection.setRng(r.toRange())},vz=(e,n)=>{const o=$e(n,lP(e));o.length>0&&cP(e,o)},uP=e=>rt(e.startContainer),dP=e=>e.startOffset===0&&uP(e),bz=(e,n)=>{const o=n.startContainer.parentElement;return!te(o)&&_E(e,ne.fromDom(o))},yz=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!te(n)&&!te(o)&&n.isEqualNode(o)},Cz=e=>{const n=e.endContainer;return e.endOffset===(rt(n)?n.length:n.childNodes.length)},Sz=e=>yz(e)&&Cz(e),xz=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),wz=e=>Sz(e)||xz(e),Ez=e=>{const n=e.selection.getRng();return dP(n)&&bz(e,n)&&wz(n)},Tz=e=>{if(Ez(e)){const n=lP(e);return N.some(()=>{r2(e),vz(e,n)})}else return N.none()},R3=(e,n)=>e.selection.isCollapsed()?gz(e,n):Tz(e),fP=(e,n)=>sx(e,o=>Il(o.dom),o=>n.isBlock(so(o))),mP=e=>fP(ne.fromDom(e.selection.getStart()),e.schema),gP=e=>{const n=e.selection.getRng();return n.collapsed&&(uP(n)||e.dom.isEmpty(n.startContainer))&&!mP(e)},dC=e=>(gP(e)&&cP(e,[]),!0),fC=(e,n,o)=>ye(o)?N.some(()=>{e._selectionOverrides.hideFakeCaret(),ig(e,n,ne.fromDom(o))}):N.none(),Az=(e,n)=>{const o=n?yv:sg,i=av(n?1:-1,e.getBody(),e.selection.getRng());return o(i)?fC(e,n,i.getNode(!n)):N.from(Hl(n,i)).filter(c=>o(c)&&Ey(i,c)).bind(c=>fC(e,n,c.getNode(!n)))},hP=(e,n)=>{const o=e.selection.getNode();return Ol(o)?fC(e,n,o):N.none()},P3=(e,n)=>e.selection.isCollapsed()?Az(e,n):hP(e,n),Oz=e=>Mu(e,n=>gc(n.dom)||ss(n.dom)).exists(n=>gc(n.dom)),N3=e=>oi(e??"").getOr(0),pP=(e,n)=>{const o=e||UO(n)?"margin":"padding",r=or(n,"direction")==="rtl"?"-right":"-left";return o+r},kz=(e,n,o,r,i,c)=>{const d=pP(o,ne.fromDom(c)),g=N3(e.getStyle(c,d));if(n==="outdent"){const h=Math.max(0,g-r);e.setStyle(c,d,h?h+i:"")}else{const h=g+r+i;e.setStyle(c,d,h)}},Dz=(e,n)=>Tn(n,o=>{const r=pP(Vh(e),o),i=vb(o,r).map(N3).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&i>0}),mC=e=>{const n=I3(e);return!e.mode.isReadOnly()&&(n.length>1||Dz(e,n))},gC=e=>Ph(e)||Ad(e),Mz=e=>lc(e).exists(gC),I3=e=>Nt(Sn(e.selection.getSelectedBlocks()),n=>!gC(n)&&!Mz(n)&&Oz(n)),vP=(e,n)=>{var o,r;if(e.mode.isReadOnly())return;const{dom:i}=e,c=no(e),d=(r=(o=/[a-z%]+$/i.exec(c))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",g=N3(c),h=Vh(e);ke(I3(e),y=>{kz(i,n,h,g,d,y.dom)})},Rz=e=>vP(e,"indent"),bP=e=>vP(e,"outdent"),yP=e=>{if(e.selection.isCollapsed()&&mC(e)){const n=e.dom,o=e.selection.getRng(),r=Ie.fromRangeStart(o),i=n.getParent(o.startContainer,n.isBlock);if(i!==null&&lE(ne.fromDom(i),r,e.schema))return N.some(()=>bP(e))}return N.none()},CP=(e,n,o)=>xo([yP,oC,Ep,(r,i)=>D3(r,n,i),t0,u2,aC,P3,ui,R3,m3],r=>r(e,o)).filter(r=>e.selection.isEditable()),Pz=(e,n)=>{CP(e,n,!1).fold(()=>{e.selection.isEditable()&&(r2(e),Ev(e))},go)},Nz=(e,n)=>{CP(e,n,!0).fold(()=>{e.selection.isEditable()&&T5(e)},go)},Iz=(e,n)=>{e.addCommand("delete",()=>{Pz(e,n)}),e.addCommand("forwardDelete",()=>{Nz(e,n)})},SP=5,Bz=400,hC=e=>e.touches===void 0||e.touches.length!==1?N.none():N.some(e.touches[0]),Lz=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>SP||r>SP},Fz=e=>{const n=Gr(),o=cs(!1),r=jc(i=>{e.dispatch("longpress",{...i,type:"longpress"}),o.set(!0)},Bz);e.on("touchstart",i=>{hC(i).each(c=>{r.cancel();const d={x:c.clientX,y:c.clientY,target:i.target};r.throttle(i),o.set(!1),n.set(d)})},!0),e.on("touchmove",i=>{r.cancel(),hC(i).each(c=>{n.on(d=>{Lz(c,d)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",i=>{r.cancel(),i.type!=="touchcancel"&&n.get().filter(c=>c.target.isEqualNode(i.target)).each(()=>{o.get()?i.preventDefault():e.dispatch("tap",{...i,type:"tap"})})},!0)},B3=(e,n)=>sn(e,n.nodeName),_z=(e,n)=>rt(n)?!0:It(n)?!B3(e.getBlockElements(),n)&&!Bl(n)&&!pc(e,n)&&!SO(n):!1,$z=(e,n,o)=>Cn(e5(ne.fromDom(o),ne.fromDom(n)),r=>B3(e,r.dom)),xP=(e,n)=>{if(rt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||B3(e,n.nextSibling)||SO(n.nextSibling)}return!1},Qd=e=>e.dom.create(Ra(e),K1(e)),wP=e=>{const n=e.dom,o=e.selection,r=e.schema,i=r.getBlockElements(),c=o.getStart(),d=e.getBody();let g,h,y=null;const A=Ra(e);if(!c||!It(c))return;const M=d.nodeName.toLowerCase();if(!r.isValidChild(M,A.toLowerCase())||$z(i,d,c))return;if(d.firstChild===d.lastChild&&Ts(d.firstChild)){g=Qd(e),g.appendChild(Od().dom),d.replaceChild(g,d.firstChild),e.selection.setCursorLocation(g,0),e.nodeChanged();return}let R=d.firstChild;for(;R;)if(It(R)&&Lb(r,R),_z(r,R)){if(xP(i,R)){h=R,R=R.nextSibling,n.remove(h);continue}if(!g){if(!y&&e.hasFocus()&&(y=Yd(e.selection.getRng(),()=>document.createElement("span"))),!R.parentNode){R=null;break}g=Qd(e),d.insertBefore(g,R)}h=R,R=R.nextSibling,g.appendChild(h)}else g=null,R=R.nextSibling;y&&(e.selection.setRng(FR(y)),e.nodeChanged())},EP=(e,n,o)=>{const r=ne.fromDom(Qd(e)),i=Od();_s(r,i),o(n,r);const c=document.createRange();return c.setStartBefore(i.dom),c.setEndBefore(i.dom),c},Hz=e=>{e.on("NodeChange",()=>wP(e))},TP=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,Vz=(e,n,o)=>function(r){const i=arguments,c=i[i.length-2],d=c>0?n.charAt(c-1):"";if(d==='"')return r;if(d===">"){const g=n.lastIndexOf("<",c);if(g!==-1&&n.substring(g,c).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(i[0])+'">'+e.dom.encode(typeof i[1]=="string"?i[1]:i[0])+"</span>"},Dp=(e,n,o)=>{let r=n.length,i=o.content;if(o.format!=="raw"){for(;r--;)i=i.replace(n[r],Vz(e,i,Nk(e)));o.content=i}},zz=(e,n)=>Tn(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),L3=e=>{const n="contenteditable",o=" "+ct.trim(BL(e))+" ",r=" "+ct.trim(Nk(e))+" ",i=TP(o),c=TP(r),d=LL(e);d.length>0&&e.on("BeforeSetContent",g=>{Dp(e,d,g)}),e.parser.addAttributeFilter("class",g=>{let h=g.length;for(;h--;){const y=g[h];i(y)?y.attr(n,"true"):c(y)&&y.attr(n,"false")}}),e.serializer.addAttributeFilter(n,g=>{let h=g.length;for(;h--;){const y=g[h];if(!i(y)&&!c(y))continue;const A=y.attr("data-mce-content");d.length>0&&A?zz(d,A)?(y.name="#text",y.type=3,y.raw=!0,y.value=A):y.remove():y.attr(n,null)}})},F3=e=>yd(ne.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),AP=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Xb(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},OP=(e,n)=>{const o=F3(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),AP(e,o);return}$1(o)&&(AP(e,o),e.undoManager.add())}},pC=e=>{e.on("keyup compositionstart",ut(OP,e))},kP=ss,Uz=(e,n,o)=>JR(n,e,o,rg,ag,kP),Zz=(e,n,o)=>QR(n,e,o,c=>rg(c)||rE(c),c=>ag(c)||qD(c),kP),Wz=e=>{const n=e.dom.create(Ra(e));return n.innerHTML='<br data-mce-bogus="1">',n},DP=(e,n,o)=>{const r=Tc(e.getBody()),i=ut(vw,n===1?r.next:r.prev);if(o.collapsed){const c=e.dom.getParent(o.startContainer,"PRE");if(!c)return;if(!i(Ie.fromRangeStart(o))){const g=ne.fromDom(Wz(e));n===1?Gc(ne.fromDom(c),g):Aa(ne.fromDom(c),g),e.selection.select(g.dom,!0),e.selection.collapse()}}},_3=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return Uz(o,e,r).orThunk(()=>(DP(e,o,r),N.none()))},jz=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return Zz(o,e,r).orThunk(()=>(DP(e,o,r),N.none()))},Gz=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return C5(o)?!n:n},MP=(e,n)=>_3(e,Gz(e.selection,n)).exists(o=>(Jd(e,o),!0)),RP=(e,n)=>jz(e,n).exists(o=>(Jd(e,o),!0)),PP=(e,n)=>qR(e,n,n?ag:rg),vC=(e,n)=>n0(e,!n).map(o=>{const r=o.toRange(),i=e.selection.getRng();return n?r.setStart(i.startContainer,i.startOffset):r.setEnd(i.endContainer,i.endOffset),r}).exists(o=>(Jd(e,o),!0)),Kz=e=>Ft(["figcaption"],so(e)),Yz=(e,n,o)=>{const r=ut(zn,n);return Mu(ne.fromDom(e.container()),i=>o.isBlock(so(i)),r).filter(Kz)},Xz=(e,n,o)=>n?S3(e.dom,o):l0(e.dom,o),Jz=(e,n)=>{const o=ne.fromDom(e.getBody()),r=Ie.fromRangeStart(e.selection.getRng());return Yz(r,o,e.schema).exists(()=>{if(Xz(o,n,r)){const c=EP(e,o,n?_s:Tm);return e.selection.setRng(c),!0}else return!1})},NP=(e,n)=>e.selection.isCollapsed()?Jz(e,n):!1,Qz=(e,n,o)=>{const r=e.selection.getRng(),i=Ie.fromRangeStart(r);return e.getBody().firstChild===n&&l0(o,i)?(e.execCommand("InsertNewBlockBefore"),!0):!1},qz=(e,n)=>{const o=e.selection.getRng(),r=Ie.fromRangeStart(o);return e.getBody().lastChild===n&&S3(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},eU=(e,n)=>n?N.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>qz(e,o)).getOr(!1):N.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>N.from(e.dom.getParent(o,"details")).map(r=>Qz(e,r,o))).getOr(!1),$3=(e,n)=>eU(e,n),IP={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},tU=e=>Yt(e,n=>({...IP,...n})),nU=e=>Yt(e,n=>({...IP,...n})),BP=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,oU=(e,n)=>Cs(tU(e),o=>BP(o,n)?[o]:[]),H3=(e,n)=>Cs(nU(e),o=>BP(o,n)?[o]:[]),dn=(e,...n)=>()=>e.apply(null,n),c0=(e,n)=>Oo(oU(e,n),o=>o.action()),LP=(e,n)=>xo(H3(e,n),o=>o.action()),FP=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return JR(e,o,r,yv,sg,Ol).exists(i=>(Jd(e,i),!0))},_P=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return QR(e,o,r,yv,sg,Ol).exists(i=>(Jd(e,i),!0))},$P=(e,n)=>qR(e,n,n?sg:yv),sU=(e,n)=>HP(e,n,tt),HP=(e,n,o)=>Cs(Fr(e),r=>Si(r,n)?o(r)?[r]:[]:HP(r,n,o)),rU=(e,n,o=Le)=>{if(o(n))return N.none();if(Ft(e,so(n)))return N.some(n);const r=i=>Si(i,"table")||o(i);return x1(n,e.join(","),r)},aU=(e,n)=>rU(["td","th"],e,n),iU=e=>sU(e,"th,td"),VP=(e,n)=>bf(e,"table",n),zP=Nr.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),u0={...zP,none:e=>zP.none(e)},V3=(e,n,o,r,i=tt)=>{const c=r===1;if(!c&&o<=0)return u0.first(e[0]);if(c&&o>=e.length-1)return u0.last(e[e.length-1]);{const d=o+r,g=e[d];return i(g)?u0.middle(n,g):V3(e,n,d,r,i)}},UP=(e,n)=>VP(e,n).bind(o=>{const r=iU(o);return Ns(r,c=>zn(e,c)).map(c=>({index:c,all:r}))}),lU=(e,n,o)=>UP(e,o).fold(()=>u0.none(e),i=>V3(i.all,e,i.index,1,n)),cU=(e,n,o)=>UP(e,o).fold(()=>u0.none(),i=>V3(i.all,e,i.index,-1,n)),ZP=xa("image"),uU=e=>{const n=e;return N.from(n[ZP])},WP=(e,n)=>{const o=e;o[ZP]=n},z3=xa("event"),dU=e=>{const n=e;return N.from(n[z3])},d0=e=>n=>{const o=n;o[z3]=e},fU=(e,n)=>d0(n)(e),jP=d0(0),mU=d0(2),gU=d0(1),KP=(e=>n=>{const o=n;return N.from(o[z3]).exists(r=>r===e)})(0),HY=()=>Object.freeze({length:0,item:e=>null}),Dg=xa("mode"),VY=e=>{const n=e;return N.from(n[Dg])},U3=e=>n=>{const o=n;o[Dg]=e},hU=(e,n)=>U3(n)(e),pU=U3(0),Fi=U3(2),f0=U3(1),Lc=e=>n=>{const o=n;return N.from(o[Dg]).exists(r=>r===e)},Kl=Lc(0),bC=Lc(1),YP=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(Kl(e))if(q(o)){if(!Je(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{Kl(e)&&n.remove(o)},clear:()=>{Kl(e)&&n.clear()}}),m0=["none","copy","link","move"],vU=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],yC=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(i){Ft(m0,i)&&(n=i)},get effectAllowed(){return o},set effectAllowed(i){KP(r)&&Ft(vU,i)&&(o=i)},get items(){return YP(r,e.items)},get files(){return bC(r)?HY():e.files},get types(){return e.types},setDragImage:(i,c,d)=>{Kl(r)&&(WP(r,{image:i,x:c,y:d}),e.setDragImage(i,c,d))},getData:i=>bC(r)?"":e.getData(i),setData:(i,c)=>{Kl(r)&&e.setData(i,c)},clearData:i=>{Kl(r)&&e.clearData(i)}};return pU(r),r},zY=e=>{const n=yC(),o=VY(e);return Fi(e),jP(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,uU(e).each(r=>n.setDragImage(r.image,r.x,r.y)),ke(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),ke(e.files,r=>n.items.add(r)),dU(e).each(r=>{fU(n,r)}),o.each(r=>{hU(e,r),hU(n,r)}),n},bU=e=>{const n=e.getData("text/html");return n===""?N.none():N.some(n)},Mp=(e,n)=>e.setData("text/html",n),XP=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),Rs=(e,n)=>Cs(n,o=>{const r=XP(Dd(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),yU=(e,n,o)=>ts(e,(r,i)=>r.fold(()=>N.some(i),c=>{const d=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o)),g=Math.sqrt(Math.abs(i.x-n)+Math.abs(i.y-o));return N.some(g<d?i:c)}),N.none()),JP=(e,n,o,r,i)=>{const c=Yo(ne.fromDom(o),"td,th,caption").map(g=>g.dom),d=Nt(Rs(e,c),g=>n(g,i));return yU(d,r,i).map(g=>g.cell)},Rp=e=>e.bottom,Mg=e=>e.top,Rg=(e,n)=>e.y<n,CU=(e,n)=>e.y>n,SU=ut(JP,Rp,Rg),Z3=ut(JP,Mg,CU),W3=(e,n)=>an(n.getClientRects()).bind(o=>SU(e,o.left,o.top)).bind(o=>kp(w3(o),n)),QP=(e,n)=>An(n.getClientRects()).bind(o=>Z3(e,o.left,o.top)).bind(o=>kp(x3(o),n)),qP=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),xU=e=>e.breakType===di.Wrap&&e.positions.length===0,wU=e=>e.breakType===di.Br&&e.positions.length===1,CC=(e,n,o)=>{const r=e(n,o);return xU(r)||!Ts(o.getNode())&&wU(r)?!qP(e,n,r):r.breakAt.isNone()},EU=ut(CC,i0),TU=ut(CC,ed),AU=(e,n,o)=>{const r=Ie.fromRangeStart(n);return Gm(!e,o).exists(i=>i.isEqual(r))},OU=(e,n,o,r)=>{const i=e.selection.getRng(),c=n?1:-1;return Zk()&&AU(n,i,o)?(Kd(c,e,o,!n,!1).each(d=>{Jd(e,d)}),!0):!1},kU=(e,n,o)=>W3(n,o).orThunk(()=>an(o.getClientRects()).bind(r=>Ag(UR(e,Ie.before(n)),r.left))).getOr(Ie.before(n)),j3=(e,n,o)=>QP(n,o).orThunk(()=>an(o.getClientRects()).bind(r=>Ag(Gl(e,Ie.after(n)),r.left))).getOr(Ie.after(n)),G3=(e,n)=>{const o=n.getNode(e);return Nu(o)?N.some(o):N.none()},DU=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Gc:Aa,i=EP(n,ne.fromDom(o),r);Jd(n,i)})},eN=(e,n,o)=>{const r=G3(!!n,o),i=n===!1;r.fold(()=>Jd(e,o.toRange()),c=>Gm(i,e.getBody()).filter(d=>d.isEqual(o)).fold(()=>Jd(e,o.toRange()),d=>DU(n,e,c)))},Pp=(e,n,o,r)=>{const i=e.selection.getRng(),c=Ie.fromRangeStart(i),d=e.getBody();if(!n&&EU(r,c)){const g=kU(d,o,c);return eN(e,n,g),!0}else if(n&&TU(r,c)){const g=j3(d,o,c);return eN(e,n,g),!0}else return!1},K3=(e,n,o)=>N.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>N.from(e.dom.getParent(r,"table")).map(i=>o(e,n,i,r))).getOr(!1),tN=(e,n)=>K3(e,n,OU),SC=(e,n)=>K3(e,n,Pp),MU=e=>{const n=xh.exact(e,0,e,0);return o7(n)},Y3=(e,n,o)=>o.fold(N.none,N.none,(r,i)=>ZB(i).map(c=>MU(c)),r=>e.mode.isReadOnly()||!RU(r)?N.none():(e.execCommand("mceTableInsertRowAfter"),X3(e,n,r))),RU=e=>Mu(e,fr("table")).exists(Cd),X3=(e,n,o)=>Y3(e,n,lU(o,J3)),nN=(e,n,o)=>Y3(e,n,cU(o,J3)),J3=e=>Cd(e)||xb(e,oN),oN=e=>xu(e)&&Cd(e),Q3=(e,n)=>{const o=["table","li","dl"],r=ne.fromDom(e.getBody()),i=g=>{const h=so(g);return zn(g,r)||Ft(o,h)},c=e.selection.getRng(),d=ne.fromDom(n?c.endContainer:c.startContainer);return aU(d,i).map(g=>(VP(g,i).each(A=>{e.model.table.clearSelectedCells(A.dom)}),e.selection.collapse(!n),(n?X3:nN)(e,i,g).each(A=>{e.selection.setRng(A)}),!0)).getOr(!1)},sN=(e,n,o)=>{const r=eo.os.isMacOS()||eo.os.isiOS();c0([{keyCode:kt.RIGHT,action:dn(MP,e,!0)},{keyCode:kt.LEFT,action:dn(MP,e,!1)},{keyCode:kt.UP,action:dn(RP,e,!1)},{keyCode:kt.DOWN,action:dn(RP,e,!0)},...r?[{keyCode:kt.UP,action:dn(vC,e,!1),metaKey:!0,shiftKey:!0},{keyCode:kt.DOWN,action:dn(vC,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:kt.RIGHT,action:dn(tN,e,!0)},{keyCode:kt.LEFT,action:dn(tN,e,!1)},{keyCode:kt.UP,action:dn(SC,e,!1)},{keyCode:kt.DOWN,action:dn(SC,e,!0)},{keyCode:kt.UP,action:dn(SC,e,!1)},{keyCode:kt.UP,action:dn($3,e,!1)},{keyCode:kt.DOWN,action:dn($3,e,!0)},{keyCode:kt.RIGHT,action:dn(FP,e,!0)},{keyCode:kt.LEFT,action:dn(FP,e,!1)},{keyCode:kt.UP,action:dn(_P,e,!1)},{keyCode:kt.DOWN,action:dn(_P,e,!0)},{keyCode:kt.RIGHT,action:dn(oP,e,n,!0)},{keyCode:kt.LEFT,action:dn(oP,e,n,!1)},{keyCode:kt.RIGHT,ctrlKey:!r,altKey:r,action:dn(oz,e,n)},{keyCode:kt.LEFT,ctrlKey:!r,altKey:r,action:dn(sz,e,n)},{keyCode:kt.UP,action:dn(NP,e,!1)},{keyCode:kt.DOWN,action:dn(NP,e,!0)}],o).each(i=>{o.preventDefault()})},PU=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||sN(e,n,o)})},ru=(e,n)=>({container:e,offset:n}),xC=Co.DOM,Np=e=>n=>e===n?-1:0,g0=e=>n=>e.isBlock(n)||Ft(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",Pg=(e,n,o)=>{if(rt(e)&&n>=0)return N.some(ru(e,n));{const r=$u(xC);return N.from(r.backwards(e,n,Np(e),o)).map(i=>ru(i.container,i.container.data.length))}},q3=(e,n,o)=>{if(rt(e)&&n>=e.length)return N.some(ru(e,n));{const r=$u(xC);return N.from(r.forwards(e,n,Np(e),o)).map(i=>ru(i.container,0))}},wC=(e,n,o)=>{if(!rt(e))return N.none();const r=e.data;if(n>=0&&n<=r.length)return N.some(ru(e,n));{const i=$u(xC);return N.from(i.backwards(e,n,Np(e),o)).bind(c=>{const d=c.container.data;return wC(c.container,n+d.length,o)})}},eT=(e,n,o)=>{if(!rt(e))return N.none();const r=e.data;if(n<=r.length)return N.some(ru(e,n));{const i=$u(xC);return N.from(i.forwards(e,n,Np(e),o)).bind(c=>eT(c.container,n-r.length,o))}},Ip=(e,n,o,r,i)=>{const c=$u(e,g0(e));return N.from(c.backwards(n,o,r,i))},NU=e=>e.collapsed&&rt(e.startContainer),IU=e=>Oi(e.toString().replace(/\u00A0/g," ")),qf=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,tT=(e,n)=>e.substring(n.length),rN=(e,n,o,r=!1)=>{let i;const c=o.charAt(0);for(i=n-1;i>=0;i--){const d=e.charAt(i);if(!r&&qf(d))return N.none();if(c===d&&Ws(e,o,i,n))break}return N.some(i)},Ng=(e,n,o,r=!1)=>{if(!NU(n))return N.none();const i={text:"",offset:0},c=(g,h,y)=>(i.text=y+i.text,i.offset+=h,rN(i.text,i.offset,o,r).getOr(h)),d=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return Ip(e,n.startContainer,n.startOffset,c,d).bind(g=>{const h=n.cloneRange();if(h.setStart(g.container,g.offset),h.setEnd(n.endContainer,n.endOffset),h.collapsed)return N.none();const y=IU(h);return y.lastIndexOf(o)!==0?N.none():N.some({text:tT(y,o),range:h,trigger:o})})},aN=e=>e.nodeType===pd,nT=e=>e.nodeType===ua,oT=e=>{if(aN(e))return ru(e,e.data.length);{const n=e.childNodes;return n.length>0?oT(n[n.length-1]):ru(e,n.length)}},sT=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?sT(o[n],0):o.length>0&&nT(e)&&o.length===n?oT(o[o.length-1]):ru(e,n)},BU=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return Ip(e,n.container,n.offset,(i,c)=>c===0?-1:c,r).filter(i=>{const c=i.container.data.charAt(i.offset-1);return!qf(c)}).isSome()},iN=e=>n=>{const o=sT(n.startContainer,n.startOffset);return!BU(e,o)},LU=(e,n,o)=>xo(o.triggers,r=>Ng(e,n,r)),FU=(e,n)=>{const o=n(),r=e.selection.getRng();return LU(e.dom,r,o).bind(i=>lN(e,n,i))},lN=(e,n,o,r={})=>{var i;const c=n(),g=(i=e.selection.getRng().startContainer.nodeValue)!==null&&i!==void 0?i:"",h=Nt(c.lookupByTrigger(o.trigger),A=>o.text.length>=A.minChars&&A.matches.getOrThunk(()=>iN(e.dom))(o.range,g,o.text));if(h.length===0)return N.none();const y=Promise.all(Yt(h,A=>A.fetch(o.text,A.maxResults,r).then(R=>({matchText:o.text,items:R,columns:A.columns,onAction:A.onAction,highlightOn:A.highlightOn}))));return N.some({lookupData:y,context:o})};var au;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(au||(au={}));const h0=(e,n,o)=>e.stype===au.Error?n(e.serror):o(e.svalue),_U=e=>{const n=[],o=[];return ke(e,r=>{h0(r,i=>o.push(i),i=>n.push(i))}),{values:n,errors:o}},cN=(e,n)=>e.stype===au.Error?{stype:au.Error,serror:n(e.serror)}:e,$U=(e,n)=>e.stype===au.Value?{stype:au.Value,svalue:n(e.svalue)}:e,HU=(e,n)=>e.stype===au.Value?n(e.svalue):e,VU=(e,n)=>e.stype===au.Error?n(e.serror):e,uN=e=>({stype:au.Value,svalue:e}),dN=e=>({stype:au.Error,serror:e}),Ia={fromResult:e=>e.fold(dN,uN),toResult:e=>h0(e,dr.error,dr.value),svalue:uN,partition:_U,serror:dN,bind:HU,bindError:VU,map:$U,mapError:cN,fold:h0},fN=e=>Te(e)&&Xt(e).length>100?" removed due to size":JSON.stringify(e,null,2),zU=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Ye("... (only showing first ten failures)")}]):e;return Yt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},mN=(e,n)=>Ia.serror([{path:e,getErrorInfo:n}]),gN=(e,n,o)=>mN(e,()=>'Could not find valid *required* value for "'+n+'" in '+fN(o)),UU=(e,n)=>mN(e,Ye(n)),p0=e=>{const n=(r,i)=>Ia.bindError(e(i),c=>UU(r,c)),o=Ye("val");return{extract:n,toString:o}},Ba=p0(Ia.svalue),ZU=Ye(Ba),Bp=(e,n)=>p0(o=>{const r=typeof o;return e(o)?Ia.svalue(o):Ia.serror(`Expected type: ${n} but got: ${r}`)}),Ig=Bp(xt,"number"),rT=Bp(q,"string"),fi=Bp(Et,"function"),Bg=()=>({tag:"required",process:{}}),hN=e=>({tag:"defaultedThunk",process:e}),pN=e=>hN(Ye(e)),vN=()=>({tag:"option",process:{}}),WU=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),aT=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},iT=(e,n)=>e.length>0?Ia.svalue(qs(n,pu.apply(void 0,e))):Ia.svalue(n),EC=e=>x(Ia.serror,jr)(e),bN={consolidateObj:(e,n)=>{const o=Ia.partition(e);return o.errors.length>0?EC(o.errors):iT(o.values,n)},consolidateArr:e=>{const n=Ia.partition(e);return n.errors.length>0?EC(n.errors):Ia.svalue(n.values)}},iu=(e,n,o,r)=>_o(n,o).fold(()=>gN(e,o,n),r),TC=(e,n,o,r)=>{const i=_o(e,n).getOrThunk(()=>o(e));return r(i)},jU=(e,n,o)=>o(_o(e,n)),AC=(e,n,o,r)=>{const i=_o(e,n).map(c=>c===!0?o(e):c);return r(i)},lT=(e,n,o,r,i)=>{const c=g=>i.extract(n.concat([r]),g),d=g=>g.fold(()=>Ia.svalue(N.none()),h=>{const y=i.extract(n.concat([r]),h);return Ia.map(y,N.some)});switch(e.tag){case"required":return iu(n,o,r,c);case"defaultedThunk":return TC(o,r,e.process,c);case"option":return jU(o,r,d);case"defaultedOptionThunk":return AC(o,r,e.process,d);case"mergeWithThunk":return TC(o,r,Ye({}),g=>{const h=qs(e.process(o),g);return c(h)})}},yN=(e,n,o)=>{const r={},i=[];for(const c of o)aT(c,(d,g,h,y)=>{const A=lT(h,e,n,d,y);Ia.fold(A,M=>{i.push(...M)},M=>{r[g]=M})},(d,g)=>{r[d]=g(n)});return i.length>0?Ia.serror(i):Ia.svalue(r)},CN=e=>({extract:(r,i)=>yN(r,i,e),toString:()=>`obj{
`+Yt(e,i=>aT(i,(c,d,g,h)=>c+" -> "+h.toString(),(c,d)=>"state("+c+")")).join(`
`)+"}"}),SN=e=>({extract:(r,i)=>{const c=Yt(i,(d,g)=>e.extract(r.concat(["["+g+"]"]),d));return bN.consolidateArr(c)},toString:()=>"array("+e.toString()+")"}),GU=(e,n,o)=>{const r=n.extract([e],o);return Ia.mapError(r,i=>({input:o,errors:i}))},KU=(e,n,o)=>Ia.toResult(GU(e,n,o)),YU=e=>`Errors: 
`+zU(e.errors).join(`
`)+`

Input object: `+fN(e.input),OC=WU,xN=(e,n)=>OC(e,e,Bg(),n),cT=e=>xN(e,rT),wN=e=>xN(e,fi),XU=(e,n)=>OC(e,e,vN(),n),JU=e=>XU(e,fi),EN=(e,n)=>OC(e,e,pN(n),ZU()),kC=(e,n,o)=>OC(e,e,pN(n),o),DC=(e,n)=>kC(e,n,Ig),TN=(e,n,o)=>kC(e,n,SN(o)),uT=cT("type"),AN=wN("fetch"),ON=wN("onAction"),dT=e=>EN("columns",e),kN=CN([uT,cT("trigger"),DC("minChars",1),dT(1),DC("maxResults",10),JU("matches"),AN,ON,TN("highlightOn",[],rT)]),DN=e=>KU("Autocompleter",kN,e),MN=()=>{const e={},n={},o={},r={},i={},c={},d={},g={},h={},y=(_,Z)=>(V,G)=>{_[V.toLowerCase()]={...G,type:Z}},A=(_,Z)=>(V,G)=>{_[V.toLowerCase()]={type:Z,...G}},M=(_,Z)=>r[_.toLowerCase()]=Z,R=(_,Z)=>d[_.toLowerCase()]=Z;return{addButton:y(e,"button"),addGroupToolbarButton:y(e,"grouptoolbarbutton"),addToggleButton:y(e,"togglebutton"),addMenuButton:y(e,"menubutton"),addSplitButton:y(e,"splitbutton"),addMenuItem:y(n,"menuitem"),addNestedMenuItem:y(n,"nestedmenuitem"),addToggleMenuItem:y(n,"togglemenuitem"),addAutocompleter:y(o,"autocompleter"),addContextMenu:y(i,"contextmenu"),addContextToolbar:y(c,"contexttoolbar"),addContextForm:A(c,"contextform"),addSidebar:y(g,"sidebar"),addView:y(h,"views"),addIcon:M,addContext:R,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:i,contextToolbars:c,sidebars:g,views:h,contexts:d})}},QU=e=>{const n=e.ui.registry.getAll().popups,o=_t(n,d=>DN(d).fold(g=>{throw new Error(YU(g))},Qn)),r=Gi(gu(o,d=>d.trigger)),i=cd(o);return{dataset:o,triggers:r,lookupByTrigger:d=>Nt(i,g=>g.trigger===d)}},qU=(e,n)=>{const o=jc(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const i=r.which;i===8?o.throttle():i===27?(o.cancel(),n.cancelIfNecessary()):(i===38||i===40)&&o.cancel()},!0),e.on("remove",o.cancel)},MC=e=>{const n=Gr(),o=cs(!1),r=n.isSet,i=()=>{r()&&(nL(e),o.set(!1),n.clear())},c=M=>{r()||n.set({trigger:M.trigger,matchLength:M.text.length})},d=zo(()=>QU(e)),g=M=>n.get().map(R=>Ng(e.dom,e.selection.getRng(),R.trigger,!0).bind(_=>lN(e,d,_,M))).getOrThunk(()=>FU(e,d)),h=M=>{g(M).fold(i,R=>{c(R.context),R.lookupData.then(_=>{n.get().map(Z=>{const V=R.context;Z.trigger===V.trigger&&(n.set({...Z,matchLength:V.text.length}),o.get()?(tw(e,{range:V.range}),Ec(e,{lookupData:_})):(o.set(!0),tw(e,{range:V.range}),Id(e,{lookupData:_})))})})})},y=(M,R)=>{const _=M.compareBoundaryPoints(window.Range.START_TO_START,R),Z=M.compareBoundaryPoints(window.Range.END_TO_END,R);return _>=0&&Z<=0},A=()=>n.get().bind(({trigger:M})=>{const R=e.selection.getRng();return Ng(e.dom,R,M,o.get()).filter(({range:_})=>y(R,_)).map(({range:_})=>_)});e.addCommand("mceAutocompleterReload",(M,R)=>{const _=Te(R)?R.fetchOptions:{};h(_)}),e.addCommand("mceAutocompleterClose",i),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{A().each(M=>{tw(e,{range:M})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>A().isSome()),qU(e,{cancelIfNecessary:i,load:h})},v0=ca().browser.isSafari(),RN=e=>kf(ne.fromDom(e)),PN=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},RC=(e,n)=>N.from(e.getParent(n.container(),"details")),NN=(e,n)=>RC(e,n).isSome(),IN=(e,n)=>{const o=N.from(e.getParent(n.startContainer,"details")),r=N.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const i=o.bind(c=>N.from(e.select("summary",c)[0]));return N.some({startSummary:i,startDetails:o,endDetails:r})}else return N.none()},BN=(e,n)=>oa(n).exists(o=>o.isEqual(e)),eZ=(e,n)=>Di(n).exists(o=>Ts(o.getNode())&&ci(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),tZ=(e,n)=>n.startSummary.exists(o=>BN(e,o)),nZ=(e,n)=>n.startSummary.exists(o=>eZ(e,o)),oZ=(e,n)=>n.startDetails.exists(o=>ci(o,e).forall(r=>n.startSummary.exists(i=>!i.contains(e.container())&&i.contains(r.container())))),sZ=(e,n,o)=>o.startDetails.exists(r=>ar(e,n).forall(i=>!r.contains(i.container()))),fT=(e,n)=>{const o=n.getNode();Je(o)||e.selection.setCursorLocation(o,n.offset())},rZ=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const i=e.dom.select("summary",r)[0];i&&(o?oa(i):Di(i)).each(d=>fT(e,d))}else fT(e,n)},aZ=(e,n)=>{const o=h=>h.contains(e.startContainer),r=h=>h.contains(e.endContainer),i=n.startSummary.exists(o),c=n.startSummary.exists(r),d=n.startDetails.forall(h=>n.endDetails.forall(y=>h!==y));return(i||c)&&!(i&&c)||d},LN=(e,n,o)=>{const{dom:r,selection:i}=e,c=e.getBody();if(o==="character"){const d=Ie.fromRangeStart(i.getRng()),g=r.getParent(d.container(),r.isBlock),h=RC(r,d),y=g&&r.isEmpty(g),A=te(g==null?void 0:g.previousSibling),M=te(g==null?void 0:g.nextSibling);return y&&(n?M:A)&&Ac(!n,c,d).exists(Z=>NN(r,Z)&&!yt(h,RC(r,Z)))?!0:Ac(n,c,d).fold(Le,R=>{const _=RC(r,R);if(NN(r,R)&&!yt(h,_)){if(n||rZ(e,R,!1),g&&y){if(n&&A)return!0;if(!n&&M)return!0;rZ(e,R,n),e.dom.remove(g)}return!0}else return!1})}else return!1},iZ=(e,n,o,r)=>{const c=e.selection.getRng(),d=Ie.fromRangeStart(c),g=e.getBody();return r==="selection"?aZ(c,n):o?nZ(d,n)||sZ(g,d,n):tZ(d,n)||oZ(d,n)},lZ=(e,n,o)=>IN(e.dom,e.selection.getRng()).fold(()=>LN(e,n,o),r=>iZ(e,r,n,o)||LN(e,n,o)),cZ=(e,n,o)=>{const r=e.selection,i=r.getNode(),c=r.getRng(),d=Ie.fromRangeStart(c);return Rb(i)?(o==="selection"&&PN(c,i)||bE(n,d,i)?RN(i):e.undoManager.transact(()=>{const g=r.getSel();let{anchorNode:h,anchorOffset:y,focusNode:A,focusOffset:M}=g??{};const R=()=>{ye(h)&&ye(y)&&ye(A)&&ye(M)&&(g==null||g.setBaseAndExtent(h,y,A,M))},_=()=>{h=g==null?void 0:g.anchorNode,y=g==null?void 0:g.anchorOffset,A=g==null?void 0:g.focusNode,M=g==null?void 0:g.focusOffset},Z=(G,oe)=>{ke(G.childNodes,ue=>{Xm(ue)&&oe.appendChild(ue)})},V=e.dom.create("span",{"data-mce-bogus":"1"});Z(i,V),i.appendChild(V),R(),(o==="word"||o==="line")&&(g==null||g.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&PN(r.getRng(),V)?RN(i):(e.execCommand(n?"ForwardDelete":"Delete"),_(),Z(V,i),R()),e.dom.remove(V)}),!0):!1},Lg=(e,n,o)=>lZ(e,n,o)||v0&&cZ(e,n,o)?N.some(qe):N.none(),FN=e=>(n,o,r={})=>{const i=n.getBody(),c={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:i,currentTarget:i,eventPhase:Event.AT_TARGET,originalTarget:i,explicitOriginalTarget:i,isTrusted:!1,srcElement:i,cancelable:!1,preventDefault:qe,inputType:o},d=Oh(new InputEvent(e));return n.dispatch(e,{...d,...c,...r})},Lp=FN("input"),PC=FN("beforeinput"),_N=ca(),$N=_N.os,HN=$N.isMacOS()||$N.isiOS(),uZ=_N.browser.isFirefox(),dZ=(e,n,o)=>{const r=o.keyCode===kt.BACKSPACE?"deleteContentBackward":"deleteContentForward",i=e.selection.isCollapsed(),c=i?"character":"selection",d=g=>i?g?"word":"line":"selection";LP([{keyCode:kt.BACKSPACE,action:dn(yP,e)},{keyCode:kt.BACKSPACE,action:dn(oC,e,!1)},{keyCode:kt.DELETE,action:dn(oC,e,!0)},{keyCode:kt.BACKSPACE,action:dn(Ep,e,!1)},{keyCode:kt.DELETE,action:dn(Ep,e,!0)},{keyCode:kt.BACKSPACE,action:dn(D3,e,n,!1)},{keyCode:kt.DELETE,action:dn(D3,e,n,!0)},{keyCode:kt.BACKSPACE,action:dn(u2,e,!1)},{keyCode:kt.DELETE,action:dn(u2,e,!0)},{keyCode:kt.BACKSPACE,action:dn(Lg,e,!1,c)},{keyCode:kt.DELETE,action:dn(Lg,e,!0,c)},...HN?[{keyCode:kt.BACKSPACE,altKey:!0,action:dn(Lg,e,!1,d(!0))},{keyCode:kt.DELETE,altKey:!0,action:dn(Lg,e,!0,d(!0))},{keyCode:kt.BACKSPACE,metaKey:!0,action:dn(Lg,e,!1,d(!1))}]:[{keyCode:kt.BACKSPACE,ctrlKey:!0,action:dn(Lg,e,!1,d(!0))},{keyCode:kt.DELETE,ctrlKey:!0,action:dn(Lg,e,!0,d(!0))}],{keyCode:kt.BACKSPACE,action:dn(aC,e,!1)},{keyCode:kt.DELETE,action:dn(aC,e,!0)},{keyCode:kt.BACKSPACE,action:dn(P3,e,!1)},{keyCode:kt.DELETE,action:dn(P3,e,!0)},{keyCode:kt.BACKSPACE,action:dn(ui,e,!1)},{keyCode:kt.DELETE,action:dn(ui,e,!0)},{keyCode:kt.BACKSPACE,action:dn(t0,e,!1)},{keyCode:kt.DELETE,action:dn(t0,e,!0)},{keyCode:kt.BACKSPACE,action:dn(R3,e,!1)},{keyCode:kt.DELETE,action:dn(R3,e,!0)},{keyCode:kt.BACKSPACE,action:dn(m3,e,!1)},{keyCode:kt.DELETE,action:dn(m3,e,!0)}],o).filter(g=>e.selection.isEditable()).each(g=>{o.preventDefault(),PC(e,r).isDefaultPrevented()||(g(),Lp(e,r))})},fZ=(e,n,o)=>c0([{keyCode:kt.BACKSPACE,action:dn(BR,e)},{keyCode:kt.DELETE,action:dn(BR,e)},...HN?[{keyCode:kt.BACKSPACE,altKey:!0,action:dn(dC,e)},{keyCode:kt.DELETE,altKey:!0,action:dn(dC,e)},...o?[{keyCode:uZ?224:91,action:dn(dC,e)}]:[]]:[{keyCode:kt.BACKSPACE,ctrlKey:!0,action:dn(dC,e)},{keyCode:kt.DELETE,ctrlKey:!0,action:dn(dC,e)}]],n),mZ=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===kt.BACKSPACE,r.isDefaultPrevented()||dZ(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||fZ(e,r,o),o=!1})},gZ=e=>{for(;e;){if(It(e)||rt(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Fg=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const c=gZ(n.firstChild);c&&/^(UL|OL|DL)$/.test(c.nodeName)&&n.insertBefore(o.doc.createTextNode(Uo),n.firstChild)}const i=o.createRng();if(n.normalize(),n.hasChildNodes()){const c=new _r(n,n);let d=n,g;for(;g=c.current();){if(rt(g)){i.setStart(g,0),i.setEnd(g,0);break}if(r[g.nodeName.toLowerCase()]){i.setStartBefore(g),i.setEndBefore(g);break}d=g,g=c.next()}g||(i.setStart(d,0),i.setEnd(d,0))}else Ts(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)):(i.setStart(n,0),i.setEnd(n,0));e.selection.setRng(i),ng(e,i)},b0=(e,n)=>{const o=e.getRoot();let r,i=n;for(;i!==o&&i&&e.getContentEditable(i)!=="false";){if(e.getContentEditable(i)==="true"){r=i;break}i=i.parentNode}return i!==o?r:o},mT=e=>N.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),hZ=e=>mT(e).fold(Ye(""),n=>n.nodeName.toUpperCase()),NC=e=>mT(e).filter(n=>Ad(ne.fromDom(n))).isSome(),gT=e=>{e.innerHTML='<br data-mce-bogus="1">'},pZ=(e,n,o)=>{const r=e.dom;N.from(o.style).map(r.parseStyle).each(h=>{const A={...YS(ne.fromDom(n)),...h};r.setStyles(n,A)});const i=N.from(o.class).map(h=>h.split(/\s+/)),c=N.from(n.className).map(h=>Nt(h.split(/\s+/),y=>y!==""));Zs(i,c,(h,y)=>{const A=Nt(y,R=>!Ft(h,R)),M=[...h,...A];r.setAttrib(n,"class",M.join(" "))});const d=["style","class"],g=Ci(o,(h,y)=>!Ft(d,y));r.setAttribs(n,g)},Fp=(e,n)=>{if(Ra(e).toLowerCase()===n.tagName.toLowerCase()){const r=K1(e);pZ(e,n,r)}},IC=(e,n,o,r,i=!0,c,d)=>{const g=e.dom,h=e.schema,y=Ra(e),A=o?o.nodeName.toUpperCase():"";let M=n;const R=h.getTextInlineElements();let _;c||A==="TABLE"||A==="HR"?_=g.create(c||y,d||{}):_=o.cloneNode(!1);let Z=_;if(!i)g.setAttrib(_,"style",null),g.setAttrib(_,"class",null);else do if(R[M.nodeName]){if(Il(M)||Bl(M))continue;const V=M.cloneNode(!1);g.setAttrib(V,"id",""),_.hasChildNodes()?(V.appendChild(_.firstChild),_.appendChild(V)):(Z=V,_.appendChild(V))}while((M=M.parentNode)&&M!==r);return Fp(e,_),gT(Z),_},vZ=(e,n)=>e.dom.getParent(n,Gs),bZ=(e,n,o)=>{let r=n;for(;r&&r!==e&&te(r.nextSibling);){const i=r.parentElement;if(!i||!o(i))return Gs(i);r=i}return!1},YY=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Ra(e)&&e.dom.isEmpty(o)&&bZ(e.getBody(),o,r=>sn(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),yZ=(e,n,o)=>{var r,i,c;const d=n(Ra(e)),g=vZ(e,o);g&&(e.dom.insertAfter(d,g),Fg(e,d),((c=(i=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||i===void 0?void 0:i.length)!==null&&c!==void 0?c:0)>1&&e.dom.remove(o))},CZ=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,SZ=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},_p=(e,n)=>{const o=e==null?void 0:e.parentNode;return ye(o)&&o.nodeName===n},VN=e=>ye(e)&&/^(OL|UL|LI)$/.test(e.nodeName),hT=e=>ye(e)&&/^(LI|DT|DD)$/.test(e.nodeName),xZ=e=>VN(e)&&VN(e.parentNode),y0=e=>{const n=e.parentNode;return hT(n)?n:e},lu=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!It(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},qa=e=>ts(gu(YS(ne.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),zN=(e,n,o,r,i)=>{const c=e.dom,d=e.selection.getRng(),g=o.parentNode;if(o===e.getBody()||!g)return;xZ(o)&&(i="LI");const h=hT(r)?qa(r):void 0;let y=hT(r)&&h?n(i,{style:qa(r)}):n(i);if(lu(o,r,!0)&&lu(o,r,!1))if(_p(o,"LI")){const A=y0(o);c.insertAfter(y,A),SZ(o)?c.remove(A):c.remove(o)}else c.replace(y,o);else if(lu(o,r,!0))_p(o,"LI")?(c.insertAfter(y,y0(o)),y.appendChild(c.doc.createTextNode(" ")),y.appendChild(o)):g.insertBefore(y,o),c.remove(r);else if(lu(o,r,!1))c.insertAfter(y,y0(o)),c.remove(r);else{o=y0(o);const A=d.cloneRange();A.setStartAfter(r),A.setEndAfter(o);const M=A.extractContents();if(i==="LI"&&CZ(M,"LI")){const R=Nt(Yt(y.children,ne.fromDom),Kt(fr("br")));y=M.firstChild,c.insertAfter(M,o),ke(R,_=>Tm(ne.fromDom(y),_)),h&&y.setAttribute("style",h)}else c.insertAfter(M,o),c.insertAfter(y,o);c.remove(r)}Fg(e,y)},C0=e=>{ke(ox(ne.fromDom(e),Ta),n=>{const o=n.dom;o.nodeValue=Oi(o.data)})},em=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},td=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),_g=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,pT=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,S0=(e,n)=>ye(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",UN=(e,n,o)=>{var r;const i=[];if(!o)return;let c=o;for(;c=c.firstChild;){if(e.isBlock(c))return;It(c)&&!n[c.nodeName.toLowerCase()]&&i.push(c)}let d=i.length;for(;d--;)c=i[d],(!c.hasChildNodes()||c.firstChild===c.lastChild&&((r=c.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||td(e,c))&&e.remove(c)},BC=(e,n,o)=>rt(n)?e?o===1&&n.data.charAt(o-1)===wr?0:o:o===n.data.length-1&&n.data.charAt(o)===wr?n.data.length:o:o,wZ=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,BC(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,BC(!1,e.endContainer,e.endOffset)),n},EZ=e=>{let n=e;do rt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},ZN=(e,n,o,r,i)=>{var c,d;const g=e.dom,h=(c=b0(g,r))!==null&&c!==void 0?c:g.getRoot();let y=g.getParent(r,g.isBlock);if(!y||!S0(g,y)){if(y=y||h,!y.hasChildNodes()){const _=g.create(n);return Fp(e,_),y.appendChild(_),o.setStart(_,0),o.setEnd(_,0),_}let A=r;for(;A&&A.parentNode!==y;)A=A.parentNode;let M;for(;A&&!g.isBlock(A);)M=A,A=A.previousSibling;const R=(d=M==null?void 0:M.parentElement)===null||d===void 0?void 0:d.nodeName;if(M&&R&&e.schema.isValidChild(R,n.toLowerCase())){const _=M.parentNode,Z=g.create(n);for(Fp(e,Z),_.insertBefore(Z,M),A=M;A&&!g.isBlock(A);){const V=A.nextSibling;Z.appendChild(A),A=V}o.setStart(r,i),o.setEnd(r,i)}}return r},WN=(e,n)=>{n.normalize();const o=n.lastChild;(!o||It(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},jN=(e,n)=>{const o=py(e);return gt(n)?!1:q(o)?Ft(ct.explode(o),n.nodeName.toLowerCase()):o},TZ={insert:(e,n)=>{let o,r,i,c,d=!1;const g=e.dom,h=e.schema,y=h.getNonEmptyElements(),A=e.selection.getRng(),M=Ra(e),R=ne.fromDom(A.startContainer),_=Ou(R,A.startOffset),Z=_.exists(je=>xu(je)&&!Cd(je)),V=A.collapsed&&Z,G=(je,wt)=>IC(e,o,et,Ue,Vu(e),je,wt),oe=je=>{const wt=BC(je,o,r);if(rt(o)&&(je?wt>0:wt<o.data.length))return!1;if((o.parentNode===et||o===et)&&d&&!je||je&&It(o)&&o===et.firstChild)return!0;if(_g(o,"TABLE")||_g(o,"HR"))return pT(o,"BR")?!je:d&&!je||!d&&je;const Vt=new _r(o,et);rt(o)&&(je&&wt===0?Vt.prev():!je&&wt===o.data.length&&Vt.next());let Mn;for(;Mn=Vt.current();){if(It(Mn)){if(!Mn.getAttribute("data-mce-bogus")){const Pn=Mn.nodeName.toLowerCase();if(y[Pn]&&Pn!=="br")return!1}}else if(rt(Mn)&&!$s(Mn.data))return!1;je?Vt.prev():Vt.next()}return!0},ue=()=>{let je;return/^(H[1-6]|PRE|FIGURE)$/.test(i)&&Tt!=="HGROUP"?je=G(M):je=G(),jN(e,c)&&S0(g,c)&&g.isEmpty(et,void 0,{includeZwsp:!0})?je=g.split(c,et):g.insertAfter(je,et),Fg(e,je),je};jy(g,A).each(je=>{A.setStart(je.startContainer,je.startOffset),A.setEnd(je.endContainer,je.endOffset)}),o=A.startContainer,r=A.startOffset;const ge=!!(n&&n.shiftKey),Se=!!(n&&n.ctrlKey);It(o)&&o.hasChildNodes()&&!V&&(d=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,d&&rt(o)?r=o.data.length:r=0);const Ue=b0(g,o);if(!Ue||em(e,o))return;ge||(o=ZN(e,M,A,o,r));let et=g.getParent(o,g.isBlock)||g.getRoot();c=ye(et==null?void 0:et.parentNode)?g.getParent(et.parentNode,g.isBlock):null,i=et?et.nodeName.toUpperCase():"";const Tt=c?c.nodeName.toUpperCase():"";if(Tt==="LI"&&!Se){const je=c;et=je,c=je.parentNode,i=Tt}if(It(c)&&YY(e,ge,et))return yZ(e,G,et);if(/^(LI|DT|DD)$/.test(i)&&It(c)&&g.isEmpty(et)){zN(e,G,c,et,M);return}if(!V&&(et===e.getBody()||!S0(g,et)))return;const Ne=et.parentNode;let Ae;if(V)Ae=G(M),_.fold(()=>{_s(R,ne.fromDom(Ae))},je=>{Aa(je,ne.fromDom(Ae))}),e.selection.setCursorLocation(Ae,0);else if(sr(et))Ae=Xb(et),g.isEmpty(et)&&gT(et),Fp(e,Ae),Fg(e,Ae);else if(oe(!1))Ae=ue();else if(oe(!0)&&Ne){const je=Ie.fromRangeStart(A),wt=qD(je),Vt=ne.fromDom(et),Pn=qy(Vt,je,e.schema)?s5(Vt,je,e.schema).bind(So=>N.from(So.getNode())):N.none();Ae=Ne.insertBefore(G(),et);const io=_g(et,"HR")||wt?Ae:Pn.getOr(et);Fg(e,io)}else{const je=wZ(A).cloneRange();je.setEndAfter(et);const wt=je.extractContents();C0(wt),EZ(wt),Ae=wt.firstChild,g.insertAfter(wt,et),UN(g,y,Ae),WN(g,et),g.isEmpty(et)&&gT(et),Ae.normalize(),g.isEmpty(Ae)?(g.remove(Ae),ue()):(Fp(e,Ae),Fg(e,Ae))}g.setAttrib(Ae,"id",""),e.dispatch("NewBlock",{newBlock:Ae})},fakeEventName:"insertParagraph"},JY=(e,n,o)=>{const r=new _r(n,o);let i;const c=e.getNonEmptyElements();for(;i=r.next();)if(c[i.nodeName.toLowerCase()]||rt(i)&&i.length>0)return!0;return!1},Yl=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),ng(e,r)},AZ=(e,n)=>{const o=e.selection,r=e.dom,i=o.getRng();let c,d=!1;jy(r,i).each(_=>{i.setStart(_.startContainer,_.startOffset),i.setEnd(_.endContainer,_.endOffset)});let g=i.startOffset,h=i.startContainer;if(It(h)&&h.hasChildNodes()){const _=g>h.childNodes.length-1;h=h.childNodes[Math.min(g,h.childNodes.length-1)]||h,_&&rt(h)?g=h.data.length:g=0}let y=r.getParent(h,r.isBlock);const A=y&&y.parentNode?r.getParent(y.parentNode,r.isBlock):null,M=A?A.nodeName.toUpperCase():"",R=!!(n&&n.ctrlKey);M==="LI"&&!R&&(y=A),rt(h)&&g>=h.data.length&&(JY(e.schema,h,y||r.getRoot())||(c=r.create("br"),i.insertNode(c),i.setStartAfter(c),i.setEndAfter(c),d=!0)),c=r.create("br"),Hu(r,i,c),Yl(e,c,d),e.undoManager.add()},OZ=(e,n)=>{const o=ne.fromTag("br");Aa(ne.fromDom(n),o),e.undoManager.add()},$g=(e,n)=>{kZ(e.getBody(),n)||Gc(ne.fromDom(n),ne.fromTag("br"));const o=ne.fromTag("br");Gc(ne.fromDom(n),o),Yl(e,o.dom,!1),e.undoManager.add()},GN=e=>Ts(e.getNode()),kZ=(e,n)=>GN(Ie.after(n))?!0:ar(e,Ie.after(n)).map(o=>Ts(o.getNode())).getOr(!1),x0=e=>e&&e.nodeName==="A"&&"href"in e,vT=e=>e.fold(Le,x0,x0,Le),KN=e=>{const n=ut(lg,e),o=Ie.fromRangeStart(e.selection.getRng());return qu(n,e.getBody(),o).filter(vT)},YN=(e,n)=>{n.fold(qe,ut(OZ,e),ut($g,e),qe)},bT={insert:(e,n)=>{const o=KN(e);o.isSome()?o.each(ut(YN,e)):AZ(e,n)},fakeEventName:"insertLineBreak"},yT=(e,n)=>mT(e).filter(o=>n.length>0&&Si(ne.fromDom(o),n)).isSome(),CT=e=>yT(e,dL(e)),MZ=e=>yT(e,Bd(e)),cl=Nr.generate([{br:[]},{block:[]},{none:[]}]),RZ=(e,n)=>MZ(e),XN=e=>(n,o)=>NC(n)===e,JN=(e,n)=>(o,r)=>hZ(o)===e.toUpperCase()===n,PZ=e=>{const n=b0(e.dom,e.selection.getStart());return gt(n)},w0=e=>JN("pre",e),NZ=()=>JN("summary",!0),E0=e=>(n,o)=>XK(n)===e,IZ=(e,n)=>CT(e),Fc=(e,n)=>n,ST=e=>{const n=Ra(e),o=b0(e.dom,e.selection.getStart());return ye(o)&&e.schema.isValidChild(o.nodeName,n)},BZ=e=>{const n=e.selection.getRng(),o=ne.fromDom(n.startContainer),i=Ou(o,n.startOffset).map(c=>xu(c)&&!Cd(c));return n.collapsed&&i.getOr(!0)},Xl=(e,n)=>(o,r)=>ts(e,(c,d)=>c&&d(o,r),!0)?N.some(n):N.none(),LZ=(e,n)=>$R([Xl([RZ],cl.none()),Xl([w0(!0),PZ],cl.none()),Xl([NZ()],cl.br()),Xl([w0(!0),E0(!1),Fc],cl.br()),Xl([w0(!0),E0(!1)],cl.block()),Xl([w0(!0),E0(!0),Fc],cl.block()),Xl([w0(!0),E0(!0)],cl.br()),Xl([XN(!0),Fc],cl.br()),Xl([XN(!0)],cl.block()),Xl([IZ],cl.br()),Xl([Fc],cl.br()),Xl([ST],cl.block()),Xl([BZ],cl.block())],[e,!!(n&&n.shiftKey)]).getOr(cl.none()),$p=(e,n,o)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||E5(n),!(ye(o)&&PC(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),ye(o)&&Lp(n,e.fakeEventName)))},LC=(e,n)=>{if(e.mode.isReadOnly())return;const o=()=>$p(bT,e,n),r=()=>$p(TZ,e,n),i=LZ(e,n);switch(on(e)){case"linebreak":i.fold(o,o,qe);break;case"block":i.fold(r,r,qe);break;case"invert":i.fold(r,o,qe);break;default:i.fold(o,r,qe);break}},xT=ca(),QN=xT.os.isiOS()&&xT.browser.isSafari(),wT=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),a9(e.undoManager),e.undoManager.transact(()=>{LC(e,n)}))},FZ=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(rt(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},T0=e=>{let n=N.none();const o=i=>{n=N.some(i.selection.getBookmark()),i.undoManager.add()},r=(i,c)=>{i.undoManager.undo(),n.fold(qe,d=>i.selection.moveToBookmark(d)),wT(i,c),n=N.none()};e.on("keydown",i=>{i.keyCode===kt.ENTER&&(QN&&FZ(e.selection.getRng())?o(e):wT(e,i))}),e.on("keyup",i=>{i.keyCode===kt.ENTER&&n.each(()=>r(e,i))})},FC=(e,n,o)=>{const r=eo.os.isMacOS()||eo.os.isiOS();c0([{keyCode:kt.END,action:dn(PP,e,!0)},{keyCode:kt.HOME,action:dn(PP,e,!1)},...r?[]:[{keyCode:kt.HOME,action:dn(vC,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:kt.END,action:dn(vC,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:kt.END,action:dn($P,e,!0)},{keyCode:kt.HOME,action:dn($P,e,!1)},{keyCode:kt.END,action:dn(uC,e,!0,n)},{keyCode:kt.HOME,action:dn(uC,e,!1,n)}],o).each(i=>{o.preventDefault()})},qN=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||FC(e,n,o)})},e8=e=>{e.on("input",n=>{n.isComposing||e2(e)})},t8=ca(),n8=(e,n,o)=>{c0([{keyCode:kt.PAGE_UP,action:dn(uC,e,!1,n)},{keyCode:kt.PAGE_DOWN,action:dn(uC,e,!0,n)}],o)},A0=e=>e.stopImmediatePropagation(),_C=e=>e.keyCode===kt.PAGE_UP||e.keyCode===kt.PAGE_DOWN,Hp=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",A0,!0):!o&&e.get()&&n.off("NodeChange",A0),e.set(o)},_Z=(e,n)=>{if(t8.os.isMacOS())return;const o=cs(!1);e.on("keydown",r=>{_C(r)&&Hp(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||n8(e,n,r),_C(r)&&o.get()&&(Hp(o,e,!1),e.nodeChanged())})},ET=(e,n)=>e===n||e.contains(n),$Z=(e,n)=>!ET(e.getBody(),n.startContainer)||!ET(e.getBody(),n.endContainer)?!0:FD(e.dom,n),HZ=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||Cn(n.getTargetRanges(),o=>!$Z(e,o)))&&n.preventDefault()})},TT=(e,n)=>{const o=n.container(),r=n.offset();return rt(o)?(o.insertData(r,e),N.some(Ie(o,r+e.length))):wy(n).map(i=>{const c=ne.fromText(e);return n.isAtEnd()?Gc(i,c):Aa(i,c),Ie(c.dom,e.length)})},o8=ut(TT,Uo),AT=ut(TT," "),qY=(e,n,o)=>mE(e,n,o)?o8(n):AT(n),VZ=e=>n=>n.fold(o=>ci(e.dom,Ie.before(o)),o=>oa(o),o=>Di(o),o=>ar(e.dom,Ie.after(o))),zZ=(e,n,o)=>r=>mE(e,r,o)?o8(n):AT(n),s8=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},UZ=(e,n)=>e.isEditable(e.getParent(n,"summary")),ZZ=e=>{const n=Ie.fromRangeStart(e.selection.getRng()),o=ne.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=ut(lg,e),i=Ie.fromRangeStart(e.selection.getRng());return qu(r,e.getBody(),i).bind(VZ(o)).map(c=>()=>zZ(o,n,e.schema)(c).each(s8(e)))}else return N.none()},WZ=e=>{const n=()=>{const o=ne.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Ie.fromRangeStart(e.selection.getRng());qY(o,r,e.schema).each(s8(e))};return ho(eo.browser.isFirefox()&&e.selection.isEditable()&&UZ(e.dom,e.selection.getRng().startContainer),n)},jZ=(e,n)=>{LP([{keyCode:kt.SPACEBAR,action:dn(ZZ,e)},{keyCode:kt.SPACEBAR,action:dn(WZ,e)}],n).each(o=>{n.preventDefault(),PC(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),Lp(e,"insertText",{data:" "}))})},OT=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||jZ(e,n)})},GZ=e=>VL(e)?[{keyCode:kt.TAB,action:dn(Q3,e,!0)},{keyCode:kt.TAB,shiftKey:!0,action:dn(Q3,e,!1)}]:[],tm=(e,n)=>{c0([...GZ(e)],n).each(o=>{n.preventDefault()})},r8=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||tm(e,n)})},kT=e=>{if(e.addShortcut("Meta+P","","mcePrint"),MC(e),Qu(e))return cs(null);{const n=nz(e);return HZ(e),pC(e),PU(e,n),mZ(e,n),T0(e),OT(e),e8(e),r8(e),qN(e,n),_Z(e,n),n}};class a8{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",i=>{const c=n.selection.getRng(),d={startContainer:c.startContainer,startOffset:c.startOffset,endContainer:c.endContainer,endOffset:c.endOffset};(i.type==="nodechange"||!hv(d,o))&&n.dispatch("SelectionChange"),o=d}),n.on("contextmenu",()=>{Vw(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const i=n.selection.getStart(!0);i&&Py(n)&&!r.isSameElementPath(i)&&n.dom.isChildOf(i,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",i=>{!i.isDefaultPrevented()&&Py(n)&&(n.selection.getNode().nodeName==="IMG"?_l.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor,r=o.selection;let i;if(o.initialized&&r&&!OL(o)&&!jh(o)){const c=o.getBody();i=r.getStart(!0)||c,(i.ownerDocument!==o.getDoc()||!o.dom.isChildOf(i,c))&&(i=c);const d=[];o.dom.getParent(i,g=>g===c?!0:(d.push(g),!1)),o.dispatch("NodeChange",{...n,element:i,parents:d})}}isSameElementPath(n){let o;const r=this.editor,i=Me(r.dom.getParents(n,tt,r.getBody()));if(i.length===this.lastPath.length){for(o=i.length;o>=0&&i[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=i,!0}return this.lastPath=i,!1}}const $C="x-tinymce/html",cu=Ye($C),HC="<!-- "+$C+" -->",Jl=e=>HC+e,Hg=e=>e.replace(HC,""),DT=e=>e.indexOf(HC)!==-1,MT=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),KZ=(e,n)=>{let o="<"+e;const r=gu(n,(i,c)=>c+'="'+$o.encodeAllRaw(i)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},i8=(e,n,o)=>{const r=e.split(/\n\n/),i=KZ(n,o),c="</"+n+">",d=Yt(r,h=>h.split(/\n/).join("<br />")),g=h=>i+h+c;return d.length===1?d[0]:Yt(d,g).join("")},l8="%MCEPASTEBIN%",YZ=(e,n)=>{const{dom:o,selection:r}=e,i=e.getBody();n.set(r.getRng());const c=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},l8);eo.browser.isFirefox()&&o.setStyle(c,"left",o.getStyle(i,"direction",!0)==="rtl"?65535:-65535),o.bind(c,"beforedeactivate focusin focusout",d=>{d.stopPropagation()}),c.focus(),r.select(c,!0)},XZ=(e,n)=>{const o=e.dom;if(RT(e)){let r;const i=n.get();for(;r=RT(e);)o.remove(r),o.unbind(r);i&&e.selection.setRng(i)}n.set(null)},RT=e=>e.dom.get("mcepastebin"),JZ=e=>ye(e)&&e.id==="mcepastebin",c8=e=>{const n=e.dom,o=(d,g)=>{d.appendChild(g),n.remove(g,!0)},[r,...i]=Nt(e.getBody().childNodes,JZ);ke(i,d=>{o(r,d)});const c=n.select("div[id=mcepastebin]",r);for(let d=c.length-1;d>=0;d--){const g=n.create("div");r.insertBefore(g,c[d]),o(g,c[d])}return r?r.innerHTML:""},u8=e=>e===l8,QZ=e=>{const n=cs(null);return{create:()=>YZ(e,n),remove:()=>XZ(e,n),getEl:()=>RT(e),getHtml:()=>c8(e),getLastRng:n.get}},Vg=(e,n)=>(ct.each(n,o=>{he(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),VC=e=>{const n=ga(),o=yg({},n);let r="";const i=n.getVoidElements(),c=ct.makeMap("script noscript style textarea video audio iframe object"," "),d=n.getBlockElements(),g=h=>{const y=h.name,A=h;if(y==="br"){r+=`
`;return}if(y!=="wbr"){if(i[y]&&(r+=" "),c[y]){r+=" ";return}if(h.type===3&&(r+=h.value),!(h.name in n.getVoidElements())){let M=h.firstChild;if(M)do g(M);while(M=M.next)}d[y]&&A.next&&(r+=`
`,y==="p"&&(r+=`
`))}};return e=Vg(e,[/<!\[[^\]]+\]>/g]),g(o.parse(e)),r},PT=e=>(e=Vg(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,i)=>!r&&!i?" ":Uo],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),d8=e=>{let n=0;return()=>e+n++},NT=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return ct.hasOwn(o,n)?"image/"+o[n]:"image/"+n},qZ=(e,n)=>{const o=yg({sanitize:ev(e),sandbox_iframes:lw(e),sandbox_iframes_exclusions:yy(e),convert_unsafe_embeds:Cy(e)},e.schema);o.addNodeFilter("meta",i=>{ct.each(i,c=>{c.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Hd({validate:!0},e.schema).serialize(r)},f8=(e,n)=>({content:e,cancelled:n}),eW=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),i=oL(e,r,o);return f8(i.node.innerHTML,i.isDefaultPrevented())},m8=(e,n,o)=>{const r=nw(e,n,o),i=qZ(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?eW(e,i,o):f8(i,r.isDefaultPrevented())},zC=(e,n,o)=>m8(e,n,o),UC=(e,n)=>(e.insertContent(n,{merge:Dk(e),paste:!0}),!0),Vp=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),tW=(e,n)=>Vp(n)&&Cn(Fk(e),o=>bu(n.toLowerCase(),`.${o.toLowerCase()}`)),g8=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),nW=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),oW=(e,n,o)=>!e.selection.isCollapsed()&&Vp(n)?nW(e,n,o):!1,sW=(e,n,o)=>tW(e,n)?g8(e,n,o):!1,h8=(e,n)=>{ct.each([oW,sW,UC],o=>!o(e,n,UC))},rW=(e,n,o)=>{o||!Mk(e)?UC(e,n):h8(e,n)},aW=d8("mceclip"),p8=e=>{const n=yC();return Mp(n,e),Fi(n),n},zp=(e,n,o,r,i)=>{const c=zC(e,n,o);if(!c.cancelled){const d=c.content,g=()=>rW(e,d,r);i?PC(e,"insertFromPaste",{dataTransfer:p8(d)}).isDefaultPrevented()||(g(),Lp(e,"insertFromPaste")):g()}},ZC=(e,n,o,r)=>{const i=o||DT(n);zp(e,Hg(n),i,!1,r)},WC=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),i=ma(r,Pk(e)),c=i8(i,Ra(e),K1(e));zp(e,c,!1,!0,o)},IT=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},qd=(e,n)=>n in e&&e[n].length>0,jC=e=>qd(e,"text/html")||qd(e,"text/plain"),v8=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ye(o)?e.dom.encode(o[1]):void 0},iW=(e,n,o,r)=>{const i=aW(),c=Y1(e)&&ye(o.name),d=c?v8(e,o.name):i,g=c?o.name:void 0,h=n.create(i,o,r,d,g);return n.add(h),h},b8=(e,n)=>{w2(n.uri).each(({data:o,type:r,base64Encoded:i})=>{const c=i?o:btoa(o),d=n.file,g=e.editorUpload.blobCache,h=g.getByData(c,r),y=h??iW(e,g,d,c);ZC(e,`<img src="${y.blobUri()}">`,!1,!0)})},lW=e=>e.type==="paste",cW=e=>Promise.all(Yt(e,n=>RM(n).then(o=>({file:n,uri:o})))),uW=e=>{const n=Fk(e);return o=>gs(o.type,"image/")&&Cn(n,r=>NT(r)===o.type)},BT=(e,n)=>{const o=n.items?Cs(Hn(n.items),i=>i.kind==="file"?[i.getAsFile()]:[]):[],r=n.files?Hn(n.files):[];return Nt(o.length>0?o:r,uW(e))},y8=(e,n,o)=>{const r=lW(n)?n.clipboardData:n.dataTransfer;if(q1(e)&&r){const i=BT(e,r);if(i.length>0)return n.preventDefault(),cW(i).then(c=>{o&&e.selection.setRng(o),ke(c,d=>{b8(e,d)})}),!0}return!1},dW=e=>{var n,o;return eo.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},GC=e=>kt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,LT=(e,n,o,r,i)=>{let c=PT(o);const d=qd(n,cu())||DT(o),g=!d&&MT(c),h=Vp(c);(u8(c)||!c.length||g&&!h)&&(r=!0),(r||h)&&(qd(n,"text/plain")&&g?c=n["text/plain"]:c=VC(c)),!u8(c)&&(r?WC(e,c,i):ZC(e,c,d,i))},FT=(e,n,o)=>{let r;const i=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",c=>{GC(c)&&!c.isDefaultPrevented()&&(r=c.shiftKey&&c.keyCode===86)}),e.on("paste",c=>{if(c.isDefaultPrevented()||dW(c))return;const d=o.get()==="text"||r;r=!1;const g=IT(c.clipboardData);!jC(g)&&y8(e,c,i())||(qd(g,"text/html")?(c.preventDefault(),LT(e,g,g["text/html"],d,!0)):qd(g,"text/plain")&&qd(g,"text/uri-list")?(c.preventDefault(),LT(e,g,g["text/plain"],d,!0)):(n.create(),_l.setEditorTimeout(e,()=>{const h=n.getHtml();n.remove(),LT(e,g,h,d,!1)},0)))})},C8=e=>{const n=i=>gs(i,"webkit-fake-url"),o=i=>gs(i,"data:"),r=i=>{var c;return((c=i.data)===null||c===void 0?void 0:c.paste)===!0};e.parser.addNodeFilter("img",(i,c,d)=>{if(!q1(e)&&r(d))for(const g of i){const h=g.attr("src");q(h)&&!g.attr("data-mce-object")&&h!==eo.transparentSrc&&(n(h)||!PL(e)&&o(h))&&g.remove()}})},S8=(e,n,o)=>{FT(e,n,o),C8(e)},x8=(e,n)=>{n.get()==="text"?(n.set("html"),ik(e,!1)):(n.set("text"),ik(e,!0)),e.focus()},fW=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{x8(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&ZC(e,r.html,r.internal,!1),r.text&&WC(e,r.text,!1)})},mW=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(cu(),n),!0}catch{return!1}else return!1},w8=(e,n,o,r)=>{mW(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},E8=e=>(n,o)=>{const{dom:r,selection:i}=e,c=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),d=r.create("div",{contenteditable:"true"},n);r.setStyles(c,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),c.appendChild(d),r.add(e.getBody(),c);const g=i.getRng();d.focus();const h=r.createRng();h.selectNodeContents(d),i.setRng(h),_l.setEditorTimeout(e,()=>{i.setRng(g),r.remove(c),o()},0)},O0=e=>({html:Jl(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),gW=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),T8=e=>!e.selection.isCollapsed()||gW(e),hW=e=>n=>{!n.isDefaultPrevented()&&T8(e)&&e.selection.isEditable()&&w8(n,O0(e),E8(e),()=>{if(eo.browser.isChromium()||eo.browser.isFirefox()){const o=e.selection.getRng();_l.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},_T=e=>n=>{!n.isDefaultPrevented()&&T8(e)&&w8(n,O0(e),E8(e),qe)},pW=e=>{e.on("cut",hW(e)),e.on("copy",_T(e))},A8=(e,n)=>{var o,r;return sl.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},O8=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},k8=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},vW=e=>Cn(e.files,n=>/^image\//.test(n.type)),bW=(e,n,o,r)=>{const i=e.getParent(o,d=>pc(n,d));if(!te(e.getParent(o,"summary")))return!0;if(i&&sn(r,"text/html")){const d=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!te(d.querySelector(i.nodeName.toLowerCase()))}else return!1},yW=e=>{e.on("input",n=>{const o=r=>te(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Nt(e.dom.select("details"),o);ke(r,i=>{Ts(i.firstChild)&&i.firstChild.remove();const c=e.dom.create("summary");c.appendChild(Od().dom),i.prepend(c)})}})},CW=(e,n)=>{iw(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),q1(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&vW(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=A8(e,o);if(gt(r))return;const i=IT(o.dataTransfer),c=qd(i,cu());if((!jC(i)||O8(i))&&y8(e,o,r))return;const d=i[cu()],g=d||i["text/html"]||i["text/plain"],h=bW(e.dom,e.schema,r.startContainer,i),y=n.get();y&&!h||g&&(o.preventDefault(),_l.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(d||y&&h)&&e.execCommand("Delete"),k8(e,r);const A=PT(g);i["text/html"]?ZC(e,A,c,!0):WC(e,A,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{q1(e)&&!n.get()&&(o.preventDefault(),k8(e,A8(e,o))),o.type==="dragend"&&n.set(!1)}),yW(e)},SW=e=>{const n=i=>c=>{i(e,c)},o=Ak(e);Et(o)&&e.on("PastePreProcess",n(o));const r=Ok(e);Et(r)&&e.on("PastePostProcess",n(r))},$T=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},xW=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,HT=e=>ct.trim(e).replace(xW,N1).toLowerCase(),wW=(e,n,o)=>{const r=RL(e);if(o||r==="all"||!kk(e))return n;const i=r?r.split(/[, ]/):[];if(i&&r!=="none"){const c=e.dom,d=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(g,h,y,A)=>{const M=c.parseStyle(c.decode(y)),R={};for(let Z=0;Z<i.length;Z++){const V=M[i[Z]];let G=V,oe=c.getStyle(d,i[Z],!0);/color/.test(i[Z])&&(G=HT(G),oe=HT(oe)),oe!==G&&(R[i[Z]]=V)}const _=c.serializeStyle(R,"span");return _?h+' style="'+_+'"'+A:h+A})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(c,d,g,h)=>d+' style="'+g+'"'+h),n},EW=e=>{(eo.browser.isChromium()||eo.browser.isSafari())&&$T(e,wW)},TW=e=>{const n=cs(!1),o=cs(Rk(e)?"text":"html"),r=QZ(e);EW(e),fW(e,o),SW(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{pW(e),CW(e,n),S8(e,r,o)})},AW=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},lr=e=>{e.parser.addNodeFilter("details",n=>{const o=zL(e);ke(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=UL(e);ke(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},OW=e=>{AW(e),lr(e)},kW=Ts,D8=rt,M8=e=>ss(e.dom),VT=e=>gc(e.dom),zT=e=>n=>zn(ne.fromDom(e),n),k0=(e,n,o)=>Mu(ne.fromDom(e),r=>VT(r)||o.isBlock(so(r)),zT(n)).getOr(ne.fromDom(n)).dom,R8=(e,n)=>Mu(ne.fromDom(e),M8,zT(n)),P8=(e,n,o)=>{const r=new _r(e,n),i=o?r.next.bind(r):r.prev.bind(r);let c=e;for(let d=o?e:i();d&&!kW(d);d=i())xc(d)&&(c=d);return c},DW=(e,n,o)=>{const i=Ie.fromRangeStart(e).getNode(),c=k0(i,n,o),d=P8(i,c,!1),g=P8(i,c,!0),h=document.createRange();return R8(d,c).fold(()=>{D8(d)?h.setStart(d,0):h.setStartBefore(d)},y=>h.setStartBefore(y.dom)),R8(g,c).fold(()=>{D8(g)?h.setEnd(g,g.data.length):h.setEndAfter(g)},y=>h.setEndAfter(y.dom)),h},MW=e=>{const n=DW(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(DE(n))},RW=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),MW(e))})};var Up;(function(e){e.Before="before",e.After="after"})(Up||(Up={}));const PW=(e,n)=>Math.abs(e.left-n),NW=(e,n)=>Math.abs(e.right-n),IW=(e,n)=>e>=n.top&&e<=n.bottom,BW=(e,n)=>e.top<n.bottom&&e.bottom>n.top,LW=(e,n)=>{const o=F7(e,n)/Math.min(e.height,n.height);return BW(e,n)&&o>.5},FW=(e,n)=>{const o=Nt(e,r=>IW(n,r));return WO(o).fold(()=>[[],e],r=>{const{pass:i,fail:c}=Rr(e,d=>LW(d,r));return[i,c]})},_W=(e,n)=>({node:e.node,position:PW(e,n)<NW(e,n)?Up.Before:Up.After}),$W=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),KC=(e,n,o,r)=>{const i=M=>xc(M.node)?N.some(M):It(M.node)?KC(Hn(M.node.childNodes),n,o,!1):N.none(),c=(M,R,_)=>i(R).filter(Z=>Math.abs(_(M,n,o)-_(Z,n,o))<2&&rt(Z.node)),d=(M,R)=>{const _=ot(M,(Z,V)=>R(Z,n,o)-R(V,n,o));return xo(_,i).map(Z=>r&&!rt(Z.node)&&_.length>1?c(Z,_[1],R).getOr(Z):Z)},[g,h]=FW(kg(e),o),{pass:y,fail:A}=Rr(h,M=>M.top<o);return d(g,$W).orThunk(()=>d(A,Jb)).orThunk(()=>d(y,Jb))},N8=(e,n,o,r)=>{const i=(c,d)=>{const g=y=>It(y)&&y.classList.contains("mce-drag-container"),h=Nt(c.dom.childNodes,Kt(g));return d.fold(()=>KC(h,o,r,!0),y=>{const A=Nt(h,M=>M!==y.dom);return KC(A,o,r,!0)}).orThunk(()=>(zn(c,e)?N.none():Sm(c)).bind(A=>i(A,N.some(c))))};return i(n,N.none())},I8=(e,n,o)=>{const r=ne.fromDom(e),i=wu(r),d=ne.fromPoint(i,n,o).filter(g=>El(r,g)).getOr(r);return N8(r,d,n,o)},B8=(e,n,o)=>I8(e,n,o).filter(r=>nv(r.node)).map(r=>_W(r,n)),L8=e=>{var n,o;const r=e.getBoundingClientRect(),i=e.ownerDocument,c=i.documentElement,d=i.defaultView;return{top:r.top+((n=d==null?void 0:d.scrollY)!==null&&n!==void 0?n:0)-c.clientTop,left:r.left+((o=d==null?void 0:d.scrollX)!==null&&o!==void 0?o:0)-c.clientLeft}},HW=e=>e.inline?L8(e.getBody()):{left:0,top:0},VW=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},F8=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},i={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:i},zW=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=L8(e.getContentAreaContainer()),r=F8(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},_8=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),UW=(e,n)=>_8(HW(e),VW(e),zW(e,n)),UT=e=>({target:e,srcElement:e}),$8=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...UT(o)}),ZW=(e,n,o)=>{const r=fo("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:qe,stopImmediatePropagation:qe,stopPropagation:qe,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...UT(n)}},WW=(e,n)=>{const o=zY(e);return n==="dragstart"?(jP(o),pU(o)):n==="drop"?(mU(o),Fi(o)):(gU(o),f0(o)),o},jW=(e,n,o,r)=>{const i=WW(o,e);return Je(r)?ZW(e,n,i):$8(e,r,n,i)},H8=32,V8=100,YC=8,XC=16,ZT=ss,GW=_7(ZT,gc),KW=(e,n,o)=>ZT(o)&&o!==n&&e.isEditable(o.parentElement),z8=(e,n,o)=>gt(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),YW=(e,n,o,r)=>{const i=e.dom,c=n.cloneNode(!0);i.setStyles(c,{width:o,height:r}),i.setAttrib(c,"data-mce-selected",null);const d=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(d,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),i.setStyles(c,{margin:0,boxSizing:"border-box"}),d.appendChild(c),d},XW=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},JC=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},WT=JC("left",-32),jT=JC("left",H8),U8=JC("top",-32),Z8=JC("top",H8),JW=(e,n,o,r,i,c,d,g,h,y,A,M)=>{let R=0,_=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>i&&(R=n.pageX+o-i),n.pageY+r>c&&(_=n.pageY+r-c),e.style.width=o-R+"px",e.style.height=r-_+"px";const Z=h.clientHeight,V=h.clientWidth,G=d+h.getBoundingClientRect().top,oe=g+h.getBoundingClientRect().left;A.on(ue=>{ue.intervalId.clear(),ue.dragging&&M&&(d+YC>=Z?ue.intervalId.set(Z8(y)):d-YC<=0?ue.intervalId.set(U8(y)):g+YC>=V?ue.intervalId.set(jT(y)):g-YC<=0?ue.intervalId.set(WT(y)):G+XC>=window.innerHeight?ue.intervalId.set(Z8(window)):G-XC<=0?ue.intervalId.set(U8(window)):oe+XC>=window.innerWidth?ue.intervalId.set(jT(window)):oe-XC<=0&&ue.intervalId.set(WT(window)))})},W8=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},QW=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);W8(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&kf(ne.fromDom(o))},qW=e=>e.button===0,ej=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),tj=(e,n)=>o=>{if(qW(o)){const r=Oo(n.dom.getParents(o.target),GW).getOr(null);if(ye(r)&&KW(n.dom,n.getBody(),r)){const i=n.dom.getPos(r),c=n.getBody(),d=n.getDoc().documentElement;e.set({element:r,dataTransfer:yC(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?c.scrollWidth:d.offsetWidth)-2,maxY:(n.inline?c.scrollHeight:d.offsetHeight)-2,relX:o.pageX-i.x,relY:o.pageY-i.y,width:r.offsetWidth,height:r.offsetHeight,ghost:YW(n,r,r.offsetWidth,r.offsetHeight),intervalId:fm(V8)})}}},eX=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),B8(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const i=e._selectionOverrides.showCaret(1,r.node,r.position===Up.Before,!1);i?e.selection.setRng(i):e.selection.placeCaretAt(n,o)})},D0=(e,n,o,r,i)=>{n==="dragstart"&&Mp(r,e.dom.getOuterHTML(o));const c=jW(n,o,r,i);return e.dispatch(n,c)},QC=(e,n)=>{const o=Yr((i,c)=>eX(n,i,c),0);n.on("remove",o.cancel);const r=e;return i=>e.on(c=>{const d=Math.max(Math.abs(i.screenX-c.screenX),Math.abs(i.screenY-c.screenY));if(!c.dragging&&d>10){const g=D0(n,"dragstart",c.element,c.dataTransfer,i);if(ye(g.dataTransfer)&&(c.dataTransfer=g.dataTransfer),g.isDefaultPrevented())return;c.dragging=!0,n.focus()}if(c.dragging){const g=i.currentTarget===n.getDoc().documentElement,h=ej(c,UW(n,i));XW(c.ghost,n.getBody()),JW(c.ghost,h,c.width,c.height,c.maxX,c.maxY,i.clientY,i.clientX,n.getContentAreaContainer(),n.getWin(),r,g),o.throttle(i.clientX,i.clientY)}})},j8=e=>{const n=e.getSel();if(ye(n)){const r=n.getRangeAt(0).startContainer;return rt(r)?r.parentNode:r}else return null},G8=(e,n)=>o=>{e.on(r=>{var i;if(r.intervalId.clear(),r.dragging){if(z8(n,j8(n.selection),r.element)){const c=(i=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&i!==void 0?i:n.getBody();D0(n,"drop",c,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{QW(n.dom,r.element),bU(r.dataTransfer).each(g=>n.insertContent(g)),n._selectionOverrides.hideFakeCaret()})}D0(n,"dragend",n.getBody(),r.dataTransfer,o)}}),GT(e)},K8=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>D0(n,"dragend",r.element,r.dataTransfer),i=>D0(n,"dragend",r.element,r.dataTransfer,i))}),GT(e)},Y8=(e,n)=>o=>K8(e,n,N.some(o)),GT=e=>{e.on(n=>{n.intervalId.clear(),W8(n.ghost)}),e.clear()},nj=e=>{const n=Gr(),o=Co.DOM,r=document,i=tj(n,e),c=QC(n,e),d=G8(n,e),g=Y8(n,e);e.on("mousedown",i),e.on("mousemove",c),e.on("mouseup",d),o.bind(r,"mousemove",c),o.bind(r,"mouseup",g),e.on("remove",()=>{o.unbind(r,"mousemove",c),o.unbind(r,"mouseup",g)}),e.on("keydown",h=>{h.keyCode===kt.ESC&&K8(n,e,N.none())})},oj=e=>{const n=i=>{if(!i.isDefaultPrevented()){const c=i.dataTransfer;c&&(Ft(c.types,"Files")||c.files.length>0)&&(i.preventDefault(),i.type==="drop"&&Xv(e,"Dropped file type is not supported"))}},o=i=>{Hy(e,i.target)&&n(i)},r=()=>{const i=Co.DOM,c=e.dom,d=document,g=e.inline?e.getBody():e.getDoc(),h=["drop","dragover"];ke(h,y=>{i.bind(d,y,o),c.bind(g,y,n)}),e.on("remove",()=>{ke(h,y=>{i.unbind(d,y,o),c.unbind(g,y,n)})})};e.on("init",()=>{_l.setEditorTimeout(e,r,0)})},sj=e=>{nj(e),kL(e)&&oj(e)},X8=e=>{const n=Yr(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=l3(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},rj=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Ol(o)){const r=cg(e.getBody(),o),i=ss(r)?r:o;e.selection.getNode()!==i&&tC(e,i).each(c=>e.selection.setRng(c))}})})},zg=ss,J8=(e,n)=>cg(e.getBody(),n),aj=e=>{const n=e.selection,o=e.dom,r=e.getBody(),i=qL(e,r,o.isBlock,()=>qm(e)),c="sel-"+o.uniqueId(),d="data-mce-selected";let g;const h=Tt=>ye(Tt)&&o.hasClass(Tt,"mce-offscreen-selection"),y=Tt=>Tt!==r&&(zg(Tt)||Ol(Tt))&&o.isChildOf(Tt,r)&&o.isEditable(Tt.parentNode),A=Tt=>{Tt&&n.setRng(Tt)},M=(Tt,Ne,Ae,je=!0)=>e.dispatch("ShowCaret",{target:Ne,direction:Tt,before:Ae}).isDefaultPrevented()?null:(je&&n.scrollIntoView(Ne,Tt===-1),i.show(Ae,Ne)),R=Tt=>{Tt.hasAttribute("data-mce-caret")&&(Xb(Tt),n.scrollIntoView(Tt))},_=()=>{e.on("click",Ne=>{o.isEditable(Ne.target)||(Ne.preventDefault(),e.focus())}),e.on("blur NewBlock",Se),e.on("ResizeWindow FullscreenStateChanged",i.reposition),e.on("tap",Ne=>{const Ae=Ne.target,je=J8(e,Ae);zg(je)?(Ne.preventDefault(),tC(e,je).each(ge)):y(Ae)&&tC(e,Ae).each(ge)},!0),e.on("mousedown",Ne=>{const Ae=Ne.target;if(Ae!==r&&Ae.nodeName!=="HTML"&&!o.isChildOf(Ae,r)||!hp(e,Ne.clientX,Ne.clientY))return;Se(),et();const je=J8(e,Ae);zg(je)?(Ne.preventDefault(),tC(e,je).each(ge)):B8(r,Ne.clientX,Ne.clientY).each(wt=>{Ne.preventDefault();const Vt=M(1,wt.node,wt.position===Up.Before,!1);A(Vt),Pu(je)?je.focus():e.getBody().focus()})}),e.on("keypress",Ne=>{kt.modifierPressed(Ne)||zg(n.getNode())&&Ne.preventDefault()}),e.on("GetSelectionRange",Ne=>{let Ae=Ne.range;if(g){if(!g.parentNode){g=null;return}Ae=Ae.cloneRange(),Ae.selectNode(g),Ne.range=Ae}}),e.on("focusin",Ne=>{if(i.isShowing()&&e.getBody().contains(Ne.target)&&Ne.target!==e.getBody()&&!e.dom.isEditable(Ne.target.parentNode)){i.hide(),Ne.target.contains(e.selection.getNode())||(e.selection.select(Ne.target,!0),e.selection.collapse(!0));const Ae=ge(e.selection.getRng(),!0);Ae&&e.selection.setRng(Ae)}}),e.on("SetSelectionRange",Ne=>{Ne.range=G(Ne.range);const Ae=ge(Ne.range,Ne.forward);Ae&&(Ne.range=Ae)});const Tt=Ne=>It(Ne)&&Ne.id==="mcepastebin";e.on("AfterSetSelectionRange",Ne=>{const Ae=Ne.range,je=Ae.startContainer.parentElement;!V(Ae)&&!Tt(je)&&et(),h(je)||Se()}),sj(e),X8(e),rj(e)},Z=Tt=>Ys(Tt)||Ih(Tt)||Yb(Tt),V=Tt=>Z(Tt.startContainer)||Z(Tt.endContainer),G=Tt=>{const Ne=e.schema.getVoidElements(),Ae=o.createRng(),je=Tt.startContainer,wt=Tt.startOffset,Vt=Tt.endContainer,Mn=Tt.endOffset;return sn(Ne,je.nodeName.toLowerCase())?wt===0?Ae.setStartBefore(je):Ae.setStartAfter(je):Ae.setStart(je,wt),sn(Ne,Vt.nodeName.toLowerCase())?Mn===0?Ae.setEndBefore(Vt):Ae.setEndAfter(Vt):Ae.setEnd(Vt,Mn),Ae},oe=(Tt,Ne)=>{const Ae=ne.fromDom(e.getBody()),je=e.getDoc(),wt=yd(Ae,"#"+c).getOrThunk(()=>{const Pn=ne.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',je);return mr(Pn,"id",c),_s(Ae,Pn),Pn}),Vt=o.createRng();Xi(wt),Du(wt,[ne.fromText(Uo,je),ne.fromDom(Ne),ne.fromText(Uo,je)]),Vt.setStart(wt.dom.firstChild,1),Vt.setEnd(wt.dom.lastChild,0),pb(wt,{top:o.getPos(Tt,e.getBody()).y+"px"}),us(wt);const Mn=n.getSel();return Mn&&(Mn.removeAllRanges(),Mn.addRange(Vt)),Vt},ue=Tt=>{const Ne=Tt.cloneNode(!0),Ae=e.dispatch("ObjectSelected",{target:Tt,targetClone:Ne});if(Ae.isDefaultPrevented())return null;const je=oe(Tt,Ae.targetClone),wt=ne.fromDom(Tt);return ke(Yo(ne.fromDom(e.getBody()),`*[${d}]`),Vt=>{zn(wt,Vt)||nr(Vt,d)}),o.getAttrib(Tt,d)||Tt.setAttribute(d,"1"),g=Tt,et(),je},ge=(Tt,Ne)=>{if(!Tt)return null;if(Tt.collapsed){if(!V(Tt)){const Vt=Ne?1:-1,Mn=av(Vt,r,Tt),Pn=Mn.getNode(!Ne);if(ye(Pn)){if(nv(Pn))return M(Vt,Pn,Ne?!Mn.isAtEnd():!1,!1);if(ha(Pn)&&ss(Pn.nextSibling)){const So=o.createRng();return So.setStart(Pn,0),So.setEnd(Pn,0),So}}const io=Mn.getNode(Ne);if(ye(io)){if(nv(io))return M(Vt,io,Ne?!1:!Mn.isAtEnd(),!1);if(ha(io)&&ss(io.previousSibling)){const So=o.createRng();return So.setStart(io,1),So.setEnd(io,1),So}}}return null}let Ae=Tt.startContainer,je=Tt.startOffset;const wt=Tt.endOffset;if(rt(Ae)&&je===0&&zg(Ae.parentNode)&&(Ae=Ae.parentNode,je=o.nodeIndex(Ae),Ae=Ae.parentNode),!It(Ae))return null;if(wt===je+1&&Ae===Tt.endContainer){const Vt=Ae.childNodes[je];if(y(Vt))return ue(Vt)}return null},Se=()=>{g&&g.removeAttribute(d),yd(ne.fromDom(e.getBody()),"#"+c).each(b),g=null},Ue=()=>{i.destroy(),g=null},et=()=>{i.hide()};return Qu(e)||_(),{showCaret:M,showBlockCaretContainer:R,hideFakeCaret:et,destroy:Ue}},ij=(e,n)=>{let o=n;for(let r=e.previousSibling;rt(r);r=r.previousSibling)o+=r.data.length;return o},KT=(e,n,o,r,i)=>{if(rt(o)&&(r<0||r>o.data.length))return[];const c=i&&rt(o)?[ij(o,r)]:[r];let d=o;for(;d!==n&&d.parentNode;)c.push(e.nodeIndex(d,i)),d=d.parentNode;return d===n?c.reverse():[]},YT=(e,n,o,r,i,c,d=!1)=>{const g=KT(e,n,o,r,d),h=KT(e,n,i,c,d);return{start:g,end:h}},Q8=(e,n)=>{const o=n.slice(),r=o.pop();return xt(r)?ts(o,(c,d)=>c.bind(g=>N.from(g.childNodes[d])),N.some(e)).bind(c=>rt(c)&&(r<0||r>c.data.length)?N.none():N.some({node:c,offset:r})):N.none()},q8=(e,n)=>Q8(e,n.start).bind(({node:o,offset:r})=>Q8(e,n.end).map(({node:i,offset:c})=>{const d=document.createRange();return d.setStart(o,r),d.setEnd(i,c),d})),lj=(e,n,o,r=!1)=>YT(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),Zp=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,rt(n.firstChild)&&$s(n.firstChild.data)),Zp(e,r,o)}},qC=(e,n,o,r=!0)=>{const i=n.startContainer.parentNode,c=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(rt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),rt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),Zp(e,i,o),i!==c&&Zp(e,c,o))},eS=(e,n)=>N.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),tS=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Un(r).concat(e.blockPatterns),inlinePatterns:Zt(r).concat(e.inlinePatterns)}},XT=(e,n,o,r)=>{const i=e.createRng();return i.setStart(n,0),i.setEnd(o,r),i.toString()},nS=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),Ql=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},JT=(e,n,o)=>{const r=q8(e.getRoot(),o).getOrDie("Unable to resolve path range"),i=r.startContainer,c=r.endContainer,d=r.endOffset===0?c:c.splitText(r.endOffset),g=r.startOffset===0?i:i.splitText(r.startOffset),h=g.parentNode,y=d.parentNode;return{prefix:n,end:y.insertBefore(nS(e,n+"-end"),d),start:h.insertBefore(nS(e,n+"-start"),g)}},QT=(e,n,o)=>{Zp(e,e.get(n.prefix+"-end"),o),Zp(e,e.get(n.prefix+"-start"),o)},qT=e=>e.start.length===0,oS=e=>(n,o)=>{const i=n.data.substring(0,o),c=i.lastIndexOf(e.charAt(e.length-1)),d=i.lastIndexOf(e);return d!==-1?d+e.length:c!==-1?c+1:-1},sS=(e,n,o,r)=>{const i=n.start;return Ip(e,r.container,r.offset,oS(i),o).bind(d=>{var g,h;const y=(h=(g=o.textContent)===null||g===void 0?void 0:g.indexOf(i))!==null&&h!==void 0?h:-1;if(y!==-1&&d.offset>=y+i.length){const M=e.createRng();return M.setStart(d.container,d.offset-i.length),M.setEnd(d.container,d.offset),N.some(M)}else{const M=d.offset-i.length;return wC(d.container,M,o).map(R=>{const _=e.createRng();return _.setStart(R.container,R.offset),_.setEnd(d.container,d.offset),_}).filter(R=>R.toString()===i).orThunk(()=>sS(e,n,o,ru(d.container,0)))}})},eI=(e,n,o,r,i,c=!1)=>{if(n.start.length===0&&!c){const d=e.createRng();return d.setStart(o,r),d.setEnd(o,r),N.some(d)}return Pg(o,r,i).bind(d=>sS(e,n,i,d).bind(h=>{var y;if(c){if(h.endContainer===d.container&&h.endOffset===d.offset)return N.none();if(d.offset===0&&((y=h.endContainer.textContent)===null||y===void 0?void 0:y.length)===h.endOffset)return N.none()}return N.some(h)}))},tI=(e,n,o,r)=>{const i=e.dom,c=i.getRoot(),d=o.pattern,g=o.position.container,h=o.position.offset;return wC(g,h-o.pattern.end.length,n).bind(y=>{const A=YT(i,c,y.container,y.offset,g,h,r);if(qT(d))return N.some({matches:[{pattern:d,startRng:A,endRng:A}],position:y});{const M=rS(e,o.remainingPatterns,y.container,y.offset,n,r),R=M.getOr({matches:[],position:y}),_=R.position;return eI(i,d,_.container,_.offset,n,M.isNone()).map(V=>{const G=lj(i,c,V,r);return{matches:R.matches.concat([{pattern:d,startRng:G,endRng:A}]),position:ru(V.startContainer,V.startOffset)}})}})},rS=(e,n,o,r,i,c)=>{const d=e.dom;return Pg(o,r,d.getRoot()).bind(g=>{const h=XT(d,i,o,r);for(let y=0;y<n.length;y++){const A=n[y];if(!bu(h,A.end))continue;const M=n.slice();M.splice(y,1);const R=tI(e,i,{pattern:A,remainingPatterns:M,position:g},c);if(R.isNone()&&r>0)return rS(e,n,o,r-1,i,c);if(R.isSome())return R}return N.none()})},nI=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?ke(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},cj=(e,n,o,r)=>{const i=Ql(e.dom,o);qC(e.dom,i,r),nI(e,n,i)},uj=(e,n,o,r,i)=>{const c=e.dom,d=Ql(c,r),g=Ql(c,o);qC(c,g,i),qC(c,d,i);const h={prefix:o.prefix,start:o.end,end:r.start},y=Ql(c,h);nI(e,n,y)},dj=(e,n)=>{const o=xa("mce_textpattern"),r=Qs(n,(i,c)=>{const d=JT(e,o+`_end${i.length}`,c.endRng);return i.concat([{...c,endMarker:d}])},[]);return Qs(r,(i,c)=>{const d=r.length-i.length-1,g=qT(c.pattern)?c.endMarker:JT(e,o+`_start${d}`,c.startRng);return i.concat([{...c,startMarker:g}])},[])},oI=e=>ot(e,(n,o)=>o.end.length-n.end.length),fj=(e,n)=>{const o=Tn(e,r=>Cn(n,i=>r.pattern.start===i.pattern.start&&r.pattern.end===i.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},sI=(e,n,o,r,i,c)=>{const d=rS(e,i.inlinePatterns,o,r,n,c).fold(()=>[],h=>h.matches),g=rS(e,oI(i.inlinePatterns),o,r,n,c).fold(()=>[],h=>h.matches);return fj(d,g)},mj=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),i=dj(o,n);ke(i,c=>{const d=o.getParent(c.startMarker.start,o.isBlock),g=h=>h===d;qT(c.pattern)?cj(e,c.pattern,c.endMarker,g):uj(e,c.pattern,c.startMarker,c.endMarker,g),QT(o,c.endMarker,g),QT(o,c.startMarker,g)}),e.selection.moveToBookmark(r)},aS=(e,n,o)=>q3(n,0,n).map(r=>{const i=r.container;return eT(i,o.start.length,n).each(c=>{const d=e.createRng();d.setStart(i,0),d.setEnd(c.container,c.offset),qC(e,d,g=>g===n)}),i}),rI=e=>(n,o)=>{const r=n.dom,i=o.pattern,c=q8(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),d=(g,h)=>{const y=h.get(g);return Ge(y)&&an(y).exists(A=>sn(A,"block"))};return eS(n,c).each(g=>{i.type==="block-format"?d(i.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,g,i),n.formatter.apply(i.format)}):i.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,g,i),n.execCommand(i.cmd,!1,i.value)})}),!0},gj=e=>ot(e,(n,o)=>o.start.length-n.start.length),aI=e=>(n,o)=>{const r=gj(n),i=o.replace(Uo," ");return Oo(r,c=>e(c,o,i))},iI=(e,n)=>(o,r,i,c,d)=>{var g;d===void 0&&(d=(g=r.textContent)!==null&&g!==void 0?g:"");const h=o.dom,y=Ra(o);return h.is(r,y)?e(i.blockPatterns,d).map(A=>n&&ct.trim(d).length===A.start.length?[]:[{pattern:A,range:YT(h,h.getRoot(),r,0,r,0,c)}]).getOr([]):[]},hj=e=>/^\s[^\s]/.test(e),pj=rI((e,n,o)=>{aS(e,n,o).each(r=>{const i=ne.fromDom(r),c=bh(i);hj(c)&&iO(i,c.slice(1))})}),vj=aI((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),iS=iI(vj,!0),bj=(e,n)=>{const o=e.selection.getRng();return eS(e,o).map(r=>{var i;const c=Math.max(0,o.startOffset),d=tS(n,r,(i=r.textContent)!==null&&i!==void 0?i:""),g=sI(e,r,o.startContainer,c,d,!0),h=iS(e,r,d,!0);return{inlineMatches:g,blockMatches:h}}).filter(({inlineMatches:r,blockMatches:i})=>i.length>0||r.length>0)},yj=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();ke(n,r=>pj(e,r)),e.selection.moveToBookmark(o)},eA=rI(aS),tA=aI((e,n,o)=>n===e.start||o===e.start),Cj=iI(tA,!1),Sj=(e,n)=>{const o=e.selection.getRng();return eS(e,o).map(r=>{const i=Math.max(0,o.startOffset),c=XT(e.dom,r,o.startContainer,i),d=tS(n,r,c);return Cj(e,r,d,!1,c)}).filter(r=>r.length>0)},lI=(e,n)=>{ke(n,o=>eA(e,o))},xj=(e,n)=>bj(e,n).fold(Le,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{ZO(e),mj(e,o),yj(e,r);const i=e.selection.getRng(),c=Pg(i.startContainer,i.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),c.each(d=>{const g=d.container;g.data.charAt(d.offset-1)===Ir&&(g.deleteData(d.offset-1,1),Zp(e.dom,g.parentNode,h=>h===e.dom.getRoot()))})}),!0)),wj=(e,n)=>{const o=e.selection.getRng();eS(e,o).map(r=>{const i=Math.max(0,o.startOffset-1),c=XT(e.dom,r,o.startContainer,i),d=tS(n,r,c),g=sI(e,r,o.startContainer,i,d,!1);g.length>0&&e.undoManager.transact(()=>{mj(e,g)})})},Ej=(e,n)=>Sj(e,n).fold(Le,o=>(e.undoManager.transact(()=>{lI(e,o)}),!0)),cI=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},Tj=(e,n)=>cI(e,n,(o,r)=>o===r.keyCode&&!kt.modifierPressed(r)),Aj=(e,n)=>cI(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),uI=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>Zm(NL(e).filter(d=>d.type==="inline-command"||d.type==="block-command"?e.queryCommandSupported(d.cmd):!0),IL(e)),i=()=>$L(e);e.on("keydown",d=>{if(d.keyCode===13&&!kt.modifierPressed(d)&&e.selection.isCollapsed()&&e.selection.isEditable()){const g=G1(r(),"enter");(g.inlinePatterns.length>0||g.blockPatterns.length>0||i())&&xj(e,g)&&d.preventDefault()}},!0),e.on("keydown",d=>{if(d.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const g=G1(r(),"space");(g.blockPatterns.length>0||i())&&Ej(e,g)&&d.preventDefault()}},!0);const c=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const d=G1(r(),"space");(d.inlinePatterns.length>0||i())&&wj(e,d)}};e.on("keyup",d=>{Tj(o,d)&&c()}),e.on("keypress",d=>{Aj(n,d)&&_l.setEditorTimeout(e,c)})},lS=e=>{uI(e)},dI=e=>{const n=ct.each,o=kt.BACKSPACE,r=kt.DELETE,i=e.dom,c=e.selection,d=e.parser,g=eo.browser,h=g.isFirefox(),y=g.isChromium()||g.isSafari(),A=eo.deviceType.isiPhone()||eo.deviceType.isiPad(),M=eo.os.isMacOS()||eo.os.isiOS(),R=(He,nt)=>{try{e.getDoc().execCommand(He,!1,String(nt))}catch{}},_=He=>He.isDefaultPrevented(),Z=()=>{const He=$t=>{const Rn=i.create("body"),$n=$t.cloneContents();return Rn.appendChild($n),c.serializer.serialize(Rn,{format:"html"})},nt=$t=>{const Rn=He($t),$n=i.createRng();$n.selectNode(e.getBody());const mo=He($n);return Rn===mo};e.on("keydown",$t=>{const Rn=$t.keyCode;if(!_($t)&&(Rn===r||Rn===o)&&e.selection.isEditable()){const $n=e.selection.isCollapsed(),mo=e.getBody();if($n&&!Bu(e.schema,mo)||!$n&&!nt(e.selection.getRng()))return;$t.preventDefault(),e.setContent(""),mo.firstChild&&i.isBlock(mo.firstChild)?e.selection.setCursorLocation(mo.firstChild,0):e.selection.setCursorLocation(mo,0),e.nodeChanged()}})},V=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},G=()=>{e.inline||i.bind(e.getDoc(),"mousedown mouseup",He=>{let nt;if(He.target===e.getDoc().documentElement)if(nt=c.getRng(),e.getBody().focus(),He.type==="mousedown"){if(Ys(nt.startContainer))return;c.placeCaretAt(He.clientX,He.clientY)}else c.setRng(nt)})},oe=()=>{e.on("keydown",He=>{if(!_(He)&&He.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(c.isCollapsed()&&c.getRng().startOffset===0){const nt=c.getNode(),$t=nt.previousSibling;if(nt.nodeName==="HR"){i.remove(nt),He.preventDefault();return}$t&&$t.nodeName&&$t.nodeName.toLowerCase()==="hr"&&(i.remove($t),He.preventDefault())}}})},ue=()=>{Range.prototype.getClientRects||e.on("mousedown",He=>{if(!_(He)&&He.target.nodeName==="HTML"){const nt=e.getBody();nt.blur(),_l.setEditorTimeout(e,()=>{nt.focus()})}})},ge=()=>{const He=xk(e);e.on("click",nt=>{const $t=nt.target;/^(IMG|HR)$/.test($t.nodeName)&&i.isEditable($t)&&(nt.preventDefault(),e.selection.select($t),e.nodeChanged()),$t.nodeName==="A"&&i.hasClass($t,He)&&$t.childNodes.length===0&&i.isEditable($t.parentNode)&&(nt.preventDefault(),c.select($t))})},Se=()=>{const He=nt=>nt.nodeName==="IMG"&&e.dom.isEditable(nt);e.on("mousedown",nt=>{Zs(N.from(nt.clientX),N.from(nt.clientY),($t,Rn)=>{const $n=e.getDoc().caretPositionFromPoint($t,Rn);if($n&&He($n.offsetNode)){const mo=$n.offsetNode.getBoundingClientRect();nt.preventDefault(),e.hasFocus()||e.focus(),e.selection.select($n.offsetNode),nt.clientX<mo.left||nt.clientY<mo.top?e.selection.collapse(!0):(nt.clientX>mo.right||nt.clientY>mo.bottom)&&e.selection.collapse(!1)}})})},Ue=()=>{const He=()=>{const $t=i.getAttribs(c.getStart().cloneNode(!1));return()=>{const Rn=c.getStart();Rn!==e.getBody()&&(i.setAttrib(Rn,"style",null),n($t,$n=>{Rn.setAttributeNode($n.cloneNode(!0))}))}},nt=()=>!c.isCollapsed()&&i.getParent(c.getStart(),i.isBlock)!==i.getParent(c.getEnd(),i.isBlock);e.on("keypress",$t=>{let Rn;return!_($t)&&($t.keyCode===8||$t.keyCode===46)&&nt()?(Rn=He(),e.getDoc().execCommand("delete",!1),Rn(),$t.preventDefault(),!1):!0}),i.bind(e.getDoc(),"cut",$t=>{if(!_($t)&&nt()){const Rn=He();_l.setEditorTimeout(e,()=>{Rn()})}})},et=()=>{e.on("keydown",He=>{if(!_(He)&&He.keyCode===o&&c.isCollapsed()&&c.getRng().startOffset===0){const nt=c.getNode().previousSibling;if(nt&&nt.nodeName&&nt.nodeName.toLowerCase()==="table")return He.preventDefault(),!1}return!0})},Tt=()=>{e.on("keydown",He=>{if(_(He)||He.keyCode!==kt.BACKSPACE)return;let nt=c.getRng();const $t=nt.startContainer,Rn=nt.startOffset,$n=i.getRoot();let mo=$t;if(!(!nt.collapsed||Rn!==0)){for(;mo.parentNode&&mo.parentNode.firstChild===mo&&mo.parentNode!==$n;)mo=mo.parentNode;mo.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,mo),nt=i.createRng(),nt.setStart($t,0),nt.setEnd($t,0),c.setRng(nt))}})},Ne=()=>{const He=()=>{R("StyleWithCSS",!1),R("enableInlineTableEditing",!1),mk(e)||R("enableObjectResizing",!1)};yk(e)||e.on("BeforeExecCommand mousedown",He)},Ae=()=>{const He=()=>{n(i.select("a:not([data-mce-block])"),nt=>{var $t;let Rn=nt.parentNode;const $n=i.getRoot();if((Rn==null?void 0:Rn.lastChild)===nt){for(;Rn&&!i.isBlock(Rn);){if((($t=Rn.parentNode)===null||$t===void 0?void 0:$t.lastChild)!==Rn||Rn===$n)return;Rn=Rn.parentNode}i.add(Rn,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",nt=>{(nt.type==="setcontent"||nt.command==="mceInsertLink")&&He()})},je=()=>{e.on("init",()=>{R("DefaultParagraphSeparator",Ra(e))})},wt=He=>{const nt=He.getBody(),$t=He.selection.getRng();return $t.startContainer===$t.endContainer&&$t.startContainer===nt&&$t.startOffset===0&&$t.endOffset===nt.childNodes.length},Vt=()=>{e.on("keyup focusin mouseup",He=>{!kt.modifierPressed(He)&&!wt(e)&&c.normalize()},!0)},Mn=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Pn=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},io=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",He=>{let nt;He.target.nodeName==="HTML"&&(nt=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(nt),e.selection.normalize(),e.nodeChanged())}))},So=()=>{M&&e.on("keydown",He=>{kt.metaKeyPressed(He)&&!He.shiftKey&&(He.keyCode===37||He.keyCode===39)&&(He.preventDefault(),e.selection.getSel().modify("move",He.keyCode===37?"backward":"forward","lineboundary"))})},ds=()=>{e.on("click",He=>{let nt=He.target;do if(nt.tagName==="A"){He.preventDefault();return}while(nt=nt.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},cr=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",He=>{He.preventDefault()})})},Cr=()=>{d.addNodeFilter("br",He=>{let nt=He.length;for(;nt--;)He[nt].attr("class")==="Apple-interchange-newline"&&He[nt].remove()})},pt=qe,Ht=()=>{if(!h||e.removed)return!1;const He=e.selection.getSel();return!He||!He.rangeCount||He.rangeCount===0},oo=()=>{y&&(G(),ge(),cr(),V(),A&&(Pn(),io(),ds())),h&&(ue(),Ne(),Mn(),So())},lo=()=>{Tt(),Z(),eo.windowsPhone||Vt(),y&&(G(),ge(),je(),cr(),et(),Cr(),A?(Pn(),io(),ds()):V()),h&&(Se(),oe(),ue(),Ue(),Ne(),Ae(),Mn(),So(),et())};return Qu(e)?oo():lo(),{refreshContentEditable:pt,isHidden:Ht}},fI=e=>e.toLowerCase()==="gpl",Oj=e=>e.length>=64&&e.length<=255,kj=e=>fI(e)||Oj(e)?"VALID":"INVALID",cS=e=>{const n=ZL(e);!q(WL(e))&&(Je(n)||kj(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},nA=Co.DOM,mI=(e,n)=>{const o=ne.fromDom(e.getBody()),r=ku(Tl(o)),i=ne.fromTag("style");mr(i,"type","text/css"),_s(i,ne.fromText(n)),_s(r,i),e.on("remove",()=>{b(i)})},Dj=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,uS=e=>Ci(e,n=>Je(n)===!1),gI=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return uS({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),extended_mathml_attributes:n("extended_mathml_attributes"),extended_mathml_elements:n("extended_mathml_elements"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:Dj(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:yy(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},hI=e=>{const n=e.options.get;return uS({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},Mj=e=>{const n=e.options.get;return{...gI(e),...hI(e),...uS({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},Rj=e=>{const n=yg(gI(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const i=e.dom,c="data-mce-"+r;let d=o.length;for(;d--;){const g=o[d];let h=g.attr(r);if(h&&!g.attr(c)){if(h.indexOf("data:")===0||h.indexOf("blob:")===0)continue;r==="style"?(h=i.serializeStyle(i.parseStyle(h),g.name),h.length||(h=null),g.attr(c,h),g.attr(r,h)):r==="tabindex"?(g.attr(c,h),g.attr(r,null)):g.attr(c,e.convertURL(h,r,g.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const i=o[r],c=i.attr("type")||"no/type";c.indexOf("mce-")!==0&&i.attr("type","mce-"+c)}}),FL(e)&&n.addNodeFilter("#cdata",o=>{var r;let i=o.length;for(;i--;){const c=o[i];c.type=8,c.name="#comment",c.value="[CDATA["+e.dom.encode((r=c.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const i=e.schema.getNonEmptyElements();for(;r--;){const c=o[r];c.isEmpty(i)&&c.getAll("br").length===0&&c.append(new Ya("br",1))}}),n},Pj=e=>{const n=Tk(e);n&&_l.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},Wp=e=>{const n=e.dom.getRoot();!e.inline&&(!Py(e)||e.selection.getStart(!0)===n)&&oa(n).each(o=>{const r=o.getNode(),i=Nu(r)?oa(r).getOr(o):o;e.selection.setRng(i.toRange())})},Nj=e=>{e.bindPendingEventDelegates(),e.initialized=!0,tL(e),e.focus(!0),Wp(e),e.nodeChanged({initial:!0});const n=JK(e);Et(n)&&n.call(e,e),Pj(e),Nc(e)&&Qv(e,!0)},oA=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,pI=(e,n,o)=>{const{pass:r,fail:i}=Rr(n,g=>tinymce.Resource.has(G4(g))),d=[...r.map(g=>{const h=tinymce.Resource.get(G4(g));return q(h)?Promise.resolve(oA(e).loadRawCss(g,h)):Promise.resolve()}),oA(e).loadAll(i)];return e.inline?d:d.concat([e.ui.styleSheetLoader.loadAll(o)])},vI=e=>{const n=oA(e),o=fk(e),r=e.contentCSS,i=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},c=()=>{e.removed?i():e.on("remove",i)};if(e.contentStyles.length>0){let h="";ct.each(e.contentStyles,y=>{h+=y+`\r
`}),e.dom.addStyle(h)}const d=Promise.all(pI(e,r,o)).then(c).catch(c),g=dk(e);return g&&mI(e,g),d},Ij=e=>{const n=e.getDoc(),o=e.getBody();eL(e),rw(e)||(n.body.spellcheck=!1,nA.setAttrib(o,"spellcheck","false")),e.quirks=dI(e),fy(e);const r=bL(e);r!==void 0&&(o.dir=r);const i=aw(e);i&&e.on("BeforeSetContent",c=>{ct.each(i,d=>{c.content=c.content.replace(d,g=>"<!--mce:protected "+escape(g)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",c=>{e.composing=c.type==="compositionstart"})},Bj=e=>{Qu(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},dS=e=>{e.removed!==!0&&(Bj(e),Nj(e))},Lj=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},bI=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(nA.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=yk(e),e._editableRoot=Zh(e),!jh(e)&&e.hasEditableRoot()&&(e.inline&&nA.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=gV(e),e.schema=ga(hI(e)),e.dom=Co(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Yn(e),referrerPolicy:Pl(e),onSetAttrib:d=>{e.dispatch("SetAttrib",d)}}),e.parser=Rj(e),e.serializer=N6(Mj(e),e),e.selection=R6(e.dom,e.getWin(),e.serializer,e),e.annotator=Ly(e),e.formatter=Io(e),e.undoManager=t3(e),e._nodeChangeDispatcher=new a8(e),e._selectionOverrides=aj(e),Fz(e),OW(e),L3(e),Qu(e)||(RW(e),lS(e));const i=kT(e);Iz(e,i),Hz(e),o3(e),TW(e);const c=y9(e);Ij(e),cS(e),c.fold(()=>{const d=Lj(e);vI(e).then(()=>{dS(e),d()})},d=>{e.setProgressState(!0),vI(e).then(()=>{d().then(g=>{e.setProgressState(!1),dS(e),k4(e)},g=>{e.notificationManager.open({type:"error",text:String(g)}),dS(e),k4(e)})})})},yI=Co.DOM,fS=(e,n,o,r)=>{const i=ne.fromTag("iframe");return r.each(c=>mr(i,"tabindex",c)),xi(i,o),xi(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Ko(i,"tox-edit-area__iframe"),i},Fj=e=>{let n=uk(e)+"<html><head>";lL(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=YK(e),r=cL(e),i=e.translate(wk(e));return uL(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+uL(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${i}"><br></body></html>`,n},_j=(e,n)=>{const o=eo.browser.isFirefox()?wk(e):"Rich Text Area",r=e.translate(o),i=Oa(ne.fromDom(e.getElement()),"tabindex").bind(oi),c=fS(e.id,r,iL(e),i).dom;c.onload=()=>{c.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=c,e.iframeHTML=Fj(e),yI.add(n.iframeContainer,c)},$j=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,bI(e)};if(Ik(e)||eo.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=tr(ne.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},Hj=(e,n)=>{_j(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=yI.isHidden(n.editorContainer)),e.getElement().style.display="none",yI.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,$j(e)},CI=Co.DOM,Vj=(e,n,o)=>{const r=Cg.get(o),i=Cg.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=ct.trim(o),r&&ct.inArray(n,o)===-1){if(e.plugins[o])return;try{const c=r(e,i)||{};e.plugins[o]=c,Et(c.init)&&(c.init(e,i),n.push(o))}catch(c){H4(e,o,c)}}},zj=e=>e.replace(/^\-/,""),Uj=e=>{const n=[];ke(Bf(e),o=>{Vj(e,n,zj(o))})},Zj=e=>{const n=ct.trim(J1(e)),o=e.ui.registry.getAll().icons,r={...gp.get("default").icons,...gp.get(n).icons};Be(r,(i,c)=>{sn(o,c)||e.ui.registry.addIcon(c,i)})},Wj=e=>{const n=zh(e);if(q(n)){const o=jf.get(n);e.theme=o(e,jf.urls[n])||{},Et(e.theme.init)&&e.theme.init(e,jf.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},jj=e=>{const n=vy(e),o=Wf.get(n);e.model=o(e,Wf.urls[n])},Gj=e=>{const n=e.theme.renderUI;return n?n():sA(e)},Kj=e=>{const n=e.getElement(),r=zh(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},Bo=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),Yj=e=>{const n=CI.create("div");return CI.insertAfter(n,e),Bo(n,n)},sA=e=>{const n=e.getElement();return e.inline?Bo(null):Yj(n)},Xj=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,q(zh(e))?Gj(e):Et(zh(e))?Kj(e):sA(e)},rA=(e,n)=>{const o={show:N.from(n.show).getOr(qe),hide:N.from(n.hide).getOr(qe),isEnabled:N.from(n.isEnabled).getOr(tt),setEnabled:r=>{r&&(e.mode.get()==="readonly"||Nc(e))||N.from(n.setEnabled).each(c=>c(r))}};e.ui={...e.ui,...o}},SI=async e=>{e.dispatch("ScriptsLoaded"),Zj(e),Wj(e),jj(e),Uj(e);const n=await Xj(e);rA(e,N.from(n.api).getOr({})),e.editorContainer=n.editorContainer,uV(e),e.inline?bI(e):Hj(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Ug=Co.DOM,xI=e=>e.charAt(0)==="-",Jj=(e,n)=>{const o=If(n),r=pL(n);if(!Ks.hasCode(o)&&o!=="en"){const i=Gn(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(i).catch(()=>{Q6(n,i,o)})}},wI=(e,n)=>{const o=zh(e);if(q(o)&&!xI(o)&&!sn(jf.urls,o)){const r=SL(e),i=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;jf.load(o,i).catch(()=>{q6(e,i,o)})}},mS=(e,n)=>{const o=vy(e);if(o!=="plugin"&&!sn(Wf.urls,o)){const r=hk(e),i=q(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;Wf.load(o,i).catch(()=>{eR(e,i,o)})}},Qj=e=>N.from(Hh(e)).filter(Gn).map(n=>({url:n,name:N.none()})),EI=(e,n,o)=>N.from(n).filter(r=>Gn(r)&&!gp.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:N.some(r)})),aA=(e,n,o)=>{const r=EI(n,"default",o),i=Qj(n).orThunk(()=>EI(n,J1(n),""));ke(cm([r,i]),c=>{e.add(c.url).catch(()=>{J6(n,c.url,c.name.getOrUndefined())})})},qj=(e,n)=>{const o=(r,i)=>{Cg.load(r,i).catch(()=>{X6(e,i,r)})};Be(Wh(e),(r,i)=>{o(i,r),e.options.set("plugins",Bf(e).concat(i))}),ke(Bf(e),r=>{r=ct.trim(r),r&&!Cg.urls[r]&&!xI(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},eG=e=>{const n=zh(e);return!q(n)||ye(jf.get(n))},tG=e=>{const n=vy(e);return ye(Wf.get(n))},nG=(e,n)=>{const o=Td.ScriptLoader,r=()=>{!e.removed&&eG(e)&&tG(e)&&SI(e)};wI(e,n),mS(e,n),Jj(o,e),aA(o,e,n),qj(e,n),o.loadQueue().then(r,r)},TI=(e,n)=>gx.forElement(e,{contentCssCors:Ck(n),referrerPolicy:Pl(n)}),oG=e=>{const n=e.id;Ks.setCode(If(e));const o=()=>{Ug.unbind(window,"ready",o),e.render()};if(!Qc.Event.domLoaded){Ug.bind(window,"ready",o);return}if(!e.getElement())return;const r=ne.fromDom(e.getElement()),i=hn(r);e.on("remove",()=>{Wr(r.dom.attributes,d=>nr(r,d.name)),xi(r,i)}),e.ui.styleSheetLoader=TI(r,e),ro(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const c=e.getElement().form||Ug.getParent(n,"form");c&&(e.formElement=c,vk(e)&&!Db(e.getElement())&&(Ug.insertAfter(Ug.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=d=>{e.dispatch(d.type,d)},Ug.bind(c,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),sw(e)&&!c.submit.nodeType&&!c.submit.length&&!c._mceOldSubmit&&(c._mceOldSubmit=c.submit,c.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),c._mceOldSubmit(c)))),e.windowManager=Yv(e),e.notificationManager=G6(e),HL(e)&&e.on("GetContent",d=>{d.save&&(d.content=Ug.encode(d.content))}),AL(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Wm(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),nG(e,e.suffix)},sG=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,Nc(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),sL(e,n))},AI=e=>e._editableRoot,rG=(e,n)=>({sections:Ye(e),options:Ye(n)}),iA=ca().deviceType,lA=iA.isPhone(),cA=iA.isTablet(),M0=e=>{if(gt(e))return[];{const n=Ge(e)?e:e.split(/[ ,]/),o=Yt(n,Wi);return Nt(o,Gn)}},OI=(e,n)=>{const o=Dt(n,(r,i)=>Ft(e,i));return rG(o.t,o.f)},aG=(e,n,o={})=>{const r=e.sections(),i=_o(r,n).getOr({});return ct.extend({},o,i)},R0=(e,n)=>sn(e.sections(),n),iG=(e,n)=>R0(e,n)?e.sections()[n]:{},kI=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:_o(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),lG=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?ct.extend({},e.external_plugins,r):r},cG=(e,n)=>[...M0(e),...M0(n)],uG=(e,n,o,r)=>e&&R0(n,"mobile")?r:o,DI=(e,n,o,r)=>{const i=M0(o.forced_plugins),c=M0(r.plugins),d=iG(n,"mobile"),g=d.plugins?M0(d.plugins):c,h=uG(e,n,c,g),y=cG(i,h);return ct.extend(r,{forced_plugins:i,plugins:y})},dG=(e,n)=>e&&R0(n,"mobile"),MI=(e,n,o,r,i)=>{var c;const d=e?{mobile:kI((c=i.mobile)!==null&&c!==void 0?c:{},n)}:{},g=OI(["mobile"],qs(d,i)),h=ct.extend(o,r,g.options(),dG(e,g)?aG(g,"mobile"):{},{external_plugins:lG(r,g.options())});return DI(e,g,r,h)},gS=(e,n)=>{const o=pu(n);return MI(lA||cA,lA,o,e,o)},uA=(e,n)=>I9(e,n),dA=e=>{const n=(r,i)=>{e.formatter.toggle(r,i),e.nodeChanged()},o=r=>()=>{ke("left,center,right,justify".split(","),i=>{r!==i&&e.formatter.remove("align"+i)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},fG=e=>{const n=o=>()=>{const r=e.selection,i=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Cn(i,c=>ye(e.formatter.matchNode(c,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},mG=e=>{dA(e),fG(e)},jp=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(eo.os.isMacOS()||eo.os.isiOS())&&(i=i.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:i,type:"error"})}}})},gG=(e,n,o,r)=>{const i=ne.fromDom(e.getRoot());return Cv(i,Ie.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Sv(i,Ie.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},Gp=e=>{if(typeof e!="string"){const n=ct.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},P0=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?gG(r,o.getRng(),n,e.schema):n},hS=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=Gp(n);m4(e,{...r,content:P0(e,o),format:"html",set:!1,selection:!0}).each(i=>{const c=P9(e,i.content,r);g4(e,c,i),e.addVisual()})}},hG=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{hS(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{hS(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{hS(e,r)},mceInsertContent:(n,o,r)=>{hS(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(by(e))}})},Kp={"font-size":"size","font-family":"face"},pG=fr("font"),fA=(e,n,o)=>{const r=c=>vb(c,e).orThunk(()=>pG(c)?_o(Kp,e).bind(d=>Oa(c,d)):N.none()),i=c=>zn(ne.fromDom(n),c);return Ch(ne.fromDom(o),c=>r(c),i)},vG=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),RI=(e,n)=>N.from(Co.DOM.getStyle(n,e,!0)),mA=e=>(n,o)=>N.from(o).map(ne.fromDom).filter(Ga).bind(r=>fA(e,n,r.dom).or(RI(e,r.dom))).getOr(""),gA=mA("font-size"),PI=x(vG,mA("font-family")),bG=e=>oa(e.getBody()).bind(n=>{const o=n.container();return N.from(rt(o)?o.parentNode:o)}),yG=e=>N.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?N.none():N.from(e.selection.getStart(!0))}),NI=(e,n)=>yG(e).orThunk(ut(bG,e)).map(ne.fromDom).filter(Ga).bind(n),hA=(e,n)=>NI(e,gn(N.some,n)),pA=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=Bk(e),i=Lk(e);return i.length>0?i[o-1]||n:r[o-1]||n}else return n}else return n},vA=e=>{const n=e.split(/\s*,\s*/);return Yt(n,o=>o.indexOf(" ")!==-1&&!(gs(o,'"')||gs(o,"'"))?`'${o}'`:o).join(",")},II=(e,n)=>{const o=pA(e,n);e.formatter.toggle("fontname",{value:vA(o)}),e.nodeChanged()},CG=e=>hA(e,n=>PI(e.getBody(),n.dom)).getOr(""),SG=(e,n)=>{e.formatter.toggle("fontsize",{value:pA(e,n)}),e.nodeChanged()},xG=e=>hA(e,n=>gA(e.getBody(),n.dom)).getOr(""),BI=e=>hA(e,n=>{const o=ne.fromDom(e.getBody()),r=Ch(n,c=>vb(c,"line-height"),ut(zn,o)),i=()=>{const c=parseFloat(or(n,"line-height")),d=parseFloat(or(n,"font-size"));return String(c/d)};return r.getOrThunk(i)}).getOr(""),bA=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},wG=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,i)=>{n(o,{value:i})},BackColor:(o,r,i)=>{n("hilitecolor",{value:i})},FontName:(o,r,i)=>{II(e,i)},FontSize:(o,r,i)=>{SG(e,i)},LineHeight:(o,r,i)=>{bA(e,i)},Lang:(o,r,i)=>{var c;n(o,{value:i.code,customValue:(c=i.customCode)!==null&&c!==void 0?c:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,i)=>{n(q(i)?i:"p")},mceToggleFormat:(o,r,i)=>{n(i)}})},LI=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>CG(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>xG(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>BI(e))},FI=e=>{wG(e),LI(e)},EG=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},_I=e=>{e.editorCommands.addCommands({Indent:()=>{Rz(e)},Outdent:()=>{bP(e)}}),e.editorCommands.addCommands({Outdent:()=>mC(e)},"state")},TG=e=>{const n=(o,r,i)=>{if(e.mode.isReadOnly())return;const c=q(i)?{href:i}:i,d=e.dom.getParent(e.selection.getNode(),"a");Te(c)&&q(c.href)&&(c.href=c.href.replace(/ /g,"%20"),(!d||!c.href)&&e.formatter.remove("link"),c.href&&e.formatter.apply("link",c,d))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},AG=(e,n,o,r)=>{const i=e.dom,c=g=>i.isBlock(g)&&g.parentElement===o,d=c(n)?n:i.getParent(r,c,o);return N.from(d).map(ne.fromDom)},N0=(e,n)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),i=n?e.selection.getStart():e.selection.getEnd(),c=n?r.startContainer:r.endContainer,d=b0(o,c);if(!d||!d.isContentEditable)return;const g=n?Aa:Gc,h=Ra(e);AG(e,i,d,c).each(y=>{const A=IC(e,c,y.dom,d,!1,h);g(y,ne.fromDom(A)),e.selection.setCursorLocation(A,0),e.dispatch("NewBlock",{newBlock:A}),Lp(e,"insertParagraph")})},OG=e=>N0(e,!0),kG=e=>N0(e,!1),$I=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{OG(e)},InsertNewBlockAfter:()=>{kG(e)}})},HI=e=>{e.editorCommands.addCommands({insertParagraph:()=>{$p(TZ,e)},mceInsertNewLine:(n,o,r)=>{LC(e,r)},InsertLineBreak:(n,o,r)=>{$p(bT,e)}})},DG=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let i=0;e.dom.getParent(e.selection.getNode(),c=>It(c)&&i++===r?(e.selection.select(c),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),gc);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},MG=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const i=r??e.selection.getNode();if(i!==e.getBody()){const c=e.selection.getBookmark();e.dom.remove(i,!0),e.selection.moveToBookmark(c)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{rY(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},RG=e=>{mG(e),jp(e),EG(e),DG(e),hG(e),TG(e),_I(e),$I(e),HI(e),FI(e),MG(e)},PG=["toggleview"],VI=e=>Ft(PG,e.toLowerCase());class yA{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,i){const c=this.editor,d=n.toLowerCase(),g=i==null?void 0:i.skip_focus;if(c.removed||(d!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(d)&&!g?c.focus():_F(c)),c.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const y=this.commands.exec[d];return Et(y)?(y(d,o,r),c.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!VI(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return Et(r)?r(o):!1}queryCommandValue(n){if(!VI(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return Et(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;Be(n,(i,c)=>{ke(c.toLowerCase().split(","),d=>{r[o][d]=i})})}addCommand(n,o,r){const i=n.toLowerCase();this.commands.exec[i]=(c,d,g)=>o.call(r??this.editor,d,g)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const NG=ct.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class CA{static isNative(n){return!!NG[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Le}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),i=Lm(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);const c=this.bindings[r];if(c)for(let d=0,g=c.length;d<g;d++){const h=c[d];if(!h.removed){if(h.once&&this.off(r,h.func),i.isImmediatePropagationStopped())return i;if(h.func.call(this.scope,i)===!1)return i.preventDefault(),i}}return i}on(n,o,r,i){if(o===!1&&(o=Le),o){const c={func:o,removed:!1};i&&ct.extend(c,i);const d=n.toLowerCase().split(" ");let g=d.length;for(;g--;){const h=d[g];let y=this.bindings[h];y||(y=[],this.toggleEvent(h,!0)),r?y=[c,...y]:y=[...y,c],this.bindings[h]=y}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let i=r.length;for(;i--;){const c=r[i];let d=this.bindings[c];if(!c)return Be(this.bindings,(g,h)=>{this.toggleEvent(h,!1),delete this.bindings[h]}),this;if(d){if(!o)d.length=0;else{const g=Rr(d,h=>h.func===o);d=g.fail,this.bindings[c]=d,ke(g.pass,h=>{h.removed=!0})}d.length||(this.toggleEvent(n,!1),delete this.bindings[c])}}}else Be(this.bindings,(r,i)=>{this.toggleEvent(i,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const I0=e=>(e._eventDispatcher||(e._eventDispatcher=new CA({scope:e,toggleEvent:(n,o)=>{CA.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),SA={fire(e,n,o){return console.warn('The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',new Error().stack),this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return Lm(e.toLowerCase(),n??{},r);const i=I0(r).dispatch(e,n);if(o!==!1&&r.parent){let c=r.parent();for(;c&&!i.isPropagationStopped();)c.dispatch(e,i,!1),c=c.parent?c.parent():void 0}return i},on(e,n,o){return I0(this).on(e,n,o)},off(e,n){return I0(this).off(e,n)},once(e,n){return I0(this).once(e,n)},hasEventListeners(e){return I0(this).has(e)}},pS=Co.DOM;let Zg;const vS=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=gk(e);return o?(e.eventRoot||(e.eventRoot=pS.select(o)[0]),e.eventRoot):e.getBody()},IG=e=>!e.hidden&&!Nc(e),xA=(e,n,o)=>{IG(e)?e.dispatch(n,o):Nc(e)&&j4(e,o)},wA=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=vS(e,n);if(gk(e)){if(Zg||(Zg={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Zg&&(Be(Zg,(i,c)=>{e.dom.unbind(vS(e,c))}),Zg=null)})),Zg[n])return;const r=i=>{const c=i.target,d=e.editorManager.get();let g=d.length;for(;g--;){const h=d[g].getBody();(h===c||pS.isChildOf(c,h))&&xA(d[g],n,i)}};Zg[n]=r,pS.bind(o,n,r)}else{const r=i=>{xA(e,n,i)};pS.bind(o,n,r),e.delegates[n]=r}},zI={...SA,bindPendingEventDelegates(){const e=this;ct.each(e._pendingNativeEvents,n=>{wA(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?wA(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(vS(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(Be(e.delegates,(r,i)=>{e.dom.unbind(vS(e,i),i,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},BG=e=>q(e)?{value:e.split(/[ ,]/),valid:!0}:at(e,q)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},LG=e=>{const n=(()=>{switch(e){case"array":return Ge;case"boolean":return lt;case"function":return Et;case"number":return xt;case"object":return Te;case"string":return q;case"string[]":return BG;case"object[]":return o=>at(o,Te);case"regexp":return o=>he(o,RegExp);default:return tt}})();return o=>bS(o,n,`The value must be a ${e}.`)},B0=e=>q(e.processor),UI=(e,n)=>{const o=ji(n.message)?"":`. ${n.message}`;return e+o},ZI=e=>e.valid,bS=(e,n,o="")=>{const r=n(e);return lt(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},FG=(e,n,o)=>{if(!Je(n)){const r=bS(n,o);if(ZI(r))return r.value;console.error(UI(`Invalid default value passed for the "${e}" option`,r))}},_G=(e,n,o=n)=>{const r={},i={},c=(_,Z,V)=>{const G=bS(Z,V);return ZI(G)?(i[_]=G.value,!0):(console.warn(UI(`Invalid value passed for the ${_} option`,G)),!1)},d=(_,Z)=>{const V=B0(Z)?LG(Z.processor):Z.processor,G=FG(_,Z.default,V);r[_]={...Z,default:G,processor:V},_o(i,_).orThunk(()=>_o(n,_)).each(ue=>c(_,ue,V))},g=_=>sn(r,_);return{register:d,isRegistered:g,get:_=>_o(i,_).orThunk(()=>_o(r,_).map(Z=>Z.default)).getOrUndefined(),set:(_,Z)=>{if(g(_)){const V=r[_];return V.immutable?(console.error(`"${_}" is an immutable option and cannot be updated`),!1):c(_,Z,V.processor)}else return console.warn(`"${_}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:_=>{const Z=g(_);return Z&&delete i[_],Z},isSet:_=>sn(i,_),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(_,Z)=>lt(Z)||xt(Z)||q(Z)||te(Z)||Ge(Z)||bt(Z)?Z:Object.prototype.toString.call(Z))))}catch(_){console.error(_)}}}},$G=(e,n)=>{e.dom.contentEditable="true"},HG=(e,n)=>{const o=ne.fromDom(e.getBody());n?(e.readonly=!0,e.hasEditableRoot()&&$G(o),z4(e)):(e.readonly=!1,K2(e))},Yp=e=>e.readonly,yS=e=>{const n=e.undoManager.add();ye(n)&&(e.undoManager.undo(),e.undoManager.reset())},WI=e=>Cn(e,n=>n.type==="characterData"||n.type==="childList"),jI=e=>{const n=r=>{Yp(e)&&WI(r)&&yS(e)},o=new MutationObserver(n);e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",r=>{Yp(e)&&r.preventDefault()}),e.on("BeforeExecCommand",r=>{(r.command==="Undo"||r.command==="Redo")&&Yp(e)&&r.preventDefault()}),e.on("compositionstart",()=>{Yp(e)&&o.observe(e.getBody(),{characterData:!0,childList:!0,subtree:!0})}),e.on("compositionend",()=>{if(Yp(e)){const r=o.takeRecords();n(r)}o.disconnect()})},VG=["design","readonly"],GI=(e,n,o,r)=>{const i=o[n.get()],c=o[r];try{c.activate()}catch(d){console.error(`problem while activating editor mode ${r}:`,d);return}i.deactivate(),i.editorReadOnly!==c.editorReadOnly&&HG(e,c.editorReadOnly),n.set(r),q7(e,r)},zG=(e,n,o,r)=>{if(!(r===o.get()||e.initialized&&Nc(e))){if(!sn(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?GI(e,o,n,r):e.on("init",()=>GI(e,o,n,r))}},nX=(e,n,o)=>{if(Ft(VG,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},UG=e=>{const n=cs("design"),o=cs({design:{activate:qe,deactivate:qe,editorReadOnly:!1},readonly:{activate:qe,deactivate:qe,editorReadOnly:!0}});return jI(e),Kf(e),{isReadOnly:()=>Yp(e),set:r=>zG(e,o.get(),n,r),get:()=>n.get(),register:(r,i)=>{o.set(nX(o.get(),r,i))}}},EA=ct.each,L0=ct.explode,CS={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},KI=ct.makeMap("alt,ctrl,shift,meta,access"),ZG=e=>e in KI,WG=e=>{const n={},o=eo.os.isMacOS()||eo.os.isiOS();EA(L0(e.toLowerCase(),"+"),c=>{ZG(c)?n[c]=!0:/^[0-9]{2,}$/.test(c)?n.keyCode=parseInt(c,10):(n.charCode=c.charCodeAt(0),n.keyCode=CS[c]||c.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let i;for(i in KI)n[i]?r.push(i):n[i]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class TA{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(EA(o.shortcuts,i=>{o.matchShortcut(r,i)&&(o.pendingPatterns=i.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(i))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,i){const c=this,d=c.normalizeCommandFunc(r);return EA(L0(ct.trim(n)),g=>{const h=c.createShortcut(g,o,d,i);c.shortcuts[h.id]=h}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:ct.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,i){const c=ct.map(L0(n,">"),WG);return c[c.length-1]=ct.extend(c[c.length-1],{func:r,scope:i||this.editor}),ct.extend(c[0],{desc:this.editor.translate(o),subpatterns:c.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const jG=()=>{const e=MN();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},ef=Co.DOM,AA=ct.extend,GG=ct.each;class SS{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,AA(this,zI);const i=this;this.id=n,this.hidden=!1;const c=gS(r.defaultOptions,o);this.options=_G(i,c,o),un(i);const d=this.options.get;d("deprecation_warnings")&&aV(o,c);const g=d("suffix");g&&(r.suffix=g),this.suffix=r.suffix;const h=d("base_url");h&&r._setBaseUrl(h),this.baseUri=r.baseURI;const y=Pl(i);y&&(Td.ScriptLoader._setReferrerPolicy(y),Co.DOM.styleSheetLoader._setReferrerPolicy(y));const A=Ck(i);ye(A)&&Co.DOM.styleSheetLoader._setContentCssCors(A),hr.languageLoad=d("language_load"),hr.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Mc(lL(i),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=ro(i),this.hasVisual=Sk(i),this.shortcuts=new TA(this),this.editorCommands=new yA(this),RG(this);const M=d("cache_suffix");M&&(eo.cacheSuffix=M.replace(/^[\?\&]+/,"")),this.ui={registry:jG(),styleSheetLoader:void 0,show:qe,hide:qe,setEnabled:qe,isEnabled:tt},this.mode=UG(i),r.dispatch("SetupEditor",{editor:this});const R=Ek(i);Et(R)&&R.call(i,i)}render(){oG(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return qm(this)}translate(n){return Ks.translate(n)}getParam(n,o,r){const i=this.options;return i.isRegistered(n)||(ye(r)?i.register(n,{processor:r,default:o}):i.register(n,{processor:tt,default:o})),!i.isSet(n)&&!Je(o)?o:i.get(n)}hasPlugin(n,o){return Ft(Bf(this),n)?o?Cg.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,i){this.shortcuts.add(n,o,r,i)}execCommand(n,o,r,i){return this.editorCommands.execCommand(n,o,r,i)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(ef.show(n.getContainer()),ef.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(ef.hide(n.getContainer()),ef.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const i={...n,load:!0},c=Db(r)?r.value:r.innerHTML,d=o.setContent(c,i);return i.no_events||o.dispatch("LoadContent",{...i,element:r}),d}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const i={...n,save:!0,element:r};let c=o.getContent(i);const d={...i,content:c};if(d.no_events||o.dispatch("SaveContent",d),d.format==="raw"&&o.dispatch("RawSaveContent",d),c=d.content,Db(r))r.value=c;else{(n.is_removing||!o.inline)&&(r.innerHTML=c);const g=ef.getParent(o.id,"form");g&&GG(g.elements,h=>h.name===o.id?(h.value=c,!1):!0)}return d.element=i.element=r=null,d.set_dirty!==!1&&o.setDirty(!1),c}setContent(n,o){return Uf(this,n,o)}getContent(n){return q9(this,n)}insertContent(n,o){o&&(n=AA({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?Uf(this,this.startContent,{format:"raw"}):Uf(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||ef.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=ef.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const i=this,c=i.options.get,d=ML(i);if(Et(d))return d.call(i,n,r,!0,o);if(!c("convert_urls")||r==="link"||Te(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const g=new Mc(n);return g.protocol!=="http"&&g.protocol!=="https"&&g.protocol!==""?n:c("relative_urls")?i.documentBaseURI.toRelative(n):(n=i.documentBaseURI.toAbsolute(n,c("remove_script_host")),n)}addVisual(n){uA(this,n)}setEditableRoot(n){sG(this,n)}hasEditableRoot(){return AI(this)}remove(){$6(this)}destroy(n){H6(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Wg=Co.DOM,xS=ct.each;let KG=!1,wS,mi=[];const ES=e=>{const n=e.type;xS(nm.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},OA=e=>{if(e!==KG){const n=Co.DOM;e?(n.bind(window,"resize",ES),n.bind(window,"scroll",ES)):(n.unbind(window,"resize",ES),n.unbind(window,"scroll",ES)),KG=e}},jg=e=>{const n=mi;return mi=Nt(mi,o=>e!==o),nm.activeEditor===e&&(nm.activeEditor=mi.length>0?mi[0]:null),nm.focusedEditor===e&&(nm.focusedEditor=null),n.length!==mi.length},YI=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(jg(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},YG=document.compatMode!=="CSS1Compat",nm={...SA,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"9.0",releaseDate:"2025-05-15",i18n:Ks,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Mc.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const i=window.tinymce||window.tinyMCEPreInit;if(i)n=i.base||i.baseURL,o=i.suffix;else{const c=document.getElementsByTagName("script");for(let d=0;d<c.length;d++){const g=c[d].src||"";if(g==="")continue;const h=g.substring(g.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(g)){h.indexOf(".min")!==-1&&(o=".min"),n=g.substring(0,g.lastIndexOf("/"));break}}if(!n&&document.currentScript){const d=document.currentScript.src;d.indexOf(".min")!==-1&&(o=".min"),n=d.substring(0,d.lastIndexOf("/"))}}e.baseURL=new Mc(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Mc(e.baseURL),e.suffix=o,XF(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&Be(r,(i,c)=>{hr.PluginManager.urls[c]=i})},init(e){const n=this;let o;const r=ct.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),i=(A,M)=>A.inline&&M.tagName.toLowerCase()in r,c=A=>{let M=A.id;return M||(M=_o(A,"name").filter(R=>!Wg.get(R)).getOrThunk(Wg.uniqueId),A.setAttribute("id",M)),M},d=A=>{const M=e[A];if(M)return M.apply(n,[])},g=A=>eo.browser.isIE()||eo.browser.isEdge()?(Jv("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):YG?(Jv("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):q(A.selector)?Wg.select(A.selector):ye(A.target)?[A.target]:[];let h=A=>{o=A};const y=()=>{let A=0;const M=[];let R;const _=(Z,V,G)=>{const oe=new SS(Z,V,n);M.push(oe),oe.on("init",()=>{++A===R.length&&h(M)}),oe.targetElm=oe.targetElm||G,oe.render()};Wg.unbind(window,"ready",y),d("onpageload"),R=Dn(g(e)),ct.each(R,Z=>{YI(n.get(Z.id))}),R=ct.grep(R,Z=>!n.get(Z.id)),R.length===0?h([]):xS(R,Z=>{i(e,Z)?Jv("Could not initialize inline editor on invalid inline target element",Z):_(c(Z),e,Z)})};return Wg.bind(window,"ready",y),new Promise(A=>{o?A(o):h=M=>{A(M)}})},get(e){return arguments.length===0?mi.slice(0):q(e)?Oo(mi,n=>n.id===e).getOr(null):xt(e)&&mi[e]?mi[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&mi.push(e),OA(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),wS||(wS=r=>{const i=n.dispatch("BeforeUnload");if(i.returnValue)return r.preventDefault(),r.returnValue=i.returnValue,i.returnValue},window.addEventListener("beforeunload",wS))),e},createEditor(e,n){return this.add(new SS(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=mi.length-1;r>=0;r--)n.remove(mi[r]);return}if(q(e)){xS(Wg.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,te(n.get(o.id))?null:(jg(o)&&n.dispatch("RemoveEditor",{editor:o}),mi.length===0&&window.removeEventListener("beforeunload",wS),o.remove(),OA(mi.length>0),o)},execCommand(e,n,o){var r;const i=this,c=Te(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!i.get(c)){const d=o.options;new SS(c,d,i).render()}return!0}case"mceRemoveEditor":{const d=i.get(c);return d&&d.remove(),!0}case"mceToggleEditor":{const d=i.get(c);return d?(d.isHidden()?d.show():d.hide(),!0):(i.execCommand("mceAddEditor",!1,o),!0)}}return i.activeEditor?i.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{xS(mi,e=>{e.save()})},addI18n:(e,n)=>{Ks.add(e,n)},translate:e=>Ks.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Mc(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Mc(this.baseURL)}};nm.setup();const XG=(()=>{const e=Gr(),n=c=>({items:c,types:Xt(c),getType:d=>_o(c,d).getOrUndefined()}),o=c=>{e.set(c)},r=()=>e.get().getOrUndefined(),i=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:i}})(),kA=Math.min,Xp=Math.max,F0=Math.round,XI=(e,n,o)=>{let r=n.x,i=n.y;const c=e.w,d=e.h,g=n.w,h=n.h,y=(o||"").split("");return y[0]==="b"&&(i+=h),y[1]==="r"&&(r+=g),y[0]==="c"&&(i+=F0(h/2)),y[1]==="c"&&(r+=F0(g/2)),y[3]==="b"&&(i-=d),y[4]==="r"&&(r-=c),y[3]==="c"&&(i-=F0(d/2)),y[4]==="c"&&(r-=F0(c/2)),Jp(r,i,c,d)},JG=(e,n,o,r)=>{for(let i=0;i<r.length;i++){const c=XI(e,n,r[i]);if(c.x>=o.x&&c.x+c.w<=o.w+o.x&&c.y>=o.y&&c.y+c.h<=o.h+o.y)return r[i]}return null},DA=(e,n,o)=>Jp(e.x-n,e.y-o,e.w+n*2,e.h+o*2),JI=(e,n)=>{const o=Xp(e.x,n.x),r=Xp(e.y,n.y),i=kA(e.x+e.w,n.x+n.w),c=kA(e.y+e.h,n.y+n.h);return i-o<0||c-r<0?null:Jp(o,r,i-o,c-r)},sX=(e,n,o)=>{let r=e.x,i=e.y,c=e.x+e.w,d=e.y+e.h;const g=n.x+n.w,h=n.y+n.h,y=Xp(0,n.x-r),A=Xp(0,n.y-i),M=Xp(0,c-g),R=Xp(0,d-h);return r+=y,i+=A,o&&(c+=y,d+=A,r-=M,i-=R),c-=M,d-=R,Jp(r,i,c-r,d-i)},Jp=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),qG={inflate:DA,relativePosition:XI,findBestRelativePosition:JG,intersect:JI,clamp:sX,create:Jp,fromClientRect:e=>Jp(e.left,e.top,e.width,e.height)},MA=(e,n,o=1e3)=>{let r=!1,i=null;const c=y=>(...A)=>{r||(r=!0,i!==null&&(window.clearTimeout(i),i=null),y.apply(null,A))},d=c(e),g=c(n);return{start:(...y)=>{!r&&i===null&&(i=window.setTimeout(()=>g.apply(null,y),o))},resolve:d,reject:g}},eK=(()=>{const e={},n={},o={};return{load:(h,y)=>{const A=`Script at URL "${y}" failed to load`,M=`Script at URL "${y}" did not call \`tinymce.Resource.add('${h}', data)\` within 1 second`;if(e[h]!==void 0)return e[h];{const R=new Promise((_,Z)=>{const V=MA(_,Z);n[h]=V.resolve,Td.ScriptLoader.loadScript(y).then(()=>V.start(M),()=>V.reject(A))});return e[h]=R,R}},add:(h,y)=>{n[h]!==void 0&&(n[h](y),delete n[h]),e[h]=Promise.resolve(y),o[h]=y},has:h=>h in o,get:h=>o[h],unload:h=>{delete e[h],delete o[h]}}})(),tK=()=>(()=>{let e={},n=[];const o={getItem:r=>{const i=e[r];return i||null},setItem:(r,i)=>{n.push(r),e[r]=String(i)},key:r=>n[r],removeItem:r=>{n=n.filter(i=>i===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let Qp;try{const e="__storage_test__";Qp=window.localStorage,Qp.setItem(e,e),Qp.removeItem(e)}catch{Qp=tK()}var TS=Qp;const QI={geom:{Rect:qG},util:{Delay:_l,Tools:ct,VK:kt,URI:Mc,EventDispatcher:CA,Observable:SA,I18n:Ks,LocalStorage:TS,ImageUploader:J4},dom:{EventUtils:Qc,TreeWalker:_r,TextSeeker:$u,DOMUtils:Co,ScriptLoader:Td,RangeUtils:sl,Serializer:N6,StyleSheetLoader:Pm,ControlSelection:kD,BookmarkManager:fv,Selection:R6,Event:Qc.Event},html:{Styles:Fu,Entities:$o,Node:Ya,Schema:ga,DomParser:yg,Writer:oE,Serializer:Hd},Env:eo,AddOnManager:hr,Annotator:Ly,Formatter:Io,UndoManager:t3,EditorCommands:yA,WindowManager:Yv,NotificationManager:G6,EditorObservable:zI,Shortcuts:TA,Editor:SS,FocusManager:Fl,EditorManager:nm,DOM:Co.DOM,ScriptLoader:Td.ScriptLoader,PluginManager:Cg,ThemeManager:jf,ModelManager:Wf,IconManager:gp,Resource:eK,FakeClipboard:XG,trim:ct.trim,isArray:ct.isArray,is:ct.is,toArray:ct.toArray,makeMap:ct.makeMap,each:ct.each,map:ct.map,grep:ct.grep,inArray:ct.inArray,extend:ct.extend,walk:ct.walk,resolve:ct.resolve,explode:ct.explode,_addCacheSuffix:ct._addCacheSuffix},RA=ct.extend(nm,QI),nK=e=>{try{U.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(RA),nK(RA)})()})(pJ);var Zee=pJ.exports;const am=lJ(Zee);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12.7 18.3a1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7 1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7v-1a1 1 0 0 0-.3-.7ZM11.3 5.7a1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3A1 1 0 0 0 13 5V4a1 1 0 0 0-.3-.7A1 1 0 0 0 12 3a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7Zm9.4 5.6a1 1 0 0 0-.7-.3h-1a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7Zm-15 1.4A1 1 0 0 0 6 12a1 1 0 0 0-.3-.7A1 1 0 0 0 5 11H4a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3Zm13 4.6-.7-.8a1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.8l.7.7a1 1 0 0 0 .7.3 1 1 0 0 0 .8-.3 1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7ZM5.3 6.7l.7.8a1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.8l-.7-.7A1 1 0 0 0 6 5a1 1 0 0 0-.8.3 1 1 0 0 0-.3.8 1 1 0 0 0 .3.6Zm12 1a1 1 0 0 0 .7-.2l.7-.7A1 1 0 0 0 19 6a1 1 0 0 0-.3-.8 1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3l-.7.7a1 1 0 0 0-.3.8 1 1 0 0 0 .3.7 1 1 0 0 0 .7.2ZM6.7 16.4a1 1 0 0 0-.8.2l-.7.7a1 1 0 0 0-.3.7 1 1 0 0 0 .3.8 1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3l.7-.7a1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3Z"/><path fill-rule="evenodd" d="M13.6 8.3A4 4 0 0 0 12 8a4 4 0 0 0-1.6.3A4 4 0 0 0 9 9.5a4 4 0 0 0-.6 1A4 4 0 0 0 8 12c0 .6.1 1 .3 1.6a4 4 0 0 0 2.1 2 4 4 0 0 0 1.6.4 4 4 0 0 0 1.6-.3 4 4 0 0 0 2-2.1A4 4 0 0 0 16 12a4 4 0 0 0-.3-1.6 4 4 0 0 0-2.1-2ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24" class="color-swatch-remove-color"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 0 1 19.4 9c.4 1 .6 2 .6 3.1s-.2 2.1-.6 3.1a8 8 0 0 1-1.7 2.6 8 8 0 0 1-2.6 1.7 7.8 7.8 0 0 1-3.1.6 7.8 7.8 0 0 1-3.1-.6 8 8 0 0 1-2.6-1.7A8 8 0 0 1 4.6 15 7.8 7.8 0 0 1 4 12c0-1.1.2-2.1.6-3.1a8 8 0 0 1 1.7-2.6A8 8 0 0 1 9 4.6 7.8 7.8 0 0 1 12 4Zm-6 8a6 6 0 0 0 1.8 4.2 6 6 0 0 0 1.9 1.3 5.8 5.8 0 0 0 2.3.5V6c-.8 0-1.6.2-2.3.5a6 6 0 0 0-2 1.3 6 6 0 0 0-1.2 1.9A5.8 5.8 0 0 0 6 12Z"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg height="24" width="24"><path d="M11.5 16.3a.7.7 0 1 0 1.4 0V14l2.7-6a.7.7 0 1 0-1.2-.6l-2.2 5-2.3-4.9C9.6 7 8.7 7 8 7.2v1.1c.8-.2.9 0 1.2 1l2.3 4.7z"/><path d="M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2h14v14H5z" fill-rule="evenodd"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg height="24" width="24"><path d="M5 4 3.6 5.4l3.9 4C6.6 10.7 6 12.3 6 14a6 6 0 0 0 10.3 4.2l1.9 1.8 1.4-1.4z" fill-rule="evenodd"/><path d="M13.4 8.4c.9 1 1.6 2.1 2 3.2l2.6 2.6V14c0-5-6-10-6-10s-1 .8-2.1 2l1.4 1.5.7-.7 1.4 1.6z"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg height="48" width="48"><path d="M8 14a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 34a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-default":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M12 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M16 31h6v6h-6z"/><path d="M16 31h6v6h-6z"/><path d="M18 12h22v4H18zm4 10h18v4H22zm4 10h14v4H26z" opacity=".2"/></svg>',"list-bull-disc":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-square":'<svg height="48" width="48"><path d="M8 21h6v6H8zm0 10h6v6H8zm0-20h6v6H8z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path fill-rule="evenodd" d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',"auto-image-enhancement":'<svg width="24" height="24"><path d="M7.7 10.6a5.8 5.8 0 0 0 5.7 5.7A5.8 5.8 0 0 0 7.7 22 5.8 5.8 0 0 0 2 16.3a5.8 5.8 0 0 0 5.7-5.7ZM15.5 2c.3 3 3.3 6 6.5 6.4-3.2.5-6.2 3.4-6.5 6.5-.3-3.4-3-6-6.4-6.5 3.3-.5 6.1-3 6.4-6.4Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><path d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.4 0H19v3.6zm-2.8 0h-2.2l8.6 8.6v-2.2zm-5 0H5l14 14v-2.6z" fill-rule="evenodd"/></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"photo-filter":'<svg height="24" width="24"><path d="M4.4 21c-.3 0-.6-.2-.9-.5-.3-.3-.4-.6-.5-.9L19.6 3c.3 0 .6.3.9.5l.5.9zM3 14.7v-2.8L11.9 3h2.8zM3 7V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h2zm14 14 4-4v2c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm-7.7 0L21 9.3v2.8L12 21z"/></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',vibrance:'<svg height="24" width="24"><path d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var U=tinymce.util.Tools.resolve("tinymce.PluginManager");const w=($,ee,de)=>{var Ve;return de($,ee.prototype)?!0:((Ve=$.constructor)===null||Ve===void 0?void 0:Ve.name)===ee.name},F=$=>{const ee=typeof $;return $===null?"null":ee==="object"&&Array.isArray($)?"array":ee==="object"&&w($,String,(de,Ve)=>Ve.isPrototypeOf(de))?"string":ee},T=$=>ee=>F(ee)===$,P=$=>ee=>typeof ee===$,j=$=>ee=>$===ee,S=T("string"),B=T("object"),k=T("array"),z=j(null),K=P("boolean"),J=$=>$==null,re=$=>!J($),ce=P("function"),fe=($,ee)=>{if(k($)){for(let de=0,Ve=$.length;de<Ve;++de)if(!ee($[de]))return!1;return!0}return!1},me=()=>{},Ce=$=>()=>$,_e=($,ee)=>$===ee;class he{constructor(ee,de){this.tag=ee,this.value=de}static some(ee){return new he(!0,ee)}static none(){return he.singletonNone}fold(ee,de){return this.tag?de(this.value):ee()}isSome(){return this.tag}isNone(){return!this.tag}map(ee){return this.tag?he.some(ee(this.value)):he.none()}bind(ee){return this.tag?ee(this.value):he.none()}exists(ee){return this.tag&&ee(this.value)}forall(ee){return!this.tag||ee(this.value)}filter(ee){return!this.tag||ee(this.value)?this:he.none()}getOr(ee){return this.tag?this.value:ee}or(ee){return this.tag?this:ee}getOrThunk(ee){return this.tag?this.value:ee()}orThunk(ee){return this.tag?this:ee()}getOrDie(ee){if(this.tag)return this.value;throw new Error(ee??"Called getOrDie on None")}static from(ee){return re(ee)?he.some(ee):he.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ee){this.tag&&ee(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}he.singletonNone=new he(!1);const q=Array.prototype.indexOf,Te=Array.prototype.push,bt=($,ee)=>q.call($,ee),Ge=($,ee)=>bt($,ee)>-1,te=($,ee)=>{const de=$.length,Ve=new Array(de);for(let dt=0;dt<de;dt++){const Ot=$[dt];Ve[dt]=ee(Ot,dt)}return Ve},lt=($,ee)=>{for(let de=0,Ve=$.length;de<Ve;de++){const dt=$[de];ee(dt,de)}},Je=($,ee,de)=>(lt($,(Ve,dt)=>{de=ee(de,Ve,dt)}),de),gt=$=>{const ee=[];for(let de=0,Ve=$.length;de<Ve;++de){if(!k($[de]))throw new Error("Arr.flatten item "+de+" was not an array, input: "+$);Te.apply(ee,$[de])}return ee},ye=($,ee)=>gt(te($,ee)),Et=($,ee)=>{for(let de=0;de<$.length;de++){const Ve=ee($[de],de);if(Ve.isSome())return Ve}return he.none()},xt=Object.keys,at=Object.hasOwnProperty,qe=($,ee)=>{const de=xt($);for(let Ve=0,dt=de.length;Ve<dt;Ve++){const Ot=de[Ve],In=$[Ot];ee(In,Ot)}},x=$=>(ee,de)=>{$[de]=ee},gn=($,ee,de,Ve)=>{qe($,(dt,Ot)=>{(ee(dt,Ot)?de:Ve)(dt,Ot)})},Ye=($,ee)=>{const de={};return gn($,ee,x(de),me),de},Qn=($,ee)=>at.call($,ee),ys=($,ee)=>Qn($,ee)&&$[ee]!==void 0&&$[ee]!==null,ut=$=>{let ee=$;return{get:()=>ee,set:dt=>{ee=dt}}},Kt=($,ee,de=_e)=>$.exists(Ve=>de(Ve,ee)),fo=$=>{const ee=[],de=Ve=>{ee.push(Ve)};for(let Ve=0;Ve<$.length;Ve++)$[Ve].each(de);return ee},Ao=($,ee)=>$?he.some(ee):he.none(),go=$=>{const ee=ut(he.none()),de=()=>ee.get().each($);return{clear:()=>{de(),ee.set(he.none())},isSet:()=>ee.get().isSome(),get:()=>ee.get(),set:Ss=>{de(),ee.set(he.some(Ss))}}},Le=()=>{const $=go(me);return{...$,on:de=>$.get().each(de)}},tt=($,ee)=>$.substring(ee),N=($,ee,de)=>ee===""||$.length>=ee.length&&$.substr(de,de+ee.length)===ee,Ps=($,ee)=>qn($,ee)?tt($,ee.length):$,qn=($,ee)=>N($,ee,0),is=$=>ee=>ee.options.get($),Fo=$=>{const ee=$.options.register;ee("link_assume_external_targets",{processor:de=>{const Ve=S(de)||K(de);return Ve?de===!0?{value:1,valid:Ve}:de==="http"||de==="https"?{value:de,valid:Ve}:{value:0,valid:Ve}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),ee("link_context_toolbar",{processor:"boolean",default:!1}),ee("link_list",{processor:de=>S(de)||ce(de)||fe(de,B)}),ee("link_default_target",{processor:"string"}),ee("link_default_protocol",{processor:"string",default:"https"}),ee("link_target_list",{processor:de=>K(de)||fe(de,B),default:!0}),ee("link_rel_list",{processor:"object[]",default:[]}),ee("link_class_list",{processor:"object[]",default:[]}),ee("link_title",{processor:"boolean",default:!0}),ee("allow_unsafe_link_target",{processor:"boolean",default:!1}),ee("link_quicklink",{processor:"boolean",default:!1}),ee("link_attributes_postprocess",{processor:"function"})},Bs=is("link_assume_external_targets"),Ft=is("link_context_toolbar"),Cn=is("link_list"),Yt=is("link_default_target"),ke=is("link_default_protocol"),Wr=is("link_target_list"),Rr=is("link_rel_list"),Nt=is("link_class_list"),Qs=is("link_title"),ts=is("allow_unsafe_link_target"),yi=is("link_quicklink"),Oo=is("link_attributes_postprocess");var Ns=tinymce.util.Tools.resolve("tinymce.util.URI"),jr=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Cs=tinymce.util.Tools.resolve("tinymce.util.Tools");const Tn=$=>re($)&&$.nodeName.toLowerCase()==="a",Me=$=>Tn($)&&!!ot($),$e=($,ee)=>{if($.collapsed)return[];{const de=$.cloneContents(),Ve=de.firstChild,dt=new jr(Ve,de),Ot=[];let In=Ve;do ee(In)&&Ot.push(In);while(In=dt.next());return Ot}},ze=$=>/^\w+:/i.test($),ot=$=>{var ee,de;return(de=(ee=$.getAttribute("data-mce-href"))!==null&&ee!==void 0?ee:$.getAttribute("href"))!==null&&de!==void 0?de:""},tn=($,ee)=>{const de=["noopener"],Ve=$?$.split(/\s+/):[],dt=po=>Cs.trim(po.sort().join(" ")),Ot=po=>(po=In(po),po.length>0?po.concat(de):de),In=po=>po.filter(xs=>Cs.inArray(de,xs)===-1),Ss=ee?Ot(Ve):In(Ve);return Ss.length>0?dt(Ss):""},an=$=>$.replace(/\uFEFF/g,""),An=($,ee)=>(ee=ee||Dn($.selection.getRng())[0]||$.selection.getNode(),Lo(ee)?he.from($.dom.select("a[href]",ee)[0]):he.from($.dom.getParent(ee,"a[href]"))),Hn=($,ee)=>An($,ee).isSome(),xo=($,ee)=>{const de=ee.fold(()=>$.getContent({format:"text"}),Ve=>Ve.innerText||Ve.textContent||"");return an(de)},Dn=$=>$e($,Me),Xt=$=>Cs.grep($,Me),nn=$=>Xt($).length>0,Be=$=>Dn($).length>0,_t=$=>{const ee=$.schema.getTextInlineElements(),de=Ot=>Ot.nodeType===1&&!Tn(Ot)&&!Qn(ee,Ot.nodeName.toLowerCase());if(An($).exists(Ot=>Ot.hasAttribute("data-mce-block")))return!1;const dt=$.selection.getRng();return dt.collapsed?!0:$e(dt,de).length===0},Lo=$=>re($)&&$.nodeName==="FIGURE"&&/\bimage\b/i.test($.className),zi=$=>Je(["title","rel","class","target"],(de,Ve)=>($[Ve].each(dt=>{de[Ve]=dt.length>0?dt:null}),de),{href:$.href}),Pr=($,ee)=>(ee==="http"||ee==="https")&&!ze($)?ee+"://"+$:$,Dt=($,ee)=>{const de={...ee};if(Rr($).length===0&&!ts($)){const Ve=tn(de.rel,de.target==="_blank");de.rel=Ve||null}return he.from(de.target).isNone()&&Wr($)===!1&&(de.target=Yt($)),de.href=Pr(de.href,Bs($)),de},Ci=($,ee,de,Ve)=>{de.each(Ot=>{Qn(ee,"innerText")?ee.innerText=Ot:ee.textContent=Ot}),$.dom.setAttribs(ee,Ve);const dt=$.dom.createRng();dt.setStartAfter(ee),dt.setEndAfter(ee),$.selection.setRng(dt)},gu=($,ee,de,Ve)=>{const dt=$.dom;Lo(ee)?hu(dt,ee,Ve):de.fold(()=>{$.execCommand("mceInsertLink",!1,Ve);const Ot=$.selection.getEnd(),In=dt.createRng();In.setStartAfter(Ot),In.setEndAfter(Ot),$.selection.setRng(In)},Ot=>{$.insertContent(dt.createHTML("a",Ve,dt.encode(Ot)))})},cd=($,ee,de)=>{const Ve=$.selection.getNode(),dt=An($,Ve),Ot=Dt($,zi(de)),In=Oo($);re(In)&&In(Ot),$.undoManager.transact(()=>{de.href===ee.href&&ee.attach(),dt.fold(()=>{gu($,Ve,de.text,Ot)},Ss=>{$.focus(),Ci($,Ss,de.text,Ot)})})},_o=$=>{const ee=$.dom,de=$.selection,Ve=de.getBookmark(),dt=de.getRng().cloneRange(),Ot=ee.getParent(dt.startContainer,"a[href]",$.getBody()),In=ee.getParent(dt.endContainer,"a[href]",$.getBody());Ot&&dt.setStartBefore(Ot),In&&dt.setEndAfter(In),de.setRng(dt),$.execCommand("unlink"),de.moveToBookmark(Ve)},sn=$=>{$.undoManager.transact(()=>{const ee=$.selection.getNode();Lo(ee)?cs($,ee):_o($),$.focus()})},Zc=$=>{const{class:ee,href:de,rel:Ve,target:dt,text:Ot,title:In}=$;return Ye({class:ee.getOrNull(),href:de,rel:Ve.getOrNull(),target:dt.getOrNull(),text:Ot.getOrNull(),title:In.getOrNull()},(Ss,po)=>z(Ss)===!1)},ud=($,ee)=>{const de=$.options.get,Ve={allow_html_data_urls:de("allow_html_data_urls"),allow_script_urls:de("allow_script_urls"),allow_svg_data_urls:de("allow_svg_data_urls")},dt=ee.href;return{...ee,href:Ns.isDomSafe(dt,"a",Ve)?dt:""}},ls=($,ee,de)=>{const Ve=ud($,de);$.hasPlugin("rtc",!0)?$.execCommand("createlink",!1,Zc(Ve)):cd($,ee,Ve)},Nr=$=>{$.hasPlugin("rtc",!0)?$.execCommand("unlink"):sn($)},cs=($,ee)=>{var de;const Ve=$.dom.select("img",ee)[0];if(Ve){const dt=$.dom.getParents(Ve,"a[href]",ee)[0];dt&&((de=dt.parentNode)===null||de===void 0||de.insertBefore(Ve,dt),$.dom.remove(dt))}},hu=($,ee,de)=>{var Ve;const dt=$.select("img",ee)[0];if(dt){const Ot=$.create("a",de);(Ve=dt.parentNode)===null||Ve===void 0||Ve.insertBefore(Ot,dt),Ot.appendChild(dt)}},xn=$=>S($.value)?$.value:"",za=$=>S($.text)?$.text:S($.title)?$.title:"",dr=($,ee)=>{const de=[];return Cs.each($,Ve=>{const dt=za(Ve);if(Ve.menu!==void 0){const Ot=dr(Ve.menu,ee);de.push({text:dt,items:Ot})}else{const Ot=ee(Ve);de.push({text:dt,value:Ot})}}),de},dd=($=xn)=>ee=>he.from(ee).map(de=>dr(de,$)),Ua={sanitize:$=>dd(xn)($),sanitizeWith:dd,createUi:($,ee)=>de=>({name:$,type:"listbox",label:ee,items:de}),getValue:xn},xa=$=>ys($,"items"),fd=($,ee)=>Et(ee,de=>xa(de)?fd($,de.items):Ao(de.value===$,de)),bl=($,ee,de,Ve)=>{const dt=Ve[ee],Ot=$.length>0;return dt!==void 0?fd(dt,de).map(In=>({url:{value:In.value,meta:{text:Ot?$:In.text,attach:me}},text:Ot?$:In.text})):he.none()},Ui=($,ee)=>ee==="link"?$.link:ee==="anchor"?$.anchor:he.none(),pu={init:($,ee)=>{const de={text:$.text,title:$.title},Ve=po=>{var xs;return Ao(de.title.length<=0,he.from((xs=po.meta)===null||xs===void 0?void 0:xs.title).getOr(""))},dt=po=>{var xs;return Ao(de.text.length<=0,he.from((xs=po.meta)===null||xs===void 0?void 0:xs.text).getOr(po.value))},Ot=po=>{const xs=dt(po.url),hs=Ve(po.url);return xs.isSome()||hs.isSome()?he.some({...xs.map(Cl=>({text:Cl})).getOr({}),...hs.map(Cl=>({title:Cl})).getOr({})}):he.none()},In=(po,xs)=>{const hs=Ui(ee,xs).getOr([]);return bl(de.text,xs,hs,po)};return{onChange:(po,xs)=>{const hs=xs.name;return hs==="url"?Ot(po()):Ge(["anchor","link"],hs)?In(po(),hs):((hs==="text"||hs==="title")&&(de[hs]=po()[hs]),he.none())}}},getDelta:bl};var Zi=tinymce.util.Tools.resolve("tinymce.util.Delay");const yt=($,ee,de)=>{const Ve=$.selection.getRng();Zi.setEditorTimeout($,()=>{$.windowManager.confirm(ee,dt=>{$.selection.setRng(Ve),de(dt)})})},cm=$=>{const ee=$.href;return ee.indexOf("@")>0&&ee.indexOf("/")===-1&&ee.indexOf("mailto:")===-1?he.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Ve=>({...Ve,href:"mailto:"+ee})}):he.none()},Zs=($,ee)=>de=>{const Ve=de.href;return $===1&&!ze(Ve)||$===0&&/^\s*www(\.|\d\.)/i.test(Ve)?he.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${ee}:// prefix?`,preprocess:Ot=>({...Ot,href:ee+"://"+Ve})}):he.none()},ho={preprocess:($,ee)=>Et([cm,Zs(Bs($),ke($))],de=>de(ee)).fold(()=>Promise.resolve(ee),de=>new Promise(Ve=>{yt($,de.message,dt=>{Ve(dt?de.preprocess(ee):ee)})}))},wa={getAnchors:$=>{const ee=$.dom.select("a:not([href])"),de=ye(ee,Ve=>{const dt=Ve.name||Ve.id;return dt?[{text:dt,value:"#"+dt}]:[]});return de.length>0?he.some([{text:"None",value:""}].concat(de)):he.none()}},yl={getClasses:$=>{const ee=Nt($);return ee.length>0?Ua.sanitize(ee):he.none()}},fm=$=>{try{return he.some(JSON.parse($))}catch{return he.none()}},cf={getLinks:$=>{const ee=Ve=>$.convertURL(Ve.value||Ve.url||"","href"),de=Cn($);return new Promise(Ve=>{S(de)?fetch(de).then(dt=>dt.ok?dt.text().then(fm):Promise.reject()).then(Ve,()=>Ve(he.none())):ce(de)?de(dt=>Ve(he.some(dt))):Ve(he.from(de))}).then(Ve=>Ve.bind(Ua.sanitizeWith(ee)).map(dt=>dt.length>0?[{text:"None",value:""}].concat(dt):dt))}},Kr={getRels:($,ee)=>{const de=Rr($);if(de.length>0){const Ve=Kt(ee,"_blank"),dt=ts($)===!1,Ot=Ss=>tn(Ua.getValue(Ss),Ve);return(dt?Ua.sanitizeWith(Ot):Ua.sanitize)(de)}return he.none()}},Ws=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],bu={getTargets:$=>{const ee=Wr($);return k(ee)?Ua.sanitize(ee).orThunk(()=>he.some(Ws)):ee===!1?he.none():he.some(Ws)}},Wc=($,ee,de)=>{const Ve=$.getAttrib(ee,de);return Ve!==null&&Ve.length>0?he.some(Ve):he.none()},Wi=($,ee)=>{const de=$.dom,dt=_t($)?he.some(xo($.selection,ee)):he.none(),Ot=ee.bind(hs=>he.from(de.getAttrib(hs,"href"))),In=ee.bind(hs=>he.from(de.getAttrib(hs,"target"))),Ss=ee.bind(hs=>Wc(de,hs,"rel")),po=ee.bind(hs=>Wc(de,hs,"class")),xs=ee.bind(hs=>Wc(de,hs,"title"));return{url:Ot,text:dt,title:xs,target:In,rel:Ss,linkClass:po}},ns={collect:($,ee)=>cf.getLinks($).then(de=>{const Ve=Wi($,ee);return{anchor:Ve,catalogs:{targets:bu.getTargets($),rels:Kr.getRels($,Ve.target),classes:yl.getClasses($),anchor:wa.getAnchors($),link:de},optNode:ee,flags:{titleEnabled:Qs($)}}})},Gn=($,ee)=>de=>{const Ve=de.getData();if(!Ve.url.value){Nr($),de.close();return}const dt=Ss=>he.from(Ve[Ss]).filter(po=>!Kt(ee.anchor[Ss],po)),Ot={href:Ve.url.value,text:dt("text"),target:dt("target"),rel:dt("rel"),class:dt("linkClass"),title:dt("title")},In={href:Ve.url.value,attach:Ve.url.meta!==void 0&&Ve.url.meta.attach?Ve.url.meta.attach:me};ho.preprocess($,Ot).then(Ss=>{ls($,In,Ss)}),de.close()},ji=$=>{const ee=An($);return ns.collect($,ee)},Za=($,ee)=>{const de=$.anchor,Ve=de.url.getOr("");return{url:{value:Ve,meta:{original:{value:Ve}}},text:de.text.getOr(""),title:de.title.getOr(""),anchor:Ve,link:Ve,rel:de.rel.getOr(""),target:de.target.or(ee).getOr(""),linkClass:de.linkClass.getOr("")}},oi=($,ee,de)=>{const Ve=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],dt=$.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Ot=$.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],In=he.from(Yt(de)),Ss=Za($,In),po=$.catalogs,xs=pu.init(Ss,po);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:gt([Ve,dt,Ot,fo([po.anchor.map(Ua.createUi("anchor","Anchors")),po.rels.map(Ua.createUi("rel","Rel")),po.targets.map(Ua.createUi("target","Open link in...")),po.link.map(Ua.createUi("link","Link list")),po.classes.map(Ua.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ss,onChange:(Cl,{name:Sl})=>{xs.onChange(Cl.getData,{name:Sl}).each(df=>{Cl.setData(df)})},onSubmit:ee}},Yr=$=>{ji($).then(de=>{const Ve=Gn($,de);return oi(de,Ve,$)}).then(de=>{$.windowManager.open(de)})},jc=$=>{$.addCommand("mceLink",(ee,de)=>{(de==null?void 0:de.dialog)===!0||!yi($)?Yr($):$.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},zo=$=>{$.addShortcut("Meta+K","",()=>{$.execCommand("mceLink")})};var Ir=tinymce.util.Tools.resolve("tinymce.util.VK");const Uo=($,ee)=>{document.body.appendChild($),$.dispatchEvent(ee),document.body.removeChild($)},Br=$=>{const ee=document.createElement("a");ee.target="_blank",ee.href=$,ee.rel="noreferrer noopener";const de=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(de),Uo(ee,de)},md=$=>$.altKey===!0&&$.shiftKey===!1&&$.ctrlKey===!1&&$.metaKey===!1,Gi=($,ee)=>{if(ee){const de=ot(ee);if(/^#/.test(de)){const Ve=$.dom.select(`${de},[name="${Ps(de,"#")}"]`);Ve.length&&$.selection.scrollIntoView(Ve[0],!0)}else Br(ee.href)}},Ki=$=>{const ee=$.selection.getRng(),de=ee.startContainer;return Me(de)&&ee.startContainer===ee.endContainer&&$.dom.select("img",de).length===1},oc=($,ee)=>{const de=Xt($.dom.getParents(ee));return Ao(de.length===1,de[0])},uf=$=>{const ee=Dn($.selection.getRng());return Ao(ee.length>0,ee[0]).or(oc($,$.selection.getNode()))},Wa=$=>$.selection.isCollapsed()||Ki($)?oc($,$.selection.getStart()):uf($),sc=$=>{const ee=Le(),de=()=>ee.get().or(Wa($)),Ve=()=>de().each(dt=>Gi($,dt));return $.on("contextmenu",dt=>{oc($,dt.target).each(ee.set)}),$.on("SelectionChange",()=>{ee.isSet()||Wa($).each(ee.set)}),$.on("click",dt=>{ee.clear();const Ot=Xt($.dom.getParents(dt.target));Ot.length===1&&Ir.metaKeyPressed(dt)&&(dt.preventDefault(),Gi($,Ot[0]))}),$.on("keydown",dt=>{ee.clear(),!dt.isDefaultPrevented()&&dt.keyCode===13&&md(dt)&&de().each(Ot=>{dt.preventDefault(),Gi($,Ot)})}),{gotoSelectedLink:Ve}},we=$=>()=>{$.execCommand("mceLink",!1,{dialog:!0})},Mt=($,ee)=>($.on("NodeChange",ee),()=>$.off("NodeChange",ee)),ko=$=>ee=>{const de=()=>{ee.setActive(!$.mode.isReadOnly()&&Hn($,$.selection.getNode())),ee.setEnabled($.selection.isEditable())};return de(),Mt($,de)},Go=$=>ee=>{const de=()=>{ee.setEnabled($.selection.isEditable())};return de(),Mt($,de)},Mo=$=>ee=>{const de=Ot=>nn(Ot)||Be($.selection.getRng()),Ve=$.dom.getParents($.selection.getStart()),dt=Ot=>{ee.setEnabled(de(Ot)&&$.selection.isEditable())};return dt(Ve),Mt($,Ot=>dt(Ot.parents))},Ls=($,ee)=>{$.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:we($),onSetup:ko($)}),$.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:ee.gotoSelectedLink,onSetup:Mo($)}),$.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Nr($),onSetup:Mo($)})},Lr=($,ee)=>{$.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:ee.gotoSelectedLink,onSetup:Mo($)}),$.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:we($),onSetup:Go($)}),$.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Nr($),onSetup:Mo($)})},j0=$=>{const ee="link unlink openlink",de="link";$.ui.registry.addContextMenu("link",{update:Ve=>$.dom.isEditable(Ve)?nn($.dom.getParents(Ve,"a"))?ee:de:""})},ht=($,ee)=>{const de=Ot=>{Ot.selection.collapse(!1)},Ve=Ot=>{const In=$.selection.getNode();return Ot.setEnabled(Hn($,In)&&$.selection.isEditable()),me},dt=Ot=>{const In=An($),Ss=_t($);if(In.isNone()&&Ss){const po=xo($.selection,In);return Ao(po.length===0,Ot)}else return he.none()};$.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:ko($)},label:"Link",predicate:Ot=>Ft($)&&Hn($,Ot),initValue:()=>An($).fold(Ce(""),ot),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Ot=>{const In=$.selection.getNode();return Ot.setActive(Hn($,In)),ko($)(Ot)},onAction:Ot=>{const In=Ot.getValue(),Ss=dt(In);ls($,{href:In,attach:me},{href:In,text:Ss,title:he.none(),rel:he.none(),target:he.from(Yt($)),class:he.none()}),de($),Ot.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Ve,onAction:Ot=>{Nr($),Ot.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Ve,onAction:Ot=>{ee.gotoSelectedLink(),Ot.hide()}}]})},mm=$=>{const ee=sc($);Ls($,ee),Lr($,ee),j0($),ht($,ee)};var gm=()=>{U.add("link",$=>{Fo($),jc($),mm($),zo($)})};gm()})();(function(){var U=tinymce.util.Tools.resolve("tinymce.PluginManager");const w=(b,O,L)=>{var Y;return L(b,O.prototype)?!0:((Y=b.constructor)===null||Y===void 0?void 0:Y.name)===O.name},F=b=>{const O=typeof b;return b===null?"null":O==="object"&&Array.isArray(b)?"array":O==="object"&&w(b,String,(L,Y)=>Y.isPrototypeOf(L))?"string":O},T=b=>O=>F(O)===b,P=b=>O=>typeof O===b,j=T("string"),S=T("object"),B=T("array"),k=P("boolean"),z=b=>b==null,K=b=>!z(b),J=P("function"),re=P("number"),ce=()=>{},fe=(b,O)=>L=>b(O(L)),me=b=>()=>b,Ce=(b,O)=>b===O;function _e(b,...O){return(...L)=>{const Y=O.concat(L);return b.apply(null,Y)}}const he=b=>O=>!b(O),q=me(!1);class Te{constructor(O,L){this.tag=O,this.value=L}static some(O){return new Te(!0,O)}static none(){return Te.singletonNone}fold(O,L){return this.tag?L(this.value):O()}isSome(){return this.tag}isNone(){return!this.tag}map(O){return this.tag?Te.some(O(this.value)):Te.none()}bind(O){return this.tag?O(this.value):Te.none()}exists(O){return this.tag&&O(this.value)}forall(O){return!this.tag||O(this.value)}filter(O){return!this.tag||O(this.value)?this:Te.none()}getOr(O){return this.tag?this.value:O}or(O){return this.tag?this:O}getOrThunk(O){return this.tag?this.value:O()}orThunk(O){return this.tag?this:O()}getOrDie(O){if(this.tag)return this.value;throw new Error(O??"Called getOrDie on None")}static from(O){return K(O)?Te.some(O):Te.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(O){this.tag&&O(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Te.singletonNone=new Te(!1);const bt=Array.prototype.slice,Ge=Array.prototype.indexOf,te=Array.prototype.push,lt=(b,O)=>Ge.call(b,O),Je=(b,O)=>lt(b,O)>-1,gt=(b,O)=>{for(let L=0,Y=b.length;L<Y;L++){const ae=b[L];if(O(ae,L))return!0}return!1},ye=(b,O)=>{const L=b.length,Y=new Array(L);for(let ae=0;ae<L;ae++){const Xe=b[ae];Y[ae]=O(Xe,ae)}return Y},Et=(b,O)=>{for(let L=0,Y=b.length;L<Y;L++){const ae=b[L];O(ae,L)}},xt=(b,O)=>{const L=[];for(let Y=0,ae=b.length;Y<ae;Y++){const Xe=b[Y];O(Xe,Y)&&L.push(Xe)}return L},at=(b,O)=>{if(b.length===0)return[];{let L=O(b[0]);const Y=[];let ae=[];for(let Xe=0,ft=b.length;Xe<ft;Xe++){const wn=b[Xe],Sn=O(wn);Sn!==L&&(Y.push(ae),ae=[]),L=Sn,ae.push(wn)}return ae.length!==0&&Y.push(ae),Y}},qe=(b,O,L)=>(Et(b,(Y,ae)=>{L=O(L,Y,ae)}),L),x=(b,O,L)=>{for(let Y=0,ae=b.length;Y<ae;Y++){const Xe=b[Y];if(O(Xe,Y))return Te.some(Xe);if(L(Xe,Y))break}return Te.none()},gn=(b,O)=>x(b,O,q),Ye=b=>{const O=[];for(let L=0,Y=b.length;L<Y;++L){if(!B(b[L]))throw new Error("Arr.flatten item "+L+" was not an array, input: "+b);te.apply(O,b[L])}return O},Qn=(b,O)=>Ye(ye(b,O)),ys=b=>{const O=bt.call(b,0);return O.reverse(),O},ut=(b,O)=>O>=0&&O<b.length?Te.some(b[O]):Te.none(),Kt=b=>ut(b,0),fo=b=>ut(b,b.length-1),Ao=(b,O)=>{const L=[],Y=J(O)?ae=>gt(L,Xe=>O(Xe,ae)):ae=>Je(L,ae);for(let ae=0,Xe=b.length;ae<Xe;ae++){const ft=b[ae];Y(ft)||L.push(ft)}return L},go=Object.keys,Le=(b,O)=>{const L=go(b);for(let Y=0,ae=L.length;Y<ae;Y++){const Xe=L[Y],ft=b[Xe];O(ft,Xe)}},tt=b=>(O,L)=>{b[L]=O},N=(b,O,L,Y)=>{Le(b,(ae,Xe)=>{(O(ae,Xe)?L:Y)(ae,Xe)})},Ps=(b,O)=>{const L={};return N(b,O,tt(L),ce),L},qn=b=>{let O=b;return{get:()=>O,set:ae=>{O=ae}}},is=typeof window<"u"?window:Function("return this;")(),Fo=(b,O,L=Ce)=>b.exists(Y=>L(Y,O)),Bs=(b,O,L=Ce)=>Ft(b,O,L).getOr(b.isNone()&&O.isNone()),Ft=(b,O,L)=>b.isSome()&&O.isSome()?Te.some(L(b.getOrDie(),O.getOrDie())):Te.none(),Cn=(b,O)=>{let L=O??is;for(let Y=0;Y<b.length&&L!==void 0&&L!==null;++Y)L=L[b[Y]];return L},Yt=(b,O)=>{const L=b.split(".");return Cn(L,O)},Wr=(b=>O=>O.replace(b,""))(/^\s+|\s+$/g),Rr=b=>b.length>0,Nt=b=>!Rr(b),Qs="\uFEFF",ts=b=>b===Qs,yi=(b,O)=>{const Y=(O||document).createElement("div");if(Y.innerHTML=b,!Y.hasChildNodes()||Y.childNodes.length>1){const ae="HTML does not have a single root node";throw console.error(ae,b),new Error(ae)}return jr(Y.childNodes[0])},Oo=(b,O)=>{const Y=(O||document).createElement(b);return jr(Y)},Ns=(b,O)=>{const Y=(O||document).createTextNode(b);return jr(Y)},jr=b=>{if(b==null)throw new Error("Node cannot be null or undefined");return{dom:b}},Tn={fromHtml:yi,fromTag:Oo,fromText:Ns,fromDom:jr,fromPoint:(b,O,L)=>Te.from(b.dom.elementFromPoint(O,L)).map(jr)},Me=8,$e=11,ze=1,ot=3,tn=(b,O)=>{const L=b.dom;if(L.nodeType!==ze)return!1;{const Y=L;if(Y.matches!==void 0)return Y.matches(O);if(Y.msMatchesSelector!==void 0)return Y.msMatchesSelector(O);if(Y.webkitMatchesSelector!==void 0)return Y.webkitMatchesSelector(O);if(Y.mozMatchesSelector!==void 0)return Y.mozMatchesSelector(O);throw new Error("Browser lacks native selectors")}},an=(b,O)=>b.dom===O.dom,An=(b,O)=>{const L=b.dom,Y=O.dom;return L===Y?!1:L.contains(Y)},Hn=tn,xo=(b,O)=>Yt(b,O),Dn=(b,O)=>{const L=xo(b,O);if(L==null)throw new Error(b+" not available on this browser");return L},Xt=Object.getPrototypeOf,nn=b=>Dn("HTMLElement",b),Be=b=>{const O=Yt("ownerDocument.defaultView",b);return S(b)&&(nn(O).prototype.isPrototypeOf(b)||/^HTML\w*Element$/.test(Xt(b).constructor.name))},_t=b=>b.dom.nodeName.toLowerCase(),Lo=b=>b.dom.nodeType,zi=b=>O=>Lo(O)===b,Pr=b=>Lo(b)===Me||_t(b)==="#comment",Dt=b=>Ci(b)&&Be(b.dom),Ci=zi(ze),gu=zi(ot),cd=zi($e),_o=b=>O=>Ci(O)&&_t(O)===b,sn=b=>Te.from(b.dom.parentNode).map(Tn.fromDom),Zc=b=>Te.from(b.dom.parentElement).map(Tn.fromDom),ud=b=>Te.from(b.dom.nextSibling).map(Tn.fromDom),ls=b=>ye(b.dom.childNodes,Tn.fromDom),Nr=(b,O)=>{const L=b.dom.childNodes;return Te.from(L[O]).map(Tn.fromDom)},cs=b=>Nr(b,0),hu=b=>Nr(b,b.dom.childNodes.length-1),xn=b=>cd(b)&&K(b.dom.host),za=b=>Tn.fromDom(b.dom.getRootNode()),dr=b=>{const O=za(b);return xn(O)?Te.some(O):Te.none()},dd=b=>Tn.fromDom(b.dom.host),eh=(b,O)=>{sn(b).each(Y=>{Y.dom.insertBefore(O.dom,b.dom)})},th=(b,O)=>{ud(b).fold(()=>{sn(b).each(ae=>{xa(ae,O)})},Y=>{eh(Y,O)})},Ua=(b,O)=>{cs(b).fold(()=>{xa(b,O)},Y=>{b.dom.insertBefore(O.dom,Y.dom)})},xa=(b,O)=>{b.dom.appendChild(O.dom)},fd=(b,O)=>{Et(O,L=>{eh(b,L)})},bl=(b,O)=>{Et(O,L=>{xa(b,L)})},Ui=(b,O,L)=>{if(j(L)||k(L)||re(L))b.setAttribute(O,L+"");else throw console.error("Invalid call to Attribute.set. Key ",O,":: Value ",L,":: Element ",b),new Error("Attribute value was not simple")},qs=(b,O)=>{const L=b.dom;Le(O,(Y,ae)=>{Ui(L,ae,Y)})},pu=b=>qe(b.dom.attributes,(O,L)=>(O[L.name]=L.value,O),{}),Zi=b=>{b.dom.textContent="",Et(ls(b),O=>{yt(O)})},yt=b=>{const O=b.dom;O.parentNode!==null&&O.parentNode.removeChild(O)},cm=(b,O)=>Tn.fromDom(b.dom.cloneNode(O)),Zs=b=>cm(b,!0),um=(b,O)=>{const L=Tn.fromTag(O),Y=pu(b);return qs(L,Y),L},ho=(b,O)=>{const L=um(b,O);th(b,L);const Y=ls(b);return bl(L,Y),yt(b),L},lf=b=>ye(b,Tn.fromDom),wa=b=>b.style!==void 0&&J(b.style.getPropertyValue),dm=b=>{const O=gu(b)?b.dom.parentNode:b.dom;if(O==null||O.ownerDocument===null)return!1;const L=O.ownerDocument;return dr(Tn.fromDom(O)).fold(()=>L.body.contains(O),fe(dm,dd))},yl=(b,O,L)=>{if(!j(L))throw console.error("Invalid call to CSS.set. Property ",O,":: Value ",L,":: Element ",b),new Error("CSS value must be a string: "+L);wa(b)&&b.style.setProperty(O,L)},fm=(b,O,L)=>{const Y=b.dom;yl(Y,O,L)},Gr=(b,O)=>{const Y=document.createDocumentFragment();return Et(b,ae=>{Y.appendChild(ae.dom)}),Tn.fromDom(Y)};var cf=(b,O,L,Y,ae)=>b(L,Y)?Te.some(L):J(ae)&&ae(L)?Te.none():O(L,Y,ae);const vu=(b,O,L)=>{let Y=b.dom;const ae=J(L)?L:q;for(;Y.parentNode;){Y=Y.parentNode;const Xe=Tn.fromDom(Y);if(O(Xe))return Te.some(Xe);if(ae(Xe))break}return Te.none()},Kr=(b,O,L)=>cf((ae,Xe)=>Xe(ae),vu,b,O,L),Ws=(b,O,L)=>vu(b,Y=>tn(Y,O),L),gs=(b,O,L)=>cf((ae,Xe)=>tn(ae,Xe),Ws,b,O,L),bu=b=>gs(b,"[contenteditable]"),Wc=(b,O=!1)=>dm(b)?b.dom.isContentEditable:bu(b).fold(me(O),L=>Wi(L)==="true"),Wi=b=>b.dom.contentEditable,nh=(b,O,L)=>vu(b,O,L).isSome(),ns=(b,O)=>nh(b,_e(an,O));var Gn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ji=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Za=tinymce.util.Tools.resolve("tinymce.util.VK"),oi=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Yr=tinymce.util.Tools.resolve("tinymce.util.Tools");const jc=b=>O=>K(O)&&O.nodeName.toLowerCase()===b,zo=b=>O=>K(O)&&b.test(O.nodeName),Ir=b=>K(b)&&b.nodeType===3,Uo=b=>K(b)&&b.nodeType===1,Br=zo(/^(OL|UL|DL)$/),md=zo(/^(OL|UL)$/),Gi=jc("ol"),Ki=zo(/^(LI|DT|DD)$/),oc=zo(/^(DT|DD)$/),uf=zo(/^(TH|TD)$/),Wa=jc("br"),sc=b=>{var O;return((O=b.parentNode)===null||O===void 0?void 0:O.firstChild)===b},we=(b,O)=>K(O)&&O.nodeName in b.schema.getTextBlockElements(),Mt=(b,O)=>K(b)&&b.nodeName in O,ko=(b,O)=>K(O)&&O.nodeName in b.schema.getVoidElements(),Go=(b,O)=>Wa(O)?b.isBlock(O.nextSibling)&&!Wa(O.previousSibling):!1,Mo=(b,O,L)=>{const Y=b.isEmpty(O);return L&&b.select("span[data-mce-type=bookmark]",O).length>0?!1:Y},Ls=(b,O)=>b.isChildOf(O,b.getRoot()),Lr=b=>O=>O.options.get(b),j0=b=>{const O=b.options.register;O("lists_indent_on_tab",{processor:"boolean",default:!0})},ht=Lr("lists_indent_on_tab"),mm=Lr("forced_root_block"),gm=Lr("forced_root_block_attrs"),$=(b,O,L={})=>{const Y=b.dom,ae=b.schema.getBlockElements(),Xe=Y.createFragment(),ft=mm(b),wn=gm(b);let Sn,Jt,Vn=!1;for(Jt=Y.create(ft,{...wn,...L.style?{style:L.style}:{}}),Mt(O.firstChild,ae)||Xe.appendChild(Jt);Sn=O.firstChild;){const os=Sn.nodeName;!Vn&&(os!=="SPAN"||Sn.getAttribute("data-mce-type")!=="bookmark")&&(Vn=!0),Mt(Sn,ae)?(Xe.appendChild(Sn),Jt=null):(Jt||(Jt=Y.create(ft,wn),Xe.appendChild(Jt)),Jt.appendChild(Sn))}return!Vn&&Jt&&Jt.appendChild(Y.create("br",{"data-mce-bogus":"1"})),Xe},ee=oi.DOM,de=(b,O,L)=>{const Y=Jt=>{const Vn=Jt.parentNode;Vn&&Yr.each(ae,os=>{Vn.insertBefore(os,L.parentNode)}),ee.remove(Jt)},ae=ee.select('span[data-mce-type="bookmark"]',O),Xe=$(b,L),ft=ee.createRng();ft.setStartAfter(L),ft.setEndAfter(O);const wn=ft.extractContents();for(let Jt=wn.firstChild;Jt;Jt=Jt.firstChild)if(Jt.nodeName==="LI"&&b.dom.isEmpty(Jt)){ee.remove(Jt);break}b.dom.isEmpty(wn)||ee.insertAfter(wn,O),ee.insertAfter(Xe,O);const Sn=L.parentElement;Sn&&Mo(b.dom,Sn)&&Y(Sn),ee.remove(L),Mo(b.dom,O)&&ee.remove(O)},Ve=_o("dd"),dt=_o("dt"),Ot=(b,O)=>{Ve(O)?ho(O,"dt"):dt(O)&&Zc(O).each(L=>de(b,L.dom,O.dom))},In=b=>{dt(b)&&ho(b,"dd")},Ss=(b,O,L)=>{O==="Indent"?Et(L,In):Et(L,Y=>Ot(b,Y))},po=(b,O)=>{if(Ir(b))return{container:b,offset:O};const L=Gn.getNode(b,O);return Ir(L)?{container:L,offset:O>=b.childNodes.length?L.data.length:0}:L.previousSibling&&Ir(L.previousSibling)?{container:L.previousSibling,offset:L.previousSibling.data.length}:L.nextSibling&&Ir(L.nextSibling)?{container:L.nextSibling,offset:0}:{container:b,offset:O}},xs=b=>{const O=b.cloneRange(),L=po(b.startContainer,b.startOffset);O.setStart(L.container,L.offset);const Y=po(b.endContainer,b.endOffset);return O.setEnd(Y.container,Y.offset),O},hs=["OL","UL","DL"],Cl=hs.join(","),Sl=(b,O)=>{const L=O||b.selection.getStart(!0);return b.dom.getParent(L,Cl,ff(b,L))},df=(b,O)=>K(b)&&O.length===1&&O[0]===b,G0=b=>xt(b.querySelectorAll(Cl),Br),gd=b=>{const O=Sl(b),L=b.selection.getSelectedBlocks();return df(O,L)?G0(O):xt(L,Y=>Br(Y)&&O!==Y)},K0=(b,O)=>{const L=Yr.map(O,Y=>{const ae=b.dom.getParent(Y,"li,dd,dt",ff(b,Y));return ae||Y});return Ao(L)},oh=b=>{const O=b.selection.getSelectedBlocks();return xt(K0(b,O),Ki)},c1=b=>xt(oh(b),oc),vo=(b,O)=>{const L=b.dom.getParents(O,"TD,TH");return L.length>0?L[0]:b.getBody()},hm=(b,O)=>!Br(O)&&!Ki(O)&&gt(hs,L=>b.isValidChild(O.nodeName,L)),ff=(b,O)=>{const L=b.dom.getParents(O,b.dom.isBlock),Y=Xe=>Xe.nodeName.toLowerCase()!==mm(b);return gn(L,Xe=>Y(Xe)&&hm(b.schema,Xe)).getOr(b.getBody())},Y0=b=>sn(b).exists(O=>Ki(O.dom)&&cs(O).exists(L=>!Br(L.dom))&&hu(O).exists(L=>!Br(L.dom))),u1=(b,O)=>{const L=b.dom.getParents(O,"ol,ul",ff(b,O));return fo(L)},X0=b=>{const O=u1(b,b.selection.getStart()),L=xt(b.selection.getSelectedBlocks(),md);return O.toArray().concat(L)},d1=b=>{const O=b.selection.getStart();return b.dom.getParents(O,"ol,ul",ff(b,O))},sh=b=>{const O=X0(b),L=d1(b);return gn(L,Y=>Y0(Tn.fromDom(Y))).fold(()=>pm(b,O),Y=>[Y])},pm=(b,O)=>{const L=ye(O,Y=>u1(b,Y).getOr(Y));return Ao(L)},mf=b=>/\btox\-/.test(b.className),rh=(b,O)=>x(b,Br,uf).exists(L=>L.nodeName===O&&!mf(L)),FS=(b,O)=>O!==null&&!b.dom.isEditable(O),_S=b=>{const O=Sl(b);return FS(b,O)||!b.selection.isEditable()},yu=(b,O)=>{const L=b.dom.getParent(O,"ol,ul,dl");return FS(b,L)||!b.selection.isEditable()},rc=(b,O)=>{const L=b.selection.getNode();return O({parents:b.dom.getParents(L),element:L}),b.on("NodeChange",O),()=>b.off("NodeChange",O)},ca=(b,O,L)=>b.dispatch("ListMutation",{action:O,element:L}),vm=b=>Hn(b,"OL,UL"),J0=b=>Hn(b,"LI"),f1=b=>cs(b).exists(vm),Q0=b=>hu(b).exists(vm),Cu=b=>"listAttributes"in b,m1=b=>"isComment"in b,ah=b=>"isFragment"in b,Yi=b=>b.depth>0,ac=b=>b.isSelected,Su=b=>{const O=ls(b),L=Q0(b)?O.slice(0,-1):O;return ye(L,Zs)},q0=(b,O,L)=>sn(b).filter(Ci).map(Y=>({depth:O,dirty:!1,isSelected:L,content:Su(b),itemAttributes:pu(b),listAttributes:pu(Y),listType:_t(Y),isInPreviousLi:!1})),eo=(b,O)=>{xa(b.item,O.list)},eb=b=>{for(let O=1;O<b.length;O++)eo(b[O-1],b[O])},g1=(b,O)=>{Ft(fo(b),Kt(O),eo)},tb=(b,O)=>{const L={list:Tn.fromTag(O,b),item:Tn.fromTag("li",b)};return xa(L.list,L.item),L},nb=(b,O,L)=>{const Y=[];for(let ae=0;ae<L;ae++)Y.push(tb(b,Cu(O)?O.listType:O.parentListType));return Y},ob=(b,O)=>{for(let L=0;L<b.length-1;L++)fm(b[L].item,"list-style-type","none");fo(b).each(L=>{Cu(O)&&(qs(L.list,O.listAttributes),qs(L.item,O.itemAttributes)),bl(L.item,O.content)})},sb=(b,O)=>{_t(b.list)!==O.listType&&(b.list=ho(b.list,O.listType)),qs(b.list,O.listAttributes)},h1=(b,O,L)=>{const Y=Tn.fromTag("li",b);return qs(Y,O),bl(Y,L),Y},oO=(b,O)=>{xa(b.list,O),b.item=O},rb=(b,O,L)=>{const Y=O.slice(0,L.depth);return fo(Y).each(ae=>{if(Cu(L)){const Xe=h1(b,L.itemAttributes,L.content);oO(ae,Xe),sb(ae,L)}else if(ah(L))bl(ae.item,L.content);else{const Xe=Tn.fromHtml(`<!--${L.content}-->`);xa(ae.list,Xe)}}),Y},$S=(b,O,L)=>{const Y=nb(b,L,L.depth-O.length);return eb(Y),ob(Y,L),g1(O,Y),O.concat(Y)},ct=(b,O)=>{let L=Te.none();const Y=qe(O,(ae,Xe,ft)=>m1(Xe)?ft===0?(L=Te.some(Xe),ae):rb(b,ae,Xe):Xe.depth>ae.length?$S(b,ae,Xe):rb(b,ae,Xe),[]);return L.each(ae=>{const Xe=Tn.fromHtml(`<!--${ae.content}-->`);Kt(Y).each(ft=>{Ua(ft.list,Xe)})}),Kt(Y).map(ae=>ae.list)},HS=(b,O)=>{switch(b){case"Indent":O.depth++;break;case"Outdent":O.depth--;break;case"Flatten":O.depth=0}O.dirty=!0},VS=(b,O)=>{Cu(b)&&Cu(O)&&(b.listType=O.listType,b.listAttributes={...O.listAttributes})},zS=b=>{b.listAttributes=Ps(b.listAttributes,(O,L)=>L!=="start")},ja=(b,O)=>{const L=b[O].depth,Y=Xe=>Xe.depth===L&&!Xe.dirty,ae=Xe=>Xe.depth<L;return x(ys(b.slice(0,O)),Y,ae).orThunk(()=>x(b.slice(O+1),Y,ae))},US=b=>(Et(b,(O,L)=>{ja(b,L).fold(()=>{O.dirty&&Cu(O)&&zS(O)},Y=>VS(O,Y))}),b),ne=(b,O,L,Y)=>{var ae;if(Pr(Y))return[{depth:b+1,content:(ae=Y.dom.nodeValue)!==null&&ae!==void 0?ae:"",dirty:!1,isSelected:!1,isComment:!0}];O.each(wn=>{an(wn.start,Y)&&L.set(!0)});const Xe=q0(Y,b,L.get());O.each(wn=>{an(wn.end,Y)&&L.set(!1)});const ft=hu(Y).filter(vm).map(wn=>ih(b,O,L,wn)).getOr([]);return Xe.toArray().concat(ft)},ZS=(b,O,L,Y)=>cs(Y).filter(vm).fold(()=>ne(b,O,L,Y),ae=>{const Xe=qe(ls(Y),(ft,wn,Sn)=>{if(Sn===0)return ft;if(J0(wn))return ft.concat(ne(b,O,L,wn));{const Jt={isFragment:!0,depth:b,content:[wn],isSelected:!1,dirty:!1,parentListType:_t(ae)};return ft.concat(Jt)}},[]);return ih(b,O,L,ae).concat(Xe)}),ih=(b,O,L,Y)=>Qn(ls(Y),ae=>{const Xe=vm(ae)?ih:ZS,ft=b+1;return Xe(ft,O,L,ae)}),ab=(b,O)=>{const L=qn(!1),Y=0;return ye(b,ae=>({sourceList:ae,entries:ih(Y,O,L,ae)}))},xl=(b,O)=>{const L=US(O);return ye(L,Y=>{const ae=m1(Y)?Gr([Tn.fromHtml(`<!--${Y.content}-->`)]):Gr(Y.content),Xe=Cu(Y)?Y.itemAttributes:{};return Tn.fromDom($(b,ae.dom,Xe))})},bm=(b,O)=>{const L=US(O);return ct(b.contentDocument,L).toArray()},ym=(b,O)=>Qn(at(O,Yi),L=>Kt(L).exists(Yi)?bm(b,L):xl(b,L)),ib=(b,O)=>{Et(xt(b,ac),L=>HS(O,L))},si=b=>{const O=ye(oh(b),Tn.fromDom);return Ft(gn(O,he(f1)),gn(ys(O),he(f1)),(L,Y)=>({start:L,end:Y}))},hd=(b,O,L)=>{const Y=ab(O,si(b));Et(Y,ae=>{ib(ae.entries,L);const Xe=ym(b,ae.entries);Et(Xe,ft=>{ca(b,L==="Indent"?"IndentList":"OutdentList",ft.dom)}),fd(ae.sourceList,Xe),yt(ae.sourceList)})},lh=(b,O)=>{const L=lf(sh(b)),Y=lf(c1(b));let ae=!1;if(L.length||Y.length){const Xe=b.selection.getBookmark();hd(b,L,O),Ss(b,O,Y),b.selection.moveToBookmark(Xe),b.selection.setRng(xs(b.selection.getRng())),b.nodeChanged(),ae=!0}return ae},ch=(b,O)=>!_S(b)&&lh(b,O),uh=b=>ch(b,"Indent"),ua=b=>ch(b,"Outdent"),pd=b=>ch(b,"Flatten");var Si=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const wl=oi.DOM,Ea=b=>{const O={},L=Y=>{let ae=b[Y?"startContainer":"endContainer"],Xe=b[Y?"startOffset":"endOffset"];if(Uo(ae)){const ft=wl.create("span",{"data-mce-type":"bookmark"});ae.hasChildNodes()?(Xe=Math.min(Xe,ae.childNodes.length-1),Y?ae.insertBefore(ft,ae.childNodes[Xe]):wl.insertAfter(ft,ae.childNodes[Xe])):ae.appendChild(ft),ae=ft,Xe=0}O[Y?"startContainer":"endContainer"]=ae,O[Y?"startOffset":"endOffset"]=Xe};return L(!0),b.collapsed||L(),O},gf=b=>{const O=Y=>{const ae=wn=>{var Sn;let Jt=(Sn=wn.parentNode)===null||Sn===void 0?void 0:Sn.firstChild,Vn=0;for(;Jt;){if(Jt===wn)return Vn;(!Uo(Jt)||Jt.getAttribute("data-mce-type")!=="bookmark")&&Vn++,Jt=Jt.nextSibling}return-1};let Xe=b[Y?"startContainer":"endContainer"],ft=b[Y?"startOffset":"endOffset"];if(Xe){if(Uo(Xe)&&Xe.parentNode){const wn=Xe;ft=ae(Xe),Xe=Xe.parentNode,wl.remove(wn),!Xe.hasChildNodes()&&wl.isBlock(Xe)&&Xe.appendChild(wl.create("br"))}b[Y?"startContainer":"endContainer"]=Xe,b[Y?"startOffset":"endOffset"]=ft}};O(!0),O();const L=wl.createRng();return L.setStart(b.startContainer,b.startOffset),b.endContainer&&L.setEnd(b.endContainer,b.endOffset),xs(L)},zn=b=>{switch(b){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},El=(b,O,L)=>{const Y=L["list-style-type"]?L["list-style-type"]:null;b.setStyle(O,"list-style-type",Y)},dh=(b,O)=>{Yr.each(O,(L,Y)=>{b.setAttribute(Y,L)})},so=(b,O,L)=>{dh(O,L["list-attributes"]),Yr.each(b.select("li",O),Y=>{dh(Y,L["list-item-attributes"])})},da=(b,O,L)=>{El(b,O,L),so(b,O,L)},ic=(b,O,L)=>{Yr.each(L,Y=>b.setStyle(O,Y,""))},hf=(b,O)=>K(O)&&!Mt(O,b.schema.getBlockElements()),xu=(b,O,L,Y)=>{let ae=O[L?"startContainer":"endContainer"];const Xe=O[L?"startOffset":"endOffset"];Uo(ae)&&(ae=ae.childNodes[Math.min(Xe,ae.childNodes.length-1)]||ae),!L&&Wa(ae.nextSibling)&&(ae=ae.nextSibling);const ft=Sn=>{for(;!b.dom.isBlock(Sn)&&Sn.parentNode&&Y!==Sn;)Sn=Sn.parentNode;return Sn},wn=(Sn,Jt)=>{var Vn;const os=new ji(Sn,ft(Sn)),Ji=Jt?"next":"prev";let Jr;for(;Jr=os[Ji]();)if(!(ko(b,Jr)||ts(Jr.textContent)||((Vn=Jr.textContent)===null||Vn===void 0?void 0:Vn.length)===0))return Te.some(Jr);return Te.none()};if(L&&Ir(ae))if(ts(ae.textContent))ae=wn(ae,!1).getOr(ae);else for(ae.parentNode!==null&&hf(b,ae.parentNode)&&(ae=ae.parentNode);ae.previousSibling!==null&&(hf(b,ae.previousSibling)||Ir(ae.previousSibling));)ae=ae.previousSibling;if(!L&&Ir(ae))if(ts(ae.textContent))ae=wn(ae,!0).getOr(ae);else for(ae.parentNode!==null&&hf(b,ae.parentNode)&&(ae=ae.parentNode);ae.nextSibling!==null&&(hf(b,ae.nextSibling)||Ir(ae.nextSibling));)ae=ae.nextSibling;for(;ae.parentNode!==Y;){const Sn=ae.parentNode;if(we(b,ae)||/^(TD|TH)$/.test(Sn.nodeName))return ae;ae=Sn}return ae},Ga=(b,O,L)=>{const Y=[],ae=b.dom,Xe=xu(b,O,!0,L),ft=xu(b,O,!1,L);let wn;const Sn=[];for(let Jt=Xe;Jt&&(Sn.push(Jt),Jt!==ft);Jt=Jt.nextSibling);return Yr.each(Sn,Jt=>{var Vn;if(we(b,Jt)){Y.push(Jt),wn=null;return}if(ae.isBlock(Jt)||Wa(Jt)){Wa(Jt)&&ae.remove(Jt),wn=null;return}const os=Jt.nextSibling;if(Si.isBookmarkNode(Jt)&&(Br(os)||we(b,os)||!os&&Jt.parentNode===L)){wn=null;return}wn||(wn=ae.create("p"),(Vn=Jt.parentNode)===null||Vn===void 0||Vn.insertBefore(wn,Jt),Y.push(wn)),wn.appendChild(Jt)}),Y},Ta=(b,O,L)=>{const Y=b.getStyle(O,"list-style-type");let ae=L?L["list-style-type"]:"";return ae=ae===null?"":ae,Y===ae},WS=(b,O)=>{const L=b.selection.getStart(!0),Y=xu(b,O,!0,b.getBody());return ns(Tn.fromDom(Y),Tn.fromDom(O.commonAncestorContainer))?O.commonAncestorContainer:L},Cm=(b,O,L)=>{const Y=b.selection.getRng();let ae="LI";const Xe=ff(b,WS(b,Y)),ft=b.dom;if(ft.getContentEditable(b.selection.getNode())==="false")return;O=O.toUpperCase(),O==="DL"&&(ae="DT");const wn=Ea(Y),Sn=xt(Ga(b,Y,Xe),b.dom.isEditable);Yr.each(Sn,Jt=>{let Vn;const os=Jt.previousSibling,Ji=Jt.parentNode;Ki(Ji)||(os&&Br(os)&&os.nodeName===O&&Ta(ft,os,L)?(Vn=os,Jt=ft.rename(Jt,ae),os.appendChild(Jt)):(Vn=ft.create(O),Ji.insertBefore(Vn,Jt),Vn.appendChild(Jt),Jt=ft.rename(Jt,ae)),ic(ft,Jt,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),da(ft,Vn,L),Eu(b.dom,Vn))}),b.selection.setRng(gf(wn))},fr=(b,O)=>Br(b)&&b.nodeName===(O==null?void 0:O.nodeName),vd=(b,O,L)=>{const Y=b.getStyle(O,"list-style-type",!0),ae=b.getStyle(L,"list-style-type",!0);return Y===ae},wu=(b,O)=>b.className===O.className,fh=(b,O,L)=>fr(O,L)&&vd(b,O,L)&&wu(O,L),Eu=(b,O)=>{let L,Y=O.nextSibling;if(fh(b,O,Y)){const ae=Y;for(;L=ae.firstChild;)O.appendChild(L);b.remove(ae)}if(Y=O.previousSibling,fh(b,O,Y)){const ae=Y;for(;L=ae.lastChild;)O.insertBefore(L,O.firstChild);b.remove(ae)}},lc=(b,O,L,Y)=>{if(O.nodeName!==L){const ae=b.dom.rename(O,L);da(b.dom,ae,Y),ca(b,zn(L),ae)}else da(b.dom,O,Y),ca(b,zn(L),O)},Sm=(b,O,L,Y)=>{if(O.classList.forEach((ae,Xe,ft)=>{ae.startsWith("tox-")&&(ft.remove(ae),ft.length===0&&O.removeAttribute("class"))}),O.nodeName!==L){const ae=b.dom.rename(O,L);da(b.dom,ae,Y),ca(b,zn(L),ae)}else da(b.dom,O,Y),ca(b,zn(L),O)},lb=(b,O,L,Y,ae)=>{const Xe=Br(O);if(Xe&&O.nodeName===Y&&!p1(ae)&&!mf(O))pd(b);else{Cm(b,Y,ae);const ft=Ea(b.selection.getRng()),wn=Xe?[O,...L]:L,Sn=Xe&&mf(O)?Sm:lc;Yr.each(wn,Jt=>{Sn(b,Jt,Y,ae)}),b.selection.setRng(gf(ft))}},p1=b=>"list-style-type"in b,Tu=(b,O,L,Y)=>{if(O!==b.getBody())if(O)if(O.nodeName===L&&!p1(Y)&&!mf(O))pd(b);else{const ae=Ea(b.selection.getRng());mf(O)&&O.classList.forEach((ft,wn,Sn)=>{ft.startsWith("tox-")&&(Sn.remove(ft),Sn.length===0&&O.removeAttribute("class"))}),da(b.dom,O,Y);const Xe=b.dom.rename(O,L);Eu(b.dom,Xe),b.selection.setRng(gf(ae)),Cm(b,L,Y),ca(b,zn(L),Xe)}else Cm(b,L,Y),ca(b,zn(L),O)},Au=(b,O,L)=>{const Y=Sl(b);if(yu(b,Y))return;const ae=gd(b),Xe=S(L)?L:{};ae.length>0?lb(b,Y,ae,O,Xe):Tu(b,Y,O,Xe)},v1=oi.DOM,cb=(b,O)=>{const L=O.parentElement;if(L&&L.nodeName==="LI"&&L.firstChild===O){const Y=L.previousSibling;Y&&Y.nodeName==="LI"?(Y.appendChild(O),Mo(b,L)&&v1.remove(L)):v1.setStyle(L,"listStyleType","none")}if(Br(L)){const Y=L.previousSibling;Y&&Y.nodeName==="LI"&&Y.appendChild(O)}},Fr=(b,O)=>{const L=Yr.grep(b.select("ol,ul",O));Yr.each(L,Y=>{cb(b,Y)})},Ou=(b,O,L,Y)=>{let ae=O.startContainer;const Xe=O.startOffset;if(Ir(ae)&&(L?Xe<ae.data.length:Xe>0))return ae;const ft=b.schema.getNonEmptyElements();Uo(ae)&&(ae=Gn.getNode(ae,Xe));const wn=new ji(ae,Y);L&&Go(b.dom,ae)&&wn.next();const Sn=L?wn.next.bind(wn):wn.prev2.bind(wn);for(;ae=Sn();)if(ae.nodeName==="LI"&&!ae.hasChildNodes()||ft[ae.nodeName]||Ir(ae)&&ae.data.length>0)return ae;return null},xr=(b,O)=>{const L=O.childNodes;return L.length===1&&!Br(L[0])&&b.isBlock(L[0])},xm=b=>Te.from(b).map(Tn.fromDom).filter(Dt).exists(O=>Wc(O)&&!Je(["details"],_t(O))),mh=(b,O)=>{xr(b,O)&&xm(O.firstChild)&&b.remove(O.firstChild,!0)},gh=(b,O,L)=>{let Y;const ae=xr(b,L)?L.firstChild:L;if(mh(b,O),!Mo(b,O,!0))for(;Y=O.firstChild;)ae.appendChild(Y)},Fs=(b,O,L)=>{let Y;const ae=O.parentNode;if(!Ls(b,O)||!Ls(b,L))return;Br(L.lastChild)&&(Y=L.lastChild),ae===L.lastChild&&Wa(ae.previousSibling)&&b.remove(ae.previousSibling);const Xe=L.lastChild;Xe&&Wa(Xe)&&O.hasChildNodes()&&b.remove(Xe),Mo(b,L,!0)&&Zi(Tn.fromDom(L)),gh(b,O,L),Y&&L.appendChild(Y);const wn=An(Tn.fromDom(L),Tn.fromDom(O))?b.getParents(O,Br,L):[];b.remove(O),Et(wn,Sn=>{Mo(b,Sn)&&Sn!==b.getRoot()&&b.remove(Sn)})},Tl=(b,O,L)=>{Zi(Tn.fromDom(L)),Fs(b.dom,O,L),b.selection.setCursorLocation(L,0)},ku=(b,O,L,Y)=>{const ae=b.dom;if(ae.isEmpty(Y))Tl(b,L,Y);else{const Xe=Ea(O);Fs(ae,L,Y),b.selection.setRng(gf(Xe))}},cc=(b,O,L,Y)=>{const ae=Ea(O);Fs(b.dom,L,Y);const Xe=gf(ae);b.selection.setRng(Xe)},Xr=(b,O)=>{const L=b.dom,Y=b.selection,ae=Y.getStart(),Xe=vo(b,ae),ft=L.getParent(Y.getStart(),"LI",Xe);if(ft){const wn=ft.parentElement;if(wn===b.getBody()&&Mo(L,wn))return!0;const Sn=xs(Y.getRng()),Jt=L.getParent(Ou(b,Sn,O,Xe),"LI",Xe),Vn=Jt&&(O?L.isChildOf(ft,Jt):L.isChildOf(Jt,ft));if(Jt&&Jt!==ft&&!Vn)return b.undoManager.transact(()=>{O?ku(b,Sn,Jt,ft):sc(ft)?ua(b):cc(b,Sn,ft,Jt)}),!0;if(Vn&&!O&&Jt!==ft){const os=Sn.commonAncestorContainer.parentElement;return!os||L.isChildOf(Jt,os)?!1:(b.undoManager.transact(()=>{const Ji=Ea(Sn);gh(L,os,Jt),os.remove();const Jr=gf(Ji);b.selection.setRng(Jr)}),!0)}else if(!Jt&&!O&&Sn.startOffset===0&&Sn.endOffset===0)return b.undoManager.transact(()=>{pd(b)}),!0}return!1},wm=(b,O,L)=>{const Y=b.getParent(O.parentNode,b.isBlock,L);b.remove(O),Y&&b.isEmpty(Y)&&b.remove(Y)},ub=(b,O)=>{const L=b.dom,Y=b.selection.getStart(),ae=vo(b,Y),Xe=L.getParent(Y,L.isBlock,ae);if(Xe&&L.isEmpty(Xe,void 0,{checkRootAsContent:!0})){const ft=xs(b.selection.getRng()),wn=Ou(b,ft,O,ae),Sn=L.getParent(wn,"LI",ae);if(wn&&Sn){const Jt=Jr=>Je(["td","th","caption"],_t(Jr)),Vn=Jr=>Jr.dom===ae,os=Kr(Tn.fromDom(Sn),Jt,Vn),Ji=Kr(Tn.fromDom(ft.startContainer),Jt,Vn);return Bs(os,Ji,an)?(b.undoManager.transact(()=>{const Jr=Sn.parentNode;wm(L,Xe,ae),Eu(L,Jr),b.selection.select(wn,!0),b.selection.collapse(O)}),!0):!1}}return!1},jS=(b,O)=>Xr(b,O)||ub(b,O),ri=b=>{const O=b.selection.getStart(),L=vo(b,O);return b.dom.getParent(O,"LI,DT,DD",L)||oh(b).length>0},GS=b=>ri(b)?(b.undoManager.transact(()=>{let O=!0;const L=()=>O=!1;b.on("input",L),b.execCommand("Delete"),b.off("input",L),O&&b.dispatch("input"),Fr(b.dom,b.getBody())}),!0):!1,hh=(b,O)=>{const L=b.selection;return!yu(b,L.getNode())&&(L.isCollapsed()?jS(b,O):GS(b))},db=b=>{b.on("ExecCommand",O=>{const L=O.command.toLowerCase();(L==="delete"||L==="forwarddelete")&&ri(b)&&Fr(b.dom,b.getBody())}),b.on("keydown",O=>{O.keyCode===Za.BACKSPACE?hh(b,!1)&&O.preventDefault():O.keyCode===Za.DELETE&&hh(b,!0)&&O.preventDefault()})},cn=b=>({backspaceDelete:O=>{hh(b,O)}}),fb=(b,O)=>{const L=Sl(b);L===null||yu(b,L)||b.undoManager.transact(()=>{S(O.styles)&&b.dom.setStyles(L,O.styles),S(O.attrs)&&Le(O.attrs,(Y,ae)=>b.dom.setAttrib(L,ae,Y))})},er=b=>{const O=ys(Wr(b).split("")),L=ye(O,(Y,ae)=>{const Xe=Y.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,ae)*Xe});return qe(L,(Y,ae)=>Y+ae,0)},tr=b=>{if(b--,b<0)return"";{const O=b%26,L=Math.floor(b/26),Y=tr(L),ae=String.fromCharCode(65+O);return Y+ae}},b1=b=>/^[A-Z]+$/.test(b),us=b=>/^[a-z]+$/.test(b),mb=b=>/^[0-9]+$/.test(b),Em=b=>mb(b)?2:b1(b)?0:us(b)?1:Nt(b)?3:4,uc=b=>{switch(Em(b)){case 2:return Te.some({listStyleType:Te.none(),start:b});case 0:return Te.some({listStyleType:Te.some("upper-alpha"),start:er(b).toString()});case 1:return Te.some({listStyleType:Te.some("lower-alpha"),start:er(b).toString()});case 3:return Te.some({listStyleType:Te.none(),start:""});case 4:return Te.none()}},Aa=b=>{const O=parseInt(b.start,10);return Fo(b.listStyleType,"upper-alpha")?tr(O):Fo(b.listStyleType,"lower-alpha")?tr(O).toLowerCase():b.start},Gc=b=>{const O=Sl(b);!Gi(O)||yu(b,O)||b.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Aa({start:b.dom.getAttrib(O,"start","1"),listStyleType:Te.from(b.dom.getStyle(O,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:L=>{const Y=L.getData();uc(Y.start).each(ae=>{b.execCommand("mceListUpdate",!1,{attrs:{start:ae.start==="1"?"":ae.start},styles:{"list-style-type":ae.listStyleType.getOr("")}})}),L.close()}})},Tm=(b,O)=>()=>{const L=Sl(b);return K(L)&&L.nodeName===O},_s=b=>{b.addCommand("mceListProps",()=>{Gc(b)})},ph=b=>{b.on("BeforeExecCommand",O=>{const L=O.command.toLowerCase();L==="indent"?uh(b):L==="outdent"&&ua(b)}),b.addCommand("InsertUnorderedList",(O,L)=>{Au(b,"UL",L)}),b.addCommand("InsertOrderedList",(O,L)=>{Au(b,"OL",L)}),b.addCommand("InsertDefinitionList",(O,L)=>{Au(b,"DL",L)}),b.addCommand("RemoveList",()=>{pd(b)}),_s(b),b.addCommand("mceListUpdate",(O,L)=>{S(L)&&fb(b,L)}),b.addQueryStateHandler("InsertUnorderedList",Tm(b,"UL")),b.addQueryStateHandler("InsertOrderedList",Tm(b,"OL")),b.addQueryStateHandler("InsertDefinitionList",Tm(b,"DL"))};var pf=tinymce.util.Tools.resolve("tinymce.html.Node");const Du=b=>b.type===3,y1=b=>b.length===0,mr=b=>{const O=(ae,Xe)=>{const ft=pf.create("li");Et(ae,wn=>ft.append(wn)),Xe?b.insert(ft,Xe,!0):b.append(ft)},L=(ae,Xe)=>Du(Xe)?[...ae,Xe]:!y1(ae)&&!Du(Xe)?(O(ae,Xe),[]):ae,Y=qe(b.children(),L,[]);y1(Y)||O(Y)},xi=b=>{b.on("PreInit",()=>{const{parser:O}=b;O.addNodeFilter("ul,ol",L=>Et(L,mr))})},Ds=b=>{b.on("keydown",O=>{O.keyCode!==Za.TAB||Za.metaKeyPressed(O)||b.undoManager.transact(()=>{(O.shiftKey?ua(b):uh(b))&&O.preventDefault()})})},Oa=b=>{ht(b)&&Ds(b),db(b)},vf=(b,O)=>L=>{const Y=ae=>{L.setActive(rh(ae.parents,O)),L.setEnabled(!yu(b,ae.element)&&b.selection.isEditable())};return L.setEnabled(b.selection.isEditable()),rc(b,Y)},nr=b=>{const O=L=>()=>b.execCommand(L);b.hasPlugin("advlist")||(b.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:O("InsertOrderedList"),onSetup:vf(b,"OL")}),b.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:O("InsertUnorderedList"),onSetup:vf(b,"UL")}))},gb=(b,O)=>L=>rc(b,ae=>L.setEnabled(rh(ae.parents,O)&&!yu(b,ae.element))),hn=b=>{const O={text:"List properties...",icon:"ordered-list",onAction:()=>b.execCommand("mceListProps"),onSetup:gb(b,"OL")};b.ui.registry.addMenuItem("listprops",O),b.ui.registry.addContextMenu("lists",{update:L=>{const Y=Sl(b,L);return Gi(Y)?["listprops"]:[]}})};var Xi=()=>{U.add("lists",b=>(j0(b),xi(b),b.hasPlugin("rtc",!0)?_s(b):(Oa(b),ph(b)),nr(b),hn(b),cn(b)))};Xi()})();(function(){const U=Object.getPrototypeOf,w=(t,s,a)=>{var l;return a(t,s.prototype)?!0:((l=t.constructor)===null||l===void 0?void 0:l.name)===s.name},F=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&w(t,String,(a,l)=>l.isPrototypeOf(a))?"string":s},T=t=>s=>F(s)===t,P=t=>s=>typeof s===t,j=t=>s=>t===s,S=(t,s)=>k(t)&&w(t,s,(a,l)=>U(a)===l),B=T("string"),k=T("object"),z=t=>S(t,Object),K=T("array"),J=j(null),re=P("boolean"),ce=j(void 0),fe=t=>t==null,me=t=>!fe(t),Ce=P("function"),_e=P("number"),he=(t,s)=>{if(K(t)){for(let a=0,l=t.length;a<l;++a)if(!s(t[a]))return!1;return!0}return!1},q=()=>{},Te=t=>()=>t(),bt=(t,s)=>(...a)=>t(s.apply(null,a)),Ge=(t,s)=>a=>t(s(a)),te=t=>()=>t,lt=t=>t,Je=(t,s)=>t===s;function gt(t,...s){return(...a)=>{const l=s.concat(a);return t.apply(null,l)}}const ye=t=>s=>!t(s),Et=t=>()=>{throw new Error(t)},xt=t=>t(),at=te(!1),qe=te(!0);class x{constructor(s,a){this.tag=s,this.value=a}static some(s){return new x(!0,s)}static none(){return x.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?x.some(s(this.value)):x.none()}bind(s){return this.tag?s(this.value):x.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:x.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return me(s)?x.some(s):x.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}x.singletonNone=new x(!1);const gn=Array.prototype.slice,Ye=Array.prototype.indexOf,Qn=Array.prototype.push,ys=(t,s)=>Ye.call(t,s),ut=(t,s)=>{const a=ys(t,s);return a===-1?x.none():x.some(a)},Kt=(t,s)=>ys(t,s)>-1,fo=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const u=t[a];if(s(u,a))return!0}return!1},Ao=(t,s)=>{const a=[];for(let l=0;l<t;l++)a.push(s(l));return a},go=(t,s)=>{const a=[];for(let l=0;l<t.length;l+=s){const u=gn.call(t,l,l+s);a.push(u)}return a},Le=(t,s)=>{const a=t.length,l=new Array(a);for(let u=0;u<a;u++){const f=t[u];l[u]=s(f,u)}return l},tt=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const u=t[a];s(u,a)}},N=(t,s)=>{for(let a=t.length-1;a>=0;a--){const l=t[a];s(l,a)}},Ps=(t,s)=>{const a=[],l=[];for(let u=0,f=t.length;u<f;u++){const m=t[u];(s(m,u)?a:l).push(m)}return{pass:a,fail:l}},qn=(t,s)=>{const a=[];for(let l=0,u=t.length;l<u;l++){const f=t[l];s(f,l)&&a.push(f)}return a},is=(t,s,a)=>(N(t,(l,u)=>{a=s(a,l,u)}),a),Fo=(t,s,a)=>(tt(t,(l,u)=>{a=s(a,l,u)}),a),Bs=(t,s,a)=>{for(let l=0,u=t.length;l<u;l++){const f=t[l];if(s(f,l))return x.some(f);if(a(f,l))break}return x.none()},Ft=(t,s)=>Bs(t,s,at),Cn=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const u=t[a];if(s(u,a))return x.some(a)}return x.none()},Yt=t=>{const s=[];for(let a=0,l=t.length;a<l;++a){if(!K(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Qn.apply(s,t[a])}return s},ke=(t,s)=>Yt(Le(t,s)),Wr=(t,s)=>{for(let a=0,l=t.length;a<l;++a){const u=t[a];if(s(u,a)!==!0)return!1}return!0},Rr=t=>{const s=gn.call(t,0);return s.reverse(),s},Nt=(t,s)=>qn(t,a=>!Kt(s,a)),Qs=(t,s)=>{const a={};for(let l=0,u=t.length;l<u;l++){const f=t[l];a[String(f)]=s(f,l)}return a},ts=t=>[t],yi=(t,s)=>{const a=gn.call(t,0);return a.sort(s),a},Oo=(t,s)=>s>=0&&s<t.length?x.some(t[s]):x.none(),Ns=t=>Oo(t,0),jr=t=>Oo(t,t.length-1),Cs=Ce(Array.from)?Array.from:t=>gn.call(t),Tn=(t,s)=>{for(let a=0;a<t.length;a++){const l=s(t[a],a);if(l.isSome())return l}return x.none()},Me=Object.keys,$e=Object.hasOwnProperty,ze=(t,s)=>{const a=Me(t);for(let l=0,u=a.length;l<u;l++){const f=a[l],m=t[f];s(m,f)}},ot=(t,s)=>tn(t,(a,l)=>({k:l,v:s(a,l)})),tn=(t,s)=>{const a={};return ze(t,(l,u)=>{const f=s(l,u);a[f.k]=f.v}),a},an=t=>(s,a)=>{t[a]=s},An=(t,s,a,l)=>{ze(t,(u,f)=>{(s(u,f)?a:l)(u,f)})},Hn=(t,s)=>{const a={},l={};return An(t,s,an(a),an(l)),{t:a,f:l}},xo=(t,s)=>{const a={};return An(t,s,an(a),q),a},Dn=(t,s)=>{const a=[];return ze(t,(l,u)=>{a.push(s(l,u))}),a},Xt=(t,s)=>{const a=Me(t);for(let l=0,u=a.length;l<u;l++){const f=a[l],m=t[f];if(s(m,f,t))return x.some(m)}return x.none()},nn=t=>Dn(t,lt),Be=(t,s)=>_t(t,s)?x.from(t[s]):x.none(),_t=(t,s)=>$e.call(t,s),Lo=(t,s)=>_t(t,s)&&t[s]!==void 0&&t[s]!==null,Pr={generate:t=>{if(!K(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return tt(t,(l,u)=>{const f=Me(l);if(f.length!==1)throw new Error("one and only one name per case");const m=f[0],p=l[m];if(a[m]!==void 0)throw new Error("duplicate key detected:"+m);if(m==="cata")throw new Error("cannot have a case named cata (sorry)");if(!K(p))throw new Error("case arguments must be an array");s.push(m),a[m]=(...v)=>{const C=v.length;if(C!==p.length)throw new Error("Wrong number of arguments to case "+m+". Expected "+p.length+" ("+p+"), got "+C);return{fold:(...D)=>{if(D.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+D.length);return D[u].apply(null,v)},match:D=>{const I=Me(D);if(s.length!==I.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+I.join(","));if(!Wr(s,W=>Kt(I,W)))throw new Error("Not all branches were specified when using match. Specified: "+I.join(", ")+`
Required: `+s.join(", "));return D[m].apply(null,v)},log:D=>{console.log(D,{constructors:s,constructor:m,params:v})}}}}),a}},Dt=t=>{let s=t;return{get:()=>s,set:u=>{s=u}}},Ci=t=>{let s=x.none(),a=[];const l=C=>Ci(E=>{u(D=>{E(C(D))})}),u=C=>{m()?v(C):a.push(C)},f=C=>{m()||(s=x.some(C),p(a),a=[])},m=()=>s.isSome(),p=C=>{tt(C,v)},v=C=>{s.each(E=>{setTimeout(()=>{C(E)},0)})};return t(f),{get:u,map:l,isReady:m}},cd={nu:Ci,pure:t=>Ci(s=>{s(t)})},_o=t=>{setTimeout(()=>{throw t},0)},sn=t=>{const s=v=>{t().then(v,_o)};return{map:v=>sn(()=>t().then(v)),bind:v=>sn(()=>t().then(C=>v(C).toPromise())),anonBind:v=>sn(()=>t().then(()=>v.toPromise())),toLazy:()=>cd.nu(s),toCached:()=>{let v=null;return sn(()=>(v===null&&(v=t()),v))},toPromise:t,get:s}},ls={nu:t=>sn(()=>new Promise(t)),pure:t=>sn(()=>Promise.resolve(t))},Nr=t=>{const s=f=>f(t),a=te(t),l=()=>u,u={tag:!0,inner:t,fold:(f,m)=>m(t),isValue:qe,isError:at,map:f=>xn.value(f(t)),mapError:l,bind:s,exists:s,forall:s,getOr:a,or:l,getOrThunk:a,orThunk:l,getOrDie:a,each:f=>{f(t)},toOptional:()=>x.some(t)};return u},cs=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(l,u)=>l(t),isValue:at,isError:qe,map:s,mapError:l=>xn.error(l(t)),bind:s,exists:at,forall:qe,getOr:lt,or:lt,getOrThunk:xt,orThunk:xt,getOrDie:Et(String(t)),each:q,toOptional:x.none};return a},xn={value:Nr,error:cs,fromOption:(t,s)=>t.fold(()=>cs(s),Nr)},za=t=>({...t,toCached:()=>za(t.toCached()),bindFuture:v=>za(t.bind(C=>C.fold(E=>ls.pure(xn.error(E)),E=>v(E)))),bindResult:v=>za(t.map(C=>C.bind(v))),mapResult:v=>za(t.map(C=>C.map(v))),mapError:v=>za(t.map(C=>C.mapError(v))),foldResult:(v,C)=>t.map(E=>E.fold(v,C)),withTimeout:(v,C)=>za(ls.nu(E=>{let D=!1;const I=setTimeout(()=>{D=!0,E(xn.error(C()))},v);t.get(H=>{D||(clearTimeout(I),E(H))})}))}),dr=t=>za(ls.nu(t)),dd=t=>za(ls.pure(xn.value(t))),fd={nu:dr,wrap:za,pure:dd,value:dd,error:t=>za(ls.pure(xn.error(t))),fromResult:t=>za(ls.pure(t)),fromFuture:t=>za(t.map(xn.value)),fromPromise:t=>dr(s=>{t.then(a=>{s(xn.value(a))},a=>{s(xn.error(a))})})},bl=typeof window<"u"?window:Function("return this;")(),Ui=(t,s,a,l)=>{const u=t+s;return u>l?a:u<a?l:u},qs=(t,s,a)=>Math.min(Math.max(t,s),a),pu=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Zi=0;const yt=t=>{const a=new Date().getTime(),l=Math.floor(pu()*1e9);return Zi++,t+"_"+l+Zi+String(a)},cm=(t,s)=>s,Zs=(t,s)=>z(t)&&z(s)?ho(t,s):s,um=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let l=0;l<s.length;l++){const u=s[l];for(const f in u)_t(u,f)&&(a[f]=t(a[f],u[f]))}return a},ho=um(Zs),lf=um(cm),wa=(t,s,a=Je)=>t.exists(l=>a(l,s)),dm=(t,s,a=Je)=>Gr(t,s,a).getOr(t.isNone()&&s.isNone()),yl=t=>{const s=[],a=l=>{s.push(l)};for(let l=0;l<t.length;l++)t[l].each(a);return s},fm=t=>{const s=[];for(let a=0;a<t.length;a++){const l=t[a];if(l.isSome())s.push(l.getOrDie());else return x.none()}return x.some(s)},Gr=(t,s,a)=>t.isSome()&&s.isSome()?x.some(a(t.getOrDie(),s.getOrDie())):x.none(),cf=(t,s,a,l)=>t.isSome()&&s.isSome()&&a.isSome()?x.some(l(t.getOrDie(),s.getOrDie(),a.getOrDie())):x.none(),vu=(t,s)=>t!=null?x.some(s(t)):x.none(),Kr=(t,s)=>t?x.some(s):x.none(),Ws=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),gs=(t,s)=>{let a=s??bl;for(let l=0;l<t.length&&a!==void 0&&a!==null;++l)a=a[t[l]];return a},bu=(t,s)=>{const a=t.split(".");return gs(a,s)};Pr.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Wc=t=>{const s=[],a=[];return tt(t,l=>{l.fold(u=>{s.push(u)},u=>{a.push(u)})}),{errors:s,values:a}},Wi=t=>{const s=Dt(x.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(x.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:p=>{a(),s.set(x.some(p))}}},nh=()=>Wi(t=>t.destroy()),ns=()=>Wi(t=>t.unbind()),Gn=()=>{const t=Wi(q);return{...t,on:a=>t.get().each(a)}},ji=(t,s)=>t+s,Za=(t,s)=>t.substring(s),oi=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,Yr=(t,s)=>Ir(t,s)?Za(t,s.length):t,jc=(t,s)=>Uo(t,s)?t:ji(t,s),zo=(t,s,a=0,l)=>{const u=t.indexOf(s,a);return u!==-1?ce(l)?!0:u+s.length<=l:!1},Ir=(t,s)=>oi(t,s,0),Uo=(t,s)=>oi(t,s,t.length-s.length),md=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),Gi=t=>t.length>0,Ki=t=>!Gi(t),oc=t=>{const s=parseFloat(t);return isNaN(s)?x.none():x.some(s)},uf=(t,s)=>{let a=null,l=null;return{cancel:()=>{J(a)||(clearTimeout(a),a=null,l=null)},throttle:(...m)=>{l=m,J(a)&&(a=setTimeout(()=>{const p=l;a=null,l=null,t.apply(null,p)},s))}}},Wa=(t,s)=>{let a=null;return{cancel:()=>{J(a)||(clearTimeout(a),a=null)},throttle:(...f)=>{J(a)&&(a=setTimeout(()=>{a=null,t.apply(null,f)},s))}}},sc=(t,s)=>{let a=null;const l=()=>{J(a)||(clearTimeout(a),a=null)};return{cancel:l,throttle:(...f)=>{l(),a=setTimeout(()=>{a=null,t.apply(null,f)},s)}}},we=t=>{let s=!1,a;return(...l)=>(s||(s=!0,a=t.apply(null,l)),a)},Mt="\uFEFF",ko=" ",Go=(t,s)=>{const l=(s||document).createElement("div");if(l.innerHTML=t,!l.hasChildNodes()||l.childNodes.length>1){const u="HTML does not have a single root node";throw console.error(u,t),new Error(u)}return Lr(l.childNodes[0])},Mo=(t,s)=>{const l=(s||document).createElement(t);return Lr(l)},Ls=(t,s)=>{const l=(s||document).createTextNode(t);return Lr(l)},Lr=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},ht={fromHtml:Go,fromTag:Mo,fromText:Ls,fromDom:Lr,fromPoint:(t,s,a)=>x.from(t.dom.elementFromPoint(s,a)).map(Lr)},mm=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,l)=>{t.setStart(a.dom,l)},a=>{t.setStartAfter(a.dom)})},gm=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,l)=>{t.setEnd(a.dom,l)},a=>{t.setEndAfter(a.dom)})},$=(t,s,a)=>{const l=t.document.createRange();return mm(l,s),gm(l,a),l},ee=(t,s,a,l,u)=>{const f=t.document.createRange();return f.setStart(s.dom,a),f.setEnd(l.dom,u),f},de=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),Ve=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?x.some(a).map(de):x.none()},dt=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?x.some(s).map(de):x.none()},Ot=Pr.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),In=(t,s,a)=>s(ht.fromDom(a.startContainer),a.startOffset,ht.fromDom(a.endContainer),a.endOffset),Ss=(t,s)=>s.match({domRange:a=>({ltr:te(a),rtl:x.none}),relative:(a,l)=>({ltr:we(()=>$(t,a,l)),rtl:we(()=>x.some($(t,l,a)))}),exact:(a,l,u,f)=>({ltr:we(()=>ee(t,a,l,u,f)),rtl:we(()=>x.some(ee(t,u,f,a,l)))})}),po=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(u=>u.collapsed===!1).map(u=>Ot.rtl(ht.fromDom(u.endContainer),u.endOffset,ht.fromDom(u.startContainer),u.startOffset)).getOrThunk(()=>In(t,Ot.ltr,a)):In(t,Ot.ltr,a)},xs=(t,s)=>{const a=Ss(t,s);return po(t,a)},hs=(t,s)=>xs(t,s).match({ltr:(l,u,f,m)=>{const p=t.document.createRange();return p.setStart(l.dom,u),p.setEnd(f.dom,m),p},rtl:(l,u,f,m)=>{const p=t.document.createRange();return p.setStart(f.dom,m),p.setEnd(l.dom,u),p}});Ot.ltr,Ot.rtl;const Cl=9,Sl=11,df=1,G0=3,gd=(t,s)=>{const a=t.dom;if(a.nodeType!==df)return!1;{const l=a;if(l.matches!==void 0)return l.matches(s);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(s);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(s);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},K0=t=>t.nodeType!==df&&t.nodeType!==Cl&&t.nodeType!==Sl||t.childElementCount===0,oh=(t,s)=>{const a=s===void 0?document:s.dom;return K0(a)?[]:Le(a.querySelectorAll(t),ht.fromDom)},c1=(t,s)=>{const a=s===void 0?document:s.dom;return K0(a)?x.none():x.from(a.querySelector(t)).map(ht.fromDom)},vo=(t,s)=>t.dom===s.dom,hm=(t,s)=>{const a=t.dom,l=s.dom;return a===l?!1:a.contains(l)},ff=(t,s,a,l)=>{const u=t.isiOS()&&/ipad/i.test(a)===!0,f=t.isiOS()&&!u,m=t.isiOS()||t.isAndroid(),p=m||l("(pointer:coarse)"),v=u||!f&&m&&l("(min-device-width:768px)"),C=f||m&&!v,E=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,D=!C&&!v&&!E;return{isiPad:te(u),isiPhone:te(f),isTablet:te(v),isPhone:te(C),isTouch:te(p),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:te(E),isDesktop:te(D)}},Y0=(t,s)=>{for(let a=0;a<t.length;a++){const l=t[a];if(l.test(s))return l}},u1=(t,s)=>{const a=Y0(t,s);if(!a)return{major:0,minor:0};const l=u=>Number(s.replace(a,"$"+u));return sh(l(1),l(2))},X0=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?d1():u1(t,a)},d1=()=>sh(0,0),sh=(t,s)=>({major:t,minor:s}),pm={nu:sh,detect:X0,unknown:d1},mf=(t,s)=>Tn(s.brands,a=>{const l=a.brand.toLowerCase();return Ft(t,u=>{var f;return l===((f=u.brand)===null||f===void 0?void 0:f.toLowerCase())}).map(u=>({current:u.name,version:pm.nu(parseInt(a.version,10),0)}))}),rh=(t,s)=>{const a=String(s).toLowerCase();return Ft(t,l=>l.search(a))},FS=(t,s)=>rh(t,s).map(a=>{const l=pm.detect(a.versionRegexes,s);return{current:a.name,version:l}}),_S=(t,s)=>rh(t,s).map(a=>{const l=pm.detect(a.versionRegexes,s);return{current:a.name,version:l}}),yu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,rc=t=>s=>zo(s,t),ca=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>zo(t,"edge/")&&zo(t,"chrome")&&zo(t,"safari")&&zo(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,yu],search:t=>zo(t,"chrome")&&!zo(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>zo(t,"msie")||zo(t,"trident")},{name:"Opera",versionRegexes:[yu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:rc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:rc("firefox")},{name:"Safari",versionRegexes:[yu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(zo(t,"safari")||zo(t,"mobile/"))&&zo(t,"applewebkit")}],vm=[{name:"Windows",search:rc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>zo(t,"iphone")||zo(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:rc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:rc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:rc("linux"),versionRegexes:[]},{name:"Solaris",search:rc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:rc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:rc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],J0={browsers:te(ca),oses:te(vm)},f1="Edge",Q0="Chromium",Cu="IE",m1="Opera",ah="Firefox",Yi="Safari",ac=()=>Su({current:void 0,version:pm.unknown()}),Su=t=>{const s=t.current,a=t.version,l=u=>()=>s===u;return{current:s,version:a,isEdge:l(f1),isChromium:l(Q0),isIE:l(Cu),isOpera:l(m1),isFirefox:l(ah),isSafari:l(Yi)}},q0={unknown:ac,nu:Su,edge:te(f1),chromium:te(Q0),ie:te(Cu),opera:te(m1),firefox:te(ah),safari:te(Yi)},eo="Windows",eb="iOS",g1="Android",tb="Linux",nb="macOS",ob="Solaris",sb="FreeBSD",h1="ChromeOS",oO=()=>rb({current:void 0,version:pm.unknown()}),rb=t=>{const s=t.current,a=t.version,l=u=>()=>s===u;return{current:s,version:a,isWindows:l(eo),isiOS:l(eb),isAndroid:l(g1),isMacOS:l(nb),isLinux:l(tb),isSolaris:l(ob),isFreeBSD:l(sb),isChromeOS:l(h1)}},$S={unknown:oO,nu:rb,windows:te(eo),ios:te(eb),android:te(g1),linux:te(tb),macos:te(nb),solaris:te(ob),freebsd:te(sb),chromeos:te(h1)},HS={detect:(t,s,a)=>{const l=J0.browsers(),u=J0.oses(),f=s.bind(v=>mf(l,v)).orThunk(()=>FS(l,t)).fold(q0.unknown,q0.nu),m=_S(u,t).fold($S.unknown,$S.nu),p=ff(m,f,t,a);return{browser:f,os:m,deviceType:p}}},VS=t=>window.matchMedia(t).matches;let zS=we(()=>HS.detect(window.navigator.userAgent,x.from(window.navigator.userAgentData),VS));const ja=()=>zS(),US=(t,s)=>bu(t,s),ne=(t,s)=>{const a=US(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},ZS=Object.getPrototypeOf,ih=t=>ne("HTMLElement",t),ab=t=>{const s=bu("ownerDocument.defaultView",t);return k(t)&&(ih(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(ZS(t).constructor.name))},xl=t=>t.dom.nodeName.toLowerCase(),bm=t=>t.dom.nodeType,ym=t=>s=>bm(s)===t,ib=t=>si(t)&&ab(t.dom),si=ym(df),hd=ym(G0),lh=ym(Cl),ch=ym(Sl),uh=t=>s=>si(s)&&xl(s)===t,ua=t=>ht.fromDom(t.dom.ownerDocument),pd=t=>lh(t)?t:ua(t),Si=t=>ht.fromDom(pd(t).dom.documentElement),wl=t=>ht.fromDom(pd(t).dom.defaultView),Ea=t=>x.from(t.dom.parentNode).map(ht.fromDom),gf=t=>Ea(t),zn=t=>x.from(t.dom.parentElement).map(ht.fromDom),El=(t,s)=>{const a=Ce(s)?s:at;let l=t.dom;const u=[];for(;l.parentNode!==null&&l.parentNode!==void 0;){const f=l.parentNode,m=ht.fromDom(f);if(u.push(m),a(m)===!0)break;l=f}return u},dh=t=>x.from(t.dom.offsetParent).map(ht.fromDom),so=t=>x.from(t.dom.nextSibling).map(ht.fromDom),da=t=>Le(t.dom.childNodes,ht.fromDom),ic=(t,s)=>{const a=t.dom.childNodes;return x.from(a[s]).map(ht.fromDom)},hf=t=>ic(t,0),xu=(t,s)=>({element:t,offset:s}),Ga=(t,s)=>{const a=da(t);return a.length>0&&s<a.length?xu(a[s],0):xu(t,s)},Ta=(t,s,a,l)=>{const f=ua(t).dom.createRange();return f.setStart(t.dom,s),f.setEnd(a.dom,l),f},WS=(t,s,a,l)=>{const u=Ta(t,s,a,l),f=vo(t,a)&&s===l;return u.collapsed&&!f},Cm=t=>ch(t)&&me(t.dom.host),fr=t=>ht.fromDom(t.dom.getRootNode()),vd=t=>Cm(t)?t:ht.fromDom(pd(t).dom.body),wu=t=>fh(t).isSome(),fh=t=>{const s=fr(t);return Cm(s)?x.some(s):x.none()},Eu=t=>ht.fromDom(t.dom.host),lc=t=>{if(me(t.target)){const s=ht.fromDom(t.target);if(si(s)&&Sm(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Ns(a)}}return x.from(t.target)},Sm=t=>me(t.dom.shadowRoot),lb=(t,s,a,l,u,f,m)=>({target:t,x:s,y:a,stop:l,prevent:u,kill:f,raw:m}),p1=t=>{const s=ht.fromDom(lc(t).getOr(t.target)),a=()=>t.stopPropagation(),l=()=>t.preventDefault(),u=bt(l,a);return lb(s,t.clientX,t.clientY,a,l,u,t)},Tu=(t,s)=>a=>{t(a)&&s(p1(a))},Au=(t,s,a,l,u)=>{const f=Tu(a,l);return t.dom.addEventListener(s,f,u),{unbind:gt(Fr,t,s,f,u)}},v1=(t,s,a,l)=>Au(t,s,a,l,!1),cb=(t,s,a,l)=>Au(t,s,a,l,!0),Fr=(t,s,a,l)=>{t.dom.removeEventListener(s,a,l)},Ou=qe,xr=(t,s,a)=>v1(t,s,Ou,a),xm=(t,s,a)=>cb(t,s,Ou,a),mh=p1,gh=()=>ht.fromDom(document),Fs=(t,s=!1)=>t.dom.focus({preventScroll:s}),Tl=t=>t.dom.blur(),ku=t=>{const s=fr(t).dom;return t.dom===s.activeElement},cc=(t=gh())=>x.from(t.dom.activeElement).map(ht.fromDom),Xr=t=>cc(fr(t)).filter(s=>t.dom.contains(s.dom)),wm=(t,s)=>{Ea(t).each(l=>{l.dom.insertBefore(s.dom,t.dom)})},ub=(t,s)=>{so(t).fold(()=>{Ea(t).each(u=>{ri(u,s)})},l=>{wm(l,s)})},jS=(t,s)=>{hf(t).fold(()=>{ri(t,s)},l=>{t.dom.insertBefore(s.dom,l.dom)})},ri=(t,s)=>{t.dom.appendChild(s.dom)},GS=(t,s,a)=>{ic(t,a).fold(()=>{ri(t,s)},l=>{wm(l,s)})},hh=(t,s)=>{tt(s,a=>{ri(t,a)})},db=(t,s,a)=>{if(B(a)||re(a)||_e(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},cn=(t,s,a)=>{db(t.dom,s,a)},fb=(t,s)=>{const a=t.dom;ze(s,(l,u)=>{db(a,u,l)})},er=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},tr=(t,s)=>x.from(er(t,s)),b1=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},us=(t,s)=>{t.dom.removeAttribute(s)},mb=t=>Fo(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Em=t=>{t.dom.textContent="",tt(da(t),s=>{uc(s)})},uc=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Aa=(t,s)=>ht.fromDom(t.dom.cloneNode(s)),Gc=t=>Aa(t,!1),Tm=t=>Aa(t,!0),_s=(t,s)=>{const l=(s||document).createElement("div");return l.innerHTML=t,da(ht.fromDom(l))},ph=t=>t.dom.innerHTML,pf=(t,s)=>{const l=ua(t).dom,u=ht.fromDom(l.createDocumentFragment()),f=_s(s,l);hh(u,f),Em(t),ri(t,u)},Du=t=>{const s=ht.fromTag("div"),a=ht.fromDom(t.dom.cloneNode(!0));return ri(s,a),ph(s)},y1=t=>{if(Cm(t))return"#shadow-root";{const s=Gc(t);return Du(s)}},mr=t=>new Promise((s,a)=>{const l=()=>{f(),s(t)},u=[xr(t,"load",l),xr(t,"error",()=>{f(),a("Unable to load data from image: "+t.dom.src)})],f=()=>tt(u,m=>m.unbind());t.dom.complete&&l()}),xi=t=>t.style!==void 0&&Ce(t.style.getPropertyValue),Ds=t=>{const s=hd(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return fh(ht.fromDom(s)).fold(()=>a.body.contains(s),Ge(Ds,Eu))},Oa=()=>vf(ht.fromDom(document)),vf=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return ht.fromDom(s)},nr=(t,s,a)=>{if(!B(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);xi(t)&&t.style.setProperty(s,a)},gb=(t,s)=>{xi(t)&&t.style.removeProperty(s)},hn=(t,s,a)=>{const l=t.dom;nr(l,s,a)},Xi=(t,s)=>{const a=t.dom;ze(s,(l,u)=>{nr(a,u,l)})},b=(t,s)=>{const a=t.dom;ze(s,(l,u)=>{l.fold(()=>{gb(a,u)},f=>{nr(a,u,f)})})},O=(t,s)=>{const a=t.dom,u=window.getComputedStyle(a).getPropertyValue(s);return u===""&&!Ds(t)?L(a,s):u},L=(t,s)=>xi(t)?t.style.getPropertyValue(s):"",Y=(t,s)=>{const a=t.dom,l=L(a,s);return x.from(l).filter(u=>u.length>0)},ae=t=>{const s={},a=t.dom;if(xi(a))for(let l=0;l<a.style.length;l++){const u=a.style.item(l);s[u]=a.style[u]}return s},Xe=(t,s,a)=>{const l=ht.fromTag(t);return hn(l,s,a),Y(l,s).isSome()},ft=(t,s)=>{const a=t.dom;gb(a,s),wa(tr(t,"style").map(md),"")&&us(t,"style")},wn=t=>t.dom.offsetWidth,Sn=(t,s)=>{const a=(p,v)=>{if(!_e(v)&&!v.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+v);const C=p.dom;xi(C)&&(C.style[t]=v+"px")},l=p=>{const v=s(p);if(v<=0||v===null){const C=O(p,t);return parseFloat(C)||0}return v},u=l,f=(p,v)=>Fo(v,(C,E)=>{const D=O(p,E),I=D===void 0?0:parseInt(D,10);return isNaN(I)?C:C+I},0);return{set:a,get:l,getOuter:u,aggregate:f,max:(p,v,C)=>{const E=f(p,C);return v>E?v-E:0}}},Jt=Sn("height",t=>{const s=t.dom;return Ds(t)?s.getBoundingClientRect().height:s.offsetHeight}),Vn=t=>Jt.get(t),os=t=>Jt.getOuter(t),Ji=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],l=Jt.max(t,s,a);hn(t,"max-height",l+"px")},Jr=t=>t.offsetWidth<=0&&t.offsetHeight<=0,KS=t=>!Jr(t.dom),hb=Sn("width",t=>t.dom.offsetWidth),sO=Sn("width",t=>{const s=t.dom;return Ds(t)?s.getBoundingClientRect().width:s.offsetWidth}),pb=(t,s)=>hb.set(t,s),or=t=>hb.get(t),vh=t=>hb.getOuter(t),vb=t=>sO.getOuter(t),YS=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],l=hb.max(t,s,a);hn(t,"max-width",l+"px")},XS=(t,s)=>({left:t,top:s,translate:(l,u)=>XS(t+l,s+u)}),ws=XS,HK=t=>{const s=t.getBoundingClientRect();return ws(s.left,s.top)},bb=(t,s)=>t!==void 0?t:s!==void 0?s:0,dc=t=>{const s=t.dom.ownerDocument,a=s.body,l=s.defaultView,u=s.documentElement;if(a===t.dom)return ws(a.offsetLeft,a.offsetTop);const f=bb(l==null?void 0:l.pageYOffset,u.scrollTop),m=bb(l==null?void 0:l.pageXOffset,u.scrollLeft),p=bb(u.clientTop,a.clientTop),v=bb(u.clientLeft,a.clientLeft);return C1(t).translate(m-v,f-p)},C1=t=>{const s=t.dom,l=s.ownerDocument.body;return l===s?ws(l.offsetLeft,l.offsetTop):Ds(t)?HK(s):ws(0,0)},fa=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,l=s.body.scrollTop||s.documentElement.scrollTop;return ws(a,l)},JS=(t,s,a)=>{const u=(a!==void 0?a.dom:document).defaultView;u&&u.scrollTo(t,s)},NB=((t,s)=>{const a=f=>{if(!t(f))throw new Error("Can only get "+s+" value of a "+s+" node");return l(f).getOr("")},l=f=>t(f)?x.from(f.dom.nodeValue):x.none();return{get:a,getOption:l,set:(f,m)=>{if(!t(f))throw new Error("Can only set raw "+s+" value of a "+s+" node");f.dom.nodeValue=m}}})(hd,"text"),qS=t=>NB.get(t),S1=(t,s)=>a=>rO(a)==="rtl"?s:t,rO=t=>O(t,"direction")==="rtl"?"rtl":"ltr",yb=(t,s)=>{const a=er(t,s);return a===void 0||a===""?[]:a.split(" ")},IB=(t,s,a)=>{const u=yb(t,s).concat([a]);return cn(t,s,u.join(" ")),!0},ex=(t,s,a)=>{const l=qn(yb(t,s),u=>u!==a);return l.length>0?cn(t,s,l.join(" ")):us(t,s),!1};var Cb=(t,s,a,l,u)=>t(a,l)?x.some(a):Ce(u)&&u(a)?x.none():s(a,l,u);const bh=(t,s,a)=>{let l=t.dom;const u=Ce(a)?a:at;for(;l.parentNode;){l=l.parentNode;const f=ht.fromDom(l);if(s(f))return x.some(f);if(u(f))break}return x.none()},aO=(t,s,a)=>Cb((u,f)=>f(u),bh,t,s,a),iO=(t,s)=>{const a=t.dom;return a.parentNode?Sb(ht.fromDom(a.parentNode),l=>!vo(t,l)&&s(l)):x.none()},Sb=(t,s)=>{const a=u=>s(ht.fromDom(u));return Ft(t.dom.childNodes,a).map(ht.fromDom)},BB=(t,s)=>{const a=l=>{for(let u=0;u<l.childNodes.length;u++){const f=ht.fromDom(l.childNodes[u]);if(s(f))return x.some(f);const m=a(l.childNodes[u]);if(m.isSome())return m}return x.none()};return a(t.dom)},LB=t=>c1(t),fc=(t,s,a)=>bh(t,l=>gd(l,s),a),bd=(t,s)=>iO(t,a=>gd(a,s)),Mu=(t,s)=>Sb(t,a=>gd(a,s)),Ro=(t,s)=>c1(s,t),Ru=(t,s,a)=>Cb((u,f)=>gd(u,f),fc,t,s,a),tx=(t,s)=>{t.dom.checked=s},x1=t=>t.dom.checked,yd=t=>t.dom.classList!==void 0,bf=t=>yb(t,"class"),yh=(t,s)=>IB(t,"class",s),nx=(t,s)=>ex(t,"class",s),lO=(t,s)=>Kt(bf(t),s)?nx(t,s):yh(t,s),Es=(t,s)=>{yd(t)?t.dom.classList.add(s):yh(t,s)},cO=t=>{(yd(t)?t.dom.classList:bf(t)).length===0&&us(t,"class")},Ko=(t,s)=>{yd(t)?t.dom.classList.remove(s):nx(t,s),cO(t)},uO=(t,s)=>{const a=yd(t)?t.dom.classList.toggle(s):lO(t,s);return cO(t),a},Qr=(t,s)=>yd(t)&&t.dom.classList.contains(s),Am=(t,s)=>{tt(s,a=>{Es(t,a)})},Qi=(t,s)=>{tt(s,a=>{Ko(t,a)})},FB=(t,s)=>{tt(s,a=>{uO(t,a)})},_B=(t,s)=>Wr(s,a=>Qr(t,a)),$B=t=>{const s=t.dom.classList,a=new Array(s.length);for(let l=0;l<s.length;l++){const u=s.item(l);u!==null&&(a[l]=u)}return a},Cd=t=>yd(t)?$B(t):bf(t),HB=t=>t.dom.textContent,mc=t=>t.dom.value,Om=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},ox=(t,s,a)=>qn(El(t,a),s),Yo=(t,s)=>oh(s,t),sx=(t,s,a)=>aO(t,s,a).isSome(),w1=(t,s,a)=>Ru(t,s,a).isSome(),xb=t=>Ce(t)?t:at,dO=(t,s,a)=>{let l=t.dom;const u=xb(a);for(;l.parentNode;){l=l.parentNode;const f=ht.fromDom(l),m=s(f);if(m.isSome())return m;if(u(f))break}return x.none()},E1=(t,s,a)=>{const l=s(t),u=xb(a);return l.orThunk(()=>u(t)?x.none():dO(t,s,u))},Ch={create:(t,s,a,l)=>({start:t,soffset:s,finish:a,foffset:l})},rx=Pr.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),VB=(t,s,a,l)=>t.fold(s,a,l),zB=t=>t.fold(lt,lt,lt),UB=rx.before,ZB=rx.on,zK=rx.after,fO={before:UB,on:ZB,after:zK,cata:VB,getStart:zB},Sh=Pr.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),WB=t=>Sh.exact(t.start,t.soffset,t.finish,t.foffset),jB=t=>t.match({domRange:s=>ht.fromDom(s.startContainer),relative:(s,a)=>fO.getStart(s),exact:(s,a,l,u)=>s}),GB=Sh.domRange,KB=Sh.relative,YB=Sh.exact,Sd=t=>{const s=jB(t);return wl(s)},wb=Ch.create,T1={domRange:GB,relative:KB,exact:YB,exactFromRange:WB,getWin:Sd,range:wb},XB=t=>x.from(t.getSelection()),mO=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return x.some(Ch.create(ht.fromDom(s.startContainer),s.startOffset,ht.fromDom(a.endContainer),a.endOffset))}else return x.none()},JB=t=>{if(t.anchorNode===null||t.focusNode===null)return mO(t);{const s=ht.fromDom(t.anchorNode),a=ht.fromDom(t.focusNode);return WS(s,t.anchorOffset,a,t.focusOffset)?x.some(Ch.create(s,t.anchorOffset,a,t.focusOffset)):mO(t)}},QB=t=>XB(t).filter(s=>s.rangeCount>0).bind(JB),gO=(t,s)=>{const a=hs(t,s);return Ve(a)},qB=(t,s)=>{const a=hs(t,s);return dt(a)},xh={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},e7=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),l="\\.",u=p=>`(?:${p})?`,m=`[+-]?(?:${["Infinity",t+l+u(t)+u(a),l+t+u(a),t+u(a)].join("|")})`;return new RegExp(`^(${m})(.*)$`)})(),t7=(t,s)=>fo(s,a=>fo(xh[a],l=>t===l)),Eb=(t,s)=>x.from(e7.exec(t)).bind(l=>{const u=Number(l[1]),f=l[2];return t7(f,s)?x.some({value:u,unit:f}):x.none()}),n7=(t,s)=>Eb(t,s).map(({value:a,unit:l})=>a+l),Tb=t=>{const s=t===void 0?window:t;return ja().browser.isFirefox()?x.none():x.from(s.visualViewport)},hO=(t,s,a,l)=>({x:t,y:s,width:a,height:l,right:t+a,bottom:s+l}),Ab=t=>{const s=t===void 0?window:t,a=s.document,l=fa(ht.fromDom(a));return Tb(s).fold(()=>{const u=s.document.documentElement,f=u.clientWidth,m=u.clientHeight;return hO(l.left,l.top,f,m)},u=>hO(Math.max(u.pageLeft,l.left),Math.max(u.pageTop,l.top),u.width,u.height))},pO=(t,s)=>t.view(s).fold(te([]),l=>{const u=t.owner(l),f=pO(t,u);return[l].concat(f)}),o7=(t,s)=>{const a=s.owner(t),l=pO(s,a);return x.some(l)};var vO=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?x.none():x.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(ht.fromDom)},owner:t=>ua(t)});const A1=t=>{const s=gh(),a=fa(s);return o7(t,vO).fold(gt(dc,t),u=>{const f=C1(t),m=is(u,(p,v)=>{const C=C1(v);return{left:p.left+C.left,top:p.top+C.top}},{left:0,top:0});return ws(m.left+f.left+a.left,m.top+f.top+a.top)})},_r=(t,s,a)=>({point:t,width:s,height:a}),s7=(t,s,a,l)=>({x:t,y:s,width:a,height:l}),$s=(t,s,a,l)=>({x:t,y:s,width:a,height:l,right:t+a,bottom:s+l}),$r=t=>{const s=dc(t),a=vh(t),l=os(t);return $s(s.left,s.top,a,l)},km=t=>{const s=A1(t),a=vh(t),l=os(t);return $s(s.left,s.top,a,l)},Ob=(t,s)=>{const a=Math.max(t.x,s.x),l=Math.max(t.y,s.y),u=Math.min(t.right,s.right),f=Math.min(t.bottom,s.bottom),m=u-a,p=f-l;return $s(a,l,m,p)},r7=(t,s)=>Fo(s,(a,l)=>Ob(a,l),t),ma=()=>Ab(window),yf=(t,s)=>vo(t.element,s.event.target),wh=t=>(wa(Y(t,"position"),"fixed")?x.none():dh(t)).orThunk(()=>{const l=ht.fromTag("span");return Ea(t).bind(u=>{ri(u,l);const f=dh(l);return uc(l),f})}),It=t=>wh(t).map(dc).getOrThunk(()=>ws(0,0)),Pu=(t,s)=>{const a=x.from(er(t,"id")).getOrThunk(()=>{const l=yt("aria");return cn(s,"id",l),l});cn(t,"aria-describedby",a)},a7=t=>{us(t,"aria-describedby")};var ka;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(ka||(ka={}));const Al=(t,s,a)=>t.stype===ka.Error?s(t.serror):a(t.svalue),kb=t=>{const s=[],a=[];return tt(t,l=>{Al(l,u=>a.push(u),u=>s.push(u))}),{values:s,errors:a}},i7=(t,s)=>t.stype===ka.Error?{stype:ka.Error,serror:s(t.serror)}:t,Dm=(t,s)=>t.stype===ka.Value?{stype:ka.Value,svalue:s(t.svalue)}:t,l7=(t,s)=>t.stype===ka.Value?s(t.svalue):t,Nu=(t,s)=>t.stype===ka.Error?s(t.serror):t,ax=t=>({stype:ka.Value,svalue:t}),Db=t=>({stype:ka.Error,serror:t}),js={fromResult:t=>t.fold(Db,ax),toResult:t=>Al(t,xn.error,xn.value),svalue:ax,partition:kb,serror:Db,bind:l7,bindError:Nu,map:Dm,mapError:i7,fold:Al},Iu=t=>k(t)&&Me(t).length>100?" removed due to size":JSON.stringify(t,null,2),O1=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:te("... (only showing first ten failures)")}]):t;return Le(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Mm=(t,s)=>js.serror([{path:t,getErrorInfo:s}]),Ts=(t,s,a)=>Mm(t,()=>'Could not find valid *required* value for "'+s+'" in '+Iu(a)),bO=(t,s)=>Mm(t,()=>'Choice schema did not contain choice key: "'+s+'"'),c7=(t,s,a)=>Mm(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Iu(s)),gc=(t,s)=>Mm(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),ss=(t,s)=>Mm(t,te(s)),Cf=t=>{const s=(l,u)=>js.bindError(t(u),f=>ss(l,f)),a=te("val");return{extract:s,toString:a}},k1=Cf(js.svalue),hc=te(k1),Ol=(t,s)=>Cf(a=>{const l=typeof a;return t(a)?js.svalue(a):js.serror(`Expected type: ${s} but got: ${l}`)}),Mb=Ol(_e,"number"),Gs=Ol(B,"string"),Rb=Ol(re,"boolean"),Pb=Ol(Ce,"function"),yO=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>yO(t[s]));default:return!1}},u7=Cf(t=>yO(t)?js.svalue(t):js.serror("Expected value to be acceptable for sending via postMessage")),Kc=()=>({tag:"required",process:{}}),Nb=t=>({tag:"defaultedThunk",process:t}),Ib=t=>Nb(te(t)),ix=()=>({tag:"option",process:{}}),lx=t=>({tag:"mergeWithThunk",process:t}),cx=t=>lx(te(t)),Bu=(t,s,a,l)=>({tag:"field",key:t,newKey:s,presence:a,prop:l}),Da=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Bb=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},CO=(t,s)=>t.length>0?js.svalue(ho(s,lf.apply(void 0,t))):js.svalue(s),Sf=t=>bt(js.serror,Yt)(t),xO={consolidateObj:(t,s)=>{const a=js.partition(t);return a.errors.length>0?Sf(a.errors):CO(a.values,s)},consolidateArr:t=>{const s=js.partition(t);return s.errors.length>0?Sf(s.errors):js.svalue(s.values)}},f7=(t,s,a,l)=>Be(s,a).fold(()=>Ts(t,a,s),l),D1=(t,s,a,l)=>{const u=Be(t,s).getOrThunk(()=>a(t));return l(u)},m7=(t,s,a)=>a(Be(t,s)),ux=(t,s,a,l)=>{const u=Be(t,s).map(f=>f===!0?a(t):f);return l(u)},wO=(t,s,a,l,u)=>{const f=p=>u.extract(s.concat([l]),p),m=p=>p.fold(()=>js.svalue(x.none()),v=>{const C=u.extract(s.concat([l]),v);return js.map(C,x.some)});switch(t.tag){case"required":return f7(s,a,l,f);case"defaultedThunk":return D1(a,l,t.process,f);case"option":return m7(a,l,m);case"defaultedOptionThunk":return ux(a,l,t.process,m);case"mergeWithThunk":return D1(a,l,te({}),p=>{const v=ho(t.process(a),p);return f(v)})}},EO=(t,s,a)=>{const l={},u=[];for(const f of a)Bb(f,(m,p,v,C)=>{const E=wO(v,t,s,m,C);js.fold(E,D=>{u.push(...D)},D=>{l[p]=D})},(m,p)=>{l[m]=p(s)});return u.length>0?js.serror(u):js.svalue(l)},dx=t=>({extract:(l,u)=>t().extract(l,u),toString:()=>t().toString()}),g7=t=>Me(xo(t,me)),qi=t=>{const s=rn(t),a=is(t,(u,f)=>Bb(f,m=>ho(u,{[m]:!0}),te(u)),{});return{extract:(u,f)=>{const m=re(f)?[]:g7(f),p=qn(m,v=>!Lo(a,v));return p.length===0?s.extract(u,f):gc(u,p)},toString:s.toString}},rn=t=>({extract:(l,u)=>EO(l,u,t),toString:()=>`obj{
`+Le(t,u=>Bb(u,(f,m,p,v)=>f+" -> "+v.toString(),(f,m)=>"state("+f+")")).join(`
`)+"}"}),Lu=t=>({extract:(l,u)=>{const f=Le(u,(m,p)=>t.extract(l.concat(["["+p+"]"]),m));return xO.consolidateArr(f)},toString:()=>"array("+t.toString()+")"}),Lb=(t,s)=>{const a=s!==void 0?s:lt;return{extract:(f,m)=>{const p=[];for(const v of t){const C=v.extract(f,m);if(C.stype===ka.Value)return{stype:ka.Value,svalue:a(C.svalue)};p.push(C)}return xO.consolidateArr(p)},toString:()=>"oneOf("+Le(t,f=>f.toString()).join(", ")+")"}},h7=(t,s)=>{const a=(f,m)=>Lu(Cf(t)).extract(f,m);return{extract:(f,m)=>{const p=Me(m),v=a(f,p);return js.bind(v,C=>{const E=Le(C,D=>Bu(D,D,Kc(),s));return rn(E).extract(f,m)})},toString:()=>"setOf("+s.toString()+")"}},fx=(t,s)=>{const a=we(s);return{extract:(f,m)=>a().extract(f,m),toString:()=>a().toString()}},Eh=bt(Lu,rn),mx=(t,s,a,l)=>Be(a,l).fold(()=>c7(t,a,l),f=>f.extract(t.concat(["branch: "+l]),s)),pc=(t,s)=>({extract:(u,f)=>Be(f,t).fold(()=>bO(u,t),p=>mx(u,f,s,p)),toString:()=>"chooseOn("+t+"). Possible values: "+Me(s)}),p7=()=>Lu(k1),Rm=t=>Cf(s=>t(s).fold(js.serror,js.svalue)),TO=(t,s)=>h7(a=>js.fromResult(t(a)),s),AO=(t,s,a)=>{const l=s.extract([t],a);return js.mapError(l,u=>({input:a,errors:u}))},ps=(t,s,a)=>js.toResult(AO(t,s,a)),kl=t=>t.fold(s=>{throw new Error(Pm(s))},lt),ai=(t,s,a)=>kl(ps(t,s,a)),Pm=t=>`Errors: 
`+O1(t.errors).join(`
`)+`

Input object: `+Iu(t.input),wi=(t,s)=>pc(t,ot(s,rn)),gx=(t,s)=>fx(t,s),qr=Bu,Ma=Da,hx=t=>Rm(s=>Kt(t,s)?xn.value(s):xn.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),We=t=>qr(t,t,Kc(),hc()),el=(t,s)=>qr(t,t,Kc(),s),OO=t=>el(t,Mb),gr=t=>el(t,Gs),tl=(t,s)=>qr(t,t,Kc(),hx(s)),vc=t=>el(t,Pb),Fb=(t,s)=>qr(t,t,ix(),Cf(a=>js.serror("The field: "+t+" is forbidden. "+s))),bc=(t,s)=>qr(t,t,Kc(),rn(s)),kO=(t,s)=>qr(t,t,Kc(),Eh(s)),Ei=(t,s)=>qr(t,t,Kc(),Lu(s)),uo=t=>qr(t,t,ix(),hc()),ii=(t,s)=>qr(t,t,ix(),s),M1=t=>ii(t,Mb),Hs=t=>ii(t,Gs),px=(t,s)=>ii(t,hx(s)),Yc=t=>ii(t,Pb),vx=(t,s)=>ii(t,Lu(s)),Ti=(t,s)=>ii(t,rn(s)),DO=(t,s)=>ii(t,qi(s)),ve=(t,s)=>qr(t,t,Ib(s),hc()),yc=(t,s,a)=>qr(t,t,Ib(s),a),MO=(t,s)=>yc(t,s,Mb),$o=(t,s)=>yc(t,s,Gs),As=(t,s,a)=>yc(t,s,hx(a)),ea=(t,s)=>yc(t,s,Rb),Zo=(t,s)=>yc(t,s,Pb),v7=(t,s)=>yc(t,s,u7),xf=(t,s,a)=>yc(t,s,Lu(a)),_b=(t,s,a)=>yc(t,s,rn(a)),RO=(t,s)=>{const a={};return ze(t,(l,u)=>{Kt(s,u)||(a[u]=l)}),a},bx=(t,s)=>({[t]:s}),b7=t=>{const s={};return tt(t,a=>{s[a.key]=a.value}),s},PO=(t,s)=>RO(t,s),Nm=(t,s)=>bx(t,s),Th=t=>b7(t),yx=(t,s)=>t.length===0?xn.value(s):xn.value(ho(s,lf.apply(void 0,t))),y7=t=>xn.error(Yt(t)),C7=(t,s)=>{const a=Wc(t);return a.errors.length>0?y7(a.errors):yx(a.values,s)},ta=te,xd=ta("touchstart"),wf=ta("touchmove"),Xc=ta("touchend"),Cc=ta("touchcancel"),Ai=ta("mousedown"),R1=ta("mousemove"),P1=ta("mouseout"),$b=ta("mouseup"),Sc=ta("mouseover"),ga=ta("focusin"),NO=ta("focusout"),Jc=ta("keydown"),Cx=ta("keyup"),wd=ta("input"),Im=ta("change"),Ef=ta("click"),S7=ta("transitioncancel"),Ah=ta("transitionend"),x7=ta("transitionstart"),IO=ta("selectstart"),Vs=t=>te("alloy."+t),N1={tap:Vs("tap")},Fu=Vs("focus"),I1=Vs("blur.post"),Sx=Vs("paste.post"),Bm=Vs("receive"),nl=Vs("execute"),Oh=Vs("focus.item"),Lm=N1.tap,w7=Vs("longpress"),Hb=Vs("sandbox.close"),B1=Vs("typeahead.cancel"),Fm=Vs("system.init"),E7=Vs("system.touchmove"),L1=Vs("system.touchend"),xx=Vs("system.scroll"),Qc=Vs("system.resize"),Dl=Vs("system.attached"),_u=Vs("system.detached"),Ed=Vs("system.dismissRequested"),BO=Vs("system.repositionRequested"),Tf=Vs("focusmanager.shifted"),Vb=Vs("slotcontainer.visibility"),_m=Vs("system.external.element.scroll"),wx=Vs("change.tab"),LO=Vs("dismiss.tab"),zb=Vs("highlight"),Ex=Vs("dehighlight"),Co=t=>y1(t),FO="unknown";var kh;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(kh||(kh={}));const Tx=Dt({}),Ub=(t,s)=>{const a=[],l=new Date().getTime();return{logEventCut:(u,f,m)=>{a.push({outcome:"cut",target:f,purpose:m})},logEventStopped:(u,f,m)=>{a.push({outcome:"stopped",target:f,purpose:m})},logNoParent:(u,f,m)=>{a.push({outcome:"no-parent",target:f,purpose:m})},logEventNoHandlers:(u,f)=>{a.push({outcome:"no-handlers-left",target:f})},logEventResponse:(u,f,m)=>{a.push({outcome:"response",purpose:m,target:f})},write:()=>{const u=new Date().getTime();Kt(["mousemove","mouseover","mouseout",Fm()],t)||console.log(t,{event:t,time:u-l,target:s.dom,sequence:Le(a,f=>Kt(["cut","stopped","response"],f.outcome)?"{"+f.purpose+"} "+f.outcome+" at ("+Co(f.target)+")":f.outcome)})}}},_O=(t,s,a)=>{switch(Be(Tx.get(),t).orThunk(()=>{const u=Me(Tx.get());return Tn(u,f=>t.indexOf(f)>-1?x.some(Tx.get()[f]):x.none())}).getOr(kh.NORMAL)){case kh.NORMAL:return a(F1());case kh.LOGGING:{const u=Ub(t,s),f=a(u);return u.write(),f}case kh.STOP:return!0}},Td=["alloy/data/Fields","alloy/debugging/Debugging"],T7=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return Ft(s,a=>a.indexOf("alloy")>0&&!fo(Td,l=>a.indexOf(l)>-1)).getOr(FO)}else return FO},A7={logEventCut:q,logEventStopped:q,logNoParent:q,logEventNoHandlers:q,logEventResponse:q,write:q},Ax=(t,s,a)=>_O(t,s,a),F1=te(A7),Zb=te([We("menu"),We("selectedMenu")]),Wb=te([We("item"),We("selectedItem")]);te(rn(Wb().concat(Zb())));const jK=te(rn(Wb())),GK=bc("initSize",[We("numColumns"),We("numRows")]),KK=()=>el("markers",jK()),Ox=()=>bc("markers",[We("backgroundMenu")].concat(Zb()).concat(Wb())),Dh=t=>bc("markers",Le(t,We)),kx=(t,s,a)=>(T7(),qr(s,s,a,Rm(l=>xn.value((...u)=>l.apply(void 0,u))))),to=t=>kx("onHandler",t,Ib(q)),Ks=t=>kx("onKeyboardHandler",t,Ib(x.none)),hr=t=>kx("onHandler",t,Kc()),$m=t=>kx("onKeyboardHandler",t,Kc()),Do=(t,s)=>Ma(t,te(s)),Hm=t=>Ma(t,lt),Mh=te(GK),_1=(t,s,a)=>{const l=a.toString(),u=l.indexOf(")")+1,f=l.indexOf("("),m=l.substring(f+1,u-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Vm(m.slice(0,1).concat(m.slice(3)))}),t},Vm=t=>Le(t,s=>Uo(s,"/*")?s.substring(0,s.length-2):s),jb=(t,s)=>{const a=t.toString(),l=a.indexOf(")")+1,u=a.indexOf("("),f=a.substring(u+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Vm(f)}),t},$O=(t,s)=>{const a=s.toString(),l=a.indexOf(")")+1,u=a.indexOf("("),f=a.substring(u+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Vm(f.slice(1))}),t},HO=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...f)=>{a=setTimeout(()=>{t.apply(null,f),a=null},s)}}},Dx=5,VO=400,Mx=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?x.none():x.some(s.touches[0])},O7=(t,s)=>{const a=Math.abs(t.clientX-s.x),l=Math.abs(t.clientY-s.y);return a>Dx||l>Dx},k7=t=>{const s=Gn(),a=Dt(!1),l=HO(C=>{t.triggerEvent(w7(),C),a.set(!0)},VO),u=C=>(Mx(C).each(E=>{l.cancel();const D={x:E.clientX,y:E.clientY,target:C.target};l.schedule(C),a.set(!1),s.set(D)}),x.none()),f=C=>(l.cancel(),Mx(C).each(E=>{s.on(D=>{O7(E,D)&&s.clear()})}),x.none()),m=C=>{l.cancel();const E=D=>vo(D.target,C.target);return s.get().filter(E).map(D=>a.get()?(C.prevent(),!1):t.triggerEvent(Lm(),C))},p=Th([{key:xd(),value:u},{key:wf(),value:f},{key:Xc(),value:m}]);return{fireIfReady:(C,E)=>Be(p,E).bind(D=>D(C))}};var Af;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Af||(Af={}));const Rx="placeholder",$u=Pr.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Px=t=>_t(t,"uiType"),D7=(t,s,a,l)=>t.exists(u=>u!==a.owner)?$u.single(!0,te(a)):Be(l,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+Me(l)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},u=>u.replace()),M7=(t,s,a,l)=>Px(a)&&a.uiType===Rx?D7(t,s,a,l):$u.single(!1,te(a)),zO=(t,s,a,l)=>M7(t,s,a,l).fold((f,m)=>{const p=Px(a)?m(s,a.config,a.validated):m(s),v=Be(p,"components").getOr([]),C=ke(v,E=>zO(t,s,E,l));return[{...p,components:C}]},(f,m)=>{if(Px(a)){const p=m(s,a.config,a.validated);return a.validated.preprocess.getOr(lt)(p)}else return m(s)}),R7=(t,s,a,l)=>ke(a,u=>zO(t,s,u,l)),P7=(t,s)=>{let a=!1;const l=()=>a,u=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},f=()=>s.fold((m,p)=>m,(m,p)=>m);return{name:te(t),required:f,used:l,replace:u}},Rh=(t,s,a,l)=>{const u=ot(l,(m,p)=>P7(p,m)),f=R7(t,s,a,u);return ze(u,m=>{if(m.used()===!1&&m.required())throw new Error("Placeholder: "+m.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),f},UO=$u.single,zm=$u.multiple,Nx=te(Rx),Ph=Pr.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Ad=ve("factory",{sketch:lt}),Ix=ve("schema",[]),Of=We("name"),Nh=qr("pname","pname",Nb(t=>"<alloy."+yt(t.name)+">"),hc()),N7=Ma("schema",()=>[uo("preprocess")]),Gb=ve("defaults",te({})),Od=ve("overrides",te({})),kf=rn([Ad,Ix,Of,Nh,Gb,Od]),I7=rn([Ad,Ix,Of,Gb,Od]),wr=rn([Ad,Ix,Of,Nh,Gb,Od]),Kb=rn([Ad,N7,Of,We("unit"),Nh,Gb,Od]),Oi=t=>t.fold(x.some,x.none,x.some,x.some),ZO=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},B7=t=>t.fold(lt,lt,lt,lt),kd=(t,s)=>a=>{const l=ai("Converting part type",s,a);return t(l)},sr=kd(Ph.required,kf),ha=kd(Ph.external,I7),Ys=kd(Ph.optional,wr),$1=kd(Ph.group,Kb),Bx=te("entirety");var Lx=Object.freeze({__proto__:null,required:sr,external:ha,optional:Ys,group:$1,asNamedPart:Oi,name:ZO,asCommon:B7,original:Bx});const H1=(t,s,a,l)=>ho(s.defaults(t,a,l),a,{uid:t.partUids[s.name]},s.overrides(t,a,l)),L7=(t,s,a)=>{const l={},u={};return tt(a,f=>{f.fold(m=>{l[m.pname]=UO(!0,(p,v,C)=>m.factory.sketch(H1(p,m,v,C)))},m=>{const p=s.parts[m.name];u[m.name]=te(m.factory.sketch(H1(s,m,p[Bx()]),p))},m=>{l[m.pname]=UO(!1,(p,v,C)=>m.factory.sketch(H1(p,m,v,C)))},m=>{l[m.pname]=zm(!0,(p,v,C)=>{const E=p[m.name];return Le(E,D=>m.factory.sketch(ho(m.defaults(p,D,C),D,m.overrides(p,D))))})})}),{internals:te(l),externals:te(u)}},Ih=(t,s)=>{const a={};return tt(s,l=>{Oi(l).each(u=>{const f=Yb(t,u.pname);a[u.name]=m=>{const p=ai("Part: "+u.name+" in "+t,rn(u.schema),m);return{...f,config:m,validated:p}}})}),a},Yb=(t,s)=>({uiType:Nx(),owner:t,name:s}),Fx=(t,s,a)=>({uiType:Nx(),owner:t,name:s,config:a,validated:{}}),Xb=t=>ke(t,s=>s.fold(x.none,x.some,x.none,x.none).map(a=>bc(a.name,a.schema.concat([Hm(Bx())]))).toArray()),_x=t=>Le(t,ZO),Df=(t,s,a)=>L7(t,s,a),Dd=(t,s,a)=>Rh(x.some(t),s,s.components,a),Po=(t,s,a)=>{const l=s.partUids[a];return t.getSystem().getByUid(l).toOptional()},Mf=(t,s,a)=>Po(t,s,a).getOrDie("Could not find part: "+a),$x=(t,s,a)=>{const l={},u=s.partUids,f=t.getSystem();return tt(a,m=>{l[m]=te(f.getByUid(u[m]))}),l},Bh=(t,s)=>{const a=t.getSystem();return ot(s.partUids,(l,u)=>te(a.getByUid(l)))},Lh=t=>Me(t.partUids),Hx=(t,s,a)=>{const l={},u=s.partUids,f=t.getSystem();return tt(a,m=>{l[m]=te(f.getByUid(u[m]).getOrDie())}),l},WO=(t,s)=>{const a=_x(s);return Th(Le(a,l=>({key:l,value:t+"-"+l})))},Jb=t=>qr("partUids","partUids",lx(s=>WO(s.uid,t)),hc());var F7=Object.freeze({__proto__:null,generate:Ih,generateOne:Fx,schemas:Xb,names:_x,substitutes:Df,components:Dd,defaultUids:WO,defaultUidsSchema:Jb,getAllParts:Bh,getAllPartNames:Lh,getPart:Po,getPartOrDie:Mf,getParts:$x,getPartsOrDie:Hx});const Qb=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],pa=(t,s,a,l=1)=>{const u=t*l,f=s*l,m=v=>Be(a,v).getOr([]),p=(v,C,E)=>{const D=Nt(Qb,E);return{offset:ws(v,C),classesOn:ke(E,m),classesOff:ke(D,m)}};return{southeast:()=>p(-t,s,["top","alignLeft"]),southwest:()=>p(t,s,["top","alignRight"]),south:()=>p(-t/2,s,["top","alignCentre"]),northeast:()=>p(-t,-s,["bottom","alignLeft"]),northwest:()=>p(t,-s,["bottom","alignRight"]),north:()=>p(-t/2,-s,["bottom","alignCentre"]),east:()=>p(t,-s/2,["valignCentre","left"]),west:()=>p(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>p(u,f,["top","alignLeft","inset"]),insetNorthwest:()=>p(-u,f,["top","alignRight","inset"]),insetNorth:()=>p(-u/2,f,["top","alignCentre","inset"]),insetSoutheast:()=>p(u,-f,["bottom","alignLeft","inset"]),insetSouthwest:()=>p(-u,-f,["bottom","alignRight","inset"]),insetSouth:()=>p(-u/2,-f,["bottom","alignCentre","inset"]),insetEast:()=>p(-u,-f/2,["valignCentre","right","inset"]),insetWest:()=>p(u,-f/2,["valignCentre","left","inset"])}},qb=()=>pa(0,0,{}),na=(t,s,a,l,u,f,m,p=!1)=>({x:t,y:s,bubble:a,direction:l,placement:u,restriction:f,label:`${m}-${u}`,alwaysFit:p}),Md=Pr.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),_7=(t,s,a,l,u,f,m,p,v)=>t.fold(s,a,l,u,f,m,p,v),$7=(t,s,a,l)=>t.fold(s,s,l,l,s,l,a,a),jO=(t,s,a,l)=>t.fold(s,l,s,l,a,a,s,l),ey=Md.southeast,Vx=Md.southwest,zx=Md.northeast,Ux=Md.northwest,Zx=Md.south,GO=Md.north,KO=Md.east,xc=Md.west,H7=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Er=(t,s)=>Qs(["left","right","top","bottom"],a=>Be(s,a).map(l=>H7(t,l))),V7=(t,s,a)=>{const l=(v,C)=>s[v].map(E=>{const D=v==="top"||v==="bottom",I=D?a.top:a.left,W=(v==="left"||v==="top"?Math.max:Math.min)(E,C)+I;return D?qs(W,t.y,t.bottom):qs(W,t.x,t.right)}).getOr(C),u=l("left",t.x),f=l("top",t.y),m=l("right",t.right),p=l("bottom",t.bottom);return $s(u,f,m-u,p-f)},Rf="layout",YO=t=>t.x,Wx=(t,s)=>t.x+t.width/2-s.width/2,jx=(t,s)=>t.x+t.width-s.width,Gx=(t,s)=>t.y-s.height,ty=t=>t.y+t.height,XO=(t,s)=>t.y+t.height/2-s.height/2,V1=t=>t.x+t.width,z7=(t,s)=>t.x-s.width,Ms=(t,s,a)=>na(YO(t),ty(t),a.southeast(),ey(),"southeast",Er(t,{left:1,top:3}),Rf),zs=(t,s,a)=>na(jx(t,s),ty(t),a.southwest(),Vx(),"southwest",Er(t,{right:0,top:3}),Rf),Hr=(t,s,a)=>na(YO(t),Gx(t,s),a.northeast(),zx(),"northeast",Er(t,{left:1,bottom:2}),Rf),pr=(t,s,a)=>na(jx(t,s),Gx(t,s),a.northwest(),Ux(),"northwest",Er(t,{right:0,bottom:2}),Rf),rr=(t,s,a)=>na(Wx(t,s),Gx(t,s),a.north(),GO(),"north",Er(t,{bottom:2}),Rf),Us=(t,s,a)=>na(Wx(t,s),ty(t),a.south(),Zx(),"south",Er(t,{top:3}),Rf),ny=(t,s,a)=>na(V1(t),XO(t,s),a.east(),KO(),"east",Er(t,{left:0}),Rf),z1=(t,s,a)=>na(z7(t,s),XO(t,s),a.west(),xc(),"west",Er(t,{right:1}),Rf),JO=()=>[Ms,zs,Hr,pr,Us,rr,ny,z1],QO=()=>[zs,Ms,pr,Hr,Us,rr,ny,z1],Kx=()=>[Hr,pr,Ms,zs,rr,Us],Rd=()=>[pr,Hr,zs,Ms,rr,Us],Pd=()=>[Ms,zs,Hr,pr,Us,rr],Yx=()=>[zs,Ms,pr,Hr,Us,rr],Ie="data-alloy-placement",oy=(t,s)=>{cn(t,Ie,s)},qO=t=>tr(t,Ie),U7=t=>us(t,Ie),Hu="layout-inset",Ml=t=>t.x,Xx=(t,s)=>t.x+t.width/2-s.width/2,sy=(t,s)=>t.x+t.width-s.width,ry=t=>t.y,U1=(t,s)=>t.y+t.height-s.height,ek=(t,s)=>t.y+t.height/2-s.height/2,Z1=(t,s,a)=>na(sy(t,s),U1(t,s),a.insetSouthwest(),Ux(),"southwest",Er(t,{right:0,bottom:3}),Hu),ay=(t,s,a)=>na(Ml(t),U1(t,s),a.insetSoutheast(),zx(),"southeast",Er(t,{left:1,bottom:3}),Hu),Fh=(t,s,a)=>na(sy(t,s),ry(t),a.insetNorthwest(),Vx(),"northwest",Er(t,{right:0,top:2}),Hu),W1=(t,s,a)=>na(Ml(t),ry(t),a.insetNortheast(),ey(),"northeast",Er(t,{left:1,top:2}),Hu),Rl=(t,s,a)=>na(Xx(t,s),ry(t),a.insetNorth(),Zx(),"north",Er(t,{top:2}),Hu),j1=(t,s,a)=>na(Xx(t,s),U1(t,s),a.insetSouth(),GO(),"south",Er(t,{bottom:3}),Hu),tk=(t,s,a)=>na(sy(t,s),ek(t,s),a.insetEast(),xc(),"east",Er(t,{right:0}),Hu),Jx=(t,s,a)=>na(Ml(t),ek(t,s),a.insetWest(),KO(),"west",Er(t,{left:1}),Hu),iy=t=>{switch(t){case"north":return Rl;case"northeast":return W1;case"northwest":return Fh;case"south":return j1;case"southeast":return ay;case"southwest":return Z1;case"east":return tk;case"west":return Jx}},nk=(t,s,a,l,u)=>qO(l).map(iy).getOr(Rl)(t,s,a,l,u),ok=t=>{switch(t){case"north":return j1;case"northeast":return ay;case"northwest":return Z1;case"south":return Rl;case"southeast":return W1;case"southwest":return Fh;case"east":return Jx;case"west":return tk}},Z7=(t,s,a,l,u)=>qO(l).map(ok).getOr(Rl)(t,s,a,l,u),ly=(t,s)=>{Ji(t,Math.floor(s))},Qx=te((t,s)=>{ly(t,s),Xi(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Um=te((t,s)=>{ly(t,s)}),cy=te((t,s)=>{YS(t,Math.floor(s))});var Nd;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Nd||(Nd={}));const uy="data-alloy-vertical-dir",W7=t=>sx(t,s=>si(s)&&er(s,"data-alloy-vertical-dir")===Nd.BottomToTop);var Ka;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(Ka||(Ka={}));const wc={init:()=>ki({readState:te("No State required")})},ki=t=>t,j7={can:qe,abort:at,run:q},Pf=t=>{if(!Lo(t,"can")&&!Lo(t,"abort")&&!Lo(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...j7,...t}},G7=(t,s)=>(...a)=>Fo(t,(l,u)=>l&&s(u).apply(void 0,a),!0),K7=(t,s)=>(...a)=>Fo(t,(l,u)=>l||s(u).apply(void 0,a),!1),Y7=t=>Ce(t)?{can:qe,abort:at,run:t}:t,X7=t=>{const s=G7(t,u=>u.can),a=K7(t,u=>u.abort);return{can:s,abort:a,run:(...u)=>{tt(t,f=>{f.run.apply(void 0,u)})}}},Un=(t,s)=>{dy(t,t.element,s,{})},Zt=(t,s,a)=>{dy(t,t.element,s,a)},Zm=t=>{Un(t,nl())},G1=(t,s,a)=>{dy(t,s,a,{})},dy=(t,s,a,l)=>{const u={target:s,...l};t.getSystem().triggerEvent(a,s,u)},J7=(t,s,a,l)=>{const u={...l,target:s};t.getSystem().triggerEvent(a,s,u)},sk=(t,s,a,l)=>{t.getSystem().triggerEvent(a,s,l.event)},Xo=t=>Th(t),rk=(t,s)=>({key:t,value:Pf({abort:s})}),Q7=(t,s)=>({key:t,value:Pf({can:s})}),q7=t=>({key:t,value:Pf({run:(s,a)=>{a.event.prevent()}})}),Fe=(t,s)=>({key:t,value:Pf({run:s})}),qx=(t,s,a)=>({key:t,value:Pf({run:(l,u)=>{s.apply(void 0,[l,u].concat(a))}})}),eL=t=>s=>Fe(t,s),fy=t=>s=>({key:t,value:Pf({run:(a,l)=>{yf(a,l)&&s(a,l)}})}),tL=(t,s)=>Fe(t,(a,l)=>{a.getSystem().getByUid(s).each(u=>{sk(u,u.element,t,l)})}),_h=(t,s,a)=>{const l=s.partUids[a];return tL(t,l)},my=(t,s)=>Fe(t,(a,l)=>{const u=l.event,f=a.getSystem().getByDom(u.target).getOrThunk(()=>E1(u.target,p=>a.getSystem().getByDom(p).toOptional(),at).getOr(a));s(a,f,l)}),Nf=t=>Fe(t,(s,a)=>{a.cut()}),ak=t=>Fe(t,(s,a)=>{a.stop()}),$h=(t,s)=>fy(t)(s),Ho=fy(Dl()),qc=fy(_u()),ew=fy(Fm()),Id=eL(nl()),Ec=t=>({classes:ce(t.classes)?[]:t.classes,attributes:ce(t.attributes)?{}:t.attributes,styles:ce(t.styles)?{}:t.styles}),tw=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),nL=(t,s,a)=>Id(l=>{a(l,t,s)}),nw=(t,s,a)=>ew((l,u)=>{a(l,t,s)}),oL=(t,s,a,l,u,f)=>{const m=qi(t),p=Ti(s,[DO("config",t)]);return gy(m,p,s,a,l,u,f)},ik=(t,s,a,l,u,f)=>{const m=t,p=Ti(s,[ii("config",t)]);return gy(m,p,s,a,l,u,f)},sL=(t,s,a)=>_1((u,...f)=>{const m=[u].concat(f);return u.config({name:te(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},p=>{const v=Array.prototype.slice.call(m,1);return s.apply(void 0,[u,p.config,p.state].concat(v))})},a,s),rL=t=>({key:t,value:void 0}),gy=(t,s,a,l,u,f,m)=>{const p=D=>Lo(D,a)?D[a]():x.none(),v=ot(u,(D,I)=>sL(a,D,I)),E={...ot(f,(D,I)=>jb(D,I)),...v,revoke:gt(rL,a),config:D=>{const I=ai(a+"-config",t,D);return{key:a,value:{config:I,me:E,configAsRaw:we(()=>ai(a+"-config",t,D)),initialConfig:D,state:m}}},schema:te(s),exhibit:(D,I)=>Gr(p(D),Be(l,"exhibit"),(H,W)=>W(I,H.config,H.state)).getOrThunk(()=>Ec({})),name:te(a),handlers:D=>p(D).map(I=>Be(l,"events").getOr(()=>({}))(I.config,I.state)).getOr({})};return E},Qe=t=>Th(t),aL=qi([We("fields"),We("name"),ve("active",{}),ve("apis",{}),ve("state",wc),ve("extra",{})]),Vr=t=>{const s=ai("Creating behaviour: "+t.name,aL,t);return oL(s.fields,s.name,s.active,s.apis,s.extra,s.state)},lk=qi([We("branchKey"),We("branches"),We("name"),ve("active",{}),ve("apis",{}),ve("state",wc),ve("extra",{})]),At=t=>{const s=ai("Creating behaviour: "+t.name,lk,t);return ik(wi(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},hy=te(void 0),ck=(t,s)=>{const a=Xo(s);return Vr({fields:[We("enabled")],name:t,active:{events:te(a)}})},un=(t,s)=>{const a=ck(t,s);return{key:t,value:{config:{},me:a,configAsRaw:te({}),initialConfig:{},state:wc}}},iL=t=>({init:()=>{const a=Dt(t);return{get:()=>a.get(),set:p=>a.set(p),clear:()=>a.set(t),readState:()=>a.get()}}}),uk=(t,s)=>{s.ignore||(Fs(t.element),s.onFocus(t))};var cL=Object.freeze({__proto__:null,focus:uk,blur:(t,s)=>{s.ignore||Tl(t.element)},isFocused:t=>ku(t.element)}),Ra=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return Ec(a)},events:t=>Xo([Fe(Fu(),(s,a)=>{uk(s,t),a.stop()})].concat(t.stopMousedown?[Fe(Ai(),(s,a)=>{a.event.prevent()})]:[]))}),K1=[to("onFocus"),ve("stopMousedown",!1),ve("ignore",!1)];const on=Vr({fields:K1,name:"focusing",active:Ra,apis:cL}),dL=[8],Bd=[9],Vu=[13],py=[27],li=[32],Y1=[37],X1=[38],J1=[39],Hh=[40],fL=(t,s,a)=>{const l=Rr(t.slice(0,s)),u=Rr(t.slice(s+1));return Ft(l.concat(u),a)},mL=(t,s,a)=>{const l=Rr(t.slice(0,s));return Ft(l,a)},gL=(t,s,a)=>{const l=t.slice(0,s),u=t.slice(s+1);return Ft(u.concat(l),a)},hL=(t,s,a)=>{const l=t.slice(s+1);return Ft(l,a)},Yn=t=>s=>{const a=s.raw;return Kt(t,a.which)},Pl=t=>s=>Wr(t,a=>a(s)),If=t=>t.raw.shiftKey===!0,pL=t=>t.raw.ctrlKey===!0,Vh=ye(If),no=(t,s)=>({matches:t,classification:s}),vL=(t,s)=>Ft(t,l=>l.matches(s)).map(l=>l.classification),dk=(t,s,a,l)=>{const u=Yo(t.element,"."+s.highlightClass);tt(u,f=>{fo(l,p=>vo(p.element,f))||(Ko(f,s.highlightClass),t.getSystem().getByDom(f).each(p=>{s.onDehighlight(t,p),Un(p,Ex())}))})},fk=(t,s,a)=>dk(t,s,a,[]),bL=(t,s,a,l)=>{ow(t,s,a,l)&&(Ko(l.element,s.highlightClass),s.onDehighlight(t,l),Un(l,Ex()))},Q1=(t,s,a,l)=>{dk(t,s,a,[l]),ow(t,s,a,l)||(Es(l.element,s.highlightClass),s.onHighlight(t,l),Un(l,zb()))},mk=(t,s,a)=>{vy(t,s).each(l=>{Q1(t,s,a,l)})},yL=(t,s,a)=>{hk(t,s).each(l=>{Q1(t,s,a,l)})},CL=(t,s,a,l)=>{SL(t,s,a,l).fold(u=>{throw u},u=>{Q1(t,s,a,u)})},gk=(t,s,a,l)=>{const u=pk(t,s);Ft(u,l).each(m=>{Q1(t,s,a,m)})},ow=(t,s,a,l)=>Qr(l.element,s.highlightClass),zh=(t,s,a)=>Ro(t.element,"."+s.highlightClass).bind(l=>t.getSystem().getByDom(l).toOptional()),SL=(t,s,a,l)=>{const u=Yo(t.element,"."+s.itemClass);return x.from(u[l]).fold(()=>xn.error(new Error("No element found with index "+l)),t.getSystem().getByDom)},vy=(t,s,a)=>Ro(t.element,"."+s.itemClass).bind(l=>t.getSystem().getByDom(l).toOptional()),hk=(t,s,a)=>{const l=Yo(t.element,"."+s.itemClass);return(l.length>0?x.some(l[l.length-1]):x.none()).bind(f=>t.getSystem().getByDom(f).toOptional())},Uh=(t,s,a,l)=>{const u=Yo(t.element,"."+s.itemClass);return Cn(u,m=>Qr(m,s.highlightClass)).bind(m=>{const p=Ui(m,l,0,u.length-1);return t.getSystem().getByDom(u[p]).toOptional()})},xL=(t,s,a)=>Uh(t,s,a,-1),wL=(t,s,a)=>Uh(t,s,a,1),pk=(t,s,a)=>{const l=Yo(t.element,"."+s.itemClass);return yl(Le(l,u=>t.getSystem().getByDom(u).toOptional()))};var EL=Object.freeze({__proto__:null,dehighlightAll:fk,dehighlight:bL,highlight:Q1,highlightFirst:mk,highlightLast:yL,highlightAt:CL,highlightBy:gk,isHighlighted:ow,getHighlighted:zh,getFirst:vy,getLast:hk,getPrevious:xL,getNext:wL,getCandidates:pk}),TL=[We("highlightClass"),We("itemClass"),to("onHighlight"),to("onDehighlight")];const ro=Vr({fields:TL,name:"highlighting",apis:EL}),vk=(t,s,a)=>{s.exists(u=>a.exists(f=>vo(f,u)))||Zt(t,Tf(),{prevFocus:s,newFocus:a})},sw=()=>{const t=a=>Xr(a.element);return{get:t,set:(a,l)=>{const u=t(a);a.getSystem().triggerFocus(l,a.element);const f=t(a);vk(a,u,f)}}},AL=()=>{const t=a=>ro.getHighlighted(a).map(l=>l.element);return{get:t,set:(a,l)=>{const u=t(a);a.getSystem().getByDom(l).fold(q,m=>{ro.highlight(a,m)});const f=t(a);vk(a,u,f)}}},Wm=(t,s,a,l,u)=>{const f=()=>t.concat([ve("focusManager",sw()),yc("focusInside","onFocus",Rm(C=>Kt(["onFocus","onEnterOrSpace","onApi"],C)?xn.value(C):xn.error("Invalid value for focusInside"))),Do("handler",v),Do("state",s),Do("sendFocusIn",u)]),m=(C,E,D,I,H)=>{const W=D(C,E,I,H);return vL(W,E.event).bind(Q=>Q(C,E,I,H))},v={schema:f,processKey:m,toEvents:(C,E)=>{const D=C.focusInside!==Af.OnFocusMode?x.none():u(C).map(W=>Fe(Fu(),(Q,se)=>{W(Q,C,E),se.stop()})),I=(W,Q)=>{const se=Yn(li.concat(Vu))(Q.event);C.focusInside===Af.OnEnterOrSpaceMode&&se&&yf(W,Q)&&u(C).each(X=>{X(W,C,E),Q.stop()})},H=[Fe(Jc(),(W,Q)=>{m(W,Q,a,C,E).fold(()=>{I(W,Q)},se=>{Q.stop()})}),Fe(Cx(),(W,Q)=>{m(W,Q,l,C,E).each(se=>{Q.stop()})})];return Xo(D.toArray().concat(H))}};return v},bk=t=>{const s=[uo("onEscape"),uo("onEnter"),ve("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),ve("firstTabstop",0),ve("useTabstopAt",qe),uo("visibilitySelector")].concat([t]),a=(X,ie)=>{const le=X.visibilitySelector.bind(xe=>Ru(ie,xe)).getOr(ie);return Vn(le)>0},l=(X,ie)=>{const le=Yo(X.element,ie.selector),xe=qn(le,Re=>a(ie,Re));return x.from(xe[ie.firstTabstop])},u=(X,ie)=>ie.focusManager.get(X).bind(le=>Ru(le,ie.selector)),f=(X,ie)=>a(X,ie)&&X.useTabstopAt(ie),m=(X,ie,le)=>{l(X,ie).each(xe=>{ie.focusManager.set(X,xe)})},p=(X,ie,le,xe,Re)=>Re(ie,le,vt=>f(xe,vt)).fold(()=>xe.cyclic?x.some(!0):x.none(),vt=>(xe.focusManager.set(X,vt),x.some(!0))),v=(X,ie,le,xe)=>{const Re=qn(Yo(X.element,le.selector),vt=>a(le,vt));return u(X,le).bind(vt=>Cn(Re,gt(vo,vt)).bind(Pe=>p(X,Re,Pe,le,xe)))},C=(X,ie,le)=>{const xe=le.cyclic?fL:mL;return v(X,ie,le,xe)},E=(X,ie,le)=>{const xe=le.cyclic?gL:hL;return v(X,ie,le,xe)},D=X=>gf(X).bind(hf).exists(ie=>vo(ie,X)),I=(X,ie,le)=>u(X,le).filter(xe=>!le.useTabstopAt(xe)).bind(xe=>(D(xe)?C:E)(X,ie,le)),H=(X,ie,le)=>le.onEnter.bind(xe=>xe(X,ie)),W=(X,ie,le)=>le.onEscape.bind(xe=>xe(X,ie)),Q=te([no(Pl([If,Yn(Bd)]),C),no(Yn(Bd),E),no(Pl([Vh,Yn(Vu)]),H)]),se=te([no(Yn(py),W),no(Yn(Bd),I)]);return Wm(s,wc.init,Q,se,()=>x.some(m))};var OL=bk(Ma("cyclic",at)),yk=bk(Ma("cyclic",qe));const Zh=t=>uh("input")(t)&&er(t,"type")!=="radio"||uh("textarea")(t),Ck=(t,s,a)=>(G1(t,a,nl()),x.some(!0)),Bf=(t,s,a)=>Zh(a)&&Yn(li)(s.event)?x.none():Ck(t,s,a),Wh=(t,s)=>x.some(!0),kL=[ve("execute",Bf),ve("useSpace",!1),ve("useEnter",!0),ve("useControlEnter",!1),ve("useDown",!1)],Sk=(t,s,a)=>a.execute(t,s,t.element),DL=(t,s,a,l)=>{const u=a.useSpace&&!Zh(t.element)?li:[],f=a.useEnter?Vu:[],m=a.useDown?Hh:[],p=u.concat(f).concat(m);return[no(Yn(p),Sk)].concat(a.useControlEnter?[no(Pl([pL,Yn(Vu)]),Sk)]:[])},xk=(t,s,a,l)=>a.useSpace&&!Zh(t.element)?[no(Yn(li),Wh)]:[];var wk=Wm(kL,wc.init,DL,xk,()=>x.none());const Ek=()=>{const t=Gn();return ki({readState:()=>t.get().map(u=>({numRows:String(u.numRows),numColumns:String(u.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(u,f)=>{t.set({numRows:u,numColumns:f})},getNumRows:()=>t.get().map(u=>u.numRows),getNumColumns:()=>t.get().map(u=>u.numColumns)})};var ML=Object.freeze({__proto__:null,flatgrid:Ek,init:t=>t.state(t)});const Tk=t=>(s,a,l,u)=>{const f=t(s.element);return q1(f,s,a,l,u)},rw=(t,s)=>{const a=S1(t,s);return Tk(a)},aw=(t,s)=>{const a=S1(s,t);return Tk(a)},iw=t=>(s,a,l,u)=>q1(t,s,a,l,u),q1=(t,s,a,l,u)=>l.focusManager.get(s).bind(m=>t(s.element,m,l,u)).map(m=>(l.focusManager.set(s,m),!0)),Ak=iw,Ok=iw,by=iw,RL=(t,s)=>Cn(t,s).map(a=>({index:a,candidates:t})),kk=(t,s,a)=>{const l=m=>vo(m,s),u=Yo(t,a),f=qn(u,KS);return RL(f,l)},Dk=(t,s)=>Cn(t,a=>vo(s,a)),Mk=(t,s,a,l)=>{const u=Math.floor(s/a),f=s%a;return l(u,f).bind(m=>{const p=m.row*a+m.column;return p>=0&&p<t.length?x.some(t[p]):x.none()})},Rk=(t,s,a,l,u)=>Mk(t,s,l,(f,m)=>{const v=f===a-1?t.length-f*l:l,C=Ui(m,u,0,v-1);return x.some({row:f,column:C})}),Pk=(t,s,a,l,u)=>Mk(t,s,l,(f,m)=>{const p=Ui(f,u,0,a-1),C=p===a-1?t.length-p*l:l,E=qs(m,0,C-1);return x.some({row:p,column:E})}),PL=(t,s,a,l)=>Rk(t,s,a,l,1),NL=(t,s,a,l)=>Rk(t,s,a,l,-1),IL=(t,s,a,l)=>Pk(t,s,a,l,-1),Nk=(t,s,a,l)=>Pk(t,s,a,l,1),BL=[We("selector"),ve("execute",Bf),Ks("onEscape"),ve("captureTab",!1),Mh()],LL=(t,s,a)=>{Ro(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},FL=(t,s)=>s.focusManager.get(t).bind(a=>Ru(a,s.selector)),_L=(t,s,a,l)=>FL(t,a).bind(u=>a.execute(t,s,u)),ev=t=>(s,a,l,u)=>kk(s,a,l.selector).bind(f=>t(f.candidates,f.index,u.getNumRows().getOr(l.initSize.numRows),u.getNumColumns().getOr(l.initSize.numColumns))),Ik=(t,s,a)=>a.captureTab?x.some(!0):x.none(),$L=(t,s,a)=>a.onEscape(t,s),Bk=ev(NL),Lk=ev(PL),HL=ev(IL),Fk=ev(Nk),VL=te([no(Yn(Y1),rw(Bk,Lk)),no(Yn(J1),aw(Bk,Lk)),no(Yn(X1),Ak(HL)),no(Yn(Hh),Ok(Fk)),no(Pl([If,Yn(Bd)]),Ik),no(Pl([Vh,Yn(Bd)]),Ik),no(Yn(li.concat(Vu)),_L)]),zL=te([no(Yn(py),$L),no(Yn(li),Wh)]);var UL=Wm(BL,Ek,VL,zL,()=>x.some(LL));const lw=(t,s,a,l,u)=>{const f=p=>xl(p)==="button"&&er(p,"disabled")==="disabled",m=(p,v,C)=>u(p,v,l,0,C.length-1,C[v],E=>f(C[E])?m(p,E,C):x.from(C[E]));return kk(t,a,s).bind(p=>{const v=p.index,C=p.candidates;return m(v,v,C)})},yy=(t,s,a,l)=>lw(t,s,a,l,(u,f,m,p,v,C,E)=>{const D=qs(f+m,p,v);return D===u?x.from(C):E(D)}),Cy=(t,s,a,l)=>lw(t,s,a,l,(u,f,m,p,v,C,E)=>{const D=Ui(f,m,p,v);return D===u?x.none():E(D)}),ZL=[We("selector"),ve("getInitial",x.none),ve("execute",Bf),Ks("onEscape"),ve("executeOnMove",!1),ve("allowVertical",!0),ve("allowHorizontal",!0),ve("cycles",!0)],WL=(t,s)=>s.focusManager.get(t).bind(a=>Ru(a,s.selector)),jh=(t,s,a)=>WL(t,a).bind(l=>a.execute(t,s,l)),jL=(t,s,a)=>{s.getInitial(t).orThunk(()=>Ro(t.element,s.selector)).each(l=>{s.focusManager.set(t,l)})},cw=(t,s,a)=>(a.cycles?Cy:yy)(t,a.selector,s,-1),uw=(t,s,a)=>(a.cycles?Cy:yy)(t,a.selector,s,1),dw=t=>(s,a,l,u)=>t(s,a,l,u).bind(()=>l.executeOnMove?jh(s,a,l):x.some(!0)),_k=(t,s,a)=>a.onEscape(t,s),$k=(t,s,a,l)=>{const u=[...a.allowHorizontal?Y1:[]].concat(a.allowVertical?X1:[]),f=[...a.allowHorizontal?J1:[]].concat(a.allowVertical?Hh:[]);return[no(Yn(u),dw(rw(cw,uw))),no(Yn(f),dw(aw(cw,uw))),no(Yn(Vu),jh),no(Yn(li),jh)]},GL=te([no(Yn(li),Wh),no(Yn(py),_k)]);var KL=Wm(ZL,wc.init,$k,GL,()=>x.some(jL));const Sy=(t,s,a)=>x.from(t[s]).bind(l=>x.from(l[a]).map(u=>({rowIndex:s,columnIndex:a,cell:u}))),Hk=(t,s,a,l)=>{const f=t[s].length,m=Ui(a,l,0,f-1);return Sy(t,s,m)},Vk=(t,s,a,l)=>{const u=Ui(a,l,0,t.length-1),f=t[u].length,m=qs(s,0,f-1);return Sy(t,u,m)},Lf=(t,s,a,l)=>{const f=t[s].length,m=qs(a+l,0,f-1);return Sy(t,s,m)},zk=(t,s,a,l)=>{const u=qs(a+l,0,t.length-1),f=t[u].length,m=qs(s,0,f-1);return Sy(t,u,m)},YL=(t,s,a)=>Hk(t,s,a,1),XL=(t,s,a)=>Hk(t,s,a,-1),JL=(t,s,a)=>Vk(t,a,s,-1),Uk=(t,s,a)=>Vk(t,a,s,1),QL=(t,s,a)=>Lf(t,s,a,-1),qL=(t,s,a)=>Lf(t,s,a,1),Zk=(t,s,a)=>zk(t,a,s,-1),tv=(t,s,a)=>zk(t,a,s,1),nv=[bc("selectors",[We("row"),We("cell")]),ve("cycles",!0),ve("previousSelector",x.none),ve("execute",Bf)],eF=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const u=s.selectors;return Ro(t.element,u.cell)}).each(u=>{s.focusManager.set(t,u)})},fw=(t,s,a)=>Xr(t.element).bind(l=>a.execute(t,s,l)),tF=(t,s)=>Le(t,a=>Yo(a,s.selectors.cell)),ov=(t,s)=>(a,l,u)=>{const f=u.cycles?t:s;return Ru(l,u.selectors.row).bind(m=>{const p=Yo(m,u.selectors.cell);return Dk(p,l).bind(v=>{const C=Yo(a,u.selectors.row);return Dk(C,m).bind(E=>{const D=tF(C,u);return f(D,E,v).map(I=>I.cell)})})})},mw=ov(XL,QL),gw=ov(YL,qL),nF=ov(JL,Zk),oF=ov(Uk,tv),sF=te([no(Yn(Y1),rw(mw,gw)),no(Yn(J1),aw(mw,gw)),no(Yn(X1),Ak(nF)),no(Yn(Hh),Ok(oF)),no(Yn(li.concat(Vu)),fw)]),Gh=te([no(Yn(li),Wh)]);var jm=Wm(nv,wc.init,sF,Gh,()=>x.some(eF));const xy=[We("selector"),ve("execute",Bf),ve("moveOnTab",!1)],Kh=(t,s,a)=>a.focusManager.get(t).bind(l=>a.execute(t,s,l)),rF=(t,s,a)=>{Ro(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},Ld=(t,s,a)=>Cy(t,a.selector,s,-1),eu=(t,s,a)=>Cy(t,a.selector,s,1),hw=(t,s,a,l)=>a.moveOnTab?by(Ld)(t,s,a,l):x.none(),Wk=(t,s,a,l)=>a.moveOnTab?by(eu)(t,s,a,l):x.none(),aF=te([no(Yn(X1),by(Ld)),no(Yn(Hh),by(eu)),no(Pl([If,Yn(Bd)]),hw),no(Pl([Vh,Yn(Bd)]),Wk),no(Yn(Vu),Kh),no(Yn(li),Kh)]),jk=te([no(Yn(li),Wh)]);var sv=Wm(xy,wc.init,aF,jk,()=>x.some(rF));const rv=[Ks("onSpace"),Ks("onEnter"),Ks("onShiftEnter"),Ks("onLeft"),Ks("onRight"),Ks("onTab"),Ks("onShiftTab"),Ks("onUp"),Ks("onDown"),Ks("onEscape"),ve("stopSpaceKeyup",!1),uo("focusIn")],pw=(t,s,a)=>[no(Yn(li),a.onSpace),no(Pl([Vh,Yn(Vu)]),a.onEnter),no(Pl([If,Yn(Vu)]),a.onShiftEnter),no(Pl([If,Yn(Bd)]),a.onShiftTab),no(Pl([Vh,Yn(Bd)]),a.onTab),no(Yn(X1),a.onUp),no(Yn(Hh),a.onDown),no(Yn(Y1),a.onLeft),no(Yn(J1),a.onRight),no(Yn(li),a.onSpace)],Gk=(t,s,a)=>[...a.stopSpaceKeyup?[no(Yn(li),Wh)]:[],no(Yn(py),a.onEscape)];var av=Wm(rv,wc.init,pw,Gk,t=>t.focusIn);const wy=OL.schema(),iF=yk.schema(),vw=KL.schema(),Ey=UL.schema(),lF=jm.schema(),zu=wk.schema(),Kk=sv.schema(),bw=av.schema();var Yh=Object.freeze({__proto__:null,acyclic:wy,cyclic:iF,flow:vw,flatgrid:Ey,matrix:lF,execution:zu,menu:Kk,special:bw});const Yk=t=>Lo(t,"setGridSize"),Pt=At({branchKey:"mode",branches:Yh,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},l=>{l(t,s,a)})},setGridSize:(t,s,a,l,u)=>{Yk(a)?a.setGridSize(l,u):console.error("Layout does not support setGridSize")}},state:ML}),Ty=yt("alloy-premade"),yw=t=>(Object.defineProperty(t.element.dom,Ty,{value:t.uid,writable:!0}),Nm(Ty,t)),Xk=t=>_t(t.dom,Ty),Jk=t=>Be(t,Ty),Xh=t=>$O((s,...a)=>t(s.getApis(),s,...a),t),Tc=t=>t.getSystem().isConnected(),iv=t=>{Un(t,_u());const s=t.components();tt(s,iv)},lv=t=>{const s=t.components();tt(s,lv),Un(t,Dl())},Cw=(t,s)=>{t.getSystem().addToWorld(s),Ds(t.element)&&lv(s)},Ay=t=>{iv(t),t.getSystem().removeFromWorld(t)},Sw=(t,s)=>{ri(t.element,s.element)},cF=t=>{tt(t.components(),s=>uc(s.element)),Em(t.element),t.syncComponents()},uF=(t,s,a)=>{const l=t.components();cF(t);const u=a(s),f=Nt(l,u);tt(f,m=>{iv(m),t.getSystem().removeFromWorld(m)}),tt(u,m=>{Tc(m)?Sw(t,m):(t.getSystem().addToWorld(m),Sw(t,m),Ds(t.element)&&lv(m))}),t.syncComponents()},Nl=(t,s,a)=>{const l=t.components(),u=ke(s,p=>Jk(p).toArray());tt(l,p=>{Kt(u,p)||Ay(p)});const f=a(s),m=Nt(l,f);tt(m,p=>{Tc(p)&&Ay(p)}),tt(f,p=>{Tc(p)||Cw(t,p)}),t.syncComponents()},Ac=(t,s)=>{xw(t,s,ri)},xw=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),Ds(t.element)&&lv(s),t.syncComponents()},Gm=t=>{iv(t),uc(t.element),t.getSystem().removeFromWorld(t)},ar=t=>{const s=Ea(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());Gm(t),s.each(a=>{a.syncComponents()})},ci=t=>{const s=t.components();tt(s,Gm),Em(t.element),t.syncComponents()},oa=(t,s)=>{Oy(t,s,ri)},Di=(t,s)=>{Oy(t,s,ub)},Oy=(t,s,a)=>{a(t,s.element);const l=da(s.element);tt(l,u=>{s.getByDom(u).each(lv)})},Il=t=>{const s=da(t.element);tt(s,a=>{t.getByDom(a).each(iv)}),uc(t.element)},Km=(t,s,a)=>ic(t,s).map(u=>{if(a.exists(m=>!vo(m,u))){const m=a.map(xl).getOr("span"),p=ht.fromTag(m);return wm(u,p),p}else return u}),Qk=(t,s,a)=>{a.fold(()=>ri(t,s),l=>{vo(l,s)||(wm(l,s),uc(l))})},qk=(t,s,a)=>{const l=Le(s,a),u=da(t);return tt(u.slice(l.length),uc),l},eD=(t,s,a,l)=>{const u=ic(t,s),f=l(a,u),m=Km(t,s,u);return Qk(t,f.element,m),f},tD=(t,s,a)=>qk(t,s,(l,u)=>eD(t,u,l,a)),nD=(t,s)=>qk(t,s,(a,l)=>{const u=ic(t,l);return Qk(t,a,u),a}),Jh=(t,s)=>{const a=fr(s),l=cc(a).bind(f=>{const m=p=>vo(f,p);return m(s)?x.some(s):BB(s,m)}),u=t(s);return l.each(f=>{cc(a).filter(m=>vo(m,f)).fold(()=>{Fs(f)},q)}),u},ww=(t,s)=>{Jh(()=>{uF(t,s,()=>Le(s,t.getSystem().build))},t.element)},oD=(t,s)=>{Jh(()=>{Nl(t,s,()=>tD(t.element,s,t.getSystem().buildOrPatch))},t.element)},dF=(t,s,a,l)=>{Ay(s);const u=eD(t.element,a,l,t.getSystem().buildOrPatch);Cw(t,u),t.syncComponents()},Ew=(t,s,a)=>{const l=t.getSystem().build(a);xw(t,l,s)},fF=(t,s,a,l)=>{ar(s),Ew(t,(u,f)=>GS(u,f,a),l)},sD=(t,s,a,l)=>(s.reuseDom?oD:ww)(t,l),rD=(t,s,a,l)=>{Ew(t,ri,l)},Tw=(t,s,a,l)=>{Ew(t,jS,l)},aD=(t,s,a,l)=>{const u=ky(t);Ft(u,m=>vo(l.element,m.element)).each(ar)},ky=(t,s)=>t.components(),iD=(t,s,a,l,u)=>{const f=ky(t);return x.from(f[l]).map(m=>(u.fold(()=>ar(m),p=>{(s.reuseDom?dF:fF)(t,m,l,p)}),m))};var mF=Object.freeze({__proto__:null,append:rD,prepend:Tw,remove:aD,replaceAt:iD,replaceBy:(t,s,a,l,u)=>{const f=ky(t);return Cn(f,l).bind(m=>iD(t,s,a,m,u))},set:sD,contents:ky});const fn=Vr({fields:[ea("reuseDom",!0)],name:"replacing",apis:mF}),gF=(t,s,a)=>vo(s,t.element)&&!vo(s,a),Bl=Xo([Q7(Fu(),(t,s)=>{const a=s.event,l=a.originator,u=a.target;return gF(t,l,u)?(console.warn(Fu()+` did not get interpreted by the desired target. 
Originator: `+Co(l)+`
Target: `+Co(u)+`
Check the `+Fu()+" event handlers"),!1):!0})]);var qK=Object.freeze({__proto__:null,events:Bl});const Dy=te("alloy-id-"),Ym=te("data-alloy-id"),Aw=Dy(),My=Ym(),hF=(t,s)=>{const a=yt(Aw+t);return Ow(s,a),a},Ow=(t,s)=>{Object.defineProperty(t.dom,My,{value:s,writable:!0})},cv=t=>{const s=si(t)?t.dom[My]:null;return x.from(s)},Qh=t=>yt(t),lD=lt,Fd=t=>{const s=u=>`The component must be in a context to execute: ${u}`+(t?`
`+Co(t().element)+" is not in context.":""),a=u=>()=>{throw new Error(s(u))},l=u=>()=>{console.warn(s(u))};return{debugInfo:te("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:at}},uv=Fd(),pF=(t,s)=>{const a=Le(s,u=>Ti(u.name(),[We("config"),ve("state",wc)])),l=ps("component.behaviours",rn(a),t.behaviours).fold(u=>{throw new Error(Pm(u)+`
Complete spec:
`+JSON.stringify(t,null,2))},lt);return{list:s,data:ot(l,u=>{const f=u.map(m=>({config:m.config,state:m.state.init(m.config)}));return te(f)})}},vF=t=>t.list,cD=t=>t.data,Ry=(t,s)=>{const a={};return ze(t,(l,u)=>{ze(l,(f,m)=>{const p=Be(a,m).getOr([]);a[m]=p.concat([s(u,f)])})}),a},kw=(t,s,a,l)=>{const u={...s};tt(a,E=>{u[E.name()]=E.exhibit(t,l)});const f=Ry(u,(E,D)=>({name:E,modification:D})),m=E=>is(E,(D,I)=>({...I.modification,...D}),{}),p=is(f.classes,(E,D)=>D.modification.concat(E),[]),v=m(f.attributes),C=m(f.styles);return Ec({classes:p,attributes:v,styles:C})},Dw=(t,s,a,l)=>{try{const u=yi(a,(f,m)=>{const p=f[s],v=m[s],C=l.indexOf(p),E=l.indexOf(v);if(C===-1)throw new Error("The ordering for "+t+" does not have an entry for "+p+`.
Order specified: `+JSON.stringify(l,null,2));if(E===-1)throw new Error("The ordering for "+t+" does not have an entry for "+v+`.
Order specified: `+JSON.stringify(l,null,2));return C<E?-1:E<C?1:0});return xn.value(u)}catch(u){return xn.error([u])}},Py=(t,s)=>({handler:t,purpose:s}),Mw=(t,s)=>({cHandler:t,purpose:s}),uD=(t,s)=>Mw(gt.apply(void 0,[t.handler].concat(s)),t.purpose),Xm=t=>t.cHandler,Rw=(t,s)=>({name:t,handler:s}),bF=(t,s)=>{const a={};return tt(t,l=>{a[l.name()]=l.handlers(s)}),a},dD=(t,s,a)=>{const l={...a,...bF(s,t)};return Ry(l,Rw)},yF=(t,s,a,l)=>{const u=dD(t,a,l);return Nw(u,s)},fD=t=>{const s=Y7(t);return(a,l,...u)=>{const f=[a,l].concat(u);s.abort.apply(void 0,f)?l.stop():s.can.apply(void 0,f)&&s.run.apply(void 0,f)}},Pw=(t,s)=>xn.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Le(s,a=>a.name),null,2)]),qh=(t,s,a)=>{const l=s[a];return l?Dw("Event: "+a,"name",t,l).map(u=>{const f=Le(u,m=>m.handler);return X7(f)}):Pw(a,t)},Nw=(t,s)=>{const a=Dn(t,(l,u)=>(l.length===1?xn.value(l[0].handler):qh(l,s,u)).map(m=>{const p=fD(m),v=l.length>1?qn(s[u],C=>fo(l,E=>E.name===C)).join(" > "):l[0].name;return Nm(u,Py(p,v))}));return C7(a,{})},Jm="alloy.base.behaviour",CF=rn([qr("dom","dom",Kc(),rn([We("tag"),ve("styles",{}),ve("classes",[]),ve("attributes",{}),uo("value"),uo("innerHtml")])),We("components"),We("uid"),ve("events",{}),ve("apis",{}),qr("eventOrder","eventOrder",cx({[nl()]:["disabling",Jm,"toggling","typeaheadevents"],[Fu()]:[Jm,"focusing","keying"],[Fm()]:[Jm,"disabling","toggling","representing","tooltipping"],[wd()]:[Jm,"representing","streaming","invalidating"],[_u()]:[Jm,"representing","item-events","toolbar-button-events","tooltipping"],[Ai()]:["focusing",Jm,"item-type-events"],[xd()]:["focusing",Jm,"item-type-events"],[Sc()]:["item-type-events","tooltipping"],[Bm()]:["receiving","reflecting","tooltipping"]}),hc()),uo("domModification")]),mD=t=>ps("custom.definition",CF,t),Ff=t=>({...t.dom,uid:t.uid,domChildren:Le(t.components,s=>s.element)}),Iw=t=>t.domModification.fold(()=>Ec({}),Ec),Bw=t=>t.events,dv=(t,s)=>{const a=Me(t),l=Me(s),u=Nt(l,a),f=Hn(t,(m,p)=>!_t(s,p)||m!==s[p]).t;return{toRemove:u,toSet:f}},gD=(t,s)=>{const{class:a,style:l,...u}=mb(s),{toSet:f,toRemove:m}=dv(t.attributes,u),p=()=>{tt(m,le=>us(s,le)),fb(s,f)},v=ae(s),{toSet:C,toRemove:E}=dv(t.styles,v),D=()=>{tt(E,le=>ft(s,le)),Xi(s,C)},I=Cd(s),H=Nt(I,t.classes),W=Nt(t.classes,I),Q=()=>{Am(s,W),Qi(s,H)},se=le=>{pf(s,le)},X=()=>{const le=t.domChildren;nD(s,le)},ie=()=>{const le=s,xe=t.value.getOrUndefined();xe!==mc(le)&&Om(le,xe??"")};return p(),Q(),D(),t.innerHtml.fold(X,se),ie(),s},Ny=t=>{const s=ht.fromTag(t.tag);fb(s,t.attributes),Am(s,t.classes),Xi(s,t.styles),t.innerHtml.each(l=>pf(s,l));const a=t.domChildren;return hh(s,a),t.value.each(l=>{Om(s,l)}),s},Lw=(t,s)=>{try{const a=gD(t,s);return x.some(a)}catch{return x.none()}},SF=t=>t.innerHtml.isSome()&&t.domChildren.length>0,xF=(t,s)=>{const a=u=>xl(u)===t.tag&&!SF(t)&&!Xk(u),l=s.filter(a).bind(u=>Lw(t,u)).getOrThunk(()=>Ny(t));return Ow(l,t.uid),l},Uu=t=>{const s=Be(t,"behaviours").getOr({});return ke(Me(s),a=>{const l=s[a];return me(l)?[l.me]:[]})},wF=(t,s)=>pF(t,s),EF=t=>{const s=Uu(t);return wF(t,s)},Ll=(t,s,a)=>{const l=Ff(t),u=Iw(t),f={"alloy.base.modification":u},m=s.length>0?kw(a,f,s,l):u;return tw(l,m)},Tr=(t,s,a)=>{const l={"alloy.base.behaviour":Bw(t)};return yF(a,t.eventOrder,s,l).getOrDie()},TF=(t,s)=>{const a=()=>le,l=Dt(uv),u=kl(mD(t)),f=EF(t),m=vF(f),p=cD(f),v=Ll(u,m,p),C=xF(v,s),E=Tr(u,m,p),D=Dt(u.components),I=xe=>{l.set(xe)},H=()=>{l.set(Fd(a))},W=()=>{const xe=da(C),Re=ke(xe,vt=>l.get().getByDom(vt).fold(()=>[],ts));D.set(Re)},Q=xe=>{const Re=p;return(Ce(Re[xe.name()])?Re[xe.name()]:()=>{throw new Error("Could not find "+xe.name()+" in "+JSON.stringify(t,null,2))})()},se=xe=>Ce(p[xe.name()]),X=()=>u.apis,ie=xe=>p[xe]().map(Re=>Re.state.readState()).getOr("not enabled"),le={uid:t.uid,getSystem:l.get,config:Q,hasConfigured:se,spec:t,readState:ie,getApis:X,connect:I,disconnect:H,element:C,syncComponents:W,components:D.get,events:E};return le},Fw=(t,s)=>{const a=Be(t,"components").getOr([]);return s.fold(()=>Le(a,va),l=>Le(a,(u,f)=>By(u,ic(l,f))))},AF=(t,s)=>{const{events:a,...l}=lD(t),u=Fw(l,s),f={...l,events:{...qK,...a},components:u};return xn.value(TF(f,s))},Wo=t=>{const s=ht.fromText(t);return Iy({element:s})},Iy=t=>{const s=ai("external.component",qi([We("element"),uo("uid")]),t),a=Dt(Fd()),l=p=>{a.set(p)},u=()=>{a.set(Fd(()=>m))},f=s.uid.getOrThunk(()=>Qh("external"));Ow(s.element,f);const m={uid:f,getSystem:a.get,config:x.none,hasConfigured:at,connect:l,disconnect:u,getApis:()=>({}),element:s.element,spec:t,readState:te("No state"),syncComponents:q,components:te([]),events:{}};return yw(m)},ep=Qh,hD=t=>_t(t,"uid"),By=(t,s)=>Jk(t).getOrThunk(()=>{const a=hD(t)?t:{uid:ep(""),...t};return AF(a,s).getOrDie()}),va=t=>By(t,x.none()),ol=yw;var DF=Object.freeze({__proto__:null,block:(t,s,a,l)=>{cn(t.element,"aria-busy",!0);const u=s.getRoot(t).getOr(t),f=Qe([Pt.config({mode:"special",onTab:()=>x.some(!0),onShiftTab:()=>x.some(!0)}),on.config({})]),m=l(u,f),p=u.getSystem().build(m);fn.append(u,ol(p)),p.hasConfigured(Pt)&&s.focus&&Pt.focusIn(p),a.isBlocked()||s.onBlock(t),a.blockWith(()=>fn.remove(u,p))},unblock:(t,s,a)=>{us(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),pD=[Zo("getRoot",x.none),ea("focus",!0),to("onBlock"),to("onUnblock")],vD=Object.freeze({__proto__:null,init:()=>{const t=nh(),s=a=>{t.set({destroy:a})};return ki({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const Oc=Vr({fields:pD,name:"blocking",apis:DF,state:vD});var bD=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const Qm=[We("find")],Zn=Vr({fields:Qm,name:"composing",apis:bD});var RF=Object.freeze({__proto__:null,getCoupled:(t,s,a,l)=>a.getOrCreate(t,s,l),getExistingCoupled:(t,s,a,l)=>a.getExisting(t,s,l)}),PF=[el("others",TO(xn.value,hc()))],IF=Object.freeze({__proto__:null,init:()=>{const t={},s=(f,m)=>{if(Me(f.others).length===0)throw new Error("Cannot find any known coupled components");return Be(t,m)},a=(f,m,p)=>s(m,p).getOrThunk(()=>{const C=Be(m.others,p).getOrDie("No information found for coupled component: "+p)(f),E=f.getSystem().build(C);return t[p]=E,E}),l=(f,m,p)=>s(m,p).orThunk(()=>(Be(m.others,p).getOrDie("No information found for coupled component: "+p),x.none())),u=te({});return ki({readState:u,getExisting:l,getOrCreate:a})}});const vs=Vr({fields:PF,name:"coupling",apis:RF,state:IF}),BF=["input","button","textarea","select"],yD=(t,s,a)=>{(s.disabled()?$w:Hw)(t,s)},Ly=(t,s)=>s.useNative===!0&&Kt(BF,xl(t.element)),fv=t=>b1(t.element,"disabled"),CD=t=>{cn(t.element,"disabled","disabled")},SD=t=>{us(t.element,"disabled")},LF=t=>er(t.element,"aria-disabled")==="true",xD=t=>{cn(t.element,"aria-disabled","true")},wD=t=>{cn(t.element,"aria-disabled","false")},$w=(t,s,a)=>{s.disableClass.each(u=>{Es(t.element,u)}),(Ly(t,s)?CD:xD)(t),s.onDisabled(t)},Hw=(t,s,a)=>{s.disableClass.each(u=>{Ko(t.element,u)}),(Ly(t,s)?SD:wD)(t),s.onEnabled(t)},ED=(t,s)=>Ly(t,s)?fv(t):LF(t);var FF=Object.freeze({__proto__:null,enable:Hw,disable:$w,isDisabled:ED,onLoad:yD,set:(t,s,a,l)=>{(l?$w:Hw)(t,s)}}),zw=Object.freeze({__proto__:null,exhibit:(t,s)=>Ec({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Xo([rk(nl(),(a,l)=>ED(a,t)),nw(t,s,yD)])}),_F=[Zo("disabled",at),ve("useNative",!0),uo("disableClass"),to("onDisabled"),to("onEnabled")];const Bt=Vr({fields:_F,name:"disabling",active:zw,apis:FF}),Fl=(t,s,a,l,u)=>{const f=m=>m+"px";return{position:t,left:s.map(f),top:a.map(f),right:l.map(f),bottom:u.map(f)}},$F=t=>({...t,position:x.some(t.position)}),TD=(t,s)=>{b(t,$F(s))},_l=(t,s)=>{const a=t.element;Es(a,s.transitionClass),Ko(a,s.fadeOutClass),Es(a,s.fadeInClass),s.onShow(t)},AD=(t,s)=>{const a=t.element;Es(a,s.transitionClass),Ko(a,s.fadeInClass),Es(a,s.fadeOutClass),s.onHide(t)},HF=(t,s)=>t.y<s.bottom&&t.bottom>s.y,VF=(t,s)=>t.y>=s.y,zF=(t,s)=>t.bottom<=s.bottom,Uw=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),Fy=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),Zw=t=>t.box.x-t.win.x,UF=(t,s,a)=>{const l=s.win,u=s.box,f=Zw(s);return Tn(t,m=>{switch(m){case"bottom":return zF(u,a.bounds)?x.none():x.some(Fy(l,f,a));case"top":return VF(u,a.bounds)?x.none():x.some(Uw(l,f,a));default:return x.none()}}).getOr({location:"no-dock"})},ZF=(t,s,a)=>Wr(t,l=>{switch(l){case"bottom":return zF(s,a.bounds);case"top":return VF(s,a.bounds)}}),WF=(t,s)=>{const a=s.optScrollEnv.fold(te(t.bounds.y),l=>l.scrollElmTop+(t.bounds.y-l.currentScrollTop));return ws(t.bounds.x,a)},jF=(t,s)=>{const a=s.optScrollEnv.fold(te(t.y),l=>t.y+l.currentScrollTop-l.scrollElmTop);return ws(t.x,a)},_f=(t,s,a)=>a.getInitialPos().map(l=>{const u=WF(l,s);return{box:$s(u.left,u.top,or(t),Vn(t)),location:l.location}}),_y=(t,s,a,l,u)=>{const f=jF(s,a),m=$s(f.left,f.top,s.width,s.height);l.setInitialPos({style:ae(t),position:O(t,"position")||"static",bounds:m,location:u.location})},GF=(t,s,a,l,u)=>{l.getInitialPos().fold(()=>_y(t,s,a,l,u),()=>q)},$y=(t,s,a)=>a.getInitialPos().bind(l=>{var u;switch(a.clearInitialPos(),l.position){case"static":return x.some({morph:"static"});case"absolute":const f=wh(t).getOr(Oa()),m=$r(f),p=(u=f.dom.scrollTop)!==null&&u!==void 0?u:0;return x.some({morph:"absolute",positionCss:Fl("absolute",Be(l.style,"left").map(v=>s.x-m.x),Be(l.style,"top").map(v=>s.y-m.y+p),Be(l.style,"right").map(v=>m.right-s.right),Be(l.style,"bottom").map(v=>m.bottom-s.bottom))});default:return x.none()}}),Hy=(t,s,a)=>_f(t,s,a).filter(({box:l})=>ZF(a.getModes(),l,s)).bind(({box:l})=>$y(t,l,a)),mv=t=>{switch(t.location){case"top":return x.some({morph:"fixed",positionCss:Fl("fixed",x.some(t.leftX),x.some(t.topY),x.none(),x.none())});case"bottom":return x.some({morph:"fixed",positionCss:Fl("fixed",x.some(t.leftX),x.none(),x.none(),x.some(t.bottomY))});default:return x.none()}},KF=(t,s,a)=>{const l=$r(t),u=ma(),f=UF(a.getModes(),{win:u,box:l},s);return f.location==="top"||f.location==="bottom"?(_y(t,l,s,a,f),mv(f)):x.none()},YF=(t,s,a)=>Hy(t,s,a).orThunk(()=>s.optScrollEnv.bind(l=>_f(t,s,a)).bind(({box:l,location:u})=>{const f=ma(),m=Zw({win:f,box:l}),p=u==="top"?Uw(f,m,s):Fy(f,m,s);return mv(p)})),XF=(t,s,a)=>{const l=t.element;return wa(Y(l,"position"),"fixed")?YF(l,s,a):KF(l,s,a)},JF=(t,s,a)=>{const l=t.element;return _f(l,s,a).bind(({box:u})=>$y(l,u,a))},QF=(t,s,a,l)=>{const u=$r(t),f=ma(),m=Zw({win:f,box:u}),p=l(f,m,s);return p.location==="bottom"||p.location==="top"?(GF(t,u,s,a,p),mv(p)):x.none()},OD=(t,s,a)=>{a.setDocked(!1),tt(["left","right","top","bottom","position"],l=>ft(t.element,l)),s.onUndocked(t)},Ww=(t,s,a,l)=>{const u=l.position==="fixed";a.setDocked(u),TD(t.element,l),(u?s.onDocked:s.onUndocked)(t)},jw=(t,s,a,l,u=!1)=>{s.contextual.each(f=>{f.lazyContext(t).each(m=>{const p=HF(m,l.bounds);p!==a.isVisible()&&(a.setVisible(p),u&&!p?(Am(t.element,[f.fadeOutClass]),f.onHide(t)):(p?_l:AD)(t,f))})})},gv=(t,s,a,l,u)=>{jw(t,s,a,l,!0),Ww(t,s,a,u.positionCss)},qF=(t,s,a,l,u)=>{switch(u.morph){case"static":return OD(t,s,a);case"absolute":return Ww(t,s,a,u.positionCss);case"fixed":return gv(t,s,a,l,u)}},e_=(t,s,a)=>{const l=s.lazyViewport(t);jw(t,s,a,l),XF(t,l,a).each(u=>{qF(t,s,a,l,u)})},t_=(t,s,a)=>{const l=t.element;a.setDocked(!1);const u=s.lazyViewport(t);JF(t,u,a).each(f=>{switch(f.morph){case"static":{OD(t,s,a);break}case"absolute":{Ww(t,s,a,f.positionCss);break}}}),a.setVisible(!0),s.contextual.each(f=>{Qi(l,[f.fadeInClass,f.fadeOutClass,f.transitionClass]),f.onShow(t)}),Vy(t,s,a)},Vy=(t,s,a)=>{t.getSystem().isConnected()&&e_(t,s,a)},qm=(t,s,a)=>{a.isDocked()&&t_(t,s,a)},zy=t=>(s,a,l)=>{const u=a.lazyViewport(s);QF(s.element,u,l,t).each(m=>{gv(s,a,l,u,m)})},n_=zy(Uw),Gw=zy(Fy);var o_=Object.freeze({__proto__:null,refresh:Vy,reset:qm,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,l)=>a.setModes(l),forceDockToTop:n_,forceDockToBottom:Gw}),Uy=Object.freeze({__proto__:null,events:(t,s)=>Xo([$h(Ah(),(a,l)=>{t.contextual.each(u=>{Qr(a.element,u.transitionClass)&&(Qi(a.element,[u.transitionClass,u.fadeInClass]),(s.isVisible()?u.onShown:u.onHidden)(a)),l.stop()})}),Fe(xx(),(a,l)=>{Vy(a,t,s)}),Fe(_m(),(a,l)=>{Vy(a,t,s)}),Fe(Qc(),(a,l)=>{qm(a,t,s)})])}),Kw=[Ti("contextual",[gr("fadeInClass"),gr("fadeOutClass"),gr("transitionClass"),vc("lazyContext"),to("onShow"),to("onShown"),to("onHide"),to("onHidden")]),Zo("lazyViewport",()=>({bounds:ma(),optScrollEnv:x.none()})),xf("modes",["top","bottom"],Gs),to("onDocked"),to("onUndocked")],kD=Object.freeze({__proto__:null,init:t=>{const s=Dt(!1),a=Dt(!0),l=Gn(),u=Dt(t.modes),f=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${u.get().join(",")}`;return ki({isDocked:s.get,setDocked:s.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:a.get,setVisible:a.set,getModes:u.get,setModes:u.set,readState:f})}});const Jo=Vr({fields:Kw,name:"docking",active:Uy,apis:o_,state:kD}),hv=Pr.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),Zy=t=>s=>s.translate(-t.left,-t.top),pv=t=>s=>s.translate(t.left,t.top),_d=t=>(s,a)=>Fo(t,(l,u)=>u(l),ws(s,a)),Wy=(t,s,a)=>t.fold(_d([pv(a),Zy(s)]),_d([Zy(s)]),_d([])),eg=(t,s,a)=>t.fold(_d([pv(a)]),_d([]),_d([pv(s)])),DD=(t,s,a)=>t.fold(_d([]),_d([Zy(a)]),_d([pv(s),Zy(a)])),r_=(t,s,a,l,u,f)=>{const m=eg(t,u,f),p=eg(s,u,f);return Math.abs(m.left-p.left)<=a&&Math.abs(m.top-p.top)<=l},Yw=(t,s,a,l,u,f)=>{const m=eg(t,u,f),p=eg(s,u,f),v=Math.abs(m.left-p.left),C=Math.abs(m.top-p.top);return ws(v,C)},Xw=(t,s,a)=>{const l=t.fold((u,f)=>({position:x.some("absolute"),left:x.some(u+"px"),top:x.some(f+"px")}),(u,f)=>({position:x.some("absolute"),left:x.some(u-a.left+"px"),top:x.some(f-a.top+"px")}),(u,f)=>({position:x.some("fixed"),left:x.some(u+"px"),top:x.some(f+"px")}));return{right:x.none(),bottom:x.none(),...l}},jy=(t,s,a)=>t.fold((l,u)=>tg(l+s,u+a),(l,u)=>sl(l+s,u+a),(l,u)=>$d(l+s,u+a)),np=(t,s,a,l)=>{const u=(f,m)=>(p,v)=>{const C=f(s,a,l);return m(p.getOr(C.left),v.getOr(C.top))};return t.fold(u(DD,tg),u(eg,sl),u(Wy,$d))},tg=hv.offset,sl=hv.absolute,$d=hv.fixed,MD=(t,s)=>{const a=er(t,s);return ce(a)?NaN:parseInt(a,10)},a_=(t,s)=>{const a=t.element,l=MD(a,s.leftAttr),u=MD(a,s.topAttr);return isNaN(l)||isNaN(u)?x.none():x.some(ws(l,u))},i_=(t,s,a)=>{const l=t.element;cn(l,s.leftAttr,a.left+"px"),cn(l,s.topAttr,a.top+"px")},RD=(t,s)=>{const a=t.element;us(a,s.leftAttr),us(a,s.topAttr)},l_=(t,s,a,l)=>a_(t,s).fold(()=>a,u=>$d(u.left+l.left,u.top+l.top)),c_=(t,s,a,l,u,f)=>{const m=l_(t,s,a,l),p=s.mustSnap?u_(t,s,m,u,f):ND(t,s,m,u,f),v=Wy(m,u,f);return i_(t,s,v),p.fold(()=>({coord:$d(v.left,v.top),extra:x.none()}),C=>({coord:C.output,extra:C.extra}))},PD=(t,s)=>{RD(t,s)},Jw=(t,s,a,l)=>Tn(t,u=>{const f=u.sensor;return r_(s,f,u.range.left,u.range.top,a,l)?x.some({output:np(u.output,s,a,l),extra:u.extra}):x.none()}),u_=(t,s,a,l,u)=>{const f=s.getSnapPoints(t);return Jw(f,a,l,u).orThunk(()=>Fo(f,(v,C)=>{const E=C.sensor,D=Yw(a,E,C.range.left,C.range.top,l,u);return v.deltas.fold(()=>({deltas:x.some(D),snap:x.some(C)}),I=>{const H=(D.left+D.top)/2,W=(I.left+I.top)/2;return H<=W?{deltas:x.some(D),snap:x.some(C)}:v})},{deltas:x.none(),snap:x.none()}).snap.map(v=>({output:np(v.output,a,l,u),extra:v.extra})))},ND=(t,s,a,l,u)=>{const f=s.getSnapPoints(t);return Jw(f,a,l,u)},d_=(t,s,a)=>({coord:np(t.output,t.output,s,a),extra:t.extra});var BD=Object.freeze({__proto__:null,snapTo:(t,s,a,l)=>{const u=s.getTarget(t.element);if(s.repositionTarget){const f=ua(t.element),m=fa(f),p=It(u),v=d_(l,m,p),C=Xw(v.coord,m,p);b(u,C)}}});const vr=(t,s)=>_b(t,{},Le(s,a=>Fb(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([Ma("dump",lt)])),vv=t=>t.dump,zr=(t,s)=>({...Qe(s),...t.dump}),kc={field:vr,augment:zr,get:vv},f_=(t,s)=>(t.length>0?[bc("parts",t)]:[]).concat([We("uid"),ve("dom",{}),ve("components",[]),Hm("originalSpec"),ve("debug.sketcher",{})]).concat(s),LD=(t,s,a,l,u)=>{const f=f_(l,u);return ai(t+" [SpecSchema]",qi(f.concat(s)),a)},m_=(t,s,a,l)=>{const u=Qw(l),f=LD(t,s,u,[],[]);return a(f,u)},ng=(t,s,a,l,u)=>{const f=Qw(u),m=Xb(a),p=Jb(a),v=LD(t,s,f,m,[p]),C=Df(t,v,a),E=Dd(t,v,C.internals());return l(v,E,f,C.externals())},FD=t=>_t(t,"uid"),Qw=t=>FD(t)?t:{...t,uid:Qh("uid")},_D=t=>t.uid!==void 0,$D=qi([We("name"),We("factory"),We("configFields"),ve("apis",{}),ve("extraApis",{})]),HD=qi([We("name"),We("factory"),We("configFields"),We("partFields"),ve("apis",{}),ve("extraApis",{})]),rl=t=>{const s=ai("Sketcher for "+t.name,$D,t),a=f=>m_(s.name,s.configFields,s.factory,f),l=ot(s.apis,Xh),u=ot(s.extraApis,(f,m)=>jb(f,m));return{name:s.name,configFields:s.configFields,sketch:a,...l,...u}},Pa=t=>{const s=ai("Sketcher for "+t.name,HD,t),a=m=>ng(s.name,s.configFields,s.partFields,s.factory,m),l=Ih(s.name,s.partFields),u=ot(s.apis,Xh),f=ot(s.extraApis,(m,p)=>jb(m,p));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:l,...u,...f}},$l=rl({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:vv(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[ve("components",[]),vr("containerBehaviours",[]),ve("events",{}),ve("domModification",{}),ve("eventOrder",{})]}),qw="data-initial-z-index",Gy=t=>{Ea(t.element).filter(si).each(s=>{tr(s,qw).fold(()=>ft(s,"z-index"),a=>hn(s,"z-index",a)),us(s,qw)})},g_=t=>{Ea(t.element).filter(si).each(s=>{Y(s,"z-index").each(a=>{cn(s,qw,a)}),hn(s,"z-index",O(t.element,"z-index"))})},eE=(t,s)=>{t.getSystem().addToGui(s),g_(s)},Ya=t=>{Gy(t),t.getSystem().removeFromGui(t)},VD=(t,s,a)=>t.getSystem().build($l.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var zD=Ti("snaps",[We("getSnapPoints"),to("onSensor"),We("leftAttr"),We("topAttr"),ve("lazyViewport",ma),ve("mustSnap",!1)]);const Ky=[ve("useFixed",at),We("blockerClass"),ve("getTarget",lt),ve("onDrag",q),ve("repositionTarget",!0),ve("onDrop",q),Zo("getBounds",ma),zD],h_=t=>cf(Y(t,"left"),Y(t,"top"),Y(t,"position"),(s,a,l)=>(l==="fixed"?$d:tg)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=dc(t);return sl(s.left,s.top)}),UD=(t,s,a,l,u)=>{const f=u.bounds,m=eg(s,a,l),p=qs(m.left,f.x,f.x+f.width-u.width),v=qs(m.top,f.y,f.y+f.height-u.height),C=sl(p,v);return s.fold(()=>{const E=DD(C,a,l);return tg(E.left,E.top)},te(C),()=>{const E=Wy(C,a,l);return $d(E.left,E.top)})},ZD=(t,s,a,l,u,f,m)=>{const p=s.fold(()=>{const v=jy(a,f.left,f.top),C=Wy(v,l,u);return $d(C.left,C.top)},v=>{const C=c_(t,v,a,f,l,u);return C.extra.each(E=>{v.onSensor(t,E)}),C.coord});return UD(t,p,l,u,m)},p_=(t,s,a,l)=>{const u=s.getTarget(t.element);if(s.repositionTarget){const f=ua(t.element),m=fa(f),p=It(u),v=h_(u),C=ZD(t,s.snaps,v,m,p,l,a),E=Xw(C,m,p);b(u,E)}s.onDrag(t,u,l)},WD=(t,s)=>({bounds:t.getBounds(),height:os(s.element),width:vh(s.element)}),tE=(t,s,a,l,u)=>{const f=a.update(l,u),m=a.getStartData().getOrThunk(()=>WD(s,t));f.each(p=>{p_(t,s,m,p)})},jD=(t,s,a,l)=>{s.each(Ya),a.snaps.each(f=>{PD(t,f)});const u=a.getTarget(t.element);l.reset(),a.onDrop(t,u)},Yy=t=>(s,a)=>{const l=u=>{a.setStartData(WD(s,u))};return Xo([Fe(xx(),u=>{a.getStartData().each(()=>l(u))}),...t(s,a,l)])},v_=t=>Xo([Fe(Ai(),t.forceDrop),Fe($b(),t.drop),Fe(R1(),(s,a)=>{t.move(a.event)}),Fe(P1(),t.delayDrop)]);var GD=Object.freeze({__proto__:null,getData:t=>x.from(ws(t.x,t.y)),getDelta:(t,s)=>ws(s.left-t.left,s.top-t.top)});const nE=(t,s,a)=>[Fe(Ai(),(l,u)=>{if(u.event.raw.button!==0)return;u.stop();const m=()=>jD(l,x.some(C),t,s),p=HO(m,200),v={drop:m,delayDrop:p.schedule,forceDrop:m,move:D=>{p.cancel(),tE(l,t,s,GD,D)}},C=VD(l,t.blockerClass,v_(v));(()=>{a(l),eE(l,C)})()})],y_=[...Ky,Do("dragger",{handlers:Yy(nE)})],C_=t=>Xo([Fe(xd(),t.forceDrop),Fe(Xc(),t.drop),Fe(Cc(),t.drop),Fe(wf(),(s,a)=>{t.move(a.event)})]),S_=t=>{const s=t[0];return x.some(ws(s.clientX,s.clientY))};var oE=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?S_(a):x.none()},getDelta:(t,s)=>ws(s.left-t.left,s.top-t.top)});const Hd=(t,s,a)=>{const l=Gn(),u=f=>{jD(f,l.get(),t,s),l.clear()};return[Fe(xd(),(f,m)=>{m.stop();const p=()=>u(f),v={drop:p,delayDrop:q,forceDrop:p,move:D=>{tE(f,t,s,oE,D)}},C=VD(f,t.blockerClass,C_(v));l.set(C),(()=>{a(f),eE(f,C)})()}),Fe(wf(),(f,m)=>{m.stop(),tE(f,t,s,oE,m.event)}),Fe(Xc(),(f,m)=>{m.stop(),u(f)}),Fe(Cc(),u)]},KD=[...Ky,Do("dragger",{handlers:Yy(Hd)})],YD=(t,s,a)=>[...nE(t,s,a),...Hd(t,s,a)],XD=[...Ky,Do("dragger",{handlers:Yy(YD)})];var w_=Object.freeze({__proto__:null,mouse:y_,touch:KD,mouseOrTouch:XD}),T_=Object.freeze({__proto__:null,init:()=>{let t=x.none(),s=x.none();const a=()=>{t=x.none(),s=x.none()},l=(v,C)=>{const E=t.map(D=>v.getDelta(D,C));return t=x.some(C),E},u=(v,C)=>v.getData(C).bind(E=>l(v,E)),f=v=>{s=x.some(v)},m=()=>s,p=te({});return ki({readState:p,reset:a,update:u,getStartData:m,setStartData:f})}});const og=At({branchKey:"mode",branches:w_,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:x.from(t.extra)})},state:T_,apis:BD}),A_=["input","textarea"],sE=t=>{const s=xl(t);return Kt(A_,s)},Xy=(t,s)=>{const a=s.getRoot(t).getOr(t.element);Ko(a,s.invalidClass),s.notify.each(l=>{sE(t.element)&&cn(t.element,"aria-invalid",!1),l.getContainer(t).each(u=>{pf(u,l.validHtml)}),l.onValid(t)})},Jy=(t,s,a,l)=>{const u=s.getRoot(t).getOr(t.element);Es(u,s.invalidClass),s.notify.each(f=>{sE(t.element)&&cn(t.element,"aria-invalid",!0),f.getContainer(t).each(m=>{pf(m,l)}),f.onInvalid(t,l)})},JD=(t,s,a)=>s.validator.fold(()=>ls.pure(xn.value(!0)),l=>l.validate(t)),Zu=(t,s,a)=>(s.notify.each(l=>{l.onValidate(t)}),JD(t,s).map(l=>t.getSystem().isConnected()?l.fold(u=>(Jy(t,s,a,u),xn.error(u)),u=>(Xy(t,s),xn.value(u))):xn.error("No longer in system")));var QD=Object.freeze({__proto__:null,markValid:Xy,markInvalid:Jy,query:JD,run:Zu,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Qr(a,s.invalidClass)}}),k_=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>Xo([Fe(a.onEvent,l=>{Zu(l,t,s).get(lt)})].concat(a.validateOnLoad?[Ho(l=>{Zu(l,t,s).get(q)})]:[]))).getOr({})}),yv=[We("invalidClass"),ve("getRoot",x.none),Ti("notify",[ve("aria","alert"),ve("getContainer",x.none),ve("validHtml",""),to("onValid"),to("onInvalid"),to("onValidate")]),Ti("validator",[We("validate"),ve("onEvent","input"),ve("validateOnLoad",!0)])];const sg=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},rE=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var D_=Object.freeze({__proto__:null,onLoad:sg,onUnload:rE,setValue:(t,s,a,l)=>{s.store.manager.setValue(t,s,a,l)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),e5=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[Ho((l,u)=>{sg(l,t,s)}),qc((l,u)=>{rE(l,t,s)})]:[nw(t,s,sg)];return Xo(a)}});const Wu=()=>{const t=Dt(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,l=()=>{t.set(null)};return ki({set:t.set,get:t.get,isNotSet:a,clear:l,readState:s})},aE=()=>ki({readState:q}),t5=()=>{const t=Dt({}),s=Dt({});return ki({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:m=>Be(t.get(),m).orThunk(()=>Be(s.get(),m)),update:m=>{const p=t.get(),v=s.get(),C={},E={};tt(m,D=>{C[D.value]=D,Be(D,"meta").each(I=>{Be(I,"text").each(H=>{E[H]=D})})}),t.set({...p,...C}),s.set({...v,...E})},clear:()=>{t.set({}),s.set({})}})};var n5=Object.freeze({__proto__:null,memory:Wu,dataset:t5,manual:aE,init:t=>t.store.manager.state(t)});const iE=(t,s,a,l)=>{const u=s.store;a.update([l]),u.setValue(t,l),s.onSetValue(t,l)},lE=(t,s,a)=>{const l=s.store,u=l.getDataKey(t);return a.lookup(u).getOrThunk(()=>l.getFallbackEntry(u))},o5=(t,s,a)=>{s.store.initialValue.each(u=>{iE(t,s,a,u)})},R_=(t,s,a)=>{a.clear()};var P_=[uo("initialValue"),We("getFallbackEntry"),We("getDataKey"),We("setValue"),Do("manager",{setValue:iE,getValue:lE,onLoad:o5,onUnload:R_,state:t5})];const N_=(t,s,a)=>s.store.getValue(t),Qy=(t,s,a,l)=>{s.store.setValue(t,l),s.onSetValue(t,l)},cE=(t,s,a)=>{s.store.initialValue.each(l=>{s.store.setValue(t,l)})};var qy=[We("getValue"),ve("setValue",q),uo("initialValue"),Do("manager",{setValue:Qy,getValue:N_,onLoad:cE,onUnload:q,state:wc.init})];const s5=(t,s,a,l)=>{a.set(l),s.onSetValue(t,l)},I_=(t,s,a)=>a.get(),r5=(t,s,a)=>{s.store.initialValue.each(l=>{a.isNotSet()&&a.set(l)})},a5=(t,s,a)=>{a.clear()};var i5=[uo("initialValue"),Do("manager",{setValue:s5,getValue:I_,onLoad:r5,onUnload:a5,state:Wu})],l5=[yc("store",{mode:"memory"},wi("mode",{memory:i5,manual:qy,dataset:P_})),to("onSetValue"),ve("resetOnDom",!1)];const Ct=Vr({fields:l5,name:"representing",active:e5,apis:D_,extra:{setValueFrom:(t,s)=>{const a=Ct.getValue(s);Ct.setValue(t,a)}},state:n5}),Dc=Vr({fields:yv,name:"invalidating",active:k_,apis:QD,extra:{validation:t=>s=>{const a=Ct.getValue(s);return ls.pure(t(a))}}});var B_=Object.freeze({__proto__:null,exhibit:(t,s)=>Ec({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const uE=Pr.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),c5=(t,s,a,l,u,f)=>{const m=s.rect,p=m.x-a,v=m.y-l,C=m.width,E=m.height,D=u-(p+C),I=f-(v+E),H=x.some(p),W=x.some(v),Q=x.some(D),se=x.some(I),X=x.none();return _7(s.direction,()=>Fl(t,H,W,X,X),()=>Fl(t,X,W,Q,X),()=>Fl(t,H,X,X,se),()=>Fl(t,X,X,Q,se),()=>Fl(t,H,W,X,X),()=>Fl(t,H,X,X,se),()=>Fl(t,H,W,X,X),()=>Fl(t,X,W,Q,X))},dE=(t,s)=>t.fold(()=>{const a=s.rect;return Fl("absolute",x.some(a.x),x.some(a.y),x.none(),x.none())},(a,l,u,f)=>c5("absolute",s,a,l,u,f),(a,l,u,f)=>c5("fixed",s,a,l,u,f)),fE=(t,s)=>{const a=gt(A1,s),l=t.fold(a,a,()=>{const m=fa();return A1(s).translate(-m.left,-m.top)}),u=vh(s),f=os(s);return $s(l.left,l.top,u,f)},L_=(t,s)=>s.fold(()=>t.fold(ma,ma,$s),a=>t.fold(te(a),te(a),()=>{const l=mE(t,a.x,a.y);return $s(l.left,l.top,a.width,a.height)})),mE=(t,s,a)=>{const l=ws(s,a),u=()=>{const f=fa();return l.translate(-f.left,-f.top)};return t.fold(te(l),te(l),u)},Cv=(t,s,a,l)=>t.fold(s,a,l);uE.none;const F_=uE.relative,Sv=uE.fixed,gE=(t,s)=>({anchorBox:t,origin:s}),u5=(t,s)=>gE(t,s),xv=Pr.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),__=(t,s)=>{const{x:a,y:l,right:u,bottom:f}=s,{x:m,y:p,right:v,bottom:C,width:E,height:D}=t,I=m>=a&&m<=u,H=p>=l&&p<=f,W=I&&H,Q=v<=u&&v>=a,se=C<=f&&C>=l,X=Q&&se,ie=Math.min(E,m>=a?u-m:v-a),le=Math.min(D,p>=l?f-p:C-l);return{originInBounds:W,sizeInBounds:X,visibleW:ie,visibleH:le}},$_=(t,s)=>{const{x:a,y:l,right:u,bottom:f}=s,{x:m,y:p,width:v,height:C}=t,E=Math.max(a,u-v),D=Math.max(l,f-C),I=qs(m,a,E),H=qs(p,l,D),W=Math.min(I+v,u)-I,Q=Math.min(H+C,f)-H;return $s(I,H,W,Q)},d5=(t,s,a)=>{const l=te(s.bottom-a.y),u=te(a.bottom-s.y),f=$7(t,u,u,l),m=te(s.right-a.x),p=te(a.right-s.x);return{maxWidth:jO(t,p,p,m),maxHeight:f}},H_=(t,s,a,l)=>{const u=t.bubble,f=u.offset,m=V7(l,t.restriction,f),p=t.x+f.left,v=t.y+f.top,C=$s(p,v,s,a),{originInBounds:E,sizeInBounds:D,visibleW:I,visibleH:H}=__(C,m),W=E&&D,Q=W?C:$_(C,m),se=Q.width>0&&Q.height>0,{maxWidth:X,maxHeight:ie}=d5(t.direction,Q,l),le={rect:Q,maxHeight:ie,maxWidth:X,direction:t.direction,placement:t.placement,classes:{on:u.classesOn,off:u.classesOff},layout:t.label,testY:v};return W||t.alwaysFit?xv.fit(le):xv.nofit(le,I,H,se)},f5=(t,s,a,l,u,f)=>{const m=l.width,p=l.height,v=(E,D,I,H,W)=>{const Q=E(a,l,u,t,f),se=H_(Q,m,p,f);return se.fold(te(se),(X,ie,le,xe)=>(W===xe?le>H||ie>I:!W&&xe)?se:xv.nofit(D,I,H,W))};return Fo(s,(E,D)=>{const I=gt(v,D);return E.fold(te(E),I)},xv.nofit({rect:a,maxHeight:l.height,maxWidth:l.width,direction:ey(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(lt,lt)},m5=["top","bottom","right","left"],e2="data-alloy-transition-timer",g5=(t,s)=>_B(t,s.classes),t2=(t,s,a)=>a.exists(l=>{const u=t.mode;return u==="all"?!0:l[u]!==s[u]}),hE=(t,s)=>{const a=l=>parseFloat(l).toFixed(3);return Xt(s,(l,u)=>{const f=t[u].map(a),m=l.map(a);return!dm(f,m)}).isSome()},pE=t=>{const s=f=>{const p=O(t,f).split(/\s*,\s*/);return qn(p,Gi)},a=f=>{if(B(f)&&/^[\d.]+/.test(f)){const m=parseFloat(f);return Uo(f,"ms")?m:m*1e3}else return 0},l=s("transition-delay"),u=s("transition-duration");return Fo(u,(f,m,p)=>{const v=a(l[p])+a(m);return Math.max(f,v)},0)},V_=(t,s)=>{const a=ns(),l=ns();let u;const f=C=>{var E;const D=(E=C.raw.pseudoElement)!==null&&E!==void 0?E:"";return vo(C.target,t)&&Ki(D)&&Kt(m5,C.raw.propertyName)},m=C=>{if(fe(C)||f(C)){a.clear(),l.clear();const E=C==null?void 0:C.raw.type;(fe(E)||E===Ah())&&(clearTimeout(u),us(t,e2),Qi(t,s.classes))}},p=xr(t,x7(),C=>{f(C)&&(p.unbind(),a.set(xr(t,Ah(),m)),l.set(xr(t,S7(),m)))}),v=pE(t);requestAnimationFrame(()=>{u=setTimeout(m,v+17),cn(t,e2,u)})},z_=(t,s)=>{Am(t,s.classes),tr(t,e2).each(a=>{clearTimeout(parseInt(a,10)),us(t,e2)}),V_(t,s)},U_=(t,s,a,l,u,f)=>{const m=t2(l,u,f);if(m||g5(t,l)){hn(t,"position",a.position);const p=fE(s,t),v=dE(s,{...u,rect:p}),C=Qs(m5,E=>v[E]);hE(a,C)&&(b(t,C),m&&z_(t,l),wn(t))}else Qi(t,l.classes)},Z_=t=>({width:Math.ceil(vb(t)),height:os(t)}),h5=(t,s,a,l)=>{ft(s,"max-height"),ft(s,"max-width");const u=Z_(s);return f5(s,l.preference,t,u,a,l.bounds)},p5=(t,s)=>{const a=s.classes;Qi(t,a.off),Am(t,a.on)},W_=(t,s,a)=>{const l=a.maxHeightFunction;l(t,s.maxHeight)},j_=(t,s,a)=>{const l=a.maxWidthFunction;l(t,s.maxWidth)},G_=(t,s,a)=>{const l=dE(a.origin,s);a.transition.each(u=>{U_(t,a.origin,l,u,s,a.lastPlacement)}),TD(t,l)},K_=(t,s)=>{oy(t,s.placement)},v5=(t,s,a)=>t[s]===void 0?a:t[s],Y_=(t,s,a,l,u,f,m,p)=>{const v=v5(m,"maxHeightFunction",Qx()),C=v5(m,"maxWidthFunction",q),E=t.anchorBox,D=t.origin,I={bounds:L_(D,f),origin:D,preference:l,maxHeightFunction:v,maxWidthFunction:C,lastPlacement:u,transition:p};return b5(E,s,a,I)},b5=(t,s,a,l)=>{const u=h5(t,s,a,l);return G_(s,u,l),K_(s,u),p5(s,u),W_(s,u,l),j_(s,u,l),{layout:u.layout,placement:u.placement}},n2=lt,$f=()=>Ti("layouts",[We("onLtr"),We("onRtl"),uo("onBottomLtr"),uo("onBottomRtl")]),o2=(t,s,a,l,u,f,m)=>{const p=m.map(W7).getOr(!1),v=s.layouts.map(H=>H.onLtr(t)),C=s.layouts.map(H=>H.onRtl(t)),E=p?s.layouts.bind(H=>H.onBottomLtr.map(W=>W(t))).or(v).getOr(u):v.getOr(a),D=p?s.layouts.bind(H=>H.onBottomRtl.map(W=>W(t))).or(C).getOr(f):C.getOr(l);return S1(E,D)(t)},X_=(t,s,a)=>{const l=s.hotspot,u=fE(a,l.element),f=o2(t.element,s,Pd(),Yx(),Kx(),Rd(),x.some(s.hotspot.element));return x.some(n2({anchorBox:u,bubble:s.bubble.getOr(qb()),overrides:s.overrides,layouts:f}))};var J_=[We("hotspot"),uo("bubble"),ve("overrides",{}),$f(),Do("placement",X_)];const ig=(t,s,a)=>{const l=mE(a,s.x,s.y),u=$s(l.left,l.top,s.width,s.height),f=o2(t.element,s,JO(),QO(),JO(),QO(),x.none());return x.some(n2({anchorBox:u,bubble:s.bubble,overrides:s.overrides,layouts:f}))};var Q_=[We("x"),We("y"),ve("height",0),ve("width",0),ve("bubble",qb()),ve("overrides",{}),$f(),Do("placement",ig)];const y5=Pr.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),lg=t=>t.fold(lt,(s,a,l)=>s.translate(-a,-l)),C5=t=>t.fold(lt,lt),S5=t=>Fo(t,(s,a)=>s.translate(a.left,a.top),ws(0,0)),Hf=t=>{const s=Le(t,lg);return S5(s)},x5=t=>{const s=Le(t,C5);return S5(s)},q_=y5.screen,Hl=y5.absolute,w5=(t,s,a)=>{const l=wl(a.root).dom,u=f=>{const m=ua(f),p=ua(t.element);return vo(m,p)};return x.from(l.frameElement).map(ht.fromDom).filter(u).map(dc)},vE=(t,s,a)=>{const l=ua(t.element),u=fa(l),f=w5(t,s,a).getOr(u);return Hl(f,u.left,u.top)},s2=(t,s,a,l)=>{const u=q_(ws(t,s));return x.some(_r(u,a,l))},E5=(t,s,a,l,u)=>t.map(f=>{const m=[s,f.point],p=Cv(l,()=>x5(m),()=>x5(m),()=>Hf(m)),v=s7(p.left,p.top,f.width,f.height),C=a.showAbove?Kx():Pd(),E=a.showAbove?Rd():Yx(),D=o2(u,a,C,E,C,E,x.none());return n2({anchorBox:v,bubble:a.bubble.getOr(qb()),overrides:a.overrides,layouts:D})}),r2=(t,s,a)=>{const l=vE(t,a,s);return s.node.filter(Ds).bind(u=>{const f=u.dom.getBoundingClientRect(),m=s2(f.left,f.top,f.width,f.height),p=s.node.getOr(t.element);return E5(m,l,s,a,p)})};var T5=[We("node"),We("root"),uo("bubble"),$f(),ve("overrides",{}),ve("showAbove",!1),Do("placement",r2)];const a2=(t,s)=>({element:t,offset:s}),e$=(t,s)=>{const a=da(t);if(a.length===0)return a2(t,s);if(s<a.length)return a2(a[s],0);{const l=a[a.length-1],u=hd(l)?qS(l).length:da(l).length;return a2(l,u)}},wv=(t,s)=>hd(t)?a2(t,s):e$(t,s),Ev=t=>t.foffset!==void 0,bE=(t,s)=>s.getSelection.getOrThunk(()=>()=>QB(t))().map(l=>{if(Ev(l)){const u=wv(l.start,l.soffset),f=wv(l.finish,l.foffset);return T1.range(u.element,u.offset,f.element,f.offset)}else return l}),A5=(t,s,a)=>{const l=wl(s.root).dom,u=vE(t,a,s),f=bE(l,s).bind(v=>{if(Ev(v))return qB(l,T1.exactFromRange(v)).orThunk(()=>{const E=ht.fromText(Mt);wm(v.start,E);const D=gO(l,T1.exact(E,0,E,1));return uc(E),D}).bind(E=>s2(E.left,E.top,E.width,E.height));{const C=ot(v,D=>D.dom.getBoundingClientRect()),E={left:Math.min(C.firstCell.left,C.lastCell.left),right:Math.max(C.firstCell.right,C.lastCell.right),top:Math.min(C.firstCell.top,C.lastCell.top),bottom:Math.max(C.firstCell.bottom,C.lastCell.bottom)};return s2(E.left,E.top,E.right-E.left,E.bottom-E.top)}}),p=bE(l,s).bind(v=>Ev(v)?si(v.start)?x.some(v.start):zn(v.start):x.some(v.firstCell)).getOr(t.element);return E5(f,u,s,a,p)};var O5=[uo("getSelection"),We("root"),uo("bubble"),$f(),ve("overrides",{}),ve("showAbove",!1),Do("placement",A5)];const i2="link-layout",l2=t=>t.x+t.width,yE=(t,s)=>t.x-s.width,k5=(t,s)=>t.y-s.height+t.height,D5=t=>t.y,M5=(t,s,a)=>na(l2(t),D5(t),a.southeast(),ey(),"southeast",Er(t,{left:0,top:2}),i2),c2=(t,s,a)=>na(yE(t,s),D5(t),a.southwest(),Vx(),"southwest",Er(t,{right:1,top:2}),i2),R5=(t,s,a)=>na(l2(t),k5(t,s),a.northeast(),zx(),"northeast",Er(t,{left:0,bottom:3}),i2),op=(t,s,a)=>na(yE(t,s),k5(t,s),a.northwest(),Ux(),"northwest",Er(t,{right:1,bottom:3}),i2),Tv=()=>[M5,c2,R5,op],CE=()=>[c2,M5,op,R5],P5=(t,s,a)=>{const l=fE(a,s.item.element),u=o2(t.element,s,Tv(),CE(),Tv(),CE(),x.none());return x.some(n2({anchorBox:l,bubble:qb(),overrides:s.overrides,layouts:u}))};var t$=[We("item"),$f(),ve("overrides",{}),Do("placement",P5)],n$=wi("type",{selection:O5,node:T5,hotspot:J_,submenu:t$,makeshift:Q_});const o$=[Ei("classes",Gs),As("mode","all",["all","layout","placement"])],s$=[ve("useFixed",at),uo("getBounds")],SE=[el("anchor",n$),Ti("transition",o$)],N5=()=>{const t=document.documentElement;return Sv(0,0,t.clientWidth,t.clientHeight)},I5=t=>{const s=dc(t.element),a=t.element.dom.getBoundingClientRect();return F_(s.left,s.top,a.width,a.height)},xE=(t,s,a,l,u,f)=>{const m=u5(s.anchorBox,t);return Y_(m,l.element,s.bubble,s.layouts,u,a,s.overrides,f)},r$=(t,s,a,l,u)=>{const f=x.none();wE(t,s,a,l,u,f)},wE=(t,s,a,l,u,f)=>{const m=ai("placement.info",rn(SE),u),p=m.anchor,v=l.element,C=a.get(l.uid);Jh(()=>{hn(v,"position","fixed");const E=Y(v,"visibility");hn(v,"visibility","hidden");const D=s.useFixed()?N5():I5(t);p.placement(t,p,D).each(I=>{const H=f.orThunk(()=>s.getBounds.map(xt)),W=xE(D,I,H,l,C,m.transition);a.set(l.uid,W)}),E.fold(()=>{ft(v,"visibility")},I=>{hn(v,"visibility",I)}),Y(v,"left").isNone()&&Y(v,"top").isNone()&&Y(v,"right").isNone()&&Y(v,"bottom").isNone()&&wa(Y(v,"position"),"fixed")&&ft(v,"position")},v)};var a$=Object.freeze({__proto__:null,position:r$,positionWithinBounds:wE,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,l)=>{const u=l.element;tt(["position","left","right","top","bottom"],f=>ft(u,f)),U7(u),a.clear(l.uid)}}),l$=Object.freeze({__proto__:null,init:()=>{let t={};return ki({readState:()=>t,clear:u=>{me(u)?delete t[u]:t={}},set:(u,f)=>{t[u]=f},get:u=>Be(t,u)})}});const ba=Vr({fields:s$,name:"positioning",active:B_,apis:a$,state:l$}),EE=(t,s)=>s.universal?t:qn(t,a=>Kt(s.channels,a));var B5=Object.freeze({__proto__:null,events:t=>Xo([Fe(Bm(),(s,a)=>{const l=t.channels,u=Me(l),f=a,m=EE(u,f);tt(m,p=>{const v=l[p],C=v.schema,E=ai("channel["+p+`] data
Receiver: `+Co(s.element),C,f.data);v.onReceive(s,E)})})])}),u$=[el("channels",TO(xn.value,qi([hr("onReceive"),ve("schema",hc())])))];const Xa=Vr({fields:u$,name:"receiving",active:B5});var d$=Object.freeze({__proto__:null,events:(t,s)=>{const a=(l,u)=>{t.updateState.each(f=>{const m=f(l,u);s.set(m)}),t.renderComponents.each(f=>{const m=f(u,s.get());(t.reuseDom?oD:ww)(l,m)})};return Xo([Fe(Bm(),(l,u)=>{const f=u;if(!f.universal){const m=t.channel;Kt(f.channels,m)&&a(l,f.data)}}),Ho((l,u)=>{t.initialData.each(f=>{a(l,f)})})])}}),f$=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),m$=[We("channel"),uo("renderComponents"),uo("updateState"),uo("initialData"),ea("reuseDom",!0)],TE=Object.freeze({__proto__:null,init:()=>{const t=Dt(x.none()),s=()=>t.set(x.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Mi=Vr({fields:m$,name:"reflecting",active:d$,apis:f$,state:TE}),Av=(t,s,a,l)=>{a.get().each(m=>{ci(t)});const u=s.getAttachPoint(t);Ac(u,t);const f=t.getSystem().build(l);return Ac(t,f),a.set(f),f},L5=(t,s,a,l)=>{const u=Av(t,s,a,l);return s.onOpen(t,u),u},h$=(t,s,a,l)=>a.get().map(()=>Av(t,s,a,l)),p$=(t,s,a,l,u)=>{u2(t,s),L5(t,s,a,l),u(),H5(t,s)},F5=(t,s,a)=>{a.get().each(l=>{ci(t),ar(t),s.onClose(t,l),a.clear()})},_5=(t,s,a)=>a.isOpen(),v$=(t,s,a,l)=>_5(t,s,a)&&a.get().exists(u=>s.isPartOf(t,u,l)),$5=(t,s,a)=>a.get(),b$=(t,s,a,l)=>{Y(t.element,s).fold(()=>{us(t.element,a)},u=>{cn(t.element,a,u)}),hn(t.element,s,l)},y$=(t,s,a)=>{tr(t.element,a).fold(()=>ft(t.element,s),l=>hn(t.element,s,l))},u2=(t,s,a)=>{const l=s.getAttachPoint(t);hn(t.element,"position",ba.getMode(l)),b$(t,"visibility",s.cloakVisibilityAttr,"hidden")},cg=t=>fo(["top","left","right","bottom"],s=>Y(t,s).isSome()),H5=(t,s,a)=>{cg(t.element)||ft(t.element,"position"),y$(t,"visibility",s.cloakVisibilityAttr)};var C$=Object.freeze({__proto__:null,cloak:u2,decloak:H5,open:L5,openWhileCloaked:p$,close:F5,isOpen:_5,isPartOf:v$,getState:$5,setContent:h$}),z5=Object.freeze({__proto__:null,events:(t,s)=>Xo([Fe(Hb(),(a,l)=>{F5(a,t,s)})])}),S$=[to("onOpen"),to("onClose"),We("isPartOf"),We("getAttachPoint"),ve("cloakVisibilityAttr","data-precloak-visibility")],U5=Object.freeze({__proto__:null,init:()=>{const t=Gn(),s=te("not-implemented");return ki({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Xn=Vr({fields:S$,name:"sandboxing",active:z5,apis:C$,state:U5}),sp=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),ju=t=>t.dimension.property,Vd=(t,s)=>t.dimension.getDimension(s),d2=(t,s)=>{const a=sp(t,s);Qi(a,[s.shrinkingClass,s.growingClass])},f2=(t,s)=>{Ko(t.element,s.openClass),Es(t.element,s.closedClass),hn(t.element,ju(s),"0px"),wn(t.element)},AE=(t,s)=>{Ko(t.element,s.closedClass),Es(t.element,s.openClass),ft(t.element,ju(s))},rp=(t,s,a,l)=>{a.setCollapsed(),hn(t.element,ju(s),Vd(s,t.element)),d2(t,s),f2(t,s),s.onStartShrink(t),s.onShrunk(t)},x$=(t,s,a,l)=>{const u=l.getOrThunk(()=>Vd(s,t.element));a.setCollapsed(),hn(t.element,ju(s),u),wn(t.element);const f=sp(t,s);Ko(f,s.growingClass),Es(f,s.shrinkingClass),f2(t,s),s.onStartShrink(t)},Z5=(t,s,a)=>{const l=Vd(s,t.element);(l==="0px"?rp:x$)(t,s,a,x.some(l))},m2=(t,s,a)=>{const l=sp(t,s),u=Qr(l,s.shrinkingClass),f=Vd(s,t.element);AE(t,s);const m=Vd(s,t.element);(u?()=>{hn(t.element,ju(s),f),wn(t.element)}:()=>{f2(t,s)})(),Ko(l,s.shrinkingClass),Es(l,s.growingClass),AE(t,s),hn(t.element,ju(s),m),a.setExpanded(),s.onStartGrow(t)},OE=(t,s,a)=>{if(a.isExpanded()){ft(t.element,ju(s));const l=Vd(s,t.element);hn(t.element,ju(s),l)}},w$=(t,s,a)=>{a.isExpanded()||m2(t,s,a)},kE=(t,s,a)=>{a.isExpanded()&&Z5(t,s,a)},E$=(t,s,a)=>{a.isExpanded()&&rp(t,s,a)},T$=(t,s,a)=>a.isExpanded(),DE=(t,s,a)=>a.isCollapsed(),W5=(t,s,a)=>{const l=sp(t,s);return Qr(l,s.growingClass)===!0},j5=(t,s,a)=>{const l=sp(t,s);return Qr(l,s.shrinkingClass)===!0};var A$=Object.freeze({__proto__:null,refresh:OE,grow:w$,shrink:kE,immediateShrink:E$,hasGrown:T$,hasShrunk:DE,isGrowing:W5,isShrinking:j5,isTransitioning:(t,s,a)=>W5(t,s)||j5(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?Z5:m2)(t,s,a)},disableTransitions:d2,immediateGrow:(t,s,a)=>{a.isExpanded()||(AE(t,s),hn(t.element,ju(s),Vd(s,t.element)),d2(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),O$=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const l=s.expanded;return Ec(l?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Nm(s.dimension.property,"0px")})},events:(t,s)=>Xo([$h(Ah(),(a,l)=>{l.event.raw.propertyName===t.dimension.property&&(d2(a,t),s.isExpanded()&&ft(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),k$=[We("closedClass"),We("openClass"),We("shrinkingClass"),We("growingClass"),uo("getAnimationRoot"),to("onShrunk"),to("onStartShrink"),to("onGrown"),to("onStartGrow"),ve("expanded",!1),el("dimension",wi("property",{width:[Do("property","width"),Do("getDimension",t=>or(t)+"px")],height:[Do("property","height"),Do("getDimension",t=>Vn(t)+"px")]}))],D$=Object.freeze({__proto__:null,init:t=>{const s=Dt(t.expanded),a=()=>"expanded: "+s.get();return ki({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:gt(s.set,!1),setExpanded:gt(s.set,!0),readState:a})}});const Na=Vr({fields:k$,name:"sliding",active:O$,apis:A$,state:D$});var M$=Object.freeze({__proto__:null,events:(t,s)=>{const l=t.stream.streams.setup(t,s);return Xo([Fe(t.event,l),qc(()=>s.cancel())].concat(t.cancelEvent.map(u=>[Fe(u,()=>s.cancel())]).getOr([])))}});const G5=t=>{const s=Dt(null);return ki({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:f=>{s.set(f)},cancel:()=>{const f=s.get();f!==null&&f.cancel()}})};var P$=Object.freeze({__proto__:null,throttle:G5,init:t=>t.stream.streams.state(t)});const N$=(t,s)=>{const a=t.stream,l=sc(t.onStream,a.delay);return s.setTimer(l),(u,f)=>{l.throttle(u,f),a.stopEvent&&f.stop()}};var I$=[el("stream",wi("mode",{throttle:[We("delay"),ve("stopEvent",!0),Do("streams",{setup:N$,state:G5})]})),ve("event","input"),uo("cancelEvent"),hr("onStream")];const ME=Vr({fields:I$,name:"streaming",active:M$,state:P$});var B$=Object.freeze({__proto__:null,exhibit:(t,s)=>Ec({attributes:Th([{key:s.tabAttr,value:"true"}])})}),RE=[ve("tabAttr","data-alloy-tabstop")];const No=Vr({fields:RE,name:"tabstopping",active:B$}),L$=(t,s,a)=>{const l=s.aria;l.update(t,l,a.get())},F$=(t,s,a)=>{s.toggleClass.each(l=>{a.get()?Es(t.element,l):Ko(t.element,l)})},Ov=(t,s,a,l)=>{const u=a.get();a.set(l),F$(t,s,a),L$(t,s,a),u!==l&&s.onToggled(t,l)},K5=(t,s,a)=>{Ov(t,s,a,!a.get())},_$=(t,s,a)=>{Ov(t,s,a,!0)},$$=(t,s,a)=>{Ov(t,s,a,!1)},H$=(t,s,a)=>a.get(),Y5=(t,s,a)=>{Ov(t,s,a,s.selected)};var V$=Object.freeze({__proto__:null,onLoad:Y5,toggle:K5,isOn:H$,on:_$,off:$$,set:Ov}),z$=Object.freeze({__proto__:null,exhibit:()=>Ec({}),events:(t,s)=>{const a=nL(t,s,K5),l=nw(t,s,Y5);return Xo(Yt([t.toggleOnExecute?[a]:[],[l]]))}});const X5=(t,s,a)=>{cn(t.element,"aria-pressed",a),s.syncWithExpanded&&J5(t,s,a)},U$=(t,s,a)=>{cn(t.element,"aria-selected",a)},Z$=(t,s,a)=>{cn(t.element,"aria-checked",a)},J5=(t,s,a)=>{cn(t.element,"aria-expanded",a)};var g2=[ve("selected",!1),uo("toggleClass"),ve("toggleOnExecute",!0),to("onToggled"),yc("aria",{mode:"none"},wi("mode",{pressed:[ve("syncWithExpanded",!1),Do("update",X5)],checked:[Do("update",Z$)],expanded:[Do("update",J5)],selected:[Do("update",U$)],none:[Do("update",q)]}))];const On=Vr({fields:g2,name:"toggling",active:z$,apis:V$,state:iL(!1)}),h2=yt("tooltip.exclusive"),kv=yt("tooltip.show"),Dv=yt("tooltip.hide"),Mv=yt("tooltip.immediateHide"),ug=yt("tooltip.immediateShow"),PE=(t,s,a)=>{t.getSystem().broadcastOn([h2],{})};var IE=Object.freeze({__proto__:null,hideAllExclusive:PE,immediateOpenClose:(t,s,a,l)=>Un(t,l?ug:Mv),isEnabled:(t,s,a)=>a.isEnabled(),setComponents:(t,s,a,l)=>{a.getTooltip().each(u=>{u.getSystem().isConnected()&&fn.set(u,l)})},setEnabled:(t,s,a,l)=>a.setEnabled(l)}),j$=Object.freeze({__proto__:null,events:(t,s)=>{const a=m=>{s.getTooltip().each(p=>{p.getSystem().isConnected()&&(ar(p),t.onHide(m,p),s.clearTooltip())}),s.clearTimer()},l=m=>{if(!s.isShowing()&&s.isEnabled()){PE(m);const p=t.lazySink(m).getOrDie(),v=m.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Xo(t.mode==="normal"?[Fe(Sc(),C=>{Un(m,kv)}),Fe(P1(),C=>{Un(m,Dv)})]:[]),behaviours:Qe([fn.config({})])});s.setTooltip(v),Ac(p,v),t.onShow(m,v),ba.position(p,v,{anchor:t.anchor(m)})}},u=m=>{s.getTooltip().each(p=>{const v=t.lazySink(m).getOrDie();ba.position(v,p,{anchor:t.anchor(m)})})},f=()=>{switch(t.mode){case"normal":return[Fe(ga(),m=>{Un(m,ug)}),Fe(I1(),m=>{Un(m,Mv)}),Fe(Sc(),m=>{Un(m,kv)}),Fe(P1(),m=>{Un(m,Dv)})];case"follow-highlight":return[Fe(zb(),(m,p)=>{Un(m,kv)}),Fe(Ex(),m=>{Un(m,Dv)})];case"children-normal":return[Fe(ga(),(m,p)=>{Xr(m.element).each(v=>{gd(p.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Un(m,ug)},C=>{s.isShowing()&&(t.onShow(m,C),u(m))})})}),Fe(I1(),m=>{Xr(m.element).fold(()=>{Un(m,Mv)},q)}),Fe(Sc(),m=>{Ro(m.element,"[data-mce-tooltip]:hover").each(p=>{s.getTooltip().fold(()=>{Un(m,kv)},v=>{s.isShowing()&&(t.onShow(m,v),u(m))})})}),Fe(P1(),m=>{Ro(m.element,"[data-mce-tooltip]:hover").fold(()=>{Un(m,Dv)},q)})];default:return[Fe(ga(),(m,p)=>{Xr(m.element).each(v=>{gd(p.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Un(m,ug)},C=>{s.isShowing()&&(t.onShow(m,C),u(m))})})}),Fe(I1(),m=>{Xr(m.element).fold(()=>{Un(m,Mv)},q)})]}};return Xo(Yt([[ew(m=>{t.onSetup(m)}),Fe(kv,m=>{s.resetTimer(()=>{l(m)},t.delayForShow())}),Fe(Dv,m=>{s.resetTimer(()=>{a(m)},t.delayForHide())}),Fe(ug,m=>{s.resetTimer(()=>{l(m)},0)}),Fe(Mv,m=>{s.resetTimer(()=>{a(m)},0)}),Fe(Bm(),(m,p)=>{const v=p;v.universal||Kt(v.channels,h2)&&a(m)}),qc(m=>{a(m)})],f()]))}}),G$=[We("lazySink"),We("tooltipDom"),ve("exclusive",!0),ve("tooltipComponents",[]),Zo("delayForShow",te(300)),Zo("delayForHide",te(100)),Zo("onSetup",q),As("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),ve("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:te([Us,rr,Ms,Hr,zs,pr]),onRtl:te([Us,rr,Ms,Hr,zs,pr])},bubble:pa(0,-2,{})})),to("onHide"),to("onShow")],Rv=Object.freeze({__proto__:null,init:()=>{const t=Dt(!0),s=Gn(),a=Gn(),l=()=>{s.on(clearTimeout)},u=(m,p)=>{l(),s.set(setTimeout(m,p))},f=te("not-implemented");return ki({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:l,resetTimer:u,readState:f,isEnabled:()=>t.get(),setEnabled:m=>t.set(m)})}});const Qo=Vr({fields:G$,name:"tooltipping",active:j$,state:Rv,apis:IE});var Y$=Object.freeze({__proto__:null,events:()=>Xo([rk(IO(),qe)]),exhibit:()=>Ec({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const dg=Vr({fields:[],name:"unselecting",active:Y$}),BE=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return Fo(s,(a,l)=>l.name==="class"?a:{...a,[l.name]:l.value},{})},X$=t=>Array.prototype.slice.call(t.dom.classList,0),Gu=t=>{const s=ht.fromHtml(t),a=da(s),l=BE(s),u=X$(s),f=a.length===0?{}:{innerHtml:ph(s)};return{tag:xl(s),classes:u,attributes:l,...f}},ao=t=>{const s=_D(t)&&Lo(t,"uid")?t.uid:Qh("memento");return{get:f=>f.getSystem().getByUid(s).getOrDie(),getOpt:f=>f.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}},br=F7,tu=Lx,Ku=te("dismiss.popups"),Vf=te("reposition.popups"),LE=te("mouse.released"),J$=(t,s)=>{const a=Dt(!1),l=Dt(!1);return{stop:()=>{a.set(!0)},cut:()=>{l.set(!0)},isStopped:a.get,isCut:l.get,event:t,setSource:s.set,getSource:s.get}},Q$=t=>{const s=Dt(!1);return{stop:()=>{s.set(!0)},cut:q,isStopped:s.get,isCut:at,event:t,setSource:Et("Cannot set source of a broadcasted event"),getSource:Et("Cannot get source of a broadcasted event")}},q$=t=>t.raw.which===dL[0]&&!Kt(["input","textarea"],xl(t.target))&&!w1(t.target,'[contenteditable="true"]'),eM=(t,s)=>{const a={stopBackspace:!0,...s},l=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],u=k7(a),f=Le(l.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),H=>xr(t,H,W=>{u.fireIfReady(W,H).each(se=>{se&&W.kill()}),a.triggerEvent(H,W)&&W.kill()})),m=Gn(),p=xr(t,"paste",H=>{u.fireIfReady(H,"paste").each(Q=>{Q&&H.kill()}),a.triggerEvent("paste",H)&&H.kill(),m.set(setTimeout(()=>{a.triggerEvent(Sx(),H)},0))}),v=xr(t,"keydown",H=>{a.triggerEvent("keydown",H)?H.kill():a.stopBackspace&&q$(H)&&H.prevent()}),C=xr(t,"focusin",H=>{a.triggerEvent("focusin",H)&&H.kill()}),E=Gn(),D=xr(t,"focusout",H=>{a.triggerEvent("focusout",H)&&H.kill(),E.set(setTimeout(()=>{a.triggerEvent(I1(),H)},0))});return{unbind:()=>{tt(f,H=>{H.unbind()}),v.unbind(),C.unbind(),D.unbind(),p.unbind(),m.on(clearTimeout),E.on(clearTimeout)}}},FE=(t,s)=>{const a=Be(t,"target").getOr(s);return Dt(a)},Pv=Pr.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),_E=(t,s,a,l,u,f)=>{const m=t(s,l),p=J$(a,u);return m.fold(()=>(f.logEventNoHandlers(s,l),Pv.complete()),v=>{const C=v.descHandler;return Xm(C)(p),p.isStopped()?(f.logEventStopped(s,v.element,C.purpose),Pv.stopped()):p.isCut()?(f.logEventCut(s,v.element,C.purpose),Pv.complete()):Ea(v.element).fold(()=>(f.logNoParent(s,v.element,C.purpose),Pv.complete()),D=>(f.logEventResponse(s,v.element,C.purpose),Pv.resume(D)))})},ap=(t,s,a,l,u,f)=>_E(t,s,a,l,u,f).fold(qe,m=>ap(t,s,a,m,u,f),at),tM=(t,s,a,l,u)=>{const f=FE(a,l);return _E(t,s,a,l,f,u)},eH=(t,s,a)=>{const l=Q$(s);return tt(t,u=>{const f=u.descHandler;Xm(f)(l)}),l.isStopped()},tH=(t,s,a,l)=>$E(t,s,a,a.target,l),$E=(t,s,a,l,u)=>{const f=FE(a,l);return ap(t,s,a,l,f,u)},nH=(t,s)=>({element:t,descHandler:s}),oH=(t,s)=>({id:t,descHandler:s}),nM=()=>{const t={},s=(m,p,v)=>{ze(v,(C,E)=>{const D=t[E]!==void 0?t[E]:{};D[p]=uD(C,m),t[E]=D})},a=(m,p)=>cv(p).bind(v=>Be(m,v)).map(v=>nH(p,v));return{registerId:s,unregisterId:m=>{ze(t,(p,v)=>{_t(p,m)&&delete p[m]})},filterByType:m=>Be(t,m).map(p=>Dn(p,(v,C)=>oH(C,v))).getOr([]),find:(m,p,v)=>Be(t,p).bind(C=>E1(v,E=>a(C,E),m))}},oM=()=>{const t=nM(),s={},a=C=>{const E=C.element;return cv(E).getOrThunk(()=>hF("uid-",C.element))},l=(C,E)=>{const D=s[E];if(D===C)f(C);else throw new Error('The tagId "'+E+'" is already used by: '+Co(D.element)+`
Cannot use it for: `+Co(C.element)+`
The conflicting element is`+(Ds(D.element)?" ":" not ")+"already in the DOM")},u=C=>{const E=a(C);Lo(s,E)&&l(C,E);const D=[C];t.registerId(D,E,C.events),s[E]=C},f=C=>{cv(C.element).each(E=>{delete s[E],t.unregisterId(E)})};return{find:(C,E,D)=>t.find(C,E,D),filter:C=>t.filterByType(C),register:u,unregister:f,getById:C=>Be(s,C)}},p2=t=>{const s=X=>Ea(t.element).fold(qe,ie=>vo(X,ie)),a=oM(),l=(X,ie)=>a.find(s,X,ie),u=eM(t.element,{triggerEvent:(X,ie)=>Ax(X,ie.target,le=>tH(l,X,ie,le))}),f={debugInfo:te("real"),triggerEvent:(X,ie,le)=>{Ax(X,ie,xe=>$E(l,X,le,ie,xe))},triggerFocus:(X,ie)=>{cv(X).fold(()=>{Fs(X)},le=>{Ax(Fu(),X,xe=>(tM(l,Fu(),{originator:ie,kill:q,prevent:q,target:X},X,xe),!1))})},triggerEscape:(X,ie)=>{f.triggerEvent("keydown",X.element,ie.event)},getByUid:X=>Q(X),getByDom:X=>se(X),build:va,buildOrPatch:By,addToGui:X=>{v(X)},removeFromGui:X=>{C(X)},addToWorld:X=>{m(X)},removeFromWorld:X=>{p(X)},broadcast:X=>{I(X)},broadcastOn:(X,ie)=>{H(X,ie)},broadcastEvent:(X,ie)=>{W(X,ie)},isConnected:qe},m=X=>{X.connect(f),hd(X.element)||(a.register(X),tt(X.components(),m),f.triggerEvent(Fm(),X.element,{target:X.element}))},p=X=>{hd(X.element)||(tt(X.components(),p),a.unregister(X)),X.disconnect()},v=X=>{Ac(t,X)},C=X=>{ar(X)},E=()=>{u.unbind(),uc(t.element)},D=X=>{const ie=a.filter(Bm());tt(ie,le=>{const xe=le.descHandler;Xm(xe)(X)})},I=X=>{D({universal:!0,data:X})},H=(X,ie)=>{D({universal:!1,channels:X,data:ie})},W=(X,ie)=>{const le=a.filter(X);return eH(le,ie)},Q=X=>a.getById(X).fold(()=>xn.error(new Error('Could not find component with uid: "'+X+'" in system.')),xn.value),se=X=>{const ie=cv(X).getOr("not found");return Q(ie)};return m(t),{root:t,element:t.element,destroy:E,add:v,remove:C,getByUid:Q,getByDom:se,addToWorld:m,removeFromWorld:p,broadcast:I,broadcastOn:H,broadcastEvent:W}},HE=()=>{const t=(s,a)=>{a.stop(),Zm(s)};return[Fe(Ef(),t),Fe(Lm(),t),Nf(xd()),Nf(Ai())]},v2=t=>{const s=a=>Id((l,u)=>{a(l),u.stop()});return Xo(Yt([t.map(s).toArray(),HE()]))},Ar=rl({name:"Button",factory:t=>{const s=v2(t.action),a=t.dom.tag,l=f=>Be(t.dom,"attributes").bind(m=>Be(m,f)),u=()=>{if(a==="button"){const f=l("type").getOr("button"),m=l("role").map(p=>({role:p})).getOr({});return{type:f,...m}}else return{role:t.role.getOr(l("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:kc.augment(t.buttonBehaviours,[on.config({}),Pt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:u()},eventOrder:t.eventOrder}},configFields:[ve("uid",void 0),We("dom"),ve("components",[]),kc.field("buttonBehaviours",[on,Pt]),uo("action"),uo("role"),ve("eventOrder",{})]}),VE=te([ve("shell",!1),We("makeItem"),ve("setupItem",q),kc.field("listBehaviours",[fn])]),rM=Ys({name:"items",overrides:()=>({behaviours:Qe([fn.config({})])})}),aM=te([rM]),iM=te("CustomList"),sH=(t,s,a,l)=>{const u=(p,v)=>{m(p).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},C=>{const E=fn.contents(C),D=v.length,I=D-E.length,H=I>0?Ao(I,()=>t.makeItem()):[],W=E.slice(D);tt(W,se=>fn.remove(C,se)),tt(H,se=>fn.append(C,se));const Q=fn.contents(C);tt(Q,(se,X)=>{t.setupItem(p,se,v[X],X)})})},f=t.shell?{behaviours:[fn.config({})],components:[]}:{behaviours:[],components:s},m=p=>t.shell?x.some(p):Po(p,t,"items");return{uid:t.uid,dom:t.dom,components:f.components,behaviours:zr(t.listBehaviours,f.behaviours),apis:{setItems:u}}},b2=Pa({name:iM(),configFields:VE(),partFields:aM(),factory:sH,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),Nv="aria-controls",lM=t=>aO(t,a=>{if(!si(a))return!1;const l=er(a,"id");return l!==void 0&&l.indexOf(Nv)>-1}).bind(a=>{const l=er(a,"id"),u=fr(a);return Ro(u,`[${Nv}="${l}"]`)}),zE=()=>{const t=yt(Nv);return{id:t,link:l=>{cn(l,Nv,t)},unlink:l=>{us(l,Nv)}}},fg=(t,s)=>lM(s).exists(a=>mg(t,a)),mg=(t,s)=>sx(s,a=>vo(a,t.element),at)||fg(t,s),y2="alloy.item-hover",Iv="alloy.item-focus",cM="alloy.item-toggled",UE=t=>{(Xr(t.element).isNone()||on.isFocused(t))&&(on.isFocused(t)||on.focus(t),Zt(t,y2,{item:t}))},ZE=t=>{Zt(t,Iv,{item:t})},uM=(t,s)=>{Zt(t,cM,{item:t,state:s})},C2=te(y2),dM=te(Iv),rH=te(cM),fM=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),lt),mM=(t,s)=>({aria:{mode:s?"selected":"checked"},...xo(t,(a,l)=>l!=="exclusive"),onToggled:(a,l)=>{Ce(t.onToggled)&&t.onToggled(a,l),uM(a,l)}}),gM=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:fM(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:kc.augment(t.itemBehaviours,[t.toggling.fold(On.revoke,s=>On.config(mM(s,t.role.exists(a=>a==="option")))),on.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{ZE(s)}}),Pt.config({mode:"execution"}),Ct.config({store:{mode:"memory",initialValue:t.data}}),un("item-type-events",[...HE(),Fe(Sc(),UE),Fe(Oh(),on.focus)])]),components:t.components,eventOrder:t.eventOrder});var iH=[We("data"),We("components"),We("dom"),ve("hasSubmenu",!1),uo("toggling"),uo("role"),kc.field("itemBehaviours",[On,on,Pt,Ct]),ve("ignoreFocus",!1),ve("domModification",{}),Do("builder",gM),ve("eventOrder",{})];const hM=t=>({dom:t.dom,components:t.components,events:Xo([ak(Oh())])});var lH=[We("dom"),We("components"),Do("builder",hM)];const WE=te("item-widget"),jE=te([sr({name:"widget",overrides:t=>({behaviours:Qe([Ct.config({store:{mode:"manual",getValue:s=>t.data,setValue:q}})])})})]),pM=t=>{const s=Df(WE(),t,jE()),a=Dd(WE(),t,s.internals()),l=f=>Po(f,t,"widget").map(m=>(Pt.focusIn(m),m)),u=(f,m)=>Zh(m.event.target)?x.none():(t.autofocus&&m.setSource(f.element),x.none());return{dom:t.dom,components:a,domModification:t.domModification,events:Xo([Id((f,m)=>{l(f).each(p=>{m.stop()})}),Fe(Sc(),UE),Fe(Oh(),(f,m)=>{t.autofocus?l(f):on.focus(f)})]),behaviours:kc.augment(t.widgetBehaviours,[Ct.config({store:{mode:"memory",initialValue:t.data}}),on.config({ignore:t.ignoreFocus,onFocus:f=>{ZE(f)}}),Pt.config({mode:"special",focusIn:t.autofocus?f=>{l(f)}:hy(),onLeft:u,onRight:u,onEscape:(f,m)=>!on.isFocused(f)&&!t.autofocus?(on.focus(f),x.some(!0)):(t.autofocus&&m.setSource(f.element),x.none())})])}};var vM=[We("uid"),We("data"),We("components"),We("dom"),ve("autofocus",!1),ve("ignoreFocus",!1),kc.field("widgetBehaviours",[Ct,on,Pt]),ve("domModification",{}),Jb(jE()),Do("builder",pM)];const cH=wi("type",{widget:vM,item:iH,separator:lH}),uH=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),dH=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),fH=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),mH=te([$1({factory:{sketch:t=>{const s=ai("menu.spec item",cH,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>_t(s,"uid")?s:{...s,uid:Qh("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),x2=te([Hs("role"),We("value"),We("items"),We("dom"),We("components"),ve("eventOrder",{}),vr("menuBehaviours",[ro,Ct,Zn,Pt]),yc("movement",{mode:"menu",moveOnTab:!0},wi("mode",{grid:[Mh(),Do("config",uH)],matrix:[Do("config",dH),We("rowSelector"),ve("previousSelector",x.none)],menu:[ve("moveOnTab",!0),Do("config",fH)]})),KK(),ve("fakeFocus",!1),ve("focusManager",sw()),to("onHighlight"),to("onDehighlight"),ve("showMenuRole",!0)]),bM=te("alloy.menu-focus"),yM=(t,s)=>{const a=Yo(t.element,'[role="menuitemradio"][aria-checked="true"]');tt(a,l=>{vo(l,s.element)||t.getSystem().getByDom(l).each(u=>{On.off(u)})})},gH=(t,s,a,l)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:zr(t.menuBehaviours,[ro.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Ct.config({store:{mode:"memory",initialValue:t.value}}),Zn.config({find:x.some}),Pt.config(t.movement.config(t,t.movement))]),events:Xo([Fe(dM(),(u,f)=>{const m=f.event;u.getSystem().getByDom(m.target).each(p=>{ro.highlight(u,p),f.stop(),Zt(u,bM(),{menu:u,item:p})})}),Fe(C2(),(u,f)=>{const m=f.event.item;ro.highlight(u,m)}),Fe(rH(),(u,f)=>{const{item:m,state:p}=f.event;p&&er(m.element,"role")==="menuitemradio"&&yM(u,m)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),Yu=Pa({name:"Menu",configFields:x2(),partFields:mH(),factory:gH}),CM=t=>tn(t,(s,a)=>({k:s,v:a})),SM=(t,s,a,l)=>Be(a,l).bind(u=>Be(t,u).bind(f=>{const m=SM(t,s,a,f);return x.some([f].concat(m))})).getOr([]),xM=(t,s)=>{const a={};ze(t,(m,p)=>{tt(m,v=>{a[v]=p})});const l=s,u=CM(s),f=ot(u,(m,p)=>[p].concat(SM(a,l,u,p)));return ot(a,m=>Be(f,m).getOr([m]))},wM=()=>{const t=Dt({}),s=Dt({}),a=Dt({}),l=Gn(),u=Dt({}),f=()=>{t.set({}),s.set({}),a.set({}),l.clear()},m=()=>l.get().isNone(),p=(Re,vt)=>{s.set({...s.get(),[Re]:{type:"prepared",menu:vt}})},v=(Re,vt,Ke,Pe)=>{l.set(Re),t.set(Ke),s.set(vt),u.set(Pe);const St=xM(Pe,Ke);a.set(St)},C=Re=>Xt(t.get(),(vt,Ke)=>vt===Re),E=(Re,vt,Ke)=>Q(Re).bind(Pe=>C(Re).bind(St=>vt(St).map(Gt=>({triggeredMenu:Pe,triggeringItem:Gt,triggeringPath:Ke})))),D=(Re,vt)=>{const Ke=qn(X(Re).toArray(),Pe=>Q(Pe).isSome());return Be(a.get(),Re).bind(Pe=>{const St=Rr(Ke.concat(Pe)),Gt=ke(St,(Lt,Ln)=>E(Lt,vt,St.slice(0,Ln+1)).fold(()=>wa(l.get(),Lt)?[]:[x.none()],ln=>[x.some(ln)]));return fm(Gt)})},I=Re=>Be(t.get(),Re).map(vt=>{const Ke=Be(a.get(),Re).getOr([]);return[vt].concat(Ke)}),H=Re=>Be(a.get(),Re).bind(vt=>vt.length>1?x.some(vt.slice(1)):x.none()),W=Re=>Be(a.get(),Re),Q=Re=>se(Re).bind(GE),se=Re=>Be(s.get(),Re),X=Re=>Be(t.get(),Re);return{setMenuBuilt:p,setContents:v,expand:I,refresh:W,collapse:H,lookupMenu:se,lookupItem:X,otherMenus:Re=>{const vt=u.get();return Nt(Me(vt),Re)},getPrimary:()=>l.get().bind(Q),getMenus:()=>s.get(),clear:f,isClear:m,getTriggeringPath:D}},GE=t=>t.type==="prepared"?x.some(t.menu):x.none(),KE={init:wM,extractPreparedMenu:GE},EM=yt("tiered-menu-item-highlight"),TM=yt("tiered-menu-item-dehighlight"),hH=(t,s)=>{const a=Gn(),l=(Ze,it,Qt)=>ot(Qt,(yn,Ut)=>{const pn=()=>Yu.sketch({...yn,value:Ut,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Eo,bo)=>{Zt(Eo,EM,{menuComp:Eo,itemComp:bo})},onDehighlight:(Eo,bo)=>{Zt(Eo,TM,{menuComp:Eo,itemComp:bo})},focusManager:t.fakeFocus?AL():sw()});return Ut===it?{type:"prepared",menu:Ze.getSystem().build(pn())}:{type:"notbuilt",nbMenu:pn}}),u=KE.init(),f=Ze=>{const it=l(Ze,t.data.primary,t.data.menus),Qt=v();return u.setContents(t.data.primary,it,t.data.expansions,Qt),u.getPrimary()},m=Ze=>Ct.getValue(Ze).value,p=(Ze,it,Qt)=>Tn(it,yn=>{if(!yn.getSystem().isConnected())return x.none();const Ut=ro.getCandidates(yn);return Ft(Ut,pn=>m(pn)===Qt)}),v=Ze=>ot(t.data.menus,(it,Qt)=>ke(it.items,yn=>yn.type==="separator"?[]:[yn.data.value])),C=ro.highlight,E=(Ze,it)=>{C(Ze,it),ro.getHighlighted(it).orThunk(()=>ro.getFirst(it)).each(Qt=>{t.fakeFocus?ro.highlight(it,Qt):G1(Ze,Qt.element,Oh())})},D=(Ze,it)=>yl(Le(it,Qt=>Ze.lookupMenu(Qt).bind(yn=>yn.type==="prepared"?x.some(yn.menu):x.none()))),I=(Ze,it,Qt)=>{const yn=D(it,it.otherMenus(Qt));tt(yn,Ut=>{Qi(Ut.element,[t.markers.backgroundMenu]),t.stayInDom||fn.remove(Ze,Ut)})},H=Ze=>a.get().getOrThunk(()=>{const it={},Qt=Yo(Ze.element,`.${t.markers.item}`),yn=qn(Qt,Ut=>er(Ut,"aria-haspopup")==="true");return tt(yn,Ut=>{Ze.getSystem().getByDom(Ut).each(pn=>{const Eo=m(pn);it[Eo]=pn})}),a.set(it),it}),W=(Ze,it)=>{const Qt=H(Ze);ze(Qt,(yn,Ut)=>{const pn=Kt(it,Ut);cn(yn.element,"aria-expanded",pn)})},Q=(Ze,it,Qt)=>x.from(Qt[0]).bind(yn=>it.lookupMenu(yn).bind(Ut=>{if(Ut.type==="notbuilt")return x.none();{const pn=Ut.menu,Eo=D(it,Qt.slice(1));return tt(Eo,bo=>{Es(bo.element,t.markers.backgroundMenu)}),Ds(pn.element)||fn.append(Ze,ol(pn)),Qi(pn.element,[t.markers.backgroundMenu]),E(Ze,pn),I(Ze,it,Qt),x.some(pn)}}));let se;(function(Ze){Ze[Ze.HighlightSubmenu=0]="HighlightSubmenu",Ze[Ze.HighlightParent=1]="HighlightParent"})(se||(se={}));const X=(Ze,it,Qt)=>{if(Qt.type==="notbuilt"){const yn=Ze.getSystem().build(Qt.nbMenu());return u.setMenuBuilt(it,yn),yn}else return Qt.menu},ie=(Ze,it,Qt=se.HighlightSubmenu)=>{if(it.hasConfigured(Bt)&&Bt.isDisabled(it))return x.some(it);{const yn=m(it);return u.expand(yn).bind(Ut=>(W(Ze,Ut),x.from(Ut[0]).bind(pn=>u.lookupMenu(pn).bind(Eo=>{const bo=X(Ze,pn,Eo);return Ds(bo.element)||fn.append(Ze,ol(bo)),t.onOpenSubmenu(Ze,it,bo,Rr(Ut)),Qt===se.HighlightSubmenu?(ro.highlightFirst(bo),Q(Ze,u,Ut)):(ro.dehighlightAll(bo),x.some(it))}))))}},le=(Ze,it)=>{const Qt=m(it);return u.collapse(Qt).bind(yn=>(W(Ze,yn),Q(Ze,u,yn).map(Ut=>(t.onCollapseMenu(Ze,it,Ut),Ut))))},xe=(Ze,it)=>{const Qt=m(it);return u.refresh(Qt).bind(yn=>(W(Ze,yn),Q(Ze,u,yn)))},Re=(Ze,it)=>Zh(it.element)?x.none():ie(Ze,it,se.HighlightSubmenu),vt=(Ze,it)=>Zh(it.element)?x.none():le(Ze,it),Ke=(Ze,it)=>le(Ze,it).orThunk(()=>t.onEscape(Ze,it).map(()=>Ze)),Pe=Ze=>(it,Qt)=>Ru(Qt.getSource(),`.${t.markers.item}`).bind(yn=>it.getSystem().getByDom(yn).toOptional().bind(Ut=>Ze(it,Ut).map(qe))),St=Xo([Fe(bM(),(Ze,it)=>{const Qt=it.event.item;u.lookupItem(m(Qt)).each(()=>{const yn=it.event.menu;ro.highlight(Ze,yn);const Ut=m(it.event.item);u.refresh(Ut).each(pn=>I(Ze,u,pn))})}),Id((Ze,it)=>{const Qt=it.event.target;Ze.getSystem().getByDom(Qt).each(yn=>{m(yn).indexOf("collapse-item")===0&&le(Ze,yn),ie(Ze,yn,se.HighlightSubmenu).fold(()=>{t.onExecute(Ze,yn)},q)})}),Ho((Ze,it)=>{f(Ze).each(Qt=>{fn.append(Ze,ol(Qt)),t.onOpenMenu(Ze,Qt),t.highlightOnOpen===Ka.HighlightMenuAndItem?E(Ze,Qt):t.highlightOnOpen===Ka.HighlightJustMenu&&C(Ze,Qt)})}),Fe(EM,(Ze,it)=>{t.onHighlightItem(Ze,it.event.menuComp,it.event.itemComp)}),Fe(TM,(Ze,it)=>{t.onDehighlightItem(Ze,it.event.menuComp,it.event.itemComp)}),...t.navigateOnHover?[Fe(C2(),(Ze,it)=>{const Qt=it.event.item;xe(Ze,Qt),ie(Ze,Qt,se.HighlightParent),t.onHover(Ze,Qt)})]:[]]),Gt=Ze=>ro.getHighlighted(Ze).bind(ro.getHighlighted),Lt=Ze=>{Gt(Ze).each(it=>{le(Ze,it)})},Ln=Ze=>{u.getPrimary().each(it=>{E(Ze,it)})},ln=Ze=>x.from(Ze.components()[0]).filter(it=>er(it.element,"role")==="menu"),Rt={collapseMenu:Lt,highlightPrimary:Ln,repositionMenus:Ze=>{u.getPrimary().bind(Qt=>Gt(Ze).bind(yn=>{const Ut=m(yn),pn=nn(u.getMenus()),Eo=yl(Le(pn,KE.extractPreparedMenu));return u.getTriggeringPath(Ut,bo=>p(Ze,Eo,bo))}).map(yn=>({primary:Qt,triggeringPath:yn}))).fold(()=>{ln(Ze).each(Qt=>{t.onRepositionMenu(Ze,Qt,[])})},({primary:Qt,triggeringPath:yn})=>{t.onRepositionMenu(Ze,Qt,yn)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:zr(t.tmenuBehaviours,[Pt.config({mode:"special",onRight:Pe(Re),onLeft:Pe(vt),onEscape:Pe(Ke),focusIn:(Ze,it)=>{u.getPrimary().each(Qt=>{G1(Ze,Qt.element,Oh())})}}),ro.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Zn.config({find:Ze=>ro.getHighlighted(Ze)}),fn.config({})]),eventOrder:t.eventOrder,apis:Rt,events:St}},pH=te("collapse-item"),AM=(t,s,a)=>({primary:t,menus:s,expansions:a}),OM=(t,s)=>({primary:t,menus:Nm(t,s),expansions:{}}),vH=t=>({value:yt(pH()),meta:{text:t}}),gg=rl({name:"TieredMenu",configFields:[$m("onExecute"),$m("onEscape"),hr("onOpenMenu"),hr("onOpenSubmenu"),to("onRepositionMenu"),to("onCollapseMenu"),ve("highlightOnOpen",Ka.HighlightMenuAndItem),bc("data",[We("primary"),We("menus"),We("expansions")]),ve("fakeFocus",!1),to("onHighlightItem"),to("onDehighlightItem"),to("onHover"),Ox(),We("dom"),ve("navigateOnHover",!0),ve("stayInDom",!1),vr("tmenuBehaviours",[Pt,ro,Zn,fn]),ve("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:hH,extraApis:{tieredData:AM,singleData:OM,collapseItem:vH}}),kM=te("sink"),DM=te(Ys({name:kM(),overrides:te({dom:{tag:"div"},behaviours:Qe([ba.config({useFixed:qe})]),events:Xo([Nf(Jc()),Nf(Ai()),Nf(Ef())])})})),bH=qi([ve("isExtraPart",at),Ti("fireEventInstead",[ve("event",Ed())])]),YE=t=>{const s=ai("Dismissal",bH,t);return{[Ku()]:{schema:qi([We("target")]),onReceive:(a,l)=>{Xn.isOpen(a)&&(Xn.isPartOf(a,l.target)||s.isExtraPart(a,l.target)||s.fireEventInstead.fold(()=>Xn.close(a),f=>Un(a,f.event)))}}}},yH=qi([Ti("fireEventInstead",[ve("event",BO())]),vc("doReposition")]),XE=t=>{const s=ai("Reposition",yH,t);return{[Vf()]:{onReceive:a=>{Xn.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),l=>Un(a,l.event))}}}},w2=(t,s)=>{const a=t.getHotspot(s).getOr(s),l="hotspot",u=t.getAnchorOverrides();return t.layouts.fold(()=>({type:l,hotspot:a,overrides:u}),f=>({type:l,hotspot:a,overrides:u,layouts:f}))},MM=(t,s,a)=>{const l=t.fetch;return l(a).map(s)},CH=(t,s,a,l,u,f,m)=>{const p=MM(t,s,l),v=QE(l,t);return p.map(C=>C.bind(E=>{const D=E.menus[E.primary];return x.from(D).each(I=>{t.listRole.each(H=>{I.role=H})}),x.from(gg.sketch({...f.menu(),uid:Qh(""),data:E,highlightOnOpen:m,onOpenMenu:(I,H)=>{const W=v().getOrDie();ba.position(W,H,{anchor:a}),Xn.decloak(u)},onOpenSubmenu:(I,H,W)=>{const Q=v().getOrDie();ba.position(Q,W,{anchor:{type:"submenu",item:H}}),Xn.decloak(u)},onRepositionMenu:(I,H,W)=>{const Q=v().getOrDie();ba.position(Q,H,{anchor:a}),tt(W,se=>{ba.position(Q,se.triggeredMenu,{anchor:{type:"submenu",item:se.triggeringItem}})})},onEscape:()=>(on.focus(l),Xn.close(u),x.some(!0))}))}))},E2=(t,s,a,l,u,f,m)=>{const p=w2(t,a);return CH(t,s,p,a,l,u,m).map(C=>(C.fold(()=>{Xn.isOpen(l)&&Xn.close(l)},E=>{Xn.cloak(l),Xn.open(l,E),f(l)}),l))},RM=(t,s,a,l,u,f,m)=>(Xn.close(l),ls.pure(l)),JE=(t,s,a,l,u,f)=>{const m=vs.getCoupled(a,"sandbox");return(Xn.isOpen(m)?RM:E2)(t,s,a,m,l,u,f)},SH=(t,s,a)=>{const l=Zn.getCurrent(s).getOr(s),u=or(t.element);a?hn(l.element,"min-width",u+"px"):pb(l.element,u)},QE=(t,s)=>t.getSystem().getByUid(s.uid+"-"+kM()).map(a=>()=>xn.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>xn.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),qE=t=>{Xn.getState(t).each(s=>{gg.repositionMenus(s)})},T2=(t,s,a)=>{const l=zE(),u=(p,v)=>{const C=w2(t,s);l.link(s.element),t.matchWidth&&SH(C.hotspot,v,t.useMinWidth),t.onOpen(C,p,v),a!==void 0&&a.onOpen!==void 0&&a.onOpen(p,v)},f=(p,v)=>{l.unlink(s.element),m().getOr(v).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(p,v)},m=QE(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:l.id}},behaviours:kc.augment(t.sandboxBehaviours,[Ct.config({store:{mode:"memory",initialValue:s}}),Xn.config({onOpen:u,onClose:f,isPartOf:(p,v,C)=>mg(v,C)||mg(s,C),getAttachPoint:()=>m().getOrDie()}),Zn.config({find:p=>Xn.getState(p).bind(v=>Zn.getCurrent(v))}),Xa.config({channels:{...YE({isExtraPart:at}),...XE({doReposition:qE})}})])}},PM=t=>{const s=vs.getCoupled(t,"sandbox");qE(s)},e4=()=>[ve("sandboxClasses",[]),kc.field("sandboxBehaviours",[Zn,Xa,Xn,Ct])],xH=te([We("dom"),We("fetch"),to("onOpen"),Ks("onExecute"),ve("getHotspot",x.some),ve("getAnchorOverrides",te({})),$f(),vr("dropdownBehaviours",[On,vs,Pt,on]),We("toggleClass"),ve("eventOrder",{}),uo("lazySink"),ve("matchWidth",!1),ve("useMinWidth",!1),uo("role"),uo("listRole")].concat(e4())),NM=te([ha({schema:[Ox(),ve("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),DM()]),t4=(t,s,a,l)=>{const u=E=>Be(t.dom,"attributes").bind(D=>Be(D,E)),f=E=>{Xn.getState(E).each(D=>{gg.highlightPrimary(D)})},m=(E,D,I)=>JE(t,lt,E,l,D,I),p=E=>{m(E,f,Ka.HighlightMenuAndItem).get(q)},v={expand:E=>{On.isOn(E)||m(E,q,Ka.HighlightNone).get(q)},open:E=>{On.isOn(E)||m(E,q,Ka.HighlightMenuAndItem).get(q)},refetch:E=>vs.getExistingCoupled(E,"sandbox").fold(()=>m(E,q,Ka.HighlightMenuAndItem).map(q),I=>E2(t,lt,E,I,l,q,Ka.HighlightMenuAndItem).map(q)),isOpen:On.isOn,close:E=>{On.isOn(E)&&m(E,q,Ka.HighlightMenuAndItem).get(q)},repositionMenus:E=>{On.isOn(E)&&PM(E)}},C=(E,D)=>(Zm(E),x.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:zr(t.dropdownBehaviours,[On.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),vs.config({others:{sandbox:E=>T2(t,E,{onOpen:()=>On.on(E),onClose:()=>On.off(E)})}}),Pt.config({mode:"special",onSpace:C,onEnter:C,onDown:(E,D)=>{if(al.isOpen(E)){const I=vs.getCoupled(E,"sandbox");f(I)}else al.open(E);return x.some(!0)},onEscape:(E,D)=>al.isOpen(E)?(al.close(E),x.some(!0)):x.none()}),on.config({})]),events:v2(x.some(p)),eventOrder:{...t.eventOrder,[nl()]:["disabling","toggling","alloy.base.behaviour"]},apis:v,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),E=>({role:E})),...t.dom.tag==="button"?{type:u("type").getOr("button")}:{}}}}},al=Pa({name:"Dropdown",configFields:xH(),partFields:NM(),factory:t4,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),IM="form",wH=[vr("formBehaviours",[Ct])],BM=t=>"<alloy.field."+t+">",EH=t=>{const s=(()=>{const f=[];return{field:(p,v)=>(f.push(p),Fx(IM,BM(p),v)),record:te(f)}})(),a=t(s),l=s.record(),u=Le(l,f=>sr({name:f,pname:BM(f)}));return ng(IM,wH,u,LM,a)},TH=(t,s)=>t.fold(()=>xn.error(s),xn.value),LM=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:zr(t.formBehaviours,[Ct.config({store:{mode:"manual",getValue:a=>{const l=Bh(a,t);return ot(l,(u,f)=>u().bind(m=>{const p=Zn.getCurrent(m);return TH(p,new Error(`Cannot find a current component to extract the value from for form part '${f}': `+Co(m.element)))}).map(Ct.getValue))},setValue:(a,l)=>{ze(l,(u,f)=>{Po(a,t,f).each(m=>{Zn.getCurrent(m).each(p=>{Ct.setValue(p,u)})})})}}})]),apis:{getField:(a,l)=>Po(a,t,l).bind(Zn.getCurrent)}}),hg={getField:Xh((t,s,a)=>t.getField(s,a)),sketch:EH},ip=te([We("dom"),ve("shell",!0),vr("toolbarBehaviours",[fn])]),AH=te([Ys({name:"groups",overrides:()=>({behaviours:Qe([fn.config({})])})})]),Ri=(t,s,a,l)=>{const u=(p,v)=>{f(p).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},C=>{fn.set(C,v)})},f=p=>t.shell?x.some(p):Po(p,t,"groups"),m=t.shell?{behaviours:[fn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:m.components,behaviours:zr(t.toolbarBehaviours,m.behaviours),apis:{setGroups:u,refresh:q},domModification:{attributes:{role:"group"}}}},Or=Pa({name:"Toolbar",configFields:ip(),partFields:AH(),factory:Ri,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),FM=te([Dh(["toggledClass"]),We("lazySink"),vc("fetch"),Yc("getBounds"),Ti("fireDismissalEventInstead",[ve("event",Ed())]),$f(),to("onToggled")]),n4=te([ha({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Qe([On.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),ha({factory:Or,schema:ip(),name:"toolbar",overrides:t=>({toolbarBehaviours:Qe([Pt.config({mode:"cyclic",onEscape:s=>(Po(s,t,"button").each(on.focus),x.none())})])})})]),lp=Gn(),A2=(t,s)=>{lp.set(!0),o4(t,s),lp.clear()},o4=(t,s)=>{const a=vs.getCoupled(t,"toolbarSandbox");Xn.isOpen(a)?Xn.close(a):Xn.open(a,s.toolbar())},O2=(t,s,a,l)=>{const u=a.getBounds.map(m=>m()),f=a.lazySink(t).getOrDie();ba.positionWithinBounds(f,s,{anchor:{type:"hotspot",hotspot:t,layouts:l,overrides:{maxWidthFunction:cy()}}},u)},cp=(t,s,a,l,u)=>{Or.setGroups(s,u),O2(t,s,a,l),On.on(t)},OH=(t,s,a)=>{const l=zE(),u=(m,p)=>{const v=lp.get().getOr(!1);a.fetch().get(C=>{cp(t,p,a,s.layouts,C),l.link(t.element),v||Pt.focusIn(p)})},f=()=>{On.off(t),lp.get().getOr(!1)||on.focus(t),l.unlink(t.element)};return{dom:{tag:"div",attributes:{id:l.id}},behaviours:Qe([Pt.config({mode:"special",onEscape:m=>(Xn.close(m),x.some(!0))}),Xn.config({onOpen:u,onClose:f,isPartOf:(m,p,v)=>mg(p,v)||mg(t,v),getAttachPoint:()=>a.lazySink(t).getOrDie()}),Xa.config({channels:{...YE({isExtraPart:at,...a.fireDismissalEventInstead.map(m=>({fireEventInstead:{event:m.event}})).getOr({})}),...XE({doReposition:()=>{Xn.getState(vs.getCoupled(t,"toolbarSandbox")).each(m=>{O2(t,m,a,s.layouts)})}})}})])}},Xu=Pa({name:"FloatingToolbarButton",factory:(t,s,a,l)=>({...Ar.sketch({...l.button(),action:u=>{o4(u,l)},buttonBehaviours:kc.augment({dump:l.button().buttonBehaviours},[vs.config({others:{toolbarSandbox:u=>OH(u,a,t)}})])}),apis:{setGroups:(u,f)=>{Xn.getState(vs.getCoupled(u,"toolbarSandbox")).each(m=>{cp(u,m,t,a.layouts,f)})},reposition:u=>{Xn.getState(vs.getCoupled(u,"toolbarSandbox")).each(f=>{O2(u,f,t,a.layouts)})},toggle:u=>{o4(u,l)},toggleWithoutFocusing:u=>{A2(u,l)},getToolbar:u=>Xn.getState(vs.getCoupled(u,"toolbarSandbox")),isOpen:u=>Xn.isOpen(vs.getCoupled(u,"toolbarSandbox"))}}),configFields:FM(),partFields:n4(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),_M=te([ve("prefix","form-field"),vr("fieldBehaviours",[Zn,Ct])]),Bv=te([Ys({schema:[We("dom")],name:"label"}),Ys({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[We("text")],name:"aria-descriptor"}),sr({factory:{sketch:t=>{const s=PO(t,["factory"]);return t.factory.sketch(s)}},schema:[We("factory")],name:"field"})]),kH=(t,s,a,l)=>{const u=zr(t.fieldBehaviours,[Zn.config({find:p=>Po(p,t,"field")}),Ct.config({store:{mode:"manual",getValue:p=>Zn.getCurrent(p).bind(Ct.getValue),setValue:(p,v)=>{Zn.getCurrent(p).each(C=>{Ct.setValue(C,v)})}}})]),f=Xo([Ho((p,v)=>{const C=$x(p,t,["label","field","aria-descriptor"]);C.field().each(E=>{const D=yt(t.prefix);C.label().each(I=>{cn(I.element,"for",D),cn(E.element,"id",D)}),C["aria-descriptor"]().each(I=>{const H=yt(t.prefix);cn(I.element,"id",H),cn(E.element,"aria-describedby",H)})})})]),m={getField:p=>Po(p,t,"field"),getLabel:p=>Po(p,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:u,events:f,apis:m}},Bn=Pa({name:"FormField",configFields:_M(),partFields:Bv(),factory:kH,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}}),nu=te([ve("field1Name","field1"),ve("field2Name","field2"),hr("onLockedChange"),Dh(["lockClass"]),ve("locked",!1),kc.field("coupledFieldBehaviours",[Zn,Ct]),Zo("onInput",q)]),Pi=(t,s,a)=>Po(t,s,a).bind(Zn.getCurrent),up=(t,s)=>sr({factory:Bn,name:t,overrides:a=>({fieldBehaviours:Qe([un("coupled-input-behaviour",[Fe(wd(),l=>{Pi(l,a,s).each(u=>{Po(l,a,"lock").each(f=>{On.isOn(f)&&a.onLockedChange(l,u,f),a.onInput(l)})})})])])})}),Ni=te([up("field1","field2"),up("field2","field1"),sr({factory:Ar,schema:[We("dom")],name:"lock",overrides:t=>({buttonBehaviours:Qe([On.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),DH=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:kc.augment(t.coupledFieldBehaviours,[Zn.config({find:x.some}),Ct.config({store:{mode:"manual",getValue:u=>{const f=Hx(u,t,["field1","field2"]);return{[t.field1Name]:Ct.getValue(f.field1()),[t.field2Name]:Ct.getValue(f.field2())}},setValue:(u,f)=>{const m=Hx(u,t,["field1","field2"]);Lo(f,t.field1Name)&&Ct.setValue(m.field1(),f[t.field1Name]),Lo(f,t.field2Name)&&Ct.setValue(m.field2(),f[t.field2Name])}}})]),apis:{getField1:u=>Po(u,t,"field1"),getField2:u=>Po(u,t,"field2"),getLock:u=>Po(u,t,"lock")}}),En=Pa({name:"FormCoupledInputs",configFields:nu(),partFields:Ni(),factory:DH,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),MH=(t,s)=>{const a=Le(t.options,u=>({dom:{tag:"option",value:u.value,innerHtml:u.text}})),l=t.data.map(u=>Nm("initialValue",u)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:zr(t.selectBehaviours,[on.config({}),Ct.config({store:{mode:"manual",getValue:u=>mc(u.element),setValue:(u,f)=>{const m=Ns(t.options);Ft(t.options,v=>v.value===f).isSome()?Om(u.element,f):u.element.dom.selectedIndex===-1&&f===""&&m.each(v=>Om(u.element,v.value))},...l}})])}},pg=rl({name:"HtmlSelect",configFields:[We("options"),vr("selectBehaviours",[on,Ct]),ve("selectClasses",[]),ve("selectAttributes",{}),uo("data")],factory:MH}),Lv=(t,s,a,l,u)=>{const f=()=>t.lazySink(s),m=l.type==="horizontal"?{layouts:{onLtr:()=>Pd(),onRtl:()=>Yx()}}:{},p=C=>C.length===2,v=C=>p(C)?m:{};return gg.sketch({dom:{tag:"div"},data:l.data,markers:l.menu.markers,highlightOnOpen:l.menu.highlightOnOpen,fakeFocus:l.menu.fakeFocus,onEscape:()=>(Xn.close(s),t.onEscape.map(C=>C(s)),x.some(!0)),onExecute:()=>x.some(!0),onOpenMenu:(C,E)=>{ba.positionWithinBounds(f().getOrDie(),E,a,u())},onOpenSubmenu:(C,E,D,I)=>{const H=f().getOrDie();ba.position(H,D,{anchor:{type:"submenu",item:E,...v(I)}})},onRepositionMenu:(C,E,D)=>{const I=f().getOrDie();ba.positionWithinBounds(I,E,a,u()),tt(D,H=>{const W=v(H.triggeringPath);ba.position(I,H.triggeredMenu,{anchor:{type:"submenu",item:H.triggeringItem,...W}})})}})},$M=(t,s)=>{const a=(I,H)=>t.getRelated(I).exists(Q=>mg(Q,H)),l=(I,H)=>{Xn.setContent(I,H)},u=(I,H,W)=>{const Q=x.none;f(I,H,W,Q)},f=(I,H,W,Q)=>{const se=t.lazySink(I).getOrDie();Xn.openWhileCloaked(I,H,()=>ba.positionWithinBounds(se,I,W,Q())),Ct.setValue(I,x.some({mode:"position",config:W,getBounds:Q}))},m=(I,H,W)=>{p(I,H,W,x.none)},p=(I,H,W,Q)=>{const se=Lv(t,I,H,W,Q);Xn.open(I,se),Ct.setValue(I,x.some({mode:"menu",menu:se}))},v=I=>{Xn.isOpen(I)&&(Ct.setValue(I,x.none()),Xn.close(I))},C=I=>Xn.getState(I),E=I=>{Xn.isOpen(I)&&Ct.getValue(I).each(H=>{switch(H.mode){case"menu":Xn.getState(I).each(gg.repositionMenus);break;case"position":const W=t.lazySink(I).getOrDie();ba.positionWithinBounds(W,I,H.config,H.getBounds());break}})},D={setContent:l,showAt:u,showWithinBounds:f,showMenuAt:m,showMenuWithinBounds:p,hide:v,getContent:C,reposition:E,isOpen:Xn.isOpen};return{uid:t.uid,dom:t.dom,behaviours:zr(t.inlineBehaviours,[Xn.config({isPartOf:(I,H,W)=>mg(H,W)||a(I,W),getAttachPoint:I=>t.lazySink(I).getOrDie(),onOpen:I=>{t.onShow(I)},onClose:I=>{t.onHide(I)}}),Ct.config({store:{mode:"memory",initialValue:x.none()}}),Xa.config({channels:{...YE({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(I=>({fireEventInstead:{event:I.event}})).getOr({})}),...XE({...t.fireRepositionEventInstead.map(I=>({fireEventInstead:{event:I.event}})).getOr({}),doReposition:E})}})]),eventOrder:t.eventOrder,apis:D}},qo=rl({name:"InlineView",configFields:[We("lazySink"),to("onShow"),to("onHide"),Yc("onEscape"),vr("inlineBehaviours",[Xn,Ct,Xa]),Ti("fireDismissalEventInstead",[ve("event",Ed())]),Ti("fireRepositionEventInstead",[ve("event",BO())]),ve("getRelated",x.none),ve("isExtraPart",at),ve("eventOrder",x.none)],factory:$M,apis:{showAt:(t,s,a,l)=>{t.showAt(s,a,l)},showWithinBounds:(t,s,a,l,u)=>{t.showWithinBounds(s,a,l,u)},showMenuAt:(t,s,a,l)=>{t.showMenuAt(s,a,l)},showMenuWithinBounds:(t,s,a,l,u)=>{t.showMenuWithinBounds(s,a,l,u)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}}),k2=te([$o("type","text"),uo("data"),ve("inputAttributes",{}),ve("inputStyles",{}),ve("tag","input"),ve("inputClasses",[]),to("onSetValue"),Zo("fromInputValue",lt),Zo("toInputValue",lt),ve("styles",{}),ve("eventOrder",{}),vr("inputBehaviours",[Ct,on]),ve("selectOnFocus",!0)]),HM=t=>Qe([on.config({onFocus:t.selectOnFocus?s=>{const a=s.element,l=mc(a);t.type!=="range"&&a.dom.setSelectionRange(0,l.length)}:q})]),r4=t=>({...HM(t),...zr(t.inputBehaviours,[Ct.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>t.fromInputValue(mc(s.element)),setValue:(s,a)=>{mc(s.element)!==a&&Om(s.element,t.toInputValue(a))}},onSetValue:t.onSetValue})])}),VM=t=>({tag:t.tag,attributes:{type:t.type,...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),zM=(t,s)=>({uid:t.uid,dom:VM(t),components:[],behaviours:r4(t),eventOrder:t.eventOrder}),Ju=rl({name:"Input",configFields:k2(),factory:zM}),Fv=Ih(WE(),jE()),UM=(t,s)=>{const a=tr(t,"id").fold(()=>{const l=yt("dialog-label");return cn(s,"id",l),l},lt);cn(t,"aria-labelledby",a)},D2=te([We("lazySink"),uo("dragBlockClass"),Zo("getBounds",ma),ve("useTabstopAt",qe),ve("firstTabstop",0),ve("eventOrder",{}),vr("modalBehaviours",[Pt]),Ks("onExecute"),$m("onEscape")]),a4={sketch:lt},RH=te([Ys({name:"draghandle",overrides:(t,s)=>({behaviours:Qe([og.config({mode:"mouse",getTarget:a=>fc(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),sr({schema:[We("dom")],name:"title"}),sr({factory:a4,schema:[We("dom")],name:"close"}),sr({factory:a4,schema:[We("dom")],name:"body"}),Ys({factory:a4,schema:[We("dom")],name:"footer"}),ha({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[ve("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),ve("components",[])],name:"blocker"})]),PH=(t,s,a,l)=>{const u=Gn(),f=W=>{u.set(W);const Q=t.lazySink(W).getOrDie(),se=l.blocker(),X=Q.getSystem().build({...se,components:se.components.concat([ol(W)]),behaviours:Qe([on.config({}),un("dialog-blocker-events",[$h(ga(),()=>{Oc.isBlocked(W)?q():Pt.focusIn(W)})])])});Ac(Q,X),Pt.focusIn(W)},m=W=>{u.clear(),Ea(W.element).each(Q=>{W.getSystem().getByDom(Q).each(se=>{ar(se)})})},p=W=>Mf(W,t,"body"),v=W=>Po(W,t,"footer"),C=(W,Q)=>{Oc.block(W,Q)},E=W=>{Oc.unblock(W)},D=yt("modal-events"),I={...t.eventOrder,[Dl()]:[D].concat(t.eventOrder["alloy.system.attached"]||[])},H=ja();return{uid:t.uid,dom:t.dom,components:s,apis:{show:f,hide:m,getBody:p,getFooter:v,setIdle:E,setBusy:C},eventOrder:I,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:zr(t.modalBehaviours,[fn.config({}),Pt.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),Oc.config({getRoot:u.get}),un(D,[Ho(W=>{const Q=Mf(W,t,"title").element,se=HB(Q);H.os.isMacOS()&&me(se)?cn(W.element,"aria-label",se):UM(W.element,Q)})])])}},ir=Pa({name:"ModalDialog",configFields:D2(),partFields:RH(),factory:PH,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),NH=Ys({schema:[We("dom")],name:"label"}),Ud=t=>Ys({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),l=>({events:Xo([qx(xd(),(u,f,m)=>l(u,m),[s]),qx(Ai(),(u,f,m)=>l(u,m),[s]),qx(R1(),(u,f,m)=>{m.mouseIsDown.get()&&l(u,m)},[s])])}))}),IH=Ud("top-left"),BH=Ud("top"),ZM=Ud("top-right"),LH=Ud("right"),WM=Ud("bottom-right"),_v=Ud("bottom"),FH=Ud("bottom-left"),_H=Ud("left"),jM=sr({name:"thumb",defaults:te({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Xo([_h(xd(),t,"spectrum"),_h(wf(),t,"spectrum"),_h(Xc(),t,"spectrum"),_h(Ai(),t,"spectrum"),_h(R1(),t,"spectrum"),_h($b(),t,"spectrum")])})}),$v=t=>If(t.event),i4=sr({schema:[Ma("mouseIsDown",()=>Dt(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,l=(u,f)=>a.getValueFromEvent(f).map(m=>a.setValueFrom(u,t,m));return{behaviours:Qe([Pt.config({mode:"special",onLeft:(u,f)=>a.onLeft(u,t,$v(f)),onRight:(u,f)=>a.onRight(u,t,$v(f)),onUp:(u,f)=>a.onUp(u,t,$v(f)),onDown:(u,f)=>a.onDown(u,t,$v(f))}),No.config({}),on.config({})]),events:Xo([Fe(xd(),l),Fe(wf(),l),Fe(Ai(),l),Fe(R1(),(u,f)=>{t.mouseIsDown.get()&&l(u,f)})])}}});var GM=[NH,_H,LH,BH,_v,IH,ZM,FH,WM,jM,i4];const Hv=te("slider.change.value"),$H=t=>t.type.indexOf("touch")!==-1,l4=t=>{const s=t.event.raw;if($H(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?x.some(a.touches[0]).map(l=>ws(l.clientX,l.clientY)):x.none()}else{const a=s;return a.clientX!==void 0?x.some(a).map(l=>ws(l.clientX,l.clientY)):x.none()}},HH="top",VH="right",KM="bottom",Mc="left",vg=t=>t.model.minX,Zd=t=>t.model.minY,Vv=t=>t.model.minX-1,zv=t=>t.model.minY-1,bg=t=>t.model.maxX,zf=t=>t.model.maxY,Uv=t=>t.model.maxX+1,Zv=t=>t.model.maxY+1,YM=(t,s,a)=>s(t)-a(t),c4=t=>YM(t,bg,vg),u4=t=>YM(t,zf,Zd),XM=t=>c4(t)/2,JM=t=>u4(t)/2,dp=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,QM=t=>t.snapToGrid,d4=t=>t.snapStart,f4=t=>t.rounded,Wv=(t,s)=>t[s+"-edge"]!==void 0,qM=t=>Wv(t,Mc),e6=t=>Wv(t,VH),t6=t=>Wv(t,HH),yg=t=>Wv(t,KM),Wd=t=>t.model.value.get(),jd=(t,s)=>({x:t,y:s}),Vl=(t,s)=>{Zt(t,Hv(),{value:s})},n6=(t,s)=>{Vl(t,jd(Vv(s),zv(s)))},o6=(t,s)=>{Vl(t,zv(s))},m4=(t,s)=>{Vl(t,jd(XM(s),zv(s)))},g4=(t,s)=>{Vl(t,jd(Uv(s),zv(s)))},h4=(t,s)=>{Vl(t,Uv(s))},s6=(t,s)=>{Vl(t,jd(Uv(s),JM(s)))},zH=(t,s)=>{Vl(t,jd(Uv(s),Zv(s)))},r6=(t,s)=>{Vl(t,Zv(s))},UH=(t,s)=>{Vl(t,jd(XM(s),Zv(s)))},ZH=(t,s)=>{Vl(t,jd(Vv(s),Zv(s)))},WH=(t,s)=>{Vl(t,Vv(s))},a6=(t,s)=>{Vl(t,jd(Vv(s),JM(s)))},M2=(t,s,a,l)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-l),R2=(t,s,a,l)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+l),i6=(t,s,a)=>Math.max(s,Math.min(a,t)),jH=(t,s,a,l,u)=>u.fold(()=>{const f=t-s,m=Math.round(f/l)*l;return i6(s+m,s-1,a+1)},f=>{const m=(t-f)%l,p=Math.round(m/l),v=Math.floor((t-f)/l),C=Math.floor((a-f)/l),E=Math.min(C,v+p),D=f+E*l;return Math.max(f,D)}),GH=(t,s,a)=>Math.min(a,Math.max(t,s))-s,l6=t=>{const{min:s,max:a,range:l,value:u,step:f,snap:m,snapStart:p,rounded:v,hasMinEdge:C,hasMaxEdge:E,minBound:D,maxBound:I,screenRange:H}=t,W=C?s-1:s,Q=E?a+1:a;if(u<D)return W;if(u>I)return Q;{const se=GH(u,D,I),X=i6(se/H*l+s,W,Q);return m&&X>=s&&X<=a?jH(X,s,a,f,p):v?Math.round(X):X}},c6=t=>{const{min:s,max:a,range:l,value:u,hasMinEdge:f,hasMaxEdge:m,maxBound:p,maxOffset:v,centerMinEdge:C,centerMaxEdge:E}=t;return u<s?f?0:C:u>a?m?p:E:(u-s)/l*v},p4="top",u6="right",d6="bottom",v4="left",KH="width",YH="height",ou=t=>t.element.dom.getBoundingClientRect(),Rc=(t,s)=>t[s],P2=t=>{const s=ou(t);return Rc(s,v4)},f6=t=>{const s=ou(t);return Rc(s,u6)},N2=t=>{const s=ou(t);return Rc(s,p4)},m6=t=>{const s=ou(t);return Rc(s,d6)},jv=t=>{const s=ou(t);return Rc(s,KH)},b4=t=>{const s=ou(t);return Rc(s,YH)},g6=(t,s,a)=>(t+s)/2-a,h6=(t,s)=>{const a=ou(t),l=ou(s),u=Rc(a,v4),f=Rc(a,u6),m=Rc(l,v4);return g6(u,f,m)},p6=(t,s)=>{const a=ou(t),l=ou(s),u=Rc(a,p4),f=Rc(a,d6),m=Rc(l,p4);return g6(u,f,m)},I2=(t,s)=>{Zt(t,Hv(),{value:s})},y4=(t,s,a)=>{const l={min:vg(s),max:bg(s),range:c4(s),value:a,step:dp(s),snap:QM(s),snapStart:d4(s),rounded:f4(s),hasMinEdge:qM(s),hasMaxEdge:e6(s),minBound:P2(t),maxBound:f6(t),screenRange:jv(t)};return l6(l)},XH=(t,s,a)=>{const l=y4(t,s,a);return I2(t,l),l},C4=(t,s)=>{const a=vg(s);I2(t,a)},v6=(t,s)=>{const a=bg(s);I2(t,a)},b6=(t,s,a,l)=>{const f=(t>0?R2:M2)(Wd(a),vg(a),bg(a),dp(a,l));return I2(s,f),x.some(f)},y6=t=>(s,a,l)=>b6(t,s,a,l).map(qe),C6=t=>l4(t).map(a=>a.left),JH=(t,s,a,l,u)=>{const m=jv(t),p=l.bind(E=>x.some(h6(E,t))).getOr(0),v=u.bind(E=>x.some(h6(E,t))).getOr(m),C={min:vg(s),max:bg(s),range:c4(s),value:a,hasMinEdge:qM(s),hasMaxEdge:e6(s),minBound:P2(t),minOffset:0,maxBound:f6(t),maxOffset:m,centerMinEdge:p,centerMaxEdge:v};return c6(C)},S4=(t,s,a,l,u,f)=>{const m=JH(s,f,a,l,u);return P2(s)-P2(t)+m},QH=(t,s,a,l)=>{const u=Wd(a),f=S4(t,l.getSpectrum(t),u,l.getLeftEdge(t),l.getRightEdge(t),a),m=or(s.element)/2;hn(s.element,"left",f-m+"px")},qH=y6(-1),e9=y6(1),t9=x.none,n9=x.none,o9={"top-left":x.none(),top:x.none(),"top-right":x.none(),right:x.some(h4),"bottom-right":x.none(),bottom:x.none(),"bottom-left":x.none(),left:x.some(WH)};var s9=Object.freeze({__proto__:null,setValueFrom:XH,setToMin:C4,setToMax:v6,findValueOfOffset:y4,getValueFromEvent:C6,findPositionOfValue:S4,setPositionFromValue:QH,onLeft:qH,onRight:e9,onUp:t9,onDown:n9,edgeActions:o9});const B2=(t,s)=>{Zt(t,Hv(),{value:s})},fp=(t,s,a)=>{const l={min:Zd(s),max:zf(s),range:u4(s),value:a,step:dp(s),snap:QM(s),snapStart:d4(s),rounded:f4(s),hasMinEdge:t6(s),hasMaxEdge:yg(s),minBound:N2(t),maxBound:m6(t),screenRange:b4(t)};return l6(l)},x4=(t,s,a)=>{const l=fp(t,s,a);return B2(t,l),l},w4=(t,s)=>{const a=Zd(s);B2(t,a)},S6=(t,s)=>{const a=zf(s);B2(t,a)},r9=(t,s,a,l)=>{const f=(t>0?R2:M2)(Wd(a),Zd(a),zf(a),dp(a,l));return B2(s,f),x.some(f)},x6=t=>(s,a,l)=>r9(t,s,a,l).map(qe),E4=t=>l4(t).map(a=>a.top),T4=(t,s,a,l,u)=>{const m=b4(t),p=l.bind(E=>x.some(p6(E,t))).getOr(0),v=u.bind(E=>x.some(p6(E,t))).getOr(m),C={min:Zd(s),max:zf(s),range:u4(s),value:a,hasMinEdge:t6(s),hasMaxEdge:yg(s),minBound:N2(t),minOffset:0,maxBound:m6(t),maxOffset:m,centerMinEdge:p,centerMaxEdge:v};return c6(C)},mp=(t,s,a,l,u,f)=>{const m=T4(s,f,a,l,u);return N2(s)-N2(t)+m},w6=(t,s,a,l)=>{const u=Wd(a),f=mp(t,l.getSpectrum(t),u,l.getTopEdge(t),l.getBottomEdge(t),a),m=Vn(s.element)/2;hn(s.element,"top",f-m+"px")},a9=x.none,i9=x.none,l9=x6(-1),c9=x6(1),u9={"top-left":x.none(),top:x.some(o6),"top-right":x.none(),right:x.none(),"bottom-right":x.none(),bottom:x.some(r6),"bottom-left":x.none(),left:x.none()};var d9=Object.freeze({__proto__:null,setValueFrom:x4,setToMin:w4,setToMax:S6,findValueOfOffset:fp,getValueFromEvent:E4,findPositionOfValue:mp,setPositionFromValue:w6,onLeft:a9,onRight:i9,onUp:l9,onDown:c9,edgeActions:u9});const L2=(t,s)=>{Zt(t,Hv(),{value:s})},F2=(t,s)=>({x:t,y:s}),f9=(t,s,a)=>{const l=y4(t,s,a.left),u=fp(t,s,a.top),f=F2(l,u);return L2(t,f),f},m9=(t,s,a,l,u)=>{const f=t>0?R2:M2,m=s?Wd(l).x:f(Wd(l).x,vg(l),bg(l),dp(l,u)),p=s?f(Wd(l).y,Zd(l),zf(l),dp(l,u)):Wd(l).y;return L2(a,F2(m,p)),x.some(m)},_2=(t,s)=>(a,l,u)=>m9(t,s,a,l,u).map(qe),g9=(t,s)=>{const a=vg(s),l=Zd(s);L2(t,F2(a,l))},h9=(t,s)=>{const a=bg(s),l=zf(s);L2(t,F2(a,l))},E6=t=>l4(t),p9=(t,s,a,l)=>{const u=Wd(a),f=S4(t,l.getSpectrum(t),u.x,l.getLeftEdge(t),l.getRightEdge(t),a),m=mp(t,l.getSpectrum(t),u.y,l.getTopEdge(t),l.getBottomEdge(t),a),p=or(s.element)/2,v=Vn(s.element)/2;hn(s.element,"left",f-p+"px"),hn(s.element,"top",m-v+"px")},v9=_2(-1,!1),Qu=_2(1,!1),b9=_2(-1,!0),y9=_2(1,!0),A4={"top-left":x.some(n6),top:x.some(m4),"top-right":x.some(g4),right:x.some(s6),"bottom-right":x.some(zH),bottom:x.some(UH),"bottom-left":x.some(ZH),left:x.some(a6)};var yr=Object.freeze({__proto__:null,setValueFrom:f9,setToMin:g9,setToMax:h9,getValueFromEvent:E6,setPositionFromValue:p9,onLeft:v9,onRight:Qu,onUp:b9,onDown:y9,edgeActions:A4});const C9=[ve("stepSize",1),ve("speedMultiplier",10),ve("onChange",q),ve("onChoose",q),ve("onInit",q),ve("onDragStart",q),ve("onDragEnd",q),ve("snapToGrid",!1),ve("rounded",!0),uo("snapStart"),el("model",wi("mode",{x:[ve("minX",0),ve("maxX",100),Ma("value",t=>Dt(t.mode.minX)),We("getInitialValue"),Do("manager",s9)],y:[ve("minY",0),ve("maxY",100),Ma("value",t=>Dt(t.mode.minY)),We("getInitialValue"),Do("manager",d9)],xy:[ve("minX",0),ve("maxX",100),ve("minY",0),ve("maxY",100),Ma("value",t=>Dt({x:t.mode.minX,y:t.mode.minY})),We("getInitialValue"),Do("manager",yr)]})),vr("sliderBehaviours",[Pt,Ct]),Ma("mouseIsDown",()=>Dt(!1))],Pc=Pa({name:"Slider",configFields:C9,partFields:GM,factory:(t,s,a,l)=>{const u=Re=>Mf(Re,t,"thumb"),f=Re=>Mf(Re,t,"spectrum"),m=Re=>Po(Re,t,"left-edge"),p=Re=>Po(Re,t,"right-edge"),v=Re=>Po(Re,t,"top-edge"),C=Re=>Po(Re,t,"bottom-edge"),E=t.model,D=E.manager,I=(Re,vt)=>{D.setPositionFromValue(Re,vt,t,{getLeftEdge:m,getRightEdge:p,getTopEdge:v,getBottomEdge:C,getSpectrum:f})},H=(Re,vt)=>{E.value.set(vt);const Ke=u(Re);I(Re,Ke)},W=(Re,vt)=>{H(Re,vt);const Ke=u(Re);return t.onChange(Re,Ke,vt),x.some(!0)},Q=Re=>{D.setToMin(Re,t)},se=Re=>{D.setToMax(Re,t)},X=Re=>{const vt=()=>{Po(Re,t,"thumb").each(Pe=>{const St=E.value.get();t.onChoose(Re,Pe,St)})},Ke=t.mouseIsDown.get();t.mouseIsDown.set(!1),Ke&&vt()},ie=(Re,vt)=>{vt.stop(),t.mouseIsDown.set(!0),t.onDragStart(Re,u(Re))},le=(Re,vt)=>{vt.stop(),t.onDragEnd(Re,u(Re)),X(Re)},xe=Re=>{Po(Re,t,"spectrum").map(Pt.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:zr(t.sliderBehaviours,[Pt.config({mode:"special",focusIn:xe}),Ct.config({store:{mode:"manual",getValue:Re=>E.value.get(),setValue:H}}),Xa.config({channels:{[LE()]:{onReceive:X}}})]),events:Xo([Fe(Hv(),(Re,vt)=>{W(Re,vt.event.value)}),Ho((Re,vt)=>{const Ke=E.getInitialValue();E.value.set(Ke);const Pe=u(Re);I(Re,Pe);const St=f(Re);t.onInit(Re,Pe,St,E.value.get())}),Fe(xd(),ie),Fe(Xc(),le),Fe(Ai(),(Re,vt)=>{xe(Re),ie(Re,vt)}),Fe($b(),le)]),apis:{resetToMin:Q,resetToMax:se,setValue:H,refresh:I},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),T6="container",S9=[vr("slotBehaviours",[])],A6=t=>"<alloy.field."+t+">",x9=t=>{const s=(()=>{const f=[];return{slot:(p,v)=>(f.push(p),Fx(T6,A6(p),v)),record:te(f)}})(),a=t(s),l=s.record(),u=Le(l,f=>sr({name:f,pname:A6(f)}));return ng(T6,S9,u,w9,a)},w9=(t,s)=>{const a=Q=>Lh(t),l=(Q,se)=>Po(Q,t,se),u=(Q,se)=>(X,ie)=>Po(X,t,ie).map(le=>Q(le,ie)).getOr(se),f=Q=>(se,X)=>{tt(X,ie=>Q(se,ie))},m=(Q,se)=>er(Q.element,"aria-hidden")!=="true",p=(Q,se)=>{if(!m(Q)){const X=Q.element;ft(X,"display"),us(X,"aria-hidden"),Zt(Q,Vb(),{name:se,visible:!0})}},v=(Q,se)=>{if(m(Q)){const X=Q.element;hn(X,"display","none"),cn(X,"aria-hidden","true"),Zt(Q,Vb(),{name:se,visible:!1})}},C=u(m,!1),E=u(v),D=f(E),I=Q=>D(Q,a()),H=u(p),W={getSlotNames:a,getSlot:l,isShowing:C,hideSlot:E,hideAllSlots:I,showSlot:H};return{uid:t.uid,dom:t.dom,components:s,behaviours:vv(t.slotBehaviours),apis:W}},ya={...ot({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>Xh(t)),sketch:x9},E9=te([We("toggleClass"),We("fetch"),hr("onExecute"),ve("getHotspot",x.some),ve("getAnchorOverrides",te({})),$f(),hr("onItemExecute"),uo("lazySink"),We("dom"),to("onOpen"),vr("splitDropdownBehaviours",[vs,Pt,on]),ve("matchWidth",!1),ve("useMinWidth",!1),ve("eventOrder",{}),uo("role"),uo("listRole")].concat(e4())),T9=sr({factory:Ar,schema:[We("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Qe([on.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Zm)},buttonBehaviours:Qe([On.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),A9=sr({factory:Ar,schema:[We("dom")],name:"button",defaults:()=>({buttonBehaviours:Qe([on.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),O9=te([T9,A9,Ys({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[We("text")],name:"aria-descriptor"}),ha({schema:[Ox()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(l=>{t.onItemExecute(l,s,a)})}})}),DM()]),k9=(t,s,a,l)=>{const u=E=>{Zn.getCurrent(E).each(D=>{ro.highlightFirst(D),Pt.focusIn(D)})},f=E=>{JE(t,lt,E,l,u,Ka.HighlightMenuAndItem).get(q)},m=E=>(f(E),x.some(!0)),p=E=>{const D=Mf(E,t,"button");return Zm(D),x.some(!0)},v={...Xo([Ho((E,D)=>{Po(E,t,"aria-descriptor").each(H=>{const W=yt("aria");cn(H.element,"id",W),cn(E.element,"aria-describedby",W)})})]),...v2(x.some(f))},C={repositionMenus:E=>{On.isOn(E)&&PM(E)}};return{uid:t.uid,dom:t.dom,components:s,apis:C,eventOrder:{...t.eventOrder,[nl()]:["disabling","toggling","alloy.base.behaviour"]},events:v,behaviours:zr(t.splitDropdownBehaviours,[vs.config({others:{sandbox:E=>{const D=Mf(E,t,"arrow");return T2(t,E,{onOpen:()=>{On.on(D),On.on(E)},onClose:()=>{On.off(D),On.off(E)}})}}}),Pt.config({mode:"special",onSpace:p,onEnter:p,onDown:m}),on.config({}),On.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},$2=Pa({name:"SplitDropdown",configFields:E9(),partFields:O9(),factory:k9,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),D9=(t,s)=>Fo(t,(u,f)=>s(f,u.len).fold(te(u),p=>({len:p.finish,list:u.list.concat([p])})),{len:0,list:[]}).list,O4=(t,s,a)=>({within:t,extra:s,withinWidth:a}),O6=(t,s,a)=>{const l=D9(t,(p,v)=>{const C=a(p);return x.some({element:p,start:v,finish:v+C,width:C})}),u=qn(l,p=>p.finish<=s),f=is(u,(p,v)=>p+v.width,0),m=l.slice(u.length);return{within:u,extra:m,withinWidth:f}},H2=t=>Le(t,s=>s.element),M9=(t,s,a)=>{const l=H2(t.concat(s));return O4(l,[],a)},R9=(t,s,a,l)=>{const u=H2(t).concat([a]);return O4(u,H2(s),l)},P9=(t,s,a)=>O4(H2(t),[],a),N9=(t,s,a)=>{const l=O6(s,t,a);return l.extra.length===0?x.some(l):x.none()},I9=(t,s,a,l)=>{const u=N9(t,s,a).getOrThunk(()=>O6(s,t-a(l),a)),f=u.within,m=u.extra,p=u.withinWidth;return m.length===1&&m[0].width<=a(l)?M9(f,m,p):m.length>=1?R9(f,m,l,p):P9(f,m,p)},k4=(t,s)=>{const a=Le(s,l=>ol(l));Or.setGroups(t,a)},B9=t=>Tn(t,s=>Xr(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),D4=(t,s,a)=>{const l=s.builtGroups.get();if(l.length===0)return;const u=Mf(t,s,"primary"),f=vs.getCoupled(t,"overflowGroup");hn(u.element,"visibility","hidden");const m=l.concat([f]),p=B9(m);a([]),k4(u,m);const v=or(u.element),C=I9(v,s.builtGroups.get(),E=>Math.ceil(E.element.dom.getBoundingClientRect().width),f);C.extra.length===0?(fn.remove(u,f),a([])):(k4(u,C.within),a(C.extra)),ft(u.element,"visibility"),wn(u.element),p.each(on.focus)},k6=te([vr("splitToolbarBehaviours",[vs]),Ma("builtGroups",()=>Dt([]))]),L9=te([Dh(["overflowToggledClass"]),Yc("getOverflowBounds"),We("lazySink"),Ma("overflowGroups",()=>Dt([])),to("onOpened"),to("onClosed")].concat(k6())),F9=te([sr({factory:Or,schema:ip(),name:"primary"}),ha({schema:ip(),name:"overflow"}),ha({name:"overflow-button"}),ha({name:"overflow-group"})]),D6=te([We("items"),Dh(["itemSelector"]),vr("tgroupBehaviours",[Pt])]),_9=te([$1({name:"items",unit:"item"})]),$9=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:zr(t.tgroupBehaviours,[Pt.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),V2=Pa({name:"ToolbarGroup",configFields:D6(),partFields:_9(),factory:$9}),M6=t=>Le(t,s=>ol(s)),M4=(t,s,a)=>{D4(t,a,l=>{a.overflowGroups.set(l),s.getOpt(t).each(u=>{Xu.setGroups(u,M6(l))})})},H9=(t,s,a,l)=>{const u=ao(Xu.sketch({fetch:()=>ls.nu(f=>{f(M6(t.overflowGroups.get()))}),layouts:{onLtr:()=>[zs,Ms],onRtl:()=>[Ms,zs],onBottomLtr:()=>[pr,Hr],onBottomRtl:()=>[Hr,pr]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(f,m)=>t[m?"onOpened":"onClosed"](f)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:zr(t.splitToolbarBehaviours,[vs.config({others:{overflowGroup:()=>V2.sketch({...l["overflow-group"](),items:[u.asSpec()]})}})]),apis:{setGroups:(f,m)=>{t.builtGroups.set(Le(m,f.getSystem().build)),M4(f,u,t)},refresh:f=>M4(f,u,t),toggle:f=>{u.getOpt(f).each(m=>{Xu.toggle(m)})},toggleWithoutFocusing:f=>{u.getOpt(f).each(Xu.toggleWithoutFocusing)},isOpen:f=>u.getOpt(f).map(Xu.isOpen).getOr(!1),reposition:f=>{u.getOpt(f).each(m=>{Xu.reposition(m)})},getOverflow:f=>u.getOpt(f).bind(Xu.getToolbar)},domModification:{attributes:{role:"group"}}}},R4=Pa({name:"SplitFloatingToolbar",configFields:L9(),partFields:F9(),factory:H9,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),V9=te([Dh(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),to("onOpened"),to("onClosed")].concat(k6())),R6=te([sr({factory:Or,schema:ip(),name:"primary"}),sr({factory:Or,schema:ip(),name:"overflow",overrides:t=>({toolbarBehaviours:Qe([Na.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Po(s,t,"overflow-button").each(a=>{On.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{Po(s,t,"overflow-button").each(On.on)}}),Pt.config({mode:"acyclic",onEscape:s=>(Po(s,t,"overflow-button").each(on.focus),x.some(!0))})])})}),ha({name:"overflow-button",overrides:t=>({buttonBehaviours:Qe([On.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),ha({name:"overflow-group"})]),z9=(t,s)=>Po(t,s,"overflow").map(Na.hasGrown).getOr(!1),P4=(t,s,a)=>{Po(t,s,"overflow-button").each(l=>{Po(t,s,"overflow").each(u=>{if(N4(t,s),Na.hasShrunk(u)){const f=s.onOpened;s.onOpened=m=>{a||Pt.focusIn(u),f(m),s.onOpened=f}}else{const f=s.onClosed;s.onClosed=m=>{a||on.focus(l),f(m),s.onClosed=f}}Na.toggleGrow(u)})})},N4=(t,s)=>{Po(t,s,"overflow").each(a=>{D4(t,s,l=>{const u=Le(l,f=>ol(f));Or.setGroups(a,u)}),Po(t,s,"overflow-button").each(l=>{Na.hasGrown(a)&&On.on(l)}),Na.refresh(a)})},U9=(t,s,a,l)=>{const u="alloy.toolbar.toggle",f=(m,p)=>{const v=Le(p,m.getSystem().build);t.builtGroups.set(v)};return{uid:t.uid,dom:t.dom,components:s,behaviours:zr(t.splitToolbarBehaviours,[vs.config({others:{overflowGroup:m=>V2.sketch({...l["overflow-group"](),items:[Ar.sketch({...l["overflow-button"](),action:p=>{Un(m,u)}})]})}}),un("toolbar-toggle-events",[Fe(u,m=>{P4(m,t,!1)})])]),apis:{setGroups:(m,p)=>{f(m,p),N4(m,t)},refresh:m=>N4(m,t),toggle:m=>{P4(m,t,!1)},toggleWithoutFocusing:m=>{P4(m,t,!0)},isOpen:m=>z9(m,t)},domModification:{attributes:{role:"group"}}}},I4=Pa({name:"SplitSlidingToolbar",configFields:V9(),partFields:R6(),factory:U9,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),Z9=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:v2(t.action),behaviours:zr(t.tabButtonBehaviours,[on.config({}),Pt.config({mode:"execution",useSpace:!0,useEnter:!0}),Ct.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),W9=rl({name:"TabButton",configFields:[ve("uid",void 0),We("value"),qr("dom","dom",lx(()=>({attributes:{role:"tab",id:yt("aria"),"aria-selected":"false"}})),hc()),uo("action"),ve("domModification",{}),vr("tabButtonBehaviours",[on,Pt,Ct]),We("view")],factory:Z9}),j9=te([We("tabs"),We("dom"),ve("clickToDismiss",!1),vr("tabbarBehaviours",[ro,Pt]),Dh(["tabClass","selectedClass"])]),G9=$1({factory:W9,name:"tabs",unit:"tab",overrides:t=>{const s=(l,u)=>{ro.dehighlight(l,u),Zt(l,LO(),{tabbar:l,button:u})},a=(l,u)=>{ro.highlight(l,u),Zt(l,wx(),{tabbar:l,button:u})};return{action:l=>{const u=l.getSystem().getByUid(t.uid).getOrDie(),f=ro.isHighlighted(u,l);(f&&t.clickToDismiss?s:f?q:a)(u,l)},domModification:{classes:[t.markers.tabClass]}}}}),K9=te([G9]),Y9=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:zr(t.tabbarBehaviours,[ro.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(u,f)=>{cn(f.element,"aria-selected","true")},onDehighlight:(u,f)=>{cn(f.element,"aria-selected","false")}}),Pt.config({mode:"flow",getInitial:u=>ro.getHighlighted(u).map(f=>f.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),P6=Pa({name:"Tabbar",configFields:j9(),partFields:K9(),factory:Y9}),X9=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:zr(t.tabviewBehaviours,[fn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),N6=rl({name:"Tabview",configFields:[vr("tabviewBehaviours",[fn])],factory:X9}),J9=te([ve("selectFirst",!0),to("onChangeTab"),to("onDismissTab"),ve("tabs",[]),vr("tabSectionBehaviours",[])]),Q9=sr({factory:P6,schema:[We("dom"),bc("markers",[We("tabClass"),We("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),q9=sr({factory:N6,name:"tabview"}),eV=te([Q9,q9]),tV=(t,s,a,l)=>{const u=m=>{const p=Ct.getValue(m);Po(m,t,"tabview").each(v=>{Ft(t.tabs,E=>E.value===p).each(E=>{const D=E.view();tr(m.element,"id").each(I=>{cn(v.element,"aria-labelledby",I)}),fn.set(v,D),t.onChangeTab(v,m,D)})})},f=(m,p)=>{Po(m,t,"tabbar").each(v=>{p(v).each(Zm)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:vv(t.tabSectionBehaviours),events:Xo(Yt([t.selectFirst?[Ho((m,p)=>{f(m,ro.getFirst)})]:[],[Fe(wx(),(m,p)=>{const v=p.event.button;u(v)}),Fe(LO(),(m,p)=>{const v=p.event.button;t.onDismissTab(m,v)})]])),apis:{getViewItems:m=>Po(m,t,"tabview").map(p=>fn.contents(p)).getOr([]),showTab:(m,p)=>{f(m,C=>{const E=ro.getCandidates(C);return Ft(E,I=>Ct.getValue(I)===p).filter(I=>!ro.isHighlighted(C,I))})}}}},Uf=Pa({name:"TabSection",configFields:J9(),partFields:eV(),factory:tV,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),z2=(t,s,a)=>{const l=Ct.getValue(a);Ct.setValue(s,l),B6(s)},I6=(t,s)=>{const a=t.element,l=mc(a),u=a.dom;er(a,"type")!=="number"&&s(u,l)},B6=t=>{I6(t,(s,a)=>s.setSelectionRange(a.length,a.length))},L6=(t,s)=>{I6(t,(a,l)=>a.setSelectionRange(s,l.length))},F6=(t,s,a)=>{if(t.selectsOver){const l=Ct.getValue(s),u=t.getDisplayText(l),f=Ct.getValue(a);return t.getDisplayText(f).indexOf(u)===0?x.some(()=>{z2(t,s,a),L6(s,u.length)}):x.none()}else return x.none()},B4=te("alloy.typeahead.itemexecute"),nV=(t,s,a,l)=>{const u=(D,I,H)=>{t.previewing.set(!1);const W=vs.getCoupled(D,"sandbox");if(Xn.isOpen(W))Zn.getCurrent(W).each(Q=>{ro.getHighlighted(Q).fold(()=>{H(Q)},()=>{sk(W,Q.element,"keydown",I)})});else{const Q=se=>{Zn.getCurrent(se).each(H)};E2(t,m(D),D,W,l,Q,Ka.HighlightMenuAndItem).get(q)}},f=HM(t),m=D=>I=>I.map(H=>{const W=nn(H.menus),Q=ke(W,X=>qn(X.items,ie=>ie.type==="item"));return Ct.getState(D).update(Le(Q,X=>X.data)),H}),p=D=>Zn.getCurrent(D),v="typeaheadevents",C=[on.config({}),Ct.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:D=>mc(D.element),getFallbackEntry:D=>({value:D,meta:{}}),setValue:(D,I)=>{Om(D.element,t.model.getDisplayText(I))},...t.initialData.map(D=>Nm("initialValue",D)).getOr({})}}),ME.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(D,I)=>{const H=vs.getCoupled(D,"sandbox");if(on.isFocused(D)&&mc(D.element).length>=t.minChars){const Q=p(H).bind(X=>ro.getHighlighted(X).map(Ct.getValue));t.previewing.set(!0);const se=X=>{p(H).each(ie=>{Q.fold(()=>{t.model.selectsOver&&ro.highlightFirst(ie)},le=>{ro.highlightBy(ie,xe=>Ct.getValue(xe).value===le.value),ro.getHighlighted(ie).orThunk(()=>(ro.highlightFirst(ie),x.none()))})})};E2(t,m(D),D,H,l,se,Ka.HighlightJustMenu).get(q)}},cancelEvent:B1()}),Pt.config({mode:"special",onDown:(D,I)=>(u(D,I,ro.highlightFirst),x.some(!0)),onEscape:D=>{const I=vs.getCoupled(D,"sandbox");return Xn.isOpen(I)?(Xn.close(I),x.some(!0)):x.none()},onUp:(D,I)=>(u(D,I,ro.highlightLast),x.some(!0)),onEnter:D=>{const I=vs.getCoupled(D,"sandbox"),H=Xn.isOpen(I);if(H&&!t.previewing.get())return p(I).bind(W=>ro.getHighlighted(W)).map(W=>(Zt(D,B4(),{item:W}),!0));{const W=Ct.getValue(D);return Un(D,B1()),t.onExecute(I,D,W),H&&Xn.close(I),x.some(!0)}}}),On.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),vs.config({others:{sandbox:D=>T2(t,D,{onOpen:()=>On.on(D),onClose:()=>{t.lazyTypeaheadComp.get().each(I=>us(I.element,"aria-activedescendant")),On.off(D)}})}}),un(v,[Ho(D=>{t.lazyTypeaheadComp.set(x.some(D))}),qc(D=>{t.lazyTypeaheadComp.set(x.none())}),Id(D=>{const I=q;JE(t,m(D),D,l,I,Ka.HighlightMenuAndItem).get(q)}),Fe(B4(),(D,I)=>{const H=vs.getCoupled(D,"sandbox");z2(t.model,D,I.event.item),Un(D,B1()),t.onItemExecute(D,H,I.event.item,Ct.getValue(D)),Xn.close(H),B6(D)})].concat(t.dismissOnBlur?[Fe(I1(),D=>{const I=vs.getCoupled(D,"sandbox");Xr(I.element).isNone()&&Xn.close(I)})]:[]))],E={[_u()]:[Ct.name(),ME.name(),v],...t.eventOrder};return{uid:t.uid,dom:VM(ho(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...f,...zr(t.typeaheadBehaviours,C)},eventOrder:E}},_6=te([uo("lazySink"),We("fetch"),ve("minChars",5),ve("responseTime",1e3),to("onOpen"),ve("getHotspot",x.some),ve("getAnchorOverrides",te({})),ve("layouts",x.none()),ve("eventOrder",{}),_b("model",{},[ve("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),ve("selectsOver",!0),ve("populateFromBrowse",!0)]),to("onSetValue"),Ks("onExecute"),to("onItemExecute"),ve("inputClasses",[]),ve("inputAttributes",{}),ve("inputStyles",{}),ve("matchWidth",!0),ve("useMinWidth",!1),ve("dismissOnBlur",!0),Dh(["openClass"]),uo("initialData"),uo("listRole"),vr("typeaheadBehaviours",[on,Ct,ME,Pt,On,vs]),Ma("lazyTypeaheadComp",()=>Dt(x.none)),Ma("previewing",()=>Dt(!0))].concat(k2()).concat(e4())),oV=te([ha({schema:[Ox()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,l)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(u=>{F6(t.model,u,l).fold(()=>{t.model.selectsOver?(ro.dehighlight(a,l),t.previewing.set(!0)):t.previewing.set(!1)},f=>{f(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(u=>{t.model.populateFromBrowse&&z2(t.model,u,l),tr(l.element,"id").each(f=>cn(u.element,"aria-activedescendant",f))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(l=>(Zt(l,B4(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(l=>{t.model.populateFromBrowse&&z2(t.model,l,a)})}})})]),sV=Pa({name:"Typeahead",configFields:_6(),partFields:oV(),factory:nV});var rV=tinymce.util.Tools.resolve("tinymce.ThemeManager"),U2=tinymce.util.Tools.resolve("tinymce.util.Delay"),Gv=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),aV=tinymce.util.Tools.resolve("tinymce.EditorManager"),Gd=tinymce.util.Tools.resolve("tinymce.Env"),zl;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(zl||(zl={}));var Zf;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Zf||(Zf={}));const wo=t=>s=>s.options.get(t),Kv=t=>s=>x.from(t(s)),$6=t=>{const s=Gd.deviceType.isPhone(),a=Gd.deviceType.isTablet()||s,l=t.options.register,u=m=>B(m)||m===!1,f=m=>B(m)||_e(m);l("skin",{processor:m=>B(m)||m===!1,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:f,default:Math.max(t.getElement().offsetHeight,400)}),l("width",{processor:f,default:Gv.DOM.getStyle(t.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:m=>B(m)||re(m),default:!s}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:m=>re(m)||B(m)||K(m)?{value:m,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Ao(9,m=>{l("toolbar"+(m+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:Zf.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:t.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:u,default:"#top"}),l("anchor_bottom",{processor:u,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:m=>m==="both"||re(m),default:!Gd.deviceType.isTouch()}),l("sidebar_show",{processor:"string"}),l("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),l("default_font_stack",{processor:"string[]",default:[]})},H6=wo("readonly"),L4=wo("disabled"),gp=wo("height"),Wf=wo("width"),Z2=Kv(wo("min_width")),W2=Kv(wo("min_height")),j2=Kv(wo("max_width")),F4=Kv(wo("max_height")),V6=Kv(wo("style_formats")),z6=wo("style_formats_merge"),U6=wo("style_formats_autohide"),Z6=wo("content_langs"),W6=wo("removed_menuitems"),hp=wo("toolbar_mode"),j6=wo("toolbar_groups"),_4=wo("toolbar_location"),iV=wo("fixed_toolbar_container"),G6=wo("fixed_toolbar_container_target"),Cg=wo("toolbar_persist"),jf=wo("toolbar_sticky_offset"),K6=wo("menubar"),Yv=wo("toolbar"),$4=wo("file_picker_callback"),Xv=wo("file_picker_validator_handler"),Y6=wo("font_size_input_default_unit"),pp=wo("file_picker_types"),vp=wo("typeahead_urls"),X6=wo("anchor_top"),J6=wo("anchor_bottom"),Q6=wo("draggable_modal"),q6=wo("statusbar"),eR=wo("elementpath"),H4=wo("branding"),Jv=wo("resize"),tR=wo("paste_as_text"),G2=wo("sidebar_show"),nR=wo("promotion"),oR=wo("help_accessibility"),V4=wo("default_font_stack"),z4=wo("skin"),K2=t=>t.options.get("skin")===!1,Nc=t=>t.options.get("menubar")!==!1,Gf=t=>{const s=t.options.get("skin_url");if(K2(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return aV.baseURL+"/skins/ui/"+a}},lV=t=>x.from(t.options.get("skin_url")),sR=t=>t.options.get("line_height_formats").split(" "),Qv=t=>{const s=Yv(t),a=B(s),l=K(s)&&s.length>0;return!bp(t)&&(l||a||s===!0)},U4=t=>{const s=Ao(9,l=>t.options.get("toolbar"+(l+1))),a=qn(s,B);return Kr(a.length>0,a)},bp=t=>U4(t).fold(()=>{const s=Yv(t);return he(s,B)&&s.length>0},qe),Z4=t=>_4(t)===Zf.bottom,rR=t=>{var s;if(!t.inline)return x.none();const a=(s=iV(t))!==null&&s!==void 0?s:"";if(a.length>0)return Ro(Oa(),a);const l=G6(t);return me(l)?x.some(ht.fromDom(l)):x.none()},yp=t=>t.inline&&rR(t).isSome(),W4=t=>rR(t).getOrThunk(()=>vd(fr(ht.fromDom(t.getElement())))),j4=t=>t.inline&&!Nc(t)&&!Qv(t)&&!bp(t),Cp=t=>(t.options.get("toolbar_sticky")||t.inline)&&!yp(t)&&!j4(t),Kf=t=>!yp(t)&&t.options.get("ui_mode")==="split",aR=t=>{const s=t.options.get("menu");return ot(s,a=>({...a,items:a.items}))};var G4=Object.freeze({__proto__:null,get ToolbarMode(){return zl},get ToolbarLocation(){return Zf},register:$6,getSkinUrl:Gf,getSkinUrlOption:lV,isReadOnly:H6,isDisabled:L4,getSkin:z4,isSkinDisabled:K2,getHeightOption:gp,getWidthOption:Wf,getMinWidthOption:Z2,getMinHeightOption:W2,getMaxWidthOption:j2,getMaxHeightOption:F4,getUserStyleFormats:V6,shouldMergeStyleFormats:z6,shouldAutoHideStyleFormats:U6,getLineHeightFormats:sR,getContentLanguages:Z6,getRemovedMenuItems:W6,isMenubarEnabled:Nc,isMultipleToolbars:bp,isToolbarEnabled:Qv,isToolbarPersist:Cg,getMultipleToolbarsOption:U4,getUiContainer:W4,useFixedContainer:yp,isSplitUiMode:Kf,getToolbarMode:hp,isDraggableModal:Q6,isDistractionFree:j4,isStickyToolbar:Cp,getStickyToolbarOffset:jf,getToolbarLocation:_4,isToolbarLocationBottom:Z4,getToolbarGroups:j6,getMenus:aR,getMenubar:K6,getToolbar:Yv,getFilePickerCallback:$4,getFilePickerTypes:pp,useTypeaheadUrls:vp,getAnchorTop:X6,getAnchorBottom:J6,getFilePickerValidatorHandler:Xv,getFontSizeInputDefaultUnit:Y6,useStatusBar:q6,useElementPath:eR,promotionEnabled:nR,useBranding:H4,getResize:Jv,getPasteAsText:tR,getSidebarShow:G2,useHelpAccessibility:oR,getDefaultFontStack:V4});const cV=["visible","hidden","clip"],iR=t=>md(t).length>0&&!Kt(cV,t),lR=t=>{if(ib(t)){const s=O(t,"overflow-x"),a=O(t,"overflow-y");return iR(s)||iR(a)}else return!1},K4=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),uV=(t,s)=>{const a=ox(s,lR),l=a.length===0?fh(s).map(Eu).map(u=>ox(u,lR)).getOr([]):a;return Ns(l).map(u=>({element:u,others:l.slice(1),isFullscreen:()=>K4(t)}))},Yf=(t,s)=>Kf(t)?uV(t,s):x.none(),Sg=t=>{const s=[...Le(t.others,$r),ma()];return t.isFullscreen()?ma():r7($r(t.element),s)};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:Y4,setPrototypeOf:cR,isFrozen:dV,getPrototypeOf:fV,getOwnPropertyDescriptor:mV}=Object;let{freeze:Ii,seal:Ul,create:X4}=Object,{apply:J4,construct:Q4}=typeof Reflect<"u"&&Reflect;Ii||(Ii=function(s){return s}),Ul||(Ul=function(s){return s}),J4||(J4=function(s,a,l){return s.apply(a,l)}),Q4||(Q4=function(s,a){return new s(...a)});const Y2=Li(Array.prototype.forEach),gV=Li(Array.prototype.lastIndexOf),uR=Li(Array.prototype.pop),Sp=Li(Array.prototype.push),xp=Li(Array.prototype.splice),X2=Li(String.prototype.toLowerCase),q4=Li(String.prototype.toString),dR=Li(String.prototype.match),Xf=Li(String.prototype.replace),Zl=Li(String.prototype.indexOf),e3=Li(String.prototype.trim),Ic=Li(Object.prototype.hasOwnProperty),Bi=Li(RegExp.prototype.test),qv=hV(TypeError);function Li(t){return function(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];return J4(t,s,l)}}function hV(t){return function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return Q4(t,a)}}function Io(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:X2;cR&&cR(t,null);let l=s.length;for(;l--;){let u=s[l];if(typeof u=="string"){const f=a(u);f!==u&&(dV(s)||(s[l]=f),u=f)}t[u]=!0}return t}function fR(t){for(let s=0;s<t.length;s++)Ic(t,s)||(t[s]=null);return t}function xg(t){const s=X4(null);for(const[a,l]of Y4(t))Ic(t,a)&&(Array.isArray(l)?s[a]=fR(l):l&&typeof l=="object"&&l.constructor===Object?s[a]=xg(l):s[a]=l);return s}function e0(t,s){for(;t!==null;){const l=mV(t,s);if(l){if(l.get)return Li(l.get);if(typeof l.value=="function")return Li(l.value)}t=fV(t)}function a(){return null}return a}const t3=Ii(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),n3=Ii(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),J2=Ii(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),mR=Ii(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Q2=Ii(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),pV=Ii(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),gR=Ii(["#text"]),hR=Ii(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),o3=Ii(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),pR=Ii(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),q2=Ii(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),s3=Ul(/\{\{[\w\W]*|[\w\W]*\}\}/gm),vV=Ul(/<%[\w\W]*|[\w\W]*%>/gm),bV=Ul(/\$\{[\w\W]*/gm),vR=Ul(/^data-[\-\w.\u00B7-\uFFFF]+$/),yV=Ul(/^aria-[\-\w]+$/),bR=Ul(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),CV=Ul(/^(?:\w+script|data):/i),SV=Ul(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),yR=Ul(/^html$/i),xV=Ul(/^[a-z][.\w]*(-[.\w]+)+$/i);var CR=Object.freeze({__proto__:null,ARIA_ATTR:yV,ATTR_WHITESPACE:SV,CUSTOM_ELEMENT:xV,DATA_ATTR:vR,DOCTYPE_NAME:yR,ERB_EXPR:vV,IS_ALLOWED_URI:bR,IS_SCRIPT_OR_DATA:CV,MUSTACHE_EXPR:s3,TMPLIT_EXPR:bV});const wp={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},SR=function(){return typeof window>"u"?null:window},wV=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let l=null;const u="data-tt-policy-suffix";a&&a.hasAttribute(u)&&(l=a.getAttribute(u));const f="dompurify"+(l?"#"+l:"");try{return s.createPolicy(f,{createHTML(m){return m},createScriptURL(m){return m}})}catch{return console.warn("TrustedTypes policy "+f+" could not be created."),null}},xR=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function wR(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:SR();const s=jn=>wR(jn);if(s.version="3.2.4",s.removed=[],!t||!t.document||t.document.nodeType!==wp.document||!t.Element)return s.isSupported=!1,s;let{document:a}=t;const l=a,u=l.currentScript,{DocumentFragment:f,HTMLTemplateElement:m,Node:p,Element:v,NodeFilter:C,NamedNodeMap:E=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:D,DOMParser:I,trustedTypes:H}=t,W=v.prototype,Q=e0(W,"cloneNode"),se=e0(W,"remove"),X=e0(W,"nextSibling"),ie=e0(W,"childNodes"),le=e0(W,"parentNode");if(typeof m=="function"){const jn=a.createElement("template");jn.content&&jn.content.ownerDocument&&(a=jn.content.ownerDocument)}let xe,Re="";const{implementation:vt,createNodeIterator:Ke,createDocumentFragment:Pe,getElementsByTagName:St}=a,{importNode:Gt}=l;let Lt=xR();s.isSupported=typeof Y4=="function"&&typeof le=="function"&&vt&&vt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Ln,ERB_EXPR:ln,TMPLIT_EXPR:bn,DATA_ATTR:Rt,ARIA_ATTR:Ze,IS_SCRIPT_OR_DATA:it,ATTR_WHITESPACE:Qt,CUSTOM_ELEMENT:yn}=CR;let{IS_ALLOWED_URI:Ut}=CR,pn=null;const Eo=Io({},[...t3,...n3,...J2,...Q2,...gR]);let bo=null;const hi=Io({},[...hR,...o3,...pR,...q2]);let rs=Object.seal(X4(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),dl=null,sa=null,fl=!0,ml=!0,Hc=!1,V0=!0,rd=!1,BA=!0,Yg=!1,LA=!1,uK=!1,AS=!1,cB=!1,uB=!1,NX=!0,IX=!1;const JJ="user-content-";let dK=!0,FA=!1,OS={},kS=null;const BX=Io({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let LX=null;const FX=Io({},["audio","video","img","source","image","track"]);let fK=null;const _X=Io({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),dB="http://www.w3.org/1998/Math/MathML",fB="http://www.w3.org/2000/svg",Xg="http://www.w3.org/1999/xhtml";let DS=Xg,mK=!1,gK=null;const QJ=Io({},[dB,fB,Xg],q4);let mB=Io({},["mi","mo","mn","ms","mtext"]),gB=Io({},["annotation-xml"]);const qJ=Io({},["title","style","font","a","script"]);let _A=null;const eQ=["application/xhtml+xml","text/html"],tQ="text/html";let pi=null,MS=null;const nQ=a.createElement("form"),$X=function(De){return De instanceof RegExp||De instanceof Function},hK=function(){let De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(MS&&MS===De)){if((!De||typeof De!="object")&&(De={}),De=xg(De),_A=eQ.indexOf(De.PARSER_MEDIA_TYPE)===-1?tQ:De.PARSER_MEDIA_TYPE,pi=_A==="application/xhtml+xml"?q4:X2,pn=Ic(De,"ALLOWED_TAGS")?Io({},De.ALLOWED_TAGS,pi):Eo,bo=Ic(De,"ALLOWED_ATTR")?Io({},De.ALLOWED_ATTR,pi):hi,gK=Ic(De,"ALLOWED_NAMESPACES")?Io({},De.ALLOWED_NAMESPACES,q4):QJ,fK=Ic(De,"ADD_URI_SAFE_ATTR")?Io(xg(_X),De.ADD_URI_SAFE_ATTR,pi):_X,LX=Ic(De,"ADD_DATA_URI_TAGS")?Io(xg(FX),De.ADD_DATA_URI_TAGS,pi):FX,kS=Ic(De,"FORBID_CONTENTS")?Io({},De.FORBID_CONTENTS,pi):BX,dl=Ic(De,"FORBID_TAGS")?Io({},De.FORBID_TAGS,pi):{},sa=Ic(De,"FORBID_ATTR")?Io({},De.FORBID_ATTR,pi):{},OS=Ic(De,"USE_PROFILES")?De.USE_PROFILES:!1,fl=De.ALLOW_ARIA_ATTR!==!1,ml=De.ALLOW_DATA_ATTR!==!1,Hc=De.ALLOW_UNKNOWN_PROTOCOLS||!1,V0=De.ALLOW_SELF_CLOSE_IN_ATTR!==!1,rd=De.SAFE_FOR_TEMPLATES||!1,BA=De.SAFE_FOR_XML!==!1,Yg=De.WHOLE_DOCUMENT||!1,AS=De.RETURN_DOM||!1,cB=De.RETURN_DOM_FRAGMENT||!1,uB=De.RETURN_TRUSTED_TYPE||!1,uK=De.FORCE_BODY||!1,NX=De.SANITIZE_DOM!==!1,IX=De.SANITIZE_NAMED_PROPS||!1,dK=De.KEEP_CONTENT!==!1,FA=De.IN_PLACE||!1,Ut=De.ALLOWED_URI_REGEXP||bR,DS=De.NAMESPACE||Xg,mB=De.MATHML_TEXT_INTEGRATION_POINTS||mB,gB=De.HTML_INTEGRATION_POINTS||gB,rs=De.CUSTOM_ELEMENT_HANDLING||{},De.CUSTOM_ELEMENT_HANDLING&&$X(De.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(rs.tagNameCheck=De.CUSTOM_ELEMENT_HANDLING.tagNameCheck),De.CUSTOM_ELEMENT_HANDLING&&$X(De.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(rs.attributeNameCheck=De.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),De.CUSTOM_ELEMENT_HANDLING&&typeof De.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(rs.allowCustomizedBuiltInElements=De.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),rd&&(ml=!1),cB&&(AS=!0),OS&&(pn=Io({},gR),bo=[],OS.html===!0&&(Io(pn,t3),Io(bo,hR)),OS.svg===!0&&(Io(pn,n3),Io(bo,o3),Io(bo,q2)),OS.svgFilters===!0&&(Io(pn,J2),Io(bo,o3),Io(bo,q2)),OS.mathMl===!0&&(Io(pn,Q2),Io(bo,pR),Io(bo,q2))),De.ADD_TAGS&&(pn===Eo&&(pn=xg(pn)),Io(pn,De.ADD_TAGS,pi)),De.ADD_ATTR&&(bo===hi&&(bo=xg(bo)),Io(bo,De.ADD_ATTR,pi)),De.ADD_URI_SAFE_ATTR&&Io(fK,De.ADD_URI_SAFE_ATTR,pi),De.FORBID_CONTENTS&&(kS===BX&&(kS=xg(kS)),Io(kS,De.FORBID_CONTENTS,pi)),dK&&(pn["#text"]=!0),Yg&&Io(pn,["html","head","body"]),pn.table&&(Io(pn,["tbody"]),delete dl.tbody),De.TRUSTED_TYPES_POLICY){if(typeof De.TRUSTED_TYPES_POLICY.createHTML!="function")throw qv('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof De.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw qv('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');xe=De.TRUSTED_TYPES_POLICY,Re=xe.createHTML("")}else xe===void 0&&(xe=wV(H,u)),xe!==null&&typeof Re=="string"&&(Re=xe.createHTML(""));Ii&&Ii(De),MS=De}},HX=Io({},[...n3,...J2,...mR]),VX=Io({},[...Q2,...pV]),oQ=function(De){let jt=le(De);(!jt||!jt.tagName)&&(jt={namespaceURI:DS,tagName:"template"});const Fn=X2(De.tagName),kr=X2(jt.tagName);return gK[De.namespaceURI]?De.namespaceURI===fB?jt.namespaceURI===Xg?Fn==="svg":jt.namespaceURI===dB?Fn==="svg"&&(kr==="annotation-xml"||mB[kr]):!!HX[Fn]:De.namespaceURI===dB?jt.namespaceURI===Xg?Fn==="math":jt.namespaceURI===fB?Fn==="math"&&gB[kr]:!!VX[Fn]:De.namespaceURI===Xg?jt.namespaceURI===fB&&!gB[kr]||jt.namespaceURI===dB&&!mB[kr]?!1:!VX[Fn]&&(qJ[Fn]||!HX[Fn]):!!(_A==="application/xhtml+xml"&&gK[De.namespaceURI]):!1},sm=function(De){Sp(s.removed,{element:De});try{le(De).removeChild(De)}catch{se(De)}},$A=function(De,jt){try{Sp(s.removed,{attribute:jt.getAttributeNode(De),from:jt})}catch{Sp(s.removed,{attribute:null,from:jt})}if(jt.removeAttribute(De),De==="is")if(AS||cB)try{sm(jt)}catch{}else try{jt.setAttribute(De,"")}catch{}},zX=function(De){let jt=null,Fn=null;if(uK)De="<remove></remove>"+De;else{const vi=dR(De,/^[\r\n\t ]+/);Fn=vi&&vi[0]}_A==="application/xhtml+xml"&&DS===Xg&&(De='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+De+"</body></html>");const kr=xe?xe.createHTML(De):De;if(DS===Xg)try{jt=new I().parseFromString(kr,_A)}catch{}if(!jt||!jt.documentElement){jt=vt.createDocument(DS,"template",null);try{jt.documentElement.innerHTML=mK?Re:kr}catch{}}const gl=jt.body||jt.documentElement;return De&&Fn&&gl.insertBefore(a.createTextNode(Fn),gl.childNodes[0]||null),DS===Xg?St.call(jt,Yg?"html":"body")[0]:Yg?jt.documentElement:gl},UX=function(De){return Ke.call(De.ownerDocument||De,De,C.SHOW_ELEMENT|C.SHOW_COMMENT|C.SHOW_TEXT|C.SHOW_PROCESSING_INSTRUCTION|C.SHOW_CDATA_SECTION,null)},pK=function(De){return De instanceof D&&(typeof De.nodeName!="string"||typeof De.textContent!="string"||typeof De.removeChild!="function"||!(De.attributes instanceof E)||typeof De.removeAttribute!="function"||typeof De.setAttribute!="function"||typeof De.namespaceURI!="string"||typeof De.insertBefore!="function"||typeof De.hasChildNodes!="function")},ZX=function(De){return typeof p=="function"&&De instanceof p};function Jg(jn,De,jt){Y2(jn,Fn=>{Fn.call(s,De,jt,MS)})}const WX=function(De){let jt=null;if(Jg(Lt.beforeSanitizeElements,De,null),pK(De))return sm(De),!0;const Fn=pi(De.nodeName);if(Jg(Lt.uponSanitizeElement,De,{tagName:Fn,allowedTags:pn}),De.hasChildNodes()&&!ZX(De.firstElementChild)&&Bi(/<[/\w]/g,De.innerHTML)&&Bi(/<[/\w]/g,De.textContent)||De.nodeType===wp.progressingInstruction||BA&&De.nodeType===wp.comment&&Bi(/<[/\w]/g,De.data))return sm(De),!0;if(!pn[Fn]||dl[Fn]){if(!dl[Fn]&&GX(Fn)&&(rs.tagNameCheck instanceof RegExp&&Bi(rs.tagNameCheck,Fn)||rs.tagNameCheck instanceof Function&&rs.tagNameCheck(Fn)))return!1;if(dK&&!kS[Fn]){const kr=le(De)||De.parentNode,gl=ie(De)||De.childNodes;if(gl&&kr){const vi=gl.length;for(let Vc=vi-1;Vc>=0;--Vc){const rm=Q(gl[Vc],!0);rm.__removalCount=(De.__removalCount||0)+1,kr.insertBefore(rm,X(De))}}}return sm(De),!0}return De instanceof v&&!oQ(De)||(Fn==="noscript"||Fn==="noembed"||Fn==="noframes")&&Bi(/<\/no(script|embed|frames)/i,De.innerHTML)?(sm(De),!0):(rd&&De.nodeType===wp.text&&(jt=De.textContent,Y2([Ln,ln,bn],kr=>{jt=Xf(jt,kr," ")}),De.textContent!==jt&&(Sp(s.removed,{element:De.cloneNode()}),De.textContent=jt)),Jg(Lt.afterSanitizeElements,De,null),!1)},jX=function(De,jt,Fn){if(NX&&(jt==="id"||jt==="name")&&(Fn in a||Fn in nQ))return!1;if(!(ml&&!sa[jt]&&Bi(Rt,jt))){if(!(fl&&Bi(Ze,jt))){if(!bo[jt]||sa[jt]){if(!(GX(De)&&(rs.tagNameCheck instanceof RegExp&&Bi(rs.tagNameCheck,De)||rs.tagNameCheck instanceof Function&&rs.tagNameCheck(De))&&(rs.attributeNameCheck instanceof RegExp&&Bi(rs.attributeNameCheck,jt)||rs.attributeNameCheck instanceof Function&&rs.attributeNameCheck(jt))||jt==="is"&&rs.allowCustomizedBuiltInElements&&(rs.tagNameCheck instanceof RegExp&&Bi(rs.tagNameCheck,Fn)||rs.tagNameCheck instanceof Function&&rs.tagNameCheck(Fn))))return!1}else if(!fK[jt]){if(!Bi(Ut,Xf(Fn,Qt,""))){if(!((jt==="src"||jt==="xlink:href"||jt==="href")&&De!=="script"&&Zl(Fn,"data:")===0&&LX[De])){if(!(Hc&&!Bi(it,Xf(Fn,Qt,"")))){if(Fn)return!1}}}}}}return!0},GX=function(De){return De!=="annotation-xml"&&dR(De,yn)},KX=function(De){Jg(Lt.beforeSanitizeAttributes,De,null);const{attributes:jt}=De;if(!jt||pK(De))return;const Fn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:bo,forceKeepAttr:void 0};let kr=jt.length;for(;kr--;){const gl=jt[kr],{name:vi,namespaceURI:Vc,value:rm}=gl,HA=pi(vi);let $i=vi==="value"?rm:e3(rm);const rQ=$i;if(Fn.attrName=HA,Fn.attrValue=$i,Fn.keepAttr=!0,Fn.forceKeepAttr=void 0,Jg(Lt.uponSanitizeAttribute,De,Fn),$i=Fn.attrValue,IX&&(HA==="id"||HA==="name")&&($A(vi,De),$i=JJ+$i),BA&&Bi(/((--!?|])>)|<\/(style|title)/i,$i)){$A(vi,De);continue}if(Fn.forceKeepAttr)continue;if(!Fn.keepAttr){$A(vi,De);continue}if(!V0&&Bi(/\/>/i,$i)){$A(vi,De);continue}rd&&Y2([Ln,ln,bn],XX=>{$i=Xf($i,XX," ")});const YX=pi(De.nodeName);if(!jX(YX,HA,$i)){$A(vi,De);continue}if(xe&&typeof H=="object"&&typeof H.getAttributeType=="function"&&!Vc)switch(H.getAttributeType(YX,HA)){case"TrustedHTML":{$i=xe.createHTML($i);break}case"TrustedScriptURL":{$i=xe.createScriptURL($i);break}}if($i!==rQ)try{Vc?De.setAttributeNS(Vc,vi,$i):De.setAttribute(vi,$i),pK(De)?sm(De):uR(s.removed)}catch{}}Jg(Lt.afterSanitizeAttributes,De,null)},sQ=function jn(De){let jt=null;const Fn=UX(De);for(Jg(Lt.beforeSanitizeShadowDOM,De,null);jt=Fn.nextNode();)Jg(Lt.uponSanitizeShadowNode,jt,null),WX(jt),KX(jt),jt.content instanceof f&&jn(jt.content);Jg(Lt.afterSanitizeShadowDOM,De,null)};return s.sanitize=function(jn){let De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},jt=null,Fn=null,kr=null,gl=null;if(mK=!jn,mK&&(jn="<!-->"),typeof jn!="string"&&!ZX(jn))if(typeof jn.toString=="function"){if(jn=jn.toString(),typeof jn!="string")throw qv("dirty is not a string, aborting")}else throw qv("toString is not a function");if(!s.isSupported)return jn;if(LA||hK(De),s.removed=[],typeof jn=="string"&&(FA=!1),FA){if(jn.nodeName){const rm=pi(jn.nodeName);if(!pn[rm]||dl[rm])throw qv("root node is forbidden and cannot be sanitized in-place")}}else if(jn instanceof p)jt=zX("<!---->"),Fn=jt.ownerDocument.importNode(jn,!0),Fn.nodeType===wp.element&&Fn.nodeName==="BODY"||Fn.nodeName==="HTML"?jt=Fn:jt.appendChild(Fn);else{if(!AS&&!rd&&!Yg&&jn.indexOf("<")===-1)return xe&&uB?xe.createHTML(jn):jn;if(jt=zX(jn),!jt)return AS?null:uB?Re:""}jt&&uK&&sm(jt.firstChild);const vi=UX(FA?jn:jt);for(;kr=vi.nextNode();)WX(kr),KX(kr),kr.content instanceof f&&sQ(kr.content);if(FA)return jn;if(AS){if(cB)for(gl=Pe.call(jt.ownerDocument);jt.firstChild;)gl.appendChild(jt.firstChild);else gl=jt;return(bo.shadowroot||bo.shadowrootmode)&&(gl=Gt.call(l,gl,!0)),gl}let Vc=Yg?jt.outerHTML:jt.innerHTML;return Yg&&pn["!doctype"]&&jt.ownerDocument&&jt.ownerDocument.doctype&&jt.ownerDocument.doctype.name&&Bi(yR,jt.ownerDocument.doctype.name)&&(Vc="<!DOCTYPE "+jt.ownerDocument.doctype.name+`>
`+Vc),rd&&Y2([Ln,ln,bn],rm=>{Vc=Xf(Vc,rm," ")}),xe&&uB?xe.createHTML(Vc):Vc},s.setConfig=function(){let jn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};hK(jn),LA=!0},s.clearConfig=function(){MS=null,LA=!1},s.isValidAttribute=function(jn,De,jt){MS||hK({});const Fn=pi(jn),kr=pi(De);return jX(Fn,kr,jt)},s.addHook=function(jn,De){typeof De=="function"&&Sp(Lt[jn],De)},s.removeHook=function(jn,De){if(De!==void 0){const jt=gV(Lt[jn],De);return jt===-1?void 0:xp(Lt[jn],jt,1)[0]}return uR(Lt[jn])},s.removeHooks=function(jn){Lt[jn]=[]},s.removeAllHooks=function(){Lt=xR()},s}var EV=wR();const ER=t=>EV().sanitize(t);var Wl=tinymce.util.Tools.resolve("tinymce.util.I18n");const TR={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-disc":!0,"list-bull-default":!0,"list-bull-square":!0},r3="temporary-placeholder",eC=t=>()=>Be(t,r3).getOr("!not found!"),t0=(t,s)=>{const a=t.toLowerCase();if(Wl.isRtl()){const l=jc(a,"-rtl");return _t(s,l)?l:a}else return a},AR=(t,s)=>Be(s,t0(t,s)),a3=(t,s)=>{const a=s();return AR(t,a).getOrThunk(eC(a))},TV=(t,s,a)=>{const l=s();return AR(t,l).or(a).getOrThunk(eC(l))},AV=t=>Wl.isRtl()?_t(TR,t):!1,OR=()=>un("add-focusable",[Ho(t=>{Mu(t.element,"svg").each(s=>cn(s,"focusable","false"))})]),kR=(t,s,a,l)=>{var u,f;const m=AV(s)?["tox-icon--flip"]:[],p=Be(a,t0(s,a)).or(l).getOrThunk(eC(a));return{dom:{tag:t.tag,attributes:(u=t.attributes)!==null&&u!==void 0?u:{},classes:t.classes.concat(m),innerHtml:p},behaviours:Qe([...(f=t.behaviours)!==null&&f!==void 0?f:[],OR()])}},ui=(t,s,a,l=x.none())=>kR(s,t,a(),l),Kd=(t,s,a)=>{const l=a(),u=Ft(t,f=>_t(l,t0(f,l)));return kR(s,u.getOr(r3),l,x.none())},OV={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},i3=rl({name:"Notification",factory:t=>{const s=yt("notification-text"),a=ao({dom:Gu(`<p id=${s}>${ER(t.backstageProvider.translate(t.text))}</p>`),behaviours:Qe([fn.config({})])}),l=W=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${W}%`}}}),u=W=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${W}%`}}),f=ao({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(0)]},u(0)],behaviours:Qe([fn.config({})])}),v={updateProgress:(W,Q)=>{W.getSystem().isConnected()&&f.getOpt(W).each(se=>{fn.set(se,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(Q)]},u(Q)])})},updateText:(W,Q)=>{if(W.getSystem().isConnected()){const se=a.get(W);fn.set(se,[Wo(Q)])}}},C=Yt([t.icon.toArray(),[t.level],x.from(OV[t.level]).toArray()]),E=ao(Ar.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[ui("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:Qe([No.config({}),Qo.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:W=>{t.onAction(W)}})),D=Kd(C,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),I={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:Qe([fn.config({})])},H=[D,I];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},behaviours:Qe([No.config({}),on.config({}),Pt.config({mode:"special",onEscape:W=>(t.onAction(W),x.some(!0))})]),components:H.concat(t.progress?[f.asSpec()]:[]).concat([E.asSpec()]),apis:v}},configFields:[As("level","info",["success","error","warning","warn","info"]),We("progress"),uo("icon"),We("onAction"),We("text"),We("iconProvider"),We("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var l3=(t,s,a,l)=>{const u=s.backstage.shared,f=()=>ht.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),m=()=>{const D=$r(f());return x.some(D)},p=D=>{m().each(I=>{tt(D,H=>{ft(H.element,"width"),or(H.element)>I.width&&hn(H.element,"width",I.width+"px")})})};return{open:(D,I,H)=>{const W=()=>{const le=Ke=>{fn.remove(Ke,se),X()},xe=(Ke,Pe)=>{da(Ke.element).length===0?Re(Ke,Pe):vt(Ke,Pe)},Re=(Ke,Pe)=>{qo.hide(Ke),l.clear(),Pe&&t.focus()},vt=(Ke,Pe)=>{Pe&&Pt.focusIn(Ke)};l.on(Ke=>{I();const Pe=H();le(Ke),xe(Ke,Pe)})},Q=()=>!Cp(t)||!u.header.isPositionedAtTop(),se=va(i3.sketch({text:D.text,level:Kt(["success","error","warning","warn","info"],D.type)?D.type:void 0,progress:D.progressBar===!0,icon:D.icon,onAction:W,iconProvider:u.providers.icons,backstageProvider:u.providers}));if(l.isSet()){const le=ol(se);l.on(xe=>{fn.append(xe,le),qo.reposition(xe),se.hasConfigured(Jo)&&Jo.refresh(xe),p(xe.components())})}else{const le=va(qo.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:u.getSink,fireDismissalEventInstead:{},...u.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Qe([Pt.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),fn.config({}),...Q()?[Jo.config({contextual:{lazyContext:()=>x.some($r(f())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Ke=>Yf(t,Ke.element).map(St=>({bounds:Sg(St),optScrollEnv:x.some({currentScrollTop:St.element.dom.scrollTop,scrollElmTop:dc(St.element).top})})).getOrThunk(()=>({bounds:ma(),optScrollEnv:x.none()}))})]:[]])})),xe=ol(se),Re={maxHeightFunction:Um()},vt={...u.anchors.banner(),overrides:Re};l.set(le),a.add(le),qo.showWithinBounds(le,xe,{anchor:vt},m)}_e(D.timeout)&&D.timeout>0&&U2.setEditorTimeout(t,()=>{W()},D.timeout);const X=()=>{l.on(le=>{qo.reposition(le),le.hasConfigured(Jo)&&Jo.refresh(le),p(le.components())})};return{close:W,reposition:X,text:le=>{i3.updateText(se,le)},settings:D,getEl:()=>se.element.dom,progressBar:{value:le=>{i3.updateProgress(se,le)}}}},close:D=>{D.close()},getArgs:D=>D.settings}};const kV={setup:(t,s)=>{const a=(u,f)=>{Zt(u,Jc(),{raw:f})},l=()=>t.getMenu().bind(ro.getHighlighted);s.on("keydown",u=>{const f=u.which;t.isActive()&&(t.isMenuOpen()?f===13?(l().each(Zm),u.preventDefault()):f===40?(l().fold(()=>{t.getMenu().each(ro.highlightFirst)},m=>{a(m,u)}),u.preventDefault(),u.stopImmediatePropagation()):(f===37||f===38||f===39)&&l().each(m=>{a(m,u),u.preventDefault(),u.stopImmediatePropagation()}):(f===13||f===38||f===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var c3;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(c3||(c3={}));var jl=c3;const u3="tox-menu-nav__js",Ep="tox-collection__item",n0="tox-swatch",d3={normal:u3,color:n0},f3="tox-collection__item--enabled",il="tox-collection__group-heading",DR="tox-collection__item-icon",DV="tox-collection__item-image",MR="tox-collection__item-image-selector",nC="tox-collection__item-label",MV="tox-collection__item-accessory",RR="tox-collection__item-caret",RV="tox-collection__item-checkmark",wg="tox-collection__item--active",PR="tox-collection__item-container",PV="tox-collection__item-container--column",NR="tox-collection__item-container--row",IR="tox-collection__item-container--align-right",NV="tox-collection__item-container--align-left",IV="tox-collection__item-container--valign-top",BV="tox-collection__item-container--valign-middle",BR="tox-collection__item-container--valign-bottom",oC=t=>Be(d3,t).getOr(u3),LR=t=>t==="color"?"tox-swatches":"tox-menu",sC=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:LR(t),tieredMenu:"tox-tiered-menu"}),Yd=t=>{const s=sC(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:oC(t)}},FR=(t,s,a)=>{const l=sC(a);return{tag:"div",classes:Yt([[l.menu,`tox-menu-${s}-column`],t?[l.hasIcons]:[]])}},m3=[Yu.parts.items({})],rC=(t,s,a)=>{const l=sC(a);return{dom:{tag:"div",classes:Yt([[l.tieredMenu]])},markers:Yd(a)}},aC=yt("refetch-trigger-event"),Eg=yt("redirect-menu-item-interaction"),g3="tox-menu__searcher",o0=t=>Ro(t.element,`.${g3}`).bind(s=>t.getSystem().getByDom(s).toOptional()),h3=o0,LV=(t,s)=>{Ct.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},_R=t=>{const s=Ct.getValue(t),a=t.element.dom.selectionStart,l=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:l}},iC=(t,s)=>{tr(s.element,"id").each(a=>cn(t.element,"aria-activedescendant",a))},FV=t=>{const s=(u,f)=>(f.cut(),x.none()),a=(u,f)=>{const m={interactionEvent:f.event,eventType:f.event.raw.type};return Zt(u,Eg,m),x.some(!0)},l="searcher-events";return{dom:{tag:"div",classes:[Ep]},components:[Ju.sketch({inputClasses:[g3,"tox-textfield"],inputAttributes:{...t.placeholder.map(u=>({placeholder:t.i18n(u)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Qe([un(l,[Fe(wd(),u=>{Un(u,aC)}),Fe(Jc(),(u,f)=>{f.event.raw.key==="Escape"&&f.stop()})]),Pt.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[l,Pt.name()]}})]}},lC="tox-collection--results__js",p3=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:yt("aria-item-search-result-id"),"aria-selected":"false"}}}:t},s0=(t,s)=>a=>{const l=go(a,s);return Le(l,u=>({dom:t,components:u}))},v3=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Yu.parts.items({preprocess:t!=="auto"?s0({tag:"div",classes:["tox-swatches__row"]},t):lt})]}]}),$R=t=>({dom:{tag:"div",classes:["tox-menu","tox-image-selector-menu"]},components:[{dom:{tag:"div",classes:["tox-image-selector"]},components:[Yu.parts.items({preprocess:t!=="auto"?s0({tag:"div",classes:["tox-image-selector__row"]},t):lt})]}]}),Ja=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Yu.parts.items({preprocess:s0({tag:"div",classes:["tox-collection__group"]},t)})]}),b3=(t,s)=>{const a=[];let l=[];return tt(t,(u,f)=>{s(u,f)?(l.length>0&&a.push(l),l=[],(_t(u.dom,"innerHtml")||u.components&&u.components.length>0)&&l.push(u)):l.push(u)}),l.length>0&&a.push(l),Le(a,u=>({dom:{tag:"div",classes:["tox-collection__group"]},components:u}))},y3=(t,s,a)=>Yu.parts.items({preprocess:l=>{const u=Le(l,a);return t!=="auto"&&t>1?s0({tag:"div",classes:["tox-collection__group"]},t)(u):b3(u,(f,m)=>s[m].type==="separator")}}),HR=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[y3(t,s,lt)]}),VR=(t,s,a=!0)=>{const l=yt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",lC].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:l}},components:[y3(t,s,p3)]}},_V=(t,s,a)=>{const l=yt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[FV({i18n:Wl.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],lC],attributes:{id:l}},components:[y3(t,s,p3)]}]}},$V=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Yu.parts.items({preprocess:a=>b3(a,(l,u)=>t[u].type==="separator")})]}),r0=t=>fo(t,s=>"icon"in s&&s.icon!==void 0),Bc=t=>(console.error(Pm(t)),console.log(t),x.none()),qu=(t,s,a,l,u)=>{const f=$V(a);return{value:t,dom:f.dom,components:f.components,items:a}},a0=(t,s,a,l,u)=>{const f=()=>u.menuType!=="searchable"?HR(l,a):u.searchMode.searchMode==="search-with-field"?_V(l,a,u.searchMode):VR(l,a);if(u.menuType==="color"){const m=v3(l);return{value:t,dom:m.dom,components:m.components,items:a}}else if(u.menuType==="imageselector"&&l!=="auto"){const m=$R(l);return{value:t,dom:m.dom,components:m.components,items:a}}else if(u.menuType==="normal"&&l==="auto"){const m=HR(l,a);return{value:t,dom:m.dom,components:m.components,items:a}}else if(u.menuType==="normal"||u.menuType==="searchable"){const m=f();return{value:t,dom:m.dom,components:m.components,items:a}}else if(u.menuType==="listpreview"&&l!=="auto"){const m=Ja(l);return{value:t,dom:m.dom,components:m.components,items:a}}else return{value:t,dom:FR(s,l,u.menuType),components:m3,items:a}},bs=gr("type"),Tp=gr("name"),Ap=gr("label"),Xd=gr("text"),zR=gr("title"),C3=gr("icon"),HV=gr("url"),Op=gr("value"),VV=vc("fetch"),zV=vc("getSubmenuItems"),Tg=vc("onAction"),UV=vc("onItemAction"),di=Zo("onSetup",()=>q),cC=Hs("name"),Jf=Hs("text"),ZV=Hs("role"),ll=Hs("icon"),Qf=Hs("tooltip"),Ag=Hs("label"),kp=Hs("shortcut"),i0=Yc("select"),ed=ea("active",!1),UR=ea("borderless",!1),Gl=ea("enabled",!0),l0=ea("primary",!1),S3=t=>ve("columns",t),x3=ve("meta",{}),w3=Zo("onAction",q),Og=t=>$o("type",t),E3=t=>qr("name","name",Nb(()=>yt(`${t}-name`)),Gs),WV=t=>qr("value","value",Nb(()=>yt(`${t}-value`)),hc()),ZR=[bs,Xd,tl("level",["info","warn","error","success"]),C3,ve("url","")],WR=rn(ZR),jV=t=>[bs,t],jR=[bs,Xd,Gl,E3("button"),ll,UR,px("buttonType",["primary","secondary","toolbar"]),l0,$o("context","mode:design")],GV=rn(jR),kg=[bs,Tp],Qa=kg.concat([Ag]),KV=kg.concat([Ap,Gl,$o("context","mode:design")]),GR=rn(KV),YV=Rb,XV=Qa.concat([S3("auto"),$o("context","mode:design")]),JV=rn(XV),QV=Eh([Op,Xd,C3]),KR=Qa.concat([$o("storageKey","default"),$o("context","mode:design")]),qV=rn(KR),YR=Gs,Jd=rn(Qa),T3=Gs,JR=kg.concat([$o("tag","textarea"),gr("scriptId"),gr("scriptUrl"),Yc("onFocus"),v7("settings",void 0)]),QR=kg.concat([$o("tag","textarea"),vc("init")]),A3=Rm(t=>ps("customeditor.old",qi(QR),t).orThunk(()=>ps("customeditor.new",qi(JR),t))),qR=Gs,su=[Gl,Jf,ZV,kp,WV("menuitem"),x3,$o("context","mode:design")],eP=rn([bs,Tp].concat(su)),tP=Rb,O3=[E3("button"),ll,As("align","end",["start","end"]),l0,Gl,px("buttonType",["primary","secondary"]),$o("context","mode:design")],nP=[...O3,Xd],k3=[tl("type",["submit","cancel","custom"]),...nP],ez=[tl("type",["menu"]),Jf,Qf,ll,Ei("items",eP),...O3],tz=[...O3,tl("type",["togglebutton"]),Qf,ll,Jf,ea("active",!1)],oP=wi("type",{submit:k3,cancel:k3,custom:k3,menu:ez,togglebutton:tz}),sP=Qa.concat([$o("context","mode:design")]),nz=rn(sP),oz=p7(),sz=t=>[bs,OO("columns"),t],uC=[bs,gr("html"),As("presets","presentation",["presentation","document"]),Zo("onInit",q),ea("stretched",!1)],rz=rn(uC),az=Qa.concat([ea("border",!1),ea("sandboxed",!0),ea("streamContent",!1),ea("transparent",!0)]),rP=rn(az),aP=Gs,iz=rn(kg.concat([Hs("height")])),lz=rn([gr("url"),M1("zoom"),M1("cachedWidth"),M1("cachedHeight")]),D3=Qa.concat([Hs("inputMode"),Hs("placeholder"),ea("maximized",!1),Gl,$o("context","mode:design")]),cz=rn(D3),iP=Gs,uz=t=>[bs,Ap,t,As("align","start",["start","center","end"]),Hs("for")],dz=[Xd,Op],fz=[Xd,Ei("items",gx("items",()=>M3))],M3=Lb([rn(dz),rn(fz)]),lP=Qa.concat([Ei("items",M3),Gl,$o("context","mode:design")]),mz=rn(lP),gz=Gs,hz=Qa.concat([kO("items",[Xd,Op]),MO("size",1),Gl,$o("context","mode:design")]),pz=rn(hz),cP=Gs,vz=Qa.concat([ea("constrain",!0),Gl,$o("context","mode:design")]),uP=rn(vz),dP=rn([gr("width"),gr("height")]),bz=kg.concat([Ap,MO("min",0),MO("max",0)]),yz=rn(bz),Cz=Mb,Sz=[bs,Ei("header",Gs),Ei("cells",Lu(Gs))],xz=rn(Sz),wz=Qa.concat([Hs("placeholder"),ea("maximized",!1),Gl,$o("context","mode:design")]),Ez=rn(wz),Tz=Gs,R3=[$o("buttonType","default"),Hs("text"),Hs("tooltip"),Hs("icon"),yc("search",!1,Lb([Rb,rn([Hs("placeholder")])],t=>re(t)?t?x.some({placeholder:x.none()}):x.none():x.some(t))),vc("fetch"),Zo("onSetup",()=>q),$o("context","mode:design")],fP=rn([bs,...R3]),mP=t=>ps("menubutton",fP,t),gP=[tl("type",["directory","leaf"]),zR,gr("id"),ii("menu",fP),Hs("customStateIcon"),Hs("customStateIconTooltip")],fC=rn(gP),Az=gP.concat([Ei("children",gx("children",()=>pc("type",{directory:hP,leaf:fC})))]),hP=rn(Az),P3=pc("type",{directory:hP,leaf:fC}),Oz=[bs,Ei("items",P3),Yc("onLeafAction"),Yc("onToggleExpand"),xf("defaultExpandedIds",[],Gs),Hs("defaultSelectedId")],N3=rn(Oz),pP=Qa.concat([As("filetype","file",["image","media","file"]),Gl,Hs("picker_text"),$o("context","mode:design")]),kz=rn(pP),Dz=rn([Op,x3]),mC=t=>qr("items","items",Kc(),Lu(Rm(s=>ps(`Checking item of ${t}`,gC,s).fold(a=>xn.error(Pm(a)),a=>xn.value(a))))),gC=dx(()=>pc("type",{alertbanner:WR,bar:rn(jV(mC("bar"))),button:GV,checkbox:GR,colorinput:qV,colorpicker:Jd,dropzone:nz,grid:rn(sz(mC("grid"))),iframe:rP,input:cz,listbox:mz,selectbox:pz,sizeinput:uP,slider:yz,textarea:Ez,urlinput:kz,customeditor:A3,htmlpanel:rz,imagepreview:iz,collection:JV,label:rn(uz(mC("label"))),table:xz,tree:N3,panel:I3})),Mz=[bs,ve("classes",[]),Ei("items",gC)],I3=rn(Mz),vP=[E3("tab"),zR,Ei("items",gC)],Rz=[bs,kO("tabs",vP)],bP=rn(Rz),yP=nP,CP=oP,Pz=rn([gr("title"),el("body",pc("type",{panel:I3,tabpanel:bP})),$o("size","normal"),xf("buttons",[],CP),ve("initialData",{}),Zo("onAction",q),Zo("onChange",q),Zo("onSubmit",q),Zo("onClose",q),Zo("onCancel",q),Zo("onTabChange",q)]),Nz=t=>ps("dialog",Pz,t),Iz=rn([tl("type",["cancel","custom"]),...yP]),SP=rn([gr("title"),gr("url"),M1("height"),M1("width"),vx("buttons",Iz),Zo("onAction",q),Zo("onCancel",q),Zo("onClose",q),Zo("onMessage",q)]),Bz=t=>ps("dialog",SP,t),hC=t=>k(t)?[t].concat(ke(nn(t),hC)):K(t)?ke(t,hC):[],Lz=t=>B(t.type)&&B(t.name),Fz={checkbox:YV,colorinput:YR,colorpicker:T3,dropzone:oz,input:iP,iframe:aP,imagepreview:lz,selectbox:cP,sizeinput:dP,slider:Cz,listbox:gz,size:dP,textarea:Tz,urlinput:Dz,customeditor:qR,collection:QV,togglemenuitem:tP},B3=t=>x.from(Fz[t.type]),_z=t=>qn(hC(t),Lz),$z=t=>{const s=_z(t),a=ke(s,l=>B3(l).fold(()=>[],u=>[el(l.name,u)]));return rn(a)},xP=t=>{var s;const a=kl(Nz(t)),l=$z(t),u=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:l,initialData:u}},Qd={open:(t,s)=>{const a=xP(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=kl(Bz(s));return t(a)},redial:t=>xP(t)},wP=rn([bs,Jf]),EP=t=>ps("separatormenuitem",wP,t),Hz=rn([Og("autocompleteitem"),ed,Gl,x3,Op,Jf,ll]),TP=t=>ps("Autocompleter.Separator",wP,t),Vz=t=>ps("Autocompleter.Item",Hz,t),Dp=[Gl,Qf,ll,Jf,di,$o("context","mode:design")],zz=rn([bs,Tg,kp].concat(Dp)),L3=t=>ps("toolbarbutton",zz,t),F3=[ed].concat(Dp),AP=rn(F3.concat([bs,Tg,kp])),OP=t=>ps("ToggleButton",AP,t),pC=[Zo("predicate",at),As("scope","node",["node","editor"]),As("position","selection",["node","selection","line"])],kP=Dp.concat([Og("contextformbutton"),$o("align","end"),l0,Tg,Ma("original",lt)]),Uz=F3.concat([Og("contextformbutton"),$o("align","end"),l0,Tg,Ma("original",lt)]),Zz=Dp.concat([Og("contextformbutton")]),Wz=F3.concat([Og("contextformtogglebutton")]),DP=wi("type",{contextformbutton:kP,contextformtogglebutton:Uz}),_3=[Ag,Ei("commands",DP),ii("launch",wi("type",{contextformbutton:Zz,contextformtogglebutton:Wz})),Zo("onInput",q),Zo("onSetup",q)],jz=[...pC,..._3,tl("type",["contextform"]),Zo("initValue",te("")),Hs("placeholder")],Gz=[...pC,..._3,tl("type",["contextsliderform"]),Zo("initValue",te(0)),Zo("min",te(0)),Zo("max",te(100))],MP=[...pC,..._3,tl("type",["contextsizeinputform"]),Zo("initValue",te({width:"",height:""}))],RP=wi("type",{contextform:jz,contextsliderform:Gz,contextsizeinputform:MP}),PP=t=>ps("ContextForm",RP,t),vC=Dp.concat([Og("contexttoolbarbutton")]),Kz=rn([Og("contexttoolbar"),Ti("launch",vC),el("items",Lb([Gs,Eh([Hs("name"),Hs("label"),Ei("items",Gs)])]))].concat(pC)),Yz=t=>({name:t.name.getOrUndefined(),label:t.label.getOrUndefined(),items:t.items}),Xz=t=>({...t,launch:t.launch.getOrUndefined(),items:B(t.items)?t.items:Le(t.items,Yz)}),Jz=t=>ps("ContextToolbar",Kz,t),NP=[bs,gr("src"),Hs("alt"),xf("classes",[],Gs)],Qz=rn(NP),qz=[bs,Xd,cC,xf("classes",["tox-collection__item-label"],Gs)],eU=rn(qz),$3=dx(()=>pc("type",{cardimage:Qz,cardtext:eU,cardcontainer:IP})),IP=rn([bs,$o("direction","horizontal"),$o("align","left"),$o("valign","middle"),Ei("items",$3)]),tU=rn([bs,Ag,Ei("items",$3),di,w3].concat(su)),nU=t=>ps("cardmenuitem",tU,t),BP=rn([bs,ed,ll,Ag].concat(su)),oU=t=>ps("choicemenuitem",BP,t),H3=[bs,gr("fancytype"),w3],dn=[ve("initData",{})].concat(H3),c0=[Yc("select"),_b("initData",{},[ea("allowCustomColors",!0),$o("storageKey","default"),vx("colors",hc())])].concat(H3),LP=[Yc("select"),bc("initData",[OO("columns"),xf("items",[],hc())])].concat(H3),FP=wi("fancytype",{inserttable:dn,colorswatch:c0,imageselect:LP}),_P=t=>ps("fancymenuitem",FP,t),$P=rn([bs,ed,HV,Ag,Qf].concat(su)),sU=rn([bs,ed,C3,Ap,Qf,Op].concat(su)),HP=t=>ps("imagemenuitem",$P,t),rU=t=>ps("resetimageitem",sU,t),aU=rn([bs,di,w3,ll].concat(su)),iU=t=>ps("menuitem",aU,t),VP=rn([bs,zV,di,ll].concat(su)),zP=t=>ps("nestedmenuitem",VP,t),$Y=rn([bs,ll,ed,di,Tg].concat(su)),u0=t=>ps("togglemenuitem",$Y,t),V3=rn([ll,Qf,Zo("onShow",q),Zo("onHide",q),di]),UP=t=>ps("sidebar",V3,t),lU=rn([bs,el("items",Lb([Eh([Tp,Ei("items",Gs)]),Gs]))].concat(Dp)),cU=t=>ps("GroupToolbarButton",lU,t),ZP=rn([bs,Qf,ll,Jf,i0,VV,di,As("presets","normal",["normal","color","listpreview"]),S3(1),Tg,UV,$o("context","mode:design")]),uU=t=>ps("SplitButton",ZP,t),WP=[Jf,ll,Hs("tooltip"),As("buttonType","secondary",["primary","secondary"]),ea("borderless",!1),vc("onAction"),$o("context","mode:design")],z3=[...WP,Xd,tl("type",["button"])],dU=[...WP,ea("active",!1),tl("type",["togglebutton"])],d0={button:z3,togglebutton:dU},fU=[tl("type",["group"]),xf("buttons",[],wi("type",d0))],jP=wi("type",{...d0,group:fU}),mU=rn([xf("buttons",[],jP),vc("onShow"),vc("onHide")]),gU=t=>ps("view",mU,t),GP=(t,s,a)=>{const l=Yo(t.element,"."+a);if(l.length>0){const u=Cn(l,f=>{const m=f.dom.getBoundingClientRect().top,p=l[0].dom.getBoundingClientRect().top;return Math.abs(m-p)>s}).getOr(l.length);return x.some({numColumns:u,numRows:Math.ceil(l.length/u)})}else return x.none()},KP=(t,s)=>Qe([un(t,s)]),Dg={namedEvents:KP,unnamedEvents:t=>KP(yt("unnamed-events"),t)},Fi={item:t=>Bt.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Bt.config({disabled:t}),splitButton:t=>Bt.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Bt.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},f0=(t,s)=>{const a=t.getApi(s);return l=>{l(a)}},Lc=(t,s)=>Ho(a=>{Ce(t.onBeforeSetup)&&t.onBeforeSetup(a),f0(t,a)(u=>{const f=t.onSetup(u);Ce(f)&&s.set(f)})}),Kl=(t,s)=>qc(a=>f0(t,a)(s.get())),bC=(t,s,a)=>qc(l=>(a.set(Ct.getValue(l)),f0(t,l)(s.get()))),YP="silver.uistate",m0="setDisabled",vU="setEnabled",yC="init",bU=["switchmode",yC],Mp=(t,s)=>{const a=t.mainUi.outerContainer,l=[t.mainUi.mothership,...t.uiMotherships];s===m0&&tt(l,u=>{u.broadcastOn([Ku()],{target:a.element})}),tt(l,u=>{u.broadcastOn([YP],s)})},XP=(t,s)=>{t.on("init SwitchMode",a=>{Mp(s,a.type)}),t.on("DisabledStateChange",a=>{if(!a.isDefaultPrevented()){const l=a.state?m0:yC;Mp(s,l),a.state||t.nodeChanged()}}),t.on("NodeChange",a=>{const l=t.ui.isEnabled()?a.type:m0;Mp(s,l)}),H6(t)&&t.mode.set("readonly")},Rs=t=>Xa.config({channels:{[YP]:{onReceive:(s,a)=>{if(a===m0||a===vU){Bt.set(s,a===m0);return}const{contextType:l,shouldDisable:u}=t();l==="mode"&&!Kt(bU,a)||Bt.set(s,u)}}}}),yU=(t,s)=>Id((a,l)=>{f0(t,a)(t.onAction),!t.triggersSubmenu&&s===jl.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&Un(a,Hb()),l.stop())}),JP={[nl()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Rp=yl,Mg=(t,s,a,l)=>{const u=Dt(q);return{type:"item",dom:s.dom,components:Rp(s.optComponents),data:t.data,eventOrder:JP,hasSubmenu:t.triggersSubmenu,itemBehaviours:Qe([un("item-events",[yU(t,a),Lc(t,u),Kl(t,u)]),Fi.item(()=>!t.enabled||l.checkUiComponentContext(t.context).shouldDisable),Rs(()=>l.checkUiComponentContext(t.context)),fn.config({})].concat(t.itemBehaviours))}},Rg=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),CU=(t,s)=>{var a,l;const u=ht.fromTag("div");Es(u,"tox-image-selector-loading-spinner");const f=p=>{Es(p,"tox-image-selector-loading-spinner-wrapper"),ri(p,u)},m=p=>{Ko(p,"tox-image-selector-loading-spinner-wrapper"),uc(u)};return{dom:{tag:t.tag,attributes:(a=t.attributes)!==null&&a!==void 0?a:{},classes:t.classes},components:[{dom:{tag:"div",classes:["tox-image-selector-image-wrapper"]},components:[{dom:{tag:"img",attributes:{src:s},classes:["tox-image-selector-image-img"]}}]},...t.checkMark.toArray()],behaviours:Qe([...(l=t.behaviours)!==null&&l!==void 0?l:[],un("render-image-events",[Ho(p=>{f(p.element),Ro(p.element,"img").each(v=>{mr(v).catch(C=>{console.error(C)}).finally(()=>{m(p.element)})})})])])}},SU=(t,s)=>CU(s,t),Z3=t=>{const s=Gd.os.isMacOS()||Gd.os.isiOS(),u=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},f=t.split("+"),m=Le(f,p=>{const v=p.toLowerCase().trim();return _t(u,v)?u[v]:p});return s?m.join(""):m.join("+")},W3=(t,s,a=[DR])=>ui(t,{tag:"div",classes:a},s),QP=t=>({dom:{tag:"div",classes:[nC]},components:[Wo(Wl.translate(t))]}),qP=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),xU=(t,s)=>({dom:{tag:"div",classes:[nC]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Wo(Wl.translate(s))]}]}),wU=t=>({dom:{tag:"div",classes:[MV]},components:[Wo(Z3(t))]}),CC=t=>W3("checkmark",t,[RV]),EU=t=>W3("chevron-right",t,[RR]),TU=t=>W3("chevron-down",t,[RR]),AU=(t,s)=>{const a=t.direction==="vertical"?PV:NR,l=t.align==="left"?NV:IR;return{dom:{tag:"div",classes:[PR,a,l,(()=>{switch(t.valign){case"top":return IV;case"middle":return BV;case"bottom":return BR}})()]},components:s}},OU=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),kU=(t,s,a)=>{const l="custom",u="remove",f=t.value,m=t.iconContent.map(C=>TV(C,s.icons,a)),p=t.ariaLabel.map(C=>({"aria-label":s.translate(C),"data-mce-name":C})).getOr({});return{dom:(()=>{const C=n0,E=m.getOr(""),D={tag:"div",attributes:p,classes:[C]};return f===l?{...D,tag:"button",classes:[...D.classes,"tox-swatches__picker-btn"],innerHtml:E}:f===u?{...D,classes:[...D.classes,"tox-swatch--remove"],innerHtml:E}:me(f)?{...D,attributes:{...D.attributes,"data-mce-color":f},styles:{"background-color":f},innerHtml:E}:D})(),optComponents:[]}},j3=(t,s)=>{const a=t.map(l=>({attributes:{id:yt("menu-item"),"aria-label":Wl.translate(l)}})).getOr({});return{tag:"div",classes:[u3,Ep].concat(s),...a}},G3=t=>({dom:{tag:"label"},components:[Wo(t)]}),DU=(t,s,a,l)=>{const u={tag:"div",classes:[DR]},f=I=>ui(I,u,s.icons,l),m=()=>x.some({dom:u}),p=a?t.iconContent.map(f).orThunk(m):x.none(),v=t.checkMark,C=x.from(t.meta).fold(()=>QP,I=>_t(I,"style")?gt(xU,I.style):QP),E=t.htmlContent.fold(()=>t.textContent.map(C),I=>x.some(qP(I,[nC])));return{dom:j3(t.ariaLabel,[]),optComponents:[p,E,t.shortcutContent.map(wU),v,t.caret,t.labelContent.map(G3)]}},eN=t=>({dom:j3(t.ariaLabel,[MR]),optComponents:[x.some(SU(t.iconContent.getOrDie(),{tag:"div",classes:[DV],checkMark:t.checkMark})),t.labelContent.map(G3)]}),Pp=(t,s,a,l=x.none())=>t.presets==="color"?kU(t,s,l):t.presets==="img"?eN(t):DU(t,s,a,l),K3=(t,s,a)=>Be(t,"tooltipWorker").map(l=>[Qo.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:u=>({type:"submenu",item:u,overrides:{maxHeightFunction:Um}}),mode:"follow-highlight",onShow:(u,f)=>{l(m=>{Qo.setComponents(u,[Iy({element:ht.fromDom(m)})])})}})]).getOrThunk(()=>a.map(l=>[Qo.config({...s.providers.tooltips.getConfig({tooltipText:l}),mode:"follow-highlight"})]).getOr([])),tN=t=>Gv.DOM.encode(t),SC=(t,s)=>{const a=Wl.translate(t),l=tN(a);if(s.length>0){const u=new RegExp(Ws(s),"gi");return l.replace(u,f=>`<span class="tox-autocompleter-highlight">${f}</span>`)}else return l},MU=(t,s,a,l,u,f,m,p=!0)=>{const v=Pp({presets:l,textContent:x.none(),htmlContent:a?t.text.map(E=>SC(E,s)):x.none(),ariaLabel:t.text,labelContent:x.none(),iconContent:t.icon,shortcutContent:x.none(),checkMark:x.none(),caret:x.none(),value:t.value},m.providers,p,t.icon),C=t.text.filter(E=>!a&&E!=="");return Mg({context:"mode:design",data:Rg(t),enabled:t.enabled,getApi:te({}),onAction:E=>u(t.value,t.meta),onSetup:te(q),triggersSubmenu:!1,itemBehaviours:K3(t,m,C)},v,f,m.providers)},Y3=(t,s)=>Le(t,a=>{switch(a.type){case"cardcontainer":return AU(a,Y3(a.items,s));case"cardimage":return OU(a.src,a.classes,a.alt);case"cardtext":const u=a.name.exists(f=>Kt(s.cardText.highlightOn,f))?x.from(s.cardText.matchText).getOr(""):"";return qP(SC(a.text,u),a.classes)}}),RU=(t,s,a,l)=>{const u=m=>({isEnabled:()=>!Bt.isDisabled(m),setEnabled:p=>{Bt.set(m,!p),tt(Yo(m.element,"*"),v=>{m.getSystem().getByDom(v).each(C=>{C.hasConfigured(Bt)&&Bt.set(C,!p)})})}}),f={dom:j3(t.label,[]),optComponents:[x.some({dom:{tag:"div",classes:[PR,NR]},components:Y3(t.items,l)})]};return Mg({context:"mode:design",data:Rg({text:x.none(),...t}),enabled:t.enabled,getApi:u,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:x.from(l.itemBehaviours).getOr([])},f,s,a.providers)},X3=(t,s,a,l,u,f,m,p=!0)=>{const v=D=>({setActive:I=>{On.set(D,I)},isActive:()=>On.isOn(D),isEnabled:()=>!Bt.isDisabled(D),setEnabled:I=>Bt.set(D,!I)}),C=Pp({presets:a,textContent:s?t.text:x.none(),htmlContent:x.none(),labelContent:t.label,ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:x.none(),checkMark:s?x.some(CC(m.icons)):x.none(),caret:x.none(),value:t.value},m,p),E=t.text.filter(te(!s)).map(D=>Qo.config(m.tooltips.getConfig({tooltipText:m.translate(D)})));return ho(Mg({context:t.context,data:Rg(t),enabled:t.enabled,getApi:v,onAction:D=>l(t.value),onSetup:D=>(D.setActive(u),q),triggersSubmenu:!1,itemBehaviours:[...E.toArray()]},C,f,m),{toggling:{toggleClass:f3,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},nN=t=>({value:sN(t)}),J3=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,oN=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Q3=t=>J3.test(t)||oN.test(t),sN=t=>Yr(t,"#").toUpperCase(),PU=t=>Q3(t)?x.some({value:sN(t)}):x.none(),ru=t=>({value:t.value.replace(J3,(a,l,u,f)=>l+l+u+u+f+f)}),xC=t=>{const s=ru(t),a=oN.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},Np=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},g0=t=>{const s=Np(t.red)+Np(t.green)+Np(t.blue);return nN(s)},Pg=(t,s,a)=>({hue:t,saturation:s,value:a}),q3=t=>{let s=0,a=0,l=0;const u=t.red/255,f=t.green/255,m=t.blue/255,p=Math.min(u,Math.min(f,m)),v=Math.max(u,Math.max(f,m));if(p===v)return l=p,Pg(0,0,l*100);const C=u===p?f-m:m===p?u-f:m-u;return s=u===p?3:m===p?1:5,s=60*(s-C/(v-p)),a=(v-p)/v,l=v,Pg(Math.round(s),Math.round(a*100),Math.round(l*100))},wC=Math.min,eT=Math.max,Ip=Math.round,NU=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,IU=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,qf=(t,s,a,l)=>({red:t,green:s,blue:a,alpha:l}),tT=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},rN=t=>{let s,a,l;const u=(t.hue||0)%360;let f=t.saturation/100,m=t.value/100;if(f=eT(0,wC(f,1)),m=eT(0,wC(m,1)),f===0)return s=a=l=Ip(255*m),qf(s,a,l,1);const p=u/60,v=m*f,C=v*(1-Math.abs(p%2-1)),E=m-v;switch(Math.floor(p)){case 0:s=v,a=C,l=0;break;case 1:s=C,a=v,l=0;break;case 2:s=0,a=v,l=C;break;case 3:s=0,a=C,l=v;break;case 4:s=C,a=0,l=v;break;case 5:s=v,a=0,l=C;break;default:s=a=l=0}return s=Ip(255*(s+E)),a=Ip(255*(a+E)),l=Ip(255*(l+E)),qf(s,a,l,1)},Ng=t=>{const s=xC(t),a=parseInt(s[1],16),l=parseInt(s[2],16),u=parseInt(s[3],16);return qf(a,l,u,1)},aN=(t,s,a,l)=>{const u=parseInt(t,10),f=parseInt(s,10),m=parseInt(a,10),p=parseFloat(l);return qf(u,f,m,p)},nT=t=>{const s=NU.exec(t);if(s!==null)return x.some(aN(s[1],s[2],s[3],"1"));const a=IU.exec(t);return a!==null?x.some(aN(a[1],a[2],a[3],a[4])):x.none()},oT=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,sT=qf(255,0,0,1),BU=t=>q3(Ng(t)),iN=t=>g0(rN(t)),LU=t=>PU(t).orThunk(()=>nT(t).map(g0)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const l=a.getImageData(0,0,1,1).data,u=l[0],f=l[1],m=l[2],p=l[3];return g0(qf(u,f,m,p))}),FU=t=>{t.dispatch("SkinLoaded")},lN=(t,s)=>{t.dispatch("SkinLoadError",s)},au=t=>{t.dispatch("ResizeEditor")},h0=(t,s)=>{t.dispatch("ResizeContent",s)},_U=(t,s)=>{t.dispatch("ScrollContent",s)},cN=(t,s)=>{t.dispatch("TextColorChange",s)},$U=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},HU=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),VU=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},uN=(t,s)=>{t.dispatch("StylesTextUpdate",s)},dN=(t,s)=>{t.dispatch("AlignTextUpdate",s)},UY=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},ZY=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},Ia=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},fN=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},zU=t=>{t.dispatch("ToggleSidebar")},mN=t=>{t.dispatch("ToggleView")},gN=t=>{t.dispatch("ContextToolbarClose")},UU=t=>{t.dispatch("ContextFormSlideBack")},p0=(t,s)=>()=>{t(),s()},Ba=(t,s=qe)=>Ig(t,"NodeChange",a=>{a.setEnabled(t.selection.isEditable()&&s())}),ZU=(t,s)=>a=>{const l=ns(),u=()=>{a.setActive(t.formatter.match(s));const f=t.formatter.formatChanged(s,a.setActive);l.set(f)};return t.initialized?u():t.once("init",u),()=>{t.off("init",u),l.clear()}},Bp=(t,s)=>a=>{const l=Ba(t)(a),u=ZU(t,s)(a);return()=>{l(),u()}},Ig=(t,s,a)=>l=>{const u=()=>a(l),f=()=>{a(l),t.on(s,u)};return t.initialized?f():t.once("init",f),()=>{t.off("init",f),t.off(s,u)}},rT=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},fi=(t,s)=>()=>t.execCommand(s);var Bg=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const hN={},pN=(t,s=10)=>{const a=Bg.getItem(t),l=B(a)?JSON.parse(a):[],f=(C=>s-C.length<0?C.slice(0,s):C)(l),m=C=>{ut(f,C).each(p),f.unshift(C),f.length>s&&f.pop(),Bg.setItem(t,JSON.stringify(f))},p=C=>{f.splice(C,1)};return{add:m,state:()=>f.slice(0)}},vN=t=>Be(hN,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=Bg.getItem(s);if(fe(a)){const u=Bg.getItem("tinymce-custom-colors");Bg.setItem(s,me(u)?u:"[]")}const l=pN(s,10);return hN[t]=l,l}),WU=t=>Le(vN(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),aT=(t,s)=>{vN(t).add(s)},iT="forecolor",EC="hilitecolor",WY=5,jY=t=>bN(t.map((s,a)=>a%2===0?"#"+LU(s).value:s)),bN=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:t[a],icon:"checkmark",type:"choiceitem"});return s},iu=t=>s=>s.options.get(t),TC="#000000",jU=t=>{const s=t.options.register,a=f=>he(f,B)?{value:jY(f),valid:!0}:{valid:!1,message:"Must be an array of strings."},l=f=>he(f,B)?{value:bN(f),valid:!0}:{valid:!1,message:"Must be an array of strings."},u=f=>_e(f)&&f>0?{value:f,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:l}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:u,default:lT(t)}),s("color_cols_foreground",{processor:u,default:yN(t,iT)}),s("color_cols_background",{processor:u,default:yN(t,EC)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:TC}),s("color_default_background",{processor:"string",default:TC})},AC=(t,s)=>s===iT&&t.options.isSet("color_map_foreground")?iu("color_map_foreground")(t):s===EC&&t.options.isSet("color_map_background")?iu("color_map_background")(t):t.options.isSet("color_map_raw")?iu("color_map_raw")(t):iu("color_map")(t),lT=(t,s="default")=>Math.max(WY,Math.ceil(Math.sqrt(AC(t,s).length))),yN=(t,s)=>{const a=iu("color_cols")(t),l=lT(t,s);return a===lT(t)?l:a},CN=(t,s="default")=>Math.round(s===iT?iu("color_cols_foreground")(t):s===EC?iu("color_cols_background")(t):iu("color_cols")(t)),SN=iu("custom_colors"),GU=iu("color_default_foreground"),KU=iu("color_default_background"),YU="rgba(0, 0, 0, 0)",OC=t=>nT(t).exists(s=>s.alpha!==0),xN=t=>E1(t,s=>{if(si(s)){const a=O(s,"background-color");return Kr(OC(a),a)}else return x.none()}).getOr(YU),cT=(t,s)=>{const a=ht.fromDom(t.selection.getStart()),l=s==="hilitecolor"?xN(a):O(a,"color");return nT(l).map(u=>"#"+g0(u).value)},wN=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},XU=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},JU=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{wN(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{XU(t,s)})},EN=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},kC=(t,s,a,l)=>{a==="custom"?MN(t)(f=>{f.each(m=>{aT(s,m),t.execCommand("mceApplyTextcolor",s,m),l(m)})},cT(t,s).getOr(TC)):a==="remove"?(l(""),t.execCommand("mceRemoveTextcolor",s)):(l(a),t.execCommand("mceApplyTextcolor",s,a))},DC=(t,s,a)=>t.concat(WU(s).concat(EN(a))),TN=(t,s,a)=>l=>{l(DC(t,s,a))},uT=(t,s,a)=>{const l=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(l,a)},AN=(t,s)=>{t.setTooltip(s)},ON=(t,s)=>a=>{const l=cT(t,s);return wa(l,a.toUpperCase())},dT=(t,s,a)=>{if(Ki(a))return s==="forecolor"?"Text color":"Background color";const l=s==="forecolor"?"Text color {0}":"Background color {0}",u=DC(AC(t,s),s,!1),f=Ft(u,m=>m.value===a).getOr({text:""}).text;return t.translate([l,t.translate(f)])},kN=(t,s,a,l)=>{t.ui.registry.addSplitButton(s,{tooltip:dT(t,a,l.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:ON(t,a),columns:CN(t,a),fetch:TN(AC(t,a),a,SN(t)),onAction:u=>{kC(t,a,l.get(),q)},onItemAction:(u,f)=>{kC(t,a,f,m=>{l.set(m),cN(t,{name:s,color:m})})},onSetup:u=>{uT(u,s,l.get());const f=m=>{m.name===s&&(uT(u,m.name,m.color),AN(u,dT(t,a,m.color)))};return t.on("TextColorChange",f),p0(Ba(t)(u),()=>{t.off("TextColorChange",f)})}})},DN=(t,s,a,l,u)=>{t.ui.registry.addNestedMenuItem(s,{text:l,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:f=>(AN(f,dT(t,a,u.get())),uT(f,s,u.get()),Ba(t)(f)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:ON(t,a),initData:{storageKey:a},onAction:f=>{kC(t,a,f.value,m=>{u.set(m),cN(t,{name:s,color:m})})}}]})},MN=t=>(s,a)=>{let l=!1;const u=p=>{const C=p.getData().colorpicker;l?(s(x.from(C)),p.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",C]))},f=(p,v)=>{v.name==="hex-valid"&&(l=v.value)},m={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:m,onAction:f,onSubmit:u,onClose:q,onCancel:()=>{s(x.none())}})},QU=t=>{JU(t);const s=GU(t),a=KU(t),l=Dt(s),u=Dt(a);kN(t,"forecolor","forecolor",l),kN(t,"backcolor","hilitecolor",u),DN(t,"forecolor","forecolor","Text color",l),DN(t,"backcolor","hilitecolor","Background color",u)},qU=(t,s,a,l,u)=>{const f=v=>({setActive:C=>{On.set(v,C)},isActive:()=>On.isOn(v),isEnabled:()=>!Bt.isDisabled(v),setEnabled:C=>Bt.set(v,!C)}),m=Pp({presets:"img",textContent:x.none(),htmlContent:x.none(),ariaLabel:t.tooltip,iconContent:x.some(t.url),labelContent:t.label,shortcutContent:x.none(),checkMark:x.some(CC(u.icons)),caret:x.none(),value:t.value},u,!0),p=t.tooltip.map(v=>Qo.config(u.tooltips.getConfig({tooltipText:u.translate(v)})));return ho(Mg({context:t.context,data:Rg(t),enabled:t.enabled,getApi:f,onAction:v=>{s(t.value),v.setActive(!0)},onSetup:v=>(v.setActive(a),q),triggersSubmenu:!1,itemBehaviours:[...p.toArray()]},m,l,u),{toggling:{toggleClass:f3,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},MC=(t,s,a,l,u,f,m,p)=>{const v=r0(s),E=GY(s,a,l,u!=="color"?"normal":"color",f,m,p);return a0(t,v,E,l,{menuType:u})},GY=(t,s,a,l,u,f,m)=>yl(Le(t,p=>p.type==="choiceitem"?oU(p).fold(Bc,v=>x.some(X3(v,a===1,l,s,f(v.value),u,m,r0(t)))):p.type==="imageitem"?HP(p).fold(Bc,v=>x.some(qU(v,s,f(v.value),u,m))):p.type==="resetimage"?rU(p).fold(Bc,v=>x.some(X3({...v,type:"choiceitem",text:v.tooltip,icon:x.some(v.icon),label:x.some(v.label)},a===1,l,s,f(v.value),u,m,r0(t)))):x.none())),v0=(t,s)=>{const a=Yd(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+{color:"tox-swatches__row",imageselector:"tox-image-selector__row",listpreview:"tox-collection__group",normal:"tox-collection__group"}[s],previousSelector:u=>s==="color"?Ro(u.element,"[aria-checked=true]"):x.none()}},RN=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${n0}`:`.${Ep}`}},PN=(t,s)=>{const a=RC(t,s),l=s.colorinput.getColorCols(t.initData.storageKey),u="color",m={...MC(yt("menu-value"),a,p=>{t.onAction({value:p})},l,u,jl.CLOSE_ON_EXECUTE,t.select.getOr(at),s.shared.providers),markers:Yd(u),movement:v0(l,u),showMenuRole:!1};return{type:"widget",data:{value:yt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Fv.widget(Yu.sketch(m))]}},RC=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>DC(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),l=>l.concat(EN(a)))},NN=(t,s)=>{const a="imageselector",l=t.initData.columns,f={...MC(yt("menu-value"),t.initData.items,m=>{t.onAction({value:m})},l,a,jl.CLOSE_ON_EXECUTE,t.select.getOr(at),s.shared.providers),markers:Yd(a),movement:v0(l,a),showMenuRole:!1};return{type:"widget",data:{value:yt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem","tox-collection--toolbar"]},autofocus:!0,components:[Fv.widget(Yu.sketch(f))]}},IN=yt("cell-over"),BN=yt("cell-execute"),eZ=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),tZ=(t,s,a)=>{const l=m=>Zt(m,IN,{row:t,col:s}),u=m=>Zt(m,BN,{row:t,col:s}),f=(m,p)=>{p.stop(),u(m)};return va({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:Qe([un("insert-table-picker-cell",[Fe(Sc(),on.focus),Fe(nl(),u),Fe(Ef(),f),Fe(Lm(),f)]),On.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),on.config({onFocus:l})])})},nZ=(t,s,a)=>{const l=[];for(let u=0;u<s;u++){const f=[];for(let m=0;m<a;m++){const p=t(u+1,m+1);f.push(tZ(u,m,p))}l.push(f)}return l},oZ=(t,s,a,l,u)=>{for(let f=0;f<l;f++)for(let m=0;m<u;m++)On.set(t[f][m],f<=s&&m<=a)},sZ=t=>ke(t,s=>Le(s,ol)),fT=(t,s)=>Wo(`${s}x${t}`),aZ={inserttable:(t,s)=>{const u=eZ(s),f=nZ(u,10,10),m=fT(0,0),p=ao({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[m],behaviours:Qe([fn.config({})])});return{type:"widget",data:{value:yt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Fv.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:sZ(f).concat(p.asSpec()),behaviours:Qe([un("insert-table-picker",[Ho(v=>{fn.set(p.get(v),[m])}),my(IN,(v,C,E)=>{const{row:D,col:I}=E.event;oZ(f,D,I,10,10),fn.set(p.get(v),[fT(D+1,I+1)])}),my(BN,(v,C,E)=>{const{row:D,col:I}=E.event;Un(v,Hb()),t.onAction({numRows:D+1,numColumns:I+1})})]),Pt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:PN,imageselect:NN},LN=(t,s)=>Be(aZ,t.fancytype).map(a=>a(t,s)),iZ=(t,s,a,l=!0,u=!1)=>{const f=u?TU(a.icons):EU(a.icons),m=v=>({isEnabled:()=>!Bt.isDisabled(v),setEnabled:C=>Bt.set(v,!C),setIconFill:(C,E)=>{Ro(v.element,`svg path[class="${C}"], rect[class="${C}"]`).each(D=>{cn(D,"fill",E)})},setTooltip:C=>{const E=a.translate(C);cn(v.element,"aria-label",E)}}),p=Pp({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:x.none(),ariaLabel:t.text,labelContent:x.none(),caret:x.some(f),checkMark:x.none(),shortcutContent:t.shortcut},a,l);return Mg({context:t.context,data:Rg(t),getApi:m,enabled:t.enabled,onAction:q,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},p,s,a)},lZ=(t,s,a,l=!0)=>{const u=m=>({isEnabled:()=>!Bt.isDisabled(m),setEnabled:p=>Bt.set(m,!p)}),f=Pp({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:x.none(),labelContent:x.none(),ariaLabel:t.text,caret:x.none(),checkMark:x.none(),shortcutContent:t.shortcut},a,l);return Mg({context:t.context,data:Rg(t),getApi:u,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},f,s,a)},cZ=t=>({type:"separator",dom:{tag:"div",classes:[Ep,il]},components:t.text.map(Wo).toArray()}),Lg=(t,s,a,l=!0)=>{const u=m=>({setActive:p=>{On.set(m,p)},isActive:()=>On.isOn(m),isEnabled:()=>!Bt.isDisabled(m),setEnabled:p=>Bt.set(m,!p)}),f=Pp({iconContent:t.icon,textContent:t.text,htmlContent:x.none(),labelContent:x.none(),ariaLabel:t.text,checkMark:x.some(CC(a.icons)),caret:x.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,l);return ho(Mg({context:t.context,data:Rg(t),enabled:t.enabled,getApi:u,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},f,s,a),{toggling:{toggleClass:f3,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},FN=MU,Lp=cZ,PC=lZ,_N=iZ,$N=Lg,HN=LN,KY=RU,uZ=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},dZ=t=>{const s=Ct.getValue(t),a=o0(t).map(_R);al.refetch(s).get(()=>{const l=vs.getCoupled(s,"sandbox");a.each(u=>o0(l).each(f=>LV(f,u)))})},fZ=(t,s)=>{mZ(t).each(a=>{J7(t,a.element,s.event.eventType,s.event.interactionEvent)})},mZ=t=>Xn.getState(t).bind(ro.getHighlighted).bind(ro.getHighlighted),gZ=t=>Qr(t.element,lC)?x.some(t.element):Ro(t.element,"."+lC),Fg=(t,s,a)=>{h3(t).each(l=>{iC(l,a),gZ(s).each(f=>{tr(f,"id").each(m=>cn(l.element,"aria-controls",m))})}),cn(a.element,"aria-selected","true")},b0=(t,s,a)=>{cn(a.element,"aria-selected","false")},mT=t=>{h3(t).each(s=>on.focus(s))},hZ=t=>vs.getExistingCoupled(t,"sandbox").bind(o0).map(_R).map(a=>a.fetchPattern).getOr("");var NC;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(NC||(NC={}));const gT=(t,s,a,l,u)=>{const f=a.shared.providers,m=p=>u?{...p,shortcut:x.none(),icon:p.text.isSome()?x.none():p.icon}:p;switch(t.type){case"menuitem":return iU(t).fold(Bc,p=>x.some(PC(m(p),s,f,l)));case"nestedmenuitem":return zP(t).fold(Bc,p=>x.some(_N(m(p),s,f,l,u)));case"togglemenuitem":return u0(t).fold(Bc,p=>x.some($N(m(p),s,f,l)));case"separator":return EP(t).fold(Bc,p=>x.some(Lp(p)));case"fancymenuitem":return _P(t).fold(Bc,p=>HN(p,a));default:return console.error("Unknown item in general menu",t),x.none()}},pZ=(t,s,a,l,u,f,m)=>{const p=l===1,v=!p||r0(t);return yl(Le(t,C=>{switch(C.type){case"separator":return TP(C).fold(Bc,E=>x.some(Lp(E)));case"cardmenuitem":return nU(C).fold(Bc,E=>x.some(KY({...E,onAction:D=>{E.onAction(D),a(E.value,E.meta)}},u,f,{itemBehaviours:K3(E.meta,f,x.none()),cardText:{matchText:s,highlightOn:m}})));case"autocompleteitem":default:return Vz(C).fold(Bc,E=>x.some(FN(E,s,p,"normal",a,u,f,v)))}}))},Fp=(t,s,a,l,u,f)=>{const m=r0(s),p=yl(Le(s,E=>{const D=H=>u?!_t(H,"text"):m,I=H=>gT(H,a,l,D(H),u);return E.type==="nestedmenuitem"&&E.getSubmenuItems().length<=0?I({...E,enabled:!1}):I(E)})),v=uZ(f);return(u?qu:a0)(t,m,p,1,v)},IC=t=>gg.singleData(t.value,t),vZ=(t,s,a,l)=>{const u=v0(s,l),f=Yd(l);return{data:IC({...t,movement:u,menuBehaviours:Dg.unnamedEvents(s!=="auto"?[]:[Ho((m,p)=>{GP(m,4,f.item).each(({numColumns:v,numRows:C})=>{Pt.setGridSize(m,C,v)})})])}),menu:{markers:Yd(l),fakeFocus:a===NC.ContentFocus}}},bZ=t=>Ch.create(ht.fromDom(t.startContainer),t.startOffset,ht.fromDom(t.endContainer),t.endOffset),yZ={register:(t,s)=>{const a=yt("autocompleter"),l=Dt(!1),u=Dt(!1),f=Gn(),m=va(qo.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Qe([un("dismissAutocompleter",[Fe(Ed(),()=>D()),Fe(zb(),(X,ie)=>{tr(ie.event.target,"id").each(le=>cn(ht.fromDom(t.getBody()),"aria-activedescendant",le))})])]),lazySink:s.getSink})),p=()=>qo.isOpen(m),v=u.get,C=()=>{if(p()){qo.hide(m),t.dom.remove(a,!1);const X=ht.fromDom(t.getBody());tr(X,"aria-owns").filter(ie=>ie===a).each(()=>{us(X,"aria-owns"),us(X,"aria-activedescendant")})}},E=()=>qo.getContent(m).bind(X=>Oo(X.components(),0)),D=()=>t.execCommand("mceAutocompleterClose"),I=X=>{const ie=Tn(X,le=>x.from(le.columns)).getOr(1);return ke(X,le=>{const xe=le.items;return pZ(xe,le.matchText,(Re,vt)=>{const Ke={hide:()=>D(),reload:Pe=>{C(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Pe})}};t.execCommand("mceAutocompleterRefreshActiveRange"),f.get().each(Pe=>{l.set(!0),le.onAction(Ke,Pe,Re,vt),l.set(!1)})},ie,jl.BUBBLE_TO_SANDBOX,s,le.highlightOn)})},H=(X,ie)=>{const le=Tn(X,xe=>x.from(xe.columns)).getOr(1);qo.showMenuAt(m,{anchor:{type:"selection",getSelection:()=>f.get().map(bZ),root:ht.fromDom(t.getBody())}},vZ(a0("autocompleter-value",!0,ie,le,{menuType:"normal"}),le,NC.ContentFocus,"normal")),E().each(ro.highlightFirst)},W=X=>{const ie=I(X);ie.length>0?(H(X,ie),cn(ht.fromDom(t.getBody()),"aria-owns",a),t.inline||Q()):C()},Q=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const X=t.getDoc().documentElement,ie=t.selection.getNode(),le=Tm(m.element);Xi(le,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${ie.offsetTop}px`,left:`${ie.offsetLeft}px`}),t.dom.add(X,le.dom),Ro(le,'[role="menu"]').each(xe=>{ft(xe,"position"),ft(xe,"max-height")})};t.on("AutocompleterStart",({lookupData:X})=>{u.set(!0),l.set(!1),W(X)}),t.on("AutocompleterUpdate",({lookupData:X})=>W(X)),t.on("AutocompleterUpdateActiveRange",({range:X})=>f.set(X)),t.on("AutocompleterEnd",()=>{C(),u.set(!1),l.set(!1),f.clear()});const se={cancelIfNecessary:D,isMenuOpen:p,isActive:v,isProcessingAction:l.get,getMenu:E};kV.setup(se,t)}},CZ=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Le(t.items,s.interpreter)});var SZ=tinymce.util.Tools.resolve("tinymce.html.Entities");const _p=(t,s,a,l)=>{const u=hT(t,s,a,l);return Bn.sketch(u)},VN=(t,s)=>_p(t,s,[],[]),hT=(t,s,a,l)=>({dom:y0(a),components:t.toArray().concat([s]),fieldBehaviours:Qe(l)}),xZ=()=>y0([]),y0=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),lu=(t,s)=>Bn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Wo(s.translate(t))]}),qa=yt("form-component-change"),zN=yt("form-component-input"),C0=yt("form-close"),em=yt("form-cancel"),td=yt("form-action"),_g=yt("form-submit"),pT=yt("form-block"),S0=yt("form-unblock"),UN=yt("form-tabchange"),BC=yt("form-resize"),wZ=(t,s,a)=>{const l=t.label.map(H=>lu(H,s)),u=s.icons(),f=H=>{var W;return(W=u[H])!==null&&W!==void 0?W:H},m=H=>(W,Q)=>{Ru(Q.event.target,"[data-collection-item-value]").each(se=>{H(W,Q,se,er(se,"data-collection-item-value"))})},p=(H,W)=>{const se=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",X=Le(W,xe=>{const Re=Wl.translate(xe.text),vt=t.columns===1?`<div class="tox-collection__item-label">${Re}</div>`:"",Ke=`<div class="tox-collection__item-icon">${f(xe.icon)}</div>`,Pe={_:" "," - ":" ","-":" "},St=Re.replace(/\_| \- |\-/g,Gt=>Pe[Gt]);return`<div data-mce-tooltip="${St}" class="tox-collection__item${se}" tabindex="-1" data-collection-item-value="${SZ.encodeAllRaw(xe.value)}" aria-label="${St}">${Ke}${vt}</div>`}),ie=t.columns!=="auto"&&t.columns>1?go(X,t.columns):[X],le=Le(ie,xe=>`<div class="tox-collection__group">${xe.join("")}</div>`);pf(H.element,le.join(""))},v=m((H,W,Q,se)=>{W.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||Zt(H,td,{name:t.name,value:se})}),C=[Fe(Sc(),m((H,W,Q)=>{Fs(Q,!0)})),Fe(Ef(),v),Fe(Lm(),v),Fe(ga(),m((H,W,Q)=>{Ro(H.element,"."+wg).each(se=>{Ko(se,wg)}),Es(Q,wg)})),Fe(NO(),m(H=>{Ro(H.element,"."+wg).each(W=>{Ko(W,wg),Tl(W)})})),Id(m((H,W,Q,se)=>{Zt(H,td,{name:t.name,value:se})}))],E=(H,W)=>Le(Yo(H.element,".tox-collection__item"),W),D=Bn.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:lt},behaviours:Qe([Bt.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable,onDisabled:H=>{E(H,W=>{Es(W,"tox-collection__item--state-disabled"),cn(W,"aria-disabled",!0)})},onEnabled:H=>{E(H,W=>{Ko(W,"tox-collection__item--state-disabled"),us(W,"aria-disabled")})}}),Rs(()=>s.checkUiComponentContext(t.context)),fn.config({}),Qo.config({...s.tooltips.getConfig({tooltipText:"",onShow:H=>{Ro(H.element,"."+wg+"[data-mce-tooltip]").each(W=>{tr(W,"data-mce-tooltip").each(Q=>{Qo.setComponents(H,s.tooltips.getComponents({tooltipText:Q}))})})}}),mode:"children-keyboard-focus",anchor:H=>({type:"node",node:Ro(H.element,"."+wg).orThunk(()=>LB(".tox-collection__item")),root:H.element,layouts:{onLtr:te([Us,rr,Ms,Hr,zs,pr]),onRtl:te([Us,rr,Ms,Hr,zs,pr])},bubble:pa(0,-2,{})})}),Ct.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(H,W)=>{p(H,W),t.columns==="auto"&&GP(H,5,"tox-collection__item").each(({numRows:Q,numColumns:se})=>{Pt.setGridSize(H,Q,se)}),Un(H,BC)}}),No.config({}),Pt.config(RN(t.columns,"normal")),un("collection-events",C)]),eventOrder:{[nl()]:["disabling","alloy.base.behaviour","collection-events"],[ga()]:["collection-events","tooltipping"]}});return _p(l,D,["tox-form__group--collection"],[])},EZ=(t,s)=>al.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Qe([Fi.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),Rs(()=>s.providers.checkUiComponentContext(t.context)),dg.config({}),No.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>ls.nu(l=>t.fetch(l)).map(l=>x.from(IC(ho(MC(yt("menu-value"),l,u=>{t.onItemAction(a,u)},t.columns,t.presets,jl.CLOSE_ON_EXECUTE,at,s.providers),{movement:v0(t.columns,t.presets)})))),parts:{menu:rC(!1,1,t.presets)}}),ZN=yt("color-input-change"),WN=yt("color-swatch-change"),jN=yt("color-picker-cancel"),XY=(t,s,a,l)=>{const u=Bn.parts.field({factory:Ju,inputClasses:["tox-textfield"],data:l,onSetValue:C=>Dc.run(C).get(q),inputBehaviours:Qe([Bt.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable}),Rs(()=>s.providers.checkUiComponentContext(t.context)),No.config({}),Dc.config({invalidClass:"tox-textbox-field-invalid",getRoot:C=>zn(C.element),notify:{onValid:C=>{const E=Ct.getValue(C);Zt(C,ZN,{color:E})}},validator:{validateOnLoad:!1,validate:C=>{const E=Ct.getValue(C);if(E.length===0)return ls.pure(xn.value(!0));{const D=ht.fromTag("span");hn(D,"background-color",E);const I=Y(D,"background-color").fold(()=>xn.error("blah"),H=>xn.value(E));return ls.pure(I)}}}})]),selectOnFocus:!1}),f=t.label.map(C=>lu(C,s.providers)),m=(C,E)=>{Zt(C,WN,{value:E})},p=(C,E)=>{v.getOpt(C).each(D=>{E==="custom"?a.colorPicker(I=>{I.fold(()=>Un(D,jN),H=>{m(D,H),aT(t.storageKey,H)})},"#ffffff"):E==="remove"?m(D,""):m(D,E)})},v=ao(EZ({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[zs,Ms,Us],onLtr:()=>[Ms,zs,Us]},components:[],fetch:TN(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:p,context:t.context},s));return Bn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:f.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[u,v.asSpec()]}]),fieldBehaviours:Qe([un("form-field-events",[Fe(ZN,(C,E)=>{v.getOpt(C).each(D=>{hn(D.element,"background-color",E.event.color)}),Zt(C,qa,{name:t.name})}),Fe(WN,(C,E)=>{Bn.getField(C).each(D=>{Ct.setValue(D,E.event.value),Zn.getCurrent(C).each(on.focus)})}),Fe(jN,(C,E)=>{Bn.getField(C).each(D=>{Zn.getCurrent(C).each(on.focus)})})])])})},Yl={self:()=>Zn.config({find:x.some}),memento:t=>Zn.config({find:t.getOpt}),childAt:t=>Zn.config({find:s=>ic(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},AZ=rn([ve("preprocess",lt),ve("postprocess",lt)]),OZ=(t,s)=>{const a=ai("RepresentingConfigs.memento processors",AZ,s);return Ct.config({store:{mode:"manual",getValue:l=>{const u=t.get(l),f=Ct.getValue(u);return a.postprocess(f)},setValue:(l,u)=>{const f=a.preprocess(u),m=t.get(l);Ct.setValue(m,f)}}})},$g=(t,s,a)=>Ct.config({store:{mode:"manual",...t.map(l=>({initialValue:l})).getOr({}),getValue:s,setValue:a}}),GN=(t,s,a)=>$g(t,l=>s(l.element),(l,u)=>a(l.element,u)),kZ=t=>GN(t,ph,pf),x0=t=>Ct.config({store:{mode:"memory",initialValue:t}}),vT=yt("rgb-hex-update"),KN=yt("slider-update"),YN=yt("palette-update"),QY=(t,s)=>{const a=Pc.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=Pc.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Pc.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:te(0)},components:[a,l],sliderBehaviours:Qe([on.config({})]),onChange:(u,f,m)=>{cn(u.element,"aria-valuenow",Math.floor(360-m*3.6)),Zt(u,KN,{value:m})}})},DZ=yt("valid-input"),bT=yt("invalid-input"),yT=yt("validating-input"),CT="colorcustom.rgb.",MZ={isEnabled:qe,setEnabled:q,immediatelyShow:q,immediatelyHide:q},cl=(t,s,a,l,u,f)=>{const m=(Q,se)=>{const X=se.get();Q!==X.isEnabled()&&(X.setEnabled(Q),Q?X.immediatelyShow():X.immediatelyHide())},p=(Q,se,X)=>Dc.config({invalidClass:s("invalid"),notify:{onValidate:ie=>{Zt(ie,yT,{type:Q})},onValid:ie=>{m(!1,X),Zt(ie,DZ,{type:Q,value:Ct.getValue(ie)})},onInvalid:ie=>{m(!0,X),Zt(ie,bT,{type:Q,value:Ct.getValue(ie)})}},validator:{validate:ie=>{const le=Ct.getValue(ie),xe=se(le)?xn.value(!0):xn.error(t("aria.input.invalid"));return ls.pure(xe)},validateOnLoad:!1}}),v=(Q,se,X,ie,le)=>{const xe=Dt(MZ),Re=t(CT+"range"),vt=Bn.parts.label({dom:{tag:"label"},components:[Wo(X)]}),Ke=Bn.parts.field({data:le,factory:Ju,inputAttributes:{type:"text","aria-label":ie,...se==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:Qe([p(se,Q,xe),No.config({}),Qo.config({...u({tooltipText:"",onSetup:bn=>{xe.set({isEnabled:()=>Qo.isEnabled(bn),setEnabled:Rt=>Qo.setEnabled(bn,Rt),immediatelyShow:()=>Qo.immediateOpenClose(bn,!0),immediatelyHide:()=>Qo.immediateOpenClose(bn,!1)}),Qo.setEnabled(bn,!1)},onShow:(bn,Rt)=>{Qo.setComponents(bn,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[Wo(t(se==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:bn=>{Dc.isInvalid(bn)&&Dc.run(bn).get(q)}}),Pe=yt("aria-invalid"),St=ao(f("invalid",x.some(Pe),"warning")),Gt=ao({dom:{tag:"div",classes:[s("invalid-icon")]},components:[St.asSpec()]}),Lt=[vt,Ke,Gt.asSpec()],Ln=se!=="hex"?[Bn.parts["aria-descriptor"]({text:Re})]:[],ln=Lt.concat(Ln);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:ln}},C=(Q,se)=>{const X=g0(se);return hg.getField(Q,"hex").each(ie=>{on.isFocused(ie)||Ct.setValue(Q,{hex:X.value})}),X},E=(Q,se)=>{const X=se.red,ie=se.green,le=se.blue;Ct.setValue(Q,{red:X,green:ie,blue:le})},D=ao({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),I=(Q,se)=>{D.getOpt(Q).each(X=>{hn(X.element,"background-color","#"+se.value)})};return rl({factory:()=>{const Q={red:Dt(x.some(255)),green:Dt(x.some(255)),blue:Dt(x.some(255)),hex:Dt(x.some("ffffff"))},se=(Rt,Ze)=>{const it=Ng(Ze);E(Rt,it),xe(it)},X=Rt=>Q[Rt].get(),ie=(Rt,Ze)=>{Q[Rt].set(Ze)},le=()=>X("red").bind(Rt=>X("green").bind(Ze=>X("blue").map(it=>qf(Rt,Ze,it,1)))),xe=Rt=>{const Ze=Rt.red,it=Rt.green,Qt=Rt.blue;ie("red",x.some(Ze)),ie("green",x.some(it)),ie("blue",x.some(Qt))},Re=(Rt,Ze)=>{const it=Ze.event;it.type!=="hex"?ie(it.type,x.none()):l(Rt)},vt=(Rt,Ze)=>{a(Rt);const it=nN(Ze);ie("hex",x.some(it.value));const Qt=Ng(it);E(Rt,Qt),xe(Qt),Zt(Rt,vT,{hex:it}),I(Rt,it)},Ke=(Rt,Ze,it)=>{const Qt=parseInt(it,10);ie(Ze,x.some(Qt)),le().each(yn=>{const Ut=C(Rt,yn);Zt(Rt,vT,{hex:Ut}),I(Rt,Ut)})},Pe=Rt=>Rt.type==="hex",St=(Rt,Ze)=>{const it=Ze.event;Pe(it)?vt(Rt,it.value):Ke(Rt,it.type,it.value)},Gt=Rt=>({label:t(CT+Rt+".label"),description:t(CT+Rt+".description")}),Lt=Gt("red"),Ln=Gt("green"),ln=Gt("blue"),bn=Gt("hex");return ho(hg.sketch(Rt=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Rt.field("red",Bn.sketch(v(tT,"red",Lt.label,Lt.description,255))),Rt.field("green",Bn.sketch(v(tT,"green",Ln.label,Ln.description,255))),Rt.field("blue",Bn.sketch(v(tT,"blue",ln.label,ln.description,255))),Rt.field("hex",Bn.sketch(v(Q3,"hex",bn.label,bn.description,"ffffff"))),D.asSpec()],formBehaviours:Qe([Dc.config({invalidClass:s("form-invalid")}),un("rgb-form-events",[Fe(DZ,St),Fe(bT,Re),Fe(yT,Re)])])})),{apis:{updateHex:(Rt,Ze)=>{Ct.setValue(Rt,{hex:Ze.value}),se(Rt,Ze),I(Rt,Ze)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(Q,se,X)=>{Q.updateHex(se,X)}},extraApis:{}})},RZ=(t,s)=>{const a=Pc.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),l=Pc.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),u=(C,E)=>{const{width:D,height:I}=C,H=C.getContext("2d");if(H===null)return;H.fillStyle=E,H.fillRect(0,0,D,I);const W=H.createLinearGradient(0,0,D,0);W.addColorStop(0,"rgba(255,255,255,1)"),W.addColorStop(1,"rgba(255,255,255,0)"),H.fillStyle=W,H.fillRect(0,0,D,I);const Q=H.createLinearGradient(0,0,0,I);Q.addColorStop(0,"rgba(0,0,0,0)"),Q.addColorStop(1,"rgba(0,0,0,1)"),H.fillStyle=Q,H.fillRect(0,0,D,I)},f=(C,E)=>{const D=C.components()[0].element.dom,I=Pg(E,100,100),H=rN(I);u(D,oT(H))},m=(C,E)=>{const D=q3(Ng(E));Pc.setValue(C,{x:D.saturation,y:100-D.value}),cn(C.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",D.saturation,D.value]))};return rl({factory:C=>{const E=te({x:0,y:0}),D=(W,Q,se)=>{_e(se)||cn(W.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(se.x),Math.floor(100-se.y)])),Zt(W,YN,{value:se})},I=(W,Q,se,X)=>{u(se.element.dom,oT(sT))},H=Qe([Zn.config({find:x.some}),on.config({})]);return Pc.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:E},rounded:!1,components:[a,l],onChange:D,onInit:I,sliderBehaviours:H})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(C,E,D)=>{f(E,D)},setThumb:(C,E,D)=>{m(E,D)}},extraApis:{}})},XN=(t,s,a,l)=>{const u=m=>{const p=cl(t,s,m.onValidHex,m.onInvalidHex,a,l),v=RZ(t,s),C=Pe=>(100-Pe)/100*360,E=Pe=>100-Pe/360*100,D={paletteRgba:Dt(sT),paletteHue:Dt(0)},I=ao(QY(t,s)),H=ao(v.sketch({})),W=ao(p.sketch({})),Q=(Pe,St,Gt)=>{H.getOpt(Pe).each(Lt=>{v.setHue(Lt,Gt)})},se=(Pe,St)=>{W.getOpt(Pe).each(Gt=>{p.updateHex(Gt,St)})},X=(Pe,St,Gt)=>{I.getOpt(Pe).each(Lt=>{Pc.setValue(Lt,E(Gt))})},ie=(Pe,St)=>{H.getOpt(Pe).each(Gt=>{v.setThumb(Gt,St)})},le=(Pe,St)=>{const Gt=Ng(Pe);D.paletteRgba.set(Gt),D.paletteHue.set(St)},xe=(Pe,St,Gt,Lt)=>{le(St,Gt),tt(Lt,Ln=>{Ln(Pe,St,Gt)})},Re=()=>{const Pe=[se];return(St,Gt)=>{const Lt=Gt.event.value,Ln=D.paletteHue.get(),ln=Pg(Ln,Lt.x,100-Lt.y),bn=iN(ln);xe(St,bn,Ln,Pe)}},vt=()=>{const Pe=[Q,se];return(St,Gt)=>{const Lt=C(Gt.event.value),Ln=D.paletteRgba.get(),ln=q3(Ln),bn=Pg(Lt,ln.saturation,ln.value),Rt=iN(bn);xe(St,Rt,Lt,Pe)}},Ke=()=>{const Pe=[Q,X,ie];return(St,Gt)=>{const Lt=Gt.event.hex,Ln=BU(Lt);xe(St,Lt,Ln.hue,Pe)}};return{uid:m.uid,dom:m.dom,components:[H.asSpec(),I.asSpec(),W.asSpec()],behaviours:Qe([un("colour-picker-events",[Fe(vT,Ke()),Fe(YN,Re()),Fe(KN,vt())]),Zn.config({find:Pe=>W.getOpt(Pe)}),Pt.config({mode:"acyclic"})])}};return rl({name:"ColourPicker",configFields:[We("dom"),ve("onValidHex",q),ve("onInvalidHex",q)],factory:u})},JN={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},PZ=t=>s=>B(s)?t.translate(JN[s]):t.translate(s),w0=(t,s,a)=>{const l=C=>"tox-"+C,u=(C,E,D=C,I=C)=>ui(D,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+C],attributes:{title:s.translate(I),"aria-live":"polite",...E.fold(()=>({}),H=>({id:H}))}},s.icons),f=XN(PZ(s),l,s.tooltips.getConfig,u),m=C=>{Zt(C,td,{name:"hex-valid",value:!0})},p=C=>{Zt(C,td,{name:"hex-valid",value:!1})},v=ao(f.sketch({dom:{tag:"div",classes:[l("color-picker-container")],attributes:{role:"presentation"}},onValidHex:m,onInvalidHex:p}));return{dom:{tag:"div"},components:[v.asSpec()],behaviours:Qe([$g(a,C=>{const E=v.get(C);return Zn.getCurrent(E).bind(H=>Ct.getValue(H).hex).map(H=>"#"+Yr(H,"#")).getOr("")},(C,E)=>{const D=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,I=x.from(D.exec(E)).bind(Q=>Oo(Q,1)),H=v.get(C);Zn.getCurrent(H).fold(()=>{console.log("Can not find form")},Q=>{Ct.setValue(Q,{hex:I.getOr("")}),hg.getField(Q,"hex").each(se=>{Un(se,wd())})})}),Yl.self()])}};var NZ=tinymce.util.Tools.resolve("tinymce.Resource");const E0=t=>_t(t,"init"),IZ=t=>{const s=Gn(),a=ao({dom:{tag:t.tag}}),l=Gn(),u=!E0(t)&&t.onFocus.isSome()?[on.config({onFocus:f=>{t.onFocus.each(m=>{m(f.element.dom)})}}),No.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Qe([un("custom-editor-events",[Ho(f=>{a.getOpt(f).each(m=>{(E0(t)?t.init(m.element.dom):NZ.load(t.scriptId,t.scriptUrl).then(p=>p(m.element.dom,t.settings))).then(p=>{l.on(v=>{p.setValue(v)}),l.clear(),s.set(p)})})})]),$g(x.none(),()=>s.get().fold(()=>l.get().getOr(""),f=>f.getValue()),(f,m)=>{s.get().fold(()=>l.set(m),p=>p.setValue(m))}),Yl.self()].concat(u)),components:[a.asSpec()]}};var Fc=tinymce.util.Tools.resolve("tinymce.util.Tools");const ST=yt("browse.files.event"),BZ=(t,s)=>{const a=Fc.explode(s.getOption("images_file_types")),l=u=>fo(a,f=>Uo(u.name.toLowerCase(),`.${f.toLowerCase()}`));return qn(Cs(t),l)},Xl=(t,s,a)=>{const l=(I,H)=>{H.stop()},u=I=>(H,W)=>{tt(I,Q=>{Q(H,W)})},f=(I,H)=>{var W;if(!Bt.isDisabled(I)){const Q=H.event.raw;Zt(I,ST,{files:(W=Q.dataTransfer)===null||W===void 0?void 0:W.files})}},m=(I,H)=>{const W=H.event.raw.target;Zt(I,ST,{files:W.files})},p=(I,H)=>{H&&(Ct.setValue(I,BZ(H,s)),Zt(I,qa,{name:t.name}))},v=ao({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Qe([un("input-file-events",[Nf(Ef()),Nf(Lm())])])}),C=t.label.map(I=>lu(I,s)),E=Bn.parts.field({factory:Ar,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Wo(s.translate("Browse for an image")),v.asSpec()],action:I=>{v.get(I).element.dom.click()},buttonBehaviours:Qe([Yl.self(),x0(a.getOr([])),No.config({}),Fi.button(()=>s.checkUiComponentContext(t.context).shouldDisable),Rs(()=>s.checkUiComponentContext(t.context))])}),D={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Qe([Bt.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable}),Rs(()=>s.checkUiComponentContext(t.context)),On.config({toggleClass:"dragenter",toggleOnExecute:!1}),un("dropzone-events",[Fe("dragenter",u([l,On.toggle])),Fe("dragleave",u([l,On.toggle])),Fe("dragover",l),Fe("drop",u([l,f])),Fe(Im(),m)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Wo(s.translate("Drop an image here"))]},E]}]};return _p(C,D,["tox-form__group--stretched"],[un("handle-files",[Fe(ST,(I,H)=>{Bn.getField(I).each(W=>{p(W,H.event.files)})})])])},LZ=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Le(t.items,s.interpreter)}),$p=yt("alloy-fake-before-tabstop"),LC=yt("alloy-fake-after-tabstop"),xT=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Qe([on.config({ignore:!0}),No.config({})])}),QN=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[xT([$p]),s,xT([LC])],behaviours:Qe([Yl.childAt(1)])}),wT=(t,s)=>{Zt(t,Jc(),{raw:{which:9,shiftKey:s}})},FZ=(t,s)=>{const a=s.element;Qr(a,$p)?wT(t,!0):Qr(a,LC)&&wT(t,!1)},T0=t=>w1(t,["."+$p,"."+LC].join(","),at),FC=yt("update-dialog"),qN=yt("update-title"),e8=yt("update-body"),t8=yt("update-footer"),n8=yt("body-send-message"),A0=yt("dialog-focus-shifted"),_C=ja().browser,Hp=_C.isSafari(),_Z=_C.isFirefox(),ET=Hp||_Z,$Z=_C.isChromium(),HZ=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,TT=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),o8=(t,s)=>{const a=t.body;return x.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!$Z&&!Hp||me(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},AT=(t,s,a)=>{const l=t.dom;x.from(l.contentDocument).fold(a,u=>{let f=0;const m=o8(u,s).map(v=>(f=v.scrollTop,v)).forall(HZ),p=()=>{const v=l.contentWindow;me(v)&&(m?TT(v,"bottom"):!m&&ET&&f!==0&&TT(v,f))};Hp&&l.addEventListener("load",p,{once:!0}),u.open(),u.write(s),u.close(),Hp||p()})},VZ=Kr(ET,Hp?500:200).map(t=>uf(AT,t)),zZ=(t,s)=>{const a=Dt(t.getOr(""));return{getValue:l=>a.get(),setValue:(l,u)=>{if(a.get()!==u){const f=l.element,m=()=>cn(f,"srcdoc",u);s?VZ.fold(te(AT),p=>p.throttle)(f,u,m):m()}a.set(u)}}},s8=(t,s,a)=>{const l="tox-dialog__iframe",u=t.transparent?[]:[`${l}--opaque`],f=t.border?["tox-navobj-bordered"]:[],m={...t.label.map(D=>({title:D})).getOr({}),...a.map(D=>({srcdoc:D})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},p=zZ(a,t.streamContent),v=t.label.map(D=>lu(D,s)),C=D=>QN(x.from(f),{uid:D.uid,dom:{tag:"iframe",attributes:m,classes:[l,...u]},behaviours:Qe([No.config({}),on.config({}),$g(a,p.getValue,p.setValue),Xa.config({channels:{[A0]:{onReceive:(I,H)=>{H.newFocus.each(W=>{zn(I.element).each(Q=>{(vo(I.element,W)?Es:Ko)(Q,"tox-navobj-bordered-focus")})})}}}})])}),E=Bn.parts.field({factory:{sketch:C}});return _p(v,E,["tox-form__group--stretched"],[])},UZ=(t,s,a,l,u)=>{const f=a*u,m=l*u,p=Math.max(0,t/2-f/2),v=Math.max(0,s/2-m/2);return{left:p.toString()+"px",top:v.toString()+"px",width:f.toString()+"px",height:m.toString()+"px"}},ZZ=(t,s,a)=>{const l=or(t),u=Vn(t);return Math.min(l/s,u/a,1)},WZ=(t,s)=>{const a=Dt(s.getOr({url:""})),l=ao({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(v=>({src:v.url})).getOr({})}}),u=ao({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[l.asSpec()]}),f=(v,C)=>{const E={url:C.url};C.zoom.each(I=>E.zoom=I),C.cachedWidth.each(I=>E.cachedWidth=I),C.cachedHeight.each(I=>E.cachedHeight=I),a.set(E);const D=()=>{const{cachedWidth:I,cachedHeight:H,zoom:W}=E;if(!ce(I)&&!ce(H)){if(ce(W)){const se=ZZ(v.element,I,H);E.zoom=se}const Q=UZ(or(v.element),Vn(v.element),I,H,E.zoom);u.getOpt(v).each(se=>{Xi(se.element,Q)})}};l.getOpt(v).each(I=>{const H=I.element;C.url!==er(H,"src")&&(cn(H,"src",C.url),Ko(v.element,"tox-imagepreview__loaded")),D(),mr(H).then(W=>{v.getSystem().isConnected()&&(Es(v.element,"tox-imagepreview__loaded"),E.cachedWidth=W.dom.naturalWidth,E.cachedHeight=W.dom.naturalHeight,D())})})},m={};t.height.each(v=>m.height=v);const p=s.map(v=>({url:v.url,zoom:x.from(v.zoom),cachedWidth:x.from(v.cachedWidth),cachedHeight:x.from(v.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:m,attributes:{role:"presentation"}},components:[u.asSpec()],behaviours:Qe([Yl.self(),$g(p,()=>a.get(),f)])}},jZ=(t,s,a)=>{const l="tox-label",u=t.align==="center"?[`${l}--center`]:[],f=t.align==="end"?[`${l}--end`]:[],m=ao({dom:{tag:"label",classes:[l,...u,...f]},components:[Wo(s.providers.translate(t.label))]}),p=Le(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[m.asSpec(),...p],behaviours:Qe([Yl.self(),fn.config({}),kZ(x.none()),Pt.config({mode:"acyclic"}),un("label",[Ho(v=>{t.for.each(C=>{a(C).each(E=>{m.getOpt(v).each(D=>{var I;const H=(I=er(E.element,"id"))!==null&&I!==void 0?I:yt("form-field");cn(E.element,"id",H),cn(D.element,"for",H)})})})})])])}},OT=yt("toolbar.button.execute"),GZ=t=>Id((s,a)=>{f0(t,s)(l=>{Zt(s,OT,{buttonApi:l}),t.onAction(l)})}),tm=yt("common-button-display-events"),r8={[nl()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Dl()]:["toolbar-button-events",tm],[_u()]:["toolbar-button-events","dropdown-events","tooltipping"],[Ai()]:["focusing","alloy.base.behaviour",tm]},kT=t=>hn(t.element,"width",O(t.element,"width")),a8=(t,s,a)=>ui(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),$C=(t,s)=>a8(t,s,[]),cu=(t,s)=>a8(t,s,[fn.config({})]),HC=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Wo(a.translate(t))],behaviours:Qe([fn.config({})])}),Jl=yt("update-menu-text"),Hg=yt("update-menu-icon"),DT=yt("update-tooltip-text"),MT=(t,s,a,l)=>{const u=Dt(q),f=Dt(t.tooltip),m=t.text.map(se=>ao(HC(se,s,a.providers))),p=t.icon.map(se=>ao(cu(se,a.providers.icons))),v=(se,X)=>{const ie=Ct.getValue(se);return on.focus(ie),Zt(ie,"keydown",{raw:X.event.raw}),al.close(ie),x.some(!0)},C=t.role.fold(()=>({}),se=>({role:se})),E=x.from(t.listRole).map(se=>({listRole:se})).getOr({}),D=t.ariaLabel.fold(()=>({}),se=>({"aria-label":a.providers.translate(se)})),I=ui("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),H=yt("common-button-display-events"),W="dropdown-events";return ao(al.sketch({...t.uid?{uid:t.uid}:{},...C,...E,dom:{tag:"button",classes:[s,`${s}--select`].concat(Le(t.classes,se=>`${s}--${se}`)),attributes:{...D,...me(l)?{"data-mce-name":l}:{}}},components:Rp([p.map(se=>se.asSpec()),m.map(se=>se.asSpec()),x.some(I)]),matchWidth:!0,useMinWidth:!0,onOpen:(se,X,ie)=>{t.searchable&&mT(ie)},dropdownBehaviours:Qe([...t.dropdownBehaviours,Fi.button(()=>t.disabled||a.providers.checkUiComponentContext(t.context).shouldDisable),Rs(()=>a.providers.checkUiComponentContext(t.context)),dg.config({}),fn.config({}),...t.tooltip.map(se=>Qo.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(se),onShow:X=>{if(Gr(f.get(),t.tooltip,(ie,le)=>le!==ie).getOr(!1)){const ie=a.providers.translate(f.get().getOr(""));Qo.setComponents(X,a.providers.tooltips.getComponents({tooltipText:ie}))}}}))).toArray(),un(W,[Lc(t,u),Kl(t,u)]),un(H,[Ho((se,X)=>{t.listRole!=="listbox"&&kT(se)})]),un("update-dropdown-width-variable",[Fe(Qc(),(se,X)=>al.close(se))]),un("menubutton-update-display-text",[Fe(Jl,(se,X)=>{m.bind(ie=>ie.getOpt(se)).each(ie=>{fn.set(ie,[Wo(a.providers.translate(X.event.text))])})}),Fe(Hg,(se,X)=>{p.bind(ie=>ie.getOpt(se)).each(ie=>{fn.set(ie,[cu(X.event.icon,a.providers.icons)])})}),Fe(DT,(se,X)=>{const ie=a.providers.translate(X.event.text);cn(se.element,"aria-label",ie),f.set(x.some(X.event.text))})])]),eventOrder:ho(r8,{[Ai()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Dl()]:["toolbar-button-events",Qo.name(),W,H]}),sandboxBehaviours:Qe([Pt.config({mode:"special",onLeft:v,onRight:v}),un("dropdown-sandbox-events",[Fe(aC,(se,X)=>{dZ(se),X.stop()}),Fe(Eg,(se,X)=>{fZ(se,X),X.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...rC(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:Fg,onCollapseMenu:(se,X,ie)=>{ro.getHighlighted(ie).each(le=>{Fg(se,ie,le)})},onDehighlightItem:b0}}},getAnchorOverrides:()=>({maxHeightFunction:(se,X)=>{Qx()(se,X-10)}}),fetch:se=>ls.nu(gt(t.fetch,se))})).asSpec()},KZ=t=>B(t),i8=t=>t.type==="separator",l8=t=>_t(t,"getSubmenuItems"),YZ={type:"separator"},XZ=(t,s)=>{const a=Fo(t,(l,u)=>KZ(u)?u===""?l:u==="|"?l.length>0&&!i8(l[l.length-1])?l.concat([YZ]):l:_t(s,u.toLowerCase())?l.concat([s[u.toLowerCase()]]):l:l.concat([u]),[]);return a.length>0&&i8(a[a.length-1])&&a.pop(),a},RT=(t,s)=>{const a=t.getSubmenuItems(),l=c8(a,s),u=ho(l.menus,{[t.value]:l.items}),f=ho(l.expansions,{[t.value]:t.value});return{item:t,menus:u,expansions:f}},JZ=t=>{const s=Be(t,"value").getOrThunk(()=>yt("generated-menu-item"));return ho({value:s},t)},c8=(t,s)=>{const a=XZ(B(t)?t.split(" "):t,s);return is(a,(l,u)=>{if(l8(u)){const f=JZ(u),m=RT(f,s);return{menus:ho(l.menus,m.menus),items:[m.item,...l.items],expansions:ho(l.expansions,m.expansions)}}else return{...l,items:[u,...l.items]}},{menus:{},expansions:{},items:[]})},u8=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),QZ=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),Vg=(t,s,a,l)=>{const u=yt("primary-menu"),f=c8(t,a.shared.providers.menuItems());if(f.items.length===0)return x.none();const m=u8(l),p=Fp(u,f.items,s,a,l.isHorizontalMenu,m),v=QZ(l),C=ot(f.menus,(D,I)=>Fp(I,D,s,a,!1,v)),E=ho(C,Nm(u,p));return x.from(gg.tieredData(u,E,f.expansions))},VC=t=>!_t(t,"items"),PT="data-value",d8=(t,s,a,l,u)=>Le(a,f=>VC(f)?{type:"togglemenuitem",...u?{}:{role:"option"},text:f.text,value:f.value,active:f.value===l,onAction:()=>{Ct.setValue(t,f.value),Zt(t,qa,{name:s}),on.focus(t)}}:{type:"nestedmenuitem",text:f.text,getSubmenuItems:()=>d8(t,s,f.items,l,u)}),NT=(t,s)=>Tn(t,a=>VC(a)?Kr(a.value===s,a):NT(a.items,s)),qZ=(t,s,a)=>{const l=fo(t.items,C=>!VC(C)),u=s.shared.providers,f=a.bind(C=>NT(t.items,C)).orThunk(()=>Ns(t.items).filter(VC)),m=t.label.map(C=>lu(C,u)),p=Bn.parts.field({dom:{},factory:{sketch:C=>MT({context:t.context,uid:C.uid,text:f.map(E=>E.text),icon:x.none(),tooltip:x.none(),role:Kr(!l,"combobox"),...l?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(E,D)=>{const I=d8(E,t.name,t.items,Ct.getValue(E),l);D(Vg(I,jl.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:x.none()}))},onSetup:te(q),getApi:te({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[No.config({}),$g(f.map(E=>E.value),E=>er(E.element,PT),(E,D)=>{NT(t.items,D).each(I=>{cn(E.element,PT,I.value),Zt(E,Jl,{text:I.text})})})]},"tox-listbox",s.shared)}}),v={dom:{tag:"div",classes:["tox-listboxfield"]},components:[p]};return Bn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Yt([m.toArray(),[v]]),fieldBehaviours:Qe([Bt.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable,onDisabled:C=>{Bn.getField(C).each(Bt.disable)},onEnabled:C=>{Bn.getField(C).each(Bt.enable)}})])})},f8=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Le(t.items,s.shared.interpreter)}),eW=(t,s,a)=>{const l=Le(t.items,v=>({text:s.translate(v.text),value:v.value})),u=t.label.map(v=>lu(v,s)),f=Bn.parts.field({dom:{},...a.map(v=>({data:v})).getOr({}),selectAttributes:{size:t.size},options:l,factory:pg,selectBehaviours:Qe([Bt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),No.config({}),un("selectbox-change",[Fe(Im(),(v,C)=>{Zt(v,qa,{name:t.name})})])])}),m=t.size>1?x.none():x.some(ui("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),p={dom:{tag:"div",classes:["tox-selectfield"]},components:Yt([[f],m.toArray()])};return Bn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Yt([u.toArray(),[p]]),fieldBehaviours:Qe([Bt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:v=>{Bn.getField(v).each(Bt.disable)},onEnabled:v=>{Bn.getField(v).each(Bt.enable)}}),Rs(()=>s.checkUiComponentContext(t.context))])})},m8=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=u=>u in s?s[u]:1;let l=t.value.toFixed(a(t.unit));return l.indexOf(".")!==-1&&(l=l.replace(/\.?0*$/,"")),l+t.unit},zC=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const l=parseFloat(a[1]),u=a[2];return xn.value({value:l,unit:u})}else return xn.error(t)},UC=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=u=>_t(a,u);return t.unit===s?x.some(t.value):l(t.unit)&&l(s)?a[t.unit]===a[s]?x.some(t.value):x.some(t.value/a[t.unit]*a[s]):x.none()},Vp=t=>x.none(),tW=(t,s)=>a=>UC(a,s).map(l=>({value:l*t,unit:s})),g8=(t,s)=>{const a=zC(t).toOptional(),l=zC(s).toOptional();return Gr(a,l,(u,f)=>UC(u,f.unit).map(m=>f.value/m).map(m=>tW(m,f.unit)).getOr(Vp)).getOr(Vp)},nW=(t,s)=>{let a=Vp;const l=yt("ratio-event"),u=Q=>ui(Q,{tag:"span",classes:["tox-icon","tox-lock-icon__"+Q]},s.icons),f=()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,m=Rs(()=>s.checkUiComponentContext(t.context)),p=t.label.getOr("Constrain proportions"),v=s.translate(p),C=En.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":v,"data-mce-name":p}},components:[u("lock"),u("unlock")],buttonBehaviours:Qe([Bt.config({disabled:f}),m,No.config({}),Qo.config(s.tooltips.getConfig({tooltipText:v}))])}),E=Q=>({dom:{tag:"div",classes:["tox-form__group"]},components:Q}),D=Q=>Bn.parts.field({factory:Ju,inputClasses:["tox-textfield"],inputBehaviours:Qe([Bt.config({disabled:f}),m,No.config({}),un("size-input-events",[Fe(ga(),(se,X)=>{Zt(se,l,{isField1:Q})}),Fe(Im(),(se,X)=>{Zt(se,qa,{name:t.name})})])]),selectOnFocus:!1}),I=Q=>({dom:{tag:"label",classes:["tox-label"]},components:[Wo(s.translate(Q))]}),H=En.parts.field1(E([Bn.parts.label(I("Width")),D(!0)])),W=En.parts.field2(E([Bn.parts.label(I("Height")),D(!1)]));return En.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[H,W,E([I(ko),C])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(Q,se,X)=>{zC(Ct.getValue(Q)).each(ie=>{a(ie).each(le=>{Ct.setValue(se,m8(le))})})},coupledFieldBehaviours:Qe([Bt.config({disabled:f,onDisabled:Q=>{En.getField1(Q).bind(Bn.getField).each(Bt.disable),En.getField2(Q).bind(Bn.getField).each(Bt.disable),En.getLock(Q).each(Bt.disable)},onEnabled:Q=>{En.getField1(Q).bind(Bn.getField).each(Bt.enable),En.getField2(Q).bind(Bn.getField).each(Bt.enable),En.getLock(Q).each(Bt.enable)}}),Rs(()=>s.checkUiComponentContext("mode:design")),un("size-input-events2",[Fe(l,(Q,se)=>{const X=se.event.isField1,ie=X?En.getField1(Q):En.getField2(Q),le=X?En.getField2(Q):En.getField1(Q),xe=ie.map(Ct.getValue).getOr(""),Re=le.map(Ct.getValue).getOr("");a=g8(xe,Re)})])])})},oW=(t,s,a)=>{const l=Pc.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Wo(s.translate(t.label))]}),u=Pc.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),f=Pc.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Pc.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:te(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[l,u,f],sliderBehaviours:Qe([Yl.self(),on.config({})]),onChoose:(m,p,v)=>{Zt(m,qa,{name:t.name,value:v})},onChange:(m,p,v)=>{Zt(m,qa,{name:t.name,value:v})}})},sW=(t,s)=>{const a=p=>({dom:{tag:"th",innerHtml:s.translate(p)}}),l=p=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Le(p,a)}]}),u=p=>({dom:{tag:"td",innerHtml:s.translate(p)}}),f=p=>({dom:{tag:"tr"},components:Le(p,u)}),m=p=>({dom:{tag:"tbody"},components:Le(p,f)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[l(t.header),m(t.cells)],behaviours:Qe([No.config({}),on.config({})])}},h8=(t,s)=>{const a=t.label.map(H=>lu(H,s)),l=[Bt.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable}),Rs(()=>s.checkUiComponentContext(t.context)),Pt.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:H=>(Un(H,_g),x.some(!0))}),un("textfield-change",[Fe(wd(),(H,W)=>{Zt(H,qa,{name:t.name})}),Fe(Sx(),(H,W)=>{Zt(H,qa,{name:t.name})})]),No.config({})],u=t.validation.map(H=>Dc.config({getRoot:W=>zn(W.element),invalidClass:"tox-invalid",validator:{validate:W=>{const Q=Ct.getValue(W),se=H.validator(Q);return ls.pure(se===!0?xn.value(Q):xn.error(se))},validateOnLoad:H.validateOnLoad}})).toArray(),f=t.placeholder.fold(te({}),H=>({placeholder:s.translate(H)})),m=t.inputMode.fold(te({}),H=>({inputmode:H})),p={...f,...m,"data-mce-name":t.name},v=Bn.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(H=>({data:H})).getOr({}),inputAttributes:p,inputClasses:[t.classname],inputBehaviours:Qe(Yt([l,u])),selectOnFocus:!1,factory:Ju}),C=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[v]}:v,D=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),I=[Bt.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:H=>{Bn.getField(H).each(Bt.disable)},onEnabled:H=>{Bn.getField(H).each(Bt.enable)}}),Rs(()=>s.checkUiComponentContext(t.context))];return _p(a,C,D,I)},rW=(t,s,a)=>h8({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:x.none(),maximized:t.maximized,data:a,context:t.context},s),aW=(t,s,a)=>h8({name:t.name,multiline:!0,label:t.label,inputMode:x.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:x.none(),maximized:t.maximized,data:a,context:t.context},s),p8=t=>({isEnabled:()=>!Bt.isDisabled(t),setEnabled:s=>Bt.set(t,!s),setActive:s=>{const a=t.element;s?(Es(a,"tox-tbtn--enabled"),cn(a,"aria-pressed",!0)):(Ko(a,"tox-tbtn--enabled"),us(a,"aria-pressed"))},isActive:()=>Qr(t.element,"tox-tbtn--enabled"),setTooltip:s=>{Zt(t,DT,{text:s})},setText:s=>{Zt(t,Jl,{text:s})},setIcon:s=>Zt(t,Hg,{icon:s})}),zp=(t,s,a,l,u=!0,f)=>{const m=t.buttonType==="bordered"?["bordered"]:[];return MT({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:l,fetch:(p,v)=>{const C={pattern:t.search.isSome()?hZ(p):""};t.fetch(E=>{v(Vg(E,jl.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},C,p8(p))},onSetup:t.onSetup,getApi:p=>p8(p),columns:1,presets:"normal",classes:m,dropdownBehaviours:[...u?[No.config({})]:[]],context:t.context},s,a.shared,f)},ZC=(t,s,a)=>{const l=f=>m=>{const p=!m.isActive();m.setActive(p),f.storage.set(p),a.shared.getSink().each(v=>{s().getOpt(v).each(C=>{Fs(C.element),Zt(C,td,{name:f.name,value:f.storage.get()})})})},u=f=>m=>{m.setActive(f.storage.get())};return f=>{f(Le(t,m=>{const p=m.text.fold(()=>({}),v=>({text:v}));return{type:m.type,active:!1,...p,context:m.context,onAction:l(m),onSetup:u(m)}}))}},WC=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[Wo(t)]}),IT=(t,s,a)=>{t.customStateIcon.each(l=>s.push(v8(l,a.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],u=>[Qo.config(a.shared.providers.tooltips.getConfig({tooltipText:u}))]),["tox-icon-custom-state"])))},qd=yt("leaf-label-event-id"),jC=({leaf:t,onLeafAction:s,visible:a,treeId:l,selectedId:u,backstage:f})=>{const m=t.menu.map(v=>zp(v,"tox-mbtn",f,x.none(),a)),p=[WC(t.title)];return IT(t,p,f),m.each(v=>p.push(v)),Ar.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:p,role:"treeitem",action:v=>{s(t.id),v.getSystem().broadcastOn([`update-active-item-${l}`],{value:t.id})},eventOrder:{[Jc()]:[qd,"keying"]},buttonBehaviours:Qe([...a?[No.config({})]:[],On.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Xa.config({channels:{[`update-active-item-${l}`]:{onReceive:(v,C)=>{(C.value===t.id?On.on:On.off)(v)}}}}),un(qd,[Ho((v,C)=>{u.each(E=>{(E===t.id?On.on:On.off)(v)})}),Fe(Jc(),(v,C)=>{const E=C.event.raw.code==="ArrowLeft",D=C.event.raw.code==="ArrowRight";E?(fc(v.element,".tox-tree--directory").each(I=>{v.getSystem().getByDom(I).each(H=>{Mu(I,".tox-tree--directory__label").each(W=>{H.getSystem().getByDom(W).each(on.focus)})})}),C.stop()):D&&C.stop()})])])})},v8=(t,s,a,l,u)=>ui(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(l||[]),behaviours:a,attributes:u},s),iW=(t,s)=>v8(t,s,[]),b8=yt("directory-label-event-id"),lW=({directory:t,visible:s,noChildren:a,backstage:l})=>{const u=t.menu.map(p=>zp(p,"tox-mbtn",l,x.none())),f=[{dom:{tag:"div",classes:["tox-chevron"]},components:[iW("chevron-right",l.shared.providers.icons)]},WC(t.title)];IT(t,f,l),u.each(p=>{f.push(p)});const m=p=>{fc(p.element,".tox-tree--directory").each(v=>{p.getSystem().getByDom(v).each(C=>{const E=!On.isOn(C);On.toggle(C),Zt(p,"expand-tree-node",{expanded:E,node:t.id})})})};return Ar.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:f,action:m,eventOrder:{[Jc()]:[b8,"keying"]},buttonBehaviours:Qe([...s?[No.config({})]:[],un(b8,[Fe(Jc(),(p,v)=>{const C=v.event.raw.code==="ArrowRight",E=v.event.raw.code==="ArrowLeft";C&&a&&v.stop(),(C||E)&&fc(p.element,".tox-tree--directory").each(D=>{p.getSystem().getByDom(D).each(I=>{!On.isOn(I)&&C||On.isOn(I)&&E?(m(p),v.stop()):E&&!On.isOn(I)&&(fc(I.element,".tox-tree--directory").each(H=>{Mu(H,".tox-tree--directory__label").each(W=>{I.getSystem().getByDom(W).each(on.focus)})}),v.stop())})})})])])})},cW=({children:t,onLeafAction:s,visible:a,treeId:l,expandedIds:u,selectedId:f,backstage:m})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(p=>p.type==="leaf"?jC({leaf:p,selectedId:f,onLeafAction:s,visible:a,treeId:l,backstage:m}):BT({directory:p,expandedIds:u,selectedId:f,onLeafAction:s,labelTabstopping:a,treeId:l,backstage:m})),behaviours:Qe([Na.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),fn.config({})])}),uW=yt("directory-event-id"),BT=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:l,backstage:u,expandedIds:f,selectedId:m})=>{const{children:p}=t,v=Dt(f),C=D=>p.map(I=>I.type==="leaf"?jC({leaf:I,selectedId:m,onLeafAction:s,visible:D,treeId:l,backstage:u}):BT({directory:I,expandedIds:v.get(),selectedId:m,onLeafAction:s,labelTabstopping:D,treeId:l,backstage:u})),E=f.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[lW({directory:t,visible:a,noChildren:t.children.length===0,backstage:u}),cW({children:p,expandedIds:f,selectedId:m,onLeafAction:s,visible:E,treeId:l,backstage:u})],behaviours:Qe([un(uW,[Ho((D,I)=>{On.set(D,E)}),Fe("expand-tree-node",(D,I)=>{const{expanded:H,node:W}=I.event;v.set(H?[...v.get(),W]:v.get().filter(Q=>Q!==W))})]),On.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(D,I)=>{const H=D.components()[1],W=C(I);I?Na.grow(H):Na.shrink(H),fn.set(H,W)}})])}},y8=yt("tree-event-id"),dW=(t,s)=>{const a=t.onLeafAction.getOr(q),l=t.onToggleExpand.getOr(q),u=t.defaultExpandedIds,f=Dt(u),m=Dt(t.defaultSelectedId),p=yt("tree-id"),v=(C,E)=>t.items.map(D=>D.type==="leaf"?jC({leaf:D,selectedId:C,onLeafAction:a,visible:!0,treeId:p,backstage:s}):BT({directory:D,selectedId:C,onLeafAction:a,expandedIds:E,labelTabstopping:!0,treeId:p,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:v(m.get(),f.get()),behaviours:Qe([Pt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),un(y8,[Fe("expand-tree-node",(C,E)=>{const{expanded:D,node:I}=E.event;f.set(D?[...f.get(),I]:f.get().filter(H=>H!==I)),l(f.get(),{expanded:D,node:I})})]),Xa.config({channels:{[`update-active-item-${p}`]:{onReceive:(C,E)=>{m.set(x.some(E.value)),fn.set(C,v(x.some(E.value),f.get()))}}}}),fn.config({})])}},GC=(t,s,a=[],l,u,f,m)=>{const p=s.fold(()=>({}),E=>({action:E})),v={buttonBehaviours:Qe([Fi.item(()=>!t.enabled||m.checkUiComponentContext(t.context).shouldDisable),Rs(()=>m.checkUiComponentContext(t.context)),No.config({}),...f.map(E=>Qo.config(m.tooltips.getConfig({tooltipText:m.translate(E)}))).toArray(),un("button press",[q7("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...p},C=ho(v,{dom:l});return ho(C,{components:u})},LT=(t,s,a,l=[],u)=>{const f=t.tooltip.map(C=>({"aria-label":a.translate(C)})).getOr({}),m={tag:"button",classes:["tox-tbtn"],attributes:{...f,"data-mce-name":u}},p=t.icon.map(C=>$C(C,a.icons)),v=Rp([p]);return GC(t,s,l,m,v,t.tooltip,a)},FT=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},C8=(t,s,a,l=[],u=[])=>{const f=a.translate(t.text),m=t.icon.map(H=>$C(H,a.icons)),p=[m.getOrThunk(()=>Wo(f))],v=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),D={tag:"button",classes:[...FT(v),...m.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...u],attributes:{"aria-label":f,"data-mce-name":t.text}},I=t.icon.map(te(f));return GC(t,s,l,D,p,I,a)},S8=(t,s,a,l=[],u=[])=>{const f=C8(t,x.some(s),a,l,u);return Ar.sketch(f)},x8=(t,s)=>a=>{s==="custom"?Zt(a,td,{name:t,value:{}}):s==="submit"?Un(a,_g):s==="cancel"?Un(a,em):console.error("Unknown button type: ",s)},fW=(t,s)=>s==="menu",mW=(t,s)=>s==="custom"||s==="cancel"||s==="submit",w8=(t,s)=>s==="togglebutton",E8=(t,s,a)=>{var l,u;const f=t.icon.map(le=>cu(le,s.icons)).map(ao),m=le=>{Zt(le,td,{name:t.name,value:{setIcon:xe=>{f.map(Re=>Re.getOpt(le).each(vt=>{fn.set(vt,[cu(xe,s.icons)])}))}}})},p=t.buttonType.getOr(t.primary?"primary":"secondary"),v={...t,name:(l=t.name)!==null&&l!==void 0?l:"",primary:p==="primary",tooltip:t.tooltip,enabled:(u=t.enabled)!==null&&u!==void 0?u:!1,borderless:!1},C=v.tooltip.or(t.text).map(le=>({"aria-label":s.translate(le)})).getOr({}),E=FT(p??"secondary"),D=t.icon.isSome()&&t.text.isSome(),I={tag:"button",classes:[...E.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...D?["tox-button--icon-and-text"]:[]],attributes:{...C,...me(a)?{"data-mce-name":a}:{}}},H=[],W=s.translate(t.text.getOr("")),Q=Wo(W),X=[...Rp([f.map(le=>le.asSpec())]),...t.text.isSome()?[Q]:[]],ie=GC(v,x.some(m),H,I,X,t.tooltip,s);return Ar.sketch(ie)},O0=(t,s,a)=>{if(fW(t,s)){const l=()=>m,u=t,f={...t,buttonType:"default",type:"menubutton",search:x.none(),onSetup:p=>(p.setEnabled(t.enabled),q),fetch:ZC(u.items,l,a)},m=ao(zp(f,"tox-tbtn",a,x.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return m.asSpec()}else if(mW(t,s)){const l=x8(t.name,s),u={...t,context:s==="cancel"?"any":t.context,borderless:!1};return S8(u,l,a.shared.providers,[])}else{if(w8(t,s))return E8(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},gW=(t,s)=>{const a=x8(t.name,"custom");return VN(x.none(),Bn.parts.field({factory:Ar,...C8(t,x.some(a),s,[x0(""),Yl.self()])}))},T8={type:"separator"},hW=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:q}),_T=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:q}),pW=t=>Le(t,hW),A8=(t,s)=>qn(s,a=>a.type===t),O8=(t,s)=>pW(A8(t,s)),k8=t=>O8("header",t.targets),vW=t=>O8("anchor",t.targets),bW=t=>x.from(t.anchorTop).map(s=>_T("<top>",s)).toArray(),yW=t=>x.from(t.anchorBottom).map(s=>_T("<bottom>",s)).toArray(),CW=t=>Le(t,s=>_T(s,s)),SW=t=>Fo(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(T8,a),[]),$T=(t,s)=>{const a=t.toLowerCase();return qn(s,l=>{var u;const f=l.meta!==void 0&&l.meta.text!==void 0?l.meta.text:l.text,m=(u=l.value)!==null&&u!==void 0?u:"";return zo(f.toLowerCase(),a)||zo(m.toLowerCase(),a)})},xW=(t,s,a)=>{var l,u;const f=Ct.getValue(s),m=(u=(l=f==null?void 0:f.meta)===null||l===void 0?void 0:l.text)!==null&&u!==void 0?u:f.value;return a.getLinkInformation().fold(()=>[],v=>{const C=$T(m,CW(a.getHistory(t)));return t==="file"?SW([C,$T(m,k8(v)),$T(m,Yt([bW(v),vW(v),yW(v)]))]):C})},HT=yt("aria-invalid"),wW=(t,s,a,l)=>{const u=s.shared.providers,f=ie=>{const le=Ct.getValue(ie);a.addToHistory(le.value,t.filetype)},m={...l.map(ie=>({initialData:ie})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":HT,type:"url"},minChars:0,responseTime:0,fetch:ie=>{const le=xW(t.filetype,ie,a),xe=Vg(le,jl.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:x.none()});return ls.pure(xe)},getHotspot:ie=>W.getOpt(ie),onSetValue:(ie,le)=>{ie.hasConfigured(Dc)&&Dc.run(ie).get(q)},typeaheadBehaviours:Qe([...a.getValidationHandler().map(ie=>Dc.config({getRoot:le=>zn(le.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(le,xe)=>{E.getOpt(le).each(Re=>{cn(Re.element,"title",u.translate(xe))})}},validator:{validate:le=>{const xe=Ct.getValue(le);return fd.nu(Re=>{ie({type:t.filetype,url:xe.value},vt=>{if(vt.status==="invalid"){const Ke=xn.error(vt.message);Re(Ke)}else{const Ke=xn.value(vt.message);Re(Ke)}})})},validateOnLoad:!1}})).toArray(),Bt.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable}),No.config({}),un("urlinput-events",[Fe(wd(),ie=>{const le=mc(ie.element),xe=le.trim();xe!==le&&Om(ie.element,xe),t.filetype==="file"&&Zt(ie,qa,{name:t.name})}),Fe(Im(),ie=>{Zt(ie,qa,{name:t.name}),f(ie)}),Fe(Sx(),ie=>{Zt(ie,qa,{name:t.name}),f(ie)})])]),eventOrder:{[wd()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ie=>ie.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:rC(!1,1,"normal")},onExecute:(ie,le,xe)=>{Zt(le,_g,{})},onItemExecute:(ie,le,xe,Re)=>{f(ie),Zt(ie,qa,{name:t.name})}},p=Bn.parts.field({...m,factory:sV}),v=t.label.map(ie=>lu(ie,u)),E=ao(((ie,le,xe=ie,Re=ie)=>ui(xe,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ie],attributes:{title:u.translate(Re),"aria-live":"polite",...le.fold(()=>({}),vt=>({id:vt}))}},u.icons))("invalid",x.some(HT),"warning")),D=ao({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[E.asSpec()]}),I=a.getUrlPicker(t.filetype),H=yt("browser.url.event"),W=ao({dom:{tag:"div",classes:["tox-control-wrap"]},components:[p,D.asSpec()],behaviours:Qe([Bt.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable})])}),Q=ao(S8({context:t.context,name:t.name,icon:x.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:x.none(),borderless:!0},ie=>Un(ie,H),u,[],["tox-browse-url"])),se=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Yt([[W.asSpec()],I.map(()=>Q.asSpec()).toArray()])}),X=ie=>{Zn.getCurrent(ie).each(le=>{const xe=Ct.getValue(le),Re={fieldname:t.name,...xe};I.each(vt=>{vt(Re).get(Ke=>{Ct.setValue(le,Ke),Zt(ie,qa,{name:t.name})})})})};return Bn.sketch({dom:xZ(),components:v.toArray().concat([se()]),fieldBehaviours:Qe([Bt.config({disabled:()=>!t.enabled||u.checkUiComponentContext(t.context).shouldDisable,onDisabled:ie=>{Bn.getField(ie).each(Bt.disable),Q.getOpt(ie).each(Bt.disable)},onEnabled:ie=>{Bn.getField(ie).each(Bt.enable),Q.getOpt(ie).each(Bt.enable)}}),Rs(()=>u.checkUiComponentContext(t.context)),un("url-input-events",[Fe(H,X)])])})},EW=(t,s)=>{const a=a3(t.icon,s.icons);return $l.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[Ar.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:l=>Zt(l,td,{name:"alert-banner",value:t.url}),buttonBehaviours:Qe([OR()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},TW=(t,s,a)=>{const l=v=>(v.element.dom.click(),x.some(!0)),u=Bn.parts.field({factory:{sketch:lt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Qe([Yl.self(),Bt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:v=>{zn(v.element).each(C=>Es(C,"tox-checkbox--disabled"))},onEnabled:v=>{zn(v.element).each(C=>Ko(C,"tox-checkbox--disabled"))}}),No.config({}),on.config({}),GN(a,x1,tx),Pt.config({mode:"special",onEnter:l,onSpace:l,stopSpaceKeyup:!0}),un("checkbox-events",[Fe(Im(),(v,C)=>{Zt(v,qa,{name:t.name})})])])}),f=Bn.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Wo(s.translate(t.label))],behaviours:Qe([dg.config({})])}),m=v=>ui(v==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+v]},s.icons),p=ao({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[m("checked"),m("unchecked")]});return Bn.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[u,p.asSpec(),f],fieldBehaviours:Qe([Bt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),Rs(()=>s.checkUiComponentContext(t.context))])})},AW=(t,s)=>{const a=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],l=un("htmlpanel",[Ho(u=>{t.onInit(u.element.dom)})]);return t.presets==="presentation"?$l.sketch({dom:{tag:"div",classes:a,innerHtml:t.html},containerBehaviours:Qe([Qo.config({...s.tooltips.getConfig({tooltipText:"",onShow:u=>{Ro(u.element,"[data-mce-tooltip]:hover").orThunk(()=>Xr(u.element)).each(f=>{tr(f,"data-mce-tooltip").each(m=>{Qo.setComponents(u,s.tooltips.getComponents({tooltipText:m}))})})}}),mode:"children-normal",anchor:u=>({type:"node",node:Ro(u.element,"[data-mce-tooltip]:hover").orThunk(()=>Xr(u.element).filter(f=>tr(f,"data-mce-tooltip").isSome())),root:u.element,layouts:{onLtr:te([Us,rr,Ms,Hr,zs,pr]),onRtl:te([Us,rr,Ms,Hr,zs,pr])},bubble:pa(0,-2,{})})}),l])}):$l.sketch({dom:{tag:"div",classes:a,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Qe([No.config({}),on.config({}),l])})},lr=t=>(s,a,l,u,f)=>Be(a,"name").fold(()=>t(a,u,x.none(),f),m=>s.field(m,t(a,u,Be(l,m),f))),OW=t=>(s,a,l,u,f)=>{const m=ho(a,{source:"dynamic"});return lr(t)(s,m,l,u,f)},kW={bar:lr((t,s)=>CZ(t,s.shared)),collection:lr((t,s,a)=>wZ(t,s.shared.providers,a)),alertbanner:lr((t,s)=>EW(t,s.shared.providers)),input:lr((t,s,a)=>rW(t,s.shared.providers,a)),textarea:lr((t,s,a)=>aW(t,s.shared.providers,a)),label:lr((t,s,a,l)=>jZ(t,s.shared,l)),iframe:OW((t,s,a)=>s8(t,s.shared.providers,a)),button:lr((t,s)=>gW(t,s.shared.providers)),checkbox:lr((t,s,a)=>TW(t,s.shared.providers,a)),colorinput:lr((t,s,a)=>XY(t,s.shared,s.colorinput,a)),colorpicker:lr((t,s,a)=>w0(t,s.shared.providers,a)),dropzone:lr((t,s,a)=>Xl(t,s.shared.providers,a)),grid:lr((t,s)=>LZ(t,s.shared)),listbox:lr((t,s,a)=>qZ(t,s,a)),selectbox:lr((t,s,a)=>eW(t,s.shared.providers,a)),sizeinput:lr((t,s)=>nW(t,s.shared.providers)),slider:lr((t,s,a)=>oW(t,s.shared.providers,a)),urlinput:lr((t,s,a)=>wW(t,s,s.urlinput,a)),customeditor:lr(IZ),htmlpanel:lr((t,s)=>AW(t,s.shared.providers)),imagepreview:lr((t,s,a)=>WZ(t,a)),table:lr((t,s)=>sW(t,s.shared.providers)),tree:lr((t,s)=>dW(t,s)),panel:lr((t,s)=>f8(t,s))},D8={field:(t,s)=>s,record:te([])},M8=(t,s,a,l,u)=>{const f=ho(l,{shared:{interpreter:m=>VT(t,m,a,f,u)}});return VT(t,s,a,f,u)},VT=(t,s,a,l,u)=>Be(kW,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),f=>f(t,s,a,l,u)),zT=(t,s,a,l)=>VT(D8,t,s,a,l),k0={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},R8=(t,s,a)=>{const u={maxHeightFunction:Um()},f=()=>({type:"node",root:vd(fr(t())),node:x.from(t()),bubble:pa(12,12,k0),layouts:{onRtl:()=>[W1],onLtr:()=>[Fh]},overrides:u}),m=()=>({type:"hotspot",hotspot:s(),bubble:pa(-12,12,k0),layouts:{onRtl:()=>[Ms,zs,Us],onLtr:()=>[zs,Ms,Us]},overrides:u});return()=>a()?f():m()},P8=(t,s,a,l)=>{const f={maxHeightFunction:Um()},m=()=>({type:"node",root:vd(fr(s())),node:x.from(s()),bubble:pa(12,12,k0),layouts:{onRtl:()=>[Rl],onLtr:()=>[Rl]},overrides:f}),p=()=>t?{type:"node",root:vd(fr(s())),node:x.from(s()),bubble:pa(0,-os(s()),k0),layouts:{onRtl:()=>[rr],onLtr:()=>[rr]},overrides:f}:{type:"hotspot",hotspot:a(),bubble:pa(0,0,k0),layouts:{onRtl:()=>[rr],onLtr:()=>[rr]},overrides:f};return()=>l()?m():p()},DW=(t,s,a)=>{const l=()=>({type:"node",root:vd(fr(t())),node:x.from(t()),layouts:{onRtl:()=>[Rl],onLtr:()=>[Rl]}}),u=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Us],onLtr:()=>[Us]}});return()=>a()?l():u()},MW=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),l=t.model.table.getSelectedCells();if(l.length>1){const u=l[0],f=l[l.length-1],m={firstCell:ht.fromDom(u),lastCell:ht.fromDom(f)};return x.some(m)}return x.some(T1.range(ht.fromDom(a.startContainer),a.startOffset,ht.fromDom(a.endContainer),a.endOffset))}}),RW=t=>s=>({type:"node",root:t(),node:s}),Up=(t,s,a,l)=>{const u=yp(t),f=()=>ht.fromDom(t.getBody()),m=()=>ht.fromDom(t.getContentAreaContainer()),p=()=>u||!l();return{inlineDialog:R8(m,s,p),inlineBottomDialog:P8(t.inline,m,a,p),banner:DW(m,s,p),cursor:MW(t,f),node:RW(f)}},PW=t=>(s,a)=>{MN(t)(s,a)},NW=t=>()=>SN(t),IW=t=>s=>AC(t,s),BW=t=>s=>CN(t,s),LW=t=>({colorPicker:PW(t),hasCustomColors:NW(t),getColors:IW(t),getColorCols:BW(t)}),FW=t=>()=>Q6(t),_W=t=>({isDraggableModal:FW(t)}),$W=t=>{const s=Dt(Z4(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},KC=t=>Lo(t,"items"),N8=t=>Lo(t,"format"),I8=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],B8=t=>_t(t,"items"),L8=t=>_t(t,"block"),HW=t=>_t(t,"inline"),VW=t=>_t(t,"selector"),F8=t=>Fo(t,(s,a)=>{if(B8(a)){const l=F8(a.items);return{customFormats:s.customFormats.concat(l.customFormats),formats:s.formats.concat([{title:a.title,items:l.formats}])}}else if(HW(a)||L8(a)||VW(a)){const u=`custom-${B(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:u,format:a}]),formats:s.formats.concat([{title:a.title,format:u,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),zW=(t,s)=>{const a=F8(s),l=u=>{tt(u,f=>{t.formatter.has(f.name)||t.formatter.register(f.name,f.format)})};return t.formatter?l(a.customFormats):t.on("init",()=>{l(a.customFormats)}),a.formats},_8=t=>V6(t).map(s=>{const a=zW(t,s);return z6(t)?I8.concat(a):a}).getOr(I8),UW=t=>{const s=Me(t);return s.length===1&&Kt(s,"title")},UT=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),$8=(t,s,a,l)=>{const u=v=>UT(v,a,l),f=v=>{const C=p(v.items);return{...v,type:"submenu",getStyleItems:te(C)}},m=v=>{const C=B(v.name)?v.name:yt(v.title),E=`custom-${C}`,D={...v,type:"formatter",format:E,isSelected:a(E),getStylePreview:l(E)};return t.formatter.register(C,D),D},p=v=>Le(v,C=>KC(C)?f(C):N8(C)?u(C):UW(C)?{...C,type:"separator"}:m(C));return p(s)},ZW=t=>{const s=p=>()=>t.formatter.match(p),a=p=>()=>{const v=t.formatter.get(p);return v!==void 0?x.some({tag:v.length>0&&(v[0].inline||v[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):x.none()},l=Dt([]),u=Dt([]),f=Dt(!1);return t.on("PreInit",p=>{const v=_8(t),C=$8(t,v,s,a);l.set(C)}),t.on("addStyleModifications",p=>{const v=$8(t,p.items,s,a);u.set(v),f.set(p.replace)}),{getData:()=>{const p=f.get()?[]:l.get(),v=u.get();return p.concat(v)}}},WW=t=>{let l=0;const u=()=>l>0,f=p=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[Wo(p.tooltipText)]}];return{getConfig:p=>({delayForShow:()=>u()?60:300,delayForHide:te(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:f(p),onShow:(v,C)=>{l++,p.onShow&&p.onShow(v,C)},onHide:(v,C)=>{l--,p.onHide&&p.onHide(v,C)},onSetup:p.onSetup}),getComponents:f}},jW=t=>me(t)&&t.nodeType===1,H8=Fc.trim,V8=t=>s=>!!(jW(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),YC=V8("true"),XC=V8("false"),ZT=(t,s,a,l,u)=>({type:t,title:s,url:a,level:l,attach:u}),GW=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return YC(s)}return!1},KW=(t,s)=>Le(Yo(ht.fromDom(s),t),a=>a.dom),z8=t=>t.innerText||t.textContent,YW=t=>t.id?t.id:yt("h"),XW=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,JC=t=>XW(t)&&jT(t),WT=t=>t&&/^(H[1-6])$/.test(t.nodeName),jT=t=>GW(t)&&!XC(t),U8=t=>WT(t)&&jT(t),Z8=t=>WT(t)?parseInt(t.nodeName.substr(1),10):0,JW=t=>{var s;const a=YW(t),l=()=>{t.id=a};return ZT("header",(s=z8(t))!==null&&s!==void 0?s:"","#"+a,Z8(t),l)},W8=t=>{const s=t.id||t.name,a=z8(t);return ZT("anchor",a||"#"+s,"#"+s,0,q)},QW=t=>Le(qn(t,U8),JW),qW=t=>Le(qn(t,JC),W8),ej=t=>KW("h1,h2,h3,h4,h5,h6,a:not([href])",t),tj=t=>H8(t.title).length>0,D0={find:t=>{const s=ej(t);return qn(QW(s).concat(qW(s)),tj)}},QC="tinymce-url-history",j8=5,G8=t=>B(t)&&/^https?/.test(t),K8=t=>K(t)&&t.length<=j8&&Wr(t,G8),Y8=t=>k(t)&&Xt(t,s=>!K8(s)).isNone(),GT=()=>{const t=Bg.getItem(QC);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+QC+" was not valid JSON",a),{};throw a}return Y8(s)?s:(console.log("Local storage "+QC+" was not valid format",s),{})},nj=t=>{if(!Y8(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Bg.setItem(QC,JSON.stringify(t))},oj=t=>{const s=GT();return Be(s,t).getOr([])},sj=(t,s)=>{if(!G8(t))return;const a=GT(),l=Be(a,s).getOr([]),u=qn(l,f=>f!==t);a[s]=[t].concat(u).slice(0,j8),nj(a)},X8=t=>!!t,rj=t=>ot(Fc.makeMap(t,/[, ]/),X8),zg=t=>x.from($4(t)),J8=t=>{const s=x.from(pp(t)).filter(X8).map(rj);return zg(t).fold(at,a=>s.fold(qe,l=>Me(l).length>0?l:!1))},aj=(t,s)=>{const a=J8(t);return re(a)?a?zg(t):x.none():a[s]?zg(t):x.none()},ij=(t,s)=>aj(t,s).map(a=>l=>ls.nu(u=>{const f=(p,v)=>{if(!B(p))throw new Error("Expected value to be string");if(v!==void 0&&!k(v))throw new Error("Expected meta to be a object");u({value:p,meta:v})},m={filetype:s,fieldname:l.fieldname,...x.from(l.meta).getOr({})};a.call(t,f,l.value,m)})),KT=t=>x.from(t).filter(B).getOrUndefined(),YT=t=>vp(t)?x.some({targets:D0.find(t.getBody()),anchorTop:KT(X6(t)),anchorBottom:KT(J6(t))}):x.none(),Q8=t=>x.from(Xv(t)),q8=t=>({getHistory:oj,addToHistory:sj,getLinkInformation:()=>YT(t),getValidationHandler:()=>Q8(t),getUrlPicker:s=>ij(t,s)}),lj=(t,s,a,l)=>{const u=Dt(!1),f=$W(s),m={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Wl.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:WW(t.dialog),checkUiComponentContext:X=>{if(L4(s))return{contextType:"disabled",shouldDisable:!0};const[ie,le=""]=X.split(":"),xe=s.ui.registry.getAll().contexts,Re=Be(xe,ie).fold(()=>Be(xe,"mode").map(vt=>vt("design")).getOr(!1),vt=>le.charAt(0)==="!"?!vt(le.slice(1)):vt(le));return{contextType:ie,shouldDisable:!Re}}},p=q8(s),v=ZW(s),C=LW(s),E=_W(s),D=()=>u.get(),I=X=>u.set(X),H={shared:{providers:m,anchors:Up(s,a,l,f.isPositionedAtTop),header:f},urlinput:p,styles:v,colorinput:C,dialog:E,isContextMenuOpen:D,setContextMenuState:I},W=X=>x.none(),Q={...H,shared:{...H.shared,interpreter:X=>zT(X,{},Q,W),getSink:t.popup}},se={...H,shared:{...H.shared,interpreter:X=>zT(X,{},se,W),getSink:t.dialog}};return{popup:Q,dialog:se}},Zp=(t,s,a)=>{const l=(Pe,St)=>{tt([s,...a],Gt=>{Gt.broadcastEvent(Pe,St)})},u=(Pe,St)=>{tt([s,...a],Gt=>{Gt.broadcastOn([Pe],St)})},f=Pe=>u(Ku(),{target:Pe.target}),m=gh(),p=xr(m,"touchstart",f),v=xr(m,"touchmove",Pe=>l(E7(),Pe)),C=xr(m,"touchend",Pe=>l(L1(),Pe)),E=xr(m,"mousedown",f),D=xr(m,"mouseup",Pe=>{Pe.raw.button===0&&u(LE(),{target:Pe.target})}),I=Pe=>u(Ku(),{target:ht.fromDom(Pe.target)}),H=Pe=>{Pe.button===0&&u(LE(),{target:ht.fromDom(Pe.target)})},W=()=>{tt(t.editorManager.get(),Pe=>{t!==Pe&&Pe.dispatch("DismissPopups",{relatedTarget:t})})},Q=Pe=>l(xx(),mh(Pe)),se=Pe=>{u(Vf(),{}),l(Qc(),mh(Pe))},X=fr(ht.fromDom(t.getElement())),ie=xm(X,"scroll",Pe=>{requestAnimationFrame(()=>{const St=t.getContainer();if(St!=null){const Lt=Yf(t,s.element).map(Ln=>[Ln.element,...Ln.others]).getOr([]);fo(Lt,Ln=>vo(Ln,Pe.target))&&(t.dispatch("ElementScroll",{target:Pe.target.dom}),l(_m(),Pe))}})}),le=()=>u(Vf(),{}),xe=Pe=>{Pe.state&&u(Ku(),{target:ht.fromDom(t.getContainer())})},Re=Pe=>{u(Ku(),{target:ht.fromDom(Pe.relatedTarget.getContainer())})},vt=Pe=>t.dispatch("focusin",Pe),Ke=Pe=>t.dispatch("focusout",Pe);t.on("PostRender",()=>{t.on("click",I),t.on("tap",I),t.on("mouseup",H),t.on("mousedown",W),t.on("ScrollWindow",Q),t.on("ResizeWindow",se),t.on("ResizeEditor",le),t.on("AfterProgressState",xe),t.on("DismissPopups",Re),tt([s,...a],Pe=>{Pe.element.dom.addEventListener("focusin",vt),Pe.element.dom.addEventListener("focusout",Ke)})}),t.on("remove",()=>{t.off("click",I),t.off("tap",I),t.off("mouseup",H),t.off("mousedown",W),t.off("ScrollWindow",Q),t.off("ResizeWindow",se),t.off("ResizeEditor",le),t.off("AfterProgressState",xe),t.off("DismissPopups",Re),tt([s,...a],Pe=>{Pe.element.dom.removeEventListener("focusin",vt),Pe.element.dom.removeEventListener("focusout",Ke)}),E.unbind(),p.unbind(),v.unbind(),C.unbind(),D.unbind(),ie.unbind()}),t.on("detach",()=>{tt([s,...a],Il),tt([s,...a],Pe=>Pe.destroy())})},qC=q,eS=at,tS=te([]);var XT=Object.freeze({__proto__:null,setup:qC,isDocked:eS,getBehaviours:tS});const nS=te(yt("toolbar-height-change")),Ql={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},JT="tox-tinymce--toolbar-sticky-on",QT="tox-tinymce--toolbar-sticky-off",qT=(t,s)=>{const a=ua(s),u=wl(s).dom.innerHeight,f=fa(a),m=ht.fromDom(t.elm),p=km(m),v=Vn(m),C=p.y,E=C+v,D=dc(s),I=Vn(s),H=D.top,W=H+I,Q=Math.abs(H-f.top)<2,se=Math.abs(W-(f.top+u))<2;if(Q&&C<W)JS(f.left,C-I,a);else if(se&&E>H){const X=C-u+v+I;JS(f.left,X,a)}},oS=(t,s)=>Kt(Jo.getModes(t),s),sS=t=>{const s=l=>os(l)+(parseInt(O(l,"margin-top"),10)||0)+(parseInt(O(l,"margin-bottom"),10)||0),a=t.element;zn(a).each(l=>{const u="padding-"+Jo.getModes(t)[0];if(Jo.isDocked(t)){const f=or(l);hn(a,"width",f+"px"),hn(l,u,s(a)+"px")}else ft(a,"width"),ft(l,u)})},eI=(t,s)=>{s?(Ko(t,Ql.fadeOutClass),Am(t,[Ql.transitionClass,Ql.fadeInClass])):(Ko(t,Ql.fadeInClass),Am(t,[Ql.fadeOutClass,Ql.transitionClass]))},tI=(t,s)=>{const a=ht.fromDom(t.getContainer());s?(Es(a,JT),Ko(a,QT)):(Es(a,QT),Ko(a,JT))},rS=(t,s)=>{const a=ua(s);cc(a).filter(l=>!vo(s,l)).filter(l=>vo(l,ht.fromDom(a.dom.body))||hm(t,l)).each(()=>Fs(s))},nI=(t,s)=>Xr(t).orThunk(()=>s().toOptional().bind(a=>Xr(a.element))),cj=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(Jo.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(sS)}),t.on("SkinLoaded",()=>{a().each(l=>{Jo.isDocked(l)?Jo.reset(l):Jo.refresh(l)})}),t.on("FullscreenStateChanged",()=>{a().each(Jo.reset)})),t.on("AfterScrollIntoView",l=>{a().each(u=>{Jo.refresh(u);const f=u.element;KS(f)&&qT(l,f)})}),t.on("PostRender",()=>{tI(t,!1)})},uj=t=>t().map(Jo.isDocked).getOr(!1),dj=()=>[Xa.config({channels:{[nS()]:{onReceive:sS}}})],oI=(t,s)=>{const a=Gn(),l=s.getSink,u=p=>{l().each(v=>p(v.element))},f=p=>{t.inline||sS(p),tI(t,Jo.isDocked(p)),p.getSystem().broadcastOn([Vf()],{}),l().each(v=>v.getSystem().broadcastOn([Vf()],{}))},m=t.inline?[]:dj();return[on.config({}),Jo.config({contextual:{lazyContext:p=>{const v=os(p.element),C=t.inline?t.getContentAreaContainer():t.getContainer();return x.from(C).map(E=>{const D=$r(ht.fromDom(E));return Yf(t,p.element).fold(()=>{const H=D.height-v,W=D.y+(oS(p,"top")?0:v);return $s(D.x,W,D.width,H)},H=>{const W=Ob(D,Sg(H)),Q=oS(p,"top")?W.y:W.y+v;return $s(W.x,Q,W.width,W.height-v)})})},onShow:()=>{u(p=>eI(p,!0))},onShown:p=>{u(v=>Qi(v,[Ql.transitionClass,Ql.fadeInClass])),a.get().each(v=>{rS(p.element,v),a.clear()})},onHide:p=>{nI(p.element,l).fold(a.clear,a.set),u(v=>eI(v,!1))},onHidden:()=>{u(p=>Qi(p,[Ql.transitionClass]))},...Ql},lazyViewport:p=>Yf(t,p.element).fold(()=>{const C=ma(),E=jf(t),D=C.y+(oS(p,"top")&&!K4(t)?E:0),I=C.height-(oS(p,"bottom")?E:0);return{bounds:$s(C.x,D,C.width,I),optScrollEnv:x.none()}},C=>({bounds:Sg(C),optScrollEnv:x.some({currentScrollTop:C.element.dom.scrollTop,scrollElmTop:dc(C.element).top})})),modes:[s.header.getDockingMode()],onDocked:f,onUndocked:f}),...m]};var fj=Object.freeze({__proto__:null,setup:cj,isDocked:uj,getBehaviours:oI});const sI=t=>{const s=t.editor,a=t.sticky?oI:tS;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Qe(a(s,t.sharedBackstage))}};var aS=rl({factory:(t,s)=>{const a=(u,f)=>{const m=Le(f,p=>{const v={type:"menubutton",text:p.text,fetch:E=>{E(p.getItems())},context:"any"},C=mP(v).mapError(E=>Pm(E)).getOrDie();return zp(C,"tox-mbtn",s.backstage,x.some("menuitem"))});fn.set(u,m)},l={focus:Pt.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:Qe([fn.config({}),un("menubar-events",[Ho(u=>{t.onSetup(u)}),Fe(Sc(),(u,f)=>{Ro(u.element,".tox-mbtn--active").each(m=>{Ru(f.event.target,".tox-mbtn").each(p=>{vo(m,p)||u.getSystem().getByDom(m).each(v=>{u.getSystem().getByDom(p).each(C=>{al.expand(C),al.close(v),on.focus(C)})})})})}),Fe(Tf(),(u,f)=>{f.event.prevFocus.bind(m=>u.getSystem().getByDom(m).toOptional()).each(m=>{f.event.newFocus.bind(p=>u.getSystem().getByDom(p).toOptional()).each(p=>{al.isOpen(m)&&(al.expand(p),al.close(m))})})})]),Pt.config({mode:"flow",selector:".tox-mbtn",onEscape:u=>(t.onEscape(u),x.some(!0))}),No.config({})]),apis:l,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[We("dom"),We("uid"),We("onEscape"),We("backstage"),ve("onSetup",q)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const rI="💝Get all features",gj="https://www.tiny.cloud/tinymce-upgrade-to-cloud/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",aI=t=>{const s=t.promotionLink?[{dom:{tag:"a",attributes:{href:gj,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:rI}}]:[];return{uid:t.uid,dom:t.dom,components:s}},iI=t=>{const{sidebars:s}=t.ui.registry.getAll();tt(Me(s),a=>{const l=s[a],u=()=>wa(x.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:l.icon,tooltip:l.tooltip,onAction:f=>{t.execCommand("ToggleSidebar",!1,a),f.setActive(u())},onSetup:f=>{f.setActive(u());const m=()=>f.setActive(u());return t.on("ToggleSidebar",m),()=>{t.off("ToggleSidebar",m)}},context:"any"})})},hj=t=>({element:()=>t.element.dom}),tX=(t,s)=>{const a=Le(Me(s),l=>{const u=s[l],f=kl(UP(u));return{name:l,getApi:hj,onSetup:f.onSetup,onShow:f.onShow,onHide:f.onHide}});return Le(a,l=>{const u=Dt(q);return t.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Dg.unnamedEvents([Lc(l,u),Kl(l,u),Fe(Vb(),(f,m)=>{const p=m.event;Ft(a,C=>C.name===p.name).each(C=>{(p.visible?C.onShow:C.onHide)(C.getApi(f))})})])})})},pj=t=>ya.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:tX(s,t),slotBehaviours:Dg.unnamedEvents([Ho(a=>ya.hideAllSlots(a))])})),vj=(t,s,a)=>{Zn.getCurrent(t).each(u=>{fn.set(u,[pj(s)]);const f=a==null?void 0:a.toLowerCase();B(f)&&_t(s,f)&&Zn.getCurrent(u).each(m=>{ya.showSlot(m,f),Na.immediateGrow(u),ft(u.element,"width"),iS(t.element,"region")})})},iS=(t,s)=>{cn(t,"role",s)},bj=(t,s)=>{Zn.getCurrent(t).each(l=>{Zn.getCurrent(l).each(f=>{Na.hasGrown(l)?ya.isShowing(f,s)?(Na.shrink(l),iS(t.element,"presentation")):(ya.hideAllSlots(f),ya.showSlot(f,s),iS(t.element,"region")):(ya.hideAllSlots(f),ya.showSlot(f,s),Na.grow(l),iS(t.element,"region"))})})},yj=t=>Zn.getCurrent(t).bind(a=>Na.isGrowing(a)||Na.hasGrown(a)?Zn.getCurrent(a).bind(f=>Ft(ya.getSlotNames(f),m=>ya.isShowing(f,m))):x.none()),eA=yt("FixSizeEvent"),tA=yt("AutoSizeEvent"),Cj=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Qe([No.config({}),on.config({}),Na.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Zn.getCurrent(s).each(ya.hideAllSlots),Un(s,tA)},onGrown:s=>{Un(s,tA)},onStartGrow:s=>{Zt(s,eA,{width:Y(s.element,"width").getOr("")})},onStartShrink:s=>{Zt(s,eA,{width:or(s.element)+"px"})}}),fn.config({}),Zn.config({find:s=>{const a=fn.contents(s);return Ns(a)}})])}],behaviours:Qe([Yl.childAt(0),un("sidebar-sliding-events",[Fe(eA,(s,a)=>{hn(s.element,"width",a.event.width)}),Fe(tA,(s,a)=>{ft(s.element,"width")})])])}),Sj=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Gu('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),lI=t=>Zn.getCurrent(t).each(s=>Fs(s.element,!0)),xj=(t,s)=>{const a="tabindex",l=`data-mce-${a}`;x.from(t.iframeElement).map(ht.fromDom).each(u=>{s?(tr(u,a).each(f=>cn(u,l,f)),cn(u,a,-1)):(us(u,a),tr(u,l).each(f=>{cn(u,a,f),us(u,l)}))})},wj=(t,s,a,l)=>{const u=s.element;if(xj(t,a),a)Oc.block(s,Sj(l)),ft(u,"display"),us(u,"aria-hidden"),t.hasFocus()&&lI(s);else{const f=Zn.getCurrent(s).exists(m=>ku(m.element));Oc.unblock(s),hn(u,"display","none"),cn(u,"aria-hidden","true"),f&&t.focus()}},Ej=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Qe([fn.config({}),Oc.config({focus:!1}),Zn.config({find:s=>Ns(s.components())})]),components:[]}),cI=t=>t.type==="focusin",Tj=t=>cI(t)?(t.composed?Ns(t.composedPath()):x.from(t.target)).map(ht.fromDom).filter(si).exists(a=>Qr(a,"mce-pastebin")):!1,Aj=(t,s,a)=>{const l=Dt(!1),u=Gn(),f=p=>{l.get()&&!Tj(p)&&(p.preventDefault(),lI(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",f),t.on("BeforeExecCommand",p=>{p.command.toLowerCase()==="mcefocus"&&p.value!==!0&&f(p)})});const m=p=>{p!==l.get()&&(l.set(p),wj(t,s(),p,a.providers),$U(t,p))};t.on("ProgressState",p=>{if(u.on(clearTimeout),_e(p.time)){const v=U2.setEditorTimeout(t,()=>m(p.state),p.time);u.set(v)}else m(p.state),u.clear()})},uI=t=>{const s=t.label.isNone()?t.title.fold(()=>({}),a=>({attributes:{"aria-label":a}})):t.label.fold(()=>({}),a=>({attributes:{"aria-label":a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(t.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...t.label.map(a=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[Wo(a)]})).toArray(),V2.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Qe([No.config({}),on.config({ignore:!0})])}},lS=t=>V2.sketch(uI(t)),dI=(t,s)=>{const a=Ho(l=>{const u=Le(t.initGroups,lS);Or.setGroups(l,u)});return Qe([Fi.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),Rs(()=>t.providers.checkUiComponentContext("any")),Pt.config({mode:s,onEscape:t.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),un("toolbar-events",[a])])},fI=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":uI({title:x.none(),label:x.none(),items:[]}),"overflow-button":LT({context:"any",name:"more",icon:x.some("more-drawer"),enabled:!0,tooltip:x.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:x.none(),borderless:!1},x.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:dI(t,s)}},Oj=t=>{const s=fI(t),a=4,l=R4.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return R4.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const u=t.moreDrawerData.lazyHeader().element,f=km(u),m=Si(u),p=km(m),v=Math.max(m.dom.scrollHeight,p.height);return $s(f.x+a,p.y,f.width-a*2,v)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[l],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:u=>t.onToggled(u,!0),onClosed:u=>t.onToggled(u,!1)})},kj=t=>{const s=I4.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=I4.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=fI(t);return I4.sketch({...l,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:u=>{u.getSystem().broadcastOn([nS()],{type:"opened"}),t.onToggled(u,!0)},onClosed:u=>{u.getSystem().broadcastOn([nS()],{type:"closed"}),t.onToggled(u,!1)}})},cS=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Or.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===zl.scrolling?["tox-toolbar--scrolling"]:[])},components:[Or.parts.groups({})],toolbarBehaviours:dI(t,s)})},nA=(t,s)=>{var a,l;const u=t.type==="togglebutton",f=t.icon.map(le=>cu(le,s.icons)).map(ao),p=le=>{const xe=Pe=>{f.map(St=>St.getOpt(le).each(Gt=>{fn.set(Gt,[cu(Pe,s.icons)])}))},Re=Pe=>{const St=le.element;Pe?(Es(St,"tox-button--enabled"),cn(St,"aria-pressed",!0)):(Ko(St,"tox-button--enabled"),us(St,"aria-pressed"))},vt=()=>Qr(le.element,"tox-button--enabled"),Ke=()=>Fs(le.element);if(u)return t.onAction({setIcon:xe,setActive:Re,isActive:vt,focus:Ke});if(t.type==="button")return t.onAction({setIcon:xe})},v={...t,name:u?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:x.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},C=FT((l=t.buttonType)!==null&&l!==void 0?l:"secondary"),E=u?t.text.map(s.translate):x.some(s.translate(t.text)),D=E.map(Wo),I=v.tooltip.or(E).map(le=>({"aria-label":s.translate(le)})).getOr({}),H=f.map(le=>le.asSpec()),W=Rp([H,D]),Q=t.icon.isSome()&&D.isSome(),se={tag:"button",classes:C.concat(...t.icon.isSome()&&!Q?["tox-button--icon"]:[]).concat(...Q?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:I},X=[],ie=GC(v,x.some(p),X,se,W,t.tooltip,s);return Ar.sketch(ie)},mI=(t,s)=>nA(t,s),Dj=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Le(t.buttons,a=>mI(a,s))}),uS=ja().deviceType,gI=uS.isPhone(),hI=uS.isTablet(),Mj=t=>{let s=!1;const a=Le(t.buttons,l=>l.type==="group"?(s=!0,Dj(l,t.providers)):mI(l,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...gI||hI?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Qe([on.config({}),Pt.config({mode:"flow",selector:"button, .tox-button",focusInside:Af.OnEnterOrSpaceMode})]),components:s?a:[$l.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),$l.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},Rj=t=>({uid:t.uid,behaviours:Qe([on.config({}),No.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),Pj=(t,s,a,l)=>{const u={getPane:f=>br.getPart(f,t,"pane"),getOnShow:f=>t.viewConfig.onShow,getOnHide:f=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:Qe([on.config({}),Pt.config({mode:"cyclic",focusInside:Af.OnEnterOrSpaceMode})]),apis:u}};var Wp=Pa({name:"silver.View",configFields:[We("viewConfig")],partFields:[Ys({factory:{sketch:Mj},schema:[We("buttons"),We("providers")],name:"header"}),Ys({factory:{sketch:Rj},schema:[],name:"pane"})],factory:Pj,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const Nj=(t,s,a)=>Dn(s,(l,u)=>{const f=kl(gU(l));return t.slot(u,Wp.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:f,components:[...f.buttons.length>0?[Wp.parts.header({buttons:f.buttons,providers:a})]:[],Wp.parts.pane({})]}))}),oA=(t,s)=>ya.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:Nj(a,t,s),slotBehaviours:Dg.unnamedEvents([Ho(l=>ya.hideAllSlots(l))])})),pI=t=>Ft(ya.getSlotNames(t),s=>ya.isShowing(t,s)),vI=t=>{const s=t.element;hn(s,"display","none"),cn(s,"aria-hidden","true")},Ij=t=>{const s=t.element;ft(s,"display"),us(s,"aria-hidden")},Bj=t=>({getContainer:te(t)}),dS=(t,s,a)=>{ya.getSlot(t,s).each(l=>{Wp.getPane(l).each(u=>{a(l)(Bj(u.element.dom))})})},Lj=(t,s)=>dS(t,s,Wp.getOnShow),bI=(t,s)=>dS(t,s,Wp.getOnHide);var fS=rl({factory:(t,s)=>{const f={setViews:(m,p)=>{fn.set(m,[oA(p,s.backstage.shared.providers)])},whichView:m=>Zn.getCurrent(m).bind(pI),toggleView:(m,p,v,C)=>Zn.getCurrent(m).exists(E=>{const D=pI(E),I=D.exists(W=>C===W),H=ya.getSlot(E,C).isSome();return H&&(ya.hideAllSlots(E),I?(vI(m),p()):(v(),Ij(m),ya.showSlot(E,C),Lj(E,C)),D.each(W=>bI(E,W))),H})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Qe([fn.config({}),Zn.config({find:m=>{const p=fn.contents(m);return Ns(p)}})]),apis:f}},name:"silver.ViewWrapper",configFields:[We("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,l,u)=>t.toggleView(s,a,l,u),whichView:(t,s)=>t.whichView(s)}});const Fj=(t,s,a)=>{let l=!1;const u=m=>{bd(m,".tox-statusbar").each(p=>{O(p,"display")==="none"&&er(p,"aria-hidden")==="true"?(ft(p,"display"),us(p,"aria-hidden")):(hn(p,"display","none"),cn(p,"aria-hidden","true"))})},f={getSocket:m=>br.getPart(m,t,"socket"),setSidebar:(m,p,v)=>{br.getPart(m,t,"sidebar").each(C=>vj(C,p,v))},toggleSidebar:(m,p)=>{br.getPart(m,t,"sidebar").each(v=>bj(v,p))},whichSidebar:m=>br.getPart(m,t,"sidebar").bind(yj).getOrNull(),getHeader:m=>br.getPart(m,t,"header"),getToolbar:m=>br.getPart(m,t,"toolbar"),setToolbar:(m,p)=>{br.getPart(m,t,"toolbar").each(v=>{const C=Le(p,lS);v.getApis().setGroups(v,C)})},setToolbars:(m,p)=>{br.getPart(m,t,"multiple-toolbar").each(v=>{const C=Le(p,E=>Le(E,lS));b2.setItems(v,C)})},refreshToolbar:m=>{br.getPart(m,t,"toolbar").each(v=>v.getApis().refresh(v))},toggleToolbarDrawer:m=>{br.getPart(m,t,"toolbar").each(p=>{vu(p.getApis().toggle,v=>v(p))})},toggleToolbarDrawerWithoutFocusing:m=>{br.getPart(m,t,"toolbar").each(p=>{vu(p.getApis().toggleWithoutFocusing,v=>v(p))})},isToolbarDrawerToggled:m=>br.getPart(m,t,"toolbar").bind(p=>x.from(p.getApis().isOpen).map(v=>v(p))).getOr(!1),getThrobber:m=>br.getPart(m,t,"throbber"),focusToolbar:m=>{br.getPart(m,t,"toolbar").orThunk(()=>br.getPart(m,t,"multiple-toolbar")).each(v=>{Pt.focusIn(v)})},setMenubar:(m,p)=>{br.getPart(m,t,"menubar").each(v=>{aS.setMenus(v,p)})},focusMenubar:m=>{br.getPart(m,t,"menubar").each(p=>{aS.focus(p)})},setViews:(m,p)=>{br.getPart(m,t,"viewWrapper").each(v=>{fS.setViews(v,p)})},toggleView:(m,p)=>br.getPart(m,t,"viewWrapper").exists(v=>fS.toggleView(v,()=>f.showMainView(m),()=>f.hideMainView(m),p)),whichView:m=>br.getPart(m,t,"viewWrapper").bind(fS.whichView).getOrNull(),hideMainView:m=>{l=f.isToolbarDrawerToggled(m),l&&f.toggleToolbarDrawer(m),br.getPart(m,t,"editorContainer").each(p=>{const v=p.element;u(v),hn(v,"display","none"),cn(v,"aria-hidden","true")})},showMainView:m=>{l&&f.toggleToolbarDrawer(m),br.getPart(m,t,"editorContainer").each(p=>{const v=p.element;u(v),ft(v,"display"),us(v,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:f,behaviours:t.behaviours}},_j=tu.optional({factory:aS,name:"menubar",schema:[We("backstage")]}),$j=t=>t.type===zl.sliding?kj:t.type===zl.floating?Oj:cS,Hj=tu.optional({factory:{sketch:t=>b2.sketch({uid:t.uid,dom:t.dom,listBehaviours:Qe([Pt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>cS({type:t.type,uid:yt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),x.some(!0))}),setupItem:(s,a,l,u)=>{Or.setGroups(a,l)},shell:!0})},name:"multiple-toolbar",schema:[We("dom"),We("onEscape")]}),CI=tu.optional({factory:{sketch:t=>{const s=$j(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),x.some(!0)),onToggled:(l,u)=>t.onToolbarToggled(u),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[We("dom"),We("onEscape"),We("getSink")]}),Vj=tu.optional({factory:{sketch:sI},name:"header",schema:[We("dom")]}),zj=tu.optional({factory:{sketch:aI},name:"promotion",schema:[We("dom"),We("promotionLink")]}),Uj=tu.optional({name:"socket",schema:[We("dom")]}),Zj=tu.optional({factory:{sketch:Cj},name:"sidebar",schema:[We("dom")]}),Wj=tu.optional({factory:{sketch:Ej},name:"throbber",schema:[We("dom")]}),jj=tu.optional({factory:fS,name:"viewWrapper",schema:[We("backstage")]}),Gj=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),Kj=tu.optional({factory:{sketch:Gj},name:"editorContainer",schema:[]});var Bo=Pa({name:"OuterContainer",factory:Fj,configFields:[We("dom"),We("behaviours")],partFields:[Vj,_j,CI,Hj,Uj,Zj,zj,Wj,jj,Kj],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,l)=>{t.setSidebar(s,a,l)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const Yj="file edit view insert format tools table help",sA={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},Xj=(t,s,a)=>{const l=W6(a).split(/[ ,]/);return{text:t.title,getItems:()=>ke(t.items,u=>{const f=u.toLowerCase();return f.trim().length===0?[]:fo(l,m=>m===f)?[]:f==="separator"||f==="|"?[{type:"separator"}]:s.menuItems[f]?[s.menuItems[f]]:[]})}},rA=t=>t.split(" "),SI=(t,s)=>{const a={...sA,...s.menus},l=Me(s.menus).length>0,u=s.menubar===void 0||s.menubar===!0?rA(Yj):rA(s.menubar===!1?"":s.menubar),f=qn(u,p=>{const v=_t(sA,p);return l?v||Be(s.menus,p).exists(C=>_t(C,"items")):v}),m=Le(f,p=>{const v=a[p];return Xj({title:v.title,items:rA(v.items)},s,t)});return qn(m,p=>{const v=C=>B(C)||C.type!=="separator";return p.getItems().length>0&&fo(p.getItems(),v)})},Ug=t=>{const s=()=>{t._skinLoaded=!0,FU(t)};return()=>{t.initialized?s():t.on("init",s)}},xI=(t,s)=>()=>lN(t,{message:s}),Jj=t=>{const s=z4(t);return s?x.from(s):x.none()},wI=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),mS=(t,s,a,l)=>(t.on("remove",()=>l.unloadRawCss(s)),l.loadRawCss(s,a)),Qj=(t,s)=>"ui/"+t+"/"+s,EI=t=>x.from(tinymce.Resource.get(t)).filter(B),aA=(t,s,a="")=>{const l=Jj(t).map(f=>Qj(f,`${s}.css`)),u=l.bind(EI);return Gr(l,u,(f,m)=>({_kind:"load-raw",key:f,css:m})).getOrThunk(()=>{const f=t.editorManager.suffix;return{_kind:"load-stylesheet",url:a+`/${s}${f}.css`}})},qj=(t,s)=>{const a=t.ui.styleSheetLoader,l=aA(t,"skin",s);switch(l._kind){case"load-raw":const{key:u,css:f}=l;return mS(t,u,f,a),Promise.resolve();case"load-stylesheet":const{url:m}=l;return wI(t,m,a);default:return Promise.resolve()}},eG=(t,s)=>{if(wu(ht.fromDom(t.getElement()))){const l=Gv.DOM.styleSheetLoader,u=aA(t,"skin.shadowdom",s);switch(u._kind){case"load-raw":const{key:f,css:m}=u;return mS(t,f,m,l),Promise.resolve();case"load-stylesheet":const{url:p}=u;return wI(t,p,l);default:return Promise.resolve()}}else return Promise.resolve()},tG=(t,s,a)=>{const u=aA(t,s?"content.inline":"content",a);switch(u._kind){case"load-raw":const{key:f,css:m}=u;return s?mS(t,f,m,t.ui.styleSheetLoader):t.on("PostRender",()=>{mS(t,f,m,t.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:p}=u;return a&&t.contentCSS.push(p),Promise.resolve();default:return Promise.resolve()}},nG=async(t,s)=>{const a=Gf(s);if(await tG(s,t,a),!K2(s)&&B(a))return Promise.all([qj(s,a),eG(s,a)]).then()},TI=(t,s)=>nG(t,s).then(Ug(s),xI(s,"Skin could not be loaded")),oG=gt(TI,!1),sG=gt(TI,!0),AI=t=>({isEnabled:()=>!Bt.isDisabled(t),setEnabled:s=>Bt.set(t,!s),setText:s=>Zt(t,Jl,{text:s}),setIcon:s=>Zt(t,Hg,{icon:s})}),rG=t=>({setActive:s=>{On.set(t,s)},isActive:()=>On.isOn(t),isEnabled:()=>!Bt.isDisabled(t),setEnabled:s=>Bt.set(t,!s),setText:s=>Zt(t,Jl,{text:s}),setIcon:s=>Zt(t,Hg,{icon:s})}),iA=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),lA=yt("focus-button"),cA=(t,s,a,l,u,f,m)=>{const p=s.map(C=>ao(HC(C,"tox-tbtn",u))),v=t.map(C=>ao(cu(C,u.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...iA(a,u),...me(m)?{"data-mce-name":m}:{}}},components:Rp([v.map(C=>C.asSpec()),p.map(C=>C.asSpec())]),eventOrder:{[Ai()]:["focusing","alloy.base.behaviour",tm],[Dl()]:[tm,"toolbar-group-button-events"],[_u()]:[tm,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:Qe([Fi.toolbarButton(()=>u.checkUiComponentContext(f).shouldDisable),Rs(()=>u.checkUiComponentContext(f)),un(tm,[Ho((C,E)=>kT(C)),Fe(Jl,(C,E)=>{p.bind(D=>D.getOpt(C)).each(D=>{fn.set(D,[Wo(u.translate(E.event.text))])})}),Fe(Hg,(C,E)=>{v.bind(D=>D.getOpt(C)).each(D=>{fn.set(D,[cu(E.event.icon,u.icons)])})}),Fe(Ai(),(C,E)=>{E.event.prevent(),Un(C,lA)})])].concat(l.getOr([])))}},M0=(t,s,a,l,u)=>{const f=s.shared,m=Dt(q),p={toolbarButtonBehaviours:[],getApi:AI,onSetup:t.onSetup},v=[un("toolbar-group-button-events",[Lc(p,m),Kl(p,m)]),...t.tooltip.map(C=>Qo.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(C)}))).toArray()];return Xu.sketch({lazySink:f.getSink,fetch:()=>ls.nu(C=>{C(Le(a(t.items),lS))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:cA(t.icon,t.text,t.tooltip,x.some(v),f.providers,t.context,u),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:l}}}})},OI=(t,s,a,l)=>{var u;const f=Dt(q),m=cA(t.icon,t.text,t.tooltip,x.none(),a,t.context,l);return Ar.sketch({dom:m.dom,components:m.components,eventOrder:r8,buttonBehaviours:{...Qe([un("toolbar-button-events",[GZ({onAction:t.onAction,getApi:s.getApi}),Lc(s,f),Kl(s,f)]),...t.tooltip.map(p=>Qo.config(a.tooltips.getConfig({tooltipText:a.translate(p)+t.shortcut.map(v=>` (${Z3(v)})`).getOr("")}))).toArray(),Fi.toolbarButton(()=>!t.enabled||a.checkUiComponentContext(t.context).shouldDisable),Rs(()=>a.checkUiComponentContext(t.context))].concat(s.toolbarButtonBehaviours)),[tm]:(u=m.buttonBehaviours)===null||u===void 0?void 0:u[tm]}})},aG=(t,s,a)=>R0(t,s,[],a),R0=(t,s,a,l)=>OI(t,{toolbarButtonBehaviours:a.length>0?[un("toolbarButtonWith",a)]:[],getApi:AI,onSetup:t.onSetup},s,l),iG=(t,s,a)=>kI(t,s,[],a),kI=(t,s,a,l)=>OI(t,{toolbarButtonBehaviours:[fn.config({}),On.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[un("toolbarToggleButtonWith",a)]:[]),getApi:rG,onSetup:t.onSetup},s,l),lG=(t,s,a)=>l=>ls.nu(u=>s.fetch(u)).map(u=>x.from(IC(ho(MC(yt("menu-value"),u,f=>{s.onItemAction(t(l),f)},s.columns,s.presets,jl.CLOSE_ON_EXECUTE,s.select.getOr(at),a),{movement:v0(s.columns,s.presets),menuBehaviours:Dg.unnamedEvents(s.columns!=="auto"?[]:[Ho((f,m)=>{GP(f,4,oC(s.presets)).each(({numRows:p,numColumns:v})=>{Pt.setGridSize(f,p,v)})})])})))),cG=(t,s,a)=>{const l=Dt(t.tooltip.getOr("")),u=p=>({isEnabled:()=>!Bt.isDisabled(p),setEnabled:v=>Bt.set(p,!v),setIconFill:(v,C)=>{Ro(p.element,`svg path[class="${v}"], rect[class="${v}"]`).each(E=>{cn(E,"fill",C)})},setActive:v=>{cn(p.element,"aria-pressed",v),Ro(p.element,"span").each(C=>{p.getSystem().getByDom(C).each(E=>On.set(E,v))})},isActive:()=>Ro(p.element,"span").exists(v=>p.getSystem().getByDom(v).exists(On.isOn)),setText:v=>Ro(p.element,"span").each(C=>p.getSystem().getByDom(C).each(E=>Zt(E,Jl,{text:v}))),setIcon:v=>Ro(p.element,"span").each(C=>p.getSystem().getByDom(C).each(E=>Zt(E,Hg,{icon:v}))),setTooltip:v=>{const C=s.providers.translate(v);cn(p.element,"aria-label",C),l.set(v)}}),f=Dt(q),m={getApi:u,onSetup:t.onSetup};return $2.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...iA(t.tooltip,s.providers),...me(a)?{"data-mce-name":a}:{}}},onExecute:p=>{const v=u(p);v.isEnabled()&&t.onAction(v)},onItemExecute:(p,v,C)=>{},splitDropdownBehaviours:Qe([un("split-dropdown-events",[Ho((p,v)=>kT(p)),Fe(lA,on.focus),Lc(m,f),Kl(m,f)]),Fi.splitButton(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),Rs(()=>s.providers.checkUiComponentContext(t.context)),dg.config({}),...t.tooltip.map(p=>Qo.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(p),onShow:v=>{if(l.get()!==p){const C=s.providers.translate(l.get());Qo.setComponents(v,s.providers.tooltips.getComponents({tooltipText:C}))}}})})).toArray()]),eventOrder:{[Dl()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[_u()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:lG(u,t,s.providers),parts:{menu:rC(!1,t.columns,t.presets)},components:[$2.parts.button(cA(t.icon,t.text,x.none(),x.some([On.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),Fi.toolbarButton(at),Rs(te({contextType:"any",shouldDisable:!1}))]),s.providers,t.context)),$2.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:a3("chevron-down",s.providers.icons)},buttonBehaviours:Qe([Fi.splitButton(at),Rs(te({contextType:"any",shouldDisable:!1}))])}),$2.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},uG=".tox-toolbar-slider__input,.tox-toolbar-textfield",DI=t=>{qo.getContent(t).each(s=>{Ro(s.element,uG).fold(()=>Pt.focusIn(s),Fs)})},dG=t=>Xr(t.element).each(s=>{fc(s,'[tabindex="-1"]').each(a=>{Fs(a)})}),MI=yt("forward-slide"),gS=yt("backward-slide"),uA=yt("change-slide-event"),dA="tox-pop--resizing",fG=t=>{const s=Dt([]);return{sketch:qo.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:l=>{s.set([]),qo.getContent(l).each(u=>{ft(u.element,"visibility")}),Ko(l.element,dA),ft(l.element,"width")},onHide:()=>{s.set([]),t.onHide()},inlineBehaviours:Qe([un("context-toolbar-events",[$h(Ah(),(l,u)=>{u.event.raw.propertyName==="width"&&(Ko(l.element,dA),ft(l.element,"width"))}),Fe(uA,(l,u)=>{const f=l.element;ft(f,"width");const m=or(f),p=Xr(l.element).isSome();ft(f,"left"),ft(f,"right"),ft(f,"max-width"),qo.setContent(l,u.event.contents),Es(f,dA);const v=or(f);hn(f,"transition","none"),qo.reposition(l),ft(f,"transition"),hn(f,"width",m+"px"),u.event.focus.fold(()=>{p&&DI(l)},C=>{cc(fr(l.element)).fold(()=>Fs(C),E=>{vo(E,C)||Fs(C)})}),setTimeout(()=>{hn(l.element,"width",v+"px")},0)}),Fe(MI,(l,u)=>{qo.getContent(l).each(f=>{s.set(s.get().concat([{bar:f,focus:cc(fr(l.element))}]))}),Zt(l,uA,{contents:u.event.forwardContents,focus:x.none()})}),Fe(gS,(l,u)=>{t.onBack(),jr(s.get()).each(f=>{s.set(s.get().slice(0,s.get().length-1)),Zt(l,uA,{contents:ol(f.bar),focus:f.focus})})})]),Pt.config({mode:"special",onEscape:l=>jr(s.get()).fold(()=>t.onEscape(),u=>(Un(l,gS),x.some(!0)))})]),lazySink:()=>xn.value(t.sink)}),inSubtoolbar:()=>s.get().length>0}},mG=(t,s)=>{const a=kl(L3({type:"button",icon:"chevron-left",tooltip:"Back",onAction:q}));return R0(a,s.shared.providers,[Fe(OT,l=>{Un(l,gS)})])},jp=(t,s,a)=>Ki(a)?t.translate(s):t.translate([s,t.translate(a)]),gG=(t,s)=>{const a=(m,p,v,C)=>{const E=t.shared.providers.translate(m.title);if(m.type==="separator")return x.some({type:"separator",text:E});if(m.type==="submenu"){const D=ke(m.getStyleItems(),I=>l(I,p,C));return p===0&&D.length<=0?x.none():x.some({type:"nestedmenuitem",text:E,enabled:D.length>0,getSubmenuItems:()=>ke(m.getStyleItems(),I=>l(I,p,C))})}else return x.some({type:"togglemenuitem",text:E,icon:m.icon,active:m.isSelected(C),enabled:!v,onAction:s.onAction(m),...m.getStylePreview().fold(()=>({}),D=>({meta:{style:D}}))})},l=(m,p,v)=>{const C=m.type==="formatter"&&s.isInvalid(m);return p===0?C?[]:a(m,p,!1,v).toArray():a(m,p,C,v).toArray()},u=m=>{const p=s.getCurrentValue(),v=s.shouldHide?0:1;return ke(m,C=>l(C,v,p))};return{validateItems:u,getFetch:(m,p)=>(v,C)=>{const E=p(),D=u(E),I=Vg(D,jl.CLOSE_ON_EXECUTE,m,{isHorizontalMenu:!1,search:x.none()});C(I)}}},Gp=(t,s)=>{const a=s.dataset,l=a.type==="basic"?()=>Le(a.data,u=>UT(u,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:gG(t,s),getStyleItems:l}},P0=(t,s,a,l,u,f)=>{const{items:m,getStyleItems:p}=Gp(s,a),v=Dt(a.tooltip),C=D=>({getComponent:te(D),setTooltip:I=>{const H=s.shared.providers.translate(I);cn(D.element,"aria-label",H),v.set(I)}}),E=D=>{const I=H=>D.setTooltip(jp(t,l(H.value),H.value));return t.on(u,I),p0(Ig(t,"NodeChange",H=>{const W=H.getComponent();a.updateText(W),Bt.set(H.getComponent(),!t.selection.isEditable()||p().length===0)})(D),()=>t.off(u,I))};return MT({context:"mode:design",text:a.icon.isSome()?x.none():a.text,icon:a.icon,ariaLabel:x.some(a.tooltip),tooltip:x.none(),role:x.none(),fetch:m.getFetch(s,p),onSetup:E,getApi:C,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Qo.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:D=>{if(a.tooltip!==v.get()){const I=s.shared.providers.translate(v.get());Qo.setComponents(D,s.shared.providers.tooltips.getComponents({tooltipText:I}))}}})})]},"tox-tbtn",s.shared,f)},hS=t=>Le(t,s=>{let a=s,l=s;const u=s.split("=");return u.length>1&&(a=u[0],l=u[1]),{title:a,format:l}}),hG=t=>({type:"basic",data:t});var Kp;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(Kp||(Kp={}));const pG=(t,s)=>s===Kp.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),fA=(t,s,a)=>{const l=t.options.get(s);return{type:"basic",data:hS(pG(l,a))}},vG="Align",RI=te("Alignment {0}"),mA="left",gA=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],PI=t=>{const s=()=>Ft(gA,p=>t.formatter.match(p.format)),a=p=>()=>t.formatter.match(p),l=p=>x.none,u=p=>{const C=s().fold(te(mA),E=>E.title.toLowerCase());Zt(p,Hg,{icon:`align-${C}`}),dN(t,{value:C})},f=hG(gA),m=p=>()=>Ft(gA,v=>v.format===p.format).each(v=>t.execCommand(v.command));return{tooltip:jp(t,RI(),mA),text:x.none(),icon:x.some("align-left"),isSelectedFor:a,getCurrentValue:x.none,getPreviewFor:l,onAction:m,updateText:u,dataset:f,shouldHide:!1,isInvalid:p=>!t.formatter.canApply(p.format)}},bG=(t,s)=>P0(t,s,PI(t),RI,"AlignTextUpdate","align"),yG=(t,s)=>{const a=Gp(s,PI(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(vG),onSetup:Ba(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},NI=(t,s)=>{const a=s(),l=Le(a,u=>u.format);return x.from(t.formatter.closest(l)).bind(u=>Ft(a,f=>f.format===u))},hA="Blocks",pA=te("Block {0}"),vA="Paragraph",II=t=>{const s=f=>()=>t.formatter.match(f),a=f=>()=>{const m=t.formatter.get(f);return m?x.some({tag:m.length>0&&(m[0].inline||m[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(f))}):x.none()},l=f=>{const p=NI(t,()=>u.data).fold(te(vA),v=>v.title);Zt(f,Jl,{text:p}),Ia(t,{value:p})},u=fA(t,"block_formats",Kp.SemiColon);return{tooltip:jp(t,pA(),vA),text:x.some(vA),icon:x.none(),isSelectedFor:s,getCurrentValue:x.none,getPreviewFor:a,onAction:rT(t),updateText:l,dataset:u,shouldHide:!1,isInvalid:f=>!t.formatter.canApply(f.format)}},CG=(t,s)=>P0(t,s,II(t),pA,"BlocksTextUpdate","blocks"),SG=(t,s)=>{const a=Gp(s,II(t));t.ui.registry.addNestedMenuItem("blocks",{text:hA,onSetup:Ba(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},xG="Fonts",BI=te("Font {0}"),bA="System Font",wG=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],LI=t=>{const s=t.split(/\s*,\s*/);return Le(s,a=>a.replace(/^['"]+|['"]+$/g,""))},FI=(t,s)=>s.length>0&&Wr(s,a=>t.indexOf(a.toLowerCase())>-1),EG=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=LI(t.toLowerCase());return FI(a,wG)||FI(a,s)}else return!1},_I=t=>{const s=()=>{const v=W=>W?LI(W)[0]:"",C=t.queryCommandValue("FontName"),E=p.data,D=C?C.toLowerCase():"",I=V4(t);return{matchOpt:Ft(E,W=>{const Q=W.format;return Q.toLowerCase()===D||v(Q).toLowerCase()===v(D).toLowerCase()}).orThunk(()=>Kr(EG(D,I),{title:bA,format:D})),font:C}},a=v=>C=>C.exists(E=>E.format===v),l=()=>{const{matchOpt:v}=s();return v},u=v=>()=>x.some({tag:"div",styles:v.indexOf("dings")===-1?{"font-family":v}:{}}),f=v=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,v.format)})},m=v=>{const{matchOpt:C,font:E}=s(),D=C.fold(te(E),I=>I.title);Zt(v,Jl,{text:D}),fN(t,{value:D})},p=fA(t,"font_family_formats",Kp.SemiColon);return{tooltip:jp(t,BI(),bA),text:x.some(bA),icon:x.none(),isSelectedFor:a,getCurrentValue:l,getPreviewFor:u,onAction:f,updateText:m,dataset:p,shouldHide:!1,isInvalid:at}},TG=(t,s)=>P0(t,s,_I(t),BI,"FontFamilyTextUpdate","fontfamily"),AG=(t,s)=>{const a=Gp(s,_I(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(xG),onSetup:Ba(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})};var N0=tinymce.util.Tools.resolve("tinymce.util.VK");const OG=(t,s,a,l)=>{let u=x.none();const f=le=>le.map(xe=>Ct.getValue(xe)).getOr(""),m=Ig(t,"NodeChange SwitchMode DisabledStateChange",le=>{const xe=le.getComponent();u=x.some(xe),a.updateInputValue(xe),Bt.set(xe,!t.selection.isEditable()||L4(t))}),p=le=>({getComponent:te(le)}),v=Dt(q),C=yt("custom-number-input-events"),E=(le,xe,Re)=>{const vt=f(u),Ke=a.getNewValue(vt,le),Pe=vt.length-`${Ke}`.length,St=u.map(Lt=>Lt.element.dom.selectionStart-Pe),Gt=u.map(Lt=>Lt.element.dom.selectionEnd-Pe);a.onAction(Ke,Re),u.each(Lt=>{Ct.setValue(Lt,Ke),xe&&(St.each(Ln=>Lt.element.dom.selectionStart=Ln),Gt.each(Ln=>Lt.element.dom.selectionEnd=Ln))})},D=(le,xe)=>E((Re,vt)=>Re-vt,le,xe),I=(le,xe)=>E((Re,vt)=>Re+vt,le,xe),H=le=>zn(le.element).fold(x.none,xe=>(Fs(xe),x.some(!0))),W=le=>ku(le.element)?(hf(le.element).each(xe=>Fs(xe)),x.some(!0)):x.none(),Q=(le,xe,Re,vt)=>{const Ke=Dt(q),Pe=s.shared.providers.translate(Re),St=yt("altExecuting"),Gt=Ig(t,"NodeChange SwitchMode DisabledStateChange",Ln=>{Bt.set(Ln.getComponent(),!t.selection.isEditable()||L4(t))}),Lt=Ln=>{Bt.isDisabled(Ln)||le(!0)};return Ar.sketch({dom:{tag:"button",attributes:{"aria-label":Pe,"data-mce-name":xe},classes:vt.concat(xe)},components:[$C(xe,s.shared.providers.icons)],buttonBehaviours:Qe([Bt.config({}),Qo.config(s.shared.providers.tooltips.getConfig({tooltipText:Pe})),un(St,[Lc({onSetup:Gt,getApi:p},Ke),Kl({getApi:p},Ke),Fe(Jc(),(Ln,ln)=>{(ln.event.raw.keyCode===N0.SPACEBAR||ln.event.raw.keyCode===N0.ENTER)&&(Bt.isDisabled(Ln)||le(!1))}),Fe(Ef(),Lt),Fe(Xc(),Lt)])]),eventOrder:{[Jc()]:[St,"keying"],[Ef()]:[St,"alloy.base.behaviour"],[Xc()]:[St,"alloy.base.behaviour"],[Dl()]:["alloy.base.behaviour",St,"tooltipping"],[_u()]:[St,"tooltipping"]}})},se=ao(Q(le=>D(!1,le),"minus","Decrease font size",[])),X=ao(Q(le=>I(!1,le),"plus","Increase font size",[])),ie=ao({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[Ju.sketch({inputBehaviours:Qe([Bt.config({}),un(C,[Lc({onSetup:m,getApi:p},v),Kl({getApi:p},v)]),un("input-update-display-text",[Fe(Jl,(le,xe)=>{Ct.setValue(le,xe.event.text)}),Fe(NO(),le=>{a.onAction(Ct.getValue(le))}),Fe(Im(),le=>{a.onAction(Ct.getValue(le))})]),Pt.config({mode:"special",onEnter:le=>(E(lt,!0,!0),x.some(!0)),onEscape:H,onUp:le=>(I(!0,!1),x.some(!0)),onDown:le=>(D(!0,!1),x.some(!0)),onLeft:(le,xe)=>(xe.cut(),x.none()),onRight:(le,xe)=>(xe.cut(),x.none())})])})],behaviours:Qe([on.config({}),Pt.config({mode:"special",onEnter:W,onSpace:W,onEscape:H}),un("input-wrapper-events",[Fe(Sc(),le=>{tt([se,X],xe=>{const Re=ht.fromDom(xe.get(le).element.dom);ku(Re)&&Tl(Re)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...me(l)?{"data-mce-name":l}:{}}},components:[se.asSpec(),ie.asSpec(),X.asSpec()],behaviours:Qe([on.config({}),Pt.config({mode:"flow",focusInside:Af.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:le=>ku(le.element)?x.none():(Fs(le.element),x.some(!0))})])}},kG="Font sizes",$I=te("Font size {0}"),HI="12pt",DG={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},MG={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},RG=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},PG=(t,s)=>/[0-9.]+px$/.test(t)?RG(parseInt(t,10)*72/96,s||0)+"pt":Be(MG,t).getOr(t),VI=t=>Be(DG,t).getOr(""),yA=t=>{const s=()=>{let v=x.none();const C=p.data,E=t.queryCommandValue("FontSize");if(E)for(let D=3;v.isNone()&&D>=0;D--){const I=PG(E,D),H=VI(I);v=Ft(C,W=>W.format===E||W.format===I||W.format===H)}return{matchOpt:v,size:E}},a=v=>C=>C.exists(E=>E.format===v),l=()=>{const{matchOpt:v}=s();return v},u=te(x.none),f=v=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,v.format)})},m=v=>{const{matchOpt:C,size:E}=s(),D=C.fold(te(E),I=>I.title);Zt(v,Jl,{text:D}),UY(t,{value:D})},p=fA(t,"font_size_formats",Kp.Space);return{tooltip:jp(t,$I(),HI),text:x.some(HI),icon:x.none(),isSelectedFor:a,getPreviewFor:u,getCurrentValue:l,onAction:f,updateText:m,dataset:p,shouldHide:!1,isInvalid:at}},NG=(t,s)=>P0(t,s,yA(t),$I,"FontSizeTextUpdate","fontsize"),CA=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},I0=16,SA=t=>t>=0,pS=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:l=>Zt(l,Jl,{text:s()}),onAction:(l,u)=>t.execCommand("FontSize",!1,l,{skip_focus:!u}),getNewValue:(l,u)=>{Eb(l,["unsupportedLength","empty"]);const f=s(),m=Eb(l,["unsupportedLength","empty"]).or(Eb(f,["unsupportedLength","empty"])),p=m.map(I=>I.value).getOr(I0),v=Y6(t),C=m.map(I=>I.unit).filter(I=>I!=="").getOr(v),E=u(p,CA(C).step),D=`${SA(E)?E:p}${C}`;return D!==f&&ZY(t,{value:D}),D}}},Zg=(t,s)=>OG(t,s,pS(t),"fontsizeinput"),vS=(t,s)=>{const a=Gp(s,yA(t));t.ui.registry.addNestedMenuItem("fontsize",{text:kG,onSetup:Ba(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},IG="Formats",xA=t=>Ki(t)?"Formats":"Format {0}",wA=(t,s)=>{const a="Formats",l=m=>()=>t.formatter.match(m),u=m=>()=>{const p=t.formatter.get(m);return p!==void 0?x.some({tag:p.length>0&&(p[0].inline||p[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(m))}):x.none()},f=m=>{const p=D=>KC(D)?ke(D.items,p):N8(D)?[{title:D.title,format:D.format}]:[],v=ke(_8(t),p),E=NI(t,te(v)).fold(te({title:a,tooltipLabel:""}),D=>({title:D.title,tooltipLabel:D.title}));Zt(m,Jl,{text:E.title}),uN(t,{value:E.tooltipLabel})};return{tooltip:jp(t,xA(""),""),text:x.some(a),icon:x.none(),isSelectedFor:l,getCurrentValue:x.none,getPreviewFor:u,onAction:rT(t),updateText:f,shouldHide:U6(t),isInvalid:m=>!t.formatter.canApply(m.format),dataset:s}},zI=(t,s)=>{const a={type:"advanced",...s.styles};return P0(t,s,wA(t,a),xA,"StylesTextUpdate","styles")},BG=(t,s)=>{const a={type:"advanced",...s.styles},l=Gp(s,wA(t,a));t.ui.registry.addNestedMenuItem("styles",{text:IG,onSetup:Ba(t,()=>l.getStyleItems().length>0),getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},LG=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],B0=(t,s)=>(a,l,u,f)=>{const m=t(a).mapError(p=>Pm(p)).getOrDie();return s(m,l,u,f)},UI={button:B0(L3,(t,s,a,l)=>aG(t,s.shared.providers,l)),togglebutton:B0(OP,(t,s,a,l)=>iG(t,s.shared.providers,l)),menubutton:B0(mP,(t,s,a,l)=>zp(t,"tox-tbtn",s,x.none(),!1,l)),splitbutton:B0(uU,(t,s,a,l)=>cG(t,s.shared,l)),grouptoolbarbutton:B0(cU,(t,s,a,l)=>{const u=a.ui.registry.getAll().buttons,f=p=>yS(a,{buttons:u,toolbar:p,allowToolbarGroups:!1},s,x.none()),m={[uy]:s.shared.header.isPositionedAtTop()?Nd.TopToBottom:Nd.BottomToTop};switch(hp(a)){case zl.floating:return M0(t,s,f,m,l);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},ZI=(t,s,a,l)=>Be(UI,t.type).fold(()=>(console.error("skipping button defined by",t),x.none()),u=>x.some(u(t,s,a,l))),bS={styles:zI,fontsize:NG,fontsizeinput:Zg,fontfamily:TG,blocks:CG,align:bG,navigateback:mG},FG=t=>{const s=Le(LG,a=>{const l=qn(a.items,u=>_t(t,u)||_t(bS,u));return{name:a.name,items:l}});return qn(s,a=>a.items.length>0)},_G=t=>{const s=t.split("|");return Le(s,a=>({items:a.trim().split(" ")}))},$G=t=>he(t,s=>(_t(s,"name")||_t(s,"label"))&&_t(s,"items")),HG=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?FG(a):B(s)?_G(s):$G(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},Yp=(t,s,a,l,u,f)=>Be(s,a.toLowerCase()).orThunk(()=>f.bind(m=>Tn(m,p=>Be(s,p+a.toLowerCase())))).fold(()=>Be(bS,a.toLowerCase()).map(m=>m(t,u)),m=>m.type==="grouptoolbarbutton"&&!l?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),x.none()):ZI(m,u,t,a.toLowerCase())),yS=(t,s,a,l)=>{const u=HG(s),f=Le(u,m=>{const p=ke(m.items,v=>v.trim().length===0?[]:Yp(t,s.buttons,v,s.allowToolbarGroups,a,l).toArray());return{title:x.from(t.translate(m.name)),label:Kr(m.label!==void 0,t.translate(m.label)),items:p}});return qn(f,m=>m.items.length>0)},WI=(t,s,a,l)=>{const u=s.mainUi.outerContainer,f=a.toolbar,m=a.buttons;if(he(f,B)){const p=f.map(v=>{const C={toolbar:v,buttons:m,allowToolbarGroups:a.allowToolbarGroups};return yS(t,C,l,x.none())});Bo.setToolbars(u,p)}else Bo.setToolbar(u,yS(t,a,l,x.none()))},jI=ja(),VG=jI.os.isiOS()&&jI.os.version.major<=12,GI=(t,s)=>{const{uiMotherships:a}=s,l=t.dom;let u=t.getWin();const f=t.getDoc().documentElement,m=Dt(ws(u.innerWidth,u.innerHeight)),p=Dt(ws(f.offsetWidth,f.offsetHeight)),v=()=>{const I=m.get();(I.left!==u.innerWidth||I.top!==u.innerHeight)&&(m.set(ws(u.innerWidth,u.innerHeight)),h0(t))},C=()=>{const I=t.getDoc().documentElement,H=p.get();(H.left!==I.offsetWidth||H.top!==I.offsetHeight)&&(p.set(ws(I.offsetWidth,I.offsetHeight)),h0(t))},E=I=>{_U(t,I)};l.bind(u,"resize",v),l.bind(u,"scroll",E);const D=xm(ht.fromDom(t.getBody()),"load",C);t.on("hide",()=>{tt(a,I=>{hn(I.element,"display","none")})}),t.on("show",()=>{tt(a,I=>{ft(I.element,"display")})}),t.on("NodeChange",C),t.on("remove",()=>{D.unbind(),l.unbind(u,"resize",v),l.unbind(u,"scroll",E),u=null})},zG=(t,s,a)=>{Kf(t)&&Di(a.mainUi.mothership.element,a.popupUi.mothership),oa(s,a.dialogUi.mothership)};var UG=Object.freeze({__proto__:null,render:(t,s,a,l,u)=>{const{mainUi:f,uiMotherships:m}=s,p=Dt(0),v=f.outerContainer;oG(t);const C=ht.fromDom(u.targetNode),E=vd(fr(C));Di(C,f.mothership),zG(t,E,s),t.on("PostRender",()=>{Bo.setSidebar(v,a.sidebar,G2(t))}),t.on("SkinLoaded",()=>{WI(t,s,a,l),p.set(t.getWin().innerWidth),Bo.setMenubar(v,SI(t,a)),Bo.setViews(v,a.views),GI(t,s)});const D=Bo.getSocket(v).getOrDie("Could not find expected socket element");if(VG){Xi(D.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const Q=Wa(()=>{t.dispatch("ScrollContent")},20),se=xr(D.element,"scroll",Q.throttle);t.on("remove",se.unbind)}XP(t,s),t.addCommand("ToggleSidebar",(Q,se)=>{Bo.toggleSidebar(v,se),zU(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var Q;return(Q=Bo.whichSidebar(v))!==null&&Q!==void 0?Q:""}),t.addCommand("ToggleView",(Q,se)=>{if(Bo.toggleView(v,se)){const X=v.element;f.mothership.broadcastOn([Ku()],{target:X}),tt(m,ie=>{ie.broadcastOn([Ku()],{target:X})}),J(Bo.whichView(v))&&(t.focus(),t.nodeChanged(),Bo.refreshToolbar(v)),mN(t)}}),t.addQueryValueHandler("ToggleView",()=>{var Q;return(Q=Bo.whichView(v))!==null&&Q!==void 0?Q:""});const I=hp(t),H=()=>{Bo.refreshToolbar(s.mainUi.outerContainer)};(I===zl.sliding||I===zl.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const Q=t.getWin().innerWidth;Q!==p.get()&&(H(),p.set(Q))});const W={setEnabled:Q=>{Mp(s,Q?"setEnabled":"setDisabled")},isEnabled:()=>!Bt.isDisabled(v)};return{iframeContainer:D.element.dom,editorContainer:v.element.dom,api:W}}});const EA=t=>/^[0-9\.]+(|px)$/i.test(""+t)?x.some(parseInt(""+t,10)):x.none(),L0=t=>_e(t)?t+"px":t,CS=(t,s,a)=>{const l=s.filter(f=>t<f),u=a.filter(f=>t>f);return l.or(u).getOr(t)},KI=(t,s)=>{if(typeof s=="number")return x.from(s);const a=/^([0-9.]+)(pt|em|px)$/.exec(s.trim());if(a){const l=a[2],u=Number.parseFloat(a[1]);if(Number.isNaN(u)||u<0)return x.none();if(l==="em")return x.from(u*Number.parseFloat(window.getComputedStyle(t.dom).fontSize));if(l==="pt")return x.from(u*(72/96));if(l==="px")return x.from(u)}return x.none()},ZG=t=>{const s=KI(ht.fromDom(t.targetElm),gp(t)),a=W2(t),l=F4(t);return s.map(u=>CS(u,a,l))},WG=t=>ZG(t).getOr(gp(t)),TA=t=>{const s=Wf(t),a=Z2(t),l=j2(t);return EA(s).map(u=>CS(u,a,l))},jG=t=>TA(t).getOr(Wf(t)),{ToolbarLocation:ef,ToolbarMode:AA}=G4,GG=40,SS=(t,s,a,l,u)=>{const{mainUi:f,uiMotherships:m}=a,p=Gv.DOM,v=yp(t),C=Cp(t),E=j2(t).or(TA(t)),D=l.shared.header,I=D.isPositionedAtTop,H=150,W=hp(t),Q=W===AA.sliding||W===AA.floating,se=Dt(!1),X=()=>se.get()&&!t.removed,ie=Rt=>Q?Rt.fold(te(0),Ze=>Ze.components().length>1?Vn(Ze.components()[1].element):0):0,le=Rt=>{switch(_4(t)){case ef.auto:const Ze=Bo.getToolbar(f.outerContainer),it=ie(Ze),Qt=Vn(Rt.element)-it,yn=$r(s);if(yn.y>Qt)return"top";{const pn=Si(s),Eo=Math.max(pn.dom.scrollHeight,Vn(pn));return yn.bottom<Eo-Qt||ma().bottom<yn.bottom-Qt?"bottom":"top"}case ef.bottom:return"bottom";case ef.top:default:return"top"}},xe=Rt=>{u.on(Ze=>{Jo.setModes(Ze,[Rt]),D.setDockingMode(Rt);const it=I()?Nd.TopToBottom:Nd.BottomToTop;cn(Ze.element,uy,it)})},Re=()=>{u.on(Rt=>{const Ze=E.getOrThunk(()=>Ab().width-C1(s).left-10);hn(Rt.element,"max-width",Ze+"px")})},vt=(Rt,Ze)=>{u.on(it=>{const Qt=Bo.getToolbar(f.outerContainer),yn=ie(Qt),Ut=$r(s),pn=Ke(t,f.outerContainer.element),Eo=()=>pn.fold(()=>Ut.x,sa=>{const fl=$r(sa);return vo(sa,Oa())?Ut.x:Ut.x-fl.x}),bo=()=>pn.fold(()=>I()?Math.max(Ut.y-Vn(it.element)+yn,0):Ut.bottom,sa=>{var fl;const ml=$r(sa),Hc=(fl=sa.dom.scrollTop)!==null&&fl!==void 0?fl:0,rd=vo(sa,Oa())?Math.max(Ut.y-Vn(it.element)+yn,0):Ut.y-ml.y+Hc-Vn(it.element)+yn;return I()?rd:Ut.bottom}),hi=Eo(),rs=Kr(Rt,Math.ceil(f.outerContainer.element.dom.getBoundingClientRect().width)).filter(sa=>sa>H).map(sa=>{const fl=Ze.getOr(fa()),ml=window.innerWidth-(hi-fl.left),Hc=Math.max(Math.min(sa,ml),H);return ml<sa&&hn(f.outerContainer.element,"width",Hc+"px"),{width:Hc+"px"}}).getOr({width:"max-content"}),dl={position:"absolute",left:Math.round(hi)+"px",top:bo()+"px"};Xi(f.outerContainer.element,{...dl,...rs})})},Ke=(Rt,Ze)=>Kf(Rt)?wh(Ze):x.none(),Pe=()=>{tt(m,Rt=>{Rt.broadcastOn([Vf()],{})})},St=()=>!v&&(dc(f.outerContainer.element).left+vh(f.outerContainer.element)>=window.innerWidth-GG||Y(f.outerContainer.element,"width").isSome())?(hn(f.outerContainer.element,"position","absolute"),hn(f.outerContainer.element,"left","0px"),ft(f.outerContainer.element,"width"),!0):!1,Gt=Rt=>{if(!X())return;v||Re();const Ze=fa(),it=v?!1:St();if(Q&&Bo.refreshToolbar(f.outerContainer),!v){const Qt=fa(),yn=Kr(Ze.left!==Qt.left,Ze);vt(it,yn),yn.each(Ut=>{JS(Ut.left,Qt.top)})}C&&u.on(Rt),Pe()},Lt=()=>v||!C||!X()?!1:u.get().exists(Rt=>{const Ze=D.getDockingMode(),it=le(Rt);return it!==Ze?(xe(it),!0):!1});return{isVisible:X,isPositionedAtTop:I,show:()=>{se.set(!0),hn(f.outerContainer.element,"display","flex"),p.addClass(t.getBody(),"mce-edit-focus"),tt(m,Rt=>{ft(Rt.element,"display")}),Lt(),Kf(t)?Gt(Rt=>Jo.isDocked(Rt)?Jo.reset(Rt):Jo.refresh(Rt)):Gt(Jo.refresh)},hide:()=>{se.set(!1),hn(f.outerContainer.element,"display","none"),p.removeClass(t.getBody(),"mce-edit-focus"),tt(m,Rt=>{hn(Rt.element,"display","none")})},update:Gt,updateMode:()=>{Lt()&&Gt(Jo.reset)},repositionPopups:Pe}},Wg=(t,s)=>{const a=$r(t);return{pos:s?a.y:a.bottom,bounds:a}},xS=(t,s,a,l)=>{const u=Dt(Wg(s,a.isPositionedAtTop())),f=C=>{const{pos:E,bounds:D}=Wg(s,a.isPositionedAtTop()),{pos:I,bounds:H}=u.get(),W=D.height!==H.height||D.width!==H.width;u.set({pos:E,bounds:D}),W&&h0(t,C),a.isVisible()&&(I!==E?a.update(Jo.reset):W&&(a.updateMode(),a.repositionPopups()))};l||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(Jo.reset)),t.on("NodeChange keydown",C=>{requestAnimationFrame(()=>f(C))});let m=0;const p=sc(()=>a.update(Jo.refresh),33);t.on("ScrollWindow",()=>{const C=fa().left;C!==m&&(m=C,p.throttle()),a.updateMode()}),Kf(t)&&t.on("ElementScroll",C=>{a.update(Jo.refresh)});const v=ns();v.set(xm(ht.fromDom(t.getBody()),"load",C=>f(C.raw))),t.on("remove",()=>{v.clear()})};var wS=Object.freeze({__proto__:null,render:(t,s,a,l,u)=>{const{mainUi:f}=s,m=Gn(),p=ht.fromDom(u.targetNode),v=SS(t,p,s,l,m),C=Cg(t);sG(t);const E=()=>{if(m.isSet()){v.show();return}m.set(Bo.getHeader(f.outerContainer).getOrDie());const I=W4(t);Kf(t)?(Di(p,f.mothership),Di(p,s.popupUi.mothership)):oa(I,f.mothership),oa(I,s.dialogUi.mothership);const H=()=>{WI(t,s,a,l),Bo.setMenubar(f.outerContainer,SI(t,a)),v.show(),xS(t,p,v,C),t.nodeChanged()};C?t.once("SkinLoaded",H):H()};t.on("show",E),t.on("hide",v.hide),C||(t.on("focus",E),t.on("blur",v.hide)),t.on("init",()=>{(t.hasFocus()||C)&&E()}),XP(t,s);const D={show:E,hide:v.hide,setEnabled:I=>{Mp(s,I?"setEnabled":"setDisabled")},isEnabled:()=>!Bt.isDisabled(f.outerContainer)};return{editorContainer:f.outerContainer.element.dom,api:D}}});const mi=()=>{const t=Gn(),s=Gn(),a=Gn();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const f=t.get().map(p=>p.mothership),m=s.get().map(p=>p.mothership);return f.fold(()=>m.toArray(),p=>m.fold(()=>[p],v=>vo(p.element,v.element)?[p]:[p,v]))},lazyGetInOuterOrDie:(f,m)=>()=>a.get().bind(p=>m(p.outerContainer)).getOrDie(`Could not find ${f} element in OuterContainer`)}},ES="contexttoolbar-show",OA="contexttoolbar-hide",jg=(t,s,a)=>({setInputEnabled:l=>{!l&&a&&Fs(a),Bt.set(t,!l)},isInputEnabled:()=>!Bt.isDisabled(t),hide:()=>{Un(t,Hb())},back:()=>{Un(t,gS)},getValue:()=>s.get().getOrThunk(()=>Ct.getValue(t)),setValue:l=>{t.getSystem().isConnected()?Ct.setValue(t,l):s.set(l)}}),YI=(t,s,a)=>Fe(OT,(l,u)=>{const f=t.get(l),m=jg(f,a,l.element);s.onAction(m,u.event.buttonApi)}),YG=(t,s,a,l)=>{const{primary:u,...f}=s.original,m=kl(L3({...f,type:"button",onAction:q}));return R0(m,a,[YI(t,s,l)])},nm=(t,s,a,l)=>{const{primary:u,...f}=s.original,m=kl(OP({...f,type:"togglebutton",onAction:q}));return kI(m,a,[YI(t,s,l)])},oX=t=>t.type==="contextformtogglebutton",XG=(t,s,a,l)=>oX(s)?nm(t,s,a,l):YG(t,s,a,l),kA=(t,s,a,l)=>{const u=Le(s,p=>ao(XG(t,p,a,l)));return{asSpecs:()=>Le(u,p=>p.asSpec()),findPrimary:p=>Tn(s,(v,C)=>v.primary?x.from(u[C]).bind(E=>E.getOpt(p)).filter(ye(Bt.isDisabled)):x.none())}},Xp=(t,s,a,l)=>{const{width:u,height:f}=t.initValue();let m=Vp;const p=yt("ratio-event"),v=Ke=>jg(Ke,l),C=Ke=>ui(Ke,{tag:"span",classes:["tox-icon","tox-lock-icon__"+Ke]},s.icons),E=()=>!1,D=t.label.getOr("Constrain proportions"),I=s.translate(D),H=En.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-lock-context-form-size-input","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":I,"data-mce-name":D}},components:[C("lock"),C("unlock")],buttonBehaviours:Qe([Bt.config({disabled:E}),No.config({}),Qo.config(s.tooltips.getConfig({tooltipText:I}))])}),W=Ke=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:Ke}),Q=Ke=>fc(Ke.element,"div.tox-focusable-wrapper").fold(x.none,St=>(Fs(St),x.some(!0))),se=Ke=>Bn.parts.field({factory:Ju,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:Ke?u:f,inputBehaviours:Qe([Bt.config({disabled:E}),No.config({}),un("size-input-toolbar-events",[Fe(ga(),(Pe,St)=>{Zt(Pe,p,{isField1:Ke})})]),Pt.config({mode:"special",onEnter:a,onEscape:Q})]),selectOnFocus:!1}),X=Ke=>({dom:{tag:"label",classes:["tox-label"]},components:[Wo(s.translate(Ke))]}),ie=Ke=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[Ke],behaviours:Qe([No.config({}),on.config({}),Pt.config({mode:"special",onEnter:Pe=>Ro(Pe.element,"input").fold(x.none,Gt=>(Fs(Gt),x.some(!0)))})])}),le=ie(En.parts.field1(W([Bn.parts.label(X("Width:")),se(!0)]))),xe=ie(En.parts.field2(W([Bn.parts.label(X("Height:")),se(!1)]))),Re=Dt(q),vt=[Lc({onBeforeSetup:Ke=>Ro(Ke.element,"input").each(Fs),onSetup:t.onSetup,getApi:v},Re),bC({getApi:v},Re,l)];return En.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[le,W([H]),xe],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(Ke,Pe,St)=>{zC(Ct.getValue(Ke)).each(Gt=>{m(Gt).each(Lt=>{Ct.setValue(Pe,m8(Lt))})})},onInput:Ke=>Un(Ke,zN),coupledFieldBehaviours:Qe([on.config({}),Pt.config({mode:"flow",focusInside:Af.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),Bt.config({disabled:E,onDisabled:Ke=>{En.getField1(Ke).bind(Bn.getField).each(Bt.disable),En.getField2(Ke).bind(Bn.getField).each(Bt.disable),En.getLock(Ke).each(Bt.disable)},onEnabled:Ke=>{En.getField1(Ke).bind(Bn.getField).each(Bt.enable),En.getField2(Ke).bind(Bn.getField).each(Bt.enable),En.getLock(Ke).each(Bt.enable)}}),Rs(()=>s.checkUiComponentContext("mode:design")),un("size-input-toolbar-events2",[Fe(p,(Ke,Pe)=>{const St=Pe.event.isField1,Gt=St?En.getField1(Ke):En.getField2(Ke),Lt=St?En.getField2(Ke):En.getField1(Ke),Ln=Gt.map(Ct.getValue).getOr(""),ln=Lt.map(Ct.getValue).getOr("");m=g8(Ln,ln)}),Fe(zN,Ke=>t.onInput(v(Ke))),...vt])])})},F0=(t,s,a)=>Bn.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...t.toArray(),s],fieldBehaviours:Qe([Bt.config({disabled:()=>a.checkUiComponentContext("mode:design").shouldDisable,onDisabled:l=>{dG(l),Bn.getField(l).each(Bt.disable)},onEnabled:l=>{Bn.getField(l).each(Bt.enable)}})])}),XI=(t,s,a,l)=>{const u=Dt(q),f=v=>jg(v,l),m=t.label.map(v=>Bn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Wo(s.translate(v))]})),p=Bn.parts.field({factory:Ju,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(t.min()),max:String(t.max())},data:t.initValue().toString(),fromInputValue:v=>oc(v).getOr(t.min()),toInputValue:v=>String(v),inputBehaviours:Qe([Bt.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),Rs(()=>s.checkUiComponentContext("mode:design")),Pt.config({mode:"special",onEnter:a,onLeft:(v,C)=>(C.cut(),x.none()),onRight:(v,C)=>(C.cut(),x.none())}),un("slider-events",[Lc({onSetup:t.onSetup,getApi:f,onBeforeSetup:Pt.focusIn},u),bC({getApi:f},u,l),Fe(wd(),v=>{t.onInput(f(v))})])])});return F0(m,p,s)},JG=(t,s,a,l)=>{const u=Dt(q),f=E=>jg(E,l),m=t.label.map(E=>Bn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Wo(s.translate(E))]})),v={...t.placeholder.map(E=>({placeholder:s.translate(E)})).getOr({})},C=Bn.parts.field({factory:Ju,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:v,data:t.initValue(),selectOnFocus:!0,inputBehaviours:Qe([Bt.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),Rs(()=>s.checkUiComponentContext("mode:design")),Pt.config({mode:"special",onEnter:a,onLeft:(E,D)=>(D.cut(),x.none()),onRight:(E,D)=>(D.cut(),x.none())}),un("input-events",[Lc({onSetup:t.onSetup,getApi:E=>fc(E.element,".tox-toolbar").bind(I=>Ro(I,"button:enabled")).fold(()=>jg(E,l),I=>jg(E,l,I)),onBeforeSetup:Pt.focusIn},u),bC({getApi:f},u,l),Fe(wd(),E=>{t.onInput(f(E))})])])});return F0(m,C,s)},DA=(t,s,a)=>{const l=Gn(),f=ao(t(a,C=>p.findPrimary(C).orThunk(()=>v.findPrimary(C)).map(E=>(Zm(E),!0)),l)),m=Ps(s.commands,C=>C.align==="start"),p=kA(f,m.pass,a,l),v=kA(f,m.fail,a,l);return qn([{title:x.none(),label:x.none(),items:p.asSpecs()},{title:x.none(),label:x.none(),items:[f.asSpec()]},{title:x.none(),label:x.none(),items:v.asSpecs()}],C=>C.items.length>0)},JI=(t,s)=>{switch(t.type){case"contextform":return DA(gt(JG,t),t,s);case"contextsliderform":return DA(gt(XI,t),t,s);case"contextsizeinputform":return DA(gt(Xp,t),t,s)}},Jp={renderContextForm:(t,s,a)=>cS({type:t,uid:yt("context-toolbar"),initGroups:JI(s,a),onEscape:x.none,cyclicKeying:!0,providers:a}),buildInitGroups:JI},QG=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,qG=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=Ga(ht.fromDom(t.startContainer),t.startOffset).element;return(hd(a)?Ea(a):x.some(a)).filter(si).map(u=>u.dom.getBoundingClientRect()).getOr(s)}else return s},MA=t=>{const s=t.selection.getRng(),a=qG(s);if(t.inline){const l=fa();return $s(l.left+a.left,l.top+a.top,a.width,a.height)}else{const l=km(ht.fromDom(t.getBody()));return $s(l.x+a.left,l.y+a.top,a.width,a.height)}},rX=(t,s)=>s.filter(a=>Ds(a)&&ib(a)).map(km).getOrThunk(()=>MA(t)),eK=(t,s,a)=>{const l=Math.max(t.x+a,s.x),u=Math.min(t.right-a,s.right);return{x:l,width:u-l}},tK=(t,s,a,l,u,f)=>{const m=ht.fromDom(t.getContainer()),p=Ro(m,".tox-editor-header").getOr(m),v=$r(p),C=v.y>=s.bottom,E=l&&!C;if(t.inline&&E)return{y:Math.max(v.bottom+f,a.y),bottom:a.bottom};if(t.inline&&!E)return{y:a.y,bottom:Math.min(v.y-f,a.bottom)};const D=u==="line"?$r(m):s;return E?{y:Math.max(v.bottom+f,a.y),bottom:Math.min(D.bottom-f,a.bottom)}:{y:Math.max(D.y+f,a.y),bottom:Math.min(v.y-f,a.bottom)}},Qp=(t,s,a,l=0)=>{const u=Ab(window),f=$r(ht.fromDom(t.getContentAreaContainer())),m=Nc(t)||Qv(t)||bp(t),{x:p,width:v}=eK(f,u,l);if(t.inline&&!m)return $s(p,u.y,v,u.height);{const C=s.header.isPositionedAtTop(),{y:E,bottom:D}=tK(t,f,u,C,a,l);return $s(p,E,v,D-E)}},TS=12,QI={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},RA={maxHeightFunction:Um(),maxWidthFunction:cy()},nK=(t,s)=>{const a=t.selection.getRng(),l=Ga(ht.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&vo(l.element,s)},aX=(t,s,a)=>{const l=Y(t,"position");hn(t,"position",s);const u=a(t);return l.each(f=>hn(t,"position",f)),u},e=t=>t==="node",n=(t,s,a,l,u)=>{const f=MA(t),m=l.lastElement().exists(p=>vo(a,p));if(nK(t,a))return m?nk:Rl;if(m)return aX(s,l.getMode(),()=>QG(f,$r(s),-20)&&!l.isReposition()?Z7:nk);{const p=l.getMode()==="fixed"?u.y+fa().top:u.y,v=Vn(s)+TS;return p+v<=f.y?Rl:j1}},o=(t,s,a,l)=>{const u=v=>(C,E,D,I,H)=>{const W=n(t,I,v,a,H),Q={...C,y:H.y,height:H.height};return{...W(Q,E,D,I,H),alwaysFit:!0}},f=v=>e(l)?[u(v)]:[];return s?{onLtr:v=>[Us,Ms,zs,Hr,pr,rr].concat(f(v)),onRtl:v=>[Us,zs,Ms,pr,Hr,rr].concat(f(v))}:{onLtr:v=>[rr,Us,Hr,Ms,pr,zs].concat(f(v)),onRtl:v=>[rr,Us,pr,zs,Hr,Ms].concat(f(v))}},r=(t,s,a,l)=>s==="line"?{bubble:pa(TS,0,QI),layouts:{onLtr:()=>[ny],onRtl:()=>[z1]},overrides:RA}:{bubble:pa(0,TS,QI,1/TS),layouts:o(t,a,l,s),overrides:RA},i=(t,s)=>{const a=qn(s,f=>f.predicate(t.dom)),{pass:l,fail:u}=Ps(a,f=>f.type==="contexttoolbar");return{contextToolbars:l,contextForms:u}},c=t=>{if(t.length<=1)return t;{const s=f=>fo(t,m=>m.position===f),a=f=>qn(t,m=>m.position===f),l=s("selection"),u=s("node");if(l||u)if(u&&l){const f=a("node"),m=Le(a("selection"),p=>({...p,position:"node"}));return f.concat(m)}else return a(l?"selection":"node");else return a("line")}},d=t=>{if(t.length<=1)return t;{const s=l=>Ft(t,u=>u.position===l);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(l=>l.position).fold(()=>[],l=>qn(t,u=>u.position===l))}},g=(t,s,a)=>{const l=i(t,s);if(l.contextForms.length>0)return x.some({elem:t,toolbars:[l.contextForms[0]]});{const u=i(t,a);if(u.contextForms.length>0)return x.some({elem:t,toolbars:[u.contextForms[0]]});if(l.contextToolbars.length>0||u.contextToolbars.length>0){const f=c(l.contextToolbars.concat(u.contextToolbars));return x.some({elem:t,toolbars:f})}else return x.none()}},h=(t,s,a)=>t(s)?x.none():dO(s,l=>{if(si(l)){const{contextToolbars:u,contextForms:f}=i(l,a.inNodeScope),m=f.length>0?f:d(u);return m.length>0?x.some({elem:l,toolbars:m}):x.none()}else return x.none()},t),y=(t,s)=>{const a=ht.fromDom(s.getBody()),l=m=>vo(m,a),u=m=>!l(m)&&!hm(a,m),f=ht.fromDom(s.selection.getNode());return u(f)?x.none():g(f,t.inNodeScope,t.inEditorScope).orThunk(()=>h(l,f,t))},A=(t,s)=>{const a={},l=[],u=[],f={},m={},p=(E,D)=>{const I=kl(PP(D));a[E]=I,I.launch.map(H=>{f["form:"+E]={...D.launch,type:H.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(I)}}}),I.scope==="editor"?u.push(I):l.push(I),m[E]=I},v=(E,D)=>{Jz(D).each(I=>{I.launch.isSome()&&(f["toolbar:"+E]={...D.launch,type:"button",onAction:()=>{s(I)}}),D.scope==="editor"?u.push(I):l.push(I),m[E]=I})},C=Me(t);return tt(C,E=>{const D=t[E];D.type==="contextform"||D.type==="contextsliderform"||D.type==="contextsizeinputform"?p(E,D):D.type==="contexttoolbar"&&v(E,D)}),{forms:a,inNodeScope:l,inEditorScope:u,lookupTable:m,formNavigators:f}},M="tox-pop--transition",R=t=>t===N0.ENTER||t===N0.SPACEBAR,_=(t,s,a,l)=>{const u=l.backstage,f=u.shared,m=ja().deviceType.isTouch,p=Gn(),v=Gn(),C=Gn(),E=fG({sink:a,onEscape:()=>(t.focus(),gN(t),x.some(!0)),onHide:()=>{gN(t)},onBack:()=>{UU(t)}}),D=va(E.sketch),I=()=>{const ln=C.get().getOr("node"),bn=e(ln)?1:0;return Qp(t,f,ln,bn)},H=()=>!t.removed&&!(m()&&u.isContextMenuOpen()),W=ln=>wa(Gr(ln,p.get(),vo),!0),Q=()=>{if(H()){const ln=I(),bn=wa(C.get(),"node")?rX(t,p.get()):MA(t);return ln.height<=0||!QG(bn,ln,.01)}else return!0},se=()=>{p.clear(),v.clear(),C.clear(),qo.hide(D)},X=()=>{if(qo.isOpen(D)){const ln=D.element;ft(ln,"display"),Q()?hn(ln,"display","none"):(v.set(0),qo.reposition(D))}},ie=ln=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[ln],behaviours:Qe([Pt.config({mode:"acyclic"}),un("pop-dialog-wrap-events",[Ho(bn=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>Pt.focusIn(bn))}),qc(bn=>{t.shortcuts.remove("ctrl+F9")})])])}),le=ln=>{const bn=Ke([ln]);Zt(D,MI,{forwardContents:ie(bn)})},xe=we(()=>A(s,le)),Re=(ln,bn)=>yS(t,{buttons:ln,toolbar:bn.items,allowToolbarGroups:!1},l.backstage,x.some(["form:","toolbar:"])),vt=(ln,bn)=>Jp.buildInitGroups(ln,bn),Ke=ln=>{const{buttons:bn}=t.ui.registry.getAll(),Rt=xe(),Ze={...bn,...Rt.formNavigators},it=hp(t)===zl.scrolling?zl.scrolling:zl.default,Qt=Yt(Le(ln,yn=>yn.type==="contexttoolbar"?Re(Ze,Xz(yn)):vt(yn,f.providers)));return cS({type:it,uid:yt("context-toolbar"),initGroups:Qt,onEscape:x.none,cyclicKeying:!0,providers:f.providers})},Pe=(ln,bn)=>{const Rt=ln==="node"?f.anchors.node(bn):f.anchors.cursor(),Ze=r(t,ln,m(),{lastElement:p.get,isReposition:()=>wa(v.get(),0),getMode:()=>ba.getMode(a)});return ho(Rt,Ze)},St=(ln,bn)=>{if(Ln.cancel(),!H())return;const Rt=Ke(ln),Ze=ln[0].position,it=Pe(Ze,bn);C.set(Ze),v.set(1);const Qt=D.element;ft(Qt,"display"),W(bn)||(Ko(Qt,M),ba.reset(a,D)),qo.showWithinBounds(D,ie(Rt),{anchor:it,transition:{classes:[M],mode:"placement"}},()=>x.some(I())),bn.fold(p.clear,p.set),Q()&&hn(Qt,"display","none")},Gt=()=>{hn(D.element,"transition","none"),X(),ft(D.element,"transition")};let Lt=!1;const Ln=sc(()=>{if(!(!t.hasFocus()||t.removed||Lt))if(Qr(D.element,M))Ln.throttle();else{const ln=xe();y(ln,t).fold(se,bn=>{St(bn.toolbars,x.some(bn.elem))})}},17);t.on("init",()=>{t.on("remove",se),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",X),t.on("click focus SetContent",Ln.throttle),t.on("keyup",ln=>{(!R(ln.keyCode)||!E.inSubtoolbar())&&Ln.throttle()}),t.on(OA,se),t.on(ES,ln=>{const bn=xe();Be(bn.lookupTable,ln.toolbarKey).each(Rt=>{St([Rt],Kr(ln.target!==t,ln.target)),DI(D)})}),t.on("focusout",ln=>{U2.setEditorTimeout(t,()=>{Xr(a.element).isNone()&&Xr(D.element).isNone()&&!t.hasFocus()&&se()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&se()}),t.on("DisabledStateChange",ln=>{ln.state&&se()}),t.on("ExecCommand",({command:ln})=>{ln.toLowerCase()==="toggleview"&&se()}),t.on("AfterProgressState",ln=>{ln.state?se():t.hasFocus()&&Ln.throttle()}),t.on("dragstart",()=>{Lt=!0}),t.on("dragend drop",()=>{Lt=!1}),t.on("NodeChange",ln=>{E.inSubtoolbar()?Gt():Xr(D.element).fold(Ln.throttle,q)})})},Z=t=>{tt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:fi(t,a.cmd),onSetup:Bp(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Ba(t),onAction:fi(t,"JustifyNone")})},V=(t,s)=>{const a=()=>{const l=s.getOptions(t),u=s.getCurrent(t).map(s.hash),f=Gn();return Le(l,m=>({type:"togglemenuitem",text:s.display(m),onSetup:p=>{const v=E=>{E&&(f.on(D=>D.setActive(!1)),f.set(p)),p.setActive(E)};v(wa(u,s.hash(m)));const C=s.watcher(t,m,v);return()=>{f.clear(),C()}},onAction:()=>s.setCurrent(t,m)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:l=>l(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},G=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:sR,hash:s=>n7(s,["fixed","relative","empty"]).getOr(s),display:lt,watcher:(s,a,l)=>s.formatter.formatChanged("lineheight",l,!1,{value:a}).unbind,getCurrent:s=>x.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:Ba(t),onMenuSetup:Ba(t)}),oe=t=>x.from(Z6(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:te(a),hash:l=>ce(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,u,f)=>{var m;return l.formatter.formatChanged("lang",f,!1,{value:u.code,customValue:(m=u.customCode)!==null&&m!==void 0?m:null}).unbind},getCurrent:l=>{const u=ht.fromDom(l.selection.getNode());return E1(u,f=>x.some(f).filter(si).bind(m=>tr(m,"lang").map(v=>{const C=tr(m,"data-mce-lang").getOrUndefined();return{code:v,customCode:C,title:""}})))},setCurrent:(l,u)=>l.execCommand("Lang",!1,u),onToolbarSetup:l=>{const u=ns();return l.setActive(t.formatter.match("lang",{},void 0,!0)),u.set(t.formatter.formatChanged("lang",l.setActive,!0)),p0(u.clear,Ba(t)(l))},onMenuSetup:Ba(t)})),ue=t=>{V(t,G(t)),oe(t).each(s=>V(t,s))},ge=(t,s)=>{yG(t,s),AG(t,s),BG(t,s),SG(t,s),vS(t,s)},Se=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",s=>t.mode.get()===s),t.ui.registry.addContext("any",qe),t.ui.registry.addContext("formatting",s=>t.formatter.canApply(s)),t.ui.registry.addContext("insert",s=>t.schema.isValidChild(t.selection.getNode().tagName,s))},Ue=t=>Ig(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),et=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:Ue(t),onAction:fi(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Ba(t),onAction:fi(t,"indent")})},Tt=t=>{et(t)},Ne=(t,s)=>a=>{a.setActive(s.get());const l=u=>{s.set(u.state),a.setActive(u.state)};return t.on("PastePlainTextToggle",l),p0(()=>t.off("PastePlainTextToggle",l),Ba(t)(a))},Ae=t=>{const s=Dt(tR(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:Ne(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:Ne(t,s)})},je=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},wt=t=>{Fc.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Bp(t,s.name),onAction:je(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,l=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:Bp(t,a),onAction:je(t,a),shortcut:l})}},Vt=t=>{Fc.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:fi(t,s.action),shortcut:s.shortcut,context:s.context})}),Fc.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Ba(t),onAction:fi(t,s.action)})})},Mn=t=>{Fc.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:fi(t,s.action),onSetup:Bp(t,s.name)})})},Pn=t=>{wt(t),Vt(t),Mn(t)},io=t=>{Fc.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:fi(t,s.action),context:s.context})}),Fc.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Ba(t),onAction:fi(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Ba(t),onAction:je(t,"code")})},So=t=>{Pn(t),io(t)},ds=(t,s)=>Ig(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),cr=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:ds(t,"hasUndo"),onAction:fi(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:ds(t,"hasRedo"),onAction:fi(t,"redo")})},Cr=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:ds(t,"hasUndo"),onAction:fi(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:ds(t,"hasRedo"),onAction:fi(t,"redo"),shortcut:"Meta+Y"})},pt=t=>{cr(t),Cr(t)},Ht=t=>Ig(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),oo=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:Ht(t),onAction:fi(t,"mceToggleVisualAid"),context:"any"})},lo=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:fi(t,"mceToggleVisualAid"),context:"any"})},He=t=>{lo(t),oo(t)},nt=(t,s)=>{Z(t),So(t),ge(t,s),pt(t),QU(t),He(t),Tt(t),ue(t),Ae(t),Se(t)},$t=t=>B(t)?t.split(/[ ,]/):t,Rn=t=>s=>s.options.get(t),$n=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:B(a)||he(a,B)?{value:$t(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},mo=Rn("contextmenu_never_use_native"),ql=Rn("contextmenu_avoid_overlap"),nd=t=>La(t).length===0,La=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:qn(a,l=>_t(s,l))},gi=(t,s)=>({type:"makeshift",x:t,y:s}),ul=(t,s,a)=>gi(t.x+s,t.y+a),Ca=t=>t.type==="longpress"||t.type.indexOf("touch")===0,ei=t=>{if(Ca(t)){const s=t.touches[0];return gi(s.pageX,s.pageY)}else return gi(t.pageX,t.pageY)},ec=t=>{if(Ca(t)){const s=t.touches[0];return gi(s.clientX,s.clientY)}else return gi(t.clientX,t.clientY)},om=(t,s)=>{const a=Gv.DOM.getPos(t);return ul(s,a.x,a.y)},Wt=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?ei(s):om(t.getContentAreaContainer(),ec(s)):Kn(t),Kn=t=>({type:"selection",root:ht.fromDom(t.selection.getNode())}),Os=t=>({type:"node",node:x.some(ht.fromDom(t.selection.getNode())),root:ht.fromDom(t.getBody())}),Xs=(t,s,a)=>{switch(a){case"node":return Os(t);case"point":return Wt(t,s);case"selection":return Kn(t)}},Sr=(t,s,a,l,u,f)=>{const m=a(),p=Xs(t,s,f);Vg(m,jl.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:x.none()}).map(v=>{s.preventDefault(),qo.showMenuAt(u,{anchor:p},{menu:{markers:Yd("normal")},data:v})})},Js={onLtr:()=>[Us,Ms,zs,Hr,pr,rr,Rl,j1,W1,ay,Fh,Z1],onRtl:()=>[Us,zs,Ms,pr,Hr,rr,Rl,j1,Fh,Z1,W1,ay]},fs=12,ms={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},ti=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const l=s.touches[0],u=a.getRng();return gO(t.getWin(),T1.domRange(u)).exists(m=>m.left<=l.clientX&&m.right>=l.clientX&&m.top<=l.clientY&&m.bottom>=l.clientY)}},_c=t=>{const s=t.selection.getRng(),a=()=>{U2.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),f()};t.once("touchend",a);const l=m=>{m.preventDefault(),m.stopImmediatePropagation()};t.on("mousedown",l,!0);const u=()=>f();t.once("longpresscancel",u);const f=()=>{t.off("touchend",a),t.off("longpresscancel",u),t.off("mousedown",l)}},od=(t,s,a)=>{const l=Xs(t,s,a);return{bubble:pa(0,a==="point"?fs:0,ms),layouts:Js,overrides:{maxWidthFunction:cy(),maxHeightFunction:Um()},...l}},uu=(t,s,a,l,u,f,m)=>{const p=od(t,s,f);Vg(a,jl.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!0,search:x.none()}).map(v=>{s.preventDefault();const C=m?Ka.HighlightMenuAndItem:Ka.HighlightNone;qo.showMenuWithinBounds(u,{anchor:p},{menu:{markers:Yd("normal"),highlightOnOpen:C},data:v,type:"horizontal"},()=>x.some(Qp(t,l.shared,f==="node"?"node":"selection"))),t.dispatch(OA)})},qp=(t,s,a,l,u,f)=>{const m=ja(),p=m.os.isiOS(),v=m.os.isMacOS(),C=m.os.isAndroid(),E=m.deviceType.isTouch(),D=()=>!(C||p||v&&E),I=()=>{const H=a();uu(t,s,H,l,u,f,D())};if((v||p)&&f!=="node"){const H=()=>{_c(t),I()};ti(t,s)?H():(t.once("selectionchange",H),t.once("touchend",()=>t.off("selectionchange",H)))}else I()},Gg=t=>B(t)?t==="|":t.type==="separator",tf={type:"separator"},tc=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(B(t))return t;switch(t.type){case"separator":return tf;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const l=t.getSubmenuItems();return B(l)?l:Le(l,tc)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Te(a.onAction)}}},nf=(t,s)=>{if(s.length===0)return t;const l=jr(t).filter(u=>!Gg(u)).fold(()=>[],u=>[tf]);return t.concat(l).concat(s).concat([tf])},_0=(t,s,a)=>{const l=Fo(s,(u,f)=>Be(t,f.toLowerCase()).map(m=>{const p=m.update(a);if(B(p)&&Gi(md(p)))return nf(u,p.split(" "));if(K(p)&&p.length>0){const v=Le(p,tc);return nf(u,v)}else return u}).getOrThunk(()=>u.concat([f])),[]);return l.length>0&&Gg(l[l.length-1])&&l.pop(),l},e1=(t,s)=>s.ctrlKey&&!mo(t),qI=t=>t.type==="longpress"||_t(t,"touches"),t1=(t,s)=>!qI(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),n1=(t,s)=>t1(t,s)?t.selection.getStart(!0):s.target,eB=(t,s)=>{const a=ql(t),l=t1(t,s)?"selection":"point";if(Gi(a)){const u=n1(t,s);return w1(ht.fromDom(u),a)?"node":l}else return l},o1=(t,s,a)=>{const u=ja().deviceType.isTouch,f=va(qo.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Qe([un("dismissContextMenu",[Fe(Ed(),(v,C)=>{Xn.close(v),t.focus()})])])})),m=()=>qo.hide(f),p=v=>{if(mo(t)&&v.preventDefault(),e1(t,v)||nd(t))return;const C=eB(t,v),E=()=>{const I=n1(t,v),H=t.ui.registry.getAll(),W=La(t);return _0(H.contextMenus,W,I)};(u()?qp:Sr)(t,v,E,a,f,C)};t.on("init",()=>{const v="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(u()?"":" ResizeWindow");t.on(v,m),t.on("longpress contextmenu",p)})},sd=40,Kg=sd/2,be=(t,s,a,l,u,f)=>t.fold(()=>og.snap({sensor:sl(a-Kg,l-Kg),range:ws(u,f),output:sl(x.some(a),x.some(l)),extra:{td:s}}),m=>{const p=a-Kg,v=l-Kg,C=sd,E=sd,D=m.element.dom.getBoundingClientRect();return og.snap({sensor:sl(p,v),range:ws(C,E),output:sl(x.some(a-D.width/2),x.some(l-D.height/2)),extra:{td:s}})}),Ee=(t,s,a)=>{const l=(u,f)=>u.exists(m=>vo(m,f));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(u,f)=>{const m=f.td;l(s.get(),m)||(s.set(m),a(m))},mustSnap:!0}},mt=t=>ao(Ar.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Qe([og.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),dg.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),st=(t,s)=>{const a=Dt([]),l=Dt([]),u=Dt(!1),f=Gn(),m=Gn(),p=Ke=>{const Pe=km(Ke);return be(H.getOpt(s),Ke,Pe.x,Pe.y,Pe.width,Pe.height)},v=()=>Le(a.get(),Ke=>p(Ke)),C=Ke=>{const Pe=km(Ke);return be(W.getOpt(s),Ke,Pe.right,Pe.bottom,Pe.width,Pe.height)},E=()=>Le(l.get(),Ke=>C(Ke)),D=Ee(v,f,Ke=>{m.get().each(Pe=>{t.dispatch("TableSelectorChange",{start:Ke,finish:Pe})})}),I=Ee(E,m,Ke=>{f.get().each(Pe=>{t.dispatch("TableSelectorChange",{start:Pe,finish:Ke})})}),H=mt(D),W=mt(I),Q=va(H.asSpec()),se=va(W.asSpec()),X=(Ke,Pe,St,Gt)=>{const Lt=Pe.dom.getBoundingClientRect();ft(Ke.element,"display");const Ln=wl(ht.fromDom(t.getBody())).dom.innerHeight,ln=St(Lt),bn=Gt(Lt,Ln);(ln||bn)&&hn(Ke.element,"display","none")},ie=(Ke,Pe,St,Gt)=>{const Lt=St(Pe);og.snapTo(Ke,Lt),X(Ke,Pe,bn=>bn[Gt]<0,(bn,Rt)=>bn[Gt]>Rt)},le=Ke=>ie(Q,Ke,p,"top"),xe=()=>f.get().each(le),Re=Ke=>ie(se,Ke,C,"bottom"),vt=()=>m.get().each(Re);if(ja().deviceType.isTouch()){const Ke=Pe=>Le(Pe,ht.fromDom);t.on("TableSelectionChange",Pe=>{u.get()||(Ac(s,Q),Ac(s,se),u.set(!0));const St=ht.fromDom(Pe.start),Gt=ht.fromDom(Pe.finish);f.set(St),m.set(Gt),x.from(Pe.otherCells).each(Lt=>{a.set(Ke(Lt.upOrLeftCells)),l.set(Ke(Lt.downOrRightCells)),le(St),Re(Gt)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{xe(),vt()}),t.on("TableSelectionClear",()=>{u.get()&&(ar(Q),ar(se),u.set(!1)),f.clear(),m.clear()})}};var qt=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const Jn=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",ks=(t,s,a)=>{var l;const u=(l=s.delimiter)!==null&&l!==void 0?l:"›",f=(C,E,D)=>Ar.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":D}},components:[Wo(C)],action:I=>{t.focus(),t.selection.select(E),t.nodeChanged()},buttonBehaviours:Qe([Qo.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",E.nodeName.toLowerCase()]),onShow:(I,H)=>{Pu(I.element,H.element)},onHide:I=>{a7(I.element)}})}),Fi.button(a.isDisabled),Rs(()=>a.checkUiComponentContext("any"))])}),m=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Wo(` ${u} `)]}),p=C=>Fo(C,(E,D,I)=>{const H=f(D.name,D.element,I);return I===0?E.concat([H]):E.concat([m(),H])},[]),v=C=>{const E=[];let D=C.length;for(;D-- >0;){const I=C[D];if(I.nodeType===1&&!Jn(I)){const H=HU(t,I);if(H.isDefaultPrevented()||E.push({name:H.name,element:I}),H.isPropagationStopped())break}}return E};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Qe([Pt.config({mode:"flow",selector:"div[role=button]"}),Bt.config({disabled:a.isDisabled}),Rs(()=>a.checkUiComponentContext("any")),No.config({}),fn.config({}),un("elementPathEvents",[Ho((C,E)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Pt.focusIn(C)),t.on("NodeChange",D=>{const I=v(D.parents),H=I.length>0?p(I):[];fn.set(C,H)})})])]),components:[]}};var Sa;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(Sa||(Sa={}));const $c=(t,s,a,l,u)=>{const f={height:CS(l+s.top,W2(t),F4(t))};return a===Sa.Both&&(f.width=CS(u+s.left,Z2(t),j2(t))),f},s1=(t,s,a)=>{const l=ht.fromDom(t.getContainer()),u=$c(t,s,a,Vn(l),or(l));ze(u,(f,m)=>{_e(f)&&hn(l,m,L0(f))}),au(t)},tB=t=>{const s=Jv(t);return s===!1?Sa.None:s==="both"?Sa.Both:Sa.Vertical},$0=(t,s,a,l)=>{const f=ws(a*20,l*20);return s1(t,f,s),x.some(!0)},PA=(t,s)=>{const a=tB(t);if(a===Sa.None)return x.none();const l=a===Sa.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.",u=a===Sa.Both?"tox-statusbar__resize-cursor-both":"tox-statusbar__resize-cursor-default";return x.some(ui("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle",u],attributes:{"aria-label":s.translate(l),"data-mce-name":"resize-handle"},behaviours:[og.config({mode:"mouse",repositionTarget:!1,onDrag:(f,m,p)=>s1(t,p,a),blockerClass:"tox-blocker"}),Pt.config({mode:"special",onLeft:()=>$0(t,a,-1,0),onRight:()=>$0(t,a,1,0),onUp:()=>$0(t,a,0,-1),onDown:()=>$0(t,a,0,1)}),No.config({}),on.config({}),Qo.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},nB=(t,s)=>{const a=(l,u,f)=>fn.set(l,[Wo(s.translate(["{0} "+f,u[f]]))]);return Ar.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Qe([Fi.button(s.isDisabled),Rs(()=>s.checkUiComponentContext("any")),No.config({}),fn.config({}),Ct.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),un("wordcount-events",[Id(l=>{const u=Ct.getValue(l),f=u.mode==="words"?"characters":"words";Ct.setValue(l,{mode:f,count:u.count}),a(l,u.count,f)}),Ho(l=>{t.on("wordCountUpdate",u=>{const{mode:f}=Ct.getValue(l);Ct.setValue(l,{mode:f,count:u.wordCount}),a(l,u.wordCount,f)})})])]),eventOrder:{[nl()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},of=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",qt.trim()])},behaviours:Qe([on.config({})])}]}),l=()=>{const p=Z3("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Wo(Wl.translate(["Press {0} for help",p]))]}},u=()=>{const p=[];return t.hasPlugin("wordcount")&&p.push(nB(t,s)),H4(t)&&p.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:p}},f=()=>{const p=[],v=oR(t),C=eR(t),E=H4(t)||t.hasPlugin("wordcount"),D=()=>{const I="tox-statusbar__text-container--flex-start",H="tox-statusbar__text-container--flex-end",W="tox-statusbar__text-container--space-around";if(v){const Q="tox-statusbar__text-container-3-cols";return!E&&!C?[Q,W]:E&&!C?[Q,H]:[Q,I]}return[E&&!C?H:I]};return C&&p.push(ks(t,{},s)),v&&p.push(l()),E&&p.push(u()),p.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...D()]},components:p}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const p=f(),v=PA(t,s);return p.concat(v.toArray())})()}},NA=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),oB=(t,s)=>{const a=t.inline,l=a?wS:UG,u=Cp(t)?fj:XT,f=mi(),m=Gn(),p=Gn(),v=Gn(),I=ja().deviceType.isTouch()?["tox-platform-touch"]:[],H=Z4(t),W=hp(t),Q=ao({dom:{tag:"div",classes:["tox-anchorbar"]}}),se=ao({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),X=()=>f.mainUi.get().map(Ut=>Ut.outerContainer).bind(Bo.getHeader),ie=()=>xn.fromOption(f.dialogUi.get().map(Ut=>Ut.sink),"UI has not been rendered"),le=()=>xn.fromOption(f.popupUi.get().map(Ut=>Ut.sink),"(popup) UI has not been rendered"),xe=f.lazyGetInOuterOrDie("anchor bar",Q.getOpt),Re=f.lazyGetInOuterOrDie("bottom anchor bar",se.getOpt),vt=f.lazyGetInOuterOrDie("toolbar",Bo.getToolbar),Ke=f.lazyGetInOuterOrDie("throbber",Bo.getThrobber),Pe=lj({popup:le,dialog:ie},t,xe,Re),St=()=>{const Ut={attributes:{[uy]:H?Nd.BottomToTop:Nd.TopToBottom}},pn=Bo.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Pe.popup,onEscape:()=>{t.focus()}}),Eo=Bo.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Pe.popup.shared.getSink,providers:Pe.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:rd=>{VU(t,rd)},type:W,lazyToolbar:vt,lazyHeader:()=>X().getOrDie("Could not find header element"),...Ut}),bo=Bo.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Pe.popup.shared.providers,onEscape:()=>{t.focus()},type:W}),hi=bp(t),rs=Qv(t),dl=Nc(t),sa=nR(t),fl=Gt(sa),ml=hi||rs||dl,Hc=()=>hi?[bo]:rs?[Eo]:[],V0=[fl,pn];return Bo.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(ml?[]:["tox-editor-header--empty"]),...Ut},components:Yt([dl?V0:[],Hc(),yp(t)?[]:[Q.asSpec()]]),sticky:Cp(t),editor:t,sharedBackstage:Pe.popup.shared})},Gt=Ut=>Bo.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]},promotionLink:Ut}),Lt=()=>{const Ut=Bo.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),pn=Bo.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Ut,pn]}},Ln=()=>{const Ut=W4(t),pn=vo(Oa(),Ut)&&O(Ut,"display")==="grid",Eo={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(I),attributes:{...Wl.isRtl()?{dir:"rtl"}:{}}},behaviours:Qe([ba.config({useFixed:()=>u.isDocked(X)})])},bo={dom:{styles:{width:document.body.clientWidth+"px"}},events:Xo([Fe(Qc(),dl=>{hn(dl.element,"width",document.body.clientWidth+"px")})])},hi=va(ho(Eo,pn?bo:{})),rs=p2(hi);return p.set(rs),{sink:hi,mothership:rs}},ln=()=>{const Ut={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(I),attributes:{...Wl.isRtl()?{dir:"rtl"}:{}}},behaviours:Qe([ba.config({useFixed:()=>u.isDocked(X),getBounds:()=>s.getPopupSinkBounds()})])},pn=va(Ut),Eo=p2(pn);return v.set(Eo),{sink:pn,mothership:Eo}},bn=()=>{const Ut=St(),pn=Lt(),Eo=Bo.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Pe.popup}),bo=Bo.parts.viewWrapper({backstage:Pe.popup}),hi=q6(t)&&!a?x.some(of(t,Pe.popup.shared.providers)):x.none(),rs=Yt([H?[]:[Ut],a?[]:[pn],H?[Ut]:[]]),dl=Bo.parts.editorContainer({components:Yt([rs,a?[]:[se.asSpec()]])}),sa=j4(t),fl={role:"application",...Wl.isRtl()?{dir:"rtl"}:{},...sa?{"aria-hidden":"true"}:{}},ml=va(Bo.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(H?["tox-tinymce--toolbar-bottom"]:[]).concat(I),styles:{visibility:"hidden",...sa?{opacity:"0",border:"0"}:{}},attributes:fl},components:[dl,...a?[]:[bo,...hi.toArray()],Eo],behaviours:Qe([Rs(()=>Pe.popup.shared.providers.checkUiComponentContext("any")),Bt.config({disableClass:"tox-tinymce--disabled"}),Pt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Hc=p2(ml);return m.set(Hc),{mothership:Hc,outerContainer:ml}},Rt=Ut=>{const pn=L0(WG(t)),Eo=L0(jG(t));return t.inline||(Xe("div","width",Eo)&&hn(Ut.element,"width",Eo),Xe("div","height",pn)?hn(Ut.element,"height",pn):hn(Ut.element,"height","400px")),pn},Ze=Ut=>{t.addShortcut("alt+F9","focus menubar",()=>{Bo.focusMenubar(Ut)}),t.addShortcut("alt+F10","focus toolbar",()=>{Bo.focusToolbar(Ut)}),t.addCommand("ToggleToolbarDrawer",(pn,Eo)=>{Eo!=null&&Eo.skipFocus?Bo.toggleToolbarDrawerWithoutFocusing(Ut):Bo.toggleToolbarDrawer(Ut)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Bo.isToolbarDrawerToggled(Ut))},it=Ut=>{const{mainUi:pn,popupUi:Eo,uiMotherships:bo}=Ut;ot(j6(t),(Yg,LA)=>{t.ui.registry.addGroupToolbarButton(LA,Yg)});const{buttons:hi,menuItems:rs,contextToolbars:dl,sidebars:sa,views:fl}=t.ui.registry.getAll(),ml=U4(t),Hc={menuItems:rs,menus:aR(t),menubar:K6(t),toolbar:ml.getOrThunk(()=>Yv(t)),allowToolbarGroups:W===zl.floating,buttons:hi,sidebar:sa,views:fl};Ze(pn.outerContainer),Zp(t,pn.mothership,bo),u.setup(t,Pe.popup.shared,X),nt(t,Pe.popup),o1(t,Pe.popup.shared.getSink,Pe.popup),iI(t),Aj(t,Ke,Pe.popup.shared),_(t,dl,Eo.sink,{backstage:Pe.popup}),st(t,Eo.sink);const V0=t.getElement(),rd=Rt(pn.outerContainer),BA={targetNode:V0,height:rd};return l.render(t,Ut,Hc,Pe.popup,BA)},Qt=Ut=>(v.set(Ut.mothership),Ut),yn=()=>{const Ut=bn(),pn=Ln(),Eo=Kf(t)?ln():Qt(pn);f.dialogUi.set(pn),f.popupUi.set(Eo),f.mainUi.set(Ut);const bo={popupUi:Eo,dialogUi:pn,mainUi:Ut,uiMotherships:f.getUiMotherships()};return it(bo)};return{popups:{backstage:Pe.popup,getMothership:()=>NA("popups",v)},dialogs:{backstage:Pe.dialog,getMothership:()=>NA("dialogs",p)},renderUI:yn}},IA=t=>{const s=[],a={};return ze(t,(l,u)=>{l.fold(()=>{s.push(u)},f=>{a[u]=f})}),s.length>0?xn.error(s):xn.value(a)},sB=(t,s,a,l)=>{const u=ao(hg.sketch(f=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Le(t.items,m=>M8(f,m,s,a,l))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[u.asSpec()]}],behaviours:Qe([Pt.config({mode:"acyclic",useTabstopAt:ye(T0)}),Yl.memento(u),OZ(u,{postprocess:f=>IA(f).fold(m=>(console.error(m),{}),lt)}),un("dialog-body-panel",[Fe(ga(),(f,m)=>{f.getSystem().broadcastOn([A0],{newFocus:x.some(m.event.target)})})])])}},oK=(t,s,a)=>Le(t,(l,u)=>{fn.set(a,t[u].view());const f=s.dom.getBoundingClientRect();return fn.set(a,[]),f.height}),Wn=t=>Ns(yi(t,(s,a)=>s>a?-1:s<a?1:0)),Oe=(t,s,a)=>{const l=Si(t).dom,u=fc(t,".tox-dialog-wrap").getOr(t),f=O(u,"position")==="fixed";let m;f?m=Math.max(l.clientHeight,window.innerHeight):m=Math.max(l.offsetHeight,l.scrollHeight);const p=Vn(s),C=s.dom.offsetLeft>=a.dom.offsetLeft+or(a)?Math.max(Vn(a),p):p,E=parseInt(O(t,"margin-top"),10)||0,D=parseInt(O(t,"margin-bottom"),10)||0,H=Vn(t)+E+D-C;return m-H},zt=(t,s)=>{Ns(t).each(a=>Uf.showTab(s,a.value))},kn=(t,s)=>{hn(t,"height",s+"px"),hn(t,"flex-basis",s+"px")},Is=(t,s,a)=>{fc(t,'[role="dialog"]').each(l=>{Ro(l,'[role="tablist"]').each(u=>{a.get().map(f=>(hn(s,"height","0"),hn(s,"flex-basis","0"),Math.min(f,Oe(l,s,u)))).each(f=>{kn(s,f)})})})},Fa=t=>Ro(t,'[role="tabpanel"]'),_a=t=>{const s=Gn();return{extraEvents:[Ho(u=>{const f=u.element;Fa(f).each(m=>{hn(m,"visibility","hidden"),u.getSystem().getByDom(m).toOptional().each(p=>{const v=oK(t,m,p);Wn(v).fold(s.clear,s.set)}),Is(f,m,s),ft(m,"visibility"),zt(t,u),requestAnimationFrame(()=>{Is(f,m,s)})})}),Fe(Qc(),u=>{const f=u.element;Fa(f).each(m=>{Is(f,m,s)})}),Fe(BC,(u,f)=>{const m=u.element;Fa(m).each(p=>{const v=cc(fr(p));hn(p,"visibility","hidden");const C=Y(p,"height").map(I=>parseInt(I,10));ft(p,"height"),ft(p,"flex-basis");const E=p.dom.getBoundingClientRect().height;C.forall(I=>E>I)?(s.set(E),Is(m,p,s)):C.each(I=>{kn(p,I)}),ft(p,"visibility"),v.each(Fs)})})],selectFirst:!1}},_i="send-data-to-section",du="send-data-to-view",H0=(t,s,a,l)=>{const u=Dt({}),f=E=>{const D=Ct.getValue(E),I=IA(D).getOr({}),H=u.get(),W=ho(H,I);u.set(W)},m=E=>{const D=u.get();Ct.setValue(E,D)},p=Dt(null),v=Le(t.tabs,E=>({value:E.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Wo(a.shared.providers.translate(E.title))],view:()=>[hg.sketch(D=>({dom:{tag:"div",classes:["tox-form"]},components:Le(E.items,I=>M8(D,I,s,a,l)),formBehaviours:Qe([Pt.config({mode:"acyclic",useTabstopAt:ye(T0)}),un("TabView.form.events",[Ho(m),qc(f)]),Xa.config({channels:Th([{key:_i,value:{onReceive:f}},{key:du,value:{onReceive:m}}])})])}))]})),C=_a(v);return Uf.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(E,D,I)=>{const H=Ct.getValue(D);Zt(E,UN,{name:H,oldName:p.get()}),p.set(H)},tabs:v,components:[Uf.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[P6.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Qe([No.config({})])}),Uf.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:C.selectFirst,tabSectionBehaviours:Qe([un("tabpanel",C.extraEvents),Pt.config({mode:"acyclic"}),Zn.config({find:E=>Ns(Uf.getViewItems(E))}),$g(x.none(),E=>(E.getSystem().broadcastOn([_i],{}),u.get()),(E,D)=>{u.set(D),E.getSystem().broadcastOn([du],{})})])})},$a=(t,s,a,l,u,f)=>{const m=C=>{const E=C.body;switch(E.type){case"tabpanel":return[H0(E,C.initialData,l,f)];default:return[sB(E,C.initialData,l,f)]}},p=(C,E)=>x.some({isTabPanel:()=>E.body.type==="tabpanel"}),v={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(C=>({id:C})).getOr({}),...u?v:{}}},components:[],behaviours:Qe([Yl.childAt(0),Mi.config({channel:`${e8}-${s}`,updateState:p,renderComponents:m,initialData:t})])}},sK=(t,s,a,l,u,f)=>$a(t,s,x.some(a),l,u,f),rB=(t,s,a,l)=>{const u=$a(t,s,x.none(),a,!1,l);return ir.parts.body(u)},aB=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[QN(x.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Qe([No.config({}),on.config({})])})]}],behaviours:Qe([Pt.config({mode:"acyclic",useTabstopAt:ye(T0)})])};return ir.parts.body(s)},MJ=Gd.deviceType.isTouch(),iX=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),lX=(t,s)=>ir.parts.close(Ar.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:Qe([No.config({})])})),cX=()=>ir.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),uX=(t,s)=>ir.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Gu(`<p>${ER(s.translate(t))}</p>`)}]}]}),dX=t=>ir.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),fX=(t,s)=>[$l.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),$l.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],rK=t=>{const s="tox-dialog",a=s+"-wrap",l=a+"__backdrop",u=s+"__disable-scroll";return ir.sketch({lazySink:t.lazySink,onEscape:f=>(t.onEscape(f),x.some(!0)),useTabstopAt:f=>!T0(f),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:Gu(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:MJ?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:a,modalBehaviours:Qe([on.config({}),un("dialog-events",t.dialogEvents.concat([$h(ga(),(f,m)=>{Oc.isBlocked(f)?q():Pt.focusIn(f)}),Fe(Tf(),(f,m)=>{f.getSystem().broadcastOn([A0],{newFocus:m.event.newFocus})})])),un("scroll-lock",[Ho(()=>{Es(Oa(),u)}),qc(()=>{Ko(Oa(),u)})]),...t.extraBehaviours]),eventOrder:{[nl()]:["dialog-events"],[Dl()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[_u()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},mX=t=>Ar.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:Qe([No.config({}),Qo.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[ui("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{Un(s,em)}}),gX=(t,s,a,l)=>{const u=f=>[Wo(l.translate(f.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(f=>({id:f})).getOr({})}},components:[],behaviours:Qe([Mi.config({channel:`${qN}-${s}`,initialData:t,renderComponents:u})])}},hX=()=>({dom:Gu('<div class="tox-dialog__draghandle"></div>')}),RJ=(t,s,a,l)=>$l.sketch({dom:Gu('<div class="tox-dialog__header"></div>'),components:[gX(t,s,x.some(a),l),hX(),mX(l)],containerBehaviours:Qe([og.config({mode:"mouse",blockerClass:"blocker",getTarget:u=>Ru(u,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"},onDrag:(u,f)=>{u.getSystem().broadcastOn([Vf()],{target:f})}})])}),PJ=(t,s,a)=>{const l=ir.parts.title(gX(t,s,x.none(),a)),u=ir.parts.draghandle(hX()),f=ir.parts.close(mX(a)),m=[l].concat(t.draggable?[u]:[]).concat([f]);return $l.sketch({dom:Gu('<div class="tox-dialog__header"></div>'),components:m})},pX=(t,s,a)=>PJ({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),vX=(t,s,a,l)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${l.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:Gu('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),bX=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:l=>{const u=Ro(t().element,".tox-dialog__header").map(f=>Vn(f));ir.setBusy(t(),(f,m)=>vX(l.message,m,s,u))},onUnblock:()=>{ir.setIdle(t())}}),yX="tox-dialog--fullscreen",aK="tox-dialog--width-lg",iK="tox-dialog--width-md",iB=t=>{switch(t){case"large":return x.some(aK);case"medium":return x.some(iK);default:return x.none()}},CX=(t,s)=>{const a=ht.fromDom(s.element.dom);Qr(a,yX)||(Qi(a,[aK,iK]),iB(t).each(l=>Es(a,l)))},SX=(t,s)=>{const a=ht.fromDom(t.element.dom),l=Cd(a),u=Ft(l,f=>f===aK||f===iK).or(iB(s));FB(a,[yX,...u.toArray()])},xX=(t,s,a)=>va(rK({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[x0({}),...t.extraBehaviours],onEscape:l=>{Un(l,em)},dialogEvents:s,eventOrder:{[Bm()]:[Mi.name(),Xa.name()],[Dl()]:["scroll-lock",Mi.name(),"messages","dialog-events","alloy.base.behaviour"],[_u()]:["alloy.base.behaviour","dialog-events","messages",Mi.name(),"scroll-lock"]}})),lK=(t,s={})=>{const a=l=>{const u=Le(l.items,f=>{const m=Be(s,f.name).getOr(Dt(!1));return{...f,storage:m}});return{...l,items:u}};return Le(t,l=>l.type==="menu"?a(l):l)},wX=t=>Fo(t,(s,a)=>a.type==="menu"?Fo(a.items,(u,f)=>(u[f.name]=f.storage,u),s):s,{}),EX=(t,s)=>[my(ga(),FZ),t(C0,(a,l,u,f)=>{ku(f.element)&&cc(fr(f.element)).each(Tl),s.onClose(),l.onClose()}),t(em,(a,l,u,f)=>{l.onCancel(a),Un(f,C0)}),Fe(S0,(a,l)=>s.onUnblock()),Fe(pT,(a,l)=>s.onBlock(l.event))],NJ=(t,s)=>{const a=(u,f)=>Fe(u,(m,p)=>{l(m,(v,C)=>{f(t(),v,p.event,m)})}),l=(u,f)=>{Mi.getState(u).get().each(m=>{f(m,u)})};return[...EX(a,s),a(td,(u,f,m)=>{f.onAction(u,{name:m.name})})]},TX=(t,s,a)=>{const l=(f,m)=>Fe(f,(p,v)=>{u(p,(C,E)=>{m(t(),C,v.event,p)})}),u=(f,m)=>{Mi.getState(f).get().each(p=>{m(p.internalDialog,f)})};return[...EX(l,s),l(_g,(f,m)=>m.onSubmit(f)),l(qa,(f,m,p)=>{m.onChange(f,{name:p.name})}),l(td,(f,m,p,v)=>{const C=()=>v.getSystem().isConnected()?Pt.focusIn(v):void 0,E=H=>b1(H,"disabled")||tr(H,"aria-disabled").exists(W=>W==="true"),D=fr(v.element),I=cc(D);m.onAction(f,{name:p.name,value:p.value}),cc(D).fold(C,H=>{E(H)||I.exists(W=>hm(H,W)&&E(W))?C():a().toOptional().filter(W=>!hm(W.element,H)).each(C)})}),l(UN,(f,m,p)=>{m.onTabChange(f,{newTabName:p.name,oldTabName:p.oldName})}),qc(f=>{const m=t();Ct.setValue(f,m.getData())})]},IJ=(t,s)=>O0(t,t.type,s),BJ=(t,s,a)=>Ft(s,l=>l.name===a).bind(l=>l.memento.getOpt(t)),LJ=(t,s)=>{const a=s.map(p=>p.footerButtons).getOr([]),l=Ps(a,p=>p.align==="start"),u=(p,v)=>$l.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${p}`]},components:Le(v,C=>C.memento.asSpec())}),f=u("start",l.pass),m=u("end",l.fail);return[f,m]},AX=(t,s,a)=>{const l=(u,f)=>{const m=Le(f.buttons,v=>{const C=ao(IJ(v,a));return{name:v.name,align:v.align,memento:C}}),p=v=>BJ(u,m,v);return x.some({lookupByName:p,footerButtons:m})};return{dom:Gu('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Qe([Mi.config({channel:`${t8}-${s}`,initialData:t,updateState:l,renderComponents:LJ})])}},FJ=(t,s,a)=>AX(t,s,a),OX=(t,s,a)=>ir.parts.footer(AX(t,s,a)),lB=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const l=Zn.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return hg.getField(l,s).orThunk(()=>t.getFooter().bind(m=>Mi.getState(m).get()).bind(m=>m.lookupByName(s)))}else return x.none()},_J=(t,s)=>{const a=t.getRoot();return Mi.getState(a).get().map(l=>kl(ps("data",l.dataValidator,s))).getOr(s)},kX=(t,s,a)=>{const l=W=>{const Q=t.getRoot();Q.getSystem().isConnected()&&W(Q)},H={getData:()=>{const W=t.getRoot(),Q=W.getSystem().isConnected()?t.getFormWrapper():W,se=Ct.getValue(Q),X=ot(a,ie=>ie.get());return{...se,...X}},setData:W=>{l(Q=>{const se=H.getData(),X=ho(se,W),ie=_J(t,X),le=t.getFormWrapper();Ct.setValue(le,ie),ze(a,(xe,Re)=>{_t(X,Re)&&xe.set(X[Re])})})},setEnabled:(W,Q)=>{lB(t,W).each(Q?Bt.enable:Bt.disable)},focus:W=>{lB(t,W).each(on.focus)},block:W=>{if(!B(W))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(Q=>{Zt(Q,pT,{message:W})})},unblock:()=>{l(W=>{Un(W,S0)})},showTab:W=>{l(Q=>{const se=t.getBody();Mi.getState(se).get().exists(ie=>ie.isTabPanel())&&Zn.getCurrent(se).each(ie=>{Uf.showTab(ie,W)})})},redial:W=>{l(Q=>{const se=t.getId(),X=s(W),ie=lK(X.internalDialog.buttons,a);Q.getSystem().broadcastOn([`${FC}-${se}`],X),Q.getSystem().broadcastOn([`${qN}-${se}`],X.internalDialog),Q.getSystem().broadcastOn([`${e8}-${se}`],X.internalDialog),Q.getSystem().broadcastOn([`${t8}-${se}`],{...X.internalDialog,buttons:ie}),H.setData(X.initialData)})},close:()=>{l(W=>{Un(W,C0)})},toggleFullscreen:t.toggleFullscreen};return H},$J=(t,s,a)=>{const l=yt("dialog"),u=t.internalDialog,f=pX(u.title,l,a),m=Dt(u.size),p=le=>lB(X,le),v=iB(m.get()).toArray(),C=(le,xe)=>(m.set(xe.internalDialog.size),CX(xe.internalDialog.size,le),x.some(xe)),E=rB({body:u.body,initialData:u.initialData},l,a,p),D=lK(u.buttons),I=wX(D),H=Kr(D.length!==0,OX({buttons:D},l,a)),W=TX(()=>ie,bX(()=>se,a.shared.providers,s),a.shared.getSink),Q={id:l,header:f,body:E,footer:H,extraClasses:v,extraBehaviours:[Mi.config({channel:`${FC}-${l}`,updateState:C,initialData:t})],extraStyles:{}},se=xX(Q,W,a),X=(()=>{const le=()=>{const Re=ir.getBody(se);return Zn.getCurrent(Re).getOr(Re)},xe=()=>{SX(se,m.get())};return{getId:te(l),getRoot:te(se),getBody:()=>ir.getBody(se),getFooter:()=>ir.getFooter(se),getFormWrapper:le,toggleFullscreen:xe}})(),ie=kX(X,s.redial,I);return{dialog:se,instanceApi:ie}},DX=(t,s,a,l=!1,u)=>{const f=yt("dialog"),m=yt("dialog-label"),p=yt("dialog-content"),v=t.internalDialog,C=St=>lB(Ke,St),E=Dt(v.size),D=iB(E.get()).toArray(),I=(St,Gt)=>(E.set(Gt.internalDialog.size),CX(Gt.internalDialog.size,St),u(),x.some(Gt)),H=ao(RJ({title:v.title,draggable:!0},f,m,a.shared.providers)),W=ao(sK({body:v.body,initialData:v.initialData},f,p,a,l,C)),Q=lK(v.buttons),se=wX(Q),X=Kr(Q.length!==0,ao(FJ({buttons:Q},f,a))),ie=TX(()=>Pe,{onBlock:St=>{Oc.block(Re,(Gt,Lt)=>{const Ln=H.getOpt(Re).map(ln=>Vn(ln.element));return vX(St.message,Lt,a.shared.providers,Ln)})},onUnblock:()=>{Oc.unblock(Re)},onClose:()=>s.closeWindow()},a.shared.getSink),le="tox-dialog-inline",xe=ja().os,Re=va({dom:{tag:"div",classes:["tox-dialog",le,...D],attributes:{role:"dialog",...xe.isMacOS()?{"aria-label":v.title}:{"aria-labelledby":m}}},eventOrder:{[Bm()]:[Mi.name(),Xa.name()],[nl()]:["execute-on-form"],[Dl()]:["reflecting","execute-on-form"]},behaviours:Qe([Pt.config({mode:"cyclic",onEscape:St=>(Un(St,C0),x.some(!0)),useTabstopAt:St=>!T0(St)&&(xl(St)!=="button"||er(St,"disabled")!=="disabled"),firstTabstop:1}),Mi.config({channel:`${FC}-${f}`,updateState:I,initialData:t}),on.config({}),un("execute-on-form",ie.concat([$h(ga(),(St,Gt)=>{Pt.focusIn(St)}),Fe(Tf(),(St,Gt)=>{St.getSystem().broadcastOn([A0],{newFocus:Gt.event.newFocus})})])),Oc.config({getRoot:()=>x.some(Re)}),fn.config({}),x0({})]),components:[H.asSpec(),W.asSpec(),...X.map(St=>St.asSpec()).toArray()]}),vt=()=>{SX(Re,E.get())},Ke={getId:te(f),getRoot:te(Re),getFooter:()=>X.map(St=>St.get(Re)),getBody:()=>W.get(Re),getFormWrapper:()=>{const St=W.get(Re);return Zn.getCurrent(St).getOr(St)},toggleFullscreen:vt},Pe=kX(Ke,s.redial,se);return{dialog:Re,instanceApi:Pe}};var cK=tinymce.util.Tools.resolve("tinymce.util.URI");const HJ=t=>{const s=m=>{t.getSystem().isConnected()&&m(t)};return{block:m=>{if(!B(m))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(p=>{Zt(p,pT,{message:m})})},unblock:()=>{s(m=>{Un(m,S0)})},close:()=>{s(m=>{Un(m,C0)})},sendMessage:m=>{s(p=>{p.getSystem().broadcastOn([n8],m)})}}},VJ=["insertContent","setContent","execCommand","close","block","unblock"],MX=t=>k(t)&&VJ.indexOf(t.mceAction)!==-1,zJ=t=>!MX(t)&&k(t)&&_t(t,"mceAction"),UJ=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const l=re(a.ui)?a.ui:!1;t.execCommand(a.cmd,l,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},ZJ=(t,s,a,l)=>{const u=yt("dialog"),f=pX(t.title,u,l),m=aB(t),p=t.buttons.bind(le=>le.length===0?x.none():x.some(OX({buttons:le},u,l))),v=NJ(()=>ie,bX(()=>X,l.shared.providers,s)),C={...t.height.fold(()=>({}),le=>({height:le+"px","max-height":le+"px"})),...t.width.fold(()=>({}),le=>({width:le+"px","max-width":le+"px"}))},E=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],D=new cK(t.url,{base_uri:new cK(window.location.href)}),I=`${D.protocol}://${D.host}${D.port?":"+D.port:""}`,H=ns(),W=(le,xe)=>x.some(xe),Q=[Mi.config({channel:`${FC}-${u}`,updateState:W,initialData:t}),un("messages",[Ho(()=>{const le=xr(ht.fromDom(window),"message",xe=>{if(D.isSameOrigin(new cK(xe.raw.origin))){const Re=xe.raw.data;MX(Re)?UJ(a,ie,Re):zJ(Re)&&t.onMessage(ie,Re)}});H.set(le)}),qc(H.clear)]),Xa.config({channels:{[n8]:{onReceive:(le,xe)=>{Ro(le.element,"iframe").each(Re=>{const vt=Re.dom.contentWindow;me(vt)&&vt.postMessage(xe,I)})}}}})],X=xX({id:u,header:f,body:m,footer:p,extraClasses:E,extraBehaviours:Q,extraStyles:C},v,l),ie=HJ(X);return{dialog:X,instanceApi:ie}},WJ=t=>{const s=t.shared;return{open:(l,u)=>{const f=()=>{ir.hide(C),u()},m=ao(O0({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:x.some("primary"),align:"end",enabled:!0,icon:x.none()},"cancel",t)),p=cX(),v=lX(f,s.providers),C=va(rK({lazySink:()=>s.getSink(),header:iX(p,v),body:uX(l,s.providers),footer:x.some(dX(fX([],[m.asSpec()]))),onEscape:f,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Fe(em,f)],eventOrder:{}}));ir.show(C);const E=m.get(C);on.focus(E)}}},jJ=t=>{const s=t.shared;return{open:(l,u)=>{const f=I=>{ir.hide(E),u(I)},m=ao(O0({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:x.some("primary"),align:"end",enabled:!0,icon:x.none()},"submit",t)),p=O0({context:"any",name:"no",text:"No",primary:!1,buttonType:x.some("secondary"),align:"end",enabled:!0,icon:x.none()},"cancel",t),v=cX(),C=lX(()=>f(!1),s.providers),E=va(rK({lazySink:()=>s.getSink(),header:iX(v,C),body:uX(l,s.providers),footer:x.some(dX(fX([],[p,m.asSpec()]))),onEscape:()=>f(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Fe(em,()=>f(!1)),Fe(_g,()=>f(!0))],eventOrder:{}}));ir.show(E);const D=m.get(E);on.focus(D)}}},RX=(t,s)=>kl(ps("data",s,t)),PX=t=>w1(t,".tox-alert-dialog")||w1(t,".tox-confirm-dialog"),GJ=(t,s,a,l)=>s&&a?[]:[Jo.config({contextual:{lazyContext:()=>x.some($r(ht.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition",onHide:l},modes:["top"],lazyViewport:u=>Yf(t,u.element).map(m=>({bounds:Sg(m),optScrollEnv:x.some({currentScrollTop:m.element.dom.scrollTop,scrollElmTop:dc(m.element).top})})).getOrThunk(()=>({bounds:ma(),optScrollEnv:x.none()}))})],KJ=t=>{const s=t.editor,a=Cp(s),l=WJ(t.backstages.dialog),u=jJ(t.backstages.dialog),f=(W,Q,se)=>{if(!ce(Q)){if(Q.inline==="toolbar")return C(W,t.backstages.popup.shared.anchors.inlineDialog(),se,Q);if(Q.inline==="bottom")return E(W,t.backstages.popup.shared.anchors.inlineBottomDialog(),se,Q);if(Q.inline==="cursor")return C(W,t.backstages.popup.shared.anchors.cursor(),se,Q)}return v(W,se)},m=(W,Q)=>p(W,Q),p=(W,Q)=>{const se=X=>{const ie=ZJ(X,{closeWindow:()=>{ir.hide(ie.dialog),Q(ie.instanceApi)}},s,t.backstages.dialog);return ir.show(ie.dialog),ie.instanceApi};return Qd.openUrl(se,W)},v=(W,Q)=>{const se=(X,ie,le)=>{const xe=ie,vt=$J({dataValidator:le,initialData:xe,internalDialog:X},{redial:Qd.redial,closeWindow:()=>{ir.hide(vt.dialog),Q(vt.instanceApi)}},t.backstages.dialog);return ir.show(vt.dialog),vt.instanceApi.setData(xe),vt.instanceApi};return Qd.open(se,W)},C=(W,Q,se,X)=>{const ie=(le,xe,Re)=>{const vt=RX(xe,Re),Ke=Gn(),Pe=t.backstages.popup.shared.header.isPositionedAtTop(),St={dataValidator:Re,initialData:vt,internalDialog:le},Gt=()=>Ke.on(Ze=>{qo.reposition(Ze),(!a||!Pe)&&Jo.refresh(Ze)}),Lt=DX(St,{redial:Qd.redial,closeWindow:()=>{Ke.on(qo.hide),s.off("ResizeEditor",Gt),s.off("ScrollWindow",Ln),Ke.clear(),se(Lt.instanceApi)}},t.backstages.popup,X.ariaAttrs,Gt),Ln=()=>Lt.dialog.getSystem().broadcastOn([Vf()],{target:Lt.dialog.element}),ln=()=>Lt.dialog.getSystem().broadcastOn([Ku()],{target:Lt.dialog.element}),bn=va(qo.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:X.persistent?{event:"doNotDismissYet"}:{},...Pe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Qe([un("window-manager-inline-events",[Fe(Ed(),(Ze,it)=>{Un(Lt.dialog,em)})]),...GJ(s,a,Pe,ln)]),isExtraPart:(Ze,it)=>PX(it)}));Ke.set(bn);const Rt=()=>{const Ze=s.inline?Oa():ht.fromDom(s.getContainer()),it=$r(Ze);return x.some(it)};return qo.showWithinBounds(bn,ol(Lt.dialog),{anchor:Q},Rt),(!a||!Pe)&&(Jo.refresh(bn),s.on("ResizeEditor",Gt)),s.on("ScrollWindow",Ln),Lt.instanceApi.setData(vt),Pt.focusIn(Lt.dialog),Lt.instanceApi};return Qd.open(ie,W)},E=(W,Q,se,X)=>{const ie=(le,xe,Re)=>{const vt=RX(xe,Re),Ke=Gn(),Pe=t.backstages.popup.shared.header.isPositionedAtTop(),St={dataValidator:Re,initialData:vt,internalDialog:le},Gt=()=>Ke.on(bn=>{qo.reposition(bn),Jo.refresh(bn)}),Lt=DX(St,{redial:Qd.redial,closeWindow:()=>{Ke.on(qo.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Gt),Ke.clear(),se(Lt.instanceApi)}},t.backstages.popup,X.ariaAttrs,Gt),Ln=va(qo.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:X.persistent?{event:"doNotDismissYet"}:{},...Pe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Qe([un("window-manager-inline-events",[Fe(Ed(),(bn,Rt)=>{Un(Lt.dialog,em)})]),Jo.config({contextual:{lazyContext:()=>x.some($r(ht.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:bn=>Yf(s,bn.element).map(Ze=>({bounds:Sg(Ze),optScrollEnv:x.some({currentScrollTop:Ze.element.dom.scrollTop,scrollElmTop:dc(Ze.element).top})})).getOrThunk(()=>({bounds:ma(),optScrollEnv:x.none()}))})]),isExtraPart:(bn,Rt)=>PX(Rt)}));Ke.set(Ln);const ln=()=>t.backstages.popup.shared.getSink().toOptional().bind(bn=>{const Rt=Yf(s,bn.element),Ze=15,it=Rt.map(Ut=>Sg(Ut)).getOr(ma()),Qt=$r(ht.fromDom(s.getContentAreaContainer())),yn=Ob(Qt,it);return x.some($s(yn.x,yn.y,yn.width,yn.height-Ze))});return qo.showWithinBounds(Ln,ol(Lt.dialog),{anchor:Q},ln),Jo.refresh(Ln),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Gt),Lt.instanceApi.setData(vt),Pt.focusIn(Lt.dialog),Lt.instanceApi};return Qd.open(ie,W)};return{open:f,openUrl:m,alert:(W,Q)=>{l.open(W,Q)},close:W=>{W.close()},confirm:(W,Q)=>{u.open(W,Q)}}},YJ=t=>{$6(t),jU(t),$n(t)};var XJ=()=>{rV.add("silver",t=>{YJ(t);let s=()=>ma();const{dialogs:a,popups:l,renderUI:u}=oB(t,{getPopupSinkBounds:()=>s()}),f=()=>{const E=u();return Yf(t,l.getMothership().element).each(I=>{s=()=>Sg(I)}),E};yZ.register(t,l.backstage.shared);const m=KJ({editor:t,backstages:{popup:l.backstage,dialog:a.backstage}}),p=Gn(),v=()=>l3(t,{backstage:l.backstage},l.getMothership(),p),C=()=>Ro(ht.fromDom(t.getContainer()),".tox-promotion").map(E=>E.dom).getOrNull();return{renderUI:f,getWindowManagerImpl:te(m),getNotificationManagerImpl:v,getPromotionElement:C}})};XJ()})();var vJ={exports:{}};const Wee=cJ(Uee);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function JX(U,w){var F=Object.keys(U);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(U);w&&(T=T.filter(function(P){return Object.getOwnPropertyDescriptor(U,P).enumerable})),F.push.apply(F,T)}return F}function lm(U){for(var w=1;w<arguments.length;w++){var F=arguments[w]!=null?arguments[w]:{};w%2?JX(Object(F),!0).forEach(function(T){jee(U,T,F[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(F)):JX(Object(F)).forEach(function(T){Object.defineProperty(U,T,Object.getOwnPropertyDescriptor(F,T))})}return U}function xB(U){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xB=function(w){return typeof w}:xB=function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},xB(U)}function jee(U,w,F){return w in U?Object.defineProperty(U,w,{value:F,enumerable:!0,configurable:!0,writable:!0}):U[w]=F,U}function ld(){return ld=Object.assign||function(U){for(var w=1;w<arguments.length;w++){var F=arguments[w];for(var T in F)Object.prototype.hasOwnProperty.call(F,T)&&(U[T]=F[T])}return U},ld.apply(this,arguments)}function Gee(U,w){if(U==null)return{};var F={},T=Object.keys(U),P,j;for(j=0;j<T.length;j++)P=T[j],!(w.indexOf(P)>=0)&&(F[P]=U[P]);return F}function Kee(U,w){if(U==null)return{};var F=Gee(U,w),T,P;if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(U);for(P=0;P<j.length;P++)T=j[P],!(w.indexOf(T)>=0)&&Object.prototype.propertyIsEnumerable.call(U,T)&&(F[T]=U[T])}return F}function Yee(U){return Xee(U)||Jee(U)||Qee(U)||qee()}function Xee(U){if(Array.isArray(U))return RK(U)}function Jee(U){if(typeof Symbol<"u"&&U[Symbol.iterator]!=null||U["@@iterator"]!=null)return Array.from(U)}function Qee(U,w){if(U){if(typeof U=="string")return RK(U,w);var F=Object.prototype.toString.call(U).slice(8,-1);if(F==="Object"&&U.constructor&&(F=U.constructor.name),F==="Map"||F==="Set")return Array.from(U);if(F==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(F))return RK(U,w)}}function RK(U,w){(w==null||w>U.length)&&(w=U.length);for(var F=0,T=new Array(w);F<w;F++)T[F]=U[F];return T}function qee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ete="1.14.0";function Qg(U){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(U)}var qg=Qg(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),tO=Qg(/Edge/i),QX=Qg(/firefox/i),XA=Qg(/safari/i)&&!Qg(/chrome/i)&&!Qg(/android/i),bJ=Qg(/iP(ad|od|hone)/i),tte=Qg(/chrome/i)&&Qg(/android/i),yJ={capture:!1,passive:!1};function es(U,w,F){U.addEventListener(w,F,!qg&&yJ)}function Vo(U,w,F){U.removeEventListener(w,F,!qg&&yJ)}function OB(U,w){if(w){if(w[0]===">"&&(w=w.substring(1)),U)try{if(U.matches)return U.matches(w);if(U.msMatchesSelector)return U.msMatchesSelector(w);if(U.webkitMatchesSelector)return U.webkitMatchesSelector(w)}catch{return!1}return!1}}function nte(U){return U.host&&U!==document&&U.host.nodeType?U.host:U.parentNode}function af(U,w,F,T){if(U){F=F||document;do{if(w!=null&&(w[0]===">"?U.parentNode===F&&OB(U,w):OB(U,w))||T&&U===F)return U;if(U===F)break}while(U=nte(U))}return null}var qX=/\s+/g;function Zr(U,w,F){if(U&&w)if(U.classList)U.classList[F?"add":"remove"](w);else{var T=(" "+U.className+" ").replace(qX," ").replace(" "+w+" "," ");U.className=(T+(F?" "+w:"")).replace(qX," ")}}function Nn(U,w,F){var T=U&&U.style;if(T){if(F===void 0)return document.defaultView&&document.defaultView.getComputedStyle?F=document.defaultView.getComputedStyle(U,""):U.currentStyle&&(F=U.currentStyle),w===void 0?F:F[w];!(w in T)&&w.indexOf("webkit")===-1&&(w="-webkit-"+w),T[w]=F+(typeof F=="string"?"":"px")}}function W0(U,w){var F="";if(typeof U=="string")F=U;else do{var T=Nn(U,"transform");T&&T!=="none"&&(F=T+" "+F)}while(!w&&(U=U.parentNode));var P=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return P&&new P(F)}function CJ(U,w,F){if(U){var T=U.getElementsByTagName(w),P=0,j=T.length;if(F)for(;P<j;P++)F(T[P],P);return T}return[]}function im(){var U=document.scrollingElement;return U||document.documentElement}function Mr(U,w,F,T,P){if(!(!U.getBoundingClientRect&&U!==window)){var j,S,B,k,z,K,J;if(U!==window&&U.parentNode&&U!==im()?(j=U.getBoundingClientRect(),S=j.top,B=j.left,k=j.bottom,z=j.right,K=j.height,J=j.width):(S=0,B=0,k=window.innerHeight,z=window.innerWidth,K=window.innerHeight,J=window.innerWidth),(w||F)&&U!==window&&(P=P||U.parentNode,!qg))do if(P&&P.getBoundingClientRect&&(Nn(P,"transform")!=="none"||F&&Nn(P,"position")!=="static")){var re=P.getBoundingClientRect();S-=re.top+parseInt(Nn(P,"border-top-width")),B-=re.left+parseInt(Nn(P,"border-left-width")),k=S+j.height,z=B+j.width;break}while(P=P.parentNode);if(T&&U!==window){var ce=W0(P||U),fe=ce&&ce.a,me=ce&&ce.d;ce&&(S/=me,B/=fe,J/=fe,K/=me,k=S+K,z=B+J)}return{top:S,left:B,bottom:k,right:z,width:J,height:K}}}function eJ(U,w,F){for(var T=l1(U,!0),P=Mr(U)[w];T;){var j=Mr(T)[F],S=void 0;if(S=P>=j,!S)return T;if(T===im())break;T=l1(T,!1)}return!1}function LS(U,w,F,T){for(var P=0,j=0,S=U.children;j<S.length;){if(S[j].style.display!=="none"&&S[j]!==co.ghost&&(T||S[j]!==co.dragged)&&af(S[j],F.draggable,U,!1)){if(P===w)return S[j];P++}j++}return null}function LK(U,w){for(var F=U.lastElementChild;F&&(F===co.ghost||Nn(F,"display")==="none"||w&&!OB(F,w));)F=F.previousElementSibling;return F||null}function la(U,w){var F=0;if(!U||!U.parentNode)return-1;for(;U=U.previousElementSibling;)U.nodeName.toUpperCase()!=="TEMPLATE"&&U!==co.clone&&(!w||OB(U,w))&&F++;return F}function tJ(U){var w=0,F=0,T=im();if(U)do{var P=W0(U),j=P.a,S=P.d;w+=U.scrollLeft*j,F+=U.scrollTop*S}while(U!==T&&(U=U.parentNode));return[w,F]}function ote(U,w){for(var F in U)if(U.hasOwnProperty(F)){for(var T in w)if(w.hasOwnProperty(T)&&w[T]===U[F][T])return Number(F)}return-1}function l1(U,w){if(!U||!U.getBoundingClientRect)return im();var F=U,T=!1;do if(F.clientWidth<F.scrollWidth||F.clientHeight<F.scrollHeight){var P=Nn(F);if(F.clientWidth<F.scrollWidth&&(P.overflowX=="auto"||P.overflowX=="scroll")||F.clientHeight<F.scrollHeight&&(P.overflowY=="auto"||P.overflowY=="scroll")){if(!F.getBoundingClientRect||F===document.body)return im();if(T||w)return F;T=!0}}while(F=F.parentNode);return im()}function ste(U,w){if(U&&w)for(var F in w)w.hasOwnProperty(F)&&(U[F]=w[F]);return U}function vK(U,w){return Math.round(U.top)===Math.round(w.top)&&Math.round(U.left)===Math.round(w.left)&&Math.round(U.height)===Math.round(w.height)&&Math.round(U.width)===Math.round(w.width)}var JA;function SJ(U,w){return function(){if(!JA){var F=arguments,T=this;F.length===1?U.call(T,F[0]):U.apply(T,F),JA=setTimeout(function(){JA=void 0},w)}}}function rte(){clearTimeout(JA),JA=void 0}function xJ(U,w,F){U.scrollLeft+=w,U.scrollTop+=F}function FK(U){var w=window.Polymer,F=window.jQuery||window.Zepto;return w&&w.dom?w.dom(U).cloneNode(!0):F?F(U).clone(!0)[0]:U.cloneNode(!0)}function nJ(U,w){Nn(U,"position","absolute"),Nn(U,"top",w.top),Nn(U,"left",w.left),Nn(U,"width",w.width),Nn(U,"height",w.height)}function bK(U){Nn(U,"position",""),Nn(U,"top",""),Nn(U,"left",""),Nn(U,"width",""),Nn(U,"height","")}var vl="Sortable"+new Date().getTime();function ate(){var U=[],w;return{captureAnimationState:function(){if(U=[],!!this.options.animation){var T=[].slice.call(this.el.children);T.forEach(function(P){if(!(Nn(P,"display")==="none"||P===co.ghost)){U.push({target:P,rect:Mr(P)});var j=lm({},U[U.length-1].rect);if(P.thisAnimationDuration){var S=W0(P,!0);S&&(j.top-=S.f,j.left-=S.e)}P.fromRect=j}})}},addAnimationState:function(T){U.push(T)},removeAnimationState:function(T){U.splice(ote(U,{target:T}),1)},animateAll:function(T){var P=this;if(!this.options.animation){clearTimeout(w),typeof T=="function"&&T();return}var j=!1,S=0;U.forEach(function(B){var k=0,z=B.target,K=z.fromRect,J=Mr(z),re=z.prevFromRect,ce=z.prevToRect,fe=B.rect,me=W0(z,!0);me&&(J.top-=me.f,J.left-=me.e),z.toRect=J,z.thisAnimationDuration&&vK(re,J)&&!vK(K,J)&&(fe.top-J.top)/(fe.left-J.left)===(K.top-J.top)/(K.left-J.left)&&(k=lte(fe,re,ce,P.options)),vK(J,K)||(z.prevFromRect=K,z.prevToRect=J,k||(k=P.options.animation),P.animate(z,fe,J,k)),k&&(j=!0,S=Math.max(S,k),clearTimeout(z.animationResetTimer),z.animationResetTimer=setTimeout(function(){z.animationTime=0,z.prevFromRect=null,z.fromRect=null,z.prevToRect=null,z.thisAnimationDuration=null},k),z.thisAnimationDuration=k)}),clearTimeout(w),j?w=setTimeout(function(){typeof T=="function"&&T()},S):typeof T=="function"&&T(),U=[]},animate:function(T,P,j,S){if(S){Nn(T,"transition",""),Nn(T,"transform","");var B=W0(this.el),k=B&&B.a,z=B&&B.d,K=(P.left-j.left)/(k||1),J=(P.top-j.top)/(z||1);T.animatingX=!!K,T.animatingY=!!J,Nn(T,"transform","translate3d("+K+"px,"+J+"px,0)"),this.forRepaintDummy=ite(T),Nn(T,"transition","transform "+S+"ms"+(this.options.easing?" "+this.options.easing:"")),Nn(T,"transform","translate3d(0,0,0)"),typeof T.animated=="number"&&clearTimeout(T.animated),T.animated=setTimeout(function(){Nn(T,"transition",""),Nn(T,"transform",""),T.animated=!1,T.animatingX=!1,T.animatingY=!1},S)}}}}function ite(U){return U.offsetWidth}function lte(U,w,F,T){return Math.sqrt(Math.pow(w.top-U.top,2)+Math.pow(w.left-U.left,2))/Math.sqrt(Math.pow(w.top-F.top,2)+Math.pow(w.left-F.left,2))*T.animation}var RS=[],yK={initializeByDefault:!0},nO={mount:function(w){for(var F in yK)yK.hasOwnProperty(F)&&!(F in w)&&(w[F]=yK[F]);RS.forEach(function(T){if(T.pluginName===w.pluginName)throw"Sortable: Cannot mount plugin ".concat(w.pluginName," more than once")}),RS.push(w)},pluginEvent:function(w,F,T){var P=this;this.eventCanceled=!1,T.cancel=function(){P.eventCanceled=!0};var j=w+"Global";RS.forEach(function(S){F[S.pluginName]&&(F[S.pluginName][j]&&F[S.pluginName][j](lm({sortable:F},T)),F.options[S.pluginName]&&F[S.pluginName][w]&&F[S.pluginName][w](lm({sortable:F},T)))})},initializePlugins:function(w,F,T,P){RS.forEach(function(B){var k=B.pluginName;if(!(!w.options[k]&&!B.initializeByDefault)){var z=new B(w,F,w.options);z.sortable=w,z.options=w.options,w[k]=z,ld(T,z.defaults)}});for(var j in w.options)if(w.options.hasOwnProperty(j)){var S=this.modifyOption(w,j,w.options[j]);typeof S<"u"&&(w.options[j]=S)}},getEventProperties:function(w,F){var T={};return RS.forEach(function(P){typeof P.eventProperties=="function"&&ld(T,P.eventProperties.call(F[P.pluginName],w))}),T},modifyOption:function(w,F,T){var P;return RS.forEach(function(j){w[j.pluginName]&&j.optionListeners&&typeof j.optionListeners[F]=="function"&&(P=j.optionListeners[F].call(w[j.pluginName],T))}),P}};function jA(U){var w=U.sortable,F=U.rootEl,T=U.name,P=U.targetEl,j=U.cloneEl,S=U.toEl,B=U.fromEl,k=U.oldIndex,z=U.newIndex,K=U.oldDraggableIndex,J=U.newDraggableIndex,re=U.originalEvent,ce=U.putSortable,fe=U.extraEventProperties;if(w=w||F&&F[vl],!!w){var me,Ce=w.options,_e="on"+T.charAt(0).toUpperCase()+T.substr(1);window.CustomEvent&&!qg&&!tO?me=new CustomEvent(T,{bubbles:!0,cancelable:!0}):(me=document.createEvent("Event"),me.initEvent(T,!0,!0)),me.to=S||F,me.from=B||F,me.item=P||F,me.clone=j,me.oldIndex=k,me.newIndex=z,me.oldDraggableIndex=K,me.newDraggableIndex=J,me.originalEvent=re,me.pullMode=ce?ce.lastPutMode:void 0;var he=lm(lm({},fe),nO.getEventProperties(T,w));for(var q in he)me[q]=he[q];F&&F.dispatchEvent(me),Ce[_e]&&Ce[_e].call(w,me)}}var cte=["evt"],zc=function(w,F){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},P=T.evt,j=Kee(T,cte);nO.pluginEvent.bind(co)(w,F,lm({dragEl:en,parentEl:aa,ghostEl:To,rootEl:Dr,nextEl:Z0,lastDownEl:wB,cloneEl:ia,cloneHidden:i1,dragStarted:GA,putSortable:Vi,activeSortable:co.active,originalEvent:P,oldIndex:BS,oldDraggableIndex:QA,newIndex:mu,newDraggableIndex:a1,hideGhostForTarget:AJ,unhideGhostForTarget:OJ,cloneNowHidden:function(){i1=!0},cloneNowShown:function(){i1=!1},dispatchSortableEvent:function(B){nc({sortable:F,name:B,originalEvent:P})}},j))};function nc(U){jA(lm({putSortable:Vi,cloneEl:ia,targetEl:en,rootEl:Dr,oldIndex:BS,oldDraggableIndex:QA,newIndex:mu,newDraggableIndex:a1},U))}var en,aa,To,Dr,Z0,wB,ia,i1,BS,mu,QA,a1,hB,Vi,IS=!1,kB=!1,DB=[],z0,sf,CK,SK,oJ,sJ,GA,PS,qA,eO=!1,pB=!1,EB,hl,xK=[],PK=!1,MB=[],PB=typeof document<"u",vB=bJ,rJ=tO||qg?"cssFloat":"float",ute=PB&&!tte&&!bJ&&"draggable"in document.createElement("div"),wJ=function(){if(PB){if(qg)return!1;var U=document.createElement("x");return U.style.cssText="pointer-events:auto",U.style.pointerEvents==="auto"}}(),EJ=function(w,F){var T=Nn(w),P=parseInt(T.width)-parseInt(T.paddingLeft)-parseInt(T.paddingRight)-parseInt(T.borderLeftWidth)-parseInt(T.borderRightWidth),j=LS(w,0,F),S=LS(w,1,F),B=j&&Nn(j),k=S&&Nn(S),z=B&&parseInt(B.marginLeft)+parseInt(B.marginRight)+Mr(j).width,K=k&&parseInt(k.marginLeft)+parseInt(k.marginRight)+Mr(S).width;if(T.display==="flex")return T.flexDirection==="column"||T.flexDirection==="column-reverse"?"vertical":"horizontal";if(T.display==="grid")return T.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(j&&B.float&&B.float!=="none"){var J=B.float==="left"?"left":"right";return S&&(k.clear==="both"||k.clear===J)?"vertical":"horizontal"}return j&&(B.display==="block"||B.display==="flex"||B.display==="table"||B.display==="grid"||z>=P&&T[rJ]==="none"||S&&T[rJ]==="none"&&z+K>P)?"vertical":"horizontal"},dte=function(w,F,T){var P=T?w.left:w.top,j=T?w.right:w.bottom,S=T?w.width:w.height,B=T?F.left:F.top,k=T?F.right:F.bottom,z=T?F.width:F.height;return P===B||j===k||P+S/2===B+z/2},fte=function(w,F){var T;return DB.some(function(P){var j=P[vl].options.emptyInsertThreshold;if(!(!j||LK(P))){var S=Mr(P),B=w>=S.left-j&&w<=S.right+j,k=F>=S.top-j&&F<=S.bottom+j;if(B&&k)return T=P}}),T},TJ=function(w){function F(j,S){return function(B,k,z,K){var J=B.options.group.name&&k.options.group.name&&B.options.group.name===k.options.group.name;if(j==null&&(S||J))return!0;if(j==null||j===!1)return!1;if(S&&j==="clone")return j;if(typeof j=="function")return F(j(B,k,z,K),S)(B,k,z,K);var re=(S?B:k).options.group.name;return j===!0||typeof j=="string"&&j===re||j.join&&j.indexOf(re)>-1}}var T={},P=w.group;(!P||xB(P)!="object")&&(P={name:P}),T.name=P.name,T.checkPull=F(P.pull,!0),T.checkPut=F(P.put),T.revertClone=P.revertClone,w.group=T},AJ=function(){!wJ&&To&&Nn(To,"display","none")},OJ=function(){!wJ&&To&&Nn(To,"display","")};PB&&document.addEventListener("click",function(U){if(kB)return U.preventDefault(),U.stopPropagation&&U.stopPropagation(),U.stopImmediatePropagation&&U.stopImmediatePropagation(),kB=!1,!1},!0);var U0=function(w){if(en){w=w.touches?w.touches[0]:w;var F=fte(w.clientX,w.clientY);if(F){var T={};for(var P in w)w.hasOwnProperty(P)&&(T[P]=w[P]);T.target=T.rootEl=F,T.preventDefault=void 0,T.stopPropagation=void 0,F[vl]._onDragOver(T)}}},mte=function(w){en&&en.parentNode[vl]._isOutsideThisEl(w.target)};function co(U,w){if(!(U&&U.nodeType&&U.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(U));this.el=U,this.options=w=ld({},w),U[vl]=this;var F={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(U.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return EJ(U,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(S,B){S.setData("Text",B.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:co.supportPointer!==!1&&"PointerEvent"in window&&!XA,emptyInsertThreshold:5};nO.initializePlugins(this,U,F);for(var T in F)!(T in w)&&(w[T]=F[T]);TJ(w);for(var P in this)P.charAt(0)==="_"&&typeof this[P]=="function"&&(this[P]=this[P].bind(this));this.nativeDraggable=w.forceFallback?!1:ute,this.nativeDraggable&&(this.options.touchStartThreshold=1),w.supportPointer?es(U,"pointerdown",this._onTapStart):(es(U,"mousedown",this._onTapStart),es(U,"touchstart",this._onTapStart)),this.nativeDraggable&&(es(U,"dragover",this),es(U,"dragenter",this)),DB.push(this.el),w.store&&w.store.get&&this.sort(w.store.get(this)||[]),ld(this,ate())}co.prototype={constructor:co,_isOutsideThisEl:function(w){!this.el.contains(w)&&w!==this.el&&(PS=null)},_getDirection:function(w,F){return typeof this.options.direction=="function"?this.options.direction.call(this,w,F,en):this.options.direction},_onTapStart:function(w){if(w.cancelable){var F=this,T=this.el,P=this.options,j=P.preventOnFilter,S=w.type,B=w.touches&&w.touches[0]||w.pointerType&&w.pointerType==="touch"&&w,k=(B||w).target,z=w.target.shadowRoot&&(w.path&&w.path[0]||w.composedPath&&w.composedPath()[0])||k,K=P.filter;if(Ste(T),!en&&!(/mousedown|pointerdown/.test(S)&&w.button!==0||P.disabled)&&!z.isContentEditable&&!(!this.nativeDraggable&&XA&&k&&k.tagName.toUpperCase()==="SELECT")&&(k=af(k,P.draggable,T,!1),!(k&&k.animated)&&wB!==k)){if(BS=la(k),QA=la(k,P.draggable),typeof K=="function"){if(K.call(this,w,k,this)){nc({sortable:F,rootEl:z,name:"filter",targetEl:k,toEl:T,fromEl:T}),zc("filter",F,{evt:w}),j&&w.cancelable&&w.preventDefault();return}}else if(K&&(K=K.split(",").some(function(J){if(J=af(z,J.trim(),T,!1),J)return nc({sortable:F,rootEl:J,name:"filter",targetEl:k,fromEl:T,toEl:T}),zc("filter",F,{evt:w}),!0}),K)){j&&w.cancelable&&w.preventDefault();return}P.handle&&!af(z,P.handle,T,!1)||this._prepareDragStart(w,B,k)}}},_prepareDragStart:function(w,F,T){var P=this,j=P.el,S=P.options,B=j.ownerDocument,k;if(T&&!en&&T.parentNode===j){var z=Mr(T);if(Dr=j,en=T,aa=en.parentNode,Z0=en.nextSibling,wB=T,hB=S.group,co.dragged=en,z0={target:en,clientX:(F||w).clientX,clientY:(F||w).clientY},oJ=z0.clientX-z.left,sJ=z0.clientY-z.top,this._lastX=(F||w).clientX,this._lastY=(F||w).clientY,en.style["will-change"]="all",k=function(){if(zc("delayEnded",P,{evt:w}),co.eventCanceled){P._onDrop();return}P._disableDelayedDragEvents(),!QX&&P.nativeDraggable&&(en.draggable=!0),P._triggerDragStart(w,F),nc({sortable:P,name:"choose",originalEvent:w}),Zr(en,S.chosenClass,!0)},S.ignore.split(",").forEach(function(K){CJ(en,K.trim(),wK)}),es(B,"dragover",U0),es(B,"mousemove",U0),es(B,"touchmove",U0),es(B,"mouseup",P._onDrop),es(B,"touchend",P._onDrop),es(B,"touchcancel",P._onDrop),QX&&this.nativeDraggable&&(this.options.touchStartThreshold=4,en.draggable=!0),zc("delayStart",this,{evt:w}),S.delay&&(!S.delayOnTouchOnly||F)&&(!this.nativeDraggable||!(tO||qg))){if(co.eventCanceled){this._onDrop();return}es(B,"mouseup",P._disableDelayedDrag),es(B,"touchend",P._disableDelayedDrag),es(B,"touchcancel",P._disableDelayedDrag),es(B,"mousemove",P._delayedDragTouchMoveHandler),es(B,"touchmove",P._delayedDragTouchMoveHandler),S.supportPointer&&es(B,"pointermove",P._delayedDragTouchMoveHandler),P._dragStartTimer=setTimeout(k,S.delay)}else k()}},_delayedDragTouchMoveHandler:function(w){var F=w.touches?w.touches[0]:w;Math.max(Math.abs(F.clientX-this._lastX),Math.abs(F.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){en&&wK(en),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var w=this.el.ownerDocument;Vo(w,"mouseup",this._disableDelayedDrag),Vo(w,"touchend",this._disableDelayedDrag),Vo(w,"touchcancel",this._disableDelayedDrag),Vo(w,"mousemove",this._delayedDragTouchMoveHandler),Vo(w,"touchmove",this._delayedDragTouchMoveHandler),Vo(w,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(w,F){F=F||w.pointerType=="touch"&&w,!this.nativeDraggable||F?this.options.supportPointer?es(document,"pointermove",this._onTouchMove):F?es(document,"touchmove",this._onTouchMove):es(document,"mousemove",this._onTouchMove):(es(en,"dragend",this),es(Dr,"dragstart",this._onDragStart));try{document.selection?TB(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(w,F){if(IS=!1,Dr&&en){zc("dragStarted",this,{evt:F}),this.nativeDraggable&&es(document,"dragover",mte);var T=this.options;!w&&Zr(en,T.dragClass,!1),Zr(en,T.ghostClass,!0),co.active=this,w&&this._appendGhost(),nc({sortable:this,name:"start",originalEvent:F})}else this._nulling()},_emulateDragOver:function(){if(sf){this._lastX=sf.clientX,this._lastY=sf.clientY,AJ();for(var w=document.elementFromPoint(sf.clientX,sf.clientY),F=w;w&&w.shadowRoot&&(w=w.shadowRoot.elementFromPoint(sf.clientX,sf.clientY),w!==F);)F=w;if(en.parentNode[vl]._isOutsideThisEl(w),F)do{if(F[vl]){var T=void 0;if(T=F[vl]._onDragOver({clientX:sf.clientX,clientY:sf.clientY,target:w,rootEl:F}),T&&!this.options.dragoverBubble)break}w=F}while(F=F.parentNode);OJ()}},_onTouchMove:function(w){if(z0){var F=this.options,T=F.fallbackTolerance,P=F.fallbackOffset,j=w.touches?w.touches[0]:w,S=To&&W0(To,!0),B=To&&S&&S.a,k=To&&S&&S.d,z=vB&&hl&&tJ(hl),K=(j.clientX-z0.clientX+P.x)/(B||1)+(z?z[0]-xK[0]:0)/(B||1),J=(j.clientY-z0.clientY+P.y)/(k||1)+(z?z[1]-xK[1]:0)/(k||1);if(!co.active&&!IS){if(T&&Math.max(Math.abs(j.clientX-this._lastX),Math.abs(j.clientY-this._lastY))<T)return;this._onDragStart(w,!0)}if(To){S?(S.e+=K-(CK||0),S.f+=J-(SK||0)):S={a:1,b:0,c:0,d:1,e:K,f:J};var re="matrix(".concat(S.a,",").concat(S.b,",").concat(S.c,",").concat(S.d,",").concat(S.e,",").concat(S.f,")");Nn(To,"webkitTransform",re),Nn(To,"mozTransform",re),Nn(To,"msTransform",re),Nn(To,"transform",re),CK=K,SK=J,sf=j}w.cancelable&&w.preventDefault()}},_appendGhost:function(){if(!To){var w=this.options.fallbackOnBody?document.body:Dr,F=Mr(en,!0,vB,!0,w),T=this.options;if(vB){for(hl=w;Nn(hl,"position")==="static"&&Nn(hl,"transform")==="none"&&hl!==document;)hl=hl.parentNode;hl!==document.body&&hl!==document.documentElement?(hl===document&&(hl=im()),F.top+=hl.scrollTop,F.left+=hl.scrollLeft):hl=im(),xK=tJ(hl)}To=en.cloneNode(!0),Zr(To,T.ghostClass,!1),Zr(To,T.fallbackClass,!0),Zr(To,T.dragClass,!0),Nn(To,"transition",""),Nn(To,"transform",""),Nn(To,"box-sizing","border-box"),Nn(To,"margin",0),Nn(To,"top",F.top),Nn(To,"left",F.left),Nn(To,"width",F.width),Nn(To,"height",F.height),Nn(To,"opacity","0.8"),Nn(To,"position",vB?"absolute":"fixed"),Nn(To,"zIndex","100000"),Nn(To,"pointerEvents","none"),co.ghost=To,w.appendChild(To),Nn(To,"transform-origin",oJ/parseInt(To.style.width)*100+"% "+sJ/parseInt(To.style.height)*100+"%")}},_onDragStart:function(w,F){var T=this,P=w.dataTransfer,j=T.options;if(zc("dragStart",this,{evt:w}),co.eventCanceled){this._onDrop();return}zc("setupClone",this),co.eventCanceled||(ia=FK(en),ia.draggable=!1,ia.style["will-change"]="",this._hideClone(),Zr(ia,this.options.chosenClass,!1),co.clone=ia),T.cloneId=TB(function(){zc("clone",T),!co.eventCanceled&&(T.options.removeCloneOnHide||Dr.insertBefore(ia,en),T._hideClone(),nc({sortable:T,name:"clone"}))}),!F&&Zr(en,j.dragClass,!0),F?(kB=!0,T._loopId=setInterval(T._emulateDragOver,50)):(Vo(document,"mouseup",T._onDrop),Vo(document,"touchend",T._onDrop),Vo(document,"touchcancel",T._onDrop),P&&(P.effectAllowed="move",j.setData&&j.setData.call(T,P,en)),es(document,"drop",T),Nn(en,"transform","translateZ(0)")),IS=!0,T._dragStartId=TB(T._dragStarted.bind(T,F,w)),es(document,"selectstart",T),GA=!0,XA&&Nn(document.body,"user-select","none")},_onDragOver:function(w){var F=this.el,T=w.target,P,j,S,B=this.options,k=B.group,z=co.active,K=hB===k,J=B.sort,re=Vi||z,ce,fe=this,me=!1;if(PK)return;function Ce(Ye,Qn){zc(Ye,fe,lm({evt:w,isOwner:K,axis:ce?"vertical":"horizontal",revert:S,dragRect:P,targetRect:j,canSort:J,fromSortable:re,target:T,completed:he,onMove:function(ut,Kt){return bB(Dr,F,en,P,ut,Mr(ut),w,Kt)},changed:q},Qn))}function _e(){Ce("dragOverAnimationCapture"),fe.captureAnimationState(),fe!==re&&re.captureAnimationState()}function he(Ye){return Ce("dragOverCompleted",{insertion:Ye}),Ye&&(K?z._hideClone():z._showClone(fe),fe!==re&&(Zr(en,Vi?Vi.options.ghostClass:z.options.ghostClass,!1),Zr(en,B.ghostClass,!0)),Vi!==fe&&fe!==co.active?Vi=fe:fe===co.active&&Vi&&(Vi=null),re===fe&&(fe._ignoreWhileAnimating=T),fe.animateAll(function(){Ce("dragOverAnimationComplete"),fe._ignoreWhileAnimating=null}),fe!==re&&(re.animateAll(),re._ignoreWhileAnimating=null)),(T===en&&!en.animated||T===F&&!T.animated)&&(PS=null),!B.dragoverBubble&&!w.rootEl&&T!==document&&(en.parentNode[vl]._isOutsideThisEl(w.target),!Ye&&U0(w)),!B.dragoverBubble&&w.stopPropagation&&w.stopPropagation(),me=!0}function q(){mu=la(en),a1=la(en,B.draggable),nc({sortable:fe,name:"change",toEl:F,newIndex:mu,newDraggableIndex:a1,originalEvent:w})}if(w.preventDefault!==void 0&&w.cancelable&&w.preventDefault(),T=af(T,B.draggable,F,!0),Ce("dragOver"),co.eventCanceled)return me;if(en.contains(w.target)||T.animated&&T.animatingX&&T.animatingY||fe._ignoreWhileAnimating===T)return he(!1);if(kB=!1,z&&!B.disabled&&(K?J||(S=aa!==Dr):Vi===this||(this.lastPutMode=hB.checkPull(this,z,en,w))&&k.checkPut(this,z,en,w))){if(ce=this._getDirection(w,T)==="vertical",P=Mr(en),Ce("dragOverValid"),co.eventCanceled)return me;if(S)return aa=Dr,_e(),this._hideClone(),Ce("revert"),co.eventCanceled||(Z0?Dr.insertBefore(en,Z0):Dr.appendChild(en)),he(!0);var Te=LK(F,B.draggable);if(!Te||vte(w,ce,this)&&!Te.animated){if(Te===en)return he(!1);if(Te&&F===w.target&&(T=Te),T&&(j=Mr(T)),bB(Dr,F,en,P,T,j,w,!!T)!==!1)return _e(),F.appendChild(en),aa=F,q(),he(!0)}else if(Te&&pte(w,ce,this)){var bt=LS(F,0,B,!0);if(bt===en)return he(!1);if(T=bt,j=Mr(T),bB(Dr,F,en,P,T,j,w,!1)!==!1)return _e(),F.insertBefore(en,bt),aa=F,q(),he(!0)}else if(T.parentNode===F){j=Mr(T);var Ge=0,te,lt=en.parentNode!==F,Je=!dte(en.animated&&en.toRect||P,T.animated&&T.toRect||j,ce),gt=ce?"top":"left",ye=eJ(T,"top","top")||eJ(en,"top","top"),Et=ye?ye.scrollTop:void 0;PS!==T&&(te=j[gt],eO=!1,pB=!Je&&B.invertSwap||lt),Ge=bte(w,T,j,ce,Je?1:B.swapThreshold,B.invertedSwapThreshold==null?B.swapThreshold:B.invertedSwapThreshold,pB,PS===T);var xt;if(Ge!==0){var at=la(en);do at-=Ge,xt=aa.children[at];while(xt&&(Nn(xt,"display")==="none"||xt===To))}if(Ge===0||xt===T)return he(!1);PS=T,qA=Ge;var qe=T.nextElementSibling,x=!1;x=Ge===1;var gn=bB(Dr,F,en,P,T,j,w,x);if(gn!==!1)return(gn===1||gn===-1)&&(x=gn===1),PK=!0,setTimeout(hte,30),_e(),x&&!qe?F.appendChild(en):T.parentNode.insertBefore(en,x?qe:T),ye&&xJ(ye,0,Et-ye.scrollTop),aa=en.parentNode,te!==void 0&&!pB&&(EB=Math.abs(te-Mr(T)[gt])),q(),he(!0)}if(F.contains(en))return he(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Vo(document,"mousemove",this._onTouchMove),Vo(document,"touchmove",this._onTouchMove),Vo(document,"pointermove",this._onTouchMove),Vo(document,"dragover",U0),Vo(document,"mousemove",U0),Vo(document,"touchmove",U0)},_offUpEvents:function(){var w=this.el.ownerDocument;Vo(w,"mouseup",this._onDrop),Vo(w,"touchend",this._onDrop),Vo(w,"pointerup",this._onDrop),Vo(w,"touchcancel",this._onDrop),Vo(document,"selectstart",this)},_onDrop:function(w){var F=this.el,T=this.options;if(mu=la(en),a1=la(en,T.draggable),zc("drop",this,{evt:w}),aa=en&&en.parentNode,mu=la(en),a1=la(en,T.draggable),co.eventCanceled){this._nulling();return}IS=!1,pB=!1,eO=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),NK(this.cloneId),NK(this._dragStartId),this.nativeDraggable&&(Vo(document,"drop",this),Vo(F,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),XA&&Nn(document.body,"user-select",""),Nn(en,"transform",""),w&&(GA&&(w.cancelable&&w.preventDefault(),!T.dropBubble&&w.stopPropagation()),To&&To.parentNode&&To.parentNode.removeChild(To),(Dr===aa||Vi&&Vi.lastPutMode!=="clone")&&ia&&ia.parentNode&&ia.parentNode.removeChild(ia),en&&(this.nativeDraggable&&Vo(en,"dragend",this),wK(en),en.style["will-change"]="",GA&&!IS&&Zr(en,Vi?Vi.options.ghostClass:this.options.ghostClass,!1),Zr(en,this.options.chosenClass,!1),nc({sortable:this,name:"unchoose",toEl:aa,newIndex:null,newDraggableIndex:null,originalEvent:w}),Dr!==aa?(mu>=0&&(nc({rootEl:aa,name:"add",toEl:aa,fromEl:Dr,originalEvent:w}),nc({sortable:this,name:"remove",toEl:aa,originalEvent:w}),nc({rootEl:aa,name:"sort",toEl:aa,fromEl:Dr,originalEvent:w}),nc({sortable:this,name:"sort",toEl:aa,originalEvent:w})),Vi&&Vi.save()):mu!==BS&&mu>=0&&(nc({sortable:this,name:"update",toEl:aa,originalEvent:w}),nc({sortable:this,name:"sort",toEl:aa,originalEvent:w})),co.active&&((mu==null||mu===-1)&&(mu=BS,a1=QA),nc({sortable:this,name:"end",toEl:aa,originalEvent:w}),this.save()))),this._nulling()},_nulling:function(){zc("nulling",this),Dr=en=aa=To=Z0=ia=wB=i1=z0=sf=GA=mu=a1=BS=QA=PS=qA=Vi=hB=co.dragged=co.ghost=co.clone=co.active=null,MB.forEach(function(w){w.checked=!0}),MB.length=CK=SK=0},handleEvent:function(w){switch(w.type){case"drop":case"dragend":this._onDrop(w);break;case"dragenter":case"dragover":en&&(this._onDragOver(w),gte(w));break;case"selectstart":w.preventDefault();break}},toArray:function(){for(var w=[],F,T=this.el.children,P=0,j=T.length,S=this.options;P<j;P++)F=T[P],af(F,S.draggable,this.el,!1)&&w.push(F.getAttribute(S.dataIdAttr)||Cte(F));return w},sort:function(w,F){var T={},P=this.el;this.toArray().forEach(function(j,S){var B=P.children[S];af(B,this.options.draggable,P,!1)&&(T[j]=B)},this),F&&this.captureAnimationState(),w.forEach(function(j){T[j]&&(P.removeChild(T[j]),P.appendChild(T[j]))}),F&&this.animateAll()},save:function(){var w=this.options.store;w&&w.set&&w.set(this)},closest:function(w,F){return af(w,F||this.options.draggable,this.el,!1)},option:function(w,F){var T=this.options;if(F===void 0)return T[w];var P=nO.modifyOption(this,w,F);typeof P<"u"?T[w]=P:T[w]=F,w==="group"&&TJ(T)},destroy:function(){zc("destroy",this);var w=this.el;w[vl]=null,Vo(w,"mousedown",this._onTapStart),Vo(w,"touchstart",this._onTapStart),Vo(w,"pointerdown",this._onTapStart),this.nativeDraggable&&(Vo(w,"dragover",this),Vo(w,"dragenter",this)),Array.prototype.forEach.call(w.querySelectorAll("[draggable]"),function(F){F.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),DB.splice(DB.indexOf(this.el),1),this.el=w=null},_hideClone:function(){if(!i1){if(zc("hideClone",this),co.eventCanceled)return;Nn(ia,"display","none"),this.options.removeCloneOnHide&&ia.parentNode&&ia.parentNode.removeChild(ia),i1=!0}},_showClone:function(w){if(w.lastPutMode!=="clone"){this._hideClone();return}if(i1){if(zc("showClone",this),co.eventCanceled)return;en.parentNode==Dr&&!this.options.group.revertClone?Dr.insertBefore(ia,en):Z0?Dr.insertBefore(ia,Z0):Dr.appendChild(ia),this.options.group.revertClone&&this.animate(en,ia),Nn(ia,"display",""),i1=!1}}};function gte(U){U.dataTransfer&&(U.dataTransfer.dropEffect="move"),U.cancelable&&U.preventDefault()}function bB(U,w,F,T,P,j,S,B){var k,z=U[vl],K=z.options.onMove,J;return window.CustomEvent&&!qg&&!tO?k=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(k=document.createEvent("Event"),k.initEvent("move",!0,!0)),k.to=w,k.from=U,k.dragged=F,k.draggedRect=T,k.related=P||w,k.relatedRect=j||Mr(w),k.willInsertAfter=B,k.originalEvent=S,U.dispatchEvent(k),K&&(J=K.call(z,k,S)),J}function wK(U){U.draggable=!1}function hte(){PK=!1}function pte(U,w,F){var T=Mr(LS(F.el,0,F.options,!0)),P=10;return w?U.clientX<T.left-P||U.clientY<T.top&&U.clientX<T.right:U.clientY<T.top-P||U.clientY<T.bottom&&U.clientX<T.left}function vte(U,w,F){var T=Mr(LK(F.el,F.options.draggable)),P=10;return w?U.clientX>T.right+P||U.clientX<=T.right&&U.clientY>T.bottom&&U.clientX>=T.left:U.clientX>T.right&&U.clientY>T.top||U.clientX<=T.right&&U.clientY>T.bottom+P}function bte(U,w,F,T,P,j,S,B){var k=T?U.clientY:U.clientX,z=T?F.height:F.width,K=T?F.top:F.left,J=T?F.bottom:F.right,re=!1;if(!S){if(B&&EB<z*P){if(!eO&&(qA===1?k>K+z*j/2:k<J-z*j/2)&&(eO=!0),eO)re=!0;else if(qA===1?k<K+EB:k>J-EB)return-qA}else if(k>K+z*(1-P)/2&&k<J-z*(1-P)/2)return yte(w)}return re=re||S,re&&(k<K+z*j/2||k>J-z*j/2)?k>K+z/2?1:-1:0}function yte(U){return la(en)<la(U)?1:-1}function Cte(U){for(var w=U.tagName+U.className+U.src+U.href+U.textContent,F=w.length,T=0;F--;)T+=w.charCodeAt(F);return T.toString(36)}function Ste(U){MB.length=0;for(var w=U.getElementsByTagName("input"),F=w.length;F--;){var T=w[F];T.checked&&MB.push(T)}}function TB(U){return setTimeout(U,0)}function NK(U){return clearTimeout(U)}PB&&es(document,"touchmove",function(U){(co.active||IS)&&U.cancelable&&U.preventDefault()});co.utils={on:es,off:Vo,css:Nn,find:CJ,is:function(w,F){return!!af(w,F,w,!1)},extend:ste,throttle:SJ,closest:af,toggleClass:Zr,clone:FK,index:la,nextTick:TB,cancelNextTick:NK,detectDirection:EJ,getChild:LS};co.get=function(U){return U[vl]};co.mount=function(){for(var U=arguments.length,w=new Array(U),F=0;F<U;F++)w[F]=arguments[F];w[0].constructor===Array&&(w=w[0]),w.forEach(function(T){if(!T.prototype||!T.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(T));T.utils&&(co.utils=lm(lm({},co.utils),T.utils)),nO.mount(T)})};co.create=function(U,w){return new co(U,w)};co.version=ete;var Va=[],KA,IK,BK=!1,EK,TK,RB,YA;function xte(){function U(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var w in this)w.charAt(0)==="_"&&typeof this[w]=="function"&&(this[w]=this[w].bind(this))}return U.prototype={dragStarted:function(F){var T=F.originalEvent;this.sortable.nativeDraggable?es(document,"dragover",this._handleAutoScroll):this.options.supportPointer?es(document,"pointermove",this._handleFallbackAutoScroll):T.touches?es(document,"touchmove",this._handleFallbackAutoScroll):es(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(F){var T=F.originalEvent;!this.options.dragOverBubble&&!T.rootEl&&this._handleAutoScroll(T)},drop:function(){this.sortable.nativeDraggable?Vo(document,"dragover",this._handleAutoScroll):(Vo(document,"pointermove",this._handleFallbackAutoScroll),Vo(document,"touchmove",this._handleFallbackAutoScroll),Vo(document,"mousemove",this._handleFallbackAutoScroll)),aJ(),AB(),rte()},nulling:function(){RB=IK=KA=BK=YA=EK=TK=null,Va.length=0},_handleFallbackAutoScroll:function(F){this._handleAutoScroll(F,!0)},_handleAutoScroll:function(F,T){var P=this,j=(F.touches?F.touches[0]:F).clientX,S=(F.touches?F.touches[0]:F).clientY,B=document.elementFromPoint(j,S);if(RB=F,T||this.options.forceAutoScrollFallback||tO||qg||XA){AK(F,this.options,B,T);var k=l1(B,!0);BK&&(!YA||j!==EK||S!==TK)&&(YA&&aJ(),YA=setInterval(function(){var z=l1(document.elementFromPoint(j,S),!0);z!==k&&(k=z,AB()),AK(F,P.options,z,T)},10),EK=j,TK=S)}else{if(!this.options.bubbleScroll||l1(B,!0)===im()){AB();return}AK(F,this.options,l1(B,!1),!1)}}},ld(U,{pluginName:"scroll",initializeByDefault:!0})}function AB(){Va.forEach(function(U){clearInterval(U.pid)}),Va=[]}function aJ(){clearInterval(YA)}var AK=SJ(function(U,w,F,T){if(w.scroll){var P=(U.touches?U.touches[0]:U).clientX,j=(U.touches?U.touches[0]:U).clientY,S=w.scrollSensitivity,B=w.scrollSpeed,k=im(),z=!1,K;IK!==F&&(IK=F,AB(),KA=w.scroll,K=w.scrollFn,KA===!0&&(KA=l1(F,!0)));var J=0,re=KA;do{var ce=re,fe=Mr(ce),me=fe.top,Ce=fe.bottom,_e=fe.left,he=fe.right,q=fe.width,Te=fe.height,bt=void 0,Ge=void 0,te=ce.scrollWidth,lt=ce.scrollHeight,Je=Nn(ce),gt=ce.scrollLeft,ye=ce.scrollTop;ce===k?(bt=q<te&&(Je.overflowX==="auto"||Je.overflowX==="scroll"||Je.overflowX==="visible"),Ge=Te<lt&&(Je.overflowY==="auto"||Je.overflowY==="scroll"||Je.overflowY==="visible")):(bt=q<te&&(Je.overflowX==="auto"||Je.overflowX==="scroll"),Ge=Te<lt&&(Je.overflowY==="auto"||Je.overflowY==="scroll"));var Et=bt&&(Math.abs(he-P)<=S&&gt+q<te)-(Math.abs(_e-P)<=S&&!!gt),xt=Ge&&(Math.abs(Ce-j)<=S&&ye+Te<lt)-(Math.abs(me-j)<=S&&!!ye);if(!Va[J])for(var at=0;at<=J;at++)Va[at]||(Va[at]={});(Va[J].vx!=Et||Va[J].vy!=xt||Va[J].el!==ce)&&(Va[J].el=ce,Va[J].vx=Et,Va[J].vy=xt,clearInterval(Va[J].pid),(Et!=0||xt!=0)&&(z=!0,Va[J].pid=setInterval((function(){T&&this.layer===0&&co.active._onTouchMove(RB);var qe=Va[this.layer].vy?Va[this.layer].vy*B:0,x=Va[this.layer].vx?Va[this.layer].vx*B:0;typeof K=="function"&&K.call(co.dragged.parentNode[vl],x,qe,U,RB,Va[this.layer].el)!=="continue"||xJ(Va[this.layer].el,x,qe)}).bind({layer:J}),24))),J++}while(w.bubbleScroll&&re!==k&&(re=l1(re,!1)));BK=z}},30),kJ=function(w){var F=w.originalEvent,T=w.putSortable,P=w.dragEl,j=w.activeSortable,S=w.dispatchSortableEvent,B=w.hideGhostForTarget,k=w.unhideGhostForTarget;if(F){var z=T||j;B();var K=F.changedTouches&&F.changedTouches.length?F.changedTouches[0]:F,J=document.elementFromPoint(K.clientX,K.clientY);k(),z&&!z.el.contains(J)&&(S("spill"),this.onSpill({dragEl:P,putSortable:T}))}};function _K(){}_K.prototype={startIndex:null,dragStart:function(w){var F=w.oldDraggableIndex;this.startIndex=F},onSpill:function(w){var F=w.dragEl,T=w.putSortable;this.sortable.captureAnimationState(),T&&T.captureAnimationState();var P=LS(this.sortable.el,this.startIndex,this.options);P?this.sortable.el.insertBefore(F,P):this.sortable.el.appendChild(F),this.sortable.animateAll(),T&&T.animateAll()},drop:kJ};ld(_K,{pluginName:"revertOnSpill"});function $K(){}$K.prototype={onSpill:function(w){var F=w.dragEl,T=w.putSortable,P=T||this.sortable;P.captureAnimationState(),F.parentNode&&F.parentNode.removeChild(F),P.animateAll()},drop:kJ};ld($K,{pluginName:"removeOnSpill"});var ad;function wte(){function U(){this.defaults={swapClass:"sortable-swap-highlight"}}return U.prototype={dragStart:function(F){var T=F.dragEl;ad=T},dragOverValid:function(F){var T=F.completed,P=F.target,j=F.onMove,S=F.activeSortable,B=F.changed,k=F.cancel;if(S.options.swap){var z=this.sortable.el,K=this.options;if(P&&P!==z){var J=ad;j(P)!==!1?(Zr(P,K.swapClass,!0),ad=P):ad=null,J&&J!==ad&&Zr(J,K.swapClass,!1)}B(),T(!0),k()}},drop:function(F){var T=F.activeSortable,P=F.putSortable,j=F.dragEl,S=P||this.sortable,B=this.options;ad&&Zr(ad,B.swapClass,!1),ad&&(B.swap||P&&P.options.swap)&&j!==ad&&(S.captureAnimationState(),S!==T&&T.captureAnimationState(),Ete(j,ad),S.animateAll(),S!==T&&T.animateAll())},nulling:function(){ad=null}},ld(U,{pluginName:"swap",eventProperties:function(){return{swapItem:ad}}})}function Ete(U,w){var F=U.parentNode,T=w.parentNode,P,j;!F||!T||F.isEqualNode(w)||T.isEqualNode(U)||(P=la(U),j=la(w),F.isEqualNode(T)&&P<j&&j++,F.insertBefore(w,F.children[P]),T.insertBefore(U,T.children[j]))}var yo=[],fu=[],VA,rf,zA=!1,Uc=!1,NS=!1,ur,UA,yB;function Tte(){function U(w){for(var F in this)F.charAt(0)==="_"&&typeof this[F]=="function"&&(this[F]=this[F].bind(this));w.options.supportPointer?es(document,"pointerup",this._deselectMultiDrag):(es(document,"mouseup",this._deselectMultiDrag),es(document,"touchend",this._deselectMultiDrag)),es(document,"keydown",this._checkKeyDown),es(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(P,j){var S="";yo.length&&rf===w?yo.forEach(function(B,k){S+=(k?", ":"")+B.textContent}):S=j.textContent,P.setData("Text",S)}}}return U.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(F){var T=F.dragEl;ur=T},delayEnded:function(){this.isMultiDrag=~yo.indexOf(ur)},setupClone:function(F){var T=F.sortable,P=F.cancel;if(this.isMultiDrag){for(var j=0;j<yo.length;j++)fu.push(FK(yo[j])),fu[j].sortableIndex=yo[j].sortableIndex,fu[j].draggable=!1,fu[j].style["will-change"]="",Zr(fu[j],this.options.selectedClass,!1),yo[j]===ur&&Zr(fu[j],this.options.chosenClass,!1);T._hideClone(),P()}},clone:function(F){var T=F.sortable,P=F.rootEl,j=F.dispatchSortableEvent,S=F.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||yo.length&&rf===T&&(iJ(!0,P),j("clone"),S()))},showClone:function(F){var T=F.cloneNowShown,P=F.rootEl,j=F.cancel;this.isMultiDrag&&(iJ(!1,P),fu.forEach(function(S){Nn(S,"display","")}),T(),yB=!1,j())},hideClone:function(F){var T=this;F.sortable;var P=F.cloneNowHidden,j=F.cancel;this.isMultiDrag&&(fu.forEach(function(S){Nn(S,"display","none"),T.options.removeCloneOnHide&&S.parentNode&&S.parentNode.removeChild(S)}),P(),yB=!0,j())},dragStartGlobal:function(F){F.sortable,!this.isMultiDrag&&rf&&rf.multiDrag._deselectMultiDrag(),yo.forEach(function(T){T.sortableIndex=la(T)}),yo=yo.sort(function(T,P){return T.sortableIndex-P.sortableIndex}),NS=!0},dragStarted:function(F){var T=this,P=F.sortable;if(this.isMultiDrag){if(this.options.sort&&(P.captureAnimationState(),this.options.animation)){yo.forEach(function(S){S!==ur&&Nn(S,"position","absolute")});var j=Mr(ur,!1,!0,!0);yo.forEach(function(S){S!==ur&&nJ(S,j)}),Uc=!0,zA=!0}P.animateAll(function(){Uc=!1,zA=!1,T.options.animation&&yo.forEach(function(S){bK(S)}),T.options.sort&&CB()})}},dragOver:function(F){var T=F.target,P=F.completed,j=F.cancel;Uc&&~yo.indexOf(T)&&(P(!1),j())},revert:function(F){var T=F.fromSortable,P=F.rootEl,j=F.sortable,S=F.dragRect;yo.length>1&&(yo.forEach(function(B){j.addAnimationState({target:B,rect:Uc?Mr(B):S}),bK(B),B.fromRect=S,T.removeAnimationState(B)}),Uc=!1,Ate(!this.options.removeCloneOnHide,P))},dragOverCompleted:function(F){var T=F.sortable,P=F.isOwner,j=F.insertion,S=F.activeSortable,B=F.parentEl,k=F.putSortable,z=this.options;if(j){if(P&&S._hideClone(),zA=!1,z.animation&&yo.length>1&&(Uc||!P&&!S.options.sort&&!k)){var K=Mr(ur,!1,!0,!0);yo.forEach(function(re){re!==ur&&(nJ(re,K),B.appendChild(re))}),Uc=!0}if(!P)if(Uc||CB(),yo.length>1){var J=yB;S._showClone(T),S.options.animation&&!yB&&J&&fu.forEach(function(re){S.addAnimationState({target:re,rect:UA}),re.fromRect=UA,re.thisAnimationDuration=null})}else S._showClone(T)}},dragOverAnimationCapture:function(F){var T=F.dragRect,P=F.isOwner,j=F.activeSortable;if(yo.forEach(function(B){B.thisAnimationDuration=null}),j.options.animation&&!P&&j.multiDrag.isMultiDrag){UA=ld({},T);var S=W0(ur,!0);UA.top-=S.f,UA.left-=S.e}},dragOverAnimationComplete:function(){Uc&&(Uc=!1,CB())},drop:function(F){var T=F.originalEvent,P=F.rootEl,j=F.parentEl,S=F.sortable,B=F.dispatchSortableEvent,k=F.oldIndex,z=F.putSortable,K=z||this.sortable;if(T){var J=this.options,re=j.children;if(!NS)if(J.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Zr(ur,J.selectedClass,!~yo.indexOf(ur)),~yo.indexOf(ur))yo.splice(yo.indexOf(ur),1),VA=null,jA({sortable:S,rootEl:P,name:"deselect",targetEl:ur,originalEvt:T});else{if(yo.push(ur),jA({sortable:S,rootEl:P,name:"select",targetEl:ur,originalEvt:T}),T.shiftKey&&VA&&S.el.contains(VA)){var ce=la(VA),fe=la(ur);if(~ce&&~fe&&ce!==fe){var me,Ce;for(fe>ce?(Ce=ce,me=fe):(Ce=fe,me=ce+1);Ce<me;Ce++)~yo.indexOf(re[Ce])||(Zr(re[Ce],J.selectedClass,!0),yo.push(re[Ce]),jA({sortable:S,rootEl:P,name:"select",targetEl:re[Ce],originalEvt:T}))}}else VA=ur;rf=K}if(NS&&this.isMultiDrag){if(Uc=!1,(j[vl].options.sort||j!==P)&&yo.length>1){var _e=Mr(ur),he=la(ur,":not(."+this.options.selectedClass+")");if(!zA&&J.animation&&(ur.thisAnimationDuration=null),K.captureAnimationState(),!zA&&(J.animation&&(ur.fromRect=_e,yo.forEach(function(Te){if(Te.thisAnimationDuration=null,Te!==ur){var bt=Uc?Mr(Te):_e;Te.fromRect=bt,K.addAnimationState({target:Te,rect:bt})}})),CB(),yo.forEach(function(Te){re[he]?j.insertBefore(Te,re[he]):j.appendChild(Te),he++}),k===la(ur))){var q=!1;yo.forEach(function(Te){if(Te.sortableIndex!==la(Te)){q=!0;return}}),q&&B("update")}yo.forEach(function(Te){bK(Te)}),K.animateAll()}rf=K}(P===j||z&&z.lastPutMode!=="clone")&&fu.forEach(function(Te){Te.parentNode&&Te.parentNode.removeChild(Te)})}},nullingGlobal:function(){this.isMultiDrag=NS=!1,fu.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Vo(document,"pointerup",this._deselectMultiDrag),Vo(document,"mouseup",this._deselectMultiDrag),Vo(document,"touchend",this._deselectMultiDrag),Vo(document,"keydown",this._checkKeyDown),Vo(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(F){if(!(typeof NS<"u"&&NS)&&rf===this.sortable&&!(F&&af(F.target,this.options.draggable,this.sortable.el,!1))&&!(F&&F.button!==0))for(;yo.length;){var T=yo[0];Zr(T,this.options.selectedClass,!1),yo.shift(),jA({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:T,originalEvt:F})}},_checkKeyDown:function(F){F.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(F){F.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},ld(U,{pluginName:"multiDrag",utils:{select:function(F){var T=F.parentNode[vl];!T||!T.options.multiDrag||~yo.indexOf(F)||(rf&&rf!==T&&(rf.multiDrag._deselectMultiDrag(),rf=T),Zr(F,T.options.selectedClass,!0),yo.push(F))},deselect:function(F){var T=F.parentNode[vl],P=yo.indexOf(F);!T||!T.options.multiDrag||!~P||(Zr(F,T.options.selectedClass,!1),yo.splice(P,1))}},eventProperties:function(){var F=this,T=[],P=[];return yo.forEach(function(j){T.push({multiDragElement:j,index:j.sortableIndex});var S;Uc&&j!==ur?S=-1:Uc?S=la(j,":not(."+F.options.selectedClass+")"):S=la(j),P.push({multiDragElement:j,index:S})}),{items:Yee(yo),clones:[].concat(fu),oldIndicies:T,newIndicies:P}},optionListeners:{multiDragKey:function(F){return F=F.toLowerCase(),F==="ctrl"?F="Control":F.length>1&&(F=F.charAt(0).toUpperCase()+F.substr(1)),F}}})}function Ate(U,w){yo.forEach(function(F,T){var P=w.children[F.sortableIndex+(U?Number(T):0)];P?w.insertBefore(F,P):w.appendChild(F)})}function iJ(U,w){fu.forEach(function(F,T){var P=w.children[F.sortableIndex+(U?Number(T):0)];P?w.insertBefore(F,P):w.appendChild(F)})}function CB(){yo.forEach(function(U){U!==ur&&U.parentNode&&U.parentNode.removeChild(U)})}co.mount(new xte);co.mount($K,_K);const Ote=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:Tte,Sortable:co,Swap:wte,default:co},Symbol.toStringTag,{value:"Module"})),kte=cJ(Ote);(function(U,w){(function(T,P){U.exports=P(Wee,kte)})(typeof self<"u"?self:aQ,function(F,T){return function(P){var j={};function S(B){if(j[B])return j[B].exports;var k=j[B]={i:B,l:!1,exports:{}};return P[B].call(k.exports,k,k.exports,S),k.l=!0,k.exports}return S.m=P,S.c=j,S.d=function(B,k,z){S.o(B,k)||Object.defineProperty(B,k,{enumerable:!0,get:z})},S.r=function(B){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(B,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(B,"__esModule",{value:!0})},S.t=function(B,k){if(k&1&&(B=S(B)),k&8||k&4&&typeof B=="object"&&B&&B.__esModule)return B;var z=Object.create(null);if(S.r(z),Object.defineProperty(z,"default",{enumerable:!0,value:B}),k&2&&typeof B!="string")for(var K in B)S.d(z,K,(function(J){return B[J]}).bind(null,K));return z},S.n=function(B){var k=B&&B.__esModule?function(){return B.default}:function(){return B};return S.d(k,"a",k),k},S.o=function(B,k){return Object.prototype.hasOwnProperty.call(B,k)},S.p="",S(S.s="fb15")}({"00ee":function(P,j,S){var B=S("b622"),k=B("toStringTag"),z={};z[k]="z",P.exports=String(z)==="[object z]"},"0366":function(P,j,S){var B=S("1c0b");P.exports=function(k,z,K){if(B(k),z===void 0)return k;switch(K){case 0:return function(){return k.call(z)};case 1:return function(J){return k.call(z,J)};case 2:return function(J,re){return k.call(z,J,re)};case 3:return function(J,re,ce){return k.call(z,J,re,ce)}}return function(){return k.apply(z,arguments)}}},"057f":function(P,j,S){var B=S("fc6a"),k=S("241c").f,z={}.toString,K=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],J=function(re){try{return k(re)}catch{return K.slice()}};P.exports.f=function(ce){return K&&z.call(ce)=="[object Window]"?J(ce):k(B(ce))}},"06cf":function(P,j,S){var B=S("83ab"),k=S("d1e7"),z=S("5c6c"),K=S("fc6a"),J=S("c04e"),re=S("5135"),ce=S("0cfb"),fe=Object.getOwnPropertyDescriptor;j.f=B?fe:function(Ce,_e){if(Ce=K(Ce),_e=J(_e,!0),ce)try{return fe(Ce,_e)}catch{}if(re(Ce,_e))return z(!k.f.call(Ce,_e),Ce[_e])}},"0cfb":function(P,j,S){var B=S("83ab"),k=S("d039"),z=S("cc12");P.exports=!B&&!k(function(){return Object.defineProperty(z("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(P,j,S){var B=S("23e7"),k=S("d58f").left,z=S("a640"),K=S("ae40"),J=z("reduce"),re=K("reduce",{1:0});B({target:"Array",proto:!0,forced:!J||!re},{reduce:function(fe){return k(this,fe,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(P,j,S){var B=S("c6b6"),k=S("9263");P.exports=function(z,K){var J=z.exec;if(typeof J=="function"){var re=J.call(z,K);if(typeof re!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return re}if(B(z)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return k.call(z,K)}},"159b":function(P,j,S){var B=S("da84"),k=S("fdbc"),z=S("17c2"),K=S("9112");for(var J in k){var re=B[J],ce=re&&re.prototype;if(ce&&ce.forEach!==z)try{K(ce,"forEach",z)}catch{ce.forEach=z}}},"17c2":function(P,j,S){var B=S("b727").forEach,k=S("a640"),z=S("ae40"),K=k("forEach"),J=z("forEach");P.exports=!K||!J?function(ce){return B(this,ce,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(P,j,S){var B=S("d066");P.exports=B("document","documentElement")},"1c0b":function(P,j){P.exports=function(S){if(typeof S!="function")throw TypeError(String(S)+" is not a function");return S}},"1c7e":function(P,j,S){var B=S("b622"),k=B("iterator"),z=!1;try{var K=0,J={next:function(){return{done:!!K++}},return:function(){z=!0}};J[k]=function(){return this},Array.from(J,function(){throw 2})}catch{}P.exports=function(re,ce){if(!ce&&!z)return!1;var fe=!1;try{var me={};me[k]=function(){return{next:function(){return{done:fe=!0}}}},re(me)}catch{}return fe}},"1d80":function(P,j){P.exports=function(S){if(S==null)throw TypeError("Can't call method on "+S);return S}},"1dde":function(P,j,S){var B=S("d039"),k=S("b622"),z=S("2d00"),K=k("species");P.exports=function(J){return z>=51||!B(function(){var re=[],ce=re.constructor={};return ce[K]=function(){return{foo:1}},re[J](Boolean).foo!==1})}},"23cb":function(P,j,S){var B=S("a691"),k=Math.max,z=Math.min;P.exports=function(K,J){var re=B(K);return re<0?k(re+J,0):z(re,J)}},"23e7":function(P,j,S){var B=S("da84"),k=S("06cf").f,z=S("9112"),K=S("6eeb"),J=S("ce4e"),re=S("e893"),ce=S("94ca");P.exports=function(fe,me){var Ce=fe.target,_e=fe.global,he=fe.stat,q,Te,bt,Ge,te,lt;if(_e?Te=B:he?Te=B[Ce]||J(Ce,{}):Te=(B[Ce]||{}).prototype,Te)for(bt in me){if(te=me[bt],fe.noTargetGet?(lt=k(Te,bt),Ge=lt&&lt.value):Ge=Te[bt],q=ce(_e?bt:Ce+(he?".":"#")+bt,fe.forced),!q&&Ge!==void 0){if(typeof te==typeof Ge)continue;re(te,Ge)}(fe.sham||Ge&&Ge.sham)&&z(te,"sham",!0),K(Te,bt,te,fe)}}},"241c":function(P,j,S){var B=S("ca84"),k=S("7839"),z=k.concat("length","prototype");j.f=Object.getOwnPropertyNames||function(J){return B(J,z)}},"25f0":function(P,j,S){var B=S("6eeb"),k=S("825a"),z=S("d039"),K=S("ad6d"),J="toString",re=RegExp.prototype,ce=re[J],fe=z(function(){return ce.call({source:"a",flags:"b"})!="/a/b"}),me=ce.name!=J;(fe||me)&&B(RegExp.prototype,J,function(){var _e=k(this),he=String(_e.source),q=_e.flags,Te=String(q===void 0&&_e instanceof RegExp&&!("flags"in re)?K.call(_e):q);return"/"+he+"/"+Te},{unsafe:!0})},"2ca0":function(P,j,S){var B=S("23e7"),k=S("06cf").f,z=S("50c4"),K=S("5a34"),J=S("1d80"),re=S("ab13"),ce=S("c430"),fe="".startsWith,me=Math.min,Ce=re("startsWith"),_e=!ce&&!Ce&&!!function(){var he=k(String.prototype,"startsWith");return he&&!he.writable}();B({target:"String",proto:!0,forced:!_e&&!Ce},{startsWith:function(q){var Te=String(J(this));K(q);var bt=z(me(arguments.length>1?arguments[1]:void 0,Te.length)),Ge=String(q);return fe?fe.call(Te,Ge,bt):Te.slice(bt,bt+Ge.length)===Ge}})},"2d00":function(P,j,S){var B=S("da84"),k=S("342f"),z=B.process,K=z&&z.versions,J=K&&K.v8,re,ce;J?(re=J.split("."),ce=re[0]+re[1]):k&&(re=k.match(/Edge\/(\d+)/),(!re||re[1]>=74)&&(re=k.match(/Chrome\/(\d+)/),re&&(ce=re[1]))),P.exports=ce&&+ce},"342f":function(P,j,S){var B=S("d066");P.exports=B("navigator","userAgent")||""},"35a1":function(P,j,S){var B=S("f5df"),k=S("3f8c"),z=S("b622"),K=z("iterator");P.exports=function(J){if(J!=null)return J[K]||J["@@iterator"]||k[B(J)]}},"37e8":function(P,j,S){var B=S("83ab"),k=S("9bf2"),z=S("825a"),K=S("df75");P.exports=B?Object.defineProperties:function(re,ce){z(re);for(var fe=K(ce),me=fe.length,Ce=0,_e;me>Ce;)k.f(re,_e=fe[Ce++],ce[_e]);return re}},"3bbe":function(P,j,S){var B=S("861d");P.exports=function(k){if(!B(k)&&k!==null)throw TypeError("Can't set "+String(k)+" as a prototype");return k}},"3ca3":function(P,j,S){var B=S("6547").charAt,k=S("69f3"),z=S("7dd0"),K="String Iterator",J=k.set,re=k.getterFor(K);z(String,"String",function(ce){J(this,{type:K,string:String(ce),index:0})},function(){var fe=re(this),me=fe.string,Ce=fe.index,_e;return Ce>=me.length?{value:void 0,done:!0}:(_e=B(me,Ce),fe.index+=_e.length,{value:_e,done:!1})})},"3f8c":function(P,j){P.exports={}},4160:function(P,j,S){var B=S("23e7"),k=S("17c2");B({target:"Array",proto:!0,forced:[].forEach!=k},{forEach:k})},"428f":function(P,j,S){var B=S("da84");P.exports=B},"44ad":function(P,j,S){var B=S("d039"),k=S("c6b6"),z="".split;P.exports=B(function(){return!Object("z").propertyIsEnumerable(0)})?function(K){return k(K)=="String"?z.call(K,""):Object(K)}:Object},"44d2":function(P,j,S){var B=S("b622"),k=S("7c73"),z=S("9bf2"),K=B("unscopables"),J=Array.prototype;J[K]==null&&z.f(J,K,{configurable:!0,value:k(null)}),P.exports=function(re){J[K][re]=!0}},"44e7":function(P,j,S){var B=S("861d"),k=S("c6b6"),z=S("b622"),K=z("match");P.exports=function(J){var re;return B(J)&&((re=J[K])!==void 0?!!re:k(J)=="RegExp")}},4930:function(P,j,S){var B=S("d039");P.exports=!!Object.getOwnPropertySymbols&&!B(function(){return!String(Symbol())})},"4d64":function(P,j,S){var B=S("fc6a"),k=S("50c4"),z=S("23cb"),K=function(J){return function(re,ce,fe){var me=B(re),Ce=k(me.length),_e=z(fe,Ce),he;if(J&&ce!=ce){for(;Ce>_e;)if(he=me[_e++],he!=he)return!0}else for(;Ce>_e;_e++)if((J||_e in me)&&me[_e]===ce)return J||_e||0;return!J&&-1}};P.exports={includes:K(!0),indexOf:K(!1)}},"4de4":function(P,j,S){var B=S("23e7"),k=S("b727").filter,z=S("1dde"),K=S("ae40"),J=z("filter"),re=K("filter");B({target:"Array",proto:!0,forced:!J||!re},{filter:function(fe){return k(this,fe,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(P,j,S){var B=S("0366"),k=S("7b0b"),z=S("9bdd"),K=S("e95a"),J=S("50c4"),re=S("8418"),ce=S("35a1");P.exports=function(me){var Ce=k(me),_e=typeof this=="function"?this:Array,he=arguments.length,q=he>1?arguments[1]:void 0,Te=q!==void 0,bt=ce(Ce),Ge=0,te,lt,Je,gt,ye,Et;if(Te&&(q=B(q,he>2?arguments[2]:void 0,2)),bt!=null&&!(_e==Array&&K(bt)))for(gt=bt.call(Ce),ye=gt.next,lt=new _e;!(Je=ye.call(gt)).done;Ge++)Et=Te?z(gt,q,[Je.value,Ge],!0):Je.value,re(lt,Ge,Et);else for(te=J(Ce.length),lt=new _e(te);te>Ge;Ge++)Et=Te?q(Ce[Ge],Ge):Ce[Ge],re(lt,Ge,Et);return lt.length=Ge,lt}},"4fad":function(P,j,S){var B=S("23e7"),k=S("6f53").entries;B({target:"Object",stat:!0},{entries:function(K){return k(K)}})},"50c4":function(P,j,S){var B=S("a691"),k=Math.min;P.exports=function(z){return z>0?k(B(z),9007199254740991):0}},5135:function(P,j){var S={}.hasOwnProperty;P.exports=function(B,k){return S.call(B,k)}},5319:function(P,j,S){var B=S("d784"),k=S("825a"),z=S("7b0b"),K=S("50c4"),J=S("a691"),re=S("1d80"),ce=S("8aa5"),fe=S("14c3"),me=Math.max,Ce=Math.min,_e=Math.floor,he=/\$([$&'`]|\d\d?|<[^>]*>)/g,q=/\$([$&'`]|\d\d?)/g,Te=function(bt){return bt===void 0?bt:String(bt)};B("replace",2,function(bt,Ge,te,lt){var Je=lt.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,gt=lt.REPLACE_KEEPS_$0,ye=Je?"$":"$0";return[function(at,qe){var x=re(this),gn=at==null?void 0:at[bt];return gn!==void 0?gn.call(at,x,qe):Ge.call(String(x),at,qe)},function(xt,at){if(!Je&&gt||typeof at=="string"&&at.indexOf(ye)===-1){var qe=te(Ge,xt,this,at);if(qe.done)return qe.value}var x=k(xt),gn=String(this),Ye=typeof at=="function";Ye||(at=String(at));var Qn=x.global;if(Qn){var ys=x.unicode;x.lastIndex=0}for(var ut=[];;){var Kt=fe(x,gn);if(Kt===null||(ut.push(Kt),!Qn))break;var fo=String(Kt[0]);fo===""&&(x.lastIndex=ce(gn,K(x.lastIndex),ys))}for(var Ao="",go=0,Le=0;Le<ut.length;Le++){Kt=ut[Le];for(var tt=String(Kt[0]),N=me(Ce(J(Kt.index),gn.length),0),Ps=[],qn=1;qn<Kt.length;qn++)Ps.push(Te(Kt[qn]));var is=Kt.groups;if(Ye){var Fo=[tt].concat(Ps,N,gn);is!==void 0&&Fo.push(is);var Bs=String(at.apply(void 0,Fo))}else Bs=Et(tt,gn,N,Ps,is,at);N>=go&&(Ao+=gn.slice(go,N)+Bs,go=N+tt.length)}return Ao+gn.slice(go)}];function Et(xt,at,qe,x,gn,Ye){var Qn=qe+xt.length,ys=x.length,ut=q;return gn!==void 0&&(gn=z(gn),ut=he),Ge.call(Ye,ut,function(Kt,fo){var Ao;switch(fo.charAt(0)){case"$":return"$";case"&":return xt;case"`":return at.slice(0,qe);case"'":return at.slice(Qn);case"<":Ao=gn[fo.slice(1,-1)];break;default:var go=+fo;if(go===0)return Kt;if(go>ys){var Le=_e(go/10);return Le===0?Kt:Le<=ys?x[Le-1]===void 0?fo.charAt(1):x[Le-1]+fo.charAt(1):Kt}Ao=x[go-1]}return Ao===void 0?"":Ao})}})},5692:function(P,j,S){var B=S("c430"),k=S("c6cd");(P.exports=function(z,K){return k[z]||(k[z]=K!==void 0?K:{})})("versions",[]).push({version:"3.6.5",mode:B?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(P,j,S){var B=S("d066"),k=S("241c"),z=S("7418"),K=S("825a");P.exports=B("Reflect","ownKeys")||function(re){var ce=k.f(K(re)),fe=z.f;return fe?ce.concat(fe(re)):ce}},"5a34":function(P,j,S){var B=S("44e7");P.exports=function(k){if(B(k))throw TypeError("The method doesn't accept regular expressions");return k}},"5c6c":function(P,j){P.exports=function(S,B){return{enumerable:!(S&1),configurable:!(S&2),writable:!(S&4),value:B}}},"5db7":function(P,j,S){var B=S("23e7"),k=S("a2bf"),z=S("7b0b"),K=S("50c4"),J=S("1c0b"),re=S("65f0");B({target:"Array",proto:!0},{flatMap:function(fe){var me=z(this),Ce=K(me.length),_e;return J(fe),_e=re(me,0),_e.length=k(_e,me,me,Ce,0,1,fe,arguments.length>1?arguments[1]:void 0),_e}})},6547:function(P,j,S){var B=S("a691"),k=S("1d80"),z=function(K){return function(J,re){var ce=String(k(J)),fe=B(re),me=ce.length,Ce,_e;return fe<0||fe>=me?K?"":void 0:(Ce=ce.charCodeAt(fe),Ce<55296||Ce>56319||fe+1===me||(_e=ce.charCodeAt(fe+1))<56320||_e>57343?K?ce.charAt(fe):Ce:K?ce.slice(fe,fe+2):(Ce-55296<<10)+(_e-56320)+65536)}};P.exports={codeAt:z(!1),charAt:z(!0)}},"65f0":function(P,j,S){var B=S("861d"),k=S("e8b5"),z=S("b622"),K=z("species");P.exports=function(J,re){var ce;return k(J)&&(ce=J.constructor,typeof ce=="function"&&(ce===Array||k(ce.prototype))?ce=void 0:B(ce)&&(ce=ce[K],ce===null&&(ce=void 0))),new(ce===void 0?Array:ce)(re===0?0:re)}},"69f3":function(P,j,S){var B=S("7f9a"),k=S("da84"),z=S("861d"),K=S("9112"),J=S("5135"),re=S("f772"),ce=S("d012"),fe=k.WeakMap,me,Ce,_e,he=function(Je){return _e(Je)?Ce(Je):me(Je,{})},q=function(Je){return function(gt){var ye;if(!z(gt)||(ye=Ce(gt)).type!==Je)throw TypeError("Incompatible receiver, "+Je+" required");return ye}};if(B){var Te=new fe,bt=Te.get,Ge=Te.has,te=Te.set;me=function(Je,gt){return te.call(Te,Je,gt),gt},Ce=function(Je){return bt.call(Te,Je)||{}},_e=function(Je){return Ge.call(Te,Je)}}else{var lt=re("state");ce[lt]=!0,me=function(Je,gt){return K(Je,lt,gt),gt},Ce=function(Je){return J(Je,lt)?Je[lt]:{}},_e=function(Je){return J(Je,lt)}}P.exports={set:me,get:Ce,has:_e,enforce:he,getterFor:q}},"6eeb":function(P,j,S){var B=S("da84"),k=S("9112"),z=S("5135"),K=S("ce4e"),J=S("8925"),re=S("69f3"),ce=re.get,fe=re.enforce,me=String(String).split("String");(P.exports=function(Ce,_e,he,q){var Te=q?!!q.unsafe:!1,bt=q?!!q.enumerable:!1,Ge=q?!!q.noTargetGet:!1;if(typeof he=="function"&&(typeof _e=="string"&&!z(he,"name")&&k(he,"name",_e),fe(he).source=me.join(typeof _e=="string"?_e:"")),Ce===B){bt?Ce[_e]=he:K(_e,he);return}else Te?!Ge&&Ce[_e]&&(bt=!0):delete Ce[_e];bt?Ce[_e]=he:k(Ce,_e,he)})(Function.prototype,"toString",function(){return typeof this=="function"&&ce(this).source||J(this)})},"6f53":function(P,j,S){var B=S("83ab"),k=S("df75"),z=S("fc6a"),K=S("d1e7").f,J=function(re){return function(ce){for(var fe=z(ce),me=k(fe),Ce=me.length,_e=0,he=[],q;Ce>_e;)q=me[_e++],(!B||K.call(fe,q))&&he.push(re?[q,fe[q]]:fe[q]);return he}};P.exports={entries:J(!0),values:J(!1)}},"73d9":function(P,j,S){var B=S("44d2");B("flatMap")},7418:function(P,j){j.f=Object.getOwnPropertySymbols},"746f":function(P,j,S){var B=S("428f"),k=S("5135"),z=S("e538"),K=S("9bf2").f;P.exports=function(J){var re=B.Symbol||(B.Symbol={});k(re,J)||K(re,J,{value:z.f(J)})}},7839:function(P,j){P.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(P,j,S){var B=S("1d80");P.exports=function(k){return Object(B(k))}},"7c73":function(P,j,S){var B=S("825a"),k=S("37e8"),z=S("7839"),K=S("d012"),J=S("1be4"),re=S("cc12"),ce=S("f772"),fe=">",me="<",Ce="prototype",_e="script",he=ce("IE_PROTO"),q=function(){},Te=function(Je){return me+_e+fe+Je+me+"/"+_e+fe},bt=function(Je){Je.write(Te("")),Je.close();var gt=Je.parentWindow.Object;return Je=null,gt},Ge=function(){var Je=re("iframe"),gt="java"+_e+":",ye;return Je.style.display="none",J.appendChild(Je),Je.src=String(gt),ye=Je.contentWindow.document,ye.open(),ye.write(Te("document.F=Object")),ye.close(),ye.F},te,lt=function(){try{te=document.domain&&new ActiveXObject("htmlfile")}catch{}lt=te?bt(te):Ge();for(var Je=z.length;Je--;)delete lt[Ce][z[Je]];return lt()};K[he]=!0,P.exports=Object.create||function(gt,ye){var Et;return gt!==null?(q[Ce]=B(gt),Et=new q,q[Ce]=null,Et[he]=gt):Et=lt(),ye===void 0?Et:k(Et,ye)}},"7dd0":function(P,j,S){var B=S("23e7"),k=S("9ed3"),z=S("e163"),K=S("d2bb"),J=S("d44e"),re=S("9112"),ce=S("6eeb"),fe=S("b622"),me=S("c430"),Ce=S("3f8c"),_e=S("ae93"),he=_e.IteratorPrototype,q=_e.BUGGY_SAFARI_ITERATORS,Te=fe("iterator"),bt="keys",Ge="values",te="entries",lt=function(){return this};P.exports=function(Je,gt,ye,Et,xt,at,qe){k(ye,gt,Et);var x=function(Le){if(Le===xt&&ut)return ut;if(!q&&Le in Qn)return Qn[Le];switch(Le){case bt:return function(){return new ye(this,Le)};case Ge:return function(){return new ye(this,Le)};case te:return function(){return new ye(this,Le)}}return function(){return new ye(this)}},gn=gt+" Iterator",Ye=!1,Qn=Je.prototype,ys=Qn[Te]||Qn["@@iterator"]||xt&&Qn[xt],ut=!q&&ys||x(xt),Kt=gt=="Array"&&Qn.entries||ys,fo,Ao,go;if(Kt&&(fo=z(Kt.call(new Je)),he!==Object.prototype&&fo.next&&(!me&&z(fo)!==he&&(K?K(fo,he):typeof fo[Te]!="function"&&re(fo,Te,lt)),J(fo,gn,!0,!0),me&&(Ce[gn]=lt))),xt==Ge&&ys&&ys.name!==Ge&&(Ye=!0,ut=function(){return ys.call(this)}),(!me||qe)&&Qn[Te]!==ut&&re(Qn,Te,ut),Ce[gt]=ut,xt)if(Ao={values:x(Ge),keys:at?ut:x(bt),entries:x(te)},qe)for(go in Ao)(q||Ye||!(go in Qn))&&ce(Qn,go,Ao[go]);else B({target:gt,proto:!0,forced:q||Ye},Ao);return Ao}},"7f9a":function(P,j,S){var B=S("da84"),k=S("8925"),z=B.WeakMap;P.exports=typeof z=="function"&&/native code/.test(k(z))},"825a":function(P,j,S){var B=S("861d");P.exports=function(k){if(!B(k))throw TypeError(String(k)+" is not an object");return k}},"83ab":function(P,j,S){var B=S("d039");P.exports=!B(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(P,j,S){var B=S("c04e"),k=S("9bf2"),z=S("5c6c");P.exports=function(K,J,re){var ce=B(J);ce in K?k.f(K,ce,z(0,re)):K[ce]=re}},"861d":function(P,j){P.exports=function(S){return typeof S=="object"?S!==null:typeof S=="function"}},8875:function(P,j,S){var B,k,z;(function(K,J){k=[],B=J,z=typeof B=="function"?B.apply(j,k):B,z!==void 0&&(P.exports=z)})(typeof self<"u"?self:this,function(){function K(){var J=Object.getOwnPropertyDescriptor(document,"currentScript");if(!J&&"currentScript"in document&&document.currentScript||J&&J.get!==K&&document.currentScript)return document.currentScript;try{throw new Error}catch(te){var re=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,ce=/@([^@]*):(\d+):(\d+)\s*$/ig,fe=re.exec(te.stack)||ce.exec(te.stack),me=fe&&fe[1]||!1,Ce=fe&&fe[2]||!1,_e=document.location.href.replace(document.location.hash,""),he,q,Te,bt=document.getElementsByTagName("script");me===_e&&(he=document.documentElement.outerHTML,q=new RegExp("(?:[^\\n]+?\\n){0,"+(Ce-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),Te=he.replace(q,"$1").trim());for(var Ge=0;Ge<bt.length;Ge++)if(bt[Ge].readyState==="interactive"||bt[Ge].src===me||me===_e&&bt[Ge].innerHTML&&bt[Ge].innerHTML.trim()===Te)return bt[Ge];return null}}return K})},8925:function(P,j,S){var B=S("c6cd"),k=Function.toString;typeof B.inspectSource!="function"&&(B.inspectSource=function(z){return k.call(z)}),P.exports=B.inspectSource},"8aa5":function(P,j,S){var B=S("6547").charAt;P.exports=function(k,z,K){return z+(K?B(k,z).length:1)}},"8bbf":function(P,j){P.exports=F},"90e3":function(P,j){var S=0,B=Math.random();P.exports=function(k){return"Symbol("+String(k===void 0?"":k)+")_"+(++S+B).toString(36)}},9112:function(P,j,S){var B=S("83ab"),k=S("9bf2"),z=S("5c6c");P.exports=B?function(K,J,re){return k.f(K,J,z(1,re))}:function(K,J,re){return K[J]=re,K}},9263:function(P,j,S){var B=S("ad6d"),k=S("9f7f"),z=RegExp.prototype.exec,K=String.prototype.replace,J=z,re=function(){var Ce=/a/,_e=/b*/g;return z.call(Ce,"a"),z.call(_e,"a"),Ce.lastIndex!==0||_e.lastIndex!==0}(),ce=k.UNSUPPORTED_Y||k.BROKEN_CARET,fe=/()??/.exec("")[1]!==void 0,me=re||fe||ce;me&&(J=function(_e){var he=this,q,Te,bt,Ge,te=ce&&he.sticky,lt=B.call(he),Je=he.source,gt=0,ye=_e;return te&&(lt=lt.replace("y",""),lt.indexOf("g")===-1&&(lt+="g"),ye=String(_e).slice(he.lastIndex),he.lastIndex>0&&(!he.multiline||he.multiline&&_e[he.lastIndex-1]!==`
`)&&(Je="(?: "+Je+")",ye=" "+ye,gt++),Te=new RegExp("^(?:"+Je+")",lt)),fe&&(Te=new RegExp("^"+Je+"$(?!\\s)",lt)),re&&(q=he.lastIndex),bt=z.call(te?Te:he,ye),te?bt?(bt.input=bt.input.slice(gt),bt[0]=bt[0].slice(gt),bt.index=he.lastIndex,he.lastIndex+=bt[0].length):he.lastIndex=0:re&&bt&&(he.lastIndex=he.global?bt.index+bt[0].length:q),fe&&bt&&bt.length>1&&K.call(bt[0],Te,function(){for(Ge=1;Ge<arguments.length-2;Ge++)arguments[Ge]===void 0&&(bt[Ge]=void 0)}),bt}),P.exports=J},"94ca":function(P,j,S){var B=S("d039"),k=/#|\.prototype\./,z=function(fe,me){var Ce=J[K(fe)];return Ce==ce?!0:Ce==re?!1:typeof me=="function"?B(me):!!me},K=z.normalize=function(fe){return String(fe).replace(k,".").toLowerCase()},J=z.data={},re=z.NATIVE="N",ce=z.POLYFILL="P";P.exports=z},"99af":function(P,j,S){var B=S("23e7"),k=S("d039"),z=S("e8b5"),K=S("861d"),J=S("7b0b"),re=S("50c4"),ce=S("8418"),fe=S("65f0"),me=S("1dde"),Ce=S("b622"),_e=S("2d00"),he=Ce("isConcatSpreadable"),q=9007199254740991,Te="Maximum allowed index exceeded",bt=_e>=51||!k(function(){var Je=[];return Je[he]=!1,Je.concat()[0]!==Je}),Ge=me("concat"),te=function(Je){if(!K(Je))return!1;var gt=Je[he];return gt!==void 0?!!gt:z(Je)},lt=!bt||!Ge;B({target:"Array",proto:!0,forced:lt},{concat:function(gt){var ye=J(this),Et=fe(ye,0),xt=0,at,qe,x,gn,Ye;for(at=-1,x=arguments.length;at<x;at++)if(Ye=at===-1?ye:arguments[at],te(Ye)){if(gn=re(Ye.length),xt+gn>q)throw TypeError(Te);for(qe=0;qe<gn;qe++,xt++)qe in Ye&&ce(Et,xt,Ye[qe])}else{if(xt>=q)throw TypeError(Te);ce(Et,xt++,Ye)}return Et.length=xt,Et}})},"9bdd":function(P,j,S){var B=S("825a");P.exports=function(k,z,K,J){try{return J?z(B(K)[0],K[1]):z(K)}catch(ce){var re=k.return;throw re!==void 0&&B(re.call(k)),ce}}},"9bf2":function(P,j,S){var B=S("83ab"),k=S("0cfb"),z=S("825a"),K=S("c04e"),J=Object.defineProperty;j.f=B?J:function(ce,fe,me){if(z(ce),fe=K(fe,!0),z(me),k)try{return J(ce,fe,me)}catch{}if("get"in me||"set"in me)throw TypeError("Accessors not supported");return"value"in me&&(ce[fe]=me.value),ce}},"9ed3":function(P,j,S){var B=S("ae93").IteratorPrototype,k=S("7c73"),z=S("5c6c"),K=S("d44e"),J=S("3f8c"),re=function(){return this};P.exports=function(ce,fe,me){var Ce=fe+" Iterator";return ce.prototype=k(B,{next:z(1,me)}),K(ce,Ce,!1,!0),J[Ce]=re,ce}},"9f7f":function(P,j,S){var B=S("d039");function k(z,K){return RegExp(z,K)}j.UNSUPPORTED_Y=B(function(){var z=k("a","y");return z.lastIndex=2,z.exec("abcd")!=null}),j.BROKEN_CARET=B(function(){var z=k("^r","gy");return z.lastIndex=2,z.exec("str")!=null})},a2bf:function(P,j,S){var B=S("e8b5"),k=S("50c4"),z=S("0366"),K=function(J,re,ce,fe,me,Ce,_e,he){for(var q=me,Te=0,bt=_e?z(_e,he,3):!1,Ge;Te<fe;){if(Te in ce){if(Ge=bt?bt(ce[Te],Te,re):ce[Te],Ce>0&&B(Ge))q=K(J,re,Ge,k(Ge.length),q,Ce-1)-1;else{if(q>=9007199254740991)throw TypeError("Exceed the acceptable array length");J[q]=Ge}q++}Te++}return q};P.exports=K},a352:function(P,j){P.exports=T},a434:function(P,j,S){var B=S("23e7"),k=S("23cb"),z=S("a691"),K=S("50c4"),J=S("7b0b"),re=S("65f0"),ce=S("8418"),fe=S("1dde"),me=S("ae40"),Ce=fe("splice"),_e=me("splice",{ACCESSORS:!0,0:0,1:2}),he=Math.max,q=Math.min,Te=9007199254740991,bt="Maximum allowed length exceeded";B({target:"Array",proto:!0,forced:!Ce||!_e},{splice:function(te,lt){var Je=J(this),gt=K(Je.length),ye=k(te,gt),Et=arguments.length,xt,at,qe,x,gn,Ye;if(Et===0?xt=at=0:Et===1?(xt=0,at=gt-ye):(xt=Et-2,at=q(he(z(lt),0),gt-ye)),gt+xt-at>Te)throw TypeError(bt);for(qe=re(Je,at),x=0;x<at;x++)gn=ye+x,gn in Je&&ce(qe,x,Je[gn]);if(qe.length=at,xt<at){for(x=ye;x<gt-at;x++)gn=x+at,Ye=x+xt,gn in Je?Je[Ye]=Je[gn]:delete Je[Ye];for(x=gt;x>gt-at+xt;x--)delete Je[x-1]}else if(xt>at)for(x=gt-at;x>ye;x--)gn=x+at-1,Ye=x+xt-1,gn in Je?Je[Ye]=Je[gn]:delete Je[Ye];for(x=0;x<xt;x++)Je[x+ye]=arguments[x+2];return Je.length=gt-at+xt,qe}})},a4d3:function(P,j,S){var B=S("23e7"),k=S("da84"),z=S("d066"),K=S("c430"),J=S("83ab"),re=S("4930"),ce=S("fdbf"),fe=S("d039"),me=S("5135"),Ce=S("e8b5"),_e=S("861d"),he=S("825a"),q=S("7b0b"),Te=S("fc6a"),bt=S("c04e"),Ge=S("5c6c"),te=S("7c73"),lt=S("df75"),Je=S("241c"),gt=S("057f"),ye=S("7418"),Et=S("06cf"),xt=S("9bf2"),at=S("d1e7"),qe=S("9112"),x=S("6eeb"),gn=S("5692"),Ye=S("f772"),Qn=S("d012"),ys=S("90e3"),ut=S("b622"),Kt=S("e538"),fo=S("746f"),Ao=S("d44e"),go=S("69f3"),Le=S("b727").forEach,tt=Ye("hidden"),N="Symbol",Ps="prototype",qn=ut("toPrimitive"),is=go.set,Fo=go.getterFor(N),Bs=Object[Ps],Ft=k.Symbol,Cn=z("JSON","stringify"),Yt=Et.f,ke=xt.f,Wr=gt.f,Rr=at.f,Nt=gn("symbols"),Qs=gn("op-symbols"),ts=gn("string-to-symbol-registry"),yi=gn("symbol-to-string-registry"),Oo=gn("wks"),Ns=k.QObject,jr=!Ns||!Ns[Ps]||!Ns[Ps].findChild,Cs=J&&fe(function(){return te(ke({},"a",{get:function(){return ke(this,"a",{value:7}).a}})).a!=7})?function(Dn,Xt,nn){var Be=Yt(Bs,Xt);Be&&delete Bs[Xt],ke(Dn,Xt,nn),Be&&Dn!==Bs&&ke(Bs,Xt,Be)}:ke,Tn=function(Dn,Xt){var nn=Nt[Dn]=te(Ft[Ps]);return is(nn,{type:N,tag:Dn,description:Xt}),J||(nn.description=Xt),nn},Me=ce?function(Dn){return typeof Dn=="symbol"}:function(Dn){return Object(Dn)instanceof Ft},$e=function(Xt,nn,Be){Xt===Bs&&$e(Qs,nn,Be),he(Xt);var _t=bt(nn,!0);return he(Be),me(Nt,_t)?(Be.enumerable?(me(Xt,tt)&&Xt[tt][_t]&&(Xt[tt][_t]=!1),Be=te(Be,{enumerable:Ge(0,!1)})):(me(Xt,tt)||ke(Xt,tt,Ge(1,{})),Xt[tt][_t]=!0),Cs(Xt,_t,Be)):ke(Xt,_t,Be)},ze=function(Xt,nn){he(Xt);var Be=Te(nn),_t=lt(Be).concat(Hn(Be));return Le(_t,function(Lo){(!J||tn.call(Be,Lo))&&$e(Xt,Lo,Be[Lo])}),Xt},ot=function(Xt,nn){return nn===void 0?te(Xt):ze(te(Xt),nn)},tn=function(Xt){var nn=bt(Xt,!0),Be=Rr.call(this,nn);return this===Bs&&me(Nt,nn)&&!me(Qs,nn)?!1:Be||!me(this,nn)||!me(Nt,nn)||me(this,tt)&&this[tt][nn]?Be:!0},an=function(Xt,nn){var Be=Te(Xt),_t=bt(nn,!0);if(!(Be===Bs&&me(Nt,_t)&&!me(Qs,_t))){var Lo=Yt(Be,_t);return Lo&&me(Nt,_t)&&!(me(Be,tt)&&Be[tt][_t])&&(Lo.enumerable=!0),Lo}},An=function(Xt){var nn=Wr(Te(Xt)),Be=[];return Le(nn,function(_t){!me(Nt,_t)&&!me(Qn,_t)&&Be.push(_t)}),Be},Hn=function(Xt){var nn=Xt===Bs,Be=Wr(nn?Qs:Te(Xt)),_t=[];return Le(Be,function(Lo){me(Nt,Lo)&&(!nn||me(Bs,Lo))&&_t.push(Nt[Lo])}),_t};if(re||(Ft=function(){if(this instanceof Ft)throw TypeError("Symbol is not a constructor");var Xt=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),nn=ys(Xt),Be=function(_t){this===Bs&&Be.call(Qs,_t),me(this,tt)&&me(this[tt],nn)&&(this[tt][nn]=!1),Cs(this,nn,Ge(1,_t))};return J&&jr&&Cs(Bs,nn,{configurable:!0,set:Be}),Tn(nn,Xt)},x(Ft[Ps],"toString",function(){return Fo(this).tag}),x(Ft,"withoutSetter",function(Dn){return Tn(ys(Dn),Dn)}),at.f=tn,xt.f=$e,Et.f=an,Je.f=gt.f=An,ye.f=Hn,Kt.f=function(Dn){return Tn(ut(Dn),Dn)},J&&(ke(Ft[Ps],"description",{configurable:!0,get:function(){return Fo(this).description}}),K||x(Bs,"propertyIsEnumerable",tn,{unsafe:!0}))),B({global:!0,wrap:!0,forced:!re,sham:!re},{Symbol:Ft}),Le(lt(Oo),function(Dn){fo(Dn)}),B({target:N,stat:!0,forced:!re},{for:function(Dn){var Xt=String(Dn);if(me(ts,Xt))return ts[Xt];var nn=Ft(Xt);return ts[Xt]=nn,yi[nn]=Xt,nn},keyFor:function(Xt){if(!Me(Xt))throw TypeError(Xt+" is not a symbol");if(me(yi,Xt))return yi[Xt]},useSetter:function(){jr=!0},useSimple:function(){jr=!1}}),B({target:"Object",stat:!0,forced:!re,sham:!J},{create:ot,defineProperty:$e,defineProperties:ze,getOwnPropertyDescriptor:an}),B({target:"Object",stat:!0,forced:!re},{getOwnPropertyNames:An,getOwnPropertySymbols:Hn}),B({target:"Object",stat:!0,forced:fe(function(){ye.f(1)})},{getOwnPropertySymbols:function(Xt){return ye.f(q(Xt))}}),Cn){var xo=!re||fe(function(){var Dn=Ft();return Cn([Dn])!="[null]"||Cn({a:Dn})!="{}"||Cn(Object(Dn))!="{}"});B({target:"JSON",stat:!0,forced:xo},{stringify:function(Xt,nn,Be){for(var _t=[Xt],Lo=1,zi;arguments.length>Lo;)_t.push(arguments[Lo++]);if(zi=nn,!(!_e(nn)&&Xt===void 0||Me(Xt)))return Ce(nn)||(nn=function(Pr,Dt){if(typeof zi=="function"&&(Dt=zi.call(this,Pr,Dt)),!Me(Dt))return Dt}),_t[1]=nn,Cn.apply(null,_t)}})}Ft[Ps][qn]||qe(Ft[Ps],qn,Ft[Ps].valueOf),Ao(Ft,N),Qn[tt]=!0},a630:function(P,j,S){var B=S("23e7"),k=S("4df4"),z=S("1c7e"),K=!z(function(J){Array.from(J)});B({target:"Array",stat:!0,forced:K},{from:k})},a640:function(P,j,S){var B=S("d039");P.exports=function(k,z){var K=[][k];return!!K&&B(function(){K.call(null,z||function(){throw 1},1)})}},a691:function(P,j){var S=Math.ceil,B=Math.floor;P.exports=function(k){return isNaN(k=+k)?0:(k>0?B:S)(k)}},ab13:function(P,j,S){var B=S("b622"),k=B("match");P.exports=function(z){var K=/./;try{"/./"[z](K)}catch{try{return K[k]=!1,"/./"[z](K)}catch{}}return!1}},ac1f:function(P,j,S){var B=S("23e7"),k=S("9263");B({target:"RegExp",proto:!0,forced:/./.exec!==k},{exec:k})},ad6d:function(P,j,S){var B=S("825a");P.exports=function(){var k=B(this),z="";return k.global&&(z+="g"),k.ignoreCase&&(z+="i"),k.multiline&&(z+="m"),k.dotAll&&(z+="s"),k.unicode&&(z+="u"),k.sticky&&(z+="y"),z}},ae40:function(P,j,S){var B=S("83ab"),k=S("d039"),z=S("5135"),K=Object.defineProperty,J={},re=function(ce){throw ce};P.exports=function(ce,fe){if(z(J,ce))return J[ce];fe||(fe={});var me=[][ce],Ce=z(fe,"ACCESSORS")?fe.ACCESSORS:!1,_e=z(fe,0)?fe[0]:re,he=z(fe,1)?fe[1]:void 0;return J[ce]=!!me&&!k(function(){if(Ce&&!B)return!0;var q={length:-1};Ce?K(q,1,{enumerable:!0,get:re}):q[1]=1,me.call(q,_e,he)})}},ae93:function(P,j,S){var B=S("e163"),k=S("9112"),z=S("5135"),K=S("b622"),J=S("c430"),re=K("iterator"),ce=!1,fe=function(){return this},me,Ce,_e;[].keys&&(_e=[].keys(),"next"in _e?(Ce=B(B(_e)),Ce!==Object.prototype&&(me=Ce)):ce=!0),me==null&&(me={}),!J&&!z(me,re)&&k(me,re,fe),P.exports={IteratorPrototype:me,BUGGY_SAFARI_ITERATORS:ce}},b041:function(P,j,S){var B=S("00ee"),k=S("f5df");P.exports=B?{}.toString:function(){return"[object "+k(this)+"]"}},b0c0:function(P,j,S){var B=S("83ab"),k=S("9bf2").f,z=Function.prototype,K=z.toString,J=/^\s*function ([^ (]*)/,re="name";B&&!(re in z)&&k(z,re,{configurable:!0,get:function(){try{return K.call(this).match(J)[1]}catch{return""}}})},b622:function(P,j,S){var B=S("da84"),k=S("5692"),z=S("5135"),K=S("90e3"),J=S("4930"),re=S("fdbf"),ce=k("wks"),fe=B.Symbol,me=re?fe:fe&&fe.withoutSetter||K;P.exports=function(Ce){return z(ce,Ce)||(J&&z(fe,Ce)?ce[Ce]=fe[Ce]:ce[Ce]=me("Symbol."+Ce)),ce[Ce]}},b64b:function(P,j,S){var B=S("23e7"),k=S("7b0b"),z=S("df75"),K=S("d039"),J=K(function(){z(1)});B({target:"Object",stat:!0,forced:J},{keys:function(ce){return z(k(ce))}})},b727:function(P,j,S){var B=S("0366"),k=S("44ad"),z=S("7b0b"),K=S("50c4"),J=S("65f0"),re=[].push,ce=function(fe){var me=fe==1,Ce=fe==2,_e=fe==3,he=fe==4,q=fe==6,Te=fe==5||q;return function(bt,Ge,te,lt){for(var Je=z(bt),gt=k(Je),ye=B(Ge,te,3),Et=K(gt.length),xt=0,at=lt||J,qe=me?at(bt,Et):Ce?at(bt,0):void 0,x,gn;Et>xt;xt++)if((Te||xt in gt)&&(x=gt[xt],gn=ye(x,xt,Je),fe)){if(me)qe[xt]=gn;else if(gn)switch(fe){case 3:return!0;case 5:return x;case 6:return xt;case 2:re.call(qe,x)}else if(he)return!1}return q?-1:_e||he?he:qe}};P.exports={forEach:ce(0),map:ce(1),filter:ce(2),some:ce(3),every:ce(4),find:ce(5),findIndex:ce(6)}},c04e:function(P,j,S){var B=S("861d");P.exports=function(k,z){if(!B(k))return k;var K,J;if(z&&typeof(K=k.toString)=="function"&&!B(J=K.call(k))||typeof(K=k.valueOf)=="function"&&!B(J=K.call(k))||!z&&typeof(K=k.toString)=="function"&&!B(J=K.call(k)))return J;throw TypeError("Can't convert object to primitive value")}},c430:function(P,j){P.exports=!1},c6b6:function(P,j){var S={}.toString;P.exports=function(B){return S.call(B).slice(8,-1)}},c6cd:function(P,j,S){var B=S("da84"),k=S("ce4e"),z="__core-js_shared__",K=B[z]||k(z,{});P.exports=K},c740:function(P,j,S){var B=S("23e7"),k=S("b727").findIndex,z=S("44d2"),K=S("ae40"),J="findIndex",re=!0,ce=K(J);J in[]&&Array(1)[J](function(){re=!1}),B({target:"Array",proto:!0,forced:re||!ce},{findIndex:function(me){return k(this,me,arguments.length>1?arguments[1]:void 0)}}),z(J)},c8ba:function(P,j){var S;S=function(){return this}();try{S=S||new Function("return this")()}catch{typeof window=="object"&&(S=window)}P.exports=S},c975:function(P,j,S){var B=S("23e7"),k=S("4d64").indexOf,z=S("a640"),K=S("ae40"),J=[].indexOf,re=!!J&&1/[1].indexOf(1,-0)<0,ce=z("indexOf"),fe=K("indexOf",{ACCESSORS:!0,1:0});B({target:"Array",proto:!0,forced:re||!ce||!fe},{indexOf:function(Ce){return re?J.apply(this,arguments)||0:k(this,Ce,arguments.length>1?arguments[1]:void 0)}})},ca84:function(P,j,S){var B=S("5135"),k=S("fc6a"),z=S("4d64").indexOf,K=S("d012");P.exports=function(J,re){var ce=k(J),fe=0,me=[],Ce;for(Ce in ce)!B(K,Ce)&&B(ce,Ce)&&me.push(Ce);for(;re.length>fe;)B(ce,Ce=re[fe++])&&(~z(me,Ce)||me.push(Ce));return me}},caad:function(P,j,S){var B=S("23e7"),k=S("4d64").includes,z=S("44d2"),K=S("ae40"),J=K("indexOf",{ACCESSORS:!0,1:0});B({target:"Array",proto:!0,forced:!J},{includes:function(ce){return k(this,ce,arguments.length>1?arguments[1]:void 0)}}),z("includes")},cc12:function(P,j,S){var B=S("da84"),k=S("861d"),z=B.document,K=k(z)&&k(z.createElement);P.exports=function(J){return K?z.createElement(J):{}}},ce4e:function(P,j,S){var B=S("da84"),k=S("9112");P.exports=function(z,K){try{k(B,z,K)}catch{B[z]=K}return K}},d012:function(P,j){P.exports={}},d039:function(P,j){P.exports=function(S){try{return!!S()}catch{return!0}}},d066:function(P,j,S){var B=S("428f"),k=S("da84"),z=function(K){return typeof K=="function"?K:void 0};P.exports=function(K,J){return arguments.length<2?z(B[K])||z(k[K]):B[K]&&B[K][J]||k[K]&&k[K][J]}},d1e7:function(P,j,S){var B={}.propertyIsEnumerable,k=Object.getOwnPropertyDescriptor,z=k&&!B.call({1:2},1);j.f=z?function(J){var re=k(this,J);return!!re&&re.enumerable}:B},d28b:function(P,j,S){var B=S("746f");B("iterator")},d2bb:function(P,j,S){var B=S("825a"),k=S("3bbe");P.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var z=!1,K={},J;try{J=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,J.call(K,[]),z=K instanceof Array}catch{}return function(ce,fe){return B(ce),k(fe),z?J.call(ce,fe):ce.__proto__=fe,ce}}():void 0)},d3b7:function(P,j,S){var B=S("00ee"),k=S("6eeb"),z=S("b041");B||k(Object.prototype,"toString",z,{unsafe:!0})},d44e:function(P,j,S){var B=S("9bf2").f,k=S("5135"),z=S("b622"),K=z("toStringTag");P.exports=function(J,re,ce){J&&!k(J=ce?J:J.prototype,K)&&B(J,K,{configurable:!0,value:re})}},d58f:function(P,j,S){var B=S("1c0b"),k=S("7b0b"),z=S("44ad"),K=S("50c4"),J=function(re){return function(ce,fe,me,Ce){B(fe);var _e=k(ce),he=z(_e),q=K(_e.length),Te=re?q-1:0,bt=re?-1:1;if(me<2)for(;;){if(Te in he){Ce=he[Te],Te+=bt;break}if(Te+=bt,re?Te<0:q<=Te)throw TypeError("Reduce of empty array with no initial value")}for(;re?Te>=0:q>Te;Te+=bt)Te in he&&(Ce=fe(Ce,he[Te],Te,_e));return Ce}};P.exports={left:J(!1),right:J(!0)}},d784:function(P,j,S){S("ac1f");var B=S("6eeb"),k=S("d039"),z=S("b622"),K=S("9263"),J=S("9112"),re=z("species"),ce=!k(function(){var he=/./;return he.exec=function(){var q=[];return q.groups={a:"7"},q},"".replace(he,"$<a>")!=="7"}),fe=function(){return"a".replace(/./,"$0")==="$0"}(),me=z("replace"),Ce=function(){return/./[me]?/./[me]("a","$0")==="":!1}(),_e=!k(function(){var he=/(?:)/,q=he.exec;he.exec=function(){return q.apply(this,arguments)};var Te="ab".split(he);return Te.length!==2||Te[0]!=="a"||Te[1]!=="b"});P.exports=function(he,q,Te,bt){var Ge=z(he),te=!k(function(){var xt={};return xt[Ge]=function(){return 7},""[he](xt)!=7}),lt=te&&!k(function(){var xt=!1,at=/a/;return he==="split"&&(at={},at.constructor={},at.constructor[re]=function(){return at},at.flags="",at[Ge]=/./[Ge]),at.exec=function(){return xt=!0,null},at[Ge](""),!xt});if(!te||!lt||he==="replace"&&!(ce&&fe&&!Ce)||he==="split"&&!_e){var Je=/./[Ge],gt=Te(Ge,""[he],function(xt,at,qe,x,gn){return at.exec===K?te&&!gn?{done:!0,value:Je.call(at,qe,x)}:{done:!0,value:xt.call(qe,at,x)}:{done:!1}},{REPLACE_KEEPS_$0:fe,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Ce}),ye=gt[0],Et=gt[1];B(String.prototype,he,ye),B(RegExp.prototype,Ge,q==2?function(xt,at){return Et.call(xt,this,at)}:function(xt){return Et.call(xt,this)})}bt&&J(RegExp.prototype[Ge],"sham",!0)}},d81d:function(P,j,S){var B=S("23e7"),k=S("b727").map,z=S("1dde"),K=S("ae40"),J=z("map"),re=K("map");B({target:"Array",proto:!0,forced:!J||!re},{map:function(fe){return k(this,fe,arguments.length>1?arguments[1]:void 0)}})},da84:function(P,j,S){(function(B){var k=function(z){return z&&z.Math==Math&&z};P.exports=k(typeof globalThis=="object"&&globalThis)||k(typeof window=="object"&&window)||k(typeof self=="object"&&self)||k(typeof B=="object"&&B)||Function("return this")()}).call(this,S("c8ba"))},dbb4:function(P,j,S){var B=S("23e7"),k=S("83ab"),z=S("56ef"),K=S("fc6a"),J=S("06cf"),re=S("8418");B({target:"Object",stat:!0,sham:!k},{getOwnPropertyDescriptors:function(fe){for(var me=K(fe),Ce=J.f,_e=z(me),he={},q=0,Te,bt;_e.length>q;)bt=Ce(me,Te=_e[q++]),bt!==void 0&&re(he,Te,bt);return he}})},dbf1:function(P,j,S){(function(B){S.d(j,"a",function(){return z});function k(){return typeof window<"u"?window.console:B.console}var z=k()}).call(this,S("c8ba"))},ddb0:function(P,j,S){var B=S("da84"),k=S("fdbc"),z=S("e260"),K=S("9112"),J=S("b622"),re=J("iterator"),ce=J("toStringTag"),fe=z.values;for(var me in k){var Ce=B[me],_e=Ce&&Ce.prototype;if(_e){if(_e[re]!==fe)try{K(_e,re,fe)}catch{_e[re]=fe}if(_e[ce]||K(_e,ce,me),k[me]){for(var he in z)if(_e[he]!==z[he])try{K(_e,he,z[he])}catch{_e[he]=z[he]}}}}},df75:function(P,j,S){var B=S("ca84"),k=S("7839");P.exports=Object.keys||function(K){return B(K,k)}},e01a:function(P,j,S){var B=S("23e7"),k=S("83ab"),z=S("da84"),K=S("5135"),J=S("861d"),re=S("9bf2").f,ce=S("e893"),fe=z.Symbol;if(k&&typeof fe=="function"&&(!("description"in fe.prototype)||fe().description!==void 0)){var me={},Ce=function(){var Ge=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),te=this instanceof Ce?new fe(Ge):Ge===void 0?fe():fe(Ge);return Ge===""&&(me[te]=!0),te};ce(Ce,fe);var _e=Ce.prototype=fe.prototype;_e.constructor=Ce;var he=_e.toString,q=String(fe("test"))=="Symbol(test)",Te=/^Symbol\((.*)\)[^)]+$/;re(_e,"description",{configurable:!0,get:function(){var Ge=J(this)?this.valueOf():this,te=he.call(Ge);if(K(me,Ge))return"";var lt=q?te.slice(7,-1):te.replace(Te,"$1");return lt===""?void 0:lt}}),B({global:!0,forced:!0},{Symbol:Ce})}},e163:function(P,j,S){var B=S("5135"),k=S("7b0b"),z=S("f772"),K=S("e177"),J=z("IE_PROTO"),re=Object.prototype;P.exports=K?Object.getPrototypeOf:function(ce){return ce=k(ce),B(ce,J)?ce[J]:typeof ce.constructor=="function"&&ce instanceof ce.constructor?ce.constructor.prototype:ce instanceof Object?re:null}},e177:function(P,j,S){var B=S("d039");P.exports=!B(function(){function k(){}return k.prototype.constructor=null,Object.getPrototypeOf(new k)!==k.prototype})},e260:function(P,j,S){var B=S("fc6a"),k=S("44d2"),z=S("3f8c"),K=S("69f3"),J=S("7dd0"),re="Array Iterator",ce=K.set,fe=K.getterFor(re);P.exports=J(Array,"Array",function(me,Ce){ce(this,{type:re,target:B(me),index:0,kind:Ce})},function(){var me=fe(this),Ce=me.target,_e=me.kind,he=me.index++;return!Ce||he>=Ce.length?(me.target=void 0,{value:void 0,done:!0}):_e=="keys"?{value:he,done:!1}:_e=="values"?{value:Ce[he],done:!1}:{value:[he,Ce[he]],done:!1}},"values"),z.Arguments=z.Array,k("keys"),k("values"),k("entries")},e439:function(P,j,S){var B=S("23e7"),k=S("d039"),z=S("fc6a"),K=S("06cf").f,J=S("83ab"),re=k(function(){K(1)}),ce=!J||re;B({target:"Object",stat:!0,forced:ce,sham:!J},{getOwnPropertyDescriptor:function(me,Ce){return K(z(me),Ce)}})},e538:function(P,j,S){var B=S("b622");j.f=B},e893:function(P,j,S){var B=S("5135"),k=S("56ef"),z=S("06cf"),K=S("9bf2");P.exports=function(J,re){for(var ce=k(re),fe=K.f,me=z.f,Ce=0;Ce<ce.length;Ce++){var _e=ce[Ce];B(J,_e)||fe(J,_e,me(re,_e))}}},e8b5:function(P,j,S){var B=S("c6b6");P.exports=Array.isArray||function(z){return B(z)=="Array"}},e95a:function(P,j,S){var B=S("b622"),k=S("3f8c"),z=B("iterator"),K=Array.prototype;P.exports=function(J){return J!==void 0&&(k.Array===J||K[z]===J)}},f5df:function(P,j,S){var B=S("00ee"),k=S("c6b6"),z=S("b622"),K=z("toStringTag"),J=k(function(){return arguments}())=="Arguments",re=function(ce,fe){try{return ce[fe]}catch{}};P.exports=B?k:function(ce){var fe,me,Ce;return ce===void 0?"Undefined":ce===null?"Null":typeof(me=re(fe=Object(ce),K))=="string"?me:J?k(fe):(Ce=k(fe))=="Object"&&typeof fe.callee=="function"?"Arguments":Ce}},f772:function(P,j,S){var B=S("5692"),k=S("90e3"),z=B("keys");P.exports=function(K){return z[K]||(z[K]=k(K))}},fb15:function(P,j,S){if(S.r(j),typeof window<"u"){var B=window.document.currentScript;{var k=S("8875");B=k(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:k})}var z=B&&B.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);z&&(S.p=z[1])}S("99af"),S("4de4"),S("4160"),S("c975"),S("d81d"),S("a434"),S("159b"),S("a4d3"),S("e439"),S("dbb4"),S("b64b");function K(Me,$e,ze){return $e in Me?Object.defineProperty(Me,$e,{value:ze,enumerable:!0,configurable:!0,writable:!0}):Me[$e]=ze,Me}function J(Me,$e){var ze=Object.keys(Me);if(Object.getOwnPropertySymbols){var ot=Object.getOwnPropertySymbols(Me);$e&&(ot=ot.filter(function(tn){return Object.getOwnPropertyDescriptor(Me,tn).enumerable})),ze.push.apply(ze,ot)}return ze}function re(Me){for(var $e=1;$e<arguments.length;$e++){var ze=arguments[$e]!=null?arguments[$e]:{};$e%2?J(Object(ze),!0).forEach(function(ot){K(Me,ot,ze[ot])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Me,Object.getOwnPropertyDescriptors(ze)):J(Object(ze)).forEach(function(ot){Object.defineProperty(Me,ot,Object.getOwnPropertyDescriptor(ze,ot))})}return Me}function ce(Me){if(Array.isArray(Me))return Me}S("e01a"),S("d28b"),S("e260"),S("d3b7"),S("3ca3"),S("ddb0");function fe(Me,$e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Me)))){var ze=[],ot=!0,tn=!1,an=void 0;try{for(var An=Me[Symbol.iterator](),Hn;!(ot=(Hn=An.next()).done)&&(ze.push(Hn.value),!($e&&ze.length===$e));ot=!0);}catch(xo){tn=!0,an=xo}finally{try{!ot&&An.return!=null&&An.return()}finally{if(tn)throw an}}return ze}}S("a630"),S("fb6a"),S("b0c0"),S("25f0");function me(Me,$e){($e==null||$e>Me.length)&&($e=Me.length);for(var ze=0,ot=new Array($e);ze<$e;ze++)ot[ze]=Me[ze];return ot}function Ce(Me,$e){if(Me){if(typeof Me=="string")return me(Me,$e);var ze=Object.prototype.toString.call(Me).slice(8,-1);if(ze==="Object"&&Me.constructor&&(ze=Me.constructor.name),ze==="Map"||ze==="Set")return Array.from(Me);if(ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ze))return me(Me,$e)}}function _e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function he(Me,$e){return ce(Me)||fe(Me,$e)||Ce(Me,$e)||_e()}function q(Me){if(Array.isArray(Me))return me(Me)}function Te(Me){if(typeof Symbol<"u"&&Symbol.iterator in Object(Me))return Array.from(Me)}function bt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ge(Me){return q(Me)||Te(Me)||Ce(Me)||bt()}var te=S("a352"),lt=S.n(te);function Je(Me){Me.parentElement!==null&&Me.parentElement.removeChild(Me)}function gt(Me,$e,ze){var ot=ze===0?Me.children[0]:Me.children[ze-1].nextSibling;Me.insertBefore($e,ot)}var ye=S("dbf1");S("13d5"),S("4fad"),S("ac1f"),S("5319");function Et(Me){var $e=Object.create(null);return function(ot){var tn=$e[ot];return tn||($e[ot]=Me(ot))}}var xt=/-(\w)/g,at=Et(function(Me){return Me.replace(xt,function($e,ze){return ze.toUpperCase()})});S("5db7"),S("73d9");var qe=["Start","Add","Remove","Update","End"],x=["Choose","Unchoose","Sort","Filter","Clone"],gn=["Move"],Ye=[gn,qe,x].flatMap(function(Me){return Me}).map(function(Me){return"on".concat(Me)}),Qn={manage:gn,manageAndEmit:qe,emit:x};function ys(Me){return Ye.indexOf(Me)!==-1}S("caad"),S("2ca0");var ut=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Kt(Me){return ut.includes(Me)}function fo(Me){return["transition-group","TransitionGroup"].includes(Me)}function Ao(Me){return["id","class","role","style"].includes(Me)||Me.startsWith("data-")||Me.startsWith("aria-")||Me.startsWith("on")}function go(Me){return Me.reduce(function($e,ze){var ot=he(ze,2),tn=ot[0],an=ot[1];return $e[tn]=an,$e},{})}function Le(Me){var $e=Me.$attrs,ze=Me.componentData,ot=ze===void 0?{}:ze,tn=go(Object.entries($e).filter(function(an){var An=he(an,2),Hn=An[0];return An[1],Ao(Hn)}));return re(re({},tn),ot)}function tt(Me){var $e=Me.$attrs,ze=Me.callBackBuilder,ot=go(N($e));Object.entries(ze).forEach(function(an){var An=he(an,2),Hn=An[0],xo=An[1];Qn[Hn].forEach(function(Dn){ot["on".concat(Dn)]=xo(Dn)})});var tn="[data-draggable]".concat(ot.draggable||"");return re(re({},ot),{},{draggable:tn})}function N(Me){return Object.entries(Me).filter(function($e){var ze=he($e,2),ot=ze[0];return ze[1],!Ao(ot)}).map(function($e){var ze=he($e,2),ot=ze[0],tn=ze[1];return[at(ot),tn]}).filter(function($e){var ze=he($e,2),ot=ze[0];return ze[1],!ys(ot)})}S("c740");function Ps(Me,$e){if(!(Me instanceof $e))throw new TypeError("Cannot call a class as a function")}function qn(Me,$e){for(var ze=0;ze<$e.length;ze++){var ot=$e[ze];ot.enumerable=ot.enumerable||!1,ot.configurable=!0,"value"in ot&&(ot.writable=!0),Object.defineProperty(Me,ot.key,ot)}}function is(Me,$e,ze){return qn(Me.prototype,$e),Me}var Fo=function($e){var ze=$e.el;return ze},Bs=function($e,ze){return $e.__draggable_context=ze},Ft=function($e){return $e.__draggable_context},Cn=function(){function Me($e){var ze=$e.nodes,ot=ze.header,tn=ze.default,an=ze.footer,An=$e.root,Hn=$e.realList;Ps(this,Me),this.defaultNodes=tn,this.children=[].concat(Ge(ot),Ge(tn),Ge(an)),this.externalComponent=An.externalComponent,this.rootTransition=An.transition,this.tag=An.tag,this.realList=Hn}return is(Me,[{key:"render",value:function(ze,ot){var tn=this.tag,an=this.children,An=this._isRootComponent,Hn=An?{default:function(){return an}}:an;return ze(tn,ot,Hn)}},{key:"updated",value:function(){var ze=this.defaultNodes,ot=this.realList;ze.forEach(function(tn,an){Bs(Fo(tn),{element:ot[an],index:an})})}},{key:"getUnderlyingVm",value:function(ze){return Ft(ze)}},{key:"getVmIndexFromDomIndex",value:function(ze,ot){var tn=this.defaultNodes,an=tn.length,An=ot.children,Hn=An.item(ze);if(Hn===null)return an;var xo=Ft(Hn);if(xo)return xo.index;if(an===0)return 0;var Dn=Fo(tn[0]),Xt=Ge(An).findIndex(function(nn){return nn===Dn});return ze<Xt?0:an}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Me}(),Yt=S("8bbf");function ke(Me,$e){var ze=Me[$e];return ze?ze():[]}function Wr(Me){var $e=Me.$slots,ze=Me.realList,ot=Me.getKey,tn=ze||[],an=["header","footer"].map(function(nn){return ke($e,nn)}),An=he(an,2),Hn=An[0],xo=An[1],Dn=$e.item;if(!Dn)throw new Error("draggable element must have an item slot");var Xt=tn.flatMap(function(nn,Be){return Dn({element:nn,index:Be}).map(function(_t){return _t.key=ot(nn),_t.props=re(re({},_t.props||{}),{},{"data-draggable":!0}),_t})});if(Xt.length!==tn.length)throw new Error("Item slot must have only one child");return{header:Hn,footer:xo,default:Xt}}function Rr(Me){var $e=fo(Me),ze=!Kt(Me)&&!$e;return{transition:$e,externalComponent:ze,tag:ze?Object(Yt.resolveComponent)(Me):$e?Yt.TransitionGroup:Me}}function Nt(Me){var $e=Me.$slots,ze=Me.tag,ot=Me.realList,tn=Me.getKey,an=Wr({$slots:$e,realList:ot,getKey:tn}),An=Rr(ze);return new Cn({nodes:an,root:An,realList:ot})}function Qs(Me,$e){var ze=this;Object(Yt.nextTick)(function(){return ze.$emit(Me.toLowerCase(),$e)})}function ts(Me){var $e=this;return function(ze,ot){if($e.realList!==null)return $e["onDrag".concat(Me)](ze,ot)}}function yi(Me){var $e=this,ze=ts.call(this,Me);return function(ot,tn){ze.call($e,ot,tn),Qs.call($e,Me,ot)}}var Oo=null,Ns={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function($e){return $e}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},jr=["update:modelValue","change"].concat(Ge([].concat(Ge(Qn.manageAndEmit),Ge(Qn.emit)).map(function(Me){return Me.toLowerCase()}))),Cs=Object(Yt.defineComponent)({name:"draggable",inheritAttrs:!1,props:Ns,emits:jr,data:function(){return{error:!1}},render:function(){try{this.error=!1;var $e=this.$slots,ze=this.$attrs,ot=this.tag,tn=this.componentData,an=this.realList,An=this.getKey,Hn=Nt({$slots:$e,tag:ot,realList:an,getKey:An});this.componentStructure=Hn;var xo=Le({$attrs:ze,componentData:tn});return Hn.render(Yt.h,xo)}catch(Dn){return this.error=!0,Object(Yt.h)("pre",{style:{color:"red"}},Dn.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&ye.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var $e=this;if(!this.error){var ze=this.$attrs,ot=this.$el,tn=this.componentStructure;tn.updated();var an=tt({$attrs:ze,callBackBuilder:{manageAndEmit:function(xo){return yi.call($e,xo)},emit:function(xo){return Qs.bind($e,xo)},manage:function(xo){return ts.call($e,xo)}}}),An=ot.nodeType===1?ot:ot.parentElement;this._sortable=new lt.a(An,an),this.targetDomElement=An,An.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var $e=this.list;return $e||this.modelValue},getKey:function(){var $e=this.itemKey;return typeof $e=="function"?$e:function(ze){return ze[$e]}}},watch:{$attrs:{handler:function($e){var ze=this._sortable;ze&&N($e).forEach(function(ot){var tn=he(ot,2),an=tn[0],An=tn[1];ze.option(an,An)})},deep:!0}},methods:{getUnderlyingVm:function($e){return this.componentStructure.getUnderlyingVm($e)||null},getUnderlyingPotencialDraggableComponent:function($e){return $e.__draggable_component__},emitChanges:function($e){var ze=this;Object(Yt.nextTick)(function(){return ze.$emit("change",$e)})},alterList:function($e){if(this.list){$e(this.list);return}var ze=Ge(this.modelValue);$e(ze),this.$emit("update:modelValue",ze)},spliceList:function(){var $e=arguments,ze=function(tn){return tn.splice.apply(tn,Ge($e))};this.alterList(ze)},updatePosition:function($e,ze){var ot=function(an){return an.splice(ze,0,an.splice($e,1)[0])};this.alterList(ot)},getRelatedContextFromMoveEvent:function($e){var ze=$e.to,ot=$e.related,tn=this.getUnderlyingPotencialDraggableComponent(ze);if(!tn)return{component:tn};var an=tn.realList,An={list:an,component:tn};if(ze!==ot&&an){var Hn=tn.getUnderlyingVm(ot)||{};return re(re({},Hn),An)}return An},getVmIndexFromDomIndex:function($e){return this.componentStructure.getVmIndexFromDomIndex($e,this.targetDomElement)},onDragStart:function($e){this.context=this.getUnderlyingVm($e.item),$e.item._underlying_vm_=this.clone(this.context.element),Oo=$e.item},onDragAdd:function($e){var ze=$e.item._underlying_vm_;if(ze!==void 0){Je($e.item);var ot=this.getVmIndexFromDomIndex($e.newIndex);this.spliceList(ot,0,ze);var tn={element:ze,newIndex:ot};this.emitChanges({added:tn})}},onDragRemove:function($e){if(gt(this.$el,$e.item,$e.oldIndex),$e.pullMode==="clone"){Je($e.clone);return}var ze=this.context,ot=ze.index,tn=ze.element;this.spliceList(ot,1);var an={element:tn,oldIndex:ot};this.emitChanges({removed:an})},onDragUpdate:function($e){Je($e.item),gt($e.from,$e.item,$e.oldIndex);var ze=this.context.index,ot=this.getVmIndexFromDomIndex($e.newIndex);this.updatePosition(ze,ot);var tn={element:this.context.element,oldIndex:ze,newIndex:ot};this.emitChanges({moved:tn})},computeFutureIndex:function($e,ze){if(!$e.element)return 0;var ot=Ge(ze.to.children).filter(function(Hn){return Hn.style.display!=="none"}),tn=ot.indexOf(ze.related),an=$e.component.getVmIndexFromDomIndex(tn),An=ot.indexOf(Oo)!==-1;return An||!ze.willInsertAfter?an:an+1},onDragMove:function($e,ze){var ot=this.move,tn=this.realList;if(!ot||!tn)return!0;var an=this.getRelatedContextFromMoveEvent($e),An=this.computeFutureIndex(an,$e),Hn=re(re({},this.context),{},{futureIndex:An}),xo=re(re({},$e),{},{relatedContext:an,draggedContext:Hn});return ot(xo,ze)},onDragEnd:function(){Oo=null}}}),Tn=Cs;j.default=Tn},fb6a:function(P,j,S){var B=S("23e7"),k=S("861d"),z=S("e8b5"),K=S("23cb"),J=S("50c4"),re=S("fc6a"),ce=S("8418"),fe=S("b622"),me=S("1dde"),Ce=S("ae40"),_e=me("slice"),he=Ce("slice",{ACCESSORS:!0,0:0,1:2}),q=fe("species"),Te=[].slice,bt=Math.max;B({target:"Array",proto:!0,forced:!_e||!he},{slice:function(te,lt){var Je=re(this),gt=J(Je.length),ye=K(te,gt),Et=K(lt===void 0?gt:lt,gt),xt,at,qe;if(z(Je)&&(xt=Je.constructor,typeof xt=="function"&&(xt===Array||z(xt.prototype))?xt=void 0:k(xt)&&(xt=xt[q],xt===null&&(xt=void 0)),xt===Array||xt===void 0))return Te.call(Je,ye,Et);for(at=new(xt===void 0?Array:xt)(bt(Et-ye,0)),qe=0;ye<Et;ye++,qe++)ye in Je&&ce(at,qe,Je[ye]);return at.length=qe,at}})},fc6a:function(P,j,S){var B=S("44ad"),k=S("1d80");P.exports=function(z){return B(k(z))}},fdbc:function(P,j){P.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(P,j,S){var B=S("4930");P.exports=B&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(vJ);var Dte=vJ.exports;const Mte=lJ(Dte),Rte={name:"LeadsPage",components:{draggable:Mte},setup(){const U=_n("all"),w=_n([]),F=_n(!0),T=_n(""),P=_n(""),j=_n(!1),S=_n({id:0,first_name:"",last_name:"",email:"",phone:"",tag:"",stage:""}),B=_n({}),k=_n({message:"",type:""}),z=_n([]),K=_n([]),J=_n([]),re=_n(!1),ce=_n("default"),fe=_n(!1),me=_n(""),Ce=_n([]),_e=_n(null),he=_n(""),q=_n(new Set),Te=_n(!1),bt=_n(!1),Ge=_n(null),te=_n(""),lt=_n(1),Je=_n(10),gt=SB(()=>Math.ceil(w.value.length/Je.value)),ye=_n(""),Et=_n(""),xt=_n(!1),at=_n(!1),qe=_n(!1),x=_n(!1),gn=_n(!1),Ye=_n(null),Qn=_n(null),ys=_n(""),ut=_n(!1),Kt=_n([]),fo=_n(!1),Ao=_n(!1),go=_n([]),Le=localStorage.getItem("auth_token"),tt=we=>{he.value=we,me.value=Fo(we),Ce.value=Bs(we),fe.value=!0},N=()=>{fe.value=!1},Ps=we=>q.value.has(we),qn=we=>{q.value.has(we)?q.value.delete(we):q.value.add(we),S.value.tag=Array.from(q.value)},is=()=>{N()},Fo=we=>({listingAlert:"New Listing Alert",neighbourhoodAlert:"Neighbourhood Alert",openHouseAlert:"Open House Alert",actionPlan:"Action Plan",marketUpdates:"Market Updates",newsletter:"Real Estate Newsletter"})[we]||"Unknown Modal",Bs=we=>({listingAlert:[{value:"alert1",text:"Alert 1"},{value:"alert2",text:"Alert 2"}],neighbourhoodAlert:[{value:"neigh1",text:"Neighbourhood 1"},{value:"neigh2",text:"Neighbourhood 2"}],openHouseAlert:[{value:"house1",text:"House 1"},{value:"house2",text:"House 2"}],actionPlan:[{value:"plan1",text:"Plan 1"},{value:"plan2",text:"Plan 2"}],marketUpdates:[{value:"update1",text:"Update 1"},{value:"update2",text:"Update 2"}],newsletter:[{value:"news1",text:"Newsletter 1"},{value:"news2",text:"Newsletter 2"}]})[we]||[],Ft=()=>{Ao.value=!1},Cn=_n({from:"hiteshpandey732195@gmail.com",to:"",subject:"",message:"",template:"",attachments:[]}),Yt=we=>{go.value.splice(we,1),Cn.value.to=go.value.join(", ")};WA(Kt,we=>{go.value=w.value.filter(Mt=>we.includes(Mt.id)).map(Mt=>Mt.email),Cn.value.to=go.value.join(", ")}),WA(go,we=>{Cn.value.to=we.join(", ")});const ke=async()=>{Ao.value=!0,await bl()},Wr=()=>{Ao.value=!1},Rr=we=>{go.value.includes(we)?go.value=go.value.filter(Mt=>Mt!==we):go.value.push(we)},Nt=_n(""),Qs=_n(""),ts=_n(["{{first_name}}","{{last_name}}","{{email}}","{{city}}","{{phone}}"]),yi=()=>{Nt.value&&(Cn.value.subject+=" "+Nt.value)},Oo=_n([]),Ns=async()=>{try{const we=await bi.get("/api/templates",{headers:{Authorization:`Bearer ${Le}`}});Oo.value=we.data.data??we.data}catch(we){we.response&&we.response.status===401&&alert("Session expired. Please log in again.")}},jr=()=>{ZA(()=>{am.get("email-editor")||am.init({selector:"#email-editor",plugins:"link lists image code",toolbar:"undo redo | bold italic underline | alignleft aligncenter alignright alignjustify | link image media | mergeFieldButton | preview fullscreen",menubar:"file edit view insert format tools table help",height:500,setup:we=>{Ye.value=we,we.ui.registry.addMenuButton("mergeFieldButton",{text:"Merge Fields",fetch:Mt=>{const ko=ts.value.map(Go=>({type:"menuitem",text:Go,onAction:()=>{we.insertContent(Go)}}));Mt(ko)}})},image_title:!0,automatic_uploads:!0,file_picker_types:"image",file_picker_callback:(we,Mt,ko)=>{const Go=document.createElement("input");Go.setAttribute("type","file"),Go.setAttribute("accept","image/*"),Go.onchange=function(){const Mo=this.files[0],Ls=new FileReader;Ls.onload=function(){const Lr=Ls.result;we(Lr,{title:Mo.name})},Ls.readAsDataURL(Mo)},Go.click()}})})},Cs=()=>{am.get("email-editor")&&am.get("email-editor").remove()},Tn=()=>{if(Kt.value.length===0){Ha.fire({icon:"warning",title:"No Leads Selected",text:"Please select at least one lead before sending an email."});return}gn.value=!0,ZA(()=>{Cs(),jr()})},Me=()=>{gn.value=!1,Cs()},$e=()=>{const we=Oo.value.find(Mt=>Mt.id===Cn.value.template);if(we){let Mt=we.content;am.get("email-editor").setContent(Mt),Cn.value.subject=we.subject,we.attachment_path?Cn.value.attachments=[we.attachment_path]:Cn.value.attachments=[],Qs.value&&sc()}},ze=we=>{Cn.value.attachments.splice(we,1)},ot=we=>{Cn.value.attachments=Array.from(we.target.files)},tn=()=>{const we=Ye.value.getContent();alert(`Preview:
From: ${Cn.value.from}
To: ${Cn.value.to}
Subject: ${Cn.value.subject}
Message:
${we}`)},an=()=>{alert("Feature not implemented yet. Add scheduling logic here!")},An=async()=>{const we=parseInt(localStorage.getItem("user_id"));if(!we||isNaN(we)){Ha.fire({icon:"error",title:"Missing User ID",text:"Please log in again. User ID is missing or invalid."});return}const Mt=w.value.filter(Mo=>Kt.value.includes(Mo.id)).map(Mo=>Mo.email),ko=w.value.filter(Mo=>Kt.value.includes(Mo.id)).map(Mo=>Mo.id);if(!Mt.length){Ha.fire({icon:"error",title:"No Recipients",text:"Please select at least one lead."});return}Cn.value.to=Mt.join(",");const Go=Ye.value.getContent();Ha.fire({title:"Are you sure?",text:"Do you want to send this email?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, send it!",cancelButtonText:"Cancel"}).then(async Mo=>{if(Mo.isConfirmed)try{const Ls=new FormData;Ls.append("from",Cn.value.from),Ls.append("subject",Cn.value.subject),Ls.append("message",Go),Ls.append("template_id",Cn.value.template),Ls.append("user_id",we),ko.forEach(Lr=>{Ls.append("lead_ids[]",Lr)}),Mt.forEach(Lr=>{Ls.append("to[]",Lr)}),Cn.value.attachments.forEach(Lr=>{Ls.append("attachments[]",Lr)}),await bi.post("/api/send-email",Ls,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),Ha.fire({icon:"success",title:"Email Sent!",text:"Your email has been successfully sent."}),Me()}catch(Ls){console.error("Email Send Error:",Ls),Ha.fire({icon:"error",title:"Failed to Send",text:"Something went wrong. Please try again later."})}})},Hn=_n(!1),xo=_n(!1),Dn=_n([]),Xt=_n([]),nn=_n([]),Be=_n({from:"",to:"",toName:"",subject:"",message:"",template:"",schedule:""}),_t=()=>{Be.value.to=nn.value.map(we=>we.phone).join(", "),Be.value.toName=nn.value.map(we=>we.first_name).join(", ")},Lo=we=>{const Mt=Kt.value.indexOf(we.id);Mt===-1?(Kt.value.push(we.id),nn.value.push({id:we.id,first_name:we.first_name,phone:we.phone})):(Kt.value.splice(Mt,1),nn.value=nn.value.filter(ko=>ko.id!==we.id)),_t()},zi=()=>{ZA(()=>{am.get("sms-editor")||am.init({selector:"#sms-editor",plugins:"link lists image code",toolbar:"undo redo | aligncenter alignright alignjustify | mergeFieldButton",menubar:"file edit view insert format tools table help",height:500,setup:we=>{Qn.value=we,we.ui.registry.addMenuButton("mergeFieldButton",{text:"Merge Fields",fetch:Mt=>{const ko=ts.value.map(Go=>({type:"menuitem",text:Go,onAction:()=>{we.insertContent(Go)}}));Mt(ko)}})},image_title:!0,automatic_uploads:!0,file_picker_types:"image",file_picker_callback:(we,Mt,ko)=>{const Go=document.createElement("input");Go.setAttribute("type","file"),Go.setAttribute("accept","image/*"),Go.onchange=function(){const Mo=this.files[0],Ls=new FileReader;Ls.onload=function(){const Lr=Ls.result;we(Lr,{title:Mo.name})},Ls.readAsDataURL(Mo)},Go.click()}})})},Pr=()=>{am.get("sms-editor")&&am.get("sms-editor").remove()},Dt=we=>Kt.value.includes(we.id),Ci=we=>{const Mt=nn.value[we];nn.value.splice(we,1),Kt.value=Kt.value.filter(ko=>ko!==Mt.id),_t()};WA(Kt,we=>{Be.value.to=nn.value.map(Mt=>Mt.phone).join(", "),Be.value.toName=nn.value.map(Mt=>Mt.first_name).join(", ")});const gu=()=>{xo.value=!1},cd=()=>{xo.value=!0},_o=()=>{xo.value=!1},sn=we=>{Be.value.toName=we.first_name,Be.value.to=we.phone,xo.value=!1};WA(Kt,()=>{nn.value=w.value.filter(we=>Kt.value.includes(we.id)),Be.value.to=nn.value.map(we=>we.phone).join(", "),Be.value.toName=nn.value.map(we=>we.first_name).join(", ")});const Zc=()=>{Be.value.message.length>300&&(Be.value.message=Be.value.message.slice(0,300))},ud=_n([]),ls=_n(!1),Nr=async()=>{ls.value=!0;try{const we=await bi.get("/api/sms-templates");ud.value=we.data.templates}catch{Ha.fire("Error","Could not load SMS templates.","error")}finally{ls.value=!1}},cs=we=>{Be.value.to=we.phone,Wr()},hu=we=>{we.target.checked?(Kt.value=w.value.map(Mt=>Mt.id),nn.value=w.value.map(Mt=>({id:Mt.id,first_name:Mt.first_name,phone:Mt.phone}))):(Kt.value=[],nn.value=[]),_t()},xn=()=>{if(Kt.value.length===0){Ha.fire("No leads selected!","Please select leads before sending an SMS.","warning");return}ut.value=!0,ZA(()=>{Pr(),zi()})},za=()=>{fo.value=!fo.value},dr=()=>{ut.value=!1,Be.value={from:"",to:"",subject:"",message:"",template:"",schedule:""}},dd=()=>{if(!Array.isArray(ud.value))return;const we=ud.value.find(Mt=>Mt.id===Be.value.template);we&&(Be.value.message=we.content)},eh=we=>{const Mt=we.target.value;Mt&&(Be.value.message+=` ${Mt}`,Be.value.subject+=` ${Mt}`,we.target.value="")},th=()=>{Ha.fire({title:"SMS Preview",html:`<strong>From:</strong> ${Be.value.from}<br>
              <strong>To:</strong> ${Be.value.to}<br>
              <strong>Subject:</strong> ${Be.value.subject}<br>
              <strong>Message:</strong><br> ${Be.value.message}`,icon:"info"})},Ua=async()=>{const we=parseInt(localStorage.getItem("user_id"));if(!we||isNaN(we)){Ha.fire("Missing User ID","Please log in again.","error");return}if(!Be.value.from||nn.value.length===0||!Be.value.message.trim()){Ha.fire("Missing Information","Sender, recipient, and message cannot be empty.","error");return}try{const Mt=nn.value.map(Go=>Go.phone),ko=w.value.filter(Go=>Kt.value.includes(Go.id)).map(Go=>Go.id);await bi.post("/api/send-sms",{lead_ids:ko,user_id:we,from:Be.value.from,to:Mt.join(", "),subject:Be.value.subject,message:Be.value.message,schedule:Be.value.schedule||null}),Ha.fire("Success","SMS sent successfully.","success"),dr()}catch(Mt){console.error("SMS Send Error:",Mt),Ha.fire("Error","Failed to send SMS.","error")}},xa=async we=>{U.value=we,F.value=!0,we==="all"?await fd():we==="my"&&await bl()},fd=async()=>{F.value=!0,T.value=null;try{const we=localStorage.getItem("auth_token"),Mt=await bi.get("/api/leads",{headers:{Authorization:`Bearer ${we}`}});w.value=Array.isArray(Mt.data)?Mt.data:[]}catch(we){console.error("Error fetching all leads:",we),T.value="Failed to fetch leads."}finally{F.value=!1}},bl=async()=>{F.value=!0,T.value=null;try{const we=localStorage.getItem("auth_token"),Mt=await bi.get("/api/leads/my",{headers:{Authorization:`Bearer ${we}`}});w.value=Array.isArray(Mt.data)?Mt.data:[]}catch(we){console.error("Error fetching my leads:",we),T.value="Failed to fetch my leads."}finally{F.value=!1}},Ui=async()=>{try{const we=await bi.get("/items");z.value=we.data.tags,K.value=we.data.stages,J.value=we.data.sources}catch{}},qs=()=>{xt.value=!0},pu=()=>{xt.value=!1,ye.value=""},Zi=()=>{at.value=!0},yt=()=>{at.value=!1,Et.value=""},cm=async()=>{if(ye.value.trim())try{const we=await bi.post("/api/items",{name:ye.value,type:"tag"});z.value.push(we.data.item),ye.value="",qe.value=!1,Ha.fire("Success","Tag added successfully","success")}catch{Ha.fire("Error","Failed to add tag","error")}},Zs=async()=>{if(Et.value.trim())try{const we=await bi.post("/api/items",{name:Et.value,type:"stage"});K.value.push(we.data.item),Et.value="",x.value=!1,Ha.fire("Success","Stage added successfully","success")}catch{Ha.fire("Error","Failed to add stage","error")}},um=SB(()=>w.value.filter(we=>we.first_name&&we.first_name.toLowerCase().includes(P.value.toLowerCase()))),ho=we=>{const Mt=z.value.find(ko=>ko.id===we);return Mt?Mt.name:"N/A"},lf=we=>{const Mt=K.value.find(ko=>ko.id===we);return Mt?Mt.name:"N/A"},wa=()=>(B.value={first_name:S.value.first_name?"":"First name is required.",last_name:S.value.last_name?"":"Last name is required.",email:S.value.email&&/^\S+@\S+\.\S+$/.test(S.value.email)?"":"Valid email is required.",phone:S.value.phone&&/^\d{10}$/.test(S.value.phone)?"":"Valid phone number is required.",tag:S.value.tag?"":"Tag is required.",stage:S.value.stage?"":"Stage is required."},!Object.values(B.value).some(we=>we)),dm=async()=>{if(Kt.value.length===0){ns("No leads selected.","error");return}if((await Ha.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{const Mt=localStorage.getItem("auth_token");await bi.post("/api/leads/delete",{lead_ids:Kt.value},{headers:{Authorization:`Bearer ${Mt}`,"Content-Type":"application/json"}}),w.value=w.value.filter(ko=>!Kt.value.includes(ko.id)),Kt.value=[],Ha.fire("Deleted!","Selected leads have been deleted.","success")}catch(Mt){console.error("Delete error:",Mt),Ha.fire("Error!","Failed to delete leads.","error")}},yl=we=>{we>=1&&we<=gt.value&&(lt.value=we)},fm=we=>{Je.value=we,lt.value=1},Gr=SB(()=>{const we=(lt.value-1)*Je.value,Mt=we+Je.value;return w.value.slice(we,Mt)}),cf=async()=>{if(Kt.value.length===0){ns("No leads selected.","error");return}try{const we=await bi.post("/leads/export",{lead_ids:Kt.value},{responseType:"blob"}),Mt=window.URL.createObjectURL(new Blob([we.data])),ko=document.createElement("a");ko.href=Mt,ko.setAttribute("download","leads.csv"),document.body.appendChild(ko),ko.click(),document.body.removeChild(ko),ns("Leads exported successfully!","success")}catch{ns("Failed to export leads.","error")}},vu=async we=>{const Mt=we.target.files[0];if(!Mt){ns("No file selected.","error");return}const ko=new FormData;ko.append("file",Mt);try{const Go=document.querySelector('meta[name="csrf-token"]'),Mo=Go?Go.getAttribute("content"):"";await bi.post("/leads/import",ko,{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":Mo}}),await xa(),ns("Leads imported successfully!","success")}catch{ns("Failed to import leads.","error")}},Kr=()=>{gs(),alert("Indirect File Import option selected")},Ws=()=>{Te.value=!0},gs=()=>{Te.value=!1,bt.value=!1,Ge.value=null,te.value=""},bu=()=>{bt.value=!0},Wc=we=>{const Mt=we.target.files[0];Mt&&Mt.type==="text/csv"?(Ge.value=Mt,te.value=""):(Ge.value=null,te.value="Please select a valid CSV file.")},Wi=()=>{if(!Ge.value){te.value="No file selected or invalid file type.";return}gs()},nh=()=>{gs()},ns=(we,Mt)=>{k.value={message:we,type:Mt},setTimeout(()=>{k.value.message=""},5e3)},Gn=async()=>{if(wa())try{const we=localStorage.getItem("auth_token"),Mt=await bi.post("/api/leads",{first_name:S.value.first_name,last_name:S.value.last_name,email:S.value.email,phone:S.value.phone,tag:String(S.value.tag),stage:String(S.value.stage)},{headers:{Authorization:`Bearer ${we}`,"Content-Type":"application/json"}});S.value={id:0,first_name:"",last_name:"",email:"",phone:"",tag:"",stage:""},j.value=!1,w.value.push(Mt.data),ns("Lead created successfully!","success")}catch(we){console.error("Error creating lead:",we),ns("Failed to create lead.","error")}},ji=_n(!1),Za=_n(["first_name","email","phone"]),oi=_n({first_name:{label:"Name",disabled:!0},email:{label:"Email",disabled:!0},phone:{label:"Phone",disabled:!0},latest_activity:{label:"Latest Activity"},activity_at:{label:"Activity At"},created_on:{label:"Created On"},tags:{label:"Tags"},stage:{label:"Stage"},latest_source:{label:"Latest Source"},latest_sms:{label:"Latest SMS"},latest_email:{label:"Latest Email"},next_task:{label:"Next Task"},next_appointment:{label:"Next Appointment"},new_listing_alert:{label:"New Listing Alerts"},neighbourhood_alert:{label:"Neighbourhood Alerts"},open_house_alert:{label:"Open House Alerts"},price_drop_alert:{label:"Price Drop Alerts"},action_plans:{label:"Active Action Plans"},market_updates:{label:"Assigned Market Updates"},real_estate_newsletter:{label:"Assigned Newsletters"},notes:{label:"Notes"},dob:{label:"DOB"},background:{label:"Background"},city:{label:"City"},facebook:{label:"Facebook"},instagram:{label:"Instagram"},linkedin:{label:"LinkedIn"},whatsapp:{label:"WhatsApp"},twitter:{label:"Twitter"}}),Yr=()=>{ji.value=!0},jc=()=>{ji.value=!1},zo=async()=>{await md(),jc()},Ir=async()=>{try{const we=await bi.get("/api/columns-settings",{headers:{Authorization:`Bearer ${Le}`}});Za.value=Array.isArray(we.data.selectedColumns)?we.data.selectedColumns:["first_name","email","phone"]}catch{ns("Failed to fetch column settings!")}},Uo=async()=>{try{await bi.post("/api/columns-settings",{selectedColumns:Za.value},{headers:{Authorization:`Bearer ${Le}`}}),ns("Column settings saved successfully!")}catch{ns("Failed to save column settings!")}},Br=we=>{if(!oi.value[we].disabled){const Mt=Za.value.indexOf(we);Mt===-1?(Za.value.push(we),ns(`Column "${oi.value[we].label}" added`)):(Za.value.splice(Mt,1),ns(`Column "${oi.value[we].label}" removed`))}},md=async()=>{try{await bi.post("/api/columns-settings",{selectedColumns:Za.value},{headers:{Authorization:`Bearer ${Le}`}}),ns("Column visibility settings saved successfully!")}catch{ns("Failed to save column visibility settings!")}},Gi=async()=>{try{await bi.post("/api/columns-order",{selectedColumns:Za.value},{headers:{Authorization:`Bearer ${Le}`}}),ns("Column order saved successfully!")}catch{ns("Failed to save column order.")}},Ki=async()=>{try{await Gi()}catch{ns("Failed to save column order.")}},oc=_n([]),uf=_n(!1),Wa=async()=>{var we;if(!uf.value)try{const Mt=await bi.get("/api/signatures",{headers:{Authorization:`Bearer ${Le}`}});oc.value=Mt.data,uf.value=!0}catch(Mt){((we=Mt.response)==null?void 0:we.status)===401&&alert("Session expired. Please log in again.")}},sc=()=>{if(Qs.value){const we=am.get("email-editor"),Mt=we.getContent();we.setContent(Mt+"<br><br>"+Qs.value)}};return mJ(async()=>{await xa(U.value),await Ui();try{await Cs()}catch{}Nr(),await Ns(),await Ir()}),{activeColomType:ce,allSelected:re,removeAttachment:ze,fetchSignatures:Wa,removeEmail:Yt,saveColumnSettings:Uo,toggleLeadSelection:Rr,toggleSelectAll:hu,showLeadModal:Ao,selectedEmails:go,addSelectedEmails:Ft,closeLeadModal:Wr,openLeadModal:ke,expandSmsModal:za,showSmsModal:ut,selectedLeads:Kt,smsData:Be,smsTemplates:ud,openSmsModal:xn,closeSmsModal:dr,loadSmsTemplate:dd,insertMergeTag:eh,previewSms:th,sendSms:Ua,emailData:Cn,templates:Oo,loadTemplate:$e,handleAttachments:ot,previewEmail:tn,scheduleEmail:an,emailMessage:ys,showEmailModal:gn,openEmailModal:Tn,closeEmailModal:Me,sendEmail:An,getAllLeads:fd,getMyLeads:bl,fetchLeads:xa,activeLeadType:U,leads:w,loading:F,error:T,searchQuery:P,filteredLeads:um,showForm:j,newLead:S,errors:B,submitForm:Gn,toggleSelectAll:hu,toast:k,getTagValue:ho,getStageValue:lf,tags:z,stages:K,sources:J,fetchItems:Ui,showImportModal:Te,openImportModal:Ws,closeImportModal:gs,importDirectFile:nh,importIndirectFile:Kr,showFileInput:bt,showFileUploadField:bu,handleFileUpload:Wc,submitCsvFile:Wi,fileError:te,deleteLeads:dm,exportLeads:cf,importLeads:vu,currentPage:lt,pageSize:Je,totalPages:gt,changePage:yl,setPageSize:fm,paginatedLeads:Gr,showToast:ns,newTag:ye,newStage:Et,showTagModal:xt,showStageModal:at,showAddTagInput:qe,showAddStageInput:x,openTagModal:qs,closeTagModal:pu,openStageModal:Zi,closeStageModal:yt,addTag:cm,addStage:Zs,openModal:tt,submitAction:is,showModal:fe,modalTitle:me,modalOptions:Ce,selectedOption:_e,isTagSelected:Ps,toggleTagSelection:qn,closeModal:N,selectedMergeField:Nt,addMergeFieldToSubject:yi,mergeFields:ts,signatures:oc,addSignatureToBody:sc,selectedSignature:Qs,selectLead:cs,countCharacters:Zc,showEmailLeadModal:Hn,openSmsLeadModal:cd,selectSmsLead:sn,closeSmsLeadModal:_o,showSmsLeadModal:xo,addSelectedPhones:gu,toggleSmsLeadSelection:Lo,selectedPhones:Dn,selectedNames:Xt,selectedLeadsList:nn,isLeadSelected:Dt,removeSelectedLead:Ci,addSelectedPhones:gu,toggleSmsLeadSelection:Lo,updateSmsToField:_t,showColumnsModal:ji,openColumnsModal:Yr,closeColumnsModal:jc,selectedColumns:Za,availableColumns:oi,updateColumns:zo,toggleColumnSelection:Br,fetchColumnSettings:Ir,onColumnReorder:Ki}}},Pte={class:"leads-container"},Nte={class:"leads-header"},Ite={class:"leads-section"},Bte={class:"lead-buttons"},Lte={class:"icon-section"},Fte={class:"selected-count total-leads"},_te=["disabled"],$te={key:0,class:"modal"},Hte={class:"modal-header"},Vte={class:"modal-body"},zte={class:"form-group"},Ute={class:"form-group"},Zte={class:"email-input-container"},Wte={class:"email-tags"},jte=["onClick"],Gte={class:"form-group"},Kte={class:"form-group"},Yte=["value"],Xte={class:"form-group"},Jte=["value"],Qte={class:"form-group"},qte={key:0,class:"attachment-list mt-2"},ene=["onClick"],tne={class:"form-actions"},nne=["disabled"],one={key:0,class:"integrte_LeadModal"},sne={class:"modal_LeadContent"},rne={class:"modal-header"},ane={class:"modal_LeadBody"},ine=["value","checked","onChange"],lne={class:"modal-footer"},cne={class:"modal-header"},une={class:"modal-body"},dne={class:"form-group"},fne={class:"form-group"},mne={class:"input-group"},gne={class:"selected-leads"},hne=["onClick"],pne={class:"form-group"},vne=["value"],bne={class:"form-group"},yne=["value"],Cne={class:"form-group"},Sne={class:"form-actions"},xne=["disabled"],wne=["disabled"],Ene=["disabled"],Tne=["disabled"],Ane=["disabled"],One=["disabled"],kne=["disabled"],Dne=["disabled"],Mne=["disabled"],Rne=["disabled"],Pne=["disabled"],Nne=["disabled"],Ine={key:0,class:"modal-overlay"},Bne={class:"modal-container"},Lne={key:0,class:"import-options"},Fne={key:1,class:"file-upload-container"},_ne={key:0,class:"error-message"},$ne={key:1,class:"tag-modal-overlay"},Hne={class:"tag-modal-container"},Vne={class:"modal_tags"},zne=["onClick"],Une=["value","checked"],Zne={key:0},Wne={key:2,class:"stage-modal-overlay"},jne={class:"stage-modal-container"},Gne={class:"modal_stages"},Kne=["onClick"],Yne=["value","onUpdate:modelValue"],Xne={key:0,class:"new-stage-input"},Jne={key:3,class:"modal-overlay"},Qne={class:"modal-container"},qne=["value"],eoe={class:"modal-buttons"},toe={class:"header"},noe={class:"total-leads"},ooe={key:4,class:"form-overlay"},soe={class:"form-container"},roe={key:0,class:"error"},aoe={key:0,class:"error"},ioe={key:0,class:"error"},loe={key:0,class:"error"},coe=["value"],uoe={key:0,class:"error"},doe=["value"],foe={key:0,class:"error"},moe={class:"table-container"},goe={class:"table-wrapper"},hoe={class:"lead_Table"},poe={class:"checkbox-col"},voe={class:"custom-checkbox-label"},boe={class:"checkbox-col"},yoe=["value"],Coe={key:0,class:"no-leads"},Soe={class:"pagination"},xoe=["disabled"],woe=["disabled"],Eoe={key:0,class:"columns-modal-overlay"},Toe={class:"columns-modal-container"},Aoe={class:"columns-modal-list"},Ooe=["checked","onChange","disabled"],koe={key:0,class:"columns-modal-warning"};function Doe(U,w,F,T,P,j){const S=kK("draggable"),B=kK("router-link");return mn(),vn(ni,null,[pe("div",Pte,[pe("div",Nte,[pe("div",Ite,[pe("div",Bte,[pe("button",{class:Ur(["btn",{active:T.activeLeadType==="all"}]),onClick:w[0]||(w[0]=k=>T.fetchLeads("all"))}," All Leads ",2),pe("button",{class:Ur(["btn",{active:T.activeLeadType==="my"}]),onClick:w[1]||(w[1]=k=>T.fetchLeads("my"))}," My Leads ",2)])]),pe("div",Lte,[pe("ul",null,[pe("li",Fte," Selected Leads: "+as(T.selectedLeads.length),1),w[119]||(w[119]=pe("li",{class:"total-leads"},[pe("i",{class:"fa-solid fa-plus"})],-1)),pe("li",{class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),onClick:w[2]||(w[2]=(...k)=>T.deleteLeads&&T.deleteLeads(...k)),disabled:T.selectedLeads.length===0},w[82]||(w[82]=[pe("span",null,"Delete",-1),pe("i",{class:"fa-solid fa-trash-can-arrow-up"},null,-1)]),10,_te),T.showEmailModal?(mn(),vn("div",$te,[pe("div",Hte,[w[83]||(w[83]=pe("h2",null,"Compose Email",-1)),pe("button",{onClick:w[3]||(w[3]=(...k)=>T.closeEmailModal&&T.closeEmailModal(...k))},"×")]),pe("div",Vte,[pe("div",zte,[w[84]||(w[84]=pe("label",{for:"from"},"From:",-1)),ra(pe("input",{type:"email",id:"from","onUpdate:modelValue":w[4]||(w[4]=k=>T.emailData.from=k),placeholder:"Enter sender email"},null,512),[[id,T.emailData.from]])]),pe("div",Ute,[w[85]||(w[85]=pe("label",{for:"to"},"To:",-1)),pe("div",Zte,[pe("div",Wte,[(mn(!0),vn(ni,null,Hi(T.selectedLeadsList,(k,z)=>(mn(),vn("span",{key:k.id,class:"email-tag"},[pl(as(k.first_name)+" ("+as(k.email)+") ",1),pe("button",{onClick:K=>T.removeSelectedLead(z),class:"remove-email"},"×",8,jte)]))),128))]),pe("button",{onClick:w[5]||(w[5]=(...k)=>T.openSmsLeadModal&&T.openSmsLeadModal(...k))},"+")])]),pe("div",Gte,[w[86]||(w[86]=pe("label",{for:"subject"},"Subject:",-1)),ra(pe("input",{type:"text",id:"subject","onUpdate:modelValue":w[6]||(w[6]=k=>T.emailData.subject=k),placeholder:"Enter subject"},null,512),[[id,T.emailData.subject]])]),pe("div",Kte,[w[88]||(w[88]=pe("label",{for:"mergeFields"},"Merge Fields:",-1)),ra(pe("select",{id:"mergeFields","onUpdate:modelValue":w[7]||(w[7]=k=>T.selectedMergeField=k),onChange:w[8]||(w[8]=(...k)=>T.addMergeFieldToSubject&&T.addMergeFieldToSubject(...k))},[w[87]||(w[87]=pe("option",{value:""},"Select Merge Field",-1)),(mn(!0),vn(ni,null,Hi(T.mergeFields,k=>(mn(),vn("option",{key:k,value:k},as(k),9,Yte))),128))],544),[[r1,T.selectedMergeField]])]),pe("div",Xte,[w[90]||(w[90]=pe("label",{for:"template"},"Template:",-1)),ra(pe("select",{id:"template","onUpdate:modelValue":w[9]||(w[9]=k=>T.emailData.template=k),onChange:w[10]||(w[10]=(...k)=>T.loadTemplate&&T.loadTemplate(...k))},[w[89]||(w[89]=pe("option",{value:""},"Select Template",-1)),(mn(!0),vn(ni,null,Hi(T.templates,k=>(mn(),vn("option",{key:k.id,value:k.id},as(k.title),9,Jte))),128))],544),[[r1,T.emailData.template]])]),w[92]||(w[92]=pe("textarea",{id:"email-editor"},null,-1)),pe("div",Qte,[w[91]||(w[91]=pe("label",{for:"attachments"},"Attachments:",-1)),pe("input",{type:"file",id:"attachments",onChange:w[11]||(w[11]=(...k)=>T.handleAttachments&&T.handleAttachments(...k))},null,32),T.emailData.attachments.length?(mn(),vn("div",qte,[(mn(!0),vn(ni,null,Hi(T.emailData.attachments,(k,z)=>(mn(),vn("div",{key:z,class:"attachment-item"},[pe("span",null,as(k.split("/").pop()),1),pe("button",{type:"button",class:"btn btn-sm btn-danger ml-2",onClick:K=>T.removeAttachment(z)}," Remove ",8,ene)]))),128))])):jo("",!0)]),pe("div",tne,[pe("button",{onClick:w[12]||(w[12]=(...k)=>T.previewEmail&&T.previewEmail(...k))},"Preview"),pe("button",{onClick:w[13]||(w[13]=(...k)=>T.scheduleEmail&&T.scheduleEmail(...k))},"Schedule"),pe("button",{onClick:w[14]||(w[14]=(...k)=>T.sendEmail&&T.sendEmail(...k))},"Send Email")])])])):jo("",!0),T.activeLeadType==="my"?(mn(),vn("li",{key:1,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),onClick:w[15]||(w[15]=(...k)=>T.openEmailModal&&T.openEmailModal(...k)),disabled:T.selectedLeads.length===0},w[93]||(w[93]=[pe("span",null,"Email",-1),pe("i",{class:"fa-solid fa-envelope"},null,-1)]),10,nne)):jo("",!0),(mn(),OK(uJ,{to:"body"},[T.showSmsLeadModal?(mn(),vn("div",one,[pe("div",sne,[pe("div",rne,[w[94]||(w[94]=pe("h2",null,"Select Leads",-1)),pe("button",{onClick:w[16]||(w[16]=k=>T.showSmsLeadModal=!1)},"×")]),pe("div",ane,[pe("table",null,[w[95]||(w[95]=pe("thead",null,[pe("tr",null,[pe("th",null,"Select"),pe("th",null,"Name"),pe("th",null,"Phone")])],-1)),pe("tbody",null,[(mn(!0),vn(ni,null,Hi(T.leads,k=>(mn(),vn("tr",{key:k.id},[pe("td",null,[pe("input",{type:"checkbox",value:k.phone,checked:T.isLeadSelected(k),onChange:z=>T.toggleSmsLeadSelection(k)},null,40,ine)]),pe("td",null,as(k.first_name)+" "+as(k.last_name),1),pe("td",null,as(k.phone),1)]))),128))])])]),pe("div",lne,[pe("button",{onClick:w[17]||(w[17]=(...k)=>T.addSelectedPhones&&T.addSelectedPhones(...k))},"Add Selected")])])])):jo("",!0)])),T.showSmsModal?(mn(),vn("div",{key:2,class:Ur(["modal",{"modal-fullscreen":U.isFullscreen}])},[pe("div",cne,[w[96]||(w[96]=pe("h2",null,"Compose SMS",-1)),pe("i",{class:"fas fa-expand-alt",onClick:w[18]||(w[18]=(...k)=>T.expandSmsModal&&T.expandSmsModal(...k)),title:"Expand"}),pe("button",{onClick:w[19]||(w[19]=(...k)=>T.closeSmsModal&&T.closeSmsModal(...k))},"×")]),pe("div",une,[pe("div",dne,[w[97]||(w[97]=pe("label",{for:"sms-from"},"From:",-1)),ra(pe("input",{type:"text",id:"sms-from","onUpdate:modelValue":w[20]||(w[20]=k=>T.smsData.from=k),placeholder:"Enter sender's name or phone number"},null,512),[[id,T.smsData.from]])]),pe("div",fne,[w[98]||(w[98]=pe("label",{for:"sms-to"},"To:",-1)),pe("div",mne,[pe("div",gne,[(mn(!0),vn(ni,null,Hi(T.selectedLeadsList,(k,z)=>(mn(),vn("span",{key:k.id,class:"selected-tag"},[pl(as(k.first_name)+" ",1),pe("button",{onClick:K=>T.removeSelectedLead(z)},"×",8,hne)]))),128)),pe("button",{onClick:w[21]||(w[21]=(...k)=>T.openSmsLeadModal&&T.openSmsLeadModal(...k))},"+")])])]),pe("div",pne,[w[100]||(w[100]=pe("label",{for:"sms-template"},"Template:",-1)),ra(pe("select",{"onUpdate:modelValue":w[22]||(w[22]=k=>T.smsData.template=k),onChange:w[23]||(w[23]=(...k)=>T.loadSmsTemplate&&T.loadSmsTemplate(...k))},[w[99]||(w[99]=pe("option",{value:"",disabled:""},"Select a Template",-1)),(mn(!0),vn(ni,null,Hi(T.smsTemplates,k=>(mn(),vn("option",{key:k.id,value:k.id},as(k.name),9,vne))),128))],544),[[r1,T.smsData.template]])]),pe("div",bne,[w[102]||(w[102]=pe("label",{for:"merge-tags"},"Merge Field",-1)),pe("select",{id:"merge-tags",onChange:w[24]||(w[24]=k=>T.insertMergeTag(k))},[w[101]||(w[101]=pe("option",{value:""},"Select Tag",-1)),(mn(!0),vn(ni,null,Hi(T.mergeFields,k=>(mn(),vn("option",{key:k,value:k},as(k),9,yne))),128))],32)]),w[104]||(w[104]=pe("textarea",{id:"sms-editor"},null,-1)),pe("div",Cne,[w[103]||(w[103]=pe("label",{for:"sms-schedule"},"Schedule SMS:",-1)),ra(pe("input",{type:"datetime-local",id:"sms-schedule","onUpdate:modelValue":w[25]||(w[25]=k=>T.smsData.schedule=k)},null,512),[[id,T.smsData.schedule]])]),pe("div",Sne,[pe("button",{onClick:w[26]||(w[26]=(...k)=>T.previewSms&&T.previewSms(...k))},"Preview"),pe("button",{onClick:w[27]||(w[27]=(...k)=>T.sendSms&&T.sendSms(...k))},"Send SMS")])])],2)):jo("",!0),T.activeLeadType==="my"?(mn(),vn("li",{key:3,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),onClick:w[28]||(w[28]=(...k)=>T.openSmsModal&&T.openSmsModal(...k)),disabled:T.selectedLeads.length===0},w[105]||(w[105]=[pe("span",null,"Smart SMS",-1),pe("i",{class:"fa-solid fa-comment-dots"},null,-1)]),10,xne)):jo("",!0),T.activeLeadType==="my"?(mn(),vn("li",{key:4,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),disabled:T.selectedLeads.length===0,onClick:w[29]||(w[29]=(...k)=>T.openTagModal&&T.openTagModal(...k))},w[106]||(w[106]=[pe("span",null,"Tags",-1),pe("i",{class:"fa-solid fa-tags"},null,-1)]),10,wne)):jo("",!0),T.activeLeadType==="my"?(mn(),vn("li",{key:5,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),disabled:T.selectedLeads.length===0,onClick:w[30]||(w[30]=(...k)=>T.openStageModal&&T.openStageModal(...k))},w[107]||(w[107]=[pe("span",null,"Stage",-1),pe("i",{class:"fa-solid fa-table-cells"},null,-1)]),10,Ene)):jo("",!0),T.activeLeadType==="my"?(mn(),vn("li",{key:6,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),disabled:T.selectedLeads.length===0,onClick:w[31]||(w[31]=k=>T.openModal("listingAlert"))},w[108]||(w[108]=[pe("span",null,"New Listing Alert",-1),pe("i",{class:"fa-solid fa-bell"},null,-1)]),10,Tne)):jo("",!0),T.activeLeadType==="my"?(mn(),vn("li",{key:7,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),disabled:T.selectedLeads.length===0,onClick:w[32]||(w[32]=k=>T.openModal("neighbourhoodAlert"))},w[109]||(w[109]=[pe("span",null,"Neighbourhood Alert",-1),pe("i",{class:"fa-solid fa-map-location-dot"},null,-1)]),10,Ane)):jo("",!0),T.activeLeadType==="my"?(mn(),vn("li",{key:8,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),disabled:T.selectedLeads.length===0,onClick:w[33]||(w[33]=k=>T.openModal("openHouseAlert"))},w[110]||(w[110]=[pe("span",null,"Open House Alert",-1),pe("i",{class:"fa-solid fa-circle-exclamation"},null,-1)]),10,One)):jo("",!0),T.activeLeadType==="my"?(mn(),vn("li",{key:9,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),disabled:T.selectedLeads.length===0,onClick:w[34]||(w[34]=k=>T.openModal("actionPlan"))},w[111]||(w[111]=[pe("span",null,"Action Plan",-1),pe("i",{class:"fa-solid fa-plus"},null,-1)]),10,kne)):jo("",!0),T.activeLeadType==="my"?(mn(),vn("li",{key:10,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),disabled:T.selectedLeads.length===0,onClick:w[35]||(w[35]=k=>T.openModal("marketUpdates"))},w[112]||(w[112]=[pe("span",null,"Market Updates",-1),pe("i",{class:"fa fa-bar-chart","aria-hidden":"true"},null,-1)]),10,Dne)):jo("",!0),T.activeLeadType==="my"?(mn(),vn("li",{key:11,class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),disabled:T.selectedLeads.length===0,onClick:w[36]||(w[36]=k=>T.openModal("newsletter"))},w[113]||(w[113]=[pe("span",null,"Real Estate Newsletter",-1),pe("i",{class:"fa-solid fa-envelope-open-text"},null,-1)]),10,Mne)):jo("",!0),pe("li",{class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),disabled:T.selectedLeads.length===0},w[114]||(w[114]=[pe("span",null,"Lead Transfer",-1),pe("i",{class:"fa-solid fa-right-left"},null,-1)]),10,Rne),pe("li",{class:Ur(["total-leads",{disabled:T.selectedLeads.length===0}]),onClick:w[37]||(w[37]=(...k)=>T.exportLeads&&T.exportLeads(...k)),disabled:T.selectedLeads.length===0},w[115]||(w[115]=[pe("span",null,"Export Lead",-1),pe("i",{class:"fa-solid fa-file-export"},null,-1)]),10,Pne),pe("li",{class:"total-leads",onClick:w[38]||(w[38]=(...k)=>T.openImportModal&&T.openImportModal(...k))},w[116]||(w[116]=[pe("span",null,"Import",-1),pe("i",{class:"fa-solid fa-file-import"},null,-1)])),T.activeColomType==="my"?(mn(),vn("li",{key:12,class:Ur(["total-leads_colom",{disabled:U.selectedcoloms.length===0}]),disabled:U.selectedcoloms.length===0,onClick:w[39]||(w[39]=(...k)=>U.opencolomsModal&&U.opencolomsModal(...k))},w[117]||(w[117]=[pe("span",null,"Lead",-1),pe("i",{class:"fa-solid fa-table-cells"},null,-1)]),10,Nne)):jo("",!0),T.activeLeadType==="my"?(mn(),vn("li",{key:13,class:"total-leads",onClick:w[40]||(w[40]=(...k)=>T.openColumnsModal&&T.openColumnsModal(...k))},w[118]||(w[118]=[pe("span",null,"Settings",-1),pe("i",{class:"fa-solid fa-gear"},null,-1)]))):jo("",!0)])])]),T.showImportModal?(mn(),vn("div",Ine,[pe("div",Bne,[pe("button",{type:"button",onClick:w[41]||(w[41]=(...k)=>T.closeImportModal&&T.closeImportModal(...k)),class:"close-button"},"X"),w[120]||(w[120]=pe("h2",null,"Select Import Type",-1)),T.showFileInput?jo("",!0):(mn(),vn("div",Lne,[pe("button",{onClick:w[42]||(w[42]=(...k)=>T.importDirectFile&&T.importDirectFile(...k)),class:"import-button"},"Direct File Import"),pe("button",{onClick:w[43]||(w[43]=(...k)=>T.showFileUploadField&&T.showFileUploadField(...k)),class:"import-button"},"Indirect File Import")])),T.showFileInput?(mn(),vn("div",Fne,[pe("input",{type:"file",onChange:w[44]||(w[44]=(...k)=>T.handleFileUpload&&T.handleFileUpload(...k)),accept:".csv"},null,32),pe("button",{onClick:w[45]||(w[45]=(...k)=>T.submitCsvFile&&T.submitCsvFile(...k)),class:"submit-button"},"Submit CSV"),T.fileError?(mn(),vn("p",_ne,as(T.fileError),1)):jo("",!0)])):jo("",!0)])])):jo("",!0),T.showTagModal?(mn(),vn("div",$ne,[pe("div",Hne,[pe("button",{type:"button",onClick:w[46]||(w[46]=(...k)=>T.closeTagModal&&T.closeTagModal(...k)),class:"close-button"},"X"),w[121]||(w[121]=pe("h3",null,"Select Tags",-1)),pe("div",Vne,[(mn(!0),vn(ni,null,Hi(T.tags,k=>(mn(),vn("div",{key:k.id,class:Ur(["modal_tag",{selected:T.isTagSelected(k.id)}]),onClick:z=>T.toggleTagSelection(k.id)},[pe("input",{type:"checkbox",value:k.id,checked:T.isTagSelected(k.id),readonly:""},null,8,Une),pl(" "+as(k.name),1)],10,zne))),128))]),pe("button",{onClick:w[47]||(w[47]=k=>T.showAddTagInput=!T.showAddTagInput),class:"add-button"},"Add Tag"),T.showAddTagInput?(mn(),vn("div",Zne,[ra(pe("input",{"onUpdate:modelValue":w[48]||(w[48]=k=>T.newTag=k),placeholder:"Enter new tag"},null,512),[[id,T.newTag]]),pe("button",{onClick:w[49]||(w[49]=(...k)=>T.addTag&&T.addTag(...k)),class:"submit-button"},"Add")])):jo("",!0),pe("button",{onClick:w[50]||(w[50]=(...k)=>T.closeTagModal&&T.closeTagModal(...k)),class:"submit-button"},"Close")])])):jo("",!0),T.showStageModal?(mn(),vn("div",Wne,[pe("div",jne,[pe("button",{type:"button",onClick:w[51]||(w[51]=(...k)=>T.closeStageModal&&T.closeStageModal(...k)),class:"close-button"},"X"),w[122]||(w[122]=pe("h3",null,"Select Stage",-1)),pe("div",Gne,[(mn(!0),vn(ni,null,Hi(T.stages,k=>(mn(),vn("div",{key:k.id,class:Ur(["modal_stage",{selected:T.newLead.stage===k.id}]),onClick:z=>U.selectStage(k.id)},[ra(pe("input",{type:"radio",value:k.id,"onUpdate:modelValue":z=>T.newLead.stage=z,readonly:""},null,8,Yne),[[gJ,T.newLead.stage]]),pl(" "+as(k.name),1)],10,Kne))),128))]),pe("button",{onClick:w[52]||(w[52]=k=>T.showAddStageInput=!T.showAddStageInput),class:"add-button"},"Add Stage"),T.showAddStageInput?(mn(),vn("div",Xne,[ra(pe("input",{"onUpdate:modelValue":w[53]||(w[53]=k=>T.newStage=k),placeholder:"Enter new stage",id:"m_add_stage",class:"m_add_stage"},null,512),[[id,T.newStage]]),pe("button",{onClick:w[54]||(w[54]=(...k)=>T.addStage&&T.addStage(...k)),class:"submit-button"},"Add")])):jo("",!0),pe("button",{onClick:w[55]||(w[55]=(...k)=>T.closeStageModal&&T.closeStageModal(...k)),class:"submit-button"},"Close")])])):jo("",!0),T.showModal?(mn(),vn("div",Jne,[pe("div",Qne,[pe("button",{type:"button",onClick:w[56]||(w[56]=(...k)=>T.closeModal&&T.closeModal(...k)),class:"close-button"},"X"),pe("h2",null,as(T.modalTitle),1),ra(pe("select",{"onUpdate:modelValue":w[57]||(w[57]=k=>T.selectedOption=k),class:"open_modal_drop-box"},[(mn(!0),vn(ni,null,Hi(T.modalOptions,k=>(mn(),vn("option",{key:k.value,value:k.value},as(k.text),9,qne))),128))],512),[[r1,T.selectedOption]]),pe("div",eoe,[pe("button",{onClick:w[58]||(w[58]=(...k)=>T.submitAction&&T.submitAction(...k)),class:"submit-button"},"Submit"),pe("button",{onClick:w[59]||(w[59]=(...k)=>T.closeModal&&T.closeModal(...k)),class:"cancel-button"},"Cancel")])])])):jo("",!0),pe("div",null,[pe("div",toe,[ra(pe("input",{"onUpdate:modelValue":w[60]||(w[60]=k=>T.searchQuery=k),type:"text",placeholder:"Search leads by name...",class:"search-bar"},null,512),[[id,T.searchQuery]]),pe("div",noe,"Total Leads: "+as(T.filteredLeads.length),1),w[123]||(w[123]=dJ('<div class="total-leads">Last 7 Days</div><div class="total-leads">Hot</div><div class="total-leads">Buyer</div><div class="total-leads">Seller</div><div class="total-leads">Closed</div>',5)),pe("button",{onClick:w[61]||(w[61]=k=>T.showForm=!0),class:"create-new-button"},"+ Create New")])]),T.showForm?(mn(),vn("div",ooe,[pe("div",soe,[pe("button",{type:"button",onClick:w[62]||(w[62]=k=>T.showForm=!1),id:"cancel_button"},"X"),w[131]||(w[131]=pe("h2",null,"Create New Lead",-1)),pe("form",{onSubmit:w[69]||(w[69]=hJ((...k)=>T.submitForm&&T.submitForm(...k),["prevent"]))},[pe("label",null,[w[124]||(w[124]=pl(" First Name: ")),ra(pe("input",{"onUpdate:modelValue":w[63]||(w[63]=k=>T.newLead.first_name=k),type:"text",required:""},null,512),[[id,T.newLead.first_name]]),T.errors.first_name?(mn(),vn("span",roe,as(T.errors.first_name),1)):jo("",!0)]),pe("label",null,[w[125]||(w[125]=pl(" Last Name: ")),ra(pe("input",{"onUpdate:modelValue":w[64]||(w[64]=k=>T.newLead.last_name=k),type:"text",required:""},null,512),[[id,T.newLead.last_name]]),T.errors.last_name?(mn(),vn("span",aoe,as(T.errors.last_name),1)):jo("",!0)]),pe("label",null,[w[126]||(w[126]=pl(" Email: ")),ra(pe("input",{"onUpdate:modelValue":w[65]||(w[65]=k=>T.newLead.email=k),type:"email",required:""},null,512),[[id,T.newLead.email]]),T.errors.email?(mn(),vn("span",ioe,as(T.errors.email),1)):jo("",!0)]),pe("label",null,[w[127]||(w[127]=pl(" Phone: ")),ra(pe("input",{"onUpdate:modelValue":w[66]||(w[66]=k=>T.newLead.phone=k),type:"tel",required:""},null,512),[[id,T.newLead.phone]]),T.errors.phone?(mn(),vn("span",loe,as(T.errors.phone),1)):jo("",!0)]),pe("label",null,[w[128]||(w[128]=pl(" Tag: ")),ra(pe("select",{"onUpdate:modelValue":w[67]||(w[67]=k=>T.newLead.tag=k),required:""},[(mn(!0),vn(ni,null,Hi(T.tags,k=>(mn(),vn("option",{key:k.id,value:k.id},as(k.name),9,coe))),128))],512),[[r1,T.newLead.tag]]),T.errors.tag?(mn(),vn("span",uoe,as(T.errors.tag),1)):jo("",!0)]),pe("label",null,[w[129]||(w[129]=pl(" Stage: ")),ra(pe("select",{"onUpdate:modelValue":w[68]||(w[68]=k=>T.newLead.stage=k),required:""},[(mn(!0),vn(ni,null,Hi(T.stages,k=>(mn(),vn("option",{key:k.id,value:k.id},as(k.name),9,doe))),128))],512),[[r1,T.newLead.stage]]),T.errors.stage?(mn(),vn("span",foe,as(T.errors.stage),1)):jo("",!0)]),w[130]||(w[130]=pe("button",{type:"submit",id:"submit_button"},"Submit",-1))],32)])])):jo("",!0),pe("div",null,[pe("div",null,[w[133]||(w[133]=pe("label",{for:"pageSize"},"Rows per page:",-1)),ra(pe("select",{"onUpdate:modelValue":w[70]||(w[70]=k=>T.pageSize=k),onChange:w[71]||(w[71]=k=>T.setPageSize(Number(k.target.value)))},w[132]||(w[132]=[pe("option",{value:"5"},"5",-1),pe("option",{value:"10"},"10",-1),pe("option",{value:"25"},"25",-1),pe("option",{value:"50"},"50",-1)]),544),[[r1,T.pageSize]])]),pe("div",moe,[pe("div",goe,[pe("table",hoe,[pe("thead",null,[pe("tr",null,[pe("th",poe,[pe("label",voe,[ra(pe("input",{type:"checkbox",onChange:w[72]||(w[72]=(...k)=>T.toggleSelectAll&&T.toggleSelectAll(...k)),"onUpdate:modelValue":w[73]||(w[73]=k=>T.allSelected=k),class:"custom-checkbox"},null,544),[[DK,T.allSelected]]),w[134]||(w[134]=pe("span",{class:"custom-checkbox-span"},null,-1))])]),fJ(S,{modelValue:T.selectedColumns,"onUpdate:modelValue":w[74]||(w[74]=k=>T.selectedColumns=k),tag:"tr","item-key":"col",handle:".drag-handle",onEnd:T.onColumnReorder},{item:MK(({element:k,index:z})=>{var K;return[pe("th",{class:Ur(["lead_TableHead",{"scroll-column":z>=6}])},[w[135]||(w[135]=pe("span",{class:"drag-handle"},"☰",-1)),pl(" "+as(((K=T.availableColumns[k])==null?void 0:K.label)||k),1)],2)]}),_:1},8,["modelValue","onEnd"])])]),pe("tbody",null,[(mn(!0),vn(ni,null,Hi(T.leads,(k,z)=>(mn(),vn("tr",{key:z},[pe("td",boe,[ra(pe("input",{type:"checkbox","onUpdate:modelValue":w[75]||(w[75]=K=>T.selectedLeads=K),value:k.id},null,8,yoe),[[DK,T.selectedLeads]])]),(mn(!0),vn(ni,null,Hi(T.selectedColumns,(K,J)=>(mn(),vn("td",{key:K,class:Ur({"scroll-column":J>=6})},[K==="first_name"?(mn(),OK(B,{key:0,to:"/update-profile/"+k.id,class:"lead-name-link"},{default:MK(()=>[pl(as(k[K]||"N/A"),1)]),_:2},1032,["to"])):(mn(),vn(ni,{key:1},[pl(as(k[K]||"N/A"),1)],64))],2))),128))]))),128))])])])]),T.filteredLeads.length===0?(mn(),vn("div",Coe,"No leads available.")):jo("",!0),T.toast.message?(mn(),vn("div",{key:1,class:Ur(`toast ${T.toast.type}`)},[pl(as(T.toast.message)+" ",1),pe("button",{onClick:w[76]||(w[76]=k=>T.toast.message=""),class:"toast-close-button"},"X")],2)):jo("",!0),pe("div",Soe,[pe("button",{onClick:w[77]||(w[77]=k=>T.changePage(T.currentPage-1)),disabled:T.currentPage===1},"Previous",8,xoe),pe("span",null,"Page "+as(T.currentPage)+" of "+as(T.totalPages),1),pe("button",{onClick:w[78]||(w[78]=k=>T.changePage(T.currentPage+1)),disabled:T.currentPage===T.totalPages},"Next",8,woe)])])]),T.showColumnsModal?(mn(),vn("div",Eoe,[pe("div",Toe,[pe("span",{class:"columns-modal-close",onClick:w[79]||(w[79]=(...k)=>T.closeColumnsModal&&T.closeColumnsModal(...k))},"×"),w[136]||(w[136]=pe("h3",null,"Select and Arrange Columns",-1)),pe("ul",Aoe,[(mn(!0),vn(ni,null,Hi(T.availableColumns,(k,z)=>(mn(),vn("li",{key:z,class:"columns-modal-item"},[pe("input",{type:"checkbox",checked:T.selectedColumns.includes(z),onChange:K=>T.toggleColumnSelection(z),disabled:k.disabled},null,40,Ooe),pl(" "+as(k.label),1)]))),128))]),T.selectedColumns.length===0?(mn(),vn("p",koe," ⚠️ Please select at least one column! ")):jo("",!0),pe("button",{class:"columns-modal-update-btn",onClick:w[80]||(w[80]=(...k)=>T.updateColumns&&T.updateColumns(...k))},"Save"),pe("button",{class:"columns-modal-update-btn cancel-btn",onClick:w[81]||(w[81]=(...k)=>T.closeColumnsModal&&T.closeColumnsModal(...k))},"Cancel")])])):jo("",!0)],64)}const Boe=Vee(Rte,[["render",Doe]]);export{Boe as default};
