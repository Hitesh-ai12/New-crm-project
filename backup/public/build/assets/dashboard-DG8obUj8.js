import{e as k,o as i,f as h,g as c,h as l,V as x,W as v,l as u,F as b,X as V,j as e,k as n,_ as B,r as _,b as y,Q as T,L as M,Y as U,n as D,O as F}from"./main-B6lduhDs.js";import{V as I,a as R}from"./VMenu-DbC3kBVI.js";import{V as q,a as E}from"./VCard-DAWIigei.js";import{V as A,a as f}from"./VRow-C5YPH_aT.js";import{V as Q}from"./VAvatar-DCRWcC4u.js";/* empty css              */import{a as X}from"./axios-DsPaXkF5.js";import"./index-B8zzSXAV.js";import"./ssrBoot-BGYu9N7T.js";import"./VImg-CuSWVABe.js";import"./VOverlay-D0hc1vwI.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-HfbfmXgh.js";/* empty css              */const j={__name:"MoreBtn",props:{menuList:{type:Array,required:!1},itemProps:{type:Boolean,required:!1},iconSize:{type:String,required:!1}},setup(d){const a=d;return(g,t)=>{const p=k("IconBtn");return i(),h(p,null,{default:c(()=>[l(x,{size:d.iconSize,icon:"ri-more-2-line"},null,8,["size"]),a.menuList?(i(),h(I,{key:0,activator:"parent"},{default:c(()=>[l(R,{items:a.menuList,"item-props":a.itemProps},null,8,["items","item-props"])]),_:1})):v("",!0)]),_:1})}}},O={class:"d-flex align-center gap-x-3 service-cards"},W={class:"d-flex flex-column"},Y={class:"text-body-1"},G={class:"text-h5"},H={__name:"AnalyticsTransactions",setup(d){const a=[{title:"Leads",stats:"245k",icon:"ri-pie-chart-2-line",color:"primary"},{title:"Action plan",stats:"Active",icon:"ri-group-line",color:"success"},{title:"Inbox",stats:"1.54k",icon:"ri-macbook-line",color:"warning"},{title:"Todays Events",stats:"$88k",icon:"ri-money-dollar-circle-line",color:"info"}],g=[{title:"Share",value:"Share"},{title:"Refresh",value:"Refresh"},{title:"Update",value:"Update"}];return(t,p)=>{const m=j;return i(),h(E,{title:"Dashboard"},{subtitle:c(()=>p[0]||(p[0]=[])),append:c(()=>[l(m,{"menu-list":g})]),default:c(()=>[l(q,{class:"services-card"},{default:c(()=>[l(A,null,{default:c(()=>[(i(),u(b,null,V(a,r=>l(f,{key:r.title,cols:"12",sm:"6",md:"3"},{default:c(()=>[e("div",O,[l(Q,{color:r.color,rounded:"",size:"40",class:"elevation-2"},{default:c(()=>[l(x,{size:"24",icon:r.icon},null,8,["icon"])]),_:2},1032,["color"]),e("div",W,[e("div",Y,n(r.title),1),e("h5",G,n(r.stats),1)])])]),_:2},1024)),64))]),_:1})]),_:1})]),_:1})}}},J={name:"LeadsPage",setup(){const d=_([]),a=_(!0),g=_(""),t=_(""),p=_([]),m=_(10),r=_(1),s=_({message:"",type:""}),C=async()=>{try{const o=await X.get("/leads");console.log(o.data),d.value=Array.isArray(o.data)?o.data:[]}catch{g.value="Failed to fetch leads."}finally{a.value=!1}},L=y(()=>Array.isArray(d.value)?d.value.filter(o=>o.first_name.toLowerCase().includes(t.value.toLowerCase())||o.last_name.toLowerCase().includes(t.value.toLowerCase())):[]),S=y(()=>{const o=(r.value-1)*m.value,w=o+m.value;return L.value.slice(o,w)}),P=y(()=>{const o=Math.ceil(L.value.length/m.value);return o>0?o:1}),z=o=>{o<1||o>P.value||(r.value=o)},N=o=>{m.value=o,r.value=1};return T(()=>{C()}),{loading:a,error:g,leads:d,searchQuery:t,selectedLeads:p,pageSize:m,currentPage:r,totalPages:P,paginatedLeads:S,changePage:z,setPageSize:N,toast:s}}},K={key:0},Z={id:"leadsTable",class:"table table-striped table-bordered leads-table"},$={key:1},ee={key:2},te={key:4},ae=["disabled"],se=["disabled"];function oe(d,a,g,t,p,m){var r;return i(),u(b,null,[!t.loading&&!t.error?(i(),u("div",K,[e("div",null,[a[6]||(a[6]=e("label",{for:"pageSize"},"Rows per page:",-1)),M(e("select",{"onUpdate:modelValue":a[0]||(a[0]=s=>t.pageSize=s),onChange:a[1]||(a[1]=s=>t.setPageSize(Number(s.target.value)))},a[5]||(a[5]=[e("option",{value:"5"},"5",-1),e("option",{value:"10"},"10",-1),e("option",{value:"25"},"25",-1),e("option",{value:"50"},"50",-1)]),544),[[U,t.pageSize]])]),e("table",Z,[a[7]||(a[7]=e("thead",null,[e("tr",null,[e("th",null,"First Name"),e("th",null,"Last Name"),e("th",null,"Phone"),e("th",null,"Email"),e("th",null,"Activity"),e("th",null,"Created"),e("th",null,"Tag"),e("th",null,"Stage"),e("th",null,"Source")])],-1)),e("tbody",null,[(i(!0),u(b,null,V(t.paginatedLeads,s=>(i(),u("tr",{key:s.id},[e("td",null,n(s.first_name),1),e("td",null,n(s.last_name),1),e("td",null,n(s.phone),1),e("td",null,n(s.email),1),e("td",null,n(s.activity||"N/A"),1),e("td",null,n(new Date(s.created_at).toLocaleDateString()),1),e("td",null,n(s.tag||"N/A"),1),e("td",null,n(s.stage||"N/A"),1),e("td",null,n(s.source||"N/A"),1)]))),128))])])])):v("",!0),t.loading?(i(),u("div",$,"Loading leads...")):v("",!0),t.error?(i(),u("div",ee,n(t.error),1)):v("",!0),(r=t.toast)!=null&&r.message?(i(),u("div",{key:3,class:D(`toast ${t.toast.type}`)},[F(n(t.toast.message)+" ",1),e("button",{onClick:a[2]||(a[2]=s=>t.toast.message=""),class:"toast-close-button"},"X")],2)):v("",!0),t.totalPages>1?(i(),u("div",te,[e("button",{onClick:a[3]||(a[3]=s=>t.changePage(t.currentPage-1)),disabled:t.currentPage===1},"Previous",8,ae),e("span",null,"Page "+n(t.currentPage)+" of "+n(t.totalPages),1),e("button",{onClick:a[4]||(a[4]=s=>t.changePage(t.currentPage+1)),disabled:t.currentPage===t.totalPages},"Next",8,se)])):v("",!0)],64)}const ne=B(J,[["render",oe]]),be={__name:"dashboard",setup(d){return(a,g)=>{const t=k("AnalyticsUserTabl");return i(),h(A,{class:"match-height"},{default:c(()=>[l(f,{cols:"12",md:"12"},{default:c(()=>[l(H)]),_:1}),l(f,{cols:"12"},{default:c(()=>[l(ne)]),_:1}),l(f,{cols:"12"},{default:c(()=>[l(t)]),_:1})]),_:1})}}};export{be as default};
