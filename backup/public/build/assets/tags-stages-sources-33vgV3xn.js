import{a as h}from"./axios-DsPaXkF5.js";import{S as V}from"./sweetalert2.all-B9kxGEux.js";import{r as u,Q as b,_ as A,l as v,j as a,F as w,X as T,k as f,L as B,bm as N,W as x,o as m,O as S}from"./main-B6lduhDs.js";import"./_commonjsHelpers-Cpj98o6Y.js";function F(){const r=u([]),s=u([]),c=u([]),e=u(!1),n=u(""),p=u(!1),o=u(""),i=u(null),d=u(!1),y=u(""),k=async()=>{try{const t=(await h.get("/items")).data;r.value=t.tags||[],s.value=t.stages||[],c.value=t.sources||[]}catch(l){console.error("Error fetching items:",l)}},M=(l,t=null)=>{n.value=l,t?(p.value=!0,o.value=t.name,i.value=t):(p.value=!1,o.value="",i.value=null),e.value=!0},_=()=>{e.value=!1},E=async()=>{if(o.value.trim()===""){alert(`Please enter a valid ${n.value}.`);return}try{if(p.value&&i.value){const t=(await h.put(`/api/items/${i.value.id}`,{name:o.value})).data.item;n.value==="tag"?r.value=r.value.map(g=>g.id===t.id?t:g):n.value==="stage"?s.value=s.value.map(g=>g.id===t.id?t:g):n.value==="source"&&(c.value=c.value.map(g=>g.id===t.id?t:g)),C(`${n.value} updated successfully!`)}else{const t=(await h.post("/api/items",{name:o.value,type:n.value})).data.item;n.value==="tag"?r.value.push(t):n.value==="stage"?s.value.push(t):n.value==="source"&&c.value.push(t),C(`${n.value} added successfully!`)}_()}catch(l){console.error("Error saving item:",l),alert("There was an error saving your data.")}},I=l=>{V.fire({title:`Are you sure you want to delete this ${l.type}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete",cancelButtonText:"No, Cancel"}).then(async t=>{t.isConfirmed&&await D(l)})},D=async l=>{try{await h.delete(`/items/${l.id}`),l.type==="tag"?r.value=r.value.filter(t=>t.id!==l.id):l.type==="stage"?s.value=s.value.filter(t=>t.id!==l.id):l.type==="source"&&(c.value=c.value.filter(t=>t.id!==l.id)),C("Item deleted successfully!")}catch(t){console.error("Error deleting item:",t),alert("There was an error deleting your data.")}},C=l=>{y.value=l,d.value=!0,setTimeout(()=>d.value=!1,3e3)};return b(()=>{k()}),{tags:r,stages:s,sources:c,showModal:e,modalType:n,modalEditMode:p,inputValue:o,openModal:M,closeModal:_,saveItem:E,showToast:d,toastMessage:y,confirmDelete:I}}const L={setup(){const{tags:r,stages:s,sources:c,showModal:e,modalType:n,modalEditMode:p,inputValue:o,openModal:i,closeModal:d,saveItem:y,showToast:k,toastMessage:M,confirmDelete:_}=F();return{tags:r,stages:s,sources:c,showModal:e,modalType:n,modalEditMode:p,inputValue:o,openModal:i,closeModal:d,saveItem:y,showToast:k,toastMessage:M,confirmDelete:_}}},U={class:"cards-container"},j={class:"card"},O={class:"tags"},P={class:"tag-icons"},Q=["onClick"],W=["onClick"],X={class:"card"},Y={class:"stages"},q={class:"tag-icons"},z=["onClick"],G=["onClick"],H={class:"card"},J={class:"sources"},K={class:"tag-icons"},R=["onClick"],Z=["onClick"],$={key:0,class:"modal"},ee={class:"modal-content"},se=["placeholder"],oe={class:"modal-actions"},ae={key:1,class:"toast"};function te(r,s,c,e,n,p){return m(),v("div",null,[s[9]||(s[9]=a("h1",{class:"tss-class"},"Tags | Stage | Source",-1)),a("div",U,[a("div",j,[s[6]||(s[6]=a("h3",null,"Tags",-1)),a("div",O,[(m(!0),v(w,null,T(e.tags,(o,i)=>(m(),v("span",{key:o.id,class:"tag"},[a("div",P,[a("span",{class:"tag-icon",onClick:d=>e.openModal("tag",o)},"✏️",8,Q),a("span",{class:"delete-icon",onClick:d=>e.confirmDelete(o)},"🗑️",8,W)]),S(" "+f(o.name),1)]))),128)),a("button",{onClick:s[0]||(s[0]=o=>e.openModal("tag"))},"➕ Add Tag")])]),a("div",X,[s[7]||(s[7]=a("h3",null,"Stage",-1)),a("div",Y,[(m(!0),v(w,null,T(e.stages,(o,i)=>(m(),v("span",{key:i,class:"stage"},[a("div",q,[a("span",{class:"tag-icon",onClick:d=>e.openModal("stage",o)},"✏️",8,z),a("span",{class:"delete-icon",onClick:d=>e.confirmDelete(o)},"🗑️",8,G)]),S(" "+f(o.name),1)]))),128)),a("button",{onClick:s[1]||(s[1]=o=>e.openModal("stage"))},"➕ Add Stage")])]),a("div",H,[s[8]||(s[8]=a("h3",null,"Source",-1)),a("div",J,[(m(!0),v(w,null,T(e.sources,(o,i)=>(m(),v("span",{key:i,class:"source"},[a("div",K,[a("span",{class:"tag-icon",onClick:d=>e.openModal("source",o)},"✏️",8,R),a("span",{class:"delete-icon",onClick:d=>e.confirmDelete(o)},"🗑️",8,Z)]),S(" "+f(o.name),1)]))),128)),a("button",{onClick:s[2]||(s[2]=o=>e.openModal("source"))},"➕ Add Source")])])]),e.showModal?(m(),v("div",$,[a("div",ee,[a("h3",null,f(e.modalEditMode?"Edit":"Add")+" "+f(e.modalType),1),B(a("input",{type:"text","onUpdate:modelValue":s[3]||(s[3]=o=>e.inputValue=o),placeholder:"Enter "+e.modalType},null,8,se),[[N,e.inputValue]]),a("div",oe,[a("button",{onClick:s[4]||(s[4]=(...o)=>e.saveItem&&e.saveItem(...o))},f(e.modalEditMode?"Update":"Add")+" "+f(e.modalType),1),a("button",{onClick:s[5]||(s[5]=(...o)=>e.closeModal&&e.closeModal(...o))},"Close")])])])):x("",!0),e.showToast?(m(),v("div",ae,f(e.toastMessage),1)):x("",!0)])}const re=A(L,[["render",te]]);export{re as default};
